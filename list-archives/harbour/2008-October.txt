From harbour.01 at syenar.hu  Wed Oct  1 03:20:23 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  1 03:20:36 2008
Subject: [Harbour] Yet another memory allocator?
In-Reply-To: <19750288.post@talk.nabble.com>
References: <19749208.post@talk.nabble.com>
	<DFECE5FA-9E4A-4518-B497-6A6A832EA69F@syenar.hu>
	<19750288.post@talk.nabble.com>
Message-ID: <79026B91-710D-4542-91C4-E07C9145CF60@syenar.hu>

> Also here
> http://prdownloads.sourceforge.net/nedmalloc/nedmalloc_v105_svn1078.zip?download
> http://prdownloads.sourceforge.net/nedmalloc/nedmalloc_v105_svn1078.zip 
>   I
> found dlmalloc V2.8.4
>
>
>    V2.8.4 (not yet released)
>      * Add mspace_mmap_large_chunks; thanks to Jean Brouwers
>      * Fix insufficient sys_alloc padding when using 16byte alignment
>      * Fix bad error check in mspace_footprint
>      * Adaptations for ptmalloc, courtesy of Wolfram Gloger.
>      * Reentrant spin locks, courtesy of Earl Chew and others
>      * Win32 improvements, courtesy of Niall Douglas and Earl Chew
>      * Add NO_SEGMENT_TRAVERSAL and MAX_RELEASE_CHECK_RATE options
>      * Extension hook in malloc_state
>      * Various small adjustments to reduce warnings on some compilers
>      * Various configuration extensions/changes for more platforms.  
> Thanks
>         to all who contributed these.
>
> Maybe it's can be helpful for Harbour.

Nice find.

I'm getting a macro redefinition error when trying it
with Harbour/MSVC, but all these changes look good anyway.

Update: After fixing the small bug, speedtst results
were quite similar (a bit slower actually) to the one
with current dlmalloc version. Maybe in real MT apps
the difference is better. I've tested with MSVC.

/off

BTW, MSVC is creating amazingly small and fast
executables, startup time is also far the best.
Sizes for one of my apps (-gc3):

GCC: 21383680
BCC: 19427840
MSC: 17853440 (constants, along with the symbol tables
                are merged .exe-wide)

/on

Brgds,
Viktor

From dbtopas at dbtopas.lt  Wed Oct  1 03:34:51 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct  1 03:32:55 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080930181750.GA30722@34-mo7-2.acn.waw.pl>
References: <20080915154445.GA803@34-mo7-2.acn.waw.pl>	<48CE9A2E.9020201@dbtopas.lt>	<20080915184410.GA13559@34-mo7-2.acn.waw.pl>	<48CECBF9.1080605@dbtopas.lt>	<20080916173546.GA30158@34-mo7-2.acn.waw.pl>	<48D037DE.8010300@dbtopas.lt>	<20080917001732.GC24897@34-mo7-2.acn.waw.pl>	<48D248C1.8090600@dbtopas.lt>	<20080923133537.GE20289@34-mo7-2.acn.waw.pl>	<48E2647D.7080505@dbtopas.lt>
	<20080930181750.GA30722@34-mo7-2.acn.waw.pl>
Message-ID: <48E3281B.6050901@dbtopas.lt>

Przemyslaw Czerpak wrote:
>> The only reason I see for binding stack preload with "no tls" is that stack 
>> preload also uses inlined Windows like function to access tls. But I see it 
>> as to separate features stack: stack preload and tls access method 
>> (compiler native or system API)?
> 
> When compiler native TLS is disabled and file define HB_STACK_PRELOAD
> before including harbour header files then each function which have
> to access hb_stack buffers it's address by HB_STACK_TLS_PRELOAD.
> If possible assembler inline function is used to retrieve stack address
> which is a little bit faster then call to OS TLS function and even native
> TLS support in some compilers (f.e.BCC).
> Compile current SVN code without any additional switches and compare
> the tstspeed.prg results to previous ones.

Hi,


thanks for explanation. I just want to run all tests one after another 
to make results comparable. Because sometimes numbers obtained a few 
days ago can be calculated in a different OS memory/CPU usage state, so 
results can give a few seconds difference.
I've used -DHB_USE_TLS to obtain "previous" results (use compiler native 
TLS, no stack preloading).

The results are:

10/01/08 10:03:30 Harbour 1.1.0dev (Rev. 9523), Windows XP 5.1.2600 
Service Pack 2

ARR_LEN =         16                      ST      MT      MT
N_LOOPS =    1000000                            USE_TLS
empty loops overhead =                   0.19    0.30    0.28
CPU usage -> secondsCPU()

c:=L_C ->                                0.19    0.39    0.31
n:=L_N ->                                0.19    0.27    0.19
d:=L_D ->                                0.22    0.27    0.19
c:=M_C ->                                0.23    0.45    0.38
n:=M_N ->                                0.20    0.30    0.23
d:=M_D ->                                0.22    0.30    0.23
(sh) c:=F_C ->                           0.38    0.81    0.84
(sh) n:=F_N ->                           0.58    0.61    0.64
(sh) d:=F_D ->                           0.30    0.34    0.36
(ex) c:=F_C ->                           0.38    0.81    0.83
(ex) n:=F_N ->                           0.56    0.64    0.66
(ex) d:=F_D ->                           0.30    0.34    0.33
n:=o:GenCode ->                          0.45    0.81    0.78
n:=o[8] ->                               0.42    0.63    0.52
round(i/1000,2) ->                       0.63    0.92    0.81
str(i/1000) ->                           1.50    2.27    2.03
val(a3[i%ARR_LEN+1]) ->                  1.36    1.84    1.64
dtos(j+i%10000-5000) ->                  1.39    2.06    2.03
eval({||i%ARR_LEN}) ->                   0.69    1.03    0.89
eval({|x|x%ARR_LEN},i) ->                0.78    1.20    1.02
eval({|x|f1(x)},i) ->                    1.28    1.81    1.42
&('f1('+str(i)+')') ->                   7.66   15.13   13.14
eval([&('{|x|f1(x)}')]) ->               1.25    1.81    1.39
j := valtype(a)+valtype(i) ->            1.08    2.00    1.86
j := str(i%100,2) $ a2[i%ARR_LEN+1] ->   2.27    3.45    3.02
j := val(a2[i%ARR_LEN+1]) ->             1.55    2.11    1.91
j := a2[i%ARR_LEN+1] == s ->             1.06    1.70    1.50
j := a2[i%ARR_LEN+1] = s ->              1.11    1.69    1.58
j := a2[i%ARR_LEN+1] >= s ->             1.17    1.67    1.52
j := a2[i%ARR_LEN+1] < s ->              1.13    1.67    1.53
aadd(aa,{i,j,s,a,a2,t,bc}) ->            4.38    5.92    5.81
f0() ->                                  0.33    0.55    0.42
f1(i) ->                                 0.55    0.89    0.64
f2(c[8]) ->                              0.45    0.81    0.63
f2(c[40000]) ->                          0.47    0.80    0.64
f2(@c[40000]) ->                         0.36    0.64    0.47
f2(c[40000]); c2:=c ->                   0.69    1.19    1.00
f2(@c[40000]); c2:=c ->                  0.56    1.03    0.88
f3(a,a2,c,i,j,t,bc) ->                   1.16    2.05    1.70
f2(a2) ->                                0.44    0.81    0.66
s:=f4() ->                               2.13    2.56    2.47
s:=f5() ->                               0.84    1.38    1.27
ascan(a,i%ARR_LEN) ->                    0.73    1.25    1.06
ascan(a2,c+chr(i%64+64)) ->              2.47    3.67    3.33
ascan(a,{|x|x==i%ARR_LEN}) ->           10.95   13.48   11.66
=============================================================
total application time:                 64.95  100.00   89.30
total real time:                        65.89  100.97   90.36

Previous MT overhead was 54%, current 37%.

One thing is not clear for me. You've committed exactly the same inlined 
tls accessing as I've used in my test, but your code does not GPF. My 
was GPFing because of wrong generated CPU code.


Best regards,
Mindaugas

From harbour.01 at syenar.hu  Wed Oct  1 04:11:42 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  1 04:17:34 2008
Subject: [Harbour] Question: Making -gc3 the default for core
Message-ID: <8C6EAE74-46B0-4257-9A0C-B1394F32D66E@syenar.hu>

Hi folks,

I'd like to ask for opinions on turning on Harbour
-gc3 switch (native C code generation) for core .prg code.

The involved code parts are high-level functions in RTL,
the debugger and some high-level RDD functions.

To me it seems that enabling this switch gives a
noticeable performance boost (mainly to tget, tbrowse,
and other UI classes). The cost is a slightly larger
final executable (not significant for real-world
programs), and some potential CPU cache trashing,
which may or may not be a problem, I didn't notice
anything bad in this regard.

Any thoughts?

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Wed Oct  1 05:22:23 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Oct  1 05:22:33 2008
Subject: [Harbour] How difficult is to implement this alternative syntax?
Message-ID: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>

JavaScript is a widely used and known language and I've found that
with few changes an Harbour source can be "digested" by IDEs like
Eclipse or NetBeans as a JavaScript source and that these changes can
also "fix" some "ambiguities" of the actual language.
Moreover I think this "alternative" syntax would increase the
acceptance of Harbour to new developers that use C, C++, C#, Php, etc.
Please understand me I'm not suggesting to use the new syntax in
Harbour codebase and everything need to be optional, I only want to
understand if the pp can be used and how and where changes to the
compiler are needed.

1) {} to enclose function's body. This valid code:

function test( a )

if a == 1
   return .t.
else
   return .f.
endif

using -w gives: warning: W0007  Function 'TEST' does not end with
RETURN statement, so it would be good to have:

function test( a ) {
if a == 1
   return .t.
else
   return .f.
endif
}

the rule could be: "if after the function there is an open curly brace
there must be a close brace at the end and at least one return inside"

2) ";" as statement separator. This is a valid code:

function test( a ) ; outstd( "Hello World" ) ; return nil

but not if I simply "reform" the code:

function test( a ) ;
outstd( "Hello World" ) ;
return nil

the rule could be: ";" is the statement separator but is optional if
it is followed by a <newline>
( HB_PP_MULTILINE_STRING could be changed to "\" <newline> )

3) "=" vs "==" vs ":="

Viktor took some time to change <> to !( == ) and = to := so it could
be that = is always assignment and == is always equal
( clearly activated via a compiler switch ) so we could have:

function test( a )
   var a = 1;

instead of

function test( a )
   local a := 1

in classes we already use VAR for "local" members.

These changes are enough to get a correctly outlined source with the
syntax highlighted.

Comments?

best regards,
Lorenzo
From harbour.01 at syenar.hu  Wed Oct  1 07:01:08 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  1 07:01:21 2008
Subject: [Harbour] How difficult is to implement this alternative syntax?
In-Reply-To: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
Message-ID: <503F136F-5B28-4785-B8CF-C47443DE4812@syenar.hu>

>
Hi Lorenzo and all,

> 1) {} to enclose function's body. This valid code:
> 2) ";" as statement separator. This is a valid code:
> 3) "=" vs "==" vs ":="
>
> Comments?

This wouldn't be Clipper anymore.

C-like syntax with Clipper-like high-levelness is
already implemented as C#.

If the goal is to make Harbour compatible with Eclipse,
IMO one should rather try to contribute the relevant
parts to the Eclipse project itself, instead of changing
the Clipper language to fit into their existing concept.
Maybe it's just a matter of creating a syntax-rule file.

Brgds,
Viktor

PS: Just slightly related, but I'd rather find it useful
to add some switches to the compiler to warn on
obsolete, non-recommended/ambiguous or unnecessary
syntax alternatives, like '=' used as assignment. If we
are to clean or change the language syntax that is, and
drive language users to a better and more coherent syntax
style. Some other candidtates: if(), .not., <>, #, */&& comments.
Notice: Many of these come from dBase III+/Clipper <=87
times, and the only reason they are there is compatibility
with such dinosaur code.

From lorenzo.fiorini at gmail.com  Wed Oct  1 07:14:44 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Oct  1 07:14:52 2008
Subject: [Harbour] Re: How difficult is to implement this alternative syntax?
In-Reply-To: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
Message-ID: <9257026e0810010414v47656952u766d6e8e0c8a5985@mail.gmail.com>

On Wed, Oct 1, 2008 at 11:22 AM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com> wrote:

> 1) {} to enclose function's body. This valid code:

xcommand { =>
xcommand } =>

Is it correct to say that these will remove "only" curly braces that
are in a line by itself?

best regards,
Lorenzo
From druzus at acn.waw.pl  Wed Oct  1 08:34:44 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  1 08:35:06 2008
Subject: [Harbour] 2008-09-15 13:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48E3281B.6050901@dbtopas.lt>
References: <20080915184410.GA13559@34-mo7-2.acn.waw.pl>
	<48CECBF9.1080605@dbtopas.lt>
	<20080916173546.GA30158@34-mo7-2.acn.waw.pl>
	<48D037DE.8010300@dbtopas.lt>
	<20080917001732.GC24897@34-mo7-2.acn.waw.pl>
	<48D248C1.8090600@dbtopas.lt>
	<20080923133537.GE20289@34-mo7-2.acn.waw.pl>
	<48E2647D.7080505@dbtopas.lt>
	<20080930181750.GA30722@34-mo7-2.acn.waw.pl>
	<48E3281B.6050901@dbtopas.lt>
Message-ID: <20081001123444.GA9265@34-mo7-2.acn.waw.pl>

On Wed, 01 Oct 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> The results are:
> ARR_LEN =         16                      ST      MT      MT
> N_LOOPS =    1000000                            USE_TLS
[...]
> total application time:                 64.95  100.00   89.30
> Previous MT overhead was 54%, current 37%.

Thanks. It confirms other users results.

> One thing is not clear for me. You've committed exactly the same inlined 
> tls accessing as I've used in my test, but your code does not GPF. My was 
> GPFing because of wrong generated CPU code.

Because it's used in different context. The returned value is
always assign to C local variable and then this variable is used.
In such case even if BCC optimize the code to use only registers
without memory vars then it knows in which register it will keep
the return value and mark it as used.

In GNU C things are much simpler because I can inform GCC which
registers and/or memory variables are used as input and which for
output. In some context I can even give GCC the freedom to chose
any register it prefers.

   static __inline__ void * hb_stack_ptr_from_tls( void )
   {
      void * p;
      __asm__ (
         "movl  %%fs:(0x18), %0\n\t"
         "movl  0x0e10(%0,%1,4), %0\n\t"
         :"=a" (p)
         :"c" (hb_stack_key)
      );
      return p;
   }

In this code I forced accumulator as result ("=a") and marked that
counter register ("c") should contain memory variable (hb_stack_key) at
input. I do not know how to make sth like that with BCC.
In GCC it's safe to use this inline function in any context even
without HB_STACK_PRELOAD and I'll make it ASAP what should give small
speed improvement yet.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Oct  1 08:47:29 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  1 08:47:41 2008
Subject: [Harbour] 2008-10-01 14:46 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c923c3$Blat.v2.6.2$dd9622ee$3f8cc800a94@127.0.0.1>

2008-10-01 14:46 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbct/ctmisc.prg
    ! Fix to CENTER() when 3rd param is logical.
    + Added ALLOFREE().
--
Brgds,
Viktor

From druzus at acn.waw.pl  Wed Oct  1 09:16:09 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  1 09:16:31 2008
Subject: [Harbour] How difficult is to implement this alternative syntax?
In-Reply-To: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
Message-ID: <20081001131609.GB9265@34-mo7-2.acn.waw.pl>

On Wed, 01 Oct 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> JavaScript is a widely used and known language and I've found that
> with few changes an Harbour source can be "digested" by IDEs like
> Eclipse or NetBeans as a JavaScript source and that these changes can
> also "fix" some "ambiguities" of the actual language.
> Moreover I think this "alternative" syntax would increase the
> acceptance of Harbour to new developers that use C, C++, C#, Php, etc.
> Please understand me I'm not suggesting to use the new syntax in
> Harbour codebase and everything need to be optional, I only want to
> understand if the pp can be used and how and where changes to the
> compiler are needed.

It's not such simple as you may think and I do not talk about
technical problem with intorducing new syntax. This is rather
trivial.

> 1) {} to enclose function's body. This valid code:
> function test( a )
> if a == 1
>    return .t.
> else
>    return .f.
> endif
> using -w gives: warning: W0007  Function 'TEST' does not end with
> RETURN statement, so it would be good to have:

This have to be fixed in compiler.

> function test( a ) {
> if a == 1
>    return .t.
> else
>    return .f.
> endif
> }
> the rule could be: "if after the function there is an open curly brace
> there must be a close brace at the end and at least one return inside"

I do not see how it can help in fixing above warning message.
There is no relation at all. We will still have it. To fix it
it's necessary to update internal logic so it will work correctly
also for code like:
   function test( a ) {
      if a == 1
         return .t.
      elseif a == 3
         return .f.
      elseif a == 4
         if f2()==5
            return .t.
         elseif f3()==10
            break;
         else
            return .f.
         endif
      else
         return .f.
      endif

without warnings and for:

   function test( a ) {
      if a == 1
         return .t.
      elseif a == 3
         return .f.
      elseif a == 4
         if f2()==5
            return .t.
         elseif f3()==10
            ++a
         else
            return .f.
         endif
      else
         return .f.
      endif

with warnings.

> 2) ";" as statement separator. This is a valid code:
> function test( a ) ; outstd( "Hello World" ) ; return nil
> but not if I simply "reform" the code:
> function test( a ) ;
> outstd( "Hello World" ) ;
> return nil
> the rule could be: ";" is the statement separator but is optional if
> it is followed by a <newline>
> ( HB_PP_MULTILINE_STRING could be changed to "\" <newline> )

This is not compiler but PP issue. You will have to change
line concatenation character otherwise PP will make from
these 3 lines single lines which will be preprocessed and
then passed to compiler.
So you are asking to use some other character, f.e. '\' for
line concatenation.

> 3) "=" vs "==" vs ":="
> Viktor took some time to change <> to !( == ) and = to := so it could
> be that = is always assignment and == is always equal
> ( clearly activated via a compiler switch ) so we could have:

The only one reason Viktor replaced = with == in core code is
possible SET EXACT interaction. Otherwise it's perfectly valid
code. And even more. If you touch '=' operator behavior then
you will have to change also '<', '<=', '>', '>=' because you
should keep some general mathematical logic rules working, f.e.:
   if a < b then !( a > b ) and !( a == b ) and !( a >= b )
   if a >= b then !( a < b )
   [...]

You do not have to think about them but when you are writing code
then you are using such rules mechanically because they are intuitive
and you used to use them from ground school. If we change only one
operator then we will create really crazy world. We will have to
change all to keep above rules working. It will cause that the most
of existing code will have to be rewritten and we will use very
important for many people functionality: current '=', '<=', '>=',
'<' and '>' behavior which can greatly simplify a lot of code.

> function test( a )
>    var a = 1;
> instead of
> function test( a )
>    local a := 1
> in classes we already use VAR for "local" members.

It's PP rule. We also support DATA. You can use any other names
if you will add new PP rule. You can also use VAR instead of LOCAL
if you will make:

   #xcommand VAR <vars,...> [ AS <type> ] => LOCAL <vars> [ AS <type> ]

> These changes are enough to get a correctly outlined source with the
> syntax highlighted.

Syntax highlighting in some editors is not a problem. It's enough to update
highlighting rules in used editor. AFAIR in the past Giancarlo created .prg
rules for eclipse or some other popular IDE.
Such things should never force language syntax modification.

best regards,
Przemek
From dbtopas at dbtopas.lt  Wed Oct  1 09:32:05 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct  1 09:30:19 2008
Subject: [Harbour] Question: Making -gc3 the default for core
In-Reply-To: <8C6EAE74-46B0-4257-9A0C-B1394F32D66E@syenar.hu>
References: <8C6EAE74-46B0-4257-9A0C-B1394F32D66E@syenar.hu>
Message-ID: <48E37BD5.50806@dbtopas.lt>

Szak?ts Viktor wrote:
> I'd like to ask for opinions on turning on Harbour
> -gc3 switch (native C code generation) for core .prg code.
> 
> To me it seems that enabling this switch gives a
> noticeable performance boost (mainly to tget, tbrowse,
> and other UI classes). The cost is a slightly larger
> final executable (not significant for real-world
> programs)

Hi,


I do not remember exact test results I've done when -gc3 appeared, but 
performance increased about 7% and executable size was doubled. (I'm not 
using tget, tbrowse, and other Harbour's UI classes).


Best regards,
Mindaugas
From lorenzo.fiorini at gmail.com  Wed Oct  1 09:37:03 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Oct  1 09:37:12 2008
Subject: [Harbour] How difficult is to implement this alternative syntax?
In-Reply-To: <503F136F-5B28-4785-B8CF-C47443DE4812@syenar.hu>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
	<503F136F-5B28-4785-B8CF-C47443DE4812@syenar.hu>
Message-ID: <9257026e0810010637r68530f55lf8865173c598a247@mail.gmail.com>

On Wed, Oct 1, 2008 at 1:01 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> If the goal is to make Harbour compatible with Eclipse,
> IMO one should rather try to contribute the relevant
> parts to the Eclipse project itself, instead of changing
> the Clipper language to fit into their existing concept.
> Maybe it's just a matter of creating a syntax-rule file.

This was my first idea. I've contacted a Java developer but he told me
that it's not a trivial task. Language plugins are not only about
syntax coloring but also outlining, source refactoring and so on. You
need to know well the specific platform ( Eclipse is different from
NetBeans ) not only Java.

But this apart the "=" vs ":=" and the semicolon issues are general
issue that will only improve the acceptance of the language.

> PS: Just slightly related, but I'd rather find it useful
> to add some switches to the compiler to warn on
> obsolete, non-recommended/ambiguous or unnecessary
> syntax alternatives, like '=' used as assignment. If we
> are to clean or change the language syntax that is, and
> drive language users to a better and more coherent syntax
> style. Some other candidtates: if(), .not., <>, #, */&& comments.
> Notice: Many of these come from dBase III+/Clipper <=87
> times, and the only reason they are there is compatibility
> with such dinosaur code.

Clearly I think the contrary for ":=" vs "=": it is the ":=" that
should be ALWAYS like "=".

best regards,
Lorenzo
From mbelgrano at deltain.it  Wed Oct  1 09:49:46 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Oct  1 09:50:10 2008
Subject: [Harbour] How difficult is to implement this alternative syntax?
In-Reply-To: <9257026e0810010637r68530f55lf8865173c598a247@mail.gmail.com>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com><503F136F-5B28-4785-B8CF-C47443DE4812@syenar.hu>
	<9257026e0810010637r68530f55lf8865173c598a247@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F01C@SRV02.deltain.net>

> If the goal is to make Harbour compatible with Eclipse, IMO one should

> rather try to contribute the relevant parts to the Eclipse project 
> itself, instead of changing the Clipper language to fit into their 
> existing concept.
>This was my first idea. I've contacted a Java developer but he told me
>that it's not a trivial task. Language plugins are not only about
>syntax coloring but also outlining, source refactoring and so on. You
>need to know well the specific platform ( Eclipse is different from
>NetBeans ) not only Java.

Xmate have syntax highlight for harbour and c++ and is better than
eclipse as ide for harbour

From info at fsgiudice.com  Wed Oct  1 09:55:05 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Oct  1 09:55:20 2008
Subject: [Harbour] How difficult is to implement this alternative syntax?
In-Reply-To: <20081001131609.GB9265@34-mo7-2.acn.waw.pl>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
	<20081001131609.GB9265@34-mo7-2.acn.waw.pl>
Message-ID: <48E38139.6010402@fsgiudice.com>

Hi Przemek,

Przemyslaw Czerpak ha scritto:
> Syntax highlighting in some editors is not a problem. It's enough to update
> highlighting rules in used editor. AFAIR in the past Giancarlo created .prg
> rules for eclipse or some other popular IDE.

AFAIK only for Kate, that I use under Linux/CentOS/KDE
Under Windows I use UltraEdit with [x]harbour rules

my 2 cents

best regards

Francesco

From harbour.01 at syenar.hu  Wed Oct  1 09:55:52 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  1 09:56:06 2008
Subject: [Harbour] Question: Making -gc3 the default for core
In-Reply-To: <48E37BD5.50806@dbtopas.lt>
References: <8C6EAE74-46B0-4257-9A0C-B1394F32D66E@syenar.hu>
	<48E37BD5.50806@dbtopas.lt>
Message-ID: <7980179A-EB1A-40FB-B862-48467CAE74CB@syenar.hu>

>
Hi Mindaugas,

> Szak?ts Viktor wrote:
>> I'd like to ask for opinions on turning on Harbour
>> -gc3 switch (native C code generation) for core .prg code.
>> To me it seems that enabling this switch gives a
>> noticeable performance boost (mainly to tget, tbrowse,
>> and other UI classes). The cost is a slightly larger
>> final executable (not significant for real-world
>> programs)
>
> Hi,
>
> I do not remember exact test results I've done when -gc3 appeared,  
> but performance increased about 7% and executable size was doubled.  
> (I'm not using tget, tbrowse, and other Harbour's UI classes).

I did quite some tests and for CUI elements (tget
and tbrowse) the speed difference is easily noticeable.
Most (70-80% of) .prg parts in RTL are UI/reporting
related functions.

In a normal app, the linked .prg parts of our RTL
is really just a small portion of the whole executable,
so the overall size difference is not significant.
In a GUI app, the size overhead is hardly noticeable.

F.e. one of my large CUI app (with MSVC - no upx):
- app gc3 + Harbour gc3: 17853440
- app gc0 + Harbour gc3:  5871616
- app gc0 + Harbour gc0:  5687808

[ The size overhead of _all_ RTL .prg parts compiled
with -gc3, in a final executable is about 580KB
(hbrun.exe), which is the maximum overhead an app
can ever get, not a typical scenario. ]

Brdgs,
Viktor

From a.jurkiewicz at abix.info.pl  Wed Oct  1 09:57:16 2008
From: a.jurkiewicz at abix.info.pl (ABIX - Adam Jurkiewicz)
Date: Wed Oct  1 09:57:24 2008
Subject: [Harbour] How difficult is to implement this alternative syntax?
In-Reply-To: <9257026e0810010637r68530f55lf8865173c598a247@mail.gmail.com>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
	<503F136F-5B28-4785-B8CF-C47443DE4812@syenar.hu>
	<9257026e0810010637r68530f55lf8865173c598a247@mail.gmail.com>
Message-ID: <200810011557.17032.a.jurkiewicz@abix.info.pl>

Dnia ?roda, 1 pa?dziernika 2008, Lorenzo Fiorini napisa?:
> But this apart the "=" vs ":=" and the semicolon issues are general
> issue that will only improve the acceptance of the language.

Just one word, Lorenzo, please consider the sutiation, in which I (as old 
Clipper programer) used to use ":=". 
I think in today world, in wich GUI and IDE and RAD (rapid app. devel.) are 
the most common used by young programmers (who remember MultiEdit? - Przemek, 
don't answer). In my opinion changing ":=" to "=" is not necessary. If 
someone wants to learn Harbour, then he will learn. But if someone can't make 
a app without GUI IDE or sth. else, then ..... 
GUI/IDE should help to create apps, but not be the only one.

Some times ago I found AutoIT Script language, very nice for Windows.With it I 
found very nice source code editor, SciTE. Just think, what would be, if I 
ask to this group (specialy private to Przemek) for making some changes in 
Harbour to make it nice look in SciTE. I don't want to think.
But look at http://groups.google.com/group/scite-interest/web/extras?pli=1
there is a lot of files to make SciTE works with a lot of languages.

I think, that's a better way to improve the acceptance of the language.

Adam
-- 
ABIX - Linuksowe Systemy Wspomagania Biznesu www.abix.info.pl
Gadu-Gadu: 302315
Skype: abix_adamj 
Wsparcie aplikacji: http://groups-beta.google.com/group/abix-rcsoft?hl=pl
From lorenzo.fiorini at gmail.com  Wed Oct  1 09:59:46 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Oct  1 09:59:54 2008
Subject: [Harbour] How difficult is to implement this alternative syntax?
In-Reply-To: <20081001131609.GB9265@34-mo7-2.acn.waw.pl>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
	<20081001131609.GB9265@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0810010659h72fddf37r866f488e6623caea@mail.gmail.com>

On Wed, Oct 1, 2008 at 3:16 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> This is not compiler but PP issue. You will have to change
> line concatenation character otherwise PP will make from
> these 3 lines single lines which will be preprocessed and
> then passed to compiler.
> So you are asking to use some other character, f.e. '\' for
> line concatenation.

Sorry I was not clear enough.
I've mixed JavaScript/Eclipse issue with the syntax one.

Let me rephrase it:

why
function test( a ) ; outstd( "Hello World" ) ; return nil

is valid and

function test( a ) ; <newline>
outstd( "Hello World" ) ; <newline>
return nil

is not?

If in Harbour <newline> is the statement separator why couldn't it be
";<newline>" also?

In this way I could add or not add a semicolon at the end of the
statement but it'll be clear that semicolon is the statement separator
that can be omitted if is followed by a <newline>.

And if this will be implemented we need to change the
HB_PP_MULTILINE_STRING separator which is now semicolon to a more
common "\" backslash + <newline>.

> The only one reason Viktor replaced = with == in core code is
> possible SET EXACT interaction. Otherwise it's perfectly valid
> code. And even more. If you touch '=' operator behavior then
> you will have to change also '<', '<=', '>', '>=' because you
> should keep some general mathematical logic rules working, f.e.:
>   if a < b then !( a > b ) and !( a == b ) and !( a >= b )
>   if a >= b then !( a < b )
>   [...]

What I meant is that today the are places where I HAVE to use ":="
instead of "=".

This confuses newbies developers that come from other languages since
they don't understand where ":=" is required.

IMHO it would be simpler to say that ":=" is the same as "=" and if
you want to avoid ambiguities you have to use "==" for equal.

> #xcommand VAR <vars,...> [ AS <type> ] => LOCAL <vars> [ AS <type> ]

Thanks with these 3 lines:
   #xcommand { =>          	
   #xcommand } =>            	
   #xcommand VAR <vars,...> [ AS <type> ] => LOCAL <vars> [ AS <type> ]

I've made happy my developers.

BTW can I use #xcommand VAR also when hbclass.ch is used?

best regards,
Lorenzo
From harbour.01 at syenar.hu  Wed Oct  1 10:33:08 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  1 10:33:35 2008
Subject: [Harbour] How difficult is to implement this alternative syntax?
In-Reply-To: <9257026e0810010637r68530f55lf8865173c598a247@mail.gmail.com>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
	<503F136F-5B28-4785-B8CF-C47443DE4812@syenar.hu>
	<9257026e0810010637r68530f55lf8865173c598a247@mail.gmail.com>
Message-ID: <AF4396EE-9C3F-4ED7-8F60-7B63E0DA9F5D@syenar.hu>

>>
Hi Lorenzo,

>> If the goal is to make Harbour compatible with Eclipse,
>> IMO one should rather try to contribute the relevant
>> parts to the Eclipse project itself, instead of changing
>> the Clipper language to fit into their existing concept.
>> Maybe it's just a matter of creating a syntax-rule file.
>
> This was my first idea. I've contacted a Java developer but he told me
> that it's not a trivial task. Language plugins are not only about
> syntax coloring but also outlining, source refactoring and so on. You
> need to know well the specific platform ( Eclipse is different from
> NetBeans ) not only Java.
>
> But this apart the "=" vs ":=" and the semicolon issues are general
> issue that will only improve the acceptance of the language.

I don't agree to revise our syntax to make it more
"acceptable" either by users, or by certain code editors.
Python (but there could be many other language listed here)
is also an accepted language and doesn't have any such
resemblance to C or Java.

It's a big challenge to write a generic editor engine
with refactor, "IntelliSense", syntax coloring, and even
some sort of on-the-fly compiling / error reporting /
project parsing support. The solution is probably some
sort of plug-in system, where you can hook your native
compiler engine to their editor to do the required tasks
as the editing goes. So, even if Harbour would be converted
syntax-wise to be accepted by Eclipse, a lot of other
tasks would still remain unsolved.

In the shade of the above, I feel my (BTW still incomplete,
due to lack of input) error message tweaking effort for
Eclipse, was a waste of time.

>> PS: Just slightly related, but I'd rather find it useful
>> to add some switches to the compiler to warn on
>> obsolete, non-recommended/ambiguous or unnecessary
>> syntax alternatives, like '=' used as assignment. If we
>> are to clean or change the language syntax that is, and
>> drive language users to a better and more coherent syntax
>> style. Some other candidtates: if(), .not., <>, #, */&& comments.
>> Notice: Many of these come from dBase III+/Clipper <=87
>> times, and the only reason they are there is compatibility
>> with such dinosaur code.
>
> Clearly I think the contrary for ":=" vs "=": it is the ":=" that
> should be ALWAYS like "=".

Everyone can have his own choice and style preference, but
regardless, in Clipper (5.x and compatible languages) the
native assignment operator _is_ ':='. This is the only one
assignment operator which can be used in all situations and
in an unambiguous way, and in some place the only assignment
operator supported. As such, it seems like the best candidate
for 'the' assignment operator.

We can dispute whether this is good or not, but this is the
same as disputing the main goal of our project.

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Wed Oct  1 10:52:03 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Oct  1 10:52:11 2008
Subject: [Harbour] How difficult is to implement this alternative syntax?
In-Reply-To: <200810011557.17032.a.jurkiewicz@abix.info.pl>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
	<503F136F-5B28-4785-B8CF-C47443DE4812@syenar.hu>
	<9257026e0810010637r68530f55lf8865173c598a247@mail.gmail.com>
	<200810011557.17032.a.jurkiewicz@abix.info.pl>
Message-ID: <9257026e0810010752w6dae41f2ndd85f7d38821c6ab@mail.gmail.com>

2008/10/1 ABIX - Adam Jurkiewicz <a.jurkiewicz@abix.info.pl>:

> Just one word, Lorenzo, please consider the sutiation, in which I (as old
> Clipper programer) used to use ":=".
> I think in today world, in wich GUI and IDE and RAD (rapid app. devel.) are
> the most common used by young programmers (who remember MultiEdit? - Przemek,
> don't answer). In my opinion changing ":=" to "=" is not necessary. If
> someone wants to learn Harbour, then he will learn. But if someone can't make
> a app without GUI IDE or sth. else, then .....
> GUI/IDE should help to create apps, but not be the only one.

I don't want to force anyone to change anything.

The ":=" vs "=" vs "==" vs "SET EXACT" ambiguity exist today.

What I think would be good for Harbour is to be as clean as possible:

1) I think that "=" should be valid wherever ":=" is and viceversa

2) if ";" is a statement separator it should ALWAYS be so that if
someone want to add ";" at the end of the line he could do

3) I'd like to have a switch that warns me if I've used "=" where is "ambiguos".

P.S. I started to program in 1980 and with DBIII in 1985 so I'm also
an old Clipper programmer but IMHO we should make Harbour attractive
also for developers that weren't born when we started to use :)

best regards,
Lorenzo
From druzus at acn.waw.pl  Wed Oct  1 11:00:09 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  1 11:00:31 2008
Subject: [Harbour] How difficult is to implement this alternative syntax?
In-Reply-To: <9257026e0810010659h72fddf37r866f488e6623caea@mail.gmail.com>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
	<20081001131609.GB9265@34-mo7-2.acn.waw.pl>
	<9257026e0810010659h72fddf37r866f488e6623caea@mail.gmail.com>
Message-ID: <20081001150009.GA19546@34-mo7-2.acn.waw.pl>

On Wed, 01 Oct 2008, Lorenzo Fiorini wrote:

Hi Lorenzo.

> > This is not compiler but PP issue. You will have to change
> > line concatenation character otherwise PP will make from
> > these 3 lines single lines which will be preprocessed and
> > then passed to compiler.
> > So you are asking to use some other character, f.e. '\' for
> > line concatenation.
> Sorry I was not clear enough.

You was and I perfectly understood what you need but I'm afraid
you do not understand my answer.

> I've mixed JavaScript/Eclipse issue with the syntax one.
> Let me rephrase it:
> why
> function test( a ) ; outstd( "Hello World" ) ; return nil
> is valid and
> function test( a ) ; <newline>
> outstd( "Hello World" ) ; <newline>
> return nil
> is not?

Because ';' is line concatenator in PP. Just look at .ppo file.
Prepocessor is before compiler and compiler does not know
anything about PP rules. It compiles only PP output.
If you do not like that PP concatenates lines using ';' then
we have to remove such functionality from PP. That's all.
What will happen with backward compatibility you can imagine.

> If in Harbour <newline> is the statement separator why couldn't it be
> ";<newline>" also?

Because PP has to join next lines in one sinlge line. Otherwise
PP rule will not work. F.e.;
   ? 1, ;
     2

Wil not be translated because
   ? 1,
will be the 1-st line for PP and
   2
will be the second one.
The preprocess code will look like:
   QOut( 1, ) ;
   2

> In this way I could add or not add a semicolon at the end of the
> statement but it'll be clear that semicolon is the statement separator
> that can be omitted if is followed by a <newline>.

But in Clipper and Harbour it has two meanings not only one.
It works as line concatenator when used at the and of line and
second meaing is command separator. You ask to disable the 1-st
functionality and left only the second one and yes it's enough.
Just simply comment few lines in PP which checks for ';' as trailing
character to use it as line concatenator. You cannot have at the same
time two different mutual exclusive behavior. Line concatenation with
semicolon stripping and not stripping.

> And if this will be implemented we need to change the
> HB_PP_MULTILINE_STRING separator which is now semicolon to a more
> common "\" backslash + <newline>.

We will have to change all source code which use ';' as line separator
because it will not longer work.

> > The only one reason Viktor replaced = with == in core code is
> > possible SET EXACT interaction. Otherwise it's perfectly valid
> > code. And even more. If you touch '=' operator behavior then
> > you will have to change also '<', '<=', '>', '>=' because you
> > should keep some general mathematical logic rules working, f.e.:
> >   if a < b then !( a > b ) and !( a == b ) and !( a >= b )
> >   if a >= b then !( a < b )
> >   [...]
> What I meant is that today the are places where I HAVE to use ":="
> instead of "=".

Yes. But such places will still exists as long as we will have two
different equal operators. I do not think that people will agree to
remove one of them or change it to sth different because it will force
code rewriting. BTW many other languages also have := as assignment
operator.

> This confuses newbies developers that come from other languages since
> they don't understand where ":=" is required.

??? Do you want to say that they learned programming without studding even
some basic algorithms written in Pascal? I know that it's a time of "mouse"
programmers but I do not think that things are so bad ;-)

> IMHO it would be simpler to say that ":=" is the same as "=" and if
> you want to avoid ambiguities you have to use "==" for equal.

We cannot. We can only eliminate '=' as assignment and force ':=' usage.
'=' and '==' are two different operators used for different things and
we cannot remove existing widely used functionality. We will have to
introduce other operators as replacement. Farther we should <, <=, >, >=
to give results compatible with '=='. In practice it means full dropping
backward compatibility. At least I will not be able to use 99% of my code.

> > #xcommand VAR <vars,...> [ AS <type> ] => LOCAL <vars> [ AS <type> ]
> Thanks with these 3 lines:
>    #xcommand { =>          	
>    #xcommand } =>            	
>    #xcommand VAR <vars,...> [ AS <type> ] => LOCAL <vars> [ AS <type> ]
> I've made happy my developers.
> BTW can I use #xcommand VAR also when hbclass.ch is used?

No, you will have exactly the same syntax for different things.
You will have to use some tricks based on current hbclass.ch rules, f.e.:

   #xcommand VAR <vars,...> [ AS <type> ] => ;
             VAR <vars> [ AS <type> ] _CLASS_MODE_
   #xcommand VAR <vars,...> [ AS <type> ] _CLASS_DECLARATION_ => ;
             DATA <vars> [ AS <type> ]
   #xcommand VAR <vars,...> [ AS <type> ] _CLASS_IMPLEMENTATION_ => ;
             LOCAL <vars> [ AS <type> ]

It should work as you want but these rules have to be added after
#include "hbclass.ch". Otherwise the hbclass.ch rules will have higher
priority.

   #xcommand } =>

May interact with extended codeblocks. F.e.:
   cb:={||
      ? "EXT BLOKCK"
      return NIL
   }

If you use them then use parenthesis to eliminate translation, f.e.:

   cb:= ( {||
      ? "EXT BLOKCK"
      return NIL
   } )

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Oct  1 11:31:35 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  1 11:31:46 2008
Subject: [Harbour] How difficult is to implement this alternative syntax?
In-Reply-To: <9257026e0810010752w6dae41f2ndd85f7d38821c6ab@mail.gmail.com>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
	<503F136F-5B28-4785-B8CF-C47443DE4812@syenar.hu>
	<9257026e0810010637r68530f55lf8865173c598a247@mail.gmail.com>
	<200810011557.17032.a.jurkiewicz@abix.info.pl>
	<9257026e0810010752w6dae41f2ndd85f7d38821c6ab@mail.gmail.com>
Message-ID: <6318BD28-EF87-4E43-9936-15EFCF08ECFE@syenar.hu>

>> GUI/IDE should help to create apps, but not be the only one.
>
> I don't want to force anyone to change anything.
>
> The ":=" vs "=" vs "==" vs "SET EXACT" ambiguity exist today.
>
> What I think would be good for Harbour is to be as clean as possible:
>
> 1) I think that "=" should be valid wherever ":=" is and viceversa

I'd rather phase out '=' completely as assignment (with a
warning, to not break old code, but enforce new code to be
cleaner).

> 2) if ";" is a statement separator it should ALWAYS be so that if
> someone want to add ";" at the end of the line he could do

This seems odd in Clipper.

> 3) I'd like to have a switch that warns me if I've used "=" where is  
> "ambiguos".

It's difficult, as it has a valid meaning as a comparison operator.

> P.S. I started to program in 1980 and with DBIII in 1985 so I'm also
> an old Clipper programmer but IMHO we should make Harbour attractive
> also for developers that weren't born when we started to use :)

I agree, but I prefer to go forward on the route laid by Clipper 5.x,
rather than reinventing some syntaxes as per dBase/Clipper'87, some
others by borrowing new ideas from C/Java/C#.

IOW, I'd make Harbour attractive by giving a clearer, less-ambigous,
more consistent, but still native and very much Clipper 5.x-like syntax.

And as a final thought, I've personally went through all the stages
trying to create Clipper like C code, C like Clipper code, and
probably other combinations too, but looking back at things, these
were always pretty wrong ideas and creating a longer struggle and
maybe even unnecessary cleanup work at a later phase, and just
a mental aid (and actually a pretty bad one) when trying to learn
a new language. Nowadays, I'm trying to have a common set of programming
rules, which are easy to adapt in all languages, plus I prefer to
be as native as possible on all platforms, as this seems to give
the best results on the long run. The moral of the story is probably
that you cannot get around becoming familiar with the environment
you should work with, and don't try to be different, just because
the mind may be having difficulties to adapt or get used to new
things. my 2 cents.

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Wed Oct  1 11:41:31 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Oct  1 11:41:38 2008
Subject: [Harbour] How difficult is to implement this alternative syntax?
In-Reply-To: <20081001150009.GA19546@34-mo7-2.acn.waw.pl>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
	<20081001131609.GB9265@34-mo7-2.acn.waw.pl>
	<9257026e0810010659h72fddf37r866f488e6623caea@mail.gmail.com>
	<20081001150009.GA19546@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0810010841t7c26ad6bt8d4a0c5c8a37bb63@mail.gmail.com>

On Wed, Oct 1, 2008 at 5:00 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Because ';' is line concatenator in PP. Just look at .ppo file.
> Prepocessor is before compiler and compiler does not know
> ...
>   cb:= ( {||
>      ? "EXT BLOKCK"
>      return NIL
>   } )

Ok now I got it., sorry.

Let's forget about ";" and "=" vs ":=".

Please be patient, let me do another question:

instead of the #xcommand VAR ... trick, could I have ( in my local
Harbour ) VAR as synonymous of LOCAL?

best regards,
Lorenzo
From toninhofwi at yahoo.com.br  Wed Oct  1 12:15:17 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Oct  1 12:10:24 2008
Subject: [Harbour] Question: Making -gc3 the default for core
In-Reply-To: <8C6EAE74-46B0-4257-9A0C-B1394F32D66E@syenar.hu>
References: <8C6EAE74-46B0-4257-9A0C-B1394F32D66E@syenar.hu>
Message-ID: <pc87e498ltft6d4o6ldcl8hf3c3bmrl775@4ax.com>

>I'd like to ask for opinions on turning on Harbour
>-gc3 switch (native C code generation) for core .prg code.

Viktor, I?m using -gc3 and I had no problems. I?d compiled full
Harbour, my application and FWH with -gc3.

The results are fastest code and bigger .exe, but I don?t see any
problem with exe size.

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From lorenzo.fiorini at gmail.com  Wed Oct  1 12:23:49 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Oct  1 12:23:56 2008
Subject: [Harbour] How difficult is to implement this alternative syntax?
In-Reply-To: <9257026e0810010841t7c26ad6bt8d4a0c5c8a37bb63@mail.gmail.com>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
	<20081001131609.GB9265@34-mo7-2.acn.waw.pl>
	<9257026e0810010659h72fddf37r866f488e6623caea@mail.gmail.com>
	<20081001150009.GA19546@34-mo7-2.acn.waw.pl>
	<9257026e0810010841t7c26ad6bt8d4a0c5c8a37bb63@mail.gmail.com>
Message-ID: <9257026e0810010923w4c5833ebv4161aa6833143f6b@mail.gmail.com>

On Wed, Oct 1, 2008 at 5:41 PM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com> wrote:

> instead of the #xcommand VAR ... trick, could I have ( in my local
> Harbour ) VAR as synonymous of LOCAL?

Sorry forget this, "local var" works so I'll add:

#xcommand LOCAL VAR <vars,...> => LOCAL <vars>
#xcommand STATIC VAR <vars,...> => STATIC <vars>

best regards,
Lorenzo
From druzus at acn.waw.pl  Wed Oct  1 13:22:18 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  1 13:22:40 2008
Subject: [Harbour] Question: Making -gc3 the default for core
In-Reply-To: <8C6EAE74-46B0-4257-9A0C-B1394F32D66E@syenar.hu>
References: <8C6EAE74-46B0-4257-9A0C-B1394F32D66E@syenar.hu>
Message-ID: <20081001172218.GA14167@34-mo7-2.acn.waw.pl>

On Wed, 01 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I'd like to ask for opinions on turning on Harbour
> -gc3 switch (native C code generation) for core .prg code.
> The involved code parts are high-level functions in RTL,
> the debugger and some high-level RDD functions.
> To me it seems that enabling this switch gives a
> noticeable performance boost (mainly to tget, tbrowse,
> and other UI classes). The cost is a slightly larger
> final executable (not significant for real-world
> programs), and some potential CPU cache trashing,
> which may or may not be a problem, I didn't notice
> anything bad in this regard.
> Any thoughts?

There is one difference between -gc3 and -gc2 code.
When -gc3 is used there is no hb_inkeyPoll() automatic
call which is done for -gc2. The results are the same as
compiling HVM with HB_GUI macro. It effects ALT_C and
ALT_D catching and also screen refreshing in some GTs
like GTWVT. Without calls to hb_inkeyPoll() it's not
automatically redrawn after overwritting by some other
application.
Personally I suggest to first add support for asynchronous
GT screen updating and key polling by separate thread in this
GTs which may need it before we enable -gc3. This will be OS
only thread not Harbour one.
I can also add key poling to -gc3 though I do not know if it's
good idea. In general it's a hack for missing asynchronous events
in HVM.

best regards,
Przemek
From rportnoff at spendmap.com  Wed Oct  1 14:09:57 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Wed Oct  1 14:08:35 2008
Subject: [Harbour] Problem linking with gtgui
In-Reply-To: <9257026e0810010923w4c5833ebv4161aa6833143f6b@mail.gmail.co
 m>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
	<20081001131609.GB9265@34-mo7-2.acn.waw.pl>
	<9257026e0810010659h72fddf37r866f488e6623caea@mail.gmail.com>
	<20081001150009.GA19546@34-mo7-2.acn.waw.pl>
	<9257026e0810010841t7c26ad6bt8d4a0c5c8a37bb63@mail.gmail.com>
	<9257026e0810010923w4c5833ebv4161aa6833143f6b@mail.gmail.com>
Message-ID: <B0083980007@ms1.3peaks.com>

Hi all,

I can successfully link various apps using gtgui - However, one app 
just won't link and I can't see why - I get this link error:

hbrtl.lib(gtsys.obj) : error LNK2019: unresolved external symbol 
_HB_FUN_HB_GT_WIN referenced in function _hb_gt_ForceLink_HB_GT_WIN

How can I get around this?

TIA.

Regards,
Randy.


From harbour.01 at syenar.hu  Wed Oct  1 14:14:03 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  1 14:14:17 2008
Subject: [Harbour] Problem linking with gtgui
In-Reply-To: <B0083980007@ms1.3peaks.com>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
	<20081001131609.GB9265@34-mo7-2.acn.waw.pl>
	<9257026e0810010659h72fddf37r866f488e6623caea@mail.gmail.com>
	<20081001150009.GA19546@34-mo7-2.acn.waw.pl>
	<9257026e0810010841t7c26ad6bt8d4a0c5c8a37bb63@mail.gmail.com>
	<9257026e0810010923w4c5833ebv4161aa6833143f6b@mail.gmail.com>
	<B0083980007@ms1.3peaks.com>
Message-ID: <B9C6ABFC-8331-405B-B70E-06A82653E030@syenar.hu>

Hi Randy,

Did you use ANNOUNCE HB_GTSYS in that app?

Brgds,
Viktor

On 2008.10.01., at 20:09, Randy Portnoff wrote:

> Hi all,
>
> I can successfully link various apps using gtgui - However, one app  
> just won't link and I can't see why - I get this link error:
>
> hbrtl.lib(gtsys.obj) : error LNK2019: unresolved external symbol  
> _HB_FUN_HB_GT_WIN referenced in function _hb_gt_ForceLink_HB_GT_WIN
>
> How can I get around this?
>
> TIA.
>
> Regards,
> Randy.
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Oct  1 14:15:51 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  1 14:16:04 2008
Subject: [Harbour] Question: Making -gc3 the default for core
In-Reply-To: <20081001172218.GA14167@34-mo7-2.acn.waw.pl>
References: <8C6EAE74-46B0-4257-9A0C-B1394F32D66E@syenar.hu>
	<20081001172218.GA14167@34-mo7-2.acn.waw.pl>
Message-ID: <E555D673-97A7-471A-A36B-38431A8431A0@syenar.hu>

Hi Przemek,

Many thanks, I didn't know that. But I've noticed
the refresh problem.

I agree with adding these, but it's probably better
if I leave this for someone familiar with MT and GT.

Personal question: If only the core is compiled with
-gc3, could it cause problems in real life, if I'm not
using any core functions which would spend too much
time in a loop, or waiting for user input?

Brgds,
Viktor

On 2008.10.01., at 19:22, Przemyslaw Czerpak wrote:

> On Wed, 01 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> I'd like to ask for opinions on turning on Harbour
>> -gc3 switch (native C code generation) for core .prg code.
>> The involved code parts are high-level functions in RTL,
>> the debugger and some high-level RDD functions.
>> To me it seems that enabling this switch gives a
>> noticeable performance boost (mainly to tget, tbrowse,
>> and other UI classes). The cost is a slightly larger
>> final executable (not significant for real-world
>> programs), and some potential CPU cache trashing,
>> which may or may not be a problem, I didn't notice
>> anything bad in this regard.
>> Any thoughts?
>
> There is one difference between -gc3 and -gc2 code.
> When -gc3 is used there is no hb_inkeyPoll() automatic
> call which is done for -gc2. The results are the same as
> compiling HVM with HB_GUI macro. It effects ALT_C and
> ALT_D catching and also screen refreshing in some GTs
> like GTWVT. Without calls to hb_inkeyPoll() it's not
> automatically redrawn after overwritting by some other
> application.
> Personally I suggest to first add support for asynchronous
> GT screen updating and key polling by separate thread in this
> GTs which may need it before we enable -gc3. This will be OS
> only thread not Harbour one.
> I can also add key poling to -gc3 though I do not know if it's
> good idea. In general it's a hack for missing asynchronous events
> in HVM.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From rportnoff at spendmap.com  Wed Oct  1 14:25:48 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Wed Oct  1 14:24:25 2008
Subject: [Harbour] Problem linking with gtgui
In-Reply-To: <B9C6ABFC-8331-405B-B70E-06A82653E030@syenar.hu>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
	<20081001131609.GB9265@34-mo7-2.acn.waw.pl>
	<9257026e0810010659h72fddf37r866f488e6623caea@mail.gmail.com>
	<20081001150009.GA19546@34-mo7-2.acn.waw.pl>
	<9257026e0810010841t7c26ad6bt8d4a0c5c8a37bb63@mail.gmail.com>
	<9257026e0810010923w4c5833ebv4161aa6833143f6b@mail.gmail.com>
	<B0083980007@ms1.3peaks.com>
	<B9C6ABFC-8331-405B-B70E-06A82653E030@syenar.hu>
Message-ID: <B0083980547@ms1.3peaks.com>

That was it - Thanks!

At 02:14 PM 10/1/2008, you wrote:
>Hi Randy,
>
>Did you use ANNOUNCE HB_GTSYS in that app?
>
>Brgds,
>Viktor
>
>On 2008.10.01., at 20:09, Randy Portnoff wrote:
>
>>Hi all,
>>
>>I can successfully link various apps using gtgui - However, one app
>>just won't link and I can't see why - I get this link error:
>>
>>hbrtl.lib(gtsys.obj) : error LNK2019: unresolved external symbol
>>_HB_FUN_HB_GT_WIN referenced in function _hb_gt_ForceLink_HB_GT_WIN
>>
>>How can I get around this?
>>
>>TIA.
>>
>>Regards,
>>Randy.
>>
>>
>>_______________________________________________
>>Harbour mailing list
>>Harbour@harbour-project.org
>>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour


From harbour.01 at syenar.hu  Wed Oct  1 18:21:06 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  1 18:21:15 2008
Subject: [Harbour] 2008-10-01 23:52 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92413$Blat.v2.6.2$ff7bf6a4$7e0cc86ba9a@127.0.0.1>

2008-10-01 23:52 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbfbird/firebird.c
    ! Added ugly hack to make it compile with Firebird 2.1.1 
      and BCC 5.8.2 (and upper).
      This way all Win32/Win64 builds are now supporting 
      this newer version of Firebird. DOS still needs 2.0.4.

  * contrib/hbwin/win_tole.prg
  * contrib/hbwin/win_ole.c
    + Added support for optional License Key.
      Borrowed from xhb/Ron Pinkas.
      (untested)
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct  2 03:00:38 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  2 03:00:44 2008
Subject: [Harbour] 2008-10-02 08:57 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9245c$Blat.v2.6.2$93636288$12b895db01d4@127.0.0.1>

2008-10-02 08:57 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/dbedit.prg
    ! Fixed to use local Skipped() function.
    ! Guarded some 5.3 features with HB_COMPAT_C53.
    ! Fixed stepping back to real record from append position.
      (This fixes Clipper 5.x screen trashing and 
      '87 incompatibility.)
    ! Minor keyboard handling fix.
    ! Fixed behaviour in append mode.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct  2 04:09:27 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  2 04:09:36 2008
Subject: [Harbour] 2008-10-02 10:08 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92466$Blat.v2.6.2$30687aec$183ca572564a@127.0.0.1>

2008-10-02 10:08 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbct/ctmisc.prg
    + Added dummy functions:
      GETKXLAT(), SETKXLAT(), DSETKBIOS()
--
Brgds,
Viktor

From philb at philb.us  Thu Oct  2 05:29:39 2008
From: philb at philb.us (Phil Barnett)
Date: Thu Oct  2 05:29:49 2008
Subject: [Harbour] How difficult is to implement this alternative syntax?
In-Reply-To: <9257026e0810010752w6dae41f2ndd85f7d38821c6ab@mail.gmail.com>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
	<200810011557.17032.a.jurkiewicz@abix.info.pl>
	<9257026e0810010752w6dae41f2ndd85f7d38821c6ab@mail.gmail.com>
Message-ID: <200810020529.39619.philb@philb.us>

On Wednesday 01 October 2008 10:52:03 am Lorenzo Fiorini wrote:
> 3) I'd like to have a switch that warns me if I've used "=" where is
> "ambiguos".

My Click! source code reformattor does this conversion for you in many cases.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From harbour.01 at syenar.hu  Thu Oct  2 05:50:11 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  2 05:50:16 2008
Subject: [Harbour] 2008-10-02 11:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92474$Blat.v2.6.2$42f33a54$12c01798ab8c@127.0.0.1>

2008-10-02 11:49 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/vm/extrap.c
    * Added "error" text in exception message.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct  2 07:15:13 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  2 07:15:25 2008
Subject: [Harbour] nmake optimization for .prg
Message-ID: <6547DD43-38A4-43BB-8C9E-C1FA2B2EACA6@syenar.hu>

Hi all,

I'm trying to optimize MSVC non-GNU make, so that it
compiles .prg in one batch (== one harbour.exe call by
.lib), just like for .c files, as opposed to the current
one-by-one .prg file compilation approach.

IOW (and if possible), I'd like to convert this rule:
---
{$(RTL_DIR)}.prg{$(OBJ_DIR)$(OBJEXT):
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
---

to something like this:
---
{$(OBJ_DIR)}.c{$(OBJ_DIR)}$(OBJEXT)::
    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<

{$(RTL_DIR)}.prg{$(OBJ_DIR)$(OBJEXT)::
    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
---

By swapping .prg and .c in .SUFFIXES, it even works,
but only if I run the make process twice.

Does anyone have an idea how to fix this? Marek, Paul?

Brgds,
Viktor

From maurilio.longo at libero.it  Thu Oct  2 07:17:54 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Oct  2 07:18:06 2008
Subject: [Harbour] hb_threadID()
Message-ID: <48E4ADE2.1070603@libero.it>

Hi,

I've added this little function to my copy of vm\thread.c, I attach it here so
that Przemyslaw and/or Viktor can have a look at it and also because I'm not
at ease with branching and so I don't know where to commit this change.

-----------8<-----------------
HB_FUNC( HB_THREADID )
{
#if defined( HB_MT_VM )
   PHB_THREADSTATE pThread = ( PHB_THREADSTATE ) hb_vmThreadState();
   if( pThread )
      hb_retnl( pThread->th_id );
#endif
}
----------->8-----------------

I've added this function because I was still investigating a speed issue on my
pc and I've changed also tests\speedtst.prg so that it creates two threads
which do the work (instead of a single one).

Please note that my changes are just an ugly hack to make it work and see if
having a SMP kernel on a HT cpu gives any advantage when the work is splitted
between two cpus.

I attach the modified speedtst.prg to this message also, so that anybody can
have a look at it

Well, that said, total time went from 70 seconds to 59.9 :)

MT PIV 3.6GHZ HT, OS/2 SMP kernel

============================================================
 0 - total application time:                              59.87
total real time:                                     59.88


I,ve also noted that thread 1 has a threadid of 0 (zero) while the other
threads have the correct id, maybe this is a minor glitch to correct.

Best regards.

Maurilio.


PS. speedtst.log shows 60 seconds total time.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: speedtst.prg
Type: application/x-prg
Size: 13927 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081002/0e0076b1/speedtst-0002.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: speedtst.log
Type: application/x-log
Size: 3386 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081002/0e0076b1/speedtst-0003.bin
From harbour.01 at syenar.hu  Thu Oct  2 07:28:47 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  2 07:28:57 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <48E4ADE2.1070603@libero.it>
References: <48E4ADE2.1070603@libero.it>
Message-ID: <2236CC68-C00A-41E9-AD3A-64E164AF4621@syenar.hu>

Hi Maurilio,

> I've added this little function to my copy of vm\thread.c, I attach  
> it here so
> that Przemyslaw and/or Viktor can have a look at it and also because  
> I'm not
> at ease with branching and so I don't know where to commit this  
> change.
>
> -----------8<-----------------
> HB_FUNC( HB_THREADID )
> {
> #if defined( HB_MT_VM )
>   PHB_THREADSTATE pThread = ( PHB_THREADSTATE ) hb_vmThreadState();
>   if( pThread )
>      hb_retnl( pThread->th_id );
> #endif
> }
> ----------->8-----------------

I see no problem with this code. You can just simply
commit it to the trunk (as usual).

> Well, that said, total time went from 70 seconds to 59.9 :)

Looks good :)

> MT PIV 3.6GHZ HT, OS/2 SMP kernel
>
> ============================================================
> 0 - total application time:                              59.87
> total real time:                                     59.88
>
> I,ve also noted that thread 1 has a threadid of 0 (zero) while the  
> other
> threads have the correct id, maybe this is a minor glitch to correct.

IMO, zero for main thread is alright.

Brgds,
Viktor

From maurilio.longo at libero.it  Thu Oct  2 07:37:07 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Oct  2 07:37:16 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <2236CC68-C00A-41E9-AD3A-64E164AF4621@syenar.hu>
References: <48E4ADE2.1070603@libero.it>
	<2236CC68-C00A-41E9-AD3A-64E164AF4621@syenar.hu>
Message-ID: <48E4B263.1060207@libero.it>

Hi Viktor,

Szak?ts Viktor wrote:
> I see no problem with this code. You can just simply
> commit it to the trunk (as usual).
> 
Ok, I'll try in a while.

>> I,ve also noted that thread 1 has a threadid of 0 (zero) while the other
>> threads have the correct id, maybe this is a minor glitch to correct.
> 
> IMO, zero for main thread is alright.
I think it should be 1 (one) given that the first thread I create has a
threadid of 2 and so on.

Best regards.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Thu Oct  2 07:40:18 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  2 07:40:29 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <48E4B263.1060207@libero.it>
References: <48E4ADE2.1070603@libero.it>
	<2236CC68-C00A-41E9-AD3A-64E164AF4621@syenar.hu>
	<48E4B263.1060207@libero.it>
Message-ID: <62A4EF7D-3BDB-4A6C-8404-AD5BB0428EFB@syenar.hu>

> Szak?ts Viktor wrote:
>> I see no problem with this code. You can just simply
>> commit it to the trunk (as usual).
>>
> Ok, I'll try in a while.

Okay.

>>> I,ve also noted that thread 1 has a threadid of 0 (zero) while the  
>>> other
>>> threads have the correct id, maybe this is a minor glitch to  
>>> correct.
>>
>> IMO, zero for main thread is alright.
> I think it should be 1 (one) given that the first thread I create  
> has a
> threadid of 2 and so on.

This way it something doesn't seem to be right indeed.

I'd think, the first thread (above main one) should get ID #1, second  
#2, etc.

Brgds,
Viktor

From maurilio.longo at libero.it  Thu Oct  2 07:48:21 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Oct  2 07:48:29 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <62A4EF7D-3BDB-4A6C-8404-AD5BB0428EFB@syenar.hu>
References: <48E4ADE2.1070603@libero.it>	<2236CC68-C00A-41E9-AD3A-64E164AF4621@syenar.hu>	<48E4B263.1060207@libero.it>
	<62A4EF7D-3BDB-4A6C-8404-AD5BB0428EFB@syenar.hu>
Message-ID: <48E4B505.9070700@libero.it>

Szak?ts Viktor wrote:
>>> IMO, zero for main thread is alright.
>> I think it should be 1 (one) given that the first thread I create has a
>> threadid of 2 and so on.
> 
> This way it something doesn't seem to be right indeed.
> 
> I'd think, the first thread (above main one) should get ID #1, second
> #2, etc.
> 

No, main thread is a thread, just like the others, so it has to be thread 1;
while do you want to treat the first thread in a different way?

Best regards.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Thu Oct  2 08:05:14 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  2 08:05:25 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <48E4B505.9070700@libero.it>
References: <48E4ADE2.1070603@libero.it>	<2236CC68-C00A-41E9-AD3A-64E164AF4621@syenar.hu>	<48E4B263.1060207@libero.it>
	<62A4EF7D-3BDB-4A6C-8404-AD5BB0428EFB@syenar.hu>
	<48E4B505.9070700@libero.it>
Message-ID: <8A8D8876-D848-4D4E-80D8-C4E1D9AC2635@syenar.hu>


On 2008.10.02., at 13:48, Maurilio Longo wrote:

> Szak?ts Viktor wrote:
>>>> IMO, zero for main thread is alright.
>>> I think it should be 1 (one) given that the first thread I create  
>>> has a
>>> threadid of 2 and so on.
>>
>> This way it something doesn't seem to be right indeed.
>>
>> I'd think, the first thread (above main one) should get ID #1, second
>> #2, etc.
>>
>
> No, main thread is a thread, just like the others, so it has to be  
> thread 1;
> while do you want to treat the first thread in a different way?

For me the main thread is special, because
it has some properties which other threads
don't have. At least if I understand it
correctly. hb_threadID() could also return
zero for ST programs, without breaking too
much MT code.

Brgds,
Viktor

From druzus at acn.waw.pl  Thu Oct  2 08:34:27 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  2 08:34:47 2008
Subject: [Harbour] 2008-10-02 14:33 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081002123427.GA5492@34-mo7-2.acn.waw.pl>

2008-10-02 14:33 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbstack.h
    % enable assembler inline function to access HVM thread stack pointer
      without native compiler TLS support even if HB_STACK_PRELOAD is not
      defined in MinGW builds. It gives some additional small speed
      improvement in MT mode

  * harbour/source/rtl/idle.c
    * unlock HVM inside hb_releaseCPU() function

  * harbour/contrib/hbwin/win_ole.c
    ! fixed casting and C++ compilation in some compilers

  * harbour/include/Makefile
  + harbour/contrib/examples/rdddbt/hbrdddbt.h
  - harbour/include/hbrdddbt.h
    ! moved hbrdddbt.h to correct location

  * harbour/include/Makefile
    ! added missinf hbthread.h

  * harbour/tests/rddtest/rddmktst.prg
  * harbour/tests/rddtest/adscl52.prg
  * harbour/tests/rddtest/adscl53.prg
  * harbour/tests/rddtest/ntxcl52.prg
  * harbour/tests/rddtest/ntxcl53.prg
  * harbour/tests/rddtest/cdxcl52.prg
  * harbour/tests/rddtest/rddtst.prg
  * harbour/tests/rddtest/cdxcl53.prg
    ! fixed description in header I wrongly copied without updating
      from other files

  + harbour/tests/hsxtest.prg
    + added test code for HiPer-SEEK indexes

  * harbour/source/rtl/filesys.c
    + added new functions: hb_fsExtName(), hb_fsReadAt(), hb_fsWriteAt(),
      hb_fsTruncAt() to use with shared file handles.
      Please test it in other *nixes. I used pread[64]()/pwrite[64]()
      POSIX functions but I do not know if they are available by default
      in other supported platforms like MacOSX, BSD, HPUX, SunOS.
      If not they I will have to implement some workaround.

  * harbour/common.mak
  * harbour/source/rtl/Makefile
  * harbour/include/hbapifs.h
  + harbour/source/rtl/filebuf.c
    + added set of new file functions (hb_file*()) which are designed to
      use with shared file handles and locks (buffers in the future):
      hb_fileExtOpen(), hb_fileCreateTemp(), hb_fileClose(), hb_fileLock(),
      hb_fileReadAt(), hb_fileWriteAt(), hb_fileTruncAt(), hb_fileSize(),
      hb_fileCommit(), hb_fileHandle()
      These functions operate on PHB_FILE structure instead of HB_FHANDLE.
      Now in POSIX systems they share file handle between aliased or
      simultaneously open by other thread work areas. It resolves the
      problem with releasing all process FCNTL locks by any close()
      operation even on duplicated or open() separately handle.
      Now DOS deny flags emulation works in single process even if
      BSD locks are disabled (non Linux *nixes).
      They also keep internal file lock list what allows to synchronize
      threads and aliases with file locks in POSIX systems. In the future
      it will be used also for internal locking to synchronize threads
      without OS level locks - pseudo exclusive mode in cloned WA.
      Finally these structures will be used also for file buffers
      which will be shared between aliased WA and threads.

  * harbour/include/hbrdddbf.h
  * harbour/include/hbrddcdx.h
  * harbour/include/hbrddntx.h
  * harbour/include/hbrdddel.h
  * harbour/include/hbrddsdf.h
  * harbour/source/rdd/dbf1.c
  * harbour/source/rdd/delim1.c
  * harbour/source/rdd/sdf1.c
  * harbour/source/rdd/dbffpt/dbffpt1.c
  * harbour/source/rdd/dbfntx/dbfntx1.c
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
  * harbour/source/rdd/hsx/hsx.c
  * harbour/contrib/hbbmcdx/bmdbfcdx.c
  * harbour/contrib/hbbmcdx/hbbmcdx.h
    * use PHB_FILE and hb_file*() functions instead of HB_FHANDLE (hb_fs*())
      to access files.

  + harbour/tests/aliaslck.prg
    + added test code for file lock synchronization between aliased
      work areas

best regards
Przemek
From maurilio.longo at libero.it  Thu Oct  2 09:19:18 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Oct  2 09:19:25 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <8A8D8876-D848-4D4E-80D8-C4E1D9AC2635@syenar.hu>
References: <48E4ADE2.1070603@libero.it>	<2236CC68-C00A-41E9-AD3A-64E164AF4621@syenar.hu>	<48E4B263.1060207@libero.it>	<62A4EF7D-3BDB-4A6C-8404-AD5BB0428EFB@syenar.hu>	<48E4B505.9070700@libero.it>
	<8A8D8876-D848-4D4E-80D8-C4E1D9AC2635@syenar.hu>
Message-ID: <48E4CA56.8030905@libero.it>

Viktor,

can you confirm that I have write rights on svn since I get a 401
authorization required trying to commit.

Best regards.

Szak?ts Viktor wrote:
> 
> On 2008.10.02., at 13:48, Maurilio Longo wrote:
> 
>> Szak?ts Viktor wrote:
>>>>> IMO, zero for main thread is alright.
>>>> I think it should be 1 (one) given that the first thread I create has a
>>>> threadid of 2 and so on.
>>>
>>> This way it something doesn't seem to be right indeed.
>>>
>>> I'd think, the first thread (above main one) should get ID #1, second
>>> #2, etc.
>>>
>>
>> No, main thread is a thread, just like the others, so it has to be
>> thread 1;
>> while do you want to treat the first thread in a different way?
> 
> For me the main thread is special, because
> it has some properties which other threads
> don't have. At least if I understand it
> correctly. hb_threadID() could also return
> zero for ST programs, without breaking too
> much MT code.
> 
> Brgds,
> Viktor
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Thu Oct  2 09:20:06 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  2 09:20:09 2008
Subject: [Harbour] 2008-10-02 15:19 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92491$Blat.v2.6.2$961e2c6c$870168dd56@127.0.0.1>

2008-10-02 15:19 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/vm/extrap.c
    + Upped internal buffer to store the exception dump 
      and stack trace.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Thu Oct  2 09:24:52 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  2 09:25:11 2008
Subject: [Harbour] Question: Making -gc3 the default for core
In-Reply-To: <E555D673-97A7-471A-A36B-38431A8431A0@syenar.hu>
References: <8C6EAE74-46B0-4257-9A0C-B1394F32D66E@syenar.hu>
	<20081001172218.GA14167@34-mo7-2.acn.waw.pl>
	<E555D673-97A7-471A-A36B-38431A8431A0@syenar.hu>
Message-ID: <20081002132452.GA5981@34-mo7-2.acn.waw.pl>

On Wed, 01 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I agree with adding these, but it's probably better
> if I leave this for someone familiar with MT and GT.

I no one make it then probably I'll do it working on
extended GT API for multi console window support and
MT for threads.

> Personal question: If only the core is compiled with
> -gc3, could it cause problems in real life, if I'm not
> using any core functions which would spend too much
> time in a loop, or waiting for user input?

If they wait for user input then they usually call some GT
input/ouptut functions so screen is refreshed and incoming
keys are processed. I do not know about any other side
effects. But Please remember that speed and difference between
-gc[0-2] and -gc3 is strictly C compiler dependent and results
from one compiler does not have to be repeatable with other.

best regards,
Przemek
From vailtom at gmail.com  Thu Oct  2 09:28:34 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Thu Oct  2 09:28:20 2008
Subject: [Harbour] hb_threadID()
References: 48E4ADE2.1070603@libero.it
Message-ID: <48E4CC82.5070108@gmail.com>

Hi!

I would like to make one small suggestion:

-----------8<-----------------
HB_FUNC( HB_THREADID )
{
#if defined( HB_MT_VM )
   PHB_THREADSTATE pThread = ( PHB_THREADSTATE ) hb_vmThreadState();
   if( pThread )
      hb_retnl( pThread->th_id );
   else
#endif
      hb_retni( 0 );
}
----------->8-----------------

for use with security, as:

if (HB_THREADID() == 00 )
  ....
End

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081002/920a2afe/attachment-0001.html
From harbour.01 at syenar.hu  Thu Oct  2 09:31:09 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  2 09:31:20 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <48E4CA56.8030905@libero.it>
References: <48E4ADE2.1070603@libero.it>	<2236CC68-C00A-41E9-AD3A-64E164AF4621@syenar.hu>	<48E4B263.1060207@libero.it>	<62A4EF7D-3BDB-4A6C-8404-AD5BB0428EFB@syenar.hu>	<48E4B505.9070700@libero.it>
	<8A8D8876-D848-4D4E-80D8-C4E1D9AC2635@syenar.hu>
	<48E4CA56.8030905@libero.it>
Message-ID: <3C1FF940-8E0A-488D-A67A-307A121202BB@syenar.hu>

A bit later yes, but if you didn't commit since
a long time, it's more probable that you have
to first login to sf.net homepage and change
you password, because they've reset them
a while ago (due to some security leaks).

After changin pw, SVN login should work.

Brgds,
Viktor

On 2008.10.02., at 15:19, Maurilio Longo wrote:

> Viktor,
>
> can you confirm that I have write rights on svn since I get a 401
> authorization required trying to commit.
>
> Best regards.
>
> Szak?ts Viktor wrote:
>>
>> On 2008.10.02., at 13:48, Maurilio Longo wrote:
>>
>>> Szak?ts Viktor wrote:
>>>>>> IMO, zero for main thread is alright.
>>>>> I think it should be 1 (one) given that the first thread I  
>>>>> create has a
>>>>> threadid of 2 and so on.
>>>>
>>>> This way it something doesn't seem to be right indeed.
>>>>
>>>> I'd think, the first thread (above main one) should get ID #1,  
>>>> second
>>>> #2, etc.
>>>>
>>>
>>> No, main thread is a thread, just like the others, so it has to be
>>> thread 1;
>>> while do you want to treat the first thread in a different way?
>>
>> For me the main thread is special, because
>> it has some properties which other threads
>> don't have. At least if I understand it
>> correctly. hb_threadID() could also return
>> zero for ST programs, without breaking too
>> much MT code.
>>
>> Brgds,
>> Viktor
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
> -- 
> __________
> |  |  | |__| Maurilio Longo
> |_|_|_|____| farmaconsult s.r.l.
>
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From maurilio.longo at libero.it  Thu Oct  2 09:48:50 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Oct  2 09:49:01 2008
Subject: [Harbour] CHANGELOG: 2008-10-02 15:50 UTC+0200 Maurilio Longo
	(maurilio.longo@libero.it)
Message-ID: <48E4D142.4030209@libero.it>

2008-10-02 15:50 UTC+0200 Maurilio Longo (maurilio.longo@libero.it)
  * harbour/source/vm/thread.c
    + added hb_ThreadID() function which returns thread ID of current thread.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Thu Oct  2 09:49:32 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Oct  2 09:49:40 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <3C1FF940-8E0A-488D-A67A-307A121202BB@syenar.hu>
References: <48E4ADE2.1070603@libero.it>	<2236CC68-C00A-41E9-AD3A-64E164AF4621@syenar.hu>	<48E4B263.1060207@libero.it>	<62A4EF7D-3BDB-4A6C-8404-AD5BB0428EFB@syenar.hu>	<48E4B505.9070700@libero.it>	<8A8D8876-D848-4D4E-80D8-C4E1D9AC2635@syenar.hu>	<48E4CA56.8030905@libero.it>
	<3C1FF940-8E0A-488D-A67A-307A121202BB@syenar.hu>
Message-ID: <48E4D16C.8080703@libero.it>

Viktor,

yes, I had to log in to sourceforge, now it seems I was able to commit.

Thanks.

Maurilio.

Szak?ts Viktor wrote:
> A bit later yes, but if you didn't commit since
> a long time, it's more probable that you have
> to first login to sf.net homepage and change
> you password, because they've reset them
> a while ago (due to some security leaks).
> 
> After changin pw, SVN login should work.
> 
> Brgds,
> Viktor
> 
> On 2008.10.02., at 15:19, Maurilio Longo wrote:
> 
>> Viktor,
>>
>> can you confirm that I have write rights on svn since I get a 401
>> authorization required trying to commit.
>>
>> Best regards.
>>
>> Szak?ts Viktor wrote:
>>>
>>> On 2008.10.02., at 13:48, Maurilio Longo wrote:
>>>
>>>> Szak?ts Viktor wrote:
>>>>>>> IMO, zero for main thread is alright.
>>>>>> I think it should be 1 (one) given that the first thread I create
>>>>>> has a
>>>>>> threadid of 2 and so on.
>>>>>
>>>>> This way it something doesn't seem to be right indeed.
>>>>>
>>>>> I'd think, the first thread (above main one) should get ID #1, second
>>>>> #2, etc.
>>>>>
>>>>
>>>> No, main thread is a thread, just like the others, so it has to be
>>>> thread 1;
>>>> while do you want to treat the first thread in a different way?
>>>
>>> For me the main thread is special, because
>>> it has some properties which other threads
>>> don't have. At least if I understand it
>>> correctly. hb_threadID() could also return
>>> zero for ST programs, without breaking too
>>> much MT code.
>>>
>>> Brgds,
>>> Viktor
>>>
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>>
>>
>> -- 
>> __________
>> |  |  | |__| Maurilio Longo
>> |_|_|_|____| farmaconsult s.r.l.
>>
>> 
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Thu Oct  2 09:54:31 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Oct  2 09:54:38 2008
Subject: [Harbour] CHANGELOG: 2008-10-02 15:54 UTC+0200 Maurilio Longo
	(maurilio.longo@libero.it)
Message-ID: <48E4D297.6050903@libero.it>

2008-10-02 15:54 UTC+0200 Maurilio Longo (maurilio.longo@libero.it)
  * harbour/source/vm/thread.c
    * hb_ThreadID() returns 0 when built in ST mode.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Thu Oct  2 09:55:33 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Oct  2 09:55:40 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <48E4CC82.5070108@gmail.com>
References: 48E4ADE2.1070603@libero.it <48E4CC82.5070108@gmail.com>
Message-ID: <48E4D2D5.5070004@libero.it>

Renato,

thanks, I've changed it to return 0, but a I think, see discussion with
Viktor, that it should be '1'.

Best regards.

Maurilio.

Vailton Renato wrote:
> Hi!
> 
> I would like to make one small suggestion:
> 
> -----------8<-----------------
> HB_FUNC( HB_THREADID )
> {
> #if defined( HB_MT_VM )
>    PHB_THREADSTATE pThread = ( PHB_THREADSTATE ) hb_vmThreadState();
>    if( pThread )
>       hb_retnl( pThread->th_id );
>    else
> #endif
>       hb_retni( 0 );
> }
> ----------->8-----------------
> 
> for use with security, as:
> 
> if (HB_THREADID() == 00 )
>   ....
> End
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From druzus at acn.waw.pl  Thu Oct  2 09:57:48 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  2 09:58:07 2008
Subject: [Harbour] How difficult is to implement this alternative syntax?
In-Reply-To: <200810020529.39619.philb@philb.us>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
	<200810011557.17032.a.jurkiewicz@abix.info.pl>
	<9257026e0810010752w6dae41f2ndd85f7d38821c6ab@mail.gmail.com>
	<200810020529.39619.philb@philb.us>
Message-ID: <20081002135748.GB5981@34-mo7-2.acn.waw.pl>

On Thu, 02 Oct 2008, Phil Barnett wrote:

Hi Phil,

> > 3) I'd like to have a switch that warns me if I've used "=" where is
> > "ambiguos".
> My Click! source code reformattor does this conversion for you in many cases.

Maybe we can use it for Harbour .prg source formatting?
I noticed that each of us has some own personal preferences
and formats .prg code in a little bit different way.
Some .prg code formatter like indent for .c can nicely help
here.
Viktor what do you think?

best regards,
Przemek
From dbtopas at dbtopas.lt  Thu Oct  2 10:00:28 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Oct  2 09:58:30 2008
Subject: [Harbour] 2008-09-21 23:03 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20080921210436.GA10656@34-mo7-2.acn.waw.pl>
References: <20080921210436.GA10656@34-mo7-2.acn.waw.pl>
Message-ID: <48E4D3FC.9070402@dbtopas.lt>

Przemyslaw Czerpak wrote:
> 2008-09-21 23:03 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   ...
>   * harbour/source/vm/thread.c
>     + added support for inheriting visible memvars from current
>       thread when new thread is created. Memvars in child thread
>       can be shared with parrent or they can be copied. See HB_THREAD_*
>       attributes defined in hbthread.ch, f.e.:
>          hb_threadStart( HB_THREAD_INHERIT_PUBLIC, @thFunc() )
>       or:
>          hb_threadStart( HB_BITOR( HB_THREAD_INHERIT_MEMVARS + ;
>                                    HB_THREAD_MEMVARS_COPY ), ;
>                           @thFunc() )


Hi,


I suggest to swap 1st and 2nd parameters. The main parameter of 
hb_threadStart() is code to be executed (in any form: block, symbol or 
function pointer), inheritance flags are only options. So, it is logic 
to put code parameter in the first place. Flags can have a default 
value, and if it default flags are OK, hb_threadStart(@func()) looks 
much better, than hb_threadStart(, @func()).


Best regards,
Mindaugas

From druzus at acn.waw.pl  Thu Oct  2 10:05:02 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  2 10:05:22 2008
Subject: [Harbour] 2008-10-02 10:08 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c92466$Blat.v2.6.2$30687aec$183ca572564a@127.0.0.1>
References: <01c92466$Blat.v2.6.2$30687aec$183ca572564a@127.0.0.1>
Message-ID: <20081002140502.GC5981@34-mo7-2.acn.waw.pl>

On Thu, 02 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> 2008-10-02 10:08 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * contrib/hbct/ctmisc.prg
>     + Added dummy functions:
>       GETKXLAT(), SETKXLAT(), DSETKBIOS()

If possible please keep such dummy functions in separate file,
f.e. cttodo.prg for two reasons:
1. it's easier to locate what is not implemented.
2. people may use their own replacement with the same name
   and when dummy functions are in the same .prg file as some
   other usable then it causes name conflicts during linking.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct  2 10:09:53 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  2 10:10:12 2008
Subject: [Harbour] nmake optimization for .prg
In-Reply-To: <6547DD43-38A4-43BB-8C9E-C1FA2B2EACA6@syenar.hu>
References: <6547DD43-38A4-43BB-8C9E-C1FA2B2EACA6@syenar.hu>
Message-ID: <20081002140953.GD5981@34-mo7-2.acn.waw.pl>

On Thu, 02 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I'm trying to optimize MSVC non-GNU make, so that it
> compiles .prg in one batch (== one harbour.exe call by
> .lib), just like for .c files, as opposed to the current
> one-by-one .prg file compilation approach.
> IOW (and if possible), I'd like to convert this rule:
> ---
> {$(RTL_DIR)}.prg{$(OBJ_DIR)$(OBJEXT):
>    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
>    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
> ---
> to something like this:
> ---
> {$(OBJ_DIR)}.c{$(OBJ_DIR)}$(OBJEXT)::
>    $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
>
> {$(RTL_DIR)}.prg{$(OBJ_DIR)$(OBJEXT)::
>    $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
> ---
> By swapping .prg and .c in .SUFFIXES, it even works,
> but only if I run the make process twice.
> Does anyone have an idea how to fix this? Marek, Paul?

The problem is cause by this rule:
   {$(RTL_DIR)}.prg{$(OBJ_DIR)$(OBJEXT)::
      $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<

It wrongly informs make that 
      $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
translates *.prg to *$(OBJEXT) files when in fact
it translates .prg to .c. If NMAKE can use indirect rules
then it should be enough to fix the pattern:
   {$(RTL_DIR)}.prg{$(OBJ_DIR)}.c::
      $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<

BTW also one closing '}' was missing.

best regards,
Przemek
From vailtom at gmail.com  Thu Oct  2 10:33:55 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Thu Oct  2 10:33:41 2008
Subject: [Harbour] hb_threadID()
References: 48E4CC82.5070108@gmail.com
Message-ID: <48E4DBD3.7010906@gmail.com>

Okay, the numeric type of return values very important...

PS: Sorry for bad english!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081002/1fd276b8/attachment.html
From druzus at acn.waw.pl  Thu Oct  2 10:35:20 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  2 10:35:40 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <48E4ADE2.1070603@libero.it>
References: <48E4ADE2.1070603@libero.it>
Message-ID: <20081002143520.GE5981@34-mo7-2.acn.waw.pl>

On Thu, 02 Oct 2008, Maurilio Longo wrote:

Hi Maurilio,

> I've added this little function to my copy of vm\thread.c, I attach it here so
> that Przemyslaw and/or Viktor can have a look at it and also because I'm not
> at ease with branching and so I don't know where to commit this change.
> -----------8<-----------------
> HB_FUNC( HB_THREADID )
> {
> #if defined( HB_MT_VM )
>    PHB_THREADSTATE pThread = ( PHB_THREADSTATE ) hb_vmThreadState();
>    if( pThread )
>       hb_retnl( pThread->th_id );
> #endif
> }
> ----------->8-----------------

Why you cannot use hb_threadSelf()?
It also returns valid identifier which is compatible with values returned by
hb_threadStart().
If we need yet another thread identifier then we can add it but it should
give some additional information. th_id is not good choice because it's
platform dependent low level value. In PTHREAD and OS2 is OS thread ID.
In MS-Windows is OS handler to given thread. Farther when thread is detached
then this value is cleared and can be reused for new threads in some systems.

> I've added this function because I was still investigating a speed issue on my
> pc and I've changed also tests\speedtst.prg so that it creates two threads
> which do the work (instead of a single one).

Thank you. For such tests we should add additional function to measure
time consumed by single thread only. For MT performance it will be also
good to run this test in many threads, f.e. each loop in separate thread
to calculate also the cost of thread creation and task switching.
Anyhow it does not explain why you haven't used existing thread
identifiers returned by hb_threadStart() and hb_threadSelf().
If you need continouse thread IDs registered by HVM then we can add
such functionality. We can use 64bit counter so we will not have to
worry about repeated values. We can also add support to return OS
thread ID, f.e.: hb_threadOsId().
The question is only what we need. I also suggest to use clear names.
F.e.:
   hb_threadVMID() -> incremented by us integer number
   hb_threadOSID() -> OS thread ID which can be reused by some .c functions

> Please note that my changes are just an ugly hack to make it work and see if
> having a SMP kernel on a HT cpu gives any advantage when the work is splitted
> between two cpus.
> I attach the modified speedtst.prg to this message also, so that anybody can
> have a look at it
> Well, that said, total time went from 70 seconds to 59.9 :)
> MT PIV 3.6GHZ HT, OS/2 SMP kernel
> ============================================================
>  0 - total application time:                              59.87
> total real time:                                     59.88

I expected bigger difference. I'll look at the code. maybe I'll update
it to use more threads.

> I,ve also noted that thread 1 has a threadid of 0 (zero) while the other
> threads have the correct id, maybe this is a minor glitch to correct.

Because it does not have parent thread which may need to join it.
It's detached for us. Just simply th_id does not mean what you thought.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct  2 10:41:43 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  2 10:42:03 2008
Subject: [Harbour] 2008-09-21 23:03 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48E4D3FC.9070402@dbtopas.lt>
References: <20080921210436.GA10656@34-mo7-2.acn.waw.pl>
	<48E4D3FC.9070402@dbtopas.lt>
Message-ID: <20081002144143.GF5981@34-mo7-2.acn.waw.pl>

On Thu, 02 Oct 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas.

>>     + added support for inheriting visible memvars from current
>>       thread when new thread is created. Memvars in child thread
>>       can be shared with parrent or they can be copied. See HB_THREAD_*
>>       attributes defined in hbthread.ch, f.e.:
>>          hb_threadStart( HB_THREAD_INHERIT_PUBLIC, @thFunc() )
>>       or:
>>          hb_threadStart( HB_BITOR( HB_THREAD_INHERIT_MEMVARS + ;
>>                                    HB_THREAD_MEMVARS_COPY ), ;
>>                           @thFunc() )
> I suggest to swap 1st and 2nd parameters. The main parameter of 
> hb_threadStart() is code to be executed (in any form: block, symbol or 
> function pointer), inheritance flags are only options. So, it is logic to 
> put code parameter in the first place. Flags can have a default value, and 
> if it default flags are OK, hb_threadStart(@func()) looks much better, than 
> hb_threadStart(, @func()).

But you can still use hb_threadStart(@func()) because flags are optional.
If I move them to second parameter then you have to reserve empty
item before parameters. Now execat syntax of hb_threadStart() is:

   hb_threadStart( [ <nAttr>, ] <@sStart> | <bStart> | <cStart> ;
                   [, <params,...> ] ) -> <pThID> | NIL

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Oct  2 10:45:39 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  2 10:46:11 2008
Subject: [Harbour] How difficult is to implement this alternative syntax?
In-Reply-To: <20081002135748.GB5981@34-mo7-2.acn.waw.pl>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
	<200810011557.17032.a.jurkiewicz@abix.info.pl>
	<9257026e0810010752w6dae41f2ndd85f7d38821c6ab@mail.gmail.com>
	<200810020529.39619.philb@philb.us>
	<20081002135748.GB5981@34-mo7-2.acn.waw.pl>
Message-ID: <C0BD4533-8E66-4D13-A9EA-A1A9D62FE30D@syenar.hu>

>
Hi Przemek,

> On Thu, 02 Oct 2008, Phil Barnett wrote:
>
> Hi Phil,
>
>>> 3) I'd like to have a switch that warns me if I've used "=" where is
>>> "ambiguos".
>> My Click! source code reformattor does this conversion for you in  
>> many cases.
>
> Maybe we can use it for Harbour .prg source formatting?
> I noticed that each of us has some own personal preferences
> and formats .prg code in a little bit different way.
> Some .prg code formatter like indent for .c can nicely help
> here.
> Viktor what do you think?

Talking about core, I've formatted most of them
to a consistent style, maybe there are still
some differences here and there, but it should be
mostly okay. If there still are some, I'd gladly format
them manually. [ I skipped only those where there
was a detectable consistent style. ]

As for contrib, I'm a bit hesitant of using any
automated code formatting tools either, as they tend
to do some things which I don't really like. With all
due respect to Click! and no offense, but I've
been cleaning Click! formatted code in hbdoc/hbmake,
and it was a bit of a pain.

And as an aside, I used to find out how some parts
work and usually also find/fix some problems along
the way, so formatting is not just for the sake
of style.

For some really nastily formatted code, Click!
could do a good service to condition the code
to a usable state though, but as a final or
standard processing tool I wouldn't choose this
route.

Anyways I'll give it a shot to see if I can get
a good setup for Harbour.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct  2 10:46:09 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  2 10:46:26 2008
Subject: [Harbour] 2008-10-02 10:08 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20081002140502.GC5981@34-mo7-2.acn.waw.pl>
References: <01c92466$Blat.v2.6.2$30687aec$183ca572564a@127.0.0.1>
	<20081002140502.GC5981@34-mo7-2.acn.waw.pl>
Message-ID: <6E43F53D-1087-48C5-92F3-C42E76DD7576@syenar.hu>

Hi Przemek,

Good idea, I'll do it.

Brgds,
Viktor

On 2008.10.02., at 16:05, Przemyslaw Czerpak wrote:

> On Thu, 02 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> 2008-10-02 10:08 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>  * contrib/hbct/ctmisc.prg
>>    + Added dummy functions:
>>      GETKXLAT(), SETKXLAT(), DSETKBIOS()
>
> If possible please keep such dummy functions in separate file,
> f.e. cttodo.prg for two reasons:
> 1. it's easier to locate what is not implemented.
> 2. people may use their own replacement with the same name
>   and when dummy functions are in the same .prg file as some
>   other usable then it causes name conflicts during linking.
>
> best regards,
> Przemek

From harbour.01 at syenar.hu  Thu Oct  2 10:46:41 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  2 10:46:53 2008
Subject: [Harbour] 2008-09-21 23:03 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <48E4D3FC.9070402@dbtopas.lt>
References: <20080921210436.GA10656@34-mo7-2.acn.waw.pl>
	<48E4D3FC.9070402@dbtopas.lt>
Message-ID: <2A8E6F6B-94D3-4E12-B9E4-7D1159003DB3@syenar.hu>

+1

On 2008.10.02., at 16:00, Mindaugas Kavaliauskas wrote:

> Przemyslaw Czerpak wrote:
>> 2008-09-21 23:03 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>>  ...
>>  * harbour/source/vm/thread.c
>>    + added support for inheriting visible memvars from current
>>      thread when new thread is created. Memvars in child thread
>>      can be shared with parrent or they can be copied. See  
>> HB_THREAD_*
>>      attributes defined in hbthread.ch, f.e.:
>>         hb_threadStart( HB_THREAD_INHERIT_PUBLIC, @thFunc() )
>>      or:
>>         hb_threadStart( HB_BITOR( HB_THREAD_INHERIT_MEMVARS + ;
>>                                   HB_THREAD_MEMVARS_COPY ), ;
>>                          @thFunc() )
>
>
> Hi,
>
>
> I suggest to swap 1st and 2nd parameters. The main parameter of  
> hb_threadStart() is code to be executed (in any form: block, symbol  
> or function pointer), inheritance flags are only options. So, it is  
> logic to put code parameter in the first place. Flags can have a  
> default value, and if it default flags are OK,  
> hb_threadStart(@func()) looks much better, than hb_threadStart(,  
> @func()).
>
>
> Best regards,
> Mindaugas
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Oct  2 10:48:04 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  2 10:48:30 2008
Subject: [Harbour] nmake optimization for .prg
In-Reply-To: <20081002140953.GD5981@34-mo7-2.acn.waw.pl>
References: <6547DD43-38A4-43BB-8C9E-C1FA2B2EACA6@syenar.hu>
	<20081002140953.GD5981@34-mo7-2.acn.waw.pl>
Message-ID: <3312B893-446F-4ABA-BBEE-B26451F076B7@syenar.hu>

Many thanks Przemek, I'll try this way later today.

[ I've retyped the examples from another screen, hence
the bad typos, like '}' :) ]

Brgds,
Viktor

On 2008.10.02., at 16:09, Przemyslaw Czerpak wrote:

> On Thu, 02 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> I'm trying to optimize MSVC non-GNU make, so that it
>> compiles .prg in one batch (== one harbour.exe call by
>> .lib), just like for .c files, as opposed to the current
>> one-by-one .prg file compilation approach.
>> IOW (and if possible), I'd like to convert this rule:
>> ---
>> {$(RTL_DIR)}.prg{$(OBJ_DIR)$(OBJEXT):
>>   $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
>>   $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
>> ---
>> to something like this:
>> ---
>> {$(OBJ_DIR)}.c{$(OBJ_DIR)}$(OBJEXT)::
>>   $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
>>
>> {$(RTL_DIR)}.prg{$(OBJ_DIR)$(OBJEXT)::
>>   $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
>> ---
>> By swapping .prg and .c in .SUFFIXES, it even works,
>> but only if I run the make process twice.
>> Does anyone have an idea how to fix this? Marek, Paul?
>
> The problem is cause by this rule:
>   {$(RTL_DIR)}.prg{$(OBJ_DIR)$(OBJEXT)::
>      $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
>
> It wrongly informs make that
>      $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
> translates *.prg to *$(OBJEXT) files when in fact
> it translates .prg to .c. If NMAKE can use indirect rules
> then it should be enough to fix the pattern:
>   {$(RTL_DIR)}.prg{$(OBJ_DIR)}.c::
>      $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
>
> BTW also one closing '}' was missing.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Oct  2 10:48:53 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  2 10:49:04 2008
Subject: [Harbour] 2008-09-21 23:03 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081002144143.GF5981@34-mo7-2.acn.waw.pl>
References: <20080921210436.GA10656@34-mo7-2.acn.waw.pl>
	<48E4D3FC.9070402@dbtopas.lt>
	<20081002144143.GF5981@34-mo7-2.acn.waw.pl>
Message-ID: <9F937FF4-51B6-4C42-AFAF-8E12A34176E2@syenar.hu>

Okay -1 :)

On 2008.10.02., at 16:41, Przemyslaw Czerpak wrote:

> On Thu, 02 Oct 2008, Mindaugas Kavaliauskas wrote:
>
> Hi Mindaugas.
>
>>>    + added support for inheriting visible memvars from current
>>>      thread when new thread is created. Memvars in child thread
>>>      can be shared with parrent or they can be copied. See  
>>> HB_THREAD_*
>>>      attributes defined in hbthread.ch, f.e.:
>>>         hb_threadStart( HB_THREAD_INHERIT_PUBLIC, @thFunc() )
>>>      or:
>>>         hb_threadStart( HB_BITOR( HB_THREAD_INHERIT_MEMVARS + ;
>>>                                   HB_THREAD_MEMVARS_COPY ), ;
>>>                          @thFunc() )
>> I suggest to swap 1st and 2nd parameters. The main parameter of
>> hb_threadStart() is code to be executed (in any form: block, symbol  
>> or
>> function pointer), inheritance flags are only options. So, it is  
>> logic to
>> put code parameter in the first place. Flags can have a default  
>> value, and
>> if it default flags are OK, hb_threadStart(@func()) looks much  
>> better, than
>> hb_threadStart(, @func()).
>
> But you can still use hb_threadStart(@func()) because flags are  
> optional.
> If I move them to second parameter then you have to reserve empty
> item before parameters. Now execat syntax of hb_threadStart() is:
>
>   hb_threadStart( [ <nAttr>, ] <@sStart> | <bStart> | <cStart> ;
>                   [, <params,...> ] ) -> <pThID> | NIL
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From dbtopas at dbtopas.lt  Thu Oct  2 10:57:26 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Oct  2 10:55:26 2008
Subject: [Harbour] 2008-09-21 23:03 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20081002144143.GF5981@34-mo7-2.acn.waw.pl>
References: <20080921210436.GA10656@34-mo7-2.acn.waw.pl>	<48E4D3FC.9070402@dbtopas.lt>
	<20081002144143.GF5981@34-mo7-2.acn.waw.pl>
Message-ID: <48E4E156.1090905@dbtopas.lt>

> But you can still use hb_threadStart(@func()) because flags are optional.
> If I move them to second parameter then you have to reserve empty
> item before parameters. Now execat syntax of hb_threadStart() is:
> 
>    hb_threadStart( [ <nAttr>, ] <@sStart> | <bStart> | <cStart> ;
>                    [, <params,...> ] ) -> <pThID> | NIL

Hi,


thanks for explanation. I haven't looked to the source and I thought 
that parameter positions are fixed
   hb_threadStart( <nAttr>, <xCode> [, <xParams,...> ] )


Best regards,
Mindaugas


P.S. but I general case I like to have fixed parameters.
From maurilio.longo at libero.it  Thu Oct  2 11:07:39 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Oct  2 11:07:47 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <20081002143520.GE5981@34-mo7-2.acn.waw.pl>
References: <48E4ADE2.1070603@libero.it>
	<20081002143520.GE5981@34-mo7-2.acn.waw.pl>
Message-ID: <48E4E3BB.3050803@libero.it>

Hi Przemyslaw,

Przemyslaw Czerpak wrote:
> Why you cannot use hb_threadSelf()?

Because I'm used to use a thread id which is a number, this is the way it
works on OS/2 and xbase++ on win32 and I did not find something similar in
current code.

> It also returns valid identifier which is compatible with values returned by
> hb_threadStart().

See above.

> If we need yet another thread identifier then we can add it but it should
> give some additional information. th_id is not good choice because it's
> platform dependent low level value. In PTHREAD and OS2 is OS thread ID.
> In MS-Windows is OS handler to given thread. Farther when thread is detached
> then this value is cleared and can be reused for new threads in some systems.
> 

Yes, but on every given platform it identifies currently running thread in a
way which is clear and which can be passed to other OS APIs.

I don't expect to exchange thread IDs with processes running on different
platforms, so an internal, harbour only, ID is of no pratical use, IMHO.

> identifiers returned by hb_threadStart() and hb_threadSelf().

see above and I thought hb_threadSelf() was returning a thread object, not a
numerical ID

> If you need continouse thread IDs registered by HVM then we can add
> such functionality. We can use 64bit counter so we will not have to
> worry about repeated values. We can also add support to return OS
> thread ID, f.e.: hb_threadOsId().
> The question is only what we need. I also suggest to use clear names.
> F.e.:
>    hb_threadVMID() -> incremented by us integer number
>    hb_threadOSID() -> OS thread ID which can be reused by some .c functions
> 

I needed it just to see what test the modified speedtst.prg was executing and
in which thread.

> I expected bigger difference. I'll look at the code. maybe I'll update
> it to use more threads.
> 
I think a lot of time is spent inside mutexes (aquiring them).

>> I,ve also noted that thread 1 has a threadid of 0 (zero) while the other
>> threads have the correct id, maybe this is a minor glitch to correct.
> 
> Because it does not have parent thread which may need to join it.
> It's detached for us. Just simply th_id does not mean what you thought.
> 

I'm not used to 'join' threads, I see them as 'separate' entities which live
their life, I can wait a thread and, as such, I can also wait thread one.

More in general, I think all threads should be equal, thread one is just the
first started. On a ST program it is the thread which executes the process;
this makes code which deals with threads more uniform since it has not to have
a separate, special case for thread one (or zero).

Maurilio.

> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Thu Oct  2 11:09:29 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Oct  2 11:09:36 2008
Subject: [Harbour] changelog 9533 doesn't build on OS/2
Message-ID: <48E4E429.50806@libero.it>

make[1]: Entering directory `/repository/harbour-svn/source/rtl/os2/gcc'
gcc -I. -I../../../../include -Wall -W -O3 -DTCPV40HDRS -DHB_FM_STATISTICS_OFF -
c ../../filesys.c -ofilesys.o
../../filesys.c: In function `convert_open_flags':
../../filesys.c:419: error: `S_IREAD' undeclared (first use in this function)
../../filesys.c:419: error: (Each undeclared identifier is reported only once
../../filesys.c:419: error: for each function it appears in.)
../../filesys.c:420: error: `S_IWRITE' undeclared (first use in this function)
../../filesys.c:421: error: `S_IEXEC' undeclared (first use in this function)
make[1]: *** [filesys.o] Error 1
make[1]: Leaving directory `/repository/harbour-svn/source/rtl/os2/gcc'
make: *** [descend] Error 2

Maurilio.


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From druzus at acn.waw.pl  Thu Oct  2 11:50:41 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  2 11:50:59 2008
Subject: [Harbour] changelog 9533 doesn't build on OS/2
In-Reply-To: <48E4E429.50806@libero.it>
References: <48E4E429.50806@libero.it>
Message-ID: <20081002155041.GA18777@34-mo7-2.acn.waw.pl>

On Thu, 02 Oct 2008, Maurilio Longo wrote:

Hi Maurilio,

> make[1]: Entering directory `/repository/harbour-svn/source/rtl/os2/gcc'
> gcc -I. -I../../../../include -Wall -W -O3 -DTCPV40HDRS -DHB_FM_STATISTICS_OFF -
> c ../../filesys.c -ofilesys.o
> ../../filesys.c: In function `convert_open_flags':
> ../../filesys.c:419: error: `S_IREAD' undeclared (first use in this function)
> ../../filesys.c:419: error: (Each undeclared identifier is reported only once
> ../../filesys.c:419: error: for each function it appears in.)
> ../../filesys.c:420: error: `S_IWRITE' undeclared (first use in this function)
> ../../filesys.c:421: error: `S_IEXEC' undeclared (first use in this function)
> make[1]: *** [filesys.o] Error 1
> make[1]: Leaving directory `/repository/harbour-svn/source/rtl/os2/gcc'
> make: *** [descend] Error 2

The only one modification in filesys.c which can interact with above
is:
   #if !defined( _XOPEN_SOURCE )
   #  define _XOPEN_SOURCE 500
   #endif
at the beginning of this file.
Please try to comment it and check if it helps.
If not then it has to be sth local to your environment.
If yes then we will have to find some workaround for OS2 builds.
This define is necessary for pread[64]()/pwrite[64]() functions
used in *nixes.
BTW I was looking at sth similar in OS2 API in the internet but
I was not able to find anything. Probably for this platform we
cannot enable file handle sharing in aliased work areas.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct  2 12:33:34 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  2 12:33:53 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <48E4E3BB.3050803@libero.it>
References: <48E4ADE2.1070603@libero.it>
	<20081002143520.GE5981@34-mo7-2.acn.waw.pl>
	<48E4E3BB.3050803@libero.it>
Message-ID: <20081002163334.GB18777@34-mo7-2.acn.waw.pl>

On Thu, 02 Oct 2008, Maurilio Longo wrote:

Hi Maurilio,

> > Why you cannot use hb_threadSelf()?
> Because I'm used to use a thread id which is a number, this is the way it
> works on OS/2 and xbase++ on win32 and I did not find something similar in
> current code.

Not all OSes have to support numeric thread ID. If you need number
then we will have to intorduce our own numeric number just like in xbase++

> > It also returns valid identifier which is compatible with values returned by
> > hb_threadStart().
> See above.

But you haven't explained why numeric value is better then pointer.

> Yes, but on every given platform it identifies currently running thread in a
> way which is clear and which can be passed to other OS APIs.

??? Where did you found such information? In some OSes thread ID can be
even complex structure and we can use only pointer to this structure
casted to number what is potential GPF problem when you pass wrong numeric
value. Using pointer item is much more safe because it eliminates such
risk.
I also do not want to create to much hb_threadID*() functions like in
xHarbour where you have:
   THREADGETCURRENT()
   THREADGETCURRENTINTERNAL()
   GETCURRENTTHREAD()
   GETTHREADID()
   GETSYSTEMTHREADID()
and I never remember what each of the above function returns for given
platform and I have to look at source code to find an answer.

Now if I understand you need continuous number allocated for each HVM
thread like threadID in xbase++.

OK. We can introduce such numeric thread IDs.
We can also map thread ID to number though in some OSes it will
be memory address and I'm afraid that some .prg code which may
expect continuous numbering will not be well portable.

> I don't expect to exchange thread IDs with processes running on different
> platforms, so an internal, harbour only, ID is of no pratical use, IMHO.

I do not talk about it.

> see above and I thought hb_threadSelf() was returning a thread object, not a
> numerical ID

It returns pointer item you can well use to make == comparison to identify
the thread. You can also display it by simple:
   ? tdID
If you want to use OS level thread ID in some C functions then using pointer
items is also much better because the C code can validate if given parameter
is valid HVM thread ID. It's enough to add C function like:
   BOOL hb_threadGetOSID( PHB_ITEM pThread, HB_THREAD_T * id ) => fValid

> > If you need continouse thread IDs registered by HVM then we can add
> > such functionality. We can use 64bit counter so we will not have to
> > worry about repeated values. We can also add support to return OS
> > thread ID, f.e.: hb_threadOsId().
> > The question is only what we need. I also suggest to use clear names.
> > F.e.:
> >    hb_threadVMID() -> incremented by us integer number
> >    hb_threadOSID() -> OS thread ID which can be reused by some .c functions
> I needed it just to see what test the modified speedtst.prg was executing and
> in which thread.

   ? thID, ":-)"

> > I expected bigger difference. I'll look at the code. maybe I'll update
> > it to use more threads.
> I think a lot of time is spent inside mutexes (aquiring them).

Harbour in practice does not use any of such mutexes. Only some few small
peaces of code are covered by them and it's small chance that two threads
will be serialized. The cost of setting/releasing mutexes is the same for
one and two threads so it's unimportant in such test.
It has to be sth different.

> > Because it does not have parent thread which may need to join it.
> > It's detached for us. Just simply th_id does not mean what you thought.
> I'm not used to 'join' threads, I see them as 'separate' entities which live
> their life, I can wait a thread and, as such, I can also wait thread one.

It does not mean that other programmers will not want to use one of the
most import MT programming functionality :-). When threads are executed
to make some jobs and then you want to collect results then it's enough
to join threads collecting its results without introducing some additional
structures and synchronization mechanism.

> More in general, I think all threads should be equal, thread one is just the
> first started. On a ST program it is the thread which executes the process;
> this makes code which deals with threads more uniform since it has not to have
> a separate, special case for thread one (or zero).

We do not have any of such special thread except the one which
was executed by hb_vmInit() and is finished by hb_vmQuit().
Inside hb_vmQuit() it sends QUITE request to all working threads
waiting for them before HVM resources will be deallocated.
This behavior will be very important when Harbour is embedded in
some other system which has to be sure that all Harbour threads
finished after calling hb_vmQuit().
If it's necessary then I'll add internal continuous numbers to use
as hb_threadID() so you will have similar to xbase++ results on all
platforms though so far I though about adding such numbers only to
TTHREAD() object.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Oct  2 12:55:25 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  2 12:55:46 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <20081002163334.GB18777@34-mo7-2.acn.waw.pl>
References: <48E4ADE2.1070603@libero.it>
	<20081002143520.GE5981@34-mo7-2.acn.waw.pl>
	<48E4E3BB.3050803@libero.it>
	<20081002163334.GB18777@34-mo7-2.acn.waw.pl>
Message-ID: <E81A546B-696C-486B-8869-1FF653211537@syenar.hu>

>>>
Hi folks,

>>> Why you cannot use hb_threadSelf()?
>> Because I'm used to use a thread id which is a number, this is the  
>> way it
>>
>> works on OS/2 and xbase++ on win32 and I did not find something  
>> similar in
>> current code.
>
> Not all OSes have to support numeric thread ID. If you need number
> then we will have to intorduce our own numeric number just like in  
> xbase++

Sorry to jump in, but I had the impression this
is our number. IMO hb_threadID() should return
the Harbour value, not an OS one. If there is a
separate OS level one, IMO it should be returned
by some internal function (or maybe direct OS API),
because such code could easily break portability
on the Harbour level.

>> More in general, I think all threads should be equal, thread one is  
>> just the
>> first started. On a ST program it is the thread which executes the  
>> process;
>> this makes code which deals with threads more uniform since it has  
>> not to have
>> a separate, special case for thread one (or zero).
>
> We do not have any of such special thread except the one which
> was executed by hb_vmInit() and is finished by hb_vmQuit().
> Inside hb_vmQuit() it sends QUITE request to all working threads
> waiting for them before HVM resources will be deallocated.
> This behavior will be very important when Harbour is embedded in
> some other system which has to be sure that all Harbour threads
> finished after calling hb_vmQuit().
> If it's necessary then I'll add internal continuous numbers to use
> as hb_threadID() so you will have similar to xbase++ results on all
> platforms though so far I though about adding such numbers only to
> TTHREAD() object.

[ My vote for this. ]

Brgds,
Viktor

From maurilio.longo at libero.it  Thu Oct  2 13:29:29 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Oct  2 13:29:36 2008
Subject: [Harbour] changelog 9533 doesn't build on OS/2
In-Reply-To: <20081002155041.GA18777@34-mo7-2.acn.waw.pl>
References: <48E4E429.50806@libero.it>
	<20081002155041.GA18777@34-mo7-2.acn.waw.pl>
Message-ID: <48E504F9.9090400@libero.it>

Przemyslaw,

> 
> The only one modification in filesys.c which can interact with above
> is:
>    #if !defined( _XOPEN_SOURCE )
>    #  define _XOPEN_SOURCE 500
>    #endif
> at the beginning of this file.
> Please try to comment it and check if it helps.

Yes, it is it.

In my system I have them defined like this

#define	S_IRWXU	0000700			/* RWX mask for owner */
#define	S_IRUSR	0000400			/* R for owner */
#define	S_IWUSR	0000200			/* W for owner */
#define	S_IXUSR	0000100			/* X for owner */

#if __BSD_VISIBLE
#define	S_IREAD		S_IRUSR
#define	S_IWRITE	S_IWUSR
#define	S_IEXEC		S_IXUSR
#endif

inside sys/stat.h

But if I include it and define __BSD_VISIBLE I get other errors.

So i did try to add to filesys.c only those defines and it seems to compile ok.

> If yes then we will have to find some workaround for OS2 builds.
> This define is necessary for pread[64]()/pwrite[64]() functions
> used in *nixes.

They are available, under the define __XSI_VISIBLE, inside unistd.h

I've added this also, so now what is needed is just a test to see if it works
as expected.

BTW, GCC on OS/2 has a lot of *nix posix functions available (through emulation).

> BTW I was looking at sth similar in OS2 API in the internet but
> I was not able to find anything. Probably for this platform we
> cannot enable file handle sharing in aliased work areas.
> 
No, there are no native OS/2 functions to move a file handle and read as a
single atomic operation.

We can use a mutex, though, to reach the same effect, I do understand that
this makes it more tedious to write the code and, if a single mutex is used,
it can affect scalability.

Best regards.

Maurilio.


> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Thu Oct  2 13:33:56 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Oct  2 13:34:04 2008
Subject: [Harbour] changelog 9533 doesn't build on OS/2
In-Reply-To: <48E504F9.9090400@libero.it>
References: <48E4E429.50806@libero.it>	<20081002155041.GA18777@34-mo7-2.acn.waw.pl>
	<48E504F9.9090400@libero.it>
Message-ID: <48E50604.7050505@libero.it>

> So i did try to add to filesys.c only those defines and it seems to compile ok.
> 
Uhm, no, with __XSI_VISIBLE I have a few more errors, tomorrow I'll
investigate more.

Maueilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From bedipritpal at hotmail.com  Thu Oct  2 13:43:21 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Oct  2 13:43:30 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <48E4E3BB.3050803@libero.it>
References: <48E4ADE2.1070603@libero.it>
	<20081002143520.GE5981@34-mo7-2.acn.waw.pl>
	<48E4E3BB.3050803@libero.it>
Message-ID: <19784204.post@talk.nabble.com>


Maurilio

<<<<
Because I'm used to use a thread id which is a number, this is the way it
works on OS/2 and xbase++ on win32 and I did not find something similar in
current code.
>>>>

Perhaps you are misunderstood of Xbase++ thread implementation.
ThreadID() function in Xbase++ always returns the numeric consecutive id
number incremented by TThread() object. It has nothing to do with
OS specific thread identification. To get OS specific information you 
need to call ThreadInfo() function with required parameters, which
again is a function equivalent of TThread() objects instance variables.

Przemek is right. When he will implement TThread() object, you will be 
able to get both informations as you may need, perhaps even more,
ThreadID() - as a number, ThreadOSID() as a number as PID,
ThreadPTR() - thread as a pointer OR ThreadObject() as an object
controlling the current thread.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/hb_threadID%28%29-tp19777352p19784204.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From maurilio.longo at libero.it  Thu Oct  2 13:43:54 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Oct  2 13:44:03 2008
Subject: [Harbour] changelog 9533 doesn't build on OS/2
In-Reply-To: <48E50604.7050505@libero.it>
References: <48E4E429.50806@libero.it>	<20081002155041.GA18777@34-mo7-2.acn.waw.pl>	<48E504F9.9090400@libero.it>
	<48E50604.7050505@libero.it>
Message-ID: <48E5085A.7070806@libero.it>

Przemyslaw,

it builds ok if I add

#if defined( HB_OS_OS2 )
#include <sys/stat.h>
#define S_IREAD   S_IRUSR
#define S_IWRITE  S_IWUSR
#define S_IEXEC   S_IXUSR
ssize_t  pread(int, void *, size_t, off_t);
ssize_t  pwrite(int, const void *, size_t, off_t);
#endif

after harbour headers have been included.

Can this be ok, given a working pread/pwrint inside runtime dll?

Thanks.

Maurilio.

Maurilio Longo wrote:
>> So i did try to add to filesys.c only those defines and it seems to compile ok.
>>
> Uhm, no, with __XSI_VISIBLE I have a few more errors, tomorrow I'll
> investigate more.
> 
> Maueilio.
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From toninhofwi at yahoo.com.br  Thu Oct  2 14:10:58 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Thu Oct  2 14:12:41 2008
Subject: [Harbour] CHANGELOG: 2008-10-02 15:54 UTC+0200 Maurilio Longo
	(maurilio.longo@libero.it)
In-Reply-To: <48E4D297.6050903@libero.it>
References: <48E4D297.6050903@libero.it>
Message-ID: <0k3ae4pcli45esddr37f5l1kkbs34qibmd@4ax.com>

>2008-10-02 15:54 UTC+0200 Maurilio Longo (maurilio.longo@libero.it)
>  * harbour/source/vm/thread.c
>    * hb_ThreadID() returns 0 when built in ST mode.

Hi Maurilio, I get this error with BCC:

source\vm\thread.c:
Error E2342 source\vm\thread.c 679: Type mismatch in parameter
'lNumber' (wanted 'long', got 'void *') in function HB_FUN_HB_THREADID
*** 1 errors in Compile ***


Best Regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From harbour.01 at syenar.hu  Thu Oct  2 14:30:17 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  2 14:30:22 2008
Subject: [Harbour] 2008-10-02 20:25 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c924bc$Blat.v2.6.2$eb19de84$179069cb3d6e@127.0.0.1>

2008-10-02 20:25 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbct/Makefile
  * contrib/hbct/common.mak
  * contrib/hbct/ctmisc.prg
  + contrib/hbct/ctdummy.prg
    * Recently added dummy CT functions moved to a separate file.

  * source/vm/thread.c
    ! Fixed warning in HB_THREADID().
--
Brgds,
Viktor

From druzus at acn.waw.pl  Thu Oct  2 14:33:52 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  2 14:34:11 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <20081002163334.GB18777@34-mo7-2.acn.waw.pl>
References: <48E4ADE2.1070603@libero.it>
	<20081002143520.GE5981@34-mo7-2.acn.waw.pl>
	<48E4E3BB.3050803@libero.it>
	<20081002163334.GB18777@34-mo7-2.acn.waw.pl>
Message-ID: <20081002183352.GA30587@34-mo7-2.acn.waw.pl>

On Thu, 02 Oct 2008, Przemyslaw Czerpak wrote:
> Harbour in practice does not use any of such mutexes. Only some few small
> peaces of code are covered by them and it's small chance that two threads
> will be serialized. The cost of setting/releasing mutexes is the same for
> one and two threads so it's unimportant in such test.
> It has to be sth different.

And I've got the answer. At least on my computer it's a hardware issue.
In -gc[0-2] mode each threads makes:

      if( ! --uiPolls )
         hb_inkeyPoll();

in main HVM loop. Simple hack even acceptable in ST programs is killing
the performance in ST ones. Important is not hb_inkeyPoll() call (you can
comment it but it will not change the results) but --uiPolls.
Each thread decrements the same memory variable and it causes some horrible
synchronization issues between CPUs on multi CPU machines which kill the
performance. It's a hardware issue so I do not know how big overhead it
may cause on other machines. I'm very interesting in your results.
Please rebuild Harbour with -DHB_GUI macro or compile speedtst.prg with
-gc3 and compare results.

Definitely this hack with periodic hb_inkeyPoll() calling have to be
eliminated or at least updated for MT mode.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct  2 14:46:11 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  2 14:46:30 2008
Subject: [Harbour] changelog 9533 doesn't build on OS/2
In-Reply-To: <48E5085A.7070806@libero.it>
References: <48E4E429.50806@libero.it>
	<20081002155041.GA18777@34-mo7-2.acn.waw.pl>
	<48E504F9.9090400@libero.it> <48E50604.7050505@libero.it>
	<48E5085A.7070806@libero.it>
Message-ID: <20081002184611.GB30587@34-mo7-2.acn.waw.pl>

On Thu, 02 Oct 2008, Maurilio Longo wrote:

Hi Maurilio,

> it builds ok if I add
> #if defined( HB_OS_OS2 )
> #include <sys/stat.h>
> #define S_IREAD   S_IRUSR
> #define S_IWRITE  S_IWUSR
> #define S_IEXEC   S_IXUSR

Thank you very much for your help. I think we can make sth like:
   #ifndef S_IREAD
      #define S_IREAD   S_IRUSR
   #endif
   #ifndef S_IWRITE
      #define S_IWRITE  S_IWUSR
   #endif
   #ifndef S_IEXEC
      #define S_IEXEC   S_IXUSR
   #endif


> ssize_t  pread(int, void *, size_t, off_t);
> ssize_t  pwrite(int, const void *, size_t, off_t);
> after harbour headers have been included.
> Can this be ok, given a working pread/pwrint inside runtime dll?

With pread()/pwrite() I'm not sure. If there is no OS level API call
for such functionality then they functions internally have to use
globally positioned read/write functions. It will not help us because
hb_fsSeek is not protected by common with above functions critical
section (if any is used internally by library which emulates them)
so I think it will be better to not enable handle sharing for OS2.
Now it's enabled only for *nixes where it's a must due to POSIX lock
behavior. In the future if it's be necessary for pseudo exclusive mode
in cloned WA then we add our own synchronization code inside filebuf.c
At least we will be sure that it works ;-)

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct  2 15:12:21 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  2 15:12:39 2008
Subject: [Harbour] 2008-10-02 21:12 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081002191221.GA8675@34-mo7-2.acn.waw.pl>

2008-10-02 21:12 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/sdf1.c
    ! fixed stupid typo (missing !) in last modification which broke
      SDF RDD read mode. Thanks to Marco for information and example.

  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
    * small cleanup in used macros

best regards
Przemek
From e.m.giordano at emagsoftware.it  Thu Oct  2 16:20:36 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Thu Oct  2 16:20:45 2008
Subject: [Harbour] Error using latest SVN
Message-ID: <B41D245FE5FC41DB9D31E2F7FAFD08B8@emag>

Using latest SVN my FWH app quits when I move the mouse over a bitmap and I 
get HB_OUT.LOG containing:

Application Exception Error - E:\EMAGFWHH\GGA\GGA.EXE
Terminated at: 2008.10.02 21:48:35

    Exception Code:C0000005
    Exception Address:0044696D
    EAX:00000000  EBX:00000000  ECX:00000002  EDX:00000001
    ESI:005C10E2  EDI:005C2D1D EBP:0012F728
    CS:EIP:001B:0044696D  SS:ESP:0023:0012F62C
    DS:0023  ES:0023  FS:003B  GS:0000
    Flags:00010246
    CS:EIP: 8A 04 37 3D B3 00 00 00 0F 87 20 27 00 00 FF 24
    SS:ESP: 00000000 00000000 00586F18 0012F644 00444CF7 005EDF17 00BF414C 
0012F664 0012F668 7E3AC228 008F0106 00000020 0051003A 02000001 00000001 
7E398BD9

    C stack:
    EIP:     EBP:       Frame: OldEBP, RetAddr, Params...
    0044696D 0012F728   0012F738 004084DC 005C2D1D 005C05B0
    004084DC 0012F738   0012F758 0044D82E 0028001E 00000037 000000B6 
00000001 010F0010 00120000
    0044D82E 0012F758   0012F764 0044DC0D 00BF0003
    0044DC0D 0012F764   0012F78C 0041A838 00000003 005CBF4C 0000013D 
005C905C 00040000 0012F7AC 0044D8F6 00BF430C
    0041A838 0012F78C   0012F7AC 0044D937 00000000 00000030 000000B6 
00000001 00F70006 00000000
    0044D937 0012F7AC   0012F8B4 0044782B 00000003 005C3B69 00000037 
005C13F0 00DB1074 00000020 0051003A 00E714B0
    0044782B 0012F8B4   0012F8C4 00408D5C 005CBF4C 005C7F2C
    00408D5C 0012F8C4   0012F8E4 0044D937 00000000 0000002A 000000B6 
00000001 00F70007 00000000
    0044D937 0012F8E4   0012F9EC 0044782B 00000003 005EDF17 0000002D 
005E7A58 008D4688 00000020 0051003A 02000001
    0044782B 0012F9EC   0012F9FC 00408524 005C3B69 005C05B0
    00408524 0012F9FC   0012FA1C 0044D937 00000000 00000022 000000B6 
00000001 00F70010 00000000
    0044D937 0012FA1C   0012FB24 0044782B 00000003 00000000 0028001E 
005E7A48 00150000 00000001 00000000 00000000
    0044782B 0012FB24   0012FB34 0040B0B4 005EDF17 005E59A8
    0040B0B4 0012FB34   0012FB54 0044D89E 00000200 0000001F 00000000 
00000001 00000000 00000000
    0044D89E 0012FB54   0012FB6C 0040FEFE 00000005 0012FBF4 00417088 
0051003A
    0040FEFE 0012FB6C   0012FB8C 004170A8 0051003A 00000200 00000000 
0028001E 00000004 00000000
    004170A8 0012FB8C   0012FBB8 7E398734 0051003A 00000200 00000000 
0028001E 00417088 DCBAABCD 00000000 0012FBF4
    7E398734 0012FBB8   0012FC20 7E398816 00417088 0051003A 00000200 
00000000 0028001E 0012FCAC 0012FCA4 008D47A0
    7E398816 0012FC20   0012FC80 7E3989CD 00000000 00417088 0051003A 
00000200 00000000 0028001E 008D47B4 00000001
    7E3989CD 0012FC80   0012FC90 7E3996C7 0012FCA4 00000001

Called from TBTNBMP:MOUSEMOVE(0)
Called from TWINDOW:HANDLEEVENT(0)
Called from TCONTROL:HANDLEEVENT(0)
Called from TBTNBMP:HANDLEEVENT(0)
Called from _FWH(0) in .\source\classes\WINDOW.PRG
Called from WINRUN(0)
Called from TWINDOW:ACTIVATE(0)
Called from MAIN(449) in GGA.PRG
------------------------------------------------------------------------

Any ideas?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Thu Oct  2 16:33:54 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  2 16:34:04 2008
Subject: [Harbour] 2008-10-02 14:33 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081002123427.GA5492@34-mo7-2.acn.waw.pl>
References: <20081002123427.GA5492@34-mo7-2.acn.waw.pl>
Message-ID: <5C6AF2FD-E568-4633-84E2-B2FC84014C8C@syenar.hu>

>
Hi Przemek,

> 2008-10-02 14:33 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbstack.h
>    % enable assembler inline function to access HVM thread stack  
> pointer
>      without native compiler TLS support even if HB_STACK_PRELOAD is  
> not
>      defined in MinGW builds. It gives some additional small speed
>      improvement in MT mode

I've remeasured MinGW and the MT overhead went
down to the level of MSVC/BCCs, even a bit lower
to 36% (from 58%, so it's actually ery significant).

Thanks a lot for it.

This is still not close to the Linux/OS/2 overhead,
but since the results are now pretty consistent
across the different compilers, I'd assume this is
the maximum that can be squeezed out from Windows
XP, and the bottleneck may be the OS itself (or
maybe my old-timer P4 2.66HT/800 CPU).

Anyway, by using MSVC as the compiler, plus dlmalloc,
the practical overhead is pretty much gone.

---
Total application time (r9509) (measured last week):

Compiler             ST     MT overhead
---------------- ------ ------ --------
GCC432 HB_NO_TLS  40.67  64.14      58%

---
Total application time (r9535) (measured now):

Compiler             ST     MT overhead
---------------- ------ ------ --------
GCC432            42.80  58.11      36%

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct  2 17:49:18 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  2 17:49:24 2008
Subject: [Harbour] 2008-10-02 23:16 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c924d8$Blat.v2.6.2$b8ca2a44$12b4c52dc8f0@127.0.0.1>

2008-10-02 23:16 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbsetup.ch
    ! Removed some company names from comments.

  * source/vm/extrap.c
    + Added //BATCH internal switch to indicate exception handler 
      to suppress the Windows exception dialog when an exception 
      occurs. Useful for programs running without user interaction.
      NOTE: This may not be the ultimate method. If we can gather 
            more such situations where such "batch" mode might 
            be useful, we may as well implement it as a Set().
    - Removed Harbour specific exception MessageBox(). Besides 
      having gotten rid of a MessageBox() call in core VM, Harbour now 
      got back the standard Windows error handling dialog, which is 
      more standard and easy to get by than the previous default 
      method, where several clicks were needed to pass through 
      the (sometimes hidden) popups. The details of all GPFs are 
      still logged into hb_out.log.
    + Removed size limit for the logged exception call stack.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Thu Oct  2 18:25:20 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  2 18:25:38 2008
Subject: [Harbour] 2008-10-03 00:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081002222520.GA31491@34-mo7-2.acn.waw.pl>

2008-10-03 00:25 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/filesys.c
    * added workaround for missing S_IREAD, S_IWRITE and S_IEXEC in OS2
      when _XOPEN_SOURCE is defined

best regards
Przemek
From philb at philb.us  Thu Oct  2 18:50:11 2008
From: philb at philb.us (Phil Barnett)
Date: Thu Oct  2 18:50:22 2008
Subject: [Harbour] How difficult is to implement this alternative syntax?
In-Reply-To: <20081002135748.GB5981@34-mo7-2.acn.waw.pl>
References: <9257026e0810010222v1f5897f0y4588321e39b32414@mail.gmail.com>
	<200810020529.39619.philb@philb.us>
	<20081002135748.GB5981@34-mo7-2.acn.waw.pl>
Message-ID: <200810021850.12171.philb@philb.us>

On Thursday 02 October 2008 09:57:48 am Przemyslaw Czerpak wrote:
> On Thu, 02 Oct 2008, Phil Barnett wrote:
>
> Hi Phil,
>
> > > 3) I'd like to have a switch that warns me if I've used "=" where is
> > > "ambiguos".
> >
> > My Click! source code reformattor does this conversion for you in many
> > cases.
>
> Maybe we can use it for Harbour .prg source formatting?
> I noticed that each of us has some own personal preferences
> and formats .prg code in a little bit different way.
> Some .prg code formatter like indent for .c can nicely help
> here.

It would be good and consistent for that use. I need to pull that code out and 
make sure it works ok under Harbour. I suspect it will work with no changes, 
I forget if I used any libraries with it but if memory serves, I stayed away 
from any propreitary code so anyone could compile it.

There's a lot of code in there that breaks source code up into atomic pieces, 
breaks runon phrases like mentioned earlier in another thread, modernizes it 
and aligns it for nice looks. I found that it makes code easier to work with 
in the long run.

The most important thing would be to find out where it needs updates to handle 
what is today's typical syntax for Harbour above and beyond what it does for 
Clipper, which was pretty complete. What is there so far is about a year of 
development time.

In the above case, Click! can figure out whether an = is used as a comparison 
or an assignment and replace = with := when it can make that determination. 
It also changes things like X = X + 1 to X++, etc.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From bedipritpal at hotmail.com  Thu Oct  2 23:13:55 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Oct  2 23:14:02 2008
Subject: [Harbour] [SPAM]  Class TThread - Xbase++ Implementation
In-Reply-To: <20080929212428.GA28103@34-mo7-2.acn.waw.pl>
References: <19706251.post@talk.nabble.com>
	<20080929212428.GA28103@34-mo7-2.acn.waw.pl>
Message-ID: <19791430.post@talk.nabble.com>


Hello Przemek


Przemyslaw Czerpak-2 wrote:
> 
> Thank you very much, Not everything can be implemented at .prg level
> but I'll add some C functions which should allow it.
> 

Those C level functions will be sufficient to build this class.
Probably you may be willing to pack more information about a thread
than Xbase++ offers.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Class-TThread---Xbase%2B%2B-Implementation-tp19706251p19791430.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From maurilio.longo at libero.it  Fri Oct  3 02:56:14 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Oct  3 02:56:21 2008
Subject: [Harbour] changelog 9533 doesn't build on OS/2
In-Reply-To: <20081002184611.GB30587@34-mo7-2.acn.waw.pl>
References: <48E4E429.50806@libero.it>	<20081002155041.GA18777@34-mo7-2.acn.waw.pl>	<48E504F9.9090400@libero.it>
	<48E50604.7050505@libero.it>	<48E5085A.7070806@libero.it>
	<20081002184611.GB30587@34-mo7-2.acn.waw.pl>
Message-ID: <48E5C20E.3000401@libero.it>

Przemyslaw,

> so I think it will be better to not enable handle sharing for OS2.
> Now it's enabled only for *nixes where it's a must due to POSIX lock
> behavior. In the future if it's be necessary for pseudo exclusive mode
> in cloned WA then we add our own synchronization code inside filebuf.c
> At least we will be sure that it works ;-)
> 
Yes, you're right, I looked into pread/pwrite emulated code and it is not
thread safe :(

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Fri Oct  3 03:06:24 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct  3 03:06:29 2008
Subject: [Harbour] 2008-10-03 09:04 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92526$Blat.v2.6.2$8c16d9a4$a3c76f3ddae@127.0.0.1>

2008-10-03 09:04 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbole/oleauto.prg
  * contrib/hbole/ole2.c
  * contrib/hbwin/win_tole.prg
  * contrib/hbwin/win_ole.c
    * OLESHOWEXCEPTION() implemented on the .prg level, using 
      Alert() rather than MessageBox().
    ! All MessageBox()es converted to Alert()s.
    + Added OLEEXCEPTIONSOURCE(), OLEEXCEPTIONDESCRIPTION() 
      to hbole.

  * source/vm/maindllp.c
    ! Changed MessageBox() call to internal error.

  * contrib/gtwvg/gtwvg.c
  * source/rtl/gtwvt/gtwvt.c
    ! Changed MessageBox() calls to internal error.

  * contrib/gtwvg/gtwvg.c
    * Internal error calls synced with GTWVT.

  * source/rtl/hbgtcore.c
    - Removed "Internal error" text from two internal error descriptions.

  * make_vc.mak
    - Removed reference to MessageBox() from comment.

  ; NOTE: No more MessageBox() calls in Harbour.
          (except some wrappers for user .prg code)
--
Brgds,
Viktor

From maurilio.longo at libero.it  Fri Oct  3 03:09:11 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Oct  3 03:09:19 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <20081002163334.GB18777@34-mo7-2.acn.waw.pl>
References: <48E4ADE2.1070603@libero.it>	<20081002143520.GE5981@34-mo7-2.acn.waw.pl>	<48E4E3BB.3050803@libero.it>
	<20081002163334.GB18777@34-mo7-2.acn.waw.pl>
Message-ID: <48E5C517.8070504@libero.it>

Przemyslaw Czerpak wrote:
> 
> But you haven't explained why numeric value is better then pointer.
Because when you print it it is more 'natural' or easy to the eye than a
0x03938474 or something like that.

That said, you're the master here, I did not want to introduce inconsistencies
in the way threads are handled in harbour, so feel free to remove/change it as
 it best fits the overall design.

As I said I needed it just to see what happens in my modified speedtst-

> Now if I understand you need continuous number allocated for each HVM
> thread like threadID in xbase++.
> 
On OS/2 they're numerated like this, xbase++ was born on OS/2 and maybe
mutuated this numbering scheme from it.

> OK. We can introduce such numeric thread IDs.

I'd like this possibility.

> It returns pointer item you can well use to make == comparison to identify
> the thread. You can also display it by simple:
>    ? tdID

Can I print it as

? hb_threadSelf()

what is tdID? a public?


> If you want to use OS level thread ID in some C functions then using pointer
> items is also much better because the C code can validate if given parameter
> is valid HVM thread ID. It's enough to add C function like:
>    BOOL hb_threadGetOSID( PHB_ITEM pThread, HB_THREAD_T * id ) => fValid
> 

Ok.

>>> If you need continouse thread IDs registered by HVM then we can add
>>> such functionality. We can use 64bit counter so we will not have to
>>> worry about repeated values. We can also add support to return OS
>>> thread ID, f.e.: hb_threadOsId().
>>> The question is only what we need. I also suggest to use clear names.
>>> F.e.:
>>>    hb_threadVMID() -> incremented by us integer number
>>>    hb_threadOSID() -> OS thread ID which can be reused by some .c functions

As I said I just needed a way to number output and there was nothing available .


>> I needed it just to see what test the modified speedtst.prg was executing and
>> in which thread.
> 
>    ? thID, ":-)"
>

See above


>>> I expected bigger difference. I'll look at the code. maybe I'll update
>>> it to use more threads.
>> I think a lot of time is spent inside mutexes (aquiring them).
> 
> Harbour in practice does not use any of such mutexes. Only some few small
> peaces of code are covered by them and it's small chance that two threads
> will be serialized. The cost of setting/releasing mutexes is the same for
> one and two threads so it's unimportant in such test.
> It has to be sth different.
> 

I'll keep diggin though :)

>>> Because it does not have parent thread which may need to join it.
>>> It's detached for us. Just simply th_id does not mean what you thought.
>> I'm not used to 'join' threads, I see them as 'separate' entities which live
>> their life, I can wait a thread and, as such, I can also wait thread one.
> 
> It does not mean that other programmers will not want to use one of the
> most import MT programming functionality :-). When threads are executed
> to make some jobs and then you want to collect results then it's enough
> to join threads collecting its results without introducing some additional
> structures and synchronization mechanism.
> 

Ok, this is really a good thing.

Thanks a lot for the explanations.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Fri Oct  3 03:17:19 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Oct  3 03:17:26 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <19784204.post@talk.nabble.com>
References: <48E4ADE2.1070603@libero.it>	<20081002143520.GE5981@34-mo7-2.acn.waw.pl>	<48E4E3BB.3050803@libero.it>
	<19784204.post@talk.nabble.com>
Message-ID: <48E5C6FF.7020601@libero.it>

Pritpal,

Sorry, I was not clear enough, on OS/2 threads are numerated like this,
xbase++ was born on OS/2 and probably mutuated such numbering from the OS.

Best regards.

Maurilio.

Pritpal Bedi wrote:
> Maurilio
> 
> <<<<
> Because I'm used to use a thread id which is a number, this is the way it
> works on OS/2 and xbase++ on win32 and I did not find something similar in
> current code.
> 
> Perhaps you are misunderstood of Xbase++ thread implementation.
> ThreadID() function in Xbase++ always returns the numeric consecutive id
> number incremented by TThread() object. It has nothing to do with
> OS specific thread identification. To get OS specific information you 
> need to call ThreadInfo() function with required parameters, which
> again is a function equivalent of TThread() objects instance variables.
> 
> Przemek is right. When he will implement TThread() object, you will be 
> able to get both informations as you may need, perhaps even more,
> ThreadID() - as a number, ThreadOSID() as a number as PID,
> ThreadPTR() - thread as a pointer OR ThreadObject() as an object
> controlling the current thread.
> 
> Regards
> Pritpal Bedi
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Fri Oct  3 03:38:27 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct  3 03:38:30 2008
Subject: [Harbour] 2008-10-03 09:37 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9252b$Blat.v2.6.2$062f2346$ac47c742f5c@127.0.0.1>

2008-10-03 09:37 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/vm/extrap.c
    + Now using standard internal error call for Windows too.
    + Implemented //BATCH for OS/2. (please test)

  * source/rtl/errorint.c
    * Upped internal buffer.
--
Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Fri Oct  3 03:53:37 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Oct  3 03:53:46 2008
Subject: [Harbour] Increased speed in latest SVN
Message-ID: <56C8168506FC4215BF06DCC02C0DC29E@emag>

Apart from the already reported problem with FWH, I noticed a speed boost of 
about 20% using last SNV versions in a sample like this:

REQUEST DBFCDX


FUNCTION MAIN()

    LOCAL nSec

    LOCAL cCli

    RDDSETDEFAULT( "DBFCDX" )

    USE E:\EMAGFW\GESR\CORSE

    nSec = SECONDS()

    WHILE !EOF()
        cCli = FIELD -> cliente
        SKIP
    ENDDO

    ? SECONDS() - nSec

    CLOSE

    RETURN NIL

What could be the reason?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Fri Oct  3 03:56:59 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct  3 03:57:09 2008
Subject: [Harbour] nmake optimization for .prg
In-Reply-To: <20081002140953.GD5981@34-mo7-2.acn.waw.pl>
References: <6547DD43-38A4-43BB-8C9E-C1FA2B2EACA6@syenar.hu>
	<20081002140953.GD5981@34-mo7-2.acn.waw.pl>
Message-ID: <836C2B03-A282-4F1C-9CC9-5B4C10653D62@syenar.hu>

Hi Przemek,

I've tried it, and it's still no go, as now nmake
says it doesn't know how to make "obj\vc\myfirstprg.obj".
Probably because it doesn't see any myfirstprg.c,
and, also cannot see (for some reason) that myfirstprg.c
can be generated from myfirstprg.prg. Can easily be that
I'm missing something more.

Brgds,
Viktor

On 2008.10.02., at 16:09, Przemyslaw Czerpak wrote:

> On Thu, 02 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> I'm trying to optimize MSVC non-GNU make, so that it
>> compiles .prg in one batch (== one harbour.exe call by
>> .lib), just like for .c files, as opposed to the current
>> one-by-one .prg file compilation approach.
>> IOW (and if possible), I'd like to convert this rule:
>> ---
>> {$(RTL_DIR)}.prg{$(OBJ_DIR)$(OBJEXT):
>>   $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
>>   $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(OBJ_DIR)\$(*B).c
>> ---
>> to something like this:
>> ---
>> {$(OBJ_DIR)}.c{$(OBJ_DIR)}$(OBJEXT)::
>>   $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<
>>
>> {$(RTL_DIR)}.prg{$(OBJ_DIR)$(OBJEXT)::
>>   $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
>> ---
>> By swapping .prg and .c in .SUFFIXES, it even works,
>> but only if I run the make process twice.
>> Does anyone have an idea how to fix this? Marek, Paul?
>
> The problem is cause by this rule:
>   {$(RTL_DIR)}.prg{$(OBJ_DIR)$(OBJEXT)::
>      $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
>
> It wrongly informs make that
>      $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
> translates *.prg to *$(OBJEXT) files when in fact
> it translates .prg to .c. If NMAKE can use indirect rules
> then it should be enough to fix the pattern:
>   {$(RTL_DIR)}.prg{$(OBJ_DIR)}.c::
>      $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
>
> BTW also one closing '}' was missing.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From maurilio.longo at libero.it  Fri Oct  3 04:06:51 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Oct  3 04:07:07 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <20081002183352.GA30587@34-mo7-2.acn.waw.pl>
References: <48E4ADE2.1070603@libero.it>	<20081002143520.GE5981@34-mo7-2.acn.waw.pl>	<48E4E3BB.3050803@libero.it>	<20081002163334.GB18777@34-mo7-2.acn.waw.pl>
	<20081002183352.GA30587@34-mo7-2.acn.waw.pl>
Message-ID: <48E5D29B.4030808@libero.it>

Hi Przemyslaw,

Przemyslaw Czerpak wrote:
> And I've got the answer. At least on my computer it's a hardware issue.
> In -gc[0-2] mode each threads makes:
> 
>       if( ! --uiPolls )
>          hb_inkeyPoll();
> 
> in main HVM loop. Simple hack even acceptable in ST programs is killing
> the performance in ST ones. Important is not hb_inkeyPoll() call (you can
> comment it but it will not change the results) but --uiPolls.
> Each thread decrements the same memory variable and it causes some horrible
> synchronization issues between CPUs on multi CPU machines which kill the
> performance. It's a hardware issue so I do not know how big overhead it
> may cause on other machines. I'm very interesting in your results.
> Please rebuild Harbour with -DHB_GUI macro or compile speedtst.prg with
> -gc3 and compare results.
> 

I did a full rebuild of latest svn code and I've added -gc3 to my modified
speedtst.prg and here are the results.

 3 - ascan(a,{|x|x==i%ARR_LEN}) ->                        22.03
 2 - ascan(a2,c+chr(i%64+64)) ->                           3.72
============================================================
 0 - total application time:                              55.27
total real time:                                     55.27

So it decreased total time of a little less than some 10%

Best regards.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: speedtst.log
Type: application/x-log
Size: 3386 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081003/848849c3/speedtst.bin
From maurilio.longo at libero.it  Fri Oct  3 04:27:17 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Oct  3 04:27:24 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <48E5D29B.4030808@libero.it>
References: <48E4ADE2.1070603@libero.it>	<20081002143520.GE5981@34-mo7-2.acn.waw.pl>	<48E4E3BB.3050803@libero.it>	<20081002163334.GB18777@34-mo7-2.acn.waw.pl>	<20081002183352.GA30587@34-mo7-2.acn.waw.pl>
	<48E5D29B.4030808@libero.it>
Message-ID: <48E5D765.4080702@libero.it>

And I did a full comparison, here we go

MT my speedtst modified to use two threads, -gc3
   55.2

MT original speedtst, -gc3
   65.07

MT original speedtst, no gc options, so -gc0
   71.4

ST original speedtst, no gc options, so -gc0
   52.2

Maurilio.



-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From e.m.giordano at emagsoftware.it  Fri Oct  3 04:29:59 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Oct  3 04:30:08 2008
Subject: [Harbour] Sample of the problem with FWH
Message-ID: <2F08B9EE0F0E4C7EAC2BDB05F32BD3CC@emag>

This is a sample for who wants to reproduce the problem:

#include "Fivewin.ch"


ANNOUNCE HB_GTSYS

REQUEST HB_GT_GUI_DEFAULT


FUNCTION MAIN()

    LOCAL oWnd

    DEFINE WINDOW oWnd

    DEFINE BUTTONBAR OF oWnd

    DEFINE BUTTON;
           OF oWnd:oBar

    ACTIVATE WINDOW oWnd

    RETURN NIL

Just move the mouse pointer over the button.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic

From soporte at dsgsoftware.com  Fri Oct  3 04:56:22 2008
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Fri Oct  3 04:56:38 2008
Subject: [Harbour] Sample of the problem with FWH
References: <2F08B9EE0F0E4C7EAC2BDB05F32BD3CC@emag>
Message-ID: <000e01c92535$ef63cf80$6c01a8c0@PcJuanxp>

Hi Enrico,

Is your current FWH version using the function TrackMouseEvent() ?

Best regards
Juan

----- Original Message ----- 
From: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Friday, October 03, 2008 10:29 AM
Subject: [Harbour] Sample of the problem with FWH


> This is a sample for who wants to reproduce the problem:
>
> #include "Fivewin.ch"
>
>
> ANNOUNCE HB_GTSYS
>
> REQUEST HB_GT_GUI_DEFAULT
>
>
> FUNCTION MAIN()
>
>    LOCAL oWnd
>
>    DEFINE WINDOW oWnd
>
>    DEFINE BUTTONBAR OF oWnd
>
>    DEFINE BUTTON;
>           OF oWnd:oBar
>
>    ACTIVATE WINDOW oWnd
>
>    RETURN NIL
>
> Just move the mouse pointer over the button.
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
> __________ Informaci?n de ESET NOD32 Antivirus, versi?n de la base de 
> firmas de virus 3491 (20081003) __________
>
> ESET NOD32 Antivirus ha comprobado este mensaje.
> http://www.eset.com
>
> 

From e.m.giordano at emagsoftware.it  Fri Oct  3 05:15:27 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Oct  3 05:15:35 2008
Subject: [Harbour] Sample of the problem with FWH
References: <2F08B9EE0F0E4C7EAC2BDB05F32BD3CC@emag>
	<000e01c92535$ef63cf80$6c01a8c0@PcJuanxp>
Message-ID: <0A3114FE3073461698A5A3B827338B86@emag>


-----Messaggio Originale----- 
Da: "Juan G?lvez" <soporte@dsgsoftware.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: venerd? 3 ottobre 2008 10.56
Oggetto: Re: [Harbour] Sample of the problem with FWH


> Hi Enrico,
>
> Is your current FWH version using the function TrackMouseEvent() ?

Yes, it seems so. And just inside MouseMove event handler of toolbar buttons 
class. I remember a similar (or the same) problem in the past (don't 
remember if with Harbour or xHarbour though).

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From soporte at dsgsoftware.com  Fri Oct  3 05:24:02 2008
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Fri Oct  3 05:24:25 2008
Subject: [Harbour] Sample of the problem with FWH
References: <2F08B9EE0F0E4C7EAC2BDB05F32BD3CC@emag><000e01c92535$ef63cf80$6c01a8c0@PcJuanxp>
	<0A3114FE3073461698A5A3B827338B86@emag>
Message-ID: <002301c92539$d1580520$6c01a8c0@PcJuanxp>

Enrico,

I remember FWH has a dynamic link to this function and although I don't know 
the reason of the problem, I fixed it with this new implementation :

HB_FUNC( TRACKMOUSEEVENT )
{
   TRACKMOUSEEVENT tme;

   tme.cbSize = sizeof( TRACKMOUSEEVENT );
   tme.hwndTrack = ( HWND ) hb_parnl( 1 );
   tme.dwFlags = hb_parnl( 2 );
   tme.dwHoverTime = 0;

   hb_retl( TrackMouseEvent( &tme ) );
}

Best regards
Juan

----- Original Message ----- 
From: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Friday, October 03, 2008 11:15 AM
Subject: Re: [Harbour] Sample of the problem with FWH


>
> -----Messaggio Originale----- 
> Da: "Juan G?lvez" <soporte@dsgsoftware.com>
> A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
> Data invio: venerd? 3 ottobre 2008 10.56
> Oggetto: Re: [Harbour] Sample of the problem with FWH
>
>
>> Hi Enrico,
>>
>> Is your current FWH version using the function TrackMouseEvent() ?
>
> Yes, it seems so. And just inside MouseMove event handler of toolbar 
> buttons class. I remember a similar (or the same) problem in the past 
> (don't remember if with Harbour or xHarbour though).
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
> __________ Informaci?n de ESET NOD32 Antivirus, versi?n de la base de 
> firmas de virus 3491 (20081003) __________
>
> ESET NOD32 Antivirus ha comprobado este mensaje.
> http://www.eset.com
>
> 

From e.m.giordano at emagsoftware.it  Fri Oct  3 05:32:46 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Oct  3 05:32:53 2008
Subject: [Harbour] Sample of the problem with FWH
References: <2F08B9EE0F0E4C7EAC2BDB05F32BD3CC@emag><000e01c92535$ef63cf80$6c01a8c0@PcJuanxp><0A3114FE3073461698A5A3B827338B86@emag>
	<002301c92539$d1580520$6c01a8c0@PcJuanxp>
Message-ID: <5F3D69C15D7F47FF8B6154DF05EC7891@emag>


-----Messaggio Originale----- 
Da: "Juan G?lvez" <soporte@dsgsoftware.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: venerd? 3 ottobre 2008 11.24
Oggetto: Re: [Harbour] Sample of the problem with FWH


> Enrico,
>
> I remember FWH has a dynamic link to this function and although I don't 
> know the reason of the problem, I fixed it with this new implementation :
>
> HB_FUNC( TRACKMOUSEEVENT )
> {
>   TRACKMOUSEEVENT tme;
>
>   tme.cbSize = sizeof( TRACKMOUSEEVENT );
>   tme.hwndTrack = ( HWND ) hb_parnl( 1 );
>   tme.dwFlags = hb_parnl( 2 );
>   tme.dwHoverTime = 0;
>
>   hb_retl( TrackMouseEvent( &tme ) );
> }
>
> Best regards
> Juan

Thank you. I just forwarded your suggestion to Antonio.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From dmacias at mail.udg.mx  Fri Oct  3 06:17:36 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Oct  3 06:17:37 2008
Subject: [Harbour] Harbour under OS/2
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48E5F140.9030808@mail.udg.mx>

Current Harbour under OS/2 build/run with just one warning:

------------------------
../../../estack.c: In function `hb_stackFree':
../../../estack.c:343: warning: passing arg 1 of `hb_xfree' makes
pointer from integer without a cast
------------------------

As explained before, switch -O3 show very minimal differences in
performance with speedtst.prg test

David Macias


From toninhofwi at yahoo.com.br  Fri Oct  3 07:05:29 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Fri Oct  3 07:00:29 2008
Subject: [Harbour] Doubt about METHOD and MESSAGE
Message-ID: <atube4t054r9pkcdpesq4hgtldvudbfhno@4ax.com>

Hi ppl.

There are any problem to declare a METHOD name with the same name of
an internal Harbour function ?  For example:

---cut---
METHOD RecNo()

METHOD RecNo() CLASS myClass
return ( ::nArea )->( RecNo() )
---cut---

TIA and best regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From e.m.giordano at emagsoftware.it  Fri Oct  3 07:11:34 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Oct  3 07:11:42 2008
Subject: [Harbour] Sample of the problem with FWH
Message-ID: <D56A004A09B54826961D1BBFE4436889@emag>


-----Messaggio Originale----- 
Da: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: venerd? 3 ottobre 2008 11.32
Oggetto: Re: [Harbour] Sample of the problem with FWH


> Thank you. I just forwarded your suggestion to Antonio.

Antonio has already fixed the problem in FWH, thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Fri Oct  3 07:32:40 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  3 07:32:58 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <48E5D29B.4030808@libero.it>
References: <48E4ADE2.1070603@libero.it>
	<20081002143520.GE5981@34-mo7-2.acn.waw.pl>
	<48E4E3BB.3050803@libero.it>
	<20081002163334.GB18777@34-mo7-2.acn.waw.pl>
	<20081002183352.GA30587@34-mo7-2.acn.waw.pl>
	<48E5D29B.4030808@libero.it>
Message-ID: <20081003113240.GA12991@34-mo7-2.acn.waw.pl>

On Fri, 03 Oct 2008, Maurilio Longo wrote:

Hi Maurilio,

> > In -gc[0-2] mode each threads makes:
> >       if( ! --uiPolls )
> >          hb_inkeyPoll();
> > in main HVM loop. Simple hack even acceptable in ST programs is killing
> > the performance in ST ones. Important is not hb_inkeyPoll() call (you can
> > comment it but it will not change the results) but --uiPolls.
> > Each thread decrements the same memory variable and it causes some horrible
> > synchronization issues between CPUs on multi CPU machines which kill the
> > performance. It's a hardware issue so I do not know how big overhead it
> > may cause on other machines. I'm very interesting in your results.
> > Please rebuild Harbour with -DHB_GUI macro or compile speedtst.prg with
> > -gc3 and compare results.
> > 
> I did a full rebuild of latest svn code and I've added -gc3 to my modified
> speedtst.prg and here are the results.
>  3 - ascan(a,{|x|x==i%ARR_LEN}) ->                        22.03
>  2 - ascan(a2,c+chr(i%64+64)) ->                           3.72
> ============================================================
>  0 - total application time:                              55.27
> total real time:                                     55.27
> So it decreased total time of a little less than some 10%

I have different results.
With the --uiPolls the speed is reduced to single CPU.
When I eliminated it the results from modified by you speedtst.prg
where reduced nearly by half.
I had to change the size in str(hb_threadID(),2) to 11.

10/02/08 20:10:09 Harbour 1.1.0dev (Rev. 9533) (MT), Linux 2.6.25.11-0.1-pae i686 
[...]
-1223345264 - f2(a2) ->                                             0.99 
-1223345264 - ascan(a,i%ARR_LEN) ->                                 1.49 
-1214952560 - &('f1('+str(i)+')') ->                               11.96 
-1214952560 - s:=f4() ->                                            3.03 
-1214952560 - s:=f5() ->                                            2.26 
-1214952560 - ascan(a2,c+chr(i%64+64)) ->                           5.41 
-1223345264 - ascan(a,{|x|x==i%ARR_LEN}) ->                        13.29 
============================================================ 
          0 - total application time:                              57.98 
total real time:                                     29.64 


10/02/08 20:11:30 Harbour 1.1.0dev (Rev. 9533) (MT), Linux 2.6.25.11-0.1-pae i686 
[...]
-1224356976 - f2(a2) ->                                             0.56 
-1224356976 - ascan(a,i%ARR_LEN) ->                                 1.10 
-1215964272 - &('f1('+str(i)+')') ->                                8.85 
-1215964272 - s:=f4() ->                                            1.83 
-1215964272 - s:=f5() ->                                            1.34 
-1215964272 - ascan(a2,c+chr(i%64+64)) ->                           3.67 
-1224356976 - ascan(a,{|x|x==i%ARR_LEN}) ->                        10.31 
============================================================ 
          0 - total application time:                              31.95 
total real time:                                     16.51 

though they where not doubled when you compare then to MT version
executed with single thread.
Looks like this is strictly hardware oriented issue. Maybe in my
machine such situation generate exception and default handler
silently ignore it? For sure writing without protection from different
threads to the same memory location is not good idea :-)
The above tests where made with -gc3 which gives a little bit better
results then -gc2. I rebuild Harbour with HB_GUI macro to disable --uiPolls
and modified your speedtst.prg to optionally run in one thread.
Then I repeat tests with -gc2 to compare the speed difference:

ST mode
          0 - total application time:                              26.67 
              total real time:                                     26.74 

MT mode one thread:
          0 - total application time:                              31.76 
              total real time:                                     31.89 

MT mode two threads:
          0 - total application time:                              38.14 
              total real time:                                     19.64 

Anyhow this tests still uses statically divided jobs.
To make it more aggressive I rewrote speedtst.prg so now it can
be executed in many threads. I'm attaching it.
When you run mt version of speedtst.prg with parameter then each
test loop will be executed in separated thread. It cause really heavy
overhead and it's also quite good MT stress test.
I'm attaching this code. Please try. I'll replace tests/speedtst.prg
with this test ASAP.
I also adopted this code for xHarbour and wanted to run it to compare
results but in practice it's impossible.
It GPFs, corrupt memory, hangups or make other strange things in real
multi CPU machine but never finished correctly. Maybe someone can run
it with single CPU computer.

Here are results (all tests compiled with -gc2 and Harbour compiled
without -DHB_GUI)

ST mode:
   10/03/08 13:14:01 Linux 2.6.25.11-0.1-pae i686
   Harbour 1.1.0dev (Rev. 9535)
   GNU C 4.3.1 (32 bit)
   [...]
   [ total application time: ]....................................28.79
   [ total real time: ]...........................................28.83

MT mode one thread:
   10/03/08 13:14:35 Linux 2.6.25.11-0.1-pae i686
   Harbour 1.1.0dev (Rev. 9535) (MT)
   [...]
   [ total application time: ]....................................34.87
   [ total real time: ]...........................................34.89


MT mode many threads threads:
   10/03/08 13:15:16 Linux 2.6.25.11-0.1-pae i686
   Harbour 1.1.0dev (Rev. 9535) (MT)
   [...]
   [ total application time: ]....................................44.50
   [ total real time: ]...........................................15.53

I have three CPU machine and the final real time when test is divided
into many threads is ~ 2.25 times smaller then executed by single
threads. Such results are more acceptable because in the most heavy
tests new complex items inspected by GC are created and destroyed
what needs some serialization in registering them. This, cost of the
task switching and some differences in each test time (the total result
is reduced to the cost of most expensive test which is finished on single
CPU when other are not used -  it's not harbour problem at all but it
makes total results worse then possible) does not allow to reach linear
performance improvement (3.00) but IMHO gives reasonable for me performance
and scalability. I'm interesting in results from other machines.

best regards,
Przemek
-------------- next part --------------
#define N_TESTS 51
#define N_LOOPS 1000000
#define ARR_LEN 16

#ifndef EOL
    #define EOL hb_OSNewLine()
#endif
#command ? => outstd(EOL)
#command ? <xx,...> => outstd(EOL);outstd(<xx>)


#xcommand _( [<cmds,...>] ) => [<cmds>]

#xcommand TEST <testfunc>           ;
          [ WITH <locals,...> ]     ;
          [ INIT <init> ]           ;
          [ EXIT <exit> ]           ;
          [ INFO <info> ]           ;
          CODE [<*testExp*>] =>     ;
   func <testfunc>                  ;;
      local time, i, x := nil       ;;
      [ local <locals> ; ]          ;;
      [ <init> ; ]                  ;;
      time := secondscpu()          ;;
      for i:=1 to N_LOOPS           ;;
         <testExp>                  ;;
      next                          ;;
      time := secondscpu() - time   ;;
      [ <exit> ; ]                  ;;
   return { iif( <.info.>, <(info)>, #<testExp> ), time }

static S_C, S_N, S_D

#ifdef __XHARBOUR__
   /* do not expect that this code will work with xHarbour.
    * xHarbour has many race conditions which are exploited quite fast
    * on real multi CPU machines so it crashes in different places :-(
    * probably this code should be forwared to xHarbour developers as
    * some type of MT test
    */
   static s_aResults[ N_TESTS + 1 ]
   #xtranslate hb_mtvm()                  => hb_multiThread()

   /* I used function wrappers to simulate thread join which can
    * return thread results
    */
   static function do_test( cFunc )
      local x
      ? "starting: " + cFunc + "()"
      // if you set .f. then tests will be skipped but you can check
      // if this test code is executed because it greatly reduces
      // the race conditions inside xHarbour HVM
      if .t.
         x := &cFunc()
      else
         x := { "skipped test " + cFunc, val( substr( cFunc, 2 ) ) + 0.99 }
      endif
      s_aResults[ val( substr( cFunc, 2 ) ) ] := x
   return nil

   function hb_threadStart( cFunc )
   return StartThread( @do_test(), cFunc )

   function hb_threadJoin( thId, xResult )
      static s_n := 0
      local lOK
      /* in xHarbour there is race condition in JoinThread() which
       * fails if thread end before we call it so we cannot use it :-(
       */
      //lOK := JoinThread( thId )
      lOK := .t.
      if s_n == 0
         WaitForThreads()
      endif
      xResult := s_aResults[ ++s_n ]
   return lOK
#endif


TEST t000 INFO "empty loop overhead" CODE

TEST t001 WITH L_C:=dtos(date()) CODE x := L_C

TEST t002 WITH L_N:=112345.67    CODE x := L_N

TEST t003 WITH L_D:=date()       CODE x := L_D

TEST t004 INIT S_C:=dtos(date()) CODE x := S_C

TEST t005 INIT S_N:=112345.67    CODE x := S_N

TEST t006 INIT S_D:=date()       CODE x := S_D

TEST t007 INIT _( memvar M_C ) INIT _( private M_C:=dtos(date()) ) ;
          CODE x := M_C

TEST t008 INIT _( memvar M_N ) INIT _( private M_N:=112345.67 ) ;
          CODE x := M_N

TEST t009 INIT _( memvar M_D ) INIT _( private M_D:=date() ) ;
          CODE x := M_D

TEST t010 INIT _( memvar P_C ) INIT _( public P_C:=dtos(date()) ) ;
          CODE x := P_C

TEST t011 INIT _( memvar P_N ) INIT _( public P_N:=112345.67 ) ;
          CODE x := P_N

TEST t012 INIT _( memvar P_D ) INIT _( public P_D:=date() ) ;
          CODE x := P_D

TEST t013 INIT _( field F_C ) INIT use_dbsh() EXIT close_db() ;
          CODE x := F_C

TEST t014 INIT _( field F_N ) INIT use_dbsh() EXIT close_db() ;
          CODE x := F_N

TEST t015 INIT _( field F_D ) INIT use_dbsh() EXIT close_db() ;
          CODE x := F_D

TEST t016 WITH o := errorNew() CODE x := o:GenCode

TEST t017 WITH o := errorNew() CODE x := o[8]

TEST t018 CODE round( i / 1000, 2 )

TEST t019 CODE str( i / 1000 )

TEST t020 WITH s := stuff( dtos( date() ), 7, 0, "." ) CODE val( s )

TEST t021 WITH a := afill( array( ARR_LEN ), ;
                           stuff( dtos( date() ), 7, 0, "." ) ) ;
          CODE val( a [ i % ARR_LEN + 1 ] )

TEST t022 WITH d := date() CODE dtos( d - i % 10000 )

TEST t023 CODE eval( { || i % ARR_LEN } )

TEST t024 WITH bc := { || i % ARR_LEN } ;
          INFO eval( bc := { || i % ARR_LEN } ) ;
          CODE eval( bc )

TEST t025 CODE eval( { |x| x % ARR_LEN }, i )

TEST t026 WITH bc := { |x| x % ARR_LEN } ;
          INFO eval( bc := { |x| x % ARR_LEN }, i ) ;
          CODE eval( bc, i )

TEST t027 CODE eval( { |x| f1( x ) }, i )

TEST t028 WITH bc := { |x| f1( x ) } ;
          INFO eval( bc := { |x| f1( x ) }, i ) ;
          CODE eval( bc, i )

TEST t029 CODE x := &( "f1(" + str(i) + ")" )

TEST t030 WITH bc CODE bc := &( "{|x|f1(x)}" ); eval( bc, i )

TEST t031 CODE x := valtype( x ) +  valtype( i )

TEST t032 WITH a := afill( array( ARR_LEN ), ;
                           stuff( dtos( date() ), 7, 0, "." ) ) ;
          CODE x := strzero( i % 100, 2 ) $ a[ i % ARR_LEN + 1 ]

TEST t033 WITH a := array( ARR_LEN ), s := dtos( date() ) ;
          INIT aeval( a, { |x,i| a[i] := left( s + s, i ) } ) ;
          CODE x := a[ i % ARR_LEN + 1 ] == s

TEST t034 WITH a := array( ARR_LEN ), s := dtos( date() ) ;
          INIT aeval( a, { |x,i| a[i] := left( s + s, i ) } ) ;
          CODE x := a[ i % ARR_LEN + 1 ] = s

TEST t035 WITH a := array( ARR_LEN ), s := dtos( date() ) ;
          INIT aeval( a, { |x,i| a[i] := left( s + s, i ) } ) ;
          CODE x := a[ i % ARR_LEN + 1 ] >= s

TEST t036 WITH a := array( ARR_LEN ), s := dtos( date() ) ;
          INIT aeval( a, { |x,i| a[i] := left( s + s, i ) } ) ;
          CODE x := a[ i % ARR_LEN + 1 ] <= s

TEST t037 WITH a := array( ARR_LEN ), s := dtos( date() ) ;
          INIT aeval( a, { |x,i| a[i] := left( s + s, i ) } ) ;
          CODE x := a[ i % ARR_LEN + 1 ] < s

TEST t038 WITH a := array( ARR_LEN ), s := dtos( date() ) ;
          INIT aeval( a, { |x,i| a[i] := left( s + s, i ) } ) ;
          CODE x := a[ i % ARR_LEN + 1 ] > s

TEST t039 WITH a := array( ARR_LEN ) ;
          INIT aeval( a, { |x,i| a[i] := i } ) ;
          CODE ascan( a, i % ARR_LEN )

TEST t040 WITH a := array( ARR_LEN ) ;
          INIT aeval( a, { |x,i| a[i] := i } ) ;
          CODE ascan( a, { |x| x == i % ARR_LEN } )

TEST t041 WITH a := {}, a2 := { 1, 2, 3 }, bc := { |x| f1(x) }, ;
               s := dtos( date() ), s2 := "static text" ;
     CODE if i%4000==0;a:={};end; aadd(a,{i,1,.t.,s,s2,a2,bc})

TEST t042 CODE f0()

TEST t043 CODE f1( i )

TEST t044 WITH c := dtos( date() ) ;
          INFO f2( c[1...8] ) ;
          CODE f2( c )

TEST t045 WITH c := repl( dtos( date() ), 5000 ) ;
          INFO f2( c[1...40000] ) ;
          CODE f2( c )

TEST t046 WITH c := repl( dtos( date() ), 5000 ) ;
          INFO f2( @c[1...40000] ) ;
          CODE f2( c )

TEST t047 WITH c := repl( dtos( date() ),5000 ), c2 ;
          INFO "f2( @c[1...40000] ), c2 := c" ;
          CODE f2( @c ); c2 := c

TEST t048 WITH a := {}, a2 := { 1, 2, 3 }, bc := { |x| f1(x) }, ;
               s := dtos( date() ), s2 := "static text", n := 1.23 ;
     CODE f3( a, a2, s, i, s2, bc, i, n, x )

TEST t049 WITH a := { 1, 2, 3 } CODE f2( a )

TEST t050 CODE x := f4()

TEST t051 CODE x := f5()


proc main(mt)
local nLoopOverHead, nTimes, nSeconds, x, i, aThreads:={}

create_db()

#ifdef __HARBOUR__
#include "hbmemory.ch"
if MEMORY( HB_MEM_USEDMAX ) != 0
   ? "Warning !!! Memory statistic enabled."
   ?
endif
#endif

? "Startup loop to increase CPU clock..."
x := seconds() + 5; while x > seconds(); enddo

? date(), time(), os()
? version() + iif( hb_mtvm(), " (MT)", "" )
? hb_compiler()
? "N_LOOPS =", N_LOOPS

x :=t000()
? dsp_result( x, 0 )
nLoopOverHead := x[2]

? replicate("=",68)

nSeconds := seconds()
nTimes := secondsCPU()

if !empty(mt) .and. hb_mtvm()
   aThreads := array( N_TESTS )
   for i:=1 to N_TESTS
      aThreads[ i ] := hb_threadStart( "t" + strzero( i, 3 ) )
   next
   for i:=1 to N_TESTS
      if hb_threadJoin( aThreads[ i ], @x )
         ? dsp_result( x, nLoopOverHead )
      endif
   next
else
   for i:=1 to N_TESTS
      ? dsp_result( &( "t" + strzero( i, 3 ) )(), nLoopOverHead )
   next
endif

nTimes := secondsCPU() - nTimes
nSeconds := seconds() - nSeconds

? replicate("=",68)
? dsp_result( { "total application time:", nTimes }, 0)
? dsp_result( { "total real time:", nSeconds }, 0 )
?

remove_db()
return


function f0()
return nil

function f1(x)
return x

function f2(x)
return nil

function f3(a,b,c,d,e,f,g,h,i)
return nil

function f4()
return space(4000)

function f5()
return space(5)


static func dsp_result( aResult, nLoopOverHead )
   return padr( "[ " + left( aResult[1], 56 ) + " ]", 60, "." ) + ;
          strtran( str( max( aResult[2] - nLoopOverHead, 0 ), 8, 2 ), " ", "." )


#define TMP_FILE "_tst_tmp.dbf"
static proc create_db()
   remove_db()
   dbcreate( TMP_FILE, { {"F_C", "C", 10, 0},;
                         {"F_N", "N", 10, 2},;
                         {"F_D", "D",  8, 0} } )
   use TMP_FILE exclusive
   dbappend()
   replace F_C with dtos(date())
   replace F_N with 112345.67
   replace F_D with date()
   close
return

static proc remove_db()
   ferase( TMP_FILE )
return

static proc close_db()
   close
return

static proc use_dbsh()
   use TMP_FILE shared
return
From druzus at acn.waw.pl  Fri Oct  3 07:35:43 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  3 07:36:00 2008
Subject: [Harbour] Increased speed in latest SVN
In-Reply-To: <56C8168506FC4215BF06DCC02C0DC29E@emag>
References: <56C8168506FC4215BF06DCC02C0DC29E@emag>
Message-ID: <20081003113543.GB12991@34-mo7-2.acn.waw.pl>

On Fri, 03 Oct 2008, Enrico Maria Giordano wrote:

Hi Enrico,

> Apart from the already reported problem with FWH, I noticed a speed boost 
> of about 20% using last SNV versions in a sample like this:
> REQUEST DBFCDX
> FUNCTION MAIN()
>    LOCAL nSec
>    LOCAL cCli
>    RDDSETDEFAULT( "DBFCDX" )
>    USE E:\EMAGFW\GESR\CORSE
>    nSec = SECONDS()
>    WHILE !EOF()
>        cCli = FIELD -> cliente
>        SKIP
>    ENDDO
>    ? SECONDS() - nSec
>    CLOSE
>    RETURN NIL
> What could be the reason?

Side effect of MT modifications. On some platforms one system call was
eliminated to avoid race condition and it increased the performance also
in ST mode. I expected that sth like that can happen but haven't time
to make tests. Thanks for confirmation.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct  3 07:38:11 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  3 07:38:26 2008
Subject: [Harbour] Sample of the problem with FWH
In-Reply-To: <2F08B9EE0F0E4C7EAC2BDB05F32BD3CC@emag>
References: <2F08B9EE0F0E4C7EAC2BDB05F32BD3CC@emag>
Message-ID: <20081003113811.GC12991@34-mo7-2.acn.waw.pl>

On Fri, 03 Oct 2008, Enrico Maria Giordano wrote:

Hi Enrico,

> This is a sample for who wants to reproduce the problem:
> #include "Fivewin.ch"
> ANNOUNCE HB_GTSYS
> REQUEST HB_GT_GUI_DEFAULT
> FUNCTION MAIN()
>    LOCAL oWnd
>    DEFINE WINDOW oWnd
>    DEFINE BUTTONBAR OF oWnd
>    DEFINE BUTTON;
>           OF oWnd:oBar
>    ACTIVATE WINDOW oWnd
>    RETURN NIL
> Just move the mouse pointer over the button.

It does not look like Harbour problem though it's possible that
some modifications in Harbour exploited the problem in FWH.
Anyhow we are not able to help in this case because we do not know
where is GPFs and why. It's not our code.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct  3 07:51:04 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  3 07:51:21 2008
Subject: [Harbour] 2008-10-03 13:50 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081003115104.GA12633@34-mo7-2.acn.waw.pl>

2008-10-03 13:50 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/estack.c
    * pacified OS2 warning

best regards
Przemek
From toninhofwi at yahoo.com.br  Fri Oct  3 08:21:01 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Fri Oct  3 08:16:04 2008
Subject: [Harbour] Sample of the problem with FWH
In-Reply-To: <20081003113811.GC12991@34-mo7-2.acn.waw.pl>
References: <2F08B9EE0F0E4C7EAC2BDB05F32BD3CC@emag>
	<20081003113811.GC12991@34-mo7-2.acn.waw.pl>
Message-ID: <je3ce452c0k2ceid29in54a11a4iu642oq@4ax.com>

>It does not look like Harbour problem though it's possible that
>some modifications in Harbour exploited the problem in FWH.

I confirm this issue. FWH MAPI for example is GPFing if you use it
with attached files.

I?d reported this problem to Antonio too.

Regards,

Toninho.

__________________________________________________
Fa?a liga??es para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From mbelgrano at deltain.it  Fri Oct  3 08:50:30 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Oct  3 08:50:42 2008
Subject: R: [Harbour] HBDOC & documentation
In-Reply-To: <BLU149-W19710A528A1D6F9437D58985400@phx.gbl>
References: <BLU149-W19710A528A1D6F9437D58985400@phx.gbl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F02C@SRV02.deltain.net>

Alejandro

Why you Haven't update harbour cvs?

 

Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Alejandro de Garate
Inviato: marted? 30 settembre 2008 0.37
A: harbour@harbour-project.org
Oggetto: [Harbour] HBDOC & documentation

 

Viktor, all
 
I am unable to syncronize with SVN
 
I did several changes to hbdoc.prg and genhtm.prg and will do many more. Can you hold down from doing changes ?
 
Viktor, If you agree I will send it to you the files changed and
all the htm files from .\doc and .\doc\en in a few days to upload
to SVN
 
regards
Alejandro

________________________________

Invite your mail contacts to join your friends list with Windows Live Spaces. It's easy! Try it! <http://spaces.live.com/spacesapi.aspx?wx_action=create&wx_url=/friends.aspx&mkt=en-us> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081003/ad032e8c/attachment.html
From mbelgrano at deltain.it  Fri Oct  3 09:11:54 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Oct  3 09:12:02 2008
Subject: [Harbour] BRMAKE is released as open source
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F02D@SRV02.deltain.net>

BRMAKE creates an executable program from a multi-archive project, using?Harbour,?xHarbour?and?MiniGUI.LIB or other libs. ?In a project with multiple?.PRG?files,?BRMAKE?will compile only those files modified after the last compilation. speeding up the executable creation process.?
Now seem that be release as open source

Imo this is good for hbmake replacement

Project File Example
 
GUI=Y
EXEFILE       MYPROJET.EXE
FILE           Prog1.Prg , Prog2.Prg , Prog3.prg, Prog4.Prg
FILE           Prog5.Prg , Prog6.Prg , ...
LIB            VLLIB.LIB, MYLIB.LIB
RESOURCE  projresource.RC
OBJ              OBJEXT.OBJ, MYOBJ.OBJ
REQUEST    ADS, ZIP


----- Original Message ----- 
From: Marcos Antonio Gambeta 
To: brmake@yahoogrupos.com.br 
Sent: Friday, October 03, 2008 8:52 AM
Subject: [brmake] BrMake ser? c?digo livre

Ol? para todos,

Humberto e eu decidimos tornar o BrMake
um projeto de c?digo aberto. A licen?a
ser? GPL.

Com esta mudan?a na licen?a, esperamos
manter a ferramenta atualizada com o
apoio dos usu?rios.

O c?digo est? sendo revisado e estar?
dispon?vel em breve.

Aguardem mais informa??es.

Atenciosamente,
Marcos Antonio Gambeta

From e.m.giordano at emagsoftware.it  Fri Oct  3 09:28:21 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Oct  3 09:28:31 2008
Subject: [Harbour] Increased speed in latest SVN
References: <56C8168506FC4215BF06DCC02C0DC29E@emag>
	<20081003113543.GB12991@34-mo7-2.acn.waw.pl>
Message-ID: <92AC264599384182A4F17CC5F77936DB@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: venerd? 3 ottobre 2008 13.35
Oggetto: Re: [Harbour] Increased speed in latest SVN


> Side effect of MT modifications. On some platforms one system call was
> eliminated to avoid race condition and it increased the performance also
> in ST mode. I expected that sth like that can happen but haven't time
> to make tests. Thanks for confirmation.

Great!

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From jfl at mafact.com  Fri Oct  3 09:32:31 2008
From: jfl at mafact.com (J. Lefebvre)
Date: Fri Oct  3 09:32:32 2008
Subject: [Harbour] Doubt about METHOD and MESSAGE
In-Reply-To: <atube4t054r9pkcdpesq4hgtldvudbfhno@4ax.com>
Message-ID: <5741a27e.1c8f56d.1325dbf.4de4@mafact.com>

Hi Toninho,

No problem at all, compiler will create a function combined from your method name and your class name, so no conflict.

Regards,

JF 

-----Message d'origine-----
De?: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] De la part de Toninho@fwi
Envoy??: vendredi 3 octobre 2008 13:05
??: harbour@harbour-project.org
Objet?: [Harbour] Doubt about METHOD and MESSAGE

Hi ppl.

There are any problem to declare a METHOD name with the same name of
an internal Harbour function ?  For example:

---cut---
METHOD RecNo()

METHOD RecNo() CLASS myClass
return ( ::nArea )->( RecNo() )
---cut---

TIA and best regards,

Toninho.

__________________________________________________
Fa?a liga??es para outros computadores com o novo Yahoo! Messenger
http://br.beta.messenger.yahoo.com/
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From toninhofwi at yahoo.com.br  Fri Oct  3 09:52:55 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Fri Oct  3 09:46:20 2008
Subject: [Harbour] Doubt about METHOD and MESSAGE
In-Reply-To: <5741a27e.1c8f56d.1325dbf.4de4@mafact.com>
References: <atube4t054r9pkcdpesq4hgtldvudbfhno@4ax.com>
	<5741a27e.1c8f56d.1325dbf.4de4@mafact.com>
Message-ID: <ks8ce41rsqh329up5npiueehb6msev971d@4ax.com>

>Hi Toninho,
>
>No problem at all, compiler will create a function combined from your method name and your class name, so no conflict.
>
>Regards,

Thanks for your information,

Best regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From rportnoff at spendmap.com  Fri Oct  3 09:57:32 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Fri Oct  3 09:56:49 2008
Subject: [Harbour] Why hbsix.lib?
In-Reply-To: <ks8ce41rsqh329up5npiueehb6msev971d@4ax.com>
References: <atube4t054r9pkcdpesq4hgtldvudbfhno@4ax.com>
	<5741a27e.1c8f56d.1325dbf.4de4@mafact.com>
	<ks8ce41rsqh329up5npiueehb6msev971d@4ax.com>
Message-ID: <B0084025152@ms1.3peaks.com>

Hi all,

Why do I need to include hbsix.lib when I link in rddcdx.lib?

TIA.

Regards,
Randy.


From rportnoff at spendmap.com  Fri Oct  3 09:58:13 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Fri Oct  3 09:57:09 2008
Subject: [Harbour] v1.0.2
Message-ID: <B0084025153@ms1.3peaks.com>

Hi all,

Is there going to be a v1.0.2 for the stable build?

Regards,
Randy.


From e.m.giordano at emagsoftware.it  Fri Oct  3 10:23:13 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Oct  3 10:23:24 2008
Subject: [Harbour] Sample of the problem with FWH
References: <2F08B9EE0F0E4C7EAC2BDB05F32BD3CC@emag>
	<20081003113811.GC12991@34-mo7-2.acn.waw.pl>
Message-ID: <D2F78EE1B5D648B880207F6587991DB6@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: venerd? 3 ottobre 2008 13.38
Oggetto: Re: [Harbour] Sample of the problem with FWH


> It does not look like Harbour problem though it's possible that
> some modifications in Harbour exploited the problem in FWH.
> Anyhow we are not able to help in this case because we do not know
> where is GPFs and why. It's not our code.

Antonio has already found and fixed the problem in FWH.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From maurilio.longo at libero.it  Fri Oct  3 10:50:05 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Oct  3 10:50:17 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <20081003113240.GA12991@34-mo7-2.acn.waw.pl>
References: <48E4ADE2.1070603@libero.it>	<20081002143520.GE5981@34-mo7-2.acn.waw.pl>	<48E4E3BB.3050803@libero.it>	<20081002163334.GB18777@34-mo7-2.acn.waw.pl>	<20081002183352.GA30587@34-mo7-2.acn.waw.pl>	<48E5D29B.4030808@libero.it>
	<20081003113240.GA12991@34-mo7-2.acn.waw.pl>
Message-ID: <48E6311D.9010102@libero.it>

Przemyslaw,

I was going to try new speedtst, but even if it builds ok, it does not start,
there is no error, no exception, no output.

It simply exits.

Any idea?

Maurilio.

Przemyslaw Czerpak wrote:
> On Fri, 03 Oct 2008, Maurilio Longo wrote:
> 
> Hi Maurilio,
> 
>>> In -gc[0-2] mode each threads makes:
>>>       if( ! --uiPolls )
>>>          hb_inkeyPoll();
>>> in main HVM loop. Simple hack even acceptable in ST programs is killing
>>> the performance in ST ones. Important is not hb_inkeyPoll() call (you can
>>> comment it but it will not change the results) but --uiPolls.
>>> Each thread decrements the same memory variable and it causes some horrible
>>> synchronization issues between CPUs on multi CPU machines which kill the
>>> performance. It's a hardware issue so I do not know how big overhead it
>>> may cause on other machines. I'm very interesting in your results.
>>> Please rebuild Harbour with -DHB_GUI macro or compile speedtst.prg with
>>> -gc3 and compare results.
>>>
>> I did a full rebuild of latest svn code and I've added -gc3 to my modified
>> speedtst.prg and here are the results.
>>  3 - ascan(a,{|x|x==i%ARR_LEN}) ->                        22.03
>>  2 - ascan(a2,c+chr(i%64+64)) ->                           3.72
>> ============================================================
>>  0 - total application time:                              55.27
>> total real time:                                     55.27
>> So it decreased total time of a little less than some 10%
> 
> I have different results.
> With the --uiPolls the speed is reduced to single CPU.
> When I eliminated it the results from modified by you speedtst.prg
> where reduced nearly by half.
> I had to change the size in str(hb_threadID(),2) to 11.
> 
> 10/02/08 20:10:09 Harbour 1.1.0dev (Rev. 9533) (MT), Linux 2.6.25.11-0.1-pae i686 
> [...]
> -1223345264 - f2(a2) ->                                             0.99 
> -1223345264 - ascan(a,i%ARR_LEN) ->                                 1.49 
> -1214952560 - &('f1('+str(i)+')') ->                               11.96 
> -1214952560 - s:=f4() ->                                            3.03 
> -1214952560 - s:=f5() ->                                            2.26 
> -1214952560 - ascan(a2,c+chr(i%64+64)) ->                           5.41 
> -1223345264 - ascan(a,{|x|x==i%ARR_LEN}) ->                        13.29 
> ============================================================ 
>           0 - total application time:                              57.98 
> total real time:                                     29.64 
> 
> 
> 10/02/08 20:11:30 Harbour 1.1.0dev (Rev. 9533) (MT), Linux 2.6.25.11-0.1-pae i686 
> [...]
> -1224356976 - f2(a2) ->                                             0.56 
> -1224356976 - ascan(a,i%ARR_LEN) ->                                 1.10 
> -1215964272 - &('f1('+str(i)+')') ->                                8.85 
> -1215964272 - s:=f4() ->                                            1.83 
> -1215964272 - s:=f5() ->                                            1.34 
> -1215964272 - ascan(a2,c+chr(i%64+64)) ->                           3.67 
> -1224356976 - ascan(a,{|x|x==i%ARR_LEN}) ->                        10.31 
> ============================================================ 
>           0 - total application time:                              31.95 
> total real time:                                     16.51 
> 
> though they where not doubled when you compare then to MT version
> executed with single thread.
> Looks like this is strictly hardware oriented issue. Maybe in my
> machine such situation generate exception and default handler
> silently ignore it? For sure writing without protection from different
> threads to the same memory location is not good idea :-)
> The above tests where made with -gc3 which gives a little bit better
> results then -gc2. I rebuild Harbour with HB_GUI macro to disable --uiPolls
> and modified your speedtst.prg to optionally run in one thread.
> Then I repeat tests with -gc2 to compare the speed difference:
> 
> ST mode
>           0 - total application time:                              26.67 
>               total real time:                                     26.74 
> 
> MT mode one thread:
>           0 - total application time:                              31.76 
>               total real time:                                     31.89 
> 
> MT mode two threads:
>           0 - total application time:                              38.14 
>               total real time:                                     19.64 
> 
> Anyhow this tests still uses statically divided jobs.
> To make it more aggressive I rewrote speedtst.prg so now it can
> be executed in many threads. I'm attaching it.
> When you run mt version of speedtst.prg with parameter then each
> test loop will be executed in separated thread. It cause really heavy
> overhead and it's also quite good MT stress test.
> I'm attaching this code. Please try. I'll replace tests/speedtst.prg
> with this test ASAP.
> I also adopted this code for xHarbour and wanted to run it to compare
> results but in practice it's impossible.
> It GPFs, corrupt memory, hangups or make other strange things in real
> multi CPU machine but never finished correctly. Maybe someone can run
> it with single CPU computer.
> 
> Here are results (all tests compiled with -gc2 and Harbour compiled
> without -DHB_GUI)
> 
> ST mode:
>    10/03/08 13:14:01 Linux 2.6.25.11-0.1-pae i686
>    Harbour 1.1.0dev (Rev. 9535)
>    GNU C 4.3.1 (32 bit)
>    [...]
>    [ total application time: ]....................................28.79
>    [ total real time: ]...........................................28.83
> 
> MT mode one thread:
>    10/03/08 13:14:35 Linux 2.6.25.11-0.1-pae i686
>    Harbour 1.1.0dev (Rev. 9535) (MT)
>    [...]
>    [ total application time: ]....................................34.87
>    [ total real time: ]...........................................34.89
> 
> 
> MT mode many threads threads:
>    10/03/08 13:15:16 Linux 2.6.25.11-0.1-pae i686
>    Harbour 1.1.0dev (Rev. 9535) (MT)
>    [...]
>    [ total application time: ]....................................44.50
>    [ total real time: ]...........................................15.53
> 
> I have three CPU machine and the final real time when test is divided
> into many threads is ~ 2.25 times smaller then executed by single
> threads. Such results are more acceptable because in the most heavy
> tests new complex items inspected by GC are created and destroyed
> what needs some serialization in registering them. This, cost of the
> task switching and some differences in each test time (the total result
> is reduced to the cost of most expensive test which is finished on single
> CPU when other are not used -  it's not harbour problem at all but it
> makes total results worse then possible) does not allow to reach linear
> performance improvement (3.00) but IMHO gives reasonable for me performance
> and scalability. I'm interesting in results from other machines.
> 
> best regards,
> Przemek
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Fri Oct  3 11:08:09 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Oct  3 11:08:20 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <48E6311D.9010102@libero.it>
References: <48E4ADE2.1070603@libero.it>	<20081002143520.GE5981@34-mo7-2.acn.waw.pl>	<48E4E3BB.3050803@libero.it>	<20081002163334.GB18777@34-mo7-2.acn.waw.pl>	<20081002183352.GA30587@34-mo7-2.acn.waw.pl>	<48E5D29B.4030808@libero.it>	<20081003113240.GA12991@34-mo7-2.acn.waw.pl>
	<48E6311D.9010102@libero.it>
Message-ID: <48E63559.8020704@libero.it>

Ok,

found it, I had to move main() as first procedure in file.

Maurilio.


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From druzus at acn.waw.pl  Fri Oct  3 11:09:27 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  3 11:09:44 2008
Subject: [Harbour] nmake optimization for .prg
In-Reply-To: <836C2B03-A282-4F1C-9CC9-5B4C10653D62@syenar.hu>
References: <6547DD43-38A4-43BB-8C9E-C1FA2B2EACA6@syenar.hu>
	<20081002140953.GD5981@34-mo7-2.acn.waw.pl>
	<836C2B03-A282-4F1C-9CC9-5B4C10653D62@syenar.hu>
Message-ID: <20081003150927.GA18850@34-mo7-2.acn.waw.pl>

On Fri, 03 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I've tried it, and it's still no go, as now nmake
> says it doesn't know how to make "obj\vc\myfirstprg.obj".
> Probably because it doesn't see any myfirstprg.c,
> and, also cannot see (for some reason) that myfirstprg.c
> can be generated from myfirstprg.prg. Can easily be that
> I'm missing something more.

I do not know MSVC NMAKE but if it supports indirect rules
like GNU make then it should be able to build it.

   {$(OBJ_DIR)}.c{$(OBJ_DIR)}$(OBJEXT)::
      $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $<

   {$(RTL_DIR)}.prg{$(OBJ_DIR)}.c::
      $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<

These two rules seems to be enough for files located in RTL though
I suggest to check what '::' means for NMAKE. Maybe you should use
single ':' because '::' means direct rule.

Of course each rule like:

   {$(RTL_DIR)}.prg{$(OBJ_DIR)}.c::
      $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<

should be repeated for other directories.
Maybe NMAKE can also support multiple directories in such pattern, f.e.:

   {$(RTL_DIR),$(PP_DIR)}.prg{$(OBJ_DIR)}.c::
      $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<

or some type of wildcards.

best regards,
Przemek
From maurilio.longo at libero.it  Fri Oct  3 11:21:46 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Oct  3 11:21:58 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <48E63559.8020704@libero.it>
References: <48E4ADE2.1070603@libero.it>	<20081002143520.GE5981@34-mo7-2.acn.waw.pl>	<48E4E3BB.3050803@libero.it>	<20081002163334.GB18777@34-mo7-2.acn.waw.pl>	<20081002183352.GA30587@34-mo7-2.acn.waw.pl>	<48E5D29B.4030808@libero.it>	<20081003113240.GA12991@34-mo7-2.acn.waw.pl>	<48E6311D.9010102@libero.it>
	<48E63559.8020704@libero.it>
Message-ID: <48E6388A.8020202@libero.it>

And the winner is.... :)

they're slower than before. a lot!

I attach two files, speedtst.log which is built with -gc3 and hbvmmt and
speedtstmt.log which is built with the same options but started with a
parameter so that it runs with several threads.

Best regards.

Maurilio Longo wrote:
> Ok,
> 
> found it, I had to move main() as first procedure in file.
> 
> Maurilio.
> 
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: speedtst.log
Type: application/x-log
Size: 4072 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081003/27daca8a/speedtst-0001.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: speedtstmt.log
Type: application/x-log
Size: 4072 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081003/27daca8a/speedtstmt-0001.bin
From druzus at acn.waw.pl  Fri Oct  3 12:23:48 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  3 12:24:06 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <48E6388A.8020202@libero.it>
References: <48E4ADE2.1070603@libero.it>
	<20081002143520.GE5981@34-mo7-2.acn.waw.pl>
	<48E4E3BB.3050803@libero.it>
	<20081002163334.GB18777@34-mo7-2.acn.waw.pl>
	<20081002183352.GA30587@34-mo7-2.acn.waw.pl>
	<48E5D29B.4030808@libero.it>
	<20081003113240.GA12991@34-mo7-2.acn.waw.pl>
	<48E6311D.9010102@libero.it> <48E63559.8020704@libero.it>
	<48E6388A.8020202@libero.it>
Message-ID: <20081003162348.GA15016@34-mo7-2.acn.waw.pl>

On Fri, 03 Oct 2008, Maurilio Longo wrote:
> And the winner is.... :)
> they're slower than before. a lot!
> I attach two files, speedtst.log which is built with -gc3 and hbvmmt and
> speedtstmt.log which is built with the same options but started with a
> parameter so that it runs with several threads.

The results are much worse then in my Linux box.
It can be caused be few reasons:
1. the cost of task switching is probably much higher in OS2 then
   in Linux because it has to reload memory descriptors for each
   thread - it's forced by TLS format.
2. The cost of simultaneous memory allocation very high. Here other
   MM should help.
3. The overhead caused by freezing thread in critical section is very high.
   In all tests there are only two Harbour mutexes which are used (I do not
   count thread start/stop synchronization because this code is called only
   ones):
      1-st inside hb_dynsymFind() which is used by these tests:
         [ x := &( "f1(" + str(i) + ")" ) ].............................50.81
         [ bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]....................142.90
      2-nd inside garbage.c used to add/remove each new GC block to linked
           list. It's used by tests which allocates/deallocates new GC items 
           in each loop:
         [ eval( { || i % 16 } ) ].....................................138.32
         [ eval( { |x| x % 16 }, i ) ].................................140.12
         [ eval( { |x| f1( x ) }, i ) ]................................138.03
         [ bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]....................142.90
         [ ascan( a, { |x| x == i % 16 } ) ]...........................133.02
         [ if i%4000==0;a:={};end; aadd(a,{i,1,.T.,s,s2,a2,bc}) ]......131.08
   This are the most expensive tests and please look at the difference for
   the same tests but when existing codeblocks are reused.
   Codeblock create in each loop and then evaluated:
      [ eval( { || i % 16 } ) ].....................................138.32
   Codeblock create in outside the loop and evaluated:
      [ eval( bc := { || i % 16 } ) ].................................1.02
   I'll add also test for creating and coping empty array to easier see this
   overhead.
   The code covered by critical section inside garbage.c is minimal:
         HB_GC_LOCK
         hb_gc[Un]Link( &s_pCurrBlock, pAlloc );
         HB_GC_UNLOCK
   and hb_gc[Un]Link() is very simple and short, f.e. hb_gcLink() look:

         static void hb_gcLink( HB_GARBAGE_PTR *pList, HB_GARBAGE_PTR pAlloc )
         {
            if( *pList )
            {
               pAlloc->pNext = *pList;
               pAlloc->pPrev = (*pList)->pPrev;
               pAlloc->pPrev->pNext = pAlloc;
               (*pList)->pPrev = pAlloc;
            }
            else
               *pList = pAlloc->pNext = pAlloc->pPrev = pAlloc;
         }
   It's only few machine instructions.
   This suggests that the whole overhead is caused by very huge cost
   of critical sections in OS2. Because it's such simple and short code
   which should be executed extremely fast then we can try to use our own
   spinlocks instead of OS level semaphores which seems to be not efficient
   enough. The code covered by critical section is probably less then 1%
   of whole code executed in LOOP but kills the performance in OS2. It's
   probably caused by series of two locks (MM probably also has its own
   critical section) which exploits some bad synchronization behavior in
   OS2 or just simply mutexes are such expensive in this system.
   If you are interested then I can implement small ASM inline function
   for OS2 GCC builds and we can compare the results.

To Windows users:
I'm very interested in MS-Windows results from real multi CPU machine.
Does anyone have such computer and can test it?
It's necessary to move main() function to the beginning of the code.
I'll replace current speedtst.prg in SVN with this one in a while.
It seems to be much better to tests different MT aspects, gives much
more valuable results and also the code is much easier to update.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Fri Oct  3 12:45:14 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Oct  3 12:45:24 2008
Subject: [Harbour] hb_threadID()
References: <48E4ADE2.1070603@libero.it><20081002143520.GE5981@34-mo7-2.acn.waw.pl><48E4E3BB.3050803@libero.it><20081002163334.GB18777@34-mo7-2.acn.waw.pl><20081002183352.GA30587@34-mo7-2.acn.waw.pl><48E5D29B.4030808@libero.it><20081003113240.GA12991@34-mo7-2.acn.waw.pl><48E6311D.9010102@libero.it>
	<48E63559.8020704@libero.it><48E6388A.8020202@libero.it>
	<20081003162348.GA15016@34-mo7-2.acn.waw.pl>
Message-ID: <8553BC1D987645D0865029E1E8D77729@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: venerd? 3 ottobre 2008 18.23
Oggetto: Re: [Harbour] hb_threadID()


> To Windows users:
> I'm very interested in MS-Windows results from real multi CPU machine.
> Does anyone have such computer and can test it?

Yes, I have an Intel Core 2 CPU 6320. Can you briefly summarize the steps 
required to compile an MT program?

> It's necessary to move main() function to the beginning of the code.
> I'll replace current speedtst.prg in SVN with this one in a while.

And while you're at it:

Harbour 1.1.0dev (Rev. 9539)
Copyright (c) 1999-2008, http://www.harbour-project.org/
SPEEDTST.prg(63) Error E0003  Duplicate variable declaration 'M_C'
SPEEDTST.prg(507) Warning W0003  Variable 'X' declared but not used in 
function 'F0(504)'
SPEEDTST.prg(513) Warning W0003  Variable 'S' declared but not used in 
function 'F2(510)'
SPEEDTST.prg(516) Warning W0003  Variable 'A' declared but not used in 
function 'F3(513)'
SPEEDTST.prg(516) Warning W0003  Variable 'B' declared but not used in 
function 'F3(513)'
SPEEDTST.prg(516) Warning W0003  Variable 'C' declared but not used in 
function 'F3(513)'
SPEEDTST.prg(516) Warning W0003  Variable 'D' declared but not used in 
function 'F3(513)'
SPEEDTST.prg(516) Warning W0003  Variable 'E' declared but not used in 
function 'F3(513)'
SPEEDTST.prg(516) Warning W0003  Variable 'F' declared but not used in 
function 'F3(513)'
SPEEDTST.prg(516) Warning W0003  Variable 'G' declared but not used in 
function 'F3(513)'
SPEEDTST.prg(516) Warning W0003  Variable 'H' declared but not used in 
function 'F3(513)'
SPEEDTST.prg(516) Warning W0003  Variable 'I' declared but not used in 
function 'F3(513)'
SPEEDTST.prg(540) Warning W0028  Unreachable code
1 error

No code generated

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From maurilio.longo at libero.it  Fri Oct  3 13:11:01 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Oct  3 13:11:10 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <20081003162348.GA15016@34-mo7-2.acn.waw.pl>
References: <48E4ADE2.1070603@libero.it>	<20081002143520.GE5981@34-mo7-2.acn.waw.pl>	<48E4E3BB.3050803@libero.it>	<20081002163334.GB18777@34-mo7-2.acn.waw.pl>	<20081002183352.GA30587@34-mo7-2.acn.waw.pl>	<48E5D29B.4030808@libero.it>	<20081003113240.GA12991@34-mo7-2.acn.waw.pl>	<48E6311D.9010102@libero.it>
	<48E63559.8020704@libero.it>	<48E6388A.8020202@libero.it>
	<20081003162348.GA15016@34-mo7-2.acn.waw.pl>
Message-ID: <48E65225.20707@libero.it>

Przemyslaw Czerpak wrote:
> The results are much worse then in my Linux box.
> It can be caused be few reasons:
> 1. the cost of task switching is probably much higher in OS2 then
>    in Linux because it has to reload memory descriptors for each
>    thread - it's forced by TLS format.
I don't know

> 2. The cost of simultaneous memory allocation very high. Here other
>    MM should help.
It could be, I'm not sure of the quality of GCC runtime on OS/2

> 3. The overhead caused by freezing thread in critical section is very high.
You're using mutexes for critical sections, in OS/2 there is a
DosEnterCritSection() call which stops task switching until after a
DosExitCritSection() is called.

BUT you must not call other APIs while inside a critical section, otherwise a
deadlock may occur.

Now, if you don't call other functions inside critical sections (even C
runtime ones) we could try to use them to see if speed changes.

>    In all tests there are only two Harbour mutexes which are used (I do not
>    count thread start/stop synchronization because this code is called only
>    ones):
>       1-st inside hb_dynsymFind() which is used by these tests:
>          [ x := &( "f1(" + str(i) + ")" ) ].............................50.81
>          [ bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]....................142.90
>       2-nd inside garbage.c used to add/remove each new GC block to linked
>            list. It's used by tests which allocates/deallocates new GC items 
>            in each loop:

Here if allocation occurs it could deadlock if using DosEnterCritSection()

>    This are the most expensive tests and please look at the difference for
>    the same tests but when existing codeblocks are reused.
>    Codeblock create in each loop and then evaluated:
>       [ eval( { || i % 16 } ) ].....................................138.32
>    Codeblock create in outside the loop and evaluated:
>       [ eval( bc := { || i % 16 } ) ].................................1.02

Terrific!

>    I'll add also test for creating and coping empty array to easier see this
>    overhead.
>    The code covered by critical section inside garbage.c is minimal:
>          HB_GC_LOCK
>          hb_gc[Un]Link( &s_pCurrBlock, pAlloc );
>          HB_GC_UNLOCK
>    and hb_gc[Un]Link() is very simple and short, f.e. hb_gcLink() look:
> 
>          static void hb_gcLink( HB_GARBAGE_PTR *pList, HB_GARBAGE_PTR pAlloc )
>          {
>             if( *pList )
>             {
>                pAlloc->pNext = *pList;
>                pAlloc->pPrev = (*pList)->pPrev;
>                pAlloc->pPrev->pNext = pAlloc;
>                (*pList)->pPrev = pAlloc;
>             }
>             else
>                *pList = pAlloc->pNext = pAlloc->pPrev = pAlloc;
>          }
>    It's only few machine instructions.

This could work with DosEnterCritSection() since it is not calling other APIs.

>    This suggests that the whole overhead is caused by very huge cost
>    of critical sections in OS2. Because it's such simple and short code
>    which should be executed extremely fast then we can try to use our own
>    spinlocks instead of OS level semaphores which seems to be not efficient
>    enough. The code covered by critical section is probably less then 1%
>    of whole code executed in LOOP but kills the performance in OS2. 

The only fear is that OS/2 critical sections could not scale well on real
multi-cpus

>    It's
>    probably caused by series of two locks (MM probably also has its own
>    critical section) which exploits some bad synchronization behavior in
>    OS2 or just simply mutexes are such expensive in this system.

I think the second answer could be the one.

>    If you are interested then I can implement small ASM inline function
>    for OS2 GCC builds and we can compare the results.
> 
It could be an interesting thing if you don't care wasting some time to
speedup OS/2 :) (you're nearly becoming an OS/2 user, after all :D) but I
won't be able to do more test before next monday morning.

Plese see this link, which deals with mutexes on OS/2 SMP kernels and uses
faster mutexes to scale better.

http://www.edm2.com/0507/smp.html

Thanks a lot.

Maurilio.

PS.

Disables thread switching for the current process.

#define INCL_DOSPROCESS
#include <os2.h>

APIRET    ulrc;  /*  Return Code. */

ulrc = DosEnterCritSec();

ulrc (APIRET) - returns
Return Code.

DosEnterCritSec returns one of the following values:

0 NO_ERROR
309 ERROR_INVALID_THREADID
484 ERROR_CRITSEC_OVERFLOW

For a full list of error codes, see Errors.

DosEnterCritSec causes all other threads in the process to block themselves
and give up their time slice. After a DosEnterCritSec request is made, no
functions should be called that depend on another thread to do processing
until DosExitCritSec has completed. Great care should be taken when using
compiler runtime functions and other OS/2 functions after a DosEnterCritSec
request has been made, since the underlying processing of the called function
may require processing by another thread and thus cause a deadlock.

A thread can also execute code without having to give up time slices to other
threads in its process if it requests a priority class that is higher than
those of the other threads. A thread's priority is examined with
DosGetInfoBlocks, and changed with DosSetPriority.

A count is maintained of the number of times DosEnterCritSec is issued without
a corresponding DosExitCritSec. The count is incremented by DosEnterCritSec
and decremented by DosExitCritSec. Normal thread dispatching is not restored
until the count is zero. The outstanding DosEnterCritSec count is maintained
in a word. If an overflow occurs, the count is set to the maximum value, no
operation is performed, and the request returns with ERROR_CRITSEC_OVERFLOW.

If a signal occurs, thread 1 begins execution to process the signal even
though another thread in the process has a DosEnterCritSec active. Thread 1 of
a process is its initial thread of execution, not a thread created with
DosCreateThread. Any processing done by thread 1 to satisfy the signal must
not include accessing the critical resource intended to be protected by
DosEnterCritSec.

Note: This function is very powerful and must be used with caution! It should
be used only in a most cooperative environment where the state of all threads
in known. While in the critical section, do not call other compiler runtime or
OS/2 functions that could start another thread that it would depend on running
before being able to return.


DosQueryThreadContext can be used to obtain the context of other threads in
the process once they have been blocked by DosEnterCritSec.

ERROR_INVALID_THREADID is returned when an invalid attempt is made to enter a
critical section of code in a signal handler or exception handler.

ERROR_INVALID_THREADID is also returned when a dynamic link library (DLL)
routine incorrectly issues DosEnterCritSec.

This example shows how a thread enters and exits a critical section of code.

 #define INCL_DOSPROCESS      /* Process values */
 #define INCL_DOSERRORS       /* Error values */
 #include <os2.h>
 #include <stdio.h>

 int main(VOID)
   {
   APIRET  rc = NO_ERROR;    /* Return code */

    rc = DosEnterCritSec();

    if (rc != NO_ERROR) {
        printf("DosEnterCritSec error: return code = %u\n",rc);
        return 1;
    }
      /***********************************************/
      /* Add critical section code here.  While this */
      /* code is running, all other threads are      */
      /* stopped.  CALL NO LIBRARY OR OS/2 FUNCTIONS */
      /* HERE UNLESS YOU KNOW THEY DO NOT REQUIRE    */
      /* ACTION BY ANOTHER THREAD IN THE PROCESS.    */
      /***********************************************/

    rc =  DosExitCritSec();

    if (rc != NO_ERROR) {
        printf("DosExitCritSec error: return code = %u\n",rc);
        return 1;
    }

    return NO_ERROR;
    }




-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From druzus at acn.waw.pl  Fri Oct  3 14:20:44 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  3 14:21:00 2008
Subject: [Harbour] 2008-10-03 20:20 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081003182044.GA26622@34-mo7-2.acn.waw.pl>

2008-10-03 20:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/garbage.c
    * Use spinlock instead of mutex in OS2 builds - performance test.

best regards
Przemek
From druzus at acn.waw.pl  Fri Oct  3 14:36:54 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  3 14:37:10 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <48E65225.20707@libero.it>
References: <48E4E3BB.3050803@libero.it>
	<20081002163334.GB18777@34-mo7-2.acn.waw.pl>
	<20081002183352.GA30587@34-mo7-2.acn.waw.pl>
	<48E5D29B.4030808@libero.it>
	<20081003113240.GA12991@34-mo7-2.acn.waw.pl>
	<48E6311D.9010102@libero.it> <48E63559.8020704@libero.it>
	<48E6388A.8020202@libero.it>
	<20081003162348.GA15016@34-mo7-2.acn.waw.pl>
	<48E65225.20707@libero.it>
Message-ID: <20081003183654.GA26566@34-mo7-2.acn.waw.pl>

On Fri, 03 Oct 2008, Maurilio Longo wrote:

Hi Maurilio,

> You're using mutexes for critical sections, in OS/2 there is a
> DosEnterCritSection() call which stops task switching until after a
> DosExitCritSection() is called.

This is only terminology problem. In OS2 API CRITICAL SECTION means
peace of code executed when all other threads are suspended.
We do not need such exclusive and restrict CPU access. For us critical
section means peace of code which cannot be accessed by other threads
when one enter into it.
Using DosEnterCritSection() in OS2 is probably much more expensive then
mutexes (though it will be funny if for critical section they use some
tricks) and for sure it's will be killer for total application and OS
performance in multi CPU machine.

> The only fear is that OS/2 critical sections could not scale well on real
> multi-cpus

If it does what is described then for sure it will reduce overall
performance.
Anyhow if you have a while you can to use it in garbage.c and compare
results. It's enough to make:

   #define HB_GC_LOCK   DosEnterCritSec();
   #define HB_GC_UNLOCK DosExitCritSec();

> It could be an interesting thing if you don't care wasting some time to
> speedup OS/2 :) (you're nearly becoming an OS/2 user, after all :D) but I
> won't be able to do more test before next monday morning.

I've just committed it. It's enabled by default in OS2 builds.
Please test when you will find some time. I'm very interested in results.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct  3 15:53:50 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  3 15:54:05 2008
Subject: [Harbour] 2008-10-03 21:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081003195350.GA808@34-mo7-2.acn.waw.pl>

2008-10-03 21:53 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  - harbour/tests/speedtst.prg
  + harbour/tests/speedold.prg
    * renamed old speed test - I left it because some other xbase compiler
      cannot compiple the new one due to not Clipper compatible PP

  + harbour/tests/speedtst.prg
    * added new speed test which can also measure mutlithread performance.
      When linked with MT HVM version then it can be executed with optional
      parameter which causes that each test loop is executed by separate
      thread. Please make such tests on different platforms.

best regards
Przemek
From druzus at acn.waw.pl  Fri Oct  3 15:54:13 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  3 15:54:30 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <8553BC1D987645D0865029E1E8D77729@emag>
References: <20081003162348.GA15016@34-mo7-2.acn.waw.pl>
	<8553BC1D987645D0865029E1E8D77729@emag>
Message-ID: <20081003195413.GA20545@34-mo7-2.acn.waw.pl>

On Fri, 03 Oct 2008, Enrico Maria Giordano wrote:

Hi Enrico,

>> To Windows users:
>> I'm very interested in MS-Windows results from real multi CPU machine.
>> Does anyone have such computer and can test it?
> Yes, I have an Intel Core 2 CPU 6320. Can you briefly summarize the steps 
> required to compile an MT program?

Nothing special. Build Harbour without any additional MT/ST switches.
You should have two HVM libraries. HVM.LIB and HVMMT.LIB
If you want to use threads then link your application with HVMMT
library instead of HVM. You are using BCC which also have separated
CRTL libraries for MT and ST mode so you will have to also link your
program with cw32mt.lib.

The final application created from speedtst.prg in MT mode can be
executed with optional parameter. If you use them then it will run
all tests in separated threads.

> And while you're at it:
> Harbour 1.1.0dev (Rev. 9539)
> Copyright (c) 1999-2008, http://www.harbour-project.org/
> SPEEDTST.prg(63) Error E0003  Duplicate variable declaration 'M_C'
> SPEEDTST.prg(507) Warning W0003  Variable 'X' declared but not used in 
> function 'F0(504)'
> SPEEDTST.prg(513) Warning W0003  Variable 'S' declared but not used in 
> function 'F2(510)'

I've just committed modified version.
Please try.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Oct  3 15:57:32 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct  3 15:57:43 2008
Subject: [Harbour] v1.0.2
In-Reply-To: <B0084025153@ms1.3peaks.com>
References: <B0084025153@ms1.3peaks.com>
Message-ID: <DCA375F7-4D02-4F44-AC92-7B3747CC6355@syenar.hu>

Hi Randy,

There may be one. So far only just a few (exactly 4) fixes
were marked to be merged there, so I think we should
wait until some more comes, and/or we should decide which
selected trunk _features_ we may want to merge there
(like dlmalloc.c), and whether these are safe enough.

Also, we should take a close eye on 1.1, since maybe
it'd be better to invest efforts to do a stable 1.1 release
as early as possible.

Input and opinions are welcome from everyone.

Brgds,
Viktor

On 2008.10.03., at 15:58, Randy Portnoff wrote:

> Hi all,
>
> Is there going to be a v1.0.2 for the stable build?
>
> Regards,
> Randy.
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Oct  3 16:36:29 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct  3 16:36:41 2008
Subject: [Harbour] 2008-10-03 21:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081003195350.GA808@34-mo7-2.acn.waw.pl>
References: <20081003195350.GA808@34-mo7-2.acn.waw.pl>
Message-ID: <A843B074-9BA9-4E83-8FD2-A487E1D4F026@syenar.hu>

Hi Przemek,

P4 2.66/800 HT, XP, MSVS2008 -gc3:

Startup loop to increase CPU clock...
10/03/08 22:23:07 Windows XP 5.1.2600 Service Pack 3
Harbour 1.1.0dev (Rev. 9539) (MT) Microsoft Visual C 15.0.26569 (32 bit)
N_LOOPS =    1000000
                                                                           speedtst
                                                                 - 
gc0    -gc3    -gc0    -gc3
                                                                                   MT 
       MT
--------------------------------------------------------------------------------------------
[ empty loop overhead ]......................................... 
0.13 ...0.03 ...0.09 ...0.06
====================================================================  
======= ======= =======
[ x := L_C ].................................................... 
0.20 ...0.13 ..29.09 ...5.27
[ x := L_N ].................................................... 
0.05 ...0.05 ..11.69 ...1.53
[ x := L_D ].................................................... 
0.02 ...0.03 ..16.94 ...3.92
[ x := S_C ].................................................... 
0.17 ...0.14 ..27.41 ...5.06
[ x := S_N ].................................................... 
0.06 ...0.03 ..26.14 ...3.95
[ x := S_D ].................................................... 
0.05 ...0.00 ..23.11 ...4.23
[ x := M_C ].................................................... 
0.20 ...0.11 ..24.00 ...6.58
[ x := M_N ].................................................... 
0.00 ...0.13 ..19.19 ...6.88
[ x := M_D ].................................................... 
0.06 ...0.05 ..23.89 ...4.41
[ x := P_C ].................................................... 
0.22 ...0.13 ..35.14 ..12.75
[ x := P_N ].................................................... 
0.03 ...0.08 ..36.55 ...4.50
[ x := P_D ].................................................... 
0.06 ...0.02 ..23.91 ...5.83
[ x := F_C ].................................................... 
0.77 ...0.39 ..55.25 ..41.00
[ x := F_N ].................................................... 
0.55 ...0.30 ..47.52 ..23.03
[ x := F_D ].................................................... 
0.23 ...0.08 ..24.73 ...7.06
[ x := o:GenCode ].............................................. 
0.53 ...0.16 ..38.81 ..19.94
[ x := 0 ]...................................................... 
0.02 ...0.06 ..20.70 ...1.67
[ round( i / 1000, 2 ) ]........................................ 
0.64 ...0.47 ..43.63 ..23.92
[ str( i / 1000 ) ]............................................. 
1.61 ...1.27 ..81.23 ..53.89
[ val( s ) ].................................................... 
0.80 ...0.78 ..39.22 ..28.03
[ val( a [ i % 16 + 1 ] ) ]..................................... 
1.53 ...1.39 ..55.86 ..32.16
[ dtos( d - i % 10000 ) ]....................................... 
1.56 ...1.14 ..93.64 ..60.39
[ eval( { || i % 16 } ) ]....................................... 
2.53 ...2.06 .104.80 ..77.70
[ eval( bc := { || i % 16 } ) ]................................. 
0.83 ...0.83 ..53.44 ..14.50
[ eval( { |x| x % 16 }, i ) ]................................... 
1.73 ...1.42 ..99.72 ..62.42
[ eval( bc := { |x| x % 16 }, i ) ]............................. 
0.88 ...0.78 ..46.69 ..12.03
[ eval( { |x| f1( x ) }, i ) ].................................. 
1.81 ...1.63 .102.41 ..58.31
[ eval( bc := { |x| f1( x ) }, i ) ]............................ 
0.45 ...0.80 ..56.55 ..11.64
[ x := &( "f1(" + str(i) + ")" ) ].............................. 
3.81 ...9.55 .149.52 .112.41
[ bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]......................9.13 .. 
12.36 .150.80 .116.25
[ x := valtype( x ) +  valtype( i ) ]........................... 
1.00 ...0.94 ..88.27 ..56.63
[ x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ]................ 
1.59 ...1.58 ..95.48 ..69.97
[ x := a[ i % 16 + 1 ] == s ]................................... 
0.70 ...0.73 ..46.44 ..24.19
[ x := a[ i % 16 + 1 ] = s ].................................... 
0.73 ...0.70 ..56.73 ..27.17
[ x := a[ i % 16 + 1 ] >= s ]................................... 
0.83 ...0.88 ..52.41 ..27.44
[ x := a[ i % 16 + 1 ] <= s ]................................... 
0.94 ...0.84 ..53.38 ..26.97
[ x := a[ i % 16 + 1 ] < s ].................................... 
0.73 ...0.92 ..54.41 ..27.22
[ x := a[ i % 16 + 1 ] > s ].................................... 
0.78 ...0.70 ..54.78 ..27.38
[ ascan( a, i % 16 ) ].......................................... 
0.50 ...0.72 ..48.84 ..25.19
[ ascan( a, { |x| x == i % 16 } ) ]............................. 
6.92 ...6.58 .119.34 ..82.98
[ if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2,a2,bc}) ]........ 
3.09 ...2.92 .126.52 ..89.03
[ x := a ]...................................................... 
0.14 ...0.17 ..28.50 ..13.97
[ x := {} ]..................................................... 
0.77 ...0.55 ..90.13 ..62.22
[ f0() ]........................................................ 
0.09 ...0.11 ..29.58 ..13.09
[ f1( i ) ]..................................................... 
0.14 ...0.13 ..45.97 ..13.61
[ f2( c[1...8] ) ].............................................. 
0.31 ...0.28 ..44.81 ..18.41
[ f2( c[1...40000] ) ].......................................... 
0.28 ...0.23 ..28.41 ..17.34
[ f2( @c[1...40000] ) ]......................................... 
0.27 ...0.22 ..44.02 ..19.08
[ f2( @c[1...40000] ), c2 := c ]................................ 
0.27 ...0.23 ..41.41 ..16.81
[ f3( a, a2, s, i, s2, bc, i, n, x ) ].......................... 
0.95 ...0.89 ..45.78 ..25.56
[ f2( a ) ]..................................................... 
0.38 ...0.33 ..45.08 ..14.23
[ x := f4() ]................................................... 
1.61 ...1.28 ..94.91 ..58.11
[ x := f5() ]................................................... 
0.70 ...0.55 ..96.70 ..49.44
====================================================================  
======= ======= =======
[ total application time: ]....................................61.00 .. 
60.50 .154.64 .123.61
[ total real time: ]...........................................57.73 .. 
51.34 ..78.61 ..63.39

Brgds,
Viktor

On 2008.10.03., at 21:53, Przemyslaw Czerpak wrote:

> 2008-10-03 21:53 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  - harbour/tests/speedtst.prg
>  + harbour/tests/speedold.prg
>    * renamed old speed test - I left it because some other xbase  
> compiler
>      cannot compiple the new one due to not Clipper compatible PP
>
>  + harbour/tests/speedtst.prg
>    * added new speed test which can also measure mutlithread  
> performance.
>      When linked with MT HVM version then it can be executed with  
> optional
>      parameter which causes that each test loop is executed by  
> separate
>      thread. Please make such tests on different platforms.
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Oct  3 16:38:13 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct  3 16:38:25 2008
Subject: [Harbour] 2008-10-03 21:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081003195350.GA808@34-mo7-2.acn.waw.pl>
References: <20081003195350.GA808@34-mo7-2.acn.waw.pl>
Message-ID: <ABA2DC77-5008-4239-9BBE-92C488B05E8B@syenar.hu>

Hi Przemek,

[resent to avoid line wrapping]

P4 2.66/800 HT, XP, MSVS2008 -gc3:

Startup loop to increase CPU clock...
10/03/08 22:23:07 Windows XP 5.1.2600 Service Pack 3
Harbour 1.1.0dev (Rev. 9539) (MT) Microsoft Visual C 15.0.26569 (32 bit)
N_LOOPS =    1000000

                                                      speedtst
                                            -gc0    -gc3    -gc0    -gc3
                                                              MT      MT
-----------------------------------------------------------------------
[ empty loop overhead ]....................0.13 ...0.03 ...0.09 ...0.06
=============================================== ======= ======= =======
[ x := L_C ]...............................0.20 ...0.13 ..29.09 ...5.27
[ x := L_N ]...............................0.05 ...0.05 ..11.69 ...1.53
[ x := L_D ]...............................0.02 ...0.03 ..16.94 ...3.92
[ x := S_C ]...............................0.17 ...0.14 ..27.41 ...5.06
[ x := S_N ]...............................0.06 ...0.03 ..26.14 ...3.95
[ x := S_D ]...............................0.05 ...0.00 ..23.11 ...4.23
[ x := M_C ]...............................0.20 ...0.11 ..24.00 ...6.58
[ x := M_N ]...............................0.00 ...0.13 ..19.19 ...6.88
[ x := M_D ]...............................0.06 ...0.05 ..23.89 ...4.41
[ x := P_C ]...............................0.22 ...0.13 ..35.14 ..12.75
[ x := P_N ]...............................0.03 ...0.08 ..36.55 ...4.50
[ x := P_D ]...............................0.06 ...0.02 ..23.91 ...5.83
[ x := F_C ]...............................0.77 ...0.39 ..55.25 ..41.00
[ x := F_N ]...............................0.55 ...0.30 ..47.52 ..23.03
[ x := F_D ]...............................0.23 ...0.08 ..24.73 ...7.06
[ x := o:GenCode ].........................0.53 ...0.16 ..38.81 ..19.94
[ x := 0 ].................................0.02 ...0.06 ..20.70 ...1.67
[ round( i / 1000, 2 ) ]...................0.64 ...0.47 ..43.63 ..23.92
[ str( i / 1000 ) ]........................1.61 ...1.27 ..81.23 ..53.89
[ val( s ) ]...............................0.80 ...0.78 ..39.22 ..28.03
[ val( a [ i % 16 + 1 ] ) ]................1.53 ...1.39 ..55.86 ..32.16
[ dtos( d - i % 10000 ) ]..................1.56 ...1.14 ..93.64 ..60.39
[ eval( { || i % 16 } ) ]..................2.53 ...2.06 .104.80 ..77.70
[ eval( bc := { || i % 16 } ) ]............0.83 ...0.83 ..53.44 ..14.50
[ eval( { |x| x % 16 }, i ) ]..............1.73 ...1.42 ..99.72 ..62.42
[ eval( bc := { |x| x % 16 }, i ) ]........0.88 ...0.78 ..46.69 ..12.03
[ eval( { |x| f1( x ) }, i ) ].............1.81 ...1.63 .102.41 ..58.31
[ eval( bc := { |x| f1( x ) }, i ) ].......0.45 ...0.80 ..56.55 ..11.64
[ x := &( "f1(" + str(i) + ")" ) ].........3.81 ...9.55 .149.52 .112.41
[ bc := &( "{|x|f1(x)}" ); eval( bc, i ) ..9.13 ..12.36 .150.80 .116.25
[ x := valtype( x ) +  valtype( i ) ]......1.00 ...0.94 ..88.27 ..56.63
[ x := strzero( i % 100, 2 ) $ a[ i % 16 ..1.59 ...1.58 ..95.48 ..69.97
[ x := a[ i % 16 + 1 ] == s ]..............0.70 ...0.73 ..46.44 ..24.19
[ x := a[ i % 16 + 1 ] = s ]...............0.73 ...0.70 ..56.73 ..27.17
[ x := a[ i % 16 + 1 ] >= s ]..............0.83 ...0.88 ..52.41 ..27.44
[ x := a[ i % 16 + 1 ] <= s ]..............0.94 ...0.84 ..53.38 ..26.97
[ x := a[ i % 16 + 1 ] < s ]...............0.73 ...0.92 ..54.41 ..27.22
[ x := a[ i % 16 + 1 ] > s ]...............0.78 ...0.70 ..54.78 ..27.38
[ ascan( a, i % 16 ) ].....................0.50 ...0.72 ..48.84 ..25.19
[ ascan( a, { |x| x == i % 16 } ) ]........6.92 ...6.58 .119.34 ..82.98
[ if i%1000==0;a:={};end; aadd(a,{i,1,.T...3.09 ...2.92 .126.52 ..89.03
[ x := a ].................................0.14 ...0.17 ..28.50 ..13.97
[ x := {} ]................................0.77 ...0.55 ..90.13 ..62.22
[ f0() ]...................................0.09 ...0.11 ..29.58 ..13.09
[ f1( i ) ]................................0.14 ...0.13 ..45.97 ..13.61
[ f2( c[1...8] ) ].........................0.31 ...0.28 ..44.81 ..18.41
[ f2( c[1...40000] ) ].....................0.28 ...0.23 ..28.41 ..17.34
[ f2( @c[1...40000] ) ]....................0.27 ...0.22 ..44.02 ..19.08
[ f2( @c[1...40000] ), c2 := c ]...........0.27 ...0.23 ..41.41 ..16.81
[ f3( a, a2, s, i, s2, bc, i, n, x ) ].....0.95 ...0.89 ..45.78 ..25.56
[ f2( a ) ]................................0.38 ...0.33 ..45.08 ..14.23
[ x := f4() ]..............................1.61 ...1.28 ..94.91 ..58.11
[ x := f5() ]..............................0.70 ...0.55 ..96.70 ..49.44
=============================================== ======= ======= =======
[ total application time: ]...............61.00 ..60.50 .154.64 .123.61
[ total real time: ]......................57.73 ..51.34 ..78.61 ..63.39

Brgds,
Viktor

On 2008.10.03., at 21:53, Przemyslaw Czerpak wrote:

> 2008-10-03 21:53 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> - harbour/tests/speedtst.prg
> + harbour/tests/speedold.prg
>   * renamed old speed test - I left it because some other xbase  
> compiler
>     cannot compiple the new one due to not Clipper compatible PP
>
> + harbour/tests/speedtst.prg
>   * added new speed test which can also measure mutlithread  
> performance.
>     When linked with MT HVM version then it can be executed with  
> optional
>     parameter which causes that each test loop is executed by separate
>     thread. Please make such tests on different platforms.
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From info at fsgiudice.com  Fri Oct  3 17:18:52 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri Oct  3 17:19:03 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <20081003162348.GA15016@34-mo7-2.acn.waw.pl>
References: <48E4ADE2.1070603@libero.it>	<20081002143520.GE5981@34-mo7-2.acn.waw.pl>	<48E4E3BB.3050803@libero.it>	<20081002163334.GB18777@34-mo7-2.acn.waw.pl>	<20081002183352.GA30587@34-mo7-2.acn.waw.pl>	<48E5D29B.4030808@libero.it>	<20081003113240.GA12991@34-mo7-2.acn.waw.pl>	<48E6311D.9010102@libero.it>
	<48E63559.8020704@libero.it>	<48E6388A.8020202@libero.it>
	<20081003162348.GA15016@34-mo7-2.acn.waw.pl>
Message-ID: <48E68C3C.60901@fsgiudice.com>

Hi Przemek,


Przemyslaw Czerpak ha scritto:
> To Windows users:
> I'm very interested in MS-Windows results from real multi CPU machine.
> Does anyone have such computer and can test it?

Here my test:

Intel(R) Core(TM)2 Duo CPU T8300 @ 2.40GHz
L2 Cache Size: 3072 Kb, Bus: 200 Mhz
4 GB RAM, Vista Ultimate 32bit

Standard Build:
set C_USR=-DHB_FM_STATISTICS_OFF
set HB_BUILD_ST=

Harbour Terminal: Windows native console
Harbour 1.1.0dev (Rev. 9542)
Windows Vista 6.0.6001 Service Pack 1
DS avail=1736532KB  OS avail=2063740KB  EMM avail=0KB  MemStat:Off

Startup loop to increase CPU clock...
10/03/08 22:59:09 Windows Vista 6.0.6001 Service Pack 1
Harbour 1.1.0dev (Rev. 9542) (MT) Borland C++ 5.5.1 (32 bit)
N_LOOPS =    1000000                                   ST    MT  MT+
[ empty loop overhead ]..............................0.08..0.08..0.09
=====================================================================
[ x := L_C ].........................................0.09..0.12..8.94
[ x := L_N ].........................................0.09..0.09..3.78
[ x := L_D ].........................................0.09..0.11..6.47
[ x := S_C ].........................................0.12..0.16..5.76
[ x := S_N ].........................................0.08..0.12..7.63
[ x := S_D ].........................................0.09..0.11..4.12
[ x := M_C ].........................................0.09..0.17..8.81
[ x := M_N ].........................................0.11..0.14..5.63
[ x := M_D ].........................................0.09..0.14..8.81
[ x := P_C ].........................................0.12..0.17..7.35
[ x := P_N ].........................................0.09..0.11..8.63
[ x := P_D ].........................................0.09..0.14..6.91
[ x := F_C ].........................................0.17..0.30.24.29
[ x := F_N ].........................................0.22..0.25..8.80
[ x := F_D ].........................................0.12..0.16..8.78
[ x := o:GenCode ]...................................0.20..0.31.11.75
[ x := 0 ]...........................................0.05..0.09..5.57
[ round( i / 1000, 2 ) ].............................0.28..0.33.13.99
[ str( i / 1000 ) ]..................................0.76..0.90.30.37
[ val( s ) ].........................................0.30..0.37.10.83
[ val( a [ i % 16 + 1 ] ) ]..........................0.58..0.72.21.18
[ dtos( d - i % 10000 ) ]............................0.48..0.69.34.23
[ eval( { || i % 16 } ) ]............................0.44..0.84.41.98
[ eval( bc := { || i % 16 } ) ]......................0.31..0.41.15.54
[ eval( { |x| x % 16 }, i ) ]........................0.41..0.69.28.16
[ eval( bc := { |x| x % 16 }, i ) ]..................0.34..0.44.16.32
[ eval( { |x| f1( x ) }, i ) ].......................0.58..0.90.39.76
[ eval( bc := { |x| f1( x ) }, i ) ].................0.55..0.66.13.49
[ x := &( "f1(" + str(i) + ")" ) ]...................2.89..4.04.56.72
[ bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]...........3.79..5.41.55.47
[ x := valtype( x ) +  valtype( i ) ]................0.50..0.76.29.86
[ x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ].....1.03..1.29.37.18
[ x := a[ i % 16 + 1 ] == s ]........................0.51..0.59.11.92
[ x := a[ i % 16 + 1 ] = s ].........................0.55..0.62.13.14
[ x := a[ i % 16 + 1 ] >= s ]........................0.55..0.61.19.38
[ x := a[ i % 16 + 1 ] <= s ]........................0.51..0.61.18.56
[ x := a[ i % 16 + 1 ] < s ].........................0.53..0.59.19.31
[ x := a[ i % 16 + 1 ] > s ].........................0.55..0.61.18.31
[ ascan( a, i % 16 ) ]...............................0.36..0.48.17.47
[ ascan( a, { |x| x == i % 16 } ) ]..................3.99..4.99.46.89
[ if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2,a2,b..1.79..2.07.47.64
[ x := a ]...........................................0.12..0.14..9.19
[ x := {} ]..........................................0.14..0.36.29.95
[ f0() ].............................................0.09..0.19.10.16
[ f1( i ) ]..........................................0.25..0.30.13.45
[ f2( c[1...8] ) ]...................................0.20..0.30.13.15
[ f2( c[1...40000] ) ]...............................0.22..0.28.12.73
[ f2( @c[1...40000] ) ]..............................0.20..0.28.13.06
[ f2( @c[1...40000] ), c2 := c ].....................0.27..0.31.14.73
[ f3( a, a2, s, i, s2, bc, i, n, x ) ]...............0.72..0.90.20.00
[ f2( a ) ]..........................................0.19..0.30.13.42
[ x := f4() ]........................................0.80..1.01.32.17
[ x := f5() ]........................................0.36..0.55.33.96
=====================================================================
[ total application time: ].........................32.25.41.42.59.98
[ total real time: ]................................32.58.41.66.31.65

Best regards

Francesco

From druzus at acn.waw.pl  Fri Oct  3 17:27:01 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  3 17:27:17 2008
Subject: [Harbour] 2008-10-03 21:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <ABA2DC77-5008-4239-9BBE-92C488B05E8B@syenar.hu>
References: <20081003195350.GA808@34-mo7-2.acn.waw.pl>
	<ABA2DC77-5008-4239-9BBE-92C488B05E8B@syenar.hu>
Message-ID: <20081003212701.GA30818@34-mo7-2.acn.waw.pl>

On Fri, 03 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> P4 2.66/800 HT, XP, MSVS2008 -gc3:

I guess that HT means Hyper Thread CPU with two cores.
Am I right?

> Startup loop to increase CPU clock...
> 10/03/08 22:23:07 Windows XP 5.1.2600 Service Pack 3
> Harbour 1.1.0dev (Rev. 9539) (MT) Microsoft Visual C 15.0.26569 (32 bit)
> N_LOOPS =    1000000
>                                                      speedtst
>                                            -gc0    -gc3    -gc0    -gc3
>                                                              MT      MT
> -----------------------------------------------------------------------
> [ empty loop overhead ]....................0.13 ...0.03 ...0.09 ...0.06
> =============================================== ======= ======= =======
> [ x := L_C ]...............................0.20 ...0.13 ..29.09 ...5.27
> [ x := L_N ]...............................0.05 ...0.05 ..11.69 ...1.53
> [ x := L_D ]...............................0.02 ...0.03 ..16.94 ...3.92
> [ x := S_C ]...............................0.17 ...0.14 ..27.41 ...5.06
> [ x := S_N ]...............................0.06 ...0.03 ..26.14 ...3.95
> [ x := S_D ]...............................0.05 ...0.00 ..23.11 ...4.23
> [ x := M_C ]...............................0.20 ...0.11 ..24.00 ...6.58
> [ x := M_N ]...............................0.00 ...0.13 ..19.19 ...6.88
> [ x := M_D ]...............................0.06 ...0.05 ..23.89 ...4.41
> [ x := P_C ]...............................0.22 ...0.13 ..35.14 ..12.75
> [ x := P_N ]...............................0.03 ...0.08 ..36.55 ...4.50
> [ x := P_D ]...............................0.06 ...0.02 ..23.91 ...5.83
> [ x := F_C ]...............................0.77 ...0.39 ..55.25 ..41.00
> [ x := F_N ]...............................0.55 ...0.30 ..47.52 ..23.03
> [ x := F_D ]...............................0.23 ...0.08 ..24.73 ...7.06
> [ x := o:GenCode ].........................0.53 ...0.16 ..38.81 ..19.94
> [ x := 0 ].................................0.02 ...0.06 ..20.70 ...1.67
> [ round( i / 1000, 2 ) ]...................0.64 ...0.47 ..43.63 ..23.92
> [ str( i / 1000 ) ]........................1.61 ...1.27 ..81.23 ..53.89
> [ val( s ) ]...............................0.80 ...0.78 ..39.22 ..28.03
> [ val( a [ i % 16 + 1 ] ) ]................1.53 ...1.39 ..55.86 ..32.16
> [ dtos( d - i % 10000 ) ]..................1.56 ...1.14 ..93.64 ..60.39
> [ eval( { || i % 16 } ) ]..................2.53 ...2.06 .104.80 ..77.70
> [ eval( bc := { || i % 16 } ) ]............0.83 ...0.83 ..53.44 ..14.50
> [ eval( { |x| x % 16 }, i ) ]..............1.73 ...1.42 ..99.72 ..62.42
> [ eval( bc := { |x| x % 16 }, i ) ]........0.88 ...0.78 ..46.69 ..12.03
> [ eval( { |x| f1( x ) }, i ) ].............1.81 ...1.63 .102.41 ..58.31
> [ eval( bc := { |x| f1( x ) }, i ) ].......0.45 ...0.80 ..56.55 ..11.64
> [ x := &( "f1(" + str(i) + ")" ) ].........3.81 ...9.55 .149.52 .112.41
> [ bc := &( "{|x|f1(x)}" ); eval( bc, i ) ..9.13 ..12.36 .150.80 .116.25
> [ x := valtype( x ) +  valtype( i ) ]......1.00 ...0.94 ..88.27 ..56.63
> [ x := strzero( i % 100, 2 ) $ a[ i % 16 ..1.59 ...1.58 ..95.48 ..69.97
> [ x := a[ i % 16 + 1 ] == s ]..............0.70 ...0.73 ..46.44 ..24.19
> [ x := a[ i % 16 + 1 ] = s ]...............0.73 ...0.70 ..56.73 ..27.17
> [ x := a[ i % 16 + 1 ] >= s ]..............0.83 ...0.88 ..52.41 ..27.44
> [ x := a[ i % 16 + 1 ] <= s ]..............0.94 ...0.84 ..53.38 ..26.97
> [ x := a[ i % 16 + 1 ] < s ]...............0.73 ...0.92 ..54.41 ..27.22
> [ x := a[ i % 16 + 1 ] > s ]...............0.78 ...0.70 ..54.78 ..27.38
> [ ascan( a, i % 16 ) ].....................0.50 ...0.72 ..48.84 ..25.19
> [ ascan( a, { |x| x == i % 16 } ) ]........6.92 ...6.58 .119.34 ..82.98
> [ if i%1000==0;a:={};end; aadd(a,{i,1,.T...3.09 ...2.92 .126.52 ..89.03
> [ x := a ].................................0.14 ...0.17 ..28.50 ..13.97
> [ x := {} ]................................0.77 ...0.55 ..90.13 ..62.22
> [ f0() ]...................................0.09 ...0.11 ..29.58 ..13.09
> [ f1( i ) ]................................0.14 ...0.13 ..45.97 ..13.61
> [ f2( c[1...8] ) ].........................0.31 ...0.28 ..44.81 ..18.41
> [ f2( c[1...40000] ) ].....................0.28 ...0.23 ..28.41 ..17.34
> [ f2( @c[1...40000] ) ]....................0.27 ...0.22 ..44.02 ..19.08
> [ f2( @c[1...40000] ), c2 := c ]...........0.27 ...0.23 ..41.41 ..16.81
> [ f3( a, a2, s, i, s2, bc, i, n, x ) ].....0.95 ...0.89 ..45.78 ..25.56
> [ f2( a ) ]................................0.38 ...0.33 ..45.08 ..14.23
> [ x := f4() ]..............................1.61 ...1.28 ..94.91 ..58.11
> [ x := f5() ]..............................0.70 ...0.55 ..96.70 ..49.44
> =============================================== ======= ======= =======
> [ total application time: ]...............61.00 ..60.50 .154.64 .123.61
> [ total real time: ]......................57.73 ..51.34 ..78.61 ..63.39

Thank you for your tests. Just a small question.
Is the 1-st and 2-nd column for ST HVM or is it also MT HVM and only
speedtst was run without additional parameter so all tests were executed
by single thread only?

best regards
Przemek
From druzus at acn.waw.pl  Fri Oct  3 17:47:35 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  3 17:47:51 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <48E68C3C.60901@fsgiudice.com>
References: <48E4E3BB.3050803@libero.it>
	<20081002163334.GB18777@34-mo7-2.acn.waw.pl>
	<20081002183352.GA30587@34-mo7-2.acn.waw.pl>
	<48E5D29B.4030808@libero.it>
	<20081003113240.GA12991@34-mo7-2.acn.waw.pl>
	<48E6311D.9010102@libero.it> <48E63559.8020704@libero.it>
	<48E6388A.8020202@libero.it>
	<20081003162348.GA15016@34-mo7-2.acn.waw.pl>
	<48E68C3C.60901@fsgiudice.com>
Message-ID: <20081003214735.GB30818@34-mo7-2.acn.waw.pl>

On Fri, 03 Oct 2008, Francesco Saverio Giudice wrote:

Hi Francesco,

> Here my test:
> Intel(R) Core(TM)2 Duo CPU T8300 @ 2.40GHz
> L2 Cache Size: 3072 Kb, Bus: 200 Mhz
> 4 GB RAM, Vista Ultimate 32bit
> Harbour Terminal: Windows native console
> Harbour 1.1.0dev (Rev. 9542)
> Windows Vista 6.0.6001 Service Pack 1
> DS avail=1736532KB  OS avail=2063740KB  EMM avail=0KB  MemStat:Off
> Startup loop to increase CPU clock...
> 10/03/08 22:59:09 Windows Vista 6.0.6001 Service Pack 1
> Harbour 1.1.0dev (Rev. 9542) (MT) Borland C++ 5.5.1 (32 bit)
> N_LOOPS =    1000000                                   ST    MT  MT+
> [ empty loop overhead ]..............................0.08..0.08..0.09
> =====================================================================
> [ x := L_C ].........................................0.09..0.12..8.94
> [ x := L_N ].........................................0.09..0.09..3.78
> [ x := L_D ].........................................0.09..0.11..6.47
> [ x := S_C ].........................................0.12..0.16..5.76
> [ x := S_N ].........................................0.08..0.12..7.63
> [ x := S_D ].........................................0.09..0.11..4.12
> [ x := M_C ].........................................0.09..0.17..8.81
> [ x := M_N ].........................................0.11..0.14..5.63
> [ x := M_D ].........................................0.09..0.14..8.81
> [ x := P_C ].........................................0.12..0.17..7.35
> [ x := P_N ].........................................0.09..0.11..8.63
> [ x := P_D ].........................................0.09..0.14..6.91
> [ x := F_C ].........................................0.17..0.30.24.29
> [ x := F_N ].........................................0.22..0.25..8.80
> [ x := F_D ].........................................0.12..0.16..8.78
> [ x := o:GenCode ]...................................0.20..0.31.11.75
> [ x := 0 ]...........................................0.05..0.09..5.57
> [ round( i / 1000, 2 ) ].............................0.28..0.33.13.99
> [ str( i / 1000 ) ]..................................0.76..0.90.30.37
> [ val( s ) ].........................................0.30..0.37.10.83
> [ val( a [ i % 16 + 1 ] ) ]..........................0.58..0.72.21.18
> [ dtos( d - i % 10000 ) ]............................0.48..0.69.34.23
> [ eval( { || i % 16 } ) ]............................0.44..0.84.41.98
> [ eval( bc := { || i % 16 } ) ]......................0.31..0.41.15.54
> [ eval( { |x| x % 16 }, i ) ]........................0.41..0.69.28.16
> [ eval( bc := { |x| x % 16 }, i ) ]..................0.34..0.44.16.32
> [ eval( { |x| f1( x ) }, i ) ].......................0.58..0.90.39.76
> [ eval( bc := { |x| f1( x ) }, i ) ].................0.55..0.66.13.49
> [ x := &( "f1(" + str(i) + ")" ) ]...................2.89..4.04.56.72
> [ bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]...........3.79..5.41.55.47
> [ x := valtype( x ) +  valtype( i ) ]................0.50..0.76.29.86
> [ x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ].....1.03..1.29.37.18
> [ x := a[ i % 16 + 1 ] == s ]........................0.51..0.59.11.92
> [ x := a[ i % 16 + 1 ] = s ].........................0.55..0.62.13.14
> [ x := a[ i % 16 + 1 ] >= s ]........................0.55..0.61.19.38
> [ x := a[ i % 16 + 1 ] <= s ]........................0.51..0.61.18.56
> [ x := a[ i % 16 + 1 ] < s ].........................0.53..0.59.19.31
> [ x := a[ i % 16 + 1 ] > s ].........................0.55..0.61.18.31
> [ ascan( a, i % 16 ) ]...............................0.36..0.48.17.47
> [ ascan( a, { |x| x == i % 16 } ) ]..................3.99..4.99.46.89
> [ if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2,a2,b..1.79..2.07.47.64
> [ x := a ]...........................................0.12..0.14..9.19
> [ x := {} ]..........................................0.14..0.36.29.95
> [ f0() ].............................................0.09..0.19.10.16
> [ f1( i ) ]..........................................0.25..0.30.13.45
> [ f2( c[1...8] ) ]...................................0.20..0.30.13.15
> [ f2( c[1...40000] ) ]...............................0.22..0.28.12.73
> [ f2( @c[1...40000] ) ]..............................0.20..0.28.13.06
> [ f2( @c[1...40000] ), c2 := c ].....................0.27..0.31.14.73
> [ f3( a, a2, s, i, s2, bc, i, n, x ) ]...............0.72..0.90.20.00
> [ f2( a ) ]..........................................0.19..0.30.13.42
> [ x := f4() ]........................................0.80..1.01.32.17
> [ x := f5() ]........................................0.36..0.55.33.96
> =====================================================================
> [ total application time: ].........................32.25.41.42.59.98
> [ total real time: ]................................32.58.41.66.31.65

Thank you very much. The multi thread version is the fastest but here
also the most expensive seems to be tests which allocates memory and use
critical sections. If using spinlocks gives some noticeable improvement
in OS2 then we can also try then in MS-Win. I tested them in my Linux
box but default non recursive mutexes are already implemented as futexes
(spinlocks before OS locks executed when it fails) so there is no important
speed improvement when I use them.
MinGW users can make some tests even now. It's enough to change in
garbage.c[72]:

   #if defined( HB_OS_OS2 ) && \

to:

   #if ( defined( HB_OS_OS2 ) || defined( __MINGW32__ ) ) && \

and recompile Harbour. It will enable spinlock code I created for
OS2 users.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Fri Oct  3 17:54:37 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Oct  3 17:54:49 2008
Subject: [Harbour] 2008-10-03 21:53 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20081003195350.GA808@34-mo7-2.acn.waw.pl>
Message-ID: <124D77CB2DB5426A8A4F846811BABB1F@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: <harbour@harbour-project.org>
Data invio: venerd? 3 ottobre 2008 21.53
Oggetto: [Harbour] 2008-10-03 21:53 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> 2008-10-03 21:53 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  - harbour/tests/speedtst.prg
>  + harbour/tests/speedold.prg
>    * renamed old speed test - I left it because some other xbase compiler
>      cannot compiple the new one due to not Clipper compatible PP
>
>  + harbour/tests/speedtst.prg
>    * added new speed test which can also measure mutlithread performance.
>      When linked with MT HVM version then it can be executed with optional
>      parameter which causes that each test loop is executed by separate
>      thread. Please make such tests on different platforms.

Przemek, can you fix these?

Harbour 1.1.0dev (Rev. 9542)
Copyright (c) 1999-2008, http://www.harbour-project.org/
SPEEDTST.prg(147) Error E0003  Duplicate variable declaration 'M_C'
SPEEDTST.prg(150) Error E0003  Duplicate variable declaration 'M_N'
SPEEDTST.prg(153) Error E0003  Duplicate variable declaration 'M_D'
SPEEDTST.prg(156) Error E0003  Duplicate variable declaration 'P_C'
SPEEDTST.prg(159) Error E0003  Duplicate variable declaration 'P_N'
SPEEDTST.prg(162) Error E0003  Duplicate variable declaration 'P_D'
6 errors

No code generated

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Fri Oct  3 18:11:52 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  3 18:12:07 2008
Subject: [Harbour] 2008-10-03 21:53 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <124D77CB2DB5426A8A4F846811BABB1F@emag>
References: <20081003195350.GA808@34-mo7-2.acn.waw.pl>
	<124D77CB2DB5426A8A4F846811BABB1F@emag>
Message-ID: <20081003221152.GC30818@34-mo7-2.acn.waw.pl>

On Fri, 03 Oct 2008, Enrico Maria Giordano wrote:

Hi Enrico,

> Przemek, can you fix these?
> Harbour 1.1.0dev (Rev. 9542)
> Copyright (c) 1999-2008, http://www.harbour-project.org/
> SPEEDTST.prg(147) Error E0003  Duplicate variable declaration 'M_C'
> SPEEDTST.prg(150) Error E0003  Duplicate variable declaration 'M_N'
> SPEEDTST.prg(153) Error E0003  Duplicate variable declaration 'M_D'
> SPEEDTST.prg(156) Error E0003  Duplicate variable declaration 'P_C'
> SPEEDTST.prg(159) Error E0003  Duplicate variable declaration 'P_N'
> SPEEDTST.prg(162) Error E0003  Duplicate variable declaration 'P_D'

The code is correct but you are using -a Harbour switch.
This is exactly the same behavior as in Clipper.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct  3 19:13:43 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  3 19:13:58 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <48E68C3C.60901@fsgiudice.com>
References: <48E4E3BB.3050803@libero.it>
	<20081002163334.GB18777@34-mo7-2.acn.waw.pl>
	<20081002183352.GA30587@34-mo7-2.acn.waw.pl>
	<48E5D29B.4030808@libero.it>
	<20081003113240.GA12991@34-mo7-2.acn.waw.pl>
	<48E6311D.9010102@libero.it> <48E63559.8020704@libero.it>
	<48E6388A.8020202@libero.it>
	<20081003162348.GA15016@34-mo7-2.acn.waw.pl>
	<48E68C3C.60901@fsgiudice.com>
Message-ID: <20081003231342.GA23387@34-mo7-2.acn.waw.pl>

On Fri, 03 Oct 2008, Francesco Saverio Giudice wrote:

Hi Francesco,

> Here my test:
> Intel(R) Core(TM)2 Duo CPU T8300 @ 2.40GHz
> L2 Cache Size: 3072 Kb, Bus: 200 Mhz
> 4 GB RAM, Vista Ultimate 32bit
> Standard Build:
> set C_USR=-DHB_FM_STATISTICS_OFF
> set HB_BUILD_ST=

I would like to ask you about yet another test without DL-MALLOC
which is now enabled by default.
Please recompile Harbour with -DHB_FM_STD_ALLOC and check the results
again.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Oct  3 19:23:01 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct  3 19:23:12 2008
Subject: [Harbour] 2008-10-03 21:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081003212701.GA30818@34-mo7-2.acn.waw.pl>
References: <20081003195350.GA808@34-mo7-2.acn.waw.pl>
	<ABA2DC77-5008-4239-9BBE-92C488B05E8B@syenar.hu>
	<20081003212701.GA30818@34-mo7-2.acn.waw.pl>
Message-ID: <36526717-CECB-4A85-AB21-5F1FBD0B9081@syenar.hu>

>>
Hi Przemek,

>> P4 2.66/800 HT, XP, MSVS2008 -gc3:
>
> I guess that HT means Hyper Thread CPU with two cores.
> Am I right?

You're right. It's a Northwood HT, first generation HT AFAIR.

>> Startup loop to increase CPU clock...
>> 10/03/08 22:23:07 Windows XP 5.1.2600 Service Pack 3
>> Harbour 1.1.0dev (Rev. 9539) (MT) Microsoft Visual C 15.0.26569 (32  
>> bit)
>> N_LOOPS =    1000000
>>                                                     speedtst
>>                                           -gc0    -gc3    -gc0    - 
>> gc3
>>                                                             MT       
>> MT
>> -----------------------------------------------------------------------
>> [ empty loop overhead ]....................0.13 ...0.03 ...0.09 ... 
>> 0.06
>> =============================================== ======= =======  
>> =======
>> [ total application time: ]...............61.00 ..60.50 .154.64 . 
>> 123.61
>> [ total real time: ]......................57.73 ..51.34 ..78.61 .. 
>> 63.39
>
> Thank you for your tests. Just a small question.
> Is the 1-st and 2-nd column for ST HVM or is it also MT HVM and only
> speedtst was run without additional parameter so all tests were  
> executed
> by single thread only?

All these were MT speedtsts (two executables, one for -gc0,
one for -gc3), and 3rd 4th were run with a parameter to
enable parallel execution.

Here are the ST results with new speedtst:


Startup loop to increase CPU clock...
10/04/08 01:00:59 Windows XP 5.1.2600 Service Pack 3
Harbour 1.1.0dev (Rev. 9539) Microsoft Visual C 15.0.26569 (32 bit)
N_LOOPS =    1000000

                                                     -gc0    -gc3
======================================================== =======
[ empty loop overhead ].............................0.14 ...0.03
======================================================== =======
[ x := L_C ]........................................0.03 ...0.11
[ x := L_N ]........................................0.00 ...0.09
[ x := L_D ]........................................0.03 ...0.06
[ x := S_C ]........................................0.05 ...0.13
[ x := S_N ]........................................0.03 ...0.13
[ x := S_D ]........................................0.05 ...0.11
[ x := M_C ]........................................0.06 ...0.14
[ x := M_N ]........................................0.05 ...0.13
[ x := M_D ]........................................0.00 ...0.13
[ x := P_C ]........................................0.00 ...0.14
[ x := P_N ]........................................0.00 ...0.14
[ x := P_D ]........................................0.00 ...0.11
[ x := F_C ]........................................0.17 ...0.38
[ x := F_N ]........................................0.31 ...0.59
[ x := F_D ]........................................0.11 ...0.31
[ x := o:GenCode ]..................................0.14 ...0.39
[ x := 0 ]..........................................0.00 ...0.06
[ round( i / 1000, 2 ) ]............................0.25 ...0.47
[ str( i / 1000 ) ].................................0.58 ...1.25
[ val( s ) ]........................................0.31 ...0.75
[ val( a [ i % 16 + 1 ] ) ].........................0.69 ...1.16
[ dtos( d - i % 10000 ) ]...........................0.52 ...0.92
[ eval( { || i % 16 } ) ]...........................0.48 ...1.06
[ eval( bc := { || i % 16 } ) ].....................0.25 ...0.66
[ eval( { |x| x % 16 }, i ) ].......................0.52 ...0.81
[ eval( bc := { |x| x % 16 }, i ) ].................0.25 ...0.39
[ eval( { |x| f1( x ) }, i ) ]......................0.63 ...0.50
[ eval( bc := { |x| f1( x ) }, i ) ]................0.45 ...0.41
[ x := &( "f1(" + str(i) + ")" ) ]..................3.88 ...3.72
[ bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]..........5.33 ...5.78
[ x := valtype( x ) +  valtype( i ) ]...............0.61 ...0.42
[ x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ]....2.05 ...0.98
[ x := a[ i % 16 + 1 ] == s ].......................0.41 ...0.38
[ x := a[ i % 16 + 1 ] = s ]........................0.45 ...0.45
[ x := a[ i % 16 + 1 ] >= s ].......................0.44 ...0.34
[ x := a[ i % 16 + 1 ] <= s ].......................0.50 ...0.28
[ x := a[ i % 16 + 1 ] < s ]........................0.39 ...0.41
[ x := a[ i % 16 + 1 ] > s ]........................0.42 ...0.31
[ ascan( a, i % 16 ) ]..............................0.48 ...0.33
[ ascan( a, { |x| x == i % 16 } ) ].................5.78 ...3.44
[ if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2,a....2.86 ...2.30
[ x := a ]..........................................0.03 ...0.09
[ x := {} ].........................................0.31 ...0.28
[ f0() ]............................................0.19 ...0.13
[ f1( i ) ].........................................0.27 ...0.27
[ f2( c[1...8] ) ]..................................0.38 ...0.30
[ f2( c[1...40000] ) ]..............................0.22 ...0.31
[ f2( @c[1...40000] ) ].............................0.23 ...0.20
[ f2( @c[1...40000] ), c2 := c ]....................0.30 ...0.19
[ f3( a, a2, s, i, s2, bc, i, n, x ) ]..............0.88 ...0.58
[ f2( a ) ].........................................0.34 ...0.25
[ x := f4() ].......................................2.22 ...2.19
[ x := f5() ].......................................0.73 ...0.58
======================================================== =======
[ total application time: ]........................43.00 ..37.75
[ total real time: ]...............................37.47 ..31.09

And here are the results with "OS/2" spinlocks enabled:


Startup loop to increase CPU clock...
10/04/08 01:15:03 Windows XP 5.1.2600 Service Pack 3
Harbour 1.1.0dev (Rev. 9542) (MT) Microsoft Visual C 15.0.26569 (32 bit)
N_LOOPS =    1000000
                                          -gc0    -gc3    -gc0    -gc3
                                                            MT      MT
[ empty loop overhead ]..................0.11 ...0.08 ...0.08 ...0.05
============================================= ======= ======= =======
[ x := L_C ].............................0.19 ...0.02 ..16.22 ...3.47
[ x := L_N ].............................0.02 ...0.00 ..13.45 ...1.77
[ x := L_D ].............................0.08 ...0.00 ..19.59 ...4.75
[ x := S_C ].............................0.28 ...0.08 ..22.72 ...6.75
[ x := S_N ].............................0.05 ...0.00 ..14.47 ...4.47
[ x := S_D ].............................0.06 ...0.00 ..12.97 ...2.88
[ x := M_C ].............................0.31 ...0.06 ..29.53 ...8.92
[ x := M_N ].............................0.05 ...0.09 ..15.89 ...4.92
[ x := M_D ].............................0.02 ...0.00 ..22.83 ...4.75
[ x := P_C ].............................0.14 ...0.17 ..12.27 ...9.52
[ x := P_N ].............................0.02 ...0.00 ..21.00 ...3.02
[ x := P_D ].............................0.02 ...0.02 ..16.23 ...4.45
[ x := F_C ].............................0.45 ...0.30 ..34.64 ..50.55
[ x := F_N ].............................0.33 ...0.25 ..25.94 ..10.89
[ x := F_D ].............................0.13 ...0.11 ..20.88 ...7.75
[ x := o:GenCode ].......................0.27 ...0.25 ..38.98 ..12.25
[ x := 0 ]...............................0.00 ...0.00 ..28.31 ...2.05
[ round( i / 1000, 2 ) ].................0.38 ...0.20 ..37.92 ..10.50
[ str( i / 1000 ) ]......................1.03 ...0.75 ..86.41 ..59.75
[ val( s ) ].............................0.44 ...0.25 ..41.80 ..19.63
[ val( a [ i % 16 + 1 ] ) ]..............1.00 ...0.84 ..56.27 ..25.09
[ dtos( d - i % 10000 ) ]................0.91 ...1.03 ..95.20 ..58.25
[ eval( { || i % 16 } ) ]................1.28 ...1.88 .100.30 ..79.53
[ eval( bc := { || i % 16 } ) ]..........0.52 ...0.72 ..38.41 ...4.25
[ eval( { |x| x % 16 }, i ) ]............1.61 ...1.27 ..86.22 ..68.63
[ eval( bc := { |x| x % 16 }, i ) ]......0.80 ...0.39 ..39.86 ...5.95
[ eval( { |x| f1( x ) }, i ) ]...........2.03 ...1.00 ..93.73 ..63.55
[ eval( bc := { |x| f1( x ) }, i ) ].....0.80 ...0.64 ..39.27 ...2.63
[ x := &( "f1(" + str(i) + ")" ) ].......7.08 ...6.39 .139.73 .109.97
[ bc := &( "{|x|f1(x)}" ); eval( bc, i..10.02 ...9.08 .139.45 .119.17
[ x := valtype( x ) +  valtype( i ) ]....1.39 ...0.97 ..84.63 ..58.95
[ x := strzero( i % 100, 2 ) $ a[ i % ...2.66 ...1.27 ..93.80 ..65.20
[ x := a[ i % 16 + 1 ] == s ]............0.75 ...0.56 ..44.38 ..19.75
[ x := a[ i % 16 + 1 ] = s ].............0.88 ...0.53 ..32.34 ..21.11
[ x := a[ i % 16 + 1 ] >= s ]............1.25 ...0.52 ..55.80 ..22.38
[ x := a[ i % 16 + 1 ] <= s ]............1.20 ...0.34 ..50.75 ..21.69
[ x := a[ i % 16 + 1 ] < s ].............1.14 ...0.61 ..47.08 ..21.00
[ x := a[ i % 16 + 1 ] > s ].............1.42 ...0.73 ..53.98 ..22.42
[ ascan( a, i % 16 ) ]...................1.14 ...0.64 ..44.34 ..18.22
[ ascan( a, { |x| x == i % 16 } ) ]......7.34 ...7.38 .118.28 ..75.86
[ if i%1000==0;a:={};end; aadd(a,{i,1,...3.25 ...2.84 .113.38 ..79.86
[ x := a ]...............................0.36 ...0.19 ..21.00 ...8.45
[ x := {} ]..............................1.05 ...0.77 ..84.69 ..41.30
[ f0() ].................................0.14 ...0.11 ..38.09 ...8.58
[ f1( i ) ]..............................0.17 ...0.22 ..39.89 ..11.47
[ f2( c[1...8] ) ].......................0.31 ...0.23 ..16.39 ..12.44
[ f2( c[1...40000] ) ]...................0.30 ...0.30 ..33.03 ...6.30
[ f2( @c[1...40000] ) ]..................0.28 ...0.31 ..27.48 ..12.67
[ f2( @c[1...40000] ), c2 := c ].........0.36 ...0.28 ..40.31 ..13.05
[ f3( a, a2, s, i, s2, bc, i, n, x ) ]...0.92 ...0.75 ..35.00 ..21.53
[ f2( a ) ]..............................0.28 ...0.30 ..27.70 ...2.88
[ x := f4() ]............................1.42 ...1.42 ..82.25 ..38.75
[ x := f5() ]............................0.70 ...0.61 ..58.69 ..40.72
============================================= ======= ======= =======
[ total application time: ].............64.89 ..51.73 .148.38 .127.17
[ total real time: ]....................57.13 ..50.92 ..76.66 ..64.64

Brgds,
Viktor

From druzus at acn.waw.pl  Fri Oct  3 19:42:54 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  3 19:43:10 2008
Subject: [Harbour] 2008-10-03 21:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <36526717-CECB-4A85-AB21-5F1FBD0B9081@syenar.hu>
References: <20081003195350.GA808@34-mo7-2.acn.waw.pl>
	<ABA2DC77-5008-4239-9BBE-92C488B05E8B@syenar.hu>
	<20081003212701.GA30818@34-mo7-2.acn.waw.pl>
	<36526717-CECB-4A85-AB21-5F1FBD0B9081@syenar.hu>
Message-ID: <20081003234254.GB23387@34-mo7-2.acn.waw.pl>

On Sat, 04 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> All these were MT speedtsts (two executables, one for -gc0,
> one for -gc3), and 3rd 4th were run with a parameter to
> enable parallel execution.

Thanks,

> Here are the ST results with new speedtst:
[...]
> [ total application time: ]........................43.00 ..37.75
> [ total real time: ]...............................37.47 ..31.09

I would seriously check how MSVC measure time.
In ST build "total application time" should be lower then
"total real time". I do not know why you have such results.
Maybe MSVC C-RTL executes some internal threads?


> And here are the results with "OS/2" spinlocks enabled:
> Harbour 1.1.0dev (Rev. 9542) (MT) Microsoft Visual C 15.0.26569 (32 bit)

Thank you very much but they will not be enabled for MSVC builds.
I created ASM inline functions only for GCC so in Windows you can
compare MinGW builds now. If it will give some noticeable speed
improvement then I can implement them also for other compilers.

Anyhow if possible I would like to ask also you about comparison
of MT+ mode with DL-MALLOC and standard MSVC malloc. I made some
test in Linux and DL-MALLOC results are not good :-(

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Oct  3 19:59:10 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct  3 19:59:21 2008
Subject: [Harbour] 2008-10-03 21:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081003234254.GB23387@34-mo7-2.acn.waw.pl>
References: <20081003195350.GA808@34-mo7-2.acn.waw.pl>
	<ABA2DC77-5008-4239-9BBE-92C488B05E8B@syenar.hu>
	<20081003212701.GA30818@34-mo7-2.acn.waw.pl>
	<36526717-CECB-4A85-AB21-5F1FBD0B9081@syenar.hu>
	<20081003234254.GB23387@34-mo7-2.acn.waw.pl>
Message-ID: <84F94EFF-94E4-406C-AB59-0502EE187EF7@syenar.hu>

>>
Hi Przemek,

>> Here are the ST results with new speedtst:
> [...]
>> [ total application time: ]........................43.00 ..37.75
>> [ total real time: ]...............................37.47 ..31.09
>
> I would seriously check how MSVC measure time.
> In ST build "total application time" should be lower then
> "total real time". I do not know why you have such results.
> Maybe MSVC C-RTL executes some internal threads?

I was also wondering why is there a big difference at all,
this used to happen in virtual machines only so far.
I really don't know.

BTW, I'm trying to guess it since long, but I couldn't
yet find the answer what is the difference between these
values, especially in ST builds.

>> And here are the results with "OS/2" spinlocks enabled:
>> Harbour 1.1.0dev (Rev. 9542) (MT) Microsoft Visual C 15.0.26569 (32  
>> bit)
>
> Thank you very much but they will not be enabled for MSVC builds.
> I created ASM inline functions only for GCC so in Windows you can
> compare MinGW builds now. If it will give some noticeable speed
> improvement then I can implement them also for other compilers.

God I must be tired (and I have way too many environments still) :(
Of course, you're right.

Since I did essentially the same tests twice, it's interesting to
see how consecutive runs may have different results in full MT mode.
For accurate tests I'd need a bare bone XP system with nothing
else running on it probably. Having the same few tasks running and
not touching the PC while the tests are running is just not enough.

> Anyhow if possible I would like to ask also you about comparison
> of MT+ mode with DL-MALLOC and standard MSVC malloc. I made some
> test in Linux and DL-MALLOC results are not good :-(

Maybe tomorrow. My mind is elsewhere apparently.

Brgds,
Viktor

From druzus at acn.waw.pl  Fri Oct  3 20:32:38 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  3 20:32:52 2008
Subject: [Harbour] 2008-10-03 21:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <84F94EFF-94E4-406C-AB59-0502EE187EF7@syenar.hu>
References: <20081003195350.GA808@34-mo7-2.acn.waw.pl>
	<ABA2DC77-5008-4239-9BBE-92C488B05E8B@syenar.hu>
	<20081003212701.GA30818@34-mo7-2.acn.waw.pl>
	<36526717-CECB-4A85-AB21-5F1FBD0B9081@syenar.hu>
	<20081003234254.GB23387@34-mo7-2.acn.waw.pl>
	<84F94EFF-94E4-406C-AB59-0502EE187EF7@syenar.hu>
Message-ID: <20081004003238.GC23387@34-mo7-2.acn.waw.pl>

On Sat, 04 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

>>> [ total application time: ]........................43.00 ..37.75
>>> [ total real time: ]...............................37.47 ..31.09
>> I would seriously check how MSVC measure time.
>> In ST build "total application time" should be lower then
>> "total real time". I do not know why you have such results.
>> Maybe MSVC C-RTL executes some internal threads?
> I was also wondering why is there a big difference at all,
> this used to happen in virtual machines only so far.
> I really don't know.
> BTW, I'm trying to guess it since long, but I couldn't
> yet find the answer what is the difference between these
> values, especially in ST builds.

"application time" is CPU time given to process by OS.
It should not contain the time CPU spends executing other
processes.
"real time" is just a _real_ time.
In single CPU machine and multi process OS "real time"
is always slower or equal to "application time" because
it does not contain time when other processes where executed.
Of course sometimes due to rounded total results you can see few
milliseconds more.
When you have more then one CPU used by application simultaneously
in MT program then it can be bigger because. Your results suggest
that MSVC uses its own helper thread or the cost of virtual machine
executed on other CPU is added to application time. In such case
running more then one thread will reduce the VM performance and
final results are worse then in real world.
Anyway it is hard to compare such results and take some decisions
because they can be strongly dependent on VM implementation.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Oct  3 20:37:05 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct  3 20:37:15 2008
Subject: [Harbour] 2008-10-03 21:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081004003238.GC23387@34-mo7-2.acn.waw.pl>
References: <20081003195350.GA808@34-mo7-2.acn.waw.pl>
	<ABA2DC77-5008-4239-9BBE-92C488B05E8B@syenar.hu>
	<20081003212701.GA30818@34-mo7-2.acn.waw.pl>
	<36526717-CECB-4A85-AB21-5F1FBD0B9081@syenar.hu>
	<20081003234254.GB23387@34-mo7-2.acn.waw.pl>
	<84F94EFF-94E4-406C-AB59-0502EE187EF7@syenar.hu>
	<20081004003238.GC23387@34-mo7-2.acn.waw.pl>
Message-ID: <20A4A526-8BD1-4C12-8873-E20AD5BE866C@syenar.hu>

Thanks Przemek. And just one note, these weren't measured in a
VM. In fact I've only run tests in VM once (on the Mac to see
some Core2 results), but I didn't post the result, since they
looked odd.

Brgds,
Viktor

On 2008.10.04., at 2:32, Przemyslaw Czerpak wrote:

> On Sat, 04 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>>>> [ total application time: ]........................43.00 ..37.75
>>>> [ total real time: ]...............................37.47 ..31.09
>>> I would seriously check how MSVC measure time.
>>> In ST build "total application time" should be lower then
>>> "total real time". I do not know why you have such results.
>>> Maybe MSVC C-RTL executes some internal threads?
>> I was also wondering why is there a big difference at all,
>> this used to happen in virtual machines only so far.
>> I really don't know.
>> BTW, I'm trying to guess it since long, but I couldn't
>> yet find the answer what is the difference between these
>> values, especially in ST builds.
>
> "application time" is CPU time given to process by OS.
> It should not contain the time CPU spends executing other
> processes.
> "real time" is just a _real_ time.
> In single CPU machine and multi process OS "real time"
> is always slower or equal to "application time" because
> it does not contain time when other processes where executed.
> Of course sometimes due to rounded total results you can see few
> milliseconds more.
> When you have more then one CPU used by application simultaneously
> in MT program then it can be bigger because. Your results suggest
> that MSVC uses its own helper thread or the cost of virtual machine
> executed on other CPU is added to application time. In such case
> running more then one thread will reduce the VM performance and
> final results are worse then in real world.
> Anyway it is hard to compare such results and take some decisions
> because they can be strongly dependent on VM implementation.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Oct  3 20:39:59 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct  3 20:40:08 2008
Subject: [Harbour] 2008-10-03 21:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081003234254.GB23387@34-mo7-2.acn.waw.pl>
References: <20081003195350.GA808@34-mo7-2.acn.waw.pl>
	<ABA2DC77-5008-4239-9BBE-92C488B05E8B@syenar.hu>
	<20081003212701.GA30818@34-mo7-2.acn.waw.pl>
	<36526717-CECB-4A85-AB21-5F1FBD0B9081@syenar.hu>
	<20081003234254.GB23387@34-mo7-2.acn.waw.pl>
Message-ID: <DB128B95-ED78-414D-8E3A-2357515BB2B6@syenar.hu>

I've rerun ST tests, now the values seem reasonable:

Startup loop to increase CPU clock...
10/04/08 02:34:54 Windows XP 5.1.2600 Service Pack 3
Harbour 1.1.0dev (Rev. 9539) Microsoft Visual C 15.0.26569 (32 bit)
N_LOOPS =    1000000
                                               -gc0    -gc3
[ empty loop overhead ].......................0.08 ...0.03
================================================== =======
[ x := L_C ]..................................0.03 ...0.08
[ x := L_N ]..................................0.03 ...0.03
[ x := L_D ]..................................0.00 ...0.02
[ x := S_C ]..................................0.06 ...0.05
[ x := S_N ]..................................0.03 ...0.03
[ x := S_D ]..................................0.03 ...0.05
[ x := M_C ]..................................0.05 ...0.08
[ x := M_N ]..................................0.02 ...0.08
[ x := M_D ]..................................0.02 ...0.05
[ x := P_C ]..................................0.05 ...0.06
[ x := P_N ]..................................0.03 ...0.03
[ x := P_D ]..................................0.03 ...0.06
[ x := F_C ]..................................0.23 ...0.17
[ x := F_N ]..................................0.31 ...0.34
[ x := F_D ]..................................0.17 ...0.16
[ x := o:GenCode ]............................0.16 ...0.20
[ x := 0 ]....................................0.05 ...0.02
[ round( i / 1000, 2 ) ]......................0.38 ...0.33
[ str( i / 1000 ) ]...........................0.64 ...0.67
[ val( s ) ]..................................0.41 ...0.44
[ val( a [ i % 16 + 1 ] ) ]...................0.78 ...0.66
[ dtos( d - i % 10000 ) ].....................0.70 ...0.69
[ eval( { || i % 16 } ) ].....................0.53 ...0.64
[ eval( bc := { || i % 16 } ) ]...............0.33 ...0.38
[ eval( { |x| x % 16 }, i ) ].................0.53 ...0.45
[ eval( bc := { |x| x % 16 }, i ) ]...........0.38 ...0.41
[ eval( { |x| f1( x ) }, i ) ]................0.58 ...0.50
[ eval( bc := { |x| f1( x ) }, i ) ]..........0.53 ...0.36
[ x := &( "f1(" + str(i) + ")" ) ]............3.80 ...3.73
[ bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]....4.67 ...4.64
[ x := valtype( x ) +  valtype( i ) ].........0.48 ...0.44
[ x := strzero( i % 100, 2 ) $ a[ i % 16 +....1.33 ...1.03
[ x := a[ i % 16 + 1 ] == s ].................0.47 ...0.42
[ x := a[ i % 16 + 1 ] = s ]..................0.59 ...0.44
[ x := a[ i % 16 + 1 ] >= s ].................0.53 ...0.42
[ x := a[ i % 16 + 1 ] <= s ].................0.53 ...0.48
[ x := a[ i % 16 + 1 ] < s ]..................0.56 ...0.42
[ x := a[ i % 16 + 1 ] > s ]..................0.56 ...0.47
[ ascan( a, i % 16 ) ]........................0.53 ...0.48
[ ascan( a, { |x| x == i % 16 } ) ]...........4.42 ...4.09
[ if i%1000==0;a:={};end; aadd(a,{i,1,.T.,....1.98 ...1.67
[ x := a ]....................................0.08 ...0.06
[ x := {} ]...................................0.19 ...0.17
[ f0() ]......................................0.19 ...0.09
[ f1( i ) ]...................................0.36 ...0.14
[ f2( c[1...8] ) ]............................0.36 ...0.16
[ f2( c[1...40000] ) ]........................0.44 ...0.19
[ f2( @c[1...40000] ) ].......................0.33 ...0.09
[ f2( @c[1...40000] ), c2 := c ]..............0.25 ...0.19
[ f3( a, a2, s, i, s2, bc, i, n, x ) ]........0.61 ...0.48
[ f2( a ) ]...................................0.20 ...0.16
[ x := f4() ].................................1.42 ...1.34
[ x := f5() ].................................0.38 ...0.36
================================================== =======
[ total application time: ]..................36.53 ..30.89
[ total real time: ].........................36.55 ..29.98

Brgds,
Viktor

On 2008.10.04., at 1:42, Przemyslaw Czerpak wrote:

> On Sat, 04 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> All these were MT speedtsts (two executables, one for -gc0,
>> one for -gc3), and 3rd 4th were run with a parameter to
>> enable parallel execution.
>
> Thanks,
>
>> Here are the ST results with new speedtst:
> [...]
>> [ total application time: ]........................43.00 ..37.75
>> [ total real time: ]...............................37.47 ..31.09
>
> I would seriously check how MSVC measure time.
> In ST build "total application time" should be lower then
> "total real time". I do not know why you have such results.
> Maybe MSVC C-RTL executes some internal threads?
>
>
>> And here are the results with "OS/2" spinlocks enabled:
>> Harbour 1.1.0dev (Rev. 9542) (MT) Microsoft Visual C 15.0.26569 (32  
>> bit)
>
> Thank you very much but they will not be enabled for MSVC builds.
> I created ASM inline functions only for GCC so in Windows you can
> compare MinGW builds now. If it will give some noticeable speed
> improvement then I can implement them also for other compilers.
>
> Anyhow if possible I would like to ask also you about comparison
> of MT+ mode with DL-MALLOC and standard MSVC malloc. I made some
> test in Linux and DL-MALLOC results are not good :-(
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From bedipritpal at hotmail.com  Fri Oct  3 20:45:36 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Oct  3 20:45:42 2008
Subject: [Harbour] SpeedTst.prg and Bld_B32.bat - How to MT/ST -g2/-g3
	Compilation
Message-ID: <19807975.post@talk.nabble.com>


Hello Folks

Actually I seldom use bld_b32.bat to get executables in 
harbour/tests folder as all my projects are based on xMate.
However it is much more convenient for quickly building tests
with bld_b32.bat. 

Can you please forward the syntax how can I build MT/ST versions
with different flags. So far I am not been able to build MT versions.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/SpeedTst.prg-and-Bld_B32.bat---How-to-MT-ST--g2--g3-Compilation-tp19807975p19807975.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dmacias at mail.udg.mx  Fri Oct  3 21:58:41 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Oct  3 21:58:44 2008
Subject: [Harbour] Re: 2008-10-03 21:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48E6CDD1.9080400@mail.udg.mx>

>> I guess that HT means Hyper Thread CPU with two cores.
>> Am I right?

>You're right. It's a Northwood HT, first generation HT AFAIR.

Intel HT (HyperThreading) is ONE physical CPU with TWO logical CPU

Is just ONE core

To benefit applications must be developed for multi-thread, and/or OS
with SMP kernels

David Macias



From harbour.01 at syenar.hu  Sat Oct  4 03:30:58 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct  4 03:31:20 2008
Subject: [Harbour] 2008-10-03 21:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081003234254.GB23387@34-mo7-2.acn.waw.pl>
References: <20081003195350.GA808@34-mo7-2.acn.waw.pl>
	<ABA2DC77-5008-4239-9BBE-92C488B05E8B@syenar.hu>
	<20081003212701.GA30818@34-mo7-2.acn.waw.pl>
	<36526717-CECB-4A85-AB21-5F1FBD0B9081@syenar.hu>
	<20081003234254.GB23387@34-mo7-2.acn.waw.pl>
Message-ID: <D455E9B8-A5CB-4024-B70F-95171A751CAE@syenar.hu>

Hi Przemek,

MinGW results attached. [ All with -gc3 for Harbour and
default -gc0 for speedtst. ]

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: mingw-results.zip
Type: application/zip
Size: 5832 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081004/cdc1270e/mingw-results-0001.zip
-------------- next part --------------


On 2008.10.04., at 1:42, Przemyslaw Czerpak wrote:

> On Sat, 04 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> All these were MT speedtsts (two executables, one for -gc0,
>> one for -gc3), and 3rd 4th were run with a parameter to
>> enable parallel execution.
>
> Thanks,
>
>> Here are the ST results with new speedtst:
> [...]
>> [ total application time: ]........................43.00 ..37.75
>> [ total real time: ]...............................37.47 ..31.09
>
> I would seriously check how MSVC measure time.
> In ST build "total application time" should be lower then
> "total real time". I do not know why you have such results.
> Maybe MSVC C-RTL executes some internal threads?
>
>
>> And here are the results with "OS/2" spinlocks enabled:
>> Harbour 1.1.0dev (Rev. 9542) (MT) Microsoft Visual C 15.0.26569 (32  
>> bit)
>
> Thank you very much but they will not be enabled for MSVC builds.
> I created ASM inline functions only for GCC so in Windows you can
> compare MinGW builds now. If it will give some noticeable speed
> improvement then I can implement them also for other compilers.
>
> Anyhow if possible I would like to ask also you about comparison
> of MT+ mode with DL-MALLOC and standard MSVC malloc. I made some
> test in Linux and DL-MALLOC results are not good :-(
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sat Oct  4 03:32:27 2008
From: harbour.01 at syenar.hu (=?WINDOWS-1252?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct  4 03:32:37 2008
Subject: [Harbour] Re: 2008-10-03 21:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48E6CDD1.9080400@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48E6CDD1.9080400@mail.udg.mx>
Message-ID: <EE48F55C-DA1A-4CBF-BD43-C14037F92FB2@syenar.hu>

>>>
Hi David,

>>> I guess that HT means Hyper Thread CPU with two cores.
>>> Am I right?
>
>> You're right. It's a Northwood HT, first generation HT AFAIR.
>
> Intel HT (HyperThreading) is ONE physical CPU with TWO logical CPU
>
> Is just ONE core

Yes.

> To benefit applications must be developed for multi-thread, and/or OS
> with SMP kernels

AFAIK from an application's POV, it's the same thing
as if you had two cores. Just less efficient.

Brgds,
Viktor

From mbelgrano at deltain.it  Sat Oct  4 04:56:52 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct  4 04:57:16 2008
Subject: [Harbour] SpeedTst.prg and Bld_B32.bat - How to MT/ST
	-g2/-g3Compilation
In-Reply-To: <19807975.post@talk.nabble.com>
References: <19807975.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F031@SRV02.deltain.net>

What do you think of implement in hbmake the xmate project file?
So we have same project file for hbmake and xmate?
I have made same work

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
Sent: Saturday, October 04, 2008 2:46 AM
To: harbour@harbour-project.org
Subject: [Harbour] SpeedTst.prg and Bld_B32.bat - How to MT/ST
-g2/-g3Compilation


Hello Folks

Actually I seldom use bld_b32.bat to get executables in 
harbour/tests folder as all my projects are based on xMate.
However it is much more convenient for quickly building tests
with bld_b32.bat. 

Can you please forward the syntax how can I build MT/ST versions
with different flags. So far I am not been able to build MT versions.

Regards
Pritpal Bedi
-- 
View this message in context:
http://www.nabble.com/SpeedTst.prg-and-Bld_B32.bat---How-to-MT-ST--g2--g
3-Compilation-tp19807975p19807975.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From info at fsgiudice.com  Sat Oct  4 05:57:33 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Oct  4 05:57:43 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <20081003231342.GA23387@34-mo7-2.acn.waw.pl>
References: <48E4E3BB.3050803@libero.it>	<20081002163334.GB18777@34-mo7-2.acn.waw.pl>	<20081002183352.GA30587@34-mo7-2.acn.waw.pl>	<48E5D29B.4030808@libero.it>	<20081003113240.GA12991@34-mo7-2.acn.waw.pl>	<48E6311D.9010102@libero.it>
	<48E63559.8020704@libero.it>	<48E6388A.8020202@libero.it>	<20081003162348.GA15016@34-mo7-2.acn.waw.pl>	<48E68C3C.60901@fsgiudice.com>
	<20081003231342.GA23387@34-mo7-2.acn.waw.pl>
Message-ID: <48E73E0D.9030109@fsgiudice.com>

Hi Przemek,

Przemyslaw Czerpak ha scritto:
> On Fri, 03 Oct 2008, Francesco Saverio Giudice wrote:
> 
> Hi Francesco,
> 
>> Here my test:
>> Intel(R) Core(TM)2 Duo CPU T8300 @ 2.40GHz
>> L2 Cache Size: 3072 Kb, Bus: 200 Mhz
>> 4 GB RAM, Vista Ultimate 32bit
>> Standard Build:
>> set C_USR=-DHB_FM_STATISTICS_OFF
>> set HB_BUILD_ST=
> 
> I would like to ask you about yet another test without DL-MALLOC
> which is now enabled by default.
> Please recompile Harbour with -DHB_FM_STD_ALLOC and check the results
> again.
> 

Here the new test

set C_USR=-DHB_FM_STATISTICS_OFF -DHB_FM_STD_ALLOC
set HB_BUILD_ST=

Harbour Terminal: Windows native console
Harbour 1.1.0dev (Rev. 9542)
Windows Vista 6.0.6001 Service Pack 1
DS avail=2025492KB  OS avail=2064556KB  EMM avail=0KB  MemStat:Off

Startup loop to increase CPU clock...
10/04/08 11:15:32 Windows Vista 6.0.6001 Service Pack 1
Harbour 1.1.0dev (Rev. 9542) Borland C++ 5.5.1 (32 bit)
N_LOOPS =    1000000
                                                    ST    MT   MT+
[ empty loop overhead ]..........................0.09..0.09..0.09
=================================================================
[ x := L_C ].....................................0.09..0.12.11.08
[ x := L_N ].....................................0.08..0.09..8.10
[ x := L_D ].....................................0.08..0.09..8.60
[ x := S_C ].....................................0.09..0.14.10.23
[ x := S_N ].....................................0.08..0.08..9.86
[ x := S_D ].....................................0.08..0.09..8.85
[ x := M_C ].....................................0.09..0.16.10.95
[ x := M_N ].....................................0.08..0.11..8.86
[ x := M_D ].....................................0.09..0.11..9.70
[ x := P_C ].....................................0.09..0.16.10.08
[ x := P_N ].....................................0.09..0.11..9.95
[ x := P_D ].....................................0.09..0.11..8.80
[ x := F_C ].....................................0.17..0.30.28.72
[ x := F_N ].....................................0.22..0.23.13.38
[ x := F_D ].....................................0.12..0.12.11.20
[ x := o:GenCode ]...............................0.23..0.31.16.30
[ x := 0 ].......................................0.03..0.06..6.88
[ round( i / 1000, 2 ) ].........................0.27..0.31.18.00
[ str( i / 1000 ) ]..............................0.72..0.98.34.43
[ val( s ) ].....................................0.28..0.36.17.28
[ val( a [ i % 16 + 1 ] ) ]......................0.55..0.67.24.73
[ dtos( d - i % 10000 ) ]........................0.47..0.69.35.74
[ eval( { || i % 16 } ) ]........................0.41..0.94.41.08
[ eval( bc := { || i % 16 } ) ]..................0.28..0.39.19.31
[ eval( { |x| x % 16 }, i ) ]....................0.37..0.75.34.24
[ eval( bc := { |x| x % 16 }, i ) ]..............0.34..0.44.18.64
[ eval( { |x| f1( x ) }, i ) ]...................0.55..0.94.35.51
[ eval( bc := { |x| f1( x ) }, i ) ].............0.50..0.64.21.56
[ x := &( "f1(" + str(i) + ")" ) ]...............2.89..4.40.57.16
[ bc := &( "{|x|f1(x)}" ); eval( bc, i ) ].......3.70..5.40.56.43
[ x := valtype( x ) +  valtype( i ) ]............0.56..0.76.30.78
[ x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ].1.09..1.37.31.90
[ x := a[ i % 16 + 1 ] == s ]....................0.45..0.58.22.28
[ x := a[ i % 16 + 1 ] = s ].....................0.48..0.62.20.92
[ x := a[ i % 16 + 1 ] >= s ]....................0.47..0.64.23.06
[ x := a[ i % 16 + 1 ] <= s ]....................0.47..0.61.21.04
[ x := a[ i % 16 + 1 ] < s ].....................0.47..0.62.22.93
[ x := a[ i % 16 + 1 ] > s ].....................0.47..0.62.20.95
[ ascan( a, i % 16 ) ]...........................0.36..0.47.19.98
[ ascan( a, { |x| x == i % 16 } ) ]..............3.85..5.46.46.89
[ if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2,a.1.84..2.85.39.84
[ x := a ].......................................0.09..0.14.11.17
[ x := {} ]......................................0.14..0.37.28.53
[ f0() ].........................................0.11..0.16.12.23
[ f1( i ) ]......................................0.20..0.28.15.71
[ f2( c[1...8] ) ]...............................0.17..0.25.16.15
[ f2( c[1...40000] ) ]...........................0.17..0.25.15.52
[ f2( @c[1...40000] ) ]..........................0.17..0.27.15.52
[ f2( @c[1...40000] ), c2 := c ].................0.22..0.31.16.93
[ f3( a, a2, s, i, s2, bc, i, n, x ) ]...........0.78..0.89.21.50
[ f2( a ) ]......................................0.20..0.27.15.49
[ x := f4() ]....................................0.70..0.92.29.70
[ x := f5() ]....................................0.30..0.53.31.50
=================================================================
[ total application time: ].....................31.89.43.52.60.45
[ total real time: ]............................32.24.43.73.32.91

Best regards

Francesco
From e.m.giordano at emagsoftware.it  Sat Oct  4 06:37:28 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Oct  4 06:37:36 2008
Subject: [Harbour] 2008-10-03 21:53 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
References: <20081003195350.GA808@34-mo7-2.acn.waw.pl><124D77CB2DB5426A8A4F846811BABB1F@emag>
	<20081003221152.GC30818@34-mo7-2.acn.waw.pl>
Message-ID: <7E099F4591194963BEFCBEB163716E5F@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 4 ottobre 2008 0.11
Oggetto: Re: [Harbour] 2008-10-03 21:53 UTC+0200 
PrzemyslawCzerpak(druzus/at/priv.onet.pl)


> > Przemek, can you fix these?
> > Harbour 1.1.0dev (Rev. 9542)
> > Copyright (c) 1999-2008, http://www.harbour-project.org/
> > SPEEDTST.prg(147) Error E0003  Duplicate variable declaration 'M_C'
> > SPEEDTST.prg(150) Error E0003  Duplicate variable declaration 'M_N'
> > SPEEDTST.prg(153) Error E0003  Duplicate variable declaration 'M_D'
> > SPEEDTST.prg(156) Error E0003  Duplicate variable declaration 'P_C'
> > SPEEDTST.prg(159) Error E0003  Duplicate variable declaration 'P_N'
> > SPEEDTST.prg(162) Error E0003  Duplicate variable declaration 'P_D'
>
> The code is correct but you are using -a Harbour switch.
> This is exactly the same behavior as in Clipper.

Yes, I always use -a switch, sorry.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Sat Oct  4 08:59:55 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Oct  4 09:00:04 2008
Subject: [Harbour] Speedtst results
Message-ID: <410FBA994E644DA3A5DA014B4FF1BC11@emag>

CPU: Intel Core 2 CPU 6320 - 2 GB RAM

ST

Startup loop to increase CPU clock...
10/04/08 14:49:39 Windows XP 5.1.2600 Service Pack 3
Harbour 1.1.0dev (Rev. 9542) Borland C++ 5.5.1 (32 bit)
N_LOOPS =    1000000
[ empty loop overhead ].........................................0.08
====================================================================
[ x := L_C ]....................................................0.08
[ x := L_N ]....................................................0.06
[ x := L_D ]....................................................0.06
[ x := S_C ]....................................................0.13
[ x := S_N ]....................................................0.11
[ x := S_D ]....................................................0.11
[ x := M_C ]....................................................0.13
[ x := M_N ]....................................................0.13
[ x := M_D ]....................................................0.13
[ x := P_C ]....................................................0.14
[ x := P_N ]....................................................0.13
[ x := P_D ]....................................................0.11
[ x := F_C ]....................................................0.20
[ x := F_N ]....................................................0.31
[ x := F_D ]....................................................0.17
[ x := o:GenCode ]..............................................0.28
[ x := 0 ]......................................................0.00
[ round( i / 1000, 2 ) ]........................................0.34
[ str( i / 1000 ) ].............................................1.08
[ val( s ) ]....................................................0.38
[ val( a [ i % 16 + 1 ] ) ].....................................0.70
[ dtos( d - i % 10000 ) ].......................................0.61
[ eval( { || i % 16 } ) ].......................................0.64
[ eval( bc := { || i % 16 } ) ].................................0.44
[ eval( { |x| x % 16 }, i ) ]...................................0.52
[ eval( bc := { |x| x % 16 }, i ) ].............................0.45
[ eval( { |x| f1( x ) }, i ) ]..................................0.67
[ eval( bc := { |x| f1( x ) }, i ) ]............................0.63
[ x := &( "f1(" + str(i) + ")" ) ]..............................3.64
[ bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]......................4.48
[ x := valtype( x ) +  valtype( i ) ]...........................0.64
[ x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ]................1.33
[ x := a[ i % 16 + 1 ] == s ]...................................0.58
[ x := a[ i % 16 + 1 ] = s ]....................................0.59
[ x := a[ i % 16 + 1 ] >= s ]...................................0.63
[ x := a[ i % 16 + 1 ] <= s ]...................................0.59
[ x := a[ i % 16 + 1 ] < s ]....................................0.61
[ x := a[ i % 16 + 1 ] > s ]....................................0.61
[ ascan( a, i % 16 ) ]..........................................0.48
[ ascan( a, { |x| x == i % 16 } ) ].............................4.88
[ if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2,a2,bc}) ]........1.58
[ x := a ]......................................................0.08
[ x := {} ].....................................................0.19
[ f0() ]........................................................0.11
[ f1( i ) ].....................................................0.25
[ f2( c[1...8] ) ]..............................................0.19
[ f2( c[1...40000] ) ]..........................................0.20
[ f2( @c[1...40000] ) ].........................................0.19
[ f2( @c[1...40000] ), c2 := c ]................................0.22
[ f3( a, a2, s, i, s2, bc, i, n, x ) ]..........................0.80
[ f2( a ) ].....................................................0.19
[ x := f4() ]...................................................4.39
[ x := f5() ]...................................................0.36
====================================================================
[ total application time: ]....................................40.75
[ total real time: ]...........................................40.83

MT

Startup loop to increase CPU clock...
10/04/08 14:58:19 Windows XP 5.1.2600 Service Pack 3
Harbour 1.1.0dev (Rev. 9542) (MT) Borland C++ 5.5.1 (32 bit)
N_LOOPS =    1000000
[ empty loop overhead ].........................................0.08
====================================================================
[ x := L_C ]....................................................0.14
[ x := L_N ]....................................................0.06
[ x := L_D ]....................................................0.06
[ x := S_C ]....................................................0.19
[ x := S_N ]....................................................0.13
[ x := S_D ]....................................................0.13
[ x := M_C ]....................................................0.19
[ x := M_N ]....................................................0.14
[ x := M_D ]....................................................0.14
[ x := P_C ]....................................................0.19
[ x := P_N ]....................................................0.14
[ x := P_D ]....................................................0.14
[ x := F_C ]....................................................0.38
[ x := F_N ]....................................................0.31
[ x := F_D ]....................................................0.19
[ x := o:GenCode ]..............................................0.41
[ x := 0 ]......................................................0.03
[ round( i / 1000, 2 ) ]........................................0.44
[ str( i / 1000 ) ].............................................1.08
[ val( s ) ]....................................................0.45
[ val( a [ i % 16 + 1 ] ) ].....................................0.88
[ dtos( d - i % 10000 ) ].......................................0.88
[ eval( { || i % 16 } ) ].......................................1.16
[ eval( bc := { || i % 16 } ) ].................................0.53
[ eval( { |x| x % 16 }, i ) ]...................................0.88
[ eval( bc := { |x| x % 16 }, i ) ].............................0.55
[ eval( { |x| f1( x ) }, i ) ]..................................1.09
[ eval( bc := { |x| f1( x ) }, i ) ]............................0.78
[ x := &( "f1(" + str(i) + ")" ) ]..............................5.55
[ bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]......................6.92
[ x := valtype( x ) +  valtype( i ) ]...........................0.98
[ x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ]................1.59
[ x := a[ i % 16 + 1 ] == s ]...................................0.75
[ x := a[ i % 16 + 1 ] = s ]....................................0.81
[ x := a[ i % 16 + 1 ] >= s ]...................................0.81
[ x := a[ i % 16 + 1 ] <= s ]...................................0.81
[ x := a[ i % 16 + 1 ] < s ]....................................0.81
[ x := a[ i % 16 + 1 ] > s ]....................................0.83
[ ascan( a, i % 16 ) ]..........................................0.66
[ ascan( a, { |x| x == i % 16 } ) ].............................6.77
[ if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2,a2,bc}) ]........2.53
[ x := a ]......................................................0.16
[ x := {} ].....................................................0.48
[ f0() ]........................................................0.17
[ f1( i ) ].....................................................0.30
[ f2( c[1...8] ) ]..............................................0.31
[ f2( c[1...40000] ) ]..........................................0.31
[ f2( @c[1...40000] ) ].........................................0.31
[ f2( @c[1...40000] ), c2 := c ]................................0.34
[ f3( a, a2, s, i, s2, bc, i, n, x ) ]..........................1.11
[ f2( a ) ].....................................................0.31
[ x := f4() ]...................................................4.80
[ x := f5() ]...................................................0.77
====================================================================
[ total application time: ]....................................55.09
[ total real time: ]...........................................55.20

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic

From toninhofwi at yahoo.com.br  Sat Oct  4 13:09:07 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sat Oct  4 13:02:28 2008
Subject: [Harbour] 2008-10-03 09:04 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c92526$Blat.v2.6.2$8c16d9a4$a3c76f3ddae@127.0.0.1>
References: <01c92526$Blat.v2.6.2$8c16d9a4$a3c76f3ddae@127.0.0.1>
Message-ID: <3p8fe4pq02pp93gbuuc1edgphe19moa99n@4ax.com>

Hi Viktor, with bcc 6.10 I get:

MAKE Version 5.3  Copyright (c) 1987, 2008 CodeGear
	bcc32.exe -c -q -d -w -w-sig- -O2 -OS -Ov -Oi -Oc
-I..\..\include -DHB_GUI -DHB_FM_STATISTICS_OFF -DHB_NO_PROFILER
-DADS_LIB_VERSION=700 -DHB_HASH_MSG_ITEMS -DHB_FM_DL_ALLOC
-oobj\b32\ole2.obj .\ole2.c
.\ole2.c:
Error E2451 .\ole2.c 420: Undefined symbol 'excep' in function
HB_FUN_OLEEXCEPTIONSOURCE
Error E2342 .\ole2.c 426: Type mismatch in parameter 'szText' (wanted
'signed char *', got 'int') in function HB_FUN_OLEEXCEPTIONDESCRIPTION
*** 4 errors in Compile ***

Regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From info at fsgiudice.com  Sat Oct  4 13:38:40 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Oct  4 13:38:55 2008
Subject: [Harbour] 2008-10-04 19:36 UTC+0100 Francesco Saverio Giudice (info
	at fsgiudice dot com)
Message-ID: <48E7AA20.5050107@fsgiudice.com>

2008-10-04 19:36 UTC+0100 Francesco Saverio Giudice (info at fsgiudice 
dot com)
   * contrib/hbwhat/wincore.prg
     * HB_Exec() changed to HB_ExecFromArray()
       Now contrib/hbwhat/tests/whatdemo.prg can be compiled and runs


Best Regards

Francesco
From harbour.01 at syenar.hu  Sat Oct  4 14:35:01 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct  4 14:35:05 2008
Subject: [Harbour] 2008-10-04 20:34 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9264f$Blat.v2.6.2$e97251a8$13fcf5a39fb6@127.0.0.1>

2008-10-04 20:34 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbole/ole2.c
    ! Fixed errors in previous commit. Thanks Toninho.

  * contrib/hbwin/win_ole.c
    ! Prefixed remaining static variables with 's_'.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Sat Oct  4 15:23:31 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct  4 15:23:44 2008
Subject: [Harbour] 2008-10-04 21:23 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081004192331.GA11680@34-mo7-2.acn.waw.pl>

2008-10-04 21:23 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/fm.c
    ! do not build DL-MM when HB_FM_WIN32_ALLOC is set

  * harbour/tests/speedtst.prg
    + added support for --exclude=<tests,...> option to exclude some tests,
      f.e.:
         ./speetest --exclude=029.030.023.025.027.040.041.043.052.053.019.022.031.032
      disables all tests which allocates memory. The same tests can be also
      excluded by --exclude=mem

best regards
Przemek
From druzus at acn.waw.pl  Sat Oct  4 15:41:42 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct  4 15:41:55 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <48E73E0D.9030109@fsgiudice.com>
References: <20081002183352.GA30587@34-mo7-2.acn.waw.pl>
	<48E5D29B.4030808@libero.it>
	<20081003113240.GA12991@34-mo7-2.acn.waw.pl>
	<48E6311D.9010102@libero.it> <48E63559.8020704@libero.it>
	<48E6388A.8020202@libero.it>
	<20081003162348.GA15016@34-mo7-2.acn.waw.pl>
	<48E68C3C.60901@fsgiudice.com>
	<20081003231342.GA23387@34-mo7-2.acn.waw.pl>
	<48E73E0D.9030109@fsgiudice.com>
Message-ID: <20081004194142.GA6761@34-mo7-2.acn.waw.pl>

On Sat, 04 Oct 2008, Francesco Saverio Giudice wrote:

Hi Francesco,

Many thanks for your results.
Looks that there in no important difference between DL-MM and BCC-MM in
real MT programs in your system. DL has a little bit better performance.
In my test in Linux DL-MM in MT mode was killing the performance
in MT+ test in comparison to default SUSE malloc when in ST mode
it gives nearly the same results. The difference is such huge that
Harbour overhead is unimportant at all and it's even hard to measure.
So I would like to also test the performance without memory allocation
in Windows. I've just added --exclude option to which allows to disable
all tests which allocates memory in test loop.
If possible please also make this tests again using current SVN speedtst
with option --exclude=mem, f.e.:
   speetst.exe --exclude=mem
It doesn't matter which memory manager you will use. You can use the
default one.

Once again many thanks for your help.

best regards,
Przemek
From druzus at acn.waw.pl  Sat Oct  4 15:47:21 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct  4 15:47:35 2008
Subject: [Harbour] Speedtst results
In-Reply-To: <410FBA994E644DA3A5DA014B4FF1BC11@emag>
References: <410FBA994E644DA3A5DA014B4FF1BC11@emag>
Message-ID: <20081004194721.GB6761@34-mo7-2.acn.waw.pl>

On Sat, 04 Oct 2008, Enrico Maria Giordano wrote:

Hi Enrico,

> CPU: Intel Core 2 CPU 6320 - 2 GB RAM
> ST
> 10/04/08 14:49:39 Windows XP 5.1.2600 Service Pack 3
> Harbour 1.1.0dev (Rev. 9542) Borland C++ 5.5.1 (32 bit)
> [ total application time: ]....................................40.75
> [ total real time: ]...........................................40.83
>
> MT
> 10/04/08 14:58:19 Windows XP 5.1.2600 Service Pack 3
> Harbour 1.1.0dev (Rev. 9542) (MT) Borland C++ 5.5.1 (32 bit)
> [ total application time: ]....................................55.09
> [ total real time: ]...........................................55.20

Thanks for the tests.
The MT overhead in pure PCODE evaluation is ~35%. Similar to other MS-WIN
results.
If possible please also try speedtst with some additional parameter
to check results when tests are executed simultenously in different
threads, f.e.:
   speedtst.exe 1

And if you can then please also take current SVN speedtst and
repeat all 3 tests with --exclude=mem parameter.

Best regards,
Przemek
From info at fsgiudice.com  Sat Oct  4 15:50:17 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Oct  4 15:50:38 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <20081004194142.GA6761@34-mo7-2.acn.waw.pl>
References: <20081002183352.GA30587@34-mo7-2.acn.waw.pl>	<48E5D29B.4030808@libero.it>	<20081003113240.GA12991@34-mo7-2.acn.waw.pl>	<48E6311D.9010102@libero.it>
	<48E63559.8020704@libero.it>	<48E6388A.8020202@libero.it>	<20081003162348.GA15016@34-mo7-2.acn.waw.pl>	<48E68C3C.60901@fsgiudice.com>	<20081003231342.GA23387@34-mo7-2.acn.waw.pl>	<48E73E0D.9030109@fsgiudice.com>
	<20081004194142.GA6761@34-mo7-2.acn.waw.pl>
Message-ID: <48E7C8F9.80004@fsgiudice.com>

Hi Przemek,

Przemyslaw Czerpak ha scritto:
> On Sat, 04 Oct 2008, Francesco Saverio Giudice wrote:
> 
> Hi Francesco,
> 
> Many thanks for your results.
> Looks that there in no important difference between DL-MM and BCC-MM in
> real MT programs in your system. DL has a little bit better performance.
> In my test in Linux DL-MM in MT mode was killing the performance
> in MT+ test in comparison to default SUSE malloc when in ST mode
> it gives nearly the same results. The difference is such huge that
> Harbour overhead is unimportant at all and it's even hard to measure.
> So I would like to also test the performance without memory allocation
> in Windows. I've just added --exclude option to which allows to disable
> all tests which allocates memory in test loop.
> If possible please also make this tests again using current SVN speedtst
> with option --exclude=mem, f.e.:
>    speetst.exe --exclude=mem
> It doesn't matter which memory manager you will use. You can use the
> default one.
> 
> Once again many thanks for your help.
> 

I was already compiling after your changelog ;-)

Here results:

J:\cvs\harbourSVN_trunk\tests>speedtst.exe //info
Harbour Terminal: Windows native console
Harbour 1.1.0dev (Rev. 9545)
Windows Vista 6.0.6001 Service Pack 1
DS avail=1352780KB  OS avail=2064552KB  EMM avail=0KB  MemStat:Off  MT:Off

10/04/08 21:37:25 Windows Vista 6.0.6001 Service Pack 1
Harbour 1.1.0dev (Rev. 9545) Borland C++ 5.5.1 (32 bit)
N_LOOPS =    1000000
                                                        ST    MT   MT+
[ empty loop overhead ]..............................0.09..0.09..0.09
=====================================================================
[ x := L_C ].........................................0.09..0.12..4.10
[ x := L_N ].........................................0.06..0.09..9.20
[ x := L_D ].........................................0.09..0.14..3.04
[ x := S_C ].........................................0.11..0.16.11.93
[ x := S_N ].........................................0.12..0.11..2.92
[ x := S_D ].........................................0.09..0.09.11.89
[ x := M_C ].........................................0.09..0.14..5.87
[ x := M_N ].........................................0.08..0.11.11.72
[ x := M_D ].........................................0.08..0.09..4.98
[ x := P_C ].........................................0.11..0.12.12.90
[ x := P_N ].........................................0.11..0.08..7.85
[ x := P_D ].........................................0.09..0.09.11.70
[ x := F_C ].........................................0.16..0.30.25.33
[ x := F_N ].........................................0.19..0.25.15.97
[ x := F_D ].........................................0.09..0.11..9.31
[ x := o:GenCode ]...................................0.27..0.30.18.50
[ x := o[8] ]........................................0.22..0.23.12.68
[ round( i / 1000, 2 ) ].............................0.23..0.31.20.40
[ str( i / 1000 ) ]..................................0.84..1.00.35.46
[ val( s ) ].........................................0.30..0.33.19.28
[ val( a [ i % 16 + 1 ] ) ]..........................0.62..0.75.23.31
[ dtos( d - i % 10000 ) ]............................0.44..0.73.37.49
[ eval( { || i % 16 } ) ]............................0.39..0.97.41.51
[ eval( bc := { || i % 16 } ) ]......................0.30..0.42.21.23
[ eval( { |x| x % 16 }, i ) ]........................0.41..0.70.34.48
[ eval( bc := { |x| x % 16 }, i ) ]..................0.33..0.44.21.68
[ eval( { |x| f1( x ) }, i ) ].......................0.50..0.92.34.41
[ eval( bc := { |x| f1( x ) }, i ) ].................0.55..0.67.24.41
[ x := &( "f1(" + str(i) + ")" ) ]...................3.01..4.40.56.18
[ bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]...........3.56..5.38.60.04
[ x := valtype( x ) +  valtype( i ) ]................0.51..0.81.34.01
[ x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ].....1.09..1.37.34.98
[ x := a[ i % 16 + 1 ] == s ]........................0.48..0.50.21.42
[ x := a[ i % 16 + 1 ] = s ].........................0.51..0.59.23.93
[ x := a[ i % 16 + 1 ] >= s ]........................0.51..0.64.21.84
[ x := a[ i % 16 + 1 ] <= s ]........................0.50..0.66.23.93
[ x := a[ i % 16 + 1 ] < s ].........................0.53..0.62.21.78
[ x := a[ i % 16 + 1 ] > s ].........................0.48..0.66.24.15
[ ascan( a, i % 16 ) ]...............................0.31..0.48.18.39
[ ascan( a, { |x| x == i % 16 } ) ]..................3.87..5.37.50.59
[ if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2,a2,b..1.73..2.14.38.74
[ x := a ]...........................................0.09..0.12.13.65
[ x := {} ]..........................................0.12..0.39.27.77
[ f0() ].............................................0.11..0.12.13.82
[ f1( i ) ]..........................................0.22..0.27.14.09
[ f2( c[1...8] ) ]...................................0.19..0.28.18.89
[ f2( c[1...40000] ) ]...............................0.22..0.30.14.60
[ f2( @c[1...40000] ) ]..............................0.22..0.23.18.24
[ f2( @c[1...40000] ), c2 := c ].....................0.23..0.27.15.48
[ f3( a, a2, s, i, s2, bc, i, n, x ) ]...............0.72..0.90.24.40
[ f2( a ) ]..........................................0.20..0.30.14.38
[ x := f4() ]........................................0.69..0.92.33.79
[ x := f5() ]........................................0.34..0.55.31.11
=====================================================================
[ total application time: ].........................32.40.43.04.61.12
[ total real time: ]................................33.68.44.35.33.60


J:\cvs\harbourSVN_trunk\tests>speedtst.exe --exclude=mem //info
Harbour Terminal: Windows native console
Harbour 1.1.0dev (Rev. 9545)
Windows Vista 6.0.6001 Service Pack 1
DS avail=1349184KB  OS avail=2064552KB  EMM avail=0KB  MemStat:Off  MT:Off

10/04/08 21:41:51 Windows Vista 6.0.6001 Service Pack 1
Harbour 1.1.0dev (Rev. 9545) Borland C++ 5.5.1 (32 bit)
N_LOOPS =    1000000
                                                        ST    MT   MT+
[ empty loop overhead ]..............................0.08..0.09..0.08
=====================================================================
[ x := L_C ].........................................0.11..0.14..2.04
[ x := L_N ].........................................0.09..0.11..8.74
[ x := L_D ].........................................0.09..0.11..0.87
[ x := S_C ].........................................0.09..0.17.10.87
[ x := S_N ].........................................0.09..0.08..8.97
[ x := S_D ].........................................0.09..0.09..9.70
[ x := M_C ].........................................0.11..0.16.10.81
[ x := M_N ].........................................0.12..0.11.10.56
[ x := M_D ].........................................0.12..0.11.10.02
[ x := P_C ].........................................0.09..0.16.11.53
[ x := P_N ].........................................0.12..0.09..9.98
[ x := P_D ].........................................0.12..0.11.10.62
[ x := F_C ].........................................0.20..0.31.14.52
[ x := F_N ].........................................0.25..0.27.14.63
[ x := F_D ].........................................0.14..0.14.10.19
[ x := o:GenCode ]...................................0.25..0.33.16.02
[ x := o[8] ]........................................0.25..0.23.13.42
[ round( i / 1000, 2 ) ].............................0.30..0.36.17.11
[ val( s ) ].........................................0.27..0.36.16.19
[ val( a [ i % 16 + 1 ] ) ]..........................0.56..0.70.20.23
[ eval( bc := { || i % 16 } ) ]......................0.28..0.39.16.91
[ eval( bc := { |x| x % 16 }, i ) ]..................0.37..0.45.18.77
[ eval( bc := { |x| f1( x ) }, i ) ].................0.51..0.61.19.08
[ x := a[ i % 16 + 1 ] == s ]........................0.53..0.61.20.06
[ x := a[ i % 16 + 1 ] = s ].........................0.53..0.67.18.83
[ x := a[ i % 16 + 1 ] >= s ]........................0.50..0.62.20.20
[ x := a[ i % 16 + 1 ] <= s ]........................0.50..0.62.18.74
[ x := a[ i % 16 + 1 ] < s ].........................0.50..0.66.20.28
[ x := a[ i % 16 + 1 ] > s ].........................0.51..0.69.18.75
[ ascan( a, i % 16 ) ]...............................0.37..0.48.19.42
[ x := a ]...........................................0.14..0.14.10.31
[ f0() ].............................................0.14..0.12.11.56
[ f1( i ) ]..........................................0.23..0.27.14.77
[ f2( c[1...8] ) ]...................................0.17..0.25.16.05
[ f2( c[1...40000] ) ]...............................0.19..0.28.15.21
[ f2( @c[1...40000] ) ]..............................0.19..0.25.16.01
[ f2( @c[1...40000] ), c2 := c ].....................0.23..0.34.15.68
[ f3( a, a2, s, i, s2, bc, i, n, x ) ]...............0.80..0.90.20.14
[ f2( a ) ]..........................................0.22..0.22.14.98
=====================================================================
[ total application time: ].........................13.49.16.36.21.26
[ total real time: ]................................13.62.16.56.10.95

Now, without memory allocations, it seems very good !

Best Regards

Francesco


From druzus at acn.waw.pl  Sat Oct  4 15:52:58 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct  4 15:53:11 2008
Subject: [Harbour] 2008-10-03 21:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <D455E9B8-A5CB-4024-B70F-95171A751CAE@syenar.hu>
References: <20081003195350.GA808@34-mo7-2.acn.waw.pl>
	<ABA2DC77-5008-4239-9BBE-92C488B05E8B@syenar.hu>
	<20081003212701.GA30818@34-mo7-2.acn.waw.pl>
	<36526717-CECB-4A85-AB21-5F1FBD0B9081@syenar.hu>
	<20081003234254.GB23387@34-mo7-2.acn.waw.pl>
	<D455E9B8-A5CB-4024-B70F-95171A751CAE@syenar.hu>
Message-ID: <20081004195258.GC6761@34-mo7-2.acn.waw.pl>

On Sat, 04 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> MinGW results attached. [ All with -gc3 for Harbour and
> default -gc0 for speedtst. ]

Many thanks, As most of other MS-Win results you have quite big
differences in the same tests on each execution. It looks like
it depend on some OS related issue. Please check if current SVN
speedtst with --exclude=mem also gives such big differences.
And of course send the results with above option for ST, MT and MT+
in one of Harbour-MS-Win builds you are using. You can use -gc3.

best regards,
Przemek
From druzus at acn.waw.pl  Sat Oct  4 16:02:36 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct  4 16:02:53 2008
Subject: [Harbour] Re: 2008-10-03 21:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48E6CDD1.9080400@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48E6CDD1.9080400@mail.udg.mx>
Message-ID: <20081004200236.GD6761@34-mo7-2.acn.waw.pl>

On Fri, 03 Oct 2008, David Arturo Macias Corona wrote:

Hi David,

>>> I guess that HT means Hyper Thread CPU with two cores.
>>> Am I right?
>> You're right. It's a Northwood HT, first generation HT AFAIR.
> Intel HT (HyperThreading) is ONE physical CPU with TWO logical CPU
> Is just ONE core

I'm not hardware specialist but in modern constructions it's very hard
to define the CPU separation. Processor(s) are in one unit but SMP
performance is much better then in some older constructions which used
separated CPUs. For me as programmer only logical layer is important
if it gives real multi CPU performance.

> To benefit applications must be developed for multi-thread,

current speedtst.prg is multi thread. When you run it with nonempty
parameter then it executes simultaneously each test loop in separate
thread

> and/or OS with SMP kernels

In current days it's also not a problem because popular systems comes
with SMP kernel with default installation. Sometimes they have two
kernels and chose the optimal one during installation after hardware
tests.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Sat Oct  4 16:15:44 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Oct  4 16:15:51 2008
Subject: [Harbour] Speedtst results
References: <410FBA994E644DA3A5DA014B4FF1BC11@emag>
	<20081004194721.GB6761@34-mo7-2.acn.waw.pl>
Message-ID: <983CCE84F0C24F3EB1250B6FDE6872FF@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 4 ottobre 2008 21.47
Oggetto: Re: [Harbour] Speedtst results


> If possible please also try speedtst with some additional parameter
> to check results when tests are executed simultenously in different
> threads, f.e.:
>   speedtst.exe 1

Startup loop to increase CPU clock...
10/04/08 22:13:35 Windows XP 5.1.2600 Service Pack 3
Harbour 1.1.0dev (Rev. 9545) (MT) Borland C++ 5.5.1 (32 bit)
N_LOOPS =    1000000
[ empty loop overhead ].........................................0.08
====================================================================
[ x := L_C ]....................................................1.42
[ x := L_N ]....................................................0.23
[ x := L_D ]....................................................0.86
[ x := S_C ]....................................................0.92
[ x := S_N ]....................................................1.25
[ x := S_D ]....................................................1.22
[ x := M_C ]....................................................1.78
[ x := M_N ]....................................................1.17
[ x := M_D ]....................................................1.19
[ x := P_C ]....................................................1.06
[ x := P_N ]....................................................2.33
[ x := P_D ]....................................................2.05
[ x := F_C ]....................................................3.50
[ x := F_N ]....................................................3.22
[ x := F_D ]....................................................1.77
[ x := o:GenCode ]..............................................4.80
[ x := 0 ]......................................................0.98
[ round( i / 1000, 2 ) ]........................................5.05
[ str( i / 1000 ) ]............................................33.22
[ val( s ) ]....................................................5.95
[ val( a [ i % 16 + 1 ] ) ].....................................9.86
[ dtos( d - i % 10000 ) ]......................................30.00
[ eval( { || i % 16 } ) ]......................................38.33
[ eval( bc := { || i % 16 } ) ].................................6.30
[ eval( { |x| x % 16 }, i ) ]..................................32.69
[ eval( bc := { |x| x % 16 }, i ) ].............................7.08
[ eval( { |x| f1( x ) }, i ) ].................................38.27
[ eval( bc := { |x| f1( x ) }, i ) ]............................8.83
[ x := &( "f1(" + str(i) + ")" ) ].............................67.31
[ bc := &( "{|x|f1(x)}" ); eval( bc, i ) ].....................68.50
[ x := valtype( x ) +  valtype( i ) ]..........................24.41
[ x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ]...............33.22
[ x := a[ i % 16 + 1 ] == s ]...................................7.56
[ x := a[ i % 16 + 1 ] = s ]....................................7.94
[ x := a[ i % 16 + 1 ] >= s ]...................................8.38
[ x := a[ i % 16 + 1 ] <= s ]...................................7.22
[ x := a[ i % 16 + 1 ] < s ]....................................8.45
[ x := a[ i % 16 + 1 ] > s ]....................................8.75
[ ascan( a, i % 16 ) ]..........................................6.00
[ ascan( a, { |x| x == i % 16 } ) ]............................38.92
[ if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2,a2,bc}) ].......37.88
[ x := a ]......................................................2.08
[ x := {} ]....................................................25.67
[ f0() ]........................................................2.22
[ f1( i ) ].....................................................2.38
[ f2( c[1...8] ) ]..............................................3.38
[ f2( c[1...40000] ) ]..........................................3.73
[ f2( @c[1...40000] ) ].........................................2.38
[ f2( @c[1...40000] ), c2 := c ]................................3.70
[ f3( a, a2, s, i, s2, bc, i, n, x ) ]..........................3.91
[ f2( a ) ].....................................................2.94
[ x := f4() ]..................................................29.53
[ x := f5() ]..................................................28.19
====================================================================
[ total application time: ]....................................72.56
[ total real time: ]...........................................37.52

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic

From e.m.giordano at emagsoftware.it  Sat Oct  4 16:23:19 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Oct  4 16:23:26 2008
Subject: [Harbour] Speedtst results
References: <410FBA994E644DA3A5DA014B4FF1BC11@emag>
	<20081004194721.GB6761@34-mo7-2.acn.waw.pl>
Message-ID: <AD53D6D8763645B19F7228C510DA432B@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 4 ottobre 2008 21.47
Oggetto: Re: [Harbour] Speedtst results


> And if you can then please also take current SVN speedtst and
> repeat all 3 tests with --exclude=mem parameter.

ST

Startup loop to increase CPU clock...
10/04/08 22:16:50 Windows XP 5.1.2600 Service Pack 3
Harbour 1.1.0dev (Rev. 9545) Borland C++ 5.5.1 (32 bit)
N_LOOPS =    1000000
[ empty loop overhead ].........................................0.06
====================================================================
[ x := L_C ]....................................................0.09
[ x := L_N ]....................................................0.08
[ x := L_D ]....................................................0.08
[ x := S_C ]....................................................0.14
[ x := S_N ]....................................................0.13
[ x := S_D ]....................................................0.13
[ x := M_C ]....................................................0.14
[ x := M_N ]....................................................0.14
[ x := M_D ]....................................................0.14
[ x := P_C ]....................................................0.14
[ x := P_N ]....................................................0.13
[ x := P_D ]....................................................0.14
[ x := F_C ]....................................................0.25
[ x := F_N ]....................................................0.33
[ x := F_D ]....................................................0.17
[ x := o:GenCode ]..............................................0.30
[ x := 0 ]......................................................0.02
[ round( i / 1000, 2 ) ]........................................0.33
[ str( i / 1000 ) ].............................................1.09
[ val( s ) ]....................................................0.39
[ val( a [ i % 16 + 1 ] ) ].....................................0.70
[ dtos( d - i % 10000 ) ].......................................0.59
[ eval( { || i % 16 } ) ].......................................0.66
[ eval( bc := { || i % 16 } ) ].................................0.47
[ eval( { |x| x % 16 }, i ) ]...................................0.53
[ eval( bc := { |x| x % 16 }, i ) ].............................0.47
[ eval( { |x| f1( x ) }, i ) ]..................................0.70
[ eval( bc := { |x| f1( x ) }, i ) ]............................0.64
[ x := &( "f1(" + str(i) + ")" ) ]..............................3.58
[ bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]......................4.75
[ x := valtype( x ) +  valtype( i ) ]...........................0.64
[ x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ]................1.34
[ x := a[ i % 16 + 1 ] == s ]...................................0.59
[ x := a[ i % 16 + 1 ] = s ]....................................0.63
[ x := a[ i % 16 + 1 ] >= s ]...................................0.63
[ x := a[ i % 16 + 1 ] <= s ]...................................0.63
[ x := a[ i % 16 + 1 ] < s ]....................................0.61
[ x := a[ i % 16 + 1 ] > s ]....................................0.61
[ ascan( a, i % 16 ) ]..........................................0.50
[ ascan( a, { |x| x == i % 16 } ) ].............................4.91
[ if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2,a2,bc}) ]........1.59
[ x := a ]......................................................0.11
[ x := {} ].....................................................0.22
[ f0() ]........................................................0.13
[ f1( i ) ].....................................................0.25
[ f2( c[1...8] ) ]..............................................0.22
[ f2( c[1...40000] ) ]..........................................0.20
[ f2( @c[1...40000] ) ].........................................0.20
[ f2( @c[1...40000] ), c2 := c ]................................0.23
[ f3( a, a2, s, i, s2, bc, i, n, x ) ]..........................0.83
[ f2( a ) ].....................................................0.22
[ x := f4() ]...................................................4.39
[ x := f5() ]...................................................0.38
====================================================================
[ total application time: ]....................................40.89
[ total real time: ]...........................................40.99

MT

Startup loop to increase CPU clock...
10/04/08 22:20:44 Windows XP 5.1.2600 Service Pack 3
Harbour 1.1.0dev (Rev. 9545) (MT) Borland C++ 5.5.1 (32 bit)
N_LOOPS =    1000000
[ empty loop overhead ].........................................0.08
====================================================================
[ x := L_C ]....................................................1.64
[ x := L_N ]....................................................0.27
[ x := L_D ]....................................................0.67
[ x := S_C ]....................................................1.52
[ x := S_N ]....................................................1.17
[ x := S_D ]....................................................1.30
[ x := M_C ]....................................................2.23
[ x := M_N ]....................................................1.42
[ x := M_D ]....................................................1.33
[ x := P_C ]....................................................1.98
[ x := P_N ]....................................................0.55
[ x := P_D ]....................................................2.86
[ x := F_C ]...................................................19.05
[ x := F_N ]....................................................4.02
[ x := F_D ]....................................................1.42
[ x := o:GenCode ]..............................................4.36
[ x := 0 ]......................................................0.11
[ round( i / 1000, 2 ) ]........................................4.23
[ str( i / 1000 ) ]............................................32.28
[ val( s ) ]....................................................5.48
[ val( a [ i % 16 + 1 ] ) ].....................................6.27
[ dtos( d - i % 10000 ) ]......................................26.69
[ eval( { || i % 16 } ) ]......................................38.77
[ eval( bc := { || i % 16 } ) ].................................7.02
[ eval( { |x| x % 16 }, i ) ]..................................24.41
[ eval( bc := { |x| x % 16 }, i ) ].............................6.17
[ eval( { |x| f1( x ) }, i ) ].................................34.66
[ eval( bc := { |x| f1( x ) }, i ) ]............................7.80
[ x := &( "f1(" + str(i) + ")" ) ].............................62.00
[ bc := &( "{|x|f1(x)}" ); eval( bc, i ) ].....................67.47
[ x := valtype( x ) +  valtype( i ) ]..........................28.23
[ x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ]...............34.92
[ x := a[ i % 16 + 1 ] == s ]...................................5.02
[ x := a[ i % 16 + 1 ] = s ]....................................9.95
[ x := a[ i % 16 + 1 ] >= s ]...................................8.36
[ x := a[ i % 16 + 1 ] <= s ]...................................8.48
[ x := a[ i % 16 + 1 ] < s ]....................................9.23
[ x := a[ i % 16 + 1 ] > s ]...................................10.92
[ ascan( a, i % 16 ) ]..........................................9.08
[ ascan( a, { |x| x == i % 16 } ) ]............................48.33
[ if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2,a2,bc}) ].......42.08
[ x := a ]......................................................2.14
[ x := {} ]....................................................19.50
[ f0() ]........................................................2.39
[ f1( i ) ].....................................................5.33
[ f2( c[1...8] ) ]..............................................5.77
[ f2( c[1...40000] ) ]..........................................5.52
[ f2( @c[1...40000] ) ].........................................5.33
[ f2( @c[1...40000] ), c2 := c ]................................5.80
[ f3( a, a2, s, i, s2, bc, i, n, x ) ].........................10.05
[ f2( a ) ].....................................................5.67
[ x := f4() ]..................................................32.83
[ x := f5() ]..................................................24.11
====================================================================
[ total application time: ]....................................72.17
[ total real time: ]...........................................37.14

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic

From druzus at acn.waw.pl  Sat Oct  4 21:29:53 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct  4 21:30:06 2008
Subject: [Harbour] 2008-10-05 03:29 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081005012953.GA9725@34-mo7-2.acn.waw.pl>

2008-10-05 03:29 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/tests/speedtst.prg
    + added support for multiple usage of --exclude parameter
    + added support for --thread[=<num>] parameter which allows to set how
      many threads will be used to execute speed test. When =<num> is not
      given then each test loop is executed by separate thread, f.e.:
         ./speedtst --thread=3
      Now you can make tests looking for optimal for your system values.
      Please only remember that the total results shown by speedtst
      can be highly bound with the most expensive test loop which is
      finished only on one CPU
    + added support for --only=<testnums,...> parameter which allows to
      chose requested tests
    + added restricted parameter validation and syntax info

best regards
Przemek
From bedipritpal at hotmail.com  Sat Oct  4 22:20:21 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Oct  4 22:20:28 2008
Subject: [Harbour] Harbour Online Help # 8
Message-ID: <19820154.post@talk.nabble.com>


Harbour Online Help # 7   
by Pritpal Bedi Jul 15, 2008; 06:32pm :: Rate this Message:    (use ratings
to moderate[?])

Reply | Reply to Author | Edit | Delete | Show Only this Message 

This message was accepted by the harbour@harbour-project.org mailing list. 
Hello Everybody 

http://www.harbour.vouch.info/

+ Changed look and feel
+ Added harbour, doc, include, folder files.
+ Rearranged Harbour directory tree. 

Regards 
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Harbour-Online-Help---8-tp19820154p19820154.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vailtom at gmail.com  Sat Oct  4 22:44:09 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Sat Oct  4 22:44:15 2008
Subject: [Harbour] Harbour Web site - Preview #1
Message-ID: <531d7a750810041944j46ae81beo1c8be62c56420e5e@mail.gmail.com>

Hi all!

I am working in recent days in layout and in some texts to the site of
the project. I'm running with it to finish it as soon as possible.

As I have difficulty with English, any help or suggestions will be welcome.

Here's a preview of what I am working:
http://harbour-project.org/preview/

I've been working on these days and has already set the layout of the
homepage, icons and menus on the site. I am starting work to place the
appropriate text as set out some details.

My next step will be put correct texts already on the pages.

I used only HTML, put a banner across the top of the site and other
details adjusted visual ... I hope and I expect comments like that.
---------------
Vailton Renato
From mbelgrano at deltain.it  Sun Oct  5 04:44:13 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Oct  5 04:44:41 2008
Subject: [Harbour] Harbour Web site - Preview #1
In-Reply-To: <531d7a750810041944j46ae81beo1c8be62c56420e5e@mail.gmail.com>
References: <531d7a750810041944j46ae81beo1c8be62c56420e5e@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F032@SRV02.deltain.net>

Compliment!

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Vailton Renato
Sent: Sunday, October 05, 2008 4:44 AM
To: harbour@harbour-project.org
Subject: [Harbour] Harbour Web site - Preview #1

Hi all!

I am working in recent days in layout and in some texts to the site of
the project. I'm running with it to finish it as soon as possible.

As I have difficulty with English, any help or suggestions will be
welcome.

Here's a preview of what I am working:
http://harbour-project.org/preview/

I've been working on these days and has already set the layout of the
homepage, icons and menus on the site. I am starting work to place the
appropriate text as set out some details.

My next step will be put correct texts already on the pages.

I used only HTML, put a banner across the top of the site and other
details adjusted visual ... I hope and I expect comments like that.
---------------
Vailton Renato
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From info at fsgiudice.com  Sun Oct  5 06:14:47 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Oct  5 06:15:08 2008
Subject: [Harbour] Harbour Web site - Preview #1
In-Reply-To: <531d7a750810041944j46ae81beo1c8be62c56420e5e@mail.gmail.com>
References: <531d7a750810041944j46ae81beo1c8be62c56420e5e@mail.gmail.com>
Message-ID: <48E89397.1050506@fsgiudice.com>

Hi Renato,


Vailton Renato ha scritto:
> Hi all!
> 
> I am working in recent days in layout and in some texts to the site of
> the project. I'm running with it to finish it as soon as possible.
> 
> As I have difficulty with English, any help or suggestions will be welcome.
> 
> Here's a preview of what I am working:
> http://harbour-project.org/preview/
> 
> I've been working on these days and has already set the layout of the
> homepage, icons and menus on the site. I am starting work to place the
> appropriate text as set out some details.
> 
> My next step will be put correct texts already on the pages.
> 
> I used only HTML, put a banner across the top of the site and other
> details adjusted visual ... I hope and I expect comments like that.


Very good.

Just one note.
There are 4 images missing as defined in css:
/images/table-azul-top-left.gif
/images/table-azul-top-right.gif
/images/table-azul-bottom-right.gif
/images/table-azul-bottom-left.gif


Best regards

Francesco
From e.m.giordano at emagsoftware.it  Sun Oct  5 06:24:53 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sun Oct  5 06:25:00 2008
Subject: [Harbour] Harbour Web site - Preview #1
References: <531d7a750810041944j46ae81beo1c8be62c56420e5e@mail.gmail.com>
Message-ID: <6E3A50FD90D84680BD2D1F4A908C5D41@emag>


-----Messaggio Originale----- 
Da: "Vailton Renato" <vailtom@gmail.com>
A: <harbour@harbour-project.org>
Data invio: domenica 5 ottobre 2008 4.44
Oggetto: [Harbour] Harbour Web site - Preview #1


> I used only HTML,

Plus Javascript for menu. :-)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic

From vailtom at gmail.com  Sun Oct  5 06:30:14 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Sun Oct  5 06:30:21 2008
Subject: [Harbour] Harbour Web site - Preview #1
In-Reply-To: <6E3A50FD90D84680BD2D1F4A908C5D41@emag>
References: <531d7a750810041944j46ae81beo1c8be62c56420e5e@mail.gmail.com>
	<6E3A50FD90D84680BD2D1F4A908C5D41@emag>
Message-ID: <531d7a750810050330s15c10570yeb879d6b3e6a5841@mail.gmail.com>

Okay, this was a temporary adjustment into CSS just for this preview.
and yes, the JS was really necessary ... (But not PHP, ASP, etc. .. as
was suggested) =D
From e.m.giordano at emagsoftware.it  Sun Oct  5 06:30:17 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sun Oct  5 06:30:25 2008
Subject: [Harbour] Harbour website extremely slow
Message-ID: <E800F5152AD04DF28A1BEDFE5D6D75E6@emag>

The Harbour website is extremely slow from here at the moment. Phil, can you 
check it, please?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From vailtom at gmail.com  Sun Oct  5 06:34:52 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Sun Oct  5 06:34:58 2008
Subject: [Harbour] Harbour website extremely slow
In-Reply-To: <E800F5152AD04DF28A1BEDFE5D6D75E6@emag>
References: <E800F5152AD04DF28A1BEDFE5D6D75E6@emag>
Message-ID: <531d7a750810050334s2a26b9bdwe842b5047bb99351@mail.gmail.com>

This is the entire site or just the link above for preview?
From e.m.giordano at emagsoftware.it  Sun Oct  5 06:37:20 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sun Oct  5 06:37:27 2008
Subject: [Harbour] Harbour website extremely slow
References: <E800F5152AD04DF28A1BEDFE5D6D75E6@emag>
	<531d7a750810050334s2a26b9bdwe842b5047bb99351@mail.gmail.com>
Message-ID: <B60D22C1DFC8433C9FC43827A4C85B1C@emag>


-----Messaggio Originale----- 
Da: "Vailton Renato" <vailtom@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: domenica 5 ottobre 2008 12.34
Oggetto: Re: [Harbour] Harbour website extremely slow


> This is the entire site or just the link above for preview?

I check preview and main pages and both are slow.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic

From vailtom at gmail.com  Sun Oct  5 06:42:56 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Sun Oct  5 06:43:03 2008
Subject: [Harbour] Harbour website extremely slow
In-Reply-To: <B60D22C1DFC8433C9FC43827A4C85B1C@emag>
References: <E800F5152AD04DF28A1BEDFE5D6D75E6@emag>
	<531d7a750810050334s2a26b9bdwe842b5047bb99351@mail.gmail.com>
	<B60D22C1DFC8433C9FC43827A4C85B1C@emag>
Message-ID: <531d7a750810050342h19a8fb64jddc82b33c30b883c@mail.gmail.com>

Ok.I have not updated any page on the site "official" because there
are still outstanding details ... may have been something temporary,
let's see.
From e.m.giordano at emagsoftware.it  Sun Oct  5 07:25:40 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sun Oct  5 07:25:48 2008
Subject: [Harbour] Harbour website extremely slow
References: <E800F5152AD04DF28A1BEDFE5D6D75E6@emag><531d7a750810050334s2a26b9bdwe842b5047bb99351@mail.gmail.com><B60D22C1DFC8433C9FC43827A4C85B1C@emag>
	<531d7a750810050342h19a8fb64jddc82b33c30b883c@mail.gmail.com>
Message-ID: <A9B0678ADB4C4567BC247B2BEF06F3A7@emag>


-----Messaggio Originale----- 
Da: "Vailton Renato" <vailtom@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: domenica 5 ottobre 2008 12.42
Oggetto: Re: [Harbour] Harbour website extremely slow


> Ok.I have not updated any page on the site "official" because there
> are still outstanding details ... may have been something temporary,
> let's see.

Ok.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic

From e.m.giordano at emagsoftware.it  Sun Oct  5 07:27:32 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sun Oct  5 07:27:40 2008
Subject: [Harbour] Harbour website extremely slow
References: <E800F5152AD04DF28A1BEDFE5D6D75E6@emag><531d7a750810050334s2a26b9bdwe842b5047bb99351@mail.gmail.com><B60D22C1DFC8433C9FC43827A4C85B1C@emag>
	<531d7a750810050342h19a8fb64jddc82b33c30b883c@mail.gmail.com>
Message-ID: <9448235EF856420780F44BF8397F17AA@emag>


-----Messaggio Originale----- 
Da: "Vailton Renato" <vailtom@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: domenica 5 ottobre 2008 12.42
Oggetto: Re: [Harbour] Harbour website extremely slow


> Ok.I have not updated any page on the site "official" because there
> are still outstanding details ... may have been something temporary,
> let's see.

It's already better now.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic

From toninhofwi at yahoo.com.br  Sun Oct  5 08:47:29 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sun Oct  5 08:40:48 2008
Subject: [Harbour] Unrecoverable error 9001 and gui apps
Message-ID: <spdhe4t7h3utabol93kujar1o4urjve8lg@4ax.com>

Hi ppl,

I have my own errorsys, because I'm using FWH, but 9001 error simple
break my application, without call ErrorDialog().

---cut---
procedure ErrorSys()
      ErrorBlock( { | oError | ErrorDialog( oError ) } )
return
---cut---

How I can manipulate 9001 error please ?

TIA and best regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From druzus at acn.waw.pl  Sun Oct  5 09:53:34 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct  5 09:53:45 2008
Subject: [Harbour] 2008-10-05 15:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081005135334.GA7710@34-mo7-2.acn.waw.pl>

2008-10-05 15:53 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/thread.c
    ! fixed hb_mutexSubscribe*() in ST mode

best regards
Przemek
From harbour.01 at syenar.hu  Sun Oct  5 09:57:47 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 09:57:57 2008
Subject: [Harbour] 2008-10-05 15:56 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c926f2$Blat.v2.6.2$58c90a22$840b958acea@127.0.0.1>

2008-10-05 15:56 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbpers.ch
  * source/rtl/perfuncs.prg
  * source/rtl/objfunc.prg
  * source/rtl/tlabel.prg
  * source/rtl/setta.prg
  * source/rtl/dirscan.prg
  * source/rtl/tthreadx.prg
  * source/rtl/setfunc.prg
  * source/rtl/readvar.prg
  * source/rtl/tclass.prg
  * source/rtl/ttextlin.prg
  * source/rtl/profiler.prg
  * source/rtl/treport.prg
  * source/rtl/tgetint.prg
  * source/rtl/persist.prg
  * source/rtl/altd.prg
  * source/rtl/devoutp.prg
  * source/rdd/usrrdd/example/exmemo.prg
  * source/rdd/usrrdd/example/exhsx.prg
  * source/rdd/usrrdd/example/exfcm.prg
  * source/rdd/usrrdd/example/exrlx.prg
  * source/rdd/usrrdd/rdds/dbtcdx.prg
  * source/rdd/usrrdd/rdds/fptcdx.prg
  * source/rdd/usrrdd/rdds/arrayrdd.prg
  * source/rdd/usrrdd/rdds/hscdx.prg
  * source/rdd/usrrdd/rdds/rlcdx.prg
  * source/rdd/usrrdd/rdds/fcomma.prg
  * source/rdd/usrrdd/rdds/smtcdx.prg
    * Formatting. Basically finished.

  * include/hbextern.ch
    ! Added two missing functions.
--
Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Sun Oct  5 10:38:50 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Oct  5 10:38:59 2008
Subject: [Harbour] Warnings under Ubuntu 8.04 gcc 4.2.3
Message-ID: <9257026e0810050738h5bededbfn3326a7ffe4b29efc@mail.gmail.com>

I'm building svn 9548 under Ubuntu 8.04 i386 using gcc version 4.2.3
(Ubuntu 4.2.3-2ubuntu7) and I get:

../../ppcore.c: In function 'hb_pp_tokenFree':
../../ppcore.c:369: warning: passing argument 1 of 'hb_xfree' discards
qualifiers from pointer target type
../../ppcore.c: In function 'hb_pp_operatorsFree':
../../ppcore.c:255: warning: passing argument 1 of 'hb_xfree' discards
qualifiers from pointer target type
../../ppcore.c:256: warning: passing argument 1 of 'hb_xfree' discards
qualifiers from pointer target type
../../ppcore.c: In function 'hb_pp_tokenSetValue':
../../ppcore.c:494: warning: passing argument 1 of 'hb_xfree' discards
qualifiers from pointer target type
../../ppcore.c: In function 'hb_pp_tokenUpper':
../../ppcore.c:5728: warning: passing argument 1 of 'hb_xfree'
discards qualifiers from pointer target type
../../ppcore.c:5768: warning: passing argument 1 of 'hb_xfree'
discards qualifiers from pointer target type

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sun Oct  5 11:03:09 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 11:03:19 2008
Subject: [Harbour] MSVS 2008 ST/MT/MT+ results w/wo STDALLOC
Message-ID: <258EDC7E-7BB2-46FA-B1EA-D373965FFB75@syenar.hu>

Hi Przemek,

Pls find results attached.

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: msvs2008.zip
Type: application/zip
Size: 8307 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081005/357b3cba/msvs2008.zip
-------------- next part --------------


From harbour.01 at syenar.hu  Sun Oct  5 11:07:37 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 11:07:48 2008
Subject: [Harbour] Harbour Web site - Preview #1
In-Reply-To: <531d7a750810041944j46ae81beo1c8be62c56420e5e@mail.gmail.com>
References: <531d7a750810041944j46ae81beo1c8be62c56420e5e@mail.gmail.com>
Message-ID: <97B64211-AECC-423B-A650-86CC7A7AE4FB@syenar.hu>

Hi Renato,

Very nice, thanks.

I'm missing two things on first spot, the crew list and
announcement of 1.0.1 (but that was missing from the original
page too.)

Brgds,
Viktor

On 2008.10.05., at 4:44, Vailton Renato wrote:

> Hi all!
>
> I am working in recent days in layout and in some texts to the site of
> the project. I'm running with it to finish it as soon as possible.
>
> As I have difficulty with English, any help or suggestions will be  
> welcome.
>
> Here's a preview of what I am working:
> http://harbour-project.org/preview/
>
> I've been working on these days and has already set the layout of the
> homepage, icons and menus on the site. I am starting work to place the
> appropriate text as set out some details.
>
> My next step will be put correct texts already on the pages.
>
> I used only HTML, put a banner across the top of the site and other
> details adjusted visual ... I hope and I expect comments like that.
> ---------------
> Vailton Renato
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sun Oct  5 11:31:26 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 11:31:45 2008
Subject: [Harbour] MSVS 2008 ST/MT/MT+ results w STDALLOC/DLMALLOC/DLMALLOC
	2.8.4
Message-ID: <4C8F1A9D-F8F2-496C-BB86-C33BA1A42149@syenar.hu>

Hi Przemek,

Pls find results attached.

[ Update: I've included tests with "not-yet-released" dlmalloc.
This will give the best results in MT+ mode, but slightly worse
results with MT/ST modes, so I guess its switches would need to
be tweaked for hbvmmt.lib vs hbvm.lib. ]

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: msvs2008-dlmalloc284.zip
Type: application/zip
Size: 12458 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081005/5cb7426f/msvs2008-dlmalloc284-0001.zip
-------------- next part --------------


From druzus at acn.waw.pl  Sun Oct  5 11:53:49 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct  5 11:54:00 2008
Subject: [Harbour] 2008-10-05 17:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081005155349.GA29760@34-mo7-2.acn.waw.pl>

2008-10-05 17:53 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/tests/speedtst.prg
    + added support for --scale switch - it enables special mode
      which compare scalability, f.e.:
         ./speedtst --thread=4 --scale
      executes each test loop 4 times by single thread then
      by 4 simultaneous threads, counts total real times in both
      cases and presents them with the scale factor.
      Please note that exactly the same loop tests are executed
      simultaneously so this test should well show all places which
      are not well scalable.
      This test allows me to locate yet another memory variable written by
      each thread on each function call just like uiPolls in main HVM loop.
      It's s_bDebugging which is not used in MT mode because we do not have
      any MT debugger yet but is was effectively killing the scalability
      in my hardware.
      If possible I would like to see some Windows results from multi CPU
      machine with --scale parameter, f.e.:
         speedtst --thread=8 --scale > speedtst.log
      Please make some tests.

  * harbour/source/vm/hvm.c
    % do not assign s_bDebugging in hb_vmDo()/hb_vmSend() when debugger
      is not linked

  * harbour/source/vm/garbage.c
    % enabled spinlocks in all x86 GCC builds

best regards
Przemek
From harbour.01 at syenar.hu  Sun Oct  5 12:47:24 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 12:47:25 2008
Subject: [Harbour] 2008-10-05 18:46 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9270a$Blat.v2.6.2$0afdfdc6$d40e90f1a22@127.0.0.1>

2008-10-05 18:46 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbwin/win_ole.c
  * source/rtl/wait.prg
  * source/rtl/tthreadx.prg
    * Minor formatting.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Oct  5 12:59:12 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 12:59:31 2008
Subject: [Harbour] harbour-project.org anon FTP
Message-ID: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>

Hi Phil,

May I suggest shutting down anonymous FTP uploads
on our FTP?

Actually the best would be to turn off FTP for our
site completely. We're not using it, but internet
users do, as used to find adult content in the 'incoming'
dir.

Brgds,
Viktor

From druzus at acn.waw.pl  Sun Oct  5 13:27:12 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct  5 13:27:24 2008
Subject: [Harbour] MSVS 2008 ST/MT/MT+ results w
	STDALLOC/DLMALLOC/DLMALLOC 2.8.4
In-Reply-To: <4C8F1A9D-F8F2-496C-BB86-C33BA1A42149@syenar.hu>
References: <4C8F1A9D-F8F2-496C-BB86-C33BA1A42149@syenar.hu>
Message-ID: <20081005172712.GA31199@34-mo7-2.acn.waw.pl>

On Sun, 05 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Pls find results attached.
> [ Update: I've included tests with "not-yet-released" dlmalloc.
> This will give the best results in MT+ mode, but slightly worse
> results with MT/ST modes, so I guess its switches would need to
> be tweaked for hbvmmt.lib vs hbvm.lib. ]

Thank you very much.
I've just changed speedtst and now it's possible to check scalability
in simple test which should well show poor scalable places.
Because it executes exactly the same loop test simultaneously without
any other code then it should show as performance reduction even empty
mutex calls.
Please try to make test like:
   speedtst --threads=4 --scale
and you will see what is not well scalable.

In my computer for current HVM
   ./speedtst --thread=3 --scale --exclude=mem
gives:

10/05/08 18:47:29 Linux 2.6.25.11-0.1-pae i686
Harbour 1.1.0dev (Rev. 9535) (MT)+ GNU C 4.3.1 (32 bit)
THREADS: 3
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 
                                                  1 th.  3 th.  factor
======================================================================
[ T001: x := L_C ]______________________________  0.27   0.10 ->  2.79
[ T002: x := L_N ]______________________________  0.22   0.07 ->  3.03
[ T003: x := L_D ]______________________________  0.22   0.07 ->  2.97
[ T004: x := S_C ]______________________________  0.32   0.37 ->  0.88
[ T005: x := S_N ]______________________________  0.28   0.09 ->  2.93
[ T006: x := S_D ]______________________________  0.29   0.10 ->  2.97
[ T007: x := M_C ]______________________________  0.37   0.12 ->  2.99
[ T008: x := M_N ]______________________________  0.33   0.11 ->  2.99
[ T009: x := M_D ]______________________________  0.33   0.11 ->  2.96
[ T010: x := P_C ]______________________________  0.37   0.12 ->  3.01
[ T011: x := P_N ]______________________________  0.33   0.12 ->  2.77
[ T012: x := P_D ]______________________________  0.33   0.11 ->  2.97
[ T013: x := F_C ]______________________________  0.73   0.27 ->  2.77
[ T014: x := F_N ]______________________________  0.87   0.34 ->  2.54
[ T015: x := F_D ]______________________________  0.48   0.16 ->  3.01
[ T016: x := o:GenCode ]________________________  0.84   0.27 ->  3.10
[ T017: x := o[8] ]_____________________________  0.51   0.17 ->  3.01
[ T018: round( i / 1000, 2 ) ]__________________  1.03   0.37 ->  2.76
[ T020: val( s ) ]______________________________  1.11   0.37 ->  2.98
[ T021: val( a [ i % 16 + 1 ] ) ]_______________  1.80   0.59 ->  3.05
[ T024: eval( bc := { || i % 16 } ) ]___________  1.21   0.52 ->  2.34
[ T026: eval( bc := { |x| x % 16 }, i ) ]_______  1.23   0.42 ->  2.91
[ T028: eval( bc := { |x| f1( x ) }, i ) ]______  1.51   0.54 ->  2.81
[ T033: x := a[ i % 16 + 1 ] == s ]_____________  1.21   0.45 ->  2.69
[ T034: x := a[ i % 16 + 1 ] = s ]______________  1.34   0.49 ->  2.71
[ T035: x := a[ i % 16 + 1 ] >= s ]_____________  1.36   0.49 ->  2.76
[ T036: x := a[ i % 16 + 1 ] <= s ]_____________  1.35   0.54 ->  2.49
[ T037: x := a[ i % 16 + 1 ] < s ]______________  1.32   0.50 ->  2.62
[ T038: x := a[ i % 16 + 1 ] > s ]______________  1.36   0.46 ->  2.97
[ T039: ascan( a, i % 16 ) ]____________________  1.46   0.49 ->  2.97
[ T042: x := a ]________________________________  0.29   0.10 ->  2.89
[ T044: f0() ]__________________________________  0.55   0.18 ->  3.00
[ T045: f1( i ) ]_______________________________  0.67   0.25 ->  2.63
[ T046: f2( c[1...8] ) ]________________________  0.67   0.23 ->  2.95
[ T047: f2( c[1...40000] ) ]____________________  0.67   0.22 ->  2.97
[ T048: f2( @c[1...40000] ) ]___________________  0.67   0.22 ->  2.97
[ T049: f2( @c[1...40000] ), c2 := c ]__________  0.77   0.26 ->  2.96
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]____  1.61   0.57 ->  2.83
[ T051: f2( a ) ]_______________________________  0.69   0.23 ->  2.95
[ T054: f_prv( c ) ]____________________________  1.86   0.65 ->  2.86
======================================================================
[   TOTAL   ]___________________________________ 32.85  11.89 ->  2.76
======================================================================
[ total application time: ]....................................66.90
[ total real time: ]...........................................44.74

so the results are very close to number of CPUs - I've got 3 ones.
These are very similar results to pure C code I tested.
In this test we use only real time returned by seconds() functions
so we also calculate OS and other process activity reducing the
factor because such overhead is smaller when only one CPU is used
by us and rest can be used for other task.

Please also look at this:

   [ T004: x := S_C ]___________________________  0.32   0.37 ->  0.88

In this test exactly the same reference counter for string in S_C is
increased and decreased by different threads. In my computer when many
threads writes to the same memory cell some serialization action is
automatically executed and it reduces the performance to single thread
level.
After checking results you all sent in last days seems that it's strictly
hardware oriented behavior and in other computers the overhead may be
different. Anyhow this does not effect overall performance and scalability
in normal code which makes also sth else then simple coping and releasing
the same string item by different threads.

For me these results are very well.
But the situation is a little bit different when we have to enable tests
which allocates and release memory.
In such case the total speed factor can be reduced by MM and spinlock
inside garbage.c - in my case this is not trivial cost because it's
also simultaneous write to the same memory cell which forces serialization.
This is well seen in this test:
   [ T043: x := {} ]_______________________________  0.67   1.65 ->  0.40
To make it more funny my Linux (SUSE11.0) has very efficient MM in MT mode
and in this tests returns new memory block without any internal locks what
causes that this is the only one critical places and all threads working
in loops are blocked on one spinlock. I'm very interesting how it looks in
other computers.


Here I my detail results with all tests:

10/05/08 19:04:56 Linux 2.6.25.11-0.1-pae i686
Harbour 1.1.0dev (Rev. 9535) (MT)+ GNU C 4.3.1 (32 bit)
THREADS: 3
N_LOOPS: 1000000
                                                        1 th.  3 th.  factor
======================================================================
[ T001: x := L_C ]______________________________  0.28   0.09 ->  3.07
[ T002: x := L_N ]______________________________  0.22   0.07 ->  2.98
[ T003: x := L_D ]______________________________  0.22   0.07 ->  3.00
[ T004: x := S_C ]______________________________  0.33   0.37 ->  0.89
[ T005: x := S_N ]______________________________  0.28   0.09 ->  2.98
[ T006: x := S_D ]______________________________  0.28   0.10 ->  2.96
[ T007: x := M_C ]______________________________  0.37   0.13 ->  2.96
[ T008: x := M_N ]______________________________  0.33   0.11 ->  2.95
[ T009: x := M_D ]______________________________  0.33   0.12 ->  2.70
[ T010: x := P_C ]______________________________  0.38   0.13 ->  2.87
[ T011: x := P_N ]______________________________  0.33   0.11 ->  2.99
[ T012: x := P_D ]______________________________  0.33   0.11 ->  2.97
[ T013: x := F_C ]______________________________  0.72   0.25 ->  2.88
[ T014: x := F_N ]______________________________  0.87   0.29 ->  2.96
[ T015: x := F_D ]______________________________  0.48   0.17 ->  2.89
[ T016: x := o:GenCode ]________________________  0.84   0.29 ->  2.91
[ T017: x := o[8] ]_____________________________  0.50   0.17 ->  2.98
[ T018: round( i / 1000, 2 ) ]__________________  1.03   0.36 ->  2.90
[ T019: str( i / 1000 ) ]_______________________  2.13   0.73 ->  2.91
[ T020: val( s ) ]______________________________  1.11   0.39 ->  2.89
[ T021: val( a [ i % 16 + 1 ] ) ]_______________  1.79   0.60 ->  2.96
[ T022: dtos( d - i % 10000 ) ]_________________  1.56   0.53 ->  2.92
[ T023: eval( { || i % 16 } ) ]_________________  2.01   2.25 ->  0.89
[ T024: eval( bc := { || i % 16 } ) ]___________  1.25   0.41 ->  3.01
[ T025: eval( { |x| x % 16 }, i ) ]_____________  1.63   2.12 ->  0.77
[ T026: eval( bc := { |x| x % 16 }, i ) ]_______  1.27   0.42 ->  2.99
[ T027: eval( { |x| f1( x ) }, i ) ]____________  1.93   2.28 ->  0.85
[ T028: eval( bc := { |x| f1( x ) }, i ) ]______  1.51   0.53 ->  2.86
[ T029: x := &( "f1(" + str(i) + ")" ) ]________ 11.58   4.56 ->  2.54
[ T030: bc := &( "{|x|f1(x)}" ); eval( bc, i ) _ 13.30   5.57 ->  2.39
[ T031: x := valtype( x ) +  valtype( i ) ]_____  1.67   0.57 ->  2.95
[ T032: x := strzero( i % 100, 2 ) $ a[ i % 16 ]  2.84   1.14 ->  2.50
[ T033: x := a[ i % 16 + 1 ] == s ]_____________  1.22   0.45 ->  2.72
[ T034: x := a[ i % 16 + 1 ] = s ]______________  1.32   0.55 ->  2.39
[ T035: x := a[ i % 16 + 1 ] >= s ]_____________  1.38   0.48 ->  2.87
[ T036: x := a[ i % 16 + 1 ] <= s ]_____________  1.35   0.50 ->  2.67
[ T037: x := a[ i % 16 + 1 ] < s ]______________  1.31   0.48 ->  2.75
[ T038: x := a[ i % 16 + 1 ] > s ]______________  1.36   0.54 ->  2.52
[ T039: ascan( a, i % 16 ) ]____________________  1.51   0.50 ->  3.00
[ T040: ascan( a, { |x| x == i % 16 } ) ]_______ 12.80   5.18 ->  2.47
[ T041: if i%1000==0;a:={};end; aadd(a,{i,1,.T.]  3.52   2.20 ->  1.60
[ T042: x := a ]________________________________  0.30   0.10 ->  2.97
[ T043: x := {} ]_______________________________  0.67   1.65 ->  0.40
[ T044: f0() ]__________________________________  0.56   0.20 ->  2.87
[ T045: f1( i ) ]_______________________________  0.67   0.24 ->  2.76
[ T046: f2( c[1...8] ) ]________________________  0.67   0.23 ->  2.92
[ T047: f2( c[1...40000] ) ]____________________  0.67   0.24 ->  2.74
[ T048: f2( @c[1...40000] ) ]___________________  0.67   0.23 ->  2.94
[ T049: f2( @c[1...40000] ), c2 := c ]__________  0.76   0.26 ->  2.91
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]____  1.63   0.66 ->  2.46
[ T051: f2( a ) ]_______________________________  0.69   0.24 ->  2.94
[ T052: x := f4() ]_____________________________  1.93   0.66 ->  2.93
[ T053: x := f5() ]_____________________________  1.25   0.44 ->  2.84
[ T054: f_prv( c ) ]____________________________  1.84   0.64 ->  2.88
======================================================================
[   TOTAL   ]___________________________________ 91.76  41.80 ->  2.19
======================================================================
[ total application time: ]...................................211.15
[ total real time: ]..........................................133.56

As you can see the total performance were reduced to 2.19.
But this whole test exploits the worst possible cases increasing the
collisions because each thread executed exactly the same code so this
is the worst possible situation and normal user code should be very well
scalable.

best regards,
Przemek
From vailtom at gmail.com  Sun Oct  5 13:30:06 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Sun Oct  5 13:30:13 2008
Subject: [Harbour] Harbour Web site - Preview #1
In-Reply-To: <97B64211-AECC-423B-A650-86CC7A7AE4FB@syenar.hu>
References: <531d7a750810041944j46ae81beo1c8be62c56420e5e@mail.gmail.com>
	<97B64211-AECC-423B-A650-86CC7A7AE4FB@syenar.hu>
Message-ID: <531d7a750810051030s313b1271t5a0af2eb838978f4@mail.gmail.com>

Hi Viktor,

Okay, you have the updated list of the crew? Or where can i find this?
Vailton Renato
From e.m.giordano at emagsoftware.it  Sun Oct  5 13:30:06 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sun Oct  5 13:30:15 2008
Subject: [Harbour] 2008-10-05 17:53 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20081005155349.GA29760@34-mo7-2.acn.waw.pl>
Message-ID: <FCA90007D2D74CA7B58F423F025A6B69@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: <harbour@harbour-project.org>
Data invio: domenica 5 ottobre 2008 17.53
Oggetto: [Harbour] 2008-10-05 17:53 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


>      If possible I would like to see some Windows results from multi CPU
>      machine with --scale parameter, f.e.:
>         speedtst --thread=8 --scale > speedtst.log
>      Please make some tests.

E:\HARBOUR>speedtst --thread=8 --scale

10/05/08 19:12:22 Windows XP 5.1.2600 Service Pack 3
Harbour 1.1.0dev (Rev. 9550) (MT)+ Borland C++ 5.5.1 (32 bit)
THREADS: 8
N_LOOPS: 1000000
                                                        1 th.  8 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  1.67   0.88 ->  1.91
[ T002: x := L_N ]____________________________________  1.25   0.63 ->  2.00
[ T003: x := L_D ]____________________________________  1.22   0.64 ->  1.90
[ T004: x := S_C ]____________________________________  2.09   1.39 ->  1.51
[ T005: x := S_N ]____________________________________  1.61   0.83 ->  1.94
[ T006: x := S_D ]____________________________________  1.61   0.84 ->  1.91
[ T007: x := M_C ]____________________________________  2.28   1.23 ->  1.85
[ T008: x := M_N ]____________________________________  1.83   0.92 ->  1.98
[ T009: x := M_D ]____________________________________  1.83   0.92 ->  1.98
[ T010: x := P_C ]____________________________________  1.86   0.97 ->  1.92
[ T011: x := P_N ]____________________________________  1.81   0.92 ->  1.97
[ T012: x := P_D ]____________________________________  1.81   0.95 ->  1.90
[ T013: x := F_C ]____________________________________  3.75   4.84 ->  0.77
[ T014: x := F_N ]____________________________________  3.13   1.58 ->  1.98
[ T015: x := F_D ]____________________________________  2.17   1.13 ->  1.93
[ T016: x := o:GenCode ]______________________________  4.09   2.11 ->  1.94
[ T017: x := o[8] ]___________________________________  3.23   1.67 ->  1.93
[ T018: round( i / 1000, 2 ) ]________________________  4.08   2.06 ->  1.98
[ T019: str( i / 1000 ) ]_____________________________ 10.26   8.00 ->  1.28
[ T020: val( s ) ]____________________________________  4.52   2.44 ->  1.85
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  7.95   4.09 ->  1.94
[ T022: dtos( d - i % 10000 ) ]_______________________  7.75   5.94 ->  1.31
[ T023: eval( { || i % 16 } ) ]_______________________ 10.61  20.06 ->  0.53
[ T024: eval( bc := { || i % 16 } ) ]_________________  5.24   2.67 ->  1.96
[ T025: eval( { |x| x % 16 }, i ) ]___________________  8.01  34.88 ->  0.23
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  5.47   2.81 ->  1.94
[ T027: eval( { |x| f1( x ) }, i ) ]__________________  9.66  45.31 ->  0.21
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  7.11   3.59 ->  1.98
[ T029: x := &( "f1(" + str(i) + ")" ) ]______________ 43.76  52.08 ->  0.84
[ T030: bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]______ 54.34  73.08 ->  0.74
[ T031: x := valtype( x ) +  valtype( i ) ]___________  8.55   5.25 ->  1.63
[ T032: x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ] 14.16   8.73 ->  1.62
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  6.59   3.42 ->  1.93
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  7.09   3.58 ->  1.98
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  7.13   3.69 ->  1.93
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  7.02   3.61 ->  1.94
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  7.05   3.64 ->  1.94
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  7.00   3.58 ->  1.96
[ T039: ascan( a, i % 16 ) ]__________________________  6.09   3.14 ->  1.94
[ T040: ascan( a, { |x| x == i % 16 } ) ]_____________ 56.69  33.28 ->  1.70
[ T041: if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2 ] 20.73  47.44 ->  0.44
[ T042: x := a ]______________________________________  1.78   0.97 ->  1.84
[ T043: x := {} ]_____________________________________  4.26  32.91 ->  0.13
[ T044: f0() ]________________________________________  2.11   1.13 ->  1.88
[ T045: f1( i ) ]_____________________________________  3.06   1.58 ->  1.94
[ T046: f2( c[1...8] ) ]______________________________  3.22   1.74 ->  1.86
[ T047: f2( c[1...40000] ) ]__________________________  3.20   1.63 ->  1.97
[ T048: f2( @c[1...40000] ) ]_________________________  3.23   1.64 ->  1.97
[ T049: f2( @c[1...40000] ), c2 := c ]________________  3.36   1.69 ->  1.99
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  9.63   5.03 ->  1.91
[ T051: f2( a ) ]_____________________________________  3.30   1.69 ->  1.95
[ T052: x := f4() ]___________________________________ 38.06  43.86 ->  0.87
[ T053: x := f5() ]___________________________________  6.58   4.63 ->  1.42
[ T054: f_prv( c ) ]__________________________________  9.31   6.44 ->  1.45
============================================================================
[   TOTAL   ]_________________________________________455.22 503.73 ->  0.90
============================================================================
[ total application time: ]..................................1311.17
[ total real time: ]..........................................959.06

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Sun Oct  5 13:36:04 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 13:36:14 2008
Subject: [Harbour] Harbour Web site - Preview #1
In-Reply-To: <531d7a750810051030s313b1271t5a0af2eb838978f4@mail.gmail.com>
References: <531d7a750810041944j46ae81beo1c8be62c56420e5e@mail.gmail.com>
	<97B64211-AECC-423B-A650-86CC7A7AE4FB@syenar.hu>
	<531d7a750810051030s313b1271t5a0af2eb838978f4@mail.gmail.com>
Message-ID: <412D22CB-AC57-4B7F-92CF-AC16C9C44E21@syenar.hu>

Hi Renato,

You can find the crew page here:
http://harbour-project.org/crew.htm

Brgds,
Viktor

On 2008.10.05., at 19:30, Vailton Renato wrote:

> Hi Viktor,
>
> Okay, you have the updated list of the crew? Or where can i find this?
> Vailton Renato
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From bedipritpal at hotmail.com  Sun Oct  5 13:44:32 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun Oct  5 13:44:39 2008
Subject: [Harbour] 2008-10-05 17:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081005155349.GA29760@34-mo7-2.acn.waw.pl>
References: <20081005155349.GA29760@34-mo7-2.acn.waw.pl>
Message-ID: <19827182.post@talk.nabble.com>


Results:

10/05/08 09:50:08 Windows XP 5.1.2600 Service Pack 2
Harbour 1.1.0dev (Rev. 9549) (MT)+ Borland C++ 5.5.1 (32 bit)
N_LOOPS: 1000000


 _1.th  _8.th     factor    _1.th  _4.th     factor
 ================   =================  ==============
 _2.34  _4.77 ->  0.49    _1.14  _2.33 ->  0.49   [ T001: x := L_C ]
 _1.94  _5.25 ->  0.37    _0.95  _1.95 ->  0.49   [ T002: x := L_N ]
 _1.91  _4.06 ->  0.47    _0.94  _1.97 ->  0.48   [ T003: x := L_D ]
 _2.33  _4.39 ->  0.53    _1.17  _2.05 ->  0.57   [ T004: x := S_C ]
 _1.89  _4.03 ->  0.47    _0.94  _1.78 ->  0.53   [ T005: x := S_N ]
 _1.95  _4.00 ->  0.49    _0.97  _1.94 ->  0.50   [ T006: x := S_D ]
 _2.47  _4.67 ->  0.53    _1.27  _2.26 ->  0.56   [ T007: x := M_C ]
 _2.05  _4.03 ->  0.51    _1.02  _1.98 ->  0.51   [ T008: x := M_N ]
 _2.03  _4.03 ->  0.50    _1.03  _1.91 ->  0.54   [ T009: x := M_D ]
 _2.11  _4.17 ->  0.51    _1.16  _2.08 ->  0.56   [ T010: x := P_C ]
 _2.05  _4.05 ->  0.51    _1.03  _1.95 ->  0.53   [ T011: x := P_N ]
 _2.05  _4.06 ->  0.50    _1.05  _1.94 ->  0.54   [ T012: x := P_D ]
 _3.89  _5.89 ->  0.66    _1.97  _2.88 ->  0.68   [ T013: x := F_C ]
 _3.28  _3.53 ->  0.93    _1.63  _1.75 ->  0.93   [ T014: x := F_N ]
 _2.34  _4.09 ->  0.57    _1.19  _2.00 ->  0.59   [ T015: x := F_D ]
 _4.24  _5.13 ->  0.83    _2.11  _2.47 ->  0.85   [ T016: x := o:GenCode ]
 _3.50  _5.83 ->  0.60    _1.74  _2.41 ->  0.72   [ T017: x := o[8] ]
 _4.58  _3.91 ->  1.17    _2.27  _1.75 ->  1.29   [ T018: round( i / 1000, 2
) ]
 _9.59  10.20 ->  0.94    _4.77  _5.78 ->  0.82   [ T019: str( i / 1000 ) ]
 _4.50  _3.02 ->  1.49    _2.27  _1.45 ->  1.56   [ T020: val( s ) ]
 _7.97  _8.09 ->  0.98    _3.99  _3.95 ->  1.01   [ T021: val( a [ i % 16 +
1 ] ) ]
 _7.72  _6.50 ->  1.19    _3.80  _3.33 ->  1.14   [ T022: dtos( d - i %
10000 ) ]
 _9.86  38.39 ->  0.26    _4.89  28.09 ->  0.17   [ T023: eval( { || i % 16
} ) ]
 _5.00  _7.63 ->  0.66    _2.53  _3.67 ->  0.69   [ T024: eval( bc := { || i
% 16 } ) ]
 _7.91  50.27 ->  0.16    _3.89  19.39 ->  0.20   [ T025: eval( { |x| x % 16
}, i ) ]
 _5.80  _8.59 ->  0.67    _2.86  _4.19 ->  0.68   [ T026: eval( bc := { |x|
x % 16 }, i ) ]
 _9.67  50.03 ->  0.19    _4.88  23.83 ->  0.20   [ T027: eval( { |x| f1( x
) }, i ) ]
 _7.53  11.28 ->  0.67    _3.75  _5.36 ->  0.70   [ T028: eval( bc := { |x|
f1( x ) }, i ) ]
 42.44  63.16 ->  0.67    21.55  31.52 ->  0.68   [ T029: x := &( "f1(" +
str(i) + ")" ) ]
 54.95  86.47 ->  0.64    27.41  43.08 ->  0.64   [ T030: bc := &(
"{|x|f1(x)}" ); eval( bc, i ) ]
 _8.72  10.16 ->  0.86    _4.42  _5.19 ->  0.85   [ T031: x := valtype( x )
+  valtype( i ) ]
 13.81  11.58 ->  1.19    _7.02  _6.17 ->  1.14   [ T032: x := strzero( i %
100, 2 ) $ a[ i % 16 + 1 ]
 _6.91  11.39 ->  0.61    _3.42  _5.55 ->  0.62   [ T033: x := a[ i % 16 + 1
] == s ]
 _7.30  10.92 ->  0.67    _3.66  _5.41 ->  0.68   [ T034: x := a[ i % 16 + 1
] = s ]
 _7.31  10.78 ->  0.68    _3.69  _5.28 ->  0.70   [ T035: x := a[ i % 16 + 1
] >= s ]
 _7.30  10.73 ->  0.68    _3.89  _5.20 ->  0.75   [ T036: x := a[ i % 16 + 1
] <= s ]
 _7.31  10.76 ->  0.68    _3.75  _5.33 ->  0.70   [ T037: x := a[ i % 16 + 1
] < s ]
 _7.31  10.76 ->  0.68    _3.76  _5.31 ->  0.71   [ T038: x := a[ i % 16 + 1
] > s ]
 _6.06  _5.98 ->  1.01    _3.09  _2.92 ->  1.06   [ T039: ascan( a, i % 16 )
]
 54.78  49.03 ->  1.12    _8.74  25.19 ->  1.14   [ T040: ascan( a, { |x| x
== i % 16 } ) ]
 20.95  35.94 ->  0.58    _0.61  16.73 ->  0.63   [ T041: if
i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2
 _2.39  _4.81 ->  0.50    _1.17  _2.36 ->  0.50   [ T042: x := a ]
 _4.49  43.53 ->  0.10    _2.24  23.19 ->  0.10   [ T043: x := {} ]
 _2.36  _5.06 ->  0.47    _1.16  _2.34 ->  0.49   [ T044: f0() ]
 _3.63  _7.84 ->  0.46    _1.83  _3.78 ->  0.48   [ T045: f1( i ) ]
 _3.55  _7.51 ->  0.47    _1.75  _3.28 ->  0.53   [ T046: f2( c[1...8] ) ]
 _3.55  _7.72 ->  0.46    _1.76  _3.59 ->  0.49   [ T047: f2( c[1...40000]
)]
 _3.55  _7.70 ->  0.46    _1.75  _3.63 ->  0.48   [ T048: f2( @c[1...40000]
) ]
 _4.25  _9.14 ->  0.46    _2.06  _4.58 ->  0.45   [ T049: f2( @c[1...40000]
), c2 := c ]
 10.09  14.63 ->  0.69    _5.03  _7.30 ->  0.69   [ T050: f3( a, a2, s, i,
s2, bc, i, n, x ) ]
 _3.61  _7.63 ->  0.47    _1.77  _3.69 ->  0.48   [ T051: f2( a ) ]
 11.44  13.08 ->  0.87    _5.97  _6.61 ->  0.90   [ T052: x := f4() ]
 _6.98  _9.16 ->  0.76    _3.44  _4.47 ->  0.77   [ T053: x := f5() ]
 10.09  12.58 ->  0.80    _5.11  _6.23 ->  0.82   [ T054: f_prv( c ) ]
=================   ================   ===============
437.61 751.95 -> 0.58  221.20 374.35 -> 0.59   [   TOTAL   ]
=================   ================   ===============
...................1740.97   ....................828.50
...................1189.58   ....................595.59

Regards
Pritpal Bedi

PS : I think how the figures are displayed be be changed as above
because of non-proportional fonts on browsers. If you agree I can commit.


-- 
View this message in context: http://www.nabble.com/2008-10-05-17%3A53-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp19825946p19827182.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sun Oct  5 14:13:29 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 14:13:30 2008
Subject: [Harbour] 2008-10-05 20:10 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92716$Blat.v2.6.2$118dad92$9108cc560dc@127.0.0.1>

2008-10-05 20:10 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * common.mak
   * source/rtl/Makefile
   - source/rtl/persist.prg
   + source/rtl/tpersist.prg
   - source/rtl/symbol.prg
   + source/rtl/tsymbol.prg
   * source/rtl/achoice.prg
   * source/rtl/browse.prg
   * source/rtl/dbedit.prg
   * source/rtl/dircmd.prg
   * source/rtl/einstv52.prg
   * source/rtl/einstvar.prg
   * source/rtl/hbini.prg
   * source/rtl/tbrowse.prg
   * source/rtl/tclass.prg
   * source/rtl/tget.prg
   * source/rtl/tgetint.prg
   * source/rtl/tlabel.prg
   * source/rtl/tobject.prg
   * source/rtl/treport.prg
   * source/rtl/typefile.prg
   * source/rtl/valtoexp.prg
   * source/rdd/usrrdd/example/exhsx.prg
   * source/rdd/usrrdd/example/exfcm.prg
   * source/rdd/usrrdd/rdds/hscdx.prg
     * Some formattings and cleanup.

   * source/rtl/tclass.prg
     % ValType() optimizations.

   * source/rtl/tlabel.prg
   * source/rtl/treport.prg
     * Trim() -> RTrim()

   * source/rtl/treport.prg
     ! Hard-coded Chr(13)+Chr(10) fixed in treport.prg.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Sun Oct  5 15:04:45 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct  5 15:04:56 2008
Subject: [Harbour] 2008-10-05 17:53 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <FCA90007D2D74CA7B58F423F025A6B69@emag>
References: <20081005155349.GA29760@34-mo7-2.acn.waw.pl>
	<FCA90007D2D74CA7B58F423F025A6B69@emag>
Message-ID: <20081005190444.GA2093@34-mo7-2.acn.waw.pl>

On Sun, 05 Oct 2008, Enrico Maria Giordano wrote:

Hi Enrico,

> E:\HARBOUR>speedtst --thread=8 --scale
> 10/05/08 19:12:22 Windows XP 5.1.2600 Service Pack 3
> Harbour 1.1.0dev (Rev. 9550) (MT)+ Borland C++ 5.5.1 (32 bit)
> THREADS: 8
> N_LOOPS: 1000000
>                                                        1 th.  8 th.  factor
> ============================================================================
> [ T001: x := L_C ]____________________________________  1.67   0.88 ->  1.91
> [ T002: x := L_N ]____________________________________  1.25   0.63 ->  2.00
> [ T003: x := L_D ]____________________________________  1.22   0.64 ->  1.90
> [ T004: x := S_C ]____________________________________  2.09   1.39 ->  1.51
> [ T005: x := S_N ]____________________________________  1.61   0.83 ->  1.94
> [ T006: x := S_D ]____________________________________  1.61   0.84 ->  1.91
> [ T007: x := M_C ]____________________________________  2.28   1.23 ->  1.85
> [ T008: x := M_N ]____________________________________  1.83   0.92 ->  1.98
> [ T009: x := M_D ]____________________________________  1.83   0.92 ->  1.98
> [ T010: x := P_C ]____________________________________  1.86   0.97 ->  1.92
> [ T011: x := P_N ]____________________________________  1.81   0.92 ->  1.97
> [ T012: x := P_D ]____________________________________  1.81   0.95 ->  1.90
> [ T013: x := F_C ]____________________________________  3.75   4.84 ->  0.77
> [ T014: x := F_N ]____________________________________  3.13   1.58 ->  1.98
> [ T015: x := F_D ]____________________________________  2.17   1.13 ->  1.93
> [ T016: x := o:GenCode ]______________________________  4.09   2.11 ->  1.94
> [ T017: x := o[8] ]___________________________________  3.23   1.67 ->  1.93
> [ T018: round( i / 1000, 2 ) ]________________________  4.08   2.06 ->  1.98
> [ T019: str( i / 1000 ) ]_____________________________ 10.26   8.00 ->  1.28
> [ T020: val( s ) ]____________________________________  4.52   2.44 ->  1.85
> [ T021: val( a [ i % 16 + 1 ] ) ]_____________________  7.95   4.09 ->  1.94
> [ T022: dtos( d - i % 10000 ) ]_______________________  7.75   5.94 ->  1.31
> [ T023: eval( { || i % 16 } ) ]_______________________ 10.61  20.06 ->  0.53
> [ T024: eval( bc := { || i % 16 } ) ]_________________  5.24   2.67 ->  1.96
> [ T025: eval( { |x| x % 16 }, i ) ]___________________  8.01  34.88 ->  0.23
> [ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  5.47   2.81 ->  1.94
> [ T027: eval( { |x| f1( x ) }, i ) ]__________________  9.66  45.31 ->  0.21
> [ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  7.11   3.59 ->  1.98
> [ T029: x := &( "f1(" + str(i) + ")" ) ]______________ 43.76  52.08 ->  0.84
> [ T030: bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]______ 54.34  73.08 ->  0.74
> [ T031: x := valtype( x ) +  valtype( i ) ]___________  8.55   5.25 ->  1.63
> [ T032: x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ] 14.16   8.73 ->  1.62
> [ T033: x := a[ i % 16 + 1 ] == s ]___________________  6.59   3.42 ->  1.93
> [ T034: x := a[ i % 16 + 1 ] = s ]____________________  7.09   3.58 ->  1.98
> [ T035: x := a[ i % 16 + 1 ] >= s ]___________________  7.13   3.69 ->  1.93
> [ T036: x := a[ i % 16 + 1 ] <= s ]___________________  7.02   3.61 ->  1.94
> [ T037: x := a[ i % 16 + 1 ] < s ]____________________  7.05   3.64 ->  1.94
> [ T038: x := a[ i % 16 + 1 ] > s ]____________________  7.00   3.58 ->  1.96
> [ T039: ascan( a, i % 16 ) ]__________________________  6.09   3.14 ->  1.94
> [ T040: ascan( a, { |x| x == i % 16 } ) ]_____________ 56.69  33.28 ->  1.70
> [ T041: if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2 ] 20.73  47.44 ->  0.44
> [ T042: x := a ]______________________________________  1.78   0.97 ->  1.84
> [ T043: x := {} ]_____________________________________  4.26  32.91 ->  0.13
> [ T044: f0() ]________________________________________  2.11   1.13 ->  1.88
> [ T045: f1( i ) ]_____________________________________  3.06   1.58 ->  1.94
> [ T046: f2( c[1...8] ) ]______________________________  3.22   1.74 ->  1.86
> [ T047: f2( c[1...40000] ) ]__________________________  3.20   1.63 ->  1.97
> [ T048: f2( @c[1...40000] ) ]_________________________  3.23   1.64 ->  1.97
> [ T049: f2( @c[1...40000] ), c2 := c ]________________  3.36   1.69 ->  1.99
> [ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  9.63   5.03 ->  1.91
> [ T051: f2( a ) ]_____________________________________  3.30   1.69 ->  1.95
> [ T052: x := f4() ]___________________________________ 38.06  43.86 ->  0.87
> [ T053: x := f5() ]___________________________________  6.58   4.63 ->  1.42
> [ T054: f_prv( c ) ]__________________________________  9.31   6.44 ->  1.45
> ============================================================================
> [   TOTAL   ]_________________________________________455.22 503.73 ->  0.90
> ============================================================================
> [ total application time: ]..................................1311.17
> [ total real time: ]..........................................959.06

Thank you very much. As I can see you two CPU machine and in all tests
which does not allocate new memory you have the factor close to 2.0.
Very nice. Also:
   [ T004: x := S_C ]______________________________  2.09   1.39 ->  1.51
Is quite good so the overhead caused by operating on the same reference
counter is relatively small. At least much smaller then in my machine.
So probably the same will be with spinlocks.
If you can please also make test for:
   speedtst --thread=2 --scale --exclude=mem
It will be much shorter due the less number of threads and tests.

But the cost of memory allocations is very big. To improve scalability
here memory manager optimized for MT mode is necessary. It's not directly
related to Harbour though we can add some workarounds to reduce the overhead
in Harbour layer. But rather not now. In real applications it should not
cause such big problem because threads will make also other things not only
allocate and free memory in a loop :-)

best regards,
Przemek
From harbour.01 at syenar.hu  Sun Oct  5 15:13:45 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 15:13:59 2008
Subject: [Harbour] MSVS 2008 ST/MT/MT+ results w
	STDALLOC/DLMALLOC/DLMALLOC 2.8.4
In-Reply-To: <20081005172712.GA31199@34-mo7-2.acn.waw.pl>
References: <4C8F1A9D-F8F2-496C-BB86-C33BA1A42149@syenar.hu>
	<20081005172712.GA31199@34-mo7-2.acn.waw.pl>
Message-ID: <4431AED5-4437-4308-BFC9-007E7753815D@syenar.hu>

Hi Przemek,

Here are my 'speedtst --threads=4 --scale' and
'speedtst --threads=4 --scale --exclude=mem' results
respectively (I've used the default DLMALLOC):

Harbour Build Info
---------------------------
Version: Harbour 1.1.0dev (Rev. 9550)
PCode version: 0.2
Compiler: Microsoft Visual C 15.0.26569 (32 bit)
Platform: Windows XP 5.1.2600 Service Pack 3

Built on: Oct  5 2008 19:48:31
Last ChangeLog entry: 2008-10-05 18:46 UTC+0200 Viktor Szakats  
(harbour.01 syenar hu)
ChangeLog SVN version: ChangeLog 9550 2008-10-05 16:47:14Z vszakats
Extra Harbour compiler switches: -l -gc3
Extra C compiler switches: -DHB_NO_DEBUG -DHB_FM_STATISTICS_OFF
Other build settings: (C mode)

Clipper 5.3b compatible extensions: yes
Clipper 5.2e/5.3b compatible undocumented: yes
Clipper 5.2e/5.3b strict compatibility: no
Xbase++ compatible extensions: yes
FlagShip compatible extensions: yes
Visual Objects compatible extensions: no
FoxPro compatible extensions: no
dBase compatible extensions: no
CLIP compatible extensions: no
Non-portable Harbour extensions: no
Profiler: off
Memory tracing and statistics: off
Maximum symbol name length: 63
---------------------------

10/05/08 21:00:17 Windows XP 5.1.2600 Service Pack 3
Harbour 1.1.0dev (Rev. 9550) (MT)+ Microsoft Visual C 15.0.26569 (32  
bit)
THREADS: 4
N_LOOPS: 1000000
                                                         1 th.  4 th.   
factor
= 
= 
= 
= 
========================================================================
[ T001: x := L_C ]____________________________________  0.73   0.78 - 
 >  0.94
[ T002: x := L_N ]____________________________________  0.28   0.50 - 
 >  0.56
[ T003: x := L_D ]____________________________________  0.30   0.48 - 
 >  0.61
[ T004: x := S_C ]____________________________________  0.74   0.81 - 
 >  0.91
[ T005: x := S_N ]____________________________________  0.31   0.56 - 
 >  0.56
[ T006: x := S_D ]____________________________________  0.31   0.55 - 
 >  0.57
[ T007: x := M_C ]____________________________________  0.83   0.98 - 
 >  0.84
[ T008: x := M_N ]____________________________________  0.41   0.74 - 
 >  0.55
[ T009: x := M_D ]____________________________________  0.42   0.72 - 
 >  0.59
[ T010: x := P_C ]____________________________________  0.53   0.78 - 
 >  0.68
[ T011: x := P_N ]____________________________________  0.41   0.72 - 
 >  0.56
[ T012: x := P_D ]____________________________________  0.42   0.72 - 
 >  0.59
[ T013: x := F_C ]____________________________________  2.14   2.30 - 
 >  0.93
[ T014: x := F_N ]____________________________________  1.55   1.72 - 
 >  0.90
[ T015: x := F_D ]____________________________________  0.89   0.97 - 
 >  0.92
[ T016: x := o:GenCode ]______________________________  1.47   1.92 - 
 >  0.76
[ T017: x := o[8] ]___________________________________  1.13   1.22 - 
 >  0.92
[ T018: round( i / 1000, 2 ) ]________________________  1.36   1.80 - 
 >  0.76
[ T019: str( i / 1000 ) ]_____________________________  3.80   4.66 - 
 >  0.82
[ T020: val( s ) ]____________________________________  2.13   2.86 - 
 >  0.74
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  4.26   4.24 - 
 >  1.01
[ T022: dtos( d - i % 10000 ) ]_______________________  3.66   3.73 - 
 >  0.98
[ T023: eval( { || i % 16 } ) ]_______________________  6.92  12.66 - 
 >  0.55
[ T024: eval( bc := { || i % 16 } ) ]_________________  2.24   2.63 - 
 >  0.85
[ T025: eval( { |x| x % 16 }, i ) ]___________________  4.47  11.05 - 
 >  0.40
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  2.25   2.41 - 
 >  0.93
[ T027: eval( { |x| f1( x ) }, i ) ]__________________  4.72  25.11 - 
 >  0.19
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  2.28   2.69 - 
 >  0.85
[ T029: x := &( "f1(" + str(i) + ")" ) ]______________ 26.72  43.86 - 
 >  0.61
[ T030: bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]______ 32.88  53.64 - 
 >  0.61
[ T031: x := valtype( x ) +  valtype( i ) ]___________  3.86   4.53 - 
 >  0.85
[ T032: x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ]  5.67   6.83 - 
 >  0.83
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  2.76   2.91 - 
 >  0.95
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  2.89   3.17 - 
 >  0.91
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  2.92   3.17 - 
 >  0.92
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  2.89   3.19 - 
 >  0.91
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  2.92   3.17 - 
 >  0.92
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  2.88   3.19 - 
 >  0.90
[ T039: ascan( a, i % 16 ) ]__________________________  2.33   2.84 - 
 >  0.82
[ T040: ascan( a, { |x| x == i % 16 } ) ]_____________ 26.53  29.31 - 
 >  0.91
[ T041: if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2 ] 11.80  28.45 - 
 >  0.41
[ T042: x := a ]______________________________________  0.75   0.77 - 
 >  0.98
[ T043: x := {} ]_____________________________________  3.03  35.72 - 
 >  0.08
[ T044: f0() ]________________________________________  0.59   1.11 - 
 >  0.53
[ T045: f1( i ) ]_____________________________________  0.80   1.41 - 
 >  0.57
[ T046: f2( c[1...8] ) ]______________________________  1.14   1.64 - 
 >  0.69
[ T047: f2( c[1...40000] ) ]__________________________  1.14   1.58 - 
 >  0.72
[ T048: f2( @c[1...40000] ) ]_________________________  1.14   1.58 - 
 >  0.72
[ T049: f2( @c[1...40000] ), c2 := c ]________________  1.38   1.88 - 
 >  0.73
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  3.41   4.06 - 
 >  0.84
[ T051: f2( a ) ]_____________________________________  1.19   1.61 - 
 >  0.74
[ T052: x := f4() ]___________________________________  5.94   5.86 - 
 >  1.01
[ T053: x := f5() ]___________________________________  2.67   3.05 - 
 >  0.88
[ T054: f_prv( c ) ]__________________________________  5.64   5.22 - 
 >  1.08
= 
= 
= 
= 
========================================================================
[   TOTAL   ]_________________________________________206.79 344.02 - 
 >  0.60
= 
= 
= 
= 
========================================================================
[ total application time: ]...................................829.94
[ total real time: ]..........................................550.83


Harbour Build Info
---------------------------
Version: Harbour 1.1.0dev (Rev. 9550)
PCode version: 0.2
Compiler: Microsoft Visual C 15.0.26569 (32 bit)
Platform: Windows XP 5.1.2600 Service Pack 3

Built on: Oct  5 2008 19:48:31
Last ChangeLog entry: 2008-10-05 18:46 UTC+0200 Viktor Szakats  
(harbour.01 syenar hu)
ChangeLog SVN version: ChangeLog 9550 2008-10-05 16:47:14Z vszakats
Extra Harbour compiler switches: -l -gc3
Extra C compiler switches: -DHB_NO_DEBUG -DHB_FM_STATISTICS_OFF
Other build settings: (C mode)

Clipper 5.3b compatible extensions: yes
Clipper 5.2e/5.3b compatible undocumented: yes
Clipper 5.2e/5.3b strict compatibility: no
Xbase++ compatible extensions: yes
FlagShip compatible extensions: yes
Visual Objects compatible extensions: no
FoxPro compatible extensions: no
dBase compatible extensions: no
CLIP compatible extensions: no
Non-portable Harbour extensions: no
Profiler: off
Memory tracing and statistics: off
Maximum symbol name length: 63
---------------------------

10/05/08 21:09:28 Windows XP 5.1.2600 Service Pack 3
Harbour 1.1.0dev (Rev. 9550) (MT)+ Microsoft Visual C 15.0.26569 (32  
bit)
THREADS: 4
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032
                                                         1 th.  4 th.   
factor
= 
= 
= 
= 
========================================================================
[ T001: x := L_C ]____________________________________  0.74   0.78 - 
 >  0.94
[ T002: x := L_N ]____________________________________  0.30   0.50 - 
 >  0.59
[ T003: x := L_D ]____________________________________  0.30   0.51 - 
 >  0.58
[ T004: x := S_C ]____________________________________  0.72   0.81 - 
 >  0.88
[ T005: x := S_N ]____________________________________  0.31   0.55 - 
 >  0.57
[ T006: x := S_D ]____________________________________  0.31   0.55 - 
 >  0.57
[ T007: x := M_C ]____________________________________  0.84   0.98 - 
 >  0.86
[ T008: x := M_N ]____________________________________  0.41   0.72 - 
 >  0.57
[ T009: x := M_D ]____________________________________  0.41   0.73 - 
 >  0.55
[ T010: x := P_C ]____________________________________  0.50   0.78 - 
 >  0.64
[ T011: x := P_N ]____________________________________  0.41   0.72 - 
 >  0.57
[ T012: x := P_D ]____________________________________  0.41   0.72 - 
 >  0.57
[ T013: x := F_C ]____________________________________  2.16   2.36 - 
 >  0.91
[ T014: x := F_N ]____________________________________  1.56   1.70 - 
 >  0.92
[ T015: x := F_D ]____________________________________  0.92   0.95 - 
 >  0.97
[ T016: x := o:GenCode ]______________________________  1.48   1.91 - 
 >  0.78
[ T017: x := o[8] ]___________________________________  0.95   1.22 - 
 >  0.78
[ T018: round( i / 1000, 2 ) ]________________________  1.36   1.78 - 
 >  0.76
[ T020: val( s ) ]____________________________________  2.42   2.73 - 
 >  0.89
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  3.56   4.24 - 
 >  0.84
[ T024: eval( bc := { || i % 16 } ) ]_________________  2.47   2.58 - 
 >  0.96
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  2.22   2.41 - 
 >  0.92
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  2.30   2.63 - 
 >  0.88
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  2.72   2.89 - 
 >  0.94
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  2.86   3.17 - 
 >  0.90
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  2.86   3.17 - 
 >  0.90
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  2.86   3.16 - 
 >  0.91
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  2.91   3.17 - 
 >  0.92
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  2.83   3.19 - 
 >  0.89
[ T039: ascan( a, i % 16 ) ]__________________________  2.28   2.80 - 
 >  0.82
[ T042: x := a ]______________________________________  0.74   0.80 - 
 >  0.92
[ T044: f0() ]________________________________________  0.59   1.09 - 
 >  0.54
[ T045: f1( i ) ]_____________________________________  0.75   1.41 - 
 >  0.53
[ T046: f2( c[1...8] ) ]______________________________  1.14   1.67 - 
 >  0.68
[ T047: f2( c[1...40000] ) ]__________________________  1.14   1.58 - 
 >  0.72
[ T048: f2( @c[1...40000] ) ]_________________________  1.53   1.63 - 
 >  0.94
[ T049: f2( @c[1...40000] ), c2 := c ]________________  1.63   1.88 - 
 >  0.87
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  3.42   3.98 - 
 >  0.86
[ T051: f2( a ) ]_____________________________________  1.17   1.66 - 
 >  0.71
[ T054: f_prv( c ) ]__________________________________  4.94   5.25 - 
 >  0.94
= 
= 
= 
= 
========================================================================
[   TOTAL   ]_________________________________________ 63.41  75.34 - 
 >  0.84
= 
= 
= 
= 
========================================================================
[ total application time: ]...................................212.88
[ total real time: ]..........................................138.78


Brgds,
Viktor


On 2008.10.05., at 19:27, Przemyslaw Czerpak wrote:

> On Sun, 05 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> Pls find results attached.
>> [ Update: I've included tests with "not-yet-released" dlmalloc.
>> This will give the best results in MT+ mode, but slightly worse
>> results with MT/ST modes, so I guess its switches would need to
>> be tweaked for hbvmmt.lib vs hbvm.lib. ]
>
> Thank you very much.
> I've just changed speedtst and now it's possible to check scalability
> in simple test which should well show poor scalable places.
> Because it executes exactly the same loop test simultaneously without
> any other code then it should show as performance reduction even empty
> mutex calls.
> Please try to make test like:
>   speedtst --threads=4 --scale
> and you will see what is not well scalable.
>
> In my computer for current HVM
>   ./speedtst --thread=3 --scale --exclude=mem
> gives:
>
> 10/05/08 18:47:29 Linux 2.6.25.11-0.1-pae i686
> Harbour 1.1.0dev (Rev. 9535) (MT)+ GNU C 4.3.1 (32 bit)
> THREADS: 3
> N_LOOPS: 1000000
> excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031  
> 032
>                                                  1 th.  3 th.  factor
> ======================================================================
> [ T001: x := L_C ]______________________________  0.27   0.10 ->  2.79
> [ T002: x := L_N ]______________________________  0.22   0.07 ->  3.03
> [ T003: x := L_D ]______________________________  0.22   0.07 ->  2.97
> [ T004: x := S_C ]______________________________  0.32   0.37 ->  0.88
> [ T005: x := S_N ]______________________________  0.28   0.09 ->  2.93
> [ T006: x := S_D ]______________________________  0.29   0.10 ->  2.97
> [ T007: x := M_C ]______________________________  0.37   0.12 ->  2.99
> [ T008: x := M_N ]______________________________  0.33   0.11 ->  2.99
> [ T009: x := M_D ]______________________________  0.33   0.11 ->  2.96
> [ T010: x := P_C ]______________________________  0.37   0.12 ->  3.01
> [ T011: x := P_N ]______________________________  0.33   0.12 ->  2.77
> [ T012: x := P_D ]______________________________  0.33   0.11 ->  2.97
> [ T013: x := F_C ]______________________________  0.73   0.27 ->  2.77
> [ T014: x := F_N ]______________________________  0.87   0.34 ->  2.54
> [ T015: x := F_D ]______________________________  0.48   0.16 ->  3.01
> [ T016: x := o:GenCode ]________________________  0.84   0.27 ->  3.10
> [ T017: x := o[8] ]_____________________________  0.51   0.17 ->  3.01
> [ T018: round( i / 1000, 2 ) ]__________________  1.03   0.37 ->  2.76
> [ T020: val( s ) ]______________________________  1.11   0.37 ->  2.98
> [ T021: val( a [ i % 16 + 1 ] ) ]_______________  1.80   0.59 ->  3.05
> [ T024: eval( bc := { || i % 16 } ) ]___________  1.21   0.52 ->  2.34
> [ T026: eval( bc := { |x| x % 16 }, i ) ]_______  1.23   0.42 ->  2.91
> [ T028: eval( bc := { |x| f1( x ) }, i ) ]______  1.51   0.54 ->  2.81
> [ T033: x := a[ i % 16 + 1 ] == s ]_____________  1.21   0.45 ->  2.69
> [ T034: x := a[ i % 16 + 1 ] = s ]______________  1.34   0.49 ->  2.71
> [ T035: x := a[ i % 16 + 1 ] >= s ]_____________  1.36   0.49 ->  2.76
> [ T036: x := a[ i % 16 + 1 ] <= s ]_____________  1.35   0.54 ->  2.49
> [ T037: x := a[ i % 16 + 1 ] < s ]______________  1.32   0.50 ->  2.62
> [ T038: x := a[ i % 16 + 1 ] > s ]______________  1.36   0.46 ->  2.97
> [ T039: ascan( a, i % 16 ) ]____________________  1.46   0.49 ->  2.97
> [ T042: x := a ]________________________________  0.29   0.10 ->  2.89
> [ T044: f0() ]__________________________________  0.55   0.18 ->  3.00
> [ T045: f1( i ) ]_______________________________  0.67   0.25 ->  2.63
> [ T046: f2( c[1...8] ) ]________________________  0.67   0.23 ->  2.95
> [ T047: f2( c[1...40000] ) ]____________________  0.67   0.22 ->  2.97
> [ T048: f2( @c[1...40000] ) ]___________________  0.67   0.22 ->  2.97
> [ T049: f2( @c[1...40000] ), c2 := c ]__________  0.77   0.26 ->  2.96
> [ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]____  1.61   0.57 ->  2.83
> [ T051: f2( a ) ]_______________________________  0.69   0.23 ->  2.95
> [ T054: f_prv( c ) ]____________________________  1.86   0.65 ->  2.86
> ======================================================================
> [   TOTAL   ]___________________________________ 32.85  11.89 ->  2.76
> ======================================================================
> [ total application time: ]....................................66.90
> [ total real time: ]...........................................44.74
>
> so the results are very close to number of CPUs - I've got 3 ones.
> These are very similar results to pure C code I tested.
> In this test we use only real time returned by seconds() functions
> so we also calculate OS and other process activity reducing the
> factor because such overhead is smaller when only one CPU is used
> by us and rest can be used for other task.
>
> Please also look at this:
>
>   [ T004: x := S_C ]___________________________  0.32   0.37 ->  0.88
>
> In this test exactly the same reference counter for string in S_C is
> increased and decreased by different threads. In my computer when many
> threads writes to the same memory cell some serialization action is
> automatically executed and it reduces the performance to single thread
> level.
> After checking results you all sent in last days seems that it's  
> strictly
> hardware oriented behavior and in other computers the overhead may be
> different. Anyhow this does not effect overall performance and  
> scalability
> in normal code which makes also sth else then simple coping and  
> releasing
> the same string item by different threads.
>
> For me these results are very well.
> But the situation is a little bit different when we have to enable  
> tests
> which allocates and release memory.
> In such case the total speed factor can be reduced by MM and spinlock
> inside garbage.c - in my case this is not trivial cost because it's
> also simultaneous write to the same memory cell which forces  
> serialization.
> This is well seen in this test:
>   [ T043: x := {} ]_______________________________  0.67   1.65 ->   
> 0.40
> To make it more funny my Linux (SUSE11.0) has very efficient MM in  
> MT mode
> and in this tests returns new memory block without any internal  
> locks what
> causes that this is the only one critical places and all threads  
> working
> in loops are blocked on one spinlock. I'm very interesting how it  
> looks in
> other computers.
>
>
> Here I my detail results with all tests:
>
> 10/05/08 19:04:56 Linux 2.6.25.11-0.1-pae i686
> Harbour 1.1.0dev (Rev. 9535) (MT)+ GNU C 4.3.1 (32 bit)
> THREADS: 3
> N_LOOPS: 1000000
>                                                        1 th.  3 th.   
> factor
> ======================================================================
> [ T001: x := L_C ]______________________________  0.28   0.09 ->  3.07
> [ T002: x := L_N ]______________________________  0.22   0.07 ->  2.98
> [ T003: x := L_D ]______________________________  0.22   0.07 ->  3.00
> [ T004: x := S_C ]______________________________  0.33   0.37 ->  0.89
> [ T005: x := S_N ]______________________________  0.28   0.09 ->  2.98
> [ T006: x := S_D ]______________________________  0.28   0.10 ->  2.96
> [ T007: x := M_C ]______________________________  0.37   0.13 ->  2.96
> [ T008: x := M_N ]______________________________  0.33   0.11 ->  2.95
> [ T009: x := M_D ]______________________________  0.33   0.12 ->  2.70
> [ T010: x := P_C ]______________________________  0.38   0.13 ->  2.87
> [ T011: x := P_N ]______________________________  0.33   0.11 ->  2.99
> [ T012: x := P_D ]______________________________  0.33   0.11 ->  2.97
> [ T013: x := F_C ]______________________________  0.72   0.25 ->  2.88
> [ T014: x := F_N ]______________________________  0.87   0.29 ->  2.96
> [ T015: x := F_D ]______________________________  0.48   0.17 ->  2.89
> [ T016: x := o:GenCode ]________________________  0.84   0.29 ->  2.91
> [ T017: x := o[8] ]_____________________________  0.50   0.17 ->  2.98
> [ T018: round( i / 1000, 2 ) ]__________________  1.03   0.36 ->  2.90
> [ T019: str( i / 1000 ) ]_______________________  2.13   0.73 ->  2.91
> [ T020: val( s ) ]______________________________  1.11   0.39 ->  2.89
> [ T021: val( a [ i % 16 + 1 ] ) ]_______________  1.79   0.60 ->  2.96
> [ T022: dtos( d - i % 10000 ) ]_________________  1.56   0.53 ->  2.92
> [ T023: eval( { || i % 16 } ) ]_________________  2.01   2.25 ->  0.89
> [ T024: eval( bc := { || i % 16 } ) ]___________  1.25   0.41 ->  3.01
> [ T025: eval( { |x| x % 16 }, i ) ]_____________  1.63   2.12 ->  0.77
> [ T026: eval( bc := { |x| x % 16 }, i ) ]_______  1.27   0.42 ->  2.99
> [ T027: eval( { |x| f1( x ) }, i ) ]____________  1.93   2.28 ->  0.85
> [ T028: eval( bc := { |x| f1( x ) }, i ) ]______  1.51   0.53 ->  2.86
> [ T029: x := &( "f1(" + str(i) + ")" ) ]________ 11.58   4.56 ->  2.54
> [ T030: bc := &( "{|x|f1(x)}" ); eval( bc, i ) _ 13.30   5.57 ->  2.39
> [ T031: x := valtype( x ) +  valtype( i ) ]_____  1.67   0.57 ->  2.95
> [ T032: x := strzero( i % 100, 2 ) $ a[ i % 16 ]  2.84   1.14 ->  2.50
> [ T033: x := a[ i % 16 + 1 ] == s ]_____________  1.22   0.45 ->  2.72
> [ T034: x := a[ i % 16 + 1 ] = s ]______________  1.32   0.55 ->  2.39
> [ T035: x := a[ i % 16 + 1 ] >= s ]_____________  1.38   0.48 ->  2.87
> [ T036: x := a[ i % 16 + 1 ] <= s ]_____________  1.35   0.50 ->  2.67
> [ T037: x := a[ i % 16 + 1 ] < s ]______________  1.31   0.48 ->  2.75
> [ T038: x := a[ i % 16 + 1 ] > s ]______________  1.36   0.54 ->  2.52
> [ T039: ascan( a, i % 16 ) ]____________________  1.51   0.50 ->  3.00
> [ T040: ascan( a, { |x| x == i % 16 } ) ]_______ 12.80   5.18 ->  2.47
> [ T041: if i%1000==0;a:={};end; aadd(a,{i,1,.T.]  3.52   2.20 ->  1.60
> [ T042: x := a ]________________________________  0.30   0.10 ->  2.97
> [ T043: x := {} ]_______________________________  0.67   1.65 ->  0.40
> [ T044: f0() ]__________________________________  0.56   0.20 ->  2.87
> [ T045: f1( i ) ]_______________________________  0.67   0.24 ->  2.76
> [ T046: f2( c[1...8] ) ]________________________  0.67   0.23 ->  2.92
> [ T047: f2( c[1...40000] ) ]____________________  0.67   0.24 ->  2.74
> [ T048: f2( @c[1...40000] ) ]___________________  0.67   0.23 ->  2.94
> [ T049: f2( @c[1...40000] ), c2 := c ]__________  0.76   0.26 ->  2.91
> [ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]____  1.63   0.66 ->  2.46
> [ T051: f2( a ) ]_______________________________  0.69   0.24 ->  2.94
> [ T052: x := f4() ]_____________________________  1.93   0.66 ->  2.93
> [ T053: x := f5() ]_____________________________  1.25   0.44 ->  2.84
> [ T054: f_prv( c ) ]____________________________  1.84   0.64 ->  2.88
> ======================================================================
> [   TOTAL   ]___________________________________ 91.76  41.80 ->  2.19
> ======================================================================
> [ total application time: ]...................................211.15
> [ total real time: ]..........................................133.56
>
> As you can see the total performance were reduced to 2.19.
> But this whole test exploits the worst possible cases increasing the
> collisions because each thread executed exactly the same code so this
> is the worst possible situation and normal user code should be very  
> well
> scalable.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sun Oct  5 15:18:12 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 15:18:22 2008
Subject: [Harbour] 2008-10-05 17:53 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081005190444.GA2093@34-mo7-2.acn.waw.pl>
References: <20081005155349.GA29760@34-mo7-2.acn.waw.pl>
	<FCA90007D2D74CA7B58F423F025A6B69@emag>
	<20081005190444.GA2093@34-mo7-2.acn.waw.pl>
Message-ID: <2E19B3B9-C553-45E2-8CF4-5DFD066C9712@syenar.hu>

>
Hi Przemek,

> But the cost of memory allocations is very big. To improve scalability
> here memory manager optimized for MT mode is necessary. It's not  
> directly
> related to Harbour though we can add some workarounds to reduce the  
> overhead
> in Harbour layer. But rather not now. In real applications it should  
> not
> cause such big problem because threads will make also other things  
> not only
> allocate and free memory in a loop :-)

If we can do something on the Harbour level even better,
but the latest dlmalloc version seems to give very good
results. Since it's unreleased I don't know how safe it
is to include it though. We should also explore how to
avoid the slowdown in ST mode.

You can find the file here:
http://www.syenar.hu/harbour/dlmalloc-284.zip

Brgds,
Viktor


From druzus at acn.waw.pl  Sun Oct  5 15:27:38 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct  5 15:27:49 2008
Subject: [SPAM]  Re: [Harbour] 2008-10-05 17:53 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <19827182.post@talk.nabble.com>
References: <20081005155349.GA29760@34-mo7-2.acn.waw.pl>
	<19827182.post@talk.nabble.com>
Message-ID: <20081005192738.GB2093@34-mo7-2.acn.waw.pl>

On Sun, 05 Oct 2008, Pritpal Bedi wrote:

Hi Pritpal,

> 10/05/08 09:50:08 Windows XP 5.1.2600 Service Pack 2
> Harbour 1.1.0dev (Rev. 9549) (MT)+ Borland C++ 5.5.1 (32 bit)
> N_LOOPS: 1000000
>  _1.th  _8.th     factor    _1.th  _4.th     factor
>  ================   =================  ==============
>  _2.34  _4.77 ->  0.49    _1.14  _2.33 ->  0.49   [ T001: x := L_C ]
>  _1.94  _5.25 ->  0.37    _0.95  _1.95 ->  0.49   [ T002: x := L_N ]
>  _1.91  _4.06 ->  0.47    _0.94  _1.97 ->  0.48   [ T003: x := L_D ]
>  _2.33  _4.39 ->  0.53    _1.17  _2.05 ->  0.57   [ T004: x := S_C ]
>  _1.89  _4.03 ->  0.47    _0.94  _1.78 ->  0.53   [ T005: x := S_N ]
>  _1.95  _4.00 ->  0.49    _0.97  _1.94 ->  0.50   [ T006: x := S_D ]
>  _2.47  _4.67 ->  0.53    _1.27  _2.26 ->  0.56   [ T007: x := M_C ]
>  _2.05  _4.03 ->  0.51    _1.02  _1.98 ->  0.51   [ T008: x := M_N ]
>  _2.03  _4.03 ->  0.50    _1.03  _1.91 ->  0.54   [ T009: x := M_D ]
>  _2.11  _4.17 ->  0.51    _1.16  _2.08 ->  0.56   [ T010: x := P_C ]
>  _2.05  _4.05 ->  0.51    _1.03  _1.95 ->  0.53   [ T011: x := P_N ]
>  _2.05  _4.06 ->  0.50    _1.05  _1.94 ->  0.54   [ T012: x := P_D ]
>  _3.89  _5.89 ->  0.66    _1.97  _2.88 ->  0.68   [ T013: x := F_C ]
>  _3.28  _3.53 ->  0.93    _1.63  _1.75 ->  0.93   [ T014: x := F_N ]
>  _2.34  _4.09 ->  0.57    _1.19  _2.00 ->  0.59   [ T015: x := F_D ]
>  _4.24  _5.13 ->  0.83    _2.11  _2.47 ->  0.85   [ T016: x := o:GenCode ]
>  _3.50  _5.83 ->  0.60    _1.74  _2.41 ->  0.72   [ T017: x := o[8] ]
>  _4.58  _3.91 ->  1.17    _2.27  _1.75 ->  1.29   [ T018: round( i / 1000, 2 ) ]
>  _9.59  10.20 ->  0.94    _4.77  _5.78 ->  0.82   [ T019: str( i / 1000 ) ]
>  _4.50  _3.02 ->  1.49    _2.27  _1.45 ->  1.56   [ T020: val( s ) ]
>  _7.97  _8.09 ->  0.98    _3.99  _3.95 ->  1.01   [ T021: val( a [ i % 16 + 1 ] ) ]
>  _7.72  _6.50 ->  1.19    _3.80  _3.33 ->  1.14   [ T022: dtos( d - i % 10000 ) ]
>  _9.86  38.39 ->  0.26    _4.89  28.09 ->  0.17   [ T023: eval( { || i % 16 } ) ]
>  _5.00  _7.63 ->  0.66    _2.53  _3.67 ->  0.69   [ T024: eval( bc := { || i % 16 } ) ]
>  _7.91  50.27 ->  0.16    _3.89  19.39 ->  0.20   [ T025: eval( { |x| x % 16 }, i ) ]
>  _5.80  _8.59 ->  0.67    _2.86  _4.19 ->  0.68   [ T026: eval( bc := { |x| x % 16 }, i ) ]
>  _9.67  50.03 ->  0.19    _4.88  23.83 ->  0.20   [ T027: eval( { |x| f1( x ) }, i ) ]
>  _7.53  11.28 ->  0.67    _3.75  _5.36 ->  0.70   [ T028: eval( bc := { |x| f1( x ) }, i ) ]
>  42.44  63.16 ->  0.67    21.55  31.52 ->  0.68   [ T029: x := &( "f1(" + str(i) + ")" ) ]
>  54.95  86.47 ->  0.64    27.41  43.08 ->  0.64   [ T030: bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]
>  _8.72  10.16 ->  0.86    _4.42  _5.19 ->  0.85   [ T031: x := valtype( x ) +  valtype( i ) ]
>  13.81  11.58 ->  1.19    _7.02  _6.17 ->  1.14   [ T032: x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ]
>  _6.91  11.39 ->  0.61    _3.42  _5.55 ->  0.62   [ T033: x := a[ i % 16 + 1 ] == s ]
>  _7.30  10.92 ->  0.67    _3.66  _5.41 ->  0.68   [ T034: x := a[ i % 16 + 1 ] = s ]
>  _7.31  10.78 ->  0.68    _3.69  _5.28 ->  0.70   [ T035: x := a[ i % 16 + 1 ] >= s ]
>  _7.30  10.73 ->  0.68    _3.89  _5.20 ->  0.75   [ T036: x := a[ i % 16 + 1 ] <= s ]
>  _7.31  10.76 ->  0.68    _3.75  _5.33 ->  0.70   [ T037: x := a[ i % 16 + 1 ] < s ]
>  _7.31  10.76 ->  0.68    _3.76  _5.31 ->  0.71   [ T038: x := a[ i % 16 + 1 ] > s ]
>  _6.06  _5.98 ->  1.01    _3.09  _2.92 ->  1.06   [ T039: ascan( a, i % 16 ) ]
>  54.78  49.03 ->  1.12    _8.74  25.19 ->  1.14   [ T040: ascan( a, { |x| x == i % 16 } ) ]
>  20.95  35.94 ->  0.58    _0.61  16.73 ->  0.63   [ T041: if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2
>  _2.39  _4.81 ->  0.50    _1.17  _2.36 ->  0.50   [ T042: x := a ]
>  _4.49  43.53 ->  0.10    _2.24  23.19 ->  0.10   [ T043: x := {} ]
>  _2.36  _5.06 ->  0.47    _1.16  _2.34 ->  0.49   [ T044: f0() ]
>  _3.63  _7.84 ->  0.46    _1.83  _3.78 ->  0.48   [ T045: f1( i ) ]
>  _3.55  _7.51 ->  0.47    _1.75  _3.28 ->  0.53   [ T046: f2( c[1...8] ) ]
>  _3.55  _7.72 ->  0.46    _1.76  _3.59 ->  0.49   [ T047: f2( c[1...40000] )]
>  _3.55  _7.70 ->  0.46    _1.75  _3.63 ->  0.48   [ T048: f2( @c[1...40000] ) ]
>  _4.25  _9.14 ->  0.46    _2.06  _4.58 ->  0.45   [ T049: f2( @c[1...40000] ), c2 := c ]
>  10.09  14.63 ->  0.69    _5.03  _7.30 ->  0.69   [ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]
>  _3.61  _7.63 ->  0.47    _1.77  _3.69 ->  0.48   [ T051: f2( a ) ]
>  11.44  13.08 ->  0.87    _5.97  _6.61 ->  0.90   [ T052: x := f4() ]
>  _6.98  _9.16 ->  0.76    _3.44  _4.47 ->  0.77   [ T053: x := f5() ]
>  10.09  12.58 ->  0.80    _5.11  _6.23 ->  0.82   [ T054: f_prv( c ) ]
> =================   ================   ===============
> 437.61 751.95 -> 0.58  221.20 374.35 -> 0.59   [   TOTAL   ]
> =================   ================   ===============
> ...................1740.97   ....................828.50
> ...................1189.58   ....................595.59

Looking at results I guess that you have single CPU machine.
It's very interesting that running two threads simultaneously
causes such big overhead in your system. Looks like very high
cost of thread switching in your OS or it was heavy loaded by
other processes during tests.
I've just run this test on single CPU machine with Linux and SUSE 10.3
and all factors are equal to 1.0 or at least very close to this value
and differences are on the time precision level (we are using real time
not process time). See results below.

> PS : I think how the figures are displayed be be changed as above
> because of non-proportional fonts on browsers. If you agree I can commit.

Please wait a little with such modification. It will break some scripts
I use to extract and compare results.

best regards,
Przemek

10/05/08 21:17:11 Linux 2.6.22.17-0.1-default i686
Harbour 1.1.0dev (Rev. 9541) (MT)+ GNU C 4.2.1 (32 bit)
THREADS: 4
N_LOOPS: 1000000
                                                        1 th.  4 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.82   0.81 ->  1.02
[ T002: x := L_N ]____________________________________  0.37   0.37 ->  1.00
[ T003: x := L_D ]____________________________________  0.37   0.36 ->  1.01
[ T004: x := S_C ]____________________________________  0.50   0.50 ->  1.00
[ T005: x := S_N ]____________________________________  0.46   0.48 ->  0.97
[ T006: x := S_D ]____________________________________  0.44   0.44 ->  1.00
[ T007: x := M_C ]____________________________________  0.62   0.66 ->  0.94
[ T008: x := M_N ]____________________________________  0.55   0.56 ->  0.98
[ T009: x := M_D ]____________________________________  0.53   0.51 ->  1.02
[ T010: x := P_C ]____________________________________  0.60   0.60 ->  0.99
[ T011: x := P_N ]____________________________________  0.52   0.52 ->  1.01
[ T012: x := P_D ]____________________________________  0.51   0.51 ->  1.00
[ T013: x := F_C ]____________________________________  1.18   1.18 ->  1.00
[ T014: x := F_N ]____________________________________  1.35   1.35 ->  1.00
[ T015: x := F_D ]____________________________________  0.79   0.79 ->  1.00
[ T016: x := o:GenCode ]______________________________  1.29   1.29 ->  1.00
[ T017: x := o[8] ]___________________________________  0.90   0.91 ->  0.99
[ T018: round( i / 1000, 2 ) ]________________________  1.83   1.80 ->  1.02
[ T019: str( i / 1000 ) ]_____________________________  3.93   3.95 ->  1.00
[ T020: val( s ) ]____________________________________  1.81   1.79 ->  1.01
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  3.00   3.00 ->  1.00
[ T022: dtos( d - i % 10000 ) ]_______________________  2.85   2.82 ->  1.01
[ T023: eval( { || i % 16 } ) ]_______________________  3.70   3.75 ->  0.99
[ T024: eval( bc := { || i % 16 } ) ]_________________  2.20   2.20 ->  1.00
[ T025: eval( { |x| x % 16 }, i ) ]___________________  3.14   3.18 ->  0.99
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  2.28   2.25 ->  1.01
[ T027: eval( { |x| f1( x ) }, i ) ]__________________  3.49   3.51 ->  0.99
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  2.70   2.70 ->  1.00
[ T029: x := &( "f1(" + str(i) + ")" ) ]______________ 23.02  22.86 ->  1.01
[ T030: bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]______ 25.19  25.49 ->  0.99
[ T031: x := valtype( x ) +  valtype( i ) ]___________  2.84   2.83 ->  1.00
[ T032: x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ]  5.15   5.15 ->  1.00
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  2.19   2.18 ->  1.00
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  2.41   2.41 ->  1.00
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  2.39   2.38 ->  1.00
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  2.38   2.38 ->  1.00
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  2.38   2.37 ->  1.00
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  2.44   2.43 ->  1.00
[ T039: ascan( a, i % 16 ) ]__________________________  2.44   2.42 ->  1.01
[ T040: ascan( a, { |x| x == i % 16 } ) ]_____________ 25.62  25.74 ->  1.00
[ T041: if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2 ]  6.32   7.22 ->  0.87
[ T042: x := a ]______________________________________  0.50   0.50 ->  1.01
[ T043: x := {} ]_____________________________________  1.22   1.19 ->  1.03
[ T044: f0() ]________________________________________  1.00   1.01 ->  0.99
[ T045: f1( i ) ]_____________________________________  1.23   1.23 ->  1.00
[ T046: f2( c[1...8] ) ]______________________________  1.23   1.21 ->  1.02
[ T047: f2( c[1...40000] ) ]__________________________  1.23   1.23 ->  0.99
[ T048: f2( @c[1...40000] ) ]_________________________  1.23   1.23 ->  1.00
[ T049: f2( @c[1...40000] ), c2 := c ]________________  1.43   1.42 ->  1.00
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  2.94   2.96 ->  0.99
[ T051: f2( a ) ]_____________________________________  1.27   1.27 ->  1.00
[ T052: x := f4() ]___________________________________  3.87   3.87 ->  1.00
[ T053: x := f5() ]___________________________________  2.43   2.44 ->  1.00
[ T054: f_prv( c ) ]__________________________________  3.59   3.59 ->  1.00
============================================================================
[   TOTAL   ]_________________________________________170.64 171.79 ->  0.99
============================================================================
[ total application time: ]...................................342.14
[ total real time: ]..........................................342.43
From e.m.giordano at emagsoftware.it  Sun Oct  5 15:39:44 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sun Oct  5 15:39:51 2008
Subject: [Harbour] 2008-10-05 17:53 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
References: <20081005155349.GA29760@34-mo7-2.acn.waw.pl><FCA90007D2D74CA7B58F423F025A6B69@emag>
	<20081005190444.GA2093@34-mo7-2.acn.waw.pl>
Message-ID: <546B9FD8C1D64679BD647530573AB7F9@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: domenica 5 ottobre 2008 21.04
Oggetto: Re: [Harbour] 2008-10-05 17:53 UTC+0200 
PrzemyslawCzerpak(druzus/at/priv.onet.pl)


> If you can please also make test for:
>   speedtst --thread=2 --scale --exclude=mem

Here it is:

E:\HARBOUR>speedtst --thread=2 --scale --exclude=mem

10/05/08 21:37:52 Windows XP 5.1.2600 Service Pack 3
Harbour 1.1.0dev (Rev. 9550) (MT)+ Borland C++ 5.5.1 (32 bit)
THREADS: 2
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032
                                                        1 th.  2 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.42   0.20 ->  2.06
[ T002: x := L_N ]____________________________________  0.30   0.14 ->  2.11
[ T003: x := L_D ]____________________________________  0.31   0.16 ->  2.00
[ T004: x := S_C ]____________________________________  0.52   0.34 ->  1.50
[ T005: x := S_N ]____________________________________  0.41   0.20 ->  2.00
[ T006: x := S_D ]____________________________________  0.39   0.20 ->  1.93
[ T007: x := M_C ]____________________________________  0.56   0.30 ->  1.89
[ T008: x := M_N ]____________________________________  0.45   0.22 ->  2.07
[ T009: x := M_D ]____________________________________  0.45   0.24 ->  1.93
[ T010: x := P_C ]____________________________________  0.51   0.28 ->  1.83
[ T011: x := P_N ]____________________________________  0.45   0.23 ->  1.94
[ T012: x := P_D ]____________________________________  0.45   0.22 ->  2.07
[ T013: x := F_C ]____________________________________  0.92   1.25 ->  0.74
[ T014: x := F_N ]____________________________________  0.78   0.39 ->  2.01
[ T015: x := F_D ]____________________________________  0.55   0.26 ->  2.06
[ T016: x := o:GenCode ]______________________________  1.03   0.51 ->  2.00
[ T017: x := o[8] ]___________________________________  0.80   0.53 ->  1.50
[ T018: round( i / 1000, 2 ) ]________________________  1.00   0.50 ->  2.00
[ T020: val( s ) ]____________________________________  1.11   0.56 ->  1.97
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  1.97   1.00 ->  1.97
[ T024: eval( bc := { || i % 16 } ) ]_________________  1.30   0.70 ->  1.84
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  1.36   0.69 ->  1.98
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  1.77   0.91 ->  1.95
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  1.64   0.86 ->  1.91
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  1.77   1.00 ->  1.77
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  1.78   0.95 ->  1.87
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  1.77   0.95 ->  1.85
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  1.76   0.97 ->  1.82
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  1.74   0.92 ->  1.88
[ T039: ascan( a, i % 16 ) ]__________________________  1.53   0.94 ->  1.64
[ T042: x := a ]______________________________________  0.45   0.22 ->  2.07
[ T044: f0() ]________________________________________  0.51   0.27 ->  1.94
[ T045: f1( i ) ]_____________________________________  0.77   0.38 ->  2.04
[ T046: f2( c[1...8] ) ]______________________________  0.81   0.41 ->  2.00
[ T047: f2( c[1...40000] ) ]__________________________  0.81   0.41 ->  2.00
[ T048: f2( @c[1...40000] ) ]_________________________  0.80   0.41 ->  1.96
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.84   0.42 ->  2.00
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  2.41   1.22 ->  1.97
[ T051: f2( a ) ]_____________________________________  0.83   0.41 ->  2.04
[ T054: f_prv( c ) ]__________________________________  2.31   1.42 ->  1.63
============================================================================
[   TOTAL   ]_________________________________________ 40.34  22.19 ->  1.82
============================================================================
[ total application time: ]....................................84.09
[ total real time: ]...........................................62.64

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lorenzo.fiorini at gmail.com  Sun Oct  5 15:52:44 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Oct  5 15:52:53 2008
Subject: [Harbour] 2008-10-05 17:53 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081005190444.GA2093@34-mo7-2.acn.waw.pl>
References: <20081005155349.GA29760@34-mo7-2.acn.waw.pl>
	<FCA90007D2D74CA7B58F423F025A6B69@emag>
	<20081005190444.GA2093@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0810051252t938236n39d5053539152fcb@mail.gmail.com>

On Sun, Oct 5, 2008 at 9:04 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Thank you very much. As I can see you two CPU machine and in all tests
> which does not allocate new memory you have the factor close to 2.0.
> Very nice. Also:
>   [ T004: x := S_C ]______________________________  2.09   1.39 ->  1.51
> Is quite good so the overhead caused by operating on the same reference
> counter is relatively small. At least much smaller then in my machine.
> So probably the same will be with spinlocks.
> If you can please also make test for:
>   speedtst --thread=2 --scale --exclude=mem
> It will be much shorter due the less number of threads and tests.

Just for report, here is my cat /proc/cpuinfo:

model name	: Intel(R) Core(TM)2 Duo CPU     E6750  @ 2.66GHz

I'm faster but I'm far from 2.0 using:

 ./speedtst --thread=2 --scale --exclude=mem &> speedtst.log

under Fedora 9.

Is it expected?

best regards,
Lorenzo

10/05/08 21:43:57 Linux 2.6.26.5-45.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9551) (MT)+ GNU C 4.3 (32 bit)
THREADS: 2
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032
                                                        1 th.  2 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.25   0.21 ->  1.20
[ T002: x := L_N ]____________________________________  0.18   0.16 ->  1.13
[ T003: x := L_D ]____________________________________  0.17   0.16 ->  1.05
[ T004: x := S_C ]____________________________________  0.23   0.22 ->  1.04
[ T005: x := S_N ]____________________________________  0.17   0.16 ->  1.02
[ T006: x := S_D ]____________________________________  0.17   0.16 ->  1.08
[ T007: x := M_C ]____________________________________  0.25   0.20 ->  1.25
[ T008: x := M_N ]____________________________________  0.19   0.20 ->  0.97
[ T009: x := M_D ]____________________________________  0.18   0.19 ->  0.99
[ T010: x := P_C ]____________________________________  0.24   0.19 ->  1.30
[ T011: x := P_N ]____________________________________  0.19   0.19 ->  0.98
[ T012: x := P_D ]____________________________________  0.19   0.18 ->  1.05
[ T013: x := F_C ]____________________________________  0.50   0.28 ->  1.79
[ T014: x := F_N ]____________________________________  0.48   0.27 ->  1.74
[ T015: x := F_D ]____________________________________  0.27   0.18 ->  1.51
[ T016: x := o:GenCode ]______________________________  0.43   0.25 ->  1.71
[ T017: x := o[8] ]___________________________________  0.34   0.27 ->  1.27
[ T018: round( i / 1000, 2 ) ]________________________  0.57   0.37 ->  1.52
[ T020: val( s ) ]____________________________________  0.62   0.36 ->  1.71
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  0.95   0.59 ->  1.61
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.56   0.43 ->  1.30
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  0.57   0.47 ->  1.23
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  0.76   0.66 ->  1.15
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  0.76   0.60 ->  1.27
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  0.81   0.58 ->  1.39
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  0.80   0.60 ->  1.33
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  0.80   0.59 ->  1.36
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  0.80   0.60 ->  1.34
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  0.78   0.60 ->  1.29
[ T039: ascan( a, i % 16 ) ]__________________________  0.72   0.48 ->  1.52
[ T042: x := a ]______________________________________  0.26   0.20 ->  1.31
[ T044: f0() ]________________________________________  0.30   0.31 ->  0.97
[ T045: f1( i ) ]_____________________________________  0.38   0.36 ->  1.06
[ T046: f2( c[1...8] ) ]______________________________  0.45   0.37 ->  1.22
[ T047: f2( c[1...40000] ) ]__________________________  0.45   0.38 ->  1.19
[ T048: f2( @c[1...40000] ) ]_________________________  0.46   0.39 ->  1.17
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.49   0.46 ->  1.09
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  1.06   0.80 ->  1.33
[ T051: f2( a ) ]_____________________________________  0.45   0.42 ->  1.08
[ T054: f_prv( c ) ]__________________________________  1.23   0.86 ->  1.43
============================================================================
[   TOTAL   ]_________________________________________ 19.48  14.95 ->  1.30
============================================================================
[ total application time: ]....................................44.97
[ total real time: ]...........................................34.43
From harbour.01 at syenar.hu  Sun Oct  5 16:25:10 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 16:25:29 2008
Subject: [Harbour] How to build a Harbour program on Linux/OSX without
	installing it?
Message-ID: <A78F6232-B531-45FE-A6DC-0E90838E22C5@syenar.hu>

Hi all,

As subject:
How to build a Harbour program on Linux/OSX without
installing Harbour itself?

[ I'm working with multiple versions of Harbour at
one time, I'm also not an admin on my machine, and I
generally hate to pollute my system with any non std
packages, even if its Harbour. Yet, I'd like to build
Harbour programs, like speedtst as an example for today. ]

What I did so far:
- untarred the .tgz to a local dir.
- went to /usr/local/../bin/
- run './hbmk -mt -static speedtst.prg'
- got './hbmk: line 361: harbour: command not found'

As an aside, I cannot even run any prebuilt binaries,
as they cannot find the .dylib. (IMO these should use
static libs, to avoid such situation).

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Oct  5 16:28:06 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 16:28:19 2008
Subject: [Harbour] Re: How to build a Harbour program on Linux/OSX without
	installing it?
In-Reply-To: <A78F6232-B531-45FE-A6DC-0E90838E22C5@syenar.hu>
References: <A78F6232-B531-45FE-A6DC-0E90838E22C5@syenar.hu>
Message-ID: <4DB10A87-54C8-4C27-932E-4233C8EE10B1@syenar.hu>

To slightly rephrase my previous question:
- How to use Harbour on Unixes without sudo or admin rights?
- How to use multiple versions of Harbour on Unixes in parallel?

Brgds,
Viktor

On 2008.10.05., at 22:25, Szak?ts Viktor wrote:

> Hi all,
>
> As subject:
> How to build a Harbour program on Linux/OSX without
> installing Harbour itself?
>
> [ I'm working with multiple versions of Harbour at
> one time, I'm also not an admin on my machine, and I
> generally hate to pollute my system with any non std
> packages, even if its Harbour. Yet, I'd like to build
> Harbour programs, like speedtst as an example for today. ]
>
> What I did so far:
> - untarred the .tgz to a local dir.
> - went to /usr/local/../bin/
> - run './hbmk -mt -static speedtst.prg'
> - got './hbmk: line 361: harbour: command not found'
>
> As an aside, I cannot even run any prebuilt binaries,
> as they cannot find the .dylib. (IMO these should use
> static libs, to avoid such situation).
>
> Brgds,
> Viktor
>

From lorenzo.fiorini at gmail.com  Sun Oct  5 16:41:02 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Oct  5 16:41:10 2008
Subject: [Harbour] Re: How to build a Harbour program on Linux/OSX without
	installing it?
In-Reply-To: <4DB10A87-54C8-4C27-932E-4233C8EE10B1@syenar.hu>
References: <A78F6232-B531-45FE-A6DC-0E90838E22C5@syenar.hu>
	<4DB10A87-54C8-4C27-932E-4233C8EE10B1@syenar.hu>
Message-ID: <9257026e0810051341h15535125o50a02611c4513928@mail.gmail.com>

On Sun, Oct 5, 2008 at 10:28 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> To slightly rephrase my previous question:
> - How to use Harbour on Unixes without sudo or admin rights?
> - How to use multiple versions of Harbour on Unixes in parallel?

Creates different install dirs in your home directory.

F.e I have

$HOME/mingw32-harbour
$HOME/mingwce-harbour
$HOME/devel-harbour

hb* scripts will "remember" the install dir so you can use
$HOME/mingw32-harbour/bin/hbmk -n -static -gtnul speedtst.prg

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sun Oct  5 16:48:41 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 16:48:52 2008
Subject: [Harbour] Re: How to build a Harbour program on Linux/OSX without
	installing it?
In-Reply-To: <9257026e0810051341h15535125o50a02611c4513928@mail.gmail.com>
References: <A78F6232-B531-45FE-A6DC-0E90838E22C5@syenar.hu>
	<4DB10A87-54C8-4C27-932E-4233C8EE10B1@syenar.hu>
	<9257026e0810051341h15535125o50a02611c4513928@mail.gmail.com>
Message-ID: <D5CAE071-8C02-4281-A6C3-EA802135F15C@syenar.hu>

That's exactly what I'd like to do :)

Question: How?

I already have several different Harbour dirs in my ~ folder,
but if I build with mpkg_tgz.sh, I'm not getting any hbmk scripts
or binaries in my bin folder, neither any libs in lib.

If I run './make_gnu.sh install', the results is a bunch
of errors '/usr/local/...: No such file or directory'.

[ Shouldn't this by default install in the local dirs? ]

Brgds,
Viktor


On 2008.10.05., at 22:41, Lorenzo Fiorini wrote:

> On Sun, Oct 5, 2008 at 10:28 PM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>> To slightly rephrase my previous question:
>> - How to use Harbour on Unixes without sudo or admin rights?
>> - How to use multiple versions of Harbour on Unixes in parallel?
>
> Creates different install dirs in your home directory.
>
> F.e I have
>
> $HOME/mingw32-harbour
> $HOME/mingwce-harbour
> $HOME/devel-harbour
>
> hb* scripts will "remember" the install dir so you can use
> $HOME/mingw32-harbour/bin/hbmk -n -static -gtnul speedtst.prg
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Sun Oct  5 16:48:57 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct  5 16:49:08 2008
Subject: [Harbour] 2008-10-05 17:53 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <546B9FD8C1D64679BD647530573AB7F9@emag>
References: <20081005190444.GA2093@34-mo7-2.acn.waw.pl>
	<546B9FD8C1D64679BD647530573AB7F9@emag>
Message-ID: <20081005204857.GA666@34-mo7-2.acn.waw.pl>

On Sun, 05 Oct 2008, Enrico Maria Giordano wrote:

Hi Enrico,

> E:\HARBOUR>speedtst --thread=2 --scale --exclude=mem
> 10/05/08 21:37:52 Windows XP 5.1.2600 Service Pack 3
> Harbour 1.1.0dev (Rev. 9550) (MT)+ Borland C++ 5.5.1 (32 bit)
> THREADS: 2
> N_LOOPS: 1000000
> excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032
>                                                        1 th.  2 th.  factor
> ============================================================================
> [ T001: x := L_C ]____________________________________  0.42   0.20 ->  2.06
> [ T002: x := L_N ]____________________________________  0.30   0.14 ->  2.11
> [ T003: x := L_D ]____________________________________  0.31   0.16 ->  2.00
> [ T004: x := S_C ]____________________________________  0.52   0.34 ->  1.50
> [ T005: x := S_N ]____________________________________  0.41   0.20 ->  2.00
> [ T006: x := S_D ]____________________________________  0.39   0.20 ->  1.93
> [ T007: x := M_C ]____________________________________  0.56   0.30 ->  1.89
> [ T008: x := M_N ]____________________________________  0.45   0.22 ->  2.07
> [ T009: x := M_D ]____________________________________  0.45   0.24 ->  1.93
> [ T010: x := P_C ]____________________________________  0.51   0.28 ->  1.83
> [ T011: x := P_N ]____________________________________  0.45   0.23 ->  1.94
> [ T012: x := P_D ]____________________________________  0.45   0.22 ->  2.07
> [ T013: x := F_C ]____________________________________  0.92   1.25 ->  0.74
> [ T014: x := F_N ]____________________________________  0.78   0.39 ->  2.01
> [ T015: x := F_D ]____________________________________  0.55   0.26 ->  2.06
> [ T016: x := o:GenCode ]______________________________  1.03   0.51 ->  2.00
> [ T017: x := o[8] ]___________________________________  0.80   0.53 ->  1.50
> [ T018: round( i / 1000, 2 ) ]________________________  1.00   0.50 ->  2.00
> [ T020: val( s ) ]____________________________________  1.11   0.56 ->  1.97
> [ T021: val( a [ i % 16 + 1 ] ) ]_____________________  1.97   1.00 ->  1.97
> [ T024: eval( bc := { || i % 16 } ) ]_________________  1.30   0.70 ->  1.84
> [ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  1.36   0.69 ->  1.98
> [ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  1.77   0.91 ->  1.95
> [ T033: x := a[ i % 16 + 1 ] == s ]___________________  1.64   0.86 ->  1.91
> [ T034: x := a[ i % 16 + 1 ] = s ]____________________  1.77   1.00 ->  1.77
> [ T035: x := a[ i % 16 + 1 ] >= s ]___________________  1.78   0.95 ->  1.87
> [ T036: x := a[ i % 16 + 1 ] <= s ]___________________  1.77   0.95 ->  1.85
> [ T037: x := a[ i % 16 + 1 ] < s ]____________________  1.76   0.97 ->  1.82
> [ T038: x := a[ i % 16 + 1 ] > s ]____________________  1.74   0.92 ->  1.88
> [ T039: ascan( a, i % 16 ) ]__________________________  1.53   0.94 ->  1.64
> [ T042: x := a ]______________________________________  0.45   0.22 ->  2.07
> [ T044: f0() ]________________________________________  0.51   0.27 ->  1.94
> [ T045: f1( i ) ]_____________________________________  0.77   0.38 ->  2.04
> [ T046: f2( c[1...8] ) ]______________________________  0.81   0.41 ->  2.00
> [ T047: f2( c[1...40000] ) ]__________________________  0.81   0.41 ->  2.00
> [ T048: f2( @c[1...40000] ) ]_________________________  0.80   0.41 ->  1.96
> [ T049: f2( @c[1...40000] ), c2 := c ]________________  0.84   0.42 ->  2.00
> [ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  2.41   1.22 ->  1.97
> [ T051: f2( a ) ]_____________________________________  0.83   0.41 ->  2.04
> [ T054: f_prv( c ) ]__________________________________  2.31   1.42 ->  1.63
> ============================================================================
> [   TOTAL   ]_________________________________________ 40.34  22.19 ->  1.82
> ============================================================================
> [ total application time: ]....................................84.09
> [ total real time: ]...........................................62.64

Thank you. So the results are very close to 2.0 and only reduced by
two tests (T013 and T054) which allocates memory and where not excluded by
   --exclude=mem
I forgot to add them.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Oct  5 16:56:20 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct  5 16:56:30 2008
Subject: [Harbour] 2008-10-05 17:53 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0810051252t938236n39d5053539152fcb@mail.gmail.com>
References: <20081005155349.GA29760@34-mo7-2.acn.waw.pl>
	<FCA90007D2D74CA7B58F423F025A6B69@emag>
	<20081005190444.GA2093@34-mo7-2.acn.waw.pl>
	<9257026e0810051252t938236n39d5053539152fcb@mail.gmail.com>
Message-ID: <20081005205619.GB666@34-mo7-2.acn.waw.pl>

On Sun, 05 Oct 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> Just for report, here is my cat /proc/cpuinfo:
> model name	: Intel(R) Core(TM)2 Duo CPU     E6750  @ 2.66GHz
> I'm faster but I'm far from 2.0 using:
>  ./speedtst --thread=2 --scale --exclude=mem &> speedtst.log
> under Fedora 9.
> Is it expected?

Thank you for tests.
No it's not expected. It's fatal.
Please check if you have some dynamic CPU clock updating enabled 
Your results suggests sth like that.
If you are using KDE then you can use KPowersave to check it and
change the strategy.
And please also remember that unlike previous ones this test uses
only real time clock so it will be strongly effected by other system
activity. In multiprocessor systems it will reduce the scale factor.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Sun Oct  5 17:05:31 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Oct  5 17:05:38 2008
Subject: [Harbour] Re: How to build a Harbour program on Linux/OSX without
	installing it?
In-Reply-To: <D5CAE071-8C02-4281-A6C3-EA802135F15C@syenar.hu>
References: <A78F6232-B531-45FE-A6DC-0E90838E22C5@syenar.hu>
	<4DB10A87-54C8-4C27-932E-4233C8EE10B1@syenar.hu>
	<9257026e0810051341h15535125o50a02611c4513928@mail.gmail.com>
	<D5CAE071-8C02-4281-A6C3-EA802135F15C@syenar.hu>
Message-ID: <9257026e0810051405x132bfcbfl4bc9bff4bc5b4ef5@mail.gmail.com>

On Sun, Oct 5, 2008 at 10:48 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> That's exactly what I'd like to do :)
>
> Question: How?

Probably there are smarter methods but I simply set HB_INSTALL_PREFIX
before running ./make_gnu.sh install.

It should be enough to run: HB_INSTALL_PREFIX=<path> ./make_gnu.sh install

best regards,
Lorenzo
From druzus at acn.waw.pl  Sun Oct  5 17:11:02 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct  5 17:11:13 2008
Subject: [Harbour] Re: How to build a Harbour program on Linux/OSX
	without installing it?
In-Reply-To: <D5CAE071-8C02-4281-A6C3-EA802135F15C@syenar.hu>
References: <A78F6232-B531-45FE-A6DC-0E90838E22C5@syenar.hu>
	<4DB10A87-54C8-4C27-932E-4233C8EE10B1@syenar.hu>
	<9257026e0810051341h15535125o50a02611c4513928@mail.gmail.com>
	<D5CAE071-8C02-4281-A6C3-EA802135F15C@syenar.hu>
Message-ID: <20081005211102.GA12515@34-mo7-2.acn.waw.pl>

On Sun, 05 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> That's exactly what I'd like to do :)
> Question: How?

export HB_INSTALL_PREFIX="$HOME/harbour-1.1.0"

and:

   mkdir -p $HB_INSTALL_PREFIX/{bin,include,lib}
   ./make_gnu.sh install
or:
   ./make_tgz.sh
   and then decompress it to given directory

Probably for easier usage you will find also usable:
   export PATH="$HB_INSTALL_PREFIX/bin:$PATH"
but it's not necessary if you are using hb* scripts.

If you want to use shared harbour.so library then you will
have to also inform ld where it's located. In
   man ld.so
you will find all options. In short words:
   export LD_LIBRARY_PATH="$HB_INSTALL_PREFIX/bin"

The above is for Linux. In other *nixes it looks very similar.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Sun Oct  5 17:14:39 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Oct  5 17:14:46 2008
Subject: [Harbour] 2008-10-05 17:53 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081005205619.GB666@34-mo7-2.acn.waw.pl>
References: <20081005155349.GA29760@34-mo7-2.acn.waw.pl>
	<FCA90007D2D74CA7B58F423F025A6B69@emag>
	<20081005190444.GA2093@34-mo7-2.acn.waw.pl>
	<9257026e0810051252t938236n39d5053539152fcb@mail.gmail.com>
	<20081005205619.GB666@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0810051414o7d622da6vb5c585b5b87e95ae@mail.gmail.com>

On Sun, Oct 5, 2008 at 10:56 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Thank you for tests.
> No it's not expected. It's fatal.
> Please check if you have some dynamic CPU clock updating enabled
> Your results suggests sth like that.

AFAIK I use a fixed cpu frequency.
I use gnome and if I try to add the CPU Frequency Scaling Monitor I
get: "You will not be able to modify the frequency of your machine.
Your machine may be misconfigured or not have hardware support for CPU
frequency scaling."

I'll try under Ubuntu 8.04.

I've other OS installed but they are under VirtualBox VMs so I'm not
sure if the results have meaning.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sun Oct  5 17:16:49 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 17:17:08 2008
Subject: [Harbour] Re: How to build a Harbour program on Linux/OSX without
	installing it?
In-Reply-To: <20081005211102.GA12515@34-mo7-2.acn.waw.pl>
References: <A78F6232-B531-45FE-A6DC-0E90838E22C5@syenar.hu>
	<4DB10A87-54C8-4C27-932E-4233C8EE10B1@syenar.hu>
	<9257026e0810051341h15535125o50a02611c4513928@mail.gmail.com>
	<D5CAE071-8C02-4281-A6C3-EA802135F15C@syenar.hu>
	<20081005211102.GA12515@34-mo7-2.acn.waw.pl>
Message-ID: <60D22DEB-5F10-4ACD-9E5E-2BFAD806FA84@syenar.hu>

Hi Przemek,

Thanks a lot. [ Not very user friendly IMO :( Especially
when you have 5-7 environments. Lots of typing, lots of
places for mistakes. ]

Can we have a command line option to make this the
default? I mean that we could use './make_gnu.sh --local'
or similar to just install in current harbour dir.
(just like it is in Windows).

Also, is there a way to force generating Harbour
binaries with _static_ libs?

Brgds,
Viktor

On 2008.10.05., at 23:11, Przemyslaw Czerpak wrote:

> On Sun, 05 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> That's exactly what I'd like to do :)
>> Question: How?
>
> export HB_INSTALL_PREFIX="$HOME/harbour-1.1.0"
>
> and:
>
>   mkdir -p $HB_INSTALL_PREFIX/{bin,include,lib}
>   ./make_gnu.sh install
> or:
>   ./make_tgz.sh
>   and then decompress it to given directory
>
> Probably for easier usage you will find also usable:
>   export PATH="$HB_INSTALL_PREFIX/bin:$PATH"
> but it's not necessary if you are using hb* scripts.
>
> If you want to use shared harbour.so library then you will
> have to also inform ld where it's located. In
>   man ld.so
> you will find all options. In short words:
>   export LD_LIBRARY_PATH="$HB_INSTALL_PREFIX/bin"
>
> The above is for Linux. In other *nixes it looks very similar.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sun Oct  5 17:30:05 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 17:30:14 2008
Subject: [Harbour] Darwin MT errors and one new warning
Message-ID: <8D6DAAD3-C839-4E02-B587-4FE6AB995F60@syenar.hu>

Hi Przemek,

../../gtcrs.c: In function tiGetS:
../../gtcrs.c:1415: warning: passing argument 1 of tigetstr discards  
qualifiers from pointer target type

[ when building hbvmmt lib: ]

In file included from ../../../arrays.c:78:
../../../../../include/hbstack.h:199: error: syntax error before  
'hb_stack_key'
../../../../../include/hbstack.h:199: warning: type defaults to 'int'  
in declaration of 'hb_stack_key'
../../../../../include/hbstack.h:199: warning: data definition has no  
type or storage class
../../../arrays.c: In function 'hb_arrayPushBase':
../../../arrays.c:106: warning: implicit declaration of function  
'hb_tls_get'

In file included from ../fm.c:95:
../../../include/hbstack.h:199: error: syntax error before  
'hb_stack_key'
../../../include/hbstack.h:199: warning: type defaults to 'int' in  
declaration of 'hb_stack_key'
../../../include/hbstack.h:199: warning: data definition has no type  
or storage class
../fm.c: In function 'hb_xquery':
../fm.c:1103: warning: implicit declaration of function 'hb_tls_get'

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Sun Oct  5 17:56:58 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Oct  5 17:57:04 2008
Subject: [Harbour] 2008-10-05 17:53 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0810051414o7d622da6vb5c585b5b87e95ae@mail.gmail.com>
References: <20081005155349.GA29760@34-mo7-2.acn.waw.pl>
	<FCA90007D2D74CA7B58F423F025A6B69@emag>
	<20081005190444.GA2093@34-mo7-2.acn.waw.pl>
	<9257026e0810051252t938236n39d5053539152fcb@mail.gmail.com>
	<20081005205619.GB666@34-mo7-2.acn.waw.pl>
	<9257026e0810051414o7d622da6vb5c585b5b87e95ae@mail.gmail.com>
Message-ID: <9257026e0810051456u419117baxf825efeee735f404@mail.gmail.com>

On Sun, Oct 5, 2008 at 11:14 PM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com> wrote:

> I'll try under Ubuntu 8.04.

Here are the results on the same hardware using another "physical"
partition with Ubuntu 8.04 i386.

Here the CPU Frequency Monitor works and says "On Demand". It shows
2.00Ghz on "idle" and 2.66Ghz during some parts of the speedtst.

At the moment I can't find a way to change it to "Performance".

Tomorrow I'll be able to do some tests on servers ranging from Xeon
Dual Processors ( two physical CPUs 4 logical ones ) to Dual Quad
Processors ( 2 physical CPUs 8 logical ones ).

best regards,
Lorenzo

10/05/08 23:45:57 Linux 2.6.24-19-generic i686
Harbour 1.1.0dev (Rev. 9551) (MT)+ GNU C 4.2.3 (32 bit)
THREADS: 2
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032
                                                        1 th.  2 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.23   0.19 ->  1.20
[ T002: x := L_N ]____________________________________  0.16   0.15 ->  1.10
[ T003: x := L_D ]____________________________________  0.16   0.15 ->  1.07
[ T004: x := S_C ]____________________________________  0.22   0.19 ->  1.17
[ T005: x := S_N ]____________________________________  0.15   0.15 ->  1.03
[ T006: x := S_D ]____________________________________  0.15   0.15 ->  1.03
[ T007: x := M_C ]____________________________________  0.24   0.19 ->  1.24
[ T008: x := M_N ]____________________________________  0.18   0.15 ->  1.20
[ T009: x := M_D ]____________________________________  0.18   0.15 ->  1.21
[ T010: x := P_C ]____________________________________  0.21   0.19 ->  1.10
[ T011: x := P_N ]____________________________________  0.17   0.14 ->  1.24
[ T012: x := P_D ]____________________________________  0.17   0.14 ->  1.22
[ T013: x := F_C ]____________________________________  0.45   0.28 ->  1.59
[ T014: x := F_N ]____________________________________  0.41   0.25 ->  1.64
[ T015: x := F_D ]____________________________________  0.25   0.15 ->  1.70
[ T016: x := o:GenCode ]______________________________  0.43   0.30 ->  1.40
[ T017: x := o[8] ]___________________________________  0.31   0.24 ->  1.31
[ T018: round( i / 1000, 2 ) ]________________________  0.55   0.35 ->  1.57
[ T020: val( s ) ]____________________________________  0.55   0.29 ->  1.87
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  0.92   0.53 ->  1.75
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.60   0.48 ->  1.25
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  0.57   0.43 ->  1.32
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  0.76   0.59 ->  1.28
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  0.81   0.57 ->  1.44
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  0.87   0.58 ->  1.50
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  0.89   0.59 ->  1.51
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  0.87   0.58 ->  1.50
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  0.87   0.59 ->  1.49
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  0.87   0.59 ->  1.47
[ T039: ascan( a, i % 16 ) ]__________________________  0.68   0.43 ->  1.61
[ T042: x := a ]______________________________________  0.24   0.18 ->  1.33
[ T044: f0() ]________________________________________  0.26   0.26 ->  1.00
[ T045: f1( i ) ]_____________________________________  0.39   0.34 ->  1.17
[ T046: f2( c[1...8] ) ]______________________________  0.42   0.36 ->  1.15
[ T047: f2( c[1...40000] ) ]__________________________  0.43   0.36 ->  1.18
[ T048: f2( @c[1...40000] ) ]_________________________  0.43   0.36 ->  1.19
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.48   0.43 ->  1.13
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  1.04   0.73 ->  1.42
[ T051: f2( a ) ]_____________________________________  0.43   0.34 ->  1.27
[ T054: f_prv( c ) ]__________________________________  1.16   0.76 ->  1.54
============================================================================
[   TOTAL   ]_________________________________________ 19.16  13.85 ->  1.38
============================================================================
[ total application time: ]....................................46.47
[ total real time: ]...........................................33.01
From info at fsgiudice.com  Sun Oct  5 18:09:27 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Oct  5 18:09:38 2008
Subject: [Harbour] 2008-10-05 17:53 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20081005155349.GA29760@34-mo7-2.acn.waw.pl>
References: <20081005155349.GA29760@34-mo7-2.acn.waw.pl>
Message-ID: <48E93B17.6070101@fsgiudice.com>

Hi Przemek,


Przemyslaw Czerpak ha scritto:
> 2008-10-05 17:53 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/tests/speedtst.prg
[snip]
>       If possible I would like to see some Windows results from multi CPU
>       machine with --scale parameter, f.e.:
>          speedtst --thread=8 --scale > speedtst.log
>       Please make some tests.

Here there are some tests attached.

In first file (speedtst.log) there are 4 tests with
set C_USR=-DHB_FM_STATISTICS_OFF -DHB_FM_STD_ALLOC
and --thread=4 and --thread=2 (that are my CPUs)

In second (speedtst1.log) same tests with
set C_USR=-DHB_FM_STATISTICS_OFF

Now I'm running same tests on a Windows 2003 Server 32bit with 2 CPU 
Xeon Dual Core 3Ghz (total of 4 CPUs). I will send tests in a while.

Tell me if you need any other tests and what switch I have to put for 
memory manager.

Best Regards

Francesco


-------------- next part --------------
A non-text attachment was scrubbed...
Name: speedtst_Vista.zip
Type: application/x-zip-compressed
Size: 5994 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081006/8c9b5a9a/speedtst_Vista.bin
From harbour.01 at syenar.hu  Sun Oct  5 18:29:13 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 18:29:16 2008
Subject: [Harbour] 2008-10-06 00:28 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92739$Blat.v2.6.2$cb66e1ca$1824784663ae@127.0.0.1>

2008-10-06 00:28 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbthread.h
    ! Blind fix for WinCE compilation after MT changes.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Sun Oct  5 18:48:45 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct  5 18:48:56 2008
Subject: [Harbour] Darwin MT errors and one new warning
In-Reply-To: <8D6DAAD3-C839-4E02-B587-4FE6AB995F60@syenar.hu>
References: <8D6DAAD3-C839-4E02-B587-4FE6AB995F60@syenar.hu>
Message-ID: <20081005224845.GA3689@34-mo7-2.acn.waw.pl>

On Sun, 05 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> ../../gtcrs.c: In function tiGetS:
> ../../gtcrs.c:1415: warning: passing argument 1 of tigetstr discards 
> qualifiers from pointer target type

It's a casting only - I'll pacify it in a while.

> [ when building hbvmmt lib: ]
> In file included from ../../../arrays.c:78:
> ../../../../../include/hbstack.h:199: error: syntax error before 
> 'hb_stack_key'
> ../../../../../include/hbstack.h:199: warning: type defaults to 'int' in 
> declaration of 'hb_stack_key'
> ../../../../../include/hbstack.h:199: warning: data definition has no type 
> or storage class
> ../../../arrays.c: In function 'hb_arrayPushBase':
> ../../../arrays.c:106: warning: implicit declaration of function 
> 'hb_tls_get'

include/hbthread.h[59]:

   #if defined( HB_OS_LINUX ) && !defined( __WATCOMC__ )
   #  include <pthread.h>
   #  define HB_PTHREAD_API
   #elif defined( HB_OS_WIN_32 )

I intentionally haven't added any other *nixes until someone will
test them. Please change:

   #if defined( HB_OS_LINUX ) && !defined( __WATCOMC__ )

to:

   #if ( defined( HB_OS_LINUX ) && !defined( __WATCOMC__ ) ) || \
       defined( HB_OS_DARWIN )

and test.

best regards,
Przemek
From harbour.01 at syenar.hu  Sun Oct  5 19:09:43 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 19:09:47 2008
Subject: [Harbour] 2008-10-06 01:06 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9273f$Blat.v2.6.2$73d7608c$1324c5338a88@127.0.0.1>

2008-10-06 01:06 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/debug/debugger.prg
  * source/rtl/typefile.prg
  * source/rtl/tgetlist.prg
  * source/rtl/treport.prg
  * source/rtl/teditor.prg
    * Using [Q]QOut() functions instead of "[?]?" commands.
    * Using hb_Run() function instead of RUN command.

  * source/rtl/typefile.prg
    % Upped read buffer.
    * Formatting.
    % Got rid of a few unnecessary initialization.
--
Brgds,
Viktor

From rportnoff at spendmap.com  Fri Oct  3 19:37:04 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Sun Oct  5 19:18:28 2008
Subject: [Harbour] v1.0.2
In-Reply-To: <DCA375F7-4D02-4F44-AC92-7B3747CC6355@syenar.hu>
References: <B0084025153@ms1.3peaks.com>
	<DCA375F7-4D02-4F44-AC92-7B3747CC6355@syenar.hu>
Message-ID: <B0084074732@ms1.3peaks.com>

Hi Viktor,

IMO, we need a stable Harbour version ASAP - Therefore, bug fixes only.

Regards,
Randy.

At 03:57 PM 10/3/2008, Szak?ts Viktor wrote:
>Hi Randy,
>
>There may be one. So far only just a few (exactly 4) fixes
>were marked to be merged there, so I think we should
>wait until some more comes, and/or we should decide which
>selected trunk _features_ we may want to merge there
>(like dlmalloc.c), and whether these are safe enough.
>
>Also, we should take a close eye on 1.1, since maybe
>it'd be better to invest efforts to do a stable 1.1 release
>as early as possible.
>
>Input and opinions are welcome from everyone.
>
>Brgds,
>Viktor
>
>On 2008.10.03., at 15:58, Randy Portnoff wrote:
>
>>Hi all,
>>
>>Is there going to be a v1.0.2 for the stable build?
>>
>>Regards,
>>Randy.
>>
>>
>>_______________________________________________
>>Harbour mailing list
>>Harbour@harbour-project.org
>>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour


From rportnoff at spendmap.com  Fri Oct  3 19:37:04 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Sun Oct  5 19:18:30 2008
Subject: [Harbour] v1.0.2
In-Reply-To: <DCA375F7-4D02-4F44-AC92-7B3747CC6355@syenar.hu>
References: <B0084025153@ms1.3peaks.com>
	<DCA375F7-4D02-4F44-AC92-7B3747CC6355@syenar.hu>
Message-ID: <B0084074732@ms1.3peaks.com>

Hi Viktor,

IMO, we need a stable Harbour version ASAP - Therefore, bug fixes only.

Regards,
Randy.

At 03:57 PM 10/3/2008, Szak?ts Viktor wrote:
>Hi Randy,
>
>There may be one. So far only just a few (exactly 4) fixes
>were marked to be merged there, so I think we should
>wait until some more comes, and/or we should decide which
>selected trunk _features_ we may want to merge there
>(like dlmalloc.c), and whether these are safe enough.
>
>Also, we should take a close eye on 1.1, since maybe
>it'd be better to invest efforts to do a stable 1.1 release
>as early as possible.
>
>Input and opinions are welcome from everyone.
>
>Brgds,
>Viktor
>
>On 2008.10.03., at 15:58, Randy Portnoff wrote:
>
>>Hi all,
>>
>>Is there going to be a v1.0.2 for the stable build?
>>
>>Regards,
>>Randy.
>>
>>
>>_______________________________________________
>>Harbour mailing list
>>Harbour@harbour-project.org
>>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour


From harbour.01 at syenar.hu  Sun Oct  5 19:25:06 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 19:25:20 2008
Subject: [Harbour] MSVC / HB_BUILD_DLL=yes fatal link error
Message-ID: <4EB72777-31A8-46F2-9FEE-B5940B334A18@syenar.hu>

Hi Przemek,

Just run my devel build MSVS2008 script with HB_BUILD_DLL=yes,
and I got this:
---
hbtest.obj : error LNK2019: unresolved external symbol _hb_stackPop  
referenced in function _HB_FUN_TEST_BEGIN
rt_math.obj : error LNK2001: unresolved external symbol _hb_stackPop
rt_misc.obj : error LNK2001: unresolved external symbol _hb_stackPop
rt_class.obj : error LNK2001: unresolved external symbol _hb_stackPop
bin\vc\hbtest-dll.exe : fatal error LNK1120: 1 unresolved externals
---

[ C mode, -DUNICODE ]

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Oct  5 19:33:23 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 19:33:35 2008
Subject: [Harbour] v1.0.2
In-Reply-To: <B0084074732@ms1.3peaks.com>
References: <B0084025153@ms1.3peaks.com>
	<DCA375F7-4D02-4F44-AC92-7B3747CC6355@syenar.hu>
	<B0084074732@ms1.3peaks.com>
Message-ID: <CAF8B283-6338-41DD-BB9D-3636FD5BDC34@syenar.hu>

Hi Randy,

1.0.1 is _very stable_. From the 4 fixes marked
for merge from 1.1 to 1.0.2, only one is critical,
and only if -gc3 is used with certain code.
[this is also very easy to retrofit into 1.0.1 source.]

This one alone doesn't justify a few days/weeks worth
of heavy release work. For me at least. If there is
someone to volunteer to create the release, it's of
course no problem for me.

Brgds,
Viktor

On 2008.10.04., at 1:37, Randy Portnoff wrote:

> Hi Viktor,
>
> IMO, we need a stable Harbour version ASAP - Therefore, bug fixes  
> only.
>
> Regards,
> Randy.
>
> At 03:57 PM 10/3/2008, Szak?ts Viktor wrote:
>> Hi Randy,
>>
>> There may be one. So far only just a few (exactly 4) fixes
>> were marked to be merged there, so I think we should
>> wait until some more comes, and/or we should decide which
>> selected trunk _features_ we may want to merge there
>> (like dlmalloc.c), and whether these are safe enough.
>>
>> Also, we should take a close eye on 1.1, since maybe
>> it'd be better to invest efforts to do a stable 1.1 release
>> as early as possible.
>>
>> Input and opinions are welcome from everyone.
>>
>> Brgds,
>> Viktor
>>
>> On 2008.10.03., at 15:58, Randy Portnoff wrote:
>>
>>> Hi all,
>>>
>>> Is there going to be a v1.0.2 for the stable build?
>>>
>>> Regards,
>>> Randy.
>>>
>>>
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From info at fsgiudice.com  Sun Oct  5 20:17:27 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Oct  5 20:17:40 2008
Subject: [Harbour] 2008-10-05 17:53 UTC+0200
	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <48E93B17.6070101@fsgiudice.com>
References: <20081005155349.GA29760@34-mo7-2.acn.waw.pl>
	<48E93B17.6070101@fsgiudice.com>
Message-ID: <48E95917.4070408@fsgiudice.com>

Hi Przemek,

Francesco Saverio Giudice ha scritto:
> Hi Przemek,
> 
> 
> Now I'm running same tests on a Windows 2003 Server 32bit with 2 CPU 
> Xeon Dual Core 3Ghz (total of 4 CPUs). I will send tests in a while.
> 

look at attached logs. Absolutly *out of mind* results.

Probably due to "server" personality, times are out of ranges.
There are also some tests with * chars because out of ranges.

Tests executed on:
Microsoft Windows Server 2003, Standard Edition Service Pack 2 (Build 3790)
2 x Intel(R) Xeon(TM) CPU 3.00GHz Dual Core
   L2 Cache Size: 2048 Kb
   Bus: 200 Mhz Socket

3,00 Gb Installed Memory (1,19 Gb free)

in a Terminal Session.

Best Regards

Francesco

-------------- next part --------------
A non-text attachment was scrubbed...
Name: speedtst_w2k3.zip
Type: application/x-zip-compressed
Size: 8084 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081006/2a856efc/speedtst_w2k3.bin
From harbour.01 at syenar.hu  Sun Oct  5 20:18:15 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 20:18:24 2008
Subject: [Harbour] Darwin: 64-bit problem
Message-ID: <EB785383-2590-4256-A214-64F95EFB04CA@syenar.hu>

Hi Przemek,

I've built Harbour on Darwin with L_USR/C_USR="-arch x86_64".

Is there a way to pass these custom switches to hbmk?

[ Otherwise it doesn't work because of architecture mismatch. ]

Brgds,
Viktor

From druzus at acn.waw.pl  Sun Oct  5 20:19:09 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct  5 20:19:20 2008
Subject: [Harbour] 2008-10-06 02:18 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081006001909.GA21916@34-mo7-2.acn.waw.pl>

2008-10-06 02:18 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/tests/speedtst.prg
    * marked T054 as memory tests

  * harbour/source/vm/hvm.c
  * harbour/source/vm/thread.c
    * added hb_threadOnce( @<onceControl> [, <bAction> ] ) -> <lFirstCall>
      This function allow to execute some code only once. It's usefull in
      MT environment for initialization.
      <onceControl> is variable which holds the execution status and have
      to be initialized to NIL. In most of cases it will be simple static
      variable in user code.
      <bAction> is optional codeblock which is executed only once (on 1-st
      call with given <onceControl>)

  * harbour/source/rtl/filesys.c
    ! do not make any file name conversions in hb_fsNameConv() if HVM stack
      is not allocated

  * harbour/source/rtl/gtcrs/gtcrs.c
    * casting

best regards
Przemek
From druzus at acn.waw.pl  Sun Oct  5 20:42:34 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct  5 20:42:48 2008
Subject: [Harbour] 2008-10-05 17:53 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <48E95917.4070408@fsgiudice.com>
References: <20081005155349.GA29760@34-mo7-2.acn.waw.pl>
	<48E93B17.6070101@fsgiudice.com> <48E95917.4070408@fsgiudice.com>
Message-ID: <20081006004234.GA21313@34-mo7-2.acn.waw.pl>

On Mon, 06 Oct 2008, Francesco Saverio Giudice wrote:

Hi Francesco,

Many thanks for your all tests.
I'll try to look at them closer tomorrow.

>> Now I'm running same tests on a Windows 2003 Server 32bit with 2 CPU Xeon 
>> Dual Core 3Ghz (total of 4 CPUs). I will send tests in a while.
> look at attached logs. Absolutly *out of mind* results.
> Probably due to "server" personality, times are out of ranges.
> There are also some tests with * chars because out of ranges.

In the 1-st case it was midnight effect and SECONDS() counter resetting.
In the second one I do not know what was the reason. Maybe some clock
updating? We are using real time clock so such things can happen. This
test shows that it consumes 870.36 seconds from all CPUs but in 3927.41
seconds of real time. Looks that sth froze the process execution for nearly
an hour (f.e. some other process with high priority or simply system clock
was updated).

> Tests executed on:
> Microsoft Windows Server 2003, Standard Edition Service Pack 2 (Build 3790)
> 2 x Intel(R) Xeon(TM) CPU 3.00GHz Dual Core
>   L2 Cache Size: 2048 Kb
>   Bus: 200 Mhz Socket
> 3,00 Gb Installed Memory (1,19 Gb free)
> in a Terminal Session.

In this test system load level is very important because we will calculate
also time consumed by other processes - side effect of using real time clock.
Probably it will be optimal to run this test only in 2 threads excluding
test with memory allocation to reduce the interactions with other programs.

Once again thanks to you and all others for test results.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Oct  5 20:46:05 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct  5 20:46:15 2008
Subject: [Harbour] Darwin: 64-bit problem
In-Reply-To: <EB785383-2590-4256-A214-64F95EFB04CA@syenar.hu>
References: <EB785383-2590-4256-A214-64F95EFB04CA@syenar.hu>
Message-ID: <20081006004605.GB21313@34-mo7-2.acn.waw.pl>

On Mon, 06 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I've built Harbour on Darwin with L_USR/C_USR="-arch x86_64".
> Is there a way to pass these custom switches to hbmk?
> [ Otherwise it doesn't work because of architecture mismatch. ]

CC_C_USR, CC_L_USR, CC_PRG_USR are stored as defaults in hb*
scripts. MinGW/MinGWCE cross builds use them.

best regards,
Przemek
From philb at philb.us  Sun Oct  5 20:54:08 2008
From: philb at philb.us (Phil Barnett)
Date: Sun Oct  5 20:54:19 2008
Subject: [Harbour] Harbour website extremely slow
In-Reply-To: <9448235EF856420780F44BF8397F17AA@emag>
References: <E800F5152AD04DF28A1BEDFE5D6D75E6@emag>
	<531d7a750810050342h19a8fb64jddc82b33c30b883c@mail.gmail.com>
	<9448235EF856420780F44BF8397F17AA@emag>
Message-ID: <200810052054.09154.philb@philb.us>

On Sunday 05 October 2008 07:27:32 am Enrico Maria Giordano wrote:

> It's already better now.

I didn't do anything.

You can see it's load and traffic performance graphs here:

http://www.linuxceptional.com/mrgt/

Doesn't look like anything exceptional was happening.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From harbour.01 at syenar.hu  Sun Oct  5 21:02:48 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 21:03:00 2008
Subject: [Harbour] Darwin results
Message-ID: <D02D7203-9D11-4C35-B329-E73828B6550F@syenar.hu>

Hi Przemek,

Darwin results below. It's a recent Mac mini [MB139LL/A]
Core2Duo 2Ghz with 2GB RAM, 4MB shared L2 cache.

Harbour switches the defaults (-gc0, no -l) with HB_FM_STATISTICS_OFF.

I've included some 64-bit tests, but MT+ results were
so slow that I didn't wait for all scale tests. It's
strange because for simple ST/MT 64-bit gave much better
performance.

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: darwin.zip
Type: application/zip
Size: 11998 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081006/2958813e/darwin.zip
-------------- next part --------------

From harbour.01 at syenar.hu  Sun Oct  5 21:10:19 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 21:10:18 2008
Subject: [Harbour] 2008-10-06 03:09 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92750$Blat.v2.6.2$4ce86d5c$768fa4a43f8@127.0.0.1>

2008-10-06 03:09 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbextern.ch
    + Added HB_THREADONCE.

  * ChangeLog
    - Removed a duplicate entry of mine.
--
Brgds,
Viktor

From philb at philb.us  Sun Oct  5 21:19:19 2008
From: philb at philb.us (Phil Barnett)
Date: Sun Oct  5 21:19:27 2008
Subject: [Harbour] harbour-project.org anon FTP
In-Reply-To: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
References: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
Message-ID: <200810052119.20156.philb@philb.us>

On Sunday 05 October 2008 12:59:12 pm Szak?ts Viktor wrote:
> Hi Phil,
>
> May I suggest shutting down anonymous FTP uploads
> on our FTP?
>
> Actually the best would be to turn off FTP for our
> site completely. We're not using it, but internet
> users do, as used to find adult content in the 'incoming'
> dir.

The incoming directory is write only. Correct me if I'm wrong.

It's built the way it is intentionally so that anyone can upload, but it takes 
a admin to move the file to an accessible section.

It's set that way for The Oasis and it's a server wide FTP setting.

Feel free to delete anything you find in that directory.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From philb at philb.us  Sun Oct  5 21:24:37 2008
From: philb at philb.us (Phil Barnett)
Date: Sun Oct  5 21:24:44 2008
Subject: [Harbour] Harbour Web site - Preview #1
In-Reply-To: <531d7a750810041944j46ae81beo1c8be62c56420e5e@mail.gmail.com>
References: <531d7a750810041944j46ae81beo1c8be62c56420e5e@mail.gmail.com>
Message-ID: <200810052124.37287.philb@philb.us>

On Saturday 04 October 2008 10:44:09 pm Vailton Renato wrote:
> Hi all!
>
> I am working in recent days in layout and in some texts to the site of
> the project. I'm running with it to finish it as soon as possible.
>
> As I have difficulty with English, any help or suggestions will be welcome.
>
> Here's a preview of what I am working:
> http://harbour-project.org/preview/
>
> I've been working on these days and has already set the layout of the
> homepage, icons and menus on the site. I am starting work to place the
> appropriate text as set out some details.
>
> My next step will be put correct texts already on the pages.
>
> I used only HTML, put a banner across the top of the site and other
> details adjusted visual ... I hope and I expect comments like that.

It's very nice. Very pleasing and nice looking.

The only change I would suggest would be to left justify the paragraphs 
instead of full justify. I don't like the 'rivers of whilte' that full 
justification always creates.

http://en.wikipedia.org/wiki/River_(typography)

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From harbour.01 at syenar.hu  Sun Oct  5 21:34:01 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 21:34:11 2008
Subject: [Harbour] harbour-project.org anon FTP
In-Reply-To: <200810052119.20156.philb@philb.us>
References: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
	<200810052119.20156.philb@philb.us>
Message-ID: <C3E4B4D7-3499-4339-8926-066F93EF8D62@syenar.hu>

>
Hi Phil,

> On Sunday 05 October 2008 12:59:12 pm Szak?ts Viktor wrote:
>> Hi Phil,
>>
>> May I suggest shutting down anonymous FTP uploads
>> on our FTP?
>>
>> Actually the best would be to turn off FTP for our
>> site completely. We're not using it, but internet
>> users do, as used to find adult content in the 'incoming'
>> dir.
>
> The incoming directory is write only. Correct me if I'm wrong.
> It's built the way it is intentionally so that anyone can upload,  
> but it takes
> a admin to move the file to an accessible section.
>
> It's set that way for The Oasis and it's a server wide FTP setting.
>
> Feel free to delete anything you find in that directory.

I don't feel like dealing with this problem on the daily
maintenance level, just thought to mention it, maybe it can
be fixed once and for all. We've also got site infection due
to sniffed FTP passwords, so FTP is by no means safe.

BTW, daily snapshots are still very old. I'd think it'd be
better to remove the links from the homepage, as it makes it
look like Harbour development had stalled.

Monthly and weekly SVN backups don't seem to work either,
but that's less critical.

Brgds,
Viktor

From philb at philb.us  Sun Oct  5 21:41:26 2008
From: philb at philb.us (Phil Barnett)
Date: Sun Oct  5 21:41:34 2008
Subject: [Harbour] harbour-project.org anon FTP
In-Reply-To: <C3E4B4D7-3499-4339-8926-066F93EF8D62@syenar.hu>
References: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
	<200810052119.20156.philb@philb.us>
	<C3E4B4D7-3499-4339-8926-066F93EF8D62@syenar.hu>
Message-ID: <200810052141.26606.philb@philb.us>

On Sunday 05 October 2008 09:34:01 pm Szak?ts Viktor wrote:
> I don't feel like dealing with this problem on the daily
> maintenance level, just thought to mention it, maybe it can
> be fixed once and for all. We've also got site infection due
> to sniffed FTP passwords, so FTP is by no means safe.

That's why it's anonymous.Anonymous ftp is safe as long as it can't be used 
for both read and write. Passwords and FTP lack of security has been known 
for years. This server has been set this way now for at least 10 years and it 
hasn't caused any problem. Ilke I tell everyone that has a password, please 
don't use ftp. Use SCP. I did tell you that, right?

> BTW, daily snapshots are still very old. I'd think it'd be
> better to remove the links from the homepage, as it makes it
> look like Harbour development had stalled.
>
> Monthly and weekly SVN backups don't seem to work either,
> but that's less critical.

I tried to fix that the other day and didn't get it figured out. The jobs are 
running. They also don't do anything if I run them by hand, so I'll spend 
some time and get them going.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From harbour.01 at syenar.hu  Sun Oct  5 22:00:18 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 22:00:29 2008
Subject: [Harbour] harbour-project.org anon FTP
In-Reply-To: <200810052141.26606.philb@philb.us>
References: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
	<200810052119.20156.philb@philb.us>
	<C3E4B4D7-3499-4339-8926-066F93EF8D62@syenar.hu>
	<200810052141.26606.philb@philb.us>
Message-ID: <0E2DB1EC-978E-47F4-9B6C-72F9C328032A@syenar.hu>

> That's why it's anonymous.Anonymous ftp is safe as long as it can't  
> be used
> for both read and write. Passwords and FTP lack of security has been  
> known

If you don't mind getting unknown files on the server
and the FTP server is without security holes, it is safe.

> for years. This server has been set this way now for at least 10  
> years and it
> hasn't caused any problem. Ilke I tell everyone that has a password,  
> please
> don't use ftp. Use SCP. I did tell you that, right?

It once caused a site infection on our homepage.

Don't get me wrong, this is not a personal matter,
I'm using SCP only, as I told.

Anyway, if per-site FTP setup is no option, what can we
do, but we certainly don't need this feature for Harbour,
that was my only point.

>> BTW, daily snapshots are still very old. I'd think it'd be
>> better to remove the links from the homepage, as it makes it
>> look like Harbour development had stalled.
>>
>> Monthly and weekly SVN backups don't seem to work either,
>> but that's less critical.
>
> I tried to fix that the other day and didn't get it figured out. The  
> jobs are
> running. They also don't do anything if I run them by hand, so I'll  
> spend
> some time and get them going.

Thanks. If you could post the scripts, maybe we could
help figuring what may be wrong.

Brgds,
Viktor

From philb at philb.us  Sun Oct  5 22:02:50 2008
From: philb at philb.us (Phil Barnett)
Date: Sun Oct  5 22:02:58 2008
Subject: [Harbour] harbour-project.org anon FTP
In-Reply-To: <C3E4B4D7-3499-4339-8926-066F93EF8D62@syenar.hu>
References: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
	<200810052119.20156.philb@philb.us>
	<C3E4B4D7-3499-4339-8926-066F93EF8D62@syenar.hu>
Message-ID: <200810052202.50820.philb@philb.us>

On Sunday 05 October 2008 09:34:01 pm Szak?ts Viktor wrote:

> BTW, daily snapshots are still very old. I'd think it'd be
> better to remove the links from the homepage, as it makes it
> look like Harbour development had stalled.

Ok, I was not checking the right thing. What is running and working properly 
is the svn backups.

I'll make new jobs for the latest repository checkout.

What checkout command would you like me to use?

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From harbour.01 at syenar.hu  Sun Oct  5 22:16:07 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 22:16:21 2008
Subject: [Harbour] harbour-project.org anon FTP
In-Reply-To: <200810052202.50820.philb@philb.us>
References: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
	<200810052119.20156.philb@philb.us>
	<C3E4B4D7-3499-4339-8926-066F93EF8D62@syenar.hu>
	<200810052202.50820.philb@philb.us>
Message-ID: <BE090C62-5C74-4589-AD30-3A68D3450B04@syenar.hu>

>> BTW, daily snapshots are still very old. I'd think it'd be
>> better to remove the links from the homepage, as it makes it
>> look like Harbour development had stalled.
>
> Ok, I was not checking the right thing. What is running and working  
> properly
> is the svn backups.
>
> I'll make new jobs for the latest repository checkout.

Okay, great.

[ The monthly backup is updated now. ]

> What checkout command would you like me to use?

For the daily snapshots:
svn export http://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/harbour
[ this will put the result in a 'harbour' subfolder. https also works  
BTW. ]

For SVN backups:
rsync -av harbour-project.svn.sourceforge.net::svn/harbour-project/* .

Brgds,
Viktor

From bedipritpal at hotmail.com  Sun Oct  5 22:20:32 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun Oct  5 22:20:39 2008
Subject: [Harbour] Harbour Web site - Preview #1
In-Reply-To: <200810052124.37287.philb@philb.us>
References: <531d7a750810041944j46ae81beo1c8be62c56420e5e@mail.gmail.com>
	<200810052124.37287.philb@philb.us>
Message-ID: <19831151.post@talk.nabble.com>


Renalto


Phil Barnett wrote:
> 
> It's very nice. Very pleasing and nice looking.
> 
> The only change I would suggest would be to left justify the paragraphs 
> instead of full justify. I don't like the 'rivers of whilte' that full 
> justification always creates.
> 

+1

Plus: If you could replace burgundy color with dark-blue or the 
blue color of Harbour ship.. Just try. I hope it will do wonders.
Right now upper part and lower one appears missing the uniformity.

Plus: If you could avoid page haeding "Welcome to the Harbour Project"
it will be more towards proper distribution of space. If you think it
should not be avoided then reduce its size.

Plus: Include some blue tint on the icon representing "Development",
again for the sake of uniform look and feel.

Regards
Pritpal Bedi



-- 
View this message in context: http://www.nabble.com/Harbour-Web-site---Preview--1-tp19820239p19831151.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From philb at philb.us  Sun Oct  5 22:23:46 2008
From: philb at philb.us (Phil Barnett)
Date: Sun Oct  5 22:23:54 2008
Subject: [Harbour] harbour-project.org anon FTP
In-Reply-To: <BE090C62-5C74-4589-AD30-3A68D3450B04@syenar.hu>
References: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
	<200810052202.50820.philb@philb.us>
	<BE090C62-5C74-4589-AD30-3A68D3450B04@syenar.hu>
Message-ID: <200810052223.46527.philb@philb.us>

On Sunday 05 October 2008 10:16:07 pm Szak?ts Viktor wrote:

> For the daily snapshots:
> svn export
> http://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/ha
>rbour [ this will put the result in a 'harbour' subfolder. https also works
> BTW. ]

Ok, that's what I was already using. Just making sure.

Actually, I was cleaning out the co directory and using co. What's the 
difference between that and export?

> For SVN backups:
> rsync -av harbour-project.svn.sourceforge.net::svn/harbour-project/* .

And this is what we have been using for the svn backups for some time now.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From harbour.01 at syenar.hu  Sun Oct  5 22:32:22 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 22:32:40 2008
Subject: [Harbour] harbour-project.org anon FTP
In-Reply-To: <200810052223.46527.philb@philb.us>
References: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
	<200810052202.50820.philb@philb.us>
	<BE090C62-5C74-4589-AD30-3A68D3450B04@syenar.hu>
	<200810052223.46527.philb@philb.us>
Message-ID: <54BCDBCB-07A7-483F-995D-D1C9EEA666A4@syenar.hu>

>> For the daily snapshots:
>> svn export
>> http://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/ha
>> rbour [ this will put the result in a 'harbour' subfolder. https  
>> also works
>> BTW. ]
>
> Ok, that's what I was already using. Just making sure.
>
> Actually, I was cleaning out the co directory and using co. What's the
> difference between that and export?

'co' will create a full local development sandbox (updatable,
committable), this means it will create all the SVN administration
files (in hidden '.svn' subdirs in each dir), and all this will
significantly grow the size of such local repository.

'export' on the other hand will get the pure SVN content only,
without any administration overhead. It's perfect for snapshot
archives.

For both commands, the target directory must not exist before
running them.

Brgds,
Viktor

From philb at philb.us  Sun Oct  5 23:07:38 2008
From: philb at philb.us (Phil Barnett)
Date: Sun Oct  5 23:07:47 2008
Subject: [Harbour] harbour-project.org anon FTP
In-Reply-To: <54BCDBCB-07A7-483F-995D-D1C9EEA666A4@syenar.hu>
References: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
	<200810052223.46527.philb@philb.us>
	<54BCDBCB-07A7-483F-995D-D1C9EEA666A4@syenar.hu>
Message-ID: <200810052307.38628.philb@philb.us>

On Sunday 05 October 2008 10:32:22 pm Szak?ts Viktor wrote:
> 'co' will create a full local development sandbox (updatable,
> committable), this means it will create all the SVN administration
> files (in hidden '.svn' subdirs in each dir), and all this will
> significantly grow the size of such local repository.
>
> 'export' on the other hand will get the pure SVN content only,
> without any administration overhead. It's perfect for snapshot
> archives.

-rw-r--r--   1 root    root      9228135 Oct  5 22:23 harbour-checkout.1.bz2
-rw-r--r--   1 root    root      5261372 Oct  5 22:55 harbour-checkout.bz2

Yeah, quite a difference. (I fixed the ownership of these in the shell script 
just now)

So, we can add a link to harbour-checkout.bz2 which I will update daily.

Or I can update it more than once if you think that's appropriate. Right now, 
it crons at 6 pm EST, which is midnight or later in Europe. We used to do it 
every three hours, which was probably overkill.

Right now, we're keeping the last 4 copies named .1.bz2 .2.bz2 .3.bz2, etc. I 
can also extend that to keep more.

It should all be working now.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From harbour.01 at syenar.hu  Sun Oct  5 23:18:47 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  5 23:18:57 2008
Subject: [Harbour] harbour-project.org anon FTP
In-Reply-To: <200810052307.38628.philb@philb.us>
References: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
	<200810052223.46527.philb@philb.us>
	<54BCDBCB-07A7-483F-995D-D1C9EEA666A4@syenar.hu>
	<200810052307.38628.philb@philb.us>
Message-ID: <616AC212-63E0-4BF3-8E10-C3C6422CA642@syenar.hu>

>> 'export' on the other hand will get the pure SVN content only,
>> without any administration overhead. It's perfect for snapshot
>> archives.
>
> -rw-r--r--   1 root    root      9228135 Oct  5 22:23 harbour- 
> checkout.1.bz2
> -rw-r--r--   1 root    root      5261372 Oct  5 22:55 harbour- 
> checkout.bz2
>
> Yeah, quite a difference. (I fixed the ownership of these in the  
> shell script
> just now)
>
> So, we can add a link to harbour-checkout.bz2 which I will update  
> daily.
>
> Or I can update it more than once if you think that's appropriate.  
> Right now,
> it crons at 6 pm EST, which is midnight or later in Europe. We used  
> to do it
> every three hours, which was probably overkill.
>
> Right now, we're keeping the last 4 copies named .1.bz2 .2.bz2 . 
> 3.bz2, etc. I
> can also extend that to keep more.

Great, many thanks.

Just one last comment; so far the daily snapshots were called 'harbour- 
svn.tgz'
and 'harbour-svn.zip' (these are linked from the homepage), .bz2 as an  
option
is nice, but IMO we should keep .tgz and .zip too.
Could you generate these, too?

Also, the dailies would IMO better be named as
'harbour-nightly.[zip|tgz|bz2]'.

Brgds,
Viktor

From philb at philb.us  Mon Oct  6 03:45:24 2008
From: philb at philb.us (Phil Barnett)
Date: Mon Oct  6 03:45:33 2008
Subject: [Harbour] harbour-project.org anon FTP
In-Reply-To: <616AC212-63E0-4BF3-8E10-C3C6422CA642@syenar.hu>
References: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
	<200810052307.38628.philb@philb.us>
	<616AC212-63E0-4BF3-8E10-C3C6422CA642@syenar.hu>
Message-ID: <200810060345.24344.philb@philb.us>

On Sunday 05 October 2008 11:18:47 pm Szak?ts Viktor wrote:

> Great, many thanks.
>
> Just one last comment; so far the daily snapshots were called 'harbour-
> svn.tgz'
> and 'harbour-svn.zip' (these are linked from the homepage), .bz2 as an
> option
> is nice, but IMO we should keep .tgz and .zip too.
> Could you generate these, too?
>
> Also, the dailies would IMO better be named as
> 'harbour-nightly.[zip|tgz|bz2]'.

Done.

-rw-r--r--   1 harbour psacln    5260914 Oct  6 03:31 harbour-nightly.4.bz2
-rw-r--r--   1 harbour psacln    6683920 Oct  6 03:31 harbour-nightly.4.tgz
-rw-r--r--   1 harbour psacln    8515888 Oct  6 03:31 harbour-nightly.4.zip
-rw-r--r--   1 harbour psacln    5260914 Oct  6 03:32 harbour-nightly.3.bz2
-rw-r--r--   1 harbour psacln    6683920 Oct  6 03:32 harbour-nightly.3.tgz
-rw-r--r--   1 harbour psacln    8515888 Oct  6 03:32 harbour-nightly.3.zip
-rw-r--r--   1 harbour psacln    5260914 Oct  6 03:34 harbour-nightly.2.bz2
-rw-r--r--   1 harbour psacln    6683920 Oct  6 03:34 harbour-nightly.2.tgz
-rw-r--r--   1 harbour psacln    8515888 Oct  6 03:34 harbour-nightly.2.zip
-rw-r--r--   1 harbour psacln    5260914 Oct  6 03:36 harbour-nightly.1.bz2
-rw-r--r--   1 harbour psacln    6683920 Oct  6 03:36 harbour-nightly.1.tgz
-rw-r--r--   1 harbour psacln    8515888 Oct  6 03:36 harbour-nightly.1.zip
-rw-r--r--   1 harbour psacln    5260914 Oct  6 03:37 harbour-nightly.bz2
-rw-r--r--   1 harbour psacln    6683920 Oct  6 03:37 harbour-nightly.tgz
-rw-r--r--   1 harbour psacln    8515888 Oct  6 03:37 harbour-nightly.zip

Over the next 5 nights, these will pushed backwards and will reach back 4 
previous versions from then on.

The shells script is here: (line wrap got the export line)

#!/bin/bash

PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin; export PATH

rm -rf /var/www/vhosts/harbour-project.org/httpdocs/co/*

cd /var/www/vhosts/harbour-project.org/httpdocs/co

echo Nightly Harbour Subversion Checkout

svn export 
https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/harbour 
harbour

cd /var/www/vhosts/harbour-project.org/httpdocs

echo Create tarball of Repository Backup
echo BZip
rm -f harbour-nightly.temp.bz2
tar --use-compress-prog=bzip2 -cf harbour-nightly.temp.bz2 co/
rm -f harbour-nightly.4.bz2
mv harbour-nightly.3.bz2 harbour-nightly.4.bz2
mv harbour-nightly.2.bz2 harbour-nightly.3.bz2
mv harbour-nightly.1.bz2 harbour-nightly.2.bz2
mv harbour-nightly.bz2 harbour-nightly.1.bz2
mv harbour-nightly.temp.bz2 harbour-nightly.bz2

echo Tarball
rm -f harbour-nightly.temp.tgz
tar -czf harbour-nightly.temp.tgz co/
rm -f harbour-nightly.4.tgz
mv harbour-nightly.3.tgz harbour-nightly.4.tgz
mv harbour-nightly.2.tgz harbour-nightly.3.tgz
mv harbour-nightly.1.tgz harbour-nightly.2.tgz
mv harbour-nightly.tgz harbour-nightly.1.tgz
mv harbour-nightly.temp.tgz harbour-nightly.tgz

echo Zip
rm -f harbour-nightly.temp.zip
zip -r -q harbour-nightly.temp.zip co/
rm -f harbour-nightly.4.zip
mv harbour-nightly.3.zip harbour-nightly.4.zip
mv harbour-nightly.2.zip harbour-nightly.3.zip
mv harbour-nightly.1.zip harbour-nightly.2.zip
mv harbour-nightly.zip harbour-nightly.1.zip
mv harbour-nightly.temp.zip harbour-nightly.zip

chown harbour.psacln *

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From e.m.giordano at emagsoftware.it  Mon Oct  6 03:49:32 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Oct  6 03:49:40 2008
Subject: [Harbour] Errors in latest SVN
Message-ID: <82F86F8B8497482B9C564DAAC320904B@emag>

Error E2356 source\vm\thread.c 125: Type mismatch in redeclaration of 
's_critical_init'
Error E2344 source\vm\thread.c 103: Earlier declaration of 's_critical_init'
Error E2291 source\vm\thread.c 125: } expected
Error E2141 source\vm\thread.c 125: Declaration syntax error
Error E2190 source\vm\thread.c 125: Unexpected }
Error E2190 source\vm\thread.c 125: Unexpected }
Error E2190 source\vm\thread.c 125: Unexpected }

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From maurilio.longo at libero.it  Mon Oct  6 03:54:36 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Mon Oct  6 03:54:47 2008
Subject: [Harbour] os/2 spinlocks give error
Message-ID: <48E9C43C.3030300@libero.it>

Good morning Przemyslaw,

I see that it was a full weekend of tests out there :)

Today I was going to try your latest changes to the OS/2 build, but I get this
error during a full rebuild

(E:\repository\harbour-svn\source\vm\vmmt)IF NOT EXIST ..\..\..\lib\os2\gcc md .
.\..\..\lib\os2\gcc
make[2]: Entering directory `/repository/harbour-svn/source/vm/vmmt/os2/gcc'
gcc -I. -I../../../../../include -Wall -W -O3 -DTCPV40HDRS -DHB_FM_STATISTICS_OF
F -DHB_MT_VM -c ../../../thread.c -othread.o
../../../thread.c:125: error: conflicting types for `s_critical_init'
../../../thread.c:103: error: previous declaration of `s_critical_init'
../../../thread.c: In function `hb_threadCondInit':
../../../thread.c:131: error: incompatible type for argument 1 of `DosRequestMut
exSem'
../../../thread.c:141: error: incompatible type for argument 1 of `DosReleaseMut
exSem'
../../../thread.c: In function `hb_threadInit':
../../../thread.c:154: warning: passing arg 2 of `DosCreateMutexSem' from incomp
atible pointer type
../../../thread.c: In function `hb_threadExit':
../../../thread.c:175: error: incompatible type for argument 1 of `DosCloseMutex
Sem'
make[2]: *** [thread.o] Error 1
make[2]: Leaving directory `/repository/harbour-svn/source/vm/vmmt/os2/gcc'
make[1]: *** [descend] Error 2
make[1]: Leaving directory `/repository/harbour-svn/source/vm/vmmt'
make: *** [first] Error 2


Best regards.

Maurilio.


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From e.m.giordano at emagsoftware.it  Mon Oct  6 03:56:21 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Oct  6 03:56:31 2008
Subject: [Harbour] Harbour website extremely slow
References: <E800F5152AD04DF28A1BEDFE5D6D75E6@emag><531d7a750810050342h19a8fb64jddc82b33c30b883c@mail.gmail.com><9448235EF856420780F44BF8397F17AA@emag>
	<200810052054.09154.philb@philb.us>
Message-ID: <DB9F36D6F6664947A0B865777E85E175@emag>


-----Messaggio Originale----- 
Da: "Phil Barnett" <philb@philb.us>
A: <harbour@harbour-project.org>
Data invio: luned? 6 ottobre 2008 2.54
Oggetto: Re: [Harbour] Harbour website extremely slow


> On Sunday 05 October 2008 07:27:32 am Enrico Maria Giordano wrote:
>
> > It's already better now.
>
> I didn't do anything.
>
> You can see it's load and traffic performance graphs here:
>
> http://www.linuxceptional.com/mrgt/
>
> Doesn't look like anything exceptional was happening.

Probably it was something temporarily bad in an unspecified place between 
your server and my PC. :-)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lorenzo.fiorini at gmail.com  Mon Oct  6 04:04:57 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Oct  6 04:05:06 2008
Subject: [Harbour] 2008-10-05 17:53 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0810051456u419117baxf825efeee735f404@mail.gmail.com>
References: <20081005155349.GA29760@34-mo7-2.acn.waw.pl>
	<FCA90007D2D74CA7B58F423F025A6B69@emag>
	<20081005190444.GA2093@34-mo7-2.acn.waw.pl>
	<9257026e0810051252t938236n39d5053539152fcb@mail.gmail.com>
	<20081005205619.GB666@34-mo7-2.acn.waw.pl>
	<9257026e0810051414o7d622da6vb5c585b5b87e95ae@mail.gmail.com>
	<9257026e0810051456u419117baxf825efeee735f404@mail.gmail.com>
Message-ID: <9257026e0810060104v46954794r27dceecae3f35096@mail.gmail.com>

On Sun, Oct 5, 2008 at 11:56 PM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com> wrote:

> Tomorrow I'll be able to do some tests on servers ranging from Xeon
> Dual Processors ( two physical CPUs 4 logical ones ) to Dual Quad
> Processors ( 2 physical CPUs 8 logical ones ).

Here is the speedtst --thread=2 --scale --exclude=mem on a Dual Quad Xeon E5410
running Centos 5.2 i386 ( the server was in use by ~50 users )

10/06/08 09:55:01 Linux 2.6.18-92.1.10.el5PAE i686
Harbour 1.1.0dev (Rev. 9551) (MT)+ GNU C 4.2.3 (32 bit)
THREADS: 2
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032
                                                        1 th.  2 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.28   0.39 ->  0.71
[ T002: x := L_N ]____________________________________  0.20   0.29 ->  0.69
[ T003: x := L_D ]____________________________________  0.21   0.33 ->  0.63
[ T004: x := S_C ]____________________________________  0.25   0.70 ->  0.37
[ T005: x := S_N ]____________________________________  0.18   0.32 ->  0.58
[ T006: x := S_D ]____________________________________  0.18   0.31 ->  0.59
[ T007: x := M_C ]____________________________________  0.27   0.48 ->  0.56
[ T008: x := M_N ]____________________________________  0.21   0.47 ->  0.44
[ T009: x := M_D ]____________________________________  0.20   0.44 ->  0.46
[ T010: x := P_C ]____________________________________  0.24   0.43 ->  0.54
[ T011: x := P_N ]____________________________________  0.20   0.45 ->  0.45
[ T012: x := P_D ]____________________________________  0.20   0.45 ->  0.45
[ T013: x := F_C ]____________________________________  0.55   0.80 ->  0.68
[ T014: x := F_N ]____________________________________  0.48   0.59 ->  0.81
[ T015: x := F_D ]____________________________________  0.28   0.50 ->  0.57
[ T016: x := o:GenCode ]______________________________  0.49   0.76 ->  0.64
[ T017: x := o[8] ]___________________________________  0.36   0.72 ->  0.50
[ T018: round( i / 1000, 2 ) ]________________________  0.58   0.76 ->  0.77
[ T020: val( s ) ]____________________________________  0.63   0.67 ->  0.94
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  1.06   1.52 ->  0.69
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.73   1.12 ->  0.65
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  0.65   1.16 ->  0.56
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  0.86   1.54 ->  0.56
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  0.91   1.53 ->  0.60
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  0.98   1.63 ->  0.60
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  0.99   1.66 ->  0.59
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  0.98   1.47 ->  0.67
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  0.98   1.68 ->  0.59
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  1.00   1.53 ->  0.65
[ T039: ascan( a, i % 16 ) ]__________________________  0.77   0.99 ->  0.78
[ T042: x := a ]______________________________________  0.27   0.52 ->  0.52
[ T044: f0() ]________________________________________  0.30   0.66 ->  0.46
[ T045: f1( i ) ]_____________________________________  0.43   0.95 ->  0.45
[ T046: f2( c[1...8] ) ]______________________________  0.49   0.92 ->  0.54
[ T047: f2( c[1...40000] ) ]__________________________  0.49   0.92 ->  0.53
[ T048: f2( @c[1...40000] ) ]_________________________  0.49   0.91 ->  0.54
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.55   1.11 ->  0.50
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  1.21   1.71 ->  0.71
[ T051: f2( a ) ]_____________________________________  0.51   1.00 ->  0.51
[ T054: f_prv( c ) ]__________________________________  1.44   1.77 ->  0.81
============================================================================
[   TOTAL   ]_________________________________________ 22.08  36.15 ->  0.61
============================================================================
[ total application time: ]....................................93.15
[ total real time: ]...........................................58.23
From philb at philb.us  Mon Oct  6 04:09:33 2008
From: philb at philb.us (Phil Barnett)
Date: Mon Oct  6 04:09:41 2008
Subject: [Harbour] harbour-project.org anon FTP
In-Reply-To: <BE090C62-5C74-4589-AD30-3A68D3450B04@syenar.hu>
References: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
	<200810052202.50820.philb@philb.us>
	<BE090C62-5C74-4589-AD30-3A68D3450B04@syenar.hu>
Message-ID: <200810060409.33362.philb@philb.us>

On Sunday 05 October 2008 10:16:07 pm Szak?ts Viktor wrote:
> For the daily snapshots:
> svn export
> http://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/ha
>rbour [ this will put the result in a 'harbour' subfolder. https also works
> BTW. ]
>
> For SVN backups:
> rsync -av harbour-project.svn.sourceforge.net::svn/harbour-project/* .

Do you have a script I can run to do a nightly build?

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From harbour.01 at syenar.hu  Mon Oct  6 04:46:50 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  6 04:47:04 2008
Subject: [Harbour] harbour-project.org anon FTP
In-Reply-To: <200810060345.24344.philb@philb.us>
References: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
	<200810052307.38628.philb@philb.us>
	<616AC212-63E0-4BF3-8E10-C3C6422CA642@syenar.hu>
	<200810060345.24344.philb@philb.us>
Message-ID: <AA5A525A-438B-42F8-96EA-2A2D52C1B546@syenar.hu>

>>
Hi Phil,

>> Also, the dailies would IMO better be named as
>> 'harbour-nightly.[zip|tgz|bz2]'.

>

Great, I've modified the homepage to have all
three, with the new names.

Here is a small patch to avoid the internal
'co' directory in the source archives:

---
...
cd /var/www/vhosts/harbour-project.org/httpdocs/co

echo Create tarball of Repository Backup
echo BZip
rm -f harbour-nightly.temp.bz2
tar --use-compress-prog=bzip2 -cf harbour-nightly.temp.bz2 harbour/
rm -f harbour-nightly.4.bz2
mv harbour-nightly.3.bz2 harbour-nightly.4.bz2
mv harbour-nightly.2.bz2 harbour-nightly.3.bz2
mv harbour-nightly.1.bz2 harbour-nightly.2.bz2
mv harbour-nightly.bz2 harbour-nightly.1.bz2
mv harbour-nightly.temp.bz2 harbour-nightly.bz2

echo Tarball
rm -f harbour-nightly.temp.tgz
tar -czf harbour-nightly.temp.tgz harbour/
rm -f harbour-nightly.4.tgz
mv harbour-nightly.3.tgz harbour-nightly.4.tgz
mv harbour-nightly.2.tgz harbour-nightly.3.tgz
mv harbour-nightly.1.tgz harbour-nightly.2.tgz
mv harbour-nightly.tgz harbour-nightly.1.tgz
mv harbour-nightly.temp.tgz harbour-nightly.tgz

echo Zip
rm -f harbour-nightly.temp.zip
zip -r -q harbour-nightly.temp.zip harbour/
rm -f harbour-nightly.4.zip
mv harbour-nightly.3.zip harbour-nightly.4.zip
mv harbour-nightly.2.zip harbour-nightly.3.zip
mv harbour-nightly.1.zip harbour-nightly.2.zip
mv harbour-nightly.zip harbour-nightly.1.zip
mv harbour-nightly.temp.zip harbour-nightly.zip

chown harbour.psacln *
---

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Oct  6 04:59:18 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  6 04:59:28 2008
Subject: [Harbour] harbour-project.org anon FTP
In-Reply-To: <200810060409.33362.philb@philb.us>
References: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
	<200810052202.50820.philb@philb.us>
	<BE090C62-5C74-4589-AD30-3A68D3450B04@syenar.hu>
	<200810060409.33362.philb@philb.us>
Message-ID: <ADD0D139-A78B-45E4-859D-97B1378AA765@syenar.hu>

Hi Phil,

>> For SVN backups:
>> rsync -av harbour-project.svn.sourceforge.net::svn/harbour-project/ 
>> * .
>
> Do you have a script I can run to do a nightly build?

You can create the most generic binary build by
going into 'harbour' dir of the nightly source,
and running './make_tgz.sh'. The result will be
a .tgz file in that 'harbour' dir. The exact .tgz
name depends on the system, but this will be
the only .tgz file there, so it's easy to find.

Brgds,
Viktor

From druzus at acn.waw.pl  Mon Oct  6 05:17:28 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  6 05:17:39 2008
Subject: [Harbour] 2008-10-06 11:17 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081006091728.GA7959@34-mo7-2.acn.waw.pl>

2008-10-06 11:17 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/thread.c
    ! fixed typo in recent modification

best regards
Przemek
From mbelgrano at deltain.it  Mon Oct  6 05:31:17 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Oct  6 05:31:41 2008
Subject: [Harbour] Harbour website extremely slow
In-Reply-To: <9448235EF856420780F44BF8397F17AA@emag>
References: <E800F5152AD04DF28A1BEDFE5D6D75E6@emag><531d7a750810050334s2a26b9bdwe842b5047bb99351@mail.gmail.com><B60D22C1DFC8433C9FC43827A4C85B1C@emag><531d7a750810050342h19a8fb64jddc82b33c30b883c@mail.gmail.com>
	<9448235EF856420780F44BF8397F17AA@emag>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F035@SRV02.deltain.net>

After clear cache starting from blank page load preview main page open
in 15 second  from http://harbour-project.org/preview/
Then About page in 3 second

After clear cache starting from blank page load preview main page open
in 12 second from http://harbour-project.org

Similar result internet explorer,google crome

This from italy


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Enrico Maria
Giordano
Sent: Sunday, October 05, 2008 1:28 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Harbour website extremely slow


-----Messaggio Originale----- 
Da: "Vailton Renato" <vailtom@gmail.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: domenica 5 ottobre 2008 12.42
Oggetto: Re: [Harbour] Harbour website extremely slow


> Ok.I have not updated any page on the site "official" because there
> are still outstanding details ... may have been something temporary,
> let's see.

It's already better now.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From e.m.giordano at emagsoftware.it  Mon Oct  6 06:00:15 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Oct  6 06:00:24 2008
Subject: [Harbour] 2008-10-06 11:17 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20081006091728.GA7959@34-mo7-2.acn.waw.pl>
Message-ID: <87E181559B2A42059898B46345E0F183@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: <harbour@harbour-project.org>
Data invio: luned? 6 ottobre 2008 11.17
Oggetto: [Harbour] 2008-10-06 11:17 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> 2008-10-06 11:17 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/vm/thread.c
>    ! fixed typo in recent modification

Thank you, now it's fine.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From dmacias at mail.udg.mx  Mon Oct  6 06:05:09 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Mon Oct  6 06:05:09 2008
Subject: [Harbour] Re: Harbour under OS/2
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48E9E2D5.2060209@mail.udg.mx>

Current Harbour under OS/2 build/run with just one warning:

------------------------
../../../garbage.c: In function `hb_gc_acquire_lock':
../../../garbage.c:102: warning: implicit declaration of function `DosSleep'
------------------------

David Macias



From dmacias at mail.udg.mx  Mon Oct  6 06:20:00 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Mon Oct  6 06:19:59 2008
Subject: [Harbour] Re: Harbour under OS/2
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48E9E650.3060606@mail.udg.mx>

and trying to build hbrun.exe with hbvmmt:

------------------------
../../../../lib/os2/gcc/hbvmmt.a(garbage.o): Undefined symbol _DosSleep 
referenc
ed from text segment
../../../../lib/os2/gcc/hbvmmt.a(garbage.o): Undefined symbol _DosSleep 
referenc
ed from text segment
../../../../lib/os2/gcc/hbvmmt.a(garbage.o): Undefined symbol _DosSleep 
referenc
ed from text segment
../../../../lib/os2/gcc/hbvmmt.a(garbage.o): Undefined symbol _DosSleep 
referenc
ed from text segment
../../../../lib/os2/gcc/hbvmmt.a(garbage.o): Undefined symbol _DosSleep 
referenc
ed from text segment
../../../../lib/os2/gcc/hbvmmt.a(garbage.o): Undefined symbol _DosSleep 
referenc
ed from text segment
../../../../lib/os2/gcc/hbvmmt.a(garbage.o): Undefined symbol _DosSleep 
referenc
ed from text segment
../../../../lib/os2/gcc/hbvmmt.a(garbage.o): Undefined symbol _DosSleep 
referenc
ed from text segment
../../../../lib/os2/gcc/hbvmmt.a(garbage.o): Undefined symbol _DosSleep 
referenc
ed from text segment
../../../../lib/os2/gcc/hbvmmt.a(garbage.o): More undefined symbol 
_DosSleep ref
s follow
make[1]: *** [hbrun.exe] Error 1
make: *** [descend] Error 2
------------------------

David Macias




From niki at synel.co.il  Mon Oct  6 06:37:14 2008
From: niki at synel.co.il (Chen Kedem)
Date: Mon Oct  6 06:38:13 2008
Subject: [Harbour] Re: Harbour Web site - Preview #1
Message-ID: <1A07FEDC778C3E4AA417F089511F859C03268A6A55@Mail-yoq.SYNEL-COMPANY.LTD>

1) Some of the text is too small.

2) The layout use a fixed font size which can't be change when I set my browser to a different font size.

3) The SF Logo should be added to each page so page statistics are added to the Harbour project on SF.
(we use Logo4 on the home page now)

Logo 3 (Dimensions: 125 by 37; Background color: black)
HTML code follows:
<a href="http://sourceforge.net"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=681&amp;type=3" width="125" height="37" border="0" alt="SourceForge.net Logo" /></a>

Logo 4 (Dimensions: 125 by 37; Background color: blue)
HTML code follows:
<a href="http://sourceforge.net"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=681&amp;type=4" width="125" height="37" border="0" alt="SourceForge.net Logo" /></a>


  Chen.
From druzus at acn.waw.pl  Mon Oct  6 06:38:23 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  6 06:38:33 2008
Subject: [Harbour] 2008-10-06 12:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081006103823.GA15119@34-mo7-2.acn.waw.pl>

2008-10-06 12:38 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbclass.ch
  * harbour/include/hboo.ch
    + added SYNC attribute to accepted syntax in class declaration
      it allows to compile code which uses this attribute but low
      level implementation is not ready yet - work in progress

  * harbour/source/vm/garbage.c
    ! added #define INCL_DOSPROCESS for OS2 builds. For some reasons
      #define INCL_DOSDATETIME I've found in DosSleep() documentation
      is note enough

best regards
Przemek
From dmacias at mail.udg.mx  Mon Oct  6 08:31:14 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Mon Oct  6 08:31:18 2008
Subject: [Harbour] Re: 2008-10-05 17:53 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48EA0512.7080807@mail.udg.mx>

Below are results of

[E:\harbour809mt\harbour\tests]..\bin\hbrun_mt.exe speedtst.prg 
--thread=2 --scale --exclude=mem

Strange results, or I am confused ?
factor are around 2 (total 1.90) but computer is SINGLE CPU

AMD Athlon 2200+ 2.0 Ghz, 1 Gb RAM

David Macias


10/06/08 07:08:33 OS/2 4.50
Harbour 1.1.0dev (Rev. 9557) (MT)+ EMX GNU C 3.3.5 (32 bit)
THREADS: 2
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                         1 th.  2 th. 
factor
============================================================================
[ T001: x := L_C ]____________________________________  1.74   0.79 ->  2.20
[ T002: x := L_N ]____________________________________  1.84   0.79 ->  2.32
[ T003: x := L_D ]____________________________________  2.90   2.17 ->  1.34
[ T004: x := S_C ]____________________________________  1.63   0.83 ->  1.96
[ T005: x := S_N ]____________________________________  1.53   0.79 ->  1.95
[ T006: x := S_D ]____________________________________  1.53   0.79 ->  1.94
[ T007: x := M_C ]____________________________________  1.52   0.80 ->  1.91
[ T008: x := M_N ]____________________________________  1.51   0.79 ->  1.90
[ T009: x := M_D ]____________________________________  1.54   0.79 ->  1.96
[ T010: x := P_C ]____________________________________  1.79   0.76 ->  2.37
[ T011: x := P_N ]____________________________________  1.57   0.78 ->  2.00
[ T012: x := P_D ]____________________________________  1.39   0.79 ->  1.75
[ T013: x := F_C ]____________________________________  3.21   3.07 ->  1.05
[ T014: x := F_N ]____________________________________  3.30   1.74 ->  1.89
[ T015: x := F_D ]____________________________________  1.71   0.95 ->  1.81
[ T016: x := o:GenCode ]______________________________  2.97   1.67 ->  1.78
[ T017: x := o[8] ]___________________________________  2.84   1.28 ->  2.23
[ T018: round( i / 1000, 2 ) ]________________________  3.80   2.02 ->  1.88
[ T020: val( s ) ]____________________________________  3.58   2.06 ->  1.74
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  6.21   3.29 ->  1.89
[ T024: eval( bc := { || i % 16 } ) ]_________________  3.98   1.78 ->  2.23
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  3.97   2.06 ->  1.93
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  5.51   2.59 ->  2.13
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  4.68   2.49 ->  1.87
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  5.55   2.81 ->  1.97
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  5.78   2.72 ->  2.12
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  5.56   2.92 ->  1.91
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  5.48   2.76 ->  1.99
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  5.38   2.72 ->  1.98
[ T039: ascan( a, i % 16 ) ]__________________________  6.33   3.21 ->  1.98
[ T042: x := a ]______________________________________  1.51   0.82 ->  1.85
[ T044: f0() ]________________________________________  2.59   1.53 ->  1.69
[ T045: f1( i ) ]_____________________________________  3.17   1.66 ->  1.92
[ T046: f2( c[1...8] ) ]______________________________  3.39   1.67 ->  2.03
[ T047: f2( c[1...40000] ) ]__________________________  3.20   1.58 ->  2.03
[ T048: f2( @c[1...40000] ) ]_________________________  2.56   1.53 ->  1.67
[ T049: f2( @c[1...40000] ), c2 := c ]________________  4.25   2.06 ->  2.07
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  6.33   3.28 ->  1.93
[ T051: f2( a ) ]_____________________________________  3.02   1.62 ->  1.87
============================================================================
[   TOTAL   ]_________________________________________130.34  68.73 ->  1.90
============================================================================
[ total application time: ]...................................260.81
[ total real time: ]..........................................260.81


From druzus at acn.waw.pl  Mon Oct  6 09:10:46 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  6 09:10:56 2008
Subject: [Harbour] Re: 2008-10-05 17:53 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <48EA0512.7080807@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48EA0512.7080807@mail.udg.mx>
Message-ID: <20081006131046.GA1839@34-mo7-2.acn.waw.pl>

On Mon, 06 Oct 2008, David Arturo Macias Corona wrote:

Hi David,

> Below are results of
> [E:\harbour809mt\harbour\tests]..\bin\hbrun_mt.exe speedtst.prg --thread=2 
> --scale --exclude=mem
> Strange results, or I am confused ?
> factor are around 2 (total 1.90) but computer is SINGLE CPU
> AMD Athlon 2200+ 2.0 Ghz, 1 Gb RAM

> 10/06/08 07:08:33 OS/2 4.50
> Harbour 1.1.0dev (Rev. 9557) (MT)+ EMX GNU C 3.3.5 (32 bit)
> THREADS: 2
> N_LOOPS: 1000000
> excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
>                                                         1 th.  2 th. factor
> ============================================================================
[...]
> ============================================================================
> [   TOTAL   ]_________________________________________130.34  68.73 ->  1.90
> ============================================================================
> [ total application time: ]...................................260.81
> [ total real time: ]..........................................260.81

Thank you very much for test results.
The real factor is 1.00. See the total real time values:
260.81 - 130.34 = 130.47
130.34 / 130.47 = 99.9
but in 130.47 we have also cost of test envelop so it's in practice 1.00.
Such effect can be caused by irregular internal real time clock counter
updating. Such things happens in Win9x. Probably OS2 does not update
real time clock counter when more then one thread is executed simultaneously.
F.e. it can retrieve clock value from cache when other threads are still
active waiting for CPU and refresh it only when current thread is the one
working. In such case in the second column you will have only the time of
the second thread because when 1-st one finished the clock counter is not
updated and returns starting value. Above results suggest that exactly sth
like that happened in your case.
It's yet another bad side effect of using real time clock. Fortunatelly
here real results can be recalculated from total real time.
It will be interesting to see how the same test will look in OS2 on multi
CPU machine.

BTW Has OS2 some functions to retrieve CPU time consumed by process and/or
    thread?

best regards,
Przemek

ps. There is sth wrong with you mail program. All messages you sent are
    attached to very old threads from 2005. If mail/news reader can follow
    threads not only subject then it's hard to locate them.
From maurilio.longo at libero.it  Mon Oct  6 09:16:58 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Mon Oct  6 09:17:07 2008
Subject: [Harbour] Re: 2008-10-05 17:53 UTC+0200
	Przemyslaw	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <48EA0512.7080807@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48EA0512.7080807@mail.udg.mx>
Message-ID: <48EA0FCA.40704@libero.it>

Przemyslaw,

here my numbers with latest speedtst.prg and with my older one (sp.log), to
see if spinlocks give better numbers.

New speedtst with --thread=2 --scale

Best regards.

Maurilio.


David Arturo Macias Corona wrote:
> Below are results of
> 
> [E:\harbour809mt\harbour\tests]..\bin\hbrun_mt.exe speedtst.prg
> --thread=2 --scale --exclude=mem
> 
> Strange results, or I am confused ?
> factor are around 2 (total 1.90) but computer is SINGLE CPU
> 
> AMD Athlon 2200+ 2.0 Ghz, 1 Gb RAM
> 
> David Macias
> 
> 
> 10/06/08 07:08:33 OS/2 4.50
> Harbour 1.1.0dev (Rev. 9557) (MT)+ EMX GNU C 3.3.5 (32 bit)
> THREADS: 2
> N_LOOPS: 1000000
> excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
>                                                         1 th.  2 th. factor
> ============================================================================
> 
> [ T001: x := L_C ]____________________________________  1.74   0.79 -> 
> 2.20
> [ T002: x := L_N ]____________________________________  1.84   0.79 -> 
> 2.32
> [ T003: x := L_D ]____________________________________  2.90   2.17 -> 
> 1.34
> [ T004: x := S_C ]____________________________________  1.63   0.83 -> 
> 1.96
> [ T005: x := S_N ]____________________________________  1.53   0.79 -> 
> 1.95
> [ T006: x := S_D ]____________________________________  1.53   0.79 -> 
> 1.94
> [ T007: x := M_C ]____________________________________  1.52   0.80 -> 
> 1.91
> [ T008: x := M_N ]____________________________________  1.51   0.79 -> 
> 1.90
> [ T009: x := M_D ]____________________________________  1.54   0.79 -> 
> 1.96
> [ T010: x := P_C ]____________________________________  1.79   0.76 -> 
> 2.37
> [ T011: x := P_N ]____________________________________  1.57   0.78 -> 
> 2.00
> [ T012: x := P_D ]____________________________________  1.39   0.79 -> 
> 1.75
> [ T013: x := F_C ]____________________________________  3.21   3.07 -> 
> 1.05
> [ T014: x := F_N ]____________________________________  3.30   1.74 -> 
> 1.89
> [ T015: x := F_D ]____________________________________  1.71   0.95 -> 
> 1.81
> [ T016: x := o:GenCode ]______________________________  2.97   1.67 -> 
> 1.78
> [ T017: x := o[8] ]___________________________________  2.84   1.28 -> 
> 2.23
> [ T018: round( i / 1000, 2 ) ]________________________  3.80   2.02 -> 
> 1.88
> [ T020: val( s ) ]____________________________________  3.58   2.06 -> 
> 1.74
> [ T021: val( a [ i % 16 + 1 ] ) ]_____________________  6.21   3.29 -> 
> 1.89
> [ T024: eval( bc := { || i % 16 } ) ]_________________  3.98   1.78 -> 
> 2.23
> [ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  3.97   2.06 -> 
> 1.93
> [ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  5.51   2.59 -> 
> 2.13
> [ T033: x := a[ i % 16 + 1 ] == s ]___________________  4.68   2.49 -> 
> 1.87
> [ T034: x := a[ i % 16 + 1 ] = s ]____________________  5.55   2.81 -> 
> 1.97
> [ T035: x := a[ i % 16 + 1 ] >= s ]___________________  5.78   2.72 -> 
> 2.12
> [ T036: x := a[ i % 16 + 1 ] <= s ]___________________  5.56   2.92 -> 
> 1.91
> [ T037: x := a[ i % 16 + 1 ] < s ]____________________  5.48   2.76 -> 
> 1.99
> [ T038: x := a[ i % 16 + 1 ] > s ]____________________  5.38   2.72 -> 
> 1.98
> [ T039: ascan( a, i % 16 ) ]__________________________  6.33   3.21 -> 
> 1.98
> [ T042: x := a ]______________________________________  1.51   0.82 -> 
> 1.85
> [ T044: f0() ]________________________________________  2.59   1.53 -> 
> 1.69
> [ T045: f1( i ) ]_____________________________________  3.17   1.66 -> 
> 1.92
> [ T046: f2( c[1...8] ) ]______________________________  3.39   1.67 -> 
> 2.03
> [ T047: f2( c[1...40000] ) ]__________________________  3.20   1.58 -> 
> 2.03
> [ T048: f2( @c[1...40000] ) ]_________________________  2.56   1.53 -> 
> 1.67
> [ T049: f2( @c[1...40000] ), c2 := c ]________________  4.25   2.06 -> 
> 2.07
> [ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  6.33   3.28 -> 
> 1.93
> [ T051: f2( a ) ]_____________________________________  3.02   1.62 -> 
> 1.87
> ============================================================================
> 
> [   TOTAL   ]_________________________________________130.34  68.73 -> 
> 1.90
> ============================================================================
> 
> [ total application time: ]...................................260.81
> [ total real time: ]..........................................260.81
> 
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: speedtst.log
Type: application/x-log
Size: 4863 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081006/80ce1255/speedtst-0001.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: sp.log
Type: application/x-log
Size: 3386 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081006/80ce1255/sp-0001.bin
From maurilio.longo at libero.it  Mon Oct  6 09:27:54 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Mon Oct  6 09:28:03 2008
Subject: [Harbour] Re: 2008-10-05 17:53 UTC+0200
	Przemyslaw	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <48EA0512.7080807@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48EA0512.7080807@mail.udg.mx>
Message-ID: <48EA125A.5070300@libero.it>

Here with --exclude=mem

10/06/08 15:17:17 OS/2 4.50
Harbour 1.1.0dev (Rev. 9555) (MT)+ EMX GNU C 3.3.5 (32 bit)
THREADS: 2
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  2 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.50   0.31 ->  1.60
[ T002: x := L_N ]____________________________________  0.27   0.24 ->  1.13
[ T003: x := L_D ]____________________________________  0.36   0.32 ->  1.15
[ T004: x := S_C ]____________________________________  0.78   0.35 ->  2.21
[ T005: x := S_N ]____________________________________  0.51   0.41 ->  1.23
[ T006: x := S_D ]____________________________________  0.47   0.29 ->  1.60
[ T007: x := M_C ]____________________________________  0.77   0.46 ->  1.69
[ T008: x := M_N ]____________________________________  0.53   0.33 ->  1.61
[ T009: x := M_D ]____________________________________  0.48   0.51 ->  0.93
[ T010: x := P_C ]____________________________________  1.02   0.39 ->  2.60
[ T011: x := P_N ]____________________________________  0.42   0.39 ->  1.08
[ T012: x := P_D ]____________________________________  0.44   0.41 ->  1.08
[ T013: x := F_C ]____________________________________  2.23   1.72 ->  1.29
[ T014: x := F_N ]____________________________________  1.20   0.87 ->  1.38
[ T015: x := F_D ]____________________________________  0.92   0.32 ->  2.91
[ T016: x := o:GenCode ]______________________________  1.76   0.84 ->  2.09
[ T017: x := o[8] ]___________________________________  0.79   0.58 ->  1.35
[ T018: round( i / 1000, 2 ) ]________________________  1.14   1.13 ->  1.01
[ T020: val( s ) ]____________________________________  1.88   1.26 ->  1.49
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  4.67   2.39 ->  1.95
[ T024: eval( bc := { || i % 16 } ) ]_________________  2.03   1.24 ->  1.64
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  1.87   1.20 ->  1.56
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  2.28   1.59 ->  1.44
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  2.41   1.57 ->  1.53
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  3.04   1.69 ->  1.80
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  2.60   1.80 ->  1.44
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  3.07   1.78 ->  1.73
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  3.00   1.92 ->  1.56
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  2.70   1.62 ->  1.67
[ T039: ascan( a, i % 16 ) ]__________________________  2.70   1.97 ->  1.38
[ T042: x := a ]______________________________________  0.50   0.54 ->  0.93
[ T044: f0() ]________________________________________  0.68   0.65 ->  1.06
[ T045: f1( i ) ]_____________________________________  0.99   0.69 ->  1.43
[ T046: f2( c[1...8] ) ]______________________________  1.13   0.73 ->  1.55
[ T047: f2( c[1...40000] ) ]__________________________  1.51   0.73 ->  2.06
[ T048: f2( @c[1...40000] ) ]_________________________  1.26   0.76 ->  1.67
[ T049: f2( @c[1...40000] ), c2 := c ]________________  1.82   0.84 ->  2.17
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  3.18   1.90 ->  1.67
[ T051: f2( a ) ]_____________________________________  1.10   0.74 ->  1.49
============================================================================
[   TOTAL   ]_________________________________________ 59.02  37.47 ->  1.58
============================================================================
[ total application time: ]....................................96.57
[ total real time: ]...........................................96.57

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From druzus at acn.waw.pl  Mon Oct  6 09:30:47 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  6 09:30:57 2008
Subject: [Harbour] 2008-10-06 15:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081006133047.GA32050@34-mo7-2.acn.waw.pl>

2008-10-06 15:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbthread.h
  * harbour/source/vm/thread.c
  * harbour/source/vm/hvm.c
    + add numeric HVM thread identifiers to thread structure. Now
      HB_THREADID() returns numbers in all OSes

  * harbour/include/hbexprop.h
  * harbour/include/hbexprb.c
  * harbour/source/common/expropt2.c
    + added compile time optimization for MIN() and MAX() functions

  * harbour/source/rtl/minmax.c
    * removed trailing spaces from source code

best regards
Przemek
From M.Horodyski at pzuzycie.com.pl  Mon Oct  6 09:40:18 2008
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Mon Oct  6 09:40:30 2008
Subject: [Harbour] Harbour website extremely slow
In-Reply-To: <NLB01FEZolmRBaYFkuu00001eb7@gatein.pzuzycie.com.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950158367D@PINK.zycie.pzu>

>Date: Mon, 6 Oct 2008 11:31:17 +0200
>From: "Massimo Belgrano" <mbelgrano@deltain.it>
>Subject: RE: [Harbour] Harbour website extremely slow
[...]
>After clear cache starting from blank page load preview main 
>page open in 15 second  from http://harbour-project.org/preview/

Massimo,
June < July < August :)

Regards,
Marek Horodyski
From mbelgrano at deltain.it  Mon Oct  6 09:44:38 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Oct  6 09:48:04 2008
Subject: [Harbour] Harbour website extremely slow
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950158367D@PINK.zycie.pzu>
References: <NLB01FEZolmRBaYFkuu00001eb7@gatein.pzuzycie.com.pl>
	<FFAFD6EA63A3FC4784FBDA52BE7A7C950158367D@PINK.zycie.pzu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F041@SRV02.deltain.net>

Sorry Marek
I don't undestand

Regard
Massimo Belgrano

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Horodyski
Marek (PZUZ)
Sent: Monday, October 06, 2008 3:40 PM
To: harbour@harbour-project.org
Subject: [Harbour] Harbour website extremely slow

>Date: Mon, 6 Oct 2008 11:31:17 +0200
>From: "Massimo Belgrano" <mbelgrano@deltain.it>
>Subject: RE: [Harbour] Harbour website extremely slow
[...]
>After clear cache starting from blank page load preview main 
>page open in 15 second  from http://harbour-project.org/preview/

Massimo,
June < July < August :)

Regards,
Marek Horodyski
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From vailtom at gmail.com  Mon Oct  6 09:56:59 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Mon Oct  6 09:57:08 2008
Subject: [Harbour] Harbour website extremely slow
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950158367D@PINK.zycie.pzu>
References: <NLB01FEZolmRBaYFkuu00001eb7@gatein.pzuzycie.com.pl>
	<FFAFD6EA63A3FC4784FBDA52BE7A7C950158367D@PINK.zycie.pzu>
Message-ID: <531d7a750810060656r20e1cc49u3cb63c5aefcfaf5d@mail.gmail.com>

This is just a test to demonstrate how would the layout of the site
with all the texts and images and for this reason there are some
errors in the content of the site. I will be updating it soon with the
correct content ... good comment on the order of months in the column
of news. ;-)


2008/10/6 Horodyski Marek (PZUZ) <M.Horodyski@pzuzycie.com.pl>:
>>Date: Mon, 6 Oct 2008 11:31:17 +0200
>>From: "Massimo Belgrano" <mbelgrano@deltain.it>
>>Subject: RE: [Harbour] Harbour website extremely slow
> [...]
>>After clear cache starting from blank page load preview main
>>page open in 15 second  from http://harbour-project.org/preview/
>
> Massimo,
> June < July < August :)
>
> Regards,
> Marek Horodyski
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Vailton Renato
SQL LIB, MyMake & xDev Developer
From maurilio.longo at libero.it  Mon Oct  6 09:57:47 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Mon Oct  6 09:58:05 2008
Subject: [Harbour] Re: 2008-10-05 17:53 UTC+0200
	Przemyslaw	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081006131046.GA1839@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>	<48EA0512.7080807@mail.udg.mx>
	<20081006131046.GA1839@34-mo7-2.acn.waw.pl>
Message-ID: <48EA195B.1070100@libero.it>

Przemyslaw Czerpak wrote:
> BTW Has OS2 some functions to retrieve CPU time consumed by process and/or
>     thread?
> 
I think it has it, I'll be more precise asap.

best regards.

maurilio.


> best regards,
> Przemek
> 
> ps. There is sth wrong with you mail program. All messages you sent are
>     attached to very old threads from 2005. If mail/news reader can follow
>     threads not only subject then it's hard to locate them.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From dbtopas at dbtopas.lt  Mon Oct  6 10:01:41 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Oct  6 09:59:35 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <20081004194142.GA6761@34-mo7-2.acn.waw.pl>
References: <20081002183352.GA30587@34-mo7-2.acn.waw.pl>	<48E5D29B.4030808@libero.it>	<20081003113240.GA12991@34-mo7-2.acn.waw.pl>	<48E6311D.9010102@libero.it>
	<48E63559.8020704@libero.it>	<48E6388A.8020202@libero.it>	<20081003162348.GA15016@34-mo7-2.acn.waw.pl>	<48E68C3C.60901@fsgiudice.com>	<20081003231342.GA23387@34-mo7-2.acn.waw.pl>	<48E73E0D.9030109@fsgiudice.com>
	<20081004194142.GA6761@34-mo7-2.acn.waw.pl>
Message-ID: <48EA1A45.5020006@dbtopas.lt>

Przemyslaw Czerpak wrote:
> Looks that there in no important difference between DL-MM and BCC-MM in
> real MT programs in your system. DL has a little bit better performance.
> In my test in Linux DL-MM in MT mode was killing the performance
> in MT+ test in comparison to default SUSE malloc when in ST mode
> it gives nearly the same results.

Hi,


here are some words about dlmalloc and multi-thread:

   Thread-safety: NOT thread-safe unless USE_LOCKS defined
        When USE_LOCKS is defined, each public call to malloc, free,
        etc is surrounded with either a pthread mutex or a win32
        spinlock (depending on WIN32). This is not especially fast, and
        can be a major bottleneck.  It is designed only to provide
        minimal protection in concurrent environments, and to provide a
        basis for extensions.  If you are using malloc in a concurrent
        program, consider instead using nedmalloc
        (http://www.nedprod.com/programs/portable/nedmalloc/) or
        ptmalloc (See http://www.malloc.de), which are derived
        from versions of this malloc.


Best regards,
Mindaugas

From druzus at acn.waw.pl  Mon Oct  6 10:01:02 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  6 10:01:12 2008
Subject: [Harbour] 2008-10-05 17:53 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0810060104v46954794r27dceecae3f35096@mail.gmail.com>
References: <20081005155349.GA29760@34-mo7-2.acn.waw.pl>
	<FCA90007D2D74CA7B58F423F025A6B69@emag>
	<20081005190444.GA2093@34-mo7-2.acn.waw.pl>
	<9257026e0810051252t938236n39d5053539152fcb@mail.gmail.com>
	<20081005205619.GB666@34-mo7-2.acn.waw.pl>
	<9257026e0810051414o7d622da6vb5c585b5b87e95ae@mail.gmail.com>
	<9257026e0810051456u419117baxf825efeee735f404@mail.gmail.com>
	<9257026e0810060104v46954794r27dceecae3f35096@mail.gmail.com>
Message-ID: <20081006140102.GA20267@34-mo7-2.acn.waw.pl>

On Mon, 06 Oct 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> Here is the speedtst --thread=2 --scale --exclude=mem on a Dual Quad Xeon E5410
> running Centos 5.2 i386 ( the server was in use by ~50 users )

Thanks for results.
When other processes are executed then this test will contain also their
cost because it uses real time clock. In multiCPU machines it will usually
reduce the factor because there is small chance that this test will receive
more then one CPU simultaneously. To make results comparable this
test should be executed without other process activity.

best regards,
Przemek
From rportnoff at spendmap.com  Mon Oct  6 10:12:04 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Mon Oct  6 10:10:42 2008
Subject: [Harbour] Mixing LIBs from different C versions
In-Reply-To: <20081006133047.GA32050@34-mo7-2.acn.waw.pl>
References: <20081006133047.GA32050@34-mo7-2.acn.waw.pl>
Message-ID: <B0084087688@ms1.3peaks.com>

Hi all,

What are the implications of using an older C .LIB (eg. ACE32.LIB for 
v6.2) with a Harbour/Application that is build using MSVS 2005?

TIA.

Regards,
Randy.


From druzus at acn.waw.pl  Mon Oct  6 10:38:38 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  6 10:38:51 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <48EA1A45.5020006@dbtopas.lt>
References: <20081003113240.GA12991@34-mo7-2.acn.waw.pl>
	<48E6311D.9010102@libero.it> <48E63559.8020704@libero.it>
	<48E6388A.8020202@libero.it>
	<20081003162348.GA15016@34-mo7-2.acn.waw.pl>
	<48E68C3C.60901@fsgiudice.com>
	<20081003231342.GA23387@34-mo7-2.acn.waw.pl>
	<48E73E0D.9030109@fsgiudice.com>
	<20081004194142.GA6761@34-mo7-2.acn.waw.pl>
	<48EA1A45.5020006@dbtopas.lt>
Message-ID: <20081006143838.GA13763@34-mo7-2.acn.waw.pl>

On Mon, 06 Oct 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> here are some words about dlmalloc and multi-thread:
>   Thread-safety: NOT thread-safe unless USE_LOCKS defined
>        When USE_LOCKS is defined, each public call to malloc, free,
>        etc is surrounded with either a pthread mutex or a win32
>        spinlock (depending on WIN32). This is not especially fast, and
>        can be a major bottleneck.  It is designed only to provide
>        minimal protection in concurrent environments, and to provide a
>        basis for extensions.  If you are using malloc in a concurrent
>        program, consider instead using nedmalloc
>        (http://www.nedprod.com/programs/portable/nedmalloc/) or
>        ptmalloc (See http://www.malloc.de), which are derived
>        from versions of this malloc.

I know about it but it does not mean that default C compilers MM mangers
are better. In all tests done so far it looks that they didn't. So far only
the MM in SuseLinux seems to be well scalable. I haven't tested other
Linux distros with multi CPU machine yet.

Best regards,
Przemek
From philb at philb.us  Mon Oct  6 12:43:18 2008
From: philb at philb.us (Phil Barnett)
Date: Mon Oct  6 12:43:28 2008
Subject: [Harbour] harbour-project.org anon FTP
In-Reply-To: <AA5A525A-438B-42F8-96EA-2A2D52C1B546@syenar.hu>
References: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
	<200810060345.24344.philb@philb.us>
	<AA5A525A-438B-42F8-96EA-2A2D52C1B546@syenar.hu>
Message-ID: <200810061243.18551.philb@philb.us>

On Monday 06 October 2008 04:46:50 am Szak?ts Viktor wrote:
> Here is a small patch to avoid the internal
> 'co' directory in the source archives:

I had to do a little more than that because the compressed files landed in the 
right directory, but it's essentially fixed to not have the co/ directory and 
that's what you wanted.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From philb at philb.us  Mon Oct  6 12:57:54 2008
From: philb at philb.us (Phil Barnett)
Date: Mon Oct  6 12:58:04 2008
Subject: [Harbour] harbour-project.org anon FTP
In-Reply-To: <ADD0D139-A78B-45E4-859D-97B1378AA765@syenar.hu>
References: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
	<200810060409.33362.philb@philb.us>
	<ADD0D139-A78B-45E4-859D-97B1378AA765@syenar.hu>
Message-ID: <200810061257.54602.philb@philb.us>

On Monday 06 October 2008 04:59:18 am Szak?ts Viktor wrote:
> You can create the most generic binary build by
> going into 'harbour' dir of the nightly source,
> and running './make_tgz.sh'. The result will be
> a .tgz file in that 'harbour' dir. The exact .tgz
> name depends on the system, but this will be
> the only .tgz file there, so it's easy to find.

should that be

./mpkg_tgz.sh

?

I don't find make_tgz.sh there.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From harbour.01 at syenar.hu  Mon Oct  6 13:14:58 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  6 13:15:10 2008
Subject: [Harbour] harbour-project.org anon FTP
In-Reply-To: <200810061257.54602.philb@philb.us>
References: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
	<200810060409.33362.philb@philb.us>
	<ADD0D139-A78B-45E4-859D-97B1378AA765@syenar.hu>
	<200810061257.54602.philb@philb.us>
Message-ID: <32DCEE0D-042E-4C45-9806-F9ED3ADEF25F@syenar.hu>

>
Hi Phil,

> On Monday 06 October 2008 04:59:18 am Szak?ts Viktor wrote:
>> You can create the most generic binary build by
>> going into 'harbour' dir of the nightly source,
>> and running './make_tgz.sh'. The result will be
>> a .tgz file in that 'harbour' dir. The exact .tgz
>> name depends on the system, but this will be
>> the only .tgz file there, so it's easy to find.
>
> should that be
>
> ./mpkg_tgz.sh
>
> ?
>
> I don't find make_tgz.sh there.

Yes, that's exactly it, mpkg_tgz.sh.

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Oct  6 13:18:48 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  6 13:18:59 2008
Subject: [Harbour] harbour-project.org anon FTP
In-Reply-To: <200810061243.18551.philb@philb.us>
References: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
	<200810060345.24344.philb@philb.us>
	<AA5A525A-438B-42F8-96EA-2A2D52C1B546@syenar.hu>
	<200810061243.18551.philb@philb.us>
Message-ID: <A6D4D74D-A752-427D-860A-7C90B43ADE64@syenar.hu>

Perfect!

Brgds,
Viktor

On 2008.10.06., at 18:43, Phil Barnett wrote:

> On Monday 06 October 2008 04:46:50 am Szak?ts Viktor wrote:
>> Here is a small patch to avoid the internal
>> 'co' directory in the source archives:
>
> I had to do a little more than that because the compressed files  
> landed in the
> right directory, but it's essentially fixed to not have the co/  
> directory and
> that's what you wanted.
>
> -- 
> "Ninety percent of politicians give the other 10 percent a bad  
> name." -- Henry
> Kissinger
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Oct  6 15:30:29 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  6 15:30:38 2008
Subject: [Harbour] 2008-10-06 21:27 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c927e9$Blat.v2.6.2$fdd3f20a$a287f5435e@127.0.0.1>

2008-10-06 21:27 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/hbapifs.h
   * include/hbextern.ch
   * source/common/hbfsapi.c
   * source/rtl/hbfile.c
     + Added hb_fsNameExists() C level function.
     + Added hb_FNameExists() Harbour level function.
     ; Both will return true if any kind of directory entry 
       exists with the given name (IOW it doesn't matter 
       if it's a file or directory, or else).
--
Brgds,
Viktor

From druzus at acn.waw.pl  Mon Oct  6 15:50:54 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  6 15:51:05 2008
Subject: [Harbour] 2008-10-06 21:50 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081006195054.GA28840@34-mo7-2.acn.waw.pl>

2008-10-06 21:50 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/hvm.c
    ! fixed last commit typo in thread number allocating - all threads
      where using 0 number

  * harbour/source/vm/thread.c
    ! fixed return value in recursive call to hb_mutexLock() - was FALSE
    ! fixed typo in timeout parameter number
      should be 2 instead of 1

  * harbour/source/rtl/tobject.prg
    ! fixed init() return value - it should be ignored and current
      object should be returned

  * harbour/source/rtl/tthreadx.prg
    ! probably fixed timeout parameter use in signal:wait() method
      I guess that like other xbase++ functions it's in 1/100th of
      a second

  * harbour/include/hboo.ch
  * harbour/include/hbclass.ch
  * harbour/source/vm/classes.c
  * harbour/source/rtl/tclass.prg
    + added support for SYNC object and CLASS messages working like
      in xBase++. Please remember that all locked by thread SYNC messages
      objects and classes are unblocked automatically for the time which
      thread spends in hb_subscribe[Now]() or signal:wait()

best regards
Przemek
From harbour.01 at syenar.hu  Mon Oct  6 16:23:23 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  6 16:23:43 2008
Subject: [Harbour] Darwin: 64-bit problem
In-Reply-To: <20081006004605.GB21313@34-mo7-2.acn.waw.pl>
References: <EB785383-2590-4256-A214-64F95EFB04CA@syenar.hu>
	<20081006004605.GB21313@34-mo7-2.acn.waw.pl>
Message-ID: <1F025F83-45E1-4D84-AA29-7FD9E1BDF5EE@syenar.hu>

Hi Przemek,

Thanks for these, I've added them, and will test
them in the next round.

Did you see the Darwin results?

Brgds,
Viktor

On 2008.10.06., at 2:46, Przemyslaw Czerpak wrote:

> On Mon, 06 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> I've built Harbour on Darwin with L_USR/C_USR="-arch x86_64".
>> Is there a way to pass these custom switches to hbmk?
>> [ Otherwise it doesn't work because of architecture mismatch. ]
>
> CC_C_USR, CC_L_USR, CC_PRG_USR are stored as defaults in hb*
> scripts. MinGW/MinGWCE cross builds use them.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Oct  6 16:25:10 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  6 16:25:18 2008
Subject: [Harbour] 2008-10-06 22:24 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c927f1$Blat.v2.6.2$a1a6e1ec$950503f12c6@127.0.0.1>

2008-10-06 22:24 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/hbthread.h
     ! Committed MT fix to make it compile under Darwin.
       Thanks Przemek.
--
Brgds,
Viktor

From philb at philb.us  Mon Oct  6 16:25:28 2008
From: philb at philb.us (Phil Barnett)
Date: Mon Oct  6 16:25:39 2008
Subject: [Harbour] harbour-project.org anon FTP
In-Reply-To: <ADD0D139-A78B-45E4-859D-97B1378AA765@syenar.hu>
References: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
	<200810060409.33362.philb@philb.us>
	<ADD0D139-A78B-45E4-859D-97B1378AA765@syenar.hu>
Message-ID: <200810061625.28615.philb@philb.us>

On Monday 06 October 2008 04:59:18 am Szak?ts Viktor wrote:
> You can create the most generic binary build by
> going into 'harbour' dir of the nightly source,
> and running './make_tgz.sh'. The result will be
> a .tgz file in that 'harbour' dir. The exact .tgz
> name depends on the system, but this will be
> the only .tgz file there, so it's easy to find.

harbour-1.1.0-dev-linux-nightly-build.tgz

will be created each night right after the evening checkout.

I'll have to update this when we change versions.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From harbour.01 at syenar.hu  Mon Oct  6 16:33:42 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  6 16:34:23 2008
Subject: [Harbour] 2008-10-06 22:33 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c927f2$Blat.v2.6.2$d2a1d08a$21044966486@127.0.0.1>

2008-10-06 22:33 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/tobject.prg
    ! Formatting to some old code.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Mon Oct  6 18:35:54 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  6 18:36:07 2008
Subject: [Harbour] Darwin: 64-bit problem
In-Reply-To: <1F025F83-45E1-4D84-AA29-7FD9E1BDF5EE@syenar.hu>
References: <EB785383-2590-4256-A214-64F95EFB04CA@syenar.hu>
	<20081006004605.GB21313@34-mo7-2.acn.waw.pl>
	<1F025F83-45E1-4D84-AA29-7FD9E1BDF5EE@syenar.hu>
Message-ID: <20081006223554.GA5095@34-mo7-2.acn.waw.pl>

On Mon, 06 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Did you see the Darwin results?

Yes, Thank you.
The most visible is the cost of mutexes in reference counters.
If there is no collision then all is executed quite fast:

ST mode (no mutexes at all):
[ T001: x := L_C ]..............................................0.07

MT mode and single thread:
[ T001: x := L_C ]..............................................0.13

Such cost is high though still accpetable but this:
[ T001: x := L_C ]____________________________________  0.67  18.20 ->  0.04

shows that concurrent access to the same complex item is too slow.
We will have to add atomic inc/dec assembler inline functions to PPC builds.
Anyhow in DARWIN you should have <libkern/OSAtomic.h> with set of functions
for atomic operations. Can you look for 32 and 64 bit atomic inc/dec?
They can be used by us directly.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Oct  6 18:46:32 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  6 18:46:45 2008
Subject: [Harbour] Darwin: 64-bit problem
In-Reply-To: <20081006223554.GA5095@34-mo7-2.acn.waw.pl>
References: <EB785383-2590-4256-A214-64F95EFB04CA@syenar.hu>
	<20081006004605.GB21313@34-mo7-2.acn.waw.pl>
	<1F025F83-45E1-4D84-AA29-7FD9E1BDF5EE@syenar.hu>
	<20081006223554.GA5095@34-mo7-2.acn.waw.pl>
Message-ID: <CD903FC1-8D1B-41DA-A46B-F2D27807887C@syenar.hu>

Hi Przemek,

> Yes, Thank you.
> The most visible is the cost of mutexes in reference counters.
> If there is no collision then all is executed quite fast:
>
> ST mode (no mutexes at all):
> [ T001: x := L_C ]..............................................0.07
>
> MT mode and single thread:
> [ T001: x := L_C ]..............................................0.13
>
> Such cost is high though still accpetable but this:
> [ T001: x := L_C ]____________________________________  0.67  18.20 - 
> >  0.04
>
> shows that concurrent access to the same complex item is too slow.
> We will have to add atomic inc/dec assembler inline functions to PPC  
> builds.

Also to Intel 64-bit builds I guess. (test above was x86/64-bit)

[ I've yet to create a PPC 32-bit speed/MT test. ]

> Anyhow in DARWIN you should have <libkern/OSAtomic.h> with set of  
> functions
> for atomic operations. Can you look for 32 and 64 bit atomic inc/dec?
> They can be used by us directly.

Please see the whole file attached, there are multiple
versions of these functions.

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: OSAtomic.h
Type: application/octet-stream
Size: 9401 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081007/6eb62861/OSAtomic-0001.obj
-------------- next part --------------

From bedipritpal at hotmail.com  Mon Oct  6 19:01:45 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Oct  6 19:01:52 2008
Subject: [Harbour] Speedtst.exe results for 2 computers
Message-ID: <19847957.post@talk.nabble.com>


Hello Przemek

Here are attached the results on 2 computers  with different
number of processors and operating systems.

What I did before compiling speedtst.exe.

1) Issued : make_b32 clean; make_b32; make_b32 install
2) Issued : make_b32_all clean; make_b32_all; make_b32_all install
3) Issued : bld_b32 speedtst
4) Renamed speedtst.exe => speed_st.exe
5) Issued : SET C_USR=-tWM
6) Issued : SET HB_MT=mt
7) Modified bld.bat as : hbvm.lib => hbvm%HB_MT%.lib
8) Issued : bld_b32 speedtst
9) Renamed speedtst.exe => speed_mt.exe
10) Executed speed_st.exe and speed_mt.exe on each computer with different
params.
11) Clubbed all .log files into one per computer.

And below are attached those log files.

Correct me if I am wrong somewhere.

http://www.nabble.com/file/p19847957/comp_2003_server.log
comp_2003_server.log 
http://www.nabble.com/file/p19847957/comp_xp.log comp_xp.log 

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Speedtst.exe-results-for-2-computers-tp19847957p19847957.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Mon Oct  6 20:57:55 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  6 20:58:04 2008
Subject: [Harbour] 2008-10-07 02:57 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081007005755.GA14825@34-mo7-2.acn.waw.pl>

2008-10-07 02:57 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/Makefile
  + harbour/include/hbatomic.h
  * harbour/include/hbthread.h
  * harbour/source/vm/garbage.c
  * harbour/source/vm/fm.c
    * moved atomic and spinlock functions into hbatomic.h

  * harbour/include/hbatomic.h
    + added atomic inc/dec for GCC and x86@64 and PPC@32
    + use OSAtomic*() and OSSpin*() functions for atomic inc/dec and
      spinlocks in Darwin builds 
    + added spinlocks to MS-Win builds

best regards
Przemek
From druzus at acn.waw.pl  Mon Oct  6 21:02:27 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  6 21:02:35 2008
Subject: [Harbour] Darwin: 64-bit problem
In-Reply-To: <CD903FC1-8D1B-41DA-A46B-F2D27807887C@syenar.hu>
References: <EB785383-2590-4256-A214-64F95EFB04CA@syenar.hu>
	<20081006004605.GB21313@34-mo7-2.acn.waw.pl>
	<1F025F83-45E1-4D84-AA29-7FD9E1BDF5EE@syenar.hu>
	<20081006223554.GA5095@34-mo7-2.acn.waw.pl>
	<CD903FC1-8D1B-41DA-A46B-F2D27807887C@syenar.hu>
Message-ID: <20081007010227.GB5095@34-mo7-2.acn.waw.pl>

On Tue, 07 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

>> We will have to add atomic inc/dec assembler inline functions to PPC 
>> builds.
> Also to Intel 64-bit builds I guess. (test above was x86/64-bit)

x86@64 is not IA-64 (Itanium)

>> Anyhow in DARWIN you should have <libkern/OSAtomic.h> with set of 
>> functions
>> for atomic operations. Can you look for 32 and 64 bit atomic inc/dec?
>> They can be used by us directly.
> Please see the whole file attached, there are multiple
> versions of these functions.

Please test after:
   2008-10-07 02:57 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
I added inc/dec atomic and spinlock inline assembler functions for x86@64
and PPC@32 and also redirection to OS*() functions in Darwin builds.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Oct  6 21:23:52 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  6 21:24:00 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <19847957.post@talk.nabble.com>
References: <19847957.post@talk.nabble.com>
Message-ID: <20081007012352.GC5095@34-mo7-2.acn.waw.pl>

On Mon, 06 Oct 2008, Pritpal Bedi wrote:

Hi Pritpal,


> Here are attached the results on 2 computers  with different
> number of processors and operating systems.
> And below are attached those log files.

Thank you very much.
As I can see only Enrico can reach good scalability on Intel and
Windows. Quite good results has also Maurilio with Intel and OS2.
But all of them are much worse then in my
AMD Phenom 8450 Triple-Core Processor.
Please note that most of the test loop does not have even single
internal lock and should be fully scalable to the number of CPUs.
I begin to think that this test quite well show hardware scalability.
The performance may strongly depend also on used mainboard.

Has anyone else AMD multiprocessor system?

Phil,
I know that you have one :-)
Can you build Harbour in this system and then compiler and run
harbour/tests/speetst.prg f.e.:

   hbmk -n -w -es2 -mt speetst
   ./speetst.prg --exclude=mem --scale --thread:2
   ./speetst.prg --exclude=mem --scale --thread:4
   ./speetst.prg --exclude=mem --scale --thread:6
   ./speetst.prg --exclude=mem --scale --thread:8

best regards,
Przemek
From toninhofwi at yahoo.com.br  Mon Oct  6 20:46:13 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Oct  6 22:26:13 2008
Subject: [Harbour] dlmAlloc and windows vista
Message-ID: <12cle4lpnsv07b6a292bt9airgu15ao906@4ax.com>

Hi friends,

Can anybody please confirm if tests/memtst.prg is very slow when use
dlmAlloc and windows vista ?

This is my second post about this. Memtst have some "waits" in each
pass of:

? "testing large memory block reallocation with intermediate
allocations..."
? "Warning!!! some compilers may badly fail here"

TIA and best regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From philb at philb.us  Tue Oct  7 00:43:55 2008
From: philb at philb.us (Phil Barnett)
Date: Tue Oct  7 00:44:05 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <20081007012352.GC5095@34-mo7-2.acn.waw.pl>
References: <19847957.post@talk.nabble.com>
	<20081007012352.GC5095@34-mo7-2.acn.waw.pl>
Message-ID: <200810070043.55608.philb@philb.us>

On Monday 06 October 2008 09:23:52 pm Przemyslaw Czerpak wrote:
> On Mon, 06 Oct 2008, Pritpal Bedi wrote:
>
> Hi Pritpal,
>
> > Here are attached the results on 2 computers  with different
> > number of processors and operating systems.
> > And below are attached those log files.
>
> Thank you very much.
> As I can see only Enrico can reach good scalability on Intel and
> Windows. Quite good results has also Maurilio with Intel and OS2.
> But all of them are much worse then in my
> AMD Phenom 8450 Triple-Core Processor.
> Please note that most of the test loop does not have even single
> internal lock and should be fully scalable to the number of CPUs.
> I begin to think that this test quite well show hardware scalability.
> The performance may strongly depend also on used mainboard.
>
> Has anyone else AMD multiprocessor system?
>
> Phil,
> I know that you have one :-)
> Can you build Harbour in this system and then compiler and run
> harbour/tests/speetst.prg f.e.:
>
>    hbmk -n -w -es2 -mt speedtst
>    ./speedtst --exclude=mem --scale --thread:2
>    ./speedtst --exclude=mem --scale --thread:4
>    ./speedtst --exclude=mem --scale --thread:6
>    ./speedtst --exclude=mem --scale --thread:8

Quad core Phenom 9600, 32 bit Fedora 9

[philb@SunSpot tests]$  ./speedtst --exclude=mem --scale 

10/07/08 00:26:04 Linux 2.6.26.3-29.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT) GNU C 4.3 (32 bit)
THREADS: 1                                          
N_LOOPS: 1000000                                    
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  1 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.14   0.14 ->  1.00
[ T002: x := L_N ]____________________________________  0.18   0.14 ->  1.27
[ T003: x := L_D ]____________________________________  0.14   0.14 ->  1.03
[ T004: x := S_C ]____________________________________  0.14   0.14 ->  1.01
[ T005: x := S_N ]____________________________________  0.14   0.18 ->  0.77
[ T006: x := S_D ]____________________________________  0.14   0.14 ->  1.00
[ T007: x := M_C ]____________________________________  0.16   0.15 ->  1.06
[ T008: x := M_N ]____________________________________  0.14   0.15 ->  0.92
[ T009: x := M_D ]____________________________________  0.14   0.14 ->  0.99
[ T010: x := P_C ]____________________________________  0.15   0.15 ->  0.98
[ T011: x := P_N ]____________________________________  0.14   0.14 ->  1.00
[ T012: x := P_D ]____________________________________  0.15   0.18 ->  0.85
[ T013: x := F_C ]____________________________________  0.28   0.27 ->  1.06
[ T014: x := F_N ]____________________________________  0.31   0.31 ->  1.01
[ T015: x := F_D ]____________________________________  0.18   0.18 ->  1.00
[ T016: x := o:GenCode ]______________________________  0.29   0.29 ->  1.01
[ T017: x := o[8] ]___________________________________  0.21   0.21 ->  1.00
[ T018: round( i / 1000, 2 ) ]________________________  0.44   0.43 ->  1.02
[ T020: val( s ) ]____________________________________  0.39   0.38 ->  1.00
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  0.64   0.65 ->  0.97
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.41   0.41 ->  0.99
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  0.41   0.42 ->  0.98
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  0.56   0.55 ->  1.02
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  0.50   0.50 ->  0.99
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  0.51   0.52 ->  0.97
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  0.49   0.50 ->  0.99
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  0.52   0.52 ->  0.99
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  0.50   0.53 ->  0.94
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  0.50   0.50 ->  1.00
[ T039: ascan( a, i % 16 ) ]__________________________  0.51   0.50 ->  1.01
[ T042: x := a ]______________________________________  0.15   0.15 ->  1.00
[ T044: f0() ]________________________________________  0.24   0.23 ->  1.04
[ T045: f1( i ) ]_____________________________________  0.31   0.30 ->  1.05
[ T046: f2( c[1...8] ) ]______________________________  0.30   0.29 ->  1.05
[ T047: f2( c[1...40000] ) ]__________________________  0.29   0.30 ->  0.97
[ T048: f2( @c[1...40000] ) ]_________________________  0.28   0.30 ->  0.94
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.36   0.37 ->  0.97
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  0.63   0.64 ->  0.99
[ T051: f2( a ) ]_____________________________________  0.29   0.31 ->  0.94
============================================================================
[   TOTAL   ]_________________________________________ 12.25  12.35 ->  0.99
============================================================================
[ total application time: ]....................................24.47        
[ total real time: ]...........................................24.61        

*************************************************************************************************************************

[philb@SunSpot tests]$  ./speedtst --exclude=mem --scale --thread=2          

10/07/08 00:27:00 Linux 2.6.26.3-29.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
THREADS: 2
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  2 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.29   0.47 ->  0.60
[ T002: x := L_N ]____________________________________  0.29   0.38 ->  0.76
[ T003: x := L_D ]____________________________________  0.30   0.39 ->  0.77
[ T004: x := S_C ]____________________________________  0.29   0.61 ->  0.47
[ T005: x := S_N ]____________________________________  0.27   0.38 ->  0.72
[ T006: x := S_D ]____________________________________  0.27   0.37 ->  0.73
[ T007: x := M_C ]____________________________________  0.30   0.48 ->  0.62
[ T008: x := M_N ]____________________________________  0.28   0.37 ->  0.76
[ T009: x := M_D ]____________________________________  0.28   0.38 ->  0.72
[ T010: x := P_C ]____________________________________  0.30   0.46 ->  0.65
[ T011: x := P_N ]____________________________________  0.27   0.41 ->  0.68
[ T012: x := P_D ]____________________________________  0.29   0.37 ->  0.79
[ T013: x := F_C ]____________________________________  0.54   0.62 ->  0.87
[ T014: x := F_N ]____________________________________  0.63   0.50 ->  1.26
[ T015: x := F_D ]____________________________________  0.38   0.40 ->  0.95
[ T016: x := o:GenCode ]______________________________  0.57   0.68 ->  0.84
[ T017: x := o[8] ]___________________________________  0.42   0.54 ->  0.77
[ T018: round( i / 1000, 2 ) ]________________________  0.85   0.82 ->  1.03
[ T020: val( s ) ]____________________________________  0.80   0.63 ->  1.26
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  1.33   1.31 ->  1.02
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.85   1.14 ->  0.74
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  0.83   1.01 ->  0.81
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  1.09   1.42 ->  0.77
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  0.99   1.28 ->  0.77
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  1.04   1.31 ->  0.80
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  1.04   1.30 ->  0.80
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  1.04   1.27 ->  0.82
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  1.06   1.29 ->  0.82
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  1.03   1.29 ->  0.79
[ T039: ascan( a, i % 16 ) ]__________________________  1.02   0.95 ->  1.07
[ T042: x := a ]______________________________________  0.32   0.53 ->  0.61
[ T044: f0() ]________________________________________  0.45   0.67 ->  0.68
[ T045: f1( i ) ]_____________________________________  0.65   0.79 ->  0.82
[ T046: f2( c[1...8] ) ]______________________________  0.58   0.88 ->  0.66
[ T047: f2( c[1...40000] ) ]__________________________  0.61   0.86 ->  0.71
[ T048: f2( @c[1...40000] ) ]_________________________  0.59   0.87 ->  0.68
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.72   1.05 ->  0.69
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  1.28   1.55 ->  0.82
[ T051: f2( a ) ]_____________________________________  0.60   0.88 ->  0.68
============================================================================
[   TOTAL   ]_________________________________________ 24.75  30.95 ->  0.80
============================================================================
[ total application time: ]....................................84.63
[ total real time: ]...........................................55.70

**************************************************************************************************************************

[philb@SunSpot tests]$  ./speedtst --exclude=mem --scale --thread=4

10/07/08 00:29:53 Linux 2.6.26.3-29.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
THREADS: 4
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  4 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.68   1.21 ->  0.56
[ T002: x := L_N ]____________________________________  0.69   1.00 ->  0.69
[ T003: x := L_D ]____________________________________  0.62   0.94 ->  0.66
[ T004: x := S_C ]____________________________________  0.58   1.53 ->  0.38
[ T005: x := S_N ]____________________________________  0.57   0.96 ->  0.60
[ T006: x := S_D ]____________________________________  0.57   0.97 ->  0.59
[ T007: x := M_C ]____________________________________  0.66   1.28 ->  0.51
[ T008: x := M_N ]____________________________________  0.61   1.07 ->  0.56
[ T009: x := M_D ]____________________________________  0.59   1.03 ->  0.57
[ T010: x := P_C ]____________________________________  0.61   1.08 ->  0.57
[ T011: x := P_N ]____________________________________  0.65   1.09 ->  0.60
[ T012: x := P_D ]____________________________________  0.67   1.01 ->  0.67
[ T013: x := F_C ]____________________________________  1.08   1.29 ->  0.84
[ T014: x := F_N ]____________________________________  1.26   0.95 ->  1.32
[ T015: x := F_D ]____________________________________  0.74   0.93 ->  0.80
[ T016: x := o:GenCode ]______________________________  1.19   1.55 ->  0.77
[ T017: x := o[8] ]___________________________________  0.86   1.34 ->  0.64
[ T018: round( i / 1000, 2 ) ]________________________  1.70   1.78 ->  0.95
[ T020: val( s ) ]____________________________________  1.63   1.45 ->  1.12
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  2.63   2.84 ->  0.93
[ T024: eval( bc := { || i % 16 } ) ]_________________  1.72   2.72 ->  0.63
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  1.73   2.37 ->  0.73
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  2.33   3.37 ->  0.69
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  2.06   3.10 ->  0.66
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  2.17   3.09 ->  0.70
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  2.18   3.14 ->  0.69
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  2.11   3.16 ->  0.67
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  2.10   3.25 ->  0.65
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  2.10   3.05 ->  0.69
[ T039: ascan( a, i % 16 ) ]__________________________  2.16   2.01 ->  1.07
[ T042: x := a ]______________________________________  0.67   1.38 ->  0.49
[ T044: f0() ]________________________________________  1.02   1.63 ->  0.63
[ T045: f1( i ) ]_____________________________________  1.31   2.07 ->  0.63
[ T046: f2( c[1...8] ) ]______________________________  1.20   2.13 ->  0.56
[ T047: f2( c[1...40000] ) ]__________________________  1.21   2.13 ->  0.57
[ T048: f2( @c[1...40000] ) ]_________________________  1.25   2.15 ->  0.58
[ T049: f2( @c[1...40000] ), c2 := c ]________________  1.42   2.51 ->  0.57
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  2.55   4.07 ->  0.63
[ T051: f2( a ) ]_____________________________________  1.27   2.16 ->  0.59
============================================================================
[   TOTAL   ]_________________________________________ 51.13  74.80 ->  0.68
============================================================================
[ total application time: ]...................................331.97
[ total real time: ]..........................................125.94

**************************************************************************************************************************

[philb@SunSpot tests]$  ./speedtst --exclude=mem --scale --thread=6

10/07/08 00:33:21 Linux 2.6.26.3-29.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
THREADS: 6
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  6 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.95   1.80 ->  0.53
[ T002: x := L_N ]____________________________________  0.97   1.43 ->  0.68
[ T003: x := L_D ]____________________________________  0.89   1.51 ->  0.59
[ T004: x := S_C ]____________________________________  0.91   2.77 ->  0.33
[ T005: x := S_N ]____________________________________  0.99   1.51 ->  0.65
[ T006: x := S_D ]____________________________________  1.04   1.51 ->  0.69
[ T007: x := M_C ]____________________________________  0.90   2.13 ->  0.42
[ T008: x := M_N ]____________________________________  0.95   1.56 ->  0.61
[ T009: x := M_D ]____________________________________  0.99   1.53 ->  0.65
[ T010: x := P_C ]____________________________________  0.99   1.60 ->  0.62
[ T011: x := P_N ]____________________________________  1.06   1.49 ->  0.71
[ T012: x := P_D ]____________________________________  0.92   1.61 ->  0.57
[ T013: x := F_C ]____________________________________  1.76   1.98 ->  0.89
[ T014: x := F_N ]____________________________________  1.98   1.36 ->  1.45
[ T015: x := F_D ]____________________________________  1.20   1.39 ->  0.86
[ T016: x := o:GenCode ]______________________________  1.84   2.32 ->  0.79
[ T017: x := o[8] ]___________________________________  1.30   1.97 ->  0.66
[ T018: round( i / 1000, 2 ) ]________________________  2.65   2.67 ->  0.99
[ T020: val( s ) ]____________________________________  2.47   2.22 ->  1.12
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  4.22   4.27 ->  0.99
[ T024: eval( bc := { || i % 16 } ) ]_________________  2.55   4.15 ->  0.61
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  2.72   3.55 ->  0.76
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  3.38   4.82 ->  0.70
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  3.01   4.67 ->  0.64
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  3.07   4.81 ->  0.64
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  3.11   4.77 ->  0.65
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  3.03   4.78 ->  0.63
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  3.18   4.90 ->  0.65
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  3.25   4.63 ->  0.70
[ T039: ascan( a, i % 16 ) ]__________________________  3.19   3.02 ->  1.05
[ T042: x := a ]______________________________________  0.95   2.00 ->  0.48
[ T044: f0() ]________________________________________  1.46   2.47 ->  0.59
[ T045: f1( i ) ]_____________________________________  1.99   3.02 ->  0.66
[ T046: f2( c[1...8] ) ]______________________________  1.82   3.15 ->  0.58
[ T047: f2( c[1...40000] ) ]__________________________  1.77   3.12 ->  0.57
[ T048: f2( @c[1...40000] ) ]_________________________  1.90   3.13 ->  0.61
[ T049: f2( @c[1...40000] ), c2 := c ]________________  2.29   3.76 ->  0.61
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  3.94   5.97 ->  0.66
[ T051: f2( a ) ]_____________________________________  1.93   3.20 ->  0.60
============================================================================
[   TOTAL   ]_________________________________________ 77.50 112.58 ->  0.69
============================================================================
[ total application time: ]...................................500.25
[ total real time: ]..........................................190.09

**************************************************************************************************************************

[philb@SunSpot tests]$  ./speedtst --exclude=mem --scale --thread=8

10/07/08 00:37:07 Linux 2.6.26.3-29.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
THREADS: 8
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  8 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  1.22   2.54 ->  0.48
[ T002: x := L_N ]____________________________________  1.27   1.97 ->  0.64
[ T003: x := L_D ]____________________________________  1.20   2.02 ->  0.59
[ T004: x := S_C ]____________________________________  1.12   3.07 ->  0.37
[ T005: x := S_N ]____________________________________  1.17   2.00 ->  0.58
[ T006: x := S_D ]____________________________________  1.22   1.96 ->  0.62
[ T007: x := M_C ]____________________________________  1.26   2.49 ->  0.51
[ T008: x := M_N ]____________________________________  1.32   2.17 ->  0.61
[ T009: x := M_D ]____________________________________  1.37   2.36 ->  0.58
[ T010: x := P_C ]____________________________________  1.23   2.15 ->  0.57
[ T011: x := P_N ]____________________________________  1.20   2.07 ->  0.58
[ T012: x := P_D ]____________________________________  1.27   2.04 ->  0.62
[ T013: x := F_C ]____________________________________  2.23   2.66 ->  0.84
[ T014: x := F_N ]____________________________________  2.63   2.05 ->  1.28
[ T015: x := F_D ]____________________________________  1.55   1.86 ->  0.84
[ T016: x := o:GenCode ]______________________________  2.38   3.14 ->  0.76
[ T017: x := o[8] ]___________________________________  1.71   2.78 ->  0.61
[ T018: round( i / 1000, 2 ) ]________________________  3.44   3.54 ->  0.97
[ T020: val( s ) ]____________________________________  3.15   3.02 ->  1.04
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  5.13   5.65 ->  0.91
[ T024: eval( bc := { || i % 16 } ) ]_________________  3.36   5.59 ->  0.60
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  3.40   4.81 ->  0.71
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  4.52   6.61 ->  0.68
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  3.87   6.31 ->  0.61
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  4.29   6.23 ->  0.69
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  4.35   6.28 ->  0.69
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  4.14   6.50 ->  0.64
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  4.11   6.24 ->  0.66
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  4.26   6.16 ->  0.69
[ T039: ascan( a, i % 16 ) ]__________________________  4.20   4.03 ->  1.04
[ T042: x := a ]______________________________________  1.29   2.79 ->  0.46
[ T044: f0() ]________________________________________  2.02   3.27 ->  0.62
[ T045: f1( i ) ]_____________________________________  2.63   4.09 ->  0.64
[ T046: f2( c[1...8] ) ]______________________________  2.54   4.24 ->  0.60
[ T047: f2( c[1...40000] ) ]__________________________  2.60   4.22 ->  0.62
[ T048: f2( @c[1...40000] ) ]_________________________  2.44   4.22 ->  0.58
[ T049: f2( @c[1...40000] ), c2 := c ]________________  3.09   5.09 ->  0.61
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  5.10   8.00 ->  0.64
[ T051: f2( a ) ]_____________________________________  2.54   4.41 ->  0.58
============================================================================
[   TOTAL   ]_________________________________________101.79 150.62 ->  0.68
============================================================================
[ total application time: ]...................................672.29
[ total real time: ]..........................................252.42

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From harbour.01 at syenar.hu  Tue Oct  7 02:44:08 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  7 02:44:17 2008
Subject: [Harbour] Darwin: 64-bit problem
In-Reply-To: <20081007010227.GB5095@34-mo7-2.acn.waw.pl>
References: <EB785383-2590-4256-A214-64F95EFB04CA@syenar.hu>
	<20081006004605.GB21313@34-mo7-2.acn.waw.pl>
	<1F025F83-45E1-4D84-AA29-7FD9E1BDF5EE@syenar.hu>
	<20081006223554.GA5095@34-mo7-2.acn.waw.pl>
	<CD903FC1-8D1B-41DA-A46B-F2D27807887C@syenar.hu>
	<20081007010227.GB5095@34-mo7-2.acn.waw.pl>
Message-ID: <57E806A2-C40F-437B-87A8-EB77FAD60CC4@syenar.hu>

Hi Przemek,

On 2008.10.07., at 3:02, Przemyslaw Czerpak wrote:

> On Tue, 07 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>>> We will have to add atomic inc/dec assembler inline functions to PPC
>>> builds.
>> Also to Intel 64-bit builds I guess. (test above was x86/64-bit)
>
> x86@64 is not IA-64 (Itanium)

I know.

>>> Anyhow in DARWIN you should have <libkern/OSAtomic.h> with set of
>>> functions
>>> for atomic operations. Can you look for 32 and 64 bit atomic inc/ 
>>> dec?
>>> They can be used by us directly.
>> Please see the whole file attached, there are multiple
>> versions of these functions.
>
> Please test after:
>   2008-10-07 02:57 UTC+0200 Przemyslaw Czerpak (druzus/at/ 
> priv.onet.pl)
> I added inc/dec atomic and spinlock inline assembler functions for  
> x86@64
> and PPC@32 and also redirection to OS*() functions in Darwin builds.

Thanks a lot, I'll redo them ASAP.

Brgds,
Viktor

From M.Horodyski at pzuzycie.com.pl  Tue Oct  7 02:46:41 2008
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Tue Oct  7 02:46:58 2008
Subject: [Harbour] RE: Harbour Digest, Vol 24, Issue 36
In-Reply-To: <NLB01FEoryKFRJrzdDW00001f81@gatein.pzuzycie.com.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950158371C@PINK.zycie.pzu>

[...]
>>in 15 second  from http://harbour-project.org/preview/
>
>Massimo,
>June < July < August :)
>
[ ... ]
>
>Sorry Marek
>I don't undestand
>
>Regard
>Massimo Belgrano

Who is autor of this saite ( http://harbour-project.org/preview/ )?

I see on this saite :

August 10, 2008 - Harbour v1.0.0 is released!
June   01, 2008 - Harbour Release of 1.0.0rc2
July   04, 2008 - Harbour Release of 1.0.0rc1

It is not chronologic.

Regards,
Marek Horodyski
From harbour.01 at syenar.hu  Tue Oct  7 03:35:42 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  7 03:35:50 2008
Subject: [Harbour] 2008-10-07 09:33 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9284f$Blat.v2.6.2$4d9d7c06$6547ae8bb50@127.0.0.1>

2008-10-07 09:33 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbextern.ch
  * source/rtl/inkey.c
    + Added HB_KEYCLEAR() a documented function equivalent 
      to "CLEAR TYPEAHEAD" command, or undocumented __KEYBOARD() function.

  * contrib/rddads/rddads.h
  * contrib/rddads/ads1.c
    + Added support for ADS_USE_OEM_TRANSLATION for old ads versions.
      Borrowed from xhb/Pavel Tsarenko.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Oct  7 03:37:37 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  7 03:37:48 2008
Subject: [Harbour] Darwin: 64-bit problem
In-Reply-To: <20081007010227.GB5095@34-mo7-2.acn.waw.pl>
References: <EB785383-2590-4256-A214-64F95EFB04CA@syenar.hu>
	<20081006004605.GB21313@34-mo7-2.acn.waw.pl>
	<1F025F83-45E1-4D84-AA29-7FD9E1BDF5EE@syenar.hu>
	<20081006223554.GA5095@34-mo7-2.acn.waw.pl>
	<CD903FC1-8D1B-41DA-A46B-F2D27807887C@syenar.hu>
	<20081007010227.GB5095@34-mo7-2.acn.waw.pl>
Message-ID: <02E947B5-4586-46B3-B809-4EB4604C8227@syenar.hu>

Attached new results.

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: darwin64_r9564.zip
Type: application/zip
Size: 7817 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081007/bd2fddf1/darwin64_r9564.zip
-------------- next part --------------


On 2008.10.07., at 3:02, Przemyslaw Czerpak wrote:

> On Tue, 07 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>>> We will have to add atomic inc/dec assembler inline functions to PPC
>>> builds.
>> Also to Intel 64-bit builds I guess. (test above was x86/64-bit)
>
> x86@64 is not IA-64 (Itanium)
>
>>> Anyhow in DARWIN you should have <libkern/OSAtomic.h> with set of
>>> functions
>>> for atomic operations. Can you look for 32 and 64 bit atomic inc/ 
>>> dec?
>>> They can be used by us directly.
>> Please see the whole file attached, there are multiple
>> versions of these functions.
>
> Please test after:
>   2008-10-07 02:57 UTC+0200 Przemyslaw Czerpak (druzus/at/ 
> priv.onet.pl)
> I added inc/dec atomic and spinlock inline assembler functions for  
> x86@64
> and PPC@32 and also redirection to OS*() functions in Darwin builds.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From dbtopas at dbtopas.lt  Tue Oct  7 06:03:10 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Oct  7 06:01:04 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <20081006143838.GA13763@34-mo7-2.acn.waw.pl>
References: <20081003113240.GA12991@34-mo7-2.acn.waw.pl>	<48E6311D.9010102@libero.it>
	<48E63559.8020704@libero.it>	<48E6388A.8020202@libero.it>	<20081003162348.GA15016@34-mo7-2.acn.waw.pl>	<48E68C3C.60901@fsgiudice.com>	<20081003231342.GA23387@34-mo7-2.acn.waw.pl>	<48E73E0D.9030109@fsgiudice.com>	<20081004194142.GA6761@34-mo7-2.acn.waw.pl>	<48EA1A45.5020006@dbtopas.lt>
	<20081006143838.GA13763@34-mo7-2.acn.waw.pl>
Message-ID: <48EB33DE.20802@dbtopas.lt>

Przemyslaw Czerpak wrote:
>> here are some words about dlmalloc and multi-thread:
>>   Thread-safety: NOT thread-safe unless USE_LOCKS defined
>>        When USE_LOCKS is defined, each public call to malloc, free,
>>        etc is surrounded with either a pthread mutex or a win32
>>        spinlock (depending on WIN32). This is not especially fast, and
>>        can be a major bottleneck.  It is designed only to provide
>>        minimal protection in concurrent environments, and to provide a
>>        basis for extensions.  If you are using malloc in a concurrent
>>        program, consider instead using nedmalloc
>>        (http://www.nedprod.com/programs/portable/nedmalloc/) or
>>        ptmalloc (See http://www.malloc.de), which are derived
>>        from versions of this malloc.
> 
> I know about it but it does not mean that default C compilers MM mangers
> are better. In all tests done so far it looks that they didn't. So far only
> the MM in SuseLinux seems to be well scalable. I haven't tested other
> Linux distros with multi CPU machine yet.

Hi,


I didn't mean C compilers MM are better. I just proposed to try for 
example nedmalloc in MT. Somewhere I've found that libc's malloc is 
based on ptmalloc, and nedmalloc claims to be faster than ptmalloc. So, 
we can try nedmalloc for tests that gives bad results for dlmalloc.


Best regards,
Mindaugas
From dmacias at mail.udg.mx  Tue Oct  7 06:07:41 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Oct  7 06:07:40 2008
Subject: [Harbour] Re: 2008-10-05 17:53 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48EB34ED.40906@mail.udg.mx>

>>Strange results, or I am confused ?
>>factor are around 2 (total 1.90) but computer is SINGLE CPU

>The real factor is 1.00. See the total real time values:
>260.81 - 130.34 = 130.47
>130.34 / 130.47 = 99.9
>but in 130.47 we have also cost of test envelop so it's in practice >1.00.
>Such effect can be caused by irregular internal real time clock counter
>updating. Such things happens in Win9x. Probably OS2 does not update
>real time clock counter when more then one thread is executed
>simultaneously.
>F.e. it can retrieve clock value from cache when other threads are still
>active waiting for CPU and refresh it only when current thread is the
>one working. In such case in the second column you will have only the
>time of the second thread because when 1-st one finished the clock
>counter is not updated and returns starting value. Above results suggest
> that exactly sth like that happened in your case.
>It's yet another bad side effect of using real time clock. Fortunatelly
>here real results can be recalculated from total real time.
>It will be interesting to see how the same test will look in OS2 on
>multi CPU machine.

For my comment about factor I was based in your message:
"I've just run this test on single CPU machine with Linux and SUSE 10.3
and all factors are equal to 1.0 or at least very close to this value
and differences are on the time precision level (we are using real time
not process time). "

But as you say, may be some "irregular internal real time clock counter
updating" in OS/2, and approach to 1 with single CPU are valid only in
your environment.
So an adjustment to the "measurement tool" is required  :-)

What I am sure is that these kind of tests are highly dependent of
hardware/OS/software, or even a single motherboard

Years ago I tested same CPU in two motherboards and performance
difference was as much as 30 %

Below are results for 4 and 8 threads in OS/2, single CPU
AMD Athlon 2200+ 2.0 Ghz, 1 Gb RAM

For comparison here are some results:

4 threads
--thread=4 --scale --exclude=mem
=========

Pritpal Bedi, Win2003, 4 logical CPU 3.6 Ghz
[   TOTAL   ]____________________________________ 81.87  81.06 ->  1.01
============================================================================
[ total application time: ]...................................382.58
[ total real time: ]..........................................162.98

Pritpal Bedi, WinXP SP2, 2 logical CPU 3 Ghz
[   TOTAL   ]____________________________________ 96.06  96.13 ->  1.00
============================================================================
[ total application time: ]...................................285.17
[ total real time: ]..........................................192.22

Phil Barnett, 4 logical CPU, Quad core Phenom 9600, 32 bit Fedora 9
[   TOTAL   ]____________________________________ 51.13  74.80 ->  0.68
============================================================================
[ total application time: ]...................................331.97
[ total real time: ]..........................................125.94

David Macias, OS/2, 1 logical CPU 2.0 Ghz, AMD 2200+
[   TOTAL   ]____________________________________159.59  98.94 ->  1.61
============================================================================
[ total application time: ]...................................258.61
[ total real time: ]..........................................258.61

About real time, considering that 4CPU clock speed is higher, there are
not much difference between Windows 4CPU and 2CPU, and both are not much
ahead of AMD 1CPU
Phenom 4CPU make in near half of real time the same work made by AMD 1CPU

8 threads
--thread=8 --scale --exclude=mem
=========

Phil Barnett, 4 logical CPU, Quad core Phenom 9600, 32 bit Fedora 9
[   TOTAL   ]____________________________________101.79 150.62 ->  0.68
============================================================================
[ total application time: ]...................................672.29
[ total real time: ]..........................................252.42

David Macias, OS/2, 1 logical CPU 2.0 Ghz, AMD 2200+
[   TOTAL   ]____________________________________308.70 173.32 ->  1.78
============================================================================
[ total application time: ]...................................482.10
[ total real time: ]..........................................482.10

Again, Phenom 4CPU make in near half of real time the same work made by
AMD 1CPU

David Macias


10/07/08 03:52:06 OS/2 4.50
Harbour 1.1.0dev (Rev. 9557) (MT)+ EMX GNU C 3.3.5 (32 bit)
THREADS: 4
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                    1 th.  4 th.  factor
============================================================================
[ T001: x := L_C ]_______________________________  3.50   1.19 ->  2.94
[ T002: x := L_N ]_______________________________  1.86   0.91 ->  2.04
[ T003: x := L_D ]_______________________________  1.78   1.06 ->  1.67
[ T004: x := S_C ]_______________________________  2.07   1.15 ->  1.81
[ T005: x := S_N ]_______________________________  1.84   1.13 ->  1.63
[ T006: x := S_D ]_______________________________  1.90   1.15 ->  1.65
[ T007: x := M_C ]_______________________________  2.11   1.34 ->  1.57
[ T008: x := M_N ]_______________________________  1.86   1.25 ->  1.49
[ T009: x := M_D ]_______________________________  1.84   1.28 ->  1.43
[ T010: x := P_C ]_______________________________  1.76   1.31 ->  1.35
[ T011: x := P_N ]_______________________________  1.78   1.25 ->  1.43
[ T012: x := P_D ]_______________________________  1.91   1.25 ->  1.53
[ T013: x := F_C ]_______________________________  4.30   2.72 ->  1.58
[ T014: x := F_N ]_______________________________  4.25   2.21 ->  1.92
[ T015: x := F_D ]_______________________________  2.10   1.54 ->  1.36
[ T016: x := o:GenCode___________________________  4.02   2.57 ->  1.56
[ T017: x := o[8] ]______________________________  3.07   1.69 ->  1.82
[ T018: round( i / 1000, 2 ) ]___________________  5.07   3.15 ->  1.61
[ T020: val( s ) ]_______________________________  4.31   3.05 ->  1.41
[ T021: val( a [ i % 16 + 1 ] ) ]________________  8.43   5.12 ->  1.65
[ T024: eval( bc := { || i % 16 } ) ]____________  5.12   3.27 ->  1.57
[ T026: eval( bc := { |x| x % 16 }, i ) ]________  4.55   3.20 ->  1.42
[ T028: eval( bc := { |x| f1( x ) }, i ) ]_______  7.16   4.26 ->  1.68
[ T033: x := a[ i % 16 + 1 ] == s ]______________  5.61   3.66 ->  1.53
[ T034: x := a[ i % 16 + 1 ] = s ]_______________  6.84   4.28 ->  1.60
[ T035: x := a[ i % 16 + 1 ] >= s ]______________  6.68   4.15 ->  1.61
[ T036: x := a[ i % 16 + 1 ] <= s ]______________  7.03   4.29 ->  1.64
[ T037: x := a[ i % 16 + 1 ] < s ]_______________  6.89   4.43 ->  1.56
[ T038: x := a[ i % 16 + 1 ] > s ]_______________  6.67   4.12 ->  1.62
[ T039: ascan( a, i % 16 ) ]_____________________  6.74   4.58 ->  1.47
[ T042: x := a ]_________________________________  1.88   1.16 ->  1.62
[ T044: f0() ]___________________________________  2.81   1.88 ->  1.49
[ T045: f1( i ) ]________________________________  3.24   2.61 ->  1.24
[ T046: f2( c[1...8] ) ]_________________________  4.16   2.33 ->  1.78
[ T047: f2( c[1...40000] ) ]_____________________  3.86   1.98 ->  1.95
[ T048: f2( @c[1...40000] ) ]____________________  3.95   2.31 ->  1.71
[ T049: f2( @c[1...40000] ), c2 := c ]___________  4.81   2.65 ->  1.82
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]_____  7.60   4.91 ->  1.55
[ T051: f2( a ) ]________________________________  4.21   2.55 ->  1.65
=======================================================================
[   TOTAL   ]____________________________________159.59  98.94 ->  1.61
============================================================================
[ total application time: ]...................................258.61
[ total real time: ]..........................................258.61




10/07/08 01:26:01 OS/2 4.50
Harbour 1.1.0dev (Rev. 9557) (MT)+ EMX GNU C 3.3.5 (32 bit)
THREADS: 8
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                         1 th.  8 th.
factor
============================================================================
[ T001: x := L_C ]_______________________________  6.18   2.19 ->  2.82
[ T002: x := L_N ]_______________________________  3.40   2.09 ->  1.62
[ T003: x := L_D ]_______________________________  3.35   2.01 ->  1.67
[ T004: x := S_C ]_______________________________  3.77   2.27 ->  1.66
[ T005: x := S_N ]_______________________________  3.17   2.05 ->  1.55
[ T006: x := S_D ]_______________________________  3.10   2.05 ->  1.51
[ T007: x := M_C ]_______________________________  3.88   2.32 ->  1.68
[ T008: x := M_N ]_______________________________  3.68   2.05 ->  1.79
[ T009: x := M_D ]_______________________________  3.49   2.11 ->  1.66
[ T010: x := P_C ]_______________________________  3.73   2.14 ->  1.75
[ T011: x := P_N ]_______________________________  3.76   1.92 ->  1.96
[ T012: x := P_D ]_______________________________  3.64   2.13 ->  1.71
[ T013: x := F_C ]_______________________________  7.93   4.69 ->  1.69
[ T014: x := F_N ]_______________________________  8.18   4.30 ->  1.90
[ T015: x := F_D ]_______________________________  4.06   2.73 ->  1.49
[ T016: x := o:GenCode ]_________________________  8.03   4.11 ->  1.95
[ T017: x := o[8] ]______________________________  5.63   3.10 ->  1.81
[ T018: round( i / 1000, 2 ) ]___________________  8.63   5.42 ->  1.59
[ T020: val( s ) ]_______________________________  8.86   4.95 ->  1.79
[ T021: val( a [ i % 16 + 1 ] ) ]________________ 15.77   8.94 ->  1.76
[ T024: eval( bc := { || i % 16 } ) ]____________  9.36   5.43 ->  1.73
[ T026: eval( bc := { |x| x % 16 }, i ) ]________  9.90   5.64 ->  1.76
[ T028: eval( bc := { |x| f1( x ) }, i ) ]_______ 13.00   7.06 ->  1.84
[ T033: x := a[ i % 16 + 1 ] == s ]______________ 11.47   7.01 ->  1.64
[ T034: x := a[ i % 16 + 1 ] = s ]_______________ 14.24   7.52 ->  1.89
[ T035: x := a[ i % 16 + 1 ] >= s ]______________ 13.04   7.28 ->  1.79
[ T036: x := a[ i % 16 + 1 ] <= s ]______________ 13.13   7.77 ->  1.69
[ T037: x := a[ i % 16 + 1 ] < s ]_______________ 13.07   7.61 ->  1.72
[ T038: x := a[ i % 16 + 1 ] > s ]_______________ 13.37   7.25 ->  1.84
[ T039: ascan( a, i % 16 ) ]_____________________ 14.69   7.69 ->  1.91
[ T042: x := a ]_________________________________  3.76   2.42 ->  1.55
[ T044: f0() ]___________________________________  5.26   3.18 ->  1.66
[ T045: f1( i ) ]________________________________  8.35   4.21 ->  1.98
[ T046: f2( c[1...8] ) ]_________________________  7.86   4.16 ->  1.89
[ T047: f2( c[1...40000] ) ]_____________________  6.65   4.20 ->  1.58
[ T048: f2( @c[1...40000] ) ]____________________  8.02   4.10 ->  1.96
[ T049: f2( @c[1...40000] ), c2 := c ]___________  8.34   4.99 ->  1.67
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]_____ 14.88   8.10 ->  1.84
[ T051: f2( a ) ]________________________________  8.09   4.15 ->  1.95
========================================================================
[   TOTAL   ]____________________________________308.70 173.32 ->  1.78
============================================================================
[ total application time: ]...................................482.10
[ total real time: ]..........................................482.10


From dmacias at mail.udg.mx  Tue Oct  7 06:13:41 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Oct  7 06:13:41 2008
Subject: [Harbour] Re: 2008-10-05 17:53 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48EB3655.9000109@mail.udg.mx>

 >ps. There is sth wrong with you mail program. All messages you sent are
 >    attached to very old threads from 2005. If mail/news reader can
 >    follow threads not only subject then it's hard to locate them.

I am using Mail&Newsgroups module of Mozilla/SeaMonkey
"Mozilla/5.0 (OS/2; U; Warp 4.5; en-US; rv:1.8.1.17) Gecko/20080925 
SeaMonkey/1.1.12"

which is as the standalone Thunderbird

I do not know what can be the reason of "attached to very old threads 
from 2005"

Anybody have any suggestion

David Macias


From sscc at mweb.co.za  Tue Oct  7 06:21:42 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Oct  7 06:22:10 2008
Subject: [Harbour] Re: 2008-10-05 17:53 UTC+0200
	Przemyslaw	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <48EB3655.9000109@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48EB3655.9000109@mail.udg.mx>
Message-ID: <48EB3836.30002@mweb.co.za>

David Arturo Macias Corona wrote:

> I do not know what can be the reason of "attached to very old threads 
> from 2005"
> 
> Anybody have any suggestion

I have posts back to 2004 and your posts look fine to me (correctly 
threaded).

Regards
Alex
From harbour.01 at syenar.hu  Tue Oct  7 06:25:57 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  7 06:26:06 2008
Subject: [Harbour] hb_threadID()
In-Reply-To: <48EB33DE.20802@dbtopas.lt>
References: <20081003113240.GA12991@34-mo7-2.acn.waw.pl>	<48E6311D.9010102@libero.it>
	<48E63559.8020704@libero.it>	<48E6388A.8020202@libero.it>	<20081003162348.GA15016@34-mo7-2.acn.waw.pl>	<48E68C3C.60901@fsgiudice.com>	<20081003231342.GA23387@34-mo7-2.acn.waw.pl>	<48E73E0D.9030109@fsgiudice.com>	<20081004194142.GA6761@34-mo7-2.acn.waw.pl>	<48EA1A45.5020006@dbtopas.lt>
	<20081006143838.GA13763@34-mo7-2.acn.waw.pl>
	<48EB33DE.20802@dbtopas.lt>
Message-ID: <71436516-C01B-495C-B477-9DF0252545CB@syenar.hu>

> Hi,
>
>
> I didn't mean C compilers MM are better. I just proposed to try for  
> example nedmalloc in MT. Somewhere I've found that libc's malloc is  
> based on ptmalloc, and nedmalloc claims to be faster than ptmalloc.  
> So, we can try nedmalloc for tests that gives bad results for  
> dlmalloc.

I've posted some nedmalloc (== dlmalloc 2.8.4) tests
last week.

They were the best for MT, and a bit (but measurably)
worse than plain dlmalloc for ST.

Brgds,
Viktor

From druzus at acn.waw.pl  Tue Oct  7 06:28:18 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  7 06:28:27 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <200810070043.55608.philb@philb.us>
References: <19847957.post@talk.nabble.com>
	<20081007012352.GC5095@34-mo7-2.acn.waw.pl>
	<200810070043.55608.philb@philb.us>
Message-ID: <20081007102818.GA29702@34-mo7-2.acn.waw.pl>

On Tue, 07 Oct 2008, Phil Barnett wrote:

Hi Phil,

> > Can you build Harbour in this system and then compiler and run
> > harbour/tests/speetst.prg f.e.:
> >    hbmk -n -w -es2 -mt speedtst
> >    ./speedtst --exclude=mem --scale --thread:2
> >    ./speedtst --exclude=mem --scale --thread:4
> >    ./speedtst --exclude=mem --scale --thread:6
> >    ./speedtst --exclude=mem --scale --thread:8
> Quad core Phenom 9600, 32 bit Fedora 9
> [philb@SunSpot tests]$  ./speedtst --exclude=mem --scale 
> *************************************************************************************************************************
[...]
> excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
>                                                         1 th.  2 th.  factor
> ============================================================================
> [   TOTAL   ]_________________________________________ 24.75  30.95 ->  0.80
> ============================================================================
> [ total application time: ]....................................84.63
> [ total real time: ]...........................................55.70

Many thanks for your tests.
The results are as wrong as in other tests but I forgot about one thing.
Your CPU just like mine strongly interacts with simultaneous assign the
same memory cell and the code which makes it in main HVM loop is covered
by #ifndef HB_GUI ... #endif.
To disable it you will have to rebuild Harbour with C_USR=-DHB_GUI
or at least compile this tests with -gc3 - it causes that except codeblocks
for the rest of code C code is generated not PCODE evaluated by main HVM
loop. I would like to ask you about yet another test. The same but using
Harbour recompiled with export C_USR=-DHB_GUI or with speedtst.prg compiled
with -gc3 switch, f.e.:
   hbmk -n -w -es2 -gc3 -mt speedtst
   for i in 1 2 4 6 8; do ./speedtst --exclude=mem --scale --thread:$i; done

AFAIR Enrico used to compile Harbour with -DHB_GUI so maybe also Intel
CPUs does not like it though Maurilio tests doesn't suggested it.
Before I'll remove this code from main HVM loop I would like to know
the overhead it causes also for Intel.

Viktor,
I've seen your Darwin 64-bit results - thank you. Much better.
If you have multi CPU machine then please compare the results of:
   ./speedtst --exclude=mem --scale --thread:2
when it's compiled with -gc3 and when whole Harbour is compiled with
-DHB_GUI
I would like to see results of 4 tests:
   ./speedtst --exclude=mem --scale --thread:2
done on the same multi Intel-CPU machine for:
   1. standard Harbour build and speedtst compiled with -gc0
   2. standard Harbour build and speedtst compiled with -gc3
   3. Harbour compiled with C_USR=-DHB_GUI and speedtst compiled with -gc0
   4. Harbour compiled with C_USR=-DHB_GUI and speedtst compiled with -gc3

It should give the answer what is the cost simultaneous memory assign by
more then one threads. I know that is very high in my CPU. Maurilio said
that there is small difference in his Intel machine on OS2 but I'm not
sure if it was not local to his tests. I can see in Enrico results that
it behaves better then my Phenom for [ T004: x := S_C ] where such
situation is intentional but in this case the operation is covered by
LOCK x86 machine instruction so the cost can be different then unprotected
memory write.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Tue Oct  7 06:40:52 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Oct  7 06:41:01 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
References: <19847957.post@talk.nabble.com><20081007012352.GC5095@34-mo7-2.acn.waw.pl><200810070043.55608.philb@philb.us>
	<20081007102818.GA29702@34-mo7-2.acn.waw.pl>
Message-ID: <87BA0A31018B4361933A79D7D42ADC80@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 7 ottobre 2008 12.28
Oggetto: Re: [SPAM] [Harbour] Speedtst.exe results for 2 computers


> AFAIR Enrico used to compile Harbour with -DHB_GUI

Yes.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lorenzo.fiorini at gmail.com  Tue Oct  7 06:45:44 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Oct  7 06:45:53 2008
Subject: [SPAM] [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <20081007102818.GA29702@34-mo7-2.acn.waw.pl>
References: <19847957.post@talk.nabble.com>
	<20081007012352.GC5095@34-mo7-2.acn.waw.pl>
	<200810070043.55608.philb@philb.us>
	<20081007102818.GA29702@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0810070345i42e1140ald99929b017fada30@mail.gmail.com>

On Tue, Oct 7, 2008 at 12:28 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> The results are as wrong as in other tests but I forgot about one thing.
> Your CPU just like mine strongly interacts with simultaneous assign the
> same memory cell and the code which makes it in main HVM loop is covered
> by #ifndef HB_GUI ... #endif.
> To disable it you will have to rebuild Harbour with C_USR=-DHB_GUI
> or at least compile this tests with -gc3 - it causes that except codeblocks
> for the rest of code C code is generated not PCODE evaluated by main HVM
> loop. I would like to ask you about yet another test. The same but using
> Harbour recompiled with export C_USR=-DHB_GUI or with speedtst.prg compiled
> with -gc3 switch, f.e.:
>   hbmk -n -w -es2 -gc3 -mt speedtst

That's it!! :)

Using -gc3 I have the results below.

best regards,
Lorenzo

10/07/08 12:42:43 Linux 2.6.26.5-45.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
THREADS: 2
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  2 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.16   0.09 ->  1.88
[ T002: x := L_N ]____________________________________  0.10   0.05 ->  1.96
[ T003: x := L_D ]____________________________________  0.09   0.05 ->  1.74
[ T004: x := S_C ]____________________________________  0.18   0.15 ->  1.18
[ T005: x := S_N ]____________________________________  0.13   0.07 ->  2.02
[ T006: x := S_D ]____________________________________  0.12   0.07 ->  1.80
[ T007: x := M_C ]____________________________________  0.20   0.12 ->  1.60
[ T008: x := M_N ]____________________________________  0.14   0.12 ->  1.15
[ T009: x := M_D ]____________________________________  0.14   0.08 ->  1.75
[ T010: x := P_C ]____________________________________  0.18   0.13 ->  1.46
[ T011: x := P_N ]____________________________________  0.13   0.07 ->  1.93
[ T012: x := P_D ]____________________________________  0.14   0.07 ->  1.94
[ T013: x := F_C ]____________________________________  0.42   0.25 ->  1.73
[ T014: x := F_N ]____________________________________  0.41   0.25 ->  1.60
[ T015: x := F_D ]____________________________________  0.24   0.18 ->  1.36
[ T016: x := o:GenCode ]______________________________  0.39   0.29 ->  1.32
[ T017: x := o[8] ]___________________________________  0.28   0.19 ->  1.45
[ T018: round( i / 1000, 2 ) ]________________________  0.49   0.31 ->  1.56
[ T020: val( s ) ]____________________________________  0.59   0.43 ->  1.37
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  0.96   0.57 ->  1.68
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.59   0.42 ->  1.41
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  0.56   0.31 ->  1.81
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  0.66   0.48 ->  1.39
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  0.79   0.40 ->  1.98
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  0.70   0.51 ->  1.36
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  0.68   0.52 ->  1.31
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  0.68   0.41 ->  1.68
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  0.75   0.44 ->  1.70
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  0.68   0.44 ->  1.55
[ T039: ascan( a, i % 16 ) ]__________________________  0.66   0.44 ->  1.50
[ T042: x := a ]______________________________________  0.20   0.12 ->  1.67
[ T044: f0() ]________________________________________  0.25   0.12 ->  2.02
[ T045: f1( i ) ]_____________________________________  0.33   0.23 ->  1.42
[ T046: f2( c[1...8] ) ]______________________________  0.33   0.22 ->  1.53
[ T047: f2( c[1...40000] ) ]__________________________  0.33   0.23 ->  1.43
[ T048: f2( @c[1...40000] ) ]_________________________  0.34   0.20 ->  1.71
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.35   0.20 ->  1.78
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  0.88   0.56 ->  1.56
[ T051: f2( a ) ]_____________________________________  0.34   0.20 ->  1.67
============================================================================
[   TOTAL   ]_________________________________________ 15.57   9.97 ->  1.56
============================================================================
[ total application time: ]....................................30.19
[ total real time: ]...........................................25.54
From harbour.01 at syenar.hu  Tue Oct  7 06:51:32 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  7 06:51:44 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <20081007102818.GA29702@34-mo7-2.acn.waw.pl>
References: <19847957.post@talk.nabble.com>
	<20081007012352.GC5095@34-mo7-2.acn.waw.pl>
	<200810070043.55608.philb@philb.us>
	<20081007102818.GA29702@34-mo7-2.acn.waw.pl>
Message-ID: <3C537C6D-6B01-4D4E-A459-7DCB69BD6ED6@syenar.hu>

Hi Przemek,

>   ./speedtst --exclude=mem --scale --thread:2
> done on the same multi Intel-CPU machine for:
>   1. standard Harbour build and speedtst compiled with -gc0
>   2. standard Harbour build and speedtst compiled with -gc3
>   3. Harbour compiled with C_USR=-DHB_GUI and speedtst compiled with  
> -gc0
>   4. Harbour compiled with C_USR=-DHB_GUI and speedtst compiled with  
> -gc3

Pls find them attached.

Results are dramatically better for gc0 when using -DHB_GUI.
For gc3, it's also better, but just slightly.

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: drw64_hb_gui.zip
Type: application/zip
Size: 4101 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081007/28173c41/drw64_hb_gui-0001.zip
-------------- next part --------------



From druzus at acn.waw.pl  Tue Oct  7 06:45:46 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  7 07:22:35 2008
Subject: [Harbour] Re: 2008-10-05 17:53 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <48EB3655.9000109@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<48EB3655.9000109@mail.udg.mx>
Message-ID: <20081007104546.GB29702@34-mo7-2.acn.waw.pl>

On Tue, 07 Oct 2008, David Arturo Macias Corona wrote:

Hi David,

> >ps. There is sth wrong with you mail program. All messages you sent are
> >    attached to very old threads from 2005. If mail/news reader can
> >    follow threads not only subject then it's hard to locate them.
> I am using Mail&Newsgroups module of Mozilla/SeaMonkey
> "Mozilla/5.0 (OS/2; U; Warp 4.5; en-US; rv:1.8.1.17) Gecko/20080925 
> SeaMonkey/1.1.12"
> which is as the standalone Thunderbird
> I do not know what can be the reason of "attached to very old threads from 
> 2005"
> Anybody have any suggestion

Don't you used to chose some existing message (f.e. for replay) then you
only change subject and start new thread?
If yes then it's the reason. In the message header are references to
old posts and your new message is attached to the thread of the original
message instead of creating new one.

best regards,
Przemek
From philb at philb.us  Tue Oct  7 08:09:37 2008
From: philb at philb.us (Phil Barnett)
Date: Tue Oct  7 08:09:47 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <20081007102818.GA29702@34-mo7-2.acn.waw.pl>
References: <19847957.post@talk.nabble.com> <200810070043.55608.philb@philb.us>
	<20081007102818.GA29702@34-mo7-2.acn.waw.pl>
Message-ID: <200810070809.37655.philb@philb.us>

On Tuesday 07 October 2008 06:28:18 am Przemyslaw Czerpak wrote:

> with -gc3 switch, f.e.:
> ? ?hbmk -n -w -es2 -gc3 -mt speedtst
> ? ?for i in 1 2 4 6 8; do ./speedtst --exclude=mem --scale --thread:$i;
> done

Here it is with -gc3. The recompile will have to wait until after I get home 
from work.

with -gc3 switch, f.e.:
   hbmk -n -w -es2 -gc3 -mt speedtst
   for i in 1 2 4 6 8; do ./speedtst --exclude=mem --scale --thread:$i; done

[philb@SunSpot tests]$  ./speedtst --exclude=mem --scale --thread=1

10/07/08 08:03:51 Linux 2.6.26.3-29.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
THREADS: 1                                           
N_LOOPS: 1000000                                     
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  1 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.11   0.08 ->  1.30
[ T002: x := L_N ]____________________________________  0.08   0.07 ->  1.22
[ T003: x := L_D ]____________________________________  0.07   0.07 ->  1.00
[ T004: x := S_C ]____________________________________  0.10   0.10 ->  0.99
[ T005: x := S_N ]____________________________________  0.10   0.10 ->  1.00
[ T006: x := S_D ]____________________________________  0.10   0.10 ->  1.00
[ T007: x := M_C ]____________________________________  0.11   0.13 ->  0.88
[ T008: x := M_N ]____________________________________  0.11   0.11 ->  0.99
[ T009: x := M_D ]____________________________________  0.11   0.12 ->  0.93
[ T010: x := P_C ]____________________________________  0.13   0.13 ->  0.99
[ T011: x := P_N ]____________________________________  0.11   0.10 ->  1.08
[ T012: x := P_D ]____________________________________  0.13   0.10 ->  1.30
[ T013: x := F_C ]____________________________________  0.27   0.21 ->  1.29
[ T014: x := F_N ]____________________________________  0.27   0.27 ->  1.00
[ T015: x := F_D ]____________________________________  0.14   0.14 ->  1.00
[ T016: x := o:GenCode ]______________________________  0.24   0.24 ->  0.99
[ T017: x := o[8] ]___________________________________  0.16   0.16 ->  0.99
[ T018: round( i / 1000, 2 ) ]________________________  0.33   0.33 ->  1.00
[ T020: val( s ) ]____________________________________  0.33   0.33 ->  1.00
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  0.51   0.51 ->  1.00
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.39   0.39 ->  0.98
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  0.43   0.38 ->  1.12
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  0.53   0.48 ->  1.10
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  0.37   0.36 ->  1.04
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  0.40   0.38 ->  1.04
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  0.40   0.40 ->  1.00
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  0.38   0.38 ->  1.00
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  0.38   0.38 ->  1.00
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  0.39   0.38 ->  1.01
[ T039: ascan( a, i % 16 ) ]__________________________  0.43   0.47 ->  0.91
[ T042: x := a ]______________________________________  0.09   0.09 ->  1.00
[ T044: f0() ]________________________________________  0.15   0.15 ->  1.00
[ T045: f1( i ) ]_____________________________________  0.21   0.20 ->  1.08
[ T046: f2( c[1...8] ) ]______________________________  0.20   0.20 ->  1.00
[ T047: f2( c[1...40000] ) ]__________________________  0.20   0.20 ->  1.00
[ T048: f2( @c[1...40000] ) ]_________________________  0.20   0.20 ->  1.00
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.25   0.24 ->  1.06
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  0.45   0.45 ->  1.00
[ T051: f2( a ) ]_____________________________________  0.22   0.20 ->  1.07
============================================================================
[   TOTAL   ]_________________________________________  9.54   9.32 ->  1.02
============================================================================
[ total application time: ]....................................18.86        
[ total real time: ]...........................................18.87        
[philb@SunSpot tests]$  ./speedtst --exclude=mem --scale --thread=2

10/07/08 08:04:14 Linux 2.6.26.3-29.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
THREADS: 2                                           
N_LOOPS: 1000000                                     
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  2 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.20   0.09 ->  2.14
[ T002: x := L_N ]____________________________________  0.14   0.08 ->  1.76
[ T003: x := L_D ]____________________________________  0.14   0.09 ->  1.43
[ T004: x := S_C ]____________________________________  0.20   0.26 ->  0.77
[ T005: x := S_N ]____________________________________  0.18   0.10 ->  1.79
[ T006: x := S_D ]____________________________________  0.18   0.10 ->  1.75
[ T007: x := M_C ]____________________________________  0.23   0.12 ->  1.82
[ T008: x := M_N ]____________________________________  0.20   0.10 ->  1.97
[ T009: x := M_D ]____________________________________  0.20   0.12 ->  1.73
[ T010: x := P_C ]____________________________________  0.23   0.11 ->  2.00
[ T011: x := P_N ]____________________________________  0.20   0.12 ->  1.72
[ T012: x := P_D ]____________________________________  0.20   0.13 ->  1.59
[ T013: x := F_C ]____________________________________  0.49   0.27 ->  1.84
[ T014: x := F_N ]____________________________________  0.54   0.29 ->  1.88
[ T015: x := F_D ]____________________________________  0.29   0.17 ->  1.68
[ T016: x := o:GenCode ]______________________________  0.49   0.25 ->  1.96
[ T017: x := o[8] ]___________________________________  0.32   0.19 ->  1.74
[ T018: round( i / 1000, 2 ) ]________________________  0.63   0.33 ->  1.88
[ T020: val( s ) ]____________________________________  0.65   0.35 ->  1.87
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  1.04   0.55 ->  1.89
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.82   0.66 ->  1.25
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  0.75   0.55 ->  1.37
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  0.90   0.64 ->  1.41
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  0.74   0.53 ->  1.39
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  0.80   0.44 ->  1.85
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  0.80   0.44 ->  1.81
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  0.81   0.43 ->  1.87
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  0.78   0.40 ->  1.95
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  0.79   0.47 ->  1.68
[ T039: ascan( a, i % 16 ) ]__________________________  0.88   0.50 ->  1.76
[ T042: x := a ]______________________________________  0.18   0.10 ->  1.83
[ T044: f0() ]________________________________________  0.31   0.17 ->  1.83
[ T045: f1( i ) ]_____________________________________  0.39   0.21 ->  1.86
[ T046: f2( c[1...8] ) ]______________________________  0.39   0.21 ->  1.89
[ T047: f2( c[1...40000] ) ]__________________________  0.39   0.21 ->  1.90
[ T048: f2( @c[1...40000] ) ]_________________________  0.39   0.21 ->  1.89
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.48   0.25 ->  1.91
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  0.92   0.48 ->  1.91
[ T051: f2( a ) ]_____________________________________  0.41   0.22 ->  1.86
============================================================================
[   TOTAL   ]_________________________________________ 18.70  10.95 ->  1.71
============================================================================
[ total application time: ]....................................39.75        
[ total real time: ]...........................................29.66        
[philb@SunSpot tests]$  ./speedtst --exclude=mem --scale --thread=4

10/07/08 08:04:48 Linux 2.6.26.3-29.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
THREADS: 4                                           
N_LOOPS: 1000000                                     
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  4 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.40   0.10 ->  4.03
[ T002: x := L_N ]____________________________________  0.28   0.09 ->  3.05
[ T003: x := L_D ]____________________________________  0.27   0.09 ->  3.04
[ T004: x := S_C ]____________________________________  0.39   0.50 ->  0.79
[ T005: x := S_N ]____________________________________  0.35   0.11 ->  3.33
[ T006: x := S_D ]____________________________________  0.35   0.10 ->  3.40
[ T007: x := M_C ]____________________________________  0.49   0.18 ->  2.77
[ T008: x := M_N ]____________________________________  0.47   0.12 ->  3.98
[ T009: x := M_D ]____________________________________  0.42   0.12 ->  3.47
[ T010: x := P_C ]____________________________________  0.46   0.12 ->  3.89
[ T011: x := P_N ]____________________________________  0.40   0.12 ->  3.41
[ T012: x := P_D ]____________________________________  0.40   0.16 ->  2.47
[ T013: x := F_C ]____________________________________  0.90   0.31 ->  2.88
[ T014: x := F_N ]____________________________________  1.09   0.28 ->  3.87
[ T015: x := F_D ]____________________________________  0.58   0.16 ->  3.60
[ T016: x := o:GenCode ]______________________________  0.94   0.26 ->  3.60
[ T017: x := o[8] ]___________________________________  0.65   0.18 ->  3.65
[ T018: round( i / 1000, 2 ) ]________________________  1.38   0.34 ->  4.02
[ T020: val( s ) ]____________________________________  1.44   0.36 ->  3.98
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  2.16   0.70 ->  3.06
[ T024: eval( bc := { || i % 16 } ) ]_________________  1.59   1.23 ->  1.29
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  1.57   0.97 ->  1.61
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  1.83   1.10 ->  1.66
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  1.46   0.40 ->  3.61
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  1.55   0.41 ->  3.77
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  1.60   0.52 ->  3.10
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  1.61   0.46 ->  3.53
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  1.64   0.46 ->  3.58
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  1.60   0.56 ->  2.85
[ T039: ascan( a, i % 16 ) ]__________________________  1.88   0.46 ->  4.08
[ T042: x := a ]______________________________________  0.36   0.17 ->  2.14
[ T044: f0() ]________________________________________  0.75   0.18 ->  4.16
[ T045: f1( i ) ]_____________________________________  0.90   0.23 ->  3.99
[ T046: f2( c[1...8] ) ]______________________________  0.89   0.22 ->  4.02
[ T047: f2( c[1...40000] ) ]__________________________  0.91   0.22 ->  4.10
[ T048: f2( @c[1...40000] ) ]_________________________  0.89   0.22 ->  4.03
[ T049: f2( @c[1...40000] ), c2 := c ]________________  1.08   0.27 ->  4.02
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  1.87   0.48 ->  3.87
[ T051: f2( a ) ]_____________________________________  0.89   0.23 ->  3.91
============================================================================
[   TOTAL   ]_________________________________________ 38.69  13.19 ->  2.93
============================================================================
[ total application time: ]....................................88.62        
[ total real time: ]...........................................51.88        
[philb@SunSpot tests]$  ./speedtst --exclude=mem --scale --thread=6

10/07/08 08:05:44 Linux 2.6.26.3-29.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
THREADS: 6
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  6 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.57   0.16 ->  3.45
[ T002: x := L_N ]____________________________________  0.44   0.14 ->  3.27
[ T003: x := L_D ]____________________________________  0.43   0.16 ->  2.70
[ T004: x := S_C ]____________________________________  0.62   0.74 ->  0.84
[ T005: x := S_N ]____________________________________  0.58   0.18 ->  3.32
[ T006: x := S_D ]____________________________________  0.55   0.17 ->  3.22
[ T007: x := M_C ]____________________________________  0.74   0.26 ->  2.83
[ T008: x := M_N ]____________________________________  0.67   0.19 ->  3.57
[ T009: x := M_D ]____________________________________  0.65   0.20 ->  3.22
[ T010: x := P_C ]____________________________________  0.69   0.22 ->  3.17
[ T011: x := P_N ]____________________________________  0.65   0.19 ->  3.40
[ T012: x := P_D ]____________________________________  0.65   0.20 ->  3.30
[ T013: x := F_C ]____________________________________  1.58   0.45 ->  3.53
[ T014: x := F_N ]____________________________________  1.61   0.45 ->  3.61
[ T015: x := F_D ]____________________________________  0.92   0.29 ->  3.18
[ T016: x := o:GenCode ]______________________________  1.42   0.49 ->  2.89
[ T017: x := o[8] ]___________________________________  1.01   0.30 ->  3.31
[ T018: round( i / 1000, 2 ) ]________________________  1.95   0.51 ->  3.80
[ T020: val( s ) ]____________________________________  2.27   0.58 ->  3.95
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  3.24   0.87 ->  3.71
[ T024: eval( bc := { || i % 16 } ) ]_________________  2.38   1.84 ->  1.29
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  2.40   1.53 ->  1.56
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  2.71   1.69 ->  1.60
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  2.40   0.72 ->  3.34
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  2.49   0.74 ->  3.35
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  2.54   0.80 ->  3.16
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  2.60   0.76 ->  3.42
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  2.42   0.71 ->  3.43
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  2.55   0.78 ->  3.25
[ T039: ascan( a, i % 16 ) ]__________________________  2.66   0.77 ->  3.46
[ T042: x := a ]______________________________________  0.60   0.28 ->  2.17
[ T044: f0() ]________________________________________  0.98   0.29 ->  3.37
[ T045: f1( i ) ]_____________________________________  1.17   0.33 ->  3.53
[ T046: f2( c[1...8] ) ]______________________________  1.22   0.38 ->  3.17
[ T047: f2( c[1...40000] ) ]__________________________  1.22   0.33 ->  3.70
[ T048: f2( @c[1...40000] ) ]_________________________  1.22   0.34 ->  3.57
[ T049: f2( @c[1...40000] ), c2 := c ]________________  1.52   0.39 ->  3.86
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  2.77   0.81 ->  3.42
[ T051: f2( a ) ]_____________________________________  1.31   0.41 ->  3.22
============================================================================
[   TOTAL   ]_________________________________________ 58.40  20.65 ->  2.83
============================================================================
[ total application time: ]...................................132.68
[ total real time: ]...........................................79.06
[philb@SunSpot tests]$  ./speedtst --exclude=mem --scale --thread=8

10/07/08 08:00:52 Linux 2.6.26.3-29.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
THREADS: 8
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  8 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.83   0.18 ->  4.65
[ T002: x := L_N ]____________________________________  0.65   0.15 ->  4.24
[ T003: x := L_D ]____________________________________  0.61   0.17 ->  3.72
[ T004: x := S_C ]____________________________________  0.84   0.99 ->  0.85
[ T005: x := S_N ]____________________________________  0.76   0.21 ->  3.58
[ T006: x := S_D ]____________________________________  0.77   0.22 ->  3.44
[ T007: x := M_C ]____________________________________  1.04   0.29 ->  3.61
[ T008: x := M_N ]____________________________________  0.80   0.24 ->  3.34
[ T009: x := M_D ]____________________________________  0.90   0.26 ->  3.45
[ T010: x := P_C ]____________________________________  0.98   0.24 ->  4.10
[ T011: x := P_N ]____________________________________  0.91   0.23 ->  4.00
[ T012: x := P_D ]____________________________________  0.90   0.25 ->  3.64
[ T013: x := F_C ]____________________________________  2.11   0.52 ->  4.05
[ T014: x := F_N ]____________________________________  2.17   0.60 ->  3.63
[ T015: x := F_D ]____________________________________  1.23   0.33 ->  3.76
[ T016: x := o:GenCode ]______________________________  2.01   0.54 ->  3.72
[ T017: x := o[8] ]___________________________________  1.33   0.39 ->  3.42
[ T018: round( i / 1000, 2 ) ]________________________  2.59   0.66 ->  3.95
[ T020: val( s ) ]____________________________________  2.65   0.73 ->  3.61
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  4.15   1.16 ->  3.58
[ T024: eval( bc := { || i % 16 } ) ]_________________  3.21   2.46 ->  1.31
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  3.14   1.95 ->  1.61
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  3.69   2.20 ->  1.68
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  3.03   0.86 ->  3.54
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  3.25   0.85 ->  3.84
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  3.46   0.87 ->  3.99
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  3.18   0.98 ->  3.23
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  3.26   0.89 ->  3.65
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  3.18   0.99 ->  3.20
[ T039: ascan( a, i % 16 ) ]__________________________  3.63   1.00 ->  3.63
[ T042: x := a ]______________________________________  0.80   0.25 ->  3.22
[ T044: f0() ]________________________________________  1.30   0.37 ->  3.51
[ T045: f1( i ) ]_____________________________________  1.74   0.42 ->  4.12
[ T046: f2( c[1...8] ) ]______________________________  1.57   0.43 ->  3.63
[ T047: f2( c[1...40000] ) ]__________________________  1.65   0.44 ->  3.79
[ T048: f2( @c[1...40000] ) ]_________________________  1.61   0.41 ->  3.95
[ T049: f2( @c[1...40000] ), c2 := c ]________________  1.99   0.56 ->  3.59
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  3.71   1.13 ->  3.28
[ T051: f2( a ) ]_____________________________________  1.74   0.45 ->  3.86
============================================================================
[   TOTAL   ]_________________________________________ 77.36  25.85 ->  2.99
============================================================================
[ total application time: ]...................................175.42
[ total real time: ]..........................................103.23


-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From philb at philb.us  Tue Oct  7 08:25:15 2008
From: philb at philb.us (Phil Barnett)
Date: Tue Oct  7 08:25:24 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <20081007102818.GA29702@34-mo7-2.acn.waw.pl>
References: <19847957.post@talk.nabble.com> <200810070043.55608.philb@philb.us>
	<20081007102818.GA29702@34-mo7-2.acn.waw.pl>
Message-ID: <200810070825.16216.philb@philb.us>

On Tuesday 07 October 2008 06:28:18 am Przemyslaw Czerpak wrote:
> rebuild Harbour with C_USR=-DHB_GUI

Didn't think it would get done, but here is the same test after the recompile. 
I'll do it once more without the -gc3 in a minute. Don't know if it will get 
done before I leave for work.

[philb@SunSpot tests]$    for i in 1 2 4 6 8; 
do ./speedtst --exclude=mem --scale --thread=$i; done

10/07/08 08:16:56 Linux 2.6.26.3-29.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
THREADS: 1                                           
N_LOOPS: 1000000                                     
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  1 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.10   0.08 ->  1.27
[ T002: x := L_N ]____________________________________  0.07   0.07 ->  1.00
[ T003: x := L_D ]____________________________________  0.07   0.07 ->  1.00
[ T004: x := S_C ]____________________________________  0.10   0.10 ->  1.00
[ T005: x := S_N ]____________________________________  0.09   0.09 ->  1.00
[ T006: x := S_D ]____________________________________  0.09   0.09 ->  1.00
[ T007: x := M_C ]____________________________________  0.11   0.11 ->  1.00
[ T008: x := M_N ]____________________________________  0.10   0.10 ->  1.00
[ T009: x := M_D ]____________________________________  0.10   0.10 ->  1.00
[ T010: x := P_C ]____________________________________  0.11   0.11 ->  1.00
[ T011: x := P_N ]____________________________________  0.10   0.10 ->  0.99
[ T012: x := P_D ]____________________________________  0.10   0.10 ->  1.00
[ T013: x := F_C ]____________________________________  0.26   0.22 ->  1.20
[ T014: x := F_N ]____________________________________  0.27   0.27 ->  1.00
[ T015: x := F_D ]____________________________________  0.14   0.14 ->  1.00
[ T016: x := o:GenCode ]______________________________  0.24   0.24 ->  0.99
[ T017: x := o[8] ]___________________________________  0.16   0.16 ->  1.00
[ T018: round( i / 1000, 2 ) ]________________________  0.32   0.32 ->  1.00
[ T020: val( s ) ]____________________________________  0.33   0.33 ->  1.00
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  0.51   0.51 ->  1.00
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.39   0.40 ->  0.98
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  0.39   0.39 ->  1.00
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  0.45   0.45 ->  1.00
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  0.36   0.36 ->  1.00
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  0.42   0.39 ->  1.08
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  0.40   0.40 ->  1.00
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  0.42   0.39 ->  1.07
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  0.39   0.39 ->  1.00
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  0.39   0.39 ->  1.00
[ T039: ascan( a, i % 16 ) ]__________________________  0.47   0.44 ->  1.08
[ T042: x := a ]______________________________________  0.09   0.09 ->  1.00
[ T044: f0() ]________________________________________  0.15   0.15 ->  1.00
[ T045: f1( i ) ]_____________________________________  0.20   0.20 ->  1.00
[ T046: f2( c[1...8] ) ]______________________________  0.20   0.20 ->  1.00
[ T047: f2( c[1...40000] ) ]__________________________  0.20   0.20 ->  1.00
[ T048: f2( @c[1...40000] ) ]_________________________  0.21   0.20 ->  1.07
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.24   0.24 ->  1.00
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  0.45   0.51 ->  0.88
[ T051: f2( a ) ]_____________________________________  0.21   0.20 ->  1.01
============================================================================
[   TOTAL   ]_________________________________________  9.40   9.29 ->  1.01
============================================================================
[ total application time: ]....................................18.58        
[ total real time: ]...........................................18.69        

10/07/08 08:17:15 Linux 2.6.26.3-29.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
THREADS: 2                                           
N_LOOPS: 1000000                                     
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  2 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.19   0.09 ->  2.05
[ T002: x := L_N ]____________________________________  0.15   0.08 ->  1.89
[ T003: x := L_D ]____________________________________  0.16   0.07 ->  2.14
[ T004: x := S_C ]____________________________________  0.21   0.26 ->  0.78
[ T005: x := S_N ]____________________________________  0.19   0.10 ->  1.99
[ T006: x := S_D ]____________________________________  0.20   0.10 ->  1.94
[ T007: x := M_C ]____________________________________  0.24   0.12 ->  1.94
[ T008: x := M_N ]____________________________________  0.22   0.10 ->  2.09
[ T009: x := M_D ]____________________________________  0.23   0.12 ->  1.86
[ T010: x := P_C ]____________________________________  0.22   0.11 ->  1.95
[ T011: x := P_N ]____________________________________  0.21   0.10 ->  2.14
[ T012: x := P_D ]____________________________________  0.21   0.12 ->  1.80
[ T013: x := F_C ]____________________________________  0.46   0.27 ->  1.69
[ T014: x := F_N ]____________________________________  0.56   0.28 ->  2.01
[ T015: x := F_D ]____________________________________  0.32   0.16 ->  2.04
[ T016: x := o:GenCode ]______________________________  0.48   0.24 ->  1.99
[ T017: x := o[8] ]___________________________________  0.34   0.16 ->  2.06
[ T018: round( i / 1000, 2 ) ]________________________  0.63   0.34 ->  1.88
[ T020: val( s ) ]____________________________________  0.66   0.33 ->  2.01
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  1.04   0.52 ->  1.99
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.80   0.56 ->  1.43
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  0.77   0.55 ->  1.40
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  0.92   0.64 ->  1.43
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  0.73   0.36 ->  2.01
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  0.79   0.40 ->  1.98
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  0.82   0.42 ->  1.97
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  0.79   0.40 ->  2.00
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  0.78   0.39 ->  2.01
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  0.80   0.40 ->  2.00
[ T039: ascan( a, i % 16 ) ]__________________________  0.88   0.47 ->  1.85
[ T042: x := a ]______________________________________  0.18   0.09 ->  2.03
[ T044: f0() ]________________________________________  0.33   0.16 ->  2.03
[ T045: f1( i ) ]_____________________________________  0.42   0.20 ->  2.10
[ T046: f2( c[1...8] ) ]______________________________  0.40   0.21 ->  1.94
[ T047: f2( c[1...40000] ) ]__________________________  0.40   0.22 ->  1.79
[ T048: f2( @c[1...40000] ) ]_________________________  0.40   0.21 ->  1.95
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.49   0.25 ->  1.99
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  0.93   0.46 ->  2.03
[ T051: f2( a ) ]_____________________________________  0.42   0.23 ->  1.81
============================================================================
[   TOTAL   ]_________________________________________ 18.97  10.30 ->  1.84
============================================================================
[ total application time: ]....................................39.00        
[ total real time: ]...........................................29.28        

10/07/08 08:17:44 Linux 2.6.26.3-29.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
THREADS: 4                                           
N_LOOPS: 1000000                                     
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  4 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.38   0.11 ->  3.53
[ T002: x := L_N ]____________________________________  0.27   0.09 ->  2.88
[ T003: x := L_D ]____________________________________  0.28   0.09 ->  3.09
[ T004: x := S_C ]____________________________________  0.40   0.49 ->  0.81
[ T005: x := S_N ]____________________________________  0.36   0.11 ->  3.20
[ T006: x := S_D ]____________________________________  0.36   0.10 ->  3.54
[ T007: x := M_C ]____________________________________  0.47   0.22 ->  2.12
[ T008: x := M_N ]____________________________________  0.39   0.12 ->  3.19
[ T009: x := M_D ]____________________________________  0.40   0.11 ->  3.53
[ T010: x := P_C ]____________________________________  0.45   0.12 ->  3.85
[ T011: x := P_N ]____________________________________  0.41   0.12 ->  3.42
[ T012: x := P_D ]____________________________________  0.40   0.12 ->  3.35
[ T013: x := F_C ]____________________________________  0.97   0.32 ->  3.06
[ T014: x := F_N ]____________________________________  1.12   0.29 ->  3.91
[ T015: x := F_D ]____________________________________  0.59   0.16 ->  3.60
[ T016: x := o:GenCode ]______________________________  0.94   0.25 ->  3.75
[ T017: x := o[8] ]___________________________________  0.64   0.18 ->  3.55
[ T018: round( i / 1000, 2 ) ]________________________  1.28   0.33 ->  3.85
[ T020: val( s ) ]____________________________________  1.42   0.34 ->  4.13
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  2.07   0.54 ->  3.85
[ T024: eval( bc := { || i % 16 } ) ]_________________  1.58   1.22 ->  1.29
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  1.50   0.99 ->  1.51
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  1.83   1.11 ->  1.65
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  1.53   0.42 ->  3.64
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  1.58   0.50 ->  3.18
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  1.66   0.42 ->  3.91
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  1.58   0.48 ->  3.32
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  1.61   0.49 ->  3.30
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  1.60   0.48 ->  3.31
[ T039: ascan( a, i % 16 ) ]__________________________  1.86   0.45 ->  4.09
[ T042: x := a ]______________________________________  0.37   0.11 ->  3.27
[ T044: f0() ]________________________________________  0.62   0.17 ->  3.59
[ T045: f1( i ) ]_____________________________________  0.78   0.22 ->  3.55
[ T046: f2( c[1...8] ) ]______________________________  0.79   0.22 ->  3.52
[ T047: f2( c[1...40000] ) ]__________________________  0.79   0.21 ->  3.74
[ T048: f2( @c[1...40000] ) ]_________________________  0.78   0.21 ->  3.67
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.95   0.26 ->  3.67
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  1.80   0.61 ->  2.96
[ T051: f2( a ) ]_____________________________________  0.83   0.23 ->  3.60
============================================================================
[   TOTAL   ]_________________________________________ 37.65  13.05 ->  2.88
============================================================================
[ total application time: ]....................................86.95        
[ total real time: ]...........................................50.71        

10/07/08 08:18:35 Linux 2.6.26.3-29.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
THREADS: 6                                           
N_LOOPS: 1000000                                     
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  6 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.59   0.24 ->  2.52
[ T002: x := L_N ]____________________________________  0.49   0.14 ->  3.62
[ T003: x := L_D ]____________________________________  0.53   0.16 ->  3.29
[ T004: x := S_C ]____________________________________  0.65   0.74 ->  0.88
[ T005: x := S_N ]____________________________________  0.55   0.19 ->  2.87
[ T006: x := S_D ]____________________________________  0.54   0.18 ->  3.03
[ T007: x := M_C ]____________________________________  0.70   0.22 ->  3.19
[ T008: x := M_N ]____________________________________  0.68   0.21 ->  3.29
[ T009: x := M_D ]____________________________________  0.67   0.19 ->  3.61
[ T010: x := P_C ]____________________________________  0.64   0.22 ->  2.91
[ T011: x := P_N ]____________________________________  0.63   0.19 ->  3.34
[ T012: x := P_D ]____________________________________  0.62   0.21 ->  2.91
[ T013: x := F_C ]____________________________________  1.48   0.48 ->  3.05
[ T014: x := F_N ]____________________________________  1.72   0.48 ->  3.61
[ T015: x := F_D ]____________________________________  0.90   0.25 ->  3.67
[ T016: x := o:GenCode ]______________________________  1.58   0.46 ->  3.42
[ T017: x := o[8] ]___________________________________  1.05   0.29 ->  3.67
[ T018: round( i / 1000, 2 ) ]________________________  1.99   0.52 ->  3.81
[ T020: val( s ) ]____________________________________  2.05   0.62 ->  3.32
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  3.21   0.82 ->  3.90
[ T024: eval( bc := { || i % 16 } ) ]_________________  2.38   1.85 ->  1.28
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  2.35   1.55 ->  1.52
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  2.75   1.66 ->  1.66
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  2.29   0.64 ->  3.58
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  2.42   0.80 ->  3.04
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  2.55   0.80 ->  3.17
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  2.40   0.83 ->  2.89
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  2.37   0.72 ->  3.29
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  2.37   0.76 ->  3.10
[ T039: ascan( a, i % 16 ) ]__________________________  2.69   0.79 ->  3.42
[ T042: x := a ]______________________________________  0.56   0.18 ->  3.04
[ T044: f0() ]________________________________________  1.05   0.31 ->  3.36
[ T045: f1( i ) ]_____________________________________  1.23   0.38 ->  3.23
[ T046: f2( c[1...8] ) ]______________________________  1.25   0.34 ->  3.70
[ T047: f2( c[1...40000] ) ]__________________________  1.28   0.37 ->  3.45
[ T048: f2( @c[1...40000] ) ]_________________________  1.33   0.39 ->  3.40
[ T049: f2( @c[1...40000] ), c2 := c ]________________  1.45   0.41 ->  3.54
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  2.78   0.91 ->  3.05
[ T051: f2( a ) ]_____________________________________  1.33   0.37 ->  3.57
============================================================================
[   TOTAL   ]_________________________________________ 58.10  20.87 ->  2.78
============================================================================
[ total application time: ]...................................132.26        
[ total real time: ]...........................................78.97        

10/07/08 08:19:54 Linux 2.6.26.3-29.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
THREADS: 8
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  8 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.80   0.35 ->  2.30
[ T002: x := L_N ]____________________________________  0.55   0.20 ->  2.71
[ T003: x := L_D ]____________________________________  0.58   0.16 ->  3.60
[ T004: x := S_C ]____________________________________  0.92   0.99 ->  0.93
[ T005: x := S_N ]____________________________________  0.75   0.20 ->  3.78
[ T006: x := S_D ]____________________________________  0.78   0.23 ->  3.39
[ T007: x := M_C ]____________________________________  1.04   0.37 ->  2.81
[ T008: x := M_N ]____________________________________  0.84   0.28 ->  2.98
[ T009: x := M_D ]____________________________________  0.90   0.24 ->  3.75
[ T010: x := P_C ]____________________________________  0.88   0.25 ->  3.46
[ T011: x := P_N ]____________________________________  0.91   0.23 ->  3.92
[ T012: x := P_D ]____________________________________  0.84   0.24 ->  3.54
[ T013: x := F_C ]____________________________________  2.11   0.54 ->  3.94
[ T014: x := F_N ]____________________________________  2.30   0.60 ->  3.83
[ T015: x := F_D ]____________________________________  1.29   0.33 ->  3.88
[ T016: x := o:GenCode ]______________________________  2.01   0.62 ->  3.26
[ T017: x := o[8] ]___________________________________  1.50   0.39 ->  3.83
[ T018: round( i / 1000, 2 ) ]________________________  2.48   0.73 ->  3.42
[ T020: val( s ) ]____________________________________  2.73   0.73 ->  3.73
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  4.16   1.13 ->  3.69
[ T024: eval( bc := { || i % 16 } ) ]_________________  3.35   2.49 ->  1.35
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  3.06   1.96 ->  1.56
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  3.64   2.20 ->  1.65
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  3.16   0.89 ->  3.54
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  3.20   0.94 ->  3.42
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  3.48   0.97 ->  3.61
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  3.27   0.91 ->  3.61
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  3.21   0.91 ->  3.51
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  3.22   0.99 ->  3.24
[ T039: ascan( a, i % 16 ) ]__________________________  3.54   0.94 ->  3.76
[ T042: x := a ]______________________________________  0.78   0.20 ->  3.87
[ T044: f0() ]________________________________________  1.34   0.37 ->  3.63
[ T045: f1( i ) ]_____________________________________  1.74   0.43 ->  4.02
[ T046: f2( c[1...8] ) ]______________________________  1.68   0.46 ->  3.67
[ T047: f2( c[1...40000] ) ]__________________________  1.77   0.47 ->  3.73
[ T048: f2( @c[1...40000] ) ]_________________________  1.74   0.48 ->  3.59
[ T049: f2( @c[1...40000] ), c2 := c ]________________  1.98   0.61 ->  3.26
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  3.73   1.14 ->  3.28
[ T051: f2( a ) ]_____________________________________  1.69   0.48 ->  3.51
============================================================================
[   TOTAL   ]_________________________________________ 77.95  26.65 ->  2.92
============================================================================
[ total application time: ]...................................176.80
[ total real time: ]..........................................104.62


-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From harbour.01 at syenar.hu  Tue Oct  7 08:25:26 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  7 08:25:37 2008
Subject: [Harbour] 2008-10-07 14:24 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92877$Blat.v2.6.2$c7233a66$19c0e7b80750@127.0.0.1>

2008-10-07 14:24 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * include/hbapierr.h
   * source/vm/extrap.c
   * source/rtl/errorint.c
     ! Fixed recent modification on Windows platform, where 
       GPF would generate an internal error.
       It didn't launch the OS error handler.
     ! Fixed hb_errInternal() being marked as HB_EXPORT 
       in the headers only.
--
Brgds,
Viktor

From philb at philb.us  Tue Oct  7 08:31:55 2008
From: philb at philb.us (Phil Barnett)
Date: Tue Oct  7 08:32:04 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <20081007102818.GA29702@34-mo7-2.acn.waw.pl>
References: <19847957.post@talk.nabble.com> <200810070043.55608.philb@philb.us>
	<20081007102818.GA29702@34-mo7-2.acn.waw.pl>
Message-ID: <200810070831.56098.philb@philb.us>

On Tuesday 07 October 2008 06:28:18 am Przemyslaw Czerpak wrote:
> To disable it you will have to rebuild Harbour with C_USR=-DHB_GUI
> or at least compile this tests with -gc3 - it causes that except codeblocks
> for the rest of code C code is generated not PCODE evaluated by main HVM
> loop. I would like to ask you about yet another test. The same but using
> Harbour recompiled with export C_USR=-DHB_GUI or with speedtst.prg compiled
> with -gc3 switch, f.e.:
> ? ?hbmk -n -w -es2 -gc3 -mt speedtst
> ? ?for i in 1 2 4 6 8; do ./speedtst --exclude=mem --scale --thread:$i;
> done

Ok, the test with the compiler recompiled with export C_USR=-DHB_GUI and 
without the -gc3 test is running very slowly, so I'll assume you don't need 
the output. Anyway, I have to leave for work before it's getting finished.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From sscc at mweb.co.za  Tue Oct  7 10:23:32 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Oct  7 10:23:54 2008
Subject: [Harbour] nmake optimization for .prg
In-Reply-To: <6547DD43-38A4-43BB-8C9E-C1FA2B2EACA6@syenar.hu>
References: <6547DD43-38A4-43BB-8C9E-C1FA2B2EACA6@syenar.hu>
Message-ID: <48EB70E4.1040300@mweb.co.za>

Szak?ts Viktor wrote:

> I'm trying to optimize MSVC non-GNU make, so that it
> compiles .prg in one batch (== one harbour.exe call by
> .lib), just like for .c files, as opposed to the current
> one-by-one .prg file compilation approach.

> Does anyone have an idea how to fix this? Marek, Paul?

I may not understand your exact requirement, but if (like me) you 
wanted to get rid of dependencies with the .c suffix (redundant) if 
there is a .prg dependency I did this (edited a little) in (say) 
heasipos.mak:


***
# heasipos.mak

OBJ_DIR = ecrobj
APPDEFINE = /dECR
LINKFORCE = /force:multiple
LINKLIST = @hecrobj.txt
SUBSYSTEM = /subsystem:WINDOWS

include heasipos.cf

# EasiPos

easipos_objs = \
$(OBJ_DIR)/ecr.obj \
$(OBJ_DIR)/ecrapp.obj

easipos.exe : $(easipos_objs) heasipos.mak heasipos.cf
***


and in heasipos.cf:


***
# heasipos.cf

.SUFFIXES:

$(OBJ_DIR)/%.obj : %.prg
	$(HB_DIR)\bin\harbour $< /q0 /n /m /w /gc0 /es2 /dECR32 /dEASIPOS 
$(APPDEFINE) /i$(HB_DIR)\include /i$(HWGUI_DIR)\include 
/i$(HBCONTRIB_DIR)\include /o$(OBJ_DIR)\$*.c
	@cl /nologo /W3 /c /I. /I$(HB_DIR)\include /I$(MSVCSDK_DIR)\include 
/I$(MSVC_DIR)\include $(OBJ_DIR)\$*.c /Fo$@
	@del $(OBJ_DIR)\$*.c

$(OBJ_DIR)/%.obj : %.c
	@cl /nologo /W3 /c /DHB_OS_WIN_32_USED /I. /I$(HB_DIR)\include 
/I$(MSVCSDK_DIR)\include /I$(MSVC_DIR)\include $*.c /Fo$@
***


I wonder if that is something like what you are getting at :)

Regards
Alex


From druzus at acn.waw.pl  Tue Oct  7 10:33:54 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  7 10:34:00 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <200810070825.16216.philb@philb.us>
References: <19847957.post@talk.nabble.com> <200810070043.55608.philb@philb.us>
	<20081007102818.GA29702@34-mo7-2.acn.waw.pl>
	<200810070825.16216.philb@philb.us>
Message-ID: <20081007143354.GA31398@34-mo7-2.acn.waw.pl>

On Tue, 07 Oct 2008, Phil Barnett wrote:

Hi Phil,

> Didn't think it would get done, but here is the same test after the recompile. 
> I'll do it once more without the -gc3 in a minute. Don't know if it will get 
> done before I leave for work.
> [philb@SunSpot tests]$    for i in 1 2 4 6 8; 
> do ./speedtst --exclude=mem --scale --thread=$i; done
[...]
>                                                         1 th.  2 th.  factor
> ============================================================================
> [ T001: x := L_C ]____________________________________  0.19   0.09 ->  2.05
> [ T002: x := L_N ]____________________________________  0.15   0.08 ->  1.89
> [ T003: x := L_D ]____________________________________  0.16   0.07 ->  2.14
> [ T004: x := S_C ]____________________________________  0.21   0.26 ->  0.78
> [ T024: eval( bc := { || i % 16 } ) ]_________________  0.80   0.56 ->  1.43
> [ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  0.77   0.55 ->  1.40
> [ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  0.92   0.64 ->  1.43
> ============================================================================
> [   TOTAL   ]_________________________________________ 18.97  10.30 ->  1.84
> ============================================================================
[...]
>                                                         1 th.  4 th.  factor
> ============================================================================
> [ T001: x := L_C ]____________________________________  0.38   0.11 ->  3.53
> [ T002: x := L_N ]____________________________________  0.27   0.09 ->  2.88
> [ T003: x := L_D ]____________________________________  0.28   0.09 ->  3.09
> [ T004: x := S_C ]____________________________________  0.40   0.49 ->  0.81
> [ T017: x := o[8] ]___________________________________  0.64   0.18 ->  3.55
> [ T018: round( i / 1000, 2 ) ]________________________  1.28   0.33 ->  3.85
> [ T020: val( s ) ]____________________________________  1.42   0.34 ->  4.13
> [ T021: val( a [ i % 16 + 1 ] ) ]_____________________  2.07   0.54 ->  3.85
> [ T024: eval( bc := { || i % 16 } ) ]_________________  1.58   1.22 ->  1.29
> [ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  1.50   0.99 ->  1.51
> [ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  1.83   1.11 ->  1.65
> [ T051: f2( a ) ]_____________________________________  0.83   0.23 ->  3.60
> ============================================================================
> [   TOTAL   ]_________________________________________ 37.65  13.05 ->  2.88

Thank you very much. Immediately better. Just like in min computer
accessing the same string item in [ T004: x := S_C ] simultaneously
by many threads is slow due to concurrent updating the same counter.
As you can see also eval() reduce over all performance but it's expected
because codeblocks body are compiled like for -gc0 even if you use -gc3
and HVM was compiled without -HB_GUI.
Recompiling harbour with -DHB_GUI should make above eval() tests results
much better and increase overall performance.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Oct  7 10:38:55 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  7 10:39:02 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <200810070831.56098.philb@philb.us>
References: <19847957.post@talk.nabble.com> <200810070043.55608.philb@philb.us>
	<20081007102818.GA29702@34-mo7-2.acn.waw.pl>
	<200810070831.56098.philb@philb.us>
Message-ID: <20081007143855.GB31398@34-mo7-2.acn.waw.pl>

On Tue, 07 Oct 2008, Phil Barnett wrote:

Hi Phil,

> Ok, the test with the compiler recompiled with export C_USR=-DHB_GUI and 
> without the -gc3 test is running very slowly, so I'll assume you don't need 
> the output. Anyway, I have to leave for work before it's getting finished.

I think that it was a mistake in build process. F.e. you created RPMs
where C_USR is overload or you haven't used 'install' parameter so speedtst
was linked with old HVM library.
If -gc3 helps then recompiling Harbour with -DHB_GUI _must_ also help
because in such build -gc0 works like -gc3 and it additionally eliminates
the overhead from codeblocks body.

best regards,
Przemek
From maurilio.longo at libero.it  Tue Oct  7 10:42:42 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Oct  7 10:42:52 2008
Subject: [Harbour] CHANGELOG: 2008-10-07 16:33 UTC+0200 
Message-ID: <48EB7562.3010909@libero.it>

2008-10-07 16:33 UTC+0200 Maurilio Longo (maurilio.longo@libero.it)
   * harbour/source/rtl/seconds.c
     + Added OS/2 section to secondsCPU(), but it does not work as expected :)
       In particular, user and system times are kept per thread, but when a thread
       dies the time it has spent in user and system-land gets lost, so the
       overall running time of the program decreases. Not only, if I call
       secondsCPU() before a thread starts and after it has ended I'll have
       no idea of the time that was spent by that thread.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From druzus at acn.waw.pl  Tue Oct  7 12:03:00 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  7 12:03:09 2008
Subject: [Harbour] SPEEDTST - HP laptop
Message-ID: <20081007160300.GA3864@34-mo7-2.acn.waw.pl>

Hi All,

Below are results from TOSHIBA laptop and Linux SUSE 11.0 collected
by my friend.
As you can see on this computer the overhead caused by concurrent
access to the same memory variable does not causes such big performance
reduction as with other hardware.
Also the MM used by Suse11 seems to be very good. It's sth what I'd like
to see also in other OS-es.

best regards,
Przemek




HP Pavillion dv6530ew
model name  : Intel(R) Core(TM)2 Duo CPU     T5450  @ 1.66GHz
cpu MHz     : 1667.000
cache size  : 2048 KB


Standard Harbour build without HB_GUI
speedtst compiled with -gc0
============================================================================
10/07/08 16:53:58 Linux 2.6.25.16-0.1-pae i686
Harbour 1.1.0dev (Rev. 9566) (MT)+ GNU C 4.3.1 (32 bit)
THREADS: 2
N_LOOPS: 1000000
                                                        1 th.  2 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.41   0.33 ->  1.25
[ T002: x := L_N ]____________________________________  0.29   0.27 ->  1.10
[ T003: x := L_D ]____________________________________  0.29   0.24 ->  1.21
[ T004: x := S_C ]____________________________________  0.41   0.37 ->  1.11
[ T005: x := S_N ]____________________________________  0.29   0.23 ->  1.23
[ T006: x := S_D ]____________________________________  0.29   0.23 ->  1.24
[ T007: x := M_C ]____________________________________  0.44   0.34 ->  1.32
[ T008: x := M_N ]____________________________________  0.32   0.25 ->  1.27
[ T009: x := M_D ]____________________________________  0.32   0.26 ->  1.23
[ T010: x := P_C ]____________________________________  0.44   0.34 ->  1.32
[ T011: x := P_N ]____________________________________  0.32   0.26 ->  1.21
[ T012: x := P_D ]____________________________________  0.32   0.25 ->  1.28
[ T013: x := F_C ]____________________________________  0.81   0.48 ->  1.69
[ T014: x := F_N ]____________________________________  0.76   0.44 ->  1.70
[ T015: x := F_D ]____________________________________  0.43   0.31 ->  1.38
[ T016: x := o:GenCode ]______________________________  0.78   0.51 ->  1.54
[ T017: x := o[8] ]___________________________________  0.57   0.38 ->  1.53
[ T018: round( i / 1000, 2 ) ]________________________  0.97   0.61 ->  1.60
[ T019: str( i / 1000 ) ]_____________________________  1.96   1.05 ->  1.86
[ T020: val( s ) ]____________________________________  1.09   0.57 ->  1.90
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  1.75   1.04 ->  1.68
[ T022: dtos( d - i % 10000 ) ]_______________________  1.55   0.90 ->  1.73
[ T023: eval( { || i % 16 } ) ]_______________________  2.15   1.34 ->  1.60
[ T024: eval( bc := { || i % 16 } ) ]_________________  1.07   0.72 ->  1.49
[ T025: eval( { |x| x % 16 }, i ) ]___________________  1.49   0.99 ->  1.51
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  1.09   0.74 ->  1.47
[ T027: eval( { |x| f1( x ) }, i ) ]__________________  1.81   1.23 ->  1.48
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  1.41   0.99 ->  1.43
[ T029: x := &( "f1(" + str(i) + ")" ) ]______________ 11.69   6.38 ->  1.83
[ T030: bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]______ 14.36   7.54 ->  1.91
[ T031: x := valtype( x ) +  valtype( i ) ]___________  1.85   1.08 ->  1.71
[ T032: x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ]  2.86   1.62 ->  1.77
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  1.43   0.95 ->  1.51
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  1.51   0.97 ->  1.56
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  1.50   0.99 ->  1.51
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  1.50   0.99 ->  1.51
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  1.48   0.98 ->  1.52
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  1.48   1.02 ->  1.45
[ T039: ascan( a, i % 16 ) ]__________________________  1.26   0.76 ->  1.65
[ T040: ascan( a, { |x| x == i % 16 } ) ]_____________ 11.30   6.66 ->  1.70
[ T041: if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2 ]  3.98   2.32 ->  1.71
[ T042: x := a ]______________________________________  0.44   0.34 ->  1.29
[ T043: x := {} ]_____________________________________  0.88   0.79 ->  1.12
[ T044: f0() ]________________________________________  0.50   0.47 ->  1.07
[ T045: f1( i ) ]_____________________________________  0.64   0.58 ->  1.11
[ T046: f2( c[1...8] ) ]______________________________  0.77   0.64 ->  1.20
[ T047: f2( c[1...40000] ) ]__________________________  0.77   0.65 ->  1.19
[ T048: f2( @c[1...40000] ) ]_________________________  0.77   0.64 ->  1.20
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.93   0.75 ->  1.24
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  1.89   1.25 ->  1.51
[ T051: f2( a ) ]_____________________________________  0.82   0.65 ->  1.26
[ T052: x := f4() ]___________________________________  2.62   1.52 ->  1.72
[ T053: x := f5() ]___________________________________  1.26   0.82 ->  1.54
[ T054: f_prv( c ) ]__________________________________  2.38   1.41 ->  1.69
============================================================================
[   TOTAL   ]_________________________________________ 94.71  58.44 ->  1.62
============================================================================
[ total application time: ]...................................210.55
[ total real time: ]..........................................153.16


Standard Harbour build without HB_GUI
speedtst compiled with -gc0, --exclude=mem
============================================================================
10/07/08 16:57:44 Linux 2.6.25.16-0.1-pae i686
Harbour 1.1.0dev (Rev. 9566) (MT)+ GNU C 4.3.1 (32 bit)
THREADS: 2
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054 
                                                        1 th.  2 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.41   0.30 ->  1.38
[ T002: x := L_N ]____________________________________  0.29   0.26 ->  1.12
[ T003: x := L_D ]____________________________________  0.29   0.27 ->  1.08
[ T004: x := S_C ]____________________________________  0.41   0.35 ->  1.17
[ T005: x := S_N ]____________________________________  0.29   0.22 ->  1.33
[ T006: x := S_D ]____________________________________  0.29   0.22 ->  1.33
[ T007: x := M_C ]____________________________________  0.44   0.36 ->  1.21
[ T008: x := M_N ]____________________________________  0.32   0.26 ->  1.24
[ T009: x := M_D ]____________________________________  0.32   0.27 ->  1.20
[ T010: x := P_C ]____________________________________  0.44   0.34 ->  1.28
[ T011: x := P_N ]____________________________________  0.32   0.27 ->  1.20
[ T012: x := P_D ]____________________________________  0.32   0.27 ->  1.21
[ T013: x := F_C ]____________________________________  0.82   0.47 ->  1.75
[ T014: x := F_N ]____________________________________  0.76   0.44 ->  1.73
[ T015: x := F_D ]____________________________________  0.43   0.32 ->  1.35
[ T016: x := o:GenCode ]______________________________  0.82   0.54 ->  1.52
[ T017: x := o[8] ]___________________________________  0.58   0.40 ->  1.46
[ T018: round( i / 1000, 2 ) ]________________________  0.91   0.62 ->  1.47
[ T020: val( s ) ]____________________________________  1.10   0.56 ->  1.95
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  1.87   1.09 ->  1.71
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.99   0.73 ->  1.37
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  1.06   0.73 ->  1.45
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  1.45   1.01 ->  1.44
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  1.36   0.94 ->  1.45
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  1.45   0.97 ->  1.49
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  1.45   0.97 ->  1.49
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  1.63   1.01 ->  1.62
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  1.42   0.96 ->  1.48
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  1.45   0.98 ->  1.48
[ T039: ascan( a, i % 16 ) ]__________________________  1.28   0.75 ->  1.71
[ T042: x := a ]______________________________________  0.44   0.33 ->  1.35
[ T044: f0() ]________________________________________  0.50   0.46 ->  1.09
[ T045: f1( i ) ]_____________________________________  0.64   0.59 ->  1.08
[ T046: f2( c[1...8] ) ]______________________________  0.77   0.64 ->  1.22
[ T047: f2( c[1...40000] ) ]__________________________  0.78   0.64 ->  1.22
[ T048: f2( @c[1...40000] ) ]_________________________  0.78   0.64 ->  1.23
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.92   0.75 ->  1.24
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  1.91   1.24 ->  1.54
[ T051: f2( a ) ]_____________________________________  0.83   0.64 ->  1.29
============================================================================
[   TOTAL   ]_________________________________________ 32.58  22.80 ->  1.43
============================================================================
[ total application time: ]....................................77.78
[ total real time: ]...........................................55.38


Standard Harbour build without HB_GUI
speedtst compiled with -gc3, --exclude=mem
============================================================================
10/07/08 16:59:05 Linux 2.6.25.16-0.1-pae i686
Harbour 1.1.0dev (Rev. 9566) (MT)+ GNU C 4.3.1 (32 bit)
THREADS: 2
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054 
                                                        1 th.  2 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.27   0.14 ->  1.99
[ T002: x := L_N ]____________________________________  0.16   0.08 ->  2.01
[ T003: x := L_D ]____________________________________  0.16   0.08 ->  1.97
[ T004: x := S_C ]____________________________________  0.33   0.22 ->  1.46
[ T005: x := S_N ]____________________________________  0.20   0.10 ->  2.01
[ T006: x := S_D ]____________________________________  0.20   0.10 ->  1.98
[ T007: x := M_C ]____________________________________  0.35   0.19 ->  1.89
[ T008: x := M_N ]____________________________________  0.23   0.12 ->  1.98
[ T009: x := M_D ]____________________________________  0.23   0.12 ->  1.98
[ T010: x := P_C ]____________________________________  0.35   0.18 ->  2.00
[ T011: x := P_N ]____________________________________  0.23   0.12 ->  1.99
[ T012: x := P_D ]____________________________________  0.23   0.12 ->  1.96
[ T013: x := F_C ]____________________________________  0.73   0.36 ->  1.99
[ T014: x := F_N ]____________________________________  0.68   0.34 ->  1.98
[ T015: x := F_D ]____________________________________  0.34   0.19 ->  1.77
[ T016: x := o:GenCode ]______________________________  0.67   0.33 ->  2.04
[ T017: x := o[8] ]___________________________________  0.47   0.24 ->  1.98
[ T018: round( i / 1000, 2 ) ]________________________  0.79   0.40 ->  1.99
[ T020: val( s ) ]____________________________________  1.05   0.52 ->  2.00
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  1.48   0.74 ->  2.00
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.94   0.50 ->  1.88
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  0.92   0.55 ->  1.67
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  1.23   0.66 ->  1.85
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  1.16   0.59 ->  1.97
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  1.23   0.62 ->  1.98
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  1.22   0.62 ->  1.99
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  1.23   0.61 ->  2.00
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  1.23   0.61 ->  2.00
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  1.22   0.61 ->  2.00
[ T039: ascan( a, i % 16 ) ]__________________________  1.09   0.55 ->  2.00
[ T042: x := a ]______________________________________  0.29   0.15 ->  1.96
[ T044: f0() ]________________________________________  0.35   0.17 ->  1.98
[ T045: f1( i ) ]_____________________________________  0.51   0.25 ->  2.03
[ T046: f2( c[1...8] ) ]______________________________  0.62   0.31 ->  2.00
[ T047: f2( c[1...40000] ) ]__________________________  0.62   0.31 ->  2.00
[ T048: f2( @c[1...40000] ) ]_________________________  0.63   0.32 ->  2.00
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.60   0.30 ->  1.97
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  1.68   0.84 ->  2.01
[ T051: f2( a ) ]_____________________________________  0.62   0.31 ->  2.00
============================================================================
[   TOTAL   ]_________________________________________ 26.55  13.57 ->  1.96
============================================================================
[ total application time: ]....................................53.40
[ total real time: ]...........................................40.11


Standard Harbour build without HB_GUI
speedtst compiled with -gc3
============================================================================
10/07/08 16:59:57 Linux 2.6.25.16-0.1-pae i686
Harbour 1.1.0dev (Rev. 9566) (MT)+ GNU C 4.3.1 (32 bit)
THREADS: 2
N_LOOPS: 1000000
                                                        1 th.  2 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.27   0.14 ->  1.96
[ T002: x := L_N ]____________________________________  0.16   0.08 ->  2.00
[ T003: x := L_D ]____________________________________  0.16   0.08 ->  2.01
[ T004: x := S_C ]____________________________________  0.32   0.22 ->  1.50
[ T005: x := S_N ]____________________________________  0.19   0.10 ->  1.95
[ T006: x := S_D ]____________________________________  0.19   0.10 ->  1.96
[ T007: x := M_C ]____________________________________  0.35   0.18 ->  1.95
[ T008: x := M_N ]____________________________________  0.23   0.12 ->  1.97
[ T009: x := M_D ]____________________________________  0.23   0.12 ->  1.97
[ T010: x := P_C ]____________________________________  0.35   0.17 ->  2.00
[ T011: x := P_N ]____________________________________  0.24   0.12 ->  2.09
[ T012: x := P_D ]____________________________________  0.23   0.12 ->  1.98
[ T013: x := F_C ]____________________________________  0.73   0.36 ->  2.01
[ T014: x := F_N ]____________________________________  0.68   0.35 ->  1.92
[ T015: x := F_D ]____________________________________  0.34   0.17 ->  1.97
[ T016: x := o:GenCode ]______________________________  0.69   0.35 ->  1.97
[ T017: x := o[8] ]___________________________________  0.46   0.23 ->  2.00
[ T018: round( i / 1000, 2 ) ]________________________  0.79   0.40 ->  1.96
[ T019: str( i / 1000 ) ]_____________________________  1.71   0.86 ->  2.00
[ T020: val( s ) ]____________________________________  1.04   0.52 ->  2.00
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  1.48   0.73 ->  2.01
[ T022: dtos( d - i % 10000 ) ]_______________________  1.38   0.69 ->  2.01
[ T023: eval( { || i % 16 } ) ]_______________________  2.00   1.18 ->  1.69
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.95   0.50 ->  1.91
[ T025: eval( { |x| x % 16 }, i ) ]___________________  1.41   0.93 ->  1.52
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  0.97   0.55 ->  1.77
[ T027: eval( { |x| f1( x ) }, i ) ]__________________  1.71   1.05 ->  1.63
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  1.16   0.68 ->  1.69
[ T029: x := &( "f1(" + str(i) + ")" ) ]______________ 11.28   5.79 ->  1.95
[ T030: bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]______ 13.69   7.32 ->  1.87
[ T031: x := valtype( x ) +  valtype( i ) ]___________  1.71   0.85 ->  2.03
[ T032: x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ]  2.47   1.25 ->  1.97
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  1.21   0.60 ->  2.00
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  1.29   0.64 ->  2.00
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  1.27   0.64 ->  2.01
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  1.26   0.63 ->  2.00
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  1.26   0.63 ->  1.99
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  1.27   0.64 ->  2.00
[ T039: ascan( a, i % 16 ) ]__________________________  1.11   0.57 ->  1.96
[ T040: ascan( a, { |x| x == i % 16 } ) ]_____________ 11.36   6.43 ->  1.77
[ T041: if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2 ]  3.79   2.04 ->  1.85
[ T042: x := a ]______________________________________  0.30   0.15 ->  2.02
[ T043: x := {} ]_____________________________________  0.75   0.56 ->  1.33
[ T044: f0() ]________________________________________  0.35   0.17 ->  2.00
[ T045: f1( i ) ]_____________________________________  0.49   0.25 ->  1.95
[ T046: f2( c[1...8] ) ]______________________________  0.64   0.32 ->  2.00
[ T047: f2( c[1...40000] ) ]__________________________  0.64   0.32 ->  2.00
[ T048: f2( @c[1...40000] ) ]_________________________  0.64   0.32 ->  2.00
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.61   0.30 ->  2.01
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  1.63   0.82 ->  1.99
[ T051: f2( a ) ]_____________________________________  0.59   0.32 ->  1.86
[ T052: x := f4() ]___________________________________  2.45   1.26 ->  1.95
[ T053: x := f5() ]___________________________________  1.09   0.64 ->  1.70
[ T054: f_prv( c ) ]__________________________________  2.06   1.13 ->  1.83
============================================================================
[   TOTAL   ]_________________________________________ 85.65  45.68 ->  1.87
============================================================================
[ total application time: ]...................................175.88
[ total real time: ]..........................................131.34


Harbour build with HB_GUI
speedtst compiled with -gc0
============================================================================
10/07/08 17:13:19 Linux 2.6.25.16-0.1-pae i686
Harbour 1.1.0dev (Rev. 9566) (MT)+ GNU C 4.3.1 (32 bit)
THREADS: 2
N_LOOPS: 1000000
                                                        1 th.  2 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.41   0.20 ->  2.01
[ T002: x := L_N ]____________________________________  0.29   0.14 ->  2.01
[ T003: x := L_D ]____________________________________  0.28   0.14 ->  1.98
[ T004: x := S_C ]____________________________________  0.40   0.26 ->  1.54
[ T005: x := S_N ]____________________________________  0.28   0.14 ->  1.98
[ T006: x := S_D ]____________________________________  0.28   0.14 ->  1.98
[ T007: x := M_C ]____________________________________  0.44   0.22 ->  2.01
[ T008: x := M_N ]____________________________________  0.32   0.16 ->  1.98
[ T009: x := M_D ]____________________________________  0.32   0.16 ->  1.99
[ T010: x := P_C ]____________________________________  0.44   0.22 ->  2.00
[ T011: x := P_N ]____________________________________  0.32   0.16 ->  1.97
[ T012: x := P_D ]____________________________________  0.32   0.16 ->  1.96
[ T013: x := F_C ]____________________________________  0.81   0.41 ->  1.99
[ T014: x := F_N ]____________________________________  0.75   0.38 ->  1.98
[ T015: x := F_D ]____________________________________  0.42   0.22 ->  1.96
[ T016: x := o:GenCode ]______________________________  0.76   0.38 ->  1.99
[ T017: x := o[8] ]___________________________________  0.56   0.28 ->  1.99
[ T018: round( i / 1000, 2 ) ]________________________  0.90   0.46 ->  1.96
[ T019: str( i / 1000 ) ]_____________________________  1.92   0.95 ->  2.02
[ T020: val( s ) ]____________________________________  1.07   0.54 ->  1.99
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  1.69   0.86 ->  1.97
[ T022: dtos( d - i % 10000 ) ]_______________________  1.56   0.79 ->  1.98
[ T023: eval( { || i % 16 } ) ]_______________________  2.05   1.20 ->  1.70
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.99   0.50 ->  2.00
[ T025: eval( { |x| x % 16 }, i ) ]___________________  1.44   0.90 ->  1.60
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  0.98   0.49 ->  2.00
[ T027: eval( { |x| f1( x ) }, i ) ]__________________  1.74   1.06 ->  1.64
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  1.22   0.61 ->  2.00
[ T029: x := &( "f1(" + str(i) + ")" ) ]______________ 12.15   6.16 ->  1.97
[ T030: bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]______ 13.73   7.26 ->  1.89
[ T031: x := valtype( x ) +  valtype( i ) ]___________  1.87   0.95 ->  1.97
[ T032: x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ]  2.75   1.39 ->  1.98
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  1.35   0.67 ->  2.00
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  1.44   0.73 ->  1.98
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  1.44   0.72 ->  2.01
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  1.42   0.71 ->  2.00
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  1.42   0.71 ->  2.01
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  1.41   0.71 ->  2.00
[ T039: ascan( a, i % 16 ) ]__________________________  1.23   0.61 ->  2.01
[ T040: ascan( a, { |x| x == i % 16 } ) ]_____________ 11.06   5.83 ->  1.90
[ T041: if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2 ]  3.81   2.10 ->  1.81
[ T042: x := a ]______________________________________  0.43   0.21 ->  2.00
[ T043: x := {} ]_____________________________________  0.85   0.56 ->  1.51
[ T044: f0() ]________________________________________  0.50   0.25 ->  2.02
[ T045: f1( i ) ]_____________________________________  0.61   0.31 ->  2.01
[ T046: f2( c[1...8] ) ]______________________________  0.75   0.38 ->  1.99
[ T047: f2( c[1...40000] ) ]__________________________  0.75   0.38 ->  2.00
[ T048: f2( @c[1...40000] ) ]_________________________  0.75   0.38 ->  2.00
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.90   0.47 ->  1.90
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  1.88   0.94 ->  2.00
[ T051: f2( a ) ]_____________________________________  0.76   0.38 ->  1.98
[ T052: x := f4() ]___________________________________  2.65   1.35 ->  1.97
[ T053: x := f5() ]___________________________________  1.32   0.67 ->  1.98
[ T054: f_prv( c ) ]__________________________________  2.35   1.18 ->  1.99
============================================================================
[   TOTAL   ]_________________________________________ 92.58  48.16 ->  1.92
============================================================================
[ total application time: ]...................................187.84
[ total real time: ]..........................................140.74


Harbour build with HB_GUI
speedtst compiled with -gc0, --exclude=mem
============================================================================
10/07/08 17:15:46 Linux 2.6.25.16-0.1-pae i686
Harbour 1.1.0dev (Rev. 9566) (MT)+ GNU C 4.3.1 (32 bit)
THREADS: 2
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054 
                                                        1 th.  2 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.44   0.21 ->  2.15
[ T002: x := L_N ]____________________________________  0.29   0.15 ->  1.97
[ T003: x := L_D ]____________________________________  0.29   0.14 ->  1.99
[ T004: x := S_C ]____________________________________  0.40   0.26 ->  1.55
[ T005: x := S_N ]____________________________________  0.28   0.14 ->  2.00
[ T006: x := S_D ]____________________________________  0.28   0.14 ->  1.99
[ T007: x := M_C ]____________________________________  0.44   0.22 ->  2.00
[ T008: x := M_N ]____________________________________  0.32   0.16 ->  1.99
[ T009: x := M_D ]____________________________________  0.32   0.16 ->  2.02
[ T010: x := P_C ]____________________________________  0.43   0.22 ->  2.01
[ T011: x := P_N ]____________________________________  0.32   0.16 ->  2.00
[ T012: x := P_D ]____________________________________  0.32   0.16 ->  1.99
[ T013: x := F_C ]____________________________________  0.80   0.42 ->  1.92
[ T014: x := F_N ]____________________________________  0.75   0.38 ->  2.00
[ T015: x := F_D ]____________________________________  0.42   0.21 ->  1.99
[ T016: x := o:GenCode ]______________________________  0.77   0.38 ->  1.99
[ T017: x := o[8] ]___________________________________  0.60   0.31 ->  1.97
[ T018: round( i / 1000, 2 ) ]________________________  0.92   0.46 ->  2.00
[ T020: val( s ) ]____________________________________  1.07   0.54 ->  1.98
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  1.66   0.87 ->  1.90
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.97   0.51 ->  1.92
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  0.97   0.50 ->  1.96
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  1.34   0.69 ->  1.93
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  1.39   0.69 ->  2.01
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  1.48   0.75 ->  1.98
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  1.50   0.75 ->  2.00
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  1.47   0.73 ->  2.00
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  1.48   0.74 ->  2.01
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  1.46   0.74 ->  1.96
[ T039: ascan( a, i % 16 ) ]__________________________  1.18   0.59 ->  1.99
[ T042: x := a ]______________________________________  0.43   0.21 ->  2.00
[ T044: f0() ]________________________________________  0.50   0.25 ->  1.99
[ T045: f1( i ) ]_____________________________________  0.61   0.31 ->  2.00
[ T046: f2( c[1...8] ) ]______________________________  0.76   0.38 ->  2.00
[ T047: f2( c[1...40000] ) ]__________________________  0.76   0.38 ->  2.01
[ T048: f2( @c[1...40000] ) ]_________________________  0.76   0.38 ->  2.00
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.85   0.44 ->  1.93
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  1.88   0.96 ->  1.96
[ T051: f2( a ) ]_____________________________________  0.77   0.39 ->  2.00
============================================================================
[   TOTAL   ]_________________________________________ 31.69  16.06 ->  1.97
============================================================================
[ total application time: ]....................................63.43
[ total real time: ]...........................................47.76


Harbour build with HB_GUI
speedtst compiled with -gc3, --exclude=mem
============================================================================
10/07/08 17:16:39 Linux 2.6.25.16-0.1-pae i686
Harbour 1.1.0dev (Rev. 9566) (MT)+ GNU C 4.3.1 (32 bit)
THREADS: 2
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054 
                                                        1 th.  2 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.27   0.14 ->  1.97
[ T002: x := L_N ]____________________________________  0.16   0.08 ->  1.98
[ T003: x := L_D ]____________________________________  0.16   0.08 ->  1.95
[ T004: x := S_C ]____________________________________  0.32   0.22 ->  1.48
[ T005: x := S_N ]____________________________________  0.20   0.10 ->  2.01
[ T006: x := S_D ]____________________________________  0.19   0.10 ->  2.00
[ T007: x := M_C ]____________________________________  0.35   0.18 ->  1.98
[ T008: x := M_N ]____________________________________  0.23   0.12 ->  1.95
[ T009: x := M_D ]____________________________________  0.23   0.12 ->  2.00
[ T010: x := P_C ]____________________________________  0.35   0.18 ->  1.97
[ T011: x := P_N ]____________________________________  0.23   0.12 ->  1.84
[ T012: x := P_D ]____________________________________  0.23   0.12 ->  1.97
[ T013: x := F_C ]____________________________________  0.73   0.36 ->  1.99
[ T014: x := F_N ]____________________________________  0.64   0.33 ->  1.96
[ T015: x := F_D ]____________________________________  0.33   0.17 ->  1.95
[ T016: x := o:GenCode ]______________________________  0.66   0.34 ->  1.95
[ T017: x := o[8] ]___________________________________  0.46   0.29 ->  1.58
[ T018: round( i / 1000, 2 ) ]________________________  0.79   0.39 ->  2.01
[ T020: val( s ) ]____________________________________  1.10   0.55 ->  2.00
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  1.57   0.83 ->  1.88
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.96   0.48 ->  1.98
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  1.08   0.54 ->  2.00
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  1.23   0.61 ->  2.02
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  1.15   0.60 ->  1.93
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  1.23   0.63 ->  1.96
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  1.23   0.63 ->  1.95
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  1.22   0.62 ->  1.99
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  1.22   0.62 ->  1.97
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  1.23   0.64 ->  1.92
[ T039: ascan( a, i % 16 ) ]__________________________  1.10   0.54 ->  2.02
[ T042: x := a ]______________________________________  0.29   0.15 ->  1.94
[ T044: f0() ]________________________________________  0.34   0.18 ->  1.96
[ T045: f1( i ) ]_____________________________________  0.50   0.25 ->  2.00
[ T046: f2( c[1...8] ) ]______________________________  0.61   0.32 ->  1.91
[ T047: f2( c[1...40000] ) ]__________________________  0.61   0.32 ->  1.92
[ T048: f2( @c[1...40000] ) ]_________________________  0.61   0.33 ->  1.87
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.59   0.31 ->  1.93
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  1.71   0.87 ->  1.97
[ T051: f2( a ) ]_____________________________________  0.63   0.32 ->  1.98
============================================================================
[   TOTAL   ]_________________________________________ 26.74  13.75 ->  1.95
============================================================================
[ total application time: ]....................................53.65
[ total real time: ]...........................................40.49


Harbour build with HB_GUI
speedtst compiled with -gc3
============================================================================
10/07/08 17:17:25 Linux 2.6.25.16-0.1-pae i686
Harbour 1.1.0dev (Rev. 9566) (MT)+ GNU C 4.3.1 (32 bit)
THREADS: 2
N_LOOPS: 1000000
                                                        1 th.  2 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.28   0.14 ->  2.00
[ T002: x := L_N ]____________________________________  0.16   0.08 ->  1.99
[ T003: x := L_D ]____________________________________  0.16   0.08 ->  2.00
[ T004: x := S_C ]____________________________________  0.33   0.22 ->  1.52
[ T005: x := S_N ]____________________________________  0.20   0.10 ->  2.00
[ T006: x := S_D ]____________________________________  0.20   0.10 ->  1.97
[ T007: x := M_C ]____________________________________  0.35   0.18 ->  2.00
[ T008: x := M_N ]____________________________________  0.23   0.12 ->  2.01
[ T009: x := M_D ]____________________________________  0.23   0.12 ->  2.01
[ T010: x := P_C ]____________________________________  0.35   0.18 ->  1.99
[ T011: x := P_N ]____________________________________  0.23   0.12 ->  1.99
[ T012: x := P_D ]____________________________________  0.23   0.12 ->  2.00
[ T013: x := F_C ]____________________________________  0.73   0.37 ->  1.98
[ T014: x := F_N ]____________________________________  0.69   0.34 ->  2.04
[ T015: x := F_D ]____________________________________  0.34   0.25 ->  1.34
[ T016: x := o:GenCode ]______________________________  0.67   0.34 ->  1.98
[ T017: x := o[8] ]___________________________________  0.46   0.23 ->  2.01
[ T018: round( i / 1000, 2 ) ]________________________  0.78   0.40 ->  1.96
[ T019: str( i / 1000 ) ]_____________________________  1.69   0.86 ->  1.97
[ T020: val( s ) ]____________________________________  1.09   0.55 ->  2.00
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  1.48   0.74 ->  2.00
[ T022: dtos( d - i % 10000 ) ]_______________________  1.32   0.67 ->  1.99
[ T023: eval( { || i % 16 } ) ]_______________________  2.00   1.22 ->  1.64
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.95   0.48 ->  1.99
[ T025: eval( { |x| x % 16 }, i ) ]___________________  1.43   0.96 ->  1.48
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  1.05   0.52 ->  2.01
[ T027: eval( { |x| f1( x ) }, i ) ]__________________  1.71   1.11 ->  1.54
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  1.19   0.60 ->  1.99
[ T029: x := &( "f1(" + str(i) + ")" ) ]______________ 11.04   5.97 ->  1.85
[ T030: bc := &( "{|x|f1(x)}" ); eval( bc, i ) ]______ 13.94   7.25 ->  1.92
[ T031: x := valtype( x ) +  valtype( i ) ]___________  1.59   0.79 ->  2.01
[ T032: x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ]  2.44   1.20 ->  2.04
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  1.18   0.59 ->  2.00
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  1.23   0.63 ->  1.94
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  1.23   0.62 ->  2.01
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  1.21   0.63 ->  1.93
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  1.23   0.62 ->  2.00
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  1.26   0.61 ->  2.06
[ T039: ascan( a, i % 16 ) ]__________________________  1.09   0.56 ->  1.95
[ T040: ascan( a, { |x| x == i % 16 } ) ]_____________ 11.27   5.85 ->  1.93
[ T041: if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2 ]  3.74   2.16 ->  1.73
[ T042: x := a ]______________________________________  0.30   0.15 ->  2.00
[ T043: x := {} ]_____________________________________  0.76   0.61 ->  1.24
[ T044: f0() ]________________________________________  0.35   0.18 ->  2.00
[ T045: f1( i ) ]_____________________________________  0.49   0.25 ->  1.98
[ T046: f2( c[1...8] ) ]______________________________  0.64   0.32 ->  2.04
[ T047: f2( c[1...40000] ) ]__________________________  0.63   0.32 ->  1.94
[ T048: f2( @c[1...40000] ) ]_________________________  0.62   0.31 ->  1.99
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.60   0.30 ->  2.00
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  1.71   0.88 ->  1.95
[ T051: f2( a ) ]_____________________________________  0.62   0.31 ->  1.97
[ T052: x := f4() ]___________________________________  2.43   1.21 ->  2.00
[ T053: x := f5() ]___________________________________  1.06   0.58 ->  1.83
[ T054: f_prv( c ) ]__________________________________  2.07   1.06 ->  1.95
============================================================================
[   TOTAL   ]_________________________________________ 85.26  45.09 ->  1.89
============================================================================
[ total application time: ]...................................174.14
[ total real time: ]..........................................130.36
From druzus at acn.waw.pl  Tue Oct  7 12:06:42 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  7 12:06:48 2008
Subject: [Harbour] 2008-10-07 14:24 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c92877$Blat.v2.6.2$c7233a66$19c0e7b80750@127.0.0.1>
References: <01c92877$Blat.v2.6.2$c7233a66$19c0e7b80750@127.0.0.1>
Message-ID: <20081007160642.GA12502@34-mo7-2.acn.waw.pl>

On Tue, 07 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

>      ! Fixed hb_errInternal() being marked as HB_EXPORT 
>        in the headers only.

Is it wrong for some C compilers?
It's quite common practice that function attributes are defined
only in header files so they can be changed without touching source
code.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Oct  7 12:33:06 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  7 12:33:13 2008
Subject: [Harbour] 2008-10-07 18:32 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081007163306.GA2829@34-mo7-2.acn.waw.pl>

2008-10-07 18:32 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
  * harbour/source/vm/hvm.c
    % moved static USHORT uiPolls to HVM stack to not reduce the HVM
      performance in MT mode. In multi CPU environment if many threads
      try to change the same memory variable in the same time the overall
      performance is strongly reduced on most of tested hardware - probably
      some random CPU delay used to resolve the conflict.

best regards
Przemek
From harbour.01 at syenar.hu  Tue Oct  7 12:34:15 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  7 12:34:36 2008
Subject: [Harbour] nmake optimization for .prg
In-Reply-To: <48EB70E4.1040300@mweb.co.za>
References: <6547DD43-38A4-43BB-8C9E-C1FA2B2EACA6@syenar.hu>
	<48EB70E4.1040300@mweb.co.za>
Message-ID: <A6066744-FB04-47FD-8941-B38F112D2E1E@syenar.hu>

Hi Alex.

>> I'm trying to optimize MSVC non-GNU make, so that it
>> compiles .prg in one batch (== one harbour.exe call by
>> .lib), just like for .c files, as opposed to the current
>> one-by-one .prg file compilation approach.
>
>> Does anyone have an idea how to fix this? Marek, Paul?
>
> I may not understand your exact requirement, but if (like me) you  
> wanted to get rid of dependencies with the .c suffix (redundant) if  
> there is a .prg dependency I did this (edited a little) in (say)  
> heasipos.mak:
>
> I wonder if that is something like what you are getting at :)

Maybe I don't read your make file well, but it
looks like what we have now, also in MSVC .mak
files.

What I'd like to do, is to optimize the .prg
build process, so that harbour.exe gets called
only once per target for all its .prg dependencies,
instead of being called separately for each .prg files.
I think nmake terminology calls this a "batch rule",
and it's specified using "::" instead of ":" in
the dependency list.

This would be a great way to enhance build speed,
and make the output smaller, leaner. This exact
method is already used for .c -> .obj compilation,
see rules starting in make_vc.mak @ line 259.

I'd imaging two ways to achieve that:
1) To have a batch rule with two steps.
    .prg -> .obj rules, with two command,
    Harbour getting all .prg as input, creating .c files, then
    cl.exe getting all .c files as input.
    This seems impossible as nmake doesn't allow to
    manipulate the dependency list in any ways, which
    would be needed to pass a .c file list to cl.exe.
2) To have an "indirect" rule. This is what I've
    tried in my posted example, but the best result
    still needs two passes, so it basically doesn't work.

Maybe it's not doable at all, yet it would be
very nice.

BTW, for a maybe easier problem, in the contrib make
files something is broken, as a modified .prg won't
trigger a recompile. Maybe you have an idea why.

Brgds,
Viktor

From druzus at acn.waw.pl  Tue Oct  7 12:36:56 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  7 12:37:03 2008
Subject: [Harbour] 2008-10-07 18:36 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081007163656.GA8553@34-mo7-2.acn.waw.pl>

2008-10-07 18:36 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/estack.c
    ! fixed typo in last commit

best regards
Przemek
From harbour.01 at syenar.hu  Tue Oct  7 12:39:14 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  7 12:39:23 2008
Subject: [Harbour] 2008-10-07 14:24 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20081007160642.GA12502@34-mo7-2.acn.waw.pl>
References: <01c92877$Blat.v2.6.2$c7233a66$19c0e7b80750@127.0.0.1>
	<20081007160642.GA12502@34-mo7-2.acn.waw.pl>
Message-ID: <3BDAA286-CA94-408B-8F56-31A2EEE422C2@syenar.hu>

Hi Przemek,

I actually didn't check, but we seem to have
HB_EXPORT in the declarations too almost
everywhere, that's the only reason I've added it
here.

If it's not needed (and I believe you), we
should remove it from all places to be
consistent I think. One less thing to worry
about.

Brgds,
Viktor

On 2008.10.07., at 18:06, Przemyslaw Czerpak wrote:

> On Tue, 07 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>>     ! Fixed hb_errInternal() being marked as HB_EXPORT
>>       in the headers only.
>
> Is it wrong for some C compilers?
> It's quite common practice that function attributes are defined
> only in header files so they can be changed without touching source
> code.
>
> best regards,
> Przemek

From harbour.01 at syenar.hu  Tue Oct  7 12:44:44 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  7 12:44:51 2008
Subject: [Harbour] 2008-10-07 18:42 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9289c$Blat.v2.6.2$006b3f0c$17e4e9935544@127.0.0.1>

2008-10-07 18:42 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/seconds.c
    * Some cleanup after latest change.
      Functionality shouldn't change. OS/2 users pls verify.
--
Brgds,
Viktor

From teo at windtelsoft.com  Tue Oct  7 11:28:46 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Tue Oct  7 12:48:07 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <20081007012352.GC5095@34-mo7-2.acn.waw.pl>
References: <19847957.post@talk.nabble.com>
	<20081007012352.GC5095@34-mo7-2.acn.waw.pl>
Message-ID: <200810071028.46597.teo@windtelsoft.com>

On Monday 06 October 2008 08:23:52 pm Przemyslaw Czerpak wrote:
> On Mon, 06 Oct 2008, Pritpal Bedi wrote:
>
> Hi Pritpal,
>
> > Here are attached the results on 2 computers  with different
> > number of processors and operating systems.
> > And below are attached those log files.
>
> Thank you very much.
> As I can see only Enrico can reach good scalability on Intel and
> Windows. Quite good results has also Maurilio with Intel and OS2.
> But all of them are much worse then in my
> AMD Phenom 8450 Triple-Core Processor.
> Please note that most of the test loop does not have even single
> internal lock and should be fully scalable to the number of CPUs.
> I begin to think that this test quite well show hardware scalability.
> The performance may strongly depend also on used mainboard.
>
> Has anyone else AMD multiprocessor system?
>
> Phil,
> I know that you have one :-)
> Can you build Harbour in this system and then compiler and run
> harbour/tests/speetst.prg f.e.:
>
>    hbmk -n -w -es2 -mt speetst
>    ./speetst.prg --exclude=mem --scale --thread:2
>    ./speetst.prg --exclude=mem --scale --thread:4
>    ./speetst.prg --exclude=mem --scale --thread:6
>    ./speetst.prg --exclude=mem --scale --thread:8

Hello Przemek,

FYI, attached you'll find two file logs:

* "with_dhb_gui.log"
  - harbour C_USR="-DHB_FM_STATISTICS_OFF -DHB_GUI"

* "without_dhb_gui.log"
  - harbour C_USR="-DHB_FM_STATISTICS_OFF"


Seems that the best performance is obtained with the "-DHB_GUI" and "-gc3" 
combination. The script that generated each one of the file logs is:

$ for gc in 0 3 ; do hbmk -n -w -es2 -mt -gc$gc speedtst.prg  ; for t in 1 2 4 
6 8 ; do echo ; echo "/* WITH -gc$gc, --thread=$t 
*/" ; ./speedtst --exclude=mem --scale --thread=$t ; done ; done > 
with_dhb_gui.log


best regards

Teo
-------------- next part --------------
A non-text attachment was scrubbed...
Name: with_dhb_gui.log.zip
Type: application/x-zip
Size: 4494 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081007/230dc59f/with_dhb_gui.log-0001.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: without_dhb_gui.log.zip
Type: application/x-zip
Size: 4536 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081007/230dc59f/without_dhb_gui.log-0001.bin
From druzus at acn.waw.pl  Tue Oct  7 13:04:33 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  7 13:04:41 2008
Subject: [Harbour] 2008-10-07 14:24 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <3BDAA286-CA94-408B-8F56-31A2EEE422C2@syenar.hu>
References: <01c92877$Blat.v2.6.2$c7233a66$19c0e7b80750@127.0.0.1>
	<20081007160642.GA12502@34-mo7-2.acn.waw.pl>
	<3BDAA286-CA94-408B-8F56-31A2EEE422C2@syenar.hu>
Message-ID: <20081007170433.GA523@34-mo7-2.acn.waw.pl>

On Tue, 07 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> If it's not needed (and I believe you), we
> should remove it from all places to be
> consistent I think. One less thing to worry
> about.

I agree but we should check if this will work with all
used by us C compilers. Otherwise we will have to revert
it because some xyz C compiler does not like it. All I
use in my work perfectly well accept extended function
attributes defined only in header files. Looks that at
least for some attributes it works with C++ compilers we
are using. F.e. we use extern "C" only in header files
and we do not replicate it in each .c file for function
body.

best regards,
Przemek
From maurilio.longo at libero.it  Tue Oct  7 13:08:41 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Oct  7 13:08:53 2008
Subject: [Harbour] 2008-10-07 18:42 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c9289c$Blat.v2.6.2$006b3f0c$17e4e9935544@127.0.0.1>
References: <01c9289c$Blat.v2.6.2$006b3f0c$17e4e9935544@127.0.0.1>
Message-ID: <48EB9799.1070700@libero.it>

Viktor,

sorry I forgot to remove a printf() :/

Thanks for correcting me.

Maurilio.

Szak?ts Viktor wrote:
> 2008-10-07 18:42 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * source/rtl/seconds.c
>     * Some cleanup after latest change.
>       Functionality shouldn't change. OS/2 users pls verify.
> --
> Brgds,
> Viktor
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From alex_degarate at hotmail.com  Tue Oct  7 13:32:42 2008
From: alex_degarate at hotmail.com (Alejandro de Garate)
Date: Tue Oct  7 13:32:52 2008
Subject: [Harbour] HBDOC pending update
Message-ID: <BLU149-W3227A5A14E161A3F4B2AA685380@phx.gbl>


Hi folks
I stand up from bed to send a few (important) mails and to tell some hurried people they will have to wait. 

I am with fever and neumonitis, when I will stay better I will continue with the work.

regards
Alejandro


_________________________________________________________________
Discover the new Windows Vista
http://search.msn.com/results.aspx?q=windows+vista&mkt=en-US&form=QBRE
From maurilio.longo at libero.it  Tue Oct  7 13:35:14 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Oct  7 13:35:24 2008
Subject: [Harbour] CHANGELOG: 2008-10-07 19:33 UTC+0200 Maurilio Longo
	(maurilio.longo@libero.it)
Message-ID: <48EB9DD2.6020203@libero.it>

2008-10-07 19:33 UTC+0200 Maurilio Longo (maurilio.longo@libero.it)
  * harbour/source/rtl/seconds.c
    ! fixed little typo after latest commit.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Tue Oct  7 13:42:55 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  7 13:43:07 2008
Subject: [Harbour] HBDOC pending update
In-Reply-To: <BLU149-W3227A5A14E161A3F4B2AA685380@phx.gbl>
References: <BLU149-W3227A5A14E161A3F4B2AA685380@phx.gbl>
Message-ID: <056F4EBA-DBD1-46B6-A9A5-AA58146E39EF@syenar.hu>

Hi Alejandro,

Take your time with hbdoc.

I wish you a quickest possible recovery.

Brgds,
Viktor

On 2008.10.07., at 19:32, Alejandro de Garate wrote:

>
> Hi folks
> I stand up from bed to send a few (important) mails and to tell some  
> hurried people they will have to wait.
>
> I am with fever and neumonitis, when I will stay better I will  
> continue with the work.
>
> regards
> Alejandro
>
>
> _________________________________________________________________
> Discover the new Windows Vista
> http://search.msn.com/results.aspx?q=windows+vista&mkt=en-US&form=QBRE_______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From e.m.giordano at emagsoftware.it  Tue Oct  7 13:51:37 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Oct  7 13:51:46 2008
Subject: [Harbour] HBDOC pending update
References: <BLU149-W3227A5A14E161A3F4B2AA685380@phx.gbl>
Message-ID: <12B5E241430E43B28BE962E1CE31600A@emag>


-----Messaggio Originale----- 
Da: "Alejandro de Garate" <alex_degarate@hotmail.com>
A: <harbour@harbour-project.org>
Data invio: marted? 7 ottobre 2008 19.32
Oggetto: [Harbour] HBDOC pending update


> I am with fever and neumonitis,

My best wishes of a quick recovery.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Tue Oct  7 13:42:17 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  7 13:52:37 2008
Subject: [Harbour] CHANGELOG: 2008-10-07 19:33 UTC+0200 Maurilio Longo
	(maurilio.longo@libero.it)
In-Reply-To: <48EB9DD2.6020203@libero.it>
References: <48EB9DD2.6020203@libero.it>
Message-ID: <C29C4138-D845-401B-B2DA-5D61EF1F2AD0@syenar.hu>

Thanks Maurilio.

Brgds,
Viktor

On 2008.10.07., at 19:35, Maurilio Longo wrote:

> 2008-10-07 19:33 UTC+0200 Maurilio Longo (maurilio.longo@libero.it)
>  * harbour/source/rtl/seconds.c
>    ! fixed little typo after latest commit.
>
> -- 
> __________
> |  |  | |__| Maurilio Longo
> |_|_|_|____| farmaconsult s.r.l.
>
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Oct  7 13:53:16 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  7 13:53:26 2008
Subject: [Harbour] BUG: -gc3 C warning.
Message-ID: <21308DAE-35AA-48B3-BEC7-49907F184A4D@syenar.hu>

Hi Przemek,

When compiling a certain strings with -gc3,
MSVC is complaining when compiling the resulting .c file:
"warning C4125: decimal digit terminates octal escape sequence"
this is a hb_xvmPushStringConst() call.

The source string contains an ASCII 219 char
followed by a normal decimal number, that
seems to cause the confusion. I can post some
sample source if you want.

Brgds,
Viktor

From lkrausem at shaw.ca  Tue Oct  7 13:54:19 2008
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Tue Oct  7 13:54:32 2008
Subject: [Harbour] HBDOC pending update
In-Reply-To: <BLU149-W3227A5A14E161A3F4B2AA685380@phx.gbl>
References: <BLU149-W3227A5A14E161A3F4B2AA685380@phx.gbl>
Message-ID: <48EBA24B.9010705@shaw.ca>

Alejandro:

Get better first.  Docs can always wait; health can't.

Regards,

Alejandro de Garate wrote:
> Hi folks
> I stand up from bed to send a few (important) mails and to tell some hurried people they will have to wait. 
>
> I am with fever and neumonitis, when I will stay better I will continue with the work.
>
> regards
> Alejandro
>
>
> _________________________________________________________________
> Discover the new Windows Vista
> http://search.msn.com/results.aspx?q=windows+vista&mkt=en-US&form=QBRE_______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>   

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From harbour.01 at syenar.hu  Tue Oct  7 13:42:55 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  7 14:13:50 2008
Subject: [Harbour] HBDOC pending update
In-Reply-To: <BLU149-W3227A5A14E161A3F4B2AA685380@phx.gbl>
References: <BLU149-W3227A5A14E161A3F4B2AA685380@phx.gbl>
Message-ID: <056F4EBA-DBD1-46B6-A9A5-AA58146E39EF@syenar.hu>

Hi Alejandro,

Take your time with hbdoc.

I wish you a quickest possible recovery.

Brgds,
Viktor

On 2008.10.07., at 19:32, Alejandro de Garate wrote:

>
> Hi folks
> I stand up from bed to send a few (important) mails and to tell some  
> hurried people they will have to wait.
>
> I am with fever and neumonitis, when I will stay better I will  
> continue with the work.
>
> regards
> Alejandro
>
>
> _________________________________________________________________
> Discover the new Windows Vista
> http://search.msn.com/results.aspx?q=windows+vista&mkt=en-US&form=QBRE_______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From toninhofwi at yahoo.com.br  Tue Oct  7 14:42:08 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Oct  7 14:41:03 2008
Subject: [Harbour] HBDOC pending update
In-Reply-To: <BLU149-W3227A5A14E161A3F4B2AA685380@phx.gbl>
References: <BLU149-W3227A5A14E161A3F4B2AA685380@phx.gbl>
Message-ID: <b9bne45e9neqgk6p6aaegvlj77rkb0b61r@4ax.com>

>I am with fever and neumonitis, when I will stay better I will continue with the work.

Hi Alejandro,

Take care of your health, job can wait.

God bless you.

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From druzus at acn.waw.pl  Tue Oct  7 15:27:36 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  7 15:27:47 2008
Subject: [Harbour] 2008-10-07 21:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081007192736.GA1153@34-mo7-2.acn.waw.pl>

2008-10-07 21:27 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/runner.c
  * harbour/source/vm/codebloc.c
  * harbour/source/vm/itemapi.c
    * minor casting modification

  * harbour/tests/speedtst.prg
    * added workaround for timeout parameter not working in xHb Subscribe()
      when 3-rd parameter is passed

best regards
Przemek
From druzus at acn.waw.pl  Tue Oct  7 16:03:12 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  7 16:03:23 2008
Subject: [Harbour] BUG: -gc3 C warning.
In-Reply-To: <21308DAE-35AA-48B3-BEC7-49907F184A4D@syenar.hu>
References: <21308DAE-35AA-48B3-BEC7-49907F184A4D@syenar.hu>
Message-ID: <20081007200312.GA22098@34-mo7-2.acn.waw.pl>

On Tue, 07 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> When compiling a certain strings with -gc3,
> MSVC is complaining when compiling the resulting .c file:
> "warning C4125: decimal digit terminates octal escape sequence"
> this is a hb_xvmPushStringConst() call.

And octal escape sequences use only 3 digit to make translation
deterministic so compiler should not have problem in decoding
octal sequences when follow by other digits.
Sometimes too aggressive warning level makes life harder then
necessary instead of help ;-)

If you want to pacify it then all string to C code conversion are
done inside hb_compGenCString() function (source/compiler/gencc.c)
You will find code like:
         fprintf( yyc, "\\%03o", uchr );

Change it to:
         fprintf( yyc, "\\%03o\" \"", uchr );

It will divide strings after each octal sequence or make final output
less fragmented and change it to:
         fprintf( yyc, "\\%03o%s", uchr, ulPos < ulLen - 1 &&
                  pText[ ulPos ] >= ( BYTE ) '0' &&
                  pText[ ulPos ] <= ( BYTE ) '9' ? "\" \"" : "" );

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Oct  7 18:37:59 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  7 18:38:11 2008
Subject: [Harbour] BUG: -gc3 C warning.
In-Reply-To: <20081007200312.GA22098@34-mo7-2.acn.waw.pl>
References: <21308DAE-35AA-48B3-BEC7-49907F184A4D@syenar.hu>
	<20081007200312.GA22098@34-mo7-2.acn.waw.pl>
Message-ID: <F8E1D5A2-82E0-489A-BCEE-0873DF65EAC8@syenar.hu>

Hi Przemek,

>> When compiling a certain strings with -gc3,
>> MSVC is complaining when compiling the resulting .c file:
>> "warning C4125: decimal digit terminates octal escape sequence"
>> this is a hb_xvmPushStringConst() call.
>
> And octal escape sequences use only 3 digit to make translation
> deterministic so compiler should not have problem in decoding
> octal sequences when follow by other digits.
> Sometimes too aggressive warning level makes life harder then
> necessary instead of help ;-)

Point taken :) I just can hope even if one bug can be
fixed by a signaled warning, it's worth the effort. Of
course that also means we have to dig through such less
useful cases, and maybe even compiler bugs.

[ I'll try to find some time to hunt down the remaining
-W4 warning is core/contrib. ]

> If you want to pacify it then all string to C code conversion are
> done inside hb_compGenCString() function (source/compiler/gencc.c)
> You will find code like:
>         fprintf( yyc, "\\%03o", uchr );
>
> Change it to:
>         fprintf( yyc, "\\%03o\" \"", uchr );
>
> It will divide strings after each octal sequence or make final output
> less fragmented and change it to:
>         fprintf( yyc, "\\%03o%s", uchr, ulPos < ulLen - 1 &&
>                  pText[ ulPos ] >= ( BYTE ) '0' &&
>                  pText[ ulPos ] <= ( BYTE ) '9' ? "\" \"" : "" );

Many thanks, I'll try this ASAP.

BTW, in the code there is a TODO comment of yours about
hexadecimal format to be implemented with optional switch.
I wonder why isn't it the default? Does it have any
downside compared to octal?

Brgds,
Viktor

From philb at philb.us  Tue Oct  7 19:05:50 2008
From: philb at philb.us (Phil Barnett)
Date: Tue Oct  7 19:05:59 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <20081007143855.GB31398@34-mo7-2.acn.waw.pl>
References: <19847957.post@talk.nabble.com> <200810070831.56098.philb@philb.us>
	<20081007143855.GB31398@34-mo7-2.acn.waw.pl>
Message-ID: <200810071905.50337.philb@philb.us>

On Tuesday 07 October 2008 10:38:55 am Przemyslaw Czerpak wrote:
> I think that it was a mistake in build process. F.e. you created RPMs
> where C_USR is overload or you haven't used 'install' parameter so speedtst
> was linked with old HVM library.
> If -gc3 helps then recompiling Harbour with -DHB_GUI _must_ also help
> because in such build -gc0 works like -gc3 and it additionally eliminates
> the overhead from codeblocks body.

I saw the environment parameter included in all of the gcc compile strings, so 
I think that -DHB_GUI was compiled into the compiler. Then I ran mpkg_tgz.sh 
and installed it again over the old output. Then I recompiled speedtst.

So it must be either the install didn't overwrite or the recompile didn't work 
as expected.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From philb at philb.us  Tue Oct  7 19:10:02 2008
From: philb at philb.us (Phil Barnett)
Date: Tue Oct  7 19:10:11 2008
Subject: [Harbour] HBDOC pending update
In-Reply-To: <BLU149-W3227A5A14E161A3F4B2AA685380@phx.gbl>
References: <BLU149-W3227A5A14E161A3F4B2AA685380@phx.gbl>
Message-ID: <200810071910.02724.philb@philb.us>

On Tuesday 07 October 2008 01:32:42 pm Alejandro de Garate wrote:
> Hi folks
> I stand up from bed to send a few (important) mails and to tell some
> hurried people they will have to wait.
>
> I am with fever and neumonitis, when I will stay better I will continue
> with the work.

Please, stay in bed and rest. It's the best thing you can do for yourself and 
everyone you know!

Here's wishing you a speedy recovery.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From harbour.01 at syenar.hu  Tue Oct  7 19:34:36 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  7 19:34:42 2008
Subject: [Harbour] 2008-10-08 01:31 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c928d5$Blat.v2.6.2$42670966$abcba2570fa@127.0.0.1>

2008-10-08 01:31 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/compiler/gencc.c
    * Trick to avoid MSVC -W4 warnings in -gc3 compiled C code, 
      when compiled string literal contained certain high (> 127) 
      chars followed by a digit. Thanks Przemek.
      NOTE: I've checked and hexadecimal format has even more 
            such problems.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Oct  7 20:16:22 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  7 20:16:34 2008
Subject: [Harbour] 2008-10-08 02:15 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c928db$Blat.v2.6.2$181aacc0$400e1f5dc46@127.0.0.1>

2008-10-08 02:15 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/vm/cmdarg.c
    * HB_ARGV() will now return the executable name if called 
      without a parameter.
    ! HB_ARGSTRING() fixed to return "" in some error 
      cases instead of NIL.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Tue Oct  7 20:45:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  7 20:45:59 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <200810071905.50337.philb@philb.us>
References: <19847957.post@talk.nabble.com> <200810070831.56098.philb@philb.us>
	<20081007143855.GB31398@34-mo7-2.acn.waw.pl>
	<200810071905.50337.philb@philb.us>
Message-ID: <20081008004551.GA21297@34-mo7-2.acn.waw.pl>

On Tue, 07 Oct 2008, Phil Barnett wrote:

Hi Phil,

> > I think that it was a mistake in build process. F.e. you created RPMs
> > where C_USR is overload or you haven't used 'install' parameter so speedtst
> > was linked with old HVM library.
> > If -gc3 helps then recompiling Harbour with -DHB_GUI _must_ also help
> > because in such build -gc0 works like -gc3 and it additionally eliminates
> > the overhead from codeblocks body.
> I saw the environment parameter included in all of the gcc compile strings, so 
> I think that -DHB_GUI was compiled into the compiler. Then I ran mpkg_tgz.sh 
> and installed it again over the old output. Then I recompiled speedtst.

And this could be the source of problem: mpkg_tgz.sh always rebuild
Harbour from scratch so it overloaded your previous build.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Oct  7 21:13:25 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  7 21:13:31 2008
Subject: [Harbour] harbour-project.org anon FTP
In-Reply-To: <200810060345.24344.philb@philb.us>
References: <CD51EF07-FECD-4EB8-A4B8-CC6E2641C797@syenar.hu>
	<200810052307.38628.philb@philb.us>
	<616AC212-63E0-4BF3-8E10-C3C6422CA642@syenar.hu>
	<200810060345.24344.philb@philb.us>
Message-ID: <20081008011325.GA25833@34-mo7-2.acn.waw.pl>

On Mon, 06 Oct 2008, Phil Barnett wrote:

Hi Phil,

> > Also, the dailies would IMO better be named as
> > 'harbour-nightly.[zip|tgz|bz2]'.
> The shells script is here: (line wrap got the export line)
> #!/bin/bash
> PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin; export PATH
> rm -rf /var/www/vhosts/harbour-project.org/httpdocs/co/*
> cd /var/www/vhosts/harbour-project.org/httpdocs/co
> echo Nightly Harbour Subversion Checkout
> svn export 
> https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/harbour 
> harbour

Maybe it's not a problem because now SF seems to work many times faster
then in the past but 'svn export' always makes full download.
Anyhow using 'svn update' is much less expensive.
If you have full repository then you can run bin/pack_src.sh to
create harbour-*.tar.gz archive which will contain only files
from repository (exactly the same as exported ones).
You can also use 'svn export' on your local copy of SVN repository.

> echo Zip
> rm -f harbour-nightly.temp.zip
> zip -r -q harbour-nightly.temp.zip co/

bin/pack_src.sh can also make ZIP archive if you run it with
zip parameter.
Anyhow here there is small problem: EOLs
The source code in .zip file will have chr(10) as EOL when packed
in Linux. Just like in this script.
If the code of 'svn export' is unimportant for you then you can repeat
it with:
    --native-eol CRLF
parameter before you will create ZIP archive.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Oct  7 21:41:54 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  7 21:42:00 2008
Subject: [Harbour] nmake optimization for .prg
In-Reply-To: <A6066744-FB04-47FD-8941-B38F112D2E1E@syenar.hu>
References: <6547DD43-38A4-43BB-8C9E-C1FA2B2EACA6@syenar.hu>
	<48EB70E4.1040300@mweb.co.za>
	<A6066744-FB04-47FD-8941-B38F112D2E1E@syenar.hu>
Message-ID: <20081008014154.GA18392@34-mo7-2.acn.waw.pl>

On Tue, 07 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I'd imaging two ways to achieve that:
> 1) To have a batch rule with two steps.
>    .prg -> .obj rules, with two command,
>    Harbour getting all .prg as input, creating .c files, then
>    cl.exe getting all .c files as input.
>    This seems impossible as nmake doesn't allow to
>    manipulate the dependency list in any ways, which
>    would be needed to pass a .c file list to cl.exe.

Have you tried sth like:

   set HB_CFG_FILE=hb_bld.cfg
   echo CC=$(CC) > %HB_CFG_FILE%
   echo CFLAGS=$(CLIBFLAGS) -Fo$(OBJ_DIR)\ >> %HB_CFG_FILE%
   echo VERBOSE=YES >> %HB_CFG_FILE%
   echo DELTMP=YES >> %HB_CFG_FILE%

and then:

   {$(RTL_DIR)}.prg{$(OBJ_DIR)}$(OBJEXT)::
      $(HB) $(HARBOURFLAGS) -go0 -o$(OBJ_DIR)\ $<

Though it will also call MSVC many times.

BTW what happens with this:

   {$(RTL_DIR)}.prg{$(OBJ_DIR)}$(OBJEXT)::
       $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
       $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(*B:$(OBJEXT)=.c)

$(*B:$(OBJEXT)=.c) will probably give wrong path so please try to
substitute also path.

best regards,
Przemek
From philb at philb.us  Wed Oct  8 01:49:16 2008
From: philb at philb.us (Phil Barnett)
Date: Wed Oct  8 01:49:24 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <20081008004551.GA21297@34-mo7-2.acn.waw.pl>
References: <19847957.post@talk.nabble.com> <200810071905.50337.philb@philb.us>
	<20081008004551.GA21297@34-mo7-2.acn.waw.pl>
Message-ID: <200810080149.16680.philb@philb.us>

On Tuesday 07 October 2008 08:45:51 pm Przemyslaw Czerpak wrote:
> > I saw the environment parameter included in all of the gcc compile
> > strings, so I think that -DHB_GUI was compiled into the compiler. Then I
> > ran mpkg_tgz.sh and installed it again over the old output. Then I
> > recompiled speedtst.
>
> And this could be the source of problem: mpkg_tgz.sh always rebuild
> Harbour from scratch so it overloaded your previous build.

Well, I see that I worded that badly. I saw that right after I sent it.

I did this:

export -DHB_GUI
mpkg_tgz.sh

(I observed that -DHB_GUI was in the compile strings)

Installled the resulting tarball

Recompiled the speedtst

ran it with poor results.

Is there a better way to recompile and install on linux?

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From dmacias at mail.udg.mx  Wed Oct  8 04:53:13 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Oct  8 04:53:12 2008
Subject: [Harbour] Re: Harbour under OS/2
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <48EC74F9.9080102@mail.udg.mx>

Current Harbour under OS/2 build/run with some warnings:

------------------------
../../seconds.c: In function `hb_secondsCPU':
../../seconds.c:320: warning: implicit declaration of function `_getpid'
../../seconds.c:325: warning: initialization makes pointer from integer
without a cast
------------------------

David Macias



From harbour.01 at syenar.hu  Wed Oct  8 05:01:19 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  8 05:01:31 2008
Subject: [Harbour] nmake optimization for .prg
In-Reply-To: <20081008014154.GA18392@34-mo7-2.acn.waw.pl>
References: <6547DD43-38A4-43BB-8C9E-C1FA2B2EACA6@syenar.hu>
	<48EB70E4.1040300@mweb.co.za>
	<A6066744-FB04-47FD-8941-B38F112D2E1E@syenar.hu>
	<20081008014154.GA18392@34-mo7-2.acn.waw.pl>
Message-ID: <CEF61C6A-238D-475F-BB17-5BA51FC7049A@syenar.hu>

Hi Przemek,

> Have you tried sth like:
>
>   set HB_CFG_FILE=hb_bld.cfg
>   echo CC=$(CC) > %HB_CFG_FILE%
>   echo CFLAGS=$(CLIBFLAGS) -Fo$(OBJ_DIR)\ >> %HB_CFG_FILE%
>   echo VERBOSE=YES >> %HB_CFG_FILE%
>   echo DELTMP=YES >> %HB_CFG_FILE%
>
> and then:
>
>   {$(RTL_DIR)}.prg{$(OBJ_DIR)}$(OBJEXT)::
>      $(HB) $(HARBOURFLAGS) -go0 -o$(OBJ_DIR)\ $<
> Though it will also call MSVC many times.

This is a very good idea, if harbour.exe could
make one call only to the C compiler, with
a list of .c files. Maybe controllable with a
setting in the .cfg, in case some C compilers
wouldn't support this feature. This would make
-go feature much more useful.

BTW, if I use -gc0 without a .cfg in current (or harbour.exe)
dir, it gives an:
"Error: Can't find harbour.cfg file in C:\Program Files\Far."
which is the first element in my path, so it seems the
full path list is not searched.

> BTW what happens with this:
>
>   {$(RTL_DIR)}.prg{$(OBJ_DIR)}$(OBJEXT)::
>       $(HB) $(HARBOURFLAGS) -o$(OBJ_DIR)\ $<
>       $(CC) $(CLIBFLAGS) -Fo$(OBJ_DIR)\ $(*B:$(OBJEXT)=.c)
>
> $(*B:$(OBJEXT)=.c) will probably give wrong path so please try to
> substitute also path.

I guess this wouldn't work, because nmake seems to be
very clever to detect any attempts to modify the dependency
list (at least it could detect all such attempts of mine),
it this case however, it complains about '=' missing in macro.

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Oct  8 05:10:19 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  8 05:10:25 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <200810080149.16680.philb@philb.us>
References: <19847957.post@talk.nabble.com> <200810071905.50337.philb@philb.us>
	<20081008004551.GA21297@34-mo7-2.acn.waw.pl>
	<200810080149.16680.philb@philb.us>
Message-ID: <20081008091019.GA15294@34-mo7-2.acn.waw.pl>

On Wed, 08 Oct 2008, Phil Barnett wrote:

Hi Phil,

> Well, I see that I worded that badly. I saw that right after I sent it.
> I did this:
> export -DHB_GUI
> mpkg_tgz.sh
> (I observed that -DHB_GUI was in the compile strings)
> Installled the resulting tarball
> Recompiled the speedtst
> ran it with poor results.
> Is there a better way to recompile and install on linux?

OK. If possible please try current SVN build.

best regards,
Przemek
From maurilio.longo at libero.it  Wed Oct  8 06:30:15 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Oct  8 07:27:47 2008
Subject: [Harbour] CHANGELOG: 2008-10-08 12:28 UTC+0200 Maurilio Longo
	(maurilio.longo@libero.it)
Message-ID: <48EC8BB7.3040908@libero.it>

2008-10-08 12:28 UTC+0200 Maurilio Longo (maurilio.longo@libero.it)
  * harbour/source/rtl/seconds.c
    ! removed a couple of warnings.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Wed Oct  8 08:37:12 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  8 08:37:20 2008
Subject: [Harbour] 2008-10-08 14:36 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92942$Blat.v2.6.2$96822d06$1788372afcc6@127.0.0.1>

2008-10-08 14:36 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/bld.bat
  * bin/bld_os2.cmd
    + Added support for HB_INSTALL_PREFIX.
    + Added experimental support for 'set HB_MT=MT' flag, 
      to create an MT executable.

  * source/rtl/seconds.c
    * Formatting.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Oct  8 08:57:50 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  8 08:58:03 2008
Subject: [Harbour] 2008-10-08 14:57 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92945$Blat.v2.6.2$78489b1a$56c9920adb0@127.0.0.1>

2008-10-08 14:57 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * contrib/mtpl_b32.mak
    + Added -Q switch to BCC defaults. This will print 
      verbose error messages.
--
Brgds,
Viktor

From gerrylist at drouillard.ca  Wed Oct  8 09:18:15 2008
From: gerrylist at drouillard.ca (Gerald Drouillard)
Date: Wed Oct  8 09:18:43 2008
Subject: [Harbour] Suggested Tbrowse Changes
Message-ID: <48ECB317.6060900@drouillard.ca>

I am running Harbour's tbrowse in the latest version of xHarbour in the 
following issues I have found:

METHOD refreshAll() CLASS TBROWSE

    ::setUnstable()
// The following 2 lines do not follow clipper behavior:
//   Eval( ::bSkipBlock, 1 - ::nBufferPos )
//   ::nBufferPos := 1
    ::lFrames := .T.
    ::lRefresh := .T.

    RETURN Self

Not sure if the following is a difference in xhb/hb:

METHOD stabilize() CLASS TBROWSE
....
          FOR EACH lStat, lDisp IN ::aCellStatus, ::aDispStatus DESCEND
             IF !lStat

                IF lRead
                   RETURN .F.
                ENDIF
//this line was changed in xhb to work correctly:
                lRead := ::readRecord( nrowcount+lStat:__enumIndex()+1 )		
             ENDIF
             IF lDisp
                ::dispRow( nrowcount+lDisp:__enumIndex()+1 )
             ENDIF
          NEXT

lStat:__enumIndex() returns a negative number in xhb when using 
"DESCEND" and it seems like we are trying to paint from the bottom up.

-- 
Regards
--------------------------------------
Gerald Drouillard
Technology Architect
Drouillard & Associates, Inc.
http://www.Drouillard.biz
From harbour.01 at syenar.hu  Wed Oct  8 09:20:02 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  8 09:20:13 2008
Subject: [Harbour] 2008-10-08 15:19 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92948$Blat.v2.6.2$924398dc$838eb8ec7c0@127.0.0.1>

2008-10-08 15:19 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_gnu.bat
    ! HARBOURDIR -> HB_INSTALL_PREFIX
--
Brgds,
Viktor

From dbtopas at dbtopas.lt  Wed Oct  8 09:38:42 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct  8 09:38:50 2008
Subject: [Harbour] __DBPACK bug in 1.0.1
Message-ID: <48ECB7E2.9080604@dbtopas.lt>

Hi,


after moving from some old Harbour version to 1.0.1 in production 
environment my app started to GPF on __DBPACK.

I've debugged code a little bit. After evaluation of
    SELF_EVALBLOCK( ( AREAP ) pArea, pBlock )
inside hb_dbfPack(), the result of HB_IS_BLOCK( pBlock ) is FALSE, 
because hb_vmEvalBlockOrMacro() releases pArea->valResult (it contains 
this codeblock). Some older Harbour code works OK.

Self-contained sample (not necessarily GPFs, but prints wrong results):
PROC main()
   DBCREATE("test124", {{"F1", "C", 10, 0}})
   USE test124 NEW EXCLUSIVE
   DBAPPEND()
   DBAPPEND()
   DBAPPEND()
   DBAPPEND()
   __DBPACK({|| QQOUT(".")}, 1) // Only one "." is printed!!!
   DBCLOSEALL()
RETURN


Best regards,
Mindaugas



From teo at windtelsoft.com  Wed Oct  8 10:43:12 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Wed Oct  8 10:47:17 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <200810080149.16680.philb@philb.us>
References: <19847957.post@talk.nabble.com>
	<20081008004551.GA21297@34-mo7-2.acn.waw.pl>
	<200810080149.16680.philb@philb.us>
Message-ID: <200810080943.12564.teo@windtelsoft.com>

On Wednesday 08 October 2008 12:49:16 am Phil Barnett wrote:
> On Tuesday 07 October 2008 08:45:51 pm Przemyslaw Czerpak wrote:
> > > I saw the environment parameter included in all of the gcc compile
> > > strings, so I think that -DHB_GUI was compiled into the compiler. Then
> > > I ran mpkg_tgz.sh and installed it again over the old output. Then I
> > > recompiled speedtst.
> >
> > And this could be the source of problem: mpkg_tgz.sh always rebuild
> > Harbour from scratch so it overloaded your previous build.
>
> Well, I see that I worded that badly. I saw that right after I sent it.
>
> I did this:
>
> export -DHB_GUI
> mpkg_tgz.sh
>
> (I observed that -DHB_GUI was in the compile strings)
>
> Installled the resulting tarball
>
> Recompiled the speedtst
>
> ran it with poor results.
>
> Is there a better way to recompile and install on linux?

Sry for jump in.

Hello Phil,

I see that you are use a rpm based distro (Fedora 9) so you can build the 
binaries and install it as rpm's. To create the Harbour rpm's, you just need 
to send the following command in an console:

$ ./mpkg_rpm.sh

this method requires that you have also installed the "rpm-build" package, 
which can be installed by sending the following command in an console (as 
root user):

# yum install rpm-build

It is possible that you are asked for other packages, like "slang-devel". I 
don't know if this has changed in the current SVN. Anyway you can install it 
with yum.

Once that the packages are build (the ending process for rpm-build shows where 
the packages are created, usually your "/home/Phil/RPM/RPMS/i386" dir, 
assuming that your username is Phil) you just need to send (as root) the 
following command in an console from the place where are the Harbour 
packages:

# rpm -Uvh harbour*rpm

If you wish to change some compile time parameters, you can change it in the 
harbour.spec file, i.e. to add the "-DHB_GUI" define, (currently in the line 
70) search for the "%define hb_cflag" text and change the values in the 
export definition there.


best regards

Teo
From dbtopas at dbtopas.lt  Wed Oct  8 11:36:38 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct  8 11:36:45 2008
Subject: [Harbour] Exception handling
Message-ID: <48ECD386.2020601@dbtopas.lt>

Hi,


currently exception handling is set (hb_vmSetExceptionHandler() is 
called) right before evaluation of main procedure. Shouldn't it be 
initialized before _APPMAIN processing or before hb_vmDoInitFunctions()?

My problem is that I use _APPMAIN to initialize application environment, 
including error system capable to sends errors (also GPFs) to my 
mailbox. Now hb_vmSetExceptionHandler() overloads my handler and GPFs 
lives in hb_out.log at customers computer instead of my mailbox.


Best regards,
Mindaugas
From harbour.01 at syenar.hu  Wed Oct  8 11:43:46 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  8 11:44:06 2008
Subject: [Harbour] Exception handling
In-Reply-To: <48ECD386.2020601@dbtopas.lt>
References: <48ECD386.2020601@dbtopas.lt>
Message-ID: <5E8EA284-F02E-4AEF-8909-12FADB0DCDFE@syenar.hu>

Hi Mindaugas,

On 2008.10.08., at 17:36, Mindaugas Kavaliauskas wrote:

> Hi,
>
> currently exception handling is set (hb_vmSetExceptionHandler() is  
> called) right before evaluation of main procedure. Shouldn't it be  
> initialized before _APPMAIN processing or before  
> hb_vmDoInitFunctions()?

I think it should.

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Oct  8 14:19:59 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  8 14:20:04 2008
Subject: [Harbour] Exception handling
In-Reply-To: <48ECD386.2020601@dbtopas.lt>
References: <48ECD386.2020601@dbtopas.lt>
Message-ID: <20081008181959.GA28094@34-mo7-2.acn.waw.pl>

On Wed, 08 Oct 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> currently exception handling is set (hb_vmSetExceptionHandler() is called) 
> right before evaluation of main procedure. Shouldn't it be initialized 
> before _APPMAIN processing or before hb_vmDoInitFunctions()?

It is set before _APPMAIN execution but after INIT procedures.

> My problem is that I use _APPMAIN to initialize application environment, 
> including error system capable to sends errors (also GPFs) to my mailbox. 
> Now hb_vmSetExceptionHandler() overloads my handler and GPFs lives in 
> hb_out.log at customers computer instead of my mailbox.

If you have hb_out.log then your application GPFs in one of INIT
procedure. hb_vmSetExceptionHandler() is not executed after _APPMAIN()
so such situation as you described is impossible.

Anyhow we should probably move hb_vmSetExceptionHandler() before
INIT procedures and hb_vmUnsetExceptionHandler() to hb_vmQuit() so
also EXIT procedures will be covered by it. On some platforms it's
necessary to restore exception handle to avoid GPF on EXIT.

best regards,
Przemek
From toninhofwi at yahoo.com.br  Wed Oct  8 14:31:23 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Oct  8 14:30:13 2008
Subject: [Harbour] rddads: possible problem
Message-ID: <3fupe49hrii3iguk0t8a7ofa8rrrp0ricp@4ax.com>

Hi ppl,

Please I need understand:

*if* for some reaction AdsGotoTop() function fail in ads server, this
function return !AE_SUCCESS.  In the code below from ads1.c, there is
no need check this?

---cut---
static ERRCODE adsGoTop( ADSAREAP pArea )
{
   HB_TRACE(HB_TR_DEBUG, ("adsGoTop(%p)", pArea));

   /* reset any pending relations */
   SELF_RESETREL( pArea );

   pArea->fTop = TRUE;
   pArea->fBottom = FALSE;
   AdsGotoTop( (pArea->hOrdCurrent) ? pArea->hOrdCurrent :
pArea->hTable );

   hb_adsUpdateAreaFlags( pArea );

   /* Force relational movement in child WorkAreas */
   if( pArea->lpdbRelations )
      SELF_SYNCCHILDREN( ( AREAP ) pArea );

   return SELF_SKIPFILTER( ( AREAP ) pArea, 1 );
}
---cut---

IIUC the correct is:

---cut---
   ulRetVal =    AdsGotoTop( (pArea->hOrdCurrent) ? pArea->hOrdCurrent
: pArea->hTable );
      if( u32RetVal != AE_SUCCESS )
      {
         hb_errRT_DBCMD( error.code.here );
         return FAILURE;
      }
---cut---


Thanks in advance and best regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From harbour.01 at syenar.hu  Wed Oct  8 14:48:31 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  8 14:48:40 2008
Subject: [Harbour] 2008-10-08 20:33 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92976$Blat.v2.6.2$75d88f3a$17c07324f9d0@127.0.0.1>

2008-10-08 20:33 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/examples/hscript/hscript.prg
  * source/compiler/gencobj.c
  * source/compiler/genobj32.c
    * Formatting, minor cleanups.
--
Brgds,
Viktor

From dbtopas at dbtopas.lt  Wed Oct  8 15:57:34 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct  8 15:57:43 2008
Subject: [Harbour] Exception handling
In-Reply-To: <20081008181959.GA28094@34-mo7-2.acn.waw.pl>
References: <48ECD386.2020601@dbtopas.lt>
	<20081008181959.GA28094@34-mo7-2.acn.waw.pl>
Message-ID: <48ED10AE.5010101@dbtopas.lt>

Przemyslaw Czerpak wrote:
>> currently exception handling is set (hb_vmSetExceptionHandler() is called) 
>> right before evaluation of main procedure. Shouldn't it be initialized 
>> before _APPMAIN processing or before hb_vmDoInitFunctions()?
> 
> It is set before _APPMAIN execution but after INIT procedures.

Yes, sorry. I'm using CLIPINIT(), not _APPMAIN(). Perhaps I must check 
if some INIT functions uses any "service" from initialized application 
environment and I can move it to _APPMAIN(), but the question about 
exception handler initialization remains.


Best regards,
Mindaugas
From druzus at acn.waw.pl  Wed Oct  8 18:18:19 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  8 18:18:26 2008
Subject: [Harbour] 2008-10-09 00:17 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081008221819.GA28936@34-mo7-2.acn.waw.pl>

2008-10-09 00:17 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbtypes.h
  * harbour/source/vm/maindllp.c
    ! updated casting for current SVN code
      [TOMERGE 1.0]

  * harbour/include/hbthread.h
  * harbour/source/vm/hvm.c
  * harbour/source/vm/thread.c
    + added .prg function
         hb_threadWait( <pThID> | <apThID>, [ <nTimeOut> ] [, <lAll> ] )
               => <nThInd> | <nThCount> | 0
      This function wait for <nTimeOut> seconds (default infinite wait)
      until one or all (controlled by <lAll> parameter) of given HVM threads
      will have finished execution in HVM area. It does not join the threads.
      It returns index to 1-st thread which has finished execution (default)
      or number of threads which has finished in given time period when lAll
      is .T.

best regards
Przemek
From druzus at acn.waw.pl  Wed Oct  8 19:01:37 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  8 19:01:40 2008
Subject: [Harbour] Suggested Tbrowse Changes
In-Reply-To: <48ECB317.6060900@drouillard.ca>
References: <48ECB317.6060900@drouillard.ca>
Message-ID: <20081008230137.GA10949@34-mo7-2.acn.waw.pl>

On Wed, 08 Oct 2008, Gerald Drouillard wrote:

Hi Gerald,

> I am running Harbour's tbrowse in the latest version of xHarbour in the 
> following issues I have found:
> METHOD refreshAll() CLASS TBROWSE
>    ::setUnstable()
> // The following 2 lines do not follow clipper behavior:
> //   Eval( ::bSkipBlock, 1 - ::nBufferPos )
> //   ::nBufferPos := 1
>    ::lFrames := .T.
>    ::lRefresh := .T.
>    RETURN Self

Do you have any code example?
Even this simple test:
   proc main()
      local o:=tbrowsenew()
      o:skipBlock:={|x,y,z|qout(x,y,z),x}
      o:refreshAll()
   return

shows that Clipper evaluates skipBlock() inside refresh all.
I've tried with CL5.2 and CL5.3 - both gives the same results
as Harbour. Also such things should be caught by Viktor's
TBROWSE regression test and I do not remember any problems
here.

> Not sure if the following is a difference in xhb/hb:
> METHOD stabilize() CLASS TBROWSE
> ....
>          FOR EACH lStat, lDisp IN ::aCellStatus, ::aDispStatus DESCEND
>             IF !lStat
>
>                IF lRead
>                   RETURN .F.
>                ENDIF
> //this line was changed in xhb to work correctly:
>                lRead := ::readRecord( nrowcount+lStat:__enumIndex()+1 )		
>             ENDIF
>             IF lDisp
>                ::dispRow( nrowcount+lDisp:__enumIndex()+1 )
>             ENDIF
>          NEXT
>
> lStat:__enumIndex() returns a negative number in xhb when using "DESCEND" 
> and it seems like we are trying to paint from the bottom up.

xHarbour does not support extended FOR EACH functionality like in Harbour.
It has some emulation using preprocessor directives but it does not replicate
Harbour behavior. The above is one of such examples. In Harbour this code is:

         FOR EACH lStat, lDisp IN ::aCellStatus, ::aDispStatus DESCEND
            IF !lStat
               IF lRead
                  RETURN .F.
               ENDIF
               lRead := ::readRecord( lStat:__enumIndex() )
            ENDIF
            IF lDisp
               ::dispRow( lDisp:__enumIndex() )
            ENDIF
         NEXT

reads and shows records from the top to down.

I cannot say how tbrowse code will work in xHarbour. Harbour does not
have some important functionality which exist only in Harbour and maybe
used by this code in some places.
Anyhow if you will find any incompatibilities to Clipper then please
send a message here. Maybe sth has to be fixed yet.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Oct  8 19:14:11 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  8 19:14:17 2008
Subject: [Harbour] 2008-10-09 01:33 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9299b$Blat.v2.6.2$92afc5f4$1fdcfb90b8d6@127.0.0.1>

2008-10-09 01:33 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbextern.ch
    + Added HB_THREADWAIT()
--
Brgds,
Viktor

From druzus at acn.waw.pl  Wed Oct  8 19:31:43 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  8 19:31:50 2008
Subject: [Harbour] 2008-10-09 01:33 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c9299b$Blat.v2.6.2$92afc5f4$1fdcfb90b8d6@127.0.0.1>
References: <01c9299b$Blat.v2.6.2$92afc5f4$1fdcfb90b8d6@127.0.0.1>
Message-ID: <20081008233143.GA31130@34-mo7-2.acn.waw.pl>

On Thu, 09 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> 2008-10-09 01:33 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * include/hbextern.ch
>     + Added HB_THREADWAIT()

Thank you very much and sorry. I still forget about hbextern.ch :-(

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Oct  8 19:59:06 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  8 19:59:17 2008
Subject: [Harbour] 2008-10-09 01:33 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20081008233143.GA31130@34-mo7-2.acn.waw.pl>
References: <01c9299b$Blat.v2.6.2$92afc5f4$1fdcfb90b8d6@127.0.0.1>
	<20081008233143.GA31130@34-mo7-2.acn.waw.pl>
Message-ID: <D671F9B5-AAB9-414E-B7D3-F06CF41E8C11@syenar.hu>

Hi Przemek,

No porblem at all. hbextern.ch is a major
maintenance PITA in Harbour unfortunately.

I just have no idea how to replace it with
a no-maintenance solution, or with something
which needs to be done only once for each
official release.

We have the hbextern tool for this, but it
doesn't know about #if HB_COMPAT_* and similar
conditionals in code. That would be solved
however by sorting such .prg parts into
separate "dialect" libs (for the most part).
Or by extending the tool to track these #ifdefs.

BTW, do we need HB_CDP_SUPPORT_OFF support,
besides marking those code parts as such?

Brgds,
Viktor

On 2008.10.09., at 1:31, Przemyslaw Czerpak wrote:

> On Thu, 09 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> 2008-10-09 01:33 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>  * include/hbextern.ch
>>    + Added HB_THREADWAIT()
>
> Thank you very much and sorry. I still forget about hbextern.ch :-(
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From toninhofwi at yahoo.com.br  Wed Oct  8 20:32:49 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Oct  8 20:26:05 2008
Subject: [Harbour] rddads: possible problem
In-Reply-To: <3fupe49hrii3iguk0t8a7ofa8rrrp0ricp@4ax.com>
References: <3fupe49hrii3iguk0t8a7ofa8rrrp0ricp@4ax.com>
Message-ID: <42kqe4dddi7thoo8qhgd2e95ga8n2sc1pq@4ax.com>

Sorry, wrote too fast, the correct code is this:

---cut---
    u32RetVal = AdsGotoTop( (pArea->hOrdCurrent) ? pArea->hOrdCurrent
: pArea->hTable );
      if( u32RetVal != AE_SUCCESS )
      {
         hb_errRT_DBCMD( error.code.here );
         return FAILURE;
      }
---cut---

Regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From druzus at acn.waw.pl  Wed Oct  8 21:27:11 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  8 21:27:13 2008
Subject: [Harbour] 2008-10-09 03:26 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081009012711.GA908@34-mo7-2.acn.waw.pl>

2008-10-09 03:26 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcompdf.h
  * harbour/source/compiler/hbmain.c
    % do not add dummy entries to symbol table for functions declared
      as dynamic - it allows to include hbdynamic.ch with list of all
      supported functions by application and/or harbour.dll to any .prg
      file which will be used to create shared library (.dll, .so, ...)
      without any memory overhead.

  * harbour/source/compiler/genc.c
    % do not generate unnecessary HB_FUNC_EXTERN() declarations for
      function declared as DYNAMIC

best regards
Przemek
From philb at philb.us  Thu Oct  9 01:25:41 2008
From: philb at philb.us (Phil Barnett)
Date: Thu Oct  9 01:25:51 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <20081008091019.GA15294@34-mo7-2.acn.waw.pl>
References: <19847957.post@talk.nabble.com> <200810080149.16680.philb@philb.us>
	<20081008091019.GA15294@34-mo7-2.acn.waw.pl>
Message-ID: <200810090125.41593.philb@philb.us>

On Wednesday 08 October 2008 05:10:19 am Przemyslaw Czerpak wrote:

> OK. If possible please try current SVN 

[philb@SunSpot harbour]$ export C_USR=-DHB_GUI

[philb@SunSpot harbour]$ mpkg_tgz.sh

install resulting tarball as root

[philb@SunSpot harbour]$ cd tests
[philb@SunSpot tests]$ hbmk -n -w -es2 -mt speedtst
Harbour 1.1.0dev (Rev. 9564)                       
Copyright (c) 1999-2008, http://www.harbour-project.org/
Compiling 'speedtst.prg'...                             
Lines 876, Functions/Procedures 72                      
Generating C source output to 'speedtst.c'... Done.     
[philb@SunSpot tests]$ for i in 1 2 4 6 8; 
do ./speedtst --exclude=mem --scale --thread=$i; done

10/09/08 00:57:00 Linux 2.6.26.3-29.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
THREADS: 1                                           
N_LOOPS: 1000000                                     
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  1 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.16   0.14 ->  1.15
[ T002: x := L_N ]____________________________________  0.16   0.14 ->  1.14
[ T003: x := L_D ]____________________________________  0.14   0.14 ->  1.00
[ T004: x := S_C ]____________________________________  0.14   0.14 ->  1.01
[ T005: x := S_N ]____________________________________  0.14   0.15 ->  0.90
[ T006: x := S_D ]____________________________________  0.14   0.14 ->  1.00
[ T007: x := M_C ]____________________________________  0.15   0.15 ->  0.98
[ T008: x := M_N ]____________________________________  0.14   0.14 ->  1.00
[ T009: x := M_D ]____________________________________  0.16   0.15 ->  1.06
[ T010: x := P_C ]____________________________________  0.15   0.15 ->  1.00
[ T011: x := P_N ]____________________________________  0.19   0.15 ->  1.31
[ T012: x := P_D ]____________________________________  0.14   0.18 ->  0.75
[ T013: x := F_C ]____________________________________  0.27   0.28 ->  0.97
[ T014: x := F_N ]____________________________________  0.31   0.31 ->  0.98
[ T015: x := F_D ]____________________________________  0.19   0.18 ->  1.02
[ T016: x := o:GenCode ]______________________________  0.29   0.29 ->  0.98
[ T017: x := o[8] ]___________________________________  0.21   0.22 ->  0.96
[ T018: round( i / 1000, 2 ) ]________________________  0.44   0.43 ->  1.02
[ T020: val( s ) ]____________________________________  0.38   0.38 ->  1.00
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  0.62   0.62 ->  1.00
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.42   0.42 ->  1.00
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  0.42   0.42 ->  1.00
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  0.53   0.54 ->  0.98
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  0.50   0.50 ->  1.00
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  0.50   0.50 ->  1.00
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  0.52   0.52 ->  1.00
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  0.52   0.50 ->  1.03
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  0.53   0.53 ->  1.00
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  0.51   0.52 ->  0.98
[ T039: ascan( a, i % 16 ) ]__________________________  0.54   0.53 ->  1.00
[ T042: x := a ]______________________________________  0.15   0.15 ->  1.00
[ T044: f0() ]________________________________________  0.24   0.24 ->  1.00
[ T045: f1( i ) ]_____________________________________  0.30   0.31 ->  0.97
[ T046: f2( c[1...8] ) ]______________________________  0.31   0.29 ->  1.05
[ T047: f2( c[1...40000] ) ]__________________________  0.29   0.30 ->  0.97
[ T048: f2( @c[1...40000] ) ]_________________________  0.29   0.29 ->  1.00
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.35   0.34 ->  1.02
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  0.63   0.63 ->  1.01
[ T051: f2( a ) ]_____________________________________  0.30   0.31 ->  0.95
============================================================================
[   TOTAL   ]_________________________________________ 12.33  12.32 ->  1.00
============================================================================
[ total application time: ]....................................24.55        
[ total real time: ]...........................................24.65        

10/09/08 00:57:25 Linux 2.6.26.3-29.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
THREADS: 2                                           
N_LOOPS: 1000000                                     
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  2 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.31   0.51 ->  0.60
[ T002: x := L_N ]____________________________________  0.30   0.35 ->  0.85
[ T003: x := L_D ]____________________________________  0.30   0.35 ->  0.87
[ T004: x := S_C ]____________________________________  0.29   0.62 ->  0.47
[ T005: x := S_N ]____________________________________  0.28   0.35 ->  0.82
[ T006: x := S_D ]____________________________________  0.28   0.34 ->  0.83
[ T007: x := M_C ]____________________________________  0.31   0.48 ->  0.65
[ T008: x := M_N ]____________________________________  0.30   0.38 ->  0.79
[ T009: x := M_D ]____________________________________  0.30   0.35 ->  0.86
[ T010: x := P_C ]____________________________________  0.31   0.43 ->  0.72
[ T011: x := P_N ]____________________________________  0.33   0.38 ->  0.88
[ T012: x := P_D ]____________________________________  0.33   0.35 ->  0.94
[ T013: x := F_C ]____________________________________  0.59   0.49 ->  1.19
[ T014: x := F_N ]____________________________________  0.64   0.50 ->  1.27
[ T015: x := F_D ]____________________________________  0.44   0.40 ->  1.10
[ T016: x := o:GenCode ]______________________________  0.59   0.74 ->  0.80
[ T017: x := o[8] ]___________________________________  0.41   0.53 ->  0.78
[ T018: round( i / 1000, 2 ) ]________________________  0.90   0.79 ->  1.15
[ T020: val( s ) ]____________________________________  0.76   0.67 ->  1.13
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  1.31   1.24 ->  1.06
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.83   1.15 ->  0.72
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  0.80   1.03 ->  0.77
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  1.14   1.39 ->  0.82
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  1.13   1.31 ->  0.86
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  1.01   1.25 ->  0.81
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  1.01   1.24 ->  0.81
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  1.02   1.24 ->  0.82
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  1.01   1.25 ->  0.81
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  1.02   1.24 ->  0.82
[ T039: ascan( a, i % 16 ) ]__________________________  0.98   0.92 ->  1.07
[ T042: x := a ]______________________________________  0.31   0.51 ->  0.61
[ T044: f0() ]________________________________________  0.46   0.68 ->  0.68
[ T045: f1( i ) ]_____________________________________  0.58   0.80 ->  0.73
[ T046: f2( c[1...8] ) ]______________________________  0.65   0.89 ->  0.73
[ T047: f2( c[1...40000] ) ]__________________________  0.63   0.90 ->  0.70
[ T048: f2( @c[1...40000] ) ]_________________________  0.58   0.85 ->  0.68
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.69   1.03 ->  0.67
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  1.28   1.61 ->  0.80
[ T051: f2( a ) ]_____________________________________  0.57   0.90 ->  0.63
============================================================================
[   TOTAL   ]_________________________________________ 24.98  30.42 ->  0.82
============================================================================
[ total application time: ]....................................85.11        
[ total real time: ]...........................................55.40        

10/09/08 00:58:20 Linux 2.6.26.3-29.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
THREADS: 4                                           
N_LOOPS: 1000000                                     
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  4 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.65   1.29 ->  0.50
[ T002: x := L_N ]____________________________________  0.61   0.92 ->  0.67
[ T003: x := L_D ]____________________________________  0.58   0.91 ->  0.63
[ T004: x := S_C ]____________________________________  0.56   1.95 ->  0.29
[ T005: x := S_N ]____________________________________  0.56   0.90 ->  0.62
[ T006: x := S_D ]____________________________________  0.55   0.94 ->  0.58
[ T007: x := M_C ]____________________________________  0.62   1.46 ->  0.43
[ T008: x := M_N ]____________________________________  0.64   0.98 ->  0.65
[ T009: x := M_D ]____________________________________  0.61   0.94 ->  0.65
[ T010: x := P_C ]____________________________________  0.61   1.09 ->  0.56
[ T011: x := P_N ]____________________________________  0.56   0.97 ->  0.57
[ T012: x := P_D ]____________________________________  0.58   1.07 ->  0.54
[ T013: x := F_C ]____________________________________  1.11   1.26 ->  0.88
[ T014: x := F_N ]____________________________________  1.26   0.94 ->  1.33
[ T015: x := F_D ]____________________________________  0.75   0.88 ->  0.86
[ T016: x := o:GenCode ]______________________________  1.18   1.55 ->  0.76
[ T017: x := o[8] ]___________________________________  0.86   1.32 ->  0.65
[ T018: round( i / 1000, 2 ) ]________________________  1.70   1.80 ->  0.94
[ T020: val( s ) ]____________________________________  1.57   1.53 ->  1.03
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  2.63   2.83 ->  0.93
[ T024: eval( bc := { || i % 16 } ) ]_________________  1.71   2.78 ->  0.62
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  1.62   2.36 ->  0.69
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  2.21   3.31 ->  0.67
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  2.05   3.10 ->  0.66
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  2.05   3.13 ->  0.66
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  2.03   3.14 ->  0.65
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  2.03   3.04 ->  0.67
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  2.06   3.13 ->  0.66
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  2.04   3.00 ->  0.68
[ T039: ascan( a, i % 16 ) ]__________________________  2.11   2.01 ->  1.05
[ T042: x := a ]______________________________________  0.66   1.37 ->  0.48
[ T044: f0() ]________________________________________  1.02   1.65 ->  0.62
[ T045: f1( i ) ]_____________________________________  1.19   2.08 ->  0.58
[ T046: f2( c[1...8] ) ]______________________________  1.20   2.15 ->  0.56
[ T047: f2( c[1...40000] ) ]__________________________  1.19   2.16 ->  0.55
[ T048: f2( @c[1...40000] ) ]_________________________  1.20   2.17 ->  0.55
[ T049: f2( @c[1...40000] ), c2 := c ]________________  1.42   2.55 ->  0.55
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  2.63   4.09 ->  0.64
[ T051: f2( a ) ]_____________________________________  1.20   2.20 ->  0.54
============================================================================
[   TOTAL   ]_________________________________________ 49.80  74.94 ->  0.66
============================================================================
[ total application time: ]...................................341.53        
[ total real time: ]..........................................124.75        

10/09/08 01:00:25 Linux 2.6.26.3-29.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
THREADS: 6                                           
N_LOOPS: 1000000                                     
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  6 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.94   1.89 ->  0.50
[ T002: x := L_N ]____________________________________  0.95   1.49 ->  0.64
[ T003: x := L_D ]____________________________________  0.88   1.50 ->  0.59
[ T004: x := S_C ]____________________________________  0.96   2.32 ->  0.41
[ T005: x := S_N ]____________________________________  0.92   1.51 ->  0.61
[ T006: x := S_D ]____________________________________  0.91   1.46 ->  0.62
[ T007: x := M_C ]____________________________________  0.94   1.95 ->  0.48
[ T008: x := M_N ]____________________________________  0.97   1.54 ->  0.63
[ T009: x := M_D ]____________________________________  0.95   1.59 ->  0.60
[ T010: x := P_C ]____________________________________  1.04   1.57 ->  0.66
[ T011: x := P_N ]____________________________________  1.04   1.55 ->  0.67
[ T012: x := P_D ]____________________________________  0.92   1.47 ->  0.63
[ T013: x := F_C ]____________________________________  1.70   1.99 ->  0.85
[ T014: x := F_N ]____________________________________  1.97   1.42 ->  1.39
[ T015: x := F_D ]____________________________________  1.20   1.43 ->  0.84
[ T016: x := o:GenCode ]______________________________  1.78   2.33 ->  0.77
[ T017: x := o[8] ]___________________________________  1.31   2.07 ->  0.63
[ T018: round( i / 1000, 2 ) ]________________________  2.66   2.71 ->  0.98
[ T020: val( s ) ]____________________________________  2.38   2.28 ->  1.04
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  3.94   4.38 ->  0.90
[ T024: eval( bc := { || i % 16 } ) ]_________________  2.56   4.19 ->  0.61
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  2.55   3.53 ->  0.72
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  3.44   4.94 ->  0.70
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  3.15   4.60 ->  0.69
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  3.17   4.67 ->  0.68
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  3.17   4.61 ->  0.69
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  3.12   4.64 ->  0.67
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  3.12   4.69 ->  0.67
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  3.10   4.57 ->  0.68
[ T039: ascan( a, i % 16 ) ]__________________________  3.07   3.08 ->  1.00
[ T042: x := a ]______________________________________  0.95   2.11 ->  0.45
[ T044: f0() ]________________________________________  1.56   2.56 ->  0.61
[ T045: f1( i ) ]_____________________________________  1.87   3.10 ->  0.60
[ T046: f2( c[1...8] ) ]______________________________  1.85   3.30 ->  0.56
[ T047: f2( c[1...40000] ) ]__________________________  1.85   3.27 ->  0.56
[ T048: f2( @c[1...40000] ) ]_________________________  1.95   3.33 ->  0.58
[ T049: f2( @c[1...40000] ), c2 := c ]________________  2.23   3.81 ->  0.59
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  3.76   6.11 ->  0.62
[ T051: f2( a ) ]_____________________________________  1.86   3.35 ->  0.55
============================================================================
[   TOTAL   ]_________________________________________ 76.71 112.95 ->  0.68
============================================================================
[ total application time: ]...................................508.21        
[ total real time: ]..........................................189.67        

10/09/08 01:03:35 Linux 2.6.26.3-29.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
THREADS: 8
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  8 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  1.17   2.52 ->  0.46
[ T002: x := L_N ]____________________________________  1.28   1.87 ->  0.68
[ T003: x := L_D ]____________________________________  1.15   1.87 ->  0.62
[ T004: x := S_C ]____________________________________  1.16   3.08 ->  0.38
[ T005: x := S_N ]____________________________________  1.27   1.97 ->  0.64
[ T006: x := S_D ]____________________________________  1.33   1.93 ->  0.69
[ T007: x := M_C ]____________________________________  1.30   2.49 ->  0.52
[ T008: x := M_N ]____________________________________  1.40   2.02 ->  0.69
[ T009: x := M_D ]____________________________________  1.33   2.06 ->  0.64
[ T010: x := P_C ]____________________________________  1.24   2.11 ->  0.59
[ T011: x := P_N ]____________________________________  1.38   2.06 ->  0.67
[ T012: x := P_D ]____________________________________  1.24   2.07 ->  0.60
[ T013: x := F_C ]____________________________________  2.21   2.58 ->  0.86
[ T014: x := F_N ]____________________________________  2.52   1.82 ->  1.39
[ T015: x := F_D ]____________________________________  1.58   1.83 ->  0.87
[ T016: x := o:GenCode ]______________________________  2.46   3.05 ->  0.81
[ T017: x := o[8] ]___________________________________  1.77   2.76 ->  0.64
[ T018: round( i / 1000, 2 ) ]________________________  3.61   3.61 ->  1.00
[ T020: val( s ) ]____________________________________  3.10   3.00 ->  1.03
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  5.26   5.66 ->  0.93
[ T024: eval( bc := { || i % 16 } ) ]_________________  3.35   5.58 ->  0.60
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  3.40   4.80 ->  0.71
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  4.55   6.63 ->  0.69
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  3.94   6.31 ->  0.62
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  4.29   6.63 ->  0.65
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  4.15   6.40 ->  0.65
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  4.19   6.31 ->  0.66
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  4.18   6.46 ->  0.65
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  4.16   6.23 ->  0.67
[ T039: ascan( a, i % 16 ) ]__________________________  4.15   4.05 ->  1.02
[ T042: x := a ]______________________________________  1.35   2.96 ->  0.46
[ T044: f0() ]________________________________________  1.99   3.34 ->  0.60
[ T045: f1( i ) ]_____________________________________  2.56   4.16 ->  0.62
[ T046: f2( c[1...8] ) ]______________________________  2.57   4.32 ->  0.60
[ T047: f2( c[1...40000] ) ]__________________________  2.35   4.30 ->  0.55
[ T048: f2( @c[1...40000] ) ]_________________________  2.45   4.35 ->  0.56
[ T049: f2( @c[1...40000] ), c2 := c ]________________  2.95   5.14 ->  0.57
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  5.16   8.27 ->  0.62
[ T051: f2( a ) ]_____________________________________  2.58   4.50 ->  0.57
============================================================================
[   TOTAL   ]_________________________________________102.10 151.09 ->  0.68
============================================================================
[ total application time: ]...................................697.02
[ total real time: ]..........................................253.21
[philb@SunSpot tests]$



-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From philb at philb.us  Thu Oct  9 01:27:41 2008
From: philb at philb.us (Phil Barnett)
Date: Thu Oct  9 01:27:48 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <200810080943.12564.teo@windtelsoft.com>
References: <19847957.post@talk.nabble.com> <200810080149.16680.philb@philb.us>
	<200810080943.12564.teo@windtelsoft.com>
Message-ID: <200810090127.41916.philb@philb.us>

On Wednesday 08 October 2008 10:43:12 am Teo Fonrouge wrote:
> I see that you are use a rpm based distro (Fedora 9) so you can build the
> binaries and install it as rpm's. To create the Harbour rpm's, you just
> need to send the following command in an console:
>
> $ ./mpkg_rpm.sh

[philb@SunSpot harbour]$ ./mpkg_rpm.sh
svn: warning: '.' is not a working copy
error: Name field must be present in package: (main package)
error: Version field must be present in package: (main package)
error: Release field must be present in package: (main package)
error: Summary field must be present in package: (main package)
error: Group field must be present in package: (main package)
error: License field must be present in package: (main package)


-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From teo at windtelsoft.com  Thu Oct  9 02:49:30 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Thu Oct  9 02:49:04 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <200810090127.41916.philb@philb.us>
References: <19847957.post@talk.nabble.com>
	<200810080943.12564.teo@windtelsoft.com>
	<200810090127.41916.philb@philb.us>
Message-ID: <200810090149.30868.teo@windtelsoft.com>

On Thursday 09 October 2008 12:27:41 am Phil Barnett wrote:
> On Wednesday 08 October 2008 10:43:12 am Teo Fonrouge wrote:
> > I see that you are use a rpm based distro (Fedora 9) so you can build the
> > binaries and install it as rpm's. To create the Harbour rpm's, you just
> > need to send the following command in an console:
> >
> > $ ./mpkg_rpm.sh
>
> [philb@SunSpot harbour]$ ./mpkg_rpm.sh
> svn: warning: '.' is not a working copy
> error: Name field must be present in package: (main package)
> error: Version field must be present in package: (main package)
> error: Release field must be present in package: (main package)
> error: Summary field must be present in package: (main package)
> error: Group field must be present in package: (main package)
> error: License field must be present in package: (main package)

The Harbour directory that you used, does not contain the information of a SVN 
tree (IOW, you obtained the Harbour sources by another means) and 
unfortunately the "mpkg_rpm.sh" script require the information stored in 
the .svn dirs to create the directory tree from where execute the initial 
make.

You can easily get a SVN copy of the current Harbour sources with the 
following command (in one single line, the last harbour word is separated by 
a space " "):

svn co 
https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/harbour 
harbour


best regards,

Teo
From harbour.01 at syenar.hu  Thu Oct  9 03:44:04 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  9 03:44:16 2008
Subject: [Harbour] rddads: possible problem
In-Reply-To: <42kqe4dddi7thoo8qhgd2e95ga8n2sc1pq@4ax.com>
References: <3fupe49hrii3iguk0t8a7ofa8rrrp0ricp@4ax.com>
	<42kqe4dddi7thoo8qhgd2e95ga8n2sc1pq@4ax.com>
Message-ID: <A0BE1C0A-5F69-4100-8421-6173D52A099B@syenar.hu>

Hi Toninho,

IMO, a low level RDD function shouldn't
throw an RTE directly, just signal the
problem to the upper level layer, and let
it decide what to do. (apparently this
rule is not followed in RDDADS, so may be
I'm wrong with this.)

Also, there are many other similar calls
made in ads1.c, where the return value
is not checked (at first spot AdsGoBottom(),
and other AdsGoTop() calls). So, if something
is done, maybe all these cases should need
similar treatment.

Brgds,
Viktor

On 2008.10.09., at 2:32, Toninho@fwi wrote:

> Sorry, wrote too fast, the correct code is this:
>
> ---cut---
>    u32RetVal = AdsGotoTop( (pArea->hOrdCurrent) ? pArea->hOrdCurrent
> : pArea->hTable );
>      if( u32RetVal != AE_SUCCESS )
>      {
>         hb_errRT_DBCMD( error.code.here );
>         return FAILURE;
>      }
> ---cut---
>
> Regards,
>
> Toninho.
>
> __________________________________________________
> Fa?a liga??es para outros computadores com o novo Yahoo! Messenger
> http://br.beta.messenger.yahoo.com/
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Oct  9 03:47:44 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  9 03:47:54 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <200810090149.30868.teo@windtelsoft.com>
References: <19847957.post@talk.nabble.com>
	<200810080943.12564.teo@windtelsoft.com>
	<200810090127.41916.philb@philb.us>
	<200810090149.30868.teo@windtelsoft.com>
Message-ID: <CA5093E1-0DC5-4BBB-B27E-9B1688C3FC7B@syenar.hu>

Hi Teo,

Good that you mention, I've observed this when doing the
builds.

I think this is a serious limitation, which makes it
impossible for someone to build .rpms based on downloaded
source archives.

Is there any way to not depend on svn internal information
to create this package? Do you know why is it needed exactly?

Brgds,
Viktor

On 2008.10.09., at 8:49, Teo Fonrouge wrote:

> On Thursday 09 October 2008 12:27:41 am Phil Barnett wrote:
>> On Wednesday 08 October 2008 10:43:12 am Teo Fonrouge wrote:
>>> I see that you are use a rpm based distro (Fedora 9) so you can  
>>> build the
>>> binaries and install it as rpm's. To create the Harbour rpm's, you  
>>> just
>>> need to send the following command in an console:
>>>
>>> $ ./mpkg_rpm.sh
>>
>> [philb@SunSpot harbour]$ ./mpkg_rpm.sh
>> svn: warning: '.' is not a working copy
>> error: Name field must be present in package: (main package)
>> error: Version field must be present in package: (main package)
>> error: Release field must be present in package: (main package)
>> error: Summary field must be present in package: (main package)
>> error: Group field must be present in package: (main package)
>> error: License field must be present in package: (main package)
>
> The Harbour directory that you used, does not contain the  
> information of a SVN
> tree (IOW, you obtained the Harbour sources by another means) and
> unfortunately the "mpkg_rpm.sh" script require the information  
> stored in
> the .svn dirs to create the directory tree from where execute the  
> initial
> make.
>
> You can easily get a SVN copy of the current Harbour sources with the
> following command (in one single line, the last harbour word is  
> separated by
> a space " "):
>
> svn co
> https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/harbour
> harbour
>
>
> best regards,
>
> Teo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Oct  9 04:06:53 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  9 04:06:59 2008
Subject: [Harbour] 2008-10-09 09:57 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c929e5$Blat.v2.6.2$fd88514e$738daab6104@127.0.0.1>

2008-10-09 09:57 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbextern.ch
    + Added missing HB_DISABLEWAITLOCKS().
    ; NOTE: This looks like a hack to add FLX_WAIT flag 
            for locks app-wide, and on Windows systems only.
            IMO we should not have such hacks in core, or if 
            this is really important it should support all 
            possible platforms.
            It also has a low-level function equivalent, 
            which is missing from hbapifs.h. There is no 
            reference to these function in any Harbour or 
            xhb changelogs.
            If there are no objections, I'd like remove 
            this functionality.

  * source/rtl/hbrandom.c
  * source/rtl/filesys.c
    * Minor formatting.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct  9 04:12:12 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  9 04:12:16 2008
Subject: [Harbour] 2008-10-09 10:11 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c929e6$Blat.v2.6.2$bba25166$16206f54da04@127.0.0.1>

2008-10-09 10:11 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/bld.bat
  * bin/bld_os2.cmd
    + CLEANUP section now tries to clean object files and 
      Borland .tds files, too.
--
Brgds,
Viktor

From dmacias at mail.udg.mx  Thu Oct  9 04:25:37 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Oct  9 04:25:36 2008
Subject: [Harbour] Re: 2008-10-09 01:33 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <48EDC001.8090704@mail.udg.mx>

>We have the hbextern tool for this,

I saw some months ago two hbextern.prg with different purposes
One of them should be renamed

\harbour\source\hbextern\hbextern.prg
\harbour\utils\hbextern\hbextern.prg

David Macias


From druzus at acn.waw.pl  Thu Oct  9 05:55:49 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  9 05:55:52 2008
Subject: [Harbour] 2008-10-09 09:57 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c929e5$Blat.v2.6.2$fd88514e$738daab6104@127.0.0.1>
References: <01c929e5$Blat.v2.6.2$fd88514e$738daab6104@127.0.0.1>
Message-ID: <20081009095549.GA25725@34-mo7-2.acn.waw.pl>

On Thu, 09 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> 2008-10-09 09:57 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * include/hbextern.ch
>     + Added missing HB_DISABLEWAITLOCKS().
>     ; NOTE: This looks like a hack to add FLX_WAIT flag 
>             for locks app-wide, and on Windows systems only.
>             IMO we should not have such hacks in core, or if 
>             this is really important it should support all 
>             possible platforms.

This is bad hack for fatal performance of waiting locks
in MS-Networks and is only usable in MS-Windows when file
server is on MS-Windows or sth what behaves like MS-Windows,
f.e. in samba this behavior is replicated. If you will
look at samba source code then you will find what it does.
Waiting looks when fail are repeated in loop with some
fixed delay (sleep) over 100 milliseconds. It kills the
performance when many stations makes concurrent access.
It's much faster to return fail and repeat the lock immediately
instead of freezing the client server connection for such fixed
time - the locks on index file are usually very short.

>             It also has a low-level function equivalent, 
>             which is missing from hbapifs.h. There is no 
>             reference to these function in any Harbour or 
>             xhb changelogs.
>             If there are no objections, I'd like remove 
>             this functionality.

In some MS-Networks when index is access concurrently by many
clients without disabling waiting locks the performance of index
skipping is reduced about 20 times. With current hardware and fast
GBs networks the difference is probably even higher.
Just for information - I do not use Windows so it's not a problem
for me. I also do not like it though I added this hack when I saw
user results and made some own tests.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct  9 06:02:13 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  9 06:02:16 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <CA5093E1-0DC5-4BBB-B27E-9B1688C3FC7B@syenar.hu>
References: <19847957.post@talk.nabble.com>
	<200810080943.12564.teo@windtelsoft.com>
	<200810090127.41916.philb@philb.us>
	<200810090149.30868.teo@windtelsoft.com>
	<CA5093E1-0DC5-4BBB-B27E-9B1688C3FC7B@syenar.hu>
Message-ID: <20081009100213.GB25725@34-mo7-2.acn.waw.pl>

On Thu, 09 Oct 2008, Szak?ts Viktor wrote:
> Hi Teo,
> Good that you mention, I've observed this when doing the
> builds.
> I think this is a serious limitation, which makes it
> impossible for someone to build .rpms based on downloaded
> source archives.

It's not related to mpkg_rpm.sh but to bin/pack_src.sh
and happens when Harbour is not packed by this script and
does not have valid SVN info which can be used to verify
original files.

> Is there any way to not depend on svn internal information
> to create this package? Do you know why is it needed exactly?

pack Harbour with bin/pack_src.sh which checks if only SVN
files are packed without any local user files.

best regards,
Przemek
From teo at windtelsoft.com  Thu Oct  9 06:05:47 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Thu Oct  9 06:04:43 2008
Subject: [Harbour] ChangeLog 9586 2008-10-09 10:02:02Z tfonrouge
Message-ID: <200810090505.47541.teo@windtelsoft.com>

2008-10-09 05:02 UTC-0500 Teo Fonrouge (teo/at/windtelsoft/dot/com)
  * bin/hb_flst.tmp
  * bin/pack_src.sh
    * small fix to have always the list ordered

2008-10-09 04:57 UTC-0500 Teo Fonrouge (teo/at/windtelsoft/dot/com)
  + bin/hb_flst.tmp
  * bin/pack_src.sh
    * Made available the source file list to users that don't build from a SVN 
tree

best regards,

Teo
From teo at windtelsoft.com  Thu Oct  9 06:05:57 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Thu Oct  9 06:04:53 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <CA5093E1-0DC5-4BBB-B27E-9B1688C3FC7B@syenar.hu>
References: <19847957.post@talk.nabble.com>
	<200810090149.30868.teo@windtelsoft.com>
	<CA5093E1-0DC5-4BBB-B27E-9B1688C3FC7B@syenar.hu>
Message-ID: <200810090505.57613.teo@windtelsoft.com>

On Thursday 09 October 2008 02:47:44 am Szak?ts Viktor wrote:
> Hi Teo,
>
> Good that you mention, I've observed this when doing the
> builds.
>
> I think this is a serious limitation, which makes it
> impossible for someone to build .rpms based on downloaded
> source archives.
>
> Is there any way to not depend on svn internal information
> to create this package? Do you know why is it needed exactly?

It's needed because is a simple and effective way to get the files needed to 
build the directory tree from where build the rpm packages.

However, we can provide an alternative to the users that don't build from a 
SVN tree, by having available the list of files needed (currently in a file 
named "hb_flst.tmp", and created inside the "pack_src.sh" script, both in the 
bin/ dir) to those users.

The only drawback is that we need to have updated the file list all the time 
when a change is made to the source tree, but I think that this is a minor 
detail because the users (with SVN write access granted) that will build the 
package also will update the file list and upload it.

In fact, the script "pack_src.sh" seems to be ready to do this with little 
changes, so I have changed the script and added the "hb_flst.tmp" file to the 
SVN .

[snip]


best regards,

Teo
From gerrylist at drouillard.ca  Thu Oct  9 06:08:01 2008
From: gerrylist at drouillard.ca (Gerald Drouillard)
Date: Thu Oct  9 06:08:24 2008
Subject: [Harbour] Suggested Tbrowse Changes
In-Reply-To: <20081008230137.GA10949@34-mo7-2.acn.waw.pl>
References: <48ECB317.6060900@drouillard.ca>
	<20081008230137.GA10949@34-mo7-2.acn.waw.pl>
Message-ID: <48EDD801.9060305@drouillard.ca>

Przemyslaw Czerpak wrote:
> On Wed, 08 Oct 2008, Gerald Drouillard wrote:
> 
> Hi Gerald,
> 
>> I am running Harbour's tbrowse in the latest version of xHarbour in the 
>> following issues I have found:
>> METHOD refreshAll() CLASS TBROWSE
>>    ::setUnstable()
>> // The following 2 lines do not follow clipper behavior:
>> //   Eval( ::bSkipBlock, 1 - ::nBufferPos )
>> //   ::nBufferPos := 1
>>    ::lFrames := .T.
>>    ::lRefresh := .T.
>>    RETURN Self
> 
> Do you have any code example?
> Even this simple test:
>    proc main()
>       local o:=tbrowsenew()
>       o:skipBlock:={|x,y,z|qout(x,y,z),x}
>       o:refreshAll()
>    return

The row position should not change if you are not on row 1 in a tbrowse 
and you issue a refreshall.
     proc main()
        local o:=tbrowsenew()
	o:gotop()
	o:forcestable()
	?o:rowPos()	//1
	o:down()
	o:forcestable()
	?o:rowpos()	//2
        	o:refreshAll()
	?o:rowpos()	//1  - this should be 2
     return


> 
> shows that Clipper evaluates skipBlock() inside refresh all.
> I've tried with CL5.2 and CL5.3 - both gives the same results
> as Harbour. Also such things should be caught by Viktor's
> TBROWSE regression test and I do not remember any problems
> here.
> 
>> Not sure if the following is a difference in xhb/hb:
>> METHOD stabilize() CLASS TBROWSE
>> ....
>>          FOR EACH lStat, lDisp IN ::aCellStatus, ::aDispStatus DESCEND
>>             IF !lStat
>>
>>                IF lRead
>>                   RETURN .F.
>>                ENDIF
>> //this line was changed in xhb to work correctly:
>>                lRead := ::readRecord( nrowcount+lStat:__enumIndex()+1 )		
>>             ENDIF
>>             IF lDisp
>>                ::dispRow( nrowcount+lDisp:__enumIndex()+1 )
>>             ENDIF
>>          NEXT
>>
>> lStat:__enumIndex() returns a negative number in xhb when using "DESCEND" 
>> and it seems like we are trying to paint from the bottom up.
> 
> xHarbour does not support extended FOR EACH functionality like in Harbour.
> It has some emulation using preprocessor directives but it does not replicate
> Harbour behavior. The above is one of such examples. In Harbour this code is:
> 
>          FOR EACH lStat, lDisp IN ::aCellStatus, ::aDispStatus DESCEND
>             IF !lStat
>                IF lRead
>                   RETURN .F.
>                ENDIF
>                lRead := ::readRecord( lStat:__enumIndex() )
>             ENDIF
>             IF lDisp
>                ::dispRow( lDisp:__enumIndex() )
>             ENDIF
>          NEXT
> 
> reads and shows records from the top to down.
> 
> I cannot say how tbrowse code will work in xHarbour. Harbour does not
> have some important functionality which exist only in Harbour and maybe
> used by this code in some places.
> Anyhow if you will find any incompatibilities to Clipper then please
> send a message here. Maybe sth has to be fixed yet.

Well, that one line is the only line that is holding back xhb users from 
using it.  I'll send it to xhb list to see if they want to fix 
DESCEND/__enumindex()

-- 
Regards
--------------------------------------
Gerald Drouillard
Technology Architect
Drouillard & Associates, Inc.
http://www.Drouillard.biz
From druzus at acn.waw.pl  Thu Oct  9 06:13:54 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  9 06:13:57 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <200810090125.41593.philb@philb.us>
References: <19847957.post@talk.nabble.com> <200810080149.16680.philb@philb.us>
	<20081008091019.GA15294@34-mo7-2.acn.waw.pl>
	<200810090125.41593.philb@philb.us>
Message-ID: <20081009101354.GC25725@34-mo7-2.acn.waw.pl>

On Thu, 09 Oct 2008, Phil Barnett wrote:

Hi Phil,

> > OK. If possible please try current SVN 
                               ^^^^^^^
> [philb@SunSpot harbour]$ export C_USR=-DHB_GUI
> [philb@SunSpot harbour]$ mpkg_tgz.sh
> install resulting tarball as root
> 10/09/08 00:57:00 Linux 2.6.26.3-29.fc9.i686 i686
> Harbour 1.1.0dev (Rev. 9564) (MT)+ GNU C 4.3 (32 bit)
                         ^^^^
It's not current SVN code. Currently we have 9583:
   2008-10-09 10:11 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
I asked you to repeat the tests after committing rev 9567:
   2008-10-07 18:36 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
after I added workaround for HB_GUI so it doesn't matter if you will
set it or not.
Maybe you build and install Harbour correctly but just simply you have
some other copy Harbour binaries which is used and it's the reason why
adding HB_GUI was not working for you. I really do not know.
Sorry that I'm asking about it again but please make SVN update to
current and check if harbour binaries and executable have SVN revision
number grater then 9567. I would like to confirm that the MT slowness
in gc[0-2] builds is resolved.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Oct  9 06:13:52 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  9 06:14:05 2008
Subject: [Harbour] 2008-10-09 09:57 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20081009095549.GA25725@34-mo7-2.acn.waw.pl>
References: <01c929e5$Blat.v2.6.2$fd88514e$738daab6104@127.0.0.1>
	<20081009095549.GA25725@34-mo7-2.acn.waw.pl>
Message-ID: <409E2587-1958-40DC-BCAB-88231FA5987E@syenar.hu>

Hi Przemek,

Many thanks for the explanation. I know
about this (well at least one similar) problem,
didn't notice it for simple locks though, only
when trying to delete or open a locked file.
There are server side registry hacks and smb
setting (above 3.0.6, where this server side
feature got implemented: defer sharing violations),
to get around these.

Anyhow if this is such a big problem on Windows,
I wonder why isn't it the default behavior then?

Would it have any downsides to have it turned
on permanently?

Brgds,
Viktor

On 2008.10.09., at 11:55, Przemyslaw Czerpak wrote:

> On Thu, 09 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> 2008-10-09 09:57 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>  * include/hbextern.ch
>>    + Added missing HB_DISABLEWAITLOCKS().
>>    ; NOTE: This looks like a hack to add FLX_WAIT flag
>>            for locks app-wide, and on Windows systems only.
>>            IMO we should not have such hacks in core, or if
>>            this is really important it should support all
>>            possible platforms.
>
> This is bad hack for fatal performance of waiting locks
> in MS-Networks and is only usable in MS-Windows when file
> server is on MS-Windows or sth what behaves like MS-Windows,
> f.e. in samba this behavior is replicated. If you will
> look at samba source code then you will find what it does.
> Waiting looks when fail are repeated in loop with some
> fixed delay (sleep) over 100 milliseconds. It kills the
> performance when many stations makes concurrent access.
> It's much faster to return fail and repeat the lock immediately
> instead of freezing the client server connection for such fixed
> time - the locks on index file are usually very short.
>
>>            It also has a low-level function equivalent,
>>            which is missing from hbapifs.h. There is no
>>            reference to these function in any Harbour or
>>            xhb changelogs.
>>            If there are no objections, I'd like remove
>>            this functionality.
>
> In some MS-Networks when index is access concurrently by many
> clients without disabling waiting locks the performance of index
> skipping is reduced about 20 times. With current hardware and fast
> GBs networks the difference is probably even higher.
> Just for information - I do not use Windows so it's not a problem
> for me. I also do not like it though I added this hack when I saw
> user results and made some own tests.
>
> best regards,
> Przemek

From harbour.01 at syenar.hu  Thu Oct  9 06:16:41 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  9 06:16:50 2008
Subject: [Harbour] ChangeLog 9586 2008-10-09 10:02:02Z tfonrouge
In-Reply-To: <200810090505.47541.teo@windtelsoft.com>
References: <200810090505.47541.teo@windtelsoft.com>
Message-ID: <D01A839A-E1EE-4D33-9CC7-5E51362567C9@syenar.hu>

Hi Teo,

I'm not sure this is the right solution :(

First, a .tmp file as a static file looks quite
strange, but most importantly, who will update
this file after each commit?

I'd think it'd be better to just assume that
all files on the tree, are Harbour files, when
there is no SVN information available.

Brgds,
Viktor

On 2008.10.09., at 12:05, Teo Fonrouge wrote:

> 2008-10-09 05:02 UTC-0500 Teo Fonrouge (teo/at/windtelsoft/dot/com)
>  * bin/hb_flst.tmp
>  * bin/pack_src.sh
>    * small fix to have always the list ordered
>
> 2008-10-09 04:57 UTC-0500 Teo Fonrouge (teo/at/windtelsoft/dot/com)
>  + bin/hb_flst.tmp
>  * bin/pack_src.sh
>    * Made available the source file list to users that don't build  
> from a SVN
> tree
>
> best regards,
>
> Teo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Oct  9 06:18:07 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  9 06:18:17 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <200810090505.57613.teo@windtelsoft.com>
References: <19847957.post@talk.nabble.com>
	<200810090149.30868.teo@windtelsoft.com>
	<CA5093E1-0DC5-4BBB-B27E-9B1688C3FC7B@syenar.hu>
	<200810090505.57613.teo@windtelsoft.com>
Message-ID: <C552221A-7F1C-40FC-B0A8-8E7348D4042B@syenar.hu>

>
Hi Teo,

> It's needed because is a simple and effective way to get the files  
> needed to
> build the directory tree from where build the rpm packages.
>
> However, we can provide an alternative to the users that don't build  
> from a
> SVN tree, by having available the list of files needed (currently in  
> a file
> named "hb_flst.tmp", and created inside the "pack_src.sh" script,  
> both in the
> bin/ dir) to those users.
>
> The only drawback is that we need to have updated the file list all  
> the time
> when a change is made to the source tree, but I think that this is a  
> minor
> detail because the users (with SVN write access granted) that will  
> build the
> package also will update the file list and upload it.
>
> In fact, the script "pack_src.sh" seems to be ready to do this with  
> little
> changes, so I have changed the script and added the "hb_flst.tmp"  
> file to the
> SVN .

See my other mail. IMO we should just use a plain
and simple file listing to get the related files.

This assumes of course that we gather the sources
before doing the binary build process, or there
may be ways to exclude specific subdirs from the
listing.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct  9 06:19:50 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  9 06:20:00 2008
Subject: [Harbour] Suggested Tbrowse Changes
In-Reply-To: <48EDD801.9060305@drouillard.ca>
References: <48ECB317.6060900@drouillard.ca>
	<20081008230137.GA10949@34-mo7-2.acn.waw.pl>
	<48EDD801.9060305@drouillard.ca>
Message-ID: <CC4E641F-2237-4405-8507-9C6CA574EC1A@syenar.hu>

>>
Hi Gerald,

>> reads and shows records from the top to down.
>> I cannot say how tbrowse code will work in xHarbour. Harbour does not
>> have some important functionality which exist only in Harbour and  
>> maybe
>> used by this code in some places.
>> Anyhow if you will find any incompatibilities to Clipper then please
>> send a message here. Maybe sth has to be fixed yet.
>
> Well, that one line is the only line that is holding back xhb users  
> from using it.  I'll send it to xhb list to see if they want to fix  
> DESCEND/__enumindex()

What is the reason you cannot use full Harbour?

[ BTW, I'd find it odd to make our sources bug
compatible with xhb, so indeed the fix should be
done there in this case. ]

Brgds,
Viktor

From gerrylist at drouillard.ca  Thu Oct  9 06:39:16 2008
From: gerrylist at drouillard.ca (Gerald Drouillard)
Date: Thu Oct  9 06:39:35 2008
Subject: [Harbour] Suggested Tbrowse Changes
In-Reply-To: <CC4E641F-2237-4405-8507-9C6CA574EC1A@syenar.hu>
References: <48ECB317.6060900@drouillard.ca>	<20081008230137.GA10949@34-mo7-2.acn.waw.pl>	<48EDD801.9060305@drouillard.ca>
	<CC4E641F-2237-4405-8507-9C6CA574EC1A@syenar.hu>
Message-ID: <48EDDF54.8020409@drouillard.ca>

Szak?ts Viktor wrote:
>>>
> Hi Gerald,
> 
>>> reads and shows records from the top to down.
>>> I cannot say how tbrowse code will work in xHarbour. Harbour does not
>>> have some important functionality which exist only in Harbour and maybe
>>> used by this code in some places.
>>> Anyhow if you will find any incompatibilities to Clipper then please
>>> send a message here. Maybe sth has to be fixed yet.
>>
>> Well, that one line is the only line that is holding back xhb users 
>> from using it.  I'll send it to xhb list to see if they want to fix 
>> DESCEND/__enumindex()
> 
> What is the reason you cannot use full Harbour?
rmdbfcdx
> 
> [ BTW, I'd find it odd to make our sources bug
> compatible with xhb, so indeed the fix should be
> done there in this case. ]
Divided we fail.
> 
> Brgds,
> Viktor
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour


-- 
Regards
--------------------------------------
Gerald Drouillard
Technology Architect
Drouillard & Associates, Inc.
http://www.Drouillard.biz
From teo at windtelsoft.com  Thu Oct  9 06:49:34 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Thu Oct  9 06:48:28 2008
Subject: [Harbour] ChangeLog 9586 2008-10-09 10:02:02Z tfonrouge
In-Reply-To: <D01A839A-E1EE-4D33-9CC7-5E51362567C9@syenar.hu>
References: <200810090505.47541.teo@windtelsoft.com>
	<D01A839A-E1EE-4D33-9CC7-5E51362567C9@syenar.hu>
Message-ID: <200810090549.34845.teo@windtelsoft.com>

On Thursday 09 October 2008 05:16:41 am Szak?ts Viktor wrote:
> Hi Teo,
>
> I'm not sure this is the right solution :(
>
> First, a .tmp file as a static file looks quite
> strange, but most importantly, who will update
> this file after each commit?

Hello Viktor,

This file will be only needed by users that doesn't build from a SVN tree, 
like Phil in his last attempt to build the packages from a plain source tree.

The list file will only need to be updated when items are added/deleted/moved 
in the SVN repository. But as I said in the other mail, this file will be 
need to be updated in those cases.

>
> I'd think it'd be better to just assume that
> all files on the tree, are Harbour files, when
> there is no SVN information available.

Agree, I'll add the changes in the pack_src.sh script in order to do that.


best regards,

Teo
From druzus at acn.waw.pl  Thu Oct  9 07:12:23 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  9 07:12:26 2008
Subject: [Harbour] Suggested Tbrowse Changes
In-Reply-To: <48EDD801.9060305@drouillard.ca>
References: <48ECB317.6060900@drouillard.ca>
	<20081008230137.GA10949@34-mo7-2.acn.waw.pl>
	<48EDD801.9060305@drouillard.ca>
Message-ID: <20081009111223.GD25725@34-mo7-2.acn.waw.pl>

On Thu, 09 Oct 2008, Gerald Drouillard wrote:

Hi Gerald,

> The row position should not change if you are not on row 1 in a tbrowse and 
> you issue a refreshall.
>     proc main()
>        local o:=tbrowsenew()
> 	o:gotop()
> 	o:forcestable()
> 	?o:rowPos()	//1
> 	o:down()
> 	o:forcestable()
> 	?o:rowpos()	//2
>        	o:refreshAll()
> 	?o:rowpos()	//1  - this should be 2
>     return

In CL5.2 the above code hangups. In CL5.3 it shows:
   1
   1
   1

Just like in Harbour:
   1
   1
   1

Though I've found one difference - Harbour tbrowse clear tbrowse area
even if there is no column just like in this test. The same is for
navigation which is skipped when there are no column.
But the results are exactly the same as in Clipper and the
skip block inside refreshAll() is executed exactly like in Clipper
if you add any column with exactly the same parameter.

I tested it with xHarbour original tbrowse and yes it gives different
results then Clipper and Harbour.

>> I cannot say how tbrowse code will work in xHarbour. Harbour does not
>> have some important functionality which exist only in Harbour and maybe
>> used by this code in some places.
>> Anyhow if you will find any incompatibilities to Clipper then please
>> send a message here. Maybe sth has to be fixed yet.
> Well, that one line is the only line that is holding back xhb users from 
> using it.

Maybe but I cannot promise that some other problems will not be exploited.
There are many small differences between Harbour and xHarbour which may
or may not effect this code.

>  I'll send it to xhb list to see if they want to fix 
> DESCEND/__enumindex()

xHarbour does not support __enum*() iterator messages, DESCEND,
multiple iterations in one loop, native hash item iterations,
assigning in string item iterations and enumerators message overloading
by user at all. I see that some simple emulation was added as PP rule
but it does not cover even 10% of Harbour functionality.
Maybe it's the only one problem but it's possible that also some other
problems will be exploited by this code not related to FOR EACH.
Just try. If you will find sth then please inform me. Maybe I'll
be able to help you.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct  9 07:27:00 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  9 07:27:03 2008
Subject: [Harbour] __DBPACK bug in 1.0.1
In-Reply-To: <48ECB7E2.9080604@dbtopas.lt>
References: <48ECB7E2.9080604@dbtopas.lt>
Message-ID: <20081009112700.GA5127@34-mo7-2.acn.waw.pl>

On Wed, 08 Oct 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> after moving from some old Harbour version to 1.0.1 in production 
> environment my app started to GPF on __DBPACK.
> I've debugged code a little bit. After evaluation of
>    SELF_EVALBLOCK( ( AREAP ) pArea, pBlock )
> inside hb_dbfPack(), the result of HB_IS_BLOCK( pBlock ) is FALSE, because 
> hb_vmEvalBlockOrMacro() releases pArea->valResult (it contains this 
> codeblock). Some older Harbour code works OK.

In the past someone added hack for EVAL/EVERY to PACK DBF RDD message
passing parameters inside item used to collect results so it's still
overloaded by sth. I can add workaround for it but I cannot promise
that it will work because it's local user invention which came to official
repository and upper level RDDs may not know about it and overload it.
It's even possible that inside valResult will be result of some previously
executed command which will effect the PACK. In fact I should remove it
long time ago.
If it's really important then I can add some workaround to keep it alive
but I cannot promise that upper level RDDs will not damage or overload it
before it comes to DBF.
It's not Clipper compatible and it's not even compatible with our RDD API.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct  9 07:46:22 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  9 07:46:25 2008
Subject: [Harbour] 2008-10-09 09:57 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <409E2587-1958-40DC-BCAB-88231FA5987E@syenar.hu>
References: <01c929e5$Blat.v2.6.2$fd88514e$738daab6104@127.0.0.1>
	<20081009095549.GA25725@34-mo7-2.acn.waw.pl>
	<409E2587-1958-40DC-BCAB-88231FA5987E@syenar.hu>
Message-ID: <20081009114622.GA25111@34-mo7-2.acn.waw.pl>

On Thu, 09 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Many thanks for the explanation. I know
> about this (well at least one similar) problem,
> didn't notice it for simple locks though, only
> when trying to delete or open a locked file.
> There are server side registry hacks and smb
> setting (above 3.0.6, where this server side
> feature got implemented: defer sharing violations),
> to get around these.

Yes. Also some other file servers does not have such problem.

> Anyhow if this is such a big problem on Windows,
> I wonder why isn't it the default behavior then?
> Would it have any downsides to have it turned
> on permanently?

It will reduce the performance when well working
file server is used which can give waiting write lock
access immediately after releasing blocking lock.
It also increases the network usage because client
has to repeat locks and send new request to server
if the previous one fails.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct  9 08:11:57 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  9 08:11:59 2008
Subject: [Harbour] 2008-10-09 14:11 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081009121157.GA16938@34-mo7-2.acn.waw.pl>

2008-10-09 14:11 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/hvm.c
    * changed the place where exception handles are set/remove.
      Now it's set at the beginning of hb_vmInit() and removed
      at the end of hb_vmQuit()

  * harbour/source/rdd/dbcmd.c
  * harbour/source/rdd/dbf1.c
    ! added workaround for problem with EVAL block used in PACK
      command

  * harbour/source/compiler/hbmain.c
    * minor simplification

best regards
Przemek
From teo at windtelsoft.com  Thu Oct  9 08:32:12 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Thu Oct  9 08:30:49 2008
Subject: [Harbour] 2008-10-09 07:30 UTC-0500 Teo Fonrouge
	(teo/at/windtelsoft/dot/com)
Message-ID: <200810090732.12496.teo@windtelsoft.com>

2008-10-09 07:29 UTC-0500 Teo Fonrouge (teo/at/windtelsoft/dot/com)
  - bin/hb_flst.tmp
  * bin/pack_src.sh
    - removed the temporary file list from SVN.
    * Added code to retrieve the source file list when SVN info is not 
available


best regards,

Teo
From harbour.01 at syenar.hu  Thu Oct  9 08:32:12 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  9 08:32:23 2008
Subject: [Harbour] Suggested Tbrowse Changes
In-Reply-To: <48EDDF54.8020409@drouillard.ca>
References: <48ECB317.6060900@drouillard.ca>	<20081008230137.GA10949@34-mo7-2.acn.waw.pl>	<48EDD801.9060305@drouillard.ca>
	<CC4E641F-2237-4405-8507-9C6CA574EC1A@syenar.hu>
	<48EDDF54.8020409@drouillard.ca>
Message-ID: <F272EA7C-B613-43F1-9E96-F8C3CC566EB4@syenar.hu>

> Szak?ts Viktor wrote:
>>>>
>> Hi Gerald,
>>>> reads and shows records from the top to down.
>>>> I cannot say how tbrowse code will work in xHarbour. Harbour does  
>>>> not
>>>> have some important functionality which exist only in Harbour and  
>>>> maybe
>>>> used by this code in some places.
>>>> Anyhow if you will find any incompatibilities to Clipper then  
>>>> please
>>>> send a message here. Maybe sth has to be fixed yet.
>>>
>>> Well, that one line is the only line that is holding back xhb  
>>> users from using it.  I'll send it to xhb list to see if they want  
>>> to fix DESCEND/__enumindex()
>> What is the reason you cannot use full Harbour?
> rmdbfcdx

It works with Harbour, too.

>> [ BTW, I'd find it odd to make our sources bug
>> compatible with xhb, so indeed the fix should be
>> done there in this case. ]
> Divided we fail.

That's true, but that's no reason to be bug
compatible. We did a huge amount of efforts
to be compatible with xhb in all meaningful
respects.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct  9 08:36:15 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  9 08:36:25 2008
Subject: [Harbour] __DBPACK bug in 1.0.1
In-Reply-To: <20081009112700.GA5127@34-mo7-2.acn.waw.pl>
References: <48ECB7E2.9080604@dbtopas.lt>
	<20081009112700.GA5127@34-mo7-2.acn.waw.pl>
Message-ID: <F60BB247-17D6-456F-89E2-296F57A12307@syenar.hu>

Hi folks,

If it's a hack, I'd vote to remove it, or
implement it properly. Looks like skeletons are
falling out of the closet :(

Brgds,
Viktor

On 2008.10.09., at 13:27, Przemyslaw Czerpak wrote:

> On Wed, 08 Oct 2008, Mindaugas Kavaliauskas wrote:
>
> Hi Mindaugas,
>
>> after moving from some old Harbour version to 1.0.1 in production
>> environment my app started to GPF on __DBPACK.
>> I've debugged code a little bit. After evaluation of
>>   SELF_EVALBLOCK( ( AREAP ) pArea, pBlock )
>> inside hb_dbfPack(), the result of HB_IS_BLOCK( pBlock ) is FALSE,  
>> because
>> hb_vmEvalBlockOrMacro() releases pArea->valResult (it contains this
>> codeblock). Some older Harbour code works OK.
>
> In the past someone added hack for EVAL/EVERY to PACK DBF RDD message
> passing parameters inside item used to collect results so it's still
> overloaded by sth. I can add workaround for it but I cannot promise
> that it will work because it's local user invention which came to  
> official
> repository and upper level RDDs may not know about it and overload it.
> It's even possible that inside valResult will be result of some  
> previously
> executed command which will effect the PACK. In fact I should remove  
> it
> long time ago.
> If it's really important then I can add some workaround to keep it  
> alive
> but I cannot promise that upper level RDDs will not damage or  
> overload it
> before it comes to DBF.
> It's not Clipper compatible and it's not even compatible with our  
> RDD API.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Oct  9 08:43:58 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  9 08:44:06 2008
Subject: [Harbour] 2008-10-09 09:57 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20081009114622.GA25111@34-mo7-2.acn.waw.pl>
References: <01c929e5$Blat.v2.6.2$fd88514e$738daab6104@127.0.0.1>
	<20081009095549.GA25725@34-mo7-2.acn.waw.pl>
	<409E2587-1958-40DC-BCAB-88231FA5987E@syenar.hu>
	<20081009114622.GA25111@34-mo7-2.acn.waw.pl>
Message-ID: <A2B8FB1B-B262-4D7E-9C4D-26B42140BB8A@syenar.hu>

>>
Hi Przemek,

>> Many thanks for the explanation. I know
>> about this (well at least one similar) problem,
>> didn't notice it for simple locks though, only
>> when trying to delete or open a locked file.
>> There are server side registry hacks and smb
>> setting (above 3.0.6, where this server side
>> feature got implemented: defer sharing violations),
>> to get around these.
>
> Yes. Also some other file servers does not have such problem.
>
>> Anyhow if this is such a big problem on Windows,
>> I wonder why isn't it the default behavior then?
>> Would it have any downsides to have it turned
>> on permanently?
>
> It will reduce the performance when well working
> file server is used which can give waiting write lock
> access immediately after releasing blocking lock.
> It also increases the network usage because client
> has to repeat locks and send new request to server
> if the previous one fails.

Classic case of difficult decision. Maybe I'll
just rename the function to something more suited
and clean the low-level interface.

If it were just me, I'd delete just delete it, as
IMO these kind of things should be cured on the
server side, and deciding whether to use this
hack or not on the Harbour developer side is a
pretty difficult task, not to mention using it
consistently and properly in practice, so I'd
expect most ppl to not use it all, or use it wrongly.

[ It goes down to a sysadmin decision at the
end of the day, but if it's a sysadmin decision,
it's better to be solved server side, anyway.
If we have access to the server settings that is. ]

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct  9 08:46:10 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  9 08:46:18 2008
Subject: [Harbour] 2008-10-09 07:30 UTC-0500 Teo Fonrouge
	(teo/at/windtelsoft/dot/com)
In-Reply-To: <200810090732.12496.teo@windtelsoft.com>
References: <200810090732.12496.teo@windtelsoft.com>
Message-ID: <2B473A84-F076-4A02-82B6-F22523F67599@syenar.hu>

Hi Teo,

Perfect, many thanks.

Brgds,
Viktor

On 2008.10.09., at 14:32, Teo Fonrouge wrote:

> 2008-10-09 07:29 UTC-0500 Teo Fonrouge (teo/at/windtelsoft/dot/com)
>  - bin/hb_flst.tmp
>  * bin/pack_src.sh
>    - removed the temporary file list from SVN.
>    * Added code to retrieve the source file list when SVN info is not
> available
>
>
> best regards,
>
> Teo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From teo at windtelsoft.com  Thu Oct  9 08:57:34 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Thu Oct  9 08:56:01 2008
Subject: [Harbour] Missing hbverbld.h ?
Message-ID: <200810090757.34878.teo@windtelsoft.com>

Hello,

Why is this file not in current SVN and is referenced in harbour.c ?


best regards,

Teo
From druzus at acn.waw.pl  Thu Oct  9 09:47:31 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  9 09:47:34 2008
Subject: [Harbour] Missing hbverbld.h ?
In-Reply-To: <200810090757.34878.teo@windtelsoft.com>
References: <200810090757.34878.teo@windtelsoft.com>
Message-ID: <20081009134730.GA25098@34-mo7-2.acn.waw.pl>

On Thu, 09 Oct 2008, Teo Fonrouge wrote:

Hi Teo,

> Why is this file not in current SVN and is referenced in harbour.c ?

It's created dynamically by hbpp when Harbour is compiled.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Thu Oct  9 09:48:46 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Oct  9 09:48:52 2008
Subject: [Harbour] __DBPACK bug in 1.0.1
In-Reply-To: <F60BB247-17D6-456F-89E2-296F57A12307@syenar.hu>
References: <48ECB7E2.9080604@dbtopas.lt>
	<20081009112700.GA5127@34-mo7-2.acn.waw.pl>
	<F60BB247-17D6-456F-89E2-296F57A12307@syenar.hu>
Message-ID: <9257026e0810090648k53e82cew991d1df8fe153ec6@mail.gmail.com>

On Thu, Oct 9, 2008 at 2:36 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> If it's a hack, I'd vote to remove it, or
> implement it properly. Looks like skeletons are
> falling out of the closet :(

I agree, PACK is a critical command and should be as safe as possible.

best regards,
Lorenzo
From druzus at acn.waw.pl  Thu Oct  9 11:02:10 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  9 11:02:11 2008
Subject: [Harbour] __DBPACK bug in 1.0.1
In-Reply-To: <9257026e0810090648k53e82cew991d1df8fe153ec6@mail.gmail.com>
References: <48ECB7E2.9080604@dbtopas.lt>
	<20081009112700.GA5127@34-mo7-2.acn.waw.pl>
	<F60BB247-17D6-456F-89E2-296F57A12307@syenar.hu>
	<9257026e0810090648k53e82cew991d1df8fe153ec6@mail.gmail.com>
Message-ID: <20081009150210.GA19378@34-mo7-2.acn.waw.pl>

On Thu, 09 Oct 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> > If it's a hack, I'd vote to remove it, or
> > implement it properly. Looks like skeletons are
> > falling out of the closet :(
> I agree, PACK is a critical command and should be as safe as possible.

And it's probably the reason why Clipper does not support
user EVAL code in PACK because any error inside this code
will break packing operation and corrupt the table.
Personally I think it's much safer to use COPY TO ... / FRENAME()
Probably we should only add support for RENAME RDD method just like
we have dbEXISTS and dbDROP so user will not have to know the details
details of table storage used by RDD.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct  9 11:03:14 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  9 11:03:15 2008
Subject: [Harbour] 2008-10-09 17:03 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081009150314.GA21130@34-mo7-2.acn.waw.pl>

2008-10-09 17:03 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  + harbour/source/rtl/thfuncx.prg
    * added xbase++ compatible functions:
         ThreadID() -> <nThId>
         ThreadWait( <aThreads>, <nTimeOut> ) -> <oThread> | <pThId> | NIL
         ThreadWaitAll( <aThreads>, <nTimeOut> ) -> <lAllFinished>
      In Harbour <aThreads> can be array of thread pointers or thread
      objects. xbase++ compatible thread class I'll add later.

best regards
Przemek
From harbour.01 at syenar.hu  Thu Oct  9 11:42:00 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  9 11:42:32 2008
Subject: [Harbour] __DBPACK bug in 1.0.1
In-Reply-To: <20081009150210.GA19378@34-mo7-2.acn.waw.pl>
References: <48ECB7E2.9080604@dbtopas.lt>
	<20081009112700.GA5127@34-mo7-2.acn.waw.pl>
	<F60BB247-17D6-456F-89E2-296F57A12307@syenar.hu>
	<9257026e0810090648k53e82cew991d1df8fe153ec6@mail.gmail.com>
	<20081009150210.GA19378@34-mo7-2.acn.waw.pl>
Message-ID: <05C0BA7C-B4F2-4EB7-A2CD-E24E085AE0F2@syenar.hu>

+1 to clean this away and to have db rename feature.

Brgds,
Viktor

On 2008.10.09., at 17:02, Przemyslaw Czerpak wrote:

> On Thu, 09 Oct 2008, Lorenzo Fiorini wrote:
>
> Hi Lorenzo,
>
>>> If it's a hack, I'd vote to remove it, or
>>> implement it properly. Looks like skeletons are
>>> falling out of the closet :(
>> I agree, PACK is a critical command and should be as safe as  
>> possible.
>
> And it's probably the reason why Clipper does not support
> user EVAL code in PACK because any error inside this code
> will break packing operation and corrupt the table.
> Personally I think it's much safer to use COPY TO ... / FRENAME()
> Probably we should only add support for RENAME RDD method just like
> we have dbEXISTS and dbDROP so user will not have to know the details
> details of table storage used by RDD.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Thu Oct  9 11:52:57 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Oct  9 11:53:04 2008
Subject: [Harbour] __DBPACK bug in 1.0.1
In-Reply-To: <20081009150210.GA19378@34-mo7-2.acn.waw.pl>
References: <48ECB7E2.9080604@dbtopas.lt>
	<20081009112700.GA5127@34-mo7-2.acn.waw.pl>
	<F60BB247-17D6-456F-89E2-296F57A12307@syenar.hu>
	<9257026e0810090648k53e82cew991d1df8fe153ec6@mail.gmail.com>
	<20081009150210.GA19378@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0810090852s7cb84294g72ea5f5169f93f14@mail.gmail.com>

On Thu, Oct 9, 2008 at 5:02 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Personally I think it's much safer to use COPY TO ... / FRENAME()
> Probably we should only add support for RENAME RDD method just like
> we have dbEXISTS and dbDROP so user will not have to know the details
> details of table storage used by RDD.

I've always had a SAFEPACK() function made using copy to for
!deleted() delete the old file, rename to the old name.

In this way under Novell I could recover the deleted files if necessary.

Many years ago :)

best regards,
Lorenzo
From harbour.01 at syenar.hu  Thu Oct  9 12:10:42 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  9 12:10:59 2008
Subject: [Harbour] __DBPACK bug in 1.0.1
In-Reply-To: <9257026e0810090852s7cb84294g72ea5f5169f93f14@mail.gmail.com>
References: <48ECB7E2.9080604@dbtopas.lt>
	<20081009112700.GA5127@34-mo7-2.acn.waw.pl>
	<F60BB247-17D6-456F-89E2-296F57A12307@syenar.hu>
	<9257026e0810090648k53e82cew991d1df8fe153ec6@mail.gmail.com>
	<20081009150210.GA19378@34-mo7-2.acn.waw.pl>
	<9257026e0810090852s7cb84294g72ea5f5169f93f14@mail.gmail.com>
Message-ID: <BD701294-8EB1-4449-BC5E-84976FF2A6B8@syenar.hu>

This is something I do too.

[ __DBPACK() was not working too well for memo
fields in Clipper, AFAIR. I don't use memo fields,
so I may be wrong, and maybe Harbour has this fixed. ]

Brgds,
Viktor

On 2008.10.09., at 17:52, Lorenzo Fiorini wrote:

> On Thu, Oct 9, 2008 at 5:02 PM, Przemyslaw Czerpak  
> <druzus@acn.waw.pl> wrote:
>
>> Personally I think it's much safer to use COPY TO ... / FRENAME()
>> Probably we should only add support for RENAME RDD method just like
>> we have dbEXISTS and dbDROP so user will not have to know the details
>> details of table storage used by RDD.
>
> I've always had a SAFEPACK() function made using copy to for
> !deleted() delete the old file, rename to the old name.
>
> In this way under Novell I could recover the deleted files if  
> necessary.
>
> Many years ago :)
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From toninhofwi at yahoo.com.br  Thu Oct  9 12:25:12 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Thu Oct  9 12:23:58 2008
Subject: [Harbour] rddads: possible problem
In-Reply-To: <A0BE1C0A-5F69-4100-8421-6173D52A099B@syenar.hu>
References: <3fupe49hrii3iguk0t8a7ofa8rrrp0ricp@4ax.com>
	<42kqe4dddi7thoo8qhgd2e95ga8n2sc1pq@4ax.com>
	<A0BE1C0A-5F69-4100-8421-6173D52A099B@syenar.hu>
Message-ID: <k7bse4hfrm2703qgfatp57tcm2s7t550vm@4ax.com>

>IMO, a low level RDD function shouldn't
>throw an RTE directly, just signal the
>problem to the upper level layer, and let
>it decide what to do. (apparently this
>rule is not followed in RDDADS, so may be
>I'm wrong with this.)

Hi Viktor, 

I agree, but advantage API doesn?t RTE, it simply fail if server is
busy for example and set AE_SUCCESS to no zero value.

I know this because I see some entries in ADS_ERR.ADT that are out of
my control, for example:

Error code 7017 called from ads_source keyno.c line 608.


>Also, there are many other similar calls made in ads1.c
Exactly, for this reason if I?m thinking in the right way, there are a
lot of places that should be fixed.


Best regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From harbour.01 at syenar.hu  Thu Oct  9 12:33:20 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  9 12:33:41 2008
Subject: [Harbour] rddads: possible problem
In-Reply-To: <k7bse4hfrm2703qgfatp57tcm2s7t550vm@4ax.com>
References: <3fupe49hrii3iguk0t8a7ofa8rrrp0ricp@4ax.com>
	<42kqe4dddi7thoo8qhgd2e95ga8n2sc1pq@4ax.com>
	<A0BE1C0A-5F69-4100-8421-6173D52A099B@syenar.hu>
	<k7bse4hfrm2703qgfatp57tcm2s7t550vm@4ax.com>
Message-ID: <81CEC8F0-5F5A-47EB-83B8-EBE3F5F1D09D@syenar.hu>

>
Hi Toninho,

> Hi Viktor,
>
> I agree, but advantage API doesn?t RTE, it simply fail if server is
> busy for example and set AE_SUCCESS to no zero value.
>
> I know this because I see some entries in ADS_ERR.ADT that are out of
> my control, for example:
>
> Error code 7017 called from ads_source keyno.c line 608.

Yes, maybe we're talking about the same thing (just
you code example seemed to have shown otherwise),
what I'm saying is to pass the error to the upper level
RDD layer to handle the error, instead of making an
RTE directly from ads1.c. This is important to have
RDDs behaving similarly from the applications' POV.

This example should IMO be handled exactly the same
way as a simple network read error / timeout on a
non-ADS RDD.

>> Also, there are many other similar calls made in ads1.c
> Exactly, for this reason if I?m thinking in the right way, there are a
> lot of places that should be fixed.

Catching errors should be added where needed I agree,
but handling should be done by passing back return value
to RDD core. Places where RTE is thrown directly from
ads1.c (low-level RDD code), are wrong, and ideally
should be fixed, too.

Brgds,
Viktor

From bedipritpal at hotmail.com  Thu Oct  9 13:36:48 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Oct  9 13:36:55 2008
Subject: [Harbour] 2008-10-09 10:36 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <19903725.post@talk.nabble.com>


2008-10-09 10:36 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  ! harbour/bin/bld.bat
    + Added _C_MT=-tWM if HB_MT==MT
      BCC32 includes cw32mt.lib if -tWM is present as a switch.
      Now setting HB_MT=MT will allow to compile and link a prg in MT mode.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-10-09-10%3A36-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp19903725p19903725.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Thu Oct  9 13:41:42 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Oct  9 13:41:49 2008
Subject: [Harbour] 2008-10-09 10:48 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <19903728.post@talk.nabble.com>


2008-10-09 10:48 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  ! harbour/bin/bld.bat
    + _C_MT= if not HB_MT==MT
      Forgot to clear the variable if mt mode is switched.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-10-09-10%3A48-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp19903728p19903728.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Thu Oct  9 14:06:32 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct  9 14:06:44 2008
Subject: [Harbour] 2008-10-09 10:36 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <19903725.post@talk.nabble.com>
References: <19903725.post@talk.nabble.com>
Message-ID: <B020FC98-5F88-4335-9408-3A41742A950D@syenar.hu>

Hi Pritpal,

Thanks.

I think -tWM can safely be used even for non-MT
Harbour, so it might just as well be made the default.

I've used this switch since long for BCC locally.

Brgds,
Viktor

On 2008.10.09., at 19:36, Pritpal Bedi wrote:

>
> 2008-10-09 10:36 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>  ! harbour/bin/bld.bat
>    + Added _C_MT=-tWM if HB_MT==MT
>      BCC32 includes cw32mt.lib if -tWM is present as a switch.
>      Now setting HB_MT=MT will allow to compile and link a prg in MT  
> mode.
>
> Regards
> Pritpal Bedi
> -- 
> View this message in context: http://www.nabble.com/2008-10-09-10%3A36-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp19903725p19903725.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From teo at windtelsoft.com  Thu Oct  9 14:21:03 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Thu Oct  9 14:16:05 2008
Subject: [Harbour] Missing hbverbld.h ?
In-Reply-To: <20081009134730.GA25098@34-mo7-2.acn.waw.pl>
References: <200810090757.34878.teo@windtelsoft.com>
	<20081009134730.GA25098@34-mo7-2.acn.waw.pl>
Message-ID: <200810091321.03718.teo@windtelsoft.com>

On Thursday 09 October 2008 08:47:31 am Przemyslaw Czerpak wrote:
> On Thu, 09 Oct 2008, Teo Fonrouge wrote:
>
> Hi Teo,
>
> > Why is this file not in current SVN and is referenced in harbour.c ?
>
> It's created dynamically by hbpp when Harbour is compiled.

Hello Przemek,

Thank you. I have checked this and now I know why and when this (and other) 
files are created dynamycally during the Harbour build process.

In another somewhat related topic:

Do you know why the header of some files is different if you download the file 
by following the links provided by sourceforge.net ?

i.e. if you download the file from the following link (a tar gz file):

http://harbour-project.svn.sourceforge.net/viewvc/harbour-project/trunk/harbour.tar.gz?view=tar

It will contain the full harbour source tree of files, however, if you check 
the heading of the "ChangeLog" file against the one in the local svn copy, 
you'll see:

The heading of the file in the local copy:
-------------------------------
/*
 * $Id: ChangeLog 9588 2008-10-09 12:29:02Z tfonrouge $
 */
-------------------------------


The heading of the file contained in the tarball:
-------------------------------
/*
 * $Id$
 */
-------------------------------

This difference causes that it fails the creation of the hbverbld.h from hbpp. 
And for this reason, currently it's not possible to create packages from a 
tarball downloaded directly from the SVN at sourceforge.net

May be we need to find an alternative method to make hbpp to obtain the info 
needed to create the hbverbld.h file.


best regards,

Teo
From druzus at acn.waw.pl  Thu Oct  9 14:51:40 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  9 14:51:42 2008
Subject: [Harbour] 2008-10-09 20:51 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081009185140.GA17892@34-mo7-2.acn.waw.pl>

2008-10-09 20:51 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/common.mak
  * harbour/source/rtl/Makefile
    + added thfuncx.prg

  * harbour/source/rtl/thfuncx.prg
    + added ThreadObject() function

  * harbour/source/rtl/tthreadx.prg
    + added xBase++ compatible TThread class.
      Special thanks to Pritpal Bedi for class skeleton with info about
      xbase++.
      Now only basic functionality is supported though it was enough to
      compile and execute examples Pritpal sent. I'm leaving rest for
      xBase++ users.
      BTW The examples suggest that in xbase++ DispOutAt() does not change
      cursor position. It's not Clipper compatible so I cannot make it
      in Harbour though I can add new function which will work in such way.

best regards
Przemek
From druzus at acn.waw.pl  Thu Oct  9 15:38:03 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  9 15:38:06 2008
Subject: [Harbour] Missing hbverbld.h ?
In-Reply-To: <200810091321.03718.teo@windtelsoft.com>
References: <200810090757.34878.teo@windtelsoft.com>
	<20081009134730.GA25098@34-mo7-2.acn.waw.pl>
	<200810091321.03718.teo@windtelsoft.com>
Message-ID: <20081009193803.GA30433@34-mo7-2.acn.waw.pl>

On Thu, 09 Oct 2008, Teo Fonrouge wrote:

Hi Teo,

> Do you know why the header of some files is different if you download the file 
> by following the links provided by sourceforge.net ?
> i.e. if you download the file from the following link (a tar gz file):
> http://harbour-project.svn.sourceforge.net/viewvc/harbour-project/trunk/harbour.tar.gz?view=tar
> It will contain the full harbour source tree of files, however, if you check 
> the heading of the "ChangeLog" file against the one in the local svn copy, 
> you'll see:
> The heading of the file in the local copy:
> -------------------------------
> /*
>  * $Id: ChangeLog 9588 2008-10-09 12:29:02Z tfonrouge $
>  */
> -------------------------------
> The heading of the file contained in the tarball:
> -------------------------------
> /*
>  * $Id$
>  */
> -------------------------------

Yes, it's standard behavior.

> This difference causes that it fails the creation of the hbverbld.h from hbpp. 
> And for this reason, currently it's not possible to create packages from a 
> tarball downloaded directly from the SVN at sourceforge.net
> May be we need to find an alternative method to make hbpp to obtain the info 
> needed to create the hbverbld.h file.

I introduce automatic revision number storing to eliminate the
problem we had checking which version user used reporting the
problem and to verify the final binaries. Personally I'm finding
it very usable and I can easy confirm the version used by user.
F.e. see my recent message to Phil. Believe me that it helps and
safe time. Unfortunately keyword fields are not resolved when you
download tarball directly from SVN.
We can change hbpp to ignore missing keywords and always generate
hbverbld.h file. But in such case we will have binaries without
revision number.
We can also make trick and add hbverbld.h to SVN. In such case it
will be periodically updated if developer makes clean build before
commit though it will always have revision number one less then the
user commit so it may introduce more confusions then help.
I'd prefer <unknown> as revision number instead of wrong number.
If you find it useful then I can change hbpp to ignore unexpanded
keywords and replace them by sth like "<unknown>".

best regards,
Przemek
From bedipritpal at hotmail.com  Thu Oct  9 15:46:37 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Oct  9 15:46:45 2008
Subject: [Harbour] 2008-10-09 20:51 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081009185140.GA17892@34-mo7-2.acn.waw.pl>
References: <20081009185140.GA17892@34-mo7-2.acn.waw.pl>
Message-ID: <19906002.post@talk.nabble.com>


Thanks Przemek


Przemyslaw Czerpak-2 wrote:
> 
> 2008-10-09 20:51 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/common.mak
>   * harbour/source/rtl/Makefile
>     + added thfuncx.prg
> 
>   * harbour/source/rtl/thfuncx.prg
>     + added ThreadObject() function
> 
>   * harbour/source/rtl/tthreadx.prg
>     + added xBase++ compatible TThread class.
> 

A very well constructed class.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/2008-10-09-20%3A51-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp19905129p19906002.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Thu Oct  9 16:00:15 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Oct  9 16:00:53 2008
Subject: [Harbour] __DBPACK bug in 1.0.1
In-Reply-To: <20081009150210.GA19378@34-mo7-2.acn.waw.pl>
References: <48ECB7E2.9080604@dbtopas.lt><20081009112700.GA5127@34-mo7-2.acn.waw.pl><F60BB247-17D6-456F-89E2-296F57A12307@syenar.hu><9257026e0810090648k53e82cew991d1df8fe153ec6@mail.gmail.com>
	<20081009150210.GA19378@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F052@SRV02.deltain.net>

Is possible think a future version of dbf Who permit of pack and modify structure also if table is opened from other user
Is a limitation of dbf that In sql server is possible ?
No shared pack,No shared add field to structure

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Thursday, October 09, 2008 5:02 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] __DBPACK bug in 1.0.1

On Thu, 09 Oct 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> > If it's a hack, I'd vote to remove it, or
> > implement it properly. Looks like skeletons are
> > falling out of the closet :(
> I agree, PACK is a critical command and should be as safe as possible.

And it's probably the reason why Clipper does not support
user EVAL code in PACK because any error inside this code
will break packing operation and corrupt the table.
Personally I think it's much safer to use COPY TO ... / FRENAME()
Probably we should only add support for RENAME RDD method just like
we have dbEXISTS and dbDROP so user will not have to know the details
details of table storage used by RDD.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From teo at windtelsoft.com  Thu Oct  9 16:12:03 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Thu Oct  9 16:06:50 2008
Subject: [Harbour] Missing hbverbld.h ?
In-Reply-To: <20081009193803.GA30433@34-mo7-2.acn.waw.pl>
References: <200810090757.34878.teo@windtelsoft.com>
	<200810091321.03718.teo@windtelsoft.com>
	<20081009193803.GA30433@34-mo7-2.acn.waw.pl>
Message-ID: <200810091512.03174.teo@windtelsoft.com>

On Thursday 09 October 2008 02:38:03 pm Przemyslaw Czerpak wrote:
> On Thu, 09 Oct 2008, Teo Fonrouge wrote:
>
> Hi Teo,
>
> > Do you know why the header of some files is different if you download the
> > file by following the links provided by sourceforge.net ?
> > i.e. if you download the file from the following link (a tar gz file):
> > http://harbour-project.svn.sourceforge.net/viewvc/harbour-project/trunk/h
> >arbour.tar.gz?view=tar It will contain the full harbour source tree of
> > files, however, if you check the heading of the "ChangeLog" file against
> > the one in the local svn copy, you'll see:
> > The heading of the file in the local copy:
> > -------------------------------
> > /*
> >  * $Id: ChangeLog 9588 2008-10-09 12:29:02Z tfonrouge $
> >  */
> > -------------------------------
> > The heading of the file contained in the tarball:
> > -------------------------------
> > /*
> >  * $Id$
> >  */
> > -------------------------------
>
> Yes, it's standard behavior.
>
> > This difference causes that it fails the creation of the hbverbld.h from
> > hbpp. And for this reason, currently it's not possible to create packages
> > from a tarball downloaded directly from the SVN at sourceforge.net
> > May be we need to find an alternative method to make hbpp to obtain the
> > info needed to create the hbverbld.h file.
>
> I introduce automatic revision number storing to eliminate the
> problem we had checking which version user used reporting the
> problem and to verify the final binaries. Personally I'm finding
> it very usable and I can easy confirm the version used by user.
> F.e. see my recent message to Phil. Believe me that it helps and
> safe time. Unfortunately keyword fields are not resolved when you
> download tarball directly from SVN.

Hello Przemek,

Agree, definitively we must keep this feature.

> We can change hbpp to ignore missing keywords and always generate
> hbverbld.h file. But in such case we will have binaries without
> revision number.
> We can also make trick and add hbverbld.h to SVN. In such case it
> will be periodically updated if developer makes clean build before
> commit though it will always have revision number one less then the
> user commit so it may introduce more confusions then help.

Agree.

> I'd prefer <unknown> as revision number instead of wrong number.
> If you find it useful then I can change hbpp to ignore unexpanded
> keywords and replace them by sth like "<unknown>".

Please do that, at least, it won't stop users that wish build Harbour from the 
tarball obtained directly from sourceforge.


best regards,

Teo
From bedipritpal at hotmail.com  Thu Oct  9 16:26:47 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Oct  9 16:26:54 2008
Subject: [Harbour] 2008-10-09 10:36 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <B020FC98-5F88-4335-9408-3A41742A950D@syenar.hu>
References: <19903725.post@talk.nabble.com>
	<B020FC98-5F88-4335-9408-3A41742A950D@syenar.hu>
Message-ID: <19906654.post@talk.nabble.com>


Viktor


Szak?ts Viktor wrote:
> 
> I think -tWM can safely be used even for non-MT
> Harbour, so it might just as well be made the default.
> 
> I've used this switch since long for BCC locally.
> 

Me too. And I have tested it today also.
Probably cw32mt.lib contains all the functionality
of cw32.lib + _startthreadex family of functions.

It is safe to include -tWM as default.

Please do it.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/2008-10-09-10%3A36-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp19903725p19906654.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Thu Oct  9 17:00:29 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  9 17:00:29 2008
Subject: [SPAM]  Re: [Harbour] 2008-10-09 20:51 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <19906002.post@talk.nabble.com>
References: <20081009185140.GA17892@34-mo7-2.acn.waw.pl>
	<19906002.post@talk.nabble.com>
Message-ID: <20081009210029.GA24108@34-mo7-2.acn.waw.pl>

On Thu, 09 Oct 2008, Pritpal Bedi wrote:

Hi Pritpal,

> >   * harbour/source/rtl/tthreadx.prg
> >     + added xBase++ compatible TThread class.
> A very well constructed class.

It's your job not mine :-)
I only implemented few functions.
It has to be updated yet for missing functionality.
But it has to be done by xBase++ user who knows this
language and can validate some things which are not
clear for me after reading documentation. The tests
results with dbDetach() shows that even the documentation
does not describe the real xbase++ behavior.
F.e. it looks that xbase++ can have methods and object variables
with the same name. It means that:
   ? o:var
gives different code then:
   ? o:var()
or at least documentation it wrong describing :atStart and :atEnd
methods and variables.
It's interesting functionality I even wanted to add but it's not
Clipper compatible though probably we can hide the difference
by introducing "suggested" action to PCODE so o:var() will work
as o:var when there is no method with the name "var".
If other developers think it's important then I can add such
extension.
One thing in THREAD class will need extension in HVM thread code
if we want to implement it as in documentation: restart in the
same thread after QUIT. It will be necessary to introduce new
state so thread will not finish but it will wait for other jobs.
But the same can also be implemented as new thread executed in the
same THREAD object. I will not be surprised if xbase++ makes such
things in some cases without updating threadID() number (or maybe
even this number is also changed).
And here is the problem. I do not want to change HVM core code
only to implement some documented xbase++ behavior if I do not
know if documentation is correct or if I correctly guess what
xbase++ does when documentation is not precise enough. It's
possible that I'll make sth what is not necessary at all because
real implementation in xbase++ can be replicated using some very
simple solution.
I also do not know how many people will want to use it and will be
interesting in full xbase++ compatibility.
So I'm leaving other modifications to xbase++ users.
If you will need some help or information about Harbour thread
implementation then of course I'll do what I can.

The thread priority I left untouched. There are very big differences
between PTHREAD, MS-Win and OS2 here and 1-st I will have to think
about some general Harbour layer which will be portable and which
things will be usable, f.e. I do not see big sense in adding real
time threads support to .prg code. Manipulating thread priority
strongly interacts with concurrent execution and user need real deep
knowledge about OS to know what may happen in some cases. At this
moment I see as usable for users IDLE priority which means that
threads is executed only when others does not need CPU, f.e. they
are waiting for disk IO or sth like that.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct  9 17:06:58 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  9 17:06:58 2008
Subject: [SPAM]  Re: [Harbour] 2008-10-09 10:36 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <19906654.post@talk.nabble.com>
References: <19903725.post@talk.nabble.com>
	<B020FC98-5F88-4335-9408-3A41742A950D@syenar.hu>
	<19906654.post@talk.nabble.com>
Message-ID: <20081009210658.GB24108@34-mo7-2.acn.waw.pl>

On Thu, 09 Oct 2008, Pritpal Bedi wrote:

Hi Pritpal,

> > I think -tWM can safely be used even for non-MT
> > Harbour, so it might just as well be made the default.
> > I've used this switch since long for BCC locally.
> Me too. And I have tested it today also.
> Probably cw32mt.lib contains all the functionality
> of cw32.lib + _startthreadex family of functions.

Rather it contains MT safe version of CRTL functions
included in cw32.lib + MT functions.
Some functions or variables like printf()/malloc()/errno
may not be MT safe in default implementation. It's the
reason why I used _beginthreadex() instead of WIN API:
CreateThread(). I wanted to simply force linking MT version
of CRTL in some Windows C compiler to not be surprised
that people reports strange errors, f.e. because errno
is static variable.

> It is safe to include -tWM as default.

It's even suggested for 3-rd party code which may use own
threads and CRTL functions.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct  9 18:15:12 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  9 18:15:13 2008
Subject: [Harbour] 2008-10-10 00:14 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081009221512.GA13510@34-mo7-2.acn.waw.pl>

2008-10-10 00:14 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapigt.h
  * harbour/source/rtl/gtapi.c
    + added hb_gtPutText() C function

  * harbour/source/rtl/console.c
    + added HB_DISPOUTAT() which works like DISPOUTAT but does not change
      cursor position. xBase++ users can use
         #xtranslate DispOutAt( <x,...> ) => hb_dispOutAt( <x> )
      for xBase++ compatible code

best regards
Przemek
From bedipritpal at hotmail.com  Thu Oct  9 18:44:30 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Oct  9 18:44:38 2008
Subject: [Harbour] [SPAM]  Re: 2008-10-09 20:51 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <20081009210029.GA24108@34-mo7-2.acn.waw.pl>
References: <20081009185140.GA17892@34-mo7-2.acn.waw.pl>
	<19906002.post@talk.nabble.com>
	<20081009210029.GA24108@34-mo7-2.acn.waw.pl>
Message-ID: <19908747.post@talk.nabble.com>


Przemek,

<<<
It has to be updated yet for missing functionality.
But it has to be done by xBase++ user who knows this
language and can validate some things which are not
clear for me after reading documentation. The tests
results with dbDetach() shows that even the documentation
does not describe the real xbase++ behavior.
>>>

I left Xbase++ development in the year 2003 probably. But 
still I have the working code how did I exploited MT. Will let you
know what else is needed exactly for the real-time usage.

What comes to my mind is: 
_beginthreadex() accepts a parameter as state of the thread:

uintptr_t _beginthreadex( 
   void *security,
   unsigned stack_size,
   unsigned ( *start_address )( void * ),
   void *arglist,
   unsigned initflag,
   unsigned *thrdaddr 
);

initflag : Initial state of a new thread (0 for running or CREATE_SUSPENDED
for suspended); use ResumeThread to execute the thread

Only this may be important. But not needed AFAIT.


<<<
F.e. it looks that xbase++ can have methods and object variables
with the same name. It means that:
   ? o:var
gives different code then:
   ? o:var()
or at least documentation it wrong describing :atStart and :atEnd
methods and variables.
It's interesting functionality I even wanted to add but it's not
Clipper compatible though probably we can hide the difference
by introducing "suggested" action to PCODE so o:var() will work
as o:var when there is no method with the name "var".
If other developers think it's important then I can add such
extension.
>>>

I will look deep into Xbase++ documentaion to understand what they 
are doing. BTW, it seems OK to have such functionality. May be this
behavior is simulated via access/assign methods.

<<<
One thing in THREAD class will need extension in HVM thread code
if we want to implement it as in documentation: restart in the
same thread after QUIT. It will be necessary to introduce new
state so thread will not finish but it will wait for other jobs.
But the same can also be implemented as new thread executed in the
same THREAD object. I will not be surprised if xbase++ makes such
things in some cases without updating threadID() number (or maybe
even this number is also changed).
And here is the problem. I do not want to change HVM core code
only to implement some documented xbase++ behavior if I do not
know if documentation is correct or if I correctly guess what
xbase++ does when documentation is not precise enough. It's
possible that I'll make sth what is not necessary at all because
real implementation in xbase++ can be replicated using some very
simple solution.
>>>

For now we can leave this functionality. I do not see any usage in
real-time applications.


<<<
I also do not know how many people will want to use it and will be
interesting in full xbase++ compatibility.
So I'm leaving other modifications to xbase++ users.
If you will need some help or information about Harbour thread
implementation then of course I'll do what I can.
>>>

This feature may force some Xbase++ users to compile few of their
existing applications on Harbour platform. I know a few are already giving
a go to Harbour. May be it will increase Harbour's acceptance in Xbase++
world. A bail-out situation.

<<<
The thread priority I left untouched. There are very big differences
between PTHREAD, MS-Win and OS2 here and 1-st I will have to think
about some general Harbour layer which will be portable and which
things will be usable, f.e. I do not see big sense in adding real
time threads support to .prg code. Manipulating thread priority
strongly interacts with concurrent execution and user need real deep
knowledge about OS to know what may happen in some cases. At this
moment I see as usable for users IDLE priority which means that
threads is executed only when others does not need CPU, f.e. they
are waiting for disk IO or sth like that.
>>>

Safe to ignore it. Not needed at all.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-10-09-20%3A51-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp19905129p19908747.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Thu Oct  9 19:43:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  9 19:43:50 2008
Subject: [Harbour] 2008-10-10 01:43 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081009234351.GA30960@34-mo7-2.acn.waw.pl>

2008-10-10 01:43 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbgtcore.h
  * harbour/source/rtl/hbgtcore.c
  * harbour/source/rtl/gtapi.c
    + added new GT methods: LOCK() and UNLOCK()
    * serialize GT access in MT mode - please remember that it's only
      low level serialization to protect access to low GT resources.
      It has nothing to application level screen output from different
      threads which has to be serialized by programmer if necessary.

  * harbour/source/rtl/tthreadx.prg
    * use HB_THREAD_INHERIT_PUBLIC as thread attribute for thread
      started by oThread:start() to emulate xbase++ PUBLIC variables
      behavior

best regards
Przemek
From druzus at acn.waw.pl  Thu Oct  9 19:45:15 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  9 19:45:18 2008
Subject: [SPAM]  Re: [Harbour] [SPAM]  Re: 2008-10-09 20:51 UTC+0200
	Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <19908747.post@talk.nabble.com>
References: <20081009185140.GA17892@34-mo7-2.acn.waw.pl>
	<19906002.post@talk.nabble.com>
	<20081009210029.GA24108@34-mo7-2.acn.waw.pl>
	<19908747.post@talk.nabble.com>
Message-ID: <20081009234515.GA20184@34-mo7-2.acn.waw.pl>

On Thu, 09 Oct 2008, Pritpal Bedi wrote:

Hi Pritpal,

> What comes to my mind is: 
> _beginthreadex() accepts a parameter as state of the thread:
> initflag : Initial state of a new thread (0 for running or CREATE_SUSPENDED
> for suspended); use ResumeThread to execute the thread
> Only this may be important. But not needed AFAIT.

This is not portable extension.
PTHREAD intentionally does not have such functionality because
it forces additional overhead in thread startup code.
If you want to run thread in suspended mode to resume it later
then simply use mutex at thread startup.

> I will look deep into Xbase++ documentaion to understand what they 
> are doing. BTW, it seems OK to have such functionality. May be this
> behavior is simulated via access/assign methods.

It's not a problem of access/assign methods and using them
does not change anything.
The problem is in generating code which will be different
for o:var and o:var(), f.e. You have such simple code:

   function f(o)
   return o:var

and in second .prg file:

   function f(o)
   return o:var()

Compiler does not know anything about class declaration so ACCESS/
ASSIGN methods does not exist for it here.
It has to generate code which will inform HVM the in 1-st case we want
to access instance variable and in second one execute method so the code
has to be different.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct 10 00:26:52 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 10 00:26:51 2008
Subject: [Harbour] 2008-10-10 06:26 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081010042652.GA5270@34-mo7-2.acn.waw.pl>

2008-10-10 06:26 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbvm.h
  * harbour/source/vm/hvm.c
    + added hb_vmProcessDynLibSymbols() which works like
      hb_vmProcessSymbolsEx() but always mark registered modules as
      dynamic

  * harbour/source/vm/maindllp.c
    * redirect hb_vmProcessSymbolsEx() to hb_vmProcessDynLibSymbols()

  * harbour/source/vm/thread.c
    * disabled some low level locking code in non MT HVM mode

best regards
Przemek
From harbour.01 at syenar.hu  Fri Oct 10 03:11:39 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 10 03:11:50 2008
Subject: [SPAM] Re: [Harbour] 2008-10-09 20:51 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081009210029.GA24108@34-mo7-2.acn.waw.pl>
References: <20081009185140.GA17892@34-mo7-2.acn.waw.pl>
	<19906002.post@talk.nabble.com>
	<20081009210029.GA24108@34-mo7-2.acn.waw.pl>
Message-ID: <12807682-625A-4CE8-8810-897D3509D5EB@syenar.hu>

>
Hi Przemek,

> The thread priority I left untouched. There are very big differences
> between PTHREAD, MS-Win and OS2 here and 1-st I will have to think
> about some general Harbour layer which will be portable and which
> things will be usable, f.e. I do not see big sense in adding real
> time threads support to .prg code. Manipulating thread priority
> strongly interacts with concurrent execution and user need real deep
> knowledge about OS to know what may happen in some cases. At this
> moment I see as usable for users IDLE priority which means that
> threads is executed only when others does not need CPU, f.e. they
> are waiting for disk IO or sth like that.

Idle priority would definitely be nice, besides that 3 levels
seems reasonably good IMO, a probably possible to properly map
for each threading APIs. Another possibility is to get the
lowest number of priority levels supported by threading APIs.

BTW, XPP has IDLE, LOWEST, BELOWNORMAL, NORMAL, ABOVENORMAL,
HIGHEST, and even TIME_CRICITAL, which - I agree - is not
really important, or maybe even dangerous in a normal app.

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Oct 10 03:26:12 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 10 03:26:22 2008
Subject: [SPAM] Re: [Harbour] [SPAM] Re: 2008-10-09 20:51 UTC+0200
	Przemyslaw Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <20081009234515.GA20184@34-mo7-2.acn.waw.pl>
References: <20081009185140.GA17892@34-mo7-2.acn.waw.pl>
	<19906002.post@talk.nabble.com>
	<20081009210029.GA24108@34-mo7-2.acn.waw.pl>
	<19908747.post@talk.nabble.com>
	<20081009234515.GA20184@34-mo7-2.acn.waw.pl>
Message-ID: <873CC5A4-ADD3-4E34-9F65-B4CB055455B3@syenar.hu>

> It's not a problem of access/assign methods and using them
> does not change anything.
> The problem is in generating code which will be different
> for o:var and o:var(), f.e. You have such simple code:
>
>   function f(o)
>   return o:var
>
> and in second .prg file:
>
>   function f(o)
>   return o:var()
>
> Compiler does not know anything about class declaration so ACCESS/
> ASSIGN methods does not exist for it here.
> It has to generate code which will inform HVM the in 1-st case we want
> to access instance variable and in second one execute method so the  
> code
> has to be different.

I had always thought this should be the way it should work.
This is how it's done in most languages, and the fact that
they were the same in Clipper is probably because class
implementation was tackled onto the code later and/or they
had just cut a corner, or they may have thought this way
the language is more "flexible".

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Oct 10 03:28:32 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 10 03:28:34 2008
Subject: [Harbour] 2008-10-10 09:27 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92aa9$Blat.v2.6.2$cc67cb66$a2454a1d8ce@127.0.0.1>

2008-10-10 09:27 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * bin/bld.bat
    + -tWM BCC32 switch made the all-time default.

  * include/hbextern.ch
    + Added new functions.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Oct 10 03:43:33 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 10 03:43:36 2008
Subject: [Harbour] 2008-10-10 09:41 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92aab$Blat.v2.6.2$e5717be6$87c5d1edb5e@127.0.0.1>

2008-10-10 09:41 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * common.mak
  * make_b32.mak
  * make_vc.mak
  * make_gcc.mak
    - Removed option HB_BUILD_ST to build another version 
      of Harbour MT build [for non-GNU builds], or forced 
      SingleThreaded (non -tWM) Harbour builds.
    * Modified to not allow CFLAGSMT to be tweaked from the 
      outside [for non-GNU builds].
--
Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Fri Oct 10 04:03:33 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Oct 10 04:03:40 2008
Subject: [Harbour] hbcompat.ch issue
Message-ID: <9257026e0810100103x6c041e57l7639d0a639f8b78a@mail.gmail.com>

In hbcompact.ch has been added:
...
#xtranslate __CopyFile([<x,...>])       => xhb_CopyFile(<x>)
...
this means that using hbcompat.ch, the "standard" __CopyFile has been
redirected to xhb_CopyFile(<x>).

IMHO hbcompat.ch should only "try" to translate some function names
and syntax differences but never "redirect" standard Harbour functions
to something else.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Fri Oct 10 04:47:33 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 10 04:47:38 2008
Subject: [Harbour] 2008-10-10 10:42 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92ab4$Blat.v2.6.2$d672aaee$137c2993be98@127.0.0.1>

2008-10-10 10:42 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * make_vc.mak
  * make_gcc.mak
    * Removed special 'set HB_GT_LIB=gtXXX' support. For the exact 
      same effect - in case you want to modify default GT at 
      build time, which is not recommended -, pls use this:
      'set C_USR=-DHB_GT_LIB=XXX' where XXX is 'wvt', 'std', etc.
    - Removed HARBOURFLAGSDLL, LDFLAGSDLL, CFLAGSDLL as public options. 
      It's better to keep these settings common IMO, and handle 
      all DLL subtleties in our make files.
    + L_USR is now respected for .dlls, too.
    ! Fixed make_gcc.mak internal HARBOURFLAGSDLL to be in sync 
      with the other .mak files (removed -l switch).
    - Removed HB_BUILD_MODE for VC builds. Now C/C++ is left to 
      the default value (which is C mode for core), and it's possible 
      to override using:
      'set C_USR=-TP' for C++ mode (or -TC for forced C mode).
    % Other minor cleanups.

  * contrib/mtpl_b32.mak
  * contrib/mtpl_vc.mak
    - Removed HB_BUILD_MODE undocumented options from contrib 
      make files. For Borland C++ mode, use 'set C_USR=-P'.
      For VC, see above.
    - Removed HB_BUILD_ST undocumented option.
    % Other minor cleanups.
      
  * contrib/xhb/hbcompat.ch
  * contrib/xhb/xhb.ch
    ! Moved __COPYFILE() translation to xhb.ch.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Oct 10 04:50:37 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 10 04:50:42 2008
Subject: [Harbour] 2008-10-10 10:50 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92ab5$Blat.v2.6.2$4417afe0$15d43c010708@127.0.0.1>

2008-10-10 10:50 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbextern.ch
    ! Fixed XPP class names.
--
Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Fri Oct 10 04:57:21 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Oct 10 04:57:28 2008
Subject: [Harbour] 2008-10-10 10:42 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c92ab4$Blat.v2.6.2$d672aaee$137c2993be98@127.0.0.1>
References: <01c92ab4$Blat.v2.6.2$d672aaee$137c2993be98@127.0.0.1>
Message-ID: <9257026e0810100157x6d44a132nc5c82c8f18132c7e@mail.gmail.com>

On Fri, Oct 10, 2008 at 10:47 AM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

>  * contrib/xhb/hbcompat.ch
>  * contrib/xhb/xhb.ch
>    ! Moved __COPYFILE() translation to xhb.ch.

Many thanks.

best regards,
Lorenzo
From druzus at acn.waw.pl  Fri Oct 10 06:36:45 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 10 06:36:50 2008
Subject: [Harbour] rddads: possible problem
In-Reply-To: <81CEC8F0-5F5A-47EB-83B8-EBE3F5F1D09D@syenar.hu>
References: <3fupe49hrii3iguk0t8a7ofa8rrrp0ricp@4ax.com>
	<42kqe4dddi7thoo8qhgd2e95ga8n2sc1pq@4ax.com>
	<A0BE1C0A-5F69-4100-8421-6173D52A099B@syenar.hu>
	<k7bse4hfrm2703qgfatp57tcm2s7t550vm@4ax.com>
	<81CEC8F0-5F5A-47EB-83B8-EBE3F5F1D09D@syenar.hu>
Message-ID: <20081010103645.GA16221@34-mo7-2.acn.waw.pl>

On Thu, 09 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor and Toninho:

> Catching errors should be added where needed I agree,
> but handling should be done by passing back return value
> to RDD core. Places where RTE is thrown directly from
> ads1.c (low-level RDD code), are wrong, and ideally
> should be fixed, too.

It will not be such easy as you think.
Such solution is very nice but to make it it will be necessary
to pass whole error object throw RDD API and so far there is no
such functionality and only simple error code can be returned.
It does not contain enough information to generate valid RT
error with all flags. In few places I'm using it passing simple
error code (f.e. in DBFFPT) but it's only local to given RDD.
In some places RT errors even have to be generated directly
inside methods where they were detected to chose valid action
like DEFAULT/REPEAT or allow user code in error block to resolve
the problem before returning with REPEAT flag. When I was working
on native RDDs people asked me to replicate exact Clipper errors
position because they use them in their custom error blocks.
BTW ADS* RDDs does not replicate it well and it was even reported
few times in the past. In summary there is no way to realize
exactly what you want. We inherited RDD API from Clipper and
we also try to mimic Clipper behavior as close as possible.

In this case sth wrong happens in ACE/ADS layer and we probably
should inform user about it. It will be hard to make it in the
way you suggested with current API. The Toninho proposition is
not bad though in some cases values different then AE_SUCCESS
can also be correct for us. Probably after adding such restricted
ACE error verification we will catch all such places and add some
workaround to accept other values in chosen places or add some
additional flags to error object like DEFAULT or REPEAT.
If someone who use ADS can make it and then use this code testing
in real environment then IMHO it's good idea.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Oct 10 06:45:17 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 10 06:45:31 2008
Subject: [Harbour] rddads: possible problem
In-Reply-To: <20081010103645.GA16221@34-mo7-2.acn.waw.pl>
References: <3fupe49hrii3iguk0t8a7ofa8rrrp0ricp@4ax.com>
	<42kqe4dddi7thoo8qhgd2e95ga8n2sc1pq@4ax.com>
	<A0BE1C0A-5F69-4100-8421-6173D52A099B@syenar.hu>
	<k7bse4hfrm2703qgfatp57tcm2s7t550vm@4ax.com>
	<81CEC8F0-5F5A-47EB-83B8-EBE3F5F1D09D@syenar.hu>
	<20081010103645.GA16221@34-mo7-2.acn.waw.pl>
Message-ID: <3726456F-1CF4-4B14-A3D3-302F57946E01@syenar.hu>

>>
Hi folks,

>> Catching errors should be added where needed I agree,
>> but handling should be done by passing back return value
>> to RDD core. Places where RTE is thrown directly from
>> ads1.c (low-level RDD code), are wrong, and ideally
>> should be fixed, too.
>
> It will not be such easy as you think.
> Such solution is very nice but to make it it will be necessary
> to pass whole error object throw RDD API and so far there is no
> such functionality and only simple error code can be returned.
> It does not contain enough information to generate valid RT
> error with all flags. In few places I'm using it passing simple
> error code (f.e. in DBFFPT) but it's only local to given RDD.
> In some places RT errors even have to be generated directly
> inside methods where they were detected to chose valid action
> like DEFAULT/REPEAT or allow user code in error block to resolve
> the problem before returning with REPEAT flag. When I was working
> on native RDDs people asked me to replicate exact Clipper errors
> position because they use them in their custom error blocks.
> BTW ADS* RDDs does not replicate it well and it was even reported
> few times in the past. In summary there is no way to realize
> exactly what you want. We inherited RDD API from Clipper and
> we also try to mimic Clipper behavior as close as possible.
>
> In this case sth wrong happens in ACE/ADS layer and we probably
> should inform user about it. It will be hard to make it in the
> way you suggested with current API. The Toninho proposition is
> not bad though in some cases values different then AE_SUCCESS
> can also be correct for us. Probably after adding such restricted
> ACE error verification we will catch all such places and add some
> workaround to accept other values in chosen places or add some
> additional flags to error object like DEFAULT or REPEAT.
> If someone who use ADS can make it and then use this code testing
> in real environment then IMHO it's good idea.

I'm confused now which solution is good and which is
not, and whom proposed what. But, as a non-ADS user,
for me anything is good.

Brgds,
Viktor

From toninhofwi at yahoo.com.br  Fri Oct 10 06:55:38 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Fri Oct 10 06:54:23 2008
Subject: [Harbour] rddads: possible problem
In-Reply-To: <20081010103645.GA16221@34-mo7-2.acn.waw.pl>
References: <3fupe49hrii3iguk0t8a7ofa8rrrp0ricp@4ax.com>
	<42kqe4dddi7thoo8qhgd2e95ga8n2sc1pq@4ax.com>
	<A0BE1C0A-5F69-4100-8421-6173D52A099B@syenar.hu>
	<k7bse4hfrm2703qgfatp57tcm2s7t550vm@4ax.com>
	<81CEC8F0-5F5A-47EB-83B8-EBE3F5F1D09D@syenar.hu>
	<20081010103645.GA16221@34-mo7-2.acn.waw.pl>
Message-ID: <jlcue4pq72j4hm3a0ei08eubm5af6n82cn@4ax.com>

On Fri, 10 Oct 2008 12:36:45 +0200, you wrote:

>Hi Viktor and Toninho:

>In this case sth wrong happens in ACE/ADS layer and we probably
>should inform user about it. It will be hard to make it in the
>way you suggested with current API. The Toninho proposition is
>not bad though in some cases values different then AE_SUCCESS
>can also be correct for us. Probably after adding such restricted
>ACE error verification we will catch all such places and add some
>workaround to accept other values in chosen places or add some
>additional flags to error object like DEFAULT or REPEAT.
>If someone who use ADS can make it and then use this code testing
>in real environment then IMHO it's good idea.

Hi Przemek, thanks for answer.

I understand that is not better solution but IMO is preferable have a
RTE than simply ignore that ADS server failed.

I can do this change if you prefer and can test it in producion and
only after test commit it.

Thanks and best regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From druzus at acn.waw.pl  Fri Oct 10 07:06:23 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 10 07:06:23 2008
Subject: [Harbour] rddads: possible problem
In-Reply-To: <jlcue4pq72j4hm3a0ei08eubm5af6n82cn@4ax.com>
References: <3fupe49hrii3iguk0t8a7ofa8rrrp0ricp@4ax.com>
	<42kqe4dddi7thoo8qhgd2e95ga8n2sc1pq@4ax.com>
	<A0BE1C0A-5F69-4100-8421-6173D52A099B@syenar.hu>
	<k7bse4hfrm2703qgfatp57tcm2s7t550vm@4ax.com>
	<81CEC8F0-5F5A-47EB-83B8-EBE3F5F1D09D@syenar.hu>
	<20081010103645.GA16221@34-mo7-2.acn.waw.pl>
	<jlcue4pq72j4hm3a0ei08eubm5af6n82cn@4ax.com>
Message-ID: <20081010110623.GA18864@34-mo7-2.acn.waw.pl>

On Fri, 10 Oct 2008, Toninho@fwi wrote:

Hi Toninho,

> >In this case sth wrong happens in ACE/ADS layer and we probably
> >should inform user about it. It will be hard to make it in the
> >way you suggested with current API. The Toninho proposition is
> >not bad though in some cases values different then AE_SUCCESS
> >can also be correct for us. Probably after adding such restricted
> >ACE error verification we will catch all such places and add some
> >workaround to accept other values in chosen places or add some
> >additional flags to error object like DEFAULT or REPEAT.
> >If someone who use ADS can make it and then use this code testing
> >in real environment then IMHO it's good idea.
> Hi Przemek, thanks for answer.
> I understand that is not better solution but IMO is preferable have a
> RTE than simply ignore that ADS server failed.
> I can do this change if you prefer and can test it in producion and
> only after test commit it.

IMO please do it. As real ADS user you can see what is the best
in real life and then tune the actions bound with RTE.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct 10 07:29:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 10 07:29:51 2008
Subject: [Harbour] rddads: possible problem
In-Reply-To: <3726456F-1CF4-4B14-A3D3-302F57946E01@syenar.hu>
References: <3fupe49hrii3iguk0t8a7ofa8rrrp0ricp@4ax.com>
	<42kqe4dddi7thoo8qhgd2e95ga8n2sc1pq@4ax.com>
	<A0BE1C0A-5F69-4100-8421-6173D52A099B@syenar.hu>
	<k7bse4hfrm2703qgfatp57tcm2s7t550vm@4ax.com>
	<81CEC8F0-5F5A-47EB-83B8-EBE3F5F1D09D@syenar.hu>
	<20081010103645.GA16221@34-mo7-2.acn.waw.pl>
	<3726456F-1CF4-4B14-A3D3-302F57946E01@syenar.hu>
Message-ID: <20081010112951.GA23147@34-mo7-2.acn.waw.pl>

On Fri, 10 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I'm confused now which solution is good and which is
> not, and whom proposed what. But, as a non-ADS user,
> for me anything is good.

This problem is partially related with yet another one
which can be resolved by generating RTE by upper level API
as you suggested.
In some cases after RTE control code is returned to the caller
which may need to access AREA structure. But inside errorblock
user code can make some bad things f.e. close current AREA
and the RDD code will access data which were freed. To resolve
it it's necessary to add the way to easy pass error object to
upper level code and execute RTE from it.
I will work on it but it will force modifications in upper level
code, f.e. we will have to add new AREA member which will hold error
object and change all code which uses hb_rddGet*WorkAreaPointer()
to also call hb_rddFreeWorkAreaPointer(). Inside these functions
reference counters will be used so RDD code can check them and
do not release AREA when the counter is greater then one or AREA
has parent relations but only set pending job and close low level
connections or open files to simulate close for user level code.
hb_rddFreeWorkAreaPointer() will also check for error object inside
AREA and will generate RTE when reference counter reach 0.
But such modification will strongly interact with existing 3-rd
party RDD code which will have to be updated too so I still moving
it to the future :-)

best regards,
Przemek
From gfilatov at front.ru  Fri Oct 10 07:35:54 2008
From: gfilatov at front.ru (Grigory Filatov)
Date: Fri Oct 10 07:36:01 2008
Subject: [Harbour] DbCreate()/DbUseArea() bug in 1.1 at Win98SE
Message-ID: <19916619.post@talk.nabble.com>


Hi,

There are the errors with functions DbCreate()/DbUseArea() at Win98SE:

DbCreate():   DBFNTX/1011 Write error: Test.dbf (DOS Error 87)

DbUseArea():   DBFNTX/1012 Corruption detected: test.dbf (DOS Error 87)

in the following small sample:

#include "Dbstruct.ch"

Function Main()

   if !file("test.dbf")
      CreateTable()
   endif

   USE test

   Browse()

   USE

Return nil

Procedure CreateTable
LOCAL aDbf[6][4]

        aDbf[1][ DBS_NAME ] := "Code"
        aDbf[1][ DBS_TYPE ] := "Numeric"
        aDbf[1][ DBS_LEN ]  := 10
        aDbf[1][ DBS_DEC ]  := 0
        //
        aDbf[2][ DBS_NAME ] := "First"
        aDbf[2][ DBS_TYPE ] := "Character"
        aDbf[2][ DBS_LEN ]  := 25
        aDbf[2][ DBS_DEC ]  := 0
        //
        aDbf[3][ DBS_NAME ] := "Last"
        aDbf[3][ DBS_TYPE ] := "Character"
        aDbf[3][ DBS_LEN ]  := 25
        aDbf[3][ DBS_DEC ]  := 0
        //
        aDbf[4][ DBS_NAME ] := "Married"
        aDbf[4][ DBS_TYPE ] := "Logical"
        aDbf[4][ DBS_LEN ]  := 1
        aDbf[4][ DBS_DEC ]  := 0
        //
        aDbf[5][ DBS_NAME ] := "Birth"
        aDbf[5][ DBS_TYPE ] := "Date"
        aDbf[5][ DBS_LEN ]  := 8
        aDbf[5][ DBS_DEC ]  := 0
        //
        aDbf[6][ DBS_NAME ] := "Bio"
        aDbf[6][ DBS_TYPE ] := "Memo"
        aDbf[6][ DBS_LEN ]  := 10
        aDbf[6][ DBS_DEC ]  := 0
        //

        DBCREATE("Test", aDbf)

	Use test

	For i:= 1 To 100
		append blank
		Replace code with i 
		Replace First With 'First Name '+ Str(i)
		Replace Last With 'Last Name '+ Str(i)
		Replace Married With .t.
		replace birth with date()+i-10000
	Next i

	Use

Return

This sample works properly with Harbour 1.0.1 at Win98/XP and
Harbour 1.1.0 at WinXP Home SP1/WinXP Pro SP2.

Harbour Build Info
---------------------------
Version: Harbour 1.1.0dev (Rev. 9584)
PCode version: 0.2
Compiler: Borland C++ 5.5.1 (32 bit)
Platform: Windows 98 4.10.2222 A 

Built on: Oct  9 2008 12:38:51
Last ChangeLog entry: 2008-10-09 10:11 UTC+0200 Viktor Szakats (harbour.01
syenar hu)
ChangeLog SVN version: ChangeLog 9584 2008-10-09 08:12:06Z vszakats
Extra Harbour compiler switches: -l
Extra C compiler switches: -DHB_FM_STATISTICS_OFF -DHB_GUI -DHB_FM_STD_ALLOC

Can someone confirm these issues with Harbour 1.1.0dev at Win98?

--
Regards,
Grigory Filatov
-- 
View this message in context: http://www.nabble.com/DbCreate%28%29-DbUseArea%28%29-bug-in-1.1-at-Win98SE-tp19916619p19916619.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Fri Oct 10 07:46:24 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 10 07:46:37 2008
Subject: [Harbour] rddads: possible problem
In-Reply-To: <20081010112951.GA23147@34-mo7-2.acn.waw.pl>
References: <3fupe49hrii3iguk0t8a7ofa8rrrp0ricp@4ax.com>
	<42kqe4dddi7thoo8qhgd2e95ga8n2sc1pq@4ax.com>
	<A0BE1C0A-5F69-4100-8421-6173D52A099B@syenar.hu>
	<k7bse4hfrm2703qgfatp57tcm2s7t550vm@4ax.com>
	<81CEC8F0-5F5A-47EB-83B8-EBE3F5F1D09D@syenar.hu>
	<20081010103645.GA16221@34-mo7-2.acn.waw.pl>
	<3726456F-1CF4-4B14-A3D3-302F57946E01@syenar.hu>
	<20081010112951.GA23147@34-mo7-2.acn.waw.pl>
Message-ID: <94C0DB79-4E7A-4E1A-B594-AE62DF91F21B@syenar.hu>

Hi Przemek,

This sounds pretty good :)

I'd not be that concerned about compatibility,
this is also something we can push through the
next major release. I don't want to make you hurry
or something, though, it's just a possibility,
and truly, we have plenty more important things to do.

Brdgs,
Viktor

On 2008.10.10., at 13:29, Przemyslaw Czerpak wrote:

> On Fri, 10 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> I'm confused now which solution is good and which is
>> not, and whom proposed what. But, as a non-ADS user,
>> for me anything is good.
>
> This problem is partially related with yet another one
> which can be resolved by generating RTE by upper level API
> as you suggested.
> In some cases after RTE control code is returned to the caller
> which may need to access AREA structure. But inside errorblock
> user code can make some bad things f.e. close current AREA
> and the RDD code will access data which were freed. To resolve
> it it's necessary to add the way to easy pass error object to
> upper level code and execute RTE from it.
> I will work on it but it will force modifications in upper level
> code, f.e. we will have to add new AREA member which will hold error
> object and change all code which uses hb_rddGet*WorkAreaPointer()
> to also call hb_rddFreeWorkAreaPointer(). Inside these functions
> reference counters will be used so RDD code can check them and
> do not release AREA when the counter is greater then one or AREA
> has parent relations but only set pending job and close low level
> connections or open files to simulate close for user level code.
> hb_rddFreeWorkAreaPointer() will also check for error object inside
> AREA and will generate RTE when reference counter reach 0.
> But such modification will strongly interact with existing 3-rd
> party RDD code which will have to be updated too so I still moving
> it to the future :-)
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Fri Oct 10 07:53:44 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 10 07:53:44 2008
Subject: [SPAM]  [Harbour] DbCreate()/DbUseArea() bug in 1.1 at Win98SE
In-Reply-To: <19916619.post@talk.nabble.com>
References: <19916619.post@talk.nabble.com>
Message-ID: <20081010115344.GA17862@34-mo7-2.acn.waw.pl>

On Fri, 10 Oct 2008, Grigory Filatov wrote:

Hi Grigory,

> There are the errors with functions DbCreate()/DbUseArea() at Win98SE:
> DbCreate():   DBFNTX/1011 Write error: Test.dbf (DOS Error 87)
> DbUseArea():   DBFNTX/1012 Corruption detected: test.dbf (DOS Error 87)
[...]
> This sample works properly with Harbour 1.0.1 at Win98/XP and
> Harbour 1.1.0 at WinXP Home SP1/WinXP Pro SP2.
> Can someone confirm these issues with Harbour 1.1.0dev at Win98?

Probably Win9X does not support file access (READ/WRITE) with given
offset and such functionality exists only in NT based windows series.
MS remove information about older Windows versions from MSDN so I now
I cannot check such things :-( and I'm not Windows user to verify it
myself. Can someone confirm it?
Looks that I'll have to disable code which uses it if Win9x is detected.
I'll commit it ASAP, please test.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Oct 10 14:13:14 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 10 14:13:31 2008
Subject: [Harbour] 2008-10-10 20:12 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92b03$Blat.v2.6.2$dcbfa736$1080d7251294@127.0.0.1>

2008-10-10 20:12 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_vc.bat
  * make_vc.mak
    * Cleanups.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Fri Oct 10 15:23:22 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 10 15:23:23 2008
Subject: [Harbour] 2008-10-10 21:22 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081010192322.GA4812@34-mo7-2.acn.waw.pl>

2008-10-10 21:22 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/garbage.c
    * unblock HVM before executing destructors and releasing blocks

  * harbour/source/vm/fm.c
    ! do not call internal error with active lock when FM statistic
      is enabled

  * harbour/source/vm/thread.c
    ! stop other threads in hb_threadOnce() if the 1-st one
      executes bAction block to be sure that it will be completed
      before thread leave hb_threadOnce() function

  * harbour/source/vm/set.c
    ! do not call hb_inkeyReset() in set release. It's not necessary
      and it could change keyboard buffer size for other threads using
      the same GT driver.

  * harbour/source/vm/hvm.c
    % allocate new thread stack without lock

  * harbour/source/rtl/hbgtcore.c
  * harbour/source/rtl/gtapi.c
    * moved clipboard resetting from hbgtcore.c to gtapi.c

  * harbour/source/rtl/filesys.c
    ! do not use read/write operations with given file offset in Win9X
      which seems to not support such functionality

best regards
Przemek
From druzus at acn.waw.pl  Fri Oct 10 16:47:02 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 10 16:47:01 2008
Subject: [Harbour] 2008-10-10 22:46 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081010204702.GA4827@34-mo7-2.acn.waw.pl>

2008-10-10 22:46 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/hvm.c
    * reduced the mutex lock time in thread exit state

  * harbour/source/vm/thread.c
    ; added note about possible behavior of hb_threadSelf() function
      in one very specific situation. It's documented and expected
      behavior

  * harbour/source/rtl/hbgtcore.c
    + added support for retrieving current HB_GTI_NOTIFIERBLOCK code block
    + added support for removing HB_GTI_NOTIFIERBLOCK code block without
      setting the new one

best regards
Przemek
From druzus at acn.waw.pl  Fri Oct 10 21:06:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 10 21:06:51 2008
Subject: [Harbour] 2008-10-11 03:06 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081011010651.GA23485@34-mo7-2.acn.waw.pl>

2008-10-11 03:06 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapigt.h
  * harbour/source/rtl/gtapi.c
    + added hb_gtDrawBox() works like hb_gtBox() but does not change cursor
      posiion and support colors
    + added support for color parameter to hb_gtPutText()

  * harbour/source/rtl/console.c
    * use new hb_gtPutText() format in HB_DISPOUTAT()
      Now all screen operations inside this function is one atomic
      operation for other threads

  * harbour/source/rtl/box.c
    + added HB_DISPBOX() function - works like DISPBOX() bit does not
      change cursor position and is atomic for other threads


  * harbour/include/hbapigt.h
  * harbour/include/hbgtcore.h
  * harbour/source/rtl/hbgtcore.c
  * harbour/source/rtl/gtclip.c
  * harbour/source/rtl/gtdos/gtdos.c
  * harbour/source/rtl/gtwin/gtwin.c
  * harbour/source/rtl/gtxwc/gtxwc.c
  * harbour/source/rtl/gtcrs/gtcrs.c
  * harbour/source/rtl/gtstd/gtstd.c
  * harbour/source/rtl/gtsln/gtsln.c
  * harbour/source/rtl/gttrm/gttrm.c
  * harbour/source/rtl/gtpca/gtpca.c
  * harbour/source/rtl/gtcgi/gtcgi.c
  * harbour/source/rtl/gtwvt/gtwvt.c
  * harbour/contrib/gtalleg/gtalleg.c
  * harbour/contrib/gtalleg/ssf.h
  * harbour/contrib/gtalleg/ssf.c
  * harbour/contrib/gtwvg/gtwvg.c
    * cleanup char * casting

  * harbour/source/rtl/filesys.c
    ! do not use pread()/pwrite() in OpenWatcom Linux builds

best regards
Przemek
From druzus at acn.waw.pl  Fri Oct 10 21:24:38 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 10 21:24:36 2008
Subject: [Harbour] 2008-10-11 03:24 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081011012438.GA5189@34-mo7-2.acn.waw.pl>

2008-10-11 03:24 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/scrollbr.prg
  * harbour/source/rtl/getsys.prg
  * harbour/source/rtl/tpopup.prg
  * harbour/source/rtl/tgetlist.prg
  * harbour/source/rtl/radiogrp.prg
  * harbour/source/rtl/listbox.prg
  * harbour/source/rtl/checkbox.prg
  * harbour/source/rtl/browse.prg
  * harbour/source/rtl/tget.prg
  * harbour/source/rtl/ttopbar.prg
  * harbour/source/rtl/pushbtn.prg
  * harbour/source/rtl/tmenusys.prg
  * harbour/source/rtl/achoice.prg
  * harbour/source/rtl/teditor.prg
  * harbour/source/rtl/radiobtn.prg
  * harbour/source/rtl/tbrowse.prg
    * replaced DispOut() with hb_dispOut()
    * replaced DispBox() with hb_dispBox()
    % removed saving and restoring of cursor position in places where
      it's not longer necessary due to hb_dispOut()/hb_dispBox() usage
    % removed saving and restoring of SetColor() value in places where
      it's not longer necessary due to hb_dispOut()/hb_dispBox() usage
    % removed saving and restoring of MSetCursor(). If it's necessary
      low GT driver should hide and redraw mouse cursor before and after
      screen update. We do not have to make it manually

   The above modification gives faster code and allow to access screen
   from different threads simultaneously because functions like
   hb_dispOut() and hb_dispBox() are stateless and atomic in screen
   access. Not all .prg code has been updated yet. If someone is
   familiar with this code then please help. I'll add yet HB_SCROLL()
   function which will support additionally colors.
   Viktor if possible please verify this modifications.

best regards
Przemek
From druzus at acn.waw.pl  Fri Oct 10 22:56:34 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 10 22:56:34 2008
Subject: [Harbour] 2008-10-11 04:56 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081011025634.GA13034@34-mo7-2.acn.waw.pl>

2008-10-11 04:56 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapigt.h
  * harbour/source/rtl/gtapi.c
    + added C functions hb_gtLock() and hb_gtUnlock()
      They block current GT for other threads

  * harbour/source/rtl/gtfunc.c
    + added PRG functions hb_gtLock() and hb_gtUnlock()
      They block current GT for other threads - be careful using them
      and always unlock locked GT

  * harbour/source/rtl/scroll.c
    + added HB_SCROLL() function - it works like SCROLL() but supports
      2 additional parameters: color and erase char. It's stateless and
      atomic in GT access

  * harbour/source/rtl/tbrowse.prg
    * use HB_SCROLL() instead of SCROLL(). Now whole TBROWSE class
      does not depend on other thread screen output and does not
      set any GT variables except of cursor positioning to active
      cell when it's enabled

  * harbour/source/rtl/memoedit.prg
  * harbour/source/rtl/tgetlist.prg
  * harbour/source/rtl/tlabel.prg
  * harbour/source/rtl/listbox.prg
  * harbour/source/rtl/tmenusys.prg
  * harbour/source/rtl/achoice.prg
  * harbour/source/rtl/profiler.prg
  * harbour/source/rtl/teditor.prg
    * use atomic stateless functions when possible - this code should
      be checked and updated by some who know it.

best regards
Przemek
From bedipritpal at hotmail.com  Fri Oct 10 23:52:15 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Oct 10 23:52:22 2008
Subject: [Harbour] 2008-10-11 03:24 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081011012438.GA5189@34-mo7-2.acn.waw.pl>
References: <20081011012438.GA5189@34-mo7-2.acn.waw.pl>
Message-ID: <19929329.post@talk.nabble.com>


Hi Przemek


Przemyslaw Czerpak-2 wrote:
> 
> 2008-10-11 03:24 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>     * replaced DispOut() with hb_dispOut()
>     * replaced DispBox() with hb_dispBox()
>     % removed saving and restoring of cursor position in places where
>       it's not longer necessary due to hb_dispOut()/hb_dispBox() usage
>     % removed saving and restoring of SetColor() value in places where
>       it's not longer necessary due to hb_dispOut()/hb_dispBox() usage
>     % removed saving and restoring of MSetCursor(). If it's necessary
>       low GT driver should hide and redraw mouse cursor before and after
>       screen update. We do not have to make it manually
> 
>    The above modification gives faster code and allow to access screen
>    from different threads simultaneously because functions like
>    hb_dispOut() and hb_dispBox() are stateless and atomic in screen
>    access. Not all .prg code has been updated yet. If someone is
>    familiar with this code then please help. I'll add yet HB_SCROLL()
>    function which will support additionally colors.
> 

I have tested the code and all is working fine.
I have not noticed speed difference rather now it is slightly
slower - 17.67 sec vs 18.20 sec - in one type of test;
a scrollable browser reporting time taken each after 10000 scrolls.

But Harbour GT is remarkably faster than xHarbours.
Same above test ( though it is not only screen output ) took
46.91 sec vs 18.20 sec.

xHarbour version is:
/*
 * $Id: ChangeLog,v 1.5918 2008/02/11 23:58:13 lculik Exp $
 */

GT is GTWVG.

Regards
Pritpal Bedi

PS Above tests include SVN updates upto your next commit
2008-10-11 04:56 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl) 

-- 
View this message in context: http://www.nabble.com/2008-10-11-03%3A24-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp19928407p19929329.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Fri Oct 10 23:57:33 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Oct 10 23:57:38 2008
Subject: [Harbour] 2008-10-11 03:24 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <19929329.post@talk.nabble.com>
References: <20081011012438.GA5189@34-mo7-2.acn.waw.pl>
	<19929329.post@talk.nabble.com>
Message-ID: <19929354.post@talk.nabble.com>


Hi


Pritpal Bedi wrote:
> 
> I have tested the code and all is working fine.
> I have not noticed speed difference rather now it is slightly
> slower - 17.67 sec vs 18.20 sec - in one type of test;
> a scrollable browser reporting time taken each after 10000 scrolls.
> 
> But Harbour GT is remarkably faster than xHarbours.
> Same above test ( though it is not only screen output ) took
> 46.91 sec vs 18.20 sec.
> 
> xHarbour version is:
> /*
>  * $Id: ChangeLog,v 1.5918 2008/02/11 23:58:13 lculik Exp $
>  */
> 

I forgot to include that Harbour GT is in MT mode.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/2008-10-11-03%3A24-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp19928407p19929354.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Sat Oct 11 00:00:14 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Oct 11 00:00:22 2008
Subject: [Harbour] 2008-10-10 22:46 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081010204702.GA4827@34-mo7-2.acn.waw.pl>
References: <20081010204702.GA4827@34-mo7-2.acn.waw.pl>
Message-ID: <19929371.post@talk.nabble.com>


Hi Przemek


Przemyslaw Czerpak-2 wrote:
> 
> 2008-10-10 22:46 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/rtl/hbgtcore.c
>     + added support for retrieving current HB_GTI_NOTIFIERBLOCK code block
>     + added support for removing HB_GTI_NOTIFIERBLOCK code block without
>       setting the new one
> 

Thanks for this commit. 
Now it is possible to save/restore NOTIFIERBLOCK, 
which could be very helpful in certain situations.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/2008-10-10-22%3A46-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp19925880p19929371.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From teo at windtelsoft.com  Sat Oct 11 04:00:37 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Sat Oct 11 04:17:07 2008
Subject: [Harbour] Profiling
Message-ID: <200810110300.37739.teo@windtelsoft.com>

Hello,

On Linux, I want to do some profiling in an proyect, so I have compiled 
Harbour with "-DHB_USE_PROFILER" and created the binaries.

Nevertheless, when I try to run the sample at /tests/testprof.prg it simply 
aborts with a segfault.

Is there something in which I must have take care of ? 

Any help is appreciated.


best regards,

Teo

From harbour.01 at syenar.hu  Sat Oct 11 05:07:26 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 11 05:07:30 2008
Subject: [Harbour] 2008-10-11 11:06 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92b80$Blat.v2.6.2$c7c93d74$11142fbb48c2@127.0.0.1>

2008-10-11 11:06 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbextern.ch
    + New functions added.

  * source/rtl/alert.prg
    % Minor optimization.
    ; NOTE: Found yet another hidden extension in Alert() code :(

  * source/rtl/radiobtn.prg
    ! Fix and optimization in recent modification.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Sat Oct 11 05:08:47 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 11 05:08:46 2008
Subject: [SPAM]  Re: [Harbour] 2008-10-11 03:24 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <19929329.post@talk.nabble.com>
References: <20081011012438.GA5189@34-mo7-2.acn.waw.pl>
	<19929329.post@talk.nabble.com>
Message-ID: <20081011090847.GA11829@34-mo7-2.acn.waw.pl>

On Fri, 10 Oct 2008, Pritpal Bedi wrote:

Hi Pritpal,

> >    The above modification gives faster code and allow to access screen
> >    from different threads simultaneously because functions like
> >    hb_dispOut() and hb_dispBox() are stateless and atomic in screen
> >    access. Not all .prg code has been updated yet. If someone is
> >    familiar with this code then please help. I'll add yet HB_SCROLL()
> >    function which will support additionally colors.
> I have tested the code and all is working fine.
> I have not noticed speed difference rather now it is slightly
> slower - 17.67 sec vs 18.20 sec - in one type of test;
> a scrollable browser reporting time taken each after 10000 scrolls.

Yes, but it's not caused by using this function but by adding
serialization to GT access. Now hb_gt_Base() lock the mutex inside
GT structure and hb_gt_BaseFree() unlock it. It's very important
to always call hb_gt_BaseFree() after successful call to hb_gt_Base()
to not leave the console locked for other threads.
Please remember about it working on GT code.
If you want to call from GT some .prg function which is potentially
slow then you can unlock GT for other threads when this function is
executed, f.e.:
   SELFGT_UNLOCK( pGt );
   [ execute some user .prg code ]
   SELFGT_LOCK( pGt );

Of course if GT is in a state which allows unblocking and concurrent
access.

Returning to hb_disp*() functions. They can be improved yet and I'll
make it ASAP.

> But Harbour GT is remarkably faster than xHarbours.
> Same above test ( though it is not only screen output ) took
> 46.91 sec vs 18.20 sec.

It's probably caused by internal TBROWSE() class organization in
xHarbour. The speed difference in HVM is not such big.

best regards,
Przemek
From druzus at acn.waw.pl  Sat Oct 11 05:11:11 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 11 05:11:08 2008
Subject: [SPAM]  [Harbour] DbCreate()/DbUseArea() bug in 1.1 at Win98SE
In-Reply-To: <20081010115344.GA17862@34-mo7-2.acn.waw.pl>
References: <19916619.post@talk.nabble.com>
	<20081010115344.GA17862@34-mo7-2.acn.waw.pl>
Message-ID: <20081011091111.GB11829@34-mo7-2.acn.waw.pl>

On Fri, 10 Oct 2008, Przemyslaw Czerpak wrote:
> > There are the errors with functions DbCreate()/DbUseArea() at Win98SE:
> > DbCreate():   DBFNTX/1011 Write error: Test.dbf (DOS Error 87)
> > DbUseArea():   DBFNTX/1012 Corruption detected: test.dbf (DOS Error 87)
> [...]
> > This sample works properly with Harbour 1.0.1 at Win98/XP and
> > Harbour 1.1.0 at WinXP Home SP1/WinXP Pro SP2.
> > Can someone confirm these issues with Harbour 1.1.0dev at Win98?
> Probably Win9X does not support file access (READ/WRITE) with given
> offset and such functionality exists only in NT based windows series.
> Looks that I'll have to disable code which uses it if Win9x is detected.
> I'll commit it ASAP, please test.

Hi Grigory,

Please test after:
   2008-10-10 21:22 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)


best regards,
Przemek
From harbour.01 at syenar.hu  Sat Oct 11 05:11:12 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 11 05:11:23 2008
Subject: [Harbour] 2008-10-11 03:24 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081011012438.GA5189@34-mo7-2.acn.waw.pl>
References: <20081011012438.GA5189@34-mo7-2.acn.waw.pl>
Message-ID: <E972CA2E-34AA-4C7E-841F-FF9FE87DEF84@syenar.hu>

Hi Przemek,

I've checked them, and my app is now fully broken
unfortunately :( Lots of TGET and TBROWSE usage may rely
on cursor being left at certain positions, and since
now cursor is not moved, for example all entry screens
come up empty (the GETs that is). Also, I didn't yet
inspect the exact problem, but when I'm going into any
of my functions from a TB screen, the TB screen gets
cleared. Also, my TB code for example was relying on
exact cursor position after :forceStable() to place
a quick search field, and while this seems to be working
now, such places can break.

Few other, more specific issues:

Speed: now hb_gtPutText() will save/set/restore the
color, and the new caller, hb_DispOut() will also do so.
Is the latter necessary BTW? To me it seems like it's not,
anymore.

Anyway, since color is a string in Harbour, any code
touching it is costly. Do you think it'd be possible to
change colors internally to some more machine friendly
format, like simple ULONG, or string of ULONGs? Not on
the short-term, but generally.

I'll commit some small fixes, not targeting above issues.

Brgds,
Viktor

On 2008.10.11., at 3:24, Przemyslaw Czerpak wrote:

> 2008-10-11 03:24 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/rtl/scrollbr.prg
>  * harbour/source/rtl/getsys.prg
>  * harbour/source/rtl/tpopup.prg
>  * harbour/source/rtl/tgetlist.prg
>  * harbour/source/rtl/radiogrp.prg
>  * harbour/source/rtl/listbox.prg
>  * harbour/source/rtl/checkbox.prg
>  * harbour/source/rtl/browse.prg
>  * harbour/source/rtl/tget.prg
>  * harbour/source/rtl/ttopbar.prg
>  * harbour/source/rtl/pushbtn.prg
>  * harbour/source/rtl/tmenusys.prg
>  * harbour/source/rtl/achoice.prg
>  * harbour/source/rtl/teditor.prg
>  * harbour/source/rtl/radiobtn.prg
>  * harbour/source/rtl/tbrowse.prg
>    * replaced DispOut() with hb_dispOut()
>    * replaced DispBox() with hb_dispBox()
>    % removed saving and restoring of cursor position in places where
>      it's not longer necessary due to hb_dispOut()/hb_dispBox() usage
>    % removed saving and restoring of SetColor() value in places where
>      it's not longer necessary due to hb_dispOut()/hb_dispBox() usage
>    % removed saving and restoring of MSetCursor(). If it's necessary
>      low GT driver should hide and redraw mouse cursor before and  
> after
>      screen update. We do not have to make it manually
>
>   The above modification gives faster code and allow to access screen
>   from different threads simultaneously because functions like
>   hb_dispOut() and hb_dispBox() are stateless and atomic in screen
>   access. Not all .prg code has been updated yet. If someone is
>   familiar with this code then please help. I'll add yet HB_SCROLL()
>   function which will support additionally colors.
>   Viktor if possible please verify this modifications.
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Sat Oct 11 05:22:05 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 11 05:22:02 2008
Subject: [Harbour] 2008-10-11 11:21 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081011092205.GA31137@34-mo7-2.acn.waw.pl>

2008-10-11 11:21 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/common/expropt2.c
    * formatting and minor cleanup

  * harbour/source/rtl/gtapi.c
    % do not set and restore default color set in hb_gtPutText() and
      hb_gtDrawBox() but decode colors from passed string

best regards
Przemek
From druzus at acn.waw.pl  Sat Oct 11 05:40:14 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 11 05:40:13 2008
Subject: [Harbour] 2008-10-11 03:24 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <E972CA2E-34AA-4C7E-841F-FF9FE87DEF84@syenar.hu>
References: <20081011012438.GA5189@34-mo7-2.acn.waw.pl>
	<E972CA2E-34AA-4C7E-841F-FF9FE87DEF84@syenar.hu>
Message-ID: <20081011094014.GA32396@34-mo7-2.acn.waw.pl>

On Sat, 11 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I've checked them, and my app is now fully broken
> unfortunately :( Lots of TGET and TBROWSE usage may rely
> on cursor being left at certain positions, and since
> now cursor is not moved, for example all entry screens
> come up empty (the GETs that is). Also, I didn't yet
> inspect the exact problem, but when I'm going into any
> of my functions from a TB screen, the TB screen gets
> cleared. Also, my TB code for example was relying on
> exact cursor position after :forceStable() to place
> a quick search field, and while this seems to be working
> now, such places can break.

In most of the places which were touched cursor position and
colors was saved and restored so it should not effect any other
code. I haven't touched some code like menuto.prg which seems
to make intentionally visible screen positioning.
In the tbrowse the cursor is set in the cell as it was after
redrawing. This code was not touched. So please check where exactly
the problem is. Maybe some typo in the modifications?

> Few other, more specific issues:
> Speed: now hb_gtPutText() will save/set/restore the
> color, and the new caller, hb_DispOut() will also do so.
> Is the latter necessary BTW? To me it seems like it's not,
> anymore.

It is original DISPOUT() behavior replicated which I changed
and committed few minutes ago.

> Anyway, since color is a string in Harbour, any code
> touching it is costly. Do you think it'd be possible to
> change colors internally to some more machine friendly
> format, like simple ULONG, or string of ULONGs? Not on
> the short-term, but generally.

I think INT will be enough as index to internal GT color table.
Many functions support both: color as number and as string.
In HB_SCROLL() code you will find an example of color decoding
I'm trying to use systematically in such case. Now it works
for internal numeric color representation (VGA) but it should
work also for any other when we introduce it.

best regards
Przemek
From lorenzo.fiorini at gmail.com  Sat Oct 11 05:41:19 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct 11 05:41:28 2008
Subject: [Harbour] 2008-10-11 03:24 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <E972CA2E-34AA-4C7E-841F-FF9FE87DEF84@syenar.hu>
References: <20081011012438.GA5189@34-mo7-2.acn.waw.pl>
	<E972CA2E-34AA-4C7E-841F-FF9FE87DEF84@syenar.hu>
Message-ID: <9257026e0810110241x25088a51kd5cc0bfdb93c7eaa@mail.gmail.com>

On Sat, Oct 11, 2008 at 11:11 AM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> I've checked them, and my app is now fully broken
> unfortunately :( Lots of TGET and TBROWSE usage may rely
> on cursor being left at certain positions, and since
> now cursor is not moved, for example all entry screens
> come up empty (the GETs that is). Also, I didn't yet
> inspect the exact problem, but when I'm going into any
> of my functions from a TB screen, the TB screen gets
> cleared. Also, my TB code for example was relying on
> exact cursor position after :forceStable() to place
> a quick search field, and while this seems to be working
> now, such places can break.

Are you using MT?

I've rebuilt my apps using:
...
Built on: Oct 11 2008 11:20:42
Last ChangeLog entry: 2008-10-11 04:56 UTC+0200 Przemyslaw Czerpak
(druzus/at/priv.onet.pl)
ChangeLog SVN version: ChangeLog 9605 2008-10-11 02:56:22Z druzus
...

under Linux gtxwc in "standard" ST mode and they seem ok.

Let me know if you want me to do some tests.

best regards,
Lorenzo
From druzus at acn.waw.pl  Sat Oct 11 05:44:54 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 11 05:44:52 2008
Subject: [Harbour] 2008-10-11 03:24 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0810110241x25088a51kd5cc0bfdb93c7eaa@mail.gmail.com>
References: <20081011012438.GA5189@34-mo7-2.acn.waw.pl>
	<E972CA2E-34AA-4C7E-841F-FF9FE87DEF84@syenar.hu>
	<9257026e0810110241x25088a51kd5cc0bfdb93c7eaa@mail.gmail.com>
Message-ID: <20081011094454.GA16316@34-mo7-2.acn.waw.pl>

On Sat, 11 Oct 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> Are you using MT?
> I've rebuilt my apps using:
> under Linux gtxwc in "standard" ST mode and they seem ok.

It should be no difference between MT and ST mode other then some
speed overhead in HVM.
I intentionally keep only one version of RTL and other libraries.

best regards,
Przemek
From harbour.01 at syenar.hu  Sat Oct 11 06:00:44 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 11 06:00:54 2008
Subject: [Harbour] 2008-10-11 03:24 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0810110241x25088a51kd5cc0bfdb93c7eaa@mail.gmail.com>
References: <20081011012438.GA5189@34-mo7-2.acn.waw.pl>
	<E972CA2E-34AA-4C7E-841F-FF9FE87DEF84@syenar.hu>
	<9257026e0810110241x25088a51kd5cc0bfdb93c7eaa@mail.gmail.com>
Message-ID: <05AA5441-D7B6-4D94-BB30-175802B600AC@syenar.hu>

No, fully ST, with MSVC 2008.

Exact same app works with yesterday's SVN.

Brgds,
Viktor

On 2008.10.11., at 11:41, Lorenzo Fiorini wrote:

> On Sat, Oct 11, 2008 at 11:11 AM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>> I've checked them, and my app is now fully broken
>> unfortunately :( Lots of TGET and TBROWSE usage may rely
>> on cursor being left at certain positions, and since
>> now cursor is not moved, for example all entry screens
>> come up empty (the GETs that is). Also, I didn't yet
>> inspect the exact problem, but when I'm going into any
>> of my functions from a TB screen, the TB screen gets
>> cleared. Also, my TB code for example was relying on
>> exact cursor position after :forceStable() to place
>> a quick search field, and while this seems to be working
>> now, such places can break.
>
> Are you using MT?
>
> I've rebuilt my apps using:
> ...
> Built on: Oct 11 2008 11:20:42
> Last ChangeLog entry: 2008-10-11 04:56 UTC+0200 Przemyslaw Czerpak
> (druzus/at/priv.onet.pl)
> ChangeLog SVN version: ChangeLog 9605 2008-10-11 02:56:22Z druzus
> ...
>
> under Linux gtxwc in "standard" ST mode and they seem ok.
>
> Let me know if you want me to do some tests.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Sat Oct 11 06:05:52 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 11 06:05:49 2008
Subject: [Harbour] 2008-10-11 11:06 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c92b80$Blat.v2.6.2$c7c93d74$11142fbb48c2@127.0.0.1>
References: <01c92b80$Blat.v2.6.2$c7c93d74$11142fbb48c2@127.0.0.1>
Message-ID: <20081011100552.GA25724@34-mo7-2.acn.waw.pl>

On Sat, 11 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> 2008-10-11 11:06 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * source/rtl/alert.prg
>     % Minor optimization.
>     ; NOTE: Found yet another hidden extension in Alert() code :(

Please remember that original Clipper alert code is broken in
few places. Some of them were fixed in CT3 which replace original
alert()
I tried to replicate both behavior and Harbour can work in
both mode (CT3 version is enabled automatically with CTWIN GT)
but I haven't replicated some wrong string formatting which
caused some bad side effects like writing out of the alert
box or loosing some part of message.

>   * source/rtl/radiobtn.prg
>     ! Fix and optimization in recent modification.

Thank you very much. Mechanical update in the late night and
I haven't noticed that the old code is one string.

best regards,
Przemek
From harbour.01 at syenar.hu  Sat Oct 11 06:09:52 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 11 06:10:03 2008
Subject: [Harbour] 2008-10-11 03:24 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081011094014.GA32396@34-mo7-2.acn.waw.pl>
References: <20081011012438.GA5189@34-mo7-2.acn.waw.pl>
	<E972CA2E-34AA-4C7E-841F-FF9FE87DEF84@syenar.hu>
	<20081011094014.GA32396@34-mo7-2.acn.waw.pl>
Message-ID: <6D9937EC-DC96-41BA-BBD1-80BFBD36F312@syenar.hu>

Hi Przemek,

One simple example I've just tried:
---
PROCEDURE Main()
    LOCAL var := Space( 10 )
    @ 10, 10 GET var ; DispOut( " unit" )
    RETURN
---

There are lots of similar places, where caller
could so far expect the cursor position to be left
at where it was in Clipper. Now, since only hb_*()
display functions are used in these areas, and it
doesn't move the cursor, the cursor is left where
it was set last time, by the caller .prg.

>> Few other, more specific issues:
>> Speed: now hb_gtPutText() will save/set/restore the
>> color, and the new caller, hb_DispOut() will also do so.
>> Is the latter necessary BTW? To me it seems like it's not,
>> anymore.
>
> It is original DISPOUT() behavior replicated which I changed
> and committed few minutes ago.

Thanks, I've seen it, and it's exactly what I had in
mind.

>> Anyway, since color is a string in Harbour, any code
>> touching it is costly. Do you think it'd be possible to
>> change colors internally to some more machine friendly
>> format, like simple ULONG, or string of ULONGs? Not on
>> the short-term, but generally.
>
> I think INT will be enough as index to internal GT color table.
> Many functions support both: color as number and as string.
> In HB_SCROLL() code you will find an example of color decoding
> I'm trying to use systematically in such case. Now it works
> for internal numeric color representation (VGA) but it should
> work also for any other when we introduce it.

Okay, any numeric will be just as good. I've checked and
it's also exactly what I had in mind. Shouldn't we also use
a numeric in the new parameter of hb_gtPutText() and the
new hb_gtDrawBox()? If we would have new hb_gtSetColor()
and hb_gtGetColor() GT API functions operating with
numerics, most cases would be covered.

Brgds,
Viktor

From philb at philb.us  Sat Oct 11 06:45:01 2008
From: philb at philb.us (Phil Barnett)
Date: Sat Oct 11 06:45:10 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <20081009101354.GC25725@34-mo7-2.acn.waw.pl>
References: <19847957.post@talk.nabble.com> <200810090125.41593.philb@philb.us>
	<20081009101354.GC25725@34-mo7-2.acn.waw.pl>
Message-ID: <200810110645.01869.philb@philb.us>

On Thursday 09 October 2008 06:13:54 am Przemyslaw Czerpak wrote:
> Maybe you build and install Harbour correctly but just simply you have
> some other copy Harbour binaries which is used and it's the reason why
> adding HB_GUI was not working for you. I really do not know.

I figured it out. I su'd to root, but didn't cd / before I installed. So it 
installed into /root instead of /. Duh.


> Sorry that I'm asking about it again but please make SVN update to
> current and check if harbour binaries and executable have SVN revision
> number grater then 9567. I would like to confirm that the MT slowness
> in gc[0-2] builds is resolved.

I can confirm that the fix worked.

[philb@SunSpot tests]$ for i in 1 2 4 6 8; 
do ./speedtst --exclude=mem --scale --thread=$i; done

10/10/08 22:05:55 Linux 2.6.26.5-45.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9594) (MT)+ GNU C 4.3 (32 bit)
THREADS: 1                                           
N_LOOPS: 1000000                                     
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  1 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.16   0.13 ->  1.16
[ T002: x := L_N ]____________________________________  0.13   0.13 ->  1.00
[ T003: x := L_D ]____________________________________  0.13   0.13 ->  1.00
[ T004: x := S_C ]____________________________________  0.13   0.13 ->  1.00
[ T005: x := S_N ]____________________________________  0.13   0.13 ->  1.00
[ T006: x := S_D ]____________________________________  0.13   0.13 ->  1.00
[ T007: x := M_C ]____________________________________  0.17   0.14 ->  1.19
[ T008: x := M_N ]____________________________________  0.14   0.14 ->  1.00
[ T009: x := M_D ]____________________________________  0.14   0.14 ->  1.00
[ T010: x := P_C ]____________________________________  0.14   0.14 ->  1.00
[ T011: x := P_N ]____________________________________  0.14   0.14 ->  1.00
[ T012: x := P_D ]____________________________________  0.14   0.14 ->  1.00
[ T013: x := F_C ]____________________________________  0.29   0.29 ->  0.99
[ T014: x := F_N ]____________________________________  0.30   0.30 ->  1.00
[ T015: x := F_D ]____________________________________  0.18   0.18 ->  1.00
[ T016: x := o:GenCode ]______________________________  0.29   0.29 ->  1.00
[ T017: x := o[8] ]___________________________________  0.20   0.20 ->  0.99
[ T018: round( i / 1000, 2 ) ]________________________  0.44   0.43 ->  1.00
[ T020: val( s ) ]____________________________________  0.40   0.40 ->  1.01
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  0.66   0.65 ->  1.00
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.40   0.40 ->  1.00
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  0.39   0.39 ->  1.00
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  0.52   0.52 ->  1.00
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  0.47   0.47 ->  1.00
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  0.49   0.49 ->  1.00
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  0.49   0.49 ->  1.00
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  0.49   0.49 ->  1.00
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  0.49   0.49 ->  1.00
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  0.48   0.48 ->  1.00
[ T039: ascan( a, i % 16 ) ]__________________________  0.56   0.56 ->  1.00                                                                                                           
[ T042: x := a ]______________________________________  0.14   0.14 ->  1.00                                                                                                           
[ T044: f0() ]________________________________________  0.22   0.22 ->  1.00                                                                                                           
[ T045: f1( i ) ]_____________________________________  0.27   0.27 ->  1.00                                                                                                           
[ T046: f2( c[1...8] ) ]______________________________  0.28   0.28 ->  1.00                                                                                                           
[ T047: f2( c[1...40000] ) ]__________________________  0.28   0.28 ->  1.00                                                                                                           
[ T048: f2( @c[1...40000] ) ]_________________________  0.28   0.28 ->  1.00                                                                                                           
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.35   0.35 ->  1.00                                                                                                           
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  0.61   0.61 ->  1.01                                                                                                           
[ T051: f2( a ) ]_____________________________________  0.30   0.30 ->  1.00                                                                                                           
============================================================================                                                                                                           
[   TOTAL   ]_________________________________________ 11.94  11.88 ->  1.00                                                                                                           
============================================================================                                                                                                           
[ total application time: ]....................................23.69                                                                                                                   
[ total real time: ]...........................................23.83                                                                                                                   

10/10/08 22:06:19 Linux 2.6.26.5-45.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9594) (MT)+ GNU C 4.3 (32 bit)
THREADS: 2                                           
N_LOOPS: 1000000                                     
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  2 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.38   0.15 ->  2.57
[ T002: x := L_N ]____________________________________  0.29   0.14 ->  2.07
[ T003: x := L_D ]____________________________________  0.28   0.15 ->  1.87
[ T004: x := S_C ]____________________________________  0.28   0.30 ->  0.94
[ T005: x := S_N ]____________________________________  0.33   0.18 ->  1.81
[ T006: x := S_D ]____________________________________  0.31   0.14 ->  2.24
[ T007: x := M_C ]____________________________________  0.33   0.15 ->  2.28
[ T008: x := M_N ]____________________________________  0.29   0.17 ->  1.73
[ T009: x := M_D ]____________________________________  0.30   0.15 ->  2.04
[ T010: x := P_C ]____________________________________  0.28   0.16 ->  1.72
[ T011: x := P_N ]____________________________________  0.30   0.18 ->  1.65
[ T012: x := P_D ]____________________________________  0.33   0.18 ->  1.80
[ T013: x := F_C ]____________________________________  0.56   0.31 ->  1.78
[ T014: x := F_N ]____________________________________  0.63   0.32 ->  1.98
[ T015: x := F_D ]____________________________________  0.37   0.19 ->  1.96
[ T016: x := o:GenCode ]______________________________  0.62   0.31 ->  1.98
[ T017: x := o[8] ]___________________________________  0.48   0.23 ->  2.09
[ T018: round( i / 1000, 2 ) ]________________________  0.91   0.45 ->  2.01
[ T020: val( s ) ]____________________________________  0.83   0.41 ->  2.01
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  1.35   0.69 ->  1.97
[ T024: eval( bc := { || i % 16 } ) ]_________________  0.81   0.44 ->  1.84
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  0.84   0.48 ->  1.78
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  1.21   0.62 ->  1.96
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  0.94   0.55 ->  1.70
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  1.11   0.65 ->  1.71
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  1.00   0.53 ->  1.89
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  1.09   0.50 ->  2.16
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  0.99   0.49 ->  2.04
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  0.98   0.51 ->  1.93
[ T039: ascan( a, i % 16 ) ]__________________________  1.24   0.60 ->  2.07
[ T042: x := a ]______________________________________  0.35   0.19 ->  1.81
[ T044: f0() ]________________________________________  0.52   0.25 ->  2.09
[ T045: f1( i ) ]_____________________________________  0.72   0.36 ->  1.99
[ T046: f2( c[1...8] ) ]______________________________  0.60   0.33 ->  1.82
[ T047: f2( c[1...40000] ) ]__________________________  0.61   0.30 ->  2.02
[ T048: f2( @c[1...40000] ) ]_________________________  0.60   0.31 ->  1.98
[ T049: f2( @c[1...40000] ), c2 := c ]________________  0.80   0.41 ->  1.97
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  1.33   0.70 ->  1.89
[ T051: f2( a ) ]_____________________________________  0.69   0.35 ->  1.99
============================================================================
[   TOTAL   ]_________________________________________ 25.87  13.51 ->  1.92
============================================================================
[ total application time: ]....................................51.84        
[ total real time: ]...........................................39.38        

10/10/08 22:06:59 Linux 2.6.26.5-45.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9594) (MT)+ GNU C 4.3 (32 bit)
THREADS: 4                                           
N_LOOPS: 1000000                                     
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  4 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.70   0.18 ->  3.77
[ T002: x := L_N ]____________________________________  0.58   0.18 ->  3.21
[ T003: x := L_D ]____________________________________  0.59   0.17 ->  3.36
[ T004: x := S_C ]____________________________________  0.61   0.50 ->  1.22
[ T005: x := S_N ]____________________________________  0.56   0.18 ->  3.07
[ T006: x := S_D ]____________________________________  0.54   0.18 ->  2.97
[ T007: x := M_C ]____________________________________  0.57   0.20 ->  2.90
[ T008: x := M_N ]____________________________________  0.58   0.19 ->  3.02
[ T009: x := M_D ]____________________________________  0.60   0.18 ->  3.28
[ T010: x := P_C ]____________________________________  0.61   0.19 ->  3.14
[ T011: x := P_N ]____________________________________  0.57   0.19 ->  3.03
[ T012: x := P_D ]____________________________________  0.57   0.19 ->  2.92
[ T013: x := F_C ]____________________________________  1.01   0.28 ->  3.65
[ T014: x := F_N ]____________________________________  1.29   0.32 ->  3.99
[ T015: x := F_D ]____________________________________  0.80   0.19 ->  4.15
[ T016: x := o:GenCode ]______________________________  1.22   0.47 ->  2.62
[ T017: x := o[8] ]___________________________________  0.79   0.46 ->  1.70
[ T018: round( i / 1000, 2 ) ]________________________  1.74   0.48 ->  3.61
[ T020: val( s ) ]____________________________________  1.65   0.63 ->  2.64
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  2.72   0.87 ->  3.11
[ T024: eval( bc := { || i % 16 } ) ]_________________  1.65   0.69 ->  2.41
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  1.58   0.55 ->  2.89
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  2.37   0.63 ->  3.75
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  2.03   0.70 ->  2.90
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  2.11   0.65 ->  3.26
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  2.04   0.69 ->  2.97
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  2.02   0.58 ->  3.48
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  2.02   0.61 ->  3.28
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  2.08   0.68 ->  3.05
[ T039: ascan( a, i % 16 ) ]__________________________  2.37   0.71 ->  3.32
[ T042: x := a ]______________________________________  0.75   0.34 ->  2.21
[ T044: f0() ]________________________________________  1.13   0.29 ->  3.94
[ T045: f1( i ) ]_____________________________________  1.37   0.36 ->  3.76
[ T046: f2( c[1...8] ) ]______________________________  1.24   0.32 ->  3.89
[ T047: f2( c[1...40000] ) ]__________________________  1.23   0.31 ->  3.97
[ T048: f2( @c[1...40000] ) ]_________________________  1.25   0.31 ->  4.02
[ T049: f2( @c[1...40000] ), c2 := c ]________________  1.57   0.41 ->  3.87
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  2.75   0.69 ->  4.02
[ T051: f2( a ) ]_____________________________________  1.46   0.36 ->  4.03
============================================================================
[   TOTAL   ]_________________________________________ 51.29  16.12 ->  3.18
============================================================================
[ total application time: ]...................................109.01        
[ total real time: ]...........................................67.42        

10/10/08 22:08:06 Linux 2.6.26.5-45.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9594) (MT)+ GNU C 4.3 (32 bit)
THREADS: 6                                           
N_LOOPS: 1000000                                     
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  6 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  0.91   0.33 ->  2.78
[ T002: x := L_N ]____________________________________  0.99   0.24 ->  4.07
[ T003: x := L_D ]____________________________________  0.99   0.28 ->  3.59
[ T004: x := S_C ]____________________________________  0.97   0.75 ->  1.30
[ T005: x := S_N ]____________________________________  0.77   0.29 ->  2.63
[ T006: x := S_D ]____________________________________  0.89   0.31 ->  2.85
[ T007: x := M_C ]____________________________________  0.92   0.26 ->  3.59
[ T008: x := M_N ]____________________________________  0.88   0.27 ->  3.29
[ T009: x := M_D ]____________________________________  0.95   0.27 ->  3.54
[ T010: x := P_C ]____________________________________  0.91   0.27 ->  3.35
[ T011: x := P_N ]____________________________________  0.95   0.29 ->  3.32
[ T012: x := P_D ]____________________________________  1.07   0.28 ->  3.78
[ T013: x := F_C ]____________________________________  1.80   0.52 ->  3.44
[ T014: x := F_N ]____________________________________  1.90   0.49 ->  3.88
[ T015: x := F_D ]____________________________________  1.14   0.34 ->  3.39
[ T016: x := o:GenCode ]______________________________  1.87   0.54 ->  3.49
[ T017: x := o[8] ]___________________________________  1.37   0.40 ->  3.46
[ T018: round( i / 1000, 2 ) ]________________________  2.82   0.74 ->  3.81
[ T020: val( s ) ]____________________________________  2.53   0.77 ->  3.29
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  4.11   1.18 ->  3.50
[ T024: eval( bc := { || i % 16 } ) ]_________________  2.46   0.84 ->  2.94
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  2.43   0.81 ->  3.01
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  3.31   1.00 ->  3.30
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  3.09   0.84 ->  3.69
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  3.25   0.94 ->  3.44
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  3.14   0.86 ->  3.67
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  3.07   0.88 ->  3.48
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  3.13   0.84 ->  3.71
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  3.11   0.86 ->  3.63
[ T039: ascan( a, i % 16 ) ]__________________________  3.24   0.83 ->  3.92
[ T042: x := a ]______________________________________  1.16   0.34 ->  3.44
[ T044: f0() ]________________________________________  1.65   0.50 ->  3.27
[ T045: f1( i ) ]_____________________________________  1.94   0.57 ->  3.42
[ T046: f2( c[1...8] ) ]______________________________  1.83   0.53 ->  3.47
[ T047: f2( c[1...40000] ) ]__________________________  2.01   0.56 ->  3.59
[ T048: f2( @c[1...40000] ) ]_________________________  1.84   0.50 ->  3.72
[ T049: f2( @c[1...40000] ), c2 := c ]________________  2.35   0.66 ->  3.58
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  4.18   1.18 ->  3.55
[ T051: f2( a ) ]_____________________________________  2.06   0.60 ->  3.45
============================================================================
[   TOTAL   ]_________________________________________ 77.99  22.91 ->  3.40
============================================================================
[ total application time: ]...................................163.58        
[ total real time: ]..........................................100.91        

10/10/08 22:09:47 Linux 2.6.26.5-45.fc9.i686 i686
Harbour 1.1.0dev (Rev. 9594) (MT)+ GNU C 4.3 (32 bit)
THREADS: 8
N_LOOPS: 1000000
excluded tests: 029 030 023 025 027 040 041 043 052 053 019 022 031 032 054
                                                        1 th.  8 th.  factor
============================================================================
[ T001: x := L_C ]____________________________________  1.21   0.44 ->  2.76
[ T002: x := L_N ]____________________________________  1.20   0.35 ->  3.42
[ T003: x := L_D ]____________________________________  1.28   0.32 ->  3.94
[ T004: x := S_C ]____________________________________  1.07   0.99 ->  1.08
[ T005: x := S_N ]____________________________________  1.14   0.32 ->  3.59
[ T006: x := S_D ]____________________________________  1.20   0.37 ->  3.24
[ T007: x := M_C ]____________________________________  1.37   0.47 ->  2.90
[ T008: x := M_N ]____________________________________  1.27   0.32 ->  4.01
[ T009: x := M_D ]____________________________________  1.22   0.35 ->  3.47
[ T010: x := P_C ]____________________________________  1.40   0.35 ->  4.04
[ T011: x := P_N ]____________________________________  1.24   0.33 ->  3.81
[ T012: x := P_D ]____________________________________  1.31   0.34 ->  3.81
[ T013: x := F_C ]____________________________________  2.34   0.67 ->  3.50
[ T014: x := F_N ]____________________________________  2.63   0.64 ->  4.08
[ T015: x := F_D ]____________________________________  1.63   0.43 ->  3.83
[ T016: x := o:GenCode ]______________________________  2.56   0.67 ->  3.85
[ T017: x := o[8] ]___________________________________  1.90   0.47 ->  4.08
[ T018: round( i / 1000, 2 ) ]________________________  3.67   1.00 ->  3.67
[ T020: val( s ) ]____________________________________  3.38   0.92 ->  3.66
[ T021: val( a [ i % 16 + 1 ] ) ]_____________________  5.45   1.36 ->  4.01
[ T024: eval( bc := { || i % 16 } ) ]_________________  3.33   0.95 ->  3.52
[ T026: eval( bc := { |x| x % 16 }, i ) ]_____________  3.43   0.92 ->  3.71
[ T028: eval( bc := { |x| f1( x ) }, i ) ]____________  4.70   1.24 ->  3.80
[ T033: x := a[ i % 16 + 1 ] == s ]___________________  3.86   1.04 ->  3.72
[ T034: x := a[ i % 16 + 1 ] = s ]____________________  4.09   1.19 ->  3.45
[ T035: x := a[ i % 16 + 1 ] >= s ]___________________  4.01   1.14 ->  3.53
[ T036: x := a[ i % 16 + 1 ] <= s ]___________________  4.11   1.16 ->  3.55
[ T037: x := a[ i % 16 + 1 ] < s ]____________________  3.99   1.17 ->  3.42
[ T038: x := a[ i % 16 + 1 ] > s ]____________________  4.20   1.15 ->  3.64
[ T039: ascan( a, i % 16 ) ]__________________________  4.68   1.11 ->  4.20
[ T042: x := a ]______________________________________  1.50   0.40 ->  3.76
[ T044: f0() ]________________________________________  2.17   0.62 ->  3.51
[ T045: f1( i ) ]_____________________________________  2.77   0.73 ->  3.81
[ T046: f2( c[1...8] ) ]______________________________  2.46   0.64 ->  3.82
[ T047: f2( c[1...40000] ) ]__________________________  2.44   0.66 ->  3.69
[ T048: f2( @c[1...40000] ) ]_________________________  2.43   0.67 ->  3.61
[ T049: f2( @c[1...40000] ), c2 := c ]________________  3.10   0.79 ->  3.92
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]__________  5.40   1.51 ->  3.58
[ T051: f2( a ) ]_____________________________________  2.73   0.74 ->  3.67
============================================================================
[   TOTAL   ]_________________________________________103.86  28.92 ->  3.59
============================================================================
[ total application time: ]...................................215.93
[ total real time: ]..........................................132.79


-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From druzus at acn.waw.pl  Sat Oct 11 06:45:59 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 11 06:45:57 2008
Subject: [Harbour] 2008-10-11 03:24 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <6D9937EC-DC96-41BA-BBD1-80BFBD36F312@syenar.hu>
References: <20081011012438.GA5189@34-mo7-2.acn.waw.pl>
	<E972CA2E-34AA-4C7E-841F-FF9FE87DEF84@syenar.hu>
	<20081011094014.GA32396@34-mo7-2.acn.waw.pl>
	<6D9937EC-DC96-41BA-BBD1-80BFBD36F312@syenar.hu>
Message-ID: <20081011104559.GB25724@34-mo7-2.acn.waw.pl>

On Sat, 11 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> One simple example I've just tried:
> ---
> PROCEDURE Main()
>    LOCAL var := Space( 10 )
>    @ 10, 10 GET var ; DispOut( " unit" )
>    RETURN
> ---
> There are lots of similar places, where caller
> could so far expect the cursor position to be left
> at where it was in Clipper. Now, since only hb_*()
> display functions are used in these areas, and it
> doesn't move the cursor, the cursor is left where
> it was set last time, by the caller .prg.

This has to be fixed for sure and I'll commit it in a while
but I do not find other places you are talking about.
Again most of touched places were saving and restoring cursor
position. Just check the diff.
If you will find some other problems like above then please
inform me or update the code.
BTW The above code was changed by mistake when I was experimenting
with Pritpal's xbase++ example to make color setting atomic for
other GTs and I forgot about it.
Anyhow it will be good if someone familiar with GT code look
at them carefully because in some places I do not know what
is itnetional and was was a typo, f.e. in ShowGetMsg() does
not save/restore cursor position but ShowScoreboard() or DateMsg()
does. ShowMsg() is also in tmemnusys.prg.
BTW As I can see some functions/classes used to ignore color setting,
f.e. TEDITOR what badly interacts with some other code which may change
colors. It can be seen sometimes in debugger. I do not know how it
interacts with Clipper compatibility. I haven't touched them but
IMHO it should be fixed. At least in few places they will not
respect colors passed as parameter.

> Okay, any numeric will be just as good. I've checked and
> it's also exactly what I had in mind. Shouldn't we also use
> a numeric in the new parameter of hb_gtPutText() and the
> new hb_gtDrawBox()? If we would have new hb_gtSetColor()
> and hb_gtGetColor() GT API functions operating with
> numerics, most cases would be covered.

They should be change and I've been planing to make it ASAP.

best regards,
Przemek
From druzus at acn.waw.pl  Sat Oct 11 07:07:04 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 11 07:07:01 2008
Subject: [Harbour] 2008-10-11 13:06 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081011110704.GA16522@34-mo7-2.acn.waw.pl>

2008-10-11 13:06 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/tget.prg
    ! fixed cursor positioning when new get item is added.
    ; added note about possible modification - Viktor, please verify it

best regards
Przemek
From harbour.01 at syenar.hu  Sat Oct 11 07:09:58 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 11 07:10:10 2008
Subject: [Harbour] 2008-10-11 03:24 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081011104559.GB25724@34-mo7-2.acn.waw.pl>
References: <20081011012438.GA5189@34-mo7-2.acn.waw.pl>
	<E972CA2E-34AA-4C7E-841F-FF9FE87DEF84@syenar.hu>
	<20081011094014.GA32396@34-mo7-2.acn.waw.pl>
	<6D9937EC-DC96-41BA-BBD1-80BFBD36F312@syenar.hu>
	<20081011104559.GB25724@34-mo7-2.acn.waw.pl>
Message-ID: <17F5BA14-99E9-478B-8D02-6729F1F1C2D9@syenar.hu>

>
Hi Przemek,

> This has to be fixed for sure and I'll commit it in a while
> but I do not find other places you are talking about.
> Again most of touched places were saving and restoring cursor
> position. Just check the diff.
> If you will find some other problems like above then please
> inform me or update the code.

I'll check again after your fix.

Question: I'm using my own GT layer for windowing, may
I need to make any changes to it, to stay compatible
with current Harbour? I'm suspecting that my layer is
not catching some screen updates.

I've noticed that hb_gt_BaseFree() should now be used
for MT, which now I implemented, but it's unrelated to
the current problem.

> BTW The above code was changed by mistake when I was experimenting
> with Pritpal's xbase++ example to make color setting atomic for
> other GTs and I forgot about it.
> Anyhow it will be good if someone familiar with GT code look
> at them carefully because in some places I do not know what
> is itnetional and was was a typo, f.e. in ShowGetMsg() does
> not save/restore cursor position but ShowScoreboard() or DateMsg()
> does. ShowMsg() is also in tmemnusys.prg.

We can safely assume these were correct as far as
Clipper compatibility goes, so if possible we should
keep their behavior.

> BTW As I can see some functions/classes used to ignore color setting,
> f.e. TEDITOR what badly interacts with some other code which may  
> change
> colors. It can be seen sometimes in debugger. I do not know how it
> interacts with Clipper compatibility. I haven't touched them but
> IMHO it should be fixed. At least in few places they will not
> respect colors passed as parameter.

TEDITOR should only be compatible as far as it's
used in MemoEdit() (this is pretty much self contained,
beside the user function, which may fiddle with current color),
the rest can be fixed without compatibility concerns. If
you see bugs there, pls feel free to fix them.

>> Okay, any numeric will be just as good. I've checked and
>> it's also exactly what I had in mind. Shouldn't we also use
>> a numeric in the new parameter of hb_gtPutText() and the
>> new hb_gtDrawBox()? If we would have new hb_gtSetColor()
>> and hb_gtGetColor() GT API functions operating with
>> numerics, most cases would be covered.
>
> They should be change and I've been planing to make it ASAP.

Many thanks.

Brgds,
Viktor

From mbelgrano at deltain.it  Sat Oct 11 08:40:02 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 11 08:40:45 2008
Subject: [Harbour] 2008-10-11 03:24 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <17F5BA14-99E9-478B-8D02-6729F1F1C2D9@syenar.hu>
References: <20081011012438.GA5189@34-mo7-2.acn.waw.pl><E972CA2E-34AA-4C7E-841F-FF9FE87DEF84@syenar.hu><20081011094014.GA32396@34-mo7-2.acn.waw.pl><6D9937EC-DC96-41BA-BBD1-80BFBD36F312@syenar.hu><20081011104559.GB25724@34-mo7-2.acn.waw.pl>
	<17F5BA14-99E9-478B-8D02-6729F1F1C2D9@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F058@SRV02.deltain.net>


>-----Original Message-----
>From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor

>Question: I'm using my own GT layer for windowing, may
>I need to make any changes to it, to stay compatible
>with current Harbour? I'm suspecting that my layer is
>not catching some screen updates.

Hi Viktor
A GT layer for windows seem an interesting concept
In what is different from hbct.lib?
Best reagard
Massimo Belgrano

From harbour.01 at syenar.hu  Sat Oct 11 08:49:56 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 11 08:50:07 2008
Subject: [Harbour] 2008-10-11 14:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92b9f$Blat.v2.6.2$dd0fe290$a24f54830c@127.0.0.1>

2008-10-11 14:49 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/fnsplit.c
  * source/rtl/hbtoken.c
    ! HB_FNAMESPLIT(), HB_TOKENPTR() fixed to 
      reset parameters passed by reference in 
      error cases.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Sat Oct 11 08:52:41 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 11 08:52:37 2008
Subject: [Harbour] 2008-10-11 03:24 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <17F5BA14-99E9-478B-8D02-6729F1F1C2D9@syenar.hu>
References: <20081011012438.GA5189@34-mo7-2.acn.waw.pl>
	<E972CA2E-34AA-4C7E-841F-FF9FE87DEF84@syenar.hu>
	<20081011094014.GA32396@34-mo7-2.acn.waw.pl>
	<6D9937EC-DC96-41BA-BBD1-80BFBD36F312@syenar.hu>
	<20081011104559.GB25724@34-mo7-2.acn.waw.pl>
	<17F5BA14-99E9-478B-8D02-6729F1F1C2D9@syenar.hu>
Message-ID: <20081011125241.GC25724@34-mo7-2.acn.waw.pl>

On Sat, 11 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Question: I'm using my own GT layer for windowing, may
> I need to make any changes to it, to stay compatible
> with current Harbour? I'm suspecting that my layer is
> not catching some screen updates.
> I've noticed that hb_gt_BaseFree() should now be used
> for MT, which now I implemented, but it's unrelated to
> the current problem.

Just like for ST. There is only one difference.
Before recent modification if you do not call hb_gt_BaseFree()
after hb_gt_Base() nothing wrong will happen. Now in MT mode
such operation will left console locked for given thread.
It will not effect ST mode. The console mutex is reentrant
so you will not see this problem if you are using only one
thread to access screen anyhow it's always good to keep the
code clean.

>> BTW As I can see some functions/classes used to ignore color setting,
>> f.e. TEDITOR what badly interacts with some other code which may change
>> colors. It can be seen sometimes in debugger. I do not know how it
>> interacts with Clipper compatibility. I haven't touched them but
>> IMHO it should be fixed. At least in few places they will not
>> respect colors passed as parameter.
> TEDITOR should only be compatible as far as it's
> used in MemoEdit() (this is pretty much self contained,
> beside the user function, which may fiddle with current color),
> the rest can be fixed without compatibility concerns. If
> you see bugs there, pls feel free to fix them.

I do not know this code so making deeper modifications I may
break sth. I'd prefer to left it for someone more familiar with it.
Anyhow I will remember about it in next modifications (if any).

best regards,
Przemek
From druzus at acn.waw.pl  Sat Oct 11 09:03:13 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 11 09:03:12 2008
Subject: [SPAM]  [Harbour] Speedtst.exe results for 2 computers
In-Reply-To: <200810110645.01869.philb@philb.us>
References: <19847957.post@talk.nabble.com> <200810090125.41593.philb@philb.us>
	<20081009101354.GC25725@34-mo7-2.acn.waw.pl>
	<200810110645.01869.philb@philb.us>
Message-ID: <20081011130313.GA643@34-mo7-2.acn.waw.pl>

On Sat, 11 Oct 2008, Phil Barnett wrote:

Hi Phil,

> I can confirm that the fix worked.

Thank you very much.
Looks that now we cleaned all places in core code which can cause
scalability problems. Now only MM on some platforms can reduce it
but it's not directly related to Harbour core code though we can
make some small modifications yet as workarounds or begin to work
on MM designed strictly for Harbour.

best regards,
Przemek
From harbour.01 at syenar.hu  Sat Oct 11 11:12:58 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 11 11:13:09 2008
Subject: [Harbour] 2008-10-11 03:24 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081011125241.GC25724@34-mo7-2.acn.waw.pl>
References: <20081011012438.GA5189@34-mo7-2.acn.waw.pl>
	<E972CA2E-34AA-4C7E-841F-FF9FE87DEF84@syenar.hu>
	<20081011094014.GA32396@34-mo7-2.acn.waw.pl>
	<6D9937EC-DC96-41BA-BBD1-80BFBD36F312@syenar.hu>
	<20081011104559.GB25724@34-mo7-2.acn.waw.pl>
	<17F5BA14-99E9-478B-8D02-6729F1F1C2D9@syenar.hu>
	<20081011125241.GC25724@34-mo7-2.acn.waw.pl>
Message-ID: <7D43F4F7-D89C-464D-8962-4A64EAA30511@syenar.hu>

Hi Przemek and all,

FYI, the problem was that I had not overloaded PUTTEXT
GT low-level method, so some screen write were not
reflected in my local GT buffers. Before yesterday PUTTEXT
was not used in context of my app (and only in Alert()
code in Harbour), so this problem didn't appear in real
life.

I can also confirm that the TGET() fix is working fine.
[ I didn't check yet the NOTE left in the C5.3 codepath. ]

Brgds,
Viktor

On 2008.10.11., at 14:52, Przemyslaw Czerpak wrote:

> On Sat, 11 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> Question: I'm using my own GT layer for windowing, may
>> I need to make any changes to it, to stay compatible
>> with current Harbour? I'm suspecting that my layer is
>> not catching some screen updates.
>> I've noticed that hb_gt_BaseFree() should now be used
>> for MT, which now I implemented, but it's unrelated to
>> the current problem.
>
> Just like for ST. There is only one difference.
> Before recent modification if you do not call hb_gt_BaseFree()
> after hb_gt_Base() nothing wrong will happen. Now in MT mode
> such operation will left console locked for given thread.
> It will not effect ST mode. The console mutex is reentrant
> so you will not see this problem if you are using only one
> thread to access screen anyhow it's always good to keep the
> code clean.
>
>>> BTW As I can see some functions/classes used to ignore color  
>>> setting,
>>> f.e. TEDITOR what badly interacts with some other code which may  
>>> change
>>> colors. It can be seen sometimes in debugger. I do not know how it
>>> interacts with Clipper compatibility. I haven't touched them but
>>> IMHO it should be fixed. At least in few places they will not
>>> respect colors passed as parameter.
>> TEDITOR should only be compatible as far as it's
>> used in MemoEdit() (this is pretty much self contained,
>> beside the user function, which may fiddle with current color),
>> the rest can be fixed without compatibility concerns. If
>> you see bugs there, pls feel free to fix them.
>
> I do not know this code so making deeper modifications I may
> break sth. I'd prefer to left it for someone more familiar with it.
> Anyhow I will remember about it in next modifications (if any).
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From teo at windtelsoft.com  Sat Oct 11 12:11:50 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Sat Oct 11 12:34:25 2008
Subject: [Harbour] Profiling
In-Reply-To: <200810110300.37739.teo@windtelsoft.com>
References: <200810110300.37739.teo@windtelsoft.com>
Message-ID: <200810111111.50276.teo@windtelsoft.com>

On Saturday 11 October 2008 03:00:37 am Teo Fonrouge wrote:
> Hello,
>
> On Linux, I want to do some profiling in an proyect, so I have compiled
> Harbour with "-DHB_USE_PROFILER" and created the binaries.
>
> Nevertheless, when I try to run the sample at /tests/testprof.prg it simply
> aborts with a segfault.
>
> Is there something in which I must have take care of ?

I have traced out the problem at sources/vm/classes.c at the following 
function:

----------------
void hb_mthAddTime( ULONG ulClockTicks )
{
   PMETHOD pMethod = s_pClasses[ hb_objGetClassH( hb_stackSelfItem() ) ]->
                     pMethods;
   if( pMethod )
   {
      pMethod += hb_stackBaseItem()->item.asSymbol.stackstate->uiMethod;
      pMethod->ulCalls++;
      pMethod->ulTime += ulClockTicks;
   }
}
----------------

Here seems that the pointer in pMethod is wrongly indexed with:

+= hb_stackBaseItem()->item.asSymbol.stackstate->uiMethod

.


Why is used 'hb_stackBaseItem()->item.asSymbol.stackstate->uiMethod' to obtain 
the PMETHOD that needs to be profiled ???


Any help is badly appreciated.


best regards,

Teo
From lorenzo.fiorini at gmail.com  Sat Oct 11 12:51:31 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct 11 12:51:39 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
Message-ID: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>

Today we have hbodbc, hbmysql, hbpgsql, hbfbird contrib libs and
probably more in the future.
Their pourpose is to connect Harbour to SQL databases but they use
different ( class ) interfaces.

Thus if an Harbour app is made for mysql, has to heavily changed for
odbc or postgresql.

I wonder if there is interest to define a common interface between the
actual SQL libs that can be the guideline for the future contribs.

The idea is to have something like JDBC where every app that use jdbc
can use different DBS without changing the code: it could be called
Harbour Data Objects interface HDO or HDBC Harbour DataBase Connector.

To be clear this doesn't mean that the same SQL dialect can be used
with different DBS or that this can be made without changing the
existing DBF code like with SQLRDD ( for this USRRDD is probably best
suited ).

Instead the contrib/hb* classes will be more or less like they are
today but they'll have the same interface and if possible they'll have
the ability to be loaded at runtime.

Comment?

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sat Oct 11 12:58:26 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 11 12:58:47 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
Message-ID: <716F41D0-052D-460F-AB6A-1BFB41D7F04F@syenar.hu>

Hi Lorenzo,

Very good idea.

My vote for HDBC as a name.

Brgds,
Viktor

On 2008.10.11., at 18:51, Lorenzo Fiorini wrote:

> Today we have hbodbc, hbmysql, hbpgsql, hbfbird contrib libs and
> probably more in the future.
> Their pourpose is to connect Harbour to SQL databases but they use
> different ( class ) interfaces.
>
> Thus if an Harbour app is made for mysql, has to heavily changed for
> odbc or postgresql.
>
> I wonder if there is interest to define a common interface between the
> actual SQL libs that can be the guideline for the future contribs.
>
> The idea is to have something like JDBC where every app that use jdbc
> can use different DBS without changing the code: it could be called
> Harbour Data Objects interface HDO or HDBC Harbour DataBase Connector.
>
> To be clear this doesn't mean that the same SQL dialect can be used
> with different DBS or that this can be made without changing the
> existing DBF code like with SQLRDD ( for this USRRDD is probably best
> suited ).
>
> Instead the contrib/hb* classes will be more or less like they are
> today but they'll have the same interface and if possible they'll have
> the ability to be loaded at runtime.
>
> Comment?
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Sat Oct 11 13:47:49 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 11 13:48:36 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <716F41D0-052D-460F-AB6A-1BFB41D7F04F@syenar.hu>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<716F41D0-052D-460F-AB6A-1BFB41D7F04F@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F059@SRV02.deltain.net>

I also agree
This  idea uniform the access to Harbour Database by class
I suggest another name dac ,hbdac  (Data access by class)
So is clear that rdd and dac are different approach 


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Saturday, October 11, 2008 6:58 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] A standard for the Harbour's SQL libs

Hi Lorenzo,

Very good idea.

My vote for HDBC as a name.

Brgds,
Viktor

On 2008.10.11., at 18:51, Lorenzo Fiorini wrote:

> Today we have hbodbc, hbmysql, hbpgsql, hbfbird contrib libs and
> probably more in the future.
> Their pourpose is to connect Harbour to SQL databases but they use
> different ( class ) interfaces.
>
> Thus if an Harbour app is made for mysql, has to heavily changed for
> odbc or postgresql.
>
> I wonder if there is interest to define a common interface between the
> actual SQL libs that can be the guideline for the future contribs.
>
> The idea is to have something like JDBC where every app that use jdbc
> can use different DBS without changing the code: it could be called
> Harbour Data Objects interface HDO or HDBC Harbour DataBase Connector.
>
> To be clear this doesn't mean that the same SQL dialect can be used
> with different DBS or that this can be made without changing the
> existing DBF code like with SQLRDD ( for this USRRDD is probably best
> suited ).
>
> Instead the contrib/hb* classes will be more or less like they are
> today but they'll have the same interface and if possible they'll have
> the ability to be loaded at runtime.
>
> Comment?
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From lorenzo.fiorini at gmail.com  Sat Oct 11 13:51:56 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct 11 13:52:03 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <716F41D0-052D-460F-AB6A-1BFB41D7F04F@syenar.hu>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<716F41D0-052D-460F-AB6A-1BFB41D7F04F@syenar.hu>
Message-ID: <9257026e0810111051l35b800f7sf8b7078593d6ccf7@mail.gmail.com>

On Sat, Oct 11, 2008 at 6:58 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> My vote for HDBC as a name.

Yes, it's probably the best one.

Just to move:

do you use any SQL backend?

do you know JDBC?

what about the backward compatibility?

The ideal would be to have a prg for every contrib/lib that make the
changes and that can test them.

Also if every contrib/lib would have a corresponding usrrdd "driver"
we'll get the best of the both worlds.

Just "free" ideas fell free to ignore them :)

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Sat Oct 11 13:59:25 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct 11 13:59:33 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F059@SRV02.deltain.net>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<716F41D0-052D-460F-AB6A-1BFB41D7F04F@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F059@SRV02.deltain.net>
Message-ID: <9257026e0810111059m1991012dy3de77d7ef384bce9@mail.gmail.com>

On Sat, Oct 11, 2008 at 7:47 PM, Massimo Belgrano <mbelgrano@deltain.it> wrote:

> I also agree
> This  idea uniform the access to Harbour Database by class

Would you like to participate?

Do you actually use any SQL DBS with Harbour?

Do you know JDBC?

Are there Harbour/ODBC users here?

I use PostGreSQL daily so it would be good if you could pick up any of
mysql, odbc,firebird.

IMHO the odbc's main target is Oracle.
There are free development editions for both Linux and Windows.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sat Oct 11 14:05:11 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 11 14:05:22 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <9257026e0810111051l35b800f7sf8b7078593d6ccf7@mail.gmail.com>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<716F41D0-052D-460F-AB6A-1BFB41D7F04F@syenar.hu>
	<9257026e0810111051l35b800f7sf8b7078593d6ccf7@mail.gmail.com>
Message-ID: <82423274-400A-4B16-9EB3-FCD4B633A4B6@syenar.hu>

Hi Lorenzo,

> do you use any SQL backend?
>
> do you know JDBC?

Not yet, and also no experience yet with JDBC. I'm still in
the process of cleaning any DOS ties, and converting my app
to native multiplatform Harbour.

> what about the backward compatibility?

Backward compatibility may handled by simply keeping
existing classes, and developing a std one next to them.

Same can be done for support functions.

> The ideal would be to have a prg for every contrib/lib that make the
> changes and that can test them.
>
> Also if every contrib/lib would have a corresponding usrrdd "driver"
> we'll get the best of the both worlds.
>
> Just "free" ideas fell free to ignore them :)

I absolutely agree with these. Currently we have a
pretty uneven feature set for different dbs, and
RDD layers only in ADO.

We also have hbodbc, which _may_ be a base for a common
interface, or it could also be synced to the std one.
I'm saying may, because I'm not at all familiar with
ODBC, so it's difficult to judge how badly it is Microsoft
orientated or something stuck in the past. But it's
worth checking.

Brdgs,
Viktor

From lorenzo.fiorini at gmail.com  Sat Oct 11 14:40:39 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct 11 14:40:46 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <82423274-400A-4B16-9EB3-FCD4B633A4B6@syenar.hu>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<716F41D0-052D-460F-AB6A-1BFB41D7F04F@syenar.hu>
	<9257026e0810111051l35b800f7sf8b7078593d6ccf7@mail.gmail.com>
	<82423274-400A-4B16-9EB3-FCD4B633A4B6@syenar.hu>
Message-ID: <9257026e0810111140v23a8b1ay8ffb7a527a26131b@mail.gmail.com>

On Sat, Oct 11, 2008 at 8:05 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> We also have hbodbc, which _may_ be a base for a common
> interface, or it could also be synced to the std one.
> I'm saying may, because I'm not at all familiar with
> ODBC, so it's difficult to judge how badly it is Microsoft
> orientated or something stuck in the past. But it's
> worth checking.

Actually the two mainstream object oriented interfaces are ADOxyz and JDBC.

ADO is somewhat complicated to follows since it pratically exist only
under Win and has a has a mix of remote and local objects ( datasets
).

JDBC has been created multiplatform since the begin and it started
with a JDBC-ODBC "bridge" driver so it's easy to find doc and
examples.

ODBC is quite old and under Linux/Mac is almost unknown.

Clearly what we can get are only general idea and terms since the real
implementation will be extremely different.

I guess that actually the most used lib with HArbour are mysql and
postgresql and since the latter started from the former they are quite
similar.

The ODBC one follows the "VB like"  syntax Open, First, Last, Prior,
Next that is somewhat "aliens" in Harbour.

The idea is to get the odbc lib closer to the postgresql/mysql ones
not the contrary.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sat Oct 11 14:46:32 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 11 14:46:43 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <9257026e0810111140v23a8b1ay8ffb7a527a26131b@mail.gmail.com>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<716F41D0-052D-460F-AB6A-1BFB41D7F04F@syenar.hu>
	<9257026e0810111051l35b800f7sf8b7078593d6ccf7@mail.gmail.com>
	<82423274-400A-4B16-9EB3-FCD4B633A4B6@syenar.hu>
	<9257026e0810111140v23a8b1ay8ffb7a527a26131b@mail.gmail.com>
Message-ID: <B80EC986-BC48-4D27-9F86-0328F7AB690E@syenar.hu>

>> We also have hbodbc, which _may_ be a base for a common
>> interface, or it could also be synced to the std one.
>> I'm saying may, because I'm not at all familiar with
>> ODBC, so it's difficult to judge how badly it is Microsoft
>> orientated or something stuck in the past. But it's
>> worth checking.
>
> Actually the two mainstream object oriented interfaces are ADOxyz  
> and JDBC.
>
> ADO is somewhat complicated to follows since it pratically exist only
> under Win and has a has a mix of remote and local objects ( datasets
> ).
>
> JDBC has been created multiplatform since the begin and it started
> with a JDBC-ODBC "bridge" driver so it's easy to find doc and
> examples.
>
> ODBC is quite old and under Linux/Mac is almost unknown.
>
> Clearly what we can get are only general idea and terms since the real
> implementation will be extremely different.
>
> I guess that actually the most used lib with HArbour are mysql and
> postgresql and since the latter started from the former they are quite
> similar.
>
> The ODBC one follows the "VB like"  syntax Open, First, Last, Prior,
> Next that is somewhat "aliens" in Harbour.
>
> The idea is to get the odbc lib closer to the postgresql/mysql ones
> not the contrary.

Sounds perfect to me.

Brgds,
Viktor

From info at fsgiudice.com  Sat Oct 11 15:08:14 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Oct 11 15:08:27 2008
Subject: [Harbour] Console problem with MT
Message-ID: <48F0F99E.1090807@fsgiudice.com>

Hi Przemek,

I have a problem with BCC and MT.

I have built some prg in tests folder:
speedtst.prg, boxtst2.prg and memtst.prg (but I suspect that I will got 
same error for any)
using
set HB_MT=MT
bld_b32 speedtst

speedtst at the end write some non standard char to the screen, but all 
lock console until I kill the process using task manager.

My current build options are:

set C_USR=-DHB_FM_STATISTICS_OFF -DHB_FM_STD_ALLOC
set HB_BUILD_ST=

in ST mode all works as expected.

I have got this error with last changes in core after testing 
speedtst.prg in last days but I don't remember when exactly.

May I do some other test to help you ?

PS: Viktor please move :END at :CLEANUP label position (or change all 
END calls to CLEANUP) in bin\bld.bat otherwise it is not used. If you 
want I can do it.

Best regards

Francesco
From info at fsgiudice.com  Sat Oct 11 15:10:57 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Oct 11 15:11:09 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
Message-ID: <48F0FA41.8070805@fsgiudice.com>

Lorenzo,

I'm also interested and I found HDBC a good name.

Best regards

Francesco

Lorenzo Fiorini ha scritto:
> 
> The idea is to have something like JDBC where every app that use jdbc
> can use different DBS without changing the code: it could be called
> Harbour Data Objects interface HDO or HDBC Harbour DataBase Connector.


From lorenzo.fiorini at gmail.com  Sat Oct 11 15:14:50 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct 11 15:14:57 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <B80EC986-BC48-4D27-9F86-0328F7AB690E@syenar.hu>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<716F41D0-052D-460F-AB6A-1BFB41D7F04F@syenar.hu>
	<9257026e0810111051l35b800f7sf8b7078593d6ccf7@mail.gmail.com>
	<82423274-400A-4B16-9EB3-FCD4B633A4B6@syenar.hu>
	<9257026e0810111140v23a8b1ay8ffb7a527a26131b@mail.gmail.com>
	<B80EC986-BC48-4D27-9F86-0328F7AB690E@syenar.hu>
Message-ID: <9257026e0810111214r30ea4138l475e8f81fcde5dec@mail.gmail.com>

On Sat, Oct 11, 2008 at 8:46 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Sounds perfect to me.

Changing some names of the methods and the datas is easy the main
problem is to define the "platform".

Drivers are made by a C interface and by a prg class:

Will the "drivers" be dyinamically loaded?

If yes will they be dynamic libs ( dlls under win, so under Linux,
dylib under Mac )?

How can I have multiple drivers loaded at once?

Note that what I said can be completely wrong.
I'm simply making question to advance the topic.
We can also come to the conclusion that we only need to have the same
class interface and leave everything as it is now.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sat Oct 11 15:26:44 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 11 15:26:55 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <9257026e0810111214r30ea4138l475e8f81fcde5dec@mail.gmail.com>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<716F41D0-052D-460F-AB6A-1BFB41D7F04F@syenar.hu>
	<9257026e0810111051l35b800f7sf8b7078593d6ccf7@mail.gmail.com>
	<82423274-400A-4B16-9EB3-FCD4B633A4B6@syenar.hu>
	<9257026e0810111140v23a8b1ay8ffb7a527a26131b@mail.gmail.com>
	<B80EC986-BC48-4D27-9F86-0328F7AB690E@syenar.hu>
	<9257026e0810111214r30ea4138l475e8f81fcde5dec@mail.gmail.com>
Message-ID: <02817524-C7CB-42DF-9AA7-B8363DED9D84@syenar.hu>

>>
Hi Lorenzo,

>> Sounds perfect to me.
>
> Changing some names of the methods and the datas is easy the main
> problem is to define the "platform".
>
> Drivers are made by a C interface and by a prg class:
>
> Will the "drivers" be dyinamically loaded?

I'd imagine on the first round, we should have
a common class layout, maybe even as a parent class
in core (HBHDBC in source/rtl/thdbc.prg), and if this
is about ready, the corresponding contribs can start
to have classes inherited from this parent class.

When we'll have more than one contribs converted
to the new class scheme, we may think of merging
them into one contrib, or solving the dynamic
loading problem. It's probably better to discuss
the tech details of such possible merge at that point
in the future. This probably won't be that trivial
though, as some concepts of RDDs/GTs will have to
replicated there too.

[ dynamically loading driver is a bit even less
trivial than GT/RDD, and we don't really have
similar in Harbour currently, since here, the
HDBC drivers have external dependencies which
can make build and runtime loading a bit complicated.
But it's most probably doable. ]

> Note that what I said can be completely wrong.
> I'm simply making question to advance the topic.
> We can also come to the conclusion that we only need to have the same
> class interface and leave everything as it is now.

IMO you're not wrong at all, I'd personally start
with the class interface, and see the rest later.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Oct 11 15:29:07 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 11 15:29:17 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <48F0F99E.1090807@fsgiudice.com>
References: <48F0F99E.1090807@fsgiudice.com>
Message-ID: <3ADD6D5E-22A8-44CC-990C-D7336CEED6B1@syenar.hu>

Hi Francesco,

> PS: Viktor please move :END at :CLEANUP label position (or change  
> all END calls to CLEANUP) in bin\bld.bat otherwise it is not used.  
> If you want I can do it.

It's indeed better to have these enabled.
I'll do it ASAP along with some minor cleanups.

Brgds,
Viktor

From bedipritpal at hotmail.com  Sat Oct 11 15:34:57 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Oct 11 15:35:04 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <48F0F99E.1090807@fsgiudice.com>
References: <48F0F99E.1090807@fsgiudice.com>
Message-ID: <19935774.post@talk.nabble.com>


Francesco


Francesco Saverio Giudice wrote:
> 
> Hi Przemek,
> 
> I have a problem with BCC and MT.
> 
> I have built some prg in tests folder:
> speedtst.prg, boxtst2.prg and memtst.prg (but I suspect that I will got 
> same error for any)
> using
> set HB_MT=MT
> bld_b32 speedtst
> 
> speedtst at the end write some non standard char to the screen, but all 
> lock console until I kill the process using task manager.
> 
> My current build options are:
> 
> set C_USR=-DHB_FM_STATISTICS_OFF -DHB_FM_STD_ALLOC
> set HB_BUILD_ST=
> 
> in ST mode all works as expected.
> 

I have no such problems on at least XP.
All tests are running as expected in MT mode.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Console-problem-with-MT-tp19935519p19935774.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Sat Oct 11 15:36:58 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Oct 11 15:37:05 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <02817524-C7CB-42DF-9AA7-B8363DED9D84@syenar.hu>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<716F41D0-052D-460F-AB6A-1BFB41D7F04F@syenar.hu>
	<9257026e0810111051l35b800f7sf8b7078593d6ccf7@mail.gmail.com>
	<82423274-400A-4B16-9EB3-FCD4B633A4B6@syenar.hu>
	<9257026e0810111140v23a8b1ay8ffb7a527a26131b@mail.gmail.com>
	<B80EC986-BC48-4D27-9F86-0328F7AB690E@syenar.hu>
	<9257026e0810111214r30ea4138l475e8f81fcde5dec@mail.gmail.com>
	<02817524-C7CB-42DF-9AA7-B8363DED9D84@syenar.hu>
Message-ID: <19935792.post@talk.nabble.com>


Hi All


Szak?ts Viktor wrote:
> 
> IMO you're not wrong at all, I'd personally start
> with the class interface, and see the rest later.
> 

I will be particpating as well.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/A-standard-for-the-Harbour%27s-SQL-libs-tp19934238p19935792.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From lorenzo.fiorini at gmail.com  Sat Oct 11 15:38:13 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct 11 15:38:21 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <48F0FA41.8070805@fsgiudice.com>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<48F0FA41.8070805@fsgiudice.com>
Message-ID: <9257026e0810111238o11769124xfb935db2126bff3e@mail.gmail.com>

On Sat, Oct 11, 2008 at 9:10 PM, Francesco Saverio Giudice
<info@fsgiudice.com> wrote:

> I'm also interested and I found HDBC a good name.

Great!

Ciao,
Lorenzo
From harbour.01 at syenar.hu  Sat Oct 11 15:53:41 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 11 15:53:44 2008
Subject: [Harbour] 2008-10-11 21:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92bdb$Blat.v2.6.2$0f7a509a$12d8c41803dc@127.0.0.1>

2008-10-11 21:49 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/bld.bat
  * bin/bld_os2.cmd
    + Enabled cleanup of .c/object/.tds files after build.
    + Under Windows NT OSes, it's now possible to pass full .prg 
      name with extension.
    ! Few minor fixes.
    * Formatting, cleanup and help update.
    ; Please test.
--
Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Sat Oct 11 16:05:28 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct 11 16:05:35 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <19935792.post@talk.nabble.com>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<716F41D0-052D-460F-AB6A-1BFB41D7F04F@syenar.hu>
	<9257026e0810111051l35b800f7sf8b7078593d6ccf7@mail.gmail.com>
	<82423274-400A-4B16-9EB3-FCD4B633A4B6@syenar.hu>
	<9257026e0810111140v23a8b1ay8ffb7a527a26131b@mail.gmail.com>
	<B80EC986-BC48-4D27-9F86-0328F7AB690E@syenar.hu>
	<9257026e0810111214r30ea4138l475e8f81fcde5dec@mail.gmail.com>
	<02817524-C7CB-42DF-9AA7-B8363DED9D84@syenar.hu>
	<19935792.post@talk.nabble.com>
Message-ID: <9257026e0810111305v48f516e0te28a07ba2a69294c@mail.gmail.com>

On Sat, Oct 11, 2008 at 9:36 PM, Pritpal Bedi <bedipritpal@hotmail.com> wrote:
>
> Hi All
>
>
> Szak?ts Viktor wrote:
>>
>> IMO you're not wrong at all, I'd personally start
>> with the class interface, and see the rest later.
>>
>
> I will be particpating as well.

Good news.

So many people in front of the PC on Saturday? :)

best regards,
Lorenzo
From dbtopas at dbtopas.lt  Sat Oct 11 16:18:27 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sat Oct 11 16:18:30 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
Message-ID: <48F10A13.5010105@dbtopas.lt>

Lorenzo Fiorini wrote:
> Today we have hbodbc, hbmysql, hbpgsql, hbfbird contrib libs and
> probably more in the future.
> Their pourpose is to connect Harbour to SQL databases but they use
> different ( class ) interfaces.


Hi,


I've also had a problem like this. I've implemented some universal 
interface to access SQL databases. It's done via RDD, but class 
interface can be implemented also. I have implemented SQLBASE, SQLMIX 
(see below) RDDs and SDD (see below) for accessing MySQL, FireBird and 
PostgreSQL. But only MySQL SDD I've used in real application, so other 
implementation could be not complete.

I've tried to document my idea some time ago (2007-10-09). Some 
implementation details could be changed general idea is the same.


===================================================================
                      Simple SQL Interface for Harbour



1. Introduction

     Simple SQL interface implements accessing SQL query result via RDD
interface. It is not intended to be replacement for "transparent" move of
DBFCDX application to SQL world.

     I want to discuss this in more detail. Many current RDDs for SQL 
servers
(ex. SQLRDD from xHarbour.com) tries to make a feeling you are working with
DBF file, but not with SQL database. SQL server does not support many
features, ex. RECNO(), deleted flag, file locks, record locks. These RDDs
are emulating these features to make feeling of DBF. DELETED() function is
emulated by creating additional table columns to store delete flag. Some
"hidden system" tables are used to register locking operations and emulate
record and file locks in DBF style. The idea of SQL query is also lost. If
you do a simple loop

   DBUSEAREA(, "select * from my_table")
   DO WHILE ! EOF()
     somefunc( FIELD->some_sql_field )
     DBSKIP()
   ENDDO

RDD usualy will read SQL rows in portions, let's say 100 records per query.
So, hidden queries are generated. If you are using indexes these queries
are really complicated. Let's have index on FIELD1 + STR(FIELD2). A seek to
value cValue1 + STR(nValue2) will generate a query like:

   SELECT * FROM my_table
       WHERE (FIELD1 == cValue1 and FIELD2 >= nValue2) or FIELD1 > cValue1
       ORDER BY FIELD1, FIELD2, _RECNO
       LIMIT 100

After evaluation of first 100 cached records, next query will be generated:

   SELECT * FROM my_table
       WHERE (FIELD1 == cLastField1 and FIELD2 == nLastValue2 and _RECNO 
 > nLastRecno) or
             (FIELD1 == cLastField1 and FIELD2 > nLastValue2) or
             FIELD1 > cLastValue1
       ORDER BY FIELD1, FIELD2, _RECNO
       LIMIT 100

To optimize these queries the SQL index expresion should be
"FIELD1,FIELD2,_RECNO", but not "FIELD1,FIELD2" as written in INDEX ON
command.

     "Simple SQL interface" is too long to repeat every time I want to
address this library. I'll also use acronym "SSI" to address it.

     The idea of SSI is different. It does not make hidden queries. All
queries should be made explicitly by programmer. SSI gives access to query
result via RDD interface, it does not tries to emulate DBF and be
"plug-and-play" solution for DBF to SQL migration. If you do

   DBUSEAREA(, "select * from my_table")

all query (it could contain millions of records!) will be cached.

     The features of SSI approach are:

- It's possible to access SQL database of other applications. Other
   applications usualy does not follow agreement of "plug-and-play" SQL 
drivers
   about additional DELETED column, _RECNO in the end of index 
expression, etc.
   Access of SQL database of other applications is sometimes not possible.

- It's query oriented. That means a simple DO WHILE ! EOF() loop will 
iterate
   each records once and only once. This is not true for "plug-and-play" 
SQL
   drivers, if indexing is used. Just like in the case of loop over DBF 
file.
   It is not guaranteed that all records are included! Yes! If key value 
of the
   first record in index is changed to be the last record in index 
during the
   phase of record processing, DO WHILE ! EOF() loop will iterate only this
   single records even if the database contains millions of records. 
Your sould
   do FLOCK() on DBF to guarantee the records are not changed. Do you 
use FLOCK()
   before readonly DO WHILE ! EOF() loops? :)



2. Architecture


               +-------------+
               |             |
               | SQLMIX RDD  |
               |             |
               +-------------+
                    |  ^
                    V  |
               +-------------+    +---------+
               |             |--->|         |
               | SQLBASE RDD |    |   SDD   |
               |             |<---|         |
               +-------------+    +---------+


     SQLBASE RDD implements basic functionality for accessing SQL query 
result
via RDD interface. This RDD could be used, if indexing of query result 
is not
necessary or all indexing is done by SQL server (by using ORDER BY clause).

     SQLMIX RDD implements indexing of query result. This indexing is not
related to SQL server ORDER BY clause. SQLMIX do indexing of the query 
on the
client side.

     SDD is acronym for Sql Database Driver. RDD is used to implement 
access
of different database formats like DBF, SDF, etc. SDD is used to implement
access of different SQL databases. Every SQL server (MySQL, PostgreSQL, 
etc.)
has a corresponding SDD. SDD driver implements a specific part of data
exchange interface between SQLBASE and SQL server.

     A few additional functions are also implemented, ex. HB_SQLCONNECT().
Usualy these functions are just a shorter version of corresponding RDDINFO()
call.



3. Modifying database

     SSI presents a query result via RDD interface and generates no hidden
SQL queries. So, how database can be changed? Does DBAPPEND() and 
FIELDPUT()
works, or is it readonly SQL interface?
     DBAPPEND(), FIELDPUT() and other similiar functions work on cached 
query
result, i.e. query can be appended by new rows and field values can be
changed, but SQL database is not changed. DBCREATE() function can also be
used to create an "empty query result" but no table is created on SQL 
server.
So, SSI can also be used as implementation of "array RDD".
     The programmer must call SQL command explicitly to modify SQL tables.
SSI provides a method to detect which cached rows was changed or appended.

===================================================================



Best regards,
Mindaugas
From info at fsgiudice.com  Sat Oct 11 16:19:53 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Oct 11 16:20:56 2008
Subject: [Harbour] 2008-10-11 21:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c92bdb$Blat.v2.6.2$0f7a509a$12d8c41803dc@127.0.0.1>
References: <01c92bdb$Blat.v2.6.2$0f7a509a$12d8c41803dc@127.0.0.1>
Message-ID: <48F10A69.8050408@fsgiudice.com>

Hi Viktor,

another addition I found useful and I use in my batch is that if I pass 
/mt o /MT as first parameter my batch auto add set HB_MT=MT saving old 
state and resetting at end.
Could you find it useful or do you think that it is better leave it only 
as env var ?

Best regards

Francesco

Szak?ts Viktor ha scritto:
> 2008-10-11 21:49 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * bin/bld.bat
>   * bin/bld_os2.cmd
>     + Enabled cleanup of .c/object/.tds files after build.
>     + Under Windows NT OSes, it's now possible to pass full .prg 
>       name with extension.
>     ! Few minor fixes.
>     * Formatting, cleanup and help update.
>     ; Please test.
> --
> Brgds,
> Viktor
> 

From info at fsgiudice.com  Sat Oct 11 16:23:15 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Oct 11 16:23:27 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <19935774.post@talk.nabble.com>
References: <48F0F99E.1090807@fsgiudice.com> <19935774.post@talk.nabble.com>
Message-ID: <48F10B33.1070701@fsgiudice.com>

Hi Pritpal,

as I wrote you privately and then now I report here for Przemek,
probably it is a Vista problem, now I'm testing it in a XP environment 
to check.

Anyone else has Vista to report if there are MT console problems ?

Best Regards

Francesco

Pritpal Bedi ha scritto:
> Francesco
> 
> I have no such problems on at least XP.
> All tests are running as expected in MT mode.
> 

From mbelgrano at deltain.it  Sat Oct 11 16:24:45 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 11 16:25:18 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <9257026e0810111305v48f516e0te28a07ba2a69294c@mail.gmail.com>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com><716F41D0-052D-460F-AB6A-1BFB41D7F04F@syenar.hu><9257026e0810111051l35b800f7sf8b7078593d6ccf7@mail.gmail.com><82423274-400A-4B16-9EB3-FCD4B633A4B6@syenar.hu><9257026e0810111140v23a8b1ay8ffb7a527a26131b@mail.gmail.com><B80EC986-BC48-4D27-9F86-0328F7AB690E@syenar.hu><9257026e0810111214r30ea4138l475e8f81fcde5dec@mail.gmail.com><02817524-C7CB-42DF-9AA7-B8363DED9D84@syenar.hu><19935792.post@talk.nabble.com>
	<9257026e0810111305v48f516e0te28a07ba2a69294c@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F05A@SRV02.deltain.net>

Incapsulating Java Database Connectivity (JDBC) API permit of use drivers for DB2
JDBC,MS Access,MS SQL Server,MySQL,Oracle,PostgreSQL,Sybase, ecc so old   
Each driver will allow Conn. Pooling, DataSource, Dist. Trans, RowSets

So most contrib. can be onsolete

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Lorenzo Fiorini
Sent: Saturday, October 11, 2008 10:05 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] A standard for the Harbour's SQL libs

On Sat, Oct 11, 2008 at 9:36 PM, Pritpal Bedi <bedipritpal@hotmail.com> wrote:
>
> Hi All
>
>
> Szak?ts Viktor wrote:
>>
>> IMO you're not wrong at all, I'd personally start
>> with the class interface, and see the rest later.
>>
>
> I will be particpating as well.

Good news.

So many people in front of the PC on Saturday? :)

best regards,
Lorenzo
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Sat Oct 11 16:32:26 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 11 16:32:39 2008
Subject: [Harbour] 2008-10-11 21:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <48F10A69.8050408@fsgiudice.com>
References: <01c92bdb$Blat.v2.6.2$0f7a509a$12d8c41803dc@127.0.0.1>
	<48F10A69.8050408@fsgiudice.com>
Message-ID: <C8CF3210-6409-43DD-8DAE-A8FE9CAF8A9A@syenar.hu>

>
Hi Francesco,

> Hi Viktor,
>
> another addition I found useful and I use in my batch is that if I  
> pass /mt o /MT as first parameter my batch auto add set HB_MT=MT  
> saving old state and resetting at end.
> Could you find it useful or do you think that it is better leave it  
> only as env var ?

It's pretty painful to do this in a generic and clean
way in simple .bat files, at least I haven't found any
such solutions so far, so in Harbour this method of
parameter passing is not used in batch files. To keep
things simple and common, I'd rather stick with the
current envvar method this time.

[ Things would be easier if DOS/Win9x support could
be dropped, but they are still used apparently. ]

Brgds,
Viktor

From mbelgrano at deltain.it  Sat Oct 11 16:32:29 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 11 16:33:02 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <48F10A13.5010105@dbtopas.lt>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<48F10A13.5010105@dbtopas.lt>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F05B@SRV02.deltain.net>

This can be a very interesting idea
Rdd will have also a class path who use all the peculiarity of dbms
   DBUSEAREA(, "select * from my_table")
   Mydbclass=whatistheclass(alias())
   Mydbclass:connect="myserver,mypwd;"
   DO WHILE ! EOF()
     somefunc( FIELD->some_sql_field )
     DBSKIP()
     Mydbclass.Movenext
   ENDDO

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Mindaugas
Kavaliauskas
Sent: Saturday, October 11, 2008 10:18 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] A standard for the Harbour's SQL libs

Lorenzo Fiorini wrote:
> Today we have hbodbc, hbmysql, hbpgsql, hbfbird contrib libs and
> probably more in the future.
> Their pourpose is to connect Harbour to SQL databases but they use
> different ( class ) interfaces.


Hi,


I've also had a problem like this. I've implemented some universal 
interface to access SQL databases. It's done via RDD, but class 
interface can be implemented also. I have implemented SQLBASE, SQLMIX 
(see below) RDDs and SDD (see below) for accessing MySQL, FireBird and 
PostgreSQL. But only MySQL SDD I've used in real application, so other 
implementation could be not complete.

I've tried to document my idea some time ago (2007-10-09). Some 
implementation details could be changed general idea is the same.


===================================================================
                      Simple SQL Interface for Harbour



1. Introduction

     Simple SQL interface implements accessing SQL query result via RDD
interface. It is not intended to be replacement for "transparent" move
of
DBFCDX application to SQL world.

     I want to discuss this in more detail. Many current RDDs for SQL 
servers
(ex. SQLRDD from xHarbour.com) tries to make a feeling you are working
with
DBF file, but not with SQL database. SQL server does not support many
features, ex. RECNO(), deleted flag, file locks, record locks. These
RDDs
are emulating these features to make feeling of DBF. DELETED() function
is
emulated by creating additional table columns to store delete flag. Some
"hidden system" tables are used to register locking operations and
emulate
record and file locks in DBF style. The idea of SQL query is also lost.
If
you do a simple loop

   DBUSEAREA(, "select * from my_table")
   DO WHILE ! EOF()
     somefunc( FIELD->some_sql_field )
     DBSKIP()
   ENDDO

RDD usualy will read SQL rows in portions, let's say 100 records per
query.
So, hidden queries are generated. If you are using indexes these queries
are really complicated. Let's have index on FIELD1 + STR(FIELD2). A seek
to
value cValue1 + STR(nValue2) will generate a query like:

   SELECT * FROM my_table
       WHERE (FIELD1 == cValue1 and FIELD2 >= nValue2) or FIELD1 >
cValue1
       ORDER BY FIELD1, FIELD2, _RECNO
       LIMIT 100

After evaluation of first 100 cached records, next query will be
generated:

   SELECT * FROM my_table
       WHERE (FIELD1 == cLastField1 and FIELD2 == nLastValue2 and _RECNO

 > nLastRecno) or
             (FIELD1 == cLastField1 and FIELD2 > nLastValue2) or
             FIELD1 > cLastValue1
       ORDER BY FIELD1, FIELD2, _RECNO
       LIMIT 100

To optimize these queries the SQL index expresion should be
"FIELD1,FIELD2,_RECNO", but not "FIELD1,FIELD2" as written in INDEX ON
command.

     "Simple SQL interface" is too long to repeat every time I want to
address this library. I'll also use acronym "SSI" to address it.

     The idea of SSI is different. It does not make hidden queries. All
queries should be made explicitly by programmer. SSI gives access to
query
result via RDD interface, it does not tries to emulate DBF and be
"plug-and-play" solution for DBF to SQL migration. If you do

   DBUSEAREA(, "select * from my_table")

all query (it could contain millions of records!) will be cached.

     The features of SSI approach are:

- It's possible to access SQL database of other applications. Other
   applications usualy does not follow agreement of "plug-and-play" SQL 
drivers
   about additional DELETED column, _RECNO in the end of index 
expression, etc.
   Access of SQL database of other applications is sometimes not
possible.

- It's query oriented. That means a simple DO WHILE ! EOF() loop will 
iterate
   each records once and only once. This is not true for "plug-and-play"

SQL
   drivers, if indexing is used. Just like in the case of loop over DBF 
file.
   It is not guaranteed that all records are included! Yes! If key value

of the
   first record in index is changed to be the last record in index 
during the
   phase of record processing, DO WHILE ! EOF() loop will iterate only
this
   single records even if the database contains millions of records. 
Your sould
   do FLOCK() on DBF to guarantee the records are not changed. Do you 
use FLOCK()
   before readonly DO WHILE ! EOF() loops? :)



2. Architecture


               +-------------+
               |             |
               | SQLMIX RDD  |
               |             |
               +-------------+
                    |  ^
                    V  |
               +-------------+    +---------+
               |             |--->|         |
               | SQLBASE RDD |    |   SDD   |
               |             |<---|         |
               +-------------+    +---------+


     SQLBASE RDD implements basic functionality for accessing SQL query 
result
via RDD interface. This RDD could be used, if indexing of query result 
is not
necessary or all indexing is done by SQL server (by using ORDER BY
clause).

     SQLMIX RDD implements indexing of query result. This indexing is
not
related to SQL server ORDER BY clause. SQLMIX do indexing of the query 
on the
client side.

     SDD is acronym for Sql Database Driver. RDD is used to implement 
access
of different database formats like DBF, SDF, etc. SDD is used to
implement
access of different SQL databases. Every SQL server (MySQL, PostgreSQL, 
etc.)
has a corresponding SDD. SDD driver implements a specific part of data
exchange interface between SQLBASE and SQL server.

     A few additional functions are also implemented, ex.
HB_SQLCONNECT().
Usualy these functions are just a shorter version of corresponding
RDDINFO()
call.



3. Modifying database

     SSI presents a query result via RDD interface and generates no
hidden
SQL queries. So, how database can be changed? Does DBAPPEND() and 
FIELDPUT()
works, or is it readonly SQL interface?
     DBAPPEND(), FIELDPUT() and other similiar functions work on cached 
query
result, i.e. query can be appended by new rows and field values can be
changed, but SQL database is not changed. DBCREATE() function can also
be
used to create an "empty query result" but no table is created on SQL 
server.
So, SSI can also be used as implementation of "array RDD".
     The programmer must call SQL command explicitly to modify SQL
tables.
SSI provides a method to detect which cached rows was changed or
appended.

===================================================================



Best regards,
Mindaugas
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Sat Oct 11 16:37:13 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 11 16:37:23 2008
Subject: [Harbour] 2008-10-11 21:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <48F10A69.8050408@fsgiudice.com>
References: <01c92bdb$Blat.v2.6.2$0f7a509a$12d8c41803dc@127.0.0.1>
	<48F10A69.8050408@fsgiudice.com>
Message-ID: <8FEB3CED-EE2A-4D24-A7C3-D694D2961707@syenar.hu>

BTW, for this problem, IMO a Harbour switch would
be the best candidate (build-tool independent and
natural), combined with the #pragma lib requesting feature.

harbour -mt hello.prg -> would generate .c file which
would force hbvmmt lib linkage, otherwise everything
would stays as it is now.

What do you guys think? Przemek, do you think it's doable?

Brgds,
Viktor

On 2008.10.11., at 22:19, Francesco Saverio Giudice wrote:

> Hi Viktor,
>
> another addition I found useful and I use in my batch is that if I  
> pass /mt o /MT as first parameter my batch auto add set HB_MT=MT  
> saving old state and resetting at end.
> Could you find it useful or do you think that it is better leave it  
> only as env var ?
>
> Best regards
>
> Francesco
>
> Szak?ts Viktor ha scritto:
>> 2008-10-11 21:49 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>  * bin/bld.bat
>>  * bin/bld_os2.cmd
>>    + Enabled cleanup of .c/object/.tds files after build.
>>    + Under Windows NT OSes, it's now possible to pass  
>> full .prg       name with extension.
>>    ! Few minor fixes.
>>    * Formatting, cleanup and help update.
>>    ; Please test.
>> --
>> Brgds,
>> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sat Oct 11 16:41:32 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 11 16:41:41 2008
Subject: [Harbour] 2008-10-11 03:24 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F058@SRV02.deltain.net>
References: <20081011012438.GA5189@34-mo7-2.acn.waw.pl><E972CA2E-34AA-4C7E-841F-FF9FE87DEF84@syenar.hu><20081011094014.GA32396@34-mo7-2.acn.waw.pl><6D9937EC-DC96-41BA-BBD1-80BFBD36F312@syenar.hu><20081011104559.GB25724@34-mo7-2.acn.waw.pl>
	<17F5BA14-99E9-478B-8D02-6729F1F1C2D9@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F058@SRV02.deltain.net>
Message-ID: <9850F24A-28D1-4AB1-B4C1-3CC341919B98@syenar.hu>

>>
Hi Massimo,

>> -----Original Message-----
>> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org 
>> ] On Behalf Of Szak?ts Viktor
>
>> Question: I'm using my own GT layer for windowing, may
>> I need to make any changes to it, to stay compatible
>> with current Harbour? I'm suspecting that my layer is
>> not catching some screen updates.
>
> Hi Viktor
> A GT layer for windows seem an interesting concept
> In what is different from hbct.lib?

It offers overlapping window support (which
means you can write to background windows),
plus some less important goodies like automatic
multi-level window shadows.

Brgds,
Viktor

From mbelgrano at deltain.it  Sat Oct 11 16:49:43 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 11 16:50:17 2008
Subject: [Harbour] 2008-10-11 03:24 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <9850F24A-28D1-4AB1-B4C1-3CC341919B98@syenar.hu>
References: <20081011012438.GA5189@34-mo7-2.acn.waw.pl><E972CA2E-34AA-4C7E-841F-FF9FE87DEF84@syenar.hu><20081011094014.GA32396@34-mo7-2.acn.waw.pl><6D9937EC-DC96-41BA-BBD1-80BFBD36F312@syenar.hu><20081011104559.GB25724@34-mo7-2.acn.waw.pl><17F5BA14-99E9-478B-8D02-6729F1F1C2D9@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815F058@SRV02.deltain.net>
	<9850F24A-28D1-4AB1-B4C1-3CC341919B98@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F05C@SRV02.deltain.net>

Sound intresting
Can you post same sample?

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Saturday, October 11, 2008 10:42 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] 2008-10-11 03:24 UTC+0200 PrzemyslawCzerpak(druzus/at/priv.onet.pl)

>>
Hi Massimo,

>> -----Original Message-----
>> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org 
>> ] On Behalf Of Szak?ts Viktor
>
>> Question: I'm using my own GT layer for windowing, may
>> I need to make any changes to it, to stay compatible
>> with current Harbour? I'm suspecting that my layer is
>> not catching some screen updates.
>
> Hi Viktor
> A GT layer for windows seem an interesting concept
> In what is different from hbct.lib?

It offers overlapping window support (which
means you can write to background windows),
plus some less important goodies like automatic
multi-level window shadows.

Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Sat Oct 11 17:06:30 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 11 17:07:02 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <48F10B33.1070701@fsgiudice.com>
References: <48F0F99E.1090807@fsgiudice.com> <19935774.post@talk.nabble.com>
	<48F10B33.1070701@fsgiudice.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F05D@SRV02.deltain.net>

I have tried  with Vista and BCC 5.5.1 and MT.
set HB_MT=MT
bld_b32 speedtst

I confirm probleM with speedtst ,boxtst2.prg and memtst.prg also 
At the end the Process not be close

My current build options are:
set C_USR=-DHB_FM_STATISTICS_OFF -tWM -OS -Ov -Oi -Oc -Q
set HB_BUILD_ST=


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Francesco
Saverio Giudice
Sent: Saturday, October 11, 2008 10:23 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Console problem with MT

Hi Pritpal,

as I wrote you privately and then now I report here for Przemek,
probably it is a Vista problem, now I'm testing it in a XP environment 
to check.

Anyone else has Vista to report if there are MT console problems ?

Best Regards

Francesco

Pritpal Bedi ha scritto:
> Francesco
> 
> I have no such problems on at least XP.
> All tests are running as expected in MT mode.
> 

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From info at fsgiudice.com  Sat Oct 11 17:17:59 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Oct 11 17:18:12 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F05D@SRV02.deltain.net>
References: <48F0F99E.1090807@fsgiudice.com>
	<19935774.post@talk.nabble.com>	<48F10B33.1070701@fsgiudice.com>
	<AFB948164110ED43B5EB849E8DEEF03815F05D@SRV02.deltain.net>
Message-ID: <48F11807.5010002@fsgiudice.com>

Massimo,

thank you, so the problem seems to be related to Vista.

Best Regards

Francesco

Massimo Belgrano ha scritto:
> I have tried  with Vista and BCC 5.5.1 and MT.
> set HB_MT=MT
> bld_b32 speedtst
> 
> I confirm probleM with speedtst ,boxtst2.prg and memtst.prg also 
> At the end the Process not be close
> 
> My current build options are:
> set C_USR=-DHB_FM_STATISTICS_OFF -tWM -OS -Ov -Oi -Oc -Q
> set HB_BUILD_ST=
> 
> 
From druzus at acn.waw.pl  Sat Oct 11 17:38:31 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 11 17:38:53 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
Message-ID: <20081011213831.GA5481@34-mo7-2.acn.waw.pl>

On Sat, 11 Oct 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> The idea is to have something like JDBC where every app that use jdbc
> can use different DBS without changing the code: it could be called
> Harbour Data Objects interface HDO or HDBC Harbour DataBase Connector.

Very good idea. If possible then I can try to help though I have some
other pending jobs I started and I'd like to finish so I cannot promise
I'll find enough time for it - at least in the nearest weeks.
I like the HDBC name because it already suggests what it is even
for non harbour users - nearly everybody heard about JDBC.

Before you will started the work then I suggest you to look at
CLIP project - you will find in SF.
Few years ago Rust implemented such common class interface for
different RDBMS in CLIP so it may give you some ideas about
similar implementation in Clipper compatible language. Maybe
it will be good to use compatible .prg interface if you will
find it interesting. I do not know how many people use Harbour
and CLIP for their programs but easy portability between this
two projects may be usefull in some cases.
Please only remember that CLIP is covered by pure GPL so we cannot
take any source code from them and keep Harbour exception.

best regards,
Przemek
From druzus at acn.waw.pl  Sat Oct 11 17:53:01 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 11 17:53:23 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <48F0F99E.1090807@fsgiudice.com>
References: <48F0F99E.1090807@fsgiudice.com>
Message-ID: <20081011215301.GB5481@34-mo7-2.acn.waw.pl>

On Sat, 11 Oct 2008, Francesco Saverio Giudice wrote:

Hi Francesco,

> I have a problem with BCC and MT.
> I have built some prg in tests folder:
> speedtst.prg, boxtst2.prg and memtst.prg (but I suspect that I will got 
> same error for any)
> using
> set HB_MT=MT
> bld_b32 speedtst
> speedtst at the end write some non standard char to the screen, but all 
> lock console until I kill the process using task manager.

Please make sure that you are using latest SVN code.
In this commit:
   2008-10-10 01:43 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)

I created possible bad deadlock on application exit.
I lost whole day to once again document all Harbour internal locks
and find the reason which was caused by my dirty "fix" to hb_threadID()
to return valid identifier in all cases.
I finally cleand the code in:
   2008-10-10 22:46 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)

and this version should work without such problems. At least on the
paper ;-) - it's still possible that I made some typos in implementation
but before I'll begin to dig it I have to be sure you are using the latest
SVN code.

BTW using any internal HVM locks is critical and should be done with
extreme careful and used only for some small and local places or sooner
or later some other modification will exploit them.

best regards,
Przemek
From harbour.01 at syenar.hu  Sat Oct 11 17:55:44 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 11 17:55:54 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F05D@SRV02.deltain.net>
References: <48F0F99E.1090807@fsgiudice.com> <19935774.post@talk.nabble.com>
	<48F10B33.1070701@fsgiudice.com>
	<AFB948164110ED43B5EB849E8DEEF03815F05D@SRV02.deltain.net>
Message-ID: <A24F18CF-6901-42C8-A22F-466B6BAF4FFA@syenar.hu>

Hi Massimo,

On 2008.10.11., at 23:06, Massimo Belgrano wrote:

> My current build options are:
> set C_USR=-DHB_FM_STATISTICS_OFF -tWM -OS -Ov -Oi -Oc -Q
> set HB_BUILD_ST=

You can now safely change this to this:
set C_USR=-DHB_FM_STATISTICS_OFF

The rest is now default or not needed.

Brgds,
Viktor

From info at fsgiudice.com  Sat Oct 11 18:05:55 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Oct 11 18:06:07 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <20081011215301.GB5481@34-mo7-2.acn.waw.pl>
References: <48F0F99E.1090807@fsgiudice.com>
	<20081011215301.GB5481@34-mo7-2.acn.waw.pl>
Message-ID: <48F12343.8010501@fsgiudice.com>

Hi Przemek,

Przemyslaw Czerpak ha scritto:
> On Sat, 11 Oct 2008, Francesco Saverio Giudice wrote:
> 
> Hi Francesco,
> 
> Please make sure that you are using latest SVN code.

I'm using last SVN
2008-10-11 21:49 UTC+0200 Viktor Szakats (harbour.01 syenar hu)

thank you for your efforts.
Tell me if I can help in any way.

Best Regards

Francesco
From info at fsgiudice.com  Sat Oct 11 18:07:59 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Oct 11 18:08:53 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <20081011215301.GB5481@34-mo7-2.acn.waw.pl>
References: <48F0F99E.1090807@fsgiudice.com>
	<20081011215301.GB5481@34-mo7-2.acn.waw.pl>
Message-ID: <48F123BF.3060600@fsgiudice.com>

Ah, forgotten to tell (remembered after last Viktor's mail) that last 
test I did was with only
set C_USR=-DHB_FM_STATISTICS_OFF

BR

Francesco

From harbour.01 at syenar.hu  Sat Oct 11 18:15:37 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 11 18:15:47 2008
Subject: [Harbour] 2008-10-11 03:24 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F05C@SRV02.deltain.net>
References: <20081011012438.GA5189@34-mo7-2.acn.waw.pl><E972CA2E-34AA-4C7E-841F-FF9FE87DEF84@syenar.hu><20081011094014.GA32396@34-mo7-2.acn.waw.pl><6D9937EC-DC96-41BA-BBD1-80BFBD36F312@syenar.hu><20081011104559.GB25724@34-mo7-2.acn.waw.pl><17F5BA14-99E9-478B-8D02-6729F1F1C2D9@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815F058@SRV02.deltain.net>
	<9850F24A-28D1-4AB1-B4C1-3CC341919B98@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F05C@SRV02.deltain.net>
Message-ID: <03BE8F0A-490C-4F9D-AB61-1BA3536B8A1B@syenar.hu>

---
... anywhere in the code ...
SetMainStatus( "status line on base window" )
...

PROCEDURE SetMainStatus( cStatus )
    LOCAL wndOld := wndSetFocus( IDW_DESKTOP )
    DispOutAt( MaxRow(), 0, cStatus )
    wndSetFocus( wndOld )
    RETURN
---

The interface is very similar to the multi-window
stuff I was proposing a while ago.

I also use numeric color values for speed, easy
manipulation and storage, and an alternate .prg
level terminal output API able to handle that.
Advantages are smaller nowadays, but it's IMO still
much more efficient to use and program than Clipper
color strings.

Brgds,
Viktor

On 2008.10.11., at 22:49, Massimo Belgrano wrote:

> Sound intresting
> Can you post same sample?
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org 
> ] On Behalf Of Szak?ts Viktor
> Sent: Saturday, October 11, 2008 10:42 PM
> To: Harbour Project Main Developer List.
> Subject: Re: [Harbour] 2008-10-11 03:24 UTC+0200  
> PrzemyslawCzerpak(druzus/at/priv.onet.pl)
>
>>>
> Hi Massimo,
>
>>> -----Original Message-----
>>> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org
>>> ] On Behalf Of Szak?ts Viktor
>>
>>> Question: I'm using my own GT layer for windowing, may
>>> I need to make any changes to it, to stay compatible
>>> with current Harbour? I'm suspecting that my layer is
>>> not catching some screen updates.
>>
>> Hi Viktor
>> A GT layer for windows seem an interesting concept
>> In what is different from hbct.lib?
>
> It offers overlapping window support (which
> means you can write to background windows),
> plus some less important goodies like automatic
> multi-level window shadows.
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Sat Oct 11 18:24:46 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 11 18:25:20 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <20081011213831.GA5481@34-mo7-2.acn.waw.pl>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<20081011213831.GA5481@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F060@SRV02.deltain.net>

When you planed release Multi Windows interface for thread with own console window?


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Saturday, October 11, 2008 11:39 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] A standard for the Harbour's SQL libs

On Sat, 11 Oct 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> The idea is to have something like JDBC where every app that use jdbc
> can use different DBS without changing the code: it could be called
> Harbour Data Objects interface HDO or HDBC Harbour DataBase Connector.

Very good idea. If possible then I can try to help though I have some
other pending jobs I started and I'd like to finish so I cannot promise
I'll find enough time for it - at least in the nearest weeks.
I like the HDBC name because it already suggests what it is even
for non harbour users - nearly everybody heard about JDBC.

Before you will started the work then I suggest you to look at
CLIP project - you will find in SF.
Few years ago Rust implemented such common class interface for
different RDBMS in CLIP so it may give you some ideas about
similar implementation in Clipper compatible language. Maybe
it will be good to use compatible .prg interface if you will
find it interesting. I do not know how many people use Harbour
and CLIP for their programs but easy portability between this
two projects may be usefull in some cases.
Please only remember that CLIP is covered by pure GPL so we cannot
take any source code from them and keep Harbour exception.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Sat Oct 11 18:35:43 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 11 18:36:16 2008
Subject: [Harbour] 2008-10-11 03:24
	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <03BE8F0A-490C-4F9D-AB61-1BA3536B8A1B@syenar.hu>
References: <20081011012438.GA5189@34-mo7-2.acn.waw.pl><E972CA2E-34AA-4C7E-841F-FF9FE87DEF84@syenar.hu><20081011094014.GA32396@34-mo7-2.acn.waw.pl><6D9937EC-DC96-41BA-BBD1-80BFBD36F312@syenar.hu><20081011104559.GB25724@34-mo7-2.acn.waw.pl><17F5BA14-99E9-478B-8D02-6729F1F1C2D9@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815F058@SRV02.deltain.net><9850F24A-28D1-4AB1-B4C1-3CC341919B98@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815F05C@SRV02.deltain.net>
	<03BE8F0A-490C-4F9D-AB61-1BA3536B8A1B@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F061@SRV02.deltain.net>

I don't have found your post regarding multi windows 
Plase can you resend?
Are all true windows or only logical windows like CT?
You want share this code?
I am happy to made same test about this idea, also because I need something of similar


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Sunday, October 12, 2008 12:16 AM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] 2008-10-11 03:24 UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)

---
... anywhere in the code ...
SetMainStatus( "status line on base window" )
...

PROCEDURE SetMainStatus( cStatus )
    LOCAL wndOld := wndSetFocus( IDW_DESKTOP )
    DispOutAt( MaxRow(), 0, cStatus )
    wndSetFocus( wndOld )
    RETURN
---

The interface is very similar to the multi-window
stuff I was proposing a while ago.

I also use numeric color values for speed, easy
manipulation and storage, and an alternate .prg
level terminal output API able to handle that.
Advantages are smaller nowadays, but it's IMO still
much more efficient to use and program than Clipper
color strings.

Brgds,
Viktor

On 2008.10.11., at 22:49, Massimo Belgrano wrote:

> Sound intresting
> Can you post same sample?
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org 
> ] On Behalf Of Szak?ts Viktor
> Sent: Saturday, October 11, 2008 10:42 PM
> To: Harbour Project Main Developer List.
> Subject: Re: [Harbour] 2008-10-11 03:24 UTC+0200  
> PrzemyslawCzerpak(druzus/at/priv.onet.pl)
>
>>>
> Hi Massimo,
>
>>> -----Original Message-----
>>> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org
>>> ] On Behalf Of Szak?ts Viktor
>>
>>> Question: I'm using my own GT layer for windowing, may
>>> I need to make any changes to it, to stay compatible
>>> with current Harbour? I'm suspecting that my layer is
>>> not catching some screen updates.
>>
>> Hi Viktor
>> A GT layer for windows seem an interesting concept
>> In what is different from hbct.lib?
>
> It offers overlapping window support (which
> means you can write to background windows),
> plus some less important goodies like automatic
> multi-level window shadows.
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Sat Oct 11 21:55:08 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 11 21:55:31 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <48F12343.8010501@fsgiudice.com>
References: <48F0F99E.1090807@fsgiudice.com>
	<20081011215301.GB5481@34-mo7-2.acn.waw.pl>
	<48F12343.8010501@fsgiudice.com>
Message-ID: <20081012015508.GA16049@34-mo7-2.acn.waw.pl>

On Sun, 12 Oct 2008, Francesco Saverio Giudice wrote:

Hi Francesco,

> I'm using last SVN
> 2008-10-11 21:49 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
> thank you for your efforts.
> Tell me if I can help in any way.

Let's try to reduce the problem.
In tests/mt/ there is set of MT test programs.
Can you replicate the problem with each of them?
If not then which ones fails?
How exactly does the screen output look?
Which GT you are using?
Can someone replicate it in non VISTA Windows or it's only local
to this OS?
For tests you can easy disable GT locking.
It's enough to comment in rtl/hbgtcore.c line 119:

   pGT->pMutex = hb_threadMutexCreate( TRUE );

Mutex will not be allocated what efectively disable any GT locking.
Does it help to resolve the problem?

I looked at the code and it seems to be OK.
In Linux it works without any problems so it's hard to me guess
were to look for possible problems when I do not know where exactly
the problem is. It could be sth stupid like problems with synchronization
mechanism final cleanup code strictly oriented to given OS.
BTW Does the problem happen in each application linked with
hbvmmt even if it does not create new threads?

best regards,
Przemek
From druzus at acn.waw.pl  Sat Oct 11 22:01:16 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 11 22:01:37 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F060@SRV02.deltain.net>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<20081011213831.GA5481@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F060@SRV02.deltain.net>
Message-ID: <20081012020116.GB16049@34-mo7-2.acn.waw.pl>

On Sun, 12 Oct 2008, Massimo Belgrano wrote:

Hi Massimo,

> When you planed release Multi Windows interface for thread with own console window?

When I'll finish the base of MT mode and find a free day for it.
Now I have to find the reason of problem with Vista MT builds.
Then I will have to resolve at least 2 positions from my MT
TODO builds:

   5. There is possible race condition when class function is
      called 1-st time to create new object. It's possible that
      two threads will try to register the same class. It has to
      be fixed.

   6, HB_LIBLOAD()/__HRBLOAD() may not be MT safe in some cases.
      Before they will not be resolved please try to not use this
      functions when other threads are executed.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Sun Oct 12 02:53:05 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Oct 12 02:53:13 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <48F10A13.5010105@dbtopas.lt>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<48F10A13.5010105@dbtopas.lt>
Message-ID: <9257026e0810112353l7bc2290fn17d1b09ed02e4ead@mail.gmail.com>

On Sat, Oct 11, 2008 at 10:18 PM, Mindaugas Kavaliauskas
<dbtopas@dbtopas.lt> wrote:

> I've also had a problem like this. I've implemented some universal interface
> to access SQL databases. It's done via RDD, but class interface can be
> implemented also. I have implemented SQLBASE, SQLMIX (see below) RDDs and
> SDD (see below) for accessing MySQL, FireBird and PostgreSQL. But only MySQL
> SDD I've used in real application, so other implementation could be not
> complete.
...
> So, SSI can also be used as implementation of "array RDD".
>    The programmer must call SQL command explicitly to modify SQL tables.
> SSI provides a method to detect which cached rows was changed or appended.

Good job.

Now I can see 3 levels:

low) full plain remote SQL layer made by "armonized" hbpgsql+hbmysql+... classes
mid) USRRDDs based on the above classes
top) a more elaborate "cached" solution like your SQLBASE

Comments are welcome.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Sun Oct 12 03:03:23 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Oct 12 03:03:31 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <20081011213831.GA5481@34-mo7-2.acn.waw.pl>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<20081011213831.GA5481@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0810120003q7a597fc0l6caa9c54cdac449f@mail.gmail.com>

On Sat, Oct 11, 2008 at 11:38 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Before you will started the work then I suggest you to look at
> CLIP project - you will find in SF.
> Few years ago Rust implemented such common class interface for
> different RDBMS in CLIP so it may give you some ideas about
> similar implementation in Clipper compatible language. Maybe
> it will be good to use compatible .prg interface if you will
> find it interesting. I do not know how many people use Harbour
> and CLIP for their programs but easy portability between this
> two projects may be usefull in some cases.
> Please only remember that CLIP is covered by pure GPL so we cannot
> take any source code from them and keep Harbour exception.

Thanks for the hint.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Sun Oct 12 03:36:38 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Oct 12 03:36:45 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <9257026e0810120003q7a597fc0l6caa9c54cdac449f@mail.gmail.com>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<20081011213831.GA5481@34-mo7-2.acn.waw.pl>
	<9257026e0810120003q7a597fc0l6caa9c54cdac449f@mail.gmail.com>
Message-ID: <9257026e0810120036v24623963h35a56e22db85d71c@mail.gmail.com>

On Sun, Oct 12, 2008 at 9:03 AM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com> wrote:

It seems that HDBC has been decided. Ok step 1 done :)

Resources for all the interested:

JDBC tutorial
http://java.sun.com/docs/books/tutorial/jdbc/basics/index.html

CLIP SQL interface
http://www.itk.ru/clip-doc.en/sql.html

ADO.NET
http://en.wikipedia.org/wiki/ADO.NET

contrib/hb* source code

source/rdd/usrrdd rdds and examples

Suggestions and comments are welcomed.

BTW does anyone have Mac OS X DBMS skills?

I've installed macports Postgresql 8.2 and I'm trying to get hbpgsql
working but I always get "_PQConnectdb undefined".

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sun Oct 12 04:04:57 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 12 04:05:09 2008
Subject: [Harbour] Error code type
Message-ID: <58295650-DD28-40FA-820C-AD7A81E2848E@syenar.hu>

Hi all,

OS error codes are currently stored as USHORT.
Windows uses DWORD, there is a function which
maps Windows error code to Harbour one. Digits
are most probably lost here.

Shouldn't we change our error code types to ULONG?

Brgds,
Viktor


From guy.roussin at teledetection.fr  Sun Oct 12 05:12:14 2008
From: guy.roussin at teledetection.fr (guy.roussin@teledetection.fr)
Date: Sun Oct 12 05:12:38 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <48F0F99E.1090807@fsgiudice.com>
References: <48F0F99E.1090807@fsgiudice.com>
Message-ID: <48F1BF6E.3070306@teledetection.fr>

version of vista ?
Some version of vista can't use more than one processor.

Guy

Francesco Saverio Giudice a ?crit :
> Hi Przemek,
>
> I have a problem with BCC and MT.
>
> I have built some prg in tests folder:
> speedtst.prg, boxtst2.prg and memtst.prg (but I suspect that I will 
> got same error for any)
> using
> set HB_MT=MT
> bld_b32 speedtst
>
> speedtst at the end write some non standard char to the screen, but 
> all lock console until I kill the process using task manager.
>
> My current build options are:
>
> set C_USR=-DHB_FM_STATISTICS_OFF -DHB_FM_STD_ALLOC
> set HB_BUILD_ST=
>
> in ST mode all works as expected.
>
> I have got this error with last changes in core after testing 
> speedtst.prg in last days but I don't remember when exactly.
>
> May I do some other test to help you ?
>
> PS: Viktor please move :END at :CLEANUP label position (or change all 
> END calls to CLEANUP) in bin\bld.bat otherwise it is not used. If you 
> want I can do it.
>
> Best regards
>
> Francesco
> _______________________________________________

From druzus at acn.waw.pl  Sun Oct 12 06:48:57 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct 12 06:49:17 2008
Subject: [Harbour] Error code type
In-Reply-To: <58295650-DD28-40FA-820C-AD7A81E2848E@syenar.hu>
References: <58295650-DD28-40FA-820C-AD7A81E2848E@syenar.hu>
Message-ID: <20081012104857.GA7103@34-mo7-2.acn.waw.pl>

On Sun, 12 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> OS error codes are currently stored as USHORT.
> Windows uses DWORD, there is a function which
> maps Windows error code to Harbour one.

To be precise: to DOS error. Anyhow such translation
cannot be well done in other systems. Windows uses
DOS error codes so here in practice there is no translation
(only ERROR_ALREADY_EXISTS is translated)
but in some *nixes it's necessary and we have a problem
because ure error code is not enough to make valid translation.
It's necessary to introduce additional information with action
which will be used in translation. This is the second parameter
(uiOperation) in hb_fsSetIOError(). But I have never time to
implement it.

> Digits are most probably lost here.

Windows uses DOS error codes counted from 0 and significant
are only 2 low bytes. AFAIR upper bytes are usd in some subsystems
as bitfields.

> Shouldn't we change our error code types to ULONG?

For FS errors it should not make any difference.
Much more important is implementing uiOperation.

best regards,
Przemek
From mbelgrano at deltain.it  Sun Oct 12 07:12:47 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Oct 12 07:13:26 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <48F1BF6E.3070306@teledetection.fr>
References: <48F0F99E.1090807@fsgiudice.com>
	<48F1BF6E.3070306@teledetection.fr>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F062@SRV02.deltain.net>

I am using vista Ultimate centrino 2 duo t7200
If from explorer it remain unfinished with last active screen 
program start from cmd remain confused but mainly last active screen
-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of guy.roussin@teledetection.fr
Sent: Sunday, October 12, 2008 11:12 AM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Console problem with MT

version of vista ?
Some version of vista can't use more than one processor.

Guy

Francesco Saverio Giudice a ?crit :
> Hi Przemek,
>
> I have a problem with BCC and MT.
>
> I have built some prg in tests folder:
> speedtst.prg, boxtst2.prg and memtst.prg (but I suspect that I will 
> got same error for any)
> using
> set HB_MT=MT
> bld_b32 speedtst
>
> speedtst at the end write some non standard char to the screen, but 
> all lock console until I kill the process using task manager.
>
> My current build options are:
>
> set C_USR=-DHB_FM_STATISTICS_OFF -DHB_FM_STD_ALLOC
> set HB_BUILD_ST=
>
> in ST mode all works as expected.
>
> I have got this error with last changes in core after testing 
> speedtst.prg in last days but I don't remember when exactly.
>
> May I do some other test to help you ?
>
> PS: Viktor please move :END at :CLEANUP label position (or change all 
> END calls to CLEANUP) in bin\bld.bat otherwise it is not used. If you 
> want I can do it.
>
> Best regards
>
> Francesco
> _______________________________________________

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Sun Oct 12 07:14:55 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Oct 12 07:15:28 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <20081012020116.GB16049@34-mo7-2.acn.waw.pl>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com><20081011213831.GA5481@34-mo7-2.acn.waw.pl><AFB948164110ED43B5EB849E8DEEF03815F060@SRV02.deltain.net>
	<20081012020116.GB16049@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F063@SRV02.deltain.net>

Very Thanks for your effort

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Sunday, October 12, 2008 4:01 AM
To: Harbour Project Main Developer List.
Subject: Re: RE: [Harbour] A standard for the Harbour's SQL libs

On Sun, 12 Oct 2008, Massimo Belgrano wrote:

Hi Massimo,

> When you planed release Multi Windows interface for thread with own console window?

When I'll finish the base of MT mode and find a free day for it.
Now I have to find the reason of problem with Vista MT builds.
Then I will have to resolve at least 2 positions from my MT
TODO builds:

   5. There is possible race condition when class function is
      called 1-st time to create new object. It's possible that
      two threads will try to register the same class. It has to
      be fixed.

   6, HB_LIBLOAD()/__HRBLOAD() may not be MT safe in some cases.
      Before they will not be resolved please try to not use this
      functions when other threads are executed.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Sun Oct 12 07:19:34 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct 12 07:19:53 2008
Subject: [Harbour] 2008-10-12 13:19 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081012111933.GA14567@34-mo7-2.acn.waw.pl>

2008-10-12 13:19 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbthread.h
    * casting cleanup

  * harbour/include/hbapigt.h
  * harbour/source/rtl/gtapi.c
  * harbour/source/rtl/scroll.c
  * harbour/source/rtl/console.c
  * harbour/source/rtl/box.c
    * changed hb_gtDrawBox() and hb_gtPutText() to operate on color
      number (index in some GTs) instead of color string
    * use int as color number (index) in hb_gtScrollEx() hb_gtBoxEx()

  * harbour/source/rtl/box.c
    % changed DISPBOX() with color and frame string to work as one
      GT atomic operation

  * harbour/source/vm/classes.c
    ! fixed profiler usage

best regards
Przemek
From mbelgrano at deltain.it  Sun Oct 12 07:20:54 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Oct 12 07:21:30 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <9257026e0810120003q7a597fc0l6caa9c54cdac449f@mail.gmail.com>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com><20081011213831.GA5481@34-mo7-2.acn.waw.pl>
	<9257026e0810120003q7a597fc0l6caa9c54cdac449f@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F064@SRV02.deltain.net>

clip-itk is Clipper/XBase compatible compiler with initial support other
xBase dialects. Multitasking, OOP,SIX/Comix, SQL and ODBC drivers,a
C-API for third-party developers, a few wrappers for popular libraries
(such as BZIP, GZIP, GD, Crypto, and Fcgi), ....
http://sourceforge.net/project/showfiles.php?group_id=170673


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Lorenzo
Fiorini
Sent: Sunday, October 12, 2008 9:03 AM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] A standard for the Harbour's SQL libs

On Sat, Oct 11, 2008 at 11:38 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>
wrote:

> Before you will started the work then I suggest you to look at
> CLIP project - you will find in SF.
> Few years ago Rust implemented such common class interface for
> different RDBMS in CLIP so it may give you some ideas about
> similar implementation in Clipper compatible language. Maybe
> it will be good to use compatible .prg interface if you will
> find it interesting. I do not know how many people use Harbour
> and CLIP for their programs but easy portability between this
> two projects may be usefull in some cases.
> Please only remember that CLIP is covered by pure GPL so we cannot
> take any source code from them and keep Harbour exception.

Thanks for the hint.

best regards,
Lorenzo
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Sun Oct 12 07:29:39 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 12 07:29:53 2008
Subject: [Harbour] 2008-10-12 13:19 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081012111933.GA14567@34-mo7-2.acn.waw.pl>
References: <20081012111933.GA14567@34-mo7-2.acn.waw.pl>
Message-ID: <C9D5548F-4ECF-40F8-9235-B8047AD96E89@syenar.hu>

On 2008.10.12., at 13:19, Przemyslaw Czerpak wrote:

> 2008-10-12 13:19 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbthread.h
>    * casting cleanup
>
>  * harbour/include/hbapigt.h
>  * harbour/source/rtl/gtapi.c
>  * harbour/source/rtl/scroll.c
>  * harbour/source/rtl/console.c
>  * harbour/source/rtl/box.c
>    * changed hb_gtDrawBox() and hb_gtPutText() to operate on color
>      number (index in some GTs) instead of color string
>    * use int as color number (index) in hb_gtScrollEx() hb_gtBoxEx()

Thanks a lot.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Oct 12 07:32:29 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 12 07:32:29 2008
Subject: [Harbour] 2008-10-11 13:27 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92c5e$Blat.v2.6.2$35b8c7e0$1d0c1cfd3372@127.0.0.1>

2008-10-11 13:27 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_vc.mak
  * contrib/mtpl_vc.mak
    + Added /nologo to lib commands.

  * source/rtl/fserror.c
    * Minor formatting.

  * ChangeLog
    + Marked change as TOMERGE 1.0.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Oct 12 07:41:15 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 12 07:41:15 2008
Subject: [Harbour] 2008-10-11 13:40 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92c5f$Blat.v2.6.2$6f3e02e0$1818b81337c0@127.0.0.1>

2008-10-11 13:40 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/bld.bat
    + Suppress logo for bcc32 and msvc.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Sun Oct 12 08:06:36 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct 12 08:06:56 2008
Subject: [Harbour] 2008-10-11 21:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <8FEB3CED-EE2A-4D24-A7C3-D694D2961707@syenar.hu>
References: <01c92bdb$Blat.v2.6.2$0f7a509a$12d8c41803dc@127.0.0.1>
	<48F10A69.8050408@fsgiudice.com>
	<8FEB3CED-EE2A-4D24-A7C3-D694D2961707@syenar.hu>
Message-ID: <20081012120636.GB7103@34-mo7-2.acn.waw.pl>

On Sat, 11 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> BTW, for this problem, IMO a Harbour switch would
> be the best candidate (build-tool independent and
> natural), combined with the #pragma lib requesting feature.
> harbour -mt hello.prg -> would generate .c file which
> would force hbvmmt lib linkage, otherwise everything
> would stays as it is now.
> What do you guys think? Przemek, do you think it's doable?

#pragma lib works only with few C compilers and not on all platforms
so it will not be portable solution. Also it does not exclude using
other libs. It means that if you will have two hbvm libraries in
the linker command then functions will be chosen from both and final
application will crash. It can make more problems then help.
Probably the only one but simple solution we can make is adding
function which will be only in hbvmmt and use REQUEST mechanism.
At least MT programs will not be linked.
-mt is linker parameter not compiler and linker needs information
that hbvmmt should be used instead of hbvm and here excluding hbvm
may be problem.
The easiest way is creating C compiler and linker wrappers for it
which will work like hb* scripts. Few weeks ago I created simple
.prg code which have hb *script functionality for GCC based builds
(GCC, DJGPP, MINGW, ...) and it even works for me though I haven't
tested it extensively. Then I hacked it to work with BCC and this
also seems to work though the code begins to be odd. If someone
is interesting in farther developing of this tools then I can try
to clean this code a little bit and send to SVN repository.
It seems to be natural that this code should be converted to OOP
with some base classes (for C compilers and platforms) and then
each new C compiler can inherit from them. It should make the code
much more cleaner and easy to maintain then now.

best regards,
Przemek
From harbour.01 at syenar.hu  Sun Oct 12 08:23:38 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 12 08:23:52 2008
Subject: [Harbour] 2008-10-11 21:49 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20081012120636.GB7103@34-mo7-2.acn.waw.pl>
References: <01c92bdb$Blat.v2.6.2$0f7a509a$12d8c41803dc@127.0.0.1>
	<48F10A69.8050408@fsgiudice.com>
	<8FEB3CED-EE2A-4D24-A7C3-D694D2961707@syenar.hu>
	<20081012120636.GB7103@34-mo7-2.acn.waw.pl>
Message-ID: <E8AF9A8E-EDDF-487C-B685-4FB455EF1221@syenar.hu>

HI Przemek,

>> BTW, for this problem, IMO a Harbour switch would
>> be the best candidate (build-tool independent and
>> natural), combined with the #pragma lib requesting feature.
>> harbour -mt hello.prg -> would generate .c file which
>> would force hbvmmt lib linkage, otherwise everything
>> would stays as it is now.
>> What do you guys think? Przemek, do you think it's doable?
>
> #pragma lib works only with few C compilers and not on all platforms
> so it will not be portable solution. Also it does not exclude using
> other libs. It means that if you will have two hbvm libraries in
> the linker command then functions will be chosen from both and final
> application will crash. It can make more problems then help.

Okay, let's forget this one.

> Probably the only one but simple solution we can make is adding
> function which will be only in hbvmmt and use REQUEST mechanism.
> At least MT programs will not be linked.

Sounds much better indeed.

> -mt is linker parameter not compiler and linker needs information
> that hbvmmt should be used instead of hbvm and here excluding hbvm
> may be problem.
> The easiest way is creating C compiler and linker wrappers for it
> which will work like hb* scripts. Few weeks ago I created simple
> .prg code which have hb *script functionality for GCC based builds
> (GCC, DJGPP, MINGW, ...) and it even works for me though I haven't
> tested it extensively. Then I hacked it to work with BCC and this
> also seems to work though the code begins to be odd. If someone
> is interesting in farther developing of this tools then I can try
> to clean this code a little bit and send to SVN repository.
> It seems to be natural that this code should be converted to OOP
> with some base classes (for C compilers and platforms) and then
> each new C compiler can inherit from them. It should make the code
> much more cleaner and easy to maintain then now.

Sounds even better, I think you should upload it, and
we'll finish remaining parts, it would be good to have
a common platform and build-type independent tool instead
of hbmk scripts, bld.bat and hbmake.

I'd propose naming it simply 'hb'.

BTW, and I don't want to steal your own time, but if
you find some room for it, it'd be great if you could
check whether adding multifile .c compilation support
for -go? option. If it's not that much work. It could
probably make some of our make files cleaner, and it
might also fix the MSVC dependency checking problem for
.prg files at the same time.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Oct 12 08:52:04 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 12 08:52:15 2008
Subject: [Harbour] non-GNU build verbose mode
Message-ID: <252113B8-3D76-4B5B-AE87-F1C1BD2F6355@syenar.hu>

Hi all,

Since we have so many build-time options, and seeing them
is essential when trying to find problems, I'd like to make
HB_BUILD_VERBOSE the default option in non-GNU build scripts.
Maybe it would be also good to simply remove this option,
as IMO it can't make any harm when enabled.

Any comments or objection?

Brgds,
Viktor

From druzus at acn.waw.pl  Sun Oct 12 09:06:37 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct 12 09:06:57 2008
Subject: [Harbour] HB_DYNLIB and PCODE DLLs
Message-ID: <20081012130637.GA29488@34-mo7-2.acn.waw.pl>

Hi Viktor,

you changed __EXPORT__ macro to HB_DYNLIB.
I know that it was name space problem but new name is not the best
choice. This macro was used to make functions public (exported)
for any other modules. I do not have to build harbour*dll to use it.
F.e. I want to use static Harbour libraries compiled with with this
macro because I want to make all public functions inside exported
so they can be accessed by any other shared libraries loaded by
my or 3-rd party code.
Can we chose it to sth what will have EXPORT in the name?
Or maybe better we should make symbol exporting by default so
it will be possible to use PCODE DLLs with standard static builds
and add HB_NO_EXPORT macro?

I'd like to add to Windows builds small library with the code
below. It allows to make DLL from compiled PCODE modules and then
load it to HVM by HB_LIBLOAD().

Looks that now people have lot of problems with creating valid PCODE
DLLs and produce final binaries with more or less critical errors.

best regards,
Przemek



#include <windows.h>
#include "hbtypes.h"

#define HB_DLL_NAME  "harbour.dll"
#if defined( __BORLANDC__ )
#define HB_DLL_NAME2 "harbour-b32.dll"
#elif defined( _MSC_VER )
#define HB_DLL_NAME2 "harbour-vc.dll"
#endif

HB_EXTERN_BEGIN

static FARPROC s_hb_getProcAddress( LPCSTR szProcName )
{
   static HMODULE s_hModule = NULL;
   FARPROC pProcAddr = NULL;

   if( s_hModule == NULL )
   {
      s_hModule = GetModuleHandle( NULL );
      if( s_hModule == NULL )
         s_hModule = GetModuleHandle( HB_DLL_NAME );
#ifdef HB_DLL_NAME2
      if( s_hModule == NULL )
         s_hModule = GetModuleHandle( HB_DLL_NAME2 );
#endif
   }
   if( s_hModule )
   {
      pProcAddr = GetProcAddress( s_hModule, szProcName );
      if( pProcAddr == NULL && szProcName[ 0 ] == '_' )
         pProcAddr = GetProcAddress( s_hModule, szProcName + 1 );
   }

   return pProcAddr;
}

static void s_errorMessage( void )
{
   /* TODO: display error message, hb_errInternal() is not accessible here */
}

static void s_vmExecuteError( const BYTE * pCode, PHB_SYMB pSymbols )
{
   HB_SYMBOL_UNUSED( pCode );
   HB_SYMBOL_UNUSED( pSymbols );

   s_errorMessage();
}

static VM_DLL_EXECUTE s_vmExecute = &s_vmExecuteError;

/* module symbols initialization with extended information */
PHB_SYMB hb_vmProcessSymbolsEx( PHB_SYMB pSymbols, USHORT uiSymbols,
                                const char * szModuleName,
                                ULONG ulID, USHORT uiPcodeVer )
{
   static VM_PROCESS_SYMBOLS_EX s_vmProcessSymbols = NULL;

   if( !s_vmProcessSymbols )
      s_vmProcessSymbols = ( VM_PROCESS_SYMBOLS_EX )
                           s_hb_getProcAddress( "_hb_vmProcessDynLibSymbols" );

   if( s_vmExecute == &s_vmExecuteError )
   {
      VM_DLL_EXECUTE pVmExecute = ( VM_DLL_EXECUTE )
                                  s_hb_getProcAddress( "_hb_vmExecute" );
      if( pVmExecute )
         s_vmExecute = pVmExecute;
   }

   if( s_vmProcessSymbols && s_vmExecute != &s_vmExecuteError )
      return ( s_vmProcessSymbols )
                  ( pSymbols, uiSymbols, szModuleName, ulID, uiPcodeVer );

   s_errorMessage();
   return pSymbols;
}

/* execute PCODE function */
void hb_vmExecute( const BYTE * pCode, PHB_SYMB pSymbols )
{
   ( s_vmExecute )( pCode, pSymbols );
}

HB_EXTERN_END
From harbour.01 at syenar.hu  Sun Oct 12 09:25:22 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 12 09:25:33 2008
Subject: [Harbour] HB_DYNLIB and PCODE DLLs
In-Reply-To: <20081012130637.GA29488@34-mo7-2.acn.waw.pl>
References: <20081012130637.GA29488@34-mo7-2.acn.waw.pl>
Message-ID: <D862E964-1ACD-483D-B885-450638D195B2@syenar.hu>

Hi Przemek,

> you changed __EXPORT__ macro to HB_DYNLIB.
> I know that it was name space problem but new name is not the best
> choice. This macro was used to make functions public (exported)
> for any other modules. I do not have to build harbour*dll to use it.
> F.e. I want to use static Harbour libraries compiled with with this
> macro because I want to make all public functions inside exported
> so they can be accessed by any other shared libraries loaded by
> my or 3-rd party code.
> Can we chose it to sth what will have EXPORT in the name?
> Or maybe better we should make symbol exporting by default so
> it will be possible to use PCODE DLLs with standard static builds
> and add HB_NO_EXPORT macro?

HB_EXPORT is also a perfect name. As for making it the
default, it would actually be great, as - but I may be
wrong - it would make the separate compile process for
.dll creation unnecessary in non-GNU builds. I may
also enable .dll creation for BCC/MSVC in GNU-builds.

Question, what disadvantage would it have, why wasn't it
turned on so far?

> I'd like to add to Windows builds small library with the code
> below. It allows to make DLL from compiled PCODE modules and then
> load it to HVM by HB_LIBLOAD().
>
> Looks that now people have lot of problems with creating valid PCODE
> DLLs and produce final binaries with more or less critical errors.

Okay. Pls note that we now have the version number
in the .dll names. The whole .dll generation is still
a mess, so it's pretty hard to build on it, but other
than this I see no problem with your change at all.

Brgds,
Viktor

From philb at philb.us  Sun Oct 12 10:07:57 2008
From: philb at philb.us (Phil Barnett)
Date: Sun Oct 12 10:08:08 2008
Subject: [Harbour] Error code type
In-Reply-To: <20081012104857.GA7103@34-mo7-2.acn.waw.pl>
References: <58295650-DD28-40FA-820C-AD7A81E2848E@syenar.hu>
	<20081012104857.GA7103@34-mo7-2.acn.waw.pl>
Message-ID: <200810121007.57727.philb@philb.us>

On Sunday 12 October 2008 06:48:57 am Przemyslaw Czerpak wrote:

> Windows uses DOS error codes counted from 0 and significant
> are only 2 low bytes. AFAIR upper bytes are usd in some subsystems
> as bitfields.

Yes on significant 2 low bytes.

Not true on starting at 0. You can return negative error codes from DOS 
programs to Windows. We do it every day at work. Vendor supplied code returns 
errors -1, -2 and -3 for different errors.

If you think about 
void main()
where you can't return an error code compared to 
int main()
where you can return an error code you would know that -100 is a valid error 
code.

I can't recall a top level module starting with

uint main()

And I've never seen an error greater than 128

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From druzus at acn.waw.pl  Sun Oct 12 10:21:59 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct 12 10:22:20 2008
Subject: [Harbour] HB_DYNLIB and PCODE DLLs
In-Reply-To: <D862E964-1ACD-483D-B885-450638D195B2@syenar.hu>
References: <20081012130637.GA29488@34-mo7-2.acn.waw.pl>
	<D862E964-1ACD-483D-B885-450638D195B2@syenar.hu>
Message-ID: <20081012142158.GA6657@34-mo7-2.acn.waw.pl>

On Sun, 12 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> HB_EXPORT is also a perfect name. As for making it the

We already use HB_EXPORT for exported function attributes
though it's wtill possible to use the same name.
In hbdefs.h we will have to make sth like:
   #ifdef HB_EXPORT
      #undef HB_EXPORT
      [define new HB_EXPORT]
   #endif

> default, it would actually be great, as - but I may be
> wrong - it would make the separate compile process for
> .dll creation unnecessary in non-GNU builds. I may
> also enable .dll creation for BCC/MSVC in GNU-builds.

Yes, it will not be necessary to make separate compilation for
shared library on some platforms if shared library does not need
relocatable code.

> Question, what disadvantage would it have, why wasn't it
> turned on so far?

There are two differences:
1. a little bit bigger binaries because the size of exported
   symbol table will be bigger.
2. It will be possible to access exported symbols from other DLLs
   (this is what we need to load PCODE DLLs though to be precise
   it's not strictly necessary and we can add workaround for it,
   in some cases it may be even interesting so probably I'll
   implement such functionality)

> Okay. Pls note that we now have the version number
> in the .dll names. The whole .dll generation is still
> a mess, so it's pretty hard to build on it, but other
> than this I see no problem with your change at all.

The harbour*.dll is not used with static binaries at all and
as you can see in the code I send there is workaround for MSVC and
BCC names though I do not know if the extensions were not recently
changed.

best regards,
Przemek
From harbour.01 at syenar.hu  Sun Oct 12 10:34:10 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 12 10:34:23 2008
Subject: [Harbour] HB_DYNLIB and PCODE DLLs
In-Reply-To: <20081012142158.GA6657@34-mo7-2.acn.waw.pl>
References: <20081012130637.GA29488@34-mo7-2.acn.waw.pl>
	<D862E964-1ACD-483D-B885-450638D195B2@syenar.hu>
	<20081012142158.GA6657@34-mo7-2.acn.waw.pl>
Message-ID: <04EA4C54-6E03-4D93-915F-CD2FBCADDA63@syenar.hu>

>
Hi Przemek,

> Hi Viktor,
>
>> HB_EXPORT is also a perfect name. As for making it the
>
> We already use HB_EXPORT for exported function attributes
> though it's wtill possible to use the same name.
> In hbdefs.h we will have to make sth like:
>   #ifdef HB_EXPORT
>      #undef HB_EXPORT
>      [define new HB_EXPORT]
>   #endif

Ops, that's probably the reason I didn't choose it
back then. Well, anyway, it'd be better to use
something different for clarity, pls find a good
name beginning with HB_ and containing EXPORT, I'm
not really familiar with the exact context to give
a proper name here.

>> default, it would actually be great, as - but I may be
>> wrong - it would make the separate compile process for
>> .dll creation unnecessary in non-GNU builds. I may
>> also enable .dll creation for BCC/MSVC in GNU-builds.
>
> Yes, it will not be necessary to make separate compilation for
> shared library on some platforms if shared library does not need
> relocatable code.

Great!

>> Question, what disadvantage would it have, why wasn't it
>> turned on so far?
>
> There are two differences:
> 1. a little bit bigger binaries because the size of exported
>   symbol table will be bigger.

This is IMO not a problem at all.

> 2. It will be possible to access exported symbols from other DLLs
>   (this is what we need to load PCODE DLLs though to be precise
>   it's not strictly necessary and we can add workaround for it,
>   in some cases it may be even interesting so probably I'll
>   implement such functionality)

Can't really see the consequences, but it doesn't
look like a fatal problem to me.

>> Okay. Pls note that we now have the version number
>> in the .dll names. The whole .dll generation is still
>> a mess, so it's pretty hard to build on it, but other
>> than this I see no problem with your change at all.
>
> The harbour*.dll is not used with static binaries at all and
> as you can see in the code I send there is workaround for MSVC and
> BCC names though I do not know if the extensions were not recently
> changed.

Sorry, but I cannot really oversee the whole .dll matter,
it's pbly a personal thing that I find them very rarely
useful, but problems with them are plenty, therefore so far
I've been trying to avoid them as much as possible.

IOW, feel free to do as you think best :)

Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Sun Oct 12 10:51:11 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sun Oct 12 10:51:24 2008
Subject: [Harbour] Error code type
References: <58295650-DD28-40FA-820C-AD7A81E2848E@syenar.hu><20081012104857.GA7103@34-mo7-2.acn.waw.pl>
	<200810121007.57727.philb@philb.us>
Message-ID: <76FC6F81EAF44C2394346E8AC7EAD757@emag>


-----Messaggio Originale----- 
Da: "Phil Barnett" <philb@philb.us>
A: <harbour@harbour-project.org>
Data invio: domenica 12 ottobre 2008 16.07
Oggetto: Re: [Harbour] Error code type


> If you think about
> void main()
> where you can't return an error code compared to
> int main()
> where you can return an error code you would know that -100 is a valid 
> error
> code.
>
> I can't recall a top level module starting with
>
> uint main()
>
> And I've never seen an error greater than 128

If you are referring to C language main(), only int main() is a valid 
declaration/definition for main() function.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Sun Oct 12 11:00:44 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 12 11:00:45 2008
Subject: [Harbour] 2008-10-11 16:59 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92c7b$Blat.v2.6.2$4d442b44$de89ef66a8a@127.0.0.1>

2008-10-11 16:59 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * make_vc.mak
  * make_gcc.mak
    ! Minor formatting.

  * include/hbapierr.h
    ! Fixed casting in macro HB_ERR_FUNCNAME, as it was 
      generating a new warning with MSVC in 64-bit mode.
      '( ( char * ) 1 )' -> '( ( const char * ) NULL + 1 )'
      ('const' keyword was not enough to silence it)

  * include/hbapierr.h
  * source/rtl/errorapi.c
    - Disabled (marked with HB_LEGACY_LEVEL) hb_errFuncName 
      symbol. No longer supported, pls use HB_ERR_FUNCNAME 
      instead.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Oct 12 11:09:30 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 12 11:09:43 2008
Subject: [Harbour] Error code type
In-Reply-To: <20081012104857.GA7103@34-mo7-2.acn.waw.pl>
References: <58295650-DD28-40FA-820C-AD7A81E2848E@syenar.hu>
	<20081012104857.GA7103@34-mo7-2.acn.waw.pl>
Message-ID: <E3A6C83E-542C-47EE-8002-6E2C928ECECB@syenar.hu>

Hi Przemek,

I'm referring to hb_WinToDosError(). Maybe it's
wrong, but it's accepting an ULONG, when called,
a value received from GetLastError() is passed
to it (casted to USHORT, which instantly causes
loss of significant digits), and hb_WinToDosError()
then returns an int, which is later stored in an
USHORT. MSDN documentation of GetLastError() says
that it returns a 32-bit value, of which the highest
bit is reserved for app errors, the rest may be
used by the OS. There is no mention of using only
the lower two bytes, so even it doesn't return any
such values in practice, our current usage seems
to make unsafe assumptions on the value.

Similar problems exist for DOS, non-WIN32_IO
code paths.

[ See line 239-240 in source/rtl/fserror.c for
the Win part. ]

I've run into a problem, where hb_fsError() (and
its two friends) are returning no error after
a failed hb_fsRename() operation, but that may
be unrelated.

Brgds,
Viktor

On 2008.10.12., at 12:48, Przemyslaw Czerpak wrote:

> On Sun, 12 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> OS error codes are currently stored as USHORT.
>> Windows uses DWORD, there is a function which
>> maps Windows error code to Harbour one.
>
> To be precise: to DOS error. Anyhow such translation
> cannot be well done in other systems. Windows uses
> DOS error codes so here in practice there is no translation
> (only ERROR_ALREADY_EXISTS is translated)
> but in some *nixes it's necessary and we have a problem
> because ure error code is not enough to make valid translation.
> It's necessary to introduce additional information with action
> which will be used in translation. This is the second parameter
> (uiOperation) in hb_fsSetIOError(). But I have never time to
> implement it.
>
>> Digits are most probably lost here.
>
> Windows uses DOS error codes counted from 0 and significant
> are only 2 low bytes. AFAIR upper bytes are usd in some subsystems
> as bitfields.
>
>> Shouldn't we change our error code types to ULONG?
>
> For FS errors it should not make any difference.
> Much more important is implementing uiOperation.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sun Oct 12 11:11:06 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 12 11:11:23 2008
Subject: [Harbour] Error code type
In-Reply-To: <E3A6C83E-542C-47EE-8002-6E2C928ECECB@syenar.hu>
References: <58295650-DD28-40FA-820C-AD7A81E2848E@syenar.hu>
	<20081012104857.GA7103@34-mo7-2.acn.waw.pl>
	<E3A6C83E-542C-47EE-8002-6E2C928ECECB@syenar.hu>
Message-ID: <B8B9B5E9-3091-4C31-941B-00B0392ABCE9@syenar.hu>

Correction: values with bit 29 set are reserved
for app error codes.

On 2008.10.12., at 17:09, Szak?ts Viktor wrote:

> Hi Przemek,
>
> I'm referring to hb_WinToDosError(). Maybe it's
> wrong, but it's accepting an ULONG, when called,
> a value received from GetLastError() is passed
> to it (casted to USHORT, which instantly causes
> loss of significant digits), and hb_WinToDosError()
> then returns an int, which is later stored in an
> USHORT. MSDN documentation of GetLastError() says
> that it returns a 32-bit value, of which the highest
> bit is reserved for app errors, the rest may be
> used by the OS. There is no mention of using only
> the lower two bytes, so even it doesn't return any
> such values in practice, our current usage seems
> to make unsafe assumptions on the value.
>
> Similar problems exist for DOS, non-WIN32_IO
> code paths.
>
> [ See line 239-240 in source/rtl/fserror.c for
> the Win part. ]
>
> I've run into a problem, where hb_fsError() (and
> its two friends) are returning no error after
> a failed hb_fsRename() operation, but that may
> be unrelated.
>
> Brgds,
> Viktor
>
> On 2008.10.12., at 12:48, Przemyslaw Czerpak wrote:
>
>> On Sun, 12 Oct 2008, Szak?ts Viktor wrote:
>>
>> Hi Viktor,
>>
>>> OS error codes are currently stored as USHORT.
>>> Windows uses DWORD, there is a function which
>>> maps Windows error code to Harbour one.
>>
>> To be precise: to DOS error. Anyhow such translation
>> cannot be well done in other systems. Windows uses
>> DOS error codes so here in practice there is no translation
>> (only ERROR_ALREADY_EXISTS is translated)
>> but in some *nixes it's necessary and we have a problem
>> because ure error code is not enough to make valid translation.
>> It's necessary to introduce additional information with action
>> which will be used in translation. This is the second parameter
>> (uiOperation) in hb_fsSetIOError(). But I have never time to
>> implement it.
>>
>>> Digits are most probably lost here.
>>
>> Windows uses DOS error codes counted from 0 and significant
>> are only 2 low bytes. AFAIR upper bytes are usd in some subsystems
>> as bitfields.
>>
>>> Shouldn't we change our error code types to ULONG?
>>
>> For FS errors it should not make any difference.
>> Much more important is implementing uiOperation.
>>
>> best regards,
>> Przemek
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>

From vailtom at gmail.com  Sun Oct 12 11:32:01 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Sun Oct 12 11:32:11 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <9257026e0810120036v24623963h35a56e22db85d71c@mail.gmail.com>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<20081011213831.GA5481@34-mo7-2.acn.waw.pl>
	<9257026e0810120003q7a597fc0l6caa9c54cdac449f@mail.gmail.com>
	<9257026e0810120036v24623963h35a56e22db85d71c@mail.gmail.com>
Message-ID: <531d7a750810120832n13bfda10l2ec0fbe927c39d3e@mail.gmail.com>

Hi all!
I would like to understand a single question: this would be something to
develop a OOP class or would be like an RDD native with support for SQL?
2008/10/12 Lorenzo Fiorini <lorenzo.fiorini@gmail.com>

> On Sun, Oct 12, 2008 at 9:03 AM, Lorenzo Fiorini
> <lorenzo.fiorini@gmail.com> wrote:
>
> It seems that HDBC has been decided. Ok step 1 done :)
>
> Resources for all the interested:
>
> JDBC tutorial
> http://java.sun.com/docs/books/tutorial/jdbc/basics/index.html
>
> CLIP SQL interface
> http://www.itk.ru/clip-doc.en/sql.html
>
> ADO.NET
> http://en.wikipedia.org/wiki/ADO.NET
>
> contrib/hb* source code
>
> source/rdd/usrrdd rdds and examples
>
> Suggestions and comments are welcomed.
>
> BTW does anyone have Mac OS X DBMS skills?
>
> I've installed macports Postgresql 8.2 and I'm trying to get hbpgsql
> working but I always get "_PQConnectdb undefined".
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Vailton Renato
SQL LIB, MyMake & xDev Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081012/a39f9d0a/attachment-0001.html
From info at fsgiudice.com  Sun Oct 12 12:33:44 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Oct 12 12:34:00 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <20081012015508.GA16049@34-mo7-2.acn.waw.pl>
References: <48F0F99E.1090807@fsgiudice.com>	<20081011215301.GB5481@34-mo7-2.acn.waw.pl>	<48F12343.8010501@fsgiudice.com>
	<20081012015508.GA16049@34-mo7-2.acn.waw.pl>
Message-ID: <48F226E8.5090600@fsgiudice.com>

Hi Przemek,

Przemyslaw Czerpak ha scritto:
> On Sun, 12 Oct 2008, Francesco Saverio Giudice wrote:
> 
> Hi Francesco,
> 
>> I'm using last SVN
>> 2008-10-11 21:49 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>> thank you for your efforts.
>> Tell me if I can help in any way.
> 
> Let's try to reduce the problem.
> In tests/mt/ there is set of MT test programs.
> Can you replicate the problem with each of them?
> If not then which ones fails?
> How exactly does the screen output look?
> Which GT you are using?
> Can someone replicate it in non VISTA Windows or it's only local
> to this OS?
> For tests you can easy disable GT locking.
> It's enough to comment in rtl/hbgtcore.c line 119:
> 
>    pGT->pMutex = hb_threadMutexCreate( TRUE );
> 
> Mutex will not be allocated what efectively disable any GT locking.
> Does it help to resolve the problem?
> 
> I looked at the code and it seems to be OK.
> In Linux it works without any problems so it's hard to me guess
> were to look for possible problems when I do not know where exactly
> the problem is. It could be sth stupid like problems with synchronization
> mechanism final cleanup code strictly oriented to given OS.
> BTW Does the problem happen in each application linked with
> hbvmmt even if it does not create new threads?
> 

I have rebuilt with last SVN :
2008-10-11 16:59 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
and tested all files in tests\mt
and all show correctly on the screen, but when program ends console is 
locked.
Just to be clear, using as sample mttest01 this what I see:

J:\cvs\harbourSVN_trunk\tests\mt>mttest01

Harbour 1.1.0dev (Rev. 9615)
join: .T.
result: Hello World!!! Hello World!!! Hello World!!!
static var type: B
      12345.678
      12346.678

with cursor blinking at right of last 8 (exactly behavior with all others).
I have to kill mttest01.exe from task manager and console returns to prompt.
I have also commented out line 119 in rtl\hbgtcore.c as you suggested, 
but the result is the same.

Best regards

Francesco

From info at fsgiudice.com  Sun Oct 12 12:35:42 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Oct 12 12:35:52 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <48F1BF6E.3070306@teledetection.fr>
References: <48F0F99E.1090807@fsgiudice.com>
	<48F1BF6E.3070306@teledetection.fr>
Message-ID: <48F2275E.9020709@fsgiudice.com>

Hi Guy,


guy.roussin@teledetection.fr ha scritto:
> version of vista ?
> Some version of vista can't use more than one processor.
> 
> Guy
> 
I'm using
Microsoft Windows Vista Ultimate Edition, 32-bit Service Pack 1 (Build 6001)
Intel(R) Core(TM)2 Duo CPU T8300 @ 2.40GHz
4 GB

Best regards

Francesco
From info at fsgiudice.com  Sun Oct 12 13:09:00 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Oct 12 13:09:11 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <20081012015508.GA16049@34-mo7-2.acn.waw.pl>
References: <48F0F99E.1090807@fsgiudice.com>	<20081011215301.GB5481@34-mo7-2.acn.waw.pl>	<48F12343.8010501@fsgiudice.com>
	<20081012015508.GA16049@34-mo7-2.acn.waw.pl>
Message-ID: <48F22F2C.30509@fsgiudice.com>

Hi Przemek,

I know that after this you have changed a lot of code, but I tell in 
case it can help: I have another copy of SVN updated at:
2008-10-03 21:53 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
at it works correctly.

Hope it can help.

Best regards

Francesco

Il 12/10/2008 3.55, Przemyslaw Czerpak ha scritto:
> On Sun, 12 Oct 2008, Francesco Saverio Giudice wrote:
> 
> 
> Let's try to reduce the problem.

From druzus at acn.waw.pl  Sun Oct 12 13:22:45 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct 12 13:23:06 2008
Subject: [Harbour] Error code type
In-Reply-To: <E3A6C83E-542C-47EE-8002-6E2C928ECECB@syenar.hu>
References: <58295650-DD28-40FA-820C-AD7A81E2848E@syenar.hu>
	<20081012104857.GA7103@34-mo7-2.acn.waw.pl>
	<E3A6C83E-542C-47EE-8002-6E2C928ECECB@syenar.hu>
Message-ID: <20081012172245.GA18594@34-mo7-2.acn.waw.pl>

On Sun, 12 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I'm referring to hb_WinToDosError(). Maybe it's
> wrong, but it's accepting an ULONG, when called,
> a value received from GetLastError() is passed
> to it (casted to USHORT, which instantly causes
> loss of significant digits), and hb_WinToDosError()
> then returns an int, which is later stored in an
> USHORT. MSDN documentation of GetLastError() says
> that it returns a 32-bit value, of which the highest
> bit is reserved for app errors, the rest may be
> used by the OS. There is no mention of using only
> the lower two bytes, so even it doesn't return any
> such values in practice, our current usage seems
> to make unsafe assumptions on the value.
> Similar problems exist for DOS, non-WIN32_IO
> code paths.

It doesn't matter for us in case of valid errors.
We can translate only few known FS errors which
are defined as constant value. Rest is unimportant.
If you want you can change them to ULONG (or UINT)
but you if you will begin to dig into it deeply then
you will also have to change a lot of other documented
API functions error related. There is also many other
similar things we inherited from Clipper and if we
want to change them then I suggest to make all of them
once because they breaks binary compatibility.
I suggest to start documenting such things and now
only make some local modification in translation function
like:

   if( ulError > 0xffff && ( ulError & 0xffff ) == 0 )
      iResult = 0xffff;

> I've run into a problem, where hb_fsError() (and
> its two friends) are returning no error after
> a failed hb_fsRename() operation, but that may
> be unrelated.

Strange. It means that it was not documented FS error.
So far I noticed such situation only when some wrappers
set some bits in two upper bytes of error leaving the low
two bytes unchanged.
Anyhow I see problem in WinCE build which emulates some
ANSI functions. In case of error they should safe and
restore error code to not overload it by other functions
executed after the base one. It has to be fixed.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Oct 12 13:29:15 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct 12 13:29:34 2008
Subject: [Harbour] 2008-10-11 16:59 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c92c7b$Blat.v2.6.2$4d442b44$de89ef66a8a@127.0.0.1>
References: <01c92c7b$Blat.v2.6.2$4d442b44$de89ef66a8a@127.0.0.1>
Message-ID: <20081012172914.GB18594@34-mo7-2.acn.waw.pl>

On Sun, 12 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

>   * include/hbapierr.h
>     ! Fixed casting in macro HB_ERR_FUNCNAME, as it was 
>       generating a new warning with MSVC in 64-bit mode.
>       '( ( char * ) 1 )' -> '( ( const char * ) NULL + 1 )'
>       ('const' keyword was not enough to silence it)

It will cause compilation warning or error in Compiler which
maps NULL as ( ( void * ) 0 ).
This casting:
   ( ( const char * ) ( HB_PTRDIFF ) 1 )
should work without warning also in MSVC.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Oct 12 13:33:44 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct 12 13:34:04 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <48F226E8.5090600@fsgiudice.com>
References: <48F0F99E.1090807@fsgiudice.com>
	<20081011215301.GB5481@34-mo7-2.acn.waw.pl>
	<48F12343.8010501@fsgiudice.com>
	<20081012015508.GA16049@34-mo7-2.acn.waw.pl>
	<48F226E8.5090600@fsgiudice.com>
Message-ID: <20081012173344.GC18594@34-mo7-2.acn.waw.pl>

On Sun, 12 Oct 2008, Francesco Saverio Giudice wrote:

Hi Francesco,

>> BTW Does the problem happen in each application linked with
>> hbvmmt even if it does not create new threads?

> I have rebuilt with last SVN :
> 2008-10-11 16:59 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
> and tested all files in tests\mt
> and all show correctly on the screen, but when program ends console is 
> locked.
> Just to be clear, using as sample mttest01 this what I see:
> J:\cvs\harbourSVN_trunk\tests\mt>mttest01
> Harbour 1.1.0dev (Rev. 9615)
> join: .T.
> result: Hello World!!! Hello World!!! Hello World!!!
> static var type: B
>      12345.678
>      12346.678
> with cursor blinking at right of last 8 (exactly behavior with all others).
> I have to kill mttest01.exe from task manager and console returns to prompt.
> I have also commented out line 119 in rtl\hbgtcore.c as you suggested, but 
> the result is the same.

Thank you. So it's not related to GT locking.
Probably some cleanup code.
Can you also change this:

   BTW Does the problem happen in each application linked with
   hbvmmt even if it does not create new threads?

best regards,
Przemek
From druzus at acn.waw.pl  Sun Oct 12 13:38:36 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct 12 13:38:56 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <20081012173344.GC18594@34-mo7-2.acn.waw.pl>
References: <48F0F99E.1090807@fsgiudice.com>
	<20081011215301.GB5481@34-mo7-2.acn.waw.pl>
	<48F12343.8010501@fsgiudice.com>
	<20081012015508.GA16049@34-mo7-2.acn.waw.pl>
	<48F226E8.5090600@fsgiudice.com>
	<20081012173344.GC18594@34-mo7-2.acn.waw.pl>
Message-ID: <20081012173836.GD18594@34-mo7-2.acn.waw.pl>

On Sun, 12 Oct 2008, Przemyslaw Czerpak wrote:

Hi Francesco,

> Probably some cleanup code.

Can you try to comment in hvm.c line 1055 with:

   hb_threadExit();

and check if it helps.

best regards,
Przemek
From info at fsgiudice.com  Sun Oct 12 13:42:38 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Oct 12 13:42:50 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <20081012173344.GC18594@34-mo7-2.acn.waw.pl>
References: <48F0F99E.1090807@fsgiudice.com>	<20081011215301.GB5481@34-mo7-2.acn.waw.pl>	<48F12343.8010501@fsgiudice.com>	<20081012015508.GA16049@34-mo7-2.acn.waw.pl>	<48F226E8.5090600@fsgiudice.com>
	<20081012173344.GC18594@34-mo7-2.acn.waw.pl>
Message-ID: <48F2370E.9030905@fsgiudice.com>

Hi Przemek,

Il 12/10/2008 19.33, Przemyslaw Czerpak ha scritto:
> 
> Hi Francesco,
> 
>    BTW Does the problem happen in each application linked with
>    hbvmmt even if it does not create new threads?
> 
yes, tests I did yesterday from tests folder like memtst and boxtst2 
that are not MT oriented and they did the same lock on exit.

Best regards

Francesco
From lorenzo.fiorini at gmail.com  Sun Oct 12 13:46:22 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Oct 12 13:46:29 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <531d7a750810120832n13bfda10l2ec0fbe927c39d3e@mail.gmail.com>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<20081011213831.GA5481@34-mo7-2.acn.waw.pl>
	<9257026e0810120003q7a597fc0l6caa9c54cdac449f@mail.gmail.com>
	<9257026e0810120036v24623963h35a56e22db85d71c@mail.gmail.com>
	<531d7a750810120832n13bfda10l2ec0fbe927c39d3e@mail.gmail.com>
Message-ID: <9257026e0810121046rf6b4211sc2485f6e0d8711a6@mail.gmail.com>

On Sun, Oct 12, 2008 at 5:32 PM, Vailton Renato <vailtom@gmail.com> wrote:

> I would like to understand a single question: this would be something to
> develop a OOP class or would be like an RDD native with support for SQL?

It's hard to answer at the moment.

My first goal was to unify the class interface of hbmysql, hbpgsql,
hbodbc, hbfbird but then I've found that others have already created
more "complete" solutions.

At the moment I'm reading the doc that I've posted in the last message
and I'm trying to find "patterns".

I'm also waiting for suggestions from others.

best regards,
Lorenzo
From teo at windtelsoft.com  Sun Oct 12 12:30:22 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Sun Oct 12 13:49:02 2008
Subject: [Harbour] Profiling
In-Reply-To: <200810111111.50276.teo@windtelsoft.com>
References: <200810110300.37739.teo@windtelsoft.com>
	<200810111111.50276.teo@windtelsoft.com>
Message-ID: <200810121130.22541.teo@windtelsoft.com>

On Saturday 11 October 2008 11:11:50 Teo Fonrouge wrote:
> On Saturday 11 October 2008 03:00:37 am Teo Fonrouge wrote:
> > Hello,
> >
> > On Linux, I want to do some profiling in an proyect, so I have compiled
> > Harbour with "-DHB_USE_PROFILER" and created the binaries.
> >
> > Nevertheless, when I try to run the sample at /tests/testprof.prg it
> > simply aborts with a segfault.
> >
> > Is there something in which I must have take care of ?
>
> I have traced out the problem at sources/vm/classes.c at the following
> function:
>
> ----------------
> void hb_mthAddTime( ULONG ulClockTicks )
> {
>    PMETHOD pMethod = s_pClasses[ hb_objGetClassH( hb_stackSelfItem() ) ]->
>                      pMethods;
>    if( pMethod )
>    {
>       pMethod += hb_stackBaseItem()->item.asSymbol.stackstate->uiMethod;
>       pMethod->ulCalls++;
>       pMethod->ulTime += ulClockTicks;
>    }
> }
> ----------------
>
> Here seems that the pointer in pMethod is wrongly indexed with:
>
> += hb_stackBaseItem()->item.asSymbol.stackstate->uiMethod
>
> .
>
>
> Why is used 'hb_stackBaseItem()->item.asSymbol.stackstate->uiMethod' to
> obtain the PMETHOD that needs to be profiled ???
>
>
> Any help is badly appreciated.

Pzremek,

Many thanks for the fix & the lesson :)


best regards,

Teo
From harbour.01 at syenar.hu  Sun Oct 12 14:03:51 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 12 14:04:03 2008
Subject: [Harbour] 2008-10-11 16:59 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20081012172914.GB18594@34-mo7-2.acn.waw.pl>
References: <01c92c7b$Blat.v2.6.2$4d442b44$de89ef66a8a@127.0.0.1>
	<20081012172914.GB18594@34-mo7-2.acn.waw.pl>
Message-ID: <DDE888DA-A03B-4955-AB13-4BC5BAFE8B49@syenar.hu>

Thanks Przemek, I'll do this.

On 2008.10.12., at 19:29, Przemyslaw Czerpak wrote:

> On Sun, 12 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>>  * include/hbapierr.h
>>    ! Fixed casting in macro HB_ERR_FUNCNAME, as it was
>>      generating a new warning with MSVC in 64-bit mode.
>>      '( ( char * ) 1 )' -> '( ( const char * ) NULL + 1 )'
>>      ('const' keyword was not enough to silence it)
>
> It will cause compilation warning or error in Compiler which
> maps NULL as ( ( void * ) 0 ).
> This casting:
>   ( ( const char * ) ( HB_PTRDIFF ) 1 )
> should work without warning also in MSVC.
>
> best regards,
> Przemek

From info at fsgiudice.com  Sun Oct 12 14:08:42 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Oct 12 14:08:53 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <20081012173836.GD18594@34-mo7-2.acn.waw.pl>
References: <48F0F99E.1090807@fsgiudice.com>	<20081011215301.GB5481@34-mo7-2.acn.waw.pl>	<48F12343.8010501@fsgiudice.com>	<20081012015508.GA16049@34-mo7-2.acn.waw.pl>	<48F226E8.5090600@fsgiudice.com>	<20081012173344.GC18594@34-mo7-2.acn.waw.pl>
	<20081012173836.GD18594@34-mo7-2.acn.waw.pl>
Message-ID: <48F23D2A.9070609@fsgiudice.com>

Hi Przemek,

Il 12/10/2008 19.38, Przemyslaw Czerpak ha scritto:
> 
> Can you try to comment in hvm.c line 1055 with:
> 
>    hb_threadExit();
> 
> and check if it helps.
> 
Got it!
Commenting out above line now all samples works.

Thank you

Best Regards

Francesco

From info at fsgiudice.com  Sun Oct 12 14:12:40 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Oct 12 14:12:51 2008
Subject: [Harbour] Profiling
In-Reply-To: <200810111111.50276.teo@windtelsoft.com>
References: <200810110300.37739.teo@windtelsoft.com>
	<200810111111.50276.teo@windtelsoft.com>
Message-ID: <48F23E18.1090000@fsgiudice.com>

Hi Teo,

Il 11/10/2008 18.11, Teo Fonrouge ha scritto:
> 
> Any help is badly appreciated.
              ^^^^^^^^
Badly ?! ;-)
I hope not :-D
Sorry but I can't resist.

Best regards

Francesco


From druzus at acn.waw.pl  Sun Oct 12 14:14:27 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct 12 14:14:48 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <48F23D2A.9070609@fsgiudice.com>
References: <48F0F99E.1090807@fsgiudice.com>
	<20081011215301.GB5481@34-mo7-2.acn.waw.pl>
	<48F12343.8010501@fsgiudice.com>
	<20081012015508.GA16049@34-mo7-2.acn.waw.pl>
	<48F226E8.5090600@fsgiudice.com>
	<20081012173344.GC18594@34-mo7-2.acn.waw.pl>
	<20081012173836.GD18594@34-mo7-2.acn.waw.pl>
	<48F23D2A.9070609@fsgiudice.com>
Message-ID: <20081012181427.GA23955@34-mo7-2.acn.waw.pl>

On Sun, 12 Oct 2008, Francesco Saverio Giudice wrote:

Hi Francesco,

>> Can you try to comment in hvm.c line 1055 with:
>>    hb_threadExit();
>> and check if it helps.
> Got it!
> Commenting out above line now all samples works.

Fine and thank you.
As I thought cleanup code.
I'll commit modification which should resolve the problem.
Please check.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Oct 12 14:31:31 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct 12 14:31:53 2008
Subject: [Harbour] 2008-10-12 20:31 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081012183131.GA6893@34-mo7-2.acn.waw.pl>

2008-10-12 20:31 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/hvm.c
    ! execute hb_vmThreadQuit() after hb_vmStackRelease()

  * harbour/source/vm/thread.c
    * do not destroy critical sections on exit

best regards
Przemek
From teo at windtelsoft.com  Sun Oct 12 13:16:41 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Sun Oct 12 14:37:10 2008
Subject: [Harbour] Profiling
In-Reply-To: <48F23E18.1090000@fsgiudice.com>
References: <200810110300.37739.teo@windtelsoft.com>
	<200810111111.50276.teo@windtelsoft.com>
	<48F23E18.1090000@fsgiudice.com>
Message-ID: <200810121216.41842.teo@windtelsoft.com>

On Sunday 12 October 2008 13:12:40 Francesco Saverio Giudice wrote:
> Hi Teo,
>
> Il 11/10/2008 18.11, Teo Fonrouge ha scritto:
> > Any help is badly appreciated.
>
>               ^^^^^^^^
> Badly ?! ;-)
> I hope not :-D
> Sorry but I can't resist.

:)

Badly as a cold beer in a hot summer day 


best regards,

Teo
From harbour.01 at syenar.hu  Sun Oct 12 14:55:24 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 12 14:55:27 2008
Subject: [Harbour] 2008-10-11 20:54 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92c9c$Blat.v2.6.2$15c6f7f2$9fc66388c08@127.0.0.1>

2008-10-11 20:54 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbapierr.h
    ! Fixed previous casting fix.

  * source/rtl/console.c
  * source/rtl/philes.c
    % Optimized by using static buffers and hb_retc_const():
      HB_OSNEWLINE()
      HB_OSPATHSEPARATOR()
      HB_OSPATHLISTSEPARATOR()
      HB_OSPATHDELIMITERS()
      HB_OSDRIVESEPARATOR()
      HB_OSFILEMASK()

  * source/rtl/filesys.c
    ! hb_fsDisableWaitLocks() made static.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Sun Oct 12 15:23:35 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct 12 15:23:55 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <20081012181427.GA23955@34-mo7-2.acn.waw.pl>
References: <48F0F99E.1090807@fsgiudice.com>
	<20081011215301.GB5481@34-mo7-2.acn.waw.pl>
	<48F12343.8010501@fsgiudice.com>
	<20081012015508.GA16049@34-mo7-2.acn.waw.pl>
	<48F226E8.5090600@fsgiudice.com>
	<20081012173344.GC18594@34-mo7-2.acn.waw.pl>
	<20081012173836.GD18594@34-mo7-2.acn.waw.pl>
	<48F23D2A.9070609@fsgiudice.com>
	<20081012181427.GA23955@34-mo7-2.acn.waw.pl>
Message-ID: <20081012192335.GA12928@34-mo7-2.acn.waw.pl>

On Sun, 12 Oct 2008, Przemyslaw Czerpak wrote:

Hi Francesco,

> I'll commit modification which should resolve the problem.
> Please check.

Please check after:
   2008-10-12 20:31 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)

I hope it's OK now.

best regards,
Przemek
From info at fsgiudice.com  Sun Oct 12 16:07:27 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Oct 12 16:07:39 2008
Subject: [Harbour] Console problem with MT
In-Reply-To: <20081012192335.GA12928@34-mo7-2.acn.waw.pl>
References: <48F0F99E.1090807@fsgiudice.com>	<20081011215301.GB5481@34-mo7-2.acn.waw.pl>	<48F12343.8010501@fsgiudice.com>	<20081012015508.GA16049@34-mo7-2.acn.waw.pl>	<48F226E8.5090600@fsgiudice.com>	<20081012173344.GC18594@34-mo7-2.acn.waw.pl>	<20081012173836.GD18594@34-mo7-2.acn.waw.pl>	<48F23D2A.9070609@fsgiudice.com>	<20081012181427.GA23955@34-mo7-2.acn.waw.pl>
	<20081012192335.GA12928@34-mo7-2.acn.waw.pl>
Message-ID: <48F258FF.9030704@fsgiudice.com>

Hi Przemek,

Il 12/10/2008 21.23, Przemyslaw Czerpak ha scritto:
> Please check after:
>    2008-10-12 20:31 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> 
> I hope it's OK now.
> 
Confirmed that it's OK now.
Thank you

Best regards

Francesco
From info at fsgiudice.com  Sun Oct 12 16:09:34 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Oct 12 16:09:45 2008
Subject: [Harbour] Profiling
In-Reply-To: <200810121216.41842.teo@windtelsoft.com>
References: <200810110300.37739.teo@windtelsoft.com>	<200810111111.50276.teo@windtelsoft.com>	<48F23E18.1090000@fsgiudice.com>
	<200810121216.41842.teo@windtelsoft.com>
Message-ID: <48F2597E.6020505@fsgiudice.com>

Hi Teo

Il 12/10/2008 19.16, Teo Fonrouge ha scritto:
> :)
> 
> Badly as a cold beer in a hot summer day 
> 
> 
Ahhh, I love these bad things ;-)

Best regards

Francesco

From harbour.01 at syenar.hu  Sun Oct 12 18:33:43 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 12 18:33:53 2008
Subject: [Harbour] 2008-10-11 03:24
	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F061@SRV02.deltain.net>
References: <20081011012438.GA5189@34-mo7-2.acn.waw.pl><E972CA2E-34AA-4C7E-841F-FF9FE87DEF84@syenar.hu><20081011094014.GA32396@34-mo7-2.acn.waw.pl><6D9937EC-DC96-41BA-BBD1-80BFBD36F312@syenar.hu><20081011104559.GB25724@34-mo7-2.acn.waw.pl><17F5BA14-99E9-478B-8D02-6729F1F1C2D9@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815F058@SRV02.deltain.net><9850F24A-28D1-4AB1-B4C1-3CC341919B98@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815F05C@SRV02.deltain.net>
	<03BE8F0A-490C-4F9D-AB61-1BA3536B8A1B@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F061@SRV02.deltain.net>
Message-ID: <B132C226-A820-42CA-A36D-E1890776CD99@syenar.hu>

>
Hi Massimo,

> I don't have found your post regarding multi windows
> Plase can you resend?

We have this list archived now in plenty of places,
I'd suggest to dig up those, it's most probably in a
"multi-window" thread, and you've been also participating
AFAIR.

> Are all true windows or only logical windows like CT?

Logical, this modules uses standard Harbour APIs only,
so the feature boundaries are the same.

> You want share this code?

Well, it's very (13 years) old and ugly code, far from
optimal [ I'm not fluent in C ], especially after porting
to Harbour GT worlds three times. If Przemek agrees, I can
send him the code, just to give some ideas, but I wouldn't
think any of its lines could directly be adaptable.

> I am happy to made same test about this idea, also because I need  
> something of similar

Thanks, I'd rather suggest to wait for Przemek's
implementation. Since one of my not-so-secret goals
it to get rid of this locally maintained GT layer,
I'll do my best to add any interesting missing bits
to Harbour, if needed, and I'd naturally help in all
the ways I can.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Oct 12 19:00:13 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 12 19:00:24 2008
Subject: [Harbour] Local porting news
Message-ID: <71C09D51-5D6C-40E4-8FE9-5C74B6FE4E04@syenar.hu>

Hi all,

I'm happy to report that I've successfully ported
my app to MinGW, MSVS 2008, BCC582 and MSVS 2008
64-bit, and it's happily running in all these
configurations, with just a few build problems to
sort out (namely libcurl Win64 binaries not available
for download, and some libharu static linkage problems
with MinGW.).

This was quite a feat, as it also meant that all
Clipper/DOS/stdalone BCC16/MSC stuff was thrown
out to the garbage can, along with rmake dependency,
remaining DOS/Win specific file handling stuff,
and lots of locally implemented features were replaced
by Harbour core functions and hbmzip. All compatibility
API layers were also swapped to native Harbour APIs.
IOW, the app is now a native Harbour application.

[ One issue is that the app still GPFs on startup
when linked with hbvmmt.lib. This is the stack
trace according to MSVS2008 debugger: _WinMain()
-> hb_vmInit() -> hb_vmProcessDllSymbols() ->
hb_vmDo() -> hb_vmTSVarClean() -> hb_vmTSVarClean() ->
hb_itemMove(). ]

Next steps are codepage conversion to Win/ISO, and
Linux/OSX tests.

Many thanks for the team and especially Przemek
for this to become reality.

I have plans to commit a few changes regarding
build/make setup in Harbour: *_USR envvar renames
to HB_* ones, and bld*.bat rename to hbmk*.bat.

Brgds,
Viktor

From gfilatov at front.ru  Mon Oct 13 02:53:14 2008
From: gfilatov at front.ru (Grigory Filatov)
Date: Mon Oct 13 02:53:22 2008
Subject: [Harbour] [SPAM]  DbCreate()/DbUseArea() bug in 1.1 at Win98SE
In-Reply-To: <20081011091111.GB11829@34-mo7-2.acn.waw.pl>
References: <19916619.post@talk.nabble.com>
	<20081010115344.GA17862@34-mo7-2.acn.waw.pl>
	<20081011091111.GB11829@34-mo7-2.acn.waw.pl>
Message-ID: <19949655.post@talk.nabble.com>


Hi Przemek,

Many thanks!

All is OK now.

--
Kind Regards,
Grigory Filatov


Przemyslaw Czerpak-2 wrote:
> 
> On Fri, 10 Oct 2008, Przemyslaw Czerpak wrote:
>> > There are the errors with functions DbCreate()/DbUseArea() at Win98SE:
>> > DbCreate():   DBFNTX/1011 Write error: Test.dbf (DOS Error 87)
>> > DbUseArea():   DBFNTX/1012 Corruption detected: test.dbf (DOS Error 87)
>> [...]
>> > This sample works properly with Harbour 1.0.1 at Win98/XP and
>> > Harbour 1.1.0 at WinXP Home SP1/WinXP Pro SP2.
>> > Can someone confirm these issues with Harbour 1.1.0dev at Win98?
>> Probably Win9X does not support file access (READ/WRITE) with given
>> offset and such functionality exists only in NT based windows series.
>> Looks that I'll have to disable code which uses it if Win9x is detected.
>> I'll commit it ASAP, please test.
> 
> Hi Grigory,
> 
> Please test after:
>    2008-10-10 21:22 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> 
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/DbCreate%28%29-DbUseArea%28%29-bug-in-1.1-at-Win98SE-tp19916619p19949655.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From info at fsgiudice.com  Mon Oct 13 03:10:08 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Oct 13 03:10:19 2008
Subject: [Harbour] Local porting news
In-Reply-To: <71C09D51-5D6C-40E4-8FE9-5C74B6FE4E04@syenar.hu>
References: <71C09D51-5D6C-40E4-8FE9-5C74B6FE4E04@syenar.hu>
Message-ID: <48F2F450.7000907@fsgiudice.com>

Hi Viktor,


Il 13/10/2008 1.00, Szak?ts Viktor ha scritto:
> Hi all,
> 
> I'm happy to report that I've successfully ported
> my app to MinGW, MSVS 2008, BCC582 and MSVS 2008
> 64-bit, and it's happily running in all these
> configurations

congrats!

> 
> Many thanks for the team and especially Przemek
> for this to become reality.

And to you of course!

Best regards

Francesco
From harbour.01 at syenar.hu  Mon Oct 13 05:24:13 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 13 05:24:11 2008
Subject: [Harbour] 2008-10-13 11:22 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92d15$Blat.v2.6.2$74d983a8$16fcfb73190c@127.0.0.1>

2008-10-13 11:22 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/teditor.prg
    + Added :LineCount(), :ExitState() methods.
    * Changed to use hb_MemoWrit() to write text content to 
      disk, to avoid Chr(26) to be appended.
    ! Fixed :InsertState() to also modify physical cursor state.
    ! Fixed :BrowseText() to not go into an infinite loop in 
      view mode.

  * source/rtl/memofile.c
    ! Minor formatting.

  * ChangeLog
    ! Fixed yesterday's entry dates.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Oct 13 05:32:21 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 13 05:32:33 2008
Subject: [Harbour] Re: Local porting news
In-Reply-To: <71C09D51-5D6C-40E4-8FE9-5C74B6FE4E04@syenar.hu>
References: <71C09D51-5D6C-40E4-8FE9-5C74B6FE4E04@syenar.hu>
Message-ID: <9891ED61-2E37-452B-BFCF-56500B407B2E@syenar.hu>

>
Hi Przemek,

> [ One issue is that the app still GPFs on startup
> when linked with hbvmmt.lib. This is the stack
> trace according to MSVS2008 debugger: _WinMain()
> -> hb_vmInit() -> hb_vmProcessDllSymbols() ->
> hb_vmDo() -> hb_vmTSVarClean() -> hb_vmTSVarClean() ->
> hb_itemMove(). ]

Update: According to hb_out.log, the GPF seems to occur
in my framework .prg code, in INITSTATICS. In this source
file, quite some (23) THREAD STATICs are declared outside
the functions. I'm using -gc3 in this source file, and
Harbour was also compiled with -gc3. App level parts
of the program are compiled with -gc0.

Brgds,
Viktor

From dbtopas at dbtopas.lt  Mon Oct 13 06:11:04 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Oct 13 06:11:01 2008
Subject: [Harbour] __DBPACK bug in 1.0.1
In-Reply-To: <20081009112700.GA5127@34-mo7-2.acn.waw.pl>
References: <48ECB7E2.9080604@dbtopas.lt>
	<20081009112700.GA5127@34-mo7-2.acn.waw.pl>
Message-ID: <48F31EB8.4020803@dbtopas.lt>

Przemyslaw Czerpak wrote:
> In the past someone added hack for EVAL/EVERY to PACK DBF RDD message
> passing parameters inside item used to collect results so it's still
> overloaded by sth. I can add workaround for it but I cannot promise
> that it will work because it's local user invention which came to official
> repository and upper level RDDs may not know about it and overload it.
> It's even possible that inside valResult will be result of some previously
> executed command which will effect the PACK. In fact I should remove it
> long time ago.
> If it's really important then I can add some workaround to keep it alive
> but I cannot promise that upper level RDDs will not damage or overload it
> before it comes to DBF.
> It's not Clipper compatible and it's not even compatible with our RDD API.


Hi,


I understand that the reason why it is called hack is that RDD pack() 
method does not have any additional structure to pass parameters like 
for example DBORDERCREATEINFO in ordcreate() method. What is the status 
of RDD compatibility? Do the have to be compatible here (and do not add 
any additional parameters), or we are free to do some 
changes/enhancements for example in new major releases? 3rd party code 
will need some updates, for example like this:

> I will work on it but it will force modifications in upper level
> code, f.e. we will have to add new AREA member which will hold error
> object and change all code which uses hb_rddGet*WorkAreaPointer()
> to also call hb_rddFreeWorkAreaPointer().


Best regards,
Mindaugas
From harbour.01 at syenar.hu  Mon Oct 13 06:19:14 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 13 06:19:25 2008
Subject: [Harbour] __DBPACK bug in 1.0.1
In-Reply-To: <48F31EB8.4020803@dbtopas.lt>
References: <48ECB7E2.9080604@dbtopas.lt>
	<20081009112700.GA5127@34-mo7-2.acn.waw.pl>
	<48F31EB8.4020803@dbtopas.lt>
Message-ID: <4BC173CA-E657-460A-917B-BAC8FE8B6335@syenar.hu>

Hi Mindaugas,

I'd say we must stick with compatibility for .prg
level Clipper legacy functions. However, we're
free to implement any extensions in the HB_*() .prg
level function namespace (like HB_DBPACK()), and
for RDDs, even in low-level RDD implementation. Here
the only concern is to aid 3rd party RDD code/developers
to be easy to migrate to 1.1 from 1.0, and be compatible
on the API level if possible, but it's not a must. Binary
compatibility with Harbour 1.0 is now not a requirement
in 1.1 devel branch.

To put it shortly: As long as Clipper functions stay
100% compatible, we are pretty much free to change the
internals and extend HB_* .prg level functions.

Brgds,
Viktor

On 2008.10.13., at 12:11, Mindaugas Kavaliauskas wrote:

> Przemyslaw Czerpak wrote:
>> In the past someone added hack for EVAL/EVERY to PACK DBF RDD message
>> passing parameters inside item used to collect results so it's still
>> overloaded by sth. I can add workaround for it but I cannot promise
>> that it will work because it's local user invention which came to  
>> official
>> repository and upper level RDDs may not know about it and overload  
>> it.
>> It's even possible that inside valResult will be result of some  
>> previously
>> executed command which will effect the PACK. In fact I should  
>> remove it
>> long time ago.
>> If it's really important then I can add some workaround to keep it  
>> alive
>> but I cannot promise that upper level RDDs will not damage or  
>> overload it
>> before it comes to DBF.
>> It's not Clipper compatible and it's not even compatible with our  
>> RDD API.
>
>
> Hi,
>
>
> I understand that the reason why it is called hack is that RDD  
> pack() method does not have any additional structure to pass  
> parameters like for example DBORDERCREATEINFO in ordcreate() method.  
> What is the status of RDD compatibility? Do the have to be  
> compatible here (and do not add any additional parameters), or we  
> are free to do some changes/enhancements for example in new major  
> releases? 3rd party code will need some updates, for example like  
> this:
>
>> I will work on it but it will force modifications in upper level
>> code, f.e. we will have to add new AREA member which will hold error
>> object and change all code which uses hb_rddGet*WorkAreaPointer()
>> to also call hb_rddFreeWorkAreaPointer().
>
>
> Best regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Oct 13 06:35:39 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 13 06:35:38 2008
Subject: [Harbour] 2008-10-13 12:34 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92d1f$Blat.v2.6.2$6f7c71f4$15c4e1b34818@127.0.0.1>

2008-10-13 12:34 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/teditor.prg
    ! Typo in previous modification.

  * make_b32.mak
  * make_vc.mak
  * make_gcc.mak
    ! Minor formatting.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Mon Oct 13 06:38:01 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 13 06:38:20 2008
Subject: [Harbour] Re: Local porting news
In-Reply-To: <9891ED61-2E37-452B-BFCF-56500B407B2E@syenar.hu>
References: <71C09D51-5D6C-40E4-8FE9-5C74B6FE4E04@syenar.hu>
	<9891ED61-2E37-452B-BFCF-56500B407B2E@syenar.hu>
Message-ID: <20081013103801.GA31709@34-mo7-2.acn.waw.pl>

On Mon, 13 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

Congratulation for your work.

>> [ One issue is that the app still GPFs on startup
>> when linked with hbvmmt.lib. This is the stack
>> trace according to MSVS2008 debugger: _WinMain()
>> -> hb_vmInit() -> hb_vmProcessDllSymbols() ->
>> hb_vmDo() -> hb_vmTSVarClean() -> hb_vmTSVarClean() ->
>> hb_itemMove(). ]

The callstack seems to be strange. We do not use hb_vmProcessDllSymbols()
at all - it's old obsolete functions.
Also the above calling order is not possible to reach from
Harbour code.
Is it repeatable with other C compiler?
If yest then please try to make MinGW build with -g GCC switch
run you application in gdb ('gdb .\yourapp' and the then 'r' command)
and when it crash show C callstack: 'bt' command).

> Update: According to hb_out.log, the GPF seems to occur
> in my framework .prg code, in INITSTATICS. In this source
> file, quite some (23) THREAD STATICs are declared outside
> the functions. I'm using -gc3 in this source file, and
> Harbour was also compiled with -gc3. App level parts
> of the program are compiled with -gc0.

OK, I've just seen stupid mistake in generating C source
code for thread static and -gc3:
The offset with static thread numbers is taken from 'lPCodePos + ul'
when it should be from: 'lPCodePos + ul + 3'

I'll commit fix in a while.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Oct 13 06:42:27 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 13 06:42:45 2008
Subject: [Harbour] 2008-10-13 12:42 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081013104227.GA21609@34-mo7-2.acn.waw.pl>

2008-10-13 12:42 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/compiler/gencc.c
    ! fixed thread static variable offsets generated in .c code when
      -gc3 is used

  * harbour/source/vm/hvm.c
    % removed unnecessary call to HB_STACK_TLS_PRELOAD

best regards
Przemek
From druzus at acn.waw.pl  Mon Oct 13 07:07:17 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 13 07:07:37 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <48F10A13.5010105@dbtopas.lt>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<48F10A13.5010105@dbtopas.lt>
Message-ID: <20081013110717.GA355@34-mo7-2.acn.waw.pl>

On Sat, 11 Oct 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

>
> I've also had a problem like this. I've implemented some universal 
> interface to access SQL databases. It's done via RDD, but class interface 
> can be implemented also. I have implemented SQLBASE, SQLMIX (see below) 
> RDDs and SDD (see below) for accessing MySQL, FireBird and PostgreSQL. But 
> only MySQL SDD I've used in real application, so other implementation could 
> be not complete.
> I've tried to document my idea some time ago (2007-10-09). Some 
> implementation details could be changed general idea is the same.
[...]

very nice.

>   It is not guaranteed that all records are included! Yes! If key value of the
>   first record in index is changed to be the last record in index during the
>   phase of record processing, DO WHILE ! EOF() loop will iterate only this
>   single records even if the database contains millions of records. Your sould
>   do FLOCK() on DBF to guarantee the records are not changed. Do you use FLOCK()
>   before readonly DO WHILE ! EOF() loops? :)

Sometimes when I have to eliminate such potential race condition
but I rather use my own additional locking mechanism which supports
share (readonly) locks not directly FLOCK.
O.T.: I can add to DBF* RDDs support for phantom locks so additionally
      to normal locks it's possible to use phantom locks which are not
      obligatory and dedicated only for application synchronization.
      RDD does not use them internally though on some platforms like
      Win9x or DOS they will not be fully functional.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Oct 13 07:12:35 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 13 07:12:52 2008
Subject: [Harbour] __DBPACK bug in 1.0.1
In-Reply-To: <48F31EB8.4020803@dbtopas.lt>
References: <48ECB7E2.9080604@dbtopas.lt>
	<20081009112700.GA5127@34-mo7-2.acn.waw.pl>
	<48F31EB8.4020803@dbtopas.lt>
Message-ID: <20081013111235.GB355@34-mo7-2.acn.waw.pl>

On Mon, 13 Oct 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> I understand that the reason why it is called hack is that RDD pack() 
> method does not have any additional structure to pass parameters like for 
> example DBORDERCREATEINFO in ordcreate() method. What is the status of RDD 
> compatibility? Do the have to be compatible here (and do not add any 
> additional parameters), or we are free to do some changes/enhancements for 
> example in new major releases? 3rd party code will need some updates, for 
> example like this:
>> I will work on it but it will force modifications in upper level
>> code, f.e. we will have to add new AREA member which will hold error
>> object and change all code which uses hb_rddGet*WorkAreaPointer()
>> to also call hb_rddFreeWorkAreaPointer().

I'm trying to make such modifications as seldom as possible but when sth is
necessary then I'm changing the RDD API though always I tried to group
modifications to reduce the problem for 3-rd party RDD developers and
users which use such libraries. We do not have out own documentation
for RDD API so I also try to keep Clipper compatibility here if possible.

best regards,
Przemek
From dbtopas at dbtopas.lt  Mon Oct 13 07:15:39 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Oct 13 07:15:38 2008
Subject: [Harbour] ADS local indexes
Message-ID: <48F32DDB.7070007@dbtopas.lt>

Hi,


I found some more RDD in my "lab" folder. It's ADSX. This RDD inherites 
from ADS RDD and implements client side index, if server could not solve 
index expression, for example: indexing using relations, local 
functions, or even indexing using codeblocks.

The code is written in 2006, and it creates NOUPDATE index. If someone 
will need index with partial (local) update, it can be done also. Does 
anyone is interested in this?


Best regards,
Mindaugas


P.S. I do not see my last message (sent half hour ago) about SQL 
database driver on the mailing list. It could be because of attached 
.zip file (28 KB). I'll resend if I will not find it in an hour.
From harbour.01 at syenar.hu  Mon Oct 13 07:18:58 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 13 07:19:12 2008
Subject: [Harbour] 2008-10-13 12:42 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081013104227.GA21609@34-mo7-2.acn.waw.pl>
References: <20081013104227.GA21609@34-mo7-2.acn.waw.pl>
Message-ID: <8084FF7F-2730-4AB2-BA73-E84EC04526C3@syenar.hu>

Hi Przemek,

Many thanks for the quick patch, I can confirm it
fixed the problem.

Mentioned app runs beautifully in MT mode now.

Brgds,
Viktor

On 2008.10.13., at 12:42, Przemyslaw Czerpak wrote:

> 2008-10-13 12:42 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/compiler/gencc.c
>    ! fixed thread static variable offsets generated in .c code when
>      -gc3 is used
>
>  * harbour/source/vm/hvm.c
>    % removed unnecessary call to HB_STACK_TLS_PRELOAD
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Oct 13 07:21:28 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 13 07:21:43 2008
Subject: [Harbour] ADS local indexes
In-Reply-To: <48F32DDB.7070007@dbtopas.lt>
References: <48F32DDB.7070007@dbtopas.lt>
Message-ID: <AEF8F070-FEB3-4C52-A622-D6126897C798@syenar.hu>

Hi Mindaugas,

On 2008.10.13., at 13:15, Mindaugas Kavaliauskas wrote:

> I found some more RDD in my "lab" folder. It's ADSX. This RDD  
> inherites from ADS RDD and implements client side index, if server  
> could not solve index expression, for example: indexing using  
> relations, local functions, or even indexing using codeblocks.
>
> The code is written in 2006, and it creates NOUPDATE index. If  
> someone will need index with partial (local) update, it can be done  
> also. Does anyone is interested in this?

Sounds pretty nice.

> P.S. I do not see my last message (sent half hour ago) about SQL  
> database driver on the mailing list. It could be because of  
> attached .zip file (28 KB). I'll resend if I will not find it in an  
> hour.

The size limit is 40K raw size, so 28KB binary
attachment can just slip above this limit.

Brgds,
Viktor

From dbtopas at dbtopas.lt  Mon Oct 13 07:22:42 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Oct 13 07:22:39 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <20081011213831.GA5481@34-mo7-2.acn.waw.pl>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<20081011213831.GA5481@34-mo7-2.acn.waw.pl>
Message-ID: <48F32F82.5060805@dbtopas.lt>

The message is resent because my last message (without attachment) has 
already reached mailing list.

Instead of attaching .zip file, you'll find it at:
http://www.dbtopas.lt/hrb/sdd.zip

======================================

Hi,


Przemyslaw Czerpak wrote:
> Before you will started the work then I suggest you to look at
> CLIP project - you will find in SF.

I've looked to CLIP code. The basic idea (Clip's SQL interface gives 
possibility to access SQL databases, but are not plug-and-play tool for 
DBF to SQL migration) seams to be the same. I also see a lot of 
similarities in implementation. Of cause some differences exists, the 
main differences are:

1) CLIP uses different function names to RDD and SQL. For example, it 
uses SQLGOBOTTOM() instead of DBGOBOTTOM(). My implementation is uses 
RDD interface. Some new SQL functionality is obtained using RDDINFO() 
call. For example, I use:
    RDDINFO(RDDI_EXECUTE, "DROP TABLE something")
instead of
    SQLEXECUTE("DROP TABLE something")
but these SQL*() functions can be easy implemented. Actually, the same 
situation is in DBF implementation. You can use 
DBORDERINFO(DBOI_ORDERCOUNT) or ORDCOUNT().

2) I guess CLIP does not have possibility to access field values using 
names, i.e.
   FIELD NAME
   ? NAME
is impossible, the only way to get field value is:
   ? SQLGETVALUE(1)  // 1 is field number

I found it a drawback. Using native Clipper syntax support for accessing 
field is a big benefit, it make code much more shorter and readable.


Of cause, there are some implementation differences. CLIP has prepare() 
method, but I know MySQL the best from SQL API's and it did not use 
prepare function, so I haven't included it into SQL database driver 
method table. The similar situation is for start(), commit(), 
rollback(). In MySQL you need to do execute() call with parameter 
"commit" or "rollback". I have not added BLOB suport yet.


The few problems have to be solved writing RDD for SQL access. One is 
NULL/NIL question? Another is: should we PAD field values for SQL RDD to 
be compatible with DBF RDD's?


I attach some of my code (only MySQL database driver) is included:
sqlbase.c - basic RDD for interfacing with SQL database driver;
sqlmix.c - this RDD implements indexes using B-trees in memory.
   It is inherited from SQLBASE;
mysqldd.c - SQL database driver for MySQL;
hbsqldd.h - include files for all above. Some defines should be moved
   to should dbinfo.ch;
test1.prg - test code.

I hope you'll be able to compile it.


Best regards,
Mindaugas

From harbour.01 at syenar.hu  Mon Oct 13 07:52:45 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 13 07:52:55 2008
Subject: [Harbour] 2008-10-13 13:51 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92d2a$Blat.v2.6.2$34cbe8ca$1358c1389ebe@127.0.0.1>

2008-10-13 13:51 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * make_gcc.mak
  * make_vc.mak
  * contrib/mtpl_b32.mak
  * contrib/mtpl_gcc.mak
  * contrib/mtpl_vc.mak
    + Added -l switch to default Harbour options.
    + Enabling Harbour debug options (-b -l-) when HB_DEBUG_BUILD=yes.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Oct 11 10:01:13 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 13 08:13:21 2008
Subject: [Harbour] 2008-10-11 03:24 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081011125241.GC25724@34-mo7-2.acn.waw.pl>
References: <20081011012438.GA5189@34-mo7-2.acn.waw.pl>
	<E972CA2E-34AA-4C7E-841F-FF9FE87DEF84@syenar.hu>
	<20081011094014.GA32396@34-mo7-2.acn.waw.pl>
	<6D9937EC-DC96-41BA-BBD1-80BFBD36F312@syenar.hu>
	<20081011104559.GB25724@34-mo7-2.acn.waw.pl>
	<17F5BA14-99E9-478B-8D02-6729F1F1C2D9@syenar.hu>
	<20081011125241.GC25724@34-mo7-2.acn.waw.pl>
Message-ID: <1168BFE1-6E34-4A0B-B619-E63952265186@syenar.hu>

Hi Przemek,

I'm afraid I don't have any tips then...

Something seems to have happened between r9599 and r9605,
see two screenshots attached.

In r9605 the missing parts of the screen are painted,
then repainted, and it's also slower than 9599. Did
anything else changed in lower lever GT stuff, which
may cause it?

I've verified my make_vc tweaks around r9599, but they
didn't cause any changes in the build logs, so we can
deduct it.

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: r9599.png
Type: image/png
Size: 37688 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081011/d70f3a0c/r9599-0001.png
-------------- next part --------------
A non-text attachment was scrubbed...
Name: r9605.png
Type: image/png
Size: 30047 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081011/d70f3a0c/r9605-0001.png
-------------- next part --------------

On 2008.10.11., at 14:52, Przemyslaw Czerpak wrote:

> On Sat, 11 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> Question: I'm using my own GT layer for windowing, may
>> I need to make any changes to it, to stay compatible
>> with current Harbour? I'm suspecting that my layer is
>> not catching some screen updates.
>> I've noticed that hb_gt_BaseFree() should now be used
>> for MT, which now I implemented, but it's unrelated to
>> the current problem.
>
> Just like for ST. There is only one difference.
> Before recent modification if you do not call hb_gt_BaseFree()
> after hb_gt_Base() nothing wrong will happen. Now in MT mode
> such operation will left console locked for given thread.
> It will not effect ST mode. The console mutex is reentrant
> so you will not see this problem if you are using only one
> thread to access screen anyhow it's always good to keep the
> code clean.
>
>>> BTW As I can see some functions/classes used to ignore color  
>>> setting,
>>> f.e. TEDITOR what badly interacts with some other code which may  
>>> change
>>> colors. It can be seen sometimes in debugger. I do not know how it
>>> interacts with Clipper compatibility. I haven't touched them but
>>> IMHO it should be fixed. At least in few places they will not
>>> respect colors passed as parameter.
>> TEDITOR should only be compatible as far as it's
>> used in MemoEdit() (this is pretty much self contained,
>> beside the user function, which may fiddle with current color),
>> the rest can be fixed without compatibility concerns. If
>> you see bugs there, pls feel free to fix them.
>
> I do not know this code so making deeper modifications I may
> break sth. I'd prefer to left it for someone more familiar with it.
> Anyhow I will remember about it in next modifications (if any).
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From dbtopas at dbtopas.lt  Mon Oct 13 07:00:17 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Oct 13 08:13:26 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <20081011213831.GA5481@34-mo7-2.acn.waw.pl>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<20081011213831.GA5481@34-mo7-2.acn.waw.pl>
Message-ID: <48F32A41.2090001@dbtopas.lt>

Hi,


Przemyslaw Czerpak wrote:
> Before you will started the work then I suggest you to look at
> CLIP project - you will find in SF.

I've looked to CLIP code. The basic idea (Clip's SQL interface gives 
possibility to access SQL databases, but are not plug-and-play tool for 
DBF to SQL migration) seams to be the same. I also see a lot of 
similarities in implementation. Of cause some differences exists, the 
main differences are:

1) CLIP uses different function names to RDD and SQL. For example, it 
uses SQLGOBOTTOM() instead of DBGOBOTTOM(). My implementation is uses 
RDD interface. Some new SQL functionality is obtained using RDDINFO() 
call. For example, I use:
    RDDINFO(RDDI_EXECUTE, "DROP TABLE something")
instead of
    SQLEXECUTE("DROP TABLE something")
but these SQL*() functions can be easy implemented. Actually, the same 
situation is in DBF implementation. You can use 
DBORDERINFO(DBOI_ORDERCOUNT) or ORDCOUNT().

2) I guess CLIP does not have possibility to access field values using 
names, i.e.
   FIELD NAME
   ? NAME
is impossible, the only way to get field value is:
   ? SQLGETVALUE(1)  // 1 is field number

I found it a drawback. Using native Clipper syntax support for accessing 
field is a big benefit, it make code much more shorter and readable.


Of cause, there are some implementation differences. CLIP has prepare() 
method, but I know MySQL the best from SQL API's and it did not use 
prepare function, so I haven't included it into SQL database driver 
method table. The similar situation is for start(), commit(), 
rollback(). In MySQL you need to do execute() call with parameter 
"commit" or "rollback". I have not added BLOB suport yet.


The few problems have to be solved writing RDD for SQL access. One is 
NULL/NIL question? Another is: should we PAD field values for SQL RDD to 
be compatible with DBF RDD's?


I attach some of my code (only MySQL database driver) is included:
sqlbase.c - basic RDD for interfacing with SQL database driver;
sqlmix.c - this RDD implements indexes using B-trees in memory.
   It is inherited from SQLBASE;
mysqldd.c - SQL database driver for MySQL;
hbsqldd.h - include files for all above. Some defines should be moved
   to should dbinfo.ch;
test1.prg - test code.

I hope you'll be able to compile it.


Best regards,
Mindaugas

-------------- next part --------------
A non-text attachment was scrubbed...
Name: sdd.zip
Type: application/x-zip-compressed
Size: 29142 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081013/9002233b/sdd-0001.bin
From toninhofwi at yahoo.com.br  Mon Oct 13 09:03:34 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Oct 13 09:02:10 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <716F41D0-052D-460F-AB6A-1BFB41D7F04F@syenar.hu>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<716F41D0-052D-460F-AB6A-1BFB41D7F04F@syenar.hu>
Message-ID: <coh6f457p5acudkkcl8d768a9fhl4k1qtq@4ax.com>

>Hi Lorenzo,
>Very good idea.
>My vote for HDBC as a name.

+1...

Regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From lorenzo.fiorini at gmail.com  Mon Oct 13 09:13:54 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Oct 13 09:14:01 2008
Subject: [Harbour] Mono will have sth that nobody has: a compiler lib...
Message-ID: <9257026e0810130613m1e06904evb5ff2796d961568e@mail.gmail.com>

>From here http://www.desktoplinux.com/articles/AT7746284247.html

[...]
Q8b. Can you offer any hits a little more specific?

I've already written about some things on my blog [link]. We'll have
C## eval, which nobody else has. Java does not even have it. We've
turned the compiler into a library. That means you can treat C## like
a scripting language, and have the compiler dynamically generate code
and run it. You take an initial performance hit only for parsing. This
is uber-awesome, reaching awesomeness levels beyond what the typical
human can take in a single day...
[...]

Isn't he talking about Harbour? :)

best regards,
Lorenzo
From rodrmigu at gmail.com  Mon Oct 13 10:16:41 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Mon Oct 13 10:16:48 2008
Subject: [Harbour] Re: A standard for the Harbour's SQL libs Click to flag
	this post
Message-ID: <80b05d460810130716ncf1e9fbu88a0ece857b7e26f@mail.gmail.com>

Hi Lorenzo,

I wrote some OCI oracle native code, that's a working code, but need
some improvement related to the bind variables and BLOB support (CLOB
can be used as regular strings).
Also, I've successfully tested the Oracle ODBC for both linux and
windows, but the TODBC is missing the Bind variable support, that's
mandatory for oracle performance.

Regards,
Rodrigo Moreno



by Lorenzo Fiorini-2 Oct 11, 2008; 02:59pm :: Rate this Message: (use
ratings to moderate[?])

Reply | Reply to Author | Show Only this Message
On Sat, Oct 11, 2008 at 7:47 PM, Massimo Belgrano <mbelgrano@...> wrote:

> I also agree
> This  idea uniform the access to Harbour Database by class

Would you like to participate?

Do you actually use any SQL DBS with Harbour?

Do you know JDBC?

Are there Harbour/ODBC users here?

I use PostGreSQL daily so it would be good if you could pick up any of
mysql, odbc,firebird.

IMHO the odbc's main target is Oracle.
There are free development editions for both Linux and Windows.

best regards,
Lorenzo
_______________________________________________
Harbour mailing list
Harbour@...
http://lists.harbour-project.org/mailman/listinfo/harbour

? Return to forum
Free Forum Powered by Nabble 	Forum Help
From druzus at acn.waw.pl  Mon Oct 13 10:35:01 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 13 10:35:19 2008
Subject: [Harbour] 2008-10-13 16:34 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081013143501.GA9040@34-mo7-2.acn.waw.pl>

2008-10-13 16:34 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbclass.ch
  * harbour/source/vm/classes.c
  * harbour/source/rtl/tobject.prg
  * harbour/source/rtl/tclass.prg
    ! fixed race condition when class function is called 1-st time
      and new class is created. It was possible that more then one
      thread execute this function simultaneously and two classes
      identical classes but with different handles were created
      and registered in HVM

  * harbour/contrib/xhb/xhbcomp.prg
    * updated hack with optional inheritance for new class code

best regards
Przemek
From harbour.01 at syenar.hu  Mon Oct 13 10:39:31 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 13 10:39:47 2008
Subject: [Harbour] Macro to block conversion function
Message-ID: <E2C394BB-B793-4B96-8F48-01309F53E481@syenar.hu>

Hi folks,

Do we have a function to convert a macro text
to a codeblock? This would essentially be the
same functionality as we currently have with
'&("code")' expression, but in the form of a
function.

If not, IMO it'd be useful/cleaner to have one,
like hb_macroCompile( "code" ) -> bBlock.

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Mon Oct 13 11:29:26 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Oct 13 11:29:33 2008
Subject: [Harbour] Re: A standard for the Harbour's SQL libs Click to flag
	this post
In-Reply-To: <80b05d460810130716ncf1e9fbu88a0ece857b7e26f@mail.gmail.com>
References: <80b05d460810130716ncf1e9fbu88a0ece857b7e26f@mail.gmail.com>
Message-ID: <9257026e0810130829sbf8277dw8c9bb68c7dd11d89@mail.gmail.com>

On Mon, Oct 13, 2008 at 4:16 PM, Rodrigo Miguel <rodrmigu@gmail.com> wrote:

> I wrote some OCI oracle native code, that's a working code, but need
> some improvement related to the bind variables and BLOB support (CLOB
> can be used as regular strings).

Great! Oracle support is sth we miss.

> Also, I've successfully tested the Oracle ODBC for both linux and
> windows, but the TODBC is missing the Bind variable support, that's
> mandatory for oracle performance.

For this I think that following an established standard like JDBC helps.
You know from the doc what need to be implemented and even if you
don't write the code today there'll be the "place" to add it in the
future without rewriting the interface.

best regards,
Lorenzo
From druzus at acn.waw.pl  Mon Oct 13 12:01:37 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 13 12:01:56 2008
Subject: [Harbour] 2008-10-13 18:01 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081013160137.GA3000@34-mo7-2.acn.waw.pl>

2008-10-13 18:01 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/thread.c
    + added small description for hb_threadOnce() .prg function

  * harbour/include/hbthread.h
    ! do not set TLS in POCC and XCC builds when _MSC_VER macro is set
      This compilers also have this macro but dllspec( thread) does
      not work for them (at least in version 4.50.15)

  * harbour/utils/hbtest/rt_hvm.prg
    + added few tests which exploit by DMC bug. Be careful with
      this compiler. In some cases it gives buggy final code, f.e.
      try this:

            #include <stdio.h>
            typedef struct
            {
               double         dd;
               long long int  ll;
            } UN;
            const char * cmp( UN * pU )
            {
               return pU->dd >= pU->ll ? "OK" : "ERRROR";
            }
            int main( void )
            {
               UN u = { 10.50, 10 };
               printf( "%s\n", cmp( &u ) );
               return 0;
            }

      The same bug can be exploited also by final Harbour binaries
      compiled by DMC in code like:

         ? iif( 10.50 >= 10, "OK", "ERROR" )

      I used DMC 8.42n. As long as such things will not be fixed by
      DMC developers this compiler is not supported by Harbour and
      reported problems with DMC Harbour builds will have to be
      ignored by us.

best regards
Przemek
From mbelgrano at deltain.it  Mon Oct 13 13:14:40 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Oct 13 13:15:20 2008
Subject: [Harbour] 2008-10-13 16:34 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081013143501.GA9040@34-mo7-2.acn.waw.pl>
References: <20081013143501.GA9040@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F069@SRV02.deltain.net>

Compliment 
Point 5 of your todo is Done!

> MT TODO builds:
>   5. There is possible race condition when class function is
>      called 1-st time to create new object. It's possible that
>      two threads will try to register the same class. It has to
>      be fixed.


best regards,
Przemek

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Monday, October 13, 2008 4:35 PM
To: harbour@harbour-project.org
Subject: [Harbour] 2008-10-13 16:34 UTC+0200 Przemyslaw Czerpak(druzus/at/priv.onet.pl)

2008-10-13 16:34 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbclass.ch
  * harbour/source/vm/classes.c
  * harbour/source/rtl/tobject.prg
  * harbour/source/rtl/tclass.prg
    ! fixed race condition when class function is called 1-st time
      and new class is created. It was possible that more then one
      thread execute this function simultaneously and two classes
      identical classes but with different handles were created
      and registered in HVM

  * harbour/contrib/xhb/xhbcomp.prg
    * updated hack with optional inheritance for new class code

best regards
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Mon Oct 13 13:53:48 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Oct 13 13:54:24 2008
Subject: [Harbour] Macro to block conversion function
In-Reply-To: <E2C394BB-B793-4B96-8F48-01309F53E481@syenar.hu>
References: <E2C394BB-B793-4B96-8F48-01309F53E481@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F06A@SRV02.deltain.net>

I am not sure but I remember
HB_VMEXECUTE(Hb_macroCompile("CODE"))


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Monday, October 13, 2008 4:40 PM
To: Harbour Project Main Developer List.
Subject: [Harbour] Macro to block conversion function

Hi folks,

Do we have a function to convert a macro text
to a codeblock? This would essentially be the
same functionality as we currently have with
'&("code")' expression, but in the form of a
function.

If not, IMO it'd be useful/cleaner to have one,
like hb_macroCompile( "code" ) -> bBlock.

Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Mon Oct 13 14:19:53 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 13 14:20:15 2008
Subject: [Harbour] 2008-10-13 20:19 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92d60$Blat.v2.6.2$49c02750$acc1bef8522@127.0.0.1>

2008-10-13 20:19 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbmisc/strfmt.c
    ! Fixed GPF when non-string was passed as 
      first parameter.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Mon Oct 13 14:21:37 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 13 14:21:58 2008
Subject: [Harbour] 2008-10-13 20:21 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081013182137.GA28575@34-mo7-2.acn.waw.pl>

2008-10-13 20:21 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/wacore.c
    ; updated comments about xbase++ behavior in dbRelease()

  * harbour/include/hbvm.h
  * harbour/source/vm/hvm.c
  * harbour/source/vm/dynlibhb.c
  * harbour/source/vm/runner.c
    ! added MT protection for HB_LIBLOAD()/HB_LIBFREE() and
      HB_HRBLOAD()/HB_HRBUNLOAD(). Please remember that you should
      not use any external LoadLibrary() functions because they are
      not protected for clean PCODE modules loading/unloading even
      in ST mode. Using them can cause HVM internal structure corruption.
      If we have such functions in contrib then they should be redirected
      to our HVM ones.
      There is still one problem in MT mode which has to be resolved yet.
      When dynamic library containing PCODE using static variables
      is loaded 1-st time then it will force resizing of internal array
      with static variables. If in exactly the same moment some other
      thread operates on static variable then it may cause corruption.
      To resolve this problem we will have to divide continuous memory
      block common for all modules where we store all static variables
      into separated blocks bound with each PCODE module (symbol table).

  * harbour/source/vm/dynlibhb.c
    + added support for DLL loading/unloading in OS2 builds.
      Based on xHarbour code by Maurilio Longo - please test.

best regards
Przemek
From harbour.01 at syenar.hu  Mon Oct 13 14:50:48 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 13 14:51:00 2008
Subject: [Harbour] 2008-10-13 18:01 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081013160137.GA3000@34-mo7-2.acn.waw.pl>
References: <20081013160137.GA3000@34-mo7-2.acn.waw.pl>
Message-ID: <756C128E-C771-4C9A-A18D-967082CBB070@syenar.hu>

I've pulled the DMC binary release from sf.net,
and won't create any new ones for future builds
until someone reports success with a future DMC
version.

Brgds,
Viktor

On 2008.10.13., at 18:01, Przemyslaw Czerpak wrote:

> 2008-10-13 18:01 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/vm/thread.c
>    + added small description for hb_threadOnce() .prg function
>
>  * harbour/include/hbthread.h
>    ! do not set TLS in POCC and XCC builds when _MSC_VER macro is set
>      This compilers also have this macro but dllspec( thread) does
>      not work for them (at least in version 4.50.15)
>
>  * harbour/utils/hbtest/rt_hvm.prg
>    + added few tests which exploit by DMC bug. Be careful with
>      this compiler. In some cases it gives buggy final code, f.e.
>      try this:
>
>            #include <stdio.h>
>            typedef struct
>            {
>               double         dd;
>               long long int  ll;
>            } UN;
>            const char * cmp( UN * pU )
>            {
>               return pU->dd >= pU->ll ? "OK" : "ERRROR";
>            }
>            int main( void )
>            {
>               UN u = { 10.50, 10 };
>               printf( "%s\n", cmp( &u ) );
>               return 0;
>            }
>
>      The same bug can be exploited also by final Harbour binaries
>      compiled by DMC in code like:
>
>         ? iif( 10.50 >= 10, "OK", "ERROR" )
>
>      I used DMC 8.42n. As long as such things will not be fixed by
>      DMC developers this compiler is not supported by Harbour and
>      reported problems with DMC Harbour builds will have to be
>      ignored by us.
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Mon Oct 13 15:30:31 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 13 15:30:49 2008
Subject: [Harbour] 2008-10-13 21:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081013193031.GA29040@34-mo7-2.acn.waw.pl>

2008-10-13 21:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbwince.h
  * harbour/source/common/hbwince.c
    ! fixed LastError overwriting inside WinCE wrapper functions

best regards
Przemek
From druzus at acn.waw.pl  Mon Oct 13 15:34:01 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 13 15:34:28 2008
Subject: [Harbour] 2008-10-13 18:01 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <756C128E-C771-4C9A-A18D-967082CBB070@syenar.hu>
References: <20081013160137.GA3000@34-mo7-2.acn.waw.pl>
	<756C128E-C771-4C9A-A18D-967082CBB070@syenar.hu>
Message-ID: <20081013193401.GA30721@34-mo7-2.acn.waw.pl>

On Mon, 13 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I've pulled the DMC binary release from sf.net,
> and won't create any new ones for future builds
> until someone reports success with a future DMC
> version.

Thank you.
If someone is interesting in DMC builds then he should report
the bug sending the example from ChangeLog to DMC devlopers.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Oct 13 15:44:54 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 13 15:45:12 2008
Subject: [Harbour] 2008-10-13 21:44 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081013194454.GA8257@34-mo7-2.acn.waw.pl>

2008-10-13 21:44 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbwin/win_tole.prg
    ! Fixed assignment to oErr:Operation from "+" to "-" in
      OleValueMinus() method - fix by Luis Krause Mantilla borrowed
      from xHarbour

best regards
Przemek
From druzus at acn.waw.pl  Mon Oct 13 16:10:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 13 16:11:09 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <48F32F82.5060805@dbtopas.lt>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<20081011213831.GA5481@34-mo7-2.acn.waw.pl>
	<48F32F82.5060805@dbtopas.lt>
Message-ID: <20081013201051.GA13327@34-mo7-2.acn.waw.pl>

On Mon, 13 Oct 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> The message is resent because my last message (without attachment) has 
> already reached mailing list.
> Instead of attaching .zip file, you'll find it at:
> http://www.dbtopas.lt/hrb/sdd.zip

Very nice peace of code which is also very good start point for
multi RDBMS RDD API. I'll look closer into it in spare time.
Lorenzo asked about common OOP interface for different RDBMS
and this is rather starting code for Harbour SQLRDD which seems
to be much more interesting for people who want to keep existing
Clipper/xBase syntax.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Oct 13 16:33:29 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 13 16:35:25 2008
Subject: [Harbour] 2008-10-13 22:27 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92d72$Blat.v2.6.2$f3a45d2a$a6cf2be4d42@127.0.0.1>

2008-10-13 22:27 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * tests/transtst.prg
  * doc/en/string.txt
  * doc/en/compiler.txt
  * doc/en/macro.txt
  * doc/en/browse.txt
  * doc/en/binnum.txt
  * doc/es/macro.txt
  * doc/es/browse.txt
  * doc/es/binnum.txt
  * doc/transfrm.txt
  * doc/whatsnew.txt
  * include/hbclass.ch
  * include/hbmacro.ch
  * include/hbexprb.c
  * ChangeLog
  * contrib/hbvpdf/hbvpdft.prg
  * contrib/hbwhat/import.ch
  * source/vm/macro.c
  * source/rtl/tobject.prg
  * source/rtl/tthreadx.prg
  * source/rtl/transfrm.c
  * source/rtl/tget.prg
  * source/rtl/isprint.c
  * source/rtl/tbrowse.prg
  * source/rdd/wacore.c
  * source/rdd/dbdetach.c
  * utils/hbtest/rt_trans.prg
    * Xbase++ name references cleaned.

  * common.mak
  * source/rdd/Makefile
  * source/rdd/dbdetach.c
  + source/rdd/dbdetacx.c
    * Moved XBase++ compatibility functions to separate file.
--
Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Mon Oct 13 16:44:10 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Oct 13 16:44:19 2008
Subject: [Harbour] Warning
Message-ID: <826C12C304344A2687C9981A5FB873E3@emag>

Warning W8004 source\vm\dynlibhb.c 153: 'fResult' is assigned a value that 
is never used in function HB_FUN_HB_LIBFREE

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Mon Oct 13 18:02:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 13 18:03:10 2008
Subject: [Harbour] 2008-10-14 00:02 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081013220251.GA17090@34-mo7-2.acn.waw.pl>

2008-10-14 00:02 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/dynlibhb.c
    ! fixed HB_LIBFREE() return value - thanks to Enrico

best regards
Przemek
From harbour.01 at syenar.hu  Mon Oct 13 19:53:59 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 13 19:54:10 2008
Subject: [Harbour] Macro to block conversion function
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F06A@SRV02.deltain.net>
References: <E2C394BB-B793-4B96-8F48-01309F53E481@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F06A@SRV02.deltain.net>
Message-ID: <5F302FD5-EEA4-4FC2-95F6-4779DB1108AA@syenar.hu>

Thanks Massimo, this is almost good, to be more
specific, I'm looking for a function replacement
for this construct:

bBlock := &( "{||" + cExpr + "}" )

Currently I'm using a macro to do that, but
a self-contained function call would be more
elegant and straightforward.

Brgds,
Viktor

On 2008.10.13., at 19:53, Massimo Belgrano wrote:

> I am not sure but I remember
> HB_VMEXECUTE(Hb_macroCompile("CODE"))
>
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org 
> ] On Behalf Of Szak?ts Viktor
> Sent: Monday, October 13, 2008 4:40 PM
> To: Harbour Project Main Developer List.
> Subject: [Harbour] Macro to block conversion function
>
> Hi folks,
>
> Do we have a function to convert a macro text
> to a codeblock? This would essentially be the
> same functionality as we currently have with
> '&("code")' expression, but in the form of a
> function.
>
> If not, IMO it'd be useful/cleaner to have one,
> like hb_macroCompile( "code" ) -> bBlock.
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Mon Oct 13 21:27:30 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 13 21:27:47 2008
Subject: [Harbour] Macro to block conversion function
In-Reply-To: <5F302FD5-EEA4-4FC2-95F6-4779DB1108AA@syenar.hu>
References: <E2C394BB-B793-4B96-8F48-01309F53E481@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F06A@SRV02.deltain.net>
	<5F302FD5-EEA4-4FC2-95F6-4779DB1108AA@syenar.hu>
Message-ID: <20081014012730.GA2514@34-mo7-2.acn.waw.pl>

On Tue, 14 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Thanks Massimo, this is almost good, to be more
> specific, I'm looking for a function replacement
> for this construct:
> bBlock := &( "{||" + cExpr + "}" )

Different PCODE is generated for codeblock body ans simple macro, f.e.:

   cExpr := "qoue(1), qout(2), 123.45"
   bBlock := &( "{||" + cExpr + "}" )
   n := eval( bBlock )

works but:

   cExpr := "qoue(1), qout(2), 123.45"
   n := &cExpr

does not work. It means that macro compiler has to know that it
compiles code block not a macro.

This can be resolved and we can inform macro compiler that it's codeblock
compilation and overwrite in generated PCODE last instruction changing
HB_P_ENDPROC to HB_P_ENDBLOCK. Anyhow there is yet another problem.
Macro compiled blocks inherits from current function class scope so
if you compile in class method some macro expression then it can
access hidden members of the class to which the method belongs.
Macros compiled to codeblock by separate function will not inherit
current context attributes. In some cases it can be even usable
but it mean that new functions cannot be replacement for codeblock
macro compilation in all cases.

> Currently I'm using a macro to do that, but
> a self-contained function call would be more
> elegant and straightforward.

If you do not want/need to keep class scope in new codeblock then yes.
If you are still interested then I can add:
   HB_MACROBLOCK( <cExpr> ) -> <bBlock>
to SVN. I even already have such function in some code. I will only
have to look for it.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Oct 14 01:21:46 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 01:21:57 2008
Subject: [Harbour] Macro to block conversion function
In-Reply-To: <20081014012730.GA2514@34-mo7-2.acn.waw.pl>
References: <E2C394BB-B793-4B96-8F48-01309F53E481@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F06A@SRV02.deltain.net>
	<5F302FD5-EEA4-4FC2-95F6-4779DB1108AA@syenar.hu>
	<20081014012730.GA2514@34-mo7-2.acn.waw.pl>
Message-ID: <001AADEA-625B-4F5B-BD5F-C23A2CBAC3BE@syenar.hu>

Hi Przemek,

Thanks for explaining these details, I didn't know
them so far.

> compilation and overwrite in generated PCODE last instruction changing
> HB_P_ENDPROC to HB_P_ENDBLOCK. Anyhow there is yet another problem.
> Macro compiled blocks inherits from current function class scope so
> if you compile in class method some macro expression then it can
> access hidden members of the class to which the method belongs.
> Macros compiled to codeblock by separate function will not inherit
> current context attributes. In some cases it can be even usable
> but it mean that new functions cannot be replacement for codeblock
> macro compilation in all cases.
>
>> Currently I'm using a macro to do that, but
>> a self-contained function call would be more
>> elegant and straightforward.
>
> If you do not want/need to keep class scope in new codeblock then yes.
> If you are still interested then I can add:
>   HB_MACROBLOCK( <cExpr> ) -> <bBlock>
> to SVN. I even already have such function in some code. I will only
> have to look for it.

I'm using this solely to compile filter and index key
expressions (this in fact the only places where I use
the macro operator in my app), so class scope isn't
a problem, or may even be an advantage in the future.
I guess the above usage pattern may be typical in
Harbour/Clipper programs.

hb_MacroBlock() sounds very good actually, so I'm
definitely interested. :)

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Tue Oct 14 02:04:16 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Oct 14 02:04:23 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <20081013201051.GA13327@34-mo7-2.acn.waw.pl>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<20081011213831.GA5481@34-mo7-2.acn.waw.pl>
	<48F32F82.5060805@dbtopas.lt>
	<20081013201051.GA13327@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0810132304n3409bbc3sfdaedb5d4cce7587@mail.gmail.com>

On Mon, Oct 13, 2008 at 10:10 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Very nice peace of code which is also very good start point for
> multi RDBMS RDD API. I'll look closer into it in spare time.
> Lorenzo asked about common OOP interface for different RDBMS
> and this is rather starting code for Harbour SQLRDD which seems
> to be much more interesting for people who want to keep existing
> Clipper/xBase syntax.

I'm not a C developer so I cannot say much about the code.
What about adding sdd code to the contrib lib?

Fitting SQL in the RDD standard is easy in the "consuming" loop.
Pratically every SQL query is processed using do while !eof() ...
dbskip() ... enddo so having the possibility to access columns values
using alias->field syntax makes code more familiar.

I see not so easy apply the RDD syntax to the insert, update, locking
and query logic.

However as I said we can be a multi-layers and multi-paths approach:
C interfaces -> PRG classes -> USRRDDs
or
C interfaces -> SQLBASE
or
C interfaces -> C RDDs -> SQLBASE
or
...

Clearly this also makes things much more complex than I thought when I
started the thread.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Tue Oct 14 02:46:28 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 02:46:44 2008
Subject: [Harbour] 2008-10-14 08:44 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92dc8$Blat.v2.6.2$95abe770$1e509f31cb14@127.0.0.1>

2008-10-14 08:44 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/examples/dbu/bld_vc.bat
    ! Removed -TP C option.
--
Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Tue Oct 14 03:36:58 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Oct 14 03:37:07 2008
Subject: [Harbour] 2008-10-14 00:02 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20081013220251.GA17090@34-mo7-2.acn.waw.pl>
Message-ID: <4C8F38F5AD084CAAA151D6850E6F53FE@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: <harbour@harbour-project.org>
Data invio: marted? 14 ottobre 2008 0.02
Oggetto: [Harbour] 2008-10-14 00:02 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> 2008-10-14 00:02 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/vm/dynlibhb.c
>    ! fixed HB_LIBFREE() return value - thanks to Enrico

Thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Tue Oct 14 03:41:26 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Oct 14 03:41:35 2008
Subject: [Harbour] Macro to block conversion function
References: <E2C394BB-B793-4B96-8F48-01309F53E481@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815F06A@SRV02.deltain.net>
	<5F302FD5-EEA4-4FC2-95F6-4779DB1108AA@syenar.hu>
Message-ID: <DEAC3BF80838408BA9D7A13FF71EB987@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 14 ottobre 2008 1.53
Oggetto: Re: [Harbour] Macro to block conversion function


> I'm looking for a function replacement
> for this construct:
>
> bBlock := &( "{||" + cExpr + "}" )
>
> Currently I'm using a macro to do that, but
> a self-contained function call would be more
> elegant and straightforward.

I really don't see what's the difference between

bBlock := &( "{||" + cExpr + "}" )

and

bBlock := hb_macroCompile( "{||" + cExpr + "}" )

other than that you have to type more characters. I don't know if there is a 
speed concern but the first expression is idiomatic for a Clipper-head.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Tue Oct 14 03:49:14 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 03:49:26 2008
Subject: [Harbour] Macro to block conversion function
In-Reply-To: <DEAC3BF80838408BA9D7A13FF71EB987@emag>
References: <E2C394BB-B793-4B96-8F48-01309F53E481@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815F06A@SRV02.deltain.net>
	<5F302FD5-EEA4-4FC2-95F6-4779DB1108AA@syenar.hu>
	<DEAC3BF80838408BA9D7A13FF71EB987@emag>
Message-ID: <67E728F3-BA72-47E1-8C2D-1D268D313444@syenar.hu>

>>
Hi Enrico,

>> I really don't see what's the difference between
>
> bBlock := &( "{||" + cExpr + "}" )
>
> and
>
> bBlock := hb_macroCompile( "{||" + cExpr + "}" )

Nothing. Though, we've been talking about this expression: :)
bBlock := hb_macroCompile( cExpr )

> other than that you have to type more characters. I don't know if  
> there is a speed concern but the first expression is idiomatic for a  
> Clipper-head.

For me the hack-less function format looks much
cleaner. It's probably also a bit quicker and
generates slightly smaller code, and this way
you can very easily identify where your code
uses macro compilation.

Maybe this won't qualify my as a Clipper-head,
but I always had a dislike for the '&' operator.
I'm currently hiding it with an STRCOMPILE()
macro, which does the same as hb_macroCompile().

Brgds,
Viktor

From guy.roussin at teledetection.fr  Tue Oct 14 03:59:02 2008
From: guy.roussin at teledetection.fr (guy.roussin@teledetection.fr)
Date: Tue Oct 14 03:59:13 2008
Subject: [Harbour] Macro to block conversion function
In-Reply-To: <DEAC3BF80838408BA9D7A13FF71EB987@emag>
References: <E2C394BB-B793-4B96-8F48-01309F53E481@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815F06A@SRV02.deltain.net>	<5F302FD5-EEA4-4FC2-95F6-4779DB1108AA@syenar.hu>
	<DEAC3BF80838408BA9D7A13FF71EB987@emag>
Message-ID: <48F45146.5060002@teledetection.fr>

> I really don't see what's the difference between
> 
> bBlock := &( "{||" + cExpr + "}" )
> 
> and
> 
> bBlock := hb_macroCompile( "{||" + cExpr + "}" )

No! if i understand Przemek, the new syntax is :
bBlock := hb_macroBlock( cExpr )
and there are only 2 characters more, but easier to type.

Guy

From e.m.giordano at emagsoftware.it  Tue Oct 14 04:04:31 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Oct 14 04:04:40 2008
Subject: [Harbour] Macro to block conversion function
References: <E2C394BB-B793-4B96-8F48-01309F53E481@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815F06A@SRV02.deltain.net><5F302FD5-EEA4-4FC2-95F6-4779DB1108AA@syenar.hu><DEAC3BF80838408BA9D7A13FF71EB987@emag>
	<67E728F3-BA72-47E1-8C2D-1D268D313444@syenar.hu>
Message-ID: <3E5D4E3659DD4B0EACBA354567DA7319@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 14 ottobre 2008 9.49
Oggetto: Re: [Harbour] Macro to block conversion function


> Nothing. Though, we've been talking about this expression: :)
> bBlock := hb_macroCompile( cExpr )

Well, yes, it is smaller. :-)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Tue Oct 14 05:36:08 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 14 05:36:25 2008
Subject: [Harbour] Macro to block conversion function
In-Reply-To: <67E728F3-BA72-47E1-8C2D-1D268D313444@syenar.hu>
References: <5F302FD5-EEA4-4FC2-95F6-4779DB1108AA@syenar.hu>
	<DEAC3BF80838408BA9D7A13FF71EB987@emag>
	<67E728F3-BA72-47E1-8C2D-1D268D313444@syenar.hu>
Message-ID: <20081014093608.GA20352@34-mo7-2.acn.waw.pl>

On Tue, 14 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

>>> I really don't see what's the difference between
>> bBlock := &( "{||" + cExpr + "}" )
>> and
>> bBlock := hb_macroCompile( "{||" + cExpr + "}" )
> Nothing. Though, we've been talking about this expression: :)
> bBlock := hb_macroCompile( cExpr )
>> other than that you have to type more characters. I don't know if there is 
>> a speed concern but the first expression is idiomatic for a Clipper-head.
> For me the hack-less function format looks much
> cleaner. It's probably also a bit quicker and

Yes, hb_macroBlock() is faster. The difference depends on
macro body. For very simplt macros, f.e. ".T." it's:

empty loop overhead:          0.09
  macro compilation:          2.44
      hb_macroblock:          1.43

For more complex macros the difference is smaller of course
because the cost of macro compilation is the most significant
one.

> generates slightly smaller code, and this way

This is not true. The final codeblock will contain
exactly the same PCODE in both cases.

> you can very easily identify where your code
> uses macro compilation.

But you loose PROCNAME() information about the place where
macro was compiled. It will be attached to hb_macroBlock()
function. For some people it can be important information.

> Maybe this won't qualify my as a Clipper-head,
> but I always had a dislike for the '&' operator.
> I'm currently hiding it with an STRCOMPILE()
> macro, which does the same as hb_macroCompile().

So for you hb_macroBlock() will be only faster version of your
own function STRCOMPILE(). You will not lost any additional
information attached to compiled macro because you do not have
it now when you use STRCOMPILE().
OK, I'll commit this function ASAP.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Oct 14 05:49:12 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 05:49:25 2008
Subject: [Harbour] Macro to block conversion function
In-Reply-To: <20081014093608.GA20352@34-mo7-2.acn.waw.pl>
References: <5F302FD5-EEA4-4FC2-95F6-4779DB1108AA@syenar.hu>
	<DEAC3BF80838408BA9D7A13FF71EB987@emag>
	<67E728F3-BA72-47E1-8C2D-1D268D313444@syenar.hu>
	<20081014093608.GA20352@34-mo7-2.acn.waw.pl>
Message-ID: <35911F37-4173-4378-84C2-6461AF64F5EC@syenar.hu>

>>>
Hi Przemek,

>>> bBlock := hb_macroCompile( "{||" + cExpr + "}" )
>> Nothing. Though, we've been talking about this expression: :)
>> bBlock := hb_macroCompile( cExpr )
>>> other than that you have to type more characters. I don't know if  
>>> there is
>>> a speed concern but the first expression is idiomatic for a  
>>> Clipper-head.
>> For me the hack-less function format looks much
>> cleaner. It's probably also a bit quicker and
>
> Yes, hb_macroBlock() is faster. The difference depends on
> macro body. For very simplt macros, f.e. ".T." it's:
>
> empty loop overhead:          0.09
>  macro compilation:          2.44
>      hb_macroblock:          1.43
>
> For more complex macros the difference is smaller of course
> because the cost of macro compilation is the most significant
> one.

Great!

>> generates slightly smaller code, and this way
>
> This is not true. The final codeblock will contain
> exactly the same PCODE in both cases.

By smaller I've only meant the caller side. It
will be smaller because "{||}" string will not
have to be used each time. Admittedly this is
quite marginal.

>> you can very easily identify where your code
>> uses macro compilation.
>
> But you loose PROCNAME() information about the place where
> macro was compiled. It will be attached to hb_macroBlock()
> function. For some people it can be important information.

Good to know. Here I meant that I can much easily
grep for hb_macroBlock() than for '&', it's also
visually clearer/cleaner.

>> Maybe this won't qualify my as a Clipper-head,
>> but I always had a dislike for the '&' operator.
>> I'm currently hiding it with an STRCOMPILE()
>> macro, which does the same as hb_macroCompile().
>
> So for you hb_macroBlock() will be only faster version of your
> own function STRCOMPILE(). You will not lost any additional
> information attached to compiled macro because you do not have
> it now when you use STRCOMPILE().
> OK, I'll commit this function ASAP.

Very nice, thanks a lot :)

[ Just some food for thought: I have one place where
I had to write my own little macro compiler, because
I'm compiling macros coming from external files (namely
printing templates). It would be much better to use
the Harbour macro compiling facilities instead of my
bad attempt, but my concern is security and app integrity.
Meaning, if I'd just use simple Harbour macro evaluation,
some uncontrolled scripts could just as well call any
functions in my app, read any PUBLICs, or even fiddle
with the open tables, use file IO. What would be needed
here is probably some kind of sandboxing facility, where
given macro would only be able to call a given set of
functions, or some other ways to set its boundaries.
Pretty far reaching I guess, but the problem is there. ]

Brgds,
Viktor

From druzus at acn.waw.pl  Tue Oct 14 05:51:31 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 14 05:51:47 2008
Subject: [Harbour] 2008-10-14 11:51 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081014095131.GA14059@34-mo7-2.acn.waw.pl>

2008-10-14 11:51 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapi.h
  * harbour/source/vm/macro.c
    * added missing const attribute to hb_macroCompile() parameter
    + added new .prg function:
         hb_macroBlock( <cExpr> ) -> <bCode>
      which converts macro expression to codeblock. New codeblocks
      do not inherit hb_macroBlock() caller scope/attributes.

best regards
Przemek
From mbelgrano at deltain.it  Tue Oct 14 06:06:36 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Oct 14 06:07:15 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <9257026e0810132304n3409bbc3sfdaedb5d4cce7587@mail.gmail.com>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com><20081011213831.GA5481@34-mo7-2.acn.waw.pl><48F32F82.5060805@dbtopas.lt><20081013201051.GA13327@34-mo7-2.acn.waw.pl>
	<9257026e0810132304n3409bbc3sfdaedb5d4cce7587@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F06D@SRV02.deltain.net>

I also vote for adding this code to the contrib lib
IMO is possible:
add a Driver Structure with ability to be loaded at runtime .
And a class for complete access to DMBS merging actual (hbodbc, hbmysql,
hbpgsql, hbfbird) contrib libs?
About The rdd syntax the insert, update, 
can be made "Update By Statement generating generic SQL (INSERT INTO ..
VALUES ..) If update by recordset is too difficult
The locking can be ignored and managed by dbms so only neterr must be
implented

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Lorenzo
Fiorini
Sent: Tuesday, October 14, 2008 8:04 AM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] A standard for the Harbour's SQL libs

On Mon, Oct 13, 2008 at 10:10 PM, Przemyslaw Czerpak <druzus@acn.waw.pl>
wrote:

> Very nice peace of code which is also very good start point for
> multi RDBMS RDD API. I'll look closer into it in spare time.
> Lorenzo asked about common OOP interface for different RDBMS
> and this is rather starting code for Harbour SQLRDD which seems
> to be much more interesting for people who want to keep existing
> Clipper/xBase syntax.

I'm not a C developer so I cannot say much about the code.
What about adding sdd code to the contrib lib?

Fitting SQL in the RDD standard is easy in the "consuming" loop.
Pratically every SQL query is processed using do while !eof() ...
dbskip() ... enddo so having the possibility to access columns values
using alias->field syntax makes code more familiar.

I see not so easy apply the RDD syntax to the insert, update, locking
and query logic.

However as I said we can be a multi-layers and multi-paths approach:
C interfaces -> PRG classes -> USRRDDs
or
C interfaces -> SQLBASE
or
C interfaces -> C RDDs -> SQLBASE
or
...

Clearly this also makes things much more complex than I thought when I
started the thread.

best regards,
Lorenzo
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Tue Oct 14 06:12:36 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 06:12:46 2008
Subject: [Harbour] 2008-10-14 11:51 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081014095131.GA14059@34-mo7-2.acn.waw.pl>
References: <20081014095131.GA14059@34-mo7-2.acn.waw.pl>
Message-ID: <A3189E85-F1CC-4CA2-BB6D-73F2255C8DEC@syenar.hu>

Perfect and many thanks, I'll try it out a bit later today.

Brgds,
Viktor

On 2008.10.14., at 11:51, Przemyslaw Czerpak wrote:

> 2008-10-14 11:51 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbapi.h
>  * harbour/source/vm/macro.c
>    * added missing const attribute to hb_macroCompile() parameter
>    + added new .prg function:
>         hb_macroBlock( <cExpr> ) -> <bCode>
>      which converts macro expression to codeblock. New codeblocks
>      do not inherit hb_macroBlock() caller scope/attributes.
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From M.Horodyski at pzuzycie.com.pl  Tue Oct 14 06:14:28 2008
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Tue Oct 14 06:15:04 2008
Subject: [Harbour] RE: Harbour Digest, Vol 24, Issue 74
In-Reply-To: <NLB02FEyh133tYwlib40000864b@gatein.pzuzycie.com.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C95016E3BBC@PINK.zycie.pzu>

>Date: Mon, 13 Oct 2008 11:16:41 -0300
>From: "Rodrigo Miguel" <rodrmigu@gmail.com>
>Subject: [Harbour] Re: A standard for the Harbour's SQL libs Click to
flag this post

...
>Hi Lorenzo,
>I wrote some OCI oracle native code, that's a working code, but need
...

>by Lorenzo Fiorini-2 Oct 11, 2008; 02:59pm :: Rate this Message: (use
...
>Do you actually use any SQL DBS with Harbour?
>Do you know JDBC?
>Are there Harbour/ODBC users here?
...

I use many Oracle databases via Mediator Server and via Ado with
xHarbour.
And I'm waited to HDBC with acces (directly via OCI, without agent) to
Oracle from Harbour.

Regards,
Marek Horodyski
From mbelgrano at deltain.it  Tue Oct 14 06:19:07 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Oct 14 06:19:40 2008
Subject: [Harbour] RE: Harbour Digest, Vol 24, Issue 74
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C95016E3BBC@PINK.zycie.pzu>
References: <NLB02FEyh133tYwlib40000864b@gatein.pzuzycie.com.pl>
	<FFAFD6EA63A3FC4784FBDA52BE7A7C95016E3BBC@PINK.zycie.pzu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F06F@SRV02.deltain.net>


>I use many Oracle databases via Mediator Server and via Ado with
>xHarbour.
>And I'm waited to HDBC with acces (directly via OCI, without agent) to
>Oracle from Harbour.

What performance of mediator,ado?
From druzus at acn.waw.pl  Tue Oct 14 06:20:38 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 14 06:20:55 2008
Subject: [Harbour] Macro to block conversion function
In-Reply-To: <35911F37-4173-4378-84C2-6461AF64F5EC@syenar.hu>
References: <5F302FD5-EEA4-4FC2-95F6-4779DB1108AA@syenar.hu>
	<DEAC3BF80838408BA9D7A13FF71EB987@emag>
	<67E728F3-BA72-47E1-8C2D-1D268D313444@syenar.hu>
	<20081014093608.GA20352@34-mo7-2.acn.waw.pl>
	<35911F37-4173-4378-84C2-6461AF64F5EC@syenar.hu>
Message-ID: <20081014102038.GA25070@34-mo7-2.acn.waw.pl>

On Tue, 14 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

>> Yes, hb_macroBlock() is faster. The difference depends on
>> macro body. For very simplt macros, f.e. ".T." it's:
>> empty loop overhead:          0.09
>>  macro compilation:          2.44
>>      hb_macroblock:          1.43
>> For more complex macros the difference is smaller of course
>> because the cost of macro compilation is the most significant
>> one.
> Great!

For real filter macros which are much bigger the difference is
nearly 0.

> [ Just some food for thought: I have one place where
> I had to write my own little macro compiler, because
> I'm compiling macros coming from external files (namely
> printing templates). It would be much better to use
> the Harbour macro compiling facilities instead of my
> bad attempt, but my concern is security and app integrity.
> Meaning, if I'd just use simple Harbour macro evaluation,
> some uncontrolled scripts could just as well call any
> functions in my app, read any PUBLICs, or even fiddle
> with the open tables, use file IO. What would be needed
> here is probably some kind of sandboxing facility, where
> given macro would only be able to call a given set of
> functions, or some other ways to set its boundaries.
> Pretty far reaching I guess, but the problem is there. ]

This problem is also with .hrb files and code compiled by
compiler library. Using set of "safe" functions does not
resolve the problem fully. It's also necessary to block
macro compilation or attach the restriction definitions
to macro compiled code so it will be respected during execution.
This will cause RT overhead but can be implemented also for
already compiled code like in .hrb files. We can also add
PCODE parser which will check if given code does not contain
some forbidden by us constructions or function calls.
Such solution will also work for .hrb files. We can also use
both and parce PCODE to check if we have to attach restriction
definition to given code.
Anyhow it will be hard for user to define good restriction
definition without blocking a lot of functionality.
I plan to return to this subject when I will work on embedding
Harbour to apache WWW server (mod_hrb).

best regards,
Przemek
From mbelgrano at deltain.it  Tue Oct 14 06:23:09 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Oct 14 06:23:44 2008
Subject: [Harbour] 2008-10-13 20:21 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081013182137.GA28575@34-mo7-2.acn.waw.pl>
References: <20081013182137.GA28575@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F070@SRV02.deltain.net>

Compliment you have made point six of your todo

>   6, HB_LIBLOAD()/__HRBLOAD() may not be MT safe in some cases.
>      Before they will not be resolved please try to not use this
>      functions when other threads are executed.

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Monday, October 13, 2008 8:22 PM
To: harbour@harbour-project.org
Subject: [Harbour] 2008-10-13 20:21 UTC+0200 Przemyslaw Czerpak(druzus/at/priv.onet.pl)

2008-10-13 20:21 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/wacore.c
    ; updated comments about xbase++ behavior in dbRelease()

  * harbour/include/hbvm.h
  * harbour/source/vm/hvm.c
  * harbour/source/vm/dynlibhb.c
  * harbour/source/vm/runner.c
    ! added MT protection for HB_LIBLOAD()/HB_LIBFREE() and
      HB_HRBLOAD()/HB_HRBUNLOAD(). Please remember that you should
      not use any external LoadLibrary() functions because they are
      not protected for clean PCODE modules loading/unloading even
      in ST mode. Using them can cause HVM internal structure corruption.
      If we have such functions in contrib then they should be redirected
      to our HVM ones.
      There is still one problem in MT mode which has to be resolved yet.
      When dynamic library containing PCODE using static variables
      is loaded 1-st time then it will force resizing of internal array
      with static variables. If in exactly the same moment some other
      thread operates on static variable then it may cause corruption.
      To resolve this problem we will have to divide continuous memory
      block common for all modules where we store all static variables
      into separated blocks bound with each PCODE module (symbol table).

  * harbour/source/vm/dynlibhb.c
    + added support for DLL loading/unloading in OS2 builds.
      Based on xHarbour code by Maurilio Longo - please test.

best regards
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Tue Oct 14 06:48:42 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 14 06:49:00 2008
Subject: [Harbour] 2008-10-13 20:21 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F070@SRV02.deltain.net>
References: <20081013182137.GA28575@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F070@SRV02.deltain.net>
Message-ID: <20081014104842.GA9526@34-mo7-2.acn.waw.pl>

On Tue, 14 Oct 2008, Massimo Belgrano wrote:

Hi Massimo,

> Compliment you have made point six of your todo
> >   6, HB_LIBLOAD()/__HRBLOAD() may not be MT safe in some cases.
> >      Before they will not be resolved please try to not use this
> >      functions when other threads are executed.

Not fully:

>       There is still one problem in MT mode which has to be resolved yet.
>       When dynamic library containing PCODE using static variables
>       is loaded 1-st time then it will force resizing of internal array
>       with static variables. If in exactly the same moment some other
>       thread operates on static variable then it may cause corruption.
>       To resolve this problem we will have to divide continuous memory
>       block common for all modules where we store all static variables
>       into separated blocks bound with each PCODE module (symbol table).

This also have to be done and it's the most important part.
Rest was trivial and even before my modifications user could
use own MUTEX to serialize access to this functions.

Anyhow in last weeks I cleaned all other critical points from my MT
TODO/TOFIX lists. Here are current lists:

TOFIX:
   1. Tracelog is not MT safe - not used in standard builds so it's
      not a problem for normal users.
   2. DEBUGGER is not MT safe. Now do not use debugger in code with
      more then one thread active or it will crash.
      Before we will touch this code please think how MT debugger should
      work.
   3. PROFILLER is not MT safe. It's optional code disabled by default.
      Before we will touch it please think how it should work for MT
      programs.

   4. Divide static array into symbol tables
      When dynamic library containing PCODE using static variables
      is loaded 1-st time then it will force resizing of internal array
      with static variables. If in exactly the same moment some other
      thread operates on static variable then it may cause corruption.
      To resolve this problem we will have to divide continuous memory
      block common for all modules where we store all static variables
      into separated blocks bound with each PCODE module (symbol table).

   5. hb_threadQuitRequest() can be ignored by thread in some cases
      due to race condition. It may happen if thread will overwrite
      request send by caller simultaneously, f.e. by BREAK.
      I can resolve it but we can also leave it as is and document
      such behavior as expected or even remove this function. Killing
      other threads in such way is dangerous and can be used only
      for some simple situation. It's much safer when user uses his
      own mechanism to terminate treads in some safe for his code places.

TODO:
   1. We should check contrib code and eliminate non MT safe code
      or document non MT safe functions.
   2. Possible TODO: make RDD settings (rddInfo()) thread local.
      Should we make it?
   3. Thread priorities - is it really necessary?

best regards
Przemek
From sscc at mweb.co.za  Tue Oct 14 06:58:45 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Oct 14 06:59:08 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
Message-ID: <48F47B65.9040409@mweb.co.za>

To all

Lorenzo Fiorini wrote:

> Today we have hbodbc, hbmysql, hbpgsql, hbfbird contrib libs and
> probably more in the future.
> Their pourpose is to connect Harbour to SQL databases but they use
> different ( class ) interfaces.

I would venture that many Harbour programmers use these SQL databases 
to route around the DOS share based problems of the DBF world (well 
certainly the free databases).

Perhaps the discussion could include some ideas for NETRDD mentioned 
in the past. I have used LetoDB and it seems quite good, but I find 
the coding a bit opaque (particularly the C) and it is a bit on the 
"fringe" of the community.

I guess the biggest obstacle has been removed by Przemek, which was 
multithreading which would be required for a server (particularly on 
Windows which lacks a reasonable fork call).

Sockets appear to me to be reliable in Harbour but I think Przemek has 
alluded to problems with them? I don't know what they are. I know ADS 
uses UDP, I'm not sure why.

Do we have some form of RPC? I thought so but I can't find anything. 
We need to consider "serialising" the data in the current record of a 
file, not strictly a return value in the RPC sense. I guess also we 
need actually a copy of the current workarea data in the server, as we 
would like to know about BOF(), EOF() etc. Clipper errors need also to 
be "serialised" and returned/avaialable when something fails.

We have the USER RDD to allow a "simple" interface on the client side.

Any thoughts?

Regards
Alex
From M.Horodyski at pzuzycie.com.pl  Tue Oct 14 07:08:21 2008
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Tue Oct 14 07:08:42 2008
Subject: [Harbour] RE: Harbour Digest, Vol 24, Issue 77
In-Reply-To: <NLB01FEx3G5aYY61LEd00004334@gatein.pzuzycie.com.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C95016E3C4C@PINK.zycie.pzu>

>From: "Massimo Belgrano" <mbelgrano@deltain.it>
...
>
>What performance of mediator,ado?

When I use transference data from DBF, it is slow than dbf's (very
slow), but when data are "pure sql", then it is fast and very
comfortable in use. Via Mediator we can be use data this and/or this
(sql and xBase). I use data via ADO only when my account in remote
databases no has capability to create tables (Mediator create 4 tables
or must have 4 views on loging schema). Tausends users withot problem in
efficienty.

Regards,
Marek Horodyski
 
From toninhofwi at yahoo.com.br  Tue Oct 14 07:37:52 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Oct 14 07:36:22 2008
Subject: [Harbour] Inconsistency in DATA Types
Message-ID: <km09f4dh2uf58ic5c37rdjddr0assdvgb8@4ax.com>

Hi folks,

I don?t know if this is an feature or a problem. If I have

DATA bDraw AS CODEBLOCK INIT nil

bDraw accept NIL without problem, but I can?t set it to nil again. If
I do:

oClass:bDraw = nil

I receive an error.

IMHO codeblock types can receive nil to easy checking, like:

if !( oClass:bDraw == nil )
   Eval( oClass:bDraw )
endif


Thanks and best regards,

Toninho.

__________________________________________________
Fa?a liga??es para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From clipper5_y2d at versateladsl.be  Tue Oct 14 07:44:05 2008
From: clipper5_y2d at versateladsl.be (frank van nuffel)
Date: Tue Oct 14 07:44:23 2008
Subject: [Harbour] Inconsistency in DATA Types
References: <km09f4dh2uf58ic5c37rdjddr0assdvgb8@4ax.com>
Message-ID: <999F2B3B5442407284B2FAC0C6B7CD86@uwlhldv32rnqu4>

Hi Toninho, and all

to elaborate on this, it might be a good idea to introduce syntax for
nullable (nilable) types, just like in C#

it would suffice to assert a declaration with type info, followed by a
question mark

DATA bDraw AS CODEBLOCK? INIT nil

Then this var can be set to a CODEBLOCK or to NIL at any time; just fyi,
i've come to incorporate such syntax in my (o)ceans' project and it works
like a charm

This syntax can be extended to type assertions for arguments to
functions/methods where another nuance in meaning is that this argument is
optional; i've gone one step further in (o)ceans' to imply that all args
which are not nullable are by default 'required' arguments

The TYPE? syntax was taken from C#

my two cents,

frank

----- Original Message ----- 
From: "Toninho@fwi" <toninhofwi@yahoo.com.br>
To: <harbour@harbour-project.org>
Sent: Tuesday, October 14, 2008 1:37 PM
Subject: [Harbour] Inconsistency in DATA Types


Hi folks,

I don?t know if this is an feature or a problem. If I have

DATA bDraw AS CODEBLOCK INIT nil

bDraw accept NIL without problem, but I can?t set it to nil again. If
I do:

oClass:bDraw = nil

I receive an error.

IMHO codeblock types can receive nil to easy checking, like:

if !( oClass:bDraw == nil )
   Eval( oClass:bDraw )
endif


Thanks and best regards,

Toninho.

__________________________________________________
Fa?a liga??es para outros computadores com o novo Yahoo! Messenger
http://br.beta.messenger.yahoo.com/
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From sscc at mweb.co.za  Tue Oct 14 07:48:21 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Oct 14 07:48:45 2008
Subject: [Harbour] Inconsistency in DATA Types
In-Reply-To: <km09f4dh2uf58ic5c37rdjddr0assdvgb8@4ax.com>
References: <km09f4dh2uf58ic5c37rdjddr0assdvgb8@4ax.com>
Message-ID: <48F48705.1030906@mweb.co.za>

Toninho@fwi wrote:

> IMHO codeblock types can receive nil to easy checking, like:
> 
> if !( oClass:bDraw == nil )
>    Eval( oClass:bDraw )
> endif

I agree with you, but I also think other "types" of variables should 
accept NIL as well.

Regards
Alex
From mbelgrano at deltain.it  Tue Oct 14 07:51:16 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Oct 14 07:51:27 2008
Subject: R: Re: RE: [Harbour] 2008-10-13 20:21 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
Message-ID: <000b01c92df3$2adb6a64$0400a8c0@deltain.net>

Can i remember multi windows gt?

----- Messaggio originale -----
Da: Przemyslaw Czerpak <druzus@acn.waw.pl>
Inviato: marted? 14 ottobre 2008 12.55
A: Harbour Project Main Developer List. <harbour@harbour-project.org>
Oggetto: Re: RE: [Harbour] 2008-10-13 20:21 UTC+0200 PrzemyslawCzerpak(druzus/at/priv.onet.pl)

On Tue, 14 Oct 2008, Massimo Belgrano wrote:

Hi Massimo,

> Compliment you have made point six of your todo
> >   6, HB_LIBLOAD()/__HRBLOAD() may not be MT safe in some cases.
> >      Before they will not be resolved please try to not use this
> >      functions when other threads are executed.

Not fully:

>       There is still one problem in MT mode which has to be resolved yet.
>       When dynamic library containing PCODE using static variables
>       is loaded 1-st time then it will force resizing of internal array
>       with static variables. If in exactly the same moment some other
>       thread operates on static variable then it may cause corruption.
>       To resolve this problem we will have to divide continuous memory
>       block common for all modules where we store all static variables
>       into separated blocks bound with each PCODE module (symbol table).

This also have to be done and it's the most important part.
Rest was trivial and even before my modifications user could
use own MUTEX to serialize access to this functions.

Anyhow in last weeks I cleaned all other critical points from my MT
TODO/TOFIX lists. Here are current lists:

TOFIX:
   1. Tracelog is not MT safe - not used in standard builds so it's
      not a problem for normal users.
   2. DEBUGGER is not MT safe. Now do not use debugger in code with
      more then one thread active or it will crash.
      Before we will touch this code please think how MT debugger should
      work.
   3. PROFILLER is not MT safe. It's optional code disabled by default.
      Before we will touch it please think how it should work for MT
      programs.

   4. Divide static array into symbol tables
      When dynamic library containing PCODE using static variables
      is loaded 1-st time then it will force resizing of internal array
      with static variables. If in exactly the same moment some other
      thread operates on static variable then it may cause corruption.
      To resolve this problem we will have to divide continuous memory
      block common for all modules where we store all static variables
      into separated blocks bound with each PCODE module (symbol table).

   5. hb_threadQuitRequest() can be ignored by thread in some cases
      due to race condition. It may happen if thread will overwrite
      request send by caller simultaneously, f.e. by BREAK.
      I can resolve it but we can also leave it as is and document
      such behavior as expected or even remove this function. Killing
      other threads in such way is dangerous and can be used only
      for some simple situation. It's much safer when user uses his
      own mechanism to terminate treads in some safe for his code places.

TODO:
   1. We should check contrib code and eliminate non MT safe code
      or document non MT safe functions.
   2. Possible TODO: make RDD settings (rddInfo()) thread local.
      Should we make it?
   3. Thread priorities - is it really necessary?

best regards
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Tue Oct 14 08:44:24 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 14 08:44:43 2008
Subject: [Harbour] Inconsistency in DATA Types
In-Reply-To: <km09f4dh2uf58ic5c37rdjddr0assdvgb8@4ax.com>
References: <km09f4dh2uf58ic5c37rdjddr0assdvgb8@4ax.com>
Message-ID: <20081014124424.GA3307@34-mo7-2.acn.waw.pl>

On Tue, 14 Oct 2008, Toninho@fwi wrote:

Hi Toninho,

> I don?t know if this is an feature or a problem. If I have
> DATA bDraw AS CODEBLOCK INIT nil

INIT clause is unprotected and allow to assign any value with
declared type respecting.

> bDraw accept NIL without problem, but I can?t set it to nil again. If
> I do:
> oClass:bDraw = nil
> I receive an error.

Exactly and it's expected behavior fully Class(y) compatible.

> IMHO codeblock types can receive nil to easy checking, like:
> if !( oClass:bDraw == nil )
>    Eval( oClass:bDraw )
> endif

You can say the same about any other types just like I can say
that I do not agree with you because I'm happy that I do not have
to make such checking in my code because I'm always sure that
after valid initialization variable always contains expected type.
You can use AS USUAL if you want to assign NIL value or you can use:
   #translate AS <!type!> =>
and make from type checking source code decoration just like in
xHarbour where there is no type checking at all.
We can also intorduce additional declaration which will allow to set NULL.
I've just seen Frank message about using <type>? but it will change the
PP semantic because ? joins expressions so rules like
   #translate AS <type> =>
will not works as expected in some cases and code like:

   DATA bDraw AS CODEBLOCK? INIT nil

will be translated to:

   DATA bDraw nil

so I'd prefer sth different what will keep current PP syntax.
Even such minor modification resolved the problem.
   DATA bDraw AS ?CODEBLOCK INIT nil

But we can also use sth what will allow to mix types, f.e.:
   DATA bDraw AS CODEBLOCK | NIL

or we can support additionally: AS {<type> [,<type>]}, f.e.:
   DATA bDraw AS {CODEBLOCK}
   DATA bDraw AS {CODEBLOCK,NIL}

Think about it but base type checking should not be touched.
Otherwise IMO we should remove it at all because it stops to
give expected RT protection and we can keep it as source code
decoration just like in xHarbour.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Oct 14 09:04:32 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 14 09:04:50 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <48F47B65.9040409@mweb.co.za>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<48F47B65.9040409@mweb.co.za>
Message-ID: <20081014130432.GB3307@34-mo7-2.acn.waw.pl>

On Tue, 14 Oct 2008, Alex Strickland wrote:

Hi Alex,

> Sockets appear to me to be reliable in Harbour but I think Przemek has 
> alluded to problems with them? I don't know what they are. I know ADS uses 
> UDP, I'm not sure why.

Now the biggest problem is lack of C level API and some missing
functionality. It also should be changed to cover some small differences
and behavior strictly related to OS. Below is proposition for Harbour inet
API. I created this list some time ago but so far I haven't time to finish
implementation.

best regards,
Przemek


void     hb_socketInit( void );
void     hb_socketCleanup( void );

PHB_ITEM hb_socketNew( int iTimeOut );
int      hb_socketClose( PHB_ITEM pSocket );
FHANDLE  hb_socketHandle( PHB_ITEM pSocket );
int      hb_socketStatus( PHB_ITEM pSocket );
int      hb_socketErrorCode( PHB_ITEM pSocket );
char *   hb_socketErrorDesc( PHB_ITEM pSocket );
void     hb_socketClearError( PHB_ITEM pSocket );
int      hb_socketCount( PHB_ITEM pSocket );
char *   hb_socketAddress( PHB_ITEM pSocket, char * szHostIP );
int      hb_socketPort( PHB_ITEM pSocket );
int      hb_socketGetTimeOut( PHB_ITEM pSocket );
int      hb_socketSetTimeOut( PHB_ITEM pSocket, int iTimeOut );
int      hb_socketGetTimeLimit( PHB_ITEM pSocket );
int      hb_socketSetTimeLimit( PHB_ITEM pSocket, int iTimeOut );
PHB_ITEM hb_socketCallBack( PHB_ITEM pSocket, PHB_ITEM pBlock );
void     hb_socketClearCallBack( PHB_ITEM pSocket );
int      hb_socketSelect( PHB_ITEM aRdSock, PHB_ITEM aWrSock,
                          PHB_ITEM aExSock, int iTimeOut );
int      hb_socketRecv( PHB_ITEM pSocket, int iMode,
                        BYTE * pBuffer, int iLen );
BYTE *   hb_socketRecvUntil( PHB_ITEM pSocket, const BYTE * szStop,
                             int iMaxSize, int * piLen );
BYTE *   hb_socketRecvMUntil( PHB_ITEM pSocket, const BYTE ** szStop, int iCount,
                              int iMaxSize, int * piLen );
int      hb_socketDataReady( PHB_ITEM pSocket, int iTimeOut );
int      hb_socketCanWrite( PHB_ITEM pSocket, int iTimeOut ); /* new */
int      hb_socketSend( PHB_ITEM pSocket, int iMode,
                        BYTE * pBuffer, int iLen );

PHB_ITEM hb_socketGetHosts( const char * szHostName );
PHB_ITEM hb_socketGetAlias( const char * szHostName );
char *   hb_socketGetHostIP( const char * szHostName, char * szHostIP );
PHB_ITEM hb_socketServer( PHB_ITEM pSocket, int iPort, char * szAddrIP, int iListenQueue );
PHB_ITEM hb_socketAccept( PHB_ITEM pSocket );
PHB_ITEM hb_socketConnect( PHB_ITEM pSocket, const char * szHost, int iPort );
PHB_ITEM hb_socketConnectIP( PHB_ITEM pSocket, const char * szHostIP, int iPort );
BOOL     hb_socketExists( PHB_ITEM pSocket );
PHB_ITEM hb_socketDGramNew( BOOL fBoradCast );
PHB_ITEM hb_socketDGramBindNew( int iPort, const char * szAddrIP, BOOL fBoradCast,
                                const char * szMulticastAddr );
int      hb_socketDGramSend( PHB_ITEM pSocket, const char * szHostIP, int iPort,
                             BYTE * pBuffer, int iLen );
int      hb_socketDGramRecv( PHB_ITEM pSocket, BYTE * pBuffer, int iLen );

const char * hb_socketEOL( void );
From harbour.01 at syenar.hu  Tue Oct 14 09:27:54 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 09:28:18 2008
Subject: [Harbour] 2008-10-13 20:21 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081014104842.GA9526@34-mo7-2.acn.waw.pl>
References: <20081013182137.GA28575@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F070@SRV02.deltain.net>
	<20081014104842.GA9526@34-mo7-2.acn.waw.pl>
Message-ID: <CD1F2602-113D-4E0B-8BA2-355D2E161832@syenar.hu>

>
Hi Przemek,

>   2. DEBUGGER is not MT safe. Now do not use debugger in code with
>      more then one thread active or it will crash.
>      Before we will touch this code please think how MT debugger  
> should
>      work.

I've run into this be accident just yesterday. I've
compiled my app with -b (partially, then fully) and
used HB_BUILD_DEBUG=yes, which enabled debug mode in
MSVC, and resulting app was crashing probably in an
hb_x*() function, in a hb_gc*() function with an
RTE saying the "Object Destructor Failure". I'll
rephrase this error, because it sounds like something
OOP related, while it's not. (should be "Memory object
destructor failure")

To make things more complicated, this happened
in 64-bit mode, right on startup, and in one of
my .c functions (IniLoad()). The app is not using
multiple threads. This .c function looks safe, and
uses a pair of hb_xgrab()/hb_retclen_buffer() calls.
BTW, Harbour was compiled with -DHB_NO_DEBUG, and
-DHB_FM_STATISTICS_OFF.

When I turned off debugging, the problem went away.

If you want, I can redo some tests to make the
circumstances cleaner.

> TODO:
>   1. We should check contrib code and eliminate non MT safe code
>      or document non MT safe functions.
>   2. Possible TODO: make RDD settings (rddInfo()) thread local.
>      Should we make it?

IMO, it should be global. But I couldn't find
any detailed documentation on this function. We have
to take into account though, that some externally
dependent RDDs may not support multiple configurations per
thread, also I'd think this would lead to chaos
in real life, and overkill flexibility and source
of bad problems.

>   3. Thread priorities - is it really necessary?

IMO, it would be useful. No real life personal need
yet from my side, but I could imagine using IDLE
initially, and maybe even more levels for a server-side
app.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Oct 14 09:33:18 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 09:33:29 2008
Subject: [Harbour] Inconsistency in DATA Types
In-Reply-To: <20081014124424.GA3307@34-mo7-2.acn.waw.pl>
References: <km09f4dh2uf58ic5c37rdjddr0assdvgb8@4ax.com>
	<20081014124424.GA3307@34-mo7-2.acn.waw.pl>
Message-ID: <93D8AEA2-9B75-4C14-B027-A0CDC859914A@syenar.hu>

> so I'd prefer sth different what will keep current PP syntax.
> Even such minor modification resolved the problem.
>   DATA bDraw AS ?CODEBLOCK INIT nil
>
> But we can also use sth what will allow to mix types, f.e.:
>   DATA bDraw AS CODEBLOCK | NIL
>
> or we can support additionally: AS {<type> [,<type>]}, f.e.:
>   DATA bDraw AS {CODEBLOCK}
>   DATA bDraw AS {CODEBLOCK,NIL}

or maybe if possible, simply:
DATA bDraw AS CODEBLOCK, NIL

Otherwise:
DATA bDraw AS CODEBLOCK | NIL

"?CODEBLOCK", "CODEBLOCK?" looks very odd to me,
it also makes searching for code less efficient.

> Think about it but base type checking should not be touched.
> Otherwise IMO we should remove it at all because it stops to
> give expected RT protection and we can keep it as source code
> decoration just like in xHarbour.

Agreed.

Brgds,
Viktor

From maurilio.longo at libero.it  Tue Oct 14 09:33:55 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Oct 14 09:34:04 2008
Subject: [Harbour] 2008-10-13 20:21 UTC+0200
	Przemyslaw	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <CD1F2602-113D-4E0B-8BA2-355D2E161832@syenar.hu>
References: <20081013182137.GA28575@34-mo7-2.acn.waw.pl>	<AFB948164110ED43B5EB849E8DEEF03815F070@SRV02.deltain.net>	<20081014104842.GA9526@34-mo7-2.acn.waw.pl>
	<CD1F2602-113D-4E0B-8BA2-355D2E161832@syenar.hu>
Message-ID: <48F49FC3.1070101@libero.it>

Viktor, Przemyslaw,

Szak?ts Viktor wrote:
>>   3. Thread priorities - is it really necessary?
> 
> IMO, it would be useful. No real life personal need
> yet from my side, but I could imagine using IDLE
> initially, and maybe even more levels for a server-side
> app.
I use them in a couple of sources to have the process run in idle-time (it
does long batch runs).

That said, if you write something to have idle priority you can as well have a
full blown solution to change to higher priority levels.

Best regards.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Tue Oct 14 09:34:42 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 09:34:52 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <20081014130432.GB3307@34-mo7-2.acn.waw.pl>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com>
	<48F47B65.9040409@mweb.co.za>
	<20081014130432.GB3307@34-mo7-2.acn.waw.pl>
Message-ID: <46F0B47C-D698-44B9-B284-E0597BC4514A@syenar.hu>

Nice job.

Brgds,
Viktor

> void     hb_socketInit( void );
> void     hb_socketCleanup( void );
>
> PHB_ITEM hb_socketNew( int iTimeOut );
> int      hb_socketClose( PHB_ITEM pSocket );
> FHANDLE  hb_socketHandle( PHB_ITEM pSocket );
> int      hb_socketStatus( PHB_ITEM pSocket );
> int      hb_socketErrorCode( PHB_ITEM pSocket );
> char *   hb_socketErrorDesc( PHB_ITEM pSocket );
> void     hb_socketClearError( PHB_ITEM pSocket );
> int      hb_socketCount( PHB_ITEM pSocket );
> char *   hb_socketAddress( PHB_ITEM pSocket, char * szHostIP );
> int      hb_socketPort( PHB_ITEM pSocket );
> int      hb_socketGetTimeOut( PHB_ITEM pSocket );
> int      hb_socketSetTimeOut( PHB_ITEM pSocket, int iTimeOut );
> int      hb_socketGetTimeLimit( PHB_ITEM pSocket );
> int      hb_socketSetTimeLimit( PHB_ITEM pSocket, int iTimeOut );
> PHB_ITEM hb_socketCallBack( PHB_ITEM pSocket, PHB_ITEM pBlock );
> void     hb_socketClearCallBack( PHB_ITEM pSocket );
> int      hb_socketSelect( PHB_ITEM aRdSock, PHB_ITEM aWrSock,
>                          PHB_ITEM aExSock, int iTimeOut );
> int      hb_socketRecv( PHB_ITEM pSocket, int iMode,
>                        BYTE * pBuffer, int iLen );
> BYTE *   hb_socketRecvUntil( PHB_ITEM pSocket, const BYTE * szStop,
>                             int iMaxSize, int * piLen );
> BYTE *   hb_socketRecvMUntil( PHB_ITEM pSocket, const BYTE **  
> szStop, int iCount,
>                              int iMaxSize, int * piLen );
> int      hb_socketDataReady( PHB_ITEM pSocket, int iTimeOut );
> int      hb_socketCanWrite( PHB_ITEM pSocket, int iTimeOut ); /* new  
> */
> int      hb_socketSend( PHB_ITEM pSocket, int iMode,
>                        BYTE * pBuffer, int iLen );
>
> PHB_ITEM hb_socketGetHosts( const char * szHostName );
> PHB_ITEM hb_socketGetAlias( const char * szHostName );
> char *   hb_socketGetHostIP( const char * szHostName, char *  
> szHostIP );
> PHB_ITEM hb_socketServer( PHB_ITEM pSocket, int iPort, char *  
> szAddrIP, int iListenQueue );
> PHB_ITEM hb_socketAccept( PHB_ITEM pSocket );
> PHB_ITEM hb_socketConnect( PHB_ITEM pSocket, const char * szHost,  
> int iPort );
> PHB_ITEM hb_socketConnectIP( PHB_ITEM pSocket, const char *  
> szHostIP, int iPort );
> BOOL     hb_socketExists( PHB_ITEM pSocket );
> PHB_ITEM hb_socketDGramNew( BOOL fBoradCast );
> PHB_ITEM hb_socketDGramBindNew( int iPort, const char * szAddrIP,  
> BOOL fBoradCast,
>                                const char * szMulticastAddr );
> int      hb_socketDGramSend( PHB_ITEM pSocket, const char *  
> szHostIP, int iPort,
>                             BYTE * pBuffer, int iLen );
> int      hb_socketDGramRecv( PHB_ITEM pSocket, BYTE * pBuffer, int  
> iLen );
>
> const char * hb_socketEOL( void );
From toninhofwi at yahoo.com.br  Tue Oct 14 09:46:04 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Oct 14 09:44:38 2008
Subject: [Harbour] Inconsistency in DATA Types
In-Reply-To: <20081014124424.GA3307@34-mo7-2.acn.waw.pl>
References: <km09f4dh2uf58ic5c37rdjddr0assdvgb8@4ax.com>
	<20081014124424.GA3307@34-mo7-2.acn.waw.pl>
Message-ID: <u889f4lprhdj94arv85v9rhegrbih9kiv9@4ax.com>

Hi Przemek,

>Think about it but base type checking should not be touched.
>Otherwise IMO we should remove it at all because it stops to
>give expected RT protection and we can keep it as source code
>decoration just like in xHarbour.

Remove no. This is a nice feature and help me to find some hidden bugs
here.

I only ask if is possible a data receive nil *too*.

BTW I can change empty codeblock datas from nil to {||nil} and eval it
always, instead check it.


Thank you and best regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From druzus at acn.waw.pl  Tue Oct 14 10:16:05 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 14 10:16:33 2008
Subject: [Harbour] 2008-10-13 20:21 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <CD1F2602-113D-4E0B-8BA2-355D2E161832@syenar.hu>
References: <20081013182137.GA28575@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F070@SRV02.deltain.net>
	<20081014104842.GA9526@34-mo7-2.acn.waw.pl>
	<CD1F2602-113D-4E0B-8BA2-355D2E161832@syenar.hu>
Message-ID: <20081014141605.GA25006@34-mo7-2.acn.waw.pl>

On Tue, 14 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

[...]
> When I turned off debugging, the problem went away.
> If you want, I can redo some tests to make the
> circumstances cleaner.

I'll look at it. If I will not be able to isolate the
problem then I'll ask you for help.

>> TODO:
>>   1. We should check contrib code and eliminate non MT safe code
>>      or document non MT safe functions.
>>   2. Possible TODO: make RDD settings (rddInfo()) thread local.
>>      Should we make it?
> IMO, it should be global. But I couldn't find
> any detailed documentation on this function. We have

I was documenting some RDDI_* actions in xHarbour ChangeLog.
Just like many other RDD extensions. If someone can collect
them in one peace of documentation then it will be nice.

> to take into account though, that some externally
> dependent RDDs may not support multiple configurations per
> thread, also I'd think this would lead to chaos
> in real life, and overkill flexibility and source
> of bad problems.

Some features can be usable as thread local. F.e. I may want
to change default index extenssion only in one thread.
Or I may want to use multitag NTX indexes with large file support
(upto 4GB) and recono as hidden part for index key (just like in
CDX and NSX) but in other threads I may want to use standard NTX
format.
If RDD will not support thread local settings then they will be
global. It's enough to document it. It's even possible that they
will mix some settings and some of them will be thread loacl and
some others globals, f.e. when they are for global resources.
Just like in current SETs. If two threads shares GT window (now
all threads shares GT window) then SET COLOR or SET TYPEAHEAD
effects shared resource and effectively is shared between threads.

>>   3. Thread priorities - is it really necessary?
> IMO, it would be useful. No real life personal need
> yet from my side, but I could imagine using IDLE
> initially, and maybe even more levels for a server-side
> app.

In the moment when you run thread with higher then normal priority
you can kill multitasking. To make it weel you have to know what
exactly priority modification will cause. There are three main
settings which change thread priority:
   1. The frequency of giving CPU time
   2. The length of periods with CPU time
   3. The priority in critical sections
Additionally there are also guaranties that thread will receive CPU
time and that it will be taken of in some period.
In some OSes they can be controlled separately in some other not
and here the 3-rd point above is danger sometimes. Many OSes gives
unconditionl preference to thread with higher priority so they can
practically stops all other threads execution when they have to
use common critical sections. It's also the problem how to create
Harbour API which will hide differences between OSes. Only IDLE
priority can have the same meaning in all OSes. Other will introduce
some more or less important differences.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Oct 14 10:28:34 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 14 10:28:50 2008
Subject: [Harbour] 2008-10-13 20:21 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081014141605.GA25006@34-mo7-2.acn.waw.pl>
References: <20081013182137.GA28575@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F070@SRV02.deltain.net>
	<20081014104842.GA9526@34-mo7-2.acn.waw.pl>
	<CD1F2602-113D-4E0B-8BA2-355D2E161832@syenar.hu>
	<20081014141605.GA25006@34-mo7-2.acn.waw.pl>
Message-ID: <20081014142834.GA31381@34-mo7-2.acn.waw.pl>

On Tue, 14 Oct 2008, Przemyslaw Czerpak wrote:

Hi Viktor,

> [...]
> > When I turned off debugging, the problem went away.
> > If you want, I can redo some tests to make the
> > circumstances cleaner.
> I'll look at it. If I will not be able to isolate the
> problem then I'll ask you for help.

I used debugger with MT HVM without any problems as long
as I do not create new threads. I tested with -gc2 and -gc3.
I also do not seen anything what interacts with debugger
mode in MT HVM. The code is the same as for ST mode and it's
the reason why it does not work when more then one thread is
active.
Maybe you compiled also Harbour debugger library with -b switch
what causes recursion problem and GPF in both ST and MT modes.
If not then please try to reduce the problem.

best regards,
Przemek
From mbelgrano at deltain.it  Tue Oct 14 10:38:50 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Oct 14 10:39:37 2008
Subject: [Harbour] damaged dbf please help me
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F073@SRV02.deltain.net>

Wich is best tools/way for recover a damaged dbf cdx ?

Massimo Belgrano

From maurilio.longo at libero.it  Tue Oct 14 10:52:50 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Oct 14 10:53:00 2008
Subject: [Harbour] 2008-10-13 20:21 UTC+0200
	Przemyslaw	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081014141605.GA25006@34-mo7-2.acn.waw.pl>
References: <20081013182137.GA28575@34-mo7-2.acn.waw.pl>	<AFB948164110ED43B5EB849E8DEEF03815F070@SRV02.deltain.net>	<20081014104842.GA9526@34-mo7-2.acn.waw.pl>	<CD1F2602-113D-4E0B-8BA2-355D2E161832@syenar.hu>
	<20081014141605.GA25006@34-mo7-2.acn.waw.pl>
Message-ID: <48F4B242.7050303@libero.it>

Przemyslaw Czerpak wrote:
> In the moment when you run thread with higher then normal priority
> you can kill multitasking. To make it weel you have to know what

Ok, this goes to the programmer responsability, I can kill a system in a lot
of ways as soon as I start writing something :)

> exactly priority modification will cause. There are three main
> settings which change thread priority:
>    1. The frequency of giving CPU time
>    2. The length of periods with CPU time
>    3. The priority in critical sections

And to hide this complexity we create some high level definitions, that simply
guarantee to the harbour programmer that a higher priority will get more
'power' from the system. It will be his/her care to be sure that his/her
program is not killing the receiving OS.

> Harbour API which will hide differences between OSes. Only IDLE
> priority can have the same meaning in all OSes. Other will introduce
> some more or less important differences.
> 
Ok, so let's say we have PRI_IDLE, but as soon as we can go down a step we
need a way to go up a step to return to the regular class of priority and so
we have PRI_REGULAR.

Now, we could stop here and, as you say, this could cover 99% of all needs. I
say that we could have a third level, which is PRI_TIMECRITICAL (or any other
name) which gives a boost over PRI_REGULAR (for those cases... let's say a
thread to read a serial port).

I think that such a three levels system would be ok for every real need (apart
from some fancy cases, which can be solved by each programmer writing some C
code).

Sincerely.

Maurilio.

> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Tue Oct 14 10:56:03 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Oct 14 10:56:11 2008
Subject: [Harbour] 2008-10-13 20:21 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20081013182137.GA28575@34-mo7-2.acn.waw.pl>
References: <20081013182137.GA28575@34-mo7-2.acn.waw.pl>
Message-ID: <48F4B303.4050101@libero.it>

Przemyslaw Czerpak wrote:
>   * harbour/source/vm/dynlibhb.c
>     + added support for DLL loading/unloading in OS2 builds.
>       Based on xHarbour code by Maurilio Longo - please test.
> 
Przemyslaw,

I've never loaded pcode .DLLs on OS/2, I don't even know how to build one, but
 on xHarbour I'm able to load/unload 'regular' .DLLs without problems, but I'm
not using this code on any real program, though.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From druzus at acn.waw.pl  Tue Oct 14 12:21:12 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 14 12:21:28 2008
Subject: [Harbour] 2008-10-13 20:21 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <48F4B242.7050303@libero.it>
References: <20081013182137.GA28575@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F070@SRV02.deltain.net>
	<20081014104842.GA9526@34-mo7-2.acn.waw.pl>
	<CD1F2602-113D-4E0B-8BA2-355D2E161832@syenar.hu>
	<20081014141605.GA25006@34-mo7-2.acn.waw.pl>
	<48F4B242.7050303@libero.it>
Message-ID: <20081014162112.GA32128@34-mo7-2.acn.waw.pl>

On Tue, 14 Oct 2008, Maurilio Longo wrote:

Hi Maurilio,

> Ok, this goes to the programmer responsability, I can kill a system in a lot
> of ways as soon as I start writing something :)

But in this case the same program can works in different way on
different OSes so it stop to be portable.

> > exactly priority modification will cause. There are three main
> > settings which change thread priority:
> >    1. The frequency of giving CPU time
> >    2. The length of periods with CPU time
> >    3. The priority in critical sections
> And to hide this complexity we create some high level definitions, that simply
> guarantee to the harbour programmer that a higher priority will get more
> 'power' from the system. It will be his/her care to be sure that his/her
> program is not killing the receiving OS.

IMHO It does not guaranties anything in OS2 or Windows becasue you
cannot controll well the priority in this systems. It's rather feature
like: let's try and we see what will happen. Maybe side effects it will
not be critical.
The same Harbour priority values will make different things in different
OSes.

> Ok, so let's say we have PRI_IDLE, but as soon as we can go down a step we
> need a way to go up a step to return to the regular class of priority and so
> we have PRI_REGULAR.

This is not a problem of changing priority (though even this is OS
dependent and some things will not be fully portable) but replicating
compatible behavior between OS-es. The IDLE priority is esy to define
as do sth when other threads do nothing and can be quite easy reach
in all OSes and such priority does not change other threads behavior.
Other states different then regular one will change efectively change
the priority of other threads.

> Now, we could stop here and, as you say, this could cover 99% of all needs. I
> say that we could have a third level, which is PRI_TIMECRITICAL (or any other
> name) which gives a boost over PRI_REGULAR (for those cases... let's say a
> thread to read a serial port).
> I think that such a three levels system would be ok for every real need (apart
> from some fancy cases, which can be solved by each programmer writing some C
> code).

I'll add the interface for priority changing but it should be documented
that code which uses it may behaves differently in different OSes.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Oct 14 12:34:48 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 12:35:10 2008
Subject: [Harbour] 2008-10-13 20:21 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081014141605.GA25006@34-mo7-2.acn.waw.pl>
References: <20081013182137.GA28575@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F070@SRV02.deltain.net>
	<20081014104842.GA9526@34-mo7-2.acn.waw.pl>
	<CD1F2602-113D-4E0B-8BA2-355D2E161832@syenar.hu>
	<20081014141605.GA25006@34-mo7-2.acn.waw.pl>
Message-ID: <333F6B56-3EB3-49CF-B074-85C15B53B002@syenar.hu>

>
Hi Przemek,

> I was documenting some RDDI_* actions in xHarbour ChangeLog.
> Just like many other RDD extensions. If someone can collect
> them in one peace of documentation then it will be nice.

I've now got more time and found them in dbinfo.ch.
Well, you probably know better which one should be
thread local and app global. Looking at the list of
settings you must be right about making some or all
of them local.

[ I've found that I'm even using some of these you've
recommended long ago. But they blurred into the background
without their hb_ prefix :) now I've added them. ]

> In the moment when you run thread with higher then normal priority
> you can kill multitasking. To make it weel you have to know what
> exactly priority modification will cause. There are three main
> settings which change thread priority:
>   1. The frequency of giving CPU time
>   2. The length of periods with CPU time
>   3. The priority in critical sections
> Additionally there are also guaranties that thread will receive CPU
> time and that it will be taken of in some period.
> In some OSes they can be controlled separately in some other not
> and here the 3-rd point above is danger sometimes. Many OSes gives
> unconditionl preference to thread with higher priority so they can
> practically stops all other threads execution when they have to
> use common critical sections. It's also the problem how to create
> Harbour API which will hide differences between OSes. Only IDLE
> priority can have the same meaning in all OSes. Other will introduce
> some more or less important differences.

I wouldn't make it overly complicated, as I wrote in
one of the mails, probably an IDLE, NORMAL, HIGHER
level would be enough. Of course there is the task
to tune these to give similar "feels" under different
OSes, which may be a bit of a problem, at least for
HIGHER. IDLE is similar on all platform. I'd rather
not implement TIMECRITICAL on the .prg level though.
Harbour isn't a low level language, and with this
level, it's easy to mess things up, even unintentionally.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Oct 14 12:38:22 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 12:38:39 2008
Subject: [Harbour] 2008-10-13 20:21 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081014162112.GA32128@34-mo7-2.acn.waw.pl>
References: <20081013182137.GA28575@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F070@SRV02.deltain.net>
	<20081014104842.GA9526@34-mo7-2.acn.waw.pl>
	<CD1F2602-113D-4E0B-8BA2-355D2E161832@syenar.hu>
	<20081014141605.GA25006@34-mo7-2.acn.waw.pl>
	<48F4B242.7050303@libero.it>
	<20081014162112.GA32128@34-mo7-2.acn.waw.pl>
Message-ID: <03D5739A-C567-4E04-A6D8-07548F546CC3@syenar.hu>

>>
Hi Przemek,

>> Ok, so let's say we have PRI_IDLE, but as soon as we can go down a  
>> step we
>> need a way to go up a step to return to the regular class of  
>> priority and so
>> we have PRI_REGULAR.
>
> This is not a problem of changing priority (though even this is OS
> dependent and some things will not be fully portable) but replicating
> compatible behavior between OS-es. The IDLE priority is esy to define
> as do sth when other threads do nothing and can be quite easy reach
> in all OSes and such priority does not change other threads behavior.
> Other states different then regular one will change efectively change
> the priority of other threads.

I'd happily settle with a DEFAULT and an IDLE state then.

>> I think that such a three levels system would be ok for every real  
>> need (apart
>> from some fancy cases, which can be solved by each programmer  
>> writing some C
>> code).
>
> I'll add the interface for priority changing but it should be  
> documented
> that code which uses it may behaves differently in different OSes.

Well, please make it C level only, or .prg level but in the
__*() namespace in this case. Let's try to keep the .prg level
coherent as much as we can. Probably very few users will need
these extra levels anyway, and those are probably able to
tackle a few .c code to reach the special features.

Brgds,
Viktor


From myorg63 at mail.ru  Tue Oct 14 12:48:39 2008
From: myorg63 at mail.ru (Petr Chornyj)
Date: Tue Oct 14 12:48:50 2008
Subject: [Harbour] Inconsistency in DATA Types
In-Reply-To: <u889f4lprhdj94arv85v9rhegrbih9kiv9@4ax.com>
References: <km09f4dh2uf58ic5c37rdjddr0assdvgb8@4ax.com>
	<20081014124424.GA3307@34-mo7-2.acn.waw.pl>
	<u889f4lprhdj94arv85v9rhegrbih9kiv9@4ax.com>
Message-ID: <19977576.post@talk.nabble.com>




Toninho@fwi wrote:
> 
> 
> BTW I can change empty codeblock datas from nil to {||nil} and eval it
> always, instead check it.
> 
> 


Why you can't check it as
if hb_IsBlock( oClass:bDraw ) 
   Eval( oClass:bDraw ) 
endif

Regards,
Petr

-- 
View this message in context: http://www.nabble.com/Inconsistency-in-DATA-Types-tp19971735p19977576.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From maurilio.longo at libero.it  Tue Oct 14 13:02:58 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Oct 14 13:03:07 2008
Subject: [Harbour] 2008-10-13 20:21 UTC+0200
	Przemyslaw	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <333F6B56-3EB3-49CF-B074-85C15B53B002@syenar.hu>
References: <20081013182137.GA28575@34-mo7-2.acn.waw.pl>	<AFB948164110ED43B5EB849E8DEEF03815F070@SRV02.deltain.net>	<20081014104842.GA9526@34-mo7-2.acn.waw.pl>	<CD1F2602-113D-4E0B-8BA2-355D2E161832@syenar.hu>	<20081014141605.GA25006@34-mo7-2.acn.waw.pl>
	<333F6B56-3EB3-49CF-B074-85C15B53B002@syenar.hu>
Message-ID: <48F4D0C2.4060705@libero.it>

Szak?ts Viktor wrote:
> I wouldn't make it overly complicated, as I wrote in
> one of the mails, probably an IDLE, NORMAL, HIGHER
> level would be enough. Of course there is the task
> to tune these to give similar "feels" under different
> OSes, which may be a bit of a problem, at least for
> HIGHER. IDLE is similar on all platform. I'd rather

I agree.


> not implement TIMECRITICAL on the .prg level though.
> Harbour isn't a low level language, and with this
> level, it's easy to mess things up, even unintentionally.
> 
It is just the way the class above regular is called on OS/2 (where every
class has 15 subclasses, so it was just a name I was familiar with and not
something related to real-time processing); every other name is fine as long
as such a thread has more priority than a standard one. :)

Best regads.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Tue Oct 14 13:14:47 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 13:14:59 2008
Subject: [Harbour] 2008-10-13 20:21 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081014142834.GA31381@34-mo7-2.acn.waw.pl>
References: <20081013182137.GA28575@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F070@SRV02.deltain.net>
	<20081014104842.GA9526@34-mo7-2.acn.waw.pl>
	<CD1F2602-113D-4E0B-8BA2-355D2E161832@syenar.hu>
	<20081014141605.GA25006@34-mo7-2.acn.waw.pl>
	<20081014142834.GA31381@34-mo7-2.acn.waw.pl>
Message-ID: <A8F52CE2-BDB2-4CE7-99E1-4D8D3D756669@syenar.hu>

Hi Przemek,

I've reduced the problem to this:
--- make.bat
 > C:\devl\hbvc-1.1\bin\harbour test.prg -n -b
 > cl -IC:\devl\hbvc-1.1\include test.c /link /subsystem:CONSOLE / 
LIBPATH:C:\devl\hbvc-1.1\lib shell32.lib hbcpage.lib hbdebug.lib  
hbvmmt.lib hbrtl.lib gtcgi.lib gtgui.lib gtpca.lib gtstd.lib gtwin.lib  
gtwvt.lib hblang.lib hbrdd.lib hbmacro.lib hbpp.lib rddntx.lib  
rddcdx.lib rddfpt.lib hbhsx.lib hbsix.lib hbcommon.lib hbpcre.lib  
hbzlib.lib user32.lib wsock32.lib advapi32.lib gdi32.lib
---

--- test.prg
PROC MAIN()

TESTCALL()

#pragma BEGINDUMP

HB_FUNC( TESTCALL )
{
}

#pragma ENDDUMP
---

This is happening with MSVS2008 32-bit. _only_
when linking hbvmmt _and_ using -b Harbour switch.
Harbour is compiled with -gc3, -DHB_NO_DEBUG.

Brgds,
Viktor

On 2008.10.14., at 16:28, Przemyslaw Czerpak wrote:

> On Tue, 14 Oct 2008, Przemyslaw Czerpak wrote:
>
> Hi Viktor,
>
>> [...]
>>> When I turned off debugging, the problem went away.
>>> If you want, I can redo some tests to make the
>>> circumstances cleaner.
>> I'll look at it. If I will not be able to isolate the
>> problem then I'll ask you for help.
>
> I used debugger with MT HVM without any problems as long
> as I do not create new threads. I tested with -gc2 and -gc3.
> I also do not seen anything what interacts with debugger
> mode in MT HVM. The code is the same as for ST mode and it's
> the reason why it does not work when more then one thread is
> active.
> Maybe you compiled also Harbour debugger library with -b switch
> what causes recursion problem and GPF in both ST and MT modes.
> If not then please try to reduce the problem.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Oct 14 13:26:21 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 13:26:37 2008
Subject: [Harbour] 2008-10-14 19:23 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92e21$Blat.v2.6.2$f9c43f1a$1268a5113b8a@127.0.0.1>

2008-10-14 19:23 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbextern.ch
    + Added hb_macroBlock()

  * source/rtl/langapi.c
    * One error text changed to be more precise.

  * doc/gmake.txt
  * bin/bld.bat
  * contrib/hbbtree/tests/bld_vc.bat
  * contrib/examples/pp/bld_vc.bat
  * contrib/examples/guestbk/bld_vc.bat
  * contrib/examples/pe/bld_vc.bat
  * contrib/examples/dbu/bld_vc.bat
  * contrib/examples/hscript/bld_vc.bat
  * utils/hbdoc/bld_vc.bat
  * utils/hbmake/bld_vc.bat
  * utils/hbmake/hbmake.prg
    - Removed MSVC -TP switches.
--
Brgds,
Viktor

From clipper5_y2d at versateladsl.be  Tue Oct 14 13:26:41 2008
From: clipper5_y2d at versateladsl.be (frank van nuffel)
Date: Tue Oct 14 13:26:52 2008
Subject: [Harbour] Inconsistency in DATA Types
References: <km09f4dh2uf58ic5c37rdjddr0assdvgb8@4ax.com><20081014124424.GA3307@34-mo7-2.acn.waw.pl><u889f4lprhdj94arv85v9rhegrbih9kiv9@4ax.com>
	<19977576.post@talk.nabble.com>
Message-ID: <1C13118307284348BF4F3EE566A2CC02@uwlhldv32rnqu4>

Hi again,

----- Original Message ----- 
From: "Petr Chornyj" <myorg63@mail.ru>
To: <harbour@harbour-project.org>
Sent: Tuesday, October 14, 2008 6:48 PM
Subject: Re: Re: [Harbour] Inconsistency in DATA Types


> Toninho@fwi wrote:
>>
>> BTW I can change empty codeblock datas from nil to {||nil} and eval it
>> always, instead check it.
>
> Why you can't check it as
> if hb_IsBlock( oClass:bDraw )
>   Eval( oClass:bDraw )
> endif

one more other possibility is to insert an :eval() method for the native 
type nil which does nothing, and just call

oClass:bDraw:eval()

frank 

From harbour.01 at syenar.hu  Tue Oct 14 13:55:00 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 13:55:13 2008
Subject: [Harbour] 2008-10-14 11:51 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081014095131.GA14059@34-mo7-2.acn.waw.pl>
References: <20081014095131.GA14059@34-mo7-2.acn.waw.pl>
Message-ID: <D82A444F-3212-4797-8615-FD35C0EB2E79@syenar.hu>

I've tried it now live, and also with invalid
code (it returns NIL) and it's working perfectly,
just as I've expected.

Thanks a lot Przemek.

Brgds,
Viktor

On 2008.10.14., at 11:51, Przemyslaw Czerpak wrote:

> 2008-10-14 11:51 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbapi.h
>  * harbour/source/vm/macro.c
>    * added missing const attribute to hb_macroCompile() parameter
>    + added new .prg function:
>         hb_macroBlock( <cExpr> ) -> <bCode>
>      which converts macro expression to codeblock. New codeblocks
>      do not inherit hb_macroBlock() caller scope/attributes.
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Oct 14 14:37:24 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 14:37:50 2008
Subject: [Harbour] 2008-10-14 20:36 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92e2b$Blat.v2.6.2$e6a5bc24$3289cb148a6@127.0.0.1>

2008-10-14 20:36 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/dbedit.prg
  * source/rtl/tgetint.prg
  * source/rtl/tlabel.prg
  * source/rtl/treport.prg
    * Changed '&( "{||" + c + "}" )' expressions to 
      hb_macroBlock() calls.
      To me these places seemed safe to change, but 
      please verify me.

  * source/rtl/alert.prg
  * source/rtl/tbcolumn.prg
  * source/rtl/tget.prg
    * Minor formatting.
--
Brgds,
Viktor

From toninhofwi at yahoo.com.br  Tue Oct 14 14:48:24 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Oct 14 14:46:56 2008
Subject: [Harbour] Inconsistency in DATA Types
In-Reply-To: <19977576.post@talk.nabble.com>
References: <km09f4dh2uf58ic5c37rdjddr0assdvgb8@4ax.com>
	<20081014124424.GA3307@34-mo7-2.acn.waw.pl>
	<u889f4lprhdj94arv85v9rhegrbih9kiv9@4ax.com>
	<19977576.post@talk.nabble.com>
Message-ID: <c7q9f49c69vb89blssf55rn3d0ojb5bgdn@4ax.com>

>Why you can't check it as
>if hb_IsBlock( oClass:bDraw ) 
>   Eval( oClass:bDraw ) 
>endif

Hi Petr,

This is exactly the problem: I have a codeblock, but sometimes I need
set it to nil and I can?t due data type protection. So now I?m
converting all calls to:

oClass:bDraw = {||nil}

and always I evaluate it.


Thanks and best regards,

Toninho.

__________________________________________________
Fa?a liga??es para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From druzus at acn.waw.pl  Tue Oct 14 16:00:03 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 14 16:00:25 2008
Subject: [Harbour] 2008-10-13 20:21 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <A8F52CE2-BDB2-4CE7-99E1-4D8D3D756669@syenar.hu>
References: <20081013182137.GA28575@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F070@SRV02.deltain.net>
	<20081014104842.GA9526@34-mo7-2.acn.waw.pl>
	<CD1F2602-113D-4E0B-8BA2-355D2E161832@syenar.hu>
	<20081014141605.GA25006@34-mo7-2.acn.waw.pl>
	<20081014142834.GA31381@34-mo7-2.acn.waw.pl>
	<A8F52CE2-BDB2-4CE7-99E1-4D8D3D756669@syenar.hu>
Message-ID: <20081014200003.GA24070@34-mo7-2.acn.waw.pl>

On Tue, 14 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I've reduced the problem to this:
> --- test.prg
> PROC MAIN()
> TESTCALL()
> #pragma BEGINDUMP
> HB_FUNC( TESTCALL )
> {
> }
> #pragma ENDDUMP
> This is happening with MSVS2008 32-bit. _only_
> when linking hbvmmt _and_ using -b Harbour switch.
> Harbour is compiled with -gc3, -DHB_NO_DEBUG.

I'm sorry but I'm not able to replicate it. The only one problem
I finally created was after compiling hbdebug library with -b
parameter. Otherwise it works as expected.

Just a few questions. Maybe I'll guess what's wrong.
Is it necessary to declare TESTCALL() inside #pragma BEGINDUMP
to reproduce the problem?

Do you have to compile test.prg with -b switch or problem can be
also replicated if you add to this code:
   REQUEST __DBGENTRY
and compile it without -b?
Is -gc3 necessary to compile test.prg or it GPFs in both modes?
Can you recreate this problem with other C compiler?

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Oct 14 16:56:49 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 16:57:08 2008
Subject: [Harbour] 2008-10-13 20:21 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081014200003.GA24070@34-mo7-2.acn.waw.pl>
References: <20081013182137.GA28575@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F070@SRV02.deltain.net>
	<20081014104842.GA9526@34-mo7-2.acn.waw.pl>
	<CD1F2602-113D-4E0B-8BA2-355D2E161832@syenar.hu>
	<20081014141605.GA25006@34-mo7-2.acn.waw.pl>
	<20081014142834.GA31381@34-mo7-2.acn.waw.pl>
	<A8F52CE2-BDB2-4CE7-99E1-4D8D3D756669@syenar.hu>
	<20081014200003.GA24070@34-mo7-2.acn.waw.pl>
Message-ID: <D0BC1F06-188C-4C66-8520-B24A53B22C80@syenar.hu>

>
Hi Przemek,

> I'm sorry but I'm not able to replicate it. The only one problem
> I finally created was after compiling hbdebug library with -b
> parameter. Otherwise it works as expected.
>
> Just a few questions. Maybe I'll guess what's wrong.
> Is it necessary to declare TESTCALL() inside #pragma BEGINDUMP
> to reproduce the problem?

No. I can just replace it with a simple "FUNC TESTCALL" line.
Just tried it now, sorry for not reducing further.

> Do you have to compile test.prg with -b switch or problem can be
> also replicated if you add to this code:
>   REQUEST __DBGENTRY
> and compile it without -b?

Without -b + above command, it does work okay.

To me the culprit seems to be the "INITLINES" logic.
If I disable line numbers with -l, it will start to
work with MSVS. But not with BCC.

> Is -gc3 necessary to compile test.prg or it GPFs in both modes?

Sorry I didn't write this, but tested both and
-gc mode didn't affect results.

> Can you recreate this problem with other C compiler?

With BCC582 compiled with -DHB_NO_DEBUG -DHB_FM_STATISTICS_OFF -gc3,
clean build from local sandbox with no pending updates.

Same test.prg, compiled with 'harbour -n' base command:
- OK : ST
- OK : ST + -b
- OK : ST + -b -l
- OK : ST + REQUEST
- OK : ST + REQUEST + -b
- OK : ST + REQUEST + -b -l
- OK : MT
- ERR: MT + -b
- ERR: MT + -b -l
- ERR: MT + REQUEST
- ERR: MT + REQUEST + -b
- ERR: MT + REQUEST + -b -l

ERR means GPF, plus when Harbour rebuilt with FM STATS ON,
it has shown this line too:
'Called from (_INITSTATICS00013)(0) in src\getsys.prg'

MSVC2008 with similar switches except FM STATS is now ON:
- OK : ST
- OK : ST + -b
- OK : ST + -b -l
- OK : ST + REQUEST
- OK : ST + REQUEST + -b
- OK : ST + REQUEST + -b -l
- OK : MT
- ERR: MT + -b
- OK : MT + -b -l
- OK : MT + REQUEST
- ERR: MT + REQUEST + -b
- OK : MT + REQUEST + -b -l

ERR means this (but my real app also GPFed after this point):
---
Error BASE/1301  Memory object destructor failure: Reference to freed  
block
----------------------------------------
Total memory allocated: 194097 bytes (1593 block(s))
Warning, memory allocated but not released: 32 bytes (1 block(s))
source\vm\fm.c:811: HB_TR_ERROR Block 1 (size 28) (_INITLINES)(0),  
"........"
---

Brgds,
Viktor

From druzus at acn.waw.pl  Tue Oct 14 18:18:00 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 14 18:18:15 2008
Subject: [Harbour] 2008-10-13 20:21 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <D0BC1F06-188C-4C66-8520-B24A53B22C80@syenar.hu>
References: <20081013182137.GA28575@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F070@SRV02.deltain.net>
	<20081014104842.GA9526@34-mo7-2.acn.waw.pl>
	<CD1F2602-113D-4E0B-8BA2-355D2E161832@syenar.hu>
	<20081014141605.GA25006@34-mo7-2.acn.waw.pl>
	<20081014142834.GA31381@34-mo7-2.acn.waw.pl>
	<A8F52CE2-BDB2-4CE7-99E1-4D8D3D756669@syenar.hu>
	<20081014200003.GA24070@34-mo7-2.acn.waw.pl>
	<D0BC1F06-188C-4C66-8520-B24A53B22C80@syenar.hu>
Message-ID: <20081014221800.GA3941@34-mo7-2.acn.waw.pl>

On Tue, 14 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> To me the culprit seems to be the "INITLINES" logic.
> If I disable line numbers with -l, it will start to
> work with MSVS. But not with BCC.

Your results suggest that the problem is not related to MT mode.
It's rather caused by debugger activation in HVM compiled with
HB_NO_DEBUG macro and it's possible in few cases because this
macro does not disable all debugger entries in HVM what should
be cleaned. Anyhow I do not make it now because it may hide some
problem in debugger code I would like to locate.
Unfortunately I cannot reproduce the problem myself. It may be
caused by different order of startup code execution in compilers
you are using.
If possible please try to use CodeGuard in BCC build. It should
catch the place where this code fails.
Also if possible please check if the problem is repeatable with
Harbour compiled without -gc2.

> With BCC582 compiled with -DHB_NO_DEBUG -DHB_FM_STATISTICS_OFF -gc3,
> clean build from local sandbox with no pending updates.
> Same test.prg, compiled with 'harbour -n' base command:
> - OK : ST
> - OK : ST + -b
> - OK : ST + -b -l
> - OK : ST + REQUEST
> - OK : ST + REQUEST + -b
> - OK : ST + REQUEST + -b -l
> - OK : MT
> - ERR: MT + -b
> - ERR: MT + -b -l
> - ERR: MT + REQUEST
> - ERR: MT + REQUEST + -b
> - ERR: MT + REQUEST + -b -l
> ERR means GPF, plus when Harbour rebuilt with FM STATS ON,
> it has shown this line too:
> 'Called from (_INITSTATICS00013)(0) in src\getsys.prg'

This is not Harbour code. We have only one file source\rtl\getsys.prg
which does not use any static variables. It will be funny if above
error comes from some old object files compiled before:
   2008-10-13 12:42 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
with broken static offsets.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Oct 14 18:31:57 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 14 18:32:13 2008
Subject: [Harbour] 2008-10-15 00:31 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081014223157.GA798@34-mo7-2.acn.waw.pl>

2008-10-15 00:31 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbxvm.h
  * harbour/source/vm/hvm.c
    - removed to unused functions

  * harbour/source/vm/thread.c
    - removed unnecessary casting

best regards
Przemek
From harbour.01 at syenar.hu  Tue Oct 14 19:01:25 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 19:01:40 2008
Subject: [Harbour] 2008-10-13 20:21 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081014221800.GA3941@34-mo7-2.acn.waw.pl>
References: <20081013182137.GA28575@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F070@SRV02.deltain.net>
	<20081014104842.GA9526@34-mo7-2.acn.waw.pl>
	<CD1F2602-113D-4E0B-8BA2-355D2E161832@syenar.hu>
	<20081014141605.GA25006@34-mo7-2.acn.waw.pl>
	<20081014142834.GA31381@34-mo7-2.acn.waw.pl>
	<A8F52CE2-BDB2-4CE7-99E1-4D8D3D756669@syenar.hu>
	<20081014200003.GA24070@34-mo7-2.acn.waw.pl>
	<D0BC1F06-188C-4C66-8520-B24A53B22C80@syenar.hu>
	<20081014221800.GA3941@34-mo7-2.acn.waw.pl>
Message-ID: <27F780A4-81C7-4561-9BBF-4C1FF1949AC7@syenar.hu>

Hi Przemek,

>> Unfortunately I cannot reproduce the problem myself. It may be
> caused by different order of startup code execution in compilers
> you are using.
> If possible please try to use CodeGuard in BCC build. It should
> catch the place where this code fails.
> Also if possible please check if the problem is repeatable with
> Harbour compiled without -gc2.

I have no CodeGuard unfortunately. I didn't debug Harbour
since 8 years, but I'll try to find something out.

>> ERR means GPF, plus when Harbour rebuilt with FM STATS ON,
>> it has shown this line too:
>> 'Called from (_INITSTATICS00013)(0) in src\getsys.prg'
>
> This is not Harbour code. We have only one file source\rtl\getsys.prg
> which does not use any static variables. It will be funny if above
> error comes from some old object files compiled before:
>   2008-10-13 12:42 UTC+0200 Przemyslaw Czerpak (druzus/at/ 
> priv.onet.pl)
> with broken static offsets.

Nope sorry, I left my framework lib in the liblist that's
all, and I have getsys.prg overloaded (and BCC build of the
framework weren't rebuilt since the problem). I didn't notice,
even if the problem your mention crossed my mind when seeing
the error. I've even double checked getsys.c, but the wrong
one. Sigh. :( This explains the funny message. Nevertheless,
it wasn't related to the main problem:

In the meantime I've rebuilt BCC 5.8.2 with plain default
build settings from a fresh SVN checkout. This clears the
HB_NO_DEBUG and -gc3 concerns, also possible local source
corruption. I also did a full default build of MSVC2008 from
fresh checkout, it didn't change the results.

Now results are fully consistent with MSVC, so that it also
shows the RTE and than GPFs (instead of giving the FM stats report),
in the same situations. That is with MT and -b and _no_ -l
switch. When -l switch is used, the problem goes away.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Oct 14 19:20:28 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 19:20:44 2008
Subject: [Harbour] 2008-10-15 01:04 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92e53$Blat.v2.6.2$7232c364$1c40f5340382@127.0.0.1>

2008-10-15 01:04 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/debug/dbgtobj.prg
  * source/debug/dbgbrwsr.prg
  * source/debug/dbgtwin.prg
  * source/debug/dbgmenu.prg
  * source/debug/dbgthsh.prg
  * source/debug/tbrwtext.prg
  * source/debug/dbgwa.prg
  * source/debug/debugger.prg
  * source/debug/dbghelp.prg
  * source/debug/dbgtarr.prg
  * source/debug/dbgtmenu.prg
  * source/debug/dbgtmitm.prg
    + Added '#pragma DEBUGINFO=OFF' to debugger 
      sources. Otherwise compiling full Harbour with 
      -b was causing an infinite loop. (this is now 
      the default when building with 
      'HB_BUILD_DEBUG=yes'.

  * source/rdd/nulsys/nulsys.c
    ! Added DBSELECTAREA(), DBSTRUCT(), HEADER(), 
      RECSIZE(), LUPDATE()
      so that programs can be built with -b and 
      hbnulrdd.lib. hbdebug.lib/dgbwa.prg uses 
      symbols above.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Tue Oct 14 19:26:38 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 14 19:26:54 2008
Subject: [Harbour] 2008-10-13 20:21 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <27F780A4-81C7-4561-9BBF-4C1FF1949AC7@syenar.hu>
References: <AFB948164110ED43B5EB849E8DEEF03815F070@SRV02.deltain.net>
	<20081014104842.GA9526@34-mo7-2.acn.waw.pl>
	<CD1F2602-113D-4E0B-8BA2-355D2E161832@syenar.hu>
	<20081014141605.GA25006@34-mo7-2.acn.waw.pl>
	<20081014142834.GA31381@34-mo7-2.acn.waw.pl>
	<A8F52CE2-BDB2-4CE7-99E1-4D8D3D756669@syenar.hu>
	<20081014200003.GA24070@34-mo7-2.acn.waw.pl>
	<D0BC1F06-188C-4C66-8520-B24A53B22C80@syenar.hu>
	<20081014221800.GA3941@34-mo7-2.acn.waw.pl>
	<27F780A4-81C7-4561-9BBF-4C1FF1949AC7@syenar.hu>
Message-ID: <20081014232638.GA12171@34-mo7-2.acn.waw.pl>

On Wed, 15 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I have no CodeGuard unfortunately. I didn't debug Harbour
> since 8 years, but I'll try to find something out.

I've found it.

To repeat the problem is necessary to have some the startup
code execution order like in Windows/DOS.

_INITLINES() functions left complex item (array) for debugger
in HVM stack return value. The static initialization code
hb_stack.return item is clear and does not clear it's previous
value before use. If _INITLINES() was executed before Harbour
libraries we have effect like above and the dirty item overloading
is detected by garbage collector on exit.
I'm not able to replicate it with GCC on Linux because it uses
different order for startup code and _INITLINES() is executed
after static initializations.
I'll fix it ASAP.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Oct 14 19:39:29 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 14 19:39:47 2008
Subject: [Harbour] 2008-10-15 01:39 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081014233929.GA28824@34-mo7-2.acn.waw.pl>

2008-10-15 01:39 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/hvm.c
    ! clear HVM stack return value before use in initialization code

best regards
Przemek
From druzus at acn.waw.pl  Tue Oct 14 19:41:01 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 14 19:41:15 2008
Subject: [Harbour] 2008-10-15 01:04 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c92e53$Blat.v2.6.2$7232c364$1c40f5340382@127.0.0.1>
References: <01c92e53$Blat.v2.6.2$7232c364$1c40f5340382@127.0.0.1>
Message-ID: <20081014234101.GA28143@34-mo7-2.acn.waw.pl>

On Wed, 15 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

>     + Added '#pragma DEBUGINFO=OFF' to debugger 
>       sources. Otherwise compiling full Harbour with 
>       -b was causing an infinite loop. (this is now 
>       the default when building with 
>       'HB_BUILD_DEBUG=yes'.

It's not enough. Debugger uses internally RTL functions which also
have to be compiled without -b.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Oct 14 19:42:45 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 19:42:59 2008
Subject: [Harbour] 2008-10-15 01:40 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92e56$Blat.v2.6.2$8ec6f13c$16d4e9706098@127.0.0.1>

2008-10-15 01:40 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  - lib/b32
  - lib/vc
  - bin/b32
  - bin/vc
  - obj/b32
  - obj/vc
    - Removed dirs from SVN. They are automatically created 
      by the build scripts.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Oct 14 19:53:06 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 19:53:25 2008
Subject: [Harbour] 2008-10-15 01:04 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20081014234101.GA28143@34-mo7-2.acn.waw.pl>
References: <01c92e53$Blat.v2.6.2$7232c364$1c40f5340382@127.0.0.1>
	<20081014234101.GA28143@34-mo7-2.acn.waw.pl>
Message-ID: <1F791ED2-5BBA-4CF5-8F5F-59DB808FA07E@syenar.hu>

I had a feeling like this :)

I'll simply add -b- to Harbour core flags then.
Since I don't think identifying all those parts
would be a maintainable option.

[ In this case, maybe it's safe to delete
HB_NO_READDBG option, as our GET system
will always work from the debugger. If someone
wants to debug it, the source should be copied
outside the core scope first. ]

Brgds,
Viktor

On 2008.10.15., at 1:41, Przemyslaw Czerpak wrote:

> On Wed, 15 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>>    + Added '#pragma DEBUGINFO=OFF' to debugger
>>      sources. Otherwise compiling full Harbour with
>>      -b was causing an infinite loop. (this is now
>>      the default when building with
>>      'HB_BUILD_DEBUG=yes'.
>
> It's not enough. Debugger uses internally RTL functions which also
> have to be compiled without -b.
>
> best regards,
> Przemek

From harbour.01 at syenar.hu  Tue Oct 14 19:59:07 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 19:59:25 2008
Subject: [Harbour] 2008-10-15 01:56 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92e58$Blat.v2.6.2$d81d04f0$608dde008f0@127.0.0.1>

2008-10-15 01:56 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/debug/dbgtobj.prg
  * source/debug/dbgbrwsr.prg
  * source/debug/dbgtwin.prg
  * source/debug/dbgmenu.prg
  * source/debug/dbgthsh.prg
  * source/debug/tbrwtext.prg
  * source/debug/dbgwa.prg
  * source/debug/debugger.prg
  * source/debug/dbghelp.prg
  * source/debug/dbgtarr.prg
  * source/debug/dbgtmenu.prg
  * source/debug/dbgtmitm.prg
    - Removed '#pragma DEBUGINFO=OFF'. See solution below.

  * make_b32.mak
  * make_gcc.mak
  * make_vc.mak
    * Forcing -b- (disabling debug info) for all core 
      .prg functions. Compiling anything in core with 
      -b would cause infinite loops, when trying to use 
      the debugger.
      QUESTION: Is HB_NO_READDBG still needed?
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Oct 14 20:08:28 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 20:08:43 2008
Subject: [Harbour] 2008-10-15 01:39 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081014233929.GA28824@34-mo7-2.acn.waw.pl>
References: <20081014233929.GA28824@34-mo7-2.acn.waw.pl>
Message-ID: <E95796D4-C580-43B8-AD17-F97A07CB7700@syenar.hu>

Hi Przemek,

I confirm that it's working now (tested with MSVS2008).

Brgds,
Viktor

On 2008.10.15., at 1:39, Przemyslaw Czerpak wrote:

> 2008-10-15 01:39 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/vm/hvm.c
>    ! clear HVM stack return value before use in initialization code
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Tue Oct 14 20:28:25 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 14 20:28:39 2008
Subject: [Harbour] 2008-10-15 01:04 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <1F791ED2-5BBA-4CF5-8F5F-59DB808FA07E@syenar.hu>
References: <01c92e53$Blat.v2.6.2$7232c364$1c40f5340382@127.0.0.1>
	<20081014234101.GA28143@34-mo7-2.acn.waw.pl>
	<1F791ED2-5BBA-4CF5-8F5F-59DB808FA07E@syenar.hu>
Message-ID: <20081015002825.GA10936@34-mo7-2.acn.waw.pl>

On Wed, 15 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I'll simply add -b- to Harbour core flags then.
> Since I don't think identifying all those parts
> would be a maintainable option.

Maybe it will be better to not have any -b? flags.
If someone will want to debug some part of Harbour
then he can recompile only chosen modules with -b.

> [ In this case, maybe it's safe to delete
> HB_NO_READDBG option, as our GET system
> will always work from the debugger. If someone
> wants to debug it, the source should be copied
> outside the core scope first. ]

HB_NO_READDBG disable using GET class in debugger
so user can debug their own customized GETs. Without
it will not be possible to debug GET code.

The only one thing we should make is cleaning debugger
code and replace all RTL .prg references with local
debugger functions. Just like Phil replace TBROWSE
with HBDbBrowser.
HB_NO_READDBG is small step which eliminated TGET
but it's not finished and the emulation should be
improved yet.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Oct 14 20:33:57 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 14 20:34:13 2008
Subject: [Harbour] 2008-10-15 02:33 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92e5d$Blat.v2.6.2$b5cdca2e$930c844b48e@127.0.0.1>

2008-10-15 02:33 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/langapi.c
  * utils/hbtest/rt_class.prg
    * Cleanup to previous modif.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Oct 15 04:13:39 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 15 04:13:56 2008
Subject: [Harbour] 2008-10-15 10:09 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92e9d$Blat.v2.6.2$ee2249dc$19a825c101ce@127.0.0.1>

2008-10-15 10:09 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * make_vc.mak
  * make_gcc.mak
    * Removed disabling -b for non-debug builds.
    ; We aim to remove RTL .prg dependencies from hbdebug.lib, 
      either by local implementation, .c rewrite, or force 
      disabling debug mode in more core files.
      Until this happens, one will have to be careful with 
      using -b switch to compile Harbour. These are the core .prg 
      modules currently used by hbdebug.lib:
      - HBGETLIST(), GET(), __GET(), __GETLISTACTIVE(), __GETLISTSETACTIVE(), READINSERT(), READMODAL()
      - HBCLASS()
      - HBOBJECT()
      - HBEDITOR()
      - TBCOLUMNNEW()
      - ACHOICE()
      - ALERT()

  * source/debug/dbgtobj.prg
  * source/debug/dbgbrwsr.prg
  * source/debug/dbgtwin.prg
  * source/debug/dbgmenu.prg
  * source/debug/dbgthsh.prg
  * source/debug/tbrwtext.prg
  * source/debug/dbgwa.prg
  * source/debug/debugger.prg
  * source/debug/dbghelp.prg
  * source/debug/dbgtarr.prg
  * source/debug/dbgtmenu.prg
  * source/debug/dbgtmitm.prg
    + Readded '#pragma DEBUGINFO=OFF'.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Oct 15 04:16:24 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 15 04:16:38 2008
Subject: [Harbour] 2008-10-15 10:16 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92e9e$Blat.v2.6.2$505c4bca$1538a67f8eb2@127.0.0.1>

2008-10-15 10:16 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * doc/dirstruc.txt
    * Updated.
--
Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Wed Oct 15 04:39:20 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Oct 15 04:39:28 2008
Subject: [Harbour] 2008-10-15 01:56 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c92e58$Blat.v2.6.2$d81d04f0$608dde008f0@127.0.0.1>
References: <01c92e58$Blat.v2.6.2$d81d04f0$608dde008f0@127.0.0.1>
Message-ID: <9257026e0810150139h42196eb8g9f2974f15afa786e@mail.gmail.com>

On Wed, Oct 15, 2008 at 1:59 AM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

>      QUESTION: Is HB_NO_READDBG still needed?

I use HB_NO_READDBG since I have a custom getsys.prg.
In debugger there are some @ .. GET .. that would call code compiled with -b.
HB_NO_READDBG "replaces" the @ GET with plain INPUTs.
Not an ideal solution but I can easily leave without changing the
values of the vars during the debug. It is much worse to have to the
callstack "garbled".

best regards,
Lorenzo
From harbour.01 at syenar.hu  Wed Oct 15 04:49:52 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 15 04:50:03 2008
Subject: [Harbour] 2008-10-15 01:56 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <9257026e0810150139h42196eb8g9f2974f15afa786e@mail.gmail.com>
References: <01c92e58$Blat.v2.6.2$d81d04f0$608dde008f0@127.0.0.1>
	<9257026e0810150139h42196eb8g9f2974f15afa786e@mail.gmail.com>
Message-ID: <F4A885E9-5D59-446E-B222-26896636F7BB@syenar.hu>

Hi Lorenzo,

Yes, that's basically a small hack to get around
using RTL .prg code. But, there are other such
places too, and it'd be best to solve this in a
complete way eventually.

BTW, does HB_NO_READDBG currently have any bad
side effects when you're using the debugger?

If there are no serious issues I think we should
make it the default.

Brgds,
Viktor

On 2008.10.15., at 10:39, Lorenzo Fiorini wrote:

> On Wed, Oct 15, 2008 at 1:59 AM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>>     QUESTION: Is HB_NO_READDBG still needed?
>
> I use HB_NO_READDBG since I have a custom getsys.prg.
> In debugger there are some @ .. GET .. that would call code compiled  
> with -b.
> HB_NO_READDBG "replaces" the @ GET with plain INPUTs.
> Not an ideal solution but I can easily leave without changing the
> values of the vars during the debug. It is much worse to have to the
> callstack "garbled".
>
> best regards,
> Lorenzo

From druzus at acn.waw.pl  Wed Oct 15 07:32:39 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 15 07:32:58 2008
Subject: [Harbour] 2008-10-15 13:32 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081015113239.GA12092@34-mo7-2.acn.waw.pl>

2008-10-15 13:32 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapi.h
  * harbour/source/vm/hvm.c
  * harbour/source/vm/estack.c
    * disabled all debugger related bindings and variables when
      HB_NO_DEBUG macro is set
    % moved s_fDebuging to HVM function stack frame to eliminate
      saving/restoring this variable in each function/message call
      Note: if you think it's good to block linking .prg code compiled
            with -b (debugger support) with HVM compiled with HB_NO_DEBUG
            then it's enough to disable whole hb_dbg_SetEntry() function
            in hvm.c when HB_NO_DEBUG macro is set.

best regards
Przemek
From druzus at acn.waw.pl  Wed Oct 15 11:38:35 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 15 11:38:49 2008
Subject: [Harbour] SVN COMMIT problem
Message-ID: <20081015153835.GA11972@34-mo7-2.acn.waw.pl>

Hi,

When I try to commit sth then I receive the following error message:

svn: Commit failed (details follow):
svn: Server sent unexpected return value (403 Forbidden) in response to MKACTIVITY request for '/svnroot/harbour-project/!svn/act/317be13c-9acf-11dd-9bbf-d124b13ae939'

Can someone with admin rights check it?

best regards,
Przemek
From druzus at acn.waw.pl  Wed Oct 15 11:51:00 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 15 11:51:13 2008
Subject: [Harbour] 2008-10-15 17:50 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081015155100.GA27436@34-mo7-2.acn.waw.pl>

2008-10-15 17:50 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
  * harbour/source/vm/hvm.c
  * harbour/source/debug/dbgentry.c
  * harbour/source/debug/debugger.prg
    * moved debugRequest flag and debugger internal structure
      pointer to HVM stack
    * allocate debugger internal structure dynamically in thread
      thread local area when PCODE with debug information is executed
    * changed STATIC s_oDebugger to THREAD STATIC
    * send HB_DBG_VMQUIT after each thread termination when
      debugger is activated
      Now debugger can be used in MT programs and each thread can be
      debugged separately (each has its own debuger). Please only
      remember that thread sharing console window can overwrite other
      threads debugger screen. There is also one limitation which I'll
      try to remove later: only main thread debugger keeps information
      about file wide STATIC names and line numbers with possible break
      point places. This data should be shared between debuggers.

best regards
Przemek
From druzus at acn.waw.pl  Wed Oct 15 11:52:30 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 15 11:52:44 2008
Subject: [Harbour] SVN COMMIT problem
In-Reply-To: <20081015153835.GA11972@34-mo7-2.acn.waw.pl>
References: <20081015153835.GA11972@34-mo7-2.acn.waw.pl>
Message-ID: <20081015155230.GA27211@34-mo7-2.acn.waw.pl>

On Wed, 15 Oct 2008, Przemyslaw Czerpak wrote:
> When I try to commit sth then I receive the following error message:
[...]
> Can someone with admin rights check it?

It's OK now.
If someone of you unblocked it manually then thanks.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Oct 15 11:55:13 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 15 11:55:33 2008
Subject: [Harbour] 2008-10-15 17:47 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92ede$Blat.v2.6.2$68d6e120$19dcc1813756@127.0.0.1>

2008-10-15 17:47 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/debug/dbgtobj.prg
  * source/debug/dbgbrwsr.prg
  * source/debug/dbgthsh.prg
  * source/debug/debugger.prg
  * source/debug/dbghelp.prg
  * source/debug/dbgtarr.prg
  * source/debug/dbgwa.prg
  * source/debug/dbgtwin.prg
  * source/debug/dbgtmenu.prg
    + Added minimal Alert() clone, named ___dbgAlert().
    + Replaced Alert() with __dbgAlert() calls.
    + Added minimal TBColumn() implementation, named HBDbColumn().
    + Replaced TBColumnNew() with HBDbColumnNew() calls.
    + Enabled HB_NO_READDBG for all sources. This isn't 
      perfect, just a step into the right direction.
    ; Please test above modifications.
    ; Remaining RTL .prg dependencies:
      - HBEDITOR()
      - ACHOICE()

  * source/debug/dbgwa.prg
  * source/debug/dbgtwin.prg
  * source/debug/dbgtmenu.prg
    * Formatted to Harbour standards.

  * source/rtl/tobject.prg
  * source/rtl/tclass.prg
    + Added '#pragma DEBUGINFO=OFF'.
    ; NOTE: Maybe it'd be better to rewrite these in .c, 
            also for speed. If possible.

  * source/rtl/alert.prg
    ! Minor typo.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Wed Oct 15 12:23:26 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 15 12:23:46 2008
Subject: [Harbour] 2008-10-15 17:47 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c92ede$Blat.v2.6.2$68d6e120$19dcc1813756@127.0.0.1>
References: <01c92ede$Blat.v2.6.2$68d6e120$19dcc1813756@127.0.0.1>
Message-ID: <20081015162326.GA9462@34-mo7-2.acn.waw.pl>

On Wed, 15 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> 2008-10-15 17:47 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * source/debug/dbgtobj.prg
>   * source/debug/dbgbrwsr.prg
>   * source/debug/dbgthsh.prg
>   * source/debug/debugger.prg
>   * source/debug/dbghelp.prg
>   * source/debug/dbgtarr.prg
>   * source/debug/dbgwa.prg
>   * source/debug/dbgtwin.prg
>   * source/debug/dbgtmenu.prg
>     + Added minimal Alert() clone, named ___dbgAlert().
>     + Replaced Alert() with __dbgAlert() calls.
>     + Added minimal TBColumn() implementation, named HBDbColumn().
>     + Replaced TBColumnNew() with HBDbColumnNew() calls.
>     + Enabled HB_NO_READDBG for all sources. This isn't 
>       perfect, just a step into the right direction.

Thank you.
For user input (GET) we will have to create our own function
which will be more flexible then ACCEPT.

>     ; Please test above modifications.
>     ; Remaining RTL .prg dependencies:
>       - HBEDITOR()
>       - ACHOICE()

Few weeks ago Lorenzo sent modifications to debugger which eliminates
HBEditor from HBBrwText. It needs some additional cleanups to keep
source code navigation like in Clipper but it's good start point.

>   * source/rtl/tobject.prg
>   * source/rtl/tclass.prg
>     + Added '#pragma DEBUGINFO=OFF'.
>     ; NOTE: Maybe it'd be better to rewrite these in .c, 
>             also for speed. If possible.

I can do it but it will not cause noticeable speed improvement
because code from above classes is executed very seldom.
The only one bad side effect will be harder for user who do not
know C future modifications.
Question to All:
   What do you prefer?

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Oct 15 12:24:40 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Oct 15 12:24:51 2008
Subject: [Harbour] 2008-10-15 17:47 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c92ede$Blat.v2.6.2$68d6e120$19dcc1813756@127.0.0.1>
References: <01c92ede$Blat.v2.6.2$68d6e120$19dcc1813756@127.0.0.1>
Message-ID: <9257026e0810150924x21780df6r567530c44bd0d805@mail.gmail.com>

On Wed, Oct 15, 2008 at 5:55 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

>    ; Remaining RTL .prg dependencies:
>      - HBEDITOR()
>      - ACHOICE()

Just as remainder, months ago I sent to the list my tbrwtext.prg which
is based on HBDbBrowser() instead of teditor.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Wed Oct 15 12:29:46 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 15 12:30:01 2008
Subject: [Harbour] 2008-10-15 18:12 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92ee3$Blat.v2.6.2$3c7b1d08$9147c278f68@127.0.0.1>

2008-10-15 18:12 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/debug/tbrwtext.prg
    * Replaced with new implementation from Lorenzo Fiorini.
      Sent to the list on 2008.07.26.
    ; NOTE: Some issue were reported with this, but it's again 
            a step into the right direction, please try to update 
            this code to better resemble to Clipper and to fix 
            possible error. Thanks.
    ; Remaining RTL .prg dependencies:
      - ACHOICE() (just one call)

  * source/debug/debugger.prg
    * Using hb_MemoWrit() instead of MemoWrit()

  * source/rtl/achoice.prg
    % Minor opt.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Oct 15 12:41:48 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 15 12:42:10 2008
Subject: [Harbour] 2008-10-15 17:47 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20081015162326.GA9462@34-mo7-2.acn.waw.pl>
References: <01c92ede$Blat.v2.6.2$68d6e120$19dcc1813756@127.0.0.1>
	<20081015162326.GA9462@34-mo7-2.acn.waw.pl>
Message-ID: <F236B26E-C722-4E32-88EA-2E5AD203D579@syenar.hu>

>>
Hi Przemek, Lorenzo,

>>    ; Please test above modifications.
>>    ; Remaining RTL .prg dependencies:
>>      - HBEDITOR()
>>      - ACHOICE()
>
> Few weeks ago Lorenzo sent modifications to debugger which eliminates
> HBEditor from HBBrwText. It needs some additional cleanups to keep
> source code navigation like in Clipper but it's good start point.

Yes, I remember, it was sitting here ready for upload
since long, and now I've just committed it.

>>  * source/rtl/tobject.prg
>>  * source/rtl/tclass.prg
>>    + Added '#pragma DEBUGINFO=OFF'.
>>    ; NOTE: Maybe it'd be better to rewrite these in .c,
>>            also for speed. If possible.
>
> I can do it but it will not cause noticeable speed improvement
> because code from above classes is executed very seldom.
> The only one bad side effect will be harder for user who do not
> know C future modifications.
> Question to All:
>   What do you prefer?

These are pretty much non-standard .prg parts, and as
such maybe they'd be better as .c in my opinion, but
that's not a very strong one. I trust your judgment.
Maybe others have some stronger arguments.

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Oct 15 13:08:17 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 15 13:08:32 2008
Subject: [Harbour] 2008-10-15 19:08 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081015170817.GA2683@34-mo7-2.acn.waw.pl>

2008-10-15 19:08 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/debug/dbgbrwsr.prg
    ! added missing #include "common.ch"
    ! added missing colorBlock variable in HBDBColumn class
    % replaced .prg wrappers for type checking with native
      harbour class type validation

best regards
Przemek
From druzus at acn.waw.pl  Wed Oct 15 13:09:40 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 15 13:09:54 2008
Subject: [Harbour] 2008-10-15 18:12 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c92ee3$Blat.v2.6.2$3c7b1d08$9147c278f68@127.0.0.1>
References: <01c92ee3$Blat.v2.6.2$3c7b1d08$9147c278f68@127.0.0.1>
Message-ID: <20081015170939.GA3111@34-mo7-2.acn.waw.pl>

On Wed, 15 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> 2008-10-15 18:12 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * source/debug/tbrwtext.prg
>     * Replaced with new implementation from Lorenzo Fiorini.
>       Sent to the list on 2008.07.26.
>     ; NOTE: Some issue were reported with this, but it's again 
>             a step into the right direction, please try to update 
>             this code to better resemble to Clipper and to fix 
>             possible error. Thanks.

It has to be done before new release or this modification will have
to be reverted.
Can some make it? It's simple .prg code in source/debug/tbrwtext.prg
It should keep navigation rules just like HBEditor and original
Clipper debugger. Now it's really hard to visually trace the
debugged context in some cases.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Oct 15 14:03:31 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 15 14:03:46 2008
Subject: [Harbour] 2008-10-15 20:03 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081015180331.GA15075@34-mo7-2.acn.waw.pl>

2008-10-15 20:03 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/debug/tbrwtext.prg
    ! fixed vertical navigation to be compatible with old debugger
      and Clipper
    ! fixed horizontal scrolling to the size of maximal line
      not to the size of current line
    % use single call to hb_aTokens() to convert source code into array

best regards
Przemek
From druzus at acn.waw.pl  Wed Oct 15 15:33:55 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 15 15:34:08 2008
Subject: [Harbour] 2008-10-15 21:33 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081015193355.GA19356@34-mo7-2.acn.waw.pl>

2008-10-15 21:33 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/debug/tbrwtext.prg
    ! refresh rows after active line changing for proper color updating

best regards
Przemek
From druzus at acn.waw.pl  Wed Oct 15 18:42:52 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 15 18:43:06 2008
Subject: [Harbour] 2008-10-16 00:42 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081015224252.GA7170@34-mo7-2.acn.waw.pl>

2008-10-16 00:42 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/debug/dbgtobj.prg
  * harbour/source/debug/dbgbrwsr.prg
  * harbour/source/debug/dbgtwin.prg
  * harbour/source/debug/dbgmenu.prg
  * harbour/source/debug/dbgthsh.prg
  * harbour/source/debug/tbrwtext.prg
  * harbour/source/debug/debugger.prg
  * harbour/source/debug/dbgtarr.prg
  * harbour/source/debug/dbgtmenu.prg
  * harbour/source/debug/dbgtmitm.prg
    * use #define HB_CLS_NOTOBJECT to disable inheritance from HBObject
      in internal debugger classes.
      Here is complete list of other .prg functions still used by hbdebug
      library:
         GET, __GETLISTACTIVE, __GETLISTSETACTIVE, HBGETLIST, ACHOICE,
         HB_CSTR, HBCLASS


best regards
Przemek
From bedipritpal at hotmail.com  Wed Oct 15 20:29:27 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Oct 15 20:29:35 2008
Subject: [Harbour] Escape.lib - Any Workarounds
Message-ID: <20004972.post@talk.nabble.com>


Hello Everybody

Does someone have managed to convert Escape.lib in Harbour?
OR any workarounds suggested?

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Escape.lib---Any-Workarounds-tp20004972p20004972.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Wed Oct 15 22:24:26 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 15 22:24:39 2008
Subject: [Harbour] 2008-10-16 04:24 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081016022426.GA30360@34-mo7-2.acn.waw.pl>

2008-10-16 04:24 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/debug/dbgbrwsr.prg
  * harbour/source/debug/dbgtwin.prg
  * harbour/source/debug/tbrwtext.prg
  * harbour/source/debug/dbgwa.prg
  * harbour/source/debug/debugger.prg
  * harbour/source/debug/dbghelp.prg
  * harbour/source/debug/dbgtmenu.prg
  * harbour/source/debug/dbgtmitm.prg
    * use hb_dispOutAt()/hb_dispBox() instead of DispOutAt()/DispBox()
    ! fixed using ADel()/AIns() with xHarbour extended parameters
    ! fixed RT debugger errors caused by missing ::nTabWidth and ::colorSpec
      in HBBrwText class
    ! fixed processing source code with TABs (chr(9))
    ; TOFIX: "Mono Display" causes RT error due to missing color index
             range checking. It also does not change all colors immediately
    ; TOFIX: getdbginput(): writing out of window area, scrolling internal
             buffer, cursor navigation, interrupting by ESC

best regards
Przemek
From harbour.01 at syenar.hu  Thu Oct 16 01:40:50 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 16 01:41:05 2008
Subject: [Harbour] 2008-10-16 07:40 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92f51$Blat.v2.6.2$bf5e844e$1fccb37f7bf2@127.0.0.1>

2008-10-16 07:40 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/achoice.prg
    % Minor optimization.

  * source/rtl/achoice.prg
  * source/rtl/menuto.prg
  * source/rtl/tbrowse.prg
  * source/rtl/tclass.prg
    * Minor formatting.

  * source/rtl/tobject.prg
    * Removed '#pragma DEBUGINFO=OFF' as it's no more 
      needed.

  * source/debug/dbgthsh.prg
  * source/debug/debugger.prg
    * Copied hb_CStr() as __dbgCStr() to debug.lib.
    * Changed calls from hb_CStr() to __dbgCStr().

  * source/debug/dbgtmenu.prg
  * source/debug/dbgtwin.prg
  * source/debug/dbgwa.prg
    * Remaining BOX commands changed to hb_dispBox().

  * source/debug/dbghelp.prg
    ! Fixed one hb_dispBox() call with numeric frame parameter.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 16 01:53:04 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 16 01:53:17 2008
Subject: [Harbour] 2008-10-16 07:52 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92f53$Blat.v2.6.2$74bf08bc$14a0c468c998@127.0.0.1>

2008-10-16 07:52 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/tpersist.prg
  * contrib/hbgd/gd.prg
  * contrib/hbgd/tests/tostring.prg
    * MemoWrit() -> hb_MemoWrit()

  * contrib/hbgd/gd.prg
    ! Fixed potential RTE.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 16 02:01:46 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 16 02:01:58 2008
Subject: [Harbour] Macro to block conversion function
In-Reply-To: <20081014102038.GA25070@34-mo7-2.acn.waw.pl>
References: <5F302FD5-EEA4-4FC2-95F6-4779DB1108AA@syenar.hu>
	<DEAC3BF80838408BA9D7A13FF71EB987@emag>
	<67E728F3-BA72-47E1-8C2D-1D268D313444@syenar.hu>
	<20081014093608.GA20352@34-mo7-2.acn.waw.pl>
	<35911F37-4173-4378-84C2-6461AF64F5EC@syenar.hu>
	<20081014102038.GA25070@34-mo7-2.acn.waw.pl>
Message-ID: <6C6C8B3F-55BD-4877-AF59-5EE3BE908291@syenar.hu>

>>
Hi Przemek,

>> This problem is also with .hrb files and code compiled by
> compiler library. Using set of "safe" functions does not
> resolve the problem fully. It's also necessary to block
> macro compilation or attach the restriction definitions
> to macro compiled code so it will be respected during execution.
> This will cause RT overhead but can be implemented also for
> already compiled code like in .hrb files. We can also add
> PCODE parser which will check if given code does not contain
> some forbidden by us constructions or function calls.
> Such solution will also work for .hrb files. We can also use
> both and parce PCODE to check if we have to attach restriction
> definition to given code.
> Anyhow it will be hard for user to define good restriction
> definition without blocking a lot of functionality.
> I plan to return to this subject when I will work on embedding
> Harbour to apache WWW server (mod_hrb).

Yes, not an easy one, what also came to mind, is that
there should also a way to control how to pass variables
to the macro. But this may be easily resolved by adding
new parameters to hb_macroBlock( "cString"[, xPar1[, xPar2[, ... ]]] ).
Accessible from inside via hb_pvalue().

BTW, I'm right that by using hb_pvalue( n, <xValue> )
it's possible to set the values passed by reference?

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 16 02:11:38 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 16 02:11:50 2008
Subject: [Harbour] 2008-10-16 08:10 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92f56$Blat.v2.6.2$0cb92d08$1f4c653fe124@127.0.0.1>

2008-10-16 08:10 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbwhat/wincore.prg
    ! One STATIC made THREAD STATIC.
    ! STATIC vars renamed to s_*.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 16 02:44:25 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 16 02:44:39 2008
Subject: [Harbour] 2008-10-16 08:42 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92f5a$Blat.v2.6.2$a1317a4a$9341f76a8e0@127.0.0.1>

2008-10-16 08:42 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/common.ch
  * contrib/hbziparc/hbziparc.prg
  * source/rtl/tclass.prg
  * source/rtl/hbini.prg
    * Minor formatting. (hb_Is*() -> hb_is*())

  * contrib/hbct/ctrand.prg
  * contrib/hbct/numconv.prg
  * contrib/hbct/cttime.prg
  * contrib/hbct/showtime.prg
  * contrib/hbwhat/hbwhat.ch
  * utils/hbrun/hbrun.prg
  * source/debug/dbgtobj.prg
  * source/debug/dbgbrwsr.prg
  * source/debug/dbgthsh.prg
  * source/debug/dbgtarr.prg
  * source/rtl/alert.prg
  * source/rtl/tbrowse.prg
    % ValType() -> IS*() / hb_is*()

  * contrib/hbwhat/hbwhat.ch
    % Using common.ch instead of replicating logic.
    * Some formatting.

  * utils/hbtest/hbtest.prg
    * Minor formatting.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 16 03:12:04 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 16 03:12:16 2008
Subject: [Harbour] FM stats on/off dynamic switching
Message-ID: <2D5DB8BE-2E1E-4CB4-A676-39406E230269@syenar.hu>

Hi Przemek,

What do you think of making the choice
between stats on or off via a command line
switch or envvar? Currently both the non-GNU
and the non-GNU ways or choosing between these
are cumbersome, and there is no way to turn
stats on on the field if leakage or corruption
is suspected.

To make it dynamic, we'd probably need to link
in both versions with different names (along
with mem manager), and hb_x*() would need to
do a jump to the right one based on some
pre-filled static pointers. I don't know how
much speed penalty that would give, though.
If it's not that much, it may be worth the
extra flexibility in return.

Brgds,
Viktor

From druzus at acn.waw.pl  Thu Oct 16 07:08:36 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 16 07:08:47 2008
Subject: [Harbour] 2008-10-16 13:08 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081016110836.GA8875@34-mo7-2.acn.waw.pl>

2008-10-16 13:08 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/debug/debugger.prg
    + added __dbgAChoice() - simple AChoice() replacement which uses
      internally HBDbBrowser() class
    * replaced AChoice() with __dbgAChoice()
    * replaced @ ... SAY ... by hb_dispOutAt()

best regards
Przemek
From harbour.01 at syenar.hu  Thu Oct 16 07:22:06 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 16 07:22:20 2008
Subject: [Harbour] 2008-10-16 13:21 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92f81$Blat.v2.6.2$6be78e16$a281f966afa@127.0.0.1>

2008-10-16 13:21 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * make_vc.mak
  * make_gcc.mak
    + Readded -b when HB_BUILD_STATIC=yes.
      Now it should work.

  * make_b32.mak
  * make_vc.mak
  * make_gcc.mak
  * contrib/mtpl_b32.mak
  * contrib/mtpl_gcc.mak
  * contrib/mtpl_vc.mak
    % Deleted -l- switch when HB_BUILD_STATIC=yes.
      Line numbers are automatically enabled when 
      -b switch is used.

  * source/debug/debugger.prg
    * Renamed getdbginput() -> __dbgInput()

  ; NOTE to TOFIX: Do we need "Mono display" these days? :)
--
Brgds,
Viktor

From druzus at acn.waw.pl  Thu Oct 16 07:27:03 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 16 07:27:15 2008
Subject: [Harbour] FM stats on/off dynamic switching
In-Reply-To: <2D5DB8BE-2E1E-4CB4-A676-39406E230269@syenar.hu>
References: <2D5DB8BE-2E1E-4CB4-A676-39406E230269@syenar.hu>
Message-ID: <20081016112703.GA9868@34-mo7-2.acn.waw.pl>

On Thu, 16 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> What do you think of making the choice
> between stats on or off via a command line
> switch or envvar? Currently both the non-GNU
> and the non-GNU ways or choosing between these
> are cumbersome, and there is no way to turn
> stats on on the field if leakage or corruption
> is suspected.

I can chose them very easy type of FM module during linking
by -fmstat switch, f.e.:

   hbmk mycode.prg -n -w -es2 -fmstat

It works perfectly for me for very long time.

> To make it dynamic, we'd probably need to link
> in both versions with different names (along
> with mem manager), and hb_x*() would need to
> do a jump to the right one based on some
> pre-filled static pointers. I don't know how
> much speed penalty that would give, though.
> If it's not that much, it may be worth the
> extra flexibility in return.

It can be made dynamic but because memory allocation is
activated from startup code then enabling/disabling memory
statistic will have to be done inside hb_xgrab() and hb_xalloc()
when any of this function is called 1-st time by code like

   if( s_fInit )
   {
      [chose FM]  // warning: YOU MUST NOT ACTIVATE MEMORY ALLOCATION IN
                  //          THIS CODE !!!
      s_fInit = FALSE;
   }

executed at the beginning of above functions. Then body of hb_xgrab(),
hb_xalloc(), hb_xrealloc(), hb_xfree() we will have to be changed to
sth like:

   if( s_fmEnabled )
   {
      [....]
   }
   else
   {
      [....]
   }

That's all but I do not know if it's worth to do. For me link time
switch is perfect.

BTW DLMALLOC has it's own memory statistic which is always present.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Oct 16 07:38:50 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 16 07:39:01 2008
Subject: [Harbour] FM stats on/off dynamic switching
In-Reply-To: <20081016112703.GA9868@34-mo7-2.acn.waw.pl>
References: <2D5DB8BE-2E1E-4CB4-A676-39406E230269@syenar.hu>
	<20081016112703.GA9868@34-mo7-2.acn.waw.pl>
Message-ID: <3290C89D-7DB1-4ECE-AEF9-8259F4E76113@syenar.hu>

>>
Hi Przemek,

>> What do you think of making the choice
>> between stats on or off via a command line
>> switch or envvar? Currently both the non-GNU
>> and the non-GNU ways or choosing between these
>> are cumbersome, and there is no way to turn
>> stats on on the field if leakage or corruption
>> is suspected.
>
> I can chose them very easy type of FM module during linking
> by -fmstat switch, f.e.:
>
>   hbmk mycode.prg -n -w -es2 -fmstat
>
> It works perfectly for me for very long time.

Yes, but that's not available for non-GNU
builds, which means most users don't have this
ability. Moreover, we have the multiplicative
effect of MT now, so one would now need two
versions of stat/nostat lib, one for MT, one
for ST. This leads to complicated build process,
and complicated and error prone usage. And it's
not dynamic.

>> To make it dynamic, we'd probably need to link
>> in both versions with different names (along
>> with mem manager), and hb_x*() would need to
>> do a jump to the right one based on some
>> pre-filled static pointers. I don't know how
>> much speed penalty that would give, though.
>> If it's not that much, it may be worth the
>> extra flexibility in return.
>
> It can be made dynamic but because memory allocation is
> activated from startup code then enabling/disabling memory
> statistic will have to be done inside hb_xgrab() and hb_xalloc()
> when any of this function is called 1-st time by code like
>
>   if( s_fInit )
>   {
>      [chose FM]  // warning: YOU MUST NOT ACTIVATE MEMORY ALLOCATION  
> IN
>                  //          THIS CODE !!!
>      s_fInit = FALSE;
>   }
>
> executed at the beginning of above functions. Then body of hb_xgrab(),
> hb_xalloc(), hb_xrealloc(), hb_xfree() we will have to be changed to
> sth like:
>
>   if( s_fmEnabled )
>   {
>      [....]
>   }
>   else
>   {
>      [....]
>   }
>
> That's all but I do not know if it's worth to do. For me link time
> switch is perfect.

That assumes an additional and sophisticated layer at
build time plus link time. If possible I'd prefer something
more portable (for non-GNU and non-*nix environments) and
more obvious and easier to implement even for non hbmk
users. Also, current hbmk solution is still not dynamic,
which means I have to choose between speed vs. stat info
at build time.

How much speed drop to you expect in practice, if above
branching would be done on each hb_x*() call?

> BTW DLMALLOC has it's own memory statistic which is always present.

I didn't know, maybe we should have ways to dump it,
but it will be very much platform dependent, so I'm not sure
if it's worth it. If turning off would give any speed
advantage it might be better to do so.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 16 08:07:35 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 16 08:07:48 2008
Subject: [Harbour] FM stats on/off dynamic switching
In-Reply-To: <20081016112703.GA9868@34-mo7-2.acn.waw.pl>
References: <2D5DB8BE-2E1E-4CB4-A676-39406E230269@syenar.hu>
	<20081016112703.GA9868@34-mo7-2.acn.waw.pl>
Message-ID: <FCBC3261-E1B0-4D77-AAC9-2C6A81887585@syenar.hu>

Hi Przemek,

Just to give a simple practical example. To avoid
leaks and potential memory corruption problems in
my app, I'd like to have FM stats 'on' for selected
customers, selected versions, selected usages or
time periods. But, I'd also like to avoid all the
problems with building, distributing, (auto-)updating
two different flavors of binaries.

Also, IMO there could be a way to still keep forced
stats 'on' or 'off' at build time, and just have
HB_FM_STATISTICS_DYN as an additional (preferably
default) option. If the speed penalty is any high,
that is. But I expect a dynamic option turned off
to be an almost unnoticeable speed overhead compared
to a permanently turned on variation, but maybe
even if compared to a permanently turned off setup.

When HB_FM_STATISTICS_DYN (or default) is used,
one could simply turn on stats using command line
switch --fmstat, or setting up HARBOUR envvar
with --fmstat for example on development envs.

Brgds,
Viktor

On 2008.10.16., at 13:27, Przemyslaw Czerpak wrote:

> On Thu, 16 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> What do you think of making the choice
>> between stats on or off via a command line
>> switch or envvar? Currently both the non-GNU
>> and the non-GNU ways or choosing between these
>> are cumbersome, and there is no way to turn
>> stats on on the field if leakage or corruption
>> is suspected.
>
> I can chose them very easy type of FM module during linking
> by -fmstat switch, f.e.:
>
>   hbmk mycode.prg -n -w -es2 -fmstat
>
> It works perfectly for me for very long time.
>
>> To make it dynamic, we'd probably need to link
>> in both versions with different names (along
>> with mem manager), and hb_x*() would need to
>> do a jump to the right one based on some
>> pre-filled static pointers. I don't know how
>> much speed penalty that would give, though.
>> If it's not that much, it may be worth the
>> extra flexibility in return.
>
> It can be made dynamic but because memory allocation is
> activated from startup code then enabling/disabling memory
> statistic will have to be done inside hb_xgrab() and hb_xalloc()
> when any of this function is called 1-st time by code like
>
>   if( s_fInit )
>   {
>      [chose FM]  // warning: YOU MUST NOT ACTIVATE MEMORY ALLOCATION  
> IN
>                  //          THIS CODE !!!
>      s_fInit = FALSE;
>   }
>
> executed at the beginning of above functions. Then body of hb_xgrab(),
> hb_xalloc(), hb_xrealloc(), hb_xfree() we will have to be changed to
> sth like:
>
>   if( s_fmEnabled )
>   {
>      [....]
>   }
>   else
>   {
>      [....]
>   }
>
> That's all but I do not know if it's worth to do. For me link time
> switch is perfect.
>
> BTW DLMALLOC has it's own memory statistic which is always present.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Thu Oct 16 08:16:33 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 16 08:16:46 2008
Subject: [Harbour] 2008-10-16 13:21 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c92f81$Blat.v2.6.2$6be78e16$a281f966afa@127.0.0.1>
References: <01c92f81$Blat.v2.6.2$6be78e16$a281f966afa@127.0.0.1>
Message-ID: <20081016121633.GA25093@34-mo7-2.acn.waw.pl>

On Thu, 16 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> 2008-10-16 13:21 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * make_b32.mak
>   * make_vc.mak
>   * make_gcc.mak
>     + Readded -b when HB_BUILD_STATIC=yes.
>       Now it should work.

I still think it's bad idea to add -b to default debug flags.
This switch was used to recompile Harbour with C debug information
so I was able to ask user about C call stack when sth was wrong.
Now it also enables compiling .prg code with -b. It's invasion
modification because we have different PCODE for debugger so
it's possible that when I ask user to recompile Harbour with
C debugger information some problem will not be repeatable.
I can understand that we have environment variable to enable
C debugging because it's not necessary to remember different
C compilers switches but I do not find anything usable in
forcing -b Harbour compiler flag when C debug is enabled. Each
of us knows it and if it will be necessary then I can ask someone
about recompiling Harbour with PRG_USR=-b.
IMHO we can left -l Harbour switch when C debug information is
enabled because it interaction with HVM is minimal but -b causes
to much changes in HVM internals. It also seriously interacts
with speed so in some cases it will be impossible to debug
C code. F.e. I very often use valgrind which is software CPU
emulator and I need C debug information for human readable
valgrind reports. Valgrind executes code very slow. Sometimes
I have to wait few minutes for results. With -b Harbour switch
in some code minutes becomes hours what makes valgrind usage
unusable. And of course I cannot longer use cachegrind which
is one of valgrind mode which analyse the performance. It's
the best profiler because it counts real CPU and caches on
different levels usage instead of measuring the time.
For Harbour compiled with -b results are unusable because
Harbour debugger changes the real cost.
In summary enabling -b with default builds does not give
anything valuable (at least I do not see anything) but creates
only serious problems which will have to be resolved using some
workarounds.

>   ; NOTE to TOFIX: Do we need "Mono display" these days? :)

Some remote terminals may not support colors or their terminal
definitions in termcap/terminfo may not have color select entries,
f.e. pure VT100. You can have computer with color display but your
terminal emulator will introduce the limitations.
Probably it's very seldom situation but if we have such functionality
then it should work.
In this case it's probably caused by to small color table and such
problems can be exploited also in color mode so we should fix it.
We should also add to TOFIX note about eliminating all
   SetColor(<cColor>)
usage because just like in Clipper saving and restoring colors
is not fully revertible and if you are using more colors then
was defined then new colors are still active, f.e.:

   proc main()
      local cColor
      cColor:=setColor()
      ? cColor
      setColor("W/1,W/2,W/3,W/4,W/5,W/6,W/7,W/8")
      ? setColor()
      setColor(cColor)
      ? setColor()
   return

So we should operate only on colors passed directly. The same
is for RTL functions. If we have to change setColor() and restore
it later then we should operate only on 1-st 4 color values.
Otherwise we introduce new color definitions which are still active
what can interact with some code.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Oct 16 08:22:05 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 16 08:22:16 2008
Subject: [Harbour] 2008-10-16 13:21 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20081016121633.GA25093@34-mo7-2.acn.waw.pl>
References: <01c92f81$Blat.v2.6.2$6be78e16$a281f966afa@127.0.0.1>
	<20081016121633.GA25093@34-mo7-2.acn.waw.pl>
Message-ID: <2ACF6EAF-1934-4CA7-BEE7-CB7D86DF171A@syenar.hu>

Hi Przemek,

On 2008.10.16., at 14:16, Przemyslaw Czerpak wrote:

> In summary enabling -b with default builds does not give
> anything valuable (at least I do not see anything) but creates
> only serious problems which will have to be resolved using some
> workarounds.

Okay, I thought to add it for convenience, but
if it does the reverse, I'll of course revert it.
I personally don't need it.

>>  ; NOTE to TOFIX: Do we need "Mono display" these days? :)
>
> Some remote terminals may not support colors or their terminal
> definitions in termcap/terminfo may not have color select entries,
> f.e. pure VT100. You can have computer with color display but your
> terminal emulator will introduce the limitations.
> Probably it's very seldom situation but if we have such functionality
> then it should work.

True.

> So we should operate only on colors passed directly. The same
> is for RTL functions. If we have to change setColor() and restore
> it later then we should operate only on 1-st 4 color values.
> Otherwise we introduce new color definitions which are still active
> what can interact with some code.

Good observation, I'll keep that in mind.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 16 08:24:03 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 16 08:24:17 2008
Subject: [Harbour] 2008-10-16 14:22 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92f8a$Blat.v2.6.2$136b20f0$1f487a769510@127.0.0.1>

2008-10-16 14:22 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * make_vc.mak
  * make_gcc.mak
  * contrib/mtpl_b32.mak
  * contrib/mtpl_gcc.mak
  * contrib/mtpl_vc.mak
    * Changed -b switch to -l-.
      -b debug mode causes more problems than good for Harbour 
      core/contrib.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 16 08:34:29 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 16 08:34:41 2008
Subject: [Harbour] 2008-10-16 14:33 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c92f8b$Blat.v2.6.2$8886613c$8247250f9da@127.0.0.1>

2008-10-16 14:33 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * common.mak
  * make_b32.bat
  * make_b32.mak
  * make_vc.bat
  * make_vc.mak
  * make_gcc.mak
    * HB_BUILD_VERBOSE=yes is now the default. If someone 
      is wanting to build Harbour from source and is bothered 
      by the compiler command-lines being shown, these can 
      be turned off with HB_BUILD_VERBOSE=no.
      These lines are IMO very important to see, which options 
      were exactly used when Harbour was built, I personally 
      archive these logs along with the builds.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Thu Oct 16 18:08:10 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 16 18:08:20 2008
Subject: [Harbour] 2008-10-17 00:07 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081016220810.GA8683@34-mo7-2.acn.waw.pl>

2008-10-17 00:07 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/common.mak
  * harbour/source/debug/Makefile
  + harbour/source/debug/dbgtinp.prg
    + added HbDbInput class for simple user input (GET)

  * harbour/source/debug/debugger.prg
    ! changed __dbgInput() to use HbDbInput() class instead of ACCEPT
      It fixes all bad visual end edit bad effects caused by ACCEPT.
      TODO: replace all GET references in debugger code with HbDbInput class.

best regards
Przemek
From druzus at acn.waw.pl  Thu Oct 16 21:13:38 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 16 21:13:51 2008
Subject: [Harbour] 2008-10-17 03:13 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081017011338.GA976@34-mo7-2.acn.waw.pl>

2008-10-17 03:13 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/debug/dbgtwin.prg
    * use hb_scroll() instead of scroll()

  * harbour/source/debug/tbrwtext.prg
    ! fixed screen redrawing in horizontal movement

  * harbour/source/debug/debugger.prg
  * harbour/source/debug/dbgtinp.prg
    ! replaced GET/GETLIST objects by HbDbInput()
    ! fixed some interface incompatibilities with Clipper debugger
    * removed HB_NO_READDBG and code using GET classes - HbDbInput()
      works better and is much simpler in use.
    % do not use __GetListActive()/__GetListSetActive() - now debugger
      does not touch GET/GETLIST so it's not necessary to save/restore
      GETLIST state
      Now all references (except HBCLASS) to external .prg code in
      debugger have been removed.
      TODO: remove HB_NO_READDBG from other debugger files replacing
            code inside with __dbgInput()/HbDbInput().
            I would like to leave it for someone else and return to
            core code modifications.

best regards
Przemek
From harbour.01 at syenar.hu  Fri Oct 17 04:17:58 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 17 04:18:10 2008
Subject: [Harbour] 2008-10-17 10:16 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c93030$Blat.v2.6.2$dd5148a8$1a7c4710089a@127.0.0.1>

2008-10-17 10:16 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/debug/dbgtobj.prg
  * source/debug/dbgthsh.prg
  * source/debug/debugger.prg
  * source/debug/dbgtarr.prg
    * Changed rest of GETs to __dbgInput()

  * source/rtl/listbox.prg
    - Removed saving cursor position and color, 
      and changing default color.

  ; NOTE: Couldn't replicate Mono display RTE.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Fri Oct 17 06:41:50 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 17 06:42:00 2008
Subject: [Harbour] 2008-10-17 12:41 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081017104150.GA13544@34-mo7-2.acn.waw.pl>

2008-10-17 12:41 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/debug/debugger.prg
    * changed __dbgInput() to return logical value and set edit value in
      variable passed by reference

  * harbour/source/debug/dbgtobj.prg
  * harbour/source/debug/dbgthsh.prg
  * harbour/source/debug/dbgtarr.prg
    ! fixed typo in VALID block declaration - it was array by mistake
    * removed unnecessary code related to GET behavior
    * use new __dbgInput() format

best regards
Przemek
From druzus at acn.waw.pl  Fri Oct 17 06:45:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 17 06:45:59 2008
Subject: [Harbour] 2008-10-17 10:16 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c93030$Blat.v2.6.2$dd5148a8$1a7c4710089a@127.0.0.1>
References: <01c93030$Blat.v2.6.2$dd5148a8$1a7c4710089a@127.0.0.1>
Message-ID: <20081017104551.GA14092@34-mo7-2.acn.waw.pl>

On Fri, 17 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> 2008-10-17 10:16 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * source/debug/dbgtobj.prg
>   * source/debug/dbgthsh.prg
>   * source/debug/debugger.prg
>   * source/debug/dbgtarr.prg
>     * Changed rest of GETs to __dbgInput()

Thank you.

>   ; NOTE: Couldn't replicate Mono display RTE.

Chose:
   ALT_O, D
it will change some collors but not all (it also should be fixed), then:
   ALT_M, P
to force color updating in visible windows and you will have:
   Error BASE/1132  Bound error: array access
   Called from HBDBBROWSER:FORCESTABLE(182)
   [...]

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct 17 09:56:11 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 17 09:56:24 2008
Subject: [Harbour] 2008-10-17 15:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081017135611.GA29513@34-mo7-2.acn.waw.pl>

2008-10-17 15:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/pp/hbpp.c
    * workaround for warning in some GCC versions which can lost
      user casting during function autoinline optimization.

  * harbour/source/rtl/console.c
  * harbour/source/rtl/gtapi.c
    * moved //INFO message from hb_gtInit() to hb_conInit()

  * harbour/source/rtl/hbgtcore.c
  * harbour/contrib/hbct/ctwin.c
    * minor cleanup

best regards
Przemek
From druzus at acn.waw.pl  Fri Oct 17 10:00:48 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 17 10:00:57 2008
Subject: [Harbour] 2008-10-16 14:22 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c92f8a$Blat.v2.6.2$136b20f0$1f487a769510@127.0.0.1>
References: <01c92f8a$Blat.v2.6.2$136b20f0$1f487a769510@127.0.0.1>
Message-ID: <20081017140048.GA31086@34-mo7-2.acn.waw.pl>

On Thu, 16 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> 2008-10-16 14:22 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * make_b32.mak
>   * make_vc.mak
>   * make_gcc.mak
>   * contrib/mtpl_b32.mak
>   * contrib/mtpl_gcc.mak
>   * contrib/mtpl_vc.mak
>     * Changed -b switch to -l-.
>       -b debug mode causes more problems than good for Harbour 
>       core/contrib.

Thank you.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct 17 10:12:10 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 17 10:12:18 2008
Subject: [Harbour] FM stats on/off dynamic switching
In-Reply-To: <FCBC3261-E1B0-4D77-AAC9-2C6A81887585@syenar.hu>
References: <2D5DB8BE-2E1E-4CB4-A676-39406E230269@syenar.hu>
	<20081016112703.GA9868@34-mo7-2.acn.waw.pl>
	<FCBC3261-E1B0-4D77-AAC9-2C6A81887585@syenar.hu>
Message-ID: <20081017141210.GB31086@34-mo7-2.acn.waw.pl>

On Thu, 16 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> When HB_FM_STATISTICS_DYN (or default) is used,
> one could simply turn on stats using command line
> switch --fmstat, or setting up HARBOUR envvar
> with --fmstat for example on development envs.

I'll add support for HB_FM_STATISTICS_DYN but I'd suggest to
not make it default. At least now. Anyhow activation is not
such easy as you think.
We have to chose type of FM module at start up before 1-st
hb_xgrab() finish. hb_xgrab() is executed from startup code
before main() is executed what effectively excludes using any
application switches because we do not know application arguments
yet. We can use envvar but here we also need new API call because
hb_getenv() internally calls hb_xgrab(). So we will have to add
sth like BOOL hb_isEnvVar( const char * szVarName ) and use this
function. Of course it will work if CRTL initialize application
environment when startup functions are executed. Probably yes in
most of C compilers used by us but it's also possible that it
will not work for all C compilers/OS-es.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct 17 10:35:36 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 17 10:35:44 2008
Subject: [Harbour] 2008-10-17 16:35 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081017143536.GA29219@34-mo7-2.acn.waw.pl>

2008-10-17 16:35 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/console.c
    ! added missing #include "hbapierr.h"

best regards
Przemek
From harbour.01 at syenar.hu  Fri Oct 17 12:23:16 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 17 12:23:28 2008
Subject: [Harbour] 2008-10-17 18:22 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c93074$Blat.v2.6.2$a8ac095a$12b0982e4c94@127.0.0.1>

2008-10-17 18:22 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/debug/dbgtwin.prg
  * source/debug/dbgbrwsr.prg
  * source/debug/tbrwtext.prg
  * source/debug/debugger.prg
    ! Fixed to not crash after switching to mono display.
      DISCLAIMER: This is a quick patch (but even this took 
      hours) and it absolutely can be wrong, incomplete in 
      any ways. I'm not using or knowing debugger code, pls 
      patch it further on.
      NOTE: Color refresh after switching mono/color mode 
            is still wrong and I've given up after trying 
            for a few hours.
    * Minor formatting.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Oct 17 12:36:26 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 17 12:36:43 2008
Subject: [Harbour] FM stats on/off dynamic switching
In-Reply-To: <20081017141210.GB31086@34-mo7-2.acn.waw.pl>
References: <2D5DB8BE-2E1E-4CB4-A676-39406E230269@syenar.hu>
	<20081016112703.GA9868@34-mo7-2.acn.waw.pl>
	<FCBC3261-E1B0-4D77-AAC9-2C6A81887585@syenar.hu>
	<20081017141210.GB31086@34-mo7-2.acn.waw.pl>
Message-ID: <920C299D-ADEB-4B88-B9C2-D99D4E8F34EA@syenar.hu>

Hi Przemek,

Many thanks for your efforts. Not making it the default
is okay with me personally, but for the project itself
most complications would still remain this way. I'd suggest
to measure the speed loss to compare with possible benefits.
Besides making this a runtime option, IMO it would be great
if it could also make Harbour builds/structure simpler,
if of course it doesn't have any bad side-effects.

I'm not sure I fully understand the command-line problem.
If you mean Harbour startup and main(), it'd be possible
to do some tweaks in our C main functions to detect such
switch on the command line, if you mean the C startup/main
stuff (which I guess), I fail to see how our hb_x*() functions
may be called by them. Surely, a command-line switch would
be easier for normal usage. Anyhow we can revisit this later.

Brds,
Viktor

On 2008.10.17., at 16:12, Przemyslaw Czerpak wrote:

> On Thu, 16 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> When HB_FM_STATISTICS_DYN (or default) is used,
>> one could simply turn on stats using command line
>> switch --fmstat, or setting up HARBOUR envvar
>> with --fmstat for example on development envs.
>
> I'll add support for HB_FM_STATISTICS_DYN but I'd suggest to
> not make it default. At least now. Anyhow activation is not
> such easy as you think.
> We have to chose type of FM module at start up before 1-st
> hb_xgrab() finish. hb_xgrab() is executed from startup code
> before main() is executed what effectively excludes using any
> application switches because we do not know application arguments
> yet. We can use envvar but here we also need new API call because
> hb_getenv() internally calls hb_xgrab(). So we will have to add
> sth like BOOL hb_isEnvVar( const char * szVarName ) and use this
> function. Of course it will work if CRTL initialize application
> environment when startup functions are executed. Probably yes in
> most of C compilers used by us but it's also possible that it
> will not work for all C compilers/OS-es.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Oct 17 14:38:20 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 17 14:38:33 2008
Subject: [Harbour] HB_NO_DEBUG vs. default
Message-ID: <46BBF3CE-CE59-482D-AAC5-657D98FF556D@syenar.hu>

Hi Przemek and all,

Here are the speedtst results with Harbour compiled
with -gc3, HB_FM_STATISTICS_OFF, MSVS2008 with and
without -DHB_NO_DEBUG.

Can it be that two simple 'if( struct.var )' lines
(in hb_vmDo()/hb_vmSend()) can cause this much (8%) change
in speed, or am I overlooking something?

---
10/17/08 08:40:13 Windows XP 5.1.2600 Service Pack 3
Harbour 1.1.0dev (Rev. 9662) Microsoft Visual C 15.0.26569 (32 bit)
THREADS: 0
N_LOOPS: 1000000

                                                     DEFAULT NODEBUG
                                                     ------- -------
[ T000: empty loop overhead ]..........................0.06 ...0.08
=========================================================== =======
[ T001: x := L_C ].....................................0.14 ...0.03
[ T002: x := L_N ].....................................0.03 ...0.08
[ T003: x := L_D ].....................................0.08 ...0.08
[ T004: x := S_C ].....................................0.06 ...0.00
[ T005: x := S_N ].....................................0.06 ...0.00
[ T006: x := S_D ].....................................0.02 ...0.00
[ T007: x := M_C ].....................................0.06 ...0.05
[ T008: x := M_N ].....................................0.05 ...0.09
[ T009: x := M_D ].....................................0.05 ...0.02
[ T010: x := P_C ].....................................0.09 ...0.05
[ T011: x := P_N ].....................................0.03 ...0.05
[ T012: x := P_D ].....................................0.02 ...0.09
[ T013: x := F_C ].....................................0.22 ...0.30
[ T014: x := F_N ].....................................0.25 ...0.44
[ T015: x := F_D ].....................................0.20 ...0.19
[ T016: x := o:GenCode ]...............................0.36 ...0.30
[ T017: x := o[8] ]....................................0.25 ...0.11
[ T018: round( i / 1000, 2 ) ].........................0.30 ...0.36
[ T019: str( i / 1000 ) ]..............................0.77 ...0.69
[ T020: val( s ) ].....................................0.42 ...0.33
[ T021: val( a [ i % 16 + 1 ] ) ]......................0.83 ...0.58
[ T022: dtos( d - i % 10000 ) ]........................0.63 ...0.75
[ T023: eval( { || i % 16 } ) ]........................0.78 ...0.48
[ T024: eval( bc := { || i % 16 } ) ]..................0.44 ...0.34
[ T025: eval( { |x| x % 16 }, i ) ]....................0.55 ...0.48
[ T026: eval( bc := { |x| x % 16 }, i ) ]..............0.44 ...0.36
[ T027: eval( { |x| f1( x ) }, i ) ]...................0.64 ...0.64
[ T028: eval( bc := { |x| f1( x ) }, i ) ].............0.48 ...0.50
[ T029: x := &( "f1(" + str(i) + ")" ) ]...............4.14 ...3.92
[ T030: bc := &( "{|x|f1(x)}" ); eval( bc, i ) ].......6.47 ...5.25
[ T031: x := valtype( x ) +  valtype( i ) ]............0.55 ...0.61
[ T032: x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ]...1.09 ...1.25
[ T033: x := a[ i % 16 + 1 ] == s ]....................0.58 ...0.53
[ T034: x := a[ i % 16 + 1 ] = s ].....................0.66 ...0.55
[ T035: x := a[ i % 16 + 1 ] >= s ]....................0.63 ...0.50
[ T036: x := a[ i % 16 + 1 ] <= s ]....................0.53 ...0.47
[ T037: x := a[ i % 16 + 1 ] < s ].....................0.52 ...0.61
[ T038: x := a[ i % 16 + 1 ] > s ].....................0.48 ...0.52
[ T039: ascan( a, i % 16 ) ]...........................0.52 ...0.56
[ T040: ascan( a, { |x| x == i % 16 } ) ]..............4.80 ...4.72
[ T041: if i%1000==0;a:={};end; aadd(a,{i,1,.T.,s,s2...1.97 ...1.98
[ T042: x := a ].......................................0.06 ...0.08
[ T043: x := {} ]......................................0.25 ...0.17
[ T044: f0() ].........................................0.17 ...0.11
[ T045: f1( i ) ]......................................0.20 ...0.11
[ T046: f2( c[1...8] ) ]...............................0.23 ...0.31
[ T047: f2( c[1...40000] ) ]...........................0.23 ...0.25
[ T048: f2( @c[1...40000] ) ]..........................0.30 ...0.25
[ T049: f2( @c[1...40000] ), c2 := c ].................0.50 ...0.23
[ T050: f3( a, a2, s, i, s2, bc, i, n, x ) ]...........0.97 ...0.75
[ T051: f2( a ) ]......................................0.33 ...0.28
[ T052: x := f4() ]....................................1.25 ...1.36
[ T053: x := f5() ]....................................0.50 ...0.38
[ T054: f_prv( c ) ]...................................1.55 ...0.70
=========================================================== =======
[ total application time: ]...........................41.17 ..38.13
[ total real time: ]..................................41.91 ..39.28

Brgds,
Viktor

From druzus at acn.waw.pl  Sat Oct 18 01:43:02 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 18 01:43:08 2008
Subject: [Harbour] FM stats on/off dynamic switching
In-Reply-To: <920C299D-ADEB-4B88-B9C2-D99D4E8F34EA@syenar.hu>
References: <2D5DB8BE-2E1E-4CB4-A676-39406E230269@syenar.hu>
	<20081016112703.GA9868@34-mo7-2.acn.waw.pl>
	<FCBC3261-E1B0-4D77-AAC9-2C6A81887585@syenar.hu>
	<20081017141210.GB31086@34-mo7-2.acn.waw.pl>
	<920C299D-ADEB-4B88-B9C2-D99D4E8F34EA@syenar.hu>
Message-ID: <20081018054302.GA20904@34-mo7-2.acn.waw.pl>

On Fri, 17 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Many thanks for your efforts. Not making it the default
> is okay with me personally, but for the project itself
> most complications would still remain this way. I'd suggest
> to measure the speed loss to compare with possible benefits.

The speed overhead will be minimal. Probably not even measurable.

> Besides making this a runtime option, IMO it would be great
> if it could also make Harbour builds/structure simpler,
> if of course it doesn't have any bad side-effects.

The bad side effect is activation.

> I'm not sure I fully understand the command-line problem.
> If you mean Harbour startup and main(), it'd be possible
> to do some tweaks in our C main functions to detect such
> switch on the command line, if you mean the C startup/main
> stuff (which I guess), I fail to see how our hb_x*() functions
> may be called by them. Surely, a command-line switch would
> be easier for normal usage. Anyhow we can revisit this later.

Our main() function is executed _AFTER_ first calls to hb_xgrab().
Each PCODE module and some subsystems' (like GT or RDD) initial code
is executed _BEFORE_ int main( int argc, char ** argv ) (or WinMain()
in MS-Windows GUI binaries). This is the code executed by the #pragma
directives you were fighting in MSVC 64bit builds. When it's executed
then we know nothing about command line switches because they have not
been passed to our code by CRTL yet. We will receive them later by main()
or WinMain(). It means that we cannot access them at this stage (at least
in portable way). We can try to use environment variable but it will work
_ONLY_ if CRTL initialize process environment table _BEFORE_ it begin to
execute startup/initialization (I do not talk about main()/WinMain()) code.

best regards,
Przemek
From druzus at acn.waw.pl  Sat Oct 18 02:36:50 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 18 02:36:56 2008
Subject: [Harbour] 2008-10-18 08:36 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081018063650.GA12037@34-mo7-2.acn.waw.pl>

2008-10-18 08:36 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/debug/dbgtwin.prg
  * harbour/source/debug/dbgbrwsr.prg
  * harbour/source/debug/debugger.prg
    ! fixed mono color setting
    * minor formatting

best regards
Przemek
From harbour.01 at syenar.hu  Sat Oct 18 04:28:52 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 18 04:29:03 2008
Subject: [Harbour] 2008-10-18 10:27 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c930fb$Blat.v2.6.2$8d8de602$d741291e8de@127.0.0.1>

2008-10-18 10:27 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbapi.h
  * source/common/hbgete.c
    + Added hb_getenv_buffer(). Similar to hb_getenv() but 
      this one needs a buffer+size to be passed, so no memory 
      allocation is done by the function. It also return 
      a BOOL to signal success. It doesn't signal if passed 
      buffer was too small to store the value.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Oct 18 04:58:36 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 18 04:58:46 2008
Subject: [Harbour] 2008-10-18 10:56 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c930ff$Blat.v2.6.2$b4cc7824$434288a89f0@127.0.0.1>

2008-10-18 10:56 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * common.mak
   * make_b32.mak
   * make_vc.mak
   * make_gcc.mak
     % Harbour command line configuration moved to common.mak.

   * source/rtl/tclass.prg
   * source/rtl/tget.prg
     + NOTE added to tclass.prg.
     * Minor formatting.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Sat Oct 18 05:39:45 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 18 05:39:52 2008
Subject: [Harbour] 2008-10-18 11:39 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081018093945.GA21978@34-mo7-2.acn.waw.pl>

2008-10-18 11:39 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/common/hbgete.c
    * modified hb_getenv_buffer() to return logical value indicating
      that environment variable exists even if no buffer is passed

best regards
Przemek
From harbour.01 at syenar.hu  Sat Oct 18 06:45:39 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 18 06:45:51 2008
Subject: [Harbour] FM stats on/off dynamic switching
In-Reply-To: <20081018054302.GA20904@34-mo7-2.acn.waw.pl>
References: <2D5DB8BE-2E1E-4CB4-A676-39406E230269@syenar.hu>
	<20081016112703.GA9868@34-mo7-2.acn.waw.pl>
	<FCBC3261-E1B0-4D77-AAC9-2C6A81887585@syenar.hu>
	<20081017141210.GB31086@34-mo7-2.acn.waw.pl>
	<920C299D-ADEB-4B88-B9C2-D99D4E8F34EA@syenar.hu>
	<20081018054302.GA20904@34-mo7-2.acn.waw.pl>
Message-ID: <9D965823-EB5E-4714-9221-F3CEA04B1493@syenar.hu>

>>
Hi Przemek,

>> may be called by them. Surely, a command-line switch would
>> be easier for normal usage. Anyhow we can revisit this later.
>
> Our main() function is executed _AFTER_ first calls to hb_xgrab().
> Each PCODE module and some subsystems' (like GT or RDD) initial code
> is executed _BEFORE_ int main( int argc, char ** argv ) (or WinMain()
> in MS-Windows GUI binaries). This is the code executed by the #pragma
> directives you were fighting in MSVC 64bit builds. When it's executed
> then we know nothing about command line switches because they have not
> been passed to our code by CRTL yet. We will receive them later by  
> main()
> or WinMain(). It means that we cannot access them at this stage (at  
> least
> in portable way). We can try to use environment variable but it will  
> work
> _ONLY_ if CRTL initialize process environment table _BEFORE_ it  
> begin to
> execute startup/initialization (I do not talk about main()/ 
> WinMain()) code.

Ops sure, I get it now.

If dynamic setting won't cause noticeable speed drop
(which is very nice news), it may be useful IMO to
change the current build-time/link-time selection to
simply change just one flag to indicate which mode to
use by default on startup. And this default could be
overridden with an envvar (or maybe in the future by
command line on those platforms where it's available
at pre-startup stage - or, some other methods we may
find useful in practice). If this is done so, DYN
could be made the default, while keeping it OFF by
default for release builds and ON by default for
normal devel (trunk) builds.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Oct 18 10:24:07 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 18 10:24:19 2008
Subject: [Harbour] 2008-10-18 16:15 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9312d$Blat.v2.6.2$2e7adae4$3286786fdb0@127.0.0.1>

2008-10-18 16:15 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  - bin/bld.bat
  + bin/hbmk.bat
  - bin/bld_os2.cmd
  + bin/hbmk_os2.cmd
  - bin/bld_b32.bat
  + bin/hbmk_b32.bat
  - bin/bld_vc.bat
  + bin/hbmk_vc.bat
  * tests/bld_b32.bat
  * tests/bld_vc.bat
  * contrib/hbmysql/tests/bld_b32.bat
  * contrib/hbmysql/tests/bld_vc.bat
  * contrib/hbct/tests/bld_b32.bat
  * contrib/hbct/tests/bld_vc.bat
  * contrib/xhb/tests/bld_b32.bat
  * contrib/xhb/tests/bld_vc.bat
  * contrib/hbodbc/tests/bld_b32.bat
  * contrib/hbodbc/tests/bld_vc.bat
  * contrib/hbtpathy/tests/bld_b32.bat
  * contrib/hbtpathy/tests/bld_vc.bat
  * contrib/hbmzip/tests/bld_b32.bat
  * contrib/hbmzip/tests/bld_vc.bat
  * contrib/hbole/tests/bld_b32.bat
  * contrib/hbole/tests/bld_vc.bat
  * contrib/hbsqlit3/tests/bld_b32.bat
  * contrib/hbsqlit3/tests/bld_vc.bat
  * contrib/hbapollo/tests/bld_b32.bat
  * contrib/hbapollo/tests/bld_vc.bat
  * contrib/hbfbird/tests/bld_b32.bat
  * contrib/hbfbird/tests/bld_vc.bat
  * contrib/hbziparc/tests/bld_b32.bat
  * contrib/hbziparc/tests/bld_vc.bat
  * contrib/hbnf/tests/bld_b32.bat
  * contrib/hbnf/tests/bld_vc.bat
  * contrib/hbcurl/tests/bld_b32.bat
  * contrib/hbcurl/tests/bld_vc.bat
  * contrib/hbhpdf/tests/bld_b32.bat
  * contrib/hbhpdf/tests/bld_vc.bat
  * contrib/rddado/tests/bld_b32.bat
  * contrib/rddado/tests/bld_vc.bat
  * contrib/gtwvg/tests/bld_vc.bat
  * contrib/gtwvg/tests/bld_b32.bat
  * contrib/hbpgsql/tests/bld_b32.bat
  * contrib/hbpgsql/tests/bld_vc.bat
  * contrib/hbclipsm/tests/bld_b32.bat
  * contrib/hbclipsm/tests/bld_vc.bat
  * contrib/rddads/tests/bld_b32.bat
  * contrib/rddads/tests/bld_vc.bat
  * contrib/hbfimage/tests/bld_b32.bat
  * contrib/hbfimage/tests/bld_vc.bat
  * contrib/hbgd/tests/bld_vc.bat
  * contrib/hbgd/tests/bld_b32.bat
  * contrib/hbmisc/tests/bld_b32.bat
  * contrib/hbmisc/tests/bld_vc.bat
  * contrib/hbgf/tests/bld_b32.bat
  * contrib/hbgf/tests/bld_vc.bat
  * contrib/hbtip/tests/bld_vc.bat
  * contrib/hbtip/tests/bld_b32.bat
  * contrib/hbwin/tests/bld_b32.bat
  * contrib/hbwin/tests/bld_vc.bat
  * contrib/hbvpdf/tests/bld_b32.bat
  * contrib/hbvpdf/tests/bld_vc.bat
  * contrib/hbwhat/tests/bld_b32.bat
  * contrib/hbwhat/tests/bld_vc.bat
  * contrib/examples/hbsqlit2/tests/bld_b32.bat
  * contrib/examples/hbsqlit2/tests/bld_vc.bat
    * Renamed bin\bld*.* files to bin\hbmk*.*. This 
      dir may be put in the path in user environments, 
      so it's necessary to put the name into the Harbour 
      namespace. The new name is also the one supported 
      on *nix/bash platforms, albeit with slightly 
      different usage.
      INCOMPATIBLE. Please update your environment.
      To achieve compatbility with older Harbour versions 
      and xhb, you can locally add a bld.bat file with 
      the content: '@call hbmk.bat %1 %2 %3 %4 %5 %6 %7 %8 %9'

  * source/common/hbgete.c
    * Minor.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Oct 18 10:28:06 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 18 10:28:16 2008
Subject: [Harbour] [1.0] 2008-10-18 16:23 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c9312d$Blat.v2.6.2$bc972562$195c5d9db232@127.0.0.1>

2008-10-18 16:23 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/bld.bat
  + config/w32/mingw.cf
    + Accepting 'mingw' as HB_COMPILER for better 1.1 
      compatibility.

  + bin/hbmk.bat
  + bin/hbmk_b32.bat
  + bin/hbmk_vc.bat
    + Added 1.1 compatible files.

  * include/hbgtcore.h
    + Added dummy hb_gt_BaseFree() for better 1.1 compatibility.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Oct 18 10:31:48 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 18 10:31:57 2008
Subject: [Harbour] [1.0] 2008-10-18 16:30 UTC+0200 Viktor Szakats
	(harbour.01 syenar hu)
Message-ID: <01c9312e$Blat.v2.6.2$40e9a862$b4686cb6d6@127.0.0.1>

2008-10-18 16:30 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * harbour-ce-spec
  * harbour-w32-spec
  * harbour.spec
  * include/hbver.h
    * Changed version number to 1.0.2dev
--
Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Sat Oct 18 13:47:33 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Oct 18 13:47:43 2008
Subject: [Harbour] Warning
Message-ID: <21560BFB817E41558B832CEB1065311F@emag>

Warning W8004 source\common\hbgete.c 118: 'bRetVal' is assigned a value that 
is never used in function hb_getenv_buffer

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Sat Oct 18 15:18:20 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 18 15:18:30 2008
Subject: [Harbour] 2008-10-18 21:16 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c93156$Blat.v2.6.2$4832fa7e$14381d363110@127.0.0.1>

2008-10-18 21:16 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/common/hbgete.c
    ! Fixed recent warning on Win32 platforms.

  * contrib/xhb/hbcrypt.c
    * Changed to just work instead of RTE-in if any 
      of the params are empty on non-strings. If 
      non-string is passed, it's considered as 
      empty string.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Oct 18 16:03:38 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 18 16:03:47 2008
Subject: [Harbour] 2008-10-18 22:03 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9315c$Blat.v2.6.2$9c433fd8$ec4443d64b4@127.0.0.1>

2008-10-18 22:03 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/xhb/hbcrypt.c
    ! Fixed lower level crypt functions to not do 
      zero division on zero length key input.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Oct 18 16:23:08 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 18 16:23:18 2008
Subject: [Harbour] 2008-10-18 22:21 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9315f$Blat.v2.6.2$559bedca$d80b05a1104@127.0.0.1>

2008-10-18 22:21 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbmysql/utils/bld_b32.bat
  * contrib/hbmysql/utils/bld_vc.bat
    * One final missing bld.bat -> hbmk.bat changed done.

  * contrib/hbapollo/readme.txt
    * Minor update.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Oct 18 18:07:59 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 18 18:08:17 2008
Subject: [Harbour] 2008-10-19 00:05 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9316d$Blat.v2.6.2$fb480b2e$aec2f378218@127.0.0.1>

2008-10-19 00:05 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * common.mak
  * include/hbextern.ch
  * source/rtl/Makefile
  + source/rtl/strtrim.c
    + Added function HB_N2S( <number> ) -> <string>.
      This is equivalent to LTrim( Str( <number> ) ), 
      just faster.

  * source/rtl/dircmd.prg
  * source/rtl/tget.prg
    * Minor cleanup.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Oct 18 18:23:48 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 18 18:23:58 2008
Subject: [Harbour] 2008-10-19 00:17 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c93170$Blat.v2.6.2$30f77d16$18dc3c1efe66@127.0.0.1>

2008-10-19 00:17 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/assert.ch
  * contrib/xhb/hbcompat.ch
  * source/debug/tbrwtext.prg
  * source/debug/dbgthsh.prg
  * source/debug/debugger.prg
  * source/debug/dbgwa.prg
  * source/debug/dbgtarr.prg
  * source/rtl/errorsys.prg
  * source/rtl/valtoexp.prg
  * source/rtl/getsys.prg
  * source/rtl/tgetlist.prg
  * source/rtl/browse.prg
  * source/rtl/alert.prg
  * source/rtl/tscalar.prg
  * source/rtl/tpersist.prg
  * utils/hbmake/hbmake.prg
  * utils/hbrun/hbrun.prg
    % Using hb_N2S() instead of LTrim( Str() ) expressions.
    ; NOTE: contribs and hbdoc not touched yet.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Oct 19 03:02:26 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 19 03:02:36 2008
Subject: [Harbour] 2008-10-19 09:00 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c931b8$Blat.v2.6.2$a4b3eeae$13fc71ecef7a@127.0.0.1>

2008-10-19 09:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbextern.ch
  * include/assert.ch
  * common.mak
  * source/rtl/Makefile
  - source/rtl/strtrim.c
  + source/rtl/hbntos.c
  * contrib/xhb/hbcompat.ch
  * source/debug/dbgthsh.prg
  * source/debug/tbrwtext.prg
  * source/debug/dbgwa.prg
  * source/debug/debugger.prg
  * source/debug/dbgtarr.prg
  * source/rtl/errorsys.prg
  * source/rtl/valtoexp.prg
  * source/rtl/getsys.prg
  * source/rtl/tgetlist.prg
  * source/rtl/browse.prg
  * source/rtl/alert.prg
  * source/rtl/tclass.prg
  * source/rtl/tsymbol.prg
  * source/rtl/tscalar.prg
  * source/rtl/tpersist.prg
  * utils/hbmake/hbmake.prg
  * utils/hbrun/hbrun.prg
    * Renamed hb_N2S() to hb_NToS() which feels more 
      natural in Clipper.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Oct 19 03:21:59 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 19 03:22:09 2008
Subject: [Harbour] 2008-10-19 09:16 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c931bb$Blat.v2.6.2$5fe71096$1298bfce0558@127.0.0.1>

2008-10-19 09:16 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * common.mak
  * contrib/mtpl_b32.mak
  * contrib/mtpl_gcc.mak
  * contrib/mtpl_vc.mak
    + Made -gc3 switch the default. This will result in 
      noticeably faster .prg code execution at the cost of 
      a slightly bigger executable. Speaking of the core, 
      this can result at maximum 250K of extra executable 
      size increase, if the final executable uses _all_ 
      core .prg functions. Usually though it's much lower 
      than that, especially for GUI programs, since the 
      majority of core .prg code deals with CUI elements, 
      like TBrowse(), TGet(), 5.3 compatible CUI controls, 
      .frm and .lbl support, MemoEdit().

  * contrib/examples/dbu/bld_b32.bat
  * contrib/examples/dbu/bld_vc.bat
  * utils/hbdoc/bld_vc.bat
  * utils/hbdoc/bld_b32.bat
  * utils/hbmake/bld_b32.bat
  * utils/hbmake/bld_vc.bat
    + Added -l Harbour switch.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Oct 19 03:35:09 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 19 03:35:18 2008
Subject: [Harbour] 2008-10-19 09:34 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c931bd$Blat.v2.6.2$36f72e9e$1b14f24fb86e@127.0.0.1>

2008-10-19 09:34 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/filebuf.c
  * source/rtl/filesys.c
    ! Fixed -W4 warnings.

  * source/rtl/tclass.prg
  * source/rtl/tsymbol.prg
    ! Fixed mistakes in recent commit.
--
Brgds,
Viktor

From myorg63 at mail.ru  Sun Oct 19 11:50:25 2008
From: myorg63 at mail.ru (Petr Chornyj)
Date: Sun Oct 19 11:50:33 2008
Subject: [Harbour] Error: Unresolved external '_hb_stackPop'
Message-ID: <20057370.post@talk.nabble.com>


Turbo Incremental Link 5.69 Copyright (c) 1997-2005 Borland
Error: Unresolved external '_hb_stackPop' referenced from
E:\HARBOUR\OBJ\DLL\B32\HBTEST.OBJ

** error 2 ** deleting bin\b32\hbtest-dll.exe


Regards,
Petr
-- 
View this message in context: http://www.nabble.com/Error%3A-Unresolved-external-%27_hb_stackPop%27-tp20057370p20057370.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sun Oct 19 17:13:08 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 19 17:13:27 2008
Subject: [Harbour] Error: Unresolved external '_hb_stackPop'
In-Reply-To: <20057370.post@talk.nabble.com>
References: <20057370.post@talk.nabble.com>
Message-ID: <37141E57-A4CB-4C9C-AFA6-5DEF0E104DFA@syenar.hu>

Hi Petr,

Thanks, I can confirm it with default BCC build
when HB_BUILD_DLL=yes. This seem like a bad interaction
between -gc3 switch and .dll creation. Probably present
in older versions, too, but it was hidden because
no one tried this combination before.

I'm not sure what is the best way to fix this.

Brgds,
Viktor

On 2008.10.19., at 17:50, Petr Chornyj wrote:

>
> Turbo Incremental Link 5.69 Copyright (c) 1997-2005 Borland
> Error: Unresolved external '_hb_stackPop' referenced from
> E:\HARBOUR\OBJ\DLL\B32\HBTEST.OBJ
>
> ** error 2 ** deleting bin\b32\hbtest-dll.exe
>
>
> Regards,
> Petr
> -- 
> View this message in context: http://www.nabble.com/Error%3A-Unresolved-external-%27_hb_stackPop%27-tp20057370p20057370.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sun Oct 19 17:16:42 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 19 17:16:51 2008
Subject: [Harbour] 2008-10-19 23:15 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9322f$Blat.v2.6.2$fbad9f62$16ac2bf1d99c@127.0.0.1>

2008-10-19 23:15 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/mtpl_b32.mak
  * contrib/mtpl_gcc.mak
  * contrib/mtpl_vc.mak
    * Fine tuning latest setting changes. I've rather removed 
      -gc3 as contrib default switch. For those contribs where 
      speed is critical, this switch should be turned on 
      on a per contrib basis.
--
Brgds,
Viktor

From info at fsgiudice.com  Sun Oct 19 18:18:46 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Oct 19 18:18:58 2008
Subject: [Harbour] 2008-10-20 00:15 UTC+0200 Francesco Saverio Giudice (info
	fsgiudice com)
Message-ID: <48FBB246.8030207@fsgiudice.com>


Hi all,

2008-10-20 00:15 UTC+0200 Francesco Saverio Giudice (info fsgiudice com)
   + contrib/hbdbgfx
     + contrib/hbdbgfx/dbgfxc.c
     + contrib/hbdbgfx/dbgfxc.prg
     + contrib/hbdbgfx/hbdbgfx.h
     + contrib/hbdbgfx/sprintf.prg
       + hbdbgfx lib add some functions usefull for debugging purpose:
         hb_ToOutDebug( cMsg, p1, p2, ... )
            that outputs to OutDebug from Microsoft debugview
         HB_ToLogFile( cLogFile, cMsg, p1, p2, ... )
            that outputs to a file
         where cMsg is formatted like printf()
         example:
           hb_ToOutDebug( "fields: name = %s, address = %s", 
field->name, field->address )
         and some utility functions:
         HB_ToOutDebugOnOff( lOnOff )
         HB_LogFileOnOff( lOnOff )
         HB_EmptyLogFileOnOff( lOnOff )
         Above functions are available either at prg than at C level.
         Actually it is only for window platform.


Viktor, could you kindly check for make files ?

Best regards

Francesco
From info at fsgiudice.com  Sun Oct 19 18:27:00 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Oct 19 18:27:13 2008
Subject: [Harbour] 2008-10-20 00:25 UTC+0200 Francesco Saverio Giudice (info
	fsgiudice com)
In-Reply-To: <48FBB246.8030207@fsgiudice.com>
References: <48FBB246.8030207@fsgiudice.com>
Message-ID: <48FBB434.4060707@fsgiudice.com>

2008-10-20 00:25 UTC+0200 Francesco Saverio Giudice (info fsgiudice com)
   * contrib/hbdbgfx
     * contrib/hbdbgfx/dbgfxc.c
     * contrib/hbdbgfx/dbgfxc.prg
     * contrib/hbdbgfx/hbdbgfx.h
       * updated copyright year
         minor corrections


Best regards

Francesco
From druzus at acn.waw.pl  Sun Oct 19 19:18:41 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct 19 19:18:45 2008
Subject: [Harbour] 2008-10-20 01:18 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081019231841.GA19657@34-mo7-2.acn.waw.pl>

2008-10-20 01:18 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbstack.h
    ! added HB_EXPORT to hb_stack*() functions used in -gc3 code

best regards
Przemek
From teo at windtelsoft.com  Sun Oct 19 21:19:52 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Mon Oct 20 00:14:13 2008
Subject: [Harbour] 2008-10-19 20:02 UTC-0500 Teo Fonrouge
	(teo/at/windtelsoft/dot/com)
Message-ID: <200810192019.53120.teo@windtelsoft.com>

2008-10-19 20:02 UTC-0500 Teo Fonrouge (teo/at/windtelsoft/dot/com)
  * source/debug/dbgbrwsr.prg
    ! Fixed out of range error ( BASE/1133 ) when scrolling out the source
      code window and then executing a "run" command.

best regards,

Teo
From harbour.01 at syenar.hu  Mon Oct 20 01:56:42 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 20 01:56:54 2008
Subject: [Harbour] 2008-10-20 01:18 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081019231841.GA19657@34-mo7-2.acn.waw.pl>
References: <20081019231841.GA19657@34-mo7-2.acn.waw.pl>
Message-ID: <0F87D0DD-01F6-4BCA-8B7B-33EA84381DB8@syenar.hu>

Thanks Przemek, now it's fine.

Brgds,
Viktor

On 2008.10.20., at 1:18, Przemyslaw Czerpak wrote:

> 2008-10-20 01:18 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbstack.h
>    ! added HB_EXPORT to hb_stack*() functions used in -gc3 code
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Oct 20 02:47:19 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 20 02:47:25 2008
Subject: [Harbour] 2008-10-20 08:39 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9327f$Blat.v2.6.2$b24c0372$87477414308@127.0.0.1>

2008-10-20 08:39 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbdbgfx/Makefile
  * contrib/hbdbgfx/common.mak
  + contrib/hbdbgfx/make_gcc.sh
  * contrib/hbdbgfx/make_b32.bat
  * contrib/hbdbgfx/make_vc.bat
  * contrib/hbdbgfx/hbdbgfx.h
  * contrib/hbdbgfx/dbgfxc.c
  * contrib/hbdbgfx/dbgfx.prg
  * contrib/hbdbgfx/sprintf.prg
    * Some cleanups and fixes.
    ; TOFIX: hb_ToOutDebug() for WinCE/Unicode.
             Maybe adding other platforms.
--
Brgds,
Viktor

From info at fsgiudice.com  Mon Oct 20 03:02:54 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Oct 20 03:03:05 2008
Subject: [Harbour] 2008-10-20 08:39 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c9327f$Blat.v2.6.2$b24c0372$87477414308@127.0.0.1>
References: <01c9327f$Blat.v2.6.2$b24c0372$87477414308@127.0.0.1>
Message-ID: <48FC2D1E.8060002@fsgiudice.com>

Hi Viktor,

Il 20/10/2008 8.47, Szak?ts Viktor ha scritto:
> 2008-10-20 08:39 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * contrib/hbdbgfx/Makefile
>   * contrib/hbdbgfx/common.mak
>   + contrib/hbdbgfx/make_gcc.sh
>   * contrib/hbdbgfx/make_b32.bat
>   * contrib/hbdbgfx/make_vc.bat
>   * contrib/hbdbgfx/hbdbgfx.h
>   * contrib/hbdbgfx/dbgfxc.c
>   * contrib/hbdbgfx/dbgfx.prg
>   * contrib/hbdbgfx/sprintf.prg
>     * Some cleanups and fixes.
>     ; TOFIX: hb_ToOutDebug() for WinCE/Unicode.
>              Maybe adding other platforms.

Thank you.
Best regards

Francesco

From druzus at acn.waw.pl  Mon Oct 20 11:26:55 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 20 11:27:01 2008
Subject: [Harbour] 2008-10-20 17:26 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081020152655.GA6356@34-mo7-2.acn.waw.pl>

2008-10-20 17:26 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/filebuf.c
    ! fixed bad typo in lock table resizing

  * harbour/source/rdd/hbsix/sxcompr.c
    ! fixed ring buffer initialization in Sx_Compress()

best regards
Przemek
From teo at windtelsoft.com  Mon Oct 20 13:07:34 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Mon Oct 20 13:07:47 2008
Subject: [Harbour] 2008-10-20 11:59 UTC-0500 Teo Fonrouge
	(teo/at/windtelsoft/dot/com)
Message-ID: <200810201207.34104.teo@windtelsoft.com>

2008-10-20 11:59 UTC-0500 Teo Fonrouge (teo/at/windtelsoft/dot/com)
  * source/debug/debugger.prg
    ! Fixed error when selecting "Restore Settings" and the current prg source
      is not in the "path for Files" option. (NIL ::oBrwText at line 1478 on
      debugger.prg)


best regards,

Teo
From massimo.belgrano at gmail.com  Mon Oct 20 13:07:44 2008
From: massimo.belgrano at gmail.com (Massimo Belgrano)
Date: Mon Oct 20 13:08:04 2008
Subject: [Harbour] Visual webgui & harbour
Message-ID: <loom.20081020T170318-519@post.gmane.org>

This in an interesting post regarding webgui i think that will be intresting a
wrapper for harbour

>>
Why I developed Visual WebGui ?+
Well first of all for those of you who do not know what is Visual WebGui (shame
on you)...

Visual WebGui is a platform that exposes an SDK with the same API as WinForms
and the design time capabilities only runtime product runs as a .NET web site
through a unique communication layer and presentation layer. WebGui lets you
develop outlook web access like applications with out any know how of web
development. If you are a WinForms developer or a VB6 developer you should be
able to start developing almost immediately. Any way that is WebGui and as Mel
Gibson said  (in conspiracy theory) ?now he nose...?.

Well I was, for as long as I remember dreaming on opening my own startup, from
the days of the great bubble and way after that. Then one day I thought that
developing database driven applications are too complex and I started to analyze
way. I looked on it from every prospective and I tried to develop some kind of
entity mapping to DB application which you defined your entities in an abstract
way and define searches you would like to do on those entities and the
application tried to produce you an object oriented kind of database with
interfaces and classes and you name it. Any way I did it, I had one very complex
database and a great deal of stored procedures and some console like UI to test
the application.

In that exact moment I relaxed and was happy with my work of art, thinking the
hard work is behind me. I had a working prototype, I was testing performance and
it was quite good for an auto generated database and at this point I needed a UI
layer. Of course I wanted a web application as I know from my experience
customers usually prefer and I would be able to share resources between the
administrator application to the web application I wanted to generate from that
generated database.

Well as you can guess I was very frustrated as I had to throw in allot of effort
in making the UI. I had for my disposal lots of tools which I will not name for
understandable reasons, but every road I looked at had for me tones of work to
be done.

I could go to full server side ASP.NET solution but the I would be generating a
site experience rather then an application and lets say I am good with that it
is still no bed of roses. You need to design pages and the relations between
them and protect them as they receive parameters and you need to know your
context as you can be in the middle of some kind of process and at the end of
the road you get one glorified web site.

I could have taken the client side road using client side frameworks out there
which can give me a very nice desktop like look and feel and work with services
but then I need twice the security I needed before and the most important issue
I will develop it in script language. Well give me a break I know some of you
out there are glorifying script languages like moses in one of the commands had
?tho shall use scripts to build web applications?, but I have been a script
developer for long time and it is just bad.

I agree you can do some very cool stuff with scripts as there are no rules, no
bindings, no coffining data types and code can be manipulated at runtime, but no
one tells you that it can be hell to debug when you have lots of scripts, that
working in teams is almost impossible, that you have browser issues that you
need to be Einstein to get your self out of those issues and you will still be
wasting tones of time. And of course there is the mishmash products as I call
them which let you declarative define your app and they take care of scripting
for you. At this point I hate to be the nay saying guy again but XML has it's
advantages but to use it as a programming language in my point of view using XML
for coding is just as abusing as using it as a database.

I remember that there where days when the XML was starting to catch that it was
abused to be a full database. There where books out there called ?XML as a
database? well thank god we are over that and back to our issue I see XML as a
programming language doing the same abuse as XML as a database. XML is great for
defining a structure of an application or a screen (aka as XAML..) and is
excellent for mapping but for god sake leave the coding out of it (scripts are
better). Any way declarative XML solutions can only take you so far as they
assume what are your tasks, they lack in context and most important they are not
a programming language!!!!

By the way don't take me wrong on my day job I was doing all the above. There
comes a time when a programmer faces his boss and he will do all the above over
and over, until his brain explodes. In my day job I was developing a outlook
like application but for content management, with all the above. I had tones of
scripts, tones of declarative XML and I did it. I had one hell of a system. I
was so proud I would gaze at my system enjoying the magnificent UI... Until my
boss came telling me that what I did was great and exactly what he dreamed about
but the customer wants it a little bit different and that when sheet hit the fan
with a great bang.

Back to my startup, I started to search a way to avoid all the X factors of
developing web applications and it happened to be that I was doing some projects
over WinForms, producing smart client applications and it hit me. We are
constantly obsessed with making web applications be more responsive and complex,
constantly searching how to improve the user experience and from framework to
framework we are making the programming experience a living hell. We have that
last AJAX buzz giving one hell of a kick to web application user experience but
putting again a big load of head aces to us programmers while my experience with
programming with WinForms was amazing I could actually do what I wanted and
concentrate on my business logic.

Let me ask you some questions:
Do you know how to create a treeview in DHTML?
Do you know how to make a browser window opened getting user a created item data
and to add it to an item on the main view's listview?
Do you know how to make a part of the screen update ?
Do you know what happens to a IE TD element when you set the outerHTML property?
Do you know how to make a table render faster in IE ?
Do you know how to protect a web method being called by an unauthorized user ?
Do you know how to prevent SQL injection to your site?
Do you know how to make a list with static headers so when a user scrolls down
the screen he still see the headers ?
Do you know how to create a context menu and avoiding screen flickering in IE ?
Do you know how to prevent memory leaks in IE ?
Do you know how to make FireFox show a gradient background ?

I could keep on asking questions from here to eternity...

Well I believe that if you develop a generic database based application
generator you should not have to deal with these questions. You should be able
to stick with what you do best. Well in my case it turns out I am more happy
doing UI frameworks although a couple of months later I worked in a company that
was using the FileNet infrastructure and it turns out that I had planed a
database very close to their database.

Any way that is way I developed WebGui.


From druzus at acn.waw.pl  Mon Oct 20 15:17:27 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 20 15:17:28 2008
Subject: [Harbour] 2008-10-20 21:16 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081020191727.GA339@34-mo7-2.acn.waw.pl>

2008-10-20 21:16 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbct/ctwin.c
    * moved internal CTW data to structure allocated dynamically and
      hold by inside current thread GT (HB_GT) to eliminate static
      variables used by GTCTW. Now each thread can have its own
      independent set of CTWindows if it allocated new GT.

  * harbour/contrib/hbct/tests/ctwtest.prg
    * removed two unused local variables

best regards
Przemek
From druzus at acn.waw.pl  Mon Oct 20 15:21:15 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 20 15:21:16 2008
Subject: [Harbour] 2008-10-20 11:59 UTC-0500 Teo Fonrouge
	(teo/at/windtelsoft/dot/com)
In-Reply-To: <200810201207.34104.teo@windtelsoft.com>
References: <200810201207.34104.teo@windtelsoft.com>
Message-ID: <20081020192115.GA8252@34-mo7-2.acn.waw.pl>

On Mon, 20 Oct 2008, Teo Fonrouge wrote:

Hi Teo,

> 2008-10-20 11:59 UTC-0500 Teo Fonrouge (teo/at/windtelsoft/dot/com)
>   * source/debug/debugger.prg
>     ! Fixed error when selecting "Restore Settings" and the current prg source
>       is not in the "path for Files" option. (NIL ::oBrwText at line 1478 on
>       debugger.prg)

Many thanks for this and previous fixes.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Oct 20 20:40:56 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 20 20:40:56 2008
Subject: [Harbour] 2008-10-21 02:40 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081021004056.GA9437@34-mo7-2.acn.waw.pl>

2008-10-21 02:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/common.mak
  * harbour/source/lang/Makefile
  + harbour/source/lang/msgptiso.c
    + added PTISO lang module

  * harbour/source/lang/msgpt.c
    * formatting

  * harbour/contrib/hbct/ctwin.c
    ! fixed restoring active window after executing CTWIN alert()
      with window 0 active

best regards
Przemek
From fredseyffert at sprintmail.com  Mon Oct 20 23:46:52 2008
From: fredseyffert at sprintmail.com (Fred Seyffert)
Date: Mon Oct 20 23:47:06 2008
Subject: [Harbour] Warning
Message-ID: <E1Ks8Cw-0002V4-9n@elasmtp-mealy.atl.sa.earthlink.net>



-----Original Message-----
From: Enrico Maria Giordano <e.m.giordano@emagsoftware.it>
Sent: October 18, 2008 11:47 AM
To: Harbour Project Main Developer List. <harbour@harbour-project.org>
Subject: [Harbour] Warning

Warning W8004 source\common\hbgete.c 118: 'bRetVal' is assigned a value that 
is never used in function hb_getenv_buffer

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Oct 21 02:43:41 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 21 02:44:02 2008
Subject: [Harbour] 2008-10-21 08:29 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c93348$Blat.v2.6.2$5b1861da$5c85aaf981c@127.0.0.1>

2008-10-21 08:29 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  + contrib/rddsql
  + contrib/rddsql/common.mak
  + contrib/rddsql/tests
  + contrib/rddsql/tests/test1.prg
  + contrib/rddsql/tests/bld_b32.bat
  + contrib/rddsql/tests/bld_vc.bat
  + contrib/rddsql/Makefile
  + contrib/rddsql/make_b32.bat
  + contrib/rddsql/make_vc.bat
  + contrib/rddsql/make_gcc.sh
  + contrib/rddsql/mysqldd.c
  + contrib/rddsql/sqlbase.c
  + contrib/rddsql/sqlmix.c
  + contrib/rddsql/hbsqldd.h
    + Added SQL RDD sent to the list by Mindaugas.
    * Changed strcpy(), unused vars, startup code, 
      added make files, fixed all MSVS/BCC warnings, 
      other minor cleanups.
    * Changed 'BYTE val[]' to 'BYTE * val' in struct decl.
    ; TOFIX: It doesn't compile on MSVC due to this error:
             .\mysqldd.c(65) : fatal error C1017: invalid integer constant expression

  * ChangeLog
    + Marked one change as TOMERGE.

  * contrib/hbdbgfx/dbgfxc.c
    * Minor cleanup.

  * source/vm/harbinit.prg
    * Minor.

  * source/rtl/xhelp.c
    ! Typo in comment.

  * source/rtl/valtoexp.prg
  * source/rtl/alert.prg
    * {|| ... } -> {||...} for consistency along Harbour.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Oct 21 03:35:46 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 21 03:36:04 2008
Subject: [Harbour] 2008-10-21 09:35 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9334f$Blat.v2.6.2$a1a5b2d6$9c426b3a188@127.0.0.1>

2008-10-21 09:35 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/console.c
    ! Fixed typo in hb_dispoutAt() numeric color handling.

  * source/rtl/box.c
    * Minor formatting.
--
Brgds,
Viktor

From jacek at achilles.wam.lodz.pl  Tue Oct 21 06:55:59 2008
From: jacek at achilles.wam.lodz.pl (Jacek Kubica)
Date: Tue Oct 21 06:56:13 2008
Subject: [Harbour] 2008-10-21 09:35 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c9334f$Blat.v2.6.2$a1a5b2d6$9c426b3a188@127.0.0.1>
References: <01c9334f$Blat.v2.6.2$a1a5b2d6$9c426b3a188@127.0.0.1>
Message-ID: <91182745655.20081021125559@achilles.wam.lodz.pl>


Hello Victor,

  I`m not sure if this problem is related to latest changes
  but for information :

        bcc32.exe -c -q -d -Q -w -w-sig- -tWM -O2 -OS -Ov -Oi -Oc -Iinclude -Iobj\b32  -oobj\b32\harbour.obj source\main\harbour.c
source\main\harbour.c:
        IF EXIST "bin\b32\harbour.exe" del "bin\b32\harbour.exe" > NUL
        bcc32.exe @MAKE0028.@@@
Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Error: Unresolved external '_hb_compExprReduceMIN' referenced from C:\HARBOUR\LIB\B32\HBCPLR.LIB|exproptb
Error: Unresolved external '_hb_compExprReduceMAX' referenced from C:\HARBOUR\LIB\B32\HBCPLR.LIB|exproptb

Borland C++ Compiler 5.5
MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
TLIB 4.5 Copyright (c) 1987, 1999 Inprise Corporation
Windows Vista Home Premium

-- 
Best regards,
 Jacek Kubica



-------------- next part --------------
Poczta zostala przeskanowana przez system antywirusowy i nie zawiera wirusow.
From druzus at acn.waw.pl  Tue Oct 21 07:12:56 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 21 07:12:56 2008
Subject: [Harbour] 2008-10-21 09:35 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <91182745655.20081021125559@achilles.wam.lodz.pl>
References: <01c9334f$Blat.v2.6.2$a1a5b2d6$9c426b3a188@127.0.0.1>
	<91182745655.20081021125559@achilles.wam.lodz.pl>
Message-ID: <20081021111256.GA402@34-mo7-2.acn.waw.pl>

[wtorek, 21 padziernik 2008], Jacek Kubica napisa(a):

Cze Jacku,

>   I`m not sure if this problem is related to latest changes
>   but for information :
>         bcc32.exe -c -q -d -Q -w -w-sig- -tWM -O2 -OS -Ov -Oi -Oc -Iinclude -Iobj\b32  -oobj\b32\harbour.obj source\main\harbour.c
> source\main\harbour.c:
>         IF EXIST "bin\b32\harbour.exe" del "bin\b32\harbour.exe" > NUL
>         bcc32.exe @MAKE0028.@@@
> Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
> Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
> Error: Unresolved external '_hb_compExprReduceMIN' referenced from C:\HARBOUR\LIB\B32\HBCPLR.LIB|exproptb
> Error: Unresolved external '_hb_compExprReduceMAX' referenced from C:\HARBOUR\LIB\B32\HBCPLR.LIB|exproptb

These functions are in common library. Clean build should help.

best regards,
Przemek
From miguelangel at marchuet.net  Tue Oct 21 07:19:38 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Tue Oct 21 07:18:00 2008
Subject: [Harbour] 2008-10-21 13:17 UTC+0100 Miguel Angel Marchuet
	<miguelangel@marchuet.net>
Message-ID: <48FDBACA.8000901@marchuet.net>

2008-10-21 13:17 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
   * contrib/xhb/hbcompat.ch
   * contrib/xhb/hbcompat.h
     + added compatibilities.
   * include/fileio.ch
   * source/rtl/filesys.c
     * minor syntax correction.

Best regards,
Miguel Angel Marchuet
From druzus at acn.waw.pl  Tue Oct 21 07:45:05 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 21 07:45:05 2008
Subject: [Harbour] 2008-10-21 13:17 UTC+0100 Miguel Angel Marchuet
	<miguelangel@marchuet.net>
In-Reply-To: <48FDBACA.8000901@marchuet.net>
References: <48FDBACA.8000901@marchuet.net>
Message-ID: <20081021114505.GA14978@34-mo7-2.acn.waw.pl>

On Tue, 21 Oct 2008, Miguel Angel Marchuet wrote:

Hi Miguel,

> 2008-10-21 13:17 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
>   * contrib/xhb/hbcompat.h
>     + added compatibilities.

Thank you for modifications but this one:
   #define hb_retclenAdoptRaw( szText, ulLen )  hb_retclen_buffer( (szText), (ulLen) )

can be source of serious problems.
hb_retclen_buffer() always sets '\0' at the end of passed string and
hb_retclenAdoptRaw() in xHarbour doesn't. I strongly preffer that
programmers which create common code for Harbour and xHarbour make
it ready for such situations and in such case then can simply use
hb_retclenAdopt()/hb_retclen_buffer() instead of hb_retclenAdoptRaw()
so such #define is not be necessary at all.
It only pacifies C compiler errors hiding the potential problem and
allow to create buggy binaries.
It should be reverted.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Oct 21 07:55:25 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 21 07:55:36 2008
Subject: [Harbour] 2008-10-21 13:17 UTC+0100 Miguel Angel Marchuet
	<miguelangel@marchuet.net>
In-Reply-To: <20081021114505.GA14978@34-mo7-2.acn.waw.pl>
References: <48FDBACA.8000901@marchuet.net>
	<20081021114505.GA14978@34-mo7-2.acn.waw.pl>
Message-ID: <5F18E009-6434-4DCF-9A20-462DA603F2C3@syenar.hu>

Hi folks,

I wanted to note something similar, as I remember
converting xhb code to Harbour, and these weren't
exactly equivalent.

Brgds,
Viktor

On 2008.10.21., at 13:45, Przemyslaw Czerpak wrote:

> On Tue, 21 Oct 2008, Miguel Angel Marchuet wrote:
>
> Hi Miguel,
>
>> 2008-10-21 13:17 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net 
>> >
>>  * contrib/xhb/hbcompat.h
>>    + added compatibilities.
>
> Thank you for modifications but this one:
>   #define hb_retclenAdoptRaw( szText, ulLen )   
> hb_retclen_buffer( (szText), (ulLen) )
>
> can be source of serious problems.
> hb_retclen_buffer() always sets '\0' at the end of passed string and
> hb_retclenAdoptRaw() in xHarbour doesn't. I strongly preffer that
> programmers which create common code for Harbour and xHarbour make
> it ready for such situations and in such case then can simply use
> hb_retclenAdopt()/hb_retclen_buffer() instead of hb_retclenAdoptRaw()
> so such #define is not be necessary at all.
> It only pacifies C compiler errors hiding the potential problem and
> allow to create buggy binaries.
> It should be reverted.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Oct 21 08:58:49 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 21 08:59:07 2008
Subject: [Harbour] 2008-10-21 14:58 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9337c$Blat.v2.6.2$c2ce65fc$accba60fdce@127.0.0.1>

2008-10-21 14:58 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/box.c
    ! Fixed GPF in hb_dispBox() when box drawing chars 
      were not passed.
--
Brgds,
Viktor

From mbelgrano at deltain.it  Mon Oct 20 19:18:30 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Oct 21 08:59:47 2008
Subject: [Harbour] 2008-10-20 21:16 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081020191727.GA339@34-mo7-2.acn.waw.pl>
References: <20081020191727.GA339@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F098@SRV02.deltain.net>

IS this extending GT API adding multiwindow interface and RT GT switching so each thread can use its own GT driver tuned for given job.


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Monday, October 20, 2008 9:17 PM
To: harbour@harbour-project.org
Subject: [Harbour] 2008-10-20 21:16 UTC+0200 Przemyslaw Czerpak(druzus/at/priv.onet.pl)

2008-10-20 21:16 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbct/ctwin.c
    * moved internal CTW data to structure allocated dynamically and
      hold by inside current thread GT (HB_GT) to eliminate static
      variables used by GTCTW. Now each thread can have its own
      independent set of CTWindows if it allocated new GT.

  * harbour/contrib/hbct/tests/ctwtest.prg
    * removed two unused local variables

best regards
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Mon Oct 20 09:36:12 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Oct 21 08:59:52 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <48F32A41.2090001@dbtopas.lt>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com><20081011213831.GA5481@34-mo7-2.acn.waw.pl>
	<48F32A41.2090001@dbtopas.lt>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F092@SRV02.deltain.net>

Hi Mindaugas,

can you add to svn?

Anybody have different proposal?


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Mindaugas Kavaliauskas
Sent: Monday, October 13, 2008 1:00 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] A standard for the Harbour's SQL libs

Hi,


Przemyslaw Czerpak wrote:
> Before you will started the work then I suggest you to look at CLIP 
> project - you will find in SF.

I've looked to CLIP code. The basic idea (Clip's SQL interface gives possibility to access SQL databases, but are not plug-and-play tool for DBF to SQL migration) seams to be the same. I also see a lot of similarities in implementation. Of cause some differences exists, the main differences are:

1) CLIP uses different function names to RDD and SQL. For example, it uses SQLGOBOTTOM() instead of DBGOBOTTOM(). My implementation is uses RDD interface. Some new SQL functionality is obtained using RDDINFO() call. For example, I use:
    RDDINFO(RDDI_EXECUTE, "DROP TABLE something") instead of
    SQLEXECUTE("DROP TABLE something")
but these SQL*() functions can be easy implemented. Actually, the same situation is in DBF implementation. You can use
DBORDERINFO(DBOI_ORDERCOUNT) or ORDCOUNT().

2) I guess CLIP does not have possibility to access field values using names, i.e.
   FIELD NAME
   ? NAME
is impossible, the only way to get field value is:
   ? SQLGETVALUE(1)  // 1 is field number

I found it a drawback. Using native Clipper syntax support for accessing field is a big benefit, it make code much more shorter and readable.


Of cause, there are some implementation differences. CLIP has prepare() 
method, but I know MySQL the best from SQL API's and it did not use 
prepare function, so I haven't included it into SQL database driver 
method table. The similar situation is for start(), commit(), 
rollback(). In MySQL you need to do execute() call with parameter 
"commit" or "rollback". I have not added BLOB suport yet.


The few problems have to be solved writing RDD for SQL access. One is 
NULL/NIL question? Another is: should we PAD field values for SQL RDD to 
be compatible with DBF RDD's?


I attach some of my code (only MySQL database driver) is included:
sqlbase.c - basic RDD for interfacing with SQL database driver;
sqlmix.c - this RDD implements indexes using B-trees in memory.
   It is inherited from SQLBASE;
mysqldd.c - SQL database driver for MySQL;
hbsqldd.h - include files for all above. Some defines should be moved
   to should dbinfo.ch;
test1.prg - test code.

I hope you'll be able to compile it.


Best regards,
Mindaugas

From mbelgrano at deltain.it  Tue Oct 21 10:13:17 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Oct 21 10:13:58 2008
Subject: [Harbour] A standard for the Harbour's SQL libs
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F092@SRV02.deltain.net>
References: <9257026e0810110951s351903c4rf008b4cd5017f3f2@mail.gmail.com><20081011213831.GA5481@34-mo7-2.acn.waw.pl><48F32A41.2090001@dbtopas.lt>
	<AFB948164110ED43B5EB849E8DEEF03815F092@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0A4@SRV02.deltain.net>

My provider has defered sending of email
It wat 3 days old
Now Viktor have already made this my old suggestion
Thanks

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Massimo Belgrano
Sent: Monday, October 20, 2008 3:36 PM
To: Harbour Project Main Developer List.
Subject: RE: [Harbour] A standard for the Harbour's SQL libs

Hi Mindaugas,

can you add to svn?

Anybody have different proposal?


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Mindaugas Kavaliauskas
Sent: Monday, October 13, 2008 1:00 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] A standard for the Harbour's SQL libs

Hi,


Przemyslaw Czerpak wrote:
> Before you will started the work then I suggest you to look at CLIP 
> project - you will find in SF.

I've looked to CLIP code. The basic idea (Clip's SQL interface gives possibility to access SQL databases, but are not plug-and-play tool for DBF to SQL migration) seams to be the same. I also see a lot of similarities in implementation. Of cause some differences exists, the main differences are:

1) CLIP uses different function names to RDD and SQL. For example, it uses SQLGOBOTTOM() instead of DBGOBOTTOM(). My implementation is uses RDD interface. Some new SQL functionality is obtained using RDDINFO() call. For example, I use:
    RDDINFO(RDDI_EXECUTE, "DROP TABLE something") instead of
    SQLEXECUTE("DROP TABLE something")
but these SQL*() functions can be easy implemented. Actually, the same situation is in DBF implementation. You can use
DBORDERINFO(DBOI_ORDERCOUNT) or ORDCOUNT().

2) I guess CLIP does not have possibility to access field values using names, i.e.
   FIELD NAME
   ? NAME
is impossible, the only way to get field value is:
   ? SQLGETVALUE(1)  // 1 is field number

I found it a drawback. Using native Clipper syntax support for accessing field is a big benefit, it make code much more shorter and readable.


Of cause, there are some implementation differences. CLIP has prepare() method, but I know MySQL the best from SQL API's and it did not use prepare function, so I haven't included it into SQL database driver method table. The similar situation is for start(), commit(), rollback(). In MySQL you need to do execute() call with parameter "commit" or "rollback". I have not added BLOB suport yet.


The few problems have to be solved writing RDD for SQL access. One is NULL/NIL question? Another is: should we PAD field values for SQL RDD to be compatible with DBF RDD's?


I attach some of my code (only MySQL database driver) is included:
sqlbase.c - basic RDD for interfacing with SQL database driver; sqlmix.c - this RDD implements indexes using B-trees in memory.
   It is inherited from SQLBASE;
mysqldd.c - SQL database driver for MySQL; hbsqldd.h - include files for all above. Some defines should be moved
   to should dbinfo.ch;
test1.prg - test code.

I hope you'll be able to compile it.


Best regards,
Mindaugas

From lorenzo.fiorini at gmail.com  Tue Oct 21 11:18:58 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Oct 21 11:19:06 2008
Subject: [Harbour] New SQL classes #1
Message-ID: <9257026e0810210818u3c7bc53en1ef0fff801e9ec6d@mail.gmail.com>

After looking JDBC, PHP Pear DB, OCI8, CLip docs I would suggest:

1 - to follow the JDBC standard as close as possible:
big players like Oracle, IBM, Sun (mysql) are heavily committed to
JDBC and surely in it all options are considered and implemented. This
doesn't mean we need to do everything exactly in the same way but a
developer that follow the JDBC tutorial
http://java.sun.com/docs/books/tutorial/jdbc/index.html should feel at home

2 - to "import" some interesting features from PHP:
like the use of hashes to retrieve values beside the classic fieldget(
"fieldname" ) or autoPrepare & autoExecute see:
http://pear.php.net/manual/en/package.database.db.php

3 - to have as much "drivers" as possible. Having only one or two
drivers will not change anything. We need a "native" multiplatform
driver for each major player like Oracle, Db2, MySql, PostgreSQL,
MSSQL(Ado), SQLIte, ODBC.

Clearly I don't expect that a trained Java developer will move to
Harbour, but IMHO there are many developers that find Java and .Net
too "heavy" but PHP/ASP not suitable for desktop apps but that know
those languages.

To achieve these goals I would suggest:

1 - to follow step by step JDBC tutorial that is after made the
changes required by the syntax the examples should work. This means to
implement for every driver:

- DriverManager
- Connection
- Statement
- PreparedStatement
- CallableStatement
- ResultSet

and if possible:

- RowSet
- BLOB, CLOB
- XML
- ...

2 - to forget about the driver's "nature" for the moment and add dirs
like HdbcOdbc, HdbcOr, HdbcMy, HdbcPg, HdbcSl, HdbcFb, .... to contrib

It would also be a good start to have a standard set of tables ( like
Oracle's HR ) and a set of common tests to compare the results.

Now the hard thing the resources:

- at least one PRG developer for each driver
- C developers for the interfaces
- testers and users to:
-- test various DBMS under OSes
-- write doc about differences between drivers
-- write test cases

I would also remind that:

PostgreSQL has a BSD license so it's really free for every use and has
binaries installers for almost every OS at www.postgresql.org

Oracle has an Express Edition "Free to develop, deploy, and
distribute" for Linux and Win at
http://www.oracle.com/technology/products/database/xe/index.html
An interesting OCI C Interface read is
http://www.oracle.com/technology/tech/oci/pdf/building-best-drivers.v9.pdf

IBM has an Express Edition of DB2 for Linux and Win at www.ibm.com/db2/express
The CLI C interface is very close to the odbc one.

MySql comes with a dual license: pure GPL and commercial.
So linking MySql client without a commercial license results in a GPL
application.

CLip is GPL so please don't copy any code. I would also suggest to
don't download and don't look at the real code. Use only the doc.

Suggestions and comments are welcome.

best regards,
Lorenzo
From miguelangel at marchuet.net  Tue Oct 21 12:01:55 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Tue Oct 21 12:00:10 2008
Subject: [Harbour] 2008-10-21 13:17 UTC+0100 Miguel Angel
	Marchuet	<miguelangel@marchuet.net>
In-Reply-To: <20081021114505.GA14978@34-mo7-2.acn.waw.pl>
References: <48FDBACA.8000901@marchuet.net>
	<20081021114505.GA14978@34-mo7-2.acn.waw.pl>
Message-ID: <48FDFCF3.70300@marchuet.net>

Is possible, what do you thing about this function.

Can i use hb_retclenAdopt instead of hb_retclenAdoptRaw in this case ?

or is necessary ?


HB_FUNC( UTF8TOWIDE )  // ( cAnsiStr ) -> cWideStr
{
    char *cString = hb_parc( 1 );

    if( cString )
    {
       BSTR wString = hb_oleUTF8ToWide( cString );

       if( wString )
       {
          hb_retclenAdoptRaw( (char *) wString, SysStringLen( wString ) );
          return;
       }
    }

    hb_ret();
    return;
}

//---------------------------------------------------------------------------//

HB_EXPORT LPWSTR hb_oleUTF8ToWide( LPSTR cString )
{
    int nConvertedLen = MultiByteToWideChar( CP_UTF8, 0, cString, -1, NULL, 0 );

    if( nConvertedLen )
    {
       LPWSTR wString = (LPWSTR) hb_xgrab( nConvertedLen * 3 );

       if( MultiByteToWideChar( CP_UTF8, 0, cString, -1, wString, nConvertedLen ) )
       {
          return (LPWSTR) wString;
       }
       else
       {
          hb_xfree( wString );
       }
    }

    return NULL;
}

Best regards,
Miguel Angel Marchuet

Przemyslaw Czerpak escribi?:
> On Tue, 21 Oct 2008, Miguel Angel Marchuet wrote:
> 
> Hi Miguel,
> 
>> 2008-10-21 13:17 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
>>   * contrib/xhb/hbcompat.h
>>     + added compatibilities.
> 
> Thank you for modifications but this one:
>    #define hb_retclenAdoptRaw( szText, ulLen )  hb_retclen_buffer( (szText), (ulLen) )
> 
> can be source of serious problems.
> hb_retclen_buffer() always sets '\0' at the end of passed string and
> hb_retclenAdoptRaw() in xHarbour doesn't. I strongly preffer that
> programmers which create common code for Harbour and xHarbour make
> it ready for such situations and in such case then can simply use
> hb_retclenAdopt()/hb_retclen_buffer() instead of hb_retclenAdoptRaw()
> so such #define is not be necessary at all.
> It only pacifies C compiler errors hiding the potential problem and
> allow to create buggy binaries.
> It should be reverted.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> __________ Informaci?n de ESET NOD32 Antivirus, versi?n de la base de firmas de virus 3542 (20081021) __________
> 
> ESET NOD32 Antivirus ha comprobado este mensaje.
> http://www.eset.com
> 
> 
> 

From druzus at acn.waw.pl  Tue Oct 21 12:43:19 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 21 12:43:19 2008
Subject: [Harbour] 2008-10-21 13:17 UTC+0100 Miguel Angel Marchuet
	<miguelangel@marchuet.net>r
In-Reply-To: <48FDFCF3.70300@marchuet.net>
References: <48FDBACA.8000901@marchuet.net>
	<20081021114505.GA14978@34-mo7-2.acn.waw.pl>
	<48FDFCF3.70300@marchuet.net>
Message-ID: <20081021164319.GA11849@34-mo7-2.acn.waw.pl>

On Tue, 21 Oct 2008, Miguel Angel Marchuet wrote:

Hi Miguel,

> Is possible, what do you thing about this function.
> Can i use hb_retclenAdopt instead of hb_retclenAdoptRaw in this case ?
> or is necessary ?

You have to and in this case you should 1-st fix the conversion code
or it may cause unexpected results like GPF.

Below is corrected version (not tested just written).

best regards,
Przemek


HB_FUNC( UTF8TOWIDE )  // ( cAnsiStr ) -> cWideStr
{
   char *cString = hb_parc( 1 );

   if( cString )
   {
      DWORD length;
      wchar_t * wString;

      length = MultiByteToWideChar( CP_UTF8, 0, cString, -1, NULL, 0 );
      wString = ( wchar_t * ) hb_xgrab( ( length + 1 ) * sizeof( wchar_t ) );
      MultiByteToWideChar( CP_UTF8, 0, cString, -1, wString, length + 1 );
      hb_retclen_buffer( ( char * ) wString, length * sizeof( wchar_t ) );
   }
}
From harbour.01 at syenar.hu  Tue Oct 21 12:46:28 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 21 12:46:46 2008
Subject: [Harbour] New SQL classes #1
In-Reply-To: <9257026e0810210818u3c7bc53en1ef0fff801e9ec6d@mail.gmail.com>
References: <9257026e0810210818u3c7bc53en1ef0fff801e9ec6d@mail.gmail.com>
Message-ID: <A89559EC-6B31-4DCB-AC66-A4DAD9FD7BFB@syenar.hu>

Hi Lorenzo,

> 2 - to forget about the driver's "nature" for the moment and add dirs
> like HdbcOdbc, HdbcOr, HdbcMy, HdbcPg, HdbcSl, HdbcFb, .... to contrib

That looks fine (in lowercase), and I'd also suggest to put
the HDBC core parts in hbhdbc for consistency.

> MySql comes with a dual license: pure GPL and commercial.
> So linking MySql client without a commercial license results in a GPL
> application.
>
> CLip is GPL so please don't copy any code. I would also suggest to
> don't download and don't look at the real code. Use only the doc.
>
> Suggestions and comments are welcome.

The only part I'd like comment is "there is no point in having
one or two drivers". I think it could be very useful even to
have one or drivers, but of course the more the better. It's
not really a matter of "point" but rather a matter of contributors
and resources. Driver contributors can more easily join if the
HDBC core foundation (interface) is well laid and ready for driver
development, so I think it's not at all pointless to start with
this main component, plus one or two 'reference' drivers for
a start.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Oct 21 14:38:12 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 21 14:38:25 2008
Subject: [Harbour] FYI MSVS2008 and Win9x
Message-ID: <983CD618-CC5F-4944-AE25-0C39ED389DC5@syenar.hu>

Hi all,

FYI, MSVS 2008 has a notable downside: programs won't
work on Win9x and also WinNT.

[ This also means that UNICODE can be turned on by default
for MSVS2008 (and upper) builds. ]

MSVS 2005 is fine.

Brgds,
Viktor

From miguelangel at marchuet.net  Tue Oct 21 15:30:50 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Tue Oct 21 15:27:36 2008
Subject: [Harbour] 2008-10-21 13:17 UTC+0100 Miguel Angel
	Marchuet	<miguelangel@marchuet.net>r
In-Reply-To: <20081021164319.GA11849@34-mo7-2.acn.waw.pl>
References: <48FDBACA.8000901@marchuet.net>	<20081021114505.GA14978@34-mo7-2.acn.waw.pl>	<48FDFCF3.70300@marchuet.net>
	<20081021164319.GA11849@34-mo7-2.acn.waw.pl>
Message-ID: <48FE2DEA.1000505@marchuet.net>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081021/6ff9fe79/attachment.html
From harbour.01 at syenar.hu  Tue Oct 21 15:31:38 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 21 15:31:53 2008
Subject: [Harbour] 2008-10-21 13:17 UTC+0100 Miguel Angel
	Marchuet	<miguelangel@marchuet.net>r
In-Reply-To: <48FE2DEA.1000505@marchuet.net>
References: <48FDBACA.8000901@marchuet.net>	<20081021114505.GA14978@34-mo7-2.acn.waw.pl>	<48FDFCF3.70300@marchuet.net>
	<20081021164319.GA11849@34-mo7-2.acn.waw.pl>
	<48FE2DEA.1000505@marchuet.net>
Message-ID: <99ABA0E3-82F8-4BE3-A9F2-7BB1D2DF80B9@syenar.hu>

Hi Miguel,

contrib/hbwin

Note that there are already almost exactly the same
functions (except the encoding setting) for ANSI/WIDE
conversion in win_ole.c. You may want to take a look
at them.

Maybe the best would be to have all these Win text
conversions gathered in one .c file.

Brgds,
Viktor

On 2008.10.21., at 21:30, Miguel Angel Marchuet wrote:

> Many thks for you help.
>
> I like too upload this function and other similars to harbour's cvs
>
> Where do you think is the best site to upload it ?
>
> Best regards,
> Miguel Angel Marchuet
>
> Przemyslaw Czerpak escribi?:
>>
>> On Tue, 21 Oct 2008, Miguel Angel Marchuet wrote:
>>
>> Hi Miguel,
>>
>>
>>> Is possible, what do you thing about this function.
>>> Can i use hb_retclenAdopt instead of hb_retclenAdoptRaw in this  
>>> case ?
>>> or is necessary ?
>>>
>> You have to and in this case you should 1-st fix the conversion code
>> or it may cause unexpected results like GPF.
>>
>> Below is corrected version (not tested just written).
>>
>> best regards,
>> Przemek
>>
>>
>> HB_FUNC( UTF8TOWIDE )  // ( cAnsiStr ) -> cWideStr
>> {
>>    char *cString = hb_parc( 1 );
>>
>>    if( cString )
>>    {
>>       DWORD length;
>>       wchar_t * wString;
>>
>>       length = MultiByteToWideChar( CP_UTF8, 0, cString, -1, NULL,  
>> 0 );
>>       wString = ( wchar_t * ) hb_xgrab( ( length + 1 ) *  
>> sizeof( wchar_t ) );
>>       MultiByteToWideChar( CP_UTF8, 0, cString, -1, wString, length  
>> + 1 );
>>       hb_retclen_buffer( ( char * ) wString, length *  
>> sizeof( wchar_t ) );
>>    }
>> }
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>> __________ Informaci?n de ESET Smart Security, versi?n de la  
>> base de firmas de virus 3543 (20081021) __________
>>
>> ESET Smart Security ha comprobado este mensaje.
>> http://www.eset.com
>>
>>
>>
>>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Tue Oct 21 16:19:13 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 21 16:19:12 2008
Subject: [Harbour] 2008-10-21 22:18 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081021201913.GA17796@34-mo7-2.acn.waw.pl>

2008-10-21 22:18 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapigt.h
  * harbour/source/rtl/console.c
  * harbour/source/rtl/filesys.c
    * use HB_STD{IN,OUT,ERR}_HANDLE macros instead of hard coded values

  * harbour/include/hbgtcore.h
  * harbour/source/rtl/hbgtcore.c
  * harbour/source/rtl/gtapi.c
    + added optional support for dynamic supertables
    + added reference counter to HB_GT_BASE structure
    - removed hb_gtUnLoad() function
    + added hb_gtAlloc(), hb_gtRelease(), hb_gtAttach()
    + added hb_gtRealod() function which unloads current GT driver
      and loads given new one
    + added .prg function HB_GTRELOAD( <cGtName> ) -> <lSuccess>
      This function allow to switch active GT driver at run time.
      It can be also used to simulate removed HB_NOSTARTUPWINDOW()
      functionality. F.e.:

         REQUEST HB_GT_WVT
         REQUEST HB_GT_NUL_DEFAULT
         proc main()
            // do some initializations...
            hb_gtReload( "WVT" )
            // rest of code...
         return

      Please remember that some GTs may refuse initialization due to
      missing required resources and instead of return FALSE they can
      interrupt program with internal error, just like at application
      startup so it's not guarantied that this function always returns.

  * harbour/contrib/hbct/ctwin.c
    * updated for new GT API
    + added support for dynamic supertable to allow using CTWIN in the
      same time with different GTs.

  * harbour/contrib/xhb/hbcompat.h
    - removed hb_retclenAdoptRaw translation

best regards
Przemek
From bedipritpal at hotmail.com  Tue Oct 21 17:20:20 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Oct 21 17:20:27 2008
Subject: [Harbour] 2008-10-21 22:18 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081021201913.GA17796@34-mo7-2.acn.waw.pl>
References: <20081021201913.GA17796@34-mo7-2.acn.waw.pl>
Message-ID: <20099617.post@talk.nabble.com>




Przemyslaw Czerpak-2 wrote:
> 
> 2008-10-21 22:18 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/include/hbapigt.h
>   * harbour/source/rtl/console.c
>   ...
> 

So groundwork for multi-window GT is under construction !

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/2008-10-21-22%3A18-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp20098580p20099617.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From teo at windtelsoft.com  Tue Oct 21 18:21:07 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Tue Oct 21 18:17:15 2008
Subject: [Harbour] 2008-10-21 17:15 UTC-0500 Teo Fonrouge
	(teo/at/windtelsoft/dot/com)
Message-ID: <200810211721.07180.teo@windtelsoft.com>

2008-10-21 17:15 UTC-0500 Teo Fonrouge (teo/at/windtelsoft/dot/com)
  * source/debug/debugger.prg
    ! Fixed error when moving in the call stack window to an source prg
      not included in the path, and a ::oWndVars (Monitor of vars) is opened.

best regards,

Teo
From info at fsgiudice.com  Tue Oct 21 22:18:19 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Oct 21 22:18:32 2008
Subject: [SPAM] Re: [Harbour] 2008-10-09 20:51 UTC+0200 Przemyslaw	Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081009210029.GA24108@34-mo7-2.acn.waw.pl>
References: <20081009185140.GA17892@34-mo7-2.acn.waw.pl>	<19906002.post@talk.nabble.com>
	<20081009210029.GA24108@34-mo7-2.acn.waw.pl>
Message-ID: <48FE8D6B.1000304@fsgiudice.com>

Hi Przemek,

Il 09/10/2008 23.00, Przemyslaw Czerpak ha scritto:
> F.e. it looks that xbase++ can have methods and object variables
> with the same name. It means that:
>    ? o:var
> gives different code then:
>    ? o:var()
> or at least documentation it wrong describing :atStart and :atEnd
> methods and variables.
> It's interesting functionality I even wanted to add but it's not
> Clipper compatible though probably we can hide the difference
> by introducing "suggested" action to PCODE so o:var() will work
> as o:var when there is no method with the name "var".
> If other developers think it's important then I can add such
> extension.

I have just now finished to discuss about this with Pritpal, at whom I 
was describing that I have partially lost 2 days because I'm porting a 
lib of mine to harbour from xharbour and today I have found that one of 
problems was exactly the contrary of above functionality: send a value 
to a method using assignment and not parenthesis. What you wrote above 
it seems to me that it's already implemented.

Values on right are Clipper - Harbour results

PROCEDURE Main()

   LOCAL o := GetNew()

   // var in harbour
   ? o:cargo()        // <-- NIL - NIL
   ? o:cargo := 10    // <-- 10  - 10
   ? o:cargo( 30 )    // <-- 30  - 10
   ? o:cargo()        // <-- 30  - 10

   // setget in harbour
   ? o:col := 5       // <--  5  -  5
   ? o:col( 10 )      // <--  5  - 10
   ? o:col()          // <--  5  - 10

   o := ErrorNew()

   ? o:cargo := 10    // <-- 10  - 10
   ? o:cargo( 30 )    // <-- 10  - 10
   ? o:cargo()        // <-- 10  - 10

   o := TBrowseNew()

   ? o:cargo := 10    // <-- 10  - 10
   ? o:cargo( 30 )    // <-- 10  - 10
   ? o:cargo()        // <-- 10  - 10

   // setget in harbour
   ? o:nTop           // <--  0  -  0
   ? o:nTop := 7      // <--  7  -  7
   ? o:nTop( 9 )      // <--  9  -  9
   ? o:nTop()         // <--  9  -  9

RETURN

but also in clipper if you wrote:

oTBrowse:addColumn := oTBColumns

it gives error.

So there are some point where Clipper permits to assign values using 
parenthesis and in other not, but surely because classes are implemented 
differently. In any case it permits to read a value using parenthesis.

Harbour already permits to read all using parenthesis.

The need is to permit assignment to a function assigning rvalue so:
o:AssignMethod := 1
it should be the same of
o:AssignMethod( 1 )

or

oTBrowse:addColumn := oTBColumns

In case of a var not exists with same name of a method (but today can it 
exists ?).

Best Regards

Francesco

From druzus at acn.waw.pl  Tue Oct 21 23:04:11 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 21 23:04:08 2008
Subject: [Harbour] 2008-10-22 05:03 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081022030411.GA10494@34-mo7-2.acn.waw.pl>

2008-10-22 05:03 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbstack.h
  * harbour/include/hbgtcore.h
  * harbour/include/hbthread.h
  * harbour/include/hbapigt.h
  * harbour/source/vm/estack.c
  * harbour/source/vm/hvm.c
  * harbour/source/vm/thread.c
  * harbour/source/rtl/hbgtcore.c
    + added support for optional allocating independent console window by
      each thread. By default new thread inherits console Window from
      parent thread. But each thread can allocate its own console window
      by calling hb_gtReload( <cGtName> ) function, f.e. by:
         hb_gtReload( hb_gtVersion() )
      If GT driver supports such functionality then new it will allocate
      new console windows.
      Each console window has reference counter which is increased when
      new thread starts and decreased when hb_gtReload() is executed or
      thread terminates. When counter reach zero give console window is
      destroyed.

  * harbour/source/rtl/gtwvt/gtwvt.c
    ! use SendNotifyMessage() instead of SendMessage() to not block
      threads which inherited GT from parent thread. Why non of MS-Win
      users reported this problem?
    + added reference counter to window class for multi GT support

  + harbour/tests/mt/mttest10.prg
    + added demonstration/test code for using independent console window
      in different threads. It needs GT driver which supports such
      functionality, f.e GTXWC in *nixes or GTWVT in MS-Windows

  * harbour/tests/mt/mttest09.prg
    ! fixed typo in comment

best regards
Przemek
From bedipritpal at hotmail.com  Tue Oct 21 23:38:41 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Oct 21 23:38:49 2008
Subject: [Harbour] 2008-10-22 05:03 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081022030411.GA10494@34-mo7-2.acn.waw.pl>
References: <20081022030411.GA10494@34-mo7-2.acn.waw.pl>
Message-ID: <20103476.post@talk.nabble.com>


Hello Przemek


Przemyslaw Czerpak-2 wrote:
> 
> 2008-10-22 05:03 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/include/hbstack.h
>   * harbour/include/hbgtcore.h
> 

Thanks a lot.

May be I am missing something, mttest10.exe executes but nothing is 
visible on the screen. And there is no referenceto the executable in the 
task manager.

I set HB_MT=MT
bld_b32 mttest10 

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/2008-10-22-05%3A03-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp20103219p20103476.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Wed Oct 22 01:31:28 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Oct 22 01:31:36 2008
Subject: [Harbour] 2008-10-22 05:03 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20103476.post@talk.nabble.com>
References: <20081022030411.GA10494@34-mo7-2.acn.waw.pl>
	<20103476.post@talk.nabble.com>
Message-ID: <20104237.post@talk.nabble.com>


Hello Przemek


Hello Przemek


Przemyslaw Czerpak-2 wrote:
> 
> 2008-10-22 05:03 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/include/hbstack.h
>   * harbour/include/hbgtcore.h
> 

Please ignore my previos post.
May be build process needs something more.
I tried with my tests/wvtext.prg with my own tools, works fine.

Excellent!!! Flawless!!! And exactly what I had in mind. Mindblowing....
Hats off to you.

With best Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/2008-10-22-05%3A03-UTC%2B0200-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp20103219p20104237.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Wed Oct 22 02:12:56 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Oct 22 02:13:03 2008
Subject: [Harbour] 2008-10-22 23:01 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20104575.post@talk.nabble.com>


2008-10-22 23:01 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/tests/wvtext.prg
    Updated to demonstrate multi-windows GT capabilities.
    
    A REMINDER : This development alone places Harbour much higher than 
                 so many dialects. Mind-blowing feature. I had ever longed
                 for this functionality since I started with Xbase++.
                 But the ease of use of a MW-GT in Harbour is far superior
                 than in Xbase++. Spread this word. I am sure this feature
                 alone is going to add a handsome value to my applications.
                 I hope you all will be benefitted.

                 I have no word of appreciation for Przemyslaw Czerpak as
                 whatever I will say will fall short of weight. So...

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-10-22-23%3A01-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20104575p20104575.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From hbco2 at sbcglobal.net  Wed Oct 22 02:43:54 2008
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Wed Oct 22 02:43:41 2008
Subject: [Harbour] 2008-10-22 05:03 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20103476.post@talk.nabble.com>
References: <20081022030411.GA10494@34-mo7-2.acn.waw.pl>
	<20103476.post@talk.nabble.com>
Message-ID: <1224657834.3795.3.camel@hblx.340cst>

In SuSE 10.3, using gcc I get:

Harbour 1.1.0dev (Rev. 9582)
Copyright (c) 1999-2008, http://www.harbour-project.org/
Compiling 'wvtext.prg'...
Lines 794, Functions/Procedures 9
Generating C source output to 'wvtext.c'... Done.
./wvtext.o:(.data+0x1b8): undefined reference to `HB_FUN_HB_GT_WVT'
./wvtext.o:(.data+0x1c8): undefined reference to `HB_FUN_HB_GT_WIN'
collect2: ld returned 1 exit status

In XP, using bcc32, the program compiles successfully, but when
wvtext.exe is run, the program promptly returns to the prompt with
nothing else visible on the screen.

Are environment parameters required?

Bill



On Tue, 2008-10-21 at 20:38 -0700, Pritpal Bedi wrote:
> Hello Przemek
> 
> 
> Przemyslaw Czerpak-2 wrote:
> > 
> > 2008-10-22 05:03 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> >   * harbour/include/hbstack.h
> >   * harbour/include/hbgtcore.h
> > 
> 
> Thanks a lot.
> 
> May be I am missing something, mttest10.exe executes but nothing is 
> visible on the screen. And there is no referenceto the executable in the 
> task manager.
> 
> I set HB_MT=MT
> bld_b32 mttest10 
> 
> Regards
> Pritpal Bedi
> 

From harbour.01 at syenar.hu  Wed Oct 22 06:09:55 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 22 06:10:11 2008
Subject: [Harbour] 2008-10-22 12:09 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9342e$Blat.v2.6.2$54fcb0da$1f0cc10edd90@127.0.0.1>

2008-10-22 12:09 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * tests/wvtext.prg
    ! Fixed GT selection code.

  * contrib/rddsql/mysqldd.c
    + Added ugly hack to make it compile with MSVC.
    ! Fixed MSVC 64-bit warning.

  * source/rtl/gtapi.c
    * Minor formatting.
--
Brgds,
Viktor

From mbelgrano at deltain.it  Wed Oct 22 06:22:44 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Oct 22 06:23:27 2008
Subject: [Harbour] 2008-10-22 05:03 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20103476.post@talk.nabble.com>
References: <20081022030411.GA10494@34-mo7-2.acn.waw.pl>
	<20103476.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0A9@SRV02.deltain.net>

I have same problem, can you explain how you have resolved

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
Sent: Wednesday, October 22, 2008 5:39 AM
To: harbour@harbour-project.org
Subject: Re: [Harbour] 2008-10-22 05:03 UTC+0200 Przemyslaw
Czerpak(druzus/at/priv.onet.pl)


Hello Przemek


Przemyslaw Czerpak-2 wrote:
> 
> 2008-10-22 05:03 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/include/hbstack.h
>   * harbour/include/hbgtcore.h
> 

Thanks a lot.

May be I am missing something, mttest10.exe executes but nothing is 
visible on the screen. And there is no referenceto the executable in the

task manager.

I set HB_MT=MT
bld_b32 mttest10 

Regards
Pritpal Bedi

-- 
View this message in context:
http://www.nabble.com/2008-10-22-05%3A03-UTC%2B0200-Przemyslaw-Czerpak-%
28druzus-at-priv.onet.pl%29-tp20103219p20103476.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From e.m.giordano at emagsoftware.it  Wed Oct 22 06:48:21 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Oct 22 06:48:29 2008
Subject: [Harbour] Warning
Message-ID: <629FD208B4874C0EBA6F903665998CEC@emag>

Warning W8004 source\rtl\gtwvt\gtwvt.c 1557: 'hWnd' is assigned a value that 
is never used in function hb_gt_wvt_CreateWindow

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From mbelgrano at deltain.it  Wed Oct 22 07:19:50 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Oct 22 07:19:58 2008
Subject: R: [Harbour] 2008-10-22 23:01 UTC-0800 Pritpal
	Bedi(pritpal@vouchcac.com)
Message-ID: <000101c93438$19c3eacb$0400a8c0@deltain.net>

I totaly agree

----- Messaggio originale -----
Da: Pritpal Bedi <bedipritpal@hotmail.com>
Inviato: mercoled? 22 ottobre 2008 8.13
A: harbour@harbour-project.org <harbour@harbour-project.org>
Oggetto: [Harbour] 2008-10-22 23:01 UTC-0800 Pritpal Bedi(pritpal@vouchcac.com)


2008-10-22 23:01 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/tests/wvtext.prg
    Updated to demonstrate multi-windows GT capabilities.
    
    A REMINDER : This development alone places Harbour much higher than 
                 so many dialects. Mind-blowing feature. I had ever longed
                 for this functionality since I started with Xbase++.
                 But the ease of use of a MW-GT in Harbour is far superior
                 than in Xbase++. Spread this word. I am sure this feature
                 alone is going to add a handsome value to my applications.
                 I hope you all will be benefitted.

                 I have no word of appreciation for Przemyslaw Czerpak as
                 whatever I will say will fall short of weight. So...

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-10-22-23%3A01-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20104575p20104575.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Wed Oct 22 07:21:31 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 22 07:21:29 2008
Subject: [SPAM] Re: [Harbour] 2008-10-09 20:51 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <48FE8D6B.1000304@fsgiudice.com>
References: <20081009185140.GA17892@34-mo7-2.acn.waw.pl>
	<19906002.post@talk.nabble.com>
	<20081009210029.GA24108@34-mo7-2.acn.waw.pl>
	<48FE8D6B.1000304@fsgiudice.com>
Message-ID: <20081022112131.GA9448@34-mo7-2.acn.waw.pl>

On Wed, 22 Oct 2008, Francesco Saverio Giudice wrote:

Hi Francesco,

>> F.e. it looks that xbase++ can have methods and object variables
>> with the same name. It means that:
>>    ? o:var
>> gives different code then:
>>    ? o:var()
>> or at least documentation it wrong describing :atStart and :atEnd
>> methods and variables.
>> It's interesting functionality I even wanted to add but it's not
>> Clipper compatible though probably we can hide the difference
>> by introducing "suggested" action to PCODE so o:var() will work
>> as o:var when there is no method with the name "var".
>> If other developers think it's important then I can add such
>> extension.
> I have just now finished to discuss about this with Pritpal, at whom I was 
> describing that I have partially lost 2 days because I'm porting a lib of 
> mine to harbour from xharbour and today I have found that one of problems 
> was exactly the contrary of above functionality: send a value to a method 
> using assignment and not parenthesis. What you wrote above it seems to me 
> that it's already implemented.

No. I only cleaned Harbour grammar rules so it does not accept code
like:
   o:msg() := 10
or:
   o:msg() += 1
or:
   ++o:msg()
Just like Clipper. I made it for two reasons:
   1. full Clipper compatibility (Clipper also does not accept such syntax)
   2. to not close the way for possible extension by backward compatibility
      if we decide to generate different PCODE for o:msg() and o:msg
I also eliminated all HVM/Compiler code which was using "_" prefix in message
name to unconditionally recognize assigned methods what effectively blocks
using code like:

   CREATE CLASS
      VAR   _var
   ENDCLASS

in xHarbour though it's valid Class(y)/Clipper code. In Harbour it works
correctly.

But I haven't touched generated PCODE (with exception to some optimizations
and fixes to original Clipper behavior which can be disabled by -kc Harbour
compikler switch).
Now Clipper, Harbour and xHarbour generates the same PCODE for o:msg and
o:msg(). We know nothing about class definition during compilation and
in final code we only send messages. You can think about it that each
compiler makes the following internal translation before generating PCODE:
   o:msg          => o:msg()
   o:msg()        => o:msg()
   o:msg := 1     => o:_msg( 1 )
   o:msg += 2     => o:_msg( o:msg() + 2 )
   o:msg++        => o:_msg( o:msg() + 1 )

as you can see the information about () used in source code is lost
and only for assign operation "_" prefix is used in message name.
But it doesn't matter if you write in your code:
   o:msg := 1
or:
   o:_msg(1)
in both cases _exactly_ the same PCODE is generated. Just like
for o:msg and o:msg().
How it behaves at runtime depends only on class definition and
which code is bound with 'msg' message and which with '_msg'.
It can be even the same code just like in SETGET methods.

> Values on right are Clipper - Harbour results

This test only shows some differences in runtime behavior which
in Harbour depends on class definition code not on HVM internals.
In xHarbour the results are different due to some hack in class
code used to resolve some internal problem which effected RT behavior
of all code which uses classes.

> PROCEDURE Main()
>   LOCAL o := GetNew()
>   // var in harbour
>   ? o:cargo()        // <-- NIL - NIL
>   ? o:cargo := 10    // <-- 10  - 10
>   ? o:cargo( 30 )    // <-- 30  - 10
>   ? o:cargo()        // <-- 30  - 10

Clipper uses the same code for _CARGO and CARGO messages
in TGET class so
   o:cargo:=30 => o:_cargo(30)
and:
   o:cargo(30) gives the same code.
This was not exactly replicated in Harbour where cargo is
simple variable. For strict Clipper compatibility it should
be changed to SETGET method in TGET class definition.

>   // setget in harbour
>   ? o:col := 5       // <--  5  -  5
>   ? o:col( 10 )      // <--  5  - 10
>   ? o:col()          // <--  5  - 10

Here we have reverted situation. In Harbour SETGET method was used
and in Clipper different code is used for _COL() massage and COL()
message so COL(<var>) does not make any assignment. It also should be
changed for strict compatibility.

>   o := ErrorNew()
>   ? o:cargo := 10    // <-- 10  - 10
>   ? o:cargo( 30 )    // <-- 10  - 10
>   ? o:cargo()        // <-- 10  - 10
>   o := TBrowseNew()
>   ? o:cargo := 10    // <-- 10  - 10
>   ? o:cargo( 30 )    // <-- 10  - 10
>   ? o:cargo()        // <-- 10  - 10
>   // setget in harbour
>   ? o:nTop           // <--  0  -  0
>   ? o:nTop := 7      // <--  7  -  7
>   ? o:nTop( 9 )      // <--  9  -  9
>   ? o:nTop()         // <--  9  -  9
> RETURN
> but also in clipper if you wrote:
> oTBrowse:addColumn := oTBColumns
> it gives error.

In TBROWSE() and TERROR() classes I tried to exactly replicate original
Clipper behavior so the results should be the same in both cases.
Probably TGET() class should be updated if user thinks that such strict
compatibility is important. Anyhow it's onlt class definition which
is not bound with problem I was talking about.

> So there are some point where Clipper permits to assign values using 
> parenthesis and in other not, but surely because classes are implemented 
> differently. In any case it permits to read a value using parenthesis.

No it isn't. It's only result of given class definition not generated
PCODE.

> Harbour already permits to read all using parenthesis.

In compiler and HVM Harbour fully replicates Clipper behavior.
The differences in the above tests are only in class code not
in generated PCODE, f.e. in code like:
      o:col := 5
both compilers generate PCODE which send '_COL' massage with one
parameter 5 to object 'o' and for code like:
      o:col( 10 )
both compilers generate PCODE which send 'COL'  massage with one
parameter 10 to object 'o'.
The difference is only inside methods bound with COL and _COL messages.
In Harbour both messages uses the same code:
   METHOD col( nCol ) CLASS Get
      IF PCount() > 0
         ::nCol := iif( ISNUMBER( nCol ), Int( nCol ), 0 )
      ENDIF
      RETURN ::nCol

When in Clipper they have different code:
   METHOD _col( nCol ) CLASS Get
      ::nCol := iif( ISNUMBER( nCol ), Int( nCol ), 0 )
      RETURN ::nCol

   METHOD col( nCol ) CLASS Get
      RETURN ::nCol

That's all. But the difference is not inside Compiler but in tget.prg
and can be easy fixed for strict Clipper compatibility.

> The need is to permit assignment to a function assigning rvalue so:
> o:AssignMethod := 1
> it should be the same of
> o:AssignMethod( 1 )

Unfortunately it is now and we cannot have methods and variables
with the same name.

> or
> oTBrowse:addColumn := oTBColumns
> In case of a var not exists with same name of a method (but today can it 
> exists ?).

Compiler does not know anything about VARs or METHODs. It only sends
messages. How they behave at runtime depends on the code bound with
given method. Clipper and [x]Harbour pass only one context attribute
from compiler code to final PCODE by changing message name and adding
"_" prefix in assing operation so:
   o:msg := 10
gives:
   o:_msg(10)
which is different then
   o:msg()
so later at runtime it's possible to bound two different methods code
with _MSG and MSG. And we use this as you can see in your example.
But we do not have any information about () parenthesis because for
'o:msg()' and 'o:msg' it gives _EXACTLY_ the same PCODE so at runtime
we have nothing to chose different actions.
If we want to support methods and variables with the same name then
we will have to extended generated PCODE and add information about
'()' used in source code so later at runtime we can chose two different
actions just like for assignment. It can be done by message name
modification but also in different way, f.e. as additional attributes.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Oct 22 07:48:54 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 22 07:49:07 2008
Subject: [SPAM] Re: [Harbour] 2008-10-09 20:51 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081022112131.GA9448@34-mo7-2.acn.waw.pl>
References: <20081009185140.GA17892@34-mo7-2.acn.waw.pl>
	<19906002.post@talk.nabble.com>
	<20081009210029.GA24108@34-mo7-2.acn.waw.pl>
	<48FE8D6B.1000304@fsgiudice.com>
	<20081022112131.GA9448@34-mo7-2.acn.waw.pl>
Message-ID: <80ED4DEC-469B-4834-ABAF-F3C9263FB2DD@syenar.hu>

Hi folks,

I was concentrating on documented GET syntax in both
the regression tests and GET fixes, as I believe this
is what is essentially important from the language's POV.

If such further undocumented ways of using GET
is important please feel free to modify it as long
as it doesn't break anything currently working okay
and makes it even more C5x compatible.

Hopefully performance and cleanness won't suffer much.

Possible candidates for such modification in GET,
are: :colorSpec, :pos, :picture, :block, :control,
:buffer, :changed, :clear, :minus, :row, :col, :name.

[ Not based on actual testing, just simply looking
for PCount() usage. ]

:cargo for example is present in all C53 classes, too,
which may (or may not) be affected, not to mention
other SETGET methods there.

Brgds,
Viktor

On 2008.10.22., at 13:21, Przemyslaw Czerpak wrote:

> On Wed, 22 Oct 2008, Francesco Saverio Giudice wrote:
>
> Hi Francesco,
>
>>> F.e. it looks that xbase++ can have methods and object variables
>>> with the same name. It means that:
>>>   ? o:var
>>> gives different code then:
>>>   ? o:var()
>>> or at least documentation it wrong describing :atStart and :atEnd
>>> methods and variables.
>>> It's interesting functionality I even wanted to add but it's not
>>> Clipper compatible though probably we can hide the difference
>>> by introducing "suggested" action to PCODE so o:var() will work
>>> as o:var when there is no method with the name "var".
>>> If other developers think it's important then I can add such
>>> extension.
>> I have just now finished to discuss about this with Pritpal, at  
>> whom I was
>> describing that I have partially lost 2 days because I'm porting a  
>> lib of
>> mine to harbour from xharbour and today I have found that one of  
>> problems
>> was exactly the contrary of above functionality: send a value to a  
>> method
>> using assignment and not parenthesis. What you wrote above it seems  
>> to me
>> that it's already implemented.
>
> No. I only cleaned Harbour grammar rules so it does not accept code
> like:
>   o:msg() := 10
> or:
>   o:msg() += 1
> or:
>   ++o:msg()
> Just like Clipper. I made it for two reasons:
>   1. full Clipper compatibility (Clipper also does not accept such  
> syntax)
>   2. to not close the way for possible extension by backward  
> compatibility
>      if we decide to generate different PCODE for o:msg() and o:msg
> I also eliminated all HVM/Compiler code which was using "_" prefix  
> in message
> name to unconditionally recognize assigned methods what effectively  
> blocks
> using code like:
>
>   CREATE CLASS
>      VAR   _var
>   ENDCLASS
>
> in xHarbour though it's valid Class(y)/Clipper code. In Harbour it  
> works
> correctly.
>
> But I haven't touched generated PCODE (with exception to some  
> optimizations
> and fixes to original Clipper behavior which can be disabled by -kc  
> Harbour
> compikler switch).
> Now Clipper, Harbour and xHarbour generates the same PCODE for o:msg  
> and
> o:msg(). We know nothing about class definition during compilation and
> in final code we only send messages. You can think about it that each
> compiler makes the following internal translation before generating  
> PCODE:
>   o:msg          => o:msg()
>   o:msg()        => o:msg()
>   o:msg := 1     => o:_msg( 1 )
>   o:msg += 2     => o:_msg( o:msg() + 2 )
>   o:msg++        => o:_msg( o:msg() + 1 )
>
> as you can see the information about () used in source code is lost
> and only for assign operation "_" prefix is used in message name.
> But it doesn't matter if you write in your code:
>   o:msg := 1
> or:
>   o:_msg(1)
> in both cases _exactly_ the same PCODE is generated. Just like
> for o:msg and o:msg().
> How it behaves at runtime depends only on class definition and
> which code is bound with 'msg' message and which with '_msg'.
> It can be even the same code just like in SETGET methods.
>
>> Values on right are Clipper - Harbour results
>
> This test only shows some differences in runtime behavior which
> in Harbour depends on class definition code not on HVM internals.
> In xHarbour the results are different due to some hack in class
> code used to resolve some internal problem which effected RT behavior
> of all code which uses classes.
>
>> PROCEDURE Main()
>>  LOCAL o := GetNew()
>>  // var in harbour
>>  ? o:cargo()        // <-- NIL - NIL
>>  ? o:cargo := 10    // <-- 10  - 10
>>  ? o:cargo( 30 )    // <-- 30  - 10
>>  ? o:cargo()        // <-- 30  - 10
>
> Clipper uses the same code for _CARGO and CARGO messages
> in TGET class so
>   o:cargo:=30 => o:_cargo(30)
> and:
>   o:cargo(30) gives the same code.
> This was not exactly replicated in Harbour where cargo is
> simple variable. For strict Clipper compatibility it should
> be changed to SETGET method in TGET class definition.
>
>>  // setget in harbour
>>  ? o:col := 5       // <--  5  -  5
>>  ? o:col( 10 )      // <--  5  - 10
>>  ? o:col()          // <--  5  - 10
>
> Here we have reverted situation. In Harbour SETGET method was used
> and in Clipper different code is used for _COL() massage and COL()
> message so COL(<var>) does not make any assignment. It also should be
> changed for strict compatibility.
>
>>  o := ErrorNew()
>>  ? o:cargo := 10    // <-- 10  - 10
>>  ? o:cargo( 30 )    // <-- 10  - 10
>>  ? o:cargo()        // <-- 10  - 10
>>  o := TBrowseNew()
>>  ? o:cargo := 10    // <-- 10  - 10
>>  ? o:cargo( 30 )    // <-- 10  - 10
>>  ? o:cargo()        // <-- 10  - 10
>>  // setget in harbour
>>  ? o:nTop           // <--  0  -  0
>>  ? o:nTop := 7      // <--  7  -  7
>>  ? o:nTop( 9 )      // <--  9  -  9
>>  ? o:nTop()         // <--  9  -  9
>> RETURN
>> but also in clipper if you wrote:
>> oTBrowse:addColumn := oTBColumns
>> it gives error.
>
> In TBROWSE() and TERROR() classes I tried to exactly replicate  
> original
> Clipper behavior so the results should be the same in both cases.
> Probably TGET() class should be updated if user thinks that such  
> strict
> compatibility is important. Anyhow it's onlt class definition which
> is not bound with problem I was talking about.
>
>> So there are some point where Clipper permits to assign values using
>> parenthesis and in other not, but surely because classes are  
>> implemented
>> differently. In any case it permits to read a value using  
>> parenthesis.
>
> No it isn't. It's only result of given class definition not generated
> PCODE.
>
>> Harbour already permits to read all using parenthesis.
>
> In compiler and HVM Harbour fully replicates Clipper behavior.
> The differences in the above tests are only in class code not
> in generated PCODE, f.e. in code like:
>      o:col := 5
> both compilers generate PCODE which send '_COL' massage with one
> parameter 5 to object 'o' and for code like:
>      o:col( 10 )
> both compilers generate PCODE which send 'COL'  massage with one
> parameter 10 to object 'o'.
> The difference is only inside methods bound with COL and _COL  
> messages.
> In Harbour both messages uses the same code:
>   METHOD col( nCol ) CLASS Get
>      IF PCount() > 0
>         ::nCol := iif( ISNUMBER( nCol ), Int( nCol ), 0 )
>      ENDIF
>      RETURN ::nCol
>
> When in Clipper they have different code:
>   METHOD _col( nCol ) CLASS Get
>      ::nCol := iif( ISNUMBER( nCol ), Int( nCol ), 0 )
>      RETURN ::nCol
>
>   METHOD col( nCol ) CLASS Get
>      RETURN ::nCol
>
> That's all. But the difference is not inside Compiler but in tget.prg
> and can be easy fixed for strict Clipper compatibility.
>
>> The need is to permit assignment to a function assigning rvalue so:
>> o:AssignMethod := 1
>> it should be the same of
>> o:AssignMethod( 1 )
>
> Unfortunately it is now and we cannot have methods and variables
> with the same name.
>
>> or
>> oTBrowse:addColumn := oTBColumns
>> In case of a var not exists with same name of a method (but today  
>> can it
>> exists ?).
>
> Compiler does not know anything about VARs or METHODs. It only sends
> messages. How they behave at runtime depends on the code bound with
> given method. Clipper and [x]Harbour pass only one context attribute
> from compiler code to final PCODE by changing message name and adding
> "_" prefix in assing operation so:
>   o:msg := 10
> gives:
>   o:_msg(10)
> which is different then
>   o:msg()
> so later at runtime it's possible to bound two different methods code
> with _MSG and MSG. And we use this as you can see in your example.
> But we do not have any information about () parenthesis because for
> 'o:msg()' and 'o:msg' it gives _EXACTLY_ the same PCODE so at runtime
> we have nothing to chose different actions.
> If we want to support methods and variables with the same name then
> we will have to extended generated PCODE and add information about
> '()' used in source code so later at runtime we can chose two  
> different
> actions just like for assignment. It can be done by message name
> modification but also in different way, f.e. as additional attributes.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Wed Oct 22 07:52:05 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 22 07:52:02 2008
Subject: [Harbour] 2008-10-22 05:03 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F0A9@SRV02.deltain.net>
References: <20081022030411.GA10494@34-mo7-2.acn.waw.pl>
	<20103476.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815F0A9@SRV02.deltain.net>
Message-ID: <20081022115205.GB9448@34-mo7-2.acn.waw.pl>

On Wed, 22 Oct 2008, Massimo Belgrano wrote:

Hi Massimo and Pritpal

> I have same problem, can you explain how you have resolved

GTWVT is GUI code and in BCC such applications need special linker
switch AFAIR -tW. Probably adding:
   set C_USR=-tW
should be enough.
We should probably think about adding MessageBox() call in Windows
builds and executes it under some conditions, f.e. errors in startup
code. It should help user to locate problems like above. GTWVT generates
internal error:
      hb_errInternal( 10001, "It's not a GUI program", NULL, NULL );
In such case.

BTW I tested this code only in Linux using native builds with GTXWC and
and cross compiled Windows MinGW builds with GTWVT and both works correctly.
Anyhow both GT drivers uses some static variables which may need additional
protection code for clean MT mode. It's probably not critical but for sure
have to be done. It will be also good to create non HVM thread for GTWVT
which will make all internal screen updates and keyboard/mouse polling
asynchronously to other threads.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Oct 22 08:04:10 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 22 08:04:22 2008
Subject: [Harbour] 2008-10-22 05:03 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081022115205.GB9448@34-mo7-2.acn.waw.pl>
References: <20081022030411.GA10494@34-mo7-2.acn.waw.pl>
	<20103476.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815F0A9@SRV02.deltain.net>
	<20081022115205.GB9448@34-mo7-2.acn.waw.pl>
Message-ID: <EBA7E98D-4BAD-4B2C-98AC-A5DF15AE8FA9@syenar.hu>

hbmk.bat has -tWM by default, so it should be okay. (but
I didn't test it for this case specifically).

MSVC on the other hand needs /subsystem:windows instead
of /subsystem:console to make it work. I'll commit
some modifications to help doing that.

Brgds,
Viktor

On 2008.10.22., at 13:52, Przemyslaw Czerpak wrote:

> On Wed, 22 Oct 2008, Massimo Belgrano wrote:
>
> Hi Massimo and Pritpal
>
>> I have same problem, can you explain how you have resolved
>
> GTWVT is GUI code and in BCC such applications need special linker
> switch AFAIR -tW. Probably adding:
>   set C_USR=-tW
> should be enough.
> We should probably think about adding MessageBox() call in Windows
> builds and executes it under some conditions, f.e. errors in startup
> code. It should help user to locate problems like above. GTWVT  
> generates
> internal error:
>      hb_errInternal( 10001, "It's not a GUI program", NULL, NULL );
> In such case.
>
> BTW I tested this code only in Linux using native builds with GTXWC  
> and
> and cross compiled Windows MinGW builds with GTWVT and both works  
> correctly.
> Anyhow both GT drivers uses some static variables which may need  
> additional
> protection code for clean MT mode. It's probably not critical but  
> for sure
> have to be done. It will be also good to create non HVM thread for  
> GTWVT
> which will make all internal screen updates and keyboard/mouse polling
> asynchronously to other threads.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Oct 22 08:17:12 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 22 08:17:29 2008
Subject: [Harbour] 2008-10-22 14:08 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c93440$Blat.v2.6.2$1caaf70c$164cb2663da4@127.0.0.1>

2008-10-22 14:08 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * tests/rto_get.prg
    + Added tests for assigments as function calls (o:col( 10 ) 
      and some for assigments as _function calls (o:_col( 10 )).

  * bin/hbmk.bat
  * make_vc.mak
    - Removed /subsystem:console from LDFLAGS. This seems to 
      be the default so it's not necessary.

  * bin/hbmk.bat
    + Added L_USR support for MSVC. Now it's possible to 
      build GUI (and GTWVT) programs using 
      'set L_USR=/subsystem:WINDOWS' switch.

  * contrib/gtwvg/tests/bld_vc.bat
    ! Using above method to make it work with MSVC.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Wed Oct 22 08:20:54 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 22 08:20:50 2008
Subject: [Harbour] 2008-10-22 05:03 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <EBA7E98D-4BAD-4B2C-98AC-A5DF15AE8FA9@syenar.hu>
References: <20081022030411.GA10494@34-mo7-2.acn.waw.pl>
	<20103476.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815F0A9@SRV02.deltain.net>
	<20081022115205.GB9448@34-mo7-2.acn.waw.pl>
	<EBA7E98D-4BAD-4B2C-98AC-A5DF15AE8FA9@syenar.hu>
Message-ID: <20081022122054.GA6626@34-mo7-2.acn.waw.pl>

On Wed, 22 Oct 2008, Szak?ts Viktor wrote:
> hbmk.bat has -tWM by default, so it should be okay. (but
> I didn't test it for this case specifically).

I'm not BCC user but I thought that -tWM enables only
MT mode but does not force GUI and WinMain() startup.
If not then we may need additional switch for console
MT applications or GTSTD and similar GTs will not work
with BCC MT programs. I cannot say too much about final
MS-Windows binaries behavior because when I execute them
in WINE they have different startup conditions then in
real MS-Windows.

> MSVC on the other hand needs /subsystem:windows instead
> of /subsystem:console to make it work. I'll commit
> some modifications to help doing that.

AFAIR just like POCC.
In MinGW it's -mwindows and this switch is recognized by hb*
scripts though I'll add sth simpler like -gui in the future.
Maybe in hbmk.bat you should add support for some command line
switches passed at the beginning, f.e. sth like:

   IF '%1' == '-mt' GOTO NO_MT
      SET HB_MT=MT
      SHIFT
   :NO_MT
   IF '%1' == '-gui' GOTO NO_GUI
      SET HB_GUI=yes
      SHIFT
   :NO_GUI

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Oct 22 08:43:11 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 22 08:43:23 2008
Subject: [Harbour] 2008-10-22 05:03 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081022122054.GA6626@34-mo7-2.acn.waw.pl>
References: <20081022030411.GA10494@34-mo7-2.acn.waw.pl>
	<20103476.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815F0A9@SRV02.deltain.net>
	<20081022115205.GB9448@34-mo7-2.acn.waw.pl>
	<EBA7E98D-4BAD-4B2C-98AC-A5DF15AE8FA9@syenar.hu>
	<20081022122054.GA6626@34-mo7-2.acn.waw.pl>
Message-ID: <A8CA75D8-F4BA-4994-B1C6-C3F947D22E33@syenar.hu>

Hi Przemek,

Yes, you're right, -tW is the one for BCC, and this
is exactly the one I used in C_USR to build the GTWVG
test program.

Thanks for the SHIFT tip.

Brgds,
Viktor

On 2008.10.22., at 14:20, Przemyslaw Czerpak wrote:

> On Wed, 22 Oct 2008, Szak?ts Viktor wrote:
>> hbmk.bat has -tWM by default, so it should be okay. (but
>> I didn't test it for this case specifically).
>
> I'm not BCC user but I thought that -tWM enables only
> MT mode but does not force GUI and WinMain() startup.
> If not then we may need additional switch for console
> MT applications or GTSTD and similar GTs will not work
> with BCC MT programs. I cannot say too much about final
> MS-Windows binaries behavior because when I execute them
> in WINE they have different startup conditions then in
> real MS-Windows.
>
>> MSVC on the other hand needs /subsystem:windows instead
>> of /subsystem:console to make it work. I'll commit
>> some modifications to help doing that.
>
> AFAIR just like POCC.
> In MinGW it's -mwindows and this switch is recognized by hb*
> scripts though I'll add sth simpler like -gui in the future.
> Maybe in hbmk.bat you should add support for some command line
> switches passed at the beginning, f.e. sth like:
>
>   IF '%1' == '-mt' GOTO NO_MT
>      SET HB_MT=MT
>      SHIFT
>   :NO_MT
>   IF '%1' == '-gui' GOTO NO_GUI
>      SET HB_GUI=yes
>      SHIFT
>   :NO_GUI
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Oct 22 08:55:35 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 22 08:55:53 2008
Subject: [Harbour] 2008-10-22 14:51 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c93445$Blat.v2.6.2$79987b56$13208127d278@127.0.0.1>

2008-10-22 14:51 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/hbmk.bat
    + Added support for 'set HB_GUI=yes'
      Currently implemented for BCC32 and MSVC.
    + Added support for 'set HB_MT=yes' (instead of 'MT')
      for consistency. MT seems to be an xhb heritage and 
      it may be removed in the future.
    + Added support for optional -mt switch as an equivalent 
      to 'set HB_MT=yes'
    + Added support for optional -gui switch as an equivalent 
      to 'set HB_GUI=yes'
    ; NOTE: Ordering (first -mt, then -gui) and casing (everything 
            is lowercase) of the above options are significant.

  * bin/hbmk.bat
  * bin/hbmk_os2.cmd
    * Help screen cleanup.

  * contrib/gtwvg/tests/bld_vc.bat
  * contrib/gtwvg/tests/bld_b32.bat
    * Changed to use HB_GUI=yes instead of C_USR/L_USR.
--
Brgds,
Viktor

From dbtopas at dbtopas.lt  Wed Oct 22 09:02:08 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 22 09:00:10 2008
Subject: [Harbour] ChangeLog 2008-10-22 16:00 UTC+0300 Mindaugas Kavaliauskas
Message-ID: <48FF2450.3070700@dbtopas.lt>

2008-10-22 16:00 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * contrib/rddsql/hbsqldd.h
   * contrib/rddsql/sqlbase.c
   * contrib/rddsql/sqlmix.c
   * contrib/rddsql/mysqldd.c
     * Finished implementation of national sorting support
     * converted // comments to /* */
     * translated lithuanian comments to english
     * updated startup code
     * fixed BYTE * val -> BYTE val[1]
From harbour.01 at syenar.hu  Wed Oct 22 09:00:53 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 22 09:01:10 2008
Subject: [Harbour] 2008-10-22 14:57 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c93446$Blat.v2.6.2$37236e56$18e4844dc3d8@127.0.0.1>

2008-10-22 14:57 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/hbmk_os2.cmd
    + Added support for HB_MT=yes.
    + Added support for -mt switch.

  * bin/hbmk.cmd
    ! Typo in help screen.
--
Brgds,
Viktor

From dbtopas at dbtopas.lt  Wed Oct 22 09:14:12 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 22 09:12:13 2008
Subject: [Harbour] ChangeLog 2008-10-22 16:00 UTC+0300 Mindaugas
	Kavaliauskas
In-Reply-To: <48FF2450.3070700@dbtopas.lt>
References: <48FF2450.3070700@dbtopas.lt>
Message-ID: <48FF2724.7010305@dbtopas.lt>

> 2008-10-22 16:00 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
>   * contrib/rddsql/hbsqldd.h
>     * fixed BYTE * val -> BYTE val[1]

Hi,


Viktor, my code:
    typedef struct _MIXKEY
    {
       ULONG     rec;
       BYTE      notnul;
       BYTE      val[];
    } MIXKEY, *PMIXKEY;
was intensional. Changing to
       BYTE *    val;
is wrong. It's not a pointer to string. It's a string itself, but size 
of val is unknown (depends on key length of index tag). I've changed 
this line to
      BYTE      val[ 1 ];
this is not harmfull, but makes allocation of 1 extra byte. Does MSVC 
gives error on
       BYTE      val[];
?
Does anyone know how to change it to be MSVC compatible?


Inside mysql's .h files MYSQL_ROW_OFFSET is defined as a pointer, but 
I've left this code:
#if sizeof( MYSQL_ROW_OFFSET ) != sizeof( void* )
    #error "MySQLDD error: sizeof( MYSQL_ROW_OFFSET ) != sizeof( void* )"
#endif
just for testing purpose in case definition of MYSQL_ROW_OFFSET will be 
changed in future (or other platforms). I guess we can comment it at 
all, or just delete your hack comment. Does anyone know how to make this 
code portable?


Best regards,
Mindaugas

From harbour.01 at syenar.hu  Wed Oct 22 09:21:50 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 22 09:22:02 2008
Subject: [Harbour] ChangeLog 2008-10-22 16:00 UTC+0300 Mindaugas
	Kavaliauskas
In-Reply-To: <48FF2724.7010305@dbtopas.lt>
References: <48FF2450.3070700@dbtopas.lt> <48FF2724.7010305@dbtopas.lt>
Message-ID: <C4BFFF95-DD19-4A4E-9B06-9353F8C6978D@syenar.hu>

>
Hi Mindaugas,

>     BYTE      val[ 1 ];
> this is not harmfull, but makes allocation of 1 extra byte. Does  
> MSVC gives error on
>      BYTE      val[];
> ?
> Does anyone know how to change it to be MSVC compatible?

Yes, it gave and error, and it was just a humble attempt
to correct it, thanks for fixing it properly. It now
compiles without error.

Right now these are the MSVC warnings (last two may
be important):

.\mysqldd.c(262) : warning C4244: 'function' : conversion from  
'unsigned int' to 'USHORT', possible loss of data
.\mysqldd.c(269) : warning C4244: 'function' : conversion from  
'unsigned int' to 'USHORT', possible loss of data
.\mysqldd.c(276) : warning C4244: '=' : conversion from 'unsigned int'  
to 'USHORT', possible loss of data
.\mysqldd.c(293) : warning C4244: '=' : conversion from 'unsigned  
long' to 'USHORT', possible loss of data
.\mysqldd.c(314) : warning C4244: '=' : conversion from 'unsigned int'  
to 'USHORT', possible loss of data
mysqldd.c(429) : warning C4701: potentially uninitialized local  
variable 'pItemEof' used
mysqldd.c(353) : warning C4701: potentially uninitialized local  
variable 'pFieldInfo' used

Brgds,
Viktor

From dbtopas at dbtopas.lt  Wed Oct 22 09:52:10 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 22 09:50:09 2008
Subject: [Harbour] ChangeLog 2008-10-22 16:00 UTC+0300
	Mindaugas	Kavaliauskas
In-Reply-To: <C4BFFF95-DD19-4A4E-9B06-9353F8C6978D@syenar.hu>
References: <48FF2450.3070700@dbtopas.lt> <48FF2724.7010305@dbtopas.lt>
	<C4BFFF95-DD19-4A4E-9B06-9353F8C6978D@syenar.hu>
Message-ID: <48FF300A.5070803@dbtopas.lt>

Hi,


Szak?ts Viktor wrote:
> Right now these are the MSVC warnings (last two may
> be important):
> 
> mysqldd.c(429) : warning C4701: potentially uninitialized local variable 
> 'pItemEof' used

Yes, this could be important. Actually, I left comment about it a few 
dozens lines above warning place. I can find an answer in 10 minutes, 
but I hope Przemek will answer in a second, so I'll ask it here:

When pArea->uiFieldCount is greater than zero on entry to RDD open() 
method?

> mysqldd.c(353) : warning C4701: potentially uninitialized local variable 
> 'pFieldInfo' used

This should not be a problem, since pFieldInfo.uiType is uninitialiased 
only if previous switch() sentence uses default clause. But in this case 
bError is TRUE, and switch( pFieldInfo.uiType ) is not executed at all.
We may pacify MSVC by adding
    pFieldInfo.uiType = 0;
to default clause of before the first switch(). Please test if this helps.


BTW, I see you've found a lot of unused variables in my code using MSVC. 
BCC55 also has this warning, but it is switched off by default. 
Sometimes I think that adding "-wuse" command line option will be a good 
thing.


Best regards,
Mindaugas
From harbour.01 at syenar.hu  Wed Oct 22 10:04:40 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 22 10:04:57 2008
Subject: [Harbour] ChangeLog 2008-10-22 16:00 UTC+0300
	Mindaugas	Kavaliauskas
In-Reply-To: <48FF300A.5070803@dbtopas.lt>
References: <48FF2450.3070700@dbtopas.lt> <48FF2724.7010305@dbtopas.lt>
	<C4BFFF95-DD19-4A4E-9B06-9353F8C6978D@syenar.hu>
	<48FF300A.5070803@dbtopas.lt>
Message-ID: <103DA877-EF52-4E99-AF3A-B14718000A45@syenar.hu>

>>
>> mysqldd.c(353) : warning C4701: potentially uninitialized local  
>> variable 'pFieldInfo' used
>
> This should not be a problem, since pFieldInfo.uiType is  
> uninitialiased only if previous switch() sentence uses default  
> clause. But in this case bError is TRUE, and  
> switch( pFieldInfo.uiType ) is not executed at all.
> We may pacify MSVC by adding
>   pFieldInfo.uiType = 0;
> to default clause of before the first switch(). Please test if this  
> helps.

Yes, it does the trick.

> BTW, I see you've found a lot of unused variables in my code using  
> MSVC. BCC55 also has this warning, but it is switched off by  
> default. Sometimes I think that adding "-wuse" command line option  
> will be a good thing.

We use -w, which turns on all warnings. I'm specifically
getting this kind of warnings in DEBUG mode for some
BCC 5.8 internal variable. It's not the same as
"potentially uninitialized" though.

In my experience MSVS is very good at signaling warnings,
while BCC is very forgiving, sometimes even buggy in
5.8.

Brgds,
Viktor

From mbelgrano at deltain.it  Wed Oct 22 10:06:38 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Oct 22 10:07:20 2008
Subject: [Harbour] Multi windows Virtual & Phisycal & other littke suggestion
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0AF@SRV02.deltain.net>

Thanks to upcoming update we have multi-window GT. So  This can be a
good moment for a little proposal: 

1) is possible Having Virtual size of screen different from Phisycal
Physical  WINDOWS WILL BE MORE BIG OR MORE LITTLE (mobile device) THAT
logical console windows
The windows created will be more big or more small that console area
SetMode() changes the size of a logical console window to the specified
number of rows and column depending from font size
Will this capability supported also on same GT but having foundation in
harbour?

2) I suggest adding a easy syntax inspired by Visual FoxPro is Harbour
can add
Define Window WindowName At X1, Y1 Size X2, Y2
DEFINE WINDOW X from 1,1 to 22, 70 Title "X" font "MS San Serif", 10  
ACTIVATE WINDOW X
For extended feature we can have vfp or xbase++ syntax where aivable


3) is possible a easy way for extend GTWVT with GUI Components written
in harbour and easy portable 
In xharbour for example gtwvw is born for add same component like text
box but it must reinclude all gtwvt source
If we have a harbour way we can have very foundation for harbour gui



    A REMINDER : This development alone places Harbour much higher than
so many dialects. Mind-blowing feature. I had ever longed
       for this functionality since I started with Xbase++.But the ease
of use of a MW-GT in Harbour is far superior
       than in Xbase++. Spread this word. I am sure this feature alone
is going to add a handsome value to my applications.
       I hope you all will be benefitted.
       I have no word of appreciation for Przemyslaw Czerpak as whatever
I will say will fall short of weight. So...


Massimo Belgrano



From dbtopas at dbtopas.lt  Wed Oct 22 10:22:04 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 22 10:20:05 2008
Subject: [Harbour] ChangeLog 2008-10-22 17:17 UTC+0300 Mindaugas Kavaliauskas
Message-ID: <48FF370C.7050507@dbtopas.lt>

2008-10-22 17:17 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   + contrib/rddads/adsx.c
     + added implementation of local indexing support for ADS driver.
       Local indexing is used in case server can not do index
       creation, for example: index key depends on relation child area
       fields, index key uses user defined functions, index is created
       using codeblock, but not expression, etc.
     ; This code implements no update index! Partial index update could
       also be implemented, but I didn't have a need for this. Besides
       that partial index implementation will be a little more
       complicated than in other RDD. Database update operations are
       not done in a single goCold() method. So, index update should
       be called, from many methods: append(), putValue(), delete(),
       recall(), etc., or ADS RDD structure should be changed to
       support real goCold(). For implementation of partial index,
       I'd suggest to use tree index (instead of a simple sorted array
       and binary search). B-tree code could be found in
       contrib/rddsql/sqlmix.c.
     ; Please check makefiles, and other compilers, platforms.
From mbelgrano at deltain.it  Wed Oct 22 10:24:42 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Oct 22 10:25:32 2008
Subject: [Harbour] 2008-10-22 05:03 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <A8CA75D8-F4BA-4994-B1C6-C3F947D22E33@syenar.hu>
References: <20081022030411.GA10494@34-mo7-2.acn.waw.pl><20103476.post@talk.nabble.com><AFB948164110ED43B5EB849E8DEEF03815F0A9@SRV02.deltain.net><20081022115205.GB9448@34-mo7-2.acn.waw.pl><EBA7E98D-4BAD-4B2C-98AC-A5DF15AE8FA9@syenar.hu><20081022122054.GA6626@34-mo7-2.acn.waw.pl>
	<A8CA75D8-F4BA-4994-B1C6-C3F947D22E33@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0B0@SRV02.deltain.net>

set HB_USER_LIBS=gtwvt.lib
set HB_MT=yes
set C_USR=-tW
bld_b32 mttest10

when run mttest10 open and close immediately


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Wednesday, October 22, 2008 2:43 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] 2008-10-22 05:03 UTC+0200 PrzemyslawCzerpak(druzus/at/priv.onet.pl)

Hi Przemek,

Yes, you're right, -tW is the one for BCC, and this
is exactly the one I used in C_USR to build the GTWVG
test program.

Thanks for the SHIFT tip.

Brgds,
Viktor

On 2008.10.22., at 14:20, Przemyslaw Czerpak wrote:

> On Wed, 22 Oct 2008, Szak?ts Viktor wrote:
>> hbmk.bat has -tWM by default, so it should be okay. (but
>> I didn't test it for this case specifically).
>
> I'm not BCC user but I thought that -tWM enables only
> MT mode but does not force GUI and WinMain() startup.
> If not then we may need additional switch for console
> MT applications or GTSTD and similar GTs will not work
> with BCC MT programs. I cannot say too much about final
> MS-Windows binaries behavior because when I execute them
> in WINE they have different startup conditions then in
> real MS-Windows.
>
>> MSVC on the other hand needs /subsystem:windows instead
>> of /subsystem:console to make it work. I'll commit
>> some modifications to help doing that.
>
> AFAIR just like POCC.
> In MinGW it's -mwindows and this switch is recognized by hb*
> scripts though I'll add sth simpler like -gui in the future.
> Maybe in hbmk.bat you should add support for some command line
> switches passed at the beginning, f.e. sth like:
>
>   IF '%1' == '-mt' GOTO NO_MT
>      SET HB_MT=MT
>      SHIFT
>   :NO_MT
>   IF '%1' == '-gui' GOTO NO_GUI
>      SET HB_GUI=yes
>      SHIFT
>   :NO_GUI
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Wed Oct 22 10:29:06 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 22 10:29:18 2008
Subject: [Harbour] ChangeLog 2008-10-22 17:17 UTC+0300 Mindaugas
	Kavaliauskas
In-Reply-To: <48FF370C.7050507@dbtopas.lt>
References: <48FF370C.7050507@dbtopas.lt>
Message-ID: <471AF49A-CB57-4256-A8A1-C3FA6B99E191@syenar.hu>

Hi Mindaugas (and all),

It's very easy to update make files now, the new source
file has to be added to local Makefile and common.mak,
following the existing files. That's all.

(Makefile needs tab for indenting, common.mak needs
simple spaces, that's the only notable thing to be aware
of.)

Brgds,
Viktor

On 2008.10.22., at 16:22, Mindaugas Kavaliauskas wrote:

> 2008-10-22 17:17 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/ 
> dbtopas.lt)
>  + contrib/rddads/adsx.c
>    + added implementation of local indexing support for ADS driver.
>      Local indexing is used in case server can not do index
>      creation, for example: index key depends on relation child area
>      fields, index key uses user defined functions, index is created
>      using codeblock, but not expression, etc.
>    ; This code implements no update index! Partial index update could
>      also be implemented, but I didn't have a need for this. Besides
>      that partial index implementation will be a little more
>      complicated than in other RDD. Database update operations are
>      not done in a single goCold() method. So, index update should
>      be called, from many methods: append(), putValue(), delete(),
>      recall(), etc., or ADS RDD structure should be changed to
>      support real goCold(). For implementation of partial index,
>      I'd suggest to use tree index (instead of a simple sorted array
>      and binary search). B-tree code could be found in
>      contrib/rddsql/sqlmix.c.
>    ; Please check makefiles, and other compilers, platforms.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Oct 22 11:08:08 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 22 11:08:25 2008
Subject: [Harbour] 2008-10-22 17:07 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c93457$Blat.v2.6.2$fdef3522$1b508f70191e@127.0.0.1>

2008-10-22 17:07 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/hbmk.bat
    * Minor.

  * contrib/rddsql/mysqldd.c
    ! Fixed one warning.

  * contrib/rddads/adsx.c
    ! Fixed codepage/MT related compile error.
    ! Some warnings.
    ! svn:keywords, svn:eol-style
--
Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Wed Oct 22 11:14:09 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Oct 22 11:14:17 2008
Subject: [Harbour] ChangeLog 2008-10-22 16:00 UTC+0300
	MindaugasKavaliauskas
References: <48FF2450.3070700@dbtopas.lt> <48FF2724.7010305@dbtopas.lt>
Message-ID: <9641B2941BFF4BBD95B21C18C5145E91@emag>


-----Messaggio Originale----- 
Da: "Mindaugas Kavaliauskas" <dbtopas@dbtopas.lt>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoled? 22 ottobre 2008 15.14
Oggetto: Re: [Harbour] ChangeLog 2008-10-22 16:00 UTC+0300 
MindaugasKavaliauskas


> BYTE      val[];

This is not a valid C statement, as far as I know.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From dbtopas at dbtopas.lt  Wed Oct 22 11:26:34 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 22 11:24:33 2008
Subject: [Harbour] 2008-10-22 17:07 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c93457$Blat.v2.6.2$fdef3522$1b508f70191e@127.0.0.1>
References: <01c93457$Blat.v2.6.2$fdef3522$1b508f70191e@127.0.0.1>
Message-ID: <48FF462A.6060106@dbtopas.lt>

Hi,


>   * contrib/rddads/adsx.c
>     ! Fixed codepage/MT related compile error.
>     ! Some warnings.
Thanks.

>     ! svn:keywords, svn:eol-style
Hmm, I've set svn:keywords to "Author Date Id Revision" and 
svn:eol-style to "native" before commit. It had to be OK...



Best regards,
Mindaugas
From harbour.01 at syenar.hu  Wed Oct 22 11:30:38 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 22 11:30:50 2008
Subject: [Harbour] 2008-10-22 17:07 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <48FF462A.6060106@dbtopas.lt>
References: <01c93457$Blat.v2.6.2$fdef3522$1b508f70191e@127.0.0.1>
	<48FF462A.6060106@dbtopas.lt>
Message-ID: <A206677C-A854-4333-A645-212AC4106D58@syenar.hu>

Hi Mindaugas,

On 2008.10.22., at 17:26, Mindaugas Kavaliauskas wrote:

> Hi,
>
>
>>  * contrib/rddads/adsx.c
>>    ! Fixed codepage/MT related compile error.
>>    ! Some warnings.
> Thanks.
>
>>    ! svn:keywords, svn:eol-style
> Hmm, I've set svn:keywords to "Author Date Id Revision" and svn:eol- 
> style to "native" before commit. It had to be OK...

It may have been something else then
(maybe the ":" char after Id).

Brgds,
Viktor

From eyelagui at hotmail.com  Wed Oct 22 11:31:10 2008
From: eyelagui at hotmail.com (eyelagui@hotmail.com)
Date: Wed Oct 22 11:31:32 2008
Subject: [Harbour] =?iso-8859-1?q?Respuesta_autom=E1tica?=
In-Reply-To: <A206677C-A854-4333-A645-212AC4106D58@syenar.hu>
Message-ID: <BAY0-MC5-F6D43D99E4FF40752B1EA6C0290@phx.gbl>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081022/01b9793c/attachment.html
From eyelagui at hotmail.com  Wed Oct 22 11:32:14 2008
From: eyelagui at hotmail.com (eyelagui@hotmail.com)
Date: Wed Oct 22 11:32:23 2008
Subject: [Harbour] =?iso-8859-1?q?Respuesta_autom=E1tica?=
In-Reply-To: <BAY0-MC5-F6D43D99E4FF40752B1EA6C0290@phx.gbl>
Message-ID: <BAY0-MC1-F15AD4F004EE8660C0099B1C0290@phx.gbl>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081022/a13d3d4a/attachment.html
From druzus at acn.waw.pl  Wed Oct 22 11:42:24 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 22 11:42:21 2008
Subject: [Harbour] ChangeLog 2008-10-22 16:00 UTC+0300 Mindaugas
	Kavaliauskas
In-Reply-To: <48FF300A.5070803@dbtopas.lt>
References: <48FF2450.3070700@dbtopas.lt> <48FF2724.7010305@dbtopas.lt>
	<C4BFFF95-DD19-4A4E-9B06-9353F8C6978D@syenar.hu>
	<48FF300A.5070803@dbtopas.lt>
Message-ID: <20081022154224.GA32264@34-mo7-2.acn.waw.pl>

On Wed, 22 Oct 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> Yes, this could be important. Actually, I left comment about it a few 
> dozens lines above warning place. I can find an answer in 10 minutes, but I 
> hope Przemek will answer in a second, so I'll ask it here:
> When pArea->uiFieldCount is greater than zero on entry to RDD open() 
> method?

Such situation happens in export/import RDDs like SDF or DELIM
when data is imported (append from) from such RDDs. They do not
have information about field format in data files (no headers)
and such info is taken from destination area and set before OPEN()
method is called. As I can see it will be good to make base DBF RDD
safe for such usage. I had to forgot about it.

best regards,
Przemek
From eyelagui at hotmail.com  Wed Oct 22 11:42:43 2008
From: eyelagui at hotmail.com (eyelagui@hotmail.com)
Date: Wed Oct 22 11:42:50 2008
Subject: [Harbour] =?iso-8859-1?q?Respuesta_autom=E1tica?=
In-Reply-To: <20081022154224.GA32264@34-mo7-2.acn.waw.pl>
Message-ID: <BAY0-MC10-F18F080A2FBE4A93742152CC0290@phx.gbl>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081022/435655fe/attachment.html
From mbelgrano at deltain.it  Wed Oct 22 11:42:58 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Oct 22 11:43:44 2008
Subject: =?iso-8859-1?Q?RE=3A_=5BHarbour=5D_Respuesta_autom=E1tica?=
In-Reply-To: <BAY0-MC1-F15AD4F004EE8660C0099B1C0290@phx.gbl>
References: <BAY0-MC5-F6D43D99E4FF40752B1EA6C0290@phx.gbl>
	<BAY0-MC1-F15AD4F004EE8660C0099B1C0290@phx.gbl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0B2@SRV02.deltain.net>

Also in my opinion gmail is far superior that hotmail

Hand you have all powerfull of google document and ph

 

From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of eyelagui@hotmail.com
Sent: Wednesday, October 22, 2008 5:32 PM
To: harbour@harbour-project.org
Subject: [Harbour] Respuesta autom?tica

 

Me cans? de que hotmail me mande a la basura todo mi correo ?til y siga dejando entrar a mi bandeja de entrada todo el correo basura.
Me cambi? al correo de google, te recomiendo hacer lo mismo.

I?m tired of hotmail trowing all my useful email to trash as spam and letting so much spam to get into my incoming folder.
I have switched to google's email, i recommend you do the same.

Tuve que poner este msg. porque la gente de hotmail es tan idiota que no tiene una opci?n para eliminar la cuenta, as? que aprovecho para hacerle publicidad a un servicio que s? funciona y que s? se puede dar de baja.

I had to write this answer message, because hotmail's people is so lame that they couldn't put an "erase my account" option, so i seize this chance to make advertising for a service that does work and you can erase whenever you want.

hotmail apesta.

Hotmail stinks.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081022/1b1072a3/attachment.html
From druzus at acn.waw.pl  Wed Oct 22 11:45:50 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 22 11:45:47 2008
Subject: [Harbour] 2008-10-22 17:45 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081022154550.GA27873@34-mo7-2.acn.waw.pl>

2008-10-22 17:45 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hbmk.bat
    * simple modification to make beginning hbmk parameters (-mt and -gui)
      position independent though they still have to be used before Harbour/
      C compiler switches and filenames

  * harbour/source/common/hbdate.c
  * harbour/source/compiler/cmdcheck.c
  * harbour/source/rtl/filesys.c
  * harbour/source/rtl/hbffind.c
    ! use MT safe localtime_r() function if it's available instead of
      localtime()
      TODO: clean the usage of this function and gmttime[_r]() probably
      by adding our own wrappers.

  * harbour/source/rtl/hbffind.c
    ! disabled calls to tzset() - this function should be executed
      automatically by CRTL only if it's necessary. It's also not MT
      safe and can cause MT applications crash.

best regards
Przemek
From eyelagui at hotmail.com  Wed Oct 22 11:54:32 2008
From: eyelagui at hotmail.com (eyelagui@hotmail.com)
Date: Wed Oct 22 11:54:40 2008
Subject: [Harbour] =?iso-8859-1?q?Respuesta_autom=E1tica?=
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F0B2@SRV02.deltain.net>
Message-ID: <BAY0-MC10-F120690627E5669269203C4C0290@phx.gbl>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081022/ec325037/attachment.html
From druzus at acn.waw.pl  Wed Oct 22 13:13:41 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 22 13:13:38 2008
Subject: [Harbour] 2008-10-22 19:13 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081022171341.GA1337@34-mo7-2.acn.waw.pl>

2008-10-22 19:13 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/thread.c
    ! fixed memory allocation in HB_THREADWAIT() when more then 16
      threads were specified

best regards
Przemek
From druzus at acn.waw.pl  Wed Oct 22 13:52:21 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 22 13:52:18 2008
Subject: [Harbour] 2008-10-22 19:52 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081022175221.GA32154@34-mo7-2.acn.waw.pl>

2008-10-22 19:52 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gttrm/gttrm.c
    * use CP437 for BOX characters when terminal is in UTF-8 mode

best regards
Przemek
From druzus at acn.waw.pl  Wed Oct 22 13:58:20 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 22 13:58:17 2008
Subject: [Harbour] 2008-10-22 05:03 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F0B0@SRV02.deltain.net>
References: <A8CA75D8-F4BA-4994-B1C6-C3F947D22E33@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F0B0@SRV02.deltain.net>
Message-ID: <20081022175820.GA32561@34-mo7-2.acn.waw.pl>

On Wed, 22 Oct 2008, Massimo Belgrano wrote:

Hi Massimo,

> set HB_USER_LIBS=gtwvt.lib
> set HB_MT=yes
> set C_USR=-tW
> bld_b32 mttest10
> when run mttest10 open and close immediately

Please try hbmk.bat without any environment variables like HB_MT or C_USR,
f.e.:
   hbmk -mt -gui mttest10

and please also check if it does not generate hb_out.log file with some
information why it behaves in such way.

Viktor,
Can you check if you can build mttest10 with BCC and it executes
correctly in real MS-Windows?

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Oct 22 14:02:48 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 22 14:03:03 2008
Subject: [Harbour] 2008-10-22 20:01 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c93470$Blat.v2.6.2$64877430$14007d070530@127.0.0.1>

2008-10-22 20:01 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * bin/hbmk.bat
    ! Fix to previous change. (MT and GUI status was reset in the loop).

  * bin/hbmk.bat
  * bin/hbmk_os2.cmd
    ! Help message corrections.

  * bin/hbmk.bat
  * make_vc.mak
  * config/w32/msvc.cf
  * config/w32/msvcce.cf
    * Using lowercase linker options for MSVC. Just for consistency.
    * Using '/' as a switch char for MSVC linker. This works fo all 
      old version.

  * contrib/mtpl_vc.mak
    * Minor formatting.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Oct 22 14:12:34 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 22 14:12:48 2008
Subject: [Harbour] 2008-10-22 05:03 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081022175820.GA32561@34-mo7-2.acn.waw.pl>
References: <A8CA75D8-F4BA-4994-B1C6-C3F947D22E33@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F0B0@SRV02.deltain.net>
	<20081022175820.GA32561@34-mo7-2.acn.waw.pl>
Message-ID: <ECAB4C98-874F-4039-B139-3096480D5691@syenar.hu>

>   hbmk -mt -gui mttest10
>
> and please also check if it does not generate hb_out.log file with  
> some
> information why it behaves in such way.
>
> Viktor,
> Can you check if you can build mttest10 with BCC and it executes
> correctly in real MS-Windows?

It works, I can confirm.

Brgds,
Viktor

From mbelgrano at deltain.it  Wed Oct 22 14:12:32 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Oct 22 14:13:19 2008
Subject: [Harbour] 2008-10-22 05:03
	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081022175820.GA32561@34-mo7-2.acn.waw.pl>
References: <A8CA75D8-F4BA-4994-B1C6-C3F947D22E33@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815F0B0@SRV02.deltain.net>
	<20081022175820.GA32561@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0B7@SRV02.deltain.net>

Compile fine
When run i receive open error test.dbf dos error 2

Now HBMK is aivable also for BCC?

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Wednesday, October 22, 2008 7:58 PM
To: Harbour Project Main Developer List.
Subject: Re: RE: [Harbour] 2008-10-22 05:03 UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)

On Wed, 22 Oct 2008, Massimo Belgrano wrote:

Hi Massimo,

> set HB_USER_LIBS=gtwvt.lib
> set HB_MT=yes
> set C_USR=-tW
> bld_b32 mttest10
> when run mttest10 open and close immediately

Please try hbmk.bat without any environment variables like HB_MT or C_USR,
f.e.:
   hbmk -mt -gui mttest10

and please also check if it does not generate hb_out.log file with some
information why it behaves in such way.

Viktor,
Can you check if you can build mttest10 with BCC and it executes
correctly in real MS-Windows?

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Wed Oct 22 14:15:56 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 22 14:15:53 2008
Subject: [Harbour] 2008-10-22 05:03 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <ECAB4C98-874F-4039-B139-3096480D5691@syenar.hu>
References: <A8CA75D8-F4BA-4994-B1C6-C3F947D22E33@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F0B0@SRV02.deltain.net>
	<20081022175820.GA32561@34-mo7-2.acn.waw.pl>
	<ECAB4C98-874F-4039-B139-3096480D5691@syenar.hu>
Message-ID: <20081022181556.GA18407@34-mo7-2.acn.waw.pl>

On Wed, 22 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

>>   hbmk -mt -gui mttest10
>> and please also check if it does not generate hb_out.log file with some
>> information why it behaves in such way.
>> Can you check if you can build mttest10 with BCC and it executes
>> correctly in real MS-Windows?
> It works, I can confirm.

Thank you very much.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Oct 22 14:23:47 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 22 14:23:44 2008
Subject: [Harbour] 2008-10-22 05:03
	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F0B7@SRV02.deltain.net>
References: <20081022175820.GA32561@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F0B7@SRV02.deltain.net>
Message-ID: <20081022182347.GA20493@34-mo7-2.acn.waw.pl>

On Wed, 22 Oct 2008, Massimo Belgrano wrote:
> Compile fine
> When run i receive open error test.dbf dos error 2

It's correct behavior. You need test.dbf file, f.e. from tests/
directory. Just copy it. Anyhow even error messages are good tests.
You should see ALERT() message in each GTWVT window.

> Now HBMK is aivable also for BCC?

It's .bat file with some limited functionality in comparison to
hbmk scripts which replaced bld*.bat files.
If I'll find spare time to make some cleanups in hbmk.prg then I'll
commit it to SVN. It should give similar to hb* script functionality
on platforms which does not support bourne shell. But it will have to
be updated for non-GCC based compilers. I added only BCC.

best regards,
Przemek
From hbco2 at sbcglobal.net  Wed Oct 22 14:35:22 2008
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Wed Oct 22 14:35:09 2008
Subject: [Harbour] 2008-10-22 05:03
	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081022182347.GA20493@34-mo7-2.acn.waw.pl>
References: <20081022175820.GA32561@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F0B7@SRV02.deltain.net>
	<20081022182347.GA20493@34-mo7-2.acn.waw.pl>
Message-ID: <1224700522.3684.10.camel@hblx.340cst>

Did hbmk disappear for gcc?  Or did I goof up?

Bill

On Wed, 2008-10-22 at 20:23 +0200, Przemyslaw Czerpak wrote:
> On Wed, 22 Oct 2008, Massimo Belgrano wrote:
> > Compile fine
> > When run i receive open error test.dbf dos error 2
> 
> It's correct behavior. You need test.dbf file, f.e. from tests/
> directory. Just copy it. Anyhow even error messages are good tests.
> You should see ALERT() message in each GTWVT window.
> 
> > Now HBMK is aivable also for BCC?
> 
> It's .bat file with some limited functionality in comparison to
> hbmk scripts which replaced bld*.bat files.
> If I'll find spare time to make some cleanups in hbmk.prg then I'll
> commit it to SVN. It should give similar to hb* script functionality
> on platforms which does not support bourne shell. But it will have to
> be updated for non-GCC based compilers. I added only BCC.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From eyelagui at hotmail.com  Wed Oct 22 14:36:53 2008
From: eyelagui at hotmail.com (eyelagui@hotmail.com)
Date: Wed Oct 22 14:37:07 2008
Subject: [Harbour] =?iso-8859-1?q?Respuesta_autom=E1tica?=
In-Reply-To: <1224700522.3684.10.camel@hblx.340cst>
Message-ID: <BAY0-MC10-F199A71863D400E1A406839C0290@phx.gbl>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081022/b0bc9b06/attachment.html
From druzus at acn.waw.pl  Wed Oct 22 14:48:52 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 22 14:48:50 2008
Subject: [Harbour] 2008-10-22 05:03
	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <1224700522.3684.10.camel@hblx.340cst>
References: <20081022175820.GA32561@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F0B7@SRV02.deltain.net>
	<20081022182347.GA20493@34-mo7-2.acn.waw.pl>
	<1224700522.3684.10.camel@hblx.340cst>
Message-ID: <20081022184852.GA13845@34-mo7-2.acn.waw.pl>

On Wed, 22 Oct 2008, Bill Smith wrote:

Hi Bill,

> Did hbmk disappear for gcc?  Or did I goof up?

No it still exists but it's shell script only for GCC base compilers
which cannot be executed in pure MS-Windows, DOS or OS2 if you do not
have BASH.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Oct 22 15:54:34 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Oct 22 15:54:44 2008
Subject: [Harbour] common.ch missed in contrib/hbct/showtime.prg
Message-ID: <9257026e0810221254p6d6a9232tce6c8336e9ea7928@mail.gmail.com>

Could anybody add this fix to a next commit?

best regards,
Lorenzo
From eyelagui at hotmail.com  Wed Oct 22 15:55:09 2008
From: eyelagui at hotmail.com (eyelagui@hotmail.com)
Date: Wed Oct 22 15:55:17 2008
Subject: [Harbour] =?iso-8859-1?q?Respuesta_autom=E1tica?=
In-Reply-To: <9257026e0810221254p6d6a9232tce6c8336e9ea7928@mail.gmail.com>
Message-ID: <BAY0-MC11-F5155A0889ABFEB30E136EC0290@phx.gbl>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081022/9d9cdf2c/attachment.html
From druzus at acn.waw.pl  Wed Oct 22 22:01:59 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 22 22:01:53 2008
Subject: [Harbour] 2008-10-23 04:01 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081023020159.GA27614@34-mo7-2.acn.waw.pl>

2008-10-23 04:01 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtxwc/gtxwc.h
  * harbour/source/rtl/gtxwc/gtxwc.c
    ! use XInitThreads() for MT safe thread access when linked with MT HVM
    + added optional mutex protection enabled by HB_XWC_XLIB_NEEDLOCKS macro
      to use when XLib does not support XInitThreads()

best regards
Przemek
From druzus at acn.waw.pl  Wed Oct 22 22:35:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 22 22:35:45 2008
Subject: [Harbour] 2008-10-23 04:35 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081023023551.GA23182@34-mo7-2.acn.waw.pl>

2008-10-23 04:35 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtapi.c
    * LOCK/UNLOCK GT in hb_gtBeginWrite()/hb_gtEndWrite()

  * harbour/contrib/hbct/showtime.prg
    ! added missing common.ch

  * harbour/contrib/hbct/screen2.c
    % use hb_gtPutText() in _HB_CTDSPTIME()

  * harbour/contrib/hbct/screen1.c
    * forrmatting

best regards
Przemek
From druzus at acn.waw.pl  Wed Oct 22 22:39:50 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 22 22:39:46 2008
Subject: [Harbour] 2008-10-23 04:39 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081023023950.GA27989@34-mo7-2.acn.waw.pl>

2008-10-23 04:39 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtwvt/gtwvt.c
    * removed unnecessary initialization

  * harbour/contrib/hbct/screen2.c
    * removed unused variable

best regards
Przemek
From bedipritpal at hotmail.com  Wed Oct 22 23:17:30 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Oct 22 23:17:38 2008
Subject: [Harbour] 2008-10-22 20:11 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20123697.post@talk.nabble.com>


2008-10-22 20:11 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/gtwvg.c
  * harbour/contrib/gtwvg/gtwvg.h
  * harbour/contrib/gtwvg/wvgpaint.prg
  * harbour/contrib/gtwvg/tests/demowvg.prg
    ! Updated to current GTWVT changes for multi-windows support.
    ;NOTE Compile demowvg.prg with -d__MW__ and execute repeatedly 
     <Traditonal><Next Gets | Browser>. Also paly with other parts as usual.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-10-22-20%3A11-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20123697p20123697.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From eyelagui at hotmail.com  Wed Oct 22 23:17:51 2008
From: eyelagui at hotmail.com (eyelagui@hotmail.com)
Date: Wed Oct 22 23:17:59 2008
Subject: [Harbour] =?iso-8859-1?q?Respuesta_autom=E1tica?=
In-Reply-To: <20123697.post@talk.nabble.com>
Message-ID: <BAY0-MC8-F21E2AEA839EFD25EA03F71C0280@phx.gbl>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081022/654a05f4/attachment.html
From bedipritpal at hotmail.com  Wed Oct 22 23:46:46 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Oct 22 23:46:52 2008
Subject: [Harbour] 2008-10-22 20:45 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20123909.post@talk.nabble.com>


2008-10-22 20:45 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/tests/demowvg.prg
    ! Minor change to change the color pallet of <Next Gets> screen.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-10-22-20%3A45-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20123909p20123909.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Wed Oct 22 23:59:57 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Oct 23 00:00:06 2008
Subject: [Harbour] 2008-10-22 20:58 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20124013.post@talk.nabble.com>


2008-10-22 20:58 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/tests/demowvg.prg
    ! Yet another cosmetic change to demonstrate Fonts and Size of the
windows.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-10-22-20%3A58-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20124013p20124013.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From Jose.Luis at iaicom.com  Thu Oct 23 03:44:23 2008
From: Jose.Luis at iaicom.com (Jose Luis Capel)
Date: Thu Oct 23 05:24:10 2008
Subject: [Harbour] Using hashes
Message-ID: <10C28C4554DFE54EB20321B9CB8931C21CF849@servidor01.AGSoft.local>

Hi all,

I want to know if it is possible to use hashes in this way:

hMyHash:MyKey := 'SomeValue'

instead of

hMyHash['MyKey'] := 'SomeValue'

Thanks and regards,
Jos? Luis Capel


From eyelagui at hotmail.com  Thu Oct 23 05:24:23 2008
From: eyelagui at hotmail.com (eyelagui@hotmail.com)
Date: Thu Oct 23 05:24:33 2008
Subject: [Harbour] =?iso-8859-1?q?Respuesta_autom=E1tica?=
In-Reply-To: <10C28C4554DFE54EB20321B9CB8931C21CF849@servidor01.AGSoft.local>
Message-ID: <BAY0-MC9-F3F094BAB7FE03464452D5C0280@phx.gbl>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081023/55334a33/attachment.html
From harbour.01 at syenar.hu  Thu Oct 23 05:31:08 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 23 05:31:20 2008
Subject: =?ISO-8859-1?Q?Re:_[Harbour]_Respuesta_autom=E1tica?=
In-Reply-To: <BAY0-MC9-F3F094BAB7FE03464452D5C0280@phx.gbl>
References: <BAY0-MC9-F3F094BAB7FE03464452D5C0280@phx.gbl>
Message-ID: <17A32925-B11F-4F05-B1EC-5B5B83D2A8B5@syenar.hu>

eyelagui,

Would you please do us a favor and unsubscribe
from this list with your old hotmail e-mail?

Thank you.

Brgds,
Viktor

On 2008.10.23., at 11:24, <eyelagui@hotmail.com> wrote:

> Me cans? de que hotmail me mande a la basura todo mi correo ?til y  
> siga dejando entrar a mi bandeja de entrada todo el correo basura.
> Me cambi? al correo de google, te recomiendo hacer lo mismo.
>
> I?m tired of hotmail trowing all my useful email to trash as spam  
> and letting so much spam to get into my incoming folder.
> I have switched to google's email, i recommend you do the same.
>
> Tuve que poner este msg. porque la gente de hotmail es tan idiota  
> que no tiene una opci?n para eliminar la cuenta, as? que aprovecho  
> para hacerle publicidad a un servicio que s? funciona y que s? se  
> puede dar de baja.
>
> I had to write this answer message, because hotmail's people is so  
> lame that they couldn't put an "erase my account" option, so i seize  
> this chance to make advertising for a service that does work and you  
> can erase whenever you want.
>
> hotmail apesta.
>
> Hotmail stinks.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From myorg63 at mail.ru  Thu Oct 23 05:50:25 2008
From: myorg63 at mail.ru (Petr Chornyj)
Date: Thu Oct 23 05:50:33 2008
Subject: [Harbour] Using hashes
In-Reply-To: <10C28C4554DFE54EB20321B9CB8931C21CF849@servidor01.AGSoft.local>
References: <10C28C4554DFE54EB20321B9CB8931C21CF849@servidor01.AGSoft.local>
Message-ID: <20127792.post@talk.nabble.com>




Jos? Luis Capel wrote:
> 
> 
> hMyHash:MyKey := 'SomeValue'
> 
> 

Just rebuild Harbour with HB_HASH_MSG_ITEMS macro
C_USR=-DHB_HASH_MSG_ITEMS

Regards,
Petr
-- 
View this message in context: http://www.nabble.com/Using-hashes-tp20127440p20127792.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From eyelagui at hotmail.com  Thu Oct 23 05:50:49 2008
From: eyelagui at hotmail.com (eyelagui@hotmail.com)
Date: Thu Oct 23 05:50:57 2008
Subject: [Harbour] =?iso-8859-1?q?Respuesta_autom=E1tica?=
In-Reply-To: <20127792.post@talk.nabble.com>
Message-ID: <BAY0-MC5-F1765012D17223A6E4C05E0C0280@phx.gbl>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081023/00c3bbcd/attachment-0001.html
From harbour.01 at syenar.hu  Thu Oct 23 06:03:07 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 23 06:03:22 2008
Subject: [Harbour] 2008-10-23 12:00 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c934f6$Blat.v2.6.2$8c49a7aa$2686739cff2@127.0.0.1>

2008-10-23 12:00 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * make_vc.mak
  * contrib/mtpl_b32.mak
  * contrib/mtpl_vc.mak
    * "IF EXIST" -> "if exist" for consistency.
    * "-" echo supression char consistently changed to "@", 
      and added where it was missing (for 'if exist' commands).

  * make_vc.mak
    % Cleaned WinCE C options from unnecessary quotes.
    % Minor opt in .dll flag assembly.
    % Some commented options removed.
    * WinCE LDFLAGS uppercase to lowercase.
    % Minor opt in non-WinCE LDFLAGSDLL assembly.

  * source/rtl/gtwvt/gtwvt.c
    * Minor formatting.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 23 06:18:00 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 23 06:18:17 2008
Subject: [Harbour] 2008-10-23 12:17 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c934f8$Blat.v2.6.2$a05ef522$16786a3e87e0@127.0.0.1>

2008-10-23 12:17 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_vc.mak
    ! Changed '!' (non-working) echo supression char to '@'.

  * contrib/mtpl_b32.mak
  * contrib/mtpl_vc.mak
    % Changed to create the obj dir as a separate build rule 
      (just like for core) rather than for each file.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 23 06:24:46 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 23 06:25:01 2008
Subject: [Harbour] 2008-10-23 12:23 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c934f9$Blat.v2.6.2$925da422$1eb08e65116c@127.0.0.1>

2008-10-23 12:23 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/mtpl_vc.mak
    ! Fixed MSVC not rebuilding .prg files after changing them.
      Current solution is to simply delete the intermediate .c 
      file after C compiler returned. This also saves space, 
      so even if it's a hack, it might be good to add this 
      for other build paths.
--
Brgds,
Viktor

From joe_bernardes at yahoo.com.br  Thu Oct 23 08:17:11 2008
From: joe_bernardes at yahoo.com.br (Joel M Bernardes)
Date: Thu Oct 23 08:17:32 2008
Subject: [Harbour] Error compiler harbour in CentOS-5.2
Message-ID: <814837.28245.qm@web51906.mail.re2.yahoo.com>

Hello??? 
Does anybody know how to find out which package it lacks, what does cause the mistake below?

Thank's
Joel Bernardes

../../hbcurl.c: In function 'HB_FUN_CURL_EASY_SETOPT':
../../hbcurl.c:1071: error: 'CURLOPT_FTP_SSL_CCC' undeclared (first use in this function)
../../hbcurl.c:1071: error: (Each undeclared identifier is reported only once
../../hbcurl.c:1071: error: for each function it appears in.)
make[3]: *** [hbcurl.o] Error 1
make[2]: *** [descend] Error 2




      Novos endere?os, o Yahoo! que voc? conhece. Crie um email novo com a sua cara @ymail.com ou @rocketmail.com.
http://br.new.mail.yahoo.com/addresses
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081023/aa3c4a70/attachment.html
From eyelagui at hotmail.com  Thu Oct 23 08:18:05 2008
From: eyelagui at hotmail.com (eyelagui@hotmail.com)
Date: Thu Oct 23 08:18:13 2008
Subject: [Harbour] =?iso-8859-1?q?Respuesta_autom=E1tica?=
In-Reply-To: <814837.28245.qm@web51906.mail.re2.yahoo.com>
Message-ID: <BAY0-MC10-F1D06ED0C082D6928D1637C0280@phx.gbl>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081023/0de6d79b/attachment.html
From harbour.01 at syenar.hu  Thu Oct 23 08:27:04 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 23 08:27:35 2008
Subject: [Harbour] 2008-10-23 14:25 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9350a$Blat.v2.6.2$a829f77c$1d884dec3ab6@127.0.0.1>

2008-10-23 14:25 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbcurl/hbcurl.c
    ! Fixed compilation against libcurl 7.16.1.
    ; Untested.
--
Brgds,
Viktor

From cvc at oohg.org  Thu Oct 23 08:51:11 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Thu Oct 23 08:51:25 2008
Subject: [Harbour] Respuesta =?ISO-8859-1?Q?autom=E1tica?=
In-Reply-To: <BAY0-MC10-F1D06ED0C082D6928D1637C0280@phx.gbl>
References: <BAY0-MC10-F1D06ED0C082D6928D1637C0280@phx.gbl>
Message-ID: <4900733F.4020205@oohg.org>

eyelagui@hotmail.com escribi?:



This is an automatic response...

I think that an admin must be delete this account if the user will not use again.

regards
Ciro


-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From eyelagui at hotmail.com  Thu Oct 23 08:51:45 2008
From: eyelagui at hotmail.com (eyelagui@hotmail.com)
Date: Thu Oct 23 08:51:52 2008
Subject: [Harbour] =?iso-8859-1?q?Respuesta_autom=E1tica?=
In-Reply-To: <4900733F.4020205@oohg.org>
Message-ID: <BAY0-MC1-F124D3B0DFE6FDB4CDFB078C0280@phx.gbl>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081023/71c30653/attachment.html
From jose.luis at iaicom.com  Thu Oct 23 10:15:52 2008
From: jose.luis at iaicom.com (=?UTF-8?Q?Jos=C3=A9_Luis_Capel_?=)
Date: Thu Oct 23 10:12:34 2008
Subject: [Harbour] Using hashes
In-Reply-To: <20127792.post@talk.nabble.com>
References: <10C28C4554DFE54EB20321B9CB8931C21CF849@servidor01.AGSoft.local>
	<20127792.post@talk.nabble.com>
Message-ID: <002c01c93519$db935450$92b9fcf0$@luis@iaicom.com>

Petr,

Thanks for your answer.

JLC>>
JLC>>
JLC>> hMyHash:MyKey := 'SomeValue'
JLC>>
JLC>>
JLC>
JLC>Just rebuild Harbour with HB_HASH_MSG_ITEMS macro
JLC>C_USR=-DHB_HASH_MSG_ITEMS
JLC>

I'll rebuild Harbour libs using that flag.

Thanks and regards,
Jos? Luis Capel

From eyelagui at hotmail.com  Thu Oct 23 10:13:51 2008
From: eyelagui at hotmail.com (eyelagui@hotmail.com)
Date: Thu Oct 23 10:14:09 2008
Subject: [Harbour] =?iso-8859-1?q?Respuesta_autom=E1tica?=
In-Reply-To: <002c01c93519$db935450$92b9fcf0$@luis@iaicom.com>
Message-ID: <BAY0-MC9-F81FC31A886CA9030BAAE9C0280@phx.gbl>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081023/e1e037c9/attachment.html
From info at fsgiudice.com  Thu Oct 23 12:43:04 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Thu Oct 23 12:43:16 2008
Subject: [Harbour] Error compiler harbour in CentOS-5.2
In-Reply-To: <814837.28245.qm@web51906.mail.re2.yahoo.com>
References: <814837.28245.qm@web51906.mail.re2.yahoo.com>
Message-ID: <4900A998.7050100@fsgiudice.com>

Hi Joel,

Il 23/10/2008 14.17, Joel M Bernardes ha scritto:
> Hello   
> Does anybody know how to find out which package it lacks, what does 
> cause the mistake below?
> 
> Thank's
> Joel Bernardes
> 
> ../../hbcurl.c: In function 'HB_FUN_CURL_EASY_SETOPT':
> ../../hbcurl.c:1071: error: 'CURLOPT_FTP_SSL_CCC' undeclared (first use 
> in this function)
> ../../hbcurl.c:1071: error: (Each undeclared identifier is reported only 
> once
> ../../hbcurl.c:1071: error: for each function it appears in.)
> make[3]: *** [hbcurl.o] Error 1
> make[2]: *** [descend] Error 2
> 
the problem is related to CentOS and old curl lib not yet updated to 
last (harbour uses last version). So, to use hbcurl it is necessary to 
wait new release or compile manually it (I have tried without success).
In meanwhile you have to uninstall curl-devel lib (yum remove 
curl-devel) and harbour will complete build.

Best Regards

Francesco

From eyelagui at hotmail.com  Thu Oct 23 12:43:57 2008
From: eyelagui at hotmail.com (eyelagui@hotmail.com)
Date: Thu Oct 23 12:44:05 2008
Subject: [Harbour] =?iso-8859-1?q?Respuesta_autom=E1tica?=
In-Reply-To: <4900A998.7050100@fsgiudice.com>
Message-ID: <BAY0-MC8-F8227C2B2BC3CD1520C5C4C0280@phx.gbl>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081023/85354ac8/attachment.html
From mbelgrano at deltain.it  Thu Oct 23 13:07:47 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Oct 23 13:08:33 2008
Subject: [Harbour] 2008-10-22
	05:03UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081022182347.GA20493@34-mo7-2.acn.waw.pl>
References: <20081022175820.GA32561@34-mo7-2.acn.waw.pl><AFB948164110ED43B5EB849E8DEEF03815F0B7@SRV02.deltain.net>
	<20081022182347.GA20493@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0C0@SRV02.deltain.net>

Hbmk in prg is a very good idea for having same feature on all platform
I can suggest see an intresting open source product: BrMake who is sub-project  of https://sourceforge.net/projects/hrbtoolslibs/
BrMake is written in [x]harbour and will be driven by command line or project file 


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Wednesday, October 22, 2008 8:24 PM
To: Harbour Project Main Developer List.
Subject: Re: RE: RE: [Harbour] 2008-10-22 05:03UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)

On Wed, 22 Oct 2008, Massimo Belgrano wrote:
> Compile fine
> When run i receive open error test.dbf dos error 2

It's correct behavior. You need test.dbf file, f.e. from tests/
directory. Just copy it. Anyhow even error messages are good tests.
You should see ALERT() message in each GTWVT window.

> Now HBMK is aivable also for BCC?

It's .bat file with some limited functionality in comparison to
hbmk scripts which replaced bld*.bat files.
If I'll find spare time to make some cleanups in hbmk.prg then I'll
commit it to SVN. It should give similar to hb* script functionality
on platforms which does not support bourne shell. But it will have to
be updated for non-GCC based compilers. I added only BCC.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From vailtom at gmail.com  Thu Oct 23 13:17:33 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Thu Oct 23 13:17:42 2008
Subject: [Harbour] Harbour Web site - Preview #2
Message-ID: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>

Hi all!
Here is a preview updated to the website of the project. I worked in some
texts (with some difficulty) but I'm still adjusting a few details.

The status of the menu (and links) is currently:

home - incomplete (some texts need revision)

about
   about harbor -> need more text but it is ok.
   license -> text ok

Documentation -> incomplete

Downloads -> partial
   Binaries -> Link ok

Development -> Partial
   Bug / Issue Db -> Link ok
   Report Bug -> Link ok

News -> Partial
   Changelog -> Link ok

The Crew -> text ok

Harbor Art -> Incomplete

I await comments and suggestions, the link is:
http://harbour-project.org/preview2/index.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081023/0c631d97/attachment.html
From eyelagui at hotmail.com  Thu Oct 23 13:18:16 2008
From: eyelagui at hotmail.com (eyelagui@hotmail.com)
Date: Thu Oct 23 13:18:24 2008
Subject: [Harbour] =?iso-8859-1?q?Respuesta_autom=E1tica?=
In-Reply-To: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
Message-ID: <BAY0-MC11-F11090E24CED67E2005BC95C0280@phx.gbl>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081023/81a35fb6/attachment.html
From mbelgrano at deltain.it  Thu Oct 23 14:05:22 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Oct 23 14:06:09 2008
Subject: [Harbour] Harbour Web site - Preview #2
In-Reply-To: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
References: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0C1@SRV02.deltain.net>

Very compliment you have made a good works


From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Vailton Renato
Sent: Thursday, October 23, 2008 7:18 PM
To: Harbour@harbour-project.org
Subject: [Harbour] Harbour Web site - Preview #2

Hi all!

Here is a preview updated to the website of the project. I worked in some texts (with some difficulty) but I'm still adjusting a few details.?

The status of the menu (and links) is currently:?

home - incomplete (some texts need revision)?

about?
?? about harbor -> need more text but it is ok.?
?? license -> text ok?

Documentation -> incomplete?

Downloads -> partial?
?? Binaries -> Link ok?

Development -> Partial?
?? Bug / Issue Db -> Link ok?
?? Report Bug -> Link ok?

News -> Partial?
?? Changelog -> Link ok?

The Crew -> text ok?

Harbor Art -> Incomplete?

I await comments and suggestions, the link is: http://harbour-project.org/preview2/index.html
From mbelgrano at deltain.it  Thu Oct 23 14:08:03 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Oct 23 14:08:46 2008
Subject: =?iso-8859-1?Q?RE=3A_=5BHarbour=5D_Respuesta_autom=E1tica?=
In-Reply-To: <4900733F.4020205@oohg.org>
References: <BAY0-MC10-F1D06ED0C082D6928D1637C0280@phx.gbl>
	<4900733F.4020205@oohg.org>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0C2@SRV02.deltain.net>

Yes agree
Project Admins are : alkresin, ckedem, dholm, philb, rglab, vszakats

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Ciro Vargas Clemow
Sent: Thursday, October 23, 2008 2:51 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Respuesta autom?tica

eyelagui@hotmail.com escribi?:



This is an automatic response...

I think that an admin must be delete this account if the user will not use again.

regards
Ciro


-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From a.jurkiewicz at abix.info.pl  Thu Oct 23 15:13:13 2008
From: a.jurkiewicz at abix.info.pl (ABIX - Adam Jurkiewicz)
Date: Thu Oct 23 15:14:00 2008
Subject: [Harbour] Harbour Web site - Preview #2
In-Reply-To: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
References: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
Message-ID: <200810232113.13179.a.jurkiewicz@abix.info.pl>

Dnia czwartek, 23 pa?dziernika 2008, Vailton Renato napisa?:
> Hi all!
Cool !
But with link:
http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/harbour-project/harbour/ChangeLog?rev=HEAD&content-type=text/vnd.viewcvs-markup

An error has been encountered in accessing this page.

1. Server: cvs.sourceforge.net
2. URL path: /cgi-bin/viewcvs.cgi/harbour-project/harbour/ChangeLog
3. Error notes: NONE
4. Error type: 404
5. Request method: GET
6. Request query string: rev=HEAD&content-type=text/vnd.viewcvs-markup
7. Time: 2008-10-23 19:11:12 UTC (1224789072)

Best regards,
Adam

-- 
ABIX - Linuksowe Systemy Wspomagania Biznesu www.abix.info.pl
Gadu-Gadu: 302315
Skype: abix_adamj 
Wsparcie aplikacji: http://groups-beta.google.com/group/abix-rcsoft?hl=pl
From eyelagui at hotmail.com  Thu Oct 23 15:14:38 2008
From: eyelagui at hotmail.com (eyelagui@hotmail.com)
Date: Thu Oct 23 15:14:49 2008
Subject: [Harbour] =?iso-8859-1?q?Respuesta_autom=E1tica?=
In-Reply-To: <200810232113.13179.a.jurkiewicz@abix.info.pl>
Message-ID: <BAY0-MC5-F178B40BBFA9EFAE13068BDC0280@phx.gbl>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081023/e9e42166/attachment.html
From abe.buch at att.net  Thu Oct 23 15:19:03 2008
From: abe.buch at att.net (Abeb)
Date: Thu Oct 23 15:19:12 2008
Subject: [Harbour] wcecon not opening any window
Message-ID: <20137807.post@talk.nabble.com>


after compiling wecon for WINCE (wont run on XP) and trying to run it on
Pocketpc Emulater it looks like it starts running but noting happens. (no
errors , no msg). tried with -gtwvt and with out
any suggestions?
-- 
View this message in context: http://www.nabble.com/wcecon-not-opening-any-window-tp20137807p20137807.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From eyelagui at hotmail.com  Thu Oct 23 15:19:27 2008
From: eyelagui at hotmail.com (eyelagui@hotmail.com)
Date: Thu Oct 23 15:19:39 2008
Subject: [Harbour] =?iso-8859-1?q?Respuesta_autom=E1tica?=
In-Reply-To: <20137807.post@talk.nabble.com>
Message-ID: <BAY0-MC7-F37E208970180E11E13D37C0280@phx.gbl>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081023/62ace1da/attachment.html
From m.renzi at maticasrl.it  Thu Oct 23 16:57:14 2008
From: m.renzi at maticasrl.it (Massimo Renzi (Matica Srl))
Date: Thu Oct 23 16:57:20 2008
Subject: [Harbour] Harbour Web site - Preview #2
In-Reply-To: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
References: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
Message-ID: <4900E52A.1090806@maticasrl.it>

great!

Vailton Renato ha scritto:
> Hi all!
>
> Here is a preview updated to the website of the project. I worked in 
> some texts (with some difficulty) but I'm still adjusting a few details. 
>
> The status of the menu (and links) is currently: 
>
> home - incomplete (some texts need revision) 
>
> about 
>    about harbor -> need more text but it is ok. 
>    license -> text ok 
>
> Documentation -> incomplete 
>
> Downloads -> partial 
>    Binaries -> Link ok 
>
> Development -> Partial 
>    Bug / Issue Db -> Link ok 
>    Report Bug -> Link ok 
>
> News -> Partial 
>    Changelog -> Link ok 
>
> The Crew -> text ok 
>
> Harbor Art -> Incomplete 
>
> I await comments and suggestions, the link is: 
> http://harbour-project.org/preview2/index.html
> ------------------------------------------------------------------------
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>   

From eyelagui at hotmail.com  Thu Oct 23 16:57:36 2008
From: eyelagui at hotmail.com (eyelagui@hotmail.com)
Date: Thu Oct 23 16:57:46 2008
Subject: [Harbour] =?iso-8859-1?q?Respuesta_autom=E1tica?=
In-Reply-To: <4900E52A.1090806@maticasrl.it>
Message-ID: <BAY0-MC1-F10FE7B1050B0F943CA93E7C0280@phx.gbl>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081023/f5d8feeb/attachment.html
From harbour.01 at syenar.hu  Thu Oct 23 17:39:10 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 23 17:39:22 2008
Subject: [Harbour] Error compiler harbour in CentOS-5.2
In-Reply-To: <4900A998.7050100@fsgiudice.com>
References: <814837.28245.qm@web51906.mail.re2.yahoo.com>
	<4900A998.7050100@fsgiudice.com>
Message-ID: <D4204BF1-ABB4-44F0-B659-DEC19B465339@syenar.hu>

Hi Joel, Francesco,

Pls try with latest SVN, it should compile now fine.
I'd appreciate if your could report your results.

Brgds,
Viktor

On 2008.10.23., at 18:43, Francesco Saverio Giudice wrote:

> Hi Joel,
>
> Il 23/10/2008 14.17, Joel M Bernardes ha scritto:
>> Hello   Does anybody know how to find out which package it lacks,  
>> what does cause the mistake below?
>> Thank's
>> Joel Bernardes
>> ../../hbcurl.c: In function 'HB_FUN_CURL_EASY_SETOPT':
>> ../../hbcurl.c:1071: error: 'CURLOPT_FTP_SSL_CCC' undeclared (first  
>> use in this function)
>> ../../hbcurl.c:1071: error: (Each undeclared identifier is reported  
>> only once
>> ../../hbcurl.c:1071: error: for each function it appears in.)
>> make[3]: *** [hbcurl.o] Error 1
>> make[2]: *** [descend] Error 2
> the problem is related to CentOS and old curl lib not yet updated to  
> last (harbour uses last version). So, to use hbcurl it is necessary  
> to wait new release or compile manually it (I have tried without  
> success).
> In meanwhile you have to uninstall curl-devel lib (yum remove curl- 
> devel) and harbour will complete build.
>
> Best Regards
>
> Francesco
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Thu Oct 23 19:15:45 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Oct 23 19:16:33 2008
Subject: [Harbour] 2008-10-22
	05:03UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081022182347.GA20493@34-mo7-2.acn.waw.pl>
References: <20081022175820.GA32561@34-mo7-2.acn.waw.pl><AFB948164110ED43B5EB849E8DEEF03815F0B7@SRV02.deltain.net>
	<20081022182347.GA20493@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0C3@SRV02.deltain.net>

Very Thanks now all work fine

Is still correct follow  description of HB_GTRELOAD?
What happen with hb_gtreload in st MODE?
With relationship from hb_threadStart & hb_GTRELOAD '
Can you give me a simple sample of hb_gtreload in mt mode?

    + function HB_GTRELOAD( <cGtName> ) -> <lSuccess>
      This function allow to switch active GT driver at run time.
      It can be also used to simulate removed HB_NOSTARTUPWINDOW()
      functionality. F.e.:
         REQUEST HB_GT_WVT
         REQUEST HB_GT_NUL_DEFAULT
         proc main()
            // do some initializations...
            hb_gtReload( "WVT" )
            // rest of code...
         return
      Please remember that some GTs may refuse initialization due to
      missing required resources and instead of return FALSE they can
      interrupt program with internal error, just like at application
      startup so it's not guarantied that this function always returns
      HB_GTRELOAD in mt mode have support for optional 
      allocating independent console window by
      each thread. By default new thread inherits console Window from
      parent thread. But each thread can allocate its own console window
      by calling hb_gtReload( <cGtName> ) function, f.e. by:
         hb_gtReload( hb_gtVersion() )
      If GT driver supports such functionality then new it will allocate
      new console windows.
      Each console window has reference counter which is increased when
      new thread starts and decreased when hb_gtReload() is executed or
      thread terminates. When counter reach zero give console window is
      destroyed.


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Wednesday, October 22, 2008 8:24 PM
To: Harbour Project Main Developer List.
Subject: Re: RE: RE: [Harbour] 2008-10-22 05:03UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)

On Wed, 22 Oct 2008, Massimo Belgrano wrote:
> Compile fine
> When run i receive open error test.dbf dos error 2

It's correct behavior. You need test.dbf file, f.e. from tests/
directory. Just copy it. Anyhow even error messages are good tests.
You should see ALERT() message in each GTWVT window.

> Now HBMK is aivable also for BCC?

It's .bat file with some limited functionality in comparison to
hbmk scripts which replaced bld*.bat files.
If I'll find spare time to make some cleanups in hbmk.prg then I'll
commit it to SVN. It should give similar to hb* script functionality
on platforms which does not support bourne shell. But it will have to
be updated for non-GCC based compilers. I added only BCC.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From philb at philb.us  Thu Oct 23 22:04:52 2008
From: philb at philb.us (Phil Barnett)
Date: Thu Oct 23 22:04:57 2008
Subject: [Harbour] Respuesta =?utf-8?q?autom=C3=A1tica?=
In-Reply-To: <BAY0-MC10-F18F080A2FBE4A93742152CC0290@phx.gbl>
References: <BAY0-MC10-F18F080A2FBE4A93742152CC0290@phx.gbl>
Message-ID: <200810232204.52702.philb@philb.us>

On Wednesday 22 October 2008 11:42:43 am eyelagui@hotmail.com wrote:

> Hotmail stinks.

Banished. No longer a member of this list as of now.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From philb at philb.us  Thu Oct 23 22:12:25 2008
From: philb at philb.us (Phil Barnett)
Date: Thu Oct 23 22:12:36 2008
Subject: [Harbour] Harbour Web site - Preview #2
In-Reply-To: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
References: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
Message-ID: <200810232212.26147.philb@philb.us>

On Thursday 23 October 2008 01:17:33 pm Vailton Renato wrote:

> http://harbour-project.org/preview2/index.html

This really looks very nice. Thank you for all the hard work.

The old site is so much out of date, I believe we can switch over to this 
format any time you like and we will fill in the missing pieces over time.

Any other opinions?

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From harbour.01 at syenar.hu  Thu Oct 23 23:46:06 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 23 23:46:13 2008
Subject: [Harbour] Harbour Web site - Preview #2
In-Reply-To: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
References: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
Message-ID: <C5C93C19-4574-4481-8508-F9A3C2AFAA63@syenar.hu>

Hi Renato,

Very nice job, I think we just may switch to
your version anytime now and fix the smaller
stuff live. (if others agree)

Just a small observation: Now we also have
.bz2 as a source download, and also a nightly
binary for Linux, you can find the links and
text on the current page. As a minor change,
I'd suggest to change the extensions to lowercase.

Brgds,
Viktor

On 2008.10.23., at 19:17, Vailton Renato wrote:

> Hi all!
>
> Here is a preview updated to the website of the project. I worked in  
> some texts (with some difficulty) but I'm still adjusting a few  
> details.
>
> The status of the menu (and links) is currently:
>
> home - incomplete (some texts need revision)
>
> about
>    about harbor -> need more text but it is ok.
>    license -> text ok
>
> Documentation -> incomplete
>
> Downloads -> partial
>    Binaries -> Link ok
>
> Development -> Partial
>    Bug / Issue Db -> Link ok
>    Report Bug -> Link ok
>
> News -> Partial
>    Changelog -> Link ok
>
> The Crew -> text ok
>
> Harbor Art -> Incomplete
>
> I await comments and suggestions, the link is: http://harbour-project.org/preview2/index.html
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Oct 24 00:37:41 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 24 00:37:48 2008
Subject: =?ISO-8859-1?Q?Re:_[Harbour]_Respuesta_autom=E1tica?=
In-Reply-To: <200810232204.52702.philb@philb.us>
References: <BAY0-MC10-F18F080A2FBE4A93742152CC0290@phx.gbl>
	<200810232204.52702.philb@philb.us>
Message-ID: <67D7DA5D-4402-44F1-B3E5-56CB007D63DB@syenar.hu>

Thanks Phil.

Brgds,
Viktor

On 2008.10.24., at 4:04, Phil Barnett wrote:

> On Wednesday 22 October 2008 11:42:43 am eyelagui@hotmail.com wrote:
>
>> Hotmail stinks.
>
> Banished. No longer a member of this list as of now.
>
> --  
> "Ninety percent of politicians give the other 10 percent a bad  
> name." -- Henry
> Kissinger
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From M.Horodyski at pzuzycie.com.pl  Fri Oct 24 03:03:09 2008
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri Oct 24 03:03:19 2008
Subject: [Harbour] RE: Harbour Digest, Vol 24, Issue 104
In-Reply-To: <NLB01FE3OJXsNQptgFr00006f88@gatein.pzuzycie.com.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C95017DEAEA@PINK.zycie.pzu>

>Date: Thu, 23 Oct 2008 19:07:47 +0200
>From: "Massimo Belgrano" <mbelgrano@deltain.it>
>Subject: RE: RE: RE: [Harbour] 2008-10-22

[...]

>BrMake who is sub-project  of 
>https://sourceforge.net/projects/hrbtoolslibs/
>BrMake is written in [x]harbour and will be driven by command 
>line or project file 

And what you tell about Phil's PBMake ?
http://www.the-oasis.net/

Regards,
Marek Horodyski
From e.m.giordano at emagsoftware.it  Fri Oct 24 03:12:30 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Oct 24 03:12:35 2008
Subject: =?utf-8?Q?Re:_=5BHarbour=5D_Respuesta_autom=C3=A1ti?= =?utf-8?Q?ca?=
References: <BAY0-MC10-F18F080A2FBE4A93742152CC0290@phx.gbl>
	<200810232204.52702.philb@philb.us>
Message-ID: <E19D596D6F4847389E32CC348EE508A4@emag>


-----Messaggio Originale----- 
Da: "Phil Barnett" <philb@philb.us>
A: <harbour@harbour-project.org>
Data invio: venerd? 24 ottobre 2008 4.04
Oggetto: Re: [Harbour] Respuesta autom?tica


> > Hotmail stinks.
>
> Banished. No longer a member of this list as of now.

Thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Fri Oct 24 03:12:58 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Oct 24 03:13:03 2008
Subject: [Harbour] Harbour Web site - Preview #2
References: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
	<200810232212.26147.philb@philb.us>
Message-ID: <3A82115CFAE5404FA31923AE4D8B3DA4@emag>


-----Messaggio Originale----- 
Da: "Phil Barnett" <philb@philb.us>
A: <harbour@harbour-project.org>
Data invio: venerd? 24 ottobre 2008 4.12
Oggetto: Re: [Harbour] Harbour Web site - Preview #2


> > http://harbour-project.org/preview2/index.html
>
> This really looks very nice. Thank you for all the hard work.
>
> The old site is so much out of date, I believe we can switch over to this
> format any time you like and we will fill in the missing pieces over time.
>
> Any other opinions?

+1

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Fri Oct 24 03:24:23 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 24 03:24:32 2008
Subject: [Harbour] 2008-10-24 09:23 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c935a9$Blat.v2.6.2$89ce300a$9148170e7f4@127.0.0.1>

2008-10-24 09:23 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/xhb/hbcompat.ch
    + Added a few MT related translations.
    * Some cleanup.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Oct 24 03:53:50 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 24 03:53:57 2008
Subject: =?ISO-8859-1?Q?Re:_[Harbour]_Respuesta_autom=E1tica?=
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F0C2@SRV02.deltain.net>
References: <BAY0-MC10-F1D06ED0C082D6928D1637C0280@phx.gbl>
	<4900733F.4020205@oohg.org>
	<AFB948164110ED43B5EB849E8DEEF03815F0C2@SRV02.deltain.net>
Message-ID: <72CACC4F-66D9-4403-B239-CA1D15F7AD87@syenar.hu>

> Project Admins are : alkresin, ckedem, dholm, philb, rglab, vszakats

Notice this has nothing to do with our mailing list.

Brgds,
Viktor

From budyanto at centrin.net.id  Fri Oct 24 04:02:31 2008
From: budyanto at centrin.net.id (Budyanto Dj.)
Date: Fri Oct 24 04:02:47 2008
Subject: [Harbour] Harbour Web site - Preview #2
In-Reply-To: <200810232212.26147.philb@philb.us>
References: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
Message-ID: <4901E387.22535.69109D3@localhost>

On 23 Oct 2008 at 22:12, Phil Barnett wrote:
> Any other opinions?

IMHO "32/64 Bit xBase Compiler" is more appropriate than "32/64 Bit xBase compatible 
Compiler".

regards,
budyanto

From mbelgrano at deltain.it  Fri Oct 24 04:12:50 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Oct 24 04:13:30 2008
Subject: R: [Harbour] RE: Harbour Digest, Vol 24, Issue 104
Message-ID: <000001c935b0$6327dd7b$0400a8c0@deltain.net>

Good but notbopen source

----- Messaggio originale -----
Da: Horodyski Marek (PZUZ) <M.Horodyski@pzuzycie.com.pl>
Inviato: venerd? 24 ottobre 2008 9.03
A: harbour@harbour-project.org <harbour@harbour-project.org>
Oggetto: [Harbour] RE: Harbour Digest, Vol 24, Issue 104

>Date: Thu, 23 Oct 2008 19:07:47 +0200
>From: "Massimo Belgrano" <mbelgrano@deltain.it>
>Subject: RE: RE: RE: [Harbour] 2008-10-22

[...]

>BrMake who is sub-project  of 
>https://sourceforge.net/projects/hrbtoolslibs/
>BrMake is written in [x]harbour and will be driven by command 
>line or project file 

And what you tell about Phil's PBMake ?
http://www.the-oasis.net/

Regards,
Marek Horodyski
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Fri Oct 24 04:16:11 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 24 04:16:19 2008
Subject: [Harbour] Harbour Web site - Preview #2
In-Reply-To: <4901E387.22535.69109D3@localhost>
References: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
	<4901E387.22535.69109D3@localhost>
Message-ID: <269B410D-70AB-4A74-A6BC-082BC7D5F8AB@syenar.hu>

+1

On 2008.10.24., at 10:02, Budyanto Dj. wrote:

> On 23 Oct 2008 at 22:12, Phil Barnett wrote:
>> Any other opinions?
>
> IMHO "32/64 Bit xBase Compiler" is more appropriate than "32/64 Bit  
> xBase compatible
> Compiler".
>
> regards,
> budyanto
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Fri Oct 24 04:24:12 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Oct 24 04:24:50 2008
Subject: R: Re: [Harbour] Harbour Web site - Preview #2
Message-ID: <000101c935b1$f99e267b$0400a8c0@deltain.net>

+2

----- Messaggio originale -----
Da: Szak?ts Viktor <harbour.01@syenar.hu>
Inviato: venerd? 24 ottobre 2008 10.16
A: Harbour Project Main Developer List. <harbour@harbour-project.org>
Oggetto: Re: [Harbour] Harbour Web site - Preview #2

+1

On 2008.10.24., at 10:02, Budyanto Dj. wrote:

> On 23 Oct 2008 at 22:12, Phil Barnett wrote:
>> Any other opinions?
>
> IMHO "32/64 Bit xBase Compiler" is more appropriate than "32/64 Bit  
> xBase compatible
> Compiler".
>
> regards,
> budyanto
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Fri Oct 24 04:48:49 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 24 04:49:00 2008
Subject: [Harbour] 2008-10-24 10:48 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c935b5$Blat.v2.6.2$55712180$2a8762623a4@127.0.0.1>

2008-10-24 10:48 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/vm/arrayshb.c
    % Removed unnecessary pcount() calls.
--
Brgds,
Viktor

From hbco2 at sbcglobal.net  Fri Oct 24 04:52:47 2008
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Fri Oct 24 04:52:30 2008
Subject: [Harbour] 2008-10-22 05:03
	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081022182347.GA20493@34-mo7-2.acn.waw.pl>
References: <20081022175820.GA32561@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F0B7@SRV02.deltain.net>
	<20081022182347.GA20493@34-mo7-2.acn.waw.pl>
Message-ID: <1224838367.3841.12.camel@hblx.340cst>


On Wed, 2008-10-22 at 20:23 +0200, Przemyslaw Czerpak wrote:

> 
> > Now HBMK is aivable also for BCC?
> 
> It's .bat file with some limited functionality in comparison to
> hbmk scripts which replaced bld*.bat files.
> If I'll find spare time to make some cleanups in hbmk.prg then I'll
> commit it to SVN. It should give similar to hb* script functionality
> on platforms which does not support bourne shell. But it will have to
> be updated for non-GCC based compilers. I added only BCC.
> 
> best regards,
> Przemek

Foolish me, I was experimenting and erased hbmk for gcc.  I have since
downloaded and recompiled a fresh svn image of harbour, and have found
various hbmk versions, except the one for gcc.  Am running SuSE 10.3.

How can I regenerate the file, or is there another URL to download the
code?  howtomak.txt suggests hbmk should be created along with other
harbour utilities.  I am compiling using make_gcc.sh.

Thank you, and of course thank you all for the effort of creating
harbour!

Bill


From lorenzo.fiorini at gmail.com  Fri Oct 24 05:14:20 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Oct 24 05:14:23 2008
Subject: [Harbour] 2008-10-22 05:03
	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <1224838367.3841.12.camel@hblx.340cst>
References: <20081022175820.GA32561@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F0B7@SRV02.deltain.net>
	<20081022182347.GA20493@34-mo7-2.acn.waw.pl>
	<1224838367.3841.12.camel@hblx.340cst>
Message-ID: <9257026e0810240214o6c2971fetb7dbc0bcde883742@mail.gmail.com>

On Fri, Oct 24, 2008 at 10:52 AM, Bill Smith <hbco2@sbcglobal.net> wrote:

> How can I regenerate the file, or is there another URL to download the
> code?  howtomak.txt suggests hbmk should be created along with other
> harbour utilities.  I am compiling using make_gcc.sh.

Under *nix envs like Linux, OS X, Win msys/mingw hb* scripts are created by
make_gnu.sh install.

best regards,
Lorenzo
From druzus at acn.waw.pl  Fri Oct 24 05:17:54 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 24 05:17:44 2008
Subject: [Harbour] 2008-10-22 05:03
	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <1224838367.3841.12.camel@hblx.340cst>
References: <20081022175820.GA32561@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F0B7@SRV02.deltain.net>
	<20081022182347.GA20493@34-mo7-2.acn.waw.pl>
	<1224838367.3841.12.camel@hblx.340cst>
Message-ID: <20081024091754.GA4290@34-mo7-2.acn.waw.pl>

On Fri, 24 Oct 2008, Bill Smith wrote:

Hi Bill,

> How can I regenerate the file, or is there another URL to download the
> code?  howtomak.txt suggests hbmk should be created along with other
> harbour utilities.  I am compiling using make_gcc.sh.

It's created in INSTALL phase.
   ./make_gcc.sh install

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Oct 24 05:23:08 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Oct 24 05:23:12 2008
Subject: [Harbour] 2008-10-22 05:03
	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081024091754.GA4290@34-mo7-2.acn.waw.pl>
References: <20081022175820.GA32561@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F0B7@SRV02.deltain.net>
	<20081022182347.GA20493@34-mo7-2.acn.waw.pl>
	<1224838367.3841.12.camel@hblx.340cst>
	<20081024091754.GA4290@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0810240223v682590a2nd6ed6763f5872638@mail.gmail.com>

On Fri, Oct 24, 2008 at 11:17 AM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> It's created in INSTALL phase.
>   ./make_gcc.sh install

What is the difference between make_gnu.sh and make_gcc.sh?

I've always used make_gnu.sh under Lin, Win, OS X.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Fri Oct 24 05:31:21 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 24 05:31:29 2008
Subject: [Harbour] 2008-10-22 05:03
	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0810240223v682590a2nd6ed6763f5872638@mail.gmail.com>
References: <20081022175820.GA32561@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F0B7@SRV02.deltain.net>
	<20081022182347.GA20493@34-mo7-2.acn.waw.pl>
	<1224838367.3841.12.camel@hblx.340cst>
	<20081024091754.GA4290@34-mo7-2.acn.waw.pl>
	<9257026e0810240223v682590a2nd6ed6763f5872638@mail.gmail.com>
Message-ID: <0BEAF20D-9FA7-49EC-836A-793500B59212@syenar.hu>

make_gcc.sh uses GNU-make, but it's using
the "non-GNU" make files to do the job (common.mak).
Because of this, it's much simpler and
self-contained (needs only one .mak file
and common.mak). It's functionally equivalent
to make_b32/make_vc world.

Actually it may be a good idea to add hbmk
script creation to it.

I'm not sure what it would take to make it
equivalent in other respects to our legacy
GNU-make system, but if this could be done,
we may drop the overcomplicated legacy one.

Having one set of make systems still looks
like a very good idea.

Brgds,
Viktor

On 2008.10.24., at 11:23, Lorenzo Fiorini wrote:

> On Fri, Oct 24, 2008 at 11:17 AM, Przemyslaw Czerpak <druzus@acn.waw.pl 
> > wrote:
>
>> It's created in INSTALL phase.
>>  ./make_gcc.sh install
>
> What is the difference between make_gnu.sh and make_gcc.sh?
>
> I've always used make_gnu.sh under Lin, Win, OS X.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Fri Oct 24 05:54:39 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Oct 24 05:55:22 2008
Subject: [Harbour] Xbase++  go to visual fox pro
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0C5@SRV02.deltain.net>

This is from xbase ng
In intresting see xbase++ path 

Massimo,

 to cover your FoxPro question. Well the following is true.

 1.) We always have ensured that the FOXDBE and CDXDBE
 stay compatible with FoxPro and/or Visual FoxPro, with 1.9 we
 specifically have added the latest additions in means of datatypes to
 these DBEs. So the data-layer in means of tables and indexes shouldn't
 be a question.

 2.) We added new datatypes to the Xbase++ language such as datetime and
 interval. They are compatible with the VFP Timestamp type. All VFP
specific
 settings and operator  behaviour of these datatypes has been added to
the 
language
 and runtime this includes compiler support for the literals too.

 3.) We also added a /fox switch to the Xbase++ compiler to accept
 the "." instead of the ":" in terms of OO syntax to make compilation of
 VFP code easier.

 4.) With UniversalSQL we are providing SQL for all DBEs which must
 be seen as the next evolutionary step of the way how VFP has supported
SQL
 for the DBF tables. In addition our goal here is to beat VFP in terms
of
 performance - which is not easy but we are right now at a very good
track
 to reach that point.

 4.) Roger Donnay is currently working on a FoxPro compatible command
 layer.

 Please keep in mind that #2 and #3 are work done for the 2.0 release
and
 we haven't decided yet if we will make that available earlier in some
type
 of preview or even specific product release. This will depend on the 
customer
 demand.

 Anyway, the previous outlined issues are what we have indentified as
the
 most important aspects in terms of the language. There are other areas
 as I already outlined - namely visual design related and dictionary
related
 but those issues we want to cover with VX 2.0 anyway.

 Hope this helps and gives you an idea. The funny thing is that out
almost
 all of these news technologies and features current Xbase++ developers
 can draw an productivity benefit too - of course that was a part of our
 decision process.

 with best regards
 Steffen F. Pirsig
 Alaska Software

Massimo,

  as we always have stated. Afer the release of SL1 we will make the
  different areas of the Arctica project available as a technology
preview
  to active subscription customers. The order of technology previews is
  as following:

  1.) PostgreSQL DBF/NTX/CDX emulation engine and migration
       wizard for existing dbf applications
  2.) PassThroughSQL for PostgreSQL and ADS DatabaseEngine
  3.) UnivesalSQL for all DBE (DBF/NTX/CDX/DEL/SDF...) plus
    arrays and objects.
  4.) XSP - Stored Procedures in Xbase++ for the PostgreSQL server.

  FWIW: the SL1 release has been slipped by around 2-3 months due to
  changes and enhancements we made to the OO Engine of Xbase++ and
  to the compiler/Language.

  Hope this helps,
  with best regards
  Steffen F. Pirsig
  Alaska Software


"Massimo" <mbelgranoRIMUOVI@deltain.com> wrote in message 
news:12ab14ac$5293f0fb$79a@news.alaska-software.com...
> Hello Steffen
> when Arctica technologies of Xbase++ will be aivable?
> is planed a more compatibility of xbase++ with foxpro?
>
> i suggest you two little thing:
> for ide a partnership with http://www.vfpstudio.com/   ,
>
http://www.sweetpotatosoftware.com/SPSBlog/PermaLink,guid,b71ea97e-8fb8-
4401-ace4-b5a536fe0a37.aspx
> Having an ide with all visual studio capability is good for
productivity
> for web developement with 
>
http://www.sweetpotatosoftware.com/SPSBlog/PermaLink,guid,b71ea97e-8fb8-
4401-ace4-b5a536fe0a37.aspx
> Having api for port win32 to web is good for modernity
>
>
> Best regards
> Massimo Belgrano
>
>
> "Steffen F. Pirsig" ha scritto nel messaggio 
> news:3355c80e$65dbf720$17a@news.alaska-software.com...
>> Jimmy,
>>
>> just run into your post. To cover your question from the subject,
Alaska 
>> Software
>> is not switching to FoxPro. As Cliff already outlined the
FoxPro/Visual 
>> FoxPro
>> product line has been stopped, IAW there will be no future FoxPro 
>> version. So
>> our current plan is to get in touch with the VFP community,  show
them 
>> Xbase++,
>> explain them from a technical standpoint where we are and where
>> we want to go... These are our goals at the forthcoming VFP
conference.
>>
>> I personally think it is an opportunity for FoxPro developers,
existing 
>> Xbase++
>> customers and for Alaska Software as a company because:
>>
>> a.) FoxPro developers don't need to change their language, they can
still
>> use xBase, but in addition they can go with real classes and objects
and
>> intelligent multithreading. In general Xbase++ is from a language and
>> runtime point of view light years ahead of VFP.
>>
>> b.) VFP leaded the market in terms of easy database modelling,
reporting
>> and form designers with an integrated dictionary- all delivered in a 
>> single package
>> for many years. Xbase++ lacks features such as these,. by adapting 
>> features
>> from VFP and incorporating them into the next major release of
Xbase++, 
>> existing
>> Xbase++ customers  benefit from the experience of the VFP community
in 
>> that area.
>>
>> c.) Please have a look at this book 
>> http://www.hentzenwerke.com/catalog/autofox.htm,
>> it is about MS Office Automation with FoxPro, you can use most if no
all 
>> of the content
>> of this book in the context of Xbase++. Alaska Software contracted
1.5 
>> years ago somebody
>> to do the adaption of the book - of course with the knolwedge of the 
>> copyright owner -
>> unfortunately this project didn't succeed for whatever reason - the
point 
>> here is that
>> the Xbase++ community can benefit from books and content written for
VFP. 
>> In turn
>> the VFP community can benefit from features Xbase++ has as of today.
>>
>> d.) With the Arctica technologies Xbase++ not only provides a better
SQL 
>> integration
>> compared to VFP, Alaska Software also provides a more than an
alternative 
>> solution to
>> the VFP <-> MS SQL Server combo.
>>
>> Just a couple of thoughts on that subject.
>> with best regards
>> Steffen F. Pirsig
>> Alaska Software Inc.
>>
>>
>> "AUGE_OHR" <AUGE_OHR*AT*WEB.DE> wrote in message 
>> news:c7706b8$3795f65e$442@news.alaska-software.com...
>>> hi,
>>>
>>> http://devcon.dfpug.de/  ( look at Speaker )
>>>
>>>
http://portal.dfpug.de/dfpug/Dokumente/Konferenzen/Konferenzprogramm2008
/Konferenzflyer2008.pdf
>>>
>>> greetings by OHR
>>> Jimmy
>>>
>>
>>
>
Massimo Belgrano

From druzus at acn.waw.pl  Fri Oct 24 06:00:48 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 24 06:00:35 2008
Subject: [Harbour] 2008-10-24 12:00 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081024100048.GA15337@34-mo7-2.acn.waw.pl>

2008-10-24 12:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtxwc/gtxwc.c
    * added hack for problems with some XLIB versions in heavy stress
      MT tests

  * harbour/include/hbapigt.h
  * harbour/source/vm/thread.c
    * added parameter to hb_gtAlloc() C function

  * harbour/include/hbapigt.h
  * harbour/source/rtl/hbgtcore.c
    + added hb_gtCreate() and hb_gtSwap() C functions
    + added new .prg functions:
         HB_GTCREATE( <cGtName> ) -> <pGT>
         HB_GTSELECT( <pGT> ) -> <pPrevGT>
      Using this functions is possible to create many console window
      if GT supports such possibilities (f.e. GTXWC or GTWVT) even in
      single thread programs and switch between them.

  * harbour/source/rtl/box.c
    ! fixed one of recent DISPBOX() modifications - it should use:
      hb_gtBoxEx() instead of hb_gtDrawBox() to set cursor position.

  + harbour/tests/gtwin.prg
    + added demonstration/test code for using more then one console window
      also in single thread programs.

best regards
Przemek
From toninhofwi at yahoo.com.br  Fri Oct 24 07:11:20 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Fri Oct 24 06:09:07 2008
Subject: [Harbour] Harbour Web site - Preview #2
In-Reply-To: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
References: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
Message-ID: <o6b3g41qpf5auifdsnjlu81hlmbi4hgd3q@4ax.com>

Hi Renato, nice job, congrats.


>The Crew -> text ok

Is Crew list the same as HARBOUR.EXE /credits ?   If yes it is
incomplete.

Thank you and best regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From vailtom at gmail.com  Fri Oct 24 06:15:19 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Fri Oct 24 06:15:26 2008
Subject: [Harbour] Harbour Web site - Preview #2
In-Reply-To: <C5C93C19-4574-4481-8508-F9A3C2AFAA63@syenar.hu>
References: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
	<C5C93C19-4574-4481-8508-F9A3C2AFAA63@syenar.hu>
Message-ID: <531d7a750810240315p406700c6na6dadfd619e16aa1@mail.gmail.com>

I am happy that this work is good! I suggest only then do the following: I
will finish the remainder of the text and the pages in another week of work
(approximately) and then i'm able to deliver all layouts and sketches of
texts ready (already with the appropriate adjustments and Suggestions
included) ... What do you think?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081024/14134439/attachment.html
From harbour.01 at syenar.hu  Fri Oct 24 06:15:49 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 24 06:15:57 2008
Subject: [Harbour] 2008-10-24 12:00 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081024100048.GA15337@34-mo7-2.acn.waw.pl>
References: <20081024100048.GA15337@34-mo7-2.acn.waw.pl>
Message-ID: <31B8DF39-3F1D-417F-9C22-B4A5BB7E511E@syenar.hu>

Hi Przemek,

Many thanks, this way it looks possible to simply
implement windowing using separate native window
instances for these GTs.

Do you think it's possible to implement passing
dimension parameters to the newly created GT?

Or, it may be even better if the program would resize
it after being created. The only current problem
with this is flicker.

Brgds,
Viktor

On 2008.10.24., at 12:00, Przemyslaw Czerpak wrote:

> 2008-10-24 12:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/rtl/gtxwc/gtxwc.c
>    * added hack for problems with some XLIB versions in heavy stress
>      MT tests
>
>  * harbour/include/hbapigt.h
>  * harbour/source/vm/thread.c
>    * added parameter to hb_gtAlloc() C function
>
>  * harbour/include/hbapigt.h
>  * harbour/source/rtl/hbgtcore.c
>    + added hb_gtCreate() and hb_gtSwap() C functions
>    + added new .prg functions:
>         HB_GTCREATE( <cGtName> ) -> <pGT>
>         HB_GTSELECT( <pGT> ) -> <pPrevGT>
>      Using this functions is possible to create many console window
>      if GT supports such possibilities (f.e. GTXWC or GTWVT) even in
>      single thread programs and switch between them.
>
>  * harbour/source/rtl/box.c
>    ! fixed one of recent DISPBOX() modifications - it should use:
>      hb_gtBoxEx() instead of hb_gtDrawBox() to set cursor position.
>
>  + harbour/tests/gtwin.prg
>    + added demonstration/test code for using more then one console  
> window
>      also in single thread programs.
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vailtom at gmail.com  Fri Oct 24 06:20:27 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Fri Oct 24 06:20:30 2008
Subject: [Harbour] Harbour Web site - Preview #2
In-Reply-To: <o6b3g41qpf5auifdsnjlu81hlmbi4hgd3q@4ax.com>
References: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
	<o6b3g41qpf5auifdsnjlu81hlmbi4hgd3q@4ax.com>
Message-ID: <531d7a750810240320jcb0e602h5c060a9842758aa1@mail.gmail.com>

Hi Toninho!

Viktor had commented in a previous email that the link with the
updated list of names should be based on:
http://www.harbour-project.org/crew.htm

This new page has been updated with data contained in this URL.
;-)


> Hi Renato,
> You can find the crew page here:
> http://harbour-project.org/crew.htm> Brgds,
 <http://harbour-project.org/crew.htm>> Viktor
> On 2008.10.05., at 19:30, Vailton Renato wrote:
>* Hi Viktor, *

>**>* Okay, you have the updated list of the crew? Or where can i find this?*>* Vailton Renato*>* _______________________________________________*>* Harbour mailing list*>* Harbour at harbour-project.org <http://lists.harbour-project.org/mailman/listinfo/harbour>*>* http://lists.harbour-project.org/mailman/listinfo/harbour*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081024/75973100/attachment.html
From harbour.01 at syenar.hu  Fri Oct 24 06:22:00 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 24 06:22:07 2008
Subject: [Harbour] Harbour Web site - Preview #2
In-Reply-To: <531d7a750810240315p406700c6na6dadfd619e16aa1@mail.gmail.com>
References: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
	<C5C93C19-4574-4481-8508-F9A3C2AFAA63@syenar.hu>
	<531d7a750810240315p406700c6na6dadfd619e16aa1@mail.gmail.com>
Message-ID: <590A57B4-991A-4710-852C-D01214FB60F2@syenar.hu>

Hi Renato,

I think it's perfect.

Brgds,
Viktor

On 2008.10.24., at 12:15, Vailton Renato wrote:

> I am happy that this work is good! I suggest only then do the  
> following: I will finish the remainder of the text and the pages in  
> another week of work (approximately) and then i'm able to deliver  
> all layouts and sketches of texts ready (already with the  
> appropriate adjustments and Suggestions included) ... What do you  
> think?
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Oct 24 06:24:10 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 24 06:24:17 2008
Subject: [Harbour] Harbour Web site - Preview #2
In-Reply-To: <o6b3g41qpf5auifdsnjlu81hlmbi4hgd3q@4ax.com>
References: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
	<o6b3g41qpf5auifdsnjlu81hlmbi4hgd3q@4ax.com>
Message-ID: <7CEB4F65-72C5-4739-8AB1-904F491BF6D2@syenar.hu>

It's not. For a number of reasons.

If someone wants to appear on the crew list page,
he has to ask for it along with some personal details
(e-mail, membership description, country, photo) to
put there along the name, and someone would need to
update the page with these data.

This can be changed in any ways if the group decides
to do so, but we should always be aware that this
is personal data made public on the web.

Brgds,
Viktor

On 2008.10.24., at 13:11, Toninho@fwi wrote:

> Hi Renato, nice job, congrats.
>
>
>> The Crew -> text ok
>
> Is Crew list the same as HARBOUR.EXE /credits ?   If yes it is
> incomplete.
>
> Thank you and best regards,
>
> Toninho.
>
> __________________________________________________
> Fa?a liga??es para outros computadores com o novo Yahoo! Messenger
> http://br.beta.messenger.yahoo.com/
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Oct 24 06:26:46 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 24 06:26:55 2008
Subject: [Harbour] 2008-10-24 12:26 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c935c3$Blat.v2.6.2$04551730$18e0f4d1bb40@127.0.0.1>

2008-10-24 12:26 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbextern.ch
    + Added recent .prg level functions.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Oct 24 06:31:10 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 24 06:31:18 2008
Subject: [Harbour] hb_ADel()/hb_AIns()
Message-ID: <256E8067-0259-4C88-A477-4E857588A05B@syenar.hu>

Hi all,

I'd like to propose to change hb_ADel()/hb_AIns()
to drop the last logical parameter and always act
in the "extended" way. After all, the name itself
already says it clearly that these are extended
ones, and it looks unnecessarily cumbersome to
use an additional .T. parameter to exploit the
only point of these functions.

This is a slightly incompatible change, but since
these new functions, IMO it's not too late to
change them. (this problem can be solved with
some #translates)

If there are no objections/concerns, I'd like to
do this.

Brgds,
Viktor

From vailtom at gmail.com  Fri Oct 24 06:31:46 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Fri Oct 24 06:31:49 2008
Subject: [Harbour] Harbour Web site - Preview #2
In-Reply-To: <590A57B4-991A-4710-852C-D01214FB60F2@syenar.hu>
References: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
	<C5C93C19-4574-4481-8508-F9A3C2AFAA63@syenar.hu>
	<531d7a750810240315p406700c6na6dadfd619e16aa1@mail.gmail.com>
	<590A57B4-991A-4710-852C-D01214FB60F2@syenar.hu>
Message-ID: <531d7a750810240331m8690518s57ceaa534a3c4743@mail.gmail.com>

Ok I will be working in this way. I am aware of the criticisms and
suggestions to improve the work and how am I doing this work personally in
another week will be complete. For those who want to monitor the changes can
visit the URL of the preview #1 to compare the changes made:
http://www.harbour-project.org/preview1/
http://www.harbour-project.org/preview2/

2008/10/24 Szak?ts Viktor <harbour.01@syenar.hu>

> Hi Renato,
>
> I think it's perfect.
>
> Brgds,
> Viktor
>
> On 2008.10.24., at 12:15, Vailton Renato wrote:
>
>  I am happy that this work is good! I suggest only then do the following: I
>> will finish the remainder of the text and the pages in another week of work
>> (approximately) and then i'm able to deliver all layouts and sketches of
>> texts ready (already with the appropriate adjustments and Suggestions
>> included) ... What do you think?
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Vailton Renato
SQL LIB, MyMake & xDev Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081024/4787d1d6/attachment.html
From druzus at acn.waw.pl  Fri Oct 24 06:36:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 24 06:36:39 2008
Subject: [Harbour] Xbase++  go to visual fox pro
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F0C5@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815F0C5@SRV02.deltain.net>
Message-ID: <20081024103650.GA20092@34-mo7-2.acn.waw.pl>

On Fri, 24 Oct 2008, Massimo Belgrano wrote:

Hi Massimo,

>  to cover your FoxPro question. Well the following is true.
>  1.) We always have ensured that the FOXDBE and CDXDBE
>  stay compatible with FoxPro and/or Visual FoxPro, with 1.9 we
>  specifically have added the latest additions in means of datatypes to
>  these DBEs. So the data-layer in means of tables and indexes shouldn't
>  be a question.

It cannot be done in portable way because FOX uses MS-Windows extenssions
in CDX format: it's possible to create CDX indexes witch keys hashed by
MS unicode colation function which uses unknown colattion algorithm
not compatible with universal unicode collation table. If we add such
extension then it will be MS-Windows only feature and we lost multiplatfrom
compatibility. Personally I do not like it.
Harbour supports most of VFP fields except NULL attributes and variable
length character fields (we have our own version here but they are not
VFP compatible). We have some initial code for them started by Miguel but
it has been never functional. If someone is interested in them and has
some knowledge about RDD internals then it can be finished quite easy.
The support for NULL attribute in HVM is different subject and can be
done separatelly if we will decide to have it.
Harbour supports also many other field types which do not exists in
xBase++/VFP.

>  3.) We also added a /fox switch to the Xbase++ compiler to accept
>  the "." instead of the ":" in terms of OO syntax to make compilation of
>  VFP code easier.

I though about adding such feature but in few cases it may cause
unexpected results, f.e.:

   x:=o:msg.and.x

is valid Clipper code which can be written in more readable form:
   x := o:msg .and. x

If we add such extension then it should mean:

   x := o:msg:and:x

I do not like it. For me it's a bug in language definition.
If it's will be very important for users then I can add support for it
but not inside grammar rules but rather in PP or lexer and I will want
to keep original Clipper operators precedence so 'and', 'or' and 'not' will
be reserved method names. With such condition the above can be implemented
by these _THRE_ lines inside complex.c.:

      case HB_PP_TOKEN_DOT:
         pLex->iState = OPERATOR;
         return ':';

In can be also done even now as simple PP directive:

   #xtranslate <exp1>.<exp2> => <exp1>:<exp2>

because Harbour accepts much marker at the beginning of match rule
but this may interacts with 3-rd party code PP directives which use
dot (.).

>  4.) With UniversalSQL we are providing SQL for all DBEs which must
>  be seen as the next evolutionary step of the way how VFP has supported
> SQL
>  for the DBF tables. In addition our goal here is to beat VFP in terms
> of
>  performance - which is not easy but we are right now at a very good
> track
>  to reach that point.

I do not know VFP RDD performance but I heard from xbase++ users that
[x]Harbour DBFCDX is much faster then CDXDBE.

best regards,
Przemek
From hbco2 at sbcglobal.net  Fri Oct 24 06:37:47 2008
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Fri Oct 24 06:37:35 2008
Subject: [Harbour] 2008-10-22 05:03
	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0810240214o6c2971fetb7dbc0bcde883742@mail.gmail.com>
References: <20081022175820.GA32561@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F0B7@SRV02.deltain.net>
	<20081022182347.GA20493@34-mo7-2.acn.waw.pl>
	<1224838367.3841.12.camel@hblx.340cst>
	<9257026e0810240214o6c2971fetb7dbc0bcde883742@mail.gmail.com>
Message-ID: <1224844667.3841.17.camel@hblx.340cst>

On Fri, 2008-10-24 at 11:14 +0200, Lorenzo Fiorini wrote:
> On Fri, Oct 24, 2008 at 10:52 AM, Bill Smith <hbco2@sbcglobal.net> wrote:
> 
> > How can I regenerate the file, or is there another URL to download the
> > code?  howtomak.txt suggests hbmk should be created along with other
> > harbour utilities.  I am compiling using make_gcc.sh.
> 
> Under *nix envs like Linux, OS X, Win msys/mingw hb* scripts are created by
> make_gnu.sh install.
> 
> best regards,
> Lorenzo

Thank you, that was the problem.  I had to manually create a couple of
harbour directories in order to use make_gnu.sh install, but think all
is ok now.  However, attempting to compile wvtext I get the following.
I have tried several sets, C_USR=-tW, HB_GUI=yes, HB_GUI_LIBS=gtwvt.lib
and updated with Przmek's latest changes to incorporate gtvwt.  Still,
get the following.

Harbour 1.1.0dev (Rev. 9727)
Copyright (c) 1999-2008, http://www.harbour-project.org/
Compiling 'wvtext.prg'...
Lines 823, Functions/Procedures 9
Generating C source output to 'wvtext.c'... Done.
./wvtext.o:(.data+0x268): undefined reference to
`HB_FUN_HB_GT_WVT_DEFAULT'
./wvtext.o:(.data+0x278): undefined reference to `HB_FUN_HB_GT_WIN'
collect2: ld returned 1 exit status

Thanks and my apologies for ignorance.

Bill


From lorenzo.fiorini at gmail.com  Fri Oct 24 06:47:42 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Oct 24 06:47:45 2008
Subject: [Harbour] 2008-10-24 12:00 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081024100048.GA15337@34-mo7-2.acn.waw.pl>
References: <20081024100048.GA15337@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0810240347j4db8c426w65ffcc190dd7abc7@mail.gmail.com>

On Fri, Oct 24, 2008 at 12:00 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

>  + harbour/tests/gtwin.prg
>    + added demonstration/test code for using more then one console window
>      also in single thread programs.

I've just tried under Fedora 9 but I don't see the "red" box inside
the first window but only the blue one inside the second one.
The first window is empty.

Is there anything I can check?

best regards,
Lorenzo
From harbour.01 at syenar.hu  Fri Oct 24 06:48:46 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 24 06:48:54 2008
Subject: [Harbour] Xbase++  go to visual fox pro
In-Reply-To: <20081024103650.GA20092@34-mo7-2.acn.waw.pl>
References: <AFB948164110ED43B5EB849E8DEEF03815F0C5@SRV02.deltain.net>
	<20081024103650.GA20092@34-mo7-2.acn.waw.pl>
Message-ID: <F0944691-8235-4892-9E25-AE32D156E008@syenar.hu>

>> 3.) We also added a /fox switch to the Xbase++ compiler to accept
>> the "." instead of the ":" in terms of OO syntax to make  
>> compilation of
>> VFP code easier.
>
> I though about adding such feature but in few cases it may cause
> unexpected results, f.e.:

I'd vote a strong no.

Since VFP users are probably using tons of other
extensions (proprietary MS features to begin with)
we won't and cannot have without breaking principal
goals (like portability), I see even less point in
trashing the language with such features. Next time
will add curly braces support, and whatnot.

MS wanted to push VFP towards their other languages,
and I don't think we should follow suit.

[ Then they've pushed it into the trash bin. ]

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Fri Oct 24 07:01:37 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Oct 24 07:01:40 2008
Subject: [Harbour] hb_ADel()/hb_AIns()
In-Reply-To: <256E8067-0259-4C88-A477-4E857588A05B@syenar.hu>
References: <256E8067-0259-4C88-A477-4E857588A05B@syenar.hu>
Message-ID: <9257026e0810240401j591be900k406ab6a9cd3ef0e5@mail.gmail.com>

On Fri, Oct 24, 2008 at 12:31 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> I'd like to propose to change hb_ADel()/hb_AIns()
> to drop the last logical parameter and always act
> in the "extended" way. After all, the name itself
> already says it clearly that these are extended
> ones, and it looks unnecessarily cumbersome to
> use an additional .T. parameter to exploit the
> only point of these functions.
>
> This is a slightly incompatible change, but since
> these new functions, IMO it's not too late to
> change them. (this problem can be solved with
> some #translates)
>
> If there are no objections/concerns, I'd like to
> do this.

IMHO it's an extension and should work as documented ( elsewhere ).
Beside that the last parameter can be both .t. .and. .f.

best regards,
Lorenzo
From druzus at acn.waw.pl  Fri Oct 24 07:15:45 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 24 07:15:32 2008
Subject: [Harbour] 2008-10-24 12:00 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0810240347j4db8c426w65ffcc190dd7abc7@mail.gmail.com>
References: <20081024100048.GA15337@34-mo7-2.acn.waw.pl>
	<9257026e0810240347j4db8c426w65ffcc190dd7abc7@mail.gmail.com>
Message-ID: <20081024111545.GA1231@34-mo7-2.acn.waw.pl>

On Fri, 24 Oct 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> I've just tried under Fedora 9 but I don't see the "red" box inside
> the first window but only the blue one inside the second one.
> The first window is empty.
> Is there anything I can check?

Probably the first window was overwritten by some other one and
not refreshed. The same should happen with the red box window if
you move out of screen for a while.
If you want to use automatic refresh then you will need inspector
thread and poll windows' input yourself, f.e. change:
   ? "New console window should be visible now"
   wait

to:
   ? "New console window should be visible now"
   ? "Press any key to continue"
   /* poll windows to process their messages */
   while inkey(0.1) == 0
      hb_gtSelect( pGT1 ); nextkey()
      hb_gtSelect( pGT2 ); nextkey()
      hb_gtSelect( pGT )
   enddo

In the future we can add non HVM thread which will refresh such
GTs automatically. It should be quite easy to do though it will
force MT dependencies in some OS-es. If you want you can create
such thread yourself at Harbour level in few lines.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Oct 24 07:15:35 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 24 07:15:42 2008
Subject: [Harbour] hb_ADel()/hb_AIns()
In-Reply-To: <9257026e0810240401j591be900k406ab6a9cd3ef0e5@mail.gmail.com>
References: <256E8067-0259-4C88-A477-4E857588A05B@syenar.hu>
	<9257026e0810240401j591be900k406ab6a9cd3ef0e5@mail.gmail.com>
Message-ID: <2DE7BB89-8F25-449F-B41C-051632D079CA@syenar.hu>

>> I'd like to propose to change hb_ADel()/hb_AIns()
>> to drop the last logical parameter and always act
>> in the "extended" way. After all, the name itself
>> already says it clearly that these are extended
>> ones, and it looks unnecessarily cumbersome to
>> use an additional .T. parameter to exploit the
>> only point of these functions.
>>
>> This is a slightly incompatible change, but since
>> these new functions, IMO it's not too late to
>> change them. (this problem can be solved with
>> some #translates)
>>
>> If there are no objections/concerns, I'd like to
>> do this.
>
> IMHO it's an extension and should work as documented ( elsewhere ).
> Beside that the last parameter can be both .t. .and. .f.

.F. is the default and this way it works exactly like
plain Clipper compatible ADEL/AINS.

hb_AIns()/hb_ADel() as is, are nowhere documented or present
in other language flavors. xhb AINS/ADEL compatibility is
resolved through #translates anyway, and those translates
can be adapted to reflect any local hb_AIns()/hb_ADel()
changes. These two issues should be regarded independently.

Brgds,
Viktor

From druzus at acn.waw.pl  Fri Oct 24 07:25:50 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 24 07:25:38 2008
Subject: [Harbour] hb_ADel()/hb_AIns()
In-Reply-To: <256E8067-0259-4C88-A477-4E857588A05B@syenar.hu>
References: <256E8067-0259-4C88-A477-4E857588A05B@syenar.hu>
Message-ID: <20081024112550.GB1231@34-mo7-2.acn.waw.pl>

On Fri, 24 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> I'd like to propose to change hb_ADel()/hb_AIns()
> to drop the last logical parameter and always act
> in the "extended" way. After all, the name itself
> already says it clearly that these are extended
> ones, and it looks unnecessarily cumbersome to
> use an additional .T. parameter to exploit the
> only point of these functions.
> This is a slightly incompatible change, but since
> these new functions, IMO it's not too late to
> change them. (this problem can be solved with
> some #translates)
> If there are no objections/concerns, I'd like to
> do this.

I suggest to keep the logical parameter working as is
and only change default behavior to .T. when it's not
passed.
Some code may use:
   hb_ains( aVal, xVal, lIncrease )
and if you remove the parameter then it will have to be
changed to:
   if lIncrease
      hb_ains( aVal, xVal )
   else
      ains( aVal, xVal )
   endif
what IMO creates unnecessary complication.

For me much more important is adding support for HB_AEVAL()
with 5-th parameter like in xBase++. I can implement it.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Oct 24 07:58:56 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 24 07:59:04 2008
Subject: [Harbour] 2008-10-24 13:57 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c935cf$Blat.v2.6.2$e4782030$428229dc50@127.0.0.1>

2008-10-24 13:57 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/vm/arrayshb.c
    * Changed the default for the last logical parameter of 
      HB_AINS()/HB_ADEL() to be .T.
      This way there is no need to pass this parameter if someone 
      wants to actually use the extended nature of these functions.
      Passing a .F. will result in equivalent functionality to 
      AINS()/ADEL(). Essentially the last parameter is just there 
      for compatibility.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Oct 24 08:11:23 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 24 08:11:30 2008
Subject: [Harbour] hb_ADel()/hb_AIns()
In-Reply-To: <20081024112550.GB1231@34-mo7-2.acn.waw.pl>
References: <256E8067-0259-4C88-A477-4E857588A05B@syenar.hu>
	<20081024112550.GB1231@34-mo7-2.acn.waw.pl>
Message-ID: <3CEC4C26-3A99-43F0-B9F0-683AF8FEDABD@syenar.hu>

Hi Przemek,

> I suggest to keep the logical parameter working as is
> and only change default behavior to .T. when it's not
> passed.
> Some code may use:
>   hb_ains( aVal, xVal, lIncrease )
> and if you remove the parameter then it will have to be
> changed to:
>   if lIncrease
>      hb_ains( aVal, xVal )
>   else
>      ains( aVal, xVal )
>   endif
> what IMO creates unnecessary complication.

I agree, and I'll do exactly that.

> For me much more important is adding support for HB_AEVAL()
> with 5-th parameter like in xBase++. I can implement it.

Okay.

Brgds,
Viktor

From mbelgrano at deltain.it  Fri Oct 24 08:26:23 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Oct 24 08:27:06 2008
Subject: [Harbour] Xbase++  go to visual fox pro
In-Reply-To: <20081024103650.GA20092@34-mo7-2.acn.waw.pl>
References: <AFB948164110ED43B5EB849E8DEEF03815F0C5@SRV02.deltain.net>
	<20081024103650.GA20092@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0CC@SRV02.deltain.net>

>It cannot be done in portable way because FOX uses MS-Windows extenssions
>in CDX format: it's possible to create CDX indexes witch keys hashed by
>MS unicode colation function which uses unknown colattion algorithm
>not compatible with universal unicode collation table. If we add such
>extension then it will be MS-Windows only feature and we lost multiplatfrom
>compatibility. Personally I do not like it.
How this can be done by xbase++ if is unknow?


>Harbour supports most of VFP fields except NULL attributes and variable
>length character fields (we have our own version here but they are not
>VFP compatible). We have some initial code for them started by Miguel but
>it has been never functional. If someone is interested in them and has
>some knowledge about RDD internals then it can be finished quite easy.
>The support for NULL attribute in HVM is different subject and can be
>done separatelly if we will decide to have it.
>Harbour supports also many other field types which do not exists in
>xBase++/VFP.
Imo support same datatype can be usefull for future coexistence with fox application
Wich other datatype of fox are not supported from harbour http://fox.wikis.com/wc.dll?Wiki~VFPDataTypes~VFP
Varchar, Varbinary, Blob, ole (that is not portable)


>I though about adding such feature but in few cases it may cause
>unexpected results, f.e.:
>   x:=o:msg.and.x
>is valid Clipper code which can be written in more readable form:
>   x := o:msg .and. x
>If we add such extension then it should mean:
>   x := o:msg:and:x
>I do not like it. For me it's a bug in language definition.
>If it's will be very important for users then I can add support for it
>but not inside grammar rules but rather in PP or lexer and I will want
>to keep original Clipper operators precedence so 'and', 'or' and 'not' will
>be reserved method names. 
>In can be also done even now as simple PP directive:
Precedence at Clipper is best choice but the "." instead of the ":" is more universal syntax (also vb use it)
> of  VFP code easier.
We can give an audience also in Visual Fox Pro user who search an alternative



>>  4.) With UniversalSQL we are providing SQL for all DBEs which must
>>  be seen as the next evolutionary step of the way how VFP has supported
>> SQL
>>  for the DBF tables. In addition our goal here is to beat VFP in terms
>> of
>>  performance - which is not easy but we are right now at a very good
>> track
>>  to reach that point.
>I do not know VFP RDD performance but I heard from xbase++ users that
>[x]Harbour DBFCDX is much faster then CDXDBE.

Yes but we haven't jet sql for all dbe like vfp and xbase++


best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Fri Oct 24 08:49:15 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 24 08:49:02 2008
Subject: [Harbour] Xbase++  go to visual fox pro
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F0CC@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815F0C5@SRV02.deltain.net>
	<20081024103650.GA20092@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F0CC@SRV02.deltain.net>
Message-ID: <20081024124915.GA5682@34-mo7-2.acn.waw.pl>

On Fri, 24 Oct 2008, Massimo Belgrano wrote:

Hi Massimo.

> >It cannot be done in portable way because FOX uses MS-Windows extenssions
> >in CDX format: it's possible to create CDX indexes witch keys hashed by
> >MS unicode colation function which uses unknown colattion algorithm
> >not compatible with universal unicode collation table. If we add such
> >extension then it will be MS-Windows only feature and we lost multiplatfrom
> >compatibility. Personally I do not like it.
> How this can be done by xbase++ if is unknow?

Very simple. It calls MS-Windows function which makes the conversion.
xBase++ does not make any conversions at all. It means that xBase++
creates unportable indexes in such case because program which wants
to access them has to use the same function which exists only in Windows.
In WINE this function uses official Unicode collation tables and it's
not binary compatible and we cannot use it.

> Imo support same datatype can be usefull for future coexistence with fox application
> Wich other datatype of fox are not supported from harbour http://fox.wikis.com/wc.dll?Wiki~VFPDataTypes~VFP
> Varchar, Varbinary, Blob, ole (that is not portable)

We support OLE memoe fields but without any interpretation of internal
data because it's also MS-Windows only extensions.

> >I though about adding such feature but in few cases it may cause
> >unexpected results, f.e.:
> >   x:=o:msg.and.x
> >is valid Clipper code which can be written in more readable form:
> >   x := o:msg .and. x
> >If we add such extension then it should mean:
> >   x := o:msg:and:x
> >I do not like it. For me it's a bug in language definition.
> >If it's will be very important for users then I can add support for it
> >but not inside grammar rules but rather in PP or lexer and I will want
> >to keep original Clipper operators precedence so 'and', 'or' and 'not' will
> >be reserved method names. 
> >In can be also done even now as simple PP directive:
> Precedence at Clipper is best choice but the "." instead of the ":" is more universal syntax (also vb use it)
> of  VFP code easier.

For me VB, VFP, xbase++ and even .NET are exotic projects without any
practice.
BTW looking and some of my friends jobs I also find that VB is very far
from being production stable in the terms I accept. It's said that big
firm release products with such quality.

> We can give an audience also in Visual Fox Pro user who search an alternative

For existing VFP code which does not existing 3-rd party Harbour/Clipper
header files with dot used as part of new commands then simple #xtrnaslate
is probably enough without any compiler modifications.

> >I do not know VFP RDD performance but I heard from xbase++ users that
> >[x]Harbour DBFCDX is much faster then CDXDBE.
> Yes but we haven't jet sql for all dbe like vfp and xbase++

I hope we will. Support for SQL in native RDDs is sth what I want to have.
But here we will have to also make our own code without any OS tricks.
In Windows it's possible to add such feature using existing external
extensions quite easy without writing everything from scratch but it
also will be unportable feature. I do not know how it is done in xbase++.

best regards,
Przemek
From bedipritpal at hotmail.com  Fri Oct 24 09:48:13 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Oct 24 09:48:17 2008
Subject: [Harbour] May be it is useful for you
Message-ID: <20150487.post@talk.nabble.com>


Hello Everybody

If you are still left with any Clipper applications to be converted to
Xbase++ but need multi-threading and multi-windows without
changing even a line of source code, here is the first look:

http://www.vouch.info/downloads/demowvg.zip

Download and unzip in any folder, stay there and execute demowvg.exe.
Play with <Traditional><Next Gets | Browser> menu options repeatedly.
Also play with other menu options simultaneously.
Keep playing with opened windows as to resize/fullscreen modes.
Click on windows icon in the titlebar and play with <Mark and Copy> option 
just like on normal console.

Examine the demowvg.prg.

It is Harbour.

Regards
Pritpal Bedi, a student of software anyalysis & design

-- 
View this message in context: http://www.nabble.com/May-be-it-is-useful-for-you-tp20150487p20150487.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Fri Oct 24 09:44:30 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Oct 24 09:49:31 2008
Subject: [Harbour] 2008-10-24 12:00 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081024100048.GA15337@34-mo7-2.acn.waw.pl>
References: <20081024100048.GA15337@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0CE@SRV02.deltain.net>

C:\harbour\tests>hbmk -gui gtwin
gtwin.c:
Fatal: Unable to open file 'HBCPAGE.LIB'

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Friday, October 24, 2008 12:01 PM
To: harbour@harbour-project.org
Subject: [Harbour] 2008-10-24 12:00 UTC+0200 Przemyslaw Czerpak(druzus/at/priv.onet.pl)

2008-10-24 12:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtxwc/gtxwc.c
    * added hack for problems with some XLIB versions in heavy stress
      MT tests

  * harbour/include/hbapigt.h
  * harbour/source/vm/thread.c
    * added parameter to hb_gtAlloc() C function

  * harbour/include/hbapigt.h
  * harbour/source/rtl/hbgtcore.c
    + added hb_gtCreate() and hb_gtSwap() C functions
    + added new .prg functions:
         HB_GTCREATE( <cGtName> ) -> <pGT>
         HB_GTSELECT( <pGT> ) -> <pPrevGT>
      Using this functions is possible to create many console window
      if GT supports such possibilities (f.e. GTXWC or GTWVT) even in
      single thread programs and switch between them.

  * harbour/source/rtl/box.c
    ! fixed one of recent DISPBOX() modifications - it should use:
      hb_gtBoxEx() instead of hb_gtDrawBox() to set cursor position.

  + harbour/tests/gtwin.prg
    + added demonstration/test code for using more then one console window
      also in single thread programs.

best regards
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Fri Oct 24 09:59:17 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Oct 24 10:00:02 2008
Subject: [Harbour] Xbase++  go to visual fox pro
In-Reply-To: <20081024124915.GA5682@34-mo7-2.acn.waw.pl>
References: <AFB948164110ED43B5EB849E8DEEF03815F0C5@SRV02.deltain.net><20081024103650.GA20092@34-mo7-2.acn.waw.pl><AFB948164110ED43B5EB849E8DEEF03815F0CC@SRV02.deltain.net>
	<20081024124915.GA5682@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0CF@SRV02.deltain.net>

>Very simple. It calls MS-Windows function which makes the conversion.
>xBase++ does not make any conversions at all. It means that xBase++
>creates unportable indexes in such case because program which wants
>to access them has to use the same function which exists only in Windows.
>In WINE this function uses official Unicode collation tables and it's
>not binary compatible and we cannot use it.
Thanks and sorry for my ignorance?
If you kwnow wich are name of api I can made same search


>We support OLE memoe fields but without any interpretation of internal
>data because it's also MS-Windows only extensions.
Varchar, Varbinary, Blob will be intresting?
Have you a sample of how be managed ole?


>For me VB, VFP, xbase++ and even .NET are exotic projects without any
>practice.
>BTW looking and some of my friends jobs I also find that VB is very far
>from being production stable in the terms I accept. It's said that big
>firm release products with such quality.
I agree that harbor have made very rock choice but tink that . is more readable than : for people out of xbase


>For existing VFP code which does not existing 3-rd party Harbour/Clipper
>header files with dot used as part of new commands then simple #xtrnaslate
>is probably enough without any compiler modifications.

I  think as you


>I hope we will. Support for SQL in native RDDs is sth what I want to have.
>But here we will have to also make our own code without any OS tricks.
>In Windows it's possible to add such feature using existing external
>extensions quite easy without writing everything from scratch but it
>also will be unportable feature. I do not know how it is done in xbase++.

Not so easy because Visual fox pro have a gui 
I post a sample (not gui) written in foxpro
If usefull I can post other little sample
http://www.oooforum.org/forum/viewtopic.phtml?t=52935

PROCEDURE VfpOOoWritExample()
   * Create a letter.
   LOCAL oDoc
   LOCAL oTxt
   LOCAL oRng
   LOCAL oCursor
   LOCAL oSourceframe
   LOCAL oDisp

* Test for inserting a file
   LOCAL ARRAY argsinsert[1]
   LOCAL ARRAY NoArg[1]
   LOCAL ARRAY DownArg[2]
   LOCAL  SrcFile
   LOCAL cInsertfilename

#DEFINE CR CHR(13)
#DEFINE wdTAB CHR(9)
** API CONTROL CHARACTERS FOR insertControlCharacter
#define PARAGRAPH_BREAK 0
#define LINE_BREAK  1
#DEFINE HARD_HYPHEN 2
#DEFINE SOFT_HYPHEN 3
#DEFINE HARD_SPACE  4
#DEFINE APPEND_PARAGRAPH  5

*   oDoc = OOoOpenURL( "private:factory/swrite" )
*--------------------------------------------------------
*  OOoOpenURL comes from the example code in
*  OpenOffice.org Macros and API
*  Changing TabStops in a write document from Visual FoxPro
*--------------------------------------------------------
*  To Open a file pass in the the following
   oDoc = OOoOpenURL( "file:///c:/exam/testopen.odt" )

************************************************
***------ Add text to file ------------
************************************************
   oTxt = oDoc.getText
   oCursor = oTxt.createTextCursor()

************************************************************************
*  this is an example of cut and paste. First we will attempt to copy
*  a text area to the clipboard. Later will will paste it.
************************************************************************
   octl = oDoc.getCurrentController()
   oSourceframe = octl.getFrame()
   **** REM create the DispatcherService --> This is the Basic version
   **** oDisp = createUnoService("com.sun.star.frame.DispatchHelper")
*--------------------------------------------------------
*  OOoServiceManager_CreateInstance comes from the example code in
*  code in OpenOffice.org Macros and API
*  Changing TabStops in a write document from Visual FoxPro
*--------------------------------------------------------
   oDisp = OOoServiceManager_CreateInstance( "com.sun.star.frame.DispatchHelper" )

   oCursor.gotoEnd( .T. )

*--------------------------------------------------------
*  OOoMakePropertyValue comes from the example code in
*  code in OpenOffice.org Macros and API
*  Changing TabStops in a write document from Visual FoxPro
*--------------------------------------------------------
   NoArg[1] = OOoMakePropertyValue( "EMPTY" , ".f." )
   **** First we need to select the data to be copied  .
   oDisp.executeDispatch(octl, ".uno:SelectAll", "", 0, @ NoArg)

   **** REM copy the current selection to the clipboard.
   oDisp.executeDispatch(octl, ".uno:Copy", "", 0, @ NoArg)

   DownArg[1] = OOoMakePropertyValue( "Count" , 1 )
   DownArg[2] = OOoMakePropertyValue( "Select" , ".f." )

   oDisp.executeDispatch(octl, ".uno:GoDown", "", 0, @ DownArg)

************************************************************************
*    Copy to ClipBoard complete
************************************************************************
   oCursor.gotoEnd( .F. )

   oTxt.insertString( oCursor, "This is line number 1.", .F. )
   oTxt.insertControlCharacter( oCursor, PARAGRAPH_BREAK, .F. )

*   ' Insert text into 2nd paragraph.  Change paragraph style.
   oTxt.insertString( oCursor, "This is line number 2 (in style Heading 2)", .F. )
   oCursor.ParaStyleName = "Heading 2"

*   ' Insert paragraph break.  There are now three paragraphs, the 3rd one is empty.
   oTxt.insertControlCharacter( oCursor, PARAGRAPH_BREAK, .F. )

   oTxt.insertString( oCursor, "This is line number 3.", .F. )

*   ' Insert paragraph break.
   oTxt.insertControlCharacter( oCursor, PARAGRAPH_BREAK, .F. )

*  ' Move the cursor to the start of the document.
*    oCursor.gotoStart( .F. )

*   ' Insert text into beginning of 1st paragraph.
   oTxt.insertString( oCursor, "This line appears at the beginning of the document.", .F. )
   oTxt.insertControlCharacter( oCursor, PARAGRAPH_BREAK, .F. )
   oCursor.gotoEnd( .F. )

   oRng = oTxt.GetEnd()
   oStrt = oTxt.GetEnd()

   ctxtstring = "This Word Document will be used to test the interface to OPEN OFFICE FROM FOXPRO"+CR
   oTxt.insertString( oCursor, ctxtstring , .F. )
   =oboldtext(ctxtstring,1, 4, oTxt)

   ctxtstring = "THIS IS A TEST TO SEE IF I CAN WRITE TEXT INTO A FILE "+CR
   oTxt.insertString( oCursor, ctxtstring , .F. )

   =oboldtext(ctxtstring,4, 6, oTxt)

   ctxtstring = "This is the last sentence in the doc"+CR
   = oboldtext(ctxtstring,4, 6, oTxt)

***********************************************************************
*   Here is where we attempt to paste the area we copied from Above
***********************************************************************
   oCursor.gotoEnd( .F. )
   oCursor.BreakType = 4

   oDisp.executeDispatch(oSourceframe, ".uno:Paste", "", 0, @ NoArg)

***********************************************************************
*   Paste complete
***********************************************************************
   ctxtstring = "A file Will be inserted here "+CR
   oTxt.insertString( oCursor, ctxtstring , .F. )

   oCursor.gotoEnd( .F. )
   oCursor.BreakType = 4

   argsinsert[1] = OOoMakePropertyValue( "EMPTY" , ".f." )

   cInsertfilename = "c:\exam\NEXTFORM.odt"

   SrcFile = OOoConvertToURL(cInsertfilename)

   oCursor.insertDocumentFromUrl(SrcFile , @ argsinsert)


Here are some of the functions I used to bold text.


Code:
FUNCTION oboldtext(cbText, nstartloc, nendloc, oBTxt)
local cIndex
local oBRange
local oCursor
   oCursor = oBTxt.createTextCursor()
   oCursor.gotoEnd( .F. )

   oBTxt.insertString( oCursor, cbText , .F. )

   oCursor.gotoPreviousSentence( .f.)
   oCursor.gotoStartOfSentence(.f.)
   if nstartloc > 1
     for cIndex = 1 to (nstartloc - 1)
       oCursor.gotoNextWord( .F.)
     endfor
   endif
   for cIndex = nstartloc to nendloc
      oCursor.gotoNextWord( .T.)
   endfor
   oCursor.CharWeight = 150
   oCursor.gotoNextWord( .F.)
   oCursor.collapseToStart()
   oCursor.CharWeight = 100
   oCursor.gotoEnd( .F. )

return


Here is a function i use to write text


Code:
function oOOwritetext(cwtext, oTxt)
oRange = oTxt.GetEnd()
oRange.setString(cwtext)

return



From clipper5_y2d at versateladsl.be  Fri Oct 24 10:07:01 2008
From: clipper5_y2d at versateladsl.be (frank van nuffel)
Date: Fri Oct 24 10:07:15 2008
Subject: [Harbour] May be it is useful for you
References: <20150487.post@talk.nabble.com>
Message-ID: <ABC93F071F7A45E289D7E6CC09A20FC6@uwlhldv32rnqu4>

Hello Pritpal,

Many thanks for the example, which is worth more than a thousand words (to 
get a glimpse of what wvg is about); would it be correct to conclude wvg 
allows for kind-of-console programming (without the complexity of windows 
programming (except perhaps event driven structure)) rendering all output to 
a true Windows window; most of the time i'm lost in all kinds of library 
code to be able to see the woods from the trees; i've read your reminder 
note in Changelog and need to express a big thank you for everyone involved 
in bringing Harbour this far, and understand wvg is ready to take off, hence 
some philosophy behind the concept is welcome (perhaps from a link currently 
already describing it)

Keep on doing a great job :-)
Friendly regards,

frank

----- Original Message ----- 
From: "Pritpal Bedi" <bedipritpal@hotmail.com>
To: <harbour@harbour-project.org>
Sent: Friday, October 24, 2008 3:48 PM
Subject: [Harbour] May be it is useful for you


>
> Hello Everybody
>
> If you are still left with any Clipper applications to be converted to
> Xbase++ but need multi-threading and multi-windows without
> changing even a line of source code, here is the first look:
>
> http://www.vouch.info/downloads/demowvg.zip
>
> Download and unzip in any folder, stay there and execute demowvg.exe.
> Play with <Traditional><Next Gets | Browser> menu options repeatedly.
> Also play with other menu options simultaneously.
> Keep playing with opened windows as to resize/fullscreen modes.
> Click on windows icon in the titlebar and play with <Mark and Copy> option
> just like on normal console.
>
> Examine the demowvg.prg.
>
> It is Harbour.
>
> Regards
> Pritpal Bedi, a student of software anyalysis & design
>
> -- 
> View this message in context: 
> http://www.nabble.com/May-be-it-is-useful-for-you-tp20150487p20150487.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 

From mbelgrano at deltain.it  Fri Oct 24 10:20:43 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Oct 24 10:21:25 2008
Subject: [Harbour] May be it is useful for you
In-Reply-To: <20150487.post@talk.nabble.com>
References: <20150487.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0D0@SRV02.deltain.net>

Very good idea
I have changed salary of Pritpal Bedi to 90000000.00 (tell me if  truly
happen)
Button of last row(expand,minimize,partial) seem not work (same option
work from traditional menu)
Instead include vvtext.exe why not incorporate in prg adding a new menu
option
In my opinion also mttest9,10 will be a good to add at sample


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
Sent: Friday, October 24, 2008 3:48 PM
To: harbour@harbour-project.org
Subject: [Harbour] May be it is useful for you


Hello Everybody

If you are still left with any Clipper applications to be converted to
Xbase++ but need multi-threading and multi-windows without
changing even a line of source code, here is the first look:

http://www.vouch.info/downloads/demowvg.zip

Download and unzip in any folder, stay there and execute demowvg.exe.
Play with <Traditional><Next Gets | Browser> menu options repeatedly.
Also play with other menu options simultaneously.
Keep playing with opened windows as to resize/fullscreen modes.
Click on windows icon in the titlebar and play with <Mark and Copy>
option 
just like on normal console.

Examine the demowvg.prg.

It is Harbour.

Regards
Pritpal Bedi, a student of software anyalysis & design

-- 
View this message in context:
http://www.nabble.com/May-be-it-is-useful-for-you-tp20150487p20150487.ht
ml
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From bedipritpal at hotmail.com  Fri Oct 24 10:49:57 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Oct 24 10:49:59 2008
Subject: [Harbour] Harbour Web site - Preview #2
In-Reply-To: <7CEB4F65-72C5-4739-8AB1-904F491BF6D2@syenar.hu>
References: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
	<o6b3g41qpf5auifdsnjlu81hlmbi4hgd3q@4ax.com>
	<7CEB4F65-72C5-4739-8AB1-904F491BF6D2@syenar.hu>
Message-ID: <20151578.post@talk.nabble.com>


Viktor


Szak?ts Viktor wrote:
> 
> If someone wants to appear on the crew list page,
> he has to ask for it along with some personal details
> (e-mail, membership description, country, photo) to
> put there along the name, and someone would need to
> update the page with these data.
> 

May be, may be, I do qualify to be included on the page !

Regards
Pritpal Bedi, INDIA

-- 
View this message in context: http://www.nabble.com/Harbour-Web-site---Preview--2-tp20135598p20151578.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Fri Oct 24 10:51:48 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Oct 24 10:51:52 2008
Subject: [Harbour] May be it is useful for you
In-Reply-To: <20150487.post@talk.nabble.com>
References: <20150487.post@talk.nabble.com>
Message-ID: <20151631.post@talk.nabble.com>


Hi

Just to update that this distribution also contains wvtext.exe,
a pure console mode muti-window implementation demo with
acoompanying source file.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/May-be-it-is-useful-for-you-tp20150487p20151631.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Fri Oct 24 10:55:09 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Oct 24 10:55:11 2008
Subject: [Harbour] May be it is useful for you
In-Reply-To: <20150487.post@talk.nabble.com>
References: <20150487.post@talk.nabble.com>
Message-ID: <20151684.post@talk.nabble.com>


For info to all


Pritpal Bedi wrote:
> 
> Hello Everybody
> 
> If you are still left with any Clipper applications to be converted to
> Xbase++ but need multi-threading and multi-windows without
> changing even a line of source code, here is the first look:
> 
> http://www.vouch.info/downloads/demowvg.zip
> 
> Download and unzip in any folder, stay there and execute demowvg.exe.
> Play with <Traditional><Next Gets | Browser> menu options repeatedly.
> Also play with other menu options simultaneously.
> Keep playing with opened windows as to resize/fullscreen modes.
> Click on windows icon in the titlebar and play with <Mark and Copy> option 
> just like on normal console.
> 
> Examine the demowvg.prg.
> 
> It is Harbour.
> 
> Regards
> Pritpal Bedi, a student of software anyalysis & design
> 
> 

I posted above message on Xbase++ third-party NG which 
within 24 hours of posting has beeen removed by the administrators.
I apologise if I did something wrong. It was a pure info message for 
Xbase++ users. 

Anyway, if they look it the other way.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/May-be-it-is-useful-for-you-tp20150487p20151684.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Fri Oct 24 11:09:00 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Oct 24 11:09:42 2008
Subject: [Harbour] May be it is useful for you
In-Reply-To: <20151684.post@talk.nabble.com>
References: <20150487.post@talk.nabble.com> <20151684.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0D2@SRV02.deltain.net>

I have Posted messages in soapbox without problem
I suggest retry afaik there is no war policies versus other xbase
compiler 

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
Sent: Friday, October 24, 2008 4:55 PM
To: harbour@harbour-project.org
Subject: Re: [Harbour] May be it is useful for you


For info to all


Pritpal Bedi wrote:
> 
> Hello Everybody
> 
> If you are still left with any Clipper applications to be converted to
> Xbase++ but need multi-threading and multi-windows without
> changing even a line of source code, here is the first look:
> 
> http://www.vouch.info/downloads/demowvg.zip
> 
> Download and unzip in any folder, stay there and execute demowvg.exe.
> Play with <Traditional><Next Gets | Browser> menu options repeatedly.
> Also play with other menu options simultaneously.
> Keep playing with opened windows as to resize/fullscreen modes.
> Click on windows icon in the titlebar and play with <Mark and Copy>
option 
> just like on normal console.
> 
> Examine the demowvg.prg.
> 
> It is Harbour.
> 
> Regards
> Pritpal Bedi, a student of software anyalysis & design
> 
> 

I posted above message on Xbase++ third-party NG which 
within 24 hours of posting has beeen removed by the administrators.
I apologise if I did something wrong. It was a pure info message for 
Xbase++ users. 

Anyway, if they look it the other way.

Regards
Pritpal Bedi

-- 
View this message in context:
http://www.nabble.com/May-be-it-is-useful-for-you-tp20150487p20151684.ht
ml
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From rportnoff at spendmap.com  Fri Oct 24 11:40:07 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Fri Oct 24 11:38:36 2008
Subject: [Harbour] Off topic: Fax integration
In-Reply-To: <20151684.post@talk.nabble.com>
References: <20150487.post@talk.nabble.com>
 <20151684.post@talk.nabble.com>
Message-ID: <B0084512975@ms1.3peaks.com>

Hi all,

I have been using a third party fax integration product for well over 
10 years now and am not happy with the API framework or the 
reliability of this product.

If you have faxing capability in your app and you are very happy with 
the results, please let me know what product you use.

Please reply to me personally at mailto:randy@palmas.com

TIA.

Regards,
Randy.


From harbour.01 at syenar.hu  Fri Oct 24 11:57:00 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 24 11:57:08 2008
Subject: [Harbour] Harbour Web site - Preview #2
In-Reply-To: <20151578.post@talk.nabble.com>
References: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
	<o6b3g41qpf5auifdsnjlu81hlmbi4hgd3q@4ax.com>
	<7CEB4F65-72C5-4739-8AB1-904F491BF6D2@syenar.hu>
	<20151578.post@talk.nabble.com>
Message-ID: <5BA0C229-AA98-4915-BAE2-F20C1A8F2C81@syenar.hu>

Hi Pritpal,

Of course. Sorry, I may have been unclear, it's
not a matter of qualification (and especially not
me being the judge), but rather administrative,
someone should go there and add you to the list.

IMO everyone on the /credits list qualifies by
default, plus everyone else who happened to
contribute (f.e. not code) but was mistakenly
left out from the /credits list. I'd appreciate
if the group would raise anyone missing.

Brgds,
Viktor

On 2008.10.24., at 16:49, Pritpal Bedi wrote:

>
> Viktor
>
>
> Szak?ts Viktor wrote:
>>
>> If someone wants to appear on the crew list page,
>> he has to ask for it along with some personal details
>> (e-mail, membership description, country, photo) to
>> put there along the name, and someone would need to
>> update the page with these data.
>>
>
> May be, may be, I do qualify to be included on the page !
>
> Regards
> Pritpal Bedi, INDIA
>
> -- 
> View this message in context: http://www.nabble.com/Harbour-Web-site---Preview--2-tp20135598p20151578.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From toninhofwi at yahoo.com.br  Fri Oct 24 13:45:35 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Fri Oct 24 12:43:23 2008
Subject: [Harbour] Harbour Web site - Preview #2
In-Reply-To: <5BA0C229-AA98-4915-BAE2-F20C1A8F2C81@syenar.hu>
References: <531d7a750810231017u6ad13ceds192ef0e0c7314c27@mail.gmail.com>
	<o6b3g41qpf5auifdsnjlu81hlmbi4hgd3q@4ax.com>
	<7CEB4F65-72C5-4739-8AB1-904F491BF6D2@syenar.hu>
	<20151578.post@talk.nabble.com>
	<5BA0C229-AA98-4915-BAE2-F20C1A8F2C81@syenar.hu>
Message-ID: <2c24g4pk6eq76vca29d34lkfqsv65psqa4@4ax.com>

>IMO everyone on the /credits list qualifies by default

I agree.


Regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From druzus at acn.waw.pl  Fri Oct 24 14:58:30 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 24 14:58:17 2008
Subject: [Harbour] 2008-10-24 12:00 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F0CE@SRV02.deltain.net>
References: <20081024100048.GA15337@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F0CE@SRV02.deltain.net>
Message-ID: <20081024185830.GA32241@34-mo7-2.acn.waw.pl>

On Fri, 24 Oct 2008, Massimo Belgrano wrote:

Hi Massimo,

> C:\harbour\tests>hbmk -gui gtwin
> gtwin.c:
> Fatal: Unable to open file 'HBCPAGE.LIB'

Probably you do not have HB_LIB_INSTALL envvar or it points to
wrong directory which does not containd standard harbour libraries like
HBCPAGE.LIB

best regards,
Przemek
From bedipritpal at hotmail.com  Fri Oct 24 15:03:28 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Oct 24 15:03:31 2008
Subject: [Harbour] May be it is useful for you
In-Reply-To: <ABC93F071F7A45E289D7E6CC09A20FC6@uwlhldv32rnqu4>
References: <20150487.post@talk.nabble.com>
	<ABC93F071F7A45E289D7E6CC09A20FC6@uwlhldv32rnqu4>
Message-ID: <20156039.post@talk.nabble.com>


Hello Frank


frank van nuffel-2 wrote:
> 
> ... would it be correct to conclude wvg 
> allows for kind-of-console programming (without the complexity of windows 
> programming (except perhaps event driven structure)) rendering all output
> to 
> a true Windows window; most of the time i'm lost in all kinds of library 
> code to be able to see the woods from the trees; i've read your reminder 
> note in Changelog and need to express a big thank you for everyone
> involved 
> in bringing Harbour this far, and understand wvg is ready to take off,
> hence 
> some philosophy behind the concept is welcome (perhaps from a link
> currently 
> already describing it)
> 

You are right in your assertions.

WVG or WVT both gives power to render console outpur commands
to a TRUE Windows' window. 

If you plan to have pure console output, you need not to learm more than
two lines, perhaps. In that case you will be linking GTWVT or GTWVG without 
any GUI makeup. ( SEE: wvtext.prg / wvtext.exe ). GTWVG gives you the power 
to mix console commands with GUI elements as is evident in demowvg.prg /
demowvg.exe.

I am planning to include complete documentation of GTWVT in the next few
days.
Keep watching http://www.harbour.vouch.info space though I will declare it
in this NG also.

This mammoth feature is engineered by Przemsylaw alone. 
I only floated this idea nearly one year back with working code but with a
different approach.
Przemek did it in a PERFECT way far beyond my imagination.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/May-be-it-is-useful-for-you-tp20150487p20156039.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Fri Oct 24 15:56:49 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 24 15:56:38 2008
Subject: [Harbour] Xbase++  go to visual fox pro
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F0CF@SRV02.deltain.net>
References: <20081024124915.GA5682@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F0CF@SRV02.deltain.net>
Message-ID: <20081024195649.GB32241@34-mo7-2.acn.waw.pl>

On Fri, 24 Oct 2008, Massimo Belgrano wrote:

Hi Massimo,

> >Very simple. It calls MS-Windows function which makes the conversion.
> >xBase++ does not make any conversions at all. It means that xBase++
> >creates unportable indexes in such case because program which wants
> >to access them has to use the same function which exists only in Windows.
> >In WINE this function uses official Unicode collation tables and it's
> >not binary compatible and we cannot use it.
> Thanks and sorry for my ignorance?
> If you kwnow wich are name of api I can made same search

It's LCMapString() used with LCMAP_SORTKEY.

> Varchar, Varbinary, Blob will be intresting?

We have such functionality but it's not xbase++ compatible.

> Have you a sample of how be managed ole?

These are normal memo fields only marked in DBF header that they
holds OLE objects by using "G" instead of "M".

But I've just found interesting thing looing and dbf1.c code.
Why we have disabled many of DBF filed types by encapsulating some
code inside HB_COMPAT_FOXPRO?
Do we want to disable all Harbour DBF extensions when VFP begins to
use them? ;-)
I can understand that some of unfinished code should be disabled
but someone who made this modifications seriously broke existing
functionality and Harbour extensions. I'll recheck this modification
but in the future please consult such things with me.

> >For existing VFP code which does not existing 3-rd party Harbour/Clipper
> >header files with dot used as part of new commands then simple #xtrnaslate
> >is probably enough without any compiler modifications.
> I  think as you

> Not so easy because Visual fox pro have a gui 
> I post a sample (not gui) written in foxpro
> If usefull I can post other little sample
> http://www.oooforum.org/forum/viewtopic.phtml?t=52935
> PROCEDURE VfpOOoWritExample()
[...]

I'm sorry but I do not know what this code does.
I want to implement pure SQL support for Harbour. The controls
and visual elements has nothing to do with it.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct 24 16:04:13 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 24 16:03:59 2008
Subject: [Harbour] Xbase++  go to visual fox pro
In-Reply-To: <20081024195649.GB32241@34-mo7-2.acn.waw.pl>
References: <20081024124915.GA5682@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F0CF@SRV02.deltain.net>
	<20081024195649.GB32241@34-mo7-2.acn.waw.pl>
Message-ID: <20081024200413.GA28072@34-mo7-2.acn.waw.pl>

On Fri, 24 Oct 2008, Przemyslaw Czerpak wrote:
> But I've just found interesting thing looing and dbf1.c code.
> Why we have disabled many of DBF filed types by encapsulating some
> code inside HB_COMPAT_FOXPRO?
> Do we want to disable all Harbour DBF extensions when VFP begins to
> use them? ;-)
> I can understand that some of unfinished code should be disabled
> but someone who made this modifications seriously broke existing
> functionality and Harbour extensions. I'll recheck this modification
> but in the future please consult such things with me.

Ups. I'm really sorry. By mistake I open xHarbour directory
instead of Harbour. In Harbour we do not have any HB_COMPAT_FOXPRO
(which is disabled by default) in dbf1.c so it's OK.

best regards,
Przemek
From joe_bernardes at yahoo.com.br  Fri Oct 24 16:43:04 2008
From: joe_bernardes at yahoo.com.br (Joel YAHOO)
Date: Fri Oct 24 16:43:14 2008
Subject: [Harbour] Error compiler harbour in CentOS-5.2
References: <814837.28245.qm@web51906.mail.re2.yahoo.com><4900A998.7050100@fsgiudice.com>
	<D4204BF1-ABB4-44F0-B659-DEC19B465339@syenar.hu>
Message-ID: <006301c93619$236e4000$1001a8c0@jad>

----- Original Message ----- 
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Thursday, October 23, 2008 7:39 PM
Subject: Re: [Harbour] Error compiler harbour in CentOS-5.2


> Hi Joel, Francesco,
>
> Pls try with latest SVN, it should compile now fine.
> I'd appreciate if your could report your results.
>
> Brgds,
> Viktor
>

Hi Viktor;
I got to generate the couples without larger problems.
They appeared other mistakes, but it is in the compilation of tests, it 
seems to be me of the hbmake.
I will verify better and I inform.
Thank you very much for the return.
{}s
Joel Bernardes

__________________________________________________
Fa?a liga??es para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From bedipritpal at hotmail.com  Fri Oct 24 18:07:39 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Oct 24 18:07:42 2008
Subject: [Harbour] Proposed Feature Set for Multi-Window GTs
Message-ID: <20158586.post@talk.nabble.com>


Hello,

I propose following for consoles created with hb_gtReload( 'WVG|WVT' ).

/* Positions window at top-left position at nX,nY coordinates. 
    ROWS/COLS be converted to pixels  */
hb_gtInfo( HB_GTI_SETPOS, { nMode, nX|nRows, nY|nCols } )
   nMode == HB_GTI_POS_PIXELS | HB_GTI_POS_ROWS 

/* Resizing mode and corresponding inkey() values */
hb_gtInfo( HB_GTI_RESIZEMODE, HB_GTI_RESIZEMODE_FONT |
HB_GTI_RESIZEMODE_ROWS )
    Currently we have HB_GTI_RESIZEMODE_FONT in place. But there are
instances
    when we need resizing increasing/decreasing rows/cols instead of font.
    If HB_GTI_RESIZEMODE_ROWS mode is in effect, Inkey() should return
K_RESIZING.

/* To force current GT as modal to pGT */
hb_gtInfo( HB_GTI_MODAL, pGT ) 
    May be we need this feature in hb_gtCreate() protocol.

/* To suppress console output */
hb_gtInfo( HB_GTI_NOCONSOLE, TRUE )
    Sometimes a window is needed for only GUI components.

May be above attributes are required before Window is created, so some sort
of
HB_NOSTARTUPWINDOW functionality be implemented.

More to follow.

Regards
Pritpal Bedi
 
-- 
View this message in context: http://www.nabble.com/Proposed-Feature-Set-for-Multi-Window-GTs-tp20158586p20158586.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Fri Oct 24 18:49:34 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 24 18:49:21 2008
Subject: [Harbour] May be it is useful for you
In-Reply-To: <20156039.post@talk.nabble.com>
References: <20150487.post@talk.nabble.com>
	<ABC93F071F7A45E289D7E6CC09A20FC6@uwlhldv32rnqu4>
	<20156039.post@talk.nabble.com>
Message-ID: <20081024224934.GB5685@34-mo7-2.acn.waw.pl>

On Fri, 24 Oct 2008, Pritpal Bedi wrote:

Hi Pritpal and Frank,

> This mammoth feature is engineered by Przemsylaw alone. 
> I only floated this idea nearly one year back with working code but with a
> different approach.
> Przemek did it in a PERFECT way far beyond my imagination.

It's not true. Now I only bound internal toys I created in last two years
into semi final version. It's low level Harbour core code. Things like
visual extensions and GTWVG features it's your job and my congratulations
for very good results. It's a pleasure for me when I see that some things
I was thinking about long time ago and I was adding is small elements now
joined together reach the form which allows to create such things like your
code. Thank you very much. Such final real usage demonstration program shows
more possibilities then my ChangeLog entries often too enigmatic for most of
user.
So once again thank YOU very much.

best regards,
Przemek
From philb at philb.us  Fri Oct 24 19:37:01 2008
From: philb at philb.us (Phil Barnett)
Date: Fri Oct 24 19:37:07 2008
Subject: [Harbour] RE: Harbour Digest, Vol 24, Issue 104
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C95017DEAEA@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C95017DEAEA@PINK.zycie.pzu>
Message-ID: <200810241937.02236.philb@philb.us>

On Friday 24 October 2008 03:03:09 am Horodyski Marek (PZUZ) wrote:
> And what you tell about Phil's PBMake ?
> http://www.the-oasis.net/

It probably needs to be revisited and brought up to date.

It's open source. The source is there on The Oasis. I just don't have time to 
take on more stuff. (I'm already in up to my eyebrows...)

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From philb at philb.us  Fri Oct 24 19:39:37 2008
From: philb at philb.us (Phil Barnett)
Date: Fri Oct 24 19:39:41 2008
Subject: R: [Harbour] RE: Harbour Digest, Vol 24, Issue 104
In-Reply-To: <000001c935b0$6327dd7b$0400a8c0@deltain.net>
References: <000001c935b0$6327dd7b$0400a8c0@deltain.net>
Message-ID: <200810241939.37480.philb@philb.us>

On Friday 24 October 2008 04:12:50 am Massimo Belgrano wrote:

> Good but not open source

All you have to do is ask.

I have no problem releasing it under GPL.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From philb at philb.us  Fri Oct 24 19:55:40 2008
From: philb at philb.us (Phil Barnett)
Date: Fri Oct 24 19:55:45 2008
Subject: [Harbour] A friendly reminder
Message-ID: <200810241955.41282.philb@philb.us>

Microsoft announced that they found and patched a VERY nasty rpc bug which 
allows attackers full control. If you have not done it already, please take 
the time to patch your Windows boxes up to the latest level.

Linux users may take the day off and go fishing.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From philb at philb.us  Fri Oct 24 20:02:52 2008
From: philb at philb.us (Phil Barnett)
Date: Fri Oct 24 20:02:57 2008
Subject: R: [Harbour] RE: Harbour Digest, Vol 24, Issue 104
In-Reply-To: <200810241939.37480.philb@philb.us>
References: <000001c935b0$6327dd7b$0400a8c0@deltain.net>
	<200810241939.37480.philb@philb.us>
Message-ID: <200810242002.52380.philb@philb.us>

On Friday 24 October 2008 07:39:37 pm Phil Barnett wrote:
> On Friday 24 October 2008 04:12:50 am Massimo Belgrano wrote:
> > Good but not open source
>
> All you have to do is ask.
>
> I have no problem releasing it under GPL.

I just checked and Click! does have the GPL 2 license included, so it's 
already GPL released.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From bedipritpal at hotmail.com  Sat Oct 25 00:25:58 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Oct 25 00:26:02 2008
Subject: [Harbour] Include <SomeConstants.ch> at compile time
Message-ID: <20161234.post@talk.nabble.com>


Hello Friends

Is there a way to include a disk .CH file with some
compile time switch.

I have investigated Harbour.exe switches but could find only
-d<define=value> and -I<nclude path> to be relevant to the subject.
Defining a lot of -d's are not possible for the functionality I am looking
for.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Include-%3CSomeConstants.ch%3E-at-compile-time-tp20161234p20161234.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From budyanto at centrin.net.id  Sat Oct 25 00:40:05 2008
From: budyanto at centrin.net.id (Budyanto Dj.)
Date: Sat Oct 25 00:40:18 2008
Subject: [Harbour] How to "SVN update"
Message-ID: <49030595.7134.AFE1035@localhost>

Hello,
I have successfully done SVN checkout (in several sessions) several days ago. But I can't 
do any SVN update ever since.

My command line:
SVN update https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk

The result:
Skipped 'https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk'

What can possibly be wrong?

Thanks and regards,
budyanto


From bedipritpal at hotmail.com  Sat Oct 25 01:40:29 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Oct 25 01:40:32 2008
Subject: [Harbour] How to "SVN update"
In-Reply-To: <49030595.7134.AFE1035@localhost>
References: <49030595.7134.AFE1035@localhost>
Message-ID: <20161531.post@talk.nabble.com>


Hello


Budyanto Dj. wrote:
> 
> My command line:
> SVN update
> https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk
> 
> The result:
> Skipped
> 'https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk'
> 
> What can possibly be wrong?
> 

SVN update
https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/harbour

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/How-to-%22SVN-update%22-tp20161298p20161531.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From clipper5_y2d at versateladsl.be  Sat Oct 25 03:32:00 2008
From: clipper5_y2d at versateladsl.be (frank van nuffel)
Date: Sat Oct 25 03:52:48 2008
Subject: [Harbour] Include <SomeConstants.ch> at compile time
References: <20161234.post@talk.nabble.com>
Message-ID: <45246E34B29F41AE958ECDB31012DB1D@uwlhldv32rnqu4>

Hi Pritpal,

Could it be /u<file.ch> you're looking for?  Else, but i'm not sure whether 
this is operational in Harbour, there has been mention of /u+<file.ch> (or 
was it in xHarbour; can't look it up right now) - without it you might need 
to manually #include "std.ch" from your custom <file.ch> file

kindly,

frank

----- Original Message ----- 
From: "Pritpal Bedi" <bedipritpal@hotmail.com>
To: <harbour@harbour-project.org>
Sent: Saturday, October 25, 2008 6:25 AM
Subject: [Harbour] Include <SomeConstants.ch> at compile time


>
> Hello Friends
>
> Is there a way to include a disk .CH file with some
> compile time switch.
>
> I have investigated Harbour.exe switches but could find only
> -d<define=value> and -I<nclude path> to be relevant to the subject.
> Defining a lot of -d's are not possible for the functionality I am looking
> for.
>
> Regards
> Pritpal Bedi
> -- 
> View this message in context:
> http://www.nabble.com/Include-%3CSomeConstants.ch%3E-at-compile-time-tp20161234p20161234.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From clipper5_y2d at versateladsl.be  Sat Oct 25 03:51:30 2008
From: clipper5_y2d at versateladsl.be (frank van nuffel)
Date: Sat Oct 25 03:52:54 2008
Subject: [Harbour] May be it is useful for you
References: <20150487.post@talk.nabble.com><ABC93F071F7A45E289D7E6CC09A20FC6@uwlhldv32rnqu4>
	<20156039.post@talk.nabble.com>
Message-ID: <41683AAED82D4DB0961D50D4F8A36C7B@uwlhldv32rnqu4>

Hi Pritpal,

----- Original Message ----- 
From: "Pritpal Bedi"
To: <harbour@harbour-project.org>
Sent: Friday, October 24, 2008 9:03 PM
Subject: Re: [Harbour] May be it is useful for you


> WVG or WVT both gives power to render console outpur commands
> to a TRUE Windows' window.

Do you happen to know whether this also works in Win9.x?  With ca-clipper,
i've been making use of the dimension limitless feature of xp for console
windows (combined with TameDOS), but for gradually moving to Harbour and
being backward compatible with older windows versions, i'm looking for a
console replacement, since programming Windows apps still seems not to
trigger well in my mind.  There was a neat little library by Robert A.
DiFalco, called FreshWin, that took care of console windowing needs, but of
course mimicing windows inside a true Windows window doesn't make much
sense; hence, WVG is a welcome alternative

> If you plan to have pure console output, you need not to learm more than
> two lines, perhaps. In that case you will be linking GTWVT or GTWVG
> without
> any GUI makeup. ( SEE: wvtext.prg / wvtext.exe ). GTWVG gives you the
> power
> to mix console commands with GUI elements as is evident in demowvg.prg /
> demowvg.exe.

Just two more questions: what exactly is the difference between GTWVG and
GTWVT apart from the former supporting GUI elements? And secondly, is there
any chance the api will be available in an OO fashion?  Possibly just a
class (like a namespace) with only class methods?  Could GTWVG not inherit
from GTWVT in that case?

> I am planning to include complete documentation of GTWVT in the next few
> days.
> Keep watching http://www.harbour.vouch.info space though I will declare it
> in this NG also.

Thank you for the link; i'll come back on that soon

> This mammoth feature is engineered by Przemsylaw alone.
> I only floated this idea nearly one year back with working code but with a
> different approach.
> Przemek did it in a PERFECT way far beyond my imagination.

It's good to grant appreciation, you guys are smart and visionairs in both
the big things and the small details, and working well together; could
anyone wish a better dev and usr team?  my personal little project envies
Harbour ;-)

frank


From budyanto at centrin.net.id  Sat Oct 25 04:37:00 2008
From: budyanto at centrin.net.id (Budyanto Dj.)
Date: Sat Oct 25 04:37:15 2008
Subject: [Harbour] How to "SVN update"
In-Reply-To: <20161531.post@talk.nabble.com>
References: <49030595.7134.AFE1035@localhost>
Message-ID: <49033D1C.11327.1A29C1@localhost>

On 24 Oct 2008 at 22:40, Pritpal Bedi wrote:
> 
> SVN update
> https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/harbour

Thanks Pritpal. That doesn't work either, but it causes me to read the doc more carefully :-).
It turns out that the "update" command should not be followed by the URL, but the PATH to my local 
repository instead.

For the clarity to those who gets the same problem, the correct command is:

SVN update trunk

or 

SVN update harbour

or 

SVN update trunk\harbour

depending on the working directory.

Thanks and regards,
Budyanto

From mbelgrano at deltain.it  Sat Oct 25 04:38:15 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 25 04:38:59 2008
Subject: R: [Harbour] RE: Harbour Digest, Vol 24, Issue 104
In-Reply-To: <200810241939.37480.philb@philb.us>
References: <000001c935b0$6327dd7b$0400a8c0@deltain.net>
	<200810241939.37480.philb@philb.us>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0D8@SRV02.deltain.net>

Pbmake
PBMake is a make engine, work also for Clipper, Xbase++, C and ASM
Run PBMAKE one time to create MAKE.BAT, and then...
     Make <Filename make script> [/ALL] [/D...][/D...][/D...][up to 7]
          where <Filename> is the name of the MAKE script
          where [/ALL] will cause all modules to rebuild
     have Support conditional directives
     will performing actions just before/after the compile process
     Jump to Editor on Compile Failure

   EXEFILE=DEMO\PBMAKE.EXE
   LINKFILE=DEMO.LNK
   OBJDIR=DEMO\OBJ\
   #IFNDEF DEBUG
      FLAG1= /M /N /W /Q /ES2 /DDEMO
   #ELSE
      FLAG1= /M /N /W /Q /ES2 /DDEMO /B
   #ENDIF
   SUCCESS=PKLITE DEMO\PBMAKE -E -A

We need a custom version for harbour
In my opinion is similar to brmake so I suggest Viktor and or PrzemyslaW
verify wich can be replacement for hbmake
Probably brmake is ready and tested with [x]harbour
Either are written in PRG
Either will a good make system for compile either require modification
for having same project file on multiple architecture

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Phil Barnett
Sent: Saturday, October 25, 2008 1:40 AM
To: harbour@harbour-project.org
Subject: Re: R: [Harbour] RE: Harbour Digest, Vol 24, Issue 104

On Friday 24 October 2008 04:12:50 am Massimo Belgrano wrote:

> Good but not open source

All you have to do is ask.

I have no problem releasing it under GPL.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." --
Henry 
Kissinger
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From lorenzo.fiorini at gmail.com  Sat Oct 25 04:49:07 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct 25 04:49:10 2008
Subject: [Harbour] C53b vs Harbour and VBox shared folders
Message-ID: <9257026e0810250149i33a7cb40vd684dd5ba6e486b7@mail.gmail.com>

I'm using Sun's VBox 2.0.4 under Ubuntu 8.04 with a Win2000Sp4 VM.
I use it to maintain C53b/FW16 apps and to build Harbour using
msys/mingw and I access datas that are in the host ( Ubuntu ) using
VBox's shared folders.
Now if I build the apps using C53b/Fw16 they work ( slowly ) while the
same apps ( with many #ifdef of course )  hang at start with Harbour.
If I copy the data in the VM C: drive they work of course.

I've tried to use gdb but it simply hang and often the entire VM need
to be closed.

Clearly it is not an Harbour problem but since C53b works it would be
nice to know where the "problem" can be so I could try to forward the
info to the Sun's developers.

best regards,
Lorenzo
From druzus at acn.waw.pl  Sat Oct 25 05:11:05 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 25 05:10:51 2008
Subject: [Harbour] Proposed Feature Set for Multi-Window GTs
In-Reply-To: <20158586.post@talk.nabble.com>
References: <20158586.post@talk.nabble.com>
Message-ID: <20081025091105.GA14136@34-mo7-2.acn.waw.pl>

On Fri, 24 Oct 2008, Pritpal Bedi wrote:

Hi Pritpal,

> I propose following for consoles created with hb_gtReload( 'WVG|WVT' ).
> /* Positions window at top-left position at nX,nY coordinates. 
>     ROWS/COLS be converted to pixels  */
> hb_gtInfo( HB_GTI_SETPOS, { nMode, nX|nRows, nY|nCols } )
>    nMode == HB_GTI_POS_PIXELS | HB_GTI_POS_ROWS 

We definitely need sth for Windows repositioning.
Anyhow maybe you preffer using:
   hb_gtInfo( HB_GTI_SETPOS, nMode, nX|nRows, nY|nCols )
without array? In the original version I created long ago
HB_GT_INFO structure looks:

   typedef struct
   {
      int      iParams;
      int      iReserved;
      PHB_ITEM pResult;
      PHB_ITEM pNewVal[ HB_MAX_GTINFO_PARAMS ];
   } HB_GT_INFO, * PHB_GT_INFO;

I later dropped it but I can still reactivate this code.

> /* Resizing mode and corresponding inkey() values */
> hb_gtInfo( HB_GTI_RESIZEMODE, HB_GTI_RESIZEMODE_FONT | HB_GTI_RESIZEMODE_ROWS )
>     Currently we have HB_GTI_RESIZEMODE_FONT in place. But there are instances
>     when we need resizing increasing/decreasing rows/cols instead of font.
>     If HB_GTI_RESIZEMODE_ROWS mode is in effect, Inkey() should return K_RESIZING.

Yes, I fully agree. As I can see you and Viktor added to GTWVT font
resizing instead of row/col numbers updating when user changes console
window dimensions. Very nice feature and probably more friendly to existing
Clipper code which is not ready for dynamic screen dimension modification.
Anyhow this feature is unportable to some GTs like terminal ones which
cannot control remote terminal settings. It means that with such GTs
such situation can always happen and they should help user code to make
some valid actions by reporting special event.
GTTRM and GTCRS from beginning uses K_RESIZE though in the SVN code it's
stripped just before returning to user:

   if( iKey == K_RESIZE )
   {
      gt_resize( s_ioBase );
      HB_GTSELF_RESIZE( pGT, s_ioBase->maxrow, s_ioBase->maxcol );
      iKey = 0;   // disable this like if you want to receive K_RESIZE
   }

We should create list of events which can be reported by GTs using
standard INKEY() values. RESIZE is one of such events but we can also
have others like QUIT and/or CLOSE, HIDE, SHOW, FOCUSIN, FOCUSOUT, etc.

> /* To force current GT as modal to pGT */
> hb_gtInfo( HB_GTI_MODAL, pGT ) 
>     May be we need this feature in hb_gtCreate() protocol.
> 

> /* To suppress console output */
> hb_gtInfo( HB_GTI_NOCONSOLE, TRUE )
>     Sometimes a window is needed for only GUI components.

OK though maybe it will be better to implement sth like LOCKAREA
to block console output in specified region.
BTW GTWVT redraw screen using data from base character screen buffer.
GTWVG creates intermediate image so data from screen buffer is written
to this image and to the window. On refresh they are copied from image
to window. We can very easy add such functionality to GTWVT as an option
and it should be even more efficient. Just simply REFRESH/REDRAW will
check if hScrImg exists and if yes then it will draw the screen data
into it like hb_gt_wvt_PaintText(). Inside window procedure we will
change WM_PAINT action and if hScrImg exists then instead of redrawing
screen buffer it will simply copy hScrImg area to window.
It should give the same as GTWVG functionality but faster (we eliminate
double screen buffer redrawing) and much easier to control by user.

Then it should be quite easy to change GTWVG and instead of replicating
GTWVT code it will simply inherit from GTWVT. Just like now GTCTW can
inherit from any other GT adding CT-Window functionality.

> May be above attributes are required before Window is created, so some sort
> of HB_NOSTARTUPWINDOW functionality be implemented.

Here we should introduce only one parameter which will inform GT that
it should not show new GT window so after initializing new GT user can
make all necessary settings.
GTXWC has such functionality by default because it always create console
window with 1-st screen update or when user request some information
which needs this window activate. It resolves the problem but in some
GTs it may be hard to implement such functionality. So I'll add parameter
to INIT() methods which will inform GT if it should show or not console
window. When user will want to make some additional setting then he will
ask to not show the window, set them and finally make window visible.
Defining parameters which should be set before window initialization is
not good idea because such list can still grow up.

best regards,
Przemek
From maurilio.longo at libero.it  Sat Oct 25 05:23:45 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Sat Oct 25 05:23:53 2008
Subject: [Harbour] C53b vs Harbour and VBox shared folders
In-Reply-To: <9257026e0810250149i33a7cb40vd684dd5ba6e486b7@mail.gmail.com>
References: <9257026e0810250149i33a7cb40vd684dd5ba6e486b7@mail.gmail.com>
Message-ID: <4902E5A1.20403@libero.it>

Lorenzo,

enable a full trace doc\tracing.txt, so you'll see more or less which
operation locks up (I'd say locking of records is the first candidate).

Best regards.

Maurilio.

Lorenzo Fiorini wrote:
> I'm using Sun's VBox 2.0.4 under Ubuntu 8.04 with a Win2000Sp4 VM.
> I use it to maintain C53b/FW16 apps and to build Harbour using
> msys/mingw and I access datas that are in the host ( Ubuntu ) using
> VBox's shared folders.
> Now if I build the apps using C53b/Fw16 they work ( slowly ) while the
> same apps ( with many #ifdef of course )  hang at start with Harbour.
> If I copy the data in the VM C: drive they work of course.
> 
> I've tried to use gdb but it simply hang and often the entire VM need
> to be closed.
> 
> Clearly it is not an Harbour problem but since C53b works it would be
> nice to know where the "problem" can be so I could try to forward the
> info to the Sun's developers.
> 
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From mbelgrano at deltain.it  Sat Oct 25 05:42:01 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 25 05:42:45 2008
Subject: [Harbour] Proposed Feature Set for Multi-Window GTs
In-Reply-To: <20158586.post@talk.nabble.com>
References: <20158586.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0DA@SRV02.deltain.net>

What do you think having a scrollable area in GT?
Mobile device and tomorrow internet will require this capability
Physical area is more small that logical
Gt window will USE horizontal and vertical scroll bar
As Physical SET BY HB_GTI_SETPOS (Have 10 row ,40 column)
As logical  SET BY HB_GTI_LAREA  (Have 20 row ,80 column)
The resize will work when Physical and logical are same (default
behavior)

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
Sent: Saturday, October 25, 2008 12:08 AM
To: harbour@harbour-project.org
Subject: [Harbour] Proposed Feature Set for Multi-Window GTs


Hello,

I propose following for consoles created with hb_gtReload( 'WVG|WVT' ).

/* Positions window at top-left position at nX,nY coordinates. 
    ROWS/COLS be converted to pixels  */
hb_gtInfo( HB_GTI_SETPOS, { nMode, nX|nRows, nY|nCols } )
   nMode == HB_GTI_POS_PIXELS | HB_GTI_POS_ROWS 

/* Resizing mode and corresponding inkey() values */
hb_gtInfo( HB_GTI_RESIZEMODE, HB_GTI_RESIZEMODE_FONT |
HB_GTI_RESIZEMODE_ROWS )
    Currently we have HB_GTI_RESIZEMODE_FONT in place. But there are
instances
    when we need resizing increasing/decreasing rows/cols instead of
font.
    If HB_GTI_RESIZEMODE_ROWS mode is in effect, Inkey() should return
K_RESIZING.

/* To force current GT as modal to pGT */
hb_gtInfo( HB_GTI_MODAL, pGT ) 
    May be we need this feature in hb_gtCreate() protocol.

/* To suppress console output */
hb_gtInfo( HB_GTI_NOCONSOLE, TRUE )
    Sometimes a window is needed for only GUI components.

May be above attributes are required before Window is created, so some
sort
of
HB_NOSTARTUPWINDOW functionality be implemented.

More to follow.

Regards
Pritpal Bedi
 
-- 
View this message in context:
http://www.nabble.com/Proposed-Feature-Set-for-Multi-Window-GTs-tp201585
86p20158586.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Sat Oct 25 06:44:49 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 25 06:44:34 2008
Subject: [Harbour] C53b vs Harbour and VBox shared folders
In-Reply-To: <4902E5A1.20403@libero.it>
References: <9257026e0810250149i33a7cb40vd684dd5ba6e486b7@mail.gmail.com>
	<4902E5A1.20403@libero.it>
Message-ID: <20081025104448.GA28021@34-mo7-2.acn.waw.pl>

On Sat, 25 Oct 2008, Maurilio Longo wrote:

Hi,

> enable a full trace doc\tracing.txt, so you'll see more or less which
> operation locks up (I'd say locking of records is the first candidate).

I also think that file locking is 1-st candidate.
Try to isolate the problem with small example which
creates/open DBF with indexes.

best regards,
Przemek
From druzus at acn.waw.pl  Sat Oct 25 06:48:25 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 25 06:48:10 2008
Subject: [Harbour] Proposed Feature Set for Multi-Window GTs
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F0DA@SRV02.deltain.net>
References: <20158586.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815F0DA@SRV02.deltain.net>
Message-ID: <20081025104825.GB28021@34-mo7-2.acn.waw.pl>

On Sat, 25 Oct 2008, Massimo Belgrano wrote:

Hi Massimo,

> What do you think having a scrollable area in GT?

GTWIN already has such functionality in W2K, XP and later Windows
versions.

> Mobile device and tomorrow internet will require this capability
> Physical area is more small that logical
> Gt window will USE horizontal and vertical scroll bar
> As Physical SET BY HB_GTI_SETPOS (Have 10 row ,40 column)
> As logical  SET BY HB_GTI_LAREA  (Have 20 row ,80 column)
> The resize will work when Physical and logical are same (default
> behavior)

Such functionality without any doubts is usable and I hope it will
be added to GTWVT but I would like to leave it for Windows developers.

best regards,
Przemek
From druzus at acn.waw.pl  Sat Oct 25 06:58:17 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 25 06:58:03 2008
Subject: [Harbour] 2008-10-25 12:58 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081025105817.GA12374@34-mo7-2.acn.waw.pl>

2008-10-25 12:58 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtwvt/gtwvt.h
  * harbour/source/rtl/gtwvt/gtwvt.c
    * eliminated few static variables
    ! fixed possible race condition when new window is created by adding
      mutex protection

best regards
Przemek
From e.m.giordano at emagsoftware.it  Sat Oct 25 07:16:39 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Oct 25 07:16:44 2008
Subject: [Harbour] A friendly reminder
References: <200810241955.41282.philb@philb.us>
Message-ID: <AF612EE7613447FC9E1BBF140C1E22AA@emag>


-----Messaggio Originale----- 
Da: "Phil Barnett" <philb@philb.us>
A: <Harbour@harbour-project.org>; <Leaplist@leap-cf.org>
Data invio: sabato 25 ottobre 2008 1.55
Oggetto: [Harbour] A friendly reminder


> Microsoft announced that they found and patched a VERY nasty rpc bug which
> allows attackers full control. If you have not done it already, please 
> take
> the time to patch your Windows boxes up to the latest level.

Done, thank you.

> Linux users may take the day off and go fishing.

:-)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From mbelgrano at deltain.it  Sat Oct 25 07:19:22 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 25 07:20:05 2008
Subject: [Harbour] Proposed Feature Set for Multi-Window GTs
In-Reply-To: <20081025104825.GB28021@34-mo7-2.acn.waw.pl>
References: <20158586.post@talk.nabble.com><AFB948164110ED43B5EB849E8DEEF03815F0DA@SRV02.deltain.net>
	<20081025104825.GB28021@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0DB@SRV02.deltain.net>

Sorry How can i activate?

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Saturday, October 25, 2008 12:48 PM
To: Harbour Project Main Developer List.
Subject: Re: RE: [Harbour] Proposed Feature Set for Multi-Window GTs

On Sat, 25 Oct 2008, Massimo Belgrano wrote:

Hi Massimo,

> What do you think having a scrollable area in GT?

GTWIN already has such functionality in W2K, XP and later Windows
versions.

> Mobile device and tomorrow internet will require this capability
> Physical area is more small that logical
> Gt window will USE horizontal and vertical scroll bar
> As Physical SET BY HB_GTI_SETPOS (Have 10 row ,40 column)
> As logical  SET BY HB_GTI_LAREA  (Have 20 row ,80 column)
> The resize will work when Physical and logical are same (default
> behavior)

Such functionality without any doubts is usable and I hope it will
be added to GTWVT but I would like to leave it for Windows developers.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Sat Oct 25 07:39:08 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 25 07:39:52 2008
Subject: [Harbour] Xbase++  go to visual fox pro
In-Reply-To: <20081024195649.GB32241@34-mo7-2.acn.waw.pl>
References: <20081024124915.GA5682@34-mo7-2.acn.waw.pl><AFB948164110ED43B5EB849E8DEEF03815F0CF@SRV02.deltain.net>
	<20081024195649.GB32241@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0DC@SRV02.deltain.net>

SQL SELECT is one of the most versatile command available to Visual FoxPro programmer

SELECT [ALL | DISTINCT] [TOP nExpr [PERCENT]] Select_List_Item [, ...]
   FROM [FORCE] Table_List_Item [, ...]
      [[JoinType] JOIN DatabaseName!]Table [[AS] Local_Alias]
      [ON JoinCondition [AND | OR [JoinCondition | FilterCondition] ...] 
   [WITH (BUFFERING = lExpr)]
   [WHERE JoinCondition | FilterCondition [AND | OR JoinCondition | FilterCondition] ...]
   [GROUP BY Column_List_Item [, ...]] [HAVING FilterCondition [AND | OR ...]]
   [UNION [ALL] SELECTCommand]
   [ORDER BY Order_Item [ASC | DESC] [, ...]]
   [INTO StorageDestination | TO DisplayDestination]
   [PREFERENCE PreferenceName] [NOCONSOLE] [PLAIN] [NOWAIT]
Retrieves data from one or more tables. When you use SQL SELECT to create a query, Visual FoxPro parses the query and retrieves the specified data from the tables. You can create a SQL SELECT query from the Command window, in a Visual FoxPro program

After a select is made, the cursor remains open only for reading. so can it be modified again and again?"
There is a READWRITE clause in VFP from ver 7, if that's what you are using, that enables you to create the cursor as writeable:
SELECT * FROM MyTable ;
WHERE .... ;
INTO CURSOR SomeCursor ;
READWRITE

But if you are using earlier versions of VFP, you can do something like:
SELECT * FROM MyTable ;
WHERE .... ;
INTO CURSOR SomeCursor 
SELECT 0
USE DBF('SomeCursor') AGAIN ALIAS NewAlias
Select cannot be used to open a table.  A table must be opened first ( via the Use command is one way but there are others. ) and SELECT allows you to returned to an already open table.
VFP can have many tables open at one time; each table is contained in a workspace
http://weblogs.foxite.com/andykramek/archive/2005/09/18/921.aspx


CLOSE ALL
CLOSE DATABASES
OPEN DATABASE (HOME(2) + 'Data\TestData')
SELECT TAlias1.company, TAlias2.order_date, TAlias2.shipped_on ;
   FROM customer TAlias1, orders TAlias2 ;
   WHERE TAlias1.cust_id = TAlias2.cust_id ;
   INTO TABLE custship.dbf
BROWSE



*!* This sample uses the Customer table in:
*!* VFP 3/5 -- HOME() + "Samples\Data"
*!* VFP 6 -- HOME(2) + "Data"
SET TALK OFF     && stop echo to screen
x="Country"
y="UK"
SELECT * ;
   FROM CUSTOMER;
   HAVING EVALUATE(x)=(y);
   INTO CURSOR crsrUK
BROWSE


Fox will access to odbc with sql parameter but imo this is a different argument
&& Connect to an ODBC data source
LOCAL nHnd
nHnd = SQLCONNECT ("ODBCDSN", "user", "pwd")
 
&& Execute a SQL command
LOCAL nResult
nResult = SQLEXEC (nHnd, "USE master")
IF nResult < 0
  MESSAGEBOX ("MASTER database does not exist!")
  RETURN
ENDIF
 
&& Retrieve data from the remote server and stores it in
&& a local data cursor
nResult = SQLEXEC (nHnd, "SELECT * FROM authors", "QAUTHORS")
 
&& Update a record in a remote table using parameters
LOCAL cAuthorID, cAuthorName
cAuthorID = "1001"
cAuthorName = "New name"
nResult = SQLEXEC (nHnd, "UPDATE authors SET auth_name = ?cAuthorName WHERE auth_id = ?cAuthorID")
 
&& Close the connection
SQLDISCONNECT(nHnd)


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Friday, October 24, 2008 9:57 PM
To: Harbour Project Main Developer List.
Subject: Re: RE: RE: [Harbour] Xbase++ go to visual fox pro

On Fri, 24 Oct 2008, Massimo Belgrano wrote:

Hi Massimo,
I'm sorry but I do not know what this code does.
I want to implement pure SQL support for Harbour. The controls
and visual elements has nothing to do with it.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From budyanto at centrin.net.id  Sat Oct 25 07:45:10 2008
From: budyanto at centrin.net.id (Budyanto Dj.)
Date: Sat Oct 25 07:45:24 2008
Subject: [Harbour] Multiwin (tests/gtwin.prg)
Message-ID: <49036936.2675.C6706A@localhost>

Hi Przemek,

Thanks for these GREAT innovations of yours. I am now having a big hope into the future :-)

After learning some of your test programs, I have some notes though.
In your tests/gtwin.prg I learn this:

pGT1 := hb_gtCreate( THREAD_GT )

which opens a new GT/window.

And then later:

pGT1 := NIL

to destroy the GT/window.

Please excuse my ignorance..., but what do you think about hb_gtDestroy(pGT1) instead of 
this NIL assignment?

Closing a window by assigning NIL to a local variable looks very strange to me.
In fact to close the window I can assign anything to pGT1: 1234, "ABCDE", {}, anything.
Isn't it a bit "dangerous?"

Another strange situation:

//assign pGT1 to another var:
a := pGT1

//this won't close the window now:
pGT1 := NIL 

//but this will:
a := NIL 

Strange isn't it?

regards,
budyanto

From mbelgrano at deltain.it  Sat Oct 25 09:11:21 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 25 09:12:04 2008
Subject: [Harbour] Proposed Feature Set for Multi-Window GTs
In-Reply-To: <20081025091105.GA14136@34-mo7-2.acn.waw.pl>
References: <20158586.post@talk.nabble.com>
	<20081025091105.GA14136@34-mo7-2.acn.waw.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0DD@SRV02.deltain.net>

>OK though maybe it will be better to implement sth like LOCKAREA
>to block console output in specified region.
>BTW GTWVT redraw screen using data from base character screen buffer.
>GTWVG creates intermediate image so data from screen buffer is written
>to this image and to the window. On refresh they are copied from image
>to window. We can very easy add such functionality to GTWVT as an option
>and it should be even more efficient. Just simply REFRESH/REDRAW will
>check if hScrImg exists and if yes then it will draw the screen data
>into it like hb_gt_wvt_PaintText(). Inside window procedure we will
>change WM_PAINT action and if hScrImg exists then instead of redrawing
>screen buffer it will simply copy hScrImg area to window.
>It should give the same as GTWVG functionality but faster (we eliminate
>double screen buffer redrawing) and much easier to control by user.

>Then it should be quite easy to change GTWVG and instead of replicating
>GTWVT code it will simply inherit from GTWVT. Just like now GTCTW can
>inherit from any other GT adding CT-Window functionality.

Your way for having better refresh seem very good.
Can please better explain how a GT will Inerith from GTWVT istead replicating code?

From mbelgrano at deltain.it  Sat Oct 25 09:37:57 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 25 09:38:40 2008
Subject: [Harbour] Multiwin (tests/gtwin.prg)
In-Reply-To: <49036936.2675.C6706A@localhost>
References: <49036936.2675.C6706A@localhost>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0DE@SRV02.deltain.net>

Hi budyanto 

Hbcreate Return a reference to a object something like will happen in
CreateObject(
Also in visial foxpro can used object for form/windows
loForm = CREATEOBJECT("HiForm")
loForm.Show(1)
 
DEFINE CLASS HiForm AS Form
  AutoCenter = .T.
  Caption = "Hello, World"
 
  ADD OBJECT lblHi as Label WITH ;
    Caption = "Hello, World!"
ENDDEFINE


my compliment to author of GTWVW your library have given multiwindow
same year ago
regards
Massimo Belgrano

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Budyanto Dj.
Sent: Saturday, October 25, 2008 1:45 PM
To: harbour Project Main Developer List.
Subject: [Harbour] Multiwin (tests/gtwin.prg)

Hi Przemek,

Thanks for these GREAT innovations of yours. I am now having a big hope
into the future :-)

After learning some of your test programs, I have some notes though.
In your tests/gtwin.prg I learn this:

pGT1 := hb_gtCreate( THREAD_GT )

which opens a new GT/window.

And then later:

pGT1 := NIL

to destroy the GT/window.

Please excuse my ignorance..., but what do you think about
hb_gtDestroy(pGT1) instead of 
this NIL assignment?

Closing a window by assigning NIL to a local variable looks very strange
to me.
In fact to close the window I can assign anything to pGT1: 1234,
"ABCDE", {}, anything.
Isn't it a bit "dangerous?"

Another strange situation:

//assign pGT1 to another var:
a := pGT1

//this won't close the window now:
pGT1 := NIL 

//but this will:
a := NIL 

Strange isn't it?

regards,
budyanto

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Sat Oct 25 09:45:29 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 25 09:45:36 2008
Subject: [Harbour] Proposed Feature Set for Multi-Window GTs
In-Reply-To: <20081025091105.GA14136@34-mo7-2.acn.waw.pl>
References: <20158586.post@talk.nabble.com>
	<20081025091105.GA14136@34-mo7-2.acn.waw.pl>
Message-ID: <C1201C20-1055-4761-937B-0D12707D72AF@syenar.hu>

>
Hi Przemek,

>   typedef struct
>   {
>      int      iParams;
>      int      iReserved;
>      PHB_ITEM pResult;
>      PHB_ITEM pNewVal[ HB_MAX_GTINFO_PARAMS ];
>   } HB_GT_INFO, * PHB_GT_INFO;
>
> I later dropped it but I can still reactivate this code.

This would be a nice addition IMO.

>   if( iKey == K_RESIZE )
>   {
>      gt_resize( s_ioBase );
>      HB_GTSELF_RESIZE( pGT, s_ioBase->maxrow, s_ioBase->maxcol );
>      iKey = 0;   // disable this like if you want to receive K_RESIZE
>   }
>
> We should create list of events which can be reported by GTs using
> standard INKEY() values. RESIZE is one of such events but we can also
> have others like QUIT and/or CLOSE, HIDE, SHOW, FOCUSIN, FOCUSOUT,  
> etc.

May I suggest to mark these extendend event as K_HB_* or
HB_K_* to clearly separate them from regular inkey codes?

Also, we should think (or rethink) the current event
notification feature because we could either use it
for this purpose, or drop it, or make some rules which
to use when, but using them randomly is not a very good idea.

> Here we should introduce only one parameter which will inform GT that
> it should not show new GT window so after initializing new GT user can
> make all necessary settings.
> GTXWC has such functionality by default because it always create  
> console
> window with 1-st screen update or when user request some information
> which needs this window activate. It resolves the problem but in some
> GTs it may be hard to implement such functionality. So I'll add  
> parameter
> to INIT() methods which will inform GT if it should show or not  
> console
> window. When user will want to make some additional setting then he  
> will
> ask to not show the window, set them and finally make window visible.
> Defining parameters which should be set before window initialization  
> is
> not good idea because such list can still grow up.

Would it be possible to make the initialization on the
first screen paint with GTWVT, too?

I guess this could also (or partially) solve the problem
where currently simple STDOUT/STDERR functions simply
don't work when used with BCC/MSVC. MinGW also behaves
strangely.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Oct 25 09:49:09 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 25 09:49:16 2008
Subject: [Harbour] Multiwin (tests/gtwin.prg)
In-Reply-To: <49036936.2675.C6706A@localhost>
References: <49036936.2675.C6706A@localhost>
Message-ID: <33A61FA0-C791-4595-989C-C0CFC5120482@syenar.hu>

Hi,

IMO this method is better, because the C object will
be automatically destroyed when the var goes out of
scope. Basically there is no need to manually destroy
the object so there is also no possibility to forget
it by mistake and cause resource/memory leakage.

This is a very nice feature of hb_retptrGC().

Brgds,
Viktor

On 2008.10.25., at 13:45, Budyanto Dj. wrote:

> Hi Przemek,
>
> Thanks for these GREAT innovations of yours. I am now having a big  
> hope into the future :-)
>
> After learning some of your test programs, I have some notes though.
> In your tests/gtwin.prg I learn this:
>
> pGT1 := hb_gtCreate( THREAD_GT )
>
> which opens a new GT/window.
>
> And then later:
>
> pGT1 := NIL
>
> to destroy the GT/window.
>
> Please excuse my ignorance..., but what do you think about  
> hb_gtDestroy(pGT1) instead of
> this NIL assignment?
>
> Closing a window by assigning NIL to a local variable looks very  
> strange to me.
> In fact to close the window I can assign anything to pGT1: 1234,  
> "ABCDE", {}, anything.
> Isn't it a bit "dangerous?"
>
> Another strange situation:
>
> //assign pGT1 to another var:
> a := pGT1
>
> //this won't close the window now:
> pGT1 := NIL
>
> //but this will:
> a := NIL
>
> Strange isn't it?
>
> regards,
> budyanto
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sat Oct 25 09:51:49 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 25 09:51:55 2008
Subject: [Harbour] GTWVG (GTWVT?) window refresh problems.
Message-ID: <C5675000-741B-4E77-A45A-F5781DCF6DB6@syenar.hu>

Hi folks,

I've noticed very bad screen refresh problems with
DEMOWVG when moving one window with another one in
the background. Also, with GTWVT there might still
be situations when screen gets "locked" while longer
programming tasks are running (especially with -gc3
I guess).

I'm not sure if this is the same problem, but it
would nice solve this somehow.

Brgds,
Viktor

From cvc at oohg.org  Sat Oct 25 11:51:43 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Sat Oct 25 11:51:53 2008
Subject: [Harbour] about letodb build
Message-ID: <4903408F.90007@oohg.org>


Hi all:

I didn't  build rddleto from current cvs.


MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
	C:\c2w\BCC55\BIN\BCC32.EXE -c -O2 -tW -M 
-IC:\c2w\BCC55\INCLUDE;C:\c2w\harbour\INCLUDE;C:\minioop\INCLUDE;C:\letodb\source\client;C:\letodb\source\client;C:\letodb\source\common;C:\letodb\include 
-LC:\c2w\BCC55\LIB -oC:\letodb\source\client\OBJO1BH\leto1.obj 
C:\letodb\source\client\OBJO1BH\leto1.c
Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
C:\letodb\source\client\OBJO1BH\leto1.c:
Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 342: Undefined symbol 
'hb_cdp_page' in function leto_ConnectionNew
Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 342: Undefined symbol 
'hb_set' in function leto_ConnectionNew
Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 915: Undefined symbol 
'hb_set' in function letoGoBottom
Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 940: Undefined symbol 
'hb_set' in function letoGoTo
Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 981: Undefined symbol 
'hb_set' in function letoGoTop
Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 1021: Undefined symbol 
'hb_cdp_page' in function letoKeyToStr
Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 1047: Undefined symbol 
'hb_set' in function letoSeek
Warning W8057 C:\letodb\source\client\OBJO1BH\leto1.c 1082: Parameter 
'bSoftSeek' is never used in function letoSeek
Warning W8057 C:\letodb\source\client\OBJO1BH\leto1.c 1082: Parameter 
'bFindLast' is never used in function letoSeek
Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 1151: Undefined symbol 
'hb_set' in function letoSkipRaw
Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 1313: Undefined symbol 
'hb_cdp_page' in function letoGetMemoValue
Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 1343: Undefined symbol 
'hb_cdp_page' in function letoGetValue
Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 1537: Undefined symbol 
'hb_cdp_page' in function letoPutMemoValue
Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 1587: Undefined symbol 
'hb_cdp_page' in function letoPutValue
Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 2107: Undefined symbol 
'hb_set' in function letoOpenConnection
Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 2122: Undefined symbol 
'hb_set' in function letoOpenConnection
Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 2267: Undefined symbol 
'hb_cdp_page' in function letoCreate
Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 2363: Undefined symbol 
'HARBOUR_MAX_RDD_ALIAS_LENGTH' in function letoOpen
Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 2428: Undefined symbol 
'hb_cdp_page' in function letoOpen
Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 2520: Undefined symbol 
'hb_set' in function letoOpen
Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 2562: Undefined symbol 
'HARBOUR_MAX_RDD_DRIVERNAME_LENGTH' in function letoSysName
Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 3834: Undefined symbol 
'hb_set' in function HB_FUN_LETO_SUM
*** 20 errors in Compile ***

regards
Ciro


-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From bedipritpal at hotmail.com  Sat Oct 25 12:37:13 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Oct 25 12:37:16 2008
Subject: [Harbour] 2008-10-25 09:35 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20165735.post@talk.nabble.com>


2008-10-25 09:35 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/gtwvg.c
  * harbour/contrib/gtwvg/gtwvg.h
    ! Updated to honor latest changes in GTWVT.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-10-25-09%3A35-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20165735p20165735.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From m.lacecilia at gmail.com  Sat Oct 25 13:25:19 2008
From: m.lacecilia at gmail.com (Maurizio la Cecilia)
Date: Sat Oct 25 13:25:28 2008
Subject: [Harbour] Memory blocks not released
Message-ID: <!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAANaQvgrJIIJPrtGzldqwaDwBAAAAAA==@gmail.com>

I'm investigating about a problem of Harbour CVS not releasing memory of
unused modules.
This happens constantly when a program linked with HwGUI opens and closes a
dialog window (main windows not are affected).
Same program compiled with last stable Harbour version releases correctly
the memory.
Maybe some memory management used by the destroy method of dialogs is wasted
after the last MT changes.
If i'll find some more precise info i'll tell ASAP.

Note: to reproduce the error it's sufficient to build the
\hwgui\samples\all\a.prg (with command: "bld a" executed form same folder of
prg), but before is needed to add the line:
 
Maurizio la Cecilia               
                               

From m.lacecilia at gmail.com  Sat Oct 25 13:29:05 2008
From: m.lacecilia at gmail.com (Maurizio la Cecilia)
Date: Sat Oct 25 13:29:14 2008
Subject: [Harbour] (no subject)
Message-ID: <!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAANKyijh9r/xPpQ9KEDchKlABAAAAAA==@gmail.com>

Sorry for the msg sent befor the completion....
This was the end of text:

Note: to reproduce the error it's sufficient to build the
\hwgui\samples\all\a.prg (with command: "bld a" executed form same folder of
prg), but before is needed to add the line:
   SET( _SET_HBOUTLOG, somefilename, .t. )
at the start the prg and test how the output varies between cvs and stable
version.

Best regards.

Maurizio la Cecilia 


From bedipritpal at hotmail.com  Sat Oct 25 14:45:31 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Oct 25 14:45:37 2008
Subject: [Harbour] Proposed Feature Set for Multi-Window GTs - II
Message-ID: <20166811.post@talk.nabble.com>


Hello Przemek, Viktor, Massimo

>hb_gtInfo( HB_GTI_SETPOS, { nMode, nX|nRows, nY|nCols } ) 

>>  hb_gtInfo( HB_GTI_SETPOS, nMode, nX|nRows, nY|nCols ) 
without array? In the original version I created long ago 
HB_GT_INFO structure looks: 

   typedef struct 
   { 
      int      iParams; 
      int      iReserved; 
      PHB_ITEM pResult; 
      PHB_ITEM pNewVal[ HB_MAX_GTINFO_PARAMS ]; 
   } HB_GT_INFO, * PHB_GT_INFO; 


>>> This would be a nice addition IMO. 


+1


> hb_gtInfo( HB_GTI_RESIZEMODE, HB_GTI_RESIZEMODE_FONT |
> HB_GTI_RESIZEMODE_ROWS ) 

>> Yes, I fully agree. As I can see you and Viktor added to GTWVT font 
   resizing instead of row/col numbers updating when user changes console 
   window dimensions. Very nice feature and probably more friendly to
existing 
   Clipper code which is not ready for dynamic screen dimension
modification. 
   ...
   ...
   We should create list of events which can be reported by GTs using 
   standard INKEY() values. RESIZE is one of such events but we can also 
   have others like QUIT and/or CLOSE, HIDE, SHOW, FOCUSIN, FOCUSOUT, etc. 


>>> May I suggest to mark these extendend event as K_HB_* or 
    HB_K_* to clearly separate them from regular inkey codes? 

    Also, we should think (or rethink) the current event 
    notification feature because we could either use it 
    for this purpose, or drop it, or make some rules which 
    to use when, but using them randomly is not a very good idea. 


Przemek, I agree with you that we should cover neccessary ( if not all )
events notifications via INKEY(). I also propose to fire user
defined function/block, if one is associated with an event.
I will explain later why it is useful to press my viewpoint.
I have done it in GTWVG but only for few events and with fixed
PRG defined function symbols. I wanted this to be in dynamic way
which unfortunately I could not devise. Then Viktor rescued it
with HB_GTI_NOTIFIERBLOCK. Now I wish to notify all events this way
which at the moment are limited to few.

I disagree with K_HB_* or HB_K_* namespace. Why we want users to 
remember one more way of using Clipper syntax. We simply document
the K_* constants. When I introduced K_MBUTTONDOWN ~ K_NCMOUSEMOVE 
these were accepted as natural extensions required for GT in 
question and now are considered the de-facto standard.
Any programmer looking for extended functionality with certainly
be aware of new constants to take advantage in his applications.
He he/she does not want to he can live with existing code.
Harbour has set few standards and now is the need to extend them
in natural syntax way.

My proposed INKEY codes are:

K_RESIZE                   1101
K_RESIZING                 1102
K_SETFOCUS  | K_FOCUSIN    1103
K_KILLFOCUS | K_FOCUSOUT   1104
K_BEGINPAINT               1105
K_ENDPAINT                 1106
K_TIMER                    1107


> hb_gtInfo( HB_GTI_MODAL, pGT ) 

Still unanswered. This is very useful and required feature.
It will unleash true Windows functionality.


> hb_gtInfo( HB_GTI_NOCONSOLE, TRUE ) 

>> OK though maybe it will be better to implement sth like LOCKAREA 
   to block console output in specified region. 
   BTW GTWVT redraw screen using data from base character screen buffer. 
   GTWVG creates intermediate image so data from screen buffer is written 
   to this image and to the window. On refresh they are copied from image 
   to window. We can very easy add such functionality to GTWVT as an option 
   and it should be even more efficient. Just simply REFRESH/REDRAW will 
   check if hScrImg exists and if yes then it will draw the screen data 
   into it like hb_gt_wvt_PaintText(). Inside window procedure we will 
   change WM_PAINT action and if hScrImg exists then instead of redrawing 
   screen buffer it will simply copy hScrImg area to window. 
   It should give the same as GTWVG functionality but faster (we eliminate 
   double screen buffer redrawing) and much easier to control by user. 

Excellent idea. I would like if you take a little time to get
it working. I suspect the way I am handelling the situation in
GTWVG is a little buggy, though I could never locate. I am sure you 
will do it in a perfect way.


>> Then it should be quite easy to change GTWVG and instead of replicating 
   GTWVT code it will simply inherit from GTWVT. Just like now GTCTW can 
   inherit from any other GT adding CT-Window functionality. 

>From the core of my heart I want this. If it happens then time spent
of double efforts can be utilized for better things.


> May be above attributes are required before Window is created, so some
> sort 
> of HB_NOSTARTUPWINDOW functionality be implemented. 

>> Here we should introduce only one parameter which will 
   inform GT that it should not show new GT window so after 
   initializing new GT user can make all necessary settings. 
   GTXWC has such functionality by default because it always create 
   console window with 1-st screen update or when user request some 
   information which needs this window activate. It resolves the problem 
   but in some GTs it may be hard to implement such functionality. 
   So I'll add parameter to INIT() methods which will inform GT if 
   it should show or not console window. When user will want to make 
   some additional setting then he will ask to not show the window, 
   set them and finally make window visible. Defining parameters 
   which should be set before window initialization is not good idea 
   because such list can still grow up. 

>>> Would it be possible to make the initialization on the 
    first screen paint with GTWVT, too? 

    I guess this could also (or partially) solve the problem 
    where currently simple STDOUT/STDERR functions simply 
    don't work when used with BCC/MSVC. MinGW also behaves 
    strangely. 

This funtionality as 'first screen paint' methodology may
interfere under certain situations as WN_PAINT message is not
under program control. This may be the possible scenario:

1  gt_reLoad( 'WVT', FALSE )
   hb_gtInfo( ... )
   SetMode( r,c )
   SetColor( 'n/w' )
   CLS
   gt_Show()              // Window goes Visible

2  gt_reLoad( 'WVT' )
   hb_gtInfo( ... )
   SetMode( r,c )
   SetColor( 'n/w' )
   CLS                    // Window goes Visible . First paint request

I am not sure how 2nd option can be implemented.



> What do you think having a scrollable area in GT? 

>> GTWIN already has such functionality in W2K, XP and later 
   Windows versions. 


> Mobile device and tomorrow internet will require this capability 
> Physical area is more small that logical 
> Gt window will USE horizontal and vertical scroll bar 
> As Physical SET BY HB_GTI_SETPOS (Have 10 row ,40 column) 
> As logical  SET BY HB_GTI_LAREA  (Have 20 row ,80 column) 
> The resize will work when Physical and logical are same (default 
> behavior) 

>> Such functionality without any doubts is usable and I hope it will 
>> be added to GTWVT but I would like to leave it for Windows developers. 

Can you guide us in right direction. Few hints will be enough.
I think Budyanto implemented some kind of this functionality in
GTWVW. Budyanto ?


Regards
Pritpal Bedi




-- 
View this message in context: http://www.nabble.com/Proposed-Feature-Set-for-Multi-Window-GTs---II-tp20166811p20166811.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sat Oct 25 15:30:53 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 25 15:31:00 2008
Subject: [Harbour] Proposed Feature Set for Multi-Window GTs - II
In-Reply-To: <20166811.post@talk.nabble.com>
References: <20166811.post@talk.nabble.com>
Message-ID: <2A064D1D-4A6E-4290-9CEE-94BF806B5A8F@syenar.hu>

>
Hi Pritpal,

> I disagree with K_HB_* or HB_K_* namespace. Why we want users to
> remember one more way of using Clipper syntax. We simply document
> the K_* constants. When I introduced K_MBUTTONDOWN ~ K_NCMOUSEMOVE

No one has to remember anything, since this
will be a brand new feature to learn. Namespaces
are still needed for the same reason we've been
using them in all other places.

For example I have some K_* codes already defined
locally, other developers may also have such, and
it would be nice to avoid possible collisions with
existing user code. Not to mention how more easy
is to find non-portable Harbour code by grep-ing
to HB_K_* names instead of trying to find them
one by one.

Lastly, these won't be key presses anymore, so
it's good to make a difference in the name too.

I'd suggest K_HB_* prefix for Harbour extensions,
and K_HB_EVENT_* in case we opt for extending
keypresses with such stuff.

> these were accepted as natural extensions required for GT in
> question and now are considered the de-facto standard.
> Any programmer looking for extended functionality with certainly
> be aware of new constants to take advantage in his applications.
> He he/she does not want to he can live with existing code.
> Harbour has set few standards and now is the need to extend them
> in natural syntax way.
>
> My proposed INKEY codes are:
>
> K_RESIZE                   1101
> K_RESIZING                 1102
> K_SETFOCUS  | K_FOCUSIN    1103
> K_KILLFOCUS | K_FOCUSOUT   1104
> K_BEGINPAINT               1105
> K_ENDPAINT                 1106
> K_TIMER                    1107

I don't agree with these. We already have
the event notification for them. I'd suggest
to define the needs and implement each
event where they are indeed needed, and
avoid triggering all sorts of parallel
events ("keypress", "event notifications",
user defined blocks and else) for these.

Also notice that some kind of masking
will be necessary, and it should be on
by default to not disturb existing code
not expecting such codes.

I'd also strongly disagree with introducing
unnecessary synonyms for existing focus event.

For a start I'd suggest RESIZE to "fire"
an event notification, instead of making
a mess out of Inkey() values.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Oct 25 15:53:35 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 25 15:53:42 2008
Subject: [Harbour] Proposed Feature Set for Multi-Window GTs - II
In-Reply-To: <20166811.post@talk.nabble.com>
References: <20166811.post@talk.nabble.com>
Message-ID: <5047F0D3-0790-4034-9235-6F2D1243AE33@syenar.hu>

After giving some thoughts on this, maybe the best
would be to simply remove the notifier block feature
(I don't think it'd be used by too many, it's pretty
fresh and pretty rough), and replace it with K_HB_*
Inkey() codes, which would be masked out by default
(just like mouse events), and when enabled, any
kind of user event could be attached to it via the
existing SetKey() mechanism.

Any opinions?

Brgds,
Viktor

On 2008.10.25., at 20:45, Pritpal Bedi wrote:

>
> Hello Przemek, Viktor, Massimo
>
>> hb_gtInfo( HB_GTI_SETPOS, { nMode, nX|nRows, nY|nCols } )
>
>>> hb_gtInfo( HB_GTI_SETPOS, nMode, nX|nRows, nY|nCols )
> without array? In the original version I created long ago
> HB_GT_INFO structure looks:
>
>   typedef struct
>   {
>      int      iParams;
>      int      iReserved;
>      PHB_ITEM pResult;
>      PHB_ITEM pNewVal[ HB_MAX_GTINFO_PARAMS ];
>   } HB_GT_INFO, * PHB_GT_INFO;
>
>
>>>> This would be a nice addition IMO.
>
>
> +1
>
>
>> hb_gtInfo( HB_GTI_RESIZEMODE, HB_GTI_RESIZEMODE_FONT |
>> HB_GTI_RESIZEMODE_ROWS )
>
>>> Yes, I fully agree. As I can see you and Viktor added to GTWVT font
>   resizing instead of row/col numbers updating when user changes  
> console
>   window dimensions. Very nice feature and probably more friendly to
> existing
>   Clipper code which is not ready for dynamic screen dimension
> modification.
>   ...
>   ...
>   We should create list of events which can be reported by GTs using
>   standard INKEY() values. RESIZE is one of such events but we can  
> also
>   have others like QUIT and/or CLOSE, HIDE, SHOW, FOCUSIN, FOCUSOUT,  
> etc.
>
>
>>>> May I suggest to mark these extendend event as K_HB_* or
>    HB_K_* to clearly separate them from regular inkey codes?
>
>    Also, we should think (or rethink) the current event
>    notification feature because we could either use it
>    for this purpose, or drop it, or make some rules which
>    to use when, but using them randomly is not a very good idea.
>
>
> Przemek, I agree with you that we should cover neccessary ( if not  
> all )
> events notifications via INKEY(). I also propose to fire user
> defined function/block, if one is associated with an event.
> I will explain later why it is useful to press my viewpoint.
> I have done it in GTWVG but only for few events and with fixed
> PRG defined function symbols. I wanted this to be in dynamic way
> which unfortunately I could not devise. Then Viktor rescued it
> with HB_GTI_NOTIFIERBLOCK. Now I wish to notify all events this way
> which at the moment are limited to few.
>
> I disagree with K_HB_* or HB_K_* namespace. Why we want users to
> remember one more way of using Clipper syntax. We simply document
> the K_* constants. When I introduced K_MBUTTONDOWN ~ K_NCMOUSEMOVE
> these were accepted as natural extensions required for GT in
> question and now are considered the de-facto standard.
> Any programmer looking for extended functionality with certainly
> be aware of new constants to take advantage in his applications.
> He he/she does not want to he can live with existing code.
> Harbour has set few standards and now is the need to extend them
> in natural syntax way.
>
> My proposed INKEY codes are:
>
> K_RESIZE                   1101
> K_RESIZING                 1102
> K_SETFOCUS  | K_FOCUSIN    1103
> K_KILLFOCUS | K_FOCUSOUT   1104
> K_BEGINPAINT               1105
> K_ENDPAINT                 1106
> K_TIMER                    1107
>
>
>> hb_gtInfo( HB_GTI_MODAL, pGT )
>
> Still unanswered. This is very useful and required feature.
> It will unleash true Windows functionality.
>
>
>> hb_gtInfo( HB_GTI_NOCONSOLE, TRUE )
>
>>> OK though maybe it will be better to implement sth like LOCKAREA
>   to block console output in specified region.
>   BTW GTWVT redraw screen using data from base character screen  
> buffer.
>   GTWVG creates intermediate image so data from screen buffer is  
> written
>   to this image and to the window. On refresh they are copied from  
> image
>   to window. We can very easy add such functionality to GTWVT as an  
> option
>   and it should be even more efficient. Just simply REFRESH/REDRAW  
> will
>   check if hScrImg exists and if yes then it will draw the screen data
>   into it like hb_gt_wvt_PaintText(). Inside window procedure we will
>   change WM_PAINT action and if hScrImg exists then instead of  
> redrawing
>   screen buffer it will simply copy hScrImg area to window.
>   It should give the same as GTWVG functionality but faster (we  
> eliminate
>   double screen buffer redrawing) and much easier to control by user.
>
> Excellent idea. I would like if you take a little time to get
> it working. I suspect the way I am handelling the situation in
> GTWVG is a little buggy, though I could never locate. I am sure you
> will do it in a perfect way.
>
>
>>> Then it should be quite easy to change GTWVG and instead of  
>>> replicating
>   GTWVT code it will simply inherit from GTWVT. Just like now GTCTW  
> can
>   inherit from any other GT adding CT-Window functionality.
>
>> From the core of my heart I want this. If it happens then time spent
> of double efforts can be utilized for better things.
>
>
>> May be above attributes are required before Window is created, so  
>> some
>> sort
>> of HB_NOSTARTUPWINDOW functionality be implemented.
>
>>> Here we should introduce only one parameter which will
>   inform GT that it should not show new GT window so after
>   initializing new GT user can make all necessary settings.
>   GTXWC has such functionality by default because it always create
>   console window with 1-st screen update or when user request some
>   information which needs this window activate. It resolves the  
> problem
>   but in some GTs it may be hard to implement such functionality.
>   So I'll add parameter to INIT() methods which will inform GT if
>   it should show or not console window. When user will want to make
>   some additional setting then he will ask to not show the window,
>   set them and finally make window visible. Defining parameters
>   which should be set before window initialization is not good idea
>   because such list can still grow up.
>
>>>> Would it be possible to make the initialization on the
>    first screen paint with GTWVT, too?
>
>    I guess this could also (or partially) solve the problem
>    where currently simple STDOUT/STDERR functions simply
>    don't work when used with BCC/MSVC. MinGW also behaves
>    strangely.
>
> This funtionality as 'first screen paint' methodology may
> interfere under certain situations as WN_PAINT message is not
> under program control. This may be the possible scenario:
>
> 1  gt_reLoad( 'WVT', FALSE )
>   hb_gtInfo( ... )
>   SetMode( r,c )
>   SetColor( 'n/w' )
>   CLS
>   gt_Show()              // Window goes Visible
>
> 2  gt_reLoad( 'WVT' )
>   hb_gtInfo( ... )
>   SetMode( r,c )
>   SetColor( 'n/w' )
>   CLS                    // Window goes Visible . First paint request
>
> I am not sure how 2nd option can be implemented.
>
>
>
>> What do you think having a scrollable area in GT?
>
>>> GTWIN already has such functionality in W2K, XP and later
>   Windows versions.
>
>
>> Mobile device and tomorrow internet will require this capability
>> Physical area is more small that logical
>> Gt window will USE horizontal and vertical scroll bar
>> As Physical SET BY HB_GTI_SETPOS (Have 10 row ,40 column)
>> As logical  SET BY HB_GTI_LAREA  (Have 20 row ,80 column)
>> The resize will work when Physical and logical are same (default
>> behavior)
>
>>> Such functionality without any doubts is usable and I hope it will
>>> be added to GTWVT but I would like to leave it for Windows  
>>> developers.
>
> Can you guide us in right direction. Few hints will be enough.
> I think Budyanto implemented some kind of this functionality in
> GTWVW. Budyanto ?
>
>
> Regards
> Pritpal Bedi
>
>
>
>
> -- 
> View this message in context: http://www.nabble.com/Proposed-Feature-Set-for-Multi-Window-GTs---II-tp20166811p20166811.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From jacek at achilles.wam.lodz.pl  Sat Oct 25 17:18:51 2008
From: jacek at achilles.wam.lodz.pl (Jacek Kubica)
Date: Sat Oct 25 17:19:03 2008
Subject: [Harbour] about letodb build
In-Reply-To: <4903408F.90007@oohg.org>
References: <4903408F.90007@oohg.org>
Message-ID: <12953053537.20081025231851@achilles.wam.lodz.pl>


Hello Ciro,

Saturday, October 25, 2008, 5:51:43 PM, you wrote:
CVC> Hi all:
CVC> I didn't  build rddleto from current cvs.
CVC> MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
CVC>         C:\c2w\BCC55\BIN\BCC32.EXE -c -O2 -tW -M 
CVC> -IC:\c2w\BCC55\INCLUDE;C:\c2w\harbour\INCLUDE;C:\minioop\INCLUDE;C:\letodb\source\client;C:\letodb\source\client;C:\letodb\source\common;C:\letodb\include 
CVC> -LC:\c2w\BCC55\LIB -oC:\letodb\source\client\OBJO1BH\leto1.obj 
CVC> C:\letodb\source\client\OBJO1BH\leto1.c
CVC> Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
CVC> C:\letodb\source\client\OBJO1BH\leto1.c:

CVC> Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 342: Undefined symbol 
CVC> 'hb_cdp_page' in function leto_ConnectionNew

2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
* harbour/source/rtl/cdpapi.c
    - removed global code page variable: hb_cdp_page and moved
      code page settings to HVM stack

CVC> Error E2451 C:\letodb\source\client\OBJO1BH\leto1.c 342: Undefined symbol 
CVC> 'hb_set' in function leto_ConnectionNew

2008-09-13 18:49 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
* harbour/source/vm/estack.c
    * moved from RTL to HVM
    * eliminated hb_set global structure

<..>

CVC> regards
CVC> Ciro
-- 
Best regards,

 Jacek KUbica



-------------- next part --------------
Poczta zostala przeskanowana przez system antywirusowy i nie zawiera wirusow.
From bedipritpal at hotmail.com  Sat Oct 25 17:40:15 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Oct 25 17:40:19 2008
Subject: [Harbour] Proposed Feature Set for Multi-Window GTs - II
In-Reply-To: <5047F0D3-0790-4034-9235-6F2D1243AE33@syenar.hu>
References: <20166811.post@talk.nabble.com>
	<5047F0D3-0790-4034-9235-6F2D1243AE33@syenar.hu>
Message-ID: <20168136.post@talk.nabble.com>


Viktor


Szak?ts Viktor wrote:
> 
> After giving some thoughts on this, maybe the best
> would be to simply remove the notifier block feature
> (I don't think it'd be used by too many, it's pretty
> fresh and pretty rough), and replace it with K_HB_*
> Inkey() codes, which would be masked out by default
> (just like mouse events), and when enabled, any
> kind of user event could be attached to it via the
> existing SetKey() mechanism.
> 
> Any opinions?
> 

SETKEY and NOTIFIER blocks are two different actions are 
targeted for different usage. SETKEY block is executed when
appln retrieves it via INKEY which is a part of program flow. 
While as NOTIFIER block is executed without user interaction 
or say "out of" program flow. This is just like firing events as
in COM objects.

Both are required and both are useful.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Proposed-Feature-Set-for-Multi-Window-GTs---II-tp20166811p20168136.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Sat Oct 25 18:09:36 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Oct 25 18:09:38 2008
Subject: [Harbour] 2008-10-25 14:49 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20168426.post@talk.nabble.com>


2008-10-25 14:49 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/rtl/gtwvt/gtwvt.h
    + Added <ResizeMode> member to HB_GTWVT

  * harbour/include/hbgtinfo.ch
    + Added HB_GTI_RESIZEMODE 
    + Added HB_GTI_RESIZEMODE_FONT
    + Added HB_GTI_RESIZEMODE_ROWS

  * harbour/include/inkey.ch
    + Added K_HB_RESIZE  1101

  * harbour/rtl/gtwvt/gtwvt.c
    ! Updated to accomodate HB_GTI_RESIZEMODE.

  * harbour/rtl/hbgtcore.c
    ! static BOOL hb_gt_def_Info( PHB_GT pGT, int iType, PHB_GT_INFO pInfo )
      {
         case HB_GTI_RESIZEMODE:
            pInfo->pResult = hb_itemPutNInt( pInfo->pResult,
HB_GTI_RESIZEMODE_FONT );
            break;

  * harbour/tests/wvtext.prg
    ! Updated to demonstrate K_HB_RESIZE event in navigation loop.
    ; Odd numbered windows will have HB_GTI_RESIZEMODE_ROWS mode
      Even numbered windows will have HB_GTI_RESIZEMODE_FONT mode.
      Open two or more browsers to see the effects. 

    ; To activate HB_GTI_RESIZEMODE_ROWS mode call
         hb_gtInfo( HB_GTI_RESIZEMODE, HB_GTI_RESIZEMODE_ROWS )
      and whenever window will be resized you can retrieve it via 
         if inkey() == K_HB_RESIZE
            // Reconfigure browser/your screen accordingly
         endif

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-10-25-14%3A49-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20168426p20168426.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From m.lacecilia at gmail.com  Sat Oct 25 20:54:13 2008
From: m.lacecilia at gmail.com (Maurizio la Cecilia)
Date: Sat Oct 25 20:54:22 2008
Subject: R: [Harbour] Memory blocks not released
Message-ID: <!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAAMGO1e3Zg0NHhWjygMkvXagBAAAAAA==@gmail.com>

Sorry, forgot the previous message as was a HwGUI problem.
I gone confused because the stable version don't signal this waste of memory
(but still exists also in stable...).
Thanks anyway.
Maurizio



-----Messaggio originale-----
Da: Maurizio la Cecilia [mailto:m.lacecilia@gmail.com] 
Inviato: sabato 25 ottobre 2008 19.29
A: harbour@harbour-project.org
Oggetto: [Harbour] (no subject)

Sorry for the msg sent befor the completion....
This was the end of text:

Note: to reproduce the error it's sufficient to build the
\hwgui\samples\all\a.prg (with command: "bld a" executed form same folder of
prg), but before is needed to add the line:
   SET( _SET_HBOUTLOG, somefilename, .t. )
at the start the prg and test how the output varies between cvs and stable
version.

Best regards.

Maurizio la Cecilia 




From bedipritpal at hotmail.com  Sat Oct 25 21:01:21 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Oct 25 21:01:23 2008
Subject: [Harbour] 2008-10-25 17:55 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20169504.post@talk.nabble.com>


2008-10-25 17:55 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/include/hbgtinfo.ch
    + Added HB_GTI_SETPOS_XY
    + Added HB_GTI_SETPOS_ROWCOL
  
  * harbour/rtl/gtwvt/gtwvt.c
    ! Updated to honor HB_GTI_SETPOS_XY | HB_GTI_SETPOS_ROWCOL commands.

  * harbour/tests/wvtext.prg
    ! Updated to demonstrate HB_GTI_SETPOS_XY|ROWCOL window positioning.

    ; Now every next browser window opens 20x20 pixels away from 
      previous window, a GT imposed Z-Order.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-10-25-17%3A55-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20169504p20169504.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Sat Oct 25 22:09:06 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Oct 25 22:09:08 2008
Subject: [Harbour] A Bug in TBrowse Class
Message-ID: <20169788.post@talk.nabble.com>


Hello Przemek

How this error can be generated:
Open any TBrowse. I did with tests/wvtext.prg <F10>.

Scroll down with down-arrow past last line by two records.
Scroll up with up-arrow past first record.
Scroll down with down-arrow and at stay at last row for a moment - just to
be sure.
Scroll down -  AND ERROR WILL BE GENERATED.

I do not know the logic so I did not dwelled deep.

IMETHOD stabilize() CLASS TBROWSE

   LOCAL nCol, nRowCount, nToMove, nMoved
   LOCAL lDisp, lRead, lStat

   IF ::nConfigure != 0
      ::doConfigure()
   ENDIF

   IF !::lStable .OR. ::lInvalid .OR. ::lFrames .OR. ::lRefresh .OR. ;
      ::nMoveOffset != 0 .OR. ::nBufferPos != ::nRowPos

      nRowCount := ::rowCount

      IF ::lRefresh
         AFill( ::aCellStatus, .F. )
         ::nLastRow := nRowCount
         ::nLastScroll := 0
         ::lRefresh := .F.
      ENDIF

      nCol := ::nColPos
      IF nCol < 1 .OR. nCol > ::colCount .OR. ::nLastPos != nCol .OR. ;
         ::lFrames .OR. ::nLeftVisible == 0 .OR. ::nRightVisible == 0 .OR. ;
         ::aColData[ nCol ][ _TBCI_COLPOS ] == NIL

         ::setVisible()
      ENDIF

      IF ::lFrames
         ::dispFrames()
         AFill( ::aDispStatus, .T. )
      ENDIF

      lRead := .F.
      IF ::nMoveOffset != 0
         ::setPosition()
         lRead := .T.
      ENDIF
hb_ToOutDebug( "stabilize: 5" )
      IF ::nLastScroll > 0
         FOR EACH lStat, lDisp IN ::aCellStatus, ::aDispStatus DESCEND
hb_ToOutDebug( "stabilize: 5 1 0" )
            IF !lStat       //////////    ERROR: CONDITIONAL   
/////////////
hb_ToOutDebug( "stabilize: 5 1 1" )
               IF lRead
hb_ToOutDebug( "stabilize: 5 1 2" )
                  RETURN .F.
               ENDIF
               lRead := ::readRecord( lStat:__enumIndex() )
            ENDIF
            IF lDisp
               ::dispRow( lDisp:__enumIndex() )
            ENDIF
         NEXT
hb_ToOutDebug( "stabilize: 5 1" )
      ELSE
         FOR EACH lStat, lDisp IN ::aCellStatus, ::aDispStatus
            IF !lStat
               IF lRead
                  RETURN .F.
               ENDIF
               lRead := ::readRecord( lStat:__enumIndex() )
            ENDIF
            IF lDisp
               ::dispRow( lDisp:__enumIndex() )
            ENDIF
         NEXT
hb_ToOutDebug( "stabilize: 5 2" )
      ENDIF
hb_ToOutDebug( "stabilize: 6" )
      IF ::nRowPos > ::nLastRow
         ::nRowPos := ::nLastRow
      ENDIF
      IF ::nBufferPos != ::nRowPos
         /* TOFIX: add protection against unexpected results
          *        CA-Cl*pper does not fully respect here the returned
          *        value and current code below replicates what Clipper
          *        seems to do but it means that in network environment
          *        with concurent modifications wrong records can be
          *        shown. [druzus]
          */
         nToMove := ::nRowPos - ::nBufferPos
         nMoved := _SKIP_RESULT( Eval( ::bSkipBlock, nToMove ) )
         IF nToMove > 0
            IF nMoved < 0
               nMoved := 0
            ENDIF
         ELSEIF nToMove < 0
            nMoved := nToMove
         ELSE
            nMoved := 0
         ENDIF
         ::nBufferPos += nMoved
         ::nRowPos := ::nBufferPos
      ENDIF
      ::lStable := .T.
      ::lInvalid := .F.
   ENDIF

   IF ::autoLite
      ::hilite()
   ELSE
      ::setCursorPos()
   ENDIF

   RETURN .T.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/A-Bug-in-TBrowse-Class-tp20169788p20169788.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Sat Oct 25 22:14:28 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Oct 25 22:14:40 2008
Subject: [Harbour] 2008-10-25 19:10 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20169808.post@talk.nabble.com>


2008-10-25 19:10 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/hbdbgfx/dbgfx.c
    + HB_FUNC( HB_OUTDEBUG ). 
      May be I am missing something. Please correct.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-10-25-19%3A10-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20169808p20169808.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sun Oct 26 04:34:59 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 26 04:35:06 2008
Subject: [Harbour] #if defined() problem?
Message-ID: <F87C82B0-9B71-4942-A529-0E1E411BA860@syenar.hu>

Hi folks,

In latest Harbour (Darwin build):
---
#define DEF_A
#define DEF_B
#if defined( DEF_A ) && ! defined( DEF_B )
#error DEF_A AND NOT DEF_B
#endif
---

This would incorrectly (unless I'm missing
something obvious) print:
DEF_A AND NOT DEF_B

Brgds,
Viktor

From mbelgrano at deltain.it  Sun Oct 26 07:20:42 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Oct 26 07:21:28 2008
Subject: [Harbour] Tthree request about MWI (Multi WIndow Interface) by
	Przemyslaw Czerpak 
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0E0@SRV02.deltain.net>

In harbour nmi made by Przemyslaw Czerpak, we can have an interface to
Multiple windows. 
It's an important piece of software because it ties the concept of a
nmiform in with everything you already know about an applications. These
rectangular shaped areas of the computer screen are called windows and
the whole strategy of Operating System is to manage the display of those
windows (while running the code that generates them or which performs
calculations in the background). Since you've already been exposed to
other programs, then you already intuitively understand the concept of a
nmiform (window)! 
This question search additional details about how nmiform will handles
form now and in future

1)RESIZE
In tests\gtwin.prg How IS possible having windows with same dimension
(heiglt,length) as rebox position?

2)RESIZE WITH RELATIVE XY:BY OOP 
Imo with MWI we need also Relative to the actual windows /Absolute TO
main Windows  coordinate system
For not need  rewriting box after we resize dimension. Think gtwin.prg
after resize windows for position in same point without rewrite position
So I proposal if is possible pGT1:AbsoluteXYtoMainWindow:=true
Or a parameter to hb_gtcreate
Is possible a OOP syntax on NMI object?
If yes I think that will be more EASY also for other trick like "mark
as"
IN a oop syntax I think a future extension
Some interesting property like Caption,StartPosition,Sixe, Autoscale,
BackColor, BackgroundImage,Font,ContextMenu
some interesting event Active,Click,Dbclick fired to application
some interesting Method like refresh,SetFocus,drag,Move
 
3)EXTEND
Is possible having a api for extend GT WITH new GUI components written
in harbour so portable or written in C by a template?
I Think that this will be important for future extesione of MNI comcept



Follow tests\gtwin.prg
#include "box.ch"

#ifdef __PLATFORM__WINDOWS
   REQUEST HB_GT_WVT_DEFAULT
   #define THREAD_GT "WVT"
#else
   REQUEST HB_GT_STD_DEFAULT
   #define THREAD_GT "XWC"
#endif
proc main()
   local pGT, pGT1, pGT2
   ? "This is small test for using more then one console window."
   ? "It needs GT which supports such functionality i.e. GTWVT in"
   ? "MS-Windows or GTXWC in XWindow"
   wait
   ? "Create two new GTs:"
   pGT1 := hb_gtCreate( THREAD_GT )
   ? "1 =>", pGT1
   pGT2 := hb_gtCreate( THREAD_GT )
   ? "2 =>", pGT1
   pGT := hb_gtSelect( pGT1 )
   SetColor( "W+/R" )
   dispBox( 10, 10, 20, 50, B_DOUBLE + " " )
   ?? "This test is shown in 1-st GT window"
   hb_gtSelect( pGT2 )
   SetColor( "W+/B" )
   dispBox( 15, 30, 20, 70, B_DOUBLE + " " )
   ?? "This test is shown in 2-nd GT window"
   hb_gtSelect( pGT )
   ? "New console window should be visible now"
   wait

   ? "Destroy 1-st window..."
   pGT1 := NIL
   ?? "done"
   wait

   ? "Destroy 2-nd window..."
   pGT2 := NIL
   ?? "done"

   wait "Press any key to exit"

return

Massimo Belgrano

From mbelgrano at deltain.it  Sun Oct 26 08:41:10 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Oct 26 08:41:52 2008
Subject: [Harbour] Tthree request about MWI (Multi WIndow Interface)
	byPrzemyslaw Czerpak 
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F0E0@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815F0E0@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0E1@SRV02.deltain.net>

c3 by bruno cantero have three object Application, Screen, Printer 
This idea can be interesting also for harbour



From bedipritpal at hotmail.com  Sun Oct 26 12:43:36 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun Oct 26 12:43:39 2008
Subject: [Harbour] Classes - A Bug
Message-ID: <20175430.post@talk.nabble.com>


Hello 

#include "hbclass.ch"

#command BEGINMENU [<oMenu>] => WITH OBJECT <oMenu> := MyMenu():New()

CREATE CLASS TThread
   VAR a
ENDCLASS

Generates this error:
ERRCLASS.prg(7) Error E0030  Syntax error: "syntax error at 'ALWAYS'"
1 error

No code generated

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Classes---A-Bug-tp20175430p20175430.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sun Oct 26 17:43:38 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 26 17:43:44 2008
Subject: [Harbour] 2008-10-26 22:25 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c937b3$Blat.v2.6.2$e7dab0f4$d6c22da5da2@127.0.0.1>

2008-10-26 22:25 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/common/hbfopen.c
    * Changed hb_fopen() to use fopen_s(), secure version of 
      fopen() for MSVS 2005 and upper.

  * source/common/hbstr.c
    + Added hb_snprintf() Harbour wrapper for snprintf() which 
      terminates the buffer with a '\0' char for CRTLs that 
      need this (like MSVC).
      MSVC _snprintf() doesn't do so.
    * hb_snprintf() used _snprintf_s(), secure version of 
      _snprintf() for MSVS 2005 and upper.
    ; TOFIX: There is still one strcpy() marked as non-secure 
             in debug lib. Could someone please take a look 
             at it and replace it with hb_strncpy() or something 
             else secure? The code is cryptic and as someone 
             not using the debugger, I didn't dare to touch it, 
             and this is the only one such call left.
    ; TODO: Change all snprintf() calls to hb_snprintf().
            When that happens, Harbour will no more use anything 
            depicted as "non-secure" by MSVS 2005/2008.
    ; NOTE: This function may need tweaking, pls review and 
            fix if/where needed.

  * source/vm/dlmalloc.c
    ! Fixed MSVC C++ mode compile error. This fix also exists 
      as part of the next dlmalloc version (2.8.4b).

2008-10-26 07:27 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbdbgfx/dbgfx.prg
    * Minor cleanup.
 
  * contrib/hbdbgfx/dbgfxc.c
    ! Fixed GPF when non-string parameter passed to 
      hb_outdebug().
--
Brgds,
Viktor

From info at fsgiudice.com  Sun Oct 26 18:24:12 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Oct 26 18:24:19 2008
Subject: [Harbour] 2008-10-25 19:10 UTC-0800 Pritpal
	Bedi	(pritpal@vouchcac.com)
In-Reply-To: <20169808.post@talk.nabble.com>
References: <20169808.post@talk.nabble.com>
Message-ID: <4904EE0C.1000707@fsgiudice.com>

Hi Pritpal,

Il 26/10/2008 3.14, Pritpal Bedi ha scritto:
> 2008-10-25 19:10 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>   * harbour/contrib/hbdbgfx/dbgfx.c
>     + HB_FUNC( HB_OUTDEBUG ). 
>       May be I am missing something. Please correct.
> 
> Regards
> Pritpal Bedi

if you added this function thinking that I miss it, note that correct 
hb_OutDebug() is in xhb lib and you need to add it to link phase.
I think that we can move hblog.prg and hboutdbg.c in hbdbgfx lib.

Best Regards

Francesco
From harbour.01 at syenar.hu  Sun Oct 26 18:33:20 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 26 18:33:28 2008
Subject: [Harbour] 2008-10-25 19:10 UTC-0800 Pritpal
	Bedi	(pritpal@vouchcac.com)
In-Reply-To: <4904EE0C.1000707@fsgiudice.com>
References: <20169808.post@talk.nabble.com> <4904EE0C.1000707@fsgiudice.com>
Message-ID: <EA2B05C3-38C9-4A80-9E05-B7A9E5D1C2E4@syenar.hu>

Hi folks,

As a rule of thumb xhb functions need to stay
in xhb lib, and other libs should never depend
on xhb lib. Replicating xhb functions in other
libs also don't look like a very good idea, as
this just leads to mutual exclusion of those libs,
unless the function names are made unique. In
this case though it's best if the new functions
also add something to the xhb originals.

I honestly can't say if anything of the above
applies to hbdbgfx, but maybe they would fit
better in hbmisc, rather than living as a separate
lib. hbmisc could be renamed to hbtools to better
reflect the purpose and gather everything useful
but not fitting in core and other libs for some
reason.

Brgds,
Viktor

On 2008.10.26., at 23:24, Francesco Saverio Giudice wrote:

> Hi Pritpal,
>
> Il 26/10/2008 3.14, Pritpal Bedi ha scritto:
>> 2008-10-25 19:10 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>>  * harbour/contrib/hbdbgfx/dbgfx.c
>>    + HB_FUNC( HB_OUTDEBUG ).       May be I am missing something.  
>> Please correct.
>> Regards
>> Pritpal Bedi
>
> if you added this function thinking that I miss it, note that  
> correct hb_OutDebug() is in xhb lib and you need to add it to link  
> phase.
> I think that we can move hblog.prg and hboutdbg.c in hbdbgfx lib.
>
> Best Regards
>
> Francesco
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From info at fsgiudice.com  Sun Oct 26 18:54:34 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Oct 26 18:54:41 2008
Subject: [SPAM] Re: [Harbour] 2008-10-09 20:51 UTC+0200 Przemyslaw	Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081022112131.GA9448@34-mo7-2.acn.waw.pl>
References: <20081009185140.GA17892@34-mo7-2.acn.waw.pl>	<19906002.post@talk.nabble.com>	<20081009210029.GA24108@34-mo7-2.acn.waw.pl>	<48FE8D6B.1000304@fsgiudice.com>
	<20081022112131.GA9448@34-mo7-2.acn.waw.pl>
Message-ID: <4904F52A.7040703@fsgiudice.com>

Hi Przemek,

Il 22/10/2008 13.21, Przemyslaw Czerpak ha scritto:
> On Wed, 22 Oct 2008, Francesco Saverio Giudice wrote:
>
[snip]

> 
>> The need is to permit assignment to a function assigning rvalue so:
>> o:AssignMethod := 1
>> it should be the same of
>> o:AssignMethod( 1 )
> 
> Unfortunately it is now and we cannot have methods and variables
> with the same name.
> 
>> or
>> oTBrowse:addColumn := oTBColumns
>> In case of a var not exists with same name of a method (but today can it 
>> exists ?).
> 
> Compiler does not know anything about VARs or METHODs. It only sends
> messages. How they behave at runtime depends on the code bound with
> given method. Clipper and [x]Harbour pass only one context attribute
> from compiler code to final PCODE by changing message name and adding
> "_" prefix in assing operation so:
>    o:msg := 10
> gives:
>    o:_msg(10)
> which is different then
>    o:msg()
> so later at runtime it's possible to bound two different methods code
> with _MSG and MSG. And we use this as you can see in your example.
> But we do not have any information about () parenthesis because for
> 'o:msg()' and 'o:msg' it gives _EXACTLY_ the same PCODE so at runtime
> we have nothing to chose different actions.
> If we want to support methods and variables with the same name then
> we will have to extended generated PCODE and add information about
> '()' used in source code so later at runtime we can chose two different
> actions just like for assignment. It can be done by message name
> modification but also in different way, f.e. as additional attributes.
> 

thank you for detailed explanation.

Best Regards

Francesco
From harbour.01 at syenar.hu  Sun Oct 26 19:04:59 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 26 19:05:05 2008
Subject: [Harbour] 2008-10-27 00:01 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c937bf$Blat.v2.6.2$451057f0$10a833f32ac8@127.0.0.1>

2008-10-27 00:01 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/common/hbver.c
    * Changed to include bitness even for DJGPP.
    * Changed "(* bit)" to "(*-bit)"
    ; NOTE: We have __ARCH*BIT__ but this macro is misleading 
            and cannot be used properly on platforms where the 
            compiler is able to generate multiple targets in 
            one build pass. Such system is Darwin/OSX.
            I'd suggest to consider removing this macro, and 
            rather adding a function to return bitness.
            Any opininons?
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Oct 26 20:05:25 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 26 20:05:32 2008
Subject: [Harbour] A Bug in TBrowse Class
In-Reply-To: <20169788.post@talk.nabble.com>
References: <20169788.post@talk.nabble.com>
Message-ID: <15409C68-7E7B-402E-97AA-F8A0443E459D@syenar.hu>

Hi,

While experimenting with Darwin GTXWC build, I just
got the exact same error. (never ever got it before)

---
ErrorMessage=     Error(2) BASE/1066 Argument error: conditional
ErrorCategory=    EG_ARG (1)
ErrorOS=          Nincs hiba (0)
ErrorArgs=        NIL
ErrorFlags=
ErrorRetries=     0
CallStack=        TBROWSE:STABILIZE (794)
---

Brgds,
Viktor

On 2008.10.26., at 3:09, Pritpal Bedi wrote:

>
> Hello Przemek
>
> How this error can be generated:
> Open any TBrowse. I did with tests/wvtext.prg <F10>.
>
> Scroll down with down-arrow past last line by two records.
> Scroll up with up-arrow past first record.
> Scroll down with down-arrow and at stay at last row for a moment -  
> just to
> be sure.
> Scroll down -  AND ERROR WILL BE GENERATED.
>
> I do not know the logic so I did not dwelled deep.
>
> IMETHOD stabilize() CLASS TBROWSE
>
>   LOCAL nCol, nRowCount, nToMove, nMoved
>   LOCAL lDisp, lRead, lStat
>
>   IF ::nConfigure != 0
>      ::doConfigure()
>   ENDIF
>
>   IF !::lStable .OR. ::lInvalid .OR. ::lFrames .OR. ::lRefresh .OR. ;
>      ::nMoveOffset != 0 .OR. ::nBufferPos != ::nRowPos
>
>      nRowCount := ::rowCount
>
>      IF ::lRefresh
>         AFill( ::aCellStatus, .F. )
>         ::nLastRow := nRowCount
>         ::nLastScroll := 0
>         ::lRefresh := .F.
>      ENDIF
>
>      nCol := ::nColPos
>      IF nCol < 1 .OR. nCol > ::colCount .OR. ::nLastPos != nCol .OR. ;
>         ::lFrames .OR. ::nLeftVisible == 0 .OR. ::nRightVisible ==  
> 0 .OR. ;
>         ::aColData[ nCol ][ _TBCI_COLPOS ] == NIL
>
>         ::setVisible()
>      ENDIF
>
>      IF ::lFrames
>         ::dispFrames()
>         AFill( ::aDispStatus, .T. )
>      ENDIF
>
>      lRead := .F.
>      IF ::nMoveOffset != 0
>         ::setPosition()
>         lRead := .T.
>      ENDIF
> hb_ToOutDebug( "stabilize: 5" )
>      IF ::nLastScroll > 0
>         FOR EACH lStat, lDisp IN ::aCellStatus, ::aDispStatus DESCEND
> hb_ToOutDebug( "stabilize: 5 1 0" )
>            IF !lStat       //////////    ERROR: CONDITIONAL
> /////////////
> hb_ToOutDebug( "stabilize: 5 1 1" )
>               IF lRead
> hb_ToOutDebug( "stabilize: 5 1 2" )
>                  RETURN .F.
>               ENDIF
>               lRead := ::readRecord( lStat:__enumIndex() )
>            ENDIF
>            IF lDisp
>               ::dispRow( lDisp:__enumIndex() )
>            ENDIF
>         NEXT
> hb_ToOutDebug( "stabilize: 5 1" )
>      ELSE
>         FOR EACH lStat, lDisp IN ::aCellStatus, ::aDispStatus
>            IF !lStat
>               IF lRead
>                  RETURN .F.
>               ENDIF
>               lRead := ::readRecord( lStat:__enumIndex() )
>            ENDIF
>            IF lDisp
>               ::dispRow( lDisp:__enumIndex() )
>            ENDIF
>         NEXT
> hb_ToOutDebug( "stabilize: 5 2" )
>      ENDIF
> hb_ToOutDebug( "stabilize: 6" )
>      IF ::nRowPos > ::nLastRow
>         ::nRowPos := ::nLastRow
>      ENDIF
>      IF ::nBufferPos != ::nRowPos
>         /* TOFIX: add protection against unexpected results
>          *        CA-Cl*pper does not fully respect here the returned
>          *        value and current code below replicates what Clipper
>          *        seems to do but it means that in network environment
>          *        with concurent modifications wrong records can be
>          *        shown. [druzus]
>          */
>         nToMove := ::nRowPos - ::nBufferPos
>         nMoved := _SKIP_RESULT( Eval( ::bSkipBlock, nToMove ) )
>         IF nToMove > 0
>            IF nMoved < 0
>               nMoved := 0
>            ENDIF
>         ELSEIF nToMove < 0
>            nMoved := nToMove
>         ELSE
>            nMoved := 0
>         ENDIF
>         ::nBufferPos += nMoved
>         ::nRowPos := ::nBufferPos
>      ENDIF
>      ::lStable := .T.
>      ::lInvalid := .F.
>   ENDIF
>
>   IF ::autoLite
>      ::hilite()
>   ELSE
>      ::setCursorPos()
>   ENDIF
>
>   RETURN .T.
>
> Regards
> Pritpal Bedi
>
> -- 
> View this message in context: http://www.nabble.com/A-Bug-in-TBrowse-Class-tp20169788p20169788.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From info at fsgiudice.com  Sun Oct 26 20:11:57 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Oct 26 20:12:04 2008
Subject: [Harbour] Error compiler harbour in CentOS-5.2
In-Reply-To: <D4204BF1-ABB4-44F0-B659-DEC19B465339@syenar.hu>
References: <814837.28245.qm@web51906.mail.re2.yahoo.com>	<4900A998.7050100@fsgiudice.com>
	<D4204BF1-ABB4-44F0-B659-DEC19B465339@syenar.hu>
Message-ID: <4905074D.9040105@fsgiudice.com>

Hi Viktor,


Il 23/10/2008 23.39, Szak?ts Viktor ha scritto:
> Hi Joel, Francesco,
> 
> Pls try with latest SVN, it should compile now fine.
> I'd appreciate if your could report your results.
> 

Confirmed, now it works.
Thank you

Best Regards

Francesco
From info at fsgiudice.com  Sun Oct 26 20:41:02 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Oct 26 20:41:09 2008
Subject: [Harbour] 2008-10-25 19:10 UTC-0800
	Pritpal	Bedi	(pritpal@vouchcac.com)
In-Reply-To: <EA2B05C3-38C9-4A80-9E05-B7A9E5D1C2E4@syenar.hu>
References: <20169808.post@talk.nabble.com> <4904EE0C.1000707@fsgiudice.com>
	<EA2B05C3-38C9-4A80-9E05-B7A9E5D1C2E4@syenar.hu>
Message-ID: <49050E1E.6090902@fsgiudice.com>

Hi Viktor,

Il 26/10/2008 23.33, Szak?ts Viktor ha scritto:
> Hi folks,
> 
> As a rule of thumb xhb functions need to stay
> in xhb lib, and other libs should never depend
> on xhb lib. Replicating xhb functions in other
> libs also don't look like a very good idea, as
> this just leads to mutual exclusion of those libs,
> unless the function names are made unique. In
> this case though it's best if the new functions
> also add something to the xhb originals.
> 
> I honestly can't say if anything of the above
> applies to hbdbgfx, but maybe they would fit
> better in hbmisc, rather than living as a separate
> lib. hbmisc could be renamed to hbtools to better
> reflect the purpose and gather everything useful
> but not fitting in core and other libs for some
> reason.
> 

the problem is that HB_OUTDEBUG() function is already defined in xhb and 
I didn't want to replicate in hbdbgfx (because in xhb it is already 
defined either for unix than windows) but for this now hbdbgfx depends 
from xhb.
So for me the correct choise is (as you suggest) to move sources from 
hbdbgfx to hbmisc (and rename better to hbtools) and also all needed and 
common useful functions from xhb to hbmisc, like hboutdbg.c and 
hblog.prg leaving in xhb *only* that functions needed to by harbour to 
emulate xharbour.

Best Regards

Francesco
From budyanto at centrin.net.id  Sun Oct 26 22:19:40 2008
From: budyanto at centrin.net.id (Budyanto Dj.)
Date: Sun Oct 26 22:19:52 2008
Subject: [Harbour] Proposed Feature Set for Multi-Window GTs - II
In-Reply-To: <20166811.post@talk.nabble.com>
Message-ID: <490587AC.23805.90D6C31@localhost>

On 25 Oct 2008 at 11:45, Pritpal Bedi wrote:
> > Mobile device and tomorrow internet will require this capability 
> > Physical area is more small that logical 
> > Gt window will USE horizontal and vertical scroll bar 
> > As Physical SET BY HB_GTI_SETPOS (Have 10 row ,40 column) 
> > As logical  SET BY HB_GTI_LAREA  (Have 20 row ,80 column) 
> > The resize will work when Physical and logical are same (default 
> > behavior) 
> 
> >> Such functionality without any doubts is usable and I hope it will 
> >> be added to GTWVT but I would like to leave it for Windows developers. 
> 
> Can you guide us in right direction. Few hints will be enough.
> I think Budyanto implemented some kind of this functionality in
> GTWVW. Budyanto ?

No, gtwvw has no such feature.
PS. Gtwvw has (native) scrollbars, but it simply calls user's callback (via codeblock).

regards,
budyanto

From lorenzo.fiorini at gmail.com  Mon Oct 27 01:11:27 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Oct 27 01:11:31 2008
Subject: [Harbour] 2008-10-25 19:10 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <4904EE0C.1000707@fsgiudice.com>
References: <20169808.post@talk.nabble.com> <4904EE0C.1000707@fsgiudice.com>
Message-ID: <9257026e0810262211v3f044314k55113f236b713d54@mail.gmail.com>

On Sun, Oct 26, 2008 at 11:24 PM, Francesco Saverio Giudice
<info@fsgiudice.com> wrote:

> if you added this function thinking that I miss it, note that correct
> hb_OutDebug() is in xhb lib and you need to add it to link phase.
> I think that we can move hblog.prg and hboutdbg.c in hbdbgfx lib.

As I said time ago inside xhb there are two libs that have nothing to
do with xhb itself that are hbxml and hblog that are tested and
documented.

hblog is multiplatform and multichannel ( file, system logs, smtp )
and hbxml is actually the only way to manage xmls in Harbour.

best regards,
Lorenzo
From teo at windtelsoft.com  Mon Oct 27 00:08:29 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Mon Oct 27 01:56:06 2008
Subject: [Harbour] A Bug in TBrowse Class
In-Reply-To: <20169788.post@talk.nabble.com>
References: <20169788.post@talk.nabble.com>
Message-ID: <200810262208.29845.teo@windtelsoft.com>

On Saturday 25 October 2008 09:09:06 pm Pritpal Bedi wrote:
> Hello Przemek
>
> How this error can be generated:
> Open any TBrowse. I did with tests/wvtext.prg <F10>.
>
> Scroll down with down-arrow past last line by two records.
> Scroll up with up-arrow past first record.
> Scroll down with down-arrow and at stay at last row for a moment - just to
> be sure.
> Scroll down -  AND ERROR WILL BE GENERATED.

[snip]

Hello Pritpal,

I confirm the very same error on my apps compiled with last Harbour SVN.



best regards,

Teo
From M.Horodyski at pzuzycie.com.pl  Mon Oct 27 04:30:58 2008
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Mon Oct 27 04:31:07 2008
Subject: [Harbour] RE: Harbour Digest, Vol 24, Issue 112
In-Reply-To: <NLB01FEh133tYwlib4g00008097@gatein.pzuzycie.com.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C95017DEE7B@PINK.zycie.pzu>

>Date: Fri, 24 Oct 2008 19:37:01 -0400
>From: Phil Barnett <philb@philb.us>

[ ... ]

>It's open source. The source is there on The Oasis. I just 
>don't have time to 
>take on more stuff. (I'm already in up to my eyebrows...)

In surces is one .asm function :

;*
;*           Author: Terry Carmen 
;* Released to the Public Domain 4/17/1996
;*______________________________________________________________________
_______
;*
;*
;*     Program Name:   isdir.asm 


Anybody know equivalent prg level in Harbour ?

Regards,
Marek Horodyski
From harbour.01 at syenar.hu  Mon Oct 27 04:33:01 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 04:33:09 2008
Subject: [Harbour] BUG: -gc3 problems on OSX/PPC
Message-ID: <4197D6D2-A0ED-4F9A-A702-CEC158BA6C06@syenar.hu>

Hi Przemek,

Compiling this code on OSX (PPC) using -gc3:
---
PROC MAIN()
     LOCAL a := 6
     LOCAL b := 36
     ? ( a / b )
     ? ( a / b ) > .25
---
Will print:
---
          0.17
.T. (wrong)
---

The generated .c code is identical to the MSVC built one.

Also, this code:
---
PROC MAIN()
     ? ( 6 / 36 )
     ? ( 6 / 36 ) > .25
---
Will print in OSX (PPC):
---
*********************** (wrong)
.F.
---
While MSVC will print:
---
          0.17
.F.
---

Generated .c code is also identical.

Brgds,
Viktor

From mbelgrano at deltain.it  Mon Oct 27 05:03:43 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Oct 27 05:04:31 2008
Subject: [Harbour] Proposed Feature Set for Multi-Window GTs - II
In-Reply-To: <490587AC.23805.90D6C31@localhost>
References: <20166811.post@talk.nabble.com> <490587AC.23805.90D6C31@localhost>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0E6@SRV02.deltain.net>

Do you think that is will possible implement?

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Budyanto Dj.
Sent: Monday, October 27, 2008 3:20 AM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Proposed Feature Set for Multi-Window GTs - II

On 25 Oct 2008 at 11:45, Pritpal Bedi wrote:
> > Mobile device and tomorrow internet will require this capability 
> > Physical area is more small that logical 
> > Gt window will USE horizontal and vertical scroll bar 
> > As Physical SET BY HB_GTI_SETPOS (Have 10 row ,40 column) 
> > As logical  SET BY HB_GTI_LAREA  (Have 20 row ,80 column) 
> > The resize will work when Physical and logical are same (default 
> > behavior) 
> 
> >> Such functionality without any doubts is usable and I hope it will 
> >> be added to GTWVT but I would like to leave it for Windows
developers. 
> 
> Can you guide us in right direction. Few hints will be enough.
> I think Budyanto implemented some kind of this functionality in
> GTWVW. Budyanto ?

No, gtwvw has no such feature.
PS. Gtwvw has (native) scrollbars, but it simply calls user's callback
(via codeblock).

regards,
budyanto

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Mon Oct 27 05:38:29 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 05:38:35 2008
Subject: [Harbour] 2008-10-27 10:37 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c93817$Blat.v2.6.2$c4e6ad28$2a4f68ca6a6@127.0.0.1>

2008-10-27 10:37 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/pp/ppcore.c
    + Added '#pragma TEXTHIDDEN=<ON | OFF>' to control the 
      existing -texthidden option to add light encoding to 
      strings embedded in code. Since this goes with a slight 
      performance hit and it's rarely used, it might be useful 
      to turn it on only for code parts that really needs this.

  * source/rtl/tget.prg
    * Corrected an assigment to follow official syntax.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Oct 27 06:26:56 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 06:27:01 2008
Subject: [Harbour] 2008-10-27 11:26 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9381e$Blat.v2.6.2$898899d8$e18240bc264@127.0.0.1>

2008-10-27 11:26 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/common/hbstr.c
    * Some tweaks to hb_snprintf(). It still doesn't work 
      for some reason.

  * include/hbapi.h
    + Added hb_snprintf() to header.

  * source/debug/dbgentry.c
    * Changed strcpy() to hb_strncpy(). Chances are high 
      this is wrong. Please review and test.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Oct 27 06:30:06 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 06:30:09 2008
Subject: [Harbour] 2008-10-27 11:29 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9381e$Blat.v2.6.2$facaaf32$1370dedb5bf2@127.0.0.1>

2008-10-27 11:29 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbapi.h
  * source/common/hbstr.c
    + Added return value to hb_snprintf().
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Oct 27 07:11:04 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 07:11:09 2008
Subject: [Harbour] 2008-10-27 12:03 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c93824$Blat.v2.6.2$b3d8e636$b80290795e2@127.0.0.1>

2008-10-27 12:03 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_vc.mak
  * contrib/mtpl_vc.mak
    - Removed no longer necessary '-D_CRT_SECURE_NO_DEPRECATE' 
      for MSVS 2005 and upper.

  * include/hbsetup.h
    * Mapping snprintf() calls to hb_snprintf().
    ; TODO: Replace the calls in source code.

  * source/common/hbstr.c
    ! Fixed hb_snprintf(). Please verify on your platforms.
    ; TODO: It may need further tweaking to smooth out the 
            platform implementation differences.
--
Brgds,
Viktor

From dbtopas at dbtopas.lt  Mon Oct 27 07:27:43 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Oct 27 07:25:32 2008
Subject: [Harbour] ChangeLog 2008-10-22 16:00 UTC+0300
	Mindaugas	Kavaliauskas
In-Reply-To: <20081022154224.GA32264@34-mo7-2.acn.waw.pl>
References: <48FF2450.3070700@dbtopas.lt>
	<48FF2724.7010305@dbtopas.lt>	<C4BFFF95-DD19-4A4E-9B06-9353F8C6978D@syenar.hu>	<48FF300A.5070803@dbtopas.lt>
	<20081022154224.GA32264@34-mo7-2.acn.waw.pl>
Message-ID: <4905A5AF.4020009@dbtopas.lt>

>> Yes, this could be important. Actually, I left comment about it a few 
>> dozens lines above warning place. I can find an answer in 10 minutes, but I 
>> hope Przemek will answer in a second, so I'll ask it here:
>> When pArea->uiFieldCount is greater than zero on entry to RDD open() 
>> method?
> 
> Such situation happens in export/import RDDs like SDF or DELIM
> when data is imported (append from) from such RDDs. They do not
> have information about field format in data files (no headers)
> and such info is taken from destination area and set before OPEN()
> method is called. As I can see it will be good to make base DBF RDD
> safe for such usage. I had to forgot about it.


Hi,


so, what action should be taken for RDDs like DBF, if 
pArea->uiFieldCount is not equal to zero on open() method? Should open() 
return FAILURE, or should it generate run time error, or something else?


Best regards,
Mindaugas
From druzus at acn.waw.pl  Mon Oct 27 08:20:24 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 08:20:17 2008
Subject: [Harbour] ChangeLog 2008-10-22 16:00 UTC+0300 Mindaugas
	Kavaliauskas
In-Reply-To: <4905A5AF.4020009@dbtopas.lt>
References: <48FF2450.3070700@dbtopas.lt> <48FF2724.7010305@dbtopas.lt>
	<C4BFFF95-DD19-4A4E-9B06-9353F8C6978D@syenar.hu>
	<48FF300A.5070803@dbtopas.lt>
	<20081022154224.GA32264@34-mo7-2.acn.waw.pl>
	<4905A5AF.4020009@dbtopas.lt>
Message-ID: <20081027122024.GA21319@34-mo7-2.acn.waw.pl>

On Mon, 27 Oct 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> so, what action should be taken for RDDs like DBF, if pArea->uiFieldCount 
> is not equal to zero on open() method? Should open() return FAILURE, or 
> should it generate run time error, or something else?

I think we can leave this decision to RDD developers.
With our code it cannot happen from .prg code because DBF is not
marked as transform RDD so to create such situation is necessary
to write some C code. Because DBF RDD has to respect fields defined
in DBF header then for this RDD seems reasonable to generate RT error
or discard previously defined fields.

best regards,
Przemek
From info at fsgiudice.com  Mon Oct 27 08:25:16 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Oct 27 08:25:23 2008
Subject: [Harbour] 2008-10-25 19:10 UTC-0800 Pritpal
	Bedi	(pritpal@vouchcac.com)
In-Reply-To: <9257026e0810262211v3f044314k55113f236b713d54@mail.gmail.com>
References: <20169808.post@talk.nabble.com> <4904EE0C.1000707@fsgiudice.com>
	<9257026e0810262211v3f044314k55113f236b713d54@mail.gmail.com>
Message-ID: <4905B32C.1080408@fsgiudice.com>

Hi Lorenzo,

Il 27/10/2008 6.11, Lorenzo Fiorini ha scritto:
> On Sun, Oct 26, 2008 at 11:24 PM, Francesco Saverio Giudice
> <info@fsgiudice.com> wrote:
> 
>> if you added this function thinking that I miss it, note that correct
>> hb_OutDebug() is in xhb lib and you need to add it to link phase.
>> I think that we can move hblog.prg and hboutdbg.c in hbdbgfx lib.
> 
> As I said time ago inside xhb there are two libs that have nothing to
> do with xhb itself that are hbxml and hblog that are tested and
> documented.
> 
> hblog is multiplatform and multichannel ( file, system logs, smtp )
> and hbxml is actually the only way to manage xmls in Harbour.
> 

I know them well and also for me them have to be moved outside from xhb. 
Probably into hbmisc (as proposed from Viktor to be renamed to hbtools).


best regards

Francesco
From vailtom at gmail.com  Mon Oct 27 08:26:12 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Mon Oct 27 08:26:25 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
Message-ID: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>

Hi all!

I am of opinions on the page DOCUMENTATION > SAMPLES of the new site.
I need to know if I'm on the right track and if all agree that the
layout'm riding, because it is very difficult and full of details - if
you have to redo then will take a lot of work. :(

My intention would be easy to assemble a page to show some features of
Harbor and give prominence to its features, especially where visitors
could view the code and how would the screen.

We have also upgraded the sentence at the top of the site and the
links to download versions of the homepage.

I await comments, criticisms and suggestions, the URL is:
http://harbour-project.org/preview2/samples.html

Thank you
From druzus at acn.waw.pl  Mon Oct 27 08:32:38 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 08:32:17 2008
Subject: [Harbour] BUG: -gc3 problems on OSX/PPC
In-Reply-To: <4197D6D2-A0ED-4F9A-A702-CEC158BA6C06@syenar.hu>
References: <4197D6D2-A0ED-4F9A-A702-CEC158BA6C06@syenar.hu>
Message-ID: <20081027123238.GB21319@34-mo7-2.acn.waw.pl>

On Mon, 27 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Compiling this code on OSX (PPC) using -gc3:

Does it happen with -gc3 only or also with -gc2?
It looks like wrongly set double conversions.
In gencc.c[1096] is:
   hb_compGenCString( cargo->yyc, &pFunc->pCode[ lPCodePos + 1 ], sizeof( double ) );

It's wrong. Change it to:
   {
      double d = HB_PCODE_MKDOUBLE( &pFunc->pCode[ lPCodePos + 1 ] );
      hb_compGenCString( cargo->yyc, &d, sizeof( double ) );
   }

It should help.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Mon Oct 27 08:38:19 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Oct 27 08:38:23 2008
Subject: [Harbour] 2008-10-25 19:10 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <4905B32C.1080408@fsgiudice.com>
References: <20169808.post@talk.nabble.com> <4904EE0C.1000707@fsgiudice.com>
	<9257026e0810262211v3f044314k55113f236b713d54@mail.gmail.com>
	<4905B32C.1080408@fsgiudice.com>
Message-ID: <9257026e0810270538k5b0e24fbxbe205e50aba7bb41@mail.gmail.com>

On Mon, Oct 27, 2008 at 1:25 PM, Francesco Saverio Giudice <info@fsgiudice.com>

> I know them well and also for me them have to be moved outside from xhb.
> Probably into hbmisc (as proposed from Viktor to be renamed to hbtools).

IMHO logging and xml are useful, general and distinct tasks.

I suggest to create a contrib/hblog and contrib/hbxml so that every
developer can decide to use them or not. We can't exclude that in the
future we'll have other implementations.

I already have them "converted" to Harbour ( without hbcompat.ch ) and
synced with latest xhb sources.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Mon Oct 27 08:38:46 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 08:38:54 2008
Subject: [Harbour] 2008-10-25 19:10 UTC-0800 Pritpal
	Bedi	(pritpal@vouchcac.com)
In-Reply-To: <4905B32C.1080408@fsgiudice.com>
References: <20169808.post@talk.nabble.com> <4904EE0C.1000707@fsgiudice.com>
	<9257026e0810262211v3f044314k55113f236b713d54@mail.gmail.com>
	<4905B32C.1080408@fsgiudice.com>
Message-ID: <D5890C46-1E96-4E34-BACB-E62FA57D32A7@syenar.hu>

These are xhb compatibility functions with xhb specific
implementations and names, headers. They can be used
without any kind of side effects by linking xhb lib.

I see no point in picking selected xhb functions
and shuffling them around to other libs. This creates
far more problems than it may solve.

Rather, should we move hbdbgfx to hbmisc?

BTW, I see in hbdbgfx that log file is opened/closed
on each call. If performance is an issue (it was in my
case), the handle could be left open, and this way
it's about ten times faster (measured on local disk),
even with locks/flush implemented.

Brgds,
Viktor

On 2008.10.27., at 13:25, Francesco Saverio Giudice wrote:

> Hi Lorenzo,
>
> Il 27/10/2008 6.11, Lorenzo Fiorini ha scritto:
>> On Sun, Oct 26, 2008 at 11:24 PM, Francesco Saverio Giudice
>> <info@fsgiudice.com> wrote:
>>> if you added this function thinking that I miss it, note that  
>>> correct
>>> hb_OutDebug() is in xhb lib and you need to add it to link phase.
>>> I think that we can move hblog.prg and hboutdbg.c in hbdbgfx lib.
>> As I said time ago inside xhb there are two libs that have nothing to
>> do with xhb itself that are hbxml and hblog that are tested and
>> documented.
>> hblog is multiplatform and multichannel ( file, system logs, smtp )
>> and hbxml is actually the only way to manage xmls in Harbour.
>
> I know them well and also for me them have to be moved outside from  
> xhb. Probably into hbmisc (as proposed from Viktor to be renamed to  
> hbtools).
>
>
> best regards
>
> Francesco
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Oct 27 08:44:41 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 08:44:49 2008
Subject: [Harbour] 2008-10-25 19:10 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <9257026e0810270538k5b0e24fbxbe205e50aba7bb41@mail.gmail.com>
References: <20169808.post@talk.nabble.com> <4904EE0C.1000707@fsgiudice.com>
	<9257026e0810262211v3f044314k55113f236b713d54@mail.gmail.com>
	<4905B32C.1080408@fsgiudice.com>
	<9257026e0810270538k5b0e24fbxbe205e50aba7bb41@mail.gmail.com>
Message-ID: <11DF251B-CC3C-4563-A10F-8222E45FD718@syenar.hu>

>> I know them well and also for me them have to be moved outside from  
>> xhb.
>> Probably into hbmisc (as proposed from Viktor to be renamed to  
>> hbtools).
>
> IMHO logging and xml are useful, general and distinct tasks.
>
> I suggest to create a contrib/hblog and contrib/hbxml so that every
> developer can decide to use them or not. We can't exclude that in the
> future we'll have other implementations.

I strongly disagree with this. Everyone can freely
use this by linking xhb lib.

If there is anything that can be done to untie current
implementation living inside xhb from other xhb parts,
we should do it right there.

Brgds,
Viktor

From labitas at gmail.com  Mon Oct 27 08:59:23 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Mon Oct 27 08:59:27 2008
Subject: [Harbour] GTWIN multiple consoles
Message-ID: <2386af1b0810270559r59bd577n3f95b3a70f8d2d56@mail.gmail.com>

Hi, all

Is there possibility in Harbour to have multiple consoles as in GTWVT ?

Trouble is that I don't know *nix systems interaction with console scenarios .
In windows systems, at least in XP, user can have as many consoles as need,
but only one console can be _attached_ to process. An application will have to
detach itself from any console prior to attaching itself to a new console.
You can read more in article:

http://msdn.microsoft.com/en-us/library/ms971319(printer).aspx

Is it possible ?

Best regards,
Saulius
From druzus at acn.waw.pl  Mon Oct 27 09:13:49 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 09:13:29 2008
Subject: [Harbour] A Bug in TBrowse Class
In-Reply-To: <15409C68-7E7B-402E-97AA-F8A0443E459D@syenar.hu>
References: <20169788.post@talk.nabble.com>
	<15409C68-7E7B-402E-97AA-F8A0443E459D@syenar.hu>
Message-ID: <20081027131349.GA3217@34-mo7-2.acn.waw.pl>

On Mon, 27 Oct 2008, Szak?ts Viktor wrote:

Hi,

> While experimenting with Darwin GTXWC build, I just
> got the exact same error. (never ever got it before)
> ---
> ErrorMessage=     Error(2) BASE/1066 Argument error: conditional
> ErrorCategory=    EG_ARG (1)
> ErrorOS=          Nincs hiba (0)
> ErrorArgs=        NIL
> ErrorFlags=
> ErrorRetries=     0
> CallStack=        TBROWSE:STABILIZE (794)
> ---

It does not look like TBROWSE problem but rather some bad side effect
of other modifications. There were some modifications in SVN which may
interact with this.
First I suggest to check if it's not a problem with -gc3 output.
It's possible that we have here some other unfixed yet typos - this
mode was never extensively tested.

If you can confirm that it's bound with it then it should reduce
the problem and help to locate the reason.
Also some self contain example can be very useful and should be
enough for me to find exact reason of the problem and make the fix.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Oct 27 09:25:36 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 09:25:45 2008
Subject: [Harbour] BUG: -gc3 problems on OSX/PPC
In-Reply-To: <20081027123238.GB21319@34-mo7-2.acn.waw.pl>
References: <4197D6D2-A0ED-4F9A-A702-CEC158BA6C06@syenar.hu>
	<20081027123238.GB21319@34-mo7-2.acn.waw.pl>
Message-ID: <25379EEB-31DC-4419-A29F-409069C3B4F8@syenar.hu>

Hi Przemek,

> Does it happen with -gc3 only or also with -gc2?

No, only with -gc3. I've only tested this on Darwin PPC,
so I don't know about Darwin Intel, but for sure it
does work for Windows/Intel.

> It looks like wrongly set double conversions.
> In gencc.c[1096] is:
>   hb_compGenCString( cargo->yyc, &pFunc->pCode[ lPCodePos + 1 ],  
> sizeof( double ) );
>
> It's wrong. Change it to:
>   {
>      double d = HB_PCODE_MKDOUBLE( &pFunc->pCode[ lPCodePos + 1 ] );
>      hb_compGenCString( cargo->yyc, &d, sizeof( double ) );
>   }
>
> It should help.

I've tried this, but it didn't help for either
problems.

Maybe the problem isn't with the generated
code, as Darwin/PPC generates exactly the same C
code as the Windows/Intel Harbour. Yet, the Darwin
is wrong when run.

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Mon Oct 27 09:42:00 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Oct 27 09:42:04 2008
Subject: [Harbour] 2008-10-25 19:10 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <11DF251B-CC3C-4563-A10F-8222E45FD718@syenar.hu>
References: <20169808.post@talk.nabble.com> <4904EE0C.1000707@fsgiudice.com>
	<9257026e0810262211v3f044314k55113f236b713d54@mail.gmail.com>
	<4905B32C.1080408@fsgiudice.com>
	<9257026e0810270538k5b0e24fbxbe205e50aba7bb41@mail.gmail.com>
	<11DF251B-CC3C-4563-A10F-8222E45FD718@syenar.hu>
Message-ID: <9257026e0810270642i63bf7d0bnf0531def78fd2c61@mail.gmail.com>

On Mon, Oct 27, 2008 at 1:44 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> If there is anything that can be done to untie current
> implementation living inside xhb from other xhb parts,
> we should do it right there.

IMHO xhb has wrongly mixed libs and "language compatibility services".

hblog and hbxml are libs that comes from xHarbour like were tip, cgi,
hbinet, pgsql and many others.

Should we move to xhb whatever has been borrowed from xHarbour?

best regards,
Lorenzo
From harbour.01 at syenar.hu  Mon Oct 27 09:48:03 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 09:48:09 2008
Subject: [Harbour] 2008-10-27 14:47 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9383a$Blat.v2.6.2$a209ec53$bb8b539f51e@127.0.0.1>

2008-10-27 14:47 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbextern.ch
  * source/rtl/philes.c
    + Added HB_FLOCK() / HB_FUNLOCK() file locking 
      functions.
      [TOMERGE 1.0]

  * source/rtl/tget.prg
    ! Accessing of Get() variables below made 
      C5.x compatible when a new value was 
      assigned to them as function call, rather 
      then normal assigment.
      :buffer, :changed, :clear, :col, :colorSpec
      :minus, :pos, :row, :subScript, :postBlock, 
      :preBlock, :cargo, :exitState, :reader.
    ; NOTE: Please report if any of the side cases 
            still don't work.
      [TOMERGE 1.0]
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Oct 27 09:50:55 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 09:51:02 2008
Subject: [Harbour] A Bug in TBrowse Class
In-Reply-To: <20081027131349.GA3217@34-mo7-2.acn.waw.pl>
References: <20169788.post@talk.nabble.com>
	<15409C68-7E7B-402E-97AA-F8A0443E459D@syenar.hu>
	<20081027131349.GA3217@34-mo7-2.acn.waw.pl>
Message-ID: <6AEE7E52-6112-4824-A996-5C9E630544E3@syenar.hu>

Hi Przemek,

It's now very easy to exploit by going
to the bottom of the browse with DOWN button,
then go up to make the screen scroll one
position, then go down to the bottom again.
The crash happens at that point.

Simple BROWSE() call will do.

r9693 (with -gc3) was still okay,
r9732 (with -gc3) is already wrong.

I don't think this would directly affect it.

Brgds,
Viktor

On 2008.10.27., at 14:13, Przemyslaw Czerpak wrote:

> On Mon, 27 Oct 2008, Szak?ts Viktor wrote:
>
> Hi,
>
>> While experimenting with Darwin GTXWC build, I just
>> got the exact same error. (never ever got it before)
>> ---
>> ErrorMessage=     Error(2) BASE/1066 Argument error: conditional
>> ErrorCategory=    EG_ARG (1)
>> ErrorOS=          Nincs hiba (0)
>> ErrorArgs=        NIL
>> ErrorFlags=
>> ErrorRetries=     0
>> CallStack=        TBROWSE:STABILIZE (794)
>> ---
>
> It does not look like TBROWSE problem but rather some bad side effect
> of other modifications. There were some modifications in SVN which may
> interact with this.
> First I suggest to check if it's not a problem with -gc3 output.
> It's possible that we have here some other unfixed yet typos - this
> mode was never extensively tested.
>
> If you can confirm that it's bound with it then it should reduce
> the problem and help to locate the reason.
> Also some self contain example can be very useful and should be
> enough for me to find exact reason of the problem and make the fix.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Mon Oct 27 09:52:42 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 09:52:22 2008
Subject: [Harbour] BUG: -gc3 problems on OSX/PPC
In-Reply-To: <25379EEB-31DC-4419-A29F-409069C3B4F8@syenar.hu>
References: <4197D6D2-A0ED-4F9A-A702-CEC158BA6C06@syenar.hu>
	<20081027123238.GB21319@34-mo7-2.acn.waw.pl>
	<25379EEB-31DC-4419-A29F-409069C3B4F8@syenar.hu>
Message-ID: <20081027135242.GB3217@34-mo7-2.acn.waw.pl>

On Mon, 27 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

>> Does it happen with -gc3 only or also with -gc2?
> No, only with -gc3. I've only tested this on Darwin PPC,
> so I don't know about Darwin Intel, but for sure it
> does work for Windows/Intel.
>> It looks like wrongly set double conversions.
>> In gencc.c[1096] is:
>>   hb_compGenCString( cargo->yyc, &pFunc->pCode[ lPCodePos + 1 ], sizeof( 
>> double ) );
>> It's wrong. Change it to:
>>   {
>>      double d = HB_PCODE_MKDOUBLE( &pFunc->pCode[ lPCodePos + 1 ] );
>>      hb_compGenCString( cargo->yyc, &d, sizeof( double ) );
>>   }
>> It should help.
> I've tried this, but it didn't help for either
> problems.

Have you made full clean build?
It should help if -gc2 works correctly.

> Maybe the problem isn't with the generated
> code, as Darwin/PPC generates exactly the same C
> code as the Windows/Intel Harbour.

What is wrong because it does not use IEEE758 little endian double
values.

> Yet, the Darwin is wrong when run.

No, the problem is with generated code.
You can also try to recompile Harbour with HB_FORCE_IEEE754_DOUBLE
macro but for me the above modification should be enough.
Please check if it changes generated code. BTW it's a real fix
and should be committed even if it's not enough in this case
what looks strange for me.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Oct 27 10:00:09 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 10:00:19 2008
Subject: [Harbour] 2008-10-25 19:10 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <9257026e0810270642i63bf7d0bnf0531def78fd2c61@mail.gmail.com>
References: <20169808.post@talk.nabble.com> <4904EE0C.1000707@fsgiudice.com>
	<9257026e0810262211v3f044314k55113f236b713d54@mail.gmail.com>
	<4905B32C.1080408@fsgiudice.com>
	<9257026e0810270538k5b0e24fbxbe205e50aba7bb41@mail.gmail.com>
	<11DF251B-CC3C-4563-A10F-8222E45FD718@syenar.hu>
	<9257026e0810270642i63bf7d0bnf0531def78fd2c61@mail.gmail.com>
Message-ID: <78F32165-BF12-4742-AF4F-A3F7E9162362@syenar.hu>


On 2008.10.27., at 14:42, Lorenzo Fiorini wrote:

> On Mon, Oct 27, 2008 at 1:44 PM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>> If there is anything that can be done to untie current
>> implementation living inside xhb from other xhb parts,
>> we should do it right there.
>
> IMHO xhb has wrongly mixed libs and "language compatibility services".
>
> hblog and hbxml are libs that comes from xHarbour like were tip, cgi,
> hbinet, pgsql and many others.
>
> Should we move to xhb whatever has been borrowed from xHarbour?

Yes, that's the purpose of this lib.

hbxml clearly blocks everything else that could
come as XML for Harbour implementation. Logging
facilities are very weak and heavy IMO, so they
should stay there IMO.

_Moving_ them is not an option, as firstly ppl
won't find it where these would belong (xhb.lib),
moving them would unlock the compatibility
requirement with xhb, so ppl wanting to migrate
will have problems.

If we _copy_ them to another lib, on one hand
we double maintenance work and create ambiguity
by having almost identical duplicate copies of
the same code, and make it impossible to use it
for xhb.lib users.

Lastly, and this hasn't been answered yet by
you, yet it seems the most important question:

What is the problem with using xhb.lib if you
need this functionality? It's there, maintained
and working.

Brgds,
Viktor

From vailtom at gmail.com  Mon Oct 27 10:06:57 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Mon Oct 27 10:07:00 2008
Subject: [Harbour] Re: Harbour Web site - Preview #2 (Update)
In-Reply-To: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
Message-ID: <531d7a750810270706o7690113cs6018fa81f8d2c2fb@mail.gmail.com>

I just realized that the translation of this page was weird.
:S
From harbour.01 at syenar.hu  Mon Oct 27 10:12:15 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 10:12:22 2008
Subject: [Harbour] BUG: -gc3 problems on OSX/PPC
In-Reply-To: <20081027135242.GB3217@34-mo7-2.acn.waw.pl>
References: <4197D6D2-A0ED-4F9A-A702-CEC158BA6C06@syenar.hu>
	<20081027123238.GB21319@34-mo7-2.acn.waw.pl>
	<25379EEB-31DC-4419-A29F-409069C3B4F8@syenar.hu>
	<20081027135242.GB3217@34-mo7-2.acn.waw.pl>
Message-ID: <9EEAA3D5-A185-42CF-9264-659D2DB1A7DA@syenar.hu>

>>
Hi Przemek,

>> I've tried this, but it didn't help for either
>> problems.
>
> Have you made full clean build?

I did.

> It should help if -gc2 works correctly.
>
>> Maybe the problem isn't with the generated
>> code, as Darwin/PPC generates exactly the same C
>> code as the Windows/Intel Harbour.
>
> What is wrong because it does not use IEEE758 little endian double
> values.

Maybe I've made a mistake implementing the
code. Can be anything.

> Please check if it changes generated code. BTW it's a real fix
> and should be committed even if it's not enough in this case
> what looks strange for me.

It didn't change generated code for some reason.
(tested with small sample).

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Oct 27 10:13:56 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 10:14:02 2008
Subject: [Harbour] A Bug in TBrowse Class
In-Reply-To: <20081027131349.GA3217@34-mo7-2.acn.waw.pl>
References: <20169788.post@talk.nabble.com>
	<15409C68-7E7B-402E-97AA-F8A0443E459D@syenar.hu>
	<20081027131349.GA3217@34-mo7-2.acn.waw.pl>
Message-ID: <EC5137FB-7685-48B7-A2B9-BFCD6F604E19@syenar.hu>

I suspect it's the hb_AINS()/hb_ADEL() modification,
but first quick fixes made it just worse.

Brgds,
Viktor

On 2008.10.27., at 14:13, Przemyslaw Czerpak wrote:

> On Mon, 27 Oct 2008, Szak?ts Viktor wrote:
>
> Hi,
>
>> While experimenting with Darwin GTXWC build, I just
>> got the exact same error. (never ever got it before)
>> ---
>> ErrorMessage=     Error(2) BASE/1066 Argument error: conditional
>> ErrorCategory=    EG_ARG (1)
>> ErrorOS=          Nincs hiba (0)
>> ErrorArgs=        NIL
>> ErrorFlags=
>> ErrorRetries=     0
>> CallStack=        TBROWSE:STABILIZE (794)
>> ---
>
> It does not look like TBROWSE problem but rather some bad side effect
> of other modifications. There were some modifications in SVN which may
> interact with this.
> First I suggest to check if it's not a problem with -gc3 output.
> It's possible that we have here some other unfixed yet typos - this
> mode was never extensively tested.
>
> If you can confirm that it's bound with it then it should reduce
> the problem and help to locate the reason.
> Also some self contain example can be very useful and should be
> enough for me to find exact reason of the problem and make the fix.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Oct 27 10:20:13 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 10:20:19 2008
Subject: [Harbour] 2008-10-27 15:18 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9383f$Blat.v2.6.2$206265fb$119cc067a02@127.0.0.1>

2008-10-27 15:18 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/tbrowse.prg
  * source/debug/debugger.prg
    ! Cleaned hb_AINS()/hb_ADEL() usage after changing the 
      default of the last parameter.
      Should fix the recent TBrowse() crash.
    ; NOTE: I'll rethink the defaulting situation at least 
            for hb_AINS().
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Oct 27 10:22:34 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 10:22:44 2008
Subject: [Harbour] BUG: -gc3 problems on OSX/PPC
In-Reply-To: <20081027135242.GB3217@34-mo7-2.acn.waw.pl>
References: <4197D6D2-A0ED-4F9A-A702-CEC158BA6C06@syenar.hu>
	<20081027123238.GB21319@34-mo7-2.acn.waw.pl>
	<25379EEB-31DC-4419-A29F-409069C3B4F8@syenar.hu>
	<20081027135242.GB3217@34-mo7-2.acn.waw.pl>
Message-ID: <7FECFEA9-C76B-4C6B-8525-7A7B17F03347@syenar.hu>

Forgot to install. Now it's okay. Thanks!

Brgds,
Viktor

On 2008.10.27., at 14:52, Przemyslaw Czerpak wrote:

> On Mon, 27 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>>> Does it happen with -gc3 only or also with -gc2?
>> No, only with -gc3. I've only tested this on Darwin PPC,
>> so I don't know about Darwin Intel, but for sure it
>> does work for Windows/Intel.
>>> It looks like wrongly set double conversions.
>>> In gencc.c[1096] is:
>>>  hb_compGenCString( cargo->yyc, &pFunc->pCode[ lPCodePos + 1 ],  
>>> sizeof(
>>> double ) );
>>> It's wrong. Change it to:
>>>  {
>>>     double d = HB_PCODE_MKDOUBLE( &pFunc->pCode[ lPCodePos + 1 ] );
>>>     hb_compGenCString( cargo->yyc, &d, sizeof( double ) );
>>>  }
>>> It should help.
>> I've tried this, but it didn't help for either
>> problems.
>
> Have you made full clean build?
> It should help if -gc2 works correctly.
>
>> Maybe the problem isn't with the generated
>> code, as Darwin/PPC generates exactly the same C
>> code as the Windows/Intel Harbour.
>
> What is wrong because it does not use IEEE758 little endian double
> values.
>
>> Yet, the Darwin is wrong when run.
>
> No, the problem is with generated code.
> You can also try to recompile Harbour with HB_FORCE_IEEE754_DOUBLE
> macro but for me the above modification should be enough.
> Please check if it changes generated code. BTW it's a real fix
> and should be committed even if it's not enough in this case
> what looks strange for me.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Oct 27 10:24:34 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 10:24:40 2008
Subject: [Harbour] 2008-10-27 15:24 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9383f$Blat.v2.6.2$bbf353fb$4eca4878270@127.0.0.1>

2008-10-27 15:24 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/compiler/gencc.c
    ! Fixed -gc3 double number handling problem.
      Many thanks to Przemek for the fix.
      [TOMERGE 1.0]
--
Brgds,
Viktor

From druzus at acn.waw.pl  Mon Oct 27 10:40:09 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 10:39:50 2008
Subject: [Harbour] 2008-10-27 15:18 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c9383f$Blat.v2.6.2$206265fb$119cc067a02@127.0.0.1>
References: <01c9383f$Blat.v2.6.2$206265fb$119cc067a02@127.0.0.1>
Message-ID: <20081027144009.GA6720@34-mo7-2.acn.waw.pl>

On Mon, 27 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

>   * source/rtl/tbrowse.prg
>   * source/debug/debugger.prg
>     ! Cleaned hb_AINS()/hb_ADEL() usage after changing the 
>       default of the last parameter.
>       Should fix the recent TBrowse() crash.

Thank you. I've just wanted to ask you about it.

>     ; NOTE: I'll rethink the defaulting situation at least 
>             for hb_AINS().

I think it should be reverted. Looks that previous behavior was more
natural.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Mon Oct 27 11:36:53 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Oct 27 11:36:56 2008
Subject: [Harbour] 2008-10-25 19:10 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <78F32165-BF12-4742-AF4F-A3F7E9162362@syenar.hu>
References: <20169808.post@talk.nabble.com> <4904EE0C.1000707@fsgiudice.com>
	<9257026e0810262211v3f044314k55113f236b713d54@mail.gmail.com>
	<4905B32C.1080408@fsgiudice.com>
	<9257026e0810270538k5b0e24fbxbe205e50aba7bb41@mail.gmail.com>
	<11DF251B-CC3C-4563-A10F-8222E45FD718@syenar.hu>
	<9257026e0810270642i63bf7d0bnf0531def78fd2c61@mail.gmail.com>
	<78F32165-BF12-4742-AF4F-A3F7E9162362@syenar.hu>
Message-ID: <9257026e0810270836p14b9a281y972e5d5a0135e4cd@mail.gmail.com>

On Mon, Oct 27, 2008 at 3:00 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Lastly, and this hasn't been answered yet by
> you, yet it seems the most important question:
>
> What is the problem with using xhb.lib if you
> need this functionality? It's there, maintained
> and working.

Because xhb makes too much things:

- cstruct
- freadlin
- hbmsgs
- hbwith
- xhbqself
- xhbfunc
- hbcrypt
- ...

that I don't need and that can potentially change normal Harbour behaviour.

F.e. is HB_DESERIALIZE in rtl the same as the one in xhb?

And then why contrib/hbdbgfx has been added if there is already xhb?

best regards,
Lorenzo
From druzus at acn.waw.pl  Mon Oct 27 11:37:36 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 11:37:15 2008
Subject: [Harbour] 2008-10-27 12:03 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c93824$Blat.v2.6.2$b3d8e636$b80290795e2@127.0.0.1>
References: <01c93824$Blat.v2.6.2$b3d8e636$b80290795e2@127.0.0.1>
Message-ID: <20081027153736.GA2201@34-mo7-2.acn.waw.pl>

On Mon, 27 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> 2008-10-27 12:03 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * include/hbsetup.h
>     * Mapping snprintf() calls to hb_snprintf().

It redirects all calls to snprintf() into hb_snprintf() for all compilers.
It means that it disables also important warnings because parameters are not
longer validated with passed string format.
It may be source of bad bugs in the future. I think that at least for one
compiler used with different architectures we should keep original snprintf()
calls. GCC is good candidate here with the exception to older DJGPP versions.
Otherwise we should declare this function using special C compiler attributes
to inform C compiler that it should make such validation. Of course if C
compiler gives such functionality. GCC does.

best regards,
Przemek
From toninhofwi at yahoo.com.br  Mon Oct 27 13:04:03 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Oct 27 12:01:40 2008
Subject: [Harbour] ActiveX class
Message-ID: <susbg4tcbq2lvg7vbrhlcelkgso2a2q8im@4ax.com>

Hi ppl.

Are there any ActiveX class for harbour?  

Thanks and best regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From mbelgrano at deltain.it  Mon Oct 27 12:19:00 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Oct 27 12:19:49 2008
Subject: [Harbour] ActiveX class
In-Reply-To: <susbg4tcbq2lvg7vbrhlcelkgso2a2q8im@4ax.com>
References: <susbg4tcbq2lvg7vbrhlcelkgso2a2q8im@4ax.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0EA@SRV02.deltain.net>

Commercial By xavier and fivewin
Open source by t- oohg, , hwgui , Minigui, t-gtk, but list will be incomplete

Oohg is documented here http://www.oohg.org/index.php?option=com_content&task=view&id=41&Itemid=35
Hw gui http://objectmix.com/xharbour/370083-hwgui-ocx-now-you-can.html

...

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Toninho@fwi
Sent: Monday, October 27, 2008 6:04 PM
To: harbour@harbour-project.org
Subject: [Harbour] ActiveX class

Hi ppl.

Are there any ActiveX class for harbour?  

Thanks and best regards,

Toninho.

__________________________________________________
Fa?a liga??es para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From toninhofwi at yahoo.com.br  Mon Oct 27 13:33:41 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Oct 27 12:31:15 2008
Subject: [Harbour] ActiveX class
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F0EA@SRV02.deltain.net>
References: <susbg4tcbq2lvg7vbrhlcelkgso2a2q8im@4ax.com>
	<AFB948164110ED43B5EB849E8DEEF03815F0EA@SRV02.deltain.net>
Message-ID: <epubg418b2r2v5s9c80s4ja0th5jh048d7@4ax.com>

>Commercial By xavier and fivewin
>Open source by t- oohg, , hwgui , Minigui, t-gtk, but list will be incomplete
>
>Oohg is documented here http://www.oohg.org/index.php?option=com_content&task=view&id=41&Itemid=35
>Hw gui http://objectmix.com/xharbour/370083-hwgui-ocx-now-you-can.html

Thanks Massimo, but I?m looking for a "native" harbour class.

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From druzus at acn.waw.pl  Mon Oct 27 12:37:17 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 12:36:56 2008
Subject: [Harbour] 2008-10-25 19:10 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <9257026e0810270836p14b9a281y972e5d5a0135e4cd@mail.gmail.com>
References: <20169808.post@talk.nabble.com> <4904EE0C.1000707@fsgiudice.com>
	<9257026e0810262211v3f044314k55113f236b713d54@mail.gmail.com>
	<4905B32C.1080408@fsgiudice.com>
	<9257026e0810270538k5b0e24fbxbe205e50aba7bb41@mail.gmail.com>
	<11DF251B-CC3C-4563-A10F-8222E45FD718@syenar.hu>
	<9257026e0810270642i63bf7d0bnf0531def78fd2c61@mail.gmail.com>
	<78F32165-BF12-4742-AF4F-A3F7E9162362@syenar.hu>
	<9257026e0810270836p14b9a281y972e5d5a0135e4cd@mail.gmail.com>
Message-ID: <20081027163717.GA8871@34-mo7-2.acn.waw.pl>

On Mon, 27 Oct 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> that I don't need and that can potentially change normal Harbour behaviour.
> F.e. is HB_DESERIALIZE in rtl the same as the one in xhb?

XHB lib does not have HB_DESERIALIZE. It has only HB_DESERIALBEGIN()
HB_DESERIALNEXT() redirected to Harbour core serialization code but
there are in practice dummy functions.
In xHarbour serialization code still have more or less critical bugs
and we are not binary compatible here and probably we will never be.
I agree that some things in XHB library can change standard HVM behavior
and it's wrong that they are not separated because it effects also other
code.
We can exclude hbxml and logging system to separate library but so far we
haven't found developer who will create usable XML library which will
work also with large files with reasonable performance. HBXML code from
xHarbour can be used only for very small XML files and it's not production
ready. I can accept current state and move it to separate library but only
if we will change the name because I want to reserve HBXML for future XML
implementation in Harbour which will not have current limitation.
The logging system is different thing. For someone who wants to log critical
situations it's too heavy and in abnormal/critical situation can be itself
source of other exceptions. So it's not real logging system which can be
widely used by other code without side effects. It also forces additional
dependencies AFAIR it needs TIP library. We can move it to separate library
but in such case we will probably end dividing whole XHB lib code into many
small libraries. And here we will have problem with syncing this code with
xHarbour modification. It will be harder then now.

best regards,
Przemek
From mbelgrano at deltain.it  Mon Oct 27 12:47:48 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Oct 27 12:48:39 2008
Subject: [Harbour] ActiveX class
In-Reply-To: <epubg418b2r2v5s9c80s4ja0th5jh048d7@4ax.com>
References: <susbg4tcbq2lvg7vbrhlcelkgso2a2q8im@4ax.com><AFB948164110ED43B5EB849E8DEEF03815F0EA@SRV02.deltain.net>
	<epubg418b2r2v5s9c80s4ja0th5jh048d7@4ax.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0EB@SRV02.deltain.net>

What is a "native" harbour class?
Imo an ancive x need interaction with a GUI , So is impossible in pure harbour
Open source implementation start from same origin (Oscar Lira t) implemented in each harbour gui
AFAIK not exist implementation who work with gt

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Toninho@fwi
Sent: Monday, October 27, 2008 6:34 PM
To: Harbour Project Main Developer List.
Subject: Re: RE: [Harbour] ActiveX class

>Commercial By xavier and fivewin
>Open source by t- oohg, , hwgui , Minigui, t-gtk, but list will be incomplete
>
>Oohg is documented here http://www.oohg.org/index.php?option=com_content&task=view&id=41&Itemid=35
>Hw gui http://objectmix.com/xharbour/370083-hwgui-ocx-now-you-can.html

Thanks Massimo, but I?m looking for a "native" harbour class.

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Mon Oct 27 13:05:57 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 13:05:36 2008
Subject: [Harbour] 2008-10-27 18:05 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081027170557.GA563@34-mo7-2.acn.waw.pl>

2008-10-27 18:05 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbdefs.h
    + added HB_PRINTF_FORMAT() macro to declare functions with printf()
      like formatting parameters - now it works only for GCC compilers.

  * harbour/include/hbapi.h
    * declare hb_snprintf() with HB_PRINTF_FORMAT() attribute

  * harbour/source/rtl/philes.c
    + set FERROR() in HB_FLOCK()/HB_FUNLOCK()
    + accept extended lock attributes (WAIT/SHARE) in HB_FLOCK()

best regards
Przemek
From harbour.01 at syenar.hu  Mon Oct 27 13:27:37 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 13:27:46 2008
Subject: [Harbour] 2008-10-25 19:10 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <9257026e0810270836p14b9a281y972e5d5a0135e4cd@mail.gmail.com>
References: <20169808.post@talk.nabble.com> <4904EE0C.1000707@fsgiudice.com>
	<9257026e0810262211v3f044314k55113f236b713d54@mail.gmail.com>
	<4905B32C.1080408@fsgiudice.com>
	<9257026e0810270538k5b0e24fbxbe205e50aba7bb41@mail.gmail.com>
	<11DF251B-CC3C-4563-A10F-8222E45FD718@syenar.hu>
	<9257026e0810270642i63bf7d0bnf0531def78fd2c61@mail.gmail.com>
	<78F32165-BF12-4742-AF4F-A3F7E9162362@syenar.hu>
	<9257026e0810270836p14b9a281y972e5d5a0135e4cd@mail.gmail.com>
Message-ID: <F3B12F11-0B03-4B06-8BD1-EACCD7C0ABA9@syenar.hu>

>> What is the problem with using xhb.lib if you
>> need this functionality? It's there, maintained
>> and working.
>
> Because xhb makes too much things:

xhb does xhb compatibility. It's really not
our selection what is in there, and how those
things are implemented.

> - cstruct
> - freadlin
> - hbmsgs
> - hbwith
> - xhbqself
> - xhbfunc
> - hbcrypt
> - ...
>
> that I don't need and that can potentially change normal Harbour  
> behaviour.

I think the real point here is whether by simply
using these functionalities (xml/log) will automatically
pull such other dependent xhb parts which may badly
affect HVM/app behaviour?

If there are such parts, IMO it's a much cleaner way
to try resolve these dependencies if possible
(f.e. by simply moving those parts to different source
files, or splitting the low-level parts to multiple pieces).
And if this is not possible, maybe some conditional
switch for xhb lib could resolve this problem, maybe
for the benefit of everyone.

A XHB_STRICT macro could also be introduce, or
XHB_WITHOUT_CSTRUCT, if some parts are bothering
specific but valid uses.

> F.e. is HB_DESERIALIZE in rtl the same as the one in xhb?
>
> And then why contrib/hbdbgfx has been added if there is already xhb?

To me, it looked like a lighter / different
implementation than xhb logging. This addition
came without preceding discussion and with no
information about the purpose or implementation
details though, so I may be wrong. I got confused
when Francesco told that some parts of this
lib are residing in xhb. If there still are,
this lib is IMO wrong, or I'm missing some
information.

Brgds,
Viktor

From druzus at acn.waw.pl  Mon Oct 27 13:30:32 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 13:30:11 2008
Subject: [Harbour] 2008-10-27 10:37 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c93817$Blat.v2.6.2$c4e6ad28$2a4f68ca6a6@127.0.0.1>
References: <01c93817$Blat.v2.6.2$c4e6ad28$2a4f68ca6a6@127.0.0.1>
Message-ID: <20081027173032.GA14214@34-mo7-2.acn.waw.pl>

On Mon, 27 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> 2008-10-27 10:37 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>   * source/pp/ppcore.c
>     + Added '#pragma TEXTHIDDEN=<ON | OFF>' to control the 
>       existing -texthidden option to add light encoding to 
>       strings embedded in code. Since this goes with a slight 
>       performance hit and it's rarely used, it might be useful 
>       to turn it on only for code parts that really needs this.

We already had such functionality by:
   #pragma TEXTHIDDEN(<nMethod>)
f.e.:
   proc main()
      #pragma TEXTHIDDEN(1)
      ? "Hidden text"
      #pragma TEXTHIDDEN(0)
   return

and the above modification broke it so this code cannot be longer compiled.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Oct 27 13:32:06 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 13:32:13 2008
Subject: [Harbour] 2008-10-27 12:03 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20081027153736.GA2201@34-mo7-2.acn.waw.pl>
References: <01c93824$Blat.v2.6.2$b3d8e636$b80290795e2@127.0.0.1>
	<20081027153736.GA2201@34-mo7-2.acn.waw.pl>
Message-ID: <59677F87-060F-4DAA-9800-D24DBE14439D@syenar.hu>

Hi Przemek,

I see you already committed stuff related to this,
and this is exactly what I wanted to suggest.
You're right with this problem, I haven't thought of it.

As far as I got to know, different snprintf()
implementations mapped to this symbol are behaving
slightly differently, so there is an important
point in trying to make those behave along the
standard (like MSVC _snprintf() not appending
a '\0' char).

Feel free to modify as you want, and if this is
the case we can just leave snprintf() as a name
is our code, and remap when/as needed.

Brgds,
Viktor

On 2008.10.27., at 16:37, Przemyslaw Czerpak wrote:

> On Mon, 27 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> 2008-10-27 12:03 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>  * include/hbsetup.h
>>    * Mapping snprintf() calls to hb_snprintf().
>
> It redirects all calls to snprintf() into hb_snprintf() for all  
> compilers.
> It means that it disables also important warnings because parameters  
> are not
> longer validated with passed string format.
> It may be source of bad bugs in the future. I think that at least  
> for one
> compiler used with different architectures we should keep original  
> snprintf()
> calls. GCC is good candidate here with the exception to older DJGPP  
> versions.
> Otherwise we should declare this function using special C compiler  
> attributes
> to inform C compiler that it should make such validation. Of course  
> if C
> compiler gives such functionality. GCC does.
>
> best regards,
> Przemek

From harbour.01 at syenar.hu  Mon Oct 27 13:38:31 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 13:38:35 2008
Subject: [Harbour] 2008-10-27 18:38 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9385a$Blat.v2.6.2$d41f50ef$14e02438ee2c@127.0.0.1>

2008-10-27 18:38 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/pp/ppcore.c
    - Removed duplicate TEXTHIDDEN #pragma implementation.

  * source/vm/arrayshb.c
    * Reset defaults of last parameters of hb_AINS()/hb_ADEL()
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Oct 27 13:39:31 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 13:39:39 2008
Subject: [Harbour] 2008-10-27 10:37 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20081027173032.GA14214@34-mo7-2.acn.waw.pl>
References: <01c93817$Blat.v2.6.2$c4e6ad28$2a4f68ca6a6@127.0.0.1>
	<20081027173032.GA14214@34-mo7-2.acn.waw.pl>
Message-ID: <439E55BA-9EC3-40BA-AEDF-C56FBFE6018D@syenar.hu>

Hi Przemek,

Many thanks I didn't know this. It's now removed.

Brgds,
Viktor

On 2008.10.27., at 18:30, Przemyslaw Czerpak wrote:

> On Mon, 27 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> 2008-10-27 10:37 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>>  * source/pp/ppcore.c
>>    + Added '#pragma TEXTHIDDEN=<ON | OFF>' to control the
>>      existing -texthidden option to add light encoding to
>>      strings embedded in code. Since this goes with a slight
>>      performance hit and it's rarely used, it might be useful
>>      to turn it on only for code parts that really needs this.
>
> We already had such functionality by:
>   #pragma TEXTHIDDEN(<nMethod>)
> f.e.:
>   proc main()
>      #pragma TEXTHIDDEN(1)
>      ? "Hidden text"
>      #pragma TEXTHIDDEN(0)
>   return
>
> and the above modification broke it so this code cannot be longer  
> compiled.
>
> best regards,
> Przemek

From lorenzo.fiorini at gmail.com  Mon Oct 27 13:54:06 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Oct 27 13:54:09 2008
Subject: [Harbour] 2008-10-25 19:10 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <20081027163717.GA8871@34-mo7-2.acn.waw.pl>
References: <20169808.post@talk.nabble.com> <4904EE0C.1000707@fsgiudice.com>
	<9257026e0810262211v3f044314k55113f236b713d54@mail.gmail.com>
	<4905B32C.1080408@fsgiudice.com>
	<9257026e0810270538k5b0e24fbxbe205e50aba7bb41@mail.gmail.com>
	<11DF251B-CC3C-4563-A10F-8222E45FD718@syenar.hu>
	<9257026e0810270642i63bf7d0bnf0531def78fd2c61@mail.gmail.com>
	<78F32165-BF12-4742-AF4F-A3F7E9162362@syenar.hu>
	<9257026e0810270836p14b9a281y972e5d5a0135e4cd@mail.gmail.com>
	<20081027163717.GA8871@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0810271054i65111705rc778de13ee160df2@mail.gmail.com>

On Mon, Oct 27, 2008 at 5:37 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:
> XHB lib does not have HB_DESERIALIZE. It has only HB_DESERIALBEGIN()
> HB_DESERIALNEXT() redirected to Harbour core serialization code but
> there are in practice dummy functions.

This is the problem xhb has real functions, dummy functions, added functions.

> I agree that some things in XHB library can change standard HVM behavior
> and it's wrong that they are not separated because it effects also other
> code.

IMHO xhb should be used only by developers that want to port xHarbour
code "as it is".
Standard Harbour users should not have to use it.

> We can exclude hbxml and logging system to separate library but so far we
> haven't found developer who will create usable XML library which will
> work also with large files with reasonable performance. HBXML code from
> xHarbour can be used only for very small XML files and it's not production
> ready. I can accept current state and move it to separate library but only
> if we will change the name because I want to reserve HBXML for future XML
> implementation in Harbour which will not have current limitation.

The name is not a problem. Actually is the only code we have.

> The logging system is different thing. For someone who wants to log critical
> situations it's too heavy and in abnormal/critical situation can be itself
> source of other exceptions. So it's not real logging system which can be
> widely used by other code without side effects. It also forces additional
> dependencies AFAIR it needs TIP library. We can move it to separate library
> but in such case we will probably end dividing whole XHB lib code into many
> small libraries. And here we will have problem with syncing this code with
> xHarbour modification. It will be harder then now.

I agree but to me adding many small undocumented Win only "alternative
libs" like contrib/hbdbgfx seems not a better solution.

best regards,
Lorenzo
From druzus at acn.waw.pl  Mon Oct 27 13:58:09 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 13:57:48 2008
Subject: [Harbour] 2008-10-27 12:03 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <59677F87-060F-4DAA-9800-D24DBE14439D@syenar.hu>
References: <01c93824$Blat.v2.6.2$b3d8e636$b80290795e2@127.0.0.1>
	<20081027153736.GA2201@34-mo7-2.acn.waw.pl>
	<59677F87-060F-4DAA-9800-D24DBE14439D@syenar.hu>
Message-ID: <20081027175809.GA22663@34-mo7-2.acn.waw.pl>

On Mon, 27 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> As far as I got to know, different snprintf()
> implementations mapped to this symbol are behaving
> slightly differently, so there is an important
> point in trying to make those behave along the
> standard (like MSVC _snprintf() not appending
> a '\0' char).
> Feel free to modify as you want, and if this is
> the case we can just leave snprintf() as a name
> is our code, and remap when/as needed.

For sure this line in hbsetup.h:
   #define snprintf hb_snprintf
will have to be removed because it will break compilation in some
C compilers when C header files containing snpritf() declaration are
used with hbapi.h because our hb_snprintf does not have to use _exactly_
the same attributes as snprintf(). We can try to add it to hbapi.h after
hb_snprintf() declaration but it also isn't fully clean solution though
it should help as temporary workaround. Instead we should locate all
places where snprintf() is used and replace them with hb_snprintf().
Someone who use compiler which does not support snprintf() can make it
and easy validate final results by simple compilation without above
#define.

best regards,
Przemek
From bedipritpal at hotmail.com  Mon Oct 27 14:06:25 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Oct 27 14:06:29 2008
Subject: [Harbour] ERROR - /contrib/hbwin.lib
Message-ID: <20193026.post@talk.nabble.com>


Hello

MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
	bcc32.exe -c -q -d -Q -w -w-sig- -O2 -OS -Ov -Oi -Oc -I..\..\include
-DHB_FM_STATISTICS_OFF -DHB_GUI   -oobj\b32\win_prn2.obj .\win_prn2.c
.\win_prn2.c:
Error E2356 ..\..\include\hbapi.h 830: Type mismatch in redeclaration of
'hb_snprintf'
 + Full parser context
 + .\win_prn2.c, line 65: #include ..\..\include\hbapi.h
Error E2344 C:\Program Files\Borland\BDS\4.0\Include\stdio.h 212: Earlier
declaration of 'hb_snprintf'
 + Full parser context
 + .\win_prn2.c, line 65: #include ..\..\include\hbapi.h
*** 2 errors in Compile ***

** error 1 ** deleting obj\b32\win_prn2.obj

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/ERROR----contrib-hbwin.lib-tp20193026p20193026.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Mon Oct 27 14:11:47 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 14:11:29 2008
Subject: [Harbour] 2008-10-27 10:37 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <439E55BA-9EC3-40BA-AEDF-C56FBFE6018D@syenar.hu>
References: <01c93817$Blat.v2.6.2$c4e6ad28$2a4f68ca6a6@127.0.0.1>
	<20081027173032.GA14214@34-mo7-2.acn.waw.pl>
	<439E55BA-9EC3-40BA-AEDF-C56FBFE6018D@syenar.hu>
Message-ID: <20081027181146.GA15543@34-mo7-2.acn.waw.pl>

On Mon, 27 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Many thanks I didn't know this. It's now removed.

Thank you.
BTW This:
   #pragma TEXTHIDDEN=<nMethod>
also works.
Now only <nMethod> = 0 (disable) and 1 works.
In the future we may add other methods.
Anyhow if you want to distribute some PCODE with hidden internals
then I suggest to generate .hrb file and encode it using some
stronger algorithm. Then at runtime you can simply load it by:

   static s_hrbHandle
   cHrbBody := memoread( cHrbFile )
   cHrbBody := my_decode( cHrbBody )
   s_hrbHandle := hb_hrbLoad( cHrbBody )

best regards,
Przemek
From toninhofwi at yahoo.com.br  Mon Oct 27 15:18:19 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Oct 27 14:15:53 2008
Subject: [Harbour] ActiveX class
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F0EB@SRV02.deltain.net>
References: <susbg4tcbq2lvg7vbrhlcelkgso2a2q8im@4ax.com><AFB948164110ED43B5EB849E8DEEF03815F0EA@SRV02.deltain.net>
	<epubg418b2r2v5s9c80s4ja0th5jh048d7@4ax.com>
	<AFB948164110ED43B5EB849E8DEEF03815F0EB@SRV02.deltain.net>
Message-ID: <hr4cg49kkr25c8ii8mepd0nldshtj44o1m@4ax.com>

>What is a "native" harbour class?
>Imo an ancive x need interaction with a GUI , So is impossible in pure harbour
>Open source implementation start from same origin (Oscar Lira t) implemented in each harbour gui
>AFAIK not exist implementation who work with gt

Massimo, thanks. FWH have TActiveX inside it. For my mistake it was
GPFing but now is ok,

Thanks and best regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From druzus at acn.waw.pl  Mon Oct 27 14:17:27 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 14:17:08 2008
Subject: [Harbour] ERROR - /contrib/hbwin.lib
In-Reply-To: <20193026.post@talk.nabble.com>
References: <20193026.post@talk.nabble.com>
Message-ID: <20081027181727.GB15543@34-mo7-2.acn.waw.pl>

On Mon, 27 Oct 2008, Pritpal Bedi wrote:

Hi Pritpal.

> MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
> 	bcc32.exe -c -q -d -Q -w -w-sig- -O2 -OS -Ov -Oi -Oc -I..\..\include
> -DHB_FM_STATISTICS_OFF -DHB_GUI   -oobj\b32\win_prn2.obj .\win_prn2.c
> .\win_prn2.c:
> Error E2356 ..\..\include\hbapi.h 830: Type mismatch in redeclaration of
> 'hb_snprintf'
>  + Full parser context
>  + .\win_prn2.c, line 65: #include ..\..\include\hbapi.h
> Error E2344 C:\Program Files\Borland\BDS\4.0\Include\stdio.h 212: Earlier
> declaration of 'hb_snprintf'
>  + Full parser context
>  + .\win_prn2.c, line 65: #include ..\..\include\hbapi.h
> *** 2 errors in Compile ***

It's exactly the problem I was writing about in message to Viktor.
Remove:
   #define snprintf hb_snprintf

from include/hbsetup.h

best regards,
Przemek
From bedipritpal at hotmail.com  Mon Oct 27 14:22:28 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Oct 27 14:22:31 2008
Subject: [Harbour] ERROR - /contrib/hbwin.lib
In-Reply-To: <20081027181727.GB15543@34-mo7-2.acn.waw.pl>
References: <20193026.post@talk.nabble.com>
	<20081027181727.GB15543@34-mo7-2.acn.waw.pl>
Message-ID: <20193345.post@talk.nabble.com>


Thanks Przemek


Przemyslaw Czerpak-2 wrote:
> 
> 
> It's exactly the problem I was writing about in message to Viktor.
> Remove:
>    #define snprintf hb_snprintf
> 
> from include/hbsetup.h
> 
> 

Now it is working ok.

BTW did you see the bug I reported for CLASSes, before it was working ok.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/ERROR----contrib-hbwin.lib-tp20193026p20193345.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Mon Oct 27 14:24:45 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 14:24:52 2008
Subject: [Harbour] 2008-10-27 12:03 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20081027175809.GA22663@34-mo7-2.acn.waw.pl>
References: <01c93824$Blat.v2.6.2$b3d8e636$b80290795e2@127.0.0.1>
	<20081027153736.GA2201@34-mo7-2.acn.waw.pl>
	<59677F87-060F-4DAA-9800-D24DBE14439D@syenar.hu>
	<20081027175809.GA22663@34-mo7-2.acn.waw.pl>
Message-ID: <05A33546-529E-4732-8F15-CC0ED531E206@syenar.hu>

Hi Przemek,

Is it okay for you if I change all the snprintf()
calls to hb_snprintf() and you do the rest of the tweaking?

BTW, maybe you've missed it, but I've sent an e-mail
on strange #if behaviour. It's the same with MSVC:

---
#define DEF_A
#define DEF_B
#if defined( DEF_A ) && ! defined( DEF_B )
#error DEF_A AND NOT DEF_B
#endif
---

Brgds,
Viktor

On 2008.10.27., at 18:58, Przemyslaw Czerpak wrote:

> On Mon, 27 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> As far as I got to know, different snprintf()
>> implementations mapped to this symbol are behaving
>> slightly differently, so there is an important
>> point in trying to make those behave along the
>> standard (like MSVC _snprintf() not appending
>> a '\0' char).
>> Feel free to modify as you want, and if this is
>> the case we can just leave snprintf() as a name
>> is our code, and remap when/as needed.
>
> For sure this line in hbsetup.h:
>   #define snprintf hb_snprintf
> will have to be removed because it will break compilation in some
> C compilers when C header files containing snpritf() declaration are
> used with hbapi.h because our hb_snprintf does not have to use  
> _exactly_
> the same attributes as snprintf(). We can try to add it to hbapi.h  
> after
> hb_snprintf() declaration but it also isn't fully clean solution  
> though
> it should help as temporary workaround. Instead we should locate all
> places where snprintf() is used and replace them with hb_snprintf().
> Someone who use compiler which does not support snprintf() can make it
> and easy validate final results by simple compilation without above
> #define.
>
> best regards,
> Przemek

From harbour.01 at syenar.hu  Mon Oct 27 14:28:04 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 14:28:10 2008
Subject: [Harbour] 2008-10-25 19:10 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <9257026e0810271054i65111705rc778de13ee160df2@mail.gmail.com>
References: <20169808.post@talk.nabble.com> <4904EE0C.1000707@fsgiudice.com>
	<9257026e0810262211v3f044314k55113f236b713d54@mail.gmail.com>
	<4905B32C.1080408@fsgiudice.com>
	<9257026e0810270538k5b0e24fbxbe205e50aba7bb41@mail.gmail.com>
	<11DF251B-CC3C-4563-A10F-8222E45FD718@syenar.hu>
	<9257026e0810270642i63bf7d0bnf0531def78fd2c61@mail.gmail.com>
	<78F32165-BF12-4742-AF4F-A3F7E9162362@syenar.hu>
	<9257026e0810270836p14b9a281y972e5d5a0135e4cd@mail.gmail.com>
	<20081027163717.GA8871@34-mo7-2.acn.waw.pl>
	<9257026e0810271054i65111705rc778de13ee160df2@mail.gmail.com>
Message-ID: <357D915F-9366-4318-88E9-14ADE20DCBA3@syenar.hu>

>> I agree that some things in XHB library can change standard HVM  
>> behavior
>> and it's wrong that they are not separated because it effects also  
>> other
>> code.
>
> IMHO xhb should be used only by developers that want to port xHarbour
> code "as it is".
> Standard Harbour users should not have to use it.

I'd say it's for developers who need xhb specific
functionality not implemented in core Harbour.

> I agree but to me adding many small undocumented Win only "alternative
> libs" like contrib/hbdbgfx seems not a better solution.

I don't personally like it to have this lib
separately, and there is nothing that would
stop us moving it into hbmisc, renaming hbmisc
to hbtools, and/or tweaking hbdbgfx content
to be properly multiplatform and/or have any
kind of features we may imagine. Maybe we
can settle on a simple but powerful set of
logging features which may make more developers
happy. hbdbgfx code seems to be a good base.

BTW, if current functions are using xhb names,
we should change them to avoid collision.

It's also important to note, that in Harbour
SVN, we try to gather stuff which may be
useful for most developers. For speciality
stuff there is also the possibility to use
anything locally. Joy of open source.

Brgds,
Viktor

From dbtopas at dbtopas.lt  Mon Oct 27 14:33:31 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Oct 27 14:31:21 2008
Subject: [Harbour] 2008-10-27 12:03 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <05A33546-529E-4732-8F15-CC0ED531E206@syenar.hu>
References: <01c93824$Blat.v2.6.2$b3d8e636$b80290795e2@127.0.0.1>	<20081027153736.GA2201@34-mo7-2.acn.waw.pl>	<59677F87-060F-4DAA-9800-D24DBE14439D@syenar.hu>	<20081027175809.GA22663@34-mo7-2.acn.waw.pl>
	<05A33546-529E-4732-8F15-CC0ED531E206@syenar.hu>
Message-ID: <4906097B.1040704@dbtopas.lt>

Szak?ts Viktor wrote:
> BTW, maybe you've missed it, but I've sent an e-mail
> on strange #if behaviour. It's the same with MSVC:
> 
> ---
> #define DEF_A
> #define DEF_B
> #if defined( DEF_A ) && ! defined( DEF_B )
> #error DEF_A AND NOT DEF_B
> #endif

Hi,


this sound like MSVC preprocessor problem, see:

#if sizeof( MYSQL_ROW ) != sizeof( void* )
    #error "MySQLDD error: sizeof( MYSQL_ROW ) != sizeof( void* )"
#endif


I GUESS your case can be "fixed" by:

#if defined( DEF_A )
#if ! defined( DEF_B )
#error DEF_A AND NOT DEF_B
#endif
#endif


Best regards,
Mindaugas
From harbour.01 at syenar.hu  Mon Oct 27 14:39:18 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 14:39:24 2008
Subject: [Harbour] 2008-10-27 12:03 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <4906097B.1040704@dbtopas.lt>
References: <01c93824$Blat.v2.6.2$b3d8e636$b80290795e2@127.0.0.1>	<20081027153736.GA2201@34-mo7-2.acn.waw.pl>	<59677F87-060F-4DAA-9800-D24DBE14439D@syenar.hu>	<20081027175809.GA22663@34-mo7-2.acn.waw.pl>
	<05A33546-529E-4732-8F15-CC0ED531E206@syenar.hu>
	<4906097B.1040704@dbtopas.lt>
Message-ID: <6845A9C4-F472-4EA9-86EC-14F4E0102EFB@syenar.hu>

This is Harbour .prg code.

If harbour is run (any version, I've now tried with 1.0.1 final BCC55),
it prints: 'DEF_A AND NOT DEF_B'

If I copy the exact same code to a .c file and
try with a C compiler, there is nothing printed (with MSVC cl -W3),
which seems correct.

Brgds,
Viktor

On 2008.10.27., at 19:33, Mindaugas Kavaliauskas wrote:

> Szak?ts Viktor wrote:
>> BTW, maybe you've missed it, but I've sent an e-mail
>> on strange #if behaviour. It's the same with MSVC:
>> ---
>> #define DEF_A
>> #define DEF_B
>> #if defined( DEF_A ) && ! defined( DEF_B )
>> #error DEF_A AND NOT DEF_B
>> #endif
>
> Hi,
>
>
> this sound like MSVC preprocessor problem, see:
>
> #if sizeof( MYSQL_ROW ) != sizeof( void* )
>   #error "MySQLDD error: sizeof( MYSQL_ROW ) != sizeof( void* )"
> #endif
>
>
> I GUESS your case can be "fixed" by:
>
> #if defined( DEF_A )
> #if ! defined( DEF_B )
> #error DEF_A AND NOT DEF_B
> #endif
> #endif
>
>
> Best regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Mon Oct 27 14:49:26 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 14:49:06 2008
Subject: [Harbour] 2008-10-27 12:03 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <6845A9C4-F472-4EA9-86EC-14F4E0102EFB@syenar.hu>
References: <01c93824$Blat.v2.6.2$b3d8e636$b80290795e2@127.0.0.1>
	<20081027153736.GA2201@34-mo7-2.acn.waw.pl>
	<59677F87-060F-4DAA-9800-D24DBE14439D@syenar.hu>
	<20081027175809.GA22663@34-mo7-2.acn.waw.pl>
	<05A33546-529E-4732-8F15-CC0ED531E206@syenar.hu>
	<4906097B.1040704@dbtopas.lt>
	<6845A9C4-F472-4EA9-86EC-14F4E0102EFB@syenar.hu>
Message-ID: <20081027184926.GA15170@34-mo7-2.acn.waw.pl>

On Mon, 27 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> This is Harbour .prg code.
                  ^^^^
So please refresh in your mind what && does in .prg code ;-)

> If harbour is run (any version, I've now tried with 1.0.1 final BCC55),
> it prints: 'DEF_A AND NOT DEF_B'

Use '.and.', f.e.:

#if defined( DEF_A ) .and. defined( DEF_B )
   #stdout "DEF_A and DEF_B defined"
#endif

In this case you can also use bit operation and '&' operator because
defined() returns 0 or 1

best regards,
Przemek
From druzus at acn.waw.pl  Mon Oct 27 14:50:57 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 14:50:38 2008
Subject: [Harbour] ERROR - /contrib/hbwin.lib
In-Reply-To: <20193345.post@talk.nabble.com>
References: <20193026.post@talk.nabble.com>
	<20081027181727.GB15543@34-mo7-2.acn.waw.pl>
	<20193345.post@talk.nabble.com>
Message-ID: <20081027185057.GB15170@34-mo7-2.acn.waw.pl>

On Mon, 27 Oct 2008, Pritpal Bedi wrote:

Hi Pritpal,

> BTW did you see the bug I reported for CLASSes, before it was working ok.

I do not remember it. What's the problem?

best regards,
Przemek
From myorg63 at mail.ru  Mon Oct 27 14:53:48 2008
From: myorg63 at mail.ru (Petr Chornyj)
Date: Mon Oct 27 14:53:53 2008
Subject: [Harbour] tests\setkeys: Application Internal Error
Message-ID: <20193992.post@talk.nabble.com>


I'm run tests\setkeys, press F8 and get this:

Application Internal Error - E:\harbour-msvc8\tests\setkeys.exe
Terminated at: 2008.10.27 20:49:27
Unrecoverable error 6005: Exception error: 

    Exception Code:C0000005
    Exception Address:0040CE55
    EAX:00986D0C  EBX:004AF138  ECX:00000000  EDX:00981E04
    ESI:00000000  EDI:0097521C  EBP:0000000E
    CS:EIP:001B:0040CE55  SS:ESP:0023:0012FCD4
    DS:0023  ES:0023  FS:003B  GS:0000
    Flags:00010246
    CS:EIP: 8B 06 89 07 8B 4E 04 89 4F 04 8B 56 08 89 57 08
    SS:ESP: 0097521C 00981E5C 0041F4D2 0097521C 00000000 004AF278 00000000
0098219C 00408F91 0049F5B8 00000044 00000000 00000000 00000000 00000000
0040AADE

    C stack:
    EIP:     EBP:       Frame: OldEBP, RetAddr, Params...

Called from HB_SETKEYGET(0)
Called from SUBMAIN(99) in setkeys.prg
Called from (b)MAIN(88) in setkeys.prg
Called from HBGETLIST:GETDOSETKEY(0) in source\rtl\getsys.prg
Called from HBGETLIST:GETAPPLYKEY(0) in source\rtl\getsys.prg
Called from HBGETLIST:READER(0)
Called from HBGETLIST:READMODAL(0) in source\rtl\getsys.prg
Called from READMODAL(0) in source\rtl\getsys.prg
Called from MAIN(91) in setkeys.prg

Regards,
Petr

-- 
View this message in context: http://www.nabble.com/tests%5Csetkeys%3A-Application-Internal-Error-tp20193992p20193992.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Mon Oct 27 15:06:37 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 15:06:37 2008
Subject: [Harbour] 2008-10-27 20:06 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081027190637.GA2303@34-mo7-2.acn.waw.pl>

2008-10-27 20:06 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/setkey.c
    ! fixed GPF in HB_SETKEYGET() when bActive block is used

best regards
Przemek
From harbour.01 at syenar.hu  Mon Oct 27 15:12:30 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 15:12:36 2008
Subject: [Harbour] 2008-10-27 12:03 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20081027184926.GA15170@34-mo7-2.acn.waw.pl>
References: <01c93824$Blat.v2.6.2$b3d8e636$b80290795e2@127.0.0.1>
	<20081027153736.GA2201@34-mo7-2.acn.waw.pl>
	<59677F87-060F-4DAA-9800-D24DBE14439D@syenar.hu>
	<20081027175809.GA22663@34-mo7-2.acn.waw.pl>
	<05A33546-529E-4732-8F15-CC0ED531E206@syenar.hu>
	<4906097B.1040704@dbtopas.lt>
	<6845A9C4-F472-4EA9-86EC-14F4E0102EFB@syenar.hu>
	<20081027184926.GA15170@34-mo7-2.acn.waw.pl>
Message-ID: <CAF9C162-60BE-4492-B461-697EB67AB0CA@syenar.hu>

>>
Hi Przemek,

>> This is Harbour .prg code.
>                  ^^^^
> So please refresh in your mind what && does in .prg code ;-)

That's why I was asking if I was missing something :/

I fully thought we replicated the C way of #defines,
and I'm a bit puzzled on this syntax :(

[ There are probably some reasons for this, but I fully
forgot about the whole topic. ]

>> If harbour is run (any version, I've now tried with 1.0.1 final  
>> BCC55),
>> it prints: 'DEF_A AND NOT DEF_B'
>
> Use '.and.', f.e.:
>
> #if defined( DEF_A ) .and. defined( DEF_B )
>   #stdout "DEF_A and DEF_B defined"
> #endif
>
> In this case you can also use bit operation and '&' operator because
> defined() returns 0 or 1

Okay, many thanks, I'll need this:
'#if defined( DEF_A ) .and. .not. defined( DEF_B )'

This seems to work okay.

Brgds,
Viktor

From myorg63 at mail.ru  Mon Oct 27 15:20:07 2008
From: myorg63 at mail.ru (Petr Chornyj)
Date: Mon Oct 27 15:20:12 2008
Subject: [Harbour] 2008-10-27 20:06 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081027190637.GA2303@34-mo7-2.acn.waw.pl>
References: <20081027190637.GA2303@34-mo7-2.acn.waw.pl>
Message-ID: <20194486.post@talk.nabble.com>


Many Thanks! 

Regards,
Petr


Przemyslaw Czerpak-2 wrote:
> 
> 2008-10-27 20:06 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/rtl/setkey.c
>     ! fixed GPF in HB_SETKEYGET() when bActive block is used
> 

-- 
View this message in context: http://www.nabble.com/2008-10-27-20%3A06-UTC%2B0100-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp20194251p20194486.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Mon Oct 27 15:39:58 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 15:39:37 2008
Subject: [Harbour] 2008-10-27 12:03 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <CAF9C162-60BE-4492-B461-697EB67AB0CA@syenar.hu>
References: <01c93824$Blat.v2.6.2$b3d8e636$b80290795e2@127.0.0.1>
	<20081027153736.GA2201@34-mo7-2.acn.waw.pl>
	<59677F87-060F-4DAA-9800-D24DBE14439D@syenar.hu>
	<20081027175809.GA22663@34-mo7-2.acn.waw.pl>
	<05A33546-529E-4732-8F15-CC0ED531E206@syenar.hu>
	<4906097B.1040704@dbtopas.lt>
	<6845A9C4-F472-4EA9-86EC-14F4E0102EFB@syenar.hu>
	<20081027184926.GA15170@34-mo7-2.acn.waw.pl>
	<CAF9C162-60BE-4492-B461-697EB67AB0CA@syenar.hu>
Message-ID: <20081027193958.GA10488@34-mo7-2.acn.waw.pl>

On Mon, 27 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

>>> This is Harbour .prg code.
>> So please refresh in your mind what && does in .prg code ;-)
> That's why I was asking if I was missing something :/
> I fully thought we replicated the C way of #defines,
> and I'm a bit puzzled on this syntax :(

Because it is fully replicated. There is even code like:
   case HB_PP_TOKEN_AMPERSAND:
      *piNextPrec = HB_PP_PREC_BIT;
      /* It will not work because && will be stripped as comment */
      if( pNext && HB_PP_TOKEN_TYPE( pNext->type ) == HB_PP_TOKEN_AMPERSAND &&
          pNext->spaces == 0 )
      {
         *piNextOper = HB_PP_TOKEN_AND;
         pNext = pNext->pNext;
      }
      break;

See the comment. To be precise this code can be activated in some cases
when #if will be result of some other PP directives.
The problem is that before we reach this state we have to strip code
after && because it needs very high priority for full Clipper compatibility
otherwise it will introduce series of small incompatibilities.
I can hardcode in PP that && is not a comment for lines starting with #if
but it may confuse users even more.

> [ There are probably some reasons for this, but I fully
> forgot about the whole topic. ]

The only one reason is strict Clipper compatibility.

> Okay, many thanks, I'll need this:
> '#if defined( DEF_A ) .and. .not. defined( DEF_B )'
> This seems to work okay.

You can use '!' instead of .not.
Problematic is only '&&' because in Clipper it has special meaning.
It's comment marker with the same priority as // and lower priority
then /* */
People also used to forgot about yet another type of comment in Clipper: NOTE
Clipper documents it wrongly as command but it's not a command in Clipper
but special type of comment in Clipper's PP parser.
This code should illustrate different problems with comments interpretation:

   #command COMMENT <*x*> => NOTE <x>
   proc main()
      ? && It's a comment
      ? /* && "Test" */ "Test"
      ? && /* && "Test"
        */ "Test"
      ? // /* && "Test"
        */ "Test"
      NOTE It's a comment
      COMMENT It's a comment which does not work because NOTE is not command
   return

Try to compile the code by Harbour and Clipper and compare -p results.
As you should see Harbour is fully Clipper compatible and even PP and
compiler error messages are compatible though literally not the same.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Oct 27 15:46:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 15:46:31 2008
Subject: [Harbour] ERROR - /contrib/hbwin.lib
In-Reply-To: <20081027185057.GB15170@34-mo7-2.acn.waw.pl>
References: <20193026.post@talk.nabble.com>
	<20081027181727.GB15543@34-mo7-2.acn.waw.pl>
	<20193345.post@talk.nabble.com>
	<20081027185057.GB15170@34-mo7-2.acn.waw.pl>
Message-ID: <20081027194651.GB10488@34-mo7-2.acn.waw.pl>

On Mon, 27 Oct 2008, Przemyslaw Czerpak wrote:

Hi Pritpal,

> > BTW did you see the bug I reported for CLASSes, before it was working ok.
> I do not remember it. What's the problem?

I've just found this message.
I'll look at it.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Oct 27 15:51:17 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 15:51:27 2008
Subject: [Harbour] 2008-10-27 20:50 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9386d$Blat.v2.6.2$605bd4db$11e432683172@127.0.0.1>

2008-10-27 20:50 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * config/rules.cf
    * Synced Harbour flags with non-GNU make.
      (added -gc3, -l)
--
Brgds,
Viktor

From druzus at acn.waw.pl  Mon Oct 27 16:01:50 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 16:01:38 2008
Subject: [Harbour] Classes - A Bug
In-Reply-To: <20175430.post@talk.nabble.com>
References: <20175430.post@talk.nabble.com>
Message-ID: <20081027200150.GC10488@34-mo7-2.acn.waw.pl>

On Sun, 26 Oct 2008, Pritpal Bedi wrote:

Hi Pritpal,

> #include "hbclass.ch"
> #command BEGINMENU [<oMenu>] => WITH OBJECT <oMenu> := MyMenu():New()
> CREATE CLASS TThread
>    VAR a
> ENDCLASS
> Generates this error:
> ERRCLASS.prg(7) Error E0030  Syntax error: "syntax error at 'ALWAYS'"
> 1 error

Harbour code is correct and the problem is only with this line:
   #command BEGINMENU [<oMenu>] => WITH OBJECT <oMenu> := MyMenu():New()

It converts all lines starting with BEGI letters so damage BEGIN SEQUENCE
and other PP commands which may start with BEGI[NMENU] word. Use #xcommand.
Otherwise only 1-st four characters are significant and shorter words are
accepted, f.e. it translated
   BEGIN SEQUENCE
to:
   WITH OBJECT SEQUENCE := MyMenu():New()
what makes BEGIN SEQUENCE unusable.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Oct 27 16:18:44 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 16:18:23 2008
Subject: [Harbour] Classes - A Bug
In-Reply-To: <20081027200150.GC10488@34-mo7-2.acn.waw.pl>
References: <20175430.post@talk.nabble.com>
	<20081027200150.GC10488@34-mo7-2.acn.waw.pl>
Message-ID: <20081027201844.GD10488@34-mo7-2.acn.waw.pl>

On Mon, 27 Oct 2008, Przemyslaw Czerpak wrote:

Hi Pritpal,

> Harbour code is correct and the problem is only with this line:
>    #command BEGINMENU [<oMenu>] => WITH OBJECT <oMenu> := MyMenu():New()
> It converts all lines starting with BEGI letters so damage BEGIN SEQUENCE
> and other PP commands which may start with BEGI[NMENU] word. Use #xcommand.

BTW why do you use [<oMenu>]?
It causes that this line translates also simple:
   BEGIN
into:
   WITH OBJECT := MyMenu():New()
what also cannot work as you want.

best regards,
Przemek
From bedipritpal at hotmail.com  Mon Oct 27 16:21:04 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Oct 27 16:21:07 2008
Subject: [Harbour] Classes - A Bug
In-Reply-To: <20081027200150.GC10488@34-mo7-2.acn.waw.pl>
References: <20175430.post@talk.nabble.com>
	<20081027200150.GC10488@34-mo7-2.acn.waw.pl>
Message-ID: <20195615.post@talk.nabble.com>


Got it


Przemyslaw Czerpak-2 wrote:
> 
> On Sun, 26 Oct 2008, Pritpal Bedi wrote:
> 
> Harbour code is correct and the problem is only with this line:
>    #command BEGINMENU [<oMenu>] => WITH OBJECT <oMenu> := MyMenu():New()
> 
> It converts all lines starting with BEGI letters so damage BEGIN SEQUENCE
> and other PP commands which may start with BEGI[NMENU] word. Use
> #xcommand.
> Otherwise only 1-st four characters are significant and shorter words are
> accepted, f.e. it translated
>    BEGIN SEQUENCE
> to:
>    WITH OBJECT SEQUENCE := MyMenu():New()
> what makes BEGIN SEQUENCE unusable.
> 
> 

But why the same code was working OK till few days back?
May be issue relates to Harbour compile time switches.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Classes---A-Bug-tp20175430p20195615.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Mon Oct 27 16:29:34 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 16:29:13 2008
Subject: [Harbour] Classes - A Bug
In-Reply-To: <20195615.post@talk.nabble.com>
References: <20175430.post@talk.nabble.com>
	<20081027200150.GC10488@34-mo7-2.acn.waw.pl>
	<20195615.post@talk.nabble.com>
Message-ID: <20081027202934.GA555@34-mo7-2.acn.waw.pl>

On Mon, 27 Oct 2008, Pritpal Bedi wrote:

Hi Pritpal,

> But why the same code was working OK till few days back?
> May be issue relates to Harbour compile time switches.

Few days ago BEGIN SEQUENCE was not used in class declaration
code. Now it is because I introduced few lines inside ALWAYS
statement as protection for possible users bugs in class declaration
which may left class engine locked.
It exploited the problem with above command which blocks using
BEGIN SEQUENCE in any code.

best regards,
Przemek
From bedipritpal at hotmail.com  Mon Oct 27 16:41:12 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Oct 27 16:41:15 2008
Subject: [Harbour] if ( hb_threadMutexLock( s_pMtx ) ) - Clarification
Message-ID: <20195976.post@talk.nabble.com>


Przemek

Here is a curosity:

if ( hb_threadMutexLock( s_pMtx ) )
{
   ...
   ...
   hb_threadMutexUnlock( s_pMtx );
}

Does this function waits for the lock until 
obtained or returns immediately?

If it waits until lock is obtained, then why we should
use 'if' statement?

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/if-%28-hb_threadMutexLock%28-s_pMtx-%29-%29---Clarification-tp20195976p20195976.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Mon Oct 27 16:55:30 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 16:55:38 2008
Subject: [Harbour] 2008-10-27 21:43 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c93876$Blat.v2.6.2$59158155$1508d1d2fda2@127.0.0.1>

2008-10-27 21:43 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/Makefile
  * contrib/make_vc_all.bat
  * contrib/make_b32_all.bat
  * contrib/make_gcc_all.sh
    + Added rddsql to default builds.
      Please test.

  * contrib/hbdbgfx/dbgfxc.c
    * Added TODO. (multiplatform support in one the functions)

  * include/hbsetup.h
  * include/hbexprb.c
  * contrib/hbct/ctnet.c
  * contrib/hbct/color.c
  * contrib/hbct/dattime2.c
  * contrib/xhb/hboutdbg.c
  * contrib/hbtpathy/tpwin32.c
  * contrib/hbmzip/hbmzip.c
  * contrib/hbsqlit3/hbsqlit3.c
  * contrib/hbfbird/firebird.c
  * contrib/hbziparc/hbzipcpp.old
  * contrib/hbnf/getver.c
  * contrib/hbpgsql/postgres.c
  * contrib/hbclipsm/gauge.c
  * contrib/rddads/adsfunc.c
  * contrib/rddads/ads1.c
  * contrib/hbgd/gdwrp.c
  * contrib/hbmisc/spd.c
  * contrib/hbtip/utils.c
  * contrib/hbwin/win_prt.c
  * contrib/examples/pp/hbppcore.c
  * contrib/examples/pp/hbppcomp.c
  * source/pp/pplib.c
  * source/pp/ppcore.c
  * source/pp/hbpp.c
  * source/vm/estack.c
  * source/vm/debug.c
  * source/vm/itemapi.c
  * source/vm/hvm.c
  * source/vm/cmdarg.c
  * source/vm/fm.c
  * source/vm/extrap.c
  * source/vm/classes.c
  * source/main/harbour.c
  * source/common/hbver.c
  * source/common/hbverdsp.c
  * source/common/hbstr.c
  * source/common/hbdate.c
  * source/rtl/gtxwc/gtxwc.c
  * source/rtl/hbgtcore.c
  * source/rtl/gtcrs/gtcrs.c
  * source/rtl/errorint.c
  * source/rtl/gtsln/gtsln.c
  * source/rtl/gttrm/gttrm.c
  * source/rtl/gtpca/gtpca.c
  * source/rtl/fkmax.c
  * source/rtl/langapi.c
  * source/rtl/hbffind.c
  * source/rdd/workarea.c
  * source/rdd/sdf1.c
  * source/rdd/delim1.c
  * source/rdd/dbf1.c
  * source/rdd/wafunc.c
  * source/compiler/hbmain.c
  * source/compiler/cmdcheck.c
  * source/compiler/hbpcode.c
  * source/compiler/genhrb.c
  * source/compiler/gencobj.c
  * source/compiler/genobj32.c
  * source/compiler/genc.c
  * source/compiler/hbusage.c
  * source/compiler/hbfunchk.c
  * source/compiler/hbgenerr.c
  * utils/hbmake/hbmgauge.c
    * Changed snprintf() calls to hb_snprintf().
    ; TODO: Finish the mappings in headers.

  * tests/wvtext.prg
  * include/inkey.ch
  * source/rtl/gtwvt/gtwvt.c
    * Changed K_HB_RESIZE to HB_K_RESIZE. The reason is 
      that we already got a HB_K_MULTICODE code (few lines 
      below, I didn't know about it before), and it's better 
      to keep consistency with that.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Mon Oct 27 17:00:44 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 17:00:25 2008
Subject: [Harbour] if ( hb_threadMutexLock( s_pMtx ) ) - Clarification
In-Reply-To: <20195976.post@talk.nabble.com>
References: <20195976.post@talk.nabble.com>
Message-ID: <20081027210044.GA23158@34-mo7-2.acn.waw.pl>

On Mon, 27 Oct 2008, Pritpal Bedi wrote:

Hi Pritpal,

> Here is a curosity:
> if ( hb_threadMutexLock( s_pMtx ) )
> {
>    ...
>    ...
>    hb_threadMutexUnlock( s_pMtx );
> }
> Does this function waits for the lock until 
> obtained or returns immediately?

It waits but can be interrupted, f.e. by HVM crash, main
thread QUIT statement or deadlock detection. Now we do not
have our own deadlock detection system but some OS-es gives
such functionality more or less limited and we inherit it.
In the future we may also add our own deadlock detection.

> If it waits until lock is obtained, then why we should
> use 'if' statement?

because it can be interrupted in some cases (see above) and
lock may not be set and the function will return with FALSE.
If exception does not appear then this function always returns
TRUE.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Oct 27 17:14:53 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 17:15:05 2008
Subject: [Harbour] 2008-10-27 12:03 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20081027193958.GA10488@34-mo7-2.acn.waw.pl>
References: <01c93824$Blat.v2.6.2$b3d8e636$b80290795e2@127.0.0.1>
	<20081027153736.GA2201@34-mo7-2.acn.waw.pl>
	<59677F87-060F-4DAA-9800-D24DBE14439D@syenar.hu>
	<20081027175809.GA22663@34-mo7-2.acn.waw.pl>
	<05A33546-529E-4732-8F15-CC0ED531E206@syenar.hu>
	<4906097B.1040704@dbtopas.lt>
	<6845A9C4-F472-4EA9-86EC-14F4E0102EFB@syenar.hu>
	<20081027184926.GA15170@34-mo7-2.acn.waw.pl>
	<CAF9C162-60BE-4492-B461-697EB67AB0CA@syenar.hu>
	<20081027193958.GA10488@34-mo7-2.acn.waw.pl>
Message-ID: <9FB6FE36-37DF-4BFF-A449-68948A78C505@syenar.hu>

>>>> This is Harbour .prg code.
>>> So please refresh in your mind what && does in .prg code ;-)
>> That's why I was asking if I was missing something :/
>> I fully thought we replicated the C way of #defines,
>> and I'm a bit puzzled on this syntax :(
>
> Because it is fully replicated. There is even code like:
>   case HB_PP_TOKEN_AMPERSAND:
>      *piNextPrec = HB_PP_PREC_BIT;
>      /* It will not work because && will be stripped as comment */
>      if( pNext && HB_PP_TOKEN_TYPE( pNext->type ) ==  
> HB_PP_TOKEN_AMPERSAND &&
>          pNext->spaces == 0 )
>      {
>         *piNextOper = HB_PP_TOKEN_AND;
>         pNext = pNext->pNext;
>      }
>      break;
>
> See the comment. To be precise this code can be activated in some  
> cases
> when #if will be result of some other PP directives.
> The problem is that before we reach this state we have to strip code
> after && because it needs very high priority for full Clipper  
> compatibility
> otherwise it will introduce series of small incompatibilities.
> I can hardcode in PP that && is not a comment for lines starting  
> with #if
> but it may confuse users even more.

Oh right, '&&' comments. I haven't used them since my first years
with Clipper. One of the best candidates for a switch to
disable legacy dBase features, along with '*' comments.

>> Okay, many thanks, I'll need this:
>> '#if defined( DEF_A ) .and. .not. defined( DEF_B )'
>> This seems to work okay.
>
> You can use '!' instead of .not.
> Problematic is only '&&' because in Clipper it has special meaning.
> It's comment marker with the same priority as // and lower priority
> then /* */
> People also used to forgot about yet another type of comment in  
> Clipper: NOTE
> Clipper documents it wrongly as command but it's not a command in  
> Clipper
> but special type of comment in Clipper's PP parser.

Hm, I totally forgot about 'NOTE'. This stuff is also at
the very beginning of the legacy feature queue, so IMO it's
really time to make some steps to make these fade away
completely.

Maybe a -wl<x> switch could be used to turn off very old
features up to a certain level.

This would essentially be the same stuff C5.x did with
the PUBLIC/PRIVATE stuff, but the warnings would be off
by default.

> This code should illustrate different problems with comments  
> interpretation:
>
>   #command COMMENT <*x*> => NOTE <x>
>   proc main()
>      ? && It's a comment
>      ? /* && "Test" */ "Test"
>      ? && /* && "Test"
>        */ "Test"
>      ? // /* && "Test"
>        */ "Test"
>      NOTE It's a comment
>      COMMENT It's a comment which does not work because NOTE is not  
> command
>   return
>
> Try to compile the code by Harbour and Clipper and compare -p results.
> As you should see Harbour is fully Clipper compatible and even PP and
> compiler error messages are compatible though literally not the same.

Which is an absolutely great achievement.

Brgds,
Viktor

From bedipritpal at hotmail.com  Mon Oct 27 17:21:34 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Oct 27 17:21:38 2008
Subject: [Harbour] if ( hb_threadMutexLock( s_pMtx ) ) - Clarification
In-Reply-To: <20081027210044.GA23158@34-mo7-2.acn.waw.pl>
References: <20195976.post@talk.nabble.com>
	<20081027210044.GA23158@34-mo7-2.acn.waw.pl>
Message-ID: <20196685.post@talk.nabble.com>


Got it, thanks.

One more question,
under what circumstances deadlocks may occur?

Regards
Pritpal Bedi


Przemyslaw Czerpak-2 wrote:
> 
> It waits but can be interrupted, f.e. by HVM crash, main
> thread QUIT statement or deadlock detection. Now we do not
> have our own deadlock detection system but some OS-es gives
> such functionality more or less limited and we inherit it.
> In the future we may also add our own deadlock detection.
> 
>> If it waits until lock is obtained, then why we should
>> use 'if' statement?
> 
> because it can be interrupted in some cases (see above) and
> lock may not be set and the function will return with FALSE.
> If exception does not appear then this function always returns
> TRUE.
> 

-- 
View this message in context: http://www.nabble.com/if-%28-hb_threadMutexLock%28-s_pMtx-%29-%29---Clarification-tp20195976p20196685.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Mon Oct 27 17:38:15 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 17:37:55 2008
Subject: [Harbour] if ( hb_threadMutexLock( s_pMtx ) ) - Clarification
In-Reply-To: <20196685.post@talk.nabble.com>
References: <20195976.post@talk.nabble.com>
	<20081027210044.GA23158@34-mo7-2.acn.waw.pl>
	<20196685.post@talk.nabble.com>
Message-ID: <20081027213815.GA12848@34-mo7-2.acn.waw.pl>

On Mon, 27 Oct 2008, Pritpal Bedi wrote:

Hi Pritpal,

> One more question,
> under what circumstances deadlocks may occur?

When you create code which can cause such situation, f.e.:

   static s_mtx1, s_mtx2
   init proc initmtx
      s_mtx1 := hb_mutexCreate()
      s_mtx2 := hb_mutexCreate()
   return

   proc p1()
      hb_mutexLock(s_mtx1)
      // do sth
      hb_mutexLock(s_mtx2)
      // do sth
      hb_mutexUnlock(s_mtx2)
      // do sth
      hb_mutexUnlock(s_mtx1)
   return

   proc p2()
      hb_mutexLock(s_mtx2)
      // do sth
      hb_mutexLock(s_mtx1)
      // do sth
      hb_mutexUnlock(s_mtx1)
      // do sth
      hb_mutexUnlock(s_mtx2)
   return

Now p1() and p2() are executed by two different threads.
It may work billion times without problem but sooner or later
one thread will lock s_mtx1 inside p1() and other s_mtx2
inside p2() in the same time and then and both will block
themselves (deadlock) when they will want to lock second
mutex. I haven't created the most trivial example intentionally
because I also want to illustrate that deadlock can be result of
race condition and does not have to be easy repeatable so even
extensive heavy stress tests does not have to give and answer
that everything is correct.
Programmer creating MT code have to be extremely careful
to not introduce such problems because later is often
_VERY_ hard to locate them.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Oct 27 17:43:54 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 17:43:59 2008
Subject: [Harbour] 2008-10-27 22:39 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c9387d$Blat.v2.6.2$1bc2c031$d98778bc7e@127.0.0.1>

2008-10-27 22:39 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   * tests/db_brows.prg
   * contrib/hbmysql/tmysql.prg
   * contrib/hbnf/miltime.prg
   * contrib/hbnf/mouse1.prg
   * contrib/hbnf/sleep.prg
   * contrib/hbnf/d2e.prg
   * contrib/hbnf/easter.prg
     * '&&' comments changed to '//' for all Harbour SVN.

   * contrib/gtwvg/wvgclass.prg
   * source/rdd/hbsix/sxcompat.prg
     ! Fixed '&&' being used instead of '.AND.' in code.
     ; NOTE: This '&&' comment compatibility is a lot more 
             dangerous than it's useful. It'd vote for 
             a compiler warnings switch for any of it's 
             occurences.

   * source/rtl/tbcolumn.prg
   * source/rtl/tget.prg
   * source/rtl/tbrowse.prg
   * contrib/xhb/hbcompat.ch
     ! Fixed '&&' being used instead of '.AND.' in #ifs.

   * source/rdd/hbsix/sxini.prg
   * source/rdd/hbsix/sxcompat.prg
   * source/rdd/hbsix/sxtrig.prg
     * 'end' -> 'endswitch'
     % 'ValType() == "x"' -> 'IS*()'
     ; TODO: Reformat to Harbour standards.
--
Brgds,
Viktor

From bedipritpal at hotmail.com  Mon Oct 27 17:55:19 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Oct 27 17:55:24 2008
Subject: [Harbour] hb_gtReload() / hb_gtCreate()
Message-ID: <20197288.post@talk.nabble.com>


Hello Przemek

Is it possible that above functions be extended
to accept few parameters ( only important for windows creation ) as follows:

HWND CreateWindowEx(          
    DWORD dwExStyle,                 nExStyle
    LPCTSTR lpClassName,
    LPCTSTR lpWindowName,
    DWORD dwStyle,                    nStyle
    int x,                                    nX
    int y,                                    nY
    int nWidth,                            nWidth
    int nHeight,                           nHeight
    HWND hWndParent,                pGTParent
    HMENU hMenu,          
    HINSTANCE hInstance,
    LPVOID lpParam
);

and                                         iCmdShow


And CreateWindowEx() function uses those parameters.

Default GT loaded first time may use defaults we are using at present.
But it will be nice if these can be provided from outside when executing 
the application, though not so important. Only <iCmdShow> substitution is
important, rather very important.

One option I can suggest is to compile GTWVT with some define,
-DHB_NOSTARTUPWINDOW.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/hb_gtReload%28%29---hb_gtCreate%28%29-tp20197288p20197288.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Mon Oct 27 18:10:05 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 18:10:16 2008
Subject: [Harbour] hb_gtReload() / hb_gtCreate()
In-Reply-To: <20197288.post@talk.nabble.com>
References: <20197288.post@talk.nabble.com>
Message-ID: <39879CF6-EF7A-468E-AA05-86D8241D7F94@syenar.hu>

>
> HWND CreateWindowEx(
>    DWORD dwExStyle,                 nExStyle
>    LPCTSTR lpClassName,
>    LPCTSTR lpWindowName,
>    DWORD dwStyle,                    nStyle
>    int x,                                    nX
>    int y,                                    nY
>    int nWidth,                            nWidth
>    int nHeight,                           nHeight
>    HWND hWndParent,                pGTParent
>    HMENU hMenu,
>    HINSTANCE hInstance,
>    LPVOID lpParam
> );
>
> and                                         iCmdShow
>
>
> And CreateWindowEx() function uses those parameters.

This is completely Windows specific while our GT
is completely multiplatform.

> Default GT loaded first time may use defaults we are using at present.
> But it will be nice if these can be provided from outside when  
> executing
> the application, though not so important. Only <iCmdShow>  
> substitution is
> important, rather very important.

IMO we should create the window on the first
write. Which seems to solve this problem in an
elegant and transparent (and portable, and
runtime) way.

Brgds,
Viktor

From druzus at acn.waw.pl  Mon Oct 27 18:18:09 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 27 18:17:47 2008
Subject: [Harbour] hb_gtReload() / hb_gtCreate()
In-Reply-To: <20197288.post@talk.nabble.com>
References: <20197288.post@talk.nabble.com>
Message-ID: <20081027221809.GA20208@34-mo7-2.acn.waw.pl>

On Mon, 27 Oct 2008, Pritpal Bedi wrote:

Hi Pritpal,

> Is it possible that above functions be extended
> to accept few parameters ( only important for windows creation ) as follows:
[...]
> And CreateWindowEx() function uses those parameters.
[...]

It is possible but as I said few days ago it does not help to resolve
the initialization problem because tomorrow you will ask about other
parameters or someone else will ask about parameters which are usable
in XWindow or other environment so the problem will return.

> Default GT loaded first time may use defaults we are using at present.
> But it will be nice if these can be provided from outside when executing 
> the application, though not so important. Only <iCmdShow> substitution is
> important, rather very important.
> One option I can suggest is to compile GTWVT with some define,
> -DHB_NOSTARTUPWINDOW.

And this is the only one parameter worth to pass for hb_gtCreate()/
hb_gtReload().
If startup window is not created immediately then after
hb_gtCreate()/hb_gtReload() you can make any settings necessary
to create new window before it will be physically created by OS
and shown on the screen. So we have to introduce such functionality
and I'll add it.
We can also think about adding pure GT methods which can be executed
without allocated GT - something like RDD methods (DROP/EXISTS/RDDINFO)
which can work without WA and allow to control some RDD settings without
opening WA.

best regards,
Przemek
From bedipritpal at hotmail.com  Mon Oct 27 18:36:31 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Oct 27 18:36:36 2008
Subject: [Harbour] hb_gtReload() / hb_gtCreate()
In-Reply-To: <20081027221809.GA20208@34-mo7-2.acn.waw.pl>
References: <20197288.post@talk.nabble.com>
	<20081027221809.GA20208@34-mo7-2.acn.waw.pl>
Message-ID: <20197930.post@talk.nabble.com>


Przemek


Przemyslaw Czerpak-2 wrote:
> 
> It is possible but as I said few days ago it does not help to resolve
> the initialization problem because tomorrow you will ask about other
> parameters or someone else will ask about parameters which are usable
> in XWindow or other environment so the problem will return.
> 

I agree with you and Viktor's point. I outlined this solution 
because some behavior of the window can be controlled ONLY
at the time of its physical creation. At later times, though we have 
methods to alter some attributes, but not every required aspect
is possible. 


> -DHB_NOSTARTUPWINDOW.

And this is the only one parameter worth to pass for hb_gtCreate()/
hb_gtReload().
If startup window is not created immediately then after
hb_gtCreate()/hb_gtReload() you can make any settings necessary
to create new window before it will be physically created by OS
and shown on the screen. So we have to introduce such functionality
and I'll add it.


It sounds exactly what I need. The central pooint is to substitute
appln defined values to CreateWindowEx() function.


We can also think about adding pure GT methods which can be executed
without allocated GT - something like RDD methods (DROP/EXISTS/RDDINFO)
which can work without WA and allow to control some RDD settings without
opening WA.


Even better.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/hb_gtReload%28%29---hb_gtCreate%28%29-tp20197288p20197930.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Mon Oct 27 18:40:09 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 18:40:16 2008
Subject: [Harbour] 2008-10-27 23:38 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c93884$Blat.v2.6.2$f76d440b$15a4e284eede@127.0.0.1>

2008-10-27 23:38 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbmysql/tmysql.prg
  * contrib/xhb/hbcompat.ch
  * contrib/xhb/dirrec.prg
  * contrib/xhb/txml.prg
  * contrib/xhb/hblog.prg
  * contrib/xhb/cstruct.prg
  * contrib/hbodbc/todbc.prg
  * contrib/hbtpathy/telepath.prg
  * contrib/hbmsql/tmsql.prg
  * contrib/hbpgsql/tpostgre.prg
  * contrib/hbgd/gd.prg
  * contrib/hbgd/gdimage.prg
  * contrib/hbgd/gdbarcod.prg
  * contrib/hbgd/gdchart.prg
  * contrib/hbgd/gdbar.prg
  * contrib/hbmisc/stringp.prg
  * contrib/hbtip/thtml.prg
  * contrib/hbtip/popcln.prg
  * contrib/hbtip/sendmail.prg
  * contrib/hbtip/cgi.prg
  * contrib/hbtip/httpcln.prg
  * contrib/hbtip/encoder.prg
  * contrib/hbtip/smtpcln.prg
  * contrib/hbtip/mail.prg
  * contrib/hbtip/ftpcln.prg
  * contrib/hbwin/win_reg.prg
  * contrib/hbwin/win_tole.prg
  * source/rdd/usrrdd/rdds/arrayrdd.prg
  * source/rdd/usrrdd/rdds/hscdx.prg
  * source/rdd/usrrdd/rdds/rlcdx.prg
  * utils/hbdoc/genos2.prg
  * utils/hbdoc/genng.prg
  * utils/hbdoc/genchm.prg
  * utils/hbdoc/genhtm.prg
  * utils/hbdoc/genrtf.prg
  * utils/hbdoc/gentrf.prg
  * utils/hbmake/hbmake.prg
    % 'ValType() == "?"' -> IS*()
    % *trim( Str() ) -> hb_NToS()
    ; In few places in hbtip the length limit 
      was removed from Str(), as it was used 
      inconsistently and could also cause 
      infinite loops and invalid filenames.
    % Some other minor updates.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Oct 27 20:07:19 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 20:07:24 2008
Subject: [Harbour] 2008-10-28 00:57 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c93891$Blat.v2.6.2$24b8c7fd$d14c5ab56b4@127.0.0.1>

2008-10-28 00:57 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/hbextern.ch
  * source/vm/cmdarg.c
    + Added HB_CMDLINE() .prg level function to return 
      the full command line. Currently it does reassemble 
      it from hb_argc/hb_argv.

  * contrib/rddsql/mysqldd.c
    ! Fixed MSVC casting errors in C++ mode.

  * include/hbwmain.c
  * source/vm/cmdarg.c
    * Moved argv[ 0 ] generation on Windows platform, so 
      that it now gets properly filled with the full 
      executable file path for console mode (GTWIN) 
      apps in all situations (f.e. when run from a 
      batch file using '%~n1.exe' macro).

  * source/rtl/hbinet.c
    ! Fixed to use safe strerror() (named strerror_s()) 
      under MSVS 2005 and upper.
      Please test.

  * source/hbzlib/gzio.c
    + Added _CRT_SECURE_NO_DEPRECATE locally to suppress 
      various MSVC unsafe CRT API usage warnings. Maybe it'd 
      be better to fix these by using Harbour APIs.

  * utils/hbdoc/gentrf.prg
    ! Fixed missing "common.ch"
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Oct 27 20:45:44 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 20:45:54 2008
Subject: [Harbour] 2008-10-27 10:37 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <20081027181146.GA15543@34-mo7-2.acn.waw.pl>
References: <01c93817$Blat.v2.6.2$c4e6ad28$2a4f68ca6a6@127.0.0.1>
	<20081027173032.GA14214@34-mo7-2.acn.waw.pl>
	<439E55BA-9EC3-40BA-AEDF-C56FBFE6018D@syenar.hu>
	<20081027181146.GA15543@34-mo7-2.acn.waw.pl>
Message-ID: <CDCF7E82-26C9-4902-9CAA-283A8899D2DF@syenar.hu>

>
Hi Przemek,

> Thank you.
> BTW This:
>   #pragma TEXTHIDDEN=<nMethod>
> also works.

Thanks, this looks better.

> Now only <nMethod> = 0 (disable) and 1 works.
> In the future we may add other methods.
> Anyhow if you want to distribute some PCODE with hidden internals
> then I suggest to generate .hrb file and encode it using some
> stronger algorithm. Then at runtime you can simply load it by:
>
>   static s_hrbHandle
>   cHrbBody := memoread( cHrbFile )
>   cHrbBody := my_decode( cHrbBody )
>   s_hrbHandle := hb_hrbLoad( cHrbBody )

Now that you say this, and this is a bit
unrelated, I may use .hrb files to load
string translations. BTW, I very rarely
need to obfuscate strings, and it's only
just a few small strings, but this method
may be useful in the future. Thanks for
the tip.

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Oct 27 20:48:38 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 20:48:45 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
Message-ID: <D634201E-45F8-48F4-A096-35C1E894EC4B@syenar.hu>

Hi Renato,

It's pretty nice and good. Just one thought, maybe
samples would better to be stored on the SVN repository,
so that we can keep them up to date easily. It could
also be included with the binary distros.
Since SVN files can be linked directly via the sf.net
web interface, maybe it'd be easier to do it that way
on our samples pages, too.

I'd personally exclude this specific example from
the list: 'Hb_inLine {}' since (while Harbour still
supports it), it's not recommended syntax.

Many thanks for your efforts.

Brgds,
Viktor

On 2008.10.27., at 13:26, Vailton Renato wrote:

> Hi all!
>
> I am of opinions on the page DOCUMENTATION > SAMPLES of the new site.
> I need to know if I'm on the right track and if all agree that the
> layout'm riding, because it is very difficult and full of details - if
> you have to redo then will take a lot of work. :(
>
> My intention would be easy to assemble a page to show some features of
> Harbor and give prominence to its features, especially where visitors
> could view the code and how would the screen.
>
> We have also upgraded the sentence at the top of the site and the
> links to download versions of the homepage.
>
> I await comments, criticisms and suggestions, the URL is:
> http://harbour-project.org/preview2/samples.html
>
> Thank you
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Oct 27 22:20:26 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 27 22:20:34 2008
Subject: [Harbour] 2008-10-28 01:52 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c938a3$Blat.v2.6.2$bd55e01a$5545f04fd56@127.0.0.1>

2008-10-28 01:52 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * include/Makefile
  * include/hbextern.ch
  + include/hbver.ch
  * source/rtl/version.c
    + Added HB_VERSION() unified version information 
      function. This can return these version related data:
      hb_version( HB_V_HARBOUR )        => <string>
      hb_version( HB_V_COMPILER )       => <string> 
      hb_version( HB_V_MAJOR )          => <num> 
      hb_version( HB_V_MINOR )          => <num> 
      hb_version( HB_V_REV )            => <num> 
      hb_version( HB_V_STATUS )         => <string> 
      hb_version( HB_V_COUNT )          => <num> 
      hb_version( HB_V_DATE_TIME )      => <string> 
      hb_version( HB_V_DATE )           => <date> 
      hb_version( HB_V_TIME )           => <string>
      hb_version( HB_V_PCODE )          => <num> 
      hb_version( HB_V_PCODE_STR )      => <string> 
      hb_version( HB_V_CHANGELOG_LAST ) => <string> 
      hb_version( HB_V_CHANGELOG_REV )  => <string> 
      hb_version( HB_V_FLAG_HARBOUR )   => <string> 
      hb_version( HB_V_FLAG_C )         => <string> 
      hb_version( HB_V_FLAG_LINKER )    => <string> 
      hb_version( HB_V_BITWIDTH )       => <num> 
      hb_version( HB_V_ENDIANNESS )     => <num> 
      This function makes deprecated following functions:
      - HB_COMPILER() => hb_version( HB_V_COMPILER )
      - HB_PCODEVER() => hb_version( HB_V_PCODE_VER_STR )
      - HB_BUILDDATE() => hb_version( HB_V_DATE_TIME )
      and macros:
      - __ARCH16BIT__
      - __ARCH32BIT__
      - __ARCH64BIT__
      - __LITTLE_ENDIAN__
      - __BIG_ENDIAN__
      - __PDP_ENDIAN__
    ; NOTE: If there are no objections, I'd remove the 
            __ARCH*BIT__ and __*ENDIAN__ predefined macros, 
            as these can be misleading on some systems.
    ; TODO: Implement HB_V_DATE and HB_V_TIME.
    ; TODO: Add HB_MTVM() functionality.
    ; TODO: Add __PLATFORM__* equivalent.
    ; TODO: Add HB_OS_UNIX_COMPATIBLE equivalent.

  * include/hbextern.ch
  * include/hbapifs.h
  * common.mak
  * source/rtl/Makefile
  + source/rtl/fscopy.c
    + Added C level hb_fsCopy() function.
    + Added .prg level HB_FCOPY() function.
--
Brgds,
Viktor

From philb at philb.us  Tue Oct 28 00:02:15 2008
From: philb at philb.us (Phil Barnett)
Date: Tue Oct 28 00:02:22 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
Message-ID: <200810280002.15344.philb@philb.us>

On Monday 27 October 2008 08:26:12 am Vailton Renato wrote:
> Hi all!
>
> I am of opinions on the page DOCUMENTATION > SAMPLES of the new site.
> I need to know if I'm on the right track and if all agree that the
> layout'm riding, because it is very difficult and full of details - if
> you have to redo then will take a lot of work. :(
>
> My intention would be easy to assemble a page to show some features of
> Harbor and give prominence to its features, especially where visitors
> could view the code and how would the screen.
>
> We have also upgraded the sentence at the top of the site and the
> links to download versions of the homepage.
>
> I await comments, criticisms and suggestions, the URL is:
> http://harbour-project.org/preview2/samples.html
>
> Thank you
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

The only suggestion I have is that the word Freeware in the header should 
probably just read Free.

Freeware is not necessarily Open Source. We've gone out of our way to make 
this entire thing much more than Freeware.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From bedipritpal at hotmail.com  Tue Oct 28 00:19:52 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Oct 28 00:19:56 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
Message-ID: <20201177.post@talk.nabble.com>


Renalto

The overall design is now very pleasing.

Just one note:  Color of the <Development> icon to too
out of the color scheme. Can you add some blud color to it?

Regards
Pritpal Bedi

PS: My name does not appear in the crew list. Can you include it?


Vailton Renato wrote:
> 
> Hi all!
> 
> I am of opinions on the page DOCUMENTATION > SAMPLES of the new site.
> I need to know if I'm on the right track and if all agree that the
> layout'm riding, because it is very difficult and full of details - if
> you have to redo then will take a lot of work. :(
> 
> My intention would be easy to assemble a page to show some features of
> Harbor and give prominence to its features, especially where visitors
> could view the code and how would the screen.
> 
> We have also upgraded the sentence at the top of the site and the
> links to download versions of the homepage.
> 
> I await comments, criticisms and suggestions, the URL is:
> http://harbour-project.org/preview2/samples.html
> 

-- 
View this message in context: http://www.nabble.com/Harbour-Web-site---Preview--2-%28Update%29-tp20186718p20201177.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From lorenzo.fiorini at gmail.com  Tue Oct 28 03:05:11 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Oct 28 03:05:14 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
Message-ID: <9257026e0810280005i2e9458e3v7f4901a4616ef098@mail.gmail.com>

On Mon, Oct 27, 2008 at 1:26 PM, Vailton Renato <vailtom@gmail.com> wrote:

> I await comments, criticisms and suggestions, the URL is:
> http://harbour-project.org/preview2/samples.html

Good job, many thanks.

IMHO with the web pages we mainly talk to non-xbase programmers (
every xbase programmer probably knows about Harbour and surely knows
xbase... )

Samples and tutorials are critical part of the evaluation of a
computer language and worth much more than hundreds of pages of
documentation.

I would suggest to start with few samples and add more only after they
are carefully reviewed by the group ( we could create a new dir in the
svn to hold the official samples and demos, Viktor?  ).

Just few specific comments:

IMHO the Web section of samples uses outdated and overly complicated
code. THml class use should be avoided since it tries to hide a well
known and standardized HTML behind an undocumented and obscure code.

Probably everyone here has his own cgi implementation :) so surely we
can provide simpler samples that gives a better idea of how it's easy
to use Harbour with the web.

I would avoid ? for printing outstd() is more "compiler" style

I would add Mac OS X screens also ( I can help here )

We say Terminal/GUI but which is the GUI we provide?

The word "macro" can be misleaded we should use another term sth like
"dynamic code evalutation"?

best regards,
Lorenzo
From harbour.01 at syenar.hu  Tue Oct 28 03:50:45 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 28 03:50:51 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <9257026e0810280005i2e9458e3v7f4901a4616ef098@mail.gmail.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<9257026e0810280005i2e9458e3v7f4901a4616ef098@mail.gmail.com>
Message-ID: <C0890F9D-04E3-48AC-A184-6A5DC2B809FC@syenar.hu>

> I would suggest to start with few samples and add more only after they
> are carefully reviewed by the group ( we could create a new dir in the
> svn to hold the official samples and demos, Viktor?  ).

Sure. We already have 'examples' which seems to be the
preferred name choice of other projects, too. It
currently resides inside /contrib, but we may move it to
the root for better visibility. What structure to
follow inside that dir is up the our decision. Maybe
a dir named 'miniapps' would be good, or we could just
pour those into the root, but that's usually doesn't
look very elegant.

Any comments on these?

[ BTW I already packaged /contrib/examples with binary
distros since 1.0.0, well, for DOS/Windows that is. ]

> I would avoid ? for printing outstd() is more "compiler" style
>
> I would add Mac OS X screens also ( I can help here )
>
> We say Terminal/GUI but which is the GUI we provide?
>
> The word "macro" can be misleaded we should use another term sth like
> "dynamic code evalutation"?

I agree with the above, plus there are some syntax
details which I'd make to look like other parts of
Harbour for clarity and being uniform.

Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Tue Oct 28 04:19:22 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Oct 28 04:19:27 2008
Subject: [Harbour] Harbour compiler output can't be redirected
Message-ID: <5AB088FB592A494BAEFE711373A48273@emag>

Typing

harbour > compile.log

at the command line I still get the output on screen and compile.log is 
empty.

Is it expected?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Tue Oct 28 04:45:22 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 28 04:45:26 2008
Subject: [Harbour] 2008-10-28 09:44 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c938d9$Blat.v2.6.2$83a22e74$1730e5533736@127.0.0.1>

2008-10-28 09:44 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/examples/guestbk/inifiles.prg
  * contrib/examples/guestbk/testcgi.prg
  * contrib/examples/guestbk/guestbk.prg
  * contrib/examples/guestbk/bld_b32.bat
  * contrib/examples/guestbk/bld_vc.bat
  * contrib/examples/pe/bld_b32.bat
  * contrib/examples/pe/bld_vc.bat
  * contrib/examples/pe/editorhi.prg
    * Minor updates, optimizations.

  * source/rtl/version.c
    % Using better method to return HB_V_BITWIDTH.

  * utils/hbtest/rt_str.prg
    ! Changed to use 'hb_version( HB_V_BITWIDTH ) >= 64' 
      instead of #ifdef __ARCH64BIT__.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Oct 28 04:56:26 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 28 04:56:32 2008
Subject: [Harbour] -gc3 with TEXTHIDDEN
Message-ID: <5C8D8491-2E51-40ED-8912-A52407302DA7@syenar.hu>

Hi Przemek,

I'm getting 'unresvoled external _hb_xvmPushStringHidden'
when using #pragma TEXTHIDDEN with -gc3 switch.

Brgds,
Viktor

From mbelgrano at deltain.it  Tue Oct 28 05:12:45 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Oct 28 05:13:40 2008
Subject: [Harbour] source\rtl\copyfile.c 65: Type mismatch in redeclaration
	of 'hb_fsCopy'
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0EC@SRV02.deltain.net>

Compiling harbour I receive this error
2008-10-28 09:44 UTC+0200 Viktor Szakats (harbour.01 syenar hu)

	bcc32.exe -c -q -d -Q -w -w-sig- -tWM -O2 -OS -Ov -Oi -Oc
-Iinclude -Iobj\b32 -DHB_FM_STATISTICS_OFF -tWM -OS -Ov -Oi -Oc -Q
-oobj\b32\copyfile.obj source\rtl\copyfile.c
source\rtl\copyfile.c:
Error E2356 source\rtl\copyfile.c 65: Type mismatch in redeclaration of
'hb_fsCopy'
Error E2344 include\hbapifs.h 211: Earlier declaration of 'hb_fsCopy'
Warning W8079 source\rtl\copyfile.c 140: Mixing pointers to different
'char' types in function HB_FUN___COPYFILE
Warning W8079 source\rtl\copyfile.c 140: Mixing pointers to different
'char' types in function HB_FUN___COPYFILE
*** 2 errors in Compile ***

** error 1 ** deleting obj\b32\copyfile.obj

Massimo Belgrano

From druzus at acn.waw.pl  Tue Oct 28 05:25:09 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 28 05:24:47 2008
Subject: [Harbour] 2008-10-28 10:24 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081028092509.GA18881@34-mo7-2.acn.waw.pl>

2008-10-28 10:24 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbxvm.h
  * harbour/source/vm/hvm.c
  * harbour/source/compiler/gencc.c
    + added finished by mistake support for hidden strings in -gc3 mode

best regards
Przemek
From mbelgrano at deltain.it  Tue Oct 28 05:36:43 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Oct 28 05:37:34 2008
Subject: [Harbour] source\rtl\copyfile.c 65: Type mismatch in
	redeclarationof 'hb_fsCopy'
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F0EC@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815F0EC@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0ED@SRV02.deltain.net>

After 
2008-10-28 10:24 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
I receive 
source\vm\hvm.c:
Error E2451 source\vm\hvm.c 10326: Undefined symbol '_hb_stack_ptr_' in
function hb_xvmPushStringHidden
*** 1 errors in Compile ***

** error 1 ** deleting obj\b32_mt\hvm.obj


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Massimo
Belgrano
Sent: Tuesday, October 28, 2008 10:13 AM
To: Harbour Project Main Developer List.
Subject: [Harbour] source\rtl\copyfile.c 65: Type mismatch in
redeclarationof 'hb_fsCopy'

Compiling harbour I receive this error
2008-10-28 09:44 UTC+0200 Viktor Szakats (harbour.01 syenar hu)

	bcc32.exe -c -q -d -Q -w -w-sig- -tWM -O2 -OS -Ov -Oi -Oc
-Iinclude -Iobj\b32 -DHB_FM_STATISTICS_OFF -tWM -OS -Ov -Oi -Oc -Q
-oobj\b32\copyfile.obj source\rtl\copyfile.c
source\rtl\copyfile.c:
Error E2356 source\rtl\copyfile.c 65: Type mismatch in redeclaration of
'hb_fsCopy'
Error E2344 include\hbapifs.h 211: Earlier declaration of 'hb_fsCopy'
Warning W8079 source\rtl\copyfile.c 140: Mixing pointers to different
'char' types in function HB_FUN___COPYFILE
Warning W8079 source\rtl\copyfile.c 140: Mixing pointers to different
'char' types in function HB_FUN___COPYFILE
*** 2 errors in Compile ***

** error 1 ** deleting obj\b32\copyfile.obj

Massimo Belgrano

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Tue Oct 28 05:42:33 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 28 05:42:37 2008
Subject: [Harbour] 2008-10-28 10:42 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c938e1$Blat.v2.6.2$80b4c55c$1c09854d0d6@127.0.0.1>

2008-10-28 10:42 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/rtl/copyfile.c
    ! Fixed hb_fsCopy() name collision with static function.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Tue Oct 28 05:44:01 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 28 05:43:40 2008
Subject: [Harbour] 2008-10-28 10:43 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081028094401.GA1037@34-mo7-2.acn.waw.pl>

2008-10-28 10:43 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/hvm.c
    ! added missing HB_STACK_PRELOAD

best regards
Przemek
From mbelgrano at deltain.it  Tue Oct 28 05:58:34 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Oct 28 05:59:18 2008
Subject: R: [Harbour] RE: Harbour Digest, Vol 24, Issue 104
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F0D8@SRV02.deltain.net>
References: <000001c935b0$6327dd7b$0400a8c0@deltain.net><200810241939.37480.philb@philb.us>
	<AFB948164110ED43B5EB849E8DEEF03815F0D8@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0F0@SRV02.deltain.net>

Thanks 
now compile fine

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Massimo
Belgrano
Sent: Saturday, October 25, 2008 10:38 AM
To: Harbour Project Main Developer List.
Subject: RE: R: [Harbour] RE: Harbour Digest, Vol 24, Issue 104

Pbmake
PBMake is a make engine, work also for Clipper, Xbase++, C and ASM
Run PBMAKE one time to create MAKE.BAT, and then...
     Make <Filename make script> [/ALL] [/D...][/D...][/D...][up to 7]
          where <Filename> is the name of the MAKE script
          where [/ALL] will cause all modules to rebuild
     have Support conditional directives
     will performing actions just before/after the compile process
     Jump to Editor on Compile Failure

   EXEFILE=DEMO\PBMAKE.EXE
   LINKFILE=DEMO.LNK
   OBJDIR=DEMO\OBJ\
   #IFNDEF DEBUG
      FLAG1= /M /N /W /Q /ES2 /DDEMO
   #ELSE
      FLAG1= /M /N /W /Q /ES2 /DDEMO /B
   #ENDIF
   SUCCESS=PKLITE DEMO\PBMAKE -E -A

We need a custom version for harbour
In my opinion is similar to brmake so I suggest Viktor and or PrzemyslaW
verify wich can be replacement for hbmake
Probably brmake is ready and tested with [x]harbour
Either are written in PRG
Either will a good make system for compile either require modification
for having same project file on multiple architecture

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Phil Barnett
Sent: Saturday, October 25, 2008 1:40 AM
To: harbour@harbour-project.org
Subject: Re: R: [Harbour] RE: Harbour Digest, Vol 24, Issue 104

On Friday 24 October 2008 04:12:50 am Massimo Belgrano wrote:

> Good but not open source

All you have to do is ask.

I have no problem releasing it under GPL.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." --
Henry 
Kissinger
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Tue Oct 28 06:34:20 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 28 06:34:27 2008
Subject: [Harbour] 2008-10-28 10:24 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081028092509.GA18881@34-mo7-2.acn.waw.pl>
References: <20081028092509.GA18881@34-mo7-2.acn.waw.pl>
Message-ID: <DE3A0F1F-4413-4134-96B4-883B79EBC662@syenar.hu>

Hi Przemek,

It now works like a charm (also in MinGW after the
latest change).

Thank you very much.

Actually, now I'm testing GTXWC under OSX, and so
far it's stunning, all the usual keys work (except
there is no <Ins> key on the Mac - but there is
<Ctrl+V>). I'm having some slight screen codepage/
refresh/resize problems, some of those can probably
be attributed to my GT layer. I'm unsure of the
codepage problem yet. BTW the GT layer is now
ready to be even committed to Harbour, but I'm not
sure where, and it's still by no means perfect.

Brgds,
Viktor

On 2008.10.28., at 10:25, Przemyslaw Czerpak wrote:

> 2008-10-28 10:24 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbxvm.h
>  * harbour/source/vm/hvm.c
>  * harbour/source/compiler/gencc.c
>    + added finished by mistake support for hidden strings in -gc3 mode
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Tue Oct 28 06:46:28 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Oct 28 06:46:32 2008
Subject: [Harbour] 2008-10-28 10:24 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <DE3A0F1F-4413-4134-96B4-883B79EBC662@syenar.hu>
References: <20081028092509.GA18881@34-mo7-2.acn.waw.pl>
	<DE3A0F1F-4413-4134-96B4-883B79EBC662@syenar.hu>
Message-ID: <9257026e0810280346y1d887c01l6fa558f0b67b97b3@mail.gmail.com>

On Tue, Oct 28, 2008 at 11:34 AM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Actually, now I'm testing GTXWC under OSX, and so
> far it's stunning, all the usual keys work (except
> there is no <Ins> key on the Mac - but there is
> <Ctrl+V>). I'm having some slight screen codepage/
> refresh/resize problems, some of those can probably
> be attributed to my GT layer. I'm unsure of the
> codepage problem yet. BTW the GT layer is now
> ready to be even committed to Harbour, but I'm not
> sure where, and it's still by no means perfect.

I wonder how would be hard to create a GTMWC.
I mean sth like GTXWC that works without the X11.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Tue Oct 28 06:55:39 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 28 06:55:44 2008
Subject: [Harbour] 2008-10-28 11:54 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c938eb$Blat.v2.6.2$b7353f80$175822383772@127.0.0.1>

2008-10-28 11:54 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * config/w32/gcc.cf
  * config/w32/mingw.cf
    + Added -march=i486 to default C switches.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Oct 28 07:15:22 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 28 07:15:30 2008
Subject: [Harbour] 2008-10-28 10:24 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0810280346y1d887c01l6fa558f0b67b97b3@mail.gmail.com>
References: <20081028092509.GA18881@34-mo7-2.acn.waw.pl>
	<DE3A0F1F-4413-4134-96B4-883B79EBC662@syenar.hu>
	<9257026e0810280346y1d887c01l6fa558f0b67b97b3@mail.gmail.com>
Message-ID: <B9FF8CEF-F5CA-4479-A152-8920E10FDFEA@syenar.hu>

>> Actually, now I'm testing GTXWC under OSX, and so
>> far it's stunning, all the usual keys work (except
>> there is no <Ins> key on the Mac - but there is
>> <Ctrl+V>). I'm having some slight screen codepage/
>> refresh/resize problems, some of those can probably
>> be attributed to my GT layer. I'm unsure of the
>> codepage problem yet. BTW the GT layer is now
>> ready to be even committed to Harbour, but I'm not
>> sure where, and it's still by no means perfect.
>
> I wonder how would be hard to create a GTMWC.
> I mean sth like GTXWC that works without the X11.

I was wondering the same thing :)

Cocoa vs. Carbon should be chosen. Cocoa needs
Objective C AFAIK, Carbon would be good, but it's
slowly abandoned by Apple (won't be any 64-bit
version of it f.e.).

Brgds,
Viktor

From maurilio.longo at libero.it  Tue Oct 28 07:19:16 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Oct 28 07:19:20 2008
Subject: [Harbour] 2008-10-28 10:24 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <B9FF8CEF-F5CA-4479-A152-8920E10FDFEA@syenar.hu>
References: <20081028092509.GA18881@34-mo7-2.acn.waw.pl>	<DE3A0F1F-4413-4134-96B4-883B79EBC662@syenar.hu>	<9257026e0810280346y1d887c01l6fa558f0b67b97b3@mail.gmail.com>
	<B9FF8CEF-F5CA-4479-A152-8920E10FDFEA@syenar.hu>
Message-ID: <4906F534.5070301@libero.it>

Viktor,

Carbon is deprecated and Cocoa, you're right, needs Objective C.

Best regards.

Maurilio.

Szak?ts Viktor wrote:
> Cocoa vs. Carbon should be chosen. Cocoa needs
> Objective C AFAIK, Carbon would be good, but it's
> slowly abandoned by Apple (won't be any 64-bit
> version of it f.e.).

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From lorenzo.fiorini at gmail.com  Tue Oct 28 07:34:33 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Oct 28 07:34:36 2008
Subject: [Harbour] 2008-10-28 10:24 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <4906F534.5070301@libero.it>
References: <20081028092509.GA18881@34-mo7-2.acn.waw.pl>
	<DE3A0F1F-4413-4134-96B4-883B79EBC662@syenar.hu>
	<9257026e0810280346y1d887c01l6fa558f0b67b97b3@mail.gmail.com>
	<B9FF8CEF-F5CA-4479-A152-8920E10FDFEA@syenar.hu>
	<4906F534.5070301@libero.it>
Message-ID: <9257026e0810280434r12e0276w4d7f83bacadf5540@mail.gmail.com>

On Tue, Oct 28, 2008 at 12:19 PM, Maurilio Longo
<maurilio.longo@libero.it> wrote:

> Carbon is deprecated and Cocoa, you're right, needs Objective C.

I've heard the same thing but after I've found that many says that MS
and Adobe has requested Carbon to port their apps.

Also Openoffice chosed Carbon:
http://wiki.services.openoffice.org/wiki/Mac_OS_X_Porting_-_Carbon_Documentation

best regards,
Lorenzo
From dmacias at mail.udg.mx  Tue Oct 28 08:40:10 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Oct 28 07:40:24 2008
Subject: [Harbour] Harbour under OS/2 - gcc432
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <4907082A.6080801@mail.udg.mx>

Maurilio, Przemek:

I am testing current Harbour with eCS 1.2MR and 
gcc-4.3.2-os2-20081025.zip from Paul Smedley and I get many warnings/errors

I do not know if they belong to:
a) A bad gcc environment settings
b) Failures of gcc 4.3.2 port
c) Real warnings/error in Harbour code, due maybe to gcc version 
revision in code

So I recall for your help  :-)

Below are warnings/errors

I tried to configure my gcc 4.3.2 environment settings based in 
gcc432.cmd file
Below are included my gccset.cmd and readme.os2

Libraries created are:
( many are skipped due missing harbour.exe )

28/10/08  6:01a        55,618    124 a---  hbcommon.a
28/10/08  6:03a       355,518    124 a---  hbcplr.a
28/10/08  6:13a        68,872    124 a---  hbmacro.a
28/10/08  6:17a        48,498    124 a---  hbcpage.a
28/10/08  6:20a       246,914    124 a---  hblang.a
28/10/08  6:23a       158,786    124 a---  hbpcre.a
28/10/08  6:23a        67,842    124 a---  hbzlib.a
28/10/08  6:24a       230,076    124 a---  hbbmcdx.a
28/10/08  6:25a        13,070    124 a---  hbclipsm.a
28/10/08  6:31a         9,226    124 a---  hbgt.a
28/10/08  6:31a        36,938    124 a---  hbmzip.a
        11 file(s)   1,291,358 bytes used

and make_gnu.log are 1602 lines length

David Macias


-------------------
[E:\harbour810\harbour]make -r           1>make_gnu.log
../../hbfsapi.c: In function 'hb_fsNameExists':
../../hbfsapi.c:323: warning: pointer targets in passing argument 1 of 
'DosQueryPathInfo' differ in signedness
../../hbfsapi.c: In function 'hb_fsFileExists':
../../hbfsapi.c:381: warning: pointer targets in passing argument 1 of 
'DosQueryPathInfo' differ in signedness
../../hbfsapi.c: In function 'hb_fsDirExists':
../../hbfsapi.c:440: warning: pointer targets in passing argument 1 of 
'DosQueryPathInfo' differ in signedness

../../hbgete.c: In function 'hb_getenv':
../../hbgete.c:88: warning: pointer targets in initialization differ in 
signedness
../../hbgete.c:93: warning: pointer targets in passing argument 1 of 
'DosScanEnv' differ in signedness
../../hbgete.c:95: warning: pointer targets in passing argument 1 of 
'hb_strdup' differ in signedness
../../hbgete.c: In function 'hb_getenv_buffer':
../../hbgete.c:127: warning: pointer targets in initialization differ in 
signedness
../../hbgete.c:132: warning: pointer targets in passing argument 1 of 
'DosScanEnv' differ in signedness
../../hbgete.c:136: warning: pointer targets in passing argument 2 of 
'hb_strncpy' differ in signedness
emxbind: invalid a.out file (startup code)
ld.exe: emxbind failed

make[3]: *** [hbpp.exe] Error 1
make[2]: *** [descend] Error 2
ld.exe: No such file or directory for hbpp
make[3]: *** [harbour.exe] Error 1
make[2]: *** [descend] Error 2

../../hbffind.c: In function 'hb_fsFindNextLow':
../../hbffind.c:521: warning: pointer targets in passing argument 1 of 
'DosFindFirst' differ in signedness
../../hbinet.c: In function 'HB_FUN_HB_INETACCEPT':
../../hbinet.c:1758: warning: pointer targets in passing argument 3 of 
'accept' differ in signedness
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
../../dynlibhb.c: In function 'HB_FUN_HB_LIBLOAD':
../../dynlibhb.c:102: warning: implicit declaration of function 
'DosLoadModule'
../../dynlibhb.c: In function 'HB_FUN_HB_LIBFREE':
../../dynlibhb.c:145: warning: implicit declaration of function 
'DosFreeModule'
../../estack.c: In function 'hb_stackDebugRequest':
../../estack.c:442: warning: return from incompatible pointer type
../../hvm.c: In function 'hb_dbg_InvokeDebug':
../../hvm.c:10596: warning: initialization from incompatible pointer type
../../hvm.c: In function 'HB_FUN___DBGINVOKEDEBUG':
../../hvm.c:10642: warning: initialization from incompatible pointer type
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[1]: *** [first] Error 2
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[1]: *** [first] Error 2
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
../../files.c: In function 'HB_FUN_SETFDATI':
../../files.c:273: warning: pointer targets in passing argument 1 of 
'DosQueryPathInfo' differ in signedness
../../files.c:308: warning: pointer targets in passing argument 1 of 
'DosSetPathInfo' differ in signedness
../../os2pm.c: In function 'HB_FUN_WINREGISTERCLASS':
../../os2pm.c:113: warning: pointer targets in passing argument 2 of 
'WinRegisterClass' differ in signedness
../../os2pm.c: In function 'HB_FUN_WINCREATESTDWINDOW':
../../os2pm.c:148: warning: pointer targets in passing argument 4 of 
'WinCreateStdWindow' differ in signedness
../../os2pm.c:148: warning: pointer targets in passing argument 5 of 
'WinCreateStdWindow' differ in signedness
../../os2pm.c: In function 'HB_FUN_WINSETWINDOWTEXT':
../../os2pm.c:180: warning: pointer targets in passing argument 2 of 
'WinSetWindowText' differ in signedness
../../os2pm.c: In function 'HB_FUN_WINGETTEXT':
../../os2pm.c:189: warning: pointer targets in passing argument 1 of 
'hb_retc' differ in signedness
../../os2pm.c: In function 'HB_FUN_MSGINFO':
../../os2pm.c:196: warning: pointer targets in initialization differ in 
signedness
../../os2pm.c:199: warning: pointer targets in passing argument 3 of 
'WinMessageBox' differ in signedness
make[4]: ../../../../../source/main/os2/gcc/harbour.exe: Command not found
make[3]: *** [descend] Error 1
make[2]: *** [first] Error 2
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
../../hbmzip.c: In function 'hb_zipStoreFile':
../../hbmzip.c:748: warning: pointer targets in passing argument 1 of 
'DosQueryPathInfo' differ in signedness
../../hbmzip.c: In function 'hb_unzipExtractCurrentFile':
../../hbmzip.c:1049: warning: pointer targets in passing argument 1 of 
'DosQueryPathInfo' differ in signedness
../../hbmzip.c:1067: warning: pointer targets in passing argument 1 of 
'DosSetPathInfo' differ in signedness
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
../../xhbcopyf.c:66: error: conflicting types for 'hb_fsCopy'
../../../../include/hbapifs.h:211: error: previous declaration of 
'hb_fsCopy' was here
make[3]: *** [xhbcopyf.o] Error 1
make[2]: *** [descend] Error 2
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1

---------------------

Rem gccset.cmd

SET PATH_EMXPGCC=E:\usr
SET CCENV=EMX
SET BUILD_ENV=EMX
SET BUILD_PLATFORM=OS2
SET ROOT=E:

SET GCCDIR=%ROOT%\usr
SET GCCDIR2=%ROOT%/usr

SET EMX=%ROOT%\EMX
SET EMX2=%ROOT%/EMX

SET 
PATH=%GCCDIR%\local432\bin;%GCCDIR%\local432\libexec\gcc\i386-pc-os2-emx\4.3.2;%PATH%

SET 
BEGINLIBPATH=%GCCDIR%\local432\lib;%GCCDIR%\local432\lib\gcc\i386-pc-os2-emx\4.3.2;%BEGINLIBPATH%

SET DPATH=%GCCDIR%\local432\lib;%DPATH%

SET C_INCLUDE_PATH=%GCCDIR2%/local432/lib/gcc/i386-pc-os2-emx/4.3.2/include;

SET CPLUS_INCLUDE_PATH=%GCCDIR2%/local432/include/c++/4.3.2/backward;

Rem DAVID: 
CPLUS_INCLUDE_PATH=E:/usr/include/c++/3.3.5/;E:/usr/include/c++/3.3.5/i386-pc-os2-emx;E:/usr/include/c++/3.3.5/backward;E:/usr/include;

SET 
LIBRARY_PATH=%GCCDIR2%/local432/lib;%GCCDIR2%/local432/lib/gcc/i386-pc-os2-emx/4.3.2;

Rem SET INFOPATH=%EMX2%/info;u:/usr/share/info
Rem DAVID: INFOPATH=E:/usr/info;

---------------------

Readme.os2

GCC v4.3.2 + binutils 2.16.1 (minus ld.exe)

Requires libc063.dll available from 
ftp://ftp.netlabs.org/pub/gcc/libc-0.6.3-csd3.zip

Instructions for use:
- Currently installs into \usr\local432 so as not to interfere with an 
existing GCC 3.3.5 install in \usr\bin
- See sample compiler environment setup scripts (in \usr\local432) for 
required differences compared to GCC 3.3.5
- report any problems via email to paul@smedley.id.au or via 
http://mantis.smedley.info

Known Issues:
- no support yet for the GOMP multiprocessor library
- link warning when using -Zomf - emxomf will require updating to deal 
with the new stabs types, but according to Knut, these warnings can be 
safely ignored, and only affect debugging

Updates since original build:
- Added threading support (20081011 build)
- fixed problem with stdcall that produced errors like '{standard 
input}:75: Error: invalid character '_' in mnemonic' (20081012 build)
- fixed (hopefully) 'internal compiler error' crashes when -fPIC is used
- Added support for precompiled headers based on cygwin code (untested) 
(20081012 build)
- Fixed 'gcc conftest.c -lgcc' produced -lgcc.exe (20081012b build)
- Fixed problems with cdecl (20081014 build)
- Fixed (hopefully) problems with fastcall (20081014 build)
- Binutils 2.16.1 (minus ld.exe) included (20081025 build)
- Fixed (hopefully) probelm with recursive thread support in libstdc++ - 
thanks Yuri for the patch! (20081025 build)

ld.exe from binutils isn't included as it currently isn't working 
correctly (emxbind error)

This build hasn't had huge amounts of testing, but has been used to 
build Scribus, Firefox 3.0cvs and ffmpeg successfully. Any feedback on 
things that work/don't work vs GCC 3.3.5 would be appreciated!

If you like this software and want to support continued ports, please 
consider donating via PayPal via the link in the footer at 
http://smedley.info/os2ports or via the Mensys online store at 
http://www.mensys.net/os2ports

Cheers,

Paul Smedley
Adelaide, Australia
25th October, 2008

---------------------

From harbour.01 at syenar.hu  Tue Oct 28 07:50:26 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 28 07:50:33 2008
Subject: [Harbour] 2008-10-28 12:48 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c938f3$Blat.v2.6.2$5e1fbc1a$e188fa62c10@127.0.0.1>

2008-10-28 12:48 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/hbcurl/make_b32.bat
  * contrib/hbcurl/make_vc.bat
  * contrib/hbcurl/Makefile
    + Added HB_HBCURL_USR_C envvar to customize C switches 
      specifically for this contrib.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Tue Oct 28 07:54:12 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 28 07:53:49 2008
Subject: [Harbour] 2008-10-28 12:53 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081028115412.GA14537@34-mo7-2.acn.waw.pl>

2008-10-28 12:53 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtwvt/gtwvt.h
  * harbour/source/rtl/gtwvt/gtwvt.c
    + added support for creating console window after 1-st screen update
      Please remember that it interacts with inkey() code which does not
      work until windows is not created.
      Now it should be quite easy to add support for some initializations
      before window is created. Probably it will be necessary to change
      INFO() method and store settings in some pWVT variables if pWVT->hWND
      is NULL and then use them as parameters for new console window.
      I'd like to leave this modification to MS-Windows developers.

  * harbour/contrib/xhb/xhbcopyf.c
    ! fixed name conflict with hb_fsCopy()

best regards
Przemek
From vailtom at gmail.com  Tue Oct 28 08:05:15 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Tue Oct 28 08:05:19 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <D634201E-45F8-48F4-A096-35C1E894EC4B@syenar.hu>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<D634201E-45F8-48F4-A096-35C1E894EC4B@syenar.hu>
Message-ID: <531d7a750810280505h319053e5n265006560323320c@mail.gmail.com>

I agree that putting the examples in a folder to share, would be
great! I already working with the material that we have today ... But
in this case, we need a PHP script (no CGI, just a PHP) to fit the
page dynamically and so do not depend on anyone to adjust this.

I also programmed in PHP and if agreed, could mount an example showing
how to is more simple and easy to build the samples page from TXT or
PRG files without MySQL, PostgreSQL, etc.

I believe this would be much more practical, since we could only put
the source of example in a specific folder, along with a screenshot
and the PHP script could mount the whole page alone.

It would be an idea, but I need to study the impacts not to be slow,
but need to know if you agree.
From vailtom at gmail.com  Tue Oct 28 08:08:28 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Tue Oct 28 08:08:33 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <200810280002.15344.philb@philb.us>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<200810280002.15344.philb@philb.us>
Message-ID: <531d7a750810280508s46bd6751g23492d380dd798bc@mail.gmail.com>

OK, noted.
From harbour.01 at syenar.hu  Tue Oct 28 08:20:50 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 28 08:20:58 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <531d7a750810280505h319053e5n265006560323320c@mail.gmail.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<D634201E-45F8-48F4-A096-35C1E894EC4B@syenar.hu>
	<531d7a750810280505h319053e5n265006560323320c@mail.gmail.com>
Message-ID: <9F6CDED9-EF72-463D-AA05-D2B1658540EA@syenar.hu>

Hi Renato,

What about just linking the files directly from SVN?

Like this:
http://harbour-project.svn.sourceforge.net/viewvc/harbour-project/trunk/harbour/contrib/examples/guestbk/guestbk.prg

This won't give us syntax coloring, but IMO that's
not a terrible loss.

Brgds,
Viktor

On 2008.10.28., at 13:05, Vailton Renato wrote:

> I agree that putting the examples in a folder to share, would be
> great! I already working with the material that we have today ... But
> in this case, we need a PHP script (no CGI, just a PHP) to fit the
> page dynamically and so do not depend on anyone to adjust this.
>
> I also programmed in PHP and if agreed, could mount an example showing
> how to is more simple and easy to build the samples page from TXT or
> PRG files without MySQL, PostgreSQL, etc.
>
> I believe this would be much more practical, since we could only put
> the source of example in a specific folder, along with a screenshot
> and the PHP script could mount the whole page alone.
>
> It would be an idea, but I need to study the impacts not to be slow,
> but need to know if you agree.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From bedipritpal at hotmail.com  Tue Oct 28 08:23:18 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Oct 28 08:23:22 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <531d7a750810280505h319053e5n265006560323320c@mail.gmail.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<D634201E-45F8-48F4-A096-35C1E894EC4B@syenar.hu>
	<531d7a750810280505h319053e5n265006560323320c@mail.gmail.com>
Message-ID: <20206211.post@talk.nabble.com>


Hi All


Vailton Renato wrote:
> 
> I agree that putting the examples in a folder to share, would be
> great! I already working with the material that we have today ... But
> in this case, we need a PHP script (no CGI, just a PHP) to fit the
> page dynamically and so do not depend on anyone to adjust this.
> 
> I also programmed in PHP and if agreed, could mount an example showing
> how to is more simple and easy to build the samples page from TXT or
> PRG files without MySQL, PostgreSQL, etc.
> 
> I believe this would be much more practical, since we could only put
> the source of example in a specific folder, along with a screenshot
> and the PHP script could mount the whole page alone.
> 
> It would be an idea, but I need to study the impacts not to be slow,
> but need to know if you agree.
> 

Probably we can link/or the whole site can be uploaded on Harbour 
domain:
http://www.harbour.vouch.info

It retrieves the pages dynamically from the sources which I can do
periodically or for specific releases. These are pure html pages with 
some Java.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Harbour-Web-site---Preview--2-%28Update%29-tp20186718p20206211.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Tue Oct 28 08:26:55 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 28 08:27:02 2008
Subject: [Harbour] 2008-10-28 10:24 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0810280434r12e0276w4d7f83bacadf5540@mail.gmail.com>
References: <20081028092509.GA18881@34-mo7-2.acn.waw.pl>
	<DE3A0F1F-4413-4134-96B4-883B79EBC662@syenar.hu>
	<9257026e0810280346y1d887c01l6fa558f0b67b97b3@mail.gmail.com>
	<B9FF8CEF-F5CA-4479-A152-8920E10FDFEA@syenar.hu>
	<4906F534.5070301@libero.it>
	<9257026e0810280434r12e0276w4d7f83bacadf5540@mail.gmail.com>
Message-ID: <E24FD613-D46F-4D42-B6C4-ACAF49DA05B7@syenar.hu>

Yes, that may be there for some time to support
behemoth legacy users. I'm not sure it's very good
to invest in it for new development though, if
there are other alternatives.

For sure the latest goodies won't be implemented
for such abandoned API, even if it gets bundled
and maintained in a "least-effort" fashion.

The big question is whether it's possible at all
to develop a GT for Harbour using Objective C,
or more generically for Cocoa?

Seems to need to Objective C code in our tree,
other than that I _guess_ it's possible.

Brgds,
Viktor

On 2008.10.28., at 12:34, Lorenzo Fiorini wrote:

> On Tue, Oct 28, 2008 at 12:19 PM, Maurilio Longo
> <maurilio.longo@libero.it> wrote:
>
>> Carbon is deprecated and Cocoa, you're right, needs Objective C.
>
> I've heard the same thing but after I've found that many says that MS
> and Adobe has requested Carbon to port their apps.
>
> Also Openoffice chosed Carbon:
> http://wiki.services.openoffice.org/wiki/Mac_OS_X_Porting_-_Carbon_Documentation
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Oct 28 08:28:53 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 28 08:29:07 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <20206211.post@talk.nabble.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<D634201E-45F8-48F4-A096-35C1E894EC4B@syenar.hu>
	<531d7a750810280505h319053e5n265006560323320c@mail.gmail.com>
	<20206211.post@talk.nabble.com>
Message-ID: <BC27D16C-9BD9-415C-8B57-301293969AB8@syenar.hu>

That's a nice offer, but I think we should keep our
pages on our current server, and not go to deep into
the "dynamic" page road, be it PHP, Java, ASP or else.

We could have some HarbourScript though, just to give
a flash of this technology :)

Brgds,
Viktor

On 2008.10.28., at 13:23, Pritpal Bedi wrote:

>
> Hi All
>
>
> Vailton Renato wrote:
>>
>> I agree that putting the examples in a folder to share, would be
>> great! I already working with the material that we have today ... But
>> in this case, we need a PHP script (no CGI, just a PHP) to fit the
>> page dynamically and so do not depend on anyone to adjust this.
>>
>> I also programmed in PHP and if agreed, could mount an example  
>> showing
>> how to is more simple and easy to build the samples page from TXT or
>> PRG files without MySQL, PostgreSQL, etc.
>>
>> I believe this would be much more practical, since we could only put
>> the source of example in a specific folder, along with a screenshot
>> and the PHP script could mount the whole page alone.
>>
>> It would be an idea, but I need to study the impacts not to be slow,
>> but need to know if you agree.
>>
>
> Probably we can link/or the whole site can be uploaded on Harbour
> domain:
> http://www.harbour.vouch.info
>
> It retrieves the pages dynamically from the sources which I can do
> periodically or for specific releases. These are pure html pages with
> some Java.
>
> Regards
> Pritpal Bedi
>
> -- 
> View this message in context: http://www.nabble.com/Harbour-Web-site---Preview--2-%28Update%29-tp20186718p20206211.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vailtom at gmail.com  Tue Oct 28 08:29:45 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Tue Oct 28 08:29:48 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <20201177.post@talk.nabble.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<20201177.post@talk.nabble.com>
Message-ID: <531d7a750810280529h3b1a4403xa34f4dedb964e62c@mail.gmail.com>

Hi Pritpal!

> Just one note: Color of the icon to <Development> too
> Out of the color scheme. Blud Can you add some color to it?

Well, I had received for her suggestion some time ago, but the problem
is that I have not spotted a good icon for this menu item yet ... :S

> PS: My name does not appear in the crew list. Can you include it?
I use Harbor for many years but only now started to participate more
in this group and help (I believe) the project ... I do not feel able
to decide or change something in the Crew List, even though I already
aim see my name there several times ... Can I change it so, as I have
done but only if some member (or members) the oldest of the group
adopt the idea ... and not only her, but other names wishing to be
included there.

I hope to have expressed myself correctly and please do not
misunderstand me, but i think not only able to decide this.
From harbour.01 at syenar.hu  Tue Oct 28 08:37:07 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 28 08:37:14 2008
Subject: [Harbour] MinGW + GTWVT + unwanted console
Message-ID: <8D594320-2EF3-43A1-8663-F90BBC248741@syenar.hu>

Hi folks,

Maybe someone has an idea, because I'm not sure
if this is an issue with my code, Harbour code,
or it's just expected behvior.

This happens with r9763, when compiled and built
with MinGW 4.1.2, and having HB_GT_WVT_DEFAULT
+ HB_GT_WIN in my app code.

Now, when the app starts, it's putting some
app headers on the command line via OutErr(),
than goes CUI. This was normal behavior
in Clipper times. (the app also has a command
line help screen, other than these it doesn't
use the Out*() functions).

What happens with MinGW, is that a separate
console window opens with the header text,
plus the usual WVT window opens with the app itself,
while the console window stays on the background
for the whole running time.

For MSVC/BCC, the situation is a bit different,
here the Out*() functions simply don't do anything.

I think none of the these behaviors are very good,
and I'm not sure what are the platform possibilities
or what could I do on the app level to get around these
(besides removing all Out*() functions of course).

In any case, I think MinGW and MSVC/BCC should be
behave (if possible) more similarly.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Oct 28 08:40:03 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 28 08:40:09 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <531d7a750810280529h3b1a4403xa34f4dedb964e62c@mail.gmail.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<20201177.post@talk.nabble.com>
	<531d7a750810280529h3b1a4403xa34f4dedb964e62c@mail.gmail.com>
Message-ID: <42404BAD-6619-45EE-BAFA-7C4D54AB3FF5@syenar.hu>

Renato and all,

Please feel free to add Pritpal to the list,
and don't forget yourself.

If there is anyone else missing from the list
and wanting to be there, pls speak up while
we're at this.

Preferably _name_, _country_, Harbour role [, e-mail/URL] [,  
pictures[s] ]
should be sent to the list or Renato (if Renato agrees).

Brgds,
Viktor

On 2008.10.28., at 13:29, Vailton Renato wrote:

> Hi Pritpal!
>
>> Just one note: Color of the icon to <Development> too
>> Out of the color scheme. Blud Can you add some color to it?
>
> Well, I had received for her suggestion some time ago, but the problem
> is that I have not spotted a good icon for this menu item yet ... :S
>
>> PS: My name does not appear in the crew list. Can you include it?
> I use Harbor for many years but only now started to participate more
> in this group and help (I believe) the project ... I do not feel able
> to decide or change something in the Crew List, even though I already
> aim see my name there several times ... Can I change it so, as I have
> done but only if some member (or members) the oldest of the group
> adopt the idea ... and not only her, but other names wishing to be
> included there.
>
> I hope to have expressed myself correctly and please do not
> misunderstand me, but i think not only able to decide this.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vailtom at gmail.com  Tue Oct 28 08:40:17 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Tue Oct 28 08:40:21 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <9F6CDED9-EF72-463D-AA05-D2B1658540EA@syenar.hu>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<D634201E-45F8-48F4-A096-35C1E894EC4B@syenar.hu>
	<531d7a750810280505h319053e5n265006560323320c@mail.gmail.com>
	<9F6CDED9-EF72-463D-AA05-D2B1658540EA@syenar.hu>
Message-ID: <531d7a750810280540k1545bdb2hc863bb7f2014dfed@mail.gmail.com>

Yes, the colors lose ... But beyond this, I think the screenshot and
the texts that highlight the features of example. I think this is a
good gap to highlight the features of the project.
From dmacias at mail.udg.mx  Tue Oct 28 09:44:03 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Oct 28 08:44:19 2008
Subject: [Harbour] Harbour under OS/2
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <49071723.2000508@mail.udg.mx>

These are warnings/errors of current Harbour code under OS/2 using usual 
gcc335

Many of them happen in gcc432 too, so they are problem of Harbour code 
and not of gcc version

David Macias


-------------------
[E:\harbour810\harbour]make -r           1>make_gnu.log
../../gtstd.c: In function `hb_gt_std_ReadKey':
../../gtstd.c:389: warning: unused variable `TODO'
../../dynlibhb.c: In function `HB_FUN_HB_LIBLOAD':
../../dynlibhb.c:102: warning: implicit declaration of function 
`DosLoadModule'
../../dynlibhb.c: In function `HB_FUN_HB_LIBFREE':
../../dynlibhb.c:145: warning: implicit declaration of function 
`DosFreeModule'
../../estack.c: In function `hb_stackDebugRequest':
../../estack.c:442: warning: return from incompatible pointer type
../../hvm.c: In function `hb_dbg_InvokeDebug':
../../hvm.c:10596: warning: initialization from incompatible pointer type
../../hvm.c: In function `HB_FUN___DBGINVOKEDEBUG':
../../hvm.c:10642: warning: initialization from incompatible pointer type
../../../dynlibhb.c: In function `HB_FUN_HB_LIBLOAD':
../../../dynlibhb.c:102: warning: implicit declaration of function 
`DosLoadModule'
../../../dynlibhb.c: In function `HB_FUN_HB_LIBFREE':
../../../dynlibhb.c:145: warning: implicit declaration of function 
`DosFreeModule'
../../../estack.c: In function `hb_stackDebugRequest':
../../../estack.c:442: warning: return from incompatible pointer type
../../../hvm.c: In function `hb_dbg_InvokeDebug':
../../../hvm.c:10596: warning: initialization from incompatible pointer type
../../../hvm.c: In function `HB_FUN___DBGINVOKEDEBUG':
../../../hvm.c:10642: warning: initialization from incompatible pointer type
../../../../lib/os2/gcc/hbvm.a(dynlibhb.o): Undefined symbol 
_DosLoadModule referenced from text segment
../../../../lib/os2/gcc/hbvm.a(dynlibhb.o): Undefined symbol 
_DosFreeModule referenced from text segment
make[3]: *** [hbrun.exe] Error 1
make[2]: *** [descend] Error 2
../../xhbcopyf.c:67: error: conflicting types for `hb_fsCopy'
../../../../include/hbapifs.h:211: error: previous declaration of 
`hb_fsCopy'
make[3]: *** [xhbcopyf.o] Error 1
make[2]: *** [descend] Error 2

---------------------


From vailtom at gmail.com  Tue Oct 28 08:44:46 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Tue Oct 28 08:44:50 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <42404BAD-6619-45EE-BAFA-7C4D54AB3FF5@syenar.hu>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<20201177.post@talk.nabble.com>
	<531d7a750810280529h3b1a4403xa34f4dedb964e62c@mail.gmail.com>
	<42404BAD-6619-45EE-BAFA-7C4D54AB3FF5@syenar.hu>
Message-ID: <531d7a750810280544k395a8deck92b5fb672175a8b3@mail.gmail.com>

I am available to help.

Send me please _name_, _country_, Harbor role [, e-mail/URL] and [,
pictures [s]] for my email that will be providing the update of the
page.
From vailtom at gmail.com  Tue Oct 28 08:58:10 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Tue Oct 28 08:58:14 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <9257026e0810280005i2e9458e3v7f4901a4616ef098@mail.gmail.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<9257026e0810280005i2e9458e3v7f4901a4616ef098@mail.gmail.com>
Message-ID: <531d7a750810280558vac87f8co7e1d6eabf2af83ca@mail.gmail.com>

In this case, I still need to finish the design of other pages and the
rest of the site .. my question is: Do you think more appropriate then
to this page, wait to be selected or build some examples of PRG?

If yes, I will continue building the other pages, otherwise continue
to work with the material we have here and to select other examples.
From maurilio.longo at libero.it  Tue Oct 28 09:28:30 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Oct 28 09:28:39 2008
Subject: [Harbour] Harbour under OS/2 - gcc432
In-Reply-To: <4907082A.6080801@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<4907082A.6080801@mail.udg.mx>
Message-ID: <4907137E.8030701@libero.it>

David,

I don't know, but GCC 4.3.2 from Paul is an alpha release, I'd wait for a more
stabilized environment.

Best regards.

Maurilio.

David Arturo Macias Corona wrote:
> Maurilio, Przemek:
> 
> I am testing current Harbour with eCS 1.2MR and
> gcc-4.3.2-os2-20081025.zip from Paul Smedley and I get many warnings/errors
> 
> I do not know if they belong to:
> a) A bad gcc environment settings
> b) Failures of gcc 4.3.2 port
> c) Real warnings/error in Harbour code, due maybe to gcc version
> revision in code
> 
> So I recall for your help  :-)
> 
> Below are warnings/errors
> 
> I tried to configure my gcc 4.3.2 environment settings based in
> gcc432.cmd file
> Below are included my gccset.cmd and readme.os2
> 
> Libraries created are:
> ( many are skipped due missing harbour.exe )
> 
> 28/10/08  6:01a        55,618    124 a---  hbcommon.a
> 28/10/08  6:03a       355,518    124 a---  hbcplr.a
> 28/10/08  6:13a        68,872    124 a---  hbmacro.a
> 28/10/08  6:17a        48,498    124 a---  hbcpage.a
> 28/10/08  6:20a       246,914    124 a---  hblang.a
> 28/10/08  6:23a       158,786    124 a---  hbpcre.a
> 28/10/08  6:23a        67,842    124 a---  hbzlib.a
> 28/10/08  6:24a       230,076    124 a---  hbbmcdx.a
> 28/10/08  6:25a        13,070    124 a---  hbclipsm.a
> 28/10/08  6:31a         9,226    124 a---  hbgt.a
> 28/10/08  6:31a        36,938    124 a---  hbmzip.a
>        11 file(s)   1,291,358 bytes used
> 
> and make_gnu.log are 1602 lines length
> 
> David Macias
> 
> 
> -------------------
> [E:\harbour810\harbour]make -r           1>make_gnu.log
> ../../hbfsapi.c: In function 'hb_fsNameExists':
> ../../hbfsapi.c:323: warning: pointer targets in passing argument 1 of
> 'DosQueryPathInfo' differ in signedness
> ../../hbfsapi.c: In function 'hb_fsFileExists':
> ../../hbfsapi.c:381: warning: pointer targets in passing argument 1 of
> 'DosQueryPathInfo' differ in signedness
> ../../hbfsapi.c: In function 'hb_fsDirExists':
> ../../hbfsapi.c:440: warning: pointer targets in passing argument 1 of
> 'DosQueryPathInfo' differ in signedness
> 
> ../../hbgete.c: In function 'hb_getenv':
> ../../hbgete.c:88: warning: pointer targets in initialization differ in
> signedness
> ../../hbgete.c:93: warning: pointer targets in passing argument 1 of
> 'DosScanEnv' differ in signedness
> ../../hbgete.c:95: warning: pointer targets in passing argument 1 of
> 'hb_strdup' differ in signedness
> ../../hbgete.c: In function 'hb_getenv_buffer':
> ../../hbgete.c:127: warning: pointer targets in initialization differ in
> signedness
> ../../hbgete.c:132: warning: pointer targets in passing argument 1 of
> 'DosScanEnv' differ in signedness
> ../../hbgete.c:136: warning: pointer targets in passing argument 2 of
> 'hb_strncpy' differ in signedness
> emxbind: invalid a.out file (startup code)
> ld.exe: emxbind failed
> 
> make[3]: *** [hbpp.exe] Error 1
> make[2]: *** [descend] Error 2
> ld.exe: No such file or directory for hbpp
> make[3]: *** [harbour.exe] Error 1
> make[2]: *** [descend] Error 2
> 
> ../../hbffind.c: In function 'hb_fsFindNextLow':
> ../../hbffind.c:521: warning: pointer targets in passing argument 1 of
> 'DosFindFirst' differ in signedness
> ../../hbinet.c: In function 'HB_FUN_HB_INETACCEPT':
> ../../hbinet.c:1758: warning: pointer targets in passing argument 3 of
> 'accept' differ in signedness
> make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
> make[2]: *** [descend] Error 1
> ../../dynlibhb.c: In function 'HB_FUN_HB_LIBLOAD':
> ../../dynlibhb.c:102: warning: implicit declaration of function
> 'DosLoadModule'
> ../../dynlibhb.c: In function 'HB_FUN_HB_LIBFREE':
> ../../dynlibhb.c:145: warning: implicit declaration of function
> 'DosFreeModule'
> ../../estack.c: In function 'hb_stackDebugRequest':
> ../../estack.c:442: warning: return from incompatible pointer type
> ../../hvm.c: In function 'hb_dbg_InvokeDebug':
> ../../hvm.c:10596: warning: initialization from incompatible pointer type
> ../../hvm.c: In function 'HB_FUN___DBGINVOKEDEBUG':
> ../../hvm.c:10642: warning: initialization from incompatible pointer type
> make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
> make[2]: *** [descend] Error 1
> make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
> make[2]: *** [descend] Error 1
> make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
> make[2]: *** [descend] Error 1
> make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
> make[2]: *** [descend] Error 1
> make[1]: *** [first] Error 2
> make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
> make[2]: *** [descend] Error 1
> make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
> make[2]: *** [descend] Error 1
> make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
> make[2]: *** [descend] Error 1
> make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
> make[2]: *** [descend] Error 1
> make[1]: *** [first] Error 2
> make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
> make[2]: *** [descend] Error 1
> ../../files.c: In function 'HB_FUN_SETFDATI':
> ../../files.c:273: warning: pointer targets in passing argument 1 of
> 'DosQueryPathInfo' differ in signedness
> ../../files.c:308: warning: pointer targets in passing argument 1 of
> 'DosSetPathInfo' differ in signedness
> ../../os2pm.c: In function 'HB_FUN_WINREGISTERCLASS':
> ../../os2pm.c:113: warning: pointer targets in passing argument 2 of
> 'WinRegisterClass' differ in signedness
> ../../os2pm.c: In function 'HB_FUN_WINCREATESTDWINDOW':
> ../../os2pm.c:148: warning: pointer targets in passing argument 4 of
> 'WinCreateStdWindow' differ in signedness
> ../../os2pm.c:148: warning: pointer targets in passing argument 5 of
> 'WinCreateStdWindow' differ in signedness
> ../../os2pm.c: In function 'HB_FUN_WINSETWINDOWTEXT':
> ../../os2pm.c:180: warning: pointer targets in passing argument 2 of
> 'WinSetWindowText' differ in signedness
> ../../os2pm.c: In function 'HB_FUN_WINGETTEXT':
> ../../os2pm.c:189: warning: pointer targets in passing argument 1 of
> 'hb_retc' differ in signedness
> ../../os2pm.c: In function 'HB_FUN_MSGINFO':
> ../../os2pm.c:196: warning: pointer targets in initialization differ in
> signedness
> ../../os2pm.c:199: warning: pointer targets in passing argument 3 of
> 'WinMessageBox' differ in signedness
> make[4]: ../../../../../source/main/os2/gcc/harbour.exe: Command not found
> make[3]: *** [descend] Error 1
> make[2]: *** [first] Error 2
> make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
> make[2]: *** [descend] Error 1
> ../../hbmzip.c: In function 'hb_zipStoreFile':
> ../../hbmzip.c:748: warning: pointer targets in passing argument 1 of
> 'DosQueryPathInfo' differ in signedness
> ../../hbmzip.c: In function 'hb_unzipExtractCurrentFile':
> ../../hbmzip.c:1049: warning: pointer targets in passing argument 1 of
> 'DosQueryPathInfo' differ in signedness
> ../../hbmzip.c:1067: warning: pointer targets in passing argument 1 of
> 'DosSetPathInfo' differ in signedness
> make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
> make[2]: *** [descend] Error 1
> make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
> make[2]: *** [descend] Error 1
> make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
> make[2]: *** [descend] Error 1
> make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
> make[2]: *** [descend] Error 1
> make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
> make[2]: *** [descend] Error 1
> ../../xhbcopyf.c:66: error: conflicting types for 'hb_fsCopy'
> ../../../../include/hbapifs.h:211: error: previous declaration of
> 'hb_fsCopy' was here
> make[3]: *** [xhbcopyf.o] Error 1
> make[2]: *** [descend] Error 2
> make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
> make[2]: *** [descend] Error 1
> 
> ---------------------
> 
> Rem gccset.cmd
> 
> SET PATH_EMXPGCC=E:\usr
> SET CCENV=EMX
> SET BUILD_ENV=EMX
> SET BUILD_PLATFORM=OS2
> SET ROOT=E:
> 
> SET GCCDIR=%ROOT%\usr
> SET GCCDIR2=%ROOT%/usr
> 
> SET EMX=%ROOT%\EMX
> SET EMX2=%ROOT%/EMX
> 
> SET
> PATH=%GCCDIR%\local432\bin;%GCCDIR%\local432\libexec\gcc\i386-pc-os2-emx\4.3.2;%PATH%
> 
> 
> SET
> BEGINLIBPATH=%GCCDIR%\local432\lib;%GCCDIR%\local432\lib\gcc\i386-pc-os2-emx\4.3.2;%BEGINLIBPATH%
> 
> 
> SET DPATH=%GCCDIR%\local432\lib;%DPATH%
> 
> SET
> C_INCLUDE_PATH=%GCCDIR2%/local432/lib/gcc/i386-pc-os2-emx/4.3.2/include;
> 
> SET CPLUS_INCLUDE_PATH=%GCCDIR2%/local432/include/c++/4.3.2/backward;
> 
> Rem DAVID:
> CPLUS_INCLUDE_PATH=E:/usr/include/c++/3.3.5/;E:/usr/include/c++/3.3.5/i386-pc-os2-emx;E:/usr/include/c++/3.3.5/backward;E:/usr/include;
> 
> 
> SET
> LIBRARY_PATH=%GCCDIR2%/local432/lib;%GCCDIR2%/local432/lib/gcc/i386-pc-os2-emx/4.3.2;
> 
> 
> Rem SET INFOPATH=%EMX2%/info;u:/usr/share/info
> Rem DAVID: INFOPATH=E:/usr/info;
> 
> ---------------------
> 
> Readme.os2
> 
> GCC v4.3.2 + binutils 2.16.1 (minus ld.exe)
> 
> Requires libc063.dll available from
> ftp://ftp.netlabs.org/pub/gcc/libc-0.6.3-csd3.zip
> 
> Instructions for use:
> - Currently installs into \usr\local432 so as not to interfere with an
> existing GCC 3.3.5 install in \usr\bin
> - See sample compiler environment setup scripts (in \usr\local432) for
> required differences compared to GCC 3.3.5
> - report any problems via email to paul@smedley.id.au or via
> http://mantis.smedley.info
> 
> Known Issues:
> - no support yet for the GOMP multiprocessor library
> - link warning when using -Zomf - emxomf will require updating to deal
> with the new stabs types, but according to Knut, these warnings can be
> safely ignored, and only affect debugging
> 
> Updates since original build:
> - Added threading support (20081011 build)
> - fixed problem with stdcall that produced errors like '{standard
> input}:75: Error: invalid character '_' in mnemonic' (20081012 build)
> - fixed (hopefully) 'internal compiler error' crashes when -fPIC is used
> - Added support for precompiled headers based on cygwin code (untested)
> (20081012 build)
> - Fixed 'gcc conftest.c -lgcc' produced -lgcc.exe (20081012b build)
> - Fixed problems with cdecl (20081014 build)
> - Fixed (hopefully) problems with fastcall (20081014 build)
> - Binutils 2.16.1 (minus ld.exe) included (20081025 build)
> - Fixed (hopefully) probelm with recursive thread support in libstdc++ -
> thanks Yuri for the patch! (20081025 build)
> 
> ld.exe from binutils isn't included as it currently isn't working
> correctly (emxbind error)
> 
> This build hasn't had huge amounts of testing, but has been used to
> build Scribus, Firefox 3.0cvs and ffmpeg successfully. Any feedback on
> things that work/don't work vs GCC 3.3.5 would be appreciated!
> 
> If you like this software and want to support continued ports, please
> consider donating via PayPal via the link in the footer at
> http://smedley.info/os2ports or via the Mensys online store at
> http://www.mensys.net/os2ports
> 
> Cheers,
> 
> Paul Smedley
> Adelaide, Australia
> 25th October, 2008
> 
> ---------------------
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Tue Oct 28 09:56:14 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 28 09:56:22 2008
Subject: [Harbour] 2008-10-28 10:24 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0810280434r12e0276w4d7f83bacadf5540@mail.gmail.com>
References: <20081028092509.GA18881@34-mo7-2.acn.waw.pl>
	<DE3A0F1F-4413-4134-96B4-883B79EBC662@syenar.hu>
	<9257026e0810280346y1d887c01l6fa558f0b67b97b3@mail.gmail.com>
	<B9FF8CEF-F5CA-4479-A152-8920E10FDFEA@syenar.hu>
	<4906F534.5070301@libero.it>
	<9257026e0810280434r12e0276w4d7f83bacadf5540@mail.gmail.com>
Message-ID: <76E77A2C-67CA-4C31-851B-86FF14479CC0@syenar.hu>

Reading the docs, Carbon looks like a good choice
for a Harbour GTWVT port.

Brgds,
Viktor

On 2008.10.28., at 12:34, Lorenzo Fiorini wrote:

> On Tue, Oct 28, 2008 at 12:19 PM, Maurilio Longo
> <maurilio.longo@libero.it> wrote:
>
>> Carbon is deprecated and Cocoa, you're right, needs Objective C.
>
> I've heard the same thing but after I've found that many says that MS
> and Adobe has requested Carbon to port their apps.
>
> Also Openoffice chosed Carbon:
> http://wiki.services.openoffice.org/wiki/Mac_OS_X_Porting_-_Carbon_Documentation
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Tue Oct 28 10:12:51 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Oct 28 10:12:56 2008
Subject: [Harbour] MinGW + GTWVT + unwanted console
In-Reply-To: <8D594320-2EF3-43A1-8663-F90BBC248741@syenar.hu>
References: <8D594320-2EF3-43A1-8663-F90BBC248741@syenar.hu>
Message-ID: <9257026e0810280712r5be412cdh50ed20017aab8124@mail.gmail.com>

On Tue, Oct 28, 2008 at 1:37 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> In any case, I think MinGW and MSVC/BCC should be
> behave (if possible) more similarly.

Have you added -mwindows to the link script?

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Tue Oct 28 10:15:23 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Oct 28 10:15:26 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <531d7a750810280505h319053e5n265006560323320c@mail.gmail.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<D634201E-45F8-48F4-A096-35C1E894EC4B@syenar.hu>
	<531d7a750810280505h319053e5n265006560323320c@mail.gmail.com>
Message-ID: <9257026e0810280715q5fb49647nc4a41cc3b55dfe6@mail.gmail.com>

On Tue, Oct 28, 2008 at 1:05 PM, Vailton Renato <vailtom@gmail.com> wrote:

> I agree that putting the examples in a folder to share, would be
> great! I already working with the material that we have today ... But
> in this case, we need a PHP script (no CGI, just a PHP) to fit the
> page dynamically and so do not depend on anyone to adjust this.

Sorry probably I was not so clear.

I simply suggested to create a "good examples" dir not using those
files "directly" for the web site.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Tue Oct 28 10:20:21 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Oct 28 10:20:24 2008
Subject: [Harbour] 2008-10-28 10:24 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <E24FD613-D46F-4D42-B6C4-ACAF49DA05B7@syenar.hu>
References: <20081028092509.GA18881@34-mo7-2.acn.waw.pl>
	<DE3A0F1F-4413-4134-96B4-883B79EBC662@syenar.hu>
	<9257026e0810280346y1d887c01l6fa558f0b67b97b3@mail.gmail.com>
	<B9FF8CEF-F5CA-4479-A152-8920E10FDFEA@syenar.hu>
	<4906F534.5070301@libero.it>
	<9257026e0810280434r12e0276w4d7f83bacadf5540@mail.gmail.com>
	<E24FD613-D46F-4D42-B6C4-ACAF49DA05B7@syenar.hu>
Message-ID: <9257026e0810280720o7f985ab7kb7412c3035108124@mail.gmail.com>

On Tue, Oct 28, 2008 at 1:26 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> For sure the latest goodies won't be implemented
> for such abandoned API, even if it gets bundled
> and maintained in a "least-effort" fashion.

Ok but if I understand correctly we need a simple window and few
drawing primitive.

I guess t would be hard to find an Harbour developer with Objective C skills :)

best regards,
Lorenzo
From maurilio.longo at libero.it  Tue Oct 28 10:25:59 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Oct 28 10:26:06 2008
Subject: [Harbour] 2008-10-28 10:24 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0810280434r12e0276w4d7f83bacadf5540@mail.gmail.com>
References: <20081028092509.GA18881@34-mo7-2.acn.waw.pl>	<DE3A0F1F-4413-4134-96B4-883B79EBC662@syenar.hu>	<9257026e0810280346y1d887c01l6fa558f0b67b97b3@mail.gmail.com>	<B9FF8CEF-F5CA-4479-A152-8920E10FDFEA@syenar.hu>	<4906F534.5070301@libero.it>
	<9257026e0810280434r12e0276w4d7f83bacadf5540@mail.gmail.com>
Message-ID: <490720F7.3090303@libero.it>

Lorenzo,

probably because those apps come from a windows world and carbon is similar,
conceptually, to win32 windowing api.

Maurilio.

Lorenzo Fiorini wrote:
> On Tue, Oct 28, 2008 at 12:19 PM, Maurilio Longo
> <maurilio.longo@libero.it> wrote:
> 
>> Carbon is deprecated and Cocoa, you're right, needs Objective C.
> 
> I've heard the same thing but after I've found that many says that MS
> and Adobe has requested Carbon to port their apps.
> 
> Also Openoffice chosed Carbon:
> http://wiki.services.openoffice.org/wiki/Mac_OS_X_Porting_-_Carbon_Documentation
> 
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From mbelgrano at deltain.it  Tue Oct 28 10:30:30 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Oct 28 10:31:18 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <20206211.post@talk.nabble.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com><D634201E-45F8-48F4-A096-35C1E894EC4B@syenar.hu><531d7a750810280505h319053e5n265006560323320c@mail.gmail.com>
	<20206211.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0F3@SRV02.deltain.net>

Good
I suggest organize doc area 
Is possible made aivable as pdf?

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
Sent: Tuesday, October 28, 2008 1:23 PM
To: harbour@harbour-project.org
Subject: Re: [Harbour] Harbour Web site - Preview #2 (Update)


Hi All


Vailton Renato wrote:
> 
> I agree that putting the examples in a folder to share, would be
> great! I already working with the material that we have today ... But
> in this case, we need a PHP script (no CGI, just a PHP) to fit the
> page dynamically and so do not depend on anyone to adjust this.
> 
> I also programmed in PHP and if agreed, could mount an example showing
> how to is more simple and easy to build the samples page from TXT or
> PRG files without MySQL, PostgreSQL, etc.
> 
> I believe this would be much more practical, since we could only put
> the source of example in a specific folder, along with a screenshot
> and the PHP script could mount the whole page alone.
> 
> It would be an idea, but I need to study the impacts not to be slow,
> but need to know if you agree.
> 

Probably we can link/or the whole site can be uploaded on Harbour 
domain:
http://www.harbour.vouch.info

It retrieves the pages dynamically from the sources which I can do
periodically or for specific releases. These are pure html pages with 
some Java.

Regards
Pritpal Bedi

-- 
View this message in context:
http://www.nabble.com/Harbour-Web-site---Preview--2-%28Update%29-tp20186
718p20206211.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Tue Oct 28 10:31:29 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 28 10:31:38 2008
Subject: [Harbour] MinGW + GTWVT + unwanted console
In-Reply-To: <9257026e0810280712r5be412cdh50ed20017aab8124@mail.gmail.com>
References: <8D594320-2EF3-43A1-8663-F90BBC248741@syenar.hu>
	<9257026e0810280712r5be412cdh50ed20017aab8124@mail.gmail.com>
Message-ID: <3F02212C-E8E8-4ED5-9135-745479DA7307@syenar.hu>

Many thanks Lorenzo, that helped getting rid
of the additional console window. Great.

This way, Out*() functions are not visible
on screen, so we're in sync with MSVC/BCC.

Next question, how to solve the not appearing
Out*() functions. For some reason it's not even
possible to redirect them to files.

Brgds,
Viktor

On 2008.10.28., at 15:12, Lorenzo Fiorini wrote:

> On Tue, Oct 28, 2008 at 1:37 PM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>> In any case, I think MinGW and MSVC/BCC should be
>> behave (if possible) more similarly.
>
> Have you added -mwindows to the link script?
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Tue Oct 28 10:44:58 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 28 10:44:36 2008
Subject: [Harbour] MinGW + GTWVT + unwanted console
In-Reply-To: <8D594320-2EF3-43A1-8663-F90BBC248741@syenar.hu>
References: <8D594320-2EF3-43A1-8663-F90BBC248741@syenar.hu>
Message-ID: <20081028144458.GA28019@34-mo7-2.acn.waw.pl>

On Tue, 28 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> This happens with r9763, when compiled and built
> with MinGW 4.1.2, and having HB_GT_WVT_DEFAULT
> + HB_GT_WIN in my app code.
> Now, when the app starts, it's putting some
> app headers on the command line via OutErr(),
> than goes CUI. This was normal behavior
> in Clipper times. (the app also has a command
> line help screen, other than these it doesn't
> use the Out*() functions).

Out*() functions are redirected to STDOUT/STDERR
handles. It's a platform dependent issue if such
handles are open and redirected to some device
or file in each new process.
It's a standard in most of OS-es except MS-Windows.
In Windows GUI and CUI applications needs different
startup code and inherits different settings from
caller. Usually GUI application does not have open
STDOUT/STDERR handles so releated functions does not
work.
In *nixes there is no difference between GUI and CUI
programs and you do not need separated binaries for
both modes.
In MinGW authors tired to replicate such functionality
so it's possible to make mixed programs. If you are using
MSYS then it should be possible to create GUI programs
where STDOUT/STDERR is redirected to MSYS console. The
bad side effect is that if console is not available this
code allocates new console and you have your own GUI window(s)
and console window which handles STDOUT/STDERR output.
MinGW tries to recognize type of application automatically
by looking for main() and WinMain() functions in linked
binaries. It can be also controlled manually by programmer
using -mwindow and -mconsole switches.
The default setting and switch/autodetection priority was
changing in last years so I cannot say what is default in
your system now. In the past some MinGW versions unconditionally
forced console mode if linker found C main() function in linked
function list. It's the reason why we moved mainstd.c from HVM
library to separate mainstd library in MinGW builds to allow users
adding them to linked library list only when he needs console
application.

> What happens with MinGW, is that a separate
> console window opens with the header text,
> plus the usual WVT window opens with the app itself,
> while the console window stays on the background
> for the whole running time.

See above. If you use -mwindow GCC switch and/or remove
mainstd from linked library list then you will create
pure GUI program without console allocated automatically
when parrent process does not set valid STDOUT/STDERR output.

> For MSVC/BCC, the situation is a bit different,
> here the Out*() functions simply don't do anything.

See above. They can create only pure GUI or CUI programs
without any mixed versions which are available in MinGW.

> I think none of the these behaviors are very good,
> and I'm not sure what are the platform possibilities
> or what could I do on the app level to get around these
> (besides removing all Out*() functions of course).

If you want Out*() functions working in pure GUI programs
then you need sth connected to STDOUT/STDERR. It usually
should be set by calling process. Probably if you will
use some consoles with such functionality then it will
work though there is also problem with automatic GUI programs
detaching but I think it should be a way to resolve it though
it's rather question to MS-Windows programmers/users not to me.

> In any case, I think MinGW and MSVC/BCC should be
> behave (if possible) more similarly.

So just use -mwindow MinGW switch for linking GUI programs
and if your MinGW version needs it then remove mainstd lib.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Oct 28 10:56:59 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 28 10:56:36 2008
Subject: [Harbour] 2008-10-28 15:56 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081028145659.GA29543@34-mo7-2.acn.waw.pl>

2008-10-28 15:56 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbstack.h
    ! fixed fDebugRequest declaration

best regards
Przemek
From bedipritpal at hotmail.com  Tue Oct 28 10:58:32 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Oct 28 10:58:37 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <42404BAD-6619-45EE-BAFA-7C4D54AB3FF5@syenar.hu>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<20201177.post@talk.nabble.com>
	<531d7a750810280529h3b1a4403xa34f4dedb964e62c@mail.gmail.com>
	<42404BAD-6619-45EE-BAFA-7C4D54AB3FF5@syenar.hu>
Message-ID: <20208820.post@talk.nabble.com>


Thanks Viktor


Szak?ts Viktor wrote:
> 
> Please feel free to add Pritpal to the list,
> and don't forget yourself.
> 
> If there is anyone else missing from the list
> and wanting to be there, pls speak up while
> we're at this.
> 
> Preferably _name_, _country_, Harbour role [, e-mail/URL] [,  
> pictures[s] ]
> should be sent to the list or Renato (if Renato agrees).
> 

Can someone suggest "Harbour role" for me ?
I just cannot imagine for myself what I do for Harbour.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Harbour-Web-site---Preview--2-%28Update%29-tp20186718p20208820.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Tue Oct 28 11:01:49 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Oct 28 11:01:53 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <531d7a750810280529h3b1a4403xa34f4dedb964e62c@mail.gmail.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<20201177.post@talk.nabble.com>
	<531d7a750810280529h3b1a4403xa34f4dedb964e62c@mail.gmail.com>
Message-ID: <20208905.post@talk.nabble.com>


Hello Renato

> Just one note: Color of the icon to <Development> too
> Out of the color scheme. Blud Can you add some color to it?

>> Well, I had received for her suggestion some time ago, but the problem
>> is that I have not spotted a good icon for this menu item yet ... :S

Just send me the icon orupload here, I will change its color.

My credentials:

Pritpal Bedi
India
pritpal@vouch.info
http://www.vouch.info
[ Group to decide my role ]

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Harbour-Web-site---Preview--2-%28Update%29-tp20186718p20208905.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Tue Oct 28 11:32:02 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Oct 28 11:32:49 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <20208820.post@talk.nabble.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com><20201177.post@talk.nabble.com><531d7a750810280529h3b1a4403xa34f4dedb964e62c@mail.gmail.com><42404BAD-6619-45EE-BAFA-7C4D54AB3FF5@syenar.hu>
	<20208820.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0F6@SRV02.deltain.net>

Captain of the Harbour GT with GUI aspect
Harbour general Manager Of all Developer of gtwvg
Harbour GT & Integration Captain
But also more hihihihihihihih
Plastic GURU of all fanatic of Look of harbour Application
People that merge the past of memoedit with Future OF GTWVG

-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
Sent: Tuesday, October 28, 2008 3:59 PM
To: harbour@harbour-project.org
Subject: Re: [Harbour] Harbour Web site - Preview #2 (Update)


Thanks Viktor


Szak?ts Viktor wrote:
> 
> Please feel free to add Pritpal to the list,
> and don't forget yourself.
> 
> If there is anyone else missing from the list
> and wanting to be there, pls speak up while
> we're at this.
> 
> Preferably _name_, _country_, Harbour role [, e-mail/URL] [,  
> pictures[s] ]
> should be sent to the list or Renato (if Renato agrees).
> 

Can someone suggest "Harbour role" for me ?
I just cannot imagine for myself what I do for Harbour.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Harbour-Web-site---Preview--2-%28Update%29-tp20186718p20208820.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From vailtom at gmail.com  Tue Oct 28 11:38:53 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Tue Oct 28 11:39:06 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <9257026e0810280715q5fb49647nc4a41cc3b55dfe6@mail.gmail.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<D634201E-45F8-48F4-A096-35C1E894EC4B@syenar.hu>
	<531d7a750810280505h319053e5n265006560323320c@mail.gmail.com>
	<9257026e0810280715q5fb49647nc4a41cc3b55dfe6@mail.gmail.com>
Message-ID: <531d7a750810280838o682ed21dk51a4e2f226103128@mail.gmail.com>

uh .... understand. I had understood something else, but ok ... I will
continue the work here.
From mbelgrano at deltain.it  Tue Oct 28 11:43:09 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Oct 28 11:43:54 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <20201177.post@talk.nabble.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<20201177.post@talk.nabble.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0F7@SRV02.deltain.net>

If possible please include also me

Massimo Belgrano
Massimo.belgrano@gmail.com
Fleet Admiral of Newsgroup, Lieutenant of application tester, and Half
soldier developer.

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
Sent: Tuesday, October 28, 2008 5:20 AM
To: harbour@harbour-project.org
Subject: Re: [Harbour] Harbour Web site - Preview #2 (Update)


Renalto

The overall design is now very pleasing.

Just one note:  Color of the <Development> icon to too
out of the color scheme. Can you add some blud color to it?

Regards
Pritpal Bedi

PS: My name does not appear in the crew list. Can you include it?


Vailton Renato wrote:
> 
> Hi all!
> 
> I am of opinions on the page DOCUMENTATION > SAMPLES of the new site.
> I need to know if I'm on the right track and if all agree that the
> layout'm riding, because it is very difficult and full of details - if
> you have to redo then will take a lot of work. :(
> 
> My intention would be easy to assemble a page to show some features of
> Harbor and give prominence to its features, especially where visitors
> could view the code and how would the screen.
> 
> We have also upgraded the sentence at the top of the site and the
> links to download versions of the homepage.
> 
> I await comments, criticisms and suggestions, the URL is:
> http://harbour-project.org/preview2/samples.html
> 

-- 
View this message in context:
http://www.nabble.com/Harbour-Web-site---Preview--2-%28Update%29-tp20186
718p20201177.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Tue Oct 28 11:54:35 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Oct 28 11:55:20 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <531d7a750810280505h319053e5n265006560323320c@mail.gmail.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com><D634201E-45F8-48F4-A096-35C1E894EC4B@syenar.hu>
	<531d7a750810280505h319053e5n265006560323320c@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F0F9@SRV02.deltain.net>

What about a RECLUTATION PAGE

PARTECIPATE TO NEXT RELEASE OF HARBOUR PROJECT!
All kind of ability are necessary to joint project!
Write you also the History of one of most RELIABLE , MULTIPLATFORM
project of language compiler
ECC:ECC

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Vailton Renato
Sent: Tuesday, October 28, 2008 1:05 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Harbour Web site - Preview #2 (Update)

I agree that putting the examples in a folder to share, would be
great! I already working with the material that we have today ... But
in this case, we need a PHP script (no CGI, just a PHP) to fit the
page dynamically and so do not depend on anyone to adjust this.

I also programmed in PHP and if agreed, could mount an example showing
how to is more simple and easy to build the samples page from TXT or
PRG files without MySQL, PostgreSQL, etc.

I believe this would be much more practical, since we could only put
the source of example in a specific folder, along with a screenshot
and the PHP script could mount the whole page alone.

It would be an idea, but I need to study the impacts not to be slow,
but need to know if you agree.
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Tue Oct 28 12:56:43 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 28 12:56:21 2008
Subject: [Harbour] 2008-10-28 17:56 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081028165643.GA27221@34-mo7-2.acn.waw.pl>

2008-10-28 17:56 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/dynlibhb.c
    ! added #define INCL_DOSMODULEMGR for OS2 builds

best regards
Przemek
From harbour.01 at syenar.hu  Tue Oct 28 11:12:24 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 28 13:21:07 2008
Subject: [Harbour] MinGW + GTWVT + unwanted console
In-Reply-To: <20081028144458.GA28019@34-mo7-2.acn.waw.pl>
References: <8D594320-2EF3-43A1-8663-F90BBC248741@syenar.hu>
	<20081028144458.GA28019@34-mo7-2.acn.waw.pl>
Message-ID: <6EE766E6-86FC-4D23-A77D-27863F19016B@syenar.hu>

Many thanks Przemek.

-mwindows did the job well.

Strange that STDERR/STDOUT don't work
on Windows systems (but this won't be the
last oddity with Windows for sure), so I'll
simply add some other means to display required
startup (help and some error) information, in
a window or something, so the whole problem
is worked around. There is nothing critical
involved. The only slightly ugly side of
it is that the *nix version of the same app
could well use these facilities.

Brgds,
Viktor

On 2008.10.28., at 15:44, Przemyslaw Czerpak wrote:

> On Tue, 28 Oct 2008, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> This happens with r9763, when compiled and built
>> with MinGW 4.1.2, and having HB_GT_WVT_DEFAULT
>> + HB_GT_WIN in my app code.
>> Now, when the app starts, it's putting some
>> app headers on the command line via OutErr(),
>> than goes CUI. This was normal behavior
>> in Clipper times. (the app also has a command
>> line help screen, other than these it doesn't
>> use the Out*() functions).
>
> Out*() functions are redirected to STDOUT/STDERR
> handles. It's a platform dependent issue if such
> handles are open and redirected to some device
> or file in each new process.
> It's a standard in most of OS-es except MS-Windows.
> In Windows GUI and CUI applications needs different
> startup code and inherits different settings from
> caller. Usually GUI application does not have open
> STDOUT/STDERR handles so releated functions does not
> work.
> In *nixes there is no difference between GUI and CUI
> programs and you do not need separated binaries for
> both modes.
> In MinGW authors tired to replicate such functionality
> so it's possible to make mixed programs. If you are using
> MSYS then it should be possible to create GUI programs
> where STDOUT/STDERR is redirected to MSYS console. The
> bad side effect is that if console is not available this
> code allocates new console and you have your own GUI window(s)
> and console window which handles STDOUT/STDERR output.
> MinGW tries to recognize type of application automatically
> by looking for main() and WinMain() functions in linked
> binaries. It can be also controlled manually by programmer
> using -mwindow and -mconsole switches.
> The default setting and switch/autodetection priority was
> changing in last years so I cannot say what is default in
> your system now. In the past some MinGW versions unconditionally
> forced console mode if linker found C main() function in linked
> function list. It's the reason why we moved mainstd.c from HVM
> library to separate mainstd library in MinGW builds to allow users
> adding them to linked library list only when he needs console
> application.
>
>> What happens with MinGW, is that a separate
>> console window opens with the header text,
>> plus the usual WVT window opens with the app itself,
>> while the console window stays on the background
>> for the whole running time.
>
> See above. If you use -mwindow GCC switch and/or remove
> mainstd from linked library list then you will create
> pure GUI program without console allocated automatically
> when parrent process does not set valid STDOUT/STDERR output.
>
>> For MSVC/BCC, the situation is a bit different,
>> here the Out*() functions simply don't do anything.
>
> See above. They can create only pure GUI or CUI programs
> without any mixed versions which are available in MinGW.
>
>> I think none of the these behaviors are very good,
>> and I'm not sure what are the platform possibilities
>> or what could I do on the app level to get around these
>> (besides removing all Out*() functions of course).
>
> If you want Out*() functions working in pure GUI programs
> then you need sth connected to STDOUT/STDERR. It usually
> should be set by calling process. Probably if you will
> use some consoles with such functionality then it will
> work though there is also problem with automatic GUI programs
> detaching but I think it should be a way to resolve it though
> it's rather question to MS-Windows programmers/users not to me.
>
>> In any case, I think MinGW and MSVC/BCC should be
>> behave (if possible) more similarly.
>
> So just use -mwindow MinGW switch for linking GUI programs
> and if your MinGW version needs it then remove mainstd lib.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Tue Oct 28 15:08:58 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 28 15:08:35 2008
Subject: [Harbour] 2008-10-28 20:08 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081028190858.GA11239@34-mo7-2.acn.waw.pl>

2008-10-28 20:08 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
    + added hb_stackReleaseTSD() function - this function can be called
      only in HVM cleanup state when all threads except the main one are
      released

  * harbour/source/rdd/dbf1.c
  * harbour/source/rdd/dbffpt/dbffpt1.c
  * harbour/source/rdd/dbfntx/dbfntx1.c
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
    * make RDDINFO settings in BDF* based RDDs thread local

  * harbour/include/hbclass.ch
    * minor modification

best regards
Przemek
From bedipritpal at hotmail.com  Tue Oct 28 16:07:33 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Oct 28 16:07:37 2008
Subject: [Harbour] 2008-10-28 12:53 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081028115412.GA14537@34-mo7-2.acn.waw.pl>
References: <20081028115412.GA14537@34-mo7-2.acn.waw.pl>
Message-ID: <20215000.post@talk.nabble.com>


Przemek


Przemyslaw Czerpak-2 wrote:
> 
> 2008-10-28 12:53 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/rtl/gtwvt/gtwvt.h
>   * harbour/source/rtl/gtwvt/gtwvt.c
>     + added support for creating console window after 1-st screen update
>       Please remember that it interacts with inkey() code which does not
>       work until windows is not created.
>       Now it should be quite easy to add support for some initializations
>       before window is created. Probably it will be necessary to change
>       INFO() method and store settings in some pWVT variables if
> pWVT->hWND
>       is NULL and then use them as parameters for new console window.
>       I'd like to leave this modification to MS-Windows developers.
> 

Thanks for the ground work. I will do the rest.

I plan to introduce:

typedef struct
{
    DWORD dwExStyle,    /* 0 */
    DWORD dwStyle,       /* WS_THICKFRAME|WS_OVERLAPPED|WS_CAPTION|
                                     
WS_SYSMENU|WS_MINIMIZEBOX|WS_MAXIMIZEBOX */
    int        x,               /* 0 */
    int        y,               /* 0 */
    int        nWidth,       /* CW_USEDEFAULT */
    int        nHeight,      /* CW_USEDEFAULT */
    PHB_GT pGTParent,  /* NULL */
    int        iCmdShow,  /* SW_NORMAL */
    BOOL    bDefault,     /* TRUE */
} HB_WVTINIT, * PHB_WVTINIT;

and make it a member of HB_GTWVT structure.
Then if appln sends HB_GTI_WINPARAMS with corresponding array
then this structure is filled with new values and old values are returned.
This is only happen if pWVT->hWnd == NULL.
bDefault is set to FALSE and few actions are taken based on this flags,
for example, centering the window.

CreateWindow() function needs to be changed to CreateWindowEx().

I also plan to have something like HB_GTI_WINSTATE which may return 
either a single value or an array of all values, i.e., x, y, width, height,
style,
current state == minimized, maximized, iconized, etc.

I know few of these values may be not useful in other GTs but for
sure GTWVT and GTWVG can exploit them in big way.

And because all is routed via Hb_GtInfo() gateway, I do not see any 
portability issue. Mostly these feature are usable when 
hb_gtReload()/hb_gtCreate() is called, so normal applications
may not even see any change.

Opinions?

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/2008-10-28-12%3A53-UTC%2B0100-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp20205973p20215000.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Tue Oct 28 16:27:05 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 28 16:27:14 2008
Subject: [Harbour] 2008-10-28 12:53 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20215000.post@talk.nabble.com>
References: <20081028115412.GA14537@34-mo7-2.acn.waw.pl>
	<20215000.post@talk.nabble.com>
Message-ID: <6AAA0AEA-832E-4881-99A0-DD3ADA8C1509@syenar.hu>

Hi Pritpal,

>> Thanks for the ground work. I will do the rest.
>
> I plan to introduce:
>
> typedef struct
> {
>    DWORD dwExStyle,    /* 0 */
>    DWORD dwStyle,       /* WS_THICKFRAME|WS_OVERLAPPED|WS_CAPTION|
>
> WS_SYSMENU|WS_MINIMIZEBOX|WS_MAXIMIZEBOX */
>    int        x,               /* 0 */
>    int        y,               /* 0 */
>    int        nWidth,       /* CW_USEDEFAULT */
>    int        nHeight,      /* CW_USEDEFAULT */
>    PHB_GT pGTParent,  /* NULL */
>    int        iCmdShow,  /* SW_NORMAL */
>    BOOL    bDefault,     /* TRUE */
> } HB_WVTINIT, * PHB_WVTINIT;
> and make it a member of HB_GTWVT structure.
> Then if appln sends HB_GTI_WINPARAMS with corresponding array
> then this structure is filled with new values and old values are  
> returned.
> This is only happen if pWVT->hWnd == NULL.
> bDefault is set to FALSE and few actions are taken based on this  
> flags,
> for example, centering the window.
>
> CreateWindow() function needs to be changed to CreateWindowEx().
>
> I also plan to have something like HB_GTI_WINSTATE which may return
> either a single value or an array of all values, i.e., x, y, width,  
> height,
> style,
> current state == minimized, maximized, iconized, etc.
>
> I know few of these values may be not useful in other GTs but for
> sure GTWVT and GTWVG can exploit them in big way.
>
> And because all is routed via Hb_GtInfo() gateway, I do not see any
> portability issue. Mostly these feature are usable when
> hb_gtReload()/hb_gtCreate() is called, so normal applications
> may not even see any change.
>
> Opinions?

But why do you need to add all these non console
related stuff to GTWVT??

You're again and again trying to add Windows
specific features to GTWVT, but such things
simply don't belong there. GTWVT is a console
emulation, and there is no need for any platform
specific whistles and bells there. Rather the main
point is that an application written for GTWVT can
be ported to GTWIN, GTXWC, GTTRM without
modification and with an equivalent feature set.

Moreover, now that the GT window isn't initially
popped up, most of these settings can be very well
made in app code, before touching the window, and
that's enough for anyone trying to use core GT
as flexible console windows.

I'd suggest to implement these in GTWVG, without
touching the core or core GTWVT. Also I think
there should be a range used by speciality
GTWVG HB_GTI_* defines, and these also should be
kept outside the core. This is the whole point
of the plugin nature of our GT system.

If there is something in GTWVG we opt to include
later in GTWVT, we can just easily take the code
and do this. But initially please do this job
in GTWVG.

Brgds,
Viktor

From philb at philb.us  Tue Oct 28 20:22:24 2008
From: philb at philb.us (Phil Barnett)
Date: Tue Oct 28 20:22:28 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <BC27D16C-9BD9-415C-8B57-301293969AB8@syenar.hu>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<20206211.post@talk.nabble.com>
	<BC27D16C-9BD9-415C-8B57-301293969AB8@syenar.hu>
Message-ID: <200810282022.24741.philb@philb.us>

On Tuesday 28 October 2008 08:28:53 am Szak?ts Viktor wrote:
> We could have some HarbourScript though, just to give
> a flash of this technology

My thoughts exactly.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From philb at philb.us  Tue Oct 28 20:25:43 2008
From: philb at philb.us (Phil Barnett)
Date: Tue Oct 28 20:25:47 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <C0890F9D-04E3-48AC-A184-6A5DC2B809FC@syenar.hu>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<9257026e0810280005i2e9458e3v7f4901a4616ef098@mail.gmail.com>
	<C0890F9D-04E3-48AC-A184-6A5DC2B809FC@syenar.hu>
Message-ID: <200810282025.43416.philb@philb.us>

On Tuesday 28 October 2008 03:50:45 am Szak?ts Viktor wrote:

> > I would suggest to start with few samples and add more only after they
> > are carefully reviewed by the group ( we could create a new dir in the
> > svn to hold the official samples and demos, Viktor?  ).
>
> Sure. We already have 'examples' which seems to be the
> preferred name choice of other projects, too. It
> currently resides inside /contrib, but we may move it to
> the root for better visibility. What structure to
> follow inside that dir is up the our decision. Maybe
> a dir named 'miniapps' would be good, or we could just
> pour those into the root, but that's usually doesn't
> look very elegant.

And, let's not forget that Clipper code samples are Harbour code samples.

The Oasis is probably the largest source of that.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From bedipritpal at hotmail.com  Tue Oct 28 21:09:25 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Oct 28 21:09:28 2008
Subject: [Harbour] 2008-10-28 18:12 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20219217.post@talk.nabble.com>


2008-10-28 18:12 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/gtwvg.c
  * harbour/contrib/gtwvg/gtwvg.h
    ! Updated to respect latest features of GTWVT.

  * harbour/contrib/gtwvg/tests/demowvg.prg
    ! Updated to honor procol the way console is visible

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-10-28-18%3A12-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20219217p20219217.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From budyanto at centrin.net.id  Tue Oct 28 23:21:16 2008
From: budyanto at centrin.net.id (Budyanto Dj.)
Date: Tue Oct 28 23:30:02 2008
Subject: [Harbour] 2008-10-28 12:53 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <6AAA0AEA-832E-4881-99A0-DD3ADA8C1509@syenar.hu>
References: <20215000.post@talk.nabble.com>
Message-ID: <4908391C.1875.13928BA5@localhost>

Hi Viktor,

On 28 Oct 2008 at 21:27, Szak?ts Viktor wrote:
> But why do you need to add all these non console
> related stuff to GTWVT??

I think Pritpal is trying to get into the scheme of "inherits from GTWVT to avoid duplicated code".

> You're again and again trying to add Windows
> specific features to GTWVT, but such things
> simply don't belong there. GTWVT is a console
> emulation, and there is no need for any platform
> specific whistles and bells there. Rather the main
> point is that an application written for GTWVT can
> be ported to GTWIN, GTXWC, GTTRM without
> modification and with an equivalent feature set.

If GTWVT is restricted to "console emulation only" then I wonder why we need to develop 
GTWVT? Why not using GTWIN instead which is a native console?

Isn't the GTINFO interface created with an idea that some feature(s) may be absent in some other 
GTs?

regards,
Budyanto

From harbour.01 at syenar.hu  Wed Oct 29 02:50:02 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 29 02:50:08 2008
Subject: [Harbour] 2008-10-28 12:53 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4908391C.1875.13928BA5@localhost>
References: <20215000.post@talk.nabble.com> <4908391C.1875.13928BA5@localhost>
Message-ID: <FF0C9094-490B-4E04-8D13-D0E19B77E61A@syenar.hu>

Hi Budyanto,

On 2008.10.29., at 4:21, Budyanto Dj. wrote:

> Hi Viktor,
>
> On 28 Oct 2008 at 21:27, Szak?ts Viktor wrote:
>> But why do you need to add all these non console
>> related stuff to GTWVT??
>
> I think Pritpal is trying to get into the scheme of "inherits from  
> GTWVT to avoid duplicated code".

IMO this way it's done the wrong way.

For one, GTWVG has - from the beginning -
lots of duplicated GTWVT code, which is
still there.

Secondly, point of inheritance is that
generic features get implemented on the
parent level, while speciality features
get implemented on the child / inherited
level.

In this case speciality features seems
to be (planned to be) implemented on the
parent level, which is IMO not ideal.

Rather, existing duplicate code in GTWVG
should be eliminated, and replaced with
GTWVG specific stuff. This may also mean
that GTWVG could become a middle GT layer,
just like CTWIN GT, but I don't know it
enough to tell this.

>> You're again and again trying to add Windows
>> specific features to GTWVT, but such things
>> simply don't belong there. GTWVT is a console
>> emulation, and there is no need for any platform
>> specific whistles and bells there. Rather the main
>> point is that an application written for GTWVT can
>> be ported to GTWIN, GTXWC, GTTRM without
>> modification and with an equivalent feature set.
>
> If GTWVT is restricted to "console emulation only" then I wonder why  
> we need to develop
> GTWVT? Why not using GTWIN instead which is a native console?

Because it has quite some limitations (like
screen size, limited fonts selection) and
a worse "feel". GTWVT feels much more "native
Windows", than GTWIN. It also allows for a
WinMain() app to be built, which could have
other advantages.

We have an extremely flexible GT system in Harbour,
so there is very few need to touch core code to
implement special ideas beyond the core goals
and scope. This is exactly done this way to let
developers easily build upon in, and it's true for
GTs just as well as RDDs, or our Harbour API.

> Isn't the GTINFO interface created with an idea that some feature(s)  
> may be absent in some other
> GTs?

It is. That's not really the question, the
question is whether to implement special
GTWVG (or Windows GUI) hb_gtInfo() features
on the GTWVG level, or in GTWVT and core.

Also lets not forget that if there are some
features which get implemented on the
higher level (in GTWVG), it may turn out
to be useful and be moved "down" to core
eventually, if all the obstacles and portability
issues are cleared, etc.

My 2 cents.

Brgds,
Viktor

From Jose.Luis at iaicom.com  Wed Oct 29 04:47:04 2008
From: Jose.Luis at iaicom.com (Jose Luis Capel)
Date: Wed Oct 29 07:17:36 2008
Subject: [Harbour] How to get statistics
Message-ID: <10C28C4554DFE54EB20321B9CB8931C2282FFF@servidor01.AGSoft.local>

Hi,

Which is the suiteable switch for get memory statistics?

What I want to get is the amount of memory used by Harbour (stack, statics, items, etc), number of 'living' items, number of unrealeased items (if it is possible to know) at execution time.

Thanks and regards,
Jos? Luis CApel

From dmacias at mail.udg.mx  Wed Oct 29 08:07:50 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Oct 29 08:07:54 2008
Subject: [Harbour] Re: Harbour under OS/2
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <49085216.6090600@mail.udg.mx>

[Maurilio]
 >I don't know, but GCC 4.3.2 from Paul is an alpha release, I'd wait 
for >a more stabilized environment.

I tested gcc346, gcc404 and previous gcc432 and all were allmost 
unusable for Harbour
Current gcc432 does things not so bad except for main error ld/emxbind
Both gcc335 and gcc432 share same warnings, now fixed, and a few more in 
gcc432 so I consider it a great advance and is time to start reporting it

 >2008-10-28 12:53 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
 >  * harbour/contrib/xhb/xhbcopyf.c
 >    ! fixed name conflict with hb_fsCopy()

 >2008-10-28 15:56 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
 >  * harbour/include/hbstack.h
 >    ! fixed fDebugRequest declaration

 >2008-10-28 17:56 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
 >  * harbour/source/vm/dynlibhb.c
 >    ! added #define INCL_DOSMODULEMGR for OS2 builds

Thanks Przemek

Now current Harbour code build with just well-known warnings
-------------------
../../gtstd.c: In function `hb_gt_std_ReadKey':
../../gtstd.c:389: warning: unused variable `TODO'
---------------------

and same fixes apply to gcc432
Except for ld/emxbind error, rest are warnings
I include them below so it can serve to fix something if it is a problem

I do not know if same warnings appear in Linux/gcc4x builds or are just 
OS/2-gcc432 related

David Macias


../../hbfsapi.c: In function 'hb_fsNameExists':
../../hbfsapi.c:323: warning: pointer targets in passing argument 1 of 
'DosQueryPathInfo' differ in signedness
../../hbfsapi.c: In function 'hb_fsFileExists':
../../hbfsapi.c:381: warning: pointer targets in passing argument 1 of 
'DosQueryPathInfo' differ in signedness
../../hbfsapi.c: In function 'hb_fsDirExists':
../../hbfsapi.c:440: warning: pointer targets in passing argument 1 of 
'DosQueryPathInfo' differ in signedness
../../hbgete.c: In function 'hb_getenv':
../../hbgete.c:88: warning: pointer targets in initialization differ in 
signedness
../../hbgete.c:93: warning: pointer targets in passing argument 1 of 
'DosScanEnv' differ in signedness
../../hbgete.c:95: warning: pointer targets in passing argument 1 of 
'hb_strdup' differ in signedness
../../hbgete.c: In function 'hb_getenv_buffer':
../../hbgete.c:127: warning: pointer targets in initialization differ in 
signedness
../../hbgete.c:132: warning: pointer targets in passing argument 1 of 
'DosScanEnv' differ in signedness
../../hbgete.c:136: warning: pointer targets in passing argument 2 of 
'hb_strncpy' differ in signedness
emxbind: invalid a.out file (startup code)
ld.exe: emxbind failed

make[3]: *** [hbpp.exe] Error 1
make[2]: *** [descend] Error 2
make[3]: *** [harbour.exe] Error 1
make[2]: *** [descend] Error 2
../../hbffind.c: In function 'hb_fsFindNextLow':
../../hbffind.c:521: warning: pointer targets in passing argument 1 of 
'DosFindFirst' differ in signedness
../../hbinet.c: In function 'HB_FUN_HB_INETACCEPT':
../../hbinet.c:1758: warning: pointer targets in passing argument 3 of 
'accept' differ in signedness
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
../../dynlibhb.c: In function 'HB_FUN_HB_LIBLOAD':
../../dynlibhb.c:104: warning: pointer targets in passing argument 3 of 
'DosLoadModule' differ in signedness
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[1]: *** [first] Error 2
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[1]: *** [first] Error 2
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
../../files.c: In function 'HB_FUN_SETFDATI':
../../files.c:273: warning: pointer targets in passing argument 1 of 
'DosQueryPathInfo' differ in signedness
../../files.c:308: warning: pointer targets in passing argument 1 of 
'DosSetPathInfo' differ in signedness
../../os2pm.c: In function 'HB_FUN_WINREGISTERCLASS':
../../os2pm.c:113: warning: pointer targets in passing argument 2 of 
'WinRegisterClass' differ in signedness
../../os2pm.c: In function 'HB_FUN_WINCREATESTDWINDOW':
../../os2pm.c:148: warning: pointer targets in passing argument 4 of 
'WinCreateStdWindow' differ in signedness
../../os2pm.c:148: warning: pointer targets in passing argument 5 of 
'WinCreateStdWindow' differ in signedness
../../os2pm.c: In function 'HB_FUN_WINSETWINDOWTEXT':
../../os2pm.c:180: warning: pointer targets in passing argument 2 of 
'WinSetWindowText' differ in signedness
../../os2pm.c: In function 'HB_FUN_WINGETTEXT':
../../os2pm.c:189: warning: pointer targets in passing argument 1 of 
'hb_retc' differ in signedness
../../os2pm.c: In function 'HB_FUN_MSGINFO':
../../os2pm.c:196: warning: pointer targets in initialization differ in 
signedness
../../os2pm.c:199: warning: pointer targets in passing argument 3 of 
'WinMessageBox' differ in signedness
make[4]: ../../../../../source/main/os2/gcc/harbour.exe: Command not found
make[3]: *** [descend] Error 1
make[2]: *** [first] Error 2
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
../../hbmzip.c: In function 'hb_zipStoreFile':
../../hbmzip.c:748: warning: pointer targets in passing argument 1 of 
'DosQueryPathInfo' differ in signedness
../../hbmzip.c: In function 'hb_unzipExtractCurrentFile':
../../hbmzip.c:1049: warning: pointer targets in passing argument 1 of 
'DosQueryPathInfo' differ in signedness
../../hbmzip.c:1067: warning: pointer targets in passing argument 1 of 
'DosSetPathInfo' differ in signedness
make[4]: ../../../../../source/main/os2/gcc/harbour.exe: Command not found
make[3]: *** [descend] Error 1
make[2]: *** [first] Error 2
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
../../hbmzip.c: In function 'hb_zipStoreFile':
../../hbmzip.c:748: warning: pointer targets in passing argument 1 of 
'DosQueryPathInfo' differ in signedness
../../hbmzip.c: In function 'hb_unzipExtractCurrentFile':
../../hbmzip.c:1049: warning: pointer targets in passing argument 1 of 
'DosQueryPathInfo' differ in signedness
../../hbmzip.c:1067: warning: pointer targets in passing argument 1 of 
'DosSetPathInfo' differ in signedness
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1
make[3]: ../../../../source/main/os2/gcc/harbour.exe: Command not found
make[2]: *** [descend] Error 1


From cvc at oohg.org  Wed Oct 29 10:19:27 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Wed Oct 29 10:19:35 2008
Subject: [Harbour] problems generating demowvg
Message-ID: <490870EF.6090302@oohg.org>

Hi all:

i'm try to test demowvg from last svn

and obtain this....

C:\harbour\harbour\contrib\gtwvg\tests>bld_b32 demowvg
demowvg.c:
Error: Unresolved external '_hb_ToOutDebug' referenced from C:\HARBOUR\HARB
IB\B32\GTWVG.LIB|gtwvg
Error: Unresolved external '_HB_FUN_HB_TOOUTDEBUG' referenced from C:\HARBO
RBOUR\CONTRIB\GTWVG\TESTS\DEMOWVG.OBJ

C:\harbour\harbour\contrib\gtwvg\tests>


regards
Ciro



-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From bedipritpal at hotmail.com  Wed Oct 29 10:59:13 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Oct 29 10:59:17 2008
Subject: [Harbour] problems generating demowvg
In-Reply-To: <490870EF.6090302@oohg.org>
References: <490870EF.6090302@oohg.org>
Message-ID: <20228909.post@talk.nabble.com>


Add hbdbgfx.lib in your link script.
OR
Comment out calls to this funtion in demowvg.prg.


Ciro Vargas Clemow wrote:
> 
> C:\harbour\harbour\contrib\gtwvg\tests>bld_b32 demowvg
> demowvg.c:
> Error: Unresolved external '_hb_ToOutDebug' referenced from
> C:\HARBOUR\HARB
> IB\B32\GTWVG.LIB|gtwvg
> Error: Unresolved external '_HB_FUN_HB_TOOUTDEBUG' referenced from
> C:\HARBO
> RBOUR\CONTRIB\GTWVG\TESTS\DEMOWVG.OBJ
> 

-- 
View this message in context: http://www.nabble.com/problems-generating-demowvg-tp20228112p20228909.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Wed Oct 29 11:12:21 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Oct 29 11:12:25 2008
Subject: [Harbour] 2008-10-29 08:10 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20229226.post@talk.nabble.com>


2008-10-29 08:10 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/tests/demowvg.prg
    ! Cleaned debug call left by mistake.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-10-29-08%3A10-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20229226p20229226.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Wed Oct 29 11:14:56 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Oct 29 11:15:00 2008
Subject: [Harbour] problems generating demowvg
In-Reply-To: <490870EF.6090302@oohg.org>
References: <490870EF.6090302@oohg.org>
Message-ID: <20229283.post@talk.nabble.com>


Ciro


Ciro Vargas Clemow wrote:
> 
> C:\harbour\harbour\contrib\gtwvg\tests>bld_b32 demowvg
> demowvg.c:
> Error: Unresolved external '_hb_ToOutDebug' referenced from
> C:\HARBOUR\HARB
> IB\B32\GTWVG.LIB|gtwvg
> Error: Unresolved external '_HB_FUN_HB_TOOUTDEBUG' referenced from
> C:\HARBO
> RBOUR\CONTRIB\GTWVG\TESTS\DEMOWVG.OBJ
> 

Download afresh and build as

bld_b32 -mt -gui demowvg -d__MW__

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/problems-generating-demowvg-tp20228112p20229283.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From cvc at oohg.org  Wed Oct 29 11:16:25 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Wed Oct 29 11:16:36 2008
Subject: [Harbour] problems generating demowvg
In-Reply-To: <20229283.post@talk.nabble.com>
References: <490870EF.6090302@oohg.org> <20229283.post@talk.nabble.com>
Message-ID: <49087E49.6020507@oohg.org>

Pritpal Bedi escribi?:
> Ciro

Thanks Pritpall

best regards
Ciro

> 
> 
> Ciro Vargas Clemow wrote:
>> C:\harbour\harbour\contrib\gtwvg\tests>bld_b32 demowvg
>> demowvg.c:
>> Error: Unresolved external '_hb_ToOutDebug' referenced from
>> C:\HARBOUR\HARB
>> IB\B32\GTWVG.LIB|gtwvg
>> Error: Unresolved external '_HB_FUN_HB_TOOUTDEBUG' referenced from
>> C:\HARBO
>> RBOUR\CONTRIB\GTWVG\TESTS\DEMOWVG.OBJ
>>
> 
> Download afresh and build as
> 
> bld_b32 -mt -gui demowvg -d__MW__
> 
> Regards
> Pritpal Bedi
> 


-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From bedipritpal at hotmail.com  Wed Oct 29 11:22:12 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Oct 29 11:22:17 2008
Subject: [Harbour] How to retrieve - <pGT> from PRG to C
Message-ID: <20229416.post@talk.nabble.com>


Hello All

How I can retrieve pGT in c code sent via prg code.

Local pGT, pGT1

pGT := hb_gtCreate( 'WVG' )

pGT1 := hb_gtSelect( pGT )

hb_gtInfo( HB_GTI_PGT,  pGT1 )


IN GT INFO METHOD
{
   PHB_GT pGT = hb_itemGetPtr( pInfo->pNewVal );
   //  I do not receive pGT pointer. What I am missing ?
}

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/How-to-retrieve---%3CpGT%3E-from-PRG-to-C-tp20229416p20229416.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Wed Oct 29 11:55:55 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 29 11:55:31 2008
Subject: [Harbour] 2008-10-28 12:53 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <FF0C9094-490B-4E04-8D13-D0E19B77E61A@syenar.hu>
References: <20215000.post@talk.nabble.com> <4908391C.1875.13928BA5@localhost>
	<FF0C9094-490B-4E04-8D13-D0E19B77E61A@syenar.hu>
Message-ID: <20081029155555.GA20303@34-mo7-2.acn.waw.pl>

On Wed, 29 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor and Pritpal,

>> I think Pritpal is trying to get into the scheme of "inherits from GTWVT 
>> to avoid duplicated code".
> IMO this way it's done the wrong way.
> For one, GTWVG has - from the beginning -
> lots of duplicated GTWVT code, which is
> still there.

And Pritpal wants to remove it and simply inherit from GTWVT.
IMHO it's good idea.
Now the proposed extensions.
We already have in GUI based GTs extensions which are not portable
to other GTs. F.e. you added font resizing to GTWVT when user changes
the window size (just like in GTALLEG). I like this feature but it's
not portable to other GTs like GTTRM/GTCRS/GTSLN which have to accept
that terminal changes its state without our control and can be resized
by user what usually changes number of rows and columns so it's compatible
with previous GTWVT behavior.
There are some differences between GTs and we cannot hide all of them.
In this case we talk about three features:
- passing style to console window so it can be tuned to look and behave
  like other OS windows
- bounding console window with other group of visible objects or desktops
- setting initial possition for new console window.
For me all of them are important just like important is font selection
or color palette setting. In some situations even much more important
because without them it may not be possible to create console window at
all in some environments, f.e. in XWindow I can display console window
on different desktops, different XServers and different computers. If it
will not be possible to control some of such local to given GT features
then it may not possible to use some GTs. F.e. I can have application
which works on remote server without any display adapter as daemon (service
in Windows technology). On request this application can create console
window using GTXWC on my local computer giving some functionality like
online configuration. If I do not introduce some new features to GTXWC
which are not available in MS-Windows/DOS world then GTXWC will not be
usable for me. I will have to make copy of GTXWC for my own use to
change only few lines just like now GTWVG is copy of GTWVT with some
extensions. It's not good situation with also introduce other problems.
Extensions will appear locally and will be strictly bound with given
GTs so code using them will not be portable ot other GTs and platforms.
We should try to reduce such situation and if possible try to define
some interface which can be implemented also in other GTs which have
similar possibilities. If sth cannot be well emulated by all GTs then
we should add option which will allow to check GT capabilities from
user code. F.e. just like now we can call hb_gtInfo(HB_GTI_ISGRPAHIC)
to check if GT can operate on pixels or only on characters.
It does not mean that we need all extensions in core code but we should
allow to write 3-rd party / contrib code which can use core GTs as base.

In this case I see why Pritpal wants to introduce such extensions
and seems that the final results will be very interesting. Anyhow
I do not like that they are such strictly hardcoded to be MS-Windows
API parameters. In such case we will have similar set of parameters
but incompatible also for XWindow and maybe MacOSX or OS2 if someone
create GUI GTs for these systems.
So I suggest to define what elements we want to set and use definitions
with some meaning defined by us which then can be used with other GTs.
So now we need:
   HB_GTI_WINDOWSTYLE

We should also define our own styles HB_GTI_WS_* instead of using
MS-Win constant values if we want to make this feature portable to
other platforms. Please also do not start with whole list of all
possible styles in some platform but use only these ones which are
necessary and will be implemented and fully supported.
As I can see we already have:
   HB_GTI_SETPOS_XY / HB_GTI_SETPOS_ROWCOL
Looks that it's enough for basic window positioning.

Pritpal, what else do you need to control window creation?
I think that predefined window classes can be covered by our
styles (and it will be good for portability) but maybe I'm wrong.

BTW we can add to GTWVT thread which will redraw all existing console
window asynchronously to Harbour code. In such case it will process
all window messages. This will have one side effect. It will not be
able to execute .prg code from message loop because it's not HVM thread.
So please remember that any code which uses notifiers will not be able
to benefit from such functionality which cannot be enabled for it.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Oct 29 12:07:07 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 29 12:06:41 2008
Subject: [Harbour] 2008-10-29 17:06 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081029160707.GA8802@34-mo7-2.acn.waw.pl>

2008-10-29 17:06 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcompdf.h
  * harbour/include/hbexprb.c
  * harbour/source/common/expropt1.c
  * harbour/source/common/expropt2.c
    ! change the expressions precedence - references to variables were
      wrongly marked as simple expressions

  * harbour/include/hbexpra.c
    ! fixed protection against wrong static initializers. Now code like:
         static s_var := { { func(), M->var } }
      or:
         static s_var := { "A" => { func() => M->var } }
      or:
         static s_var := { @M->var }
      or:
         static s_var := QSelf()
      is not accepted by compiler and error is generated at compile
      time instead of crashing at HVM startup when static variables
      are initialized

best regards
Przemek
From druzus at acn.waw.pl  Wed Oct 29 12:37:52 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 29 12:37:32 2008
Subject: [Harbour] MT extensions
Message-ID: <20081029163752.GA8772@34-mo7-2.acn.waw.pl>

Hi All,

I will want to introduce two extensions for MT mode.

1. allow to use hb_mutexCreate() as static variable initialization.
   It should help in writing MT code which have to use mutexes from
   program startup and there is a problem with initializing them.
   I added hb_threadOnce() function which resolves the problem but
   it always has some speed overhead and make the code more complicated
   then it can be. F.e. now we can write MT safe code which needs
   static local mutex in the following way:
      proc p()
         static s_mtx, s_once
         [...]
         hb_threadOnce( @s_once, {|| s_mtx := hb_mutexCreate() } )
         hb_mutexLock()
         [...]
         hb_mutexUnlock()
         [...]
      return

   If we unblock using hb_mutexCreate() as static variable initializer
   (now we can use only fully optimized functions: static s := HB_BITOR(1,2))
   then the same code can be reduced to:
      proc p()
         static s_mtx := hb_mutexCreate()
         [...]
         hb_mutexLock()
         [...]
         hb_mutexUnlock()
         [...]
      return
   It should help users in many places. Now it's possible to use as
   workaround file wide static variables and INIT procedures but it
   does not resolve the problem when some functions can be activated
   from other INIT code and makes the final code more complicated then
   necessary.
   For final user the above modification will mean that hb_mutexCreate()
   behaves like other fully optimized functions and can be used for
   static variable initialization.

2. CRITICAL FUNCTION|PROCEDURE
   I recently wrote about them message to Marek Horodyski and I said that
   they do not give any new functionality in comparison to explicit use of
   mutexes but I recently rethink the problem and I'm finding two features:
   - user cannot forgot about unlocking the mutex because it will be unlocked
     by HVM automatically
   - HVM will unlock them in all cases also when thread generate exception
     like QUIT or BREAK so it's not necessary to use BEGIN SEQUENCE / ALWAYS
     statment as protection, f.e. with above modification I can write code
     like:
         proc p()
            static s_mtx := hb_mutexCreate()
            hb_mutexLock()
            [...do sth...]
            hb_mutexUnlock()
         return
     but if [...do sth...] can generate exception, f.e. RT error then
     I should add protection code which will always unlock the mutex:
         proc p()
            static s_mtx := hb_mutexCreate()
            hb_mutexLock()
            begin sequence
               [...do sth...]
            always
               hb_mutexUnlock()
            endsequence
         return
     With CRITICAL functions/procedures to reach the same effect it will
     be enough to make:
         critical proc p()
            [...do sth...]
         return

Both modifications are similar but they are not fully replaceable so
I want to introduce both.

best regards,
Przemek
From budyanto at centrin.net.id  Wed Oct 29 12:47:34 2008
From: budyanto at centrin.net.id (Budyanto Dj.)
Date: Wed Oct 29 12:47:49 2008
Subject: [Harbour] 2008-10-28 12:53 UTC+0100
	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <FF0C9094-490B-4E04-8D13-D0E19B77E61A@syenar.hu>
References: <4908391C.1875.13928BA5@localhost>
Message-ID: <4908F616.2358.1674BE48@localhost>

Hi Viktor,

Thanks for your explanation. There're still some things to clarify, if you don't mind.

On 29 Oct 2008 at 7:50, Szak?ts Viktor wrote:
> >> You're again and again trying to add Windows
> >> specific features to GTWVT, but such things
> >> simply don't belong there. GTWVT is a console
> >> emulation, and there is no need for any platform
> >> specific whistles and bells there. Rather the main
> >> point is that an application written for GTWVT can
> >> be ported to GTWIN, GTXWC, GTTRM without
> >> modification and with an equivalent feature set.
> >
> > If GTWVT is restricted to "console emulation only" then I wonder why  
> > we need to develop
> > GTWVT? Why not using GTWIN instead which is a native console?
> 
> Because it has quite some limitations (like
> screen size, limited fonts selection) and
> a worse "feel". GTWVT feels much more "native
> Windows", than GTWIN. It also allows for a
> WinMain() app to be built, which could have
> other advantages.

I see that we are having a "grey area" here. 
Even your own explanation contradicts with one another:

> >> [...] Rather the main
> >> point is that an application written for GTWVT can
> >> be ported to GTWIN [...] without
> >> modification and with an equivalent feature set.

but then you said later:

> Because it [GTWIN] has quite some limitations (like
> screen size, limited fonts selection) [...]

Don't you agree here that an application written to use that "special feature" of GTWVT
(special screen size, font selection) cannot be ported to GTWIN "without modification with
an equivalent feature set"?

So, how to determine which enhancements are allowed (eg. special fonts/screen size), and
which others are not (eg. window style)? 

Even gfxPrimitive() is allowed in GTWVT, although there is no equivalent feature in GTWIN. Why?

regards,
budyanto

From budyanto at centrin.net.id  Wed Oct 29 13:10:11 2008
From: budyanto at centrin.net.id (Budyanto Dj.)
Date: Wed Oct 29 13:10:28 2008
Subject: [Harbour] 2008-10-28 12:53 UTC+0100
	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
Message-ID: <4908FB63.11329.168972D2@localhost>

After sending the following message I read Przemek's explanation which answers all my 
questions. Sorry for the noise...

regards,
budyanto

On 29 Oct 2008 at 23:43, "Harbour Project Main Develop wrote:
> Hi Viktor,
> 
> Thanks for your explanation. There're still some things to clarify, if you don't
> mind.
> [...]

From druzus at acn.waw.pl  Wed Oct 29 13:11:38 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 29 13:11:12 2008
Subject: [Harbour] How to retrieve - <pGT> from PRG to C
In-Reply-To: <20229416.post@talk.nabble.com>
References: <20229416.post@talk.nabble.com>
Message-ID: <20081029171138.GA11838@34-mo7-2.acn.waw.pl>

On Wed, 29 Oct 2008, Pritpal Bedi wrote:

Hi Pritpal,

> How I can retrieve pGT in c code sent via prg code.
> Local pGT, pGT1
> pGT := hb_gtCreate( 'WVG' )
> pGT1 := hb_gtSelect( pGT )
> hb_gtInfo( HB_GTI_PGT,  pGT1 )
> IN GT INFO METHOD
> {
>    PHB_GT pGT = hb_itemGetPtr( pInfo->pNewVal );
>    //  I do not receive pGT pointer. What I am missing ?
> }

hb_itemGetPtr( pInfo->pNewVal ) returns pointer to structure
which holds pGT pointer:

   PHB_GT * pGtPtr = ( PHB_GT * ) hb_itemGetPtr( pInfo->pNewVal );
   PHB_GT pGT = *pGtPtr;

Anyhow it may change in the future so I cannot promise that
this code will work. I'd prefer to add new function:
   PHB_GT hb_gt_ItemBase( PHB_ITEM pItemGT )
which can be used with hb_gt_BaseFree() in the same way as
hb_gt_Base() so your code will not be affected by possible
future modifications in internal pGT representation.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Oct 29 13:33:13 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 29 13:32:49 2008
Subject: [Harbour] 2008-10-29 18:33 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081029173313.GA12895@34-mo7-2.acn.waw.pl>

2008-10-29 18:33 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbgtcore.h
  * harbour/source/rtl/hbgtcore.c
    + added PHB_GT hb_gt_ItemBase( PHB_ITEM pItemGT )

best regards
Przemek
From bedipritpal at hotmail.com  Wed Oct 29 14:56:05 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Oct 29 14:56:08 2008
Subject: [Harbour] MT extensions
In-Reply-To: <20081029163752.GA8772@34-mo7-2.acn.waw.pl>
References: <20081029163752.GA8772@34-mo7-2.acn.waw.pl>
Message-ID: <20233603.post@talk.nabble.com>


Hello Przemek


Przemyslaw Czerpak-2 wrote:
> 
> I will want to introduce two extensions for MT mode.
> 
> 1. allow to use hb_mutexCreate() as static variable initialization.
> 
>    If we unblock using hb_mutexCreate() as static variable initializer
>    (now we can use only fully optimized functions: static s :=
> HB_BITOR(1,2))
>    then the same code can be reduced to:
>       proc p()
>          static s_mtx := hb_mutexCreate()
>          [...]
>          hb_mutexLock()
>          [...]
>          hb_mutexUnlock()
>          [...]
>       return
> 
> 2. CRITICAL FUNCTION|PROCEDURE
>    - user cannot forgot about unlocking the mutex because it will be
> unlocked
>      by HVM automatically
>    - HVM will unlock them in all cases also when thread generate exception
>      like QUIT or BREAK so it's not necessary to use BEGIN SEQUENCE /
> ALWAYS
>      statment as protection, f.e. with above modification I can write code
>      like:
>          proc p()
>             static s_mtx := hb_mutexCreate()
>             hb_mutexLock()
>             [...do sth...]
>             hb_mutexUnlock()
>          return
>      but if [...do sth...] can generate exception, f.e. RT error then
>      I should add protection code which will always unlock the mutex:
>          proc p()
>             static s_mtx := hb_mutexCreate()
>             hb_mutexLock()
>             begin sequence
>                [...do sth...]
>             always
>                hb_mutexUnlock()
>             endsequence
>          return
>      With CRITICAL functions/procedures to reach the same effect it will
>      be enough to make:
>          critical proc p()
>             [...do sth...]
>          return
> 
> Both modifications are similar but they are not fully replaceable so
> I want to introduce both.
> 

Perfect. 

CRITICAL PROC p() is the easiest way. Can it be implemented in C also? Like
:

HB_FUNC_CRITICAL( SOMEFUNC )
{
   // do sth
}

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/MT-extensions-tp20230982p20233603.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Wed Oct 29 15:40:19 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Oct 29 15:40:24 2008
Subject: [Harbour] 2008-10-29 12:46 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20234420.post@talk.nabble.com>


2008-10-29 12:46 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/gtwvg.c
    ! Cleaned debug call left by mistake.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-10-29-12%3A46-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20234420p20234420.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Wed Oct 29 15:43:07 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Oct 29 15:43:10 2008
Subject: [Harbour] 2008-10-29 18:33 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081029173313.GA12895@34-mo7-2.acn.waw.pl>
References: <20081029173313.GA12895@34-mo7-2.acn.waw.pl>
Message-ID: <20234480.post@talk.nabble.com>


Thanks Przemek


Przemyslaw Czerpak-2 wrote:
> 
> 2008-10-29 18:33 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/include/hbgtcore.h
>   * harbour/source/rtl/hbgtcore.c
>     + added PHB_GT hb_gt_ItemBase( PHB_ITEM pItemGT )
> 

Now I will be able to retieve pGT at C level.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/2008-10-29-18%3A33-UTC%2B0100-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp20232004p20234480.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Wed Oct 29 16:04:58 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 29 16:04:32 2008
Subject: [Harbour] MT extensions
In-Reply-To: <20233603.post@talk.nabble.com>
References: <20081029163752.GA8772@34-mo7-2.acn.waw.pl>
	<20233603.post@talk.nabble.com>
Message-ID: <20081029200458.GA10052@34-mo7-2.acn.waw.pl>

On Wed, 29 Oct 2008, Pritpal Bedi wrote:

Hi Pritpal,

> CRITICAL PROC p() is the easiest way.

It depends on context. There are situations where it cannot be used
as mutex replacement - you will end with mutex simulation using
critical function and conditional variable.

> Can it be implemented in C also? Like
> HB_FUNC_CRITICAL( SOMEFUNC )
> {
>    // do sth
> }

No. At least in the above way because it cannot work. The protection
has to be external to function body because classic C does not support
any mechanism which allow to bind user code as function preamble/postamble.
Additionally we have to make it working also for pure PCODE functions
loaded from .hrb files or returned directly by our compiler.
It will be possible to mark any Harbour function written in C or as .prg
code as CRITICAL for HVM. So they will have to be registered in HVM as
critical ones.

Please also note that CRITICAL function/procedure does not give
mutual exclusion because it is called CRITICAL. It's necessary
to execute low level C code which initializes mutex and then will
lock and unlock it. Hiding these operations for .prg code gives
some sense for Harbour programmers and can simplify .prg code also
increasing the speed but in C it does not give anything more then
declaring some macros which will replace real function calls what
will not change anything in final binaries and what anyone can do
for his own use at any moment :-)

best regards,
Przemek
From bedipritpal at hotmail.com  Wed Oct 29 17:41:29 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Oct 29 17:41:33 2008
Subject: [Harbour] 2008-10-28 12:53 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081029155555.GA20303@34-mo7-2.acn.waw.pl>
References: <20081028115412.GA14537@34-mo7-2.acn.waw.pl>
	<20215000.post@talk.nabble.com>
	<6AAA0AEA-832E-4881-99A0-DD3ADA8C1509@syenar.hu>
	<4908391C.1875.13928BA5@localhost>
	<FF0C9094-490B-4E04-8D13-D0E19B77E61A@syenar.hu>
	<20081029155555.GA20303@34-mo7-2.acn.waw.pl>
Message-ID: <20236458.post@talk.nabble.com>


Hello Przemek

<<<
And Pritpal wants to remove it and simply inherit from GTWVT.
IMHO it's good idea.
>>>

Exactly.

GTWVG is 100%GTWVT + Redirecting few more messages and extending the
structure a little bit.
GUI calls and elements are totally independant from core GTWVG.
So instead of updating GTWVG core whenever there is a change in GTWVT is a
pain.

There are two possibilities to resolve it:
1) Some mechanism to inherit the GT and add only methods which change the
basic behavior.
   Something like :

  HB_GTCLASS GTWVG INHERITS GTWVT
  Method WndProc( m,n,w,l )
  Method ProcessMessages( pWVT )

  and like. I do not know can this be implemented or not, just a thought.

2) All additions in GTWVG.C and GTWVG.H be inserted in GTWVT.C and GTWVT.H 
   under some define, e.g., #ifdef __GTWVG__.

Though first solution will allow GT development scaling to next level.

<<<  
Now the proposed extensions.
We already have in GUI based GTs extensions which are not portable
to other GTs. F.e. you added font resizing to GTWVT when user changes
the window size (just like in GTALLEG). I like this feature but it's
not portable to other GTs like GTTRM/GTCRS/GTSLN which have to accept
that terminal changes its state without our control and can be resized
by user what usually changes number of rows and columns so it's compatible
with previous GTWVT behavior.
There are some differences between GTs and we cannot hide all of them.
>>>

You have summed up the whole point of my proposals.
Compatibility means the code written is "compilable" with every
GT, and not "behavable similarly". You can link tests/wvtext.prg 
( targetting pure console output ) with GTWVG without problems.
GUI extensions comes into play only when called in the application, not 
in the core code.

<<<
In this case we talk about three features:
- passing style to console window so it can be tuned to look and behave
  like other OS windows
- bounding console window with other group of visible objects or desktops
- setting initial possition for new console window.
>>>

Plus a few more attributes, all generic.

<<<
For me all of them are important just like important is font selection
or color palette setting. In some situations even much more important
because without them it may not be possible to create console window at
all in some environments, f.e. in XWindow I can display console window
on different desktops, different XServers and different computers. If it
will not be possible to control some of such local to given GT features
then it may not possible to use some GTs. F.e. I can have application
which works on remote server without any display adapter as daemon (service
in Windows technology). On request this application can create console
window using GTXWC on my local computer giving some functionality like
online configuration. If I do not introduce some new features to GTXWC
which are not available in MS-Windows/DOS world then GTXWC will not be
usable for me. I will have to make copy of GTXWC for my own use to
change only few lines just like now GTWVG is copy of GTWVT with some
extensions. 
>>>

Absolutely true observation.

<<<
It's not good situation with also introduce other problems.
Extensions will appear locally and will be strictly bound with given
GTs so code using them will not be portable ot other GTs and platforms.
We should try to reduce such situation and if possible try to define
some interface which can be implemented also in other GTs which have
similar possibilities. If sth cannot be well emulated by all GTs then
we should add option which will allow to check GT capabilities from
user code. F.e. just like now we can call hb_gtInfo(HB_GTI_ISGRPAHIC)
to check if GT can operate on pixels or only on characters.
It does not mean that we need all extensions in core code but we should
allow to write 3-rd party / contrib code which can use core GTs as base.
>>>

IMO if all calls (CUI,GUI,else) are routed via GT core, it is more portable.
Let's take an example: Windows resizing is retrieved via HB_K_RESIZE event
and is routed in the core. Now appln code

   if LastKey() == HB_K_RESIZE
      // if you are in browser navigation loop
      #if defined(__GTWVG__) .or. defined(__GTWVT__)
           // Reconfigure browse to reflect to the situation
      #else
           // Do nothing
      #endif
   endif

OR 

   if LastKey() == K_F10
      #ifdef __MT__
         // Execute a new thread, execute hb_gtReload()/hb_gtCreate() and
execute the root function
      #else
         // Just call the root function
      #endif

You never have to look back which GT you are using. You have a feature or
not can be 
controlled via a single define. I used this mechanism when working with
Xbase++ and Clipper
with same sources.

<<<
In this case I see why Pritpal wants to introduce such extensions
and seems that the final results will be very interesting. Anyhow
I do not like that they are such strictly hardcoded to be MS-Windows
API parameters. In such case we will have similar set of parameters
but incompatible also for XWindow and maybe MacOSX or OS2 if someone
create GUI GTs for these systems.
So I suggest to define what elements we want to set and use definitions
with some meaning defined by us which then can be used with other GTs.
So now we need:
   HB_GTI_WINDOWSTYLE

We should also define our own styles HB_GTI_WS_* instead of using
MS-Win constant values if we want to make this feature portable to
other platforms. Please also do not start with whole list of all
possible styles in some platform but use only these ones which are
necessary and will be implemented and fully supported.
As I can see we already have:
   HB_GTI_SETPOS_XY / HB_GTI_SETPOS_ROWCOL
Looks that it's enough for basic window positioning.

Pritpal, what else do you need to control window creation?
>>>

   HB_GTI_WINDOWSTYLE
   HB_GTI_WINDOWEXSTYLE
   HB_GTI_POS_X
   HB_GTI_POS_Y
   HB_GTI_PARENT

I mean sll these attributes as I outlined before:

typedef struct 
{ 
    DWORD dwExStyle,    /* 0 */ 
    DWORD dwStyle,       /* WS_THICKFRAME|WS_OVERLAPPED|WS_CAPTION| 
                                     
WS_SYSMENU|WS_MINIMIZEBOX|WS_MAXIMIZEBOX */ 
    int        x,               /* 0 */ 
    int        y,               /* 0 */ 
    int        nWidth,       /* CW_USEDEFAULT */ 
    int        nHeight,      /* CW_USEDEFAULT */ 
    PHB_GT pGTParent,  /* NULL */ 
    int        iCmdShow,  /* SW_NORMAL */ 
    BOOL    bDefault,     /* TRUE */ 
} HB_WVTINIT, * PHB_WVTINIT; 

None of the above parameters are Windows Specific. All parameters can be
exploited
alsmost in similar way. How a GT take advantage of it depends on its
capabilities.

<<<
I think that predefined window classes can be covered by our
styles (and it will be good for portability) but maybe I'm wrong.
>>>

This is ONE most important attributes but attracts few more parameters,
especially pGTParent.
Put together GT will be able to create MODAL dialogs, CHILD dialogs, etc,
list is 
endless.

<<<
BTW we can add to GTWVT thread which will redraw all existing console
window asynchronously to Harbour code. In such case it will process
all window messages. This will have one side effect. It will not be
able to execute .prg code from message loop because it's not HVM thread.
So please remember that any code which uses notifiers will not be able
to benefit from such functionality which cannot be enabled for it.
>>>

What exactly is its behavior, I could not follow the essense. Can you
explain
how and what will be affected.

Thanks for the detailed analysis.
You came very close, even beyond, my imagination.

Budyanto, you might be having same thoughts I outlined above.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/2008-10-28-12%3A53-UTC%2B0100-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp20205973p20236458.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From abe.buch at att.net  Wed Oct 29 17:46:31 2008
From: abe.buch at att.net (Abeb)
Date: Wed Oct 29 17:46:35 2008
Subject: [Harbour] wince
Message-ID: <20236568.post@talk.nabble.com>


i compiled wcedemo.
when i try to run in on a PocketPc nothing happens. no error, no window
opens.
Please help. i very eager to unitize Harbour under PocketPC

Thanks All of You,
Abe
 
-- 
View this message in context: http://www.nabble.com/wince-tp20236568p20236568.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Wed Oct 29 18:18:36 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 29 18:18:09 2008
Subject: [Harbour] wince
In-Reply-To: <20236568.post@talk.nabble.com>
References: <20236568.post@talk.nabble.com>
Message-ID: <20081029221836.GA20510@34-mo7-2.acn.waw.pl>

On Wed, 29 Oct 2008, Abeb wrote:
> i compiled wcedemo.
> when i try to run in on a PocketPc nothing happens. no error, no window
> opens.
> Please help. i very eager to unitize Harbour under PocketPC

How did you compile Harbour for WinCE?
Used platform, C compiler and build scripts.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Oct 29 19:11:41 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 29 19:11:43 2008
Subject: [Harbour] 2008-10-30 00:10 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c93a1b$Blat.v2.6.2$b4003410$14343b98747e@127.0.0.1>

2008-10-30 00:10 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * ChangeLog
    + Clarification to previous entry.

  * source/common/hbgete.c
  * source/common/hbfsapi.c
    ! Blind fix for OS/2 compiler warnings. David, please test.

  * source/rtl/philes.c
    * Minor (0 -> '\0').

  * source/compiler/hbusage.c
    ! Fixed old typo in help text.
    ; BTW: What is missing for gettext support?
--
Brgds,
Viktor

From druzus at acn.waw.pl  Wed Oct 29 19:37:30 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 29 19:37:04 2008
Subject: [Harbour] 2008-10-28 12:53 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20236458.post@talk.nabble.com>
References: <20081028115412.GA14537@34-mo7-2.acn.waw.pl>
	<20215000.post@talk.nabble.com>
	<6AAA0AEA-832E-4881-99A0-DD3ADA8C1509@syenar.hu>
	<4908391C.1875.13928BA5@localhost>
	<FF0C9094-490B-4E04-8D13-D0E19B77E61A@syenar.hu>
	<20081029155555.GA20303@34-mo7-2.acn.waw.pl>
	<20236458.post@talk.nabble.com>
Message-ID: <20081029233730.GB20510@34-mo7-2.acn.waw.pl>

On Wed, 29 Oct 2008, Pritpal Bedi wrote:


Hi Pritpal,

> You never have to look back which GT you are using. You have a feature or
> not can be 
> controlled via a single define. I used this mechanism when working with
> Xbase++ and Clipper
> with same sources.

Conditional compilation does not resolve all problems and in some
situation it may not be enough. We should always try to reduce
and differences when possible.

>    HB_GTI_WINDOWSTYLE
>    HB_GTI_WINDOWEXSTYLE

Why do you need both?
I know CreateWindowEx() parameters but I'm interesting in
functionality you want to implement so I can try to reproduce
it in GTXWC. I'm not interesting in writing Mini WINE to emulate
MS-Windows API :-)

>    HB_GTI_POS_X
>    HB_GTI_POS_Y

What is the difference to HB_GTI_SETPOS_XY and why it cannot be used?

>    HB_GTI_PARENT

I guess you want to create nested windows and you need parent window
handle. Fine but what protection do you plan to make against destroying
parent window with subwindow active? Can you define some expected
behavior for such situation? What is real MS-window behavior in such
case? Does it destroy all subwindows automatically? What happens if
you will try to use child window handle after closing parent?
I do not know real MS-Win behavior but IMHO such functionality should
be started in parent console window which can send its own handle to
child window registering this child in its own structure so it can be
dealocated automatically when parent window is closed. Otherwise we will
create easy way to create set of dummy/wrong OS handles which may cause
different bad side effects when accessed. GPF is the very optimistic in
such case but there are also possible much worse situations. F.e. in
*nixes all devices use common handle system so you can cause DBF file
corruption if you will write to device closed without your knowledge
and closed handle number was reused by RDD inside USE command exected
later. It may happen with application tested for many month/years by
different users but user#1001 hit [X] in the wrong moment and the
hardly repeated black scenario happened and very important data were
lost.
So it's extremely important to always protect core code against such
situation even if it's very small chance for such spectacular crashes.
Here we will also need at least some basic protection.

> I mean sll these attributes as I outlined before:
> typedef struct 
> { 
>     DWORD dwExStyle,    /* 0 */ 
>     DWORD dwStyle,       /* WS_THICKFRAME|WS_OVERLAPPED|WS_CAPTION| 
>                                      
> WS_SYSMENU|WS_MINIMIZEBOX|WS_MAXIMIZEBOX */ 
>     int        x,               /* 0 */ 
>     int        y,               /* 0 */ 
>     int        nWidth,       /* CW_USEDEFAULT */ 
>     int        nHeight,      /* CW_USEDEFAULT */ 
>     PHB_GT pGTParent,  /* NULL */ 
>     int        iCmdShow,  /* SW_NORMAL */ 
>     BOOL    bDefault,     /* TRUE */ 
> } HB_WVTINIT, * PHB_WVTINIT; 
> 
> None of the above parameters are Windows Specific. All parameters can be
> exploited
> alsmost in similar way. How a GT take advantage of it depends on its
> capabilities.

The idea is not MS-Windows specific but parameters you requested are
nearly _exactly_ MS-Windows CreateWindowsEx() function parameters.
Would you like to see parameters used by XWindow? In summary they
are much better because in XWindow protocol problems with portability
and remote access and using different hardware and OS on client and
server side are already resolved so we will not have to reinvent the
wheel in few cases. So maybe I'll define them as Harbour standard and
you will try to write emulation layer for MS-Windows ;-)
It's a joke of course but should illustrate the problem when you try
to make sth strictly bound with given OS.
Please also do not forget about yet another functionality. As long as
it will be possible to recreate all application windows from scratch
using only our own meta description then it will be possible to have
GTNET in application running on the server and native GT client on user
side. When user computer crashes then it's enough to connect to the
server again and restore all windows using information from server.
In the moment when you introduce hidden bindings between GT windows
not visible for our GT layer you are loosing such functionality.
It would be very nice if you can develop GTWVG keeping it at least
on very basic level so this GT will be fully functional for remote
access.

> This is ONE most important attributes but attracts few more parameters,
> especially pGTParent.
> Put together GT will be able to create MODAL dialogs, CHILD dialogs, etc,
> list is endless.

See above. Passing OS handles directly does not resolve fully the problem,
is very danger in some cases and can block future extensions. I want to
have such functionality but we cannot add sth like that to core code as is
without defining relations between our own GT window structures and protection
code.

> <<<
> BTW we can add to GTWVT thread which will redraw all existing console
> window asynchronously to Harbour code. In such case it will process
> all window messages. This will have one side effect. It will not be
> able to execute .prg code from message loop because it's not HVM thread.
> So please remember that any code which uses notifiers will not be able
> to benefit from such functionality which cannot be enabled for it.
> >>>
> What exactly is its behavior, I could not follow the essense. Can you
> explain how and what will be affected.

Now GTWVT window is not refresh automatically but only when thread
which created call some GT functions. It has some bad side effects,
f.e. when your primary code is doing sth and the console window
is overloaded by some other screen object and needs to be refreshed
then it's not refreshed until your code will not execute some GT
function. It can be very easy resolved. Inside GTWVT we create
thread to refresh console window and collect incoming keyboard/
mouse events. This thread will be processing window messages and
our own HVM thread will never execute hb_gt_wvt_WndProc() but it
will only send notify messages from REFRESH method (BTW in very
similar way to current code). It should increase the application
performance and will also resolve some other problems like fast
HVM notification about DEBUG or CANCEL keys.
Anyhow the thread serving GTWVT window can sends only very
simple notification to HVM thread which will not force additional
synchronization code using some strictly defined memory variables.
For sure it will not be able to execute .prg code from hb_gt_wvt_WndProc()
when HVM thread is also executing .prg code. Such functionality is
possible only in MT HVM after allocating by thread on HVM stack
(hb_vmThreadInit()) so it will not work in ST mode and even in such
case the code executed by GTWVT thread will work simultaneously to
main HVM thread without stopping it so it will behave differently
then now. F.e. it should be protected against GT reentrance and
interaction with foreground thread.

best regards,
Przemek
From bedipritpal at hotmail.com  Wed Oct 29 21:51:56 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Oct 29 21:51:58 2008
Subject: [Harbour] 2008-10-28 12:53 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081029233730.GB20510@34-mo7-2.acn.waw.pl>
References: <20081028115412.GA14537@34-mo7-2.acn.waw.pl>
	<20215000.post@talk.nabble.com>
	<6AAA0AEA-832E-4881-99A0-DD3ADA8C1509@syenar.hu>
	<4908391C.1875.13928BA5@localhost>
	<FF0C9094-490B-4E04-8D13-D0E19B77E61A@syenar.hu>
	<20081029155555.GA20303@34-mo7-2.acn.waw.pl>
	<20236458.post@talk.nabble.com>
	<20081029233730.GB20510@34-mo7-2.acn.waw.pl>
Message-ID: <20239566.post@talk.nabble.com>


Przemek

<<<
Conditional compilation does not resolve all problems and in some
situation it may not be enough. We should always try to reduce
and differences when possible.
>>>

ok.

<<<
>    HB_GTI_WINDOWSTYLE
>    HB_GTI_WINDOWEXSTYLE

Why do you need both?
I know CreateWindowEx() parameters but I'm interesting in
functionality you want to implement so I can try to reproduce
it in GTXWC. I'm not interesting in writing Mini WINE to emulate
MS-Windows API :-)
>>>

Function Main()
   
   do while .t.
      nKey := Inkey(0)
      
      if nKey == K_F10
         hb_ThreadStart( {|| MyFunc() } )

      elseif nKey == K_ESC
         exit
     
      endif
   enddo

   Return  NIL

Function MyFunc()
   Local pGT, pGT1

   pGT := hb_gtCreate( 'WVT' )
   SetColor( 'N/W' )
   CLS

   USE TEST SHARED
   // BROWSER CODE
   Navigation Loop
      if nKey == K_F2
         pGT1 := hb_gtCreate( 'WVT'  )
         hb_gtInfo( HB_GTI_RESIZABLE, .F. )
         hb_gtInfo( HB_GTI_WINEXSTYLE, HB_GTSTYLE_MODAL )
         hb_gtInfo( HB_GTI_WINSTYLE, HB_GTSTYLE_NOTITLEBAR )
         hb_gtInfo( HB_GTI_SIZE, 7, 40 ) 
         hb_gtInfo( HB_GTI_SETPOS_ROWCOL, 10, 10 )
         hb_gtInfo( HB_GTI_PARENT, pGT )
         
         SetColor( 'W+/W' )
         CLS                        // I do not want it to be visible
automatically
         hb_gtInfo( HB_GTI_SHOWWINDOW ) // so this command

        Alert( 'Continue next process?', { 'Yes','No' } )
        
        hb_gtDestroy( pGT1 )
        hb_gtSelect( pGT )
     endif

What I am trying to achive is to create a modal window pGT1 on top of parent
pGT.
This can be achieved in Windows as:

      CreateWindowEx( WS_EX_DLGMODALFRAME, 
                               ...,
                               ...,
                               dwStyle with flag to off titlebar and
sizebox,
                               x,
                               y,
                               width,
                               height,
                               hWndParent,
                               ...
                               ...
                               etc )

x,y,width,height can be adjusted after window is created.
But WS_EX_DLGMODALFRAME is not possible to be assigned afterwards.
To make a window true modal and yet to retain its original windows nature
it has to be CREATED with these flags. It also needs hWndParent.

In next evolution of the GT we may need this functionality, so am I
emphasizing.

My goal is not to introduce Windows constants, we can have our own, but is
to 
have slots to achieve the required functionality.


<<<
>    HB_GTI_POS_X
>    HB_GTI_POS_Y

What is the difference to HB_GTI_SETPOS_XY and why it cannot be used?
>>>

It can be. Right now it just sets the windows coordinates but does not
retain in
structure member. We need to retain it prior to executing CreateWindowEx().

<<<
>    HB_GTI_PARENT

I guess you want to create nested windows and you need parent window
handle. Fine but what protection do you plan to make against destroying
parent window with subwindow active? Can you define some expected
behavior for such situation? What is real MS-window behavior in such
case? Does it destroy all subwindows automatically? What happens if
you will try to use child window handle after closing parent?
I do not know real MS-Win behavior but IMHO such functionality should
be started in parent console window which can send its own handle to
child window registering this child in its own structure so it can be
dealocated automatically when parent window is closed. Otherwise we will
create easy way to create set of dummy/wrong OS handles which may cause
different bad side effects when accessed. GPF is the very optimistic in
such case but there are also possible much worse situations. F.e. in
*nixes all devices use common handle system so you can cause DBF file
corruption if you will write to device closed without your knowledge
and closed handle number was reused by RDD inside USE command exected
later. It may happen with application tested for many month/years by
different users but user#1001 hit [X] in the wrong moment and the
hardly repeated black scenario happened and very important data were
lost.
So it's extremely important to always protect core code against such
situation even if it's very small chance for such spectacular crashes.
Here we will also need at least some basic protection.
>>>

I need the parent window handle just to create a modal window. A modal
window
never allows to access its parent any way, that is why it is called modal.
I do not know the window handles detail in other nixes, but in Windows it is
absolutely safe. It is just a handle to a Window returned with
CreateWindowEx()
function and has nothing to do with any other functionality.

You know better about all this stuff, so your judgement is ultimate.

<<<
 The idea is not MS-Windows specific but parameters you requested are
nearly _exactly_ MS-Windows CreateWindowsEx() function parameters.
Would you like to see parameters used by XWindow? In summary they
are much better because in XWindow protocol problems with portability
and remote access and using different hardware and OS on client and
server side are already resolved so we will not have to reinvent the
wheel in few cases. So maybe I'll define them as Harbour standard and
you will try to write emulation layer for MS-Windows ;-)
>>>

This is what I am advocating. I said before that this is a pseudo code,
actual code will be different. See above.

<<<
It's a joke of course but should illustrate the problem when you try
to make sth strictly bound with given OS.
Please also do not forget about yet another functionality. As long as
it will be possible to recreate all application windows from scratch
using only our own meta description then it will be possible to have
GTNET in application running on the server and native GT client on user
side. 
>>>

this is really exciting to me. I have my own terminal but that is 
based on screen buffer and key strokes. GTNET will be the project I will 
be most interested in.

<<<
When user computer crashes then it's enough to connect to the
server again and restore all windows using information from server.
In the moment when you introduce hidden bindings between GT windows
not visible for our GT layer you are loosing such functionality.
It would be very nice if you can develop GTWVG keeping it at least
on very basic level so this GT will be fully functional for remote
access.
>>>

For sure my goal is the reusing all my exiting code without any changes.
My existing Clipper code. So till today my effort has been directed to 
achieve this goal, and I have been fairly successful.

<<<
> This is ONE most important attributes but attracts few more parameters,
> especially pGTParent.
> Put together GT will be able to create MODAL dialogs, CHILD dialogs, etc,
> list is endless.

See above. Passing OS handles directly does not resolve fully the problem,
is very danger in some cases and can block future extensions. I want to
have such functionality but we cannot add sth like that to core code as is
without defining relations between our own GT window structures and
protection
code.
>>>

Your whole explanation about OS handles has gone out of my knowledgebase.
Please pardon me if I could not understand all you explained, poor me.

<<<
Now GTWVT window is not refresh automatically but only when thread
which created call some GT functions. 

It has some bad side effects,
f.e. when your primary code is doing sth and the console window
is overloaded by some other screen object and needs to be refreshed
then it's not refreshed until your code will not execute some GT
function. It can be very easy resolved. Inside GTWVT we create
thread to refresh console window and collect incoming keyboard/
mouse events. This thread will be processing window messages and
our own HVM thread will never execute hb_gt_wvt_WndProc() but it
will only send notify messages from REFRESH method (BTW in very
similar way to current code). It should increase the application
performance and will also resolve some other problems like fast
HVM notification about DEBUG or CANCEL keys.
Anyhow the thread serving GTWVT window can sends only very
simple notification to HVM thread which will not force additional
synchronization code using some strictly defined memory variables.
For sure it will not be able to execute .prg code from hb_gt_wvt_WndProc()
when HVM thread is also executing .prg code. Such functionality is
possible only in MT HVM after allocating by thread on HVM stack
(hb_vmThreadInit()) so it will not work in ST mode and even in such
case the code executed by GTWVT thread will work simultaneously to
main HVM thread without stopping it so it will behave differently
then now. F.e. it should be protected against GT reentrance and
interaction with foreground thread.
>>>

Implement this feature and we can see how it interacts with the 
realtime usage. For sure it is noval concept and will provide a big boost 
to the GT implementation.

I always wondor how deep knowledge you have, almost on every aspect 
of the internals... The other day we ( me and Francesco ) were trying 
to estimate your age based on your knowledge and came to the conclusion,
based on owr own knowledgebase and age, and reached to an agreement that
it must be near 155 if not more.

Regards
Pritpal Bedi

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-10-28-12%3A53-UTC%2B0100-Przemyslaw-Czerpak-%28druzus-at-priv.onet.pl%29-tp20205973p20239566.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Wed Oct 29 22:01:36 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Oct 29 22:01:39 2008
Subject: [Harbour] 2008-10-29 19:06 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20239645.post@talk.nabble.com>


2008-10-29 19:06 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/gtwvg.c
  * harbour/contrib/gtwvg/gtwvg.h
  * harbour/contrib/gtwvg/hbgtwvg.ch
    + Added the possibility to have transparency on Window. Work-in-progress
    ! Rearranged .H structure for future seggregations into 
      smaller structures
  
  * harbour/contrib/gtwvg/tests/demowvg.prg
    + Added functionality to make a window transparent.
      ; <Traditional><Browser> : Press F11 and F12 to increase/decrese
transparency.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-10-29-19%3A06-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20239645p20239645.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From budyanto at centrin.net.id  Thu Oct 30 00:22:27 2008
From: budyanto at centrin.net.id (Budyanto Dj.)
Date: Thu Oct 30 00:23:38 2008
Subject: [Harbour] 2008-10-28 12:53 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20239566.post@talk.nabble.com>
References: <20081029233730.GB20510@34-mo7-2.acn.waw.pl>
Message-ID: <490998F3.2966.18F0EE6B@localhost>

Hi Pritpal, Przemek,

> I guess you want to create nested windows and you need parent window
> handle. Fine but what protection do you plan to make against destroying
> parent window with subwindow active? Can you define some expected
> behavior for such situation? What is real MS-window behavior in such
> case? Does it destroy all subwindows automatically? What happens if
> you will try to use child window handle after closing parent?

In the area of window's parent and modality, I'd like to share the convention in gtwvw as follows.
(I hope it might be usefull in deciding the policy to the general API here.)

/*OpenWindow(row1, col1, row2, col2, ;
 *                nStyle, nParentWin) 
 *rowx and colx are relative to MAIN WINDOW (not current window!)
 *rowx and colx are used for:
 *(1) positioning window to its initial position,
 *(2) determining the size of the window 
 *(3) become the new maxrow() and maxcol() in Standard mode 
 *(4) saved into RowOfs and ColOfs in MainCoord mode
 *
 *nStyle is window style 
 *
 *nParentWin is parent window of the new one we're about to open.
 *       default is: current window (in Standard Mode)
 *                   topmost window (in MainCoord Mode)
 *       If you want the new window to not have parent,
 *       pass -1 as nParentWin.
 *
 *returns window number if successful
 *returns 0 if failed
 */

Let's forget about the coordinates for now (our discussion haven't got there yet).

Further explanation regarding nParentWin is as follows:

nParentWin = 0: the parent is the Main Window
nParentWin = n: the parent is the n-th window
nParentWin = -1: no parent (the window is of the same level as the Main Window, and it will present in 
the taskbar as the Main Window)

When a window is open with a parent, user is not allowed to switch focus to the parent. (The 
subwindow is always on top of the parent.) This is similar to the "modal" behaviour in Windows, but not 
exactly the same.

In gtwvw window must be closed in reversed order: window #n, #n-1, ..., #1
This convention was made because of the limitation of the model (bad design).
IMHO the expected behaviour of closing window is to the deny the close operation if it has a 
subwindow.

Sorry I can only describe what's seen from programmer perspective (the expected behaviour), since I 
don't have technical knowledge to the new GTAPI.

regards,
budyanto

On 29 Oct 2008 at 18:51, Pritpal Bedi wrote:
> 
> Przemek
> 
> <<<
> Conditional compilation does not resolve all problems and in some
> situation it may not be enough. We should always try to reduce
> and differences when possible.
> >>>
> 
> ok.
> 
> <<<
> >    HB_GTI_WINDOWSTYLE
> >    HB_GTI_WINDOWEXSTYLE
> 
> Why do you need both?
> I know CreateWindowEx() parameters but I'm interesting in
> functionality you want to implement so I can try to reproduce
> it in GTXWC. I'm not interesting in writing Mini WINE to emulate
> MS-Windows API :-)
> >>>
> 
> Function Main()
> 
>    do while .t.
>       nKey := Inkey(0)
> 
>       if nKey == K_F10
>          hb_ThreadStart( {|| MyFunc() } )
> 
>       elseif nKey == K_ESC
>          exit
> 
>       endif
>    enddo
> 
>    Return  NIL
> 
> Function MyFunc()
>    Local pGT, pGT1
> 
>    pGT := hb_gtCreate( 'WVT' )
>    SetColor( 'N/W' )
>    CLS
> 
>    USE TEST SHARED
>    // BROWSER CODE
>    Navigation Loop
>       if nKey == K_F2
>          pGT1 := hb_gtCreate( 'WVT'  )
>          hb_gtInfo( HB_GTI_RESIZABLE, .F. )
>          hb_gtInfo( HB_GTI_WINEXSTYLE, HB_GTSTYLE_MODAL )
>          hb_gtInfo( HB_GTI_WINSTYLE, HB_GTSTYLE_NOTITLEBAR )
>          hb_gtInfo( HB_GTI_SIZE, 7, 40 ) 
>          hb_gtInfo( HB_GTI_SETPOS_ROWCOL, 10, 10 )
>          hb_gtInfo( HB_GTI_PARENT, pGT )
> 
>          SetColor( 'W+/W' )
>          CLS                        // I do not want it to be visible
> automatically
>          hb_gtInfo( HB_GTI_SHOWWINDOW ) // so this command
> 
>         Alert( 'Continue next process?', { 'Yes','No' } )
> 
>         hb_gtDestroy( pGT1 )
>         hb_gtSelect( pGT )
>      endif
> 
> What I am trying to achive is to create a modal window pGT1 on top of parent
> pGT. This can be achieved in Windows as:
> 
>       CreateWindowEx( WS_EX_DLGMODALFRAME, 
>                                ...,
>                                ...,
>                                dwStyle with flag to off titlebar and
> sizebox,
>                                x,
>                                y,
>                                width,
>                                height,
>                                hWndParent,
>                                ...
>                                ...
>                                etc )
> 
> x,y,width,height can be adjusted after window is created.
> But WS_EX_DLGMODALFRAME is not possible to be assigned afterwards.
> To make a window true modal and yet to retain its original windows nature
> it has to be CREATED with these flags. It also needs hWndParent.
> 
> In next evolution of the GT we may need this functionality, so am I
> emphasizing.
> 
> My goal is not to introduce Windows constants, we can have our own, but is
> to 
> have slots to achieve the required functionality.
> 
> 
> <<<
> >    HB_GTI_POS_X
> >    HB_GTI_POS_Y
> 
> What is the difference to HB_GTI_SETPOS_XY and why it cannot be used?
> >>>
> 
> It can be. Right now it just sets the windows coordinates but does not
> retain in
> structure member. We need to retain it prior to executing CreateWindowEx().
> 
> <<<
> >    HB_GTI_PARENT
> 
> I guess you want to create nested windows and you need parent window
> handle. Fine but what protection do you plan to make against destroying
> parent window with subwindow active? Can you define some expected
> behavior for such situation? What is real MS-window behavior in such
> case? Does it destroy all subwindows automatically? What happens if
> you will try to use child window handle after closing parent?
> I do not know real MS-Win behavior but IMHO such functionality should
> be started in parent console window which can send its own handle to
> child window registering this child in its own structure so it can be
> dealocated automatically when parent window is closed. Otherwise we will
> create easy way to create set of dummy/wrong OS handles which may cause
> different bad side effects when accessed. GPF is the very optimistic in
> such case but there are also possible much worse situations. F.e. in
> *nixes all devices use common handle system so you can cause DBF file
> corruption if you will write to device closed without your knowledge
> and closed handle number was reused by RDD inside USE command exected
> later. It may happen with application tested for many month/years by
> different users but user#1001 hit [X] in the wrong moment and the
> hardly repeated black scenario happened and very important data were
> lost.
> So it's extremely important to always protect core code against such
> situation even if it's very small chance for such spectacular crashes.
> Here we will also need at least some basic protection.
> >>>
> 
> I need the parent window handle just to create a modal window. A modal
> window
> never allows to access its parent any way, that is why it is called modal.
> I do not know the window handles detail in other nixes, but in Windows it is
> absolutely safe. It is just a handle to a Window returned with CreateWindowEx()
> function and has nothing to do with any other functionality.
> 
> You know better about all this stuff, so your judgement is ultimate.
> 
> <<<
>  The idea is not MS-Windows specific but parameters you requested are
> nearly _exactly_ MS-Windows CreateWindowsEx() function parameters.
> Would you like to see parameters used by XWindow? In summary they
> are much better because in XWindow protocol problems with portability
> and remote access and using different hardware and OS on client and
> server side are already resolved so we will not have to reinvent the
> wheel in few cases. So maybe I'll define them as Harbour standard and
> you will try to write emulation layer for MS-Windows ;-)
> >>>
> 
> This is what I am advocating. I said before that this is a pseudo code,
> actual code will be different. See above.
> 
> <<<
> It's a joke of course but should illustrate the problem when you try
> to make sth strictly bound with given OS.
> Please also do not forget about yet another functionality. As long as
> it will be possible to recreate all application windows from scratch
> using only our own meta description then it will be possible to have
> GTNET in application running on the server and native GT client on user
> side. 
> >>>
> 
> this is really exciting to me. I have my own terminal but that is 
> based on screen buffer and key strokes. GTNET will be the project I will 
> be most interested in.
> 
> <<<
> When user computer crashes then it's enough to connect to the
> server again and restore all windows using information from server.
> In the moment when you introduce hidden bindings between GT windows
> not visible for our GT layer you are loosing such functionality.
> It would be very nice if you can develop GTWVG keeping it at least
> on very basic level so this GT will be fully functional for remote
> access.
> >>>
> 
> For sure my goal is the reusing all my exiting code without any changes.
> My existing Clipper code. So till today my effort has been directed to 
> achieve this goal, and I have been fairly successful.
> 
> <<<
> > This is ONE most important attributes but attracts few more parameters,
> > especially pGTParent.
> > Put together GT will be able to create MODAL dialogs, CHILD dialogs, etc, list
> > is endless.
> 
> See above. Passing OS handles directly does not resolve fully the problem,
> is very danger in some cases and can block future extensions. I want to
> have such functionality but we cannot add sth like that to core code as is
> without defining relations between our own GT window structures and
> protection
> code.
> >>>
> 
> Your whole explanation about OS handles has gone out of my knowledgebase.
> Please pardon me if I could not understand all you explained, poor me.
> 
> <<<
> Now GTWVT window is not refresh automatically but only when thread
> which created call some GT functions. 
> 
> It has some bad side effects,
> f.e. when your primary code is doing sth and the console window
> is overloaded by some other screen object and needs to be refreshed
> then it's not refreshed until your code will not execute some GT
> function. It can be very easy resolved. Inside GTWVT we create
> thread to refresh console window and collect incoming keyboard/
> mouse events. This thread will be processing window messages and
> our own HVM thread will never execute hb_gt_wvt_WndProc() but it
> will only send notify messages from REFRESH method (BTW in very
> similar way to current code). It should increase the application
> performance and will also resolve some other problems like fast
> HVM notification about DEBUG or CANCEL keys.
> Anyhow the thread serving GTWVT window can sends only very
> simple notification to HVM thread which will not force additional
> synchronization code using some strictly defined memory variables.
> For sure it will not be able to execute .prg code from hb_gt_wvt_WndProc()
> when HVM thread is also executing .prg code. Such functionality is
> possible only in MT HVM after allocating by thread on HVM stack
> (hb_vmThreadInit()) so it will not work in ST mode and even in such
> case the code executed by GTWVT thread will work simultaneously to
> main HVM thread without stopping it so it will behave differently
> then now. F.e. it should be protected against GT reentrance and
> interaction with foreground thread.
> >>>
> 
> Implement this feature and we can see how it interacts with the 
> realtime usage. For sure it is noval concept and will provide a big boost 
> to the GT implementation.
> 
> I always wondor how deep knowledge you have, almost on every aspect 
> of the internals... The other day we ( me and Francesco ) were trying 
> to estimate your age based on your knowledge and came to the conclusion,
> based on owr own knowledgebase and age, and reached to an agreement that
> it must be near 155 if not more.
> 
> Regards
> Pritpal Bedi

From harbour.01 at syenar.hu  Thu Oct 30 03:03:03 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 03:03:20 2008
Subject: [Harbour] MT extensions
In-Reply-To: <20081029163752.GA8772@34-mo7-2.acn.waw.pl>
References: <20081029163752.GA8772@34-mo7-2.acn.waw.pl>
Message-ID: <AF7287B9-E32B-49DE-A5F5-2C7A10B12192@syenar.hu>

Hi Przemek,

This looks good to me, but the name CRITICAL
to me doesn't really seem to imply the underlying
functionality, it also sounds a bit Windows-like,
so if possible, I'd suggest some other name.
Like MUTEX FUNC|PROC.

As for making hb_mutexCreate() a special function
exception allowed in STATIC initialization looks
a bit strange as a syntax, so maybe we could
rather consider using syntax like MUTEX STATIC s_mtx.
Which means the variable is a MUTEX per definition.
Or maybe just MUTEX s_mtx, but that may make things
more complicated to implement.

Just some thoughts.

Brgds,
Viktor

On 2008.10.29., at 17:37, Przemyslaw Czerpak wrote:

> Hi All,
>
> I will want to introduce two extensions for MT mode.
>
> 1. allow to use hb_mutexCreate() as static variable initialization.
>   It should help in writing MT code which have to use mutexes from
>   program startup and there is a problem with initializing them.
>   I added hb_threadOnce() function which resolves the problem but
>   it always has some speed overhead and make the code more complicated
>   then it can be. F.e. now we can write MT safe code which needs
>   static local mutex in the following way:
>      proc p()
>         static s_mtx, s_once
>         [...]
>         hb_threadOnce( @s_once, {|| s_mtx := hb_mutexCreate() } )
>         hb_mutexLock()
>         [...]
>         hb_mutexUnlock()
>         [...]
>      return
>
>   If we unblock using hb_mutexCreate() as static variable initializer
>   (now we can use only fully optimized functions: static s :=  
> HB_BITOR(1,2))
>   then the same code can be reduced to:
>      proc p()
>         static s_mtx := hb_mutexCreate()
>         [...]
>         hb_mutexLock()
>         [...]
>         hb_mutexUnlock()
>         [...]
>      return
>   It should help users in many places. Now it's possible to use as
>   workaround file wide static variables and INIT procedures but it
>   does not resolve the problem when some functions can be activated
>   from other INIT code and makes the final code more complicated then
>   necessary.
>   For final user the above modification will mean that  
> hb_mutexCreate()
>   behaves like other fully optimized functions and can be used for
>   static variable initialization.
>
> 2. CRITICAL FUNCTION|PROCEDURE
>   I recently wrote about them message to Marek Horodyski and I said  
> that
>   they do not give any new functionality in comparison to explicit  
> use of
>   mutexes but I recently rethink the problem and I'm finding two  
> features:
>   - user cannot forgot about unlocking the mutex because it will be  
> unlocked
>     by HVM automatically
>   - HVM will unlock them in all cases also when thread generate  
> exception
>     like QUIT or BREAK so it's not necessary to use BEGIN SEQUENCE /  
> ALWAYS
>     statment as protection, f.e. with above modification I can write  
> code
>     like:
>         proc p()
>            static s_mtx := hb_mutexCreate()
>            hb_mutexLock()
>            [...do sth...]
>            hb_mutexUnlock()
>         return
>     but if [...do sth...] can generate exception, f.e. RT error then
>     I should add protection code which will always unlock the mutex:
>         proc p()
>            static s_mtx := hb_mutexCreate()
>            hb_mutexLock()
>            begin sequence
>               [...do sth...]
>            always
>               hb_mutexUnlock()
>            endsequence
>         return
>     With CRITICAL functions/procedures to reach the same effect it  
> will
>     be enough to make:
>         critical proc p()
>            [...do sth...]
>         return
>
> Both modifications are similar but they are not fully replaceable so
> I want to introduce both.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Oct 30 03:12:36 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 03:12:43 2008
Subject: [Harbour] 2008-10-28 12:53 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081029155555.GA20303@34-mo7-2.acn.waw.pl>
References: <20215000.post@talk.nabble.com> <4908391C.1875.13928BA5@localhost>
	<FF0C9094-490B-4E04-8D13-D0E19B77E61A@syenar.hu>
	<20081029155555.GA20303@34-mo7-2.acn.waw.pl>
Message-ID: <BE52681B-98C3-472B-B53F-F39E87698719@syenar.hu>

>>>
Hi Przemek,

>>> I think Pritpal is trying to get into the scheme of "inherits from  
>>> GTWVT
>>> to avoid duplicated code".
>> IMO this way it's done the wrong way.
>> For one, GTWVG has - from the beginning -
>> lots of duplicated GTWVT code, which is
>> still there.
>
> And Pritpal wants to remove it and simply inherit from GTWVT.
> IMHO it's good idea.

No, he wants to add new stuff to GTWVT,
instead of getting rid of the _duplicated_
GTWVT code in GTWVG. Big difference IMO.

Unfortunately what I say is again an internal
change/enhancement with no visible (short-term)
advantage to programmer, or easy to advertise flash
feature, but rather only good development practice,
so it seems to get neglected, just like a few other
details in GTWVG (and HBWHAT) implementation
(see various NOTEs I make on the latter, with
most of them just silently ignored forever).

> BTW we can add to GTWVT thread which will redraw all existing console
> window asynchronously to Harbour code. In such case it will process
> all window messages. This will have one side effect. It will not be
> able to execute .prg code from message loop because it's not HVM  
> thread.
> So please remember that any code which uses notifiers will not be able
> to benefit from such functionality which cannot be enabled for it.

I don't know, maybe. For sure all the time I
see a Windows function/#define name popping up
in core Harbour, there is very loud alarm bell
ringing that something is quite wrong.

Harbour core must create a layer to hide OS
differences rather than replicating highly
OS specific features/functions and implementation
details in them, especially on the public .prg /
.c level. I often find this rule to be forgotten
in these proposals.

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Thu Oct 30 03:17:07 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Oct 30 03:17:10 2008
Subject: [Harbour] Which "standard" GUI for Harbour
Message-ID: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>

We are launching our new web site where we say "Terminal/GUI" but we
miss the ( full ) GUI part.
We can add a list of the several h*, x* and v* guis created so far for
Harbour but then we need to find answers to questions like "which is
the best?", "which one to choose?".
Clearly here the things become hard since we have both Linux and
Windows ( and few Mac ) users.

Options:

1 - remove GUI from from the headlines and say "there are several GUIs
created..."

2 - pick up one of the already existing ones and "promote it" as the
"default one"

3 - create a new GUI as we like

Clearly option 1 is the quickest, option 2 will start a lot of "mine
is better...", option3 in "insane".

About option 2:

- xhgtk ( on sourceforge ) seems to be a good candidate
it's created by developers that are also active with Harbour, it
follows a documented standard like GTK and it works under Lin, Win and
is announced to work also under OS X

- another possibility would be FiveWin
it exist for Win, Lin and OS X it is used by many [x]Harbour
developers and it will help to keep the community "close"

- GT graphic "layer" on top of GT
the web has changed everything. In the mid 90's the programs needed to
be exactly like Office while today users switch from our apps to
gmail, to bank online accounts, to "tax administration" sites so they
use many different interfaces every day. This means that a "strictly"
native interface is not "critical" as in the past.
If only we could have some graphic on top of GT we could probably save
much of our code, give a "decent" UI to our apps and keep the speed of
text for remote access.

Comments?

best regards,
Lorenzo
From harbour.01 at syenar.hu  Thu Oct 30 03:36:11 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 03:36:24 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
Message-ID: <C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>

>
Hi Lorenzo,

> We are launching our new web site where we say "Terminal/GUI" but we
> miss the ( full ) GUI part.
> We can add a list of the several h*, x* and v* guis created so far for
> Harbour but then we need to find answers to questions like "which is
> the best?", "which one to choose?".
> Clearly here the things become hard since we have both Linux and
> Windows ( and few Mac ) users.
>
> Options:
>
> 1 - remove GUI from from the headlines and say "there are several GUIs
> created..."

We should probably do this.

> 2 - pick up one of the already existing ones and "promote it" as the
> "default one"

That's not really our job, plus who will tell
which is the best? I provision a huge debate.
The debate itself BTW, would be very nice to
see, as I also cannot see the strengths/weaknesses
of various implementations in full detail,
especially when they are used in practice.

> 3 - create a new GUI as we like
>
> Clearly option 1 is the quickest, option 2 will start a lot of "mine
> is better...", option3 in "insane".

:) Yeah.

> - xhgtk ( on sourceforge ) seems to be a good candidate
> it's created by developers that are also active with Harbour, it
> follows a documented standard like GTK and it works under Lin, Win and
> is announced to work also under OS X
>
> - another possibility would be FiveWin
> it exist for Win, Lin and OS X it is used by many [x]Harbour
> developers and it will help to keep the community "close"

Unfortunately this is a payware product, while
Harbour as a free product based on lots of
ppl's lots of invested free time, so probably the
last thing we want is to promote a commercial
product on our page. I'd definitely would like
to avoid this.

I like GTWXW the best (work of Marek Paliwoda,
BTW how is he these days?). Purely based on
source code and downloadable package I've seen
(I didn't use any of these yet). Unfortunately
this is no more made available to the public.
Big loss IMO.

Many ppl seem to like HMG (Harbour Mini GUI),
but I don't know much about it.

Unless there is a clear and agreed direction on
which free product is the "best", maybe we
should just present an alphabetically sorted
list of all known products, one list for free
and one list for commercial solutions. But this
should IMO be extended for all other 3rd party
products, not just GUI libs.

> - GT graphic "layer" on top of GT
> the web has changed everything. In the mid 90's the programs needed to
> be exactly like Office while today users switch from our apps to
> gmail, to bank online accounts, to "tax administration" sites so they
> use many different interfaces every day. This means that a "strictly"
> native interface is not "critical" as in the past.
> If only we could have some graphic on top of GT we could probably save
> much of our code, give a "decent" UI to our apps and keep the speed of
> text for remote access.

I think users are still very much expecting _native_
GUI apps to behave like native apps. For me it's
still a little pain to use even a GTK app in Windows
(like GIMP).

For web apps this is indeed different though, since
there is no any standard for those yet, and the whole
thing is relatively new anyway.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 30 04:03:47 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 04:03:55 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F0F7@SRV02.deltain.net>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<20201177.post@talk.nabble.com>
	<AFB948164110ED43B5EB849E8DEEF03815F0F7@SRV02.deltain.net>
Message-ID: <957F3B8B-0E9D-4742-B2BC-954976E325B5@syenar.hu>

newsgroup??

On 2008.10.28., at 16:43, Massimo Belgrano wrote:

> If possible please include also me
>
> Massimo Belgrano
> Massimo.belgrano@gmail.com
> Fleet Admiral of Newsgroup, Lieutenant of application tester, and Half
> soldier developer.
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org
> [mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
> Sent: Tuesday, October 28, 2008 5:20 AM
> To: harbour@harbour-project.org
> Subject: Re: [Harbour] Harbour Web site - Preview #2 (Update)
>
>
> Renalto
>
> The overall design is now very pleasing.
>
> Just one note:  Color of the <Development> icon to too
> out of the color scheme. Can you add some blud color to it?
>
> Regards
> Pritpal Bedi
>
> PS: My name does not appear in the crew list. Can you include it?
>
>
> Vailton Renato wrote:
>>
>> Hi all!
>>
>> I am of opinions on the page DOCUMENTATION > SAMPLES of the new site.
>> I need to know if I'm on the right track and if all agree that the
>> layout'm riding, because it is very difficult and full of details -  
>> if
>> you have to redo then will take a lot of work. :(
>>
>> My intention would be easy to assemble a page to show some features  
>> of
>> Harbor and give prominence to its features, especially where visitors
>> could view the code and how would the screen.
>>
>> We have also upgraded the sentence at the top of the site and the
>> links to download versions of the homepage.
>>
>> I await comments, criticisms and suggestions, the URL is:
>> http://harbour-project.org/preview2/samples.html
>>
>
> -- 
> View this message in context:
> http://www.nabble.com/Harbour-Web-site---Preview--2-%28Update%29-tp20186
> 718p20201177.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Thu Oct 30 04:10:30 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Oct 30 04:11:17 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <957F3B8B-0E9D-4742-B2BC-954976E325B5@syenar.hu>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com><20201177.post@talk.nabble.com><AFB948164110ED43B5EB849E8DEEF03815F0F7@SRV02.deltain.net>
	<957F3B8B-0E9D-4742-B2BC-954976E325B5@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F107@SRV02.deltain.net>

Newsletters?
Mailing List?
I read is as newsgruop witt gmane

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Thursday, October 30, 2008 9:04 AM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Harbour Web site - Preview #2 (Update)

newsgroup??

On 2008.10.28., at 16:43, Massimo Belgrano wrote:

> If possible please include also me
>
> Massimo Belgrano
> Massimo.belgrano@gmail.com
> Fleet Admiral of Newsgroup, Lieutenant of application tester, and Half
> soldier developer.
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org
> [mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
> Sent: Tuesday, October 28, 2008 5:20 AM
> To: harbour@harbour-project.org
> Subject: Re: [Harbour] Harbour Web site - Preview #2 (Update)
>
>
> Renalto
>
> The overall design is now very pleasing.
>
> Just one note:  Color of the <Development> icon to too
> out of the color scheme. Can you add some blud color to it?
>
> Regards
> Pritpal Bedi
>
> PS: My name does not appear in the crew list. Can you include it?
>
>
> Vailton Renato wrote:
>>
>> Hi all!
>>
>> I am of opinions on the page DOCUMENTATION > SAMPLES of the new site.
>> I need to know if I'm on the right track and if all agree that the
>> layout'm riding, because it is very difficult and full of details -  
>> if
>> you have to redo then will take a lot of work. :(
>>
>> My intention would be easy to assemble a page to show some features  
>> of
>> Harbor and give prominence to its features, especially where visitors
>> could view the code and how would the screen.
>>
>> We have also upgraded the sentence at the top of the site and the
>> links to download versions of the homepage.
>>
>> I await comments, criticisms and suggestions, the URL is:
>> http://harbour-project.org/preview2/samples.html
>>
>
> -- 
> View this message in context:
> http://www.nabble.com/Harbour-Web-site---Preview--2-%28Update%29-tp20186
> 718p20201177.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Thu Oct 30 05:08:10 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 05:08:18 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F107@SRV02.deltain.net>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com><20201177.post@talk.nabble.com><AFB948164110ED43B5EB849E8DEEF03815F0F7@SRV02.deltain.net>
	<957F3B8B-0E9D-4742-B2BC-954976E325B5@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F107@SRV02.deltain.net>
Message-ID: <96D80E2B-A0C7-49C6-ACDF-259053536F92@syenar.hu>

We have a mailing-list.

[ which "happens" to be replicated in several newsgroups/web
sites, making it much complicated (or even possible) to find
anything via web search engines (Google), due to multiple matches
from these different places pointing to the _same_ original
mails. Just try. Big big shame. ]

Brgds,
Viktor

On 2008.10.30., at 9:10, Massimo Belgrano wrote:

> Newsletters?
> Mailing List?
> I read is as newsgruop witt gmane
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org 
> ] On Behalf Of Szak?ts Viktor
> Sent: Thursday, October 30, 2008 9:04 AM
> To: Harbour Project Main Developer List.
> Subject: Re: [Harbour] Harbour Web site - Preview #2 (Update)
>
> newsgroup??
>
> On 2008.10.28., at 16:43, Massimo Belgrano wrote:
>
>> If possible please include also me
>>
>> Massimo Belgrano
>> Massimo.belgrano@gmail.com
>> Fleet Admiral of Newsgroup, Lieutenant of application tester, and  
>> Half
>> soldier developer.
>>
>> -----Original Message-----
>> From: harbour-bounces@harbour-project.org
>> [mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal  
>> Bedi
>> Sent: Tuesday, October 28, 2008 5:20 AM
>> To: harbour@harbour-project.org
>> Subject: Re: [Harbour] Harbour Web site - Preview #2 (Update)
>>
>>
>> Renalto
>>
>> The overall design is now very pleasing.
>>
>> Just one note:  Color of the <Development> icon to too
>> out of the color scheme. Can you add some blud color to it?
>>
>> Regards
>> Pritpal Bedi
>>
>> PS: My name does not appear in the crew list. Can you include it?
>>
>>
>> Vailton Renato wrote:
>>>
>>> Hi all!
>>>
>>> I am of opinions on the page DOCUMENTATION > SAMPLES of the new  
>>> site.
>>> I need to know if I'm on the right track and if all agree that the
>>> layout'm riding, because it is very difficult and full of details -
>>> if
>>> you have to redo then will take a lot of work. :(
>>>
>>> My intention would be easy to assemble a page to show some features
>>> of
>>> Harbor and give prominence to its features, especially where  
>>> visitors
>>> could view the code and how would the screen.
>>>
>>> We have also upgraded the sentence at the top of the site and the
>>> links to download versions of the homepage.
>>>
>>> I await comments, criticisms and suggestions, the URL is:
>>> http://harbour-project.org/preview2/samples.html
>>>
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/Harbour-Web-site---Preview--2-%28Update%29-tp20186
>> 718p20201177.html
>> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Thu Oct 30 05:21:53 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Oct 30 05:21:56 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
	<C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>
Message-ID: <9257026e0810300221l5a32eba3y74e6408145870809@mail.gmail.com>

On Thu, Oct 30, 2008 at 8:36 AM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Unless there is a clear and agreed direction on
> which free product is the "best", maybe we
> should just present an alphabetically sorted
> list of all known products, one list for free
> and one list for commercial solutions. But this
> should IMO be extended for all other 3rd party
> products, not just GUI libs.

In this case we should choose carefully what's in the list.
Some of them are in IMHO not in line with the quality standard of Harbour.
It would be a pity that a bad experience with one of these GUIs will
"translate" to Harbour.

> I think users are still very much expecting _native_
> GUI apps to behave like native apps. For me it's
> still a little pain to use even a GTK app in Windows
> (like GIMP).

Gimp has a strange interface by itsef.
I've tried xhgtk samples under XP and I find it perfectly integrated.
Of course native would be better but xhgtk exist today, is documented
since it follows closely the GTK standards and you can use glade to
create screens.

I'm more interested in web apps so I would probably not use xhgtk
anyway but it seems to me a good example of what Harbour can do and is
the closest thing to a multiplatform GUI we have around.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Thu Oct 30 05:43:26 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 05:43:33 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <9257026e0810300221l5a32eba3y74e6408145870809@mail.gmail.com>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
	<C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>
	<9257026e0810300221l5a32eba3y74e6408145870809@mail.gmail.com>
Message-ID: <03F39ACB-9F1D-4173-913A-A6AB460DA0A6@syenar.hu>

> In this case we should choose carefully what's in the list.
> Some of them are in IMHO not in line with the quality standard of  
> Harbour.
> It would be a pity that a bad experience with one of these GUIs will
> "translate" to Harbour.

Yes, I completely agree. But since this may also
start debates, as the quality perception, definition
and needs of different developers are spread in a wide
range, the easiest is to let this job be done on
3rd party "fan" sites.

The best however, would be to somehow really "evaluate"
those products by the Harbour standards, and give a list
of products / projects which qualify.

>> I think users are still very much expecting _native_
>> GUI apps to behave like native apps. For me it's
>> still a little pain to use even a GTK app in Windows
>> (like GIMP).
>
> Gimp has a strange interface by itsef.

That's true. There are some more GTK ones which feel
strange, and inexplicably slow on Windows, like Inkscape.
It's true however that GTK seems to try hard to integrate
well, and there are lot worse competitors in this arena.
An alarming example is X11 based former OpenOffice for Mac,
or old Java GUI stuff, Firefox (to this day) on OSX.
Java realized this problem, and now they seem to align
well (except overall speed).

Maybe the most chameleon-like GUI lib is QT. For me most
of the time it's difficult to tell if it was being utilized.

Most of these are relatively okay and if not looking the
most bleeding edge, they still do the job well.

The fact is that writing/maintaining 100% native looking
multiplatform apps is so expensive that it's rarely worth
the investment. (I guess Google Chrome for Mac and Linux
will be two fully new UI rewrite on the core codebase,
but that needs a Google for support).

Anyhow, classic GUI as is, is more and more drifting away
in importance. (for the web and more intuitive UI solutions,
like the iPhone or other natural interfaces).

> I've tried xhgtk samples under XP and I find it perfectly integrated.
> Of course native would be better but xhgtk exist today, is documented
> since it follows closely the GTK standards and you can use glade to
> create screens.

I haven't seen xhgtk yet. I'll give it a go once.

> I'm more interested in web apps so I would probably not use xhgtk
> anyway but it seems to me a good example of what Harbour can do and is
> the closest thing to a multiplatform GUI we have around.

Thanks for tip and +1 for web apps.

Brgds,
Viktor

From m.lacecilia at gmail.com  Thu Oct 30 06:09:44 2008
From: m.lacecilia at gmail.com (Maurizio la Cecilia)
Date: Thu Oct 30 06:09:52 2008
Subject: R: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
Message-ID: <!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAACKhXFw8jyNDhr4mcxTcVT4BAAAAAA==@gmail.com>

Hi Lorenzo,

> We are launching our new web site where we say "Terminal/GUI" but we
> miss the ( full ) GUI part.
> We can add a list of the several h*, x* and v* guis created so far for
> Harbour but then we need to find answers to questions like "which is
> the best?", "which one to choose?".
> Clearly here the things become hard since we have both Linux and
> Windows ( and few Mac ) users.
> 
> Options:
> 
> 1 - remove GUI from from the headlines and say "there are several GUIs
> created..."
>

I think the better choice.
 
> 2 - pick up one of the already existing ones and "promote it" as the
> "default one"
> 

None of the existing GUI can be elected to a "standard".
A choice is very hard and will result to disagree the developers that
don't use the elected one.

> 3 - create a new GUI as we like
> 

An effort with an interesting target, but not so simple to make.
Is needed, as you say, a standard layer giving same interface in 
programming in all OSs and guaranting also that the identical result
will be taken in each environment.
In HwGUI, i.e., this isn't true even if a great effort was done to obtain
an high degree of compatibility between WinAPI and GTK.
Only a project giving strong headlines, including the type of
implementation and clear rules for syntax and behaviour of the code,
could interest the community of programmers currently developing GUI
Libraries, otherwise each developer will continue to talk his dialect.

The option 1, thus, is the quicker and not intrusive, but i hope that the
option 3 could have a future.

Best regards.
Maurizio

From mbelgrano at deltain.it  Thu Oct 30 06:58:33 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Oct 30 06:59:19 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
	<C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F10A@SRV02.deltain.net>

-----Original Message-----
>That's not really our job, plus who will tell
>which is the best? I provision a huge debate.
>The debate itself BTW, would be very nice to
>see, as I also cannot see the strengths/weaknesses
>of various implementations in full detail,
>especially when they are used in practice.
By userbase
MINIGUI (various distribution) without a real linux version (3 years
old)
HWGUI have oop and with an incomplete but more active gtk version
Either use win32api on win32 and gtk on linux


>I like GTWXW the best (work of Marek Paliwoda,
>BTW how is he these days?). Purely based on
>source code and downloadable package I've seen
>(I didn't use any of these yet). Unfortunately
>this is no more made available to the public.
>Big loss IMO.
Can you giv e more information regarding GTWXW (intresting see source
and screenshoot)

>Many ppl seem to like HMG (Harbour Mini GUI),
>but I don't know much about it.
No  oop, no linux 
Quiet mauture syntax similar but non compatible with fivewin

>Unless there is a clear and agreed direction on
>which free product is the "best", maybe we
>should just present an alphabetically sorted
>list of all known products, one list for free
>and one list for commercial solutions. But this
>should IMO be extended for all other 3rd party
>products, not just GUI libs.
Harbour userbase seem prefer minigui


>I think users are still very much expecting _native_
>GUI apps to behave like native apps. For me it's
>still a little pain to use even a GTK app in Windows
>(like GIMP).
>For web apps this is indeed different though, since
>there is no any standard for those yet, and the whole
>thing is relatively new anyway.

There is an open source framework for web and gui is Visual WebGui that
was designed to be the next VB6 for the web. Simple to program, simple
to deploy. With a full WinForms API and design , compatible with mono
but also silverlight
Visual WebGui multi-layer, multi-language architecture that allow
develop for desktop and web with productivity
Visual webgui have a different approach to web application development,
specially designed to simplify building highly complex applications like
Outlook Web Access (OWA). Visual WebGui makes it possible for developers
to create applications that were previously developed only by the "big
guys"
http://www.visualwebgui.com/Learn/WhatsVisualWebGui/tabid/370/Default.as
px

if harbour will create a extensibiled GT for visual webgui (GTVWG)  it
can be a very good move
for me this is a real dream 


From lorenzo.fiorini at gmail.com  Thu Oct 30 07:48:35 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Oct 30 07:48:38 2008
Subject: R: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAACKhXFw8jyNDhr4mcxTcVT4BAAAAAA==@gmail.com>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
	<!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAACKhXFw8jyNDhr4mcxTcVT4BAAAAAA==@gmail.com>
Message-ID: <9257026e0810300448y567f8be5k6fe71a0a930fa9c2@mail.gmail.com>

On Thu, Oct 30, 2008 at 11:09 AM, Maurizio la Cecilia
<m.lacecilia@gmail.com> wrote:

> None of the existing GUI can be elected to a "standard".

What I meant was:
what we'll answer when a user will ask
"Which is the Harbour's GUI lib?"

Also in Java there are Swing, SWT and many others but if you buy a
book about Java you'll find that Swing IS the Java GUI for desktop
apps.

> A choice is very hard and will result to disagree the developers that
> don't use the elected one.

For elected I don't mean that everyone has to use it.
Simply that after saying "Harbour can create Terminal and GUI apps" we
need to add how it can do it. For terminals we've GT for GUI we have
... and saying "there are a lot of them choose the one you like" is
good for skilled Harbour users but not for a new user that is
evaluating it.

> In HwGUI, i.e., this isn't true even if a great effort was done to obtain
> an high degree of compatibility between WinAPI and GTK.
> Only a project giving strong headlines, including the type of
> implementation and clear rules for syntax and behaviour of the code,
> could interest the community of programmers currently developing GUI
> Libraries, otherwise each developer will continue to talk his dialect.

This is why I think that xHGtk has more chances to survive than other
solutions.
Following closely Gtk standards they somewhat inherited the doc, the
tools and the "already proven" from it.

A complex GUI lib without a clean architecture, a tutorial and
complete doc is hard to pick up unless there is an existing code base
that require it.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Thu Oct 30 08:17:57 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 08:18:04 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F10A@SRV02.deltain.net>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
	<C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F10A@SRV02.deltain.net>
Message-ID: <B59E8059-BCB8-4AC6-96D6-4D9F2403C7C2@syenar.hu>

>> I like GTWXW the best (work of Marek Paliwoda,
>> BTW how is he these days?). Purely based on
>> source code and downloadable package I've seen
>> (I didn't use any of these yet). Unfortunately
>> this is no more made available to the public.
>> Big loss IMO.
> Can you giv e more information regarding GTWXW (intresting see source
> and screenshoot)

All information I have is from the homepage
of the project, Google for HbWxW. There are
some nice screenshots there.

Win / Linux are supported. Syntax is OOP.

>> Many ppl seem to like HMG (Harbour Mini GUI),
>> but I don't know much about it.
> No  oop, no linux
> Quiet mauture syntax similar but non compatible with fivewin

Thanks. Missing Linux / OS/X support is bothering.

FW compatibility and OOP layers are probably doable
as an addon, but these are largely unimportant to
me at least.

>> Unless there is a clear and agreed direction on
>> which free product is the "best", maybe we
>> should just present an alphabetically sorted
>> list of all known products, one list for free
>> and one list for commercial solutions. But this
>> should IMO be extended for all other 3rd party
>> products, not just GUI libs.
> Harbour userbase seem prefer minigui

So I heard too.

>> For web apps this is indeed different though, since
>> there is no any standard for those yet, and the whole
>> thing is relatively new anyway.
>
> There is an open source framework for web and gui is Visual WebGui  
> that
> was designed to be the next VB6 for the web. Simple to program, simple
> to deploy. With a full WinForms API and design , compatible with mono
> but also silverlight
> Visual WebGui multi-layer, multi-language architecture that allow
> develop for desktop and web with productivity
> Visual webgui have a different approach to web application  
> development,
> specially designed to simplify building highly complex applications  
> like
> Outlook Web Access (OWA). Visual WebGui makes it possible for  
> developers
> to create applications that were previously developed only by the "big
> guys"
> http://www.visualwebgui.com/Learn/WhatsVisualWebGui/tabid/370/Default.as
> px
>
> if harbour will create a extensibiled GT for visual webgui (GTVWG)  it
> can be a very good move
> for me this is a real dream

Well, this is a .NET based commercial project, and I think
they've completely misunderstood the concept of web development,
as they are trying to emulate the fullest Windows GUI
paradigm (with all its faults) inside a web-browser.

It would be nice to see what would happen with such
a Visual WebGUI app, when you try to open it on an iPhone,
or god forbid, on an Opera browser running on a Nokia phone.

Moreover it probably needs Silverlight on the browser-side,
which is instantly excluding anything outside Microsoft's
business territory.

SilverLight looks like ActiveX controls revived for the
.NET ("managed" !) world, also to try to beat Flash.

I better like lighter and naturally web-like apps.

Brgds,
Viktor

From M.Horodyski at pzuzycie.com.pl  Thu Oct 30 08:20:52 2008
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Oct 30 08:21:04 2008
Subject: [Harbour] RE: Harbour Digest, Vol 24, Issue 138
In-Reply-To: <NLB01FEfVma0osA91E9000092bf@gatein.pzuzycie.com.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501842797@PINK.zycie.pzu>

>Message: 2
>Date: Wed, 29 Oct 2008 17:37:52 +0100
>From: Przemyslaw Czerpak <druzus@acn.waw.pl>
>Subject: [Harbour] MT extensions
>To: "Harbour Project Main Developer List."
>	<harbour@harbour-project.org>
>Message-ID: <20081029163752.GA8772@34-mo7-2.acn.waw.pl>
>Content-Type: text/plain; charset=utf-8
>
>Hi All,

[...]

>2. CRITICAL FUNCTION|PROCEDURE
>   I recently wrote about them message to Marek Horodyski and 
>I said that
>   they do not give any new functionality in comparison to 
>explicit use of

[ ... ]

>     like:
>         proc p()
>            static s_mtx := hb_mutexCreate()
>            hb_mutexLock()
>            [...do sth...]
>            hb_mutexUnlock()
[ ... ]

>Both modifications are similar but they are not fully 
>replaceable so I want to introduce both.
>
>best regards,
>Przemek

Przemek, how can I write this :

Function appServer( appName) // for example appName is 'RAPORT_024'
Static appStorage := {} // this variable can be ohne for all thread,
like CLASS STATIC VARIABLE

Local n, x, c := Upper( appName), succes := .f., lapp // lapp is local
array with structure of appName: {appname, {...}}

If ( n := Ascan( appStorage, {|x| x[1] == c})) != 0
   Return appStorage[ n]
Else
   // begin sequence
      Semaphore( c, 1)                // or maby better create with lock
: While !LockSemphore( c) ; End
      If ( n := Ascan( appStorage, {|x| x[1] == c})) != 0
         Semaphore( c, 0)
         Return appStorage[ n]
      Else
         * [ here search and compile this app to lapp := {}]
         lapp := SearchAndCompile( c, succes)
         If succes ; AADD( appStorage, lapp) ; n := Len( appStorage)
         End
         Semaphore( c, 0)
         If n != 0 ; Return appStorage[ n]
         Else
              LogCompileErrorWithParam( c, ...)
              Return Nil
         End
      End
  // End Sequece
End
//--------------

How can I get guarante to execute this proces ( fragment of proces) from
ohne thread with unique parameter ?
This is much better than CRITICAL FUNCTION.
Can I create with lock hb_mutexCreate(), e.g. so :
hb_mutexCreate( appName) or similarly ?
My know about work with mutex is very little.
With semaphore I can lock action BEFORE control search.

Viktor, when can You create binary version with new functional ?
I don't know how read from svn.

Regards,
Marek Horodyski
From harbour.01 at syenar.hu  Thu Oct 30 08:43:13 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 08:43:20 2008
Subject: R: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <9257026e0810300448y567f8be5k6fe71a0a930fa9c2@mail.gmail.com>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
	<!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAACKhXFw8jyNDhr4mcxTcVT4BAAAAAA==@gmail.com>
	<9257026e0810300448y567f8be5k6fe71a0a930fa9c2@mail.gmail.com>
Message-ID: <7FB1C38A-D699-4FCF-8933-064256C299D2@syenar.hu>

Looking at the source / samples, xhgtk looks very nice.

Looks like GTK+ can also run on OS X. There seem to
exist some immature and parallel efforts to make this
happen, some requiring X11, some running natively.

Overall, it's promising.

I wonder if it's possible to static link all GTK+
related stuff to a Windows executable? I simply detest
.dlls.

Brgds,
Viktor

On 2008.10.30., at 12:48, Lorenzo Fiorini wrote:

> On Thu, Oct 30, 2008 at 11:09 AM, Maurizio la Cecilia
> <m.lacecilia@gmail.com> wrote:
>
>> None of the existing GUI can be elected to a "standard".
>
> What I meant was:
> what we'll answer when a user will ask
> "Which is the Harbour's GUI lib?"
>
> Also in Java there are Swing, SWT and many others but if you buy a
> book about Java you'll find that Swing IS the Java GUI for desktop
> apps.
>
>> A choice is very hard and will result to disagree the developers that
>> don't use the elected one.
>
> For elected I don't mean that everyone has to use it.
> Simply that after saying "Harbour can create Terminal and GUI apps" we
> need to add how it can do it. For terminals we've GT for GUI we have
> ... and saying "there are a lot of them choose the one you like" is
> good for skilled Harbour users but not for a new user that is
> evaluating it.
>
>> In HwGUI, i.e., this isn't true even if a great effort was done to  
>> obtain
>> an high degree of compatibility between WinAPI and GTK.
>> Only a project giving strong headlines, including the type of
>> implementation and clear rules for syntax and behaviour of the code,
>> could interest the community of programmers currently developing GUI
>> Libraries, otherwise each developer will continue to talk his  
>> dialect.
>
> This is why I think that xHGtk has more chances to survive than other
> solutions.
> Following closely Gtk standards they somewhat inherited the doc, the
> tools and the "already proven" from it.
>
> A complex GUI lib without a clean architecture, a tutorial and
> complete doc is hard to pick up unless there is an existing code base
> that require it.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Oct 30 08:45:18 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 08:45:27 2008
Subject: [Harbour] RE: Harbour Digest, Vol 24, Issue 138
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501842797@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501842797@PINK.zycie.pzu>
Message-ID: <3F9854DA-3603-4B92-8500-E0DA7DB1A9F0@syenar.hu>

>
Hi Marek,

> Viktor, when can You create binary version with new functional ?
> I don't know how read from svn.

I can create a binary build for current trunk.
Which C compiler do you use?

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 30 08:49:35 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 08:49:53 2008
Subject: [Harbour] RE: Harbour Digest, Vol 24, Issue 138
In-Reply-To: <3F9854DA-3603-4B92-8500-E0DA7DB1A9F0@syenar.hu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501842797@PINK.zycie.pzu>
	<3F9854DA-3603-4B92-8500-E0DA7DB1A9F0@syenar.hu>
Message-ID: <357DF164-94D4-4810-9524-D61C860CC877@syenar.hu>

BTW, what's not working for you with SVN download?

As another option, you may get the daily source
from our homepage, it's now working fine:

http://harbour-project.org/harbour-nightly.zip

Brgds,
Viktor

On 2008.10.30., at 13:45, Szak?ts Viktor wrote:

>>
> Hi Marek,
>
>> Viktor, when can You create binary version with new functional ?
>> I don't know how read from svn.
>
> I can create a binary build for current trunk.
> Which C compiler do you use?
>
> Brgds,
> Viktor
>

From dmacias at mail.udg.mx  Thu Oct 30 09:06:31 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Oct 30 09:06:39 2008
Subject: [Harbour] Re: Harbour under OS/2
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <4909B157.8090407@mail.udg.mx>

 >2008-10-30 00:10 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
 >  * source/common/hbgete.c
 >  * source/common/hbfsapi.c
 >    ! Blind fix for OS/2 compiler warnings. David, please test.

Thanks Viktor

That warnings are fixed, rest of warnings remain

Now we have a new error in two places:

---------------------
../../harbour.c:56:22: error: hbverbld.h: No such file or directory
../../harbour.c: In function 'hb_verSvnID':
../../harbour.c:568: error: 'HB_VER_SVNID' undeclared (first use in this 
function)
../../harbour.c:568: error: (Each undeclared identifier is reported only 
once
../../harbour.c:568: error: for each function it appears in.)
../../harbour.c: In function 'hb_verSvnChangeLogID':
../../harbour.c:574: error: 'HB_VER_CHLID' undeclared (first use in this 
function)
../../harbour.c: In function 'hb_verSvnLastEntry':
../../harbour.c:580: error: 'HB_VER_LENTRY' undeclared (first use in 
this function)
make[3]: *** [harbour.o] Error 1
make[2]: *** [descend] Error 2

---------------------

../../cmdarg.c:61:22: error: hbverbld.h: No such file or directory
../../cmdarg.c: In function 'hb_verSvnID':
../../cmdarg.c:471: error: 'HB_VER_SVNID' undeclared (first use in this 
function)
../../cmdarg.c:471: error: (Each undeclared identifier is reported only once
../../cmdarg.c:471: error: for each function it appears in.)
../../cmdarg.c: In function 'hb_verSvnChangeLogID':
../../cmdarg.c:477: error: 'HB_VER_CHLID' undeclared (first use in this 
function)
../../cmdarg.c: In function 'hb_verSvnLastEntry':
../../cmdarg.c:483: error: 'HB_VER_LENTRY' undeclared (first use in this 
function)
make[3]: *** [cmdarg.o] Error 1
make[2]: *** [descend] Error 2

---------------------

David Macias



From harbour.01 at syenar.hu  Thu Oct 30 09:28:27 2008
From: harbour.01 at syenar.hu (=?WINDOWS-1252?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 09:28:33 2008
Subject: [Harbour] Re: Harbour under OS/2
In-Reply-To: <4909B157.8090407@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<4909B157.8090407@mail.udg.mx>
Message-ID: <46C06C46-4EF7-49E7-8B8D-4A9633513A98@syenar.hu>

> Thanks Viktor
>
> That warnings are fixed, rest of warnings remain

Okay I just saw the rest. Since the fix is very
easy in I guess in almost all of these places
(I've added '( PSZ )' casts to certain OS/2 API
calls, where signedness was not matching), I'd
kindly ask you to finish the remaining places.

Also, I'm afraid I could have created problems for
other versions / brands of OS/2 C compilers, since
these seem to be new warnings. Can't really judge
this from here.

> Now we have a new error in two places:

hbverbld.h is a dynamically generated file, so
for some reason it wasn't created. Pbly hbpp
isn't built or something alike, like hbcommon.lib
build problem which often causes the former.

Brgds,
Viktor

From druzus at acn.waw.pl  Thu Oct 30 09:44:23 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 30 09:43:55 2008
Subject: [Harbour] Re: Harbour under OS/2
In-Reply-To: <4909B157.8090407@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<4909B157.8090407@mail.udg.mx>
Message-ID: <20081030134423.GA21516@34-mo7-2.acn.waw.pl>

On Thu, 30 Oct 2008, David Arturo Macias Corona wrote:

Hi David,

> Now we have a new error in two places:
> ---------------------
> ../../harbour.c:56:22: error: hbverbld.h: No such file or directory

It looks like a problem with your local environment setting.
hbverbld.h is created dynamically in build process by hbpp.
Nothing has changed here in last months.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Thu Oct 30 09:49:11 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Oct 30 09:49:15 2008
Subject: R: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <7FB1C38A-D699-4FCF-8933-064256C299D2@syenar.hu>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
	<!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAACKhXFw8jyNDhr4mcxTcVT4BAAAAAA==@gmail.com>
	<9257026e0810300448y567f8be5k6fe71a0a930fa9c2@mail.gmail.com>
	<7FB1C38A-D699-4FCF-8933-064256C299D2@syenar.hu>
Message-ID: <9257026e0810300649t4e57e0d4r57669978c1a7f29e@mail.gmail.com>

On Thu, Oct 30, 2008 at 1:43 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Looking at the source / samples, xhgtk looks very nice.

I agree I also find it very clean and well coded ( at least at prg level ).
And if you try to use glade with it it seems even more interesting.
It gives the ( wrong ) idea that in few days you can rewrite everything :)

> Looks like GTK+ can also run on OS X. There seem to
> exist some immature and parallel efforts to make this
> happen, some requiring X11, some running natively.
>
> Overall, it's promising.

They seem not too far:
http://developer.imendio.com/projects/gtk-macosx/

> I wonder if it's possible to static link all GTK+
> related stuff to a Windows executable? I simply detest
> .dlls.

I don't know, however I can say that since the gtk official site
delivery an all-in-one package for Win, life has become much easier.

best regards,
Lorenzo
From mbelgrano at deltain.it  Thu Oct 30 09:54:10 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Oct 30 09:54:59 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <B59E8059-BCB8-4AC6-96D6-4D9F2403C7C2@syenar.hu>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com><C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815F10A@SRV02.deltain.net>
	<B59E8059-BCB8-4AC6-96D6-4D9F2403C7C2@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F10B@SRV02.deltain.net>

>All information I have is from the homepage
>of the project, Google for HbWxW. There are
>some nice screenshots there.
>Win / Linux are supported. Syntax is OOP.
xHarbour bindings for wxWidgets
Yes I know not recognized as GTWXW 
IS xHarbour bindings for wxWidgets
Best of multiplaform

>
http://www.visualwebgui.com/Learn/WhatsVisualWebGui/tabid/370/Default.as
> px
> if harbour will create a extensibiled GT for visual webgui (GTVWG)  it
> can be a very good move
> for me this is a real dream
>Well, this is a .NET based commercial project, and I think
>they've completely misunderstood the concept of web development,
>as they are trying to emulate the fullest Windows GUI
>paradigm (with all its faults) inside a web-browser
Sorry but afaik is not commercial, is a sourceforge project covered by 
GNU Library or Lesser General Public License (LGPL)
As you seen AS
http://sourceforge.net/projects/visualwebgui
and also .net is only one option
Gizmox have released Visual WebGui to the public in early 2008 - is
poised to create a new standard in cloud computing. Visual WebGui (VWG)
is a new 'Web like Desktop' platform

>It would be nice to see what would happen with such
>a Visual WebGUI app, when you try to open it on an iPhone,
>or god forbid, on an Opera browser running on a Nokia phone.
I have tried demo app with opera 6 from windows mobile HTC TYTN II
Not work ...not jet because imo silverligh app will go to mobile

>Moreover it probably needs Silverlight on the browser-side,
>which is instantly excluding anything outside Microsoft's
>business territory.
There is tree implementation of silverligh for linux by Microsoft, by
Novell/Silverlight  by momo/Moonlight 
http://www.microsoft.com/presspass/press/2007/sep07/09-04silverlightpr.m
spx

>SilverLight looks like ActiveX controls revived for the
>.NET ("managed" !) world, also to try to beat Flash.
Silverligh is not the only path for visual webgui

>I better like lighter and naturally web-like apps.
IMO we you made very different application
Limited webapp and unlimited webgui


From druzus at acn.waw.pl  Thu Oct 30 09:56:43 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 30 09:56:19 2008
Subject: [Harbour] Re: Harbour under OS/2
In-Reply-To: <46C06C46-4EF7-49E7-8B8D-4A9633513A98@syenar.hu>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<4909B157.8090407@mail.udg.mx>
	<46C06C46-4EF7-49E7-8B8D-4A9633513A98@syenar.hu>
Message-ID: <20081030135642.GB21516@34-mo7-2.acn.waw.pl>

On Thu, 30 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Also, I'm afraid I could have created problems for
> other versions / brands of OS/2 C compilers, since
> these seem to be new warnings. Can't really judge
> this from here.

It's OK. The older GCC version do not report warning
when unsigned char/signed char string are passed.
All this warning should be cleaned because for C++
compiler it will be error. PSZ casting is usually correct
though it will be good to check real functions declarations
in header files or in the internet.

I also suggest for OS2 users to add OpenWatcom port.
It's also C++ compiler with very long OS2 history.
It should greatly help to clean the code and maybe will
be better alternative then GCC. It should be quite easy
to do and it will nicely force cleaning all places where
HB_OS_OS2 macro is used to cover GCC only code.
It will give yet another feature. OpenWatcom can be used
as cross compiler so using one platform it will be possible
to create DOS, MS-Windows, OS2 and Linux binaries (though
Linux version needs some minor updates). If someone is
interested in creating OpenWatcom OS2 Harbour port then I can
prepare scripts for cross building and check current OpenWatcom
state and if it's still necessary send some Linux patches to
authors.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct 30 10:03:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 30 10:03:23 2008
Subject: [Harbour] 2008-10-30 15:03 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081030140351.GA26066@34-mo7-2.acn.waw.pl>

2008-10-30 15:03 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbvmpub.h
    + added HB_VM_ISFUNC(), HB_VM_FUNCUNREF() and HB_VM_EXECUTE()
      macros to operate on HB_SYMB structure

  * harbour/source/vm/hvm.c
  * harbour/source/vm/classes.c
     * use HB_VM_ISFUNC()/HB_VM_FUNCUNREF()/HB_VM_EXECUTE() macros
       for executing function inside HB_SYMB structure to avoid possible
       synchronization problems during modifications

best regards
Przemek
From lorenzo.fiorini at gmail.com  Thu Oct 30 10:18:07 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Oct 30 10:18:11 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <B59E8059-BCB8-4AC6-96D6-4D9F2403C7C2@syenar.hu>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
	<C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F10A@SRV02.deltain.net>
	<B59E8059-BCB8-4AC6-96D6-4D9F2403C7C2@syenar.hu>
Message-ID: <9257026e0810300718p5afd59feved0e46709e63bcc2@mail.gmail.com>

On Thu, Oct 30, 2008 at 1:17 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> I better like lighter and naturally web-like apps.

We've moved 60% of the apps to browser using only Harbour, rpc, xml
and Javascript.

The results are great so far ( not said by me ) but as usual it's the
last 20% that takes the 80% of the time.

We've saved all tbrowses, all reports ( they create a pdf,xls,rtf )
but we need to recode the screens and rethink the most complex part of
the app. Between the UI and the rpc/app we can exchange only files so
this require a rethink of the more complex part of the app. Now with
MT we can try to have all the users on the same exe and solve some
problems but the real problem is that it's a big jump "to take alone".

best regards,
Lorenzo
From mbelgrano at deltain.it  Thu Oct 30 10:20:32 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Oct 30 10:21:43 2008
Subject: R: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <7FB1C38A-D699-4FCF-8933-064256C299D2@syenar.hu>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com><!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAACKhXFw8jyNDhr4mcxTcVT4BAAAAAA==@gmail.com><9257026e0810300448y567f8be5k6fe71a0a930fa9c2@mail.gmail.com>
	<7FB1C38A-D699-4FCF-8933-064256C299D2@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F10C@SRV02.deltain.net>

I try:
http://library.gnome.org/devel/gtk/unstable/gtk-building.html


-----Original Message-----

>I wonder if it's possible to static link all GTK+
>related stuff to a Windows executable? I simply detest
>.dlls.

From M.Horodyski at pzuzycie.com.pl  Thu Oct 30 10:22:24 2008
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Oct 30 10:22:28 2008
Subject: [Harbour] RE: Harbour Digest, Vol 24, Issue 142
In-Reply-To: <NLB01FEtQvAauNjVuMh0000ae42@gatein.pzuzycie.com.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501842862@PINK.zycie.pzu>

>Message: 2
>Date: Thu, 30 Oct 2008 13:45:18 +0100
>From: Szak?ts Viktor <harbour.01@syenar.hu>
>Subject: Re: [Harbour] RE: Harbour Digest, Vol 24, Issue 138

[...]

>Hi Marek,
>
>> Viktor, when can You create binary version with new functional ?
>> I don't know how read from svn.
>
>I can create a binary build for current trunk.
>Which C compiler do you use?
>
>Brgds,
>Viktor

BCC32 5.5.1 or 5.8.2

Regards,
Marek Horodyski
From M.Horodyski at pzuzycie.com.pl  Thu Oct 30 10:25:07 2008
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Oct 30 10:25:13 2008
Subject: [Harbour] RE: Harbour Digest, Vol 24, Issue 142
In-Reply-To: <NLB01FEtQvAauNjVuMh0000ae42@gatein.pzuzycie.com.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501842867@PINK.zycie.pzu>

>Message: 3
>Date: Thu, 30 Oct 2008 13:49:35 +0100
>From: Szak?ts Viktor <harbour.01@syenar.hu>
>Subject: Re: [Harbour] RE: Harbour Digest, Vol 24, Issue 138
[...]
>BTW, what's not working for you with SVN download?
>
>As another option, you may get the daily source from our 
>homepage, it's now working fine:
>
>http://harbour-project.org/harbour-nightly.zip
>
>Brgds,
>Viktor

I'm try this road.

Regards,
Marek Horodyski
From harbour.01 at syenar.hu  Thu Oct 30 10:24:49 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 10:25:22 2008
Subject: [Harbour] Re: Harbour under OS/2
In-Reply-To: <20081030135642.GB21516@34-mo7-2.acn.waw.pl>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<4909B157.8090407@mail.udg.mx>
	<46C06C46-4EF7-49E7-8B8D-4A9633513A98@syenar.hu>
	<20081030135642.GB21516@34-mo7-2.acn.waw.pl>
Message-ID: <2BF74422-D9F2-42E6-B083-182F745EE33D@syenar.hu>

>
Hi Przemek, David and Maurilio,

> Hi Viktor,
>
>> Also, I'm afraid I could have created problems for
>> other versions / brands of OS/2 C compilers, since
>> these seem to be new warnings. Can't really judge
>> this from here.
>
> It's OK. The older GCC version do not report warning
> when unsigned char/signed char string are passed.
> All this warning should be cleaned because for C++
> compiler it will be error. PSZ casting is usually correct
> though it will be good to check real functions declarations
> in header files or in the internet.

I did, but was unsure whether this was caused
by GCC shipped with wrong headers or something else.

Thanks for the information, it really looks okay
this way then.

> I also suggest for OS2 users to add OpenWatcom port.
> It's also C++ compiler with very long OS2 history.
> It should greatly help to clean the code and maybe will
> be better alternative then GCC. It should be quite easy
> to do and it will nicely force cleaning all places where
> HB_OS_OS2 macro is used to cover GCC only code.
> It will give yet another feature. OpenWatcom can be used
> as cross compiler so using one platform it will be possible
> to create DOS, MS-Windows, OS2 and Linux binaries (though
> Linux version needs some minor updates). If someone is
> interested in creating OpenWatcom OS2 Harbour port then I can
> prepare scripts for cross building and check current OpenWatcom
> state and if it's still necessary send some Linux patches to
> authors.

I'd be very happy if our valued OS/2 developers (David
and Maurilio apparently) could directly address these
issues in the repository. It's really not a big deal
to do for most of the issues, and it'd be much sleeker
to do the testing in one pass, also freeing other
developers to deal with other things.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 30 10:32:15 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 10:32:24 2008
Subject: R: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <9257026e0810300649t4e57e0d4r57669978c1a7f29e@mail.gmail.com>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
	<!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAACKhXFw8jyNDhr4mcxTcVT4BAAAAAA==@gmail.com>
	<9257026e0810300448y567f8be5k6fe71a0a930fa9c2@mail.gmail.com>
	<7FB1C38A-D699-4FCF-8933-064256C299D2@syenar.hu>
	<9257026e0810300649t4e57e0d4r57669978c1a7f29e@mail.gmail.com>
Message-ID: <D544B59B-89F8-4728-AD65-60A8EA920896@syenar.hu>

>> Looking at the source / samples, xhgtk looks very nice.
>
> I agree I also find it very clean and well coded ( at least at prg  
> level ).
> And if you try to use glade with it it seems even more interesting.
> It gives the ( wrong ) idea that in few days you can rewrite  
> everything :)

:) I'll take a look at it.

BTW, it turned out that some of my clients _still_ use
Windows 95/98, so I had to step back to MSVS 2005 and
I'm blocked from using UNICODE and certain prebuilt
.dlls (anyway static linking is better, but it gives
many more things to maintain).

I envy developers who can exclusively target Linux.

[ I've also noticed that GCC 4.0.1 under OSX creates a much
optimal (smaller/faster) executable than MinGW 4.1.2
does under Windows. F.e. it looks like OSX GCC will compact
the Harbour symbol table, just like MSVC does on Windows.
MinGW doesn't do this, which makes it a suboptimal choice.

But, if a huge list of dependencies comes into the
picture, maybe MinGW turns out to be a better choice
than MSVC, despite being a bit larger faster, because
it may be better supported for external packages.

For sure I've dropped Borland completely, now the
competition is open between MinGW and MSVC 2005/2008. ]

>> Looks like GTK+ can also run on OS X. There seem to
>> exist some immature and parallel efforts to make this
>> happen, some requiring X11, some running natively.
>>
>> Overall, it's promising.
>
> They seem not too far:
> http://developer.imendio.com/projects/gtk-macosx/

Found it, I'll look into it further.

>> I wonder if it's possible to static link all GTK+
>> related stuff to a Windows executable? I simply detest
>> .dlls.
>
> I don't know, however I can say that since the gtk official site
> delivery an all-in-one package for Win, life has become much easier.

I've read the dependencies and it looks like a 1-2 weeks
job just to assemble everything under MSVC / GCC (for
static linking that is), well, in case there isn't any
showstoppers, ouch.. Smells like lot of work and/or
lots of compromises to make.

Brgds,
Viktor

From mbelgrano at deltain.it  Thu Oct 30 10:31:48 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Oct 30 10:32:36 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <9257026e0810300718p5afd59feved0e46709e63bcc2@mail.gmail.com>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com><C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815F10A@SRV02.deltain.net><B59E8059-BCB8-4AC6-96D6-4D9F2403C7C2@syenar.hu>
	<9257026e0810300718p5afd59feved0e46709e63bcc2@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F10D@SRV02.deltain.net>

Any update regarding project of re-routing all the Windows API code with
calls to an Ajax Web clien?

Any Comment about This idea?

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Randy Portnoff
Sent: Tuesday, August 07, 2007 5:32 PM
To: Harbour Project Main Developer List.; Harbour Project Main Developer
List.
Subject: Re: [Harbour] Viewer <-> XML <-> Application (was multi UI)

Hi all,

I am not sure if this helps you, but we are currently porting our
Windows app to Ajax - We intend on re-routing all the Windows API code
with calls to an Ajax Web client. We are developing an XML schema to
describe the user events and responses from the server. 
There will be one instance of the Win32 EXE running on one or more
servers (ie. server farms) for each web client instance. See the
attached diagram as an example of how we are implementing this. This
framework allows us to offer both a Windows and web client using the
same source code base.

Regards,
Randy.

At 11:18 AM 8/7/2007, Maurilio Longo wrote:
>Przemyslaw and all,
>
>is AJAX intended to do such kind of things, isn't it?
>
>GoogleEarth, for example, should be such a kind of program, where the 
>client UI talks to a server which is somewhere.
>
>If it is so, why reinvent the wheel? Google API is available, maybe it 
>could be feasible to 'attach' ourselves to those APIs and just add some

>more 'business' like logic (maybe a way to use codeblock to validate 
>input and such kind of issues).
>
>Am I completely wrong? :)
>
>Maurilio.
>
>
>Przemyslaw Czerpak ha scritto:
> >
> > On Tue, 07 Aug 2007, Antonio Linares wrote:
> > > In that case, you do need to use a designer. Do you plan to build 
> > > a designer ?
> >
> > Looks that we are talking about absolutely different things.
> >
> > > Then it may be a valid solution for you, but not for all of 
> > > Harbour users.
> >
> > It's possible but I'd rather think you do not understand what I'm 
> > talking about because you are not familiar with real client/server 
> > applications hosted on remote servers.
> >
> > > > 5. From the beginning I'm talking about running binaries on the
host
> > > >    and connecting to the same instance of program using
different
> > > >    terminals.
> > > Then it looks as we are talking about different things :)
> >
> > Exactly.
> >
> > > >    Many of the modifications in Harbour core
> > > >    code I done in last year was for increasing security and
protection
> > > >    against wrong user code which may intentionally try to break
HVM.
> > > In that case, it looks as multithreading is one of the most 
> > > important requisites, and we don't even have a first release of
it.
> >
> > Sorry Antonio but I have very serious problem to understand what you

> > are talking about. Can you say sth more why you need MT mode and 
> > what you want to do with it?
> >
> > > Is it your point to run an application on a server and then 
> > > accessing it from different OS and getting the (limited) look of 
> > > the OS ? If so,
> >
> > On most OSes it will look as any other OS native application.
> >
> > > whats the advantage of that ? To make the customer temporarly 
> > > happy ? :)
> >
> > Just simply to increase hundreds time the speed, to protect the 
> > data, to allow working from any place and any device, to work with 
> > very slow connections, to resolve some very unpleasure 
> > synchronization problems which appear when you are using RDBMS and
many others.
> >
> > > The customer soon will be requiring specific OS features support 
> > > that your application will not be able to provide.
> >
> > The specific OS features can be implemented on the client side and 
> > it's usually the simplest and the less payment part of code. I also 
> > do not see any reason to not add some support for communication with

> > external OS specific programs. The native OS viewer will be such 
> > application and it will use protocol we will define.
> >
> > best regards,
> > Przemek
> > _______________________________________________
> > Harbour mailing list
> > Harbour@harbour-project.org
> > http://lists.harbour-project.org/mailman/listinfo/harbour
>
>--
>  __________
>|  |  | |__| Maurilio Longo
>|_|_|_|____| farmaconsult s.r.l.
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Thu Oct 30 10:34:03 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 10:34:11 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <9257026e0810300718p5afd59feved0e46709e63bcc2@mail.gmail.com>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
	<C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F10A@SRV02.deltain.net>
	<B59E8059-BCB8-4AC6-96D6-4D9F2403C7C2@syenar.hu>
	<9257026e0810300718p5afd59feved0e46709e63bcc2@mail.gmail.com>
Message-ID: <238AA7D9-C696-4B77-8C16-ABA88BFBFA1F@syenar.hu>

> On Thu, Oct 30, 2008 at 1:17 PM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>> I better like lighter and naturally web-like apps.
>
> We've moved 60% of the apps to browser using only Harbour, rpc, xml
> and Javascript.
>
> The results are great so far ( not said by me ) but as usual it's the
> last 20% that takes the 80% of the time.
>
> We've saved all tbrowses, all reports ( they create a pdf,xls,rtf )
> but we need to recode the screens and rethink the most complex part of
> the app. Between the UI and the rpc/app we can exchange only files so
> this require a rethink of the more complex part of the app. Now with
> MT we can try to have all the users on the same exe and solve some
> problems but the real problem is that it's a big jump "to take alone".

Interesting read and congrats for reaching thus far.

Tell us if there is an open demo, I'm sure some of us
would be interested to see your solution in real life.

Brgds,
Viktor

From m.lacecilia at gmail.com  Thu Oct 30 10:36:08 2008
From: m.lacecilia at gmail.com (Maurizio la Cecilia)
Date: Thu Oct 30 10:36:15 2008
Subject: R: R: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <9257026e0810300448y567f8be5k6fe71a0a930fa9c2@mail.gmail.com>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com><!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAACKhXFw8jyNDhr4mcxTcVT4BAAAAAA==@gmail.com>
	<9257026e0810300448y567f8be5k6fe71a0a930fa9c2@mail.gmail.com>
Message-ID: <!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAAO2r2PRPMo9Koy23GNRCaCsBAAAAAA==@gmail.com>

> What I meant was:
> what we'll answer when a user will ask
> "Which is the Harbour's GUI lib?"
> 
> Also in Java there are Swing, SWT and many others but if you buy a
> book about Java you'll find that Swing IS the Java GUI for desktop
> apps.
> 

Just this i was meaning. None of existing GUI can be thinked as THE 
Harbour GUI. I think that THE Harbour GUI would be OOP, multiplatform, 
well documented, well supported and in an active development and, mainly, 
aligned with the performances of Harbour and with the wishes of the 
Harbour developers. I don't see any OpenSource project having this
characteristics, but only a lot of GUIs covering too few of this 
wanted features to be preferred on others. And i think that a GUI 
proposed by Harbour group as "official" could be only under GPL.

> > A choice is very hard and will result to disagree the 
> developers that
> > don't use the elected one.
> 
> For elected I don't mean that everyone has to use it.
> Simply that after saying "Harbour can create Terminal and GUI apps" we
> need to add how it can do it. For terminals we've GT for GUI we have
> ... and saying "there are a lot of them choose the one you like" is
> good for skilled Harbour users but not for a new user that is
> evaluating it.
> 

Ok. Now the function of the "standard" GUI is clearer... An idea could
be to have a demo, showing the common relevant features wanted by a GUI, 
builded with the best current libraries and self including the code needed
to reach the functionality (a simple button "Show the code" triggering 
the listing of the current section). A not skilled Harbour developer could
analyze the performances of the GUIs and the style and cost of coding, 
getting info about the library better matching his needs.

> > In HwGUI, i.e., this isn't true even if a great effort was 
> done to obtain
> > an high degree of compatibility between WinAPI and GTK.
> > Only a project giving strong headlines, including the type of
> > implementation and clear rules for syntax and behaviour of the code,
> > could interest the community of programmers currently developing GUI
> > Libraries, otherwise each developer will continue to talk 
> his dialect.
> 
> This is why I think that xHGtk has more chances to survive than other
> solutions.
> Following closely Gtk standards they somewhat inherited the doc, the
> tools and the "already proven" from it.

But I agree with Viktor: OpenSource is a must, IMHO.
 
> A complex GUI lib without a clean architecture, a tutorial and
> complete doc is hard to pick up unless there is an existing code base
> that require it.

This is because i wrote "...but i hope that the option 3 could have a
future".
Best regards.
Maurizio

From mbelgrano at deltain.it  Thu Oct 30 10:35:31 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Oct 30 10:36:25 2008
Subject: R: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <D544B59B-89F8-4728-AD65-60A8EA920896@syenar.hu>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com><!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAACKhXFw8jyNDhr4mcxTcVT4BAAAAAA==@gmail.com><9257026e0810300448y567f8be5k6fe71a0a930fa9c2@mail.gmail.com><7FB1C38A-D699-4FCF-8933-064256C299D2@syenar.hu><9257026e0810300649t4e57e0d4r57669978c1a7f29e@mail.gmail.com>
	<D544B59B-89F8-4728-AD65-60A8EA920896@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F10E@SRV02.deltain.net>

Not bcc?
Will with the next release change Harbour default c compiler to MSVC on win32 platform?


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Thursday, October 30, 2008 3:32 PM
To: Harbour Project Main Developer List.
Subject: Re: R: [Harbour] Which "standard" GUI for Harbour

>> Looking at the source / samples, xhgtk looks very nice.
>
> I agree I also find it very clean and well coded ( at least at prg  
> level ).
> And if you try to use glade with it it seems even more interesting.
> It gives the ( wrong ) idea that in few days you can rewrite  
> everything :)

:) I'll take a look at it.

BTW, it turned out that some of my clients _still_ use
Windows 95/98, so I had to step back to MSVS 2005 and
I'm blocked from using UNICODE and certain prebuilt
.dlls (anyway static linking is better, but it gives
many more things to maintain).

I envy developers who can exclusively target Linux.

[ I've also noticed that GCC 4.0.1 under OSX creates a much
optimal (smaller/faster) executable than MinGW 4.1.2
does under Windows. F.e. it looks like OSX GCC will compact
the Harbour symbol table, just like MSVC does on Windows.
MinGW doesn't do this, which makes it a suboptimal choice.

But, if a huge list of dependencies comes into the
picture, maybe MinGW turns out to be a better choice
than MSVC, despite being a bit larger faster, because
it may be better supported for external packages.

For sure I've dropped Borland completely, now the
competition is open between MinGW and MSVC 2005/2008. ]

>> Looks like GTK+ can also run on OS X. There seem to
>> exist some immature and parallel efforts to make this
>> happen, some requiring X11, some running natively.
>>
>> Overall, it's promising.
>
> They seem not too far:
> http://developer.imendio.com/projects/gtk-macosx/

Found it, I'll look into it further.

>> I wonder if it's possible to static link all GTK+
>> related stuff to a Windows executable? I simply detest
>> .dlls.
>
> I don't know, however I can say that since the gtk official site
> delivery an all-in-one package for Win, life has become much easier.

I've read the dependencies and it looks like a 1-2 weeks
job just to assemble everything under MSVC / GCC (for
static linking that is), well, in case there isn't any
showstoppers, ouch.. Smells like lot of work and/or
lots of compromises to make.

Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From sscc at mweb.co.za  Thu Oct 30 10:52:49 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Oct 30 10:53:32 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <9257026e0810300718p5afd59feved0e46709e63bcc2@mail.gmail.com>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>	<C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03815F10A@SRV02.deltain.net>	<B59E8059-BCB8-4AC6-96D6-4D9F2403C7C2@syenar.hu>
	<9257026e0810300718p5afd59feved0e46709e63bcc2@mail.gmail.com>
Message-ID: <4909CA41.8060001@mweb.co.za>

Lorenzo Fiorini wrote:

> We've moved 60% of the apps to browser using only Harbour, rpc, xml
> and Javascript.

rpc? Do you mind saying a little on how you are using this, and using 
which tools?

TIA

Alex
From harbour.01 at syenar.hu  Thu Oct 30 12:11:54 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 12:12:10 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F10B@SRV02.deltain.net>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com><C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815F10A@SRV02.deltain.net>
	<B59E8059-BCB8-4AC6-96D6-4D9F2403C7C2@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F10B@SRV02.deltain.net>
Message-ID: <8DA5BEDE-BFBC-4656-86AD-2F9FE6593F76@syenar.hu>

>> xHarbour bindings for wxWidgets
> Yes I know not recognized as GTWXW
> IS xHarbour bindings for wxWidgets
> Best of multiplaform

And wxWidgets is also based on GTK+, so GTK+ seems
like a trend as far as fat desktop goes.

>> paradigm (with all its faults) inside a web-browser
> Sorry but afaik is not commercial, is a sourceforge project covered by
> GNU Library or Lesser General Public License (LGPL)
> As you seen AS
> http://sourceforge.net/projects/visualwebgui
> and also .net is only one option
> Gizmox have released Visual WebGui to the public in early 2008 - is
> poised to create a new standard in cloud computing. Visual WebGui  
> (VWG)
> is a new 'Web like Desktop' platform

"Web-like desktop" is IMO an oxymoron.

>> It would be nice to see what would happen with such
>> a Visual WebGUI app, when you try to open it on an iPhone,
>> or god forbid, on an Opera browser running on a Nokia phone.
> I have tried demo app with opera 6 from windows mobile HTC TYTN II
> Not work ...not jet because imo silverligh app will go to mobile

I wouldn't hold my breath for Silverlight reaching
all possible devices anytime soon. It's an MS invention,
with MS interests, and we've all seen how these things
used to turn out by time.

>> Moreover it probably needs Silverlight on the browser-side,
>> which is instantly excluding anything outside Microsoft's
>> business territory.
> There is tree implementation of silverligh for linux by Microsoft, by
> Novell/Silverlight  by momo/Moonlight
> http://www.microsoft.com/presspass/press/2007/sep07/09-04silverlightpr.m
> spx

It's still a relatively hefty additional layer to the
standard browsers (with who knows which kind of dependencies),
with an uncertain licensing and official standard status.

C# is very nice language (thanks to the person behind
development), but due the forces behind it, and because
it's a heavy client side tool its usage is IMO limited.

>> SilverLight looks like ActiveX controls revived for the
>> .NET ("managed" !) world, also to try to beat Flash.
> Silverligh is not the only path for visual webgui

Can be, but Silverlight along with MS-like GUIs just
hits you in the face if you go to the page, just like
the word "commercial".

In any case I see not much connection to Harbour,
so this is a bit off topic IMO. I may be get back
to this later of sf.net to see some details.

>> I better like lighter and naturally web-like apps.
> IMO we you made very different application
> Limited webapp and unlimited webgui

"unlimited" isn't needed. If gmail or google docs
count as limited, I'm perfectly fine with it.

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Thu Oct 30 12:14:10 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Oct 30 12:14:13 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <238AA7D9-C696-4B77-8C16-ABA88BFBFA1F@syenar.hu>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
	<C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F10A@SRV02.deltain.net>
	<B59E8059-BCB8-4AC6-96D6-4D9F2403C7C2@syenar.hu>
	<9257026e0810300718p5afd59feved0e46709e63bcc2@mail.gmail.com>
	<238AA7D9-C696-4B77-8C16-ABA88BFBFA1F@syenar.hu>
Message-ID: <9257026e0810300914n5ae353e0sacb476de97237c2b@mail.gmail.com>

On Thu, Oct 30, 2008 at 3:34 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Tell us if there is an open demo, I'm sure some of us
> would be interested to see your solution in real life.

Unfortunately there are no demos.

We mainly create custom apps for few "big" customers so we don't advertise apps.

I'll try to create a screencast.

BTW who knows simple and free screencast apps for Windows and Mac OS X?

best regards,
Lorenzo
From mbelgrano at deltain.it  Thu Oct 30 12:18:56 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Oct 30 12:19:45 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <9257026e0810300914n5ae353e0sacb476de97237c2b@mail.gmail.com>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com><C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815F10A@SRV02.deltain.net><B59E8059-BCB8-4AC6-96D6-4D9F2403C7C2@syenar.hu><9257026e0810300718p5afd59feved0e46709e63bcc2@mail.gmail.com><238AA7D9-C696-4B77-8C16-ABA88BFBFA1F@syenar.hu>
	<9257026e0810300914n5ae353e0sacb476de97237c2b@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F112@SRV02.deltain.net>

Vnc2swf is a cross-platform screen recording tool for ShockWave Flash (swf) format.
Vnc2swf comes with two different implementations:
Python version (pyvnc2swf): [Linux, FreeBSD, Solaris, Mac OS X, and Windows. ]
C version (vnc2swf): [Unix, Linux ,Mac OS X]

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Lorenzo Fiorini
Sent: Thursday, October 30, 2008 5:14 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Which "standard" GUI for Harbour

On Thu, Oct 30, 2008 at 3:34 PM, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Tell us if there is an open demo, I'm sure some of us
> would be interested to see your solution in real life.

Unfortunately there are no demos.

We mainly create custom apps for few "big" customers so we don't advertise apps.

I'll try to create a screencast.

BTW who knows simple and free screencast apps for Windows and Mac OS X?

best regards,
Lorenzo
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Thu Oct 30 12:23:38 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 12:23:49 2008
Subject: R: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F10E@SRV02.deltain.net>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com><!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAACKhXFw8jyNDhr4mcxTcVT4BAAAAAA==@gmail.com><9257026e0810300448y567f8be5k6fe71a0a930fa9c2@mail.gmail.com><7FB1C38A-D699-4FCF-8933-064256C299D2@syenar.hu><9257026e0810300649t4e57e0d4r57669978c1a7f29e@mail.gmail.com>
	<D544B59B-89F8-4728-AD65-60A8EA920896@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F10E@SRV02.deltain.net>
Message-ID: <BE87ADB8-BD13-41C5-9BB3-BDB46B21926D@syenar.hu>

> Not bcc?

BCC is off of my table. [ It has only two advantages:
compilation speed, and small footprint of the devel
tools. ]

> Will with the next release change Harbour default c compiler to MSVC  
> on win32 platform?

Well, there is no such thing as "default" C compiler,
since both BCC and MSVC work equally well for anyone
trying to build Harbour from source, or when tried
with basic out-of-the box components to build apps.

Locally I've switched to MSVC with GCC closely
following, and that really doesn't mean much, as BCC
binaries can still be provided with not much extra
"cost". For some reason it still seems to be a
favorite choice amongst binary downloaders, but MSVC
is a good second. Reasons are probably historical
and also related to Harbour 3rd party providers still
focusing on BCC. But now MSVS Express is fully free,
so this may change.

MSVS is much faster, executables are much smaller,
64-bit and WinCE support is also there.

Harbour's multicompiler support is a really nice
feature BTW, everyone can have his own choice.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 30 12:24:17 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 12:24:42 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <9257026e0810300914n5ae353e0sacb476de97237c2b@mail.gmail.com>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
	<C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F10A@SRV02.deltain.net>
	<B59E8059-BCB8-4AC6-96D6-4D9F2403C7C2@syenar.hu>
	<9257026e0810300718p5afd59feved0e46709e63bcc2@mail.gmail.com>
	<238AA7D9-C696-4B77-8C16-ABA88BFBFA1F@syenar.hu>
	<9257026e0810300914n5ae353e0sacb476de97237c2b@mail.gmail.com>
Message-ID: <79FA49C4-25D7-48C3-80A8-0617CE69BDF6@syenar.hu>

That would be very nice.

Brgds,
Viktor

On 2008.10.30., at 17:14, Lorenzo Fiorini wrote:

> On Thu, Oct 30, 2008 at 3:34 PM, Szak?ts Viktor <harbour. 
> 01@syenar.hu> wrote:
>
>> Tell us if there is an open demo, I'm sure some of us
>> would be interested to see your solution in real life.
>
> Unfortunately there are no demos.
>
> We mainly create custom apps for few "big" customers so we don't  
> advertise apps.
>
> I'll try to create a screencast.
>
> BTW who knows simple and free screencast apps for Windows and Mac OS  
> X?
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Thu Oct 30 12:47:50 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Oct 30 12:47:54 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <4909CA41.8060001@mweb.co.za>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
	<C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F10A@SRV02.deltain.net>
	<B59E8059-BCB8-4AC6-96D6-4D9F2403C7C2@syenar.hu>
	<9257026e0810300718p5afd59feved0e46709e63bcc2@mail.gmail.com>
	<4909CA41.8060001@mweb.co.za>
Message-ID: <9257026e0810300947m39f8c85dg2e23277b592c3848@mail.gmail.com>

On Thu, Oct 30, 2008 at 3:52 PM, Alex Strickland <sscc@mweb.co.za> wrote:

> rpc? Do you mind saying a little on how you are using this, and using which
> tools?

We use only Harbour, hbtip, hbxml and FireFox+Ajax+Javascript.

The idea is not revolutionary.

The "exactly" same exe that uses gtwvt under Win and gtxwc under Lin
and Mac OS X can be started with a -httpserver parameter.
It acquire an unused TCP port within a given range and waits for calls.

The call can be:
- "get a file" like jpg, html, pdf, swf and so it works like a normal
http server
- an Harbour functions like "getcustlist( <params> )"
- a name of an hrb file

The "server" evaluates the call and returns:
- an xml file like <request field1="one",  field2="two", fieldn... />
that is parsed by the standard DOM functions that in turn populate the
UI

- a pdf, xls, rtf, csv from a report function that the browser opens
using the usual "Would you like to open or save" request.

As I said it's not ready for production ( and we're not sure it'll
ever be ) for the moment is a proof of concept. We were waiting for MT
since having hundreds of ports ( f.e. 100 users and 5 exes ) is a
security nightmare. Now we hope we can have only one exe and one port
and 500 threads but we're not sure it'll be possible. We need 24x7x365
reliability.

I hope I was clear enough.

best regards,
Lorenzo
From mbelgrano at deltain.it  Thu Oct 30 12:50:59 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Oct 30 12:51:52 2008
Subject: R: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <BE87ADB8-BD13-41C5-9BB3-BDB46B21926D@syenar.hu>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com><!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAACKhXFw8jyNDhr4mcxTcVT4BAAAAAA==@gmail.com><9257026e0810300448y567f8be5k6fe71a0a930fa9c2@mail.gmail.com><7FB1C38A-D699-4FCF-8933-064256C299D2@syenar.hu><9257026e0810300649t4e57e0d4r57669978c1a7f29e@mail.gmail.com><D544B59B-89F8-4728-AD65-60A8EA920896@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815F10E@SRV02.deltain.net>
	<BE87ADB8-BD13-41C5-9BB3-BDB46B21926D@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F113@SRV02.deltain.net>

What think about a staring page for win with all step for using harbour with one from  msvc and gcc?
Have somebody here distributed application on win32 with msvc/gcc with a high number of user?
There is no way for interchange lib between bcc,msvc,gcc?

GCC target processors as of version 4.3 include :
Alpha,ARM,Atmel AVR, Blackfin ,HC12 , H8/300 , IA-32 (x86), x86-64, IA-64, Motorola 68000,MIPS,PA-RISC,PDP-11,PowerPC,R8C/M16C/M32C,SPU,System/390/zSeries, SuperH,SPARC,VAX
The problem 

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Thursday, October 30, 2008 5:24 PM
To: Harbour Project Main Developer List.
Subject: Re: R: [Harbour] Which "standard" GUI for Harbour

> Not bcc?

BCC is off of my table. [ It has only two advantages:
compilation speed, and small footprint of the devel
tools. ]

> Will with the next release change Harbour default c compiler to MSVC  
> on win32 platform?

Well, there is no such thing as "default" C compiler,
since both BCC and MSVC work equally well for anyone
trying to build Harbour from source, or when tried
with basic out-of-the box components to build apps.

Locally I've switched to MSVC with GCC closely
following, and that really doesn't mean much, as BCC
binaries can still be provided with not much extra
"cost". For some reason it still seems to be a
favorite choice amongst binary downloaders, but MSVC
is a good second. Reasons are probably historical
and also related to Harbour 3rd party providers still
focusing on BCC. But now MSVS Express is fully free,
so this may change.

MSVS is much faster, executables are much smaller,
64-bit and WinCE support is also there.

Harbour's multicompiler support is a really nice
feature BTW, everyone can have his own choice.

Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From abe.buch at att.net  Thu Oct 30 13:06:34 2008
From: abe.buch at att.net (Abeb)
Date: Thu Oct 30 13:06:40 2008
Subject: [Harbour] wince (wcecon not ruuning on PocketPc)
In-Reply-To: <20081029221836.GA20510@34-mo7-2.acn.waw.pl>
References: <20236568.post@talk.nabble.com>
	<20081029221836.GA20510@34-mo7-2.acn.waw.pl>
Message-ID: <20251189.post@talk.nabble.com>



>>How did you compile Harbour for WinCE? 
hbcemk ./wcecon

>>Used platform, C compiler and build scripts.

under msys mingw32
Harbour 1.0.1 Intl. (Rev. 9429)

Harbour itself was build with make_gnu_xmingwce.sh

wcecon will not run under windows ( it will say  ... not a valid w32
application )

Thanks a lot. (and I mean it)
Abe



-- 
View this message in context: http://www.nabble.com/wince-tp20236568p20251189.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From roberbox at gmail.com  Thu Oct 30 14:17:51 2008
From: roberbox at gmail.com (Roberto Lopez)
Date: Thu Oct 30 13:18:02 2008
Subject: [Harbour] Harbour Future ('Standard' GUI)
In-Reply-To: <79FA49C4-25D7-48C3-80A8-0617CE69BDF6@syenar.hu>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>	<C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03815F10A@SRV02.deltain.net>	<B59E8059-BCB8-4AC6-96D6-4D9F2403C7C2@syenar.hu>	<9257026e0810300718p5afd59feved0e46709e63bcc2@mail.gmail.com>	<238AA7D9-C696-4B77-8C16-ABA88BFBFA1F@syenar.hu>	<9257026e0810300914n5ae353e0sacb476de97237c2b@mail.gmail.com>
	<79FA49C4-25D7-48C3-80A8-0617CE69BDF6@syenar.hu>
Message-ID: <4909FA4F.9060004@gmail.com>

Hi All,

I'm developing an application right now, but, since the application must
be accessible to the general public via the web, I've decided to use 
HTML+PHP+MYSQL.

As an xBase programmer I feel very bad.

I could use Harbour CGI but, run binaries on web servers are not always 
possible and not available at some hosting services (and IMHO a 'dying' 
technology anyway).

Some time ago, in this list, someone (I not remember exactly who) said 
something like that more important that GUIs for different platforms, 
the web development must be one of the main interest in the future 
Harbour development.

I absolutely agree with that, but I think that the approach should be a 
quite different from the ones proposed here.

I guess that the web browsers should be considered as operating systems 
  (or platforms) by itself and that Harbour should be capable of 
creating 'executables' for such platforms.

That means that Harbour should be capable of create JavaScript code.

I know that It could be tremendous effort to do such thing, that 
JavaScript is extremely weak and limited compared with C, but as a first 
goal for this project, only subset of current Harbour features could be 
supported.

I'm not thinking in a VM wrote in JavaScript, but perhaps, a Harbour to 
JavaScript translator could be a good idea.

Regarding GUI, interface objects defined via the Clipper 5.3 syntax 
should be enough to satisfy most of usual needs on web development, so 
old code could be reused with few changes.

Please, prior to consider this as a 'weird' idea, take a look at Google 
web toolkit. It translates Java to JavaScript to create web 
applications, so a Harbour to JavaScript translator could be not an 
impossible task.

JavaScript run on any browser and browsers run on any operating system 
(current and future) so the possibilities are unlimited, so we could 
have our Harbour apps running on any device, current or future.

There was just some random thoughts from a Harbour user... I'll continue 
writing my PHP app :)

Regards,

Roberto.














From vailtom at gmail.com  Thu Oct 30 13:59:15 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Thu Oct 30 13:59:19 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
	<C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>
Message-ID: <531d7a750810301059k237e25afna26daa86e478f28c@mail.gmail.com>

Hi!

>> We are launching our new web site where we say "Terminal/GUI" but we
>> miss the ( full ) GUI part.
>> We can add a list of the several h*, x* and v* guis created so far for
>> Harbour but then we need to find answers to questions like "which is
>> the best?", "which one to choose?".
>> Clearly here the things become hard since we have both Linux and
>> Windows ( and few Mac ) users.
>>
>> Options:
>>
>> 1 - remove GUI from from the headlines and say "there are several GUIs
>> created..."
>
> We should probably do this.
>

In this case then we could put a page on the site with screenshots of
some applications (4 or 5) developed with the various GUIs available
and their respective links so that if someone is interested, can get
more details.

The idea behind the text at the top of the page is to bring the
attention that the Harbor have these options that may be the choice of
the developer as its necessity.

I think the ideal would be 'show' available resources and not hide,
thus showing how the project is flexible and robust.
From mbelgrano at deltain.it  Thu Oct 30 14:16:48 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Oct 30 14:17:42 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <531d7a750810301059k237e25afna26daa86e478f28c@mail.gmail.com>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com><C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>
	<531d7a750810301059k237e25afna26daa86e478f28c@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F116@SRV02.deltain.net>

I Agree
I notice that Also Pritpal sample of element of gui inside-outside GT is
intresting (gtwvg)


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Vailton Renato
Sent: Thursday, October 30, 2008 6:59 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Which "standard" GUI for Harbour

Hi!

>> We are launching our new web site where we say "Terminal/GUI" but we
>> miss the ( full ) GUI part.
>> We can add a list of the several h*, x* and v* guis created so far
for
>> Harbour but then we need to find answers to questions like "which is
>> the best?", "which one to choose?".
>> Clearly here the things become hard since we have both Linux and
>> Windows ( and few Mac ) users.
>>
>> Options:
>>
>> 1 - remove GUI from from the headlines and say "there are several
GUIs
>> created..."
>
> We should probably do this.
>

In this case then we could put a page on the site with screenshots of
some applications (4 or 5) developed with the various GUIs available
and their respective links so that if someone is interested, can get
more details.

The idea behind the text at the top of the page is to bring the
attention that the Harbor have these options that may be the choice of
the developer as its necessity.

I think the ideal would be 'show' available resources and not hide,
thus showing how the project is flexible and robust.
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Thu Oct 30 15:40:56 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 15:41:28 2008
Subject: R: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F113@SRV02.deltain.net>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com><!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAACKhXFw8jyNDhr4mcxTcVT4BAAAAAA==@gmail.com><9257026e0810300448y567f8be5k6fe71a0a930fa9c2@mail.gmail.com><7FB1C38A-D699-4FCF-8933-064256C299D2@syenar.hu><9257026e0810300649t4e57e0d4r57669978c1a7f29e@mail.gmail.com><D544B59B-89F8-4728-AD65-60A8EA920896@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815F10E@SRV02.deltain.net>
	<BE87ADB8-BD13-41C5-9BB3-BDB46B21926D@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F113@SRV02.deltain.net>
Message-ID: <CF340C41-6BB1-43D0-AD82-602719EA137F@syenar.hu>

> What think about a staring page for win with all step for using  
> harbour with one from  msvc and gcc?

It's just setting up the compiler (as per respective compiler's
docs), and running make_vc.bat for MSVC (exactly the same as for
BCC, except the name of the batch file). For MinGW+msys it's just
running 'sh make_gnu.sh'.

Building apps involves running 'hbmk.bat test.prg' or
'sh hbmk test.prg' command.

Listing all the minor details and cases could probably fill
a smaller book, but for 99% of ppl this is enough for a jump start.

> Have somebody here distributed application on win32 with msvc/gcc  
> with a high number of user?

There are plenty of them on the market. If you mean Harbour + MSVC,
I see no difference between an MSVC and a BCC Harbour build in
terms of stability or maturity. It's effectively the same codebase.
MSVC RTL and compiler is much more widely tested and used on the
field than BCC. MinGW/GCC as a compiler is also mature, and it's
using the Windows OS shipped RTL .dlls, so no problems here.

> There is no way for interchange lib between bcc,msvc,gcc?

No. [ Yeah, It's good to have standards. ]

> GCC target processors as of version 4.3 include :
> Alpha,ARM,Atmel AVR, Blackfin ,HC12 , H8/300 , IA-32 (x86), x86-64,  
> IA-64, Motorola 68000,MIPS,PA-RISC,PDP-11,PowerPC,R8C/M16C/ 
> M32C,SPU,System/390/zSeries, SuperH,SPARC,VAX

GCC is the umbrella name, plus supporting a platform needs
more than just supporting the CPU.

MinGW for Windows specifically supports only Win32, with
Win64 somewhere in the works.

Brgds,
Viktor

From vailtom at gmail.com  Thu Oct 30 15:49:28 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Thu Oct 30 15:49:33 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F116@SRV02.deltain.net>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
	<C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>
	<531d7a750810301059k237e25afna26daa86e478f28c@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03815F116@SRV02.deltain.net>
Message-ID: <531d7a750810301249h19a144e1i1a918f36618dac3d@mail.gmail.com>

I just can not commit to mount an example of each GUI because I am
busy with a few things about the company and the rest of the site
details ...

If someone wants to send me at least a few screens of sample I'll
create a page with information about this.

This if all find something viable ... but I can remove the end of the
header of the site too.
From harbour.01 at syenar.hu  Thu Oct 30 16:24:30 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 16:34:42 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <531d7a750810301249h19a144e1i1a918f36618dac3d@mail.gmail.com>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
	<C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>
	<531d7a750810301059k237e25afna26daa86e478f28c@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03815F116@SRV02.deltain.net>
	<531d7a750810301249h19a144e1i1a918f36618dac3d@mail.gmail.com>
Message-ID: <9B75A3CD-8A57-4C5D-9D14-2938ECF32A89@syenar.hu>

Hi Renato,

On 2008.10.30., at 20:49, Vailton Renato wrote:

> I just can not commit to mount an example of each GUI because I am
> busy with a few things about the company and the rest of the site
> details ...
>
> If someone wants to send me at least a few screens of sample I'll
> create a page with information about this.
>
> This if all find something viable ... but I can remove the end of the
> header of the site too.

Harbour is not a GUI product right now so I'd vote to
not mention it specifically.

Later we can add such 3rd party, or GUI page if someone
provides the material, or you find time to do it, but
it's really just the cherry on top at this moment.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 30 16:59:29 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 16:59:30 2008
Subject: [Harbour] 2008-10-30 21:56 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c93ad2$Blat.v2.6.2$66b8f3b0$1684f58fdeec@127.0.0.1>

2008-10-30 21:56 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * contrib/make_b32_all.bat
  * contrib/make_vc_all.bat
  * contrib/make_gcc_all.sh
    + Added support for GNU-make features HB_CONTRIBLIBS, 
      and HB_CONTRIB_ADDONS.
      Not tested in make_gcc_all.sh.

  * config/w32/msvc.cf
  * config/w32/msvcce.cf
    - Removed -D_CRT_SECURE_NO_DEPRECATE.
      (sync with non-GNU make)
--
Brgds,
Viktor

From druzus at acn.waw.pl  Thu Oct 30 17:27:44 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 30 17:27:16 2008
Subject: [Harbour] RE: Harbour Digest, Vol 24, Issue 138
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501842797@PINK.zycie.pzu>
References: <NLB01FEfVma0osA91E9000092bf@gatein.pzuzycie.com.pl>
	<FFAFD6EA63A3FC4784FBDA52BE7A7C9501842797@PINK.zycie.pzu>
Message-ID: <20081030212744.GA1094@34-mo7-2.acn.waw.pl>

On Thu, 30 Oct 2008, Horodyski Marek (PZUZ) wrote:

Hi Marek,

> Przemek, how can I write this :
> Function appServer( appName) // for example appName is 'RAPORT_024'
> Static appStorage := {} // this variable can be ohne for all thread,
> like CLASS STATIC VARIABLE

Harbour supports also THREAD STATIC which is static variable local to
thread, f.e.:
   THREAD STATIC appStorage := {}
so each thread has its own appStorage static variable.

> Local n, x, c := Upper( appName), succes := .f., lapp // lapp is local
> array with structure of appName: {appname, {...}}
> If ( n := Ascan( appStorage, {|x| x[1] == c})) != 0
>    Return appStorage[ n]
> Else
>    // begin sequence
>       Semaphore( c, 1)                // or maby better create with lock
> : While !LockSemphore( c) ; End
>       If ( n := Ascan( appStorage, {|x| x[1] == c})) != 0
>          Semaphore( c, 0)
>          Return appStorage[ n]
>       Else
>          * [ here search and compile this app to lapp := {}]
>          lapp := SearchAndCompile( c, succes)
>          If succes ; AADD( appStorage, lapp) ; n := Len( appStorage)
>          End
>          Semaphore( c, 0)
>          If n != 0 ; Return appStorage[ n]
>          Else
>               LogCompileErrorWithParam( c, ...)
>               Return Nil
>          End
>       End
>   // End Sequece
> End
> How can I get guarante to execute this proces ( fragment of proces) from
> ohne thread with unique parameter ?

I'm not sure I understood the above but it c is semaphore variable
which should synchronize thread in one process then it's enough to
use mutex. MUTEX is semaphore with two states only.
So your code may looks like:
   static s_semaphore, s_once
   // initialize semaphore (mutex), be sure that it is created only once
   // not on each function entry so hb_threadOnce() is used
   hb_threadOnce( @s_once, {|| s_semaphore := hb_createMutex() } )

and then instead of:
      While !LockSemphore( c) ; End
you make:
      hb_mutexLock( s_semaphore )

and instead of:
   Semaphore( c, 0)
you are using:
   hb_mutexUnlock( s_semaphore )

> This is much better than CRITICAL FUNCTION.

Yes, there are situations where SEMAPHORES/MUTEXES are much more
flexible then CRITICAL FUNCTION/PROCEDURE.

> Can I create with lock hb_mutexCreate(), e.g. so :
> hb_mutexCreate( appName) or similarly ?

Yes but the syntax is different. hb_mutexCreate() -> <pMutex>
You have to store it in variable accessible for all threads so
they can use the same semaphor variable for later synchronizations.
In the example above it's STATIC s_semaphore variable.
Each call to hb_mutexCreate() creates new semaphore/mutex variable.
All mutexes are unnamed. If you want to introduce sth like named mutexes
then you can easy make it yourself but I do not think it will be necessary.

> My know about work with mutex is very little.
> With semaphore I can lock action BEFORE control search.

MUTEX is exactly the same object as TWO state SEMAPHOR. It can be locked
or unlocked. It's only different name for the same thing.

As you can see in the example above I used:
   static s_semaphore, s_once
   hb_threadOnce( @s_once, {|| s_semaphore := hb_createMutex() } )
hb_threadOnce guaranties that mutex will be created only once. It uses
additional variable to control number of calls. This code can be written as:

   static s_semaphore
   if s_semaphore == NIL
      s_semaphore := hb_createMutex()
   endif

but there is a risk that the 1-st call to this function will be done
by two threads simultaneously and both will pass successfully
'if s_semaphore == NIL' test so I used hb_threadOnce().
One of the proposed modifications was unblocking in compiler using
hb_createMutex() as static variable initializer, so this initialization
code can be reduced to:
   static s_semaphore := hb_createMutex()

You can store MUTEXes in any type of variable but usually in STATICs are
used for mutex holder but it's not necessary.
If you want to simulate named semaphores then you can create at application
startup public hash array with all semaphores you want to use, f.e.:
   PUBLIC semaphore := { "name1" => hb_createMutex(), ;
                         "name2" => hb_createMutex(), ;
                         "name3" => hb_createMutex(), ;
                         "name4" => hb_createMutex() }

and later use them:
   hb_mutexLock( semaphore[ "name1" ] )
   [...]
   hb_mutexUnlock( semaphore[ "name1" ] )

In Harbour mutexes created by hb_createMutex() are recursive. It means
that the same thread can lock given mutex more then once and then have
to unlock it the same number of times before other thread will be able
to lock it.

There is no interaction between mutexes created by two different instances
of the same program (two different processes). Mutexes are local two given
program and can be used to synchronize threads only.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Oct 30 17:40:59 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 17:41:05 2008
Subject: [Harbour] Intel CPU optimization switches
Message-ID: <23BFD5E7-D8FE-4898-9163-B6D24EC50741@syenar.hu>

Hi all,

Is there any opinions on starting to optimize
our Windows C compiler switches?

I mean, what would be the oldest Intel CPU
Harbour should support in _default_ builds?

Minimum CPU requirements for different Windows
versions:
- Win95: 386DX, 486 recommended
- Win98/ME: 486, Pentium recommended
- WinNT/2K: Pentium
- WinXP: Pentium > 233Mhz, 300Mhz recommended

IMO 386 could definitely be dropped, maybe also 486.

Any thoughts?

Brgds,
Viktor

From druzus at acn.waw.pl  Thu Oct 30 20:01:19 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 30 20:00:49 2008
Subject: [Harbour] MT extensions
In-Reply-To: <AF7287B9-E32B-49DE-A5F5-2C7A10B12192@syenar.hu>
References: <20081029163752.GA8772@34-mo7-2.acn.waw.pl>
	<AF7287B9-E32B-49DE-A5F5-2C7A10B12192@syenar.hu>
Message-ID: <20081031000119.GA24870@34-mo7-2.acn.waw.pl>

On Thu, 30 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> This looks good to me, but the name CRITICAL
> to me doesn't really seem to imply the underlying
> functionality, it also sounds a bit Windows-like,
> so if possible, I'd suggest some other name.
> Like MUTEX FUNC|PROC.

It's much older term then whole MS history :-)
There is also different name for such functions:
MONITOR but who knows it in current days?
How many people have heard sth about ADA or LINDA?
I'm afraid not too much and it's really sad :-(
People like to hear about *new* XYZ "technology"
and do not even know that someone reinvent a wheel
and this "new technology" was documented over 30
years ago.
CRITICAL FUNCTION | PROCEDURE probably is quite easy
to understand term in current days. If you do not like
it then instead of creating sth new like MUTEX FUNCTION |
PROCEDURE I'd prefer to use MONITOR FUNCTION | PROCEDURE
but I do not know how it will look for native English
speakers when FUNCTION or PROCEDURE will be added to
MONITOR word.
Opinions?

> As for making hb_mutexCreate() a special function
> exception allowed in STATIC initialization looks
> a bit strange as a syntax, so maybe we could
> rather consider using syntax like MUTEX STATIC s_mtx.
> Which means the variable is a MUTEX per definition.
> Or maybe just MUTEX s_mtx, but that may make things
> more complicated to implement.

I do not find it more stranger then current:

   static s1 := CTOD( "" )
   static s2 := HB_STOD( "20081030" )
   static s3 := UPPER( "abc" )
   static s4 := EMPTY( 1 )
   static s5 := IIF( AT( "c", "abcdef" ) != 0, 10, 20 )
   [...]

In Harbour just like in Clipper all functions optimized at
compile time to simple expression can be used to initialize
static variables. We can simply define that hb_mutexCreate()
is yet another fully optimized functions (internally it will
not be but this is not visible for Harbour user).
Introducing new construction like MUTEX STATIC s_mtx looks
nice but it will not be able to prevent users against overwriting
s_mtx in the code. I can block assign and passing s_mtx by references
but in such case it will mean that we introduce real new exception
not yet another "fully optimized" function and it will force deeper
compiler modifications.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Oct 30 20:43:43 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 20:43:50 2008
Subject: [Harbour] MT extensions
In-Reply-To: <20081031000119.GA24870@34-mo7-2.acn.waw.pl>
References: <20081029163752.GA8772@34-mo7-2.acn.waw.pl>
	<AF7287B9-E32B-49DE-A5F5-2C7A10B12192@syenar.hu>
	<20081031000119.GA24870@34-mo7-2.acn.waw.pl>
Message-ID: <1B4F9ECC-A5F9-42E1-A033-AAC13410D760@syenar.hu>

Hi Przemek,

> It's much older term then whole MS history :-)
> There is also different name for such functions:
> MONITOR but who knows it in current days?
> How many people have heard sth about ADA or LINDA?
> I'm afraid not too much and it's really sad :-(
> People like to hear about *new* XYZ "technology"
> and do not even know that someone reinvent a wheel
> and this "new technology" was documented over 30
> years ago.
> CRITICAL FUNCTION | PROCEDURE probably is quite easy
> to understand term in current days. If you do not like
> it then instead of creating sth new like MUTEX FUNCTION |
> PROCEDURE I'd prefer to use MONITOR FUNCTION | PROCEDURE
> but I do not know how it will look for native English
> speakers when FUNCTION or PROCEDURE will be added to
> MONITOR word.
> Opinions?

Maybe I'm misunderstanding the purpose. To me proposed
"CRITICAL" looks like a way to avoid getting the execution
to the same code section twice. For example I would use it
for a very simple purpose (I already use similar technique
there currently), to avoid starting my small calculator
applet twice in my app (reason unimportant). Now, the
calculator code itself is far from being "CRITICAL" in any
sense, yet I'd like to avoid reentering the code.

Again maybe I misunderstand something, but the fact
that a given code section is desired to be protected
with MUTEXes, doesn't automatically mean that this
code section is "CRITICAL" in the meaning of the word
"critical".

MONITOR is even more cryptic to me :)

The other aspect to consider is that we would this way
introduce new word (CRITICAL/MONITOR) for an already named
entity in Harbour (MUTEXED/HB_MUTEXED). This is a little
bit confusing, even if there are more precise historical
terminologies for this specific feature. Ppl (like me)
will have a difficulty realizing that a CRITICAL FUNC
is in fact a FUNC automatically protected by a MUTEX.

[ I've never had the chance to program aircrafts, so ADA
is unfortunately not very close to me, but I didn't give
up yet to take a closer look into it once. LINDA was
a TV series in HU TV long ago, the main character was
a young lady able to yell in high frequencies while
doing something like karate. Other than this, it was
quite good by those days' standards :) BTW, the LINDA
you're talking about has an interesting naming history :)
Admittedly I haven't heard of it till today though. ]

>> As for making hb_mutexCreate() a special function
>> exception allowed in STATIC initialization looks
>> a bit strange as a syntax, so maybe we could
>> rather consider using syntax like MUTEX STATIC s_mtx.
>> Which means the variable is a MUTEX per definition.
>> Or maybe just MUTEX s_mtx, but that may make things
>> more complicated to implement.
>
> I do not find it more stranger then current:
>
>   static s1 := CTOD( "" )
>   static s2 := HB_STOD( "20081030" )
>   static s3 := UPPER( "abc" )
>   static s4 := EMPTY( 1 )
>   static s5 := IIF( AT( "c", "abcdef" ) != 0, 10, 20 )
>   [...]

These are side effects of compile time optimization,
and at the end of the day all variables are getting
assigned _constant_ values at compile time.

> In Harbour just like in Clipper all functions optimized at
> compile time to simple expression can be used to initialize
> static variables. We can simply define that hb_mutexCreate()
> is yet another fully optimized functions (internally it will
> not be but this is not visible for Harbour user).

This was the reason why I felt it "strange". Here, the
STATIC var gets a value at runtime, yet the syntax implies
otherwise.

Users may wonder how is this possible for this function,
but not for others.

> Introducing new construction like MUTEX STATIC s_mtx looks
> nice but it will not be able to prevent users against overwriting
> s_mtx in the code. I can block assign and passing s_mtx by references
> but in such case it will mean that we introduce real new exception
> not yet another "fully optimized" function and it will force deeper
> compiler modifications.

I think that's a lesser problem, and also a problem with
your proposed syntax. With 'MUTEX STATIC s_mtx', the only
worrying aspect is there is no visible assignment, yet in
that sense it still resembles to a MEMVAR or FIELD declaration,
which are well known. Maybe MUTEX or HB_MUTEX is enough
without STATIC, since it cannot be anything else anyway.

Given so far available information I maintain my suggestions: :)
MUTEX <mtx_whatever>
MUTEXED FUNC | PROC

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 30 21:07:51 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 21:07:52 2008
Subject: [Harbour] 2008-10-31 02:05 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c93af5$Blat.v2.6.2$18cfa14e$1218b52f6e62@127.0.0.1>

2008-10-31 02:05 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_b32.mak
  * contrib/mtpl_b32.mak
  * config/w32/bcc32.cf
    - Added -4 switch, which means Intel 386 CPUs are not 
      not supported by default.

  * make_vc.mak
    + Added -GA switch to MSVC 32/64 which creates smaller 
      (and only slightly faster) TLS access code.

  * source/compiler/cmdcheck.c
  * source/compiler/hbusage.c
    + Added -/+ suboptions to -k? options to make it 
      possible to set them to the opposite setting.
    ; NOTE: BTW, shouldn't -ki option also disable 
            #pragma BEGINDUMP/ENDDUMP? IMO it should, 
            otherwise it doesn't really enforce C 
            out of .prg code.

  * config/w32/gcc.cf
  * config/w32/mingw.cf
    * Changed -march=i486 to -march=i586.

  ; NOTE: Please comment on CPU optimization switches, IMO 
          we can quite safely target Pentium/586 as the 
          minimum CPU requirement these days for default 
          Harbour builds. If someone needs to run it on 
          386 (Win95) or 486 (Win98/WinME), a special built 
          can be created.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 30 21:14:58 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 21:15:02 2008
Subject: [Harbour] 2008-10-31 02:14 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c93af6$Blat.v2.6.2$1760f6ea$1190972c81d8@127.0.0.1>

2008-10-31 02:14 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * source/vm/dlmalloc.c
    ! Fixed minor MinGW warning. This fix also exists 
      as part of the next dlmalloc version (2.8.4b).
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 30 21:27:08 2008
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 30 21:27:08 2008
Subject: [Harbour] 2008-10-31 02:26 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
Message-ID: <01c93af7$Blat.v2.6.2$ca6b0d1a$5e84c394e7c@127.0.0.1>

2008-10-31 02:26 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
  * make_vc.mak
    - Removed -GS- option for WinCE. MS recommends this to 
      be there for safety. If someone wants to disable, it 
      can be done with C_USR.
--
Brgds,
Viktor

From philb at philb.us  Thu Oct 30 21:40:25 2008
From: philb at philb.us (Phil Barnett)
Date: Thu Oct 30 21:40:36 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <96D80E2B-A0C7-49C6-ACDF-259053536F92@syenar.hu>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03815F107@SRV02.deltain.net>
	<96D80E2B-A0C7-49C6-ACDF-259053536F92@syenar.hu>
Message-ID: <200810302140.26141.philb@philb.us>

On Thursday 30 October 2008 05:08:10 am Szak?ts Viktor wrote:
> We have a mailing-list.
>
> [ which "happens" to be replicated in several newsgroups/web
> sites, making it much complicated (or even possible) to find
> anything via web search engines (Google), due to multiple matches
> from these different places pointing to the _same_ original
> mails. Just try. Big big shame. ]

You are absolutely correct, Viktor.

Here is the address of our mailing lists main page:

http://lists.harbour-project.org/mailman/listinfo

This page leads to each list main page, where you can join the lists and view 
the archives.

It's the only place we should be referring to on our web site as far as our 
mailing lists go.

Thanks.

-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
From druzus at acn.waw.pl  Thu Oct 30 21:47:29 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 30 21:47:01 2008
Subject: [Harbour] wince (wcecon not ruuning on PocketPc)
In-Reply-To: <20251189.post@talk.nabble.com>
References: <20236568.post@talk.nabble.com>
	<20081029221836.GA20510@34-mo7-2.acn.waw.pl>
	<20251189.post@talk.nabble.com>
Message-ID: <20081031014729.GB24870@34-mo7-2.acn.waw.pl>

On Thu, 30 Oct 2008, Abeb wrote:

Hi,

> >>How did you compile Harbour for WinCE? 
> hbcemk ./wcecon
> >>Used platform, C compiler and build scripts.
> under msys mingw32
> Harbour 1.0.1 Intl. (Rev. 9429)
> Harbour itself was build with make_gnu_xmingwce.sh

I've just check it and some modifications in GTWVT broke
WinCE build. I took older GTWVT and updated it for recent
modifications in core code (MT) and it works correctly.
I cannot say now what is wrong because I haven't checked
recent extensions to GTWVT and I can make WinCE tests only
in firm and real MS-Windows where MS WinCE PocketPC emulator
works - it doesn't with WINE in Linux.
Maybe Viktor or Pritpal can check it. For sure some of this
modifications are wrongly done, f.e. some static variables for
mouse selection were introduced what cannot work correctly in
MT mode. It has to be fixed. In this case looks that these
variables should be moved to HB_GTWVT structure.
BTW I would like to ask all developers to inform about _ALL_
static variables you want to introduce to core code. I cannot
check all commits.

The problem with WinCE is probably bound with console window
resizing and interactions with font selection or with some
new functions or window attributes which does not exist on
WinCE but I cannot say which ones with isolating new code
and making some real tests. I rather will not be able to
make it in this week.
Seems that the startup/resize code also should be checked.
F.e. as I can see CreateFontIndirect() is called 7 times.
I do not think it's necessary.

> wcecon will not run under windows ( it will say  ... not a valid w32
> application )

That's correct behavior. ARM-WinCE binaries cannot be executed
naively in x86 desktop MS-Windows but you can use WinCE/PocketPC
emulator from MS.

best regards,
Przemek
From bedipritpal at hotmail.com  Thu Oct 30 23:03:30 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Oct 30 23:03:34 2008
Subject: [Harbour] wince (wcecon not ruuning on PocketPc)
In-Reply-To: <20081031014729.GB24870@34-mo7-2.acn.waw.pl>
References: <20236568.post@talk.nabble.com>
	<20081029221836.GA20510@34-mo7-2.acn.waw.pl>
	<20251189.post@talk.nabble.com>
	<20081031014729.GB24870@34-mo7-2.acn.waw.pl>
Message-ID: <20259457.post@talk.nabble.com>


Hello Przemek

<<<
I've just check it and some modifications in GTWVT broke
WinCE build. I took older GTWVT and updated it for recent
modifications in core code (MT) and it works correctly.
I cannot say now what is wrong because I haven't checked
recent extensions to GTWVT and I can make WinCE tests only
in firm and real MS-Windows where MS WinCE PocketPC emulator
works - it doesn't with WINE in Linux.
Maybe Viktor or Pritpal can check it. 
>>> 

I am looking into it but so far have not got any clue what went wrong.

<<<
For sure some of this
modifications are wrongly done, f.e. some static variables for
mouse selection were introduced what cannot work correctly in
MT mode. It has to be fixed. In this case looks that these
variables should be moved to HB_GTWVT structure.
>>>

Yes. hb_gt_wvt_MouseEvent() has defined two statics. I will fix them in a
while.
But probably this is not the cause of WinCE failure.

<<<
The problem with WinCE is probably bound with console window
resizing and interactions with font selection or with some
new functions or window attributes which does not exist on
WinCE but I cannot say which ones with isolating new code
and making some real tests. I rather will not be able to
make it in this week.
Seems that the startup/resize code also should be checked.
F.e. as I can see CreateFontIndirect() is called 7 times.
I do not think it's necessary.
>>>

I will be looking into multiple calls to CreateFontIndirect().
May be flickering is caused by this factor alone, I am not sure.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/wince-tp20236568p20259457.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Fri Oct 31 00:27:48 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Oct 31 00:27:52 2008
Subject: [Harbour] 2008-10-30 21:24 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20260081.post@talk.nabble.com>


2008-10-30 21:24 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/source/rtl/gtwvt/gtwvt.c
  * harbour/source/rtl/gtwvt/gtwvt.h
    + Transfereed two static variables to HB_GTWVT structure.
      Multi-thread/console protection.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-10-30-21%3A24-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20260081p20260081.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From lorenzo.fiorini at gmail.com  Fri Oct 31 03:20:15 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Oct 31 03:20:18 2008
Subject: [Harbour] One executable 500 threads
Message-ID: <9257026e0810310020p5ae7cedtdbaf4a312e520f0f@mail.gmail.com>

Our desktop application "suite" is made by these modules:

- Accounting
- Business ( sales, purchases, inventory, ... )
- CRM
- Reporting
- List prices
- Job management

they share large part of the code and are always built together.
We wanted different executable to have different windows so that every
user can have the needed mix of the modules opened at the same time.

Now we have MT also for GT, so the first thing I would like to try is
to put all the modules in the same executable and add a paramater to
run the wanted module:
f.e. from acc.exe, crm.exe, bus.exe to suite.exe -acc suite.exe -crm
-suite.exe -bus

as far as I understand this will not change anything but we'll have
only one exe to deploy.
Is it true?

Next step.

Our executables are also rpc servers, this means that 100 users x 6
modules gives 300-600 TCP ports opened depending on usage mix.

Is it insane to think about having only one executable with only one
TCP port that manage 500 completely isolated threads?
I mean every thread with its 100 tables opened all the vars allocated and so on?

best regards,
Lorenzo
From harbour.01 at syenar.hu  Fri Oct 31 03:52:13 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 31 03:52:20 2008
Subject: [Harbour] 2008-10-30 21:24 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <20260081.post@talk.nabble.com>
References: <20260081.post@talk.nabble.com>
Message-ID: <93F8259A-6143-4A3F-B66B-6CB3958877F1@syenar.hu>

Hi Pritpal,

It looks your changes didn't make it into the
repository for some reason. Could you check it?

Brgds,
Viktor

On 2008.10.31., at 5:27, Pritpal Bedi wrote:

>
> 2008-10-30 21:24 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>  * harbour/source/rtl/gtwvt/gtwvt.c
>  * harbour/source/rtl/gtwvt/gtwvt.h
>    + Transfereed two static variables to HB_GTWVT structure.
>      Multi-thread/console protection.
>
> Regards
> Pritpal Bedi
> -- 
> View this message in context: http://www.nabble.com/2008-10-30-21%3A24-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20260081p20260081.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From M.Horodyski at pzuzycie.com.pl  Fri Oct 31 04:35:05 2008
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri Oct 31 04:35:10 2008
Subject: [Harbour] RE: Harbour Digest, Vol 24, Issue 142
In-Reply-To: <NLB01FEtQvAauNjVuMh0000ae42@gatein.pzuzycie.com.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501842955@PINK.zycie.pzu>

>BTW, what's not working for you with SVN download?
>
>As another option, you may get the daily source from our 
>homepage, it's now working fine:
>
>http://harbour-project.org/harbour-nightly.zip
>
>Brgds,
>Viktor

I don't know how can man use svn - but above solution is very, very
nice.
All work witout trouble. But when i use hbmk, i show :

Usage: hbmk [-mt] [-gui] filename

When I not specify [-gui], aplication is nothing show. It is not
optional !
When I specify gui, all beautifully work :)
Many thx.

Regards,
Marek Horodyski
From harbour.01 at syenar.hu  Fri Oct 31 04:50:29 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 31 04:50:38 2008
Subject: [Harbour] RE: Harbour Digest, Vol 24, Issue 142
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501842955@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501842955@PINK.zycie.pzu>
Message-ID: <AFC171F7-C541-4606-8173-F3F9F12C2969@syenar.hu>

>
Hi Marek,

> I don't know how can man use svn - but above solution is very, very
> nice.
> All work witout trouble. But when i use hbmk, i show :
>
> Usage: hbmk [-mt] [-gui] filename
>
> When I not specify [-gui], aplication is nothing show. It is not
> optional !
> When I specify gui, all beautifully work :)

Great, and good to hear it works for you :)

> Many thx.

You must use -gui if you specify GTWVT or GTGUI in your app as
default GT.

If you just leave the app to use the default GT (which is
currently GTWIN), -gui isn't needed.

The point is: -gui must be in sync with your apps requirements,
and the current default is non-GUI.

Brgds,
Viktor

From mbelgrano at deltain.it  Fri Oct 31 05:10:09 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Oct 31 05:10:56 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <9B75A3CD-8A57-4C5D-9D14-2938ECF32A89@syenar.hu>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com><C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu><531d7a750810301059k237e25afna26daa86e478f28c@mail.gmail.com><AFB948164110ED43B5EB849E8DEEF03815F116@SRV02.deltain.net><531d7a750810301249h19a144e1i1a918f36618dac3d@mail.gmail.com>
	<9B75A3CD-8A57-4C5D-9D14-2938ECF32A89@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F118@SRV02.deltain.net>

GTWVT and GTWVG Are fist and second step of GUI 

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Thursday, October 30, 2008 9:24 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Which "standard" GUI for Harbour

Hi Renato,

On 2008.10.30., at 20:49, Vailton Renato wrote:

> I just can not commit to mount an example of each GUI because I am
> busy with a few things about the company and the rest of the site
> details ...
>
> If someone wants to send me at least a few screens of sample I'll
> create a page with information about this.
>
> This if all find something viable ... but I can remove the end of the
> header of the site too.

Harbour is not a GUI product right now so I'd vote to
not mention it specifically.

Later we can add such 3rd party, or GUI page if someone
provides the material, or you find time to do it, but
it's really just the cherry on top at this moment.

Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From labitas at gmail.com  Fri Oct 31 05:11:46 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Fri Oct 31 05:11:49 2008
Subject: [Harbour] MT extensions
In-Reply-To: <20081031000119.GA24870@34-mo7-2.acn.waw.pl>
References: <20081029163752.GA8772@34-mo7-2.acn.waw.pl>
	<AF7287B9-E32B-49DE-A5F5-2C7A10B12192@syenar.hu>
	<20081031000119.GA24870@34-mo7-2.acn.waw.pl>
Message-ID: <2386af1b0810310211r1f27f5d5o1cfda39ecbd4de2c@mail.gmail.com>

Hi Przemek,

>
> CRITICAL FUNCTION | PROCEDURE probably is quite easy
> to understand term in current days. If you do not like
> it then instead of creating sth new like MUTEX FUNCTION |
> PROCEDURE I'd prefer to use MONITOR FUNCTION | PROCEDURE
> but I do not know how it will look for native English
> speakers when FUNCTION or PROCEDURE will be added to
> MONITOR word.
> Opinions?
>

There is quite interesting reading in Free E-book: Threading in C#
http://www.albahari.com/threading/
Maybe it gives some thoughts?

Best regards,
Saulius
From harbour.01 at syenar.hu  Fri Oct 31 05:27:29 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 31 05:27:37 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F118@SRV02.deltain.net>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com><C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu><531d7a750810301059k237e25afna26daa86e478f28c@mail.gmail.com><AFB948164110ED43B5EB849E8DEEF03815F116@SRV02.deltain.net><531d7a750810301249h19a144e1i1a918f36618dac3d@mail.gmail.com>
	<9B75A3CD-8A57-4C5D-9D14-2938ECF32A89@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F118@SRV02.deltain.net>
Message-ID: <2D8CB0A9-A7B4-4B39-9F23-0CF5559F9479@syenar.hu>

GTWVT is technically GUI, but - what is more important -
it's not GUI in the sense of any end-users or "normal"
Harbour developers.

GTWVG IMO still needs heavy development to be used
in production environments, as I can make it crash and
behave strangely in just a few seconds of regular clicking.
It's a promising concept and lots of things are there,
but it misses yet the last mile in development which could
make it a safe choice and a mature GT. Unfortunately this
last mile sometimes takes lots of effort.

So, while IMO Harbour itself isn't GUI "out-of-the-box",
there exist several working and usable native GUI
3rd party addons. This is a fact which we may express
on the appropriate pages.

Brgds,
Viktor

On 2008.10.31., at 10:10, Massimo Belgrano wrote:

> GTWVT and GTWVG Are fist and second step of GUI
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org 
> ] On Behalf Of Szak?ts Viktor
> Sent: Thursday, October 30, 2008 9:24 PM
> To: Harbour Project Main Developer List.
> Subject: Re: [Harbour] Which "standard" GUI for Harbour
>
> Hi Renato,
>
> On 2008.10.30., at 20:49, Vailton Renato wrote:
>
>> I just can not commit to mount an example of each GUI because I am
>> busy with a few things about the company and the rest of the site
>> details ...
>>
>> If someone wants to send me at least a few screens of sample I'll
>> create a page with information about this.
>>
>> This if all find something viable ... but I can remove the end of the
>> header of the site too.
>
> Harbour is not a GUI product right now so I'd vote to
> not mention it specifically.
>
> Later we can add such 3rd party, or GUI page if someone
> provides the material, or you find time to do it, but
> it's really just the cherry on top at this moment.
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From M.Horodyski at pzuzycie.com.pl  Fri Oct 31 05:41:21 2008
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri Oct 31 05:41:28 2008
Subject: [Harbour] RE: Harbour Digest, Vol 24, Issue 145
In-Reply-To: <NLB01FEQf4vKhBxT18j0000b2e6@gatein.pzuzycie.com.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C95018429B9@PINK.zycie.pzu>

>Message: 6
>Date: Thu, 30 Oct 2008 17:47:50 +0100
>From: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>

[...]

>As I said it's not ready for production ( and we're not sure 
>it'll ever be ) for the moment is a proof of concept. We were 
>waiting for MT since having hundreds of ports ( f.e. 100 users 
>and 5 exes ) is a security nightmare. Now we hope we can have 
>only one exe and one port and 500 threads but we're not sure 
>it'll be possible. We need 24x7x365 reliability.
>
>I hope I was clear enough.

Now one new thread (with own GT and RDD) in Harbour chuck ca. 100 kb.
RAM (and not groved for session). It is more (not many) than session in
php http serwer, but in contrast harbour client has own GT. See what
make Google Chrome - one process on my computer has 2,5 to 35 Mb !
For test I have run hundred browses on thread from Harbour (1Gb Ram on
XP Prof.), and cost for this is c.a. 14Mb ram! It probably will less
when terminal window will on other-client computer. It is beautiful and
giv big promise.

BTW, new cart from GoogleChrome giv on stack process new process (one
aplicaction have many process).
New thread from Harbour giv new aplicattion and process stil one (one
process have many aplication).

best regards,
Marek Horodyski
From lorenzo.fiorini at gmail.com  Fri Oct 31 06:29:14 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Oct 31 06:29:18 2008
Subject: [Harbour] RE: Harbour Digest, Vol 24, Issue 145
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C95018429B9@PINK.zycie.pzu>
References: <NLB01FEQf4vKhBxT18j0000b2e6@gatein.pzuzycie.com.pl>
	<FFAFD6EA63A3FC4784FBDA52BE7A7C95018429B9@PINK.zycie.pzu>
Message-ID: <9257026e0810310329h4abea901rf40e4991f5c385e1@mail.gmail.com>

On Fri, Oct 31, 2008 at 10:41 AM, Horodyski Marek (PZUZ)
<M.Horodyski@pzuzycie.com.pl> wrote:

> Now one new thread (with own GT and RDD) in Harbour chuck ca. 100 kb.
> RAM (and not groved for session). It is more (not many) than session in
> ...
> New thread from Harbour giv new aplicattion and process stil one (one
> process have many aplication).

Many thanks for your confirmations.
I also have the strong feeling that Harbour is on the right track.

I'll start to do some tests.

best regards,
Lorenzo
From sscc at mweb.co.za  Fri Oct 31 06:51:11 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Oct 31 06:51:38 2008
Subject: [Harbour] Tone
Message-ID: <490AE31F.3000000@mweb.co.za>

To all

Can anyone tell me what the behaviour of the tone() function is when 
using GTGUI (specifically with HWGUI).

Regards
Alex
From druzus at acn.waw.pl  Fri Oct 31 07:03:04 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 31 07:02:33 2008
Subject: [Harbour] MT extensions
In-Reply-To: <2386af1b0810310211r1f27f5d5o1cfda39ecbd4de2c@mail.gmail.com>
References: <20081029163752.GA8772@34-mo7-2.acn.waw.pl>
	<AF7287B9-E32B-49DE-A5F5-2C7A10B12192@syenar.hu>
	<20081031000119.GA24870@34-mo7-2.acn.waw.pl>
	<2386af1b0810310211r1f27f5d5o1cfda39ecbd4de2c@mail.gmail.com>
Message-ID: <20081031110303.GA22253@34-mo7-2.acn.waw.pl>

On Fri, 31 Oct 2008, Saulius Zrelskis wrote:

Hi Saulius,

> > CRITICAL FUNCTION | PROCEDURE probably is quite easy
> > to understand term in current days. If you do not like
> > it then instead of creating sth new like MUTEX FUNCTION |
> > PROCEDURE I'd prefer to use MONITOR FUNCTION | PROCEDURE
> > but I do not know how it will look for native English
> > speakers when FUNCTION or PROCEDURE will be added to
> > MONITOR word.
> > Opinions?
> There is quite interesting reading in Free E-book: Threading in C#
> http://www.albahari.com/threading/
> Maybe it gives some thoughts?

I've just read it and I can only say that the terminology used
in C# only increase the communication problem. In C# MONITOR
is SIGNAL object but SIGNAL method is called PULSE. MUTEXes can
also synchronize processes. It's probably side effect of their
internal implementation based on SEMAPHOREs so for fast mutual
exclusion (FUTEXes) they LOCK was introduced.
Sometimes I think that MS make such things intentionally :-(
So the question is open.
Personally I vote to not reinvent a wheel and not introduce new
terms. If possible we should not participate in this terminology
noise.
MUTEX FUNCTION | PROCEDURE will be also crypted for some people.
MUTEX and modifications like FUTEX are quite new terms and
some people do not know them, f.e. Marek knows SEMAPHORE but
didn't know MUTEX when it's nothing more then TWO STATE SEMAPHORE
sometimes called BINARY SEMAPHORE usually reduced to single process
synchronization for better performance (with some exceptions like
C# ;-))
If someone has some other propositions then I'm waiting. English
is not my native language and it's highly possible that my own
preferences will not be well accepted.

best regards,
Przemek
From mbelgrano at deltain.it  Fri Oct 31 07:06:28 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Oct 31 07:06:43 2008
Subject: R: [Harbour] One executable 500 threads
In-Reply-To: <9257026e0810310020p5ae7cedtdbaf4a312e520f0f@mail.gmail.com>
References: <9257026e0810310020p5ae7cedtdbaf4a312e520f0f@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F11B@SRV02.deltain.net>

What happen to public and static var after your merge?
One process will corrupt value to another?

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Lorenzo Fiorini
Inviato: venerd? 31 ottobre 2008 8.20
A: Harbour Project Main Developer List.
Oggetto: [Harbour] One executable 500 threads

Our desktop application "suite" is made by these modules:

- Accounting
- Business ( sales, purchases, inventory, ... )
- CRM
- Reporting
- List prices
- Job management

they share large part of the code and are always built together.
We wanted different executable to have different windows so that every
user can have the needed mix of the modules opened at the same time.

Now we have MT also for GT, so the first thing I would like to try is
to put all the modules in the same executable and add a paramater to
run the wanted module:
f.e. from acc.exe, crm.exe, bus.exe to suite.exe -acc suite.exe -crm
-suite.exe -bus

as far as I understand this will not change anything but we'll have
only one exe to deploy.
Is it true?

Next step.

Our executables are also rpc servers, this means that 100 users x 6
modules gives 300-600 TCP ports opened depending on usage mix.

Is it insane to think about having only one executable with only one
TCP port that manage 500 completely isolated threads?
I mean every thread with its 100 tables opened all the vars allocated and so on?

best regards,
Lorenzo
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From dmacias at mail.udg.mx  Fri Oct 31 07:07:53 2008
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Oct 31 07:07:54 2008
Subject: [Harbour] Re: Harbour under OS/2
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <490AE709.6090007@mail.udg.mx>

[Viktor]
 >Okay I just saw the rest. Since the fix is very
 >easy in I guess in almost all of these places
 >(I've added '( PSZ )' casts to certain OS/2 API
 >calls, where signedness was not matching), I'd
 >kindly ask you to finish the remaining places.

 >Also, I'm afraid I could have created problems for
 >other versions / brands of OS/2 C compilers, since
 >these seem to be new warnings. Can't really judge
 >this from here.

I do not know the right answer too
Maurilio, this is the right way ?

 >hbverbld.h is a dynamically generated file, so
 >for some reason it wasn't created. Pbly hbpp
 >isn't built or something alike, like hbcommon.lib
 >build problem which often causes the former.

Yes, hbpp is not created due to "ld.exe: emxbind failed"

[Przemek]
 > It's OK. The older GCC version do not report warning
 > when unsigned char/signed char string are passed.
 > All this warning should be cleaned because for C++
 > compiler it will be error. PSZ casting is usually correct
 > though it will be good to check real functions declarations
 > in header files or in the internet.

You are correct, at least in OS/2-gcc335 it does not raise these warnings
It should be cleaned in OS/2 in particular or all platforms ? I still do 
not know if these warnings happen in Linux/gcc43x

 > I also suggest for OS2 users to add OpenWatcom port.
 > It's also C++ compiler with very long OS2 history.
 > It should greatly help to clean the code and maybe will
 > be better alternative then GCC. It should be quite easy
 > to do and it will nicely force cleaning all places where
 > HB_OS_OS2 macro is used to cover GCC only code.
 > It will give yet another feature. OpenWatcom can be used
 > as cross compiler so using one platform it will be possible
 > to create DOS, MS-Windows, OS2 and Linux binaries (though
 > Linux version needs some minor updates). If someone is
 > interested in creating OpenWatcom OS2 Harbour port then I can
 > prepare scripts for cross building and check current OpenWatcom
 > state and if it's still necessary send some Linux patches to
 > authors.

Yes I am "interested in creating OpenWatcom OS2 Harbour port"
I have heard about OpenWatcom on OS/2 long time ago and collected some 
packages, trying to test cross-platform builds for Harbour

In middle August 2008 I installed (for Harbour 1.0):
   Open Watcom C/C++ Version 1.7
and surprisely is a great package:
   IDE, SourceBrowse, Profiler, Debugger, ...
in 164 Mbytes directory

But I do not know how to use it  :-)

I was searching in harbour\config and found:
  harbour\config\dos\owatcom.cf
  harbour\config\linux\owatcom.cf
  harbour\config\w32\owatcom.cf
  harbour\config\dos\watcom.cf
  harbour\config\w32\watcom.cf

with different content and not for OS/2, and a merge of them was unuseful

So if you can prepare owatcom.cf for OS/2 and / or cross building let me 
know to test it
I do not send request in August for not disturb Harbour developers works

[Viktor]
 > I'd be very happy if our valued OS/2 developers (David
 > and Maurilio apparently) could directly address these
 > issues in the repository. It's really not a big deal
 > to do for most of the issues, and it'd be much sleeker
 > to do the testing in one pass, also freeing other
 > developers to deal with other things.

Clarifications:
- I do not know C or anything related
   I should not touch C code
   Recently ALinares helped me to found a problem with Harbour/C and I 
have it pending to report to Harbour group
- For Harbour, I am:
     Builder, tester, prg level developer, end user
   and Maurilio is:
     Builder, tester, prg level developer, end user, C level developer, 
know/understand OS/2 internals, Harbour architect, .., and recently a 
happy member of growing world of Mac users   :-)
... and as Harbour crew page said:
     "OS/2 Pirate and Harbour sailor."

so differences in capabilities can be seen from any side


As current OS/2-gcc432 can not create hbpp, harbour.exe, ... I made a 
small trick to know how long build Harbour work under this version: I 
created Harbour with gcc335 and copied resulting harbour.exe to use with 
gcc432
Results are good

- Just remain warnings of type "differ in signedness"
   Below are results included

- Libraries created were allmost everything:

Directory of E:\harbour810\harbour\lib\os2\gcc

31/10/08  3:56a        55,666    124 a---  hbcommon.a
31/10/08  3:58a       356,690    124 a---  hbcplr.a
31/10/08  4:10a     2,147,544    124 a---  hbrtl.a
31/10/08  4:10a         2,974    124 a---  gtcgi.a
31/10/08  4:10a        11,004    124 a---  gtos2.a
31/10/08  4:10a        10,466    124 a---  gtpca.a
31/10/08  4:10a         5,400    124 a---  gtstd.a
31/10/08  4:13a       412,888    124 a---  hbvm.a
31/10/08  4:15a       441,720    124 a---  hbvmmt.a
31/10/08  4:15a        68,872    124 a---  hbmacro.a
31/10/08  4:18a        48,498    124 a---  hbcpage.a
31/10/08  4:21a       246,914    124 a---  hblang.a
31/10/08  4:23a       242,874    124 a---  hbrdd.a
31/10/08  4:23a         4,890    124 a---  hbnulrdd.a
31/10/08  4:24a       103,424    124 a---  rddntx.a
31/10/08  4:24a       221,418    124 a---  rddcdx.a
31/10/08  4:24a        46,182    124 a---  rddfpt.a
31/10/08  4:25a        80,324    124 a---  hbsix.a
31/10/08  4:25a        19,024    124 a---  hbhsx.a
31/10/08  4:25a        71,430    124 a---  hbusrrdd.a
31/10/08  4:25a        82,068    124 a---  hbextern.a
31/10/08  4:27a       158,786    124 a---  hbpcre.a
31/10/08  4:27a        67,842    124 a---  hbzlib.a
31/10/08  4:28a       783,268    124 a---  hbdebug.a
31/10/08  4:34a       230,076    124 a---  hbbmcdx.a
31/10/08  4:34a        35,078    124 a---  hbbtree.a
31/10/08  4:34a        13,070    124 a---  hbclipsm.a
31/10/08  4:39a       253,340    124 a---  hbct.a
31/10/08  4:39a        60,800    124 a---  hbgfos2.a
31/10/08  4:40a         9,226    124 a---  hbgt.a
31/10/08  4:41a        91,520    124 a---  hbmisc.a
31/10/08  4:41a        36,938    124 a---  hbmzip.a
31/10/08  4:48a       697,766    124 a---  hbnf.a
31/10/08  4:49a       844,698    124 a---  hbtip.a
31/10/08  4:50a        39,936    124 a---  hbtpathy.a
31/10/08  4:50a       517,430    124 a---  hbvpdf.a
31/10/08  4:50a        25,134    124 a---  hbziparc.a
31/10/08  4:52a       262,652    124 a---  xhb.a
31/10/08  4:52a        77,088    124 a---  hbmsql.a
        39 file(s)   8,884,918 bytes used

David Macias

------------------
emxbind: invalid a.out file (startup code)
ld.exe: emxbind failed

make[3]: *** [hbpp.exe] Error 1
make[2]: *** [descend] Error 2
ld.exe: No such file or directory for hbpp
make[3]: *** [harbour.exe] Error 1
make[2]: *** [descend] Error 2
../../hbffind.c: In function 'hb_fsFindNextLow':
../../hbffind.c:521: warning: pointer targets in passing argument 1 of 
'DosFindFirst' differ in signedness
../../hbinet.c: In function 'HB_FUN_HB_INETACCEPT':
../../hbinet.c:1758: warning: pointer targets in passing argument 3 of 
'accept' differ in signedness
../../gtstd.c: In function 'hb_gt_std_ReadKey':
../../gtstd.c:389: warning: unused variable 'TODO'
../../dynlibhb.c: In function 'HB_FUN_HB_LIBLOAD':
../../dynlibhb.c:104: warning: pointer targets in passing argument 3 of 
'DosLoadModule' differ in signedness
../../../dynlibhb.c: In function 'HB_FUN_HB_LIBLOAD':
../../../dynlibhb.c:104: warning: pointer targets in passing argument 3 
of 'DosLoadModule' differ in signedness
../../files.c: In function 'HB_FUN_SETFDATI':
../../files.c:273: warning: pointer targets in passing argument 1 of 
'DosQueryPathInfo' differ in signedness
../../files.c:308: warning: pointer targets in passing argument 1 of 
'DosSetPathInfo' differ in signedness
../../os2pm.c: In function 'HB_FUN_WINREGISTERCLASS':
../../os2pm.c:113: warning: pointer targets in passing argument 2 of 
'WinRegisterClass' differ in signedness
../../os2pm.c: In function 'HB_FUN_WINCREATESTDWINDOW':
../../os2pm.c:148: warning: pointer targets in passing argument 4 of 
'WinCreateStdWindow' differ in signedness
../../os2pm.c:148: warning: pointer targets in passing argument 5 of 
'WinCreateStdWindow' differ in signedness
../../os2pm.c: In function 'HB_FUN_WINSETWINDOWTEXT':
../../os2pm.c:180: warning: pointer targets in passing argument 2 of 
'WinSetWindowText' differ in signedness
../../os2pm.c: In function 'HB_FUN_WINGETTEXT':
../../os2pm.c:189: warning: pointer targets in passing argument 1 of 
'hb_retc' differ in signedness
../../os2pm.c: In function 'HB_FUN_MSGINFO':
../../os2pm.c:196: warning: pointer targets in initialization differ in 
signedness
../../os2pm.c:199: warning: pointer targets in passing argument 3 of 
'WinMessageBox' differ in signedness
../../hbmzip.c: In function 'hb_zipStoreFile':
../../hbmzip.c:748: warning: pointer targets in passing argument 1 of 
'DosQueryPathInfo' differ in signedness
../../hbmzip.c: In function 'hb_unzipExtractCurrentFile':
../../hbmzip.c:1049: warning: pointer targets in passing argument 1 of 
'DosQueryPathInfo' differ in signedness
../../hbmzip.c:1067: warning: pointer targets in passing argument 1 of 
'DosSetPathInfo' differ in signedness
------------------


From druzus at acn.waw.pl  Fri Oct 31 07:09:30 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 31 07:08:59 2008
Subject: [Harbour] wince (wcecon not ruuning on PocketPc)
In-Reply-To: <20259457.post@talk.nabble.com>
References: <20236568.post@talk.nabble.com>
	<20081029221836.GA20510@34-mo7-2.acn.waw.pl>
	<20251189.post@talk.nabble.com>
	<20081031014729.GB24870@34-mo7-2.acn.waw.pl>
	<20259457.post@talk.nabble.com>
Message-ID: <20081031110930.GB22253@34-mo7-2.acn.waw.pl>

On Thu, 30 Oct 2008, Pritpal Bedi wrote:

Hi Pritpal

> I am looking into it but so far have not got any clue what went wrong.

Thank you.

> Yes. hb_gt_wvt_MouseEvent() has defined two statics. I will fix them in a
> while.
> But probably this is not the cause of WinCE failure.

For sure it's not the reason but it has to be fixed.

> I will be looking into multiple calls to CreateFontIndirect().
> May be flickering is caused by this factor alone, I am not sure.

It can be caused also by drawing the window and then resizing and
repositioning. All this operations should be grouped together.
Unfortunately now I can make test only with WINE and I do not
want to hardcode sth what will work correctly only with WINE
due to some small difference in emulations. In next week I can
make some tests with genuine MS-Windows computer so maybe I can
help.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct 31 07:11:56 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 31 07:11:26 2008
Subject: [Harbour] Tone
In-Reply-To: <490AE31F.3000000@mweb.co.za>
References: <490AE31F.3000000@mweb.co.za>
Message-ID: <20081031111156.GC22253@34-mo7-2.acn.waw.pl>

On Fri, 31 Oct 2008, Alex Strickland wrote:

Hi Alex,

> Can anyone tell me what the behaviour of the tone() function is when using 
> GTGUI (specifically with HWGUI).

The same as in GTWIN and GTWVT. All shares the same low level TONE() code.

best regards,
Przemek
From sscc at mweb.co.za  Fri Oct 31 07:19:12 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Oct 31 07:19:37 2008
Subject: [Harbour] Tone
In-Reply-To: <490AE31F.3000000@mweb.co.za>
References: <490AE31F.3000000@mweb.co.za>
Message-ID: <490AE9B0.6010504@mweb.co.za>

Alex Strickland wrote:

> Can anyone tell me what the behaviour of the tone() function is when 
> using GTGUI (specifically with HWGUI).

Hmm, I looked and it seems like it should work ok. However, at the 
moment it doesn't (using 1.0.1).

Regards
Alex

From sscc at mweb.co.za  Fri Oct 31 07:36:49 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Oct 31 07:37:13 2008
Subject: [Harbour] Tone
In-Reply-To: <20081031111156.GC22253@34-mo7-2.acn.waw.pl>
References: <490AE31F.3000000@mweb.co.za>
	<20081031111156.GC22253@34-mo7-2.acn.waw.pl>
Message-ID: <490AEDD1.5060506@mweb.co.za>

Przemyslaw Czerpak wrote:
> On Fri, 31 Oct 2008, Alex Strickland wrote:
> 
> Hi Alex,
> 
>> Can anyone tell me what the behaviour of the tone() function is when using 
>> GTGUI (specifically with HWGUI).
> 
> The same as in GTWIN and GTWVT. All shares the same low level TONE() code.

Thanks. It is not working for me, but when I replaced the TONE() call 
with BEEP() and added:

HB_FUNC( BEEP )
{
   hb_retl( Beep( hb_parnl(1), hb_parnl(2) * 55 /* 1000 / 18.2 */) ) ;
}

it works ok, so perhaps there is a problem in there.

Regards
Alex
From harbour.01 at syenar.hu  Fri Oct 31 07:40:36 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 31 07:40:47 2008
Subject: [Harbour] MT extensions
In-Reply-To: <20081031110303.GA22253@34-mo7-2.acn.waw.pl>
References: <20081029163752.GA8772@34-mo7-2.acn.waw.pl>
	<AF7287B9-E32B-49DE-A5F5-2C7A10B12192@syenar.hu>
	<20081031000119.GA24870@34-mo7-2.acn.waw.pl>
	<2386af1b0810310211r1f27f5d5o1cfda39ecbd4de2c@mail.gmail.com>
	<20081031110303.GA22253@34-mo7-2.acn.waw.pl>
Message-ID: <55FD49ED-AD56-40B3-8B0E-35D28F7DDD62@syenar.hu>

We shouldn't be in sync with C# terminology at all.
It's a completely different product.

If we have MUTEX (== lock in C#) and SEMAPHORE
in Harbour, this is IMO fine. These are pretty well
known names. "lock" is IMO very generic, can mean
many things.

I we are to support mutex/semaphore with
wider-than-process scope (f.e. to limit number of
instances of a given app on a given computer or
on a network), we may brainstorm some more to
reserve terms for these features, but other than
that the above seem fine.

Brgds,
Viktor

On 2008.10.31., at 12:03, Przemyslaw Czerpak wrote:

> On Fri, 31 Oct 2008, Saulius Zrelskis wrote:
>
> Hi Saulius,
>
>>> CRITICAL FUNCTION | PROCEDURE probably is quite easy
>>> to understand term in current days. If you do not like
>>> it then instead of creating sth new like MUTEX FUNCTION |
>>> PROCEDURE I'd prefer to use MONITOR FUNCTION | PROCEDURE
>>> but I do not know how it will look for native English
>>> speakers when FUNCTION or PROCEDURE will be added to
>>> MONITOR word.
>>> Opinions?
>> There is quite interesting reading in Free E-book: Threading in C#
>> http://www.albahari.com/threading/
>> Maybe it gives some thoughts?
>
> I've just read it and I can only say that the terminology used
> in C# only increase the communication problem. In C# MONITOR
> is SIGNAL object but SIGNAL method is called PULSE. MUTEXes can
> also synchronize processes. It's probably side effect of their
> internal implementation based on SEMAPHOREs so for fast mutual
> exclusion (FUTEXes) they LOCK was introduced.
> Sometimes I think that MS make such things intentionally :-(
> So the question is open.
> Personally I vote to not reinvent a wheel and not introduce new
> terms. If possible we should not participate in this terminology
> noise.
> MUTEX FUNCTION | PROCEDURE will be also crypted for some people.
> MUTEX and modifications like FUTEX are quite new terms and
> some people do not know them, f.e. Marek knows SEMAPHORE but
> didn't know MUTEX when it's nothing more then TWO STATE SEMAPHORE
> sometimes called BINARY SEMAPHORE usually reduced to single process
> synchronization for better performance (with some exceptions like
> C# ;-))
> If someone has some other propositions then I'm waiting. English
> is not my native language and it's highly possible that my own
> preferences will not be well accepted.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Oct 31 07:51:38 2008
From: harbour.01 at syenar.hu (=?WINDOWS-1252?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 31 07:51:46 2008
Subject: [Harbour] Re: Harbour under OS/2
In-Reply-To: <490AE709.6090007@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<490AE709.6090007@mail.udg.mx>
Message-ID: <17B5232A-07AB-4B6C-BB97-F3301F50AC0F@syenar.hu>

>
Hi David,

> You are correct, at least in OS/2-gcc335 it does not raise these  
> warnings
> It should be cleaned in OS/2 in particular or all platforms ? I  
> still do not know if these warnings happen in Linux/gcc43x

These are all warnings inside #ifdef HB_OS_OS2 protected
code sections, so the answer is no.

> I was searching in harbour\config and found:
> harbour\config\dos\owatcom.cf
> harbour\config\linux\owatcom.cf
> harbour\config\w32\owatcom.cf
> harbour\config\dos\watcom.cf
> harbour\config\w32\watcom.cf
>
> with different content and not for OS/2, and a merge of them was  
> unuseful
>
> So if you can prepare owatcom.cf for OS/2 and / or cross building  
> let me know to test it
> I do not send request in August for not disturb Harbour developers  
> works

I think for a start it's enough if you grab one of the
existing watcom.cf files and copy it to the /config/os2
dir and start experimenting with it.

> Clarifications:
> - I do not know C or anything related
>  I should not touch C code
>  Recently ALinares helped me to found a problem with Harbour/C and I  
> have it pending to report to Harbour group
> - For Harbour, I am:
>    Builder, tester, prg level developer, end user
>  and Maurilio is:
>    Builder, tester, prg level developer, end user, C level  
> developer, know/understand OS/2 internals, Harbour architect, ..,  
> and recently a happy member of growing world of Mac users   :-)

Congrats for that and welcome to the club :)

> ... and as Harbour crew page said:
>    "OS/2 Pirate and Harbour sailor."
>
> so differences in capabilities can be seen from any side

I'm not a C programmer either. It's simply not very effective
if ppl without access to a given platform are asked to maintain
that platform.

Most OS/2 problem I was dealing with were pretty simple to get
by without deep C knowledge. (not to mention OS/2 build file
maintenance).

In this case it takes adding '( PSZ )' cast to the lines and
argument numbers the OS/2 GCC is listing in its warnings.

Brgds,
Viktor

From sscc at mweb.co.za  Fri Oct 31 07:51:37 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Oct 31 07:52:04 2008
Subject: [Harbour] MT extensions
In-Reply-To: <20081031000119.GA24870@34-mo7-2.acn.waw.pl>
References: <20081029163752.GA8772@34-mo7-2.acn.waw.pl>	<AF7287B9-E32B-49DE-A5F5-2C7A10B12192@syenar.hu>
	<20081031000119.GA24870@34-mo7-2.acn.waw.pl>
Message-ID: <490AF149.8060204@mweb.co.za>

Przemyslaw Czerpak wrote:

> CRITICAL FUNCTION | PROCEDURE probably is quite easy
> to understand term in current days. 
> Opinions?

I like it, it immediately made me think of "critical sections", and 
when I looked them up on Wikipedia it said:

"In concurrent programming a critical section is a piece of code that 
accesses a shared resource (data structure or device) that must not be 
concurrently accessed by more than one thread of execution."

which matches your intent well I think.

2c

Alex
From druzus at acn.waw.pl  Fri Oct 31 07:53:46 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 31 07:53:15 2008
Subject: [Harbour] Re: Harbour under OS/2
In-Reply-To: <490AE709.6090007@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<490AE709.6090007@mail.udg.mx>
Message-ID: <20081031115346.GA30855@34-mo7-2.acn.waw.pl>

On Fri, 31 Oct 2008, David Arturo Macias Corona wrote:

Hi David,

> You are correct, at least in OS/2-gcc335 it does not raise these warnings
> It should be cleaned in OS/2 in particular or all platforms ? I still do 
> not know if these warnings happen in Linux/gcc43x

It also rises these type of warnings - it depends on GCC version.
But in this case the code is local to OS2 and only on this platform
warnings can appear and it's the reason why we cannot easy catch
and clean them. Cross build environment can resolve such problems.

> Yes I am "interested in creating OpenWatcom OS2 Harbour port"
> I have heard about OpenWatcom on OS/2 long time ago and collected some 
> packages, trying to test cross-platform builds for Harbour
> In middle August 2008 I installed (for Harbour 1.0):
>   Open Watcom C/C++ Version 1.7
> and surprisely is a great package:
>   IDE, SourceBrowse, Profiler, Debugger, ...
> in 164 Mbytes directory
> But I do not know how to use it  :-)

copy config/w32/owatcom.cf to config/os2/owatcom.cf
and update it for OS2 builds. At least these lines should be changed:
[19]: CPPFLAGS = -w2 -d1 -zq -bt=NT
[56]: echo @%watcom%/binnt/wlink.lnk >> __link__.tmp
[57]: echo LIB kernel32.lib, user32.lib, wsock32.lib, winspool.lib, oleaut32.lib, uuid.lib, comctl32.lib, mapi32.lib >> __link__.tmp
[62]: LDFLAGS = debug all OP osn=NT OP stack=65536 OP CASEEXACT

for OS2 builds. You will have to update -bt=NT and osn=NT,
directory with wlink.lnk (or maybe you can remove this line) and
library list. I suggest to start with removing lines 56 and 57 and then
try to add libraries if linker will report unresolved dependencies.
But 1-st Harbour will have to be updated for clean compilation.
I expect that you will see some errors. Please report them.
To compile Harbour set:

   rem update this path to real OpenWatcom location
   set WATCOM=C:\LNG\WATCOM
   rem In OS2 probably BINW and BINNT have different name, please check
   set PATH=%WATCOM%\BINW;%PATH%
   set INCLUDE=%WATCOM%\H;%WATCOM%\H\OS2

   set HB_ARCHITECTURE=OS2
   set HB_COMPILER=owatcom

and then use GNU make to build harbour just like for GCC builds.

> - Just remain warnings of type "differ in signedness"
>   Below are results included

I'll pacify them, please test when I'll commit.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct 31 08:01:05 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 31 08:00:34 2008
Subject: [Harbour] Tone
In-Reply-To: <490AE9B0.6010504@mweb.co.za>
References: <490AE31F.3000000@mweb.co.za> <490AE9B0.6010504@mweb.co.za>
Message-ID: <20081031120105.GB30855@34-mo7-2.acn.waw.pl>

On Fri, 31 Oct 2008, Alex Strickland wrote:

Hi Alex,

>> Can anyone tell me what the behaviour of the tone() function is when using 
>> GTGUI (specifically with HWGUI).
> Hmm, I looked and it seems like it should work ok. However, at the moment 
> it doesn't (using 1.0.1).

Probably you haven't set GTGUI as your default GT driver.
Add to your souce code:

   ANNOUNCE HB_GTSYS          // disable linking default GT driver
   REQUEST HB_GT_GUI_DEFAULT  // force linking GTGUI and set it as default

and then for test:

   Tone( 100, 3 )
   Tone( 200, 2 )
   Tone( 300, 1 )
   MessageBox( hb_gtVersion() + ": " + hb_gtVersion(1) )

BTW HWGUI should have it's own GT driver which will support such
functionality (it can inherit from GTGUI) and redirect some GT output
to some active window(s). In such way it will be possible to used
Clipper standard output functions.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct 31 08:54:28 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 31 08:54:00 2008
Subject: [Harbour] 2008-10-31 13:54 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081031125428.GA9999@34-mo7-2.acn.waw.pl>

2008-10-31 13:54 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/dynlibhb.c
  * harbour/source/common/hbgete.c
  * harbour/source/common/hbfsapi.c
  * harbour/source/rtl/hbinet.c
  * harbour/source/rtl/hbffind.c
  * harbour/source/rtl/filesys.c
  * harbour/contrib/hbct/files.c
  * harbour/contrib/hbmzip/hbmzip.c
  * harbour/contrib/hbgf/hbgfos2/os2pm.c
    * cleanup casting in OS2 builds (use PCSZ/PSZ)

best regards
Przemek
From hernad at sigma-com.net  Fri Oct 31 09:01:23 2008
From: hernad at sigma-com.net (Ernad Husremovic)
Date: Fri Oct 31 09:01:32 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <12590784.7291225458053594.JavaMail.root@zimbra-1.sigma-com.net>
Message-ID: <30486278.7311225458083884.JavaMail.root@zimbra-1.sigma-com.net>

Lorenzo wrote:
> 
> I'll try to create a screencast.
> 
> BTW who knows simple and free screencast apps for Windows and Mac OS
> X?

http://www.jingproject.com/

Regards,
Ernad
From harbour.01 at syenar.hu  Fri Oct 31 09:23:08 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 31 09:23:14 2008
Subject: [Harbour] MT extensions
In-Reply-To: <490AF149.8060204@mweb.co.za>
References: <20081029163752.GA8772@34-mo7-2.acn.waw.pl>	<AF7287B9-E32B-49DE-A5F5-2C7A10B12192@syenar.hu>
	<20081031000119.GA24870@34-mo7-2.acn.waw.pl>
	<490AF149.8060204@mweb.co.za>
Message-ID: <A2891661-0415-4930-8753-651EE7F87647@syenar.hu>

Then we should probably also have hb_criticalsection*()
functions instead of hb_mutex*() to not use two different
terminologies in different parts of Harbour.

Critical is a programming terminology from a lower level
perspective (I wouldn't want to elaborate on the possible
roots of the term, but it looks to originate from low level
OS programming), and there, critical may indeed mean critical,
but in Harbour .prg level this looks like a way too harsh
word and seems to be somewhat disconnected from the world
of such a high level programming language. "critical section"
seems to mean a subset of the more generic term "mutex".

No wonder high level languages (C#/Java/XBase++) don't use
the "critical section" terminology.

If you read the wikipedia article to the end, it turns out
that POSIX calls "critical sections" simply "mutex", and
the only cited example where it's called "critical sections"
is in Windows itself, which is an operating system, where
such name can even have a real meaning on that low level.
They've probably named it that way because they've used
up "mutex" for the inter-process variation. (this is in
sync with C#, but there they've named intra-process,
aka 'critical sections' ones simply 'locks', probably for
similar reason I'm trying to show).

Also, "critical" by itself doesn't mean anything above, it's
always used in conjunction with "section", so the term
is "critical section". If we say "critical function/procedure",
or just "critical" as a single word, to me it looks something
completely different.

Java uses the keyword "mutexed" which IMO tells it best
that a given object is automatically protected by a mutex.

Brgds,
Viktor

On 2008.10.31., at 12:51, Alex Strickland wrote:

> Przemyslaw Czerpak wrote:
>
>> CRITICAL FUNCTION | PROCEDURE probably is quite easy
>> to understand term in current days. Opinions?
>
> I like it, it immediately made me think of "critical sections", and  
> when I looked them up on Wikipedia it said:
>
> "In concurrent programming a critical section is a piece of code  
> that accesses a shared resource (data structure or device) that must  
> not be concurrently accessed by more than one thread of execution."
>
> which matches your intent well I think.
>
> 2c
>
> Alex
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From dbtopas at dbtopas.lt  Fri Oct 31 10:02:29 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Oct 31 10:02:36 2008
Subject: [Harbour] MT extensions
In-Reply-To: <1B4F9ECC-A5F9-42E1-A033-AAC13410D760@syenar.hu>
References: <20081029163752.GA8772@34-mo7-2.acn.waw.pl>	<AF7287B9-E32B-49DE-A5F5-2C7A10B12192@syenar.hu>	<20081031000119.GA24870@34-mo7-2.acn.waw.pl>
	<1B4F9ECC-A5F9-42E1-A033-AAC13410D760@syenar.hu>
Message-ID: <490B0FF5.1090909@dbtopas.lt>

> Maybe I'm misunderstanding the purpose. To me proposed
> "CRITICAL" looks like a way to avoid getting the execution
> to the same code section twice. For example I would use it
> for a very simple purpose (I already use similar technique
> there currently), to avoid starting my small calculator
> applet twice in my app (reason unimportant). Now, the
> calculator code itself is far from being "CRITICAL" in any
> sense, yet I'd like to avoid reentering the code.
> 
> Again maybe I misunderstand something, but the fact
> that a given code section is desired to be protected
> with MUTEXes, doesn't automatically mean that this
> code section is "CRITICAL" in the meaning of the word
> "critical".
> 
> MONITOR is even more cryptic to me :)

Hi,


one more proposition: SYNC[HRONIZED]


Best regards,
Mindaugas
From dbtopas at dbtopas.lt  Fri Oct 31 10:06:51 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Oct 31 10:06:56 2008
Subject: [Harbour] 2008-10-28 01:52 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <01c938a3$Blat.v2.6.2$bd55e01a$5545f04fd56@127.0.0.1>
References: <01c938a3$Blat.v2.6.2$bd55e01a$5545f04fd56@127.0.0.1>
Message-ID: <490B10FB.3040908@dbtopas.lt>

>     + Added HB_VERSION() unified version information 
>       function. This can return these version related data:
>       hb_version( HB_V_HARBOUR )        => <string>
>       hb_version( HB_V_COMPILER )       => <string> 
>       hb_version( HB_V_MAJOR )          => <num> 
>       hb_version( HB_V_MINOR )          => <num> 
>       hb_version( HB_V_REV )            => <num> 
>       hb_version( HB_V_STATUS )         => <string> 
>       hb_version( HB_V_COUNT )          => <num> 
>       hb_version( HB_V_DATE_TIME )      => <string> 
>       hb_version( HB_V_DATE )           => <date> 
>       hb_version( HB_V_TIME )           => <string>

Hi,


I would change _REV, _DATE, _TIME to less cryptic _REVISION, 
_BUILD_DATE, _BUILD_TIME. And _V_ to _VER_ for the same reason. It's 
just an idea, could be ignored.

BTW, what is HB_V_COUNT?


Best regards,
Mindaugas

From bedipritpal at hotmail.com  Fri Oct 31 10:21:04 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Oct 31 10:21:11 2008
Subject: [Harbour] 2008-10-30 21:24 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <93F8259A-6143-4A3F-B66B-6CB3958877F1@syenar.hu>
References: <20260081.post@talk.nabble.com>
	<93F8259A-6143-4A3F-B66B-6CB3958877F1@syenar.hu>
Message-ID: <20266927.post@talk.nabble.com>


Hello Viktor


Szak?ts Viktor wrote:
> 
> It looks your changes didn't make it into the
> repository for some reason. Could you check it?
> 

Uploaded. 

But sure I do not know why it happened. Some misbehavior of SVN.
Or may be I missed something.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/2008-10-30-21%3A24-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20260081p20266927.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Fri Oct 31 10:26:52 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 31 10:27:01 2008
Subject: [Harbour] 2008-10-28 01:52 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <490B10FB.3040908@dbtopas.lt>
References: <01c938a3$Blat.v2.6.2$bd55e01a$5545f04fd56@127.0.0.1>
	<490B10FB.3040908@dbtopas.lt>
Message-ID: <951542DE-5D31-4049-AD0C-8563A6F68DFB@syenar.hu>

>>    + Added HB_VERSION() unified version information       function.  
>> This can return these version related data:
>>      hb_version( HB_V_HARBOUR )        => <string>
>>      hb_version( HB_V_COMPILER )       => <string>        
>> hb_version( HB_V_MAJOR )          => <num>        
>> hb_version( HB_V_MINOR )          => <num>        
>> hb_version( HB_V_REV )            => <num>        
>> hb_version( HB_V_STATUS )         => <string>        
>> hb_version( HB_V_COUNT )          => <num>        
>> hb_version( HB_V_DATE_TIME )      => <string>        
>> hb_version( HB_V_DATE )           => <date>        
>> hb_version( HB_V_TIME )           => <string>
>
> Hi,
>
>
> I would change _REV, _DATE, _TIME to less cryptic _REVISION,  
> _BUILD_DATE, _BUILD_TIME. And _V_ to _VER_ for the same reason. It's  
> just an idea, could be ignored.

HB_VER_* was already used on the C level for slightly
different meaning. But that was my first choice before
I realized. I don't like HB_V_ either.

HB_VERSION_* could also be good, but it's pretty long.

Or I can check what it'd take to rename C level HB_VER_*
to something else.

> BTW, what is HB_V_COUNT?

SVN revision. We can change it, but we need something
which doesn't contain the name of our versioning software.

Maybe HB_VERSION_SEQUENCE, HB_VERSION_REVISION would
be the best, but we have a slight term problem with
"revision" because we're using it for the last part
of the version number, and sometimes as the SVN revision
no, like in (Rev. 9732).

Is there a better term for the last part of our
version number? In 1.0._1_ the last '1' digit.

So far to me it looks like the best would be to clean
the relatively internal HB_VER_* ones, and after that
I could normalize the HB_V_ ones.

Any further suggestion is welcome.

Brgds,
Viktor

From sscc at mweb.co.za  Fri Oct 31 10:27:00 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Oct 31 10:27:25 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <9257026e0810300947m39f8c85dg2e23277b592c3848@mail.gmail.com>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>	<C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03815F10A@SRV02.deltain.net>	<B59E8059-BCB8-4AC6-96D6-4D9F2403C7C2@syenar.hu>	<9257026e0810300718p5afd59feved0e46709e63bcc2@mail.gmail.com>	<4909CA41.8060001@mweb.co.za>
	<9257026e0810300947m39f8c85dg2e23277b592c3848@mail.gmail.com>
Message-ID: <490B15B4.3060103@mweb.co.za>

Lorenzo Fiorini wrote:
> The "server" evaluates the call and returns:
> - an xml file like <request field1="one",  field2="two", fieldn... />
> that is parsed by the standard DOM functions that in turn populate the
> UI

Kind of like a cut down version of SOAP?

> - a pdf, xls, rtf, csv from a report function that the browser opens
> I hope I was clear enough.

Yes. Thank you.

Regards
Alex
From harbour.01 at syenar.hu  Fri Oct 31 10:28:52 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 31 10:28:58 2008
Subject: [Harbour] 2008-10-30 21:24 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <20266927.post@talk.nabble.com>
References: <20260081.post@talk.nabble.com>
	<93F8259A-6143-4A3F-B66B-6CB3958877F1@syenar.hu>
	<20266927.post@talk.nabble.com>
Message-ID: <79330E7C-D5C9-4CF9-A6BA-97A7678FFFC0@syenar.hu>

Many thanks Pritpal.

I sometimes find myself modifying another (clean) local
copy of the SVN (which I exclusively use to 'grep' in the
source).

Brgds,
Viktor

On 2008.10.31., at 15:21, Pritpal Bedi wrote:

>
> Hello Viktor
>
>
> Szak?ts Viktor wrote:
>>
>> It looks your changes didn't make it into the
>> repository for some reason. Could you check it?
>>
>
> Uploaded.
>
> But sure I do not know why it happened. Some misbehavior of SVN.
> Or may be I missed something.
>
> Regards
> Pritpal Bedi
>
> -- 
> View this message in context: http://www.nabble.com/2008-10-30-21%3A24-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20260081p20266927.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Fri Oct 31 10:32:45 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 31 10:32:16 2008
Subject: [Harbour] MT extensions
In-Reply-To: <A2891661-0415-4930-8753-651EE7F87647@syenar.hu>
References: <20081029163752.GA8772@34-mo7-2.acn.waw.pl>
	<AF7287B9-E32B-49DE-A5F5-2C7A10B12192@syenar.hu>
	<20081031000119.GA24870@34-mo7-2.acn.waw.pl>
	<490AF149.8060204@mweb.co.za>
	<A2891661-0415-4930-8753-651EE7F87647@syenar.hu>
Message-ID: <20081031143245.GA18358@34-mo7-2.acn.waw.pl>

On Fri, 31 Oct 2008, Szak?ts Viktor wrote:

Hi Viktor,

> Then we should probably also have hb_criticalsection*()
> functions instead of hb_mutex*() to not use two different
> terminologies in different parts of Harbour.

I do not agree. The internal synchronization mechanism used
on low level is our own choice which should be tuned to
best .prg code performance and protection. We can internally
use different synchronization mechanism for functions and
.prg mutexes on some platforms. It's not user problem to guess
which ones.

> Critical is a programming terminology from a lower level
> perspective (I wouldn't want to elaborate on the possible
> roots of the term, but it looks to originate from low level
> OS programming), and there, critical may indeed mean critical,
> but in Harbour .prg level this looks like a way too harsh
> word and seems to be somewhat disconnected from the world
> of such a high level programming language. "critical section"
> seems to mean a subset of the more generic term "mutex".
> No wonder high level languages (C#/Java/XBase++) don't use
> the "critical section" terminology.

They do. They discribe code protected by synchronization mechanism
as CRITICAL SECTION.

> If you read the wikipedia article to the end, it turns out
> that POSIX calls "critical sections" simply "mutex", and

In POSIX documentation you can find that MUTEXes are synchronization
mechanism to guard CRITICAL SECTION of code, f.e. copy and past from
simple search:

    The prioceiling attribute defines the priority ceiling  of  initialized
    mutexes, which is the minimum priority level at which the critical sec-
    tion guarded by the mutex is  executed.  In  order  to  avoid  priority

> the only cited example where it's called "critical sections"
> is in Windows itself, which is an operating system, where
> such name can even have a real meaning on that low level.

Not true see above.

> They've probably named it that way because they've used
> up "mutex" for the inter-process variation. (this is in
> sync with C#, but there they've named intra-process,

I do not think so. When CRITICAL_SECTION was introduced to Windows
MUTEX was not well know term but CRITICAL SECTION was. Even today
many people prefer to use SEMAPHORE instead of MUTEX.

> aka 'critical sections' ones simply 'locks', probably for
> similar reason I'm trying to show).
> Also, "critical" by itself doesn't mean anything above, it's
> always used in conjunction with "section", so the term

or CODE or INTERRUPT or EXCEPTION or HANDLER or OPERATION or SERVICE ...
Some of them are used in very similar context to CRITICAL FUNCTION |
PROCEDURE.

> is "critical section". If we say "critical function/procedure",
> or just "critical" as a single word, to me it looks something
> completely different.

CRITICAL SECTION in informatics terms means peace of code which should
not be interrupted by other code/events.
In MT programming it was adopted as peace of code which can be entered
only by one thread. But in fact it's not common definition. This
term is also used to define peace of code which can be executed only
when all other threads or processes are stooped. It's also used to
define peace of code which cannot be interrupted by any exceptions
or OS scheduler.

> Java uses the keyword "mutexed" which IMO tells it best
> that a given object is automatically protected by a mutex.

I didn't know about it. Can you show the whole syntax?

best regards,
Przemek
From sscc at mweb.co.za  Fri Oct 31 10:43:42 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Oct 31 10:44:07 2008
Subject: [Harbour] Tone
In-Reply-To: <20081031120105.GB30855@34-mo7-2.acn.waw.pl>
References: <490AE31F.3000000@mweb.co.za> <490AE9B0.6010504@mweb.co.za>
	<20081031120105.GB30855@34-mo7-2.acn.waw.pl>
Message-ID: <490B199E.6050806@mweb.co.za>

> Probably you haven't set GTGUI as your default GT driver.
> Add to your souce code:
> 
>    ANNOUNCE HB_GTSYS          // disable linking default GT driver
>    REQUEST HB_GT_GUI_DEFAULT  // force linking GTGUI and set it as default
> 
> and then for test:
> 
>    Tone( 100, 3 )
>    Tone( 200, 2 )
>    Tone( 300, 1 )
>    MessageBox( hb_gtVersion() + ": " + hb_gtVersion(1) )
> 
> BTW HWGUI should have it's own GT driver which will support such
> functionality (it can inherit from GTGUI) and redirect some GT output
> to some active window(s). In such way it will be possible to used
> Clipper standard output functions.

I will get back to you. For some reason my test app (which uses same 
linking framework as my other applications) now gives me:

link alert2.exe
hbrtl.lib(gtsys.obj) : error LNK2001: unresolved external symbol 
_HB_FUN_HB_GT_WIN
alert2.exe : fatal error LNK1120: 1 unresolved externals
make: *** [alert2.exe] Error 1120

Regards
Alex
From bedipritpal at hotmail.com  Fri Oct 31 10:56:14 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Oct 31 10:56:23 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <2D8CB0A9-A7B4-4B39-9F23-0CF5559F9479@syenar.hu>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
	<C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>
	<531d7a750810301059k237e25afna26daa86e478f28c@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03815F116@SRV02.deltain.net>
	<531d7a750810301249h19a144e1i1a918f36618dac3d@mail.gmail.com>
	<9B75A3CD-8A57-4C5D-9D14-2938ECF32A89@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F118@SRV02.deltain.net>
	<2D8CB0A9-A7B4-4B39-9F23-0CF5559F9479@syenar.hu>
Message-ID: <20267659.post@talk.nabble.com>


Hello Viktor


Szak?ts Viktor wrote:
> 
> GTWVG IMO still needs heavy development to be used
> in production environments, as I can make it crash and
> behave strangely in just a few seconds of regular clicking.
> 

I am interested in your findings.
GTWVG is in use with my production applns well over few years
and I have not heard anything "crashing with clicks" so far.
Can you please enlighten me how it can be reproduced?
I would like it to be perfect in all senses.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Which-%22standard%22-GUI-for-Harbour-tp20241862p20267659.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From sscc at mweb.co.za  Fri Oct 31 11:02:58 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Oct 31 11:03:24 2008
Subject: [Harbour] Tone
In-Reply-To: <20081031120105.GB30855@34-mo7-2.acn.waw.pl>
References: <490AE31F.3000000@mweb.co.za> <490AE9B0.6010504@mweb.co.za>
	<20081031120105.GB30855@34-mo7-2.acn.waw.pl>
Message-ID: <490B1E22.6020504@mweb.co.za>

Przemyslaw Czerpak wrote:

> Probably you haven't set GTGUI as your default GT driver.
> Add to your souce code:
> 
>    ANNOUNCE HB_GTSYS          // disable linking default GT driver
>    REQUEST HB_GT_GUI_DEFAULT  // force linking GTGUI and set it as default
> 

You were right, I had

     REQUEST HB_GT_NUL

and when I changed it (removed it actually, because HWGUI now has:
	REQUEST HB_GT_GUI_DEFAULT

TONE() works as expected.

Thank you

Regards
Alex
From harbour.01 at syenar.hu  Fri Oct 31 11:12:19 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 31 11:12:35 2008
Subject: [Harbour] MT extensions
In-Reply-To: <20081031143245.GA18358@34-mo7-2.acn.waw.pl>
References: <20081029163752.GA8772@34-mo7-2.acn.waw.pl>
	<AF7287B9-E32B-49DE-A5F5-2C7A10B12192@syenar.hu>
	<20081031000119.GA24870@34-mo7-2.acn.waw.pl>
	<490AF149.8060204@mweb.co.za>
	<A2891661-0415-4930-8753-651EE7F87647@syenar.hu>
	<20081031143245.GA18358@34-mo7-2.acn.waw.pl>
Message-ID: <08BB0BA1-6074-47F1-92B1-ADAE6A90201A@syenar.hu>

>>
Hi Przemek,

>> Then we should probably also have hb_criticalsection*()
>> functions instead of hb_mutex*() to not use two different
>> terminologies in different parts of Harbour.
>
> I do not agree. The internal synchronization mechanism used
> on low level is our own choice which should be tuned to
> best .prg code performance and protection. We can internally
> use different synchronization mechanism for functions and
> .prg mutexes on some platforms. It's not user problem to guess
> which ones.

I was solely talking about .prg level. We already have
hb_mutex*() (which is perfect), now we want _mutex_
protected functions, which we want to give another name,
based on the facts that such code part may be "critical"
by one of the original meanings of this term, while I think
it should also use mutex for simplicity and clarity.
F.e this way I could just 'grep' for MUTEX to find all
of my code, which is for some reason not fully reentrant.

I see there are CRITICAL words in low level .c code though,
which is IMO perfectly right, and private matter to
Harbour core developers.

>> Critical is a programming terminology from a lower level
>> perspective (I wouldn't want to elaborate on the possible
>> roots of the term, but it looks to originate from low level
>> OS programming), and there, critical may indeed mean critical,
>> but in Harbour .prg level this looks like a way too harsh
>> word and seems to be somewhat disconnected from the world
>> of such a high level programming language. "critical section"
>> seems to mean a subset of the more generic term "mutex".
>> No wonder high level languages (C#/Java/XBase++) don't use
>> the "critical section" terminology.
>
> They do. They discribe code protected by synchronization mechanism
> as CRITICAL SECTION.

Exactly, but they don't use it as a syntax element.

>> If you read the wikipedia article to the end, it turns out
>> that POSIX calls "critical sections" simply "mutex", and
>
> In POSIX documentation you can find that MUTEXes are synchronization
> mechanism to guard CRITICAL SECTION of code, f.e. copy and past from
> simple search:
>
>    The prioceiling attribute defines the priority ceiling  of   
> initialized
>    mutexes, which is the minimum priority level at which the  
> critical sec-
>    tion guarded by the mutex is  executed.  In  order  to  avoid   
> priority
>
>> the only cited example where it's called "critical sections"
>> is in Windows itself, which is an operating system, where
>> such name can even have a real meaning on that low level.
>
> Not true see above.

"critical section" may be the academic name of such protected
code parts, but only low-level Windows uses it in as an API
function name. I'm not talking about theory, but practice.

>> They've probably named it that way because they've used
>> up "mutex" for the inter-process variation. (this is in
>> sync with C#, but there they've named intra-process,
>
> I do not think so. When CRITICAL_SECTION was introduced to Windows
> MUTEX was not well know term but CRITICAL SECTION was. Even today
> many people prefer to use SEMAPHORE instead of MUTEX.

My point is that "critical" and "critical section"
is not used in the majority, high-level programming
languages as part of any syntax. Only Windows OS seems
to use it as an API function name, and I've found
Delphi (still Windows world) using it for one its objects.

I'm not disputing the original meaning of "critical
section", but practice shows that it didn't make it
to languages for some reason. Which may or may not be
because of those concerns I'm trying to express, but
the trend seems clear.

Maybe the reason is just that "MUTEX" is unambiguous
and short, while "CRITICAL" is ambiguous and alarming,
while "CRITICAL SECTION" is less ambiguous, but long.

[ I also use SEMAPHORE, but I see no problem clearing
the ambiguity by having binary semaphores as MUTEXes,
and 'counting' semaphores as SEMAPHORES. BTW, I also
use FS-wide "userlock"s locally. This should also
be semaphores ideally. For files and databases we
also use "lock"s, which is again something like an
FS-side mutex. ]

>> aka 'critical sections' ones simply 'locks', probably for
>> similar reason I'm trying to show).
>> Also, "critical" by itself doesn't mean anything above, it's
>> always used in conjunction with "section", so the term
>
> or CODE or INTERRUPT or EXCEPTION or HANDLER or OPERATION or  
> SERVICE ...
> Some of them are used in very similar context to CRITICAL FUNCTION |
> PROCEDURE.

I don't agree with this. Maybe HANDLER and SERVICE are
vague by themselves, but CRITICAL by itself, at least for
normal ppl not knee deep into low level programming
(think of 'simple' .prg, C#, Java programmers), means not
much I'm afraid, besides looking pretty alarming.

>> is "critical section". If we say "critical function/procedure",
>> or just "critical" as a single word, to me it looks something
>> completely different.
>
> CRITICAL SECTION in informatics terms means peace of code which should
> not be interrupted by other code/events.

Yes, that's the meaning I used to know it, and it's
wholly different from a piece of code which we don't
want to be executed more than one times in parallel.

That also means that even the academic meaning of
"critical section" is ambiguous.

> In MT programming it was adopted as peace of code which can be entered
> only by one thread. But in fact it's not common definition. This
> term is also used to define peace of code which can be executed only
> when all other threads or processes are stooped. It's also used to
> define peace of code which cannot be interrupted by any exceptions
> or OS scheduler.

Again low-level. Regular Harbour programs don't operate
in that low level world. Interrupts don't happen, exceptions
are rather RTEs, and we don't handle hardware or other
subtleties, at least usually, which probably means something
around 99% of cases.

>> Java uses the keyword "mutexed" which IMO tells it best
>> that a given object is automatically protected by a mutex.
>
> I didn't know about it. Can you show the whole syntax?

I'm no Java expert. Just found significant number of mention
of this on the web. It may be part of an addon, or part of
it's class hierarchy. Anyhow the term "mutex" is actively used
in Java world, while the other is not.

Brgds,
Viktor

From bedipritpal at hotmail.com  Fri Oct 31 11:15:29 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Oct 31 11:15:34 2008
Subject: [Harbour] HB_TRACE() - How to Invoke
Message-ID: <20268062.post@talk.nabble.com>


Hello Folks

Please do not laugh at my stupidity.

How can I invoke 
HB_TRACE( HB_TR_DEBUG, ( "hb_gt_wvt_Redraw(%p,%d,%d,%d)", pGT, iRow, iCol,
iSize ) );
to work ?

Also can this debug output be directed to outer debug engines, 
I mean same as I can achieve with hb_ToOutDebug() function ?

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/HB_TRACE%28%29---How-to-Invoke-tp20268062p20268062.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From lorenzo.fiorini at gmail.com  Fri Oct 31 11:27:02 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Oct 31 11:27:06 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <490B15B4.3060103@mweb.co.za>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
	<C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F10A@SRV02.deltain.net>
	<B59E8059-BCB8-4AC6-96D6-4D9F2403C7C2@syenar.hu>
	<9257026e0810300718p5afd59feved0e46709e63bcc2@mail.gmail.com>
	<4909CA41.8060001@mweb.co.za>
	<9257026e0810300947m39f8c85dg2e23277b592c3848@mail.gmail.com>
	<490B15B4.3060103@mweb.co.za>
Message-ID: <9257026e0810310827g39727060wb779cfcbf5d0203c@mail.gmail.com>

On Fri, Oct 31, 2008 at 3:27 PM, Alex Strickland <sscc@mweb.co.za> wrote:

> Kind of like a cut down version of SOAP?

Yes but much simples.
We have done only the necessary to exchange the equivalent of a
GetList, a record and a tbrowse ( reports are already pdfs ).

The real work is done by Ajax.

It allows to simulates events, validate "gets" and populate browses on
demand and not in the html like "old" request/response/reload pattern.

For this we've chosen to standardize on FireFox. To avoid

best regards,
Lorenzo
From harbour.01 at syenar.hu  Fri Oct 31 11:29:31 2008
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 31 11:30:43 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <20267659.post@talk.nabble.com>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>
	<C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>
	<531d7a750810301059k237e25afna26daa86e478f28c@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03815F116@SRV02.deltain.net>
	<531d7a750810301249h19a144e1i1a918f36618dac3d@mail.gmail.com>
	<9B75A3CD-8A57-4C5D-9D14-2938ECF32A89@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03815F118@SRV02.deltain.net>
	<2D8CB0A9-A7B4-4B39-9F23-0CF5559F9479@syenar.hu>
	<20267659.post@talk.nabble.com>
Message-ID: <4918FBEB-553E-4195-A735-097597777F05@syenar.hu>

>>
Hi Pritpal,

>>
>> GTWVG IMO still needs heavy development to be used
>> in production environments, as I can make it crash and
>> behave strangely in just a few seconds of regular clicking.
>>
>
> I am interested in your findings.
> GTWVG is in use with my production applns well over few years
> and I have not heard anything "crashing with clicks" so far.
> Can you please enlighten me how it can be reproduced?
> I would like it to be perfect in all senses.

Well, I was just clicking pretty randomly on the
windows/buttons and menus, and it was for one very
difficult to decide which window is active, and
I also couldn't really find out which window would
cause the app to close, and which would close the
window only, and what window will I end up with
after doing any of these. I didn't experience crash
this time.

It's difficult to tell which menu will open something,
and which button or toolbar icon will work or not work.

There are some browser separator line refresh problems,
but that's minor.

Maybe some 64-bit testing could be good with this code,
to see if it's indeed portable.

I've also mentioned once the bad refresh problems
when you have multiple windows open, moving the
foreground window, or closing one can leave non-updated
patches (sometimes black, sometimes just clearing
specific parts of the underlying objects, like the
filling of the circle / rectangle on the first dialog)
on the background window. I've seen a dialog appear
in black right after it appeared.

Overall for me the demo is a bit confusing as a GUI
app, this may be because this is just a demo app,
but the most worrying are the visual glitches.

Brgds,
Viktor

From M.Horodyski at pzuzycie.com.pl  Fri Oct 31 11:32:38 2008
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri Oct 31 11:32:57 2008
Subject: [Harbour] MT extensions
In-Reply-To: <NLB01FEJFjWTu86mTcr0000d259@gatein.pzuzycie.com.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501842B8C@PINK.zycie.pzu>

 
Pls. don't make any changes in this statments till mondey.
I mus prepare example.

Regards,
Marek Horodyski
From bedipritpal at hotmail.com  Fri Oct 31 11:50:14 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Oct 31 11:50:16 2008
Subject: [Harbour] MT - WorkAreas - A Feature Request
Message-ID: <20268713.post@talk.nabble.com>


Hello Przemek

I am developing a RDBMS RDD (real-time) on top of USRRDD.
So far so good, thanks for this superb tool.

Now MT is in picture, but the RDBMS communication layer is not 
MT safe. I have guarded all functions in the communication layer 
with hb_mutexLock()/hb_mutexUnlock() and it is working great.

Now the real issue:
I have built the RDD on back of nWA which needs to be unique 
for each table open. Now in MT every thread has common nWAs
and this is breaking my methodology. Thou I can issue like:

STATIC nWorkArea := 0
nWorkArea++

SELECT( nWorkArea )
USE 'SomeTable' SHARED

This gives me unique workarea for each new table opened, but you 
know it has a lot of limitations:
1) I can exhaust maximum WAs
2) Workareas cannot be reused once table is closed
3) MOST IMPORTANT: I have to change the sources whereever a table is opened.

My feature request:
Is it possible that Harbour defines something like:
SET( _SET_WORKAREAS, lUnique )
and internally nWA is fetched form common pool if NEW clause is included in
USE.

I will be saved days of work just to change the sources.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/MT---WorkAreas---A-Feature-Request-tp20268713p20268713.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From cvc at oohg.org  Fri Oct 31 11:50:58 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Fri Oct 31 11:59:18 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <4918FBEB-553E-4195-A735-097597777F05@syenar.hu>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com>	<C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu>	<531d7a750810301059k237e25afna26daa86e478f28c@mail.gmail.com>	<AFB948164110ED43B5EB849E8DEEF03815F116@SRV02.deltain.net>	<531d7a750810301249h19a144e1i1a918f36618dac3d@mail.gmail.com>	<9B75A3CD-8A57-4C5D-9D14-2938ECF32A89@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03815F118@SRV02.deltain.net>	<2D8CB0A9-A7B4-4B39-9F23-0CF5559F9479@syenar.hu>	<20267659.post@talk.nabble.com>
	<4918FBEB-553E-4195-A735-097597777F05@syenar.hu>
Message-ID: <490B2962.2070306@oohg.org>

S
>>
>> I am interested in your findings.
>> GTWVG is in use with my production applns well over few years
>> and I have not heard anything "crashing with clicks" so far.
>> Can you please enlighten me how it can be reproduced?
>> I would like it to be perfect in all senses.
> 
>-- 


I'm very happy with GTWVG, the only problem that I found is a cosmetic problem,
In some situations when the aplication lost focus, the windows goes all black,
I only return to the normal color when it is refreshed by any event of manually 
by me.

regards
Ciro




http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From dbtopas at dbtopas.lt  Fri Oct 31 12:05:21 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Oct 31 12:05:26 2008
Subject: [Harbour] 2008-10-28 01:52 UTC+0200 Viktor Szakats (harbour.01
	syenar hu)
In-Reply-To: <951542DE-5D31-4049-AD0C-8563A6F68DFB@syenar.hu>
References: <01c938a3$Blat.v2.6.2$bd55e01a$5545f04fd56@127.0.0.1>	<490B10FB.3040908@dbtopas.lt>
	<951542DE-5D31-4049-AD0C-8563A6F68DFB@syenar.hu>
Message-ID: <490B2CC1.3030600@dbtopas.lt>

Szak?ts Viktor wrote:
>>>    + Added HB_VERSION() unified version information       function. 
>>> This can return these version related data:
>>>      hb_version( HB_V_HARBOUR )        => <string>
>>>      hb_version( HB_V_COMPILER )       => <string>       hb_version( 
>>> HB_V_MAJOR )          => <num>       hb_version( HB_V_MINOR 
>>> )          => <num>       hb_version( HB_V_REV )            => 
>>> <num>       hb_version( HB_V_STATUS )         => <string>       
>>> hb_version( HB_V_COUNT )          => <num>       hb_version( 
>>> HB_V_DATE_TIME )      => <string>       hb_version( HB_V_DATE 
>>> )           => <date>       hb_version( HB_V_TIME )           => 
>>> <string>
>>
>> Hi,
>>
>>
>> I would change _REV, _DATE, _TIME to less cryptic _REVISION, 
>> _BUILD_DATE, _BUILD_TIME. And _V_ to _VER_ for the same reason. It's 
>> just an idea, could be ignored.
> 
> HB_VER_* was already used on the C level for slightly
> different meaning. But that was my first choice before
> I realized. I don't like HB_V_ either.
> 
> HB_VERSION_* could also be good, but it's pretty long.
> 
> Or I can check what it'd take to rename C level HB_VER_*
> to something else.

In this case I think HB_VERSION_ is better. A little longer, but this 
constant will be used only in some seldom cases like .log creation etc., 
it's not STR() function.


>> BTW, what is HB_V_COUNT?
> 
> SVN revision. We can change it, but we need something
> which doesn't contain the name of our versioning software.
> 
> Maybe HB_VERSION_SEQUENCE, HB_VERSION_REVISION would
> be the best, but we have a slight term problem with
> "revision" because we're using it for the last part
> of the version number, and sometimes as the SVN revision
> no, like in (Rev. 9732).
> 
> Is there a better term for the last part of our
> version number? In 1.0._1_ the last '1' digit.

In cairo project version has major.minor.micro format. I like this name 
'micro'. If we agree on it, HB_VERSION_REVISION will be a name having 
the correct meaning.


Best regards,
Mindaugas

From dbtopas at dbtopas.lt  Fri Oct 31 12:12:04 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Oct 31 12:12:10 2008
Subject: [Harbour] MT extensions
In-Reply-To: <20081031143245.GA18358@34-mo7-2.acn.waw.pl>
References: <20081029163752.GA8772@34-mo7-2.acn.waw.pl>	<AF7287B9-E32B-49DE-A5F5-2C7A10B12192@syenar.hu>	<20081031000119.GA24870@34-mo7-2.acn.waw.pl>	<490AF149.8060204@mweb.co.za>	<A2891661-0415-4930-8753-651EE7F87647@syenar.hu>
	<20081031143245.GA18358@34-mo7-2.acn.waw.pl>
Message-ID: <490B2E54.2090901@dbtopas.lt>

>> Java uses the keyword "mutexed" which IMO tells it best
>> that a given object is automatically protected by a mutex.
> 
> I didn't know about it. Can you show the whole syntax?

Hi,


I do not know Java well. I've wrote a single applet in my life. It has 
method:

   public synchronized void selectClass( String grupe )

So, I do not know nothing about keyword "mutexed", but "synchronized" 
exists for sure. This Java code actually made me to propose 
"sync[hronized]" keyword in the previous letter.


Best regards,
Mindaugas
From mbelgrano at deltain.it  Fri Oct 31 12:27:26 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Oct 31 12:28:25 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <4918FBEB-553E-4195-A735-097597777F05@syenar.hu>
References: <9257026e0810300017o39e6f02ax96cea2b26949d9d8@mail.gmail.com><C1A89BED-A5D5-4C2C-8780-DF821858DFEC@syenar.hu><531d7a750810301059k237e25afna26daa86e478f28c@mail.gmail.com><AFB948164110ED43B5EB849E8DEEF03815F116@SRV02.deltain.net><531d7a750810301249h19a144e1i1a918f36618dac3d@mail.gmail.com><9B75A3CD-8A57-4C5D-9D14-2938ECF32A89@syenar.hu><AFB948164110ED43B5EB849E8DEEF03815F118@SRV02.deltain.net><2D8CB0A9-A7B4-4B39-9F23-0CF5559F9479@syenar.hu><20267659.post@talk.nabble.com>
	<4918FBEB-553E-4195-A735-097597777F05@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03815F123@SRV02.deltain.net>


>>
>> GTWVG IMO still needs heavy development to be used
>> in production environments, as I can make it crash and
>> behave strangely in just a few seconds of regular clicking.
>>
>


I am using gtwvg in some of my applications, was a works written for
XHARBOUR+GTWVW 
I am only without the editbox of gtwvw by func WVW_EBCREATE
Now my applications work fine with gtwvg without any refreshing problem
From hernad at sigma-com.net  Fri Oct 31 13:30:51 2008
From: hernad at sigma-com.net (Ernad Husremovic)
Date: Fri Oct 31 13:37:12 2008
Subject: [Harbour] Which "standard" GUI for Harbour
In-Reply-To: <30486278.7311225458083884.JavaMail.root@zimbra-1.sigma-com.net>
Message-ID: <1148012.7431225474251003.JavaMail.root@zimbra-1.sigma-com.net>

Lorenzo wrote:
> 
> I'll try to create a screencast.
> 
> BTW who knows simple and free screencast apps for Windows and Mac OS
> X?

http://www.jingproject.com/

Regards,
Ernad
From bedipritpal at hotmail.com  Fri Oct 31 15:56:46 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Oct 31 15:56:49 2008
Subject: [Harbour] 2008-10-31 13:02 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20273135.post@talk.nabble.com>


2008-10-31 13:02 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/make_b32_all.bat
    + hbdbgfx librray for auto build.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-10-31-13%3A02-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20273135p20273135.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Fri Oct 31 16:07:59 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 31 16:07:30 2008
Subject: [Harbour] MT extensions
In-Reply-To: <490B0FF5.1090909@dbtopas.lt>
References: <20081029163752.GA8772@34-mo7-2.acn.waw.pl>
	<AF7287B9-E32B-49DE-A5F5-2C7A10B12192@syenar.hu>
	<20081031000119.GA24870@34-mo7-2.acn.waw.pl>
	<1B4F9ECC-A5F9-42E1-A033-AAC13410D760@syenar.hu>
	<490B0FF5.1090909@dbtopas.lt>
Message-ID: <20081031200759.GA30795@34-mo7-2.acn.waw.pl>

On Fri, 31 Oct 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> one more proposition: SYNC[HRONIZED]

I though about it at the beginning but there is one problem.
We already have SYNC METHODS for xbase++ compatibility. This
mechanism has one side effect which is xbase++ compatible:
before thread enter WAIT state on SIGNAL object it unlocks
synced messages. When is woken up then it lock them again.
I do not like it because such mechanism can be source of
deadlocks and it's not clear for me why xbase++ has it.
Probably it's a workaround for race condition between unlocking
some mutex and entering conditional variable. Windows does not
have real conditional variables like in POSIX and such situation
has to be resolved in different way, usually using semaphores.
Anyhow race condition cannot be fully eliminated though can be
reduced to level which is not danger for application synchronization.
We also have such code in Harbour just like any other application
written for MS-Win and using conditional variables. But because
we have fully controlled MUTEXes which can be also CONDITIONAL
VARIABLEs, MULTISTATE SEMAPHOREs and MESSAGE QUEUEs then we do
not have to introduce such tricks which seems to be must in xbase++
to resolve some possible problems.
I want to keep this new synced functions semantic simple and clean
so they will not work like xbase++ SYNC METHODs which we are emulating.
This causes potential problem for users when the same prefix will be
used for different synchronization methods. This is the only problem
and in my opinion it's quite good name.

best regards,
Przemek
