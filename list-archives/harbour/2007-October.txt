From tomaz.zupan at orpo.si  Mon Oct  1 02:07:31 2007
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Mon Oct  1 02:07:41 2007
Subject: [Harbour] Finishing DEFEXT support
In-Reply-To: <42236D53-217F-4C1B-B7BC-1D1CA9BB9A14@syenar.hu>
References: <20070929193258.GA26082@localhost.localdomain>
	<42236D53-217F-4C1B-B7BC-1D1CA9BB9A14@syenar.hu>
Message-ID: <200710010807.31631.tomaz.zupan@orpo.si>

Dne sobota 29. septembra 2007 22:02 je Szak?ts Viktor napisal(a):

> How to solve this dependency?

I tested this with tip on linux:
#include '../xhb/xhb.ch'

-- 
Toma? Zupan
ORPO d.o.o.
http://www.orpo.si
From soporte at dsgsoftware.com  Mon Oct  1 03:32:01 2007
From: soporte at dsgsoftware.com (=?iso-8859-2?Q?Juan_G=E1lvez?=)
Date: Mon Oct  1 03:34:27 2007
Subject: [Harbour] CHANGELOG: 2007-09-28 11:56 UTC+0100 Viktor
	Szakats(harbour.01 syenar.hu)
References: <01c801b5$Blat.v2.6.2$fee29b52$958265173e0@127.0.0.1><20070928123149.GA11820@localhost.localdomain><7213D2F9-B2D3-4E02-801A-1E600024AF0D@syenar.hu>
	<20070928200004.GA9026@localhost.localdomain>
Message-ID: <003f01c803fd$6bb5e0b0$1700000a@PcJuanxp>

Przemek,

>    Juan negative indexes work as they should. Please read my
>    ChangeLog notes:
>    2007-09-26 02:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>    [...]
>      + added support for negative indexes in used in [] operator
>        for array and strings.
>        Please remember that standard harbour build (without
>        HB_COMPAT_XHB flag) generate warning for negative indexes,
>        if you wan to pacify them then instead of var[-1] use var[(-1)]
>                                           ^^^^^^^     ^^^^^^^^^
>    If you want to use then with standard build (without HB_COMPAT_XHB)
>    then you have to use parentheses as in example above.

Ops. I hadn't seen it. I'll try it.

Many thanks
Juan
From dbtopas at dbtopas.lt  Mon Oct  1 03:39:41 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Oct  1 03:40:31 2007
Subject: [Harbour] FOR ... FIXED
Message-ID: <4700A43D.3030708@dbtopas.lt>

Hello,


every extension makes portability of .prg code harder, but we still have 
hashes, BEGIN SEQUENCE WITH, WITH OBJECT, FOREACH and a huge number of 
others. ADEL/AINS is minor change in comparison of many other Harbour's 
features over Clipper.

I want to propose one more thing that reduces portability, and it's up 
to the group to decide - accept it or reject.

FOR nI := 1 TO LEN(aI) FIXED
   ? aI[nI]
NEXT

FIXED means that LEN(aI) is calculated only once and this value used to 
test loop exit condition.

This can be optimized to FOREACH, but you can find a lot of code like 
this in your source and Harbour's source itself:
    for nFor := 1 to Len( ::cPicMask )
    FOR tmp := 1 TO Len( oError:Args )
    for i := 0 to Min( ::nNumRows - 1, ::naTextLen - 1 )
    FOR i := 1 TO oIni:ReadNumber( "Header", "DataFields", 0 )


Best regards,
Mindaugas
From antonioharbour at gmail.com  Mon Oct  1 03:49:17 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Oct  1 03:49:44 2007
Subject: [Harbour] FOR ... FIXED
In-Reply-To: <4700A43D.3030708@dbtopas.lt>
Message-ID: <4700a691.2075420a.2c1b.2dcb@mx.google.com>

Mindaugas, 

>
FOR nI := 1 TO LEN(aI) FIXED
   ? aI[nI]
NEXT

FIXED means that LEN(aI) is calculated only once and this value used to test
loop exit condition.
>

Excellent. I vote yes! :-)

Regards,

Antonio

From harbour.01 at syenar.hu  Mon Oct  1 03:59:35 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  1 03:59:45 2007
Subject: [Harbour] FOR ... FIXED
In-Reply-To: <4700A43D.3030708@dbtopas.lt>
References: <4700A43D.3030708@dbtopas.lt>
Message-ID: <18952213-D931-402D-B452-02EEB2ACB4E2@syenar.hu>

> every extension makes portability of .prg code harder, but we still  
> have hashes, BEGIN SEQUENCE WITH, WITH OBJECT, FOREACH and a huge  
> number of others. ADEL/AINS is minor change in comparison of many  
> other Harbour's features over Clipper.

Yes, a _minor_ one, but one which silently
causes different behaviour when compiled with
a non-Harbour compatible (like CA-Cl*pper,
XBase++, FlagShip). So in practice code will
run, just in the wrong way, and it's not trivial
to find out why. Especially for someone no
knowing about the meaning (or the existence)
of those extended new parameters.

This is almost as bad as changing the behaviour
of standard RTL functions. In Harbour we always
tried to implement everything to be precisely
compatible. That's the goal of the project.

> I want to propose one more thing that reduces portability, and it's  
> up to the group to decide - accept it or reject.
>
> FOR nI := 1 TO LEN(aI) FIXED
>   ? aI[nI]
> NEXT
>
> FIXED means that LEN(aI) is calculated only once and this value  
> used to test loop exit condition.
>
> This can be optimized to FOREACH, but you can find a lot of code  
> like this in your source and Harbour's source itself:
>    for nFor := 1 to Len( ::cPicMask )
>    FOR tmp := 1 TO Len( oError:Args )
>    for i := 0 to Min( ::nNumRows - 1, ::naTextLen - 1 )
>    FOR i := 1 TO oIni:ReadNumber( "Header", "DataFields", 0 )

This changes the way FOR/NEXT works in most
languages, so I vote against it.

(having made the favour of making it possible to use lots
of "xhb extensions" doesn't mean we should continue adding
them and break cross-compatibility in new ways IMO.)

Brgds,
Viktor

From soporte at dsgsoftware.com  Mon Oct  1 04:38:29 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Mon Oct  1 04:38:48 2007
Subject: [Harbour] 2007-09-28 14:08 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
Message-ID: <001701c80406$78730d60$1700000a@PcJuanxp>

Hi Przemek,

>      ...
>      Seems that now we can remove HB_COMPAT_XHB flag from HVM and keep
>      Harbour compatibility only with -ks compile time switch and XHB
>      library. Please make some tests with Harbour compiled without
>      HB_COMPAT_XHB and xHarbour code using REQUEST XHB_LIB.
>      ...

What about hb_enumindex() ?

Best regards
Juan
From druzus at priv.onet.pl  Mon Oct  1 07:39:28 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Oct  1 07:39:36 2007
Subject: [Harbour] 2007-09-28 14:08 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200709281208.l8SC8m3P023030@31-mo5-4.acn.waw.pl>
References: <200709281208.l8SC8m3P023030@31-mo5-4.acn.waw.pl>
Message-ID: <20071001113928.GA2435@localhost.localdomain>

On Mon Oct 1 04:38:29 EDT 2007, Juan G?lvez soporte at dsgsoftware.com wrote:
> > Seems that now we can remove HB_COMPAT_XHB flag from HVM and keep
> > Harbour compatibility only with -ks compile time switch and XHB
> > library. Please make some tests with Harbour compiled without
> > HB_COMPAT_XHB and xHarbour code using REQUEST XHB_LIB.
> What about hb_enumindex() ?

Two things. I'll add to hbcompat.ch:
   #xtranslate hb_enumIndex(<v>) => <v>:__enumIndex()

and I suggest to use in xHarbour code:
   hb_enumindex( <enumvar> )

f.e.:
   FOR EACH elem in ErrorNew()
      ? hb_enumindex( elem )
   NEXT

Such code will work with both Harbour and xHarbour compilers.
I'll also add hb_enumindex() emulation to XHB lib but the version
with hb_enumindex( <enumvar> ) is preferred.

best regards
Przemek
From druzus at priv.onet.pl  Mon Oct  1 08:21:41 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Oct  1 08:21:49 2007
Subject: [Harbour] CHANGELOG: 2007-09-28 11:56 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <C717435B-EBA2-4933-BCD9-648DB1FA0977@syenar.hu>
References: <46FDEE70.6030301@dbtopas.lt>
	<544DE1C1-A186-47D8-BFDC-61C8FFD322B6@syenar.hu>
	<20070929094750.GB12269@localhost.localdomain>
	<8E015644-65C2-4AF5-B675-60BEFCA876D6@syenar.hu>
	<20070929171225.GA24869@localhost.localdomain>
	<84255EAC-228E-47A9-988A-6CEEAA22E17C@syenar.hu>
	<20070930104917.GA21844@localhost.localdomain>
	<46FF8BFB.4070203@dbtopas.lt>
	<20070930144736.GC21844@localhost.localdomain>
	<C717435B-EBA2-4933-BCD9-648DB1FA0977@syenar.hu>
Message-ID: <20071001122141.GB2435@localhost.localdomain>

On Sun, 30 Sep 2007, Szak?ts Viktor wrote:
> While this looks good technically, I'm not sure if this
> is a good thing to add, because if there is an official
> way to change .prg behaviour in such a drastic and _hidden_
> way, well it can make it really difficult to find out what
> is actually running when some .prg is run. At the same
> time it doesn't give any speed difference, the thing
> we "save" is the #include "xhb.ch" (but REQUEST LIB_XHB
> is still needed anyway).
> So technically brilliant, this can be a nightmare when
> porting something or for an "average" Clipper programmer.
> If we handle this at PP level (just like Clipper), everyone
> can at least get a clear view what is really running,
> by peeking at the .ppo code.
> So pls, let's reconsider this new API.

Victor, we have problem now because people overload functions
hacking used linkers and it's totally out of our control. They
often creates wrong binaries and then they are shocked that
sth does not work as it should.
F.e. after last modifications in xHarbour many xHarbour users using
BCC discovered that they were creating wrong xHarbour binaries because
they linked very old PCRE library included in BCC which is not binary
compatible with current ones and the one included in xHarbour core code.
Many of them still wrongly thing that before last modification they not
had to link PCRE library at all. It's a nonsense because it was always
linked (it has been never possible to create xHarbour binaries without
PCRE code because xHarbour VM needs it) but instead the valid one from
xHarbour the wrong version from BCC were used. And I'm talking about
core developers. For normal user it's very often magic thing. They
will use linker like then one from BCC and because it does not report
any errors then they will create wrong binaries. Mindaugas knows well
what he is doing and he can resolve possible conflicts but most of
other users not.

> Other than that I fully agree that AINS()/ADEL() should
> not be touched to keep cross-compatibility, and in case
> we want to introduce enhanced versions we should add HB_AINS(),
> HB_ADEL().

If we are talking about core code then I agree with you but
here we are talking about XHB compatible library. xHarbour
already has such modified AINS()/ADEL() functions and we
will not change it. We can add support for clean overloading
these functions in XHB library or we can leave it as is and
wait for bug reports about unexpected GPF because I do not
believe that we can forbid users dirty functions overloading.

Farther, overloading symbols is sth what we will have to make
for .hrb and shared libraries (.dll/.so/.dyn/...) Now if public
function already exists then it's not overloaded by loaded module
and all bindings to this function in this module are updated to
the one registered in HVM before. In the past we agreed that we
add some switches to control it so it will be possible to keep
current behavior, overload registered functions with the new one,
do not overload registered functions to the new ones but keep local
bindings without overloading them with the previously registered
in HVM functions. It's very important feature.
Exactly the same mechanism is used in this situation but loaded
module from XHB lib will overload AINS()/ADEL(). Nothing amazing
and nothing what we can block without serious functionality reduction.

XHB lib should be for user which wants some strict xHarbour
compatibility. We agreed that we remove from core code all
HB_COMPAT_XHB but in such case we have to add removed
functionality to this library. If not then we should restore
all removed HB_COMPAT_XHB macros in core code what is IMHO
bad idea. We started this modification to make code more clean
and keep only single version of core code binaries not to
reduced functionality.

I also want to move hbcompat.ch back to include directory.
IMHO we have two compatibility levels. The 1-st one which does
not need XHB lib and can be done by PP only. It will be enough
for many people and for these people we should have hbcompat.ch
in core code. I hope that this file will be also added to xHarbour
CVS. The second one for people who will need XHB lib and for them
it will be necessary to introduce new header file in contrib/xhb
library.

best regards,
Przemek
From teo at windtelsoft.com  Mon Oct  1 09:07:07 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Mon Oct  1 09:07:23 2007
Subject: [Harbour] Finishing DEFEXT support
In-Reply-To: <42236D53-217F-4C1B-B7BC-1D1CA9BB9A14@syenar.hu>
References: <20070929193258.GA26082@localhost.localdomain>
	<42236D53-217F-4C1B-B7BC-1D1CA9BB9A14@syenar.hu>
Message-ID: <200710010907.08239.teo@windtelsoft.com>

On Saturday 29 September 2007 04:02:23 pm Szak?ts Viktor wrote:
> > The modifications is technically correct and it will work.
> > Anyhow programmer should be careful with this set.
> > Some RDD may need valid extension to recognize file type format
> > so disabling extensions may break them. In DBF* RDDs this SET
> > is intentionally ignored for MEMO files and production indexes
> > to avoid name conflicts.
>
> Thanks. I agree with your points.
>
> > But we have other problem with hbcompat.ch - you moved this file
> > from harbour/include directory to harbour/contrib/xhb/directory.
> > It means that TIP library cannot be longer compiled. It has to be
> > fixed because it broke some of standard build scripts.
> > IMHO if we are talking about common source code for Harbour and
> > xHarbour then both compilers should have header file with the
> > same name in both projects (so xhb.ch is not good choice because
> > it will look strange for xHarbour developers that they have to
> > include xhb.ch to enable Harbour extensions) inside main include
> > directory. IMHO hbcompat.ch was a good choice for that.
>
> I saw that, but I think we should resolve it as a lib
> dependency problem. TIP depends on xhb lib features, so we
> need to somehow resolve this problem.
>
> We can leave hbcompat.ch in core include, but the content
> should be moved to xhb lib, if we want to do it properly,
> so either way xhb.ch should be accessible by TIP, directly
> or through hbcompat.ch.
>
> In the future more and more libs can depend on each other
> (or on xhb lib).
>
> How to solve this dependency?

Viktor,

We'll have at the end with a statement like:
'Harbour is a xHarbour compatible compiler'

I think that we need to have all the libraries, including of course those 
under 'contrib' to be compilable with a std Harbour build.

xHb lib, is only to give a easy path to port xHarbour code to Harbour.


best regards

Teo
From harbour.01 at syenar.hu  Mon Oct  1 09:28:13 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  1 09:28:22 2007
Subject: [Harbour] Finishing DEFEXT support
In-Reply-To: <200710010907.08239.teo@windtelsoft.com>
References: <20070929193258.GA26082@localhost.localdomain>
	<42236D53-217F-4C1B-B7BC-1D1CA9BB9A14@syenar.hu>
	<200710010907.08239.teo@windtelsoft.com>
Message-ID: <F3754005-79E6-49B0-8293-F98551301A9A@syenar.hu>

Hi Teo,

> Viktor,
>
> We'll have at the end with a statement like:
> 'Harbour is a xHarbour compatible compiler'
>
> I think that we need to have all the libraries, including of course  
> those
> under 'contrib' to be compilable with a std Harbour build.

I cannot agree more.

> xHb lib, is only to give a easy path to port xHarbour code to Harbour.

Exactly.

I've actually converted TIP to not need xhb, but I didn't
want to start a flame war, so I finally left it. If we
agree I can remove those few xhb specific parts from TIP.

Brgds,
Viktor

From teo at windtelsoft.com  Mon Oct  1 09:38:43 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Mon Oct  1 09:38:58 2007
Subject: [Harbour] Finishing DEFEXT support
In-Reply-To: <F3754005-79E6-49B0-8293-F98551301A9A@syenar.hu>
References: <20070929193258.GA26082@localhost.localdomain>
	<200710010907.08239.teo@windtelsoft.com>
	<F3754005-79E6-49B0-8293-F98551301A9A@syenar.hu>
Message-ID: <200710010938.43968.teo@windtelsoft.com>

On Monday 01 October 2007 09:28:13 am Szak?ts Viktor wrote:
> Hi Teo,
>
> > Viktor,
> >
> > We'll have at the end with a statement like:
> > 'Harbour is a xHarbour compatible compiler'
> >
> > I think that we need to have all the libraries, including of course
> > those
> > under 'contrib' to be compilable with a std Harbour build.
>
> I cannot agree more.
>
> > xHb lib, is only to give a easy path to port xHarbour code to Harbour.
>
> Exactly.
>
> I've actually converted TIP to not need xhb, but I didn't
> want to start a flame war, so I finally left it. If we
> agree I can remove those few xhb specific parts from TIP.

Please do it.


best regards

Teo
From jeremy at cowgar.com  Mon Oct  1 10:06:14 2007
From: jeremy at cowgar.com (Jeremy Cowgar)
Date: Mon Oct  1 10:06:16 2007
Subject: [Harbour] New to Harbour
Message-ID: <4700FED6.3010809@cowgar.com>

Greetings!

I am not sure if this is a development only mailing list. I was on the 
main Harbour website about mailing lists 
(http://www.harbour-project.org/mailinglist.htm) and the Developer 
mailing list was the only one that is not a 404 error. Anyway, if this 
is incorrect for this mailing list, please direct me to the proper place.

Where is a good tutorial about Clipper and Harbour? I used CA Clipper 
many, many, many years ago and although I do not have any current 
clipper code (or much clipper knowledge anymore) I am interested in the 
Harbour project. I just need a kickstart. I like how easy the language 
is and also that it is cross-platform and very easy to extend in C (last 
night I wrapped libdbi so that I could have access to a few SQLite3 and 
PostgreSQL databases).

Thanks for any info,

Jeremy

From soporte at dsgsoftware.com  Mon Oct  1 10:11:05 2007
From: soporte at dsgsoftware.com (=?iso-8859-2?Q?Juan_G=E1lvez?=)
Date: Mon Oct  1 10:28:15 2007
Subject: [Harbour] 2007-09-28 14:08 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <200709281208.l8SC8m3P023030@31-mo5-4.acn.waw.pl>
	<20071001113928.GA2435@localhost.localdomain>
Message-ID: <000201c80437$4a6aba40$1700000a@PcJuanxp>

Hi Przemek,

> Two things. I'll add to hbcompat.ch:
>   #xtranslate hb_enumIndex(<v>) => <v>:__enumIndex()
> 
> and I suggest to use in xHarbour code:
>   hb_enumindex( <enumvar> )
> 
> f.e.:
>   FOR EACH elem in ErrorNew()
>      ? hb_enumindex( elem )
>   NEXT
> 
> Such code will work with both Harbour and xHarbour compilers.
> I'll also add hb_enumindex() emulation to XHB lib but the version
> with hb_enumindex( <enumvar> ) is preferred.

Ok. I'll do it.

Many thanks
Juan
From miguelangel at marchuet.net  Mon Oct  1 11:55:57 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Mon Oct  1 12:02:35 2007
Subject: [Harbour] 2007-09-01 17:54 UTC+0100 Miguel Angel Marchuet
	<miguelangel/at/marchuet.net>
Message-ID: <4701188D.1010803@marchuet.net>

2007-09-01 17:54 UTC+0100 Miguel Angel Marchuet <miguelangel/at/marchuet.net>
   * contrib/bmdbfcdx/bmdbfcdx1.c
   * contrib/bmdbfcdx/hbrddbmcdx.h
     * synced with dbfcdx

   * contrib/tip/make_b32.bat
     * fixed copy of lib by Juan Galvez.

   * contrib/xhb/makefile.bc
     + added missing files by Juan Galvez.
From mbelgrano at deltain.it  Mon Oct  1 12:08:46 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Oct  1 12:09:07 2007
Subject: R: [Harbour] New to Harbour
In-Reply-To: <4700FED6.3010809@cowgar.com>
References: <4700FED6.3010809@cowgar.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A9B6@SRV02.deltain.net>

http://culikr.sites.uol.com.br/howtoen.htm


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Jeremy Cowgar
Inviato: luned? 1 ottobre 2007 16.06
A: harbour@harbour-project.org
Oggetto: [Harbour] New to Harbour

Greetings!

I am not sure if this is a development only mailing list. I was on the 
main Harbour website about mailing lists 
(http://www.harbour-project.org/mailinglist.htm) and the Developer 
mailing list was the only one that is not a 404 error. Anyway, if this 
is incorrect for this mailing list, please direct me to the proper place.

Where is a good tutorial about Clipper and Harbour? I used CA Clipper 
many, many, many years ago and although I do not have any current 
clipper code (or much clipper knowledge anymore) I am interested in the 
Harbour project. I just need a kickstart. I like how easy the language 
is and also that it is cross-platform and very easy to extend in C (last 
night I wrapped libdbi so that I could have access to a few SQLite3 and 
PostgreSQL databases).

Thanks for any info,

Jeremy

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From jeremy at cowgar.com  Mon Oct  1 12:12:45 2007
From: jeremy at cowgar.com (Jeremy Cowgar)
Date: Mon Oct  1 12:12:49 2007
Subject: R: [Harbour] New to Harbour
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809A9B6@SRV02.deltain.net>
References: <4700FED6.3010809@cowgar.com>
	<AFB948164110ED43B5EB849E8DEEF03809A9B6@SRV02.deltain.net>
Message-ID: <47011C7D.1080505@cowgar.com>

I was looking for a more detailed Clipper/Harbour tutorial. I have 
Harbour up and running, compiling, made a libdbi interface, using that 
to do basic queries, reading/writing files, etc... I'm past the basic 
setup and hello world, but not to the point of developing something 
useful. I am speaking of things like basic control constructs, advanced 
functions, creating using code blocks, etc...

Jeremy

Massimo Belgrano wrote:
> http://culikr.sites.uol.com.br/howtoen.htm
>
>
> -----Messaggio originale-----
> Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Jeremy Cowgar
> Inviato: luned? 1 ottobre 2007 16.06
> A: harbour@harbour-project.org
> Oggetto: [Harbour] New to Harbour
>
> Greetings!
>
> I am not sure if this is a development only mailing list. I was on the 
> main Harbour website about mailing lists 
> (http://www.harbour-project.org/mailinglist.htm) and the Developer 
> mailing list was the only one that is not a 404 error. Anyway, if this 
> is incorrect for this mailing list, please direct me to the proper place.
>
> Where is a good tutorial about Clipper and Harbour? I used CA Clipper 
> many, many, many years ago and although I do not have any current 
> clipper code (or much clipper knowledge anymore) I am interested in the 
> Harbour project. I just need a kickstart. I like how easy the language 
> is and also that it is cross-platform and very easy to extend in C (last 
> night I wrapped libdbi so that I could have access to a few SQLite3 and 
> PostgreSQL databases).
>
> Thanks for any info,
>
> Jeremy
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>   

From druzus at priv.onet.pl  Mon Oct  1 13:43:56 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Oct  1 13:44:03 2007
Subject: [Harbour] 2007-10-01 19:42 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710011743.l91Hhusk002277@31-mo5-4.acn.waw.pl>

2007-10-01 19:42 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/errorapi.c
    + added protection against possible GPF when some assign methods
      were called without parameters

  * harbour/source/rdd/workarea.c
    * initialize uiFalgs also when DBS_FLAGS is not set

  * harbour/contrib/bmdbfcdx/bmdbfcdx1.c
    * fixed hb_cdxSkipFilter() declaration - it should be 'static' function

  * harbour/source/pp/ppcore.c
  * harbour/source/compiler/ppcomp.c
    + added support for changing all -k? switches by #pragma, f.e.;
         #pragma -ks+
         #pragma -kM-
         #pragma -kx1
         #pragma -kJ0

  * harbour/source/compiler/hbusage.c
    * changed -ks description

  * harbour/include/hbexpra.c
  * harbour/include/hbexprb.c
    * do not generate error message for negative indexes and
      [] operators are used for simple types when -ks option
      is used

  * harbour/include/hbvmpub.h
  * harbour/include/hbapi.h
  * harbour/source/vm/hvm.c
  * harbour/source/vm/extend.c
  * harbour/source/vm/itemapi.c
  * harbour/source/vm/memvars.c
    + added HB_IT_DEFAULT flags - it allows to check if item was changed

  * harbour/source/vm/memvars.c
  * harbour/include/hbvm.h
    ! fixed HB_IT_MEMOFLAG updating to be Clipper compatible. Here we are
      not Clipper compatible in one place: in clodeblock local parameters
      with memo values are marked as MEMO but if you leave function where
      codeblock were created then Clipper during detaching removes MEMO
      flag. In Harbour memo flag is kept.

  * harbour/include/hbvm.h
  * harbour/source/vm/classes.c
  * harbour/source/vm/hvm.c
    % improved speed of extended references used for SETGET methods
      and overloaded [] operators

  * harbour/include/hbapi.h
  * harbour/include/hbsetup.ch
  * harbour/source/compiler/hbcomp.c
  * harbour/source/vm/hvm.c
  * harbour/source/vm/macro.c
  * harbour/source/vm/cmdarg.c
    * removed HB_COMPAT_XHB flags - only one HB_COMPAT_XHB still exist
      in HVM in hashes.c - it will be removed soon.

  * harbour/source/common/hbverdsp.c
    * removed information about xHarbour compatibility mode - it's not
      longer used. We are emulating xHarbour behavior using external
      XHB library and standard compiler/HVM features

  * harbour/contrib/xhb/xhb.ch
  * harbour/contrib/xhb/xhbfunc.c
  * harbour/source/vm/arrayshb.c
    * moved XHB_AINS(), XHB_ADEL() from XHB lib to HVM as HB_AINS(), HB_ADEL()

  * harbour/contrib/xhb/xhb.ch
    + added #pragma -ks+
    + added transaltion for hb_enumindex( <enumvar> )

  + harbour/contrib/xhb/xhbenum.c
    + added emulation for HB_EUMMINDEX()

  * harbour/contrib/xhb/xhbfunc.c
    * do not add INET*() function wrappers for DOS builds or when
      HB_NO_DEFAULT_INET macro is set

  * harbour/contrib/xhb/xhbmsgs.c
    * added comment

  * harbour/contrib/Makefile
    + added TIP and XHB

  * harbour/make_rpm.sh
  * harbour/harbour.spec
    * removed HB_COMPAT_XHB, --with tip, --with xhb
      they are not longer necessary

best regards
Przemek
From harbour.01 at syenar.hu  Mon Oct  1 13:49:43 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  1 13:49:53 2007
Subject: [Harbour] CHANGELOG: 2007-09-28 11:56 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <20071001122141.GB2435@localhost.localdomain>
References: <46FDEE70.6030301@dbtopas.lt>
	<544DE1C1-A186-47D8-BFDC-61C8FFD322B6@syenar.hu>
	<20070929094750.GB12269@localhost.localdomain>
	<8E015644-65C2-4AF5-B675-60BEFCA876D6@syenar.hu>
	<20070929171225.GA24869@localhost.localdomain>
	<84255EAC-228E-47A9-988A-6CEEAA22E17C@syenar.hu>
	<20070930104917.GA21844@localhost.localdomain>
	<46FF8BFB.4070203@dbtopas.lt>
	<20070930144736.GC21844@localhost.localdomain>
	<C717435B-EBA2-4933-BCD9-648DB1FA0977@syenar.hu>
	<20071001122141.GB2435@localhost.localdomain>
Message-ID: <D1A64566-50E4-4156-8447-1AE5468B09CF@syenar.hu>

Hi Przemek,

> On Sun, 30 Sep 2007, Szak?ts Viktor wrote:
>> While this looks good technically, I'm not sure if this
>> is a good thing to add, because if there is an official
>> way to change .prg behaviour in such a drastic and _hidden_
>> way, well it can make it really difficult to find out what
>> is actually running when some .prg is run. At the same
>> time it doesn't give any speed difference, the thing
>> we "save" is the #include "xhb.ch" (but REQUEST LIB_XHB
>> is still needed anyway).
>> So technically brilliant, this can be a nightmare when
>> porting something or for an "average" Clipper programmer.
>> If we handle this at PP level (just like Clipper), everyone
>> can at least get a clear view what is really running,
>> by peeking at the .ppo code.
>> So pls, let's reconsider this new API.
>
> Victor, we have problem now because people overload functions
> hacking used linkers and it's totally out of our control. They
> often creates wrong binaries and then they are shocked that
> sth does not work as it should.
> F.e. after last modifications in xHarbour many xHarbour users using
> BCC discovered that they were creating wrong xHarbour binaries because
> they linked very old PCRE library included in BCC which is not binary
> compatible with current ones and the one included in xHarbour core  
> code.
> Many of them still wrongly thing that before last modification they  
> not
> had to link PCRE library at all. It's a nonsense because it was always
> linked (it has been never possible to create xHarbour binaries without
> PCRE code because xHarbour VM needs it) but instead the valid one from
> xHarbour the wrong version from BCC were used. And I'm talking about
> core developers. For normal user it's very often magic thing. They
> will use linker like then one from BCC and because it does not report
> any errors then they will create wrong binaries. Mindaugas knows well
> what he is doing and he can resolve possible conflicts but most of
> other users not.

I agree with you that linker is already an enough mess,
and just because if this my conclusion was _not_ to include
another such API function which can add to this mess through
an official VM API call.

Is this what you think?

>> Other than that I fully agree that AINS()/ADEL() should
>> not be touched to keep cross-compatibility, and in case
>> we want to introduce enhanced versions we should add HB_AINS(),
>> HB_ADEL().
>
> If we are talking about core code then I agree with you but
> here we are talking about XHB compatible library. xHarbour
> already has such modified AINS()/ADEL() functions and we
> will not change it. We can add support for clean overloading
> these functions in XHB library or we can leave it as is and
> wait for bug reports about unexpected GPF because I do not
> believe that we can forbid users dirty functions overloading.
>
> Farther, overloading symbols is sth what we will have to make
> for .hrb and shared libraries (.dll/.so/.dyn/...) Now if public
> function already exists then it's not overloaded by loaded module
> and all bindings to this function in this module are updated to
> the one registered in HVM before. In the past we agreed that we
> add some switches to control it so it will be possible to keep
> current behavior, overload registered functions with the new one,
> do not overload registered functions to the new ones but keep local
> bindings without overloading them with the previously registered
> in HVM functions. It's very important feature.
> Exactly the same mechanism is used in this situation but loaded
> module from XHB lib will overload AINS()/ADEL(). Nothing amazing
> and nothing what we can block without serious functionality reduction.
>
> XHB lib should be for user which wants some strict xHarbour
> compatibility. We agreed that we remove from core code all
> HB_COMPAT_XHB but in such case we have to add removed
> functionality to this library. If not then we should restore
> all removed HB_COMPAT_XHB macros in core code what is IMHO
> bad idea. We started this modification to make code more clean
> and keep only single version of core code binaries not to
> reduced functionality.

Wait wait, we have removed them mostly, so which HB_COMPAT_XHB
are you talking about right now? My impression was that you
want to introduce a _new way_ to overload AINS()/ADEL() with
xhb compatible versions, which 1) we have already solved using
PP 2) would need a seriously dangerous overload API.

Maybe I've misunderstood you.

To make it clear: I think the current PP method used is xhb lib
to "overload" such functions is proper enough, and I'd keep
it that way without any further sophistication or VM tricks.
I definitely don't want to readd any __XHARBOUR__ or HB_COMPAT_XHB
branches in code, I think we should remove them all.

> I also want to move hbcompat.ch back to include directory.
> IMHO we have two compatibility levels. The 1-st one which does
> not need XHB lib and can be done by PP only. It will be enough
> for many people and for these people we should have hbcompat.ch
> in core code. I hope that this file will be also added to xHarbour
> CVS. The second one for people who will need XHB lib and for them
> it will be necessary to introduce new header file in contrib/xhb
> library.

I don't agree here, IMO we should distribute xhb.ch as part
of the xhb lib, to have all xhb compatible stuff in one
package and to avoid it being used in core code (or in
non-core code accidentally). That would be a clean situation
with proper separation of components.

"Level 1" and "Level 2" compatibility just add up to the complexity,
so I'd vote to keep it simple: If someone needs xhb functionality
in Harbour, the only thing to do is building/linking xhb lib and
including xhb.ch in the source file (lib names need to be adjusted
anyway). This is the exact same method every developer got
used to since the Clipper-era for _every_ 3rd party lib.

Also, to stay on this train of though I think the same should have
been done (is possible) with most of the remaining HB_COMPAT_*
build-time stuff in Harbour. For example, if someone wants XPP
compatible functions, hbxpp lib (+.ch files) would have to be
included.

For convenience, we can distribute these libs / .ch files
_along_ with core Harbour, so that developers can access them
without any extra hassle, even the local .ch files (like xhb.ch)
would be installed in harbour/include.

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Oct  1 13:54:13 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  1 13:54:21 2007
Subject: [Harbour] 2007-10-01 19:42 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200710011743.l91Hhusk002277@31-mo5-4.acn.waw.pl>
References: <200710011743.l91Hhusk002277@31-mo5-4.acn.waw.pl>
Message-ID: <A55C2755-78A3-4CF7-BD60-B4FD84A1917B@syenar.hu>

Great and thanks Przemek.

One thought, don't call me the antichrist, but
I tend to think we might want to consider including
hb_enum*( var ) in core Harbour. It has the naming
right, and actually, it doesn't look too bad to me,
dunno about any performance (or other) issues compared
to var:__enum*().

(which badly needs this internal name to be fixed)

Brgds,
Viktor

On 2007.10.01., at 19:43, Przemyslaw Czerpak wrote:

> 2007-10-01 19:42 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/rtl/errorapi.c
>     + added protection against possible GPF when some assign methods
>       were called without parameters
>
>   * harbour/source/rdd/workarea.c
>     * initialize uiFalgs also when DBS_FLAGS is not set
>
>   * harbour/contrib/bmdbfcdx/bmdbfcdx1.c
>     * fixed hb_cdxSkipFilter() declaration - it should be 'static'  
> function
>
>   * harbour/source/pp/ppcore.c
>   * harbour/source/compiler/ppcomp.c
>     + added support for changing all -k? switches by #pragma, f.e.;
>          #pragma -ks+
>          #pragma -kM-
>          #pragma -kx1
>          #pragma -kJ0
>
>   * harbour/source/compiler/hbusage.c
>     * changed -ks description
>
>   * harbour/include/hbexpra.c
>   * harbour/include/hbexprb.c
>     * do not generate error message for negative indexes and
>       [] operators are used for simple types when -ks option
>       is used
>
>   * harbour/include/hbvmpub.h
>   * harbour/include/hbapi.h
>   * harbour/source/vm/hvm.c
>   * harbour/source/vm/extend.c
>   * harbour/source/vm/itemapi.c
>   * harbour/source/vm/memvars.c
>     + added HB_IT_DEFAULT flags - it allows to check if item was  
> changed
>
>   * harbour/source/vm/memvars.c
>   * harbour/include/hbvm.h
>     ! fixed HB_IT_MEMOFLAG updating to be Clipper compatible. Here  
> we are
>       not Clipper compatible in one place: in clodeblock local  
> parameters
>       with memo values are marked as MEMO but if you leave function  
> where
>       codeblock were created then Clipper during detaching removes  
> MEMO
>       flag. In Harbour memo flag is kept.
>
>   * harbour/include/hbvm.h
>   * harbour/source/vm/classes.c
>   * harbour/source/vm/hvm.c
>     % improved speed of extended references used for SETGET methods
>       and overloaded [] operators
>
>   * harbour/include/hbapi.h
>   * harbour/include/hbsetup.ch
>   * harbour/source/compiler/hbcomp.c
>   * harbour/source/vm/hvm.c
>   * harbour/source/vm/macro.c
>   * harbour/source/vm/cmdarg.c
>     * removed HB_COMPAT_XHB flags - only one HB_COMPAT_XHB still exist
>       in HVM in hashes.c - it will be removed soon.
>
>   * harbour/source/common/hbverdsp.c
>     * removed information about xHarbour compatibility mode - it's not
>       longer used. We are emulating xHarbour behavior using external
>       XHB library and standard compiler/HVM features
>
>   * harbour/contrib/xhb/xhb.ch
>   * harbour/contrib/xhb/xhbfunc.c
>   * harbour/source/vm/arrayshb.c
>     * moved XHB_AINS(), XHB_ADEL() from XHB lib to HVM as HB_AINS 
> (), HB_ADEL()
>
>   * harbour/contrib/xhb/xhb.ch
>     + added #pragma -ks+
>     + added transaltion for hb_enumindex( <enumvar> )
>
>   + harbour/contrib/xhb/xhbenum.c
>     + added emulation for HB_EUMMINDEX()
>
>   * harbour/contrib/xhb/xhbfunc.c
>     * do not add INET*() function wrappers for DOS builds or when
>       HB_NO_DEFAULT_INET macro is set
>
>   * harbour/contrib/xhb/xhbmsgs.c
>     * added comment
>
>   * harbour/contrib/Makefile
>     + added TIP and XHB
>
>   * harbour/make_rpm.sh
>   * harbour/harbour.spec
>     * removed HB_COMPAT_XHB, --with tip, --with xhb
>       they are not longer necessary
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Mon Oct  1 14:01:23 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Oct  1 14:01:35 2007
Subject: [Harbour] Finishing DEFEXT support
In-Reply-To: <200710010938.43968.teo@windtelsoft.com>
References: <20070929193258.GA26082@localhost.localdomain>
	<200710010907.08239.teo@windtelsoft.com>
	<F3754005-79E6-49B0-8293-F98551301A9A@syenar.hu>
	<200710010938.43968.teo@windtelsoft.com>
Message-ID: <20071001180123.GA32226@localhost.localdomain>

On Monday 01 October 2007 09:28:13 am Szak?ts Viktor wrote:
> > I think that we need to have all the libraries, including of course
> > those
> > under 'contrib' to be compilable with a std Harbour build.
> I cannot agree more.

Me too.

When TIP library was committed we hadn't XHB library yet. Now when
we have it all xHarbour only code borrowed from xHarbour should be
committed to XHB lib and maybe later if someone will update it to
work without xHarbour specific features then we can move it to separate
library or even to core code if we'll find it valuable extensions.

> > xHb lib, is only to give a easy path to port xHarbour code to Harbour.
> Exactly.

I fully agree. This library should be _only_ for external xHarbour
oriented code. But it also should make xHarbour emulation as good
as possible so I think we can add this library all xHarbour extensions
which can be used without risk of corrupting HVM internals. IMHO
discussing on this forum about keeping clean xHarbour extension
clean does not make sense. I thought that we created separate library
and removed all HB_COMPAT_XHB macros from core code to avoid such
discussion in the future. It's not out problem.

> I've actually converted TIP to not need xhb, but I didn't
> want to start a flame war, so I finally left it. If we
> agree I can remove those few xhb specific parts from TIP.

It's not a flame war but fantastic information. Please commit it.
It will help us very much to keep the code clean. I hope that I've
never suggested that such modification should not be done. If yes
then sorry but it ad to be some translation problem.

best regards,
Przemek
From mbelgrano at deltain.it  Mon Oct  1 14:17:42 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Oct  1 14:18:11 2007
Subject: R: R: [Harbour] New to Harbour
In-Reply-To: <47011C7D.1080505@cowgar.com>
References: <4700FED6.3010809@cowgar.com><AFB948164110ED43B5EB849E8DEEF03809A9B6@SRV02.deltain.net>
	<47011C7D.1080505@cowgar.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A9B7@SRV02.deltain.net>

I will suggest only 
http://www.vouchcac.com/harbour/harbour.htm
http://harbourminigui.googlepages.com/documentation
http://www.geocities.com/harbour_links/

Harbour doesn't have a lot of documentation but made a question and you have a reply

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Jeremy Cowgar
Inviato: luned? 1 ottobre 2007 18.13
A: Harbour Project Main Developer List.
Oggetto: Re: R: [Harbour] New to Harbour

I was looking for a more detailed Clipper/Harbour tutorial. I have 
Harbour up and running, compiling, made a libdbi interface, using that 
to do basic queries, reading/writing files, etc... I'm past the basic 
setup and hello world, but not to the point of developing something 
useful. I am speaking of things like basic control constructs, advanced 
functions, creating using code blocks, etc...

Jeremy

Massimo Belgrano wrote:
> http://culikr.sites.uol.com.br/howtoen.htm
>
>
> -----Messaggio originale-----
> Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Jeremy Cowgar
> Inviato: luned? 1 ottobre 2007 16.06
> A: harbour@harbour-project.org
> Oggetto: [Harbour] New to Harbour
>
> Greetings!
>
> I am not sure if this is a development only mailing list. I was on the 
> main Harbour website about mailing lists 
> (http://www.harbour-project.org/mailinglist.htm) and the Developer 
> mailing list was the only one that is not a 404 error. Anyway, if this 
> is incorrect for this mailing list, please direct me to the proper place.
>
> Where is a good tutorial about Clipper and Harbour? I used CA Clipper 
> many, many, many years ago and although I do not have any current 
> clipper code (or much clipper knowledge anymore) I am interested in the 
> Harbour project. I just need a kickstart. I like how easy the language 
> is and also that it is cross-platform and very easy to extend in C (last 
> night I wrapped libdbi so that I could have access to a few SQLite3 and 
> PostgreSQL databases).
>
> Thanks for any info,
>
> Jeremy
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>   

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at priv.onet.pl  Mon Oct  1 17:00:27 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Oct  1 17:00:33 2007
Subject: [Harbour] 2007-10-01 19:42 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20071001210027.GB32226@localhost.localdomain>

On Mon Oct 1 13:54:13 EDT 2007 Szak?ts Viktor wrote:
> One thought, don't call me the antichrist, but

:-))

> I tend to think we might want to consider including
> hb_enum*( var ) in core Harbour. It has the naming
> right, and actually, it doesn't look too bad to me,
> dunno about any performance (or other) issues compared
> to var:__enum*().

but what about FOR EACH overloading? See tests/foreach2.prg.

If it'll make you happy then I can add support for pseudo functions
like: hb_enumIndex(<enumName>), hb_enumKey(<enumName>),
hb_enumBase(<enumName>), hb_enumValue(<enumName>) but IMHO
it will only increase the noise if we do not define whole API
also for FOR EACH overloading. I think that current interface
is clean and play well with compiler warning messages.

best regards,
Przemek
From jeremy at cowgar.com  Mon Oct  1 17:55:13 2007
From: jeremy at cowgar.com (Jeremy Cowgar)
Date: Mon Oct  1 17:55:18 2007
Subject: [Harbour] Compile a console application?
Message-ID: <47016CC1.8040906@cowgar.com>

How do I compile a console application on Windows? Here's what I am 
doing right now that semi-works:

harbour $1.prg
gcc -o $1 $1.c dbi.c -I/c/hmg/HARBOUR/include -L/c/hmg/HARBOUR/lib \
    -ldebug \
    -lvm \
    -lrtl \
    -llang \
    -lrdd \
    -lvm \
    -lmacro \
    -lpp \
    -ldbfntx \
    -ldbfcdx \
    -ldbffpt \
    -lhbsix \
    -lgtwin \
    -lgtstd \
    -lgt \
    -lcommon \
    -lrtl \
    -lmainstd \
    -ldbi

What I mean by semi-working is that it opens a new console and then when 
the app quits, it immediately disappears.

Any thoughts?

Thanks,

Jeremy

From harbour.01 at syenar.hu  Mon Oct  1 18:13:20 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  1 18:13:24 2007
Subject: [Harbour] Compile a console application?
In-Reply-To: <47016CC1.8040906@cowgar.com>
References: <47016CC1.8040906@cowgar.com>
Message-ID: <0654C37E-E310-429D-9482-E57906BE83C1@syenar.hu>

Hi Jeremy,

In Harbour you must use Main() as the explicit startup
function, and you need to compile with the -n switch:

 > harbour test /n
--- test.prg
PROCEDURE Main()
    ? "Hello world"
    RETURN
---

Brgds,
Viktor

On 2007.10.01., at 23:55, Jeremy Cowgar wrote:

> How do I compile a console application on Windows? Here's what I am  
> doing right now that semi-works:
>
> harbour $1.prg
> gcc -o $1 $1.c dbi.c -I/c/hmg/HARBOUR/include -L/c/hmg/HARBOUR/lib \
>    -ldebug \
>    -lvm \
>    -lrtl \
>    -llang \
>    -lrdd \
>    -lvm \
>    -lmacro \
>    -lpp \
>    -ldbfntx \
>    -ldbfcdx \
>    -ldbffpt \
>    -lhbsix \
>    -lgtwin \
>    -lgtstd \
>    -lgt \
>    -lcommon \
>    -lrtl \
>    -lmainstd \
>    -ldbi
>
> What I mean by semi-working is that it opens a new console and then  
> when the app quits, it immediately disappears.
>
> Any thoughts?
>
> Thanks,
>
> Jeremy
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Oct  1 18:17:26 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  1 18:17:29 2007
Subject: [Harbour] CHANGELOG: 2007-10-01 23:50 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c80478$Blat.v2.6.2$d938d54a$16ecaa83d6d0@127.0.0.1>

2007-10-01 23:50 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * contrib/tip/Makefile
   * contrib/tip/makefile.bc
   + contrib/tip/makefile.vc
   + contrib/tip/make_vc.bat
   * contrib/tip/tip.ch
   * contrib/tip/utils.c
   * contrib/tip/base64x.c
   * contrib/tip/encmthd.c
   - contrib/tip/hbhex2n.c
   * contrib/tip/cgi.prg
   * contrib/tip/client.prg
   * contrib/tip/ftpcln.prg
   * contrib/tip/httpcln.prg
   * contrib/tip/mail.prg
   * contrib/tip/thtml.prg
   * contrib/tip/url.prg
     + Code converted to not require xhb lib.
     % Now compiled with -kM switch to avoid macro expansion 
       of strings. This is important here, as "&" char is used 
       quite often in the code, so expect a somewhat better 
       performance.
     - Removed hex number conversion functions, as compatible 
       versions are now available in Harbour with am hb_ prefix.
     + C code update to use Harbour API calls only.
     + Added VC build script.
     ! Fixed two C warnings.
     ! Standardized SVN header in one file.
     ! Set std SVN keywords and eol-style.
     ; Please test it.

   * include/hbextern.ch
   * source/rtl/hbinet.c
   * contrib/xhb/xhb.ch
   * contrib/xhb/xhbfunc.c
     * Renamed hb_IsInetSocket() to hb_inetIsSocket() to 
       keep all inet related functions in one namespace.
--
Brgds,
Viktor

From alex_degarate at hotmail.com  Mon Oct  1 19:23:50 2007
From: alex_degarate at hotmail.com (Alejandro de Garate)
Date: Mon Oct  1 19:23:55 2007
Subject: [Harbour] Source Code snapshot size
Message-ID: <BAY137-F259758D27BBC152823334C85AD0@phx.gbl>

Phil

The Harbour Source Code link from Sourceforge's page:
http://downloads.sourceforge.net/harbour-project/harbour-0.99.3.src.zip?

gives  5.62 Mb in size

but the Latest source snapshot from Harbour's page:
http://www.harbour-project.org/harbour-svn.zip

gives 14.5 Mb in Size

What is the cause of such difference ? The first one contain all source code 
including contrib folders

I think the parts more frequently updated is the Harbour core and its libs.

Can you reduce the snapshot size ?

For the user with low bandwidth it gives a big difference :)
Thanks

Alejandro

_________________________________________________________________
FREE pop-up blocking with the new MSN Toolbar - get it now! 
http://toolbar.msn.click-url.com/go/onm00200415ave/direct/01/

From philb at philb.us  Mon Oct  1 23:39:03 2007
From: philb at philb.us (Phil Barnett)
Date: Mon Oct  1 23:42:26 2007
Subject: [Harbour] Source Code snapshot size
In-Reply-To: <BAY137-F259758D27BBC152823334C85AD0@phx.gbl>
References: <BAY137-F259758D27BBC152823334C85AD0@phx.gbl>
Message-ID: <200710012339.03409.philb@philb.us>

On Monday 01 October 2007, Alejandro de Garate wrote:
> Phil
>
> The Harbour Source Code link from Sourceforge's page:
> http://downloads.sourceforge.net/harbour-project/harbour-0.99.3.src.zip?
>
> gives  5.62 Mb in size
>
> but the Latest source snapshot from Harbour's page:
> http://www.harbour-project.org/harbour-svn.zip
>
> gives 14.5 Mb in Size
>
> What is the cause of such difference ? The first one contain all source
> code including contrib folders
>
> I think the parts more frequently updated is the Harbour core and its libs.
>
> Can you reduce the snapshot size ?
>
> For the user with low bandwidth it gives a big difference :)
> Thanks

Here's what I'm doing. What would you suggest to change? (the svn co line is 
wrapped)

harbour-svn.sh
-------------------------------
#!/bin/bash

PATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin; export PATH

cd /var/www/vhosts/harbour-project.org/httpdocs

echo Checkout Harbour Subversion Repository
svn co 
https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/harbour 
harbour-svn

echo Create Zip file of Repository
rm -f harbour-svn.temp
zip -9 -q -r harbour-svn.temp harbour-svn
rm -f harbour-svn.zip
mv harbour-svn.temp harbour-svn.zip
chown harbour.psacln harbour-svn.zip

echo Create tarball of Repository
rm -f harbour-svn.temp.tgz
tar -czf harbour-svn.temp.tgz harbour-svn/
rm -f harbour-svn.tgz
mv harbour-svn.temp.tgz harbour-svn.tgz
chown harbour.psacln harbour-svn.tgz
-------------------------------
Maybe something is bloating in the checkout into the same directory over and 
over again. Are there flags I need to add to clean things up? I really don't 
want to delete the destination directory each time.

-- 
Phil Barnett
AI4OF
SKCC #600
From soporte at dsgsoftware.com  Tue Oct  2 04:26:30 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Tue Oct  2 04:26:42 2007
Subject: [Harbour] CHANGELOG: 2007-10-01 23:50 UTC+0100 Viktor
	Szakats(harbour.01 syenar.hu)
References: <01c80478$Blat.v2.6.2$d938d54a$16ecaa83d6d0@127.0.0.1>
Message-ID: <000401c804cd$f141fea0$1700000a@PcJuanxp>

Hi Viktor,

I think you should make some "find and replace" :)

1) "HGetKeyAt" by "HB_HKeyAt"
2) "hb_HGetKeyAt" by "HB_HKeyAt"
3) "HGetValueAt" by "HB_HValueAt"
4) "hb_HGetKeyAt" by "HB_HValueAt"

Best regards
Juan

----- Original Message ----- 
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: <harbour@harbour-project.org>
Sent: Tuesday, October 02, 2007 12:17 AM
Subject: [Harbour] CHANGELOG: 2007-10-01 23:50 UTC+0100 Viktor 
Szakats(harbour.01 syenar.hu)


> 2007-10-01 23:50 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>   * contrib/tip/Makefile
>   * contrib/tip/makefile.bc
>   + contrib/tip/makefile.vc
>   + contrib/tip/make_vc.bat
>   * contrib/tip/tip.ch
>   * contrib/tip/utils.c
>   * contrib/tip/base64x.c
>   * contrib/tip/encmthd.c
>   - contrib/tip/hbhex2n.c
>   * contrib/tip/cgi.prg
>   * contrib/tip/client.prg
>   * contrib/tip/ftpcln.prg
>   * contrib/tip/httpcln.prg
>   * contrib/tip/mail.prg
>   * contrib/tip/thtml.prg
>   * contrib/tip/url.prg
>     + Code converted to not require xhb lib.
>     % Now compiled with -kM switch to avoid macro expansion
>       of strings. This is important here, as "&" char is used
>       quite often in the code, so expect a somewhat better
>       performance.
>     - Removed hex number conversion functions, as compatible
>       versions are now available in Harbour with am hb_ prefix.
>     + C code update to use Harbour API calls only.
>     + Added VC build script.
>     ! Fixed two C warnings.
>     ! Standardized SVN header in one file.
>     ! Set std SVN keywords and eol-style.
>     ; Please test it.
>
>   * include/hbextern.ch
>   * source/rtl/hbinet.c
>   * contrib/xhb/xhb.ch
>   * contrib/xhb/xhbfunc.c
>     * Renamed hb_IsInetSocket() to hb_inetIsSocket() to
>       keep all inet related functions in one namespace.
> --
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 

From soporte at dsgsoftware.com  Tue Oct  2 04:38:51 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Tue Oct  2 04:39:00 2007
Subject: [Harbour] 2007-10-01 19:42 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <200710011743.l91Hhusk002277@31-mo5-4.acn.waw.pl>
Message-ID: <002801c804cf$aa14a440$1700000a@PcJuanxp>

Many thanks Przemek.

Do you have some time to sleep? :)

What do you think about a general set to hash flags HB_HASH_AUTOADD_* ?

Best regards
Juan

----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
To: <harbour@harbour-project.org>
Sent: Monday, October 01, 2007 7:43 PM
Subject: [Harbour] 2007-10-01 19:42 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> 2007-10-01 19:42 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/rtl/errorapi.c
>    + added protection against possible GPF when some assign methods
>      were called without parameters
>
>  * harbour/source/rdd/workarea.c
>    * initialize uiFalgs also when DBS_FLAGS is not set
>
>  * harbour/contrib/bmdbfcdx/bmdbfcdx1.c
>    * fixed hb_cdxSkipFilter() declaration - it should be 'static' function
>
>  * harbour/source/pp/ppcore.c
>  * harbour/source/compiler/ppcomp.c
>    + added support for changing all -k? switches by #pragma, f.e.;
>         #pragma -ks+
>         #pragma -kM-
>         #pragma -kx1
>         #pragma -kJ0
>
>  * harbour/source/compiler/hbusage.c
>    * changed -ks description
>
>  * harbour/include/hbexpra.c
>  * harbour/include/hbexprb.c
>    * do not generate error message for negative indexes and
>      [] operators are used for simple types when -ks option
>      is used
>
>  * harbour/include/hbvmpub.h
>  * harbour/include/hbapi.h
>  * harbour/source/vm/hvm.c
>  * harbour/source/vm/extend.c
>  * harbour/source/vm/itemapi.c
>  * harbour/source/vm/memvars.c
>    + added HB_IT_DEFAULT flags - it allows to check if item was changed
>
>  * harbour/source/vm/memvars.c
>  * harbour/include/hbvm.h
>    ! fixed HB_IT_MEMOFLAG updating to be Clipper compatible. Here we are
>      not Clipper compatible in one place: in clodeblock local parameters
>      with memo values are marked as MEMO but if you leave function where
>      codeblock were created then Clipper during detaching removes MEMO
>      flag. In Harbour memo flag is kept.
>
>  * harbour/include/hbvm.h
>  * harbour/source/vm/classes.c
>  * harbour/source/vm/hvm.c
>    % improved speed of extended references used for SETGET methods
>      and overloaded [] operators
>
>  * harbour/include/hbapi.h
>  * harbour/include/hbsetup.ch
>  * harbour/source/compiler/hbcomp.c
>  * harbour/source/vm/hvm.c
>  * harbour/source/vm/macro.c
>  * harbour/source/vm/cmdarg.c
>    * removed HB_COMPAT_XHB flags - only one HB_COMPAT_XHB still exist
>      in HVM in hashes.c - it will be removed soon.
>
>  * harbour/source/common/hbverdsp.c
>    * removed information about xHarbour compatibility mode - it's not
>      longer used. We are emulating xHarbour behavior using external
>      XHB library and standard compiler/HVM features
>
>  * harbour/contrib/xhb/xhb.ch
>  * harbour/contrib/xhb/xhbfunc.c
>  * harbour/source/vm/arrayshb.c
>    * moved XHB_AINS(), XHB_ADEL() from XHB lib to HVM as HB_AINS(), 
> HB_ADEL()
>
>  * harbour/contrib/xhb/xhb.ch
>    + added #pragma -ks+
>    + added transaltion for hb_enumindex( <enumvar> )
>
>  + harbour/contrib/xhb/xhbenum.c
>    + added emulation for HB_EUMMINDEX()
>
>  * harbour/contrib/xhb/xhbfunc.c
>    * do not add INET*() function wrappers for DOS builds or when
>      HB_NO_DEFAULT_INET macro is set
>
>  * harbour/contrib/xhb/xhbmsgs.c
>    * added comment
>
>  * harbour/contrib/Makefile
>    + added TIP and XHB
>
>  * harbour/make_rpm.sh
>  * harbour/harbour.spec
>    * removed HB_COMPAT_XHB, --with tip, --with xhb
>      they are not longer necessary
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 

From harbour.01 at syenar.hu  Tue Oct  2 04:44:47 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  2 04:44:55 2007
Subject: [Harbour] CHANGELOG: 2007-10-01 23:50 UTC+0100 Viktor
	Szakats(harbour.01 syenar.hu)
In-Reply-To: <000401c804cd$f141fea0$1700000a@PcJuanxp>
References: <01c80478$Blat.v2.6.2$d938d54a$16ecaa83d6d0@127.0.0.1>
	<000401c804cd$f141fea0$1700000a@PcJuanxp>
Message-ID: <3E8ED3C7-625C-4DFF-90B5-C653E962B075@syenar.hu>

Thanks Juan, I'll commit in a few mins.

Brgds,
Viktor

On 2007.10.02., at 10:26, Juan G?lvez wrote:

> Hi Viktor,
>
> I think you should make some "find and replace" :)
>
> 1) "HGetKeyAt" by "HB_HKeyAt"
> 2) "hb_HGetKeyAt" by "HB_HKeyAt"
> 3) "HGetValueAt" by "HB_HValueAt"
> 4) "hb_HGetKeyAt" by "HB_HValueAt"
>
> Best regards
> Juan
>
> ----- Original Message ----- From: "Szak?ts Viktor" <harbour. 
> 01@syenar.hu>
> To: <harbour@harbour-project.org>
> Sent: Tuesday, October 02, 2007 12:17 AM
> Subject: [Harbour] CHANGELOG: 2007-10-01 23:50 UTC+0100 Viktor  
> Szakats(harbour.01 syenar.hu)
>
>
>> 2007-10-01 23:50 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>>   * contrib/tip/Makefile
>>   * contrib/tip/makefile.bc
>>   + contrib/tip/makefile.vc
>>   + contrib/tip/make_vc.bat
>>   * contrib/tip/tip.ch
>>   * contrib/tip/utils.c
>>   * contrib/tip/base64x.c
>>   * contrib/tip/encmthd.c
>>   - contrib/tip/hbhex2n.c
>>   * contrib/tip/cgi.prg
>>   * contrib/tip/client.prg
>>   * contrib/tip/ftpcln.prg
>>   * contrib/tip/httpcln.prg
>>   * contrib/tip/mail.prg
>>   * contrib/tip/thtml.prg
>>   * contrib/tip/url.prg
>>     + Code converted to not require xhb lib.
>>     % Now compiled with -kM switch to avoid macro expansion
>>       of strings. This is important here, as "&" char is used
>>       quite often in the code, so expect a somewhat better
>>       performance.
>>     - Removed hex number conversion functions, as compatible
>>       versions are now available in Harbour with am hb_ prefix.
>>     + C code update to use Harbour API calls only.
>>     + Added VC build script.
>>     ! Fixed two C warnings.
>>     ! Standardized SVN header in one file.
>>     ! Set std SVN keywords and eol-style.
>>     ; Please test it.
>>
>>   * include/hbextern.ch
>>   * source/rtl/hbinet.c
>>   * contrib/xhb/xhb.ch
>>   * contrib/xhb/xhbfunc.c
>>     * Renamed hb_IsInetSocket() to hb_inetIsSocket() to
>>       keep all inet related functions in one namespace.
>> --
>> Brgds,
>> Viktor
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>

From harbour.01 at syenar.hu  Tue Oct  2 04:53:09 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  2 04:53:15 2007
Subject: [Harbour] CHANGELOG: 2007-10-02 10:49 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c804d1$Blat.v2.6.2$a82349a0$9e096627054@127.0.0.1>

2007-10-02 10:49 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * harbour/ChangeLog
   + harbour/ChangeLog.019
     * ChangeLog archived.

   * contrib/tip/cgi.prg
   * contrib/tip/url.prg
   * contrib/tip/httpcln.prg
   * contrib/tip/mail.prg
     ! Some hash function calls corrected after last modification.
       Thanks Juan.
--
Brgds,
Viktor

From druzus at priv.onet.pl  Tue Oct  2 04:57:51 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Oct  2 04:57:57 2007
Subject: [Harbour] 2007-10-02 10:57 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710020857.l928vpeg011321@31-mo5-4.acn.waw.pl>

2007-10-02 10:57 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbexpra.c
    + added support for HB_ENUM*([@]<varname>) functions - disabled
      by default can be enabled by HB_USE_ENUM_FUNCTIONS macro

  * harbour/source/rtl/gttone.c
    * use assembler code for tone emulation for POCC/XCC compiler only
      for X86 platforms

  * harbour/source/rtl/filesys.c
    * do not include <share.h> for POCC/XCC

  * harbour/source/compiler/gencli.c
    * pacify warning

  * harbour/config/w32/owatcom.cf
  * harbour/config/w32/xcc.cf
    * updated description in header files

  + harbour/config/w32/pocc.cf
    + added support for Pelles ISO C Compiler

best regards
Przemek
From harbour.01 at syenar.hu  Tue Oct  2 05:38:51 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  2 05:39:03 2007
Subject: [Harbour] Finishing DEFEXT support
In-Reply-To: <20071001180123.GA32226@localhost.localdomain>
References: <20070929193258.GA26082@localhost.localdomain>
	<200710010907.08239.teo@windtelsoft.com>
	<F3754005-79E6-49B0-8293-F98551301A9A@syenar.hu>
	<200710010938.43968.teo@windtelsoft.com>
	<20071001180123.GA32226@localhost.localdomain>
Message-ID: <F44E70A1-C880-4E82-A318-FADB68474479@syenar.hu>

>>> xHb lib, is only to give a easy path to port xHarbour code to  
>>> Harbour.
>> Exactly.
>
> I fully agree. This library should be _only_ for external xHarbour
> oriented code. But it also should make xHarbour emulation as good
> as possible so I think we can add this library all xHarbour extensions
> which can be used without risk of corrupting HVM internals. IMHO
> discussing on this forum about keeping clean xHarbour extension
> clean does not make sense. I thought that we created separate library
> and removed all HB_COMPAT_XHB macros from core code to avoid such
> discussion in the future. It's not out problem.

That's exactly the idea.

>> I've actually converted TIP to not need xhb, but I didn't
>> want to start a flame war, so I finally left it. If we
>> agree I can remove those few xhb specific parts from TIP.
>
> It's not a flame war but fantastic information. Please commit it.
> It will help us very much to keep the code clean. I hope that I've
> never suggested that such modification should not be done. If yes
> then sorry but it ad to be some translation problem.

Not at all, just sometimes there is too much worrying here
about some xhb bits, so I didn't want to step on anybody's toes,
plus now it will be bit harder to sync with xhb (I don't exactly
see who is maintaining this lib and where).

See the changes in the repository. I hope I didn't miss too
much hidden xhb features.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Oct  2 05:47:04 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  2 05:47:12 2007
Subject: [Harbour] 2007-10-01 19:42 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20071001210027.GB32226@localhost.localdomain>
References: <20071001210027.GB32226@localhost.localdomain>
Message-ID: <E6DD71D1-D9D5-494F-A6F4-11F492469663@syenar.hu>

Hi Przemek,

On 2007.10.01., at 23:00, Przemyslaw Czerpak wrote:

> On Mon Oct 1 13:54:13 EDT 2007 Szak?ts Viktor wrote:
>> One thought, don't call me the antichrist, but
>
> :-))
>
>> I tend to think we might want to consider including
>> hb_enum*( var ) in core Harbour. It has the naming
>> right, and actually, it doesn't look too bad to me,
>> dunno about any performance (or other) issues compared
>> to var:__enum*().
>
> but what about FOR EACH overloading? See tests/foreach2.prg.
>
> If it'll make you happy then I can add support for pseudo functions
> like: hb_enumIndex(<enumName>), hb_enumKey(<enumName>),
> hb_enumBase(<enumName>), hb_enumValue(<enumName>) but IMHO
> it will only increase the noise if we do not define whole API
> also for FOR EACH overloading. I think that current interface
> is clean and play well with compiler warning messages.

I didn't know about overloading, so thanks for mentioning it,
but I think that most users will use FOR EACH in its simplest
form (after checking the test program).

I might not be in my most imaginative mood, but to me it looks
like a loop on steroids, and I fail to see what more can it
offer than a normal FOR NEXT (or DO WHILE) loop with sophisticated
start/end/step logic. I'm not saying we should remove it, but
I find its "real world" usefulness relatively low at this point.
Of course I'm ready to be enlightened :)

(Moreover: I'm not sure if such an enum-ed FOR EACH can stand
up in speed against a more sophisticated DO WHILE one with the
same functionality.)

Brgds,
Viktor

From druzus at priv.onet.pl  Tue Oct  2 06:54:08 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Oct  2 06:54:13 2007
Subject: [Harbour] 2007-10-01 19:42 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <E6DD71D1-D9D5-494F-A6F4-11F492469663@syenar.hu>
References: <20071001210027.GB32226@localhost.localdomain>
	<E6DD71D1-D9D5-494F-A6F4-11F492469663@syenar.hu>
Message-ID: <20071002105408.GA19668@localhost.localdomain>

On Tue, 02 Oct 2007, Szak?ts Viktor wrote:
> I didn't know about overloading, so thanks for mentioning it,
> but I think that most users will use FOR EACH in its simplest
> form (after checking the test program).
> I might not be in my most imaginative mood, but to me it looks
> like a loop on steroids, and I fail to see what more can it
> offer than a normal FOR NEXT (or DO WHILE) loop with sophisticated
> start/end/step logic. I'm not saying we should remove it, but
> I find its "real world" usefulness relatively low at this point.
> Of course I'm ready to be enlightened :)
> (Moreover: I'm not sure if such an enum-ed FOR EACH can stand
> up in speed against a more sophisticated DO WHILE one with the
> same functionality.)

It's universal form of iteration. It can be used for any object
which support it. HVM has build in iteration for ARRAYs, HASHes
and STRINGs. It can also iterate object instance variables just
like normal arrays if class of given object does not support
their own FOR EACH version. This loop gives common interface
for different types f.e.:

    FOR EACH barcode IN SqlQuerry():New( "SELECT BARCODE FROM ARTICULES" )
       ? barcode
    NEXT

you do not have to know how it's internally represented or if the result
set is calculated at beginning of loop or dynamically during iterations.
You may not like it but Harbour application have to exchange data with
other programs and such interface begins to be some type of standard in
different languages, f.e. FOR EACH can iterate OLE objects created by
CreateObject() and in such case low level iterations depends 3-rd party
code. I do not use WIN32OLE because it's MS-Windows only extension but
I hope that some windows users can send you here some nice and small
examples (Enrico?). BTW I still do not know if FOR EACH for WIN32OLE
objects works well. I cannot test it and I haven't received any
confirmation from MS-Windows users. Such example will be also good
test program.
In summary FOR EACH is common interface to iterate members of different
data types which can be controlled and tuned by programmer. User does
not have t know anything about low level implementation. F.e. you do
not have to know OLE internals to iterate object returned by CreateObject().
In most of cases it's also faster then normal FOR/NEXT (but not always and
user should know about it and not replace all FOR/NEXT by FOR EACH/NEXT
without analyzing what happens like in xHarbour core code or some well
known projects with [x]Harbour extensions) but it's not the most important
thing in FOR EACH loop.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Oct  2 07:32:41 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  2 07:32:50 2007
Subject: [Harbour] 2007-10-01 19:42 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20071002105408.GA19668@localhost.localdomain>
References: <20071001210027.GB32226@localhost.localdomain>
	<E6DD71D1-D9D5-494F-A6F4-11F492469663@syenar.hu>
	<20071002105408.GA19668@localhost.localdomain>
Message-ID: <152E8AAF-2EA5-4258-86E1-ECA0CA2C64A6@syenar.hu>

Hi Przemek,

Okey, thanks a lot. This is a useful description of this
feature, I hope not just for me, but most of us on the list.

Brgds,
Viktor

On 2007.10.02., at 12:54, Przemyslaw Czerpak wrote:

> On Tue, 02 Oct 2007, Szak?ts Viktor wrote:
>> I didn't know about overloading, so thanks for mentioning it,
>> but I think that most users will use FOR EACH in its simplest
>> form (after checking the test program).
>> I might not be in my most imaginative mood, but to me it looks
>> like a loop on steroids, and I fail to see what more can it
>> offer than a normal FOR NEXT (or DO WHILE) loop with sophisticated
>> start/end/step logic. I'm not saying we should remove it, but
>> I find its "real world" usefulness relatively low at this point.
>> Of course I'm ready to be enlightened :)
>> (Moreover: I'm not sure if such an enum-ed FOR EACH can stand
>> up in speed against a more sophisticated DO WHILE one with the
>> same functionality.)
>
> It's universal form of iteration. It can be used for any object
> which support it. HVM has build in iteration for ARRAYs, HASHes
> and STRINGs. It can also iterate object instance variables just
> like normal arrays if class of given object does not support
> their own FOR EACH version. This loop gives common interface
> for different types f.e.:
>
>     FOR EACH barcode IN SqlQuerry():New( "SELECT BARCODE FROM  
> ARTICULES" )
>        ? barcode
>     NEXT
>
> you do not have to know how it's internally represented or if the  
> result
> set is calculated at beginning of loop or dynamically during  
> iterations.
> You may not like it but Harbour application have to exchange data with
> other programs and such interface begins to be some type of  
> standard in
> different languages, f.e. FOR EACH can iterate OLE objects created by
> CreateObject() and in such case low level iterations depends 3-rd  
> party
> code. I do not use WIN32OLE because it's MS-Windows only extension but
> I hope that some windows users can send you here some nice and small
> examples (Enrico?). BTW I still do not know if FOR EACH for WIN32OLE
> objects works well. I cannot test it and I haven't received any
> confirmation from MS-Windows users. Such example will be also good
> test program.
> In summary FOR EACH is common interface to iterate members of  
> different
> data types which can be controlled and tuned by programmer. User does
> not have t know anything about low level implementation. F.e. you do
> not have to know OLE internals to iterate object returned by  
> CreateObject().
> In most of cases it's also faster then normal FOR/NEXT (but not  
> always and
> user should know about it and not replace all FOR/NEXT by FOR EACH/ 
> NEXT
> without analyzing what happens like in xHarbour core code or some well
> known projects with [x]Harbour extensions) but it's not the most  
> important
> thing in FOR EACH loop.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From e.m.giordano at emagsoftware.it  Tue Oct  2 08:39:56 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Oct  2 08:40:09 2007
Subject: [Harbour] 2007-10-01 19:42 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20071001210027.GB32226@localhost.localdomain><E6DD71D1-D9D5-494F-A6F4-11F492469663@syenar.hu>
	<20071002105408.GA19668@localhost.localdomain>
Message-ID: <01d801c804f1$56c61270$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: martedi 2 ottobre 2007 12.54
Oggetto: Re: [Harbour] 2007-10-01 19:42 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> I hope that some windows users can send you here some nice and small
> examples (Enrico?). BTW I still do not know if FOR EACH for WIN32OLE
> objects works well. I cannot test it and I haven't received any
> confirmation from MS-Windows users. Such example will be also good
> test program.

This is a sample:

FUNCTION MAIN()

    LOCAL oExcel := CREATEOBJECT( "Excel.Application" )

    LOCAL oWorkBook := oExcel:WorkBooks:Add()

    LOCAL oWorkSheet

    FOR EACH oWorkSheet IN oWorkBook:WorkSheets
        ? oWorkSheet:Name
    NEXT

    oExcel:Quit()

    RETURN NIL

But while it works fine with xHarbour, it gives the following error with 
Harbour:

Error BASE/1005  No exported variable: _ENUMVALUE
Called from __ENUMVALUE(0)
Called from TOLEAUTO:__ENUMSKIP(664)
Called from TOLEAUTO:__ENUMSTART(650)
Called from MAIN(0)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at priv.onet.pl  Tue Oct  2 09:04:25 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Oct  2 09:04:31 2007
Subject: [Harbour] 2007-10-01 19:42 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20071002105408.GA19668@localhost.localdomain>
References: <20071001210027.GB32226@localhost.localdomain>
	<E6DD71D1-D9D5-494F-A6F4-11F492469663@syenar.hu>
	<20071002105408.GA19668@localhost.localdomain>
Message-ID: <20071002130425.GA21146@localhost.localdomain>

On Tue Oct 2 08:39:56 EDT 2007, Enrico Maria Giordano wrote:
> This is a sample:
>
> FUNCTION MAIN()
>     LOCAL oExcel := CREATEOBJECT( "Excel.Application" )
>     LOCAL oWorkBook := oExcel:WorkBooks:Add()
>     LOCAL oWorkSheet
>     FOR EACH oWorkSheet IN oWorkBook:WorkSheets
>         ? oWorkSheet:Name
>     NEXT
>     oExcel:Quit()
>     RETURN NIL
> 
> But while it works fine with xHarbour, it gives the following error with
> Harbour:
> Error BASE/1005  No exported variable: _ENUMVALUE
> Called from __ENUMVALUE(0)
> Called from TOLEAUTO:__ENUMSKIP(664)
> Called from TOLEAUTO:__ENUMSTART(650)
> Called from MAIN(0)

Many thanks for example and test. It was caused by missing @ in
__enumStart() method. Just fixed at:
    2007-10-02 14:58 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
Can you make a test? It' possible that sth else is also broken.

best regards,
Przemek
From dbtopas at dbtopas.lt  Tue Oct  2 11:21:15 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Oct  2 11:22:02 2007
Subject: [Harbour] 2007-10-01 19:42 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <200710011743.l91Hhusk002277@31-mo5-4.acn.waw.pl>
References: <200710011743.l91Hhusk002277@31-mo5-4.acn.waw.pl>
Message-ID: <470261EB.6090801@dbtopas.lt>

Przemyslaw Czerpak wrote:
>   * harbour/source/vm/hvm.c
>   * harbour/source/vm/extend.c
>   * harbour/source/vm/itemapi.c
>   * harbour/source/vm/memvars.c
>     + added HB_IT_DEFAULT flags - it allows to check if item was changed

Hi,


I've looked to the code, you're using HB_IT_DEFAULT to detect changes in 
extended references. Can this flag be used for some other purpose, or is 
it specific to this task?


Best regards,
Mindaugas

From e.m.giordano at emagsoftware.it  Tue Oct  2 16:31:24 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Oct  2 16:31:32 2007
Subject: [Harbour] 2007-10-01 19:42 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20071001210027.GB32226@localhost.localdomain><E6DD71D1-D9D5-494F-A6F4-11F492469663@syenar.hu><20071002105408.GA19668@localhost.localdomain>
	<20071002130425.GA21146@localhost.localdomain>
Message-ID: <00ad01c80533$33dde430$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: martedi 2 ottobre 2007 15.04
Oggetto: Re: [Harbour] 2007-10-01 19:42 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> Many thanks for example and test. It was caused by missing @ in
> __enumStart() method. Just fixed at:
>    2007-10-02 14:58 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> Can you make a test? It' possible that sth else is also broken.

My sample works fine now, thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at priv.onet.pl  Tue Oct  2 18:34:29 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Oct  2 18:34:36 2007
Subject: [Harbour] 2007-10-01 19:42 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20071002130425.GA21146@localhost.localdomain>
References: <20071001210027.GB32226@localhost.localdomain>
	<E6DD71D1-D9D5-494F-A6F4-11F492469663@syenar.hu>
	<20071002105408.GA19668@localhost.localdomain>
	<20071002130425.GA21146@localhost.localdomain>
Message-ID: <20071002223429.GA22341@localhost.localdomain>

On Tue Oct 2 16:31:24 EDT 2007, Enrico Maria Giordano wrote:
> > Can you make a test? It' possible that sth else is also broken.
> My sample works fine now, thank you.

Thank you very much for your tests and confirmation.

best regards,
Przemek
From jeremy at cowgar.com  Wed Oct  3 02:17:21 2007
From: jeremy at cowgar.com (Jeremy Cowgar)
Date: Wed Oct  3 02:17:27 2007
Subject: [Harbour] PgSQL RDD example?
Message-ID: <470333F1.4090506@cowgar.com>

Does anyone have a PgSQL RDD example? I am trying to make it function. I 
have managed to compile it and begin to make my own app, thus far I have:

procedure main()
    local nConn, xcDatabase := "SELECT code, dept, name, tax FROM test 
ORDER BY code", xcVia := "PGRDD"
    request PGRDD
    nConn := dbpgconnection("localhost;johndoe;johndoe;johndoe")
    use (xcDatabase) ALIAS MyTest VIA (xcVia) CONNECTION nConn
    ? MyTest->(dbgotop())
    ? MyTest->code, MyTest->dept
    dbpgclearconnection(nConn)
Return

That does not compile. First I get an error on ALIAS: "syntax error at 
'ALIAS'"
To try an make it compile, I remove the ALIAS section and then get an 
error on VIA: "syntax error at 'VIA'"
If I remove "CONNECTION nConn" then it compiles, however, when you run 
it you get:

Error PGRDD/1000 Open error, Invalid connection handle: select code, 
dept, name, tax FROM test ORDER BY code
Called from UR_SUPER_ERROR(0)
Called from PG_OPEN(177)
Called from DBUSEAREA(0)
Called from MAIN(8)

Can anyone help me with this?

Thanks,

Jeremy Cowgar

From mbelgrano at deltain.it  Wed Oct  3 03:19:15 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Oct  3 03:19:29 2007
Subject: R: [Harbour] PgSQL RDD example?
In-Reply-To: <470333F1.4090506@cowgar.com>
References: <470333F1.4090506@cowgar.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A9C2@SRV02.deltain.net>

This sample will be used with any rdd

REQUEST ADS
REQUEST DBFCDX
request DBFFPT
REQUEST BMDBFCDX
request PGRDD

#command DEFAULT <v1> TO <x1> [, <vN> TO <xN> ];
        => IF((<v1>)=NIL,<v1>:=<x1>,NIL) [; IF((<vN>)=NIL,<vN>:=<xN>,NIL)]

#INCLUDE "ORD.CH"
#xcommand SET DESCENDING ON => ordDescend(,,.T.)
#xcommand SET DESCENDING OFF => ordDescend(,,.F.)
#command CLEAR SCOPE                                                       ;
      => OrdScope( 0 )                                                  ;
       ; OrdScope( 1 )
#xcommand SET SCOPETOP TO <value>                                          ;
      => OrdScope( 0, <value> )
#xcommand SET SCOPEBOTTOM TO <value>                                       ;
      => OrdScope( 1, <value> )
#command SET SCOPE TO                                                      ;
      => OrdScope( 0 )                                                  ;
       ; OrdScope( 1 )
#command SET SCOPE TO <value>                                              ;
      => OrdScope( 0, <value> )                                         ;
       ; OrdScope( 1, <value> )


FUNCTION MAIN(x_command)
  ? x_command
// x_rdd="ADS"
// x_rdd="MEDNTX"
 default x_command TO "/BMDBFCDX"
 IF "/ADL" $ UPPER(X_COMMAND)
    G_SERVER="L"
    x_rdd="ADS"
 ENDIF
 IF "/ADS" $ UPPER(X_COMMAND)
    G_SERVER="A"
    x_rdd="ADS"
 ENDIF
 IF "/DBFCDX" $ UPPER(X_COMMAND)
    G_SERVER="D1"
    x_rdd="DBFCDX"
 ENDIF
 IF "/BMDBFCDX" $ UPPER(X_COMMAND)
    G_SERVER="D2"
    x_rdd="BMDBFCDX"
 ENDIF
IF "/PGRDD" $ UPPER(X_COMMAND)
    G_SERVER="S3"
    X_RDD="PGRDD"
ENDIF



 if x_rdd="ADS"
   rddRegister( "ADS", 1 )
   rddsetdefault( "ADS" )
   IF G_SERVER="L"
     AdsSetServerType ( 1 )  // SET SERVER LOCAL
     SET(_SET_OPTIMIZE,.T.)
     ELSE
     AdsSetServerType ( 2 )  // SET SERVER remote
     SET(_SET_OPTIMIZE,.T.)
   ENDIF
   AdsSetFileType(2)   // SET FILETYPE TO CDX // if you are using DBFCDX
   AdsLocking(  .f.   )  // // SET AXS LOCKING OFF
   ADSRightsCheck( .f.)
   AdsSetCharType(2,.T.)             // font oem + recupera il carattere oem
   G_RDDACT=RDDSETDEFAULT()
 else
    nConn := dbpgconnection("localhost;johndoe;johndoe;johndoe")
 ELSE
   rddsetdefault( x_rdd )
   SET OPTIMIZE ON
 ENDIF
 set deleted off


nrec = 15000            && number of records in dbtest table
nuse = 15000             && number of open (USE) ops to test
ngtopbot = 15000         && number of GO TOP and GO BOTTOM ops to test
ngoto = 15000            && number of GOTO ops to test
nseek = 15000            && number of SEEK ops to test
ndirchg = 15000          && number of "direction change" ops to test
set printer on
set printer to "DBTESTA.TXT" ADDITIVE
set alternate to "dbtest.TXT"
set alternate on
CLS
? "RDD="+X_RDD +" option "+G_SERVER

* TEST TABLE
aDbf := {}
AADD( aDbf, { "FN", "N", 10, 0 } )
AADD( aDbf, { "FNF", "N", 12, 4 } )
AADD( aDbf, { "FC", "C", 40, 0 } )
AADD( aDbf, { "FD", "D", 8, 0 } )
AADD( aDbf, { "FL", "L", 1, 0 } )
AADD( aDbf, { "FM", "M", 0, 0 } )
FOR A=1 TO 20
AADD( aDbf, { "FIELD"+ALLTRIM(STR(A)), "C", 10, 0 } )
NEXT A


dbCreate("dbtest",aDbf)
USE dbtest EXCLUSIVE
index on fc + str(fn,10,0) to DBtest_i1

? "Creating test database - inserting", nrec, " records"
use dbtest  SHARED
IF NETERR()
   ? "Unable to open DBTEST - quitting"
   QUIT
ENDIF

? "INSERT (NO MEMO):         "
st = seconds()
for i = 1 to nrec
        if mod(i,1000) = 0
                // @ 0, 0 SAY i
        endif
        append blank
        replace fn with INT(sin(i)*i)
        replace fnf with sin(i)*i
        replace fc with replicate( CHR(65+INT(ABS(sin(i)*25)) ), 40 )
        replace fd with date() + MOD(INT(sin(i)*i),10000)
        replace fl with IIF( SIN(i) >= 0, .T., .F. )
next
 commit
tapp = seconds()-st
* ZAP
USE
 ?? INT(nrec/tapp), "r/s"

? "INSERT (WITH MEMO):       "
 USE dbtest via x_rdd
 set index to DBtest_i1
 st = seconds()
 for i = 1 to nrec/10
        // @ 0, 0 SAY i
        append blank
        replace fn with INT(sin(i)*i)
        replace fnf with sin(i)*i
        replace fc with replicate( CHR(65+INT(ABS(sin(i)*25))), 40 )
        replace fd with date() + INT(sin(i)*i)
        replace fl with IIF( SIN(i) >= 0, .T., .F. )
        replace fm with replicate( CHR(65+INT(ABS(sin(i)*25)) ), 400 )
 next
 commit
 tapp = seconds()-st
 USE
 ?? INT(nrec/tapp), "record in 1 second"


? "OPEN (USE):               "
st = seconds()
for i = 1 to nuse/10
        USE dbtest
next
USE
tuse = seconds()-st
?? INT(nuse/tuse), "open in 1 sec"


? "GO TOP:                   "
USE dbtest SHARED
st = seconds()
for i = 1 to ngtopbot
        GO TOP
next
USE
tgtop = seconds()-st
?? INT(ngtopbot/tgtop), "operation in 1 second"


? "GO TOP(IDX):              "
USE dbtest SHARED
SET INDEX TO DBTEST_I1
st = seconds()
for i = 1 to ngtopbot
        GO TOP
next
USE
tgtop = seconds()-st
?? INT(ngtopbot/tgtop), "g/s"

* wait

? "GO BOTTOM:                "
USE dbtest SHARED
st = seconds()
for i = 1 to ngtopbot
        GO BOTTOM
next
USE
tgbot = seconds()-st
?? INT(ngtopbot/tgbot), "g/s"


? "GO BOTTOM(IDX):           "
USE dbtest SHARED
SET INDEX TO DBTEST_I1
st = seconds()
for i = 1 to ngtopbot
        GO BOTTOM
next
USE
tgbot = seconds()-st
?? INT(ngtopbot/tgbot), "g/s"


? "GO TOP/BOTTOM:            "
USE dbtest  SHARED
st = seconds()
for i = 1 to ngtopbot
        GO TOP
        GO BOTTOM
next
USE
tgbot = seconds()-st
?? INT(ngtopbot/tgbot), "g/s"



? "GO TO:                    "
USE dbtest SHARED
st = seconds()
for i = 1 to ngoto
        GOTO MOD(ngoto*i,nrec)+1
next
USE
tgoto = seconds()-st
?? INT(ngoto/tgoto), "g/s"


? "SEEK:                     "
USE dbtest SHARED
SET INDEX TO DBTEST_I1
st = seconds()
for i = 1 to nseek
        SEEK replicate( CHR(65+INT(ABS(sin(i)*25))), 40 ) SOFTSEEK

*        IF .NOT. FOUND()
*                ? "SEEK ERROR"
*               QUIT
*        ENDIF
*       @ 1,0 SAY FOUND()
next
USE
tseek = seconds()-st
?? INT(nseek/tseek), "s/s"


? "SKIP:                     "
USE dbtest SHARED
st = seconds()
go top
while ! eof()
        skip
enddo
USE
tskip = seconds()-st
?? INT((nrec)/tskip), "r/s"

? "SKIP -:                   "
USE dbtest SHARED
go bottom
st = seconds()
while ! bof()
        skip -1
enddo
USE
tskip = seconds()-st
?? INT(nrec/tskip), "r/s"


? "SKIP(IDX):                "
USE dbtest SHARED
set index to DBtest_i1
sum = 0
st = seconds()
while ! eof()
        sum = sum + fn
        skip
enddo
USE
tskip = seconds()-st
?? INT(nrec/tskip), "r/s"

? "SKIP(IDX) -:              "
USE dbtest SHARED
set index to DBtest_i1
sum = 0
go bottom
st = seconds()
while ! bof()
        sum = sum + fn
        skip -1
enddo
USE
tskip = seconds()-st
?? INT(nrec/tskip), "r/s"

? "SKIP(filter) -:           "
USE dbtest SHARED
set index to DBtest_i1
goto nrec
rlock()
replace fc with "abc"
goto int(nrec/2)
rlock()
replace fc with "abc"
goto int(nrec/4)
rlock()
replace fc with "abc"
// commit
// unlock
set filter to fc="abc"
sum = 0
go bottom
st = seconds()
while ! bof()
        sum = sum + fn
        skip -1
enddo
USE
tskip = seconds()-st
?? INT(nrec/tskip), "r/s"


 ? "RLOCK:                    "
 USE dbtest shared
 SET INDEX TO DBTEST_I1
 st = seconds()
 while ! eof()
        IF .not. rlock()
                ? "RLOCK ERROR"
                quit
        endif
        skip
 enddo
 USE
 tskip = seconds()-st
 ?? INT(nrec/tskip), "r/s"


 ? "RLOCK+REPLACE:            "
 USE dbtest shared
 SET INDEX TO DBTEST_I1
 st = seconds()
 while ! eof()
        IF .not. rlock()
                ? "RLOCK ERROR"
                quit
        endif
        replace fnf with sin(recno()-1)*(recno()-1)
        skip
 enddo
 USE
 tskip = seconds()-st
 ?? INT(nrec/tskip), "r/s"

 ? "REPLACE ON EXCLUSIVE:     "
 USE dbtest exclusive
 SET INDEX TO DBTEST_I1
 st = seconds()
 while ! eof()
        IF .not. rlock()
                ? "RLOCK ERROR"
                quit
        endif
        replace fnf with sin(recno()-1)*(recno()-1)
        skip
 enddo
 USE
 tskip = seconds()-st
 ?? INT(nrec/tskip), "r/s"

set printer on
set printer to

return

function sin
   PARAMETER X_VALORE
   // V=VAL(STR(V))
   return (X_vALORE - INT(X_VALORE/6.28)*6.28 - 3.14)/3.14


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Jeremy Cowgar
Inviato: mercoled? 3 ottobre 2007 8.17
A: Harbour Project Main Developer List.
Oggetto: [Harbour] PgSQL RDD example?

Does anyone have a PgSQL RDD example? I am trying to make it function. I 
have managed to compile it and begin to make my own app, thus far I have:

procedure main()
    local nConn, xcDatabase := "SELECT code, dept, name, tax FROM test 
ORDER BY code", xcVia := "PGRDD"
    request PGRDD
    nConn := dbpgconnection("localhost;johndoe;johndoe;johndoe")
    use (xcDatabase) ALIAS MyTest VIA (xcVia) CONNECTION nConn
    ? MyTest->(dbgotop())
    ? MyTest->code, MyTest->dept
    dbpgclearconnection(nConn)
Return

That does not compile. First I get an error on ALIAS: "syntax error at 
'ALIAS'"
To try an make it compile, I remove the ALIAS section and then get an 
error on VIA: "syntax error at 'VIA'"
If I remove "CONNECTION nConn" then it compiles, however, when you run 
it you get:

Error PGRDD/1000 Open error, Invalid connection handle: select code, 
dept, name, tax FROM test ORDER BY code
Called from UR_SUPER_ERROR(0)
Called from PG_OPEN(177)
Called from DBUSEAREA(0)
Called from MAIN(8)

Can anyone help me with this?

Thanks,

Jeremy Cowgar

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From e.m.giordano at emagsoftware.it  Wed Oct  3 03:29:13 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Oct  3 03:29:16 2007
Subject: [Harbour] 2007-10-01 19:42 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20071001210027.GB32226@localhost.localdomain><E6DD71D1-D9D5-494F-A6F4-11F492469663@syenar.hu><20071002105408.GA19668@localhost.localdomain><20071002130425.GA21146@localhost.localdomain>
	<20071002223429.GA22341@localhost.localdomain>
Message-ID: <001701c8058f$18b18b10$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoledi 3 ottobre 2007 0.34
Oggetto: Re: [Harbour] 2007-10-01 19:42 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> Thank you very much for your tests and confirmation.

That's the very least I can do to support your monumental work.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Wed Oct  3 08:54:12 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  3 08:54:20 2007
Subject: [Harbour] 2007-10-01 19:42 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <001701c8058f$18b18b10$ca64fea9@emag>
References: <20071002223429.GA22341@localhost.localdomain>
	<001701c8058f$18b18b10$ca64fea9@emag>
Message-ID: <20071003125412.GB22365@localhost.localdomain>

On Wed, 03 Oct 2007, Enrico Maria Giordano wrote:
> >Thank you very much for your tests and confirmation.
> That's the very least I can do to support your monumental work.

Not such monumental :) and your help is very important for me because
I cannot test OLE code in my Linux box.

Sorry for disturbing but I'd like to also ask you or some other Windows
developer about testing this example from Luis.

    function main()
       local oExcel
       oExcel := TOleAuto():New( "Excel.Application" )
       oExcel:DisplayAlerts := .f.
       oExcel:Set( "DisplayAlerts", .t. )
       ? "test successful"
    return nil

I do not know if it works with current code or not and such information
will help me before committing recent Ron's modifications borrowed from
xHarbour.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Wed Oct  3 09:16:26 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Oct  3 09:16:35 2007
Subject: [Harbour] 2007-10-01 19:42 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
References: <20071002223429.GA22341@localhost.localdomain><001701c8058f$18b18b10$ca64fea9@emag>
	<20071003125412.GB22365@localhost.localdomain>
Message-ID: <005f01c805bf$9a0c5110$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoledi 3 ottobre 2007 14.54
Oggetto: Re: [Harbour] 2007-10-01 19:42 UTC+0200 
PrzemyslawCzerpak(druzus/at/priv.onet.pl)


> Sorry for disturbing but I'd like to also ask you or some other Windows
> developer about testing this example from Luis.
>
>    function main()
>       local oExcel
>       oExcel := TOleAuto():New( "Excel.Application" )
>       oExcel:DisplayAlerts := .f.
>       oExcel:Set( "DisplayAlerts", .t. )
>       ? "test successful"
>    return nil
>
> I do not know if it works with current code or not and such information
> will help me before committing recent Ron's modifications borrowed from
> xHarbour.

The result is:

test successful

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Wed Oct  3 09:49:28 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  3 09:49:36 2007
Subject: [Harbour] 2007-10-01 19:42 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <005f01c805bf$9a0c5110$ca64fea9@emag>
References: <20071003125412.GB22365@localhost.localdomain>
	<005f01c805bf$9a0c5110$ca64fea9@emag>
Message-ID: <20071003134928.GA30697@localhost.localdomain>

On Wed, 03 Oct 2007, Enrico Maria Giordano wrote:
> The result is:
> test successful

Thank you very much. I'll commit the modifications today and then
I'll ask about repeating this and ENUM test to check if they not
brakes sth.

best regards,
Przemek
From soporte at dsgsoftware.com  Wed Oct  3 10:00:35 2007
From: soporte at dsgsoftware.com (=?iso-8859-2?Q?Juan_G=E1lvez?=)
Date: Wed Oct  3 10:01:12 2007
Subject: [Harbour] 2007-10-01 19:42
	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
References: <20071002223429.GA22341@localhost.localdomain><001701c8058f$18b18b10$ca64fea9@emag><20071003125412.GB22365@localhost.localdomain>
	<005f01c805bf$9a0c5110$ca64fea9@emag>
Message-ID: <001401c805c5$d0fa2610$1700000a@PcJuanxp>

Here I also get "test successful".

Best regards
Juan

----- Original Message ----- 
From: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Wednesday, October 03, 2007 3:16 PM
Subject: Re: [Harbour] 2007-10-01 19:42 
UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)


>
> -----Messaggio Originale----- 
> Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
> A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
> Data invio: mercoledi 3 ottobre 2007 14.54
> Oggetto: Re: [Harbour] 2007-10-01 19:42 UTC+0200 
> PrzemyslawCzerpak(druzus/at/priv.onet.pl)
>
>
>> Sorry for disturbing but I'd like to also ask you or some other Windows
>> developer about testing this example from Luis.
>>
>>    function main()
>>       local oExcel
>>       oExcel := TOleAuto():New( "Excel.Application" )
>>       oExcel:DisplayAlerts := .f.
>>       oExcel:Set( "DisplayAlerts", .t. )
>>       ? "test successful"
>>    return nil
>>
>> I do not know if it works with current code or not and such information
>> will help me before committing recent Ron's modifications borrowed from
>> xHarbour.
>
> The result is:
>
> test successful
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 

From e.m.giordano at emagsoftware.it  Wed Oct  3 10:19:29 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Oct  3 10:19:35 2007
Subject: [Harbour] 2007-10-01 19:42
	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
References: <20071003125412.GB22365@localhost.localdomain><005f01c805bf$9a0c5110$ca64fea9@emag>
	<20071003134928.GA30697@localhost.localdomain>
Message-ID: <00d601c805c8$6932e3c0$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoledi 3 ottobre 2007 15.49
Oggetto: Re: [Harbour] 2007-10-01 19:42 
UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)


> Thank you very much. I'll commit the modifications today and then
> I'll ask about repeating this and ENUM test to check if they not
> brakes sth.

"break" :-)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Wed Oct  3 11:07:31 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  3 11:07:38 2007
Subject: [Harbour] ChangeLog 2007-10-03 17:04 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20071003150731.GA16429@localhost.localdomain>

2007-10-03 17:04 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  + harbour/tests/oleenum.prg
    + added Enrico example and test code for enumerators and OLE objects

  * harbour/contrib/Makefile
    * enabled hbole, ado_rdd, hybodbc in most of Windows builds

  * harbour/contrib/ole2/win32ole.prg
  * harbour/contrib/ole2/w32ole.c
    * synced with recent Ron's modifications in xHarbour
      I'd like to ask Windows users to make tests with above
      oleenum.prg and example sent by Luis

  * harbour/source/rtl/gttrm/gttrm.c
    * disable ACS mode before sending BEL on Linux compatibile terminals
      - some of them may try to display chr(7) instead of generating
        sound when ACSC is enabled

  * harbour/source/vm/proc.c
    + added support for character parameter in PROCFILE() - now it can
      accept <nLevel> | <sFuncSym> | <cFuncName> as first parameter

  * harbour/source/vm/dynsym.c
    * added support for detecting not cleanly overloaded by linker .prg
      functions.
      In such case hb_dynsymNew() checks if linker updated function
      addresses and if yes then remove unnecessary HB_FS_LOCAL flag.
      In such case works GCC (but not MinGW and DJGPP), OpwenWatcom
      for Linux, DOS, Windows (and probably for OS2), POCC, XCC (with
      /FORCE:MULTIPLE linker switch) and some other linkers I haven't
      tested.
      Otherwise (two different functions with the same name linked and
      each accessible from different symbol, f.e. BCC32, MinGW, DJGPP)
      it accept multiple HB_FS_LOCAL for dynamically loaded modules
      (.hrb, .dll, .so, .dyn, ...) if HVM also accepted it (for future
      KEEP_LOCAL_FUNC HB_LIBLOAD()/__HBRLOAD() parameter).
      For statically linked modules it overloads one of the functions when
      HB_OVERLOAD_MULTIPLE_FUNC macro is set (now by default to make tests
      with different linkers). I left detail description in source code of
      hb_dynsymNew() in source/vm/dynsym.c.
      I hope it will also help Ron in recent xHarbour modifications - AFAIK
      it's sth what he tires to do.
      Anyhow please remember that that dirty overloading any symbols by
      linker is very bad idea and in such case you have big chance that
      wrong binaries will be created so the most preferable choice is
      eliminating such situations and not using linker switches like
      -Wl,--allow-multiple-definition or /FORCE:MULTIPLE

  + harbour/tests/multifnc
  + harbour/tests/multifnc/t0.prg
  + harbour/tests/multifnc/t1.prg
  + harbour/tests/multifnc/t2.prg
  + harbour/tests/multifnc/Makefile
    + added test code for results of dirty overloaded functions.
      With recent modifications expected results are:
            main t0.prg t0.prg
            alert t1.prg t1.prg [ALERT]
            p0 t0.prg t0.prg P0:t0.prg P0:t0.prg OK
            p1 t0.prg t0.prg P1:t0.prg P1:t0.prg OK
            p2 t1.prg t1.prg P2:t1.prg P2:t1.prg OK
            p3 t0.prg t0.prg P3:t0.prg P3:t0.prg OK
            p4 t1.prg t1.prg P4:t1.prg P4:t1.prg OK
            p5 t2.prg t2.prg P5:t2.prg P5:t2.prg OK
            ===
            main2 t1.prg t1.prg
            alert t1.prg t1.prg [ALERT]
            p0 t0.prg t0.prg P0:t0.prg P0:t0.prg OK
            p1 t0.prg t0.prg P1:t0.prg P1:t0.prg OK
            p2 t1.prg t1.prg P2:t1.prg P2:t1.prg OK
            p3 t0.prg t0.prg P3:t0.prg P3:t0.prg OK
            p4 t1.prg t1.prg P4:t1.prg P4:t1.prg OK
            p5 t2.prg t2.prg P5:t2.prg P5:t2.prg OK
            ===
            main3 t2.prg t2.prg
            alert t1.prg t1.prg [ALERT]
            p0 t0.prg t0.prg P0:t0.prg P0:t0.prg OK
            p1 t0.prg t0.prg P1:t0.prg P1:t0.prg OK
            p2 t1.prg t1.prg P2:t1.prg P2:t1.prg OK
            p3 t0.prg t0.prg P3:t0.prg P3:t0.prg OK
            p4 t1.prg t1.prg P4:t1.prg P4:t1.prg OK
            p5 t2.prg t2.prg P5:t2.prg P5:t2.prg OK

      I've tested only few compilers: GCC/G++ (Linux) MinGW (WINE-W32),
      DJGPP (DOSEMU), OpenWatcom (Linux, WINE-W32, DOSEMU), XCC/POCC
      (WINE-W32) and I'm interesting in results from other compiler/
      platforms, f.e. from M[V]SC.

best regards,
Przemek
From lkrausem at shaw.ca  Wed Oct  3 11:48:59 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Wed Oct  3 11:51:22 2007
Subject: [Harbour] 2007-10-01 19:42 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20071003125412.GB22365@localhost.localdomain>
References: <20071002223429.GA22341@localhost.localdomain>
	<001701c8058f$18b18b10$ca64fea9@emag>
	<20071003125412.GB22365@localhost.localdomain>
Message-ID: <4703B9EB.3000608@shaw.ca>

Przemek:

I also confirm the bug with Get and Set methods in TOleAuto is fixed.

Thanks!

Przemyslaw Czerpak wrote:

>On Wed, 03 Oct 2007, Enrico Maria Giordano wrote:
>  
>
>>>Thank you very much for your tests and confirmation.
>>>      
>>>
>>That's the very least I can do to support your monumental work.
>>    
>>
>
>Not such monumental :) and your help is very important for me because
>I cannot test OLE code in my Linux box.
>
>Sorry for disturbing but I'd like to also ask you or some other Windows
>developer about testing this example from Luis.
>
>    function main()
>       local oExcel
>       oExcel := TOleAuto():New( "Excel.Application" )
>       oExcel:DisplayAlerts := .f.
>       oExcel:Set( "DisplayAlerts", .t. )
>       ? "test successful"
>    return nil
>
>I do not know if it works with current code or not and such information
>will help me before committing recent Ron's modifications borrowed from
>xHarbour.
>
>best regards,
>Przemek
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>  
>

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20071003/af02fd0a/attachment.html
From e.m.giordano at emagsoftware.it  Wed Oct  3 11:52:27 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Oct  3 11:52:32 2007
Subject: [Harbour] ChangeLog 2007-10-03 17:04 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20071003150731.GA16429@localhost.localdomain>
Message-ID: <011b01c805d5$660a1990$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoledi 3 ottobre 2007 17.07
Oggetto: [Harbour] ChangeLog 2007-10-03 17:04 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


>  * harbour/contrib/ole2/win32ole.prg
>  * harbour/contrib/ole2/w32ole.c
>    * synced with recent Ron's modifications in xHarbour
>      I'd like to ask Windows users to make tests with above
>      oleenum.prg and example sent by Luis

Both seem to work fine.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lkrausem at shaw.ca  Wed Oct  3 11:52:33 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Wed Oct  3 11:54:26 2007
Subject: [Harbour] ChangeLog 2007-10-03 17:04 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20071003150731.GA16429@localhost.localdomain>
References: <20071003150731.GA16429@localhost.localdomain>
Message-ID: <4703BAC1.7030909@shaw.ca>

Przemek:

Sample also works as expected with this commit.

Once again, thanks!

>  * harbour/contrib/ole2/win32ole.prg
>  * harbour/contrib/ole2/w32ole.c
>    * synced with recent Ron's modifications in xHarbour
>      I'd like to ask Windows users to make tests with above
>      oleenum.prg and example sent by Luis
>  
>
-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From M.Horodyski at pzuzycie.com.pl  Wed Oct  3 12:07:10 2007
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Wed Oct  3 12:07:32 2007
Subject: [Harbour] RE: Harbour Digest, Vol 12, Issue 7
Message-ID: <503AD832DBBF60469E9F807668A2F6A20284728C@PINK.zycie.pzu>

 

>Message: 4
>Date: Wed, 3 Oct 2007 09:19:15 +0200
>From: "Massimo Belgrano" <mbelgrano@deltain.it>
>Subject: R: [Harbour] PgSQL RDD example?
>To: "Harbour Project Main Developer List."
>	<harbour@harbour-project.org>
>Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A9C2@SRV02.deltain.net>
>Content-Type: text/plain;	charset="iso-8859-1"
>
>This sample will be used with any rdd

[ ... ]


> if x_rdd="ADS"
>   rddRegister( "ADS", 1 )
>   rddsetdefault( "ADS" )
>   IF G_SERVER="L"
>     AdsSetServerType ( 1 )  // SET SERVER LOCAL
>     SET(_SET_OPTIMIZE,.T.)
>     ELSE
>     AdsSetServerType ( 2 )  // SET SERVER remote
>     SET(_SET_OPTIMIZE,.T.)
>   ENDIF
>   AdsSetFileType(2)   // SET FILETYPE TO CDX // if you are using
DBFCDX
>   AdsLocking(  .f.   )  // // SET AXS LOCKING OFF
>   ADSRightsCheck( .f.)
>   AdsSetCharType(2,.T.)             // font oem + recupera il
carattere oem
>   G_RDDACT=RDDSETDEFAULT()
> else
>    nConn := dbpgconnection("localhost;johndoe;johndoe;johndoe")
> ELSE
>   rddsetdefault( x_rdd )
>   SET OPTIMIZE ON
> ENDIF

Massimo, can you count "else" and "if" instruction ?

Regards,
Marek Horodyski
From jeremy at cowgar.com  Wed Oct  3 12:48:33 2007
From: jeremy at cowgar.com (Jeremy Cowgar)
Date: Wed Oct  3 12:48:37 2007
Subject: [Harbour] RE: Harbour Digest, Vol 12, Issue 7
In-Reply-To: <503AD832DBBF60469E9F807668A2F6A20284728C@PINK.zycie.pzu>
References: <503AD832DBBF60469E9F807668A2F6A20284728C@PINK.zycie.pzu>
Message-ID: <4703C7E1.407@cowgar.com>

I'm sure that was a quick insert problem... but, no matter what I did, 
it always used a DBF.  It never talked to the SQL server.

Jeremy

Horodyski Marek (PZUZ) wrote:
> Massimo, can you count "else" and "if" instruction ?
>
> Regards,
> Marek Horodyski
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>   

From dbtopas at dbtopas.lt  Wed Oct  3 13:13:02 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct  3 13:13:46 2007
Subject: [Harbour] ChangeLog 2007-10-03 17:04 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20071003150731.GA16429@localhost.localdomain>
References: <20071003150731.GA16429@localhost.localdomain>
Message-ID: <4703CD9E.5050200@dbtopas.lt>

Przemyslaw Czerpak wrote:
>       I've tested only few compilers: GCC/G++ (Linux) MinGW (WINE-W32),
>       DJGPP (DOSEMU), OpenWatcom (Linux, WINE-W32, DOSEMU), XCC/POCC
>       (WINE-W32) and I'm interesting in results from other compiler/
>       platforms, f.e. from M[V]SC.

Hello,


here is results for BCC 5.5:

C:\harboursvn\tests\multifnc>t0.exe

main t0.prg t0.prg
alert t1.prg t1.prg [ALERT]
p0 t0.prg t0.prg P0:t0.prg P0:t0.prg OK
p1 t0.prg t0.prg P1:t0.prg P1:t0.prg OK
p2 t1.prg t1.prg P2:t1.prg P2:t1.prg OK
p3 t0.prg t0.prg P3:t0.prg P3:t0.prg OK
p4 t1.prg t1.prg P4:t1.prg P4:t1.prg OK
p5 t2.prg t2.prg P5:t2.prg P5:t2.prg OK
===
main2 t1.prg t1.prg
alert t1.prg t1.prg [ALERT]
p0 t0.prg t0.prg P0:t0.prg P0:t0.prg OK
p1 t0.prg t0.prg P1:t0.prg P1:t0.prg OK
p2 t1.prg t1.prg P2:t1.prg P2:t1.prg OK
p3 t0.prg t0.prg P3:t0.prg P3:t0.prg OK
p4 t1.prg t1.prg P4:t1.prg P4:t1.prg OK
p5 t2.prg t2.prg P5:t2.prg P5:t2.prg OK
===
main3 t2.prg t2.prg
alert t1.prg t1.prg [ALERT]
p0 t0.prg t0.prg P0:t0.prg P0:t0.prg OK
p1 t0.prg t0.prg P1:t0.prg P1:t0.prg OK
p2 t1.prg t1.prg P2:t1.prg P2:t1.prg OK
p3 t0.prg t0.prg P3:t0.prg P3:t0.prg OK
p4 t1.prg t1.prg P4:t1.prg P4:t1.prg OK
p5 t2.prg t2.prg P5:t2.prg P5:t2.prg OK


And here is compile and link screen. See, BCC linker warnings in the end 
of it. AFAIK, warning is not shown if one of the modules is in the library:

C:\harboursvn\tests\multifnc>c:\bcc55\bin\make.exe -DPRG="t0.prg t1.prg 
t2.prg" -DEXE=t0.exe -f c:\cawi32\lib\harbour.mak
MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
         c:\harboursvn\bin\harbour -n -go -Ic:\harboursvn\include -w1 -p 
-ot0 t0.prg
Harbour devel build 1.1-1 Intl.
Copyright 1999-2007, http://www.harbour-project.org/
Compiling 't0.prg' and generating preprocessed output to 't0.ppo'...
Lines 23, Functions/Procedures 5
Generating C source output to 't0.c'... Done.

Building object module for 't0.c'
using C compiler 'C:\BCC55\BIN\BCC32' as defined in 'harbour.cfg'...
Exec: C:\BCC55\BIN\BCC32  -c -d -OS -X 
-I.;C:\BCC55\include;c:\harboursvn\include;c:\mysql-4.1.7-win\include 
-ot0.obj t0.c
Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
t0.c:
Deleting: "t0.c"
Done.
         c:\harboursvn\bin\harbour -n -go -Ic:\harboursvn\include -w1 -p 
-ot1 t1.prg
Harbour devel build 1.1-1 Intl.
Copyright 1999-2007, http://www.harbour-project.org/
Compiling 't1.prg' and generating preprocessed output to 't1.ppo'...
Lines 20, Functions/Procedures 6
Generating C source output to 't1.c'... Done.

Building object module for 't1.c'
using C compiler 'C:\BCC55\BIN\BCC32' as defined in 'harbour.cfg'...
Exec: C:\BCC55\BIN\BCC32  -c -d -OS -X 
-I.;C:\BCC55\include;c:\harboursvn\include;c:\mysql-4.1.7-win\include 
-ot1.obj t1.c
Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
t1.c:
Deleting: "t1.c"
Done.
         c:\harboursvn\bin\harbour -n -go -Ic:\harboursvn\include -w1 -p 
-ot2 t2.prg
Harbour devel build 1.1-1 Intl.
Copyright 1999-2007, http://www.harbour-project.org/
Compiling 't2.prg' and generating preprocessed output to 't2.ppo'...
Lines 14, Functions/Procedures 4
Generating C source output to 't2.c'... Done.

Building object module for 't2.c'
using C compiler 'C:\BCC55\BIN\BCC32' as defined in 'harbour.cfg'...
Exec: C:\BCC55\BIN\BCC32  -c -d -OS -X 
-I.;C:\BCC55\include;c:\harboursvn\include;c:\mysql-4.1.7-win\include 
-ot2.obj t2.c
Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
t2.c:
Deleting: "t2.c"
Done.
         c:\bcc55\BIN\ilink32 @MAKE0000.@@@
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Warning: Public symbol '_HB_FUN_P1' defined in both module 
C:\HARBOURSVN\TESTS\MULTIFNC\T0.OBJ and C:\HARBOURSVN\TESTS\MULTIFNC\T1.OBJ
Warning: Public symbol '_HB_FUN_P3' defined in both module 
C:\HARBOURSVN\TESTS\MULTIFNC\T0.OBJ and C:\HARBOURSVN\TESTS\MULTIFNC\T1.OBJ
Warning: Public symbol '_HB_FUN_P3' defined in both module 
C:\HARBOURSVN\TESTS\MULTIFNC\T0.OBJ and C:\HARBOURSVN\TESTS\MULTIFNC\T2.OBJ
Warning: Public symbol '_HB_FUN_P2' defined in both module 
C:\HARBOURSVN\TESTS\MULTIFNC\T1.OBJ and C:\HARBOURSVN\TESTS\MULTIFNC\T2.OBJ
Warning: Public symbol '_HB_FUN_P3' defined in both module 
C:\HARBOURSVN\TESTS\MULTIFNC\T1.OBJ and C:\HARBOURSVN\TESTS\MULTIFNC\T2.OBJ


Best regards,
Mindaugas

From makis1970 at gmail.com  Wed Oct  3 13:55:37 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Wed Oct  3 13:55:17 2007
Subject: [Harbour] nflib - fttext its incopatible with clipper and also does
	not use the harbour api at least for opening files (fopen)
Message-ID: <001201c805e6$9cdfaaa0$d69effe0$@com>

The fttext.c is incompatible with clipper nanfor.

In Clipper nanfor Ft_Fgobottom is Ft_fgobot

In clipper nanfor Ft_Fuse returns numeric (area of the file) if the file is

opened, on error returns -1, and in close mode returns 0, HARBOUR return

always logical.

In clipper nanfor there is Ft_Ferror function that returns the error number

on a failed ft_fuse operation.

Also ft_fuse in clipper does not need ft_fselect before but just use the

next unused area

 

Regards

Mike Evans

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20071003/bb19f17a/attachment.html
From druzus at acn.waw.pl  Wed Oct  3 13:57:46 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  3 13:57:53 2007
Subject: [Harbour] ChangeLog 2007-10-03 17:04 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <4703CD9E.5050200@dbtopas.lt>
References: <20071003150731.GA16429@localhost.localdomain>
	<4703CD9E.5050200@dbtopas.lt>
Message-ID: <20071003175746.GA25820@localhost.localdomain>

On Wed, 03 Oct 2007, Mindaugas Kavaliauskas wrote:
> >      I've tested only few compilers: GCC/G++ (Linux) MinGW (WINE-W32),
> >      DJGPP (DOSEMU), OpenWatcom (Linux, WINE-W32, DOSEMU), XCC/POCC
> >      (WINE-W32) and I'm interesting in results from other compiler/
> >      platforms, f.e. from M[V]SC.
> Hello,
> here is results for BCC 5.5:
[...]
Thanks you very much for test - all results as expected.
My fault but I forgot to add that I also tested BCC32 with WINE-W32.
Borland linker mixes multiple functions in one binaries so it needs
HB_OVERLOAD_MULTIPLE_FUNC set. If you will comment it in dynsym.c
then you will find that final application contains 3 different version
of function p3().

> And here is compile and link screen. See, BCC linker warnings in the end 
> of it. AFAIK, warning is not shown if one of the modules is in the library:
[...]
> Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
> Warning: Public symbol '_HB_FUN_P1' defined in both module 
> C:\HARBOURSVN\TESTS\MULTIFNC\T0.OBJ and C:\HARBOURSVN\TESTS\MULTIFNC\T1.OBJ
> Warning: Public symbol '_HB_FUN_P3' defined in both module 
> C:\HARBOURSVN\TESTS\MULTIFNC\T0.OBJ and C:\HARBOURSVN\TESTS\MULTIFNC\T1.OBJ
> Warning: Public symbol '_HB_FUN_P3' defined in both module 
> C:\HARBOURSVN\TESTS\MULTIFNC\T0.OBJ and C:\HARBOURSVN\TESTS\MULTIFNC\T2.OBJ
> Warning: Public symbol '_HB_FUN_P2' defined in both module 
> C:\HARBOURSVN\TESTS\MULTIFNC\T1.OBJ and C:\HARBOURSVN\TESTS\MULTIFNC\T2.OBJ
> Warning: Public symbol '_HB_FUN_P3' defined in both module 
> C:\HARBOURSVN\TESTS\MULTIFNC\T1.OBJ and C:\HARBOURSVN\TESTS\MULTIFNC\T2.OBJ

Yes, some linkers warn about it but IMHO by default they should refuse
to create such binaries because in most cases users will not know what
happens, f.e. how many BCC users know that in this example where three
.prg modules have P3() function that the final application will also
contain 3 different versions of P3() function and each of them can be
executed.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Oct  3 14:13:49 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  3 14:13:55 2007
Subject: [Harbour] PgSQL RDD example?
In-Reply-To: <470333F1.4090506@cowgar.com>
References: <470333F1.4090506@cowgar.com>
Message-ID: <20071003181349.GA25937@localhost.localdomain>

On Wed, 03 Oct 2007, Jeremy Cowgar wrote:
> Does anyone have a PgSQL RDD example? I am trying to make it function. I 
> have managed to compile it and begin to make my own app, thus far I have:
> procedure main()
>    local nConn, xcDatabase := "SELECT code, dept, name, tax FROM test 
> ORDER BY code", xcVia := "PGRDD"
>    request PGRDD
>    nConn := dbpgconnection("localhost;johndoe;johndoe;johndoe")
>    use (xcDatabase) ALIAS MyTest VIA (xcVia) CONNECTION nConn
>    ? MyTest->(dbgotop())
>    ? MyTest->code, MyTest->dept
>    dbpgclearconnection(nConn)
> Return
> That does not compile. First I get an error on ALIAS: "syntax error at 
> 'ALIAS'"
> To try an make it compile, I remove the ALIAS section and then get an 
> error on VIA: "syntax error at 'VIA'"

add at the beginning of your code:

#command USE <(db)> [VIA <rdd>] [ALIAS <a>] [<nw: NEW>] ;
            [<ex: EXCLUSIVE>] [<sh: SHARED>] [<ro: READONLY>] ;
            [CODEPAGE <cp>] [CONNECTION <nConn>] [INDEX <(index1)> [, <(indexN)>]] => ;
         dbUseArea( <.nw.>, <rdd>, <(db)>, <(a)>, ;
                    if(<.sh.> .or. <.ex.>, !<.ex.>, NIL), <.ro.>,  [<cp>], [<nConn>] ) ;
         [; dbSetIndex( <(index1)> )] ;
         [; dbSetIndex( <(indexN)> )]

I'll add support for CONNECTION parameter to some std.ch commands soon.

> If I remove "CONNECTION nConn" then it compiles, however, when you run 
> it you get:
> Error PGRDD/1000 Open error, Invalid connection handle: select code, 
> dept, name, tax FROM test ORDER BY code
> Called from UR_SUPER_ERROR(0)
> Called from PG_OPEN(177)
> Called from DBUSEAREA(0)
> Called from MAIN(8)
> Can anyone help me with this?

The above command will resolve the problem but probably it will be good
to add support for default connection handle to PGSQL RDD so it will not
be necessary to always pass it to all commands like CREATE, COPY TO,
APPEND FROM, etc.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Oct  3 14:45:21 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  3 14:45:28 2007
Subject: [Harbour] nflib - fttext its incopatible with clipper and also
	does not use the harbour api at least for opening files (fopen)
In-Reply-To: <001201c805e6$9cdfaaa0$d69effe0$@com>
References: <001201c805e6$9cdfaaa0$d69effe0$@com>
Message-ID: <20071003184521.GA3901@localhost.localdomain>

On Wed, 03 Oct 2007, Mike Evans (Gmail) wrote:
> The fttext.c is incompatible with clipper nanfor.
> In Clipper nanfor Ft_Fgobottom is Ft_fgobot
> In clipper nanfor Ft_Fuse returns numeric (area of the file) if the file is
> opened, on error returns -1, and in close mode returns 0, HARBOUR return
> always logical.
> In clipper nanfor there is Ft_Ferror function that returns the error number
> on a failed ft_fuse operation.
> Also ft_fuse in clipper does not need ft_fselect before but just use the
> next unused area

I know. This version of fttext is not direct port of nanforum code but
modified by Andi Jahja implementation. It's in contrib/libnf/fttext.c
Sorry but I do not have time to update it - I've never used FT_F*()
function in Clipper and first I would have to invest some time in
testing with original version. Maybe someone else can do that or you.
It's simple C code so if you know the expected behavior it should be
easy to fix it.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Oct  3 14:53:35 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  3 14:53:45 2007
Subject: [Harbour] 2007-10-01 19:42
	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <00d601c805c8$6932e3c0$ca64fea9@emag>
References: <20071003134928.GA30697@localhost.localdomain>
	<00d601c805c8$6932e3c0$ca64fea9@emag>
Message-ID: <20071003185335.GB3901@localhost.localdomain>

On Wed, 03 Oct 2007, Enrico Maria Giordano wrote:
> >Thank you very much. I'll commit the modifications today and then
> >I'll ask about repeating this and ENUM test to check if they not
> >brakes sth.
> "break" :-)

:-( The problem is that I do not see such mistakes if I'm reading
my own text. After few hours or days when I do not remember what
I exactly wrote and I have to really ready I'm seeing them and I can
fix them. I also see other people mistakes. But when I'm reading just
after writing I do not read but my brain restores from memory what
I wanted to say. I have similar problem with my native Polish language
but when I have to use my fatal English then it's a nightmare. I only
hope that you can understands me in most cases ;-)

best regards,
Przemek
From makis1970 at gmail.com  Wed Oct  3 15:10:50 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Wed Oct  3 15:10:31 2007
Subject: [Harbour] RE: nflib - fttext its incopatible with clipper and also
	does not use the harbour api at least for opening files (fopen)
Message-ID: <001a01c805f1$1f015f60$5d041e20$@com>

> The fttext.c is incompatible with clipper nanfor.

> In Clipper nanfor Ft_Fgobottom is Ft_fgobot

> In clipper nanfor Ft_Fuse returns numeric (area of the file) if the file
is

> opened, on error returns -1, and in close mode returns 0, HARBOUR return

> always logical.

> In clipper nanfor there is Ft_Ferror function that returns the error
number

> on a failed ft_fuse operation.

> Also ft_fuse in clipper does not need ft_fselect before but just use the

> next unused area

 

>I know. This version of fttext is not direct port of nanforum code but

>modified by Andi Jahja implementation. It's in contrib/libnf/fttext.c

>Sorry but I do not have time to update it - I've never used FT_F*()

>function in Clipper and first I would have to invest some time in

>testing with original version. Maybe someone else can do that or you.

>It's simple C code so if you know the expected behavior it should be

>easy to fix it.

 

>best regards,

>Przemek

 

Thanks Przemek,

I'll try in the next few days to make such changes (even if I have more than
15 years to write c) but I'll ask you to review my changes.

 

Thanks again 

Mike Evans

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20071003/3c767f9b/attachment.html
From toninhofwi at yahoo.com.br  Wed Oct  3 15:30:37 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Oct  3 15:30:51 2007
Subject: [Harbour] ChangeLog 2007-10-03 17:04 UTC+0200 Przemyslaw
	Czerpak (druzus/at/priv.onet.pl)
In-Reply-To: <4703CD9E.5050200@dbtopas.lt>
References: <20071003150731.GA16429@localhost.localdomain>
	<4703CD9E.5050200@dbtopas.lt>
Message-ID: <tdr7g3ladnag1imp9qo39rmu4nb1g0tb42@4ax.com>

>here is results for BCC 5.5:

Same for BCC 5.8.2

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From e.m.giordano at emagsoftware.it  Wed Oct  3 16:28:01 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Oct  3 16:28:05 2007
Subject: [Harbour] 2007-10-01
	19:42UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
References: <20071003134928.GA30697@localhost.localdomain><00d601c805c8$6932e3c0$ca64fea9@emag>
	<20071003185335.GB3901@localhost.localdomain>
Message-ID: <026c01c805fb$e4ee6ce0$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoledi 3 ottobre 2007 20.53
Oggetto: Re: [Harbour] 2007-10-01 
19:42UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)


> I only hope that you can understands me in most cases ;-)

Absolutely. :-)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From dbtopas at dbtopas.lt  Wed Oct  3 16:27:41 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct  3 16:28:25 2007
Subject: [Harbour] ChangeLog 2007-10-03 17:04 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20071003175746.GA25820@localhost.localdomain>
References: <20071003150731.GA16429@localhost.localdomain>	<4703CD9E.5050200@dbtopas.lt>
	<20071003175746.GA25820@localhost.localdomain>
Message-ID: <4703FB3D.60402@dbtopas.lt>

Przemyslaw Czerpak wrote:
> Yes, some linkers warn about it but IMHO by default they should refuse
> to create such binaries because in most cases users will not know what
> happens, f.e. how many BCC users know that in this example where three
> .prg modules have P3() function that the final application will also
> contain 3 different versions of P3() function and each of them can be
> executed.

BTW, we have code:
   if( ( !pDynSym->pSymbol->value.pFunPtr && pSymbol->value.pFunPtr ) ||
       ( pSymbol->scope.value & HB_FS_LOCAL ) != 0 )
   {
      pDynSym->pSymbol = pSymbol;
      ...
   }

Why do we have condition
   !pDynSym->pSymbol->value.pFunPtr && pSymbol->value.pFunPtr
in this IF sentence? I can not imagine situation it is required.
If we have a symbol with external public function address, we will have 
symbol with the local public address of the same function. So, condition
   ( pSymbol->scope.value & HB_FS_LOCAL ) != 0
is enough.

One more question: we can have two symbols with the same name in te same 
module? Is this intentional? I guess this was not from the beginning and 
was introduced later to solve some difficulties handling symbol AAA with 
flags HB_FS_PUBLIC | HB_FS_STATIC | HB_FS_LOCAL
   STATIC PROC AAA()
      ? aaa->FIELD1
   RETURN
Duplicated symbols has some side effects, because not the all code 
expects it.


Best regards,
Mindaugas
From dbtopas at dbtopas.lt  Wed Oct  3 16:44:06 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct  3 16:44:52 2007
Subject: [Harbour] 2007-10-01
	19:42	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20071003185335.GB3901@localhost.localdomain>
References: <20071003134928.GA30697@localhost.localdomain>	<00d601c805c8$6932e3c0$ca64fea9@emag>
	<20071003185335.GB3901@localhost.localdomain>
Message-ID: <4703FF16.6040201@dbtopas.lt>

Przemyslaw Czerpak wrote:
> :-( The problem is that I do not see such mistakes if I'm reading
> my own text. ... but when I have to use my fatal English then it's a nightmare. I only
> hope that you can understands me in most cases ;-)

Hi,


your english is very good and I can understand everything. There are 
some other people here on mailing lists, I really fail to understand. 
Some of them uses very bad english, but some are native speakers and I 
also fail to understand their language constructions :)


Best regards,
Mindaugas
From mbelgrano at deltain.it  Wed Oct  3 16:46:00 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Oct  3 16:46:13 2007
Subject: R: [Harbour] RE: Harbour Digest, Vol 12, Issue 7
In-Reply-To: <503AD832DBBF60469E9F807668A2F6A20284728C@PINK.zycie.pzu>
References: <503AD832DBBF60469E9F807668A2F6A20284728C@PINK.zycie.pzu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A9C7@SRV02.deltain.net>

Ops Sorry 
I don't have pgsql installed
This is modification
 else if x_rdd="PGSQL"
    nConn := dbpgconnection("localhost;johndoe;johndoe;johndoe")
 ELSE
   rddsetdefault( x_rdd )
   SET OPTIMIZE ON
 ENDIF

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Horodyski Marek (PZUZ)
Inviato: mercoled? 3 ottobre 2007 18.07
A: harbour@harbour-project.org
Oggetto: [Harbour] RE: Harbour Digest, Vol 12, Issue 7

 

>Message: 4
>Date: Wed, 3 Oct 2007 09:19:15 +0200
>From: "Massimo Belgrano" <mbelgrano@deltain.it>
>Subject: R: [Harbour] PgSQL RDD example?
>To: "Harbour Project Main Developer List."
>	<harbour@harbour-project.org>
>Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A9C2@SRV02.deltain.net>
>Content-Type: text/plain;	charset="iso-8859-1"
>
>This sample will be used with any rdd

[ ... ]


> if x_rdd="ADS"
>   rddRegister( "ADS", 1 )
>   rddsetdefault( "ADS" )
>   IF G_SERVER="L"
>     AdsSetServerType ( 1 )  // SET SERVER LOCAL
>     SET(_SET_OPTIMIZE,.T.)
>     ELSE
>     AdsSetServerType ( 2 )  // SET SERVER remote
>     SET(_SET_OPTIMIZE,.T.)
>   ENDIF
>   AdsSetFileType(2)   // SET FILETYPE TO CDX // if you are using
DBFCDX
>   AdsLocking(  .f.   )  // // SET AXS LOCKING OFF
>   ADSRightsCheck( .f.)
>   AdsSetCharType(2,.T.)             // font oem + recupera il
carattere oem
>   G_RDDACT=RDDSETDEFAULT()
> else
>    nConn := dbpgconnection("localhost;johndoe;johndoe;johndoe")
> ELSE
>   rddsetdefault( x_rdd )
>   SET OPTIMIZE ON
> ENDIF

Massimo, can you count "else" and "if" instruction ?

Regards,
Marek Horodyski
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Wed Oct  3 16:48:21 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  3 16:48:29 2007
Subject: [Harbour] 2007-10-01 19:42
	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20071003185335.GB3901@localhost.localdomain>
References: <20071003134928.GA30697@localhost.localdomain>
	<00d601c805c8$6932e3c0$ca64fea9@emag>
	<20071003185335.GB3901@localhost.localdomain>
Message-ID: <B548B00D-E824-4535-A0F5-73F0ED7A08AD@syenar.hu>

> On Wed, 03 Oct 2007, Enrico Maria Giordano wrote:
>>> Thank you very much. I'll commit the modifications today and then
>>> I'll ask about repeating this and ENUM test to check if they not
>>> brakes sth.
>> "break" :-)
>
> :-( The problem is that I do not see such mistakes if I'm reading
> my own text. After few hours or days when I do not remember what
> I exactly wrote and I have to really ready I'm seeing them and I can
> fix them. I also see other people mistakes. But when I'm reading just
> after writing I do not read but my brain restores from memory what
> I wanted to say. I have similar problem with my native Polish language
> but when I have to use my fatal English then it's a nightmare. I only
> hope that you can understands me in most cases ;-)

I have this exact same problem, in both Hungarian and English :(
I can only catch those typos if I'm rereading a sent e-mail after
a while.

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Oct  3 17:27:15 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  3 17:27:22 2007
Subject: [Harbour] ChangeLog 2007-10-03 17:04 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <4703FB3D.60402@dbtopas.lt>
References: <20071003150731.GA16429@localhost.localdomain>
	<4703CD9E.5050200@dbtopas.lt>
	<20071003175746.GA25820@localhost.localdomain>
	<4703FB3D.60402@dbtopas.lt>
Message-ID: <20071003212715.GA603@localhost.localdomain>

On Wed, 03 Oct 2007, Mindaugas Kavaliauskas wrote:
> BTW, we have code:
>   if( ( !pDynSym->pSymbol->value.pFunPtr && pSymbol->value.pFunPtr ) ||
>       ( pSymbol->scope.value & HB_FS_LOCAL ) != 0 )
>   {
>      pDynSym->pSymbol = pSymbol;
>      ...
>   }
> Why do we have condition
>   !pDynSym->pSymbol->value.pFunPtr && pSymbol->value.pFunPtr
> in this IF sentence? I can not imagine situation it is required.
> If we have a symbol with external public function address, we will have 
> symbol with the local public address of the same function. So, condition
>   ( pSymbol->scope.value & HB_FS_LOCAL ) != 0
> is enough.

No. The original function can be written in C and in such case there
is no HB_FS_LOCAL symbol which will be registered but only external
.prg references.

> One more question: we can have two symbols with the same name in te same 
> module? Is this intentional? I guess this was not from the beginning and 
> was introduced later to solve some difficulties handling symbol AAA with 
> flags HB_FS_PUBLIC | HB_FS_STATIC | HB_FS_LOCAL
>   STATIC PROC AAA()
>      ? aaa->FIELD1
>   RETURN

The problem is with static functions. If we register static function
symbols then we allow to access them from external code. If you look
at this mailing list archive then you will find that people were
using hb_dynsymFind() for such thing without any knowledge that they
were creating code with unpredictable behavior (it's possible to have
many different static functions with the same name coming from 3-rd
party modules and it's out of our control which will be registered
first or last). Few years ago I and Ryszard changed it. I blocked
registering static symbols by simple cloning at RT and Ryszard separating
function and other symbols at compile time. The Ryszard solution is
Clipper compatible and the overhead minimal.

> Duplicated symbols has some side effects, because not the all code 
> expects it.

Which code tries to scan symbol tables so it can detect that symbols
were duplicated in given symbol table? AFAIK whole internal core code
is ready for it and IMHO 3-rd party code cannot access module symbol
tables directly.

best regards,
Przemek
From dbtopas at dbtopas.lt  Wed Oct  3 18:14:13 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct  3 18:14:59 2007
Subject: [Harbour] ChangeLog 2007-10-03 17:04 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20071003212715.GA603@localhost.localdomain>
References: <20071003150731.GA16429@localhost.localdomain>	<4703CD9E.5050200@dbtopas.lt>	<20071003175746.GA25820@localhost.localdomain>	<4703FB3D.60402@dbtopas.lt>
	<20071003212715.GA603@localhost.localdomain>
Message-ID: <47041435.9020800@dbtopas.lt>

Przemyslaw Czerpak wrote:
> No. The original function can be written in C and in such case there
> is no HB_FS_LOCAL symbol which will be registered but only external
> .prg references.
> ... 
> The problem is with static functions. If we register static function
> symbols then we allow to access them from external code. If you look
> at this mailing list archive then you will find that people were
> using hb_dynsymFind() for such thing without any knowledge that they
> were creating code with unpredictable behavior (it's possible to have
> many different static functions with the same name coming from 3-rd
> party modules and it's out of our control which will be registered
> first or last). Few years ago I and Ryszard changed it. I blocked
> registering static symbols by simple cloning at RT and Ryszard separating
> function and other symbols at compile time. The Ryszard solution is
> Clipper compatible and the overhead minimal.

Thank You, for explanation! Now everything is clear.

>> Duplicated symbols has some side effects, because not the all code 
>> expects it.
> 
> Which code tries to scan symbol tables so it can detect that symbols
> were duplicated in given symbol table? AFAIK whole internal core code
> is ready for it and IMHO 3-rd party code cannot access module symbol
> tables directly.

It's a minor problem. Try:
INIT PROC init1()
    IF PCOUNT() > 999
       ? main->FIELD1
    ENDIF
RETURN

PROC main()
   ? "Hello, World!"
RETURN

It could be fixed by changing hbmain.c line 4500 to:
    if( strcmp( pSym->szName, szFirstFunction ) == 0 && pSym->bFunc )


Best regards,
Mindaugas

From harbour at rglab.pl  Wed Oct  3 18:43:02 2007
From: harbour at rglab.pl (=?iso-8859-2?Q?Ryszard_G=B3=B1b?=)
Date: Wed Oct  3 18:43:03 2007
Subject: [Harbour] The latest code changes
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl>
Message-ID: <d6fbdc2aa8fdbe68ed78bce1db65ac9d.qmail@home.pl>

  Well, I think that compatibility with xharbour has gone to far, at least 
in
'string as array of bytes'.
  Please notice that it is not possible now to use this feature without 
linking
of xhb library which pulls all extensions of xharbour. There is no 
granulity
for inclusion/exlusion of given feature. The 'string as array of bytes' is
definitely not the 'xharbour compatibility' feature.
  Of course I can write a single module that will add overloading of []
however accesing of string using overloading is slower than previous method
and is even slower then using SUBSTR method.
  Additionally, the -ks switch has now very technical and internal meaning 
and
its function is quite different then previously.
  Previously to use 'string as array' it was needed to compile code with 
-ks (to
enable special assign method) and to run an executable with //FLAGS:s (to 
enable
runtime support for this feature). I understand that it can be misleading 
to user
to have to enable this feature twice (at compile and runtime) however 
instead of
moving this feature to xhb layer we should introduce some kind of 
synhronization
between compilation and runtime. I belive that giving a duplicate PCODE for 
any
feature is a bad method (eg. different pcode for array acces and string 
acces)
because of limited number of pcodes. I think that we should either extend
'scope' member of HB_SYMB structure (used to define the symbol's table in
the PRG module) or pass additional parameter (of type ULONG or pointer to
some structure) that will store the additional compilation flags. This way
these flags can be checked at runtime without using //FLAGS (or using 
//FLAGS
to overwrite them).

Of course, I very appreciate the work of Przemek, Victor and others however
we are too xharbour biased currently, IMHO.

Best Regards,
Ryszard


From alex_degarate at hotmail.com  Wed Oct  3 18:57:37 2007
From: alex_degarate at hotmail.com (Alejandro de Garate)
Date: Wed Oct  3 18:57:42 2007
Subject: [Harbour] Source Code snapshot size
Message-ID: <BAY137-F31CF9E5E5CD3E1230EFFFB85AF0@phx.gbl>

Phil
Currently I'm not using SVN and what I can tell you only is:

the Latest source snapshot from Harbour's page:
http://www.harbour-project.org/harbour-svn.zip

Have inside:
11333 files
size 48.768 Kb

---
and the last beta source code from Sourceforge's page:
http://downloads.sourceforge.net/harbour-project/harbour-0.99.3.src.zip

Have inside:
1985 files
size 22.931 Kb

So... it's a huge difference, it seems to me mostly are files of SVN system

---
One more simple example:
the VM folder of SVN package (harbour-svn.zip) have:
205 files
1.919 Kb

the source file harbour-099.3.src.zip have:
39 files
957 Kb

I don't know how you would left out the unwanted files of SVN system
maybe other developers with more experience with subversion can give us a
solution.

Thanks again for your help.
Alejandro

_________________________________________________________________
FREE pop-up blocking with the new MSN Toolbar - get it now! 
http://toolbar.msn.click-url.com/go/onm00200415ave/direct/01/

From druzus at acn.waw.pl  Wed Oct  3 19:28:04 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  3 19:28:10 2007
Subject: [Harbour] ChangeLog 2007-10-03 17:04 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <47041435.9020800@dbtopas.lt>
References: <20071003150731.GA16429@localhost.localdomain>
	<4703CD9E.5050200@dbtopas.lt>
	<20071003175746.GA25820@localhost.localdomain>
	<4703FB3D.60402@dbtopas.lt>
	<20071003212715.GA603@localhost.localdomain>
	<47041435.9020800@dbtopas.lt>
Message-ID: <20071003232804.GA1209@localhost.localdomain>

On Thu, 04 Oct 2007, Mindaugas Kavaliauskas wrote:
> >Which code tries to scan symbol tables so it can detect that symbols
> >were duplicated in given symbol table? AFAIK whole internal core code
> >is ready for it and IMHO 3-rd party code cannot access module symbol
> >tables directly.
> It's a minor problem. Try:
> INIT PROC init1()
>    IF PCOUNT() > 999
>       ? main->FIELD1
>    ENDIF
> RETURN
> PROC main()
>   ? "Hello, World!"
> RETURN
> It could be fixed by changing hbmain.c line 4500 to:
>    if( strcmp( pSym->szName, szFirstFunction ) == 0 && pSym->bFunc )

Thanks for the information. I'll fix it in a while - the problem
is with builds using HB_FS_FIRST not explicit MAIN() as startup point
In practice in DOS and Windows Harbour versions.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Oct  3 19:50:28 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  3 19:50:39 2007
Subject: [Harbour] The latest code changes
In-Reply-To: <d6fbdc2aa8fdbe68ed78bce1db65ac9d.qmail@home.pl>
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl>
	<d6fbdc2aa8fdbe68ed78bce1db65ac9d.qmail@home.pl>
Message-ID: <D814B311-9184-44C6-B8FD-972C197293B5@syenar.hu>

Hi Ryszard,

We had a feature which was an extension and another similar
extension which is found in xhb. We had a lengthy discussion
about the preferred or expected workings of the one built
into Harbour (by your great work), and we couldn't get on
an agreement on it. The xhb behaviour didn't have a positive
bias in this discussion at all, we actually wanted to move
the xhb implementation _outside_ Harbour. I personally
indeed liked some properties of the xhb implementation better
this time, but what I really preferred was to not include
this contradictory feature at all. Finally we've agreed on
that, with the option for any 3rd party lib or app to change
this behaviour however they'd like. One such "3rd party" lib
is the xhb compatibility lib in contrib.

We can add another lib which emulates your original implementation,
which might be slower as you say. But there was no free lunch
in this case :(

We've also agreed to make the meaning of -ks more clear,
at least that what we hoped, and we've agreed to remove
//flags:s to make the workings of the core more "user friendly".
IMO, before these change -ks / //flags:s / HB_COMPAT_XHB combinations
made that whole area quite complicated to understand and to use,
maybe no one really understood it, and that probably means
not much ppl used them at all.

I also find the word "xhb" to come up too often lately, but
that's probably a stage we need to get over (that's why we
made xhb lib). I also didn't find each new extensions essential
to add, but they were added properly to not make any harm for
core Harbour, so I think they are okey. I'm definitely not
xhb biased, and I still find compiler cross-compatibility the
most important (with CA-Cl*pper 5.x in the first place). If
you or anyone finds too much xhb bias, pls speak up, otherwise
it's harder to defend "old Harbour", especially when we're
getting that many xhb biased feature requests.

Having said that I'm happy the we have new contributors who
give valuable feedback on Harbour (and not just xhb), and I
think Harbour is in pretty good shape now overall now.

Back to the :__enum*() stuff, I think now I get the concept
better, and I agree with your implementation, sorry for stirring
to pot unnecessarily.

I hope we can concentrate on Harbour again now, and I also
think we definitely miss you lately :)

Brgds,
Viktor

On 2007.10.04., at 0:43, Ryszard G??b wrote:

>   Well, I think that compatibility with xharbour has gone to far,  
> at least
> in
> 'string as array of bytes'.
>   Please notice that it is not possible now to use this feature  
> without
> linking
> of xhb library which pulls all extensions of xharbour. There is no
> granulity
> for inclusion/exlusion of given feature. The 'string as array of  
> bytes' is
> definitely not the 'xharbour compatibility' feature.
>   Of course I can write a single module that will add overloading  
> of []
> however accesing of string using overloading is slower than  
> previous method
> and is even slower then using SUBSTR method.
>   Additionally, the -ks switch has now very technical and internal  
> meaning
> and
> its function is quite different then previously.
>   Previously to use 'string as array' it was needed to compile code  
> with
> -ks (to
> enable special assign method) and to run an executable with // 
> FLAGS:s (to
> enable
> runtime support for this feature). I understand that it can be  
> misleading
> to user
> to have to enable this feature twice (at compile and runtime) however
> instead of
> moving this feature to xhb layer we should introduce some kind of
> synhronization
> between compilation and runtime. I belive that giving a duplicate  
> PCODE for
> any
> feature is a bad method (eg. different pcode for array acces and  
> string
> acces)
> because of limited number of pcodes. I think that we should either  
> extend
> 'scope' member of HB_SYMB structure (used to define the symbol's  
> table in
> the PRG module) or pass additional parameter (of type ULONG or  
> pointer to
> some structure) that will store the additional compilation flags.  
> This way
> these flags can be checked at runtime without using //FLAGS (or using
> //FLAGS
> to overwrite them).
>
> Of course, I very appreciate the work of Przemek, Victor and others  
> however
> we are too xharbour biased currently, IMHO.
>
> Best Regards,
> Ryszard
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Wed Oct  3 20:45:47 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  3 20:45:53 2007
Subject: [Harbour] The latest code changes
In-Reply-To: <d6fbdc2aa8fdbe68ed78bce1db65ac9d.qmail@home.pl>
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl>
	<d6fbdc2aa8fdbe68ed78bce1db65ac9d.qmail@home.pl>
Message-ID: <20071004004547.GB1209@localhost.localdomain>

On Thu, 04 Oct 2007, Ryszard G??b wrote:
>   Well, I think that compatibility with xharbour has gone to far, at least 
> in
> 'string as array of bytes'.

I thought that we remove all xHarbour compatible code from core code.
Removing support for default accessing string members using [] operators
has nothing to xHarbour compatibility. Just simply I preferred to operate
on numbers with ASCII value and Victor to use one character strings.
We were not able to agree final version so we decided to remove both
and user can chose the best version.

>   Please notice that it is not possible now to use this feature without 
> linking
> of xhb library which pulls all extensions of xharbour.

I'm, sorry but you are wrong. XHB library does not give the same
functionality as removed code covered by 's' RT flag. In xHarbour
s[n] returns one byte character value. The removed code was returning
number. It was also necessary to use number to assign string byte.

> There is no granulity
> for inclusion/exlusion of given feature. The 'string as array of bytes' is
> definitely not the 'xharbour compatibility' feature.

Yes of course. See my discussion with Victor. I even say more. The removed
code was not xHarbour compatible at all.

>   Of course I can write a single module that will add overloading of []
> however accesing of string using overloading is slower than previous method
> and is even slower then using SUBSTR method.

There is no siginificiant difference:

    Harbour devel build 1.1-1 Intl.
    Copyright 1999-2007, http://www.harbour-project.org/
    Compiling 't9.prg'...
    Lines 32, Functions/Procedures 1
    Generating C source output to 't9.c'... Done.

    Linux 2.6.15 i686 Harbour devel build 1.1-1 Intl. 10/04/07 02:17:39
    empty loop overhead:          1.07 sec.
    n:=s[2]                       3.80 sec.
    n:=substr(s,2,1)              3.46 sec.
    s[2]:=65                      5.77 sec.
    s:=stuff(s,2,1,'A')           5.92 sec.

Test code below. On access we can reduce only static overhead but
in assign operation the overhead can be huge. Core HVM implementation
can eliminate it and it's probably the only one serious reason to have
native support for accessing strings character by [] operator directly
in HVM.

>   Additionally, the -ks switch has now very technical and internal meaning 
> and
> its function is quite different then previously.
>   Previously to use 'string as array' it was needed to compile code with 
> -ks (to
> enable special assign method) and to run an executable with //FLAGS:s (to 
> enable
> runtime support for this feature).

Plese note that only description of -ks switch was changed and some
place not supported correctly by old implementation of this switch
added. At the begining -ks was workin _ONLY_ for assigning simple
variables, f.e.: var[n] := 65. I add support for all other constructions
like: (<exp>)[x,n] := 65 or o:var[n] := 66 or &var[n] := 67, etc. whre
is was not working correctly and changed the descrpition because this
feature with exactly the same behavior is necessary to be able to changed
also other types (not only strings) using indexed assignment. IMHO it's
much more clear now then explaing that user will to use 'string as array'
compiler switch to overlod indexed assign for numbers or other types.
In compiler code there is no even single line used with -ks switch which
is not necessary for proper working of 'string as array' feature so all
compiler modifications can be sumarised as: fixing 'string as array'
feature to work in all cases not only in few ones, and change description
of -ks flag shown in -k? switch. I do not see any xHarbour oriented in
the above modifications or technical/internal meaning in -ks description.
Any how if you have some better proposition for text shown in -k? usage
message then I'll very happy to change it. Current 'allow indexed
assignment on all types' is for sure far from perfect but for me much
better then 'string as bytes array enabled' because it suggest that
this feature can be used only for strings.

BTW For accessing string elements using [] operator we do not need and
never never need -ks switch and from the beginning this compile time
switch has been being necessary only for assignment.

> I understand that it can be misleading 
> to user
> to have to enable this feature twice (at compile and runtime) however 
> instead of
> moving this feature to xhb layer we should introduce some kind of 
> synhronization
> between compilation and runtime. I belive that giving a duplicate PCODE for 
> any
> feature is a bad method (eg. different pcode for array acces and string 
> acces)
> because of limited number of pcodes. I think that we should either extend
> 'scope' member of HB_SYMB structure (used to define the symbol's table in
> the PRG module) or pass additional parameter (of type ULONG or pointer to
> some structure) that will store the additional compilation flags. This way
> these flags can be checked at runtime without using //FLAGS (or using 
> //FLAGS
> to overwrite them).
> Of course, I very appreciate the work of Przemek, Victor and others however
> we are too xharbour biased currently, IMHO.

Why? We've just remove all HB_COMPAT_XHB switches from core code.
The native support for indexed strings in HVM was discussed few
days ago (BTW I asked about your opinion) and it has nothing to
XHB library. We can still return to this discussion. I have nothing
against this feature but IMHO it should work like in your startup
implementation: s[n] should return number not one byte string like
in xHarbour. Victor prefers 1 byte character string. I do not like
it because such semantic allows to make: s[n,1,1,1,1,1,1] without
RT error, because s[n] is also string then even strong typing will
not help to detect many typos, etc. Additionally operating on numbers
we can cleanly introduce operations like: s[n]+=32 when s[n]+=' '
IMHO looks a little bit ugly, isn't it?
Your opinion?

best regards,
Przemek
From druzus at acn.waw.pl  Wed Oct  3 20:54:50 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct  3 20:54:55 2007
Subject: [Harbour] 2007-10-04 02:54 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710040054.l940soWO004633@31-mo5-4.acn.waw.pl>

2007-10-04 02:54 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/compiler/hbmain.c
    ! fixed setting HB_FS_FIRST flag

best regards
Przemek
From harbour.01 at syenar.hu  Wed Oct  3 21:24:54 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct  3 21:25:02 2007
Subject: [Harbour] The latest code changes
In-Reply-To: <20071004004547.GB1209@localhost.localdomain>
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl>
	<d6fbdc2aa8fdbe68ed78bce1db65ac9d.qmail@home.pl>
	<20071004004547.GB1209@localhost.localdomain>
Message-ID: <42C1B97E-C6C7-4892-AC5E-C09454C5C60E@syenar.hu>

Hi Przemek,

> Why? We've just remove all HB_COMPAT_XHB switches from core code.
> The native support for indexed strings in HVM was discussed few
> days ago (BTW I asked about your opinion) and it has nothing to
> XHB library. We can still return to this discussion. I have nothing
> against this feature but IMHO it should work like in your startup
> implementation: s[n] should return number not one byte string like
> in xHarbour. Victor prefers 1 byte character string. I do not like
> it because such semantic allows to make: s[n,1,1,1,1,1,1] without
> RT error, because s[n] is also string then even strong typing will

IMO the above should be caught by strong typing (along with a lot
of similar constructs, not currently caught by any logic in Harbour.)
Making this a major reason when deciding about such an important
design question.. well I'm not sure if this is right.

> not help to detect many typos, etc. Additionally operating on numbers
> we can cleanly introduce operations like: s[n]+=32 when s[n]+=' '
> IMHO looks a little bit ugly, isn't it?

s[n] += ' ' does look ugly, but is this such a commonly used operation
that we need to introduce hidden type conversion to support it at all,
even if s[n] returns a char? I find this odd.

Pls remember that Clipper is a language aimed to help business app
development. In business apps you don't need to use C-like string
operations that often (just like you don't need bitwise operators
in normal code).

The implications and "non-Clipperness" of this feature far outweigths
any performance or real-life usability gains IMO. And again:
performance of [ASC(]SUBSTR(s,n,1)[)]/STUFF(s,n,1,c|Chr(n)) _can_
be easily (for you at least :) optimized in compiler to give the same
performance advantage _without any source code modification_, for
simple, cross-compatible .prg code.

I find cross-compatible code a much more important property than
a propriatery extension offering some performance boost and slighly
less code typing.

Brgds,
Viktor

From hbco2 at sbcglobal.net  Wed Oct  3 13:19:58 2007
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Wed Oct  3 22:48:29 2007
Subject: [Harbour] The latest code changes
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl><d6fbdc2aa8fdbe68ed78bce1db65ac9d.qmail@home.pl><20071004004547.GB1209@localhost.localdomain>
	<42C1B97E-C6C7-4892-AC5E-C09454C5C60E@syenar.hu>
Message-ID: <001801c805e1$a7d82540$0303a8c0@hbco>

Wholeheartedly agree!  Quite a bit of business processing occurred with
DBase, where the total memory resource was 15 global items and the maximum
number of open database files was 2.

Recently, it has become possible to look at the code and no longer recognize
the language.  While object oriented programming is obviously a boon, there
is no point in developing a "high level" language that is more complicated
than the underlying code base.

It is actually harder to build a simple, elegant foundation than it is to
continue to pile on ever increasing and obscure code variations (think PL-1)
that make the code write-only, especially to a code maintainer who might run
across the code years later.

If you need to do something really fast or really special, link in a C
module.  Keep the high-level language simple.  At least it can be
documented.

Sorry for the rant... well, sort of.  Much fantastic work has been done with
Clipper, and many, many thanks from me.

Bill



----- Original Message ----- 
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Wednesday, October 03, 2007 6:24 PM
Subject: Re: [Harbour] The latest code changes


> Hi Przemek,
>
> > Why? We've just remove all HB_COMPAT_XHB switches from core code.
> > The native support for indexed strings in HVM was discussed few
> > days ago (BTW I asked about your opinion) and it has nothing to
> > XHB library. We can still return to this discussion. I have nothing
> > against this feature but IMHO it should work like in your startup
> > implementation: s[n] should return number not one byte string like
> > in xHarbour. Victor prefers 1 byte character string. I do not like
> > it because such semantic allows to make: s[n,1,1,1,1,1,1] without
> > RT error, because s[n] is also string then even strong typing will
>
> IMO the above should be caught by strong typing (along with a lot
> of similar constructs, not currently caught by any logic in Harbour.)
> Making this a major reason when deciding about such an important
> design question.. well I'm not sure if this is right.
>
> > not help to detect many typos, etc. Additionally operating on numbers
> > we can cleanly introduce operations like: s[n]+=32 when s[n]+=' '
> > IMHO looks a little bit ugly, isn't it?
>
> s[n] += ' ' does look ugly, but is this such a commonly used operation
> that we need to introduce hidden type conversion to support it at all,
> even if s[n] returns a char? I find this odd.
>
> Pls remember that Clipper is a language aimed to help business app
> development. In business apps you don't need to use C-like string
> operations that often (just like you don't need bitwise operators
> in normal code).
>
> The implications and "non-Clipperness" of this feature far outweigths
> any performance or real-life usability gains IMO. And again:
> performance of [ASC(]SUBSTR(s,n,1)[)]/STUFF(s,n,1,c|Chr(n)) _can_
> be easily (for you at least :) optimized in compiler to give the same
> performance advantage _without any source code modification_, for
> simple, cross-compatible .prg code.
>
> I find cross-compatible code a much more important property than
> a propriatery extension offering some performance boost and slighly
> less code typing.
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From antonioharbour at gmail.com  Thu Oct  4 01:18:51 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Oct  4 01:19:21 2007
Subject: [Harbour] The latest code changes
In-Reply-To: <001801c805e1$a7d82540$0303a8c0@hbco>
Message-ID: <470477d4.02ba420a.6a12.3166@mx.google.com>

> Bill Smith
> Keep the high-level language simple. 

Amen,

Regards,

Antonio

From dbtopas at dbtopas.lt  Thu Oct  4 05:36:59 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Oct  4 05:38:41 2007
Subject: [Harbour] The latest code changes
In-Reply-To: <d6fbdc2aa8fdbe68ed78bce1db65ac9d.qmail@home.pl>
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl>
	<d6fbdc2aa8fdbe68ed78bce1db65ac9d.qmail@home.pl>
Message-ID: <4704B43B.3010209@dbtopas.lt>

Ryszard G??b wrote:
> Of course, I very appreciate the work of Przemek, Victor and others however
> we are too xharbour biased currently, IMHO.

Hello,

I have the opposite feeling - xharbour extensions are moved away from 
core code into separate contrib library.

Best regards,
Mindaugas
From druzus at acn.waw.pl  Thu Oct  4 06:35:05 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  4 06:40:37 2007
Subject: [Harbour] HASH AUTOADD
Message-ID: <20071004103505.GA12846@localhost.localdomain>

Hi All,

The last place where we have one #ifdef HB_COMPAT_XHB in core code
is source/vm/hash.c and default AUTOADD setting for hash items.

I'd like to remove it and also change a little bit default hash
behavior and hash functions. Now after some expieriences with
current code and user feedback I think that we should set
HB_HASH_AUTOADD_ASSIGN by default - it's default in most of other
languages f.e. PHP and seems to be natural setting expected by
most of users.

The second thing I'd like to change is AUTOADD mode.
Now we can set 4 states for AUTOADD in HASH item:
    HB_HASH_AUTOADD_NEVER
    HB_HASH_AUTOADD_ASSIGN
    HB_HASH_AUTOADD_ACCESS
    HB_HASH_AUTOADD_ALWAYS = (HB_HASH_AUTOADD_ASSIGN + HB_HASH_AUTOADD_ACCESS)
We can eliminate ACCESS flag by adding special meaning to DEFAULT hash
value. When it's set then autoadd in ACCESS is possible - if not then
it's forbidden.

I also do not know think that someone uses only ACCESS autoadd mode
without ASSING. IMHO we can reduce possible autoadd states to:
    HB_HASH_AUTOADD_NEVER
    HB_HASH_AUTOADD_ASSIGN
    HB_HASH_AUTOADD_ALWAYS

After above we can elininate these flags and define that:
1. AUTOADD is possible or not (controll by logical value)
2. AUTOADD when enabled works always for ASSING operation
3. When DEFAULT value is set then AUTOADD when enabled works
   also for ACCESS

I'd like to make this modification ASAP.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct  4 06:37:01 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  4 06:50:29 2007
Subject: [Harbour] 2007-10-04 12:36 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710041037.l94Ab1rA026178@31-mo5-4.acn.waw.pl>

2007-10-04 12:36 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/hvm.c
    ! removed one call to hb_vmRequestRestore() left by mistake
    % minor optimization

best regards
Przemek
From druzus at acn.waw.pl  Thu Oct  4 07:15:15 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  4 07:19:55 2007
Subject: [Harbour] 2007-10-04 13:15 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710041115.l94BFFDl027302@31-mo5-4.acn.waw.pl>

2007-10-04 13:15 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/tests/multifnc/t0.prg
    * show information about Harbour version and used C compiler

best regards
Przemek
From lorenzo.fiorini at gmail.com  Thu Oct  4 08:13:35 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Oct  4 08:15:36 2007
Subject: [Harbour] HASH AUTOADD
In-Reply-To: <20071004103505.GA12846@localhost.localdomain>
References: <20071004103505.GA12846@localhost.localdomain>
Message-ID: <9257026e0710040513l59dd643btbd03c424c2320c5c@mail.gmail.com>

On 10/4/07, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> I'd like to remove it and also change a little bit default hash
> behavior and hash functions. Now after some expieriences with
> current code and user feedback I think that we should set
> HB_HASH_AUTOADD_ASSIGN by default - it's default in most of other
> languages f.e. PHP and seems to be natural setting expected by
> most of users.
> ...

Of course I agree :)

best regards,
Lorenzo
From dbtopas at dbtopas.lt  Thu Oct  4 08:11:04 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Oct  4 08:22:35 2007
Subject: [Harbour] HASH AUTOADD
In-Reply-To: <20071004103505.GA12846@localhost.localdomain>
References: <20071004103505.GA12846@localhost.localdomain>
Message-ID: <4704D858.4080804@dbtopas.lt>

Przemyslaw Czerpak wrote:
> The last place where we have one #ifdef HB_COMPAT_XHB in core code
> is source/vm/hash.c and default AUTOADD setting for hash items.
> 
> I'd like to remove it and also change a little bit default hash
> behavior and hash functions. Now after some expieriences with
> current code and user feedback I think that we should set
> HB_HASH_AUTOADD_ASSIGN by default - it's default in most of other
> languages f.e. PHP and seems to be natural setting expected by
> most of users.
> 
> The second thing I'd like to change is AUTOADD mode.
> Now we can set 4 states for AUTOADD in HASH item:
>     HB_HASH_AUTOADD_NEVER
>     HB_HASH_AUTOADD_ASSIGN
>     HB_HASH_AUTOADD_ACCESS
>     HB_HASH_AUTOADD_ALWAYS = (HB_HASH_AUTOADD_ASSIGN + HB_HASH_AUTOADD_ACCESS)
> We can eliminate ACCESS flag by adding special meaning to DEFAULT hash
> value. When it's set then autoadd in ACCESS is possible - if not then
> it's forbidden.
> 
> I also do not know think that someone uses only ACCESS autoadd mode
> without ASSING. IMHO we can reduce possible autoadd states to:
>     HB_HASH_AUTOADD_NEVER
>     HB_HASH_AUTOADD_ASSIGN
>     HB_HASH_AUTOADD_ALWAYS
> 
> After above we can elininate these flags and define that:
> 1. AUTOADD is possible or not (controll by logical value)
> 2. AUTOADD when enabled works always for ASSING operation
> 3. When DEFAULT value is set then AUTOADD when enabled works
>    also for ACCESS

Hi,


so, by default this new logical AUTOADD setting will be TRUE (like 
written in the top of your mail)?

It's OK for me.

Just one question. If AUTOADD is FALSE and default value is set, it will 
work like current HB_HASH_AUTOADD_ACCESS, or AUTOADD flag has higher 
priority and it will work like HB_HASH_AUTOADD_NEVER?

Default value setting function should be changed also, perhaps into two: 
HB_HSetDefault(), HB_HGetDefault(). The problem is, if I want to enable 
AUTOADD on ACCESS by setting default value, and later I want to switch 
AUTOADD on ACCESS off. I should clear default value. Current 
HB_HDefault(hHash) is not OK because it works as GetDefault. 
HB_HDefault(hHash, NIL) is also not good, because default value could be 
NIL. An alternative to this could be current HB_HDefault() and new 
HB_HClearDefault(hHash), but I see HB_HGetDefault()/HB_HSetDefault() 
more elegant. HB_HSetDefault() can return hHash if someone will want to use:
   HB_HAutoAdd(HB_HSetDefault(hHash), .F.)


Best regards,
Mindaugas





From miguelangel at marchuet.net  Thu Oct  4 10:56:53 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Thu Oct  4 12:47:49 2007
Subject: [Harbour] 2007-10-04 13:15 UTC+0100 Miguel Angel Marchuet Frutos
	<miguelangel/at/marchuet.net>
Message-ID: <4704FF35.2050805@marchuet.net>

2007-10-04 13:15 UTC+0100 Miguel Angel Marchuet Frutos <miguelangel/at/marchuet.net>
   * contrib/bmdbfcdx/bmdbfcdx1.c
     * removed memory leak.

   * contrib/xhb/makefile.bc
     * added missing file.

   * source/vm/estack.c
     * corrected sintax

best regards,
Miguel Angel Marchuet
From miguelangel at marchuet.net  Thu Oct  4 12:15:00 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Thu Oct  4 15:32:12 2007
Subject: [Harbour] PACK problem with recent changes
Message-ID: <47051184.1060304@marchuet.net>


I can't isolate the problem in a reduced example.

but if you PACK the atached file FPT will be corrupted

  #include "dbinfo.ch"
  #include "ord.ch"

  PROCEDURE Main()
     LOCAL cDbf := "DATFILTE",n

     request DBFCDX
     rddSetDefault("DBFCDX")

     dbusearea( .t.,, cDbf, nil , .F.)
     PACK
     DBGOTOP()
     PACK

     FOR n := 1 TO FCOUNT()
       ? FIELDGET(N)
     NEXT

     CLOSE

RETURN


Best regards,
Miguel Angel Marchuet

-------------- next part --------------
A non-text attachment was scrubbed...
Name: PRUEBAS.rar
Type: application/octet-stream
Size: 2209 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20071004/afc4ce5b/PRUEBAS.obj
From rglab at przesiew.imid.med.pl  Thu Oct  4 11:04:24 2007
From: rglab at przesiew.imid.med.pl (Ryszard Glab)
Date: Thu Oct  4 16:24:42 2007
Subject: [Harbour] The latest code changes
In-Reply-To: <D814B311-9184-44C6-B8FD-972C197293B5@syenar.hu>
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl>,
	<d6fbdc2aa8fdbe68ed78bce1db65ac9d.qmail@home.pl>,
	<D814B311-9184-44C6-B8FD-972C197293B5@syenar.hu>
Message-ID: <47051D18.1384.112D52D@rglab.przesiew.imid.med.pl>

On 4 Oct 2007 at 1:50, Szak?ts Viktor wrote:

  It seems that I was not clear enough in my previous message.

  I agree completely with creation of xhb library (and other if 
necessary) however my main complain is about moving 'string as array' 
to xhb compatibility layer. Please notice that 'string as array' is 
not a xhb feature. It was added by Ron to harbour.
  If we disagree about implementation detail because we want to use 
either numbers or character (although in Clipper there is no such 
thing as 'character' type) as a result of indexed access then we 
should implement both and allow the programmer to choose the one he 
needs. Please notice that in some usage numbers will fit better and 
characters will fit better in others. So lets allow the programmer to 
use both. For example, in one module he may use numbers and in other 
he can use characters - both modules should be allowed to be linked 
into a single executable. And in other module he can even use 
overloading of [] operator.

  So I will repeat my previous idea.
First, we should increase the granulity (modularization) of 
extensions that can be included in code by the use of compiler 
switches.
Second, we should introduse a method of synhronization between the 
compiler and the runtime modules. This is required because most 
extensions are located  in the code of VM (or will be located - it is 
not only 'string as array')

  Instead of 
REQUEST XHB_LIB
in the code we can add eg. -kb switch that will automatically 
generate request to link xhblib. Another switch should enable support 
for 'string as array of bytes' and another switch should enable 
support for 'strings as array of characters'. Yet another switch 
should enable negative indexes or alternate ADEL behaviour. The 
compiler should pass these switches to the VM so the requested 
support will be available during code execution of given code module 
or given function if we connect the switches with the symbols table..

  Please notice that I have nothing against xhb compatibility. The 
xhb bias means for me that the quite usable extension of harbour was 
moved to xhb just to please the xhb users instead of the harbour 
users.

Best Regards, 
Ryszard
From rglab at przesiew.imid.med.pl  Thu Oct  4 12:27:39 2007
From: rglab at przesiew.imid.med.pl (Ryszard Glab)
Date: Thu Oct  4 19:50:12 2007
Subject: [Harbour] The latest code changes
In-Reply-To: <20071004004547.GB1209@localhost.localdomain>
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl>,
	<d6fbdc2aa8fdbe68ed78bce1db65ac9d.qmail@home.pl>,
	<20071004004547.GB1209@localhost.localdomain>
Message-ID: <4705309B.11218.15F0C78@rglab.przesiew.imid.med.pl>

On 4 Oct 2007 at 2:45, Przemyslaw Czerpak wrote:

> I thought that we remove all xHarbour compatible code from core code.
> Removing support for default accessing string members using [] operators
> has nothing to xHarbour compatibility. Just simply I preferred to operate
> on numbers with ASCII value and Victor to use one character strings.
> We were not able to agree final version so we decided to remove both
> and user can chose the best version.

  Then why this code has landed in xhb library if it 'has nothing to 
xHarbour compatibility'? Shouldn't than it be moved to a new 
source/features directory and to a new 'features' library?
  I know that the previous code was not perfect however it can be 
fixed and we can combine both views on 'string as array' as I 
outlined in my response to Victor.

> >   Please notice that it is not possible now to use this feature without 
> > linking
> > of xhb library which pulls all extensions of xharbour.
> 
> I'm, sorry but you are wrong. XHB library does not give the same
> functionality as removed code covered by 's' RT flag. In xHarbour
> s[n] returns one byte character value. The removed code was returning
> number. It was also necessary to use number to assign string byte.

  It is an implementation detail if we use number or characters - I 
complain because currently index operator [] for strings can be used 
only if whole xhb library is linked.

> 
> > There is no granulity
> > for inclusion/exlusion of given feature. The 'string as array of bytes' is
> > definitely not the 'xharbour compatibility' feature.
> 
> Yes of course. See my discussion with Victor. I even say more. The removed
> code was not xHarbour compatible at all.

   Again, then we shouldn't move it to xhb library but to separate 
module in the core of harbour.

> >   Of course I can write a single module that will add overloading of []
> > however accesing of string using overloading is slower than previous method
> > and is even slower then using SUBSTR method.
> 
> There is no siginificiant difference:
> 
>     Harbour devel build 1.1-1 Intl.
>     Copyright 1999-2007, http://www.harbour-project.org/
>     Compiling 't9.prg'...
>     Lines 32, Functions/Procedures 1
>     Generating C source output to 't9.c'... Done.
> 
>     Linux 2.6.15 i686 Harbour devel build 1.1-1 Intl. 10/04/07 02:17:39
>     empty loop overhead:          1.07 sec.
>     n:=s[2]                       3.80 sec.
>     n:=substr(s,2,1)              3.46 sec.
>     s[2]:=65                      5.77 sec.
>     s:=stuff(s,2,1,'A')           5.92 sec.

  My tests with current SVN code shows much bigger differences:
[N] - new method using overloading
[O] - old method 
empty loop	-> [O] 0.42 	[N] 0.43	(the same)
n:=s[2]		-> [O] 0.97	[N] 2.33	(100% slower)
n:=SUBSTR(s,2,1)	->	[O] 1.64	[N] 1.66	(the same)
s[2]:=n		->	[O] 1.02	[N] 4.22	(400% slower)
STUFF( s,2,1,'b')	->	[O] 2.90	[N] 2.95 (the same)

Running on Linux 2.4.30 i686

> Plese note that only description of -ks switch was changed and some
> place not supported correctly by old implementation of this switch
> added. At the begining -ks was workin _ONLY_ for assigning simple
> variables, f.e.: var[n] := 65. I add support for all other constructions
> like: (<exp>)[x,n] := 65 or o:var[n] := 66 or &var[n] := 67, etc. whre
> is was not working correctly and changed the descrpition because this
> feature with exactly the same behavior is necessary to be able to changed
> also other types (not only strings) using indexed assignment. IMHO it's

  Please notice that -ks switch is causing that the compiler 
generates the code to allow assigments however it cannot be used 
without additional code at runtime. Thus it is only a technical 
switch. The real usage of it is currently for proper overloading of 
[] operator. So the switch should be '-ko' and its description should 
be the same as now or something like 'allow assigments in overloading 
of [] operator'.
  The result of '-ks' switch should be enabling support for 'string 
as array' however because we should allow the programer to choose if 
he wants to operate on bytes (numbers) or characters (strings) then 
we should support two switches in fact:
-ks enable 'string as array of characters'
-kb or -kn or -kS enable 'string as array of bytes'

  Please notice that the above described switches are generating the 
same action in the compiler but should allow to use quite different 
code at runtime - because these switches describe the runtime 
behaviour of the application.
  So the real problem is how to effectively synhronize the used 
compiler switches (the set of enabled/disabled features) with the 
runtime code of HVM - to eliminate the need to use duplicated 
//FLAGS: at application startup and to allow linking of modules 
compiled with different set of switches.

> Why? We've just remove all HB_COMPAT_XHB switches from core code.
> The native support for indexed strings in HVM was discussed few
> days ago (BTW I asked about your opinion) and it has nothing to
> XHB library. We can still return to this discussion. I have nothing
> against this feature but IMHO it should work like in your startup
> implementation: s[n] should return number not one byte string like
> in xHarbour. Victor prefers 1 byte character string. I do not like
> it because such semantic allows to make: s[n,1,1,1,1,1,1] without
> RT error, because s[n] is also string then even strong typing will
> not help to detect many typos, etc. Additionally operating on numbers
> we can cleanly introduce operations like: s[n]+=32 when s[n]+=' '
> IMHO looks a little bit ugly, isn't it?
> Your opinion?

  See above. I would like to have both and lets decide the programmer 
which one he will use in the compiled module (or function if we 
implement switches on function level). I agree that using numbers is 
more natural to Clipper because Clipper doesn't have the 'character' 
type (the string of one byte or one character is not a character type 
it is still a string) however in some usage the numbers will fit 
better than characters and in other the character will be more 
useable.
  Please reread the ending of my previous message where I was writing 
about synhronization method using for example symbols table. Sooner 
or leter we will need some method to pass options to runtime module 
to allow/disallow some extension (not only string as array :).

Regards, Ryszard

From druzus at acn.waw.pl  Thu Oct  4 14:14:52 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  4 20:35:52 2007
Subject: [Harbour] 2007-10-04 20:14 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710041814.l94IEqVn032008@31-mo5-4.acn.waw.pl>

2007-10-04 20:14 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/dbf1.c
    * ignore Sx_SetTrigger( TRIGGER_ENABLE ) when trigger function not set

best regards
Przemek
From miguelangel at marchuet.net  Thu Oct  4 13:03:36 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Thu Oct  4 22:12:37 2007
Subject: [Harbour] problem with RASCAN
Message-ID: <47051CE8.6010408@marchuet.net>

{
     [1] => { Array of 3 Items }
       Type='A' ->
       {
        [1] => "700000001",
        [2] =>      500.00,
        [3] => .F.
       },
     [2] => { Array of 3 Items }
       Type='A' ->
       {
        [1] => "437000000",
        [2] =>      431.03,
        [3] => .T.
       }
    }


HB_RASCAN(  a, {|e| !e[3] } )


returns 0

From druzus at acn.waw.pl  Thu Oct  4 21:26:48 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  4 22:48:57 2007
Subject: [Harbour] The latest code changes
In-Reply-To: <d6fbdc2aa8fdbe68ed78bce1db65ac9d.qmail@home.pl>
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl>
	<d6fbdc2aa8fdbe68ed78bce1db65ac9d.qmail@home.pl>
Message-ID: <20071005012648.GA1708@localhost.localdomain>

On Thu Oct 4 12:27:39 EDT 2007, Ryszard G??b wrote:
>   Then why this code has landed in xhb library if it 'has nothing to
> xHarbour compatibility'? Shouldn't than it be moved to a new
> source/features directory and to a new 'features' library?

This code was not moved to XHB library. I added to XHB directory
only the code I added few months ago to HVM covered by HB_COMPAT_XHB
switch so not enabled in default builds. This version of indexing
strings by [] is not compatible with the Harbour native one covered
by 's' flag. You may call it nearly xHarbour compatible because
I intentionally not replicated all xHarbour side effects.

>   I know that the previous code was not perfect however it can be
> fixed and we can combine both views on 'string as array' as I
> outlined in my response to Victor.

Ryszard please check what we have month ago in HVM. We have TWO
different implementation of indexed strings. They were chosen during
HVM compilation. We removed both from HVM though I wanted to leave
the one which were operating on numbers so it was not my decision
but also it was not very important problem for me so I haven't fought
strongly to keep them. Then in XHB lib I created xHarbour compatible
version of indexed strings and other operators once again. This new
implementation is much more closer to xHarbour then I ever want to
have in core HVM code, f.e. it allows to use one byte character as
numeric values - just try: ? 100 + "A"
This emulation works also in situation when native xHarbour core
code does not work due to much better support in compiler and better
POCDE list. But it's xHarbour problem not our. I want to stop any
discussions about xHarbour extensions in our core code so I'd moved
all of them which I added few months ago and were covered by
HB_COMPAT_XHB (so not enabled in default Harbour builds) to XHB
library.

>   It is an implementation detail if we use number or characters - I
> complain because currently index operator [] for strings can be used

It's not only implementation detail. XHB lib emulates many different
xHarbour only operations. And I'm happy that some of them are in this
library because I do not want to have it in HVM due to side effects
or missing of precise behavior definition.

> only if whole xhb library is linked.

This is minor problem because we can add to RTL functions which will
overload [] for strings without rest of xHarbour code. It's just a
few lines.

> > Yes of course. See my discussion with Victor. I even say more. The removed
> > code was not xHarbour compatible at all.
>    Again, then we shouldn't move it to xhb library but to separate
> module in the core of harbour.

It was not moved to XHB library - please check.

>    My tests with current SVN code shows much bigger differences:
>  [N] - new method using overloading
>  [O] - old method
[...]
Yes, if you compare overloading to core HVM implementation then
for sure it will be slower. Probably about 2-5 times in simple loop
which makes only such operation and strings are short. For very long
strings I can create code which will be 10000% slower with overloading
then with core HVM implementation. I know about it and I'm ready to
return to discussion about native support for indexed strings in HVM.

>   Please notice that -ks switch is causing that the compiler
> generates the code to allow assigments however it cannot be used
> without additional code at runtime.

Two week ago it depended on type of Harbour build. When HVM was
compiled with HB_COMPAT_XHB macro then no additional switches were
necessary and 's' flag were ignored. But it's history. Now neither
HB_COMPAT_XHB nor 's' is present in HVM so we may think about new
clean implementation.

> Thus it is only a technical
> switch. The real usage of it is currently for proper overloading of
> [] operator. So the switch should be '-ko' and its description should
> be the same as now or something like 'allow assigments in overloading
> of [] operator'.

Very good. In such case we can use -ks to unable indexed strings
without overloading [] operator. It was one of my propositions few
days ago.

>   The result of '-ks' switch should be enabling support for 'string
> as array' however because we should allow the programer to choose if
> he wants to operate on bytes (numbers) or characters (strings) then
> we should support two switches in fact:
> -ks enable 'string as array of characters'
> -kb or -kn or -kS enable 'string as array of bytes'

Exactly. We have very close opinions here.

>   Please notice that the above described switches are generating the
> same action in the compiler but should allow to use quite different
> code at runtime - because these switches describe the runtime
> behaviour of the application.

Not only. Some of them will interact with compiler. F.e. strong typing
module has to play well with them. Compile time optimization also
should know the result of "ABC"[2] to calculate it properly. Some
more advanced optimizations using strong typing information will
have to respect these switches too and finally we should keep macro
compiler synced with compiler if it's executed from module compiled
with given switches.

>   So the real problem is how to effectively synhronize the used
> compiler switches (the set of enabled/disabled features) with the
> runtime code of HVM - to eliminate the need to use duplicated
> //FLAGS: at application startup and to allow linking of modules
> compiled with different set of switches.

Yes.

>   See above. I would like to have both and lets decide the programmer
> which one he will use in the compiled module (or function if we
> implement switches on function level). I agree that using numbers is
> more natural to Clipper because Clipper doesn't have the 'character'
> type (the string of one byte or one character is not a character type
> it is still a string) however in some usage the numbers will fit
> better than characters and in other the character will be more
> useable.

It's fine for me. I also think that compile time switches which allow
to control also RT behavior is the best choice because programmer does
not have to worry about linking together libraries compiled with
different switches.

>   Please reread the ending of my previous message where I was writing
> about synhronization method using for example symbols table. Sooner
> or leter we will need some method to pass options to runtime module
> to allow/disallow some extension (not only string as array :).

We already have sth like that for macro compiler. We can pass 8 binary
flags and I'm using it. I synced compile time flags values with macro
compiler flags for easier use and extended passed flags, f.e. I added
-ks switch to them so macro compiler activated in modules compiled
with -ks also supports -ks switch. But it works only for macros and
number of switches we can support in such way is limited so we will
have to think about sth else. Allocating new bits in symbol scope
to control some PCODEs behavior is also already used in HVM method.
I use HB_FS_DYNCODE to detect dynamically loaded modules and enable
alternative behavior for PCODEs like HB_P_PUSHSTR* or HB_P_PUSHBLOCK*
which is save for module unloading. Anyhow here we also have some
limitations, f.e. macro compiled code does not use symbol table.
As another alternative we have introducing new PCODE, f.e. HB_P_FLAGS
or adding structure for which will be used as PCODE function envelope.
Sth like we have for .hrb functions: HB_PCODEFUNC. We can simply add
flag member to this function. Such envelope will be usefull to resolve
also some other problems. It will be even possible to generate PCODE
functions to .c files without any real C functions. C functions can
be added only to satisfy dependences in linkers. They can execute
PCODE functions by calling hb_vmExecute( pFuncEnvelope ) but does
not have to. It also allows to easy extract function body so it's
possible to implement sth like exchanging compiled functions between
programs without .hrb files.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct  4 13:51:05 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct  4 23:01:13 2007
Subject: [Harbour] 2007-10-04 19:50 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710041751.l94Hp5mW031165@31-mo5-4.acn.waw.pl>

2007-10-04 19:50 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/dbffpt/dbffpt1.c
    ! fixed memo pack when DBF record were not updated but only memo file
      Problem reported by Miguel

best regards
Przemek
From lkrausem at shaw.ca  Thu Oct  4 21:21:15 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Fri Oct  5 01:27:11 2007
Subject: [Harbour] dbCreate....
Message-ID: <4705918B.4050101@shaw.ca>

After reading Przemek's comments in dbcmd.c, I guess it's not a bug, but 
a feature.
Is there a way to raise a RTE without having to build with HB_C52_STRICT?

   /*
    * Clipper allows to use empty struct array for RDDs which does not
    * support fields, f.e.: DBFBLOB in CL5.3
    * In CL5.3 it's also possible to create DBF file without fields.
    * if some RDD wants to block it then they should serve it in lower
    * level, [druzus]
    */
   if( !pStruct ||
#ifdef HB_C52_STRICT
       hb_arrayLen( pStruct ) == 0 ||
#endif
       !szFileName )
   {
      hb_errRT_DBCMD( EG_ARG, EDBCMD_DBCMDBADPARAMETER, NULL, "DBCREATE" );
      return;
   }
   uiLen = ( USHORT ) hb_arrayLen( pStruct );

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From lkrausem at shaw.ca  Thu Oct  4 21:04:23 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Fri Oct  5 01:56:52 2007
Subject: [Harbour] dbCreate serious bug
Message-ID: <47058D97.9070501@shaw.ca>

Hello:

I hate to be the bearer of bad news, but dbCreate() used to raise a runtime
error (DBCMD/1014) whenever an empty structure was passed to this
function.  Now it just creates a dbf (regardless the RDD) with now fields!

//***
#ifdef ADS
#include "ads.ch"
#endif

Announce RDDSYS

FUNCTION main()
   #ifdef ADS
      #undef ADS
      Request ADS
      rddSetDefault("ADSCDX")
      set server LOCAL //REMOTE
      set filetype to CDX
   #endif
   #ifdef CDX
      #undef CDX
      Request DBFCDX, DBFFPT
      RddSetDefault( "DBFCDX" )
   #endif
   #ifdef NTX
      #undef NTX
      Request DBFNTX, DBFFPT
      RddSetDefault( "DBFNTX" )
   #endif
   setmode(24,80)
   cls

   ? Version(), RddSetDefault()

   dbcreate("bad.dbf", {} )  // should raise RTE: DBCMD/1014 Argument Error
   use bad  // should never get here... but current CVS does :-(
   ? neterr()

   close all

RETURN NIL
//***

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"



From e.m.giordano at emagsoftware.it  Fri Oct  5 02:50:39 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Oct  5 03:51:55 2007
Subject: [Harbour] The latest code changes
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl>,
	<d6fbdc2aa8fdbe68ed78bce1db65ac9d.qmail@home.pl>,
	<D814B311-9184-44C6-B8FD-972C197293B5@syenar.hu>
	<47051D18.1384.112D52D@rglab.przesiew.imid.med.pl>
Message-ID: <008c01c8071c$0a9b0770$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Ryszard Glab" <rglab@przesiew.imid.med.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: giovedi 4 ottobre 2007 17.04
Oggetto: Re: [Harbour] The latest code changes


> First, we should increase the granulity

Granularity. :-)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From harbour.01 at syenar.hu  Fri Oct  5 03:11:42 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct  5 04:30:47 2007
Subject: [Harbour] The latest code changes
In-Reply-To: <47051D18.1384.112D52D@rglab.przesiew.imid.med.pl>
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl>,
	<d6fbdc2aa8fdbe68ed78bce1db65ac9d.qmail@home.pl>,
	<D814B311-9184-44C6-B8FD-972C197293B5@syenar.hu>
	<47051D18.1384.112D52D@rglab.przesiew.imid.med.pl>
Message-ID: <F8E0A055-473E-4944-ABDA-DD6ED5EB4DA6@syenar.hu>

Hi Ryszard,

>   If we disagree about implementation detail because we want to use
> either numbers or character (although in Clipper there is no such
> thing as 'character' type) as a result of indexed access then we
> should implement both and allow the programmer to choose the one he
> needs. Please notice that in some usage numbers will fit better and
> characters will fit better in others. So lets allow the programmer to
> use both. For example, in one module he may use numbers and in other
> he can use characters - both modules should be allowed to be linked
> into a single executable. And in other module he can even use
> overloading of [] operator.

Sorry, I disagree. Instead of adding more complexity for the
core Harbour developers, the Harbour user and the final users,
I'd rather even make everything more simple than they are now.
The responsibility is in our hands to make these decisions IMO
and not adding everything and let other decide instead of us.

See in C#, Java, Javascript, Ruby, Python (or even C/C++):
Do you see switches changing compiler and runtime behaviour
this way?

And again: Do we really need this feature at all? If yes, why?
How about cross compatibility? How about ASC(SUBSTR()) pcode
optimization?

>   So I will repeat my previous idea.
> First, we should increase the granulity (modularization) of
> extensions that can be included in code by the use of compiler
> switches.
> Second, we should introduse a method of synhronization between the
> compiler and the runtime modules. This is required because most
> extensions are located  in the code of VM (or will be located - it is
> not only 'string as array')

I disagree. A language should be consistent _without_ any compiler
and runtime switches which dramatically modify it's workings.
It's _one_ language after all.

>   Instead of
> REQUEST XHB_LIB
> in the code we can add eg. -kb switch that will automatically

I don't agree. Why should we invent a special way to include
an external lib, when we have an ancient and perfectly working
method to do this already? (plus operator overloading)

BTW, the point is to make _all_ xhb features _external_.

>   Please notice that I have nothing against xhb compatibility. The
> xhb bias means for me that the quite usable extension of harbour was
> moved to xhb just to please the xhb users instead of the harbour
> users.

We neither, despite, you suggest to add them via special compiler
switches, which needs all of them implemented inside core Harbour,
while we say that they should be added as an external lib (supported
by the contrib lib developers) and used as a usual 3rd party lib.

Brgds,
Viktor



From harbour.01 at syenar.hu  Fri Oct  5 03:21:18 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct  5 04:34:49 2007
Subject: [Harbour] The latest code changes
In-Reply-To: <4705309B.11218.15F0C78@rglab.przesiew.imid.med.pl>
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl>,
	<d6fbdc2aa8fdbe68ed78bce1db65ac9d.qmail@home.pl>,
	<20071004004547.GB1209@localhost.localdomain>
	<4705309B.11218.15F0C78@rglab.przesiew.imid.med.pl>
Message-ID: <38EC03BD-76F2-4BA0-8079-A4D0780783C5@syenar.hu>

> On 4 Oct 2007 at 2:45, Przemyslaw Czerpak wrote:
>
>> I thought that we remove all xHarbour compatible code from core code.
>> Removing support for default accessing string members using []  
>> operators
>> has nothing to xHarbour compatibility. Just simply I preferred to  
>> operate
>> on numbers with ASCII value and Victor to use one character strings.
>> We were not able to agree final version so we decided to remove both
>> and user can chose the best version.
>
>   Then why this code has landed in xhb library if it 'has nothing to
> xHarbour compatibility'? Shouldn't than it be moved to a new
> source/features directory and to a new 'features' library?
>   I know that the previous code was not perfect however it can be
> fixed and we can combine both views on 'string as array' as I
> outlined in my response to Victor.

We can dicuss about the placment of this library, but at this point
is see no reason to split the "3rd party" libs coming along with
Harbour to a "contrib" and to a "feature" section. This just make
it more complicated to follow, without advantages. Contrib can
be packages along with Harbour just as well, so users can find it
well.

>>>   Please notice that it is not possible now to use this feature  
>>> without
>>> linking
>>> of xhb library which pulls all extensions of xharbour.
>>
>> I'm, sorry but you are wrong. XHB library does not give the same
>> functionality as removed code covered by 's' RT flag. In xHarbour
>> s[n] returns one byte character value. The removed code was returning
>> number. It was also necessary to use number to assign string byte.
>
>   It is an implementation detail if we use number or characters - I
> complain because currently index operator [] for strings can be used
> only if whole xhb library is linked.

It can be implemented as a small lib - implementing just this one
feature - as well. I've suggested this in several e-mails. You say
we should have a "feature" lib, I say contrib is perfect for that,
but idea stays the same IMO, the "user experience" is also the
same, yet we are not "polluting" core with suble (or not so subtle)
variations of the same feature (or with extra extensions at all).

>   See above. I would like to have both and lets decide the programmer
> which one he will use in the compiled module (or function if we
> implement switches on function level). I agree that using numbers is
> more natural to Clipper because Clipper doesn't have the 'character'
> type (the string of one byte or one character is not a character type

It does have however the "1 char long string" "type", there is
no need to have a character type. Neither does Clipper have any
such an operator where one type "becomes" another type with
explicit conversion. All such conversion are done via explicit
function calls.

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Oct  5 03:29:10 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct  5 04:37:29 2007
Subject: [Harbour] The latest code changes
In-Reply-To: <20071005012648.GA1708@localhost.localdomain>
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl>
	<d6fbdc2aa8fdbe68ed78bce1db65ac9d.qmail@home.pl>
	<20071005012648.GA1708@localhost.localdomain>
Message-ID: <AA62FA4E-FCD6-4CFC-B62A-356C3919DCAF@syenar.hu>

What are you opinions about these questions:

Why do we need this feature at all in Harbour, what are we trying
to solve? How about cross compatibility? How about ASC(SUBSTR())
pcode optimization to achieve the same speed?

Sorry about that, but it's now that I feel like this was (almost)
xhb :(

Brgds,
Viktor

On 2007.10.05., at 3:26, Przemyslaw Czerpak wrote:

> On Thu Oct 4 12:27:39 EDT 2007, Ryszard G??b wrote:
>>   Then why this code has landed in xhb library if it 'has nothing to
>> xHarbour compatibility'? Shouldn't than it be moved to a new
>> source/features directory and to a new 'features' library?
>
> This code was not moved to XHB library. I added to XHB directory
> only the code I added few months ago to HVM covered by HB_COMPAT_XHB
> switch so not enabled in default builds. This version of indexing
> strings by [] is not compatible with the Harbour native one covered
> by 's' flag. You may call it nearly xHarbour compatible because
> I intentionally not replicated all xHarbour side effects.
>
>>   I know that the previous code was not perfect however it can be
>> fixed and we can combine both views on 'string as array' as I
>> outlined in my response to Victor.
>
> Ryszard please check what we have month ago in HVM. We have TWO
> different implementation of indexed strings. They were chosen during
> HVM compilation. We removed both from HVM though I wanted to leave
> the one which were operating on numbers so it was not my decision
> but also it was not very important problem for me so I haven't fought
> strongly to keep them. Then in XHB lib I created xHarbour compatible
> version of indexed strings and other operators once again. This new
> implementation is much more closer to xHarbour then I ever want to
> have in core HVM code, f.e. it allows to use one byte character as
> numeric values - just try: ? 100 + "A"
> This emulation works also in situation when native xHarbour core
> code does not work due to much better support in compiler and better
> POCDE list. But it's xHarbour problem not our. I want to stop any
> discussions about xHarbour extensions in our core code so I'd moved
> all of them which I added few months ago and were covered by
> HB_COMPAT_XHB (so not enabled in default Harbour builds) to XHB
> library.
>
>>   It is an implementation detail if we use number or characters - I
>> complain because currently index operator [] for strings can be used
>
> It's not only implementation detail. XHB lib emulates many different
> xHarbour only operations. And I'm happy that some of them are in this
> library because I do not want to have it in HVM due to side effects
> or missing of precise behavior definition.
>
>> only if whole xhb library is linked.
>
> This is minor problem because we can add to RTL functions which will
> overload [] for strings without rest of xHarbour code. It's just a
> few lines.
>
>>> Yes of course. See my discussion with Victor. I even say more.  
>>> The removed
>>> code was not xHarbour compatible at all.
>>    Again, then we shouldn't move it to xhb library but to separate
>> module in the core of harbour.
>
> It was not moved to XHB library - please check.
>
>>    My tests with current SVN code shows much bigger differences:
>>  [N] - new method using overloading
>>  [O] - old method
> [...]
> Yes, if you compare overloading to core HVM implementation then
> for sure it will be slower. Probably about 2-5 times in simple loop
> which makes only such operation and strings are short. For very long
> strings I can create code which will be 10000% slower with overloading
> then with core HVM implementation. I know about it and I'm ready to
> return to discussion about native support for indexed strings in HVM.
>
>>   Please notice that -ks switch is causing that the compiler
>> generates the code to allow assigments however it cannot be used
>> without additional code at runtime.
>
> Two week ago it depended on type of Harbour build. When HVM was
> compiled with HB_COMPAT_XHB macro then no additional switches were
> necessary and 's' flag were ignored. But it's history. Now neither
> HB_COMPAT_XHB nor 's' is present in HVM so we may think about new
> clean implementation.
>
>> Thus it is only a technical
>> switch. The real usage of it is currently for proper overloading of
>> [] operator. So the switch should be '-ko' and its description should
>> be the same as now or something like 'allow assigments in overloading
>> of [] operator'.
>
> Very good. In such case we can use -ks to unable indexed strings
> without overloading [] operator. It was one of my propositions few
> days ago.
>
>>   The result of '-ks' switch should be enabling support for 'string
>> as array' however because we should allow the programer to choose if
>> he wants to operate on bytes (numbers) or characters (strings) then
>> we should support two switches in fact:
>> -ks enable 'string as array of characters'
>> -kb or -kn or -kS enable 'string as array of bytes'
>
> Exactly. We have very close opinions here.
>
>>   Please notice that the above described switches are generating the
>> same action in the compiler but should allow to use quite different
>> code at runtime - because these switches describe the runtime
>> behaviour of the application.
>
> Not only. Some of them will interact with compiler. F.e. strong typing
> module has to play well with them. Compile time optimization also
> should know the result of "ABC"[2] to calculate it properly. Some
> more advanced optimizations using strong typing information will
> have to respect these switches too and finally we should keep macro
> compiler synced with compiler if it's executed from module compiled
> with given switches.
>
>>   So the real problem is how to effectively synhronize the used
>> compiler switches (the set of enabled/disabled features) with the
>> runtime code of HVM - to eliminate the need to use duplicated
>> //FLAGS: at application startup and to allow linking of modules
>> compiled with different set of switches.
>
> Yes.
>
>>   See above. I would like to have both and lets decide the programmer
>> which one he will use in the compiled module (or function if we
>> implement switches on function level). I agree that using numbers is
>> more natural to Clipper because Clipper doesn't have the 'character'
>> type (the string of one byte or one character is not a character type
>> it is still a string) however in some usage the numbers will fit
>> better than characters and in other the character will be more
>> useable.
>
> It's fine for me. I also think that compile time switches which allow
> to control also RT behavior is the best choice because programmer does
> not have to worry about linking together libraries compiled with
> different switches.
>
>>   Please reread the ending of my previous message where I was writing
>> about synhronization method using for example symbols table. Sooner
>> or leter we will need some method to pass options to runtime module
>> to allow/disallow some extension (not only string as array :).
>
> We already have sth like that for macro compiler. We can pass 8 binary
> flags and I'm using it. I synced compile time flags values with macro
> compiler flags for easier use and extended passed flags, f.e. I added
> -ks switch to them so macro compiler activated in modules compiled
> with -ks also supports -ks switch. But it works only for macros and
> number of switches we can support in such way is limited so we will
> have to think about sth else. Allocating new bits in symbol scope
> to control some PCODEs behavior is also already used in HVM method.
> I use HB_FS_DYNCODE to detect dynamically loaded modules and enable
> alternative behavior for PCODEs like HB_P_PUSHSTR* or HB_P_PUSHBLOCK*
> which is save for module unloading. Anyhow here we also have some
> limitations, f.e. macro compiled code does not use symbol table.
> As another alternative we have introducing new PCODE, f.e. HB_P_FLAGS
> or adding structure for which will be used as PCODE function envelope.
> Sth like we have for .hrb functions: HB_PCODEFUNC. We can simply add
> flag member to this function. Such envelope will be usefull to resolve
> also some other problems. It will be even possible to generate PCODE
> functions to .c files without any real C functions. C functions can
> be added only to satisfy dependences in linkers. They can execute
> PCODE functions by calling hb_vmExecute( pFuncEnvelope ) but does
> not have to. It also allows to easy extract function body so it's
> possible to implement sth like exchanging compiled functions between
> programs without .hrb files.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Fri Oct  5 05:47:45 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Oct  5 05:48:04 2007
Subject: R: [Harbour] is possible a JOIN?
In-Reply-To: <F8E0A055-473E-4944-ABDA-DD6ED5EB4DA6@syenar.hu>
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl>,
	<d6fbdc2aa8fdbe68ed78bce1db65ac9d.qmail@home.pl>,
	<D814B311-9184-44C6-B8FD-972C197293B5@syenar.hu><47051D18.1384.112D52D@rglab.przesiew.imid.med.pl>
	<F8E0A055-473E-4944-ABDA-DD6ED5EB4DA6@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809AA05@SRV02.deltain.net>

Sorry if i go out of argument
What hare technical reason for having two different compiler?
What are core difference?
Is not possible implement either approach in one product?
Why not merge the project?
Why not give advantage of xharbour's documentation, buglist, userbase?


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Szak?ts Viktor
Inviato: venerd? 5 ottobre 2007 9.12
A: Harbour Project Main Developer List.
Oggetto: Re: [Harbour] The latest code changes

Hi Ryszard,

>   If we disagree about implementation detail because we want to use
> either numbers or character (although in Clipper there is no such
> thing as 'character' type) as a result of indexed access then we
> should implement both and allow the programmer to choose the one he
> needs. Please notice that in some usage numbers will fit better and
> characters will fit better in others. So lets allow the programmer to
> use both. For example, in one module he may use numbers and in other
> he can use characters - both modules should be allowed to be linked
> into a single executable. And in other module he can even use
> overloading of [] operator.

Sorry, I disagree. Instead of adding more complexity for the
core Harbour developers, the Harbour user and the final users,
I'd rather even make everything more simple than they are now.
The responsibility is in our hands to make these decisions IMO
and not adding everything and let other decide instead of us.

See in C#, Java, Javascript, Ruby, Python (or even C/C++):
Do you see switches changing compiler and runtime behaviour
this way?

And again: Do we really need this feature at all? If yes, why?
How about cross compatibility? How about ASC(SUBSTR()) pcode
optimization?

>   So I will repeat my previous idea.
> First, we should increase the granulity (modularization) of
> extensions that can be included in code by the use of compiler
> switches.
> Second, we should introduse a method of synhronization between the
> compiler and the runtime modules. This is required because most
> extensions are located  in the code of VM (or will be located - it is
> not only 'string as array')

I disagree. A language should be consistent _without_ any compiler
and runtime switches which dramatically modify it's workings.
It's _one_ language after all.

>   Instead of
> REQUEST XHB_LIB
> in the code we can add eg. -kb switch that will automatically

I don't agree. Why should we invent a special way to include
an external lib, when we have an ancient and perfectly working
method to do this already? (plus operator overloading)

BTW, the point is to make _all_ xhb features _external_.

>   Please notice that I have nothing against xhb compatibility. The
> xhb bias means for me that the quite usable extension of harbour was
> moved to xhb just to please the xhb users instead of the harbour
> users.

We neither, despite, you suggest to add them via special compiler
switches, which needs all of them implemented inside core Harbour,
while we say that they should be added as an external lib (supported
by the contrib lib developers) and used as a usual 3rd party lib.

Brgds,
Viktor



_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Fri Oct  5 07:11:26 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  5 07:11:33 2007
Subject: [Harbour] dbCreate serious bug
In-Reply-To: <47058D97.9070501@shaw.ca>
References: <47058D97.9070501@shaw.ca>
Message-ID: <20071005111126.GA3011@localhost.localdomain>

On Thu, 04 Oct 2007 21:04:23 EDT, Luis Krause Mantilla wrote:
> > Hello:
> > I hate to be the bearer of bad news, but dbCreate() used to raise a runtime
> > error (DBCMD/1014) whenever an empty structure was passed to this
> > function.  Now it just creates a dbf (regardless the RDD) with now fields!
> 
> Luis it's intentional CL5.3 compatible behavior.
> 
>    dbcreate("bad.dbf", {} )  // should raise RTE: DBCMD/1014 Argument Error
> 
> No, it shouldn't. It's documented in CL53 method of creating DBV files.
> Read in CL53 documentation about DBFBLOB RDD.
> We have been supporting DBV files for 1 and half year:
> 
> 2006-04-15 20:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * xharbour/include/dbinfo.ch
>   * xharbour/include/hbdbferr.h
>   * xharbour/include/hbrdddbf.h
>   * xharbour/include/hbrddfpt.h
>   * xharbour/source/rdd/dbf1.c
>   * xharbour/source/rdd/workarea.c
>   * xharbour/source/rdd/dbffpt/dbffpt1.c
>     + added all CL5.3 BLOB*() functions support
>     + added new RDD DBFBLOB compatible with CL5.3 DBFBLOB
>       It operates on memo files only (.dbv) without tables (.dbf)
>       To create .DBV file use:
>          dbCreate( cFile, {}, "DBFBLOB" )
> 
>   * harbour/source/rdd/dbcmd.c
>     * do not report error when empty structure table is passed to DBCREATE()
>       CL5.3 allow to create even DBF files without any fields and because
>       I can imagine some valid code which use it as a feature then I also
>       allow it in DBF RDD.
>       Authors of RDDs which do not allow to create tables without fields
>       should add to their low level RDD code necessary RT error.
> 
> On Thu, 04 Oct 2007 21:21:15 EDT, Luis Krause Mantilla wrote:
> After reading Przemek's comments in dbcmd.c, I guess it's not a bug, but
> a feature.
> Is there a way to raise a RTE without having to build with HB_C52_STRICT?

To raise an RTE were? In DBF not because it's necessary for normal
functionality. If you want to have it in ADS* RDDs and you are sure
that ADS cannot create tables without fields so you will not reduce
functionality then please add it to ADS. Just simply make what I
wrote in the above ChangeLog: add it to low level RDD code.
The same is for other 3-rd party RDDs.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct  5 08:00:38 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  5 08:01:35 2007
Subject: [Harbour] 2007-10-05 14:00 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710051200.l95C0c7X003780@31-mo5-4.acn.waw.pl>

2007-10-05 14:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/dynsym.c
    * added some additional comments. I still do not know MSVC behavior
      can someone check the results from tests/multifnc in MS[V]C build?

best regards
Przemek
From teo at windtelsoft.com  Fri Oct  5 09:41:55 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Fri Oct  5 09:42:11 2007
Subject: [Harbour] Harbour roadmap ?
Message-ID: <200710050841.55838.teo@windtelsoft.com>

Hello,

Is there such thing as a roadmap doc ?, or there is a implicit "be a Clipper 
5.xx compatible compiler" unique milestone.

If there is not a roadmap, maybe we need to define one.

As anyway, the statement "be a Clipper 5.xx compatible compiler" is a main 
goal, then the folowing simple questions arise:

 * What is the status of this compatibility, and how this is measured ?

 * If the current compatibility level of Harbour compiler is a almost complete 
one, then what is next ?

I have seen lately too much references to the word "compatibility" in the 
posts, but compatibility against what seems a little ambiguous to me now. 
Harbour has, and hopefully will have, great features that most certainly 
enrich the language beyond the Clipper limits. So, why to keep some of this 
features 'outside' of the standard Harbour language and worst, calling this 
as a xHB's compatibility lib. 

I believe, that this features along with the planned ones (i.e. I have seen 
lately references to 'strong typing' ) are the natural and logic consequence 
of the a intrinsic evolution of the language.

If Harbour is currently a *high* level Clipper compatible language why not to 
leave this as version 1 ?


best regards

Teo
From rglab at przesiew.imid.med.pl  Fri Oct  5 10:42:21 2007
From: rglab at przesiew.imid.med.pl (Ryszard Glab)
Date: Fri Oct  5 10:30:21 2007
Subject: [Harbour] The latest code changes
In-Reply-To: <20071005012648.GA1708@localhost.localdomain>
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl>,
	<d6fbdc2aa8fdbe68ed78bce1db65ac9d.qmail@home.pl>,
	<20071005012648.GA1708@localhost.localdomain>
Message-ID: <4706696D.8103.FCCD1A@rglab.przesiew.imid.med.pl>

On 5 Oct 2007 at 3:26, Przemyslaw Czerpak wrote:

> This code was not moved to XHB library. I added to XHB directory
> only the code I added few months ago to HVM covered by HB_COMPAT_XHB
> switch so not enabled in default builds. This version of indexing
> strings by [] is not compatible with the Harbour native one covered
> by 's' flag. You may call it nearly xHarbour compatible because
> I intentionally not replicated all xHarbour side effects.

  OK, the code was not moved - it is the whole feature that was moved 
from harbour (with bug fixing, etc) and this is why I complain.

> Not only. Some of them will interact with compiler. F.e. strong typing
> module has to play well with them. Compile time optimization also
> should know the result of "ABC"[2] to calculate it properly. Some
> more advanced optimizations using strong typing information will
> have to respect these switches too and finally we should keep macro
> compiler synced with compiler if it's executed from module compiled
> with given switches.

  Sure, the same will be probably with unicode support.

> It's fine for me. I also think that compile time switches which allow
> to control also RT behavior is the best choice because programmer does
> not have to worry about linking together libraries compiled with
> different switches.
[...]
> which is save for module unloading. Anyhow here we also have some
> limitations, f.e. macro compiled code does not use symbol table.

  But macro compiler is called from some PRG function, then it can 
inherit switches from this function.

> As another alternative we have introducing new PCODE, f.e. HB_P_FLAGS
> or adding structure for which will be used as PCODE function envelope.
> Sth like we have for .hrb functions: HB_PCODEFUNC. We can simply add
> flag member to this function. Such envelope will be usefull to resolve
> also some other problems. It will be even possible to generate PCODE
> functions to .c files without any real C functions. C functions can
> be added only to satisfy dependences in linkers. They can execute
> PCODE functions by calling hb_vmExecute( pFuncEnvelope ) but does
> not have to. It also allows to easy extract function body so it's
> possible to implement sth like exchanging compiled functions between
> programs without .hrb files.

  Yes, the envelope (structure) seems the best and the most flexible.

Best Regards,
Ryszard

From harbour.01 at syenar.hu  Fri Oct  5 11:04:19 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct  5 11:04:38 2007
Subject: [Harbour] Harbour roadmap ?
In-Reply-To: <200710050841.55838.teo@windtelsoft.com>
References: <200710050841.55838.teo@windtelsoft.com>
Message-ID: <3D223D87-7395-4DA6-ABD9-C64C0F7FB75C@syenar.hu>

Hi,

The goal is to have a C5.2e compatible compiler.

I have these in mind when thinking about future directions:
- Full "unicode" support (including unicode .prg files)
- Proper and native multilanguage support (i18n)
- Multithreading
- Strong typing
- Native classes (without PP) (?)
- Creating a documented function call equivalent for
   all command-only feature (like PACK).
- I'd feel it important to focus on Harbour being used
   as a scripting language. Do we miss anything in this area?
   (compiler switches definitely don't match well with this one)

I'm personally against any l'art pour l'art feature frenzy
especially when it comes to the base language (statements,
operators). Clipper is a very strong language, we have
plenty of ways (too much even IMO) to express logic with it,
and I'm not sure we would need to concentrate on adding
new and new ones. (Otherwise at the end, everyone will
have his/her own pet feature right there in the core, right,
but source code will look like Frankenstein, portability
suffers, new users will not get it, code will depend on
several compile time switches (;so code by itself will not
be enough to see what the code actually does), and we will
end up with 10 #ifdefs in every source code, just like in C,
to make something compile under 2-3 flavours of Clipper
compatible compilers. All these are bad for a language.)

Sometimes, less is more.

So rather, if we want to modernize the language and make it
stronger, we might want to make the language slimmer, simpler,
with less variations, preferring the higher quality features
of it, and fading the really obsolete (legacy) part of it.
All this, in an optional and compatible fashion, of course.

In parallel we can build libs to implement different APIs
for common tasks needed for today's business apps, like:
- Proper, portable page orientated printing.
- SQL support.
- proper XML support.
- Polished communication interface for POP3, SMTP, FTP, HTTP
   GET/PUT, generic TCPIP, etc, mail message parsing and creation.
- SSH/SSL support where it applies.
- Wrappers for nowadays essential extensions, like CURL, LDAP,
   SQLITE, etc.
- Some random features like PDF, image formats, ZIP, BZIP, TAR
- GUI (controversial, maybe even impossible, but definitely
   important)

All these can be developed as fully external libs (some
of the already exist), but eventually it might be good
to include them in core. If we want to do this, we need
to have a clear definition on the feature set and a high
level of standard when defining the API.

Brgds,
Viktor


On 2007.10.05., at 15:41, Teo Fonrouge wrote:

> Hello,
>
> Is there such thing as a roadmap doc ?, or there is a implicit "be  
> a Clipper
> 5.xx compatible compiler" unique milestone.
>
> If there is not a roadmap, maybe we need to define one.
>
> As anyway, the statement "be a Clipper 5.xx compatible compiler" is  
> a main
> goal, then the folowing simple questions arise:
>
>  * What is the status of this compatibility, and how this is  
> measured ?
>
>  * If the current compatibility level of Harbour compiler is a  
> almost complete
> one, then what is next ?
>
> I have seen lately too much references to the word "compatibility"  
> in the
> posts, but compatibility against what seems a little ambiguous to  
> me now.
> Harbour has, and hopefully will have, great features that most  
> certainly
> enrich the language beyond the Clipper limits. So, why to keep some  
> of this
> features 'outside' of the standard Harbour language and worst,  
> calling this
> as a xHB's compatibility lib.
>
> I believe, that this features along with the planned ones (i.e. I  
> have seen
> lately references to 'strong typing' ) are the natural and logic  
> consequence
> of the a intrinsic evolution of the language.
>
> If Harbour is currently a *high* level Clipper compatible language  
> why not to
> leave this as version 1 ?
>
>
> best regards
>
> Teo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From rglab at przesiew.imid.med.pl  Fri Oct  5 11:23:18 2007
From: rglab at przesiew.imid.med.pl (Ryszard Glab)
Date: Fri Oct  5 11:11:09 2007
Subject: [Harbour] The latest code changes
In-Reply-To: <AA62FA4E-FCD6-4CFC-B62A-356C3919DCAF@syenar.hu>
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl>,
	<20071005012648.GA1708@localhost.localdomain>,
	<AA62FA4E-FCD6-4CFC-B62A-356C3919DCAF@syenar.hu>
Message-ID: <47067306.7156.12248BE@rglab.przesiew.imid.med.pl>

On 5 Oct 2007 at 9:29, Szak?ts Viktor wrote:

> Why do we need this feature at all in Harbour, what are we trying
> to solve? How about cross compatibility? How about ASC(SUBSTR())
> pcode optimization to achieve the same speed?

  The optimization of
SUBSTR( xxx, pos, 1) and
STUFF( xxx, pos, 1, yyy )
is a separate thing that should be done regardless of the 'string as 
array' implementation. Such optimization will save time for 
programmers that are using these calls in their code and probably 
would like to replace them with xxx[pos] syntax - mostly for faster 
execution of code.

  Why we need this feature (string as array)?
I can only say for myself. I know the C language then if I will need 
the real fast operation on strings than I can write some C code. 
However what I will loose? Well I need the C compiler. I need a 
different C compiler for Linux and Windows and DOS - will they be 
compatible?. I have tons of assembler code that is waiting to convert 
them to be compatible with harbour - the code that was writtes mostly 
for speed reasons. Will I have rewrite C code if we will support .NET 
or other .FUTURE? I loose easy debugging possibilities in a single 
debugger.

Also, but it is a personal feelings of every programmer, the code 
checksum += ASC( SUBSTR( xxx, pos, 1 ) )
is less readable then
checksum += xxx[ pos ]

What will return ASC( SUBSTR() ) if we will support UNICODE - will it 
be still ASCII code or unicode? xxx[pos] should always return a 
single byte of given string (buffer) - well at least in 'string as 
array of bytes' mode.

Best Regards, 
Ryszard
From harbour.01 at syenar.hu  Fri Oct  5 12:30:32 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct  5 12:30:41 2007
Subject: [Harbour] The latest code changes
In-Reply-To: <47067306.7156.12248BE@rglab.przesiew.imid.med.pl>
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl>,
	<20071005012648.GA1708@localhost.localdomain>,
	<AA62FA4E-FCD6-4CFC-B62A-356C3919DCAF@syenar.hu>
	<47067306.7156.12248BE@rglab.przesiew.imid.med.pl>
Message-ID: <7A977932-36E8-4A0F-8216-C517919E1841@syenar.hu>

Hi Ryszard,

On 2007.10.05., at 17:23, Ryszard Glab wrote:

> On 5 Oct 2007 at 9:29, Szak?ts Viktor wrote:
>
>> Why do we need this feature at all in Harbour, what are we trying
>> to solve? How about cross compatibility? How about ASC(SUBSTR())
>> pcode optimization to achieve the same speed?
>
>   The optimization of
> SUBSTR( xxx, pos, 1) and
> STUFF( xxx, pos, 1, yyy )
> is a separate thing that should be done regardless of the 'string as
> array' implementation. Such optimization will save time for
> programmers that are using these calls in their code and probably
> would like to replace them with xxx[pos] syntax - mostly for faster
> execution of code.

Why would they do this? (especially if it gives no speed benefit
over the tried and tested, cross-portable "old" SUBSTR() method)

>   Why we need this feature (string as array)?
> I can only say for myself. I know the C language then if I will need
> the real fast operation on strings than I can write some C code.
> However what I will loose? Well I need the C compiler. I need a
> different C compiler for Linux and Windows and DOS - will they be
> compatible?. I have tons of assembler code that is waiting to convert
> them to be compatible with harbour - the code that was writtes mostly
> for speed reasons. Will I have rewrite C code if we will support .NET
> or other .FUTURE? I loose easy debugging possibilities in a single
> debugger.

Well, for Harbour you need a C compiler anyway (at least if you
want your app to be a standalone binary.)

If SubStr() is optimized, you would get the _same_ performance as
with strings as arrays; _With portable Clipper code_.

I'm also not sure if it's a generic need for most Clipper/Harbour
developers to move legacy ASM/C code to Clipper. But even if it is,
there you have SubStr(), optimized.

Moreover, if you measure the speed of your _complete_ ported string
processing function, is this one operation the biggest bottleneck
in it? I'm don't think so.

To avoid any bottlenecks and to have quick (string processing) loops,
Harbour would need to generate native C loops internally, like in
Flagship or Force. A good step into this direction is again _strong
typing_.

> Also, but it is a personal feelings of every programmer, the code
> checksum += ASC( SUBSTR( xxx, pos, 1 ) )
> is less readable then
> checksum += xxx[ pos ]

"Readability" isn't higher priority than consistent and/or expected
behaviour, or even cross compatibility. This is readability for a
huge price to pay.

IMO, ASC( SUBSTR() ) is perfectly readable for a programmer with
some Clipper experience. It also looks the same in several other high
level languages.

Now, if we have 3 compile time switches modifying this behaviour,
can you tell me - just be reading this simple code, let's say
in a written documentation or a book - what will be the result:
(in Harbour only, for simplicity)

--
? MyPetFunction( { .T., .F., .T., .F. }, 2 )
// or when accidentally called with a bad type
? MyPetFunction( "123", 2 )
? MyPetFunction( "123", 4 )

FUNCTION MyPetFunction( var )
    RETURN var[ 3 ]
--

No, you can't. Why?
Because you don't know the compiler switches.

Depending on them, this could result in either:
- .F. and RTE
- .F. and number and zero?
- .F. and number and RTE
- .F. and 1 char long string and ""
- .F. and 1 char long string and Chr(0)
- .F. and 1 char long string and RTE

This becomes even more complex if you add CA-Clipper and xhb into
the compiler mix. What will happen? No one really knows without
precise knowledge of the switches and compiler flavour.

And we didn't even add a 3rd party lib into the mix.

This is when base language behaviour varies in such a wide
spectrum that no one really understands what is going on,
and _code doesn't describe actual operations_. This seriously
hurts "readability".

Should we specify in all example code, that "compile with /whatever
switch to get this behaviour". Hardly elegant.

> What will return ASC( SUBSTR() ) if we will support UNICODE - will it
> be still ASCII code or unicode? xxx[pos] should always return a
> single byte of given string (buffer) - well at least in 'string as
> array of bytes' mode.

Unicode support will depend on the implementation we choose here,
but IMO it should give the same result as SubStr( s, n, 1 ). We
have no closer representation of a character in Clipper. You will
nowhere find any reference to a char as a number in the Clipper
language. This is not a coincidence, since several methods exist
to assign numbers to characters, ASCII (ASC()) is just one of them.

Brgds,
Viktor

From antonioharbour at gmail.com  Fri Oct  5 13:47:08 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Fri Oct  5 13:47:48 2007
Subject: [Harbour] Rlock question (Przemek)
In-Reply-To: <7A977932-36E8-4A0F-8216-C517919E1841@syenar.hu>
Message-ID: <470678be.01b6420a.41ad.5ed0@mx.google.com>

Przemek,

If a record is locked by RLOCK(), is there any way to know who (which PC or
user) locked it ? 

Or is there any way to unlock a locked record by someone else ? Thanks,

Regards,

Antonio

From druzus at acn.waw.pl  Fri Oct  5 14:27:28 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  5 14:27:34 2007
Subject: [Harbour] problem with RASCAN
In-Reply-To: <47051CE8.6010408@marchuet.net>
References: <47051CE8.6010408@marchuet.net>
Message-ID: <20071005182728.GA6247@localhost.localdomain>

On Thu, 04 Oct 2007, Miguel Angel Marchuet wrote:
> {
>     [1] => { Array of 3 Items }
>       Type='A' ->
>       {
>        [1] => "700000001",
>        [2] =>      500.00,
>        [3] => .F.
>       },
>     [2] => { Array of 3 Items }
>       Type='A' ->
>       {
>        [1] => "437000000",
>        [2] =>      431.03,
>        [3] => .T.
>       }
>    }
> 
> HB_RASCAN(  a, {|e| !e[3] } )
> returns 0

And what is the problem you are talking about?

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct  5 14:42:39 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  5 14:42:45 2007
Subject: [Harbour] The latest code changes
In-Reply-To: <4706696D.8103.FCCD1A@rglab.przesiew.imid.med.pl>
References: <20071005012648.GA1708@localhost.localdomain>
	<4706696D.8103.FCCD1A@rglab.przesiew.imid.med.pl>
Message-ID: <20071005184239.GB6247@localhost.localdomain>

On Fri, 05 Oct 2007, Ryszard Glab wrote:
>   But macro compiler is called from some PRG function, then it can 
> inherit switches from this function.

Not always. A clasic example is:

    bCode:=&("{||"+cCode+"}")
    somefunc(bCode)

bCode is codeblock without symbol table and it should be executed with
the same conditions as in the code where it was compiled. We should
remember about it. In the past we have a problem with memvars base
offset because we were using pSymbol == NULL to detect macros and we
were wrongly recognizing macro compiled codeblocks as macros.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct  5 15:05:30 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  5 15:05:37 2007
Subject: [Harbour] Rlock question (Przemek)
In-Reply-To: <470678be.01b6420a.41ad.5ed0@mx.google.com>
References: <7A977932-36E8-4A0F-8216-C517919E1841@syenar.hu>
	<470678be.01b6420a.41ad.5ed0@mx.google.com>
Message-ID: <20071005190530.GC6247@localhost.localdomain>

On Fri, 05 Oct 2007, Antonio Linares wrote:
> Przemek,
> If a record is locked by RLOCK(), is there any way to know who (which PC or
> user) locked it ? 

It depends on system which holds the locks. F.e. in Linux you can see
all locks using 'lslk' command or by parsing /proc/locks where the 5-th
column is PID and 6-th fileid (device and inode).

> Or is there any way to unlock a locked record by someone else ? Thanks,

Maybe some systems allow such operation for super user but even if they
exist then it's very seldom functionality. It's extremely dangerous
operation and may cause data corruption.

best regards,
Przemek
From antonioharbour at gmail.com  Fri Oct  5 15:13:58 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Fri Oct  5 15:14:54 2007
Subject: [Harbour] Rlock question (Przemek)
In-Reply-To: <20071005190530.GC6247@localhost.localdomain>
Message-ID: <47068d28.01ba420a.4c9d.ffffb40c@mx.google.com>

Przemek,

Thanks for your answer. I have forwarded it to a Harbour + FWH user who did
it,

Regards,

Antonio

From mpaliwoda at interia.pl  Fri Oct  5 16:24:17 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Oct  5 12:24:35 2007
Subject: [Harbour] The latest code changes
In-Reply-To: <7A977932-36E8-4A0F-8216-C517919E1841@syenar.hu>
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl>,
	<20071005012648.GA1708@localhost.localdomain>,
	<AA62FA4E-FCD6-4CFC-B62A-356C3919DCAF@syenar.hu>	<47067306.7156.12248BE@rglab.przesiew.imid.med.pl>
	<7A977932-36E8-4A0F-8216-C517919E1841@syenar.hu>
Message-ID: <47069D71.8090105@interia.pl>

Hi Viktor (and all others),

I have already expressed my opinion few days ago, but I want
to support your opinion here and now once again :). I fully
agree with your point of view, even if years ago I opted towards
having more and more "extensions". Unfortunately, such an approach
quickly leads to an "incoherent" language IMO.

Others : please do not take my post as "directed against anyone".
I simply have a feeling that some features are not fit very well
into Clipper/Harbour language - "strings as array" is one of them.

Viktor :

      "Sorry about that, but it's now that I feel like this was
       (almost) xhb :("

Things are not so bad - really ;-)

-- 

Marek

>>> Why do we need this feature at all in Harbour, what are we trying
>>> to solve? How about cross compatibility? How about ASC(SUBSTR())
>>> pcode optimization to achieve the same speed?
>>
>>   The optimization of
>> SUBSTR( xxx, pos, 1) and
>> STUFF( xxx, pos, 1, yyy )
>> is a separate thing that should be done regardless of the 'string as
>> array' implementation. Such optimization will save time for
>> programmers that are using these calls in their code and probably
>> would like to replace them with xxx[pos] syntax - mostly for faster
>> execution of code.
> 
> Why would they do this? (especially if it gives no speed benefit
> over the tried and tested, cross-portable "old" SUBSTR() method)
> 
>>   Why we need this feature (string as array)?
>> I can only say for myself. I know the C language then if I will need
>> the real fast operation on strings than I can write some C code.
>> However what I will loose? Well I need the C compiler. I need a
>> different C compiler for Linux and Windows and DOS - will they be
>> compatible?. I have tons of assembler code that is waiting to convert
>> them to be compatible with harbour - the code that was writtes mostly
>> for speed reasons. Will I have rewrite C code if we will support .NET
>> or other .FUTURE? I loose easy debugging possibilities in a single
>> debugger.
> 
> Well, for Harbour you need a C compiler anyway (at least if you
> want your app to be a standalone binary.)
> 
> If SubStr() is optimized, you would get the _same_ performance as
> with strings as arrays; _With portable Clipper code_.
> 
> I'm also not sure if it's a generic need for most Clipper/Harbour
> developers to move legacy ASM/C code to Clipper. But even if it is,
> there you have SubStr(), optimized.
> 
> Moreover, if you measure the speed of your _complete_ ported string
> processing function, is this one operation the biggest bottleneck
> in it? I'm don't think so.
> 
> To avoid any bottlenecks and to have quick (string processing) loops,
> Harbour would need to generate native C loops internally, like in
> Flagship or Force. A good step into this direction is again _strong
> typing_.
> 
>> Also, but it is a personal feelings of every programmer, the code
>> checksum += ASC( SUBSTR( xxx, pos, 1 ) )
>> is less readable then
>> checksum += xxx[ pos ]
> 
> "Readability" isn't higher priority than consistent and/or expected
> behaviour, or even cross compatibility. This is readability for a
> huge price to pay.
> 
> IMO, ASC( SUBSTR() ) is perfectly readable for a programmer with
> some Clipper experience. It also looks the same in several other high
> level languages.
> 
> Now, if we have 3 compile time switches modifying this behaviour,
> can you tell me - just be reading this simple code, let's say
> in a written documentation or a book - what will be the result:
> (in Harbour only, for simplicity)
> 
> -- 
> ? MyPetFunction( { .T., .F., .T., .F. }, 2 )
> // or when accidentally called with a bad type
> ? MyPetFunction( "123", 2 )
> ? MyPetFunction( "123", 4 )
> 
> FUNCTION MyPetFunction( var )
>    RETURN var[ 3 ]
> -- 
> 
> No, you can't. Why?
> Because you don't know the compiler switches.
> 
> Depending on them, this could result in either:
> - .F. and RTE
> - .F. and number and zero?
> - .F. and number and RTE
> - .F. and 1 char long string and ""
> - .F. and 1 char long string and Chr(0)
> - .F. and 1 char long string and RTE
> 
> This becomes even more complex if you add CA-Clipper and xhb into
> the compiler mix. What will happen? No one really knows without
> precise knowledge of the switches and compiler flavour.
> 
> And we didn't even add a 3rd party lib into the mix.
> 
> This is when base language behaviour varies in such a wide
> spectrum that no one really understands what is going on,
> and _code doesn't describe actual operations_. This seriously
> hurts "readability".
> 
> Should we specify in all example code, that "compile with /whatever
> switch to get this behaviour". Hardly elegant.
> 
>> What will return ASC( SUBSTR() ) if we will support UNICODE - will it
>> be still ASCII code or unicode? xxx[pos] should always return a
>> single byte of given string (buffer) - well at least in 'string as
>> array of bytes' mode.
> 
> Unicode support will depend on the implementation we choose here,
> but IMO it should give the same result as SubStr( s, n, 1 ). We
> have no closer representation of a character in Clipper. You will
> nowhere find any reference to a char as a number in the Clipper
> language. This is not a coincidence, since several methods exist
> to assign numbers to characters, ASCII (ASC()) is just one of them.
> 
> Brgds,
> Viktor
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 


-- 

     Marek Paliwoda
mpaliwoda at interia pl


----------------------------------------------------------------------
Tutaj sa Twoi nowi znajomi!
Sprawdz >>> http://link.interia.pl/f1bb7

From bhays at abacuslaw.com  Fri Oct  5 16:51:44 2007
From: bhays at abacuslaw.com (bhays)
Date: Fri Oct  5 12:51:52 2007
Subject: [Harbour] Rlock question (Przemek)
In-Reply-To: <20071005190530.GC6247@localhost.localdomain>
Message-ID: <00d901c80791$8a1651b0$0301a8c0@bh>


FYI, the ADS remote server does give this functionality (but not local
server).

--
  Brian Hays


-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Friday, October 05, 2007 12:06 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Rlock question (Przemek)

On Fri, 05 Oct 2007, Antonio Linares wrote:
> Przemek,
> If a record is locked by RLOCK(), is there any way to know who (which
> PC or
> user) locked it ?

It depends on system which holds the locks. F.e. in Linux you can see all
locks using 'lslk' command or by parsing /proc/locks where the 5-th column
is PID and 6-th fileid (device and inode).

> Or is there any way to unlock a locked record by someone else ?
> Thanks,

Maybe some systems allow such operation for super user but even if they
exist then it's very seldom functionality. It's extremely dangerous
operation and may cause data corruption.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


From druzus at acn.waw.pl  Fri Oct  5 17:44:48 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  5 13:44:56 2007
Subject: [Harbour] 2007-10-05 23:44 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710052144.l95LimBV019438@31-mo5-4.acn.waw.pl>

2007-10-05 23:44 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbsetup.h
    * minor cleanup comment
  * harbour/source/vm/hvm.c
    * save/restore return value in extended references

best regards
Przemek
From druzus at acn.waw.pl  Fri Oct  5 18:21:37 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct  5 14:21:42 2007
Subject: [Harbour] HASH AUTOADD
In-Reply-To: <4704D858.4080804@dbtopas.lt>
References: <20071004103505.GA12846@localhost.localdomain>
	<4704D858.4080804@dbtopas.lt>
Message-ID: <20071005222137.GA18797@localhost.localdomain>

On Thu, 04 Oct 2007, Mindaugas Kavaliauskas wrote:
> so, by default this new logical AUTOADD setting will be TRUE (like 
> written in the top of your mail)?

Yes,

> It's OK for me.
> Just one question. If AUTOADD is FALSE and default value is set, it will 
> work like current HB_HASH_AUTOADD_ACCESS, or AUTOADD flag has higher 
> priority and it will work like HB_HASH_AUTOADD_NEVER?

We can chose any version but I think that AUTOADD only for ACCESS
is not widely used so probably to keep interface simpler we can
remove such mode and give the highest priority to AUTOADD flag.

> Default value setting function should be changed also, perhaps into two: 
> HB_HSetDefault(), HB_HGetDefault(). The problem is, if I want to enable 
> AUTOADD on ACCESS by setting default value, and later I want to switch 
> AUTOADD on ACCESS off. I should clear default value. Current 
> HB_HDefault(hHash) is not OK because it works as GetDefault.
> HB_HDefault(hHash, NIL) is also not good, because default value could be 
> NIL. An alternative to this could be current HB_HDefault() and new 
> HB_HClearDefault(hHash), but I see HB_HGetDefault()/HB_HSetDefault() 
> more elegant. HB_HSetDefault() can return hHash if someone will want to use:
>   HB_HAutoAdd(HB_HSetDefault(hHash), .F.)

I plan to add HB_HGetDefault()/HB_HSetDefault() and of course
HB_HSetDefault() will return hHash value just like HB_HSetAutoAdd().
HB_HDefault() and HB_HAutoAdd() should be probably removed as redundant.

Best regards,
Przemek
From philb at philb.us  Fri Oct  5 22:32:56 2007
From: philb at philb.us (Phil Barnett)
Date: Fri Oct  5 18:35:50 2007
Subject: [Harbour] Source Code snapshot size
In-Reply-To: <BAY137-F31CF9E5E5CD3E1230EFFFB85AF0@phx.gbl>
References: <BAY137-F31CF9E5E5CD3E1230EFFFB85AF0@phx.gbl>
Message-ID: <200710052232.56964.philb@philb.us>

On Wednesday 03 October 2007, Alejandro de Garate wrote:
> Phil
> Currently I'm not using SVN and what I can tell you only is:
>
> the Latest source snapshot from Harbour's page:
> http://www.harbour-project.org/harbour-svn.zip
>
> Have inside:
> 11333 files
> size 48.768 Kb
>
> ---
> and the last beta source code from Sourceforge's page:
> http://downloads.sourceforge.net/harbour-project/harbour-0.99.3.src.zip
>
> Have inside:
> 1985 files
> size 22.931 Kb
>
> So... it's a huge difference, it seems to me mostly are files of SVN system
>
> ---
> One more simple example:
> the VM folder of SVN package (harbour-svn.zip) have:
> 205 files
> 1.919 Kb
>
> the source file harbour-099.3.src.zip have:
> 39 files
> 957 Kb
>
> I don't know how you would left out the unwanted files of SVN system
> maybe other developers with more experience with subversion can give us a
> solution.

Perhaps the answer is to delete the svn directory once a week. That will 
eliminate bloat and keep the size down.

-- 
Phil Barnett
AI4OF
SKCC #600
From philb at philb.us  Fri Oct  5 23:02:14 2007
From: philb at philb.us (Phil Barnett)
Date: Fri Oct  5 19:05:08 2007
Subject: [Harbour] Harbour roadmap ?
In-Reply-To: <3D223D87-7395-4DA6-ABD9-C64C0F7FB75C@syenar.hu>
References: <200710050841.55838.teo@windtelsoft.com>
	<3D223D87-7395-4DA6-ABD9-C64C0F7FB75C@syenar.hu>
Message-ID: <200710052302.14428.philb@philb.us>

On Friday 05 October 2007, Szak?ts Viktor wrote:
> The goal is to have a C5.2e compatible compiler.
>
> I have these in mind when thinking about future directions:
> - Full "unicode" support (including unicode .prg files)
> - Proper and native multilanguage support (i18n)
> - Multithreading
> - Strong typing
> - Native classes (without PP) (?)
> - Creating a documented function call equivalent for
> ? ?all command-only feature (like PACK).
> - I'd feel it important to focus on Harbour being used
> ? ?as a scripting language. Do we miss anything in this area?
> ? ?(compiler switches definitely don't match well with this one)
>
> I'm personally against any l'art pour l'art feature frenzy
> especially when it comes to the base language (statements,
> operators). Clipper is a very strong language, we have
> plenty of ways (too much even IMO) to express logic with it,
> and I'm not sure we would need to concentrate on adding
> new and new ones. (Otherwise at the end, everyone will
> have his/her own pet feature right there in the core, right,
> but source code will look like Frankenstein, portability
> suffers, new users will not get it, code will depend on
> several compile time switches (;so code by itself will not
> be enough to see what the code actually does), and we will
> end up with 10 #ifdefs in every source code, just like in C,
> to make something compile under 2-3 flavours of Clipper
> compatible compilers. All these are bad for a language.)
>
> Sometimes, less is more.
>
> So rather, if we want to modernize the language and make it
> stronger, we might want to make the language slimmer, simpler,
> with less variations, preferring the higher quality features
> of it, and fading the really obsolete (legacy) part of it.
> All this, in an optional and compatible fashion, of course.
>
> In parallel we can build libs to implement different APIs
> for common tasks needed for today's business apps, like:
> - Proper, portable page orientated printing.
> - SQL support.
> - proper XML support.
> - Polished communication interface for POP3, SMTP, FTP, HTTP
> ? ?GET/PUT, generic TCPIP, etc, mail message parsing and creation.
> - SSH/SSL support where it applies.
> - Wrappers for nowadays essential extensions, like CURL, LDAP,
> ? ?SQLITE, etc.
> - Some random features like PDF, image formats, ZIP, BZIP, TAR
> - GUI (controversial, maybe even impossible, but definitely
> ? ?important)
>
> All these can be developed as fully external libs (some
> of the already exist), but eventually it might be good
> to include them in core. If we want to do this, we need
> to have a clear definition on the feature set and a high
> level of standard when defining the API.

I agree that simpler is better, however there are things that make more sense 
in many newer languages that would work good in Clipper / Harbour but weren't 
thought of yet.

For example, later versions of VB went to a nice construct of making all 
strings look like objects, which opens up things like

x = x.replace("this","that")

and 

if "ABC" = x.toupper then

I'm not suggesting that we move this direction, but it is clear that these 
simple changes and usages were not yet thought of 20 years ago when Clipper 
started life. Nor was object orientation in general.

Yet, we have embraced many of these concepts without harming the base 
language.

If we intend to make big changes to the base language, which it appears has 
been happening during the beta which was supposed to be bug fixing only, we 
need to add the preprocessor coverage to make old code work in the new world. 
Similar to how 5.2 covered new base language changes with std.ch.

I'm not sure how the strings as arrays thing has blown so far out of 
proportion, but perhaps it's time to remove it entirely from the core and 
make it an add on only. It appears to break some old code with no way to 
recover with any preprocessed commands since the code itself can be 
ambiguous.

2007. The year of the beta.

-- 
Phil Barnett
AI4OF
SKCC #600
From druzus at acn.waw.pl  Sat Oct  6 06:45:22 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct  6 02:45:28 2007
Subject: [Harbour] 2007-10-06 12:45 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710061045.l96AjMus024237@31-mo5-4.acn.waw.pl>

2007-10-06 12:45 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbsetup.h
  * harbour/source/rtl/hbffind.c
  * harbour/source/rtl/filesys.c
    * cleanup

  * harbour/source/vm/hvm.c
    % use extended reference for enumerator destructor - it eliminates
      3 hb_itemNew() calls reducing the cost of creating FOR EACH envelope
      about 40%

best regards
Przemek
From druzus at acn.waw.pl  Sat Oct  6 07:06:44 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct  6 03:06:50 2007
Subject: [Harbour] Harbour roadmap ?
In-Reply-To: <200710052302.14428.philb@philb.us>
References: <200710050841.55838.teo@windtelsoft.com>
	<3D223D87-7395-4DA6-ABD9-C64C0F7FB75C@syenar.hu>
	<200710052302.14428.philb@philb.us>
Message-ID: <20071006110644.GA24277@localhost.localdomain>

On Fri, 05 Oct 2007, Phil Barnett wrote:
> I agree that simpler is better, however there are things that make more sense 
> in many newer languages that would work good in Clipper / Harbour but weren't 
> thought of yet.
> For example, later versions of VB went to a nice construct of making all 
> strings look like objects, which opens up things like
> x = x.replace("this","that")
> and 
> if "ABC" = x.toupper then
> I'm not suggesting that we move this direction, but it is clear that these 
> simple changes and usages were not yet thought of 20 years ago when Clipper 
> started life. Nor was object orientation in general.
> Yet, we have embraced many of these concepts without harming the base 
> language.

Now every one can add such functionality himself in few lines, f.e.:

    #include "hbclass.ch"
    proc main()
    local s:="This is testing text for scallar class overloading"
    ? s
    s:=s:toupper
    ? s
    s:=s:replace("IS", "[is]"):replace("FOR","{for}"):replace("CLASS","(class)")
    ? s
    return

    CREATE CLASS hbCharacter
       METHOD replace
       METHOD toupper
    END CLASS

    METHOD replace( cSrc, cDst ) CLASS hbCharacter
    RETURN strtran( self, cSrc, cDst )

    METHOD toupper() CLASS hbCharacter
    RETURN upper( self )


druzus:/tmp/0# hbmk -n -w -es2 -ks tstr.prg && ./tstr
Harbour devel build 1.1-1 Intl.
Copyright 1999-2007, http://www.harbour-project.org/
Compiling 'tstr.prg'...
Lines 717, Functions/Procedures 4
Generating C source output to 'tstr.c'... Done.

This is testing text for scallar class overloading
THIS IS TESTING TEXT FOR SCALLAR CLASS OVERLOADING
TH[is] [is] TESTING TEXT {for} SCALLAR (class) OVERLOADING
druzus:/tmp/0#

> If we intend to make big changes to the base language, which it appears has 
> been happening during the beta which was supposed to be bug fixing only, we 
> need to add the preprocessor coverage to make old code work in the new world. 
> Similar to how 5.2 covered new base language changes with std.ch.

You are right about the BETA stage though. I really think we should
release version 1.0 and then we can think about new features and what
to do with indexed strings (I have some ideas to make more people happy).
If everybody agree then I'd like to move discussion about indexed strings
after BETA release. If we do not add to core code any version as documented
solution now then in the future we will be able to chose what we will want.
Now everyone can create his own implementation of indexed string by simple
overloading of [] operator for character class.

> I'm not sure how the strings as arrays thing has blown so far out of 
> proportion, but perhaps it's time to remove it entirely from the core and 
> make it an add on only. It appears to break some old code with no way to 
> recover with any preprocessed commands since the code itself can be 
> ambiguous.
> 2007. The year of the beta.

Let's release new beta4 for test and then rc1.
Now the most important is finishing CL52/53 .prg classes like TBROWSE.
IMHO it's the last thing we need for 1.0.
Victor do you have any pending modifications?

best regards,
Przemek
From harbour.01 at syenar.hu  Sat Oct  6 07:50:49 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct  6 03:50:57 2007
Subject: [Harbour] String loops with FOR EACH
Message-ID: <4EAE9D7B-9990-49B3-9114-395DEBCF9EE2@syenar.hu>

Hi folks,

I've just realized that in Harbour it's possible to use
FOR EACH on strings:

--
FOR EACH cChar IN cString
     ? cChar
NEXT
--

This seems to be the fastest way to do loops on strings.

In a simple test which goes through a 5 char long string
and rebuilds it in another var, it seems consistently faster
by 35% compared to the simple "FOR 1 TO Len()/SubStr()/NEXT"
loop, and 25% faster than an optimized "FOR 1 TO nLen/SubStr()/NEXT"
loop.

The speed gain gets higher for longer strings:
  5 char long string: 35%, 25%
10 char long string: 45%, 35%
20 char long string: 50%, 40%

Of course lots of other factors will play in real life,
but you get the idea.

Brgds,
Viktor

From druzus at acn.waw.pl  Sat Oct  6 07:56:03 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct  6 03:56:08 2007
Subject: [Harbour] 2007-10-06 13:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710061156.l96Bu3Nn024811@31-mo5-4.acn.waw.pl>

2007-10-06 13:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/hashes.c
    * set AUTOADD for assign operation by default in new arrays
    * removed last HB_COMPAT_XHB

  * harbour/source/vm/hashfunc.c
    * change HB_HAUTOADD( hHash, .T. ) to set AUTOADD for assign only
      when no default value is set

   Above are minimal modifications to make default Harbour behavior
   more similar to other languages f.e. PHP or xHarbour. Other
   modifications will depend on group decision.

best regards
Przemek
From druzus at acn.waw.pl  Sat Oct  6 08:11:08 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct  6 04:11:14 2007
Subject: [Harbour] String loops with FOR EACH
In-Reply-To: <4EAE9D7B-9990-49B3-9114-395DEBCF9EE2@syenar.hu>
References: <4EAE9D7B-9990-49B3-9114-395DEBCF9EE2@syenar.hu>
Message-ID: <20071006121108.GB24277@localhost.localdomain>

On Sat, 06 Oct 2007, Szak?ts Viktor wrote:
> Hi folks,
> I've just realized that in Harbour it's possible to use
> FOR EACH on strings:
> --
> FOR EACH cChar IN cString
>     ? cChar
> NEXT
> --

This works also in xHarbour

> This seems to be the fastest way to do loops on strings.

Yes if you want to scan/update whole string

> In a simple test which goes through a 5 char long string
> and rebuilds it in another var, it seems consistently faster
> by 35% compared to the simple "FOR 1 TO Len()/SubStr()/NEXT"
> loop, and 25% faster than an optimized "FOR 1 TO nLen/SubStr()/NEXT"
> loop.
> The speed gain gets higher for longer strings:
>  5 char long string: 35%, 25%
> 10 char long string: 45%, 35%
> 20 char long string: 50%, 40%
> Of course lots of other factors will play in real life,
> but you get the idea.

In Harbour you can also assign string items if you pass base value
by reference
    FOR EACH cChar IN @cString

f.e:
    proc main
    local cChar, cString
    cString:="This is a test"
    FOR EACH cChar IN @cString
       if cChar $ "hst"
          cChar := "*"
       endif
    NEXT
    ? cString
    return

but this is unique to Harbour and will not work in xHarbour.
Harbour has also other extensions, f.e. you can iterate more
then one variables in single loop:

    proc main
    local cChar1, cChar2, cString1, cString2
    cString1:="This is a test"
    cString2:="12345678901234"
    FOR EACH cChar1, cChar2 IN @cString1, cString2
       if cChar1 $ "hst"
          cChar1 := cChar2
       endif
    NEXT
    ? cString1
    return

best regards,
Przemek
    
From lorenzo.fiorini at gmail.com  Sat Oct  6 10:20:13 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct  6 06:20:16 2007
Subject: [Harbour] hb_enumindex() and hb_autoadd()
Message-ID: <9257026e0710060720l19e0db87pc6cdb1cfea6630bc@mail.gmail.com>

Now that the changes are "calm down" :) I've tried to rebuild my
patches with "new" Harbour without HB_COMPAT_XHB and without
hbcompat.ch in include.

I get this:

../../../../source/rtl/linux/gcc/librtl.a(tbrowse.o):(.data+0x348):
undefined reference to `HB_FUN_HB_ENUMINDEX'

the problem is code like:

...
   for each aCol in aColsInfo

      oCell := TDataCell():New()

      i := hb_EnumIndex()
...

how should I change the code?

Can I return to use {=>} instead of HB_HSetAutoAdd( {=>}, .T. )?

best regards,
Lorenzo
From harbour at rglab.pl  Sat Oct  6 12:12:15 2007
From: harbour at rglab.pl (=?iso-8859-2?Q?Ryszard_G=B3=B1b?=)
Date: Sat Oct  6 08:12:17 2007
Subject: [Harbour] The latest code changes
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl>,
	<20071005012648.GA1708@localhost.localdomain>,
	<AA62FA4E-FCD6-4CFC-B62A-356C3919DCAF@syenar.hu>
	<47067306.7156.12248BE@rglab.przesiew.imid.med.pl>
	<7A977932-36E8-4A0F-8216-C517919E1841@syenar.hu>
	<6d4662bad672c55dbf02837d46855d91.qmail@home.pl>
	<643ce74bde71c3c653c120db01151285.qmail@home.pl>
	<d5c2f09ac6579037db0a3fa7a576691e.qmail@home.pl>
Message-ID: <b842fb2e1687f908d549e7e426556ea0.qmail@home.pl>

Szak?ts Viktor <harbour.01@syenar.hu> napisa?(a):

> Why would they do this? (especially if it gives no speed benefit
> over the tried and tested, cross-portable "old" SUBSTR() method)

  Just for speed and readability. In previous version (without overloading) 
indexed access/assign was faster (about 100%) then function call. See my 
previous response to Przemek.

> Well, for Harbour you need a C compiler anyway (at least if you
> want your app to be a standalone binary.)

  When some day the harbour will be able to link .hrb files and create the 
executable containing only pcode then users will no longer need C compiler 
to comile and run pure Clipper code.

> If SubStr() is optimized, you would get the _same_ performance as
> with strings as arrays; _With portable Clipper code_.

  If we build [] support into core harbour then it will be also portable.

> I'm also not sure if it's a generic need for most Clipper/Harbour
> developers to move legacy ASM/C code to Clipper. But even if it is,
> there you have SubStr(), optimized.

> Moreover, if you measure the speed of your _complete_ ported string
> processing function, is this one operation the biggest bottleneck
> in it? I'm don't think so.

  It of course depends on particular code but the function's call has in 
Clipper and harbour quite big overhead comparing to execution of pcode. So 
converting code to indexed strings instead of calling external C function 
can give the same speed but gives much better code maintanence.

> "Readability" isn't higher priority than consistent and/or expected
> behaviour, or even cross compatibility. This is readability for a
> huge price to pay.

  I don't see problems with consistent and expected behavior - it all 
depends how we implement it. I don't understand what for you means 'cross 
compatibility' - it it is backward compatibility with Clipper than I don't 
care about it because we have created harbour to leave Clipper. Compiling 
harbour code with other flavours of Clipper? It was never our goal.

> IMO, ASC( SUBSTR() ) is perfectly readable for a programmer with
> some Clipper experience. It also looks the same in several other high
> level languages.

  Sure however the code:
s[i]++
is always much more readable (shows better its purpose) and less error 
prone then
STUFF( a, i, 1, CHR( ASC( SUBSTR( a, i, 1 ) ) + 1 ) )
or
? s_out[ s_in[i] ]
instead of
? ASC( SUBSTR( s_out, ASC( SUBSTR( s_in, i, 1 ) ), 1 ) )

> Now, if we have 3 compile time switches modifying this behaviour,
> can you tell me - just be reading this simple code, let's say
> in a written documentation or a book - what will be the result:
> (in Harbour only, for simplicity)

  Please notice that support for indexed strings will be disabled by 
default (like it was so far) - you will have to enable it using some 
switches just like choosing optimization method or signed/unsigned 
representation of chars in C compilers.

> ? MyPetFunction( { .T., .F., .T., .F. }, 2 )
> // or when accidentally called with a bad type
> ? MyPetFunction( "123", 2 )
> ? MyPetFunction( "123", 4 )
>
> FUNCTION MyPetFunction( var )
>     RETURN var[ 3 ]
> --
>
> No, you can't. Why?
> Because you don't know the compiler switches.
>
> Depending on them, this could result in either:
> - .F. and RTE
> - .F. and number and zero?
> - .F. and number and RTE
> - .F. and 1 char long string and ""
> - .F. and 1 char long string and Chr(0)
> - .F. and 1 char long string and RTE

  Sorry, either code is not complete or you have made too big 
simplification.
If I get correctly your idea, invalid index (out of bounds) should always 
generate RTE (we should not copy SUBSTR here) - if index is valid than 
either number or string of length 1 will be returned. If support for 
'string as array' is disabled (which will be default) then we will get RTE.
  Anyway in other languages you will have simmilar problems through the use 
of overloading. We are allowing now to overload [] even for build in types 
- noone will be able to predict the exact runtime behaviour if for example 
3rd party lib will overload this operator.

>> What will return ASC( SUBSTR() ) if we will support UNICODE - will it
>> be still ASCII code or unicode? xxx[pos] should always return a
>> single byte of given string (buffer) - well at least in 'string as
>> array of bytes' mode.
>
> Unicode support will depend on the implementation we choose here,
> but IMO it should give the same result as SubStr( s, n, 1 ). We
> have no closer representation of a character in Clipper. You will
> nowhere find any reference to a char as a number in the Clipper
> language. This is not a coincidence, since several methods exist
> to assign numbers to characters, ASCII (ASC()) is just one of them.

  I am really not sure here. If every character in UNICODE is 16bit then 
returning a single character from UNICODE string should return 16bit number 
- which is quite different then treating strings as array of 8bit bytes. 
Since this is really undefined at this moment then maybe we really should 
give alternate and portable method by use of [] operator?

Regards, Ryszard

From teo at windtelsoft.com  Sat Oct  6 12:14:51 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Sat Oct  6 08:15:10 2007
Subject: [Harbour] hb_enumindex() and hb_autoadd()
In-Reply-To: <9257026e0710060720l19e0db87pc6cdb1cfea6630bc@mail.gmail.com>
References: <9257026e0710060720l19e0db87pc6cdb1cfea6630bc@mail.gmail.com>
Message-ID: <200710061114.51484.teo@windtelsoft.com>

On Saturday 06 October 2007 09:20:13 am Lorenzo Fiorini wrote:
> Now that the changes are "calm down" :) I've tried to rebuild my
> patches with "new" Harbour without HB_COMPAT_XHB and without
> hbcompat.ch in include.
>
> I get this:
>
> ../../../../source/rtl/linux/gcc/librtl.a(tbrowse.o):(.data+0x348):
> undefined reference to `HB_FUN_HB_ENUMINDEX'
>
> the problem is code like:
>
> ...
>    for each aCol in aColsInfo
>
>       oCell := TDataCell():New()
>
>       i := hb_EnumIndex()
> ...
>
> how should I change the code?
>
> Can I return to use {=>} instead of HB_HSetAutoAdd( {=>}, .T. )?

Hello Lorenzo,

The folowing sample runs ok with a standard Harbour build:

<prg>
FUNCTION Main()
  LOCAL h
  LOCAL itm

  CLS

  h := {=>}

  h["one"]   := 1
  h["two"]   := 2
  h["three"] := 3

  FOR EACH itm IN h
    ? itm:__enumIndex(), itm
  NEXT

  WAIT

RETURN NIL
</prg>


best regards

Teo
From harbour.01 at syenar.hu  Sat Oct  6 12:49:39 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct  6 08:49:49 2007
Subject: [Harbour] The latest code changes
In-Reply-To: <b842fb2e1687f908d549e7e426556ea0.qmail@home.pl>
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl>,
	<20071005012648.GA1708@localhost.localdomain>,
	<AA62FA4E-FCD6-4CFC-B62A-356C3919DCAF@syenar.hu>
	<47067306.7156.12248BE@rglab.przesiew.imid.med.pl>
	<7A977932-36E8-4A0F-8216-C517919E1841@syenar.hu>
	<6d4662bad672c55dbf02837d46855d91.qmail@home.pl>
	<643ce74bde71c3c653c120db01151285.qmail@home.pl>
	<d5c2f09ac6579037db0a3fa7a576691e.qmail@home.pl>
	<b842fb2e1687f908d549e7e426556ea0.qmail@home.pl>
Message-ID: <649A61A5-793E-4A8F-9E43-A49151194A8D@syenar.hu>

Hi Ryszard,

On 2007.10.06., at 18:12, Ryszard G??b wrote:

> Szak?ts Viktor <harbour.01@syenar.hu> napisa?(a):
>
>> Why would they do this? (especially if it gives no speed benefit
>> over the tried and tested, cross-portable "old" SUBSTR() method)
>
>   Just for speed and readability. In previous version (without  
> overloading)
> indexed access/assign was faster (about 100%) then function call.  
> See my
> previous response to Przemek.

It doesn't give any advantage, if SUBSTR(s,n,1) and ASC(SUBSTR(s,n, 
1)) is
optimized to a single PCODE (each) by the compiler.

>> Well, for Harbour you need a C compiler anyway (at least if you
>> want your app to be a standalone binary.)
>
>   When some day the harbour will be able to link .hrb files and  
> create the
> executable containing only pcode then users will no longer need C  
> compiler
> to comile and run pure Clipper code.

Yes. One of the great strengths of Clipper was/is its ability for
easy interfacing with C code. If there is job which is suited for
C (like the one you suggest), it can be written in C, compiled once,
and used as a _library_, a fully normal thing in Clipper (or in any
high level language). If your goal is to move all your low-level
logic to Clipper level, I think the problem is with the goal. This
is not a common need at all and it does have at least one other
viable solution.

And again, do you think s[n] := x _is_ the one and only bottleneck
you will have in this process?

>> If SubStr() is optimized, you would get the _same_ performance as
>> with strings as arrays; _With portable Clipper code_.
>
>   If we build [] support into core harbour then it will be also  
> portable.

How? string[n] doesn't work in CA-Clipper, XBase++, Flagship, and it  
works
differently in xhb.

>> I'm also not sure if it's a generic need for most Clipper/Harbour
>> developers to move legacy ASM/C code to Clipper. But even if it is,
>> there you have SubStr(), optimized.
>
>> Moreover, if you measure the speed of your _complete_ ported string
>> processing function, is this one operation the biggest bottleneck
>> in it? I'm don't think so.
>
>   It of course depends on particular code but the function's call  
> has in
> Clipper and harbour quite big overhead comparing to execution of  
> pcode. So
> converting code to indexed strings instead of calling external C  
> function
> can give the same speed but gives much better code maintanence.

See my suggestion for pcode optimization.

>> "Readability" isn't higher priority than consistent and/or expected
>> behaviour, or even cross compatibility. This is readability for a
>> huge price to pay.
>
>   I don't see problems with consistent and expected behavior - it all
> depends how we implement it. I don't understand what for you means  
> 'cross
> compatibility' - it it is backward compatibility with Clipper than  
> I don't
> care about it because we have created harbour to leave Clipper.  
> Compiling
> harbour code with other flavours of Clipper? It was never our goal.

You don't care, but it's nevertheless important from a language design
perspective. This is an extension you cannot even spot. So the app will
simply crash when ported, or you have to clean it up line by line.
(we already have this problem now when trying to "port" code from xhb)

>> IMO, ASC( SUBSTR() ) is perfectly readable for a programmer with
>> some Clipper experience. It also looks the same in several other high
>> level languages.
>
>   Sure however the code:
> s[i]++
> is always much more readable (shows better its purpose) and less error
> prone then
> STUFF( a, i, 1, CHR( ASC( SUBSTR( a, i, 1 ) ) + 1 ) )
> or
> ? s_out[ s_in[i] ]
> instead of
> ? ASC( SUBSTR( s_out, ASC( SUBSTR( s_in, i, 1 ) ), 1 ) )

Sure, and how often this code is needed in real-life business
applications, written in a high-level language as Clipper?

>> Now, if we have 3 compile time switches modifying this behaviour,
>> can you tell me - just be reading this simple code, let's say
>> in a written documentation or a book - what will be the result:
>> (in Harbour only, for simplicity)
>
>   Please notice that support for indexed strings will be disabled by
> default (like it was so far) - you will have to enable it using some
> switches just like choosing optimization method or signed/unsigned
> representation of chars in C compilers.

Sorry, but I don't think compile time switches are the solution choose
between language behaviours. You can't find such in any serious  
language.
Language developers have to make these decisions, not the users.

>> - .F. and RTE
>> - .F. and number and zero?
>> - .F. and number and RTE
>> - .F. and 1 char long string and ""
>> - .F. and 1 char long string and Chr(0)
>> - .F. and 1 char long string and RTE
>
>   Sorry, either code is not complete or you have made too big
> simplification.
> If I get correctly your idea, invalid index (out of bounds) should  
> always
> generate RTE (we should not copy SUBSTR here) - if index is valid than
> either number or string of length 1 will be returned. If support for
> 'string as array' is disabled (which will be default) then we will  
> get RTE.
>   Anyway in other languages you will have simmilar problems through  
> the use
> of overloading. We are allowing now to overload [] even for build  
> in types
> - noone will be able to predict the exact runtime behaviour if for  
> example
> 3rd party lib will overload this operator.

I was not suggesting any behaviour here, just wanted to show
you that a simple code snippet doesn't express logic in an
_unambigous_ way. The actual logic would depend on compiler
switches, compiler flavour.

(If you ask me, operator overloading is also a crazy feature,
and it can make C++ - and Harbour - code virtually unreadable.)

>>> What will return ASC( SUBSTR() ) if we will support UNICODE -  
>>> will it
>>> be still ASCII code or unicode? xxx[pos] should always return a
>>> single byte of given string (buffer) - well at least in 'string as
>>> array of bytes' mode.
>>
>> Unicode support will depend on the implementation we choose here,
>> but IMO it should give the same result as SubStr( s, n, 1 ). We
>> have no closer representation of a character in Clipper. You will
>> nowhere find any reference to a char as a number in the Clipper
>> language. This is not a coincidence, since several methods exist
>> to assign numbers to characters, ASCII (ASC()) is just one of them.
>
>   I am really not sure here. If every character in UNICODE is 16bit  
> then
> returning a single character from UNICODE string should return  
> 16bit number
> - which is quite different then treating strings as array of 8bit  
> bytes.
> Since this is really undefined at this moment then maybe we really  
> should
> give alternate and portable method by use of [] operator?

"unicode" can be 16bit, 32bit, and we might even opt for UTF-8
for strings so this question is a bit early to decide, but what
is sure that Clipper language doesn't define the numeric
representation of the strings it stores at all.

If I'd ever want to implement this, s[n] would return SubStr(s, n, 1),
as a string. ( s[ n ] == SubStr( s, 1, 1 ) )

But I vote to fully leave out any [] string operator implementation
from Harbour.

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Sat Oct  6 13:16:08 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct  6 09:16:12 2007
Subject: [Harbour] 1 $ { 1,2 } worked in beta3 with HB_COMPAT_XHB
Message-ID: <9257026e0710061016l5026ecasa13c41bd7b9082b7@mail.gmail.com>

I'm trying to get my Harbour build free of HB_COMPAT_XHB and I don't
want to link xhb since I can't understand what it really does ( my
fault of course ).

Is it expected that the code below will not work in "standard" Harbour
or am I doing sth wrong?

procedure main

   ? iif( 1 $ { 1, 2 }, "in", "out" )
   wait

return

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sat Oct  6 13:24:54 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct  6 09:25:02 2007
Subject: [Harbour] 1 $ { 1,2 } worked in beta3 with HB_COMPAT_XHB
In-Reply-To: <9257026e0710061016l5026ecasa13c41bd7b9082b7@mail.gmail.com>
References: <9257026e0710061016l5026ecasa13c41bd7b9082b7@mail.gmail.com>
Message-ID: <FAF93E25-1614-443C-9EF9-4F1426B8F8E2@syenar.hu>

Hi Lorenzo,

> I'm trying to get my Harbour build free of HB_COMPAT_XHB and I don't
> want to link xhb since I can't understand what it really does ( my
> fault of course ).
>
> Is it expected that the code below will not work in "standard" Harbour
> or am I doing sth wrong?
>
> procedure main
>
>    ? iif( 1 $ { 1, 2 }, "in", "out" )
>    wait
>
> return

This is normal, since this is an xhb-only extension, implemented
in xhb lib using operator overloading. You'll need to add
#include "xhb.ch" to your code. (or use AScan() :)

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Sat Oct  6 13:26:52 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct  6 09:26:57 2007
Subject: [Harbour] hb_enumindex() and hb_autoadd()
In-Reply-To: <200710061114.51484.teo@windtelsoft.com>
References: <9257026e0710060720l19e0db87pc6cdb1cfea6630bc@mail.gmail.com>
	<200710061114.51484.teo@windtelsoft.com>
Message-ID: <9257026e0710061026l4cf8d766qf651728bfae31b3d@mail.gmail.com>

On 10/6/07, Teo Fonrouge <teo@windtelsoft.com> wrote:

> The folowing sample runs ok with a standard Harbour build:

Thanks Teo.

Could you kindly remove all HB_HSetAutoAdd( {=>}, .T. ) in tip?

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Sat Oct  6 13:45:59 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct  6 09:46:02 2007
Subject: [Harbour] 1 $ { 1,2 } worked in beta3 with HB_COMPAT_XHB
In-Reply-To: <FAF93E25-1614-443C-9EF9-4F1426B8F8E2@syenar.hu>
References: <9257026e0710061016l5026ecasa13c41bd7b9082b7@mail.gmail.com>
	<FAF93E25-1614-443C-9EF9-4F1426B8F8E2@syenar.hu>
Message-ID: <9257026e0710061045s32f4b57ey2ea81d1d34768295@mail.gmail.com>

On 10/6/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> This is normal, since this is an xhb-only extension, implemented
> in xhb lib using operator overloading. You'll need to add
> #include "xhb.ch" to your code. (or use AScan() :)

Thanks I'll change it to ascan :(

( just an opinion n $ { a, b } was elegant and clear )

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Sat Oct  6 15:07:16 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct  6 11:07:19 2007
Subject: [Harbour] Why $ can't be "included" anymore?
Message-ID: <9257026e0710061207g2772f2f4gb6b6c58aa2300ba5@mail.gmail.com>

Sorry I don't want to reopen discussions but when I ported code from
xHarbour I changed all the IN into $ because I understood that IN was
simply translated into $ and I agreed that introducing new operators
that have the same meaning of old ones was a no-sense.
Now $ is not $ anymore and I've to change $ to ascan.
Is it really necessary in a beta3 to beta4 step?

I understand that strings like arrays can be controversial but why $
can't be "included" everywhere.

To me it seems clear and without any cons.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sat Oct  6 15:18:30 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct  6 11:18:38 2007
Subject: [Harbour] Why $ can't be "included" anymore?
In-Reply-To: <9257026e0710061207g2772f2f4gb6b6c58aa2300ba5@mail.gmail.com>
References: <9257026e0710061207g2772f2f4gb6b6c58aa2300ba5@mail.gmail.com>
Message-ID: <66789751-09D1-44FC-BD18-AF15B44FD715@syenar.hu>

Hi Lorenzo,

Backward-compatibility, cross-compatibility mainly,
and mostly for the same reasons as any other operator
extensions are problematic.

This $ extension was never part of Harbour. Only with
HB_COMPAT_XHB build. xhb users complained that HB_COMPAT_XHB
makes life harder. So we decided to move all HB_COMPAT_XHB
to a separate lib. We did it. Using xhb lib is simple
and it solves most xhb compatibility problems, including
this one. I don't see anything wrong with that.

I suggest not to start lengthy discussions about
moving every (or selected) features from xhb lib to
core Harbour now 8-/

Brgds,
Viktor

On 2007.10.06., at 21:07, Lorenzo Fiorini wrote:

> Sorry I don't want to reopen discussions but when I ported code from
> xHarbour I changed all the IN into $ because I understood that IN was
> simply translated into $ and I agreed that introducing new operators
> that have the same meaning of old ones was a no-sense.
> Now $ is not $ anymore and I've to change $ to ascan.
> Is it really necessary in a beta3 to beta4 step?
>
> I understand that strings like arrays can be controversial but why $
> can't be "included" everywhere.
>
> To me it seems clear and without any cons.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Sat Oct  6 15:31:57 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct  6 11:32:00 2007
Subject: [Harbour] Why $ can't be "included" anymore?
In-Reply-To: <66789751-09D1-44FC-BD18-AF15B44FD715@syenar.hu>
References: <9257026e0710061207g2772f2f4gb6b6c58aa2300ba5@mail.gmail.com>
	<66789751-09D1-44FC-BD18-AF15B44FD715@syenar.hu>
Message-ID: <9257026e0710061231g8633af4mcd24369b29235a0@mail.gmail.com>

On 10/6/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> I suggest not to start lengthy discussions about
> moving every (or selected) features from xhb lib to
> core Harbour now 8-/

Sorry I tried to follow the discussion about xhb but it was not so
clear what was an xhb extension and what was not.

For the moment I'll continue to use beta3.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sat Oct  6 15:41:14 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct  6 11:41:22 2007
Subject: [Harbour] Why $ can't be "included" anymore?
In-Reply-To: <9257026e0710061231g8633af4mcd24369b29235a0@mail.gmail.com>
References: <9257026e0710061207g2772f2f4gb6b6c58aa2300ba5@mail.gmail.com>
	<66789751-09D1-44FC-BD18-AF15B44FD715@syenar.hu>
	<9257026e0710061231g8633af4mcd24369b29235a0@mail.gmail.com>
Message-ID: <CC9A1E03-5827-4042-928A-CCC8FDB88BD1@syenar.hu>


On 2007.10.06., at 21:31, Lorenzo Fiorini wrote:

> On 10/6/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
>
>> I suggest not to start lengthy discussions about
>> moving every (or selected) features from xhb lib to
>> core Harbour now 8-/
>
> Sorry I tried to follow the discussion about xhb but it was not so
> clear what was an xhb extension and what was not.

Everything covered with #ifdef HB_COMPAT_XHB was moved
to xhb lib in contrib. Plus there were some extra stuff
ported there by Przemek, directly from xhb. Also hbcompat.ch
was moved to xhb.ch.

This way everyone can use the same standard Harbour build,
and those who need those extra bits of xhb features, may
just simply link xhb lib and use the xhb.ch header file,
and most xhb feature will work like in xhb itself.

There is really nothing unsafe by using xhb lib. If you
need xhb features (like AINS, ADEL, ASCAN extensions,
xhb compatible naming, SUBSTR(), [] operator, $ operator,
etcetc), try it and use it.

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Sat Oct  6 16:22:01 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct  6 12:22:04 2007
Subject: [Harbour] Why $ can't be "included" anymore?
In-Reply-To: <CC9A1E03-5827-4042-928A-CCC8FDB88BD1@syenar.hu>
References: <9257026e0710061207g2772f2f4gb6b6c58aa2300ba5@mail.gmail.com>
	<66789751-09D1-44FC-BD18-AF15B44FD715@syenar.hu>
	<9257026e0710061231g8633af4mcd24369b29235a0@mail.gmail.com>
	<CC9A1E03-5827-4042-928A-CCC8FDB88BD1@syenar.hu>
Message-ID: <9257026e0710061322r72d88610lc37b71570005deed@mail.gmail.com>

On 10/6/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> There is really nothing unsafe by using xhb lib. If you
> need xhb features (like AINS, ADEL, ASCAN extensions,
> xhb compatible naming, SUBSTR(), [] operator, $ operator,
> etcetc), try it and use it.

Sorry but this is not so easy. It's not only a technical question.
It's also matter of "trustability".

I have a company bet on Harbour and for experience I know that
"contribs" can be easily become unsupported since "it was not part of
the core".
What tells me that the same can't happen to hashes, tip, gd, pgsql?
They are also "extensions".

How much of the code that I'm writing today will run on the next Harbour build?
This IS really "unsafe" for me :)

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sat Oct  6 16:58:38 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct  6 12:58:47 2007
Subject: [Harbour] Why $ can't be "included" anymore?
In-Reply-To: <9257026e0710061322r72d88610lc37b71570005deed@mail.gmail.com>
References: <9257026e0710061207g2772f2f4gb6b6c58aa2300ba5@mail.gmail.com>
	<66789751-09D1-44FC-BD18-AF15B44FD715@syenar.hu>
	<9257026e0710061231g8633af4mcd24369b29235a0@mail.gmail.com>
	<CC9A1E03-5827-4042-928A-CCC8FDB88BD1@syenar.hu>
	<9257026e0710061322r72d88610lc37b71570005deed@mail.gmail.com>
Message-ID: <ABAC2550-0DCA-42F9-BC4B-9366D6A79BB1@syenar.hu>

Hey Lorenzo,

>> There is really nothing unsafe by using xhb lib. If you
>> need xhb features (like AINS, ADEL, ASCAN extensions,
>> xhb compatible naming, SUBSTR(), [] operator, $ operator,
>> etcetc), try it and use it.
>
> Sorry but this is not so easy. It's not only a technical question.
> It's also matter of "trustability".
>
> I have a company bet on Harbour and for experience I know that
> "contribs" can be easily become unsupported since "it was not part of
> the core".
> What tells me that the same can't happen to hashes, tip, gd, pgsql?
> They are also "extensions".

No one (and at the same time everyone) guarantees that
even Harbour will be "trusted". This is exactly so for
contribs. Granted, for contribs the rules are more
relaxed, but this is one of their advantage. If rules
were not relaxed, xhb lib could not exist in the Harbour
repository _at all_. For more relaxed rules, you _might_
have less guarantees. You can't get everything, it's
a matter of balance.

Having said that, if you look at xhb lib, almost all
parts were added by Przemek, another chunk (never
found in Harbour before) was imported from xhb, the
original developers being over there.

See my next point, what _you_ can do to solve this problem.

> How much of the code that I'm writing today will run on the next  
> Harbour build?
> This IS really "unsafe" for me :)

Well, it never run under standard Harbour.

If portability and stability is such a concern for you
(which I totally understand, and I think of my own
code along the same line), you can do two things:

1) Use language elements that are portable and don't
rely on such features that can only be found in one of
the dialects of the language. Simple as that. My code
still perfectly compiles with CA-Clipper, without any
#ifdef __HARBOUR__ branches. So it's doable. Even if
you want to use features over CA-Clipper, because
there are lots of extra features you can find in both
Harbour and xhb.

2) Contribute to xhb lib, even by testing it. This is
how it works. xhb compatibility lib should be developed
by those who _need_ and _use_ those features.


We in Harbour cannot take responsibility for xhb features,
since they were thought out and developed by different developers
from another project. No one can expect that these xhb features
will all make it to core Harbour, some of them can, but this
is not xhb, so we won't implement everything. Now, with quite
some work we managed to solve to offer these features inside
Harbour, because there seem to a need for it (= constant
nagging about all range of special xhb features). This was
solved as a contrib. I think you can trust it.

Brgds,
Viktor

From mbelgrano at deltain.it  Sat Oct  6 17:24:32 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct  6 13:24:51 2007
Subject: R: [Harbour] Harbour roadmap ?
In-Reply-To: <3D223D87-7395-4DA6-ABD9-C64C0F7FB75C@syenar.hu>
References: <200710050841.55838.teo@windtelsoft.com>
	<3D223D87-7395-4DA6-ABD9-C64C0F7FB75C@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809AA11@SRV02.deltain.net>

The most important target for Harbour 2.0 would be

1) A library which I can use with CUI, GUI and WWW Browsers without source code modification. Porting application to GUI only mode is a waste of time.
We will need interface which will allow to run application remotely in CUI mode and when user turn off his terminal in scale register ;-) without closing application on the server and reconnect from office
using desktop computer he should continue his job in GUI mode in the same instance of application and finally if he will want then we will have to allow him to finish the job using PDA and WWW browser when  he will return to home.
We have to stop thinking in desktop and in web development as different entities. We need a common interface for all our developments.
(I have copied from an old post)

2) Visual Fox Pro Compatibility will be interesting for give new user Because March 13 2007 Microsoft stated that it will not be releasing its Visual FoxPro development software past version 9.0.
This are sample copied from Wikipedia about visual fox pro
loForm = CREATEOBJECT("HiForm")
loForm.Show(1)
DEFINE CLASS HiForm AS Form
  AutoCenter = .T.
  Caption = "Hello, World"
  ADD OBJECT lblHi as Label WITH ;
    Caption = "Hello, World!"
ENDDEFINE

* Create a table
CREATE TABLE randData (iData I)
* Populate with random data using xBase and SQL DML commands
FOR i = 1 TO 50
    APPEND BLANK
    REPLACE iData WITH (RAND() * 100)
    INSERT INTO randData (iData) VALUES (RAND() * 100)
ENDFOR
* Place a structural index on the data
INDEX ON iData TAG iData
CLOSE ALL
* Display sorted data using xBase-style commands
USE randData
SET ORDER TO iData
GO TOP
LIST NEXT 10  && First 10 
SKIP 81
LIST NEXT 10  && Last 10
CLOSE ALL
* Browse sorted data using SQL DML commands
SELECT * ;
  FROM randData ;
  ORDER BY iData DESCENDING

3) I suggest to see an approach to development of software different from Java,Visual Basic .net, Delphi
The approach of database management system like Microsoft Access (http://office.microsoft.com/en-us/access/HA102188681033.aspx), File Maker (http://www.filemaker.com), 4th Dimension (http://www.4d.com/products/4ddevedition.html), PowerBuilder
This product combine in one product a database Engine (jet) ,A query and reporting System, A form Editor GUI, A Script language (like vbscript)
I suggest to search in GoogleImage : Filemaker application , Ms access application, 4d application can be find interesting application screenshot
Harbour today have a good database engine (interchangeable via rdd ) and a very good languages , But lack of query and reporting system and form GUI editor
dBase was born as database management system so harbour will be be a DBMS (a little)
A Rapid Application Development (RAD) system, must includes tools for drawing the user interface and reports, and accessing database content and editing source.


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Szak?ts Viktor
Inviato: venerd? 5 ottobre 2007 17.04
A: Harbour Project Main Developer List.
Oggetto: Re: [Harbour] Harbour roadmap ?

Hi,

The goal is to have a C5.2e compatible compiler.

I have these in mind when thinking about future directions:
- Full "unicode" support (including unicode .prg files)
- Proper and native multilanguage support (i18n)
- Multithreading
- Strong typing
- Native classes (without PP) (?)
- Creating a documented function call equivalent for
   all command-only feature (like PACK).
- I'd feel it important to focus on Harbour being used
   as a scripting language. Do we miss anything in this area?
   (compiler switches definitely don't match well with this one)

I'm personally against any l'art pour l'art feature frenzy
especially when it comes to the base language (statements,
operators). Clipper is a very strong language, we have
plenty of ways (too much even IMO) to express logic with it,
and I'm not sure we would need to concentrate on adding
new and new ones. (Otherwise at the end, everyone will
have his/her own pet feature right there in the core, right,
but source code will look like Frankenstein, portability
suffers, new users will not get it, code will depend on
several compile time switches (;so code by itself will not
be enough to see what the code actually does), and we will
end up with 10 #ifdefs in every source code, just like in C,
to make something compile under 2-3 flavours of Clipper
compatible compilers. All these are bad for a language.)

Sometimes, less is more.

So rather, if we want to modernize the language and make it
stronger, we might want to make the language slimmer, simpler,
with less variations, preferring the higher quality features
of it, and fading the really obsolete (legacy) part of it.
All this, in an optional and compatible fashion, of course.

In parallel we can build libs to implement different APIs
for common tasks needed for today's business apps, like:
- Proper, portable page orientated printing.
- SQL support.
- proper XML support.
- Polished communication interface for POP3, SMTP, FTP, HTTP
   GET/PUT, generic TCPIP, etc, mail message parsing and creation.
- SSH/SSL support where it applies.
- Wrappers for nowadays essential extensions, like CURL, LDAP,
   SQLITE, etc.
- Some random features like PDF, image formats, ZIP, BZIP, TAR
- GUI (controversial, maybe even impossible, but definitely
   important)

All these can be developed as fully external libs (some
of the already exist), but eventually it might be good
to include them in core. If we want to do this, we need
to have a clear definition on the feature set and a high
level of standard when defining the API.

Brgds,
Viktor


On 2007.10.05., at 15:41, Teo Fonrouge wrote:

> Hello,
>
> Is there such thing as a roadmap doc ?, or there is a implicit "be  
> a Clipper
> 5.xx compatible compiler" unique milestone.
>
> If there is not a roadmap, maybe we need to define one.
>
> As anyway, the statement "be a Clipper 5.xx compatible compiler" is  
> a main
> goal, then the folowing simple questions arise:
>
>  * What is the status of this compatibility, and how this is  
> measured ?
>
>  * If the current compatibility level of Harbour compiler is a  
> almost complete
> one, then what is next ?
>
> I have seen lately too much references to the word "compatibility"  
> in the
> posts, but compatibility against what seems a little ambiguous to  
> me now.
> Harbour has, and hopefully will have, great features that most  
> certainly
> enrich the language beyond the Clipper limits. So, why to keep some  
> of this
> features 'outside' of the standard Harbour language and worst,  
> calling this
> as a xHB's compatibility lib.
>
> I believe, that this features along with the planned ones (i.e. I  
> have seen
> lately references to 'strong typing' ) are the natural and logic  
> consequence
> of the a intrinsic evolution of the language.
>
> If Harbour is currently a *high* level Clipper compatible language  
> why not to
> leave this as version 1 ?
>
>
> best regards
>
> Teo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From lorenzo.fiorini at gmail.com  Sat Oct  6 18:29:13 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct  6 14:29:16 2007
Subject: [Harbour] Why $ can't be "included" anymore?
In-Reply-To: <ABAC2550-0DCA-42F9-BC4B-9366D6A79BB1@syenar.hu>
References: <9257026e0710061207g2772f2f4gb6b6c58aa2300ba5@mail.gmail.com>
	<66789751-09D1-44FC-BD18-AF15B44FD715@syenar.hu>
	<9257026e0710061231g8633af4mcd24369b29235a0@mail.gmail.com>
	<CC9A1E03-5827-4042-928A-CCC8FDB88BD1@syenar.hu>
	<9257026e0710061322r72d88610lc37b71570005deed@mail.gmail.com>
	<ABAC2550-0DCA-42F9-BC4B-9366D6A79BB1@syenar.hu>
Message-ID: <9257026e0710061529ha591d3dt14c093d01f0e34f0@mail.gmail.com>

On 10/6/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

First of all please understand that English is not my mother language
and I have some difficulties to express "non technical" concepts. So
please don't read anything behind my words because probably it was a
mistake and even the words in front are often casual so please forgive
me in advance :)

I'm not complaining about this or that feature but I'm expressing my
"fear, uncertainty and dubt" about the "method".

Why are we always talking about xhb extensions? It seems that the
problem is not the extension itself but the fact that it comes from
xHarbour. This seems a case of NIH "not invented here" and I've seen
many open-source project die for this.

I understand that for strings[] there are different positions so I (
silently ) agreed to move forward but I don't remember any problem
about the "$" operator.
If it does not create problems and ambiguities why remove a working feature?

> No one (and at the same time everyone) guarantees that
> even Harbour will be "trusted". This is exactly so for
> contribs. Granted, for contribs the rules are more
> relaxed, but this is one of their advantage. If rules
> were not relaxed, xhb lib could not exist in the Harbour
> repository _at all_. For more relaxed rules, you _might_
> have less guarantees. You can't get everything, it's
> a matter of balance.

If you agree that contribs are "less guaranteed" you should admit that
before $ "full" support was in the core so it has been "downgraded".

> We in Harbour cannot take responsibility for xhb features,
> since they were thought out and developed by different developers
> from another project.

Another time we are talking of xHarbour as the "other".
Are the hashes "aliens" that are out of the responsibility of the Harbour team?
How long they'll stay in the core?

Nothing personal of course I simply care about the future of this great tool.

best regards,
Lorenzo
From info at fsgiudice.com  Sat Oct  6 19:32:24 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Oct  6 15:32:44 2007
Subject: [Harbour] Help on use of MSYS + MinGW
References: <9257026e0710061207g2772f2f4gb6b6c58aa2300ba5@mail.gmail.com><66789751-09D1-44FC-BD18-AF15B44FD715@syenar.hu><9257026e0710061231g8633af4mcd24369b29235a0@mail.gmail.com><CC9A1E03-5827-4042-928A-CCC8FDB88BD1@syenar.hu><9257026e0710061322r72d88610lc37b71570005deed@mail.gmail.com><ABAC2550-0DCA-42F9-BC4B-9366D6A79BB1@syenar.hu>
	<9257026e0710061529ha591d3dt14c093d01f0e34f0@mail.gmail.com>
Message-ID: <001d01c80871$290ddc40$b50aa8c0@ASUSFSG>

Hi Lorenzo,

after a lot of time I have found time and way to install MSYS + MinGW and to 
compile harbour from SVN, but I have a problem: if I use any of hb* utility 
to compile even a simple utility, it seems that doesn't recognize any 
parameters.
The command I use is:

hbmk hello

and I got message from compiler that show me the syntax.

Same result also with hbcc and harbour command itself, obviously I also 
tried passing parameters like:

harbour -n -w -es2 -gtwvt hello

but everytime result is the same.

Now my actual configuration is:
Win XP SP2
MinGW-5.1.3
MSYS-1.0.10
installed on P:\ (first MinGW, then MSYS)
in my home folder I have checked out harbour trunk and added current 
variables:

------------
export HB_ARCHITECTURE=w32
#export HB_COMPILER=gcc
export HB_COMPILER=mingw32
#export HB_GT_LIB=gttrm
export HB_GT_LIB=gtcgi

export HB_INSTALL_PREFIX=/usr
export HB_BIN_INSTALL=$HB_INSTALL_PREFIX/bin
export HB_LIB_INSTALL=$HB_INSTALL_PREFIX/lib/harbour
export HB_INC_INSTALL=$HB_INSTALL_PREFIX/include/harbour
#export HB_CONTRIBLIBS="gd tip xhb mysql"
export HB_CONTRIBLIBS="gd"

export 
CC_PRG_USR="-D__PLATFORM__Windows -undef:__PLATFORM__UNIX -undef:__PLATFORM__Linux"
#export HB_CFG_FILE=/etc/hrbw32.cfg
export PRG_USR="$CC_PRG_USR $PRG_USR"
---------------

after that I have built harbour using make_gnu.sh command and all is 
compiled (apart from gd, but there is a path problem for includes).
At this point if I go in tests and try above tests nothing works.

Second question:
Do you have a shared partition between Windows and Linux ?
If yes, how do you have organized your environment to work exactly on same 
files ?

TIA

Best Regards

Francesco

PS: I'm with you about $ operator working also on arrays and hashes.

From harbour.01 at syenar.hu  Sat Oct  6 22:31:31 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct  6 18:31:42 2007
Subject: [Harbour] Why $ can't be "included" anymore?
In-Reply-To: <9257026e0710061529ha591d3dt14c093d01f0e34f0@mail.gmail.com>
References: <9257026e0710061207g2772f2f4gb6b6c58aa2300ba5@mail.gmail.com>
	<66789751-09D1-44FC-BD18-AF15B44FD715@syenar.hu>
	<9257026e0710061231g8633af4mcd24369b29235a0@mail.gmail.com>
	<CC9A1E03-5827-4042-928A-CCC8FDB88BD1@syenar.hu>
	<9257026e0710061322r72d88610lc37b71570005deed@mail.gmail.com>
	<ABAC2550-0DCA-42F9-BC4B-9366D6A79BB1@syenar.hu>
	<9257026e0710061529ha591d3dt14c093d01f0e34f0@mail.gmail.com>
Message-ID: <DE80FFA6-51C9-4A22-9BFE-EF4167193821@syenar.hu>

Hi Lorenzo,

> On 10/6/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
>
> First of all please understand that English is not my mother language
> and I have some difficulties to express "non technical" concepts. So
> please don't read anything behind my words because probably it was a
> mistake and even the words in front are often casual so please forgive
> me in advance :)
>
> I'm not complaining about this or that feature but I'm expressing my
> "fear, uncertainty and dubt" about the "method".
>
> Why are we always talking about xhb extensions? It seems that the

Probably because ppl who got used to some features in xhb
doesn't want to lose them, yet they want to migrate to
Harbour, for "some" reason. So, they're making a permanent
pressure on this list with requests and complaints. If Harbour
does such a bad job, why these guys want to migrate?

> problem is not the extension itself but the fact that it comes from
> xHarbour. This seems a case of NIH "not invented here" and I've seen
> many open-source project die for this.

This is not true. Count how many "xhb features" were
implemented in Harbour. Usually in a higher quality than
in xhb.

Fact is: xhb uses a fully different development approach.
Harbour doesn't endorse this. It never did. Harbour's job
is not to replicate xhb, but to create a C5.2e compiler.

The option is there for everyone: You can go to xhb for full
support for all xhb features _natively_, or you can come
to Harbour with the benefits of Harbour, and _most_ xhb
features, implemented in a lib.

If you cannot live without xhb features and don't find
xhb lib proper enough, use xhb.

Or you can always use portable Clipper code.

> I understand that for strings[] there are different positions so I (
> silently ) agreed to move forward but I don't remember any problem
> about the "$" operator.
> If it does not create problems and ambiguities why remove a working  
> feature?

It was never a feature in default Harbour core.

>> No one (and at the same time everyone) guarantees that
>> even Harbour will be "trusted". This is exactly so for
>> contribs. Granted, for contribs the rules are more
>> relaxed, but this is one of their advantage. If rules
>> were not relaxed, xhb lib could not exist in the Harbour
>> repository _at all_. For more relaxed rules, you _might_
>> have less guarantees. You can't get everything, it's
>> a matter of balance.
>
> If you agree that contribs are "less guaranteed" you should admit that
> before $ "full" support was in the core so it has been "downgraded".

It was not in the default core. Nothing was downgraded, you
need to use xhb lib instead of building you own Harbour compiler
with an optional #define. This is a technical change.

>> We in Harbour cannot take responsibility for xhb features,
>> since they were thought out and developed by different developers
>> from another project.
>
> Another time we are talking of xHarbour as the "other".
> Are the hashes "aliens" that are out of the responsibility of the  
> Harbour team?
> How long they'll stay in the core?

Sorry, but it seems to me that you spread FUD here.

Hashes are not "aliens". You know perfectly well that the
last bit was just synced with xhb yesterday.

Notice however that if we find a shady aspect of some
Harbour features, especially in the beta stage, things
_may_ change. Not because it comes from xhb, but because
the goal is to release a high quality product meeting our
original goals.

> Nothing personal of course I simply care about the future of this  
> great tool.

It seems to me that the motive of your mail is rooted
in the fact that "$" operator was removed from Harbour.
It wasn't. "$" operator was never supported in core
Harbour, it was supported via an optional build-time
switch. Now it is supported via a Harbour contrib lib,
which you seemingly didn't even try yet. If you want to
use Harbour and cannot move away from xhb extensions not
present in Harbour, pls try xhb lib. If it doesn't work
properly, report it, chances are very high that it will
be fixed quickly.

Brgds,
Viktor

From teo at windtelsoft.com  Sat Oct  6 22:33:14 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Sat Oct  6 18:33:30 2007
Subject: [Harbour] hb_enumindex() and hb_autoadd()
In-Reply-To: <9257026e0710061026l4cf8d766qf651728bfae31b3d@mail.gmail.com>
References: <9257026e0710060720l19e0db87pc6cdb1cfea6630bc@mail.gmail.com>
	<200710061114.51484.teo@windtelsoft.com>
	<9257026e0710061026l4cf8d766qf651728bfae31b3d@mail.gmail.com>
Message-ID: <200710062133.14852.teo@windtelsoft.com>

On Saturday 06 October 2007 12:26:52 pm Lorenzo Fiorini wrote:
> On 10/6/07, Teo Fonrouge <teo@windtelsoft.com> wrote:
> > The folowing sample runs ok with a standard Harbour build:
>
> Thanks Teo.
>
> Could you kindly remove all HB_HSetAutoAdd( {=>}, .T. ) in tip?

Sure.

2007-10-06 21:28 UTC-0500 Teo Fonrouge (teo/at/windtelsoft/dot/com)
  * contrib/tip/thtml.prg
  * contrib/tip/cgi.prg
  * contrib/tip/httpcln.prg
    * removed HB_HSetAutoAdd, now Harbour hashes by default have AUTOADD on 
assign.


best regards

Teo
From teo at windtelsoft.com  Sun Oct  7 00:07:38 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Sat Oct  6 20:07:56 2007
Subject: [Harbour] 1 $ { 1,2 } worked in beta3 with HB_COMPAT_XHB
In-Reply-To: <9257026e0710061045s32f4b57ey2ea81d1d34768295@mail.gmail.com>
References: <9257026e0710061016l5026ecasa13c41bd7b9082b7@mail.gmail.com>
	<FAF93E25-1614-443C-9EF9-4F1426B8F8E2@syenar.hu>
	<9257026e0710061045s32f4b57ey2ea81d1d34768295@mail.gmail.com>
Message-ID: <200710062307.38378.teo@windtelsoft.com>

On Saturday 06 October 2007 12:45:59 pm Lorenzo Fiorini wrote:
> On 10/6/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
> > This is normal, since this is an xhb-only extension, implemented
> > in xhb lib using operator overloading. You'll need to add
> > #include "xhb.ch" to your code. (or use AScan() :)
>
> Thanks I'll change it to ascan :(
>
> ( just an opinion n $ { a, b } was elegant and clear )

Lorenzo,

If you don't want to include the xhb lib at all you have another alternative 
by using a 'pure' Harbour solution (by using the current SVN: build 7811):

<prg>
#include "hbclass.ch"

FUNCTION Main()
  LOCAL a
  LOCAL h
  LOCAL e

  a := {1,2,3}
  h := {"one"=>1,"three"=>3,"five"=>5}

  FOR EACH e IN h
    ? e,"$", HB_ValToExp(a),"=", e $ a
  NEXT

  ? 'Hash: "one" $ ', HB_ValToExp(h), "=", "one" $ h

  WAIT

RETURN

CLASS HBARRAY FROM HBScalar
  OPERATOR "$$" FUNCTION XHB_INCLUDE
ENDCLASS
</prg>


Best regards

Teo
From teo at windtelsoft.com  Sun Oct  7 00:21:18 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Sat Oct  6 20:21:34 2007
Subject: [Harbour] 1 $ { 1,2 } worked in beta3 with HB_COMPAT_XHB
In-Reply-To: <200710062307.38378.teo@windtelsoft.com>
References: <9257026e0710061016l5026ecasa13c41bd7b9082b7@mail.gmail.com>
	<9257026e0710061045s32f4b57ey2ea81d1d34768295@mail.gmail.com>
	<200710062307.38378.teo@windtelsoft.com>
Message-ID: <200710062321.18866.teo@windtelsoft.com>

On Saturday 06 October 2007 11:07:38 pm Teo Fonrouge wrote:
> On Saturday 06 October 2007 12:45:59 pm Lorenzo Fiorini wrote:
> > On 10/6/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
> > > This is normal, since this is an xhb-only extension, implemented
> > > in xhb lib using operator overloading. You'll need to add
> > > #include "xhb.ch" to your code. (or use AScan() :)
> >
> > Thanks I'll change it to ascan :(
> >
> > ( just an opinion n $ { a, b } was elegant and clear )
>
> Lorenzo,
>
> If you don't want to include the xhb lib at all you have another
> alternative by using a 'pure' Harbour solution (by using the current SVN:
> build 7811):
>
> <prg>
> #include "hbclass.ch"
>
> FUNCTION Main()
>   LOCAL a
>   LOCAL h
>   LOCAL e
>
>   a := {1,2,3}
>   h := {"one"=>1,"three"=>3,"five"=>5}
>
>   FOR EACH e IN h
>     ? e,"$", HB_ValToExp(a),"=", e $ a
>   NEXT
>
>   ? 'Hash: "one" $ ', HB_ValToExp(h), "=", "one" $ h
>
>   WAIT
>
> RETURN
>
> CLASS HBARRAY FROM HBScalar
>   OPERATOR "$$" FUNCTION XHB_INCLUDE
> ENDCLASS
> </prg>


All,

1. The XHB_INCLUDE function was inserted automatically by the linker, no xhb 
lib was declared on the linking command.

2. As you notice, the "$" operator against a hash variable is working without 
doing the overloading trick (in the sample, only the array type has the 
overload "$" operator stuff).

Is this a expected behavior ?


best regards

Teo
From lorenzo.fiorini at gmail.com  Sun Oct  7 03:29:52 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct  6 23:29:57 2007
Subject: [Harbour] Why $ can't be "included" anymore?
In-Reply-To: <DE80FFA6-51C9-4A22-9BFE-EF4167193821@syenar.hu>
References: <9257026e0710061207g2772f2f4gb6b6c58aa2300ba5@mail.gmail.com>
	<66789751-09D1-44FC-BD18-AF15B44FD715@syenar.hu>
	<9257026e0710061231g8633af4mcd24369b29235a0@mail.gmail.com>
	<CC9A1E03-5827-4042-928A-CCC8FDB88BD1@syenar.hu>
	<9257026e0710061322r72d88610lc37b71570005deed@mail.gmail.com>
	<ABAC2550-0DCA-42F9-BC4B-9366D6A79BB1@syenar.hu>
	<9257026e0710061529ha591d3dt14c093d01f0e34f0@mail.gmail.com>
	<DE80FFA6-51C9-4A22-9BFE-EF4167193821@syenar.hu>
Message-ID: <9257026e0710070029i7a816ee5o203a1761ab50f18@mail.gmail.com>

On 10/7/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Probably because ppl who got used to some features in xhb
> doesn't want to lose them, yet they want to migrate to
> Harbour, for "some" reason. So, they're making a permanent
> pressure on this list with requests and complaints. If Harbour
> does such a bad job, why these guys want to migrate?

First of all I'd like to keep this conversation polite and respectful
so it's not matter of me or you but about Harbour.

I "migrated" to Harbour following "Przemyslaw's manifesto" and I'll
follow him even to the hell if he wants to go there :)

> This is not true. Count how many "xhb features" were
> implemented in Harbour. Usually in a higher quality than
> in xhb.

THIS IS THE POINT WHY SOME ARE KEPT AND OTHERS ARE NOT?

> Fact is: xhb uses a fully different development approach.
> Harbour doesn't endorse this. It never did. Harbour's job
> is not to replicate xhb, but to create a C5.2e compiler.

And this is another point: is in 2007 a proper goal clone C52e?
I agree that is was necessary at start but it has been reached time
ago it can't be the rule to decide what is core and what is an
extension.

> If you cannot live without xhb features and don't find
> xhb lib proper enough, use xhb.

I don't call it an xhb feature I call it "coincise and clean syntax".

I can't believe that a clever and experienced developers like you are
don't see the difference between ( 1 $ {1,2} )  and ( ascan( { 1,2 },
1 ) > 0 ) or between
s[i]++ and STUFF( a, i, 1, CHR( ASC( SUBSTR( a, i, 1 ) ) + 1 ) )

> Or you can always use portable Clipper code.

Do you mean never use for each, switch, hashes, is it this the solution?

> It was never a feature in default Harbour core.

Like hashes autoadd.

> It was not in the default core. Nothing was downgraded, you
> need to use xhb lib instead of building you own Harbour compiler
> with an optional #define. This is a technical change.

Not it is a regression.

> Sorry, but it seems to me that you spread FUD here.

I'm not spreading FUD I'm discussing with you about Harbour's future.

> Hashes are not "aliens". You know perfectly well that the
> last bit was just synced with xhb yesterday.

Yes but I still don't understand who ( and how ) decide what is part
of the language and what is an extension.

> Notice however that if we find a shady aspect of some
> Harbour features, especially in the beta stage, things
> _may_ change. Not because it comes from xhb, but because
> the goal is to release a high quality product

Here I can only AGREE.

> meeting our original goals.

Here I can only DISAGREE. C52e compatibility was an 8 years ago goal.

> It seems to me that the motive of your mail is rooted
> in the fact that "$" operator was removed from Harbour.
> ...
> be fixed quickly.

The problem is that today to build my Harbour rtl I need to include a
contrib lib or change my code back to the C52e syntax.

The problem is what will happen with xml, gui, sql, i18n and all the
new things that will be ( hopefully ) added.

Should they be C52e compatible?

best regards,
Lorenzo
From devlist.harbour at gmail.com  Sun Oct  7 03:37:56 2007
From: devlist.harbour at gmail.com (Patrick Mast, xHarbour.com)
Date: Sat Oct  6 23:38:03 2007
Subject: [Harbour] Why $ can't be "included" anymore?
In-Reply-To: <9257026e0710061322r72d88610lc37b71570005deed@mail.gmail.com>
References: <9257026e0710061207g2772f2f4gb6b6c58aa2300ba5@mail.gmail.com>
	<66789751-09D1-44FC-BD18-AF15B44FD715@syenar.hu>
	<9257026e0710061231g8633af4mcd24369b29235a0@mail.gmail.com>
	<CC9A1E03-5827-4042-928A-CCC8FDB88BD1@syenar.hu>
	<9257026e0710061322r72d88610lc37b71570005deed@mail.gmail.com>
Message-ID: <FC3EEEC5-E39F-439D-9CFE-435EE75D1251@GMail.com>

Hello Lorenzo,

>> There is really nothing unsafe by using xhb lib. If you
>> need xhb features (like AINS, ADEL, ASCAN extensions,
>> xhb compatible naming, SUBSTR(), [] operator, $ operator,
>> etcetc), try it and use it.
>
> Sorry but this is not so easy. It's not only a technical question.
> It's also matter of "trustability".
>
> I have a company bet on Harbour

Sorry to jump in, but that's exactly why we started xHarbour.com. To  
give company's professional insurance and support on an open project.  
xHarbour.com assembles a commercial distribution on which it is  
commercially obligated to continues support.

The best part of an open project is that it's open and free to go any  
direction it chooses. An open project does not need to think  
'commercial'. That's where xHarbour.com jumps in.

Patrick
From harbour.01 at syenar.hu  Sun Oct  7 06:50:47 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  7 02:50:56 2007
Subject: [Harbour] Why $ can't be "included" anymore?
In-Reply-To: <9257026e0710070029i7a816ee5o203a1761ab50f18@mail.gmail.com>
References: <9257026e0710061207g2772f2f4gb6b6c58aa2300ba5@mail.gmail.com>
	<66789751-09D1-44FC-BD18-AF15B44FD715@syenar.hu>
	<9257026e0710061231g8633af4mcd24369b29235a0@mail.gmail.com>
	<CC9A1E03-5827-4042-928A-CCC8FDB88BD1@syenar.hu>
	<9257026e0710061322r72d88610lc37b71570005deed@mail.gmail.com>
	<ABAC2550-0DCA-42F9-BC4B-9366D6A79BB1@syenar.hu>
	<9257026e0710061529ha591d3dt14c093d01f0e34f0@mail.gmail.com>
	<DE80FFA6-51C9-4A22-9BFE-EF4167193821@syenar.hu>
	<9257026e0710070029i7a816ee5o203a1761ab50f18@mail.gmail.com>
Message-ID: <5357EE0A-6D28-46FA-9F5A-C33157006249@syenar.hu>

Hi Lorenzo,

>> Probably because ppl who got used to some features in xhb
>> doesn't want to lose them, yet they want to migrate to
>> Harbour, for "some" reason. So, they're making a permanent
>> pressure on this list with requests and complaints. If Harbour
>> does such a bad job, why these guys want to migrate?
>
> First of all I'd like to keep this conversation polite and respectful
> so it's not matter of me or you but about Harbour.
>
> I "migrated" to Harbour following "Przemyslaw's manifesto" and I'll
> follow him even to the hell if he wants to go there :)

Good to hear the reason finally :)

>> This is not true. Count how many "xhb features" were
>> implemented in Harbour. Usually in a higher quality than
>> in xhb.
>
> THIS IS THE POINT WHY SOME ARE KEPT AND OTHERS ARE NOT?

No. I've written several dozen letters about the decision
mechanism and the rules we have. It usually comes down as a
group decision at the end, in line with our goals, preceded
by discussions.

>> Fact is: xhb uses a fully different development approach.
>> Harbour doesn't endorse this. It never did. Harbour's job
>> is not to replicate xhb, but to create a C5.2e compiler.
>
> And this is another point: is in 2007 a proper goal clone C52e?
> I agree that is was necessary at start but it has been reached time
> ago it can't be the rule to decide what is core and what is an
> extension.

This is our goal, you can dispute it, but I don't remember
it had changed.

Also, you know it perfectly well that many extra features
were implemented, now one is not, and all of a sudden the
main goal is disputed.

>> If you cannot live without xhb features and don't find
>> xhb lib proper enough, use xhb.
>
> I don't call it an xhb feature I call it "coincise and clean syntax".
>
> I can't believe that a clever and experienced developers like you are
> don't see the difference between ( 1 $ {1,2} )  and ( ascan( { 1,2 },
> 1 ) > 0 ) or between
> s[i]++ and STUFF( a, i, 1, CHR( ASC( SUBSTR( a, i, 1 ) ) + 1 ) )
>> Or you can always use portable Clipper code.
>
> Do you mean never use for each, switch, hashes, is it this the  
> solution?

This is _one_ possible solution. You need to balance between
your needs. And yes, you can build perfect and working
applications without these features too. BTW, you can
find all of your mentioned features in both projects,
without fear and doubt that they will be deleted. We need
to see the difference between the importance, compatibility
and other impacts of any feature. In practice, there is no
magic formula to tell the final decision about some features
in advance (we have quite some strict rules of thumb though
which help in the process). Finally everyone can have his/her
own opinion on all cases, of course.

>> It was never a feature in default Harbour core.
>
> Like hashes autoadd.

Yes, like the default behaviour of autoadd. Now it is.
Why? You can read the discussion on the list.

>> It was not in the default core. Nothing was downgraded, you
>> need to use xhb lib instead of building you own Harbour compiler
>> with an optional #define. This is a technical change.
>
> Not it is a regression.
>> Sorry, but it seems to me that you spread FUD here.
>
> I'm not spreading FUD I'm discussing with you about Harbour's future.
>> Hashes are not "aliens". You know perfectly well that the
>> last bit was just synced with xhb yesterday.
>
> Yes but I still don't understand who ( and how ) decide what is part
> of the language and what is an extension.

The Harbour group.

>> Notice however that if we find a shady aspect of some
>> Harbour features, especially in the beta stage, things
>> _may_ change. Not because it comes from xhb, but because
>> the goal is to release a high quality product
>
> Here I can only AGREE.
>
>> meeting our original goals.
>
> Here I can only DISAGREE. C52e compatibility was an 8 years ago goal.

Well, that's what resulted in this solid product called
Harbour. I'm not sure if it's wise to dispute the main
goal every time there is a pet feature which happens to
be not included. As for future directions, you can some
possibilities in the last few days e-mails (nothing new
here really, we had most points in TODO since many years).

>> It seems to me that the motive of your mail is rooted
>> in the fact that "$" operator was removed from Harbour.
>> ...
>> be fixed quickly.
>
> The problem is that today to build my Harbour rtl I need to include a
> contrib lib or change my code back to the C52e syntax.

No, you don't; you can add those few lines to your code Teo
suggested. Or yes, you can use a contrib from Harbour,
developed by the same developer who you joined Harbour for.
Plus, you are talking about _one_ feature (which has
a cosmetic significance only IMO).

Now you have at least 4 viable options to solve this problem.

> The problem is what will happen with xml, gui, sql, i18n and all the
> new things that will be ( hopefully ) added.
>
> Should they be C52e compatible?

First of all I think you really need to grasp the concept
of 3rd party libs, we had them in Clipper too, and it was
hugely useful. Second, there are features which gives
real benefits and/or can be implemented in a proper fashion
(by such "legacy" ;) methods like adding new classes/functions
for example), third you hugely exaggerate. Pls read my old
posts, and read the discussions we used to have before
including _any_ new features.

I'd suggest to go back to solve the technical problems
(if we have any), this is starting to take too much time,
which we could spend on more fruitful stuff (like
finishing TBROWSE in Harbour).

Brgds,
Viktor

From dbtopas at dbtopas.lt  Sun Oct  7 10:51:54 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sun Oct  7 06:52:01 2007
Subject: R: [Harbour] is possible a JOIN?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809AA05@SRV02.deltain.net>
References: <aed2b0ec3126f1115f390a730017be29.qmail@home.pl>,
	<d6fbdc2aa8fdbe68ed78bce1db65ac9d.qmail@home.pl>,
	<D814B311-9184-44C6-B8FD-972C197293B5@syenar.hu><47051D18.1384.112D52D@rglab.przesiew.imid.med.pl>	<F8E0A055-473E-4944-ABDA-DD6ED5EB4DA6@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03809AA05@SRV02.deltain.net>
Message-ID: <4708F28A.2080303@dbtopas.lt>

Massimo Belgrano wrote:
> Sorry if i go out of argument
> What hare technical reason for having two different compiler?
> What are core difference?
> Is not possible implement either approach in one product?
> Why not merge the project?
> Why not give advantage of xharbour's documentation, buglist, userbase?

Hello,


I see this kind of mail not the first time, and usually there is no 
answer to it, so I'll try to put point of view.

This is two projects with different leaders, different (but overlapping) 
developer groups. Projects have a little bit different goals, a little 
bit different "points of view". A question "why not to merge" is similar 
to question "why not to merge USSR, USA and all other countries", 
because all the people are the technically the same. So, the question is 
perhaps more "political", and saying "let's merge" is not a solution. 
But I also hope, sometime we will have one project :)


Best regards,
Mindaugas

From lorenzo.fiorini at gmail.com  Sun Oct  7 11:45:07 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Oct  7 07:45:16 2007
Subject: [Harbour] Why $ can't be "included" anymore?
In-Reply-To: <5357EE0A-6D28-46FA-9F5A-C33157006249@syenar.hu>
References: <9257026e0710061207g2772f2f4gb6b6c58aa2300ba5@mail.gmail.com>
	<66789751-09D1-44FC-BD18-AF15B44FD715@syenar.hu>
	<9257026e0710061231g8633af4mcd24369b29235a0@mail.gmail.com>
	<CC9A1E03-5827-4042-928A-CCC8FDB88BD1@syenar.hu>
	<9257026e0710061322r72d88610lc37b71570005deed@mail.gmail.com>
	<ABAC2550-0DCA-42F9-BC4B-9366D6A79BB1@syenar.hu>
	<9257026e0710061529ha591d3dt14c093d01f0e34f0@mail.gmail.com>
	<DE80FFA6-51C9-4A22-9BFE-EF4167193821@syenar.hu>
	<9257026e0710070029i7a816ee5o203a1761ab50f18@mail.gmail.com>
	<5357EE0A-6D28-46FA-9F5A-C33157006249@syenar.hu>
Message-ID: <9257026e0710070845n1e7a9649vdede5673df7bfb46@mail.gmail.com>

On 10/7/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> No. I've written several dozen letters about the decision
> mechanism and the rules we have. It usually comes down as a
> group decision at the end, in line with our goals, preceded
> by discussions.

Sorry I can't find any discussion about it using gmail search or google desktop.

The only reference I can find is the Przemyslaw answer to a message of mine:

> - XHB=IN HB=$

Not true. XHB can use IN as synonym of $.
IN in xHarbour does not make any other job then $ and is translated
by lexer to $.
$ in xHarbour has additional functionality. It can be used also for
ARRAYs and HASHes.
In Harbour such functionality is enabled by HB_COMPAT_XHB though
here I think that it may be good to enable it by default too.

> This is our goal, you can dispute it, but I don't remember
> it had changed.
> ...
> Also, you know it perfectly well that many extra features
> were implemented, now one is not, and all of a sudden the
> main goal is disputed.

Maybe formally not but substantially it is if not how for each,
switch, hashes, ...  fit in the original goal? It sems to me that the
decision process is highly unformal ( as it should be ) and we cannot
recall the stated goal "randomly".

> Yes, like the default behaviour of autoadd. Now it is.

And why 1 $ { 1,2 } can't be also?

> Plus, you are talking about _one_ feature (which has
> a cosmetic significance only IMO).

I don't complain about hb_enumindex() since it can be fixed at link
time but every $ that we'll miss will be found by the users at RT. But
the main point is another I don't see the reason to go back to ascan
for such a simple thing.

> First of all I think you really need to grasp the concept
> of 3rd party libs, we had them in Clipper too, and it was
> hugely useful.

But the attitude is the same.

Look at TIP for example. Przemyslaw ported it from xHarbour with the
minimal necessary changes. Then came someone that "changed" it and
broke the ftp. The problem was tracked and fixed by Patrick Mast in
xHarbour and I merged ( locally ) his fix but in the meanwhile someone
who "don't use it" changed it adding "please test".
Why should I retest my apps every time a developer that don't use some
code want to rewrite it with a "better syntax".

Another example today contrib/gd does not work anymore since it check
for HB_CONTRIB_XHB.

I'm not complaining about mistakes, I do many of them every day, but
this tells me that contrib is indeed second class code and everyone
think it can be changed at will without any test.

So this length discussion is not about "$" but about Harbour future directions.

I am developing software since 1980 and I've seen so many things that
usually I prefer to avoid such discussions but this time is too
important and I cannot give up or at least I'll fight as long as I
can.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Sun Oct  7 12:07:54 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Oct  7 08:07:58 2007
Subject: [Harbour] I ask to restore include/hbcompat.ch and few lines in
	hvm.c
Message-ID: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>

include/hbcompat.ch is enough in many cases and it allows to
"translate" some language differences without introducing "wider"
compatibility layers like contrib/xhb.

Also it can be easily included in xHarbour. Patrick?

If I'm correct, below there are the lines necessaries to implement 1 $ { 1,2 }

I think they can be restored without breaking anything.

Any comment?

best regards,
Lorenzo

...
 else if( HB_IS_ARRAY( pItem2 ) )
   {
      BOOL fResult = hb_arrayScan( pItem2, pItem1, NULL, NULL, TRUE ) != 0;

      hb_stackPop();
      hb_stackPop();
      hb_vmPushLogical( fResult );
   }
...
From lorenzo.fiorini at gmail.com  Sun Oct  7 12:19:37 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Oct  7 08:19:41 2007
Subject: [Harbour] hb_enumindex() and hb_autoadd()
In-Reply-To: <200710062133.14852.teo@windtelsoft.com>
References: <9257026e0710060720l19e0db87pc6cdb1cfea6630bc@mail.gmail.com>
	<200710061114.51484.teo@windtelsoft.com>
	<9257026e0710061026l4cf8d766qf651728bfae31b3d@mail.gmail.com>
	<200710062133.14852.teo@windtelsoft.com>
Message-ID: <9257026e0710070919v648d9b8fi3eb7498d34c7f58e@mail.gmail.com>

On 10/7/07, Teo Fonrouge <teo@windtelsoft.com> wrote:

> 2007-10-06 21:28 UTC-0500 Teo Fonrouge (teo/at/windtelsoft/dot/com)
>   * contrib/tip/thtml.prg
>   * contrib/tip/cgi.prg
>   * contrib/tip/httpcln.prg
>     * removed HB_HSetAutoAdd, now Harbour hashes by default have AUTOADD on
> assign.

Many thanks,

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sun Oct  7 12:57:15 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  7 08:57:24 2007
Subject: [Harbour] Why $ can't be "included" anymore?
In-Reply-To: <9257026e0710070845n1e7a9649vdede5673df7bfb46@mail.gmail.com>
References: <9257026e0710061207g2772f2f4gb6b6c58aa2300ba5@mail.gmail.com>
	<66789751-09D1-44FC-BD18-AF15B44FD715@syenar.hu>
	<9257026e0710061231g8633af4mcd24369b29235a0@mail.gmail.com>
	<CC9A1E03-5827-4042-928A-CCC8FDB88BD1@syenar.hu>
	<9257026e0710061322r72d88610lc37b71570005deed@mail.gmail.com>
	<ABAC2550-0DCA-42F9-BC4B-9366D6A79BB1@syenar.hu>
	<9257026e0710061529ha591d3dt14c093d01f0e34f0@mail.gmail.com>
	<DE80FFA6-51C9-4A22-9BFE-EF4167193821@syenar.hu>
	<9257026e0710070029i7a816ee5o203a1761ab50f18@mail.gmail.com>
	<5357EE0A-6D28-46FA-9F5A-C33157006249@syenar.hu>
	<9257026e0710070845n1e7a9649vdede5673df7bfb46@mail.gmail.com>
Message-ID: <EBFC8AB6-C325-43E6-B6D1-C90184D3D614@syenar.hu>

>> Yes, like the default behaviour of autoadd. Now it is.
>
> And why 1 $ { 1,2 } can't be also?
>
>> Plus, you are talking about _one_ feature (which has
>> a cosmetic significance only IMO).
>
> I don't complain about hb_enumindex() since it can be fixed at link
> time but every $ that we'll miss will be found by the users at RT. But
> the main point is another I don't see the reason to go back to ascan
> for such a simple thing.

That is exactly why I'm strongly against it. I can only repeat
myself: Extending features in such an _invisible_ way _is_ dangerous.
Plus it breaks compatibility, too.

--
local a := {}
? 1 $ a
--

Will give different results in CA-Clipper 5.2 and in Harbour.

Easy to find it in the source? No, it's the most annoying
thing to find, as you've just said.

> Look at TIP for example. Przemyslaw ported it from xHarbour with the
> minimal necessary changes. Then came someone that "changed" it and
> broke the ftp. The problem was tracked and fixed by Patrick Mast in
> xHarbour and I merged ( locally ) his fix but in the meanwhile someone
> who "don't use it" changed it adding "please test".
> Why should I retest my apps every time a developer that don't use some
> code want to rewrite it with a "better syntax".

That's what I was referring to when I told to the list that
I didn't want to "step on anybody's toes". Apparently, it was
your toe.

To me though it looked like the group seemed to favour portable
code over the xhb lib (or HB_COMPAT_XHB) requirement.

If you have a fix for a problem, you could help by making
it public. Just an idea.

> Another example today contrib/gd does not work anymore since it check
> for HB_CONTRIB_XHB.

Someone will need to fix this then, this won't be the first
time such thing happened in Harbour.

Maybe you already have a fix for it? How about publishing it?

> I'm not complaining about mistakes, I do many of them every day, but
> this tells me that contrib is indeed second class code and everyone
> think it can be changed at will without any test.

"Second class" by your definition. Who told you that?

This is an open source project, every contrib and every developer
has the right to create as high quality code as he/she wishes,
_even in contrib_.

If you find that some areas are not developed enough, you
can jump in _anytime_ and fix those problems. In contrib you
even have an almost full freedom to do what you want.

Did you try to do this yet?

Ppl in Harbour have contributed and are contributing huge amounts
of valuable resources from their own, for no direct return.
Understandably, they will first deal with those things which
are really important for them. If this doesn't happen to be
inline with your own priorities, well, you can always contribute.

> So this length discussion is not about "$" but about Harbour future  
> directions.

Do you want to change Harbour's direction towards the xhb direction?

If so, I think you're simply on the wrong mailing list.

> I am developing software since 1980 and I've seen so many things that
> usually I prefer to avoid such discussions but this time is too
> important and I cannot give up or at least I'll fight as long as I
> can.

However you decide Lorenzo.

I really miss that you don't seem to reflect on any of the
positive suggestions others and I have told you, instead you're
doing your fight for the "$" operator, after admitting that you
didn't even follow the latest motives and news in Harbour.

Please reread my suggestions, reread the mails from the past
few weeks (if you haven't done so so far), maybe try those
suggestions and also understand that this is not xhb.

Brgds,
Viktor

From dbtopas at dbtopas.lt  Sun Oct  7 13:02:10 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sun Oct  7 09:02:09 2007
Subject: [Harbour] I ask to restore include/hbcompat.ch and few lines
	in	hvm.c
In-Reply-To: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>
References: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>
Message-ID: <47091112.5080900@dbtopas.lt>

Lorenzo Fiorini wrote:
> If I'm correct, below there are the lines necessaries to implement 1 $ { 1,2 }
> I think they can be restored without breaking anything.

Hello,


it is not Clipper compatible. Clipper generates RTE in this case. Since 
Clipper does not have hashes, KEY $ HASH is undefined in Clipper and 
thus added to Harbour. But I also find ITEM $ ARRAY useful. But it's not 
Clipper compatible :)

In general I think we must have some clear idea, what could be added to 
Harbour, and what is bad for the language. What sould be inside core, 
and what should be an external library. Many arguments about 
compatibility is empty talk, because Harbour have many extensions and 
code is not compatible backward to Clipper anyway. I think we can talk 
only about forward compatibility, we still are 99% compatible.


Best regards,
Mindaugas

From miguelangel at marchuet.net  Sun Oct  7 13:18:12 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Sun Oct  7 09:18:17 2007
Subject: [Harbour] problem with RASCAN
References: <47051CE8.6010408@marchuet.net>
	<20071005182728.GA6247@localhost.localdomain>
Message-ID: <005101c80906$0af96770$d801a8c0@ingachka>

the correct result is 1 and returns 0 in Harbour, I'm using XHB.Lib
compatible.

with the described array

RAScan(  a, {|e| !e[3] } )

returns 0 when the correct is 1.

Best regards,
Miguel Angel marchuet

----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Friday, October 05, 2007 8:27 PM
Subject: Re: [Harbour] problem with RASCAN


> On Thu, 04 Oct 2007, Miguel Angel Marchuet wrote:
> > {
> >     [1] => { Array of 3 Items }
> >       Type='A' ->
> >       {
> >        [1] => "700000001",
> >        [2] =>      500.00,
> >        [3] => .F.
> >       },
> >     [2] => { Array of 3 Items }
> >       Type='A' ->
> >       {
> >        [1] => "437000000",
> >        [2] =>      431.03,
> >        [3] => .T.
> >       }
> >    }
> >
> > HB_RASCAN(  a, {|e| !e[3] } )
> > returns 0
>
> And what is the problem you are talking about?
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> __________ Informaci?n de NOD32, revisi?n 2335 (20070616) __________
>
> Este mensaje ha sido analizado con NOD32 antivirus system
> http://www.nod32.com
>
>

From harbour.01 at syenar.hu  Sun Oct  7 13:19:23 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  7 09:19:32 2007
Subject: [Harbour] I ask to restore include/hbcompat.ch and few lines in
	hvm.c
In-Reply-To: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>
References: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>
Message-ID: <FCC49AE6-3773-484F-BFC5-7FAC0583C687@syenar.hu>

> include/hbcompat.ch is enough in many cases and it allows to
> "translate" some language differences without introducing "wider"
> compatibility layers like contrib/xhb.

The file has a new place in the repository:

was: \include\hbcompat.ch
is : \contrib\xhb\hbcompat.ch

However, for binary installations including xhb lib
(and after a 'make install' in xhb), hbcompat.ch
will be in the final \include\ dir:

Exactly where it was.

For a proper separation of components and compatibility
layers, the repository location had to be changed.
Notice that hbcompat.ch is now referring to some symbols
found in xhb.lib (for example for extended AINS()).


With some #define rearrangment it can be done that
hbcompat.ch would only contain stuff which doesn't need
the lib itself. (hbcompat.ch is now a stub, and if we
move stuff not requiring xhb lib into it from xhb.ch,
and #include hbcompat.ch from xhb.ch, this might
solve your problem - probably -, similar was suggested
by Przemek as "level1 / level2" xhb compatibility.)

Brgds,
Viktor

From mpaliwoda at interia.pl  Sun Oct  7 13:23:56 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sun Oct  7 09:24:06 2007
Subject: [Harbour] I ask to restore include/hbcompat.ch and few lines
	in	hvm.c
In-Reply-To: <47091112.5080900@dbtopas.lt>
References: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>
	<47091112.5080900@dbtopas.lt>
Message-ID: <4709162C.4030906@interia.pl>

Hello Mindaugas,

>  ... Many arguments about 
> compatibility is empty talk, because Harbour have many extensions and 
> code is not compatible backward to Clipper anyway. I think we can talk 
> only about forward compatibility, we still are 99% compatible.

Not quite true. We still can write portable code in
Harbour if we do not use introduced extended code syntax
constructs like FOR EACH. If we unintentionaly use them
we will get a compile time error.

However if we use constructs like
      1 $ {1,2}
or
      s[2]++ for strings
we will NOT get compile time error
but only RTE, or much much worse -
unexpected behavior.

This is a HUGE difference to me. "1 $ {1,2}",
"atrings as array", "extended ADel() and AIns()"
are really "dangerous" to me.

-- 

Marek


----------------------------------------------------------------------
Jak skompromitowac Wisniewskiego? 
Zobacz >>> http://link.interia.pl/f1be7

From lorenzo.fiorini at gmail.com  Sun Oct  7 13:46:25 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Oct  7 09:46:29 2007
Subject: [Harbour] Why $ can't be "included" anymore?
In-Reply-To: <EBFC8AB6-C325-43E6-B6D1-C90184D3D614@syenar.hu>
References: <9257026e0710061207g2772f2f4gb6b6c58aa2300ba5@mail.gmail.com>
	<CC9A1E03-5827-4042-928A-CCC8FDB88BD1@syenar.hu>
	<9257026e0710061322r72d88610lc37b71570005deed@mail.gmail.com>
	<ABAC2550-0DCA-42F9-BC4B-9366D6A79BB1@syenar.hu>
	<9257026e0710061529ha591d3dt14c093d01f0e34f0@mail.gmail.com>
	<DE80FFA6-51C9-4A22-9BFE-EF4167193821@syenar.hu>
	<9257026e0710070029i7a816ee5o203a1761ab50f18@mail.gmail.com>
	<5357EE0A-6D28-46FA-9F5A-C33157006249@syenar.hu>
	<9257026e0710070845n1e7a9649vdede5673df7bfb46@mail.gmail.com>
	<EBFC8AB6-C325-43E6-B6D1-C90184D3D614@syenar.hu>
Message-ID: <9257026e0710071046yf7ebfa5m435cd2cc9eca5c90@mail.gmail.com>

On 10/7/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> That is exactly why I'm strongly against it. I can only repeat
> myself: Extending features in such an _invisible_ way _is_ dangerous.
> Plus it breaks compatibility, too.
>
> --
> local a := {}
> ? 1 $ a
> --
>
> Will give different results in CA-Clipper 5.2 and in Harbour.

Ok but compatibility should work from Clipper to Harbour not the
"contrary" if not Harbour will never be different. We know that every
time we use for each, switch, {=>} we'll never build that app with
C53b.

> That's what I was referring to when I told to the list that
> I didn't want to "step on anybody's toes". Apparently, it was
> your toe.

Sorry you didn't break anything, I used that example simply to show
that contrib is "by definition" less safe. For example I can't even
build rddads, mysql, ado so I can't say if my modifications could
break code there.

> To me though it looked like the group seemed to favour portable
> code over the xhb lib (or HB_COMPAT_XHB) requirement.

I have nothing against it simply I wanted to show that code exchange
between Harbour and xHarbour have some advantages also. TIP and hashes
were born there like 80% of xHarbour was born in Harbour so for me are
the two faces of the same coin.

> Someone will need to fix this then, this won't be the first
> time such thing happened in Harbour.

Again this was only an example to show the "volatility" of contrib.

> "Second class" by your definition. Who told you that?

The examples before and this is not Harbour specific contrib dirs are
what the name imply so having to use a contrib to build the core is
"unsafe" for me.

> Ppl in Harbour have contributed and are contributing huge amounts
> of valuable resources from their own, for no direct return.
> Understandably, they will first deal with those things which
> are really important for them. If this doesn't happen to be
> inline with your own priorities, well, you can always contribute.

If you look at xHarbour ChangeLogs you'll see that I'm contributing
time and code since years. Here I'm still trying to understand "the
rules" to avoid "mistakes".

> Do you want to change Harbour's direction towards the xhb direction?
> If so, I think you're simply on the wrong mailing list.

Absolutely not. I'm here since the beginning and I know that Harbour
and xHarbour will never merge but I still think that we should try to
keep the "possible" compatibility.

> I really miss that you don't seem to reflect on any of the
> positive suggestions others and I have told you, instead you're
> doing your fight for the "$" operator, after admitting that you
> didn't even follow the latest motives and news in Harbour.

Yes, I was "wrongly" convinced that "$" array was "left" in the core.
I found the "problem" when I sync my local repository and I started to
fix it as I said but doing that I've also found how is boring and
dangerous to replace a simple ( val $ Array ) into a ascan( ... ) so I
asked why.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Sun Oct  7 13:56:49 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Oct  7 09:56:54 2007
Subject: [Harbour] I ask to restore include/hbcompat.ch and few lines in
	hvm.c
In-Reply-To: <FCC49AE6-3773-484F-BFC5-7FAC0583C687@syenar.hu>
References: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>
	<FCC49AE6-3773-484F-BFC5-7FAC0583C687@syenar.hu>
Message-ID: <9257026e0710071056w51c4b78ej37c7ddcbcb6405e9@mail.gmail.com>

On 10/7/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> With some #define rearrangment it can be done that
> hbcompat.ch would only contain stuff which doesn't need
> the lib itself. (hbcompat.ch is now a stub, and if we
> move stuff not requiring xhb lib into it from xhb.ch,
> and #include hbcompat.ch from xhb.ch, this might
> solve your problem - probably -, similar was suggested
> by Przemek as "level1 / level2" xhb compatibility.)

I agree with this level1 / level2.

In the 1 level there things like:
switch default vs otherwise
HB_* vs *
throw
try catch
...
these don't need changes at runtime since they are only different way
to call the same things.

In the level 2 there are things like:
strings as arrays
with
hb_enumindex
...
that need deeper support

I also think that hblog and hbxml should be in their own contrib/xxx dir.
AFAIK they don't require xhb and they can ( should ) be changed and
extended in the future.

For me It is important to have hbcompat.ch without request xhb lib in
include at "build" time because if someone ( like me ) have some
xHarbour ported rtl prgs they need to include it ( as it was before ).

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Sun Oct  7 14:16:34 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Oct  7 10:16:38 2007
Subject: [Harbour] I ask to restore include/hbcompat.ch and few lines in
	hvm.c
In-Reply-To: <4709162C.4030906@interia.pl>
References: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>
	<47091112.5080900@dbtopas.lt> <4709162C.4030906@interia.pl>
Message-ID: <9257026e0710071116g5fb5aa20mc2341b261bf01294@mail.gmail.com>

On 10/7/07, Marek Paliwoda <mpaliwoda@interia.pl> wrote:

> This is a HUGE difference to me. "1 $ {1,2}",
> "atrings as array", "extended ADel() and AIns()"
> are really "dangerous" to me.

You are right but for how many years we'll need to keep "strict"
backward compatibility?
And how much will this limit the future of Harbour?

I'm not a fan of "new for new" but we should also try to create a
language "interesting" for developers that come from other languages
like PHP, Python, Ruby if not the risk is to remain "the Clipper
compatible compiler".

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sun Oct  7 14:19:37 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  7 10:19:47 2007
Subject: [Harbour] I ask to restore include/hbcompat.ch and few lines in
	hvm.c
In-Reply-To: <9257026e0710071056w51c4b78ej37c7ddcbcb6405e9@mail.gmail.com>
References: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>
	<FCC49AE6-3773-484F-BFC5-7FAC0583C687@syenar.hu>
	<9257026e0710071056w51c4b78ej37c7ddcbcb6405e9@mail.gmail.com>
Message-ID: <B32DBABD-D18E-43B0-8B6B-21BB85BC2190@syenar.hu>

> I agree with this level1 / level2.
>
> In the 1 level there things like:
> switch default vs otherwise
> HB_* vs *
> throw
> try catch
> ...
> these don't need changes at runtime since they are only different way
> to call the same things.
>
> In the level 2 there are things like:
> strings as arrays
> with
> hb_enumindex
> ...
> that need deeper suppor
> t

I would find it cleaner to not add any such complexity,
but for me it's good either way.

level1: PP only
level2: PP + stuffs which need the lib

> I also think that hblog and hbxml should be in their own contrib/ 
> xxx dir.
> AFAIK they don't require xhb and they can ( should ) be changed and
> extended in the future.

For log I don't think so. For XML, maybe, but I'd for sure give it
a different name, because there might be other XML implementations
in the future, so something like HBMXML or MXML would be a better
fit. For the time being it doesn't make too much different from
a users POV.

> For me It is important to have hbcompat.ch without request xhb lib in
> include at "build" time because if someone ( like me ) have some
> xHarbour ported rtl prgs they need to include it ( as it was before ).

Sorry but I don't understand this.

You seem to fear a lot from including xhb lib. But why?
It doesn't break your code in any ways, it doesn't make
it slower either. So why is it a problem to be included?

Brgds,
Viktor

From dbtopas at dbtopas.lt  Sun Oct  7 15:09:50 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sun Oct  7 11:09:52 2007
Subject: [Harbour] I ask to restore include/hbcompat.ch and few lines
	in	hvm.c
In-Reply-To: <4709162C.4030906@interia.pl>
References: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>	<47091112.5080900@dbtopas.lt>
	<4709162C.4030906@interia.pl>
Message-ID: <47092EFE.4070001@dbtopas.lt>

Marek Paliwoda wrote:
>>  ... Many arguments about compatibility is empty talk, because Harbour 
>> have many extensions and code is not compatible backward to Clipper 
>> anyway. I think we can talk only about forward compatibility, we still 
>> are 99% compatible.
> 
> Not quite true. We still can write portable code in
> Harbour if we do not use introduced extended code syntax
> constructs like FOR EACH. If we unintentionaly use them
> we will get a compile time error.
> 
> However if we use constructs like
>      1 $ {1,2}
> or
>      s[2]++ for strings
> we will NOT get compile time error
> but only RTE, or much much worse -
> unexpected behavior.

Hello,


quite a good decision rule for extension being accepted to Harbour: code 
compiled with Clipper should give compile error.

Perhaps this rule should to be applied only for language syntax 
extension. Otherwise we should drop hashes because Clipper does not give 
compile time error.

OK, so if this rule is used, my proposal of
   FOR nI := 1 TO LEN(aI) FIXED
is useful and passes "decision rule". Any more comments on "decision 
rule" for syntax extensions? :)

It's not that I'm trying to push for FIXED support. I can live without 
it. I'm just trying to make myself and other understand "what extension 
is bad and what is good". I haven't wrote any line of code with FIXED, 
except test of the speed. Implementation of FIXED was a good practice on 
Bison syntax for me. If someone is interested in speed test results, the 
simple loop:
   FOR nI := 1 TO LEN(aI) FIXED
   NEXT
gives 2.5 seconds, against 7 seconds without FIXED.


Best regards,
Mindaugas


P.S. I also want to say my solution for missing extensions of Harbour. I 
can live with most of Harbour variations, and program the way I like at 
the same time.
I want to use extended version of ADel() and AIns() because I really do 
not like to add one more ASize() or HB_ prefix to these functions. I 
will overload public ADel() function with my own. If I'll decide to use 
ITEM $ ARRAY, I'll add operator overload with a tiny time overhead.
I've wrote a lot of code, I can write one more tiny module 
"my_own_compat" containing 3 functions. I just need to not use my own 
extensions for Harbour code itself, but I see no problem here.
I want to find the best solution for the project and the best solution 
for myself. It's not necessary for these solutions to be the same.


From mpaliwoda at interia.pl  Sun Oct  7 15:59:32 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sun Oct  7 11:59:38 2007
Subject: [Harbour] I ask to restore include/hbcompat.ch and few lines
	in	hvm.c
In-Reply-To: <47092EFE.4070001@dbtopas.lt>
References: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>	<47091112.5080900@dbtopas.lt>	<4709162C.4030906@interia.pl>
	<47092EFE.4070001@dbtopas.lt>
Message-ID: <47093AA4.7090602@interia.pl>

Hi Mindaugas,

> quite a good decision rule for extension being accepted to Harbour: code 
> compiled with Clipper should give compile error.
> 
> Perhaps this rule should to be applied only for language syntax 
> extension. Otherwise we should drop hashes because Clipper does not give 
> compile time error.

Well, hashes are a problem indeed :),
but try to compile the following with
Clipper :

PROCEDURE Main()
     LOCAL h := {"one"=>1,"three"=>3,"five"=>5}
RETURN

;-)

> OK, so if this rule is used, my proposal of
>   FOR nI := 1 TO LEN(aI) FIXED
> is useful and passes "decision rule". Any more comments on "decision 
> rule" for syntax extensions? :)
> 
> It's not that I'm trying to push for FIXED support. I can live without 
> it. I'm just trying to make myself and other understand "what extension 
> is bad and what is good". I haven't wrote any line of code with FIXED, 
> except test of the speed. Implementation of FIXED was a good practice on 
> Bison syntax for me. If someone is interested in speed test results, the 
> simple loop:
>   FOR nI := 1 TO LEN(aI) FIXED
>   NEXT
> gives 2.5 seconds, against 7 seconds without FIXED.

Indeed the question about "what extension is bad and what is good"
is valid, but I don't think there is one obvious answer.

-- 

Marek


----------------------------------------------------------------------
Jaros?aw Drob, Przyjdziemy i Spie***ymy - poznaj kandydata!
Kliknij >>> http://link.interia.pl/f1bef

From mpaliwoda at interia.pl  Sun Oct  7 16:00:09 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sun Oct  7 12:00:24 2007
Subject: [Harbour] I ask to restore include/hbcompat.ch and few lines
	in	hvm.c
In-Reply-To: <9257026e0710071116g5fb5aa20mc2341b261bf01294@mail.gmail.com>
References: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>	<47091112.5080900@dbtopas.lt>
	<4709162C.4030906@interia.pl>
	<9257026e0710071116g5fb5aa20mc2341b261bf01294@mail.gmail.com>
Message-ID: <47093AC9.1040000@interia.pl>

Hi Lorenzo,

>> This is a HUGE difference to me. "1 $ {1,2}",
>> "atrings as array", "extended ADel() and AIns()"
>> are really "dangerous" to me.
> 
> You are right but for how many years we'll need to keep "strict"
> backward compatibility?
> And how much will this limit the future of Harbour?

I doubt extending $ operator, introducing "strings as array" or
extending pure Clipper RTL ADel() and AIns() will "limit the future
of Harbour" in _any_ way. Really.

> I'm not a fan of "new for new" but we should also try to create a
> language "interesting" for developers that come from other languages
> like PHP, Python, Ruby if not the risk is to remain "the Clipper
> compatible compiler".

And you want to tell me that extending $ operator, introducing
"strings as array" or extending pure Clipper RTL ADel() and AIns()
is a way to do it ? Sorry, I doubt. I would rather say that the
concept of "$" operator or "strings as array" concept might look
quite "strange" to C#, VB or JavaScript.

OK, this is my last post regardin "extensions" problem :)

-- 

Marek


----------------------------------------------------------------------
Jak skompromitowac Wisniewskiego? 
Zobacz >>> http://link.interia.pl/f1be7

From lorenzo.fiorini at gmail.com  Sun Oct  7 16:10:33 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Oct  7 12:10:37 2007
Subject: [Harbour] I ask to restore include/hbcompat.ch and few lines in
	hvm.c
In-Reply-To: <47092EFE.4070001@dbtopas.lt>
References: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>
	<47091112.5080900@dbtopas.lt> <4709162C.4030906@interia.pl>
	<47092EFE.4070001@dbtopas.lt>
Message-ID: <9257026e0710071310g707ac646i29f0cfbea3140b64@mail.gmail.com>

On 10/7/07, Mindaugas Kavaliauskas <dbtopas@dbtopas.lt> wrote:

> I want to use extended version of ADel() and AIns() because I really do
> not like to add one more ASize() or HB_ prefix to these functions. I
> will overload public ADel() function with my own. If I'll decide to use
> ITEM $ ARRAY, I'll add operator overload with a tiny time overhead.
> I've wrote a lot of code, I can write one more tiny module
> "my_own_compat" containing 3 functions. I just need to not use my own
> extensions for Harbour code itself, but I see no problem here.
> I want to find the best solution for the project and the best solution
> for myself. It's not necessary for these solutions to be the same.

Yes, for a skilled developer there are many possibilities but imagine
a newbie that read the doc. I have trained PHP developers to use
Harbour and I know how is difficult to remember things like HB_.

Also when you develop in team or using contracttors things like
operators overloading and "personal" compatibility layers are simply
not allowed.
Imagine what happen if every developer would redefine language standards.

best regards,
Lorenzo
From info at fsgiudice.com  Sun Oct  7 16:11:28 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Oct  7 12:11:53 2007
Subject: [Harbour] Help on use of MSYS + MinGW
References: <9257026e0710061207g2772f2f4gb6b6c58aa2300ba5@mail.gmail.com>
	<66789751-09D1-44FC-BD18-AF15B44FD715@syenar.hu>
	<9257026e0710061231g8633af4mcd24369b29235a0@mail.gmail.com>
	<CC9A1E03-5827-4042-928A-CCC8FDB88BD1@syenar.hu>
	<9257026e0710061322r72d88610lc37b71570005deed@mail.gmail.com>
	<ABAC2550-0DCA-42F9-BC4B-9366D6A79BB1@syenar.hu>
	<9257026e0710061529ha591d3dt14c093d01f0e34f0@mail.gmail.com>
	<001d01c80871$290ddc40$b50aa8c0@ASUSFSG>
	<9257026e0710062336p22ab0d46kfc81613ff30d64c9@mail.gmail.com>
Message-ID: <000401c8091e$413b66e0$b50aa8c0@ASUSFSG>

Hi Lorenzo,

----- Original Message ----- 
From: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
To: "Francesco Saverio Giudice" <info@fsgiudice.com>
Sent: Sunday, October 07, 2007 8:36 AM
Subject: Re: [Harbour] Help on use of MSYS + MinGW


>
> Sorry I don't boot Windows since a lot of time.
>
> Now I "cross build" under Linux that is I create the Windows binaries
> directly from Linux but I'll do some tests.
>

it seems that don't takes any command line parameters.

>> Do you have a shared partition between Windows and Linux ?
>> If yes, how do you have organized your environment to work exactly on 
>> same
>> files ?
>
> My disk have a Windows FAT32 partition and two ext3 ones: one for FC7
> ( my main env ) and one for Ubuntu 7.10 ( to test things on a Debian
> like distro ).
>
> I mount the fat32 partition in /mnt/win_c and I symlink c:\dvl (
> /mnt/win_c/dvl ) into my home. That's all.
>
> In the same way I share FireFox and Thunderbird profiles between the
> thre Windows, FC/ and Ubuntu.
>
> In the ~/dvl I have cvs subdir with my local harbour, xharbour, hwgui
> dirs and rc with my apps.
>
> The main "problem" is get rid of the bat files but when you start to
> use bash scripts you'll never come back.
>
> Let me know if I can give you more specific help.
>

I have changed way and I have begin to test cross-compiling under linux 
directly.
And after a lot of troubles I have obtained my firt hello.exe under linux  !
Now I'm doing some test with gd that you said is actually broken.
How can I build gdtestcls.exe ?
I'm trying with
hbmk -lhbgd -lgd -L/usr/lib gdtestcls

but I got:

Harbour devel build 1.1-1 Intl.
Copyright 1999-2007, http://www.harbour-project.org/
Compiling 'gdtestcls.prg'...
Lines 581, Functions/Procedures 2
Generating C source output to 'gdtestcls.c'... Done.
/usr/local/mingw32-harbour/lib/harbour/libhbgd.a(gdwrp.o):gdwrp.c:(.text+0x1d): 
undefined reference to `__imp__gdImageDestroy@4'
/usr/local/mingw32-harbour/lib/harbour/libhbgd.a(gdwrp.o):gdwrp.c:(.text+0x445): 
undefined reference to `__imp__gdImageCreateFromJpegPtr@8'
....
it seems that lib are incompatible with cross-compiling. Isn't it ?

Thank you for your time.

Best Regards

Francesco

From harbour.01 at syenar.hu  Sun Oct  7 16:52:06 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct  7 12:52:14 2007
Subject: [Harbour] I ask to restore include/hbcompat.ch and few lines
	in	hvm.c
In-Reply-To: <47093AA4.7090602@interia.pl>
References: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>	<47091112.5080900@dbtopas.lt>	<4709162C.4030906@interia.pl>
	<47092EFE.4070001@dbtopas.lt> <47093AA4.7090602@interia.pl>
Message-ID: <8565AA4F-910C-41A4-807B-3DCF38E48A85@syenar.hu>

It's enough to imagine what would happen if the Mono project
would suddenly start to add "cool" and "exciting" features all
over the C# language. Would that be for the benefit for the whole
C# ecosystem? I doubt. If the feature is such cool and Mono
such powerful that they could make MS to implement it too,
maybe, but this is "russian roulette", and would be the dumbest
idea the Mono project could do. Okey, the analogy is far from
perfect, but maybe you get the idea.

Or, have a look at C (or C++) compilers. Even the simplest things
like a differently named or missing function, a misplaced or misnamed
.h file can cause _tons_ of time wasting for millions of developers,
for the whole lifetime of the language. This is a huge waste.

Just take a look at our C code (which is relatively clean BTW).
Or look at any multiplatform C project. This is why "autoconf"
has born, the ugliest hack a language can get.

Is this where we want to take the Clipper language? I definitely
don't.

Developing a language needs huge responsibility and a big chunk
of respect towards the language. We should look further than our
short-term needs and "looks cool" features.

Is "$" / c[] / FIXED / & / IN _really more_ important than let's
say unicode support?

This is also my last e-mail regarding this new "extension hurricane".
Let's pls concentrate on the final release and the more important
points. /harbour/TODO is a good starting point.

I hope to finish TBROWSE() in the next 1-2 if time an energy allows.

Brgds,
Viktor

On 2007.10.07., at 21:59, Marek Paliwoda wrote:

> Hi Mindaugas,
>
>> quite a good decision rule for extension being accepted to  
>> Harbour: code compiled with Clipper should give compile error.
>> Perhaps this rule should to be applied only for language syntax  
>> extension. Otherwise we should drop hashes because Clipper does  
>> not give compile time error.
>
> Well, hashes are a problem indeed :),
> but try to compile the following with
> Clipper :
>
> PROCEDURE Main()
>     LOCAL h := {"one"=>1,"three"=>3,"five"=>5}
> RETURN
>
> ;-)
>
>> OK, so if this rule is used, my proposal of
>>   FOR nI := 1 TO LEN(aI) FIXED
>> is useful and passes "decision rule". Any more comments on  
>> "decision rule" for syntax extensions? :)
>> It's not that I'm trying to push for FIXED support. I can live  
>> without it. I'm just trying to make myself and other understand  
>> "what extension is bad and what is good". I haven't wrote any line  
>> of code with FIXED, except test of the speed. Implementation of  
>> FIXED was a good practice on Bison syntax for me. If someone is  
>> interested in speed test results, the simple loop:
>>   FOR nI := 1 TO LEN(aI) FIXED
>>   NEXT
>> gives 2.5 seconds, against 7 seconds without FIXED.
>
> Indeed the question about "what extension is bad and what is good"
> is valid, but I don't think there is one obvious answer.
>
> -- 
>
> Marek
>
>
> ----------------------------------------------------------------------
> Jaros?aw Drob, Przyjdziemy i Spie***ymy - poznaj kandydata!
> Kliknij >>> http://link.interia.pl/f1bef
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Sun Oct  7 19:06:47 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct  7 15:06:55 2007
Subject: [Harbour] 2007-10-08 01:06 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710072306.l97N6lPf031097@31-mo5-4.acn.waw.pl>

2007-10-08 01:06 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/arrays.c
    ! fixed value returned by HB_RASCAN( aVal, bCode ) - it was returning
      index -1, f.e. hb_rascan({1,2,3},{|x|x==2}) returned 1 when it
      should 2

best regards
Przemek
From druzus at acn.waw.pl  Sun Oct  7 19:07:32 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Oct  7 15:07:38 2007
Subject: [Harbour] problem with RASCAN
In-Reply-To: <005101c80906$0af96770$d801a8c0@ingachka>
References: <47051CE8.6010408@marchuet.net>
	<20071005182728.GA6247@localhost.localdomain>
	<005101c80906$0af96770$d801a8c0@ingachka>
Message-ID: <20071007230732.GA31027@localhost.localdomain>

On Sun, 07 Oct 2007, Miguel Angel Marchuet wrote:
> the correct result is 1 and returns 0 in Harbour, I'm using XHB.Lib
> compatible.
> with the described array
> RAScan(  a, {|e| !e[3] } )
> returns 0 when the correct is 1.

Thanks, now I've got it. Fixed in:
    2007-10-08 01:06 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)

best regards,
Przemek
From m-vogel at gmx.net  Sun Oct  7 21:15:04 2007
From: m-vogel at gmx.net (Martin Vogel)
Date: Sun Oct  7 17:15:13 2007
Subject: [Harbour] Why $ can't be "included" anymore?
In-Reply-To: <9257026e0710071046yf7ebfa5m435cd2cc9eca5c90@mail.gmail.com>
References: <9257026e0710061207g2772f2f4gb6b6c58aa2300ba5@mail.gmail.com>	<CC9A1E03-5827-4042-928A-CCC8FDB88BD1@syenar.hu>	<9257026e0710061322r72d88610lc37b71570005deed@mail.gmail.com>	<ABAC2550-0DCA-42F9-BC4B-9366D6A79BB1@syenar.hu>	<9257026e0710061529ha591d3dt14c093d01f0e34f0@mail.gmail.com>	<DE80FFA6-51C9-4A22-9BFE-EF4167193821@syenar.hu>	<9257026e0710070029i7a816ee5o203a1761ab50f18@mail.gmail.com>	<5357EE0A-6D28-46FA-9F5A-C33157006249@syenar.hu>	<9257026e0710070845n1e7a9649vdede5673df7bfb46@mail.gmail.com>	<EBFC8AB6-C325-43E6-B6D1-C90184D3D614@syenar.hu>
	<9257026e0710071046yf7ebfa5m435cd2cc9eca5c90@mail.gmail.com>
Message-ID: <47098498.1010205@gmx.net>

Hello,

I've not been active on the Harbour project for quite some time, but I 
have to say that you guys have done a terrific job - it's fascinating to 
see how far this project has evolved.

But back to the topic and please allow a small comment:

Someone on this thread (Lorenzo?) talked about "language definition".
Your discussion about extensions is exactly that, a discussion about a 
specification for the language. Data types, which operators (and how 
they work on the data types), statements and functions that are, by 
definition, the core of the language. "Core" meaning that they all have 
to be there for an implementation of language to be "Harbour-compliant".

Have you guys ever thought about writing such a document? If not, I 
seriously suggest to think about it, even more to you people that use 
Harbour in a commercial / industrial environment. Having an ISO standard 
for Harbour - wouldn't that be a nice goal? And it would help your 
business, I'm sure about that.

About the extensions being discussed: If you look at the Windows API, 
Microsoft never (at least AFAIR) changed the prototype of any function. 
Instead, they provided "Ex"tended functions. So, how about AInsEx and 
ADelEx?

For operators: I think it is better to define new operators for new 
tasks, e.g. "$$" for an extended version of "$". Or, for the index 
operator, "[[]]", but leaving the old operator "[]" alone (I do not 
propose [[]] literally, as there might be side effects, but you get the 
general idea). Once you decide to introduce these operators, one could 
define (see above) their operation quite broadly, e.g. date[[1]] could 
access the day of a date variable.

My 2 cents,
Best,
Martin


From lorenzo.fiorini at gmail.com  Mon Oct  8 01:38:16 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Oct  7 21:38:20 2007
Subject: [Harbour] Help on use of MSYS + MinGW
In-Reply-To: <001d01c80871$290ddc40$b50aa8c0@ASUSFSG>
References: <9257026e0710061207g2772f2f4gb6b6c58aa2300ba5@mail.gmail.com>
	<66789751-09D1-44FC-BD18-AF15B44FD715@syenar.hu>
	<9257026e0710061231g8633af4mcd24369b29235a0@mail.gmail.com>
	<CC9A1E03-5827-4042-928A-CCC8FDB88BD1@syenar.hu>
	<9257026e0710061322r72d88610lc37b71570005deed@mail.gmail.com>
	<ABAC2550-0DCA-42F9-BC4B-9366D6A79BB1@syenar.hu>
	<9257026e0710061529ha591d3dt14c093d01f0e34f0@mail.gmail.com>
	<001d01c80871$290ddc40$b50aa8c0@ASUSFSG>
Message-ID: <9257026e0710072238k55602d5bnf1d673cb40ee0010@mail.gmail.com>

On 10/7/07, Francesco Saverio Giudice <info@fsgiudice.com> wrote:

> after a lot of time I have found time and way to install MSYS + MinGW and to
> compile harbour from SVN, but I have a problem: if I use any of hb* utility
> to compile even a simple utility, it seems that doesn't recognize any
> parameters.
> The command I use is:

Sorry I've replied many time using simply "Replay" instead of "Replay
all" so nothing went to the list.

best regards,
Lorenzo
From mbelgrano at deltain.it  Mon Oct  8 05:26:42 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Oct  8 01:27:03 2007
Subject: [Harbour] Memoedit work woth mouse?
In-Reply-To: <9257026e0710072238k55602d5bnf1d673cb40ee0010@mail.gmail.com>
References: <9257026e0710061207g2772f2f4gb6b6c58aa2300ba5@mail.gmail.com><66789751-09D1-44FC-BD18-AF15B44FD715@syenar.hu><9257026e0710061231g8633af4mcd24369b29235a0@mail.gmail.com><CC9A1E03-5827-4042-928A-CCC8FDB88BD1@syenar.hu><9257026e0710061322r72d88610lc37b71570005deed@mail.gmail.com><ABAC2550-0DCA-42F9-BC4B-9366D6A79BB1@syenar.hu><9257026e0710061529ha591d3dt14c093d01f0e34f0@mail.gmail.com><001d01c80871$290ddc40$b50aa8c0@ASUSFSG>
	<9257026e0710072238k55602d5bnf1d673cb40ee0010@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809AA17@SRV02.deltain.net>

Memoedit work with mouse?


From lorenzo.fiorini at gmail.com  Mon Oct  8 06:11:32 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Oct  8 02:11:36 2007
Subject: [Harbour] I ask to restore include/hbcompat.ch and few lines in
	hvm.c
In-Reply-To: <4709162C.4030906@interia.pl>
References: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>
	<47091112.5080900@dbtopas.lt> <4709162C.4030906@interia.pl>
Message-ID: <9257026e0710080311w69a5a7bfq5126b0f27b89d272@mail.gmail.com>

On 10/7/07, Marek Paliwoda <mpaliwoda@interia.pl> wrote:

> However if we use constructs like
>       1 $ {1,2}
> or
>       s[2]++ for strings
> we will NOT get compile time error
> but only RTE, or much much worse -
> unexpected behavior.
>
> This is a HUGE difference to me. "1 $ {1,2}",
> "atrings as array", "extended ADel() and AIns()"
> are really "dangerous" to me.

Below there is a perfectly valid Clipper code that gives a RTE since
I meant ( "2007" $ cDate ) not ( "2007" $ dDate ).

This is the "not typed" nature of Clipper/Harbour not a problem with
the "$" operator.

The same could be for "/" it is allowed for numbers but not for
strings while "+" is for string also. All these are found at RT.

I agree that ADel, AIns and strings as arrays are a different question.

best regards,
Lorenzo

procedure main()

   local dDate := date()
   local cDate := dtos( dDate )
   local aDate := { cDate }

   ? "2007" $ dDate

   return
From guy.roussin at teledetection.fr  Mon Oct  8 08:04:27 2007
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Mon Oct  8 04:04:31 2007
Subject: [Harbour] Error when compiling harbour
Message-ID: <470A1CCB.2070700@teledetection.fr>

Hi,
i get this error when compiling harbour (last svn)
on debian etch
Guy

make[2]: entrant dans le r?pertoire ? /home1/local/src/harbour/utils/hbrun ?
make[3]: entrant dans le r?pertoire ? /home1/local/src/harbour/utils/hbrun/linux/gcc ?
gcc -DHB_OS_LINUX -Wall -W -ohbrun hbrun.o external.o 
-L../../../../source/debug/linux/gcc  -L../../../../source/vm/linux/gcc 
-L../../../../source/rtl/linux/gcc  -L../../../../source/lang/linux/gcc 
-L../../../../source/codepage/linux/gcc  -L../../../../source/rdd/linux/gcc 
-L../../../../source/rtl/linux/gcc  -L../../../../source/vm/linux/gcc 
-L../../../../source/macro/linux/gcc  -L../../../../source/pp/linux/gcc 
-L../../../../source/compiler/linux/gcc  -L../../../../source/common/linux/gcc 
-L../../../../source/hbpcre/linux/gcc  -L../../../../source/rdd/dbfntx/linux/gcc 
-L../../../../source/rdd/dbfcdx/linux/gcc  -L../../../../source/rdd/dbffpt/linux/gcc 
-L../../../../source/rdd/hbsix/linux/gcc  -L../../../../source/rdd/hsx/linux/gcc 
-L../../../../source/rdd/usrrdd/linux/gcc  -L../../../../source/rtl/gtcgi/linux/gcc 
-L../../../../source/rtl/gtpca/linux/gcc  -L../../../../source/rtl/gtstd/linux/gcc 
-L../../../../source/rtl/gttrm/linux/gcc  -L../../../../source/rtl/gtcrs/linux/gcc 
-L../../../../source/rtl/gtsln/linux/gcc  -L../../../../source/rtl/gtxwc/linux/gcc 
-L/usr/X11R6/lib  -Wl,--start-group   -ldebug  -lvm  -lrtl  -llang  -lcodepage  -lrdd 
-lrtl  -lvm  -lmacro  -lpp  -lcompiler-lcommon  -lhbpcre  -ldbfntx  -ldbfcdx  -ldbffpt 
-lhbsix  -lhsx  -lusrrdd  -lgtcgi  -lgtpca  -lgtstd  -lgttrm  -lgtcrs  -lgtsln  -lgtxwc 
-lncurses -lslang -lX11 -lgpm -lm -ldl -Wl,--end-group
hbrun.o:(.data+0x2f08): undefined reference to `HB_FUN_GUIGETPOSTVALIDATE'
hbrun.o:(.data+0x2f18): undefined reference to `HB_FUN_GUIGETPREVALIDATE'
collect2: ld returned 1 exit status
make[3]: *** [hbrun] Erreur 1
make[3]: quittant le r?pertoire ? /home1/local/src/harbour/utils/hbrun/linux/gcc ?
make[2]: *** [descend] Erreur 2
make[2]: quittant le r?pertoire ? /home1/local/src/harbour/utils/hbrun ?
make[2]: entrant dans le r?pertoire ? /home1/local/src/harbour/utils/hbdot ?
make[3]: entrant dans le r?pertoire ? /home1/local/src/harbour/utils/hbdot/linux/gcc ?
gcc -DHB_OS_LINUX -Wall -W -ohbdot hbdot.o   -L../../../../source/debug/linux/gcc 
-L../../../../source/vm/linux/gcc  -L../../../../source/rtl/linux/gcc 
-L../../../../source/lang/linux/gcc  -L../../../../source/codepage/linux/gcc 
-L../../../../source/rdd/linux/gcc 
-L../../../../source/rtl/linux/gcc-L../../../../source/vm/linux/gcc 
-L../../../../source/macro/linux/gcc  -L../../../../source/pp/linux/gcc 
-L../../../../source/compiler/linux/gcc  -L../../../../source/common/linux/gcc 
-L../../../../source/hbpcre/linux/gcc  -L../../../../source/rdd/dbfntx/linux/gcc 
-L../../../../source/rdd/dbfcdx/linux/gcc  -L../../../../source/rdd/dbffpt/linux/gcc 
-L../../../../source/rdd/hbsix/linux/gcc  -L../../../../source/rdd/hsx/linux/gcc 
-L../../../../source/rdd/usrrdd/linux/gcc  -L../../../../source/rtl/gtcgi/linux/gcc 
-L../../../../source/rtl/gtpca/linux/gcc  -L../../../../source/rtl/gtstd/linux/gcc  - 
L../../../../source/rtl/gttrm/linux/gcc  -L../../../../source/rtl/gtcrs/linux/gcc 
-L../../../../source/rtl/gtsln/linux/gcc  -L../../../../source/rtl/gtxwc/linux/gcc 
-L/usr/X11R6/lib  -Wl,--start-group   -ldebug  -lvm  -lrtl  -llang  -lcodepage  -lrdd 
-lrtl  -lvm  -lmacro  -lpp  -lcompiler  -lcommon  - lhbpcre  -ldbfntx  -ldbfcdx  -ldbffpt 
  -lhbsix  -lhsx  -lusrrdd  -lgtcgi  -lgtpca  -lgtstd  -lgttrm  -lgtcrs  -lgtsln  -lgtxwc 
-lncurses -lslang -lX11 -lgpm -lm -ldl -Wl,--end-group
hbdot.o:(.data+0x30a8): undefined reference to `HB_FUN_GUIGETPOSTVALIDATE'
hbdot.o:(.data+0x30b8): undefined reference to `HB_FUN_GUIGETPREVALIDATE'
collect2: ld returned 1 exit status
make[3]: *** [hbdot] Erreur 1
make[3]: quittant le r?pertoire ? /home1/local/src/harbour/utils/hbdot/linux/gcc ?
make[2]: *** [descend] Erreur 2
From harbour.01 at syenar.hu  Mon Oct  8 08:12:17 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  8 04:12:28 2007
Subject: [Harbour] Error when compiling harbour
In-Reply-To: <470A1CCB.2070700@teledetection.fr>
References: <470A1CCB.2070700@teledetection.fr>
Message-ID: <AE3683C8-D592-45DA-AF46-00902EBC7E28@syenar.hu>

Hi,

You'll need to do a full rebuid after a clean.

Brgds,
Viktor

On 2007.10.08., at 14:04, Guy Roussin wrote:

> Hi,
> i get this error when compiling harbour (last svn)
> on debian etch
> Guy
>
> make[2]: entrant dans le r?pertoire ? /home1/local/src/harbour/ 
> utils/hbrun ?
> make[3]: entrant dans le r?pertoire ? /home1/local/src/harbour/ 
> utils/hbrun/linux/gcc ?
> gcc -DHB_OS_LINUX -Wall -W -ohbrun hbrun.o external.o -L../../../../ 
> source/debug/linux/gcc  -L../../../../source/vm/linux/gcc - 
> L../../../../source/rtl/linux/gcc  -L../../../../source/lang/linux/ 
> gcc -L../../../../source/codepage/linux/gcc  -L../../../../source/ 
> rdd/linux/gcc -L../../../../source/rtl/linux/gcc  -L../../../../ 
> source/vm/linux/gcc -L../../../../source/macro/linux/gcc  - 
> L../../../../source/pp/linux/gcc -L../../../../source/compiler/ 
> linux/gcc  -L../../../../source/common/linux/gcc -L../../../../ 
> source/hbpcre/linux/gcc  -L../../../../source/rdd/dbfntx/linux/gcc - 
> L../../../../source/rdd/dbfcdx/linux/gcc  -L../../../../source/rdd/ 
> dbffpt/linux/gcc -L../../../../source/rdd/hbsix/linux/gcc  - 
> L../../../../source/rdd/hsx/linux/gcc -L../../../../source/rdd/ 
> usrrdd/linux/gcc  -L../../../../source/rtl/gtcgi/linux/gcc - 
> L../../../../source/rtl/gtpca/linux/gcc  -L../../../../source/rtl/ 
> gtstd/linux/gcc -L../../../../source/rtl/gttrm/linux/gcc  - 
> L../../../../source/rtl/gtcrs/linux/gcc -L../../../../source/rtl/ 
> gtsln/linux/gcc  -L../../../../source/rtl/gtxwc/linux/gcc -L/usr/ 
> X11R6/lib  -Wl,--start-group   -ldebug  -lvm  -lrtl  -llang  - 
> lcodepage  -lrdd -lrtl  -lvm  -lmacro  -lpp  -lcompiler-lcommon  - 
> lhbpcre  -ldbfntx  -ldbfcdx  -ldbffpt -lhbsix  -lhsx  -lusrrdd  - 
> lgtcgi  -lgtpca  -lgtstd  -lgttrm  -lgtcrs  -lgtsln  -lgtxwc - 
> lncurses -lslang -lX11 -lgpm -lm -ldl -Wl,--end-group
> hbrun.o:(.data+0x2f08): undefined reference to  
> `HB_FUN_GUIGETPOSTVALIDATE'
> hbrun.o:(.data+0x2f18): undefined reference to  
> `HB_FUN_GUIGETPREVALIDATE'
> collect2: ld returned 1 exit status
> make[3]: *** [hbrun] Erreur 1
> make[3]: quittant le r?pertoire ? /home1/local/src/harbour/utils/ 
> hbrun/linux/gcc ?
> make[2]: *** [descend] Erreur 2
> make[2]: quittant le r?pertoire ? /home1/local/src/harbour/utils/ 
> hbrun ?
> make[2]: entrant dans le r?pertoire ? /home1/local/src/harbour/ 
> utils/hbdot ?
> make[3]: entrant dans le r?pertoire ? /home1/local/src/harbour/ 
> utils/hbdot/linux/gcc ?
> gcc -DHB_OS_LINUX -Wall -W -ohbdot hbdot.o   -L../../../../source/ 
> debug/linux/gcc -L../../../../source/vm/linux/gcc  -L../../../../ 
> source/rtl/linux/gcc -L../../../../source/lang/linux/gcc  - 
> L../../../../source/codepage/linux/gcc -L../../../../source/rdd/ 
> linux/gcc -L../../../../source/rtl/linux/gcc-L../../../../source/vm/ 
> linux/gcc -L../../../../source/macro/linux/gcc  -L../../../../ 
> source/pp/linux/gcc -L../../../../source/compiler/linux/gcc  - 
> L../../../../source/common/linux/gcc -L../../../../source/hbpcre/ 
> linux/gcc  -L../../../../source/rdd/dbfntx/linux/gcc -L../../../../ 
> source/rdd/dbfcdx/linux/gcc  -L../../../../source/rdd/dbffpt/linux/ 
> gcc -L../../../../source/rdd/hbsix/linux/gcc  -L../../../../source/ 
> rdd/hsx/linux/gcc -L../../../../source/rdd/usrrdd/linux/gcc  - 
> L../../../../source/rtl/gtcgi/linux/gcc -L../../../../source/rtl/ 
> gtpca/linux/gcc  -L../../../../source/rtl/gtstd/linux/gcc  -  
> L../../../../source/rtl/gttrm/linux/gcc  -L../../../../source/rtl/ 
> gtcrs/linux/gcc -L../../../../source/rtl/gtsln/linux/gcc  - 
> L../../../../source/rtl/gtxwc/linux/gcc -L/usr/X11R6/lib  -Wl,-- 
> start-group   -ldebug  -lvm  -lrtl  -llang  -lcodepage  -lrdd - 
> lrtl  -lvm  -lmacro  -lpp  -lcompiler  -lcommon  - lhbpcre  - 
> ldbfntx  -ldbfcdx  -ldbffpt  -lhbsix  -lhsx  -lusrrdd  -lgtcgi  - 
> lgtpca  -lgtstd  -lgttrm  -lgtcrs  -lgtsln  -lgtxwc -lncurses - 
> lslang -lX11 -lgpm -lm -ldl -Wl,--end-group
> hbdot.o:(.data+0x30a8): undefined reference to  
> `HB_FUN_GUIGETPOSTVALIDATE'
> hbdot.o:(.data+0x30b8): undefined reference to  
> `HB_FUN_GUIGETPREVALIDATE'
> collect2: ld returned 1 exit status
> make[3]: *** [hbdot] Erreur 1
> make[3]: quittant le r?pertoire ? /home1/local/src/harbour/utils/ 
> hbdot/linux/gcc ?
> make[2]: *** [descend] Erreur 2
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From guy.roussin at teledetection.fr  Mon Oct  8 09:05:57 2007
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Mon Oct  8 05:06:00 2007
Subject: [Harbour] Error when compiling harbour
In-Reply-To: <AE3683C8-D592-45DA-AF46-00902EBC7E28@syenar.hu>
References: <470A1CCB.2070700@teledetection.fr>
	<AE3683C8-D592-45DA-AF46-00902EBC7E28@syenar.hu>
Message-ID: <470A2B35.1040301@teledetection.fr>

Hi,

I've made this :
$ cd /home1/local/src/harbour
$ sh make_gnu.sh clean
$ sh make_gnu.sh

and i get the error ... (hbrun & hbdot)

Guy


Szak?ts Viktor a ?crit :
> Hi,
> 
> You'll need to do a full rebuid after a clean.
> 
> Brgds,
> Viktor
> 
> On 2007.10.08., at 14:04, Guy Roussin wrote:
> 
>> Hi,
>> i get this error when compiling harbour (last svn)
>> on debian etch
>> Guy
>>
>> make[2]: entrant dans le r?pertoire ? 
>> /home1/local/src/harbour/utils/hbrun ?
>> make[3]: entrant dans le r?pertoire ? 
>> /home1/local/src/harbour/utils/hbrun/linux/gcc ?
>> gcc -DHB_OS_LINUX -Wall -W -ohbrun hbrun.o external.o 
>> -L../../../../source/debug/linux/gcc  
>> -L../../../../source/vm/linux/gcc -L../../../../source/rtl/linux/gcc  
>> -L../../../../source/lang/linux/gcc 
>> -L../../../../source/codepage/linux/gcc  
>> -L../../../../source/rdd/linux/gcc -L../../../../source/rtl/linux/gcc  
>> -L../../../../source/vm/linux/gcc 
>> -L../../../../source/macro/linux/gcc  
>> -L../../../../source/pp/linux/gcc 
>> -L../../../../source/compiler/linux/gcc  
>> -L../../../../source/common/linux/gcc 
>> -L../../../../source/hbpcre/linux/gcc  
>> -L../../../../source/rdd/dbfntx/linux/gcc 
>> -L../../../../source/rdd/dbfcdx/linux/gcc  
>> -L../../../../source/rdd/dbffpt/linux/gcc 
>> -L../../../../source/rdd/hbsix/linux/gcc  
>> -L../../../../source/rdd/hsx/linux/gcc 
>> -L../../../../source/rdd/usrrdd/linux/gcc  
>> -L../../../../source/rtl/gtcgi/linux/gcc 
>> -L../../../../source/rtl/gtpca/linux/gcc  
>> -L../../../../source/rtl/gtstd/linux/gcc 
>> -L../../../../source/rtl/gttrm/linux/gcc  
>> -L../../../../source/rtl/gtcrs/linux/gcc 
>> -L../../../../source/rtl/gtsln/linux/gcc  
>> -L../../../../source/rtl/gtxwc/linux/gcc -L/usr/X11R6/lib  
>> -Wl,--start-group   -ldebug  -lvm  -lrtl  -llang  -lcodepage  -lrdd 
>> -lrtl  -lvm  -lmacro  -lpp  -lcompiler-lcommon  -lhbpcre  -ldbfntx  
>> -ldbfcdx  -ldbffpt -lhbsix  -lhsx  -lusrrdd  -lgtcgi  -lgtpca  
>> -lgtstd  -lgttrm  -lgtcrs  -lgtsln  -lgtxwc -lncurses -lslang -lX11 
>> -lgpm -lm -ldl -Wl,--end-group
>> hbrun.o:(.data+0x2f08): undefined reference to 
>> `HB_FUN_GUIGETPOSTVALIDATE'
>> hbrun.o:(.data+0x2f18): undefined reference to `HB_FUN_GUIGETPREVALIDATE'
>> collect2: ld returned 1 exit status
>> make[3]: *** [hbrun] Erreur 1
>> make[3]: quittant le r?pertoire ? 
>> /home1/local/src/harbour/utils/hbrun/linux/gcc ?
>> make[2]: *** [descend] Erreur 2
>> make[2]: quittant le r?pertoire ? /home1/local/src/harbour/utils/hbrun ?
>> make[2]: entrant dans le r?pertoire ? 
>> /home1/local/src/harbour/utils/hbdot ?
>> make[3]: entrant dans le r?pertoire ? 
>> /home1/local/src/harbour/utils/hbdot/linux/gcc ?
>> gcc -DHB_OS_LINUX -Wall -W -ohbdot hbdot.o   
>> -L../../../../source/debug/linux/gcc 
>> -L../../../../source/vm/linux/gcc  -L../../../../source/rtl/linux/gcc 
>> -L../../../../source/lang/linux/gcc  
>> -L../../../../source/codepage/linux/gcc 
>> -L../../../../source/rdd/linux/gcc 
>> -L../../../../source/rtl/linux/gcc-L../../../../source/vm/linux/gcc 
>> -L../../../../source/macro/linux/gcc  
>> -L../../../../source/pp/linux/gcc 
>> -L../../../../source/compiler/linux/gcc  
>> -L../../../../source/common/linux/gcc 
>> -L../../../../source/hbpcre/linux/gcc  
>> -L../../../../source/rdd/dbfntx/linux/gcc 
>> -L../../../../source/rdd/dbfcdx/linux/gcc  
>> -L../../../../source/rdd/dbffpt/linux/gcc 
>> -L../../../../source/rdd/hbsix/linux/gcc  
>> -L../../../../source/rdd/hsx/linux/gcc 
>> -L../../../../source/rdd/usrrdd/linux/gcc  
>> -L../../../../source/rtl/gtcgi/linux/gcc 
>> -L../../../../source/rtl/gtpca/linux/gcc  
>> -L../../../../source/rtl/gtstd/linux/gcc  - 
>> L../../../../source/rtl/gttrm/linux/gcc  
>> -L../../../../source/rtl/gtcrs/linux/gcc 
>> -L../../../../source/rtl/gtsln/linux/gcc  
>> -L../../../../source/rtl/gtxwc/linux/gcc -L/usr/X11R6/lib  
>> -Wl,--start-group   -ldebug  -lvm  -lrtl  -llang  -lcodepage  -lrdd 
>> -lrtl  -lvm  -lmacro  -lpp  -lcompiler  -lcommon  - lhbpcre  -ldbfntx  
>> -ldbfcdx  -ldbffpt  -lhbsix  -lhsx  -lusrrdd  -lgtcgi  -lgtpca  
>> -lgtstd  -lgttrm  -lgtcrs  -lgtsln  -lgtxwc -lncurses -lslang -lX11 
>> -lgpm -lm -ldl -Wl,--end-group
>> hbdot.o:(.data+0x30a8): undefined reference to 
>> `HB_FUN_GUIGETPOSTVALIDATE'
>> hbdot.o:(.data+0x30b8): undefined reference to `HB_FUN_GUIGETPREVALIDATE'
>> collect2: ld returned 1 exit status
>> make[3]: *** [hbdot] Erreur 1
>> make[3]: quittant le r?pertoire ? 
>> /home1/local/src/harbour/utils/hbdot/linux/gcc ?
>> make[2]: *** [descend] Erreur 2
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
Guy Roussin

UMR TETIS "Territoires, Environnement, Teledetection et Information  Spatiale"

Maison de la T?l?d?tection en Languedoc Roussillon
500, rue J.F. Breton
34093 MONTPELLIER Cedex 5

t?l: 04.67.54.87.46 fax: 04.67.54.87.00
mailto:guy.roussin@teledetection.fr
From harbour.01 at syenar.hu  Mon Oct  8 09:23:28 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  8 05:23:40 2007
Subject: [Harbour] Error when compiling harbour
In-Reply-To: <470A2B35.1040301@teledetection.fr>
References: <470A1CCB.2070700@teledetection.fr>
	<AE3683C8-D592-45DA-AF46-00902EBC7E28@syenar.hu>
	<470A2B35.1040301@teledetection.fr>
Message-ID: <2087E30D-EE9C-44CB-B0B1-D0F93517D38F@syenar.hu>

It looks good to me, but if it doesn't work, either delete
pls try it after a new checkout. There is no more reference
to these symbols in the repository now. This bug was fixed
a month ago in revision 7712 (in hbextern.ch).

Brgds,
Viktor

On 2007.10.08., at 15:05, Guy Roussin wrote:

> Hi,
>
> I've made this :
> $ cd /home1/local/src/harbour
> $ sh make_gnu.sh clean
> $ sh make_gnu.sh
>
> and i get the error ... (hbrun & hbdot)
>
> Guy
>
>
> Szak?ts Viktor a ?crit :
>> Hi,
>> You'll need to do a full rebuid after a clean.
>> Brgds,
>> Viktor
>> On 2007.10.08., at 14:04, Guy Roussin wrote:
>>> Hi,
>>> i get this error when compiling harbour (last svn)
>>> on debian etch
>>> Guy
>>>
>>> make[2]: entrant dans le r?pertoire ? /home1/local/src/harbour/ 
>>> utils/hbrun ?
>>> make[3]: entrant dans le r?pertoire ? /home1/local/src/harbour/ 
>>> utils/hbrun/linux/gcc ?
>>> gcc -DHB_OS_LINUX -Wall -W -ohbrun hbrun.o external.o - 
>>> L../../../../source/debug/linux/gcc  -L../../../../source/vm/ 
>>> linux/gcc -L../../../../source/rtl/linux/gcc  -L../../../../ 
>>> source/lang/linux/gcc -L../../../../source/codepage/linux/gcc  - 
>>> L../../../../source/rdd/linux/gcc -L../../../../source/rtl/linux/ 
>>> gcc  -L../../../../source/vm/linux/gcc -L../../../../source/macro/ 
>>> linux/gcc  -L../../../../source/pp/linux/gcc -L../../../../source/ 
>>> compiler/linux/gcc  -L../../../../source/common/linux/gcc - 
>>> L../../../../source/hbpcre/linux/gcc  -L../../../../source/rdd/ 
>>> dbfntx/linux/gcc -L../../../../source/rdd/dbfcdx/linux/gcc  - 
>>> L../../../../source/rdd/dbffpt/linux/gcc -L../../../../source/rdd/ 
>>> hbsix/linux/gcc  -L../../../../source/rdd/hsx/linux/gcc - 
>>> L../../../../source/rdd/usrrdd/linux/gcc  -L../../../../source/ 
>>> rtl/gtcgi/linux/gcc -L../../../../source/rtl/gtpca/linux/gcc  - 
>>> L../../../../source/rtl/gtstd/linux/gcc -L../../../../source/rtl/ 
>>> gttrm/linux/gcc  -L../../../../source/rtl/gtcrs/linux/gcc - 
>>> L../../../../source/rtl/gtsln/linux/gcc  -L../../../../source/rtl/ 
>>> gtxwc/linux/gcc -L/usr/X11R6/lib  -Wl,--start-group   -ldebug  - 
>>> lvm  -lrtl  -llang  -lcodepage  -lrdd -lrtl  -lvm  -lmacro  -lpp   
>>> -lcompiler-lcommon  -lhbpcre  -ldbfntx  -ldbfcdx  -ldbffpt - 
>>> lhbsix  -lhsx  -lusrrdd  -lgtcgi  -lgtpca  -lgtstd  -lgttrm  - 
>>> lgtcrs  -lgtsln  -lgtxwc -lncurses -lslang -lX11 -lgpm -lm -ldl - 
>>> Wl,--end-group
>>> hbrun.o:(.data+0x2f08): undefined reference to  
>>> `HB_FUN_GUIGETPOSTVALIDATE'
>>> hbrun.o:(.data+0x2f18): undefined reference to  
>>> `HB_FUN_GUIGETPREVALIDATE'
>>> collect2: ld returned 1 exit status
>>> make[3]: *** [hbrun] Erreur 1
>>> make[3]: quittant le r?pertoire ? /home1/local/src/harbour/utils/ 
>>> hbrun/linux/gcc ?
>>> make[2]: *** [descend] Erreur 2
>>> make[2]: quittant le r?pertoire ? /home1/local/src/harbour/utils/ 
>>> hbrun ?
>>> make[2]: entrant dans le r?pertoire ? /home1/local/src/harbour/ 
>>> utils/hbdot ?
>>> make[3]: entrant dans le r?pertoire ? /home1/local/src/harbour/ 
>>> utils/hbdot/linux/gcc ?
>>> gcc -DHB_OS_LINUX -Wall -W -ohbdot hbdot.o   -L../../../../source/ 
>>> debug/linux/gcc -L../../../../source/vm/linux/gcc  -L../../../../ 
>>> source/rtl/linux/gcc -L../../../../source/lang/linux/gcc  - 
>>> L../../../../source/codepage/linux/gcc -L../../../../source/rdd/ 
>>> linux/gcc -L../../../../source/rtl/linux/gcc-L../../../../source/ 
>>> vm/linux/gcc -L../../../../source/macro/linux/gcc  -L../../../../ 
>>> source/pp/linux/gcc -L../../../../source/compiler/linux/gcc  - 
>>> L../../../../source/common/linux/gcc -L../../../../source/hbpcre/ 
>>> linux/gcc  -L../../../../source/rdd/dbfntx/linux/gcc - 
>>> L../../../../source/rdd/dbfcdx/linux/gcc  -L../../../../source/ 
>>> rdd/dbffpt/linux/gcc -L../../../../source/rdd/hbsix/linux/gcc  - 
>>> L../../../../source/rdd/hsx/linux/gcc -L../../../../source/rdd/ 
>>> usrrdd/linux/gcc  -L../../../../source/rtl/gtcgi/linux/gcc - 
>>> L../../../../source/rtl/gtpca/linux/gcc  -L../../../../source/rtl/ 
>>> gtstd/linux/gcc  - L../../../../source/rtl/gttrm/linux/gcc  - 
>>> L../../../../source/rtl/gtcrs/linux/gcc -L../../../../source/rtl/ 
>>> gtsln/linux/gcc  -L../../../../source/rtl/gtxwc/linux/gcc -L/usr/ 
>>> X11R6/lib  -Wl,--start-group   -ldebug  -lvm  -lrtl  -llang  - 
>>> lcodepage  -lrdd -lrtl  -lvm  -lmacro  -lpp  -lcompiler  - 
>>> lcommon  - lhbpcre  -ldbfntx  -ldbfcdx  -ldbffpt  -lhbsix  -lhsx   
>>> -lusrrdd  -lgtcgi  -lgtpca  -lgtstd  -lgttrm  -lgtcrs  -lgtsln  - 
>>> lgtxwc -lncurses -lslang -lX11 -lgpm -lm -ldl -Wl,--end-group
>>> hbdot.o:(.data+0x30a8): undefined reference to  
>>> `HB_FUN_GUIGETPOSTVALIDATE'
>>> hbdot.o:(.data+0x30b8): undefined reference to  
>>> `HB_FUN_GUIGETPREVALIDATE'
>>> collect2: ld returned 1 exit status
>>> make[3]: *** [hbdot] Erreur 1
>>> make[3]: quittant le r?pertoire ? /home1/local/src/harbour/utils/ 
>>> hbdot/linux/gcc ?
>>> make[2]: *** [descend] Erreur 2
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> -- 
> Guy Roussin
>
> UMR TETIS "Territoires, Environnement, Teledetection et  
> Information  Spatiale"
>
> Maison de la T?l?d?tection en Languedoc Roussillon
> 500, rue J.F. Breton
> 34093 MONTPELLIER Cedex 5
>
> t?l: 04.67.54.87.46 fax: 04.67.54.87.00
> mailto:guy.roussin@teledetection.fr
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Mon Oct  8 09:25:51 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  8 05:25:58 2007
Subject: [Harbour] Error when compiling harbour
In-Reply-To: <470A2B35.1040301@teledetection.fr>
References: <470A1CCB.2070700@teledetection.fr>
	<AE3683C8-D592-45DA-AF46-00902EBC7E28@syenar.hu>
	<470A2B35.1040301@teledetection.fr>
Message-ID: <20071008132551.GA1619@localhost.localdomain>

On Mon, 08 Oct 2007, Guy Roussin wrote:
> Hi,
> I've made this :
> $ cd /home1/local/src/harbour
> $ sh make_gnu.sh clean
> $ sh make_gnu.sh
> and i get the error ... (hbrun & hbdot)

druzus:~/SVN/harbour/harbour# grep -ri GUIGETP *
ChangeLog.011:      +Added the follow function For compatibility with Ca-Clipper
 5.3: GUIReader(),GuiApplyKey(),GuiGetPreValidate(),GuiGetPostValidate()
ChangeLog.013:                        GUIGetPreValidate(), GUIGetPostValidate(),
druzus:~/CVS/harbour/harbour#

As you can see there is no function GUIGETP*() in current code so
there is no problem with current Harbour code but sth wrong in your
local copy of harbour sources. Probably you have some modified versions
of get system files and/or changed hbextern.ch but I can only guess.
Use 'svn status' to locate modified files.

best regards,
Przemek
From guy.roussin at teledetection.fr  Mon Oct  8 10:07:40 2007
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Mon Oct  8 06:07:45 2007
Subject: [Harbour] Error when compiling harbour
In-Reply-To: <20071008132551.GA1619@localhost.localdomain>
References: <470A1CCB.2070700@teledetection.fr>	<AE3683C8-D592-45DA-AF46-00902EBC7E28@syenar.hu>	<470A2B35.1040301@teledetection.fr>
	<20071008132551.GA1619@localhost.localdomain>
Message-ID: <470A39AC.6050408@teledetection.fr>

Thank you and sorry this is my fault, an error in my svn command.

I send a patch some times ago an nobody apply it.
without this patch i can't use contrib/mysql
Somebody can apply it ?

Thank you.

Guy

Przemyslaw Czerpak a ?crit :
> On Mon, 08 Oct 2007, Guy Roussin wrote:
>> Hi,
>> I've made this :
>> $ cd /home1/local/src/harbour
>> $ sh make_gnu.sh clean
>> $ sh make_gnu.sh
>> and i get the error ... (hbrun & hbdot)
> 
> druzus:~/SVN/harbour/harbour# grep -ri GUIGETP *
> ChangeLog.011:      +Added the follow function For compatibility with Ca-Clipper
>  5.3: GUIReader(),GuiApplyKey(),GuiGetPreValidate(),GuiGetPostValidate()
> ChangeLog.013:                        GUIGetPreValidate(), GUIGetPostValidate(),
> druzus:~/CVS/harbour/harbour#
> 
> As you can see there is no function GUIGETP*() in current code so
> there is no problem with current Harbour code but sth wrong in your
> local copy of harbour sources. Probably you have some modified versions
> of get system files and/or changed hbextern.ch but I can only guess.
> Use 'svn status' to locate modified files.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: patchFieldDec.diff
Type: patch
Size: 2349 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20071008/3143bd6b/patchFieldDec.ksh
From druzus at acn.waw.pl  Mon Oct  8 11:05:54 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  8 07:06:01 2007
Subject: [Harbour] Extensions
Message-ID: <20071008150554.GA5054@localhost.localdomain>

Hi All,

In last weekend many of you expressed your opinion about some
extensions added to core code.
I've found many interesting informations in these massages but
no one of you wrote about one very important aspect of introducing
some extensions: the cost of implementation for code which do not
use them. It's very bad when adding some new feature reduce the
speed of code which do not need and do not use new functionality.
Such situation happened in the past.
The base implementation of xbase multi value macros needed additional
VM stack registers which were accessed in many different places in
code which do not need them at all. This implementation still exist
in xHarbour so you check all places where different *Extra* values
are used. Everyone has to pay for this feature. The same is with
xHarbour FOR EACH implementation. Each xHarbour user has to pay for
this feature even if he does not use it because in hb_vmExecute()
it's necessary to store/restore FOR EACH state. WITH OBJECT in
xHarbour also reduce the speed even if programmer do not use it.
Similar situation is with many other features. In summary xHarbour
is now about 25-30% slower on pure PCODE evaluation in comparison
to Harbour - it's mostly caused by the inefficient implementation
of new features. After few years total overhead caused by new
features is bigger then speed improvements which can be reach using
them. This is not acceptable for me and I guess most of you - of
course if you know that such problem exists.
In the above examples it was possible to create alternative implementations
which do not have such speed overhead on code which do not use them.
Harbour has such implementation and as I can see Miguel is working
on the xHarbour port for at least few of them.
But not all features can be implemented without speed overhead.
A classic example is support for indexed strings and -ks switch.
To be able to assign indexed strings (val[i]:=x) it' necessary
to putt on HVM stack reference to variable instead of variable.
For arrays and hashes it's not necessary but for strings it is.
Because we do not know type of variable then we have to always
pass all values by reference, also arrays and hashes reducing
the speed of code which uses [] only for arrays and hashes and
does not need it.
Such feature cannot be well implemented without some additional
VM mechanisms like extended references. xHarbour does not have
them yet so indexed string do not work in many places, f.e. for
SETGET methods:
      o:setget:="ABC"
      o:setget[2]:="*"
      ? o:setget
IMHO if an extension cannot work in all places then it should
not be added because people will be confused by unexpected results,
f.e. how many xHarbour user knows that the above code will not work?
The situation is even worser because they will not have any RT errors
and the code works for normal instance variables but does not work
for SETGET (ACCESS/ASSIGN) methods.
In Harbour this problem has been resolved so the above code is
working but here to overhead for arrays and hashes is the biggest.
This is the reason why I haven't eliminated -ks switch from compiler.
Just simply I do not like situation like in xHarbour where each
xHarbour user has to pay for this feature by slowness in code which
do not need it. In Harbour it can be enabled optionally so only people
who need it will use -ks switch.
They can also implement their own version of indexed strings by overloading
[] operators for character classes just like in current XHB library.
Now it causes seed overhead but in 99% of cases the whole code will be
faster then in xHarbour because you have overhead only in some chosen
cases and rest is executed with optimal performance.
Anyhow we can reduce even this overhead. It's possible to add support
for overloading some operators directly from C code by C functions
and in such case the speed overhead will be minimal. I'll add it and
I hope it will resolve the problem for most of users - now we are loosing
much more energy for such discussion then it's worth.

In last modifications we removed all code not enabled in default build
covered by HB_COMPAT_XHB macro. IMHO it will help to keep the core code
clean. Only few people were using HB_COMPAT_XHB and it was possible
that by mistake they will add to core code some .prg code which can
work _ONLY_ with HB_COMPAT_XHB. Now we moved all this features to
XHB lib. This library should emulate xHarbour behavior as close as
possible. It means that we can add here also XHB features we would
never added to core code even hidden by HB_COMPAT_XHB macro, f.e.
using one byte length strings as numbers. I also want to overload
AINS() and ADEL() in this library. I do not agree with Victor that
it will cause anything worser then we have now. IMHO now we have a
problem because users will use linker to overload functions and
the final result will be really unpredictable. Personally I strongly
prefer to control it by us. It's also very important for xHarbour
users to be sure that XHB lib emulates xHarbour behavior as good as
possible or at startup users will not trust this library. Now in
things like indexed strings it works better then original xHarbour
VM. Below I'm attaching examples for some problems I have to resolved
adding full support for -ks to Harbour. They are not working in
xHarbour or works wrongly and should be added to xHarbour bug list.
You can test them with Harbour to see expected results so IMHO now
the quality of XHB lib is not worser then xHarbour VM.

best regards,
Przemek


    /* t01.prg: assign to indexed string does not work in hashes */
    #ifndef __XHARBOUR__
       #include "xhb.ch"
    #endif
    proc main()
    local h:={"X"=>"ABC"}
    ? h["X"]
    h["X"][2]:="*"
    ? h["X"]
    return

    /* t02.prg: assign to indexed string does not work for macros */
    #ifndef __XHARBOUR__
       #include "xhb.ch"
    #endif
    proc main()
    memvar var
    local v:="var"
    private var:="ABC"
    ? &v
    &v[2]:="*"
    ? &v
    return

    /* t03.prg: assign to indexed string does not work for repeated indexes */
    #ifndef __XHARBOUR__
       #include "xhb.ch"
    #endif
    proc main()
    local s:="ABC"
    ? s, s[2,1]
    s[2,1]:="*"
    ? s, s[2,1]
    return

    /* t04.prg: assign to indexed string does not work for SETGET methods */
    #include "hbclass.ch"
    #ifndef __XHARBOUR__
       #include "xhb.ch"
    #endif
    proc main()
       local o:=myClass():new()
       ? o:setget
       o:setget[2]:="*"
       ? o:setget
       strpoke(@o:setget,2,45)
       ? o:setget
    return
    create class myClass
       var    v init "ABC"
       method setget SETGET
    end class
    method setget( xNewVal ) class myClass
    return iif( pcount() > 0, ::v := xNewVal, ::v )

    /* t05.prg: += for indexed string in object variable can damage
       this variable */
    #ifndef __XHARBOUR__
       #include "xhb.ch"
    #endif
    proc main()
    local o:=errorNew()
    o:description:="ABC"
    ? o:description
    ? o:description[2]+=32
    ? o:description
    return

    /* t06.prg: this code gives different results then Clipper */
    #ifndef __XHARBOUR__
       #include "xhb.ch"
    #endif
    proc main()
    local x
    ? (x:={1})[1]+=10
    ? x[1]
    return


    /* t07.prg: <num> + <char> gives <string> but <num> <other_op> <char>
       gives number. The type results should be the same for +, -, *, /, ^ */
    #ifndef __XHARBOUR__
       #include "xhb.ch"
    #endif
    proc main()
    local c:=chr(16), n:=97
    ? n + c  // => string
    ? n - c  // => number
    return
From lorenzo.fiorini at gmail.com  Mon Oct  8 12:18:38 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Oct  8 08:18:43 2007
Subject: [Harbour] Extensions
In-Reply-To: <20071008150554.GA5054@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>
Message-ID: <9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>

On 10/8/07, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> In last weekend many of you expressed your opinion about some
> extensions added to core code.
> ...
> the quality of XHB lib is not worser then xHarbour VM.

Since I "partecipate" to the discussion let me quickly recap my
position since after many messages it can be unclear:

- I completely ( silently ) agreed with the HB_COMPAT_XHB remove and
the xhb lib creation ( for this I didn't comment it )

- I don't need to use xhb since my "desktop" code is still C53b ( I
need to keep compatibility with C53b/FiveWin 16bit ) and my web/cgi
code is "pure" Harbour since I need set escapedstring = on which
doesn't exist in xHarbour.

- I think that you've done EVEN TOO MUCH for the xHarbour compatibility

-  hbcompat.ch should be enough to avoid boring retyping and every
developer knows how to manage PP translations

- I think that xhb can be useful to xHarbour developers that want to
test their apps "before" move to Harbour

- the only "extension" that seem to me useful to keep from
HB_COMPAT_XHB ( like you suggested ) is "$" for arrays.

That's all.

Do you think it can create performance problems?

best regards,
Lorenzo
From harbour.01 at syenar.hu  Mon Oct  8 12:56:05 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  8 08:56:16 2007
Subject: [Harbour] Extensions
In-Reply-To: <20071008150554.GA5054@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>
Message-ID: <EA4BC992-7B41-457C-8AAB-A365F2431B64@syenar.hu>

Hi Przemek,

Thanks for pointing out these aspects of extensions.

> never added to core code even hidden by HB_COMPAT_XHB macro, f.e.
> using one byte length strings as numbers. I also want to overload
> AINS() and ADEL() in this library. I do not agree with Victor that
> it will cause anything worser then we have now. IMHO now we have a
> problem because users will use linker to overload functions and
> the final result will be really unpredictable. Personally I strongly

Hm, I've never suggested to do such thing. This might be
a misunderstanding.

What I've suggested for AINS()/ADEL() is to have a PP rule:

#translate Ains(<a>,<n>,[<x>]) => hb_AIns(<a>,<n>,<x>)

and to have a replica of the xhb AIns() function named as:

xhb_AIns() in xhb lib.
(which we later changed to hb_AIns() in core, but this doesn't matter  
here.)

So the translation is done by the PP. There is nowhere
any duplicate symbols defined. (or am I missing something?)

I've even written an example (with STOD() and CA-Clipper) how
bad duplicate symbols can be, and I'm all for avoiding any
namespace and name clashes.

I'd suggested to stick with the PP method and not to introduce
any official C API to remap function names to alternate
functionality. This is also not very secure, as I reckon,
but most of all it can make code really hard to understand.
And again why? To 100% emulate xHarbour, this is not our
main goal, I think 99.99% is perfectly enough.

(If that's what we're talking about :)

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Oct  8 13:36:25 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  8 09:36:34 2007
Subject: [Harbour] CHANGELOG: 2007-10-08 19:34 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c809d1$Blat.v2.6.2$bff20be8$2d860eb24a6@127.0.0.1>

2007-10-08 19:34 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * contrib/xhb/hbcompat.ch
   * contrib/xhb/xhb.ch
     + Moved lines which do not need xhb lib itself from xhb.ch to hbcompat.ch.
       xhb.ch now includes hbcompat.ch and not vice versa.
       So now hbcompat.ch can be used as a "lighter" compatibility 
       layer which doesn't need the lib binary. Pls test.

   * contrib/mysql/tmysql.prg
   * contrib/mysql/tsqlbrw.prg
   * contrib/mysql/Makefile
     ! Applied MySQL lib patch on behalf of Guy Roussin.
--
Brgds,
Viktor

From dbtopas at dbtopas.lt  Mon Oct  8 13:43:24 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Oct  8 09:43:22 2007
Subject: [Harbour] Extensions
In-Reply-To: <EA4BC992-7B41-457C-8AAB-A365F2431B64@syenar.hu>
References: <20071008150554.GA5054@localhost.localdomain>
	<EA4BC992-7B41-457C-8AAB-A365F2431B64@syenar.hu>
Message-ID: <470A6C3C.2010502@dbtopas.lt>

Szak?ts Viktor wrote:
>> ... I do not agree with Victor that
>> it will cause anything worser then we have now. IMHO now we have a
>> problem because users will use linker to overload functions and
>> the final result will be really unpredictable. 
> 
> Hm, I've never suggested to do such thing. This might be
> a misunderstanding.
> 
> What I've suggested for AINS()/ADEL() is to have a PP rule:
> 
> #translate Ains(<a>,<n>,[<x>]) => hb_AIns(<a>,<n>,<x>)
> 
> ...
> 
> I'd suggested to stick with the PP method and not to introduce
> any official C API to remap function names to alternate
> functionality. This is also not very secure, as I reckon,
> but most of all it can make code really hard to understand.
> And again why? To 100% emulate xHarbour, this is not our
> main goal, I think 99.99% is perfectly enough.

Hi,


function overload can be done by linker or by API suggested by Przemek. 
So, if no overloading by safe API, then linker is used.

#translate is good, except:
  - I'd like to work it in macro
  - I'd like PROCNAME() return "AINS"
  - I'd like in error log to see the function I'm using, i.e. AIns()


Best regards,
Mindaugas


P.S. Przemek, if group's decision will be to not add hb_vmSetFunction() 
to the core, can you send me? I've wrote my own version of this 
function, but I think yours will be more efficient. My version scans 
symbol tables of all modules to find ADel() address and replace it. I 
can't find the way to optimize it (The only way I see is creation of 
symbol list for all symbols of the same dynsym. It requires one more 
pointer for every SYMBOL item).
From m-vogel at gmx.net  Mon Oct  8 13:46:08 2007
From: m-vogel at gmx.net (Martin Vogel)
Date: Mon Oct  8 09:46:17 2007
Subject: [Harbour] Extensions
In-Reply-To: <20071008150554.GA5054@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>
Message-ID: <470A6CE0.1040307@gmx.net>

Hi Przemyslaw,

 > I also want to overload
 > AINS() and ADEL() in this library. I do not agree with Victor that
 > it will cause anything worser then we have now. IMHO now we have a
 > problem because users will use linker to overload functions and
 > the final result will be really unpredictable.

IMO, it's not that nice to redefine the prototype and purpose of a 
function without any reflection in the calling source code. Wouldn't it 
be much easier to introduce an extended version of AINS and ADEL, but 
with another name? This extended version could also be integrated in 
Harbour's core, without causing any harm.

And then, if someone really wants to overload the function name (very 
dangerous!), he or she can do it with the PP.

Best,
Martin
From lorenzo.fiorini at gmail.com  Mon Oct  8 13:50:45 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Oct  8 09:50:49 2007
Subject: [Harbour] CHANGELOG: 2007-10-08 19:34 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <01c809d1$Blat.v2.6.2$bff20be8$2d860eb24a6@127.0.0.1>
References: <01c809d1$Blat.v2.6.2$bff20be8$2d860eb24a6@127.0.0.1>
Message-ID: <9257026e0710081050w429b50c5ndc5f880ee3cce35d@mail.gmail.com>

On 10/8/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
> 2007-10-08 19:34 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>    * contrib/xhb/hbcompat.ch
>    * contrib/xhb/xhb.ch
>      + Moved lines which do not need xhb lib itself from xhb.ch to hbcompat.ch.
>        xhb.ch now includes hbcompat.ch and not vice versa.
>        So now hbcompat.ch can be used as a "lighter" compatibility
>        layer which doesn't need the lib binary. Pls test.

It's ok but I still think it be in /include since it is could be used
to for "try catch" or "text into" which are not directly related to
xhb.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Mon Oct  8 13:58:54 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  8 09:59:02 2007
Subject: [Harbour] Extensions
In-Reply-To: <470A6C3C.2010502@dbtopas.lt>
References: <20071008150554.GA5054@localhost.localdomain>
	<EA4BC992-7B41-457C-8AAB-A365F2431B64@syenar.hu>
	<470A6C3C.2010502@dbtopas.lt>
Message-ID: <5403701F-FDE0-4CAC-9ED9-BED10DFFC969@syenar.hu>

>> Hm, I've never suggested to do such thing. This might be
>> a misunderstanding.
>> What I've suggested for AINS()/ADEL() is to have a PP rule:
>> #translate Ains(<a>,<n>,[<x>]) => hb_AIns(<a>,<n>,<x>)
>> ...
>> I'd suggested to stick with the PP method and not to introduce
>> any official C API to remap function names to alternate
>> functionality. This is also not very secure, as I reckon,
>> but most of all it can make code really hard to understand.
>> And again why? To 100% emulate xHarbour, this is not our
>> main goal, I think 99.99% is perfectly enough.
>
> Hi,
>
>
> function overload can be done by linker or by API suggested by  
> Przemek. So, if no overloading by safe API, then linker is used.
>
> #translate is good, except:
>  - I'd like to work it in macro
>  - I'd like PROCNAME() return "AINS"
>  - I'd like in error log to see the function I'm using, i.e. AIns()

I know, but the goal is not 100% xhb compatbility.

This API call is seriously dangerous, and a normal
language for normal purposes should not contain
official APIs to modify behaviour in such a way.

Especially when we have other methods to solve the
problem. And who is using extensions is macros?
If they do, why? And why need to deal with this
complication here to such a mind-boggling extent?

Can we keep it simple, and defocus from xhb?

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Oct  8 14:06:19 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  8 10:06:29 2007
Subject: [Harbour] CHANGELOG: 2007-10-08 19:34 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <9257026e0710081050w429b50c5ndc5f880ee3cce35d@mail.gmail.com>
References: <01c809d1$Blat.v2.6.2$bff20be8$2d860eb24a6@127.0.0.1>
	<9257026e0710081050w429b50c5ndc5f880ee3cce35d@mail.gmail.com>
Message-ID: <E2C9652A-426F-40D0-8703-0BB63C6DCCFC@syenar.hu>

> On 10/8/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
>> 2007-10-08 19:34 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>>    * contrib/xhb/hbcompat.ch
>>    * contrib/xhb/xhb.ch
>>      + Moved lines which do not need xhb lib itself from xhb.ch to  
>> hbcompat.ch.
>>        xhb.ch now includes hbcompat.ch and not vice versa.
>>        So now hbcompat.ch can be used as a "lighter" compatibility
>>        layer which doesn't need the lib binary. Pls test.
>
> It's ok but I still think it be in /include since it is could be used
> to for "try catch" or "text into" which are not directly related to
> xhb.

As I wrote, hbcompat.ch is installed in your final, local
install /include/ dir when you do (or the package builder does)
a "make install" for xhb lib. This is the way _every contrib_ works.
The repository /include/ dir is reserved for Harbour stuff.

TRY CATCH/TEXT INTO has nothing to do with Harbour, they are
xhb extensions, emulated in xhb lib, now accessible from .ch
without the lib.

If this is approach is a problem for you, you can add one line
to your build script to copy to file wherever you want, or add
the path of xhb lib to your "INCLUDE" envvar to solve the problem
locally.

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Oct  8 14:09:58 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  8 10:10:05 2007
Subject: [Harbour] Extensions
In-Reply-To: <470A6CE0.1040307@gmx.net>
References: <20071008150554.GA5054@localhost.localdomain>
	<470A6CE0.1040307@gmx.net>
Message-ID: <B42DA650-9601-4735-85F1-27558F6CB94C@syenar.hu>

Hi Martin,

On 2007.10.08., at 19:46, Martin Vogel wrote:

> Hi Przemyslaw,
>
> > I also want to overload
> > AINS() and ADEL() in this library. I do not agree with Victor that
> > it will cause anything worser then we have now. IMHO now we have a
> > problem because users will use linker to overload functions and
> > the final result will be really unpredictable.
>
> IMO, it's not that nice to redefine the prototype and purpose of a  
> function without any reflection in the calling source code.  
> Wouldn't it be much easier to introduce an extended version of AINS  
> and ADEL, but with another name? This extended version could also  
> be integrated in Harbour's core, without causing any harm.

We already have them in Harbour since last week:

hb_AIns()
hb_ADel()
hb_AScan()

Brgds,
Viktor

From dbtopas at dbtopas.lt  Mon Oct  8 14:15:35 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Oct  8 10:15:32 2007
Subject: [Harbour] Extensions
In-Reply-To: <5403701F-FDE0-4CAC-9ED9-BED10DFFC969@syenar.hu>
References: <20071008150554.GA5054@localhost.localdomain>	<EA4BC992-7B41-457C-8AAB-A365F2431B64@syenar.hu>	<470A6C3C.2010502@dbtopas.lt>
	<5403701F-FDE0-4CAC-9ED9-BED10DFFC969@syenar.hu>
Message-ID: <470A73C7.1040605@dbtopas.lt>

Szak?ts Viktor wrote:
>> #translate is good, except:
>>  - I'd like to work it in macro
>>  - I'd like PROCNAME() return "AINS"
>>  - I'd like in error log to see the function I'm using, i.e. AIns()
> 
> I know, but the goal is not 100% xhb compatbility.
> ... 
> Can we keep it simple, and defocus from xhb?

Hi,


it's nothing related to xhb. I've overloaded these functions also in 
Clipper times. (I've used to overload ADEL only, to be precise, because 
AINS is not so often used).

If you want an example of not xHarbour compatible overloading. The MIN() 
and MAX() is good example of it. I think these functions were not very 
well implemented in Clipper and it should work on any number of 
parameters (not limited by two). But Harbour project is conservative in 
natural extensions of the functions.


> And who is using extensions is macros? If they do, why?

I do, because I need a plug-in for my app. Sometimes these plug-ins are 
500 lines of code. I hope to drop it the future (when I'll install 
harbour.exe together with my app and use .hrb files for plug-ins), but I 
still have it.


Best regards,
Mindaugas
From dbtopas at dbtopas.lt  Mon Oct  8 14:19:43 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Oct  8 10:19:40 2007
Subject: [Harbour] HRB codeblocks
Message-ID: <470A74BF.4070206@dbtopas.lt>

Hi,


I'd like to ask about codeblock evaluation after .hrb module (which 
created the codeblock) is unloaded. Is it OK to execute such codeblock, 
or this should be forbidden?
A developer in my team found a problem if this codeblock do a call to 
public function. It gives RTE "undefined function". He expected this RTE 
if this function was static function of .hrb module, but no RTE if it is 
public.

He found the solution by using macro:
   {|| some_public_func()} - does not work
   {|| &("some_public_func()")} - works, because marco uses dynsym table
   &("{|| some_public_func())}") - works, for the same reason

What are "for" and "against" leaving public functions accessible from 
"not active" symbol table bind to the codeblock created in unloaded module?


Best regards,
Mindaugas

From m-vogel at gmx.net  Mon Oct  8 14:32:08 2007
From: m-vogel at gmx.net (Martin Vogel)
Date: Mon Oct  8 10:32:15 2007
Subject: [Harbour] Extensions
In-Reply-To: <B42DA650-9601-4735-85F1-27558F6CB94C@syenar.hu>
References: <20071008150554.GA5054@localhost.localdomain>	<470A6CE0.1040307@gmx.net>
	<B42DA650-9601-4735-85F1-27558F6CB94C@syenar.hu>
Message-ID: <470A77A8.3010306@gmx.net>

Ah, okay! I would have named them a bit differently (look more like 
internal functions), but anyway... What's the problem with them then?
They are there, they can be used, even in parallel to the standard 
functions...

Sorry for being naive...
-Martin


Szak?ts Viktor wrote:
> Hi Martin,
> 
> On 2007.10.08., at 19:46, Martin Vogel wrote:
> 
>> Hi Przemyslaw,
>>
>> > I also want to overload
>> > AINS() and ADEL() in this library. I do not agree with Victor that
>> > it will cause anything worser then we have now. IMHO now we have a
>> > problem because users will use linker to overload functions and
>> > the final result will be really unpredictable.
>>
>> IMO, it's not that nice to redefine the prototype and purpose of a 
>> function without any reflection in the calling source code. Wouldn't 
>> it be much easier to introduce an extended version of AINS and ADEL, 
>> but with another name? This extended version could also be integrated 
>> in Harbour's core, without causing any harm.
> 
> We already have them in Harbour since last week:
> 
> hb_AIns()
> hb_ADel()
> hb_AScan()
> 
> Brgds,
> Viktor
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
From druzus at acn.waw.pl  Mon Oct  8 15:50:14 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  8 11:50:20 2007
Subject: [Harbour] Extensions
In-Reply-To: <470A77A8.3010306@gmx.net>
References: <20071008150554.GA5054@localhost.localdomain>
	<470A6CE0.1040307@gmx.net>
	<B42DA650-9601-4735-85F1-27558F6CB94C@syenar.hu>
	<470A77A8.3010306@gmx.net>
Message-ID: <20071008195014.GA6548@localhost.localdomain>

On Mon, 08 Oct 2007, Martin Vogel wrote:
> Ah, okay! I would have named them a bit differently (look more like 
> internal functions), but anyway... What's the problem with them then?
> They are there, they can be used, even in parallel to the standard 
> functions...

PP does not work for macros. I noticed that many people use extensively
macro compiler to implement some type of script language. In these scripts
they have AINS() and ADEL() using additional xHarbour parameters. PP cannot
help them in automatic code updating and such scripts are often used only
in final installations so they cannot even update it. What they do to
resolve the problem? They are creating AINS() and ADEL() functions which
works like in xHarbour and link to final binaries overloading the symbols
in libraries. The problem is that in such way wrong binaries are created.
Linkers like the one inside BCC will link more then one function to final
binaries. I cannot forbid such operation. Borland created linker which
works in such way and people will use it even if I do not like it. The
behavior of such binaries can be realy unpredictible because in some
places original AINS()/ADEL() can be executed and in some others to
overloaded one. YOu can see what can happen in tests/multifnc.
Please comment in source/vm/dynsym.c line with:
    #define HB_OVERLOAD_MULTIPLE_FUNC
then rebuild Harbour and finally compile and link code in tests/multifnc.
You will find that in final binaries functions with the same name are
linked more then once and depending on the module from which they are
called different functions are executed. This is for me unpredictable
behavior. To avoid it I want to add way to allow clean function overloading.
Such function overloading will be necessary also for dynamically loaded
PCODE, f.e. from .hrb/.dll/.so/.dyn/... files so we will have it regardless
on the decision if we add full emulation of AINS()/ADEL() to XHB library
or not. I thought that when we move xHarbour oriented code to XHB library
then we will not have to longer talk about what should be emulated or not.
If sth does not break core HVM internals then we can add it. In this case
unlike overloading by linker which may cause some unpredictable results
it will be save operation for HVM internals. XHB library exists only to
emulate xHarbour behavior and should make it as good as possible. It's
not our problem if we like some xHarbour features or not. Let's add AINS()
and ADEL() emulation and forget about the problem. IMHO farther discussion
about it here is a waste of time.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Oct  8 16:15:01 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  8 12:15:10 2007
Subject: [Harbour] Extensions
In-Reply-To: <470A73C7.1040605@dbtopas.lt>
References: <20071008150554.GA5054@localhost.localdomain>	<EA4BC992-7B41-457C-8AAB-A365F2431B64@syenar.hu>	<470A6C3C.2010502@dbtopas.lt>
	<5403701F-FDE0-4CAC-9ED9-BED10DFFC969@syenar.hu>
	<470A73C7.1040605@dbtopas.lt>
Message-ID: <5B1D4A0D-51AF-4067-9833-8C0391672591@syenar.hu>

> it's nothing related to xhb. I've overloaded these functions also  
> in Clipper times. (I've used to overload ADEL only, to be precise,  
> because AINS is not so often used).
>
> If you want an example of not xHarbour compatible overloading. The  
> MIN() and MAX() is good example of it. I think these functions were  
> not very well implemented in Clipper and it should work on any  
> number of parameters (not limited by two). But Harbour project is  
> conservative in natural extensions of the functions.
>
>
>> And who is using extensions is macros? If they do, why?
>
> I do, because I need a plug-in for my app. Sometimes these plug-ins  
> are 500 lines of code. I hope to drop it the future (when I'll  
> install harbour.exe together with my app and use .hrb files for  
> plug-ins), but I still have it.

Okey, I get it now. I still feel this very unsafe.
Imagine what happens when a malware redirects Win32
API calls to their own implementation (that can
actually happen in Win32). If any macro can redirect
our function calls, we have a problem.

I also don't think that it's normal in a language to
_override_ default built-in functions. The proper way
to do this is to use a _different name_. We're back
to language expressivity. If I override MIN() to mean
MAX() (because I have a "very strong" point in doing so),
what happens if someone reads this code: a := Min( b ).
What happens if I read this? I cannot be sure what it
does. However if I write: a := my_Min( b ), I can see
cleary that something different is happening.

What is the goal of having a language when all operators,
all function names and everything basically can be
overridden?

This is overkill flexibility, bad for the language,
bad for the developers, bad for readability.

Is this something the majority wants in Harbour?

Brgds,
Viktor

From druzus at acn.waw.pl  Mon Oct  8 16:25:23 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  8 12:25:33 2007
Subject: [Harbour] HRB codeblocks
In-Reply-To: <470A74BF.4070206@dbtopas.lt>
References: <470A74BF.4070206@dbtopas.lt>
Message-ID: <20071008202523.GB6548@localhost.localdomain>

On Mon, 08 Oct 2007, Mindaugas Kavaliauskas wrote:
> Hi,
> I'd like to ask about codeblock evaluation after .hrb module (which 
> created the codeblock) is unloaded. Is it OK to execute such codeblock, 
> or this should be forbidden?
> A developer in my team found a problem if this codeblock do a call to 
> public function. It gives RTE "undefined function". He expected this RTE 
> if this function was static function of .hrb module, but no RTE if it is 
> public.
> He found the solution by using macro:
>   {|| some_public_func()} - does not work
>   {|| &("some_public_func()")} - works, because marco uses dynsym table
>   &("{|| some_public_func())}") - works, for the same reason
> What are "for" and "against" leaving public functions accessible from 
> "not active" symbol table bind to the codeblock created in unloaded module?

As you know for C functions we do not have code with HB_FS_LOCAL symbol.
When module is unloaded I simply clear all function references in module
symbol table to eliminate possible links to unloaded functions written in
C. Such situation can happen in .DLL files but the same code is used also
for .HRB files. I left it for future modification when we add controlled
by programmer overloading level. As I understand it's a problem for you
now. So I'll add a small workaround which resolves this problem using
HB_FS_DEFERRED symbols.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Oct  8 16:51:46 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  8 12:51:52 2007
Subject: [Harbour] Extensions
In-Reply-To: <9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
References: <20071008150554.GA5054@localhost.localdomain>
	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
Message-ID: <20071008205146.GC6548@localhost.localdomain>

On Mon, 08 Oct 2007, Lorenzo Fiorini wrote:
> - the only "extension" that seem to me useful to keep from
> HB_COMPAT_XHB ( like you suggested ) is "$" for arrays.
> Do you think it can create performance problems?

It can be added without performance reduction.
Here the only one problem is that code which use it can be
compiled and linked without any errors by Clipper. To use
hash items you have to use => operator or call function
which returns hash array so you will have compile time or
link time error somewhere. Here don't. It's not a big problem
for me and I can leave with $ working also for arrays in default
build but I have to accept Marek argument that it's important
for him to not introduce such extensions. I agree with it.
Anyhow I'm interesting if $ works for arrays in some other
xbase languages, f.e.: xbase++, VO, VFP.
It does not work in Clipper and FlagShip. In CLIP it behaves
really strange, it's probably caused by missing RT error.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Oct  8 17:06:14 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  8 13:06:22 2007
Subject: [Harbour] 2007-10-08 23:05 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710082106.l98L6EBl011818@31-mo5-4.acn.waw.pl>

2007-10-08 23:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/hvm.c
    * do not clear references to public functions in symbol tables used
      by unloaded modules

  * harbour/source/compiler/complex.c
    + added disabled yet code to decode datetime in VFP strict date form
         {^YYYY/MM/DD[,][HH[:MM[:SS[.CCC]]][A|P]]}
      It's for future datetime implementation.

best regards
Przemek
From lorenzo.fiorini at gmail.com  Mon Oct  8 17:16:18 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Oct  8 13:16:24 2007
Subject: [Harbour] Extensions
In-Reply-To: <20071008205146.GC6548@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>
	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
	<20071008205146.GC6548@localhost.localdomain>
Message-ID: <9257026e0710081416j230124c9r97b17f75e437197f@mail.gmail.com>

On 10/8/07, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> It can be added without performance reduction.
> ...
> really strange, it's probably caused by missing RT error.

Many thanks for your interest.

I really don't want to continue with this issue but I replayed to
Marek with an example using dates instead of arrays:

procedure main()

  local dDate := date()
  local cDate := dtos( dDate )
  local aDate := { cDate }

  ? "2007" $ dDate

  return

I can always use wrongly $ and Clipper will build it.

However it's not a problem I'll add it to my local copy.

best regards,
Lorenzo
From m-vogel at gmx.net  Mon Oct  8 17:31:44 2007
From: m-vogel at gmx.net (Martin Vogel)
Date: Mon Oct  8 13:31:49 2007
Subject: [Harbour] Extensions
In-Reply-To: <20071008195014.GA6548@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>	<470A6CE0.1040307@gmx.net>	<B42DA650-9601-4735-85F1-27558F6CB94C@syenar.hu>	<470A77A8.3010306@gmx.net>
	<20071008195014.GA6548@localhost.localdomain>
Message-ID: <470AA1C0.5010804@gmx.net>

Hi Przemyslaw.

> PP does not work for macros. ...

I will not comment about this in detail, but you such procedures ...

 > PP cannot
> help them in automatic code updating and such scripts are often used only
> in final installations so they cannot even update it. What they do to
> resolve the problem? They are creating AINS() and ADEL() functions which
> works like in xHarbour and link to final binaries overloading the symbols
> in libraries. 

... are very unhealthy, IMO. Left alone that I hesitate to believe that 
there is no way of updating an existing software installation.

I'm 100% with you that one should never rely on a certain linker 
behavior, other than that the linker should be able resolve unique names.

> ... To avoid it I want to add way to allow clean function overloading.
> Such function overloading will be necessary also for dynamically loaded
> PCODE, f.e. from .hrb/.dll/.so/.dyn/... files so we will have it regardless
> on the decision if we add full emulation of AINS()/ADEL() to XHB library
> or not.

Hmmm. Do you really think function overloading is needed? Wouldn't it be 
cleaner, an application throws an RTE if an HRB attemps to redefine a 
function?

Suppose you have a main application A and two modules B and C. Also, 
let's suppose module B was written by programmer Bert and C by Cesar. 
Now, Bert uses AINS() a lot in his module, and he assumes the "old" 
functionality. Cesar now redefines AINS() in his module C, because he 
needs "new" functionality. But: As soon as module C is loaded, the 
behavior of module B is changed, too. One developer can destabilize a 
whole complex software project. As a countermeasure, what can Bert do to 
protect his module? How can he make sure that, in his module B, the 
"old" version of AINS() is called?

Isn't that situation what OOP was made for?

Or, if you want to implement function overloading, wouldn't it make 
sense to introduce, e.g., a namespace concept (a bit like in C++)? E.g.,

STD::AINS()      --> calls standard AINS(), always, ever
AINS()           --> calls last loaded AINS() implementation
MODULE_B::AINS() --> calls AINS() from libary "MODULE_B"

That means: The symbol table is an object, too; it can be inherited to 
any new loaded library. The root object, however, is still accessible.

> If sth does not break core HVM internals then we can add it. In this case

I haven't checked the source lately, so, sorry if this is already 
implemented: Do you add a version marker to a function's PCODE? HVM 
could check for versions (even branch to different hvm_do() functions 
for different versions) and cleanly RTE with "wrong PCODE version in 
module <...>"

>  Let's add AINS()
> and ADEL() emulation and forget about the problem. IMHO farther discussion
> about it here is a waste of time.

Sure, I did not mean to stop anything - just thought to share some 
thoughts...

Cheers,
Martin
From harbour.01 at syenar.hu  Mon Oct  8 18:13:00 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  8 14:13:10 2007
Subject: [Harbour] Extensions
In-Reply-To: <9257026e0710081416j230124c9r97b17f75e437197f@mail.gmail.com>
References: <20071008150554.GA5054@localhost.localdomain>
	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
	<20071008205146.GC6548@localhost.localdomain>
	<9257026e0710081416j230124c9r97b17f75e437197f@mail.gmail.com>
Message-ID: <FCBFF81F-F150-411A-8AA1-77CF28DAF71C@syenar.hu>

>> really strange, it's probably caused by missing RT error.
>
> Many thanks for your interest.
>
> I really don't want to continue with this issue but I replayed to
> Marek with an example using dates instead of arrays:
>
> procedure main()
>
>   local dDate := date()
>   local cDate := dtos( dDate )
>   local aDate := { cDate }
>
>   ? "2007" $ dDate
>
>   return
>
> I can always use wrongly $ and Clipper will build it.
>
> However it's not a problem I'll add it to my local copy.

The problem is not with catching mistyped code.

Rather, the problem is that the code below would
return different results than in Clipper 5.2e:

local a := {}
? 1 $ a

Since this doesn't cause a compile time error,
just different runtime behaviour, is very hard
to catch, as you've also noted.

Brgds,
Viktor

From druzus at acn.waw.pl  Mon Oct  8 18:15:15 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  8 14:15:24 2007
Subject: [Harbour] Extensions
In-Reply-To: <9257026e0710081416j230124c9r97b17f75e437197f@mail.gmail.com>
References: <20071008150554.GA5054@localhost.localdomain>
	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
	<20071008205146.GC6548@localhost.localdomain>
	<9257026e0710081416j230124c9r97b17f75e437197f@mail.gmail.com>
Message-ID: <20071008221515.GA15841@localhost.localdomain>

On Mon, 08 Oct 2007, Lorenzo Fiorini wrote:
> Many thanks for your interest.
> I really don't want to continue with this issue but I replayed to
> Marek with an example using dates instead of arrays:
> procedure main()
>   local dDate := date()
>   local cDate := dtos( dDate )
>   local aDate := { cDate }
>   ? "2007" $ dDate
>   return
> I can always use wrongly $ and Clipper will build it.

This code does not work in Harbour too. We are talking about
porting _working_ code to Clipper. AFAIR you said that you
still need CL53 compatibility. It means working with Harbour
you can by mistake use $ for arrays and the code will work.
You can also use such construction intentionally as temporary
solution and then you can forget to update the code. Code
compiled with Harbour works so it's tested and you do not
expect anything wrong when you recompile it with Clipper
but in fact you will have RTE. If possible we should avoid
such situations.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Oct  8 18:25:07 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  8 14:25:17 2007
Subject: [Harbour] Extensions
In-Reply-To: <470AA1C0.5010804@gmx.net>
References: <20071008150554.GA5054@localhost.localdomain>	<470A6CE0.1040307@gmx.net>	<B42DA650-9601-4735-85F1-27558F6CB94C@syenar.hu>	<470A77A8.3010306@gmx.net>
	<20071008195014.GA6548@localhost.localdomain>
	<470AA1C0.5010804@gmx.net>
Message-ID: <6E407BA2-B0EA-4254-9DCD-F161706442D6@syenar.hu>

I fully agree with Martin's points.

Let me add another thought to function overloading:

In Harbour (just like in Clipper) we have some functions
which have dedicated pcodes, runtime parameters checks
and even runtime optimization.

In order to make this function overloading consistent,
all of the above would have to be disabled, otherwise
following code would not run as expected, if the function
is overloaded:

Example 1)
=================
--
REDIRECT "AT" TO "my_AT" // pseudo code

? AT( "e", "hello" )
? AT( var := "e", "hello" )

FUNCTION my_AT( par1, par2 )
    RETURN par1 + par2
--

In this case, despite having two identical function
calls, with identical parameters, it would return this:

-> 2
-> ehello

Example 2)
=================
--
REDIRECT( "AADD", "my_AADD" )

var := {}
AADD( var, "1", "2" )

FUNCTION my_AADD( a, par1, par2 )
    AADD( a, par1 )
    AADD( a, par2 )
    RETURN NIL
--

User could expect this code to run properly, but it wouldn't
since the compiler would not allow AADD() to have more than
2 parameters.

Brgds,
Viktor

On 2007.10.08., at 23:31, Martin Vogel wrote:

> Hi Przemyslaw.
>
>> PP does not work for macros. ...
>
> I will not comment about this in detail, but you such procedures ...
>
> > PP cannot
>> help them in automatic code updating and such scripts are often  
>> used only
>> in final installations so they cannot even update it. What they do to
>> resolve the problem? They are creating AINS() and ADEL() functions  
>> which
>> works like in xHarbour and link to final binaries overloading the  
>> symbols
>> in libraries.
>
> ... are very unhealthy, IMO. Left alone that I hesitate to believe  
> that there is no way of updating an existing software installation.
>
> I'm 100% with you that one should never rely on a certain linker  
> behavior, other than that the linker should be able resolve unique  
> names.
>
>> ... To avoid it I want to add way to allow clean function  
>> overloading.
>> Such function overloading will be necessary also for dynamically  
>> loaded
>> PCODE, f.e. from .hrb/.dll/.so/.dyn/... files so we will have it  
>> regardless
>> on the decision if we add full emulation of AINS()/ADEL() to XHB  
>> library
>> or not.
>
> Hmmm. Do you really think function overloading is needed? Wouldn't  
> it be cleaner, an application throws an RTE if an HRB attemps to  
> redefine a function?
>
> Suppose you have a main application A and two modules B and C.  
> Also, let's suppose module B was written by programmer Bert and C  
> by Cesar. Now, Bert uses AINS() a lot in his module, and he assumes  
> the "old" functionality. Cesar now redefines AINS() in his module  
> C, because he needs "new" functionality. But: As soon as module C  
> is loaded, the behavior of module B is changed, too. One developer  
> can destabilize a whole complex software project. As a  
> countermeasure, what can Bert do to protect his module? How can he  
> make sure that, in his module B, the "old" version of AINS() is  
> called?
>
> Isn't that situation what OOP was made for?
>
> Or, if you want to implement function overloading, wouldn't it make  
> sense to introduce, e.g., a namespace concept (a bit like in C++)?  
> E.g.,
>
> STD::AINS()      --> calls standard AINS(), always, ever
> AINS()           --> calls last loaded AINS() implementation
> MODULE_B::AINS() --> calls AINS() from libary "MODULE_B"
>
> That means: The symbol table is an object, too; it can be inherited  
> to any new loaded library. The root object, however, is still  
> accessible.
>
>> If sth does not break core HVM internals then we can add it. In  
>> this case
>
> I haven't checked the source lately, so, sorry if this is already  
> implemented: Do you add a version marker to a function's PCODE? HVM  
> could check for versions (even branch to different hvm_do()  
> functions for different versions) and cleanly RTE with "wrong PCODE  
> version in module <...>"
>
>>  Let's add AINS()
>> and ADEL() emulation and forget about the problem. IMHO farther  
>> discussion
>> about it here is a waste of time.
>
> Sure, I did not mean to stop anything - just thought to share some  
> thoughts...
>
> Cheers,
> Martin
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Oct  8 18:27:40 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  8 14:27:47 2007
Subject: [Harbour] Extensions
In-Reply-To: <20071008221515.GA15841@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>
	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
	<20071008205146.GC6548@localhost.localdomain>
	<9257026e0710081416j230124c9r97b17f75e437197f@mail.gmail.com>
	<20071008221515.GA15841@localhost.localdomain>
Message-ID: <35B6311C-F85D-4E44-B92E-39F08FD0A3DD@syenar.hu>

This can quite easily happen if you or one of your
developers just cut and paste some valid Clipper code
from the Harbour-only project to the CL5.3 project,
everything compiles and links, but the pasted code
magically doesn't work (crashes).

Brgds,
Viktor

On 2007.10.09., at 0:15, Przemyslaw Czerpak wrote:

> On Mon, 08 Oct 2007, Lorenzo Fiorini wrote:
>> Many thanks for your interest.
>> I really don't want to continue with this issue but I replayed to
>> Marek with an example using dates instead of arrays:
>> procedure main()
>>   local dDate := date()
>>   local cDate := dtos( dDate )
>>   local aDate := { cDate }
>>   ? "2007" $ dDate
>>   return
>> I can always use wrongly $ and Clipper will build it.
>
> This code does not work in Harbour too. We are talking about
> porting _working_ code to Clipper. AFAIR you said that you
> still need CL53 compatibility. It means working with Harbour
> you can by mistake use $ for arrays and the code will work.
> You can also use such construction intentionally as temporary
> solution and then you can forget to update the code. Code
> compiled with Harbour works so it's tested and you do not
> expect anything wrong when you recompile it with Clipper
> but in fact you will have RTE. If possible we should avoid
> such situations.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Mon Oct  8 18:44:32 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  8 14:44:39 2007
Subject: [Harbour] Extensions
In-Reply-To: <470AA1C0.5010804@gmx.net>
References: <20071008150554.GA5054@localhost.localdomain>
	<470A6CE0.1040307@gmx.net>
	<B42DA650-9601-4735-85F1-27558F6CB94C@syenar.hu>
	<470A77A8.3010306@gmx.net>
	<20071008195014.GA6548@localhost.localdomain>
	<470AA1C0.5010804@gmx.net>
Message-ID: <20071008224432.GB15841@localhost.localdomain>

On Mon, 08 Oct 2007, Martin Vogel wrote:
> Hmmm. Do you really think function overloading is needed? Wouldn't it be 
> cleaner, an application throws an RTE if an HRB attemps to redefine a 
> function?

I can imagine situations when it can be useful functionality. F.e. you can
distribute patches for your original code as .hrb files which will overload
some of your functions. I plan to add to __HRBLOAD() and HB_LIBLOAD()
support for numeric parameter which allow to control the behavior of
repeated and/or unresolved symbols. F.e it will be possible to
chose things like late bindings (no RTE when function does not exist),
keeping local references (if loaded module M has function F which also
exists in main code then it's not overloaded but all calls to function
F from modules M will be redirected to the function in this module not
to the global one), overloading existing, etc.

> Suppose you have a main application A and two modules B and C. Also, 
> let's suppose module B was written by programmer Bert and C by Cesar. 
> Now, Bert uses AINS() a lot in his module, and he assumes the "old" 
> functionality. Cesar now redefines AINS() in his module C, because he 
> needs "new" functionality. But: As soon as module C is loaded, the 
> behavior of module B is changed, too. One developer can destabilize a 
> whole complex software project. As a countermeasure, what can Bert do to 
> protect his module? How can he make sure that, in his module B, the 
> "old" version of AINS() is called?

Things like public functions overloading are cannot be used by programmes
working in team and without any doubts it's not feature which can be used
in such way.

> Isn't that situation what OOP was made for?

Yes, and this is why I implemented real hidden methods and members.
I do not know any Clipper library givin OOP interface which resolves
this problem. In tests/clsnv.prg you will find test code which shows
how Harbour can work when name conflicts will appear. I do not know
if other xbase languages resolves the problem.

> Or, if you want to implement function overloading, wouldn't it make 
> sense to introduce, e.g., a namespace concept (a bit like in C++)? E.g.,
> STD::AINS()      --> calls standard AINS(), always, ever
> AINS()           --> calls last loaded AINS() implementation
> MODULE_B::AINS() --> calls AINS() from libary "MODULE_B"
> That means: The symbol table is an object, too; it can be inherited to 
> any new loaded library. The root object, however, is still accessible.

Interesting. The question is why you want to overload function and
if you want or not leave access to old version and what will be the
cost of adding such functionality. I will remember about it.

> >If sth does not break core HVM internals then we can add it. In this case
> I haven't checked the source lately, so, sorry if this is already 
> implemented: Do you add a version marker to a function's PCODE? HVM 
> could check for versions (even branch to different hvm_do() functions 
> for different versions) and cleanly RTE with "wrong PCODE version in 
> module <...>"

Yes, we have it and it's used by .c files. So far I haven't added it to
.hrb files because I want to join modifications in .hrb format with
new library format (.hrl?) and add small tools which will allow to
collect many .hrb modules into single library. I'll do that in some
spare time or maybe someone else will implement it.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Mon Oct  8 18:54:47 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Oct  8 14:54:58 2007
Subject: [Harbour] Extensions
In-Reply-To: <20071008221515.GA15841@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>
	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
	<20071008205146.GC6548@localhost.localdomain>
	<9257026e0710081416j230124c9r97b17f75e437197f@mail.gmail.com>
	<20071008221515.GA15841@localhost.localdomain>
Message-ID: <9257026e0710081554t3057d70di354f4eb83e3c6239@mail.gmail.com>

On 10/9/07, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> This code does not work in Harbour too. We are talking about
> ...
> such situations.

What I wanted to show is that there are many errors that can be done
using valid syntax syntax against wrong var type.

At least for me Clipper compatibility is "temporary" when I'll have a
working web GUI I'll be very happy to forget Win16 bit api and
"preprocessor table overflows" :)

My web developers use tip, gd, pgsql, hashes, regex so the "$" with
arrays is the last compatibility problem but at the end of the day it
saves few keystrokes and probably few errors since:

if ascan( a, n )
   ? "exist"
endif

and

n $ a

build anyway without any error and since key $ hash and c $ string
work, it is more likely that they forget to "not" use it with array.

best regards,
Lorenzo


best regards,
Lorenzo
From druzus at acn.waw.pl  Mon Oct  8 18:59:54 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  8 15:00:00 2007
Subject: [Harbour] Extensions
In-Reply-To: <6E407BA2-B0EA-4254-9DCD-F161706442D6@syenar.hu>
References: <20071008150554.GA5054@localhost.localdomain>
	<470A6CE0.1040307@gmx.net>
	<B42DA650-9601-4735-85F1-27558F6CB94C@syenar.hu>
	<470A77A8.3010306@gmx.net>
	<20071008195014.GA6548@localhost.localdomain>
	<470AA1C0.5010804@gmx.net>
	<6E407BA2-B0EA-4254-9DCD-F161706442D6@syenar.hu>
Message-ID: <20071008225954.GC15841@localhost.localdomain>

On Tue, 09 Oct 2007, Szak?ts Viktor wrote:
> I fully agree with Martin's points.
> Let me add another thought to function overloading:
> In Harbour (just like in Clipper) we have some functions
> which have dedicated pcodes, runtime parameters checks
> and even runtime optimization.
> In order to make this function overloading consistent,
> all of the above would have to be disabled, otherwise
> following code would not run as expected, if the function
> is overloaded:

Victor,
Don't you loose the main context? Why we have XHB lib?
I thought that it's for xHarbour user and it should allow to use
xHarbour only code with Harbour.
So now short answer. If we will not make the function to overload
symbols documented public API then can I implement in XHB lib xHarbour
compatible version of AINS() and ADEL()? Not for you or me or other
Harbour users but for xHarbour users.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Oct  8 19:23:34 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  8 15:23:39 2007
Subject: [Harbour] Extensions
In-Reply-To: <470A6C3C.2010502@dbtopas.lt>
References: <20071008150554.GA5054@localhost.localdomain>
	<EA4BC992-7B41-457C-8AAB-A365F2431B64@syenar.hu>
	<470A6C3C.2010502@dbtopas.lt>
Message-ID: <20071008232334.GA16226@localhost.localdomain>

On Mon, 08 Oct 2007, Mindaugas Kavaliauskas wrote:
> P.S. Przemek, if group's decision will be to not add hb_vmSetFunction() 
> to the core, can you send me? I've wrote my own version of this 
> function, but I think yours will be more efficient. My version scans 
> symbol tables of all modules to find ADel() address and replace it. I 
> can't find the way to optimize it (The only way I see is creation of 
> symbol list for all symbols of the same dynsym. It requires one more 
> pointer for every SYMBOL item).

In current code it has to be done in such way (scanning all symbols)
though it's possible to add small trick. It will be enough to set
HB_FS_DEFERRED flag in all symbols which are not HB_FS_LOCAL and has
been registered before. Then updating function address in main HB_DYNS
will automatically change all references. Such modifications also
eliminates the problem with references to multiple functions with
the same name not updated by linker - we will effectively use only
one reference so we may want to add it as workaround for linkers like
the one in BCC.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Oct  8 19:24:14 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  8 15:24:21 2007
Subject: [Harbour] Extensions
In-Reply-To: <20071008225954.GC15841@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>
	<470A6CE0.1040307@gmx.net>
	<B42DA650-9601-4735-85F1-27558F6CB94C@syenar.hu>
	<470A77A8.3010306@gmx.net>
	<20071008195014.GA6548@localhost.localdomain>
	<470AA1C0.5010804@gmx.net>
	<6E407BA2-B0EA-4254-9DCD-F161706442D6@syenar.hu>
	<20071008225954.GC15841@localhost.localdomain>
Message-ID: <970FF192-EDE5-45A9-8C3F-B73986D980A8@syenar.hu>

Hi Przemek,

> Victor,
> Don't you loose the main context? Why we have XHB lib?
> I thought that it's for xHarbour user and it should allow to use
> xHarbour only code with Harbour.

We have xhb lib to offer compatibility for xhb users,
but xhb compatibility is not the main goal of Harbour,
so if you now start to add core Harbour features to
support xhb lib, which are at the same time a disadvantage
for Harbour, I'm against them.

Let's notice that we're occupied with xhb issues lately
to such an extent which is completely overkill.

This project is loosing focus.

> So now short answer. If we will not make the function to overload

Yes, but the points are valid, aren't they?

> symbols documented public API then can I implement in XHB lib xHarbour
> compatible version of AINS() and ADEL()? Not for you or me or other
> Harbour users but for xHarbour users.

I apologize, I'm not sure if I understood your correctly here.

We're dealing with AINS()/ADEL() since weeks. It is now
separated to xhb lib and working properly. It uses the same PP
method we've been using for another one hundred xhb compatibility
function calls in hbcompat.ch since years. What are you trying
to fix now?

Brgds,
Viktor

From druzus at acn.waw.pl  Mon Oct  8 19:47:25 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  8 15:47:31 2007
Subject: [Harbour] Extensions
In-Reply-To: <970FF192-EDE5-45A9-8C3F-B73986D980A8@syenar.hu>
References: <20071008150554.GA5054@localhost.localdomain>
	<470A6CE0.1040307@gmx.net>
	<B42DA650-9601-4735-85F1-27558F6CB94C@syenar.hu>
	<470A77A8.3010306@gmx.net>
	<20071008195014.GA6548@localhost.localdomain>
	<470AA1C0.5010804@gmx.net>
	<6E407BA2-B0EA-4254-9DCD-F161706442D6@syenar.hu>
	<20071008225954.GC15841@localhost.localdomain>
	<970FF192-EDE5-45A9-8C3F-B73986D980A8@syenar.hu>
Message-ID: <20071008234725.GB16226@localhost.localdomain>

On Tue, 09 Oct 2007, Szak?ts Viktor wrote:
> I apologize, I'm not sure if I understood your correctly here.
> We're dealing with AINS()/ADEL() since weeks. It is now
> separated to xhb lib and working properly. It uses the same PP
> method we've been using for another one hundred xhb compatibility
> function calls in hbcompat.ch since years. What are you trying
> to fix now?

Two weeks ago we have xHarbour compatible AINS() and ADEL() in core
code covered by HB_COMPAT_XHB macro. Now we do not have them and
only PP rules instead what helps for normal code but does not work for
macros so we reduced the functionality which existed few days ago.
We also have in XHB library redirection for many XHB functions.
See xhbfunc.c. Not all functions from hbcompat.ch have been added
yet but most and the missing functions will be added by us or by
xHarbour users themselves. In Harbour using functions with variable
number of parameters everyone can add such wrapper very easy, f.e.:
    func HexToNum(...)
    return hb_HexToNum(...)
It's very simple users knows about it and are adding missing
functions yourself. Unfortunately they are also making the
same for functions defined in our core code, f.e. infamous
ADEL()/AINS():
    func adel(...)
    return hb_adel(...)
and here they can create wrong binaries because ADEL() from
core code cannot be cleanly overloaded in such way so some
code will used hb_adel() and some other original adel().
Without some help from us they will not be able to resolve
this problem and as I know the real life they will use above
hack and we will not be able to forbid it. So the question is:
should we restore the functionality which existed few days ago
covered by HB_COMPAT_XHB so xHarbour user will not have to use
dirty hacks like above as workaround or not.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Oct  8 20:27:13 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct  8 16:27:21 2007
Subject: [Harbour] Extensions
In-Reply-To: <20071008234725.GB16226@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>
	<470A6CE0.1040307@gmx.net>
	<B42DA650-9601-4735-85F1-27558F6CB94C@syenar.hu>
	<470A77A8.3010306@gmx.net>
	<20071008195014.GA6548@localhost.localdomain>
	<470AA1C0.5010804@gmx.net>
	<6E407BA2-B0EA-4254-9DCD-F161706442D6@syenar.hu>
	<20071008225954.GC15841@localhost.localdomain>
	<970FF192-EDE5-45A9-8C3F-B73986D980A8@syenar.hu>
	<20071008234725.GB16226@localhost.localdomain>
Message-ID: <CA1C0FE5-9E01-4145-98A3-ECAA532508A2@syenar.hu>

>     func HexToNum(...)
>     return hb_HexToNum(...)
> It's very simple users knows about it and are adding missing
> functions yourself. Unfortunately they are also making the
> same for functions defined in our core code, f.e. infamous
> ADEL()/AINS():
>     func adel(...)
>     return hb_adel(...)
> and here they can create wrong binaries because ADEL() from
> core code cannot be cleanly overloaded in such way so some
> code will used hb_adel() and some other original adel().

Przemek, I know you're all for perfection, but I think
you're taking xhb compatibility issues too far this time.

I didn't see any requests on the list for 2 (?) years
complaining about the hbcompat.ch (PP) way of achieving
compatibility (did you?). I've actually just modified it,
so that it can be used _without_ the xhb lib itself (for
Lorenzo's request).

> Without some help from us they will not be able to resolve
> this problem and as I know the real life they will use above
> hack and we will not be able to forbid it. So the question is:

Don't forget that xhb users have another option:

Change those AINS()/ADEL() calls to hb_AINS()/hb_ADEL()
in code and add wrappers in code or in xhb.

I'd recommend this one instead of hacking Harbour, hacking
linkers and hacking with compatibility issues. Since this
is the way built-in functions have to extended to maintain
compatibility.

> should we restore the functionality which existed few days ago
> covered by HB_COMPAT_XHB so xHarbour user will not have to use
> dirty hacks like above as workaround or not.

To me it seem the question is really: Is this the xhb project,
or is this still the Harbour project?

My vote is to leave things as they are now. (or add the low
level hack (API) to xhb lib itself, so that it doesn't have
anything to do with core.)

Notice that extending AINS() was a dirty hack by itself (in
xhb), so I'm not sure if it's the job of Harbour core to add
another dirty hack to give a total solution, while creating
deeper problems, and when we have a 99.9% solution already.

Can we keep the hacks inside xhb lib?

Brgds,
Viktor

BTW, I'd really be interested in your opinion on the issues
raised by Martin and me, regarding this function overloading
feature.

From m-vogel at gmx.net  Mon Oct  8 22:04:45 2007
From: m-vogel at gmx.net (Martin Vogel)
Date: Mon Oct  8 18:04:52 2007
Subject: [Harbour] Extensions
In-Reply-To: <20071008224432.GB15841@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>	<470A6CE0.1040307@gmx.net>	<B42DA650-9601-4735-85F1-27558F6CB94C@syenar.hu>	<470A77A8.3010306@gmx.net>	<20071008195014.GA6548@localhost.localdomain>	<470AA1C0.5010804@gmx.net>
	<20071008224432.GB15841@localhost.localdomain>
Message-ID: <470AE1BD.5070204@gmx.net>

Hello Przemyslaw,


> I can imagine situations when it can be useful functionality. F.e. you can
 > [snip]
> to the global one), overloading existing, etc.

okay, you are right, there are situations where function overloading is 
useful.

OTOH, I think it would be useful if a developer can "protect" his 
function calls against overloading. Or: He just wants to add a little 
functionality, and needs a fallback to the standard, like

<PSEUDOCODE>
procedure QOUT ()
   if lspecialcondition
     do_special_stuff ()
   else
     std::qout ()
   endif
return
</PSEUDOCODE>

Also, the other developer, that can be a customer, too!!! Just think of 
what happens, if they redefine internal functions...

>> Isn't that situation what OOP was made for?
> 
> Yes, and this is why I implemented real hidden methods and members.
> I do not know any Clipper library givin OOP interface which resolves
> this problem. In tests/clsnv.prg you will find test code which shows
> how Harbour can work when name conflicts will appear. I do not know
> if other xbase languages resolves the problem.

I probably have not explained correctly what I was thinking about here: 
Let's say, the external script/macro etc. is an object. Calling "AINS" 
in that script would send "AINS" message to the script object. Once you 
do it that way, you have all the power of inheritance and can easily 
override methods, you "just" have to instantiate the object from the 
right class.

But I'm aware that this a different approach, not easy to implement, and 
no quick cure to current problems.

> Interesting. The question is why you want to overload function and
> if you want or not leave access to old version and what will be the
> cost of adding such functionality. I will remember about it.

Why you want to overload, but also keep the old functionality? I could 
think of two reasons:

(i) team projects: multiple developers, and, to make it worse, some 
"developers" could be users/customers that customize your application

(ii) Most overloading happens, IMO, because people just want to add a 
little bit of functionality. But now, they have to rewrite all 
functionality.

Cost: You have to add the new loaded symbols to the symbol table and 
maybe do a resort. This might take some computation time, but it can be 
done while loading the library. This happens "seldom" during an 
application run time. At call time (happens "often"), I would not expect 
much overload.

> Yes, we have it and it's used by .c files. So far I haven't added it to
> .hrb files because I want to join modifications in .hrb format with
> new library format (.hrl?) and add small tools which will allow to
> collect many .hrb modules into single library. I'll do that in some
> spare time or maybe someone else will implement it.

Sounds great!! Keep up the good work!

Best,
Martin
From lorenzo.fiorini at gmail.com  Tue Oct  9 02:50:35 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Oct  8 22:50:39 2007
Subject: [Harbour] Could "in theory" debug be a separated app?
Message-ID: <9257026e0710082350n14503053hf1d2957029cdaf3d@mail.gmail.com>

I wonder if "in theory" debug could be a separated app like "old" cld.exe

Having debug linked to the app and using the RTL functions/classes
makes difficult to debug RTL itself and also it can't be used with
"simple" gt like gtcgi or gtnul or different GUI like Windows/Gtk.

Just a curiosity not a request :)

best regards,
Lorenzo
From druzus at acn.waw.pl  Tue Oct  9 03:05:40 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  8 23:05:46 2007
Subject: [Harbour] 2007-10-09 09:05 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710090705.l9975eS9028140@31-mo5-4.acn.waw.pl>

2007-10-09 09:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/runner.c
  * harbour/source/compiler/genhrb.c
    ! added support for functions marked as DYNAMIC in .hrb format

  * harbour/source/compiler/complex.c
    + finished code (stil disabled) to decode datetime in
       VFP strict date form

best regards
Przemek
From devlist.harbour at gmail.com  Tue Oct  9 03:21:42 2007
From: devlist.harbour at gmail.com (Patrick Mast, xHarbour.com)
Date: Mon Oct  8 23:22:00 2007
Subject: [Harbour] 2007-10-09 09:05 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200710090705.l9975eS9028140@31-mo5-4.acn.waw.pl>
References: <200710090705.l9975eS9028140@31-mo5-4.acn.waw.pl>
Message-ID: <89F37804-3E8B-4D71-88A2-DF8FC63F4200@GMail.com>

Hello Przemek,

> 2007-10-09 09:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/vm/runner.c
>   * harbour/source/compiler/genhrb.c
>     ! added support for functions marked as DYNAMIC in .hrb format

Sorry, I don't understand this. Can you explain?

Thanks!

Patrick
From devlist.harbour at gmail.com  Tue Oct  9 03:33:30 2007
From: devlist.harbour at gmail.com (Patrick Mast, xHarbour.com)
Date: Mon Oct  8 23:33:45 2007
Subject: [Harbour] Could "in theory" debug be a separated app?
In-Reply-To: <9257026e0710082350n14503053hf1d2957029cdaf3d@mail.gmail.com>
References: <9257026e0710082350n14503053hf1d2957029cdaf3d@mail.gmail.com>
Message-ID: <6F79EEFE-4EE4-49D8-8DB9-CD8A8FDFFC56@GMail.com>

Hello Lorzenzo,

> I wonder if "in theory" debug could be a separated app like "old"  
> cld.exe
>
> Having debug linked to the app and using the RTL functions/classes
> makes difficult to debug RTL itself and also it can't be used with
> "simple" gt like gtcgi or gtnul or different GUI like Windows/Gtk.

xHarbour.com's xDebugger is a stand alone application that debug's  
your application through TCP port 10000.
xDebugger comes as a Windows GUI or Linux application.

More info on xDebugger can be found here:
http://www.xHarbour.com/xDebugger

Patrick
From druzus at acn.waw.pl  Tue Oct  9 03:37:57 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  8 23:38:03 2007
Subject: [Harbour] Extensions
In-Reply-To: <470AE1BD.5070204@gmx.net>
References: <20071008150554.GA5054@localhost.localdomain>
	<470A6CE0.1040307@gmx.net>
	<B42DA650-9601-4735-85F1-27558F6CB94C@syenar.hu>
	<470A77A8.3010306@gmx.net>
	<20071008195014.GA6548@localhost.localdomain>
	<470AA1C0.5010804@gmx.net>
	<20071008224432.GB15841@localhost.localdomain>
	<470AE1BD.5070204@gmx.net>
Message-ID: <20071009073757.GA28075@localhost.localdomain>

On Mon, 08 Oct 2007, Martin Vogel wrote:
> OTOH, I think it would be useful if a developer can "protect" his 
> function calls against overloading. Or: He just wants to add a little 
> functionality, and needs a fallback to the standard, like
> <PSEUDOCODE>
> procedure QOUT ()
>   if lspecialcondition
>     do_special_stuff ()
>   else
>     std::qout ()
>   endif
> return
> </PSEUDOCODE>
> Also, the other developer, that can be a customer, too!!! Just think of 
> what happens, if they redefine internal functions...

The same what happens now when you use your customized errorsys or
getsys in Clipper. Many users use overloading everyday and they can
break many of RTL functionality when their replacement for standard
subsystems like GET will be wrong. Do you want to add such protection
to core code and to all functions std:: prefix to be sure that they
will not be overloaded statically by linker or dynamically by __HBRLOAD()
or HB_LIBLOAD() ?

> I probably have not explained correctly what I was thinking about here: 
> Let's say, the external script/macro etc. is an object. Calling "AINS" 
> in that script would send "AINS" message to the script object. Once you 
> do it that way, you have all the power of inheritance and can easily 
> override methods, you "just" have to instantiate the object from the 
> right class.

I do not see any difference between breaking standard function by
overloading this function with some other having different functionality
and breaking standard class by changing class definition using one
of __obj*() or __cls*() functions which are accessible from normal code.
In both cases the result will be catastrophic. This is also the reason
why I added LOCK[ED] clause to ENDCLASS - if you use
    ENDCLASS LOCKED
in your class definition then HVM will block any later class modifications.

> But I'm aware that this a different approach, not easy to implement, and 
> no quick cure to current problems.

Yet another thing for executed scripts is introducing some privileges
or list of accessible functions. This is sth what we may want to address
in the future but it will need some deep modifications to make it well.
We will have to introduce the scope of executed code which will be respected
also by macro compiler so it cannot be used as workaround for limitations
(f.e.: &("ForbiddenFunc()")) but it's much wider problem we may want to
discuss somewhere in the future. Please note that now we have compiler
library. See utils/hbrun and utils/hbdot as examples of code which use
this library. Now hbrun and hbdot can compile and execute any .prg code.
It's very interesting functionality which can be used in many different
applications.

> Why you want to overload, but also keep the old functionality? I could 
> think of two reasons:
> (i) team projects: multiple developers, and, to make it worse, some 
> "developers" could be users/customers that customize your application
> (ii) Most overloading happens, IMO, because people just want to add a 
> little bit of functionality. But now, they have to rewrite all 
> functionality.

(iii) you want to change or fix single function without replacing whole
application not upgraded for last 10 years so now no one wants to
replace it by current version due to possible problems in production
environment. It's much easier and safe to replace only the one function.

Ask people using customized errorsys or getsys why they wanted to
make it for other possible reasons.

> Cost: You have to add the new loaded symbols to the symbol table and 
> maybe do a resort. This might take some computation time, but it can be 
> done while loading the library. This happens "seldom" during an 
> application run time. At call time (happens "often"), I would not expect 
> much overload.

The bindings can be calculated when library is loaded so it's not a
problem. The problem is that it may introduce additional complications
for final users. Just think what will happen if someone will have code
using GETs and few functions will have std:: prefix but not all and
he will link his own customized getsys.prg (statically or dynamically).
So far we do not have any problem in comparison to possible new ones
which may appear after introducing such <namespace>:: prefix.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Oct  9 03:40:32 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct  8 23:40:38 2007
Subject: [Harbour] Could "in theory" debug be a separated app?
In-Reply-To: <9257026e0710082350n14503053hf1d2957029cdaf3d@mail.gmail.com>
References: <9257026e0710082350n14503053hf1d2957029cdaf3d@mail.gmail.com>
Message-ID: <20071009074032.GB28075@localhost.localdomain>

On Tue, 09 Oct 2007, Lorenzo Fiorini wrote:
> I wonder if "in theory" debug could be a separated app like "old" cld.exe
> Having debug linked to the app and using the RTL functions/classes
> makes difficult to debug RTL itself and also it can't be used with
> "simple" gt like gtcgi or gtnul or different GUI like Windows/Gtk.

AFAIR Visual Debugger for xHarbour written by Phil Krylov is such
separate application which communicates with programs compiled by
xHarbour using TCP connection so it's possible.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Oct  9 04:02:56 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  9 00:03:05 2007
Subject: [Harbour] Extensions
In-Reply-To: <20071009073757.GA28075@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>
	<470A6CE0.1040307@gmx.net>
	<B42DA650-9601-4735-85F1-27558F6CB94C@syenar.hu>
	<470A77A8.3010306@gmx.net>
	<20071008195014.GA6548@localhost.localdomain>
	<470AA1C0.5010804@gmx.net>
	<20071008224432.GB15841@localhost.localdomain>
	<470AE1BD.5070204@gmx.net>
	<20071009073757.GA28075@localhost.localdomain>
Message-ID: <7CCF3DC6-A0EB-40B0-ADCF-45F3816646E6@syenar.hu>

Hi Przemek,

> The same what happens now when you use your customized errorsys or
> getsys in Clipper. Many users use overloading everyday and they can
> break many of RTL functionality when their replacement for standard
> subsystems like GET will be wrong. Do you want to add such protection
> to core code and to all functions std:: prefix to be sure that they

Is there any linker which will search for symbols in
libs which they've already found in obj code or preceding
libs?

If not, I think an other viable solution for xhb AINS()/ADEL()
is to move these two functions to separate source files, so
that they can be overridden at link time.

Is there any problem with this?

Brgds,
Viktor

From druzus at acn.waw.pl  Tue Oct  9 04:55:37 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  9 00:55:42 2007
Subject: [Harbour] 2007-10-09 09:05 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <89F37804-3E8B-4D71-88A2-DF8FC63F4200@GMail.com>
References: <200710090705.l9975eS9028140@31-mo5-4.acn.waw.pl>
	<89F37804-3E8B-4D71-88A2-DF8FC63F4200@GMail.com>
Message-ID: <20071009085536.GA13919@localhost.localdomain>

On Tue, 09 Oct 2007, Patrick Mast, xHarbour.com wrote:
> Hello Przemek,
> >2007-10-09 09:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> >  * harbour/source/vm/runner.c
> >  * harbour/source/compiler/genhrb.c
> >    ! added support for functions marked as DYNAMIC in .hrb format
> Sorry, I don't understand this. Can you explain?

We can declare function as DYNAMIC what disables static bindings.
F.e. I have mycode.hrb file with myHrbFunc() which was created from
this code:

    /*** mycode.prg ***/
    func myHrbFunc()
       ? "Hello World!"
    return nil

and I want to call this function from my main code file.
If I'll make:

    /*** myprog.prg ***/
    proc main()
       __hrbLoad("mycode.hrb")
       myHrbFunc()
    return

then during linking I will have information about missing
HB_FUN_MYHRBFUNC function due to unresolved static binding in
final binaries. It can be eliminated by declaring myHrbFunc()
as dynamic, f.e.:

    dynamic myHrbFunc
    proc main()
       __hrbLoad("mycode.hrb")
       myHrbFunc()
    return

The problem was that DYNAMIC declaration was working only in .c files
and not in .hrb format so it was not possible to create two .hrb files
with cross references and then load them. Now DYNAMIC works also for
.hrb files.

best regards,
Przemek
From devlist.harbour at gmail.com  Tue Oct  9 05:08:05 2007
From: devlist.harbour at gmail.com (Patrick Mast, xHarbour.com)
Date: Tue Oct  9 01:08:23 2007
Subject: [Harbour] 2007-10-09 09:05 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20071009085536.GA13919@localhost.localdomain>
References: <200710090705.l9975eS9028140@31-mo5-4.acn.waw.pl>
	<89F37804-3E8B-4D71-88A2-DF8FC63F4200@GMail.com>
	<20071009085536.GA13919@localhost.localdomain>
Message-ID: <6F0D52F9-7120-406D-98C1-2A00810BE3FA@GMail.com>

Hello Przemek,

> On Tue, 09 Oct 2007, Patrick Mast, xHarbour.com wrote:
>> Hello Przemek,
>>> 2007-10-09 09:05 UTC+0200 Przemyslaw Czerpak (druzus/at/ 
>>> priv.onet.pl)
>>>  * harbour/source/vm/runner.c
>>>  * harbour/source/compiler/genhrb.c
>>>    ! added support for functions marked as DYNAMIC in .hrb format
>> Sorry, I don't understand this. Can you explain?
>
> We can declare function as DYNAMIC what disables static bindings.
> F.e. I have mycode.hrb file with myHrbFunc() which was created from
> this code:

Ok, thank you for the explanation. now I understand :)

Patrick
From druzus at acn.waw.pl  Tue Oct  9 05:24:10 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  9 01:24:18 2007
Subject: [Harbour] Extensions
In-Reply-To: <7CCF3DC6-A0EB-40B0-ADCF-45F3816646E6@syenar.hu>
References: <20071008150554.GA5054@localhost.localdomain>
	<470A6CE0.1040307@gmx.net>
	<B42DA650-9601-4735-85F1-27558F6CB94C@syenar.hu>
	<470A77A8.3010306@gmx.net>
	<20071008195014.GA6548@localhost.localdomain>
	<470AA1C0.5010804@gmx.net>
	<20071008224432.GB15841@localhost.localdomain>
	<470AE1BD.5070204@gmx.net>
	<20071009073757.GA28075@localhost.localdomain>
	<7CCF3DC6-A0EB-40B0-ADCF-45F3816646E6@syenar.hu>
Message-ID: <20071009092410.GB13919@localhost.localdomain>

On Tue, 09 Oct 2007, Szak?ts Viktor wrote:
> Is there any linker which will search for symbols in
> libs which they've already found in obj code or preceding
> libs?
> If not, I think an other viable solution for xhb AINS()/ADEL()
> is to move these two functions to separate source files, so
> that they can be overridden at link time.
> Is there any problem with this?

It will work for static binaries and in such case it's enough
solution so probably it's good idea to make sth like that to
reduce the problem but it will not work for dynamic libraries
on some platforms. It will work in Linux and .so files but
if you will use harbour.dll on Windows then internal bindings
to overloaded symbols in .dll are not updated. It should not
be a problem for code inside harbour.dll because old AINS()
and ADEL() make all necessary operations but I cannot say which
version of AINS() / ADEL() will be linked with other .DLLs which
may need strict xHarbour behavior. And of course I do not know
which function will be registered first in HVM module. It will
depend on order of executed startup functions. But in
source/vm/dynsym.c symbols with HB_FS_LOCAL flag are preferred
so any .prg wrappers (or .c ones but registering own symbol table)
will have higher priority - it will be enough to be sure that
AINS()/ADEL() from XHB lib will be registered in dynsym table.
So problem can appear only in not updated static bindings. We
can add to HVM final pass which will update bindings in all
registered symbols to resolve it. It will cause that only one
version of function will be visible even if multiple functions
are linked so we may want to add it as additional protection
code. The only one place where it will not update bindings is
C code which makes: HB_FUNC_EXEC( <funcName> ) - HVM do not
know anything about such bindings and cannot update/fix them.
In this case is not a problem.

best regards,
Przemek
From dbtopas at dbtopas.lt  Tue Oct  9 05:59:04 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Oct  9 01:59:00 2007
Subject: [Harbour] Extensions
In-Reply-To: <5B1D4A0D-51AF-4067-9833-8C0391672591@syenar.hu>
References: <20071008150554.GA5054@localhost.localdomain>	<EA4BC992-7B41-457C-8AAB-A365F2431B64@syenar.hu>	<470A6C3C.2010502@dbtopas.lt>	<5403701F-FDE0-4CAC-9ED9-BED10DFFC969@syenar.hu>	<470A73C7.1040605@dbtopas.lt>
	<5B1D4A0D-51AF-4067-9833-8C0391672591@syenar.hu>
Message-ID: <470B50E8.1010001@dbtopas.lt>

Szak?ts Viktor wrote:
>> I do, because I need a plug-in for my app. Sometimes these plug-ins 
>> are 500 lines of code. I hope to drop it the future (when I'll install 
>> harbour.exe together with my app and use .hrb files for plug-ins), but 
>> I still have it.
> 
> Okey, I get it now. 

I think I've failed. Sorry...

> I still feel this very unsafe.
> Imagine what happens when a malware redirects Win32
> API calls to their own implementation (that can
> actually happen in Win32). 

1 million $ solution for free: do not try to add malware to the list of 
linked libraries.

> If any macro can redirect our function calls, we have a problem.

Macro can not redirect, since hb_vmSetFunction is C (not Harbour) 
function. Only linked library can do it.


EOT on this topic.


Best regards,
Mindaugas
From harbour.01 at syenar.hu  Tue Oct  9 06:11:57 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  9 02:12:06 2007
Subject: [Harbour] Extensions
In-Reply-To: <20071009092410.GB13919@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>
	<470A6CE0.1040307@gmx.net>
	<B42DA650-9601-4735-85F1-27558F6CB94C@syenar.hu>
	<470A77A8.3010306@gmx.net>
	<20071008195014.GA6548@localhost.localdomain>
	<470AA1C0.5010804@gmx.net>
	<20071008224432.GB15841@localhost.localdomain>
	<470AE1BD.5070204@gmx.net>
	<20071009073757.GA28075@localhost.localdomain>
	<7CCF3DC6-A0EB-40B0-ADCF-45F3816646E6@syenar.hu>
	<20071009092410.GB13919@localhost.localdomain>
Message-ID: <A88B3860-7EA5-45CF-BAF5-8C37F9CBAAA7@syenar.hu>

Hi Przemek,

> On Tue, 09 Oct 2007, Szak?ts Viktor wrote:
>> Is there any linker which will search for symbols in
>> libs which they've already found in obj code or preceding
>> libs?
>> If not, I think an other viable solution for xhb AINS()/ADEL()
>> is to move these two functions to separate source files, so
>> that they can be overridden at link time.
>> Is there any problem with this?
>
> It will work for static binaries and in such case it's enough
> solution so probably it's good idea to make sth like that to
> reduce the problem but it will not work for dynamic libraries
> on some platforms. It will work in Linux and .so files but

Okey.

> if you will use harbour.dll on Windows then internal bindings
> to overloaded symbols in .dll are not updated. It should not

For those who need overloading RTL functions from harbour.dll,
I think they need to create an (or use a prebuilt) alternate
one which already has the proper versions linked in. We can
even add a script to xhb dir to build such a .dll.

If someone is using a .dll I think it's far from expected
that things can be overloaded. Neither the creator, nor the
user would expect such functionality, in any languages or
environments.

> be a problem for code inside harbour.dll because old AINS()
> and ADEL() make all necessary operations but I cannot say which
> version of AINS() / ADEL() will be linked with other .DLLs which
> may need strict xHarbour behavior. And of course I do not know
> which function will be registered first in HVM module. It will
> depend on order of executed startup functions. But in
> source/vm/dynsym.c symbols with HB_FS_LOCAL flag are preferred
> so any .prg wrappers (or .c ones but registering own symbol table)
> will have higher priority - it will be enough to be sure that
> AINS()/ADEL() from XHB lib will be registered in dynsym table.
> So problem can appear only in not updated static bindings. We
> can add to HVM final pass which will update bindings in all
> registered symbols to resolve it. It will cause that only one
> version of function will be visible even if multiple functions
> are linked so we may want to add it as additional protection
> code. The only one place where it will not update bindings is
> C code which makes: HB_FUNC_EXEC( <funcName> ) - HVM do not
> know anything about such bindings and cannot update/fix them.
> In this case is not a problem.

The problem seems wider to me (and not just from the technical
implementation side).

1) Let's say I'm an xhb user who needs special xhb functionality,
also in macros to make this even more complex, but I want to
use Harbour (and not xhb) for some reason, by using harbour.dll.
So far so good, I _overload_ something to my own version, but I
also happen to use foobar.dll which has code written by someone
else (and available as a binary), which happens to rely on the
original behaviour of my overloaded function. What happens then?

2) Let's look a little bit further; Let's say we have strong
typing in the future.

I have a function declared as AINS( x AS AARRAY, n AS NUMERIC ) AS NIL
but someone overloaded AINS() to something else. How will the
strong typing engine know about the declaration change at compile
time, when the overloading is done anytime at runtime?

3) Regarding macro compatibility:

What if I have a program which happens to use macros (scripts)
developed by 3rd parties. Those macros are using standard
Clipper 5.x compatible code which expects usual and documented
behaviour of RTL functions. But, I also want xhb extensions
in my application, so I overload some standard functions.
What happens with these macros?

How can a 3rd party script developer make sure that plain
C5.x code will be guaranteed to run as designed and tested?

4) How can you guarantee that overloading will be setup and
ready in all INIT FUNCTIONs?

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Oct  9 06:21:35 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  9 02:21:45 2007
Subject: [Harbour] Extensions
In-Reply-To: <470B50E8.1010001@dbtopas.lt>
References: <20071008150554.GA5054@localhost.localdomain>	<EA4BC992-7B41-457C-8AAB-A365F2431B64@syenar.hu>	<470A6C3C.2010502@dbtopas.lt>	<5403701F-FDE0-4CAC-9ED9-BED10DFFC969@syenar.hu>	<470A73C7.1040605@dbtopas.lt>
	<5B1D4A0D-51AF-4067-9833-8C0391672591@syenar.hu>
	<470B50E8.1010001@dbtopas.lt>
Message-ID: <23FAAA1F-8941-4191-B268-2314C98B54CB@syenar.hu>

> Szak?ts Viktor wrote:
>>> I do, because I need a plug-in for my app. Sometimes these plug- 
>>> ins are 500 lines of code. I hope to drop it the future (when  
>>> I'll install harbour.exe together with my app and use .hrb files  
>>> for plug-ins), but I still have it.
>> Okey, I get it now.
>
> I think I've failed. Sorry...
>
>> I still feel this very unsafe.
>> Imagine what happens when a malware redirects Win32
>> API calls to their own implementation (that can
>> actually happen in Win32).
>
> 1 million $ solution for free: do not try to add malware to the  
> list of linked libraries.

Well, it's like if you'd said "don't run malware on Windows" :)

>> If any macro can redirect our function calls, we have a problem.
>
> Macro can not redirect, since hb_vmSetFunction is C (not Harbour)  
> function. Only linked library can do it.

AFAIKS, macros can simply load and use a .dll to solve this "problem".

If you use Harbour as a scripting language running on a web-server,
this can easily become a real problem. (maybe even without overloading
though).

Brgds,
Viktor

From makis1970 at gmail.com  Tue Oct  9 06:58:28 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Tue Oct  9 02:58:13 2007
Subject: [Harbour] Extensions
In-Reply-To: <20071008205146.GC6548@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
	<20071008205146.GC6548@localhost.localdomain>
Message-ID: <002d01c80a63$55121e70$ff365b50$@com>

I'm reading a lot of different approaches to the same "problem". Of course a
language must go forward and introduce new parts that make the language
better. Of course also we need this new things without reducing the
executions speed as possible. Also we need an easy way to be compatible with
older-different versions of the language ( as possible). The bad thing with
Harbour-xHarbour is that we don't have a strong typed language ( at least
where we want to be) and this make the compile time checking very difficult.
For me the best approach is to have a compile time check for version and
compatibility. As an example let's say that cl5.2 is version 1. Cl5.3 is
version 1.5 and from now on Harbour is version 2.0. I'm sure that everyone
wants something like that when we check cl5.3 we must have compile time
checking for harbour extensions. Of course this version will be upward
compatible. If we check harbour ver.2.0 we can use any available extension
but it will not be backward compatible. Even the latest VS2008 have the same
approach and from many years the same is true for html editors-designers and
many other languages. I know that something like that is very difficult but
it's the only way if we want everybody to be happy. There thinks that are a
lot more difficult to catch as an example array element by reference that
it's not supported by clipper. If by accident use something like that in the
same code for CL and with Harbour-xHarbour we will have difficult time to
find the error. 

Regards
Mike Evans   

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Monday, October 08, 2007 11:52 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Extensions

On Mon, 08 Oct 2007, Lorenzo Fiorini wrote:
> - the only "extension" that seem to me useful to keep from
> HB_COMPAT_XHB ( like you suggested ) is "$" for arrays.
> Do you think it can create performance problems?

It can be added without performance reduction.
Here the only one problem is that code which use it can be
compiled and linked without any errors by Clipper. To use
hash items you have to use => operator or call function
which returns hash array so you will have compile time or
link time error somewhere. Here don't. It's not a big problem
for me and I can leave with $ working also for arrays in default
build but I have to accept Marek argument that it's important
for him to not introduce such extensions. I agree with it.
Anyhow I'm interesting if $ works for arrays in some other
xbase languages, f.e.: xbase++, VO, VFP.
It does not work in Clipper and FlagShip. In CLIP it behaves
really strange, it's probably caused by missing RT error.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From dbtopas at dbtopas.lt  Tue Oct  9 08:51:44 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Oct  9 04:51:41 2007
Subject: [Harbour] Extensions
In-Reply-To: <20071008205146.GC6548@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
	<20071008205146.GC6548@localhost.localdomain>
Message-ID: <470B7960.4000707@dbtopas.lt>

Przemyslaw Czerpak wrote:
> link time error somewhere. Here don't. It's not a big problem
> for me and I can leave with $ working also for arrays in default
> build but I have to accept Marek argument that it's important
> for him to not introduce such extensions. I agree with it.
> Anyhow I'm interesting if $ works for arrays in some other
> xbase languages, f.e.: xbase++, VO, VFP.

XBase++ 1.90 Intl. Trail:

PROC main()
   ? 2 $ {1, 2, 3}  // Prints: Y
   ? 4 $ {1, 2, 3}  // Prints: N
RETURN

So, who is the winner XBase++ or Clipper? :)


Best regards,
Mindaugas
From dbtopas at dbtopas.lt  Tue Oct  9 10:23:04 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Oct  9 06:23:02 2007
Subject: [Harbour] Extensions
In-Reply-To: <470B7960.4000707@dbtopas.lt>
References: <20071008150554.GA5054@localhost.localdomain>	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>	<20071008205146.GC6548@localhost.localdomain>
	<470B7960.4000707@dbtopas.lt>
Message-ID: <470B8EC8.2010206@dbtopas.lt>

Mindaugas Kavaliauskas wrote:
> XBase++ 1.90 Intl. Trail:
> 
> PROC main()
>   ? 2 $ {1, 2, 3}  // Prints: Y
>   ? 4 $ {1, 2, 3}  // Prints: N
> RETURN
> 
> So, who is the winner XBase++ or Clipper? :)

BTW, Clip supports 3rd AINS parameter: AINS(aArray, nPos, xValue) and
XBase++ supports 5th parameter in AEVAL() to pass item value by
reference to codeblock.

HB_COMAPT_XHB was removed from the source. What is groups decision about
HB_COMPAT_XPP, HB_COMPAT_FLAGSHIP, HB_COMPAT_CLIP and other
compatibility defines?

And what about HB_EXTENSION define? It extends behavior of standard 
Clipper functions: SAVESCREEN, RESTSCREEN, RTRIM, ALLTRIM, SETKEY, 
__KEYBOARD!

Perhaps we must drop codepage and connection parameter in DBUSEAREA() 
because Clipper does not support it. And in DBCREATE also :(

I know a solution. Let's ask XBase++ or Clip or Flagship to support some 
extensions. Only this way we will feel good adding them to Harbour :)


Best regards,
Mindaugas

From dbtopas at dbtopas.lt  Tue Oct  9 11:30:37 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Oct  9 07:30:36 2007
Subject: [Harbour] Symbol table management (ex Extensions)
In-Reply-To: <20071008232334.GA16226@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>	<EA4BC992-7B41-457C-8AAB-A365F2431B64@syenar.hu>	<470A6C3C.2010502@dbtopas.lt>
	<20071008232334.GA16226@localhost.localdomain>
Message-ID: <470B9E9D.4090001@dbtopas.lt>

>> P.S. Przemek, if group's decision will be to not add hb_vmSetFunction() 
>> to the core, can you send me? I've wrote my own version of this 
>> function, but I think yours will be more efficient. My version scans 
>> symbol tables of all modules to find ADel() address and replace it. I 
>> can't find the way to optimize it (The only way I see is creation of 
>> symbol list for all symbols of the same dynsym. It requires one more 
>> pointer for every SYMBOL item).
> 
> In current code it has to be done in such way (scanning all symbols)
> though it's possible to add small trick. It will be enough to set
> HB_FS_DEFERRED flag in all symbols which are not HB_FS_LOCAL and has
> been registered before. Then updating function address in main HB_DYNS
> will automatically change all references. Such modifications also
> eliminates the problem with references to multiple functions with
> the same name not updated by linker - we will effectively use only
> one reference so we may want to add it as workaround for linkers like
> the one in BCC.

Hi,


nice idea. So, all not HB_FS_LOCAL (and overloaded PUBLIC | LOCAL) are 
treated as HB_FS_DEFERRED. We can completely drop HB_FS_DEFERRED, by 
changing:
       if( ( pSym->scope.value & HB_FS_DEFERRED ) && pSym->pDynSym )
          pSym = pSym->pDynSym->pSymbol;
to:
       if( ( pSym->scope.value & ~HB_FS_LOCAL ) && pSym->pDynSym )
          pSym = pSym->pDynSym->pSymbol;
in hb_vmDo().


Best regards,
Mindaugas

From dbtopas at dbtopas.lt  Tue Oct  9 11:58:19 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Oct  9 07:58:17 2007
Subject: [Harbour] hrb library (ex Extensions)
In-Reply-To: <20071008224432.GB15841@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>	<470A6CE0.1040307@gmx.net>	<B42DA650-9601-4735-85F1-27558F6CB94C@syenar.hu>	<470A77A8.3010306@gmx.net>	<20071008195014.GA6548@localhost.localdomain>	<470AA1C0.5010804@gmx.net>
	<20071008224432.GB15841@localhost.localdomain>
Message-ID: <470BA51B.7090402@dbtopas.lt>

Przemyslaw Czerpak wrote:
> Yes, we have it and it's used by .c files. So far I haven't added it to
> .hrb files because I want to join modifications in .hrb format with
> new library format (.hrl?) and add small tools which will allow to
> collect many .hrb modules into single library. I'll do that in some
> spare time or maybe someone else will implement it.


Hi,


what are your expectations for .hrl files? The purpose is use a single 
__HRLLOAD() instead of multiple __HRBLOAD() for each module, or some 
different purpose?

If .hrl can be used for runtime linking without explicit loading of 
modules, we need a indexed public function table for quick search of 
public function inside library.


Best regards,
Mindaugas

From harbour.01 at syenar.hu  Tue Oct  9 11:58:32 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  9 07:58:41 2007
Subject: [Harbour] Extensions
In-Reply-To: <470B8EC8.2010206@dbtopas.lt>
References: <20071008150554.GA5054@localhost.localdomain>	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>	<20071008205146.GC6548@localhost.localdomain>
	<470B7960.4000707@dbtopas.lt> <470B8EC8.2010206@dbtopas.lt>
Message-ID: <4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>

Hi Mindaugas,

On 2007.10.09., at 16:23, Mindaugas Kavaliauskas wrote:

> Mindaugas Kavaliauskas wrote:
>> XBase++ 1.90 Intl. Trail:
>> PROC main()
>>   ? 2 $ {1, 2, 3}  // Prints: Y
>>   ? 4 $ {1, 2, 3}  // Prints: N
>> RETURN
>> So, who is the winner XBase++ or Clipper? :)
>
> BTW, Clip supports 3rd AINS parameter: AINS(aArray, nPos, xValue) and
> XBase++ supports 5th parameter in AEVAL() to pass item value by
> reference to codeblock.

Yes, and AINS() 3rd parameter is also supported by XBase++.

> HB_COMAPT_XHB was removed from the source. What is groups decision  
> about
> HB_COMPAT_XPP, HB_COMPAT_FLAGSHIP, HB_COMPAT_CLIP and other
> compatibility defines?

I'd personally vote to move these to libs too. It's harder
and harder to keep them in core and also, support cannot
be complete, because in cases we'd break C5.2e compatibility
(like with "$").

Question: How to solve the problem, when someone wants to
use two extension libs, and they have contradictory features
(maybe multiple symbols too). Can this be solved at all?

> And what about HB_EXTENSION define? It extends behavior of standard  
> Clipper functions: SAVESCREEN, RESTSCREEN, RTRIM, ALLTRIM, SETKEY,  
> __KEYBOARD!

I've just scanned for those yesterday, and I think
the best would be to create HB_ prefixed extended
versions, where it applies.

We also have AT(), GETE[NV](), ISPRINTER(), PROCFILE(),
___MVRESTORE(). Not all of them are equallity problematic
cases, but I think we'd need to deal with them.

> Perhaps we must drop codepage and connection parameter in DBUSEAREA 
> () because Clipper does not support it. And in DBCREATE also :(

Yes, these are also problematic.

> I know a solution. Let's ask XBase++ or Clip or Flagship to support  
> some extensions. Only this way we will feel good adding them to  
> Harbour :)

:) I would vote a Clipper conference held in let's say, Tahiti 8)

Brgds,
Viktor

From druzus at acn.waw.pl  Tue Oct  9 14:40:51 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  9 10:40:58 2007
Subject: [Harbour] Symbol table management (ex Extensions)
In-Reply-To: <470B9E9D.4090001@dbtopas.lt>
References: <20071008150554.GA5054@localhost.localdomain>
	<EA4BC992-7B41-457C-8AAB-A365F2431B64@syenar.hu>
	<470A6C3C.2010502@dbtopas.lt>
	<20071008232334.GA16226@localhost.localdomain>
	<470B9E9D.4090001@dbtopas.lt>
Message-ID: <20071009184051.GA2102@localhost.localdomain>

On Tue, 09 Oct 2007, Mindaugas Kavaliauskas wrote:
> nice idea. So, all not HB_FS_LOCAL (and overloaded PUBLIC | LOCAL) are 
> treated as HB_FS_DEFERRED. We can completely drop HB_FS_DEFERRED, by 
> changing:
>       if( ( pSym->scope.value & HB_FS_DEFERRED ) && pSym->pDynSym )
>          pSym = pSym->pDynSym->pSymbol;
> to:
>       if( ( pSym->scope.value & ~HB_FS_LOCAL ) && pSym->pDynSym )
>          pSym = pSym->pDynSym->pSymbol;
> in hb_vmDo().

I'd like to keep it yet.
Current behavior may be useful to implement KEEP_LOCAL_BINDINGS when
.HR[BL] or .DLL is loaded. When we will work on such code we can decide
which functionality we want to implement and which flags will be useful.
Then we can remove all redundant ones.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Oct  9 14:42:25 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  9 10:42:32 2007
Subject: [Harbour] Extensions
In-Reply-To: <470B7960.4000707@dbtopas.lt>
References: <20071008150554.GA5054@localhost.localdomain>
	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
	<20071008205146.GC6548@localhost.localdomain>
	<470B7960.4000707@dbtopas.lt>
Message-ID: <20071009184225.GB2102@localhost.localdomain>

On Tue, 09 Oct 2007, Mindaugas Kavaliauskas wrote:
> XBase++ 1.90 Intl. Trail:
> PROC main()
>   ? 2 $ {1, 2, 3}  // Prints: Y
>   ? 4 $ {1, 2, 3}  // Prints: N
> RETURN
> So, who is the winner XBase++ or Clipper? :)

In such case I think we should keep XBase++ behavior covered by
-kx compiler switch.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Oct  9 14:54:22 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  9 10:54:29 2007
Subject: [Harbour] hrb library (ex Extensions)
In-Reply-To: <470BA51B.7090402@dbtopas.lt>
References: <20071008150554.GA5054@localhost.localdomain>
	<470A6CE0.1040307@gmx.net>
	<B42DA650-9601-4735-85F1-27558F6CB94C@syenar.hu>
	<470A77A8.3010306@gmx.net>
	<20071008195014.GA6548@localhost.localdomain>
	<470AA1C0.5010804@gmx.net>
	<20071008224432.GB15841@localhost.localdomain>
	<470BA51B.7090402@dbtopas.lt>
Message-ID: <20071009185422.GC2102@localhost.localdomain>

On Tue, 09 Oct 2007, Mindaugas Kavaliauskas wrote:
> what are your expectations for .hrl files? The purpose is use a single 
> __HRLLOAD() instead of multiple __HRBLOAD() for each module, or some 
> different purpose?
> If .hrl can be used for runtime linking without explicit loading of 
> modules, we need a indexed public function table for quick search of 
> public function inside library.

I'd like to have in new format few technical extensions PCODE version,
HRB format version, "unique" module ID, some type of checksum for easy
corruption detection and for runtime linking easy accessible list of
functions with module references. Nothing amazing but I will have to
spend some time to chose the internal representation and implement
some functions to manage new data structures. Or maybe I'll implement
sth very simple to have some base functionality and then it will be
extended.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Oct  9 15:00:29 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct  9 11:00:41 2007
Subject: [Harbour] Extensions
In-Reply-To: <20071009184225.GB2102@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>
	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
	<20071008205146.GC6548@localhost.localdomain>
	<470B7960.4000707@dbtopas.lt>
	<20071009184225.GB2102@localhost.localdomain>
Message-ID: <338618A7-1A64-4D41-90D1-80C5BE57C302@syenar.hu>

> On Tue, 09 Oct 2007, Mindaugas Kavaliauskas wrote:
>> XBase++ 1.90 Intl. Trail:
>> PROC main()
>>   ? 2 $ {1, 2, 3}  // Prints: Y
>>   ? 4 $ {1, 2, 3}  // Prints: N
>> RETURN
>> So, who is the winner XBase++ or Clipper? :)
>
> In such case I think we should keep XBase++ behavior covered by
> -kx compiler switch.

I disagree, since we have an HB_COMPAT_XPP switch already
for this purpose. But, since this switch is always on,
and this behaviour breaks C5.2e compatibility, we should
solve it in some different way. I'd suggest a similar lib
as we have for xhb.

Brgds,
Viktor

From druzus at acn.waw.pl  Tue Oct  9 15:26:32 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  9 11:26:39 2007
Subject: [Harbour] Extensions
In-Reply-To: <002d01c80a63$55121e70$ff365b50$@com>
References: <20071008150554.GA5054@localhost.localdomain>
	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
	<20071008205146.GC6548@localhost.localdomain>
	<002d01c80a63$55121e70$ff365b50$@com>
Message-ID: <20071009192632.GD2102@localhost.localdomain>

On Tue, 09 Oct 2007, Mike Evans (Gmail) wrote:
[...]
> older-different versions of the language ( as possible). The bad thing with
> Harbour-xHarbour is that we don't have a strong typed language ( at least
> where we want to be) and this make the compile time checking very difficult.

We will add strong typing but I need some other things more important
for me so it's not my priority. Maybe Ryszard will work on it. If not
then probably I'll create some base code for strong typing which will
allow to easy define prototypes which will be checked during compailation
but creating file with prototypes for all core functions will be job for
whole Harbour team. IMHO it will be good to start such file even now.
We already have DECLARE command but I suggest to introduce PROTOTYPE
like in FlagShip to avoid confusions with Clipper DECLARE statement.

> For me the best approach is to have a compile time check for version and
> compatibility. As an example let's say that cl5.2 is version 1. Cl5.3 is
> version 1.5 and from now on Harbour is version 2.0. I'm sure that everyone
> wants something like that when we check cl5.3 we must have compile time
> checking for harbour extensions. Of course this version will be upward
> compatible. If we check harbour ver.2.0 we can use any available extension
> but it will not be backward compatible. Even the latest VS2008 have the same
> approach and from many years the same is true for html editors-designers and
> many other languages. I know that something like that is very difficult but
> it's the only way if we want everybody to be happy.

We already have sth like that. See -k? switches. In practice most of Harbour
features which interacts on generated PCODE can be disabled by -kc. We can
also add support for -kC switch will refuse to compile also new syntax
constructions which cannot be compiled by Clipper. This is not a big
problem.

> There thinks that are a
> lot more difficult to catch as an example array element by reference that
> it's not supported by clipper. If by accident use something like that in the
> same code for CL and with Harbour-xHarbour we will have difficult time to
> find the error. 

It's not good example because this can be caught immediately. Clipper
simply will not compile code like: f(@a[1]) generating compile time
error. We can also report it ourself with -kC switch proposed above.
Much worser are situations which cannot be detected at compile time.
Even strong typing will not help in some cases.

best regards,
Przemek
From makis1970 at gmail.com  Tue Oct  9 16:32:22 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Tue Oct  9 12:32:12 2007
Subject: [Harbour] Extensions
In-Reply-To: <20071009192632.GD2102@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>	<20071008205146.GC6548@localhost.localdomain>	<002d01c80a63$55121e70$ff365b50$@com>
	<20071009192632.GD2102@localhost.localdomain>
Message-ID: <000901c80ab3$809e7070$81db5150$@com>


>We will add strong typing but I need some other things more important
>for me so it's not my priority. Maybe Ryszard will work on it. If not
>then probably I'll create some base code for strong typing which will
>allow to easy define prototypes which will be checked during compailation
>but creating file with prototypes for all core functions will be job for
>whole Harbour team. IMHO it will be good to start such file even now.
>We already have DECLARE command but I suggest to introduce PROTOTYPE
>like in FlagShip to avoid confusions with Clipper DECLARE statement.

This is excellent!!!!. As you already know strong type its not a solutions
for every problem but if we use it in some places it will be an excellent
addition. As for the syntax why not "AS" Local foo AS string also we could
have something like "IS" for immediately object instantiation.

>We already have sth like that. See -k? switches. In practice most of
Harbour
>features which interacts on generated PCODE can be disabled by -kc. We can
>also add support for -kC switch will refuse to compile also new syntax
>constructions which cannot be compiled by Clipper. This is not a big
>problem.
I already knew about the -K? switches but the best will be -kc for compile
time checking. 


>It's not good example because this can be caught immediately. Clipper
>simply will not compile code like: f(@a[1]) generating compile time
>error. We can also report it ourself with -kC switch proposed above.

Oops you are right. Wrong example.  

>Much worser are situations which cannot be detected at compile time.
>Even strong typing will not help in some cases.
I'm talking about function-procedure overload-override
If we have something like that it will be possible to have let's say 2
functions with THE SAME NAME (as an example ains)
One with 2 parameters (as in clipper) and one with 4 as in xharbour.
Depended from the the -K? switches the one of this 2 functions will be
included and there will be also compile time checking. Even without the -k?
switch both functions could be used in the program (depended from the
parameters and in the future from parameter types) and we can catch
compatibility errors with the -kc switch. 

Przemek i'm thankful for your excellent work
Mike Evans
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From dbtopas at dbtopas.lt  Tue Oct  9 17:37:33 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Oct  9 13:37:29 2007
Subject: [Harbour] hrb library (ex Extensions)
In-Reply-To: <20071009185422.GC2102@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>	<470A6CE0.1040307@gmx.net>	<B42DA650-9601-4735-85F1-27558F6CB94C@syenar.hu>	<470A77A8.3010306@gmx.net>	<20071008195014.GA6548@localhost.localdomain>	<470AA1C0.5010804@gmx.net>	<20071008224432.GB15841@localhost.localdomain>	<470BA51B.7090402@dbtopas.lt>
	<20071009185422.GC2102@localhost.localdomain>
Message-ID: <470BF49D.3080102@dbtopas.lt>

Przemyslaw Czerpak wrote:
> On Tue, 09 Oct 2007, Mindaugas Kavaliauskas wrote:
>> what are your expectations for .hrl files? The purpose is use a single 
>> __HRLLOAD() instead of multiple __HRBLOAD() for each module, or some 
>> different purpose?
>> If .hrl can be used for runtime linking without explicit loading of 
>> modules, we need a indexed public function table for quick search of 
>> public function inside library.
> 
> I'd like to have in new format few technical extensions PCODE version,
> HRB format version, "unique" module ID, some type of checksum for easy
> corruption detection and for runtime linking easy accessible list of
> functions with module references. Nothing amazing but I will have to
> spend some time to chose the internal representation and implement
> some functions to manage new data structures. Or maybe I'll implement
> sth very simple to have some base functionality and then it will be
> extended.

Hi,


my experience shows, that it is good if file format has possibility "to 
grow". I mean, after you decide to extend stored data, it should fit 
into format.
I think format could be similar to many executables/object formats, i.e. 
some header, list of sections, and section bodies.
     Header contains, some basic information about module/library, ex. 
format version, PCODE version, "unique" module ID, timestamp, filesize, 
etc.
     Section table follows header. Section table is used to easy access 
every section in a file. For example, function bodies could not be 
accessed without reading the whole symbol table in current .hrb format. 
Section table indicates section type, offset and length. Number of 
sections could be stored in header or in the first few bytes of section 
table.
     Sections follow section table. A good candidates for .hrb sections 
are symbol table and function body (PCODE). We can start with these two 
sections. In the future we will have a possibility to add more sections 
for...: encrypted function body, resources like icons or bitmaps, debug 
info inside .hrb, i18n translation tables, etc. Sections of .hrl will be 
different, ex. section containing module list, and section containing 
ordered public function list for quick search/link of modules.


Best regards,
Mindaugas

From druzus at acn.waw.pl  Tue Oct  9 18:05:52 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct  9 14:05:59 2007
Subject: [Harbour] 2007-10-10 00:05 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710092205.l99M5qxu006119@31-mo5-4.acn.waw.pl>

2007-10-10 00:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcompdf.h
  * harbour/source/compiler/hbmain.c
  * harbour/source/compiler/harbour.y
  * harbour/source/compiler/harbour.yyc
  * harbour/source/compiler/complex.c
    * cleanup: removed unused variable, some extension to datetime
      decoding, etc.

best regards
Przemek
From druzus at acn.waw.pl  Wed Oct 10 07:13:05 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 10 03:13:12 2007
Subject: [Harbour] Extensions
In-Reply-To: <4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>
References: <20071008150554.GA5054@localhost.localdomain>
	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
	<20071008205146.GC6548@localhost.localdomain>
	<470B7960.4000707@dbtopas.lt> <470B8EC8.2010206@dbtopas.lt>
	<4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>
Message-ID: <20071010111305.GA17387@localhost.localdomain>

On Tue, 09 Oct 2007, Szak?ts Viktor wrote:
> I'd personally vote to move these to libs too. It's harder
> and harder to keep them in core and also, support cannot
> be complete, because in cases we'd break C5.2e compatibility
> (like with "$").
> Question: How to solve the problem, when someone wants to
> use two extension libs, and they have contradictory features
> (maybe multiple symbols too). Can this be solved at all?

Yes. Not move them to separate library but implement then as compiler
switches so modules compiled with different switches can be linked
together in one application.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Oct 10 07:18:37 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 10 03:18:45 2007
Subject: [Harbour] Extensions
In-Reply-To: <20071010111305.GA17387@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>
	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
	<20071008205146.GC6548@localhost.localdomain>
	<470B7960.4000707@dbtopas.lt> <470B8EC8.2010206@dbtopas.lt>
	<4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>
	<20071010111305.GA17387@localhost.localdomain>
Message-ID: <9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>

Hi Przemek,

On 2007.10.10., at 13:13, Przemyslaw Czerpak wrote:

> On Tue, 09 Oct 2007, Szak?ts Viktor wrote:
>> I'd personally vote to move these to libs too. It's harder
>> and harder to keep them in core and also, support cannot
>> be complete, because in cases we'd break C5.2e compatibility
>> (like with "$").
>> Question: How to solve the problem, when someone wants to
>> use two extension libs, and they have contradictory features
>> (maybe multiple symbols too). Can this be solved at all?
>
> Yes. Not move them to separate library but implement then as compiler
> switches so modules compiled with different switches can be linked
> together in one application.

This kinda breaks the whole conecpt of xhb lib, doesn't it?

(since the same problem was solved using regular overloading
for xhb lib)

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Oct 10 07:21:47 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 10 03:21:55 2007
Subject: [Harbour] Extensions
In-Reply-To: <338618A7-1A64-4D41-90D1-80C5BE57C302@syenar.hu>
References: <20071008150554.GA5054@localhost.localdomain>
	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
	<20071008205146.GC6548@localhost.localdomain>
	<470B7960.4000707@dbtopas.lt>
	<20071009184225.GB2102@localhost.localdomain>
	<338618A7-1A64-4D41-90D1-80C5BE57C302@syenar.hu>
Message-ID: <20071010112147.GB17387@localhost.localdomain>

On Tue, 09 Oct 2007, Szak?ts Viktor wrote:
> >On Tue, 09 Oct 2007, Mindaugas Kavaliauskas wrote:
> >>XBase++ 1.90 Intl. Trail:
> >>PROC main()
> >>  ? 2 $ {1, 2, 3}  // Prints: Y
> >>  ? 4 $ {1, 2, 3}  // Prints: N
> >>RETURN
> >>So, who is the winner XBase++ or Clipper? :)
> >In such case I think we should keep XBase++ behavior covered by
> >-kx compiler switch.
> I disagree, since we have an HB_COMPAT_XPP switch already
> for this purpose.
> But, since this switch is always on,
> and this behaviour breaks C5.2e compatibility, we should
> solve it in some different way. I'd suggest a similar lib
> as we have for xhb.

It will effectively increase the problem. In a while we will not be
able to link these different compat libraries together. Compile time
switches allow to link modules compiled with different compatibility
switches together and separate compat libraries is not an alternative.
They can be only helper code with additional functions unique to given
xbase language.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Oct 10 07:48:08 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 10 03:48:16 2007
Subject: [Harbour] Extensions
In-Reply-To: <20071010112147.GB17387@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>
	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
	<20071008205146.GC6548@localhost.localdomain>
	<470B7960.4000707@dbtopas.lt>
	<20071009184225.GB2102@localhost.localdomain>
	<338618A7-1A64-4D41-90D1-80C5BE57C302@syenar.hu>
	<20071010112147.GB17387@localhost.localdomain>
Message-ID: <AFBADB0D-B5F7-4935-9D75-A160B3AC3FE9@syenar.hu>

On 2007.10.10., at 13:21, Przemyslaw Czerpak wrote:

> On Tue, 09 Oct 2007, Szak?ts Viktor wrote:
>>> On Tue, 09 Oct 2007, Mindaugas Kavaliauskas wrote:
>>>> XBase++ 1.90 Intl. Trail:
>>>> PROC main()
>>>>  ? 2 $ {1, 2, 3}  // Prints: Y
>>>>  ? 4 $ {1, 2, 3}  // Prints: N
>>>> RETURN
>>>> So, who is the winner XBase++ or Clipper? :)
>>> In such case I think we should keep XBase++ behavior covered by
>>> -kx compiler switch.
>> I disagree, since we have an HB_COMPAT_XPP switch already
>> for this purpose.
>> But, since this switch is always on,
>> and this behaviour breaks C5.2e compatibility, we should
>> solve it in some different way. I'd suggest a similar lib
>> as we have for xhb.
>
> It will effectively increase the problem. In a while we will not be
> able to link these different compat libraries together. Compile time
> switches allow to link modules compiled with different compatibility
> switches together and separate compat libraries is not an alternative.
> They can be only helper code with additional functions unique to given
> xbase language.

Okey, but I miss the concept here: for XHB we have a lib,
for some feature we have compile time switches, we might have
function overloading, operator overloading, build-time switches,
etc...

Pls read my other mail, and let's continue there.

Brgds,
Viktor



From harbour.01 at syenar.hu  Wed Oct 10 07:55:48 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 10 03:56:00 2007
Subject: [Harbour] Generic dialect concept
In-Reply-To: <9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>
References: <20071008150554.GA5054@localhost.localdomain>
	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
	<20071008205146.GC6548@localhost.localdomain>
	<470B7960.4000707@dbtopas.lt> <470B8EC8.2010206@dbtopas.lt>
	<4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>
	<20071010111305.GA17387@localhost.localdomain>
	<9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>
Message-ID: <0FB74203-FFBB-4534-BA9C-D11783AFACFE@syenar.hu>

Hi Przemek and all,

> Hi Przemek,
>
> On 2007.10.10., at 13:13, Przemyslaw Czerpak wrote:
>
>> On Tue, 09 Oct 2007, Szak?ts Viktor wrote:
>>> I'd personally vote to move these to libs too. It's harder
>>> and harder to keep them in core and also, support cannot
>>> be complete, because in cases we'd break C5.2e compatibility
>>> (like with "$").
>>> Question: How to solve the problem, when someone wants to
>>> use two extension libs, and they have contradictory features
>>> (maybe multiple symbols too). Can this be solved at all?
>>
>> Yes. Not move them to separate library but implement then as compiler
>> switches so modules compiled with different switches can be linked
>> together in one application.
>
> This kinda breaks the whole conecpt of xhb lib, doesn't it?
>
> (since the same problem was solved using regular overloading
> for xhb lib)

Let's say we'd use - instead of the current mixed one - the
same "compiler switch" concept to support XHB, XPP, CLIP,
VFP, etc.

What happens with contradictory features if I use both
"-kXPP" and "-kXHB"?

Should we make this switch feature-granular, so that
one should select compatibility features one by one?

Say,
for full XPP emulation one needs to use: -kcghdr
for full XHB emulation one needs to use: -kirdjcs
(where one -k option meaning one specific extended feature)

For example CLIP doesn't need EXIT in the SWITCH statement,
is it possible to add a separate -k switch for this feature?

This way it's pretty easy to define completely new
dialects, so source code would become meaningless in
seconds, so this doesn't look to coherent.

Also, could the function overloading be done at compiler
level, controlled by "-k" or similar switches?

I mean: -k"XHBfunc" would enable internal redirection of
AINS()/ADEL()/etc to XHB compatible versions.

Now, to merge these concepts, shouldn't we rather add
a "--dialect" compile-time switch (and a "#pragma dialect")
to select the Clipper dialect featureset (one at a time!)
along with automatic compile-time function overloading?

For compile time overloading, we'd pbly need to have a
"/source/dialect" folder, and one subfolder for each dialect
to hold the different flavours of functions (plus support logic,
and maybe extra extensions):
xhb_AINS(), xpp_AINS(), etc. All gathered into "dialect" libs
(one lib for each dialect to avoid namespace problems for
non-redirected extra functions)

This way different flavours of functions would be again
under "core" (moreover, the rest of the extension functions too,
but in a well separated dir).

We'd also need an "/include/dialect/" folder with subfolders,
to hold all dialect specific defines.

Then, about macros: In order to keep compatibility for
macros in a similar way, we'd probably need to add a possibility
to set all the above switches for macros at runtime:

hb_macroDialect( "XPP" )

And maybe add a possibility for macros to set the dialect for
themselves at runtime.

Summary: This way everyone could select a Clipper dialect on a
per file basis, and control the dialect used for macros at runtime.

Does this make any sense? It seems a bit complicated.

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Oct 10 08:00:32 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 10 04:00:38 2007
Subject: [Harbour] Extensions
In-Reply-To: <9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>
References: <20071008150554.GA5054@localhost.localdomain>
	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
	<20071008205146.GC6548@localhost.localdomain>
	<470B7960.4000707@dbtopas.lt> <470B8EC8.2010206@dbtopas.lt>
	<4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>
	<20071010111305.GA17387@localhost.localdomain>
	<9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>
Message-ID: <20071010120032.GA17477@localhost.localdomain>

On Wed, 10 Oct 2007, Szak?ts Viktor wrote:
> This kinda breaks the whole conecpt of xhb lib, doesn't it?
> (since the same problem was solved using regular overloading
> for xhb lib)

It can work only for one language. So it works for XHB but it
cannot be used for all.
It was never my intention to create such libraries for all xbase
languages and this is the reason I do not like the idea of xhb.ch
header file. I wanted to have hbcompat.ch in both projects to hide
differences between them and separate library for some extensions
which we do not want to have in core code. Now things are moving
much farther then I've ever planed and I do not see any real benefits
for Harbour users. IMHO we begin to reduce existing functionality.
I do not see any reason to add some compile time switches to allow
compilation of existing code designed for other compilers. They do
not have to be enabled by default. For sure it's much less intrusive
modification then adding strong typing which strongly interacts
with PP and grammar rules, f.e.:
   #xtranslate f1(<x>) => f2(<x>)

does not work for code like:
   function f1( p as usual )

IMHO this it's potentially much bigger problem then adding optional
support for $ working with arrays. But you want to have strong typing.
I know the reason but you cannot chose extensions you like personally
and say that others are bad and cannot be implemented even as optional
compiler switches. I like that you are watching carefully for the whole
language syntax but IMHO sometimes you forget that you are forcing
your personal preferences. F.e. I understand that we should keep
name space clean and it's very good practice to use HB_ prefix.
But not always. If we have 20 or more functions with 'ord' prefix
and then we are adding new one to operate on orders calling it
hb_ord*() creates incredible noise for people who do not know all
Cl*pper functions. It's a nightmare for them to guess when hb_ prefix
should be used or not. How we should document it?
"Check in Clipper documentation if some function exist and if not use
hb_ prefix?" I can leave with it. I have some practice with Clipper
and I remember most of Clipper functions. I also knows quite well
[x]Harbour core code and I remember most of Harbour or only functions.
But how to explain new users that we have RDDSYS() pseudo function
which allow to disable linking standard RDDs but for exactly the same
functionality in GT subsystem they have to use HB_GTSYS()? Only someone
who knows well Clipper can understand it. IMHO it's not a time for
such discussion now. Let's release 1.0 and for this we need to invest
some time for finishing .prg classes. This should be our main goal
now and you were making fantastic job in this area in last weeks.
I'd like to ask Harbour users about tests. What else have to be
fixed yet? I know about BROWSE class. But what is current status
of GET?
Just after 1.0 we will return to discussion about future of this
language and what should be our goal for 2.0

best regards,
Przemek
From ptucker at sympatico.ca  Wed Oct 10 08:10:08 2007
From: ptucker at sympatico.ca (Paul Tucker)
Date: Wed Oct 10 04:10:15 2007
Subject: [Harbour] Extensions
References: <20071008150554.GA5054@localhost.localdomain>	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com><20071008205146.GC6548@localhost.localdomain>
	<470B7960.4000707@dbtopas.lt>
Message-ID: <03ab01c80b36$801d9120$6a00a8c0@PAUL>


 MK> XBase++ 1.90 Intl. Trail:

 MK> PROC main()
 MK>    ? 2 $ {1, 2, 3}  // Prints: Y
 MK>    ? 4 $ {1, 2, 3}  // Prints: N
 MK> RETURN

 MK> So, who is the winner XBase++ or Clipper? :)

Why would anyone take an existing operation '$' and change the return value? 
It makes no sense at all.

Are you sure their '?' isn't modifying the result of a logical when printing 
it, or does  2 $ {1,2,3] actually return a string?

If it returns a string, I think we should not bother trying to emulate that.

My opinion.

Paul 

From druzus at acn.waw.pl  Wed Oct 10 08:30:06 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 10 04:30:12 2007
Subject: [Harbour] Extensions
In-Reply-To: <03ab01c80b36$801d9120$6a00a8c0@PAUL>
References: <20071008150554.GA5054@localhost.localdomain>
	<470B7960.4000707@dbtopas.lt> <03ab01c80b36$801d9120$6a00a8c0@PAUL>
Message-ID: <20071010123006.GA17889@localhost.localdomain>

On Wed, 10 Oct 2007, Paul Tucker wrote:
> MK> XBase++ 1.90 Intl. Trail:
> MK> PROC main()
> MK>    ? 2 $ {1, 2, 3}  // Prints: Y
> MK>    ? 4 $ {1, 2, 3}  // Prints: N
> MK> RETURN
> MK> So, who is the winner XBase++ or Clipper? :)
> Why would anyone take an existing operation '$' and change the return 
> value? It makes no sense at all.
> Are you sure their '?' isn't modifying the result of a logical when 
> printing it, or does  2 $ {1,2,3] actually return a string?
> If it returns a string, I think we should not bother trying to emulate that.

It does not return string.
I do not have xbase++ but I guess it's not a string but the form
of displaying logical values. In Clipper or [x]Harbour you have
similar results id you use DISPOUT() or DEVOUT() instead of [Q]QOUT(),
just try:

    proc main()
       devout(.t.)
       qout(.t.)
    return

So it's xbase++ incompatibility to Clipper in ? command or [Q]QOUT()
functions but it's not a thing we are not talking about here though
maybe someone will want to implement alternative ? command for strict
XPP compatibility.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Oct 10 08:38:38 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 10 04:39:08 2007
Subject: [Harbour] Extensions
In-Reply-To: <20071010120032.GA17477@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>
	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
	<20071008205146.GC6548@localhost.localdomain>
	<470B7960.4000707@dbtopas.lt> <470B8EC8.2010206@dbtopas.lt>
	<4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>
	<20071010111305.GA17387@localhost.localdomain>
	<9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>
	<20071010120032.GA17477@localhost.localdomain>
Message-ID: <1A3741C0-BE7B-41EC-91ED-F3C4F03666C1@syenar.hu>

Hi Przemek,

> It can work only for one language. So it works for XHB but it
> cannot be used for all.
> It was never my intention to create such libraries for all xbase
> languages and this is the reason I do not like the idea of xhb.ch
> header file. I wanted to have hbcompat.ch in both projects to hide
> differences between them and separate library for some extensions
> which we do not want to have in core code. Now things are moving

Yes, I think the whole set of problem is much wider than any of us
thought. We've started to deal with it (because we had to), and
we don't have a proper solution for it yet.

hbcompat.ch is far from solving the problem, but admittedly xhb.ch
or xhb lib doesn't solve it fully either.

> much farther then I've ever planed and I do not see any real benefits
> for Harbour users. IMHO we begin to reduce existing functionality.
> I do not see any reason to add some compile time switches to allow
> compilation of existing code designed for other compilers. They do
> not have to be enabled by default. For sure it's much less intrusive
> modification then adding strong typing which strongly interacts
> with PP and grammar rules, f.e.:
>    #xtranslate f1(<x>) => f2(<x>)
>
> does not work for code like:
>    function f1( p as usual )
>
> IMHO this it's potentially much bigger problem then adding optional
> support for $ working with arrays. But you want to have strong typing.

Sorry, but this is not my personal preference, and I definitely
don't "want it". You can find it in TODO since many years, and it
was not even me who added it. Also notice we already had strong
typing (sortof), but it wasn't working properly. You're right that
I think strong typing is a very useful extension (worth even some
price to pay in terms of compatibility IMO) and I used to think
the group favoured the idea. Maybe this had change since.

So to clear this one up: I can personally _live forever_ without
strong typing in Harbour.

I also have to add that I find it hard to dispute that typed source
gives more benefit than "$" on arrays, especially if the compiler can
start to optimize based on that type information. Maybe I'm the only
one thinking that, might be a personal preference, I cannot judge that.

(Plus, I don't want to go personal, but it seems to me that some ppl
on the list are simply going too far in agressively pushing different
random extensions, and this reached a level when the original goals
started to suffer. If we want to deal with these extensions (which I
don't think we can avoid anymore anyway), let's find a proper and
_generic_ way to add them, while the core can stay what it was meant
to be and keep the Clipper language on certain level of standard.
See my recent mail about one possible solution. So much for politics,
I'm tired of it.)

> I know the reason but you cannot chose extensions you like personally
> and say that others are bad and cannot be implemented even as optional
> compiler switches. I like that you are watching carefully for the  
> whole
> language syntax but IMHO sometimes you forget that you are forcing
> your personal preferences. F.e. I understand that we should keep
> name space clean and it's very good practice to use HB_ prefix.
> But not always. If we have 20 or more functions with 'ord' prefix
> and then we are adding new one to operate on orders calling it
> hb_ord*() creates incredible noise for people who do not know all
> Cl*pper functions. It's a nightmare for them to guess when hb_ prefix
> should be used or not. How we should document it?

If you look carefully, I've never complained in such cases.
This might break the concept in general, but in these cases
I agree with you that consistency is more important than
"hb_" prefix. After all, chances are lower that someone
would "continue" or extend an existing namespace, like "ord*"
or "db*" (and the list is about over BTW, if we don't count
SIx and friends and some #define namespaces).

Also notice that this _might_ create problems if another
Clipper project extends the namespace in the same as we did,
and we might need to deal with that.

> "Check in Clipper documentation if some function exist and if not use
> hb_ prefix?" I can leave with it. I have some practice with Clipper
> and I remember most of Clipper functions. I also knows quite well
> [x]Harbour core code and I remember most of Harbour or only functions.
> But how to explain new users that we have RDDSYS() pseudo function
> which allow to disable linking standard RDDs but for exactly the same
> functionality in GT subsystem they have to use HB_GTSYS()? Only  
> someone

Well, because the "gt*" namespace never existed in Clipper.

So the whole namespace is new. Same case is with "hb_h*", "hb_inet*",
"hb_ini*", "hb_lib*", "hb_bit*", "hb_regex*", so I don't feel
"hb_gt*" would be any special personal preference of mine.

> who knows well Clipper can understand it. IMHO it's not a time for
> such discussion now. Let's release 1.0 and for this we need to invest
> some time for finishing .prg classes. This should be our main goal
> now and you were making fantastic job in this area in last weeks.
> I'd like to ask Harbour users about tests. What else have to be
> fixed yet? I know about BROWSE class. But what is current status
> of GET?

It's probably not 100% compatible, but there was no bug reports
since the last ones got fixed.

As for TBROWSE() I'm finished with display/color basic behaviour
compatibility related stuff, now I'm on vertical and horizontal
navigation, it looks quite complicated, unfortunately I've spend
a week on the "$" operator (plus on my own tasks before that), so
it's just yesterday I could slowly restart dealing with it.

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Wed Oct 10 08:58:01 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Oct 10 04:58:05 2007
Subject: [Harbour] Extensions
In-Reply-To: <1A3741C0-BE7B-41EC-91ED-F3C4F03666C1@syenar.hu>
References: <20071008150554.GA5054@localhost.localdomain>
	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
	<20071008205146.GC6548@localhost.localdomain>
	<470B7960.4000707@dbtopas.lt> <470B8EC8.2010206@dbtopas.lt>
	<4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>
	<20071010111305.GA17387@localhost.localdomain>
	<9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>
	<20071010120032.GA17477@localhost.localdomain>
	<1A3741C0-BE7B-41EC-91ED-F3C4F03666C1@syenar.hu>
Message-ID: <9257026e0710100558h5ffee2a3ta94734947462fe10@mail.gmail.com>

On 10/10/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> As for TBROWSE() I'm finished with display/color basic behaviour
> compatibility related stuff, now I'm on vertical and horizontal
> navigation, it looks quite complicated, unfortunately I've spend
> a week on the "$" operator (plus on my own tasks before that), so
> it's just yesterday I could slowly restart dealing with it.

I've sent to you and to the list a working tbrowse many months ago
with a working get system and a working teditor.

Me and I guess many other hundreds of xHarbour users use it every day
and I get the same results that I get from C53b.

If you want to write your own "perfect" one it's a your choice.

best regards,
Lorenzo
From jd10jd10 at yahoo.com  Wed Oct 10 09:19:41 2007
From: jd10jd10 at yahoo.com (Jack Daniels)
Date: Wed Oct 10 05:19:48 2007
Subject: [Harbour] Extensions
Message-ID: <609752.12725.qm@web33204.mail.mud.yahoo.com>

Lorenzo,

Could you please resend your tbrowse, get, and teditor to list?

Thanks,
Jack

----- Original Message ----
From: Lorenzo Fiorini <lorenzo.fiorini@gmail.com>
To: Harbour Project Main Developer List. <harbour@harbour-project.org>
Sent: Wednesday, October 10, 2007 7:58:01 AM
Subject: Re: [Harbour] Extensions

On 10/10/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> As for TBROWSE() I'm finished with display/color basic behaviour
> compatibility related stuff, now I'm on vertical and horizontal
> navigation, it looks quite complicated, unfortunately I've spend
> a week on the "$" operator (plus on my own tasks before that), so
> it's just yesterday I could slowly restart dealing with it.

I've sent to you and to the list a working tbrowse many months ago
with a working get system and a working teditor.

Me and I guess many other hundreds of xHarbour users use it every day
and I get the same results that I get from C53b.

If you want to write your own "perfect" one it's a your choice.

best regards,
Lorenzo
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


      ____________________________________________________________________________________
Shape Yahoo! in your own image.  Join our Network Research Panel today!   http://surveylink.yahoo.com/gmrs/yahoo_panel_invite.asp?a=7 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20071010/1431c302/attachment.html
From ptucker at sympatico.ca  Wed Oct 10 09:21:06 2007
From: ptucker at sympatico.ca (Paul Tucker)
Date: Wed Oct 10 05:21:09 2007
Subject: [Harbour] Extensions
Message-ID: <20071010132106.XSPD574.tomts16-srv.bellnexxia.net@smtp1.sympatico.ca>

> It does not return string.

Ahh, that's good.

> I do not have xbase++ but I guess it's not a string but the form
> of displaying logical values. In Clipper or [x]Harbour you have
> similar results id you use DISPOUT() or DEVOUT() instead of [Q]QOUT(),
> just try:
> 
>     proc main()
>        devout(.t.)
>        qout(.t.)
>     return
> 
> So it's xbase++ incompatibility to Clipper in ? command or [Q]QOUT()

Wow, my memory is going, or in ~23 years of using Clipper, I really don't recall that difference.


> functions but it's not a thing we are not talking about here though
> maybe someone will want to implement alternative ? command for
> strict XPP compatibility.

We now return you to your discussion.

Paul

From harbour.01 at syenar.hu  Wed Oct 10 09:28:22 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 10 05:28:32 2007
Subject: [Harbour] Extensions
In-Reply-To: <9257026e0710100558h5ffee2a3ta94734947462fe10@mail.gmail.com>
References: <20071008150554.GA5054@localhost.localdomain>
	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
	<20071008205146.GC6548@localhost.localdomain>
	<470B7960.4000707@dbtopas.lt> <470B8EC8.2010206@dbtopas.lt>
	<4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>
	<20071010111305.GA17387@localhost.localdomain>
	<9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>
	<20071010120032.GA17477@localhost.localdomain>
	<1A3741C0-BE7B-41EC-91ED-F3C4F03666C1@syenar.hu>
	<9257026e0710100558h5ffee2a3ta94734947462fe10@mail.gmail.com>
Message-ID: <4D28E192-B232-43F0-B6C5-C8AF4449BBB2@syenar.hu>


On 2007.10.10., at 14:58, Lorenzo Fiorini wrote:

> On 10/10/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
>
>> As for TBROWSE() I'm finished with display/color basic behaviour
>> compatibility related stuff, now I'm on vertical and horizontal
>> navigation, it looks quite complicated, unfortunately I've spend
>> a week on the "$" operator (plus on my own tasks before that), so
>> it's just yesterday I could slowly restart dealing with it.
>
> I've sent to you and to the list a working tbrowse many months ago
> with a working get system and a working teditor.

"Working" meaning what?

TBrowse()/Get() definitely didn't work well, the former
actually crashed with my app. Both of them are still being
updated on a weekly basis in the xhb project repository.

> Me and I guess many other hundreds of xHarbour users use it every day
> and I get the same results that I get from C53b.

Check them with RTO_GET and RTO_TB to see how they behave
fully differently than in C5.x.

While I've spend like two weeks on TBROWSE(), I've found
and fixed many problems even compared to the xhb TBrowse().
xhb TBrowse() looks very hackish inside, so I couldn't even
use actual code from it up to now (I could get some ideas
from it though).

> If you want to write your own "perfect" one it's a your choice.

Many thanks indeed.

Brgds,
Viktor

From dbtopas at dbtopas.lt  Wed Oct 10 09:53:57 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 10 05:53:52 2007
Subject: [Harbour] Extensions
In-Reply-To: <03ab01c80b36$801d9120$6a00a8c0@PAUL>
References: <20071008150554.GA5054@localhost.localdomain>	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com><20071008205146.GC6548@localhost.localdomain>	<470B7960.4000707@dbtopas.lt>
	<03ab01c80b36$801d9120$6a00a8c0@PAUL>
Message-ID: <470CD975.6040608@dbtopas.lt>

Paul Tucker wrote:
> 
> MK> XBase++ 1.90 Intl. Trail:
> 
> MK> PROC main()
> MK>    ? 2 $ {1, 2, 3}  // Prints: Y
> MK>    ? 4 $ {1, 2, 3}  // Prints: N
> MK> RETURN
> 
> MK> So, who is the winner XBase++ or Clipper? :)
> 
> Why would anyone take an existing operation '$' and change the return 
> value? It makes no sense at all.
> 
> Are you sure their '?' isn't modifying the result of a logical when 
> printing it, or does  2 $ {1,2,3] actually return a string?
> 
> If it returns a string, I think we should not bother trying to emulate 
> that.

Hi,


It's easy to test the ambiguity:
PROC main()
LOCAL xI
   xI := 2 $ {1, 2, 3}
   ? "Valtype:", VALTYPE(xI), IF(xI, "TRUE", "FALSE")
   xI := 4 $ {1, 2, 3}
   ? "Valtype:", VALTYPE(xI), IF(xI, "TRUE", "FALSE")
RETURN

This code prints:
Valtype: L TRUE
Valtype: L FALSE


Best regards,
Mindaugas
From lorenzo.fiorini at gmail.com  Wed Oct 10 10:05:45 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Oct 10 06:05:56 2007
Subject: [Harbour] Extensions
In-Reply-To: <4D28E192-B232-43F0-B6C5-C8AF4449BBB2@syenar.hu>
References: <20071008150554.GA5054@localhost.localdomain>
	<470B7960.4000707@dbtopas.lt> <470B8EC8.2010206@dbtopas.lt>
	<4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>
	<20071010111305.GA17387@localhost.localdomain>
	<9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>
	<20071010120032.GA17477@localhost.localdomain>
	<1A3741C0-BE7B-41EC-91ED-F3C4F03666C1@syenar.hu>
	<9257026e0710100558h5ffee2a3ta94734947462fe10@mail.gmail.com>
	<4D28E192-B232-43F0-B6C5-C8AF4449BBB2@syenar.hu>
Message-ID: <9257026e0710100705g3eeaaa79j458221ce047767dd@mail.gmail.com>

On 10/10/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Check them with RTO_GET and RTO_TB to see how they behave
> fully differently than in C5.x.

My users don't use RTO_TB. I know it's not perfect but FOR ME it does
what does C53b with the same code.

> While I've spend like two weeks on TBROWSE(), I've found
> and fixed many problems even compared to the xhb TBrowse().
> xhb TBrowse() looks very hackish inside, so I couldn't even
> use actual code from it up to now (I could get some ideas
> from it though).

> Many thanks indeed.

Forgive me I simply couldn't resist to respond to your sarcasm:
"unfortunately I've spend a week on the "$" operator (plus on my own
tasks before that), so it's just yesterday I could slowly restart
dealing with it."

I suggest to drop the "discussion" here.
I've understood your position and you know that I don't share it but
this doesn't mean I don't respect your point or not appreciate your
efforts.

I'll continue with my proposals and you can continue to say no :)

best regards,
Lorenzo







>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From dbtopas at dbtopas.lt  Wed Oct 10 11:11:53 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 10 07:11:48 2007
Subject: [Harbour] Extensions
In-Reply-To: <1A3741C0-BE7B-41EC-91ED-F3C4F03666C1@syenar.hu>
References: <20071008150554.GA5054@localhost.localdomain>	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>	<20071008205146.GC6548@localhost.localdomain>	<470B7960.4000707@dbtopas.lt>
	<470B8EC8.2010206@dbtopas.lt>	<4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>	<20071010111305.GA17387@localhost.localdomain>	<9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>	<20071010120032.GA17477@localhost.localdomain>
	<1A3741C0-BE7B-41EC-91ED-F3C4F03666C1@syenar.hu>
Message-ID: <470CEBB9.2050002@dbtopas.lt>

Hi,


>> I know the reason but you cannot chose extensions you like personally
>> and say that others are bad and cannot be implemented even as optional
>> compiler switches. I like that you are watching carefully for the whole
>> language syntax but IMHO sometimes you forget that you are forcing
>> your personal preferences. F.e. I understand that we should keep
>> name space clean and it's very good practice to use HB_ prefix.
>> But not always. If we have 20 or more functions with 'ord' prefix
>> and then we are adding new one to operate on orders calling it
>> hb_ord*() creates incredible noise for people who do not know all
>> Cl*pper functions. It's a nightmare for them to guess when hb_ prefix
>> should be used or not. How we should document it?
> 
> If you look carefully, I've never complained in such cases.
> This might break the concept in general, but in these cases
> I agree with you that consistency is more important than
> "hb_" prefix. After all, chances are lower that someone
> would "continue" or extend an existing namespace, like "ord*"
> or "db*" (and the list is about over BTW, if we don't count
> SIx and friends and some #define namespaces).


Ok. What about xTOy() namespace? We have CTOD(), DTOC(), DTOS(), but... 
HB_STOD()? What about AT()/RAT(), ASCAN()/[HB_]RASCAN()?
We do not have function convert float to binary string yet. Which name 
will you select BIN2F()/F2BIN() or HB_BIN2F()/HB_F2BIN()?


> Plus, I don't want to go personal, but it seems to me that some ppl
> on the list are simply going too far in agressively pushing different
> random extensions, and this reached a level when the original goals
> started to suffer. If we want to deal with these extensions (which I
> don't think we can avoid anymore anyway), let's find a proper and
> _generic_ way to add them, while the core can stay what it was meant
> to be and keep the Clipper language on certain level of standard.
> See my recent mail about one possible solution. So much for politics,
> I'm tired of it.

You can be personal if you want. That's perhaps me, who is "agressively 
pushing" :) But I have a different point of view.

This "pushing" is making clear (unhiding) the problems I see in Harbour. 
I can live without majority of topics we are discussing. I've changed 
behavior of Clipper I will also change Harbour's if it will not fit my 
needs. So, I do not care a lot about ADEL, AINS, MIN, MAX, STOD or $. 
I'll do overloading, or change source code to work as I (and my 
programmers group) expect. So, I do not need to push anything and I can 
stay really calm about my own programming environment.

But I'm also interested in the project. I want it to choose the best way 
to develop, even if my preferences is different. That's why I pass you 
with more and more "random extensions" or doubtful examples of current 
solutions (for example, see the note about HB_STOD() above). Only having 
the whole range of extensions in mind we can finally decide the rules 
that is good for the project and what is bad. This discussion really 
become political, because we can not see I good solution for it. Being 
compatible with many products is contradictious thing, as you can see, 
we can not be compatible with Clipper and XBase++ for $ operator.
Compatibility with Clipper and new extensions are also contradictious 
things.

MY own conclusions after this discussion is that we must be a little 
less restrictive to extensions.

We are the first who try to avoid extensions. XBase++, Clip and other 
developers added extensions because it were missing in Clipper and 
needed by programmers. We try to avoid it. It sounds silly, that we can 
not add extensions ourselves, but can add extensions to our project 
after these extensions are added to some 3rd party projects. Ex., we add 
3rd parameter of AINS() because Clip has it, but do not add 3rd 
parameter to ADEL() to avoid ASIZE() call because Clip does not have it. 
Perhaps you have a different view of point, but for me it's really 
strange that 3rd party have more power on Harbour, than Harbour 
developers itself.

The other way is to stay Harbour conservative. In this case we must drop 
compatibility with all xbase languages except for Clipper. And remain 
Clipper compatible as much as possible. This conservative approach 
perhaps will not satisfy many developers, but it make them happy if it 
will allow personalize it's programming environment by function 
overload, etc. This way everyone can choose that he expects for $, ADEL, 
etc. Personalization by compiler switches sounds nice - everyone can 
choose a different personal environment for every module, but it's 
difficult to implement (can we implement a different ADEL for every 
module, will it work with macro...). If conservative approach will be 
selected, public libraries and core code should use no extensions at all.



Best regards,
Mindaugas
From harbour.01 at syenar.hu  Wed Oct 10 11:20:29 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 10 07:20:55 2007
Subject: [Harbour] Extensions
In-Reply-To: <9257026e0710100705g3eeaaa79j458221ce047767dd@mail.gmail.com>
References: <20071008150554.GA5054@localhost.localdomain>
	<470B7960.4000707@dbtopas.lt> <470B8EC8.2010206@dbtopas.lt>
	<4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>
	<20071010111305.GA17387@localhost.localdomain>
	<9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>
	<20071010120032.GA17477@localhost.localdomain>
	<1A3741C0-BE7B-41EC-91ED-F3C4F03666C1@syenar.hu>
	<9257026e0710100558h5ffee2a3ta94734947462fe10@mail.gmail.com>
	<4D28E192-B232-43F0-B6C5-C8AF4449BBB2@syenar.hu>
	<9257026e0710100705g3eeaaa79j458221ce047767dd@mail.gmail.com>
Message-ID: <19BF2985-9CA0-4F25-B6C6-F09106EB81E6@syenar.hu>

Hi Lorenzo,

On 2007.10.10., at 16:05, Lorenzo Fiorini wrote:

> On 10/10/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
>
>> Check them with RTO_GET and RTO_TB to see how they behave
>> fully differently than in C5.x.
>
> My users don't use RTO_TB.

RTO_TB is a regression test suite for TBROWSE() developers,
so no wonder your users don't use it. You could try it once
though, just to see.

> I know it's not perfect but FOR ME it does
> what does C53b with the same code.

FOR YOU it might do, but FOR HIM/HER it might not, because t
hey happen to use a feature you don't use, or you use it in
a different way. For TBROWSE() this can happen easily, as it
is complex and flexible.

Nothing will replace extensive (possibly repeatable) testing,
if you want to attain a certain quality. (and to avoid having
a never ending loop of bug reports and fixes.)

It's also important to later optimize or extend any code, as
it is very important that optimizations and extensions don't
break existing functionality in unexpected ways. You get the
idea.

See also HBTEST. (Which was also not used by any user :)

>> While I've spend like two weeks on TBROWSE(), I've found
>> and fixed many problems even compared to the xhb TBrowse().
>> xhb TBrowse() looks very hackish inside, so I couldn't even
>> use actual code from it up to now (I could get some ideas
>> from it though).
>
>> Many thanks indeed.
>
> Forgive me I simply couldn't resist to respond to your sarcasm:
> "unfortunately I've spend a week on the "$" operator (plus on my own
> tasks before that), so it's just yesterday I could slowly restart
> dealing with it."
>
> I suggest to drop the "discussion" here.
> I've understood your position and you know that I don't share it but
> this doesn't mean I don't respect your point or not appreciate your
> efforts.

Thanks.

> I'll continue with my proposals and you can continue to say no :)

Great :) IMO it would be more efficient if group members would
row into the same direction (A good hint for that direction is
the project goal we have ;), but you can do that of course.

Pls read my recent mail about a possible idea towards a more
generic compatibility support. Maybe we can move this discussion
to some more constructive grounds, so that everyone would benefit.

Brgds,
Viktor

From mpaliwoda at interia.pl  Wed Oct 10 12:29:22 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Oct 10 08:29:45 2007
Subject: [Harbour] Extensions
In-Reply-To: <1A3741C0-BE7B-41EC-91ED-F3C4F03666C1@syenar.hu>
References: <20071008150554.GA5054@localhost.localdomain>	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>	<20071008205146.GC6548@localhost.localdomain>	<470B7960.4000707@dbtopas.lt>
	<470B8EC8.2010206@dbtopas.lt>	<4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>	<20071010111305.GA17387@localhost.localdomain>	<9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>	<20071010120032.GA17477@localhost.localdomain>
	<1A3741C0-BE7B-41EC-91ED-F3C4F03666C1@syenar.hu>
Message-ID: <470CFDE2.7010708@interia.pl>

Hi Viktor, Przemek, Mindaugas, Lorenzo

1. Making Harbour compatible with XHarbour, Xbase++, Clip, Flagship
    was _never_ the goal of Harbour. _Especially_ - making it compatible
    _at the same time_ with many compilers via different modules, using
    compiler switches and/or separated libraries.
    This is simply a _crazy_ idea to me and I can _hardly_ imagine real
    life needs for this. It's a nonsense IMO - until someone really shows
    me any practical example.
    Besides this, why not adding Visual FoxPro and/or CA Visual Object to
    the list ?

    Compatibility with _one_ other compiler _at the same time_ is however
    _quite usefull_ addition to Harbour. It doesn't matter if it is done
    thru compiler switches or separated libraries IMO.

2. I agree with Viktor that talking about having $ operator extension
    is uncomparable to having strong typing. Strong typing can really
    give lots of benefits to programmes in terms of eliminating some
    kind of bugs on "startup", while $ is simply "a gadget".

3. I was _the only one_ on xharbour developers list, who defeated the
    concept of _always_ using namespace prefixes for _any_ xharbour RTL
    additions to give the end users _a freedom_ of choice for their
    own names. And I'll be trying to defeat namespace prefixes in Harbour
    too. Even _one_ "ord*" (or any other) addition, which is not defined
    by Clipper can bring hard problems, especially for those using dlls.

-- 

Marek


----------------------------------------------------------------------
Stworz swoja w?asna telewizje internetowa!
Sprawdz >>> http://link.interia.pl/f1bdc

From harbour.01 at syenar.hu  Wed Oct 10 12:37:18 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 10 08:37:32 2007
Subject: [Harbour] Extensions
In-Reply-To: <470CEBB9.2050002@dbtopas.lt>
References: <20071008150554.GA5054@localhost.localdomain>	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>	<20071008205146.GC6548@localhost.localdomain>	<470B7960.4000707@dbtopas.lt>
	<470B8EC8.2010206@dbtopas.lt>	<4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>	<20071010111305.GA17387@localhost.localdomain>	<9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>	<20071010120032.GA17477@localhost.localdomain>
	<1A3741C0-BE7B-41EC-91ED-F3C4F03666C1@syenar.hu>
	<470CEBB9.2050002@dbtopas.lt>
Message-ID: <1A196747-BA67-4E86-96A3-DA7B7711FE08@syenar.hu>

Hi Mindaugas,

>> or "db*" (and the list is about over BTW, if we don't count
>> SIx and friends and some #define namespaces).
>
>
> Ok. What about xTOy() namespace? We have CTOD(), DTOC(), DTOS(),  
> but... HB_STOD()? What about AT()/RAT(), ASCAN()/[HB_]RASCAN()?
> We do not have function convert float to binary string yet. Which  
> name will you select BIN2F()/F2BIN() or HB_BIN2F()/HB_F2BIN()?

I don't think these are namespaces. Namespace
always looks like a prefix (in Clipper/Harbour
at least).

hb_STOD() needs to exist because app code might
contain SToD() already (chance is almost 100% for
that). For BIN2F() there could be collisions too.

We can start a lengthy discussion on A*() "namespace",
but IMHO one character is simply too few to create
the sense of a namespace and chances are very
high that app code somewhere would already contain
those names.

The whole point is to avoid collisions and
to explicitly express that the ones starting
with hb_ are Harbour functions. Imagine it as it
they were all part of a Harbour Extension
Library. Same concept was used with many 3rd
party libs.

Also, if a Harbour user happens to move away
from Harbour, it's very easy to spot all those
names and either change or implement them. That's
a positive side-effect.

>> Plus, I don't want to go personal, but it seems to me that some ppl
>> on the list are simply going too far in agressively pushing different
>> random extensions, and this reached a level when the original goals
>> started to suffer. If we want to deal with these extensions (which I
>> don't think we can avoid anymore anyway), let's find a proper and
>> _generic_ way to add them, while the core can stay what it was meant
>> to be and keep the Clipper language on certain level of standard.
>> See my recent mail about one possible solution. So much for politics,
>> I'm tired of it.
>
> You can be personal if you want. That's perhaps me, who is  
> "agressively pushing" :) But I have a different point of view.

Let's think of this as a "phenomenon" pls. I intentionally
didn't tell any names, first because this is an _overall_
pressure, and because the point is not to point fingers
to any of our contributors, but to solve the problems we
seem to have.

> This "pushing" is making clear (unhiding) the problems I see in  
> Harbour. I can live without majority of topics we are discussing.  
> I've changed behavior of Clipper I will also change Harbour's if it  
> will not fit my needs. So, I do not care a lot about ADEL, AINS,  
> MIN, MAX, STOD or $. I'll do overloading, or change source code to  
> work as I (and my programmers group) expect. So, I do not need to  
> push anything and I can stay really calm about my own programming  
> environment.

True. Everyone has the source code there to be customized in _any_ ways.

If someone wants a feature to be group supported (and developed),
the feature needs to be accepted by the group, and in line with
the concept.

> But I'm also interested in the project. I want it to choose the  
> best way to develop, even if my preferences is different. That's  
> why I pass you with more and more "random extensions" or doubtful  
> examples of current solutions (for example, see the note about  
> HB_STOD() above). Only having the whole range of extensions in mind  
> we can finally decide the rules that is good for the project and  
> what is bad. This discussion really become political, because we  
> can not see I good solution for it. Being compatible with many  
> products is contradictious thing, as you can see, we can not be  
> compatible with Clipper and XBase++ for $ operator.
> Compatibility with Clipper and new extensions are also  
> contradictious things.

I agree. Or, we might be able to make it "almost compatible", but
it needs large and continous work. I'm not sure if we have enough
resource for that, or if it's wise to use our existing resources
for that.

It's not my job to allocate anyones resources though, I just think
we became distracted.

> MY own conclusions after this discussion is that we must be a  
> little less restrictive to extensions.
>
> We are the first who try to avoid extensions. XBase++, Clip and  
> other developers added extensions because it were missing in  
> Clipper and needed by programmers. We try to avoid it. It sounds  
> silly, that we can not add extensions ourselves, but can add  
> extensions to our project after these extensions are added to some  
> 3rd party projects. Ex., we add 3rd parameter of AINS() because  
> Clip has it, but do not add 3rd parameter to ADEL() to avoid ASIZE 
> () call because Clip does not have it. Perhaps you have a different  
> view of point, but for me it's really strange that 3rd party have  
> more power on Harbour, than Harbour developers itself.

I fully agree.

> The other way is to stay Harbour conservative. In this case we must  
> drop compatibility with all xbase languages except for Clipper. And  
> remain Clipper compatible as much as possible. This conservative  
> approach perhaps will not satisfy many developers, but it make them  
> happy if it will allow personalize it's programming environment by  
> function overload, etc. This way everyone can choose that he  
> expects for $, ADEL, etc. Personalization by compiler switches  
> sounds nice - everyone can choose a different personal environment  
> for every module, but it's difficult to implement (can we implement  
> a different ADEL for every module, will it work with macro...). If  
> conservative approach will be selected, public libraries and core  
> code should use no extensions at all.

Well, this used to be the conservative side of Harbour development,
(I still like to think it is, and that's why we have xhb) so, if
it would only be up to me, this is what I'd do.

Real life is not that simple though, because there actually _are_
useful "extensions", and there is this tremendous pressure coming
from users (many of them coming from xhb). Then comes the battle:
which is useful and which is not... and how to implement them
wisely.

I'd personally encourage users to use a minimal approach when it
comes to using extensions in app code, and here maybe we could
give another shot to see if there is any feasable and proper way
to solve the "dialect-problem". (again: goal is not to be 100%
compatible with everything, but to help in "most cases" in this
"Clipper-babel")

Brgds,
Viktor

From dbtopas at dbtopas.lt  Wed Oct 10 13:12:33 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 10 09:18:54 2007
Subject: [Harbour] Extensions
In-Reply-To: <1A196747-BA67-4E86-96A3-DA7B7711FE08@syenar.hu>
References: <20071008150554.GA5054@localhost.localdomain>	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>	<20071008205146.GC6548@localhost.localdomain>	<470B7960.4000707@dbtopas.lt>	<470B8EC8.2010206@dbtopas.lt>	<4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>	<20071010111305.GA17387@localhost.localdomain>	<9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>	<20071010120032.GA17477@localhost.localdomain>	<1A3741C0-BE7B-41EC-91ED-F3C4F03666C1@syenar.hu>	<470CEBB9.2050002@dbtopas.lt>
	<1A196747-BA67-4E86-96A3-DA7B7711FE08@syenar.hu>
Message-ID: <470D0801.9040100@dbtopas.lt>

>> Ok. What about xTOy() namespace? We have CTOD(), DTOC(), DTOS(), 
>> but... HB_STOD()? What about AT()/RAT(), ASCAN()/[HB_]RASCAN()?
>> We do not have function convert float to binary string yet. Which name 
>> will you select BIN2F()/F2BIN() or HB_BIN2F()/HB_F2BIN()?
> 
> hb_STOD() needs to exist because app code might
> contain SToD() already (chance is almost 100% for
> that).


Hi,


your notice is very good: "is almost 100% for that". But let's look at 
the reason. The users implemented STOD() because this name is the most 
natural, and some languages do not support it.
But this will be also in Harbour. We have HB_STOD() and all users will 
implement
   FUNC STOD(x)
   RETURN HB_STOD(x)
or do an independent STOD() implementation. So, why not to help users by 
including STOD() into Harbour, and let users to delete their own 
redundant code.

Ok, sorry this is only my point of view. I'm also got tired of this 
discussion.


Best regards,
Mindaugas

From lorenzo.fiorini at gmail.com  Wed Oct 10 14:05:32 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Oct 10 10:33:17 2007
Subject: [Harbour] Extensions
In-Reply-To: <1A196747-BA67-4E86-96A3-DA7B7711FE08@syenar.hu>
References: <20071008150554.GA5054@localhost.localdomain>
	<470B7960.4000707@dbtopas.lt> <470B8EC8.2010206@dbtopas.lt>
	<4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>
	<20071010111305.GA17387@localhost.localdomain>
	<9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>
	<20071010120032.GA17477@localhost.localdomain>
	<1A3741C0-BE7B-41EC-91ED-F3C4F03666C1@syenar.hu>
	<470CEBB9.2050002@dbtopas.lt>
	<1A196747-BA67-4E86-96A3-DA7B7711FE08@syenar.hu>
Message-ID: <9257026e0710101105q32684cccibe4a018cfdca4ee7@mail.gmail.com>

On 10/10/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> I don't think these are namespaces. Namespace
> always looks like a prefix (in Clipper/Harbour
> at least).
>
> hb_STOD() needs to exist because app code might
> contain SToD() already (chance is almost 100% for
> that). For BIN2F() there could be collisions too.

Any chance to replace HB_ it with a postfix Ex like SToDEx?

I don't know any language that use its name as prefix for "core" functions.

In fact the HB_ is the first problem that my developers and
contractors have with Harbour. Since they are not Clipper developers
they can't guess if a function is HB_ or "clean". Look for example AT
and HB_ATX it's hard for a non "seasoned" Harbour developer guess that
they are related while AT and ATEX seem more clear to me.

Another example is INet which is a pretty standard namespace for
socket programming and I still use hbcompat.ch to "remove" HB_ from
it.

Morevover the only doc available on the web today is xhdn and there
the functions have different names than Harbour ( some with HB_ some
without ).

To help the change there could be a hbprefix lib that "translate" the
HB_ functions.

best regards,
Lorenzo
From dbtopas at dbtopas.lt  Wed Oct 10 14:21:12 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 10 10:38:12 2007
Subject: [Harbour] ChangeLog 2007-10-10 21:11 UTC+0300 Mindaugas Kavaliauskas
Message-ID: <470D1818.1050004@dbtopas.lt>

2007-10-10 21:11 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * harbour/tests/multifnc/t0.prg
   * harbour/tests/multifnc/t1.prg
   * harbour/tests/multifnc/t2.prg
     + one more test for function overload with C function



Hi,

one more example with C overloading. This gives me errors on BCC and MGW:

C:\harboursvn\tests\multifnc>t0.exe

Windows XP 5.1.2600 Service Pack 2 Harbour devel build 1.1-1 Intl. 
10/10/07 21:05:52
Borland C++ 5.5.1 (32 bit)
main t0.prg t0.prg
alert t1.prg t1.prg [ALERT]
p0 t0.prg t0.prg P0:t0.prg P0:t0.prg OK
p1 t0.prg t0.prg P1:t0.prg P1:t0.prg OK
p2 t1.prg t1.prg P2:t1.prg P2:t1.prg OK
p3 t0.prg t0.prg P3:t0.prg P3:t0.prg OK
p4 t1.prg t1.prg P4:t1.prg P4:t1.prg OK
p5 t2.prg t2.prg P5:t2.prg P5:t2.prg OK
p6 t0.prg t0.prg P6:t0.prg P6:t0.prg OK
p7 t2.prg t2.prg P7:t1.prg P7:t1.prg ERR
===
main2 t1.prg t1.prg
alert t1.prg t1.prg [ALERT]
p0 t0.prg t0.prg P0:t0.prg P0:t0.prg OK
p1 t0.prg t0.prg P1:t0.prg P1:t0.prg OK
p2 t1.prg t1.prg P2:t1.prg P2:t1.prg OK
p3 t0.prg t0.prg P3:t0.prg P3:t0.prg OK
p4 t1.prg t1.prg P4:t1.prg P4:t1.prg OK
p5 t2.prg t2.prg P5:t2.prg P5:t2.prg OK
p6 t0.prg t0.prg P6:t0.prg P6:t0.prg OK
p7 t2.prg t2.prg P7:t1.prg P7:t1.prg ERR
===
main3 t2.prg t2.prg
alert t1.prg t1.prg [ALERT]
p0 t0.prg t0.prg P0:t0.prg P0:t0.prg OK
p1 t0.prg t0.prg P1:t0.prg P1:t0.prg OK
p2 t1.prg t1.prg P2:t1.prg P2:t1.prg OK
p3 t0.prg t0.prg P3:t0.prg P3:t0.prg OK
p4 t1.prg t1.prg P4:t1.prg P4:t1.prg OK
p5 t2.prg t2.prg P5:t2.prg P5:t2.prg OK
p6 t0.prg t0.prg P6:t0.prg P6:t0.prg OK
p7 t2.prg t2.prg P7:t2.prg P7:t2.prg ERR

Best regards,
Mindaugas


From mpaliwoda at interia.pl  Wed Oct 10 14:50:59 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Oct 10 10:51:07 2007
Subject: [Harbour] Extensions
In-Reply-To: <470CFDE2.7010708@interia.pl>
References: <20071008150554.GA5054@localhost.localdomain>	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>	<20071008205146.GC6548@localhost.localdomain>	<470B7960.4000707@dbtopas.lt>	<470B8EC8.2010206@dbtopas.lt>	<4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>	<20071010111305.GA17387@localhost.localdomain>	<9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>	<20071010120032.GA17477@localhost.localdomain>	<1A3741C0-BE7B-41EC-91ED-F3C4F03666C1@syenar.hu>
	<470CFDE2.7010708@interia.pl>
Message-ID: <470D1F13.3050708@interia.pl>

Marek Paliwoda pisze:

> 3. I was _the only one_ on xharbour developers list, who defeated the
>    concept of _always_ using namespace prefixes for _any_ xharbour RTL
>    additions to give the end users _a freedom_ of choice for their
>    own names. And I'll be trying to defeat namespace prefixes in Harbour
>    too. Even _one_ "ord*" (or any other) addition, which is not defined
>    by Clipper can bring hard problems, especially for those using dlls.

Replace "defeat" with "defend" in the above :)

BTW,
Sometimes it's really funny reading my own english texts ;-)

-- 

Marek

----------------------------------------------------------------------
Pokaz innym kto tu rzadzi!
Kliknij >>> http://link.interia.pl/f1bbc

From dbtopas at dbtopas.lt  Wed Oct 10 16:17:11 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 10 12:17:06 2007
Subject: [Harbour] Symbol table management (ex Extensions)
In-Reply-To: <20071009184051.GA2102@localhost.localdomain>
References: <20071008150554.GA5054@localhost.localdomain>	<EA4BC992-7B41-457C-8AAB-A365F2431B64@syenar.hu>	<470A6C3C.2010502@dbtopas.lt>	<20071008232334.GA16226@localhost.localdomain>	<470B9E9D.4090001@dbtopas.lt>
	<20071009184051.GA2102@localhost.localdomain>
Message-ID: <470D3347.9040507@dbtopas.lt>

Hi,


a few hours ago I've expanded multifnc sample to indicate a problem of 
multiple linking, when one of the modules is C function.

I've fixed dynsym.c to say "OK" on each line:

C:\harboursvn\tests\multifnc\w32\mingw32>t0.exe

Windows XP 5.1.2600 Service Pack 2 Harbour devel build 1.1-1 Intl. 
10/10/07 22:33:46
MinGW GNU C 3.4.2 (32 bit)
main ../../t0.prg ../../t0.prg
alert ../../t1.prg ../../t1.prg [ALERT]
p0 ../../t0.prg ../../t0.prg P0:t0.prg P0:t0.prg OK
p1 ../../t0.prg ../../t0.prg P1:t0.prg P1:t0.prg OK
p2 ../../t1.prg ../../t1.prg P2:t1.prg P2:t1.prg OK
p3 ../../t0.prg ../../t0.prg P3:t0.prg P3:t0.prg OK
p4 ../../t1.prg ../../t1.prg P4:t1.prg P4:t1.prg OK
p5 ../../t2.prg ../../t2.prg P5:t2.prg P5:t2.prg OK
p6 ../../t0.prg ../../t0.prg P6:t0.prg P6:t0.prg OK
p7 ../../t2.prg ../../t2.prg P7:t1.prg P7:t1.prg OK
===
main2 ../../t1.prg ../../t1.prg
alert ../../t1.prg ../../t1.prg [ALERT]
p0 ../../t0.prg ../../t0.prg P0:t0.prg P0:t0.prg OK
p1 ../../t0.prg ../../t0.prg P1:t0.prg P1:t0.prg OK
p2 ../../t1.prg ../../t1.prg P2:t1.prg P2:t1.prg OK
p3 ../../t0.prg ../../t0.prg P3:t0.prg P3:t0.prg OK
p4 ../../t1.prg ../../t1.prg P4:t1.prg P4:t1.prg OK
p5 ../../t2.prg ../../t2.prg P5:t2.prg P5:t2.prg OK
p6 ../../t0.prg ../../t0.prg P6:t0.prg P6:t0.prg OK
p7 ../../t2.prg ../../t2.prg P7:t1.prg P7:t1.prg OK
===
main3 ../../t2.prg ../../t2.prg
alert ../../t1.prg ../../t1.prg [ALERT]
p0 ../../t0.prg ../../t0.prg P0:t0.prg P0:t0.prg OK
p1 ../../t0.prg ../../t0.prg P1:t0.prg P1:t0.prg OK
p2 ../../t1.prg ../../t1.prg P2:t1.prg P2:t1.prg OK
p3 ../../t0.prg ../../t0.prg P3:t0.prg P3:t0.prg OK
p4 ../../t1.prg ../../t1.prg P4:t1.prg P4:t1.prg OK
p5 ../../t2.prg ../../t2.prg P5:t2.prg P5:t2.prg OK
p6 ../../t0.prg ../../t0.prg P6:t0.prg P6:t0.prg OK
p7 ../../t2.prg ../../t2.prg P7:t1.prg P7:t1.prg OK

diff file is attached.

I guess this is not the final version of multiple function linking and I 
can create an example to break this code. But I've got an idea. Linkers 
like mgw and bcc works in different way then gcc on multiple function 
linkage. It correctly sets one function address of all modules except 
for the modules which contains "inactive" code of the same function. gcc 
overwrites this address also, but other linkers leaves here address of 
the local public function. So, each module calls it's own public 
function, and the module which does not contains it, calls the first one 
in linking list.
So, if we have public symbol without HB_FS_LOCAL, then this address is 
the one we need (in case this module does not contains C public version 
of the same Harbour function). This idea was used in my fix for 
dynsym.c, that's why I have conditions like:
             if ( ( pSymbol->scope.value & HB_FS_LOCAL ) == 0 )
The rest of fix code tries to manage initialization order.

I thing I can break my code overloading C inline ("inline" I mean 
defined inside pragma begindump/enddump) function, by another C inline 
function. But it is rear situation.
But the general rule is the first public address for BCC, DJGPP, and the 
last for MGW is the one we need ("the right address"). We just need to 
manage DEFERED flag to avoid scanning of all symbol tables if we have 
"the right address" in the end (for MGW).

I've not tested my code with .dll, .hrb, it's possible I'm missing 
something important.

One more note. You can see screen dump above, that procfile() return a 
wrong result for P7() because real global function is written in C and 
does not have it's own SYMBOL record. This can be fixed by testing if
"the right address" is equal to the address of symbol having HB_FS_LOCAL 
flag.

The list of all symbols for the same dynsym can help to manage many 
situations, ex. restoring old public function address after unloading 
.hrb module which was overloading some function.

The end of a letter is kind of brainstorming... Sorry, it's time to sleep :)


Best regards,
Mindaugas

-------------- next part --------------
--- dynsym.c	Wed Oct 10 22:30:30 2007
+++ dynsym.c.new	Wed Oct 10 22:30:10 2007
@@ -205,7 +205,24 @@
 #endif
          }
       }
+      else if ( pDynSym->pSymbol != pSymbol &&
+                pDynSym->pSymbol->value.pFunPtr != pSymbol->value.pFunPtr )
+      {
+#if defined( HB_OVERLOAD_MULTIPLE_FUNC )
+#if defined( __GNUC__ ) && !defined( __DJGPP__ )
+            /* MinGW (like most of other GCC ports) uses reverted order for
+             * initialization functions
+             */
+            if ( ( pSymbol->scope.value & HB_FS_LOCAL ) == 0 )
+               pDynSym->pSymbol->value.pFunPtr = pSymbol->value.pFunPtr;
+#else
+            /* BCC, DJGPP, ... */
+            if ( ( pDynSym->pSymbol->scope.value & HB_FS_LOCAL ) == 0 )
+               pSymbol->value.pFunPtr = pDynSym->pSymbol->value.pFunPtr;
+#endif
+#endif
 
+      }
       if( ( !pDynSym->pSymbol->value.pFunPtr && pSymbol->value.pFunPtr ) ||
           ( pSymbol->scope.value & HB_FS_LOCAL ) != 0 )
       {
From druzus at acn.waw.pl  Wed Oct 10 16:17:58 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 10 12:18:05 2007
Subject: [Harbour] ChangeLog 2007-10-10 21:11 UTC+0300 Mindaugas
	Kavaliauskas
In-Reply-To: <470D1818.1050004@dbtopas.lt>
References: <470D1818.1050004@dbtopas.lt>
Message-ID: <20071010201758.GA20098@localhost.localdomain>

On Wed, 10 Oct 2007, Mindaugas Kavaliauskas wrote:
> one more example with C overloading. This gives me errors on BCC and MGW:
> C:\harboursvn\tests\multifnc>t0.exe
[...]
> p7 t2.prg t2.prg P7:t1.prg P7:t1.prg ERR
[...]
> p7 t2.prg t2.prg P7:t1.prg P7:t1.prg ERR
[...]
> p7 t2.prg t2.prg P7:t2.prg P7:t2.prg ERR

Results are expected. Symbols with HB_FS_LOCAL has the highest priority
over the linking order and the code which tries to resolve conflicts is
only for HB_FS_LOCAL symbols.
If you want to also make it working for all symbols and allow overloading
.prg functions by C ones then you will have to make two modifications in
hb_dynsymNew() function:
1. give higher priority for HB_FS_LOCAL symbols only if they
   have the same function address as the one already registered
   otherwise remove HB_FS_LOCAL and set HB_FS_DEFERRED flag or update
   function address.
   Remember to keep already used linker dependent order to chose
   function symbol (first or last).
2. add HB_FS_DEFERRED flag to all function symbols not registered
   in main HB_DYNS symbol or add final updating of function addresses
   in hb_vmInit() to set for all global functions address registered
   in main HB_DYNS after registering all symbols (for linker with
   reverted order but it maybe good to call it for all builds)

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Oct 10 16:31:04 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 10 12:31:18 2007
Subject: [Harbour] Extensions
In-Reply-To: <9257026e0710101105q32684cccibe4a018cfdca4ee7@mail.gmail.com>
References: <20071008150554.GA5054@localhost.localdomain>
	<470B7960.4000707@dbtopas.lt> <470B8EC8.2010206@dbtopas.lt>
	<4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>
	<20071010111305.GA17387@localhost.localdomain>
	<9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>
	<20071010120032.GA17477@localhost.localdomain>
	<1A3741C0-BE7B-41EC-91ED-F3C4F03666C1@syenar.hu>
	<470CEBB9.2050002@dbtopas.lt>
	<1A196747-BA67-4E86-96A3-DA7B7711FE08@syenar.hu>
	<9257026e0710101105q32684cccibe4a018cfdca4ee7@mail.gmail.com>
Message-ID: <3A1ADCE3-2604-42F9-A430-98C1C2B6693F@syenar.hu>

>> I don't think these are namespaces. Namespace
>> always looks like a prefix (in Clipper/Harbour
>> at least).
>>
>> hb_STOD() needs to exist because app code might
>> contain SToD() already (chance is almost 100% for
>> that). For BIN2F() there could be collisions too.
>
> Any chance to replace HB_ it with a postfix Ex like SToDEx?

This is a Windows API specific concept, which looks
only familiar for those familiar with the Windows API,
but nobody else. (I personally find it hugely inelegant,
not that this would matter much, especially if we mix
the unicode versions into the mix)

Also, in what way does this show where the "Ex"-ed
functions belong? To a 3rd party lib, to Windows,
maybe Harbour?

> I don't know any language that use its name as prefix for "core"  
> functions.

Remember that Harbour is meant to be a C5.2e compatible
compiler, so everything above that is an extension.

> In fact the HB_ is the first problem that my developers and
> contractors have with Harbour. Since they are not Clipper developers
> they can't guess if a function is HB_ or "clean". Look for example AT
> and HB_ATX it's hard for a non "seasoned" Harbour developer guess that
> they are related while AT and ATEX seem more clear to me.
>
> Another example is INet which is a pretty standard namespace for
> socket programming and I still use hbcompat.ch to "remove" HB_ from
> it.
>
> Morevover the only doc available on the web today is xhdn and there
> the functions have different names than Harbour ( some with HB_ some
> without ).
>
> To help the change there could be a hbprefix lib that "translate" the
> HB_ functions.

This is a documentation problem. It is a matter of contribution.

Do you think if we changed "hb_*" to nothing, or "hb_*" to "*Ex",
ppl would magically find everything without docs? If the point
is to be able to use xhb's doc, well, we have an xhb compatibility
layer to solve that (aaaand GOTO 10 :).

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Oct 10 16:38:28 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 10 12:38:39 2007
Subject: [Harbour] Extensions
In-Reply-To: <470D0801.9040100@dbtopas.lt>
References: <20071008150554.GA5054@localhost.localdomain>	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>	<20071008205146.GC6548@localhost.localdomain>	<470B7960.4000707@dbtopas.lt>	<470B8EC8.2010206@dbtopas.lt>	<4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>	<20071010111305.GA17387@localhost.localdomain>	<9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>	<20071010120032.GA17477@localhost.localdomain>	<1A3741C0-BE7B-41EC-91ED-F3C4F03666C1@syenar.hu>	<470CEBB9.2050002@dbtopas.lt>
	<1A196747-BA67-4E86-96A3-DA7B7711FE08@syenar.hu>
	<470D0801.9040100@dbtopas.lt>
Message-ID: <79AFCD91-18E4-44AA-BDA1-6A32C026B657@syenar.hu>

> your notice is very good: "is almost 100% for that". But let's look  
> at the reason. The users implemented STOD() because this name is  
> the most natural, and some languages do not support it.
> But this will be also in Harbour. We have HB_STOD() and all users  
> will implement
>   FUNC STOD(x)
>   RETURN HB_STOD(x)
> or do an independent STOD() implementation. So, why not to help  
> users by including STOD() into Harbour, and let users to delete  
> their own redundant code.

This is one function. It is of course possible
to revisit this rules for each function name one by
one: what are the chances that a function name would
be used by users (or other Clipper dialects), and what
are the chances that the behaviour will accidentally
match the implementation of Harbour. But because there
are no definitive answers for these questions, we will
eventually (pretty quickly I guess) do a mistake in
these judgements, definitely introduce name clashing
for users, and add functions which they already use
with the same or different behaviour, so they need
to find this out one by one (if the linker reports it
at all!), and resolve the clash (if possible at all,
think of binary libs, dlls). Not to mention the huge
amount of time spent of these arguments for each
function name.

How much easier is to not introduce any name clashing
in the first place, and let the user "migrate" (or
not migrate) to Harbour's extra functions.

And what do we lose? Well, we need to type "hb_"
a bit more. Was it so bad to type "nf_" before
NFLib functions, or "sx", "m6", "csy", "bli"
before other vendors libs, or typing _ret/_item/_par
before C API calls?

Namespace is a very important concept, if you
look at Java/C# they all have rules controlling
it, starting from the language level all towards
the final app level.

This is again a rule (like the goal of the project)
which has been around since 7-8 years. And I find
going back and argue again on such "overdebated"
rules quite a waste of time to be honest.

> Ok, sorry this is only my point of view. I'm also got tired of this  
> discussion.

No need to be sorry about your POV.

Brgds,
Viktor

From bedipritpal at hotmail.com  Wed Oct 10 20:52:43 2007
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Oct 10 16:52:47 2007
Subject: [Harbour] Re: Extensions (Pritpal Bedi)
In-Reply-To: <BAY0-MC3-F16pp8sBB700218e83@bay0-mc3-f16.bay0.hotmail.com>
References: <BAY0-MC3-F16pp8sBB700218e83@bay0-mc3-f16.bay0.hotmail.com>
Message-ID: <BAY132-W305BF2A86B3AAC65F487A0A7A70@phx.gbl>


Hello
 
I am following this thread closely and have comeup with following thought. Do not know if it contain any overhead in execution speed of Harbour or not. My viewpoint is to include everything in core at the same time keeping it excluded all the time. Paradox! But I have my point.
 
Why not we introduce a new set of SETs like :
 
Set( _SET_COMP_ADEL, XHB | XPP | CLIP | ANDWHATEVER )
Set( _SET_COMP_AINS, XHB ......... )
Set( _SET_COMP_ANYOTHERFUNCNAME, XHB ..... )
 
At the begining of the program execution a programmer will set these settings according to his language construct choice and functions act accordingly. This approach seams to me very handy instead of deining new functions emulating other compiler behavior.
 
I know that this is not true with every situation, but for lot of situations...
Just an idea.
Regards
Pritpal Bedi, INDIA-USA
_________________________________________________________________
Climb to the top of the charts!? Play Star Shuffle:? the word scramble challenge with star power.
http://club.live.com/star_shuffle.aspx?icid=starshuffle_wlmailtextlink_oct
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20071011/55ddd084/attachment.html
From lorenzo.fiorini at gmail.com  Thu Oct 11 03:32:54 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Oct 10 23:33:01 2007
Subject: [Harbour] Re: Extensions (Pritpal Bedi)
In-Reply-To: <BAY132-W305BF2A86B3AAC65F487A0A7A70@phx.gbl>
References: <BAY0-MC3-F16pp8sBB700218e83@bay0-mc3-f16.bay0.hotmail.com>
	<BAY132-W305BF2A86B3AAC65F487A0A7A70@phx.gbl>
Message-ID: <9257026e0710110032q615ba628sbc7cf364399bc7d4@mail.gmail.com>

On 10/11/07, Pritpal Bedi <bedipritpal@hotmail.com> wrote:

>  Why not we introduce a new set of SETs like :
>
>  Set( _SET_COMP_ADEL, XHB | XPP | CLIP | ANDWHATEVER )
>  Set( _SET_COMP_AINS, XHB ......... )
>  Set( _SET_COMP_ANYOTHERFUNCNAME, XHB ..... )

Sorry but I don't agree.

For me is Harbour is a modern, fast, multiplatform language not a
Clipper-xHarbour-xBase-VO-Clip-whatever CLONE.

It started from Clipper like VB started from GWBASIC or Delphi started
from Pascal but that's all.

If there are good ideas from other languages it should "INTEGRATE"
them without any reference to the "source".

Who knows which was the first language that implemented for each,
switch, hashes in its syntax?

How much of Java there is in C#?
But M$ didn't add a JAVA_ namespace or a SET( JAVA, ... ).

How much of C syntax there is in PHP?
But they don't call it a C clone.

Only my very personal point of view of course.

best regards,
Lorenzo
From rglab at przesiew.imid.med.pl  Thu Oct 11 09:12:35 2007
From: rglab at przesiew.imid.med.pl (Ryszard Glab)
Date: Thu Oct 11 05:00:31 2007
Subject: [Harbour] Extensions
In-Reply-To: <470CEBB9.2050002@dbtopas.lt>
References: <20071008150554.GA5054@localhost.localdomain>,
	<1A3741C0-BE7B-41EC-91ED-F3C4F03666C1@syenar.hu>,
	<470CEBB9.2050002@dbtopas.lt>
Message-ID: <470E3D63.6533.AFD30C@rglab.przesiew.imid.med.pl>

On 10 Oct 2007 at 18:11, Mindaugas Kavaliauskas wrote:

> etc. Personalization by compiler switches sounds nice - everyone can 
> choose a different personal environment for every module, but it's 
> difficult to implement (can we implement a different ADEL for every 
> module, will it work with macro...). If conservative approach will be 
> selected, public libraries and core code should use no extensions at all.

  Please notice that if compile time switches (-k) will be stored 
some way in generated pcode then internal functions and the whole VM 
can behave differently. For example, in function code we can use: 

#if ! defined( HB_PURE_HARBOUR_CODE )
if( HB_SUPPORTED( _extended_version_ ) )
{
  //use third parameter and shrink array if true
	if( HB_SUPPORTED( _xharbour_way ) )
	{
	}
	else if( HB_SUPPORTED( _xbpp_way_ )
...
}
else
#else
{
	//normal Clipper52 compatible way
}
#endif

where HB_SUPPORTED will check if some bit is enabled for given pcode 
module (or even given function if -k switch will be stored in symbols 
table). Of course we can discuss the range of modularization (if the 
above code should be:
HB_SUPPORTED( _adel_DEL_AND_SHRINK )
instead of
HB_SUPPORTED( _some_compiler_way )
but I belive that it is the way to go because it will allow to link 
modules and libraries compiled with different compatibility features 
and these modules will not interact.
  HB_PURE_HARBOUR_CODE will be there to eliminate a time execution 
overhead for these which don't want to use extensions at all.
  Notice also that, in fact, only xharbour compatibility is important 
because we are sharing code with xharbour only. We do not borrow code 
from flagship, xbase++ or clip.
  The harbour core code should use Harbour extensions only we don't 
need here Clipper compatibility.

Regards, Ryszard
From mbelgrano at deltain.it  Thu Oct 11 09:03:15 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Oct 11 05:03:38 2007
Subject: R: [Harbour] Extensions
In-Reply-To: <470CFDE2.7010708@interia.pl>
References: <20071008150554.GA5054@localhost.localdomain>	<9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>	<20071008205146.GC6548@localhost.localdomain>	<470B7960.4000707@dbtopas.lt><470B8EC8.2010206@dbtopas.lt>	<4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>	<20071010111305.GA17387@localhost.localdomain>	<9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>	<20071010120032.GA17477@localhost.localdomain><1A3741C0-BE7B-41EC-91ED-F3C4F03666C1@syenar.hu>
	<470CFDE2.7010708@interia.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809AA60@SRV02.deltain.net>

IMO Visual fox pro compatibility is the most interesting for having a more large userbase
Clipper for Dos Days and Visual Fox Pro for windows days are the more big userbase
How Will harbour increment visual fox pro compatibility?
Any fox pro user want share experiences?

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Marek Paliwoda
Inviato: mercoled? 10 ottobre 2007 18.29
A: Harbour Project Main Developer List.
Oggetto: Re: [Harbour] Extensions

Hi Viktor, Przemek, Mindaugas, Lorenzo

1. Making Harbour compatible with XHarbour, Xbase++, Clip, Flagship
    was _never_ the goal of Harbour. _Especially_ - making it compatible
    _at the same time_ with many compilers via different modules, using
    compiler switches and/or separated libraries.
    This is simply a _crazy_ idea to me and I can _hardly_ imagine real
    life needs for this. It's a nonsense IMO - until someone really shows
    me any practical example.
    Besides this, why not adding Visual FoxPro and/or CA Visual Object to
    the list ?

    Compatibility with _one_ other compiler _at the same time_ is however
    _quite usefull_ addition to Harbour. It doesn't matter if it is done
    thru compiler switches or separated libraries IMO.

From rglab at przesiew.imid.med.pl  Thu Oct 11 10:11:19 2007
From: rglab at przesiew.imid.med.pl (Ryszard Glab)
Date: Thu Oct 11 05:59:13 2007
Subject: [Harbour] Generic dialect concept
In-Reply-To: <0FB74203-FFBB-4534-BA9C-D11783AFACFE@syenar.hu>
References: <20071008150554.GA5054@localhost.localdomain>,
	<9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>,
	<0FB74203-FFBB-4534-BA9C-D11783AFACFE@syenar.hu>
Message-ID: <470E4B27.3112.E598EA@rglab.przesiew.imid.med.pl>

On 10 Oct 2007 at 13:55, Szak?ts Viktor wrote:

> What happens with contradictory features if I use both
> "-kXPP" and "-kXHB"?

  The compiler should refuse to compile with an error about switches 
that are excluding each other.

> Should we make this switch feature-granular, so that
> one should select compatibility features one by one?

  I belive that it is a way to go.

> for full XPP emulation one needs to use: -kcghdr
> for full XHB emulation one needs to use: -kirdjcs
> (where one -k option meaning one specific extended feature)

  Yes. Additionally we can add the proposed bellow -dialect switch 
that will be a synonym for some set of single compatibility switches.

> For example CLIP doesn't need EXIT in the SWITCH statement,
> is it possible to add a separate -k switch for this feature?

  Yes.

> This way it's pretty easy to define completely new
> dialects, so source code would become meaningless in
> seconds, so this doesn't look to coherent.

  The code will not be meaningless - it will be compatible with this 
dialect. If you compile the same code for other dialect then the 
compiler will generate the syntax error.

> Also, could the function overloading be done at compiler
> level, controlled by "-k" or similar switches?

  It can be done with function overloading (the compiler can generate 
the symbol table with the reference to xhb_adel/xpp_adel instead of 
adel function however it will not work for macro compiler. So we 
should not overload functions but store compile time switches in 
pcode and check them during execution of given function or extension.

> For compile time overloading, we'd pbly need to have a
> "/source/dialect" folder, and one subfolder for each dialect
> to hold the different flavours of functions (plus support logic,
> and maybe extra extensions):
> xhb_AINS(), xpp_AINS(), etc. All gathered into "dialect" libs
> (one lib for each dialect to avoid namespace problems for
> non-redirected extra functions)

  Yes - it is the same as my proposed 'features' subdirectory.

> Then, about macros: In order to keep compatibility for
> macros in a similar way, we'd probably need to add a possibility
> to set all the above switches for macros at runtime:
> 
> hb_macroDialect( "XPP" )

  We have already HB_SETMACRO() function that can be used here to set 
current fetures set - if it will be not called then compile time 
swithces (buried into pcode module which called the macro compiler) 
should be used.

> Does this make any sense? It seems a bit complicated.

  Please notice that this is why I have added -k switch few years 
ago. All extensions to Clipper52 should be disabled by default and 
should be enabled if someone requests them by the use of -k switch. 
Now we need some method to pass them to runtime modules. 

Regards, Ryszard
From harbour.01 at syenar.hu  Thu Oct 11 10:39:14 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 11 06:39:24 2007
Subject: [Harbour] Generic dialect concept
In-Reply-To: <470E4B27.3112.E598EA@rglab.przesiew.imid.med.pl>
References: <20071008150554.GA5054@localhost.localdomain>,
	<9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>,
	<0FB74203-FFBB-4534-BA9C-D11783AFACFE@syenar.hu>
	<470E4B27.3112.E598EA@rglab.przesiew.imid.med.pl>
Message-ID: <78205705-90E5-4EC1-B5F2-ED9B5E92CF4A@syenar.hu>

Thanks Ryszard.

We seem to agree on most points (if I understand you
correctly), except one; I feel it a bad idea to enable
these extensions one-by-one, since this will lead
to an _infinite number_ of "dialects" which is impossible
to be followed by any other Clipper compiler, and
will lead to a chaos on the Clipper language level,
not to mention that development/usability/testing
"costs" will be magnitudes larger, and will proportionally
be bigger as times goes by and more extra features
get added.

So, I think we should make this compatibility feature
"dialect" based for the following reasons:

1) Ease of use (even for non-Harbour core developers).
2) Cross-compatibility with the native compilers of the dialects.
3) To keep Clipper - as a language - a coherent and portable,
    standardizable, documentable, clean language.
4) Unambigous source code (source code + the name of the
    dialect would describe how a given source code behaves)
    Otherwise one given source code could have a
    potentially inifinit meaning.
5) Easier implementation, since we only have 4-5-6 different
    dialects to develop, maintain and test, as opposed to
    an infinite number of variations (and the complications
    to handle or detect contradictory features).
6) "dialects" would have one lib each, and nothing
    guarantees that some features would not clash on
    the symbol level. (say if two of them uses the same
    symbol, but with different functionality, none of
    them present in core Harbour/Clipper)
7) As someone told it's "crazy" to cherry pick different
    language rules one by one.

This way, the user only needs to decide which dialect
he/she wishes to use, set _one_ compile time switch,
add _one_ library, and optionally set the dialect
for macros too with _one_ function call.

I'd propose these "dialects" (basically the HB_COMPAT*
switches we have now):
- XHB
- XPP
- CLIP
- FLAGSHIP
- VFP
- C53 (maybe?)

What do you guys think?

Brgds,
Viktor

On 2007.10.11., at 16:11, Ryszard Glab wrote:

> On 10 Oct 2007 at 13:55, Szak?ts Viktor wrote:
>
>> What happens with contradictory features if I use both
>> "-kXPP" and "-kXHB"?
>
>   The compiler should refuse to compile with an error about switches
> that are excluding each other.
>
>> Should we make this switch feature-granular, so that
>> one should select compatibility features one by one?
>
>   I belive that it is a way to go.
>
>> for full XPP emulation one needs to use: -kcghdr
>> for full XHB emulation one needs to use: -kirdjcs
>> (where one -k option meaning one specific extended feature)
>
>   Yes. Additionally we can add the proposed bellow -dialect switch
> that will be a synonym for some set of single compatibility switches.
>
>> For example CLIP doesn't need EXIT in the SWITCH statement,
>> is it possible to add a separate -k switch for this feature?
>
>   Yes.
>
>> This way it's pretty easy to define completely new
>> dialects, so source code would become meaningless in
>> seconds, so this doesn't look to coherent.
>
>   The code will not be meaningless - it will be compatible with this
> dialect. If you compile the same code for other dialect then the
> compiler will generate the syntax error.
>
>> Also, could the function overloading be done at compiler
>> level, controlled by "-k" or similar switches?
>
>   It can be done with function overloading (the compiler can generate
> the symbol table with the reference to xhb_adel/xpp_adel instead of
> adel function however it will not work for macro compiler. So we
> should not overload functions but store compile time switches in
> pcode and check them during execution of given function or extension.
>
>> For compile time overloading, we'd pbly need to have a
>> "/source/dialect" folder, and one subfolder for each dialect
>> to hold the different flavours of functions (plus support logic,
>> and maybe extra extensions):
>> xhb_AINS(), xpp_AINS(), etc. All gathered into "dialect" libs
>> (one lib for each dialect to avoid namespace problems for
>> non-redirected extra functions)
>
>   Yes - it is the same as my proposed 'features' subdirectory.
>
>> Then, about macros: In order to keep compatibility for
>> macros in a similar way, we'd probably need to add a possibility
>> to set all the above switches for macros at runtime:
>>
>> hb_macroDialect( "XPP" )
>
>   We have already HB_SETMACRO() function that can be used here to set
> current fetures set - if it will be not called then compile time
> swithces (buried into pcode module which called the macro compiler)
> should be used.
>
>> Does this make any sense? It seems a bit complicated.
>
>   Please notice that this is why I have added -k switch few years
> ago. All extensions to Clipper52 should be disabled by default and
> should be enabled if someone requests them by the use of -k switch.
> Now we need some method to pass them to runtime modules.
>
> Regards, Ryszard
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From hbco2 at sbcglobal.net  Thu Oct 11 12:38:42 2007
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Thu Oct 11 08:39:07 2007
Subject: [Harbour] Generic dialect concept
References: <20071008150554.GA5054@localhost.localdomain>,
	<9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>,
	<0FB74203-FFBB-4534-BA9C-D11783AFACFE@syenar.hu>
	<470E4B27.3112.E598EA@rglab.przesiew.imid.med.pl>
Message-ID: <001d01c80c25$37abfa40$0303a8c0@hbco>

Are you all tired of working on this project?  IHMO this use of switches is
the best way to fragment and kill Harbour.  Clipper had every opportunity to
emulate Pascal, C, Basic et. all., but instead established a clear and
simple language.  Clipper never intended to emulate FoxBASE and any number
of other 'bases.  Why is this even considered in Harbour?

If you need to emulate other languages, then forks should be established to
accommodate them.

Don't turn Harbour into a "write only" language.  Harbour should have a
clearly identified behavior.  Clipper does.

Switches are simply a variation on "jump to " instructions and were never
intended to characterize the instruction base.  Ever.  Clipper never
supported "jump to ."

Bill


----- Original Message ----- 
From: "Ryszard Glab" <rglab@przesiew.imid.med.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Thursday, October 11, 2007 7:11 AM
Subject: Re: [Harbour] Generic dialect concept


On 10 Oct 2007 at 13:55, Szak?ts Viktor wrote:

> What happens with contradictory features if I use both
> "-kXPP" and "-kXHB"?

  The compiler should refuse to compile with an error about switches
that are excluding each other.

> Should we make this switch feature-granular, so that
> one should select compatibility features one by one?

  I belive that it is a way to go.

> for full XPP emulation one needs to use: -kcghdr
> for full XHB emulation one needs to use: -kirdjcs
> (where one -k option meaning one specific extended feature)

  Yes. Additionally we can add the proposed bellow -dialect switch
that will be a synonym for some set of single compatibility switches.

> For example CLIP doesn't need EXIT in the SWITCH statement,
> is it possible to add a separate -k switch for this feature?

  Yes.

> This way it's pretty easy to define completely new
> dialects, so source code would become meaningless in
> seconds, so this doesn't look to coherent.

  The code will not be meaningless - it will be compatible with this
dialect. If you compile the same code for other dialect then the
compiler will generate the syntax error.

> Also, could the function overloading be done at compiler
> level, controlled by "-k" or similar switches?

  It can be done with function overloading (the compiler can generate
the symbol table with the reference to xhb_adel/xpp_adel instead of
adel function however it will not work for macro compiler. So we
should not overload functions but store compile time switches in
pcode and check them during execution of given function or extension.

> For compile time overloading, we'd pbly need to have a
> "/source/dialect" folder, and one subfolder for each dialect
> to hold the different flavours of functions (plus support logic,
> and maybe extra extensions):
> xhb_AINS(), xpp_AINS(), etc. All gathered into "dialect" libs
> (one lib for each dialect to avoid namespace problems for
> non-redirected extra functions)

  Yes - it is the same as my proposed 'features' subdirectory.

> Then, about macros: In order to keep compatibility for
> macros in a similar way, we'd probably need to add a possibility
> to set all the above switches for macros at runtime:
>
> hb_macroDialect( "XPP" )

  We have already HB_SETMACRO() function that can be used here to set
current fetures set - if it will be not called then compile time
swithces (buried into pcode module which called the macro compiler)
should be used.

> Does this make any sense? It seems a bit complicated.

  Please notice that this is why I have added -k switch few years
ago. All extensions to Clipper52 should be disabled by default and
should be enabled if someone requests them by the use of -k switch.
Now we need some method to pass them to runtime modules.

Regards, Ryszard
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Thu Oct 11 16:04:03 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 11 12:04:10 2007
Subject: [Harbour] Generic dialect concept
In-Reply-To: <001d01c80c25$37abfa40$0303a8c0@hbco>
References: <0FB74203-FFBB-4534-BA9C-D11783AFACFE@syenar.hu>
	<470E4B27.3112.E598EA@rglab.przesiew.imid.med.pl>
	<001d01c80c25$37abfa40$0303a8c0@hbco>
Message-ID: <20071011200403.GA4079@localhost.localdomain>

On Thu, 11 Oct 2007, Bill Smith wrote:
> Are you all tired of working on this project?  IHMO this use of switches is
> the best way to fragment and kill Harbour.  Clipper had every opportunity to
> emulate Pascal, C, Basic et. all., but instead established a clear and
> simple language.  Clipper never intended to emulate FoxBASE and any number
> of other 'bases.  Why is this even considered in Harbour?

Clipper is classic example of evaluation with bad backward
compatibility. The difference between S87 and CL52 are much
more fundamental and can much more problems then between
C52 and Harbour.


But if you are serious then why we have support for FiveWin OOP
syntax in Harbour?
FW is not part of Clipper. Let's start to clean Harbour from
removing FW[H] like extensions, Class(y) and maybe whole Windows
support. Clipper is not Windows compiler and I do not use
MS-Windows at all so for me all windows only code is redundant
extensions which make my life harder because I have to update it.
I can fully agree with you if we start from removing any support
for MS-Windows from Harbour.
MS-Windows support is the first step to kill Harbour.
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Isn't it?
And the most important thing. Never, never and once again never
we should start discussion about .NET support or sth similar
because most of our extensions is 1% of modifications which
are necessary for .NET real support.


Support for different xbase dialects is in 90% side effects of extensions
necessary to create applications for actually used operating systems and
environments, which may exchange data and/or code with other programs
written in different languages, working on different computers controlled
by different operating systems, etc. Many things were not possible 20 years
ago and now they are. You may not like it but some of them are necessary for
normal applications used today. Each of us needs different extended
functionality and I do not agree that Windows or FWH users will tell
me what should be included in Harbour code because they used to use
some extensions so do not even call them extensions but the rest are
"killing project features". F.e. for many years *nix users can use only
FlagShip as xbase compiler. For us Harbour is FlagShip successor and it
was the only one reason I decided to invest my time in [x]Harbour and
it was my main motivation in last 5 years. So far I haven't tried to
force any FS only ideas or reduce MS-Win functionality. I even created
quite big portion of MS-Windows only code.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct 11 17:19:21 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 11 13:19:33 2007
Subject: [Harbour] STRONG TYPED VARIABLES
Message-ID: <20071011211921.GA4812@localhost.localdomain>

Hi All,

I'd like to chose syntax for strong typing support. I do not promise
that I'll begin to implement anything in the nearest future but maybe
in some weekend I'll create some code for strong type support in Harbour
if I will know what is the expected and approved by other developers goal.
After looking at current code I can only say that any code for strong
type support I will create from scratch in absolutely different way.
I analyzed current grammar rules for ST syntax and I do not know what
is local Harbour extensions and what was taken from other languages.
Also I do not know if some syntax conditions are side effect of
implementation or intentional design decision so first I would like
to define expected behavior and collect informations about other
xbase compatible languages.

I'll begin from description of existing rules.

===========================================================================

/* 1. Supported types, please note that AS CLASS is special type which
      means object of given class, in literal form it should be:
      AS <className> OBJECT */

   AS <type>

   <type: USUAL | ANYTYPE,
          CHARACTER | STRING,
          NUMERIC,
          DATE,
          LOGICAL,
          CODEBLOCK,
          ARRAY,
          OBJECT,
          CLASS <className> >

/* additionally it's possible to define type of first level array
   elements by: */

   AS ARRAY OF <type>

/* The following types are missing and have to be added: */

   AS HASH
   AS SYMBOL
   AS POINTER


/* 2. Separate commands for parameters declaration */

/* declare function */
   DECLARE <funcName>( [<params,...>] ) [AS <type>]

/* declare class with all methods and variables */
   DECLARE <className> [<dataName> [AS <type>]]
                       [<methodName>( [<params,...>]) [AS <type>]]

/* begin class definition */
   _HB_CLASS <className>

/* add method to current class definition */
   _HB_MEMBER [<methodName>( [<params,...>]) [AS <type>]]

/* add variable to current class definition */
   _HB_MEMBER { [AS <type>] [<dataName> [AS <type>]] }

/* parameters declaration, please note that OPTIONAL can be used only for
   trailing parameters */
   <params> <= <stdParam,...> |
               [OPTIONAL <stdParam>] |
               <stdParam,...>, [OPTIONAL <stdParam>]

/* single parameter declaration, please note that function references
   does not have own AS SYMBOL type but are defined explicitly and
   <anyExpressions,...> can contain any valid expressions which are
   ignored but first fully preprocessed by grammar parser what may
   cause some side effects due to type of grammar rules we are using */
   <stdParam> <= <!parName!> [AS <type>]] |
                 @<!parName!> [AS <type>]] |
                 @<!funcName!>( [<anyExpressions,...>] )


/* 3. type declaration in standard statements */

/* declare type of function/procedure local parameters and type of
   function returned value */
   FUNCTION <funcName>( [ <paramName1> [AS <type>]
                          [, <paramNameN> [AS <type>]] ] ) [AS <type>]

/* declare type of codeblock parameters */
   { | <paramName1> [AS <type>] [, <paramNameN> [AS <type>]] | ... }

/* declare type in PARAMETER or MEMVAR statement */
   PARAMETERS <paramName1> [AS <type>] [, <paramNameN> [AS <type>]]
   MEMVAR <varName1> [AS <type>] [, <varNameN> [AS <type>]]

/* declare type of FIELDs */
   FIELD <fieldName1> [AS <type>] [, <fieldNameN> [AS <type>]] [IN <aliasName>]

/* declare type of LOCAL, STATIC, PUBLIC and PRIVATE variables */
   LOCAL | STATIC | PUBLIC | PRIVATE
                                 <varName1> [AS <type>] [ := <expr1> ]
                                 [, <varNameN> [AS <type>] [ := <exprN> ] ]
/* for array declaration it's also possible to declare type of array items,
   f.e.: */
   LOCAL <varName>[<dimList,] [AS ARRAY OF <type>]

/* In PUBLIC and PRIVATE declaration AS <type> can be used also in
   macro variable declaration but I do not see any sense in such
   extensions because we do not know the name of declared variables
   so it does not give us anything in later code processing, f.e.; */
   PRIVATE &<varName> AS <type> [ := <expr> ]


/* 4. type casting in normal code - used to pacify warnings */
/* casting of variables */
   [<var> := ] <var2> AS <type>
/* casting of function results */
   [<var> := ] <funcName>( [<params,...>] ) AS <type>
/* casting of object variables */
   [<var> := ] <obj>:<dataName> AS <type>
/* casting of object method results */
   [<var> := ] <obj>:<methodName>( [<params,...>] ) AS <type>
/* casting of parenthesis expressions list */
   [<var> := ] ( <expressions,...> ) AS <type>

/* Here is small example, please note that I have to use all casted
   expressions in parenthesis due to fatal syntax which does not
   respect Clipper PP rules */
      proc main()
      local x, o:errorNew()
         ? ( qself() AS USUAL )
         ? ( date() AS DATE )
         ? ( o:canDefault AS LOGICAL )
         ? ( o:description() AS CHARACTER )
         ? ( x AS USUAL )
         ? ( (1) AS NUMERIC )
      return

5. Compiler time warnings.
This is sth what I do not fully understand. I read the description
in doc/en/strotype.txt but I have serious doubts what the "Adaptive Type
Checking" means. For sure it cannot work as described because it's not
possible to detect at compile time the wrong line in code like:
   func p(l1,l2)
      local x
      if l1
         x:=1
      else
         x:="A"
      endif
      if l2
         return x+2
      else
         return x+"B"
      endif

and this is trivial example but what to do with more complicated
using loops, f.e.:

   while l1
      x := x + 2
      l1 := x < 4
      x := "A"
   enddo

I will need much more precise definition for expected warnings then
"Adaptive Type Checking" which cannot work well by definition or I'm
missing some important conditions.


===========================================================================

The above describes already defined rules but it does not mean that we
have to respect them. We can but our main goal should be creating syntax
which will cover the whole problem of strong typing and will also give
the compiler informations usable in optimizations. As you can see the
above covers only some part of problem for compiler warnings and does
not touch things like automatic variable initialization, parameters casting
or conversion, compile time optimization, optional runtime type checking,
etc.

As alternative I'll present below short description of FlagShip strong
typed variables.

FlagShip strong typed variables
===============================
In FlagShip typed variables can be used only for LOCALs, STATICs and GLOBALs.
GLOBALs and STATICs can use ony C-types. LOCALs can use C-types, usual-types
and object-types. There is no type casting. For declaration PROTOTYPE command
is used. It is possible to set warnings level at compile time to:
   -w2   Report untyped variables as warnings
   -w3   Report unknown UDF return values and mismatched parameters
   -w4   Report unresolvable CLASS references and late binding

C-typed variables are used for compile time optimization.
For usual-typed variables special RT code is added which
can check type also at runtime in devel mode.
Object-typed variables are used for compile time optimization
of OOP code - early binding is used instead of late binding,
it is much more important for FS then for us because late bindings
are very slow in FS.


PROTOTYPE declaration
---------------------
Syntax 1:
   PROTOTYPE [STATIC] CLASS <ClassName> [INHERIT <SuperClass>] ;
         EXPORT|HIDDEN|PROTECT [INSTANCE] <Name> [AS <type>]
         INSTANCE <Name> [AS <type>]

Syntax 2:
   PROTOTYPE ACCESS [METHOD] <methName> [ () ] CLASS <className> [AS <type>]

   PROTOTYPE ASSIGN [METHOD] <methName> (<par1>) CLASS <className> [AS <type>]

   PROTOTYPE [PROTECT] METHOD <methName> [([<paramList,...>])] ;
         CLASS <className> [AS <type>]

Syntax 3:
   PROTOTYPE FUNCTION <udfName> [([<paramList,...>])] [AS <type>]

parameters in <paramList,...> can be specified as:

   - <parName>          : untyped
   - <parName AS type>  : typed parameter
   - [<parName>] or [<parName AS type>] : square brackets [] are used
                                          to mark optional parameters
   - [...] : any number of optional, untyped parameters (can be used
             in PROTOTYPE statement only
   - <@parName> or <@parName AS type> or [<@parName>] : automatical
                (implicit) parameter/argument passing-by-reference,
                instead of the default passing-by-value in all function
                call used after declaration

The same parameter syntax may also be used in the FUNCTION / PROCEDURE
statements and in such case FS automatically creates function PROTOTYPE
but if UDF/UDP parameters and return types have been declared with
PROTOTYPE then it is not necessary to repeat their declaration in
FUNCTION/PROCEDURE statement and the one from PROTOTYPE is used.

Due to PP rules we cannot use square brackets [] exactly like in FS
to mark optional parameters because in such context Clipper compatible
PP will have to convert them to strings before compiler will be able
to analyze them. Of course we can add string decoding in lexer but
it will not be elegant solution. If we decide to keep AS <type> syntax
then we can chose AS [<type>] to mark optional parameters because
in such context [<type>] will not be converted by PP to string: "<type>"
Please also note that AS [<type>] is also possible solution for
reuested <type> OR NIL declaration in CLASS definition, f.e.:
   VAR v1 AS NUMERIC    // accept numeric values only
   VAR v2 AS [NUMERIC]  // accept numeric values or NIL


GLOBAL declaration (there is not weakly typed version)
------------------------------------------------------
   Syntax 1:
      GLOBAL <tvarList> [:= <constN>] AS <C-type>
   Syntax 2:
      GLOBAL_<C-type> <tvarList> [:= <expN>]

GLOBAL extern declaration (there is not weakly typed version)
-------------------------------------------------------------
   Syntax 1:
      GLOBAL_EXTERN <tvarList> AS <C-type>
   Syntax 2:
      GLOBAL_EXTERN_<C-type> <tvarList>


Typed STATIC declaration
------------------------
   Syntax 1:
      STATIC <tvarList> [:= <expN>] AS <C-type>
   Syntax 2:
      STATIC_<C-type> <tvarList> [:= <expN>]


Typed LOCAL declaration
-----------------------
   Syntax 1:
      LOCAL ... AS <type>
   Syntax 2:
      LOCAL_<C-type> <tvarList> [:= <expN>]


<type> can be <C-type>, <usual type>, <object type>
<C-type>: BYTE, SHORT, WORD, INT, LONG, DWORD, FLOAT, DOUBLE //and synonyms
<usual type>: NUMERIC, INTVAR, LOGICAL, DATE, CHARACTER, CODEBLOCK,
              ARRAY, OBJECT, USUAL //and synonyms or FS specific
<object type>: GET, TBROWSE, TBCOLUMN, ERROR, DATASERVER, DBSERVER,
               <UserClass>

If the initializer (:= <exp>) is not given, the TYPED C-like
variables will be initialized with zero, all others to NIL or
the empty type, respectively.

C-like typed variables will always be passed to a standard
function, UDF and UDP by value, regardless of the calling
convention used (@ prefix or using the DO...WITH procedure
call). The argument is automatically converted to a usual
NUMERIC (or INTVAR) variable and received by the UDF as such.
The same conversion occurs when assigning them to an array
element. (From my experience it is not well implemented and
it is quite easy to cause GPF when you begin to force such
conversions, at least in FS4.4 I was using)
The C-typed variables can be access directly by C code
included in .prg file between #Cinline / #endCinline directives.

The C-like types are available in FS only. CA/VO uses the same syntax (1).
To remain compatibility to Clipper 5, use syntax 2 and #defines like:
   #ifndef FlagShip
      #define LOCAL_BYTE   LOCAL
      #define LOCAL_LONG   LOCAL
      #define LOCAL_DOUBLE LOCAL
   #endif
The usual types and object types are compatible to CA/VO (except IntVar),
but not available in Clipper. For Clipper 5, you may specify e.g.
   #ifndef FlagShip
      #command LOCAL <xx,...> AS <yy> => LOCAL <xx>
   #endif



Please note that the syntax used for variable declaration is different
then the one used by Harbour. In FS (and as FS doc suggests in VO too)
AS <type> can be used only at the and of declaration and all variables
will have the same type. It is not possible to mix different types in
one declaration. Declaration also forces initialization. Here is small
test code:

   proc main()
   local n1, n2 as numeric    /* 0 */
   local d1, d2 as date       /* ctod("") */
   local l1, l2 as logical    /* .F. */
   local c1, c2 as character  /* "" */
   local a1, a2 as array      /* {} */
   local b1, b2 as codeblock  /* {||NIL} */
   local o1, o2 as object     /* special object, gen RTE for any messages */
   ? valtype(n1), n1, valtype(n2), n2
   ? valtype(d1), d1, valtype(d2), d2
   ? valtype(l1), l1, valtype(l2), l2
   ? valtype(c1), c1, valtype(c2), c2
   ? valtype(a1), a1, valtype(a2), a2
   ? valtype(b1), b1, valtype(b2), b2
   ? valtype(o1), o1, valtype(o2), o2
   return

and FS results:

   N          0 N          0
   D   /  /   D   /  /
   L .F. L .F.
   C  C
   A ARRAY A ARRAY
   B CODEBLOCK B CODEBLOCK
   O OBJECT O OBJECT

I would like to see results from VO, XBASE++, V-DBASE, VFP and other
xbase compilers supporting strong typed variables.
If some other xbase compilers use different syntax for strong typed
variables then I would like to hear about them. The AS <type> is not
the best choice for native Clipper code but I will not reinvent the
wheel if this is standard in xbase world.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Oct 11 17:42:41 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 11 13:42:51 2007
Subject: [Harbour] Generic dialect concept
In-Reply-To: <20071011200403.GA4079@localhost.localdomain>
References: <0FB74203-FFBB-4534-BA9C-D11783AFACFE@syenar.hu>
	<470E4B27.3112.E598EA@rglab.przesiew.imid.med.pl>
	<001d01c80c25$37abfa40$0303a8c0@hbco>
	<20071011200403.GA4079@localhost.localdomain>
Message-ID: <EC3EE616-1CB6-47A2-9DD8-1AE40E3DCDD4@syenar.hu>

Hi Przemek,

On 2007.10.11., at 22:04, Przemyslaw Czerpak wrote:

> On Thu, 11 Oct 2007, Bill Smith wrote:
>> Are you all tired of working on this project?  IHMO this use of  
>> switches is
>> the best way to fragment and kill Harbour.  Clipper had every  
>> opportunity to
>> emulate Pascal, C, Basic et. all., but instead established a clear  
>> and
>> simple language.  Clipper never intended to emulate FoxBASE and  
>> any number
>> of other 'bases.  Why is this even considered in Harbour?
>
> Clipper is classic example of evaluation with bad backward
> compatibility. The difference between S87 and CL52 are much
> more fundamental and can much more problems then between
> C52 and Harbour.
>
>
> But if you are serious then why we have support for FiveWin OOP
> syntax in Harbour?
> FW is not part of Clipper. Let's start to clean Harbour from
> removing FW[H] like extensions, Class(y) and maybe whole Windows
> support. Clipper is not Windows compiler and I do not use
> MS-Windows at all so for me all windows only code is redundant
> extensions which make my life harder because I have to update it.
> I can fully agree with you if we start from removing any support
> for MS-Windows from Harbour.
> MS-Windows support is the first step to kill Harbour.
> ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> Isn't it?

The goal has always been to create a _multiplatform_ C5.2e
compatible compiler.

So, every Windows-only extension is a non-goal, and to be avoided
(if not forbidden). I'm not exactly sure which feature are thinking
of though, right I can't think of too many features which are
Windows-only in core.

As for OOP syntax, C5.2 didn't have any, yet it's an _essential_
feature, and currently more than one dialect is supported at the
same time to a proper extent, so I don't feel we should do anything
with it. So in a sense, Harbour has it as a native extension with
almost full support for 4 OOP dialect. No problem with that, I
haven't seen any complaints either. It's proper.

I fully agree with Bill though (and I think this was the point
he was making), that allowing a compiler to support all kinds of
different optional features is the best way to essentially kill
the language, because by using modifier switches you can basically
create your own language with your own desired behaviours, effectively
creating hundreds of different dialect.

Creating hundreds of dialects of a language means exactly that:
Killing the language.

(== this line: "QOut( c[n] $ a )" could mean at least ten
different things, depending on the circumstances.)

A language is a language when you can __unambigously__ express
your thoughts/logic with it. Just like with human-languages.

> And the most important thing. Never, never and once again never
> we should start discussion about .NET support or sth similar
> because most of our extensions is 1% of modifications which
> are necessary for .NET real support.

I'm not sure what do you have in mind.

If you mean the .NET output (CLI support), I'd delete it right away,
along with the Java output, since none of them ever worked.

> Support for different xbase dialects is in 90% side effects of  
> extensions
> necessary to create applications for actually used operating  
> systems and
> environments, which may exchange data and/or code with other programs
> written in different languages, working on different computers  
> controlled
> by different operating systems, etc. Many things were not possible  
> 20 years

This is not true.

There is only a minimal set of cases when Clipper RTL functions
had to be extended to accomodate for other environments, but
I think all of these are covered properly now. (filename
case-sensitivity, long filenames, UI output, etc)

The rest of special OS interfaces and OS support can be solved
using separate libraries (contribs). But you _never_ have to
change $, [], SWITCH, AINS(), TRY/END behaviour to effectively
create applications under _all_ existing enviromnents.

> ago and now they are. You may not like it but some of them are  
> necessary for
> normal applications used today. Each of us needs different extended
> functionality and I do not agree that Windows or FWH users will tell
> me what should be included in Harbour code because they used to use
> some extensions so do not even call them extensions but the rest are
> "killing project features". F.e. for many years *nix users can use  
> only
> FlagShip as xbase compiler. For us Harbour is FlagShip successor  
> and it
> was the only one reason I decided to invest my time in [x]Harbour and
> it was my main motivation in last 5 years. So far I haven't tried to
> force any FS only ideas or reduce MS-Win functionality. I even created
> quite big portion of MS-Windows only code.

This is why I proposed the "dialect" idea. Existing dialects are a
matter of fact, they already exist, so what we can do, is to offer
a choice for the Harbour users to select their preferred Clipper
dialect (as a compiler time/lib/macro-time option) so that they
can get a certain level of support for extra features present in
that dialect. FlagShip is one dialect.

I'm strongly against creating _any new_ dialects, besides the one
and only _Harbour core dialect_, which we already have. We can
continue to create a strong core dialect, as we did in the past.
The core can incorporate any strong features, while maintaining
our original compatibility and multiplatform goals (after discussing
them of course).

Besides I don't know where did you get the notion that Windows
users want to force anything, especially against Unix features,
but if you have some, please be specific. I personally feel Unix/Linux
just as important as Windows (just to name two). (I for one have
already proposed to remove the rogue Windows support from IsPrinter(),
especially since it doesn't even work).

...my English is starting to fail on me, but I hope you get what
I had in mind.

Brgds,
Viktor



From hbco2 at sbcglobal.net  Thu Oct 11 18:06:57 2007
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Thu Oct 11 14:07:05 2007
Subject: [Harbour] Generic dialect concept
References: <0FB74203-FFBB-4534-BA9C-D11783AFACFE@syenar.hu><470E4B27.3112.E598EA@rglab.przesiew.imid.med.pl><001d01c80c25$37abfa40$0303a8c0@hbco>
	<20071011200403.GA4079@localhost.localdomain>
Message-ID: <002d01c80c53$0e7f45e0$0303a8c0@hbco>

----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Thursday, October 11, 2007 1:04 PM
Subject: Re: [Harbour] Generic dialect concept


> On Thu, 11 Oct 2007, Bill Smith wrote:
> > Are you all tired of working on this project?  IHMO this use of switches
is
> > the best way to fragment and kill Harbour.  Clipper had every
opportunity to
> > emulate Pascal, C, Basic et. all., but instead established a clear and
> > simple language.  Clipper never intended to emulate FoxBASE and any
number
> > of other 'bases.  Why is this even considered in Harbour?
>
> Clipper is classic example of evaluation with bad backward
> compatibility. The difference between S87 and CL52 are much
> more fundamental and can much more problems then between
> C52 and Harbour.
>
>
> But if you are serious then why we have support for FiveWin OOP
> syntax in Harbour?
> FW is not part of Clipper. Let's start to clean Harbour from
> removing FW[H] like extensions, Class(y) and maybe whole Windows
> support. Clipper is not Windows compiler and I do not use
> MS-Windows at all so for me all windows only code is redundant
> extensions which make my life harder because I have to update it.
> I can fully agree with you if we start from removing any support
> for MS-Windows from Harbour.
> MS-Windows support is the first step to kill Harbour.
> ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> Isn't it?
> And the most important thing. Never, never and once again never
> we should start discussion about .NET support or sth similar
> because most of our extensions is 1% of modifications which
> are necessary for .NET real support.
>
>
> Support for different xbase dialects is in 90% side effects of extensions
> necessary to create applications for actually used operating systems and
> environments, which may exchange data and/or code with other programs
> written in different languages, working on different computers controlled
> by different operating systems, etc. Many things were not possible 20
years
> ago and now they are. You may not like it but some of them are necessary
for
> normal applications used today. Each of us needs different extended
> functionality and I do not agree that Windows or FWH users will tell
> me what should be included in Harbour code because they used to use
> some extensions so do not even call them extensions but the rest are
> "killing project features". F.e. for many years *nix users can use only
> FlagShip as xbase compiler. For us Harbour is FlagShip successor and it
> was the only one reason I decided to invest my time in [x]Harbour and
> it was my main motivation in last 5 years. So far I haven't tried to
> force any FS only ideas or reduce MS-Win functionality. I even created
> quite big portion of MS-Windows only code.
>
> best regards,
> Przemek

Hi Przemek,

First of all, I don't use FWH or Windows and don't object to extensions for
either, or extensions for FlagShip.  In fact, I find them appealing.  But
what do you suggest one does five years down the road when attempting to
compile an undocumented Harbour application?  Ask the programmer to add the
compile switches to the title page?  Without a detailed study of both the
source code and also detailed knowledge of the effects of the compiler
switches, it seems that it could become very difficult to compile Harbour
source.

I'm not trying to force any FS or any particular method on anyone, and have
repeatedly complimented your astounding work in developing Harbour.  My
objection is not with an extension, but with the notion that complexity is a
solution to compatibility, to the degree that the compiler needs to be
configured in order for it to function.  It is one thing to place flags to
accommodate different operating systems or processors, but, from my view as
a user, quite another to set flags to affect the personality of the
language.

Bill

From harbour.01 at syenar.hu  Thu Oct 11 18:27:24 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 11 14:27:33 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <20071011211921.GA4812@localhost.localdomain>
References: <20071011211921.GA4812@localhost.localdomain>
Message-ID: <3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>

Hi Przemek,

I think we originally wanted to have something close
to the VO syntax. I don't know VO, but I can dig up some
docs to get this info.

(if someone has the VO .hlp file, please shout).

We might also support both VO and FlagShip, if they are
not contradictory.

On 2007.10.11., at 23:19, Przemyslaw Czerpak wrote:

> ====================================================================== 
> =====
>
> /* 1. Supported types, please note that AS CLASS is special type which
>       means object of given class, in literal form it should be:
>       AS <className> OBJECT */
>
>    AS <type>
>
>    <type: USUAL | ANYTYPE,
>           CHARACTER | STRING,

We need to check if we absolutely have to support synomyms here.
I'd vote for one option each: USUAL and CHARACTER (to be in sync
with ISCHARACTER())

> /* parameters declaration, please note that OPTIONAL can be used  
> only for
>    trailing parameters */
>    <params> <= <stdParam,...> |
>                [OPTIONAL <stdParam>] |
>                <stdParam,...>, [OPTIONAL <stdParam>]

Should we also cover REFERENCE here?

> /* declare type of function/procedure local parameters and type of
>    function returned value */
>    FUNCTION <funcName>( [ <paramName1> [AS <type>]
>                           [, <paramNameN> [AS <type>]] ] ) [AS <type>]

Also for PROCEDUREs. And how about OPTIONAL and REFERENCE, here too?

> /* declare type of codeblock parameters */
>    { | <paramName1> [AS <type>] [, <paramNameN> [AS <type>]] | ... }

Q: How to define the return value of a block?

> /* declare type in PARAMETER or MEMVAR statement */
>    PARAMETERS <paramName1> [AS <type>] [, <paramNameN> [AS <type>]]

Maybe OPTIONAL and REFERENCE, here too?

> /* Here is small example, please note that I have to use all casted
>    expressions in parenthesis due to fatal syntax which does not
>    respect Clipper PP rules */
>       proc main()
>       local x, o:errorNew()
>          ? ( qself() AS USUAL )
>          ? ( date() AS DATE )
>          ? ( o:canDefault AS LOGICAL )
>          ? ( o:description() AS CHARACTER )
>          ? ( x AS USUAL )
>          ? ( (1) AS NUMERIC )
>       return

I'm not sure if the PP problem is with casting only,
but it is so, maybe we could use some helper functions:
FUNCTION hb_AsUsual( xVar AS USUAL ) AS USUAL
FUNCTION hb_AsDate( xVar AS USUAL ) AS DATE
...

> 5. Compiler time warnings.
> This is sth what I do not fully understand. I read the description
> in doc/en/strotype.txt but I have serious doubts what the "Adaptive  
> Type
> Checking" means. For sure it cannot work as described because it's not
> possible to detect at compile time the wrong line in code like:
>    func p(l1,l2)
>       local x
>       if l1
>          x:=1
>       else
>          x:="A"
>       endif
>       if l2
>          return x+2
>       else
>          return x+"B"
>       endif
> and this is trivial example but what to do with more complicated
> using loops, f.e.:
>
>    while l1
>       x := x + 2
>       l1 := x < 4
>       x := "A"
>    enddo
>
> I will need much more precise definition for expected warnings then
> "Adaptive Type Checking" which cannot work well by definition or I'm
> missing some important conditions.

This never worked properly, so you can simply drop it IMO.

> ====================================================================== 
> =====
>
> FlagShip strong typed variables
> ===============================
> In FlagShip typed variables can be used only for LOCALs, STATICs  
> and GLOBALs.
> GLOBALs and STATICs can use ony C-types. LOCALs can use C-types,  
> usual-types

I can see a point in not giving strong typing support
for PRIVATE/PUBLIC at all. If this helps, we can also
go this way.

> and object-types. There is no type casting. For declaration  
> PROTOTYPE command
> is used. It is possible to set warnings level at compile time to:
>    -w2   Report untyped variables as warnings
>    -w3   Report unknown UDF return values and mismatched parameters
>    -w4   Report unresolvable CLASS references and late binding
>
> C-typed variables are used for compile time optimization.
> For usual-typed variables special RT code is added which
> can check type also at runtime in devel mode.

C-typed stuff lead a bit far at this point, doesn't it?

> Object-typed variables are used for compile time optimization
> of OOP code - early binding is used instead of late binding,
> it is much more important for FS then for us because late bindings
> are very slow in FS.
>
>
> PROTOTYPE declaration
> ---------------------
> Syntax 1:
>    PROTOTYPE [STATIC] CLASS <ClassName> [INHERIT <SuperClass>] ;
>          EXPORT|HIDDEN|PROTECT [INSTANCE] <Name> [AS <type>]
>          INSTANCE <Name> [AS <type>]
>
> Syntax 2:
>    PROTOTYPE ACCESS [METHOD] <methName> [ () ] CLASS <className>  
> [AS <type>]
>
>    PROTOTYPE ASSIGN [METHOD] <methName> (<par1>) CLASS <className>  
> [AS <type>]
>
>    PROTOTYPE [PROTECT] METHOD <methName> [([<paramList,...>])] ;
>          CLASS <className> [AS <type>]
>
> Syntax 3:
>    PROTOTYPE FUNCTION <udfName> [([<paramList,...>])] [AS <type>]
>
> parameters in <paramList,...> can be specified as:
>
>    - <parName>          : untyped
>    - <parName AS type>  : typed parameter
>    - [<parName>] or [<parName AS type>] : square brackets [] are used
>                                           to mark optional parameters
>    - [...] : any number of optional, untyped parameters (can be used
>              in PROTOTYPE statement only
>    - <@parName> or <@parName AS type> or [<@parName>] : automatical
>                 (implicit) parameter/argument passing-by-reference,
>                 instead of the default passing-by-value in all  
> function
>                 call used after declaration
>
> The same parameter syntax may also be used in the FUNCTION / PROCEDURE
> statements and in such case FS automatically creates function  
> PROTOTYPE
> but if UDF/UDP parameters and return types have been declared with
> PROTOTYPE then it is not necessary to repeat their declaration in
> FUNCTION/PROCEDURE statement and the one from PROTOTYPE is used.
>
> Due to PP rules we cannot use square brackets [] exactly like in FS
> to mark optional parameters because in such context Clipper compatible
> PP will have to convert them to strings before compiler will be able
> to analyze them. Of course we can add string decoding in lexer but
> it will not be elegant solution. If we decide to keep AS <type> syntax
> then we can chose AS [<type>] to mark optional parameters because
> in such context [<type>] will not be converted by PP to string:  
> "<type>"
> Please also note that AS [<type>] is also possible solution for
> reuested <type> OR NIL declaration in CLASS definition, f.e.:
>    VAR v1 AS NUMERIC    // accept numeric values only
>    VAR v2 AS [NUMERIC]  // accept numeric values or NIL

Can't we just support this syntax for METHOD declarations ?:
METHOD mymethod( var1 AS USUAL, var2 AS LOGICAL ) AS USUAL  
SETGET // ...etc

> The C-typed variables can be access directly by C code
> included in .prg file between #Cinline / #endCinline directives.

This leads far-far away :)

> I would like to see results from VO, XBASE++, V-DBASE, VFP and other
> xbase compilers supporting strong typed variables.
> If some other xbase compilers use different syntax for strong typed
> variables then I would like to hear about them. The AS <type> is not
> the best choice for native Clipper code but I will not reinvent the
> wheel if this is standard in xbase world.

Looks like it to me.

There is no strong typing in XBase++ and VFP, I don't know about VDB,
but I cannot find anything which would say it has.

The only one I've seen besides VO and FS was Force, but
it uses a completely different syntax. URL: ftp://force.bitmax.hu/

While digging on the net I've found that dBase's predecessor, named
Vulcan, was originally developed by C. Wayne Ratliff at the JPL (Jet
Propulsion Laboratory). Maybe we should send him a postcard 8)

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 11 18:44:48 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 11 14:45:00 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>
References: <20071011211921.GA4812@localhost.localdomain>
	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>
Message-ID: <FF3799B7-8172-493C-B208-43D9236C459F@syenar.hu>

URL for VO:
ftp://grafxsoft.com/VO_25_Trial_Version/VO_25_Trial.zip

Brgds,
Viktor

On 2007.10.12., at 0:27, Szak?ts Viktor wrote:

> Hi Przemek,
>
> I think we originally wanted to have something close
> to the VO syntax. I don't know VO, but I can dig up some
> docs to get this info.
>
> (if someone has the VO .hlp file, please shout).
>
> We might also support both VO and FlagShip, if they are
> not contradictory.
>
> On 2007.10.11., at 23:19, Przemyslaw Czerpak wrote:
>
>> ===================================================================== 
>> ======
>>
>> /* 1. Supported types, please note that AS CLASS is special type  
>> which
>>       means object of given class, in literal form it should be:
>>       AS <className> OBJECT */
>>
>>    AS <type>
>>
>>    <type: USUAL | ANYTYPE,
>>           CHARACTER | STRING,
>
> We need to check if we absolutely have to support synomyms here.
> I'd vote for one option each: USUAL and CHARACTER (to be in sync
> with ISCHARACTER())
>
>> /* parameters declaration, please note that OPTIONAL can be used  
>> only for
>>    trailing parameters */
>>    <params> <= <stdParam,...> |
>>                [OPTIONAL <stdParam>] |
>>                <stdParam,...>, [OPTIONAL <stdParam>]
>
> Should we also cover REFERENCE here?
>
>> /* declare type of function/procedure local parameters and type of
>>    function returned value */
>>    FUNCTION <funcName>( [ <paramName1> [AS <type>]
>>                           [, <paramNameN> [AS <type>]] ] ) [AS  
>> <type>]
>
> Also for PROCEDUREs. And how about OPTIONAL and REFERENCE, here too?
>
>> /* declare type of codeblock parameters */
>>    { | <paramName1> [AS <type>] [, <paramNameN> [AS <type>]] | ... }
>
> Q: How to define the return value of a block?
>
>> /* declare type in PARAMETER or MEMVAR statement */
>>    PARAMETERS <paramName1> [AS <type>] [, <paramNameN> [AS <type>]]
>
> Maybe OPTIONAL and REFERENCE, here too?
>
>> /* Here is small example, please note that I have to use all casted
>>    expressions in parenthesis due to fatal syntax which does not
>>    respect Clipper PP rules */
>>       proc main()
>>       local x, o:errorNew()
>>          ? ( qself() AS USUAL )
>>          ? ( date() AS DATE )
>>          ? ( o:canDefault AS LOGICAL )
>>          ? ( o:description() AS CHARACTER )
>>          ? ( x AS USUAL )
>>          ? ( (1) AS NUMERIC )
>>       return
>
> I'm not sure if the PP problem is with casting only,
> but it is so, maybe we could use some helper functions:
> FUNCTION hb_AsUsual( xVar AS USUAL ) AS USUAL
> FUNCTION hb_AsDate( xVar AS USUAL ) AS DATE
> ...
>
>> 5. Compiler time warnings.
>> This is sth what I do not fully understand. I read the description
>> in doc/en/strotype.txt but I have serious doubts what the  
>> "Adaptive Type
>> Checking" means. For sure it cannot work as described because it's  
>> not
>> possible to detect at compile time the wrong line in code like:
>>    func p(l1,l2)
>>       local x
>>       if l1
>>          x:=1
>>       else
>>          x:="A"
>>       endif
>>       if l2
>>          return x+2
>>       else
>>          return x+"B"
>>       endif
>> and this is trivial example but what to do with more complicated
>> using loops, f.e.:
>>
>>    while l1
>>       x := x + 2
>>       l1 := x < 4
>>       x := "A"
>>    enddo
>>
>> I will need much more precise definition for expected warnings then
>> "Adaptive Type Checking" which cannot work well by definition or I'm
>> missing some important conditions.
>
> This never worked properly, so you can simply drop it IMO.
>
>> ===================================================================== 
>> ======
>>
>> FlagShip strong typed variables
>> ===============================
>> In FlagShip typed variables can be used only for LOCALs, STATICs  
>> and GLOBALs.
>> GLOBALs and STATICs can use ony C-types. LOCALs can use C-types,  
>> usual-types
>
> I can see a point in not giving strong typing support
> for PRIVATE/PUBLIC at all. If this helps, we can also
> go this way.
>
>> and object-types. There is no type casting. For declaration  
>> PROTOTYPE command
>> is used. It is possible to set warnings level at compile time to:
>>    -w2   Report untyped variables as warnings
>>    -w3   Report unknown UDF return values and mismatched parameters
>>    -w4   Report unresolvable CLASS references and late binding
>>
>> C-typed variables are used for compile time optimization.
>> For usual-typed variables special RT code is added which
>> can check type also at runtime in devel mode.
>
> C-typed stuff lead a bit far at this point, doesn't it?
>
>> Object-typed variables are used for compile time optimization
>> of OOP code - early binding is used instead of late binding,
>> it is much more important for FS then for us because late bindings
>> are very slow in FS.
>>
>>
>> PROTOTYPE declaration
>> ---------------------
>> Syntax 1:
>>    PROTOTYPE [STATIC] CLASS <ClassName> [INHERIT <SuperClass>] ;
>>          EXPORT|HIDDEN|PROTECT [INSTANCE] <Name> [AS <type>]
>>          INSTANCE <Name> [AS <type>]
>>
>> Syntax 2:
>>    PROTOTYPE ACCESS [METHOD] <methName> [ () ] CLASS <className>  
>> [AS <type>]
>>
>>    PROTOTYPE ASSIGN [METHOD] <methName> (<par1>) CLASS <className>  
>> [AS <type>]
>>
>>    PROTOTYPE [PROTECT] METHOD <methName> [([<paramList,...>])] ;
>>          CLASS <className> [AS <type>]
>>
>> Syntax 3:
>>    PROTOTYPE FUNCTION <udfName> [([<paramList,...>])] [AS <type>]
>>
>> parameters in <paramList,...> can be specified as:
>>
>>    - <parName>          : untyped
>>    - <parName AS type>  : typed parameter
>>    - [<parName>] or [<parName AS type>] : square brackets [] are used
>>                                           to mark optional parameters
>>    - [...] : any number of optional, untyped parameters (can be used
>>              in PROTOTYPE statement only
>>    - <@parName> or <@parName AS type> or [<@parName>] : automatical
>>                 (implicit) parameter/argument passing-by-reference,
>>                 instead of the default passing-by-value in all  
>> function
>>                 call used after declaration
>>
>> The same parameter syntax may also be used in the FUNCTION /  
>> PROCEDURE
>> statements and in such case FS automatically creates function  
>> PROTOTYPE
>> but if UDF/UDP parameters and return types have been declared with
>> PROTOTYPE then it is not necessary to repeat their declaration in
>> FUNCTION/PROCEDURE statement and the one from PROTOTYPE is used.
>>
>> Due to PP rules we cannot use square brackets [] exactly like in FS
>> to mark optional parameters because in such context Clipper  
>> compatible
>> PP will have to convert them to strings before compiler will be able
>> to analyze them. Of course we can add string decoding in lexer but
>> it will not be elegant solution. If we decide to keep AS <type>  
>> syntax
>> then we can chose AS [<type>] to mark optional parameters because
>> in such context [<type>] will not be converted by PP to string:  
>> "<type>"
>> Please also note that AS [<type>] is also possible solution for
>> reuested <type> OR NIL declaration in CLASS definition, f.e.:
>>    VAR v1 AS NUMERIC    // accept numeric values only
>>    VAR v2 AS [NUMERIC]  // accept numeric values or NIL
>
> Can't we just support this syntax for METHOD declarations ?:
> METHOD mymethod( var1 AS USUAL, var2 AS LOGICAL ) AS USUAL  
> SETGET // ...etc
>
>> The C-typed variables can be access directly by C code
>> included in .prg file between #Cinline / #endCinline directives.
>
> This leads far-far away :)
>
>> I would like to see results from VO, XBASE++, V-DBASE, VFP and other
>> xbase compilers supporting strong typed variables.
>> If some other xbase compilers use different syntax for strong typed
>> variables then I would like to hear about them. The AS <type> is not
>> the best choice for native Clipper code but I will not reinvent the
>> wheel if this is standard in xbase world.
>
> Looks like it to me.
>
> There is no strong typing in XBase++ and VFP, I don't know about VDB,
> but I cannot find anything which would say it has.
>
> The only one I've seen besides VO and FS was Force, but
> it uses a completely different syntax. URL: ftp://force.bitmax.hu/
>
> While digging on the net I've found that dBase's predecessor, named
> Vulcan, was originally developed by C. Wayne Ratliff at the JPL (Jet
> Propulsion Laboratory). Maybe we should send him a postcard 8)
>
> Brgds,
> Viktor
>

From i at kevincarmody.com  Thu Oct 11 19:13:13 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Thu Oct 11 15:12:20 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>
References: <20071011211921.GA4812@localhost.localdomain>
	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>
Message-ID: <470EAE09.8030109@kevincarmody.com>

Szak?ts Viktor wrote:
> While digging on the net I've found that dBase's predecessor, named
> Vulcan, was originally developed by C. Wayne Ratliff at the JPL (Jet
> Propulsion Laboratory). Maybe we should send him a postcard 8)
He might be interested.  He gave an interview just a few months ago that 
was published at 
http://reddevnews.com/qandas/article.aspx?editorialsid=113 .  He 
mentioned VFP but not Clipper or Harbour.  He also talked about strong 
typing.

*"FoxPro is sort of alive and well. Microsoft isn't promising anything 
beyond the next version, but that whole dBASE community is really loyal 
to the FoxPro product."*
For good reason. ... FoxPro is more rigorous in its data approach than 
dBASE II was. It's -- maybe user-friendly isn't the right word -- it's 
just friendly. It's easy to do stuff. It's easy to make mistakes, and I 
think that's what all the rigor is going toward, trying to protect 
people from themselves. You can just get down and dirty with the data in 
dBASE and to a slightly lesser degree with FoxPro. If you have to go in 
and write an Access program, and I did a lot of Visual Basic Access work 
three or four years ago, it's another step harder. They just keep 
getting further and further away and more rigorous. There are things 
like data hiding and safe typing and object-orientation and all that 
stuff. It takes more programming effort to get something to happen than 
it did with dBASE.

[...]

*"Have you followed Microsoft's LINQ project?"*
"No. I just looked it up, but that's the first I've ever heard of it. 
Once again, it sounds like something that's heading toward strong data 
typing and rigor in lieu of the friendliness. I think C++ and C# are in 
the same vein. They're trying to make it so that at programming time the 
possibility of an error is detected automatically, and it slows 
everything down, I think."

Kevin




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20071011/aa3bd544/attachment.html
From makis1970 at gmail.com  Thu Oct 11 19:39:35 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Thu Oct 11 15:39:33 2007
Subject: [Harbour] Generic dialect concept
In-Reply-To: <002d01c80c53$0e7f45e0$0303a8c0@hbco>
References: <0FB74203-FFBB-4534-BA9C-D11783AFACFE@syenar.hu><470E4B27.3112.E598EA@rglab.przesiew.imid.med.pl><001d01c80c25$37abfa40$0303a8c0@hbco>	<20071011200403.GA4079@localhost.localdomain>
	<002d01c80c53$0e7f45e0$0303a8c0@hbco>
Message-ID: <001c01c80c5f$fc863760$f592a620$@com>

Przemek,
I'm using also other languages (Xbase++, VB.Net, FW, xHarbour), but I think
that the main goal its not to be compatible with them. First we must be
clipper 5.x compatible (and we are allready ) second and this must be the
first harbour version we must define from scratch what we want in the core (
Of course the core must be OS independed ).  Personally I don't care if
something is compatible with xBase++ or xHarbour natively (even if I use
them extensively) and there is no need to be. But why not to extend the
language to be better even if this breaks some clipper rules? There is only
one need, to be possible to catch such clipper VS harbour incompatibilities
at compile time. If someone wants Xbase++, VO, VFP compatibility he can
create his own lib. It will be better for the Harbour as a language to go
forward and not start to making compatibilities libs for other dialects. Of
course if we find something that its useful FROM ANY LANGUAGE we can use it
but there is no need to try to be compatible with everyone.

Regards
Mike EVans


> On Thu, 11 Oct 2007, Bill Smith wrote:
> > Are you all tired of working on this project?  IHMO this use of switches
is
> > the best way to fragment and kill Harbour.  Clipper had every
opportunity to
> > emulate Pascal, C, Basic et. all., but instead established a clear and
> > simple language.  Clipper never intended to emulate FoxBASE and any
number
> > of other 'bases.  Why is this even considered in Harbour?
>
> Clipper is classic example of evaluation with bad backward
> compatibility. The difference between S87 and CL52 are much
> more fundamental and can much more problems then between
> C52 and Harbour.
>
>
> But if you are serious then why we have support for FiveWin OOP
> syntax in Harbour?
> FW is not part of Clipper. Let's start to clean Harbour from
> removing FW[H] like extensions, Class(y) and maybe whole Windows
> support. Clipper is not Windows compiler and I do not use
> MS-Windows at all so for me all windows only code is redundant
> extensions which make my life harder because I have to update it.
> I can fully agree with you if we start from removing any support
> for MS-Windows from Harbour.
> MS-Windows support is the first step to kill Harbour.
> ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> Isn't it?
> And the most important thing. Never, never and once again never
> we should start discussion about .NET support or sth similar
> because most of our extensions is 1% of modifications which
> are necessary for .NET real support.
>
>
> Support for different xbase dialects is in 90% side effects of extensions
> necessary to create applications for actually used operating systems and
> environments, which may exchange data and/or code with other programs
> written in different languages, working on different computers controlled
> by different operating systems, etc. Many things were not possible 20
years
> ago and now they are. You may not like it but some of them are necessary
for
> normal applications used today. Each of us needs different extended
> functionality and I do not agree that Windows or FWH users will tell
> me what should be included in Harbour code because they used to use
> some extensions so do not even call them extensions but the rest are
> "killing project features". F.e. for many years *nix users can use only
> FlagShip as xbase compiler. For us Harbour is FlagShip successor and it
> was the only one reason I decided to invest my time in [x]Harbour and
> it was my main motivation in last 5 years. So far I haven't tried to
> force any FS only ideas or reduce MS-Win functionality. I even created
> quite big portion of MS-Windows only code.
>
> best regards,
> Przemek

Hi Przemek,

First of all, I don't use FWH or Windows and don't object to extensions for
either, or extensions for FlagShip.  In fact, I find them appealing.  But
what do you suggest one does five years down the road when attempting to
compile an undocumented Harbour application?  Ask the programmer to add the
compile switches to the title page?  Without a detailed study of both the
source code and also detailed knowledge of the effects of the compiler
switches, it seems that it could become very difficult to compile Harbour
source.

I'm not trying to force any FS or any particular method on anyone, and have
repeatedly complimented your astounding work in developing Harbour.  My
objection is not with an extension, but with the notion that complexity is a
solution to compatibility, to the degree that the compiler needs to be
configured in order for it to function.  It is one thing to place flags to
accommodate different operating systems or processors, but, from my view as
a user, quite another to set flags to affect the personality of the
language.

Bill

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Fri Oct 12 01:59:36 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 11 21:59:45 2007
Subject: [Harbour] Generic dialect concept
In-Reply-To: <EC3EE616-1CB6-47A2-9DD8-1AE40E3DCDD4@syenar.hu>
References: <0FB74203-FFBB-4534-BA9C-D11783AFACFE@syenar.hu>
	<470E4B27.3112.E598EA@rglab.przesiew.imid.med.pl>
	<001d01c80c25$37abfa40$0303a8c0@hbco>
	<20071011200403.GA4079@localhost.localdomain>
	<EC3EE616-1CB6-47A2-9DD8-1AE40E3DCDD4@syenar.hu>
Message-ID: <20071012055936.GA6863@localhost.localdomain>

On Thu, 11 Oct 2007, Szak?ts Viktor wrote:
> >Isn't it?
> The goal has always been to create a _multiplatform_ C5.2e
> compatible compiler.
> So, every Windows-only extension is a non-goal, and to be avoided
> (if not forbidden). I'm not exactly sure which feature are thinking
> of though, right I can't think of too many features which are
> Windows-only in core.

I agree and it was not my opinion. I only want to show that
our choices often shows only our prefernces but not general
rules and some times.

> As for OOP syntax, C5.2 didn't have any, yet it's an _essential_
> feature, and currently more than one dialect is supported at the
> same time to a proper extent, so I don't feel we should do anything
> with it. So in a sense, Harbour has it as a native extension with
> almost full support for 4 OOP dialect. No problem with that, I
> haven't seen any complaints either. It's proper.

I do not understand you now. You want to remove all synonyms
in Harbour, f.e. AS CHARACRER vs AS STRING but you accept much
more confusing alternative OOP syntax. How do you choice things
which can have synonyms and which cannot?
BTW have you look carefully at hbclass.ch?
If yes then please tell me what do you think about:
   [ ; #translate Super( <SuperClassN> ): => ::<SuperClassN>: ] ;
   [ ; #translate Super( <SuperClass1> ): => ::<SuperClass1>: ] ;
   [ ; #translate Super(): => ::<SuperClass1>: ] ;
   [ ; #translate Super: => ::<SuperClass1>: ] ;
   [ ; #translate ::Super : => ::<SuperClass1>: ]

May I ask why we have feature which works only in code defined
under class definition and only if methods are defined just
after class so it's not possible to define few classes at the
beginning of file and then define their methods. It also breaks
overloading super and using super() function.
I do not know from which OOP dialect it comes from but for sure
it has to be removed. BTW I was announcing it few times in the
past and I think that now it's time to remove it.
And what do you think about this:

   /* Warning! For backward compatibility this CLASSDATA ignores the
      SHARED clause and always create shared class variables */
   #xcommand CLASSDATA <DataNames,...> [ AS <type> ] [ INIT <uValue> ] [<export: EXPORTED, VISIBLE>] [<protect: PROTECTED>] [<hidde: HIDDEN>] [<ro: READONLY, RO>] [<share: SHARED>] [<persistent: PERSISTENT, PROPERTY>] => ;
      _HB_MEMBER {[ AS <type>] <DataNames> } ;;
   s_oClass:AddMultiClsData( <(type)>, <uValue>, __HB_CLS_SCOPE( <.export.>, <.protect.>, <.hidde.> ) + iif( <.ro.>, HB_OO_CLSTP_READONLY, 0 ) + iif( /* <.share.> */ .T., HB_OO_CLSTP_SHARED, 0 ) + iif( <.persistent.>, HB_OO_CLSTP_PERSIST, 0 ), {<(DataNames)>}, __HB_CLS_NOINI )

Is it clear for you that we accept
    CLASSDATA var SHARED
and
    CLASSDATA var
and in both cases SHARED CLASS variable is created.
Of course:
    CLASS VAR var SHARED
creates SHARED CLASS variable and
    CLASS VAR var
normal CLASS variable.
Would you like to talk with Antonio about it and why we cannot
fix his mistake in FWH even in Harbour code?

Victor, these are serious problem for me not a discussion about
optional switches we does not have to be used by most of developers.

> I fully agree with Bill though (and I think this was the point
> he was making), that allowing a compiler to support all kinds of
> different optional features is the best way to essentially kill
> the language, because by using modifier switches you can basically
> create your own language with your own desired behaviours, effectively
> creating hundreds of different dialect.

We are not talking about supporting all possible dialects though it's
quite common that compilers have different forntend and backend so
it will be nothing amazing. Personally instead of using 10 different
compilers I'd be happy to use only one. If instead of checking switch
name it will be better for you that we will begin to check arg[0] name
(application name) then we can define that from Harbour source code
we can create clipper, xbase++ and FlagShip compatible compilers.
It will be enough to make after final compilation pass:
    cp harbour clipper
    cp harbour xbasepp
    cp harbour flagship

It's also solution which may help many people who have existing code
and do not want to scan hundreds line for small differences between
dialects. For me the above is much more complicated and for sure I do
not suggest to make sth like that. But to clarify. I do not know any
alternative to compiler switches passed to macrocompiler which can be
replaced by some other solution and will keep the same functionality.
So if someone says that we should not add compiler switches then it
means that we should not add some functionality at all.

> Creating hundreds of dialects of a language means exactly that:
> Killing the language.

Nonsense. We are not creating hundreds of dialects. We can simply
define different frontends and backends for one compiler and it's
common practice. If you want different names of executables then
we can do that.

> >And the most important thing. Never, never and once again never
> >we should start discussion about .NET support or sth similar
> >because most of our extensions is 1% of modifications which
> >are necessary for .NET real support.
> I'm not sure what do you have in mind.
> If you mean the .NET output (CLI support), I'd delete it right away,
> along with the Java output, since none of them ever worked.

This should be done long time ago. It's a peace of unusable code
which I had to update in last years after each compiler modification
to not break the whole compilation. Such nonworking things should
never be committed to core code. So please delete it - it will make
all developers life easier.
I was talking about real .NET support. It cannot be done now but in
the future when we will eliminate online PCODE generation and introduce
compiler expression for statement then we can think about some working
solution for .NET But we will also have to add many other optional
extensions to be able to play well with other .NET languages.

> >Support for different xbase dialects is in 90% side effects of  
> >extensions
> >necessary to create applications for actually used operating  
> >systems and
> >environments, which may exchange data and/or code with other programs
> >written in different languages, working on different computers  
> >controlled
> >by different operating systems, etc. Many things were not possible  
> >20 years
> This is not true.
> There is only a minimal set of cases when Clipper RTL functions
> had to be extended to accomodate for other environments, but
> I think all of these are covered properly now. (filename
> case-sensitivity, long filenames, UI output, etc)
> The rest of special OS interfaces and OS support can be solved
> using separate libraries (contribs). But you _never_ have to
> change $, [], SWITCH, AINS(), TRY/END behaviour to effectively
> create applications under _all_ existing enviromnents.

The above is not true. As I said no real .NET support but I was
joking. Now looks that you want to force it.

[...]
> ...my English is starting to fail on me, but I hope you get what
> I had in mind.

I think so but it does not mean that I agree in with you in all
cases. In many yes even if I express different opinion here but
in some I feel like you are using coin ;-) to decide what is
redundant or not. Let's return to more productive things.

best regards,
Przemek

ps. I'll answer here to some messages in this thread save time
    which begins to be realy limited for me recently.

    Bill, I have nothing personal agains you in my previous message.
    Just simply I chosed one of message to show some other opinions.

    Marek, I agree that strong typing can be important feature but
    it's nothing more then our personal preferences and you've just
    confirmed my opinion in one of you last messages. I know people
    for whom weakly typed variables is the most important Clipper
    feature. We may not like it but we should respect such opinion.

    Mike, we do not have to be compatible with every one. We will
    be compatible only with this xbase dialects for which someone
    will want to add support. Probably because it may be easier then
    inspecting thousands of lines in existing code. It's not a goal
    and never was. But it's possibility and I strongly prefer to
    define clear conditions for such extensions now instead of waiting
    for "wild" solutions ;-). I do not plan to be watchdog for all
    commits in Harbour repository in the rest of my life.
From antonioharbour at gmail.com  Fri Oct 12 02:27:48 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Oct 11 22:28:10 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <20071011211921.GA4812@localhost.localdomain>
Message-ID: <470f13f4.1d01420a.652d.2a2a@mx.google.com>

Przemek, 

1. What RT speed increase do you expect from strong types implementation ?

2. Will it be possible to keep using variables without strong type ?

Thanks,

Regards,

Antonio

From druzus at acn.waw.pl  Fri Oct 12 02:43:40 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 11 22:43:46 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>
References: <20071011211921.GA4812@localhost.localdomain>
	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>
Message-ID: <20071012064340.GB6863@localhost.localdomain>

On Fri, 12 Oct 2007, Szak?ts Viktor wrote:
> >   AS <type>
> >   <type: USUAL | ANYTYPE,
> >          CHARACTER | STRING,
> We need to check if we absolutely have to support synomyms here.
> I'd vote for one option each: USUAL and CHARACTER (to be in sync
> with ISCHARACTER())

This is minor problem which can be resolved in few minutes with PP.

> >/* parameters declaration, please note that OPTIONAL can be used  
> >only for
> >   trailing parameters */
> >   <params> <= <stdParam,...> |
> >               [OPTIONAL <stdParam>] |
> >               <stdParam,...>, [OPTIONAL <stdParam>]
> Should we also cover REFERENCE here?

It is covered. See the part of message you cut with
    <stdParam> <= ...

> >/* declare type of function/procedure local parameters and type of
> >   function returned value */
> >   FUNCTION <funcName>( [ <paramName1> [AS <type>]
> >                          [, <paramNameN> [AS <type>]] ] ) [AS <type>]
> Also for PROCEDUREs.

Yes. PROCEDUREs are supported in the same way but without result type.
To be precise result type is not supported also in functions now but
this is one of few minor mistakes I haven't wrote.

> And how about OPTIONAL and REFERENCE, here too?

They are not supported. IMHO they should be fully supported or
we should not allow to declare type in function/procedure statement
at all and always force using DECLARE/PROTOTYPE commands.

> >/* declare type of codeblock parameters */
> >   { | <paramName1> [AS <type>] [, <paramNameN> [AS <type>]] | ... }
> Q: How to define the return value of a block?

You do not need to do that. It's type of the last expression in codeblock
expressions. Compiler should calculate it in the same way as type of all
other expressions, f.e. like in: x := <exp>

> >/* declare type in PARAMETER or MEMVAR statement */
> >   PARAMETERS <paramName1> [AS <type>] [, <paramNameN> [AS <type>]]
> Maybe OPTIONAL and REFERENCE, here too?

It's the same problem as for FUNCTION/PROCEDURE parameters declaration
plus PARAMETERS are memvers so here we may have the same problem as with
PRIATEs and PUBLICs.

> >/* Here is small example, please note that I have to use all casted
> >   expressions in parenthesis due to fatal syntax which does not
> >   respect Clipper PP rules */
> >      proc main()
> >      local x, o:errorNew()
> >         ? ( qself() AS USUAL )
> >         ? ( date() AS DATE )
> >         ? ( o:canDefault AS LOGICAL )
> >         ? ( o:description() AS CHARACTER )
> >         ? ( x AS USUAL )
> >         ? ( (1) AS NUMERIC )
> >      return
> I'm not sure if the PP problem is with casting only,
> but it is so, maybe we could use some helper functions:
> FUNCTION hb_AsUsual( xVar AS USUAL ) AS USUAL
> FUNCTION hb_AsDate( xVar AS USUAL ) AS DATE

Pseudo functions for casting resolves the problem if we also
eliminate using AS <type> in FUNCTION/PROCEDURE parameters and
move AS TYPE to then end of declaration statement. Please
rememebr that if you have code like:
    #xtranslate func1(<x,...>) => func2(<x>)
    [...]
    FUNCTION func1( v )

and then you will ass declaration of 'v' parameter
    FUNCTION func1( v as usual )

then PP will stop to translate func1() to func2() for this statement
because for PP 'v as usual' are 3 expressions not one or list of
expressions. This is the reason I said that AS <type> in such form
wasn't good choice.

[...]
> >In FlagShip typed variables can be used only for LOCALs, STATICs  
> >and GLOBALs.
> >GLOBALs and STATICs can use ony C-types. LOCALs can use C-types,  
> >usual-types
> I can see a point in not giving strong typing support
> for PRIVATE/PUBLIC at all. If this helps, we can also
> go this way.

In FS memvars and array items cannot be strong typed IMHO for very
simple reason - they can be changed without any control by external
code and seems that they simply tried to address only things which
can be more or less precisely controlled by compiler or RTL.

> >and object-types. There is no type casting. For declaration  
> >PROTOTYPE command
> >is used. It is possible to set warnings level at compile time to:
> >   -w2   Report untyped variables as warnings
> >   -w3   Report unknown UDF return values and mismatched parameters
> >   -w4   Report unresolvable CLASS references and late binding
> >C-typed variables are used for compile time optimization.
> >For usual-typed variables special RT code is added which
> >can check type also at runtime in devel mode.
> C-typed stuff lead a bit far at this point, doesn't it?

Why. We can generate C code instead of PCODE with -gc3. Such
C-typed variables can be optimized very strong giving code
hundreds times faster. For other output can be replaced by
standard NUMERIC values. We do not have to introduce them
but if I will work on strong type code then my code will be
ready to use them. For me is one of the most important features
of strong typing.

[...]
> >Due to PP rules we cannot use square brackets [] exactly like in FS
> >to mark optional parameters because in such context Clipper compatible
> >PP will have to convert them to strings before compiler will be able
> >to analyze them. Of course we can add string decoding in lexer but
> >it will not be elegant solution. If we decide to keep AS <type> syntax
> >then we can chose AS [<type>] to mark optional parameters because
> >in such context [<type>] will not be converted by PP to string:  
> >"<type>"
> >Please also note that AS [<type>] is also possible solution for
> >reuested <type> OR NIL declaration in CLASS definition, f.e.:
> >   VAR v1 AS NUMERIC    // accept numeric values only
> >   VAR v2 AS [NUMERIC]  // accept numeric values or NIL
> 
> Can't we just support this syntax for METHOD declarations ?:
> METHOD mymethod( var1 AS USUAL, var2 AS LOGICAL ) AS USUAL
> SETGET // ...etc

AS USUAL means ANY value. Harbour users requested about TYPED value
which can be replaced only by NIL so it's not the same. They have
AS USUAL now - in Harbour strong typing works for object variables.

> >The C-typed variables can be access directly by C code
> >included in .prg file between #Cinline / #endCinline directives.
> This leads far-far away :)

Not such far. It can be quite easy added for -gc3 output. I do not like
#pragma begindump/enddump and hb_inline(<x,...>) { ... } but people use
it. I also for some short life code use these constructions.

> >I would like to see results from VO, XBASE++, V-DBASE, VFP and other
> >xbase compilers supporting strong typed variables.
> >If some other xbase compilers use different syntax for strong typed
> >variables then I would like to hear about them. The AS <type> is not
> >the best choice for native Clipper code but I will not reinvent the
> >wheel if this is standard in xbase world.
> Looks like it to me.
> There is no strong typing in XBase++ and VFP, I don't know about VDB,
> but I cannot find anything which would say it has.
> The only one I've seen besides VO and FS was Force, but
> it uses a completely different syntax. URL: ftp://force.bitmax.hu/

I've just check and it can be compared to FS like LOCAL_<type> variables.

> While digging on the net I've found that dBase's predecessor, named
> Vulcan, was originally developed by C. Wayne Ratliff at the JPL (Jet
> Propulsion Laboratory). Maybe we should send him a postcard 8)

I've also spent some time with goggle and seems that AS <type> is used
also by CULE. And all these compilers use FS like syntax:
    LOCAL v1, v2, ..., vN AS <type>

not like current:
    LOCAL v1 AS <type>, v2 AS <type>, ..., vN AS <type>

I'm interesting in default initialization for typed variables done
by this compilers. F.e. for the code I sent.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct 12 03:22:52 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 11 23:22:57 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <470f13f4.1d01420a.652d.2a2a@mx.google.com>
References: <20071011211921.GA4812@localhost.localdomain>
	<470f13f4.1d01420a.652d.2a2a@mx.google.com>
Message-ID: <20071012072252.GC6863@localhost.localdomain>

On Fri, 12 Oct 2007, Antonio Linares wrote:
> Przemek, 
> 1. What RT speed increase do you expect from strong types implementation ?

It will depend on type of .prg code and output format. The compile
time optimization based on type information will be implemented
successfully so speed improvement will be a process.
Probably I'll be able to create some test for -gc3 output where the
speed difference will be really huge but it's very hard to say how
it can help in the over all performance.
For full benefits from strongly typed code it will be necessary
to change also some part of compiler code. These modifications
will be necessary for some other things like real .NET support
so probably will be implemented in the future too. When we will
have them then with -gc3 output which will not be limited by
existing PCODEs list I think that we can at least double the
speed.

> 2. Will it be possible to keep using variables without strong type ?

Of course. It's a must. I will not put my fingers in anything what can
break such fundamental rules :-)

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Oct 12 03:38:06 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 11 23:38:16 2007
Subject: [Harbour] Generic dialect concept
In-Reply-To: <20071012055936.GA6863@localhost.localdomain>
References: <0FB74203-FFBB-4534-BA9C-D11783AFACFE@syenar.hu>
	<470E4B27.3112.E598EA@rglab.przesiew.imid.med.pl>
	<001d01c80c25$37abfa40$0303a8c0@hbco>
	<20071011200403.GA4079@localhost.localdomain>
	<EC3EE616-1CB6-47A2-9DD8-1AE40E3DCDD4@syenar.hu>
	<20071012055936.GA6863@localhost.localdomain>
Message-ID: <A49E4CE0-FB84-4ED6-84D1-E51BE3617097@syenar.hu>

Hi Przemek,

> I do not understand you now. You want to remove all synonyms
> in Harbour, f.e. AS CHARACRER vs AS STRING but you accept much
> more confusing alternative OOP syntax. How do you choice things
> which can have synonyms and which cannot?
> BTW have you look carefully at hbclass.ch?

I didn't go into it deeply. If you know something
which blocks some Class(y) syntax to be used properly
used, or something blocks Class(y) functionality, pls
do the group a favour to fix it, even if the price is
to drop some compatibility with one of the extra
OOP dialects. I might be wrong, but to me it seems
the mainline OOP syntax in Harbour is Class(y).

> May I ask why we have feature which works only in code defined
> under class definition and only if methods are defined just
> after class so it's not possible to define few classes at the
> beginning of file and then define their methods. It also breaks
> overloading super and using super() function.
> I do not know from which OOP dialect it comes from but for sure
> it has to be removed. BTW I was announcing it few times in the

I'm all for cleaning up things if they need to be.

> past and I think that now it's time to remove it.
> And what do you think about this:
>
>    /* Warning! For backward compatibility this CLASSDATA ignores the
>       SHARED clause and always create shared class variables */
>    #xcommand CLASSDATA <DataNames,...> [ AS <type> ] [ INIT  
> <uValue> ] [<export: EXPORTED, VISIBLE>] [<protect: PROTECTED>]  
> [<hidde: HIDDEN>] [<ro: READONLY, RO>] [<share: SHARED>]  
> [<persistent: PERSISTENT, PROPERTY>] => ;
>       _HB_MEMBER {[ AS <type>] <DataNames> } ;;
>    s_oClass:AddMultiClsData( <(type)>, <uValue>, __HB_CLS_SCOPE 
> ( <.export.>, <.protect.>, <.hidde.> ) + iif( <.ro.>,  
> HB_OO_CLSTP_READONLY, 0 ) + iif( /* <.share.> */ .T.,  
> HB_OO_CLSTP_SHARED, 0 ) + iif( <.persistent.>, HB_OO_CLSTP_PERSIST,  
> 0 ), {<(DataNames)>}, __HB_CLS_NOINI )
>
> Is it clear for you that we accept
>     CLASSDATA var SHARED
> and
>     CLASSDATA var
> and in both cases SHARED CLASS variable is created.
> Of course:
>     CLASS VAR var SHARED
> creates SHARED CLASS variable and
>     CLASS VAR var
> normal CLASS variable.
> Would you like to talk with Antonio about it and why we cannot
> fix his mistake in FWH even in Harbour code?
> Victor, these are serious problem for me not a discussion about
> optional switches we does not have to be used by most of developers.

I don't know FWH syntax, I've never used it, and if it needs
to be fixed, let's fix it. I believe Harbour should support
Class(y) in the first place, everything else is an extra goody.

> We are not talking about supporting all possible dialects though it's
> quite common that compilers have different forntend and backend so
> it will be nothing amazing. Personally instead of using 10 different
> compilers I'd be happy to use only one. If instead of checking switch
> name it will be better for you that we will begin to check arg[0] name
> (application name) then we can define that from Harbour source code
> we can create clipper, xbase++ and FlagShip compatible compilers.
> It will be enough to make after final compilation pass:
>     cp harbour clipper
>     cp harbour xbasepp
>     cp harbour flagship

We've been talking about two approaches:
1) feature granular switches (this was Ryszard's answer to my proposal)
2) dialect granular switches (this was my proposal)

If we opt to support any kind of built-in dialect support
in Harbour, my only choice is 2). To keep to language variations
to a well defined minimum.

I also think we don't need to introduce any new frontend
concept, one simple cmdline switch will do. (well, a frontend
selecting the proper switch can be added by anyone easily, it's
a one-liner batch file)

>> Creating hundreds of dialects of a language means exactly that:
>> Killing the language.
>
> Nonsense. We are not creating hundreds of dialects. We can simply
> define different frontends and backends for one compiler and it's
> common practice. If you want different names of executables then
> we can do that.

No I don't. Did you read my mail "Generic dialect support"?
I was proposing _one_ compiler switch (frontend), and _one_ lib  
(backend).

--
harbour myxbasesource.prg --dialect:XPP
link myxbasesource.obj ... hbxpp.lib
--

>> I'm not sure what do you have in mind.
>> If you mean the .NET output (CLI support), I'd delete it right away,
>> along with the Java output, since none of them ever worked.
>
> This should be done long time ago. It's a peace of unusable code
> which I had to update in last years after each compiler modification
> to not break the whole compilation. Such nonworking things should
> never be committed to core code. So please delete it - it will make
> all developers life easier.

Okey.

> I was talking about real .NET support. It cannot be done now but in
> the future when we will eliminate online PCODE generation and  
> introduce
> compiler expression for statement then we can think about some working
> solution for .NET But we will also have to add many other optional
> extensions to be able to play well with other .NET languages.

This leads so far away I cannot really add anything to it
at this point. The only thing I can, is that .NET support
in such a way was _never_ a goal of this project.

>>> Support for different xbase dialects is in 90% side effects of
>>> extensions
>>> necessary to create applications for actually used operating
>>> systems and
>>> environments, which may exchange data and/or code with other  
>>> programs
>>> written in different languages, working on different computers
>>> controlled
>>> by different operating systems, etc. Many things were not possible
>>> 20 years
>> This is not true.
>> There is only a minimal set of cases when Clipper RTL functions
>> had to be extended to accomodate for other environments, but
>> I think all of these are covered properly now. (filename
>> case-sensitivity, long filenames, UI output, etc)
>> The rest of special OS interfaces and OS support can be solved
>> using separate libraries (contribs). But you _never_ have to
>> change $, [], SWITCH, AINS(), TRY/END behaviour to effectively
>> create applications under _all_ existing enviromnents.
>
> The above is not true. As I said no real .NET support but I was
> joking. Now looks that you want to force it.

I really don't know where did you pull .NET support from.
.NET is not an operating system, it's a language platform.
The goal here was never to make Harbour compatible with
other foreign programming languages or language platforms.

Harbour's goal is to support multiple OS/CPU platforms, and for
that we don't need to add new operators/statements.

>> ...my English is starting to fail on me, but I hope you get what
>> I had in mind.
>
> I think so but it does not mean that I agree in with you in all
> cases. In many yes even if I express different opinion here but
> in some I feel like you are using coin ;-) to decide what is
> redundant or not. Let's return to more productive things.

I absolutely agree, I'm proposing the productivity thing since
2 weeks :)

Just to let you know: I don't personally need any fancy dialect
and syntax extensions we're talking about (not even OOP BTW), but
I'm trying to find a proper way proper to support user's need,
without making a mess out of the whole project, that's all. Plus
I don't have the energy to fight weeks for every modification
which might break someone's pet feature or favorite addition.
It's really tiring, I have better things to do.

If you ask me, I'd go now and fix all the std Clipper function
extensions in Harbour, delete those Java/CLI files, delete IsPrinter()
extension, and also move away every HB_COMPAT_* stuff to some
separate place.

>     Mike, we do not have to be compatible with every one. We will
>     be compatible only with this xbase dialects for which someone
>     will want to add support. Probably because it may be easier then
>     inspecting thousands of lines in existing code. It's not a goal
>     and never was. But it's possibility and I strongly prefer to
>     define clear conditions for such extensions now instead of waiting
>     for "wild" solutions ;-). I do not plan to be watchdog for all
>     commits in Harbour repository in the rest of my life.

"Amen" :)

Brgds,
Viktor

From mpaliwoda at interia.pl  Fri Oct 12 03:49:49 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Thu Oct 11 23:49:54 2007
Subject: [Harbour] Generic dialect concept
Message-ID: <20071012074949.5BA72CF071@f21.poczta.interia.pl>

Hi Przemk,

>     Marek, I agree that strong typing can be important feature but
>     it&#039;s nothing more then our personal preferences and you&#039;ve
just
>     confirmed my opinion in one of you last messages. I know people
>     for whom weakly typed variables is the most important Clipper
>     feature. We may not like it but we should respect such opinion.

It seems you misunderstood me :). I am one of the guys who _appreciate_
week typing *very much*. But I am also a guy who _appreciate_ strong
typing *very much* ;-). I would like to have BOTH AT A SAME TIME,
available to me during "developing session". 

But to clariy things further - I do NOT want to *push* strong typing 
*at all*. Having it working is NOT a priority to me *in any case*. I just
only presented my opinion that talking about strong typing is uncomarable 
to talking about extending $ operator. That's all. Additionaly, strong
typing seems less dangerous to me than extending $ operator, because
strong typing will be caught at compile time, not at run time, when I'll
be developing crosscompiler code.

-- 

Marek



----------------------------------------------------------------------
Fajne i smieszne. Zobacz najlepsze filmiki!

>>> http://link.interia.pl/f1bbb

From harbour.01 at syenar.hu  Fri Oct 12 04:44:16 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 12 00:44:25 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <20071012064340.GB6863@localhost.localdomain>
References: <20071011211921.GA4812@localhost.localdomain>
	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>
	<20071012064340.GB6863@localhost.localdomain>
Message-ID: <3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>

> Pseudo functions for casting resolves the problem if we also
> eliminate using AS <type> in FUNCTION/PROCEDURE parameters and
> move AS TYPE to then end of declaration statement. Please
> rememebr that if you have code like:
>     #xtranslate func1(<x,...>) => func2(<x>)
>     [...]
>     FUNCTION func1( v )
>
> and then you will ass declaration of 'v' parameter
>     FUNCTION func1( v as usual )
>
> then PP will stop to translate func1() to func2() for this statement
> because for PP 'v as usual' are 3 expressions not one or list of
> expressions. This is the reason I said that AS <type> in such form
> wasn't good choice.

Yes. Is there a way to change those translates to make them
compatible with ST syntax?

>> C-typed stuff lead a bit far at this point, doesn't it?
>
> Why. We can generate C code instead of PCODE with -gc3. Such
> C-typed variables can be optimized very strong giving code
> hundreds times faster. For other output can be replaced by
> standard NUMERIC values. We do not have to introduce them
> but if I will work on strong type code then my code will be
> ready to use them. For me is one of the most important features
> of strong typing.

Do you think it's possible to optimize based on regular Clipper
types?

>> Can't we just support this syntax for METHOD declarations ?:
>> METHOD mymethod( var1 AS USUAL, var2 AS LOGICAL ) AS USUAL
>> SETGET // ...etc
>
> AS USUAL means ANY value. Harbour users requested about TYPED value
> which can be replaced only by NIL so it's not the same. They have
> AS USUAL now - in Harbour strong typing works for object variables.

I know, bad example. I was trying to make a point for the syntax
itself, just replace USUAL with LOGICAL.

>>> The C-typed variables can be access directly by C code
>>> included in .prg file between #Cinline / #endCinline directives.
>> This leads far-far away :)
>
> Not such far. It can be quite easy added for -gc3 output. I do not  
> like
> #pragma begindump/enddump and hb_inline(<x,...>) { ... } but people  
> use
> it. I also for some short life code use these constructions.

I personally would left these out, since the fact that we're
now using C compilers to generate the final .obj is not a language
feature, but a technical implementation side-effect which can
change in the future (if we finally implement native .obj generation
for example). So, if we support these things now, we're effectively
tying the language to a C compiler forever.

This is one reason why I wouldn't tie Clipper too much to C types
too.

I'd find it friendly if this C type <-> Clipper type assignment
would be done automatically by the compiler. Granted, a NUMERIC
could only be emulated with a C float, but even then, we would be
much faster than with plain unoptimized PCODE.

>> While digging on the net I've found that dBase's predecessor, named
>> Vulcan, was originally developed by C. Wayne Ratliff at the JPL (Jet
>> Propulsion Laboratory). Maybe we should send him a postcard 8)
>
> I've also spent some time with goggle and seems that AS <type> is used
> also by CULE. And all these compilers use FS like syntax:
>     LOCAL v1, v2, ..., vN AS <type>
>
> not like current:
>     LOCAL v1 AS <type>, v2 AS <type>, ..., vN AS <type>

Latter seems more consistent to me with the expected Clipper syntax,
also more useful in real life.

> I'm interesting in default initialization for typed variables done
> by this compilers. F.e. for the code I sent.

Which code exactly? I can try it for you.

Brgds,
Viktor

From druzus at acn.waw.pl  Fri Oct 12 09:24:13 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 12 05:24:22 2007
Subject: [Harbour] I ask to restore include/hbcompat.ch and few lines
	in	hvm.c
In-Reply-To: <47092EFE.4070001@dbtopas.lt>
References: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>
	<47091112.5080900@dbtopas.lt> <4709162C.4030906@interia.pl>
	<47092EFE.4070001@dbtopas.lt>
Message-ID: <20071012132413.GA8960@localhost.localdomain>

On Sun, 07 Oct 2007, Mindaugas Kavaliauskas wrote:
> OK, so if this rule is used, my proposal of
>   FOR nI := 1 TO LEN(aI) FIXED
> is useful and passes "decision rule". Any more comments on "decision 
> rule" for syntax extensions? :)
> It's not that I'm trying to push for FIXED support. I can live without 
> it. I'm just trying to make myself and other understand "what extension 
> is bad and what is good". I haven't wrote any line of code with FIXED, 
> except test of the speed. Implementation of FIXED was a good practice on 
> Bison syntax for me. If someone is interested in speed test results, the 
> simple loop:
>   FOR nI := 1 TO LEN(aI) FIXED
>   NEXT
> gives 2.5 seconds, against 7 seconds without FIXED.

Yes but you will have the same results by adding yet another local
variable to store LEN(al). I understand that programmers are lazy and
it's often easier to make it in such way but if you want to help
then you should address all dynamic expressions use in FOR / NEXT
not only <toExp>, please look at this example:
    proc main()
       local i, n
       n:=1
       for i:=1 to 10 step n
          ? i
          if i==5
             n:=2
          endif
       next
       return

so real alternative syntax which will address also <stepExp> and
allow to create dynamic iterators should looks like:

    FOR [LOCAL] <var> := <expFrom> UPTO | DOWNTO <expTo> [STEP <stepExp>]
       [...]
    NEXT [<var>]

Due to method of implementing PARAMETERS statement in current code
is not easy to add dynamic local variables but it is possible.
Probably it will be easier to eliminate current code which updates
local variable addresses in hbfix.c by special version of VFRAME
PCODE. It does not mean that I want to make such modification now
but if we will have sth like that in the future then it should
address all possible problems not only one.
BTW IMHO in Clipper one important natural construction present in
many other languages is missed:

    REPEAT
       [...]
    UNTIL <lCond>

Now with after runing PCODE optimizer for:
    WHILE .T.
       [...]
       IF lCond
          EXIT
       ENDIF
    ENDDO

Harbour gives optimized code for this construction but Clipper
doesn't so Clipper users have to use less readable and slower
version. IF readability not a speed is the most important thing
then now using WITH OBJECT and PP is possible to emulate some
REAPEAT / UNTIL construction, f.e.:
    #command REPEAT => WITH OBJECT .T.; WHILE :__withObject
    #command UNTIL <lCond> => :__withObject := <lCond>; END; ENDWITH

    proc main()
       local n
       n:=1
       REPEAT
          ? n
       UNTIL ++n < 10
    return

Please note that WITH OBJECT is nice holder for temporary local
variables and can be also used to simulate FOR ... FIXED you
suggested.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Oct 12 10:12:27 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 12 06:12:38 2007
Subject: [Harbour] I ask to restore include/hbcompat.ch and few lines
	in	hvm.c
In-Reply-To: <20071012132413.GA8960@localhost.localdomain>
References: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>
	<47091112.5080900@dbtopas.lt> <4709162C.4030906@interia.pl>
	<47092EFE.4070001@dbtopas.lt>
	<20071012132413.GA8960@localhost.localdomain>
Message-ID: <C08B3490-E6C6-410D-92E7-1B1C2F75E071@syenar.hu>

Hi Przemek,

I strongly object against hbcompat.ch. It has nothing
to do with core Harbour, since it contains xhb features.
The name by itself is misleading. If this file is there
in the final release, we're effectively making those
extensions part of Harbour, which they are not.

For _end users_, there is no difference in whether
hbcompat.ch is in /include/ or in xhb lib, as long
as the xhb lib is packaged with the binary distribution.

What do you exactly want to achieve by adding xhb features
to core Harbour via hbcompat.ch?

And what are the few lines in hvm.c?

> so real alternative syntax which will address also <stepExp> and
> allow to create dynamic iterators should looks like:
>
>     FOR [LOCAL] <var> := <expFrom> UPTO | DOWNTO <expTo> [STEP  
> <stepExp>]
>        [...]
>     NEXT [<var>]

Seems elegant to me, but I'd ask the group to
decide if want to introduce yet another proprietary
base language extension to the Clipper language.

> Probably it will be easier to eliminate current code which updates
> local variable addresses in hbfix.c by special version of VFRAME
> PCODE. It does not mean that I want to make such modification now
> but if we will have sth like that in the future then it should
> address all possible problems not only one.
> BTW IMHO in Clipper one important natural construction present in
> many other languages is missed:
>
>     REPEAT
>        [...]
>     UNTIL <lCond>

Cannot this be added by anyone using PP? (even in C5.2e)
If it is, there is no need to make into the core in any ways.

> Please note that WITH OBJECT is nice holder for temporary local
> variables and can be also used to simulate FOR ... FIXED you
> suggested.

As for FOR/NEXT FIXED, my vote is still a strong no.

Brgds,
Viktor

From druzus at acn.waw.pl  Fri Oct 12 11:05:54 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 12 07:06:04 2007
Subject: [Harbour] I ask to restore include/hbcompat.ch and few lines
	in	hvm.c
In-Reply-To: <C08B3490-E6C6-410D-92E7-1B1C2F75E071@syenar.hu>
References: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>
	<47091112.5080900@dbtopas.lt> <4709162C.4030906@interia.pl>
	<47092EFE.4070001@dbtopas.lt>
	<20071012132413.GA8960@localhost.localdomain>
	<C08B3490-E6C6-410D-92E7-1B1C2F75E071@syenar.hu>
Message-ID: <20071012150554.GA9310@localhost.localdomain>

On Fri, 12 Oct 2007, Szak?ts Viktor wrote:
> Hi Przemek,
> I strongly object against hbcompat.ch. It has nothing
> to do with core Harbour, since it contains xhb features.
> The name by itself is misleading. If this file is there
> in the final release, we're effectively making those
> extensions part of Harbour, which they are not.

Victor, please. You do not have to be against subject
of old message for which I replayed ;-)
I was answering for Mindaugas message where he was writing
about FOR ... FIXED sytnax. Nothing more nothing less.

> For _end users_, there is no difference in whether
> hbcompat.ch is in /include/ or in xhb lib, as long
> as the xhb lib is packaged with the binary distribution.
> What do you exactly want to achieve by adding xhb features
> to core Harbour via hbcompat.ch?
> And what are the few lines in hvm.c?

See the mailing list archive for first message with this subject.
AFAIR Lorenzo stared this thread.

> >    FOR [LOCAL] <var> := <expFrom> UPTO | DOWNTO <expTo> [STEP  
> ><stepExp>]
> >       [...]
> >    NEXT [<var>]
> Seems elegant to me, but I'd ask the group to
> decide if want to introduce yet another proprietary
> base language extension to the Clipper language.

I do not plan to add it. At least now. I only show how it can
be implemented and maybe we will make sth like that in the
future. IMHO above proposition is the most serious argument
to not add some partial solution like FOR ... FIXED which
does not cover the whole problem because we will need
    FOR ... FIXED2
soon ;-)

> >BTW IMHO in Clipper one important natural construction present in
> >many other languages is missed:
> >    REPEAT
> >       [...]
> >    UNTIL <lCond>
> Cannot this be added by anyone using PP? (even in C5.2e)
> If it is, there is no need to make into the core in any ways.

Yes it can. It can be even implemented in easier way then I presented
in previous message. I intentionally introduced WITH OBJECT as an example
to show some new possibilities for PP commands what should also illustrate
how to implement FOR ... FIXED like syntax (it will be only necessary
to use some NEXT replacement) using temporary variable given by WITH OBJECT.
The easiest way to implement REPEAT / UNTIL is:
    #command REPEAT => WHILE .T.
    #command UNTIL <lCond> => IF !<lCond>; EXIT; END; END
and as I said in Harbour PCODE optimizer is clever enough to optimize
generated PCODE so final result will be the same as for native
REPEAT / UNTIL.

> >Please note that WITH OBJECT is nice holder for temporary local
> >variables and can be also used to simulate FOR ... FIXED you
> >suggested.
> As for FOR/NEXT FIXED, my vote is still a strong no.

Me too. Believe me.

best regards,
Przemek
From dbtopas at dbtopas.lt  Fri Oct 12 11:16:20 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Oct 12 07:16:11 2007
Subject: [Harbour] I ask to restore include/hbcompat.ch and few lines
	in hvm.c
In-Reply-To: <20071012132413.GA8960@localhost.localdomain>
References: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>	<47091112.5080900@dbtopas.lt>
	<4709162C.4030906@interia.pl>	<47092EFE.4070001@dbtopas.lt>
	<20071012132413.GA8960@localhost.localdomain>
Message-ID: <470F8FC4.1030307@dbtopas.lt>

>>   FOR nI := 1 TO LEN(aI) FIXED
>>   NEXT
>> gives 2.5 seconds, against 7 seconds without FIXED.

Hi,


> Yes but you will have the same results by adding yet another local
> variable to store LEN(al). I understand that programmers are lazy and
> it's often easier to make it in such way but 

Yes, I know I can optimize it manually by adding one more local variable 
or in some cases by using DOWNTO ... STEP -1. But as you say, 
programmers are lazy and usually do manual optimization only if loop end 
value is very complex expression. If it is LEN(aI), we usually do not 
care about code optimization.


> if you want to help
> then you should address all dynamic expressions use in FOR / NEXT
> not only <toExp>, please look at this example:
>     proc main()
>        local i, n
>        n:=1
>        for i:=1 to 10 step n
>           ? i
>           if i==5
>              n:=2
>           endif
>        next
>        return

I already restored my source code copy to current SVN (so I can test it 
in 2 minutes), but I think it will work.


> so real alternative syntax which will address also <stepExp> and
> allow to create dynamic iterators should looks like:
> 
>     FOR [LOCAL] <var> := <expFrom> UPTO | DOWNTO <expTo> [STEP <stepExp>]
>        [...]
>     NEXT [<var>]

My FIXED fixes only <expTo> value. <stepExp> remains as it is. If we 
want <stepExp> to remain fixed we can implement:
    FOR nI := 1 TO LEN(aI) FIXED STEP n FIXED
       // we can do anything with n here
but STEP is used not often. I had no intention to fix <stepExp>.


> Due to method of implementing PARAMETERS statement in current code
> is not easy to add dynamic local variables but it is possible.

Perhaps I'm missing something, because I've never used PARAMETERS... My 
implementation was quite simple, because I found HB_P_DUPLUNREF. This 
instruction was exactly what I need.

If FIXED is used, then I calculate <expTo> I use HB_P_DUPLUNREF, to 
store copy of unreferenced value in stack. I use HB_P_DUPLICATE, before 
testing exit condition in next steps, and HB_P_POP on stack exit.

This HB_P_DUPLUNREF was really nice, and FIXED means really fixed.
 From the first look, "FIXED" has no sence in the code below:
    FOR nI := 1 TO nJ FIXED
        somefunc(nI)
    NEXT
but this not true. nJ could contain a reference to some static variable 
and it can be changed inside somefunc(). HB_P_DUPLUNREF ensures that 
<expTo> is really fixed.

FIXED can also be used not only to optimize code, but also to change the 
logic of loop:
    // Let's duplicate positive items
    FOR nI := 1 TO LEN(aI) FIXED
      IF aI[nI] > 0;  AADD(aI, nI)
      ENDIF
    NEXT


> Probably it will be easier to eliminate current code which updates
> local variable addresses in hbfix.c by special version of VFRAME
> PCODE. It does not mean that I want to make such modification now
> but if we will have sth like that in the future then it should
> address all possible problems not only one.

I should read clipper docs and do tests with PARAMETERS, to understand 
what you mean.


> version. IF readability not a speed is the most important thing
> then now using WITH OBJECT and PP is possible to emulate some
> REAPEAT / UNTIL construction, f.e.:
>     #command REPEAT => WITH OBJECT .T.; WHILE :__withObject
>     #command UNTIL <lCond> => :__withObject := <lCond>; END; ENDWITH
> 
>     proc main()
>        local n
>        n:=1
>        REPEAT
>           ? n
>        UNTIL ++n < 10
>     return
> 
> Please note that WITH OBJECT is nice holder for temporary local
> variables and can be also used to simulate FOR ... FIXED you
> suggested.

!!! :)
Until now I haven't seen any useful example of WITH OBJECT.
:method() looks a little ugly to me. This is the first example, that 
looks interesting and I can change my mind about WITH OBJECT. :)

Does WITH OBJECT works well with PARAMETERS statement? I should look how 
it's implemented.

I'm attaching FIXED implementation. I think you'll see in a minute, is 
is good or have some drawbacks.


Best regards,
Mindaugas


P.S. You've wrote:
   FOR [LOCAL] <var> := <expFrom> ...
What does it mean LOCAL? Is it possible to define new locals inside loop 
statement, like C++: for(int i=0; i<10; i++) ?




-------------- next part --------------
ForNext    : FOR LValue ForAssign Expression TO Expression FixedExpr  /* 1  2  3  4  5  6  7 */
               {                                      /* 8 */
                  hb_compLinePushIfInside( HB_COMP_PARAM );
                  $<lNumber>1 = HB_COMP_PARAM->currLine;
                  hb_compDebugStart();
                  ++HB_COMP_PARAM->wForCounter;

                  /* FIXED is not used if expression is a number */
                  if( hb_compExprType( $6 ) == HB_ET_NUMERIC )
                     $<lNumber>7 = 0;

                  if( $<lNumber>7 )
                  {
                     hb_compExprGenPush( $6, HB_COMP_PARAM );           /* end */
                     hb_compGenPCode1( HB_P_DUPLUNREF, HB_COMP_PARAM );
                  }

                  $<asExpr>$ = hb_compExprGenPush( hb_compExprAssign( $2, $4, HB_COMP_PARAM ), HB_COMP_PARAM );
                  if( hb_compExprAsSymbol( $<asExpr>2 ) )
                  {
                     hb_compForStart( HB_COMP_PARAM, hb_compExprAsSymbol( $<asExpr>2 ), FALSE );
                  }
               }
             StepExpr                                 /* 9 */
               {                                      /* 10 */
                  hb_compLoopStart( HB_COMP_PARAM, TRUE );
                  $<lNumber>$ = hb_compGenJump( 0, HB_COMP_PARAM );
               }
             Crlf                                     /* 11 */
               {                                      /* 12 */
                  $<lNumber>$ = HB_COMP_PARAM->functions.pLast->lPCodePos;
               }
             ForStatements                            /* 13 */
               {
                  int iSign, iLine;

                  hb_compLoopHere( HB_COMP_PARAM );

                  iLine = HB_COMP_PARAM->currLine;
                  HB_COMP_PARAM->currLine = $<lNumber>1;
                  hb_compLinePush( HB_COMP_PARAM );
                  HB_COMP_PARAM->currLine = iLine;

                  if( $<lNumber>7 )
                     hb_compGenPCode1( HB_P_DUPLICATE, HB_COMP_PARAM );

                  iSign = $<asExpr>9 ? hb_compExprAsNumSign( $<asExpr>9 ) : 1;
                  if( $<asExpr>9 )
                     HB_COMP_EXPR_CLEAR( hb_compExprGenPush( hb_compExprSetOperand( hb_compExprNewPlusEq( $2, HB_COMP_PARAM ), $<asExpr>9, HB_COMP_PARAM ), HB_COMP_PARAM ) );
                  else
                     HB_COMP_EXPR_CLEAR( hb_compExprGenPush( hb_compExprNewPreInc( $2, HB_COMP_PARAM ), HB_COMP_PARAM ) );
                  hb_compGenJumpHere( $<lNumber>10, HB_COMP_PARAM );

                  if( ! $<lNumber>7 )
                     hb_compExprGenPush( $6, HB_COMP_PARAM );           /* end */

                  if( iSign )
                     hb_compGenPCode1( ( $<lNumber>7 ? iSign < 0 : iSign > 0 ) ? HB_P_GREATER : HB_P_LESS, HB_COMP_PARAM );
                  else
                  {
                     if( $<lNumber>7 )
                        hb_compGenPCode1( HB_P_SWAP, HB_COMP_PARAM );
                     hb_compExprGenPush( $<asExpr>9, HB_COMP_PARAM );   /* step */
                     hb_compGenPCode1( HB_P_FORTEST, HB_COMP_PARAM );
                  }

                  hb_compGenJumpFalse( $<lNumber>12 - HB_COMP_PARAM->functions.pLast->lPCodePos, HB_COMP_PARAM );
                  hb_compLoopEnd( HB_COMP_PARAM );
                  if( hb_compExprAsSymbol( $<asExpr>2 ) )
                     hb_compForEnd( HB_COMP_PARAM, hb_compExprAsSymbol( $<asExpr>2 ) );

                  if( $<lNumber>7 )
                     hb_compGenPCode1( HB_P_POP, HB_COMP_PARAM );       /* pop end value */ 
                     
                  HB_COMP_EXPR_DELETE( $6 );
                  HB_COMP_EXPR_DELETE( $<asExpr>8 );  /* deletes $8, $2, $4 */
                  if( $<asExpr>9 )
                     HB_COMP_EXPR_DELETE( $<asExpr>9 );
                  HB_COMP_PARAM->functions.pLast->bFlags &= ~ ( FUN_WITH_RETURN | FUN_BREAK_CODE );
               }
           ;

FixedExpr  : /* default fixed expression */      { $<lNumber>$ = 0; }
           | FIXED                               { $<lNumber>$ = 1; }
           ;
From hbco2 at sbcglobal.net  Fri Oct 12 11:22:46 2007
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Fri Oct 12 07:22:56 2007
Subject: [Harbour] Generic dialect concept
References: <0FB74203-FFBB-4534-BA9C-D11783AFACFE@syenar.hu><470E4B27.3112.E598EA@rglab.przesiew.imid.med.pl><001d01c80c25$37abfa40$0303a8c0@hbco><20071011200403.GA4079@localhost.localdomain><EC3EE616-1CB6-47A2-9DD8-1AE40E3DCDD4@syenar.hu>
	<20071012055936.GA6863@localhost.localdomain>
Message-ID: <004501c80ce3$c1e85f00$0303a8c0@hbco>


----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Thursday, October 11, 2007 10:59 PM
Subject: Re: [Harbour] Generic dialect concept
.
>
> We are not talking about supporting all possible dialects though it's
> quite common that compilers have different forntend and backend so
> it will be nothing amazing. Personally instead of using 10 different
> compilers I'd be happy to use only one. If instead of checking switch
> name it will be better for you that we will begin to check arg[0] name
> (application name) then we can define that from Harbour source code
> we can create clipper, xbase++ and FlagShip compatible compilers.
> It will be enough to make after final compilation pass:
>     cp harbour clipper
>     cp harbour xbasepp
>     cp harbour flagship

Are you suggesting we change filetypes, ala ".c" and ".cpp"  Or will the
compiler be smart enough to recognize the differences and automatically
adjust to different dialects?

>
> It's also solution which may help many people who have existing code
> and do not want to scan hundreds line for small differences between
> dialects. For me the above is much more complicated and for sure I do
> not suggest to make sth like that. But to clarify. I do not know any
> alternative to compiler switches passed to macrocompiler which can be
> replaced by some other solution and will keep the same functionality.
> So if someone says that we should not add compiler switches then it
> means that we should not add some functionality at all.
>
> > Creating hundreds of dialects of a language means exactly that:
> > Killing the language.
>
> Nonsense. We are not creating hundreds of dialects. We can simply
> define different frontends and backends for one compiler and it's
> common practice. If you want different names of executables then
> we can do that.
>

This is probably an incomplete list, and does not show all the myriad of
options for only a simple loop.  What happened to the "simple" language?

For
For Each
Do While
Do Until
Repeat

Bill

From druzus at acn.waw.pl  Fri Oct 12 12:41:22 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 12 08:41:45 2007
Subject: [Harbour] I ask to restore include/hbcompat.ch and few lines in
	hvm.c
In-Reply-To: <470F8FC4.1030307@dbtopas.lt>
References: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>
	<47091112.5080900@dbtopas.lt> <4709162C.4030906@interia.pl>
	<47092EFE.4070001@dbtopas.lt>
	<20071012132413.GA8960@localhost.localdomain>
	<470F8FC4.1030307@dbtopas.lt>
Message-ID: <20071012164122.GA10171@localhost.localdomain>

On Fri, 12 Oct 2007, Mindaugas Kavaliauskas wrote:
> >so real alternative syntax which will address also <stepExp> and
> >allow to create dynamic iterators should looks like:
> >    FOR [LOCAL] <var> := <expFrom> UPTO | DOWNTO <expTo> [STEP <stepExp>]
> >       [...]
> >    NEXT [<var>]
> My FIXED fixes only <expTo> value. <stepExp> remains as it is. If we 
> want <stepExp> to remain fixed we can implement:
>    FOR nI := 1 TO LEN(aI) FIXED STEP n FIXED
>       // we can do anything with n here
> but STEP is used not often. I had no intention to fix <stepExp>.

Don't you think that it begins to be complicated and looks ugly.
Please also note that you are modifying only one chosen statement
and your modification can be reduced to inform compiler that some
expression can be used as fixed value. And now hint. Sooner or later
we will have strong typing support for we will probably need some
type of casting. We will have to agree the syntax for casting or
we will keep existing now ([AS <type>] suffix). It doesn't metter
what we chose but such casting should also allow to define also
some other attributes of value or function. One of this attribute
can be CONST. So all what you are implementing can be also reach
automatically with existing syntax and strong typing, f.e.:

    FOR i := dFrom TO date() AS CONST DATE STEP n AS CONST NUMERIC
       [...]
    NEXT

In short words, the same effect without new FOR ... [FIXED] / NEXT
syntax but using the information which can give strong typing which
can be also used for optimization any other statements, f.e.:
    i := 0
    DO WHILE ++i < LEN( aL ) AS CONST NUMERIC
       [...]
    ENDDO

The syntax of casting used by strong typing should be agreed yet so
it may be sth different then currently used AS <type> suffix but in
any version it should allow to declare more then one value attribute.

> >Due to method of implementing PARAMETERS statement in current code
> >is not easy to add dynamic local variables but it is possible.
> Perhaps I'm missing something, because I've never used PARAMETERS... My 
> implementation was quite simple, because I found HB_P_DUPLUNREF. This 
> instruction was exactly what I need.
[...]

This is OK - you are simply using dynamically allocated stack value at
som possition and it's possible because you access it without from the
place where its offset is well known. The PARAMETERS does not create
any problem here.

> P.S. You've wrote:
>   FOR [LOCAL] <var> := <expFrom> ...
> What does it mean LOCAL? Is it possible to define new locals inside loop 
> statement, like C++: for(int i=0; i<10; i++) ?

Exactly. And here PARAMETERS can be source of problems because in each place
where you access new LOCAL <var> value you will have to well know its offset
so you will have to calculate it from base value or you will have to calculate
stack offset dynamically. The last thing will need more modifications in code.
So calculating base offset is the easiest way.
PARAMETERS can appear later after FOR LOCAL ... statement and change number
of local parameters so your calculation will have to be updated in hbfix.c
where addresses for local variables are fixed if PARAMETERS statement were
used. This offset updating can be eliminated now when we have support of
variable number of parameters. It should be enough to generate special
VFRAME PCODE which will dynamically update it in HVM. Without using VFRAME
the easiest way to introduce temporary local variables is adding counter
for maximum number of local variables for [V]FRAME generated in final pass,
pushing temporary local value to the list of local variables and using
allocated local variable address only with standard HB_P_*LOCAL* PCODEs to
access/assign allocated value because this PCODEs will be update in hbfix.c
Finally local value pushed on the list of local variables should be popped
and the counter with maximum number of local values reached in whole
function body well updated for proper [V]FRAME setting.

best regards,
Przemek
From teo at windtelsoft.com  Fri Oct 12 13:19:55 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Fri Oct 12 09:20:12 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <20071011211921.GA4812@localhost.localdomain>
References: <20071011211921.GA4812@localhost.localdomain>
Message-ID: <200710121219.55812.teo@windtelsoft.com>

On Thursday 11 October 2007 04:19:21 pm Przemyslaw Czerpak wrote:
> Hi All,
>
> I'd like to chose syntax for strong typing support. I do not promise
> that I'll begin to implement anything in the nearest future but maybe
> in some weekend I'll create some code for strong type support in Harbour
> if I will know what is the expected and approved by other developers goal.
> After looking at current code I can only say that any code for strong
> type support I will create from scratch in absolutely different way.
> I analyzed current grammar rules for ST syntax and I do not know what
> is local Harbour extensions and what was taken from other languages.
> Also I do not know if some syntax conditions are side effect of
> implementation or intentional design decision so first I would like
> to define expected behavior and collect informations about other
> xbase compatible languages.

[snip]

Przemek,

Will function/procedures be overloaded depending of their return value type 
and/or also for their parameter's type value's ?. e.g.:

function overload on RETURN type:
<prg>

FUNCTION GetValue AS DATE
...
RETURN date

FUNCTION GetValue AS NUMERIC
...
RETURN numeric

</prg>

function overload on PARAMETERS type's:
<prg>

PROCEDURE AddMenuItem( TMenuItem )
...
RETURN

PROCEDURE AddMenuItem( TLabel, TAction )
...
RETURN

</prg>


best regards

Teo
From dbtopas at dbtopas.lt  Fri Oct 12 13:53:22 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Oct 12 09:53:13 2007
Subject: [Harbour] I ask to restore include/hbcompat.ch and few lines
	in	hvm.c
In-Reply-To: <20071012164122.GA10171@localhost.localdomain>
References: <9257026e0710070907y2ae0f186ra042031866a9fa0c@mail.gmail.com>	<47091112.5080900@dbtopas.lt>
	<4709162C.4030906@interia.pl>	<47092EFE.4070001@dbtopas.lt>	<20071012132413.GA8960@localhost.localdomain>	<470F8FC4.1030307@dbtopas.lt>
	<20071012164122.GA10171@localhost.localdomain>
Message-ID: <470FB492.2090303@dbtopas.lt>

Przemyslaw Czerpak wrote:
>>    FOR nI := 1 TO LEN(aI) FIXED STEP n FIXED
>>       // we can do anything with n here
>> but STEP is used not often. I had no intention to fix <stepExp>.
> 
> Don't you think that it begins to be complicated and looks ugly.

It look ugly, but it was not my intention. I just wanted
   FOR <var> := <fromExpr> TO <toExpr> [ STEP <stepExpr> ]
extend to:
   FOR <var> := <fromExpr> TO <toExpr> [ FIXED ] [ STEP <stepExpr> ]

Here FIXED cause means, that <toExpr> is evaluated only once in the 
beginning of the loop and obtained value is used to test end loop 
condition. Nothing more!


> Sooner or later
> we will have strong typing support for we will probably need some
> type of casting. We will have to agree the syntax for casting or
> we will keep existing now ([AS <type>] suffix). It doesn't metter
> what we chose but such casting should also allow to define also
> some other attributes of value or function. One of this attribute
> can be CONST. So all what you are implementing can be also reach
> automatically with existing syntax and strong typing, f.e.:
> 
>     FOR i := dFrom TO date() AS CONST DATE STEP n AS CONST NUMERIC
>        [...]
>     NEXT

I was not thinking about strong typing (ST), when I implemented FIXED. 
But I see a difference between ST and FIXED. For me ST if a kind of 
"optional" thing. If compiler can do optimization or error checking 
based on strong typing, when it can do this. If ST information does not 
helps, it can be ignored.
FIXED changes/adjusts semantic of FOR loop. It's not "optional cause".
   nJ := 5
   FOR nI := 1 TO nJ
      IF nI == 2; nJ += 2
      ENDIF
      ? nI
   NEXT
This loop is executed 7 times, but the same source with:
   FOR nI := 1 TO nJ FIXED
only 5 times, and "FIXED" could not be ignored by compiler.

This code:
   FOR nI := 1 TO nJ AS CONST USUAL
      IF nI == 2; nJ += 2
      ENDIF
   NEXT
makes me feeling, what I'm helping compiler to do the job by writing "AS 
CONST USUAL", but if I'll omit it, the result will be the same.

Of cause, if we will define that AS CONST *must* be used by compiler, we 
will have the same result like using FIXED. I have no objection. I just 
noticed that, we are lazy very often and we force a poor computer to 
calculate LEN(aI) many times in a loop, even if it is completely 
unnecessary. And I've tried to find a solution a good for both a 
computer and programmer.

BWT, this type definition:
    LOCAL aI AS CONST ARRAY OF NUMERIC OR CONST ARRAY OF DATE
looks ugly. It's nicer to write:
    LOCAL_NUMERIC nI
than
    LOCAL nI AS NUMERIC
It could be a question of habit, I've never used to write AS SOMETHING.


>>   FOR [LOCAL] <var> := <expFrom> ...
>> What does it mean LOCAL? Is it possible to define new locals inside loop 
>> statement, like C++: for(int i=0; i<10; i++) ?
> 
> Exactly. And here PARAMETERS can be source of problems because in each place
> where you access new LOCAL <var> value you will have to well know its offset
> so you will have to calculate it from base value or you will have to calculate
> stack offset dynamically.....

I had no intention to add LOCAL cause to FOR loop and help lazy 
programmers to write:
   FOR LOCAL nI := 1 TO LEN(aI)
      ? aI[nI]
   NEXT
instead of:
   LOCAL nI
   FOR nI := 1 TO LEN(aI)
      ? aI[nI]
   NEXT

My intention was to add FIXED cause and help lazy programmers to write:
   LOCAL nI
   FOR nI := 1 TO LEN(aI) FIXED
      ? aI[nI]
   NEXT
instead of:
   LOCAL nI, nJ
   nJ := LEN(aI)
   FOR nI := 1 TO nJ
      ? aI[nI]
   NEXT


Best regards,
Mindaugas

From dbtopas at dbtopas.lt  Fri Oct 12 14:36:00 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Oct 12 10:35:50 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <20071012064340.GB6863@localhost.localdomain>
References: <20071011211921.GA4812@localhost.localdomain>	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>
	<20071012064340.GB6863@localhost.localdomain>
Message-ID: <470FBE90.6020708@dbtopas.lt>

> This is sth what I do not fully understand. I read the description
> in doc/en/strotype.txt but I have serious doubts what the "Adaptive Type
> Checking" means. For sure it cannot work as described because it's not
> possible to detect at compile time the wrong line in code like:
> ...
> 
> and this is trivial example but what to do with more complicated
> using loops, f.e.:


Hi,


for me it's clear what "Adaptive Type Checking" means, but it's really 
complicated to do in a loops, even if theoretical optimization is 
possible. I knew nothing about doc/en/strotype.txt some time ago, but I 
was trying to find a way to optimize a loop and reach a speed similar to 
C language loop speed:
   FUNC AAA()
   LOCAL cI, nI

     cI := ""
     FOR nI := 1 TO 50
       cI += STR(nI)
     NEXT
   RETURN cI

It's clear that nI could be optimized to C integer variable. My goal was 
to generate code like this:

static int __hb_strongproc_0000( PFRAME pFrame )
{
   // hb_stongInit() creates array of item pointers to local variables
   // used for stong typing. This array is released on HB_P_ENDPROC
   //
   // hb_stongInit( PFRAME pFrame, int iLocalNo, ... )
   //    list of iLocalNo terminated by zero

   hb_strongInit( pFrame, 2, 0 );

   // Now, item of 2nd local can be accessed using pFrame->locals[ 0 ]

   pFrame->locals[ 0 ]->type = HB_IT_INTEGER;
   pFrame->locals[ 0 ]->asInteger.value = 1;
   return 0;
}

static int __hb_strongproc_0001( PFRAME pFrame )
{
   pFrame->locals[ 0 ]->asInteger.value += 1;
   if ( pFrame->locals[ 0 ]->asInteger.value <= 50 )
      return -17; // evaluate loop one more time
   pFrame->lineno = 8;
   return 0;
}


HB_FUNC( AAA )
{
    static const BYTE pcode[] =
    {
	HB_P_FRAME, 2, 0,	/* locals, params */
	HB_P_LINE, 4, 0,	/* 4 */
	HB_P_PUSHSTRSHORT, 1,	/* 1 */
	0,
	HB_P_POPLOCALNEAR, 1,	/* CI */

//	HB_P_LINE, 5, 0,	/* 5 */
//	HB_P_ONE,
//	HB_P_PUSHUNREF,
//	HB_P_POPLOCALNEAR, 2,	/* NI */
//	HB_P_JUMPNEAR, 22,	/* 22 (abs: 00040) */
//      Optimized by:
	HB_P_STRONGPROC, 0, 0,

	HB_P_LINE, 6, 0,	/* 6 */
	HB_P_PUSHLOCALREF, 1, 0,	/* CI */
	HB_P_PUSHFUNCSYM, 1, 0,	/* STR */
	HB_P_PUSHLOCALNEAR, 2,	/* NI */
	HB_P_FUNCTIONSHORT, 1,
	HB_P_PLUSEQPOP,

//	HB_P_LINE, 5, 0,	/* 5 */
//	HB_P_LOCALINCPUSH, 2, 0,	/* NI */
//	HB_P_PUSHBYTE, 50,	/* 50 */
//	HB_P_GREATER,
//	HB_P_JUMPFALSENEAR, 233,	/* -23 (abs: 00020) */
//	HB_P_LINE, 8, 0,	/* 8 */
//      Optimized by:
	HB_P_STRONGPROC, 1, 0,

	HB_P_PUSHLOCALNEAR, 1,	/* CI */
	HB_P_RETVALUE,
	HB_P_ENDPROC
    };
    hb_vmExecute( pcode, symbols );
}


The most difficult was that I had to analyze PCODE, but not the 
expression tree made by parser. It's difficult to determine which local 
variables were initialized to integer values and which variables had an 
undetermined type, if code structure is linked by plain jumps like we 
have in PCODE.
One more problem was references. If variable is assigned to integer, it 
is not necessary be HB_IT_INTEGER type, it could be reference to 
integer. This makes optimization to C code more difficult.

>>> C-typed variables are used for compile time optimization.
>>> For usual-typed variables special RT code is added which
>>> can check type also at runtime in devel mode.
>> C-typed stuff lead a bit far at this point, doesn't it?
> 
> Why. We can generate C code instead of PCODE with -gc3. Such
> C-typed variables can be optimized very strong giving code
> hundreds times faster.

We do not need to use as much types as FlagShip: BYTE, WORD,...
It's enough to have INTEGER and FLOAT. We can use HB_LONG and double 
C-type for optimized C code. NUMERIC type does not let to optimize C 
code and access item's value directly, because it is still not clear is 
it HB_IT_INTEGER, HB_IT_LONG or HB_IT_DOUBLE.


Best regards,
Mindaugas

From druzus at acn.waw.pl  Fri Oct 12 15:20:27 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 12 11:20:33 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <200710121219.55812.teo@windtelsoft.com>
References: <20071011211921.GA4812@localhost.localdomain>
	<200710121219.55812.teo@windtelsoft.com>
Message-ID: <20071012192027.GA10596@localhost.localdomain>

On Fri, 12 Oct 2007, Teo Fonrouge wrote:
> Will function/procedures be overloaded depending of their return value type 
> and/or also for their parameter's type value's ?. e.g.:
> function overload on RETURN type:
> <prg>
> FUNCTION GetValue AS DATE
> ...
> RETURN date
> FUNCTION GetValue AS NUMERIC
> ...
> RETURN numeric
> </prg>
> function overload on PARAMETERS type's:
> <prg>
> PROCEDURE AddMenuItem( TMenuItem )
> ...
> RETURN
> PROCEDURE AddMenuItem( TLabel, TAction )
> ...
> RETURN
> </prg>

I do not plan to introduce function overloading. At least now
I see much more potential problems with it then benefits.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct 12 16:00:51 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 12 12:00:59 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <470FBE90.6020708@dbtopas.lt>
References: <20071011211921.GA4812@localhost.localdomain>
	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>
	<20071012064340.GB6863@localhost.localdomain>
	<470FBE90.6020708@dbtopas.lt>
Message-ID: <20071012200051.GB10596@localhost.localdomain>

On Fri, 12 Oct 2007, Mindaugas Kavaliauskas wrote:
> for me it's clear what "Adaptive Type Checking" means, but it's really 
> complicated to do in a loops, even if theoretical optimization is 
> possible. I knew nothing about doc/en/strotype.txt some time ago, but I 
> was trying to find a way to optimize a loop and reach a speed similar to 
> C language loop speed:
>   FUNC AAA()
>   LOCAL cI, nI
> 
>     cI := ""
>     FOR nI := 1 TO 50
>       cI += STR(nI)
>     NEXT
>   RETURN cI
> It's clear that nI could be optimized to C integer variable. My goal was 
> to generate code like this:

This can be quite easy detected and optimized when we will eliminate
online PCODE generation. But I do not see corelation with addaptive
type checking defined as in doc/en/strotype.txt. This text suggested
that compiler will automatically give proper type to variable after
assignment what of course is cannot work due to condtional jumps and
loops.

> static int __hb_strongproc_0000( PFRAME pFrame )
> {
>   // hb_stongInit() creates array of item pointers to local variables
>   // used for stong typing. This array is released on HB_P_ENDPROC
>   //
>   // hb_stongInit( PFRAME pFrame, int iLocalNo, ... )
>   //    list of iLocalNo terminated by zero
>   hb_strongInit( pFrame, 2, 0 );
>   // Now, item of 2nd local can be accessed using pFrame->locals[ 0 ]
>   pFrame->locals[ 0 ]->type = HB_IT_INTEGER;
>   pFrame->locals[ 0 ]->asInteger.value = 1;
>   return 0;
> }
> static int __hb_strongproc_0001( PFRAME pFrame )
> {
>   pFrame->locals[ 0 ]->asInteger.value += 1;
>   if ( pFrame->locals[ 0 ]->asInteger.value <= 50 )
>      return -17; // evaluate loop one more time
>   pFrame->lineno = 8;
>   return 0;
> }
> 
> HB_FUNC( AAA )
> {
>    static const BYTE pcode[] =
>    {
> 	HB_P_FRAME, 2, 0,	/* locals, params */
> 	HB_P_LINE, 4, 0,	/* 4 */
> 	HB_P_PUSHSTRSHORT, 1,	/* 1 */
> 	0,
> 	HB_P_POPLOCALNEAR, 1,	/* CI */
> //	HB_P_LINE, 5, 0,	/* 5 */
> //	HB_P_ONE,
> //	HB_P_PUSHUNREF,
> //	HB_P_POPLOCALNEAR, 2,	/* NI */
> //	HB_P_JUMPNEAR, 22,	/* 22 (abs: 00040) */
> //      Optimized by:
> 	HB_P_STRONGPROC, 0, 0,
> 
> 	HB_P_LINE, 6, 0,	/* 6 */
> 	HB_P_PUSHLOCALREF, 1, 0,	/* CI */
> 	HB_P_PUSHFUNCSYM, 1, 0,	/* STR */
> 	HB_P_PUSHLOCALNEAR, 2,	/* NI */
> 	HB_P_FUNCTIONSHORT, 1,
> 	HB_P_PLUSEQPOP,
> 
> //	HB_P_LINE, 5, 0,	/* 5 */
> //	HB_P_LOCALINCPUSH, 2, 0,	/* NI */
> //	HB_P_PUSHBYTE, 50,	/* 50 */
> //	HB_P_GREATER,
> //	HB_P_JUMPFALSENEAR, 233,	/* -23 (abs: 00020) */
> //	HB_P_LINE, 8, 0,	/* 8 */
> //      Optimized by:
> 	HB_P_STRONGPROC, 1, 0,
> 
> 	HB_P_PUSHLOCALNEAR, 1,	/* CI */
> 	HB_P_RETVALUE,
> 	HB_P_ENDPROC
>    };
>    hb_vmExecute( pcode, symbols );
> }

I do not think that we should make such optimization in -gc2.
Much more efficient it can be done in -gc3. Just simply we can
use native C variable as nI holder without helper functions
like __hb_strongproc*() and accessing HB_ITEM internals.

> The most difficult was that I had to analyze PCODE, but not the 
> expression tree made by parser. It's difficult to determine which local 
> variables were initialized to integer values and which variables had an 
> undetermined type, if code structure is linked by plain jumps like we 
> have in PCODE.

Exactly. Now it will be nightmare to make full optimization inside
"PCODE to C translator" and -gc3 today is only such translator. With
some strong typing support which can be verified during compilation
some simple things like above loop can be optimized but it's not
worth to invest time in deeper optimizations which will be much
much easier to do when we will operate on HB_EXPR structures then
on PCODEs. PCODE should be generate in backend not online in core
compiler code. And this will be changed. Step by step in spare time
by me, by you and I hope other developers. I would like to join this
modification in rewriting grammar rules (there are things which
need serious cleanup with HB_EXPR type updating but beta stage
is not good moment for it) and parts of compiler code which
are still on pure GPL to use license - a more restrictive then
GPL+harbour exception but which will allow to link compiler library
with commercial binaries. I think that if we force publishing any
modifications to compiler code here and including patches to well
know Harbour source snapshots (also patches for VM and RTL if compiler
modifications needs modified VM and/or RTLs) with distributed binaries
then it will be enough for us. We can also force showing some information
about Harbour compiler by programs using Harbour compiler library.

> One more problem was references. If variable is assigned to integer, it 
> is not necessary be HB_IT_INTEGER type, it could be reference to 
> integer. This makes optimization to C code more difficult.

Just like detecting local detaching but I do not think we should
try to optimize everything. IMHO optimizing only local variables
with well known scope and history is enough in 90% of cases at
least when programmers knows about it. We should not try to dig
too deeply or we will end as VO replacement ;-)

> >Why. We can generate C code instead of PCODE with -gc3. Such
> >C-typed variables can be optimized very strong giving code
> >hundreds times faster.
> We do not need to use as much types as FlagShip: BYTE, WORD,...
> It's enough to have INTEGER and FLOAT. We can use HB_LONG and double 
> C-type for optimized C code. NUMERIC type does not let to optimize C 
> code and access item's value directly, because it is still not clear is 
> it HB_IT_INTEGER, HB_IT_LONG or HB_IT_DOUBLE.

I agree and I never wanted to introduced all such types. I only presented
what FS has. For us it's enough to add INT and maybe FLOAT/REAL.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct 12 17:00:33 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 12 13:00:39 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>
References: <20071011211921.GA4812@localhost.localdomain>
	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>
	<20071012064340.GB6863@localhost.localdomain>
	<3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>
Message-ID: <20071012210033.GA10898@localhost.localdomain>

On Fri, 12 Oct 2007, Szak?ts Viktor wrote:
> Yes. Is there a way to change those translates to make them
> compatible with ST syntax?

The same problem as with IN operator. Each such modification
will break some potentially existing valid Clipper rules. It
cannot be resolved by PP modification without side effects :-(
IMHO hacking PP is bad idea. From the problem which exist in
known places and for known constructions which does not exist
in native Clipper code we will create problem with side effects
and unexpected behavior in valid Clipper code which may use AS
identifier in PP directives.
We can leave it as is, we may define that AS <type> should not
be used in FUNCTION/PROCEDURE statements but only in DECLARE/PROTOTYPE
(but the problem of casting is still open) or we can can change AS to
something what will not break PP rules, f.e. '.':

  FUNCTION REPLICATE( cVal .CHARACTER, nVal .NUMERIC ) . CHARACTER

or '.as.':

  FUNCTION REPLICATE( cVal .AS. CHARACTER, nVal .AS.NUMERIC ) .AS.CHARACTER

In both cases if type needs some other keywords we can use . to
concatenate them so it will still be single expression for PP, f.e.:
    FOR i := 1 TO LEN( aL ) .AS.NUMERIC.CONST
or simpler:
    FOR i := 1 TO LEN( aL ) .AS.CONST

The space before and after . are unimportant.

> >Why. We can generate C code instead of PCODE with -gc3. Such
> >C-typed variables can be optimized very strong giving code
> >hundreds times faster. For other output can be replaced by
> >standard NUMERIC values. We do not have to introduce them
> >but if I will work on strong type code then my code will be
> >ready to use them. For me is one of the most important features
> >of strong typing.
> Do you think it's possible to optimize based on regular Clipper
> types?

Some more precise information like INTEGER or REAL can greatly help
in optimization by reducing range of possible results and operations
but Clipper types are usually enough. Anyhow if we add alternative
syntax like LOCAL_INT (we do not need and IMHO we shouldn't implement
all FS C types) then we can generate compile time errors when programmer
will want to pass such variable by reference or detach in codeblock.
Using standard types we can only silently disable optimization though
even this can be resolved by type attributes, see below.

> >Not such far. It can be quite easy added for -gc3 output. I do not  
> >like
> >#pragma begindump/enddump and hb_inline(<x,...>) { ... } but people  
> >use
> >it. I also for some short life code use these constructions.
> I personally would left these out, since the fact that we're
> now using C compilers to generate the final .obj is not a language
> feature, but a technical implementation side-effect which can
> change in the future (if we finally implement native .obj generation
> for example). So, if we support these things now, we're effectively
> tying the language to a C compiler forever.

Then it will not be optimized - nothing wrong will happen. We can
also add assembler output as backend (it will be even easier to
implement then current -gc3) and link Harbour compiler with some
free assembler compiler so we will have optimization and .obj files
together :-). If sth will not be optimized then final code will be
slower but if it's possible to optimize sth then why not do that?

> This is one reason why I wouldn't tie Clipper too much to C types
> too.

We agree here - and as you remember I was actively removing all
#pragma begindump from core code. Now we do not have any and I'd
like to keep it.

> I'd find it friendly if this C type <-> Clipper type assignment
> would be done automatically by the compiler. Granted, a NUMERIC
> could only be emulated with a C float, but even then, we would be
> much faster than with plain unoptimized PCODE.

We do not have to define it as C types. As I said above adding
INT and REAL is enough in many cases to easy make nice optimization.
With NUMERIC only is a little bit harder with compiler like we
have now because we have to analyze final PCODE not some meta
code which will use HB_EXPR structures. Using some additional
type attributes we can even generate compile time error or warning
without LOCAL_* declaration when variable cannot be optimized
due to passing by reference or detaching in codeblock. F.e.:

    LOCAL i .AS.INT.OPT
    LOCAL n .AS.NUMERIC.OPT

INT and REAL does not have to be even declared types. They can
be NUMERIC type attribute, f.e.:
    LOCAL i .AS.NUMERIC.INT.OPT

> >>While digging on the net I've found that dBase's predecessor, named
> >>Vulcan, was originally developed by C. Wayne Ratliff at the JPL (Jet
> >>Propulsion Laboratory). Maybe we should send him a postcard 8)
> >
> >I've also spent some time with goggle and seems that AS <type> is used
> >also by CULE. And all these compilers use FS like syntax:
> >    LOCAL v1, v2, ..., vN AS <type>
> >
> >not like current:
> >    LOCAL v1 AS <type>, v2 AS <type>, ..., vN AS <type>
> Latter seems more consistent to me with the expected Clipper syntax,
> also more useful in real life.

'Later' means current version with 'AS <type> repeated after each variable?
If yes then it means that we are dropping compatibility with VO and in such
case I suggest to use proposed .AS.<type> - we will not be compatible with
VO but all existing Clipper PP rules will work also for typed variables
and casted expressions.

> >I'm interesting in default initialization for typed variables done
> >by this compilers. F.e. for the code I sent.
> Which code exactly? I can try it for you.

Thank you.

   proc main()
      local n1, n2 as numeric    /* 0 */
      local d1, d2 as date       /* ctod("") */
      local l1, l2 as logical    /* .F. */
      local c1, c2 as character  /* "" */
      local a1, a2 as array      /* {} */
      local b1, b2 as codeblock  /* {||NIL} */
      local o1, o2 as object     /* special object, gen RTE for any messages */
      ? valtype(n1), n1, valtype(n2), n2
      ? valtype(d1), d1, valtype(d2), d2
      ? valtype(l1), l1, valtype(l2), l2
      ? valtype(c1), c1, valtype(c2), c2
      ? valtype(a1), a1, valtype(a2), a2
      ? valtype(b1), b1, valtype(b2), b2
      ? valtype(o1), o1, valtype(o2), o2
   return


best regards,
Przemek
From mbelgrano at deltain.it  Fri Oct 12 17:00:49 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Oct 12 13:01:00 2007
Subject: R: [Harbour] Generic dialect concept
In-Reply-To: <20071012055936.GA6863@localhost.localdomain>
References: <0FB74203-FFBB-4534-BA9C-D11783AFACFE@syenar.hu><470E4B27.3112.E598EA@rglab.przesiew.imid.med.pl><001d01c80c25$37abfa40$0303a8c0@hbco><20071011200403.GA4079@localhost.localdomain><EC3EE616-1CB6-47A2-9DD8-1AE40E3DCDD4@syenar.hu>
	<20071012055936.GA6863@localhost.localdomain>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809AA8E@SRV02.deltain.net>

Will ,in next year (2008), be ready a real .NET support ?

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Przemyslaw Czerpak
Inviato: venerd? 12 ottobre 2007 8.00
A: Harbour Project Main Developer List.
Oggetto: Re: [Harbour] Generic dialect concept


> >And the most important thing. Never, never and once again never
> >we should start discussion about .NET support or sth similar
> >because most of our extensions is 1% of modifications which
> >are necessary for .NET real support.
> I'm not sure what do you have in mind.
> If you mean the .NET output (CLI support), I'd delete it right away,
> along with the Java output, since none of them ever worked.

This should be done long time ago. It's a peace of unusable code
which I had to update in last years after each compiler modification
to not break the whole compilation. Such nonworking things should
never be committed to core code. So please delete it - it will make
all developers life easier.
I was talking about real .NET support. It cannot be done now but in
the future when we will eliminate online PCODE generation and introduce
compiler expression for statement then we can think about some working
solution for .NET But we will also have to add many other optional
extensions to be able to play well with other .NET languages.

> >Support for different xbase dialects is in 90% side effects of  
> >extensions
> >necessary to create applications for actually used operating  
> >systems and
> >environments, which may exchange data and/or code with other programs
> >written in different languages, working on different computers  
> >controlled
> >by different operating systems, etc. Many things were not possible  
> >20 years
> This is not true.
> There is only a minimal set of cases when Clipper RTL functions
> had to be extended to accomodate for other environments, but
> I think all of these are covered properly now. (filename
> case-sensitivity, long filenames, UI output, etc)
> The rest of special OS interfaces and OS support can be solved
> using separate libraries (contribs). But you _never_ have to
> change $, [], SWITCH, AINS(), TRY/END behaviour to effectively
> create applications under _all_ existing enviromnents.

The above is not true. As I said no real .NET support but I was
joking. Now looks that you want to force it.

[...]
> ...my English is starting to fail on me, but I hope you get what
> I had in mind.

I think so but it does not mean that I agree in with you in all
cases. In many yes even if I express different opinion here but
in some I feel like you are using coin ;-) to decide what is
redundant or not. Let's return to more productive things.

best regards,
Przemek

ps. I'll answer here to some messages in this thread save time
    which begins to be realy limited for me recently.

    Bill, I have nothing personal agains you in my previous message.
    Just simply I chosed one of message to show some other opinions.

    Marek, I agree that strong typing can be important feature but
    it's nothing more then our personal preferences and you've just
    confirmed my opinion in one of you last messages. I know people
    for whom weakly typed variables is the most important Clipper
    feature. We may not like it but we should respect such opinion.

    Mike, we do not have to be compatible with every one. We will
    be compatible only with this xbase dialects for which someone
    will want to add support. Probably because it may be easier then
    inspecting thousands of lines in existing code. It's not a goal
    and never was. But it's possibility and I strongly prefer to
    define clear conditions for such extensions now instead of waiting
    for "wild" solutions ;-). I do not plan to be watchdog for all
    commits in Harbour repository in the rest of my life.
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at acn.waw.pl  Fri Oct 12 18:10:19 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 12 14:10:24 2007
Subject: R: [Harbour] Generic dialect concept
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809AA8E@SRV02.deltain.net>
References: <20071012055936.GA6863@localhost.localdomain>
	<AFB948164110ED43B5EB849E8DEEF03809AA8E@SRV02.deltain.net>
Message-ID: <20071012221019.GB10898@localhost.localdomain>

On Fri, 12 Oct 2007, Massimo Belgrano wrote:
> Will ,in next year (2008), be ready a real .NET support ?

For sure not by me. Seeing .NET in real world and some application
for PocketPC I can only say that .NET is a joke. Now for sure I will
not invest even 1 day in .NET port (BTW it will be most time consuming
port). Maybe in few years things will look differently so I do no say
that I definitely will not work on such port. Maybe I will but not in
2008 - I do not believe that .NET will make such progress in one year.
Now the results of using .NET applications in PocketPC cause that
in spare time I'm looking for available C compilers I can used in
native PocketPC Harbour port. Today my personal opinion about .NET
is fatal and I do not see any reason to invest time to "downgrade"
Harbour to .NET platform ;-). Of course it's my personal opinion
and I do not want to start discussion about .NET on this list.

best regards,
Przemek
From teo at windtelsoft.com  Fri Oct 12 19:00:53 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Fri Oct 12 15:01:09 2007
Subject: [Harbour] -gc3 and SWITCH/END Error
Message-ID: <200710121800.53787.teo@windtelsoft.com>

Hello,

Harbour creates faulty C code when a SWITCH/END construct is in the source 
prg.


best regards

Teo
From alex_degarate at hotmail.com  Fri Oct 12 19:08:10 2007
From: alex_degarate at hotmail.com (Alejandro de Garate)
Date: Fri Oct 12 15:08:14 2007
Subject: [Harbour] STRONG TYPED VARIABLES
Message-ID: <BAY137-F3115BC18C5567152F2D12B85A00@phx.gbl>

<type: USUAL | ANYTYPE,
          CHARACTER | STRING,
          NUMERIC,
          DATE,
          LOGICAL,
          CODEBLOCK,
          ARRAY,
          OBJECT,
          CLASS <className> >

[..]

Would be the use of Strong typed vars help us to identified if a string is a 
"normal" string (as array
of bytes) or the several kinds of strings we could have ?

Its seems to me (at least) we need some way to know if a string are only 
bytes, or unicode char (and what flavour UTF-8, UTF-16, etc. ) and 
aditionally will be a bonus if we can know at runtime
if the string is normal of packed in any way.

Could be useful if we would know at runtime if a string are bytes [0..255] 
or have special meaning like a unicode string, UUEncode 64, binary, picture 
(different types) or different formats...

Alejandro

P/S

Przemek are doing a terrific grat work, and you guys are given a wide range 
of ideas wich cover the
whole Clipper language, some sound very interesting and others not, but we 
don't need to lost the focus on what Harbour is: a Clipper clone.

Hope you can understand me, we are all in the same boat and this discussion 
or debate brings new
ideas and new points of view, but finally we must agree on some point, don't 
let these little fights
scale too much :)

Maybe an additional library with really new extensions to the "Harbour 
language" could be made.
People who wanted "those extensions" simple link that lib.

best regards

_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today it's FREE! 
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/

From druzus at acn.waw.pl  Fri Oct 12 19:34:21 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 12 15:34:27 2007
Subject: [Harbour] -gc3 and SWITCH/END Error
In-Reply-To: <200710121800.53787.teo@windtelsoft.com>
References: <200710121800.53787.teo@windtelsoft.com>
Message-ID: <20071012233421.GC10898@localhost.localdomain>

On Fri, 12 Oct 2007, Teo Fonrouge wrote:
> Hello,
> Harbour creates faulty C code when a SWITCH/END construct is in the source 
> prg.

Fixed - thanks for information.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct 12 20:12:26 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 12 16:12:33 2007
Subject: [Harbour] 2007-10-13 02:12 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710130012.l9D0CQWi027414@31-mo5-4.acn.waw.pl>

2007-10-13 02:12 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/doc/destruct.txt
    * update description for multiple inherited destructors

  * harbour/source/compiler/complex.c
    * _HB_CLASS and _HB_MEMBER are not longer reserved words

  * harbour/include/hbclass.ch
  * harbour/include/hbexprop.h
  * harbour/include/hbexprb.c
  * harbour/source/macro/macro.y
  * harbour/source/compiler/harbour.y
    * formatting and minor code cleanup

  * harbour/source/compiler/hbusage.c
    * added missing information about -undef:<id> switch to usage
      description

  * harbour/source/compiler/gencc.c
    ! fixed bug reported by Teo in code generated for SWITCH statement

best regards
Przemek
From druzus at acn.waw.pl  Fri Oct 12 20:14:08 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 12 16:14:13 2007
Subject: [Harbour] 2007-10-13 02:13 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710130014.l9D0E8QY027494@31-mo5-4.acn.waw.pl>

2007-10-13 02:13 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/macro/macro.yyc
  * harbour/source/macro/macro.yyh
  * harbour/source/compiler/harbour.yyc
  * harbour/source/compiler/harbour.yyh
    * updated for recent modifications

best regards
Przemek
From mpaliwoda at interia.pl  Sat Oct 13 03:02:52 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Oct 12 23:02:58 2007
Subject: R: [Harbour] Generic dialect concept
In-Reply-To: <20071012221019.GB10898@localhost.localdomain>
References: <20071012055936.GA6863@localhost.localdomain>	<AFB948164110ED43B5EB849E8DEEF03809AA8E@SRV02.deltain.net>
	<20071012221019.GB10898@localhost.localdomain>
Message-ID: <47106D9C.8050503@interia.pl>

Hi Przemek,

>> Will ,in next year (2008), be ready a real .NET support ?
> 
> For sure not by me. Seeing .NET in real world and some application
> for PocketPC I can only say that .NET is a joke. Now for sure I will
> not invest even 1 day in .NET port (BTW it will be most time consuming
> port). Maybe in few years things will look differently so I do no say
> that I definitely will not work on such port. Maybe I will but not in
> 2008 - I do not believe that .NET will make such progress in one year.
> Now the results of using .NET applications in PocketPC cause that
> in spare time I'm looking for available C compilers I can used in
> native PocketPC Harbour port. Today my personal opinion about .NET
> is fatal and I do not see any reason to invest time to "downgrade"
> Harbour to .NET platform ;-). Of course it's my personal opinion

You like to provoke, don't you ? ;-)
I really like your style of writing ;-).

Let me _disagree_ with you :), without starting lengthly
disscussion about NET. One note however - I've read opinions
that IronPython works 1.5 times quicker than native Python
port on Windows.

As to PocketPC port. I reviewed available options regarding native
PocketPC port. My conclusion was that the simplest way would be to
use "cegcc" (GCC port for PocketPC). I even partially succeeded in
establishing a compilation environment on Windows and in compiling
few Harbour libraries, but I concluded that Harbour needs serious
review/modifications to compile it in Unicode mode, and I feel
myself "too limited" to make them unfortunately :(.

BTW,
PocketPC port was the reason I introduced a way to crosscompile
Harbour using Makefile.bc, Makefile.vc and Makefile.gc.

-- 

Marek

----------------------------------------------------------------------
Bedac w toalecie korzystala z ...

>>>   http://link.interia.pl/f1c16

From druzus at acn.waw.pl  Sat Oct 13 06:48:13 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 13 02:48:21 2007
Subject: [Harbour] 2007-10-13 12:48 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710131048.l9DAmD54001200@31-mo5-4.acn.waw.pl>

2007-10-13 12:48 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/compiler/hbdead.c
    % minor improvement

best regards
Przemek
From ptucker at sympatico.ca  Sat Oct 13 08:54:08 2007
From: ptucker at sympatico.ca (Paul Tucker)
Date: Sat Oct 13 04:54:22 2007
Subject: [Harbour] STRONG TYPED VARIABLES
References: <20071011211921.GA4812@localhost.localdomain><3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu><20071012064340.GB6863@localhost.localdomain><3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>
	<20071012210033.GA10898@localhost.localdomain>
Message-ID: <010701c80d98$24c4b380$6a00a8c0@PAUL>

 PC> We can leave it as is, we may define that AS <type> should not
 PC> be used in FUNCTION/PROCEDURE statements but only in DECLARE/PROTOTYPE
 PC> (but the problem of casting is still open) or we can can change AS to
 PC> something what will not break PP rules, f.e. '.':

 PC>   FUNCTION REPLICATE( cVal .CHARACTER, nVal .NUMERIC ) . CHARACTER

 PC> or '.as.':

 PC>   FUNCTION REPLICATE( cVal .AS. CHARACTER, nVal .AS.NUMERIC )
 PC> .AS.CHARACTER

Ugh to both.

Can't we just teach the PP about 'state'  FWIW, I'm pretty sure there are a 
couple of compilers that seem to have solved this.

Palu 

From myorg63 at mail.ru  Sat Oct 13 11:12:13 2007
From: myorg63 at mail.ru (Petr Chornyj)
Date: Sat Oct 13 11:12:17 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <010701c80d98$24c4b380$6a00a8c0@PAUL>
References: <20071011211921.GA4812@localhost.localdomain>
	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>
	<20071012064340.GB6863@localhost.localdomain>
	<3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>
	<20071012210033.GA10898@localhost.localdomain>
	<010701c80d98$24c4b380$6a00a8c0@PAUL>
Message-ID: <13190551.post@talk.nabble.com>




Paul Tucker wrote:
> 
>  
> Ugh to both.
> 
> 

Not for all :)

In FreeBasic: 

Declare Function GetFont(ByVal FontName As String) As Integer 
Dim i As Integer
Dim s As String

In PureBasic: 

Prototype.l GetFont( FontName.s )
Global i.l
Global s.s

s = "123"
i.l = s         // i == 123

Also in FreeBASIC version 0.17 introduces a -lang command-line option, used
to 
change the language compatibility mode.

>From doc:
    It was needed to allow FB to support object-orientation in the future, 
without crippling the QuickBASIC support or breaking compatibility with old
FB
sources, and without making FB difficult to maintain with n-different 
versions of pretty much the same packages. The QB support can be improved
now too, if needed, without breaking the sources written specifically for
FB.

Reminds something? :)

Petr



-- 
View this message in context: http://www.nabble.com/STRONG-TYPED-VARIABLES-tf4610060.html#a13190551
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From xfangsoft at gmail.com  Sat Oct 13 12:01:46 2007
From: xfangsoft at gmail.com (Xuan Fang)
Date: Sat Oct 13 12:01:57 2007
Subject: [Harbour] FiveWin FREE KERNEL
Message-ID: <816114c70710130901w651b6bd6u3ffe0686307a8f40@mail.gmail.com>

Hello,

FiveWin FREE KERNEL is a lib with all internal functions write from
scratch with full source code. You can recompile FULL FiveWin and work
with differents version of xHarbour.

I need beta tester users. Please if anyone is interested send an email
to xfangsoft@gmail.com

Xuan Fang
??
xfangsoft@gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20071013/d17de943/attachment.html
From mbelgrano at deltain.it  Sun Oct 14 06:15:13 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Oct 14 11:15:27 2007
Subject: R: [Harbour] Future
In-Reply-To: <3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>
References: <20070820141400.GC13960@localhost.localdomain>
	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>

How harbour go to Future?

Resolve Dependencies to GUI Subsystem
currently cannot be replaced or substituted with another GUI system
dedicated to a specific job

Transparent Access to Operating System's APIs and Structures
Provide the language elements necessary to handle structures and access
to OS APIs on the language level

Support of the UNICODE Character Encoding Standard
Support for UNICODE character encoding within the harbour runtime system
and GUI and all database engines.




From mbelgrano at deltain.it  Sun Oct 14 08:48:41 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Oct 14 13:48:58 2007
Subject: [Harbour] Wich linux distro use Przemyslaw Czerpak?
In-Reply-To: <20070717212206.730B.SSBBS@mail.zzz.com.tw>
References: <002101c7c791$a812d3e0$1700000a@PcJuanxp><20070717124335.GB21023@localhost.localdomain>
	<20070717212206.730B.SSBBS@mail.zzz.com.tw>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809AA92@SRV02.deltain.net>

I want start experiences with linux and harbour
So I am interested to follow the path harbour and Przemyslaw Czerpak

Witch Linux distribution use Przemyslaw Czerpak?

Thanks in advance for anybody want share linux-harbour-experiences




From antonioharbour at gmail.com  Sun Oct 14 09:20:39 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Oct 14 14:21:05 2007
Subject: [Harbour] Wich linux distro use Przemyslaw Czerpak?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809AA92@SRV02.deltain.net>
Message-ID: <471225cb.2787420a.631d.4743@mx.google.com>

Massimo, 

> Thanks in advance for anybody want share linux-harbour-experiences

Ubuntu 7.04

Regards,

Antonio





From a.jurkiewicz at abix.info.pl  Sun Oct 14 09:26:38 2007
From: a.jurkiewicz at abix.info.pl (ABIX - Adam Jurkiewicz)
Date: Sun Oct 14 14:26:30 2007
Subject: [Harbour] Wich linux distro use Przemyslaw Czerpak?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809AA92@SRV02.deltain.net>
References: <002101c7c791$a812d3e0$1700000a@PcJuanxp>
	<20070717212206.730B.SSBBS@mail.zzz.com.tw>
	<AFB948164110ED43B5EB849E8DEEF03809AA92@SRV02.deltain.net>
Message-ID: <200710141626.38522.a.jurkiewicz@abix.info.pl>

Dnia niedziela, 14 pa?dziernika 2007 15:48, Massimo Belgrano napisa?:
> I want start experiences with linux and harbour
> So I am interested to follow the path harbour and Przemyslaw Czerpak
>
> Witch Linux distribution use Przemyslaw Czerpak?
>
> Thanks in advance for anybody want share linux-harbour-experiences
Przemek use RedHat 7 and OpenSuSE 10.
I use OpenSuSE 10.2.

Harbour works also on other rpm based distros ...

Best Regards,
Adam
-- 
ABIX - Linuksowe Systemy Wspomagania Biznesu
Wsparcie fiskalne  : http://www.abix.info.pl/wsparcie/
Skype : abix_adamj | Gadu-Gadu : 302315 | JabberID: adasiek@jabber.text.pl
Wsparcie aplikacji : http://groups-beta.google.com/group/abix-rcsoft?hl=pl
GnuPG Key => http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xA810E4FB
From lorenzo.fiorini at gmail.com  Sun Oct 14 10:07:12 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Oct 14 15:07:16 2007
Subject: [Harbour] Wich linux distro use Przemyslaw Czerpak?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809AA92@SRV02.deltain.net>
References: <002101c7c791$a812d3e0$1700000a@PcJuanxp>
	<20070717124335.GB21023@localhost.localdomain>
	<20070717212206.730B.SSBBS@mail.zzz.com.tw>
	<AFB948164110ED43B5EB849E8DEEF03809AA92@SRV02.deltain.net>
Message-ID: <9257026e0710140807o42962ac5s73dc0c2ac8da76d2@mail.gmail.com>

On 10/14/07, Massimo Belgrano <mbelgrano@deltain.it> wrote:

> Thanks in advance for anybody want share linux-harbour-experiences

Fedora 7 actually.

best regards,
Lorenzo
From i at kevincarmody.com  Sun Oct 14 10:30:51 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Sun Oct 14 15:30:17 2007
Subject: R: [Harbour] Future
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>
Message-ID: <4712362B.4060007@kevincarmody.com>

Massimo Belgrano wrote:
> Support of the UNICODE Character Encoding Standard
> Support for UNICODE character encoding within the harbour runtime system
> and GUI and all database engines.
I asked about this in July.  Here is my question and Przemek's reply.
>> There are some Harbour developers who plan to add Unicode string
>> support. Would one of those developers please tell us what the current
>> status of this project is?
>>     
> I added some functions to manage Unicode data in [x]Harbour core code
> because I needed them for some GT drivers but I do not plan to add
> special string item type to HVM in the nearest future though it's possible
> and can be done in similar way to HB_IT_MEMOFLAG, f.e. HB_IT_UTF8 or
> with some other representation though here we will have problem, f.e.
> as usual MS reinvented the wheel and for U16 MS-WIndows uses little endian
> when rest of world use big endian so we will have serious problem in
> portable representation. 
>   
Przemek described current Unicode support in the following GTs.
> gtsln  - GT driver for platforms which supports slang library.
>          It's like GTCRS but instead of CURSES it uses SLANG.
>          Supported by POSIX systems (mostly different *nixes).
>          It supports Unicode input/output if compiled with slang
>          version which also supports it.
>
> gttrm  - it's like GTCRS and GTSLN but it does not use any external
>          terminal library like SLANG or CURSES and it does not use
>          any external database to extract terminal capabilities so
>          it can be compiled on any POSIX system - I'll add support
>          also for DOS/Windows in the future. It should automatically
>          detect UTF-8 terminal mode and switch internally to Unicode
>          mode if necessary. In theory is less functional then GTCRS
>          and GTSLN because I hard coded escape sequences only for few
>          terminals but because I added support also for some non
>          standard terminal extensions and I'm using very limited set
>          of output sequences then it usually works better then GTCRS
>          and GTSLN.
>          Supported by POSIX systems (mostly different *nixes)

I've written some Harbour routines for handling UTF8 on the back end.  
These can be used with current Harbour.  You can download this from 
http://kevincarmody.com/misc/unicodeconvert.prg

Kevin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20071014/0764924a/attachment.html
From harbour.01 at syenar.hu  Mon Oct 15 05:14:29 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 15 10:14:39 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <20071012210033.GA10898@localhost.localdomain>
References: <20071011211921.GA4812@localhost.localdomain>
	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>
	<20071012064340.GB6863@localhost.localdomain>
	<3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>
	<20071012210033.GA10898@localhost.localdomain>
Message-ID: <43003E33-C85D-4519-8F22-6D57385877E8@syenar.hu>

>> Which code exactly? I can try it for you.
>
> Thank you.
>
>    proc main()
>       local n1, n2 as numeric    /* 0 */
>       local d1, d2 as date       /* ctod("") */
>       local l1, l2 as logical    /* .F. */
>       local c1, c2 as character  /* "" */
>       local a1, a2 as array      /* {} */
>       local b1, b2 as codeblock  /* {||NIL} */
>       local o1, o2 as object     /* special object, gen RTE for any  
> messages */
>       ? valtype(n1), n1, valtype(n2), n2
>       ? valtype(d1), d1, valtype(d2), d2
>       ? valtype(l1), l1, valtype(l2), l2
>       ? valtype(c1), c1, valtype(c2), c2
>       ? valtype(a1), a1, valtype(a2), a2
>       ? valtype(b1), b1, valtype(b2), b2
>       ? valtype(o1), o1, valtype(o2), o2
>    return

Well, in Force 2 it doesn't compile, for VO
I had to modify some lines, here is the result:

---
    proc start()
       local n1, n2 as numeric    /* 0 */
       local d1, d2 as date       /* ctod("") */
       local l1, l2 as logical    /* .F. */
       local c1, c2 as character  /* "" */
       local a1, a2 as array      /* {} */
       local b1, b2 as codeblock  /* {||NIL} */
       local o1, o2 as object     /* special object, gen RTE for any  
messages */
       ? valtype(n1), n1, valtype(n2), n2
       ? valtype(d1), d1, valtype(d2), d2
       ? valtype(l1), l1, valtype(l2), l2
       ? valtype(c1), c1, valtype(c2), c2
       ? valtype(a1), a1, valtype(a2), a2
       ? valtype(b1), b1, valtype(b2), b2
       ? valtype(o1), o1, valtype(o2), o2
    return
---
N          0 N          0
D     .  .   D     .  .
L .F. L .F.
C C
A {[0000000000]0x00000000} A {[0000000000]0x00000000}
B {|000|0x00000000} B {|000|0x00000000}
O {(0x0000)0x00000000} CLASS  O {(0x0000)0x00000000} CLASS

Brgds,
Viktor

From druzus at acn.waw.pl  Mon Oct 15 06:08:52 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 15 11:08:58 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <43003E33-C85D-4519-8F22-6D57385877E8@syenar.hu>
References: <20071011211921.GA4812@localhost.localdomain>
	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>
	<20071012064340.GB6863@localhost.localdomain>
	<3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>
	<20071012210033.GA10898@localhost.localdomain>
	<43003E33-C85D-4519-8F22-6D57385877E8@syenar.hu>
Message-ID: <20071015110852.GA21143@localhost.localdomain>

On Mon, 15 Oct 2007, Szak?ts Viktor wrote:
> Well, in Force 2 it doesn't compile, for VO
> I had to modify some lines, here is the result:
> ---
>    proc start()
[...]
> ---
> N          0 N          0
> D     .  .   D     .  .
> L .F. L .F.
> C C
> A {[0000000000]0x00000000} A {[0000000000]0x00000000}
> B {|000|0x00000000} B {|000|0x00000000}
> O {(0x0000)0x00000000} CLASS  O {(0x0000)0x00000000} CLASS

Thank you. So results are exactly the same as in FlagShip.
It means that there are two important differences between VO/FS and
current [x]Harbour syntax in declarations like:
    local x1, x2 as numeric

1-st. In VO and FS abov line declares x1 and x2 as numeric in [x]Harbour
      only x2 is declared as numeric
2-nd. VO and FS initialize declared variables with default empty value
      used for given type

What actions do you prefer?.
Should we try to replicate VO/FS behavior?

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Oct 15 06:42:59 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 15 11:43:06 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <20071015110852.GA21143@localhost.localdomain>
References: <20071011211921.GA4812@localhost.localdomain>
	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>
	<20071012064340.GB6863@localhost.localdomain>
	<3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>
	<20071012210033.GA10898@localhost.localdomain>
	<43003E33-C85D-4519-8F22-6D57385877E8@syenar.hu>
	<20071015110852.GA21143@localhost.localdomain>
Message-ID: <E98B8572-4302-4EFC-8BE3-8C7F694DF104@syenar.hu>

Hi Przemek,

On 2007.10.15., at 13:08, Przemyslaw Czerpak wrote:

> On Mon, 15 Oct 2007, Szak?ts Viktor wrote:
>> Well, in Force 2 it doesn't compile, for VO
>> I had to modify some lines, here is the result:
>> ---
>>    proc start()
> [...]
>> ---
>> N          0 N          0
>> D     .  .   D     .  .
>> L .F. L .F.
>> C C
>> A {[0000000000]0x00000000} A {[0000000000]0x00000000}
>> B {|000|0x00000000} B {|000|0x00000000}
>> O {(0x0000)0x00000000} CLASS  O {(0x0000)0x00000000} CLASS
>
> Thank you. So results are exactly the same as in FlagShip.
> It means that there are two important differences between VO/FS and
> current [x]Harbour syntax in declarations like:
>     local x1, x2 as numeric
>
> 1-st. In VO and FS abov line declares x1 and x2 as numeric in [x] 
> Harbour
>       only x2 is declared as numeric

I prefer LOCAL x1 AS NUMERIC, x2 AS NUMERIC.

The problem with LOCAL x1, x2 AS NUMERIC is that it doesn't
seem to be in sync with this regular Clipper way of var declaration:
LOCAL x1, x2 := 100

In the former "AS NUMERIC" applies to both x1, x2, while
in the latter ":= 100" applies only to x2.

So LOCAL x1, x2 AS NUMERIC seems a bit ambiguous, as the reader
cannot be sure if x1 is meant to be untyped or NUMERIC.
For a reader coming from C, he/she might think it's NUMERIC,
but for the ones coming from Clipper, x1 would seem as untyped.

It would also allow to easily create such buggy code by mistake:
LOCAL x1 := "", x2 := 100 AS NUMERIC

> 2-nd. VO and FS initialize declared variables with default empty value
>       used for given type

I think this is fine this way. (But we will need to define
what an empty codeblock or and empty object is)

> Should we try to replicate VO/FS behavior?

To me it looks a bit unrealistic to achieve a usable
level of compatibility with VO and/or FS, plus I don't
expect a huge crowd needing this compatibility
either, so I'd vote to keep the best ideas of the
existing implementations and define our own one. (some
level of compatibility with VO/FS is a plus, but we
should rather focus on being better, being more compatible
and "Clipper-like").

Opinions are welcome of course.

Brgds,
Viktor

From druzus at acn.waw.pl  Mon Oct 15 07:06:44 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 15 12:06:50 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <E98B8572-4302-4EFC-8BE3-8C7F694DF104@syenar.hu>
References: <20071011211921.GA4812@localhost.localdomain>
	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>
	<20071012064340.GB6863@localhost.localdomain>
	<3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>
	<20071012210033.GA10898@localhost.localdomain>
	<43003E33-C85D-4519-8F22-6D57385877E8@syenar.hu>
	<20071015110852.GA21143@localhost.localdomain>
	<E98B8572-4302-4EFC-8BE3-8C7F694DF104@syenar.hu>
Message-ID: <20071015120644.GB21143@localhost.localdomain>

On Mon, 15 Oct 2007, Szak?ts Viktor wrote:
> >Thank you. So results are exactly the same as in FlagShip.
> >It means that there are two important differences between VO/FS and
> >current [x]Harbour syntax in declarations like:
> >    local x1, x2 as numeric
> >1-st. In VO and FS abov line declares x1 and x2 as numeric in [x] 
> >Harbour
> >      only x2 is declared as numeric
> I prefer LOCAL x1 AS NUMERIC, x2 AS NUMERIC.
> The problem with LOCAL x1, x2 AS NUMERIC is that it doesn't
> seem to be in sync with this regular Clipper way of var declaration:
> LOCAL x1, x2 := 100
> In the former "AS NUMERIC" applies to both x1, x2, while
> in the latter ":= 100" applies only to x2.
> So LOCAL x1, x2 AS NUMERIC seems a bit ambiguous, as the reader
> cannot be sure if x1 is meant to be untyped or NUMERIC.
> For a reader coming from C, he/she might think it's NUMERIC,
> but for the ones coming from Clipper, x1 would seem as untyped.
> It would also allow to easily create such buggy code by mistake:
> LOCAL x1 := "", x2 := 100 AS NUMERIC

OK but please remeber that we already have similar construction in
field declaration:
    FIELD fld1, fld2, fld3 IN dbAlias

Please not that IN can be declared only at the ene such statement.
At least in Harbour where I fixed bison rule for FIELD <x,...> IN <y>
In xHarbour such code:
    proc main()
       FIELD fld1 IN dbAlias1, fld2, fld3 IN dbAlias2
       ? fld1, fld2, fld3
    return
can be compiled but all fields are declared in dbAlias2, you can
chenck it in C file generated with -gc2.
So using:
    LOCAL <x,...> AS <type>
can be much more clear for people who used to use:
    FIELD <x,...> IN <alias>

Please also note that the 1-st form does not create the problem
with accepting series of declarations by <x,...> PP marker.
It's also easier to remove declaration for Clipper compilation
by simple:
    #command LOCAL <x,...> AS <type> => LOCAL <x>

> >2-nd. VO and FS initialize declared variables with default empty value
> >      used for given type
> I think this is fine this way. (But we will need to define
> what an empty codeblock

In FS it's:
    {||NIL}

> or and empty object is)

In FS it's special object which does not accept any message and always
generate RT error. In FS also for ClassH and ClassName messages though
we may decide to support them. I do not know if VO will accept these
messages. We can simply define special class for such objects.

> >Should we try to replicate VO/FS behavior?
> To me it looks a bit unrealistic to achieve a usable
> level of compatibility with VO and/or FS, plus I don't
> expect a huge crowd needing this compatibility
> either, so I'd vote to keep the best ideas of the
> existing implementations and define our own one. (some
> level of compatibility with VO/FS is a plus, but we
> should rather focus on being better, being more compatible
> and "Clipper-like").
> Opinions are welcome of course.

See above FIELD ... IN ...
Also I think that if we do not plan to be strictly compatible then
IMHO we should use syntax which will play well with PP rules.

best regards,
Przemek
From info at fsgiudice.com  Mon Oct 15 07:14:59 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Oct 15 12:15:12 2007
Subject: [Harbour] STRONG TYPED VARIABLES
References: <20071011211921.GA4812@localhost.localdomain><3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu><20071012064340.GB6863@localhost.localdomain><3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu><20071012210033.GA10898@localhost.localdomain><43003E33-C85D-4519-8F22-6D57385877E8@syenar.hu><20071015110852.GA21143@localhost.localdomain>
	<E98B8572-4302-4EFC-8BE3-8C7F694DF104@syenar.hu>
Message-ID: <005801c80f25$0652dec0$b400a8c0@ASUSFSG>

Hi Victor,

----- Original Message ----- 
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Monday, October 15, 2007 1:42 PM
Subject: Re: [Harbour] STRONG TYPED VARIABLES



> I prefer LOCAL x1 AS NUMERIC, x2 AS NUMERIC.

this seems to me a little redundant to write

> LOCAL x1 := "", x2 := 100 AS NUMERIC

and in such case I'm expect that PP should block raising an error like "x1 
must be a numeric value" otherwise you have to write them splitted on two 
lines

> I think this is fine this way. (But we will need to define
> what an empty codeblock or and empty object is)

bEmpty := {|| NIL }
oEmpty := HBObject():New() // default empty class or a pre-defined 
HBEmptyObject()

my 0.02 cents

Best Regards

Francesco

From harbour.01 at syenar.hu  Mon Oct 15 07:28:33 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 15 12:28:42 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <20071015120644.GB21143@localhost.localdomain>
References: <20071011211921.GA4812@localhost.localdomain>
	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>
	<20071012064340.GB6863@localhost.localdomain>
	<3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>
	<20071012210033.GA10898@localhost.localdomain>
	<43003E33-C85D-4519-8F22-6D57385877E8@syenar.hu>
	<20071015110852.GA21143@localhost.localdomain>
	<E98B8572-4302-4EFC-8BE3-8C7F694DF104@syenar.hu>
	<20071015120644.GB21143@localhost.localdomain>
Message-ID: <667F798A-7E05-43FD-B63B-F54EF4BC93C8@syenar.hu>

>> I prefer LOCAL x1 AS NUMERIC, x2 AS NUMERIC.
>> The problem with LOCAL x1, x2 AS NUMERIC is that it doesn't
>> seem to be in sync with this regular Clipper way of var declaration:
>> LOCAL x1, x2 := 100
>> In the former "AS NUMERIC" applies to both x1, x2, while
>> in the latter ":= 100" applies only to x2.
>> So LOCAL x1, x2 AS NUMERIC seems a bit ambiguous, as the reader
>> cannot be sure if x1 is meant to be untyped or NUMERIC.
>> For a reader coming from C, he/she might think it's NUMERIC,
>> but for the ones coming from Clipper, x1 would seem as untyped.
>> It would also allow to easily create such buggy code by mistake:
>> LOCAL x1 := "", x2 := 100 AS NUMERIC
>
> OK but please remeber that we already have similar construction in
> field declaration:
>     FIELD fld1, fld2, fld3 IN dbAlias
>
> Please not that IN can be declared only at the ene such statement.
> At least in Harbour where I fixed bison rule for FIELD <x,...> IN <y>
> In xHarbour such code:
>     proc main()
>        FIELD fld1 IN dbAlias1, fld2, fld3 IN dbAlias2
>        ? fld1, fld2, fld3
>     return
> can be compiled but all fields are declared in dbAlias2, you can
> chenck it in C file generated with -gc2.
> So using:
>     LOCAL <x,...> AS <type>
> can be much more clear for people who used to use:
>     FIELD <x,...> IN <alias>
>
> Please also note that the 1-st form does not create the problem
> with accepting series of declarations by <x,...> PP marker.
> It's also easier to remove declaration for Clipper compilation
> by simple:
>     #command LOCAL <x,...> AS <type> => LOCAL <x>

I've never used FIELD IN (or even remembered it),
thx for the info. "LOCAL v1 := xx, v2 := yy"
is much more common, maybe that's why it seems
more usual to me.

BTW, I personally think that writing more than one var
in one declaration line is to be avoided most of
the time anyway, so I use separate lines in my own
code, and most Harbour code is just like that, too.

"LOCAL x1, x2 AS type" also has one definite advantage:
It encourages just that: writing most variables in a
separate line.

>>> 2-nd. VO and FS initialize declared variables with default empty  
>>> value
>>>      used for given type
>> I think this is fine this way. (But we will need to define
>> what an empty codeblock
>
> In FS it's:
>     {||NIL}

This is fine.

>> or and empty object is)
>
> In FS it's special object which does not accept any message and always
> generate RT error. In FS also for ClassH and ClassName messages though
> we may decide to support them. I do not know if VO will accept these
> messages. We can simply define special class for such objects.

Maybe HBObject would do it in Harbour?

>>> Should we try to replicate VO/FS behavior?
>> To me it looks a bit unrealistic to achieve a usable
>> level of compatibility with VO and/or FS, plus I don't
>> expect a huge crowd needing this compatibility
>> either, so I'd vote to keep the best ideas of the
>> existing implementations and define our own one. (some
>> level of compatibility with VO/FS is a plus, but we
>> should rather focus on being better, being more compatible
>> and "Clipper-like").
>> Opinions are welcome of course.
>
> See above FIELD ... IN ...

CA-Clipper inconsistency :(

> Also I think that if we do not plan to be strictly compatible then
> IMHO we should use syntax which will play well with PP rules.

Yes, PP rules are definitely important. We still have the
same problem with FUNC/PROC declarations (and casting, but we
can use functions there).

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Oct 15 07:36:59 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 15 12:37:08 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <005801c80f25$0652dec0$b400a8c0@ASUSFSG>
References: <20071011211921.GA4812@localhost.localdomain><3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu><20071012064340.GB6863@localhost.localdomain><3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu><20071012210033.GA10898@localhost.localdomain><43003E33-C85D-4519-8F22-6D57385877E8@syenar.hu><20071015110852.GA21143@localhost.localdomain>
	<E98B8572-4302-4EFC-8BE3-8C7F694DF104@syenar.hu>
	<005801c80f25$0652dec0$b400a8c0@ASUSFSG>
Message-ID: <AF12315C-CD68-4C68-9900-903EF0B4B7AC@syenar.hu>

Hi Francesco,

>> I prefer LOCAL x1 AS NUMERIC, x2 AS NUMERIC.
>
> this seems to me a little redundant to write

Can be, yes, depending on personal coding style.

>> LOCAL x1 := "", x2 := 100 AS NUMERIC
>
> and in such case I'm expect that PP should block raising an error  
> like "x1 must be a numeric value" otherwise you have to write them  
> splitted on two lines

Yes, if this can be caught at compile-time, it's good.

LOCAL x1 := "" AS STRING
LOCAL x2 := x1, x2 := 100 AS NUMERIC

still can create problems when "blindly" adding strong
typing to code, but this code construct is much less
often used. (unless the compiler is intelligent enough
to detect that too)

>> I think this is fine this way. (But we will need to define
>> what an empty codeblock or and empty object is)
>
> bEmpty := {|| NIL }
> oEmpty := HBObject():New() // default empty class or a pre-defined  
> HBEmptyObject()

Agreed. (with HBObject():New())

Brgds,
Viktor

From makis1970 at gmail.com  Mon Oct 15 08:20:15 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Mon Oct 15 13:20:03 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <20071015120644.GB21143@localhost.localdomain>
References: <20071011211921.GA4812@localhost.localdomain>	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>	<20071012064340.GB6863@localhost.localdomain>	<3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>	<20071012210033.GA10898@localhost.localdomain>	<43003E33-C85D-4519-8F22-6D57385877E8@syenar.hu>	<20071015110852.GA21143@localhost.localdomain>	<E98B8572-4302-4EFC-8BE3-8C7F694DF104@syenar.hu>
	<20071015120644.GB21143@localhost.localdomain>
Message-ID: <007d01c80f2e$21f118a0$65d349e0$@com>

Przemek,
Under VS2008 they have added automatic optimization in code like this:
Dim lala = "string"
The compiler automatically understand that the var lala is string type and
there is no need to explicitly specify that the type of the variable is
string. Until VS2005 you have to explicitly tell the compiler the type of
the variable.

Regards
Mike Evans

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Monday, October 15, 2007 3:07 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] STRONG TYPED VARIABLES

On Mon, 15 Oct 2007, Szak?ts Viktor wrote:
> >Thank you. So results are exactly the same as in FlagShip.
> >It means that there are two important differences between VO/FS and
> >current [x]Harbour syntax in declarations like:
> >    local x1, x2 as numeric
> >1-st. In VO and FS abov line declares x1 and x2 as numeric in [x] 
> >Harbour
> >      only x2 is declared as numeric
> I prefer LOCAL x1 AS NUMERIC, x2 AS NUMERIC.
> The problem with LOCAL x1, x2 AS NUMERIC is that it doesn't
> seem to be in sync with this regular Clipper way of var declaration:
> LOCAL x1, x2 := 100
> In the former "AS NUMERIC" applies to both x1, x2, while
> in the latter ":= 100" applies only to x2.
> So LOCAL x1, x2 AS NUMERIC seems a bit ambiguous, as the reader
> cannot be sure if x1 is meant to be untyped or NUMERIC.
> For a reader coming from C, he/she might think it's NUMERIC,
> but for the ones coming from Clipper, x1 would seem as untyped.
> It would also allow to easily create such buggy code by mistake:
> LOCAL x1 := "", x2 := 100 AS NUMERIC

OK but please remeber that we already have similar construction in
field declaration:
    FIELD fld1, fld2, fld3 IN dbAlias

Please not that IN can be declared only at the ene such statement.
At least in Harbour where I fixed bison rule for FIELD <x,...> IN <y>
In xHarbour such code:
    proc main()
       FIELD fld1 IN dbAlias1, fld2, fld3 IN dbAlias2
       ? fld1, fld2, fld3
    return
can be compiled but all fields are declared in dbAlias2, you can
chenck it in C file generated with -gc2.
So using:
    LOCAL <x,...> AS <type>
can be much more clear for people who used to use:
    FIELD <x,...> IN <alias>

Please also note that the 1-st form does not create the problem
with accepting series of declarations by <x,...> PP marker.
It's also easier to remove declaration for Clipper compilation
by simple:
    #command LOCAL <x,...> AS <type> => LOCAL <x>

> >2-nd. VO and FS initialize declared variables with default empty value
> >      used for given type
> I think this is fine this way. (But we will need to define
> what an empty codeblock

In FS it's:
    {||NIL}

> or and empty object is)

In FS it's special object which does not accept any message and always
generate RT error. In FS also for ClassH and ClassName messages though
we may decide to support them. I do not know if VO will accept these
messages. We can simply define special class for such objects.

> >Should we try to replicate VO/FS behavior?
> To me it looks a bit unrealistic to achieve a usable
> level of compatibility with VO and/or FS, plus I don't
> expect a huge crowd needing this compatibility
> either, so I'd vote to keep the best ideas of the
> existing implementations and define our own one. (some
> level of compatibility with VO/FS is a plus, but we
> should rather focus on being better, being more compatible
> and "Clipper-like").
> Opinions are welcome of course.

See above FIELD ... IN ...
Also I think that if we do not plan to be strictly compatible then
IMHO we should use syntax which will play well with PP rules.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Oct 15 08:23:14 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 15 13:23:21 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <007d01c80f2e$21f118a0$65d349e0$@com>
References: <20071011211921.GA4812@localhost.localdomain>	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>	<20071012064340.GB6863@localhost.localdomain>	<3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>	<20071012210033.GA10898@localhost.localdomain>	<43003E33-C85D-4519-8F22-6D57385877E8@syenar.hu>	<20071015110852.GA21143@localhost.localdomain>	<E98B8572-4302-4EFC-8BE3-8C7F694DF104@syenar.hu>
	<20071015120644.GB21143@localhost.localdomain>
	<007d01c80f2e$21f118a0$65d349e0$@com>
Message-ID: <DE827C97-290A-4EAA-8403-F3684CF13792@syenar.hu>

Hi,

> Przemek,
> Under VS2008 they have added automatic optimization in code like this:
> Dim lala = "string"
> The compiler automatically understand that the var lala is string  
> type and
> there is no need to explicitly specify that the type of the  
> variable is
> string. Until VS2005 you have to explicitly tell the compiler the  
> type of
> the variable.

This might be good, but only as an option,
as the compiler cannot be sure that the
programmer didn't want to (intentionally)
reuse this var for some other types later
in the code.

Brgds,
Viktor

From druzus at acn.waw.pl  Mon Oct 15 08:28:13 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 15 13:28:22 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <DE827C97-290A-4EAA-8403-F3684CF13792@syenar.hu>
References: <3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>
	<20071012064340.GB6863@localhost.localdomain>
	<3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>
	<20071012210033.GA10898@localhost.localdomain>
	<43003E33-C85D-4519-8F22-6D57385877E8@syenar.hu>
	<20071015110852.GA21143@localhost.localdomain>
	<E98B8572-4302-4EFC-8BE3-8C7F694DF104@syenar.hu>
	<20071015120644.GB21143@localhost.localdomain>
	<007d01c80f2e$21f118a0$65d349e0$@com>
	<DE827C97-290A-4EAA-8403-F3684CF13792@syenar.hu>
Message-ID: <20071015132813.GA5301@localhost.localdomain>

On Mon, 15 Oct 2007, Szak?ts Viktor wrote:
> >Under VS2008 they have added automatic optimization in code like this:
> >Dim lala = "string"
> >The compiler automatically understand that the var lala is string  
> >type and
> >there is no need to explicitly specify that the type of the  
> >variable is
> >string. Until VS2005 you have to explicitly tell the compiler the  
> >type of
> >the variable.
> This might be good, but only as an option,
> as the compiler cannot be sure that the
> programmer didn't want to (intentionally)
> reuse this var for some other types later
> in the code.

Exactly. It should be enabled by compile time switch, f.e.:
    -kt - automatic type declaration
not by default.

best regards,
Przemek
From makis1970 at gmail.com  Mon Oct 15 08:50:45 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Mon Oct 15 13:50:36 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <20071015132813.GA5301@localhost.localdomain>
References: <3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>	<20071012064340.GB6863@localhost.localdomain>	<3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>	<20071012210033.GA10898@localhost.localdomain>	<43003E33-C85D-4519-8F22-6D57385877E8@syenar.hu>	<20071015110852.GA21143@localhost.localdomain>	<E98B8572-4302-4EFC-8BE3-8C7F694DF104@syenar.hu>	<20071015120644.GB21143@localhost.localdomain>	<007d01c80f2e$21f118a0$65d349e0$@com>	<DE827C97-290A-4EAA-8403-F3684CF13792@syenar.hu>
	<20071015132813.GA5301@localhost.localdomain>
Message-ID: <007e01c80f32$6577a360$3066ea20$@com>

Przemek, Viktor,

Exactly what I missed to tell.

Regards
Mike Evans

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Monday, October 15, 2007 4:28 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] STRONG TYPED VARIABLES

On Mon, 15 Oct 2007, Szak?ts Viktor wrote:
> >Under VS2008 they have added automatic optimization in code like this:
> >Dim lala = "string"
> >The compiler automatically understand that the var lala is string  
> >type and
> >there is no need to explicitly specify that the type of the  
> >variable is
> >string. Until VS2005 you have to explicitly tell the compiler the  
> >type of
> >the variable.
> This might be good, but only as an option,
> as the compiler cannot be sure that the
> programmer didn't want to (intentionally)
> reuse this var for some other types later
> in the code.

Exactly. It should be enabled by compile time switch, f.e.:
    -kt - automatic type declaration
not by default.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From makis1970 at gmail.com  Mon Oct 15 08:55:42 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Mon Oct 15 13:55:32 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <E98B8572-4302-4EFC-8BE3-8C7F694DF104@syenar.hu>
References: <20071011211921.GA4812@localhost.localdomain>	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>	<20071012064340.GB6863@localhost.localdomain>	<3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>	<20071012210033.GA10898@localhost.localdomain>	<43003E33-C85D-4519-8F22-6D57385877E8@syenar.hu>	<20071015110852.GA21143@localhost.localdomain>
	<E98B8572-4302-4EFC-8BE3-8C7F694DF104@syenar.hu>
Message-ID: <007f01c80f33$155d8ba0$4018a2e0$@com>

Viktor,
I would prefer something in the middle
Local cVar As String, nVar As Numeric
But also
Local nVar1, nVar2 As numeric to include both variables
I don't know if something like that would be nice
Local (nVar1, nVar2) As Numeric

Regards
Mike Evans

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Szakats Viktor
Sent: Monday, October 15, 2007 2:43 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] STRONG TYPED VARIABLES

Hi Przemek,

On 2007.10.15., at 13:08, Przemyslaw Czerpak wrote:

> On Mon, 15 Oct 2007, Szak?ts Viktor wrote:
>> Well, in Force 2 it doesn't compile, for VO
>> I had to modify some lines, here is the result:
>> ---
>>    proc start()
> [...]
>> ---
>> N          0 N          0
>> D     .  .   D     .  .
>> L .F. L .F.
>> C C
>> A {[0000000000]0x00000000} A {[0000000000]0x00000000}
>> B {|000|0x00000000} B {|000|0x00000000}
>> O {(0x0000)0x00000000} CLASS  O {(0x0000)0x00000000} CLASS
>
> Thank you. So results are exactly the same as in FlagShip.
> It means that there are two important differences between VO/FS and
> current [x]Harbour syntax in declarations like:
>     local x1, x2 as numeric
>
> 1-st. In VO and FS abov line declares x1 and x2 as numeric in [x] 
> Harbour
>       only x2 is declared as numeric

I prefer LOCAL x1 AS NUMERIC, x2 AS NUMERIC.

The problem with LOCAL x1, x2 AS NUMERIC is that it doesn't
seem to be in sync with this regular Clipper way of var declaration:
LOCAL x1, x2 := 100

In the former "AS NUMERIC" applies to both x1, x2, while
in the latter ":= 100" applies only to x2.

So LOCAL x1, x2 AS NUMERIC seems a bit ambiguous, as the reader
cannot be sure if x1 is meant to be untyped or NUMERIC.
For a reader coming from C, he/she might think it's NUMERIC,
but for the ones coming from Clipper, x1 would seem as untyped.

It would also allow to easily create such buggy code by mistake:
LOCAL x1 := "", x2 := 100 AS NUMERIC

> 2-nd. VO and FS initialize declared variables with default empty value
>       used for given type

I think this is fine this way. (But we will need to define
what an empty codeblock or and empty object is)

> Should we try to replicate VO/FS behavior?

To me it looks a bit unrealistic to achieve a usable
level of compatibility with VO and/or FS, plus I don't
expect a huge crowd needing this compatibility
either, so I'd vote to keep the best ideas of the
existing implementations and define our own one. (some
level of compatibility with VO/FS is a plus, but we
should rather focus on being better, being more compatible
and "Clipper-like").

Opinions are welcome of course.

Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From dbtopas at dbtopas.lt  Mon Oct 15 09:06:35 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Oct 15 14:06:22 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <20071015110852.GA21143@localhost.localdomain>
References: <20071011211921.GA4812@localhost.localdomain>	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>	<20071012064340.GB6863@localhost.localdomain>	<3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>	<20071012210033.GA10898@localhost.localdomain>	<43003E33-C85D-4519-8F22-6D57385877E8@syenar.hu>
	<20071015110852.GA21143@localhost.localdomain>
Message-ID: <471373EB.9010008@dbtopas.lt>

Przemyslaw Czerpak wrote:
> Thank you. So results are exactly the same as in FlagShip.
> It means that there are two important differences between VO/FS and
> current [x]Harbour syntax in declarations like:
>     local x1, x2 as numeric
> 
> 1-st. In VO and FS abov line declares x1 and x2 as numeric in [x]Harbour
>       only x2 is declared as numeric
> 2-nd. VO and FS initialize declared variables with default empty value
>       used for given type
> 
> What actions do you prefer?.

Hi,


   LOCAL nI AS NUMERIC, nJ AS NUMERIC
could be a long string and variable names are hiding among "reserved 
words". Imagine I want to define five numeric variables:
   LOCAL nI AS NUMERIC, nJ AS NUMERIC, nK AS NUMERIC, nL AS NUMERIC, nM 
AS NUMERIC
or arrays:
   LOCAL aI AS ARRAY OF NUMERIC, aJ AS ARRAY OF NUMERIC, aK AS ARRAY OF 
NUMERIC, aL AS ARRAY OF NUMERIC, aM AS ARRAY OF NUMERIC

So, I suggest using:
   LOCAL nI, nJ, nK, nL AS NUMERIC
and allow definition of other variables in the same name, i.e.:
   LOCAL nI, nJ, nK, nL AS NUMERIC, cI, cJ, cK AS CHARACTER

If this is not allowed, it will be necessary to use a separate line, for 
  each type, it could look ugly if variable declaration requires 
multiple lines:
   LOCAL nI AS NUMERIC
   LOCAL cI AS CHARACTER
   LOCAL aI AS ARRAY
   LOCAL lI AS LOGICAL
instead of compact:
   LOCAL nI AS NUMERIC, cI AS CHARACTER, aI AS ARRAY, lI AS LOGICAL


About default codeblock and object. Default numeric and character values 
could be useful:
   LOCAL nI, nSum AS NUMERIC, cI AS CHARACTER
   FOR nI := 1 TO LEN(aI) FIXED // ;-)
      nSum += aI[nI]     // here nSum, cI uses default initialization
      cI += STR(aI[nI])
   NEXT
But it seems default codeblock and object will not. So, maybe we can 
define some object that gives RTE for any message (:ClassH, :ClassName 
could be an exception), and also a codeblock with "Default codeblock" 
RTE on execution. This will help to track errors. {|| NIL} can hide it.


Best regards,
Mindaugas

From myorg63 at mail.ru  Mon Oct 15 09:12:52 2007
From: myorg63 at mail.ru (Petr Chornyj)
Date: Mon Oct 15 14:13:05 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <20071015132813.GA5301@localhost.localdomain>
References: <20071011211921.GA4812@localhost.localdomain>
	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>
	<20071012064340.GB6863@localhost.localdomain>
	<3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>
	<20071012210033.GA10898@localhost.localdomain>
	<43003E33-C85D-4519-8F22-6D57385877E8@syenar.hu>
	<20071015110852.GA21143@localhost.localdomain>
	<E98B8572-4302-4EFC-8BE3-8C7F694DF104@syenar.hu>
	<20071015120644.GB21143@localhost.localdomain>
	<007d01c80f2e$21f118a0$65d349e0$@com>
	<DE827C97-290A-4EAA-8403-F3684CF13792@syenar.hu>
	<20071015132813.GA5301@localhost.localdomain>
Message-ID: <13213752.post@talk.nabble.com>


I think we need 

1) LOCAL nI AS NUMERIC, nJ AS NUMERIC // nI and nJ is Numeric
2) LOCAL nI, nJ AS NUMERIC // nI is undefined, nJ is Numeric
3) LOCAL AS NUMERIC nI, nJ // both nI and nJ is NUMERIC


Regards,
Petr
-- 
View this message in context: http://www.nabble.com/STRONG-TYPED-VARIABLES-tf4610060.html#a13213752
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Mon Oct 15 10:40:20 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 15 15:40:30 2007
Subject: [Harbour] 2007-10-15 17:39 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710151540.l9FFeKrw008406@31-mo5-4.acn.waw.pl>

2007-10-15 17:39 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbpp.h
  * harbour/include/hbmath.h
  * harbour/source/pp/ppcore.c
  * harbour/source/pp/ppgen.c
  * harbour/source/pp/Makefile
  * harbour/source/rtl/diskspac.c
  * harbour/source/rtl/fserror.c
  * harbour/source/rtl/gtchrmap.c
  * harbour/source/rtl/disksphb.c
  * harbour/source/rtl/gttone.c
  * harbour/source/rtl/gtwvt/gtwvt.c
  * harbour/source/rtl/fssize.c
  * harbour/source/rtl/hbinet.c
  * harbour/source/rtl/hbffind.c
  * harbour/source/rtl/filesys.c
  * harbour/source/vm/mainwin.c
  * harbour/source/common/hbver.c
  * harbour/source/common/hbtrace.c
  * harbour/source/compiler/cmdcheck.c
  * harbour/source/compiler/ppcomp.c
  * harbour/utils/hbver/hbverfix.c
  * harbour/utils/hbpp/hbppcore.c
  * harbour/config/w32/pocc.cf
    * code cleanup:
      - eliminated unnecessary errno access
      - use WinAPI functions instead of some standard C library functions
        in Windows builds

best regards
Przemek
From dbtopas at dbtopas.lt  Mon Oct 15 11:20:48 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Oct 15 16:20:33 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <20071012200051.GB10596@localhost.localdomain>
References: <20071011211921.GA4812@localhost.localdomain>	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>	<20071012064340.GB6863@localhost.localdomain>	<470FBE90.6020708@dbtopas.lt>
	<20071012200051.GB10596@localhost.localdomain>
Message-ID: <47139360.3040406@dbtopas.lt>

Hi,


>>   FUNC AAA()
>>   LOCAL cI, nI
>>
>>     cI := ""
>>     FOR nI := 1 TO 50
>>       cI += STR(nI)
>>     NEXT
>>   RETURN cI
>> It's clear that nI could be optimized to C integer variable. My goal was 
>> to generate code like this:
> 
> This can be quite easy detected and optimized when we will eliminate
> online PCODE generation. But I do not see corelation with addaptive
> type checking defined as in doc/en/strotype.txt. This text suggested
> that compiler will automatically give proper type to variable after
> assignment what of course is cannot work due to condtional jumps and
> loops.

The correlation with adaptive type checking is that compiler can 
optimize +, <=, := operations on integer numbers, so it (compiler) 
should detect that here nI is integer for the whole loop. If there is a 
reassignment of nI inside loop, this loop could not be optimized.
The explicit type definition
   LOCAL nI AS INTEGER
would help compiler to take optimization decision of variable nI, and 
avoid adaptive type checking.


>> //	HB_P_LINE, 5, 0,	/* 5 */
>> //	HB_P_LOCALINCPUSH, 2, 0,	/* NI */
>> //	HB_P_PUSHBYTE, 50,	/* 50 */
>> //	HB_P_GREATER,
>> //	HB_P_JUMPFALSENEAR, 233,	/* -23 (abs: 00020) */
>> //	HB_P_LINE, 8, 0,	/* 8 */
>> //      Optimized by:
>> 	HB_P_STRONGPROC, 1, 0,
>>
>> 	HB_P_PUSHLOCALNEAR, 1,	/* CI */
>> 	HB_P_RETVALUE,
>> 	HB_P_ENDPROC
>>    };
>>    hb_vmExecute( pcode, symbols );
>> }
> 
> I do not think that we should make such optimization in -gc2.
> Much more efficient it can be done in -gc3. Just simply we can
> use native C variable as nI holder without helper functions
> like __hb_strongproc*() and accessing HB_ITEM internals.

I was thinking this also. In this case variable nI is not on item stack. 
It could be a drawback if we want to get debug stack values on debugger 
or write all local variable values to .log file on runtime error.
Accessing these locals from codeblocks, detaching are also impossible.

We need some method to bind allocated stack items to C "items". Maybe
    hb_strongRegisterLocal( &nI, HB_STRONG_INTEGER, 2 /* local no */ );
could store some reference to C items, on item stack.


>> The most difficult was that I had to analyze PCODE, but not the 
>> expression tree made by parser. It's difficult to determine which local 
>> variables were initialized to integer values and which variables had an 
>> undetermined type, if code structure is linked by plain jumps like we 
>> have in PCODE.
> 
> Exactly. Now it will be nightmare  ... 
> will be much
> much easier to do when we will operate on HB_EXPR structures then
> on PCODEs. PCODE should be generate in backend not online in core
> compiler code. And this will be changed. Step by step in spare time
> by me, by you and I hope other developers. I would like to join this
> modification in rewriting grammar rules (there are things which
> need serious cleanup with HB_EXPR type updating but beta stage
> is not good moment for it) 

I would be happy to help rewrite the rules, if my knowledge will be 
enough to do this job, but you should start the job or write some 
template/sample. Could it be a step by step job, or we should rewrite 
rules from the zero?


Best regards,
Mindaugas

From harbour.01 at syenar.hu  Mon Oct 15 11:36:43 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 15 16:36:47 2007
Subject: [Harbour] CHANGELOG: 2007-10-15 18:36 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c80f49$Blat.v2.6.2$91a0476e$1acba35a0c2@127.0.0.1>

2007-10-15 18:36 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * source/rtl/tbcolumn.prg
     ! Strict C5.2e compatible behaviour made the default.

   * source/rtl/inkey.c
     + Added handling of arrays of numbers in HB_KEYPUT().
       (this was copied from __KEYBOARD()'s extended section)
     + Added handling of string parameter in HB_KEYPUT().
       (this way we don't really need the hidden extensions 
       in __KEYBOARD() anymore. Also notice that __KEYBOARD() 
       doesn't clear the keyboard buffer when numeric or 
       array is passed, which is not consistent with the 
       Clipper compatible behaviour when strings are passed.)

   * common.mak
   * include/hbcompdf.h
   * source/compiler/hbmain.c
   * source/compiler/cmdcheck.c
   * source/compiler/hbcomp.c
   * source/compiler/harbour.l
   * source/compiler/Makefile
   * source/compiler/ppcomp.c
   * source/compiler/hbusage.c
   - source/compiler/genjava.c
   - source/compiler/gencli.c
     - Removed two non-working (experimental) output types: 
       Java, CLI
     ! Prefixed LANG_* enums with HB_
--
Brgds,
Viktor

From miguelangel at marchuet.net  Mon Oct 15 11:52:02 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Mon Oct 15 16:59:14 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <13213752.post@talk.nabble.com>
References: <20071011211921.GA4812@localhost.localdomain>	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>	<20071012064340.GB6863@localhost.localdomain>	<3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>	<20071012210033.GA10898@localhost.localdomain>	<43003E33-C85D-4519-8F22-6D57385877E8@syenar.hu>	<20071015110852.GA21143@localhost.localdomain>	<E98B8572-4302-4EFC-8BE3-8C7F694DF104@syenar.hu>	<20071015120644.GB21143@localhost.localdomain>	<007d01c80f2e$21f118a0$65d349e0$@com>	<DE827C97-290A-4EAA-8403-F3684CF13792@syenar.hu>	<20071015132813.GA5301@localhost.localdomain>
	<13213752.post@talk.nabble.com>
Message-ID: <47139AB2.7090407@marchuet.net>

Petr Chornyj escribi?:
> I think we need 
> 
> 1) LOCAL nI AS NUMERIC, nJ AS NUMERIC // nI and nJ is Numeric
> 2) LOCAL nI, nJ AS NUMERIC // nI is undefined, nJ is Numeric
> 3) LOCAL AS NUMERIC nI, nJ // both nI and nJ is NUMERIC
> 
> 
> Regards,
> Petr

I think this is the most logical.

Best regards,
Miguel Angel Marchuet
From harbour.01 at syenar.hu  Mon Oct 15 13:28:46 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 15 18:29:04 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <43003E33-C85D-4519-8F22-6D57385877E8@syenar.hu>
References: <20071011211921.GA4812@localhost.localdomain>
	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>
	<20071012064340.GB6863@localhost.localdomain>
	<3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>
	<20071012210033.GA10898@localhost.localdomain>
	<43003E33-C85D-4519-8F22-6D57385877E8@syenar.hu>
Message-ID: <19912224-DEB6-4DC1-9418-34705FC1A9B6@syenar.hu>

Hi Przemek,

I did a mistake in pasting the modified code, so here is the
code which I got the results from:

FUNCTION Start()
       LOCAL n1, n2 AS INT    /* 0 */
       LOCAL d1, d2 AS DATE       /* ctod("") */
       LOCAL l1, l2 AS LOGIC   /* .F. */
       LOCAL c1, c2 AS STRING  /* "" */
       LOCAL a1, a2 AS ARRAY      /* {} */
       LOCAL b1, b2 AS CODEBLOCK  /* {||NIL} */
       LOCAL o1, o2 AS OBJECT     /* special object, gen RTE for any  
messages */
       ? ValType(n1), n1, ValType(n2), n2
       ? ValType(d1), d1, ValType(d2), d2
       ? ValType(l1), l1, ValType(l2), l2
       ? ValType(c1), c1, ValType(c2), c2
       ? ValType(a1), a1, ValType(a2), a2
       ? ValType(b1), b1, ValType(b2), b2
       ? ValType(o1), o1, ValType(o2), o2
RETURN 0

(formatting was automatically done by the CAVO editor,
I only had to change the types.)

Brgds,
Viktor

On 2007.10.15., at 12:14, Szak?ts Viktor wrote:

>>> Which code exactly? I can try it for you.
>>
>> Thank you.
>>
>>    proc main()
>>       local n1, n2 as numeric    /* 0 */
>>       local d1, d2 as date       /* ctod("") */
>>       local l1, l2 as logical    /* .F. */
>>       local c1, c2 as character  /* "" */
>>       local a1, a2 as array      /* {} */
>>       local b1, b2 as codeblock  /* {||NIL} */
>>       local o1, o2 as object     /* special object, gen RTE for  
>> any messages */
>>       ? valtype(n1), n1, valtype(n2), n2
>>       ? valtype(d1), d1, valtype(d2), d2
>>       ? valtype(l1), l1, valtype(l2), l2
>>       ? valtype(c1), c1, valtype(c2), c2
>>       ? valtype(a1), a1, valtype(a2), a2
>>       ? valtype(b1), b1, valtype(b2), b2
>>       ? valtype(o1), o1, valtype(o2), o2
>>    return
>
> Well, in Force 2 it doesn't compile, for VO
> I had to modify some lines, here is the result:
>
> ---
>    proc start()
>       local n1, n2 as numeric    /* 0 */
>       local d1, d2 as date       /* ctod("") */
>       local l1, l2 as logical    /* .F. */
>       local c1, c2 as character  /* "" */
>       local a1, a2 as array      /* {} */
>       local b1, b2 as codeblock  /* {||NIL} */
>       local o1, o2 as object     /* special object, gen RTE for any  
> messages */
>       ? valtype(n1), n1, valtype(n2), n2
>       ? valtype(d1), d1, valtype(d2), d2
>       ? valtype(l1), l1, valtype(l2), l2
>       ? valtype(c1), c1, valtype(c2), c2
>       ? valtype(a1), a1, valtype(a2), a2
>       ? valtype(b1), b1, valtype(b2), b2
>       ? valtype(o1), o1, valtype(o2), o2
>    return
> ---
> N          0 N          0
> D     .  .   D     .  .
> L .F. L .F.
> C C
> A {[0000000000]0x00000000} A {[0000000000]0x00000000}
> B {|000|0x00000000} B {|000|0x00000000}
> O {(0x0000)0x00000000} CLASS  O {(0x0000)0x00000000} CLASS
>
> Brgds,
> Viktor
>

From antonioharbour at gmail.com  Mon Oct 15 14:32:50 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Oct 15 19:33:34 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <20071015132813.GA5301@localhost.localdomain>
Message-ID: <4713c089.01bb420a.0952.52f8@mx.google.com>

Przemek,

I am curious about the implementation plan:

Will the strong typed variables use a HB_ITEM ?

Regards,

Antonio

From ptucker at sympatico.ca  Tue Oct 16 01:42:20 2007
From: ptucker at sympatico.ca (Paul Tucker)
Date: Tue Oct 16 06:42:24 2007
Subject: [Harbour] STRONG TYPED VARIABLES
References: <20071011211921.GA4812@localhost.localdomain>	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>	<20071012064340.GB6863@localhost.localdomain>	<3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>	<20071012210033.GA10898@localhost.localdomain>	<43003E33-C85D-4519-8F22-6D57385877E8@syenar.hu>	<20071015110852.GA21143@localhost.localdomain>	<E98B8572-4302-4EFC-8BE3-8C7F694DF104@syenar.hu><20071015120644.GB21143@localhost.localdomain>
	<007d01c80f2e$21f118a0$65d349e0$@com>
Message-ID: <022e01c80fbf$b3a2f2f0$6a00a8c0@xHarbour.ca>

Mike,

> Under VS2008 they have added automatic optimization in code like this:
> Dim lala = "string"
> The compiler automatically understand that the var lala is string type and
> there is no need to explicitly specify that the type of the variable is
> string. Until VS2005 you have to explicitly tell the compiler the type of
> the variable.

You appear to be describing one of the languages that run under VS (VB in 
this case)

VS is just a framework and dev environment.

(for those that didn't know)

Paul 

From harbour.01 at syenar.hu  Tue Oct 16 02:39:33 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 16 07:39:37 2007
Subject: [Harbour] CHANGELOG: 2007-10-16 09:29 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c80fc7$Blat.v2.6.2$b20a223a$ab89113ecce@127.0.0.1>

2007-10-16 09:29 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * include/hbextern.ch
   * source/rtl/gete.c
     + Added HB_GETENV(). There you have a 2nd parameter 
       which will be returned in case the requested 
       envvar doesn't exist. This extensions is still present 
       in GETE[NV](), but we'd better remove it.

   * include/hbextern.ch
   * source/rtl/isprint.c
     + Added HB_ISPRINTER() with support for extra parameter 
       printer port name. This parameter also currently has 
       support for Win32 printers. Win32 printer name support 
       was removed from ISPRINTER() to keep compatibility.
       ISPRINTER() extra parameter is enabled with HB_COMPAT_XPP 
       (which is the default).
--
Brgds,
Viktor

From gvarona at ec-red.com  Tue Oct 16 03:11:06 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Tue Oct 16 08:11:12 2007
Subject: [Harbour] CHANGELOG: 2007-10-16 09:29 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <01c80fc7$Blat.v2.6.2$b20a223a$ab89113ecce@127.0.0.1>
References: <01c80fc7$Blat.v2.6.2$b20a223a$ab89113ecce@127.0.0.1>
Message-ID: <4714721A.7090000@ec-red.com>

Szak?ts Viktor escribi?:
>    * source/rtl/isprint.c
>      + Added HB_ISPRINTER() with support for extra parameter 
>        printer port name. This parameter also currently has 
>        support for Win32 printers. Win32 printer name support 
>        was removed from ISPRINTER() to keep compatibility.
>        ISPRINTER() extra parameter is enabled with HB_COMPAT_XPP 
>        (which is the default)
>   
This Code:
*PROCEDURE Main
? ISPRINTER()

In Clipper:
.T.      // Printer On
.T.      // Printer Off

In Harbour:
.F.      // Printer On; Here can't use the printer
.F.      // Printer Off

WinXP+MinGW

Best Regards
GVS

From harbour.01 at syenar.hu  Tue Oct 16 04:35:02 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 16 09:35:11 2007
Subject: [Harbour] CHANGELOG: 2007-10-16 09:29 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <4714721A.7090000@ec-red.com>
References: <01c80fc7$Blat.v2.6.2$b20a223a$ab89113ecce@127.0.0.1>
	<4714721A.7090000@ec-red.com>
Message-ID: <F1A0DE62-5BBD-4E83-AC25-B57E837CD5EC@syenar.hu>

Hi Guillermo,

I'm trying to find an LPT cable to check this.

(the way Harbour/Win32 is trying to detect
LPT ports is definitely buggy though).

Brgds,
Viktor

On 2007.10.16., at 10:11, Guillermo Varona Silup? wrote:

> Szak?ts Viktor escribi?:
>>    * source/rtl/isprint.c
>>      + Added HB_ISPRINTER() with support for extra  
>> parameter        printer port name. This parameter also currently  
>> has        support for Win32 printers. Win32 printer name  
>> support        was removed from ISPRINTER() to keep compatibility.
>>        ISPRINTER() extra parameter is enabled with  
>> HB_COMPAT_XPP        (which is the default)
>>
> This Code:
> *PROCEDURE Main
> ? ISPRINTER()
>
> In Clipper:
> .T.      // Printer On
> .T.      // Printer Off
>
> In Harbour:
> .F.      // Printer On; Here can't use the printer
> .F.      // Printer Off
>
> WinXP+MinGW
>
> Best Regards
> GVS
>

From harbour.01 at syenar.hu  Tue Oct 16 06:04:57 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 16 11:05:01 2007
Subject: [Harbour] CHANGELOG: 2007-10-16 12:50 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c80fe4$Blat.v2.6.2$637e13ca$140a8a55b1c@127.0.0.1>

2007-10-16 12:50 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * source/rtl/isprint.c
     ! Fixed ISPRINTER() on Win32 after last changes.
       Thanks Guillermo, pls test now.
   
   * source/rdd/dbcmd.c
     ! Marked as HB_EXTENSION: FIELDLEN(), FIELDDEC(), FIELDTYPE()

   * include/hbextern.ch
   * source/rdd/dbcmd.c
     ! Marked as HB_EXTENSION: DBDROP(), DBEXISTS(), RDDINFO()
       (they were properly marked in hbextern.ch but not in source)

   * include/hbextern.ch
   * source/rtl/disksphb.c
   * source/rtl/fssize.c
   * source/rtl/fstemp.c
   * source/rtl/inkey.c
   * source/rtl/oemansi.c
   * source/rtl/philes.c
   * source/rtl/setcolor.c
   * source/rtl/setfunc.prg
   * source/rtl/setkey.c
   * source/rtl/shadow.c
   * source/rtl/trace.c
   * source/rtl/valtostr.c
   * source/vm/dynsym.c
     + Removed HB_EXTENSION from all the .prg level functions 
       prefixed with HB_.
       (there was a mixed situation here, but there's no need 
       to mark any HB_ functions as extensions, as it's obvious 
       by their name. So as a rule, no HB_ prefixed function 
       should ever be marked as HB_EXTENSION anymore.)
     ! Fixed some inconsistencies in HB_EXTENSION between 
       hbextern.ch and actual sources.

   * source/rtl/tgetlist.prg
     * One HB_EXTENSION changed to !HB_C52_STRICT because it 
       was guarding a bugfix rather than a real extension.

   * source/rtl/gui.prg
     * _GetNumCol() is now always strictly compatible.
       NOTE added about sloppy C5.3 behaviour.

   * source/rtl/inkey.c
   * contrib/xhb/xhb.ch
   * contrib/xhb/xhbfunc.c
     ! __KEYBOARD() xhb hidden parameter extension moved to 
       xhb lib. For similar functionality inside Harbour 
       pls use HB_KEYPUT(). __KEYBOARD is now 100% C5.x 
       compatible.

   * source/rtl/setfunc.prg
     * __SetFunction() extension now uses HB_KEYPUT() instead 
       of __KEYBOARD() extended parameters.

   * source/compiler/hbfunchk.c
   * source/rtl/at.c
     ! AT() extra parameters handled when HB_EXTENSION is on 
       (was !HB_C52_STRICT). (The first extra parameter is 
       XPP and Flagship compatible. The three parameter version 
       of this function is called AT3() in CAVO.)
     ! TRIM()/RTRIM() extra parameters handled on compiler level 
       when HB_EXTENSION is on (default).
     ! FILE() parameter check turned off in compiler.
       (to be C5.x compatible)

   * source/rtl/alert.prg
     ! ALERT() Harbour extended parameter (1st parameter type) 
       is now guarded with HB_EXTENSION instead of HB_C52_STRICT.

   * source/rtl/gete.c
     ! GETE[NV]() Harbour extended parameter guarded with HB_EXTENSION.

   * source/vm/proc.c
     ! PROCFILE() Harbour extended parameter guarded with HB_EXTENSION.

   * source/rtl/mlcfunc.c
     ! Harbour extended parameters for MEMOLINE()/MLCOUNT()/
       MLPOS()/MLCTOPOS()/MPOSTOLC() are now guarded with HB_EXTENSION 
       (instead of HB_C52_STRICT). It seems to be possible to 
       specify custom EOLs for all these functions. (Maybe simple 
       automatic Unix/Win EOL style handling would be better here)

   * source/vm/memvars.c
     ! Guarded Harbour extension in __MVRESTORE() with HB_EXTENSION.

   ; After this cleanup:
     - HB_EXTENSION is marking extra features living inside existing C5.x 
                    functions or classes, or Harbour extension functions 
                    not complying with the HB_ prefix rule (we have six 
                    such functions in RDD). If there are more extended 
                    parameters in Harbour pls mark them with HB_EXTENSION 
                    too.
     - HB_C52_STRICT is guarding bugfixes compared to C5.x.
     - No HB_ functions are guarded with HB_EXTENSION anymore.
     - We'd pbly need to review each HB_EXTENSIONs to check whether they 
       are safe or not.
     - A list of HB_EXTENSIONs:
       - MLCOUNT()
         MEMOLINE()
         MLPOS()
         MLCPOS()
         MPOSTOLC()      - 5th and up can specify custom EOLs.
       - ALERT()         - 1st parameter type can be any type in Harbour, char only in C5.x
       - SET FUNCTION TO
         __SETFUNCTION   - 2nd parameter can be numeric or array of numeric in Harbour.
       - SETKEY()        - 3rd codeblock parameter ("isactive" block)
       - SAVESCREEN()    - 5th parameter: lNoCheck (?)
         RESTSCREEN()    - 6th parameter: lNoCheck (?)
       - AT()            - 3rd and 4th parameters to set search range. 3rd parameter is 
                           also supported by XPP and FS. Results in compiler error in C5.x.
                           (CAVO uses AT2() and AT3() for extended versions.)
       - TRIM()
         RTRIM()         - 2nd parameter is an extension regarding space trimming mode.
                           Results in compiler error in C5.x.
       - ALLTRIM()       - 2nd parameter is an extension regarding space trimming mode.
       - GETE()
         GETENV()        - 2nd parameter specifies a default value. Can be found in HB_GETENV().
       - PROCFILE()      - 1st parameter is a Harbour extension. Undocumented function in C5.x.
                           The extension looks similar to the one found in Flagship.
       - __MVRESTORE()   - 3rd/4th parameters are Harbour extensions to set variable name 
                           mask. Redirected from the internal 5.x function named __MRESTORE().
       - DB*()           - cRDD, nConnection, cCodePage extra parameters in many DB*() functions.
                           TOFIX: None of them is marked as HB_EXTENSION.
       - SET()s          - These are not marked as HB_EXTENSION.
       - ?               - Is there anything else?
--
Brgds,
Viktor

From makis1970 at gmail.com  Tue Oct 16 06:19:17 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Tue Oct 16 11:19:05 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <022e01c80fbf$b3a2f2f0$6a00a8c0@xHarbour.ca>
References: <20071011211921.GA4812@localhost.localdomain>	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>	<20071012064340.GB6863@localhost.localdomain>	<3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>	<20071012210033.GA10898@localhost.localdomain>	<43003E33-C85D-4519-8F22-6D57385877E8@syenar.hu>	<20071015110852.GA21143@localhost.localdomain>	<E98B8572-4302-4EFC-8BE3-8C7F694DF104@syenar.hu><20071015120644.GB21143@localhost.localdomain>	<007d01c80f2e$21f118a0$65d349e0$@com>
	<022e01c80fbf$b3a2f2f0$6a00a8c0@xHarbour.ca>
Message-ID: <002101c80fe6$6625d7f0$327187d0$@com>

You are right. I'm talking about VB.Net for VS2008

Regards
Mike Evans

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Paul Tucker
Sent: Tuesday, October 16, 2007 9:42 AM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] STRONG TYPED VARIABLES

Mike,

> Under VS2008 they have added automatic optimization in code like this:
> Dim lala = "string"
> The compiler automatically understand that the var lala is string type and
> there is no need to explicitly specify that the type of the variable is
> string. Until VS2005 you have to explicitly tell the compiler the type of
> the variable.

You appear to be describing one of the languages that run under VS (VB in 
this case)

VS is just a framework and dev environment.

(for those that didn't know)

Paul 

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Oct 16 08:20:27 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 16 13:20:32 2007
Subject: [Harbour] CHANGELOG: 2007-10-16 15:18 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c80ff7$Blat.v2.6.2$5160c7d8$10d8a51f6034@127.0.0.1>

2007-10-16 15:18 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   + contrib/win32prn
   + contrib/win32prn/makefile.bc
   + contrib/win32prn/make_b32.bat
   + contrib/win32prn/w32_pcls.prg
   + contrib/win32prn/w32_papi.c
   + contrib/win32prn/tprinter.c
   + contrib/win32prn/testw32p.prg
     + Ported Win32 specific bitmap printing class from xharbour core.
     ; Please test.
--
Brgds,
Viktor

From soporte at dsgsoftware.com  Tue Oct 16 09:25:46 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Tue Oct 16 14:28:29 2007
Subject: [Harbour] CHANGELOG: 2007-10-16 15:18 UTC+0100 Viktor
	Szakats(harbour.01 syenar.hu)
References: <01c80ff7$Blat.v2.6.2$5160c7d8$10d8a51f6034@127.0.0.1>
Message-ID: <001201c81000$78db6df0$1700000a@PcJuanxp>

Hi Viktor,

I think you should delete the reference operator (&) of lines 438-439 of 
tprinter.c (GetPrinters function).

Best regards
Juan

----- Original Message ----- 
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: <harbour@harbour-project.org>
Sent: Tuesday, October 16, 2007 3:20 PM
Subject: [Harbour] CHANGELOG: 2007-10-16 15:18 UTC+0100 Viktor 
Szakats(harbour.01 syenar.hu)


> 2007-10-16 15:18 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>   + contrib/win32prn
>   + contrib/win32prn/makefile.bc
>   + contrib/win32prn/make_b32.bat
>   + contrib/win32prn/w32_pcls.prg
>   + contrib/win32prn/w32_papi.c
>   + contrib/win32prn/tprinter.c
>   + contrib/win32prn/testw32p.prg
>     + Ported Win32 specific bitmap printing class from xharbour core.
>     ; Please test.
> --
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 

From carlos.mora at cpcipc.org  Tue Oct 16 09:46:05 2007
From: carlos.mora at cpcipc.org (Carlos Mora)
Date: Tue Oct 16 14:46:48 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <20071012210033.GA10898@localhost.localdomain>
References: <20071011211921.GA4812@localhost.localdomain>	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>	<20071012064340.GB6863@localhost.localdomain>	<3DE1C242-855B-4814-87B6-21C04DA2E577@syenar.hu>
	<20071012210033.GA10898@localhost.localdomain>
Message-ID: <4714CEAD.1070108@cpcipc.org>

Przemyslaw Czerpak escribi?:
>   FUNCTION REPLICATE( cVal .CHARACTER, nVal .NUMERIC ) . CHARACTER
>
> or '.as.':
>
>   FUNCTION REPLICATE( cVal .AS. CHARACTER, nVal .AS.NUMERIC ) .AS.CHARACTER
>
>   
A question/sugestion. I don't know about PP posibilities, but as far I 
see every option is postfixing the type. How about prefixing the type 
like in:

CHARACTER FUNCTION REPLICATE( CHARACTER cVal, NUMERIC nVal )
Even local declarations can be done like
    NUMERIC LOCAL n1, n2
    CHARACTER c1, c2
    STATIC NUMERIC n3
Like in C.
just another alternative.
Regards,

Carlos.


From harbour.01 at syenar.hu  Tue Oct 16 12:23:23 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 16 17:23:33 2007
Subject: [Harbour] CHANGELOG: 2007-10-16 15:18 UTC+0100 Viktor
	Szakats(harbour.01 syenar.hu)
In-Reply-To: <001201c81000$78db6df0$1700000a@PcJuanxp>
References: <01c80ff7$Blat.v2.6.2$5160c7d8$10d8a51f6034@127.0.0.1>
	<001201c81000$78db6df0$1700000a@PcJuanxp>
Message-ID: <A0A11C7C-0B68-4E4F-9710-F82CBC33B286@syenar.hu>

Thanks Juan, I'll fix these tomorrow.

Brgds,
Viktor

On 2007.10.16., at 16:25, Juan G?lvez wrote:

> Hi Viktor,
>
> I think you should delete the reference operator (&) of lines  
> 438-439 of tprinter.c (GetPrinters function).
>
> Best regards
> Juan
>
> ----- Original Message ----- From: "Szak?ts Viktor" <harbour. 
> 01@syenar.hu>
> To: <harbour@harbour-project.org>
> Sent: Tuesday, October 16, 2007 3:20 PM
> Subject: [Harbour] CHANGELOG: 2007-10-16 15:18 UTC+0100 Viktor  
> Szakats(harbour.01 syenar.hu)
>
>
>> 2007-10-16 15:18 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>>   + contrib/win32prn
>>   + contrib/win32prn/makefile.bc
>>   + contrib/win32prn/make_b32.bat
>>   + contrib/win32prn/w32_pcls.prg
>>   + contrib/win32prn/w32_papi.c
>>   + contrib/win32prn/tprinter.c
>>   + contrib/win32prn/testw32p.prg
>>     + Ported Win32 specific bitmap printing class from xharbour core.
>>     ; Please test.
>> --
>> Brgds,
>> Viktor
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>

From harbour.01 at syenar.hu  Tue Oct 16 12:26:46 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 16 17:26:56 2007
Subject: [Harbour] Contrib merge: OLE2 + WIN32PRN [ + directx ]
Message-ID: <05E83881-9BAF-480D-9DE5-2D2B80E7B3BB@syenar.hu>

Hi group,

Is there any objection or any opinion on merging
the three contribs below, to one "win32" contrib:
- OLE2
- WIN32PRN
- directx (maybe)

They are all targeting Win32 only, with Win32
specific features and all of them are useful
under that platform.

Merging wouldn't change source granularity, so
unused parts of the lib wouldn't be included in
the final executables.

The idea is to have one common contrib lib for
all Win32 API specific functionality.

Brgds,
Viktor

From gvarona at ec-red.com  Tue Oct 16 15:23:03 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Tue Oct 16 20:16:22 2007
Subject: [Harbour] CHANGELOG: 2007-10-16 12:50 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <01c80fe4$Blat.v2.6.2$637e13ca$140a8a55b1c@127.0.0.1>
References: <01c80fe4$Blat.v2.6.2$637e13ca$140a8a55b1c@127.0.0.1>
Message-ID: <47151DA7.5060401@ec-red.com>

Szak?ts Viktor escribi?:

> 2007-10-16 12:50 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
> * source/rtl/isprint.c
> ! Fixed ISPRINTER() on Win32 after last changes.
> Thanks Guillermo, pls test now.

Thanks Viktor, now work ok.

But, I get this:

D:\harbour>make_gnu clean
D:\harbour>make_gnu
../../xhbfunc.c: In function `HB_FUN_XHB__KEYBOARD':
../../xhbfunc.c:66: warning: implicit declaration of function 
`hb_inkeyReset'
../../xhbfunc.c:67: warning: implicit declaration of function `hb_inkeyPut'
D:\harbour>e:

Last ChangeLog:

/*
 * $Id: ChangeLog 7828 2007-10-16 13:20:22Z vszakats $
 */

/* Use this format for the entry headers:
   YYYY-MM-DD HH:MM UTC[-|+]hhmm Your Full Name <your_email@address>
   For example:
   2002-12-01 13:30 UTC+0100 Foo Bar <foo.bar@foobar.org>
*/

2007-10-16 15:18 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   + contrib/win32prn

. . .

Best Regards.
GVS
From harbour.01 at syenar.hu  Tue Oct 16 16:08:33 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 16 21:08:37 2007
Subject: [Harbour] CHANGELOG: 2007-10-16 23:08 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c81038$Blat.v2.6.2$b5dad1ae$c30145648a8@127.0.0.1>

2007-10-16 23:08 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * contrib/xhb/xhbfunc.c
   * contrib/win32prn/make_b32.bat
   * contrib/win32prn/tprinter.c
     ! Warnings/errors fixed from previous commit.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Oct 16 17:10:23 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 16 22:10:30 2007
Subject: [Harbour] CHANGELOG: 2007-10-16 23:58 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c81041$Blat.v2.6.2$59396e16$13043f3900da@127.0.0.1>

2007-10-16 23:58 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * source/rtl/isprint.c
     - Removed Win32 bitmap printer specific (non-multiplatform)
       functionality. For this feature (and more) pls use 
       hbwin32prn.lib from contrib:
       PRINTEREXISTS(), GETDEFAULTPRINTER(), etc.
     % Minor optimization.
--
Brgds,
Viktor

From gvarona at ec-red.com  Tue Oct 16 17:23:15 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Tue Oct 16 22:16:37 2007
Subject: [Harbour] CHANGELOG: 2007-10-16 23:08 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <01c81038$Blat.v2.6.2$b5dad1ae$c30145648a8@127.0.0.1>
References: <01c81038$Blat.v2.6.2$b5dad1ae$c30145648a8@127.0.0.1>
Message-ID: <471539D3.1010705@ec-red.com>

Ok. Viktor, now not warnings

Bert Regards.
GVS

Szak?ts Viktor escribi?:

>2007-10-16 23:08 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>   * contrib/xhb/xhbfunc.c
>   * contrib/win32prn/make_b32.bat
>   * contrib/win32prn/tprinter.c
>     ! Warnings/errors fixed from previous commit.
>--
>Brgds,
>Viktor
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
>  
>

From harbour.01 at syenar.hu  Tue Oct 16 17:37:29 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 16 22:37:33 2007
Subject: [Harbour] CHANGELOG: 2007-10-17 00:33 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c81045$Blat.v2.6.2$226c7e24$970113ecd0a@127.0.0.1>

2007-10-17 00:33 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * contrib/Makefile
   + contrib/win32prn/Makefile
   + contrib/win32prn/makefile.vc
   + contrib/win32prn/make_vc.bat
     + Added win32prn to GNU make system.
     + Added VC makefiles for win32prn.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Oct 16 17:50:05 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 16 22:50:13 2007
Subject: [Harbour] PCODE optimization: RETURN NIL/.T./.F.
Message-ID: <01D0F066-D5AA-4A72-B20C-362D8CC795DB@syenar.hu>

Hi Przemek,

We've once discussed that distinct PCODE could
be added for the very oftenly used RETURN NIL,
RETURN .F., RETURN .T. constructs.

So that
- HB_P_PUSHNIL + HB_P_RETVALUE would become: HB_P_RETNIL
- HB_P_FALSE + HB_P_RETVALUE would become: HB_P_RETFALSE
- HB_P_TRUE + HB_P_RETVALUE would become: HB_P_RETTRUE

Do you think this is worth the effort? Would we gain some real-life  
performance?

Brgds,
Viktor

From miguelangel at marchuet.net  Wed Oct 17 03:48:27 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Oct 17 08:55:37 2007
Subject: [Harbour] Information about _NullFlags
Message-ID: <4715CC5B.9050909@marchuet.net>

if( memcmp( dbFieldInfo.atomName, "_NullFlags", 10 ) == 0 )
{
   /* TODO: NULLABLE and VARLENGTH support
      For each Varchar and Varbinary field, one bit, or "varlength" bit, is allocated
      in the last system field, which is a hidden field and stores the null status for
      all fields that can be null. If the Varchar or Varbinary field can be null, the
      null bit follows the "varlength" bit. If the "varlength" bit is set to 1, the length
      of the actual field value length is stored in the last byte of the field. Otherwise,
      if the bit is set to 0, length of the value is equal to the field size.
   */
}

Best regards,
Miguel Angel marchuet
From harbour.01 at syenar.hu  Wed Oct 17 04:58:05 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 17 09:58:09 2007
Subject: [Harbour] CHANGELOG: 2007-10-17 11:55 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c810a4$Blat.v2.6.2$36b4f910$94444b1e9bc@127.0.0.1>

2007-10-17 11:55 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * common.mak
   * source/rtl/Makefile
   * source/rtl/oemansi.c
   + source/rtl/oemansix.c
   * source/rtl/typefile.prg
   + source/rtl/typefilx.prg
   * source/rdd/Makefile
   * source/rdd/dbjoin.prg
   + source/rdd/dbjoinx.prg
   * source/rdd/dblist.prg
   + source/rdd/dblistx.prg
   * source/rdd/dbtotal.prg
   + source/rdd/dbtotalx.prg
   * source/rdd/dbstrux.prg
   + source/rdd/dbstruxx.prg
   * source/rdd/dbfuncs.prg
   + source/rdd/dbfuncsx.prg
   * source/rdd/dbsort.prg
   + source/rdd/dbsortx.prg
   * source/rdd/dbcmd.c
   + source/rdd/dbcmdx.c
   * source/rdd/dbupdat.prg
   + source/rdd/dbupdatx.prg
     + Moved XPP compatible functions into separated source files.
--
Brgds,
Viktor

From miguelangel at marchuet.net  Wed Oct 17 05:27:29 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Oct 17 10:34:38 2007
Subject: [Harbour] FTP corruption detected but false
Message-ID: <4715E391.8030507@marchuet.net>

FTP corruption detected but false at fieldtype

G length 4

I send to you the file in question.

I don't found where is the problem. I'm making some changes in RDD to activate flags.
I'm assigning flags on open DBF. I remember to you that the last field is HB_FF_HIDDEN & HB_FF_BINARY.

FCount, DbStruct don't show hidden fields (this are system control fields)

static ERRCODE hb_dbfOpen( DBFAREAP pArea, LPDBOPENINFO pOpenInfo )
{
    ERRCODE errCode;
    USHORT uiFlags, uiFields, uiSize, uiCount, uiSkip;
    BOOL fRetry, fRawBlob;
    PHB_ITEM pError, pItem;
    PHB_FNAME pFileName;
    BYTE * pBuffer;
    LPDBFFIELD pField;
    DBFIELDINFO dbFieldInfo;
    BYTE szFileName[ _POSIX_PATH_MAX + 1 ];
    char szAlias[ HARBOUR_MAX_RDD_ALIAS_LENGTH + 1 ];

    HB_TRACE(HB_TR_DEBUG, ("hb_dbfOpen(%p, %p)", pArea, pOpenInfo));

    pArea->lpdbOpenInfo = pOpenInfo;

    pItem = hb_itemNew( NULL );

    if( SELF_RDDINFO( SELF_RDDNODE( pArea ), RDDI_PENDINGTRIGGER,
                      pOpenInfo->ulConnection, pItem ) == SUCCESS )
    {
       if( HB_IS_STRING( pItem ) )
          hb_dbfTriggerSet( pArea, pItem );
    }

    if( !pArea->fTrigger )
    {
       if( SELF_RDDINFO( SELF_RDDNODE( pArea ), RDDI_TRIGGER,
                         pOpenInfo->ulConnection, pItem ) == SUCCESS )
       {
          if( HB_IS_STRING( pItem ) )
             hb_dbfTriggerSet( pArea, pItem );
       }
    }

    if( pArea->fTrigger )
    {
       hb_itemPutC( pItem, ( char * ) pOpenInfo->abName );
       if( !hb_dbfTriggerDo( pArea, EVENT_PREUSE, 0, pItem ) )
       {
          hb_itemRelease( pItem );
          pArea->lpdbOpenInfo = NULL;
          return FAILURE;
       }
       hb_strncpy( ( char * ) szFileName, hb_itemGetCPtr( pItem ), _POSIX_PATH_MAX );
    }
    else
       hb_strncpy( ( char * ) szFileName, ( char * ) pOpenInfo->abName, _POSIX_PATH_MAX );

    if( !pArea->bLockType )
    {
       hb_itemClear( pItem );
       if( SELF_INFO( ( AREAP ) pArea, DBI_LOCKSCHEME, pItem ) != SUCCESS )
       {
          hb_itemRelease( pItem );
          pArea->lpdbOpenInfo = NULL;
          return FAILURE;
       }
       pArea->bLockType = hb_itemGetNI( pItem );
       if( !pArea->bLockType )
          pArea->bLockType = DB_DBFLOCK_CLIP;
    }
#ifndef HB_CDP_SUPPORT_OFF
    if( pOpenInfo->cdpId )
    {
       pArea->cdPage = hb_cdpFind( (char *) pOpenInfo->cdpId );
       if( !pArea->cdPage )
          pArea->cdPage = hb_cdp_page;
    }
    else
       pArea->cdPage = hb_cdp_page;
#endif
    pArea->fShared = pOpenInfo->fShared;
    pArea->fReadonly = pOpenInfo->fReadonly;
    /* Force exclusive mode
     *   0: AUTOSHARE disabled.
     *   1: AUTOSHARE enabled.
     *   2: force exclusive mode.
     * */
    if( hb_set.HB_SET_AUTOSHARE == 2 )
       pArea->fShared = FALSE;
    uiFlags = (pArea->fReadonly ? FO_READ : FO_READWRITE) |
              (pArea->fShared ? FO_DENYNONE : FO_EXCLUSIVE);
    pError = NULL;

    pFileName = hb_fsFNameSplit( ( char * ) szFileName );
    /* Add default file name extension if necessary */
    if( ! pFileName->szExtension )
    {
       hb_itemClear( pItem );
       if( SELF_INFO( ( AREAP ) pArea, DBI_TABLEEXT, pItem ) != SUCCESS )
       {
          hb_xfree( pFileName );
          hb_itemRelease( pItem );
          pArea->lpdbOpenInfo = NULL;
          return FAILURE;
       }
       pFileName->szExtension = hb_itemGetCPtr( pItem );
       hb_fsFNameMerge( ( char * ) szFileName, pFileName );
    }

    /* Create default alias if necessary */
    if( !pOpenInfo->atomAlias && pFileName->szName )
    {
       hb_strncpyUpperTrim( szAlias, pFileName->szName, HARBOUR_MAX_RDD_ALIAS_LENGTH );
       pOpenInfo->atomAlias = ( BYTE * ) szAlias;
    }
    hb_xfree( pFileName );

    hb_itemClear( pItem );
    fRawBlob = SELF_RDDINFO( SELF_RDDNODE( pArea ), RDDI_BLOB_SUPPORT, pOpenInfo->ulConnection, pItem ) == SUCCESS &&
               hb_itemGetL( pItem );

    hb_itemRelease( pItem );

    if( fRawBlob )
    {
       uiFields = uiSkip = 0;
       pBuffer = NULL;
       pArea->fHasMemo = TRUE;
    }
    else
    {
       /* Try open */
       do
       {
          pArea->hDataFile = hb_fsExtOpen( szFileName, NULL, uiFlags |
                                           FXO_DEFAULTS | FXO_SHARELOCK | FXO_COPYNAME,
                                           NULL, pError );
          if( pArea->hDataFile == FS_ERROR )
          {
             if( !pError )
             {
                pError = hb_errNew();
                hb_errPutGenCode( pError, EG_OPEN );
                hb_errPutSubCode( pError, EDBF_OPEN_DBF );
                hb_errPutOsCode( pError, hb_fsError() );
                hb_errPutDescription( pError, hb_langDGetErrorDesc( EG_OPEN ) );
                hb_errPutFileName( pError, ( char * ) szFileName );
                hb_errPutFlags( pError, EF_CANRETRY | EF_CANDEFAULT );
             }
             fRetry = ( SELF_ERROR( ( AREAP ) pArea, pError ) == E_RETRY );
          }
          else
             fRetry = FALSE;
       } while( fRetry );

       if( pError )
       {
          hb_itemRelease( pError );
          pError = NULL;
       }

       /* Exit if error */
       if( pArea->hDataFile == FS_ERROR )
       {
          SELF_CLOSE( ( AREAP ) pArea );
          pArea->lpdbOpenInfo = NULL;
          return FAILURE;
       }

       /* Allocate only after succesfully open file */
       pArea->szDataFileName = hb_strdup( ( char * ) szFileName );

       /* Read file header and exit if error */
       errCode = SELF_READDBHEADER( ( AREAP ) pArea );
       if( errCode != SUCCESS )
       {
          SELF_CLOSE( ( AREAP ) pArea );
          pArea->lpdbOpenInfo = NULL;
          return errCode;
       }

       /* Add fields */
       uiSkip = 0;
       uiFields = ( pArea->uiHeaderLen - sizeof( DBFHEADER ) ) / sizeof( DBFFIELD );
       uiSize = uiFields * sizeof( DBFFIELD );
       pBuffer = uiFields ? ( BYTE * ) hb_xgrab( uiSize ) : NULL;

       /* Read fields and exit if error */
       do
       {
          hb_fsSeek( pArea->hDataFile, sizeof( DBFHEADER ), FS_SET );
          if( hb_fsRead( pArea->hDataFile, pBuffer, uiSize ) != uiSize )
          {
             errCode = FAILURE;
             if( !pError )
             {
                pError = hb_errNew();
                hb_errPutGenCode( pError, EG_CORRUPTION );
                hb_errPutSubCode( pError, EDBF_CORRUPT );
                hb_errPutDescription( pError, hb_langDGetErrorDesc( EG_CORRUPTION ) );
                hb_errPutFileName( pError, pArea->szDataFileName );
                hb_errPutFlags( pError, EF_CANRETRY | EF_CANDEFAULT );
             }
             fRetry = ( SELF_ERROR( ( AREAP ) pArea, pError ) == E_RETRY );
          }
          else
          {
             errCode = SUCCESS;
             break;
          }
       } while( fRetry );

       if( pError )
       {
          hb_itemRelease( pError );
       }

       /* Exit if error */
       if( errCode != SUCCESS )
       {
          if( pBuffer )
             hb_xfree( pBuffer );
          SELF_CLOSE( ( AREAP ) pArea );
          pArea->lpdbOpenInfo = NULL;
          return errCode;
       }

       /* some RDDs use the additional space in the header after field arrray
          for private data we should check for 0x0D marker to not use this
          data as fields description */
       for( uiCount = 0; uiCount < uiFields; uiCount++ )
       {
          pField = ( LPDBFFIELD ) ( pBuffer + uiCount * sizeof( DBFFIELD ) );
          if( pField->bName[ 0 ] == 0x0d )
          {
             uiFields = uiCount;
             break;
          }
          else if( pArea->bTableType == DB_DBF_VFP &&
                   pField->bFieldFlags & 0x01 )
          {
             uiSkip++;
          }
          /* Peter added it for FVP DBFs but in wrong place,
             anyhow I cannot see why it's necessary, FVP private data
             in header should be after 0x0d - I disabled this code, [druzus] */
          /*
          if( pArea->bTableType == DB_DBF_VFP &&
              pBuffer[ uiCount * sizeof( DBFFIELD ) ] == 0x00 )
          {
             uiFields = uiCount;
             break;
          }
          */
       }
       uiFields -= uiSkip;
    }

    /* CL5.3 allow to create and open DBFs without fields */
#ifdef HB_C52_STRICT
    if( uiFields == 0 )
    {
       errCode = FAILURE;
    }
    else
#endif
    {
       errCode = SELF_SETFIELDEXTENT( ( AREAP ) pArea, uiFields );
       if( errCode != SUCCESS )
       {
          SELF_CLOSE( ( AREAP ) pArea );
          pArea->lpdbOpenInfo = NULL;
          return errCode;
       }
    }

    /* Clear dbFieldInfo structure */
    memset( &dbFieldInfo, 0, sizeof( dbFieldInfo ) );

    /* Size for deleted flag */
    pArea->uiRecordLen = 1;
    for( uiCount = 0; uiCount < uiFields + uiSkip; uiCount++ )
    {
       pField = ( LPDBFFIELD ) ( pBuffer + uiCount * sizeof( DBFFIELD ) );
       dbFieldInfo.atomName = pField->bName;
       dbFieldInfo.atomName[10] = '\0';
       /* hb_strUpper( (char *) dbFieldInfo.atomName, 11 ); */
       dbFieldInfo.uiLen = pField->bLen;
       dbFieldInfo.uiDec = 0;
       dbFieldInfo.uiTypeExtended = 0;
       dbFieldInfo.uiFlags = pField->bFieldFlags;
       switch( pField->bType )
       {
          case 'C':
             dbFieldInfo.uiType = HB_FT_STRING;
             dbFieldInfo.uiLen = pField->bLen + pField->bDec * 256;
             break;

          case 'L':
             dbFieldInfo.uiType = HB_FT_LOGICAL;
             dbFieldInfo.uiLen = 1;
             break;

          case 'D':
             dbFieldInfo.uiType = HB_FT_DATE;
             if( dbFieldInfo.uiLen != 3 && dbFieldInfo.uiLen != 4 )
                dbFieldInfo.uiLen = 8;
             break;

          case 'I':
             dbFieldInfo.uiType = HB_FT_INTEGER;
             if( ( dbFieldInfo.uiLen > 4 && dbFieldInfo.uiLen != 8 ) ||
                 dbFieldInfo.uiLen == 0 )
                dbFieldInfo.uiLen = 4;
             dbFieldInfo.uiDec = pField->bDec;
             break;

          case 'Y':
             dbFieldInfo.uiType = HB_FT_CURRENCY;
             if( ( dbFieldInfo.uiLen > 4 && dbFieldInfo.uiLen != 8 ) ||
                 dbFieldInfo.uiLen == 0 )
                dbFieldInfo.uiLen = 8;
             dbFieldInfo.uiDec = pField->bDec;
             break;

          case '2':
          case '4':
             dbFieldInfo.uiType = HB_FT_INTEGER;
             dbFieldInfo.uiLen = pField->bType - '0';
             break;

          case 'N':
             dbFieldInfo.uiType = HB_FT_LONG;
             dbFieldInfo.uiDec = pField->bDec;
             /* DBASE documentation defines maximum numeric field size as 20
              * but Clipper allows to create longer fields so I removed this
              * limit, Druzus
              */
             /*
             if( pField->bLen > 20 )
                errCode = FAILURE;
             */
             break;

          case 'F':
             dbFieldInfo.uiType = HB_FT_FLOAT;
             dbFieldInfo.uiDec = pField->bDec;
             /* See note above */
             break;

          case '8':
          case 'B':
             dbFieldInfo.uiType = HB_FT_DOUBLE;
             dbFieldInfo.uiDec = pField->bDec;
             if( dbFieldInfo.uiLen != 8 )
                errCode = FAILURE;
             break;

          /* types which are not supported by VM - mapped to different ones */
          case 'T':
             if( dbFieldInfo.uiLen == 4 )
                dbFieldInfo.uiType = HB_FT_TIME;
             else if( dbFieldInfo.uiLen == 8 )
                dbFieldInfo.uiType = HB_FT_DATETIME;
             else
                errCode = FAILURE;
             break;

          case '@':
             dbFieldInfo.uiType = HB_FT_TIMESTAMP;
             if( dbFieldInfo.uiLen != 8 )
                errCode = FAILURE;
             pArea->fModStamp = TRUE;
             break;

          case '=':
             dbFieldInfo.uiType = HB_FT_MODTIME;
             if( dbFieldInfo.uiLen != 8 )
                errCode = FAILURE;
             pArea->fModStamp = TRUE;
             break;

          case '^':
             dbFieldInfo.uiType = HB_FT_ROWVER;
             if( dbFieldInfo.uiLen != 8 )
                errCode = FAILURE;
             pArea->fModStamp = TRUE;
             break;

          case '+':
             dbFieldInfo.uiType = HB_FT_AUTOINC;
             if( dbFieldInfo.uiLen != 4 )
                errCode = FAILURE;
             pArea->fAutoInc = TRUE;
             break;

          case 'Q':
             dbFieldInfo.uiType = HB_FT_VARLENGTH;
             dbFieldInfo.uiFlags |= HB_FF_BINARY;
             break;

          case 'V':
             if( pArea->bTableType == DB_DBF_VFP )
             {
                dbFieldInfo.uiType = HB_FT_VARLENGTH;
             }
             else
             {
                dbFieldInfo.uiType = HB_FT_ANY;
                if( dbFieldInfo.uiLen >= 6 )
                {
                   pArea->uiMemoVersion = DB_MEMOVER_SIX;
                   pArea->fHasMemo = TRUE;
                }
             }
             break;

          case 'M':
             dbFieldInfo.uiType = HB_FT_MEMO;
             pArea->fHasMemo = TRUE;
             break;

          case 'P':
             dbFieldInfo.uiType = HB_FT_PICTURE;
             dbFieldInfo.uiFlags |= HB_FF_BINARY;
             pArea->fHasMemo = TRUE;
             break;

          case 'W':
             dbFieldInfo.uiType = HB_FT_BLOB;
             dbFieldInfo.uiFlags |= HB_FF_BINARY;
             pArea->fHasMemo = TRUE;
             break;

          case 'G':
             dbFieldInfo.uiType = HB_FT_OLE;
             dbFieldInfo.uiFlags |= HB_FF_BINARY;
             pArea->fHasMemo = TRUE;
             break;

          case '0':
              /* TODO: NULLABLE and VARLENGTH support
                if( memcmp( dbFieldInfo.atomName, "_NullFlags", 10 ) == 0 )
                For each Varchar and Varbinary field, one bit, or "varlength" bit, is allocated
                in the last system field, which is a hidden field and stores the null status for
                all fields that can be null. If the Varchar or Varbinary field can be null, the
                null bit follows the "varlength" bit. If the "varlength" bit is set to 1, the length
                of the actual field value length is stored in the last byte of the field. Otherwise,
                if the bit is set to 0, length of the value is equal to the field size.
             */
             if( memcmp( dbFieldInfo.atomName, "_NullFlags", 10 ) == 0 )
             {
                dbFieldInfo.uiType = HB_FT_STRING;
                break;
             }

          default:
             errCode = FAILURE;
             break;
       }

       /* Add field */
       if( errCode == SUCCESS )
       {
          if( dbFieldInfo.uiFlags & HB_FF_AUTOINC )
             pArea->fAutoInc = TRUE;
          errCode = SELF_ADDFIELD( ( AREAP ) pArea, &dbFieldInfo );
       }

       /* Exit if error */
       if( errCode != SUCCESS )
          break;
    }
    if( pBuffer )
       hb_xfree( pBuffer );

    /* Exit if error */
    if( errCode != SUCCESS )
    {
       if( hb_vmRequestQuery() == 0 )
       {
          pError = hb_errNew();
          hb_errPutGenCode( pError, EG_CORRUPTION );
          hb_errPutSubCode( pError, EDBF_CORRUPT );
          hb_errPutDescription( pError, hb_langDGetErrorDesc( EG_CORRUPTION ) );
          hb_errPutFileName( pError, pArea->szDataFileName );
          hb_errPutFlags( pError, EF_CANDEFAULT );
          SELF_ERROR( ( AREAP ) pArea, pError );
          hb_itemRelease( pError );
       }
       SELF_CLOSE( ( AREAP ) pArea );
       pArea->lpdbOpenInfo = NULL;
       return errCode;
    }

    pItem = hb_itemNew( NULL );
    if( SELF_RDDINFO( SELF_RDDNODE( pArea ), RDDI_PENDINGPASSWORD,
                      pOpenInfo->ulConnection, pItem ) == SUCCESS )
    {
       hb_dbfPasswordSet( pArea, pItem, FALSE );
    }
    else
    {
       hb_itemClear( pItem );
       if( SELF_RDDINFO( SELF_RDDNODE( pArea ), RDDI_PASSWORD,
                         pOpenInfo->ulConnection, pItem ) == SUCCESS )
       {
          hb_dbfPasswordSet( pArea, pItem, FALSE );
       }
    }
    hb_itemRelease( pItem );

    /* Open memo file if exists */
    if( pArea->fHasMemo )
    {
       pFileName = hb_fsFNameSplit( ( char * ) szFileName );
       pFileName->szExtension = NULL;
       hb_fsFNameMerge( ( char * ) szFileName, pFileName );
       hb_xfree( pFileName );
       pOpenInfo->abName = szFileName;
       errCode = SELF_OPENMEMFILE( ( AREAP ) pArea, pOpenInfo );
    }

    if( errCode == SUCCESS )
    {
       /* If successful call SUPER_OPEN to finish system jobs */
       errCode = SUPER_OPEN( ( AREAP ) pArea, pOpenInfo );
    }

    if( errCode != SUCCESS )
    {
       SELF_CLOSE( ( AREAP ) pArea );
       pArea->lpdbOpenInfo = NULL;
       return FAILURE;
    }

    /* Alloc buffer */
    pArea->pRecord = ( BYTE * ) hb_xgrab( pArea->uiRecordLen );
    pArea->fValidBuffer = FALSE;

    /* Update the number of record for corrupted headers */
    pArea->ulRecCount = hb_dbfCalcRecCount( pArea );

    /* Position cursor at the first record */
    errCode = SELF_GOTOP( ( AREAP ) pArea );

    if( pArea->fTrigger )
       hb_dbfTriggerDo( pArea, EVENT_POSTUSE, 0, NULL );

    pArea->lpdbOpenInfo = NULL;

    return errCode;
}

best regards,
Miguel Angel Marchuet
From miguelangel at marchuet.net  Wed Oct 17 05:28:43 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Oct 17 10:35:54 2007
Subject: [Harbour] FTP corruption detected but false
In-Reply-To: <4715E391.8030507@marchuet.net>
References: <4715E391.8030507@marchuet.net>
Message-ID: <4715E3DB.8080305@marchuet.net>

I send the missing file.

Miguel Angel Marchuet escribi?:
> FTP corruption detected but false at fieldtype
> 
> G length 4
> 
> I send to you the file in question.
> 
> I don't found where is the problem. I'm making some changes in RDD to 
> activate flags.
> I'm assigning flags on open DBF. I remember to you that the last field 
> is HB_FF_HIDDEN & HB_FF_BINARY.
> 
> FCount, DbStruct don't show hidden fields (this are system control fields)
> 
> static ERRCODE hb_dbfOpen( DBFAREAP pArea, LPDBOPENINFO pOpenInfo )
> {
>    ERRCODE errCode;
>    USHORT uiFlags, uiFields, uiSize, uiCount, uiSkip;
>    BOOL fRetry, fRawBlob;
>    PHB_ITEM pError, pItem;
>    PHB_FNAME pFileName;
>    BYTE * pBuffer;
>    LPDBFFIELD pField;
>    DBFIELDINFO dbFieldInfo;
>    BYTE szFileName[ _POSIX_PATH_MAX + 1 ];
>    char szAlias[ HARBOUR_MAX_RDD_ALIAS_LENGTH + 1 ];
> 
>    HB_TRACE(HB_TR_DEBUG, ("hb_dbfOpen(%p, %p)", pArea, pOpenInfo));
> 
>    pArea->lpdbOpenInfo = pOpenInfo;
> 
>    pItem = hb_itemNew( NULL );
> 
>    if( SELF_RDDINFO( SELF_RDDNODE( pArea ), RDDI_PENDINGTRIGGER,
>                      pOpenInfo->ulConnection, pItem ) == SUCCESS )
>    {
>       if( HB_IS_STRING( pItem ) )
>          hb_dbfTriggerSet( pArea, pItem );
>    }
> 
>    if( !pArea->fTrigger )
>    {
>       if( SELF_RDDINFO( SELF_RDDNODE( pArea ), RDDI_TRIGGER,
>                         pOpenInfo->ulConnection, pItem ) == SUCCESS )
>       {
>          if( HB_IS_STRING( pItem ) )
>             hb_dbfTriggerSet( pArea, pItem );
>       }
>    }
> 
>    if( pArea->fTrigger )
>    {
>       hb_itemPutC( pItem, ( char * ) pOpenInfo->abName );
>       if( !hb_dbfTriggerDo( pArea, EVENT_PREUSE, 0, pItem ) )
>       {
>          hb_itemRelease( pItem );
>          pArea->lpdbOpenInfo = NULL;
>          return FAILURE;
>       }
>       hb_strncpy( ( char * ) szFileName, hb_itemGetCPtr( pItem ), 
> _POSIX_PATH_MAX );
>    }
>    else
>       hb_strncpy( ( char * ) szFileName, ( char * ) pOpenInfo->abName, 
> _POSIX_PATH_MAX );
> 
>    if( !pArea->bLockType )
>    {
>       hb_itemClear( pItem );
>       if( SELF_INFO( ( AREAP ) pArea, DBI_LOCKSCHEME, pItem ) != SUCCESS )
>       {
>          hb_itemRelease( pItem );
>          pArea->lpdbOpenInfo = NULL;
>          return FAILURE;
>       }
>       pArea->bLockType = hb_itemGetNI( pItem );
>       if( !pArea->bLockType )
>          pArea->bLockType = DB_DBFLOCK_CLIP;
>    }
> #ifndef HB_CDP_SUPPORT_OFF
>    if( pOpenInfo->cdpId )
>    {
>       pArea->cdPage = hb_cdpFind( (char *) pOpenInfo->cdpId );
>       if( !pArea->cdPage )
>          pArea->cdPage = hb_cdp_page;
>    }
>    else
>       pArea->cdPage = hb_cdp_page;
> #endif
>    pArea->fShared = pOpenInfo->fShared;
>    pArea->fReadonly = pOpenInfo->fReadonly;
>    /* Force exclusive mode
>     *   0: AUTOSHARE disabled.
>     *   1: AUTOSHARE enabled.
>     *   2: force exclusive mode.
>     * */
>    if( hb_set.HB_SET_AUTOSHARE == 2 )
>       pArea->fShared = FALSE;
>    uiFlags = (pArea->fReadonly ? FO_READ : FO_READWRITE) |
>              (pArea->fShared ? FO_DENYNONE : FO_EXCLUSIVE);
>    pError = NULL;
> 
>    pFileName = hb_fsFNameSplit( ( char * ) szFileName );
>    /* Add default file name extension if necessary */
>    if( ! pFileName->szExtension )
>    {
>       hb_itemClear( pItem );
>       if( SELF_INFO( ( AREAP ) pArea, DBI_TABLEEXT, pItem ) != SUCCESS )
>       {
>          hb_xfree( pFileName );
>          hb_itemRelease( pItem );
>          pArea->lpdbOpenInfo = NULL;
>          return FAILURE;
>       }
>       pFileName->szExtension = hb_itemGetCPtr( pItem );
>       hb_fsFNameMerge( ( char * ) szFileName, pFileName );
>    }
> 
>    /* Create default alias if necessary */
>    if( !pOpenInfo->atomAlias && pFileName->szName )
>    {
>       hb_strncpyUpperTrim( szAlias, pFileName->szName, 
> HARBOUR_MAX_RDD_ALIAS_LENGTH );
>       pOpenInfo->atomAlias = ( BYTE * ) szAlias;
>    }
>    hb_xfree( pFileName );
> 
>    hb_itemClear( pItem );
>    fRawBlob = SELF_RDDINFO( SELF_RDDNODE( pArea ), RDDI_BLOB_SUPPORT, 
> pOpenInfo->ulConnection, pItem ) == SUCCESS &&
>               hb_itemGetL( pItem );
> 
>    hb_itemRelease( pItem );
> 
>    if( fRawBlob )
>    {
>       uiFields = uiSkip = 0;
>       pBuffer = NULL;
>       pArea->fHasMemo = TRUE;
>    }
>    else
>    {
>       /* Try open */
>       do
>       {
>          pArea->hDataFile = hb_fsExtOpen( szFileName, NULL, uiFlags |
>                                           FXO_DEFAULTS | FXO_SHARELOCK | 
> FXO_COPYNAME,
>                                           NULL, pError );
>          if( pArea->hDataFile == FS_ERROR )
>          {
>             if( !pError )
>             {
>                pError = hb_errNew();
>                hb_errPutGenCode( pError, EG_OPEN );
>                hb_errPutSubCode( pError, EDBF_OPEN_DBF );
>                hb_errPutOsCode( pError, hb_fsError() );
>                hb_errPutDescription( pError, hb_langDGetErrorDesc( 
> EG_OPEN ) );
>                hb_errPutFileName( pError, ( char * ) szFileName );
>                hb_errPutFlags( pError, EF_CANRETRY | EF_CANDEFAULT );
>             }
>             fRetry = ( SELF_ERROR( ( AREAP ) pArea, pError ) == E_RETRY );
>          }
>          else
>             fRetry = FALSE;
>       } while( fRetry );
> 
>       if( pError )
>       {
>          hb_itemRelease( pError );
>          pError = NULL;
>       }
> 
>       /* Exit if error */
>       if( pArea->hDataFile == FS_ERROR )
>       {
>          SELF_CLOSE( ( AREAP ) pArea );
>          pArea->lpdbOpenInfo = NULL;
>          return FAILURE;
>       }
> 
>       /* Allocate only after succesfully open file */
>       pArea->szDataFileName = hb_strdup( ( char * ) szFileName );
> 
>       /* Read file header and exit if error */
>       errCode = SELF_READDBHEADER( ( AREAP ) pArea );
>       if( errCode != SUCCESS )
>       {
>          SELF_CLOSE( ( AREAP ) pArea );
>          pArea->lpdbOpenInfo = NULL;
>          return errCode;
>       }
> 
>       /* Add fields */
>       uiSkip = 0;
>       uiFields = ( pArea->uiHeaderLen - sizeof( DBFHEADER ) ) / sizeof( 
> DBFFIELD );
>       uiSize = uiFields * sizeof( DBFFIELD );
>       pBuffer = uiFields ? ( BYTE * ) hb_xgrab( uiSize ) : NULL;
> 
>       /* Read fields and exit if error */
>       do
>       {
>          hb_fsSeek( pArea->hDataFile, sizeof( DBFHEADER ), FS_SET );
>          if( hb_fsRead( pArea->hDataFile, pBuffer, uiSize ) != uiSize )
>          {
>             errCode = FAILURE;
>             if( !pError )
>             {
>                pError = hb_errNew();
>                hb_errPutGenCode( pError, EG_CORRUPTION );
>                hb_errPutSubCode( pError, EDBF_CORRUPT );
>                hb_errPutDescription( pError, hb_langDGetErrorDesc( 
> EG_CORRUPTION ) );
>                hb_errPutFileName( pError, pArea->szDataFileName );
>                hb_errPutFlags( pError, EF_CANRETRY | EF_CANDEFAULT );
>             }
>             fRetry = ( SELF_ERROR( ( AREAP ) pArea, pError ) == E_RETRY );
>          }
>          else
>          {
>             errCode = SUCCESS;
>             break;
>          }
>       } while( fRetry );
> 
>       if( pError )
>       {
>          hb_itemRelease( pError );
>       }
> 
>       /* Exit if error */
>       if( errCode != SUCCESS )
>       {
>          if( pBuffer )
>             hb_xfree( pBuffer );
>          SELF_CLOSE( ( AREAP ) pArea );
>          pArea->lpdbOpenInfo = NULL;
>          return errCode;
>       }
> 
>       /* some RDDs use the additional space in the header after field 
> arrray
>          for private data we should check for 0x0D marker to not use this
>          data as fields description */
>       for( uiCount = 0; uiCount < uiFields; uiCount++ )
>       {
>          pField = ( LPDBFFIELD ) ( pBuffer + uiCount * sizeof( DBFFIELD 
> ) );
>          if( pField->bName[ 0 ] == 0x0d )
>          {
>             uiFields = uiCount;
>             break;
>          }
>          else if( pArea->bTableType == DB_DBF_VFP &&
>                   pField->bFieldFlags & 0x01 )
>          {
>             uiSkip++;
>          }
>          /* Peter added it for FVP DBFs but in wrong place,
>             anyhow I cannot see why it's necessary, FVP private data
>             in header should be after 0x0d - I disabled this code, 
> [druzus] */
>          /*
>          if( pArea->bTableType == DB_DBF_VFP &&
>              pBuffer[ uiCount * sizeof( DBFFIELD ) ] == 0x00 )
>          {
>             uiFields = uiCount;
>             break;
>          }
>          */
>       }
>       uiFields -= uiSkip;
>    }
> 
>    /* CL5.3 allow to create and open DBFs without fields */
> #ifdef HB_C52_STRICT
>    if( uiFields == 0 )
>    {
>       errCode = FAILURE;
>    }
>    else
> #endif
>    {
>       errCode = SELF_SETFIELDEXTENT( ( AREAP ) pArea, uiFields );
>       if( errCode != SUCCESS )
>       {
>          SELF_CLOSE( ( AREAP ) pArea );
>          pArea->lpdbOpenInfo = NULL;
>          return errCode;
>       }
>    }
> 
>    /* Clear dbFieldInfo structure */
>    memset( &dbFieldInfo, 0, sizeof( dbFieldInfo ) );
> 
>    /* Size for deleted flag */
>    pArea->uiRecordLen = 1;
>    for( uiCount = 0; uiCount < uiFields + uiSkip; uiCount++ )
>    {
>       pField = ( LPDBFFIELD ) ( pBuffer + uiCount * sizeof( DBFFIELD ) );
>       dbFieldInfo.atomName = pField->bName;
>       dbFieldInfo.atomName[10] = '\0';
>       /* hb_strUpper( (char *) dbFieldInfo.atomName, 11 ); */
>       dbFieldInfo.uiLen = pField->bLen;
>       dbFieldInfo.uiDec = 0;
>       dbFieldInfo.uiTypeExtended = 0;
>       dbFieldInfo.uiFlags = pField->bFieldFlags;
>       switch( pField->bType )
>       {
>          case 'C':
>             dbFieldInfo.uiType = HB_FT_STRING;
>             dbFieldInfo.uiLen = pField->bLen + pField->bDec * 256;
>             break;
> 
>          case 'L':
>             dbFieldInfo.uiType = HB_FT_LOGICAL;
>             dbFieldInfo.uiLen = 1;
>             break;
> 
>          case 'D':
>             dbFieldInfo.uiType = HB_FT_DATE;
>             if( dbFieldInfo.uiLen != 3 && dbFieldInfo.uiLen != 4 )
>                dbFieldInfo.uiLen = 8;
>             break;
> 
>          case 'I':
>             dbFieldInfo.uiType = HB_FT_INTEGER;
>             if( ( dbFieldInfo.uiLen > 4 && dbFieldInfo.uiLen != 8 ) ||
>                 dbFieldInfo.uiLen == 0 )
>                dbFieldInfo.uiLen = 4;
>             dbFieldInfo.uiDec = pField->bDec;
>             break;
> 
>          case 'Y':
>             dbFieldInfo.uiType = HB_FT_CURRENCY;
>             if( ( dbFieldInfo.uiLen > 4 && dbFieldInfo.uiLen != 8 ) ||
>                 dbFieldInfo.uiLen == 0 )
>                dbFieldInfo.uiLen = 8;
>             dbFieldInfo.uiDec = pField->bDec;
>             break;
> 
>          case '2':
>          case '4':
>             dbFieldInfo.uiType = HB_FT_INTEGER;
>             dbFieldInfo.uiLen = pField->bType - '0';
>             break;
> 
>          case 'N':
>             dbFieldInfo.uiType = HB_FT_LONG;
>             dbFieldInfo.uiDec = pField->bDec;
>             /* DBASE documentation defines maximum numeric field size as 20
>              * but Clipper allows to create longer fields so I removed this
>              * limit, Druzus
>              */
>             /*
>             if( pField->bLen > 20 )
>                errCode = FAILURE;
>             */
>             break;
> 
>          case 'F':
>             dbFieldInfo.uiType = HB_FT_FLOAT;
>             dbFieldInfo.uiDec = pField->bDec;
>             /* See note above */
>             break;
> 
>          case '8':
>          case 'B':
>             dbFieldInfo.uiType = HB_FT_DOUBLE;
>             dbFieldInfo.uiDec = pField->bDec;
>             if( dbFieldInfo.uiLen != 8 )
>                errCode = FAILURE;
>             break;
> 
>          /* types which are not supported by VM - mapped to different 
> ones */
>          case 'T':
>             if( dbFieldInfo.uiLen == 4 )
>                dbFieldInfo.uiType = HB_FT_TIME;
>             else if( dbFieldInfo.uiLen == 8 )
>                dbFieldInfo.uiType = HB_FT_DATETIME;
>             else
>                errCode = FAILURE;
>             break;
> 
>          case '@':
>             dbFieldInfo.uiType = HB_FT_TIMESTAMP;
>             if( dbFieldInfo.uiLen != 8 )
>                errCode = FAILURE;
>             pArea->fModStamp = TRUE;
>             break;
> 
>          case '=':
>             dbFieldInfo.uiType = HB_FT_MODTIME;
>             if( dbFieldInfo.uiLen != 8 )
>                errCode = FAILURE;
>             pArea->fModStamp = TRUE;
>             break;
> 
>          case '^':
>             dbFieldInfo.uiType = HB_FT_ROWVER;
>             if( dbFieldInfo.uiLen != 8 )
>                errCode = FAILURE;
>             pArea->fModStamp = TRUE;
>             break;
> 
>          case '+':
>             dbFieldInfo.uiType = HB_FT_AUTOINC;
>             if( dbFieldInfo.uiLen != 4 )
>                errCode = FAILURE;
>             pArea->fAutoInc = TRUE;
>             break;
> 
>          case 'Q':
>             dbFieldInfo.uiType = HB_FT_VARLENGTH;
>             dbFieldInfo.uiFlags |= HB_FF_BINARY;
>             break;
> 
>          case 'V':
>             if( pArea->bTableType == DB_DBF_VFP )
>             {
>                dbFieldInfo.uiType = HB_FT_VARLENGTH;
>             }
>             else
>             {
>                dbFieldInfo.uiType = HB_FT_ANY;
>                if( dbFieldInfo.uiLen >= 6 )
>                {
>                   pArea->uiMemoVersion = DB_MEMOVER_SIX;
>                   pArea->fHasMemo = TRUE;
>                }
>             }
>             break;
> 
>          case 'M':
>             dbFieldInfo.uiType = HB_FT_MEMO;
>             pArea->fHasMemo = TRUE;
>             break;
> 
>          case 'P':
>             dbFieldInfo.uiType = HB_FT_PICTURE;
>             dbFieldInfo.uiFlags |= HB_FF_BINARY;
>             pArea->fHasMemo = TRUE;
>             break;
> 
>          case 'W':
>             dbFieldInfo.uiType = HB_FT_BLOB;
>             dbFieldInfo.uiFlags |= HB_FF_BINARY;
>             pArea->fHasMemo = TRUE;
>             break;
> 
>          case 'G':
>             dbFieldInfo.uiType = HB_FT_OLE;
>             dbFieldInfo.uiFlags |= HB_FF_BINARY;
>             pArea->fHasMemo = TRUE;
>             break;
> 
>          case '0':
>              /* TODO: NULLABLE and VARLENGTH support
>                if( memcmp( dbFieldInfo.atomName, "_NullFlags", 10 ) == 0 )
>                For each Varchar and Varbinary field, one bit, or 
> "varlength" bit, is allocated
>                in the last system field, which is a hidden field and 
> stores the null status for
>                all fields that can be null. If the Varchar or Varbinary 
> field can be null, the
>                null bit follows the "varlength" bit. If the "varlength" 
> bit is set to 1, the length
>                of the actual field value length is stored in the last 
> byte of the field. Otherwise,
>                if the bit is set to 0, length of the value is equal to 
> the field size.
>             */
>             if( memcmp( dbFieldInfo.atomName, "_NullFlags", 10 ) == 0 )
>             {
>                dbFieldInfo.uiType = HB_FT_STRING;
>                break;
>             }
> 
>          default:
>             errCode = FAILURE;
>             break;
>       }
> 
>       /* Add field */
>       if( errCode == SUCCESS )
>       {
>          if( dbFieldInfo.uiFlags & HB_FF_AUTOINC )
>             pArea->fAutoInc = TRUE;
>          errCode = SELF_ADDFIELD( ( AREAP ) pArea, &dbFieldInfo );
>       }
> 
>       /* Exit if error */
>       if( errCode != SUCCESS )
>          break;
>    }
>    if( pBuffer )
>       hb_xfree( pBuffer );
> 
>    /* Exit if error */
>    if( errCode != SUCCESS )
>    {
>       if( hb_vmRequestQuery() == 0 )
>       {
>          pError = hb_errNew();
>          hb_errPutGenCode( pError, EG_CORRUPTION );
>          hb_errPutSubCode( pError, EDBF_CORRUPT );
>          hb_errPutDescription( pError, hb_langDGetErrorDesc( 
> EG_CORRUPTION ) );
>          hb_errPutFileName( pError, pArea->szDataFileName );
>          hb_errPutFlags( pError, EF_CANDEFAULT );
>          SELF_ERROR( ( AREAP ) pArea, pError );
>          hb_itemRelease( pError );
>       }
>       SELF_CLOSE( ( AREAP ) pArea );
>       pArea->lpdbOpenInfo = NULL;
>       return errCode;
>    }
> 
>    pItem = hb_itemNew( NULL );
>    if( SELF_RDDINFO( SELF_RDDNODE( pArea ), RDDI_PENDINGPASSWORD,
>                      pOpenInfo->ulConnection, pItem ) == SUCCESS )
>    {
>       hb_dbfPasswordSet( pArea, pItem, FALSE );
>    }
>    else
>    {
>       hb_itemClear( pItem );
>       if( SELF_RDDINFO( SELF_RDDNODE( pArea ), RDDI_PASSWORD,
>                         pOpenInfo->ulConnection, pItem ) == SUCCESS )
>       {
>          hb_dbfPasswordSet( pArea, pItem, FALSE );
>       }
>    }
>    hb_itemRelease( pItem );
> 
>    /* Open memo file if exists */
>    if( pArea->fHasMemo )
>    {
>       pFileName = hb_fsFNameSplit( ( char * ) szFileName );
>       pFileName->szExtension = NULL;
>       hb_fsFNameMerge( ( char * ) szFileName, pFileName );
>       hb_xfree( pFileName );
>       pOpenInfo->abName = szFileName;
>       errCode = SELF_OPENMEMFILE( ( AREAP ) pArea, pOpenInfo );
>    }
> 
>    if( errCode == SUCCESS )
>    {
>       /* If successful call SUPER_OPEN to finish system jobs */
>       errCode = SUPER_OPEN( ( AREAP ) pArea, pOpenInfo );
>    }
> 
>    if( errCode != SUCCESS )
>    {
>       SELF_CLOSE( ( AREAP ) pArea );
>       pArea->lpdbOpenInfo = NULL;
>       return FAILURE;
>    }
> 
>    /* Alloc buffer */
>    pArea->pRecord = ( BYTE * ) hb_xgrab( pArea->uiRecordLen );
>    pArea->fValidBuffer = FALSE;
> 
>    /* Update the number of record for corrupted headers */
>    pArea->ulRecCount = hb_dbfCalcRecCount( pArea );
> 
>    /* Position cursor at the first record */
>    errCode = SELF_GOTOP( ( AREAP ) pArea );
> 
>    if( pArea->fTrigger )
>       hb_dbfTriggerDo( pArea, EVENT_POSTUSE, 0, NULL );
> 
>    pArea->lpdbOpenInfo = NULL;
> 
>    return errCode;
> }
> 
> best regards,
> Miguel Angel Marchuet
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: empresa.zip
Type: application/octet-stream
Size: 1600 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20071017/cf084cb9/empresa.obj
From druzus at acn.waw.pl  Thu Oct 18 01:36:28 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 18 06:36:34 2007
Subject: [Harbour] Contrib merge: OLE2 + WIN32PRN [ + directx ]
In-Reply-To: <05E83881-9BAF-480D-9DE5-2D2B80E7B3BB@syenar.hu>
References: <05E83881-9BAF-480D-9DE5-2D2B80E7B3BB@syenar.hu>
Message-ID: <20071018063628.GA6357@localhost.localdomain>

On Tue, 16 Oct 2007, Szak?ts Viktor wrote:
> Hi group,
> Is there any objection or any opinion on merging
> the three contribs below, to one "win32" contrib:
> - OLE2
> - WIN32PRN
> - directx (maybe)
> They are all targeting Win32 only, with Win32
> specific features and all of them are useful
> under that platform.
> Merging wouldn't change source granularity, so
> unused parts of the lib wouldn't be included in
> the final executables.
> The idea is to have one common contrib lib for
> all Win32 API specific functionality.

I agree.

best regards,
Przemek
From antonioharbour at gmail.com  Thu Oct 18 01:48:16 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Oct 18 06:49:07 2007
Subject: [Harbour] Strong typed variables implementation
In-Reply-To: <20071018063628.GA6357@localhost.localdomain>
Message-ID: <471701cb.0bbf5e0a.1a9b.6224@mx.google.com>

Przemek,

I am curious about the implementation plan:

Will the strong typed variables use a HB_ITEM ?

Regards,

Antonio

From druzus at acn.waw.pl  Thu Oct 18 01:51:34 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 18 06:51:44 2007
Subject: [Harbour] PCODE optimization: RETURN NIL/.T./.F.
In-Reply-To: <01D0F066-D5AA-4A72-B20C-362D8CC795DB@syenar.hu>
References: <01D0F066-D5AA-4A72-B20C-362D8CC795DB@syenar.hu>
Message-ID: <20071018065134.GB6357@localhost.localdomain>

On Wed, 17 Oct 2007, Szak?ts Viktor wrote:
> Hi Przemek,
> We've once discussed that distinct PCODE could
> be added for the very oftenly used RETURN NIL,
> RETURN .F., RETURN .T. constructs.
> So that
> - HB_P_PUSHNIL + HB_P_RETVALUE would become: HB_P_RETNIL
> - HB_P_FALSE + HB_P_RETVALUE would become: HB_P_RETFALSE
> - HB_P_TRUE + HB_P_RETVALUE would become: HB_P_RETTRUE
> Do you think this is worth the effort? Would we gain some real-life  
> performance?

The speed improvement will be very small so it's not very important
and my main goal was rather eliminating the reason for which developers
were changing FUNC ... / RETURN NIL to PROC ... / RETURN in the past.
In some cases such modifications may introduce new problems or cause
some side effects because PROCEDURE is not a function which returns NIL.
So I will leave it yet. There are some other more important extensions.
As you can see we cannot even agree syntax for strong typing. So let's
release version 1.0 and later we can make some experiments in new
experimental branches.
BTW thank you very much for your recent modifications.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct 18 02:13:14 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 18 07:13:20 2007
Subject: [Harbour] Re: FTP corruption detected but false
In-Reply-To: <4715E391.8030507@marchuet.net>
References: <4715E391.8030507@marchuet.net>
Message-ID: <20071018071314.GC6357@localhost.localdomain>

On Wed, 17 Oct 2007, Miguel Angel Marchuet wrote:
> FTP corruption detected but false at fieldtype G length 4
> I send to you the file in question.

You have in memo file memo block with 0002 signature so it's not a
problem with "G" field in DBF with FPT contents. 0002 is VFP OLE object
and I simply refuse to access such data because I have no idea how to
decode their body. If you want then we can change it and return raw
memo block data or some fixed value, f.e. NIL or ">>VFP OLE OBJCET<<"
It's enouough to add in dbffpt1.c in places where we have:
    case FPTIT_PICT:
also condition for:
    case FPTIT_OBJ:
with expected cation.

> I don't found where is the problem. I'm making some changes in RDD to 
> activate flags.
> I'm assigning flags on open DBF. I remember to you that the last field is 
> HB_FF_HIDDEN & HB_FF_BINARY.
> FCount, DbStruct don't show hidden fields (this are system control fields)
> static ERRCODE hb_dbfOpen( DBFAREAP pArea, LPDBOPENINFO pOpenInfo )
> {
[...]
This is xHarbour code, not Harbour. Please also remember that Clipper
left random data in flag fields. We cannot read them in such form
because the results for DBF created by Clipper will be unpredictable
so we will need to check other conditions before accepting field flags,
f.e. using information from DBF header we can build field flag mask.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct 18 03:35:12 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 18 08:35:26 2007
Subject: [Harbour] Extensions
In-Reply-To: <9257026e0710100558h5ffee2a3ta94734947462fe10@mail.gmail.com>
References: <9257026e0710080918g1c29cd06v57d46560a38032e6@mail.gmail.com>
	<20071008205146.GC6548@localhost.localdomain>
	<470B7960.4000707@dbtopas.lt> <470B8EC8.2010206@dbtopas.lt>
	<4427AF39-633B-416D-BA66-FABE8D60C671@syenar.hu>
	<20071010111305.GA17387@localhost.localdomain>
	<9D32A34D-16E5-48CC-AC16-42A801A91953@syenar.hu>
	<20071010120032.GA17477@localhost.localdomain>
	<1A3741C0-BE7B-41EC-91ED-F3C4F03666C1@syenar.hu>
	<9257026e0710100558h5ffee2a3ta94734947462fe10@mail.gmail.com>
Message-ID: <20071018083512.GA10129@localhost.localdomain>

On Wed, 10 Oct 2007, Lorenzo Fiorini wrote:
> I've sent to you and to the list a working tbrowse many months ago
> with a working get system and a working teditor.
> Me and I guess many other hundreds of xHarbour users use it every day
> and I get the same results that I get from C53b.
> If you want to write your own "perfect" one it's a your choice.

Few weeks ago I made some tests with TBROWSE class in Clipper and
xHarbour and in practice nearly each method has some different side
effects then in Clipper. These were not big differences but for some
code can be very significant. Current xHarbour TBROWSE version is
good for you only for one reason: you reported the problems _YOU_ had
in the past and it was modified to hide/resolve them so you can use
it in your applications but it's also far from being Clipper compatible
in many places. For sure for xHarbour users is better then the Harbour
version due to such modifications and it also has some additional features.
But also some extensions which are not Clipper compatible and it's possible
that replicating exact Clipper version we will not be able to keep them
working. If now we borrow this code from xHarbour CVS and Harbour users
begin to create new code which will need these extensions or some unexpected
side effects in xHarbour TBROWSE implementation then we will not be able to
fix them later to to backward compatibility. I do not think it's good idea.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct 18 04:14:29 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 18 09:14:36 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <47139360.3040406@dbtopas.lt>
References: <20071011211921.GA4812@localhost.localdomain>
	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>
	<20071012064340.GB6863@localhost.localdomain>
	<470FBE90.6020708@dbtopas.lt>
	<20071012200051.GB10596@localhost.localdomain>
	<47139360.3040406@dbtopas.lt>
Message-ID: <20071018091429.GB10129@localhost.localdomain>

On Mon, 15 Oct 2007, Mindaugas Kavaliauskas wrote:
> I was thinking this also. In this case variable nI is not on item stack. 
> It could be a drawback if we want to get debug stack values on debugger 
> or write all local variable values to .log file on runtime error.
> Accessing these locals from codeblocks, detaching are also impossible.

Exactly and just like people needs strong typing for compile time
errors/warning I'd like to have compile time errors/warnings when
my code will try to detach or pass by reference local variables
declared as strongly optimized. IMHO it's much better to replace
all additional RT code which will protect against "illegal usage"
of variables declared as strictly optimized by compile time errors
or warnings which will disable strict strong type optimization for
two reasons:
1. I can reach maximum RT performance.
2. compiler will warn me that sth what I wanted to optimize
   cannot be optimized so I can correct the code.

> We need some method to bind allocated stack items to C "items". Maybe
>    hb_strongRegisterLocal( &nI, HB_STRONG_INTEGER, 2 /* local no */ );
> could store some reference to C items, on item stack.

It may cost more then the performance improvement and we will return
to the problem with using C stack HB_ITEMs.
I lost a lot of time to eliminate all C stack HB_ITEM variables from
[x]Harbour code. In xHarbour I haven't finished this job. Only few core
developers understands GC details but rest of us in most cases created
wrong code. You can still find such code in xHarbour. F.e. see
source/rtl/direct.c - this code uses C stack HB_ITEM to store ARRAY
items !!!. It also has memory leaks hidden by GC. Read in xHarbour
doc/howtoext.txt. This documented was created by core xHarbour developer
and presents fatal and buggy code which may break HVM. Probably when
Giancarlo was writing it he hadn't known yet how our GC worked. Now it's
the worst text which can be read by people who want to write some
extensions to [x]Harbour in C. It should be updated or removed long
time ago.

> >Exactly. Now it will be nightmare  ... 
> >will be much
> >much easier to do when we will operate on HB_EXPR structures then
> >on PCODEs. PCODE should be generate in backend not online in core
> >compiler code. And this will be changed. Step by step in spare time
> >by me, by you and I hope other developers. I would like to join this
> >modification in rewriting grammar rules (there are things which
> >need serious cleanup with HB_EXPR type updating but beta stage
> >is not good moment for it) 
> I would be happy to help rewrite the rules, if my knowledge will be 
> enough to do this job, but you should start the job or write some 
> template/sample. Could it be a step by step job, or we should rewrite 
> rules from the zero?

The modifications can be done in smaller peaces but will have to be
synchronized with helper hb_compExpr*() functions. I would like to
eliminate all global variables in HB_COMP structure used to pass
information about grammar rules context and if possible also rules
which are context dependent. In some cases we may also want to
replicate Clipper behavior in error reporting missing by us. F.e.
in Clipper:
    END, ENDIF, ENDDO, NEXT
always close IF, DO WHILE, FOR statements in internal logic even if
it does not match to closing directive, f.e.:

    IF <cond>
    NEXT

In such case it only generates compile time error. Our rules needs
strict pairs what causes that we cannot generate Clipper compatible
errors (we have only some emulation in lexer which may work for very
simple example). F.e. compare errors generated by Clipper and Harbour
for such code:

    proc p(p1,p2,p3)
    if p1
      do while p2
        for p3:=1 to 10
        enddo
      endif
    next
    endif
    return

The funny thing is that we can emulate Clipper behavior and it will
make Harbour code simpler then is now :-)

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct 18 04:24:08 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 18 09:24:14 2007
Subject: [Harbour] Wich linux distro use Przemyslaw Czerpak?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809AA92@SRV02.deltain.net>
References: <20070717212206.730B.SSBBS@mail.zzz.com.tw>
	<AFB948164110ED43B5EB849E8DEEF03809AA92@SRV02.deltain.net>
Message-ID: <20071018092408.GC10129@localhost.localdomain>

On Sun, 14 Oct 2007, Massimo Belgrano wrote:
> Witch Linux distribution use Przemyslaw Czerpak?

Many different, f.e.: RH7.3, Aurox10, PLD, FC3, Suse10.[123] for x86@32
and x86@64. Chose sth for which you may find some help.
If you need my advice then few days ago SUSE 10.3 was released and
probably you will find most of things you may need directly in distribution.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Oct 18 04:29:18 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 18 09:29:23 2007
Subject: R: [Harbour] Future
In-Reply-To: <4712362B.4060007@kevincarmody.com>
References: <20070820141400.GC13960@localhost.localdomain>
	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>
	<4712362B.4060007@kevincarmody.com>
Message-ID: <20071018092918.GD10129@localhost.localdomain>

On Sun, 14 Oct 2007, Kevin Carmody wrote:
> I've written some Harbour routines for handling UTF8 on the back end.  
> These can be used with current Harbour.  You can download this from 
> http://kevincarmody.com/misc/unicodeconvert.prg

Very nice.
Probably it will be good to rewrite most of this function in C and
add them to core code. Few weeks ago I added to core code C version
for these functions:

    HB_STRTOUTF8(), HB_UTF8TOSTR(), HB_UTF8LEN(),
    HB_UTF8LEFT(), HB_UTF8RIGHT(),
    HB_UTF8PEEK(), HB_UTF8POKE(),
    HB_UTF8STUFF(), HB_UTF8SUBSTR(), HB_UTF8STRTRAN()

so some of your functions can be already redirected.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Oct 18 05:23:26 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 18 10:23:29 2007
Subject: [Harbour] CHANGELOG: 2007-10-18 12:16 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c81170$Blat.v2.6.2$eba69974$10748c18b9c4@127.0.0.1>

2007-10-18 12:16 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   + contrib/win32
   + contrib/win32/test
   + contrib/win32/test/testw32p.prg
   + contrib/win32/test/oleenum.prg
   - test/oleenum.prg
   + contrib/win32/Makefile
   + contrib/win32/makefile.bc
   + contrib/win32/makefile.vc
   + contrib/win32/make_b32.bat
   + contrib/win32/make_vc.bat
   + contrib/win32/w32_tole.prg
   + contrib/win32/w32_tprn.prg
   + contrib/win32/tprinter.c
   + contrib/win32/w32_ole.c
   + contrib/win32/w32_prn.c
     + Added a Win32 contrib lib by merging win32prn and ole2 
       libs. The name of the new library is "hbwin32".
     ; directx was not added for now.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 18 05:30:43 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 18 10:30:45 2007
Subject: [Harbour] CHANGELOG: 2007-10-18 12:26 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c81171$Blat.v2.6.2$f0008362$6084a1ce0ac@127.0.0.1>

2007-10-18 12:26 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   - contrib/win32prn
   - contrib/ole2
     - Removed two contribs which were merged into one.
     ; Pls use hbwin32 instead of win32prn and/or hbole.
--
Brgds,
Viktor

From druzus at acn.waw.pl  Thu Oct 18 06:40:52 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 18 11:40:59 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <010701c80d98$24c4b380$6a00a8c0@PAUL>
References: <20071012210033.GA10898@localhost.localdomain>
	<010701c80d98$24c4b380$6a00a8c0@PAUL>
Message-ID: <20071018114052.GA31107@localhost.localdomain>

On Sat, 13 Oct 2007, Paul Tucker wrote:
> Ugh to both.
> Can't we just teach the PP about 'state'  FWIW, I'm pretty sure there are a 

No without breaking strict compatibility.

> couple of compilers that seem to have solved this.

You are wrong.
It's impossible withour breaking of some PP rules.
I'm shocked that VO chosed such syntax. IMO VO was
not created by people who worked on core Clipper code
and they simply didn't well know Clipper details.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Oct 18 07:10:50 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 18 12:11:04 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <20071018114052.GA31107@localhost.localdomain>
References: <20071012210033.GA10898@localhost.localdomain>
	<010701c80d98$24c4b380$6a00a8c0@PAUL>
	<20071018114052.GA31107@localhost.localdomain>
Message-ID: <AFA3A3BE-0D93-41C0-A094-7B5095EB7C89@syenar.hu>

> On Sat, 13 Oct 2007, Paul Tucker wrote:
>> Ugh to both.
>> Can't we just teach the PP about 'state'  FWIW, I'm pretty sure  
>> there are a
>
> No without breaking strict compatibility.
>
>> couple of compilers that seem to have solved this.
>
> You are wrong.
> It's impossible withour breaking of some PP rules.
> I'm shocked that VO chosed such syntax. IMO VO was
> not created by people who worked on core Clipper code
> and they simply didn't well know Clipper details.

For me it seem CA fully lost track of Clipper
after C5.2e, even C5.3 is a piece of buggy junk,
and VO is also a bad afterthought with unclear
directions/intent and bad execution. You're most
probably right that original developers left the
ship (or lost interest) around/before C5.3.

Too bad that happened. One more reason not to
blindly stick with VO.

Brgds,
Viktor

From antonioharbour at gmail.com  Thu Oct 18 09:29:51 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Oct 18 14:30:26 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <AFA3A3BE-0D93-41C0-A094-7B5095EB7C89@syenar.hu>
Message-ID: <47176dfb.201f5e0a.4ebc.ffffd071@mx.google.com>

> 
You're most probably right that original developers left the ship (or lost
interest) around/before C5.3.
>

According to an old friend of mine (G?nther Daubach, current "Force
compiler" owner, originally developed by "Sophco" company) Nantucket had
hired Richard McConnell's company to develop some critical parts of Clipper
5. Richard McConnell was getting "too much" importance and pressure in the
Clipper 5 development, so Nantucket authorized Nantucket Germany to support
the development of a 32 Clipper compiler clone, developed by a "dentist" who
was a very good freelance programmer. Such dentist and his little team work
would turn into "VO" later on.

By that time, CA approached Nantucket to buy Clipper as dBase was the
"bussines language" way to go, same as Microsoft did with FoxPro and Borland
did with Ashton Tate's dBase. 

Richard McConnell was not happy at all about such Nantucket decition, as he
wanted to control the 32 bits version development, but Nantucket sold
Clipper, and CA supported the Nantucket Germany new development so McConnell
and others finally were fired. G?nther commented me that Nantucket owed some
money to McConnell, and that?s why he decided to left some unfixed bugs into
Clipper 5.2, waiting to get paid.

I don't know if this is true or not, but that?s what he told me, and it?s a
curiosity that may help to understand some of the facts ofn the transition
from 5.2 to 5.3 :-)

Regards,

Antonio

From harbour.01 at syenar.hu  Thu Oct 18 12:10:32 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 18 17:10:37 2007
Subject: [Harbour] CHANGELOG: 2007-10-18 18:46 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c811a9$Blat.v2.6.2$ca91ce3c$19080fe1b0@127.0.0.1>

2007-10-18 18:46 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   + contrib/win32/test/testole.prg
   - contrib/win32/test/oleenum.prg
   + contrib/win32/test/sample.odt
     + Added new OLE examples for OpenOffice, CDO.
     + Added new OLE examples from xhb.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 18 12:30:22 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 18 17:30:34 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <47176dfb.201f5e0a.4ebc.ffffd071@mx.google.com>
References: <47176dfb.201f5e0a.4ebc.ffffd071@mx.google.com>
Message-ID: <DFDF4882-9472-4CF0-AB41-56C282EEC442@syenar.hu>

Hi Antonio,

Interesting story, and it surely gets reflected on the quality
of these final products. I wonder what Richard McConnell is
doing these days (is he aware of the Harbour Project?).

I see this credit inside Nantucked Tools:
Lothar Bongartz (Dusseldorf, Germany)

Can this be the "dentist" guy?

Brgds,
Viktor

On 2007.10.18., at 16:29, Antonio Linares wrote:

>>
> You're most probably right that original developers left the ship  
> (or lost
> interest) around/before C5.3.
>>
>
> According to an old friend of mine (G?nther Daubach, current "Force
> compiler" owner, originally developed by "Sophco" company)  
> Nantucket had
> hired Richard McConnell's company to develop some critical parts of  
> Clipper
> 5. Richard McConnell was getting "too much" importance and pressure  
> in the
> Clipper 5 development, so Nantucket authorized Nantucket Germany to  
> support
> the development of a 32 Clipper compiler clone, developed by a  
> "dentist" who
> was a very good freelance programmer. Such dentist and his little  
> team work
> would turn into "VO" later on.
>
> By that time, CA approached Nantucket to buy Clipper as dBase was the
> "bussines language" way to go, same as Microsoft did with FoxPro  
> and Borland
> did with Ashton Tate's dBase.
>
> Richard McConnell was not happy at all about such Nantucket  
> decition, as he
> wanted to control the 32 bits version development, but Nantucket sold
> Clipper, and CA supported the Nantucket Germany new development so  
> McConnell
> and others finally were fired. G?nther commented me that Nantucket  
> owed some
> money to McConnell, and that?s why he decided to left some unfixed  
> bugs into
> Clipper 5.2, waiting to get paid.
>
> I don't know if this is true or not, but that?s what he told me,  
> and it?s a
> curiosity that may help to understand some of the facts ofn the  
> transition
> from 5.2 to 5.3 :-)
>
> Regards,
>
> Antonio
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From antonioharbour at gmail.com  Thu Oct 18 12:45:15 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Oct 18 17:45:52 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <DFDF4882-9472-4CF0-AB41-56C282EEC442@syenar.hu>
Message-ID: <47179bc9.1c185e0a.13ec.0273@mx.google.com>

Viktor, 

>
Interesting story, and it surely gets reflected on the quality of these
final products. I wonder what Richard McConnell is doing these days (is he
aware of the Harbour Project?).
>

Clipper Nantucket Employees - Where are they now?
http://www.dbforums.com/archive/index.php/t-340403.html

Last time I checked, McConnell seemed to be working in "Square Systems"
http://sec.edgar-online.com/1997/12/16/12/0000950169-97-001115/Section4.asp
Please notice in the above about Larry Heimendinger

I don't think that they know (or care) about Harbour :-) Or who knows, we
could send them an email ;-)

>
I see this credit inside Nantucked Tools:
Lothar Bongartz (Dusseldorf, Germany)

Can this be the "dentist" guy?
>

Lothar participated, but the "dentist" and leader was "Dr. Burak Kozan" (if
I am not wrong)
http://64.233.179.104/translate_c?hl=es&langpair=de%7Cen&u=http://de.wikiped
ia.org/wiki/Visual_Objects

Regards,

Antonio

From antonioharbour at gmail.com  Thu Oct 18 13:01:48 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Oct 18 18:02:25 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <DFDF4882-9472-4CF0-AB41-56C282EEC442@syenar.hu>
Message-ID: <47179fa9.26a75e0a.1462.4ad0@mx.google.com>

Viktor,

http://de.wikipedia.org/wiki/Visual_Objects
>
In the development phase (1992), Nantucket Computer Associates (CA) bought
up.
At that time, Aspen was a purely German project under the auspices of Dr.
Burak Kozan.
Other members of the Aspen teams were Lothar Bongartz, Gunnar Main, Frank
Mantek, Uwe wood, Ralf Saborowski and Dietmar Bos. 
>

About Richard McConnell, I located him on a web design company, after
"Square Systems", but I can't find him now. Something related to "purple" or
so... not sure

Regards,

Antonio

From antonioharbour at gmail.com  Thu Oct 18 13:08:58 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Oct 18 18:09:35 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <DFDF4882-9472-4CF0-AB41-56C282EEC442@syenar.hu>
Message-ID: <4717a157.0bbf5e0a.1a9b.05d2@mx.google.com>

Look at this :-)

http://www.roomsof.com/channels/about.shtml

"
In 1994, Dr. Burak Kozan Lothar Bongartz and a partner founded Moove in
Leverkusen, Germany. The two founders had already found success by
developing software products which were being used internationally; software
such as DC-Tools, Nantucket Clipper Tools, and CA-Visual Objects, are all
development tools in the fields of object-oriented programming languages,
general function libraries and databases. Building on their proven
technology, the partners introduced their first product, Roomancer, in 1996.
Roomancer was a revolutionary new concept in how users were able to both
interact with their own PC's (in a 3 dimension visualization of their
system), and with each other (in the unique peer-to-peer interactive aspect
of the new platform). Roomancer was so powerful and forward thinking, that
it attracted those who were open to such a quantum leap in communications
capability.
"

Regards,

Antonio

From myorg63 at mail.ru  Thu Oct 18 15:24:49 2007
From: myorg63 at mail.ru (Petr Chornyj)
Date: Thu Oct 18 20:25:07 2007
Subject: [Harbour] CHANGELOG: 2007-10-15 18:36 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <01c80f49$Blat.v2.6.2$91a0476e$1acba35a0c2@127.0.0.1>
References: <01c80f49$Blat.v2.6.2$91a0476e$1acba35a0c2@127.0.0.1>
Message-ID: <13282984.post@talk.nabble.com>




Szak?ts Viktor wrote:
> 
> 2007-10-15 18:36 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>   ..
>    - source/compiler/genjava.c
>    - source/compiler/gencli.c
>      - Removed two non-working (experimental) output types: 
>        Java, CLI
>     --
> 


Victor, I think presently you must also delete contrib/runjava


Regards,
Petr
-- 
View this message in context: http://www.nabble.com/CHANGELOG%3A-2007-10-15-18%3A36-UTC%2B0100-Viktor-Szakats-%28harbour.01-syenar.hu%29-tf4629048.html#a13282984
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From myorg63 at mail.ru  Thu Oct 18 15:31:01 2007
From: myorg63 at mail.ru (Petr Chornyj)
Date: Thu Oct 18 20:31:05 2007
Subject: [Harbour] CHANGELOG: 2007-10-15 18:36 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <01c80f49$Blat.v2.6.2$91a0476e$1acba35a0c2@127.0.0.1>
References: <01c80f49$Blat.v2.6.2$91a0476e$1acba35a0c2@127.0.0.1>
Message-ID: <13282984.post@talk.nabble.com>



Szak?ts Viktor wrote:
> 
> 2007-10-15 18:36 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>   ..
>    - source/compiler/genjava.c
>    - source/compiler/gencli.c
>      - Removed two non-working (experimental) output types: 
>        Java, CLI
>     --
> 


Viktor, I think presently you must also delete contrib/runjava


Regards,
Petr
-- 
View this message in context: http://www.nabble.com/CHANGELOG%3A-2007-10-15-18%3A36-UTC%2B0100-Viktor-Szakats-%28harbour.01-syenar.hu%29-tf4629048.html#a13282984
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From gvarona at ec-red.com  Thu Oct 18 15:40:07 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Thu Oct 18 20:33:31 2007
Subject: [Harbour] CHANGELOG: 2007-10-18 18:46 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <01c811a9$Blat.v2.6.2$ca91ce3c$19080fe1b0@127.0.0.1>
References: <01c811a9$Blat.v2.6.2$ca91ce3c$19080fe1b0@127.0.0.1>
Message-ID: <4717C4A7.8080108@ec-red.com>

Hi Viktor, I got this warnings / errors messages:

D:\harbour>make_gnu clean
D:\harbour>make_gnu
hbrun.o(.data+0x28c8):hbrun.c: undefined reference to `HB_FUN_CONVTOANSICP'
hbrun.o(.data+0x28d8):hbrun.c: undefined reference to `HB_FUN_CONVTOOEMCP'
collect2: ld returned 1 exit status
make[3]: *** [hbrun.exe] Error 1
make[2]: *** [descend] Error 2
hbdot.o(.data+0x2a78):hbdot.c: undefined reference to `HB_FUN_CONVTOANSICP'
hbdot.o(.data+0x2a88):hbdot.c: undefined reference to `HB_FUN_CONVTOOEMCP'
collect2: ld returned 1 exit status
make[3]: *** [hbdot.exe] Error 1
make[2]: *** [descend] Error 2
D:\harbour>

Last ChangeLog:
/*
 * $Id: ChangeLog 7837 2007-10-18 17:10:25Z vszakats $
 */

Enviroment: WinXP SP2 + MinGW

Best Regards.
GVS




Szak?ts Viktor escribi?:

>2007-10-18 18:46 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>   + contrib/win32/test/testole.prg
>   - contrib/win32/test/oleenum.prg
>   + contrib/win32/test/sample.odt
>     + Added new OLE examples for OpenOffice, CDO.
>     + Added new OLE examples from xhb.
>--
>Brgds,
>Viktor
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
>  
>

From druzus at acn.waw.pl  Thu Oct 18 16:55:43 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 18 21:55:54 2007
Subject: [Harbour] 2007-10-18 23:54 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710182155.l9ILthd1020566@31-mo5-4.acn.waw.pl>

2007-10-18 23:54 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hb-mkslib.sh
  * harbour/bin/pack_src.sh
    * updated for recent Viktor's modifications

  * harbour/source/rtl/oemansix.c
    ! added missing #include "hbpai.h"

  * harbour/include/Makefile
  + harbour/include/hbwince.h
  * harbour/include/hbrdddbf.h
  * harbour/include/hbrdddbt.h
  * harbour/include/hbdefs.h
  * harbour/include/hbsetup.h
  * harbour/include/hbrddcdx.h
  * harbour/include/hbrddfpt.h
  * harbour/contrib/xhb/hboutdbg.c
  * harbour/contrib/xhb/hbsyslog.c
  * harbour/contrib/xhb/xhbfunc.c
  * harbour/contrib/libct/ctnet.c
  * harbour/contrib/libct/files.c
  * harbour/contrib/libct/disk.c
  * harbour/contrib/libnf/getenvrn.c
  * harbour/contrib/win32/tprinter.c
  * harbour/contrib/win32/w32_ole.c
  * harbour/contrib/win32/w32_prn.c
  * harbour/contrib/odbc/odbc.c
  * harbour/source/pp/ppgen.c
  * harbour/source/rtl/diskspac.c
  * harbour/source/rtl/gtclip.c
  * harbour/source/rtl/fstemp.c
  * harbour/source/rtl/gtchrmap.c
  * harbour/source/rtl/oemansi.c
  * harbour/source/rtl/disksphb.c
  * harbour/source/rtl/fssize.c
  * harbour/source/rtl/hbffind.c
  * harbour/source/rtl/filesys.c
  * harbour/source/rtl/net.c
  * harbour/source/rtl/gtgui/gtdef.c
  * harbour/source/rtl/gtwvt/gtwvt.c
  * harbour/source/rtl/gtpca/gtpca.c
  * harbour/source/rtl/gtstd/gtstd.c
  * harbour/source/rtl/gtwin/gtwin.c
  * harbour/source/vm/Makefile
  * harbour/source/vm/mainwin.c
  * harbour/source/vm/dynlibhb.c
  + harbour/source/vm/mainwin/Makefile
  * harbour/source/common/Makefile
  * harbour/source/common/hbgete.c
  * harbour/source/common/hbver.c
  + harbour/source/common/hbwince.c
  * harbour/utils/hbpp/hbpp.c
  * harbour/utils/hbdot/hbdot.prg
  * harbour/utils/hbver/hbverfix.c
    + added support for WinCE and PocketPC

  + harbour/make_xcemgw.sh
  + harbour/config/w32/cemgw.cf
  * harbour/bin/hb-mkslib.sh
  * harbour/bin/hb-func.sh
  * harbour/bin/postinst.sh
    + added support for CeGCC-MinGW32 port - those of you who want to
      create applications for WinCE on PockePC with ARM processors on
      Linux or MS-Windows can download from SF cegcc-mingw32ce port.
      User using RPM based Linux distribution for x86 CPUs can simply
      download cegcc-mingw32ce-0.50-1.i586.rpm and install it.
      The hb* scripts created by ./make_xcemgw.sh [tgz|gnu] are
      automatically updated to work with CeGCC-MinGW32 so later you
      can simply crate WinCE-ARM binaries using them as for native port.

     I'm waiting for users feedback. Please remember that I'm not Windows
     user and even this port was created without any Pocket machine.
     With Marek Paliwoda help I only tested that final applications are
     working using PocketPC emulator.

best regards
Przemek
From antonioharbour at gmail.com  Thu Oct 18 17:19:41 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Oct 18 22:20:16 2007
Subject: [Harbour] 2007-10-18 23:54 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <200710182155.l9ILthd1020566@31-mo5-4.acn.waw.pl>
Message-ID: <4717dc1b.1d255e0a.7bd5.39ab@mx.google.com>

Przemek,

Regarding Pocket PC support, there are several places where unicode support
is required, mostly when it comes to manage filenames. I already reported it
to this list.

Regards,

Antonio

From antonioharbour at gmail.com  Thu Oct 18 17:37:45 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Oct 18 22:38:24 2007
Subject: [Harbour] 2007-10-18 23:54 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <200710182155.l9ILthd1020566@31-mo5-4.acn.waw.pl>
Message-ID: <4717e058.13395e0a.3999.3cf7@mx.google.com>

Przemek,

This will not work in Pocket PC:

Common\hbgete.c

      ... 
      DWORD size = GetEnvironmentVariableA( szName, NULL, 0 ); 
      ...

Regards,

Antonio

From antonioharbour at gmail.com  Thu Oct 18 17:41:48 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Oct 18 22:42:26 2007
Subject: [Harbour] 2007-10-18 23:54 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <200710182155.l9ILthd1020566@31-mo5-4.acn.waw.pl>
Message-ID: <4717e14b.095c5e0a.39d5.3896@mx.google.com>

Przemek,

In source/rtl/disksphb.c:

  164 #if defined(HB_WINCE)
  165          pGetDiskFreeSpaceEx = NULL;  

Why ?

GetModuleHandleW() has to be used instead of GetModuleHandleA()

Regards,

Antonio

From antonioharbour at gmail.com  Thu Oct 18 17:44:59 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Oct 18 22:45:36 2007
Subject: [Harbour] 2007-10-18 23:54 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <200710182155.l9ILthd1020566@31-mo5-4.acn.waw.pl>
Message-ID: <4717e209.0d135e0a.6964.44d1@mx.google.com>

Przemek,

In source/rtl/errorint.c we can not use the console for Pocket PC. There is
no console.

Regards,

Antonio

From antonioharbour at gmail.com  Thu Oct 18 17:48:12 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Oct 18 22:48:48 2007
Subject: [Harbour] 2007-10-18 23:54 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <200710182155.l9ILthd1020566@31-mo5-4.acn.waw.pl>
Message-ID: <4717e2cb.1c185e0a.13ec.3d0b@mx.google.com>

Przemek,

In source/rtl/filesys.c we can't use:

  659       hFile = ( HANDLE ) CreateFileA( ( char * ) pFilename, dwMode,
dwShare,
  660                                       NULL, dwCreat, dwAttr, NULL );

For Pocket PC.

Same applies for all Win32 ...A() functions. They have to be ...W().

Regards,

Antonio

From harbour.01 at syenar.hu  Thu Oct 18 17:53:09 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 18 22:53:19 2007
Subject: [Harbour] CHANGELOG: 2007-10-18 18:46 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <4717C4A7.8080108@ec-red.com>
References: <01c811a9$Blat.v2.6.2$ca91ce3c$19080fe1b0@127.0.0.1>
	<4717C4A7.8080108@ec-red.com>
Message-ID: <EF6702A5-574F-4654-A9A6-59BC3A6F833B@syenar.hu>

Thanks a lot. This was fixed in Przemek's last commit.

Brgds,
Viktor

On 2007.10.18., at 22:40, Guillermo Varona Silup? wrote:

> Hi Viktor, I got this warnings / errors messages:
>
> D:\harbour>make_gnu clean
> D:\harbour>make_gnu
> hbrun.o(.data+0x28c8):hbrun.c: undefined reference to  
> `HB_FUN_CONVTOANSICP'
> hbrun.o(.data+0x28d8):hbrun.c: undefined reference to  
> `HB_FUN_CONVTOOEMCP'
> collect2: ld returned 1 exit status
> make[3]: *** [hbrun.exe] Error 1
> make[2]: *** [descend] Error 2
> hbdot.o(.data+0x2a78):hbdot.c: undefined reference to  
> `HB_FUN_CONVTOANSICP'
> hbdot.o(.data+0x2a88):hbdot.c: undefined reference to  
> `HB_FUN_CONVTOOEMCP'
> collect2: ld returned 1 exit status
> make[3]: *** [hbdot.exe] Error 1
> make[2]: *** [descend] Error 2
> D:\harbour>
>
> Last ChangeLog:
> /*
> * $Id: ChangeLog 7837 2007-10-18 17:10:25Z vszakats $
> */
>
> Enviroment: WinXP SP2 + MinGW
>
> Best Regards.
> GVS
>
>
>
>
> Szak?ts Viktor escribi?:
>
>> 2007-10-18 18:46 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>>   + contrib/win32/test/testole.prg
>>   - contrib/win32/test/oleenum.prg
>>   + contrib/win32/test/sample.odt
>>     + Added new OLE examples for OpenOffice, CDO.
>>     + Added new OLE examples from xhb.
>> --
>> Brgds,
>> Viktor
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>
>>
>

From harbour.01 at syenar.hu  Thu Oct 18 23:01:06 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 18 23:01:34 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <47179fa9.26a75e0a.1462.4ad0@mx.google.com>
References: <47179fa9.26a75e0a.1462.4ad0@mx.google.com>
Message-ID: <721EF872-F665-42AD-8AC9-7E901BD2DFF9@syenar.hu>


On 2007.10.18., at 20:01, Antonio Linares wrote:

> Viktor,
>
> http://de.wikipedia.org/wiki/Visual_Objects
>>
> In the development phase (1992), Nantucket Computer Associates (CA)  
> bought
> up.
> At that time, Aspen was a purely German project under the auspices  
> of Dr.
> Burak Kozan.
> Other members of the Aspen teams were Lothar Bongartz, Gunnar Main,  
> Frank
> Mantek, Uwe wood, Ralf Saborowski and Dietmar Bos.
>>

"Saborowski" is the guy mentioned in one of the binaries as
"The Mighty Sabo was here!". There is also a SABO_BUFFER :)

Both in CA-Tools.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 18 23:02:05 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 18 23:02:15 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <47179bc9.1c185e0a.13ec.0273@mx.google.com>
References: <47179bc9.1c185e0a.13ec.0273@mx.google.com>
Message-ID: <6BE78317-6132-4D27-8206-FBE4D080013D@syenar.hu>


On 2007.10.18., at 19:45, Antonio Linares wrote:

> Viktor,
>
>>
> Interesting story, and it surely gets reflected on the quality of  
> these
> final products. I wonder what Richard McConnell is doing these days  
> (is he
> aware of the Harbour Project?).
>>
>
> Clipper Nantucket Employees - Where are they now?
> http://www.dbforums.com/archive/index.php/t-340403.html

Yes I think I've found this same page.

> Last time I checked, McConnell seemed to be working in "Square  
> Systems"
> http://sec.edgar-online.com/1997/12/16/12/0000950169-97-001115/ 
> Section4.asp
> Please notice in the above about Larry Heimendinger
>
> I don't think that they know (or care) about Harbour :-) Or who  
> knows, we
> could send them an email ;-)

Definitely, if we got an e-mail address :)

>>
> I see this credit inside Nantucked Tools:
> Lothar Bongartz (Dusseldorf, Germany)
>
> Can this be the "dentist" guy?
>>
>
> Lothar participated, but the "dentist" and leader was "Dr. Burak  
> Kozan" (if
> I am not wrong)
> http://64.233.179.104/translate_c?hl=es&langpair=de%7Cen&u=http:// 
> de.wikiped
> ia.org/wiki/Visual_Objects

Yes, he was my 2nd tip for the dentist :) I've found
him in an elementary school almanach (Istambul Deutscheschule).

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 18 23:08:14 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 18 23:08:37 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <4717a157.0bbf5e0a.1a9b.05d2@mx.google.com>
References: <4717a157.0bbf5e0a.1a9b.05d2@mx.google.com>
Message-ID: <E8865777-38F2-4BF5-8187-10398A6C1F55@syenar.hu>

Big jump from language development :)

Back to Mr. Richard McConnell:
http://sec.edgar-online.com/1997/12/16/12/0000950169-97-001115/ 
Section4.asp

Brgds,
Viktor

On 2007.10.18., at 20:08, Antonio Linares wrote:

> Look at this :-)
>
> http://www.roomsof.com/channels/about.shtml
>
> "
> In 1994, Dr. Burak Kozan Lothar Bongartz and a partner founded  
> Moove in
> Leverkusen, Germany. The two founders had already found success by
> developing software products which were being used internationally;  
> software
> such as DC-Tools, Nantucket Clipper Tools, and CA-Visual Objects,  
> are all
> development tools in the fields of object-oriented programming  
> languages,
> general function libraries and databases. Building on their proven
> technology, the partners introduced their first product, Roomancer,  
> in 1996.
> Roomancer was a revolutionary new concept in how users were able to  
> both
> interact with their own PC's (in a 3 dimension visualization of their
> system), and with each other (in the unique peer-to-peer  
> interactive aspect
> of the new platform). Roomancer was so powerful and forward  
> thinking, that
> it attracted those who were open to such a quantum leap in  
> communications
> capability.
> "
>
> Regards,
>
> Antonio
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Oct 18 23:09:51 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 18 23:09:51 2007
Subject: [Harbour] CHANGELOG: 2007-10-19 01:09 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c811db$Blat.v2.6.2$fcb9c162$9c07ef3a498@127.0.0.1>

2007-10-19 01:09 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * contrib/runjava
     - Obsolete contrib removed. (Thanks Petr)

--
Brgds,
Viktor

From mpaliwoda at interia.pl  Fri Oct 19 04:15:26 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Oct 19 04:15:33 2007
Subject: [Harbour] 2007-10-18 23:54 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
Message-ID: <20071019041526.0946E50249F@f10.poczta.interia.pl>

Antonio Linares wrote :

> In source/rtl/filesys.c we can&#039;t use:
> 
>   659       hFile = ( HANDLE ) CreateFileA( ( char * ) pFilename, dwMode,
> dwShare,
>   660                                       NULL, dwCreat, dwAttr, NULL
> );
> 
> For Pocket PC.
> 
> Same applies for all Win32 ...A() functions. They have to be ...W().

AFAIK you distribute Harbour compiled for PocketPC. That's clearly
stated on your webpage. You yourself claimed may times in last few 
hours that Harbour sources _must_ be modified to use Harbour under 
PocketPC. That means you are offering a modified Harbour version
for your clients.

Since Harbour is a GPL software may we ask you to send modifications
required to compile Harbour for PocketPC using Microsoft free Pocket 
PC C/C++ compiler ?

Otherwise, can't your work be clearly classified as a "licence infringement" ?

I'd like to hear your and others opinion.

-- 

Marek


----------------------------------------------------------------------
Kandydaci na ring! Zagraj 
Kliknij >>> http://link.interia.pl/f1c32

From tomaz.zupan at orpo.si  Fri Oct 19 06:09:37 2007
From: tomaz.zupan at orpo.si (=?iso-8859-2?q?Toma=BE_Zupan?=)
Date: Fri Oct 19 06:11:10 2007
Subject: [Harbour] 2007-10-18 23:54 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20071019041526.0946E50249F@f10.poczta.interia.pl>
References: <20071019041526.0946E50249F@f10.poczta.interia.pl>
Message-ID: <200710190809.37375.tomaz.zupan@orpo.si>

Dne petek 19. oktobra 2007 je Marek Paliwoda napisal(a):
>
> Since Harbour is a GPL software may we ask you to send modifications
> required to compile Harbour for PocketPC using Microsoft free Pocket
> PC C/C++ compiler ?
>
> Otherwise, can't your work be clearly classified as a "licence
> infringement" ?
>
> I'd like to hear your and others opinion.

IANAL, but IMO Antonio is only required to give sources to his customers, who 
purchased his product (deriviative work). He (or his customers when they get 
the sources) may publish the changes, but are _not_ required to.

-- 
Toma? Zupan
From mpaliwoda at interia.pl  Fri Oct 19 06:59:59 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Oct 19 07:00:05 2007
Subject: [Harbour] 2007-10-18 23:54 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
Message-ID: <20071019065959.D8DD356F814@f24.poczta.interia.pl>

Toma? Zupan wrote :

> > Since Harbour is a GPL software may we ask you to send modifications
> > required to compile Harbour for PocketPC using Microsoft free Pocket
> > PC C/C++ compiler ?
> >
> > Otherwise, can&#039;t your work be clearly classified as a "licence
> > infringement" ?
> >
> > I&#039;d like to hear your and others opinion.
> 
> IANAL, but IMO Antonio is only required to give sources to his customers,
> who purchased his product (deriviative work). He (or his customers when 
> they get the sources) may publish the changes, but are _not_ required to.

Ok, got the point :)

However it would *nice* if Antonio 
or his users published required changes.

-- 

Marek

-----------------R--E--K--L--A--M--A-----------------
Lepsze wiadomosci z kraju i z zagranicy.
Nie wierzysz? Sprawdz - http://wiadomosci.interia.pl/

From antonioharbour at gmail.com  Fri Oct 19 09:26:59 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Fri Oct 19 07:27:36 2007
Subject: [Harbour] 2007-10-18 23:54 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20071019041526.0946E50249F@f10.poczta.interia.pl>
References: <20071019041526.0946E50249F@f10.poczta.interia.pl>
Message-ID: <BA207E83-E4F4-4168-A80E-6ABEF5D245AF@gmail.com>

Marek,

> Since Harbour is a GPL software may we ask you to send modifications
> required to compile Harbour for PocketPC using Microsoft free Pocket
> PC C/C++ compiler ?

In order to get Harbour properly running on Pocket PC and WinCE,  
several parts of Harbour need to be modified.

I have clearly pointed on this list which parts need to be modified,  
but they need Przemek supervision to get included in Harbour (please  
review my msgs in this list from yesterday and before).

Secondly, a Windows compatibility layer has to be implemented in  
order to emulate the missing functions between Win32 and Windows  
Mobile APIs. I have done this work and it is not related to Harbour  
at all. Anyhow, I will happily help on this issue too.

regards,

Antonio
From rafa at tesipro.com  Fri Oct 19 07:52:07 2007
From: rafa at tesipro.com (Rafa (TESIPRO))
Date: Fri Oct 19 07:51:49 2007
Subject: R: [Harbour] Future
In-Reply-To: <20071018092918.GD10129@localhost.localdomain>
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>	<4712362B.4060007@kevincarmody.com>
	<20071018092918.GD10129@localhost.localdomain>
Message-ID: <47186227.6050405@tesipro.com>

Przemyslaw Czerpak escribi?:
> On Sun, 14 Oct 2007, Kevin Carmody wrote:
>   
>> I've written some Harbour routines for handling UTF8 on the back end.  
>> These can be used with current Harbour.  You can download this from 
>> http://kevincarmody.com/misc/unicodeconvert.prg
>>     
>
>   
Well, this routines have problemns;
FUNCTION UnicodeReadLine(),
Not exists CONSTANTS, for C_CR, C_LF, CRLF

LOCAL cCR      := C_CR
LOCAL cLF      := C_LF
LOCAL cCRLF    := CRLF

And not exist function RShave().

Regards.
Rafa Carmona

From miguelangel at marchuet.net  Fri Oct 19 08:25:03 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Fri Oct 19 08:32:24 2007
Subject: [Harbour] Re: FTP corruption detected but false
In-Reply-To: <20071018071314.GC6357@localhost.localdomain>
References: <4715E391.8030507@marchuet.net>
	<20071018071314.GC6357@localhost.localdomain>
Message-ID: <471869DF.8070600@marchuet.net>

> You have in memo file memo block with 0002 signature so it's not a
> problem with "G" field in DBF with FPT contents. 0002 is VFP OLE object
> and I simply refuse to access such data because I have no idea how to
> decode their body. If you want then we can change it and return raw
> memo block data or some fixed value, f.e. NIL or ">>VFP OLE OBJCET<<"
> It's enouough to add in dbffpt1.c in places where we have:
>     case FPTIT_PICT:
> also condition for:
>     case FPTIT_OBJ:
> with expected cation.
> 
>> I don't found where is the problem. I'm making some changes in RDD to 
>> activate flags.
>> I'm assigning flags on open DBF. I remember to you that the last field is 
>> HB_FF_HIDDEN & HB_FF_BINARY.
>> FCount, DbStruct don't show hidden fields (this are system control fields)
>> static ERRCODE hb_dbfOpen( DBFAREAP pArea, LPDBOPENINFO pOpenInfo )
>> {

I see that visual open this fields as normal memo containing string, this string
can be used as parameter of windows api function to convert it to a OLE.

> This is xHarbour code, not Harbour. Please also remember that Clipper
> left random data in flag fields. We cannot read them in such form
> because the results for DBF created by Clipper will be unpredictable
> so we will need to check other conditions before accepting field flags,
> f.e. using information from DBF header we can build field flag mask.
> 

Yes it's true, but how we can identify when the flags are bad informed.
I observed that clipper dbf has 12h - 1Fh same values at all fields.

I think we can do the next at dbfopen:

       if( pArea->bTableType == DB_DBF_VFP || ! pField->bReserved2 )
          dbFieldInfo.uiFlags = pField->bFieldFlags;
       else
          dbFieldInfo.uiFlags = 0;


Best regards,
Miguel Angel Marchuet
From mbelgrano at deltain.it  Fri Oct 19 10:09:17 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Oct 19 10:09:47 2007
Subject: [Harbour] IS Xharbour still alive?
In-Reply-To: <47186227.6050405@tesipro.com>
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>	<4712362B.4060007@kevincarmody.com><20071018092918.GD10129@localhost.localdomain>
	<47186227.6050405@tesipro.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809AAD8@SRV02.deltain.net>

I see a very little number of update in last month in xharbour and most
derivated from harbour
So I post follow question
Is xharbour still alive?
How many posting have daily the xharbour developer list?
How many developer are active working on it?

From mbelgrano at deltain.it  Fri Oct 19 10:20:42 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Oct 19 10:20:53 2007
Subject: R: [Harbour] Wich linux distro use Przemyslaw Czerpak?
In-Reply-To: <20071018092408.GC10129@localhost.localdomain>
References: <20070717212206.730B.SSBBS@mail.zzz.com.tw><AFB948164110ED43B5EB849E8DEEF03809AA92@SRV02.deltain.net>
	<20071018092408.GC10129@localhost.localdomain>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809AAD9@SRV02.deltain.net>

Very thanks to every body for valuable info
Can you post me where download SUSE 10.3?

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Przemyslaw Czerpak
Inviato: gioved? 18 ottobre 2007 11.24
A: Harbour Project Main Developer List.
Oggetto: Re: [Harbour] Wich linux distro use Przemyslaw Czerpak?

On Sun, 14 Oct 2007, Massimo Belgrano wrote:
> Witch Linux distribution use Przemyslaw Czerpak?

Many different, f.e.: RH7.3, Aurox10, PLD, FC3, Suse10.[123] for x86@32
and x86@64. Chose sth for which you may find some help.
If you need my advice then few days ago SUSE 10.3 was released and
probably you will find most of things you may need directly in distribution.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From devlist.harbour at gmail.com  Fri Oct 19 10:41:14 2007
From: devlist.harbour at gmail.com (Patrick Mast, xHarbour.com)
Date: Fri Oct 19 10:41:23 2007
Subject: [Harbour] IS Xharbour still alive?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809AAD8@SRV02.deltain.net>
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>	<4712362B.4060007@kevincarmody.com><20071018092918.GD10129@localhost.localdomain>
	<47186227.6050405@tesipro.com>
	<AFB948164110ED43B5EB849E8DEEF03809AAD8@SRV02.deltain.net>
Message-ID: <007C1C50-0063-49D2-8B01-9E446FEDFD30@GMail.com>

Hey Massimo,

> I see a very little number of update in last month in xharbour and  
> most
> derivated from harbour
> So I post follow question
> Is xharbour still alive?
> How many posting have daily the xharbour developer list?
> How many developer are active working on it?

No worries on xHarbour ;-)

xHarbour CVS is in a release freeze right now. Many developers are  
just waiting for the release freeze to be over before committing new  
stuff to xHarbour CVS.

Patrick
From mbelgrano at deltain.it  Fri Oct 19 11:01:24 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Oct 19 11:01:34 2007
Subject: R: [Harbour] IS Xharbour still alive?
In-Reply-To: <007C1C50-0063-49D2-8B01-9E446FEDFD30@GMail.com>
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>	<4712362B.4060007@kevincarmody.com><20071018092918.GD10129@localhost.localdomain><47186227.6050405@tesipro.com><AFB948164110ED43B5EB849E8DEEF03809AAD8@SRV02.deltain.net>
	<007C1C50-0063-49D2-8B01-9E446FEDFD30@GMail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809AADA@SRV02.deltain.net>

Thanks for clarification
But why have an half year of release freeze?
Why I don't see as corrected the 90% of about 25 error of six month ago?


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Patrick Mast, xHarbour.com
Inviato: venerd? 19 ottobre 2007 12.41
A: Harbour Project Main Developer List.
Oggetto: Re: [Harbour] IS Xharbour still alive?

Hey Massimo,

> I see a very little number of update in last month in xharbour and  
> most
> derivated from harbour
> So I post follow question
> Is xharbour still alive?
> How many posting have daily the xharbour developer list?
> How many developer are active working on it?

No worries on xHarbour ;-)

xHarbour CVS is in a release freeze right now. Many developers are  
just waiting for the release freeze to be over before committing new  
stuff to xHarbour CVS.

Patrick
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From ptucker at sympatico.ca  Fri Oct 19 11:17:53 2007
From: ptucker at sympatico.ca (Paul Tucker)
Date: Fri Oct 19 11:18:04 2007
Subject: [Harbour] STRONG TYPED VARIABLES
References: <4717a157.0bbf5e0a.1a9b.05d2@mx.google.com>
Message-ID: <02cd01c81241$b19279c0$6a00a8c0@xHarbour.ca>

 AL> http://www.roomsof.com/channels/about.shtml

I was a beta tester for Moove, and at that time, certain portions of source 
code were posted, or supplied on the CD (don't recall now), and if you saw 
the code, you would most certainly recognize its roots :-)

Paul

From devlist.harbour at gmail.com  Fri Oct 19 11:39:03 2007
From: devlist.harbour at gmail.com (Patrick Mast, xHarbour.com)
Date: Fri Oct 19 11:39:13 2007
Subject: R: [Harbour] IS Xharbour still alive?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809AADA@SRV02.deltain.net>
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>	<4712362B.4060007@kevincarmody.com><20071018092918.GD10129@localhost.localdomain><47186227.6050405@tesipro.com><AFB948164110ED43B5EB849E8DEEF03809AAD8@SRV02.deltain.net>
	<007C1C50-0063-49D2-8B01-9E446FEDFD30@GMail.com>
	<AFB948164110ED43B5EB849E8DEEF03809AADA@SRV02.deltain.net>
Message-ID: <3440EF3F-1349-4845-AFA2-4901CBA3DEE3@GMail.com>

Massimo,

> Thanks for clarification

No problem.

> But why have an half year of release freeze?
> Why I don't see as corrected the 90% of about 25 error of six month  
> ago?

The Harbour project and xHarbour are open source projects maintained  
by volunteers, which may have many other priorities in their life.

But no worries, as soon as release freeze is over, all will normalize  
again real soon.

Patrick
From i at kevincarmody.com  Fri Oct 19 12:30:50 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Fri Oct 19 12:29:55 2007
Subject: R: [Harbour] Future
In-Reply-To: <47186227.6050405@tesipro.com>
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>	<4712362B.4060007@kevincarmody.com>	<20071018092918.GD10129@localhost.localdomain>
	<47186227.6050405@tesipro.com>
Message-ID: <4718A37A.7090903@kevincarmody.com>

Rafa (TESIPRO) wrote:
> Przemyslaw Czerpak escribi?:
>> On Sun, 14 Oct 2007, Kevin Carmody wrote:
>>  
>>> I've written some Harbour routines for handling UTF8 on the back 
>>> end.  These can be used with current Harbour.  You can download this 
>>> from http://kevincarmody.com/misc/unicodeconvert.prg     
>>
>>   
> Well, this routines have problemns;
> FUNCTION UnicodeReadLine(),
> Not exists CONSTANTS, for C_CR, C_LF, CRLF
>
> LOCAL cCR      := C_CR
> LOCAL cLF      := C_LF
> LOCAL cCRLF    := CRLF
>
> And not exist function RShave().

Now corrected.  UnicodeReadLine() is in the group of deprecated array 
style functions, as explained in the comments, although this function 
does not itself use an array.  I wrote these functions before the UTF-8 
functions and before I realized that Harbour MemoRead() and MemoWrit() 
can handle large files.  I suggest using UniToU8(MemoRead()) to read the 
whole file instead of UnicodeReadLine() to read a file line by line.  Or 
you can try the functions that Przemek wrote, as he explains:

> Few weeks ago I added to core code C version
> for these functions:
>
>     HB_STRTOUTF8(), HB_UTF8TOSTR(), HB_UTF8LEN(),
>     HB_UTF8LEFT(), HB_UTF8RIGHT(),
>     HB_UTF8PEEK(), HB_UTF8POKE(),
>     HB_UTF8STUFF(), HB_UTF8SUBSTR(), HB_UTF8STRTRAN()
>
> so some of your functions can be already redirected.
>   

These functions are undocumented (as are many Harbour functions) but the 
source is in source/rtl/cdpapi.c.

Kevin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20071019/25eff1d7/attachment.html
From druzus at acn.waw.pl  Fri Oct 19 13:08:56 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 19 13:09:03 2007
Subject: R: [Harbour] Future
In-Reply-To: <4718A37A.7090903@kevincarmody.com>
References: <20070820141400.GC13960@localhost.localdomain>
	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>
	<4712362B.4060007@kevincarmody.com>
	<20071018092918.GD10129@localhost.localdomain>
	<47186227.6050405@tesipro.com> <4718A37A.7090903@kevincarmody.com>
Message-ID: <20071019130856.GA2745@localhost.localdomain>

On Fri, 19 Oct 2007, Kevin Carmody wrote:
> >    HB_STRTOUTF8(), HB_UTF8TOSTR(), HB_UTF8LEN(),
> >    HB_UTF8LEFT(), HB_UTF8RIGHT(),
> >    HB_UTF8PEEK(), HB_UTF8POKE(),
> >    HB_UTF8STUFF(), HB_UTF8SUBSTR(), HB_UTF8STRTRAN()
> >so some of your functions can be already redirected.
> These functions are undocumented (as are many Harbour functions) but the 
> source is in source/rtl/cdpapi.c.

See the ChangeLog. I usually document nearly all new .prg functions
and extensions in this file. The bad thing is that a lot of current
Harbour native RDD code is my work borrowed from xHarbour so for
information about some functions you should look at ChangeLog(s) in
xHarbour but as practice shows people do not used to read even Harbour
ones :-(

2007-06-23 11:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/cdpapi.c
    + added two prg functions for translations from/to UTF-8:
         HB_STRTOUTF8( <cStr> [, <cCPID> ] ) -> <cUTF8Str>
         HB_UTF8TOSTR( <cUTF8Str> [, <cCPID> ] ) -> <cStr>
      <cCPID> is Harbour codepage id, f.e.: "EN", "ES", "ESWIN",
      "PLISO", "PLMAZ", "PL852", "PLWIN", ...
      When not given then default HVM codepage (set by HB_SETCODEPAGE())
      is used.

2007-07-18 21:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/cdpapi.c
    + added .prg functions: HB_UTF8SUBSTR(), HB_UTF8LEFT(), HB_UTF8RIGHT(),
                            HB_UTF8LEN(), HB_UTF8PEEK()
      They are working like corresponding functions: SUBSTR(), LEFT(),
      RIGHT(), LEN(), STRPEEK() but operates on UTF-8 strings.
      TODO: HB_UTF8STUFF(), HB_UTF8TRAN(), HB_UTF8POKE()

2007-08-14 15:22 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/cdpapi.c
    + added HB_UTF8TRAN(), HB_UTF8STUFF(), HB_UTF8POKE()

I know that it's not long elaborate but IMHO it's enough to understand
how they work at least for people who used corresponding non UTF8
functions. If someone has some spare time and can create longer
description then it will be nice.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Oct 19 13:11:35 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 19 13:11:44 2007
Subject: R: [Harbour] Wich linux distro use Przemyslaw Czerpak?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809AAD9@SRV02.deltain.net>
References: <20071018092408.GC10129@localhost.localdomain>
	<AFB948164110ED43B5EB849E8DEEF03809AAD9@SRV02.deltain.net>
Message-ID: <20071019131135.GB2745@localhost.localdomain>

On Fri, 19 Oct 2007, Massimo Belgrano wrote:
> Very thanks to every body for valuable info
> Can you post me where download SUSE 10.3?

http://download.opensuse.org/

best regards,
Przemek
From mbelgrano at deltain.it  Fri Oct 19 13:23:26 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Oct 19 13:25:12 2007
Subject: R: R: [Harbour] IS Xharbour still alive?
In-Reply-To: <3440EF3F-1349-4845-AFA2-4901CBA3DEE3@GMail.com>
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>	<4712362B.4060007@kevincarmody.com><20071018092918.GD10129@localhost.localdomain><47186227.6050405@tesipro.com><AFB948164110ED43B5EB849E8DEEF03809AAD8@SRV02.deltain.net><007C1C50-0063-49D2-8B01-9E446FEDFD30@GMail.com><AFB948164110ED43B5EB849E8DEEF03809AADA@SRV02.deltain.net>
	<3440EF3F-1349-4845-AFA2-4901CBA3DEE3@GMail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809AADC@SRV02.deltain.net>

Very thanks for clarification


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Patrick Mast, xHarbour.com
Inviato: venerd? 19 ottobre 2007 13.39
A: Harbour Project Main Developer List.
Oggetto: Re: R: [Harbour] IS Xharbour still alive?

Massimo,

> Thanks for clarification

No problem.

> But why have an half year of release freeze?
> Why I don't see as corrected the 90% of about 25 error of six month  
> ago?

The Harbour project and xHarbour are open source projects maintained  
by volunteers, which may have many other priorities in their life.

But no worries, as soon as release freeze is over, all will normalize  
again real soon.

Patrick
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From i at kevincarmody.com  Fri Oct 19 14:06:37 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Fri Oct 19 14:06:01 2007
Subject: R: [Harbour] Future
In-Reply-To: <20071019130856.GA2745@localhost.localdomain>
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>	<4712362B.4060007@kevincarmody.com>	<20071018092918.GD10129@localhost.localdomain>	<47186227.6050405@tesipro.com>
	<4718A37A.7090903@kevincarmody.com>
	<20071019130856.GA2745@localhost.localdomain>
Message-ID: <4718B9ED.3090806@kevincarmody.com>

Przemyslaw Czerpak wrote:
> On Fri, 19 Oct 2007, Kevin Carmody wrote:
>   
>>>    HB_STRTOUTF8(), HB_UTF8TOSTR(), HB_UTF8LEN(),
>>>    HB_UTF8LEFT(), HB_UTF8RIGHT(),
>>>    HB_UTF8PEEK(), HB_UTF8POKE(),
>>>    HB_UTF8STUFF(), HB_UTF8SUBSTR(), HB_UTF8STRTRAN()
>>> so some of your functions can be already redirected.
>>>       
>> These functions are undocumented (as are many Harbour functions) but the 
>> source is in source/rtl/cdpapi.c.
>>     
>
> See the ChangeLog. I usually document nearly all new .prg functions
> and extensions in this file. The bad thing is that a lot of current
> Harbour native RDD code is my work borrowed from xHarbour so for
> information about some functions you should look at ChangeLog(s) in
> xHarbour but as practice shows people do not used to read even Harbour
> ones :-(
>   

Przemek,

Thanks for the reminder.  I'm one of those people who forget about the 
ChangeLogs.

Are you aware of the very nice help file (x)Harbour.chm that in the 
current MiniGui Extended distribution?   Download
http://www.hmgextended.com/files/CONTRIB/hmg-1.4-44-setup.zip
and then look in the Harbour/doc folder.  I use this as my primary 
resource for information on Harbour functions.

Kevin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20071019/732733e2/attachment.html
From druzus at acn.waw.pl  Fri Oct 19 14:16:37 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 19 14:16:43 2007
Subject: [Harbour] 2007-10-19 16:16 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710191416.l9JEGbku009168@31-mo5-4.acn.waw.pl>

2007-10-19 16:16 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapicdp.h
  * harbour/source/rtl/cdpapi.c
    + added hb_cdpGetChar()

  + harbour/tests/wcecon.prg
    + added demonstration console program for WinCE,
      compile it using:
         hbmk -n -w -es2 -gtwvt wcecon

  * harbour/include/hbwince.h
  * harbour/source/common/hbwince.c
  * harbour/contrib/win32/w32_ole.c
  * harbour/contrib/odbc/odbc.c
    * use UNICODE macro instead of HB_WINCE to allow using Unicode
      WINAPI also in other MS-Windows versions

  * harbour/source/rtl/gtwvt/gtwvt.h
  * harbour/source/rtl/gtwvt/gtwvt.c
    + added support for Unicode IO

  * harbour/source/rtl/diskspac.c
  * harbour/source/rtl/disksphb.c
     ! fixed wrongly set error code
     ! fixed possible access to uninitialized memory
     * use GetDiskFreeSpaceEx() on WinCE instead of GetDiskFreeSpace()
       for disk larger then 4GB - I do not know if PocketPC have such
       large devices now or if WinCE can support it but for sure it will
       somewhere in the future

best regards
Przemek
From ssbbs at mail.zzz.com.tw  Fri Oct 19 15:18:33 2007
From: ssbbs at mail.zzz.com.tw ({TE(WenSheng))
Date: Fri Oct 19 15:18:37 2007
Subject: R: [Harbour] Future
In-Reply-To: <20071019130856.GA2745@localhost.localdomain>
References: <4718A37A.7090903@kevincarmody.com>
	<20071019130856.GA2745@localhost.localdomain>
Message-ID: <20071019231735.D280.SSBBS@mail.zzz.com.tw>


Hi!!

   Can you write function about HB_UTF8TRANSFORM() ?

> > >    HB_STRTOUTF8(), HB_UTF8TOSTR(), HB_UTF8LEN(),
> > >    HB_UTF8LEFT(), HB_UTF8RIGHT(),
> > >    HB_UTF8PEEK(), HB_UTF8POKE(),
> > >    HB_UTF8STUFF(), HB_UTF8SUBSTR(), HB_UTF8STRTRAN()



From jarabal at ya.com  Fri Oct 19 16:10:10 2007
From: jarabal at ya.com (Javier)
Date: Fri Oct 19 16:11:12 2007
Subject: R: [Harbour] IS Xharbour still alive?
In-Reply-To: <3440EF3F-1349-4845-AFA2-4901CBA3DEE3@GMail.com>
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>	<4712362B.4060007@kevincarmody.com><20071018092918.GD10129@localhost.localdomain><47186227.6050405@tesipro.com><AFB948164110ED43B5EB849E8DEEF03809AAD8@SRV02.deltain.net>	<007C1C50-0063-49D2-8B01-9E446FEDFD30@GMail.com>	<AFB948164110ED43B5EB849E8DEEF03809AADA@SRV02.deltain.net>
	<3440EF3F-1349-4845-AFA2-4901CBA3DEE3@GMail.com>
Message-ID: <4718D6E2.1070103@ya.com>

Patrick,

Ok, but ... *WHY* is closed development mailing list, even read?

Greetings
Xavi

Patrick Mast, xHarbour.com escribi?:
> Massimo,
>
>> Thanks for clarification
>
> No problem.
>
>> But why have an half year of release freeze?
>> Why I don't see as corrected the 90% of about 25 error of six month ago?
>
> The Harbour project and xHarbour are open source projects maintained 
> by volunteers, which may have many other priorities in their life.
>
> But no worries, as soon as release freeze is over, all will normalize 
> again real soon.
>
> Patrick
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From miguelangel at marchuet.net  Fri Oct 19 16:10:10 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Fri Oct 19 16:17:29 2007
Subject: [Harbour] Incremental fields
In-Reply-To: <200710191416.l9JEGbku009168@31-mo5-4.acn.waw.pl>
References: <200710191416.l9JEGbku009168@31-mo5-4.acn.waw.pl>
Message-ID: <4718D6E2.2010202@marchuet.net>

Incremental fields will be initialized when the file is ZAPed.

Best regards,
Miguel Angel Marchuet

From mbelgrano at deltain.it  Fri Oct 19 16:48:43 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Oct 19 16:48:56 2007
Subject: R: R: [Harbour] IS Xharbour still alive?
In-Reply-To: <4718D6E2.1070103@ya.com>
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>	<4712362B.4060007@kevincarmody.com><20071018092918.GD10129@localhost.localdomain><47186227.6050405@tesipro.com><AFB948164110ED43B5EB849E8DEEF03809AAD8@SRV02.deltain.net>	<007C1C50-0063-49D2-8B01-9E446FEDFD30@GMail.com>	<AFB948164110ED43B5EB849E8DEEF03809AADA@SRV02.deltain.net><3440EF3F-1349-4845-AFA2-4901CBA3DEE3@GMail.com>
	<4718D6E2.1070103@ya.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809AADF@SRV02.deltain.net>

Are you sure?
IMO Xharbour.com is born as closed mailing list 
Anybody have info?

-----Messaggio originale-----
>Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Javier
>Inviato: venerd? 19 ottobre 2007 18.10
>A: Harbour Project Main Developer List.
>Oggetto: Re: R: [Harbour] IS Xharbour still alive?
>Patrick,
>Ok, but ... *WHY* is closed development mailing list, even read?
>Greetings
>Xavi

From devlist.harbour at gmail.com  Fri Oct 19 17:01:40 2007
From: devlist.harbour at gmail.com (Patrick Mast, xHarbour.com)
Date: Fri Oct 19 17:01:49 2007
Subject: R: [Harbour] IS Xharbour still alive?
In-Reply-To: <4718D6E2.1070103@ya.com>
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>	<4712362B.4060007@kevincarmody.com><20071018092918.GD10129@localhost.localdomain><47186227.6050405@tesipro.com><AFB948164110ED43B5EB849E8DEEF03809AAD8@SRV02.deltain.net>	<007C1C50-0063-49D2-8B01-9E446FEDFD30@GMail.com>	<AFB948164110ED43B5EB849E8DEEF03809AADA@SRV02.deltain.net>
	<3440EF3F-1349-4845-AFA2-4901CBA3DEE3@GMail.com>
	<4718D6E2.1070103@ya.com>
Message-ID: <E81A6FCA-2C6E-48A4-B9C5-6EE7DA913A04@GMail.com>

Hello Javier,

> Ok, but ... *WHY* is closed development mailing list, even read?

We have no objection to open up the xHarbour Devlist. Let me look  
into it on how to do it.

Patrick
From devlist.harbour at gmail.com  Fri Oct 19 18:56:48 2007
From: devlist.harbour at gmail.com (Patrick Mast, xHarbour.com)
Date: Fri Oct 19 18:57:03 2007
Subject: R: R: [Harbour] IS Xharbour still alive?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809AADF@SRV02.deltain.net>
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>	<4712362B.4060007@kevincarmody.com><20071018092918.GD10129@localhost.localdomain><47186227.6050405@tesipro.com><AFB948164110ED43B5EB849E8DEEF03809AAD8@SRV02.deltain.net>	<007C1C50-0063-49D2-8B01-9E446FEDFD30@GMail.com>	<AFB948164110ED43B5EB849E8DEEF03809AADA@SRV02.deltain.net><3440EF3F-1349-4845-AFA2-4901CBA3DEE3@GMail.com>
	<4718D6E2.1070103@ya.com>
	<AFB948164110ED43B5EB849E8DEEF03809AADF@SRV02.deltain.net>
Message-ID: <2AFA9124-D8FE-4796-8397-4866427A512E@GMail.com>

Hello Massimo,

> Are you sure?
> IMO Xharbour.com is born as closed mailing list
> Anybody have info?

What are you trying to say? Sorry, I don't understand.

Patrick
From gvarona at ec-red.com  Fri Oct 19 20:36:51 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Fri Oct 19 20:30:07 2007
Subject: [Harbour] Por que se genera la LIB libnulsys.a?
Message-ID: <47191563.2050709@ec-red.com>

Hola, ?Qu? contiene esta LIB?, el caso es que cuando se auto incluye en 
BAT de compilaci?n produce error.

Hello, ?What contains this LIB?, the case is that when itself includes 
in BAT of compilation produces error. 

Salu2,
GVS
From gvarona at ec-red.com  Fri Oct 19 20:40:55 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Fri Oct 19 20:34:12 2007
Subject: [Harbour] Por que se genera la LIB libnulsys.a?
Message-ID: <47191657.4060100@ec-red.com>

Hola, ?Qu? contiene esta LIB?, el caso es que cuando se auto incluye en
BAT de compilaci?n produce error.

Hello, ?What contains this LIB?, the case is that when itself includes
in BAT of compilation produces error.

Salu2,
GVS


MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
	==> Processing E:\SyS_GVS\Stk\FO\MENU.PRG ...
	C:\HARBOU~1\BIN\HARBOUR.EXE
. . . -Wall -c  E:\SyS_GVS\Stk\FO\OBJM2GH\TALONES.c 
-oE:\SyS_GVS\Stk\FO\OBJM2GH\TALONES.o
	==> Making script for link proccess ...
	echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\MENU.o )
	echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\UTIL.o ) >
	echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\MENUSYS.o ) >
	echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKCENCO.o ) >
	echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKCLPRO.o ) >
	echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKGRUPO.o ) >
	echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKINVEN.o ) >
	echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKMASTE.o ) >
	echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKMOVIM.o ) >
	echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKOPSTK.o ) >
	echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKTIDOC.o ) >
	echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\TALONES.o ) >
	echo OUTPUT( E:\SyS_GVS\Stk\FO\Stk2007h.EXE ) >
	echo INPUT( -lgtwin ) >
	echo INPUT( -lhbsix ) >
. . .
	echo INPUT( -lnulsys ) >
. . .
	echo INPUT( -ldebug ) >
	echo INPUT( -lhsx ) >
	echo INPUT( -lrddads ) >
	echo INPUT( -lstdc++ ) >
	echo INPUT( -lAbraxasMinGW ) >
	echo SEARCH_DIR( C:\hmg\lib ) >
	echo SEARCH_DIR( C:\HARBOU~1\lib ) >
	echo SEARCH_DIR( C:\MinGW\lib ) >
	echo SEARCH_DIR( E:\SYS_GVS\ABRAXAS ) >
	==> Linking to make E:\SyS_GVS\Stk\FO\Stk2007h.EXE ...
	C:\MinGW\BIN\GCC.EXE -Wall -mno-cygwin -oE:\SyS_GVS\Stk\FO\Stk2007h.EXE 
-LC:\hmg\lib -LC:\HARBOU~1\lib -LC:\MinGW\lib -LE:\SYS_GVS\ABRAXAS 
E:\SyS_GVS\Stk\FO\OBJM2GH\MENU.o E:\SyS_GVS\Stk\FO\OBJM2GH\UTIL.o 
E:\SyS_GVS\Stk\FO\OBJM2GH\MENUSYS.o E:\SyS_GVS\Stk\FO\OBJM2GH\STKCENCO.o 
E:\SyS_GVS\Stk\FO\OBJM2GH\STKCLPRO.o 
E:\SyS_GVS\Stk\FO\OBJM2GH\STKGRUPO.o 
E:\SyS_GVS\Stk\FO\OBJM2GH\STKINVEN.o 
E:\SyS_GVS\Stk\FO\OBJM2GH\STKMASTE.o 
E:\SyS_GVS\Stk\FO\OBJM2GH\STKMOVIM.o 
E:\SyS_GVS\Stk\FO\OBJM2GH\STKOPSTK.o 
E:\SyS_GVS\Stk\FO\OBJM2GH\STKTIDOC.o E:\SyS_GVS\Stk\FO\OBJM2GH\TALONES.o 
-mconsole -Wl,--start-group -lgtwin -lhbsix -lvm -lrdd -lmacro -lpp 
-lrtl -llang -lcommon -lnulsys -ldbfntx -ldbfcdx -ldbffpt -luser32 
-lwinspool -lcomctl32 -lcomdlg32 -lgdi32 -lole32 -loleaut32 -luuid 
-lwinmm -lvfw32 -lwsock32 -lct -lmisc -lgraph -lreport -lini -lhbole 
-lregistry -lcodepage -ldebug -lhsx -lrddads -lstdc++ -lAbraxasMinGW 
-Wl,--end-group
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x0):nulsys.c: multiple 
definition of `hb_rddSelectWorkAreaAlias'
C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0x974):wafunc.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xa):nulsys.c: multiple 
definition of `hb_rddSelectWorkAreaNumber'
C:\HARBOU~1\lib/librdd.a(wacore.o)(.text+0xa37):wacore.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x14):nulsys.c: multiple 
definition of `hb_rddSelectWorkAreaSymbol'
C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0x7e9):wafunc.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x1e):nulsys.c: multiple 
definition of `hb_rddGetCurrentWorkAreaNumber'
C:\HARBOU~1\lib/librdd.a(wacore.o)(.text+0xa2b):wacore.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x28):nulsys.c: multiple 
definition of `hb_rddFieldGet'
C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0xa56):wafunc.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x32):nulsys.c: multiple 
definition of `hb_rddFieldPut'
C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0xada):wafunc.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x3c):nulsys.c: multiple 
definition of `hb_rddGetFieldValue'
C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0xb5e):wafunc.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x46):nulsys.c: multiple 
definition of `hb_rddPutFieldValue'
C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0xc26):wafunc.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x50):nulsys.c: multiple 
definition of `hb_rddGetAliasNumber'
C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0x6dd):wafunc.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x5a):nulsys.c: multiple 
definition of `hb_rddShutDown'
C:\HARBOU~1\lib/librdd.a(workarea.o)(.text+0x2aed):workarea.c: first 
defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x5f):nulsys.c: multiple 
definition of `HB_FUN_RDDSYS'
C:\HARBOU~1\lib/librdd.a(rddsys.o)(.text+0x39):rddsys.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x64):nulsys.c: multiple 
definition of `HB_FUN_RDDNAME'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x4147):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x78):nulsys.c: multiple 
definition of `HB_FUN_RDDLIST'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x4118):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x8c):nulsys.c: multiple 
definition of `HB_FUN_FIELDGET'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1bf8):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xa0):nulsys.c: multiple 
definition of `HB_FUN_FIELDPUT'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1f34):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xb4):nulsys.c: multiple 
definition of `HB_FUN_FIELDPOS'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1eda):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xc8):nulsys.c: multiple 
definition of `HB_FUN_FIELDNAME'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1e34):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xdc):nulsys.c: multiple 
definition of `HB_FUN_DBCREATE'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x8a2):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xe1):nulsys.c: multiple 
definition of `HB_FUN_DBUSEAREA'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x19d5):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xe6):nulsys.c: multiple 
definition of `HB_FUN_DBCLOSEAREA'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x83c):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xeb):nulsys.c: multiple 
definition of `HB_FUN_DBGOTO'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0xe85):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xff):nulsys.c: multiple 
definition of `HB_FUN_DBGOTOP'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0xf1b):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x104):nulsys.c: multiple 
definition of `HB_FUN_DBGOBOTTOM'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0xe39):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x109):nulsys.c: multiple 
definition of `HB_FUN_DBSEEK'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x148a):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x11d):nulsys.c: multiple 
definition of `HB_FUN_DBSKIP'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x17c0):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x145):nulsys.c: multiple 
definition of `HB_FUN_DBAPPEND'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x734):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x14a):nulsys.c: multiple 
definition of `HB_FUN_DBRECALL'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1287):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x14f):nulsys.c: multiple 
definition of `HB_FUN_DBDELETE'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0xd8d):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x154):nulsys.c: multiple 
definition of `HB_FUN_DBRLOCK'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x12d3):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x168):nulsys.c: multiple 
definition of `HB_FUN_DBUNLOCK'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1971):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x17c):nulsys.c: multiple 
definition of `HB_FUN_DBRELATION'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x46a1):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x190):nulsys.c: multiple 
definition of `HB_FUN_DBRSELECT'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x4714):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x1a4):nulsys.c: multiple 
definition of `HB_FUN_SELECT'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x438e):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x1b8):nulsys.c: multiple 
definition of `HB_FUN_ALIAS'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x31a):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x1cc):nulsys.c: multiple 
definition of `HB_FUN_USED'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x43fe):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x1e0):nulsys.c: multiple 
definition of `HB_FUN_NETERR'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x228f):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x1f4):nulsys.c: multiple 
definition of `HB_FUN_LOCK'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x21af):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x208):nulsys.c: multiple 
definition of `HB_FUN_FLOCK'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1fbb):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x21c):nulsys.c: multiple 
definition of `HB_FUN_RLOCK'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x4319):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x230):nulsys.c: multiple 
definition of `HB_FUN_BOF'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x6f6):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x244):nulsys.c: multiple 
definition of `HB_FUN_EOF'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1b7a):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x258):nulsys.c: multiple 
definition of `HB_FUN_FOUND'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x2030):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x26c):nulsys.c: multiple 
definition of `HB_FUN_DELETED'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1b3b):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x280):nulsys.c: multiple 
definition of `HB_FUN_RECNO'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x4251):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x294):nulsys.c: multiple 
definition of `HB_FUN_RECCOUNT'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x4244):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x2a8):nulsys.c: multiple 
definition of `HB_FUN_LASTREC'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x2170):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x2bc):nulsys.c: multiple 
definition of `HB_FUN_FCOUNT'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1bb9):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x2d0):nulsys.c: multiple 
definition of `HB_FUN_INDEXORD'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x20da):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x2e4):nulsys.c: multiple 
definition of `HB_FUN_INDEXKEY'
C:\HARBOU~1\lib/librdd.a(rddord.o)(.text+0xe7):rddord.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x2f8):nulsys.c: multiple 
definition of `HB_FUN_ORDNAME'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x3d6f):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x30c):nulsys.c: multiple 
definition of `HB_FUN_ORDKEY'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x2dc7):dbcmd.c: first defined here
C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x320):nulsys.c: multiple 
definition of `HB_FUN_ORDFOR'
C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x2c6c):dbcmd.c: first defined here
collect2: ld returned 1 exit status

From info at fsgiudice.com  Fri Oct 19 22:19:24 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri Oct 19 22:19:37 2007
Subject: [Harbour] 2007-10-19 16:16 UTC+0200 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <200710191416.l9JEGbku009168@31-mo5-4.acn.waw.pl>
Message-ID: <000201c8129e$1cb0f130$b400a8c0@ASUSFSG>

Przemek,

my hat off, *another* great job !

I have tested in my new cross-compiling environment and tested wcecon on 
PocketPC Emulator and it works, also if doesn't intercepts mouse.
But after I have added
set(_SET_EVENTMASK,INKEY_ALL)
and now it get left button (not right, but I haven't tried more)

Thank you for your work.

Best Regards

Francesco

----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
To: <harbour@harbour-project.org>
Sent: Friday, October 19, 2007 4:16 PM
Subject: [Harbour] 2007-10-19 16:16 UTC+0200 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> 2007-10-19 16:16 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbapicdp.h
>  * harbour/source/rtl/cdpapi.c
>    + added hb_cdpGetChar()
>
>  + harbour/tests/wcecon.prg
>    + added demonstration console program for WinCE,
>      compile it using:
>         hbmk -n -w -es2 -gtwvt wcecon
>
>  * harbour/include/hbwince.h
>  * harbour/source/common/hbwince.c
>  * harbour/contrib/win32/w32_ole.c
>  * harbour/contrib/odbc/odbc.c
>    * use UNICODE macro instead of HB_WINCE to allow using Unicode
>      WINAPI also in other MS-Windows versions
>
>  * harbour/source/rtl/gtwvt/gtwvt.h
>  * harbour/source/rtl/gtwvt/gtwvt.c
>    + added support for Unicode IO
>
>  * harbour/source/rtl/diskspac.c
>  * harbour/source/rtl/disksphb.c
>     ! fixed wrongly set error code
>     ! fixed possible access to uninitialized memory
>     * use GetDiskFreeSpaceEx() on WinCE instead of GetDiskFreeSpace()
>       for disk larger then 4GB - I do not know if PocketPC have such
>       large devices now or if WinCE can support it but for sure it will
>       somewhere in the future
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 
From info at fsgiudice.com  Fri Oct 19 22:42:57 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri Oct 19 22:43:17 2007
Subject: [Harbour] 2007-10-19 16:16 UTC+0200
	PrzemyslawCzerpak(druzus/at/priv.onet.pl)
References: <200710191416.l9JEGbku009168@31-mo5-4.acn.waw.pl>
	<000201c8129e$1cb0f130$b400a8c0@ASUSFSG>
Message-ID: <000f01c812a1$68a186b0$b400a8c0@ASUSFSG>

Przemek sorry,

I forgot that PocketPC handles only left button, not right!
Now I'm playing with dbf.

regards

Francesco

----- Original Message ----- 
From: "Francesco Saverio Giudice" <info@fsgiudice.com>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Saturday, October 20, 2007 12:19 AM
Subject: Re: [Harbour] 2007-10-19 16:16 UTC+0200 
PrzemyslawCzerpak(druzus/at/priv.onet.pl)


> Przemek,
>
> my hat off, *another* great job !
>
> I have tested in my new cross-compiling environment and tested wcecon on 
> PocketPC Emulator and it works, also if doesn't intercepts mouse.
> But after I have added
> set(_SET_EVENTMASK,INKEY_ALL)
> and now it get left button (not right, but I haven't tried more)
>
> Thank you for your work.
>
> Best Regards
>
> Francesco
>
> ----- Original Message ----- 
> From: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
> To: <harbour@harbour-project.org>
> Sent: Friday, October 19, 2007 4:16 PM
> Subject: [Harbour] 2007-10-19 16:16 UTC+0200 Przemyslaw 
> Czerpak(druzus/at/priv.onet.pl)
>
>
>> 2007-10-19 16:16 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>>  * harbour/include/hbapicdp.h
>>  * harbour/source/rtl/cdpapi.c
>>    + added hb_cdpGetChar()
>>
>>  + harbour/tests/wcecon.prg
>>    + added demonstration console program for WinCE,
>>      compile it using:
>>         hbmk -n -w -es2 -gtwvt wcecon
>>
>>  * harbour/include/hbwince.h
>>  * harbour/source/common/hbwince.c
>>  * harbour/contrib/win32/w32_ole.c
>>  * harbour/contrib/odbc/odbc.c
>>    * use UNICODE macro instead of HB_WINCE to allow using Unicode
>>      WINAPI also in other MS-Windows versions
>>
>>  * harbour/source/rtl/gtwvt/gtwvt.h
>>  * harbour/source/rtl/gtwvt/gtwvt.c
>>    + added support for Unicode IO
>>
>>  * harbour/source/rtl/diskspac.c
>>  * harbour/source/rtl/disksphb.c
>>     ! fixed wrongly set error code
>>     ! fixed possible access to uninitialized memory
>>     * use GetDiskFreeSpaceEx() on WinCE instead of GetDiskFreeSpace()
>>       for disk larger then 4GB - I do not know if PocketPC have such
>>       large devices now or if WinCE can support it but for sure it will
>>       somewhere in the future
>>
>> best regards
>> Przemek
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 
From i at kevincarmody.com  Fri Oct 19 22:49:38 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Fri Oct 19 22:48:38 2007
Subject: R: [Harbour] Future
In-Reply-To: <20071019231735.D280.SSBBS@mail.zzz.com.tw>
References: <4718A37A.7090903@kevincarmody.com>	<20071019130856.GA2745@localhost.localdomain>
	<20071019231735.D280.SSBBS@mail.zzz.com.tw>
Message-ID: <47193482.6070601@kevincarmody.com>

{TE(WenSheng) wrote:
> Hi!!
>
>    Can you write function about HB_UTF8TRANSFORM() ?
>   
>>>>    HB_STRTOUTF8(), HB_UTF8TOSTR(), HB_UTF8LEN(),
>>>>    HB_UTF8LEFT(), HB_UTF8RIGHT(),
>>>>    HB_UTF8PEEK(), HB_UTF8POKE(),
>>>>    HB_UTF8STUFF(), HB_UTF8SUBSTR(), HB_UTF8STRTRAN()
>>>>
>>>>         

TRANSFORM() is a much more complex function than the others. Adapting it
for UTF8 would be a larger job than all the others put together. Perhaps
Przemek or some other developer is willing to do this. If not, there is
the following workaround.

First, we should understand some things about TRANSFORM. Although
TRANSFORM can be used on string, numeric, date, or logical input, its
main value lies with numeric input, since the other types can easily be
handled with other functions.

For numeric input, the picture and output of TRANSFORM are ASCII, and
thus compatible with UTF-8, except for non-template characters. If you
use non-template characters with @R, then these characters are inserted,
and this can be used to insert UTF-8 characters. The byte position of
the non-template characters is computed relative to the template
characters. Since the characters are inserted, this is UTF-8 compatible.

If you use non-template characters without @R, then TRANSFORM overwrites
characters by byte position. This is the only situation in which
TRANSFORM is not UTF-8 compatible. In this case, the workaround is to
use @R, and then use HB_UTF8STUFF or HB_UTF8STRTRAN to eliminate the
characters you wish to overwrite.

Kevin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20071019/a39d3a9e/attachment.html
From gvarona at ec-red.com  Fri Oct 19 22:59:44 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Fri Oct 19 22:53:02 2007
Subject: [Harbour] Error in SET DEVI TO PRINT
Message-ID: <471936E0.60505@ec-red.com>

Hi,

This code:

procedure main
cTmp   := "xx.txt"
SET CONS OFF
SET DEVI TO PRINT
SET PRINT ON
SET PRINT TO (cTmp)
? "Probando"
SET CONS ON
SET DEVI TO SCRE
SET PRINT OFF
SET PRINT TO

In Clipper Ok.

In Harbour:

Error TERM/2014  Create error: PRN.prn (DOS Error 53)
Called from SET(0)
Called from MAIN(4)
E:\SyS_GVS\Stk\FO>

Best Regards.
GVS
From harbour.01 at syenar.hu  Fri Oct 19 23:34:26 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 20 01:27:11 2007
Subject: [Harbour] Error in SET DEVI TO PRINT
In-Reply-To: <471936E0.60505@ec-red.com>
References: <471936E0.60505@ec-red.com>
Message-ID: <E9113995-67FA-488F-875C-FDC2B908040B@syenar.hu>

Hi Guillermo,

Could you try after changing ".prn" to NULL in line 567 of source/rtl/ 
set.c?

(Just a quick idea; this fix looks a bit too obvious to be the proper  
solution)

Brgds,
Viktor

On 2007.10.20., at 0:59, Guillermo Varona Silup? wrote:

> Hi,
>
> This code:
>
> procedure main
> cTmp   := "xx.txt"
> SET CONS OFF
> SET DEVI TO PRINT
> SET PRINT ON
> SET PRINT TO (cTmp)
> ? "Probando"
> SET CONS ON
> SET DEVI TO SCRE
> SET PRINT OFF
> SET PRINT TO
>
> In Clipper Ok.
>
> In Harbour:
>
> Error TERM/2014  Create error: PRN.prn (DOS Error 53)
> Called from SET(0)
> Called from MAIN(4)
> E:\SyS_GVS\Stk\FO>
>
> Best Regards.
> GVS
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From carlos.mora at cpcipc.org  Sat Oct 20 07:21:20 2007
From: carlos.mora at cpcipc.org (Carlos Mora)
Date: Sat Oct 20 07:21:27 2007
Subject: [Harbour] Por que se genera la LIB libnulsys.a?
In-Reply-To: <47191657.4060100@ec-red.com>
References: <47191657.4060100@ec-red.com>
Message-ID: <4719AC70.9000803@cpcipc.org>

Guillermo,
creo que nulsys es un rdd para cuando no necesitas rdd, es decir cuando 
no vas a usar dbfs. Si lo enlazas junto a un rdd normal chocar? ya ue 
tratan de definir las mismas funciones.

UN saludo,

Carlos.
 Varona Silup? escribi?:
> Hola, ?Qu? contiene esta LIB?, el caso es que cuando se auto incluye en
> BAT de compilaci?n produce error.
>
> Hello, ?What contains this LIB?, the case is that when itself includes
> in BAT of compilation produces error.
>
> Salu2,
> GVS
>
>
> MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
>     ==> Processing E:\SyS_GVS\Stk\FO\MENU.PRG ...
>     C:\HARBOU~1\BIN\HARBOUR.EXE
> . . . -Wall -c  E:\SyS_GVS\Stk\FO\OBJM2GH\TALONES.c 
> -oE:\SyS_GVS\Stk\FO\OBJM2GH\TALONES.o
>     ==> Making script for link proccess ...
>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\MENU.o )
>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\UTIL.o ) >
>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\MENUSYS.o ) >
>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKCENCO.o ) >
>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKCLPRO.o ) >
>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKGRUPO.o ) >
>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKINVEN.o ) >
>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKMASTE.o ) >
>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKMOVIM.o ) >
>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKOPSTK.o ) >
>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKTIDOC.o ) >
>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\TALONES.o ) >
>     echo OUTPUT( E:\SyS_GVS\Stk\FO\Stk2007h.EXE ) >
>     echo INPUT( -lgtwin ) >
>     echo INPUT( -lhbsix ) >
> . . .
>     echo INPUT( -lnulsys ) >
> . . .
>     echo INPUT( -ldebug ) >
>     echo INPUT( -lhsx ) >
>     echo INPUT( -lrddads ) >
>     echo INPUT( -lstdc++ ) >
>     echo INPUT( -lAbraxasMinGW ) >
>     echo SEARCH_DIR( C:\hmg\lib ) >
>     echo SEARCH_DIR( C:\HARBOU~1\lib ) >
>     echo SEARCH_DIR( C:\MinGW\lib ) >
>     echo SEARCH_DIR( E:\SYS_GVS\ABRAXAS ) >
>     ==> Linking to make E:\SyS_GVS\Stk\FO\Stk2007h.EXE ...
>     C:\MinGW\BIN\GCC.EXE -Wall -mno-cygwin 
> -oE:\SyS_GVS\Stk\FO\Stk2007h.EXE -LC:\hmg\lib -LC:\HARBOU~1\lib 
> -LC:\MinGW\lib -LE:\SYS_GVS\ABRAXAS E:\SyS_GVS\Stk\FO\OBJM2GH\MENU.o 
> E:\SyS_GVS\Stk\FO\OBJM2GH\UTIL.o E:\SyS_GVS\Stk\FO\OBJM2GH\MENUSYS.o 
> E:\SyS_GVS\Stk\FO\OBJM2GH\STKCENCO.o 
> E:\SyS_GVS\Stk\FO\OBJM2GH\STKCLPRO.o 
> E:\SyS_GVS\Stk\FO\OBJM2GH\STKGRUPO.o 
> E:\SyS_GVS\Stk\FO\OBJM2GH\STKINVEN.o 
> E:\SyS_GVS\Stk\FO\OBJM2GH\STKMASTE.o 
> E:\SyS_GVS\Stk\FO\OBJM2GH\STKMOVIM.o 
> E:\SyS_GVS\Stk\FO\OBJM2GH\STKOPSTK.o 
> E:\SyS_GVS\Stk\FO\OBJM2GH\STKTIDOC.o 
> E:\SyS_GVS\Stk\FO\OBJM2GH\TALONES.o -mconsole -Wl,--start-group 
> -lgtwin -lhbsix -lvm -lrdd -lmacro -lpp -lrtl -llang -lcommon -lnulsys 
> -ldbfntx -ldbfcdx -ldbffpt -luser32 -lwinspool -lcomctl32 -lcomdlg32 
> -lgdi32 -lole32 -loleaut32 -luuid -lwinmm -lvfw32 -lwsock32 -lct 
> -lmisc -lgraph -lreport -lini -lhbole -lregistry -lcodepage -ldebug 
> -lhsx -lrddads -lstdc++ -lAbraxasMinGW -Wl,--end-group
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x0):nulsys.c: multiple 
> definition of `hb_rddSelectWorkAreaAlias'
> C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0x974):wafunc.c: first 
> defined here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xa):nulsys.c: multiple 
> definition of `hb_rddSelectWorkAreaNumber'
> C:\HARBOU~1\lib/librdd.a(wacore.o)(.text+0xa37):wacore.c: first 
> defined here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x14):nulsys.c: multiple 
> definition of `hb_rddSelectWorkAreaSymbol'
> C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0x7e9):wafunc.c: first 
> defined here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x1e):nulsys.c: multiple 
> definition of `hb_rddGetCurrentWorkAreaNumber'
> C:\HARBOU~1\lib/librdd.a(wacore.o)(.text+0xa2b):wacore.c: first 
> defined here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x28):nulsys.c: multiple 
> definition of `hb_rddFieldGet'
> C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0xa56):wafunc.c: first 
> defined here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x32):nulsys.c: multiple 
> definition of `hb_rddFieldPut'
> C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0xada):wafunc.c: first 
> defined here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x3c):nulsys.c: multiple 
> definition of `hb_rddGetFieldValue'
> C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0xb5e):wafunc.c: first 
> defined here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x46):nulsys.c: multiple 
> definition of `hb_rddPutFieldValue'
> C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0xc26):wafunc.c: first 
> defined here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x50):nulsys.c: multiple 
> definition of `hb_rddGetAliasNumber'
> C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0x6dd):wafunc.c: first 
> defined here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x5a):nulsys.c: multiple 
> definition of `hb_rddShutDown'
> C:\HARBOU~1\lib/librdd.a(workarea.o)(.text+0x2aed):workarea.c: first 
> defined here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x5f):nulsys.c: multiple 
> definition of `HB_FUN_RDDSYS'
> C:\HARBOU~1\lib/librdd.a(rddsys.o)(.text+0x39):rddsys.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x64):nulsys.c: multiple 
> definition of `HB_FUN_RDDNAME'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x4147):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x78):nulsys.c: multiple 
> definition of `HB_FUN_RDDLIST'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x4118):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x8c):nulsys.c: multiple 
> definition of `HB_FUN_FIELDGET'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1bf8):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xa0):nulsys.c: multiple 
> definition of `HB_FUN_FIELDPUT'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1f34):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xb4):nulsys.c: multiple 
> definition of `HB_FUN_FIELDPOS'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1eda):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xc8):nulsys.c: multiple 
> definition of `HB_FUN_FIELDNAME'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1e34):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xdc):nulsys.c: multiple 
> definition of `HB_FUN_DBCREATE'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x8a2):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xe1):nulsys.c: multiple 
> definition of `HB_FUN_DBUSEAREA'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x19d5):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xe6):nulsys.c: multiple 
> definition of `HB_FUN_DBCLOSEAREA'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x83c):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xeb):nulsys.c: multiple 
> definition of `HB_FUN_DBGOTO'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0xe85):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xff):nulsys.c: multiple 
> definition of `HB_FUN_DBGOTOP'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0xf1b):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x104):nulsys.c: multiple 
> definition of `HB_FUN_DBGOBOTTOM'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0xe39):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x109):nulsys.c: multiple 
> definition of `HB_FUN_DBSEEK'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x148a):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x11d):nulsys.c: multiple 
> definition of `HB_FUN_DBSKIP'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x17c0):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x145):nulsys.c: multiple 
> definition of `HB_FUN_DBAPPEND'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x734):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x14a):nulsys.c: multiple 
> definition of `HB_FUN_DBRECALL'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1287):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x14f):nulsys.c: multiple 
> definition of `HB_FUN_DBDELETE'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0xd8d):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x154):nulsys.c: multiple 
> definition of `HB_FUN_DBRLOCK'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x12d3):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x168):nulsys.c: multiple 
> definition of `HB_FUN_DBUNLOCK'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1971):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x17c):nulsys.c: multiple 
> definition of `HB_FUN_DBRELATION'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x46a1):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x190):nulsys.c: multiple 
> definition of `HB_FUN_DBRSELECT'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x4714):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x1a4):nulsys.c: multiple 
> definition of `HB_FUN_SELECT'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x438e):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x1b8):nulsys.c: multiple 
> definition of `HB_FUN_ALIAS'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x31a):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x1cc):nulsys.c: multiple 
> definition of `HB_FUN_USED'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x43fe):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x1e0):nulsys.c: multiple 
> definition of `HB_FUN_NETERR'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x228f):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x1f4):nulsys.c: multiple 
> definition of `HB_FUN_LOCK'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x21af):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x208):nulsys.c: multiple 
> definition of `HB_FUN_FLOCK'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1fbb):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x21c):nulsys.c: multiple 
> definition of `HB_FUN_RLOCK'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x4319):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x230):nulsys.c: multiple 
> definition of `HB_FUN_BOF'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x6f6):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x244):nulsys.c: multiple 
> definition of `HB_FUN_EOF'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1b7a):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x258):nulsys.c: multiple 
> definition of `HB_FUN_FOUND'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x2030):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x26c):nulsys.c: multiple 
> definition of `HB_FUN_DELETED'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1b3b):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x280):nulsys.c: multiple 
> definition of `HB_FUN_RECNO'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x4251):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x294):nulsys.c: multiple 
> definition of `HB_FUN_RECCOUNT'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x4244):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x2a8):nulsys.c: multiple 
> definition of `HB_FUN_LASTREC'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x2170):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x2bc):nulsys.c: multiple 
> definition of `HB_FUN_FCOUNT'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1bb9):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x2d0):nulsys.c: multiple 
> definition of `HB_FUN_INDEXORD'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x20da):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x2e4):nulsys.c: multiple 
> definition of `HB_FUN_INDEXKEY'
> C:\HARBOU~1\lib/librdd.a(rddord.o)(.text+0xe7):rddord.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x2f8):nulsys.c: multiple 
> definition of `HB_FUN_ORDNAME'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x3d6f):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x30c):nulsys.c: multiple 
> definition of `HB_FUN_ORDKEY'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x2dc7):dbcmd.c: first defined 
> here
> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x320):nulsys.c: multiple 
> definition of `HB_FUN_ORDFOR'
> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x2c6c):dbcmd.c: first defined 
> here
> collect2: ld returned 1 exit status
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>

From mbelgrano at deltain.it  Sat Oct 20 09:15:03 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 20 09:15:15 2007
Subject: R: R: R: [Harbour] IS Xharbour still alive?
In-Reply-To: <2AFA9124-D8FE-4796-8397-4866427A512E@GMail.com>
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>	<4712362B.4060007@kevincarmody.com><20071018092918.GD10129@localhost.localdomain><47186227.6050405@tesipro.com><AFB948164110ED43B5EB849E8DEEF03809AAD8@SRV02.deltain.net>	<007C1C50-0063-49D2-8B01-9E446FEDFD30@GMail.com>	<AFB948164110ED43B5EB849E8DEEF03809AADA@SRV02.deltain.net><3440EF3F-1349-4845-AFA2-4901CBA3DEE3@GMail.com><4718D6E2.1070103@ya.com><AFB948164110ED43B5EB849E8DEEF03809AADF@SRV02.deltain.net>
	<2AFA9124-D8FE-4796-8397-4866427A512E@GMail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809AAE0@SRV02.deltain.net>

Sorry for my bad english
Xharbour.com developer list was not be opened in his history

Good if you open (read only)  xharbour developer list
IMO You must migrate your Forums from SourceForge to aef or phpBB3 for having read only 
http://en.wikipedia.org/wiki/Comparison_of_Internet_forum_software#Feature_explanation


I suggest also migration from cvs to svn like harbour, more fast and more powerfull



-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Patrick Mast, xHarbour.com
Inviato: venerd? 19 ottobre 2007 20.57
A: Harbour Project Main Developer List.
Oggetto: Re: R: R: [Harbour] IS Xharbour still alive?

Hello Massimo,

> Are you sure?
> IMO Xharbour.com is born as closed mailing list
> Anybody have info?

What are you trying to say? Sorry, I don't understand.

Patrick
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Sat Oct 20 09:21:43 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 20 09:21:54 2007
Subject: R: [Harbour] 2007-10-19 16:16
	UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <000f01c812a1$68a186b0$b400a8c0@ASUSFSG>
References: <200710191416.l9JEGbku009168@31-mo5-4.acn.waw.pl><000201c8129e$1cb0f130$b400a8c0@ASUSFSG>
	<000f01c812a1$68a186b0$b400a8c0@ASUSFSG>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809AAE1@SRV02.deltain.net>

Which tool must i get for compiling a pocket pc exe for this device
http://www.europe.htc.com/it/products/htctytn.html?


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] Per conto di Francesco
Saverio Giudice
Inviato: sabato 20 ottobre 2007 0.43
A: Harbour Project Main Developer List.
Oggetto: Re: [Harbour] 2007-10-19 16:16
UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)

Przemek sorry,

I forgot that PocketPC handles only left button, not right!
Now I'm playing with dbf.

regards

Francesco

----- Original Message ----- 
From: "Francesco Saverio Giudice" <info@fsgiudice.com>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Saturday, October 20, 2007 12:19 AM
Subject: Re: [Harbour] 2007-10-19 16:16 UTC+0200 
PrzemyslawCzerpak(druzus/at/priv.onet.pl)


> Przemek,
>
> my hat off, *another* great job !
>
> I have tested in my new cross-compiling environment and tested wcecon
on 
> PocketPC Emulator and it works, also if doesn't intercepts mouse.
> But after I have added
> set(_SET_EVENTMASK,INKEY_ALL)
> and now it get left button (not right, but I haven't tried more)
>
> Thank you for your work.
>
> Best Regards
>
> Francesco
>
> ----- Original Message ----- 
> From: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
> To: <harbour@harbour-project.org>
> Sent: Friday, October 19, 2007 4:16 PM
> Subject: [Harbour] 2007-10-19 16:16 UTC+0200 Przemyslaw 
> Czerpak(druzus/at/priv.onet.pl)
>
>
>> 2007-10-19 16:16 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>>  * harbour/include/hbapicdp.h
>>  * harbour/source/rtl/cdpapi.c
>>    + added hb_cdpGetChar()
>>
>>  + harbour/tests/wcecon.prg
>>    + added demonstration console program for WinCE,
>>      compile it using:
>>         hbmk -n -w -es2 -gtwvt wcecon
>>
>>  * harbour/include/hbwince.h
>>  * harbour/source/common/hbwince.c
>>  * harbour/contrib/win32/w32_ole.c
>>  * harbour/contrib/odbc/odbc.c
>>    * use UNICODE macro instead of HB_WINCE to allow using Unicode
>>      WINAPI also in other MS-Windows versions
>>
>>  * harbour/source/rtl/gtwvt/gtwvt.h
>>  * harbour/source/rtl/gtwvt/gtwvt.c
>>    + added support for Unicode IO
>>
>>  * harbour/source/rtl/diskspac.c
>>  * harbour/source/rtl/disksphb.c
>>     ! fixed wrongly set error code
>>     ! fixed possible access to uninitialized memory
>>     * use GetDiskFreeSpaceEx() on WinCE instead of GetDiskFreeSpace()
>>       for disk larger then 4GB - I do not know if PocketPC have such
>>       large devices now or if WinCE can support it but for sure it
will
>>       somewhere in the future
>>
>> best regards
>> Przemek
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From info at fsgiudice.com  Sat Oct 20 09:54:26 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Oct 20 09:54:41 2007
Subject: [Harbour] 2007-10-19
	16:16UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
References: <200710191416.l9JEGbku009168@31-mo5-4.acn.waw.pl><000201c8129e$1cb0f130$b400a8c0@ASUSFSG><000f01c812a1$68a186b0$b400a8c0@ASUSFSG>
	<AFB948164110ED43B5EB849E8DEEF03809AAE1@SRV02.deltain.net>
Message-ID: <000501c812ff$349fd6b0$b400a8c0@ASUSFSG>


Massimo,

you need to set a linux machine with MinGW cross-compiler so you will be 
able to compile:

1) pure GNU Linux applications
2) Windows applications
3) *now* PocketPC applications

to make it I found a little complicated, because, at least on my preferred 
Linux distro, which is CentOS, not all tools are ready, but I did it.
I have to found spare time to write an howto doc to make it from scratch as 
I did.
Last info I missing, and some gave me Lorenzo, is some batches to move from 
one to other to easily build (at the moment I have to login/logout to 
switch) but Lorenzo show me how him does, but I have no actually implemented 
correctly.

Regards

Francesco

----- Original Message ----- 
From: "Massimo Belgrano" <mbelgrano@deltain.it>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Saturday, October 20, 2007 11:21 AM
Subject: R: [Harbour] 2007-10-19 
16:16UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)


Which tool must i get for compiling a pocket pc exe for this device
http://www.europe.htc.com/it/products/htctytn.html?


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] Per conto di Francesco
Saverio Giudice
Inviato: sabato 20 ottobre 2007 0.43
A: Harbour Project Main Developer List.
Oggetto: Re: [Harbour] 2007-10-19 16:16
UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)

Przemek sorry,

I forgot that PocketPC handles only left button, not right!
Now I'm playing with dbf.

regards

Francesco

----- Original Message ----- 
From: "Francesco Saverio Giudice" <info@fsgiudice.com>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Saturday, October 20, 2007 12:19 AM
Subject: Re: [Harbour] 2007-10-19 16:16 UTC+0200
PrzemyslawCzerpak(druzus/at/priv.onet.pl)


> Przemek,
>
> my hat off, *another* great job !
>
> I have tested in my new cross-compiling environment and tested wcecon
on
> PocketPC Emulator and it works, also if doesn't intercepts mouse.
> But after I have added
> set(_SET_EVENTMASK,INKEY_ALL)
> and now it get left button (not right, but I haven't tried more)
>
> Thank you for your work.
>
> Best Regards
>
> Francesco
>
> ----- Original Message ----- 
> From: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
> To: <harbour@harbour-project.org>
> Sent: Friday, October 19, 2007 4:16 PM
> Subject: [Harbour] 2007-10-19 16:16 UTC+0200 Przemyslaw
> Czerpak(druzus/at/priv.onet.pl)
>
>
>> 2007-10-19 16:16 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>>  * harbour/include/hbapicdp.h
>>  * harbour/source/rtl/cdpapi.c
>>    + added hb_cdpGetChar()
>>
>>  + harbour/tests/wcecon.prg
>>    + added demonstration console program for WinCE,
>>      compile it using:
>>         hbmk -n -w -es2 -gtwvt wcecon
>>
>>  * harbour/include/hbwince.h
>>  * harbour/source/common/hbwince.c
>>  * harbour/contrib/win32/w32_ole.c
>>  * harbour/contrib/odbc/odbc.c
>>    * use UNICODE macro instead of HB_WINCE to allow using Unicode
>>      WINAPI also in other MS-Windows versions
>>
>>  * harbour/source/rtl/gtwvt/gtwvt.h
>>  * harbour/source/rtl/gtwvt/gtwvt.c
>>    + added support for Unicode IO
>>
>>  * harbour/source/rtl/diskspac.c
>>  * harbour/source/rtl/disksphb.c
>>     ! fixed wrongly set error code
>>     ! fixed possible access to uninitialized memory
>>     * use GetDiskFreeSpaceEx() on WinCE instead of GetDiskFreeSpace()
>>       for disk larger then 4GB - I do not know if PocketPC have such
>>       large devices now or if WinCE can support it but for sure it
will
>>       somewhere in the future
>>
>> best regards
>> Przemek
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour 
From mpaliwoda at interia.pl  Sat Oct 20 12:48:36 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sat Oct 20 12:48:41 2007
Subject: R: R: R: [Harbour] IS Xharbour still alive?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809AAE0@SRV02.deltain.net>
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>	<4712362B.4060007@kevincarmody.com><20071018092918.GD10129@localhost.localdomain><47186227.6050405@tesipro.com><AFB948164110ED43B5EB849E8DEEF03809AAD8@SRV02.deltain.net>	<007C1C50-0063-49D2-8B01-9E446FEDFD30@GMail.com>	<AFB948164110ED43B5EB849E8DEEF03809AADA@SRV02.deltain.net><3440EF3F-1349-4845-AFA2-4901CBA3DEE3@GMail.com><4718D6E2.1070103@ya.com><AFB948164110ED43B5EB849E8DEEF03809AADF@SRV02.deltain.net>	<2AFA9124-D8FE-4796-8397-4866427A512E@GMail.com>
	<AFB948164110ED43B5EB849E8DEEF03809AAE0@SRV02.deltain.net>
Message-ID: <4719F924.8080208@interia.pl>

Isn't comp.lang.xharbour better for such discussion ?
I see it totaly related to xharbour, not harbour.

-- 

Marek

----------------------------------------------------------------------
Bedac w toalecie korzystala z ...

>>>   http://link.interia.pl/f1c35

From mbelgrano at deltain.it  Sat Oct 20 13:54:33 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 20 13:54:52 2007
Subject: R: R: R: R: [Harbour] IS Xharbour still alive?
In-Reply-To: <4719F924.8080208@interia.pl>
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>	<4712362B.4060007@kevincarmody.com><20071018092918.GD10129@localhost.localdomain><47186227.6050405@tesipro.com><AFB948164110ED43B5EB849E8DEEF03809AAD8@SRV02.deltain.net>	<007C1C50-0063-49D2-8B01-9E446FEDFD30@GMail.com>	<AFB948164110ED43B5EB849E8DEEF03809AADA@SRV02.deltain.net><3440EF3F-1349-4845-AFA2-4901CBA3DEE3@GMail.com><4718D6E2.1070103@ya.com><AFB948164110ED43B5EB849E8DEEF03809AADF@SRV02.deltain.net>	<2AFA9124-D8FE-4796-8397-4866427A512E@GMail.com><AFB948164110ED43B5EB849E8DEEF03809AAE0@SRV02.deltain.net>
	<4719F924.8080208@interia.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809AAE3@SRV02.deltain.net>

It is not a developer's mailing list.

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] Per conto di Marek Paliwoda
Inviato: sabato 20 ottobre 2007 14.49
A: Harbour Project Main Developer List.
Oggetto: Re: R: R: R: [Harbour] IS Xharbour still alive?

Isn't comp.lang.xharbour better for such discussion ?
I see it totaly related to xharbour, not harbour.

-- 

Marek

----------------------------------------------------------------------
Bedac w toalecie korzystala z ...

>>>   http://link.interia.pl/f1c35

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mpaliwoda at interia.pl  Sat Oct 20 14:26:41 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sat Oct 20 14:26:46 2007
Subject: R: R: R: R: [Harbour] IS Xharbour still alive?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809AAE3@SRV02.deltain.net>
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>	<4712362B.4060007@kevincarmody.com><20071018092918.GD10129@localhost.localdomain><47186227.6050405@tesipro.com><AFB948164110ED43B5EB849E8DEEF03809AAD8@SRV02.deltain.net>	<007C1C50-0063-49D2-8B01-9E446FEDFD30@GMail.com>	<AFB948164110ED43B5EB849E8DEEF03809AADA@SRV02.deltain.net><3440EF3F-1349-4845-AFA2-4901CBA3DEE3@GMail.com><4718D6E2.1070103@ya.com><AFB948164110ED43B5EB849E8DEEF03809AADF@SRV02.deltain.net>	<2AFA9124-D8FE-4796-8397-4866427A512E@GMail.com><AFB948164110ED43B5EB849E8DEEF03809AAE0@SRV02.deltain.net>	<4719F924.8080208@interia.pl>
	<AFB948164110ED43B5EB849E8DEEF03809AAE3@SRV02.deltain.net>
Message-ID: <471A1021.5070402@interia.pl>

> It is not a developer's mailing list.

So what ?


------------------------------------------------------------
Mordal Kombat pod Sejmem  - zagraj 
Kliknij >>> http://link.interia.pl/f1c31

From mbelgrano at deltain.it  Sat Oct 20 14:54:48 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 20 14:55:03 2007
Subject: R: R: R: R: R: [Harbour] IS Xharbour still alive?
In-Reply-To: <471A1021.5070402@interia.pl>
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>	<4712362B.4060007@kevincarmody.com><20071018092918.GD10129@localhost.localdomain><47186227.6050405@tesipro.com><AFB948164110ED43B5EB849E8DEEF03809AAD8@SRV02.deltain.net>	<007C1C50-0063-49D2-8B01-9E446FEDFD30@GMail.com>	<AFB948164110ED43B5EB849E8DEEF03809AADA@SRV02.deltain.net><3440EF3F-1349-4845-AFA2-4901CBA3DEE3@GMail.com><4718D6E2.1070103@ya.com><AFB948164110ED43B5EB849E8DEEF03809AADF@SRV02.deltain.net>	<2AFA9124-D8FE-4796-8397-4866427A512E@GMail.com><AFB948164110ED43B5EB849E8DEEF03809AAE0@SRV02.deltain.net>	<4719F924.8080208@interia.pl><AFB948164110ED43B5EB849E8DEEF03809AAE3@SRV02.deltain.net>
	<471A1021.5070402@interia.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809AAE4@SRV02.deltain.net>

Is mailing list of user of xharbour .and. not of makers/developer of
xharbour
User exchange his problem using xharbour .and. not about how made
xharbour

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] Per conto di Marek Paliwoda
Inviato: sabato 20 ottobre 2007 16.27
A: Harbour Project Main Developer List.
Oggetto: Re: R: R: R: R: [Harbour] IS Xharbour still alive?

> It is not a developer's mailing list.

So what ?


------------------------------------------------------------
Mordal Kombat pod Sejmem  - zagraj 
Kliknij >>> http://link.interia.pl/f1c31

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From ptucker at sympatico.ca  Sat Oct 20 15:28:10 2007
From: ptucker at sympatico.ca (Paul Tucker)
Date: Sat Oct 20 15:28:28 2007
Subject: [Harbour] IS Xharbour still alive?
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>	<4712362B.4060007@kevincarmody.com><20071018092918.GD10129@localhost.localdomain><47186227.6050405@tesipro.com><AFB948164110ED43B5EB849E8DEEF03809AAD8@SRV02.deltain.net>	<007C1C50-0063-49D2-8B01-9E446FEDFD30@GMail.com>	<AFB948164110ED43B5EB849E8DEEF03809AADA@SRV02.deltain.net><3440EF3F-1349-4845-AFA2-4901CBA3DEE3@GMail.com><4718D6E2.1070103@ya.com><AFB948164110ED43B5EB849E8DEEF03809AADF@SRV02.deltain.net>	<2AFA9124-D8FE-4796-8397-4866427A512E@GMail.com><AFB948164110ED43B5EB849E8DEEF03809AAE0@SRV02.deltain.net>	<4719F924.8080208@interia.pl><AFB948164110ED43B5EB849E8DEEF03809AAE3@SRV02.deltain.net><471A1021.5070402@interia.pl>
	<AFB948164110ED43B5EB849E8DEEF03809AAE4@SRV02.deltain.net>
Message-ID: <083101c8132d$d2af2990$6a00a8c0@xHarbour.ca>

Massimo,

 MB>> It is not a developer's mailing list.

 MP> So what ?

 MB> Is mailing list of user of xharbour .and. not of makers/developer
 MB> of xharbour.
 MB> User exchange his problem using xharbour .and. not about how
 MB> made xharbour

In a way only he understands, perhaps Marek may have been wondering if you 
are asking for access to this:
https://lists.sourceforge.net/lists/listinfo/xharbour-developers

Paul 

From mbelgrano at deltain.it  Sat Oct 20 15:41:16 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 20 15:41:33 2007
Subject: R: [Harbour]
	2007-10-1916:16UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <000501c812ff$349fd6b0$b400a8c0@ASUSFSG>
References: <200710191416.l9JEGbku009168@31-mo5-4.acn.waw.pl><000201c8129e$1cb0f130$b400a8c0@ASUSFSG><000f01c812a1$68a186b0$b400a8c0@ASUSFSG><AFB948164110ED43B5EB849E8DEEF03809AAE1@SRV02.deltain.net>
	<000501c812ff$349fd6b0$b400a8c0@ASUSFSG>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809AAE5@SRV02.deltain.net>

I have downloaded SUSE 10.3 released
What must download?
http://mirzam.it.vu.nl/mingw/

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] Per conto di Francesco
Saverio Giudice
Inviato: sabato 20 ottobre 2007 11.54
A: Harbour Project Main Developer List.
Oggetto: Re: [Harbour]
2007-10-1916:16UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)


Massimo,

you need to set a linux machine with MinGW cross-compiler so you will be

able to compile:

1) pure GNU Linux applications
2) Windows applications
3) *now* PocketPC applications

to make it I found a little complicated, because, at least on my
preferred 
Linux distro, which is CentOS, not all tools are ready, but I did it.
I have to found spare time to write an howto doc to make it from scratch
as 
I did.
Last info I missing, and some gave me Lorenzo, is some batches to move
from 
one to other to easily build (at the moment I have to login/logout to 
switch) but Lorenzo show me how him does, but I have no actually
implemented 
correctly.

Regards

Francesco

----- Original Message ----- 
From: "Massimo Belgrano" <mbelgrano@deltain.it>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Saturday, October 20, 2007 11:21 AM
Subject: R: [Harbour] 2007-10-19 
16:16UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)


Which tool must i get for compiling a pocket pc exe for this device
http://www.europe.htc.com/it/products/htctytn.html?


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] Per conto di Francesco
Saverio Giudice
Inviato: sabato 20 ottobre 2007 0.43
A: Harbour Project Main Developer List.
Oggetto: Re: [Harbour] 2007-10-19 16:16
UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)

Przemek sorry,

I forgot that PocketPC handles only left button, not right!
Now I'm playing with dbf.

regards

Francesco

----- Original Message ----- 
From: "Francesco Saverio Giudice" <info@fsgiudice.com>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Saturday, October 20, 2007 12:19 AM
Subject: Re: [Harbour] 2007-10-19 16:16 UTC+0200
PrzemyslawCzerpak(druzus/at/priv.onet.pl)


> Przemek,
>
> my hat off, *another* great job !
>
> I have tested in my new cross-compiling environment and tested wcecon
on
> PocketPC Emulator and it works, also if doesn't intercepts mouse.
> But after I have added
> set(_SET_EVENTMASK,INKEY_ALL)
> and now it get left button (not right, but I haven't tried more)
>
> Thank you for your work.
>
> Best Regards
>
> Francesco
>
> ----- Original Message ----- 
> From: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
> To: <harbour@harbour-project.org>
> Sent: Friday, October 19, 2007 4:16 PM
> Subject: [Harbour] 2007-10-19 16:16 UTC+0200 Przemyslaw
> Czerpak(druzus/at/priv.onet.pl)
>
>
>> 2007-10-19 16:16 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>>  * harbour/include/hbapicdp.h
>>  * harbour/source/rtl/cdpapi.c
>>    + added hb_cdpGetChar()
>>
>>  + harbour/tests/wcecon.prg
>>    + added demonstration console program for WinCE,
>>      compile it using:
>>         hbmk -n -w -es2 -gtwvt wcecon
>>
>>  * harbour/include/hbwince.h
>>  * harbour/source/common/hbwince.c
>>  * harbour/contrib/win32/w32_ole.c
>>  * harbour/contrib/odbc/odbc.c
>>    * use UNICODE macro instead of HB_WINCE to allow using Unicode
>>      WINAPI also in other MS-Windows versions
>>
>>  * harbour/source/rtl/gtwvt/gtwvt.h
>>  * harbour/source/rtl/gtwvt/gtwvt.c
>>    + added support for Unicode IO
>>
>>  * harbour/source/rtl/diskspac.c
>>  * harbour/source/rtl/disksphb.c
>>     ! fixed wrongly set error code
>>     ! fixed possible access to uninitialized memory
>>     * use GetDiskFreeSpaceEx() on WinCE instead of GetDiskFreeSpace()
>>       for disk larger then 4GB - I do not know if PocketPC have such
>>       large devices now or if WinCE can support it but for sure it
will
>>       somewhere in the future
>>
>> best regards
>> Przemek
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour 
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From budyanto at centrin.net.id  Sat Oct 20 16:20:36 2007
From: budyanto at centrin.net.id (Budyanto Dj.)
Date: Sat Oct 20 16:21:29 2007
Subject: [Harbour] IS Xharbour still alive?
In-Reply-To: <083101c8132d$d2af2990$6a00a8c0@xHarbour.ca>
Message-ID: <471A8D44.29253.1192A0FC@localhost>

Hi Paul,

On 20 Oct 2007 at 11:28, Paul Tucker wrote:
> In a way only he understands, perhaps Marek may have been wondering if you are

I think I understand what Marek means.
Marek was asking why Massimo asks all these questions in this thread here instead of in 
comp.lang.xharbour where it is more relevant.

cheers,
budyanto

From lorenzo.fiorini at gmail.com  Sat Oct 20 16:24:51 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct 20 16:25:07 2007
Subject: [Harbour] 2007-10-19
	16:16UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <000501c812ff$349fd6b0$b400a8c0@ASUSFSG>
References: <200710191416.l9JEGbku009168@31-mo5-4.acn.waw.pl>
	<000201c8129e$1cb0f130$b400a8c0@ASUSFSG>
	<000f01c812a1$68a186b0$b400a8c0@ASUSFSG>
	<AFB948164110ED43B5EB849E8DEEF03809AAE1@SRV02.deltain.net>
	<000501c812ff$349fd6b0$b400a8c0@ASUSFSG>
Message-ID: <9257026e0710200924y16b2ab7ci432d033d4eaa0b94@mail.gmail.com>

On 10/20/07, Francesco Saverio Giudice <info@fsgiudice.com> wrote:

> Last info I missing, and some gave me Lorenzo, is some batches to move from
> one to other to easily build (at the moment I have to login/logout to
> switch) but Lorenzo show me how him does, but I have no actually implemented
> correctly.

It's not easy to give general hints since it heavily depends from the
personal "style" of programming but I've found that moving from
Windows to Linux the "secret" is never try to have "session" wide env
vars like in Windows but use scripts that keep the env vars "local".

I use aliases to set few global env vars that define mode (
native/crossed ), compiler ( Harbour/xHarbour ), revision (
stable/devel ) and a bunch of scripts that combine the three to have
HB_INSTALL_PREFIX like "mingw32-harbour_stable" or "harbour_devel".

Then I use it to set in my scripts env like:

#!/bin/sh
HB_BIN_INSTALL=$HB_INSTALL_PREFIX/bin
HB_LIB_INSTALL=$HB_INSTALL_PREFIX/lib
HB_INC_INSTALL=$HB_INSTALL_PREFIX/include
PATH="$HB_BIN_INSTALL:$PATH"
$*

I keep the sources on a fat32 partition that I share between Windows
2000 and Linux but I seldom boot Windows since I use to create Win32
executables directly from mingw32 cross build and test them using
wine.

Also I'm the only "lucky guy" in the company that has to maintain some
custom C53B/Fivewin 1.95 16bit apps. I build them from the same fat32
partition ( many sources are shared between these apps and the Harbour
ones ) using dosemu and test them using Wine.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Sat Oct 20 16:28:46 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct 20 16:28:51 2007
Subject: R: [Harbour]
	2007-10-1916:16UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809AAE5@SRV02.deltain.net>
References: <200710191416.l9JEGbku009168@31-mo5-4.acn.waw.pl>
	<000201c8129e$1cb0f130$b400a8c0@ASUSFSG>
	<000f01c812a1$68a186b0$b400a8c0@ASUSFSG>
	<AFB948164110ED43B5EB849E8DEEF03809AAE1@SRV02.deltain.net>
	<000501c812ff$349fd6b0$b400a8c0@ASUSFSG>
	<AFB948164110ED43B5EB849E8DEEF03809AAE5@SRV02.deltain.net>
Message-ID: <9257026e0710200928l63d09792r6a9580c454d898b7@mail.gmail.com>

On 10/20/07, Massimo Belgrano <mbelgrano@deltain.it> wrote:

> I have downloaded SUSE 10.3 released
> What must download?

Massimo are you using M$ Outlook?

Please avoid top posting and also please change R: to Re:
Your replies are really difficult to follow for me with gmail since
they are not "threated" :)

best regards,
Lorenzo
From jarabal at ya.com  Sat Oct 20 16:40:54 2007
From: jarabal at ya.com (Javier)
Date: Sat Oct 20 16:41:05 2007
Subject: [Harbour] IS Xharbour still alive?
In-Reply-To: <083101c8132d$d2af2990$6a00a8c0@xHarbour.ca>
References: <20070820141400.GC13960@localhost.localdomain>	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>	<AFB948164110ED43B5EB849E8DEEF03809AA91@SRV02.deltain.net>	<4712362B.4060007@kevincarmody.com><20071018092918.GD10129@localhost.localdomain><47186227.6050405@tesipro.com><AFB948164110ED43B5EB849E8DEEF03809AAD8@SRV02.deltain.net>	<007C1C50-0063-49D2-8B01-9E446FEDFD30@GMail.com>	<AFB948164110ED43B5EB849E8DEEF03809AADA@SRV02.deltain.net><3440EF3F-1349-4845-AFA2-4901CBA3DEE3@GMail.com><4718D6E2.1070103@ya.com><AFB948164110ED43B5EB849E8DEEF03809AADF@SRV02.deltain.net>	<2AFA9124-D8FE-4796-8397-4866427A512E@GMail.com><AFB948164110ED43B5EB849E8DEEF03809AAE0@SRV02.deltain.net>	<4719F924.8080208@interia.pl><AFB948164110ED43B5EB849E8DEEF03809AAE3@SRV02.deltain.net><471A1021.5070402@interia.pl>	<AFB948164110ED43B5EB849E8DEEF03809AAE4@SRV02.deltain.net>
	<083101c8132d$d2af2990$6a00a8c0@xHarbour.ca>
Message-ID: <471A2F96.8090607@ya.com>

This is new. Or, Is this new?
if so. Thanks! Ron & Patrick
Please change the information on page xharbour.org

Greetings
Xavi

Paul Tucker escribi?:
> Massimo,
>
> MB>> It is not a developer's mailing list.
>
> MP> So what ?
>
> MB> Is mailing list of user of xharbour .and. not of makers/developer
> MB> of xharbour.
> MB> User exchange his problem using xharbour .and. not about how
> MB> made xharbour
>
> In a way only he understands, perhaps Marek may have been wondering if 
> you are asking for access to this:
> https://lists.sourceforge.net/lists/listinfo/xharbour-developers
>
> Paul
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From ptucker at sympatico.ca  Sat Oct 20 16:45:53 2007
From: ptucker at sympatico.ca (Paul Tucker)
Date: Sat Oct 20 16:46:08 2007
Subject: [Harbour] IS Xharbour still alive?
References: <471A8D44.29253.1192A0FC@localhost>
Message-ID: <088b01c81338$adf72250$6a00a8c0@xHarbour.ca>

 ??>> In a way only he understands, perhaps Marek may have been wondering if
 ??>> you are

 BD> I think I understand what Marek means.
 BD> Marek was asking why Massimo asks all these questions in this thread
 BD> here instead of in comp.lang.xharbour where it is more relevant.

"So What" hardly contributes anything useful to someone attempting to ask a 
simple question.

Paul

From e.m.giordano at emagsoftware.it  Sat Oct 20 16:54:01 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Oct 20 16:54:06 2007
Subject: [Harbour] Error in latest CVS
Message-ID: <01ae01c81339$d08eeb30$ca64fea9@emag>

Probably I'm missing something but I get the following error using 
gtgui.lib:

Error: Unresolved external '_HB_FUN_HB_GT_WIN' referenced from 
E:\HARBOUR\LIB\RTL.LIB|gtsys

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From mpaliwoda at interia.pl  Sat Oct 20 17:18:38 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sat Oct 20 17:18:43 2007
Subject: [Harbour] IS Xharbour still alive?
In-Reply-To: <471A8D44.29253.1192A0FC@localhost>
References: <471A8D44.29253.1192A0FC@localhost>
Message-ID: <471A386E.30903@interia.pl>

Hi Budyanto Dj.,

>> In a way only he understands, perhaps Marek may have been wondering if you are
> 
> I think I understand what Marek means.
> Marek was asking why Massimo asks all these questions in this thread here instead 
 > of in comp.lang.xharbour where it is more relevant.

Exactly. Thanks Budyanto :)

Just a curiosity ... was it really so hard to understand ? :)

-- 

Marek

----------------------------------------------------------------------
Bedac w toalecie korzystala z ...

>>>   http://link.interia.pl/f1c35

From mpaliwoda at interia.pl  Sat Oct 20 17:22:39 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sat Oct 20 17:22:48 2007
Subject: [Harbour] IS Xharbour still alive?
In-Reply-To: <088b01c81338$adf72250$6a00a8c0@xHarbour.ca>
References: <471A8D44.29253.1192A0FC@localhost>
	<088b01c81338$adf72250$6a00a8c0@xHarbour.ca>
Message-ID: <471A395F.1060208@interia.pl>

Paul Tucker wrote :

> ??>> In a way only he understands, perhaps Marek may have been wondering if
> ??>> you are
> 
> BD> I think I understand what Marek means.
> BD> Marek was asking why Massimo asks all these questions in this thread
> BD> here instead of in comp.lang.xharbour where it is more relevant.
> 
> "So What" hardly contributes anything useful to someone attempting to 
> ask a simple question.

Much more than your personal attack. Do you have too much free time ?
So maybe watch televison or listen to the radio... instead of doing
attacks.


-- 

Marek

Wygraj 5000 z?.!!!! 
Zobacz jak, na  http://link.interia.pl/f1c34

From harbour.01 at syenar.hu  Sat Oct 20 17:36:26 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 20 17:36:35 2007
Subject: [Harbour] 2007-10-19
	16:16UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0710200924y16b2ab7ci432d033d4eaa0b94@mail.gmail.com>
References: <200710191416.l9JEGbku009168@31-mo5-4.acn.waw.pl>
	<000201c8129e$1cb0f130$b400a8c0@ASUSFSG>
	<000f01c812a1$68a186b0$b400a8c0@ASUSFSG>
	<AFB948164110ED43B5EB849E8DEEF03809AAE1@SRV02.deltain.net>
	<000501c812ff$349fd6b0$b400a8c0@ASUSFSG>
	<9257026e0710200924y16b2ab7ci432d033d4eaa0b94@mail.gmail.com>
Message-ID: <7135A627-637B-4967-9069-DFDF23C7677A@syenar.hu>

Hi Lorenzo,

You probably already know it, but the new Ubuntu 7.10
has NTFS drives built in, and they are _read/write_.
This new Ubuntu feels so great I don't want to reboot
to my Windows actually :) (I hope it didn't mess up
my NTFS drives, I'll let the list know what happened.)

And also my Win32 Harbour app runs perfectly with
Wine, aside from a codepage problem which I have yet
to sort out (maybe hb_gtInfo( GTI_CODEPAGE, ... )
is needed?).

Brgds,
Viktor

On 2007.10.20., at 18:24, Lorenzo Fiorini wrote:

> On 10/20/07, Francesco Saverio Giudice <info@fsgiudice.com> wrote:
>
>> Last info I missing, and some gave me Lorenzo, is some batches to  
>> move from
>> one to other to easily build (at the moment I have to login/logout to
>> switch) but Lorenzo show me how him does, but I have no actually  
>> implemented
>> correctly.
>
> It's not easy to give general hints since it heavily depends from the
> personal "style" of programming but I've found that moving from
> Windows to Linux the "secret" is never try to have "session" wide env
> vars like in Windows but use scripts that keep the env vars "local".
>
> I use aliases to set few global env vars that define mode (
> native/crossed ), compiler ( Harbour/xHarbour ), revision (
> stable/devel ) and a bunch of scripts that combine the three to have
> HB_INSTALL_PREFIX like "mingw32-harbour_stable" or "harbour_devel".
>
> Then I use it to set in my scripts env like:
>
> #!/bin/sh
> HB_BIN_INSTALL=$HB_INSTALL_PREFIX/bin
> HB_LIB_INSTALL=$HB_INSTALL_PREFIX/lib
> HB_INC_INSTALL=$HB_INSTALL_PREFIX/include
> PATH="$HB_BIN_INSTALL:$PATH"
> $*
>
> I keep the sources on a fat32 partition that I share between Windows
> 2000 and Linux but I seldom boot Windows since I use to create Win32
> executables directly from mingw32 cross build and test them using
> wine.
>
> Also I'm the only "lucky guy" in the company that has to maintain some
> custom C53B/Fivewin 1.95 16bit apps. I build them from the same fat32
> partition ( many sources are shared between these apps and the Harbour
> ones ) using dosemu and test them using Wine.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From jarabal at ya.com  Sat Oct 20 17:37:20 2007
From: jarabal at ya.com (Javier)
Date: Sat Oct 20 17:37:34 2007
Subject: [Harbour] IS Xharbour still alive?
In-Reply-To: <088b01c81338$adf72250$6a00a8c0@xHarbour.ca>
References: <471A8D44.29253.1192A0FC@localhost>
	<088b01c81338$adf72250$6a00a8c0@xHarbour.ca>
Message-ID: <471A3CD0.3010206@ya.com>

Paul,
The question is _Why is closed? _
IMHO: Very important in "are open source projects maintained by 
volunteers, which may have many other priorities in their life."

A greeting
Xavi

Paul Tucker escribi?:
> ??>> In a way only he understands, perhaps Marek may have been 
> wondering if
> ??>> you are
>
> BD> I think I understand what Marek means.
> BD> Marek was asking why Massimo asks all these questions in this thread
> BD> here instead of in comp.lang.xharbour where it is more relevant.
>
> "So What" hardly contributes anything useful to someone attempting to 
> ask a simple question.
>
> Paul
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From mbelgrano at deltain.it  Sat Oct 20 18:13:06 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 20 18:13:21 2007
Subject: R: [Harbour] IS Xharbour still alive?
In-Reply-To: <471A386E.30903@interia.pl>
References: <471A8D44.29253.1192A0FC@localhost> <471A386E.30903@interia.pl>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809AAE8@SRV02.deltain.net>

Sorry for my misunderstanding
Xharbour and harbour have about 80% same developer 
So I have posted a messages. I have think that one developer in same
project can post a clarification
Also for harbour will be interesting see that only Patrick have given a
clarification (thanks to it)
Sorry if I go out of argument


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] Per conto di Marek Paliwoda
Inviato: sabato 20 ottobre 2007 19.19
A: Harbour Project Main Developer List.
Oggetto: Re: [Harbour] IS Xharbour still alive?

Hi Budyanto Dj.,

>> In a way only he understands, perhaps Marek may have been wondering
if you are
> 
> I think I understand what Marek means.
> Marek was asking why Massimo asks all these questions in this thread
here instead 
 > of in comp.lang.xharbour where it is more relevant.

Exactly. Thanks Budyanto :)

Just a curiosity ... was it really so hard to understand ? :)

-- 

Marek

----------------------------------------------------------------------
Bedac w toalecie korzystala z ...

>>>   http://link.interia.pl/f1c35

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From ptucker at sympatico.ca  Sat Oct 20 18:37:16 2007
From: ptucker at sympatico.ca (Paul Tucker)
Date: Sat Oct 20 18:37:33 2007
Subject: [Harbour] IS Xharbour still alive?
References: <471A8D44.29253.1192A0FC@localhost><088b01c81338$adf72250$6a00a8c0@xHarbour.ca>
	<471A395F.1060208@interia.pl>
Message-ID: <0a7501c81348$3da1dc10$6a00a8c0@xHarbour.ca>

 ??>> "So What" hardly contributes anything useful to someone attempting to
 ??>> ask a simple question.

 MP> Much more than your personal attack. Do you have too much free time ?
 MP> So maybe watch televison or listen to the radio... instead of doing
 MP> attacks.

What has my spare time got to do with anything?  If you take what I said as 
an attack of some sort, that's up to you.  I was trying to make something 
positive out of it.

Paul 

From lorenzo.fiorini at gmail.com  Sat Oct 20 18:40:15 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct 20 18:40:18 2007
Subject: [Harbour] 2007-10-19
	16:16UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <7135A627-637B-4967-9069-DFDF23C7677A@syenar.hu>
References: <200710191416.l9JEGbku009168@31-mo5-4.acn.waw.pl>
	<000201c8129e$1cb0f130$b400a8c0@ASUSFSG>
	<000f01c812a1$68a186b0$b400a8c0@ASUSFSG>
	<AFB948164110ED43B5EB849E8DEEF03809AAE1@SRV02.deltain.net>
	<000501c812ff$349fd6b0$b400a8c0@ASUSFSG>
	<9257026e0710200924y16b2ab7ci432d033d4eaa0b94@mail.gmail.com>
	<7135A627-637B-4967-9069-DFDF23C7677A@syenar.hu>
Message-ID: <9257026e0710201140j6977702ene1d3a77901d4a103@mail.gmail.com>

On 10/20/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> And also my Win32 Harbour app runs perfectly with
> Wine, aside from a codepage problem which I have yet
> to sort out (maybe hb_gtInfo( GTI_CODEPAGE, ... )
> is needed?).

I also have a meesage regarding codepage 255 in Wine.

To "fix" the problem I've removed all the chars > 127 from all my apps
and my messages since f.e pocketputty don't manage UTF8 and in GTWVT
I've replaced OEM_CHARSET with DEFAULT_CHARSET ( not sure if it is
correct ).

I still have some few "problems" with gtwvt like inkey( 1 ) that need
a key press to continue or that I can't get more than 102 cols but
they are minor ones.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Sat Oct 20 19:45:01 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 20 19:45:09 2007
Subject: [Harbour] Harbour in Linux distros
Message-ID: <2F21518F-5F34-42DE-AFBA-B9B6086FFAB7@syenar.hu>

Hi all,

Does anyone know what do we need to do to add
Harbour to the Linux distros? I'd personally find
Debian/Ubuntu the most important.

It would be cool if Harbour could be installed
with apt-get (and similar).

Brgds,
Viktor

From mbelgrano at deltain.it  Sat Oct 20 22:05:07 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Oct 20 22:05:24 2007
Subject: [Harbour] Harbour roadmap ?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809AA11@SRV02.deltain.net>
References: <200710050841.55838.teo@windtelsoft.com><3D223D87-7395-4DA6-ABD9-C64C0F7FB75C@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03809AA11@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809AAEA@SRV02.deltain.net>

Will harbour be merge with recall or koffice?
Can be a way for having a visual core with Form,Query,Report integrated
with a real languages ?

http://www.rekallrevealed.org/kbExec.py
Rekall is a database front-end, somewhat in the style of MicroSoft
Access(tm). However, Rekall is not itself a database, and does not
include a database. By this we mean that data is stored somewhere else
in an SQL server, and Rekall is fundementaly just a tool to extract,
display and update that data (of course, it does lots more than that, it
does forms and reports and scripting and .... you get the idea). It is
database agnostic, and does not have any preferred database in the sense
that Access(tm) uses the Jet. database engine (although the Windows
version can use the Jet database engine via an ODBC driver). 

Rekall can do lots of the things that you would expect of a database
front-end (or if it can't, let us know!). You can design and use forms
and reports, you can construct database queries, and you can import and
export data (actually, you can copy data, import is just copy file to
table, and export is just copy table to file). You can also create
reusable components which you can use in forms and reports, to reduce
application development time. 

http://www.koffice.org/kexi/
Kexi is considered as a long awaited Open Source competitor for
Microsoft Access, Filemaker and Oracle Forms. Its development is
motivated by the lack of Rapid Application Development (RAD) tools for
database systems that are sufficiently powerful, inexpensive, open
standards driven and portable across many operating systems and hardware
platforms. 

Kexi is an integrated data management application. It can be used for
creating databases, inserting data, performing queries, and processing
data. Forms can be created to provide a custom interface to your data.
All database objects - tables, queries and forms - are stored in the
database, making it easy to share data and design. 

From gvarona at ec-red.com  Sat Oct 20 22:08:06 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Sat Oct 20 22:08:25 2007
Subject: [Harbour] Por que se genera la LIB libnulsys.a?
In-Reply-To: <4719AC70.9000803@cpcipc.org>
References: <47191657.4060100@ec-red.com> <4719AC70.9000803@cpcipc.org>
Message-ID: <471A7C46.6000301@ec-red.com>

Carlos Mora escribi?:
> Guillermo,
> creo que nulsys es un rdd para cuando no necesitas rdd, es decir 
> cuando no vas a usar dbfs. Si lo enlazas junto a un rdd normal chocar? 
> ya ue tratan de definir las mismas funciones.
Gracias Carlos por la aclaraci?n.
Supongo que esta es una implementaci?n nueva, ya que antes no se 
generaba esta LIB. Lo tendre en cuenta.

Salu2,
GVS

>
> UN saludo,
>
> Carlos.
> Varona Silup? escribi?:
>> Hola, ?Qu? contiene esta LIB?, el caso es que cuando se auto incluye en
>> BAT de compilaci?n produce error.
>>
>> Hello, ?What contains this LIB?, the case is that when itself includes
>> in BAT of compilation produces error.
>>
>> Salu2,
>> GVS
>>
>>
>> MAKE Version 5.2  Copyright (c) 1987, 2000 Borland
>>     ==> Processing E:\SyS_GVS\Stk\FO\MENU.PRG ...
>>     C:\HARBOU~1\BIN\HARBOUR.EXE
>> . . . -Wall -c  E:\SyS_GVS\Stk\FO\OBJM2GH\TALONES.c 
>> -oE:\SyS_GVS\Stk\FO\OBJM2GH\TALONES.o
>>     ==> Making script for link proccess ...
>>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\MENU.o )
>>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\UTIL.o ) >
>>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\MENUSYS.o ) >
>>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKCENCO.o ) >
>>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKCLPRO.o ) >
>>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKGRUPO.o ) >
>>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKINVEN.o ) >
>>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKMASTE.o ) >
>>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKMOVIM.o ) >
>>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKOPSTK.o ) >
>>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\STKTIDOC.o ) >
>>     echo INPUT( E:\SyS_GVS\Stk\FO\OBJM2GH\TALONES.o ) >
>>     echo OUTPUT( E:\SyS_GVS\Stk\FO\Stk2007h.EXE ) >
>>     echo INPUT( -lgtwin ) >
>>     echo INPUT( -lhbsix ) >
>> . . .
>>     echo INPUT( -lnulsys ) >
>> . . .
>>     echo INPUT( -ldebug ) >
>>     echo INPUT( -lhsx ) >
>>     echo INPUT( -lrddads ) >
>>     echo INPUT( -lstdc++ ) >
>>     echo INPUT( -lAbraxasMinGW ) >
>>     echo SEARCH_DIR( C:\hmg\lib ) >
>>     echo SEARCH_DIR( C:\HARBOU~1\lib ) >
>>     echo SEARCH_DIR( C:\MinGW\lib ) >
>>     echo SEARCH_DIR( E:\SYS_GVS\ABRAXAS ) >
>>     ==> Linking to make E:\SyS_GVS\Stk\FO\Stk2007h.EXE ...
>>     C:\MinGW\BIN\GCC.EXE -Wall -mno-cygwin 
>> -oE:\SyS_GVS\Stk\FO\Stk2007h.EXE -LC:\hmg\lib -LC:\HARBOU~1\lib 
>> -LC:\MinGW\lib -LE:\SYS_GVS\ABRAXAS E:\SyS_GVS\Stk\FO\OBJM2GH\MENU.o 
>> E:\SyS_GVS\Stk\FO\OBJM2GH\UTIL.o E:\SyS_GVS\Stk\FO\OBJM2GH\MENUSYS.o 
>> E:\SyS_GVS\Stk\FO\OBJM2GH\STKCENCO.o 
>> E:\SyS_GVS\Stk\FO\OBJM2GH\STKCLPRO.o 
>> E:\SyS_GVS\Stk\FO\OBJM2GH\STKGRUPO.o 
>> E:\SyS_GVS\Stk\FO\OBJM2GH\STKINVEN.o 
>> E:\SyS_GVS\Stk\FO\OBJM2GH\STKMASTE.o 
>> E:\SyS_GVS\Stk\FO\OBJM2GH\STKMOVIM.o 
>> E:\SyS_GVS\Stk\FO\OBJM2GH\STKOPSTK.o 
>> E:\SyS_GVS\Stk\FO\OBJM2GH\STKTIDOC.o 
>> E:\SyS_GVS\Stk\FO\OBJM2GH\TALONES.o -mconsole -Wl,--start-group 
>> -lgtwin -lhbsix -lvm -lrdd -lmacro -lpp -lrtl -llang -lcommon 
>> -lnulsys -ldbfntx -ldbfcdx -ldbffpt -luser32 -lwinspool -lcomctl32 
>> -lcomdlg32 -lgdi32 -lole32 -loleaut32 -luuid -lwinmm -lvfw32 
>> -lwsock32 -lct -lmisc -lgraph -lreport -lini -lhbole -lregistry 
>> -lcodepage -ldebug -lhsx -lrddads -lstdc++ -lAbraxasMinGW 
>> -Wl,--end-group
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x0):nulsys.c: multiple 
>> definition of `hb_rddSelectWorkAreaAlias'
>> C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0x974):wafunc.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xa):nulsys.c: multiple 
>> definition of `hb_rddSelectWorkAreaNumber'
>> C:\HARBOU~1\lib/librdd.a(wacore.o)(.text+0xa37):wacore.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x14):nulsys.c: multiple 
>> definition of `hb_rddSelectWorkAreaSymbol'
>> C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0x7e9):wafunc.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x1e):nulsys.c: multiple 
>> definition of `hb_rddGetCurrentWorkAreaNumber'
>> C:\HARBOU~1\lib/librdd.a(wacore.o)(.text+0xa2b):wacore.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x28):nulsys.c: multiple 
>> definition of `hb_rddFieldGet'
>> C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0xa56):wafunc.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x32):nulsys.c: multiple 
>> definition of `hb_rddFieldPut'
>> C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0xada):wafunc.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x3c):nulsys.c: multiple 
>> definition of `hb_rddGetFieldValue'
>> C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0xb5e):wafunc.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x46):nulsys.c: multiple 
>> definition of `hb_rddPutFieldValue'
>> C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0xc26):wafunc.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x50):nulsys.c: multiple 
>> definition of `hb_rddGetAliasNumber'
>> C:\HARBOU~1\lib/librdd.a(wafunc.o)(.text+0x6dd):wafunc.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x5a):nulsys.c: multiple 
>> definition of `hb_rddShutDown'
>> C:\HARBOU~1\lib/librdd.a(workarea.o)(.text+0x2aed):workarea.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x5f):nulsys.c: multiple 
>> definition of `HB_FUN_RDDSYS'
>> C:\HARBOU~1\lib/librdd.a(rddsys.o)(.text+0x39):rddsys.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x64):nulsys.c: multiple 
>> definition of `HB_FUN_RDDNAME'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x4147):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x78):nulsys.c: multiple 
>> definition of `HB_FUN_RDDLIST'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x4118):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x8c):nulsys.c: multiple 
>> definition of `HB_FUN_FIELDGET'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1bf8):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xa0):nulsys.c: multiple 
>> definition of `HB_FUN_FIELDPUT'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1f34):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xb4):nulsys.c: multiple 
>> definition of `HB_FUN_FIELDPOS'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1eda):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xc8):nulsys.c: multiple 
>> definition of `HB_FUN_FIELDNAME'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1e34):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xdc):nulsys.c: multiple 
>> definition of `HB_FUN_DBCREATE'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x8a2):dbcmd.c: first defined 
>> here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xe1):nulsys.c: multiple 
>> definition of `HB_FUN_DBUSEAREA'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x19d5):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xe6):nulsys.c: multiple 
>> definition of `HB_FUN_DBCLOSEAREA'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x83c):dbcmd.c: first defined 
>> here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xeb):nulsys.c: multiple 
>> definition of `HB_FUN_DBGOTO'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0xe85):dbcmd.c: first defined 
>> here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0xff):nulsys.c: multiple 
>> definition of `HB_FUN_DBGOTOP'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0xf1b):dbcmd.c: first defined 
>> here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x104):nulsys.c: multiple 
>> definition of `HB_FUN_DBGOBOTTOM'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0xe39):dbcmd.c: first defined 
>> here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x109):nulsys.c: multiple 
>> definition of `HB_FUN_DBSEEK'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x148a):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x11d):nulsys.c: multiple 
>> definition of `HB_FUN_DBSKIP'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x17c0):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x145):nulsys.c: multiple 
>> definition of `HB_FUN_DBAPPEND'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x734):dbcmd.c: first defined 
>> here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x14a):nulsys.c: multiple 
>> definition of `HB_FUN_DBRECALL'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1287):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x14f):nulsys.c: multiple 
>> definition of `HB_FUN_DBDELETE'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0xd8d):dbcmd.c: first defined 
>> here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x154):nulsys.c: multiple 
>> definition of `HB_FUN_DBRLOCK'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x12d3):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x168):nulsys.c: multiple 
>> definition of `HB_FUN_DBUNLOCK'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1971):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x17c):nulsys.c: multiple 
>> definition of `HB_FUN_DBRELATION'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x46a1):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x190):nulsys.c: multiple 
>> definition of `HB_FUN_DBRSELECT'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x4714):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x1a4):nulsys.c: multiple 
>> definition of `HB_FUN_SELECT'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x438e):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x1b8):nulsys.c: multiple 
>> definition of `HB_FUN_ALIAS'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x31a):dbcmd.c: first defined 
>> here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x1cc):nulsys.c: multiple 
>> definition of `HB_FUN_USED'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x43fe):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x1e0):nulsys.c: multiple 
>> definition of `HB_FUN_NETERR'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x228f):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x1f4):nulsys.c: multiple 
>> definition of `HB_FUN_LOCK'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x21af):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x208):nulsys.c: multiple 
>> definition of `HB_FUN_FLOCK'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1fbb):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x21c):nulsys.c: multiple 
>> definition of `HB_FUN_RLOCK'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x4319):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x230):nulsys.c: multiple 
>> definition of `HB_FUN_BOF'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x6f6):dbcmd.c: first defined 
>> here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x244):nulsys.c: multiple 
>> definition of `HB_FUN_EOF'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1b7a):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x258):nulsys.c: multiple 
>> definition of `HB_FUN_FOUND'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x2030):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x26c):nulsys.c: multiple 
>> definition of `HB_FUN_DELETED'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1b3b):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x280):nulsys.c: multiple 
>> definition of `HB_FUN_RECNO'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x4251):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x294):nulsys.c: multiple 
>> definition of `HB_FUN_RECCOUNT'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x4244):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x2a8):nulsys.c: multiple 
>> definition of `HB_FUN_LASTREC'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x2170):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x2bc):nulsys.c: multiple 
>> definition of `HB_FUN_FCOUNT'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x1bb9):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x2d0):nulsys.c: multiple 
>> definition of `HB_FUN_INDEXORD'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x20da):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x2e4):nulsys.c: multiple 
>> definition of `HB_FUN_INDEXKEY'
>> C:\HARBOU~1\lib/librdd.a(rddord.o)(.text+0xe7):rddord.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x2f8):nulsys.c: multiple 
>> definition of `HB_FUN_ORDNAME'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x3d6f):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x30c):nulsys.c: multiple 
>> definition of `HB_FUN_ORDKEY'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x2dc7):dbcmd.c: first 
>> defined here
>> C:\HARBOU~1\lib/libnulsys.a(nulsys.o)(.text+0x320):nulsys.c: multiple 
>> definition of `HB_FUN_ORDFOR'
>> C:\HARBOU~1\lib/librdd.a(dbcmd.o)(.text+0x2c6c):dbcmd.c: first 
>> defined here
>> collect2: ld returned 1 exit status
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>

From philb at philb.us  Sat Oct 20 22:36:04 2007
From: philb at philb.us (Phil Barnett)
Date: Sat Oct 20 22:40:47 2007
Subject: R: [Harbour] IS Xharbour still alive?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809AAE8@SRV02.deltain.net>
References: <471A8D44.29253.1192A0FC@localhost> <471A386E.30903@interia.pl>
	<AFB948164110ED43B5EB849E8DEEF03809AAE8@SRV02.deltain.net>
Message-ID: <200710201836.04569.philb@philb.us>

On Saturday 20 October 2007, Massimo Belgrano wrote:
> Sorry for my misunderstanding
> Xharbour and harbour have about 80% same developer
> So I have posted a messages. I have think that one developer in same
> project can post a clarification
> Also for harbour will be interesting see that only Patrick have given a
> clarification (thanks to it)
> Sorry if I go out of argument

While the language may be very similar, this was not a question about 
language, but about people. People who are controlling things there but are 
not controlling things here.

Perhaps if you would ask this question on the xHarbour mailing lists you would 
get a better answer. We are not experts on how xHarbour runs itself.

The part where Patrick has answered you only means that he happened to read 
your message that was really not appropriate to be answered here (due to our 
lack of knowledge of why) and politely answered it.

Nothing wrong with that. You were lucky.

-- 
Phil Barnett
AI4OF
SKCC #600
DRCC #51
From harbour.01 at syenar.hu  Sat Oct 20 23:33:02 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 20 23:33:13 2007
Subject: [Harbour] Re: Harbour in Linux distros
In-Reply-To: <2F21518F-5F34-42DE-AFBA-B9B6086FFAB7@syenar.hu>
References: <2F21518F-5F34-42DE-AFBA-B9B6086FFAB7@syenar.hu>
Message-ID: <500D461E-9D9B-45DE-829A-3B6CF1C58EE2@syenar.hu>

I've found this page:
http://mentors.debian.net/

Brgds,
Viktor

On 2007.10.20., at 21:45, Szak?ts Viktor wrote:

> Hi all,
>
> Does anyone know what do we need to do to add
> Harbour to the Linux distros? I'd personally find
> Debian/Ubuntu the most important.
>
> It would be cool if Harbour could be installed
> with apt-get (and similar).
>
> Brgds,
> Viktor
>

From gvarona at ec-red.com  Sun Oct 21 00:14:47 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Sun Oct 21 00:14:51 2007
Subject: [Harbour] Error in SET DEVI TO PRINT
In-Reply-To: <E9113995-67FA-488F-875C-FDC2B908040B@syenar.hu>
References: <471936E0.60505@ec-red.com>
	<E9113995-67FA-488F-875C-FDC2B908040B@syenar.hu>
Message-ID: <471A99F7.6050008@ec-red.com>

Szak?ts Viktor escribi?:
> Hi Guillermo,
>
> Could you try after changing ".prn" to NULL in line 567 of 
> source/rtl/set.c?
> (Just a quick idea; this fix looks a bit too obvious to be the proper 
> solution)
Es raro Viktor, estoy en la maquina de mi casa, he actualizado, no he 
cambiado nada y ahora no me da el error que reporte.
Por ahora lo dejo aqui.

 From http://www.google.com.pe/language_tools?hl=es
It is rare Viktor, I am in my home machine, I just updated, I have not 
changed anything, and now does not give me the error report.
For now I leave here.

Best Regards
GVS

>
> Brgds,
> Viktor
>
> On 2007.10.20., at 0:59, Guillermo Varona Silup? wrote:
>
>> Hi,
>>
>> This code:
>>
>> procedure main
>> cTmp   := "xx.txt"
>> SET CONS OFF
>> SET DEVI TO PRINT
>> SET PRINT ON
>> SET PRINT TO (cTmp)
>> ? "Probando"
>> SET CONS ON
>> SET DEVI TO SCRE
>> SET PRINT OFF
>> SET PRINT TO
>>
>> In Clipper Ok.
>>
>> In Harbour:
>>
>> Error TERM/2014  Create error: PRN.prn (DOS Error 53)
>> Called from SET(0)
>> Called from MAIN(4)
>> E:\SyS_GVS\Stk\FO>
>>
>> Best Regards.
>> GVS
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>

From harbour.01 at syenar.hu  Sun Oct 21 00:35:56 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 21 00:36:04 2007
Subject: [Harbour] Error in SET DEVI TO PRINT
In-Reply-To: <471A99F7.6050008@ec-red.com>
References: <471936E0.60505@ec-red.com>
	<E9113995-67FA-488F-875C-FDC2B908040B@syenar.hu>
	<471A99F7.6050008@ec-red.com>
Message-ID: <3051F0B3-729E-40B2-85D5-F08111E3CB6C@syenar.hu>

Hi,

Well, for me the error message indicates that the filename
is right after this fix: "PRN" (was: "PRN.prn")

Could you try another thing?

Pls change "PRN" to "LPT1" in line 978 in set.c, and see if it
works then.

Brgds,
Viktor

On 2007.10.21., at 2:14, Guillermo Varona Silup? wrote:

> Szak?ts Viktor escribi?:
>> Hi Guillermo,
>>
>> Could you try after changing ".prn" to NULL in line 567 of source/ 
>> rtl/set.c?
>> (Just a quick idea; this fix looks a bit too obvious to be the  
>> proper solution)
> Es raro Viktor, estoy en la maquina de mi casa, he actualizado, no  
> he cambiado nada y ahora no me da el error que reporte.
> Por ahora lo dejo aqui.
>
> From http://www.google.com.pe/language_tools?hl=es
> It is rare Viktor, I am in my home machine, I just updated, I have  
> not changed anything, and now does not give me the error report.
> For now I leave here.
>
> Best Regards
> GVS
>
>>
>> Brgds,
>> Viktor
>>
>> On 2007.10.20., at 0:59, Guillermo Varona Silup? wrote:
>>
>>> Hi,
>>>
>>> This code:
>>>
>>> procedure main
>>> cTmp   := "xx.txt"
>>> SET CONS OFF
>>> SET DEVI TO PRINT
>>> SET PRINT ON
>>> SET PRINT TO (cTmp)
>>> ? "Probando"
>>> SET CONS ON
>>> SET DEVI TO SCRE
>>> SET PRINT OFF
>>> SET PRINT TO
>>>
>>> In Clipper Ok.
>>>
>>> In Harbour:
>>>
>>> Error TERM/2014  Create error: PRN.prn (DOS Error 53)
>>> Called from SET(0)
>>> Called from MAIN(4)
>>> E:\SyS_GVS\Stk\FO>
>>>
>>> Best Regards.
>>> GVS
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From gvarona at ec-red.com  Sun Oct 21 01:04:04 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Sun Oct 21 01:04:09 2007
Subject: [Harbour] Error in SET DEVI TO PRINT
In-Reply-To: <3051F0B3-729E-40B2-85D5-F08111E3CB6C@syenar.hu>
References: <471936E0.60505@ec-red.com>	<E9113995-67FA-488F-875C-FDC2B908040B@syenar.hu>	<471A99F7.6050008@ec-red.com>
	<3051F0B3-729E-40B2-85D5-F08111E3CB6C@syenar.hu>
Message-ID: <471AA584.2060700@ec-red.com>

Szak?ts Viktor escribi?:
> Hi,
>
> Well, for me the error message indicates that the filename
> is right after this fix: "PRN" (was: "PRN.prn")
>
> Could you try another thing?
>
> Pls change "PRN" to "LPT1" in line 978 in set.c, and see if it
> works then.
Bien Viktor, despues del cambio, tambien trabaja bien.

 From http://www.google.com.pe/language_tools?hl=es
Viktor Well, then change also works well.

Best Regards
GVS
>
> Brgds,
> Viktor
>
> On 2007.10.21., at 2:14, Guillermo Varona Silup? wrote:
>
>> Szak?ts Viktor escribi?:
>>> Hi Guillermo,
>>>
>>> Could you try after changing ".prn" to NULL in line 567 of 
>>> source/rtl/set.c?
>>> (Just a quick idea; this fix looks a bit too obvious to be the 
>>> proper solution)
>> Es raro Viktor, estoy en la maquina de mi casa, he actualizado, no he 
>> cambiado nada y ahora no me da el error que reporte.
>> Por ahora lo dejo aqui.
>>
>> From http://www.google.com.pe/language_tools?hl=es
>> It is rare Viktor, I am in my home machine, I just updated, I have 
>> not changed anything, and now does not give me the error report.
>> For now I leave here.
>>
>> Best Regards
>> GVS
>>
>>>
>>> Brgds,
>>> Viktor
>>>
>>> On 2007.10.20., at 0:59, Guillermo Varona Silup? wrote:
>>>
>>>> Hi,
>>>>
>>>> This code:
>>>>
>>>> procedure main
>>>> cTmp   := "xx.txt"
>>>> SET CONS OFF
>>>> SET DEVI TO PRINT
>>>> SET PRINT ON
>>>> SET PRINT TO (cTmp)
>>>> ? "Probando"
>>>> SET CONS ON
>>>> SET DEVI TO SCRE
>>>> SET PRINT OFF
>>>> SET PRINT TO
>>>>
>>>> In Clipper Ok.
>>>>
>>>> In Harbour:
>>>>
>>>> Error TERM/2014  Create error: PRN.prn (DOS Error 53)
>>>> Called from SET(0)
>>>> Called from MAIN(4)
>>>> E:\SyS_GVS\Stk\FO>
>>>>
>>>> Best Regards.
>>>> GVS
>>>> _______________________________________________
>>>> Harbour mailing list
>>>> Harbour@harbour-project.org
>>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>>
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>>
>>>
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>

From harbour.01 at syenar.hu  Sun Oct 21 01:48:47 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 21 01:48:44 2007
Subject: [Harbour] CHANGELOG: 2007-10-21 02:52 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c81384$Blat.v2.6.2$85b1bb4c$54443e9fd24@127.0.0.1>

2007-10-21 02:52 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * source/rtl/set.c
     ! Fixed SET DEVICE TO PRINTER not to add an extension (".prn") 
       to the filename specified by SET PRINTER TO (the extension 
       is only added by the SET PRINTER TO command).
     ! Fixed SET DEVICE TO PRINTER to point to "LPT1" by default 
       (instead of "PRN") under Win32 (this is now in sync with 
       ISPRINTER() logic). Added "PRN" for the rest of OSes (TOFIX).
     ; Pls test.

   * source/rtl/isprint.c
     ! Cleaned up platform branches in ISPRINTER(). Non DOS/Win32 
       branch is a dummy TODO now.

   * contrib/libnf/fttext.c
     ! Some fixes reported by Mike Evans. Pls test.
       Not all reported bugs were fixed. (ft_FError() returns 
       a constant zero, ft_FUse() still needs ft_FSelect())

   - contrib/directx/HB_DDraw.cpp
   + contrib/directx/w32_ddrw.cpp
   - contrib/directx/HB_DDraw.h
   + contrib/directx/w32_ddrw.h
   * contrib/directx/readme.1st
     ! Harbour API updates to this severly outdated code.
     ! Fixed warnings.
     + Added SVN headers.
--
Brgds,
Viktor

From gvarona at ec-red.com  Sun Oct 21 05:46:14 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Sun Oct 21 05:46:34 2007
Subject: [Harbour] Probando ADORDD Contrib
Message-ID: <471AE7A6.9000307@ec-red.com>

SPA: Hola, estoy haciendo pruebas bastante sencillas con ADORDD y he 
compilado \harbour\contrib\adordd\acces2.prg, pero cuando quiero agregar 
un registro obtengo este error:
ENG: Hello, I am doing fairly simple evidence and he compiled with 
ADORDD \ harbor \ contrib \ adordd \ acces2.prg, but when I want to add 
a record I get this error:

Error BASE/1073  Argument error: <
Called from ADO_ORDINFO(499)
Called from ORDKEY(0)
Called from INDEXKEY(90)
Called from DOGET(328)
Called from BROWSE(258)
Called from MAIN(26)

SPA: Pregunto: Qu? tan estable esta esta LIB? se puede ya utilizar para 
el desarrollo de aplicaciones? Algui?n tiene alguna aplicaci?n 
funcionando con esta LIB?
ENG: Question: How stable this LIB this? I can already used in the 
development of applications? Anyone with any application running this LIB?

Gracias de Antemano / TIA

Best Regards.
GVS
From guy.roussin at teledetection.fr  Sun Oct 21 09:04:37 2007
From: guy.roussin at teledetection.fr (=?UTF-8?B?R3V5IFJvdXNzaW4=?= )
Date: Sun Oct 21 07:04:40 2007
Subject: =?UTF-8?B?UmU6IFtIYXJib3VyXSBIYXJib3VyIGluIExpbnV4IGRpc3Ryb3M=?=
Message-ID: <20071021070437.2CCC236855@mafalda.teledetection.fr>

Hi Viktor,

We already have harbour for debian (in sid) and old stable (sarge):

http://packages.debian.org/search?keywords=harbour&searchon=names&suite=all&section=all

Guy


Szak?ts Viktor <harbour.01@syenar.hu> a ?crit :

> Hi all,
> 
> Does anyone know what do we need to do to add
> Harbour to the Linux distros? I'd personally find
> Debian/Ubuntu the most important.
> 
> It would be cool if Harbour could be installed
> with apt-get (and similar).
> 
> Brgds,
> Viktor
> 


___________________________________
http://www.teledetection.fr


From harbour.01 at syenar.hu  Sun Oct 21 08:13:24 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 21 08:13:33 2007
Subject: [Harbour] Harbour in Linux distros
In-Reply-To: <20071021070437.2CCC236855@mafalda.teledetection.fr>
References: <20071021070437.2CCC236855@mafalda.teledetection.fr>
Message-ID: <A533DEB9-B525-4507-8F99-CB2BF4C37D61@syenar.hu>

Hi Guy,

Ops, sorry for my ignorance, that's good news.
Now I even remember installing it once 8)

It's accessible from 7.10 Gutsy too (version 0.45). Great.

Brgds,
Viktor

On 2007.10.21., at 9:04, Guy Roussin wrote:

> Hi Viktor,
>
> We already have harbour for debian (in sid) and old stable (sarge):
>
> http://packages.debian.org/search? 
> keywords=harbour&searchon=names&suite=all&section=all
>
> Guy
>
>
> Szak?ts Viktor <harbour.01@syenar.hu> a ?crit :
>
>> Hi all,
>>
>> Does anyone know what do we need to do to add
>> Harbour to the Linux distros? I'd personally find
>> Debian/Ubuntu the most important.
>>
>> It would be cool if Harbour could be installed
>> with apt-get (and similar).
>>
>> Brgds,
>> Viktor
>>
>
>
> ___________________________________
> http://www.teledetection.fr
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sun Oct 21 08:30:12 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 21 08:30:20 2007
Subject: [Harbour] Probando ADORDD Contrib
In-Reply-To: <471AE7A6.9000307@ec-red.com>
References: <471AE7A6.9000307@ec-red.com>
Message-ID: <B8AF97E0-FEE4-4C0C-B614-7A74CDF10919@syenar.hu>

Sorry I don't know how stable it is,
but shouldn't we merge this lib into the
win32 contrib lib?

It needs TOLEAuto() from it anyway.

Any opinions?

Brgds,
Viktor

On 2007.10.21., at 7:46, Guillermo Varona Silup? wrote:

> SPA: Hola, estoy haciendo pruebas bastante sencillas con ADORDD y  
> he compilado \harbour\contrib\adordd\acces2.prg, pero cuando quiero  
> agregar un registro obtengo este error:
> ENG: Hello, I am doing fairly simple evidence and he compiled with  
> ADORDD \ harbor \ contrib \ adordd \ acces2.prg, but when I want to  
> add a record I get this error:
>
> Error BASE/1073  Argument error: <
> Called from ADO_ORDINFO(499)
> Called from ORDKEY(0)
> Called from INDEXKEY(90)
> Called from DOGET(328)
> Called from BROWSE(258)
> Called from MAIN(26)
>
> SPA: Pregunto: Qu? tan estable esta esta LIB? se puede ya utilizar  
> para el desarrollo de aplicaciones? Algui?n tiene alguna aplicaci?n  
> funcionando con esta LIB?
> ENG: Question: How stable this LIB this? I can already used in the  
> development of applications? Anyone with any application running  
> this LIB?
>
> Gracias de Antemano / TIA
>
> Best Regards.
> GVS
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From antonioharbour at gmail.com  Sun Oct 21 08:32:27 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Oct 21 08:33:09 2007
Subject: [Harbour] Probando ADORDD Contrib
In-Reply-To: <B8AF97E0-FEE4-4C0C-B614-7A74CDF10919@syenar.hu>
Message-ID: <471b0ec1.1c365e0a.4ae1.488e@mx.google.com>

Viktor, 

>
Sorry I don't know how stable it is,
but shouldn't we merge this lib into the
win32 contrib lib?

It needs TOLEAuto() from it anyway.

Any opinions?
>

There are lots of different APIs in Win32. 

Do you plan to place all of them in one single lib ? :)

Regards,

Antonio

From harbour.01 at syenar.hu  Sun Oct 21 08:42:24 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 21 08:42:32 2007
Subject: [Harbour] Probando ADORDD Contrib
In-Reply-To: <471b0ec1.1c365e0a.4ae1.488e@mx.google.com>
References: <471b0ec1.1c365e0a.4ae1.488e@mx.google.com>
Message-ID: <CFA47A54-FEDE-49D3-8F3B-C7098787B3EB@syenar.hu>

Hi Antonio,

Only if it makes sense and the group agrees.
That's why I'm asking :)

ADORDD is a higher layer of Win functionality
so it might not be the best to merge. But for
plain Win32 API wrappers, I think there is a point
in gathering them in one lib and I also see no
disadvantage (if the source files are granular
enough).

Brgds,
Viktor

On 2007.10.21., at 10:32, Antonio Linares wrote:

> Viktor,
>
>>
> Sorry I don't know how stable it is,
> but shouldn't we merge this lib into the
> win32 contrib lib?
>
> It needs TOLEAuto() from it anyway.
>
> Any opinions?
>>
>
> There are lots of different APIs in Win32.
>
> Do you plan to place all of them in one single lib ? :)
>
> Regards,
>
> Antonio
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From antonioharbour at gmail.com  Sun Oct 21 08:43:52 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Oct 21 08:44:44 2007
Subject: [Harbour] Probando ADORDD Contrib
In-Reply-To: <CFA47A54-FEDE-49D3-8F3B-C7098787B3EB@syenar.hu>
Message-ID: <471b1169.1f145e0a.1acd.4a15@mx.google.com>

Viktor, 

>
But for plain Win32 API wrappers, I think there is a point in gathering them
in one lib and I also see no disadvantage (if the source files are granular
enough).
>

Are we using HB_ namespace for all those funtions ? :)

Regards,

Antonio

From harbour.01 at syenar.hu  Sun Oct 21 08:56:49 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 21 08:56:57 2007
Subject: [Harbour] Probando ADORDD Contrib
In-Reply-To: <471b1169.1f145e0a.1acd.4a15@mx.google.com>
References: <471b1169.1f145e0a.1acd.4a15@mx.google.com>
Message-ID: <AE71FEEB-0071-45AB-B397-6D644FFDCE36@syenar.hu>

> Viktor,
>
>>
> But for plain Win32 API wrappers, I think there is a point in  
> gathering them
> in one lib and I also see no disadvantage (if the source files are  
> granular
> enough).
>>
>
> Are we using HB_ namespace for all those funtions ? :)

Good joke. The funny thing is there is seemingly only
a handful of ppl getting this namespace idea here :(

No, HB_ namespace if for core Harbour (not contribs).
For contribs it's up to the developers. For Win32 lib
some APIs are using win32_ prefix (some not), there is
no strict rule.

hbgtinfo.ch (GTI_*) is violating though.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Oct 21 09:02:18 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 21 09:02:15 2007
Subject: [Harbour] CHANGELOG: 2007-10-21 11:01 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c813c1$Blat.v2.6.2$15670cb0$ea4d4697d70@127.0.0.1>

2007-10-21 11:01 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * contrib/directx/w32_ddrw.cpp
     ! Fixed two -w warnings left.
--
Brgds,
Viktor

From antonioharbour at gmail.com  Sun Oct 21 09:20:26 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Oct 21 09:21:04 2007
Subject: [Harbour] Probando ADORDD Contrib
In-Reply-To: <AE71FEEB-0071-45AB-B397-6D644FFDCE36@syenar.hu>
Message-ID: <471b19fa.201f5e0a.4ebc.7c8f@mx.google.com>

Viktor, 

>
Good joke. The funny thing is there is seemingly only a handful of ppl
getting this namespace idea here :(
>

Its not a joke :), its quite important, since FWH uses a lot of Windows
functions and I can get crazy if they get mixed with Harbour ones... :S

Regards,

Antonio

From harbour.01 at syenar.hu  Sun Oct 21 09:23:53 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 21 09:23:49 2007
Subject: [Harbour] CHANGELOG: 2007-10-21 11:21 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c813c4$Blat.v2.6.2$19164cce$784906454a0@127.0.0.1>

2007-10-21 11:21 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   - contrib/directx/media
   - contrib/directx/samples
   - contrib/directx/lib
   - contrib/directx/directx.lib
   - contrib/directx/readme.1st
   + contrib/directx/readme.txt
   + contrib/directx/test
   + contrib/directx/test/testdx.prg
   + contrib/directx/test/anima2.bmp
   + contrib/directx/test/brick1.bmp
   + contrib/directx/test/black.bmp
   + contrib/directx/test/brick2.bmp
   + contrib/directx/test/shot.bmp
   + contrib/directx/test/brick3.bmp
   - contrib/directx/buvcdx.bat
   + contrib/directx/Makefile
   + contrib/directx/makefile.bc
   + contrib/directx/makefile.vc
   + contrib/directx/make_b32.bat
   + contrib/directx/make_vc.bat
   * contrib/directx/w32_ddrw.h
   * contrib/directx/w32_ddrw.cpp
     + Added build scripts
     ! Further fixes to make it compile and run.
     * Rearranged test/readme files.
     ; Now it runs but the sample .bmps seem to be corrupted.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Oct 21 09:46:21 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 21 09:46:29 2007
Subject: [Harbour] Probando ADORDD Contrib
In-Reply-To: <471b19fa.201f5e0a.4ebc.7c8f@mx.google.com>
References: <471b19fa.201f5e0a.4ebc.7c8f@mx.google.com>
Message-ID: <CB7234A6-EE02-4A8E-9955-B4153AA797C4@syenar.hu>

Aha, okey :)

I'd encourage using WIN32_ prefix for Win32 API functions
in contribs. (directx - which is actually ddraw - uses DD_)

Brgds,
Viktor

On 2007.10.21., at 11:20, Antonio Linares wrote:

> Viktor,
>
>>
> Good joke. The funny thing is there is seemingly only a handful of ppl
> getting this namespace idea here :(
>>
>
> Its not a joke :), its quite important, since FWH uses a lot of  
> Windows
> functions and I can get crazy if they get mixed with Harbour  
> ones... :S
>
> Regards,
>
> Antonio
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From gvarona at ec-red.com  Sun Oct 21 17:16:15 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Sun Oct 21 17:16:59 2007
Subject: [Harbour] Teclas de
 =?iso-8859-1?q?Funci=F3n_F7_y_F9_en_modo_DEBUG_no_funci?=
 =?iso-8859-1?q?onan?=
Message-ID: <471B895F.4070303@ec-red.com>

SPA:
Hola, algunas teclas de funci?n en el modo DEBUG como:
F7 To cursor
F9 BreakPoint
No estan funcionado, ?Esto es asi, o es que tengo algo mal?.

ENG:
Hello, some function keys in the way DEBUG:
To cursor F7
F9 BreakPoint
Not this worked, Is this so, or is that I have something wrong? .

Best Regards
GVS
From guy.roussin at teledetection.fr  Mon Oct 22 06:54:55 2007
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Mon Oct 22 06:54:59 2007
Subject: [Harbour] Harbour in Linux distros
In-Reply-To: <A533DEB9-B525-4507-8F99-CB2BF4C37D61@syenar.hu>
References: <20071021070437.2CCC236855@mafalda.teledetection.fr>
	<A533DEB9-B525-4507-8F99-CB2BF4C37D61@syenar.hu>
Message-ID: <471C493F.2050406@teledetection.fr>

Notice that Harbour can't go from sid to testing because of
"outstanding bug" (see harbour Bug Report on sid)
since 120 days ...

Guy

Szak?ts Viktor a ?crit :
> Hi Guy,
> 
> Ops, sorry for my ignorance, that's good news.
> Now I even remember installing it once 8)
> 
> It's accessible from 7.10 Gutsy too (version 0.45). Great.
> 
> Brgds,
> Viktor
> 
> On 2007.10.21., at 9:04, Guy Roussin wrote:
> 
>> Hi Viktor,
>>
>> We already have harbour for debian (in sid) and old stable (sarge):
>>
>> http://packages.debian.org/search?keywords=harbour&searchon=names&suite=all&section=all 
>>
>>
>> Guy
>>
>>
>> Szak?ts Viktor <harbour.01@syenar.hu> a ?crit :
>>
>>> Hi all,
>>>
>>> Does anyone know what do we need to do to add
>>> Harbour to the Linux distros? I'd personally find
>>> Debian/Ubuntu the most important.
>>>
>>> It would be cool if Harbour could be installed
>>> with apt-get (and similar).
>>>
>>> Brgds,
>>> Viktor
>>>
>>
From harbour.01 at syenar.hu  Mon Oct 22 12:21:08 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 22 12:21:18 2007
Subject: [Harbour] Harbour in Linux distros
In-Reply-To: <471C493F.2050406@teledetection.fr>
References: <20071021070437.2CCC236855@mafalda.teledetection.fr>
	<A533DEB9-B525-4507-8F99-CB2BF4C37D61@syenar.hu>
	<471C493F.2050406@teledetection.fr>
Message-ID: <9F6F03DB-246A-48CB-BA7B-B42B12E843B3@syenar.hu>

Here they are:
http://bugs.debian.org/cgi-bin/pkgreport.cgi?pkg=harbour;dist=unstable

Brgds,
Viktor

On 2007.10.22., at 8:54, Guy Roussin wrote:

> Notice that Harbour can't go from sid to testing because of
> "outstanding bug" (see harbour Bug Report on sid)
> since 120 days ...
>
> Guy
>
> Szak?ts Viktor a ?crit :
>> Hi Guy,
>> Ops, sorry for my ignorance, that's good news.
>> Now I even remember installing it once 8)
>> It's accessible from 7.10 Gutsy too (version 0.45). Great.
>> Brgds,
>> Viktor
>> On 2007.10.21., at 9:04, Guy Roussin wrote:
>>> Hi Viktor,
>>>
>>> We already have harbour for debian (in sid) and old stable (sarge):
>>>
>>> http://packages.debian.org/search? 
>>> keywords=harbour&searchon=names&suite=all&section=all
>>>
>>> Guy
>>>
>>>
>>> Szak?ts Viktor <harbour.01@syenar.hu> a ?crit :
>>>
>>>> Hi all,
>>>>
>>>> Does anyone know what do we need to do to add
>>>> Harbour to the Linux distros? I'd personally find
>>>> Debian/Ubuntu the most important.
>>>>
>>>> It would be cool if Harbour could be installed
>>>> with apt-get (and similar).
>>>>
>>>> Brgds,
>>>> Viktor
>>>>
>>>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From antonioharbour at gmail.com  Mon Oct 22 14:38:09 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Oct 22 14:39:07 2007
Subject: [Harbour] hb_cdxPageSeekKey 
Message-ID: <471cb5f7.0d375e0a.5337.22ea@mx.google.com>

Przemek,

Here I forward you a question from a FWH user regarding RDDs. I do
appreciate your help, thanks! :-)

>
I am trying to read and write information to a xBase++ database (RDD=FOXCDX)
application from my xHarbour/FWH application. However, I continue to receive
the following error = hb_cdxPageSeekKey - wrong parent key. What can I do to
eliminate the error. How can I change the xBase++ application to DBFCDX so
the memo fields are read properly? I tried to change the xBase++ before but
had problems with the memo fields not reading properly when using DBFCDX.
Thank you in advance for your help! 
>

Regards,

Antonio

From makis1970 at gmail.com  Mon Oct 22 17:18:31 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Mon Oct 22 17:19:07 2007
Subject: [Harbour] CHANGELOG: 2007-10-21 02:52 UTC+0100 Viktor
	Szakats	(harbour.01 syenar.hu)
In-Reply-To: <01c81384$Blat.v2.6.2$85b1bb4c$54443e9fd24@127.0.0.1>
References: <01c81384$Blat.v2.6.2$85b1bb4c$54443e9fd24@127.0.0.1>
Message-ID: <000c01c814cf$935f9600$ba1ec200$@com>

Viktor,
Thank you very much. The return value of the ft_fuse is fine now. Also
Ft_fgobot and Ft_ferror (at least exist as a function). Now if you have time
you must change the fopen function to the proper harbour open file function
and assign the error to Ft_Ferror. Also have a look at the ft_fseekalias for
the autopen in new area feauture if the current area is 0.

Thanks again 
Mike Evans

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Szakats Viktor
Sent: Sunday, October 21, 2007 4:49 AM
To: harbour@harbour-project.org
Subject: [Harbour] CHANGELOG: 2007-10-21 02:52 UTC+0100 Viktor Szakats
(harbour.01 syenar.hu)

2007-10-21 02:52 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * source/rtl/set.c
     ! Fixed SET DEVICE TO PRINTER not to add an extension (".prn") 
       to the filename specified by SET PRINTER TO (the extension 
       is only added by the SET PRINTER TO command).
     ! Fixed SET DEVICE TO PRINTER to point to "LPT1" by default 
       (instead of "PRN") under Win32 (this is now in sync with 
       ISPRINTER() logic). Added "PRN" for the rest of OSes (TOFIX).
     ; Pls test.

   * source/rtl/isprint.c
     ! Cleaned up platform branches in ISPRINTER(). Non DOS/Win32 
       branch is a dummy TODO now.

   * contrib/libnf/fttext.c
     ! Some fixes reported by Mike Evans. Pls test.
       Not all reported bugs were fixed. (ft_FError() returns 
       a constant zero, ft_FUse() still needs ft_FSelect())

   - contrib/directx/HB_DDraw.cpp
   + contrib/directx/w32_ddrw.cpp
   - contrib/directx/HB_DDraw.h
   + contrib/directx/w32_ddrw.h
   * contrib/directx/readme.1st
     ! Harbour API updates to this severly outdated code.
     ! Fixed warnings.
     + Added SVN headers.
--
Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From dbtopas at dbtopas.lt  Mon Oct 22 17:53:57 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Oct 22 17:54:36 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <20071018091429.GB10129@localhost.localdomain>
References: <20071011211921.GA4812@localhost.localdomain>	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>	<20071012064340.GB6863@localhost.localdomain>	<470FBE90.6020708@dbtopas.lt>	<20071012200051.GB10596@localhost.localdomain>	<47139360.3040406@dbtopas.lt>
	<20071018091429.GB10129@localhost.localdomain>
Message-ID: <471CE3B5.1060001@dbtopas.lt>

Przemyslaw Czerpak wrote:
>> I was thinking this also. In this case variable nI is not on item stack. 
>> It could be a drawback if we want to get debug stack values on debugger 
>> or write all local variable values to .log file on runtime error.
>> Accessing these locals from codeblocks, detaching are also impossible.
> 
> Exactly and just like people needs strong typing for compile time
> errors/warning I'd like to have compile time errors/warnings when
> my code will try to detach or pass by reference local variables
> declared as strongly optimized. 

OK, if it is intentional and documented. I just had an idea, that type 
specification is also valid for function locals that could be used in 
codeblocks, etc.


  >> We need some method to bind allocated stack items to C "items". Maybe
>>    hb_strongRegisterLocal( &nI, HB_STRONG_INTEGER, 2 /* local no */ );
>> could store some reference to C items, on item stack.
> 
> It may cost more then the performance improvement and we will return
> to the problem with using C stack HB_ITEMs.
> I lost a lot of time to eliminate all C stack HB_ITEM variables from
> [x]Harbour code. In xHarbour I haven't finished this job. Only few core
> developers understands GC details but rest of us in most cases created
> wrong code..........

I understand very well that you mean by saying "C stack HB_ITEMs". The 
problem is that these item are not visible for GC. I'm talking about 
completely different thing. hb_strongRegisterLocal() should register 
local in item stack, and it should become item visible for GC. I had 
also the idea, that current extended reference implementation could be 
used to store references of strong typed variables.

But all this is for the purpose of having "standard" stack frame, i.e. 
stack frame that contains all parameters/locals. If we do not need to 
access typed locals from codeclocks and do not need to see it in 
debuger, we perhaps do not need stack frame to be "standard".


>>> Exactly. Now it will be nightmare  ... 
>>> will be much
>>> much easier to do when we will operate on HB_EXPR structures then
>>> on PCODEs. PCODE should be generate in backend not online in core
>>> compiler code. And this will be changed. Step by step in spare time
>>> by me, by you and I hope other developers. I would like to join this
>>> modification in rewriting grammar rules (there are things which
>>> need serious cleanup with HB_EXPR type updating but beta stage
>>> is not good moment for it) 
>> I would be happy to help rewrite the rules, if my knowledge will be 
>> enough to do this job, but you should start the job or write some 
>> template/sample. Could it be a step by step job, or we should rewrite 
>> rules from the zero?
> 
> The modifications can be done in smaller peaces but will have to be
> synchronized with helper hb_compExpr*() functions. I would like to
> eliminate all global variables in HB_COMP structure used to pass
> information about grammar rules context and if possible also rules
> which are context dependent.

If I understand the point, we must create the expression tree on 
hb_compparse(). The optimisation and PCODE (or other code) generation 
should be done by additional steps. So, parsing of code is OK for 
IfInline, but we must remove PCode generation for many nonterminal 
symbols (ex., hb_compExprGenStatement() should be changed by 
hb_compExprNewStatement() to store statement expression in a list, but 
not to generate PCODE).
It is not clear for me how it can be done in step-by-step way, because 
some nonterminals will try to generate PCode on parsing stage, and some 
will just store expression in a tree. I guess your sample will be 
required for me and for other developers.
Of cause, I understand what it's only one of the jobs in the queue, and 
we should set the right priority for it. Maybe multitasking or other 
modification is more important.


Best regards,
Mindaugas

From druzus at acn.waw.pl  Mon Oct 22 19:04:35 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 22 19:04:42 2007
Subject: [Harbour] 2007-10-22 21:04 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710221904.l9MJ4ZS1020068@31-mo5-4.acn.waw.pl>

2007-10-22 21:04 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/wacore.c
  * harbour/source/rdd/dbcmd.c
    ! fixed registering workareas with numbers from 65280 to 65534

best regards
Przemek
From cvc at oohg.org  Mon Oct 22 19:17:28 2007
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Mon Oct 22 19:17:50 2007
Subject: [Harbour] Problem with GT_WIN
Message-ID: <471CF748.8080100@oohg.org>

Hi all:

I build harbour from sources, and I did set #define HARBOUR_MAIN_WIN

when I compile and not set debug mode, getsys.prg now request GT_GUI and GT_WIN, 
before only request GT_GUI.

I use actual Harbour CVS, Windows XP, Borland BCC55

regards
Ciro


-- 
http://sistemascvc.tripod.com  (la casa del no2imp / the no2imp home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From druzus at acn.waw.pl  Mon Oct 22 19:21:39 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 22 19:22:04 2007
Subject: [Harbour] Harbour in Linux distros
In-Reply-To: <9F6F03DB-246A-48CB-BA7B-B42B12E843B3@syenar.hu>
References: <20071021070437.2CCC236855@mafalda.teledetection.fr>
	<A533DEB9-B525-4507-8F99-CB2BF4C37D61@syenar.hu>
	<471C493F.2050406@teledetection.fr>
	<9F6F03DB-246A-48CB-BA7B-B42B12E843B3@syenar.hu>
Message-ID: <20071022192139.GA12229@localhost.localdomain>

On Mon, 22 Oct 2007, Szak?ts Viktor wrote:
> Here they are:
> http://bugs.debian.org/cgi-bin/pkgreport.cgi?pkg=harbour;dist=unstable

1. Serious (policy violations or makes package unfit
   for release); Unclassified (1 bug)

  It's a false alarm - at least in current version - long double is used
  only locally without any references to external data

2. It's a request to remove libgpmg1-dev dependences for non Linux based
   platforms - it's reasonable and should be done so I'd like to ask some
   debian/ubuntu users to make proposed modification in debian/control
   file.

3. Problems with amd64 ports - resolved long time ago when I finished
   support for 32/64 bit little/big endian, strict/free alignment
   architectures


best regards,
Przemek
From druzus at acn.waw.pl  Mon Oct 22 19:25:23 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 22 19:25:29 2007
Subject: [Harbour] Error in latest CVS
In-Reply-To: <01ae01c81339$d08eeb30$ca64fea9@emag>
References: <01ae01c81339$d08eeb30$ca64fea9@emag>
Message-ID: <20071022192523.GB12229@localhost.localdomain>

On Sat, 20 Oct 2007, Enrico Maria Giordano wrote:
> Probably I'm missing something but I get the following error using 
> gtgui.lib:
> Error: Unresolved external '_HB_FUN_HB_GT_WIN' referenced from 
> E:\HARBOUR\LIB\RTL.LIB|gtsys

GTGUI does not longer have HB_GT_WIN symbol so it can be part of
harbour.dll - If you do not want to use default build GT driver
then you will have to add to your source code:
    ANNOUNCE HB_GTSYS

best regards,
Przemek
From druzus at acn.waw.pl  Mon Oct 22 19:26:59 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 22 19:27:07 2007
Subject: [Harbour] 2007-10-19
	16:16UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <9257026e0710201140j6977702ene1d3a77901d4a103@mail.gmail.com>
References: <200710191416.l9JEGbku009168@31-mo5-4.acn.waw.pl>
	<000201c8129e$1cb0f130$b400a8c0@ASUSFSG>
	<000f01c812a1$68a186b0$b400a8c0@ASUSFSG>
	<AFB948164110ED43B5EB849E8DEEF03809AAE1@SRV02.deltain.net>
	<000501c812ff$349fd6b0$b400a8c0@ASUSFSG>
	<9257026e0710200924y16b2ab7ci432d033d4eaa0b94@mail.gmail.com>
	<7135A627-637B-4967-9069-DFDF23C7677A@syenar.hu>
	<9257026e0710201140j6977702ene1d3a77901d4a103@mail.gmail.com>
Message-ID: <20071022192659.GC12229@localhost.localdomain>

On Sat, 20 Oct 2007, Lorenzo Fiorini wrote:
> On 10/20/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
> > And also my Win32 Harbour app runs perfectly with
> > Wine, aside from a codepage problem which I have yet
> > to sort out (maybe hb_gtInfo( GTI_CODEPAGE, ... )
> > is needed?).
> I also have a meesage regarding codepage 255 in Wine.
> To "fix" the problem I've removed all the chars > 127 from all my apps
> and my messages since f.e pocketputty don't manage UTF8 and in GTWVT
> I've replaced OEM_CHARSET with DEFAULT_CHARSET ( not sure if it is
> correct ).
> I still have some few "problems" with gtwvt like inkey( 1 ) that need
> a key press to continue or that I can't get more than 102 cols but
> they are minor ones.

If you do not need WIN95 support then you can simply compile GTWVT
with UNICODE support and in such case you will have all box characters.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Oct 22 19:30:30 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 22 19:30:55 2007
Subject: [Harbour] Problem with GT_WIN
In-Reply-To: <471CF748.8080100@oohg.org>
References: <471CF748.8080100@oohg.org>
Message-ID: <20071022193030.GD12229@localhost.localdomain>

On Mon, 22 Oct 2007, Ciro Vargas Clemow wrote:
> Hi all:
> I build harbour from sources, and I did set #define HARBOUR_MAIN_WIN
> when I compile and not set debug mode, getsys.prg now request GT_GUI and 
> GT_WIN, before only request GT_GUI.

No. It was requesting GTWIN but GTGUI had HB_GT_WIN symbol.

> I use actual Harbour CVS, Windows XP, Borland BCC55

    ANNOUNCE HB_GTSYS
    REQUEST HB_GT_GUI

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Mon Oct 22 19:52:25 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Oct 22 19:52:29 2007
Subject: [Harbour] 2007-10-19
	16:16UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20071022192659.GC12229@localhost.localdomain>
References: <200710191416.l9JEGbku009168@31-mo5-4.acn.waw.pl>
	<000201c8129e$1cb0f130$b400a8c0@ASUSFSG>
	<000f01c812a1$68a186b0$b400a8c0@ASUSFSG>
	<AFB948164110ED43B5EB849E8DEEF03809AAE1@SRV02.deltain.net>
	<000501c812ff$349fd6b0$b400a8c0@ASUSFSG>
	<9257026e0710200924y16b2ab7ci432d033d4eaa0b94@mail.gmail.com>
	<7135A627-637B-4967-9069-DFDF23C7677A@syenar.hu>
	<9257026e0710201140j6977702ene1d3a77901d4a103@mail.gmail.com>
	<20071022192659.GC12229@localhost.localdomain>
Message-ID: <9257026e0710221252w68409727i5e9032223889b6a3@mail.gmail.com>

On 10/22/07, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> If you do not need WIN95 support then you can simply compile GTWVT
> with UNICODE support and in such case you will have all box characters.

Thanks for the info, but I can't  get pockeputty and gttrm working
with UTF8 and however I've found that box chars give to the apps an
"old DOS taste". Unfortunately with 16 colors it's not so easy to
create fancy UI but at least they have a "personal look"  :)

best regards,
Lorenzo
From e.m.giordano at emagsoftware.it  Mon Oct 22 20:02:04 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Oct 22 20:02:20 2007
Subject: [Harbour] Error in latest CVS
References: <01ae01c81339$d08eeb30$ca64fea9@emag>
	<20071022192523.GB12229@localhost.localdomain>
Message-ID: <020001c814e6$6adea970$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: lunedi 22 ottobre 2007 21.25
Oggetto: Re: [Harbour] Error in latest CVS


> GTGUI does not longer have HB_GT_WIN symbol so it can be part of
> harbour.dll - If you do not want to use default build GT driver
> then you will have to add to your source code:
>    ANNOUNCE HB_GTSYS

Ok. Then I get a (FWH) program that simply does nothing. No errors but it 
does nothing.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From cvc at oohg.org  Mon Oct 22 20:02:27 2007
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Mon Oct 22 20:02:43 2007
Subject: [Harbour] Problem with GT_WIN
In-Reply-To: <20071022193030.GD12229@localhost.localdomain>
References: <471CF748.8080100@oohg.org>
	<20071022193030.GD12229@localhost.localdomain>
Message-ID: <471D01D3.4060008@oohg.org>

Przemyslaw Czerpak escribi?:
>
> 
>     ANNOUNCE HB_GTSYS
>     REQUEST HB_GT_GUI

Ok thanks
Ciro




-- 
http://sistemascvc.tripod.com  (la casa del no2imp / the no2imp home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From harbour.01 at syenar.hu  Mon Oct 22 20:32:09 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 22 20:33:42 2007
Subject: [Harbour] 2007-10-19
	16:16UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20071022192659.GC12229@localhost.localdomain>
References: <200710191416.l9JEGbku009168@31-mo5-4.acn.waw.pl>
	<000201c8129e$1cb0f130$b400a8c0@ASUSFSG>
	<000f01c812a1$68a186b0$b400a8c0@ASUSFSG>
	<AFB948164110ED43B5EB849E8DEEF03809AAE1@SRV02.deltain.net>
	<000501c812ff$349fd6b0$b400a8c0@ASUSFSG>
	<9257026e0710200924y16b2ab7ci432d033d4eaa0b94@mail.gmail.com>
	<7135A627-637B-4967-9069-DFDF23C7677A@syenar.hu>
	<9257026e0710201140j6977702ene1d3a77901d4a103@mail.gmail.com>
	<20071022192659.GC12229@localhost.localdomain>
Message-ID: <258EFDA5-588C-4A60-805E-DB49E7B1B891@syenar.hu>

Hi,

I have tried a full BCC55 build with UNICODE enabled and I got this:

source\vm\mainwin.c:
Error E2356 source\vm\mainwin.c 80: Type mismatch in redeclaration of  
'WinMain'
Error E2344 C:\devl\BCC55\include\winbase.h 1267: Earlier declaration  
of 'WinMain'
*** 2 errors in Compile ***

(the full command for the record:
bcc32.exe -c -q -DHB_GT_LIB=win -O2 -Iinclude - 
DHB_INCLUDE_WINEXCHANDLER -DHB_STACK_MACROS -DHB_FAST_STOD -DUNICODE  
-6 -OS -Ov -Oi -Oc -d -Q -q -tWM -w -w-sig-  -Iobj\b32  -oobj\b32 
\mainwin.obj source\vm\mainwin.c)

Brgds,
Viktor

On 2007.10.22., at 21:26, Przemyslaw Czerpak wrote:

> On Sat, 20 Oct 2007, Lorenzo Fiorini wrote:
>> On 10/20/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
>>> And also my Win32 Harbour app runs perfectly with
>>> Wine, aside from a codepage problem which I have yet
>>> to sort out (maybe hb_gtInfo( GTI_CODEPAGE, ... )
>>> is needed?).
>> I also have a meesage regarding codepage 255 in Wine.
>> To "fix" the problem I've removed all the chars > 127 from all my  
>> apps
>> and my messages since f.e pocketputty don't manage UTF8 and in GTWVT
>> I've replaced OEM_CHARSET with DEFAULT_CHARSET ( not sure if it is
>> correct ).
>> I still have some few "problems" with gtwvt like inkey( 1 ) that need
>> a key press to continue or that I can't get more than 102 cols but
>> they are minor ones.
>
> If you do not need WIN95 support then you can simply compile GTWVT
> with UNICODE support and in such case you will have all box  
> characters.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Oct 22 20:53:04 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 22 20:53:16 2007
Subject: [Harbour] Harbour in Linux distros
In-Reply-To: <20071022192139.GA12229@localhost.localdomain>
References: <20071021070437.2CCC236855@mafalda.teledetection.fr>
	<A533DEB9-B525-4507-8F99-CB2BF4C37D61@syenar.hu>
	<471C493F.2050406@teledetection.fr>
	<9F6F03DB-246A-48CB-BA7B-B42B12E843B3@syenar.hu>
	<20071022192139.GA12229@localhost.localdomain>
Message-ID: <E238193D-8E06-46F3-A7A1-A1C3E17E971B@syenar.hu>

Thanks for these info Przemek.

On 2007.10.22., at 21:21, Przemyslaw Czerpak wrote:

> On Mon, 22 Oct 2007, Szak?ts Viktor wrote:
>> Here they are:
>> http://bugs.debian.org/cgi-bin/pkgreport.cgi? 
>> pkg=harbour;dist=unstable
>
> 1. Serious (policy violations or makes package unfit
>    for release); Unclassified (1 bug)
>
>   It's a false alarm - at least in current version - long double is  
> used
>   only locally without any references to external data
>
> 2. It's a request to remove libgpmg1-dev dependences for non Linux  
> based
>    platforms - it's reasonable and should be done so I'd like to  
> ask some
>    debian/ubuntu users to make proposed modification in debian/control
>    file.

I wish I could say I'll do this, but I've spent
just a few hours under Ubuntu altogether, so I have no
idea what to do. I understand this lib has to do
something with mouse support. I also see an option
in harbour.spec to leave this file out (--without gpm),
but I see it hard-wired in debian/control.

>
> 3. Problems with amd64 ports - resolved long time ago when I finished
>    support for 32/64 bit little/big endian, strict/free alignment
>    architectures

Brgds,
Viktor



From cvc at oohg.org  Mon Oct 22 23:32:56 2007
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Mon Oct 22 23:33:16 2007
Subject: [Harbour] Error in latest CVS
In-Reply-To: <020001c814e6$6adea970$ca64fea9@emag>
References: <01ae01c81339$d08eeb30$ca64fea9@emag>	<20071022192523.GB12229@localhost.localdomain>
	<020001c814e6$6adea970$ca64fea9@emag>
Message-ID: <471D3328.2080605@oohg.org>

Enrico Maria Giordano escribi?:

> Ok. Then I get a (FWH) program that simply does nothing. No errors but 
> it does nothing.


I obtain the same with ooHG.

regards
Ciro

-- 
http://sistemascvc.tripod.com  (la casa del no2imp / the no2imp home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From druzus at acn.waw.pl  Tue Oct 23 00:20:54 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 23 00:20:59 2007
Subject: [Harbour] Harbour in Linux distros
In-Reply-To: <E238193D-8E06-46F3-A7A1-A1C3E17E971B@syenar.hu>
References: <20071021070437.2CCC236855@mafalda.teledetection.fr>
	<A533DEB9-B525-4507-8F99-CB2BF4C37D61@syenar.hu>
	<471C493F.2050406@teledetection.fr>
	<9F6F03DB-246A-48CB-BA7B-B42B12E843B3@syenar.hu>
	<20071022192139.GA12229@localhost.localdomain>
	<E238193D-8E06-46F3-A7A1-A1C3E17E971B@syenar.hu>
Message-ID: <20071023002054.GA14094@localhost.localdomain>

On Mon, 22 Oct 2007, Szak?ts Viktor wrote:
> >2. It's a request to remove libgpmg1-dev dependences for non Linux based
> >   platforms - it's reasonable and should be done so I'd like to ask some
> >   debian/ubuntu users to make proposed modification in debian/control
> >   file.
> I wish I could say I'll do this, but I've spent
> just a few hours under Ubuntu altogether, so I have no
> idea what to do.

Just make what Peter asked in his post:
,---------------------------------------------------------------------------
| Hi,
| the current version of harbour has unsatisfied Build-Depends on libgpmg1-dev
| under non-linux ports.
| This package builds fine on GNU/kFreeBSD without libgpmg1-dev installed.
| Please, could you exclude linux specific package in Build-Depends
| by using "libgpmg1-dev [!kfreebsd-i386 !kfreebsd-amd64 !hurd-i386]".
| Thanks for your cooperation.
|                                 Petr
`---------------------------------------------------------------------------
Build-Depends tag is in debian/control file - change it as suggested above
and check if you can still create DEB packages in your distribution.

> I understand this lib has to do something with mouse support.

Yes. It gives mouse support on pure linux console (when you work
locally) in GTSRS, GTSLN and GTTRM.

> I also see an option in harbour.spec to leave this file out
> (--without gpm), but I see it hard-wired in debian/control.

It allows to create RPM packages without GPM support in above GTs.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Oct 23 00:25:02 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 23 00:25:07 2007
Subject: [Harbour] 2007-10-23 02:24 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710230025.l9N0P2Zs024920@31-mo5-4.acn.waw.pl>

2007-10-23 02:24 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/common.mak
  * harbour/source/vm/mainwin.c
  * harbour/source/common/hbwince.c
    ! fixed compilation with Unicode support and standard MS-Windows

best regards
Przemek
From druzus at acn.waw.pl  Tue Oct 23 02:05:22 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 23 02:05:32 2007
Subject: [Harbour] 2007-10-23 04:03 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710230205.l9N25MdE019605@31-mo5-4.acn.waw.pl>

2007-10-23 04:03 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbwince.h
  * harbour/source/common/hbwince.c
  * harbour/source/rtl/gtwin/gtwin.c
  * harbour/contrib/win32/tprinter.c
  * harbour/contrib/win32/w32_prn.c
    * updated for compilation with UNICODE support

best regards
Przemek
From druzus at acn.waw.pl  Tue Oct 23 08:12:58 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 23 08:13:04 2007
Subject: [Harbour] 2007-10-23 10:12 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710230812.l9N8CwAC002210@31-mo5-4.acn.waw.pl>

2007-10-23 10:12 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/win32/tprinter.c
    * casting

best regards
Przemek
From druzus at acn.waw.pl  Tue Oct 23 08:22:18 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 23 08:22:23 2007
Subject: [Harbour] 2007-10-23 10:22 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710230822.l9N8MIMW005360@31-mo5-4.acn.waw.pl>

2007-10-23 10:22 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/diskspac.c
    ! added missing ; in DOS builds

best regards
Przemek
From harbour.01 at syenar.hu  Tue Oct 23 11:32:29 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 23 11:32:33 2007
Subject: [Harbour] CHANGELOG: 2007-10-23 13:30 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c81568$Blat.v2.6.2$652232c2$11e87d4fdec4@127.0.0.1>

2007-10-23 13:30 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * contrib/directx/w32_ddrw.cpp
   * contrib/directx/w32_ddrw.h
     ! Cleanup, formatting.
     ! Tabs converted to spaces.

   * contrib/libnf/aading.prg
   * contrib/libnf/aavg.prg
   * contrib/libnf/acctadj.prg
   * contrib/libnf/acctmnth.prg
   * contrib/libnf/acctqtr.prg
   * contrib/libnf/acctweek.prg
   * contrib/libnf/acctyear.prg
   * contrib/libnf/adessort.prg
   * contrib/libnf/aemaxlen.prg
   * contrib/libnf/aeminlen.prg
   * contrib/libnf/amedian.prg
   * contrib/libnf/anomatch.prg
   * contrib/libnf/any2any.prg
   * contrib/libnf/aredit.prg
   * contrib/libnf/asum.prg
   * contrib/libnf/at2.prg
   * contrib/libnf/bitclr.prg
   * contrib/libnf/bitset.prg
   * contrib/libnf/blink.prg
   * contrib/libnf/byt2bit.prg
   * contrib/libnf/byt2hex.prg
   * contrib/libnf/byteand.prg
   * contrib/libnf/byteneg.prg
   * contrib/libnf/bytenot.prg
   * contrib/libnf/byteor.prg
   * contrib/libnf/bytexor.prg
   * contrib/libnf/calendar.prg
   * contrib/libnf/clrsel.prg
   * contrib/libnf/cntryset.prg
   * contrib/libnf/d2e.prg
   * contrib/libnf/datecnfg.prg
   * contrib/libnf/dayofyr.prg
   * contrib/libnf/daytobow.prg
   * contrib/libnf/dectobin.prg
   * contrib/libnf/descend.c
   * contrib/libnf/dfile.prg
   * contrib/libnf/dhkey.h
   * contrib/libnf/diskfunc.prg
   * contrib/libnf/dispmsg.prg
   * contrib/libnf/dosver.prg
   * contrib/libnf/e2d.prg
   * contrib/libnf/easter.prg
   * contrib/libnf/elapmil.prg
   * contrib/libnf/elapsed.prg
   * contrib/libnf/eltime.prg
   * contrib/libnf/findith.prg
   * contrib/libnf/firstday.prg
   * contrib/libnf/floptst.prg
   * contrib/libnf/ftattr.c
   * contrib/libnf/ftint86.ch
   * contrib/libnf/ftmenuto.ch
   * contrib/libnf/fttext.c
   * contrib/libnf/gcd.prg
   * contrib/libnf/getenvrn.c
   * contrib/libnf/getver.c
   * contrib/libnf/getvid.c
   * contrib/libnf/hex2dec.prg
   * contrib/libnf/idle.c
   * contrib/libnf/invclr.prg
   * contrib/libnf/isbit.prg
   * contrib/libnf/isbiton.prg
   * contrib/libnf/isshare.prg
   * contrib/libnf/kspeed.c
   * contrib/libnf/lastday.prg
   * contrib/libnf/linked.prg
   * contrib/libnf/madd.prg
   * contrib/libnf/menu1.prg
   * contrib/libnf/menuto.prg
   * contrib/libnf/metaph.prg
   * contrib/libnf/miltime.prg
   * contrib/libnf/min2dhm.prg
   * contrib/libnf/month.prg
   * contrib/libnf/mouse.c
   * contrib/libnf/mouse1.prg
   * contrib/libnf/mouse2.prg
   * contrib/libnf/netpv.prg
   * contrib/libnf/nooccur.prg
   * contrib/libnf/ntow.prg
   * contrib/libnf/nwlstat.prg
   * contrib/libnf/nwsem.prg
   * contrib/libnf/nwuid.prg
   * contrib/libnf/ontick.c
   * contrib/libnf/origin.c
   * contrib/libnf/page.prg
   * contrib/libnf/pchr.prg
   * contrib/libnf/peek.c
   * contrib/libnf/pegs.prg
   * contrib/libnf/pending.prg
   * contrib/libnf/pickday.prg
   * contrib/libnf/poke.c
   * contrib/libnf/popadder.prg
   * contrib/libnf/prtesc.prg
   * contrib/libnf/prtscr.c
   * contrib/libnf/pvid.prg
   * contrib/libnf/qtr.prg
   * contrib/libnf/rand1.prg
   * contrib/libnf/readme.txt
   * contrib/libnf/restsets.prg
   * contrib/libnf/round.prg
   * contrib/libnf/savearr.prg
   * contrib/libnf/savesets.prg
   * contrib/libnf/scancode.prg
   * contrib/libnf/scregion.prg
   * contrib/libnf/setdate.prg
   * contrib/libnf/settime.prg
   * contrib/libnf/sinkey.prg
   * contrib/libnf/sleep.prg
   * contrib/libnf/sqzn.prg
   * contrib/libnf/sysmem.prg
   * contrib/libnf/tbwhile.prg
   * contrib/libnf/test.prg
   * contrib/libnf/vertmenu.prg
   * contrib/libnf/vidcur.prg
   * contrib/libnf/vidmode.prg
   * contrib/libnf/wda.prg
   * contrib/libnf/week.prg
   * contrib/libnf/workdays.prg
   * contrib/libnf/woy.prg
   * contrib/libnf/xbox.prg
   * contrib/libnf/year.prg
   - contrib/libnf/idle.c
   + contrib/libnf/ftidle.c
   + contrib/libnf/iamidle.c
   * contrib/libnf/Makefile
   * contrib/libnf/makefile.bc
   * contrib/libnf/makefile.vc
     + Added svn headers.
     ! Fixed FT_IDLE()
     ! Renamed idle.c to not clash with core idle.obj.
     ! FT_F*() functions fully ported from original NFLIB.
       Pls test.
     * Some minor cleanups, formatting.

   * include/filesys.api
     ! _fsRead(), _fsWrite() now more compatible.

   * include/hbundoc.api
     + Added _lcopy(), _ncopyuc(), _ncopylc() compatibility 
       functions.

   * include/hbapi.h
   * source/common/hbstr.c
     + Added hb_strncpyLower()
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Oct 23 11:51:18 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 23 11:51:22 2007
Subject: [Harbour] CHANGELOG: 2007-10-23 13:50 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c8156b$Blat.v2.6.2$05dd7986$1748fa369430@127.0.0.1>

2007-10-23 13:50 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   + contrib/libnf/ftisprn.c
   + contrib/libnf/setkeys.c
   + contrib/libnf/setlastk.c
   * contrib/libnf/Makefile
   * contrib/libnf/makefile.bc
   * contrib/libnf/makefile.vc
   * contrib/libnf/readme.txt
     + Added FT_SETKEYS(), FT_ISPRINTER() (not 100% compatible 
       in all situations), FT_LASTKEY().
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Oct 23 11:59:14 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 23 11:59:25 2007
Subject: [Harbour] CHANGELOG: 2007-10-21 02:52 UTC+0100 Viktor
	Szakats	(harbour.01 syenar.hu)
In-Reply-To: <000c01c814cf$935f9600$ba1ec200$@com>
References: <01c81384$Blat.v2.6.2$85b1bb4c$54443e9fd24@127.0.0.1>
	<000c01c814cf$935f9600$ba1ec200$@com>
Message-ID: <59834006-81BD-4E69-83E9-DA6FCAA729C1@syenar.hu>

Hi Mike,

Thanks for the feedback.

Pls retest the whole set of FT_F*() functions,
as I've ported them to Harbour from the original
NFLIB source. I had to redo two ASM functions in
C (findeol() and findbol()). Former is used
everywhere, latter in FT_FSKIP(-x). Basic tests
showed they are okey, but some more testing could
help here.

Brgds,
Viktor

On 2007.10.22., at 19:18, Mike Evans ((Gmail)) wrote:

> Viktor,
> Thank you very much. The return value of the ft_fuse is fine now. Also
> Ft_fgobot and Ft_ferror (at least exist as a function). Now if you  
> have time
> you must change the fopen function to the proper harbour open file  
> function
> and assign the error to Ft_Ferror. Also have a look at the  
> ft_fseekalias for
> the autopen in new area feauture if the current area is 0.
>
> Thanks again
> Mike Evans
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org
> [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szakats  
> Viktor
> Sent: Sunday, October 21, 2007 4:49 AM
> To: harbour@harbour-project.org
> Subject: [Harbour] CHANGELOG: 2007-10-21 02:52 UTC+0100 Viktor Szakats
> (harbour.01 syenar.hu)
>
> 2007-10-21 02:52 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>    * source/rtl/set.c
>      ! Fixed SET DEVICE TO PRINTER not to add an extension (".prn")
>        to the filename specified by SET PRINTER TO (the extension
>        is only added by the SET PRINTER TO command).
>      ! Fixed SET DEVICE TO PRINTER to point to "LPT1" by default
>        (instead of "PRN") under Win32 (this is now in sync with
>        ISPRINTER() logic). Added "PRN" for the rest of OSes (TOFIX).
>      ; Pls test.
>
>    * source/rtl/isprint.c
>      ! Cleaned up platform branches in ISPRINTER(). Non DOS/Win32
>        branch is a dummy TODO now.
>
>    * contrib/libnf/fttext.c
>      ! Some fixes reported by Mike Evans. Pls test.
>        Not all reported bugs were fixed. (ft_FError() returns
>        a constant zero, ft_FUse() still needs ft_FSelect())
>
>    - contrib/directx/HB_DDraw.cpp
>    + contrib/directx/w32_ddrw.cpp
>    - contrib/directx/HB_DDraw.h
>    + contrib/directx/w32_ddrw.h
>    * contrib/directx/readme.1st
>      ! Harbour API updates to this severly outdated code.
>      ! Fixed warnings.
>      + Added SVN headers.
> --
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>

From harbour.01 at syenar.hu  Tue Oct 23 14:42:43 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 23 14:42:52 2007
Subject: [Harbour] CHANGELOG: 2007-10-23 16:39 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c81582$Blat.v2.6.2$f8508a3e$14103e85709c@127.0.0.1>

2007-10-23 16:39 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * contrib/libnf/fttext.c
     ! Fixed opening mode in FT_FUSE().
     ! Fixed FT_FAPPEND() infinite loop when called without 
       parameter or with an odd number. (bug in original function)
     + Added support for plain LF line ending.
     * Changed to use OS dependant line ending instead of hardwired 
       CRLF when adding new lines.
     ; Please test.
--
Brgds,
Viktor

From miguelangel at marchuet.net  Tue Oct 23 14:43:03 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Tue Oct 23 14:50:23 2007
Subject: [Harbour] Information about _NullFlags field
Message-ID: <471E0877.6040002@marchuet.net>

You may be interested to know how VFP 9 implements these new data types in a table. The DBF structure doesn?t allow for variable 
length fields, so Varchar and Varbinary fields actually are padded with spaces in the DBF file. Therefore, Microsoft had to come 
up with a mechanism to track the length of the contents for Varchar and Varbinary fields so the proper trimmed value can be 
returned when requested. Here?s how it works:

?         All versions of VFP add a hidden field called _NullFlags to a DBF if any of the fields can accept null values. This 
field contains bit values that indicate whether a particular field in a given record contains a null. For example, if the first 
nullable field in a record contains null, bit 0 is set to 1. If the second nullable field contains a non-null value, bit 1 is 0. 
Because there are eight bits in a byte, _NullFlags has a width of the number of nullable fields divided by 8.

?         In VFP 9, _NullFlags serves double-duty: bits also indicate whether the values in Varchar and Varbinary fields fill 
the fields. If a bit contains 0, the length of the value in a field equals the field size (the field is full). If the bit 
contains 1, the length of the value is less than the field size, in which case the field is padded with spaces as necessary and 
the last byte contains the field size. For example, a 10-byte Varchar field containing ?AB? actually contains ?AB? followed by 
seven spaces and CHR(2) (2 represents the size of the value) and the bit for the field in _NullsFlags is 1.

?         If a field is both nullable and Varchar or Varbinary, two bits are used to represent a field. The lower bit represents 
the ?full? status and the higher bit represents the null status. For example, a nullable 10-byte Varchar field containing ?AB? 
is represented by 01 in _NullFlags (0 means not null, 1 means not full-size) while a null value in the same field is represented 
by 11 (null and not full-size).

Here?s an example that shows the various values of _NullFlags for nullable Character (Field3), non-nullable Varchar (Field2), 
and nullable Varchar fields (Field4). Bit 0 represents the ?full? status for Field2, bit 1 contains the null status for Field3, 
bit 2 contains the ?full? status for Field4, and bit 3 contains the null status for Field4. This example uses the HexEdit 
utility that comes with VFP to show the binary contents of the DBF file. Scroll to address 000001C0 to see the contents of the 
seven records in the table.

create table TestVarchar (Field1 C(1), Field2 V(1), Field3 C(1) null, ;

   Field4 V(1) null)

insert into TestVarchar values ('A', 'A', 'A', 'A')

   && Record 20 41 41 41 41, _NullFlags 00000000 = 00

insert into TestVarchar values ('A', '', 'A', 'A')

   && Record 20 41 00 41 41, _NullFlags 00000001 = 01

insert into TestVarchar values ('A', 'A', 'A', '')

   && Record 20 41 41 41 00, _NullFlags 00000100 = 04

insert into TestVarchar values ('A', 'A', .NULL., 'A')

   && Record 20 41 41 20 41, _NullFlags 00000010 = 02

insert into TestVarchar values ('A', 'A', 'A', .NULL.)

   && Record 20 41 41 41 00, _NullFlags 00001100 = 0C

insert into TestVarchar values ('A', 'A', .NULL., .NULL.)

   && Record 20 41 41 20 00, _NullFlags 00001110 = 0E

insert into TestVarchar values ('A', '', .NULL., .NULL.)

   && Record 20 41 00 20 00, _NullFlags 00001111 = 0F

use

do home() + 'Tools\HexEdit\HexEdit' with 'TestVarchar.dbf'

(In the comments in the code, the initial 20 in the record, a space character, indicates the record is not deleted. 41 is the 
letter ?A,? 00 indicates the length of the value in a Varchar field is 0 bytes because the field is either empty or null, and 20 
in a Character field is a space, indicating the field is empty or null.)


Best regards,
Miguel Angel Marchuet
From druzus at acn.waw.pl  Tue Oct 23 18:28:21 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 23 18:28:28 2007
Subject: [Harbour] 2007-10-23 20:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710231828.l9NISLMn026405@31-mo5-4.acn.waw.pl>

2007-10-23 20:27 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  + harbour/doc/howtobld.txt
    + added hb* scripts description

  * harbour/Makefile
  * harbour/source/Makefile
  + harbour/harbour-ce-spec
  * harbour/bin/pack_src.sh
  + harbour/make_rpmce.sh
    + added script to build RPMs with cross build of Harbour for PocketPC
      make_rpmce.sh should create harbour-ce-1.1.1-0.i386.rpm which
      can be installed with other harbour RPMs
      It contains Harbour libraries compiled for WinCE/PocketPC and
      set of hbce* scripts which should be used instead of standard hb*
      ones to create PocketPC binaries. It means that you can create
      standard Linux binaries and PocketPC binaries in the same session
      without setting/changing any additional environment varibales, f.e:
         hbmk -n -w -es2 test.prg
      will create linux binaries and:
         hbcemk -n -w -es2 test.prg
      will create binaries for WinCE/PocketPC

best regards
Przemek
From druzus at acn.waw.pl  Tue Oct 23 19:01:08 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 23 19:01:15 2007
Subject: [Harbour] 2007-10-23 21:01 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710231901.l9NJ18gQ009005@31-mo5-4.acn.waw.pl>

2007-10-23 21:01 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/libnf/fttext.c
    ! added missing type declaration in _ins_buff() and _del_buff()

best regards
Przemek
From myorg63 at mail.ru  Tue Oct 23 20:00:37 2007
From: myorg63 at mail.ru (Petr Chornyj)
Date: Tue Oct 23 20:00:43 2007
Subject: [Harbour] harbour-b32.dll
Message-ID: <13372425.post@talk.nabble.com>


Harbour from SVN, bcc32 5.5, WinXP SP2 Prof.

make_b32.bat:
..
set HB_BUILD_DLL=yes
..

 
from make_b32.log:
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Error: Unresolved external '_HB_FUN_INT' referenced from
C:\HARBOUR\OBJ\DLL\B32\INITSYMB.OBJ
Error: Unresolved external '_HB_FUN_ROUND' referenced from
C:\HARBOUR\OBJ\DLL\B32\INITSYMB.OBJ

** error 2 ** deleting bin\b32\harbour-b32.dll

---
Petr
-- 
View this message in context: http://www.nabble.com/harbour-b32.dll-tf4679977.html#a13372425
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Tue Oct 23 20:32:42 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 23 20:33:22 2007
Subject: [Harbour] harbour-b32.dll
In-Reply-To: <13372425.post@talk.nabble.com>
References: <13372425.post@talk.nabble.com>
Message-ID: <92284FE6-E25A-4A2A-A198-F29020D81366@syenar.hu>

Hi Petr,

I'll rename round.c to something else in NFLIB,
'cause this might have such an effect.

Until then, try to rebuilt after a "make clean".

Brgds,
Viktor

On 2007.10.23., at 22:00, Petr Chornyj wrote:

>
> Harbour from SVN, bcc32 5.5, WinXP SP2 Prof.
>
> make_b32.bat:
> ..
> set HB_BUILD_DLL=yes
> ..
>
>
> from make_b32.log:
> Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
> Error: Unresolved external '_HB_FUN_INT' referenced from
> C:\HARBOUR\OBJ\DLL\B32\INITSYMB.OBJ
> Error: Unresolved external '_HB_FUN_ROUND' referenced from
> C:\HARBOUR\OBJ\DLL\B32\INITSYMB.OBJ
>
> ** error 2 ** deleting bin\b32\harbour-b32.dll
>
> ---
> Petr
> --  
> View this message in context: http://www.nabble.com/harbour-b32.dll- 
> tf4679977.html#a13372425
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Oct 23 20:39:24 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 23 20:39:36 2007
Subject: [Harbour] 2007-10-23 20:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200710231828.l9NISLMn026405@31-mo5-4.acn.waw.pl>
References: <200710231828.l9NISLMn026405@31-mo5-4.acn.waw.pl>
Message-ID: <4F5A20DF-5C78-4B25-9D77-8F2573FBFED4@syenar.hu>

Hi Przemek,

Could you rename "harbour-ce-spec" to "harbour-ce.spec"
to be in sync with "harbour.spec" we already have?

I can do it, but I'm unsure if there is any reference
to this filename somewhere.

Brgds,
Viktor

On 2007.10.23., at 20:28, Przemyslaw Czerpak wrote:

> 2007-10-23 20:27 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   + harbour/doc/howtobld.txt
>     + added hb* scripts description
>
>   * harbour/Makefile
>   * harbour/source/Makefile
>   + harbour/harbour-ce-spec
>   * harbour/bin/pack_src.sh
>   + harbour/make_rpmce.sh
>     + added script to build RPMs with cross build of Harbour for  
> PocketPC
>       make_rpmce.sh should create harbour-ce-1.1.1-0.i386.rpm which
>       can be installed with other harbour RPMs
>       It contains Harbour libraries compiled for WinCE/PocketPC and
>       set of hbce* scripts which should be used instead of standard  
> hb*
>       ones to create PocketPC binaries. It means that you can create
>       standard Linux binaries and PocketPC binaries in the same  
> session
>       without setting/changing any additional environment  
> varibales, f.e:
>          hbmk -n -w -es2 test.prg
>       will create linux binaries and:
>          hbcemk -n -w -es2 test.prg
>       will create binaries for WinCE/PocketPC
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Oct 23 20:42:32 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 23 20:42:36 2007
Subject: [Harbour] CHANGELOG:
Message-ID: <01c815b5$Blat.v2.6.2$3c71f7e8$1360eb29333e@127.0.0.1>

2007-10-23 22:40 UTC+0300 Phil Krylov <phil a t newstar.rinet.ru>
   * contrib/libnf/Makefile
   * contrib/libnf/makefile.vc
   * contrib/libnf/makefile.bc
   - contrib/libnf/round.prg
   + contrib/libnf/ftround.prg
   - contrib/libnf/test.prg
   + contrib/libnf/test
   + contrib/libnf/test/test.prg
     ! Rename one file in NFLIB to don't clash with core Harbour.
     * Moved test file to a separate test dir.

   * source/debug/dbgtobj.prg
     ! Fixed an RTE when browsing subarrays in object monitor.
       (from xhb by Phil Krylov)
--
Brgds,
Viktor

From druzus at acn.waw.pl  Tue Oct 23 20:51:22 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 23 20:51:29 2007
Subject: [Harbour] 2007-10-23 20:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <4F5A20DF-5C78-4B25-9D77-8F2573FBFED4@syenar.hu>
References: <200710231828.l9NISLMn026405@31-mo5-4.acn.waw.pl>
	<4F5A20DF-5C78-4B25-9D77-8F2573FBFED4@syenar.hu>
Message-ID: <20071023205122.GA3944@localhost.localdomain>

On Tue, 23 Oct 2007, Szak?ts Viktor wrote:
> Hi Przemek,
> Could you rename "harbour-ce-spec" to "harbour-ce.spec"
> to be in sync with "harbour.spec" we already have?
> I can do it, but I'm unsure if there is any reference
> to this filename somewhere.

The name is intentional.
RPM has a feature which allow to extract all *.spec files
from .tar.gz archive to one spec file and build binary RPMs
using it.
It means that on most of RPM based distributions (AFAIR
only conectiva was broken and maybe now also mandriva inherited
the bugs in RPM macros) you can download harbour-*.tar.gz and
create binary RPMs by simple:

    rpmbuild -ta harbour-*.tar.gz

If I'll rename the file as you suggested then I'll break such
possibility so I do not want to make it if you do not have some
really important reasons for such modification (I'll add Id
attribute in a while)

best regards,
Przemek
From druzus at acn.waw.pl  Tue Oct 23 20:55:18 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 23 20:55:25 2007
Subject: [Harbour] 2007-10-23 22:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710232055.l9NKtI3Y004152@31-mo5-4.acn.waw.pl>

2007-10-23 22:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/harbour-ce-spec
    * set svn:keywords=Id, svn:eol-style=native

best regards
Przemek
From harbour.01 at syenar.hu  Tue Oct 23 21:13:38 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 23 21:13:43 2007
Subject: [Harbour] CHANGELOG: 2007-10-23 22:40 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c815b9$Blat.v2.6.2$948e5cb0$11cc831f392c@127.0.0.1>

(the correct one, sorry for the previous one)

2007-10-23 22:40 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * contrib/libnf/Makefile
   * contrib/libnf/makefile.vc
   * contrib/libnf/makefile.bc
   - contrib/libnf/round.prg
   + contrib/libnf/ftround.prg
   - contrib/libnf/test.prg
   + contrib/libnf/test
   + contrib/libnf/test/test.prg
     ! Rename one file in NFLIB to not clash with core Harbour.
     * Moved test file to a separate test dir.

   * source/debug/dbgtobj.prg
     ! Fixed an RTE when browsing subarrays in object monitor.
       (from xhb by Phil Krylov)
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Oct 23 21:24:53 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 23 21:25:11 2007
Subject: [Harbour] 2007-10-23 20:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20071023205122.GA3944@localhost.localdomain>
References: <200710231828.l9NISLMn026405@31-mo5-4.acn.waw.pl>
	<4F5A20DF-5C78-4B25-9D77-8F2573FBFED4@syenar.hu>
	<20071023205122.GA3944@localhost.localdomain>
Message-ID: <FF398E32-9AA0-4A63-BF32-655DCBE59061@syenar.hu>

> On Tue, 23 Oct 2007, Szak?ts Viktor wrote:
>> Hi Przemek,
>> Could you rename "harbour-ce-spec" to "harbour-ce.spec"
>> to be in sync with "harbour.spec" we already have?
>> I can do it, but I'm unsure if there is any reference
>> to this filename somewhere.
>
> The name is intentional.
> RPM has a feature which allow to extract all *.spec files
> from .tar.gz archive to one spec file and build binary RPMs
> using it.
> It means that on most of RPM based distributions (AFAIR
> only conectiva was broken and maybe now also mandriva inherited
> the bugs in RPM macros) you can download harbour-*.tar.gz and
> create binary RPMs by simple:
>
>     rpmbuild -ta harbour-*.tar.gz
>
> If I'll rename the file as you suggested then I'll break such
> possibility so I do not want to make it if you do not have some
> really important reasons for such modification (I'll add Id
> attribute in a while)

Okey I see.

Do you think we somehow create a separate dir (/pkg/, /pkg/rpm/,
/pkg/rpm/debian) for package related stuffs? (specs, .sh-s, /debian)

Now the scrips are mixed up with build related stuff in the
root and it's getting confusing IMO.

I'd also rename package related .sh files to look like mkpk_*.sh
(or something similar), to not confuse them with "make" stuff.

What do you think?

Brgds,
Viktor


From harbour.01 at syenar.hu  Tue Oct 23 22:16:06 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 23 22:16:15 2007
Subject: [Harbour] 2007-10-23 20:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20071023205122.GA3944@localhost.localdomain>
References: <200710231828.l9NISLMn026405@31-mo5-4.acn.waw.pl>
	<4F5A20DF-5C78-4B25-9D77-8F2573FBFED4@syenar.hu>
	<20071023205122.GA3944@localhost.localdomain>
Message-ID: <0228CF87-D317-4827-9961-E2F4E963B8AC@syenar.hu>

> The name is intentional.
> RPM has a feature which allow to extract all *.spec files
> from .tar.gz archive to one spec file and build binary RPMs
> using it.
> It means that on most of RPM based distributions (AFAIR
> only conectiva was broken and maybe now also mandriva inherited
> the bugs in RPM macros) you can download harbour-*.tar.gz and
> create binary RPMs by simple:
>
>     rpmbuild -ta harbour-*.tar.gz

I'm trying this on Ubuntu 7.10 Server (first make_tgz.sh
then --extract the .sh to .tar.gz, then the command above
with sudo), and I'm getting this:

error: Name field must be present in package: (main package)

Then the same line for Version, Release, Summary, Group, License
fields.

What am I doing wrong?

Brgds,
Viktor



From druzus at acn.waw.pl  Tue Oct 23 22:42:59 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 23 22:43:05 2007
Subject: [Harbour] 2007-10-23 20:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <0228CF87-D317-4827-9961-E2F4E963B8AC@syenar.hu>
References: <200710231828.l9NISLMn026405@31-mo5-4.acn.waw.pl>
	<4F5A20DF-5C78-4B25-9D77-8F2573FBFED4@syenar.hu>
	<20071023205122.GA3944@localhost.localdomain>
	<0228CF87-D317-4827-9961-E2F4E963B8AC@syenar.hu>
Message-ID: <20071023224259.GA8751@localhost.localdomain>

On Wed, 24 Oct 2007, Szak?ts Viktor wrote:
> >The name is intentional.
> >RPM has a feature which allow to extract all *.spec files
> >from .tar.gz archive to one spec file and build binary RPMs
> >using it.
> >It means that on most of RPM based distributions (AFAIR
> >only conectiva was broken and maybe now also mandriva inherited
> >the bugs in RPM macros) you can download harbour-*.tar.gz and
> >create binary RPMs by simple:
> >    rpmbuild -ta harbour-*.tar.gz
> I'm trying this on Ubuntu 7.10 Server (first make_tgz.sh
> then --extract the .sh to .tar.gz, then the command above
> with sudo), and I'm getting this:
> error: Name field must be present in package: (main package)
> Then the same line for Version, Release, Summary, Group, License
> fields.
> What am I doing wrong?

I'm sorry but I do not know what you are trying to do.
make_tgz.sh creates .tar.gz archive with Harbour _binaries_
encapsulated in self contain install script. You can extract
this archive using --extract command passed to this scripts
but you will have archive with ready to use binaries not
source code. If you want to test:
    rpmbuild -ta ...
then you need package with source code. Compress harbour SVN
repository or simply run ./bin/pack_src.sh which will create
such archive: harbour-<ver>.src.tar.gz. AFAIK you can also
download .tar.gz archive with current Harbour source code
from Harbour web site.
Then you can test rpmbuild -ta if it's supported in you Ubuntu
distribution. Please remember that native package system for
Debian/Ubuntu is DEB not RPM. If you want to create binaries
in DEB package then simply run
    ./make_deb.sh

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Oct 23 22:47:46 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 23 22:48:38 2007
Subject: [Harbour] 2007-10-23 20:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <FF398E32-9AA0-4A63-BF32-655DCBE59061@syenar.hu>
References: <200710231828.l9NISLMn026405@31-mo5-4.acn.waw.pl>
	<4F5A20DF-5C78-4B25-9D77-8F2573FBFED4@syenar.hu>
	<20071023205122.GA3944@localhost.localdomain>
	<FF398E32-9AA0-4A63-BF32-655DCBE59061@syenar.hu>
Message-ID: <A18BD8BD-C6D4-430B-9D1A-A8F5C1331950@syenar.hu>

>> If I'll rename the file as you suggested then I'll break such
>> possibility so I do not want to make it if you do not have some
>> really important reasons for such modification (I'll add Id
>> attribute in a while)
>
> Okey I see.
>
> Do you think we somehow create a separate dir (/pkg/, /pkg/rpm/,
> /pkg/rpm/debian) for package related stuffs? (specs, .sh-s, /debian)
>
> Now the scrips are mixed up with build related stuff in the
> root and it's getting confusing IMO.
>
> I'd also rename package related .sh files to look like mkpk_*.sh
> (or something similar), to not confuse them with "make" stuff.
>
> What do you think?

Addition: Same goes probably for some scripts in /bin/ too.
Maybe pack_src.sh and postinst.sh? (these seem package
creating related)

bld.sh can probably be removed, what do you think?

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Oct 23 22:58:57 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 23 22:59:05 2007
Subject: [Harbour] 2007-10-23 20:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20071023224259.GA8751@localhost.localdomain>
References: <200710231828.l9NISLMn026405@31-mo5-4.acn.waw.pl>
	<4F5A20DF-5C78-4B25-9D77-8F2573FBFED4@syenar.hu>
	<20071023205122.GA3944@localhost.localdomain>
	<0228CF87-D317-4827-9961-E2F4E963B8AC@syenar.hu>
	<20071023224259.GA8751@localhost.localdomain>
Message-ID: <3ECCD68F-CAB2-4E74-A8C7-5C66F5D57AEE@syenar.hu>

I was also trying to use this .spec "autoextract" feature
you mentioned. Now I'm getting the same errors when I
try "rpmbuild -ta harbour-1.1.1.src.tar.gz".

To me as dummy Linux user this big bunch of interrelated Linux
scripts and build/pkg files are really cryptic, sorry :(

IMO it would be better to group them like this:
- scripts/files related to building Harbour itself: /
- scripts/files related to building (install/binary/source)  
packages: /pkg/
- scripts/files related to building final apps: /bin/

Brgds,
Viktor

On 2007.10.24., at 0:42, Przemyslaw Czerpak wrote:

> On Wed, 24 Oct 2007, Szak?ts Viktor wrote:
>>> The name is intentional.
>>> RPM has a feature which allow to extract all *.spec files
>>> from .tar.gz archive to one spec file and build binary RPMs
>>> using it.
>>> It means that on most of RPM based distributions (AFAIR
>>> only conectiva was broken and maybe now also mandriva inherited
>>> the bugs in RPM macros) you can download harbour-*.tar.gz and
>>> create binary RPMs by simple:
>>>    rpmbuild -ta harbour-*.tar.gz
>> I'm trying this on Ubuntu 7.10 Server (first make_tgz.sh
>> then --extract the .sh to .tar.gz, then the command above
>> with sudo), and I'm getting this:
>> error: Name field must be present in package: (main package)
>> Then the same line for Version, Release, Summary, Group, License
>> fields.
>> What am I doing wrong?
>
> I'm sorry but I do not know what you are trying to do.
> make_tgz.sh creates .tar.gz archive with Harbour _binaries_
> encapsulated in self contain install script. You can extract
> this archive using --extract command passed to this scripts
> but you will have archive with ready to use binaries not
> source code. If you want to test:
>     rpmbuild -ta ...
> then you need package with source code. Compress harbour SVN
> repository or simply run ./bin/pack_src.sh which will create
> such archive: harbour-<ver>.src.tar.gz. AFAIK you can also
> download .tar.gz archive with current Harbour source code
> from Harbour web site.
> Then you can test rpmbuild -ta if it's supported in you Ubuntu
> distribution. Please remember that native package system for
> Debian/Ubuntu is DEB not RPM. If you want to create binaries
> in DEB package then simply run
>     ./make_deb.sh
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Tue Oct 23 23:08:41 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 23 23:08:46 2007
Subject: [Harbour] 2007-10-23 20:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <FF398E32-9AA0-4A63-BF32-655DCBE59061@syenar.hu>
References: <200710231828.l9NISLMn026405@31-mo5-4.acn.waw.pl>
	<4F5A20DF-5C78-4B25-9D77-8F2573FBFED4@syenar.hu>
	<20071023205122.GA3944@localhost.localdomain>
	<FF398E32-9AA0-4A63-BF32-655DCBE59061@syenar.hu>
Message-ID: <20071023230841.GA9018@localhost.localdomain>

On Tue, 23 Oct 2007, Szak?ts Viktor wrote:
> Do you think we somehow create a separate dir (/pkg/, /pkg/rpm/,
> /pkg/rpm/debian) for package related stuffs? (specs, .sh-s, /debian)

I'm not Debian/Ubuntu user but I think that ./debian/ is strict
name used by all DEB packages so I do not know if such modifications
are possible. Probably you will find somewhere in your Ubuntu
instalation necessary and suggested conditions for DEB.

> Now the scrips are mixed up with build related stuff in the
> root and it's getting confusing IMO.

These scripts _ARE_ "build related stuff". Packages like RPMs or
DEBs are created from source code. Many people use only packages
in their distributions so they never run ./make_gnu.sh but only
make_rpm.sh or make_deb.sh or make_tgz.sh and then install final
binaries. In some conditions it's very important to always install
new software using supported package manager so make_gnu.sh cannot
be used at all.
Please also note that we do not use autoconf or anything similar
and these scripts have to make some very basic prebuild checking
for features supported in given OS.

> I'd also rename package related .sh files to look like mkpk_*.sh
> (or something similar), to not confuse them with "make" stuff.
> What do you think?

If we have things make_vc.bat and make_b32.bat then I do not see
any reason we cannot have make_rpm.sh or make_deb.sh.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Oct 23 23:11:27 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 23 23:11:35 2007
Subject: [Harbour] Harbour in Linux distros
In-Reply-To: <20071023002054.GA14094@localhost.localdomain>
References: <20071021070437.2CCC236855@mafalda.teledetection.fr>
	<A533DEB9-B525-4507-8F99-CB2BF4C37D61@syenar.hu>
	<471C493F.2050406@teledetection.fr>
	<9F6F03DB-246A-48CB-BA7B-B42B12E843B3@syenar.hu>
	<20071022192139.GA12229@localhost.localdomain>
	<E238193D-8E06-46F3-A7A1-A1C3E17E971B@syenar.hu>
	<20071023002054.GA14094@localhost.localdomain>
Message-ID: <92D00B9C-89E7-4FFA-8588-25C4F52759C3@syenar.hu>

> Just make what Peter asked in his post:
> ,--------------------------------------------------------------------- 
> ------
> | Hi,
> | the current version of harbour has unsatisfied Build-Depends on  
> libgpmg1-dev
> | under non-linux ports.
> | This package builds fine on GNU/kFreeBSD without libgpmg1-dev  
> installed.
> | Please, could you exclude linux specific package in Build-Depends
> | by using "libgpmg1-dev [!kfreebsd-i386 !kfreebsd-amd64 !hurd-i386]".
> | Thanks for your cooperation.
> |                                 Petr
> `--------------------------------------------------------------------- 
> ------
> Build-Depends tag is in debian/control file - change it as  
> suggested above
> and check if you can still create DEB packages in your distribution.

I've changed that in /debian/control, run ./make_deb.sh,
which didn't seem to create any .deb files (at least not in the
harbour dir; where should it be?), and displayed lots of stuff
this at the end:

"(...snipped...)
If you want to build Harbour compiler
you have to install the folowing packages:

  debmake libgpmg1-dev

you can do that executing:
sudo apt-get install  debmake libgpmg1-dev"

I honestly don't know what this all means.

Brgds,
Viktor

From antonioharbour at gmail.com  Tue Oct 23 23:15:30 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Oct 23 23:16:12 2007
Subject: [Harbour] Filesys - unicode
Message-ID: <471e80b8.1f205e0a.140c.1041@mx.google.com>

Przemek,

Could you modify rtl/filesys to turn it unicode compatible, so it may be
used on pocket pc ?

As I commented you, all Windows functions ...A() have to be converted into
...W()

Many thanks for your help,

Regards,

Antonio

From harbour.01 at syenar.hu  Tue Oct 23 23:47:03 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 23 23:47:11 2007
Subject: [Harbour] 2007-10-23 20:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20071023230841.GA9018@localhost.localdomain>
References: <200710231828.l9NISLMn026405@31-mo5-4.acn.waw.pl>
	<4F5A20DF-5C78-4B25-9D77-8F2573FBFED4@syenar.hu>
	<20071023205122.GA3944@localhost.localdomain>
	<FF398E32-9AA0-4A63-BF32-655DCBE59061@syenar.hu>
	<20071023230841.GA9018@localhost.localdomain>
Message-ID: <1C521F82-DE9F-486B-8376-1390B6A5FAA7@syenar.hu>

> If we have things make_vc.bat and make_b32.bat then I do not see
> any reason we cannot have make_rpm.sh or make_deb.sh.

Okey, you misunderstood me; I've never meant to suggest to remove
any of these package builder scripts.

make_rpm.sh is the equivalent of something like  
"make_nullsoft_binary_install.bat"
under Windows, which might automatically build Harbour from source
as a plus, but the main goal is to create a _package_ out of source
tree or binary build.

Creating Harbour from source is mostly done by end-users, while
package creation is mostly done by Harbour developers/releasers.
That's one more reason to make it clear which is which.

If the placement cannot be changed, can we at least use some more
descriptive names for them:
mkpg_*.sh for the ones which are meant to create some sort of package
(tgz, tar.gz, deb, rpm). I'd still like it better if we could
place everything resulting in a distribution package to be placed
in /pkg/.

We currently have these scripts in Harbour just for Linux:

bldcmncf.sh (?)
hbgtmk.sh (?)
make_deb.sh (create deb package)
make_gcc.sh (build Harbour from source ?)
make_gnu.sh (build Harbour from source)
make_rpm.sh (create rpm package)
make_rpmce.sh (create rpm package for WinCE)
make_tgz.sh (build Harbour from source + create binary .tgz.sh  
installer)
make_xcemgw.sh (-> make_gnu.sh)
make_xmingw.sh (-> make_gnu.sh)
bin\bld.sh (build final application) (OBSOLETE)
bin\hb-func.sh (?)
bin\hb-mkslib.sh (create shared libs from static ones) (this is  
Harbour build related)
bin\pack_src.sh (create source package .tar.gz) (this is package  
related)
bin\postinst.sh (?)

Brgds,
Viktor



From harbour.01 at syenar.hu  Tue Oct 23 23:51:12 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 23 23:51:14 2007
Subject: [Harbour] CHANGELOG: 2007-10-24 01:47 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c815cf$Blat.v2.6.2$97885bee$130cdb66d6e0@127.0.0.1>

2007-10-24 01:47 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * contrib/libnf/fttext.c
     % Optimized _writeeol()

   * contrib/libnf/readme.txt
     ! Old typos fixed.

   * include/hbgtinfo.ch
   * contrib/xhb/hbcompat.ch
     ! Some xhb specific MaxRow()/MaxCol() parameter 
       extension macros (also named GTI_*) moved to xhb contrib.

   - bin/bld.cmd
     - Removed obsolete version of bld.bat (aimed for OS/2).
       OS/2 users should use bld.bat.

   - bin/bld.sh
     - Removed obsolete file. Linux/Unix users should use hb*.sh 
       scripts, which are properly working (as opposed to bld.sh).

   * harbour-ce-spec
   * harbour.spec
   * doc/howtobld.txt
     - Removed gharbour and harbour-link compatibility commands 
       (to lessen equivalent user choices and to have every harbour 
       related stuff to start with hb)
       Pls use hbcmp and hblnk respectively.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Oct 24 00:25:47 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 24 00:25:55 2007
Subject: [Harbour] Harbour in Linux distros
In-Reply-To: <92D00B9C-89E7-4FFA-8588-25C4F52759C3@syenar.hu>
References: <20071021070437.2CCC236855@mafalda.teledetection.fr>
	<A533DEB9-B525-4507-8F99-CB2BF4C37D61@syenar.hu>
	<471C493F.2050406@teledetection.fr>
	<9F6F03DB-246A-48CB-BA7B-B42B12E843B3@syenar.hu>
	<20071022192139.GA12229@localhost.localdomain>
	<E238193D-8E06-46F3-A7A1-A1C3E17E971B@syenar.hu>
	<20071023002054.GA14094@localhost.localdomain>
	<92D00B9C-89E7-4FFA-8588-25C4F52759C3@syenar.hu>
Message-ID: <E41C2470-0674-4B1B-AA25-1B07E286A080@syenar.hu>

Okey, slowly but surely.

I had to install debmake and libgpmg1-dev and now the
package creation went fine.

I've tried the suggestion of Peter, using modified control
file and uninstalled libgpmg1-dev, but it doesn't seem
work then.

--- /debian/control
[SNIP]
Build-Depends: debhelper (>= 4.0.0), libncurses5-dev, libslang2-dev,  
libgpmg1-dev [!kfreebsd-i386 !kfreebsd-amd64 !hurd-i386], libx11-dev,  
unixodbc-dev
[SNIP]
--- stdout
[SNIP]
Original-Maintainer: Alastair McKinstry <mckinstry@debian.org>
Package: libgpmg1-dev
Status: purge ok not-installed
Priority: optional
Section: libdevel
Package: libx11-dev
Status: install ok installed
Priority: optional
Section: libdevel
Installed-Size: 20560
Maintainer: Ubuntu Core Developers <ubuntu-devel- 
discuss@lists.ubuntu.com>
Architecture: i386
Source: libx11
Version: 2:1.1.1-1ubuntu4
Depends: libx11-6 (= 2:1.1.1-1ubuntu4), libxau-dev (>= 1:1.0.0-1),  
libxdmcp-dev (>= 1:1.0.0-1), x11proto-core-dev (>= 6.8.99.8-1),  
x11proto-input-dev, x11proto-kb-dev, xtrans-dev
Pre-Depends: x11-common (>= 1:7.0.0)
Description: X11 client-side library (development headers)
This package provides a client interface to the X Window System,  
otherwise
known as 'Xlib'.  It provides a complete API for the basic functions  
of the
window system.
.
This package contains the development headers for the library found in
libx11-6. Non-developers likely have little use for this package.
.
More information about X.Org can be found at:
<URL:http://xorg.freedesktop.org>
<URL:http://lists.freedesktop.org/mailman/listinfo/xorg>
Original-Maintainer: Debian X Strike Force <debian-x@lists.debian.org>
Package: unixodbc-dev
Status: install ok installed
Priority: extra
Section: devel
Installed-Size: 2020
Maintainer: Ubuntu Core Developers <ubuntu-devel- 
discuss@lists.ubuntu.com>
Architecture: i386
Source: unixodbc
Version: 2.2.11-16
Depends: unixodbc (= 2.2.11-16), odbcinst1debian1 (= 2.2.11-16),  
libodbcinstq1c2 (= 2.2.11-16), libltdl3-dev
Suggests: libqt3-mt-dev
Conflicts: libiodbc2-dev, remembrance-agent (<< 2.11-4)
Description: ODBC libraries for UNIX (development files)
This package contains the development files (headers and libraries) for
unixODBC, an implementation of the Open DataBase Connectivity interface
for Unix systems.  You should not need to install this package unless
you intend to develop C language applications which use ODBC, or to
compile ODBC-using applications from source.
Original-Maintainer: Steve Langasek <vorlon@debian.org>
dpkg-buildpackage: source package is harbour
dpkg-buildpackage: source version is 0.45.0-0.1
dpkg-buildpackage: source changed by Clint Adams <schizo@debian.org>
dpkg-buildpackage: host architecture i386
dpkg-buildpackage: source version without epoch 0.45.0-0.1
dpkg-checkbuilddeps: Unmet build dependencies: libgpmg1-dev
dpkg-buildpackage: Build dependencies/conflicts unsatisfied; aborting.
dpkg-buildpackage: (Use -d flag to override.)
vszakats@orange:~/harbour$
---

Brgds,
Viktor

On 2007.10.24., at 1:11, Szak?ts Viktor wrote:

>> Just make what Peter asked in his post:
>> ,-------------------------------------------------------------------- 
>> -------
>> | Hi,
>> | the current version of harbour has unsatisfied Build-Depends on  
>> libgpmg1-dev
>> | under non-linux ports.
>> | This package builds fine on GNU/kFreeBSD without libgpmg1-dev  
>> installed.
>> | Please, could you exclude linux specific package in Build-Depends
>> | by using "libgpmg1-dev [!kfreebsd-i386 !kfreebsd-amd64 !hurd- 
>> i386]".
>> | Thanks for your cooperation.
>> |                                 Petr
>> `-------------------------------------------------------------------- 
>> -------
>> Build-Depends tag is in debian/control file - change it as  
>> suggested above
>> and check if you can still create DEB packages in your distribution.
>
> I've changed that in /debian/control, run ./make_deb.sh,
> which didn't seem to create any .deb files (at least not in the
> harbour dir; where should it be?), and displayed lots of stuff
> this at the end:
>
> "(...snipped...)
> If you want to build Harbour compiler
> you have to install the folowing packages:
>
>  debmake libgpmg1-dev
>
> you can do that executing:
> sudo apt-get install  debmake libgpmg1-dev"
>
> I honestly don't know what this all means.
>
> Brgds,
> Viktor
>

From druzus at acn.waw.pl  Wed Oct 24 00:35:07 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 24 00:35:14 2007
Subject: [Harbour] Harbour in Linux distros
In-Reply-To: <92D00B9C-89E7-4FFA-8588-25C4F52759C3@syenar.hu>
References: <20071021070437.2CCC236855@mafalda.teledetection.fr>
	<A533DEB9-B525-4507-8F99-CB2BF4C37D61@syenar.hu>
	<471C493F.2050406@teledetection.fr>
	<9F6F03DB-246A-48CB-BA7B-B42B12E843B3@syenar.hu>
	<20071022192139.GA12229@localhost.localdomain>
	<E238193D-8E06-46F3-A7A1-A1C3E17E971B@syenar.hu>
	<20071023002054.GA14094@localhost.localdomain>
	<92D00B9C-89E7-4FFA-8588-25C4F52759C3@syenar.hu>
Message-ID: <20071024003507.GA9409@localhost.localdomain>

On Wed, 24 Oct 2007, Szak?ts Viktor wrote:
> I've changed that in /debian/control, run ./make_deb.sh,
> which didn't seem to create any .deb files (at least not in the
> harbour dir; where should it be?), and displayed lots of stuff
> this at the end:
> "(...snipped...)

The cut (...snipped...) part is very interesting.
Please redirect all this output to file and send it to me.
Maybe I'll be able to help. It should be done by real Debian/Ubuntu
user not be me but if sth is broken and no one else can fix then
I can try but I need exact output.
So please run:

    ./make_deb.sh 2>&1 | gzip deb.log.gz

and send deb.log.gz to me.

> If you want to build Harbour compiler
> you have to install the folowing packages:
>  debmake libgpmg1-dev
> 
> you can do that executing:
> sudo apt-get install  debmake libgpmg1-dev"

This seems to be quite reasonable and expected message from ./make_deb.sh
You need to install two packages:
    1. debmake
    2. libgpmg1-dev
If you want to create DEB with Harbour binaries.
You can install them using:
    sudo apt-get install debmake libgpmg1-dev

or some wrapper to apt-get

Here everything is perfect but I do not know what is in the
(...snipped...) part. IMHO above should be the only message
when some dependences are not passed.

> I honestly don't know what this all means.

Don't you wrote this text in doc/linux1st.txt ???:

,---------------------------------------------------------
| Ubuntu distro
| -------------
| 
| Packages needed to cleanly build Harbour:
| (Tested with Ubuntu 7.04 Server)
| 
| For GTCRS terminal lib:
| sudo apt-get install libncurses-dev
| 
| For GTSLN terminal lib:
| sudo apt-get install libslang2-dev
| 
| For GTXWC terminal lib:
| sudo apt-get install libx11-dev
| 
| For Contrib/ODBC lib:
| sudo apt-get install unixodbc-dev
`---------------------------------------------------------

Don't you think it looks similar?


Package manger is not type of archive as usually MS-Windows user
things. It's a system which makes many different things to safely
install/uninstall software, check dependences, alternative libraries,
resolve conflicts, etc. F.e. it checks dependences between different
packages and if sth is missing informs user about it. F.e if you install
RPM with harbour-*.so library then RPM XYX with some program linked
dynamically with this library and you will try to uninstall the 1-st
RPM package manger will inform you that it's impossible because package
XYZ will stop to work. Or if you will try to install RPM with scripts
using #!/usr/bin/hbrun then package manger will inform you that you
need other package which will have program /usr/bin/hbrun. Or when
you will try to upgrade package libharbour-1.0.so to libharbour-2.0.so
then RPM will check if you have programs which need libharbour-1.0.so
and if yes then it will inform you that it's impossible because it will
break them. In such case you will have to install (not upgrade) new
library so your system will have both. There are also many other things
with PKG-MGR can do. F.e. you can easy install software without
documentation if you want to safe disk space, you can locate and backup
all configuration files changed after installation, or locate files
which were changed by hacker or corrupted by disk crash (PKG-MGR stores
MD5 sums for all files) or make many, many other things.
It's the reason why it's good practice to always install new software
respecting existing package manger - it should always know as much as
possible about installed programs. Some distributions like Debian or
Ubuntu use DEB packages. Some other like Fedora, SUSE, Mandriva, PLD
use RPM packages. There are also some other PKG-MGR systems but much
less popular. Some distributions does not have real package manager
but can store file list from installed .tar.gz archive for easier
deinstallation and/or locating source packages.
You should chose valid system for your distribution. Usually it's
not possible (with some hacks in installed package database) to cleanly
create packages for different distribution f.e. DEBs in Fedora or RPMs
in Ubuntu.
Maybe it will help you a little bit.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Oct 24 00:47:18 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 24 00:47:23 2007
Subject: [Harbour] Harbour in Linux distros
In-Reply-To: <E41C2470-0674-4B1B-AA25-1B07E286A080@syenar.hu>
References: <20071021070437.2CCC236855@mafalda.teledetection.fr>
	<A533DEB9-B525-4507-8F99-CB2BF4C37D61@syenar.hu>
	<471C493F.2050406@teledetection.fr>
	<9F6F03DB-246A-48CB-BA7B-B42B12E843B3@syenar.hu>
	<20071022192139.GA12229@localhost.localdomain>
	<E238193D-8E06-46F3-A7A1-A1C3E17E971B@syenar.hu>
	<20071023002054.GA14094@localhost.localdomain>
	<92D00B9C-89E7-4FFA-8588-25C4F52759C3@syenar.hu>
	<E41C2470-0674-4B1B-AA25-1B07E286A080@syenar.hu>
Message-ID: <20071024004718.GB9409@localhost.localdomain>

On Wed, 24 Oct 2007, Szak?ts Viktor wrote:
> Okey, slowly but surely.
> I had to install debmake and libgpmg1-dev and now the
> package creation went fine.
> I've tried the suggestion of Peter, using modified control
> file and uninstalled libgpmg1-dev, but it doesn't seem
> work then.
> [SNIP]
> Build-Depends: debhelper (>= 4.0.0), libncurses5-dev, libslang2-dev,  
> libgpmg1-dev [!kfreebsd-i386 !kfreebsd-amd64 !hurd-i386], libx11-dev,  
> unixodbc-dev
> [SNIP]

It works. Please note that it disables libgpmg1-dev only for kfreebsd
and hurd but for all other builds (f.e. Linux) it's still necessary.
If you want then you can make libgpmg1-dev optional or suggested
only for Linux instead of excluding other systems but don't ask
me about exact syntax - as I said I do not use Debian or Ubuntu.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Oct 24 00:58:35 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 24 00:58:46 2007
Subject: [Harbour] Harbour in Linux distros
In-Reply-To: <20071024003507.GA9409@localhost.localdomain>
References: <20071021070437.2CCC236855@mafalda.teledetection.fr>
	<A533DEB9-B525-4507-8F99-CB2BF4C37D61@syenar.hu>
	<471C493F.2050406@teledetection.fr>
	<9F6F03DB-246A-48CB-BA7B-B42B12E843B3@syenar.hu>
	<20071022192139.GA12229@localhost.localdomain>
	<E238193D-8E06-46F3-A7A1-A1C3E17E971B@syenar.hu>
	<20071023002054.GA14094@localhost.localdomain>
	<92D00B9C-89E7-4FFA-8588-25C4F52759C3@syenar.hu>
	<20071024003507.GA9409@localhost.localdomain>
Message-ID: <29BE4160-D631-4913-BB6B-C70FA9F60A80@syenar.hu>

> On Wed, 24 Oct 2007, Szak?ts Viktor wrote:
>> I've changed that in /debian/control, run ./make_deb.sh,
>> which didn't seem to create any .deb files (at least not in the
>> harbour dir; where should it be?), and displayed lots of stuff
>> this at the end:
>> "(...snipped...)
>
> The cut (...snipped...) part is very interesting.
> Please redirect all this output to file and send it to me.
> Maybe I'll be able to help. It should be done by real Debian/Ubuntu
> user not be me but if sth is broken and no one else can fix then
> I can try but I need exact output.
> So please run:
>
>     ./make_deb.sh 2>&1 | gzip deb.log.gz
>
> and send deb.log.gz to me.

Okey, pls see my other message, I've included some
more output (not the full one though), let me know if
you still need the full one.

>> I honestly don't know what this all means.
>
> Don't you wrote this text in doc/linux1st.txt ???:
>
> ,---------------------------------------------------------
> | Ubuntu distro
> | -------------
> |
> | Packages needed to cleanly build Harbour:
> | (Tested with Ubuntu 7.04 Server)
> |
> | For GTCRS terminal lib:
> | sudo apt-get install libncurses-dev
> |
> | For GTSLN terminal lib:
> | sudo apt-get install libslang2-dev
> |
> | For GTXWC terminal lib:
> | sudo apt-get install libx11-dev
> |
> | For Contrib/ODBC lib:
> | sudo apt-get install unixodbc-dev
> `---------------------------------------------------------
>
> Don't you think it looks similar?

I know what "sudo apt-get" is, but I've never built
any packages so the whole stuff is new. Moreover,
I've used this exact same virtual machine to successfully
build Harbour, and no packages were missing (that's when
you helped me with the packages and I wrote this info into
this text). Now I simply don't know what to look for. ...whatever.

> Package manger is not type of archive as usually MS-Windows user
> things. It's a system which makes many different things to safely
> install/uninstall software, check dependences, alternative libraries,
> resolve conflicts, etc. F.e. it checks dependences between different
> packages and if sth is missing informs user about it. F.e if you  
> install
> RPM with harbour-*.so library then RPM XYX with some program linked
> dynamically with this library and you will try to uninstall the 1-st
> RPM package manger will inform you that it's impossible because  
> package
> XYZ will stop to work. Or if you will try to install RPM with scripts
> using #!/usr/bin/hbrun then package manger will inform you that you
> need other package which will have program /usr/bin/hbrun. Or when
> you will try to upgrade package libharbour-1.0.so to libharbour-2.0.so
> then RPM will check if you have programs which need libharbour-1.0.so
> and if yes then it will inform you that it's impossible because it  
> will
> break them. In such case you will have to install (not upgrade) new
> library so your system will have both. There are also many other  
> things
> with PKG-MGR can do. F.e. you can easy install software without
> documentation if you want to safe disk space, you can locate and  
> backup
> all configuration files changed after installation, or locate files
> which were changed by hacker or corrupted by disk crash (PKG-MGR  
> stores
> MD5 sums for all files) or make many, many other things.
> It's the reason why it's good practice to always install new software
> respecting existing package manger - it should always know as much as
> possible about installed programs. Some distributions like Debian or
> Ubuntu use DEB packages. Some other like Fedora, SUSE, Mandriva, PLD
> use RPM packages. There are also some other PKG-MGR systems but much
> less popular. Some distributions does not have real package manager
> but can store file list from installed .tar.gz archive for easier
> deinstallation and/or locating source packages.
> You should chose valid system for your distribution. Usually it's
> not possible (with some hacks in installed package database) to  
> cleanly
> create packages for different distribution f.e. DEBs in Fedora or RPMs
> in Ubuntu.
> Maybe it will help you a little bit.

Thanks, it was good to read. I'm more or less familiar with the
concept as a user, but that's not the same thing as actually
testing/debugging a package build process.

Actually I think that's how Windows installer(s) should work
(for low level stuff, for high level, nothing can beat the OSX
method). However crappy the Windows implementation is, it is
the closest thing available there as "package management".

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Oct 24 01:08:13 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 24 01:08:22 2007
Subject: [Harbour] 2007-10-23 20:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <1C521F82-DE9F-486B-8376-1390B6A5FAA7@syenar.hu>
References: <200710231828.l9NISLMn026405@31-mo5-4.acn.waw.pl>
	<4F5A20DF-5C78-4B25-9D77-8F2573FBFED4@syenar.hu>
	<20071023205122.GA3944@localhost.localdomain>
	<FF398E32-9AA0-4A63-BF32-655DCBE59061@syenar.hu>
	<20071023230841.GA9018@localhost.localdomain>
	<1C521F82-DE9F-486B-8376-1390B6A5FAA7@syenar.hu>
Message-ID: <20071024010813.GC9409@localhost.localdomain>

On Wed, 24 Oct 2007, Szak?ts Viktor wrote:
> make_rpm.sh is the equivalent of something like  
> "make_nullsoft_binary_install.bat"
> under Windows, which might automatically build Harbour from source
> as a plus, but the main goal is to create a _package_ out of source
> tree or binary build.
> 
> Creating Harbour from source is mostly done by end-users, while
> package creation is mostly done by Harbour developers/releasers.
> That's one more reason to make it clear which is which.

In both cases you have com pilation from source code and you should
revert what you said. Harbour developers compile customized Harbour
version using simple 'make' 'make install' with some environment
variables set because it's the fastest way to check modifications.
Harbour users usually create packages and install them. If not then
it only means that they have rather small practice with Linux
(probably MS-Windows is still their base platform) and should stop
such practice and begin to use play fair with existing package manager.
I have Harbour installed in many different computers but only in two
machines I'm working on Harbour source code I'm building Harbour
manually.

> If the placement cannot be changed, can we at least use some more
> descriptive names for them:
> mkpg_*.sh for the ones which are meant to create some sort of package
> (tgz, tar.gz, deb, rpm). I'd still like it better if we could
> place everything resulting in a distribution package to be placed
> in /pkg/.
> We currently have these scripts in Harbour just for Linux:
> bldcmncf.sh (?)
  convert common.mak to GNU make format - it's used by make_gcc.sh

> hbgtmk.sh (?)

# This script checks you have all tools to build Harbour binaries
# installed then takes current Harbour sources from SourceForge SVN
# repository and build binary RPMs at your local host

The easiest way to start using Harbour in new installed RPM
based Linux distribution. It's enough to run this scripts wait
few minutes and you have ready to install binaries in RPM packages
compiled with the exact libraries you have.

> make_deb.sh (create deb package)

build Harbour from source put results in deb package

> make_gcc.sh (build Harbour from source ?)
> make_gnu.sh (build Harbour from source)
> make_rpm.sh (create rpm package)

build Harbour from source put results in RPMs

> make_rpmce.sh (create rpm package for WinCE)

build from source linux Harbour binaries for creating WinCE
application in Linux box, put results in RPM.

> make_tgz.sh (build Harbour from source + create binary .tgz.sh  
> installer)
> make_xcemgw.sh (-> make_gnu.sh)

build from source linux Harbour binaries for creating WinCE
application in Linux box

> make_xmingw.sh (-> make_gnu.sh)

build from source linux Harbour binaries for creating Win9x/NT/2K/XP/...
application in Linux box

> bin\bld.sh (build final application) (OBSOLETE)

yes, can be removed.

> bin\hb-func.sh (?)

set of helper functions used in build process, f.e. hb* scripts
generator.

> bin\hb-mkslib.sh (create shared libs from static ones) (this is  
> Harbour build related)
> bin\pack_src.sh (create source package .tar.gz) (this is package  
> related)
> bin\postinst.sh (?)
and postinst.bat

Both are executed in the end of build process to finish some operations
which cannot be easy done directly in make files. F.e. they create
shared libraries (.so/.dll/.dyn/...) from just compiled static ones,
generate hb* scripts, compile some alternative modules like fmstat library,
etc.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Oct 24 01:16:49 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 24 01:16:51 2007
Subject: [Harbour] CHANGELOG: 2007-10-24 03:12 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c815db$Blat.v2.6.2$8d69f814$10249a23b1c2@127.0.0.1>

2007-10-24 03:12 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   - make_gnu.cmd
     - Remove obsolete file. This was the same as make_gnu.bat 
       but with defaults set for OS/2. OS/2 users should use 
       make_gnu.bat with proper platform/compiler sets.

   * bin/bld.bat
   * make_gnu.bat
     * Changed default compiler/platform to w32/mingw32 
       (was dos/djgpp)
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Oct 24 01:25:35 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 24 01:25:38 2007
Subject: [Harbour] CHANGELOG: 2007-10-24 03:25 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c815dc$Blat.v2.6.2$c6fd8130$1510437d28c6@127.0.0.1>

2007-10-24 03:25 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * include/hbclass.ch
   * include/hbsetup.ch
     - Removed HB_SHORTNAME last occurences. Harbour doesn't 
       have a 10 char symbol compatibility since some time, and
       it didn't make too much sense anyway since long.
       I wonder if HB_CLS_NO_DECORATION (in hbclass.ch) has 
       any point anymore?
--
Brgds,
Viktor

From druzus at acn.waw.pl  Wed Oct 24 01:55:42 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 24 01:55:47 2007
Subject: [Harbour] 2007-10-24 03:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710240155.l9O1tgSc007541@31-mo5-4.acn.waw.pl>

2007-10-24 03:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/harbour-ce-spec
  * harbour/make_rpmce.sh
    * automatically update version number

  * harbour/doc/howtobld.txt
    * set svn:keywords=Id

  * harbour/contrib/libnf/Makefile
    - removed test.prg

best regards
Przemek
From harbour.01 at syenar.hu  Wed Oct 24 02:00:50 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 24 02:00:52 2007
Subject: [Harbour] CHANGELOG: 2007-10-24 03:54 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c815e1$Blat.v2.6.2$b3929694$e5043b2dd24@127.0.0.1>

2007-10-24 03:54 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * include/vm.api
   * include/hbapi.h
   * include/clipdefs.h
   * common.mak
   * source/vm/Makefile
   + source/vm/vm.c
     + Added skeletons for CA-Cl*pper-like C-level VM API.
       Types slightly modified for portability and to support 
       larger memory than C5x.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Oct 24 02:10:15 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 24 02:10:18 2007
Subject: [Harbour] CHANGELOG: 2007-10-24 04:08 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c815e3$Blat.v2.6.2$04545cba$46866ca0df2@127.0.0.1>

2007-10-24 04:08 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   - bin/bld_b16.bat
     - Removed file. DOS/BCC16 usage is not that common now, 
       that it needs a separate batch file. DOS/BCC16 users 
       should use bld.bat with proper envvars.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Oct 24 02:12:09 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 24 02:12:16 2007
Subject: [Harbour] "COPYING" file content
Message-ID: <79E73310-7615-456A-88B1-2BFA50C88C30@syenar.hu>

Hi all,

We have a file named COPYING in the root, but the
content of it is the plain GPL license text
(without the Harbour exception).

Is this okey?

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Oct 24 02:16:55 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 24 02:16:56 2007
Subject: [Harbour] CHANGELOG: 2007-10-24 04:16 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c815e3$Blat.v2.6.2$f2e34800$11f0120e8c80@127.0.0.1>

2007-10-24 04:16 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   - .cvsignore
   - utils/hbpptest/.cvsignore
     - Removed .cvsignore files, they were not used anymore.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Oct 24 02:18:32 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 24 02:18:39 2007
Subject: [Harbour] contrib DOT?
Message-ID: <BB23FB5E-AFB3-45A5-9D98-A7090D5EB5D9@syenar.hu>

Hi all,

Do we still need /contrib/dot/ now that we have HBDOT
as part of core?

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Oct 24 02:22:44 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 24 02:22:46 2007
Subject: [Harbour] CHANGELOG: 2007-10-24 04:22 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c815e4$Blat.v2.6.2$c2e3afcc$ebcc7c214fe@127.0.0.1>

2007-10-24 04:22 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   - bin/b16
     - Removed obsolete directory.
--
Brgds,
Viktor

From philb at philb.us  Wed Oct 24 02:44:01 2007
From: philb at philb.us (Phil Barnett)
Date: Wed Oct 24 02:48:12 2007
Subject: [Harbour] "COPYING" file content
In-Reply-To: <79E73310-7615-456A-88B1-2BFA50C88C30@syenar.hu>
References: <79E73310-7615-456A-88B1-2BFA50C88C30@syenar.hu>
Message-ID: <200710232244.01131.philb@philb.us>

On Tuesday 23 October 2007, Szak?ts Viktor wrote:
> Hi all,
>
> We have a file named COPYING in the root, but the
> content of it is the plain GPL license text
> (without the Harbour exception).
>
> Is this okey?

It should also include the exception.

-- 
Phil Barnett
AI4OF
SKCC #600
DRCC #51
From antonioharbour at gmail.com  Wed Oct 24 05:50:24 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Oct 24 05:51:09 2007
Subject: [Harbour] Hb_CdxIndexPageRead  error (Przemek)
Message-ID: <471edd47.0d135e0a.5ac7.4547@mx.google.com>

Przemek,

Using Harbour (September) on Pocket PC, a user is getting this error when
opening the DBFs and reindexing (DBFCDX) after some days of activity with
the application:

Hb_CdxIndexPageRead 
Read index Page Fail 
Console error 
Called from DbUseArea(0) 
Called From ..... 

Doses it mean general corruption of the index ? Thanks.

I really would like to upgrade to the most recent Harbour svn but meanwhile
you don't upgrade filesys, etc. to unicode, it's a real pain to patch
Harbour here and there :-) and I only do it from time to time.

Regards,

Antonio

From myorg63 at mail.ru  Wed Oct 24 05:57:47 2007
From: myorg63 at mail.ru (Petr Chornyj)
Date: Wed Oct 24 05:57:50 2007
Subject: [Harbour] harbour-b32.dll
In-Reply-To: <92284FE6-E25A-4A2A-A198-F29020D81366@syenar.hu>
References: <92284FE6-E25A-4A2A-A198-F29020D81366@syenar.hu>
Message-ID: <13379513.post@talk.nabble.com>


Thank you, it works

---
Petr
-- 
View this message in context: http://www.nabble.com/Re%3A-harbour-b32.dll-tf4680179.html#a13379513
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From antonioharbour at gmail.com  Wed Oct 24 06:04:31 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Oct 24 06:05:14 2007
Subject: [Harbour] Val() bug ?
Message-ID: <471ee095.1f205e0a.140c.4827@mx.google.com>

Is this a Val() bug ?

? VAL("4209253717027162"+"1")  // shows 42092537170271624

Thanks,

Regards,

Antonio


From e.m.giordano at emagsoftware.it  Wed Oct 24 07:12:11 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Oct 24 07:12:17 2007
Subject: [Harbour] Val() bug ?
References: <471ee095.1f205e0a.140c.4827@mx.google.com>
Message-ID: <008c01c8160d$329f0f50$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Antonio Linares" <antonioharbour@gmail.com>
A: <harbour@harbour-project.org>
Data invio: mercoled? 24 ottobre 2007 8.04
Oggetto: [Harbour] Val() bug ?


> Is this a Val() bug ?
>
> ? VAL("4209253717027162"+"1")  // shows 42092537170271624

As far as I know, Clipper numeric precision is 15 digits.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From jfl at mafact.com  Wed Oct 24 07:23:00 2007
From: jfl at mafact.com (J. Lefebvre)
Date: Wed Oct 24 07:24:04 2007
Subject: [Harbour] Val() bug ?
Message-ID: <ce4cf5c4.1c8160e.963c442.29@mafact.com>

Hi all, 

Clipper 5.3b result is 42092537170271620 wich is also strange,as I was expecting 
42092537170271621


Regards,


-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Antonio Linares
Sent: Wednesday, October 24, 2007 8:05 AM
To: harbour@harbour-project.org
Subject: [Harbour] Val() bug ?

Is this a Val() bug ?

? VAL("4209253717027162"+"1")  // shows 42092537170271624

Thanks,

Regards,

Antonio


_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Oct 24 07:53:08 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 24 07:53:12 2007
Subject: [Harbour] CHANGELOG: 2007-10-24 09:51 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c81612$Blat.v2.6.2$ead23048$17848c42df44@127.0.0.1>

2007-10-24 09:51 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * debian/copyright
   * doc/license.txt
   * COPYING
     ! Synced COPYING with doc/license.txt
     ! Synced old license list with debian/copyright
     ! Removed one old license file reference from text:
       contrib\libmisc\dates2.c (Only the DateTime() function by Jon Berg)
       Since this copyright clearly refers to doc/license.txt.
       Moreover, it's clearly stated in the text that licenses 
       in contrib can be anything as per defined in the given contrib.
     * Removed 1 char left margin from the text.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Oct 24 09:28:17 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 24 09:28:28 2007
Subject: [Harbour] Ryszard: /samples/pe/license.txt question
Message-ID: <A102A99A-6A81-4CEC-81A3-CE1EDAF141C1@syenar.hu>

Hi Ryszard,

I've found this file: /samples/pe/license.txt in the
repository which you've uploaded, well, in 1999 :)

Question: Is this file meant to cover the license
of PE, or is it just a sample text file used by it?

If it is the license, may I upgrade it to the new
Harbour license?

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Oct 24 13:03:22 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 24 13:03:30 2007
Subject: [Harbour] License filename + Old license
Message-ID: <DD8D89F5-3D6D-4DF2-8257-B16C9FD2660E@syenar.hu>

Hi all,

1) Anyone familiar with naming conventions for license text in OSS  
projects?

I've seen:
/LICENSE
/COPYING
/COPYING.LIB

We also have:
doc/license.txt

It would be best to have it in one place only inside Harbour
(to avoid having several versions unsynced), question: what should
be the filename?

/LICENSE looks the best to me.

Opinions?

2) The other problem is that we still have two essential parts
of core Harbour using the old license. This effectively makes
our exception worthless in most programs, as one of the sources
with old license is philes.c, which contains the widely used
F*() file handling functions. The license holder is Manuel
Ruiz Tienza (mrt joca.es). The files and the copyrights were added
by other developers (me for example), and the copyright owner
was reported again by other developers. A bunch of functions
(HB_OS*()) were added later by other developers. Same goes for
binnum.c I couldn't contact him on any available e-mail addresses.

Any idea how to resolve that?

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Oct 24 15:47:39 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 24 15:47:41 2007
Subject: [Harbour] CHANGELOG: 2007-10-24 17:47 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c81655$Blat.v2.6.2$34d9a36e$a7889ef758c@127.0.0.1>

2007-10-24 17:47 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * debian/control
     ! Fixed pkg dependency to allow building Harbour on some 
       non-Linux ports as per Petr Salinger's request.
       See: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=375426
--
Brgds,
Viktor

From dbtopas at dbtopas.lt  Wed Oct 24 17:10:24 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 24 17:10:18 2007
Subject: [Harbour] Harbour license (ex STRONG TYPED VARIABLES)
In-Reply-To: <20071012200051.GB10596@localhost.localdomain>
References: <20071011211921.GA4812@localhost.localdomain>	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>	<20071012064340.GB6863@localhost.localdomain>	<470FBE90.6020708@dbtopas.lt>
	<20071012200051.GB10596@localhost.localdomain>
Message-ID: <471F7C80.3020103@dbtopas.lt>

Hi,


I'm not lawer and Harbour's license is one more thing difficult to 
understand in Harbour. I hope there are some people on mailing list who 
was involved in licence creation. Can anybody explain it in more detail?


IMPORTANT: My intention is to understand, the idea of authors of Harbour 
licence. I hope it will not make a flame between xHarbour and Harbour!


GPL part is clear. A lot of situations are analyzed in 
http://www.gnu.org/copyleft/gpl.html

 > The exception is that, if you link the Harbour libraries with other
 > files to produce an executable, this does not by itself cause the
 > resulting executable to be covered by the GNU General Public License.

Sounds like LGPL.


 > Your use of that executable is in no way restricted on account of
 > linking the Harbour library code into it.

I just do not understand this...


 >  This exception applies only to the code released by the Harbour
 > Project under the name Harbour.

What does it mean "Harbour Project under the name Harbour"? Can Harbour 
Project with different name exist? Can different project with name 
Harbour exist? If I create a branch of current Harbour code on 
http://sf.net/projects/Harbour, will it be a "Harbour Projcect under the 
name Harbour"? Is [x|y|z]Harbour a "Harbour Projcect under the name 
Harbour"?

In general GPL and LGPL allows branching of the projects as long as 
software if free: open source, etc. This sentence sounds like, branched 
code does not have the rights of original code. It's not very honest.


 > If you copy code from other
 > Harbour Project or Free Software Foundation releases into a copy of
 > Harbour, as the General Public License permits, the exception does
 > not apply to the code that you add in this way.

"Copy code from other Harbour Project into copy of Harbour" - what does 
it mean? If I copy some code from zHarbour into the Harbour, is it pure 
GPL?


 > If you write modifications of your own for Harbour, it is your choice
 > whether to permit this exception to apply to your modifications.

So, my modification of Harbour will be "the same Harbour Project under 
the name of Harbour" or not? If not, then my code is pure GPL, and I can 
not leave exception! Or I can leave exception, but it's GPL anyway, so 
it's nonsense.


> parts of compiler code which
> are still on pure GPL to use license - a more restrictive then
> GPL+harbour exception but which will allow to link compiler library
> with commercial binaries. I think that if we force publishing any
> modifications to compiler code here and including patches to well
> know Harbour source snapshots (also patches for VM and RTL if compiler
> modifications needs modified VM and/or RTLs) with distributed binaries
> then it will be enough for us. 

Isn't LGPL enough in this case? Modified versions of compiler library 
would remain LGPL (open source), but it will be allowed to link with 
commercial binaries.


Best regards,
Mindaugas



From dbtopas at dbtopas.lt  Wed Oct 24 18:00:57 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 24 18:00:27 2007
Subject: [Harbour] ChangeLog 2007-10-24 20:57 UTC+0300 Mindaugas Kavaliauskas
Message-ID: <471F8859.2020003@dbtopas.lt>

2007-10-24 20:57 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * harbour/source/rtl/hbbit.c
     + fixed HB_BITRESET()
From druzus at acn.waw.pl  Wed Oct 24 19:39:09 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 24 19:39:15 2007
Subject: [Harbour] 2007-10-24 21:38 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710241939.l9OJd917005959@31-mo5-4.acn.waw.pl>

2007-10-24 21:38 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/debian/hbdot.1
  * harbour/debian/harbour.1
  * harbour/debian/hbrun.1
    * updated man files

best regards
Przemek
From druzus at acn.waw.pl  Wed Oct 24 19:57:50 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 24 19:57:56 2007
Subject: [Harbour] 2007-10-24 21:57 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710241957.l9OJvocN014783@31-mo5-4.acn.waw.pl>

2007-10-24 21:57 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  - harbour/debian/hbdot.1
  - harbour/debian/harbour.1
  - harbour/debian/hbmake.1
  - harbour/debian/hbtest.1
  - harbour/debian/hbpp.1
  - harbour/debian/hbrun.1
  - harbour/debian/hbdoc.1
  + harbour/doc/man
  + harbour/doc/man/hbdot.1
  + harbour/doc/man/harbour.1
  + harbour/doc/man/hbmake.1
  + harbour/doc/man/hbpp.1
  + harbour/doc/man/hbtest.1
  + harbour/doc/man/hbrun.1
  + harbour/doc/man/hbdoc.1
    * moved man files from ./debian directory to ./doc/man

  * harbour/debian/rules
    * updated for new man files location
  * harbour/bin/pack_src.sh
  * harbour/harbour.spec
    * added man files to RPMs

best regards
Przemek
From harbour.01 at syenar.hu  Wed Oct 24 20:28:18 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 24 20:28:26 2007
Subject: [Harbour] ChangeLog.* remerge
Message-ID: <8EF9A230-3BB5-48B1-AF0F-3619CD72CA90@syenar.hu>

Hi folks,

I'd like to propose to re-merge ChangeLog.* to one
file (ChangeLog) to lessen the clutter in the root dir,
remove the splitting job and most last but not least
to make searching possible simply from inside the
editor/viewer. It's also not common practice to split
changelog like this amongst other OSS projects.

Now with SVN, handling of this larger file doesn't
cause any performance problems as only the delta is
sent through the wire on commit/checkout. Locally
files this of size cannot create any problem for
developers nowadays, since nobody is using DOS anymore.

Any opinions?

Brgds,
Viktor

From teo at windtelsoft.com  Wed Oct 24 20:33:18 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Wed Oct 24 20:33:37 2007
Subject: [Harbour] CHANGELOG: 2007-10-24 01:47 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <01c815cf$Blat.v2.6.2$97885bee$130cdb66d6e0@127.0.0.1>
References: <01c815cf$Blat.v2.6.2$97885bee$130cdb66d6e0@127.0.0.1>
Message-ID: <200710241533.18319.teo@windtelsoft.com>

On Tuesday 23 October 2007 06:51:12 pm Szak?ts Viktor wrote:
> 2007-10-24 01:47 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>    * contrib/libnf/fttext.c
>      % Optimized _writeeol()
>
>    * contrib/libnf/readme.txt
>      ! Old typos fixed.
>
>    * include/hbgtinfo.ch
>    * contrib/xhb/hbcompat.ch
>      ! Some xhb specific MaxRow()/MaxCol() parameter
>        extension macros (also named GTI_*) moved to xhb contrib.
>
>    - bin/bld.cmd
>      - Removed obsolete version of bld.bat (aimed for OS/2).
>        OS/2 users should use bld.bat.
>
>    - bin/bld.sh
>      - Removed obsolete file. Linux/Unix users should use hb*.sh
>        scripts, which are properly working (as opposed to bld.sh).
>
>    * harbour-ce-spec
>    * harbour.spec
>    * doc/howtobld.txt
>      - Removed gharbour and harbour-link compatibility commands
>        (to lessen equivalent user choices and to have every harbour
>        related stuff to start with hb)
>        Pls use hbcmp and hblnk respectively.

2007-10-24 15:24 UTC-0500 Teo Fonrouge (teo/at/windtelsoft/dot/com)
  * bin/hb-func.sh
    * removed not longer needed "gharbour","harbour-link" references
      in build script.


best regards

Teo
From druzus at acn.waw.pl  Wed Oct 24 20:44:27 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 24 20:44:36 2007
Subject: [Harbour] ChangeLog.* remerge
In-Reply-To: <8EF9A230-3BB5-48B1-AF0F-3619CD72CA90@syenar.hu>
References: <8EF9A230-3BB5-48B1-AF0F-3619CD72CA90@syenar.hu>
Message-ID: <20071024204427.GA24180@localhost.localdomain>

On Wed, 24 Oct 2007, Szak?ts Viktor wrote:
[...]
> Any opinions?

I do not have any preferences here.
Do it if you find it useful.

best regards,
Przemek
From i at kevincarmody.com  Wed Oct 24 21:54:07 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Wed Oct 24 21:53:02 2007
Subject: [Harbour] Harbour license (ex STRONG TYPED VARIABLES)
In-Reply-To: <471F7C80.3020103@dbtopas.lt>
References: <20071011211921.GA4812@localhost.localdomain>	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>	<20071012064340.GB6863@localhost.localdomain>	<470FBE90.6020708@dbtopas.lt>	<20071012200051.GB10596@localhost.localdomain>
	<471F7C80.3020103@dbtopas.lt>
Message-ID: <471FBEFF.1010805@kevincarmody.com>

Mindaugas Kavaliauskas wrote:
> I'm not lawer and Harbour's license is one more thing difficult to 
> understand in Harbour. I hope there are some people on mailing list 
> who was involved in licence creation. Can anybody explain it in more 
> detail?
I'm not a lawyer either, and I wasn't involved in the creation of the 
Harbour license, but I think I can answer your questions anyway, since 
the Harbour license is very close to the GPL and LGPL, and I have some 
experience adapting these for my own software.

Disclaimer:  What I express below is my personal opinion only and should 
not be taken as legal advice.  Consult a lawyer if you need legal advice.
> GPL part is clear. A lot of situations are analyzed in 
> http://www.gnu.org/copyleft/gpl.html
>
> > The exception is that, if you link the Harbour libraries with other
> > files to produce an executable, this does not by itself cause the
> > resulting executable to be covered by the GNU General Public License.
>
> Sounds like LGPL.
Yes, I believe so.  I think that the exception that this sentence is 
talking about is the exception that the LGPL makes compared to the GPL. 
See section 1 of the LGPL at http://www.gnu.org/copyleft/lgpl.html and 
compare to section 3 of the GPL at 
http://www.gnu.org/licenses/old-licenses/gpl-2.0.html
> > Your use of that executable is in no way restricted on account of
> > linking the Harbour library code into it.
>
> I just do not understand this...
This seems to me to be a consequence of the exception you mentioned 
above.  If Harbour were governed only by the GPL, then, for every 
application you wrote in Harbour, you would have tell every user about 
Harbour and tell them where to get Harbour source code.  This would be 
inappropriate for a project like Harbour.  Instead, as I understand it, 
if you develop an application in Harbour, you do not have to mention 
Harbour.  You are free to decide whether to inform the user about Harbour.
> >  This exception applies only to the code released by the Harbour
> > Project under the name Harbour.
>
> What does it mean "Harbour Project under the name Harbour"? Can 
> Harbour Project with different name exist? Can different project with 
> name Harbour exist? If I create a branch of current Harbour code on 
> http://sf.net/projects/Harbour, will it be a "Harbour Projcect under 
> the name Harbour"? Is [x|y|z]Harbour a "Harbour Projcect under the 
> name Harbour"?
I do not believe that this sentence is about other software derived from 
Harbour.  I believe that it's about other software that you link into 
your project that is not related to Harbour - for example, a library 
from a Microsoft compiler, which typically carries its own 
restrictions.  I believe that this sentence is saying that the Harbour 
exception does not affect the rights of other software vendors, such as 
Microsoft, to impose their own restrictions.  You are not freed from 
Microsoft's restrictions just because you linked in Harbour.
> > If you copy code from other
> > Harbour Project or Free Software Foundation releases into a copy of
> > Harbour, as the General Public License permits, the exception does
> > not apply to the code that you add in this way.
>
> "Copy code from other Harbour Project into copy of Harbour" - what 
> does it mean? If I copy some code from zHarbour into the Harbour, is 
> it pure GPL?
I believe that this is saying that code from other projects is governed 
by the licenses in those projects, whatever they may be.  You are not 
freed from their licenses just by copying from them into a copy of Harbour.
> > If you write modifications of your own for Harbour, it is your choice
> > whether to permit this exception to apply to your modifications.
>
> So, my modification of Harbour will be "the same Harbour Project under 
> the name of Harbour" or not? If not, then my code is pure GPL, and I 
> can not leave exception! Or I can leave exception, but it's GPL 
> anyway, so it's nonsense.
I believe that this is about LGPL versus GPL.  If you make a modified 
Harbour, it's your choice whether to make it GPL or LGPL, i.e. whether 
to have the "Harbour exception" or not, i.e. whether to require 
developers who use your modified Harbour to tell their users about 
Harbour or not.
>> are still on pure GPL to use license - a more restrictive then
>> GPL+harbour exception but which will allow to link compiler library
>> with commercial binaries. I think that if we force publishing any
>> modifications to compiler code here and including patches to well
>> know Harbour source snapshots (also patches for VM and RTL if compiler
>> modifications needs modified VM and/or RTLs) with distributed binaries
>> then it will be enough for us. 
> parts of compiler code which
>
> Isn't LGPL enough in this case? Modified versions of compiler library 
> would remain LGPL (open source), but it will be allowed to link with 
> commercial binaries.
The passage you quote is not clear to me.  However, as I already 
mentioned, you may link both Harbour and commercial libraries.  If you 
do this, you are bound by all the restrictions of any commercial 
libraries you use.  You are not freed from them just because you linked 
in Harbour.

Kevin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20071024/a98ae38c/attachment-0001.html
From harbour.01 at syenar.hu  Wed Oct 24 22:13:22 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 24 22:13:33 2007
Subject: [Harbour] Harbour license (ex STRONG TYPED VARIABLES)
In-Reply-To: <471FBEFF.1010805@kevincarmody.com>
References: <20071011211921.GA4812@localhost.localdomain>	<3D940722-365C-4D73-B0B7-42EA8D6065C6@syenar.hu>	<20071012064340.GB6863@localhost.localdomain>	<470FBE90.6020708@dbtopas.lt>	<20071012200051.GB10596@localhost.localdomain>
	<471F7C80.3020103@dbtopas.lt> <471FBEFF.1010805@kevincarmody.com>
Message-ID: <03B9F906-DA8E-4F74-8F76-835E9EB529F4@syenar.hu>

Kevin, Mindaugas,

>> So, my modification of Harbour will be "the same Harbour Project  
>> under the name of Harbour" or not? If not, then my code is pure  
>> GPL, and I can not leave exception! Or I can leave exception, but  
>> it's GPL anyway, so it's nonsense.
> I believe that this is about LGPL versus GPL.  If you make a  
> modified Harbour, it's your choice whether to make it GPL or LGPL,  
> i.e. whether to have the "Harbour exception" or not, i.e. whether  
> to require developers who use your modified Harbour to tell their  
> users about Harbour or not.

AFAIK no one can change the license of a given file, except
the copyright owner(s) of the file. So even if you take a file
away to another project (be it xhb or your local one, or
anything else), the license for that source code have to
remain the same.

Brgds,
Viktor

From niki at synel.co.il  Thu Oct 25 06:42:43 2007
From: niki at synel.co.il (Chen Kedem)
Date: Thu Oct 25 06:41:18 2007
Subject: [Harbour] ChangeLog.* remerge
Message-ID: <47203AE3.4775@synel.co.il>

Viktor,

> I'd like to propose to re-merge ChangeLog.* to one file
> :
> ...since nobody is using DOS anymore

I rather not.
The combine size is 2.6MB. I use the Win95 Edit.com to update the
ChangeLog, and it is a bit too much for it.

  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From harbour.01 at syenar.hu  Thu Oct 25 07:20:08 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 25 07:20:18 2007
Subject: [Harbour] ChangeLog.* remerge
In-Reply-To: <47203AE3.4775@synel.co.il>
References: <47203AE3.4775@synel.co.il>
Message-ID: <474F3C77-8FAF-4417-B51B-19F77CB6452B@syenar.hu>

Hi Chen,

Hm, EDIT.COM, you can try using http://setedit.sourceforge.net/.
it's GPL, it can handle large files and is still character based
like EDIT.COM.

I would have recommended Notepad2, but it doesn't support Win95:
http://www.flos-freeware.ch/notepad2.html

Just out of curiosity, what makes you stay with Win95?

Brgds,
Viktor

On 2007.10.25., at 8:42, Chen Kedem wrote:

> Viktor,
>
>> I'd like to propose to re-merge ChangeLog.* to one file
>> :
>> ...since nobody is using DOS anymore
>
> I rather not.
> The combine size is 2.6MB. I use the Win95 Edit.com to update the
> ChangeLog, and it is a bit too much for it.
>
>   Chen.
> ********************************************************************** 
> ************************
> IMPORTANT: The contents of this email and any attachments are  
> confidential. They are intended for the
> named recipient(s) only.
> If you have received this email in error, please notify the system  
> manager or the sender immediately and do
> not disclose the contents to anyone or make copies thereof.
> *** eSafe scanned this email for viruses, vandals, and malicious  
> content. ***
> ********************************************************************** 
> ************************
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Thu Oct 25 07:44:58 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Oct 25 07:45:10 2007
Subject: [Harbour] ChangeLog.* remerge
In-Reply-To: <474F3C77-8FAF-4417-B51B-19F77CB6452B@syenar.hu>
References: <47203AE3.4775@synel.co.il>
	<474F3C77-8FAF-4417-B51B-19F77CB6452B@syenar.hu>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809AB0F@SRV02.deltain.net>

Why not include in hbmake (or in new name tool) a internal editor in Harbour?
http://www.scintilla.org/ is multiplatform, open source and have a license with an exception for commercial application
Xailer use scintilla

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
Sent: Thursday, October 25, 2007 9:20 AM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] ChangeLog.* remerge

Hi Chen,

Hm, EDIT.COM, you can try using http://setedit.sourceforge.net/.
it's GPL, it can handle large files and is still character based
like EDIT.COM.

I would have recommended Notepad2, but it doesn't support Win95:
http://www.flos-freeware.ch/notepad2.html

Just out of curiosity, what makes you stay with Win95?

Brgds,
Viktor

On 2007.10.25., at 8:42, Chen Kedem wrote:

> Viktor,
>
>> I'd like to propose to re-merge ChangeLog.* to one file
>> :
>> ...since nobody is using DOS anymore
>
> I rather not.
> The combine size is 2.6MB. I use the Win95 Edit.com to update the
> ChangeLog, and it is a bit too much for it.
>
>   Chen.
> ********************************************************************** 
> ************************
> IMPORTANT: The contents of this email and any attachments are  
> confidential. They are intended for the
> named recipient(s) only.
> If you have received this email in error, please notify the system  
> manager or the sender immediately and do
> not disclose the contents to anyone or make copies thereof.
> *** eSafe scanned this email for viruses, vandals, and malicious  
> content. ***
> ********************************************************************** 
> ************************
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From miguelangel at marchuet.net  Thu Oct 25 07:41:09 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Thu Oct 25 07:48:40 2007
Subject: [Harbour] STRONG TYPED VARIABLES
In-Reply-To: <20071011211921.GA4812@localhost.localdomain>
References: <20071011211921.GA4812@localhost.localdomain>
Message-ID: <47204895.9000107@marchuet.net>

Visual FoxPro 8.0 Language Reference
NULL as a Value

A null value is different from an empty string, a blank field, or zero. For instance, both EMPTY( ) and ISBLANK( ) return true 
(.T.) when a variable contains blank or an empty string. EMPTY( ) also returns true (.T.) for zero. ISNULL( ) returns false 
(.F.) for these values and both EMPTY( ) and ISBLANK( ) return false (.F.) for null values.

You can use null values with array and field commands like STORE, GATHER, and SCATTER. The following example assigns .NULL. to 
each member of the array aX:

DIMENSION aX[4]
STORE .NULL. TO aX

The null value is not a data type. When you assign .NULL. to a field or variable, the value changes to .NULL. but the data type 
of the field or variable does not change. For example:

STORE 5 TO nX
nX = .NULL.
? TYPE ("nX")  && Data type reported as numeric

Best regards,
Miguel Angel Marchuet
From harbour.01 at syenar.hu  Thu Oct 25 07:50:33 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 25 07:50:42 2007
Subject: [Harbour] 2007-10-23 20:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20071024010813.GC9409@localhost.localdomain>
References: <200710231828.l9NISLMn026405@31-mo5-4.acn.waw.pl>
	<4F5A20DF-5C78-4B25-9D77-8F2573FBFED4@syenar.hu>
	<20071023205122.GA3944@localhost.localdomain>
	<FF398E32-9AA0-4A63-BF32-655DCBE59061@syenar.hu>
	<20071023230841.GA9018@localhost.localdomain>
	<1C521F82-DE9F-486B-8376-1390B6A5FAA7@syenar.hu>
	<20071024010813.GC9409@localhost.localdomain>
Message-ID: <8E71DAE2-CA23-4E59-A7FC-6AFD023DAE9A@syenar.hu>

Hi Przemek,

>> bldcmncf.sh (?)
>   convert common.mak to GNU make format - it's used by make_gcc.sh

Can we integrate it with make_gcc.sh?

>> hbgtmk.sh (?)
>
> # This script checks you have all tools to build Harbour binaries
> # installed then takes current Harbour sources from SourceForge SVN
> # repository and build binary RPMs at your local host
>
> The easiest way to start using Harbour in new installed RPM
> based Linux distribution. It's enough to run this scripts wait
> few minutes and you have ready to install binaries in RPM packages
> compiled with the exact libraries you have.

Hm, I think it would be easier if the download function
would be an optional parameter for make_rpm.sh, and
make_rpm.sh would always look for installed packages first.
Also, probably make_rpmce.sh would need these additions now.
Does this make sense?

>> make_tgz.sh (build Harbour from source + create binary .tgz.sh
>> installer)
>> make_xcemgw.sh (-> make_gnu.sh)
>
> build from source linux Harbour binaries for creating WinCE
> application in Linux box

I think this should be named make_xmingwce.sh (to follow make_rpmce.sh)

>> make_xmingw.sh (-> make_gnu.sh)
>
> build from source linux Harbour binaries for creating Win9x/NT/2K/ 
> XP/...
> application in Linux box
>
>> bin\bld.sh (build final application) (OBSOLETE)
>
> yes, can be removed.

Done.

>> bin\hb-func.sh (?)
>
> set of helper functions used in build process, f.e. hb* scripts
> generator.
>
>> bin\hb-mkslib.sh (create shared libs from static ones) (this is
>> Harbour build related)
>> bin\pack_src.sh (create source package .tar.gz) (this is package
>> related)
>> bin\postinst.sh (?)
> and postinst.bat
>
> Both are executed in the end of build process to finish some  
> operations
> which cannot be easy done directly in make files. F.e. they create
> shared libraries (.so/.dll/.dyn/...) from just compiled static ones,
> generate hb* scripts, compile some alternative modules like fmstat  
> library,
> etc.

Ok, thanks. (postinst is a bit misleading IMO, because the files
are always called at the end of the build process, not just on
"make install" as the name would suggest)

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 25 09:04:11 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 25 09:04:22 2007
Subject: [Harbour] ChangeLog.* remerge
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809AB0F@SRV02.deltain.net>
References: <47203AE3.4775@synel.co.il>
	<474F3C77-8FAF-4417-B51B-19F77CB6452B@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03809AB0F@SRV02.deltain.net>
Message-ID: <88E69E40-2F60-4A2F-AC41-22105E941837@syenar.hu>

> Why not include in hbmake (or in new name tool) a internal editor  
> in Harbour?
> http://www.scintilla.org/ is multiplatform, open source and have a  
> license with an exception for commercial application
> Xailer use scintilla

notepad2 uses scintilla.

Such a simple text editor could be created as a simple
contrib (HBEDIT) using MEMOEDIT(). Or we have a program
named PE in /samples/pe/. (I plan to move this inside
contrib later)

A scintilla API for Harbour (in contrib) might be
great, if scintilla is user interface independent.

Another place where this may be good is to develop
a visual interface for Harbour, but that should be IMO
done as a separate project.

Brgds,
Viktor

>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org [mailto:harbour- 
> bounces@harbour-project.org] On Behalf Of Szak?ts Viktor
> Sent: Thursday, October 25, 2007 9:20 AM
> To: Harbour Project Main Developer List.
> Subject: Re: [Harbour] ChangeLog.* remerge
>
> Hi Chen,
>
> Hm, EDIT.COM, you can try using http://setedit.sourceforge.net/.
> it's GPL, it can handle large files and is still character based
> like EDIT.COM.
>
> I would have recommended Notepad2, but it doesn't support Win95:
> http://www.flos-freeware.ch/notepad2.html
>
> Just out of curiosity, what makes you stay with Win95?
>
> Brgds,
> Viktor
>
> On 2007.10.25., at 8:42, Chen Kedem wrote:
>
>> Viktor,
>>
>>> I'd like to propose to re-merge ChangeLog.* to one file
>>> :
>>> ...since nobody is using DOS anymore
>>
>> I rather not.
>> The combine size is 2.6MB. I use the Win95 Edit.com to update the
>> ChangeLog, and it is a bit too much for it.
>>
>>   Chen.
>> ********************************************************************* 
>> *
>> ************************
>> IMPORTANT: The contents of this email and any attachments are
>> confidential. They are intended for the
>> named recipient(s) only.
>> If you have received this email in error, please notify the system
>> manager or the sender immediately and do
>> not disclose the contents to anyone or make copies thereof.
>> *** eSafe scanned this email for viruses, vandals, and malicious
>> content. ***
>> ********************************************************************* 
>> *
>> ************************
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Thu Oct 25 11:06:56 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 25 11:07:04 2007
Subject: [Harbour] 2007-10-23 20:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <8E71DAE2-CA23-4E59-A7FC-6AFD023DAE9A@syenar.hu>
References: <200710231828.l9NISLMn026405@31-mo5-4.acn.waw.pl>
	<4F5A20DF-5C78-4B25-9D77-8F2573FBFED4@syenar.hu>
	<20071023205122.GA3944@localhost.localdomain>
	<FF398E32-9AA0-4A63-BF32-655DCBE59061@syenar.hu>
	<20071023230841.GA9018@localhost.localdomain>
	<1C521F82-DE9F-486B-8376-1390B6A5FAA7@syenar.hu>
	<20071024010813.GC9409@localhost.localdomain>
	<8E71DAE2-CA23-4E59-A7FC-6AFD023DAE9A@syenar.hu>
Message-ID: <20071025110656.GA31354@localhost.localdomain>

On Thu, 25 Oct 2007, Szak?ts Viktor wrote:
> >>bldcmncf.sh (?)
> >  convert common.mak to GNU make format - it's used by make_gcc.sh
> Can we integrate it with make_gcc.sh?

Yes, but when I'm working on some modifications in common.mak then
separate scripts like bldcmncf.sh which immediatelly generate common.ce
is easier to use for me when I want to check if everything is working.
I also do not need to run make_gcc.sh. I can if I want to automatically
set some environment variables but if I do not need such functionality
or even I cannot use it because I intentionally want to hack some things
then can run bldcmncf.sh and later make -f makefile.gc
In short words it will reduce some functionality but it's not a big
problem for me because for my own use I can create such bldcmncf.sh
in few seconds copping it from make_gcc.sh - I can even add an option
to make_gcc.sh like 'gencf' which will only generate new common.ce
to keep current functionality of bldcmncf.sh - I can make such
modifications if no one will find some reasons to not make them.

> >>hbgtmk.sh (?)
> ># This script checks you have all tools to build Harbour binaries
> ># installed then takes current Harbour sources from SourceForge SVN
> ># repository and build binary RPMs at your local host
> >The easiest way to start using Harbour in new installed RPM
> >based Linux distribution. It's enough to run this scripts wait
> >few minutes and you have ready to install binaries in RPM packages
> >compiled with the exact libraries you have.
> 
> Hm, I think it would be easier if the download function
> would be an optional parameter for make_rpm.sh, and
> make_rpm.sh would always look for installed packages first.
> Also, probably make_rpmce.sh would need these additions now.
> Does this make sense?

My intention was creating as small as possible script which can be
distributed outside harbour repository, f.e. it can be located on
Harbour WWW page so it will be enough to download it from known
location and run and in new Linux box I have RPMs ready to use.
I intentionally didn't replicate whole make_rpm.sh code inside
but only added the minium code.

BTW now when we use SVN it's even possible to simply make:

curl https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/\
trunk/harbour/hbgtmk.sh > /tmp/hbgtmk.sh && sh /tmp/hbgtmk.sh

and you have Harbour binary RPMs ready to install in you new Linux box.
If you preffer BETA3 then you can use:

curl https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/\
tags/beta3/harbour/hbgtmk.sh > /tmp/hbgtmk.sh && sh /tmp/hbgtmk.sh

> >>make_tgz.sh (build Harbour from source + create binary .tgz.sh
> >>installer)
> >>make_xcemgw.sh (-> make_gnu.sh)
> >build from source linux Harbour binaries for creating WinCE
> >application in Linux box
> I think this should be named make_xmingwce.sh (to follow make_rpmce.sh)

I used 'x' to mark 'cross' compilation and cemgw as used HB_COMPILER value.
IMHO it's clear but if you are finding make_xmingwce.sh better then please
change it.

> >>bin\postinst.sh (?)
> >and postinst.bat
> >Both are executed in the end of build process to finish some  
> >operations
> >which cannot be easy done directly in make files. F.e. they create
> >shared libraries (.so/.dll/.dyn/...) from just compiled static ones,
> >generate hb* scripts, compile some alternative modules like fmstat  
> >library,
> >etc.
> Ok, thanks. (postinst is a bit misleading IMO, because the files
> are always called at the end of the build process, not just on
> "make install" as the name would suggest)

Sorry, I was not clear enough. These scripts are executed at the end of
'make install' command but for me 'make install' is also part of build
process.

best regards,
Przemek
From myorg63 at mail.ru  Thu Oct 25 11:29:34 2007
From: myorg63 at mail.ru (Petr Chornyj)
Date: Thu Oct 25 11:29:37 2007
Subject: [Harbour] ChangeLog.* remerge
In-Reply-To: <88E69E40-2F60-4A2F-AC41-22105E941837@syenar.hu>
References: <47203AE3.4775@synel.co.il>
	<474F3C77-8FAF-4417-B51B-19F77CB6452B@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03809AB0F@SRV02.deltain.net>
	<88E69E40-2F60-4A2F-AC41-22105E941837@syenar.hu>
Message-ID: <13404858.post@talk.nabble.com>


Xedit from Visual xHb also use Scintilla.
Massimo, if you really want Scintilla, why you not use SciEd, Notepad++ or
other Scintilla based editors. Also as I know, Xedit from Xailer is free for
download.


Szak?ts Viktor wrote:
> 
> A scintilla API for Harbour (in contrib) might be
> great, if scintilla is user interface independent.
> 
Scintilla is great component ( for me :). I use this with MiniGUI Ex, but I
can not say  "scintilla is user interface independent". Rather vice versa.


---
Petr




-- 
View this message in context: http://www.nabble.com/ChangeLog.*-remerge-tf4688919.html#a13404858
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From devlist.harbour at gmail.com  Thu Oct 25 11:52:05 2007
From: devlist.harbour at gmail.com (Patrick Mast, xHarbour.com)
Date: Thu Oct 25 11:52:23 2007
Subject: [Harbour] ChangeLog.* remerge
In-Reply-To: <13404858.post@talk.nabble.com>
References: <47203AE3.4775@synel.co.il>
	<474F3C77-8FAF-4417-B51B-19F77CB6452B@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03809AB0F@SRV02.deltain.net>
	<88E69E40-2F60-4A2F-AC41-22105E941837@syenar.hu>
	<13404858.post@talk.nabble.com>
Message-ID: <2E0A2338-8DF3-4AAD-9010-0B6E7F44A2B6@GMail.com>

Hello,

> Xedit from Visual xHb also use Scintilla.

I think this should read:
"Xedit from Xailer also use Scintilla."

Visual xHarbour does not use Scintilla.

;-)

Patrick
From niki at synel.co.il  Thu Oct 25 11:42:05 2007
From: niki at synel.co.il (Chen Kedem)
Date: Thu Oct 25 11:59:54 2007
Subject: [Harbour] ChangeLog.* remerge
References: <47203AE3.4775@synel.co.il>
Message-ID: <4720810D.13B7@synel.co.il>

Viktor,

> Just out of curiosity, what makes you stay with Win95?

Because I'm a dinosaur :)

Actually, I now remember that I don't use my Win95 station for
Harbour anymore, since I could not run SVN on it. I use my WinNT
station (which of course is yet another anachronism). Edit.com of
the NT can't handle such a big file (the Win2K one can), but the
standard Notepad can (in Win95 it could not).

So yes, I can live with that if this is a must.


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From soporte at dsgsoftware.com  Thu Oct 25 12:00:08 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Thu Oct 25 12:00:55 2007
Subject: [Harbour] Changes in clipdefs.h
Message-ID: <002a01c816fe$ad425950$1700000a@PcJuanxp>

Hi Viktor,

I have a FWH C module that it doesn't compile after this changelog :

2007-10-24 03:54 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * include/vm.api
   * include/hbapi.h
   * include/clipdefs.h
   * common.mak
   * source/vm/Makefile
   + source/vm/vm.c
     + Added skeletons for CA-Cl*pper-like C-level VM API.
       Types slightly modified for portability and to support
       larger memory than C5x.

It shows :

c:\utl\bcc55\bin\bcc32.exe -c -Iinclude;c:\utl\harbour\include;c:\utl\harbour\contrib\xhb;c:\utl\bcc55\include;c:\utl\fwh705\include 
 -D__HARBOUR__;HB_API_MACROS -osource\hobj\ClrChoos.obj 
source\hobj\ClrChoos.c
Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
source\hobj\ClrChoos.c:
Error E2238 c:\utl\harbour\include\clipdefs.h 110: Multiple declaration for 
'HANDLE'
Error E2344 c:\utl\bcc55\include\winnt.h 283: Earlier declaration of 
'HANDLE'
*** 2 errors in Compile ***

I don't know if it will help (there're FWH modules) but this C module 
contains :

#include <WinTen.h>
#include <Windows.h>
#include <CommDlg.h>
#include <ClipApi.h>

Best regards
Juan 

From iozuniga at ozs.com  Thu Oct 25 11:38:00 2007
From: iozuniga at ozs.com (=?iso-8859-1?Q?Ignacio_Ortiz_de_Z=FA=F1iga?=)
Date: Thu Oct 25 12:06:06 2007
Subject: [Harbour] ChangeLog.* remerge
Message-ID: <a06fe596.1c816fb.ef7237.1d2d@ozs.com>

Petr, 

Xedit is af free [x]Harbour workbench tool from Xailer team, and yes it uses Scintilla. I really do not know if xHarbour.com guys have a tool with that same name. 

Regards, 

Ignacio Ortiz de Z??iga
www.xailer.com

-----Mensaje original-----
De: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] En nombre de Petr Chornyj
Enviado el: jueves, 25 de octubre de 2007 13:30
Para: harbour@harbour-project.org
Asunto: Re: [Harbour] ChangeLog.* remerge


Xedit from Visual xHb also use Scintilla.
Massimo, if you really want Scintilla, why you not use SciEd, Notepad++ or other Scintilla based editors. Also as I know, Xedit from Xailer is free for download.


Szak?ts Viktor wrote:
> 
> A scintilla API for Harbour (in contrib) might be great, if scintilla 
> is user interface independent.
> 
Scintilla is great component ( for me :). I use this with MiniGUI Ex, but I can not say  "scintilla is user interface independent". Rather vice versa.


---
Petr




--
View this message in context: http://www.nabble.com/ChangeLog.*-remerge-tf4688919.html#a13404858
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


From harbour.01 at syenar.hu  Thu Oct 25 12:28:15 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 25 12:28:24 2007
Subject: [Harbour] ChangeLog.* remerge
In-Reply-To: <4720810D.13B7@synel.co.il>
References: <47203AE3.4775@synel.co.il> <4720810D.13B7@synel.co.il>
Message-ID: <5543FCA2-0DDA-499F-A3BE-7290BA974E53@syenar.hu>

>> Just out of curiosity, what makes you stay with Win95?
>
> Because I'm a dinosaur :)

:)

You can run Win95 in a virtual machine now on every OS if you like :)

> Actually, I now remember that I don't use my Win95 station for
> Harbour anymore, since I could not run SVN on it. I use my WinNT

I liked NT (4.0 that is), I used when we started Harbour.

> station (which of course is yet another anachronism). Edit.com of
> the NT can't handle such a big file (the Win2K one can), but the
> standard Notepad can (in Win95 it could not).

Try Notepad2 then, it's much better than notepad, small,
free, and you need just one .exe, no install. Can handle UTF8
too.

There is also VI/VIM for Win32, but it's a real pain to use
(for me at least). Not to mention EMACS.

> So yes, I can live with that if this is a must.

Okey, thanks.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 25 12:32:02 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 25 12:32:02 2007
Subject: [Harbour] CHANGELOG: 2007-10-25 14:30 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c81703$Blat.v2.6.2$0b80da56$17909ed2fa56@127.0.0.1>

2007-10-25 14:30 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   - ChangeLog.001
   - ChangeLog.002
   - ChangeLog.003
   - ChangeLog.004
   - ChangeLog.005
   - ChangeLog.006
   - ChangeLog.007
   - ChangeLog.008
   - ChangeLog.009
   - ChangeLog.010
   - ChangeLog.011
   - ChangeLog.012
   - ChangeLog.013
   - ChangeLog.014
   - ChangeLog.015
   - ChangeLog.016
   - ChangeLog.017
   - ChangeLog.018
   - ChangeLog.019
   * ChangeLog
     + Re-merged changelog into one file. Now searching is easy, 
       clutter is less, performance should stay the same.
--
Brgds,
Viktor

From myorg63 at mail.ru  Thu Oct 25 12:46:28 2007
From: myorg63 at mail.ru (Petr Chornyj)
Date: Thu Oct 25 12:46:32 2007
Subject: [Harbour] ChangeLog.* remerge
In-Reply-To: <2E0A2338-8DF3-4AAD-9010-0B6E7F44A2B6@GMail.com>
References: <47203AE3.4775@synel.co.il>
	<474F3C77-8FAF-4417-B51B-19F77CB6452B@syenar.hu>
	<AFB948164110ED43B5EB849E8DEEF03809AB0F@SRV02.deltain.net>
	<88E69E40-2F60-4A2F-AC41-22105E941837@syenar.hu>
	<13404858.post@talk.nabble.com>
	<2E0A2338-8DF3-4AAD-9010-0B6E7F44A2B6@GMail.com>
Message-ID: <13406052.post@talk.nabble.com>




Patrick Mast, xHarbour.com wrote:
> 
> 
> I think this should read:
> "Xedit from Xailer also use Scintilla."
> 
> 
Yes,
Xedit from Xailer ( not Visual xHb ) also use Scintilla.

Sorry,
Petr 



-- 
View this message in context: http://www.nabble.com/ChangeLog.*-remerge-tf4688919.html#a13406052
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From e.m.giordano at emagsoftware.it  Thu Oct 25 12:46:39 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Thu Oct 25 12:46:44 2007
Subject: [Harbour] Changes in clipdefs.h
References: <002a01c816fe$ad425950$1700000a@PcJuanxp>
Message-ID: <02aa01c81705$16712bd0$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Juan G?lvez" <soporte@dsgsoftware.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: gioved? 25 ottobre 2007 14.00
Oggetto: [Harbour] Changes in clipdefs.h


> Error E2238 c:\utl\harbour\include\clipdefs.h 110: Multiple declaration 
> for 'HANDLE'
> Error E2344 c:\utl\bcc55\include\winnt.h 283: Earlier declaration of 
> 'HANDLE'
> *** 2 errors in Compile ***

I confirm the problem.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Thu Oct 25 13:11:20 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 25 13:11:42 2007
Subject: [Harbour] 2007-10-23 20:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20071025110656.GA31354@localhost.localdomain>
References: <200710231828.l9NISLMn026405@31-mo5-4.acn.waw.pl>
	<4F5A20DF-5C78-4B25-9D77-8F2573FBFED4@syenar.hu>
	<20071023205122.GA3944@localhost.localdomain>
	<FF398E32-9AA0-4A63-BF32-655DCBE59061@syenar.hu>
	<20071023230841.GA9018@localhost.localdomain>
	<1C521F82-DE9F-486B-8376-1390B6A5FAA7@syenar.hu>
	<20071024010813.GC9409@localhost.localdomain>
	<8E71DAE2-CA23-4E59-A7FC-6AFD023DAE9A@syenar.hu>
	<20071025110656.GA31354@localhost.localdomain>
Message-ID: <8ED17C6C-D4FC-4FBE-9D26-DC927104FD8C@syenar.hu>

> On Thu, 25 Oct 2007, Szak?ts Viktor wrote:
>>>> bldcmncf.sh (?)
>>>  convert common.mak to GNU make format - it's used by make_gcc.sh
>> Can we integrate it with make_gcc.sh?
>
> Yes, but when I'm working on some modifications in common.mak then
> separate scripts like bldcmncf.sh which immediatelly generate  
> common.ce
> is easier to use for me when I want to check if everything is working.
> I also do not need to run make_gcc.sh. I can if I want to  
> automatically
> set some environment variables but if I do not need such functionality
> or even I cannot use it because I intentionally want to hack some  
> things
> then can run bldcmncf.sh and later make -f makefile.gc
> In short words it will reduce some functionality but it's not a big
> problem for me because for my own use I can create such bldcmncf.sh
> in few seconds copping it from make_gcc.sh - I can even add an option
> to make_gcc.sh like 'gencf' which will only generate new common.ce
> to keep current functionality of bldcmncf.sh - I can make such
> modifications if no one will find some reasons to not make them.

Okey and thanks.

>
>>>> hbgtmk.sh (?)
>>> # This script checks you have all tools to build Harbour binaries
>>> # installed then takes current Harbour sources from SourceForge SVN
>>> # repository and build binary RPMs at your local host
>>> The easiest way to start using Harbour in new installed RPM
>>> based Linux distribution. It's enough to run this scripts wait
>>> few minutes and you have ready to install binaries in RPM packages
>>> compiled with the exact libraries you have.
>>
>> Hm, I think it would be easier if the download function
>> would be an optional parameter for make_rpm.sh, and
>> make_rpm.sh would always look for installed packages first.
>> Also, probably make_rpmce.sh would need these additions now.
>> Does this make sense?
>
> My intention was creating as small as possible script which can be
> distributed outside harbour repository, f.e. it can be located on
> Harbour WWW page so it will be enough to download it from known
> location and run and in new Linux box I have RPMs ready to use.
> I intentionally didn't replicate whole make_rpm.sh code inside
> but only added the minium code.
>
> BTW now when we use SVN it's even possible to simply make:
>
> curl https://harbour-project.svn.sourceforge.net/svnroot/harbour- 
> project/\
> trunk/harbour/hbgtmk.sh > /tmp/hbgtmk.sh && sh /tmp/hbgtmk.sh
>
> and you have Harbour binary RPMs ready to install in you new Linux  
> box.
> If you preffer BETA3 then you can use:
>
> curl https://harbour-project.svn.sourceforge.net/svnroot/harbour- 
> project/\
> tags/beta3/harbour/hbgtmk.sh > /tmp/hbgtmk.sh && sh /tmp/hbgtmk.sh

Yes, but the problem with this is that the downloader script
is actually part of the stuff to be downloaded. So I'd find it
cleaner if we'd publish the normal and standard way to get the
whole SVN tree (release or beta), and after that, everyone could
decide which script to run.

IMO the above curl command is not something anyone would guess
by him/herself.

An SVN CO command will do for everyone, and the rest will download
the .tgz source package (release, beta or nightly) directly anyway.

>>>> make_tgz.sh (build Harbour from source + create binary .tgz.sh
>>>> installer)
>>>> make_xcemgw.sh (-> make_gnu.sh)
>>> build from source linux Harbour binaries for creating WinCE
>>> application in Linux box
>> I think this should be named make_xmingwce.sh (to follow  
>> make_rpmce.sh)
>
> I used 'x' to mark 'cross' compilation and cemgw as used  
> HB_COMPILER value.
> IMHO it's clear but if you are finding make_xmingwce.sh better then  
> please
> change it.

Okey. I got the "x".

>>>> bin\postinst.sh (?)
>>> and postinst.bat
>>> Both are executed in the end of build process to finish some
>>> operations
>>> which cannot be easy done directly in make files. F.e. they create
>>> shared libraries (.so/.dll/.dyn/...) from just compiled static ones,
>>> generate hb* scripts, compile some alternative modules like fmstat
>>> library,
>>> etc.
>> Ok, thanks. (postinst is a bit misleading IMO, because the files
>> are always called at the end of the build process, not just on
>> "make install" as the name would suggest)
>
> Sorry, I was not clear enough. These scripts are executed at the  
> end of
> 'make install' command but for me 'make install' is also part of build
> process.

Maybe I'm wrong, but to me it seemed that a simple "make" (= "make all")
will trigger these scripts.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 25 13:29:42 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 25 13:29:54 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <002a01c816fe$ad425950$1700000a@PcJuanxp>
References: <002a01c816fe$ad425950$1700000a@PcJuanxp>
Message-ID: <143046DF-15A6-4075-95EA-A7B97DA712F4@syenar.hu>

Hi Juan, Enrico,

Okey, the only change affecting this is line 110 of /include/clipdefs.h
where HANDLE was declared incorrectly previously, apparently to make
Windows happy, and now I reset it to a compatible value. In CA-Clipper
a HANDLE was an USHORT, in Harbour it is an ULONG (HB_VMHANDLE), in
Windows it's 'void *'.

So it seems that legacy C VM API code won't compile when windows.h
is also included.

Pls try to change line 110 to these:
#ifndef HANDLE
    #define HANDLE HB_VMHANDLE
#endif

Brgds,
Viktor

On 2007.10.25., at 14:00, Juan G?lvez wrote:

> Hi Viktor,
>
> I have a FWH C module that it doesn't compile after this changelog :
>
> 2007-10-24 03:54 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>   * include/vm.api
>   * include/hbapi.h
>   * include/clipdefs.h
>   * common.mak
>   * source/vm/Makefile
>   + source/vm/vm.c
>     + Added skeletons for CA-Cl*pper-like C-level VM API.
>       Types slightly modified for portability and to support
>       larger memory than C5x.
>
> It shows :
>
> c:\utl\bcc55\bin\bcc32.exe -c -Iinclude;c:\utl\harbour\include;c: 
> \utl\harbour\contrib\xhb;c:\utl\bcc55\include;c:\utl\fwh705\include  
> -D__HARBOUR__;HB_API_MACROS -osource\hobj\ClrChoos.obj source\hobj 
> \ClrChoos.c
> Borland C++ 5.5.1 for Win32 Copyright (c) 1993, 2000 Borland
> source\hobj\ClrChoos.c:
> Error E2238 c:\utl\harbour\include\clipdefs.h 110: Multiple  
> declaration for 'HANDLE'
> Error E2344 c:\utl\bcc55\include\winnt.h 283: Earlier declaration  
> of 'HANDLE'
> *** 2 errors in Compile ***
>
> I don't know if it will help (there're FWH modules) but this C  
> module contains :
>
> #include <WinTen.h>
> #include <Windows.h>
> #include <CommDlg.h>
> #include <ClipApi.h>
>
> Best regards
> Juan
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Thu Oct 25 14:07:02 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 25 14:07:08 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <143046DF-15A6-4075-95EA-A7B97DA712F4@syenar.hu>
References: <002a01c816fe$ad425950$1700000a@PcJuanxp>
	<143046DF-15A6-4075-95EA-A7B97DA712F4@syenar.hu>
Message-ID: <20071025140702.GA2703@localhost.localdomain>

On Thu, 25 Oct 2007, Szak?ts Viktor wrote:
> Okey, the only change affecting this is line 110 of /include/clipdefs.h
> where HANDLE was declared incorrectly previously, apparently to make
> Windows happy, and now I reset it to a compatible value. In CA-Clipper
> a HANDLE was an USHORT, in Harbour it is an ULONG (HB_VMHANDLE), in
> Windows it's 'void *'.

Please change HB_VMHANDLE to 'void *'
It's much more flexible type because you can keep memory address and
integer values inside.
Casting memory address to ULONG is a bug on some platforms and cannot
be used. F.e. in XP64 ULONG is 32 bit integer but HANDLE/PVOID is 64 bit
integer. Please remeber about it when you port code from xHarbour.
F.e. in contrib/win32/w32_prn.c all hb_retnl()/hb_parnl() used for windows
handlers should be replaced by hb_retptr()/hb_parptr(). But if you have
more time then by hb_retptrGC()/hb_parptrGC() with auto destructors what
will give two important features:
    1. validation if given pointer is correct pointer to requested
       structure
    2. resources will be automatically freed when all .prg variables
       will holding pointer to some allocated structure will be cleared
       what will protect against memory leaks

> So it seems that legacy C VM API code won't compile when windows.h
> is also included.
> Pls try to change line 110 to these:
> #ifndef HANDLE
>    #define HANDLE HB_VMHANDLE
> #endif

It will not help but if you will change HB_VMHANDLE to 'void *' then
you can simply put:
    typedef HB_VMHANDLE HANDLE;
few lines above in:
    #if !(defined(HB_OS_WIN_32) && defined(HB_OS_WIN_32_USED))

BTW maybe it's time to clear HB_OS_WIN_32 build and remove all
    HB_OS_WIN_32_USED - IMO it's ugly hack and whole core code
    should be ready to work with HB_OS_WIN_32_USED - now we only
    have problems each time we try to move some functions between
    files.

best regards,
Przemek
From soporte at dsgsoftware.com  Thu Oct 25 14:13:48 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Thu Oct 25 14:14:36 2007
Subject: [Harbour] Changes in clipdefs.h
References: <002a01c816fe$ad425950$1700000a@PcJuanxp>
	<143046DF-15A6-4075-95EA-A7B97DA712F4@syenar.hu>
Message-ID: <002a01c81711$5a0b9310$1700000a@PcJuanxp>

Hi Viktor,

>
Pls try to change line 110 to these:
#ifndef HANDLE
    #define HANDLE HB_VMHANDLE
#endif
>

Then I get some issues in other places :

Error E2342 source\hobj\Comm.c 22: Type mismatch in parameter 'hObject' 
(wanted 'void *', got 'unsigned long') in function HB_FUN_CLOSECOMM

What do you think about this solution ( lines 103 ...) :

#if !(defined(HB_OS_WIN_32) && defined(HB_OS_WIN_32_USED))
   typedef void *  FARP;
   typedef FARP *  FARPP;
   typedef FARP    VOIDP;
   typedef FARP    PVOID;
   typedef HB_VMHANDLE HANDLE;
#else
   typedef void *  HANDLE;
#endif

Best regards
Juan 

From soporte at dsgsoftware.com  Thu Oct 25 14:52:33 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Thu Oct 25 14:54:54 2007
Subject: [Harbour] BCC Link error
Message-ID: <001101c81716$b1c44b10$1700000a@PcJuanxp>

Hi all,

With recent SVN changes (I don't know which one), I get :

 c:\utl\bcc55\bin\ilink32.exe -Gn -q -t -aa -Tpe -s -jobjh32\develop\CONTAPro 
 -Iobjh32\develop\CONTAPro -Lc:\utl\bcc55\lib @MAKE0000.@@@
Error: Unresolved external '_HB_FUN_HB_GT_WIN' referenced from 
C:\UTL\HARBOUR\LIB\RTL.LIB|gtsys
Info: Link time = 0.34 seconds

What do I have to change ?

Many thanks
Juan 

From druzus at acn.waw.pl  Thu Oct 25 15:12:52 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Oct 25 15:12:59 2007
Subject: [Harbour] 2007-10-23 20:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <8ED17C6C-D4FC-4FBE-9D26-DC927104FD8C@syenar.hu>
References: <200710231828.l9NISLMn026405@31-mo5-4.acn.waw.pl>
	<4F5A20DF-5C78-4B25-9D77-8F2573FBFED4@syenar.hu>
	<20071023205122.GA3944@localhost.localdomain>
	<FF398E32-9AA0-4A63-BF32-655DCBE59061@syenar.hu>
	<20071023230841.GA9018@localhost.localdomain>
	<1C521F82-DE9F-486B-8376-1390B6A5FAA7@syenar.hu>
	<20071024010813.GC9409@localhost.localdomain>
	<8E71DAE2-CA23-4E59-A7FC-6AFD023DAE9A@syenar.hu>
	<20071025110656.GA31354@localhost.localdomain>
	<8ED17C6C-D4FC-4FBE-9D26-DC927104FD8C@syenar.hu>
Message-ID: <20071025151252.GA3556@localhost.localdomain>

On Thu, 25 Oct 2007, Szak?ts Viktor wrote:
> >My intention was creating as small as possible script which can be
> >distributed outside harbour repository, f.e. it can be located on
> >Harbour WWW page so it will be enough to download it from known
> >location and run and in new Linux box I have RPMs ready to use.
> >I intentionally didn't replicate whole make_rpm.sh code inside
> >but only added the minium code.
> >
> >BTW now when we use SVN it's even possible to simply make:
> >
> >curl https://harbour-project.svn.sourceforge.net/svnroot/harbour- 
> >project/\
> >trunk/harbour/hbgtmk.sh > /tmp/hbgtmk.sh && sh /tmp/hbgtmk.sh
> >
> >and you have Harbour binary RPMs ready to install in you new Linux  
> >box.
> >If you preffer BETA3 then you can use:
> >
> >curl https://harbour-project.svn.sourceforge.net/svnroot/harbour- 
> >project/\
> >tags/beta3/harbour/hbgtmk.sh > /tmp/hbgtmk.sh && sh /tmp/hbgtmk.sh
> 
> Yes, but the problem with this is that the downloader script
> is actually part of the stuff to be downloaded.

Do you know better place when they can be located which will allow
easy update for each of us and later synchronization by all hosts
which want to keep their copy?

> So I'd find it
> cleaner if we'd publish the normal and standard way to get the
> whole SVN tree (release or beta), and after that, everyone could
> decide which script to run.

I do not understand what is uncleaned with the above. The main
difference is that now when peope asked about starting using Harbour
I simply suggest them to run one small script instead of sending
long description.

> IMO the above curl command is not something anyone would guess
> by him/herself.
> An SVN CO command will do for everyone

How 'SVN CO' will guess the url with harbour repository?
You will need:

svn co https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/\
trunk/harbour

so there is only one difference:
    /hbgtmk.sh
at the end of url. In summary I do not agree it's more complicated,
for sure not for useres which used it.

> Maybe I'm wrong, but to me it seemed that a simple "make" (= "make all")
> will trigger these scripts.

I do not think so - just check.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Oct 25 15:13:12 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 25 15:13:19 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <20071025140702.GA2703@localhost.localdomain>
References: <002a01c816fe$ad425950$1700000a@PcJuanxp>
	<143046DF-15A6-4075-95EA-A7B97DA712F4@syenar.hu>
	<20071025140702.GA2703@localhost.localdomain>
Message-ID: <2C32A4D4-A433-4658-A8AC-5528909BEFFC@syenar.hu>

> Please change HB_VMHANDLE to 'void *'
> It's much more flexible type because you can keep memory address and
> integer values inside.
> Casting memory address to ULONG is a bug on some platforms and cannot
> be used. F.e. in XP64 ULONG is 32 bit integer but HANDLE/PVOID is  
> 64 bit
> integer. Please remeber about it when you port code from xHarbour.
> F.e. in contrib/win32/w32_prn.c all hb_retnl()/hb_parnl() used for  
> windows
> handlers should be replaced by hb_retptr()/hb_parptr(). But if you  
> have
> more time then by hb_retptrGC()/hb_parptrGC() with auto destructors  
> what
> will give two important features:
>     1. validation if given pointer is correct pointer to requested
>        structure
>     2. resources will be automatically freed when all .prg variables
>        will holding pointer to some allocated structure will be  
> cleared
>        what will protect against memory leaks

Okey. Notice however that HANDLE could be defined as 'char *' in
another platform which won't be solved this was anyway.

>> So it seems that legacy C VM API code won't compile when windows.h
>> is also included.
>> Pls try to change line 110 to these:
>> #ifndef HANDLE
>>    #define HANDLE HB_VMHANDLE
>> #endif
>
> It will not help but if you will change HB_VMHANDLE to 'void *' then
> you can simply put:
>     typedef HB_VMHANDLE HANDLE;
> few lines above in:
>     #if !(defined(HB_OS_WIN_32) && defined(HB_OS_WIN_32_USED))

Yes, you're right.

> BTW maybe it's time to clear HB_OS_WIN_32 build and remove all
>     HB_OS_WIN_32_USED - IMO it's ugly hack and whole core code
>     should be ready to work with HB_OS_WIN_32_USED - now we only
>     have problems each time we try to move some functions between
>     files.

Ugly hack just as is every platform dependent code. Since most
part of Harbour is plain multiplatform ANSI C code, which doesn't
need windows.h, I see no reason to include windows.h in every C,
since it would give no benefit while severly slowing down compilation.

If we want to cleanup platform dependent code, let's think it
through as a whole. The original idea was to have a flat choice
of platforms and a flat choice of compilers inside each, by now
this concept is broken in quite a few places (like now with
HB_WINCE, which should have been HB_OS_WIN_CE). I'm not saying we
need to stick to the original idea, but this problem reaches
further than HB_OS_WIN_32_USED IMO.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 25 15:15:47 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 25 15:15:54 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <002a01c81711$5a0b9310$1700000a@PcJuanxp>
References: <002a01c816fe$ad425950$1700000a@PcJuanxp>
	<143046DF-15A6-4075-95EA-A7B97DA712F4@syenar.hu>
	<002a01c81711$5a0b9310$1700000a@PcJuanxp>
Message-ID: <9E82A91B-880E-4550-B547-74F588DD8CD6@syenar.hu>

Hi Juan,

On 2007.10.25., at 16:13, Juan G?lvez wrote:

> Hi Viktor,
>
>>
> Pls try to change line 110 to these:
> #ifndef HANDLE
>    #define HANDLE HB_VMHANDLE
> #endif
>>
>
> Then I get some issues in other places :
>
> Error E2342 source\hobj\Comm.c 22: Type mismatch in parameter  
> 'hObject' (wanted 'void *', got 'unsigned long') in function  
> HB_FUN_CLOSECOMM
>
> What do you think about this solution ( lines 103 ...) :
>
> #if !(defined(HB_OS_WIN_32) && defined(HB_OS_WIN_32_USED))
>   typedef void *  FARP;
>   typedef FARP *  FARPP;
>   typedef FARP    VOIDP;
>   typedef FARP    PVOID;
>   typedef HB_VMHANDLE HANDLE;
> #else
>   typedef void *  HANDLE;
> #endif

Yes, I'll commit something like this, but I'd remove the #else branch.
I will do this later in the evening.

Thanks.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 25 19:07:18 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 25 19:07:28 2007
Subject: [Harbour] 2007-10-23 20:27 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20071025151252.GA3556@localhost.localdomain>
References: <200710231828.l9NISLMn026405@31-mo5-4.acn.waw.pl>
	<4F5A20DF-5C78-4B25-9D77-8F2573FBFED4@syenar.hu>
	<20071023205122.GA3944@localhost.localdomain>
	<FF398E32-9AA0-4A63-BF32-655DCBE59061@syenar.hu>
	<20071023230841.GA9018@localhost.localdomain>
	<1C521F82-DE9F-486B-8376-1390B6A5FAA7@syenar.hu>
	<20071024010813.GC9409@localhost.localdomain>
	<8E71DAE2-CA23-4E59-A7FC-6AFD023DAE9A@syenar.hu>
	<20071025110656.GA31354@localhost.localdomain>
	<8ED17C6C-D4FC-4FBE-9D26-DC927104FD8C@syenar.hu>
	<20071025151252.GA3556@localhost.localdomain>
Message-ID: <32FB703D-02E8-48FA-BE68-63CA078EF695@syenar.hu>

>> Yes, but the problem with this is that the downloader script
>> is actually part of the stuff to be downloaded.
>
> Do you know better place when they can be located which will allow
> easy update for each of us and later synchronization by all hosts
> which want to keep their copy?

It's an "svn co" + "make_*.sh" command.
Or a plain .tgz/.zip download + "make_*.sh" command.

>> So I'd find it
>> cleaner if we'd publish the normal and standard way to get the
>> whole SVN tree (release or beta), and after that, everyone could
>> decide which script to run.
>
> I do not understand what is uncleaned with the above. The main
> difference is that now when peope asked about starting using Harbour
> I simply suggest them to run one small script instead of sending
> long description.

To run the small script to download Harbour, they need to
download Harbour first, that's the problem.

>> IMO the above curl command is not something anyone would guess
>> by him/herself.
>> An SVN CO command will do for everyone
>
> How 'SVN CO' will guess the url with harbour repository?
> You will need:
>
> svn co https://harbour-project.svn.sourceforge.net/svnroot/harbour- 
> project/\
> trunk/harbour

Yes, you publish a URL, that's how every project is doing it.
Plus you publish links to .tgz/.zip files for those not wanting
to deal with SVN.

We currently have both on our pages.

I think we'd rater need some descriptive build script names,
so that ppl know which one is doing what. Now we have 3 .bat
files and 10 .sh files.

> so there is only one difference:
>     /hbgtmk.sh
> at the end of url. In summary I do not agree it's more complicated,
> for sure not for useres which used it.
>
>> Maybe I'm wrong, but to me it seemed that a simple "make" (= "make  
>> all")
>> will trigger these scripts.
>
> I do not think so - just check.

I believe you.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Oct 25 20:57:20 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 25 20:57:21 2007
Subject: [Harbour] CHANGELOG: 2007-10-25 22:43 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c81749$Blat.v2.6.2$a262373a$e60c87e1630@127.0.0.1>

2007-10-25 22:43 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * contrib/win32/w32_prn.c
     ! Changed hb_retnl() -> hb_retptr() for Windows handles.
     ! Changed hb_parnl() -> hb_parptr() for Windows handles.
     ; Thanks Przemek.
     ; The GC-ed version is yet to be done.

   - bldcmncf.sh
   * make_gcc.sh
     % bldcmncf.sh integrated into make_gcc.sh.
       After consulting with Przemek.

   * include/clipdefs.h
     ! Fixed HANDLE clash with Windows headers after recent modification.
       Notice that I've left HB_VMHANDLE as ULONG for now. It's enough 
       to revisit this when implementing those VM API calls.
       Another notice that because of this name clash legacy Clipper 
       VM API calls in Harbour won't work with Windows headers, 
       native Harbour VM API calls will do work however.

   - make_xcemgw.sh
   + make_xmingwce.sh
     * Rename to be in sync with make_xmingw.ch
--
Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Thu Oct 25 21:24:14 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Thu Oct 25 21:24:19 2007
Subject: [Harbour] CHANGELOG: 2007-10-25 22:43 UTC+0100 Viktor
	Szakats(harbour.01 syenar.hu)
References: <01c81749$Blat.v2.6.2$a262373a$e60c87e1630@127.0.0.1>
Message-ID: <02cb01c8174d$645e2030$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: <harbour@harbour-project.org>
Data invio: gioved? 25 ottobre 2007 22.57
Oggetto: [Harbour] CHANGELOG: 2007-10-25 22:43 UTC+0100 Viktor 
Szakats(harbour.01 syenar.hu)


>   * include/clipdefs.h
>     ! Fixed HANDLE clash with Windows headers after recent modification.

Thank you. My FWH programs still won't start, though... :-(

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Thu Oct 25 21:35:43 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 25 21:35:58 2007
Subject: [Harbour] CHANGELOG: 2007-10-25 22:43 UTC+0100 Viktor
	Szakats(harbour.01 syenar.hu)
In-Reply-To: <02cb01c8174d$645e2030$ca64fea9@emag>
References: <01c81749$Blat.v2.6.2$a262373a$e60c87e1630@127.0.0.1>
	<02cb01c8174d$645e2030$ca64fea9@emag>
Message-ID: <952A9B04-B059-4B9A-AF0D-D5A39215701A@syenar.hu>

Hi Enrico,

I wonder which change could have such effect,
none of my changes were related to any core
functionality (except adding VM API skeletons
to core).

Which was the last working repository for you?

Brgds,
Viktor

On 2007.10.25., at 23:24, Enrico Maria Giordano wrote:

>
> -----Messaggio Originale----- Da: "Szak?ts Viktor" <harbour. 
> 01@syenar.hu>
> A: <harbour@harbour-project.org>
> Data invio: gioved? 25 ottobre 2007 22.57
> Oggetto: [Harbour] CHANGELOG: 2007-10-25 22:43 UTC+0100 Viktor  
> Szakats(harbour.01 syenar.hu)
>
>
>>   * include/clipdefs.h
>>     ! Fixed HANDLE clash with Windows headers after recent  
>> modification.
>
> Thank you. My FWH programs still won't start, though... :-(
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic

From harbour.01 at syenar.hu  Thu Oct 25 21:39:39 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Oct 25 21:39:46 2007
Subject: [Harbour] BCC Link error
In-Reply-To: <001101c81716$b1c44b10$1700000a@PcJuanxp>
References: <001101c81716$b1c44b10$1700000a@PcJuanxp>
Message-ID: <0848EDCB-9DB2-4385-833B-A5ACE1A5DAD7@syenar.hu>

Hi Juan,

Can you check whether GTWIN.LIB got built properly
for you, and if not, what was the error in your
build output?

Brgds,
Viktor

On 2007.10.25., at 16:52, Juan G?lvez wrote:

> Hi all,
>
> With recent SVN changes (I don't know which one), I get :
>
> c:\utl\bcc55\bin\ilink32.exe -Gn -q -t -aa -Tpe -s -jobjh32\develop 
> \CONTAPro -Iobjh32\develop\CONTAPro -Lc:\utl\bcc55\lib @MAKE0000.@@@
> Error: Unresolved external '_HB_FUN_HB_GT_WIN' referenced from C: 
> \UTL\HARBOUR\LIB\RTL.LIB|gtsys
> Info: Link time = 0.34 seconds
>
> What do I have to change ?
>
> Many thanks
> Juan
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Fri Oct 26 01:47:25 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 26 01:47:30 2007
Subject: [Harbour] 2007-10-26 03:46 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710260147.l9Q1lP86016309@31-mo5-4.acn.waw.pl>

2007-10-26 03:46 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbstack.h
  * harbour/include/hboo.ch
  * harbour/ChangeLog
  * harbour/utils/hbmake/hbmlang.c
  * harbour/utils/hbpp/hbppcore.c
  * harbour/utils/hbpp/hbpp.c
  * harbour/source/pp/ppcore.c
  * harbour/source/rtl/cdpapi.c
  * harbour/source/rtl/gtcrs/gtcrs.c
  * harbour/source/rtl/gtalleg/fixedth.sfc
  * harbour/source/rtl/fstemp.c
  * harbour/source/rtl/idle.c
  * harbour/source/rtl/gtstd/gtstd.c
  * harbour/source/rtl/gttrm/gttrm.c
  * harbour/source/rtl/gtpca/gtpca.c
  * harbour/source/rtl/hbffind.c
  * harbour/source/rtl/hbregex.c
  * harbour/source/vm/hvm.c
  * harbour/contrib/xhb/hboutdbg.c
  * harbour/contrib/xhb/hbxml.c
  * harbour/contrib/xhb/hbxml.h
  * harbour/contrib/xhb/cstructc.c
  * harbour/contrib/xhb/hbsyslog.c
  * harbour/contrib/libmisc/hb_f.c
  * harbour/contrib/libnf/fttext.c
  * harbour/contrib/libnf/mouse.c
  * harbour/contrib/tip/encmthd.c
  * harbour/contrib/rdd_ads/ads1.c
  * harbour/contrib/rdd_ads/ace.h
  * harbour/contrib/btree/hb_btree.c
  * harbour/contrib/samples/status.c
  * harbour/contrib/samples/gauge.c
  * harbour/contrib/odbc/odbc.c
  * harbour/contrib/bmdbfcdx/hbrddbmcdx.h
  * harbour/contrib/bmdbfcdx/bmdbfcdx1.c
    * cleanup errors in strict ANSI C compilation

best regards
Przemek
From druzus at acn.waw.pl  Fri Oct 26 01:48:29 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 26 01:48:34 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <2C32A4D4-A433-4658-A8AC-5528909BEFFC@syenar.hu>
References: <002a01c816fe$ad425950$1700000a@PcJuanxp>
	<143046DF-15A6-4075-95EA-A7B97DA712F4@syenar.hu>
	<20071025140702.GA2703@localhost.localdomain>
	<2C32A4D4-A433-4658-A8AC-5528909BEFFC@syenar.hu>
Message-ID: <20071026014829.GA20071@localhost.localdomain>

On Thu, 25 Oct 2007, Szak?ts Viktor wrote:
> Okey. Notice however that HANDLE could be defined as 'char *' in
> another platform which won't be solved this was anyway.

Sorry but I do not see any difference between void * and char * pointers
in the context we are talking about. Both can be used without any problem
on any platform. There is only one difference which allow to keep code
cleaner -  void * is safer then char * because most of modern C compilers
forbid math operation on pure void * without explicit type casting so
you do not have to worry that by mistake you will make some + 1 or similar
operation and it will change the pointer value or break strict alignment.

> Ugly hack just as is every platform dependent code. Since most
> part of Harbour is plain multiplatform ANSI C code, which doesn't
> need windows.h, I see no reason to include windows.h in every C,
> since it would give no benefit while severly slowing down compilation.

Plain ANSI C code should work with any headers. Even MS tries to keep
some standards. The problem is that our C code is not plan ANSI C code
and users as workaround were disabling windows.h instead of fixing the
code. IMHO the worst possible choice - I strongly prefer to not keep
such hacks and clean the code - in most cases windows.h and other platform
dependent header files will not make anything wrong. I've never tried to
measure how big overhead windows.h cause but for I lost much more time
cleaning existing code from non portable hacks then my computer parsing
windows.h in each Harbour compilation so it's not an resonable argument
for me. So for me (just like for you if I remember well our last discussion
about increasing compiler warnings) anything what will force more strict
compilation is good choice - in this sense I do not see anything wrong
in including windows.h.
The second thing is what you and other developers calling ANSI C.
First I'd like to say that Harbour source code is one of the most
cleaner C code I've ever seen in such big project - my congratulations
for people who defined the conditions and even bigger for these ones
who were watching to keep the code clean because it's usually much
harder job. In last years I've even changed my personal C coding style in
other projects adopting many of Harbour's preferences. But in few cases
I think that not all conditions were defined clear enough. One of such
example is using strict ANSI C.
Most of [x]Harbour developers used only x86 based machines and used
casting and conversions was not portable to other platforms. It was
one of the biggest problem for me when I was porting xHarbour to
some machines. ANSI C standard does not resolve such problems so
it cannot help. It can be used in defining set of available functions
but here we have another problem. A lot of ANSI C functions are on
the black list of the most dangerous functions in many OSes. Some
more restricted environments (f.e. OpenBSD port) helped me to eliminate
them from Harbour core code. But in this process I was removing ANSI
C functions so it was good for you or not? Can you define what for
you means "plain multiplatform ANSI C code"?

BTW I've just cleaned errors in strict ANSI C compilation so set -ansi
in C_USR and make some GCC build to find how far we are from ANSI C.

> If we want to cleanup platform dependent code, let's think it
> through as a whole. The original idea was to have a flat choice
> of platforms and a flat choice of compilers inside each, by now
> this concept is broken in quite a few places (like now with
> HB_WINCE, which should have been HB_OS_WIN_CE).

I do not agree. The differences between WinCE and WinNT are smaller
then between Win95 and WinXP. If you want to introduce HB_OS_WIN_CE
then please first implement HB_OS_WIN_NT, HB_OS_WIN_95, HB_OS_WIN_98,
HB_OS_WIN_ME, HB_OS_WIN_2K, HB_OS_WIN_XP and then such request will
be reasonable. BTW In practice all WinCE modifications I've done recently
are exactly the same as for WinXP if you want to use Unicode. AFAIR
_ONLY_ one #ifdef HB_WINCE is strictly necessary for WINCE only and
as I can see each new version of WinCE/WinMB reduce the differences
between WinXP so HB_OS_WIN_CE is very imprecise definition which
cannot be well used.

> I'm not saying we > need to stick to the original idea, but this
> problem reaches further than HB_OS_WIN_32_USED IMO.

Yes, IMO HB_OS_WIN_32_USED is only one of the ugly hack and there are
others. AFAIK I ported [x]Harbour to the most number of different
platforms and I quite well know how many things I had to cleaned
or add workarounds. F.e. real PocketPC port was done when I ported
xHarbour to SunOS on SPARC and Linux on MIPS390 - it was necessary
to clean many different things in _whole_ core code and set of used
functions was the less important problem because compiler caught
them immediately. The worst was x86 only pure C code because it was
necessary to check whole code line by line to eliminate it. This
modification was necessary also for ARM processors and because was
ready and I added it also to Harbour then later WinCE ports were
trivial job with adding some helper functions, header file manipulations
and cleaning some wrong Win32/64 code. So not only used functions are
important but also coding style to not create x86 only code.
I fully agree that we should try to reduce platform dependent code and
implement our own native versions or wrappers for some functions.
But it does not mean that we can eliminate them at all - such operation
is impossible so in few places we have to include platform native header
files. And sometimes we are shocked in this moment because we are finding
that this cannot be easy done because we have conflicts with our own
definitions. Unfortunately not located immediately because standard
platform dependent header files were not included and for months or
years a lot of code which needs our version of some definitions were
created by us and we cannot easy resolve the problem. Nothing personal
(BTW I quite often presents different opinions - some times even not
my own ;-) - but as long as we are talking about technical problems
I hope that no one will feel it's personal attack) but in such context
when you are talking that you do not like including windows.h then
for me it's nothing more the your own personal choice without any
serious arguments. You have been making a lot of very important work
to keep the Harbour code clean for last years and many thanks for that.
But sometimes I feel that you are loosing important aspects because
you haven't had to resolve some problems. I know your goal but I'm
not sure I want to invest my time in fully separated multiplatform
IO/OS-dependent library. It's huge job to make it well and some
things I've seen in last weeks causes that I'm really loosing motivations
to invest my time in it.

best regards,
Przemek
From soporte at dsgsoftware.com  Fri Oct 26 10:42:09 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Fri Oct 26 10:43:16 2007
Subject: [Harbour] BCC Link error
References: <001101c81716$b1c44b10$1700000a@PcJuanxp>
	<0848EDCB-9DB2-4385-833B-A5ACE1A5DAD7@syenar.hu>
Message-ID: <000801c817bc$fffa1890$1700000a@PcJuanxp>

Hi Viktor,

Before these changes I only linked GTGUI.LIB in my FWH application.

If I link GTWIN.LIB then the application open two windows (console and gui).

What do you think about ?

Many thanks
Juan

----- Original Message ----- 
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Thursday, October 25, 2007 11:39 PM
Subject: Re: [Harbour] BCC Link error


Hi Juan,

Can you check whether GTWIN.LIB got built properly
for you, and if not, what was the error in your
build output?

Brgds,
Viktor

On 2007.10.25., at 16:52, Juan G?lvez wrote:

> Hi all,
>
> With recent SVN changes (I don't know which one), I get :
>
> c:\utl\bcc55\bin\ilink32.exe -Gn -q -t -aa -Tpe -s -jobjh32\develop 
> \CONTAPro -Iobjh32\develop\CONTAPro -Lc:\utl\bcc55\lib @MAKE0000.@@@
> Error: Unresolved external '_HB_FUN_HB_GT_WIN' referenced from C: 
> \UTL\HARBOUR\LIB\RTL.LIB|gtsys
> Info: Link time = 0.34 seconds
>
> What do I have to change ?
>
> Many thanks
> Juan
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour 

From guy.roussin at teledetection.fr  Fri Oct 26 10:52:33 2007
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Fri Oct 26 10:52:38 2007
Subject: [Harbour] About gtstd ...
Message-ID: <4721C6F1.9050100@teledetection.fr>

Hi,

A sample to see my problem.

$ ./$ cat t3.prg
function main()
? repl("0123456789",20)
quit

$ hbmk -n -gtstd t3
Harbour devel build 1.1-1 Intl.
Copyright 1999-2007, http://www.harbour-project.org/
Compiling 't3.prg'...
Lines 3, Functions/Procedures 1
Generating C source output to 't3.c'... Done.

$ ./t3 > tst

$ cat tst

01234567890123456789012345678901234567890123456789012345678901234567890123456789
01234567890123456789012345678901234567890123456789012345678901234567890123456789
0123456789012345678901234567890123456789

Notice than all the lines are cuted after 80 chars (eol)

I don't want harbour cut this line.
Perhaps i need to use another gtXXX ?

Thanks,

Guy

From harbour.01 at syenar.hu  Fri Oct 26 11:31:57 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 26 11:32:05 2007
Subject: [Harbour] BCC Link error
In-Reply-To: <000801c817bc$fffa1890$1700000a@PcJuanxp>
References: <001101c81716$b1c44b10$1700000a@PcJuanxp>
	<0848EDCB-9DB2-4385-833B-A5ACE1A5DAD7@syenar.hu>
	<000801c817bc$fffa1890$1700000a@PcJuanxp>
Message-ID: <9CBEE574-4FDC-43C6-ABC8-DC389C5D923E@syenar.hu>

Hi Juan,

Do you "ANNOUNCE HB_GTSYS" in your code?

HB_GT_WIN symbol is pulled by gtsys.c on Windows platform,
but you can avoid linking gtsys.c by doing the ANNOUNCE above.

Brgds,
Viktor

On 2007.10.26., at 12:42, Juan G?lvez wrote:

> Hi Viktor,
>
> Before these changes I only linked GTGUI.LIB in my FWH application.
>
> If I link GTWIN.LIB then the application open two windows (console  
> and gui).
>
> What do you think about ?
>
> Many thanks
> Juan
>
> ----- Original Message ----- From: "Szak?ts Viktor" <harbour. 
> 01@syenar.hu>
> To: "Harbour Project Main Developer List." <harbour@harbour- 
> project.org>
> Sent: Thursday, October 25, 2007 11:39 PM
> Subject: Re: [Harbour] BCC Link error
>
>
> Hi Juan,
>
> Can you check whether GTWIN.LIB got built properly
> for you, and if not, what was the error in your
> build output?
>
> Brgds,
> Viktor
>
> On 2007.10.25., at 16:52, Juan G?lvez wrote:
>
>> Hi all,
>>
>> With recent SVN changes (I don't know which one), I get :
>>
>> c:\utl\bcc55\bin\ilink32.exe -Gn -q -t -aa -Tpe -s -jobjh32 
>> \develop \CONTAPro -Iobjh32\develop\CONTAPro -Lc:\utl\bcc55\lib  
>> @MAKE0000.@@@
>> Error: Unresolved external '_HB_FUN_HB_GT_WIN' referenced from C:  
>> \UTL\HARBOUR\LIB\RTL.LIB|gtsys
>> Info: Link time = 0.34 seconds
>>
>> What do I have to change ?
>>
>> Many thanks
>> Juan
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Oct 26 14:21:59 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 26 14:22:10 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <20071026014829.GA20071@localhost.localdomain>
References: <002a01c816fe$ad425950$1700000a@PcJuanxp>
	<143046DF-15A6-4075-95EA-A7B97DA712F4@syenar.hu>
	<20071025140702.GA2703@localhost.localdomain>
	<2C32A4D4-A433-4658-A8AC-5528909BEFFC@syenar.hu>
	<20071026014829.GA20071@localhost.localdomain>
Message-ID: <DA48CD6B-3D98-492F-8142-736DF496FBE4@syenar.hu>


On 2007.10.26., at 3:48, Przemyslaw Czerpak wrote:

> On Thu, 25 Oct 2007, Szak?ts Viktor wrote:
>> Okey. Notice however that HANDLE could be defined as 'char *' in
>> another platform which won't be solved this was anyway.
>
> Sorry but I do not see any difference between void * and char *  
> pointers
> in the context we are talking about. Both can be used without any  
> problem
> on any platform. There is only one difference which allow to keep code
> cleaner -  void * is safer then char * because most of modern C  
> compilers
> forbid math operation on pure void * without explicit type casting so
> you do not have to worry that by mistake you will make some + 1 or  
> similar
> operation and it will change the pointer value or break strict  
> alignment.

Okey, it was just an example for another possible HANDLE type clash,
it could be defined to anything else. The clash is there, that's the  
point.

As an aside, this is a good example to show what happens when
different products are not using "namespaces".

>> Ugly hack just as is every platform dependent code. Since most
>> part of Harbour is plain multiplatform ANSI C code, which doesn't
>> need windows.h, I see no reason to include windows.h in every C,
>> since it would give no benefit while severly slowing down  
>> compilation.
>
> Plain ANSI C code should work with any headers. Even MS tries to keep

Depends on how we define ANSI C.

> some standards. The problem is that our C code is not plan ANSI C code
> and users as workaround were disabling windows.h instead of fixing the
> code. IMHO the worst possible choice - I strongly prefer to not keep

Not right. windows.h is needed for _some_ platform specific code, that's
the reason we're using it only where it is needed. The same is done
for every other platform. Are you saying we should include the "OS/2
headers" and other special platform/compiler specific headers to all
files, just because they are needed in a few ones? windows.h is just
a header for specific API/platform.

If we want to fix this, I think we simply need to take out
#include "windows.h" from hbdef.h and add it in each file explicitly
where it is needed. The problem with this is twofold though:
1) inclusion needs more than one line.
2) Windows types are clashing with quite some Harbour basic types,
    so we need to disable some Harbour typedefs if windows.h is used.

I'd be all for solving problem 2) in a proper way. IMO this would mean
removing the HB_DONT_DEFINE_BASIC_TYPES macro first, and using either
plain basic C types or properly prefixed Harbour ones, like: HB_UINT,  
HB_ULONG.

> cleaning existing code from non portable hacks then my computer  
> parsing
> windows.h in each Harbour compilation so it's not an resonable  
> argument
> for me. So for me (just like for you if I remember well our last  
> discussion
> about increasing compiler warnings) anything what will force more  
> strict
> compilation is good choice - in this sense I do not see anything wrong
> in including windows.h.

I find it odd to always include "windows.h". We're not doing this
for any other platforms. I think the problem lies elsewhere, see above.

> The second thing is what you and other developers calling ANSI C.

Yes, that's right. IMO, in a pure strict sense, ANSI C code
couldn't even use "windows.h" (or "os2.h" or "unix.h" or "dos.h").

> Most of [x]Harbour developers used only x86 based machines and used
> casting and conversions was not portable to other platforms. It was
> one of the biggest problem for me when I was porting xHarbour to
> some machines. ANSI C standard does not resolve such problems so
> it cannot help. It can be used in defining set of available functions
> but here we have another problem. A lot of ANSI C functions are on
> the black list of the most dangerous functions in many OSes. Some
> more restricted environments (f.e. OpenBSD port) helped me to  
> eliminate
> them from Harbour core code. But in this process I was removing ANSI
> C functions so it was good for you or not? Can you define what for
> you means "plain multiplatform ANSI C code"?

I mean that all code is ANSI C, using ANSI C constructs and ANSI C RTL
calls. Of course we can write our own versions of non-ANSI C
functions (like hb_strupr()), or create safe versions of ANSI C  
functions,
but again, using pure ANSI C code (like we do in source/common/ 
hbstr.c for example).

For _every_ code requiring anything platform or compiler dependent,
we need to cleary and cleanly guard them with #ifdefs.

As you mention later, I fully agree that ANSI C code by itself
is not a guarantee to produce high quality portable code; there
are many other issues to solve, like endianness, aligments, data
width (16/32/64bit) and many other problems, many of which you've
addressed in Harbour so well.

> BTW I've just cleaned errors in strict ANSI C compilation so set -ansi
> in C_USR and make some GCC build to find how far we are from ANSI C.

Very welcome update. Thanks a lot it!

> I do not agree. The differences between WinCE and WinNT are smaller
> then between Win95 and WinXP. If you want to introduce HB_OS_WIN_CE
> then please first implement HB_OS_WIN_NT, HB_OS_WIN_95, HB_OS_WIN_98,
> HB_OS_WIN_ME, HB_OS_WIN_2K, HB_OS_WIN_XP and then such request will
> be reasonable. BTW In practice all WinCE modifications I've done  
> recently
> are exactly the same as for WinXP if you want to use Unicode. AFAIR
> _ONLY_ one #ifdef HB_WINCE is strictly necessary for WINCE only and
> as I can see each new version of WinCE/WinMB reduce the differences
> between WinXP so HB_OS_WIN_CE is very imprecise definition which
> cannot be well used.

Yes, I saw your point, that's why I didn't complain, but we have
to keep in mind to keep the source as clean as possible, and this
becomes more and more complicated with every new layer of these
kinds of #defines. The more "flat" the platform/compiler tree is,
the better. You did some optimizations which makes perfect sense
(smaller code with less redundancy), but on the other hand it
results in somewhat harder to follow source code, but no biggy,
it was just an example.

As for WinCE vs. Win32s vs. 95/98/ME vs. 2K/XP/VISTA vs. WINE, well,
truly, all are "Win32".

To keep the portability mess to a minimum my idea was back then
to have a one level deep (#if) branching for platforms (HB_OS_*)
and another level for compilers, but the latter kept to a possible
minimum by trying to use the _native platform API_ directly
wherever we can (and not some compiler RTL specific wrappers).

>> I'm not saying we > need to stick to the original idea, but this
>> problem reaches further than HB_OS_WIN_32_USED IMO.
>
> Yes, IMO HB_OS_WIN_32_USED is only one of the ugly hack and there are
> others. AFAIK I ported [x]Harbour to the most number of different
> platforms and I quite well know how many things I had to cleaned
> or add workarounds. F.e. real PocketPC port was done when I ported
> xHarbour to SunOS on SPARC and Linux on MIPS390 - it was necessary
> to clean many different things in _whole_ core code and set of used
> functions was the less important problem because compiler caught
> them immediately. The worst was x86 only pure C code because it was
> necessary to check whole code line by line to eliminate it. This
> modification was necessary also for ARM processors and because was
> ready and I added it also to Harbour then later WinCE ports were
> trivial job with adding some helper functions, header file  
> manipulations
> and cleaning some wrong Win32/64 code. So not only used functions are
> important but also coding style to not create x86 only code.

I fully agree.

> I fully agree that we should try to reduce platform dependent code and
> implement our own native versions or wrappers for some functions.
> But it does not mean that we can eliminate them at all - such  
> operation
> is impossible so in few places we have to include platform native  
> header
> files. And sometimes we are shocked in this moment because we are  
> finding
> that this cannot be easy done because we have conflicts with our own
> definitions. Unfortunately not located immediately because standard
> platform dependent header files were not included and for months or

Yes, I agree that _headers_ should be tested with various platforms,
but I disagree we should add platform headers to all _source files_
to achieve this.

Notice that clipdefs.h is _never_ used in Harbour core code, as it is
a compatibility header to help compiling C code created for CA-Cl*pper.
So you wouldn't catch this error anyway.

And again, there is no such thing as "platform specific headers" in
general. windows.h is just one such header on one platform, but users
can have zillions of different platforms, products with their headers
they might want to use with Harbour, and the only reasonable solution
for Harbour is to avoid any name clashes with proper namespacing. As
for Harbour compatibility headers (*.api, clipdefs.h), we need to accept
the fact that Clipper had HANDLE, BYTEP and friends, so if someone is
using these headers, clashing _can_ happen.

> years a lot of code which needs our version of some definitions were
> created by us and we cannot easy resolve the problem. Nothing personal
> (BTW I quite often presents different opinions - some times even not
> my own ;-) - but as long as we are talking about technical problems
> I hope that no one will feel it's personal attack) but in such context
> when you are talking that you do not like including windows.h then
> for me it's nothing more the your own personal choice without any
> serious arguments.

It's not a personal choice. Pls read above.

> to keep the Harbour code clean for last years and many thanks for  
> that.
> But sometimes I feel that you are loosing important aspects because
> you haven't had to resolve some problems. I know your goal but I'm
> not sure I want to invest my time in fully separated multiplatform
> IO/OS-dependent library. It's huge job to make it well and some
> things I've seen in last weeks causes that I'm really loosing  
> motivations
> to invest my time in it.

I've never suggested to start creating IO/OS dependent libraries
or wrappers. Harbour's C/prg level APIs are the only wrappers we
need.

Przemek, I don't know what makes you lose your interest, I just can
hope it will cure, but what exactly are we arguing about here?

I've made a mistake when modifying clipdefs.h (which is _not_ used
in Harbour core at all, so only 3rd party code could catch this
error, if I wasn't careful enough before committing), it's now  
corrected,
and with this, from my side, the issue is cleared.

What is your opinion on removing the HB_DONT_DEFINE_BASIC_TYPES ugly  
hack?

Brgds,
Viktor

From soporte at dsgsoftware.com  Fri Oct 26 15:22:33 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Fri Oct 26 15:22:52 2007
Subject: [Harbour] BCC Link error
References: <001101c81716$b1c44b10$1700000a@PcJuanxp><0848EDCB-9DB2-4385-833B-A5ACE1A5DAD7@syenar.hu><000801c817bc$fffa1890$1700000a@PcJuanxp>
	<9CBEE574-4FDC-43C6-ABC8-DC389C5D923E@syenar.hu>
Message-ID: <004201c817e4$1157fae0$1700000a@PcJuanxp>

Hi Viktor,

A recent Przemek change introduced in GTDEF.C (line 66):

#if defined( HB_OS_WIN_32 ) && defined( HB_GTGUI_HACK )

I've defined HB_GTGUI_HACK and now it works.

Przemek, please, could you explain a litle bit this define ?

Many thanks
Juan

----- Original Message ----- 
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Friday, October 26, 2007 1:31 PM
Subject: Re: [Harbour] BCC Link error


Hi Juan,

Do you "ANNOUNCE HB_GTSYS" in your code?

HB_GT_WIN symbol is pulled by gtsys.c on Windows platform,
but you can avoid linking gtsys.c by doing the ANNOUNCE above.

Brgds,
Viktor

On 2007.10.26., at 12:42, Juan G?lvez wrote:

> Hi Viktor,
>
> Before these changes I only linked GTGUI.LIB in my FWH application.
>
> If I link GTWIN.LIB then the application open two windows (console  and
> gui).
>
> What do you think about ?
>
> Many thanks
> Juan
>
> ----- Original Message ----- From: "Szak?ts Viktor" <harbour.
> 01@syenar.hu>
> To: "Harbour Project Main Developer List." <harbour@harbour- project.org>
> Sent: Thursday, October 25, 2007 11:39 PM
> Subject: Re: [Harbour] BCC Link error
>
>
> Hi Juan,
>
> Can you check whether GTWIN.LIB got built properly
> for you, and if not, what was the error in your
> build output?
>
> Brgds,
> Viktor
>
> On 2007.10.25., at 16:52, Juan G?lvez wrote:
>
>> Hi all,
>>
>> With recent SVN changes (I don't know which one), I get :
>>
>> c:\utl\bcc55\bin\ilink32.exe -Gn -q -t -aa -Tpe -s -jobjh32 \develop
>> \CONTAPro -Iobjh32\develop\CONTAPro -Lc:\utl\bcc55\lib  @MAKE0000.@@@
>> Error: Unresolved external '_HB_FUN_HB_GT_WIN' referenced from C:
>> \UTL\HARBOUR\LIB\RTL.LIB|gtsys
>> Info: Link time = 0.34 seconds
>>
>> What do I have to change ?
>>
>> Many thanks
>> Juan
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From e.m.giordano at emagsoftware.it  Fri Oct 26 15:43:13 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Fri Oct 26 15:43:22 2007
Subject: [Harbour] CHANGELOG: 2007-10-25 22:43 UTC+0100 Viktor
	Szakats(harbour.01 syenar.hu)
References: <01c81749$Blat.v2.6.2$a262373a$e60c87e1630@127.0.0.1>
	<02cb01c8174d$645e2030$ca64fea9@emag>
	<952A9B04-B059-4B9A-AF0D-D5A39215701A@syenar.hu>
Message-ID: <008a01c817e6$eb23fba0$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
Cc: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: gioved? 25 ottobre 2007 23.35
Oggetto: Re: [Harbour] CHANGELOG: 2007-10-25 22:43 UTC+0100 Viktor 
Szakats(harbour.01 syenar.hu)


> Hi Enrico,
>
> I wonder which change could have such effect,
> none of my changes were related to any core
> functionality (except adding VM API skeletons
> to core).
>
> Which was the last working repository for you?

As an example, 7830.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Fri Oct 26 15:52:59 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 26 15:53:10 2007
Subject: [Harbour] Harbour MSVC (VS2005) -O2 warnings
Message-ID: <7A9D1D2F-3916-4C7B-899B-355EBF779008@syenar.hu>

Here are the build results when compiling with MS Visual Studio 2005  
with -O2 switch, using make_vc.bat:

source\compiler\gencobj.c(55) : warning C4996: 'access': The POSIX  
name for this item is deprecated. Instead, use the ISO C++ conformant  
name: _access. See online help for details.
         C:\Program Files\Microsoft Visual Studio 8\VC\INCLUDE\io.h 
(315) : see declaration of 'access'
source\compiler\gencobj.c(78) : warning C4996: 'access': The POSIX  
name for this item is deprecated. Instead, use the ISO C++ conformant  
name: _access. See online help for details.
         C:\Program Files\Microsoft Visual Studio 8\VC\INCLUDE\io.h 
(315) : see declaration of 'access'
source\compiler\genobj32.c(544) : warning C4244: '=' : conversion  
from 'HB_SYMBOLSCOPE' to 'BYTE', possible loss of data
source\compiler\genhrb.c(102) : warning C4244: '=' : conversion from  
'HB_SYMBOLSCOPE' to 'BYTE', possible loss of data
include\hbexprb.c(1523) : warning C4244: 'function' : conversion from  
'ULONG' to 'BYTE', possible loss of data
include\hbexprb.c(1574) : warning C4244: 'function' : conversion from  
'ULONG' to 'BYTE', possible loss of data
include\hbexprb.c(1797) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'long', possible loss of data
include\hbexprb.c(1851) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'long', possible loss of data
include\hbexprb.c(4823) : warning C4244: 'function' : conversion from  
'ULONG' to 'BYTE', possible loss of data
harbour.y(291) : warning C4244: '=' : conversion from 'HB_LONG' to  
'int', possible loss of data
harbour.y(296) : warning C4244: '=' : conversion from 'HB_LONG' to  
'int', possible loss of data
harbour.y(1068) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'ULONG', possible loss of data
harbour.y(1069) : warning C4244: '=' : conversion from 'HB_LONG' to  
'ULONG', possible loss of data
harbour.y(1508) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'LONG', possible loss of data
harbour.y(1512) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'ULONG', possible loss of data
harbour.y(1565) : warning C4244: '=' : conversion from 'HB_LONG' to  
'int', possible loss of data
harbour.y(1574) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'ULONG', possible loss of data
harbour.y(1584) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'LONG', possible loss of data
harbour.y(1660) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'LONG', possible loss of data
harbour.y(1662) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'ULONG', possible loss of data
harbour.y(1757) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'ULONG', possible loss of data
harbour.y(1767) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'ULONG', possible loss of data
harbour.y(1767) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'ULONG', possible loss of data
harbour.y(1785) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'ULONG', possible loss of data
harbour.y(1785) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'ULONG', possible loss of data
harbour.y(1787) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'ULONG', possible loss of data
harbour.y(1787) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'ULONG', possible loss of data
harbour.y(1789) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'ULONG', possible loss of data
harbour.y(1795) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'ULONG', possible loss of data
harbour.y(1797) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'ULONG', possible loss of data
harbour.y(1797) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'ULONG', possible loss of data
harbour.y(1797) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'ULONG', possible loss of data
harbour.y(1920) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'ULONG', possible loss of data
utils\hbpp\pragma.c(345) : warning C4244: '=' : conversion from  
'HB_LONG' to 'int', possible loss of data
source\vm\classes.c(845) : warning C4244: '=' : conversion from  
'ULONG' to 'USHORT', possible loss of data
source\vm\garbage.c(174) : warning C4244: '=' : conversion from  
'USHORT' to 'BYTE', possible loss of data
source\vm\garbage.c(291) : warning C4244: '=' : conversion from  
'USHORT' to 'BYTE', possible loss of data
source\vm\garbage.c(317) : warning C4244: '=' : conversion from  
'USHORT' to 'BYTE', possible loss of data
source\vm\garbage.c(379) : warning C4244: '=' : conversion from  
'USHORT' to 'BYTE', possible loss of data
source\vm\garbage.c(686) : warning C4244: '=' : conversion from  
'USHORT' to 'BYTE', possible loss of data
source\vm\hvm.c(4432) : warning C4244: '=' : conversion from  
'HB_LONG' to 'ULONG', possible loss of data
source\vm\hvm.c(4590) : warning C4244: 'function' : conversion from  
'LONG' to 'USHORT', possible loss of data
source\vm\hvm.c(4601) : warning C4244: 'function' : conversion from  
'LONG' to 'USHORT', possible loss of data
source\vm\hvm.c(4613) : warning C4244: 'function' : conversion from  
'LONG' to 'USHORT', possible loss of data
source\rtl\binnum.c(117) : warning C4244: '=' : conversion from  
'long' to 'char', possible loss of data
source\rtl\binnum.c(118) : warning C4244: '=' : conversion from  
'long' to 'char', possible loss of data
source\rtl\binnum.c(119) : warning C4244: '=' : conversion from  
'long' to 'char', possible loss of data
source\rtl\binnum.c(120) : warning C4244: '=' : conversion from  
'unsigned long' to 'char', possible loss of data
source\rtl\direct.c(160) : warning C4244: 'function' : conversion  
from 'HB_FOFFSET' to 'long', possible loss of data
source\rtl\filesys.c(2346) : warning C4996: 'eof': The POSIX name for  
this item is deprecated. Instead, use the ISO C++ conformant name:  
_eof. See online help for details.
         C:\Program Files\Microsoft Visual Studio 8\VC\INCLUDE\io.h 
(322) : see declaration of 'eof'
source\rtl\hbcrc.c(215) : warning C4334: '<<' : result of 32-bit  
shift implicitly converted to 64 bits (was 64-bit shift intended?)
include\hbexprb.c(1797) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'long', possible loss of data
include\hbexprb.c(1851) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'long', possible loss of data
source\rdd\dbf1.c(373) : warning C4244: 'function' : conversion from  
'HB_LONG' to 'double', possible loss of data
source\rdd\dbffpt\dbffpt1.c(2415) : warning C4244: '=' : conversion  
from 'HB_FOFFSET' to 'ULONG', possible loss of data
source\rdd\dbffpt\dbffpt1.c(2421) : warning C4244: 'function' :  
conversion from 'HB_FOFFSET' to 'ULONG', possible loss of data
source\rdd\dbffpt\dbffpt1.c(3934) : warning C4333: '>>' : right shift  
by too large amount, data loss
source\rdd\dbffpt\dbffpt1.c(3934) : warning C4333: '>>' : right shift  
by too large amount, data loss
source\rdd\dbffpt\dbffpt1.c(4320) : warning C4244: '=' : conversion  
from 'HB_FOFFSET' to 'ULONG', possible loss of data
source\rdd\dbffpt\dbffpt1.c(4322) : warning C4244: '=' : conversion  
from 'HB_FOFFSET' to 'USHORT', possible loss of data
source\rdd\dbffpt\dbffpt1.c(4382) : warning C4244: '=' : conversion  
from 'HB_FOFFSET' to 'ULONG', possible loss of data
source\rdd\dbffpt\dbffpt1.c(4384) : warning C4244: '=' : conversion  
from 'HB_FOFFSET' to 'USHORT', possible loss of data
source\rdd\dbffpt\dbffpt1.c(4489) : warning C4244: '=' : conversion  
from 'HB_FOFFSET' to 'ULONG', possible loss of data
source\rdd\dbffpt\dbffpt1.c(4594) : warning C4244: '=' : conversion  
from 'HB_FOFFSET' to 'ULONG', possible loss of data
source\rtl\gtwvt\gtwvt.c(214) : warning C4244: 'return' : conversion  
from 'LONG' to 'USHORT', possible loss of data
source\rtl\gtwvt\gtwvt.c(219) : warning C4244: 'return' : conversion  
from 'LONG' to 'USHORT', possible loss of data
source\rtl\gtwvt\gtwvt.c(1196) : warning C4244: '=' : conversion from  
'LONG' to 'USHORT', possible loss of data
source\rtl\gtwvt\gtwvt.c(1197) : warning C4244: '=' : conversion from  
'LONG' to 'USHORT', possible loss of data

+ lots of strange link warnings like this, but everything links and  
works.
warning LNK4254: section '.CRT' (40000040) merged into  
'.data' (C0000040) with different attributes

Brgds,
Viktor

From cvc at oohg.org  Fri Oct 26 15:53:54 2007
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Fri Oct 26 15:54:09 2007
Subject: [Harbour] BCC Link error
In-Reply-To: <004201c817e4$1157fae0$1700000a@PcJuanxp>
References: <001101c81716$b1c44b10$1700000a@PcJuanxp><0848EDCB-9DB2-4385-833B-A5ACE1A5DAD7@syenar.hu><000801c817bc$fffa1890$1700000a@PcJuanxp>	<9CBEE574-4FDC-43C6-ABC8-DC389C5D923E@syenar.hu>
	<004201c817e4$1157fae0$1700000a@PcJuanxp>
Message-ID: <47220D92.2090300@oohg.org>

Juan G?lvez escribi?:
> Hi Viktor,
> 
> A recent Przemek change introduced in GTDEF.C (line 66):
> 
> #if defined( HB_OS_WIN_32 ) && defined( HB_GTGUI_HACK )
> 
> I've defined HB_GTGUI_HACK and now it works.


Juan you obtain only one window or two windows when run ?

regards
Ciro

> 
-- 
http://sistemascvc.tripod.com  (la casa del no2imp / the no2imp home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From soporte at dsgsoftware.com  Fri Oct 26 16:27:00 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Fri Oct 26 16:27:07 2007
Subject: [Harbour] BCC Link error
References: <001101c81716$b1c44b10$1700000a@PcJuanxp><0848EDCB-9DB2-4385-833B-A5ACE1A5DAD7@syenar.hu><000801c817bc$fffa1890$1700000a@PcJuanxp>	<9CBEE574-4FDC-43C6-ABC8-DC389C5D923E@syenar.hu><004201c817e4$1157fae0$1700000a@PcJuanxp>
	<47220D92.2090300@oohg.org>
Message-ID: <005801c817ed$0ac17e00$1700000a@PcJuanxp>

Hi Ciro,

Only one.

I'm not linking GTWIN.LIB, only GTGUI.LIB.

Best regards
Juan

----- Original Message ----- 
From: "Ciro Vargas Clemow" <cvc@oohg.org>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Friday, October 26, 2007 5:53 PM
Subject: Re: [Harbour] BCC Link error


> Juan G?lvez escribi?:
>> Hi Viktor,
>>
>> A recent Przemek change introduced in GTDEF.C (line 66):
>>
>> #if defined( HB_OS_WIN_32 ) && defined( HB_GTGUI_HACK )
>>
>> I've defined HB_GTGUI_HACK and now it works.
>
>
> Juan you obtain only one window or two windows when run ?
>
> regards
> Ciro
>
>>
> -- 
> http://sistemascvc.tripod.com  (la casa del no2imp / the no2imp home )
>
> http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more 
> powerfull )
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 

From druzus at acn.waw.pl  Fri Oct 26 17:04:25 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 26 17:04:31 2007
Subject: [Harbour] About gtstd ...
In-Reply-To: <4721C6F1.9050100@teledetection.fr>
References: <4721C6F1.9050100@teledetection.fr>
Message-ID: <20071026170425.GA22391@localhost.localdomain>

On Fri, 26 Oct 2007, Guy Roussin wrote:
> Perhaps i need to use another gtXXX ?

gtcgi

Brgds,
Przemek
From druzus at acn.waw.pl  Fri Oct 26 18:03:28 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 26 18:03:35 2007
Subject: [Harbour] Harbour MSVC (VS2005) -O2 warnings
In-Reply-To: <7A9D1D2F-3916-4C7B-899B-355EBF779008@syenar.hu>
References: <7A9D1D2F-3916-4C7B-899B-355EBF779008@syenar.hu>
Message-ID: <20071026180328.GB22391@localhost.localdomain>

On Fri, 26 Oct 2007, Szak?ts Viktor wrote:
> Here are the build results when compiling with MS Visual Studio 2005  
> with -O2 switch, using make_vc.bat:
> source\compiler\gencobj.c(55) : warning C4996: 'access': The POSIX  
> name for this item is deprecated. Instead, use the ISO C++ conformant  
> name: _access. See online help for details.
>         C:\Program Files\Microsoft Visual Studio 8\VC\INCLUDE\io.h 
> (315) : see declaration of 'access'
> source\compiler\gencobj.c(78) : warning C4996: 'access': The POSIX  
> name for this item is deprecated. Instead, use the ISO C++ conformant  
> name: _access. See online help for details.

Surrprised???
MS systematically reduce standard C library in its new compilers.
It means that sth what you are calling Standard ANSI C will also not
work with new MS-Windows version in few years. Some compilers try
to emulate old functionality using macros and/or wrapper functions
and often includes indirectly windows.h - if you will not accept it
then you probably effectively block using Harbour on such platforms
or at least you will make it harder because our code will not be ready
to accept it. I do not want to say that we should force including
windows.h in all files for all builds but if we will have it then
probably we will not have to update code which sudenly will stop to
work with new MSVC version or sth like that. As I said few days ago
I do not want to check each modification line by line if it may or not
interact with some system definitions so I strongly prefer that
developer will see warnings or errors himself before commit.
Additionaly we are not using autoconf which may generate our own header
files at startup. It means that we have to include system dependent files
to check the size of basic C types. Number of supported platforms is
growing up, existing OSes are ported to different hardware and even if
we can hardcode sth now then it does not mean that it will be possible
in the future because it maybe forced by not our decision.
The above is a digression to other subject.

[...]
> source\rtl\hbcrc.c(215) : warning C4334: '<<' : result of 32-bit  
> shift implicitly converted to 64 bits (was 64-bit shift intended?)

It's true - my typo and I'll fix it. Thanks for the info.

[...]
You can ignore rest or if you want to pacify these warnings
add explicit casting though in few places like in genhrb.c(102)
I suggest to keep the warning because it's sth what we will have
to address in new .HRB format. If it was full list then I can
try to clean some unimportant warnings.

> + lots of strange link warnings like this, but everything links and  
> works.
> warning LNK4254: section '.CRT' (40000040) merged into  
> '.data' (C0000040) with different attributes

I guess it's effect of keeping the hack with pure MSC startup code
initialization in C++ mode. See hbinit.h for some comments I left
about it.


#if defined(_MSC_VER) && !defined(_WIN64) && \
    !defined(__LCC__) && !defined(__POCC__) && !defined(__XCC__) && \
    !defined(HARBOUR_STRICT_ANSI_C) && !defined(HB_STATIC_STARTUP) && \
    !defined(HB_PRAGMA_STARTUP) && !defined(HB_MSC_STARTUP)

   /* In order to maintain compatibility with other products, MSVC should
      always use this startup.  If you know that you can use HB_STATIC_STARTUP
      below, then all you need to do is define HB_STATIC_STARTUP to the
      compiler.

      Sat 07 Maj 2005 02:46:38 CEST
      This is only necessary when you want to create binary libs using
      MSC in C++ mode (-TP switch) and later this binaries will be linked
      by standard C linker with [x]Harbour programs. I strongly suggest
      to for 3-rd party developers to use MSC in standard C mode to create
      libraries which can be used with standard C compilers. This will
      eliminate the problem and we will be able to set C++ initialization
      as default for MSC in C++ mode. Druzus.
   */

   #define HB_MSC_STARTUP

#endif


Just remove this define and test - probably it will eliminates this warnings.

Brgds,
Przemek
From guy.roussin at teledetection.fr  Fri Oct 26 20:22:33 2007
From: guy.roussin at teledetection.fr (=?UTF-8?B?R3V5IFJvdXNzaW4=?= )
Date: Fri Oct 26 18:22:41 2007
Subject: =?UTF-8?B?UmU6IFtIYXJib3VyXSBBYm91dCBndHN0ZCAuLi4=?=
Message-ID: <20071026182233.76B4836852@mafalda.teledetection.fr>

> gtcgi
> 
> Brgds,
> Przemek
Fine,

Thank you,

--
Guy Roussin

___________________________________
http://www.teledetection.fr


From harbour.01 at syenar.hu  Fri Oct 26 18:46:35 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 26 18:46:36 2007
Subject: [Harbour] CHANGELOG: 2007-10-26 20:46 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c81800$Blat.v2.6.2$89177d46$123422915da4@127.0.0.1>

2007-10-26 20:46 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * contrib/win32/w32_prn.c
     + Using hb_retptrGC()/hb_parptrGC().

   * source/rtl/filesys.c
     ! DosToWinHandle() made static.
     ; Minor formatting.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Oct 26 19:21:35 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 26 19:21:42 2007
Subject: [Harbour] Harbour MSVC (VS2005) -O2 warnings
In-Reply-To: <20071026180328.GB22391@localhost.localdomain>
References: <7A9D1D2F-3916-4C7B-899B-355EBF779008@syenar.hu>
	<20071026180328.GB22391@localhost.localdomain>
Message-ID: <7DD14B10-1612-4FE1-9E4B-1567B5BEE44F@syenar.hu>

Hi Przemek,

On 2007.10.26., at 20:03, Przemyslaw Czerpak wrote:

> On Fri, 26 Oct 2007, Szak?ts Viktor wrote:
>> Here are the build results when compiling with MS Visual Studio 2005
>> with -O2 switch, using make_vc.bat:
>> source\compiler\gencobj.c(55) : warning C4996: 'access': The POSIX
>> name for this item is deprecated. Instead, use the ISO C++ conformant
>> name: _access. See online help for details.
>>         C:\Program Files\Microsoft Visual Studio 8\VC\INCLUDE\io.h
>> (315) : see declaration of 'access'
>> source\compiler\gencobj.c(78) : warning C4996: 'access': The POSIX
>> name for this item is deprecated. Instead, use the ISO C++ conformant
>> name: _access. See online help for details.
>
> Surrprised???

I'm not suprised of anything when it comes to MS products :)

> MS systematically reduce standard C library in its new compilers.
> It means that sth what you are calling Standard ANSI C will also not
> work with new MS-Windows version in few years. Some compilers try

Once MS advertized their new NT OS as POSIX compliant, apparently
these days are over.

But FWIW access() is not an ANSI C function, so it's better not to use
it in the first place.

A bit off: For this functionality it would be good to have an optimized
hb_fsFileExists() or hb_fsFNameGetAttr() function using  
GetFileAttribute()/stat()
in the RTL.

> to emulate old functionality using macros and/or wrapper functions
> and often includes indirectly windows.h - if you will not accept it
> then you probably effectively block using Harbour on such platforms
> or at least you will make it harder because our code will not be ready
> to accept it. I do not want to say that we should force including
> windows.h in all files for all builds but if we will have it then
> probably we will not have to update code which sudenly will stop to
> work with new MSVC version or sth like that. As I said few days ago
> I do not want to check each modification line by line if it may or not
> interact with some system definitions so I strongly prefer that
> developer will see warnings or errors himself before commit.
> Additionaly we are not using autoconf which may generate our own  
> header
> files at startup. It means that we have to include system dependent  
> files
> to check the size of basic C types. Number of supported platforms is
> growing up, existing OSes are ported to different hardware and even if
> we can hardcode sth now then it does not mean that it will be possible
> in the future because it maybe forced by not our decision.
> The above is a digression to other subject.

I understand your point, but I still see no fundamental difference
between windows.h and let's say "osx.h" (which is a theoretical
header which would include all OSX specific API). Why should we treat
windows.h differently than other platforms? Just because it is big,
ugly and really getting in the way all the time, doesn't make it a
canditate for such a move IMO.

For testing purposes though, to see how well our code copes with
windows.h everywhere, it's very easy to include windows.h in every
source files, just by changing one line in hbdefs.h

> [...]
>> source\rtl\hbcrc.c(215) : warning C4334: '<<' : result of 32-bit
>> shift implicitly converted to 64 bits (was 64-bit shift intended?)
>
> It's true - my typo and I'll fix it. Thanks for the info.
>
> [...]
> You can ignore rest or if you want to pacify these warnings
> add explicit casting though in few places like in genhrb.c(102)
> I suggest to keep the warning because it's sth what we will have
> to address in new .HRB format. If it was full list then I can
> try to clean some unimportant warnings.

Okey!

>> + lots of strange link warnings like this, but everything links and
>> works.
>> warning LNK4254: section '.CRT' (40000040) merged into
>> '.data' (C0000040) with different attributes
>
> I guess it's effect of keeping the hack with pure MSC startup code
> initialization in C++ mode. See hbinit.h for some comments I left
> about it.
>
> #if defined(_MSC_VER) && !defined(_WIN64) && \
>     !defined(__LCC__) && !defined(__POCC__) && !defined(__XCC__) && \
>     !defined(HARBOUR_STRICT_ANSI_C) && !defined(HB_STATIC_STARTUP)  
> && \
>     !defined(HB_PRAGMA_STARTUP) && !defined(HB_MSC_STARTUP)
>
>    /* In order to maintain compatibility with other products, MSVC  
> should
>       always use this startup.  If you know that you can use  
> HB_STATIC_STARTUP
>       below, then all you need to do is define HB_STATIC_STARTUP to  
> the
>       compiler.
>
>       Sat 07 Maj 2005 02:46:38 CEST
>       This is only necessary when you want to create binary libs using
>       MSC in C++ mode (-TP switch) and later this binaries will be  
> linked
>       by standard C linker with [x]Harbour programs. I strongly  
> suggest
>       to for 3-rd party developers to use MSC in standard C mode to  
> create
>       libraries which can be used with standard C compilers. This will
>       eliminate the problem and we will be able to set C++  
> initialization
>       as default for MSC in C++ mode. Druzus.
>    */
>
>    #define HB_MSC_STARTUP
>
> #endif
>
>
> Just remove this define and test - probably it will eliminates this  
> warnings.

I've tried, and by default I got this:
include\hbinit.h(218) : fatal error C1189: #error :  Unkown  
initialization method.

Then I set HB_BUILD_MODE=cpp, and it got built without the link  
warnings, and
the new compile errors surfaced in C++ mode:

harbour.y(2422) : warning C4805: '==' : unsafe mix of type 'BOOL' and  
type 'bool' in operation
macroy.c(1767) : warning C4065: switch statement contains 'default'  
but no 'case' labels
source\hbpcre\pcrecomp.c(539) : warning C4065: switch statement  
contains 'default' but no 'case' labels
utils\hbmake\hbmlang.c(291) : warning C4244: 'argument' : conversion  
from 'long' to 'SHORT', possible loss of data
utils\hbmake\hbmlang.c(291) : warning C4244: 'argument' : conversion  
from 'long' to 'SHORT', possible loss of data
utils\hbmake\hbmlang.c(291) : warning C4244: 'argument' : conversion  
from 'long' to 'SHORT', possible loss of data
utils\hbmake\hbmlang.c(291) : warning C4244: 'argument' : conversion  
from 'long' to 'SHORT', possible loss of data

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Oct 26 19:39:01 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 26 19:39:08 2007
Subject: [Harbour] ppgen -> hbppgen?
Message-ID: <F681DA47-5D6C-475D-8461-703C167A1FEF@syenar.hu>

Hi Przemek,

Do you see anything wrong with renaming ppgen to hbppgen
to be in sync with the rest of our binaries?

Brgds,
Viktor

From druzus at acn.waw.pl  Fri Oct 26 21:02:42 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Oct 26 21:02:50 2007
Subject: [Harbour] ppgen -> hbppgen?
In-Reply-To: <F681DA47-5D6C-475D-8461-703C167A1FEF@syenar.hu>
References: <F681DA47-5D6C-475D-8461-703C167A1FEF@syenar.hu>
Message-ID: <20071026210242.GC22391@localhost.localdomain>

On Fri, 26 Oct 2007, Szak?ts Viktor wrote:
> Hi Przemek,
> Do you see anything wrong with renaming ppgen to hbppgen
> to be in sync with the rest of our binaries?

No. IMO very good idea - I should make it myself when I was adding it.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Oct 26 21:13:27 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 26 21:13:44 2007
Subject: [Harbour] ppgen -> hbppgen?
In-Reply-To: <20071026210242.GC22391@localhost.localdomain>
References: <F681DA47-5D6C-475D-8461-703C167A1FEF@syenar.hu>
	<20071026210242.GC22391@localhost.localdomain>
Message-ID: <EA6B735D-B8F3-4C6F-ACCD-5BE263854DA5@syenar.hu>

Thanks. I'll do it.

Brgds,
Viktor

On 2007.10.26., at 23:02, Przemyslaw Czerpak wrote:

> On Fri, 26 Oct 2007, Szak?ts Viktor wrote:
>> Hi Przemek,
>> Do you see anything wrong with renaming ppgen to hbppgen
>> to be in sync with the rest of our binaries?
>
> No. IMO very good idea - I should make it myself when I was adding it.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Oct 26 23:27:08 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 26 23:27:06 2007
Subject: [Harbour] CHANGELOG: 2007-10-27 01:23 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c81827$Blat.v2.6.2$ba171448$e30c51e563e@127.0.0.1>

2007-10-27 01:23 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * include/hbsetup.h
     - Removed HOST_OS_UNIX_COMPATIBLE which was a misleading 
       alias for OS_UNIX_COMPATIBLE.

   * source/compiler/hbcomp.c
     % HOST_OS_UNIX_COMPATIBLE -> OS_UNIX_COMPATIBLE

   * common.mak
   * harbour-ce-spec
   * make_xmingw.sh
   * make_xmingwce.sh
   * makefile.bc
   * makefile.gc
   * makefile.vc
   * source/pp/Makefile
   - source/pp/ppgen.c
   + source/pp/hbppgen.c
     ! executable ppgen renamed to hbppgen.

   * samples/pe/editorlo.c
   * samples/pe/pe.prg
   + samples/pe/bld_b32.bat
     + Added BCC build batch file.
     ! Fixed to compile under current Harbour.
     ! Fixed filename casing.
     ! Fixed several warnings (quite some signedness problem still remain).
     ; This is a very nice editor written in C (Harbour callable),
       I think it is the work of Ryszard.

   * samples/hscript/bld_b32.bat
   * samples/hscript/hscript.prg
   * samples/hscript/dir.hs
   * samples/hscript/multiply.hs
   * samples/hscript/ugly.hs
   * samples/hscript/hello.hs
     ! Fixed build batch file.
     ! Fixed to use NFLib file IO rather than libmisc, because 
       latter was broken (it is a clone of the NFLib file IO).
     ! Fixed scripts to use Start instead of Main as an entry 
       point otherwise __hrbRun() got confused and called the 
       app Main().
     ! Fixed some other problems to make it run.
--
Brgds,
Viktor

From jarabal at ya.com  Fri Oct 26 23:33:47 2007
From: jarabal at ya.com (Javier)
Date: Fri Oct 26 23:33:55 2007
Subject: [Harbour] ppgen -> hbppgen?
In-Reply-To: <EA6B735D-B8F3-4C6F-ACCD-5BE263854DA5@syenar.hu>
References: <F681DA47-5D6C-475D-8461-703C167A1FEF@syenar.hu>	<20071026210242.GC22391@localhost.localdomain>
	<EA6B735D-B8F3-4C6F-ACCD-5BE263854DA5@syenar.hu>
Message-ID: <4722795B.6040302@ya.com>

No comment.

Szak?ts Viktor escribi?:
> Thanks. I'll do it.
>
> Brgds,
> Viktor
>
> On 2007.10.26., at 23:02, Przemyslaw Czerpak wrote:
>
>> On Fri, 26 Oct 2007, Szak?ts Viktor wrote:
>>> Hi Przemek,
>>> Do you see anything wrong with renaming ppgen to hbppgen
>>> to be in sync with the rest of our binaries?
>>
>> No. IMO very good idea - I should make it myself when I was adding it.
>>
>> best regards,
>> Przemek
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From harbour.01 at syenar.hu  Fri Oct 26 23:37:23 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Oct 26 23:37:29 2007
Subject: [Harbour] ppgen -> hbppgen?
In-Reply-To: <4722795B.6040302@ya.com>
References: <F681DA47-5D6C-475D-8461-703C167A1FEF@syenar.hu>	<20071026210242.GC22391@localhost.localdomain>
	<EA6B735D-B8F3-4C6F-ACCD-5BE263854DA5@syenar.hu>
	<4722795B.6040302@ya.com>
Message-ID: <27311964-5E08-4F68-952E-535FD1DF31B9@syenar.hu>

?

On 2007.10.27., at 1:33, Javier wrote:

> No comment.
>
> Szak?ts Viktor escribi?:
>> Thanks. I'll do it.
>>
>> Brgds,
>> Viktor
>>
>> On 2007.10.26., at 23:02, Przemyslaw Czerpak wrote:
>>
>>> On Fri, 26 Oct 2007, Szak?ts Viktor wrote:
>>>> Hi Przemek,
>>>> Do you see anything wrong with renaming ppgen to hbppgen
>>>> to be in sync with the rest of our binaries?
>>>
>>> No. IMO very good idea - I should make it myself when I was  
>>> adding it.
>>>
>>> best regards,
>>> Przemek
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Sat Oct 27 01:41:59 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Oct 27 01:42:07 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <DA48CD6B-3D98-492F-8142-736DF496FBE4@syenar.hu>
References: <002a01c816fe$ad425950$1700000a@PcJuanxp>
	<143046DF-15A6-4075-95EA-A7B97DA712F4@syenar.hu>
	<20071025140702.GA2703@localhost.localdomain>
	<2C32A4D4-A433-4658-A8AC-5528909BEFFC@syenar.hu>
	<20071026014829.GA20071@localhost.localdomain>
	<DA48CD6B-3D98-492F-8142-736DF496FBE4@syenar.hu>
Message-ID: <20071027014159.GA23055@localhost.localdomain>

On Fri, 26 Oct 2007, Szak?ts Viktor wrote:
[...]
> I've never suggested to start creating IO/OS dependent libraries
> or wrappers. Harbour's C/prg level APIs are the only wrappers we
> need.

I also thing about wrappers we need but because we are trying to address
as much as possible situations which exists in current OSes then such
library will systematically growing up. There are stil many things which
should be resolved yet, f.e. multiplatform serial and USB port API,
MT API, etc. sooner or later we will need them or number of
    #ifdef HB_OS_*

will be growing up. Maybe it's time to group all such platform dependent
functions in one library.

> Przemek, I don't know what makes you lose your interest, I just can
> hope it will cure, but what exactly are we arguing about here?

it was nothing to you. Sorry my fault. I'm still thinking about
WinCE port and what I've found working on it. In the past Antonio
used to ask me privately about different things bound with [x]Harbour
or C programming, f.e. he was asking me how to resolve some problems
when he was porting FWH to WinCE. I tried to always answer in spare
time. In one of my answerers I asked him to always public patches if
he is distributing modified Harbour binaries and I've found such
information ("modified Harbour version") on his www page. I received
an answer that those were binaries created from original source code
so he cannot public any patches and later I saw that information about
*modified* Harbour version had been removed from WWW. OK, I accepted it.
Personally I thought that he should public build scripts too so also other
people can easy create PocketPC Harbour binaries but it was not very
important for me - if unmodified source code can be compiled then probably
anyone interested can create such scripts. About two months ago one Harbour
programmer (he is reading this list so it can confirm it) asked me about
WinCE Harbour version. I said that he should try FWH for PocketPC or build
Pocket version himself because it should be rather easy job if FWH for
PocketPC is created from unmodified Harbour source code. Few weeks later
he informed me that he gave up and it's to hard for him. So I decided to
make such binaries in spare time. I know that all necessary modifications
in core code for ARM processors was well done because it was my
modifications I needed in SUNOS-SPARC and LINUX-MIPS390 ports. So I thought
that I only need to download valid C compiler define some macros and
run the building process.
And I was very surprised that it's impossible and without modifications
in core code Harbour cannot be compiled for PocketPC because WinCE API
is not compatible with the W95 one we are using in our code and that in
many places we have wrong casting in W32 code which breaks also standard
W32 builds if Unicode is enabled. In WinCE Unicode is always enabled and
there is no pure ASCII mode and ASCII API functions. I'm not MS-Windows
user so I hadn't known about it. I fixed all these places and added some
code necessary only for WinCE so now is possible to build Harbour for
WinCE and also for other MS-Win versions with Unicode support enabled.
It was not a hard job but took me about week because I lost much more
time on looking for C compilers and reading WinCE and Windows documentation
then for coding. In few hours after my commit Antonio suddenly "discovered"
that he had to make modifications in Harbour source code for WinCE port
and send few letters which points to different places in Harbour code he
had to change - he perfectly knew which ones but because he didn't check
or understood new code I added then all his messages are technical nonsense.
Maybe they are valid for the modified Harbour version distributed by him
and he's afraid that his version will not be compatible with current public
Harbour code and it was the reason of his reaction or maybe he remembered
what he wrote to me and understood that I will not longer trust him and
it was the "first move" before I'll wrote about it but it's not my problem
- it's Antonio's and his customers (he is making what he wants because
they are accepting it) problem.

I have other one. We have different license for Harbour compiler
then for HVM and RTLs. So far I though that our intention was to allow
creating commercial software using all Harbour features and forbid
creating Harbour compiler clones from which we cannot benefit by borrowing
modifications and new code. As we can see in the above example it does not
work. Honest people do not even use compiler library in closed source
programs but others violate even the base ideas. To clarify I'm not
interesting in receiving or make public patches used by Antonio now
we have our own WinCE version. I only want to change Harbour compiler
license. It should be more liberal for Harbour compiler users but also
much more restrictive to protect us against people like Antonio.
I do not want to say that I'm against binary distributions. F.e.
xHarbour.com also distributes binaries. But as far as I know they are
from _EXACTLY_ the same source code as in xHarbour SF repository.
No source code modification at all. There is one macro HB_BACK_END in
xharbour/source/compiler/genc.c which is defined by xHarbour.com builds
for direct connection to XCC and because it was not known for users in
the past I asked Ron to public it because in my opinion xHarbour.com
users should be able to rebuild the compiler from current source when
they will want and he did it. So it's possible to have such distributions
and cooperate with non commercial developers and users. This is not a
problem. The problem is if someone takes [x]Harbour source code change
sth and tries to make money for the modified compiler version (even
indirectly) by reducing the access to his modifications.
Seeing such things I have real doubts if there is a sense to continue
any free developing. For sure now I changed my plans about making some
new libraries public.

> I've made a mistake when modifying clipdefs.h (which is _not_ used
> in Harbour core at all, so only 3rd party code could catch this
> error, if I wasn't careful enough before committing), it's now  
> corrected,
> and with this, from my side, the issue is cleared.

As I said I do not have anything against your modifications.
I would like to thank you for all of them.

> What is your opinion on removing the HB_DONT_DEFINE_BASIC_TYPES ugly  
> hack?

It's also hack for using commonly used basic types definition in core code.
It should be removed but I such modification means that we will have to
change also all core code basic types. I do not know if we can make it
now. There is quite big number of 3-rd party code and it will be more
or less effected by such modification. It cannot be only my or your
decision. We will have to ask the whole team about it.

Brgds,
Przemek
From lorenzo.fiorini at gmail.com  Sat Oct 27 05:27:42 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct 27 05:27:46 2007
Subject: [Harbour] Is dbgoto(recno()) after dbunlock() useful?
Message-ID: <9257026e0710262227y3c942e34g80bd6fa8b94efebc@mail.gmail.com>

I'm using the function below since years and I wonder if I can replace
with a plain dbunlock(). Is there anyone that remember a reason for
it?

best regards,
Lorenzo

function RECUNLOCK()

   dbunlock()
   goto recno()

   return NIL
From jarabal at ya.com  Sat Oct 27 05:43:34 2007
From: jarabal at ya.com (Javier)
Date: Sat Oct 27 05:43:43 2007
Subject: [Harbour] ppgen -> hbppgen?
In-Reply-To: <27311964-5E08-4F68-952E-535FD1DF31B9@syenar.hu>
References: <F681DA47-5D6C-475D-8461-703C167A1FEF@syenar.hu>	<20071026210242.GC22391@localhost.localdomain>	<EA6B735D-B8F3-4C6F-ACCD-5BE263854DA5@syenar.hu>	<4722795B.6040302@ya.com>
	<27311964-5E08-4F68-952E-535FD1DF31B9@syenar.hu>
Message-ID: <4722D006.8050304@ya.com>

Viktor & Przemek,
Please excuse me, has left this quick and thinking in many things, by 
the type and form of change in a short time.
Thanks and sorry, this is a mailing list and it is impossible to *erase*

Best regards,
Xavi
From antonioharbour at gmail.com  Sat Oct 27 08:11:31 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sat Oct 27 08:11:53 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <20071027014159.GA23055@localhost.localdomain>
Message-ID: <4722f2c4.0cba5e0a.0c30.ffffc3b7@mx.google.com>

Przemek,

I would love to use standard Harbour svn code to build Harbour for Pocket
PC, but unfortunately, there are many required changes that have to be
implemented, and you simply ignore my msgs! You have not answered any of my
public msgs about that issue here on the list.

And now you come acussing me! Friendly I tell you that you are "paranoid"
about me :-)

If you ignore my msgs, what else can I do ?  

Best regards,

Antonio

From antonioharbour at gmail.com  Sat Oct 27 08:39:56 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sat Oct 27 08:40:24 2007
Subject: [Harbour] Changes in clipdefs.h
Message-ID: <4722f970.1f145e0a.0fed.ffffbae4@mx.google.com>

Przemek, 

> You have not answered any of my public msgs about that issue here on the
list.

And I am not just talking about recent msgs. I started talking in this list
about unicode support for Harbour since almost two years ago, when I started
Harbour for Pocket PC. And you have _always_, _systematically_, ignored my
msgs about unicode.

Please search for unicode in this list msgs and you will confirm what I am
saying,

Regards,

Antonio

From a.jurkiewicz at abix.info.pl  Sat Oct 27 10:26:26 2007
From: a.jurkiewicz at abix.info.pl (ABIX - Adam Jurkiewicz)
Date: Sat Oct 27 10:25:50 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <20071027014159.GA23055@localhost.localdomain>
References: <002a01c816fe$ad425950$1700000a@PcJuanxp>
	<DA48CD6B-3D98-492F-8142-736DF496FBE4@syenar.hu>
	<20071027014159.GA23055@localhost.localdomain>
Message-ID: <200710271226.27188.a.jurkiewicz@abix.info.pl>

Dnia sobota, 27 pa?dziernika 2007 03:41, Przemyslaw Czerpak napisa?:
> On Fri, 26 Oct 2007, Szak?ts Viktor wrote:
> [...]
>

> [...]  About two months ago one Harbour
> programmer (he is reading this list so it can confirm it) asked me about
> WinCE Harbour version. I said that he should try FWH for PocketPC or build
> Pocket version himself because it should be rather easy job if FWH for
> PocketPC is created from unmodified Harbour source code. Few weeks later
> he informed me that he gave up and it's to hard for him. So I decided to
> make such binaries in spare time. [...]
Of course I confirm all Przemek's words.

And a word to Antonio: take a look on that Przemek has very limited time to 
answer, even I have problems to contact him or get answers sometimes. But on 
the other hand he is probably the best programmer I have ever seen.

Thats all,
best regards
Adam
-- 
ABIX - Linuksowe Systemy Wspomagania Biznesu
Wsparcie fiskalne  : http://www.abix.info.pl/wsparcie/
Skype : abix_adamj | Gadu-Gadu : 302315 | JabberID: adasiek@jabber.text.pl
Wsparcie aplikacji : http://groups-beta.google.com/group/abix-rcsoft?hl=pl
GnuPG Key => http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xA810E4FB
From harbour.01 at syenar.hu  Sat Oct 27 10:59:29 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 27 10:59:38 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <4722f970.1f145e0a.0fed.ffffbae4@mx.google.com>
References: <4722f970.1f145e0a.0fed.ffffbae4@mx.google.com>
Message-ID: <4350CF93-4AD5-464D-B231-3C6DB62B958A@syenar.hu>

Hi Antonio,

Sorry to jump in, and aside from your personal
matters with Przemek (*), could you publish any
patches you've made for Harbour to solve some of
these problems? Your contribution and experiences
would surely help the project to advance in these
areas.

(*) As for anybody not answering here in a given
timeframe, or at all: This is an OSS project and
everyone is giving his/her _own_ time for free.
In other words: answering (how, when, to what extend,
how quicly, etc) is not an _obligation_, but a _bonus_.
Take it like this. And the least thing others can
do to honor someone's efforts, is to _contribute_
to the group with his own time, efforts and
experiences. That's what OSS is about.

Brgds,
Viktor

On 2007.10.27., at 10:39, Antonio Linares wrote:

> Przemek,
>
>> You have not answered any of my public msgs about that issue here  
>> on the
> list.
>
> And I am not just talking about recent msgs. I started talking in  
> this list
> about unicode support for Harbour since almost two years ago, when  
> I started
> Harbour for Pocket PC. And you have _always_, _systematically_,  
> ignored my
> msgs about unicode.
>
> Please search for unicode in this list msgs and you will confirm  
> what I am
> saying,
>
> Regards,
>
> Antonio
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mpaliwoda at interia.pl  Sat Oct 27 11:25:58 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sat Oct 27 11:26:04 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <4350CF93-4AD5-464D-B231-3C6DB62B958A@syenar.hu>
References: <4722f970.1f145e0a.0fed.ffffbae4@mx.google.com>
	<4350CF93-4AD5-464D-B231-3C6DB62B958A@syenar.hu>
Message-ID: <47232046.4070302@interia.pl>

Hi Viktor,

> Sorry to jump in, and aside from your personal
> matters with Przemek (*), could you publish any
> patches you've made for Harbour to solve some of
> these problems? Your contribution and experiences
> would surely help the project to advance in these
> areas.
> 
> (*) As for anybody not answering here in a given
> timeframe, or at all: This is an OSS project and
> everyone is giving his/her _own_ time for free.
> In other words: answering (how, when, to what extend,
> how quicly, etc) is not an _obligation_, but a _bonus_.
> Take it like this. And the least thing others can
> do to honor someone's efforts, is to _contribute_
> to the group with his own time, efforts and
> experiences. That's what OSS is about.

Exactly.

-- 

Marek
From info at fsgiudice.com  Sat Oct 27 11:50:06 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Oct 27 11:54:23 2007
Subject: [Harbour] Changes in clipdefs.h
References: <4722f970.1f145e0a.0fed.ffffbae4@mx.google.com><4350CF93-4AD5-464D-B231-3C6DB62B958A@syenar.hu>
	<47232046.4070302@interia.pl>
Message-ID: <01f901c81890$1893dd40$b400f50a@ASUSFSG>


----- Original Message ----- 
From: "Marek Paliwoda" <mpaliwoda@interia.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Saturday, October 27, 2007 1:25 PM
Subject: Re: [Harbour] Changes in clipdefs.h


> Hi Viktor,
> 
>> Sorry to jump in, and aside from your personal
>> matters with Przemek (*), could you publish any
>> patches you've made for Harbour to solve some of
>> these problems? Your contribution and experiences
>> would surely help the project to advance in these
>> areas.
>> 
>> (*) As for anybody not answering here in a given
>> timeframe, or at all: This is an OSS project and
>> everyone is giving his/her _own_ time for free.
>> In other words: answering (how, when, to what extend,
>> how quicly, etc) is not an _obligation_, but a _bonus_.
>> Take it like this. And the least thing others can
>> do to honor someone's efforts, is to _contribute_
>> to the group with his own time, efforts and
>> experiences. That's what OSS is about.
> 
> Exactly.
> 

+1

Francesco

From antonioharbour at gmail.com  Sat Oct 27 12:37:06 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sat Oct 27 12:37:29 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <4350CF93-4AD5-464D-B231-3C6DB62B958A@syenar.hu>
Message-ID: <47233104.201f5e0a.2b80.ffffd5de@mx.google.com>

Viktor, 

> ... to solve some of these problems ? 

What exact problems do you refeer to ?

Regards,

Antonio

From antonioharbour at gmail.com  Sat Oct 27 13:03:28 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sat Oct 27 13:03:32 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <47233104.201f5e0a.2b80.ffffd5de@mx.google.com>
References: <4350CF93-4AD5-464D-B231-3C6DB62B958A@syenar.hu>
	<47233104.201f5e0a.2b80.ffffd5de@mx.google.com>
Message-ID: <9471afc80710270603y139c5bb8q703557f406dfd1ba@mail.gmail.com>

Viktor,

Please review rtl/filesys.c and you will see that CreateFileA() is used.

Windows Mobile requires CreateFileW(). This is the third (or fourth)
time that I comment this on this list, and nobody seems to care.

Regards,

Antonio
From jfl at mafact.com  Sat Oct 27 13:37:00 2007
From: jfl at mafact.com (J. Lefebvre)
Date: Sat Oct 27 13:37:52 2007
Subject: [Harbour] Changes in clipdefs.h
Message-ID: <8924b8e6.1c8189e.5e80286.4ae1@mafact.com>

Hi Antonio,

I can understand any developper here wich know you have already done those modification without sharing your experience.
It's your choice, but it could discourage some developer who work very hard on (x)Harbour.

Just my two cents,

Regards,

JF, 

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Antonio Linares
Sent: Saturday, October 27, 2007 3:03 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Changes in clipdefs.h

Viktor,

Please review rtl/filesys.c and you will see that CreateFileA() is used.

Windows Mobile requires CreateFileW(). This is the third (or fourth) time that I comment this on this list, and nobody seems to care.

Regards,

Antonio
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From antonioharbour at gmail.com  Sat Oct 27 13:51:42 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sat Oct 27 13:51:47 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <8924b8e6.1c8189e.5e80286.4ae1@mafact.com>
References: <8924b8e6.1c8189e.5e80286.4ae1@mafact.com>
Message-ID: <9471afc80710270651u26d59f71w71175bc8aa49f510@mail.gmail.com>

Dear JF,

Could you please explain me what you don't understand in this sentence ?

"Change CreateFileA() into CreateFileW(), for Windows Mobile"

:-)

Regards,

Antonio
From harbour.01 at syenar.hu  Sat Oct 27 13:55:52 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 27 13:56:17 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <47233104.201f5e0a.2b80.ffffd5de@mx.google.com>
References: <47233104.201f5e0a.2b80.ffffd5de@mx.google.com>
Message-ID: <7646DCDD-510E-46A7-81C6-FB7CA3D9F833@syenar.hu>

Hi Antonio,

On 2007.10.27., at 14:37, Antonio Linares wrote:

> Viktor,
>
>> ... to solve some of these problems ?
>
> What exact problems do you refeer to ?

I was not referring to any specific problem, since this was
not the point of my message.

The point is to publish the changes you've made to Harbour
locally, and/or share any experiences you got in the process
so that the project can also benefit. One possible example
was mentioned in Przemek's mail (WinCE port), but you both
probably know better what is the exact issue here.

We have to respect each others work, the copyrights and
our license ..and to contribute, not just ask for more.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Oct 27 13:59:39 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 27 13:59:48 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <9471afc80710270603y139c5bb8q703557f406dfd1ba@mail.gmail.com>
References: <4350CF93-4AD5-464D-B231-3C6DB62B958A@syenar.hu>
	<47233104.201f5e0a.2b80.ffffd5de@mx.google.com>
	<9471afc80710270603y139c5bb8q703557f406dfd1ba@mail.gmail.com>
Message-ID: <5C2F31F3-91D5-4B9E-AF05-7C5FD56C5998@syenar.hu>


On 2007.10.27., at 15:03, Antonio Linares wrote:

> Viktor,
>
> Please review rtl/filesys.c and you will see that CreateFileA() is  
> used.
>
> Windows Mobile requires CreateFileW(). This is the third (or fourth)
> time that I comment this on this list, and nobody seems to care.

That's nice, but did you send a fixed version of this file?
did you try commit something?

Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Oct 27 14:05:12 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 27 14:05:13 2007
Subject: [Harbour] CHANGELOG: 2007-10-27 16:04 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c818a2$Blat.v2.6.2$6441d064$d4ccee453c0@127.0.0.1>

2007-10-27 16:04 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * source/compiler/gencobj.c
     ! HOST_OS_UNIX_COMPATIBLE -> OS_UNIX_COMPATIBLE
--
Brgds,
Viktor

From antonioharbour at gmail.com  Sat Oct 27 14:24:41 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sat Oct 27 14:24:46 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <5C2F31F3-91D5-4B9E-AF05-7C5FD56C5998@syenar.hu>
References: <4350CF93-4AD5-464D-B231-3C6DB62B958A@syenar.hu>
	<47233104.201f5e0a.2b80.ffffd5de@mx.google.com>
	<9471afc80710270603y139c5bb8q703557f406dfd1ba@mail.gmail.com>
	<5C2F31F3-91D5-4B9E-AF05-7C5FD56C5998@syenar.hu>
Message-ID: <9471afc80710270724i4ac62e9fr1655200195b5a259@mail.gmail.com>

Viktor,

> but did you send a fixed version of this file ?

If I commit filesys.c then I will break the current Harbour because it
just work for Windows Mobile.

Do you understand it ?

Regards,

Antonio
From jfl at mafact.com  Sat Oct 27 14:27:00 2007
From: jfl at mafact.com (J. Lefebvre)
Date: Sat Oct 27 14:27:56 2007
Subject: [Harbour] Changes in clipdefs.h
Message-ID: <896d5b58.1c818a5.615e46f.3d6c@mafact.com>

Antonio,

The problem is not about understanding what you say.

First when you asked about this problem (Harbour to Win-Ce) nobody seem to have any time to do so.
You then decided to implement those modification by yourself and you reach some good result.

The problem is that for the first you don't shared your work, and now you tend to say we (all the developer here) had to do the job following you guideline.

Yes, it's clear there is some (many) thinks to change to have (x)Harbour to run on Win-CE, but if you already does the job, why ask us to do it now ?

Nothing against you, just that I don't understand your way.

Regards,

JF,

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Antonio Linares
Sent: Saturday, October 27, 2007 3:52 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Changes in clipdefs.h

Dear JF,

Could you please explain me what you don't understand in this sentence ?

"Change CreateFileA() into CreateFileW(), for Windows Mobile"

:-)

Regards,

Antonio
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sat Oct 27 14:34:09 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 27 14:34:18 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <9471afc80710270724i4ac62e9fr1655200195b5a259@mail.gmail.com>
References: <4350CF93-4AD5-464D-B231-3C6DB62B958A@syenar.hu>
	<47233104.201f5e0a.2b80.ffffd5de@mx.google.com>
	<9471afc80710270603y139c5bb8q703557f406dfd1ba@mail.gmail.com>
	<5C2F31F3-91D5-4B9E-AF05-7C5FD56C5998@syenar.hu>
	<9471afc80710270724i4ac62e9fr1655200195b5a259@mail.gmail.com>
Message-ID: <CAB14BAD-9ADE-4F36-8985-1A8DFCFE5698@syenar.hu>

You can send a patch, or you can post your modified file(s).

God forbit! you may invest some time to integrate your local
patch to the current Harbour stat to not break anything, and
send this file, or send this patch.

Brgds,
Viktor

On 2007.10.27., at 16:24, Antonio Linares wrote:

> Viktor,
>
>> but did you send a fixed version of this file ?
>
> If I commit filesys.c then I will break the current Harbour because it
> just work for Windows Mobile.
>
> Do you understand it ?
>
> Regards,
>
> Antonio
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From antonioharbour at gmail.com  Sat Oct 27 14:38:55 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sat Oct 27 14:39:02 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <896d5b58.1c818a5.615e46f.3d6c@mafact.com>
References: <896d5b58.1c818a5.615e46f.3d6c@mafact.com>
Message-ID: <9471afc80710270738mfe93889w8cf33ba51ad6ce05@mail.gmail.com>

JF,

In order to use Windows Mobile APIs we need to have unicode support in
Harbour, as Windows Mobile requires unicode.

So I asked Przemek and this list about unicode support for Harbour,
because I use Windows Mobile's unicode, and not Linux's one, etc. so I
can't commit my code.

Its my intention to store my changes in the Harbour svn but without
unicode support, I simply can't. Thats why I said: "Use CreateFileW()
instead of CreateFileA()" as CreateFileW() requires unicode, so is we
are able to do that change, then we will be ready for all the other
changes, that I will be happy to explain and share in detail.

regards,

Antonio
From antonioharbour at gmail.com  Sat Oct 27 14:46:05 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sat Oct 27 14:46:08 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <CAB14BAD-9ADE-4F36-8985-1A8DFCFE5698@syenar.hu>
References: <4350CF93-4AD5-464D-B231-3C6DB62B958A@syenar.hu>
	<47233104.201f5e0a.2b80.ffffd5de@mx.google.com>
	<9471afc80710270603y139c5bb8q703557f406dfd1ba@mail.gmail.com>
	<5C2F31F3-91D5-4B9E-AF05-7C5FD56C5998@syenar.hu>
	<9471afc80710270724i4ac62e9fr1655200195b5a259@mail.gmail.com>
	<CAB14BAD-9ADE-4F36-8985-1A8DFCFE5698@syenar.hu>
Message-ID: <9471afc80710270746l429cd540r1571b80ca741a64a@mail.gmail.com>

Viktor,

This is my patch:

      LPWSTR pUFileName = AnsiToUnicode( ( char * ) pFilename );
      ...
      hFile = ( HANDLE ) CreateFileW( pUFileName, dwMode, dwShare,
                                      NULL, dwCreat, dwAttr, NULL );
      hb_xfree( pUFileName );

is it usefull in some way for you ?

regards,

Antonio
From harbour.01 at syenar.hu  Sat Oct 27 14:49:49 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 27 14:49:56 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <9471afc80710270738mfe93889w8cf33ba51ad6ce05@mail.gmail.com>
References: <896d5b58.1c818a5.615e46f.3d6c@mafact.com>
	<9471afc80710270738mfe93889w8cf33ba51ad6ce05@mail.gmail.com>
Message-ID: <4118361D-4BD2-4B65-9787-A879ACBD6DFC@syenar.hu>

Antonio,

Why don't you post you modified Harbour source tree
somewhere, I'm sure it would be helpful. Even for
implementing unicode in Harbour.

Brgds,
Viktor

On 2007.10.27., at 16:38, Antonio Linares wrote:

> JF,
>
> In order to use Windows Mobile APIs we need to have unicode support in
> Harbour, as Windows Mobile requires unicode.
>
> So I asked Przemek and this list about unicode support for Harbour,
> because I use Windows Mobile's unicode, and not Linux's one, etc. so I
> can't commit my code.
>
> Its my intention to store my changes in the Harbour svn but without
> unicode support, I simply can't. Thats why I said: "Use CreateFileW()
> instead of CreateFileA()" as CreateFileW() requires unicode, so is we
> are able to do that change, then we will be ready for all the other
> changes, that I will be happy to explain and share in detail.
>
> regards,
>
> Antonio
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sat Oct 27 14:52:03 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 27 14:52:01 2007
Subject: [Harbour] CHANGELOG: 2007-10-27 16:46 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c818a8$Blat.v2.6.2$efbbfd8a$15b017f8887e@127.0.0.1>

2007-10-27 16:46 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * include/hbapifs.h
   * source/common/hbfsapi.c
     ! Added missing HB_EXPORTs.
     + Added hb_fsFileExists(). This is the preferred way to check 
       for the existence of a file, because it is fast and will 
       find a file even of directory traversal is not possible 
       for the file's directory. Works the same way as file 
       existence check in most other tools.
     ; NOTE: DOS branch was not compiled or tested (it is a 
             rewrite of a tested ASM function though).

   * common.mak
   * include/hbextern.ch
   * source/rtl/Makefile
   + source/rtl/hbfile.c
     + Added HB_FILEEXISTS() Harbour level function to check 
       for the existence of a file. This works better than 
       FILE() in most situations, but it doesn't accept any 
       wildcards.

   * source/compiler/gencobj.c
     ! Fixed to not used access(). Using hb_fsFileExists() instead.
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Oct 27 15:00:52 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 27 15:01:05 2007
Subject: [Harbour] CHANGELOG: 2007-10-27 16:57 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c818aa$Blat.v2.6.2$2b0172a2$eec78795ca4@127.0.0.1>

2007-10-27 16:57 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * include/hbapifs.h
   * source/rtl/fserror.c
   * source/rtl/philes.c
   * source/rtl/philes53.c
     ! Two FS API functions moved the hb_fs*() namespace:
       hb_getFError() -> hb_fsGetFError()
       hb_setFError() -> hb_fsSetFError()
--
Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Oct 27 15:25:28 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 27 15:25:54 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <9471afc80710270746l429cd540r1571b80ca741a64a@mail.gmail.com>
References: <4350CF93-4AD5-464D-B231-3C6DB62B958A@syenar.hu>
	<47233104.201f5e0a.2b80.ffffd5de@mx.google.com>
	<9471afc80710270603y139c5bb8q703557f406dfd1ba@mail.gmail.com>
	<5C2F31F3-91D5-4B9E-AF05-7C5FD56C5998@syenar.hu>
	<9471afc80710270724i4ac62e9fr1655200195b5a259@mail.gmail.com>
	<CAB14BAD-9ADE-4F36-8985-1A8DFCFE5698@syenar.hu>
	<9471afc80710270746l429cd540r1571b80ca741a64a@mail.gmail.com>
Message-ID: <42E93E9F-29F5-48DB-B4A4-35913295691D@syenar.hu>

Yes, thanks. I'm personally interested in the Unicode part of
it, not so much in WinCE.

Two things left me wondering:

- if your WinCE port is just these three lines of modification,
   what makes you stop committing this fix directly?
   Guarded with HB_WINCE, it wouldn't cause any harm.

- if your WinCE port it is not just these three lines, what makes
   you hold back to post your full set of changes?

I'm not a legal person, so just by considering the huge amount
of work put into Harbour lately (mostly by Przemek), the latter
would be a nice gesture from you.

Brgds,
Viktor

On 2007.10.27., at 16:46, Antonio Linares wrote:

> Viktor,
>
> This is my patch:
>
>       LPWSTR pUFileName = AnsiToUnicode( ( char * ) pFilename );
>       ...
>       hFile = ( HANDLE ) CreateFileW( pUFileName, dwMode, dwShare,
>                                       NULL, dwCreat, dwAttr, NULL );
>       hb_xfree( pUFileName );
>
> is it usefull in some way for you ?
>
> regards,
>
> Antonio
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sat Oct 27 15:54:22 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 27 15:54:19 2007
Subject: [Harbour] CHANGELOG: 2007-10-27 17:50 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c818b1$Blat.v2.6.2$a452f5fc$1078b446f0ae@127.0.0.1>

2007-10-27 17:50 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * utils/hbpp/pragma.c
   * source/rtl/binnum.c
   * source/rtl/direct.c
     ! Some VS2005 -O2 warnings.
       One TOFIX added at the same time, since DIRECTORY()
       has a problem returning file sizes greater than 2GB.
--
Brgds,
Viktor

From antonioharbour at gmail.com  Sat Oct 27 18:15:06 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sat Oct 27 18:15:10 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <42E93E9F-29F5-48DB-B4A4-35913295691D@syenar.hu>
References: <4350CF93-4AD5-464D-B231-3C6DB62B958A@syenar.hu>
	<47233104.201f5e0a.2b80.ffffd5de@mx.google.com>
	<9471afc80710270603y139c5bb8q703557f406dfd1ba@mail.gmail.com>
	<5C2F31F3-91D5-4B9E-AF05-7C5FD56C5998@syenar.hu>
	<9471afc80710270724i4ac62e9fr1655200195b5a259@mail.gmail.com>
	<CAB14BAD-9ADE-4F36-8985-1A8DFCFE5698@syenar.hu>
	<9471afc80710270746l429cd540r1571b80ca741a64a@mail.gmail.com>
	<42E93E9F-29F5-48DB-B4A4-35913295691D@syenar.hu>
Message-ID: <9471afc80710271115k142115c6p4e536a6a3ca1e650@mail.gmail.com>

Viktor,

> what makes you stop committing this fix directly?

Because Harbour does not provide an AnsiToUnicode() function.

Once it is available, my changes will be useful, and it will have
sense to commit them.

Regards,

Antonio
From harbour.01 at syenar.hu  Sat Oct 27 18:53:29 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Oct 27 18:53:40 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <9471afc80710271115k142115c6p4e536a6a3ca1e650@mail.gmail.com>
References: <4350CF93-4AD5-464D-B231-3C6DB62B958A@syenar.hu>
	<47233104.201f5e0a.2b80.ffffd5de@mx.google.com>
	<9471afc80710270603y139c5bb8q703557f406dfd1ba@mail.gmail.com>
	<5C2F31F3-91D5-4B9E-AF05-7C5FD56C5998@syenar.hu>
	<9471afc80710270724i4ac62e9fr1655200195b5a259@mail.gmail.com>
	<CAB14BAD-9ADE-4F36-8985-1A8DFCFE5698@syenar.hu>
	<9471afc80710270746l429cd540r1571b80ca741a64a@mail.gmail.com>
	<42E93E9F-29F5-48DB-B4A4-35913295691D@syenar.hu>
	<9471afc80710271115k142115c6p4e536a6a3ca1e650@mail.gmail.com>
Message-ID: <A5888777-C098-4146-B52F-EC667B39B3C0@syenar.hu>

How did you solve this locally?

Brgds,
Viktor

On 2007.10.27., at 20:15, Antonio Linares wrote:

> Viktor,
>
>> what makes you stop committing this fix directly?
>
> Because Harbour does not provide an AnsiToUnicode() function.
>
> Once it is available, my changes will be useful, and it will have
> sense to commit them.
>
> Regards,
>
> Antonio
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From antonioharbour at gmail.com  Sat Oct 27 19:17:58 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sat Oct 27 19:18:11 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <A5888777-C098-4146-B52F-EC667B39B3C0@syenar.hu>
References: <4350CF93-4AD5-464D-B231-3C6DB62B958A@syenar.hu>
	<47233104.201f5e0a.2b80.ffffd5de@mx.google.com>
	<9471afc80710270603y139c5bb8q703557f406dfd1ba@mail.gmail.com>
	<5C2F31F3-91D5-4B9E-AF05-7C5FD56C5998@syenar.hu>
	<9471afc80710270724i4ac62e9fr1655200195b5a259@mail.gmail.com>
	<CAB14BAD-9ADE-4F36-8985-1A8DFCFE5698@syenar.hu>
	<9471afc80710270746l429cd540r1571b80ca741a64a@mail.gmail.com>
	<42E93E9F-29F5-48DB-B4A4-35913295691D@syenar.hu>
	<9471afc80710271115k142115c6p4e536a6a3ca1e650@mail.gmail.com>
	<A5888777-C098-4146-B52F-EC667B39B3C0@syenar.hu>
Message-ID: <9471afc80710271217u4a6ee7acua51f5fdc2f5022e4@mail.gmail.com>

Viktor,

> How did you solve this locally ?

Using Windows MultiByteToWideChar()

Harbour uses it in contrib\ole2\w32ole.c

regards,

Antonio
From lorenzo.fiorini at gmail.com  Sat Oct 27 21:00:25 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Oct 27 21:00:34 2007
Subject: [Harbour] Successful port to pocket pc IPaq 6200
Message-ID: <9257026e0710271400y766e466eha8bdbd80d731991c@mail.gmail.com>

Just to report a successful cross build on Fedora 7 of my "untouched"
apps and the deployment on a IPaq 6200 which reports: Microsoft Pocket
PC Version 4.20.0 ( build 14133 ) aka Windows Mobile 2003 ( I guess )
CPU TI OMAP 1510.

I cannot say much about the apps since they are not designed to work
without dbfs but I get the alert message I expect and I can use stylus
to press "Quit" :)

IMHO it is a great success. It shows that Harbour can run from big
irons to handhelds.

Many thanks to Przemyslaw and to all have worked on it.

best regards,
Lorenzo
From mpaliwoda at interia.pl  Sun Oct 28 08:46:34 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sun Oct 28 08:46:39 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <9471afc80710271115k142115c6p4e536a6a3ca1e650@mail.gmail.com>
References: <4350CF93-4AD5-464D-B231-3C6DB62B958A@syenar.hu>	<47233104.201f5e0a.2b80.ffffd5de@mx.google.com>	<9471afc80710270603y139c5bb8q703557f406dfd1ba@mail.gmail.com>	<5C2F31F3-91D5-4B9E-AF05-7C5FD56C5998@syenar.hu>	<9471afc80710270724i4ac62e9fr1655200195b5a259@mail.gmail.com>	<CAB14BAD-9ADE-4F36-8985-1A8DFCFE5698@syenar.hu>	<9471afc80710270746l429cd540r1571b80ca741a64a@mail.gmail.com>	<42E93E9F-29F5-48DB-B4A4-35913295691D@syenar.hu>
	<9471afc80710271115k142115c6p4e536a6a3ca1e650@mail.gmail.com>
Message-ID: <47244C6A.6030700@interia.pl>

Antonio,

>> what makes you stop committing this fix directly?
> 
> Because Harbour does not provide an AnsiToUnicode() function.

What stops you from contributing the one you developed ?

-- 

Marek
From antonioharbour at gmail.com  Sun Oct 28 09:27:58 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Oct 28 09:29:34 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <47244C6A.6030700@interia.pl>
Message-ID: <47245635.12975e0a.19cc.4e9d@mx.google.com>

Marek, 

>> Because Harbour does not provide an AnsiToUnicode() function.

> What stops you from contributing the one you developed ?

It has the limitation that it just works for Windows Mobile, but its ok for
me to upload it.

In which file should I place it in ? Should I create a new file ? How should
I name it ? What #defines should I use to avoid other Oses use ?

If Viktor helps me on that, then I will happily upload it, well if I am able
to manage svn to do so :-)

Regards,

Antonio

From harbour.01 at syenar.hu  Sun Oct 28 16:09:43 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 28 16:09:52 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <47245635.12975e0a.19cc.4e9d@mx.google.com>
References: <47245635.12975e0a.19cc.4e9d@mx.google.com>
Message-ID: <35D148B4-2EF5-4598-86A8-91DA849B02AD@syenar.hu>

Antonio,

Pls post the files here, someone will upload it to the svn.

Brgds,
Viktor

On 2007.10.28., at 10:27, Antonio Linares wrote:

> Marek,
>
>>> Because Harbour does not provide an AnsiToUnicode() function.
>
>> What stops you from contributing the one you developed ?
>
> It has the limitation that it just works for Windows Mobile, but  
> its ok for
> me to upload it.
>
> In which file should I place it in ? Should I create a new file ?  
> How should
> I name it ? What #defines should I use to avoid other Oses use ?
>
> If Viktor helps me on that, then I will happily upload it, well if  
> I am able
> to manage svn to do so :-)
>
> Regards,
>
> Antonio
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From antonioharbour at gmail.com  Sun Oct 28 16:13:14 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Oct 28 16:13:45 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <35D148B4-2EF5-4598-86A8-91DA849B02AD@syenar.hu>
Message-ID: <4724b534.01a45e0a.45f0.7e4f@mx.google.com>

Viktor, 

> Pls post the files here, someone will upload it to the svn.

I want to do it personally. I plan to create unicode.c and place it in rtl,
is it fine ?

Please explain me how to add and commit using svn, thanks

Regards,

Antonio

From harbour.01 at syenar.hu  Sun Oct 28 16:25:55 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 28 16:26:03 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <4724b534.01a45e0a.45f0.7e4f@mx.google.com>
References: <4724b534.01a45e0a.45f0.7e4f@mx.google.com>
Message-ID: <56C9292B-48C0-4947-9608-81994F275AD9@syenar.hu>

> I want to do it personally. I plan to create unicode.c and place it  
> in rtl,
> is it fine ?

It depends on the content of the file.

I think /source/common/unicode.c would be a better place,
since Unicode base functions will be needed for the compiler
too.

> Please explain me how to add and commit using svn, thanks

It works the same way as CVS for these functions.
Pls find the details in: /doc/howtosvn.txt

There is one thing missing from here which is important
when adding new files. You need to run these two commands
after adding a file:

svn propset svn:keywords Id <filename>
svn propset svn:eol-style native <filename>

Brgds,
Viktor

From antonioharbour at gmail.com  Sun Oct 28 19:54:38 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Oct 28 19:55:09 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <56C9292B-48C0-4947-9608-81994F275AD9@syenar.hu>
Message-ID: <4724e917.12975e0a.19cc.ffff84bb@mx.google.com>

Viktor, Marek,

This is quite... (I don't find the right word) :-) 

Its been a while since I haven't done a checkout. I just did it and found
source\common\hbwince.c and the required functions are there. Przemek named
it as hb_mbtowc() (MultiByteToWideChar())

Also, I found that he has built a compatibility layer for CreateFileA(),
etc. based on some ruby functions.

So the question is, what is missing for you Marek ? What problems do you
have ? :-) 

Regards,

Antonio

From mpaliwoda at interia.pl  Sun Oct 28 20:44:01 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sun Oct 28 20:44:06 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <4724e917.12975e0a.19cc.ffff84bb@mx.google.com>
References: <4724e917.12975e0a.19cc.ffff84bb@mx.google.com>
Message-ID: <4724F491.1080903@interia.pl>


> So the question is, what is missing for you Marek ? What problems do you
> have ? :-) 

Nothing is missing for me, nor I have any problems.
It seems you are the one who has problems, and from
your recent posts I concluded they are quite big,
since you wrote only technical nonsense lately. You
writhed like a snake to not confirm that you did not
want to publish your modified harbour sources.

-- 

Marek
From antonioharbour at gmail.com  Sun Oct 28 20:50:16 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Oct 28 20:50:48 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <4724F491.1080903@interia.pl>
Message-ID: <4724f622.095c5e0a.3b97.ffff8c26@mx.google.com>

Marek,

Insulting people is not the way to go.

Do your work instead of asking other people to do it for you,

Regards,

Antonio

From dbtopas at dbtopas.lt  Sun Oct 28 22:32:12 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sun Oct 28 22:31:30 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <9471afc80710270651u26d59f71w71175bc8aa49f510@mail.gmail.com>
References: <8924b8e6.1c8189e.5e80286.4ae1@mafact.com>
	<9471afc80710270651u26d59f71w71175bc8aa49f510@mail.gmail.com>
Message-ID: <47250DEC.9030003@dbtopas.lt>

Antonio,


I think all this could be solved week ago, if you had posted the result of:
   diff -u -r /harbour/source /harbour.modified/source
to the mailing list, but it seems, you are trying to avoid the answer.
What are you trying to hide? Maybe some more modifications? :)


Best regards,
Mindaugas
From antonioharbour at gmail.com  Sun Oct 28 22:39:27 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Oct 28 22:40:00 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <47250DEC.9030003@dbtopas.lt>
Message-ID: <47250fb9.0d135e0a.5ac7.ffffa0d9@mx.google.com>

Mindaugas,

> Maybe some more modifications ? :)

Acording to Marek, he does not need any help and he has everything working
fine.

So what should I hide ? :-)

Regards,

Antonio

From dbtopas at dbtopas.lt  Sun Oct 28 22:53:14 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sun Oct 28 22:52:33 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <47250fb9.0d135e0a.5ac7.ffffa0d9@mx.google.com>
References: <47250fb9.0d135e0a.5ac7.ffffa0d9@mx.google.com>
Message-ID: <472512DA.4000903@dbtopas.lt>

>> Maybe some more modifications ? :)
> 
> Acording to Marek, he does not need any help and he has everything working
> fine.
> 
> So what should I hide ? :-)


Great! One more perfect escape from the answer! :)


Best regards,
Mindaugas
From harbour.01 at syenar.hu  Sun Oct 28 22:52:42 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 28 22:52:49 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <4724f622.095c5e0a.3b97.ffff8c26@mx.google.com>
References: <4724f622.095c5e0a.3b97.ffff8c26@mx.google.com>
Message-ID: <873F5757-3BD2-401B-8B9C-63BBF69FE749@syenar.hu>

Hi Antonio,

You reported something missing a few weeks ago.

You asked Przemek to do this work for you, which he
actually did, and you didn't even bother to check
till now.

 > So the question is, what is missing for you Marek ? What problems  
do you
 > have ? :-)

I missed your contribution and respect for our license and
other ppl's work.

Now, what I personally miss is your Universal Binary
build method for OSX (Darwin). Can you publish it?

Brgds,
Viktor

On 2007.10.28., at 21:50, Antonio Linares wrote:

> Marek,
>
> Insulting people is not the way to go.
>
> Do your work instead of asking other people to do it for you,
>
> Regards,
>
> Antonio
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From antonioharbour at gmail.com  Sun Oct 28 23:18:56 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Oct 28 23:19:28 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <873F5757-3BD2-401B-8B9C-63BBF69FE749@syenar.hu>
Message-ID: <472518fb.1c185e0a.6541.ffff9c0b@mx.google.com>

Viktor, 

> 
You reported something missing a few weeks ago.

You asked Przemek to do this work for you, which he actually did, and you
didn't even bother to check till now.
>

That's not true. I commented Przemek that filesys.c was using CreateFileA()
instead of CreateFileW(). I realized that browsing Harbour's sourceforge svn
(I did not a checkout).

Today I have done a checkout and found hbwince.c and discovered that
CreateFileA() is a Harbour function (please notice that it does not use the
Harbour namespace!) and not a Windows one (Harbour is using a function with
the same name as in the Windows API!)

> I missed your contribution and respect for our license and other ppl's
work.

I founded the Harbour project. 80% of the Harbour files have my copyright. I
donated all the source code of a private compiler that I developed myself
along two years to create the original Harbour prototype. Isn't enough for
you ?

I am fully respecting Harbour's licence acording to Tomaz Zupan comments.
Please don't spread lies like that.

>
Now, what I personally miss is your Universal Binary build method for OSX
(Darwin). Can you publish it?
>

Do you really expect that I have the wish to help you after spreading lies
about me and acusing me without foundation ?

Regards,

Antonio

From harbour.01 at syenar.hu  Sun Oct 28 23:44:20 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sun Oct 28 23:44:27 2007
Subject: [Harbour] Changes in clipdefs.h
In-Reply-To: <472518fb.1c185e0a.6541.ffff9c0b@mx.google.com>
References: <472518fb.1c185e0a.6541.ffff9c0b@mx.google.com>
Message-ID: <CE4FEBBE-0F22-41F4-A484-7F2E94B567A2@syenar.hu>

>> I missed your contribution and respect for our license and other  
>> ppl's
> work.
>
> I founded the Harbour project. 80% of the Harbour files have my  
> copyright. I
> donated all the source code of a private compiler that I developed  
> myself
> along two years to create the original Harbour prototype. Isn't  
> enough for
> you ?

No, it's not. First of all, the fact that you've posted the first
versions of these files doesn't mean you developed them to the state
they are now. Secondly, your 80% (or whatever) percentage of source
code would only be a useless bunch of files without the remaining 20%.
Contribution is not measured by the number of copyrights you have in
the source tree. Thirdly, the number of copyrighted files you have
won't justify getting more (legal) rights for the whole project than
others have.

This is a teamwork.

> I am fully respecting Harbour's licence acording to Tomaz Zupan  
> comments.
> Please don't spread lies like that.

I didn't see the disclosure: "modified Harbour code", "available as a  
free
download for customers" anywhere on your page Pocket PC page. Any  
visitor
could think you're using plain Harbour source code, which is not true.

> Do you really expect that I have the wish to help you after  
> spreading lies
> about me and acusing me without foundation ?

No, I didn't expect anything like that. About foundation, see above.

And think about it: You make a living based on Harbour, and you act
like this. We used to call this here: "Nem sz*runk a sajat feszkunkbe",
which roughly translates to: "We don't cr*p into our own nest".

Do we?

Brgds,
Viktor

From rao at obuhov.net  Mon Oct 29 08:43:13 2007
From: rao at obuhov.net (rao)
Date: Mon Oct 29 08:43:15 2007
Subject: [Harbour] BCC Link error
In-Reply-To: <20071026120915.44C6D426A4@mail.obukhov.net>
References: <20071026120915.44C6D426A4@mail.obukhov.net>
Message-ID: <47259D21.4020906@obuhov.net>

Hi,

I have same error and i put ANNOUNCE HB_GTSYS in my source code - 
compile OK but i got next:
Unrecoverable error 9998: Internal error: screen driver initialization 
failure

I use actual Harbour svn, BCC 5.5.1, Hwgui, WindowsXP.

Regards,
Alexey Myronenko
From mpaliwoda at interia.pl  Mon Oct 29 09:39:50 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Mon Oct 29 09:39:56 2007
Subject: [Harbour] Clipper/Harbour grammar definition
Message-ID: <20071029093950.3C34A1465021@f15.poczta.interia.pl>

Hi all,

I'd like to know if anyone is aware of "Clipper/Harbour grammar 
definition" file available anywhere on a net ?

I know that there is a bison grammar definition file available 
in harbour/source/compiler/harbour.y, but it is not "pure" grammar
definition - it is a mix of grammar definition and C code.

Please note that I am a "complete" ignorant in compiler's theory
so it's quite possible that I ask "stupid" question :). I am even 
not sure if such a "pure" grammar definition for Clipper/Harbour
makes any sense - I mean without helper's C code. 

A clarification on the above question from our "compiler guru's" 
will be greatly appreciated, too :)

-- 

Marek
From harbour.01 at syenar.hu  Mon Oct 29 10:20:08 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 29 10:22:17 2007
Subject: [Harbour] CHANGELOG: 2007-10-29 11:21 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c81a15$Blat.v2.6.2$47ca6120$f48bc71e91e@127.0.0.1>

2007-10-29 11:21 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * doc/howtosvn.txt
     + Added few propset command. Would need some more cleanup.

   * contrib/win32/test/testw32p.prg
     ; Formatting

   * source/common/hbfsapi.c
     ! Minor fixes.

   * source/compiler/hbusage.c
     + Added (c) after copyright.

   - lib/b16
   - obj/b16
     - Removed not needed directories.
--
Brgds,
Viktor

From i at kevincarmody.com  Mon Oct 29 12:30:09 2007
From: i at kevincarmody.com (Kevin Carmody)
Date: Mon Oct 29 12:29:29 2007
Subject: [Harbour] BCC Link error
In-Reply-To: <47259D21.4020906@obuhov.net>
References: <20071026120915.44C6D426A4@mail.obukhov.net>
	<47259D21.4020906@obuhov.net>
Message-ID: <4725D251.7050406@kevincarmody.com>

Viktor,

Shouldn't this be REQUEST HB_GTSYS, since ANNOUNCE is for creating a new 
module name, and REQUEST is for using an existing one?

Kevin

rao wrote:
> Hi,
>
> I have same error and i put ANNOUNCE HB_GTSYS in my source code - 
> compile OK but i got next:
> Unrecoverable error 9998: Internal error: screen driver initialization 
> failure
>
> I use actual Harbour svn, BCC 5.5.1, Hwgui, WindowsXP.
>
> Regards,
> Alexey Myronenko
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>

>> Hi Juan,
>>
>> Do you "ANNOUNCE HB_GTSYS" in your code?
>>
>> HB_GT_WIN symbol is pulled by gtsys.c on Windows platform,
>> but you can avoid linking gtsys.c by doing the ANNOUNCE above.
>>
>> Brgds,
>> Viktor
>>
>> On 2007.10.26., at 12:42, Juan G?lvez wrote:
>>
>> >/ Hi Viktor,
>> />/
>> />/ Before these changes I only linked GTGUI.LIB in my FWH application.
>> />/
>> />/ If I link GTWIN.LIB then the application open two windows (console  
>> />/ and gui).
>> />/
>> />/ What do you think about ?
>> />/
>> />/ Many thanks
>> />/ Juan
>> />/
>> />/ ----- Original Message ----- From: "Szak?ts Viktor" <harbour. 
>> />/ 01 at syenar.hu <http://lists.harbour-project.org/mailman/listinfo/harbour>>
>> />/ To: "Harbour Project Main Developer List." <harbour at harbour- <http://lists.harbour-project.org/mailman/listinfo/harbour> 
>> />/ project.org>
>> />/ Sent: Thursday, October 25, 2007 11:39 PM
>> />/ Subject: Re: [Harbour] BCC Link error
>> />/
>> />/
>> />/ Hi Juan,
>> />/
>> />/ Can you check whether GTWIN.LIB got built properly
>> />/ for you, and if not, what was the error in your
>> />/ build output?
>> />/
>> />/ Brgds,
>> />/ Viktor
>> />/
>> />/ On 2007.10.25., at 16:52, Juan G?lvez wrote:
>> />/
>> />>/ Hi all,
>> />>/
>> />>/ With recent SVN changes (I don't know which one), I get :
>> />>/
>> />>/ c:\utl\bcc55\bin\ilink32.exe -Gn -q -t -aa -Tpe -s -jobjh32 
>> />>/ \develop \CONTAPro -Iobjh32\develop\CONTAPro -Lc:\utl\bcc55\lib  
>> />>/ @MAKE0000.@@@
>> />>/ Error: Unresolved external '_HB_FUN_HB_GT_WIN' referenced from C:  
>> />>/ \UTL\HARBOUR\LIB\RTL.LIB|gtsys
>> />>/ Info: Link time = 0.34 seconds
>> />>/
>> />>/ What do I have to change ?
>> />>/
>> />>/ Many thanks
>> />>/ Juan/

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20071029/0e360031/attachment.html
From harbour.01 at syenar.hu  Mon Oct 29 12:56:39 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Oct 29 12:56:48 2007
Subject: [Harbour] BCC Link error
In-Reply-To: <4725D251.7050406@kevincarmody.com>
References: <20071026120915.44C6D426A4@mail.obukhov.net>
	<47259D21.4020906@obuhov.net> <4725D251.7050406@kevincarmody.com>
Message-ID: <B5B49853-462B-4697-9266-8404B3AB7953@syenar.hu>

Hi Kevin,

It should be ANNOUNCE. This way gtsys.c - the file which does the  
REQUESTs
for the default GTs, which is HB_GT_WIN for Windows platform - from  
Harbour won't
be linked in. Instead you can REQUEST the GTs you prefer to use.

The logic is exactly the same as with RDDs.

In my code (the main file) I have this:

--
PROCEDURE HB_GTSYS() // ; Override default Harbour HB_GTSYS
    REQUEST HB_GT_WVT // ; Force linkage of WVT GT module
    REQUEST HB_GT_WIN // ; Force linkage of WIN GT module
    RETURN

PROCEDURE HB_GT_WVT_DEFAULT() // ; Select WVT GT as the default GT
    RETURN
--

This will override any Harbour defaults, request WVT and WIN drivers
to be linked in and selected WVT as the default GT driver.

I however, you don't add any REQUEST HB_GT_* to this code, you'll
get the internal error you mention.

Brgds,
Viktor

On 2007.10.29., at 13:30, Kevin Carmody wrote:

> Viktor,
>
> Shouldn't this be REQUEST HB_GTSYS, since ANNOUNCE is for creating  
> a new module name, and REQUEST is for using an existing one?
>
> Kevin
>
> rao wrote:
>> Hi,
>>
>> I have same error and i put ANNOUNCE HB_GTSYS in my source code -  
>> compile OK but i got next:
>> Unrecoverable error 9998: Internal error: screen driver  
>> initialization failure
>>
>> I use actual Harbour svn, BCC 5.5.1, Hwgui, WindowsXP.
>>
>> Regards,
>> Alexey Myronenko
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
>>> Hi Juan, Do you "ANNOUNCE HB_GTSYS" in your code? HB_GT_WIN  
>>> symbol is pulled by gtsys.c on Windows platform, but you can  
>>> avoid linking gtsys.c by doing the ANNOUNCE above. Brgds, Viktor   
>>> On 2007.10.26., at 12:42, Juan G?lvez wrote: > Hi Viktor, > >  
>>> Before these changes I only linked GTGUI.LIB in my FWH  
>>> application. > > If I link GTWIN.LIB then the application open  
>>> two windows (console > and gui). > > What do you think about ? >  
>>> > Many thanks > Juan > > ----- Original Message ----- From:  
>>> "Szak?ts Viktor" <harbour. > 01 at syenar.hu> > To: "Harbour  
>>> Project Main Developer List." <harbour at harbour- > project.org>  
>>> > Sent: Thursday, October 25, 2007 11:39 PM > Subject: Re:  
>>> [Harbour] BCC Link error > > > Hi Juan, > > Can you check whether  
>>> GTWIN.LIB got built properly > for you, and if not, what was the  
>>> error in your > build output? > > Brgds, > Viktor > > On  
>>> 2007.10.25., at 16:52, Juan G?lvez wrote: > >> Hi all, >> >> With  
>>> recent SVN changes (I don't know which one), I get : >> >> c:\utl 
>>> \bcc55\bin\ilink32.exe -Gn -q -t -aa -Tpe -s -jobjh32 >> \develop  
>>> \CONTAPro -Iobjh32\develop\CONTAPro -Lc:\utl\bcc55\lib >>  
>>> @MAKE0000.@@@ >> Error: Unresolved external '_HB_FUN_HB_GT_WIN'  
>>> referenced from C: >> \UTL\HARBOUR\LIB\RTL.LIB|gtsys >> Info:  
>>> Link time = 0.34 seconds >> >> What do I have to change ? >> >>  
>>> Many thanks >> Juan
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Mon Oct 29 16:58:16 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Oct 29 16:58:22 2007
Subject: [Harbour] 2007-10-29 17:57 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>

2007-10-29 17:57 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/harbour-ce-spec
  * harbour/make_xmingwce.sh
  * harbour/make_xmingw.sh
    * removed HOST_OS_UNIX_COMPATIBLE

  * harbour/makefile.gc
    * changed ppgen.c -> hbppgen.c

  * harbour/source/pp/hbppgen.c
  * harbour/source/vm/dynsym.c
    * fixed some typos in comment

  * harbour/source/rtl/hbcrc.c
    ! fixed casting

best regards
Przemek
From e.m.giordano at emagsoftware.it  Mon Oct 29 21:46:46 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Oct 29 21:47:09 2007
Subject: [Harbour] A clue for Harbour+FWH problem
Message-ID: <000601c81a75$340815a0$ca64fea9@emag>

If I link both gtgui.lib and gtwin.lib the program starts correctly but a 
console window is also opened.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From dbtopas at dbtopas.lt  Mon Oct 29 22:18:10 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Oct 29 22:17:30 2007
Subject: [Harbour] A clue for Harbour+FWH problem
In-Reply-To: <000601c81a75$340815a0$ca64fea9@emag>
References: <000601c81a75$340815a0$ca64fea9@emag>
Message-ID: <47265C22.9050704@dbtopas.lt>

Enrico Maria Giordano wrote:
> If I link both gtgui.lib and gtwin.lib the program starts correctly but 
> a console window is also opened.

Hi,


just shoot in dark: windows executable has GUI/console flag. ilink32.exe 
uses -aa or -ap switch to set it.


Best regards,
Mindaugas
From myorg63 at mail.ru  Tue Oct 30 07:32:37 2007
From: myorg63 at mail.ru (Petr Chornyj)
Date: Tue Oct 30 07:32:40 2007
Subject: [Harbour] contrib DOT?
In-Reply-To: <BB23FB5E-AFB3-45A5-9D98-A7090D5EB5D9@syenar.hu>
References: <BB23FB5E-AFB3-45A5-9D98-A7090D5EB5D9@syenar.hu>
Message-ID: <13483723.post@talk.nabble.com>


And also contrib\delphi

I do not know if we need this in contrib and if it works with Delphi, but
without some modification in sdd_bld.bat and macrcall.c we can not build
myprog.dll.

-- 
View this message in context: http://www.nabble.com/contrib-DOT--tf4681646.html#a13483723
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From e.m.giordano at emagsoftware.it  Tue Oct 30 07:53:22 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Oct 30 07:53:27 2007
Subject: [Harbour] A clue for Harbour+FWH problem
References: <000601c81a75$340815a0$ca64fea9@emag> <47265C22.9050704@dbtopas.lt>
Message-ID: <001301c81ac9$f1ccab10$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Mindaugas Kavaliauskas" <dbtopas@dbtopas.lt>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: luned? 29 ottobre 2007 23.18
Oggetto: Re: [Harbour] A clue for Harbour+FWH problem


> just shoot in dark: windows executable has GUI/console flag. ilink32.exe 
> uses -aa or -ap switch to set it.

I'm using (and always used) -aa.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From soporte at dsgsoftware.com  Tue Oct 30 08:13:17 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Tue Oct 30 08:13:32 2007
Subject: [Harbour] A clue for Harbour+FWH problem
References: <000601c81a75$340815a0$ca64fea9@emag>
Message-ID: <001601c81acc$bedc2c50$1700000a@PcJuanxp>

Hi Enrico,

Try to build Harbour with HB_GTGUI_HACK define and link only gtgui.lib.

Best regards
Juan

----- Original Message ----- 
From: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Monday, October 29, 2007 10:46 PM
Subject: [Harbour] A clue for Harbour+FWH problem


> If I link both gtgui.lib and gtwin.lib the program starts correctly but a 
> console window is also opened.
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 

From e.m.giordano at emagsoftware.it  Tue Oct 30 08:20:10 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Oct 30 08:20:15 2007
Subject: [Harbour] A clue for Harbour+FWH problem
References: <000601c81a75$340815a0$ca64fea9@emag>
	<001601c81acc$bedc2c50$1700000a@PcJuanxp>
Message-ID: <00a501c81acd$afecf8e0$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Juan G?lvez" <soporte@dsgsoftware.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 30 ottobre 2007 9.13
Oggetto: Re: [Harbour] A clue for Harbour+FWH problem


> Hi Enrico,
>
> Try to build Harbour with HB_GTGUI_HACK define and link only gtgui.lib.

Where exactly do I have to put HB_GTGUI_HACK? Is it fine

SET C_USR=-HB_GTGUI_HACK

?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From soporte at dsgsoftware.com  Tue Oct 30 08:28:35 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Tue Oct 30 08:28:43 2007
Subject: [Harbour] A clue for Harbour+FWH problem
References: <000601c81a75$340815a0$ca64fea9@emag><001601c81acc$bedc2c50$1700000a@PcJuanxp>
	<00a501c81acd$afecf8e0$ca64fea9@emag>
Message-ID: <000801c81ace$dec09f90$1700000a@PcJuanxp>

Enrico,

SET C_USR=-DHB_GTGUI_HACK

Juan

----- Original Message ----- 
From: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Tuesday, October 30, 2007 9:20 AM
Subject: Re: [Harbour] A clue for Harbour+FWH problem


>
> -----Messaggio Originale----- 
> Da: "Juan G?lvez" <soporte@dsgsoftware.com>
> A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
> Data invio: marted? 30 ottobre 2007 9.13
> Oggetto: Re: [Harbour] A clue for Harbour+FWH problem
>
>
>> Hi Enrico,
>>
>> Try to build Harbour with HB_GTGUI_HACK define and link only gtgui.lib.
>
> Where exactly do I have to put HB_GTGUI_HACK? Is it fine
>
> SET C_USR=-HB_GTGUI_HACK
>
> ?
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour 

From miguelangel at marchuet.net  Tue Oct 30 08:31:18 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Tue Oct 30 08:38:49 2007
Subject: [Harbour] 2007-10-29 17:57 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>
Message-ID: <4726EBD6.2050809@marchuet.net>

In the work that you are developing about arm processors.

cross platform lib will be created ?

for example I could create an arm (pocketpc) application from
another platform as i386 based.

I'm thinking about .NULL. implementation to support _NullFlags field.

I think that the better way is implement Flags at HBITEM for example:

    struct hb_struString
    {
       ULONG           length;
       ULONG           allocated;
       char            *value;
       HB_COUNTER      *pulHolders; /* number of holders of this string */
       USHORT          flags;       /* indicates if value is .NULL. and indicates if is VARCHAR*/
    };

If I assign a Caracter .NULL. field value to a variable:

	cVar := FIELD->cNullValue

	ValType( cVar ) => "C"
	IsNull( cVar ) => .T.
	IsNull( FIELD->cNullValue ) => .T.
	Empty( cVar ) => .T.

	cVar != "" => .T.
	
	cVar + "" => ""

What do you think about it?

Best regards,
Miguel Angel Marchuet
From e.m.giordano at emagsoftware.it  Tue Oct 30 08:45:12 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Oct 30 08:45:18 2007
Subject: [Harbour] A clue for Harbour+FWH problem
References: <000601c81a75$340815a0$ca64fea9@emag><001601c81acc$bedc2c50$1700000a@PcJuanxp><00a501c81acd$afecf8e0$ca64fea9@emag>
	<000801c81ace$dec09f90$1700000a@PcJuanxp>
Message-ID: <00cf01c81ad1$2f8ce8f0$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Juan G?lvez" <soporte@dsgsoftware.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 30 ottobre 2007 9.28
Oggetto: Re: [Harbour] A clue for Harbour+FWH problem


> Enrico,
>
> SET C_USR=-DHB_GTGUI_HACK

Yes, I did mean that. Sorry, no change... :-(

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From soporte at dsgsoftware.com  Tue Oct 30 09:28:39 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Tue Oct 30 09:28:59 2007
Subject: [Harbour] A clue for Harbour+FWH problem
References: <000601c81a75$340815a0$ca64fea9@emag><001601c81acc$bedc2c50$1700000a@PcJuanxp><00a501c81acd$afecf8e0$ca64fea9@emag><000801c81ace$dec09f90$1700000a@PcJuanxp>
	<00cf01c81ad1$2f8ce8f0$ca64fea9@emag>
Message-ID: <001001c81ad7$4a9fda20$1700000a@PcJuanxp>

Enrico,

Sorry but I think you're making something wrong. Are you linking only 
gtgui.lib?

I've tried to build Harbour without HB_GTGUI_HACK I've got :

 c:\utl\bcc55\bin\ilink32.exe -Gn -q -t -aa -Tpe -s -jobjh32\develop\CONTAPro
 -Iobjh32\develop\CONTAPro -Lc:\utl\bcc55\lib @MAKE0000.@@@
Error: Unresolved external '_HB_FUN_HB_GT_WIN' referenced from
C:\UTL\HARBOUR\LIB\RTL.LIB|gtsys

Later I build Harbour with HB_GTGUI_HACK and it works fine ...

Juan

----- Original Message ----- 
From: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Tuesday, October 30, 2007 9:45 AM
Subject: Re: [Harbour] A clue for Harbour+FWH problem


>
> -----Messaggio Originale----- 
> Da: "Juan G?lvez" <soporte@dsgsoftware.com>
> A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
> Data invio: marted? 30 ottobre 2007 9.28
> Oggetto: Re: [Harbour] A clue for Harbour+FWH problem
>
>
>> Enrico,
>>
>> SET C_USR=-DHB_GTGUI_HACK
>
> Yes, I did mean that. Sorry, no change... :-(
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From e.m.giordano at emagsoftware.it  Tue Oct 30 09:36:24 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Oct 30 09:36:28 2007
Subject: [Harbour] A clue for Harbour+FWH problem
References: <000601c81a75$340815a0$ca64fea9@emag><001601c81acc$bedc2c50$1700000a@PcJuanxp><00a501c81acd$afecf8e0$ca64fea9@emag><000801c81ace$dec09f90$1700000a@PcJuanxp><00cf01c81ad1$2f8ce8f0$ca64fea9@emag>
	<001001c81ad7$4a9fda20$1700000a@PcJuanxp>
Message-ID: <014f01c81ad8$564527d0$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Juan G?lvez" <soporte@dsgsoftware.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 30 ottobre 2007 10.28
Oggetto: Re: [Harbour] A clue for Harbour+FWH problem


> Enrico,
>
> Sorry but I think you're making something wrong.

Never mind. I tried again and now it works fine!

Thank you!

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Tue Oct 30 09:38:10 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 30 09:38:18 2007
Subject: [Harbour] A clue for Harbour+FWH problem
In-Reply-To: <001001c81ad7$4a9fda20$1700000a@PcJuanxp>
References: <000601c81a75$340815a0$ca64fea9@emag><001601c81acc$bedc2c50$1700000a@PcJuanxp><00a501c81acd$afecf8e0$ca64fea9@emag><000801c81ace$dec09f90$1700000a@PcJuanxp>
	<00cf01c81ad1$2f8ce8f0$ca64fea9@emag>
	<001001c81ad7$4a9fda20$1700000a@PcJuanxp>
Message-ID: <E13FE4B0-E7D0-4030-A4A5-9544AF4A3FDC@syenar.hu>

Wouldn't this problem be solved by simply ANNOUNCE HB_GTSYS + REQUEST  
HB_GT_GUI
in app code?

Could someone try?

(The whole hack seems to have been added to avoid
that requirement, and was replaced by HB_GTUI_HACK to
rename HB_GT_GUI to HB_GT_WIN. The former requires a
simple new command in app code, latter requires a whole
new build, which seems to me more complicated.)

Brgds,
Viktor

On 2007.10.30., at 10:28, Juan G?lvez wrote:

> Enrico,
>
> Sorry but I think you're making something wrong. Are you linking  
> only gtgui.lib?
>
> I've tried to build Harbour without HB_GTGUI_HACK I've got :
>
> c:\utl\bcc55\bin\ilink32.exe -Gn -q -t -aa -Tpe -s -jobjh32\develop 
> \CONTAPro
> -Iobjh32\develop\CONTAPro -Lc:\utl\bcc55\lib @MAKE0000.@@@
> Error: Unresolved external '_HB_FUN_HB_GT_WIN' referenced from
> C:\UTL\HARBOUR\LIB\RTL.LIB|gtsys
>
> Later I build Harbour with HB_GTGUI_HACK and it works fine ...
>
> Juan
>
> ----- Original Message ----- From: "Enrico Maria Giordano"  
> <e.m.giordano@emagsoftware.it>
> To: "Harbour Project Main Developer List." <harbour@harbour- 
> project.org>
> Sent: Tuesday, October 30, 2007 9:45 AM
> Subject: Re: [Harbour] A clue for Harbour+FWH problem
>
>
>>
>> -----Messaggio Originale----- Da: "Juan G?lvez"  
>> <soporte@dsgsoftware.com>
>> A: "Harbour Project Main Developer List." <harbour@harbour- 
>> project.org>
>> Data invio: marted? 30 ottobre 2007 9.28
>> Oggetto: Re: [Harbour] A clue for Harbour+FWH problem
>>
>>
>>> Enrico,
>>>
>>> SET C_USR=-DHB_GTGUI_HACK
>>
>> Yes, I did mean that. Sorry, no change... :-(
>>
>> EMG
>>
>> --
>> EMAG Software Homepage:     http://www.emagsoftware.it
>> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
>> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
>> The EMG Music page:         http://www.emagsoftware.it/emgmusic
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From soporte at dsgsoftware.com  Tue Oct 30 09:49:27 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Tue Oct 30 09:49:43 2007
Subject: [Harbour] A clue for Harbour+FWH problem
References: <000601c81a75$340815a0$ca64fea9@emag><001601c81acc$bedc2c50$1700000a@PcJuanxp><00a501c81acd$afecf8e0$ca64fea9@emag><000801c81ace$dec09f90$1700000a@PcJuanxp><00cf01c81ad1$2f8ce8f0$ca64fea9@emag><001001c81ad7$4a9fda20$1700000a@PcJuanxp>
	<E13FE4B0-E7D0-4030-A4A5-9544AF4A3FDC@syenar.hu>
Message-ID: <000c01c81ada$2f639ff0$1700000a@PcJuanxp>

Hi Viktor,

I've tried it and I get a runtime error :

Unrecoverable error 9998: Internal error: screen driver initialization 
failure

Best regards
Juan

----- Original Message ----- 
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Tuesday, October 30, 2007 10:38 AM
Subject: Re: [Harbour] A clue for Harbour+FWH problem


Wouldn't this problem be solved by simply ANNOUNCE HB_GTSYS + REQUEST
HB_GT_GUI
in app code?

Could someone try?

(The whole hack seems to have been added to avoid
that requirement, and was replaced by HB_GTUI_HACK to
rename HB_GT_GUI to HB_GT_WIN. The former requires a
simple new command in app code, latter requires a whole
new build, which seems to me more complicated.)

Brgds,
Viktor

On 2007.10.30., at 10:28, Juan G?lvez wrote:

> Enrico,
>
> Sorry but I think you're making something wrong. Are you linking  only 
> gtgui.lib?
>
> I've tried to build Harbour without HB_GTGUI_HACK I've got :
>
> c:\utl\bcc55\bin\ilink32.exe -Gn -q -t -aa -Tpe -s -jobjh32\develop 
> \CONTAPro
> -Iobjh32\develop\CONTAPro -Lc:\utl\bcc55\lib @MAKE0000.@@@
> Error: Unresolved external '_HB_FUN_HB_GT_WIN' referenced from
> C:\UTL\HARBOUR\LIB\RTL.LIB|gtsys
>
> Later I build Harbour with HB_GTGUI_HACK and it works fine ...
>
> Juan
>
> ----- Original Message ----- From: "Enrico Maria Giordano" 
> <e.m.giordano@emagsoftware.it>
> To: "Harbour Project Main Developer List." <harbour@harbour- project.org>
> Sent: Tuesday, October 30, 2007 9:45 AM
> Subject: Re: [Harbour] A clue for Harbour+FWH problem
>
>
>>
>> -----Messaggio Originale----- Da: "Juan G?lvez" 
>> <soporte@dsgsoftware.com>
>> A: "Harbour Project Main Developer List." <harbour@harbour- project.org>
>> Data invio: marted? 30 ottobre 2007 9.28
>> Oggetto: Re: [Harbour] A clue for Harbour+FWH problem
>>
>>
>>> Enrico,
>>>
>>> SET C_USR=-DHB_GTGUI_HACK
>>
>> Yes, I did mean that. Sorry, no change... :-(
>>
>> EMG
>>
>> --
>> EMAG Software Homepage:     http://www.emagsoftware.it
>> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
>> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
>> The EMG Music page:         http://www.emagsoftware.it/emgmusic
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour 

From e.m.giordano at emagsoftware.it  Tue Oct 30 09:51:14 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Oct 30 09:51:22 2007
Subject: [Harbour] A clue for Harbour+FWH problem
References: <000601c81a75$340815a0$ca64fea9@emag><001601c81acc$bedc2c50$1700000a@PcJuanxp><00a501c81acd$afecf8e0$ca64fea9@emag><000801c81ace$dec09f90$1700000a@PcJuanxp><00cf01c81ad1$2f8ce8f0$ca64fea9@emag><001001c81ad7$4a9fda20$1700000a@PcJuanxp>
	<E13FE4B0-E7D0-4030-A4A5-9544AF4A3FDC@syenar.hu>
Message-ID: <015d01c81ada$69058020$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 30 ottobre 2007 10.38
Oggetto: Re: [Harbour] A clue for Harbour+FWH problem


> Wouldn't this problem be solved by simply ANNOUNCE HB_GTSYS + REQUEST 
> HB_GT_GUI in app code?
>
> Could someone try?

No, they have not been necessary.

> (The whole hack seems to have been added to avoid
> that requirement, and was replaced by HB_GTUI_HACK to
> rename HB_GT_GUI to HB_GT_WIN. The former requires a
> simple new command in app code, latter requires a whole
> new build, which seems to me more complicated.)

No, I can't got it to work using

ANNOUNCE HB_GTSYS
REQUEST HB_GT_GUI

and without

HB_GTUI_HACK

But I agree, the problem should be solved in a better way.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Tue Oct 30 10:19:14 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 30 10:19:23 2007
Subject: [Harbour] A clue for Harbour+FWH problem
In-Reply-To: <000c01c81ada$2f639ff0$1700000a@PcJuanxp>
References: <000601c81a75$340815a0$ca64fea9@emag><001601c81acc$bedc2c50$1700000a@PcJuanxp><00a501c81acd$afecf8e0$ca64fea9@emag><000801c81ace$dec09f90$1700000a@PcJuanxp><00cf01c81ad1$2f8ce8f0$ca64fea9@emag><001001c81ad7$4a9fda20$1700000a@PcJuanxp>
	<E13FE4B0-E7D0-4030-A4A5-9544AF4A3FDC@syenar.hu>
	<000c01c81ada$2f639ff0$1700000a@PcJuanxp>
Message-ID: <AA80254A-9D65-429B-A43A-70DC960E4C64@syenar.hu>

And with this ?:

REQUEST HB_GT_GUI
PROCEDURE HB_GTSYS() ; RETURN
PROCEDURE HB_GT_GUI_DEFAULT() ; RETURN

Brgds,
Viktor

On 2007.10.30., at 10:49, Juan G?lvez wrote:

> Hi Viktor,
>
> I've tried it and I get a runtime error :
>
> Unrecoverable error 9998: Internal error: screen driver  
> initialization failure
>
> Best regards
> Juan
>
> ----- Original Message ----- From: "Szak?ts Viktor" <harbour. 
> 01@syenar.hu>
> To: "Harbour Project Main Developer List." <harbour@harbour- 
> project.org>
> Sent: Tuesday, October 30, 2007 10:38 AM
> Subject: Re: [Harbour] A clue for Harbour+FWH problem
>
>
> Wouldn't this problem be solved by simply ANNOUNCE HB_GTSYS + REQUEST
> HB_GT_GUI
> in app code?
>
> Could someone try?
>
> (The whole hack seems to have been added to avoid
> that requirement, and was replaced by HB_GTUI_HACK to
> rename HB_GT_GUI to HB_GT_WIN. The former requires a
> simple new command in app code, latter requires a whole
> new build, which seems to me more complicated.)
>
> Brgds,
> Viktor
>
> On 2007.10.30., at 10:28, Juan G?lvez wrote:
>
>> Enrico,
>>
>> Sorry but I think you're making something wrong. Are you linking   
>> only gtgui.lib?
>>
>> I've tried to build Harbour without HB_GTGUI_HACK I've got :
>>
>> c:\utl\bcc55\bin\ilink32.exe -Gn -q -t -aa -Tpe -s -jobjh32 
>> \develop \CONTAPro
>> -Iobjh32\develop\CONTAPro -Lc:\utl\bcc55\lib @MAKE0000.@@@
>> Error: Unresolved external '_HB_FUN_HB_GT_WIN' referenced from
>> C:\UTL\HARBOUR\LIB\RTL.LIB|gtsys
>>
>> Later I build Harbour with HB_GTGUI_HACK and it works fine ...
>>
>> Juan
>>
>> ----- Original Message ----- From: "Enrico Maria Giordano"  
>> <e.m.giordano@emagsoftware.it>
>> To: "Harbour Project Main Developer List." <harbour@harbour-  
>> project.org>
>> Sent: Tuesday, October 30, 2007 9:45 AM
>> Subject: Re: [Harbour] A clue for Harbour+FWH problem
>>
>>
>>>
>>> -----Messaggio Originale----- Da: "Juan G?lvez"  
>>> <soporte@dsgsoftware.com>
>>> A: "Harbour Project Main Developer List." <harbour@harbour-  
>>> project.org>
>>> Data invio: marted? 30 ottobre 2007 9.28
>>> Oggetto: Re: [Harbour] A clue for Harbour+FWH problem
>>>
>>>
>>>> Enrico,
>>>>
>>>> SET C_USR=-DHB_GTGUI_HACK
>>>
>>> Yes, I did mean that. Sorry, no change... :-(
>>>
>>> EMG
>>>
>>> --
>>> EMAG Software Homepage:     http://www.emagsoftware.it
>>> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
>>> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
>>> The EMG Music page:         http://www.emagsoftware.it/emgmusic
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From soporte at dsgsoftware.com  Tue Oct 30 11:01:29 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Tue Oct 30 11:01:42 2007
Subject: [Harbour] A clue for Harbour+FWH problem
References: <000601c81a75$340815a0$ca64fea9@emag><001601c81acc$bedc2c50$1700000a@PcJuanxp><00a501c81acd$afecf8e0$ca64fea9@emag><000801c81ace$dec09f90$1700000a@PcJuanxp><00cf01c81ad1$2f8ce8f0$ca64fea9@emag><001001c81ad7$4a9fda20$1700000a@PcJuanxp><E13FE4B0-E7D0-4030-A4A5-9544AF4A3FDC@syenar.hu><000c01c81ada$2f639ff0$1700000a@PcJuanxp>
	<AA80254A-9D65-429B-A43A-70DC960E4C64@syenar.hu>
Message-ID: <000e01c81ae4$3d6f2920$1700000a@PcJuanxp>

Viktor,

Yes. Now it works !!!

How will it be used finally ?

Best regards
Juan

----- Original Message ----- 
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Tuesday, October 30, 2007 11:19 AM
Subject: Re: [Harbour] A clue for Harbour+FWH problem


And with this ?:

REQUEST HB_GT_GUI
PROCEDURE HB_GTSYS() ; RETURN
PROCEDURE HB_GT_GUI_DEFAULT() ; RETURN

Brgds,
Viktor

On 2007.10.30., at 10:49, Juan G?lvez wrote:

> Hi Viktor,
>
> I've tried it and I get a runtime error :
>
> Unrecoverable error 9998: Internal error: screen driver  initialization 
> failure
>
> Best regards
> Juan
>
> ----- Original Message ----- From: "Szak?ts Viktor" <harbour. 
> 01@syenar.hu>
> To: "Harbour Project Main Developer List." <harbour@harbour- project.org>
> Sent: Tuesday, October 30, 2007 10:38 AM
> Subject: Re: [Harbour] A clue for Harbour+FWH problem
>
>
> Wouldn't this problem be solved by simply ANNOUNCE HB_GTSYS + REQUEST
> HB_GT_GUI
> in app code?
>
> Could someone try?
>
> (The whole hack seems to have been added to avoid
> that requirement, and was replaced by HB_GTUI_HACK to
> rename HB_GT_GUI to HB_GT_WIN. The former requires a
> simple new command in app code, latter requires a whole
> new build, which seems to me more complicated.)
>
> Brgds,
> Viktor
>
> On 2007.10.30., at 10:28, Juan G?lvez wrote:
>
>> Enrico,
>>
>> Sorry but I think you're making something wrong. Are you linking   only 
>> gtgui.lib?
>>
>> I've tried to build Harbour without HB_GTGUI_HACK I've got :
>>
>> c:\utl\bcc55\bin\ilink32.exe -Gn -q -t -aa -Tpe -s -jobjh32 \develop 
>> \CONTAPro
>> -Iobjh32\develop\CONTAPro -Lc:\utl\bcc55\lib @MAKE0000.@@@
>> Error: Unresolved external '_HB_FUN_HB_GT_WIN' referenced from
>> C:\UTL\HARBOUR\LIB\RTL.LIB|gtsys
>>
>> Later I build Harbour with HB_GTGUI_HACK and it works fine ...
>>
>> Juan
>>
>> ----- Original Message ----- From: "Enrico Maria Giordano" 
>> <e.m.giordano@emagsoftware.it>
>> To: "Harbour Project Main Developer List." <harbour@harbour- 
>> project.org>
>> Sent: Tuesday, October 30, 2007 9:45 AM
>> Subject: Re: [Harbour] A clue for Harbour+FWH problem
>>
>>
>>>
>>> -----Messaggio Originale----- Da: "Juan G?lvez" 
>>> <soporte@dsgsoftware.com>
>>> A: "Harbour Project Main Developer List." <harbour@harbour- 
>>> project.org>
>>> Data invio: marted? 30 ottobre 2007 9.28
>>> Oggetto: Re: [Harbour] A clue for Harbour+FWH problem
>>>
>>>
>>>> Enrico,
>>>>
>>>> SET C_USR=-DHB_GTGUI_HACK
>>>
>>> Yes, I did mean that. Sorry, no change... :-(
>>>
>>> EMG
>>>
>>> --
>>> EMAG Software Homepage:     http://www.emagsoftware.it
>>> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
>>> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
>>> The EMG Music page:         http://www.emagsoftware.it/emgmusic
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour 

From harbour.01 at syenar.hu  Tue Oct 30 11:25:50 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 30 11:26:03 2007
Subject: [Harbour] A clue for Harbour+FWH problem
In-Reply-To: <000e01c81ae4$3d6f2920$1700000a@PcJuanxp>
References: <000601c81a75$340815a0$ca64fea9@emag><001601c81acc$bedc2c50$1700000a@PcJuanxp><00a501c81acd$afecf8e0$ca64fea9@emag><000801c81ace$dec09f90$1700000a@PcJuanxp><00cf01c81ad1$2f8ce8f0$ca64fea9@emag><001001c81ad7$4a9fda20$1700000a@PcJuanxp><E13FE4B0-E7D0-4030-A4A5-9544AF4A3FDC@syenar.hu><000c01c81ada$2f639ff0$1700000a@PcJuanxp>
	<AA80254A-9D65-429B-A43A-70DC960E4C64@syenar.hu>
	<000e01c81ae4$3d6f2920$1700000a@PcJuanxp>
Message-ID: <B399943B-E097-4543-9B7D-0A2C1DD46AFF@syenar.hu>

Hi Juan,

> Viktor,
>
> Yes. Now it works !!!
>
> How will it be used finally ?

If you've tried it with the standard build (without HB_GTUI_HACK),
and it works, this is the normal ("official") way to request GTGUI
(or any other GTs for that matter), from app code.

Actually Clipper (and so Harbour) has an interesting feature,
where multiple ANNOUNCEes are ignored, that's why we need to
fall back to the less elegant PROCEDURE method. But apart from
this detail, this is the way to do it.

Brgds,
Viktor

>
> Best regards
> Juan
>
> ----- Original Message ----- From: "Szak?ts Viktor" <harbour. 
> 01@syenar.hu>
> To: "Harbour Project Main Developer List." <harbour@harbour- 
> project.org>
> Sent: Tuesday, October 30, 2007 11:19 AM
> Subject: Re: [Harbour] A clue for Harbour+FWH problem
>
>
> And with this ?:
>
> REQUEST HB_GT_GUI
> PROCEDURE HB_GTSYS() ; RETURN
> PROCEDURE HB_GT_GUI_DEFAULT() ; RETURN
>
> Brgds,
> Viktor
>
> On 2007.10.30., at 10:49, Juan G?lvez wrote:
>
>> Hi Viktor,
>>
>> I've tried it and I get a runtime error :
>>
>> Unrecoverable error 9998: Internal error: screen driver   
>> initialization failure
>>
>> Best regards
>> Juan
>>
>> ----- Original Message ----- From: "Szak?ts Viktor" <harbour.  
>> 01@syenar.hu>
>> To: "Harbour Project Main Developer List." <harbour@harbour-  
>> project.org>
>> Sent: Tuesday, October 30, 2007 10:38 AM
>> Subject: Re: [Harbour] A clue for Harbour+FWH problem
>>
>>
>> Wouldn't this problem be solved by simply ANNOUNCE HB_GTSYS + REQUEST
>> HB_GT_GUI
>> in app code?
>>
>> Could someone try?
>>
>> (The whole hack seems to have been added to avoid
>> that requirement, and was replaced by HB_GTUI_HACK to
>> rename HB_GT_GUI to HB_GT_WIN. The former requires a
>> simple new command in app code, latter requires a whole
>> new build, which seems to me more complicated.)
>>
>> Brgds,
>> Viktor
>>
>> On 2007.10.30., at 10:28, Juan G?lvez wrote:
>>
>>> Enrico,
>>>
>>> Sorry but I think you're making something wrong. Are you  
>>> linking   only gtgui.lib?
>>>
>>> I've tried to build Harbour without HB_GTGUI_HACK I've got :
>>>
>>> c:\utl\bcc55\bin\ilink32.exe -Gn -q -t -aa -Tpe -s -jobjh32  
>>> \develop \CONTAPro
>>> -Iobjh32\develop\CONTAPro -Lc:\utl\bcc55\lib @MAKE0000.@@@
>>> Error: Unresolved external '_HB_FUN_HB_GT_WIN' referenced from
>>> C:\UTL\HARBOUR\LIB\RTL.LIB|gtsys
>>>
>>> Later I build Harbour with HB_GTGUI_HACK and it works fine ...
>>>
>>> Juan
>>>
>>> ----- Original Message ----- From: "Enrico Maria Giordano"  
>>> <e.m.giordano@emagsoftware.it>
>>> To: "Harbour Project Main Developer List." <harbour@harbour-  
>>> project.org>
>>> Sent: Tuesday, October 30, 2007 9:45 AM
>>> Subject: Re: [Harbour] A clue for Harbour+FWH problem
>>>
>>>
>>>>
>>>> -----Messaggio Originale----- Da: "Juan G?lvez"  
>>>> <soporte@dsgsoftware.com>
>>>> A: "Harbour Project Main Developer List." <harbour@harbour-  
>>>> project.org>
>>>> Data invio: marted? 30 ottobre 2007 9.28
>>>> Oggetto: Re: [Harbour] A clue for Harbour+FWH problem
>>>>
>>>>
>>>>> Enrico,
>>>>>
>>>>> SET C_USR=-DHB_GTGUI_HACK
>>>>
>>>> Yes, I did mean that. Sorry, no change... :-(
>>>>
>>>> EMG
>>>>
>>>> --
>>>> EMAG Software Homepage:     http://www.emagsoftware.it
>>>> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
>>>> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
>>>> The EMG Music page:         http://www.emagsoftware.it/emgmusic
>>>> _______________________________________________
>>>> Harbour mailing list
>>>> Harbour@harbour-project.org
>>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>>
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From e.m.giordano at emagsoftware.it  Tue Oct 30 11:58:48 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Oct 30 11:58:55 2007
Subject: [Harbour] A clue for Harbour+FWH problem
References: <000601c81a75$340815a0$ca64fea9@emag><001601c81acc$bedc2c50$1700000a@PcJuanxp><00a501c81acd$afecf8e0$ca64fea9@emag><000801c81ace$dec09f90$1700000a@PcJuanxp><00cf01c81ad1$2f8ce8f0$ca64fea9@emag><001001c81ad7$4a9fda20$1700000a@PcJuanxp><E13FE4B0-E7D0-4030-A4A5-9544AF4A3FDC@syenar.hu><000c01c81ada$2f639ff0$1700000a@PcJuanxp><AA80254A-9D65-429B-A43A-70DC960E4C64@syenar.hu>
	<000e01c81ae4$3d6f2920$1700000a@PcJuanxp>
Message-ID: <01cd01c81aec$3ac51e20$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Juan G?lvez" <soporte@dsgsoftware.com>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 30 ottobre 2007 12.01
Oggetto: Re: [Harbour] A clue for Harbour+FWH problem


> Viktor,
>
> Yes. Now it works !!!

I confirm.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Tue Oct 30 12:43:35 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 30 12:43:42 2007
Subject: [Harbour] 2007-10-29 17:57 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4726EBD6.2050809@marchuet.net>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>
	<4726EBD6.2050809@marchuet.net>
Message-ID: <20071030124335.GA12788@localhost.localdomain>

On Tue, 30 Oct 2007, Miguel Angel Marchuet wrote:
> In the work that you are developing about arm processors.
> cross platform lib will be created ?
> for example I could create an arm (pocketpc) application from
> another platform as i386 based.

It works in such way. If you have Linux with RPM then you can simply
create standard Harbour RPMs (make_rpm.sh) install then create RPM
with WinCE HVM+RTLs by make_rpmce.sh - if you install them then you
can compile and link WinCE/PocketPC application using hbce* scripts.
AFAIK all Harbour features should work.

> I'm thinking about .NULL. implementation to support _NullFlags field.
> I think that the better way is implement Flags at HBITEM for example:
>    struct hb_struString
>    {
>       ULONG           length;
>       ULONG           allocated;
>       char            *value;
>       HB_COUNTER      *pulHolders; /* number of holders of this string */
>       USHORT          flags;       /* indicates if value is .NULL. and 
>       indicates if is VARCHAR*/
>    };

1. This is xHarbour HB_ITEM structure - Harbour uses different one.
2. You will need this flag for all item types not only for strings
3. In Harbour HB_ITEM is strongly optimized and with 4-byte alignment
   it needs only 16 bytes. If you add new field in such way then you
   will increase the size what will cause bigger memory consumption
   and slowness in some operations

You need only one bit to hold NULL flag and it can be bit in type member
of HB_ITEM structure.

> If I assign a Caracter .NULL. field value to a variable:
> 	cVar := FIELD->cNullValue
> 	ValType( cVar ) => "C"
> 	IsNull( cVar ) => .T.
> 	IsNull( FIELD->cNullValue ) => .T.
> 	Empty( cVar ) => .T.
> 	cVar != "" => .T.
> 	cVar + "" => ""
> What do you think about it?

This is simple but the real problem appears in jumps and to be more
precise in backward jumps. F.e. what should be done by code like:

    x := iif( <nulValue>, <v1>, <v2> )

then what should be done by code:
    if <nulValue>
        x := <v1>
    else
        x := <v2>
    endif

and then what should be done by:
    while .t.
       if <nulValue>
          exit
       endif
    enddo

when you will analyze it then please look at this example:

    while .t.
       if !<nulValue>
          loop
       endif
       exit
    enddo

it's different code but it generates exactly the same PCODE
because our jump optimizer is clever enough to give optimal
code. But it also means that at runtime we cannot guess the
original construction so we cannot implement any logic which
will work always correctly only at HVM level - it will be
necessary to block some optimizations in compiler and here
we may have conflict with users who do not want to use NULL
values but will prefer maximally optimized PCODE. So it will
have to be compiler switch. To enable/disable some optimization
logic. If you want and you have time you can implement it.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Oct 30 13:00:40 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 30 13:00:46 2007
Subject: [Harbour] Is dbgoto(recno()) after dbunlock() useful?
In-Reply-To: <9257026e0710262227y3c942e34g80bd6fa8b94efebc@mail.gmail.com>
References: <9257026e0710262227y3c942e34g80bd6fa8b94efebc@mail.gmail.com>
Message-ID: <20071030130040.GA13130@localhost.localdomain>

On Sat, 27 Oct 2007, Lorenzo Fiorini wrote:
> I'm using the function below since years and I wonder if I can replace
> with a plain dbunlock().

Probably you can.

> Is there anyone that remember a reason for
> it?

> function RECUNLOCK()
>    dbunlock()
>    goto recno()

Here you discards the record buffer (just written to disk inside
dbunlock() operation) so it will be read again from DBF file when
you will try to access any field or check DELETE flag in this record.
I can imagine some situations when it may be expected behavior but
I do not think it happens in your case so it's nothing more then some
unnecessary slowness in your code.

>    return NIL

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Tue Oct 30 13:25:35 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Oct 30 13:25:41 2007
Subject: [Harbour] Is dbgoto(recno()) after dbunlock() useful?
In-Reply-To: <20071030130040.GA13130@localhost.localdomain>
References: <9257026e0710262227y3c942e34g80bd6fa8b94efebc@mail.gmail.com>
	<20071030130040.GA13130@localhost.localdomain>
Message-ID: <9257026e0710300625q2603854rc792672129d20395@mail.gmail.com>

On 10/30/07, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> I can imagine some situations when it may be expected behavior but
> I do not think it happens in your case so it's nothing more then some
> unnecessary slowness in your code.

Many thanks.
Lorenzo
From lorenzo.fiorini at gmail.com  Tue Oct 30 13:30:08 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Oct 30 13:30:14 2007
Subject: [Harbour] I've some fixes for contrib/gd,
	contrib/tip and rtl/hbini.prg
Message-ID: <9257026e0710300630u1aa3b18ai6a5de636b916774c@mail.gmail.com>

contrib/gd:
removed #ifdef HB_COMPAT_XHB

contrib/tip: fixes from xHarbour
ftp fixed
http fixed
sendmail.prg added

rtl/hbini.prg: typo fixed cData <> cBuffer

Anybody interested?

best regards,
Lorenzo
From harbour.01 at syenar.hu  Tue Oct 30 13:44:16 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 30 13:44:26 2007
Subject: [Harbour] I've some fixes for contrib/gd,
	contrib/tip and rtl/hbini.prg
In-Reply-To: <9257026e0710300630u1aa3b18ai6a5de636b916774c@mail.gmail.com>
References: <9257026e0710300630u1aa3b18ai6a5de636b916774c@mail.gmail.com>
Message-ID: <0B260AC5-3080-4795-B521-9F30E5FCEAAF@syenar.hu>

Hi Lorenzo,

Sure thing.

Brgds,
Viktor

On 2007.10.30., at 14:30, Lorenzo Fiorini wrote:

> contrib/gd:
> removed #ifdef HB_COMPAT_XHB
>
> contrib/tip: fixes from xHarbour
> ftp fixed
> http fixed
> sendmail.prg added
>
> rtl/hbini.prg: typo fixed cData <> cBuffer
>
> Anybody interested?
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Tue Oct 30 14:18:05 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 30 14:18:11 2007
Subject: [Harbour] 2007-10-30 15:17 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <200710301418.l9UEI5IN014181@31-mo5-4.acn.waw.pl>

2007-10-30 15:17 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/libnf/fttext.c
    - removed not necessary size_t definition

best regards
Przemek
From lorenzo.fiorini at gmail.com  Tue Oct 30 14:28:16 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Oct 30 14:28:27 2007
Subject: [Harbour] I've some fixes for contrib/gd,
	contrib/tip and rtl/hbini.prg
In-Reply-To: <0B260AC5-3080-4795-B521-9F30E5FCEAAF@syenar.hu>
References: <9257026e0710300630u1aa3b18ai6a5de636b916774c@mail.gmail.com>
	<0B260AC5-3080-4795-B521-9F30E5FCEAAF@syenar.hu>
Message-ID: <9257026e0710300728j40d420f5xc44d2b927c28c808@mail.gmail.com>

On 10/30/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> Sure thing.

May I send them to you?

I'm still not sure about my svn env.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Tue Oct 30 14:38:27 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 30 14:38:36 2007
Subject: [Harbour] I've some fixes for contrib/gd,
	contrib/tip and rtl/hbini.prg
In-Reply-To: <9257026e0710300728j40d420f5xc44d2b927c28c808@mail.gmail.com>
References: <9257026e0710300630u1aa3b18ai6a5de636b916774c@mail.gmail.com>
	<0B260AC5-3080-4795-B521-9F30E5FCEAAF@syenar.hu>
	<9257026e0710300728j40d420f5xc44d2b927c28c808@mail.gmail.com>
Message-ID: <E37D3232-FAB8-48DC-9203-14D5B6066495@syenar.hu>

Have a try with one of the contribs first,
if you don't manage, I'll help.

Brgds,
Viktor

On 2007.10.30., at 15:28, Lorenzo Fiorini wrote:

> On 10/30/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:
>
>> Sure thing.
>
> May I send them to you?
>
> I'm still not sure about my svn env.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From miguelangel at marchuet.net  Tue Oct 30 16:49:38 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Tue Oct 30 16:57:10 2007
Subject: [Harbour] 2007-10-29 17:57 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20071030124335.GA12788@localhost.localdomain>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>
	<4726EBD6.2050809@marchuet.net>
	<20071030124335.GA12788@localhost.localdomain>
Message-ID: <472760A2.9090400@marchuet.net>

  > You need only one bit to hold NULL flag and it can be bit in type member
> of HB_ITEM structure.

It's a great idea, I'm agree with it.

#define HB_IT_NULL      ( ( HB_TYPE ) 0x80000 ) // we can implement it?

or we can use ?

#define HB_IT_DEFAULT   ( ( HB_TYPE ) 0x40000 )

> 
>> If I assign a Caracter .NULL. field value to a variable:
>> 	cVar := FIELD->cNullValue
>> 	ValType( cVar ) => "C"
>> 	IsNull( cVar ) => .T.
>> 	IsNull( FIELD->cNullValue ) => .T.
>> 	Empty( cVar ) => .T.
>> 	cVar != "" => .T.
>> 	cVar + "" => ""
>> What do you think about it?


Null value is only a status, and I only can access to this flag with IsNull( uValue )
function nedded to fully support VFP index.

LOCAL MyVar, MyCheck
MyCheck = IsNull(MyVar)   // Returns False.
MyVar = .NULL.            // Assign Null and clear variable to .F. when logical "" when character ...
MyCheck = IsNull(MyVar)   // Returns True.
MyVar = .F.               // Assign Empty value.
MyCheck = IsNull(MyVar)   // Returns False.

Expressions that you might expect to evaluate to True under some circumstances, such as "If Var = .Null." and "If Var <> 
.Null.", are always False. This is because any expression containing a .Null. is itself .Null., and therefore, False.

We dont need to change any more

implementation of

hb_itemPutNull( PHB_ITEM pItem );
to clear an item and change its status flag


> 
> This is simple but the real problem appears in jumps and to be more
> precise in backward jumps. F.e. what should be done by code like:
> 
>     x := iif( <nulValue>, <v1>, <v2> )

<nulValue> is really a normal item and we don't need to change anything is the same as

.NULL. its only to change status is not an item value.


> 
> then what should be done by code:
>     if <nulValue>
>         x := <v1>
>     else
>         x := <v2>
>     endif
> 
> and then what should be done by:
>     while .t.
>        if <nulValue>
>           exit
>        endif
>     enddo
> 
> when you will analyze it then please look at this example:
> 
>     while .t.
>        if !<nulValue>
>           loop
>        endif
>        exit
>     enddo
> 
> it's different code but it generates exactly the same PCODE
> because our jump optimizer is clever enough to give optimal
> code. But it also means that at runtime we cannot guess the
> original construction so we cannot implement any logic which
> will work always correctly only at HVM level - it will be
> necessary to block some optimizations in compiler and here
> we may have conflict with users who do not want to use NULL
> values but will prefer maximally optimized PCODE. So it will
> have to be compiler switch. To enable/disable some optimization
> logic. If you want and you have time you can implement it.

It's not a problem because a logical item with a null flag active its
a .F. false as normal item.

but if you refer to

      while .t.
         if ! .NULL.
            loop
         endif
         exit
      enddo

it can't compile, its a sintax error, because .NULL. is not a complete item

I hope you can understand to me.


Best regards,
Miguel Angel Marchuet



From hbco2 at sbcglobal.net  Tue Oct 30 17:00:34 2007
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Tue Oct 30 17:07:51 2007
Subject: [Harbour] A clue for Harbour+FWH problem
References: <000601c81a75$340815a0$ca64fea9@emag><001601c81acc$bedc2c50$1700000a@PcJuanxp><00a501c81acd$afecf8e0$ca64fea9@emag><000801c81ace$dec09f90$1700000a@PcJuanxp><00cf01c81ad1$2f8ce8f0$ca64fea9@emag><001001c81ad7$4a9fda20$1700000a@PcJuanxp>
	<E13FE4B0-E7D0-4030-A4A5-9544AF4A3FDC@syenar.hu>
Message-ID: <003b01c81b16$6b46ed60$0303a8c0@hbco>

Viktor,

Attempting to add ANNOUNCE HB_GTSYS + REQUEST  HB_GT_GUI yields the
following:

Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Error: Unresolved external '_HB_FUN_HB_GT_GUI' referenced from HBMBR.OBJ

Bill


----- Original Message ----- 
From: "Szak?ts Viktor" <harbour.01@syenar.hu>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Tuesday, October 30, 2007 2:38 AM
Subject: Re: [Harbour] A clue for Harbour+FWH problem


Wouldn't this problem be solved by simply ANNOUNCE HB_GTSYS + REQUEST
HB_GT_GUI
in app code?

Could someone try?

(The whole hack seems to have been added to avoid
that requirement, and was replaced by HB_GTUI_HACK to
rename HB_GT_GUI to HB_GT_WIN. The former requires a
simple new command in app code, latter requires a whole
new build, which seems to me more complicated.)

Brgds,
Viktor

On 2007.10.30., at 10:28, Juan G?lvez wrote:

> Enrico,
>
> Sorry but I think you're making something wrong. Are you linking
> only gtgui.lib?
>
> I've tried to build Harbour without HB_GTGUI_HACK I've got :
>
> c:\utl\bcc55\bin\ilink32.exe -Gn -q -t -aa -Tpe -s -jobjh32\develop
> \CONTAPro
> -Iobjh32\develop\CONTAPro -Lc:\utl\bcc55\lib @MAKE0000.@@@
> Error: Unresolved external '_HB_FUN_HB_GT_WIN' referenced from
> C:\UTL\HARBOUR\LIB\RTL.LIB|gtsys
>
> Later I build Harbour with HB_GTGUI_HACK and it works fine ...
>
> Juan
>
> ----- Original Message ----- From: "Enrico Maria Giordano"
> <e.m.giordano@emagsoftware.it>
> To: "Harbour Project Main Developer List." <harbour@harbour-
> project.org>
> Sent: Tuesday, October 30, 2007 9:45 AM
> Subject: Re: [Harbour] A clue for Harbour+FWH problem
>
>
>>
>> -----Messaggio Originale----- Da: "Juan G?lvez"
>> <soporte@dsgsoftware.com>
>> A: "Harbour Project Main Developer List." <harbour@harbour-
>> project.org>
>> Data invio: marted? 30 ottobre 2007 9.28
>> Oggetto: Re: [Harbour] A clue for Harbour+FWH problem
>>
>>
>>> Enrico,
>>>
>>> SET C_USR=-DHB_GTGUI_HACK
>>
>> Yes, I did mean that. Sorry, no change... :-(
>>
>> EMG
>>
>> --
>> EMAG Software Homepage:     http://www.emagsoftware.it
>> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
>> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
>> The EMG Music page:         http://www.emagsoftware.it/emgmusic
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Tue Oct 30 17:35:43 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 30 17:35:49 2007
Subject: [Harbour] 2007-10-29 17:57 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <472760A2.9090400@marchuet.net>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>
	<4726EBD6.2050809@marchuet.net>
	<20071030124335.GA12788@localhost.localdomain>
	<472760A2.9090400@marchuet.net>
Message-ID: <20071030173543.GA18346@localhost.localdomain>

On Tue, 30 Oct 2007, Miguel Angel Marchuet wrote:
> Null value is only a status, and I only can access to this flag with 
> IsNull( uValue )
> function nedded to fully support VFP index.

Migule it's not only status. If you want to replicate the logic used
by most of RDBMS then you will have to define all relational operations
on NULL field. F.e.:
    SET FILTER to AGE < 20 .OR. AGE > 30

Should exclude all records when AGE IS NULL value. It means that
NULL < 20 should be false and also NULL > 30 should be false. But
it also means that you should have exactly the same results for:
    SET FILTER to !( AGE > 20 .AND. AGE < 30 )
So you cannot define result of 'NULL > 20' as FALSE because in the
above expression you will accept records with NULL as AGE value.
It means that the result of NULL <op> <somevalue> should be also <NULL>.
In HVM you will have to add actions for all operations like !, - (neg),
+, -, /, %, ^, .and., .or. <, <=, >, >=, =, == and each of them will
return NULL if at least one of operand is NULL. Farther you will have
to add support for NULL value in all conditional jumps and always execute
use forward jumps for NULL value. After such modifications HVM will work
like most of other RDBMS in all expressions - BTW most of them implement
this logic in the above way. This is easy but it does not cover the whole
problem because in statements we may have backward jumps. Additionally our
optimization code can join some jumps so in some cases even simple expression
may give different results. Without disabling some part of jump optimization
logic NULL support cannot be implemented correctly.

> LOCAL MyVar, MyCheck
> MyCheck = IsNull(MyVar)   // Returns False.
> MyVar = .NULL.            // Assign Null and clear variable to .F. when 
> logical "" when character ...
> MyCheck = IsNull(MyVar)   // Returns True.
> MyVar = .F.               // Assign Empty value.
> MyCheck = IsNull(MyVar)   // Returns False.
> 
> Expressions that you might expect to evaluate to True under some 
> circumstances, such as "If Var = .Null." and "If Var <> .Null.", are always 
> False. This is because any expression containing a .Null. is itself .Null., 
> and therefore, False.

If you make it in such way then it will not work as expected for:
   if !( Var = .Null. )
because Var = .Null. will be evaluated to .F. and then ! operator will
convert it to .T. - it has to be evaluated also to NULL value.

> We dont need to change any more

We need as above examples (see also second SET FILTER) show.

> implementation of
> hb_itemPutNull( PHB_ITEM pItem );
> to clear an item and change its status flag

This is really minor problem how we will call new functions to operate
on NULL value. The most important are modifications in HVM and compiler.

> >This is simple but the real problem appears in jumps and to be more
> >precise in backward jumps. F.e. what should be done by code like:
> >
> >    x := iif( <nulValue>, <v1>, <v2> )
> <nulValue> is really a normal item and we don't need to change anything is 
> the same as
> .NULL. its only to change status is not an item value.

I do not understand you but I will if you tell me what should be x result
after executing this line: <v1> or <v2>?


> >then what should be done by code:
> >    if <nulValue>
> >        x := <v1>
> >    else
> >        x := <v2>
> >    endif

The same here. x should be <v1> or <v2>? and to be clear also here:
    if !<nulValue>
        x := <v1>
    else
        x := <v2>
    endif

x should be <v1> or <v2>?

and then please think about having the same results from exprssions
like:
    SET FILTER TO age > 20
and:
    SET FILTER TO !age <= 20

In both cases you should have the same record set without records
where AGE is NULL.

> >and then what should be done by:
> >    while .t.
> >       if <nulValue>
> >          exit
> >       endif
> >    enddo
> >when you will analyze it then please look at this example:
> >
> >    while .t.
> >       if !<nulValue>
> >          loop
> >       endif
> >       exit
> >    enddo
> >
> >it's different code but it generates exactly the same PCODE
> >because our jump optimizer is clever enough to give optimal
> >code. But it also means that at runtime we cannot guess the
> >original construction so we cannot implement any logic which
> >will work always correctly only at HVM level - it will be
> >necessary to block some optimizations in compiler and here
> >we may have conflict with users who do not want to use NULL
> >values but will prefer maximally optimized PCODE. So it will
> >have to be compiler switch. To enable/disable some optimization
> >logic. If you want and you have time you can implement it.
> It's not a problem because a logical item with a null flag active its
> a .F. false as normal item.

I hope that now (f.e. after analyzing above SET FILTER TO commands)
you understand that it's problem.

> but if you refer to
>      while .t.
>         if ! .NULL.
>            loop
>         endif
>         exit
>      enddo
> it can't compile, its a sintax error, because .NULL. is not a complete item

I do not see any reason to generate syntax error for '! .NULL.' if we have
to accept '! var' without RT error when var is NULL.

    SET FILTER TO !MAN

should not generate error when MAN is NULL value what of course cannot
be true if we want to use NULL.

> I hope you can understand to me.

I think that you you didn't analyze whole problem when you where answering
and now it will be more clear for you and you understand that simple
translation to .F. in relational operations is not a solution.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Tue Oct 30 18:28:31 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Oct 30 18:28:35 2007
Subject: [Harbour] ChangeLog 2007-10-30 19:25 UTC+0100 Lorenzo Fiorini
Message-ID: <9257026e0710301128u291d45fdxd419d22e5d298b63@mail.gmail.com>

2007-10-30 19:25 UTC+0100 Lorenzo Fiorini (lorenzo.fiorini/at/gmail.com)
  * harbour/contrib/gd/gd.prg
  * harbour/contrib/gd/gdbar.prg
  * harbour/contrib/gd/gdbarcod.prg
  * harbour/contrib/gd/gdchart.prg
  * harbour/contrib/gd/tests/counter.prg
    * removed #ifdef HB_COMPAT_XHB

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Tue Oct 30 18:54:33 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Oct 30 18:54:37 2007
Subject: [Harbour] ChangeLog 2007-10-30 19:45 UTC+0100 Lorenzo Fiorini
Message-ID: <9257026e0710301154x6b0afb5dx81407a2f27879b91@mail.gmail.com>

2007-10-30 19:45 UTC+0100 Lorenzo Fiorini (lorenzo.fiorini/at/gmail.com)
  * harbour/contrib/tip/Makefile
  * harbour/contrib/tip/ftpcln.prg
  * harbour/contrib/tip/httpcln.prg
  + harbour/contrib/tip/sendmail.prg
    * synced with xHarbour's fixes and additions

best regards,
Lorenzo
From miguelangel at marchuet.net  Tue Oct 30 19:02:48 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Tue Oct 30 19:02:52 2007
Subject: [Harbour] 2007-10-29 17:57 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>
	<4726EBD6.2050809@marchuet.net>
	<20071030124335.GA12788@localhost.localdomain>
	<472760A2.9090400@marchuet.net>
	<20071030173543.GA18346@localhost.localdomain>
Message-ID: <001a01c81b27$770cc820$d801a8c0@ingachka>

>
> Migule it's not only status. If you want to replicate the logic used
> by most of RDBMS then you will have to define all relational operations
> on NULL field. F.e.:
>     SET FILTER to AGE < 20 .OR. AGE > 30

All logical operations with .Null. values can be result .F. as in VFP.
as the examples that i report:

static void hb_vmGreater( void )
{
   PHB_ITEM pItem2;
   PHB_ITEM pItem1;

   HB_TRACE(HB_TR_DEBUG, ("hb_vmGreater()"));

   pItem2 = hb_stackItemFromTop( -1 );
   pItem1 = hb_stackItemFromTop( -2 );

   if( HB_IS_NULL( pItem1 ) || HB_IS_NULL( pItem2 ) )
   {
      hb_stackPop();
      hb_stackPop();
      hb_vmPushLogical( FALSE, TRUE ); // Where second parameter indicates a
ITEM .NULL.
    }
   elseif( HB_IS_STRING( pItem1 ) && HB_IS_STRING( pItem2 ) )
   {
      int i = hb_itemStrCmp( pItem1, pItem2, FALSE );
      hb_stackPop();
      hb_stackPop();
      hb_vmPushLogical( i > 0 );
   }
   else if( HB_IS_NUMINT( pItem1 ) && HB_IS_NUMINT( pItem2 ) )
   {
      pItem1->item.asLogical.value = ( HB_ITEM_GET_NUMINTRAW( pItem1 ) >
                                       HB_ITEM_GET_NUMINTRAW( pItem2 ) );
      pItem1->type = HB_IT_LOGICAL;
      hb_stackDec();
   }
   else if( HB_IS_NUMERIC( pItem1 ) && HB_IS_NUMERIC( pItem2 ) )
   {
      double dNumber2 = hb_vmPopNumber();
      double dNumber1 = hb_vmPopNumber();
      hb_vmPushLogical( dNumber1 > dNumber2 );
   }
   else if( HB_IS_DATE( pItem1 ) && HB_IS_DATE( pItem2 ) )
   {
      pItem1->item.asLogical.value = ( pItem1->item.asDate.value >
                                       pItem2->item.asDate.value );
      pItem1->type = HB_IT_LOGICAL;
      hb_stackDec();
   }
   else if( HB_IS_LOGICAL( pItem1 ) && HB_IS_LOGICAL( pItem2 ) )
   {
      BOOL bLogical2 = hb_vmPopLogical();
      BOOL bLogical1 = hb_vmPopLogical();
      hb_vmPushLogical( bLogical1 > bLogical2 );
   }
   else if( hb_objOperatorCall( HB_OO_OP_GREATER, pItem1, pItem1, pItem2,
NULL ) )
      hb_stackPop();

   else
   {
      PHB_ITEM pResult = hb_errRT_BASE_Subst( EG_ARG, 1075, NULL, ">", 2,
pItem1, pItem2 );

      if( pResult )
      {
         hb_stackPop();
         hb_itemMove( pItem1, pResult );
         hb_itemRelease( pResult );
      }
   }
}

/* ------------------------------- */
/* Operators (logical)             */
/* ------------------------------- */

static void hb_vmNot( void )
{
   PHB_ITEM pItem;

   HB_TRACE(HB_TR_DEBUG, ("hb_vmNot()"));

   pItem = hb_stackItemFromTop( -1 );

   if( HB_IS_LOGICAL( pItem ) )
   {
       pItem->type = HB_IT_LOGICAL;
       if( HB_IS_NULL( pItem ) )
       {
          pItem->item.asLogical.value = FALSE;
          pItem->type &= HB_IT_NULL;
       }
       else
          pItem->item.asLogical.value = ! pItem->item.asLogical.value;
   }
   else if( ! hb_objOperatorCall( HB_OO_OP_NOT, pItem, pItem, NULL, NULL ) )
   {
      PHB_ITEM pResult = hb_errRT_BASE_Subst( EG_ARG, 1077, NULL, ".NOT.",
1, pItem );

      if( pResult )
      {
         hb_itemMove( pItem, pResult );
         hb_itemRelease( pResult );
      }
   }
}

>
> Should exclude all records when AGE IS NULL value. It means that
> NULL < 20 should be false and also NULL > 30 should be false. But
> it also means that you should have exactly the same results for:
>     SET FILTER to !( AGE > 20 .AND. AGE < 30 )

it results that always results .F. if IsNull( AGE ) as in VFP because AGE >
20 .AND. AGE < 30
results an logical item null

and

! <logicalnull > is always .F.

I see it very clear.

is posible we need to modify AVERAGE command because de Null values don't
must be computed in average

and I don't remember another question that can afects.

all operations (> >= < <= ! ...) will be results (.F. && .Null. item)

i remember that this is nedded almost for VFP index compatibility.

Best regards,
Miguel Angel marchuet

From teo at windtelsoft.com  Tue Oct 30 19:54:37 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Tue Oct 30 19:54:58 2007
Subject: [Harbour] ChangeLog 2007-10-30 19:45 UTC+0100 Lorenzo Fiorini
In-Reply-To: <9257026e0710301154x6b0afb5dx81407a2f27879b91@mail.gmail.com>
References: <9257026e0710301154x6b0afb5dx81407a2f27879b91@mail.gmail.com>
Message-ID: <200710301354.39275.teo@windtelsoft.com>

On Tuesday 30 October 2007 12:54:33 pm Lorenzo Fiorini wrote:
> 2007-10-30 19:45 UTC+0100 Lorenzo Fiorini (lorenzo.fiorini/at/gmail.com)
>   * harbour/contrib/tip/Makefile
>   * harbour/contrib/tip/ftpcln.prg
>   * harbour/contrib/tip/httpcln.prg
>   + harbour/contrib/tip/sendmail.prg
>     * synced with xHarbour's fixes and additions

Lorenzo,

The source file "sendmail.prg" needs some cleanup to be able to compile it 
with a std harbour build: by removing of the "include "hbcompat.ch"", 
the "TRY/CATCH/END" constructs, etc.

At least, don't include this file in the Makefile.

Currently this file breaks the Harbour building under Linux.


best regards

Teo

From harbour.01 at syenar.hu  Tue Oct 30 19:59:18 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 30 19:59:26 2007
Subject: [Harbour] A clue for Harbour+FWH problem
In-Reply-To: <003b01c81b16$6b46ed60$0303a8c0@hbco>
References: <000601c81a75$340815a0$ca64fea9@emag><001601c81acc$bedc2c50$1700000a@PcJuanxp><00a501c81acd$afecf8e0$ca64fea9@emag><000801c81ace$dec09f90$1700000a@PcJuanxp><00cf01c81ad1$2f8ce8f0$ca64fea9@emag><001001c81ad7$4a9fda20$1700000a@PcJuanxp>
	<E13FE4B0-E7D0-4030-A4A5-9544AF4A3FDC@syenar.hu>
	<003b01c81b16$6b46ed60$0303a8c0@hbco>
Message-ID: <C8D1CE69-7A9E-45FB-95B2-096623795355@syenar.hu>

Hi Bill,

You'll need to add your chosen GT (GTGUI.lib in this case)
to your linker.

Brgds,
Viktor

On 2007.10.30., at 18:00, Bill Smith wrote:

> Viktor,
>
> Attempting to add ANNOUNCE HB_GTSYS + REQUEST  HB_GT_GUI yields the
> following:
>
> Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
> Error: Unresolved external '_HB_FUN_HB_GT_GUI' referenced from  
> HBMBR.OBJ
>
> Bill
>
>
> ----- Original Message -----
> From: "Szak?ts Viktor" <harbour.01@syenar.hu>
> To: "Harbour Project Main Developer List." <harbour@harbour- 
> project.org>
> Sent: Tuesday, October 30, 2007 2:38 AM
> Subject: Re: [Harbour] A clue for Harbour+FWH problem
>
>
> Wouldn't this problem be solved by simply ANNOUNCE HB_GTSYS + REQUEST
> HB_GT_GUI
> in app code?
>
> Could someone try?
>
> (The whole hack seems to have been added to avoid
> that requirement, and was replaced by HB_GTUI_HACK to
> rename HB_GT_GUI to HB_GT_WIN. The former requires a
> simple new command in app code, latter requires a whole
> new build, which seems to me more complicated.)
>
> Brgds,
> Viktor
>
> On 2007.10.30., at 10:28, Juan G?lvez wrote:
>
>> Enrico,
>>
>> Sorry but I think you're making something wrong. Are you linking
>> only gtgui.lib?
>>
>> I've tried to build Harbour without HB_GTGUI_HACK I've got :
>>
>> c:\utl\bcc55\bin\ilink32.exe -Gn -q -t -aa -Tpe -s -jobjh32\develop
>> \CONTAPro
>> -Iobjh32\develop\CONTAPro -Lc:\utl\bcc55\lib @MAKE0000.@@@
>> Error: Unresolved external '_HB_FUN_HB_GT_WIN' referenced from
>> C:\UTL\HARBOUR\LIB\RTL.LIB|gtsys
>>
>> Later I build Harbour with HB_GTGUI_HACK and it works fine ...
>>
>> Juan
>>
>> ----- Original Message ----- From: "Enrico Maria Giordano"
>> <e.m.giordano@emagsoftware.it>
>> To: "Harbour Project Main Developer List." <harbour@harbour-
>> project.org>
>> Sent: Tuesday, October 30, 2007 9:45 AM
>> Subject: Re: [Harbour] A clue for Harbour+FWH problem
>>
>>
>>>
>>> -----Messaggio Originale----- Da: "Juan G?lvez"
>>> <soporte@dsgsoftware.com>
>>> A: "Harbour Project Main Developer List." <harbour@harbour-
>>> project.org>
>>> Data invio: marted? 30 ottobre 2007 9.28
>>> Oggetto: Re: [Harbour] A clue for Harbour+FWH problem
>>>
>>>
>>>> Enrico,
>>>>
>>>> SET C_USR=-DHB_GTGUI_HACK
>>>
>>> Yes, I did mean that. Sorry, no change... :-(
>>>
>>> EMG
>>>
>>> --
>>> EMAG Software Homepage:     http://www.emagsoftware.it
>>> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
>>> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
>>> The EMG Music page:         http://www.emagsoftware.it/emgmusic
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Tue Oct 30 20:19:19 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 30 20:19:24 2007
Subject: [Harbour] 2007-10-29 17:57 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <001a01c81b27$770cc820$d801a8c0@ingachka>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>
	<4726EBD6.2050809@marchuet.net>
	<20071030124335.GA12788@localhost.localdomain>
	<472760A2.9090400@marchuet.net>
	<20071030173543.GA18346@localhost.localdomain>
	<001a01c81b27$770cc820$d801a8c0@ingachka>
Message-ID: <20071030201919.GB18859@localhost.localdomain>

On Tue, 30 Oct 2007, Miguel Angel Marchuet wrote:
> > Migule it's not only status. If you want to replicate the logic used
> > by most of RDBMS then you will have to define all relational operations
> > on NULL field. F.e.:
> >     SET FILTER to AGE < 20 .OR. AGE > 30
> All logical operations with .Null. values can be result .F. as in VFP.
> as the examples that i report:

[...]
Seems that we are talking about two different things.
Because I do not understand you and you do not understand me then
I suggest you will implement NULL support in xHarbour and then we
can see if we can borrow it to Harbour.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Tue Oct 30 20:50:18 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Oct 30 20:50:23 2007
Subject: [Harbour] gtgui.lib
Message-ID: <010501c81b36$7ab14140$ca64fea9@emag>

Dear friends, I think that is very annoying to put

REQUEST HB_GT_GUI
PROCEDURE HB_GTSYS() ; RETURN
PROCEDURE HB_GT_GUI_DEFAULT() ; RETURN

in any GUI program, little samples included... :-(

Can we avoid it?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From harbour.01 at syenar.hu  Tue Oct 30 21:35:02 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 30 21:35:11 2007
Subject: [Harbour] gtgui.lib
In-Reply-To: <010501c81b36$7ab14140$ca64fea9@emag>
References: <010501c81b36$7ab14140$ca64fea9@emag>
Message-ID: <10229F3E-D570-4869-9E6C-46F8122117C8@syenar.hu>

This perfectly normal, exact same logic as RDDSYS.

If you want to override the default GT, you need to tell
Harbour the details.

You can create your own MYGTSYS.PRG (with these 3 lines)
and add it to your lib so that you don't need to add this
3 lines to all your programs manually. (given that your
lib is specified before that Harbour ones)

The other choice is the HACK-ed build, but _that_ is
indeed ugly. If you use your own build, you can change
your preferences in /source/rtl/gtsys.c too.

Brgds,
Viktor

On 2007.10.30., at 21:50, Enrico Maria Giordano wrote:

> Dear friends, I think that is very annoying to put
>
> REQUEST HB_GT_GUI
> PROCEDURE HB_GTSYS() ; RETURN
> PROCEDURE HB_GT_GUI_DEFAULT() ; RETURN
>
> in any GUI program, little samples included... :-(
>
> Can we avoid it?
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Oct 30 21:40:13 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 30 21:40:22 2007
Subject: [Harbour] gtgui.lib
In-Reply-To: <010501c81b36$7ab14140$ca64fea9@emag>
References: <010501c81b36$7ab14140$ca64fea9@emag>
Message-ID: <10C15609-DAD2-446D-B072-BFCDE7FB3EAC@syenar.hu>

Hi Przemek,

Do you think there is any danger in allowing multiple
ANNOUNCE-es in Harbour? Seems to me like a limitation
in CA-Cl*pper for no reason.

Brgds,
Viktor

On 2007.10.30., at 21:50, Enrico Maria Giordano wrote:

> Dear friends, I think that is very annoying to put
>
> REQUEST HB_GT_GUI
> PROCEDURE HB_GTSYS() ; RETURN
> PROCEDURE HB_GT_GUI_DEFAULT() ; RETURN
>
> in any GUI program, little samples included... :-(
>
> Can we avoid it?
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From e.m.giordano at emagsoftware.it  Tue Oct 30 21:50:56 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Oct 30 21:51:27 2007
Subject: [Harbour] gtgui.lib
References: <010501c81b36$7ab14140$ca64fea9@emag>
	<10229F3E-D570-4869-9E6C-46F8122117C8@syenar.hu>
Message-ID: <012501c81b3e$f39a5800$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 30 ottobre 2007 22.35
Oggetto: Re: [Harbour] gtgui.lib


> > Dear friends, I think that is very annoying to put
> >
> > REQUEST HB_GT_GUI
> > PROCEDURE HB_GTSYS() ; RETURN
> > PROCEDURE HB_GT_GUI_DEFAULT() ; RETURN
> >
> > in any GUI program, little samples included... :-(
> >
> > Can we avoid it?
>
> This perfectly normal, exact same logic as RDDSYS.

I don't think it is normal that even a reduced sample like this

#include "Fivewin.ch"


FUNCTION MAIN()

    ? "Hello"

    RETURN NIL

needs of that three lines appended.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Tue Oct 30 22:16:53 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 30 22:17:02 2007
Subject: [Harbour] ChangeLog 2007-10-30 19:45 UTC+0100 Lorenzo Fiorini
In-Reply-To: <200710301354.39275.teo@windtelsoft.com>
References: <9257026e0710301154x6b0afb5dx81407a2f27879b91@mail.gmail.com>
	<200710301354.39275.teo@windtelsoft.com>
Message-ID: <37A8223B-1321-467B-A0FC-80EF5F6BF971@syenar.hu>

I've fixed this file, and I also removed the PCRE requirement.
(using plain cExt $ ".ext1|.ext2" comparison)

Should I commit?

Brgds,
Viktor


On 2007.10.30., at 20:54, Teo Fonrouge wrote:

> On Tuesday 30 October 2007 12:54:33 pm Lorenzo Fiorini wrote:
>> 2007-10-30 19:45 UTC+0100 Lorenzo Fiorini (lorenzo.fiorini/at/ 
>> gmail.com)
>>   * harbour/contrib/tip/Makefile
>>   * harbour/contrib/tip/ftpcln.prg
>>   * harbour/contrib/tip/httpcln.prg
>>   + harbour/contrib/tip/sendmail.prg
>>     * synced with xHarbour's fixes and additions
>
> Lorenzo,
>
> The source file "sendmail.prg" needs some cleanup to be able to  
> compile it
> with a std harbour build: by removing of the "include "hbcompat.ch"",
> the "TRY/CATCH/END" constructs, etc.
>
> At least, don't include this file in the Makefile.
>
> Currently this file breaks the Harbour building under Linux.
>
>
> best regards
>
> Teo
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Tue Oct 30 22:26:59 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 30 22:27:07 2007
Subject: [Harbour] gtgui.lib
In-Reply-To: <10C15609-DAD2-446D-B072-BFCDE7FB3EAC@syenar.hu>
References: <010501c81b36$7ab14140$ca64fea9@emag>
	<10C15609-DAD2-446D-B072-BFCDE7FB3EAC@syenar.hu>
Message-ID: <20071030222659.GA19537@localhost.localdomain>

On Tue, 30 Oct 2007, Szak?ts Viktor wrote:
> Hi Przemek,
> Do you think there is any danger in allowing multiple
> ANNOUNCE-es in Harbour? Seems to me like a limitation
> in CA-Cl*pper for no reason.

I also do not know why Clipper has such limitation.
For sure it was implemented intentionally but I cannot say why.
Maybe it was a method of forcing some some more strict syntax
and module dividing or some unfinished code for ANNOUNCE / REQUEST
which will not use function calls? We can remove this condition.

> >Dear friends, I think that is very annoying to put
> >REQUEST HB_GT_GUI
> >PROCEDURE HB_GTSYS() ; RETURN
> >PROCEDURE HB_GT_GUI_DEFAULT() ; RETURN
> >in any GUI program, little samples included... :-(
> >Can we avoid it?

I very often read on this list that we do not have any documentation.
But what should I say if we have documentation written long time ago.
See the second part of harbour/doc/gtapi.txt
Long time ago I added a hack for Windows users giving them time to
update their code. This peace of text in gtapi.txt is a result of
exactly the same discussion on about exactly the same problem we
have AFAIR over _ONE_AND_A_HALF_ year ago. For this time GTGUI had in
its body:
    ANNOUNCE HB_GT_WIN
It means that linker thought that it was linking GTWIN but in fact
it was GTGUI. This was temporary hack which forbid to make GTGUI part
of harbour.dll because in two libraries: GTWIN and GTGUI we have the
same symbol: HB_FUN_HB_GT_WIN so only one can be included in final
.dll. Some environments like hb* scripts in MinGW builds from the
beginning were ready to use any GT driver and user can choice default
and linked GT drivers using hbmk or hblnk switches. Additionally in
all compilers it's possible to use the ANNOUNCE/REQUEST mechanism
described in harbour/doc/gtapi.txt.
In short words if someone wants to make GTGUI his default driver then
he should add to his code:
    REQUEST HB_GT_GUI_DEFAULT
and link application with both GTGUI and GTWIN (I guess that Harbour
was compiled with GTWIN as default GT driver because in rtl/gtsys.c
the default driver is REQUESTed).
If he does not want to link thr default GT driver with his application
then adding also:
    ANNOUNCE HB_GTSYS
disables binding to GT driver which was default during Harbour compilation.
If someone does not like to add this two lines to his code then can create
.obj file and then .lib with these two lines:
    ANNOUNCE HB_GTSYS
    REQUEST HB_GT_GUI_DEFAULT

call it as in any way and use it in link scripts.
If Windows users think it's such fundamental functionality that it should
be in SVN repository then they can ask on this forum about adding it and
then do that.
It's also possible to create compiler and linker wrappers like hb*
scripts but for other C compilers/linkers. I think that such long time
like in this case was enough to create some solution and I do not see
any reasons to longer reduce functionality of MinGW and other builds
which can create harbour.dll with all libraries.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Oct 30 22:33:49 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 30 22:33:56 2007
Subject: [Harbour] gtgui.lib
In-Reply-To: <012501c81b3e$f39a5800$ca64fea9@emag>
References: <010501c81b36$7ab14140$ca64fea9@emag>
	<10229F3E-D570-4869-9E6C-46F8122117C8@syenar.hu>
	<012501c81b3e$f39a5800$ca64fea9@emag>
Message-ID: <8994E3F5-E1EA-46FB-83B7-40D9D5FD7A7A@syenar.hu>

Since Harbour doesn't support any GUI, this problem
should be solved by the GUI providers.

Brgds,
Viktor

On 2007.10.30., at 22:50, Enrico Maria Giordano wrote:

>
> -----Messaggio Originale----- Da: "Szak?ts Viktor" <harbour. 
> 01@syenar.hu>
> A: "Harbour Project Main Developer List." <harbour@harbour- 
> project.org>
> Data invio: marted? 30 ottobre 2007 22.35
> Oggetto: Re: [Harbour] gtgui.lib
>
>
>> > Dear friends, I think that is very annoying to put
>> >
>> > REQUEST HB_GT_GUI
>> > PROCEDURE HB_GTSYS() ; RETURN
>> > PROCEDURE HB_GT_GUI_DEFAULT() ; RETURN
>> >
>> > in any GUI program, little samples included... :-(
>> >
>> > Can we avoid it?
>>
>> This perfectly normal, exact same logic as RDDSYS.
>
> I don't think it is normal that even a reduced sample like this
>
> #include "Fivewin.ch"
>
>
> FUNCTION MAIN()
>
>    ? "Hello"
>
>    RETURN NIL
>
> needs of that three lines appended.
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Tue Oct 30 22:37:56 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 30 22:38:01 2007
Subject: [Harbour] ChangeLog 2007-10-30 19:45 UTC+0100 Lorenzo Fiorini
In-Reply-To: <37A8223B-1321-467B-A0FC-80EF5F6BF971@syenar.hu>
References: <9257026e0710301154x6b0afb5dx81407a2f27879b91@mail.gmail.com>
	<200710301354.39275.teo@windtelsoft.com>
	<37A8223B-1321-467B-A0FC-80EF5F6BF971@syenar.hu>
Message-ID: <20071030223756.GB19537@localhost.localdomain>

On Tue, 30 Oct 2007, Szak?ts Viktor wrote:
> I've fixed this file, and I also removed the PCRE requirement.
> (using plain cExt $ ".ext1|.ext2" comparison)

Viktor are expressions they the same?
If you are talking about replacing:
    ( cFile LIKE ".+\.(gsm|gsd)" )
by:
    cFile $ ".gsm|.gsd"
Then this is not the same code.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Oct 30 22:50:52 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 30 22:50:59 2007
Subject: [Harbour] ChangeLog 2007-10-30 19:45 UTC+0100 Lorenzo Fiorini
In-Reply-To: <20071030223756.GB19537@localhost.localdomain>
References: <9257026e0710301154x6b0afb5dx81407a2f27879b91@mail.gmail.com>
	<200710301354.39275.teo@windtelsoft.com>
	<37A8223B-1321-467B-A0FC-80EF5F6BF971@syenar.hu>
	<20071030223756.GB19537@localhost.localdomain>
Message-ID: <BC571E6A-1B55-4FCC-8E2D-27CE216444B8@syenar.hu>

> On Tue, 30 Oct 2007, Szak?ts Viktor wrote:
>> I've fixed this file, and I also removed the PCRE requirement.
>> (using plain cExt $ ".ext1|.ext2" comparison)
>
> Viktor are expressions they the same?
> If you are talking about replacing:
>     ( cFile LIKE ".+\.(gsm|gsd)" )
> by:
>     cFile $ ".gsm|.gsd"
> Then this is not the same code.

Lower( cExt ) $ ".gsm|.gsd"

I know, if extensions would contain "|" char, it could
still go wrong. Is this it?

Brgds,
Viktor

From teo at windtelsoft.com  Tue Oct 30 23:09:13 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Tue Oct 30 23:09:32 2007
Subject: [Harbour] ChangeLog 2007-10-30 19:45 UTC+0100 Lorenzo Fiorini
In-Reply-To: <37A8223B-1321-467B-A0FC-80EF5F6BF971@syenar.hu>
References: <9257026e0710301154x6b0afb5dx81407a2f27879b91@mail.gmail.com>
	<200710301354.39275.teo@windtelsoft.com>
	<37A8223B-1321-467B-A0FC-80EF5F6BF971@syenar.hu>
Message-ID: <200710301709.13550.teo@windtelsoft.com>

On Tuesday 30 October 2007 04:16:53 pm Szak?ts Viktor wrote:
> I've fixed this file, and I also removed the PCRE requirement.
> (using plain cExt $ ".ext1|.ext2" comparison)

I think is better to use the hb_regex* functions.


best regards

Teo
From druzus at acn.waw.pl  Tue Oct 30 23:31:04 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 30 23:31:27 2007
Subject: [Harbour] ChangeLog 2007-10-30 19:45 UTC+0100 Lorenzo Fiorini
In-Reply-To: <20071030223756.GB19537@localhost.localdomain>
References: <9257026e0710301154x6b0afb5dx81407a2f27879b91@mail.gmail.com>
	<200710301354.39275.teo@windtelsoft.com>
	<37A8223B-1321-467B-A0FC-80EF5F6BF971@syenar.hu>
	<20071030223756.GB19537@localhost.localdomain>
Message-ID: <20071030233104.GA20835@localhost.localdomain>

On Tue, 30 Oct 2007, Szak?ts Viktor wrote:
> > If you are talking about replacing:
> >     ( cFile LIKE ".+\.(gsm|gsd)" )
> > by:
> >     cFile $ ".gsm|.gsd"
> > Then this is not the same code.
> Lower( cExt ) $ ".gsm|.gsd"
> I know, if extensions would contain "|" char, it could
> still go wrong. Is this it?

No. direct translation of:
   cFile LIKE ".+\.(gsm|gsd)"
to pure Clipper code should look like:
   len( cFile ) > 4 .and. ;
      ( right( cFile, 4 ) == ".gsm" .or. right( cFile, 4 ) == ".gsd" )

Please be careful in such translations, if you are not sure about
special meanings of some operators in regular expressions, f.e.:
   ()[].\+-^*?
has special meaning different then in wildcards, and you want
to eliminate LIKE and HAS from code then use the same rules as in
hbcompat.ch. F.e. instead of:
   cFile LIKE ".+\.(gsm|gsd)"
use:
   HB_REGEXLIKE( ".+\.(gsm|gsd)", cFile )
In the above example it was easy to eliminate the regex but in some
others it may not be such trivial and the final code can be much
harder to understand and update. Also if it's not possible to eliminate
all regex then I think it's better to leave them instead of mixing
regex with pure Clipper code.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Oct 30 23:34:11 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 30 23:34:19 2007
Subject: [Harbour] ChangeLog 2007-10-30 19:45 UTC+0100 Lorenzo Fiorini
In-Reply-To: <200710301709.13550.teo@windtelsoft.com>
References: <9257026e0710301154x6b0afb5dx81407a2f27879b91@mail.gmail.com>
	<200710301354.39275.teo@windtelsoft.com>
	<37A8223B-1321-467B-A0FC-80EF5F6BF971@syenar.hu>
	<200710301709.13550.teo@windtelsoft.com>
Message-ID: <87AC3E79-F8EB-4975-9152-0285F2BF56F0@syenar.hu>

Is there any system where an extension (filename) can contain "|" char?
Any other reason?

Brgds,
Viktor

On 2007.10.31., at 0:09, Teo Fonrouge wrote:

> On Tuesday 30 October 2007 04:16:53 pm Szak?ts Viktor wrote:
>> I've fixed this file, and I also removed the PCRE requirement.
>> (using plain cExt $ ".ext1|.ext2" comparison)
>
> I think is better to use the hb_regex* functions.
>
>
> best regards
>
> Teo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Oct 30 23:35:58 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 30 23:36:05 2007
Subject: [Harbour] ChangeLog 2007-10-30 19:45 UTC+0100 Lorenzo Fiorini
In-Reply-To: <200710301709.13550.teo@windtelsoft.com>
References: <9257026e0710301154x6b0afb5dx81407a2f27879b91@mail.gmail.com>
	<200710301354.39275.teo@windtelsoft.com>
	<37A8223B-1321-467B-A0FC-80EF5F6BF971@syenar.hu>
	<200710301709.13550.teo@windtelsoft.com>
Message-ID: <F095A83D-C496-4D03-9F84-68D4C3362BAD@syenar.hu>

Okey Q answered. It is too late.

On 2007.10.31., at 0:09, Teo Fonrouge wrote:

> On Tuesday 30 October 2007 04:16:53 pm Szak?ts Viktor wrote:
>> I've fixed this file, and I also removed the PCRE requirement.
>> (using plain cExt $ ".ext1|.ext2" comparison)
>
> I think is better to use the hb_regex* functions.
>
>
> best regards
>
> Teo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Tue Oct 30 23:38:23 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Oct 30 23:38:29 2007
Subject: [Harbour] 2007-10-29 17:57 UTC+0100
	PrzemyslawCzerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <005801c81b4a$ba1cab30$d801a8c0@ingachka>
References: <20071030201919.GB18859@localhost.localdomain>
	<005801c81b4a$ba1cab30$d801a8c0@ingachka>
Message-ID: <20071030233823.GB20835@localhost.localdomain>

On Wed, 31 Oct 2007, Miguel Angel Marchuet wrote:
> Ok I upload it when unfrezze xHarbour.
> But I don't want it can be incompatible with Harbour.
> As you know I'm working to do more near xHarbour and Harbour.
> Is posible one day, we can fusion 2 projects.

If your implementation in xHarbour will work without any anomalies
in similar to other RDBMS way and Harbour users will accept it then
I do not see anything wrong against it. But because you were not
able to answer for my questions about the behavior of some code
then I want to wait for xHarbour version so I'll be able to test
the peace of code I sent myself and see the results. Then I can
say sth more about it.

best regards,
Przemek

> ----- Original Message ----- 
> From: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
> To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
> Sent: Tuesday, October 30, 2007 9:19 PM
> Subject: Re: [Harbour] 2007-10-29 17:57 UTC+0100 PrzemyslawCzerpak
> (druzus/at/priv.onet.pl)
> >
> > [...]
> > Seems that we are talking about two different things.
> > Because I do not understand you and you do not understand me then
> > I suggest you will implement NULL support in xHarbour and then we
> > can see if we can borrow it to Harbour.
> >
> > best regards,
> > Przemek
From harbour.01 at syenar.hu  Tue Oct 30 23:40:35 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Tue Oct 30 23:40:44 2007
Subject: [Harbour] ChangeLog 2007-10-30 19:45 UTC+0100 Lorenzo Fiorini
In-Reply-To: <20071030233104.GA20835@localhost.localdomain>
References: <9257026e0710301154x6b0afb5dx81407a2f27879b91@mail.gmail.com>
	<200710301354.39275.teo@windtelsoft.com>
	<37A8223B-1321-467B-A0FC-80EF5F6BF971@syenar.hu>
	<20071030223756.GB19537@localhost.localdomain>
	<20071030233104.GA20835@localhost.localdomain>
Message-ID: <C98CACEC-D249-4BBD-B070-D3C87CF9A0A3@syenar.hu>

> On Tue, 30 Oct 2007, Szak?ts Viktor wrote:
>>> If you are talking about replacing:
>>>     ( cFile LIKE ".+\.(gsm|gsd)" )
>>> by:
>>>     cFile $ ".gsm|.gsd"
>>> Then this is not the same code.
>> Lower( cExt ) $ ".gsm|.gsd"
>> I know, if extensions would contain "|" char, it could
>> still go wrong. Is this it?
>
> No. direct translation of:
>    cFile LIKE ".+\.(gsm|gsd)"
> to pure Clipper code should look like:
>    len( cFile ) > 4 .and. ;
>       ( right( cFile, 4 ) == ".gsm" .or. right( cFile, 4 ) == ".gsd" )
>
> Please be careful in such translations, if you are not sure about
> special meanings of some operators in regular expressions, f.e.:
>    ()[].\+-^*?
> has special meaning different then in wildcards, and you want
> to eliminate LIKE and HAS from code then use the same rules as in
> hbcompat.ch. F.e. instead of:
>    cFile LIKE ".+\.(gsm|gsd)"
> use:
>    HB_REGEXLIKE( ".+\.(gsm|gsd)", cFile )
> In the above example it was easy to eliminate the regex but in some
> others it may not be such trivial and the final code can be much
> harder to understand and update. Also if it's not possible to  
> eliminate
> all regex then I think it's better to leave them instead of mixing
> regex with pure Clipper code.

Okey, I know regexp is more than "$" :)

Apart from the ".doc" vs. ".docx" problem (which can be solved
by arrangement if using "$"), is there any other concern in this
case? (Pipe cannot be in filenames, but I don't know how general
is rule is)

Uff, I think I'll leave this for some other time :)

Brgds,
Viktor

From teo at windtelsoft.com  Tue Oct 30 23:57:57 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Tue Oct 30 23:58:16 2007
Subject: [Harbour] ChangeLog 2007-10-30 19:45 UTC+0100 Lorenzo Fiorini
In-Reply-To: <C98CACEC-D249-4BBD-B070-D3C87CF9A0A3@syenar.hu>
References: <9257026e0710301154x6b0afb5dx81407a2f27879b91@mail.gmail.com>
	<20071030233104.GA20835@localhost.localdomain>
	<C98CACEC-D249-4BBD-B070-D3C87CF9A0A3@syenar.hu>
Message-ID: <200710301757.59142.teo@windtelsoft.com>

On Tuesday 30 October 2007 05:40:35 pm Szak?ts Viktor wrote:
> > On Tue, 30 Oct 2007, Szak?ts Viktor wrote:
> >>> If you are talking about replacing:
> >>>     ( cFile LIKE ".+\.(gsm|gsd)" )
> >>> by:
> >>>     cFile $ ".gsm|.gsd"
> >>> Then this is not the same code.
> >>
> >> Lower( cExt ) $ ".gsm|.gsd"
> >> I know, if extensions would contain "|" char, it could
> >> still go wrong. Is this it?
> >
> > No. direct translation of:
> >    cFile LIKE ".+\.(gsm|gsd)"
> > to pure Clipper code should look like:
> >    len( cFile ) > 4 .and. ;
> >       ( right( cFile, 4 ) == ".gsm" .or. right( cFile, 4 ) == ".gsd" )
> >
> > Please be careful in such translations, if you are not sure about
> > special meanings of some operators in regular expressions, f.e.:
> >    ()[].\+-^*?
> > has special meaning different then in wildcards, and you want
> > to eliminate LIKE and HAS from code then use the same rules as in
> > hbcompat.ch. F.e. instead of:
> >    cFile LIKE ".+\.(gsm|gsd)"
> > use:
> >    HB_REGEXLIKE( ".+\.(gsm|gsd)", cFile )
> > In the above example it was easy to eliminate the regex but in some
> > others it may not be such trivial and the final code can be much
> > harder to understand and update. Also if it's not possible to
> > eliminate
> > all regex then I think it's better to leave them instead of mixing
> > regex with pure Clipper code.
>
> Okey, I know regexp is more than "$" :)
>
> Apart from the ".doc" vs. ".docx" problem (which can be solved
> by arrangement if using "$"), is there any other concern in this
> case? (Pipe cannot be in filenames, but I don't know how general
> is rule is)

At least on Linux (and possibly in all POSIX OS's) you can use the pipe as a 
part of a filename, for example "yes|no" (without the ") is a perfect valid 
file name, the only caveat is that you need to use the escape character to 
indicate the pipe when you need to do something with the file:

$ cat yes\|no


best regards

Teo
From teo at windtelsoft.com  Wed Oct 31 00:37:56 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Wed Oct 31 00:38:13 2007
Subject: [Harbour] ChangeLog 2007-10-30 19:45 UTC+0100 Lorenzo Fiorini
In-Reply-To: <9257026e0710301154x6b0afb5dx81407a2f27879b91@mail.gmail.com>
References: <9257026e0710301154x6b0afb5dx81407a2f27879b91@mail.gmail.com>
Message-ID: <200710301837.56277.teo@windtelsoft.com>

On Tuesday 30 October 2007 12:54:33 pm Lorenzo Fiorini wrote:
> 2007-10-30 19:45 UTC+0100 Lorenzo Fiorini (lorenzo.fiorini/at/gmail.com)
>   * harbour/contrib/tip/Makefile
>   * harbour/contrib/tip/ftpcln.prg
>   * harbour/contrib/tip/httpcln.prg
>   + harbour/contrib/tip/sendmail.prg
>     * synced with xHarbour's fixes and additions

2007-10-30 18:33 UTC-0600 Teo Fonrouge (teo/at/windtelsoft/dot/com)
  * contrib/tip/sendmail.prg
    * cleanup to compile with a std harbour build, removed the
      "include "hbcompat.ch"", and added the #translate for LIKE found in the
      hbcompat.ch file, to keep it easy and clean when comparing from/to the
      xHarbour version.


best regards

Teo
From dbtopas at dbtopas.lt  Wed Oct 31 02:12:00 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 31 02:11:16 2007
Subject: [Harbour] 2007-10-29 17:57 UTC+0100
	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <001a01c81b27$770cc820$d801a8c0@ingachka>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>
	<001a01c81b27$770cc820$d801a8c0@ingachka>
Message-ID: <4727E470.1060506@dbtopas.lt>

Miguel Angel Marchuet wrote:
> static void hb_vmGreater( void )
>    if( HB_IS_NULL( pItem1 ) || HB_IS_NULL( pItem2 ) )
>    {
>       hb_stackPop();
>       hb_stackPop();
>       hb_vmPushLogical( FALSE, TRUE ); // Where second parameter indicates a
> ITEM .NULL.
> 
> static void hb_vmNot( void )
>    if( HB_IS_LOGICAL( pItem ) )
>    {
>        pItem->type = HB_IT_LOGICAL;
>        if( HB_IS_NULL( pItem ) )
>        {
>           pItem->item.asLogical.value = FALSE;
>           pItem->type &= HB_IT_NULL;
>        }
>        else
>           pItem->item.asLogical.value = ! pItem->item.asLogical.value;


> I see it very clear.
> 
> all operations (> >= < <= ! ...) will be results (.F. && .Null. item)


Miguel, I'll try to explain the problem in a different way. What 
behavior you expect for HB_P_JUMPTRUE and HB_P_JUMPFALSE if stack top 
item is ".F. && .Null. item"?


Best regards,
Mindaugas

From gvarona at ec-red.com  Wed Oct 31 03:39:16 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Wed Oct 31 03:39:27 2007
Subject: [Harbour] =?iso-8859-1?q?=BFC=F3mo_se_usa_BMDBFCDX=3F_/_How_to_u?=
 =?iso-8859-1?q?se_BMDBFCDX=3F?=
Message-ID: <4727F8E4.4070203@ec-red.com>

[SPA]
Hola, estoy probando utilizar BMDBFCDX, para lo cual, antes del 
procedimiento MAIN pongo:
REQUEST BMDBFCDX
y la primera linea ejecutable del Procedimiento principal es:
RddSetDefault( "BMDBFCDX" )
pero cuando compilo obtengo los siguientes mensajes:

[ENG]
Hello, I am trying to use BMDBFCDX, which prior to the procedure I MAIN:
REQUEST BMDBFCDX
And the first line executable procedure is:
RddSetDefault ( "BMDBFCDX")
But when compiling I get the following messages:

    echo SEARCH_DIR( D:\HARBOU~1\LIB ) >
    ==> Linking to make E:\SyS_GVS\Stk\FO\Stk2007h.EXE ...
    C:\hmg\MINGW\BIN\GCC.EXE -Wall -mno-cygwin 
-oE:\SyS_GVS\Stk\FO\Stk2007h.EXE -LC:\hmg\lib -LC:\hmg\HARBOUR\lib 
-LC:\hmg\MINGW\lib -LE:\SYS_GVS\ABRAXAS -LD:\HARBOU~1\LIB 
E:\SyS_GVS\Stk\FO\OBJM2GH\MENU.o E:\SyS_GVS\Stk\FO\OBJM2GH\UTIL.o 
E:\SyS_GVS\Stk\FO\OBJM2GH\MENUSYS.o E:\SyS_GVS\Stk\FO\OBJM2GH\STKCENCO.o 
E:\SyS_GVS\Stk\FO\OBJM2GH\STKCLPRO.o 
E:\SyS_GVS\Stk\FO\OBJM2GH\STKGRUPO.o 
E:\SyS_GVS\Stk\FO\OBJM2GH\STKINVEN.o 
E:\SyS_GVS\Stk\FO\OBJM2GH\STKMASTE.o 
E:\SyS_GVS\Stk\FO\OBJM2GH\STKMOVIM.o 
E:\SyS_GVS\Stk\FO\OBJM2GH\STKOPSTK.o 
E:\SyS_GVS\Stk\FO\OBJM2GH\STKTIDOC.o E:\SyS_GVS\Stk\FO\OBJM2GH\TALONES.o 
-mconsole -Wl,--start-group -lgtwin -lhbsix -lvm -lrdd -lmacro -lpp 
-lrtl -llang -lcommon -lnulsys -ldbfntx -ldbfcdx -ldbffpt -luser32 
-lwinspool -lcomctl32 -lcomdlg32 -lgdi32 -lole32 -loleaut32 -luuid 
-lwinmm -lvfw32 -lwsock32 -lct -lmisc -lgraph -lreport -lini -ldll 
-lhbole -lregistry -lcodepage -ldebug -lhsx -lrddads -lAbraxasMinGW 
-lbmdbfcdx -Wl,--end-group
D:\HARBOU~1\LIB/libbmdbfcdx.a(bmdbfcdx1.o):bmdbfcdx1.c:(.text+0xe9ce): 
undefined reference to `hb_setGetL'
D:\HARBOU~1\LIB/libbmdbfcdx.a(bmdbfcdx1.o):bmdbfcdx1.c:(.text+0xeeab): 
undefined reference to `hb_setGetL'
D:\HARBOU~1\LIB/libbmdbfcdx.a(bmdbfcdx1.o):bmdbfcdx1.c:(.text+0xef0f): 
undefined reference to `hb_setGetL'
D:\HARBOU~1\LIB/libbmdbfcdx.a(bmdbfcdx1.o):bmdbfcdx1.c:(.text+0x13b09): 
undefined reference to `hb_setGetL'

***********
?C?mo puedo hacer para usar este RDD? / How to use BMDBFCDX?
Gracias de Antemano / TIA

Salu2,
GVS
From lorenzo.fiorini at gmail.com  Wed Oct 31 06:19:54 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Oct 31 06:20:00 2007
Subject: [Harbour] ChangeLog 2007-10-30 19:45 UTC+0100 Lorenzo Fiorini
In-Reply-To: <200710301354.39275.teo@windtelsoft.com>
References: <9257026e0710301154x6b0afb5dx81407a2f27879b91@mail.gmail.com>
	<200710301354.39275.teo@windtelsoft.com>
Message-ID: <9257026e0710302319o14f53ac4qccd1c2dfc6e76426@mail.gmail.com>

On 10/30/07, Teo Fonrouge <teo@windtelsoft.com> wrote:

> The source file "sendmail.prg" needs some cleanup to be able to compile it
> with a std harbour build: by removing of the "include "hbcompat.ch"",
> the "TRY/CATCH/END" constructs, etc.
>
> At least, don't include this file in the Makefile.
>
> Currently this file breaks the Harbour building under Linux.

Sorry, I still use include/hbcompat.ch and I didn't noticed it.

Anyway I don't use it, you can remove it.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Wed Oct 31 06:33:15 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Oct 31 06:33:18 2007
Subject: [Harbour] Isn't it "gtwin" name too generic?
Message-ID: <9257026e0710302333s4271f3b7j252157735c43be8c@mail.gmail.com>

IMHO gtwvt is "more Windows" than gtwin and gtgui is for Windows GUI
app but gtwin "sounds a lot" for Windows and new users could think
that gtwin is the "only" way to go for Windows or that it's required
for Windows.

Shouldn't we change gtwin to sth like gtwct Windows Console Terminal?

best regards,
Lorenzo
From e.m.giordano at emagsoftware.it  Wed Oct 31 08:19:50 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Oct 31 08:19:54 2007
Subject: [Harbour] gtgui.lib
References: <010501c81b36$7ab14140$ca64fea9@emag><10229F3E-D570-4869-9E6C-46F8122117C8@syenar.hu><012501c81b3e$f39a5800$ca64fea9@emag>
	<8994E3F5-E1EA-46FB-83B7-40D9D5FD7A7A@syenar.hu>
Message-ID: <002901c81b96$ce9a1d30$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Szak?ts Viktor" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 30 ottobre 2007 23.33
Oggetto: Re: [Harbour] gtgui.lib


> Since Harbour doesn't support any GUI, this problem
> should be solved by the GUI providers.

Ok, I understood.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From M.Horodyski at pzuzycie.com.pl  Wed Oct 31 08:39:44 2007
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Wed Oct 31 08:40:14 2007
Subject: [Harbour] RE: Harbour Digest, Vol 12, Issue 96
Message-ID: <503AD832DBBF60469E9F807668A2F6A202956DD1@PINK.zycie.pzu>


>Message: 4
>Date: Tue, 30 Oct 2007 14:30:08 +0100
>From: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
>Subject: [Harbour] I've some fixes for contrib/gd,	contrib/tip and
>	rtl/hbini.prg
>To: "Harbour Project Main Developer List."
>	<harbour@harbour-project.org>
>Message-ID:
>	<9257026e0710300630u1aa3b18ai6a5de636b916774c@mail.gmail.com>
>Content-Type: text/plain; charset=ISO-8859-1
>
>contrib/gd:
>removed #ifdef HB_COMPAT_XHB
>
>contrib/tip: fixes from xHarbour
>ftp fixed
>http fixed
>sendmail.prg added
>
>rtl/hbini.prg: typo fixed cData <> cBuffer
>
>Anybody interested?

Yes - we all - in next stable version.
Lorenzo - can you prapare a small web example, where is used http server
(iss, apache or another), like Giancarlo many years ago.
Eploye you in your aplication session (after login/password) ? 
How you get variable etc.

Regards,
Marek Horodyski
From miguelangel at marchuet.net  Wed Oct 31 08:37:26 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Oct 31 08:45:05 2007
Subject: [Harbour] 2007-10-29 17:57
	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4727E470.1060506@dbtopas.lt>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>
	<4727E470.1060506@dbtopas.lt>
Message-ID: <47283EC6.1030604@marchuet.net>

  >
> Miguel, I'll try to explain the problem in a different way. What 
> behavior you expect for HB_P_JUMPTRUE and HB_P_JUMPFALSE if stack top 
> item is ".F. && .Null. item"?

In this case no change is necessary, because the pushed item is a logical item.
.Null. only changes the status of item logical. For this reason and using the same
behavior of VFP a logical item .Null. is always .F., HB_P_JUMPTRUE never arrive.

Best regards,
Miguel Angel Marchuet


> 
> 
> Best regards,
> Mindaugas
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

From miguelangel at marchuet.net  Wed Oct 31 08:42:03 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Oct 31 08:49:33 2007
Subject: [Harbour] =?ISO-8859-1?Q?=BFC=F3mo_se_usa_BMDBFCDX=3F_?=
	=?ISO-8859-1?Q?/_How_to_use_BMDBFCDX=3F?=
In-Reply-To: <4727F8E4.4070203@ec-red.com>
References: <4727F8E4.4070203@ec-red.com>
Message-ID: <47283FDB.5000706@marchuet.net>

In last CVS hb_setGetL are not used.

I don't use linux, and i can't test it. but try to download the last CVS

Best regards,
Miguel Angel Marchuet

From lorenzo.fiorini at gmail.com  Wed Oct 31 09:20:23 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Oct 31 09:20:26 2007
Subject: [Harbour] RE: Harbour Digest, Vol 12, Issue 96
In-Reply-To: <503AD832DBBF60469E9F807668A2F6A202956DD1@PINK.zycie.pzu>
References: <503AD832DBBF60469E9F807668A2F6A202956DD1@PINK.zycie.pzu>
Message-ID: <9257026e0710310220l4ac4024dk9e3d62494a8e47ef@mail.gmail.com>

On 10/31/07, Horodyski Marek (PZUZ) <M.Horodyski@pzuzycie.com.pl> wrote:

> Lorenzo - can you prapare a small web example, where is used http server
> (iss, apache or another), like Giancarlo many years ago.
> Eploye you in your aplication session (after login/password) ?
> How you get variable etc.

Sorry I'm not sure I understood do you mean import/reproduce sth like
xHarbour's /test/tiptest/*.prg?

best regards,
Lorenzo
From myorg63 at mail.ru  Wed Oct 31 10:53:46 2007
From: myorg63 at mail.ru (Petr Chornyj)
Date: Wed Oct 31 10:53:51 2007
Subject: =?UTF-8?Q?Re:_[Harbour]_=C2=BFC=C3=B3mo_se_usa_BM?=
	=?UTF-8?Q?DBFCDX=3F_/_How_to_use_BMDBFCDX=3F?=
In-Reply-To: <47283FDB.5000706@marchuet.net>
References: <4727F8E4.4070203@ec-red.com> <47283FDB.5000706@marchuet.net>
Message-ID: <13506538.post@talk.nabble.com>


It is not Linux. Win32 + Harbour + Mingw compiler.

Just need to check version of  Harbour 

2007-09-25 03:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbset.h
  * harbour/source/rtl/set.c
    * changed recently added hb_set*() functions to hb_setGet*()
      Please do not use these functions yet - it's possible that
      they will be removed soon.
    + added hb_setGetL(), hb_setGetCPtr(), hb_setGetNI(), hb_setGetNL()

BMDBFCDX from xHarbour CVS and Harbour SVN is different ?

-- 
View this message in context: http://www.nabble.com/%C2%BFC%C3%B3mo-se-usa-BMDBFCDX----How-to-use-BMDBFCDX--tf4722685.html#a13506538
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dbtopas at dbtopas.lt  Wed Oct 31 12:59:50 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 31 12:59:08 2007
Subject: [Harbour] 2007-10-29
	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <47283EC6.1030604@marchuet.net>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>
	<47283EC6.1030604@marchuet.net>
Message-ID: <47287C46.8030109@dbtopas.lt>

Miguel Angel Marchuet wrote:
>> What behavior you expect for HB_P_JUMPTRUE and HB_P_JUMPFALSE
>> if stack top item is ".F. && .Null. item"?
> 
> In this case no change is necessary, because the pushed item is a 
> logical item.
> .Null. only changes the status of item logical. For this reason and 
> using the same
> behavior of VFP a logical item .Null. is always .F., HB_P_JUMPTRUE never 
> arrive.

I do not understand what you mean by saying "HB_P_JUMPTRUE never 
arrive". PCODE is generated during compilation and it can contain 
HB_P_JUMPTRUE, so it can "arrive".

But I assume, the main idea of your answer is "no change is necessary", 
i.e. HB_P_JUMPTRUE and HB_P_JUMPFALSE should works the same for .F. and 
for values containing NULL flag.

OK! This is the answer I've expected.

And now the second question. What result of the following code do you 
expect ("X" or "Y")?

PROC main()
LOCAL nullvalue
    // assign ".F. && .Null. item" to local variable
    nullvalue := "aaa" == .NULL.

    IF ! nullvalue
       ? "X"
    ELSE
       ? "Y"
    ENDIF
RETURN



Best regards,
Mindaugas
From M.Horodyski at pzuzycie.com.pl  Wed Oct 31 13:49:23 2007
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Wed Oct 31 13:49:28 2007
Subject: [Harbour] RE: Harbour Digest, Vol 12, Issue 100
Message-ID: <503AD832DBBF60469E9F807668A2F6A202956E8C@PINK.zycie.pzu>

 
>Message: 7
>Date: Wed, 31 Oct 2007 10:20:23 +0100
>From: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
>Subject: Re: [Harbour] RE: Harbour Digest, Vol 12, Issue 96
>To: "Harbour Project Main Developer List."
>	<harbour@harbour-project.org>
>Message-ID:
>	<9257026e0710310220l4ac4024dk9e3d62494a8e47ef@mail.gmail.com>
>Content-Type: text/plain; charset=ISO-8859-1
>
>On 10/31/07, Horodyski Marek (PZUZ) 
><M.Horodyski@pzuzycie.com.pl> wrote:
>
>> Lorenzo - can you prapare a small web example, where is used 
>http server
>> (iss, apache or another), like Giancarlo many years ago.
>> Eploye you in your aplication session (after login/password) ?
>> How you get variable etc.
>
>Sorry I'm not sure I understood do you mean import/reproduce sth like
>xHarbour's /test/tiptest/*.prg?
>

Yes. Small example in prg with doc instruction to start : "how can man
work after internet server side via http".
Can we so work with Harbour (xHarbour has MT, Harbour not) ?

Regards,
Marek Horodyski
From gvarona at ec-red.com  Wed Oct 31 14:58:55 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Wed Oct 31 15:00:28 2007
Subject: [Harbour] =?ISO-8859-1?Q?=BFC=F3mo_se_usa_BMDBFCDX=3F_?=
	=?ISO-8859-1?Q?/_How_to_use_BMDBFCDX=3F?=
In-Reply-To: <47283FDB.5000706@marchuet.net>
References: <4727F8E4.4070203@ec-red.com> <47283FDB.5000706@marchuet.net>
Message-ID: <4728982F.1060604@ec-red.com>

Miguel Angel Marchuet escribi?:

> In last CVS hb_setGetL are not used.

[SPA] Hola Miguel Angel, estoy usando el ultimo SVN:
[ENG] Hello Miguel Angel, I am using the last SVN

/*
 * $Id: ChangeLog 7890 2007-10-31 00:37:31Z tfonrouge $
 */

/* Use this format for the entry headers:
   YYYY-MM-DD HH:MM UTC[-|+]hhmm Your Full Name <your_email@address>
   For example:
   2002-12-01 13:30 UTC+0100 Foo Bar <foo.bar@foobar.org>
*/

2007-10-30 18:37 UTC-0600 Teo Fonrouge (teo/at/windtelsoft/dot/com)
  * contrib/tip/sendmail.prg
    * cleanup to compile with a std harbour build, removed the
      "include "hbcompat.ch"", and added the #translate for LIKE found 
in the
      hbcompat.ch file, to keep it easy and clean when comparing from/to the
      xHarbour version.

>
> I don't use linux, and i can't test it. but try to download the last CVS

Enviro:
WinXP SP2 + MinGW + Harbour
Modo Consola.
No estoy usando para nada la funcion: hb_setGetL
S?lo he agregado:

REQUEST BMDBFCDX
RddSetDefault( "BMDBFCDX" )

Gracias de antemano.

Salu2,
GVS
From mpaliwoda at interia.pl  Wed Oct 31 15:43:44 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Oct 31 15:44:22 2007
Subject: [Harbour]
	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <47287C46.8030109@dbtopas.lt>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>	<47283EC6.1030604@marchuet.net>
	<47287C46.8030109@dbtopas.lt>
Message-ID: <4728A2B0.2090304@interia.pl>

Hi Mindaugas,

> And now the second question. What result of the following code do you 
> expect ("X" or "Y")?
> 
> PROC main()
> LOCAL nullvalue
>    // assign ".F. && .Null. item" to local variable
>    nullvalue := "aaa" == .NULL.
> 
>    IF ! nullvalue
>       ? "X"
>    ELSE
>       ? "Y"
>    ENDIF
> RETURN

For sure it should be "X".

"aaa" == .NULL. evaluates to .F.
.T. == .NULL. evaluates to .F.
.F. == .NULL. evaluates to .F.
.....................................
.NULL. == .NULL. evaluates to .T.
    better, it should be
.NULL. .IS. .NULL. evaluates to .T.

I am curious why you are asking.

-- 

Marek
From mpaliwoda at interia.pl  Wed Oct 31 16:08:33 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Oct 31 16:08:41 2007
Subject: [Harbour] 2007-10-29 17:57 UTC+0100
	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20071030124335.GA12788@localhost.localdomain>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>
	<20071030124335.GA12788@localhost.localdomain>
Message-ID: <4728A881.2090806@interia.pl>

Hi Przemek,

> F.e. what should be done by code like:
> 
>     x := iif( <nulValue>, <v1>, <v2> )

RUNTIME error

> then what should be done by code:
>     if <nulValue>
>         x := <v1>
>     else
>         x := <v2>
>     endif

RUNTIME error

> and then what should be done by:
>     while .t.
>        if <nulValue>
>           exit
>        endif
>     enddo

RUNTIME error

> when you will analyze it then please look at this example:
> 
>     while .t.
>        if !<nulValue>
>           loop
>        endif
>        exit
>     enddo

RUNTIME error

-- 

Marek
From dbtopas at dbtopas.lt  Wed Oct 31 16:54:37 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 31 16:53:51 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728A2B0.2090304@interia.pl>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>
	<4728A2B0.2090304@interia.pl>
Message-ID: <4728B34D.9000308@dbtopas.lt>

Marek Paliwoda wrote:
>> And now the second question. What result of the following code do you 
>> expect ("X" or "Y")?
>>
>> PROC main()
>> LOCAL nullvalue
>>    // assign ".F. && .Null. item" to local variable
>>    nullvalue := "aaa" == .NULL.
>>
>>    IF ! nullvalue
>>       ? "X"
>>    ELSE
>>       ? "Y"
>>    ENDIF
>> RETURN
> 
> For sure it should be "X".

Hello,


The problem is, that it will not be "X". See, PCODE.


> "aaa" == .NULL. evaluates to .F.
> .T. == .NULL. evaluates to .F.
> .F. == .NULL. evaluates to .F.
> .....................................
> .NULL. == .NULL. evaluates to .T.
>    better, it should be
> .NULL. .IS. .NULL. evaluates to .T.


>> F.e. what should be done by code like:
>>     x := iif( <nulValue>, <v1>, <v2> )
> 
> RUNTIME error
> 
>> then what should be done by code:
>>     if <nulValue>
>>         x := <v1>
>>     else
>>         x := <v2>
>>     endif
> 
> RUNTIME error 


I think you are missing one thing. NULL is not a value, NULL is flag for 
any value. So, "aaa" == .NULL. is not a .F., it is a .F. value with NULL 
flag.

We can try to implement NULL as value also, but here we have another 
problem. Try to index a database on:
    FIELD1 + STR(FIELD2) + IF(FIELD3, "Y", "N")
All fields may contain NULL values.


> I am curious why you are asking.

Because, I want to explain a problem of NULL implementation for Miguel.


Best regards,
Mindaugas
From miguelangel at marchuet.net  Wed Oct 31 16:49:13 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Oct 31 16:56:50 2007
Subject: [Harbour]
	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <47287C46.8030109@dbtopas.lt>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>	<47283EC6.1030604@marchuet.net>
	<47287C46.8030109@dbtopas.lt>
Message-ID: <4728B209.4020204@marchuet.net>


> And now the second question. What result of the following code do you 
> expect ("X" or "Y")?
> 
> PROC main()
> LOCAL nullvalue
>    // assign ".F. && .Null. item" to local variable
>    nullvalue := "aaa" == .NULL.
> 
>    IF ! nullvalue
>       ? "X"
>    ELSE
>       ? "Y"
>    ENDIF
> RETURN

ValType( nullvalue ) // results "L"
IsNull( nullvalue )  // results .T.

then ! nullvalue     // results .F.

and

nulvalue != nullvalue // results .F.
nulvalue == nullvalue // results .F.
nulvalue              // results .F.
! nulvalue            // results .F.


All logical expresions (evaluated) return .F.


BUT


.T. .OR. nulvalue != nullvalue   // will return .T. because we are using optimizaci?n and nulvalue != nullvalue is never evaluated.


This is the way that works VFP, and too is the way that I hope of this type of expressions


ValType( DateNullValue ) // results "D"
ValType( LogicalNullValue ) // results "L"
IsNull( DateNullValue )     // results .T.
IsNull( LogicalNullValue )  // results .T.

DateNullValue != LogicalNullValue

This produces a runtime error, because two operands are of not comparable valtypes.


Best regards
Miguel Angel Marchuet
From druzus at acn.waw.pl  Wed Oct 31 17:14:22 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 31 17:14:29 2007
Subject: [Harbour]
	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728A2B0.2090304@interia.pl>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>
	<4726EBD6.2050809@marchuet.net>
	<20071030124335.GA12788@localhost.localdomain>
	<472760A2.9090400@marchuet.net>
	<20071030173543.GA18346@localhost.localdomain>
	<001a01c81b27$770cc820$d801a8c0@ingachka>
	<4727E470.1060506@dbtopas.lt> <47283EC6.1030604@marchuet.net>
	<47287C46.8030109@dbtopas.lt> <4728A2B0.2090304@interia.pl>
Message-ID: <20071031171422.GA29467@localhost.localdomain>

On Wed, 31 Oct 2007, Marek Paliwoda wrote:
> >And now the second question. What result of the following code do you 
> >expect ("X" or "Y")?
> >PROC main()
> >LOCAL nullvalue
> >   // assign ".F. && .Null. item" to local variable
> >   nullvalue := "aaa" == .NULL.
> >
> >   IF ! nullvalue
> >      ? "X"
> >   ELSE
> >      ? "Y"
> >   ENDIF
> >RETURN
> For sure it should be "X".
> "aaa" == .NULL. evaluates to .F.
> .T. == .NULL. evaluates to .F.
> .F. == .NULL. evaluates to .F.
> .....................................
> .NULL. == .NULL. evaluates to .T.
>    better, it should be
> .NULL. .IS. .NULL. evaluates to .T.
> I am curious why you are asking.

If you have access to some RDBMS please make small test.
Create table with NULL able filed, f.e. AGE add three
records with NULL value 20 and 30 inside and then make
test for the following queries:

    SELECT * WHERE AGE < 25
    SELECT * WHERE NOT AGE < 25
    SELECT * WHERE AGE > 25
    SELECT * WHERE NOT AGE > 25

Please think which records you expect from each of them
and compare it with real results.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Oct 31 17:22:09 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Oct 31 17:22:15 2007
Subject: [Harbour] RE: Harbour Digest, Vol 12, Issue 100
In-Reply-To: <503AD832DBBF60469E9F807668A2F6A202956E8C@PINK.zycie.pzu>
References: <503AD832DBBF60469E9F807668A2F6A202956E8C@PINK.zycie.pzu>
Message-ID: <9257026e0710311022q18ec9fadka9ff5f3c8e7414e3@mail.gmail.com>

On 10/31/07, Horodyski Marek (PZUZ) <M.Horodyski@pzuzycie.com.pl> wrote:

> Yes. Small example in prg with doc instruction to start : "how can man
> work after internet server side via http".
> Can we so work with Harbour (xHarbour has MT, Harbour not) ?

I can give you some examples about tip/ftp and tip/cgi but I'm not a
good "documenter" :)

best regards,
Lorenzo
From miguelangel at marchuet.net  Wed Oct 31 17:20:19 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Oct 31 17:27:48 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728B34D.9000308@dbtopas.lt>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>	<4728A2B0.2090304@interia.pl>
	<4728B34D.9000308@dbtopas.lt>
Message-ID: <4728B953.6020904@marchuet.net>

Mindaugas Kavaliauskas escribi?:
> Marek Paliwoda wrote:
>>> And now the second question. What result of the following code do you 
>>> expect ("X" or "Y")?
>>>
>>> PROC main()
>>> LOCAL nullvalue
>>>    // assign ".F. && .Null. item" to local variable
>>>    nullvalue := "aaa" == .NULL.
>>>
>>>    IF ! nullvalue
>>>       ? "X"
>>>    ELSE
>>>       ? "Y"
>>>    ENDIF
>>> RETURN
>>

the correct syntax are :

PROC main()
LOCAL nullvalue
     // assign ".F. && .Null. item" to local variable
     nullvalue := "aaa"
     nullvalue := .NULL. // it clears buffer of nullvalue and changes its status to .NULL.
                         // but can be able another way to assign .NULL. flag, for example SetNull( variable )

     IF ! nullvalue
        ? "X"
     ELSE
        ? "Y"
     ENDIF
RETURN


>> For sure it should be "X".
> 
> Hello,
> 
> 
> The problem is, that it will not be "X". See, PCODE.
> 
> 
>> "aaa" == .NULL. evaluates to .F.
>> .T. == .NULL. evaluates to .F.
>> .F. == .NULL. evaluates to .F.
>> .NULL. == .NULL. evaluates to .T.
>>    better, it should be
>> .NULL. .IS. .NULL. evaluates to .T.

This are not valid expressions, .NULL. is not a variable
#xcommand <v1> := .NULL. [, <vn> := .NULL. ] => ;
           SetNull( <v1> ) ;
           [; SetNull( <vn> ) ]

and SetNull returns always Nil or runtime error

Best regards,
Miguel Angel Marchuet
From mpaliwoda at interia.pl  Wed Oct 31 17:37:54 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Oct 31 17:38:00 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20071031171422.GA29467@localhost.localdomain>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>
	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>
	<4728A2B0.2090304@interia.pl>
	<20071031171422.GA29467@localhost.localdomain>
Message-ID: <4728BD72.3080809@interia.pl>

Hi Przemek,

>>> And now the second question. What result of the following code do you 
>>> expect ("X" or "Y")?
>>> PROC main()
>>> LOCAL nullvalue
>>>   // assign ".F. && .Null. item" to local variable
>>>   nullvalue := "aaa" == .NULL.
>>>
>>>   IF ! nullvalue
>>>      ? "X"
>>>   ELSE
>>>      ? "Y"
>>>   ENDIF
>>> RETURN
>> For sure it should be "X".
>> "aaa" == .NULL. evaluates to .F.
>> .T. == .NULL. evaluates to .F.
>> .F. == .NULL. evaluates to .F.
>> .....................................
>> .NULL. == .NULL. evaluates to .T.
>>    better, it should be
>> .NULL. .IS. .NULL. evaluates to .T.
>> I am curious why you are asking.
> 
> If you have access to some RDBMS please make small test.
> Create table with NULL able filed, f.e. AGE add three
> records with NULL value 20 and 30 inside and then make
> test for the following queries:
> 
>     SELECT * WHERE AGE < 25
>     SELECT * WHERE NOT AGE < 25
>     SELECT * WHERE AGE > 25
>     SELECT * WHERE NOT AGE > 25
> 
> Please think which records you expect from each of them
> and compare it with real results.

SQL Server 2005
CREATE TABLE [dbo].[AATest](
	[ID] [int] NOT NULL,
	[AGE] [int] NULL
) ON [PRIMARY]
GO
INSERT INTO AATest (ID,AGE) VALUES (1,null)
GO
INSERT INTO AATest (ID,AGE) VALUES (1,20)
GO
INSERT INTO AATest (ID,AGE) VALUES (1,30)
GO

SELECT * FROM AATest WHERE AGE < 25
GO
    returned ONE row with value 20
    exactly as I expected

SELECT * FROM AATest WHERE NOT AGE < 25
GO
    returned ONE row with value 30
    exactly as I expected


SELECT * FROM AATest WHERE AGE > 25
GO
    returned ONE row with value 30
    exactly as I expected


SELECT * FROM AATest WHERE NOT AGE > 25
GO
    returned ONE row with value 20
    exactly as I expected

-- 

Marek
From mpaliwoda at interia.pl  Wed Oct 31 17:46:18 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Oct 31 17:46:24 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728B34D.9000308@dbtopas.lt>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>	<4728A2B0.2090304@interia.pl>
	<4728B34D.9000308@dbtopas.lt>
Message-ID: <4728BF6A.4070307@interia.pl>

Hi Mindaugas,

>>> And now the second question. What result of the following code do you 
>>> expect ("X" or "Y")?
>>>
>>> PROC main()
>>> LOCAL nullvalue
>>>    // assign ".F. && .Null. item" to local variable
>>>    nullvalue := "aaa" == .NULL.
>>>
>>>    IF ! nullvalue
>>>       ? "X"
>>>    ELSE
>>>       ? "Y"
>>>    ENDIF
>>> RETURN
>>
>> For sure it should be "X".
> 
> Hello,
> 
> 
> The problem is, that it will not be "X". See, PCODE.

I am not talking about what will it be.
I am talking about _what should it be_.

>> "aaa" == .NULL. evaluates to .F.
>> .T. == .NULL. evaluates to .F.
>> .F. == .NULL. evaluates to .F.
>> .....................................
>> .NULL. == .NULL. evaluates to .T.
>>    better, it should be
>> .NULL. .IS. .NULL. evaluates to .T.
> 
> 
>>> F.e. what should be done by code like:
>>>     x := iif( <nulValue>, <v1>, <v2> )
>>
>> RUNTIME error
>>
>>> then what should be done by code:
>>>     if <nulValue>
>>>         x := <v1>
>>>     else
>>>         x := <v2>
>>>     endif
>>
>> RUNTIME error 
> 
> 
> I think you are missing one thing. NULL is not a value, NULL is flag for 
> any value. So, "aaa" == .NULL. is not a .F., it is a .F. value with NULL 
> flag.

No. It seems you are missing _this simple fact_ that *NULL means no value*,
And it is not a flag :). A flag is simply a technical representation of
*no value*. Please concentrate on this simple fact :).

And compare the behavior I am talking about with other languages.
You'll quickly learn your mistake and "give me credits" ;-).

Here is a C# equivalent program

         private void TestNull() {
             bool a = ( "aaa" == null );
             if( !a ) {
                 Console.WriteLine( "True" );
             }
             else {
                 Console.WriteLine( "False" );
             }
         }

> We can try to implement NULL as value also, but here we have another 
> problem. Try to index a database on:
>    FIELD1 + STR(FIELD2) + IF(FIELD3, "Y", "N")
> All fields may contain NULL values.

Technical representation is not important.
Null *means* _no value_. This also implies
that Null has *no type*. So constructs like

if NULL
ENDIF

are wrong

because NULL is *not logical value*, and RUNTIME
error should be raised. Compare it to C# for example.

>> I am curious why you are asking.
> 
> Because, I want to explain a problem of NULL implementation for Miguel.

:)

-- 

Marek
From dbtopas at dbtopas.lt  Wed Oct 31 17:53:02 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 31 17:52:17 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728B209.4020204@marchuet.net>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>
	<4728B209.4020204@marchuet.net>
Message-ID: <4728C0FE.6050609@dbtopas.lt>

>> And now the second question. What result of the following code do you 
>> expect ("X" or "Y")?
>>
>> PROC main()
>> LOCAL nullvalue
>>    // assign ".F. && .Null. item" to local variable
>>    nullvalue := "aaa" == .NULL.
>>
>>    IF ! nullvalue
>>       ? "X"
>>    ELSE
>>       ? "Y"
>>    ENDIF
>> RETURN
> 
> ValType( nullvalue ) // results "L"
> IsNull( nullvalue )  // results .T.
> 
> then ! nullvalue     // results .F.
> 
> and
> 
> nulvalue != nullvalue // results .F.
> nulvalue == nullvalue // results .F.
> nulvalue              // results .F.
> ! nulvalue            // results .F.
> 
> 
> All logical expresions (evaluated) return .F.
> 
> 
> BUT
> 
> 
> .T. .OR. nulvalue != nullvalue   // will return .T. because we are using 
> optimizaci?n and nulvalue != nullvalue is never evaluated.
> 
> 
> This is the way that works VFP, and too is the way that I hope of this 
> type of expressions
> 
> 
> ValType( DateNullValue ) // results "D"
> ValType( LogicalNullValue ) // results "L"
> IsNull( DateNullValue )     // results .T.
> IsNull( LogicalNullValue )  // results .T.
> 
> DateNullValue != LogicalNullValue
> 
> This produces a runtime error, because two operands are of not 
> comparable valtypes.

Thanks. This is good description how vfp handles null. But you haven't 
answered the main question:

What result of the following code do you expect ("X" or "Y")?

PROC main()
LOCAL nullvalue
    // assign ".F. && .Null. item" to local variable
    nullvalue := "aaa" == .NULL.
    IF ! nullvalue
       ? "X"
    ELSE
       ? "Y"
    ENDIF
RETURN


Best regards,
Mindaugas
From miguelangel at marchuet.net  Wed Oct 31 17:48:04 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Oct 31 17:55:33 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20071031171422.GA29467@localhost.localdomain>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>
	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>
	<4728A2B0.2090304@interia.pl>
	<20071031171422.GA29467@localhost.localdomain>
Message-ID: <4728BFD4.6080400@marchuet.net>

> 
> If you have access to some RDBMS please make small test.
> Create table with NULL able filed, f.e. AGE add three
> records with NULL value 20 and 30 inside and then make
> test for the following queries:
> 
>     SELECT * WHERE AGE < 25
>     SELECT * WHERE NOT AGE < 25
>     SELECT * WHERE AGE > 25
>     SELECT * WHERE NOT AGE > 25
> 
> Please think which records you expect from each of them
> and compare it with real results.


I test your examples with MySql and the results are as I expected, all correct.

registers with NULL value never apears, more later I test too with SQL Server 2000

for example:

consulta SQL: SELECT *
FROM TEST
WHERE NOT AGE <25
LIMIT 0 , 30

results 1 register:
ind	age
2  	30

What are you expecting ?


Best regards,
Miguel Angel Marchuet
From mpaliwoda at interia.pl  Wed Oct 31 18:00:38 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Oct 31 18:00:58 2007
Subject: [Harbour]
	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728A2B0.2090304@interia.pl>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>	<47283EC6.1030604@marchuet.net>
	<47287C46.8030109@dbtopas.lt> <4728A2B0.2090304@interia.pl>
Message-ID: <4728C2C6.5080201@interia.pl>

Marek Paliwoda pisze:

> "aaa" == .NULL. evaluates to .F.
> .T. == .NULL. evaluates to .F.
> .F. == .NULL. evaluates to .F.
> .....................................
> .NULL. == .NULL. evaluates to .T.
>    better, it should be
> .NULL. .IS. .NULL. evaluates to .T.
> 
> I am curious why you are asking.

After rethinking I think *all* of
the above should be

"aaa" .IS. .NULL. evaluates to .F.
.T. .IS. .NULL. evaluates to .F.
.F. .IS. .NULL. evaluates to .F.
.NULL. .IS. .NULL. evaluates to .T.

and operator "==" should give RUNTIME error.

-- 

Marek
From mpaliwoda at interia.pl  Wed Oct 31 18:19:30 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Oct 31 18:19:42 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728B953.6020904@marchuet.net>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>	<4728A2B0.2090304@interia.pl>	<4728B34D.9000308@dbtopas.lt>
	<4728B953.6020904@marchuet.net>
Message-ID: <4728C732.6020703@interia.pl>

Hi Miguel,

>>> "aaa" == .NULL. evaluates to .F.
>>> .T. == .NULL. evaluates to .F.
>>> .F. == .NULL. evaluates to .F.
>>> .NULL. == .NULL. evaluates to .T.
>>>    better, it should be
>>> .NULL. .IS. .NULL. evaluates to .T.
> 
> This are not valid expressions, .NULL. is not a variable
> #xcommand <v1> := .NULL. [, <vn> := .NULL. ] => ;
>           SetNull( <v1> ) ;
>           [; SetNull( <vn> ) ]
> 
> and SetNull returns always Nil or runtime error

Yes, you are right. That's why I modified this
example to  :

"aaa" .IS. .NULL. evaluates to .F.
.T. .IS. .NULL. evaluates to .F.
.F. .IS. .NULL. evaluates to .F.
.NULL. .IS. .NULL. evaluates to .T.

-- 

Marek
From dbtopas at dbtopas.lt  Wed Oct 31 18:26:32 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 31 18:25:58 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728BF6A.4070307@interia.pl>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>	<4728A2B0.2090304@interia.pl>	<4728B34D.9000308@dbtopas.lt>
	<4728BF6A.4070307@interia.pl>
Message-ID: <4728C8D8.6090405@dbtopas.lt>

> I am not talking about what will it be.
> I am talking about _what should it be_.

And I'm talking about the way to implement it. It's not possible to it 
if we use jump optimization. Do you have any ideas how to implement it?


> No. It seems you are missing _this simple fact_ that *NULL means no value*,
> And it is not a flag :). A flag is simply a technical representation of
> *no value*. Please concentrate on this simple fact :).
> 
> And compare the behavior I am talking about with other languages.
> You'll quickly learn your mistake and "give me credits" ;-).

:-)

In this case, we can not use "+" in index expression any more, and can 
not do any other operations on fields containing NULL values (except 
IsNull(FIELD)).


Best regards,
Mindaugas
From druzus at acn.waw.pl  Wed Oct 31 18:31:35 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 31 18:31:42 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728BD72.3080809@interia.pl>
References: <20071030124335.GA12788@localhost.localdomain>
	<472760A2.9090400@marchuet.net>
	<20071030173543.GA18346@localhost.localdomain>
	<001a01c81b27$770cc820$d801a8c0@ingachka>
	<4727E470.1060506@dbtopas.lt> <47283EC6.1030604@marchuet.net>
	<47287C46.8030109@dbtopas.lt> <4728A2B0.2090304@interia.pl>
	<20071031171422.GA29467@localhost.localdomain>
	<4728BD72.3080809@interia.pl>
Message-ID: <20071031183134.GA29593@localhost.localdomain>

On Wed, 31 Oct 2007, Marek Paliwoda wrote:
> >>>PROC main()
> >>>LOCAL nullvalue
> >>>  // assign ".F. && .Null. item" to local variable
> >>>  nullvalue := "aaa" == .NULL.
> >>>  IF ! nullvalue
> >>>     ? "X"
> >>>  ELSE
> >>>     ? "Y"
> >>>  ENDIF
> >>>RETURN
> >>For sure it should be "X".
> >>"aaa" == .NULL. evaluates to .F.
> >>.T. == .NULL. evaluates to .F.
> >>.F. == .NULL. evaluates to .F.
> >>.....................................
> >>.NULL. == .NULL. evaluates to .T.
> >>   better, it should be
> >>.NULL. .IS. .NULL. evaluates to .T.
> >>I am curious why you are asking.
> >
> >If you have access to some RDBMS please make small test.
> >Create table with NULL able filed, f.e. AGE add three
> >records with NULL value 20 and 30 inside and then make
> >test for the following queries:
> >
> >    SELECT * WHERE AGE < 25
> >    SELECT * WHERE NOT AGE < 25
> >    SELECT * WHERE AGE > 25
> >    SELECT * WHERE NOT AGE > 25
> >
> >Please think which records you expect from each of them
> >and compare it with real results.
> 
> SQL Server 2005
> CREATE TABLE [dbo].[AATest](
> 	[ID] [int] NOT NULL,
> 	[AGE] [int] NULL
> ) ON [PRIMARY]
> GO
> INSERT INTO AATest (ID,AGE) VALUES (1,null)
> GO
> INSERT INTO AATest (ID,AGE) VALUES (1,20)
> GO
> INSERT INTO AATest (ID,AGE) VALUES (1,30)
> GO
> 
> SELECT * FROM AATest WHERE AGE < 25
> GO
>    returned ONE row with value 20
>    exactly as I expected
> 
> SELECT * FROM AATest WHERE NOT AGE < 25
> GO
>    returned ONE row with value 30
>    exactly as I expected
> 
> 
> SELECT * FROM AATest WHERE AGE > 25
> GO
>    returned ONE row with value 30
>    exactly as I expected
> 
> 
> SELECT * FROM AATest WHERE NOT AGE > 25
> GO
>    returned ONE row with value 20
>    exactly as I expected

Very good. In each case only one record and the record with NULL value
is never accpeted. We should have the same in our code for SET FILTER TO
command:

    SET FILTER TO  AGE < 25
    SET FILTER TO  ! AGE < 25
    SET FILTER TO  AGE > 25
    SET FILTER TO  ! AGE > 25

isn't it?

It means that for record with NULL value in AGE we have:
    NUMERIC with NULL < 25
what gives .F. with NULL (no RT errors because item types
are correct AGE is NUMERIC value and can be compared with 25) so:
    AGE < 25
has to evaluate to .F. with NULL flag and also
    ! ( AGE < 25 )
has to evaluate to .F. with NULL flag .NULL.
Because ( AGE < 25 ) is .F. with NULL then we will have to
define that:
    ! ( .F. with NULL )
gives .F. with NULL or we will accept the record with NULL value in age.
Is it clear so far?
If yes then please look at the beginning of this message:
    For sure it should be "X"
    ^^^^^^^^^^^^^^^^^^^^^^^^^
I hope that now you can see that *for sure it should be "Y"* ;-).
It doesn't matter how many time we will use .NOT. operator in the
expression containg NULL flag, f.e.:
    SET FILTER TO  !( !( !( !( AGE > 25 ) ) ) )
should give the same results as:
    SET FILTER TO  AGE > 25
and in both cases record with NULL in AGE should be excluded.
In such ways works most of RDBMS.
If it's clear then now please rethink again what you wrote about
expected results from few statements I sent and I'll show you that
it's not possible to implement such behavior without disabling in
compiler some optimizations like:
    - logical expression reduction
    - lazy logical expression evaluation
    - conditional jump optimization
    - jump joining
If sth is not clear or you do not agree with some of the above examples
then please ask about them.

best regards,
Przemek
From dbtopas at dbtopas.lt  Wed Oct 31 18:42:50 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 31 18:42:05 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728C2C6.5080201@interia.pl>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>
	<4728A2B0.2090304@interia.pl> <4728C2C6.5080201@interia.pl>
Message-ID: <4728CCAA.7050104@dbtopas.lt>

Marek Paliwoda wrote:
  > After rethinking I think *all* of
> the above should be
> 
> "aaa" .IS. .NULL. evaluates to .F.
> .T. .IS. .NULL. evaluates to .F.
> .F. .IS. .NULL. evaluates to .F.
> .NULL. .IS. .NULL. evaluates to .T.
> 
> and operator "==" should give RUNTIME error.

If == is not legal operation for NULL operands, then
   SELECT * FROM test WHERE AGE = 25
will be also not legal query and it will give RTE. But I hope we want to 
support such expressions.


Best regards,
Mindaugas
From mpaliwoda at interia.pl  Wed Oct 31 18:58:31 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Oct 31 18:58:35 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20071031171422.GA29467@localhost.localdomain>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>
	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>
	<4728A2B0.2090304@interia.pl>
	<20071031171422.GA29467@localhost.localdomain>
Message-ID: <4728D057.7020200@interia.pl>

Hi Przemek,

 > Very good. In each case only one record and the record with NULL value
 > is never accpeted. We should have the same in our code for SET FILTER TO
 > command:
 >
 >     SET FILTER TO  AGE < 25
 >     SET FILTER TO  ! AGE < 25
 >     SET FILTER TO  AGE > 25
 >     SET FILTER TO  ! AGE > 25
 >
 > isn't it?
 >
 > It means that for record with NULL value in AGE we have:
 >     NUMERIC with NULL < 25
 > what gives .F. with NULL (no RT errors because item types
 > are correct AGE is NUMERIC value and can be compared with 25) so:
 >     AGE < 25
 > has to evaluate to .F. with NULL flag and also
 >     ! ( AGE < 25 )
 > has to evaluate to .F. with NULL flag .NULL.
 > Because ( AGE < 25 ) is .F. with NULL then we will have to
 > define that:
 >     ! ( .F. with NULL )
 > gives .F. with NULL or we will accept the record with NULL value in age.
 > Is it clear so far?

Yes :) But all you try to explain here can be much simply explained :)

Assume that RDBMS simply *ignores* records with NULL values in fields
used in WHERE clause, unless test "if NULL" is *explicitly* placed in
a WHERE clause for a particular field. In such a behavior there is
*no need* to define

    ( null < 25 ) => .F.
     and
    !( null < 25 ) => .F.

This can be observed in the following example :

SELECT SUM(AGE) FROM AATest

What would you expect from the above SELECT using "your logic" ? :)

 > If yes then please look at the beginning of this message:
 >     For sure it should be "X"
 >     ^^^^^^^^^^^^^^^^^^^^^^^^^
 > I hope that now you can see that *for sure it should be "Y"* ;-).

No :) It should raise RUNTIME error, unless new operator .IS.
is used.

-- 

Marek
From druzus at acn.waw.pl  Wed Oct 31 19:01:18 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 31 19:01:24 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728C8D8.6090405@dbtopas.lt>
References: <472760A2.9090400@marchuet.net>
	<20071030173543.GA18346@localhost.localdomain>
	<001a01c81b27$770cc820$d801a8c0@ingachka>
	<4727E470.1060506@dbtopas.lt> <47283EC6.1030604@marchuet.net>
	<47287C46.8030109@dbtopas.lt> <4728A2B0.2090304@interia.pl>
	<4728B34D.9000308@dbtopas.lt> <4728BF6A.4070307@interia.pl>
	<4728C8D8.6090405@dbtopas.lt>
Message-ID: <20071031190118.GA29950@localhost.localdomain>

On Wed, 31 Oct 2007, Mindaugas Kavaliauskas wrote:
> >No. It seems you are missing _this simple fact_ that *NULL means no value*,
> >And it is not a flag :). A flag is simply a technical representation of
> >*no value*. Please concentrate on this simple fact :).

Marek try to compare in your RDBMS NUMERIC NULL value with 123.
What are the results?
Then compare NUMERIC NULL value with 'ABC'
What are the results?
Do you still think that NULL is not a flag?
So how your RDBMS can recognize that you may have NUMERIC NULL values
which can be compared with other numbers but cannot be compared with
strings. NULL is a flag which does not overwrite base item type.

> >And compare the behavior I am talking about with other languages.
> >You'll quickly learn your mistake and "give me credits" ;-).
> :-)
> In this case, we can not use "+" in index expression any more, and can 

like in filter expressions and many others. If we lost information
about base item/field type then such discussion does not have any
sense - we already have NIL and we do not need NIL2.0 called NULL ;-)

> not do any other operations on fields containing NULL values (except 
> IsNull(FIELD)).

What is also some solution. Instead of adding support for NULL values
to HVM we can only create function: FILEDNULL(<cFldName>) or we can
even define add support for IsNull() as pseudo function in compiler
so IsNull(MYFIELD) will work like IsNull("MYFIELD") and define that
NULL can be checked only for fields in tables and out VM does not
support such functionality.

best regards,
Przemek
From mpaliwoda at interia.pl  Wed Oct 31 19:03:55 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Oct 31 19:04:03 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728CCAA.7050104@dbtopas.lt>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>	<4728A2B0.2090304@interia.pl>
	<4728C2C6.5080201@interia.pl> <4728CCAA.7050104@dbtopas.lt>
Message-ID: <4728D19B.2000506@interia.pl>

Hi Mindaugas,

>  > After rethinking I think *all* of
>> the above should be
>>
>> "aaa" .IS. .NULL. evaluates to .F.
>> .T. .IS. .NULL. evaluates to .F.
>> .F. .IS. .NULL. evaluates to .F.
>> .NULL. .IS. .NULL. evaluates to .T.
>>
>> and operator "==" should give RUNTIME error.
> 
> If == is not legal operation for NULL operands, then
>   SELECT * FROM test WHERE AGE = 25
> will be also not legal query and it will give RTE. But I hope we want to 
> support such expressions.

No, see my answer to Przemek. You can think that RDBMS
"ignores" records with NULLed fields used in WHERE clause,
unless those fields are explicitly tested for NULL.

BTW, the behavior of "RDBMS" and the behavior of "language"
is *NOT THE SAME*. Once again I suggest you to check the
behavior of C# or even VFP and a behavior of any available
RDBMS.

-- 

Marek
From dbtopas at dbtopas.lt  Wed Oct 31 19:31:15 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 31 19:30:38 2007
Subject: [Harbour] Old SVN story
Message-ID: <4728D803.6000103@dbtopas.lt>

Hi,


I guess move to SVN was successful and I can delete 127MB file:
shell.sourceforge.net:/home/groups/h/ha/harbour-project/svndumpfull.bz2
?


Best regards,
Mindaugas
From dbtopas at dbtopas.lt  Wed Oct 31 19:48:47 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 31 19:48:07 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728D19B.2000506@interia.pl>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>	<4728A2B0.2090304@interia.pl>	<4728C2C6.5080201@interia.pl>
	<4728CCAA.7050104@dbtopas.lt> <4728D19B.2000506@interia.pl>
Message-ID: <4728DC1F.9010003@dbtopas.lt>

Marek Paliwoda wrote:
>> If == is not legal operation for NULL operands, then
>>   SELECT * FROM test WHERE AGE = 25
>> will be also not legal query and it will give RTE. But I hope we want 
>> to support such expressions.
> 
> No, see my answer to Przemek. You can think that RDBMS
> "ignores" records with NULLed fields used in WHERE clause,
> unless those fields are explicitly tested for NULL.

I do not think RDBMS should ignore record with NULLed field, because:

1) It should ignore NULLed records in all expressions, also for:
    SELECT * FROM test WHERE AGE IS NULL

2) Operations on NULL can be performed. You can test it in a direct way:
    SELECT NULL + 4;
    SELECT NULL < 5;
    SELECT (NULL + 6) > 0;
These are very interesting (!):
    SELECT NULL;
    SELECT NOT NULL;
    SELECT NULL=NULL;
    SELECT NOT (NULL=NULL);
    SELECT IF(NULL=NULL, 0, 1);
    SELECT IF(NOT (NULL=NULL), 0, 1);

3) You can put expressions in WHERE cause also, so let's make some 
"convolution" :)
    SELECT * FROM test WHERE IF(AGE=NULL, 0, 1) > 0;

Do you still think that records containing NULLed field are ignored?


Best regards,
Mindaugas
From mpaliwoda at interia.pl  Wed Oct 31 20:00:51 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Oct 31 20:00:56 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728CCAA.7050104@dbtopas.lt>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>	<4728A2B0.2090304@interia.pl>
	<4728C2C6.5080201@interia.pl> <4728CCAA.7050104@dbtopas.lt>
Message-ID: <4728DEF3.1010008@interia.pl>

Mindaugas,

 > I do not think RDBMS should ignore record with NULLed field, because:
 >
 > 1) It should ignore NULLed records in all expressions, also for:
 >     SELECT * FROM test WHERE AGE IS NULL

You did not read my message to Przemek carefully :). Here it is again :
   "Assume that RDBMS simply *ignores* records with NULL values in fields
    used in WHERE clause, unless test "if NULL" is *explicitly* placed in
    a WHERE clause for a particular field. "

In your example there is an *explicit* test for NULL.

 > 2) Operations on NULL can be performed. You can test it in a direct way:
 >     SELECT NULL + 4;
 >     SELECT NULL < 5;
 >     SELECT (NULL + 6) > 0;
 > These are very interesting (!):
 >     SELECT NULL;
 >     SELECT NOT NULL;
 >     SELECT NULL=NULL;
 >     SELECT NOT (NULL=NULL);
 >     SELECT IF(NULL=NULL, 0, 1);
 >     SELECT IF(NOT (NULL=NULL), 0, 1);

These examples don't aply. They select NULL, nothing more. The problem
lies in NULL in WHERE clause, not in SELECT list clause.

 > 3) You can put expressions in WHERE cause also, so let's make some
 > "convolution" :)
 >     SELECT * FROM test WHERE IF(AGE=NULL, 0, 1) > 0;

Which RDBMS ? I cannot run such a SELECT in SQL Server 2005.
And I would be supprised there is any RDBMS which supports
direct "AGE=NULL" instead of "AGE IS NULL"

 > Do you still think that records containing NULLed field are ignored?

Yes :) Sort of ...

-- 

Marek
From miguelangel at marchuet.net  Wed Oct 31 20:09:03 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Oct 31 20:09:09 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt><47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt><4728A2B0.2090304@interia.pl><20071031171422.GA29467@localhost.localdomain>
	<4728D057.7020200@interia.pl>
Message-ID: <00af01c81bf9$e3154dd0$d801a8c0@ingachka>

>
> Yes :) But all you try to explain here can be much simply explained :)
>
> Assume that RDBMS simply *ignores* records with NULL values in fields
> used in WHERE clause, unless test "if NULL" is *explicitly* placed in
> a WHERE clause for a particular field. In such a behavior there is
> *no need* to define
>
>     ( null < 25 ) => .F.
>      and
>     !( null < 25 ) => .F.
>
> This can be observed in the following example :
>
> SELECT SUM(AGE) FROM AATest
>
> What would you expect from the above SELECT using "your logic" ? :)
>
>  > If yes then please look at the beginning of this message:
>  >     For sure it should be "X"
>  >     ^^^^^^^^^^^^^^^^^^^^^^^^^
>  > I hope that now you can see that *for sure it should be "Y"* ;-).
>
> No :) It should raise RUNTIME error, unless new operator .IS.
> is used.

Is not necesary runtime error, you can operate a normal with item NULL, his
real value
will be initalized, for example:

LOCAL cVar := "CCC"

SetNull( cVar )

? cVar // results ""  empty because when a NULL flag is asigned, the
variable will be initialiced.

As the same way you can operate + to chain char items

CharItemNull + CharItem => CharItem
CharIteml + CharItemNull => CharItem
CharItemlNull + CharItemNull => CharItemNull

the same for Numeric and Dates and Logical.

only is nedded to change AVERAGE because NULL values will not be used in its
operations

The optimizacions will not be disable, because programer can use this
optimizations for example:

IF .T. .OR. LogicalItemNull
    // Optimizations are used to execute this code. (it's programer
decision)
ENDIF

in this case

>>> And now the second question. What result of the following code do you
>>> expect ("X" or "Y")?
>>> PROC main()
>>> LOCAL nullvalue
>>>   // assign ".F. && .Null. item" to local variable
>>>   nullvalue := "aaa" == .NULL.
>>>
>>>   IF ! nullvalue
>>>      ? "X"
>>>   ELSE
>>>      ? "Y"
>>>   ENDIF
>>> RETURN

ALWAYS "Y"    because ! NullValue => .F. in all cases


Best regards
Miguel Angel Marchuet

From mpaliwoda at interia.pl  Wed Oct 31 20:21:16 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Oct 31 20:21:25 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728BFD4.6080400@marchuet.net>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>	<4728A2B0.2090304@interia.pl>	<20071031171422.GA29467@localhost.localdomain>
	<4728BFD4.6080400@marchuet.net>
Message-ID: <4728E3BC.30400@interia.pl>

Miguel Angel Marchuet wrote :

 > CharItemNull + CharItem => CharItem
 > CharIteml + CharItemNull => CharItem
 > CharItemlNull + CharItemNull => CharItemNull
 >
 > the same for Numeric and Dates and Logical.

???

Please try the following in SQL Server 2005 :

SELECT 'a' + NULL
GO
SELECT NULL + 'a'
GO
SELECT NULL + NULL
GO

-- 

Marek
From druzus at acn.waw.pl  Wed Oct 31 20:32:25 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 31 20:32:32 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728D057.7020200@interia.pl>
References: <20071030124335.GA12788@localhost.localdomain>
	<472760A2.9090400@marchuet.net>
	<20071030173543.GA18346@localhost.localdomain>
	<001a01c81b27$770cc820$d801a8c0@ingachka>
	<4727E470.1060506@dbtopas.lt> <47283EC6.1030604@marchuet.net>
	<47287C46.8030109@dbtopas.lt> <4728A2B0.2090304@interia.pl>
	<20071031171422.GA29467@localhost.localdomain>
	<4728D057.7020200@interia.pl>
Message-ID: <20071031203225.GA30512@localhost.localdomain>

On Wed, 31 Oct 2007, Marek Paliwoda wrote:
> > It means that for record with NULL value in AGE we have:
> >     NUMERIC with NULL < 25
> > what gives .F. with NULL (no RT errors because item types
> > are correct AGE is NUMERIC value and can be compared with 25) so:
> >     AGE < 25
> > has to evaluate to .F. with NULL flag and also
> >     ! ( AGE < 25 )
> > has to evaluate to .F. with NULL flag .NULL.
> > Because ( AGE < 25 ) is .F. with NULL then we will have to
> > define that:
> >     ! ( .F. with NULL )
> > gives .F. with NULL or we will accept the record with NULL value in age.
> > Is it clear so far?
> 
> Yes :) But all you try to explain here can be much simply explained :)
> 
> Assume that RDBMS simply *ignores* records with NULL values in fields
> used in WHERE clause, unless test "if NULL" is *explicitly* placed in
> a WHERE clause for a particular field.

But they doesn't. F.e. try in you table:

    select * where AGE < 25 OR ID = 1

> In such a behavior there is
> *no need* to define
>    ( null < 25 ) => .F.
>     and
>    !( null < 25 ) => .F.
> This can be observed in the following example :
> SELECT SUM(AGE) FROM AATest
> 
> What would you expect from the above SELECT using "your logic" ? :)

1. it's not my logic but sth what your RDBMS does and I hope you will
   see it.
2. This is trivial example which RDBMS can optimizae using information
   from column types but unintentionally you created also an example
   which can be used to clearly show that in more complicated situation
   it's not possible to make such tricks so you can foget about taking
   information from column type or field value. It's enough to put inside
   SUM() user defined function, f.e.:
      SELECT SUM( MYFUNC( NAME, AGE, ID, SOLLARY ) )
   But why SUM() it's still to trivial let's use AVG()
      SELECT AVG( MYFUNC( NAME, AGE, ID, SOLLARY ) )

   What RDBMS have to do?
   It will have to evaluate MYFUNC for _all_ records even if some or all
   fields passed to MYFUNC() are  NULL and sum not null results and number
   of such results to calculate average value, generate error if some of the
   results are not NUMERIC null value (of course it it supports such
   functionality) and finally display average value by dividing the sum by
   number of not NULL results returned by MYFUNC().
   What the above means?
   That it has to work like our VM evaluating given user expressions.

> > If yes then please look at the beginning of this message:
> >     For sure it should be "X"
> >     ^^^^^^^^^^^^^^^^^^^^^^^^^
> > I hope that now you can see that *for sure it should be "Y"* ;-).
> No :) It should raise RUNTIME error, unless new operator .IS.
> is used.

Marek, please make some deeper tests how your RDBMS works and you will
be surprised with the results. F.e. below you will find Postgress results
of some very simple queries. You can try them in your RDBMS.
Make more complicated examples. You will find that NULL is an attribute
of some empty/undefined/default (it doesn't matter how you will call it
from mathematical point of view) which changes the resuls of operation
on given type and because RDBMS can also use some more complicated
expressions and even UDFs then they also need some internal logic to
operate on values with NULL flag because in some cases the operations
are done not on columns but on results of some other operations. Which
may be or nor NULL.

best regards,
Przemek



CREATE TABLE t ( id NUMERIC, name TEXT, age NUMERIC );
INSERT INTO t ( id, name, age ) VALUES ( 1, 'BILL', 20 );
INSERT INTO t ( id, name, age ) VALUES ( 2, 'JOHN', 30 )
INSERT INTO t ( id, age ) VALUES ( 3, 35 );
INSERT INTO t ( id, name ) VALUES ( 4, 'SAM' );

druzus=# select * from t;
 id | name | age
----+------+-----
  1 | BILL |  20
  2 | JOHN |  30
  3 |      |  35
  4 | SAM  |
  5 |      |
(5 rows)

druzus=# select * from person where name = age;
 id | name | age
----+------+-----
(0 rows)

druzus=# select * from person where ( name = age ) = TRUE;
 id | name | age
----+------+-----
(0 rows)

druzus=# select * from person where ( name = age ) = FALSE;
 id | name | age
----+------+-----
  4 | BOB  |  20
  5 | BILL |  30
(2 rows)

druzus=# select * from person where ( name = age ) IS NULL;
 id | name | age
----+------+-----
  6 | JOHN |
  7 |      |
(2 rows)

druzus=# select * from t where age <= 30 or id != 0;
 id | name | age
----+------+-----
  1 | BILL |  20
  2 | JOHN |  30
  3 |      |  35
  4 | SAM  |
  5 |      |
(5 rows)

druzus=# select * from t where age <= 30 and id != 0;
 id | name | age
----+------+-----
  1 | BILL |  20
  2 | JOHN |  30
(2 rows)

druzus=# select * from t where ( age <= 30 and id != 0 ) is null;
 id | name | age
----+------+-----
  4 | SAM  |
  5 |      |
(2 rows)

druzus=# select * from t where not ( age <= 30 and id != 0 ) is null;
 id | name | age
----+------+-----
  1 | BILL |  20
  2 | JOHN |  30
  3 |      |  35
(3 rows)

druzus=# select * from t where ( age <= 30 or id != 0 ) is null;
 id | name | age
----+------+-----
(0 rows)

druzus=# select sum(age) from t;
 sum
-----
  85
(1 row)

druzus=# select sum( case when age isnull then 100 else age end ) from t;
 sum
-----
 285
(1 row)

druzus=# select avg(age) from t;
         avg
---------------------
 28.3333333333333333
(1 row)

druzus=# select avg( case when age isnull then 100 else age end ) from t;
         avg
---------------------
 57.0000000000000000
(1 row)
From mpaliwoda at interia.pl  Wed Oct 31 20:33:25 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Oct 31 20:33:33 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20071031190118.GA29950@localhost.localdomain>
References: <472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>
	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>
	<4728A2B0.2090304@interia.pl>	<4728B34D.9000308@dbtopas.lt>
	<4728BF6A.4070307@interia.pl>	<4728C8D8.6090405@dbtopas.lt>
	<20071031190118.GA29950@localhost.localdomain>
Message-ID: <4728E695.2020301@interia.pl>

Przemek,

> On Wed, 31 Oct 2007, Mindaugas Kavaliauskas wrote:
>>> No. It seems you are missing _this simple fact_ that *NULL means no value*,
>>> And it is not a flag :). A flag is simply a technical representation of
>>> *no value*. Please concentrate on this simple fact :).
> 
> Marek try to compare in your RDBMS NUMERIC NULL value with 123.
> What are the results?
> Then compare NUMERIC NULL value with 'ABC'
> What are the results?
> Do you still think that NULL is not a flag?

Yes.

It seems you do not get it. Please try the following in your RDBMS :

    SELECT * FROM AATest WHERE 'aa' = AGE

and now :

    SELECT * FROM AATest WHERE 'aa' = AGE AND AGE IS NULL


> So how your RDBMS can recognize that you may have NUMERIC NULL values
> which can be compared with other numbers but cannot be compared with
> strings. NULL is a flag which does not overwrite base item type.

See above.

-- 

Marek
From harbour.01 at syenar.hu  Wed Oct 31 20:49:16 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 31 20:50:18 2007
Subject: [Harbour] Old SVN story
In-Reply-To: <4728D803.6000103@dbtopas.lt>
References: <4728D803.6000103@dbtopas.lt>
Message-ID: <9DC6EEFF-BF3A-4C21-AE5C-5F3E6C678DA8@syenar.hu>

Hi Mindaugas,

Yes, thanks, we no longer need it.

Brgds,
Viktor

On 2007.10.31., at 20:31, Mindaugas Kavaliauskas wrote:

> Hi,
>
>
> I guess move to SVN was successful and I can delete 127MB file:
> shell.sourceforge.net:/home/groups/h/ha/harbour-project/ 
> svndumpfull.bz2
> ?
>
>
> Best regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mpaliwoda at interia.pl  Wed Oct 31 20:52:12 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Oct 31 20:52:55 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20071031190118.GA29950@localhost.localdomain>
References: <472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>
	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>
	<4728A2B0.2090304@interia.pl>	<4728B34D.9000308@dbtopas.lt>
	<4728BF6A.4070307@interia.pl>	<4728C8D8.6090405@dbtopas.lt>
	<20071031190118.GA29950@localhost.localdomain>
Message-ID: <4728EAFC.1060603@interia.pl>

Przemek,

 >> Assume that RDBMS simply *ignores* records with NULL values in fields
 >> used in WHERE clause, unless test "if NULL" is *explicitly* placed in
 >> a WHERE clause for a particular field.
 >
 > But they doesn't. F.e. try in you table:
 >    select * where AGE < 25 OR ID = 1

Ok, you convinced me :). But it still means nothing,
because NULL in languages behaves differently than
in RDBMS. It is enough to define for RDBMS that :

   NULL <logical_operator> <any_value>  => .F.
   !NULL <logical_operator> <any_value>  => .F.

But this *does not apply* to languages - at least to
those I know and which use NULL values (C#).

They raise RTE.

-- 

Marek
From dbtopas at dbtopas.lt  Wed Oct 31 21:13:44 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 31 21:12:58 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728DEF3.1010008@interia.pl>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>	<4728A2B0.2090304@interia.pl>	<4728C2C6.5080201@interia.pl>
	<4728CCAA.7050104@dbtopas.lt> <4728DEF3.1010008@interia.pl>
Message-ID: <4728F008.80108@dbtopas.lt>

Marek Paliwoda wrote:
  >  > 2) Operations on NULL can be performed. You can test it in a 
direct way:
>  >     SELECT NULL + 4;
>  >     SELECT NULL < 5;
>  >     SELECT (NULL + 6) > 0;
>  > These are very interesting (!):
>  >     SELECT NULL;
>  >     SELECT NOT NULL;
>  >     SELECT NULL=NULL;
>  >     SELECT NOT (NULL=NULL);
>  >     SELECT IF(NULL=NULL, 0, 1);
>  >     SELECT IF(NOT (NULL=NULL), 0, 1);
> 
> These examples don't aply. They select NULL, nothing more. The problem
> lies in NULL in WHERE clause, not in SELECT list clause.

Not all of them select NULL. The last two expressions contains IF 
branching and gives result 1.

I see no reason to implement different expression evaluator for
   SELECT <expression>
and for:
   SELECT ... WHERE <expression>
So, every expression is evaluated in both cases and there is no magic 
"ignore record" in SQL servers.

>  >     SELECT * FROM test WHERE IF(AGE=NULL, 0, 1) > 0;
> 
> Which RDBMS ? I cannot run such a SELECT in SQL Server 2005.

MySQL. All records are listed (as expected). Records containing AGE is 
not ignored.


> And I would be supprised there is any RDBMS which supports
> direct "AGE=NULL" instead of "AGE IS NULL"

What do you mean "supports AGE=NULL"? (Perhaps) Every RDBMS supports 
AGE=NULL, and every gives the same result: NULL.
AGE=NULL has a different meaning than AGE IS NULL in MySQL also.
AGE = NULL always returns NULL. AGE IS NULL returns TRUE or FALSE.

>> Do you still think that records containing NULLed field are ignored?
> 
> Yes :) Sort of ...

It's only a question of time :)


I think you do not see a way of NULL implementation in SQL.
In SQL expression returns NULL if any of the operands is NULL, so:
   NULL + 5   => NULL
   NULL < 25  => NULL
   NOT NULL   => NULL
   NOT (NULL < 25) => NULL
etc.
IF conditional statement executes ELSE cause if tested value is NULL.

No more "magic record ignorance".


Best regards,
Mindaugas

From mpaliwoda at interia.pl  Wed Oct 31 21:16:12 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Oct 31 21:16:17 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20071031190118.GA29950@localhost.localdomain>
References: <472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>
	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>
	<4728A2B0.2090304@interia.pl>	<4728B34D.9000308@dbtopas.lt>
	<4728BF6A.4070307@interia.pl>	<4728C8D8.6090405@dbtopas.lt>
	<20071031190118.GA29950@localhost.localdomain>
Message-ID: <4728F09C.8050106@interia.pl>

Przemek,

 > CREATE TABLE t ( id NUMERIC, name TEXT, age NUMERIC );
...

Sorry. None of your SELECTs (except the first one)
is running correctly. They give SQL RTE.

So SQL Server DOES NOT support syntax used by Postgres.

-- 

Marek
From dbtopas at dbtopas.lt  Wed Oct 31 21:31:32 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Oct 31 21:30:46 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <00af01c81bf9$e3154dd0$d801a8c0@ingachka>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt><47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt><4728A2B0.2090304@interia.pl><20071031171422.GA29467@localhost.localdomain>	<4728D057.7020200@interia.pl>
	<00af01c81bf9$e3154dd0$d801a8c0@ingachka>
Message-ID: <4728F434.7040103@dbtopas.lt>

Miguel Angel Marchuet wrote:
>> No :) It should raise RUNTIME error, unless new operator .IS.
>> is used.
> 
> Is not necesary runtime error, you can operate a normal with item NULL

Agree.

> CharItemNull + CharItem => CharItem
> CharIteml + CharItemNull => CharItem
> CharItemlNull + CharItemNull => CharItemNull

Do not agree. You can test such expression using SELECT statements.


 > Miguel, I'll try to explain the problem in a different way. What
 > behavior you expect for HB_P_JUMPTRUE and HB_P_JUMPFALSE if stack
 > top item is ".F. && .Null. item"?

In this case no change is necessary, because the pushed item is a 
logical item.
(I assume, the main idea of your answer is "no change is necessary", 
i.e. HB_P_JUMPTRUE and HB_P_JUMPFALSE should works the same for .F. and 
for values containing NULL flag.)

>>>>   // assign ".F. && .Null. item" to local variable
>>>>   nullvalue := "aaa" == .NULL.
>>>>
>>>>   IF ! nullvalue
>>>>      ? "X"
>>>>   ELSE
>>>>      ? "Y"
>>>>   ENDIF
> 
> ALWAYS "Y"    because ! NullValue => .F. in all cases

So, let's look to PCODE of:
    IF ! nullvalue
       ? "X"
    ELSE
       ? "Y"
    ENDIF


//  push nullvalue
HB_P_PUSHLOCALNEAR, 1,	

// nullvalue contains .F. and null flag
// no change is necessary and JUMPTRUE does not jump because
// null value is .F.
HB_P_JUMPTRUENEAR, 16,	// jump to 00030
HB_P_LINE, 5, 0,

// so "X" is printed
HB_P_PUSHFUNCSYM, 2, 0,	/* QOUT */
HB_P_PUSHSTRSHORT, 2,'X', 0,
HB_P_DOSHORT, 1,
HB_P_JUMPNEAR, 14,	// jump to 00042
/* 00030 */ HB_P_LINE, 7, 0,
HB_P_PUSHFUNCSYM, 2, 0,	/* QOUT */
HB_P_PUSHSTRSHORT, 2, 'Y', 0,
HB_P_DOSHORT, 1,
/* 0042 */


Best regards,
Mindaugas
From mpaliwoda at interia.pl  Wed Oct 31 22:03:46 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Oct 31 22:03:53 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728CCAA.7050104@dbtopas.lt>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>	<4728A2B0.2090304@interia.pl>
	<4728C2C6.5080201@interia.pl> <4728CCAA.7050104@dbtopas.lt>
Message-ID: <4728FBC2.1030907@interia.pl>

Mindaugas,

 > These examples don't aply. They select NULL, nothing more. The problem
 > > lies in NULL in WHERE clause, not in SELECT list clause.
 >
 > Not all of them select NULL. The last two expressions contains IF
 > branching and gives result 1.

I did not examine each of them carefully.

 > I see no reason to implement different expression evaluator for
 >    SELECT <expression>
 > and for:
 >    SELECT ... WHERE <expression>
 > So, every expression is evaluated in both cases and there is no magic
 > "ignore record" in SQL servers.

Ok, Przemek convinced me about this.

 > >  >     SELECT * FROM test WHERE IF(AGE=NULL, 0, 1) > 0;
 > >
 > > Which RDBMS ? I cannot run such a SELECT in SQL Server 2005.
 >
 > MySQL. All records are listed (as expected). Records containing AGE is
 > not ignored.

Sorry, it does not work in MSSQL.

 > > And I would be supprised there is any RDBMS which supports
 > > direct "AGE=NULL" instead of "AGE IS NULL"
 >
 > What do you mean "supports AGE=NULL"? (Perhaps) Every RDBMS supports
 > AGE=NULL, and every gives the same result: NULL.
 > AGE=NULL has a different meaning than AGE IS NULL in MySQL also.
 > AGE = NULL always returns NULL. AGE IS NULL returns TRUE or FALSE.

OK, you got me here. I forgot about it.

 > >> Do you still think that records containing NULLed field are ignored?
 > >
 > > Yes :) Sort of ...
 >
 > It's only a question of time :)
 >
 >
 > I think you do not see a way of NULL implementation in SQL.
 > In SQL expression returns NULL if any of the operands is NULL, so:
 >    NULL + 5   => NULL
 >    NULL < 25  => NULL
 >    NOT NULL   => NULL
 >    NOT (NULL < 25) => NULL
 > etc.

This is not true for "AND" and "OR" operators. See the table
for AND for example :

p AND q
	                    p
          q      |    True 	False 	Unknown
         --------|    -----------------------------
  	True 	|    True 	False 	Unknown
         False 	|    False 	False 	False
         Unknown |    Unknown    False 	Unknown
	
It SOMETIMES return value due to optimisation effects.

 > IF conditional statement executes ELSE cause if tested value is NULL.

In MySQL ? Then MSSQL does not support it.

 > No more "magic record ignorance".

Acusitions ? Ok. I agreed I described it wrongly. But you still
did not write any word about the fact that RDBMS uses *different*
rules of handling NULL values then languages.

-- 

Marek
From mpaliwoda at interia.pl  Wed Oct 31 22:13:12 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Oct 31 22:13:18 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728F434.7040103@dbtopas.lt>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt><47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt><4728A2B0.2090304@interia.pl><20071031171422.GA29467@localhost.localdomain>	<4728D057.7020200@interia.pl>	<00af01c81bf9$e3154dd0$d801a8c0@ingachka>
	<4728F434.7040103@dbtopas.lt>
Message-ID: <4728FDF8.2070602@interia.pl>

Mindaugas,

 >> I think you do not see a way of NULL implementation in SQL.
...
 >> No more "magic record ignorance".
 >
 > Acusitions ? Ok. I agreed I described it wrongly. But you still
 > did not write any word about the fact that RDBMS uses *different*
 > rules of handling NULL values then languages.

And what about claiming that NULL is simply a "flag" ?

Did you try to run :
    SELECT * FROM AATest WHERE 'aa' = AGE
and
    SELECT * FROM AATest WHERE 'aa' = AGE AND AGE IS NULL

in MySql ?

-- 

Marek
From mpaliwoda at interia.pl  Wed Oct 31 22:17:34 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Wed Oct 31 22:17:45 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728F434.7040103@dbtopas.lt>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt><47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt><4728A2B0.2090304@interia.pl><20071031171422.GA29467@localhost.localdomain>	<4728D057.7020200@interia.pl>	<00af01c81bf9$e3154dd0$d801a8c0@ingachka>
	<4728F434.7040103@dbtopas.lt>
Message-ID: <4728FEFE.4030408@interia.pl>

Mindaugas,

I was to quick when I agreed with both you and Przemek.

See http://en.wikipedia.org/wiki/Null_(SQL)

"The WHERE clause causes the DML statement to act on only those rows for
  which the predicate evaluates to True. Rows for which the predicate
  evaluates to either False or Unknown are not acted on by INSERT, UPDATE,
  or DELETE DML statements, and are discarded by SELECT queries. "

Do you still say that

"I think you do not see a way of NULL implementation in SQL."
and
"No more "magic record ignorance".

-- 

Marek
From makis1970 at gmail.com  Wed Oct 31 22:27:33 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Wed Oct 31 22:27:36 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728F09C.8050106@interia.pl>
References: <472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>	<4728A2B0.2090304@interia.pl>	<4728B34D.9000308@dbtopas.lt>	<4728BF6A.4070307@interia.pl>	<4728C8D8.6090405@dbtopas.lt>	<20071031190118.GA29950@localhost.localdomain>
	<4728F09C.8050106@interia.pl>
Message-ID: <001701c81c0d$3d6b64a0$b8422de0$@com>

RDBMS and nulls is a problem without a solution (at least if you want to be
compatible with everyone) Even the latest standards does not have full
explanations for all the possibilities and from RDBMS to RDBMS vendor there
are different approaches. If you ask a Programmer you'll see that no one
wants nulls in the database schema, but the RDBMS designers prefer to use it
not because they really need it (most of the cases) but because such a way
they have a normalized schema. Even if I remember correctly an older version
of Crystal Reports had a configuration parameter about how to handle Nulls.
So the real question is if we want to support nulls, and if yes with what
RDBMS-ANSI support. Personally I don't need it but if someone make it I hope
that he will not break clipper code.

Regards
Mike Evans

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Marek Paliwoda
Sent: Wednesday, October 31, 2007 11:16 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] 2007-10-29 17:57 UTC+0100 Przemyslaw Czerpak
(druzus/at/priv.onet.pl)

Przemek,

 > CREATE TABLE t ( id NUMERIC, name TEXT, age NUMERIC );
...

Sorry. None of your SELECTs (except the first one)
is running correctly. They give SQL RTE.

So SQL Server DOES NOT support syntax used by Postgres.

-- 

Marek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From makis1970 at gmail.com  Wed Oct 31 22:43:21 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Wed Oct 31 22:43:22 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728FBC2.1030907@interia.pl>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>	<4726EBD6.2050809@marchuet.net>	<20071030124335.GA12788@localhost.localdomain>	<472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>	<4728A2B0.2090304@interia.pl>	<4728C2C6.5080201@interia.pl>
	<4728CCAA.7050104@dbtopas.lt> <4728FBC2.1030907@interia.pl>
Message-ID: <001b01c81c0f$7263f620$572be260$@com>

This are parts from Ads manual
---------------------------------

The Advantage SQL engine provides for traditional Xbase style handling of
DBF empty fields. The SQL engine does not treat empty fields in DBF tables
as standard SQL NULL values. DBF field types generally do not have a
representation for NULL values, thus the Advantage SQL engine treats empty
DBF fields in a manner consistent with most Xbase applications. For example,
suppose "test" is a DBF table and "N" is a DBF numeric field. If so, then
the queries "SELECT * FROM test WHERE N IS NULL" and "SELECT * FROM test
WHERE N = 0" will be equivalent. Also note that the query "SELECT N+1 FROM
test" will produce a result of "1" for each row where N is either 0 or
empty. This is consistent with most Xbase applications.

In contrast, ADT tables provide standard SQL NULL support. For example, NULL
and 0 in ADT integer fields have distinctly different internal
representations. For example, the WHERE clauses "integerfield = 0" and
"integerfield IS NULL" do not return the same rows. Also, a query of the
form "SELECT integerfield+1 FROM ..." will return "1" for rows where
integerfield has a value of 0 and NULL for rows where integerfield is NULL.
This is consistent with SQL handling of NULLs. Aside from the "IS [NOT]
NULL" clause and the IFNULL() and ISNULL() scalar functions, any expression
that contains a NULL value returns a NULL result.
....
The Advantage ADT file format allows the value of any field to be a NULL
value. The value of NULL indicates that the field data was never specified
or has been cleared. When a record is inserted or appended, all fields are
initialized to NULL values unless a different default field value is
specified in the Advantage Data Dictionary. Any field data type may contain
a NULL except for an ADS_AUTOINC field.
There are a few things to be aware of with indexes and NULL values. When an
index is built on a field, the records that contain NULL values will be
sorted first. If the index was built with the descending option or with the
DESCEND() expression engine function, then NULL field values will be sorted
last.  

Unless a filter specifically checks for NULL vales, a field that contains
NULL will be excluded. Compare field values to NULL in your filters if you
want them to include NULL values as in this example: "LastName < 'C' or
LastName = NULL".  
When the NULL data is read from a field, a non-NULL value will be returned.
For example, if a character field contains a NULL, a string of all spaces
will be returned when that field is read. All spaces will be trimmed from
the resulting string. Since the entire result was spaces, the trimmed result
will be an empty string. Numeric field types, such as Integer, Double, and
ShortInteger will return a 0 when read. When dealing directly with tables,
the function AdsIsEmpty can be called to determine if the field contains a
NULL value rather than the value returned. When using an SQL query, the
IFNULL or ISNULL scalar function can be called to determine if the field
contains a NULL value.

And this is from mimer SQl documentation (
----------------------------------------
NULL values require special handling in SQL queries. NULL represents an
unknown value, and strictly speaking NULL is never 
equal to NULL. (NULL values are however treated as equal for the purposes of
GROUP BY, DISTINCT and UNION).
....
For example, neither of the following conditions are true:
 <null>     IN (...,null,...)
 <null> NOT IN (...,null,...)
The first result is almost intuitive: since NULL is not equal to NULL, NULL
is not a member of a set containing NULL.
But if NULL is not a member of a set containing NULL, the second result is
intuitively true.
In fact, neither result is true or false: both are unknown. If NULL values
are involved on either side of the comparison, IN and NOT IN are not
complementary. Similar arguments apply to queries containing ALL or ANY
....
There are many real-life examples where the presence of NULL has resulted in
unforeseen and sometimes misleading data retrievals. It is advisable to
define all columns in the database tables as NOT NULL except those where
unknown values have a specific meaning. 

Regards
Mike EVans



From harbour.01 at syenar.hu  Wed Oct 31 22:54:04 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Wed Oct 31 22:54:14 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <001701c81c0d$3d6b64a0$b8422de0$@com>
References: <472760A2.9090400@marchuet.net>	<20071030173543.GA18346@localhost.localdomain>	<001a01c81b27$770cc820$d801a8c0@ingachka>	<4727E470.1060506@dbtopas.lt>	<47283EC6.1030604@marchuet.net>	<47287C46.8030109@dbtopas.lt>	<4728A2B0.2090304@interia.pl>	<4728B34D.9000308@dbtopas.lt>	<4728BF6A.4070307@interia.pl>	<4728C8D8.6090405@dbtopas.lt>	<20071031190118.GA29950@localhost.localdomain>
	<4728F09C.8050106@interia.pl> <001701c81c0d$3d6b64a0$b8422de0$@com>
Message-ID: <C28CEF20-F3AC-4493-BEA3-9437B85E8482@syenar.hu>

> RDBMS and nulls is a problem without a solution (at least if you  
> want to be
> compatible with everyone) Even the latest standards does not have full
> explanations for all the possibilities and from RDBMS to RDBMS  
> vendor there
> are different approaches. If you ask a Programmer you'll see that  
> no one
> wants nulls in the database schema, but the RDBMS designers prefer  
> to use it
> not because they really need it (most of the cases) but because  
> such a way
> they have a normalized schema. Even if I remember correctly an  
> older version
> of Crystal Reports had a configuration parameter about how to  
> handle Nulls.
> So the real question is if we want to support nulls, and if yes  
> with what
> RDBMS-ANSI support. Personally I don't need it but if someone make  
> it I hope
> that he will not break clipper code.

I agree with your points.

Here's some more confusion regarding NULL (MySQL specific):
http://sql-info.de/en/mysql/gotchas.html#1_1
(I've just found this page today by accident)

I prefer this solution written by Przemek today:

"... Instead of adding support for NULL values
to HVM we can only create function: FILEDNULL(<cFldName>) or we can
even define add support for IsNull() as pseudo function in compiler
so IsNull(MYFIELD) will work like IsNull("MYFIELD") and define that
NULL can be checked only for fields in tables and out VM does not
support such functionality."

This way, handling NULL is a fully private matter of the RDD,
and developers can access the RDD specific behaviour from app
code, that's where Harbour's task ends.

If we happen to opt for being VFP compatible (which is not a project
goal BTW) regarding NULL, we have to keep in mind that the runtime
NULL implementation will inevitably be inconsistent with "some"
SQL implementations. I'd also not be surprised if MS would have
choosen to replicate it's own (SQL) NULL handling approach when
adding NULL support to VFP, which is probably similar to MSSQL.

Another important point is not to penalize normal (NULL-less) code
by introducing NULL, neither by creating incompatibilities, nor by
making code run less efficiently.

And one other: One of Clipper's best strength is simplicity, with
NULL, simplicity is definitely gone. Plus we have NIL already, which
is not the same, but quite enough for writing apps.

Brgds,
Viktor


>
> Regards
> Mike Evans
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org
> [mailto:harbour-bounces@harbour-project.org] On Behalf Of Marek  
> Paliwoda
> Sent: Wednesday, October 31, 2007 11:16 PM
> To: Harbour Project Main Developer List.
> Subject: Re: [Harbour] 2007-10-29 17:57 UTC+0100 Przemyslaw Czerpak
> (druzus/at/priv.onet.pl)
>
> Przemek,
>
>> CREATE TABLE t ( id NUMERIC, name TEXT, age NUMERIC );
> ...
>
> Sorry. None of your SELECTs (except the first one)
> is running correctly. They give SQL RTE.
>
> So SQL Server DOES NOT support syntax used by Postgres.
>
> -- 
>
> Marek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Wed Oct 31 23:34:15 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 31 23:34:20 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <4728FEFE.4030408@interia.pl>
References: <200710291658.l9TGwGW8010278@31-mo5-4.acn.waw.pl>
	<4726EBD6.2050809@marchuet.net>
	<20071030124335.GA12788@localhost.localdomain>
	<472760A2.9090400@marchuet.net>
	<20071030173543.GA18346@localhost.localdomain>
	<001a01c81b27$770cc820$d801a8c0@ingachka>
	<4728D057.7020200@interia.pl>
	<00af01c81bf9$e3154dd0$d801a8c0@ingachka>
	<4728F434.7040103@dbtopas.lt> <4728FEFE.4030408@interia.pl>
Message-ID: <20071031233415.GA30843@localhost.localdomain>

On Wed, 31 Oct 2007, Marek Paliwoda wrote:
> Mindaugas,
> I was to quick when I agreed with both you and Przemek.
> See http://en.wikipedia.org/wiki/Null_(SQL)
> 
> "The WHERE clause causes the DML statement to act on only those rows for
>  which the predicate evaluates to True. Rows for which the predicate
>  evaluates to either False or Unknown are not acted on by INSERT, UPDATE,
>  or DELETE DML statements, and are discarded by SELECT queries. "
> Do you still say that
> "I think you do not see a way of NULL implementation in SQL."
> and
> "No more "magic record ignorance".

Yes of course - it perfectly confirms what I and Mindaugas said.
The above is a description that there is no "magic record ignorance"
as you were suggesting but only expression evaluation.
So please begin to think only about expression evaluation because
if we want to have NULL support we first should know what should
be the results from different operations on NULL values.
And here we are returning to 1-st question:
    ? IIF( <exp>, 'X', 'Y' )
What should be the result of this code.
Each RDBMS support sometype of conditional expression it could be:
    case when <exp1> then <exp2> else <exp3> end
like in Postgres or:
    IIF( <exp1>, <exp2>, <exp3> )
like in MySQL or something else. The exact syntax is unimportant.
I do not know how it looks in MSSQL.
For the example I sent in Postgres SQL we have:

druzus=# select case when age > 25 then 'X' else 'Y' end from t;
 case
------
 Y
 X
 X
 Y
 Y
(5 rows)

If MSSQL supports IIF() then try:
    select iif( age > 25, 'X', 'Y' )

You should have similar results. Mindaugas can I ask you about MySQL
results?

Then let's check:

druzus=# select case when not ( age > 25 ) then 'X' else 'Y' end from t;
 case
------
 X
 Y
 Y
 Y
 Y
(5 rows)

For MySQL it's:
    select iif( not ( age > 25 ), 'X', 'Y' )

As you can see NOT NULL is _evaluated_ (again "No more 'magic record
ignorance'" ;-)) to NULL and NULL can be used as conditional parameter
and it gives the same results as FALSE but it's not FALSE.
It's still NULL. Miguel said that !NULL gives FALSE in VFP so we have
problem here because for our compiler
    !(!<exp>)
is the same as:
    <exp>
so Harbour for:
    ? iif( !(!<exp>), "X", "Y" )
will show:
    "Y"
when <exp> is NULL but FVP will show:
    "X"
because !<exp> is .F. and !(.F.) is .T.
or he is wrong and from the beginning we cannot receive any valuable
information about arithmetic on NULL values in VFP. I was not interesting
in descriptions for VFP because as I can see they have even more bugs
then Clipper documentation. I'm interesting only in _EXACT_ results
from real VFP tests.
This is the first application for which I'd like to see results.

 LOCAL lVar1 := .T., lVar2, lVar3
 SetNull( lVar1 )
 lVar2 := !lVar1
 lVar3 := !lVar2
 ? IIF( lVar1, "X", "Y" )
 ? IIF( lVar2, "X", "Y" )
 ? IIF( lVar3, "X", "Y" )
 ? IIF( !(!(lVar1)), "X", "Y" )

Miguel, if possible please send exact results from this code.
If it cannot be compiled by VFP and you will have to change even .
then please send also modified code.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Oct 31 23:54:06 2007
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Oct 31 23:54:11 2007
Subject: [Harbour]	2007-10-29	17:57	UTC+0100	Przemyslaw	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <001b01c81c0f$7263f620$572be260$@com>
References: <20071030173543.GA18346@localhost.localdomain>
	<001a01c81b27$770cc820$d801a8c0@ingachka>
	<4727E470.1060506@dbtopas.lt> <47283EC6.1030604@marchuet.net>
	<47287C46.8030109@dbtopas.lt> <4728A2B0.2090304@interia.pl>
	<4728C2C6.5080201@interia.pl> <4728CCAA.7050104@dbtopas.lt>
	<4728FBC2.1030907@interia.pl> <001b01c81c0f$7263f620$572be260$@com>
Message-ID: <20071031235406.GB30843@localhost.localdomain>

On Thu, 01 Nov 2007, Mike Evans (Gmail) wrote:
> This are parts from Ads manual
> ---------------------------------
[...]
> And this is from mimer SQl documentation (
> ----------------------------------------
[...]

Mike, both descriptions are results of very simple design decisions
about NULL arithmetic. The main problem is that such descriptions are
very often imprecise and created by people who usually try to describe
their experiences but they do not have deeper knowledge about
implementation of VM used by given RDBMS and for people which for
sure will not have any ideas how RDBMS are created.
For me much more important are results of some simple tests. They
will tell me much more about internal implementation then very long
descriptions.
BTW In this case both text probably describe nearly the same and compatible
behavior with the exception to explicit comparison to NULL what is only one
of conditions in NULL arithmetic.

best regards,
Przemek
