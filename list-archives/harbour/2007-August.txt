From niki at synel.co.il  Wed Aug  1 01:54:08 2007
From: niki at synel.co.il (Chen Kedem)
Date: Wed Aug  1 01:52:36 2007
Subject: [Harbour] FOR EACH overloading
Message-ID: <46B02000.2D28@synel.co.il>

On Mon, 30 Jul 2007, Lost wrote:
> Slightly off topic: is there any online documentation facility for
> harbour? What I see in the official page seems a bit outdated, and
> definitely not extensible

Phil had made a wiki page available for testing on the Harbour site
( http://www.harbour-project.org/wiki/ ), but it was not in use
and I think it is now remove.

The actual docs can be found under doc/ and doc/en in the SVN
repository. These are text files with a few few markup codes for
some formating (see doc/hdr_tpl.txt) later the source docs can
be processed by a program like hbdoc to create various output
formats.

Note: the hbdoc program can be use some major rewriting.


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From niki at synel.co.il  Wed Aug  1 03:34:24 2007
From: niki at synel.co.il (Chen Kedem)
Date: Wed Aug  1 03:32:51 2007
Subject: [xHarbour-developers] [Harbour] Problem creating .adt files
Message-ID: <46B03780.34BC@synel.co.il>

Brian,

> I propose that I put a check into adsCreateFields() for the
>   case 'N':
> and determine if just the "N" was passed OR if the new full "Numeric"
> string was passed (or actually if any part beyond just the "N").
> If MORE than "N" is passed, use their "new" Numeric type.
> Otherwise if just "N" is passed, implement their old logic.

In CA-Clipper only the first letter is check, so user can (in theory)
define "Nxxxx", "Numeric" or "Nume'rico" and the result suppose to be
the same as "N".

The problem is only when the file is created?
Maybe you can add a new set/flag for the RDD that tell it to work
with the new behavior (which is supported only be the new version
of ADS) or the old behavior, with the default to the old one for
compatibility.

When using an existing table, the field type should be checked
and decoded according to its real type.

Does it make sense?


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From bhays at abacuslaw.com  Wed Aug  1 05:44:11 2007
From: bhays at abacuslaw.com (bhays)
Date: Wed Aug  1 05:42:14 2007
Subject: [xHarbour-developers] [Harbour] Problem creating .adt files
In-Reply-To: <46B03780.34BC@synel.co.il>
Message-ID: <05e001c7d420$83ee1a10$0301a8c0@bh>

Chen:

>>The problem is only when the file is created?

Yes. And you're right about the multi-character issue; my proposal is a hack
not worth supporting.

>>Maybe you can add a new set/flag for the RDD that tell it to work with the
new behavior (which is supported only be the new version of ADS) or the old
behavior, with the default to the old one for compatibility.

I think any default should be the current, more modern and documented
behaviour. As the years go by it becomes less and less justified to default
to old stuff. And we *are* talking about the proprietary format for ADS, so
we should provide current support.  It's a weird twist as to "what are we
trying to be compatible with".
The new behaviour is actually more Clipper compatible, and it won't make
sense to deny "Numeric" creating "Numeric" by default.

>>When using an existing table, the field type should be checked and decoded
according to its real type.

Fieldinfo returns the extended type.  With the new DLLs, the new Numeric is
represented by "N" with no extended type (but you don't get back the full
word "Numeric"--I should probably change this for ADT, but that can break
existing code).
With Old DLLs, a new file cannot be opened, and old files will all return
whatever they were converted to (you might pass in "N" to dbCreate, but you
get back "DOUBLE").

The problem boils down to this:
If you're committed to coding for ADTs only, you should always use the
specific types, and "N" will now represent that specific type.
If you want code to be compatible with other RDDs and stick to just "N" for
all numeric types, you have to recognize that you'll get different files
with different DLL versions.

We *could* provide some kind of setting for
"ConvertNumericFieldsToPre8.1Types", but
it's starting to seem like it's not worth the effort since anyone knowing
enough to set it can probably do a better fix to their code in the same
amount of time. Global settings are bad for such things. And coding the
setting per workarea is again probably as much hassle as just setting
specific types in the structure definition.

So at this point I'm tempted to just let it be, and post the info to educate
any ADT users.
But I'm still open to suggestions.

--
  Brian Hays


From bhays at abacuslaw.com  Wed Aug  1 05:47:32 2007
From: bhays at abacuslaw.com (bhays)
Date: Wed Aug  1 05:45:36 2007
Subject: [Harbour] ADS and field name mixed case
Message-ID: <05e401c7d420$fb4762b0$0301a8c0@bh>

Przemek:
 
ADT files can have "long" field names, including mixed case.
DBCreate currently changes all field names to upper somewhere along the
line.
 
Is there a switch somewhere controlling this specifically (and doesn't try
to switch anything else to being case-sensitive?)
 
Thanks,
 
--
  Brian Hays

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070801/81f306ec/attachment-0001.html
From druzus at priv.onet.pl  Wed Aug  1 08:25:09 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Aug  1 08:25:16 2007
Subject: [Harbour] ChangeLog 2007-08-01 14:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070801122509.GA8934@localhost.localdomain>

2007-08-01 14:25 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapifs.h
  * harbour/source/rtl/file.c
    + added xHarbour compatible C function hb_fsIsDirectory()

  * harbour/contrib/libct/color.c
  * harbour/contrib/libct/screen1.c
    + added UNTEXTWIN(), CHARWIN(), COLORWIN(), COLORREPL()
    * changed CLEARWIN(), INVERTWIN() to use common helper functions

best regards,
Przemek
From antonioharbour at gmail.com  Wed Aug  1 08:33:05 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Aug  1 08:33:15 2007
Subject: [Harbour] USE error ?
In-Reply-To: <46AFB856.9060306@drouillard.ca>
References: <1185920321.6462.34.camel@anto-desktop>
	<46AFB856.9060306@drouillard.ca>
Message-ID: <1185971585.6000.8.camel@anto-desktop>

Przemek,

> > REQUEST DBFCDX
> > ...
> > USE customer VIA "DBFCDX"
> > 
> > Alias() is empty here, there is no error and DBFCDX is properly linked
> > as a RDD 

How is it possible that the above does not generate an error and the
alias is empty ? Any hints ? thanks,

file( "customer.dbf" ) returns true

regards,

Antonio

From druzus at priv.onet.pl  Wed Aug  1 08:44:02 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Aug  1 08:44:08 2007
Subject: [Harbour] USE error ?
In-Reply-To: <1185971585.6000.8.camel@anto-desktop>
References: <1185920321.6462.34.camel@anto-desktop>
	<46AFB856.9060306@drouillard.ca>
	<1185971585.6000.8.camel@anto-desktop>
Message-ID: <20070801124402.GA9119@localhost.localdomain>

On Wed, 01 Aug 2007, Antonio Linares wrote:
> > > REQUEST DBFCDX
> > > ...
> > > USE customer VIA "DBFCDX"
> > > 
> > > Alias() is empty here, there is no error and DBFCDX is properly linked
> > > as a RDD 
> How is it possible that the above does not generate an error and the
> alias is empty ? Any hints ? thanks,
> file( "customer.dbf" ) returns true

Probably neterr() returns .t. or you are using your own error block
which causes such effect. It does not look as Harbour or xHarbour
problem.

If you do not know what happens then try to reduce the problem to small
(as small as possible) self contain example and then send it here. It has
to be _EXACTLY_ the same code which you tested (copy and past) - not
rewritten to avoid typos which may change results. Seeing such code I
can test it to verify the problem and answer. Without it I can only
guessing.
Practice shows that during creating such small example users usually
find the answer themselves :-)

best regards,
Przemek
From druzus at priv.onet.pl  Wed Aug  1 08:48:26 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Aug  1 08:48:31 2007
Subject: [xHarbour-developers] [Harbour] Problem creating .adt files
In-Reply-To: <05a401c7d3de$bbbee9c0$0301a8c0@bh>
References: <20070727110932.GD10606@localhost.localdomain>
	<05a401c7d3de$bbbee9c0$0301a8c0@bh>
Message-ID: <20070801124826.GB9119@localhost.localdomain>

On Tue, 31 Jul 2007, bhays wrote:
> Przemek:
> I got the code from the Extended System folks that did the undocumented
> conversion of
> Fields with type "N" to int or doubles.
> I propose that I put a check into adsCreateFields() for the
>    case 'N':
> and determine if just the "N" was passed OR if the new full "Numeric"
> string was passed (or actually if any part beyond just the "N").
> If MORE than "N" is passed, use their "new" Numeric type.
> Otherwise if just "N" is passed, implement their old logic.
> ...where we set the
>       pFieldInfo.uiType = HB_IT_LONG;
> also set
> 	pFieldInfo.uiTypeExtended
> to shortint, longint, double, etc. according to that logic.
> Does that sound good?

Yes sure - please do it.
After such modification existing [x]Harbour ADS code will work
with new ACE library in the same ways as with old one.
I'll try to create some propositions for extended types in dbCreate()
when I'll find some time for it. Sorry but I was finishing some other
jobs (and I still have others) so I was not able to make it so far.

best regards,
Przemek
From gerrylist at drouillard.ca  Wed Aug  1 08:49:56 2007
From: gerrylist at drouillard.ca (Gerald Drouillard)
Date: Wed Aug  1 08:50:17 2007
Subject: [Harbour] USE error ?
In-Reply-To: <1185971585.6000.8.camel@anto-desktop>
References: <1185920321.6462.34.camel@anto-desktop>	<46AFB856.9060306@drouillard.ca>
	<1185971585.6000.8.camel@anto-desktop>
Message-ID: <46B08174.8000809@drouillard.ca>

Antonio Linares wrote:
> Przemek,
> 
>>> REQUEST DBFCDX
>>> ...
>>> USE customer VIA "DBFCDX"
>>>
>>> Alias() is empty here, there is no error and DBFCDX is properly linked
>>> as a RDD 
> 
> How is it possible that the above does not generate an error and the
> alias is empty ? Any hints ? thanks,
> 
> file( "customer.dbf" ) returns true
Does the dbf have a memo field?  If so, is the filename case of the .fpt 
file the same as the .dbf filename?

-- 
Regards
--------------------------------------
Gerald Drouillard
Technology Architect
Drouillard & Associates, Inc.
http://www.Drouillard.ca
From fmancera at viaopen.com  Wed Aug  1 11:19:20 2007
From: fmancera at viaopen.com (ViaOpen - Fernando Mancera)
Date: Wed Aug  1 11:19:26 2007
Subject: [Harbour] SixDriver on Harbour
Message-ID: <mailman.0.1185981566.3664.harbour@harbour-project.org>

Przemek

I see on Harbour the hbsix.lib and hsx.lib.

Is implemented in Harbour all the functionality of SixDriver?

Regards,
 
Fernando Mancera
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070801/8a778809/attachment.html
From guy.roussin at teledetection.fr  Wed Aug  1 12:04:48 2007
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Wed Aug  1 12:04:52 2007
Subject: [Harbour] Howto get some information about the user in harbour
Message-ID: <46B0AF20.7000607@teledetection.fr>

Hello,

how can i get user homedir, user name, ... with harbour ?

Thank you,

Guy

From a.jurkiewicz at abix.info.pl  Wed Aug  1 12:11:32 2007
From: a.jurkiewicz at abix.info.pl (ABIX - Adam Jurkiewicz)
Date: Wed Aug  1 12:11:38 2007
Subject: [Harbour] Howto get some information about the user in harbour
In-Reply-To: <46B0AF20.7000607@teledetection.fr>
References: <46B0AF20.7000607@teledetection.fr>
Message-ID: <200708011811.33025.a.jurkiewicz@abix.info.pl>

Dnia ?roda, 1 sierpnia 2007 18:04, Guy Roussin napisa?:
> Hello,
>
> how can i get user homedir, user name, ... with harbour ?
>
> Thank you,
>
> Guy

getenv("LOGNAME") gives you username
getenv("HOME") gives you home directory

more you will see with "env" command 

Adam
-- 
ABIX - Linuksowe Systemy Wspomagania Biznesu
Wsparcie fiskalne  : http://www.abix.info.pl/wsparcie/
Skype : abix_adamj | Gadu-Gadu : 302315 | JabberID: adasiek@jabber.text.pl
Wsparcie aplikacji : http://groups-beta.google.com/group/abix-rcsoft?hl=pl
GnuPG Key => http://pgp.mit.edu:11371/pks/lookup?op=get&search=0xA810E4FB
From guy.roussin at teledetection.fr  Wed Aug  1 12:41:48 2007
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Wed Aug  1 12:41:52 2007
Subject: [Harbour] Howto get some information about the user in harbour
In-Reply-To: <200708011811.33025.a.jurkiewicz@abix.info.pl>
References: <46B0AF20.7000607@teledetection.fr>
	<200708011811.33025.a.jurkiewicz@abix.info.pl>
Message-ID: <46B0B7CC.6080902@teledetection.fr>

Thank you.

Guy

ABIX - Adam Jurkiewicz a ?crit :
> Dnia ?roda, 1 sierpnia 2007 18:04, Guy Roussin napisa?:
>> Hello,
>>
>> how can i get user homedir, user name, ... with harbour ?
>>
>> Thank you,
>>
>> Guy
> 
> getenv("LOGNAME") gives you username
> getenv("HOME") gives you home directory
> 
> more you will see with "env" command 
> 
> Adam
From ssbbs at mail.zzz.com.tw  Wed Aug  1 13:01:01 2007
From: ssbbs at mail.zzz.com.tw (網緹資訊•廖文勝(WenSheng))
Date: Wed Aug  1 13:01:23 2007
Subject: [Harbour] compile ware message.
In-Reply-To: <46AE2FF5.5020203@gmail.com>
References: <46ae1fae.1e8d420a.7f56.61d1@mx.google.com>
	<46AE2FF5.5020203@gmail.com>
Message-ID: <20070802005912.BDFF.SSBBS@mail.zzz.com.tw>

MinGW 4.1.1 compiler.
run make_gnu.bat and show:

=2E./../cpcskam.c:76:39: warning: "/*" within comment


does can fix it?

From antonioharbour at gmail.com  Wed Aug  1 13:01:23 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Aug  1 13:01:32 2007
Subject: [Harbour] runtime code execution
Message-ID: <1185987683.5799.2.camel@anto-desktop>

Przemek,

Is there any example that shows how to compile and run an external PRG
in runtime with the most recent changes that you implemented ? thanks,

regards,

Antonio

From antonioharbour at gmail.com  Wed Aug  1 13:46:17 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Aug  1 13:46:25 2007
Subject: [Harbour] USE error ?
In-Reply-To: <46AFB856.9060306@drouillard.ca>
References: <1185920321.6462.34.camel@anto-desktop>
	<46AFB856.9060306@drouillard.ca>
Message-ID: <1185990377.5799.5.camel@anto-desktop>

You will not believe me, but I rebooted Ubuntu and now it works fine :-)

mysteries of life...

regards,

Antonio

On Tue, 2007-07-31 at 18:31 -0400, Gerald Drouillard wrote:
> Antonio Linares wrote:
> > Przemek,
> > 
> > I am totally puzzled here. This code (in Linux):
> > 
> > REQUEST DBFCDX
> > ...
> > USE customer VIA "DBFCDX"
> > 
> > Alias() is empty here, there is no error and DBFCDX is properly linked
> > as a RDD 
> > 
> > With xHarbour Alias() is ok. Any hints ?
> > 
> neterr()
> file('customer.dbf')
> 
> The linux file system is case sensitive.
> SET(_SET_FILECASE  ,'MIXED')
> SET( _SET_DIRCASE,'MIXED')
> 
> 

From druzus at priv.onet.pl  Wed Aug  1 14:40:35 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Aug  1 14:40:42 2007
Subject: [Harbour] USE error ?
In-Reply-To: <1185990377.5799.5.camel@anto-desktop>
References: <1185920321.6462.34.camel@anto-desktop>
	<46AFB856.9060306@drouillard.ca>
	<1185990377.5799.5.camel@anto-desktop>
Message-ID: <20070801184035.GA19486@localhost.localdomain>

On Wed, 01 Aug 2007, Antonio Linares wrote:
> You will not believe me, but I rebooted Ubuntu and now it works fine :-)
> mysteries of life...

No. I believe you. The problem was with concurrent access.
You had working process (probably the same process executed more then
or working in background) which open the table so all other were failing.
It was enough to check neterr() as we suggested.
When you restarted computer you also killed all working process so
the problem disappeared. That's all.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Aug  1 15:02:41 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Aug  1 15:02:49 2007
Subject: [Harbour] runtime code execution
In-Reply-To: <1185987683.5799.2.camel@anto-desktop>
References: <1185987683.5799.2.camel@anto-desktop>
Message-ID: <20070801190241.GA20159@localhost.localdomain>

On Wed, 01 Aug 2007, Antonio Linares wrote:
> Przemek,
> Is there any example that shows how to compile and run an external PRG
> in runtime with the most recent changes that you implemented ? thanks,

utils/hbrun/hbrun.prg

best regards,
Przemek
From antonioharbour at gmail.com  Wed Aug  1 16:28:56 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Aug  1 16:29:06 2007
Subject: [Harbour] USE error ?
In-Reply-To: <20070801184035.GA19486@localhost.localdomain>
References: <1185920321.6462.34.camel@anto-desktop>
	<46AFB856.9060306@drouillard.ca> <1185990377.5799.5.camel@anto-desktop>
	<20070801184035.GA19486@localhost.localdomain>
Message-ID: <1186000136.5799.8.camel@anto-desktop>

Przemek,

> No. I believe you. The problem was with concurrent access.

Thats what I thought too, but the same app built with xharbour was
properly opening the file. How do you explain that ? :-)

regards,

Antonio

From antonioharbour at gmail.com  Wed Aug  1 16:37:04 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Aug  1 16:37:12 2007
Subject: [Harbour] runtime code execution
In-Reply-To: <20070801190241.GA20159@localhost.localdomain>
References: <1185987683.5799.2.camel@anto-desktop>
	<20070801190241.GA20159@localhost.localdomain>
Message-ID: <1186000624.5799.9.camel@anto-desktop>

Przemek,

> > Is there any example that shows how to compile and run an external PRG
> > in runtime with the most recent changes that you implemented ? thanks,
> 
> utils/hbrun/hbrun.prg

Thanks,

regards,

Antonio

From druzus at priv.onet.pl  Wed Aug  1 16:57:32 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Aug  1 16:57:38 2007
Subject: [Harbour] USE error ?
In-Reply-To: <1186000136.5799.8.camel@anto-desktop>
References: <1185920321.6462.34.camel@anto-desktop>
	<46AFB856.9060306@drouillard.ca>
	<1185990377.5799.5.camel@anto-desktop>
	<20070801184035.GA19486@localhost.localdomain>
	<1186000136.5799.8.camel@anto-desktop>
Message-ID: <20070801205732.GA20620@localhost.localdomain>

On Wed, 01 Aug 2007, Antonio Linares wrote:
> > No. I believe you. The problem was with concurrent access.
> Thats what I thought too, but the same app built with xharbour was
> properly opening the file.

Everything was working properly.

> How do you explain that ? :-)

The application which was working in background keeping dbf file open
was compiled by Harbour and blocked only other Harbour processes because
Harbour and xHarbour use different methods to emulate DOS/Windows DENY
flags in POSIX systems.

best regards,
Przemek
From info at fsgiudice.com  Wed Aug  1 17:12:35 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Aug  1 17:13:45 2007
Subject: [Harbour] Destructor inheritance
References: <1185987683.5799.2.camel@anto-desktop>
	<20070801190241.GA20159@localhost.localdomain>
Message-ID: <000401c7d480$b00ddf30$b400a8c0@ASUSFSG>

Hi Przemek,

I'm trying to understand if there is a way to use parent class destructor.

In xharbour there is possibility to call a special method using this syntax:
::Super:__Destructor()
to execute super class destructor.
Because in some cases I have necessity to execute some instructions on 
parent before destroy current object.

I have see your text message in doc\destruct.txt:
--------
Inheritance
-----------
Destructors can be inherited from the first super class in the
same way as ON ERROR message. Defining destructor in class overwrites
the inherited ones so they will not be executed.
Maybe in some spare time I'll add support for executing all inherited
super destructors.
--------

without having automatic destruction, is it possible to implement any manual 
way ?

I have checked using same sintax but what I got is
Error -> 16 Message not found: MYCLASS1:__DESTRUCTOR
Below the sample based on modified version of destruct.prg

TIA

Best Regards

Francesco

-----------

/*
 * $Id: destruct.prg 6854 2006-09-15 11:28:48Z druzus $
 */

/*
 * Harbour Project source code:
 *    example/test code for object destructors
 *
 * Copyright 2006 Przemyslaw Czerpak <druzus / at / priv.onet.pl>
 * www - http://www.harbour-project.org
 *
 */

#include "hbclass.ch"

memvar P

PROC MAIN()
   LOCAL bError

   PUBLIC P := NIL

   bError := errorBlock( { | oErr | myErrorHandler( oErr ) } )

   ? "First simple tests when object is not destroyed by GC"
   ? "====================================================="
   SIMPLETEST( 0 )
   SIMPLETEST( 1 )
   SIMPLETEST( 2 )
   SIMPLETEST( 3 )

   ?
   ? "Now object will be destroyed by GC"
   ? "=================================="
   GCFREETEST( 0 )
   GCFREETEST( 1 )
   GCFREETEST( 2 )
   GCFREETEST( 3 )

   errorBlock( bError )

   ?
   ? "*** END OF TEST ***"

return

STATIC PROCEDURE SIMPLETEST( type )
   LOCAL o

   ?
   ? "=> o := myClass():new( " + ltrim( str( type ) ) + " )"
   o := myClass():new( type )
   ? "=> o:className() ->", o:className()
   ? "=> o := NIL"
   begin sequence
      o := NIL
   end
   ?
   ? "=> o := myClass():new( " + ltrim( str( type ) ) + " )"
   o := myClass1():new( type )
   ? "=> o:className() ->", o:className()
   ? "=> o := NIL"
   begin sequence
      o := NIL
   end
RETURN

STATIC PROCEDURE GCFREETEST( type )
   LOCAL o, a

   ?
   ? "=> o := myClass():new( " + ltrim( str( type ) ) + " )"
   o := myClass():new( type )
   ? "=> o:className() ->", o:className()
   ? "=> create corss reference: a := { o, nil }; a[2] := a; a := NIL"
   a := { o, nil }; a[2] := a; a := NIL
   ? "=> o := NIL"
   begin sequence
      o := NIL
   end
   ? "=> hb_gcAll()"
   begin sequence
      hb_gcAll()
   end
RETURN

STATIC FUNCTION myErrorHandler( oErr )
   ? "Error ->", ltrim( str( oErr:gencode ) ), ;
     oErr:description + ":", oErr:operation
   BREAK oErr
RETURN NIL


CREATE CLASS myClass
   VAR         type
   VAR         var1
   CLASS VAR   var2
   METHOD      init
   DESTRUCTOR  dtor
END CLASS

METHOD INIT( type ) CLASS myClass
   ? "Hi, I'm INIT method of class:", self:classname()
   ::type := type
RETURN self

PROCEDURE DTOR CLASS myClass
   ? "   Hi, I'm desturctor of class: ", self:classname()

   IF ::type == 1
      ? "   I'm storing reference to self in instance variable."
      ? "   Bad practice but safe in Harbour because it will be destroyed."
      ::var1 := self
   ELSEIF ::Type == 2
      ? "   I'm storing reference to self in class variable."
      ? "   It's programmer bug which should cause RT error."
      ::var2 := self
   ELSEIF ::Type == 3
      ? "   I'm storing reference to self in public variable."
      ? "   It's programmer bug which should cause RT error."
      P := self
   ELSE
      ? "   I do not store any references to self."
      ? "   It's a safe destructor."
   ENDIF

RETURN

CREATE CLASS myClass1 FROM myClass
   VAR         type
   VAR         var1
   CLASS VAR   var2
   METHOD      init
   DESTRUCTOR  dtor
END CLASS

METHOD INIT( type ) CLASS myClass1
   ? "Hi, I'm INIT method of class1:", self:classname()
   ::type := type
RETURN self

PROCEDURE DTOR CLASS myClass1
   ? "   Hi, I'm desturctor of class1: ", self:classname()

   IF ::type == 1
      ? "   I'm storing reference to self in instance variable."
      ? "   Bad practice but safe in Harbour because it will be destroyed."
      ::Super:__Destructor()
      ::var1 := self
   ELSEIF ::Type == 2
      ? "   I'm storing reference to self in class variable."
      ? "   It's programmer bug which should cause RT error."
      ::Super:__Destructor()
      ::var2 := self
   ELSEIF ::Type == 3
      ? "   I'm storing reference to self in public variable."
      ? "   It's programmer bug which should cause RT error."
      ::Super:__Destructor()
      P := self
   ELSE
      ? "   I do not store any references to self."
      ? "   It's a safe destructor."
   ENDIF

RETURN
From antonioharbour at gmail.com  Wed Aug  1 17:17:06 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Aug  1 17:17:16 2007
Subject: [Harbour] USE error ?
In-Reply-To: <20070801205732.GA20620@localhost.localdomain>
References: <1185920321.6462.34.camel@anto-desktop>
	<46AFB856.9060306@drouillard.ca> <1185990377.5799.5.camel@anto-desktop>
	<20070801184035.GA19486@localhost.localdomain>
	<1186000136.5799.8.camel@anto-desktop>
	<20070801205732.GA20620@localhost.localdomain>
Message-ID: <1186003026.5799.16.camel@anto-desktop>

Przemek,

> The application which was working in background keeping dbf file open
> was compiled by Harbour and blocked only other Harbour processes because
> Harbour and xHarbour use different methods to emulate DOS/Windows DENY
> flags in POSIX systems.

Ok, I see. Thanks for the explanation,

regards,

Antonio

From druzus at priv.onet.pl  Wed Aug  1 17:27:01 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Aug  1 17:27:08 2007
Subject: [Harbour] SixDriver on Harbour
In-Reply-To: <20070801151947Z6213065-20212+1401@ps6.test.onet.pl>
References: <20070801151947Z6213065-20212+1401@ps6.test.onet.pl>
Message-ID: <20070801212701.GB20620@localhost.localdomain>

On Wed, 01 Aug 2007, ViaOpen - Fernando Mancera wrote:
> Przemek
> I see on Harbour the hbsix.lib and hsx.lib.
> Is implemented in Harbour all the functionality of SixDriver?

HiPer-SEEK / CFTS is fully implemented. It has some extensions
which do not exist in original SIX3 library.
See source/rdd/hsx/hsx.c for description I left in the file header.
I added also support for SMT, SIX3 DBF field types, SIX3 compression
and encryption. So far I haven't implemented NSX support though I have
some basic version I started some months ago. Most of Sx_*() functions
are not implemented but we are supporting their functionality so they
can be easy added even at .prg level as wrappers to existing ord*()/
dbOrderInfo()/dbInfo()/dbRecordInfo()/dbFieldInfo()/rddInfo() functions.

Bitmap filters are not implemented. I created bitmap library with all
COMIX/ClipMore and MachSix functions and it's distributed by xHarbour.com
This library can work with Harbour - it's enough to recompile it with
Harbour header files. So far I haven't decided if I should public this
code. IMHO xHarbour.com makes also important things for [x]Harbour
community (f.e. very good commercial documentation) and I believe that
this library helps xHarbour.com to continue their jobs so I'm keeping
this code private though I stop to work on xHarbour code.
In contrib/bmdbfcdx is DBFCDX with some basic bitmap filters functionality
created by Miguel Angel Marchuet. In some cases it may be enough.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Aug  1 18:05:24 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Aug  1 18:05:33 2007
Subject: [Harbour] compile ware message.
In-Reply-To: <20070802005912.BDFF.SSBBS@mail.zzz.com.tw>
References: <46ae1fae.1e8d420a.7f56.61d1@mx.google.com>
	<46AE2FF5.5020203@gmail.com>
	<20070802005912.BDFF.SSBBS@mail.zzz.com.tw>
Message-ID: <F766D2C7-CA64-45D9-9F3B-F1B95FBE1C71@syenar.hu>

I cannot find any newer than 3.4.2 under Windows, and
with 3.4.2 I cannot reproduce this warning.

Do a fresh SVN checkout and retry pls.

Brgds,
Viktor

On 2007.08.01., at 19:01, ???{???T?E??????(WenSheng) wrote:

> MinGW 4.1.1 compiler.
> run make_gnu.bat and show:
>
> ../../cpcskam.c:76:39: warning: "/*" within comment
>
>
> does can fix it?
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Wed Aug  1 18:18:32 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Aug  1 18:18:39 2007
Subject: [Harbour] Destructor inheritance
In-Reply-To: <000401c7d480$b00ddf30$b400a8c0@ASUSFSG>
References: <1185987683.5799.2.camel@anto-desktop>
	<20070801190241.GA20159@localhost.localdomain>
	<000401c7d480$b00ddf30$b400a8c0@ASUSFSG>
Message-ID: <20070801221832.GC20620@localhost.localdomain>

On Wed, 01 Aug 2007, Francesco Saverio Giudice wrote:
> I'm trying to understand if there is a way to use parent class destructor.
> In xharbour there is possibility to call a special method using this syntax:
> ::Super:__Destructor()
> to execute super class destructor.
> Because in some cases I have necessity to execute some instructions on 
> parent before destroy current object.

If you know it then simply make parent class destructor as public or
protect method and execute it from child. In parent class define
destructor as wrapper to this method.

> I have see your text message in doc\destruct.txt:
> --------
> Inheritance
> -----------
> Destructors can be inherited from the first super class in the
> same way as ON ERROR message. Defining destructor in class overwrites
> the inherited ones so they will not be executed.
> Maybe in some spare time I'll add support for executing all inherited
> super destructors.
> --------
> without having automatic destruction, is it possible to implement any 
> manual way ?

It's possible with small ugly hack I do not like to public here because
it may stop to work in the future. Personally I'd prefer to add support
for executing all inherited destructors.

The question is if users code is ready for such feature. xHarbour does
not make it so it may break some existing code. Anyhow destructors in
xHarbour has never been being safe (f.e. try to execute to code from
tests/destruct.prg in Harbour and xHarbour - below I'm attaching valgrind
log from Harbour and xHarbour) so maybe not too much people use them and
and we should add such feature ASAP.

best regards,
Przemek




/*** HARBOUR ***********************************************************/
==21841== Memcheck, a memory error detector for x86-linux.
==21841== Copyright (C) 2002-2004, and GNU GPL'd, by Julian Seward et al.
==21841== Using valgrind-2.2.0, a program supervision framework for x86-linux.
==21841== Copyright (C) 2000-2004, and GNU GPL'd, by Julian Seward et al.
==21841== Valgrind library directory: /usr/lib/valgrind
==21841== Command line
==21841==    ./destruct
==21841== Startup, with flags:
==21841==    --tool=memcheck
==21841==    --leak-check=yes
==21841==    --num-callers=16
==21841==    -v
==21841== Contents of /proc/version:
==21841==   Linux version 2.6.15 (root@localhost.localdomain) (gcc version 3.4.2 20041017 (Red Hat 3.4.2-6.fc3)) #8 PREEMPT Fri Jun 16 01:11:03 CEST 2006
==21841== Reading syms from /home/druzus/CVS/xharbour/class/destruct/destruct (0x8048000)
==21841==    object doesn't have a symbol table
==21841==    object doesn't have any debug info
==21841== Reading syms from /lib/ld-2.3.3.so (0x1B8E4000)
==21841==    object doesn't have any debug info
==21841== Reading syms from /usr/lib/valgrind/stage2 (0xB0000000)
==21841== Reading syms from /lib/ld-2.3.3.so (0xB1000000)
==21841==    object doesn't have any debug info
==21841== Reading syms from /usr/lib/valgrind/vgskin_memcheck.so (0xB7BBF000)
==21841== Reading syms from /lib/tls/libc-2.3.3.so (0xB7DE8000)
==21841==    object doesn't have any debug info
==21841== Reading syms from /lib/libdl-2.3.3.so (0xB7F10000)
==21841==    object doesn't have any debug info
==21841== Reading suppressions file: /usr/lib/valgrind/default.supp
==21841== REDIRECT soname:libc.so.6(__GI___errno_location) to soname:libpthread.so.0(__errno_location)
==21841== REDIRECT soname:libc.so.6(__errno_location) to soname:libpthread.so.0(__errno_location)
==21841== REDIRECT soname:libc.so.6(__GI___h_errno_location) to soname:libpthread.so.0(__h_errno_location)
==21841== REDIRECT soname:libc.so.6(__h_errno_location) to soname:libpthread.so.0(__h_errno_location)
==21841== REDIRECT soname:libc.so.6(__GI___res_state) to soname:libpthread.so.0(__res_state)
==21841== REDIRECT soname:libc.so.6(__res_state) to soname:libpthread.so.0(__res_state)
==21841== REDIRECT soname:libc.so.6(stpcpy) to *vgpreload_memcheck.so*(stpcpy)
==21841== REDIRECT soname:libc.so.6(strnlen) to *vgpreload_memcheck.so*(strnlen)
==21841== REDIRECT soname:ld-linux.so.2(stpcpy) to *vgpreload_memcheck.so*(stpcpy)
==21841== REDIRECT soname:ld-linux.so.2(strchr) to *vgpreload_memcheck.so*(strchr)
==21841== 
==21841== Reading syms from /usr/lib/valgrind/vg_inject.so (0x1B8FC000)
==21841== Reading syms from /usr/lib/valgrind/vgpreload_memcheck.so (0x1B901000)
==21841== TRANSLATE: 0x1B8F5A50 redirected to 0x1B90420C
==21841== Reading syms from /home/druzus/CVS/harbour/out.new/lib/libharbour-1.1.1.so (0x1B923000)
==21841== Reading syms from /lib/tls/libm-2.3.3.so (0x95C000)
==21841==    object doesn't have any debug info
==21841== Reading syms from /lib/libdl-2.3.3.so (0x981000)
==21841==    object doesn't have any debug info
==21841== Reading syms from /usr/local/lib/libslang.so.2.0.5 (0x1BBE7000)
==21841==    object doesn't have a symbol table
==21841==    object doesn't have any debug info
==21841== Reading syms from /usr/lib/libncurses.so.5.4 (0x58D8000)
==21841== Reading syms from /usr/X11R6/lib/libX11.so.6.2 (0x987000)
==21841==    object doesn't have a symbol table
==21841==    object doesn't have any debug info
==21841== Reading syms from /lib/tls/libc-2.3.3.so (0x833000)
==21841==    object doesn't have any debug info
==21841== TRANSLATE: 0x896160 redirected to 0x1B904A04
==21841== TRANSLATE: 0x896610 redirected to 0x1B905432
==21841== TRANSLATE: 0x1B8E47A0 redirected to 0x52BFF040
==21841== TRANSLATE: 0x894430 redirected to 0x1B904F30

First simple tests when object is not destroyed by GC
=====================================================

=> o := myClass():new( 0 )
Hi, I'm INIT method of class: MYCLASS
=> o:className() -> MYCLASS
=> o := NIL
   Hi, I'm desturctor of class:  MYCLASS
   I do not store any references to self.
   It's a safe destructor.

=> o := myClass():new( 1 )
Hi, I'm INIT method of class: MYCLASS
=> o:className() -> MYCLASS
=> o := NIL
   Hi, I'm desturctor of class:  MYCLASS
   I'm storing reference to self in instance variable.
   Bad practice but safe in Harbour because it will be destroyed.

=> o := myClass():new( 2 )
Hi, I'm INIT method of class: MYCLASS
=> o:className() -> MYCLASS
=> o := NIL
   Hi, I'm desturctor of class:  MYCLASS
   I'm storing reference to self in class variable.
   It's programmer bug which should cause RT error.
Error -> 45 Object Destructor Failure: Reference to freed block

=> o := myClass():new( 3 )
Hi, I'm INIT method of class: MYCLASS
=> o:className() -> MYCLASS
=> o := NIL
   Hi, I'm desturctor of class:  MYCLASS
   I'm storing reference to self in public variable.
   It's programmer bug which should cause RT error.
Error -> 45 Object Destructor Failure: Reference to freed block

Now object will be destroyed by GC
==================================

=> o := myClass():new( 0 )
Hi, I'm INIT method of class: MYCLASS
=> o:className() -> MYCLASS
=> create corss reference: a := { o, nil }; a[2] := a; a := NIL
=> o := NIL
=> hb_gcAll()
   Hi, I'm desturctor of class:  MYCLASS
   I do not store any references to self.
   It's a safe destructor.

=> o := myClass():new( 1 )
Hi, I'm INIT method of class: MYCLASS
=> o:className() -> MYCLASS
=> create corss reference: a := { o, nil }; a[2] := a; a := NIL
=> o := NIL
=> hb_gcAll()
   Hi, I'm desturctor of class:  MYCLASS
   I'm storing reference to self in instance variable.
   Bad practice but safe in Harbour because it will be destroyed.

=> o := myClass():new( 2 )
Hi, I'm INIT method of class: MYCLASS
=> o:className() -> MYCLASS
=> create corss reference: a := { o, nil }; a[2] := a; a := NIL
=> o := NIL
=> hb_gcAll()
   Hi, I'm desturctor of class:  MYCLASS
   I'm storing reference to self in class variable.
   It's programmer bug which should cause RT error.
Error -> 45 Object Destructor Failure: Reference to freed block

=> o := myClass():new( 3 )
Hi, I'm INIT method of class: MYCLASS
=> o:className() -> MYCLASS
=> create corss reference: a := { o, nil }; a[2] := a; a := NIL
=> o := NIL
=> hb_gcAll()
   Hi, I'm desturctor of class:  MYCLASS
   I'm storing reference to self in public variable.
   It's programmer bug which should cause RT error.
Error -> 45 Object Destructor Failure: Reference to freed block

*** END OF TEST ***==21841== 
==21841== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 20 from 1)
--21841-- 
--21841-- supp:   20 Ugly strchr error in /lib/ld-2.3.3.so
==21841== malloc/free: in use at exit: 0 bytes in 0 blocks.
==21841== malloc/free: 3915 allocs, 3915 frees, 3760479 bytes allocated.
==21841== 
==21841== No malloc'd blocks -- no leaks are possible.
--21841--     TT/TC: 0 tc sectors discarded.
--21841--            5832 tt_fast misses.
--21841-- translate: new     5620 (87312 -> 1250951; ratio 143:10)
--21841--            discard 1 (23 -> 320; ratio 139:10).
--21841-- chainings: 4128 chainings, 2 unchainings.
--21841--  dispatch: 2150000 jumps (bb entries); of them 311615 (14%) unchained.
--21841--            382/12535 major/minor sched events.
--21841-- reg-alloc: 792 t-req-spill, 232082+5504 orig+spill uis,
--21841--            27818 total-reg-rank
--21841--    sanity: 311 cheap, 13 expensive checks.
--21841--    ccalls: 26592 C calls, 60% saves+restores avoided (95412 bytes)
--21841--            34862 args, avg 0.88 setup instrs each (8356 bytes)
--21841--            0% clear the stack (79668 bytes)
--21841--            8470 retvals, 27% of reg-reg movs avoided (4554 bytes)






/*** XHARBOUR **********************************************************/
==21873== Memcheck, a memory error detector for x86-linux.
==21873== Copyright (C) 2002-2004, and GNU GPL'd, by Julian Seward et al.
==21873== Using valgrind-2.2.0, a program supervision framework for x86-linux.
==21873== Copyright (C) 2000-2004, and GNU GPL'd, by Julian Seward et al.
==21873== Valgrind library directory: /usr/lib/valgrind
==21873== Command line
==21873==    ./destruct
==21873== Startup, with flags:
==21873==    --tool=memcheck
==21873==    --leak-check=yes
==21873==    --num-callers=16
==21873==    -v
==21873== Contents of /proc/version:
==21873==   Linux version 2.6.15 (root@localhost.localdomain) (gcc version 3.4.2 20041017 (Red Hat 3.4.2-6.fc3)) #8 PREEMPT Fri Jun 16 01:11:03 CEST 2006
==21873== Reading syms from /home/druzus/CVS/xharbour/class/destruct/destruct (0x8048000)
==21873==    object doesn't have a symbol table
==21873==    object doesn't have any debug info
==21873== Reading syms from /lib/ld-2.3.3.so (0x1B8E4000)
==21873==    object doesn't have any debug info
==21873== Reading syms from /usr/lib/valgrind/stage2 (0xB0000000)
==21873== Reading syms from /lib/ld-2.3.3.so (0xB1000000)
==21873==    object doesn't have any debug info
==21873== Reading syms from /usr/lib/valgrind/vgskin_memcheck.so (0xB7C37000)
==21873== Reading syms from /lib/tls/libc-2.3.3.so (0xB7E60000)
==21873==    object doesn't have any debug info
==21873== Reading syms from /lib/libdl-2.3.3.so (0xB7F88000)
==21873==    object doesn't have any debug info
==21873== Reading suppressions file: /usr/lib/valgrind/default.supp
==21873== REDIRECT soname:libc.so.6(__GI___errno_location) to soname:libpthread.so.0(__errno_location)
==21873== REDIRECT soname:libc.so.6(__errno_location) to soname:libpthread.so.0(__errno_location)
==21873== REDIRECT soname:libc.so.6(__GI___h_errno_location) to soname:libpthread.so.0(__h_errno_location)
==21873== REDIRECT soname:libc.so.6(__h_errno_location) to soname:libpthread.so.0(__h_errno_location)
==21873== REDIRECT soname:libc.so.6(__GI___res_state) to soname:libpthread.so.0(__res_state)
==21873== REDIRECT soname:libc.so.6(__res_state) to soname:libpthread.so.0(__res_state)
==21873== REDIRECT soname:libc.so.6(stpcpy) to *vgpreload_memcheck.so*(stpcpy)
==21873== REDIRECT soname:libc.so.6(strnlen) to *vgpreload_memcheck.so*(strnlen)
==21873== REDIRECT soname:ld-linux.so.2(stpcpy) to *vgpreload_memcheck.so*(stpcpy)
==21873== REDIRECT soname:ld-linux.so.2(strchr) to *vgpreload_memcheck.so*(strchr)
==21873== 
==21873== Reading syms from /usr/lib/valgrind/vg_inject.so (0x1B8FC000)
==21873== Reading syms from /usr/lib/valgrind/vgpreload_memcheck.so (0x1B901000)
==21873== TRANSLATE: 0x1B8F5A50 redirected to 0x1B90420C
==21873== Reading syms from /home/druzus/CVS/xharbour/out/lib/libxharbour-0.99.71.so (0x1B923000)
==21873== Reading syms from /lib/tls/libm-2.3.3.so (0x95C000)
==21873==    object doesn't have any debug info
==21873== Reading syms from /usr/local/lib/libslang.so.2.0.5 (0x1BC9C000)
==21873==    object doesn't have a symbol table
==21873==    object doesn't have any debug info
==21873== Reading syms from /usr/lib/libncurses.so.5.4 (0x58D8000)
==21873== Reading syms from /usr/X11R6/lib/libX11.so.6.2 (0x987000)
==21873==    object doesn't have a symbol table
==21873==    object doesn't have any debug info
==21873== Reading syms from /lib/tls/libc-2.3.3.so (0x833000)
==21873==    object doesn't have any debug info
==21873== Reading syms from /lib/libdl-2.3.3.so (0x981000)
==21873==    object doesn't have any debug info
==21873== TRANSLATE: 0x896160 redirected to 0x1B904A04
==21873== TRANSLATE: 0x896610 redirected to 0x1B905432
==21873== TRANSLATE: 0x1B8E47A0 redirected to 0x52BFF040
==21873== TRANSLATE: 0x894430 redirected to 0x1B904F30

First simple tests when object is not destroyed by GC
=====================================================

=> o := myClass():new( 0 )
Hi, I'm INIT method of class: MYCLASS
=> o:className() -> MYCLASS
=> o := NIL
   Hi, I'm desturctor of class:  MYCLASS
   I do not store any references to self.
   It's a safe destructor.

=> o := myClass():new( 1 )
Hi, I'm INIT method of class: MYCLASS
=> o:className() -> MYCLASS
=> o := NIL
   Hi, I'm desturctor of class:  MYCLASS
   I'm storing reference to self in instance variable.
   Bad practice but safe in Harbour because it will be destroyed.

=> o := myClass():new( 2 )
Hi, I'm INIT method of class: MYCLASS
=> o:className() -> MYCLASS
=> o := NIL
   Hi, I'm desturctor of class:  MYCLASS
   I'm storing reference to self in class variable.
   It's programmer bug which should cause RT error.

=> o := myClass():new( 3 )
Hi, I'm INIT method of class: MYCLASS
=> o:className() -> MYCLASS
=> o := NIL
   Hi, I'm desturctor of class:  MYCLASS
   I'm storing reference to self in public variable.
   It's programmer bug which should cause RT error.

Now object will be destroyed by GC
==================================

=> o := myClass():new( 0 )
Hi, I'm INIT method of class: MYCLASS
=> o:className() -> MYCLASS
=> create corss reference: a := { o, nil }; a[2] := a; a := NIL
=> o := NIL
=> hb_gcAll()==21873== Invalid read of size 2
==21873==    at 0x1BACEB82: hb_gcItemRef (garbage.c:474)
==21873==    by 0x1BACE5AF: hb_memvarsIsMemvarRef (memvars.c:2357)
==21873==    by 0x1BACED21: hb_gcCollectAll (garbage.c:648)
==21873==    by 0x1BACF0A0: HB_FUN_HB_GCALL (garbage.c:926)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x8048912: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x80488D6: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BAF5B22: main (mainstd.c:66)
==21873==  Address 0x1BDB0022 is 18 bytes inside a block of size 52 free'd
==21873==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==21873==    by 0x1BAF7CAB: hb_arrayRelease (arrays.c:1346)
==21873==    by 0x1BAD799F: hb_itemClear (fastitem.c:248)
==21873==    by 0x1BAD7AB0: hb_itemForwardValue (fastitem.c:96)
==21873==    by 0x1BAEB521: hb_vmPopLocal (hvm.c:9016)
==21873==    by 0x1BADD090: hb_vmExecute (hvm.c:3184)
==21873==    by 0x80488F4: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x80488D6: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BAF5B22: main (mainstd.c:66)
==21873== 
==21873== Invalid read of size 4
==21873==    at 0x1BACEC95: hb_gcItemRef (garbage.c:476)
==21873==    by 0x1BACE5AF: hb_memvarsIsMemvarRef (memvars.c:2357)
==21873==    by 0x1BACED21: hb_gcCollectAll (garbage.c:648)
==21873==    by 0x1BACF0A0: HB_FUN_HB_GCALL (garbage.c:926)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x8048912: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x80488D6: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BAF5B22: main (mainstd.c:66)
==21873==  Address 0x1BDB0028 is 24 bytes inside a block of size 52 free'd
==21873==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==21873==    by 0x1BAF7CAB: hb_arrayRelease (arrays.c:1346)
==21873==    by 0x1BAD799F: hb_itemClear (fastitem.c:248)
==21873==    by 0x1BAD7AB0: hb_itemForwardValue (fastitem.c:96)
==21873==    by 0x1BAEB521: hb_vmPopLocal (hvm.c:9016)
==21873==    by 0x1BADD090: hb_vmExecute (hvm.c:3184)
==21873==    by 0x80488F4: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x80488D6: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BAF5B22: main (mainstd.c:66)
==21873== 
==21873== Invalid write of size 2
==21873==    at 0x1BACEC98: hb_gcItemRef (garbage.c:480)
==21873==    by 0x1BACE5AF: hb_memvarsIsMemvarRef (memvars.c:2357)
==21873==    by 0x1BACED21: hb_gcCollectAll (garbage.c:648)
==21873==    by 0x1BACF0A0: HB_FUN_HB_GCALL (garbage.c:926)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x8048912: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x80488D6: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BAF5B22: main (mainstd.c:66)
==21873==  Address 0x1BDB0022 is 18 bytes inside a block of size 52 free'd
==21873==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==21873==    by 0x1BAF7CAB: hb_arrayRelease (arrays.c:1346)
==21873==    by 0x1BAD799F: hb_itemClear (fastitem.c:248)
==21873==    by 0x1BAD7AB0: hb_itemForwardValue (fastitem.c:96)
==21873==    by 0x1BAEB521: hb_vmPopLocal (hvm.c:9016)
==21873==    by 0x1BADD090: hb_vmExecute (hvm.c:3184)
==21873==    by 0x80488F4: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x80488D6: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BAF5B22: main (mainstd.c:66)
==21873== 
==21873== Invalid read of size 4
==21873==    at 0x1BACECA1: hb_gcItemRef (garbage.c:483)
==21873==    by 0x1BACE5AF: hb_memvarsIsMemvarRef (memvars.c:2357)
==21873==    by 0x1BACED21: hb_gcCollectAll (garbage.c:648)
==21873==    by 0x1BACF0A0: HB_FUN_HB_GCALL (garbage.c:926)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x8048912: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x80488D6: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BAF5B22: main (mainstd.c:66)
==21873==  Address 0x1BDB0024 is 20 bytes inside a block of size 52 free'd
==21873==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==21873==    by 0x1BAF7CAB: hb_arrayRelease (arrays.c:1346)
==21873==    by 0x1BAD799F: hb_itemClear (fastitem.c:248)
==21873==    by 0x1BAD7AB0: hb_itemForwardValue (fastitem.c:96)
==21873==    by 0x1BAEB521: hb_vmPopLocal (hvm.c:9016)
==21873==    by 0x1BADD090: hb_vmExecute (hvm.c:3184)
==21873==    by 0x80488F4: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x80488D6: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BAF5B22: main (mainstd.c:66)
==21873== 
==21873== Invalid read of size 4
==21873==    at 0x1BACEB6E: hb_gcItemRef (garbage.c:463)
==21873==    by 0x1BACECB1: hb_gcItemRef (garbage.c:489)
==21873==    by 0x1BACE5AF: hb_memvarsIsMemvarRef (memvars.c:2357)
==21873==    by 0x1BACED21: hb_gcCollectAll (garbage.c:648)
==21873==    by 0x1BACF0A0: HB_FUN_HB_GCALL (garbage.c:926)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x8048912: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x80488D6: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BAF5B22: main (mainstd.c:66)
==21873==  Address 0x0 is not stack'd, malloc'd or (recently) free'd
==21873== 
==21873== Process terminating with default action of signal 11 (SIGSEGV)
==21873==  Access not within mapped region at address 0x0
==21873==    at 0x1BACEB6E: hb_gcItemRef (garbage.c:463)
==21873==    by 0x1BACECB1: hb_gcItemRef (garbage.c:489)
==21873==    by 0x1BACE5AF: hb_memvarsIsMemvarRef (memvars.c:2357)
==21873==    by 0x1BACED21: hb_gcCollectAll (garbage.c:648)
==21873==    by 0x1BACF0A0: HB_FUN_HB_GCALL (garbage.c:926)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x8048912: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x80488D6: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BAF5B22: main (mainstd.c:66)
==21873== 
==21873== ERROR SUMMARY: 5 errors from 5 contexts (suppressed: 20 from 1)
==21873== 
==21873== 1 errors in context 1 of 5:
==21873== Invalid read of size 4
==21873==    at 0x1BACEB6E: hb_gcItemRef (garbage.c:463)
==21873==    by 0x1BACECB1: hb_gcItemRef (garbage.c:489)
==21873==    by 0x1BACE5AF: hb_memvarsIsMemvarRef (memvars.c:2357)
==21873==    by 0x1BACED21: hb_gcCollectAll (garbage.c:648)
==21873==    by 0x1BACF0A0: HB_FUN_HB_GCALL (garbage.c:926)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x8048912: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x80488D6: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BAF5B22: main (mainstd.c:66)
==21873==  Address 0x0 is not stack'd, malloc'd or (recently) free'd
==21873== 
==21873== 1 errors in context 2 of 5:
==21873== Invalid read of size 4
==21873==    at 0x1BACECA1: hb_gcItemRef (garbage.c:483)
==21873==    by 0x1BACE5AF: hb_memvarsIsMemvarRef (memvars.c:2357)
==21873==    by 0x1BACED21: hb_gcCollectAll (garbage.c:648)
==21873==    by 0x1BACF0A0: HB_FUN_HB_GCALL (garbage.c:926)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x8048912: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x80488D6: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BAF5B22: main (mainstd.c:66)
==21873==  Address 0x1BDB0024 is 20 bytes inside a block of size 52 free'd
==21873==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==21873==    by 0x1BAF7CAB: hb_arrayRelease (arrays.c:1346)
==21873==    by 0x1BAD799F: hb_itemClear (fastitem.c:248)
==21873==    by 0x1BAD7AB0: hb_itemForwardValue (fastitem.c:96)
==21873==    by 0x1BAEB521: hb_vmPopLocal (hvm.c:9016)
==21873==    by 0x1BADD090: hb_vmExecute (hvm.c:3184)
==21873==    by 0x80488F4: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x80488D6: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BAF5B22: main (mainstd.c:66)
==21873== 
==21873== 1 errors in context 3 of 5:
==21873== Invalid write of size 2
==21873==    at 0x1BACEC98: hb_gcItemRef (garbage.c:480)
==21873==    by 0x1BACE5AF: hb_memvarsIsMemvarRef (memvars.c:2357)
==21873==    by 0x1BACED21: hb_gcCollectAll (garbage.c:648)
==21873==    by 0x1BACF0A0: HB_FUN_HB_GCALL (garbage.c:926)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x8048912: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x80488D6: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BAF5B22: main (mainstd.c:66)
==21873==  Address 0x1BDB0022 is 18 bytes inside a block of size 52 free'd
==21873==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==21873==    by 0x1BAF7CAB: hb_arrayRelease (arrays.c:1346)
==21873==    by 0x1BAD799F: hb_itemClear (fastitem.c:248)
==21873==    by 0x1BAD7AB0: hb_itemForwardValue (fastitem.c:96)
==21873==    by 0x1BAEB521: hb_vmPopLocal (hvm.c:9016)
==21873==    by 0x1BADD090: hb_vmExecute (hvm.c:3184)
==21873==    by 0x80488F4: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x80488D6: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BAF5B22: main (mainstd.c:66)
==21873== 
==21873== 1 errors in context 4 of 5:
==21873== Invalid read of size 4
==21873==    at 0x1BACEC95: hb_gcItemRef (garbage.c:476)
==21873==    by 0x1BACE5AF: hb_memvarsIsMemvarRef (memvars.c:2357)
==21873==    by 0x1BACED21: hb_gcCollectAll (garbage.c:648)
==21873==    by 0x1BACF0A0: HB_FUN_HB_GCALL (garbage.c:926)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x8048912: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x80488D6: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BAF5B22: main (mainstd.c:66)
==21873==  Address 0x1BDB0028 is 24 bytes inside a block of size 52 free'd
==21873==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==21873==    by 0x1BAF7CAB: hb_arrayRelease (arrays.c:1346)
==21873==    by 0x1BAD799F: hb_itemClear (fastitem.c:248)
==21873==    by 0x1BAD7AB0: hb_itemForwardValue (fastitem.c:96)
==21873==    by 0x1BAEB521: hb_vmPopLocal (hvm.c:9016)
==21873==    by 0x1BADD090: hb_vmExecute (hvm.c:3184)
==21873==    by 0x80488F4: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x80488D6: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BAF5B22: main (mainstd.c:66)
==21873== 
==21873== 1 errors in context 5 of 5:
==21873== Invalid read of size 2
==21873==    at 0x1BACEB82: hb_gcItemRef (garbage.c:474)
==21873==    by 0x1BACE5AF: hb_memvarsIsMemvarRef (memvars.c:2357)
==21873==    by 0x1BACED21: hb_gcCollectAll (garbage.c:648)
==21873==    by 0x1BACF0A0: HB_FUN_HB_GCALL (garbage.c:926)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x8048912: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x80488D6: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BAF5B22: main (mainstd.c:66)
==21873==  Address 0x1BDB0022 is 18 bytes inside a block of size 52 free'd
==21873==    at 0x1B904FB1: free (vg_replace_malloc.c:153)
==21873==    by 0x1BAF7CAB: hb_arrayRelease (arrays.c:1346)
==21873==    by 0x1BAD799F: hb_itemClear (fastitem.c:248)
==21873==    by 0x1BAD7AB0: hb_itemForwardValue (fastitem.c:96)
==21873==    by 0x1BAEB521: hb_vmPopLocal (hvm.c:9016)
==21873==    by 0x1BADD090: hb_vmExecute (hvm.c:3184)
==21873==    by 0x80488F4: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BADCAB6: hb_vmExecute (hvm.c:1375)
==21873==    by 0x80488D6: (within /home/druzus/CVS/xharbour/class/destruct/destruct)
==21873==    by 0x1BAE1ED9: hb_vmDo (hvm.c:6933)
==21873==    by 0x1BAF5B22: main (mainstd.c:66)
--21873-- 
--21873-- supp:   20 Ugly strchr error in /lib/ld-2.3.3.so
==21873== 
==21873== IN SUMMARY: 5 errors from 5 contexts (suppressed: 20 from 1)
==21873== 
==21873== malloc/free: in use at exit: 171705 bytes in 3589 blocks.
==21873== malloc/free: 6419 allocs, 2830 frees, 14380464 bytes allocated.
==21873== 
==21873== searching for pointers to 3589 not-freed blocks.
==21873== checked 7165716 bytes.
==21873== 
==21873== LEAK SUMMARY:
==21873==    definitely lost: 0 bytes in 0 blocks.
==21873==    possibly lost:   0 bytes in 0 blocks.
==21873==    still reachable: 171705 bytes in 3589 blocks.
==21873==         suppressed: 0 bytes in 0 blocks.
==21873== Reachable blocks (those to which a pointer was found) are not shown.
==21873== To see them, rerun with: --show-reachable=yes
--21873--     TT/TC: 0 tc sectors discarded.
--21873--            6057 tt_fast misses.
--21873-- translate: new     5874 (100000 -> 1361527; ratio 136:10)
--21873--            discard 1 (23 -> 320; ratio 139:10).
--21873-- chainings: 4214 chainings, 2 unchainings.
--21873--  dispatch: 5055348 jumps (bb entries); of them 312261 (6%) unchained.
--21873--            366/12919 major/minor sched events.
--21873-- reg-alloc: 938 t-req-spill, 251056+6642 orig+spill uis,
--21873--            29651 total-reg-rank
--21873--    sanity: 289 cheap, 12 expensive checks.
--21873--    ccalls: 28607 C calls, 60% saves+restores avoided (101468 bytes)
--21873--            38072 args, avg 0.87 setup instrs each (9328 bytes)
--21873--            0% clear the stack (85680 bytes)
--21873--            9175 retvals, 29% of reg-reg movs avoided (5240 bytes)
From antonioharbour at gmail.com  Wed Aug  1 19:22:33 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Aug  1 19:22:43 2007
Subject: [Harbour] Running Harbour (GUI) apps from gnome-commander
Message-ID: <1186010553.5799.32.camel@anto-desktop>

Just in case someone else is interested, I managed to run the Harbour
(GUI) apps from gnome-commander:

http://fivetechsoft.com/forums/viewtopic.php?p=35626#35626

regards,

Antonio

From antonioharbour at gmail.com  Wed Aug  1 19:51:02 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Aug  1 19:51:10 2007
Subject: [Harbour] OT: removing .PRG extension from Linux
Message-ID: <1186012262.5799.37.camel@anto-desktop>

If GEDIT_CURRENT_DOCUMENT_NAME is variable that holds the name of the
file that I am currently editing in gedit, is there a way (using bash)
to remove the .PRG ?

REMOVE_PRG_EXT( $GEDIT_CURRENT_DOCUMENT_NAME )    ?

so if I have module.prg, then I get just module

thanks,

From ssbbs at mail.zzz.com.tw  Wed Aug  1 20:51:38 2007
From: ssbbs at mail.zzz.com.tw (網緹資訊•廖文勝(WenSheng))
Date: Wed Aug  1 20:51:42 2007
Subject: [Harbour] compile ware message.
In-Reply-To: <F766D2C7-CA64-45D9-9F3B-F1B95FBE1C71@syenar.hu>
References: <20070802005912.BDFF.SSBBS@mail.zzz.com.tw>
	<F766D2C7-CA64-45D9-9F3B-F1B95FBE1C71@syenar.hu>
Message-ID: <20070802085007.C3E5.SSBBS@mail.zzz.com.tw>


You can get it from this link:
http://prdownloads.sourceforge.net/mingw/MinGW-4.1.1.exe?download

> I cannot find any newer than 3.4.2 under Windows, and
> with 3.4.2 I cannot reproduce this warning.
> 
> Do a fresh SVN checkout and retry pls.
> 
> 
> > MinGW 4.1.1 compiler.
> > run make_gnu.bat and show:
> >
> > ../../cpcskam.c:76:39: warning: "/*" within comment
> >
> >
> > does can fix it?
> >

From teo at windtelsoft.com  Wed Aug  1 22:36:28 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Wed Aug  1 22:36:40 2007
Subject: [Harbour] OT: removing .PRG extension from Linux
In-Reply-To: <1186012262.5799.37.camel@anto-desktop>
References: <1186012262.5799.37.camel@anto-desktop>
Message-ID: <200708012136.28850.teo@windtelsoft.com>

On Wednesday 01 August 2007 06:51:02 pm Antonio Linares wrote:
> If GEDIT_CURRENT_DOCUMENT_NAME is variable that holds the name of the
> file that I am currently editing in gedit, is there a way (using bash)
> to remove the .PRG ?
>
> REMOVE_PRG_EXT( $GEDIT_CURRENT_DOCUMENT_NAME )    ?
>
> so if I have module.prg, then I get just module
>

$ filename=module.prg ; echo ${filename%.*}



best regards

Teo Fonrouge


From antonioharbour at gmail.com  Thu Aug  2 01:01:52 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Aug  2 01:02:01 2007
Subject: [Harbour] OT: removing .PRG extension from Linux
In-Reply-To: <200708012136.28850.teo@windtelsoft.com>
References: <1186012262.5799.37.camel@anto-desktop>
	<200708012136.28850.teo@windtelsoft.com>
Message-ID: <1186030912.5799.43.camel@anto-desktop>

Teo,

> $ filename=module.prg ; echo ${filename%.*}

Thanks a lot :-)

Now I can build the Harbour apps from gedit :-)

regards,

Antonio 



From niki at synel.co.il  Thu Aug  2 01:47:55 2007
From: niki at synel.co.il (Chen Kedem)
Date: Thu Aug  2 01:46:22 2007
Subject: [Harbour] USE error ?
Message-ID: <46B1700B.7776@synel.co.il>

Przemek wrote:
> The application which was working in background keeping dbf file
> open was compiled by Harbour and blocked only other Harbour
> processes because Harbour and xHarbour use different methods to
> emulate DOS/Windows DENY flags in POSIX systems.

Isn't this a source for major problems in the future, when users try
to share the same database using a Harbour and xHarbour application?
(each may be written by a different vendor)

  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From harbour.01 at syenar.hu  Thu Aug  2 01:46:19 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Aug  2 01:46:30 2007
Subject: [Harbour] compile ware message.
In-Reply-To: <20070802085007.C3E5.SSBBS@mail.zzz.com.tw>
References: <20070802005912.BDFF.SSBBS@mail.zzz.com.tw>
	<F766D2C7-CA64-45D9-9F3B-F1B95FBE1C71@syenar.hu>
	<20070802085007.C3E5.SSBBS@mail.zzz.com.tw>
Message-ID: <6570CA1D-536B-4816-A8DE-E118C68B8503@syenar.hu>

Oh okey, if this is a MingW main version number, I did
my tests with the latest one which is 5.1.3 (which
contains GCC compiler 3.4.2)

The source code looks fine to me and it's essentially
unchanged since the first commit.

Please upgrade MinGW and/or checkout the source to see
what happens.

Brgds,
Viktor

On 2007.08.02., at 2:51, ???{???T?E??????(WenSheng) wrote:

>
> You can get it from this link:
> http://prdownloads.sourceforge.net/mingw/MinGW-4.1.1.exe?download
>
>> I cannot find any newer than 3.4.2 under Windows, and
>> with 3.4.2 I cannot reproduce this warning.
>>
>> Do a fresh SVN checkout and retry pls.
>>
>>
>>> MinGW 4.1.1 compiler.
>>> run make_gnu.bat and show:
>>>
>>> ../../cpcskam.c:76:39: warning: "/*" within comment
>>>
>>>
>>> does can fix it?
>>>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From info at fsgiudice.com  Thu Aug  2 02:31:56 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Thu Aug  2 02:33:14 2007
Subject: [Harbour] Destructor inheritance
References: <1185987683.5799.2.camel@anto-desktop><20070801190241.GA20159@localhost.localdomain><000401c7d480$b00ddf30$b400a8c0@ASUSFSG>
	<20070801221832.GC20620@localhost.localdomain>
Message-ID: <000901c7d4ce$d3e65e70$b400a8c0@ASUSFSG>


----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Thursday, August 02, 2007 12:18 AM
Subject: Re: [Harbour] Destructor inheritance


>
> If you know it then simply make parent class destructor as public or
> protect method and execute it from child. In parent class define
> destructor as wrapper to this method.
>

Ok, I have changed sample as reported below.

>> without having automatic destruction, is it possible to implement any
>> manual way ?
>
> It's possible with small ugly hack I do not like to public here because
> it may stop to work in the future. Personally I'd prefer to add support
> for executing all inherited destructors.
>

Ok

> The question is if users code is ready for such feature. xHarbour does
> not make it so it may break some existing code. Anyhow destructors in
> xHarbour has never been being safe (f.e. try to execute to code from
> tests/destruct.prg in Harbour and xHarbour - below I'm attaching valgrind
> log from Harbour and xHarbour) so maybe not too much people use them and
> and we should add such feature ASAP.
>

This could be usefull.

Two side notes:

1) in sample below obj:classname() did not return correct parent classname

   destroying class MYCLASS I got
  "method Destroy() from class: MYCLASS"

   destroying class MYCLASS1 I got
  "method Destroy() from class: MYCLASS1"
  "method Destroy() from class1: MYCLASS1"

2) not too much important, I have already changed all calls, but I found 
usefull using anonymous constructor syntax class( <params> ) instead of 
class():New( <params> ). I'm checking source to find a way to implement 
better than I did in xharbour, but I need to know if you have already 
planned to add it.

Thank you.

Best Regards

Francesco

--------------------------
/*
 * $Id: destruct.prg 6854 2006-09-15 11:28:48Z druzus $
 */

/*
 * Harbour Project source code:
 *    example/test code for object destructors
 *
 * Copyright 2006 Przemyslaw Czerpak <druzus / at / priv.onet.pl>
 * www - http://www.harbour-project.org
 *
 */

#include "hbclass.ch"

memvar P

PROC MAIN()
   LOCAL bError

   PUBLIC P := NIL

   bError := errorBlock( { | oErr | myErrorHandler( oErr ) } )

   ? "First simple tests when object is not destroyed by GC"
   ? "====================================================="
   SIMPLETEST( 0 )
   SIMPLETEST( 1 )
   SIMPLETEST( 2 )
   SIMPLETEST( 3 )

   ?
   ? "Now object will be destroyed by GC"
   ? "=================================="
   GCFREETEST( 0 )
   GCFREETEST( 1 )
   GCFREETEST( 2 )
   GCFREETEST( 3 )

   errorBlock( bError )

   ?
   ? "*** END OF TEST ***"

return

STATIC PROCEDURE SIMPLETEST( type )
   LOCAL o

   ?
   ? "=> o := myClass():new( " + ltrim( str( type ) ) + " )"
   o := myClass():new( type )
   ? "=> o:className() ->", o:className()
   ? "=> o := NIL"
   begin sequence
      o := NIL
   end
   ?
   ? "=> o := myClass():new( " + ltrim( str( type ) ) + " )"
   o := myClass1():new( type )
   ? "=> o:className() ->", o:className()
   ? "=> o := NIL"
   begin sequence
      o := NIL
   end
RETURN

STATIC PROCEDURE GCFREETEST( type )
   LOCAL o, a

   ?
   ? "=> o := myClass():new( " + ltrim( str( type ) ) + " )"
   o := myClass():new( type )
   ? "=> o:className() ->", o:className()
   ? "=> create corss reference: a := { o, nil }; a[2] := a; a := NIL"
   a := { o, nil }; a[2] := a; a := NIL
   ? "=> o := NIL"
   begin sequence
      o := NIL
   end
   ? "=> hb_gcAll()"
   begin sequence
      hb_gcAll()
   end
RETURN

STATIC FUNCTION myErrorHandler( oErr )
   ? "Error ->", ltrim( str( oErr:gencode ) ), ;
     oErr:description + ":", oErr:operation
   BREAK oErr
RETURN NIL


CREATE CLASS myClass
   VAR         type
   VAR         var1
   CLASS VAR   var2
   METHOD      init
   METHOD      destroy
   DESTRUCTOR  dtor
END CLASS

METHOD INIT( type ) CLASS myClass
   ? "Hi, I'm INIT method of class:", self:classname()
   ::type := type
RETURN self

METHOD destroy CLASS myClass
   ? "   method Destroy() from class: ", self:classname()
RETURN NIL

PROCEDURE DTOR CLASS myClass
   ? "   Hi, I'm desturctor of class: ", self:classname()
   ::Destroy()

   IF ::type == 1
      ? "   I'm storing reference to self in instance variable."
      ? "   Bad practice but safe in Harbour because it will be destroyed."
      ::var1 := self
   ELSEIF ::Type == 2
      ? "   I'm storing reference to self in class variable."
      ? "   It's programmer bug which should cause RT error."
      ::var2 := self
   ELSEIF ::Type == 3
      ? "   I'm storing reference to self in public variable."
      ? "   It's programmer bug which should cause RT error."
      P := self
   ELSE
      ? "   I do not store any references to self."
      ? "   It's a safe destructor."
   ENDIF

RETURN

CREATE CLASS myClass1 FROM myClass
   VAR         type
   VAR         var1
   CLASS VAR   var2
   METHOD      init
   METHOD      destroy
   DESTRUCTOR  dtor
END CLASS

METHOD INIT( type ) CLASS myClass1
   ? "Hi, I'm INIT method of class1:", self:classname()
   ::type := type
RETURN self

METHOD destroy CLASS myClass1
   ::Super:Destroy()
   ? "   method Destroy() from class1: ", self:classname()
RETURN NIL

PROCEDURE DTOR CLASS myClass1
   ? "   Hi, I'm desturctor of class1: ", self:classname()
   ::Destroy()

   IF ::type == 1
      ? "   I'm storing reference to self in instance variable."
      ? "   Bad practice but safe in Harbour because it will be destroyed."
      ::var1 := self
   ELSEIF ::Type == 2
      ? "   I'm storing reference to self in class variable."
      ? "   It's programmer bug which should cause RT error."
      ::var2 := self
   ELSEIF ::Type == 3
      ? "   I'm storing reference to self in public variable."
      ? "   It's programmer bug which should cause RT error."
      P := self
   ELSE
      ? "   I do not store any references to self."
      ? "   It's a safe destructor."
   ENDIF

RETURN

--------------------------
From antonioharbour at gmail.com  Thu Aug  2 03:14:31 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Aug  2 03:14:42 2007
Subject: [Harbour] contrib/hbzlib for Linux
Message-ID: <1186038871.5799.55.camel@anto-desktop>

Is contrib/hbzlib available for Linux ?

thanks,

Antonio

From fmancera at viaopen.com  Thu Aug  2 04:05:15 2007
From: fmancera at viaopen.com (ViaOpen - Fernando Mancera)
Date: Thu Aug  2 04:05:19 2007
Subject: [Harbour] SixDriver on Harbour
In-Reply-To: <20070801212701.GB20620@localhost.localdomain>
Message-ID: <mailman.1.1186041919.3664.harbour@harbour-project.org>

Hi Przemek,

I Vote yes to include it in Harbour. I think it is a very interesting
contribution so SixDriver users will be able to
use Harbour and they will Not be forced to use xHarbour.

Best Regards,

Fernando Mancera

-----Mensaje original-----
De: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] En nombre de Przemyslaw Czerpak
Enviado el: mi?rcoles, 01 de agosto de 2007 23:27
Para: Harbour Project Main Developer List.
Asunto: Re: [Harbour] SixDriver on Harbour

On Wed, 01 Aug 2007, ViaOpen - Fernando Mancera wrote:
> Przemek
> I see on Harbour the hbsix.lib and hsx.lib.
> Is implemented in Harbour all the functionality of SixDriver?

HiPer-SEEK / CFTS is fully implemented. It has some extensions which do not
exist in original SIX3 library.
See source/rdd/hsx/hsx.c for description I left in the file header.
I added also support for SMT, SIX3 DBF field types, SIX3 compression and
encryption. So far I haven't implemented NSX support though I have some
basic version I started some months ago. Most of Sx_*() functions are not
implemented but we are supporting their functionality so they can be easy
added even at .prg level as wrappers to existing ord*()/
dbOrderInfo()/dbInfo()/dbRecordInfo()/dbFieldInfo()/rddInfo() functions.

Bitmap filters are not implemented. I created bitmap library with all
COMIX/ClipMore and MachSix functions and it's distributed by xHarbour.com
This library can work with Harbour - it's enough to recompile it with
Harbour header files. So far I haven't decided if I should public this code.
IMHO xHarbour.com makes also important things for [x]Harbour community (f.e.
very good commercial documentation) and I believe that this library helps
xHarbour.com to continue their jobs so I'm keeping this code private though
I stop to work on xHarbour code.
In contrib/bmdbfcdx is DBFCDX with some basic bitmap filters functionality
created by Miguel Angel Marchuet. In some cases it may be enough.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


__________ Informaci?n de NOD32, revisi?n 2431 (20070801) __________

Este mensaje ha sido analizado con NOD32 antivirus system
http://www.nod32.com


From dmacias at mail.udg.mx  Thu Aug  2 04:47:47 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Aug  2 04:47:50 2007
Subject: [Harbour] Re: USE error ?
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <46B19A33.9050601@mail.udg.mx>

 >The application which was working in background keeping dbf file open
 >was compiled by Harbour and blocked only other Harbour processes because
 >Harbour and xHarbour use different methods to emulate DOS/Windows DENY
 >flags in POSIX systems.

It mean that (in Linux) Harbour and xHarbour can not share dbf files ?

David Macias



From druzus at priv.onet.pl  Thu Aug  2 04:54:53 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug  2 04:54:58 2007
Subject: [Harbour] Destructor inheritance
In-Reply-To: <000901c7d4ce$d3e65e70$b400a8c0@ASUSFSG>
References: <20070801221832.GC20620@localhost.localdomain>
	<000901c7d4ce$d3e65e70$b400a8c0@ASUSFSG>
Message-ID: <20070802085453.GA28548@localhost.localdomain>

On Thu, 02 Aug 2007, Francesco Saverio Giudice wrote:
> This could be usefull.

Below Is a patch which adds basic support for executing all known
inherited destructors with a test program. It's not such efficient as
it should be but before I'll implement final version this one can be
used.

> Two side notes:
> 1) in sample below obj:classname() did not return correct parent classname
>   destroying class MYCLASS I got
>  "method Destroy() from class: MYCLASS"
>   destroying class MYCLASS1 I got
>  "method Destroy() from class: MYCLASS1"
>  "method Destroy() from class1: MYCLASS1"

It's intentional - please use:
    ? ::realclass:classname()
if you want to check class name respecting super casting.
I thought about changing it but this common behavior in super casting
(also in Class(y)) so I decided to keep it to not confuse users. In
fact we are destroying object of given class.

> 2) not too much important, I have already changed all calls, but I found 
> usefull using anonymous constructor syntax class( <params> ) instead of 
> class():New( <params> ). I'm checking source to find a way to implement 
> better than I did in xharbour, but I need to know if you have already 
> planned to add it.

This can be easy implemented inside hbclass.ch. Much easier then in
xHarbour because in Harbour you can pass unnamed parameters using: ...
Not tested but the effect you are asking for can be reached if you change
hbclass.ch[246]:
   <static> function __HB_CLS_OPT([<FuncName>,] <ClassName>) ;;
to:
   <static> function __HB_CLS_OPT([<FuncName>,] <ClassName>)(...) ;;

and hbclass.ch[263]:
      return s_oClass:Instance() AS CLASS _CLASS_NAME_ ;;
to:
      return s_oClass:Instance():new(...) AS CLASS _CLASS_NAME_ ;;
or maybe:
      return iif( pcount()==0, s_oClass:Instance(), ;
                  s_oClass:Instance():new(...) ) AS CLASS _CLASS_NAME_ ;;
if you do not want to execute NEW() method when there is no parameters.

But please remember that it's not classy compatible. In Class(y) class
function always return 'class object' not instance of given class.
In hbclass.ch it should look like:
      return s_oClass
class object understands method NEW() which makes sth like:

    method new(...)
    [...]
    obj := self:Instance()
    obj:init(...)
    [...]
    return obj

Without replicating this behavior we will never have class method and
members working like in Class(y) so sooner or later such initialization
will have to be added. Probably as an alternative solution due to existing
code.

Please also note that you can create function like:
    function <myclass>new(...)
    return <myclass>():new(...)
and this seems to be convention respected also by Clipper and it's the
reasons why it has functions like: errorNEW(), tbrowseNEW(),
tbcolumnNEW(), getNEW()

best regards,
Przemek




/**** multidtr.prg ***/
#include "hbclass.ch"
PROC MAIN()
   LOCAL o
   ? "o := myClass():new()"
   o := myClass():new()
   ? "o := NIL"
   o := NIL
   ? "RETURN"
RETURN

#command SHOW INFO => ;
   ? "   ", procname() + ", class handle: " + ;
     ltrim( str( ::realClass:classH() ) ) + ", from: " + ;
     ltrim( str( ::classH() ) )


CREATE CLASS myClass FROM mySuperClass1, mySuperClass2, mySuperClass3
   METHOD      init
   DESTRUCTOR  dtor
END CLASS

METHOD INIT(...) CLASS myClass
   /* Call all super constructors, please note that some of them
    * can be executed more then once if the same class appears
    * more then once in inheritance tree - user's code has to
    * support such case
    */
   ::mySuperClass1:init(...)
   ::mySuperClass2:init(...)
   ::mySuperClass3:init(...)
   SHOW INFO
RETURN self

PROCEDURE DTOR CLASS myClass
   SHOW INFO
RETURN


CREATE CLASS mySuperClass1 FROM mySuperClass3
   METHOD      init
   DESTRUCTOR  dtor
END CLASS

METHOD INIT(...) CLASS mySuperClass1
   ::mySuperClass3:init(...)
   SHOW INFO
RETURN self

PROCEDURE DTOR CLASS mySuperClass1
   SHOW INFO
RETURN


CREATE CLASS mySuperClass2
   METHOD      init
   DESTRUCTOR  dtor
END CLASS

METHOD INIT(...) CLASS mySuperClass2
   SHOW INFO
RETURN self

PROCEDURE DTOR CLASS mySuperClass2
   SHOW INFO
RETURN


CREATE CLASS mySuperClass3
   METHOD      init
   DESTRUCTOR  dtor
END CLASS

METHOD INIT(...) CLASS mySuperClass3
   SHOW INFO
RETURN self

PROCEDURE DTOR CLASS mySuperClass3
   SHOW INFO
RETURN

/**** EOF: multidtr.prg ***/






Index: harbour/source/vm/classes.c
===================================================================
--- harbour/source/vm/classes.c	(wersja 7626)
+++ harbour/source/vm/classes.c	(kopia robocza)
@@ -1756,6 +1756,51 @@
 }
 
 /*
+ * Call all known supper destructors
+ */
+static void hb_objSupperDestructorCall( PHB_ITEM pObject, PCLASS pClass )
+{
+   PMETHOD pMethod = pClass->pMethods;
+   ULONG   ulLimit = hb_clsMthNum( pClass );
+   BYTE * pbClasses;
+   USHORT uiClass;
+
+   pbClasses = ( BYTE * ) hb_xgrab( s_uiClasses + 1 );
+   memset( pbClasses, 0, s_uiClasses + 1 );
+
+   do
+   {
+      if( pMethod->pMessage )
+      {
+         if( pMethod->pFuncSym == &s___msgSuper )
+         {
+            PCLASS pSupperClass = &s_pClasses[ pMethod->uiSprClass ];
+            if( pSupperClass->fHasDestructor && pSupperClass != pClass )
+               pbClasses[ pMethod->uiSprClass ] |= 1;
+         }
+         else if( pMethod->pMessage == s___msgDestructor.pDynSym )
+            pbClasses[ pMethod->uiSprClass ] |= 2;
+      }
+      ++pMethod;
+   }
+   while( --ulLimit );
+
+   for( uiClass = s_uiClasses; uiClass; --uiClass )
+   {
+      if( pbClasses[ uiClass ] == 1 )
+      {
+         hb_vmPushSymbol( &s___msgDestructor );
+         hb_clsMakeSuperObject( hb_stackAllocItem(), pObject, uiClass );
+         hb_vmSend( 0 );
+         if( hb_vmRequestQuery() != 0 )
+            break;
+      }
+   }
+
+   hb_xfree( pbClasses );
+}
+
+/*
  * Call object destructor
  */
 void hb_objDestructorCall( PHB_ITEM pObject )
@@ -1772,6 +1817,8 @@
             hb_vmPushSymbol( &s___msgDestructor );
             hb_vmPush( pObject );
             hb_vmSend( 0 );
+            if( hb_vmRequestQuery() == 0 )
+               hb_objSupperDestructorCall( pObject, pClass );
             hb_vmRequestRestore();
          }
       }
From druzus at priv.onet.pl  Thu Aug  2 05:10:04 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug  2 05:10:11 2007
Subject: [Harbour] Re: USE error ?
In-Reply-To: <46B19A33.9050601@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<46B19A33.9050601@mail.udg.mx>
Message-ID: <20070802091004.GB28548@localhost.localdomain>

On Thu, 02 Aug 2007, David Arturo Macias Corona wrote:
> >The application which was working in background keeping dbf file open
> >was compiled by Harbour and blocked only other Harbour processes because
> >Harbour and xHarbour use different methods to emulate DOS/Windows DENY
> >flags in POSIX systems.
> It mean that (in Linux) Harbour and xHarbour can not share dbf files ?

Now. It means that POSIX systems do not have EXCLUSIVE mode.
Everything is open in SHARED mode. I added emulation for DENY
flags but it's only emulation and I created two versions for
such emulation. Harbour has both - xHarbour only one.
But if user needs real portability then he has to create code
working in SHARED mode only or sooner or later he will make
sth what breaks POSIX locks semantic, f.e. he open and close
already open file what clears all FCNTL locks set on this
file by the same process using different file handle because
kernel recognize them as pair: PID+INODE and both will be the
same.
I do not have time now for detail POSIX locks description and
what are the differences between DOS/Windows and rest of normal ;-)
world. Few years ago I sent such description to xHarbour.news
and it should be in some archive.
Probably sooner or later someone will add DOS DENY flag emulation
directly to Linux kernels for easier implementation things like SAMBA
server and in such case I'll also add it core code. Maybe it's already
happened - I haven't time to trace kernel modification in last two
years.

best regards,
Przemek
From info at fsgiudice.com  Thu Aug  2 05:33:05 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Thu Aug  2 05:34:24 2007
Subject: [Harbour] Destructor inheritance
References: <20070801221832.GC20620@localhost.localdomain><000901c7d4ce$d3e65e70$b400a8c0@ASUSFSG>
	<20070802085453.GA28548@localhost.localdomain>
Message-ID: <002b01c7d4e8$22728460$b400a8c0@ASUSFSG>


----- Original Message ----- 
From: "Przemyslaw Czerpak" <druzus@priv.onet.pl>
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Sent: Thursday, August 02, 2007 10:54 AM
Subject: Re: [Harbour] Destructor inheritance


>
> Below Is a patch which adds basic support for executing all known
> inherited destructors with a test program. It's not such efficient as
> it should be but before I'll implement final version this one can be
> used.

Thank you very much, I will test

>
>> Two side notes:
>> 1) in sample below obj:classname() did not return correct parent 
>> classname
>>   destroying class MYCLASS I got
>>  "method Destroy() from class: MYCLASS"
>>   destroying class MYCLASS1 I got
>>  "method Destroy() from class: MYCLASS1"
>>  "method Destroy() from class1: MYCLASS1"
>
> It's intentional - please use:
>    ? ::realclass:classname()

Ok

>
> This can be easy implemented inside hbclass.ch. Much easier then in
> xHarbour because in Harbour you can pass unnamed parameters using: ...

ok

> But please remember that it's not classy compatible. In Class(y) class
> function always return 'class object' not instance of given class.

Could you kindly explain the difference ? Do you mean that a class object is 
a subclass of original object instead to be a clean copy ?
If I have understood well the difference, probably is same I did in my 
application.
Instead of create an instance, I "derive" object subclassing base class, so 
I have different objects to which I can add data and methods on fly without 
altering original class.
Is not it ?

Best Regards

Francesco
From dbtopas at dbtopas.lt  Thu Aug  2 06:18:51 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Aug  2 06:18:47 2007
Subject: [Harbour] compile ware message.
In-Reply-To: <6570CA1D-536B-4816-A8DE-E118C68B8503@syenar.hu>
References: <20070802005912.BDFF.SSBBS@mail.zzz.com.tw>	<F766D2C7-CA64-45D9-9F3B-F1B95FBE1C71@syenar.hu>	<20070802085007.C3E5.SSBBS@mail.zzz.com.tw>
	<6570CA1D-536B-4816-A8DE-E118C68B8503@syenar.hu>
Message-ID: <46B1AF8B.50004@dbtopas.lt>

Szak?ts Viktor wrote:
> Oh okey, if this is a MingW main version number, I did
> my tests with the latest one which is 5.1.3 (which
> contains GCC compiler 3.4.2)
> 
> The source code looks fine to me and it's essentially
> unchanged since the first commit.
> 
> Please upgrade MinGW and/or checkout the source to see
> what happens.


Hello,


latest official MinGW release contains GCC 3.4.5, but there are a few 
unofficial builds with a newer GCC version. Ex.,
   http://www.develer.com/oss/GccWinBinaries
   http://nuwen.net/mingw.html
   http://www.tdragon.net/recentgcc/

Just try google: mingw gcc 4.1.2


Regards,
Mindaugas
From druzus at priv.onet.pl  Thu Aug  2 06:26:36 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug  2 06:26:44 2007
Subject: [Harbour] ChangeLog 2007-08-02 12:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070802102636.GA30569@localhost.localdomain>

2007-08-02 12:25 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapifs.h
  * harbour/source/rtl/file.c
    + added xHarbour compatible C function hb_fsIsDirectory()

  * harbour/contrib/libct/color.c
  * harbour/contrib/libct/screen1.c
    + added UNTEXTWIN(), CHARWIN(), COLORWIN(), COLORREPL()
    * changed CLEARWIN(), INVERTWIN() to use common helper functions

  + harbour/contrib/libct/screen2.c
    + added SAYDOWN(), SAYSPREAD(), SAYMOVEIN()

  + harbour/contrib/libct/cursor.c
    + added SAVECURSOR(), RESTCURSOR()

  * harbour/contrib/libct/Makefile
  * harbour/contrib/libct/makefile.bc
  * harbour/contrib/libct/makefile.vc
    * updated for new files

  * harbour/contrib/libct/ctmisc.prg
    ! fixed CSETCURS() when called with non logical parameter

  * harbour/source/vm/classes.c
    + added basic version for executing all known inherited destructors
      final version in the future after some testes

  * harbour/source/codepage/cpsv850.c
  * harbour/source/codepage/cpsk852.c
  * harbour/source/codepage/ucmik.c
  * harbour/source/codepage/cpbgmik.c
  * harbour/source/codepage/cpsvwin.c
  * harbour/source/codepage/cpskiso.c
  * harbour/source/codepage/cpskwin.c
  * harbour/source/codepage/cpsvclip.c
    * removed hardcoded CHR(13)+CHR(10) EOLs

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Aug  2 06:37:45 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Aug  2 06:37:59 2007
Subject: [Harbour] ChangeLog 2007-08-02 12:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070802102636.GA30569@localhost.localdomain>
References: <20070802102636.GA30569@localhost.localdomain>
Message-ID: <9D1E9E82-3F97-4E4C-8FBA-857EC3744BE1@syenar.hu>

Hi Przemek,

>   * harbour/source/codepage/cpsv850.c
>   * harbour/source/codepage/cpsk852.c
>   * harbour/source/codepage/ucmik.c
>   * harbour/source/codepage/cpbgmik.c
>   * harbour/source/codepage/cpsvwin.c
>   * harbour/source/codepage/cpskiso.c
>   * harbour/source/codepage/cpskwin.c
>   * harbour/source/codepage/cpsvclip.c
>     * removed hardcoded CHR(13)+CHR(10) EOLs

What does it mean "hardcoded" EOLs?
How to avoid it next time?

Now I'm getting LF line-ending for these
files, but CRLF for the rest (well mostly,
it's a mixture of LF and CRLF) (under Windows XP).

Brgds,
Viktor

From druzus at priv.onet.pl  Thu Aug  2 07:10:21 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug  2 07:10:27 2007
Subject: [Harbour] ChangeLog 2007-08-02 12:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9D1E9E82-3F97-4E4C-8FBA-857EC3744BE1@syenar.hu>
References: <20070802102636.GA30569@localhost.localdomain>
	<9D1E9E82-3F97-4E4C-8FBA-857EC3744BE1@syenar.hu>
Message-ID: <20070802111021.GA31277@localhost.localdomain>

On Thu, 02 Aug 2007, Szak?ts Viktor wrote:
> >  * harbour/source/codepage/cpsv850.c
> >  * harbour/source/codepage/cpsk852.c
> >  * harbour/source/codepage/ucmik.c
> >  * harbour/source/codepage/cpbgmik.c
> >  * harbour/source/codepage/cpsvwin.c
> >  * harbour/source/codepage/cpskiso.c
> >  * harbour/source/codepage/cpskwin.c
> >  * harbour/source/codepage/cpsvclip.c
> >    * removed hardcoded CHR(13)+CHR(10) EOLs
> What does it mean "hardcoded" EOLs?
> How to avoid it next time?

I thought it was your mistake in moving files between systems but ...

> Now I'm getting LF line-ending for these
> files, but CRLF for the rest (well mostly,
> it's a mixture of LF and CRLF) (under Windows XP).

above suggests that you committed them as binary files without
svn:eol-style property set to 'native'. I've just check and
it seems that this property is not set by default for text files
and we will have to set it for all files we added to SVN after
conversion from CVS.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Aug  2 07:28:49 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Aug  2 07:29:00 2007
Subject: [Harbour] compile ware message.
In-Reply-To: <46B1AF8B.50004@dbtopas.lt>
References: <20070802005912.BDFF.SSBBS@mail.zzz.com.tw>	<F766D2C7-CA64-45D9-9F3B-F1B95FBE1C71@syenar.hu>	<20070802085007.C3E5.SSBBS@mail.zzz.com.tw>
	<6570CA1D-536B-4816-A8DE-E118C68B8503@syenar.hu>
	<46B1AF8B.50004@dbtopas.lt>
Message-ID: <9CFAA73C-B32B-402E-83DA-9BF7C82511D9@syenar.hu>

Thanks for the pointers Mindaugas.

I did a test with MinGW / GCC 4.1.2 and these were the errors I got:

contrib/libct:
../../keyset.c: In function 'SetGet':
../../keyset.c:131: warning: case label value exceeds maximum value  
for type

contrib/ole2:
../../w32ole.c: In function 'hb_oleItemToVariant':
../../w32ole.c:402: warning: dereferencing type-punned pointer will  
break strict-aliasing rules
../../w32ole.c:418: warning: dereferencing type-punned pointer will  
break strict-aliasing rules
../../w32ole.c:446: warning: dereferencing type-punned pointer will  
break strict-aliasing rules
../../w32ole.c:460: warning: dereferencing type-punned pointer will  
break strict-aliasing rules
../../w32ole.c:541: warning: dereferencing type-punned pointer will  
break strict-aliasing rules
../../w32ole.c:542: warning: dereferencing type-punned pointer will  
break strict-aliasing rules
../../w32ole.c:585: warning: dereferencing type-punned pointer will  
break strict-aliasing rules
../../w32ole.c:586: warning: dereferencing type-punned pointer will  
break strict-aliasing rules
../../w32ole.c:629: warning: dereferencing type-punned pointer will  
break strict-aliasing rules
../../w32ole.c:630: warning: dereferencing type-punned pointer will  
break strict-aliasing rules
../../w32ole.c:666: warning: dereferencing type-punned pointer will  
break strict-aliasing rules
../../w32ole.c:667: warning: dereferencing type-punned pointer will  
break strict-aliasing rules

Brgds,
Viktor

On 2007.08.02., at 12:18, Mindaugas Kavaliauskas wrote:

> Szak?ts Viktor wrote:
>> Oh okey, if this is a MingW main version number, I did
>> my tests with the latest one which is 5.1.3 (which
>> contains GCC compiler 3.4.2)
>> The source code looks fine to me and it's essentially
>> unchanged since the first commit.
>> Please upgrade MinGW and/or checkout the source to see
>> what happens.
>
>
> Hello,
>
>
> latest official MinGW release contains GCC 3.4.5, but there are a  
> few unofficial builds with a newer GCC version. Ex.,
>   http://www.develer.com/oss/GccWinBinaries
>   http://nuwen.net/mingw.html
>   http://www.tdragon.net/recentgcc/
>
> Just try google: mingw gcc 4.1.2
>
>
> Regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Aug  2 07:39:29 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Aug  2 07:39:42 2007
Subject: [Harbour] ChangeLog 2007-08-02 12:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070802111021.GA31277@localhost.localdomain>
References: <20070802102636.GA30569@localhost.localdomain>
	<9D1E9E82-3F97-4E4C-8FBA-857EC3744BE1@syenar.hu>
	<20070802111021.GA31277@localhost.localdomain>
Message-ID: <D839340E-0798-4B13-9CE5-007F1DAA3830@syenar.hu>

On 2007.08.02., at 13:10, Przemyslaw Czerpak wrote:

> On Thu, 02 Aug 2007, Szak?ts Viktor wrote:
>>>  * harbour/source/codepage/cpsv850.c
>>>  * harbour/source/codepage/cpsk852.c
>>>  * harbour/source/codepage/ucmik.c
>>>  * harbour/source/codepage/cpbgmik.c
>>>  * harbour/source/codepage/cpsvwin.c
>>>  * harbour/source/codepage/cpskiso.c
>>>  * harbour/source/codepage/cpskwin.c
>>>  * harbour/source/codepage/cpsvclip.c
>>>    * removed hardcoded CHR(13)+CHR(10) EOLs
>> What does it mean "hardcoded" EOLs?
>> How to avoid it next time?
>
> I thought it was your mistake in moving files between systems but ...
>
>> Now I'm getting LF line-ending for these
>> files, but CRLF for the rest (well mostly,
>> it's a mixture of LF and CRLF) (under Windows XP).
>
> above suggests that you committed them as binary files without
> svn:eol-style property set to 'native'. I've just check and

Yes, I was using my XP machine only.

> it seems that this property is not set by default for text files
> and we will have to set it for all files we added to SVN after
> conversion from CVS.

If we have a collection of default settings we want, we
might (I guess) ask the sf.net admins to change the defaults
on the repository (server-side).

So far we have these:

svnserve.conf:
[miscellany]
enable-auto-props = yes

[auto-props]
*.* = svn:keywords=Id
*.* = svn:eol-style=native

Notice that everyone of us developers can set these defaults
as a local (client-side) configuration in ~/.subversion/config

Here's the recommended config for Apache developers:
http://www.apache.org/dev/svn-eol-style.txt

I'll gather the extensions we use, so that we can refine.

Brgds,
Viktor

From niki at synel.co.il  Thu Aug  2 07:59:36 2007
From: niki at synel.co.il (Chen Kedem)
Date: Thu Aug  2 07:57:56 2007
Subject: [Harbour] ChangeLog 2007-08-02 12:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <46B1C728.441A@synel.co.il>

Victor,

> [auto-props]
> *.* = svn:keywords=Id
> *.* = svn:eol-style=native

The settings for all files converted from CVS is:

svn:eol-style=native
svn:keywords=Author Date Id Revision

In the source/lang/msg*.c files we use $Revision and $Date,
I don't think we use the $Author one.


  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From harbour.01 at syenar.hu  Thu Aug  2 08:12:34 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Aug  2 08:12:46 2007
Subject: [Harbour] ChangeLog 2007-08-02 12:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <46B1C728.441A@synel.co.il>
References: <46B1C728.441A@synel.co.il>
Message-ID: <779C8C7F-E0ED-478A-8FDC-A610CFD0AAD0@syenar.hu>

Hi Chen,

You're right, but this only applies to the files imported
from the CVS repository and not for the files being added
afterwards to SVN. In order to make these as defaults for
new files, the file conf/svnserve.conf needs to be updated
on the SVN server. This file is not visible for SVN clients,
and it's not part of the initial dump either.

(BTW with some other files in this file-area, we could also
setup the SVN server to send an e-mail to the list whenever
a commit is done.)

At least that's what I could figure.

Brgds,
Viktor

On 2007.08.02., at 13:59, Chen Kedem wrote:

> Victor,
>
>> [auto-props]
>> *.* = svn:keywords=Id
>> *.* = svn:eol-style=native
>
> The settings for all files converted from CVS is:
>
> svn:eol-style=native
> svn:keywords=Author Date Id Revision
>
> In the source/lang/msg*.c files we use $Revision and $Date,
> I don't think we use the $Author one.
>
>
>   Chen.
> ********************************************************************** 
> ************************
> IMPORTANT: The contents of this email and any attachments are  
> confidential. They are intended for the
> named recipient(s) only.
> If you have received this email in error, please notify the system  
> manager or the sender immediately and do
> not disclose the contents to anyone or make copies thereof.
> *** eSafe scanned this email for viruses, vandals, and malicious  
> content. ***
> ********************************************************************** 
> ************************
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From niki at synel.co.il  Thu Aug  2 08:25:13 2007
From: niki at synel.co.il (Chen Kedem)
Date: Thu Aug  2 08:23:49 2007
Subject: [Harbour] ChangeLog 2007-08-02 12:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
References: <46B1C728.441A@synel.co.il>
Message-ID: <46B1CD29.3343@synel.co.il>

Victor,

> (BTW with some other files in this file-area, we could also
> setup the SVN server to send an e-mail to the list whenever
> a commit is done.)

We had this options activated 3 years ago by lazaridis, it just
sent raw posts to the list. we disabled it and kick lazaridis
from this project (I think it wa the only user ever to achive
this status). I don't think its a good idea, users here do post
regularry when doing changes. By posting manually you can batch
together two or more commits you did in a very short period.

  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From harbour.01 at syenar.hu  Thu Aug  2 08:37:29 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Aug  2 08:37:43 2007
Subject: [Harbour] ChangeLog 2007-08-02 12:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <46B1CD29.3343@synel.co.il>
References: <46B1C728.441A@synel.co.il> <46B1CD29.3343@synel.co.il>
Message-ID: <E962AB2E-7785-4BE6-A137-389799DB273C@syenar.hu>

Oh yes, I remember him.

The feature itself is not evil, but I'd definitely
put it under heavy examination locally before even
proposing such thing. The only thing I noticed is
the feature seems to be a bit more mature in SVN
than it was in CVS, but again I've never tried it
and I didn't mean to recommend it :)

Brgds,
Viktor

On 2007.08.02., at 14:25, Chen Kedem wrote:

> Victor,
>
>> (BTW with some other files in this file-area, we could also
>> setup the SVN server to send an e-mail to the list whenever
>> a commit is done.)
>
> We had this options activated 3 years ago by lazaridis, it just
> sent raw posts to the list. we disabled it and kick lazaridis
> from this project (I think it wa the only user ever to achive
> this status). I don't think its a good idea, users here do post
> regularry when doing changes. By posting manually you can batch
> together two or more commits you did in a very short period.
>
>   Chen.
> ********************************************************************** 
> ************************
> IMPORTANT: The contents of this email and any attachments are  
> confidential. They are intended for the
> named recipient(s) only.
> If you have received this email in error, please notify the system  
> manager or the sender immediately and do
> not disclose the contents to anyone or make copies thereof.
> *** eSafe scanned this email for viruses, vandals, and malicious  
> content. ***
> ********************************************************************** 
> ************************
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From rao at obuhov.net  Thu Aug  2 08:40:32 2007
From: rao at obuhov.net (rao)
Date: Thu Aug  2 08:40:45 2007
Subject: [Harbour] Error while building tip.lib
Message-ID: <46B1D0C0.3070308@obuhov.net>


    ..\..\bin\b32\harbour.exe url.prg -q0 -w -es2 -gc0 -n 
-i..\..\include -o..\..\obj\b32\url.c

url.prg(172) Error E0041  Bound error: 'Numeric'

url.prg(192) Error E0041  Bound error: 'Numeric'

url.prg(219) Error E0041  Bound error: 'Numeric'

3 errors

No code generated

** error 1 ** deleting ..\..\obj\b32\url.c

Regards,
Alexey Myronenko
From philb at philb.us  Thu Aug  2 08:44:02 2007
From: philb at philb.us (Phil Barnett)
Date: Thu Aug  2 08:47:10 2007
Subject: [Harbour] ChangeLog 2007-08-02 12:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <E962AB2E-7785-4BE6-A137-389799DB273C@syenar.hu>
References: <46B1C728.441A@synel.co.il> <46B1CD29.3343@synel.co.il>
	<E962AB2E-7785-4BE6-A137-389799DB273C@syenar.hu>
Message-ID: <200708020844.02764.philb@philb.us>

On Thursday 02 August 2007, Szak?ts Viktor wrote:

> The feature itself is not evil, but I'd definitely
> put it under heavy examination locally before even
> proposing such thing. The only thing I noticed is
> the feature seems to be a bit more mature in SVN
> than it was in CVS, but again I've never tried it
> and I didn't mean to recommend it

If this feature is re-implemented, I think it should email to it's own mailing 
list. I can make a mailing list in a few minutes. That was the biggest 
problem last time, it mailed to the dev list.

Speaking of mailing lists, do we want to revive the harbour-users or 
harbour-talk mailing lists? They never had much traffic and I'd suggest or 
the other, but not both.

Harbour List opinions?

-- 
Phil Barnett
AI4OF
SKCC #600
From lorenzo.fiorini at gmail.com  Thu Aug  2 08:50:48 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Aug  2 08:50:51 2007
Subject: [Harbour] Error while building tip.lib
In-Reply-To: <46B1D0C0.3070308@obuhov.net>
References: <46B1D0C0.3070308@obuhov.net>
Message-ID: <9257026e0708020550u1c2a8f46u3b5a354a824dd6c@mail.gmail.com>

On 8/2/07, rao <rao@obuhov.net> wrote:
>
>     ..\..\bin\b32\harbour.exe url.prg -q0 -w -es2 -gc0 -n
> -i..\..\include -o..\..\obj\b32\url.c
>
> url.prg(172) Error E0041  Bound error: 'Numeric'

AFAIK Tip can only be built using -DHB_COMPAT_XHB

best regards,
Lorenzo
From harbour.01 at syenar.hu  Thu Aug  2 09:24:38 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Aug  2 09:24:51 2007
Subject: [Harbour] ChangeLog 2007-08-02 12:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <D839340E-0798-4B13-9CE5-007F1DAA3830@syenar.hu>
References: <20070802102636.GA30569@localhost.localdomain>
	<9D1E9E82-3F97-4E4C-8FBA-857EC3744BE1@syenar.hu>
	<20070802111021.GA31277@localhost.localdomain>
	<D839340E-0798-4B13-9CE5-007F1DAA3830@syenar.hu>
Message-ID: <204C7B38-92CC-4678-ADE7-717CB45B9CA2@syenar.hu>

> [miscellany]
> enable-auto-props = yes
>
> [auto-props]
> *.* = svn:keywords=Id
> *.* = svn:eol-style=native

After getting a list of extensions (and their ratio)
I think we can safely set all files to "native" eol
style by default. The few binary files will need to
be explicitly set as such (just like before).

text:
*.           322
*.0??          1
*.1            6
*.api          9
*.bat         16
*.bc           1
*.c          416
*.cf          59
*.cfg          1
*.cfm          1
*.ch          55
*.cmd          4
*.def          1
*.gc           1
*.h           61
*.hs           4
*.htm          1
*.ini          3
*.l            2
*.lnk          1
*.mak          1
*.prg        150
*.rsp          1
*.sfc          1
*.sh          13
*.spec         1
*.txt        156
*.vc           1
*.y            2
*.yyc          2
*.yyh          2

binary:
*.frm          1
*.lbl          1
*.dbf          1

(the stats don't include contrib, which has a few one-time
extra binary and text extensions.)

Brgds,
Viktor

From druzus at priv.onet.pl  Thu Aug  2 10:10:19 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug  2 10:10:26 2007
Subject: [Harbour] compile ware message.
In-Reply-To: <9CFAA73C-B32B-402E-83DA-9BF7C82511D9@syenar.hu>
References: <20070802005912.BDFF.SSBBS@mail.zzz.com.tw>
	<F766D2C7-CA64-45D9-9F3B-F1B95FBE1C71@syenar.hu>
	<20070802085007.C3E5.SSBBS@mail.zzz.com.tw>
	<6570CA1D-536B-4816-A8DE-E118C68B8503@syenar.hu>
	<46B1AF8B.50004@dbtopas.lt>
	<9CFAA73C-B32B-402E-83DA-9BF7C82511D9@syenar.hu>
Message-ID: <20070802141019.GA5810@localhost.localdomain>

On Thu, 02 Aug 2007, Szak?ts Viktor wrote:
> contrib/libct:
> ../../keyset.c: In function 'SetGet':
> ../../keyset.c:131: warning: case label value exceeds maximum value  
> for type

Should be cleaned and I'll do that in next commit.

> contrib/ole2:
> ../../w32ole.c: In function 'hb_oleItemToVariant':
> ../../w32ole.c:402: warning: dereferencing type-punned pointer will  
> break strict-aliasing rules
> ../../w32ole.c:418: warning: dereferencing type-punned pointer will  
> break strict-aliasing rules
> ../../w32ole.c:446: warning: dereferencing type-punned pointer will  
> break strict-aliasing rules
> ../../w32ole.c:460: warning: dereferencing type-punned pointer will  
> break strict-aliasing rules
> ../../w32ole.c:541: warning: dereferencing type-punned pointer will  
> break strict-aliasing rules
> ../../w32ole.c:542: warning: dereferencing type-punned pointer will  
> break strict-aliasing rules
> ../../w32ole.c:585: warning: dereferencing type-punned pointer will  
> break strict-aliasing rules
> ../../w32ole.c:586: warning: dereferencing type-punned pointer will  
> break strict-aliasing rules
> ../../w32ole.c:629: warning: dereferencing type-punned pointer will  
> break strict-aliasing rules
> ../../w32ole.c:630: warning: dereferencing type-punned pointer will  
> break strict-aliasing rules
> ../../w32ole.c:666: warning: dereferencing type-punned pointer will  
> break strict-aliasing rules
> ../../w32ole.c:667: warning: dereferencing type-punned pointer will  
> break strict-aliasing rules

All of the above lines are hacks with direct access to HB_ITEM
internals or some casting which may cause really unpredictable
results with different alignment and/or pointer size. This code
has to be rewritten but as I said few months ago I cannot help
here and it should be done by Windows developers. It's nice that
new GCC begins to warn in such situations - it should help in
keeping code clean and it means that optimizations using
strict-aliasing is used in more places so we can expect faster
code.

best regards,
Przemek

BTW We do not have any nested /* comments in cpcskam.c or any other
    file in codepage directory so the message which started this
    thread was for some locally modified files not for sth what we
    have in SVN repository. This warning exists in GCC for very long
    time, for sure it was present in GCC 2.X so it was not necessary
    to make GCC upgrade to replicate it. It shows <line>:<column> where
    internal /* is detected so this place can be easy found with any
    editor which shows lines and columns numbers.
From druzus at priv.onet.pl  Thu Aug  2 11:24:56 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug  2 11:25:02 2007
Subject: [Harbour] Possible typo in source/vm/classes.c
In-Reply-To: <20070731185428.GC24789@localhost.localdomain>
References: <46AF514B.4040909@gmail.com>
	<20070731161058.GA24088@localhost.localdomain>
	<46AF61FF.1030002@gmail.com>
	<20070731185428.GC24789@localhost.localdomain>
Message-ID: <20070802152456.GB5810@localhost.localdomain>

I'm not receiving all messages from Harbour list to my mail box.
I've just seen your message at:
    http://lists.harbour-project.org/pipermail/harbour/
so I'll answer but it's possible to I lost some messages recently
and I haven't answered so far.


:Lost lostmyhearttoher at gmail.com Tue Jul 31 16:10:41 EDT 2007:
> I understand then that alternative implementations of the OO engine
> could be used.

Yes.

> Are there any such alternatives

AFAIK so far not but the doors are open. F.e. some 3-rd party libraries
developers can create such alternative implementation or maybe we will
want to make it for some strict compatibility with other languages or
libraries.

> Here I can help a little, I guess. Let me reach for the (somewhat terse
> ;)) documentation we wrote for Class(y) ages ago, and I'll post it here.

Thank you very much - all documentation can help.

BTW in tests directory you may find some test programs which presents
    some OO engine behavior:
    clsicast.prg - tests instance variables casting and allocating
                   in multiinherited classes. Class(y) like most of
                   other dynamic OOP systems does not pass this test.
    clsscast.prg - tests shared class variables casting and allocating
                   in multiinherited classes
    clsccast.prg - tests class variables casting and allocating in
                   multiinherited classes
    clsnv.prg - tests non virtual hidden messages - it means that we have
                real encapsulation, and real private instance area not
                effected by child classes
    clsscope.prg - tests class method scoping, please note that we have
                   real codeblock scoping which is bound with the real
                   codeblock location in the source code. Also casting
                   and supercasting in Harbour is now bound with HVM
                   stack (I removed the code which attched to object
                   list with super casting information because such
                   implementation was wrong by definition
    destruct.prg - which shows destructor usage and interaction between
                   desttucors and HVM/GC. Please note that Harbour's HVM
                   is safe for mistakes in destructors and freeing by GC
                   many objects with destructors and corss references.

xHarbour does not pass any of the above tests so I suggest xHarbour
developers to use this small programs to improve xHarbour OO engine.
In some tests like clsscope.prg it will be necessary to devide single
.prg file into few ones (each with different class) because in xHarbour
symbol table is used in object scoping so scopes cannot work if code
is defined in single .prg module - every thing has the same scope - but
even after such modifications non of the above tests works as it should.

In Harbour programmer can enable similar to xHarbour scope behavior for
each class separately if he'll add MODULE FRIENDLY in CLASS definition,
f.e.:
   CLASS myClass FROM mySuperCls1, mySuperCls2 MODULE FRIENDLY
     ...
   END

It's also possible to use:
   FRIEND CLASS <clasName,...>

and:
   FRIEND FUNCTION <funcName,...>

to define friend classes and functions.

best regards,
Przemek
From druzus at priv.onet.pl  Thu Aug  2 11:46:42 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug  2 11:46:48 2007
Subject: [Harbour] ChangeLog 2007-08-02 17:45 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070802154642.GA6848@localhost.localdomain>

2007-08-02 17:45 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/libct/keyset.c
    * cleaned warning

  * harbour/bldcmncf.sh
  * harbour/debian/control
  * harbour/debian/harbour.cfg
  * harbour/debian/harbour.1
  * harbour/debian/dirs
  * harbour/debian/rules.cf
  * harbour/debian/compat
  * harbour/debian/hbmake.1
  * harbour/debian/changelog
  * harbour/debian/copyright
  * harbour/debian/hbtest.1
  * harbour/debian/hbpp.1
  * harbour/debian/hbrun.1
  * harbour/debian/hbdoc.1
  * harbour/make_deb.sh
  * harbour/tests/foreach2.prg
  * harbour/tests/gtchars.prg
  * harbour/tests/gtcolors.prg
  * harbour/tests/gtkeys.prg
  * harbour/make_gcc.sh
  * harbour/doc/howtosvn.txt
  * harbour/makefile.gc
  * harbour/contrib/tip/thtml.prg
  * harbour/contrib/tip/thtml.ch
  * harbour/contrib/libct/screen2.c
  * harbour/contrib/libct/dbftools.c
  * harbour/contrib/libct/ctdisk.ch
  * harbour/contrib/libct/maxline.c
  * harbour/contrib/libct/video.c
  * harbour/contrib/libct/dattime3.c
  * harbour/contrib/libct/lton.c
  * harbour/contrib/libct/cursor.c
  * harbour/contrib/libct/misc2.c
  * harbour/contrib/libct/color.c
  * harbour/contrib/libct/cttime.prg
  * harbour/contrib/libct/ctvideo.ch
  * harbour/contrib/libct/numcount.c
  * harbour/contrib/libct/pack.c
  * harbour/contrib/libct/setlast.c
  * harbour/contrib/libct/like.c
  * harbour/contrib/libct/disk.c
  * harbour/contrib/libct/ctstrfil.c
  * harbour/contrib/libct/ctstrfil.h
  * harbour/contrib/libct/numline.c
  * harbour/contrib/libct/dattime2.c
  * harbour/contrib/libct/misc3.c
  * harbour/contrib/libct/ctpad.c
  * harbour/contrib/libct/datetime.c
  * harbour/contrib/libct/blank.prg
  * harbour/source/rtl/gtchrmap.c
  * harbour/source/rtl/gttrm/Makefile
  * harbour/source/rtl/gttrm/gttrm.c
  * harbour/source/rtl/hbhex.c
  * harbour/source/rtl/hbbit.c
  * harbour/source/codepage/cpsv850.c
  * harbour/source/codepage/cpsk852.c
  * harbour/source/codepage/ucmik.c
  * harbour/source/codepage/cpbgmik.c
  * harbour/source/codepage/cpsvwin.c
  * harbour/source/codepage/cpskiso.c
  * harbour/source/codepage/cpskwin.c
  * harbour/source/codepage/cpsvclip.c
  * harbour/source/codepage/cpskkam.c
  * harbour/config/w32/owatcom.cf
    + set svn:eol-style property to native
    + add some missing svn:keywords Id property

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Aug  2 11:58:57 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Aug  2 11:58:58 2007
Subject: [Harbour] CHANGELOG: 2007-08-02 17:57 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7d51e$Blat.v2.6.1$08a73c02$c90e357872a@127.0.0.1>

2007-08-02 17:57 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * include/hbfixdj.h
     ! Added blank copyright header.

   * include/hbpers.ch
     ! Added EOL to last line. (GCC 4.1.2 is very picky on that)

From harbour.01 at syenar.hu  Thu Aug  2 12:10:02 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Thu Aug  2 12:10:06 2007
Subject: [Harbour] CHANGELOG: 2007-08-02 18:03 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7d51f$Blat.v2.6.1$953118d6$8b4983ffdfe@127.0.0.1>

2007-08-02 18:03 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * harbour/contrib/libct/keyset.c
     ! Fixed gcc 4.1.2 warning in SetGet() (Win32 branch).

From druzus at priv.onet.pl  Thu Aug  2 22:10:10 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug  2 22:10:16 2007
Subject: [Harbour] ChangeLog 2007-08-03 04:05 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070803021009.GA17517@localhost.localdomain>

2007-08-03 04:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/libct/screen2.c
    + added SCREENSTR(), STRSCREEN()

  * harbour/contrib/libct/keyset.c
    * casting to fix warnings in DOS builds

  * harbour/source/rtl/seconds.c
    * update timezone in BSD systems when clock is stored in UTC

best regards,
Przemek
From druzus at priv.onet.pl  Thu Aug  2 22:22:20 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug  2 22:22:25 2007
Subject: [Harbour] ChangeLog 2007-08-02 12:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <D839340E-0798-4B13-9CE5-007F1DAA3830@syenar.hu>
References: <20070802102636.GA30569@localhost.localdomain>
	<9D1E9E82-3F97-4E4C-8FBA-857EC3744BE1@syenar.hu>
	<20070802111021.GA31277@localhost.localdomain>
	<D839340E-0798-4B13-9CE5-007F1DAA3830@syenar.hu>
Message-ID: <20070803022220.GB17517@localhost.localdomain>

On Thu, 02 Aug 2007, Szak?ts Viktor wrote:
> svnserve.conf:
> [miscellany]
> enable-auto-props = yes
> 
> [auto-props]
> *.* = svn:keywords=Id
> *.* = svn:eol-style=native
> 
> Notice that everyone of us developers can set these defaults
> as a local (client-side) configuration in ~/.subversion/config

I've just set it in my local configuration (thanks for hint) though
I think that we can add some settings for well knows file types like:
    *.[ch], *.prg, *.c[fh], *.api, [Mm]akefile*, ChangeLog*
but for files like *.bat I'd like to force CRLF EOLs - it will help
me in using my Linux svn repository copy in DOSEMU without any file
conversions.

best regards,
Przemek
From dmacias at mail.udg.mx  Fri Aug  3 07:08:48 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Aug  3 07:08:52 2007
Subject: [Harbour] hbextern.ch
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <46B30CC0.1080209@mail.udg.mx>

Viktor:

I have programs which use:

#ifdef HARBOUR
  #include "hbextern.ch"
#endif

but runtime errors and preprocessor output show that some sections of 
hbextern.ch are not included, for example:

------------------
#ifdef HB_COMPAT_XPP

EXTERNAL BIN2U
EXTERNAL CONVTOANSICP
EXTERNAL CONVTOOEMCP
EXTERNAL CURDRIVE
EXTERNAL DBSKIPPER
EXTERNAL NUMBUTTONS
EXTERNAL SETMOUSE
EXTERNAL STOD
EXTERNAL U2BIN
EXTERNAL W2BIN
EXTERNAL ORDWILDSEEK

#endif /* HB_COMPAT_XPP */

/* Harbour extensions */

#ifdef HB_EXTENSION

...
------------------


I saw hbextern.ch does not include hbsetup.ch, so these "#define" are 
not set


Browsing SVN I found:

----------------------------------------
Revision 7155 - (download) (annotate)
Sat Apr 14 10:41:54 2007 UTC (3 months, 2 weeks ago) by vszakats
File size: 17248 byte(s)

2007-04-14 12:40 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
    * harbour/include/hbstdgen.ch
    * harbour/include/box.ch
    * harbour/include/hbclass.ch
    * harbour/include/hbcommon.ch
    * harbour/include/hbextern.ch
    * harbour/include/hbgetcmt.ch
    * harbour/include/hbsetup.ch
    * harbour/include/ord.ch
    * harbour/source/rdd/dbdelim.prg
    * harbour/source/rdd/dbfuncs.prg
    * harbour/source/rdd/dbjoin.prg
    * harbour/source/rdd/dblist.prg
    * harbour/source/rdd/dbsort.prg
    * harbour/source/rdd/dbstrux.prg
    * harbour/source/rdd/dbtotal.prg
    * harbour/source/rdd/dbupdat.prg
    * harbour/source/rdd/rddord.prg
    * harbour/source/rtl/alert.prg
    * harbour/source/rtl/browdb.prg
    * harbour/source/rtl/browdbx.prg
    * harbour/source/rtl/checkbox.prg
    * harbour/source/rtl/dircmd.prg
    * harbour/source/rtl/getsys.prg
    * harbour/source/rtl/input.prg
    * harbour/source/rtl/mssgline.prg
    * harbour/source/rtl/pushbtn.prg
    * harbour/source/rtl/radiobtn.prg
    * harbour/source/rtl/radiogrp.prg
    * harbour/source/rtl/setfunc.prg
    * harbour/source/rtl/setta.prg
    * harbour/source/rtl/tbcolumn.prg
    * harbour/source/rtl/tget.prg
    * harbour/source/rtl/tgetint.prg
    * harbour/source/rtl/tmenuitm.prg
    * harbour/source/rtl/tpopup.prg
    * harbour/source/rtl/ttopbar.prg
    * harbour/source/rtl/typefile.prg
    * harbour/source/vm/harbinit.prg
    * harbour/utils/hbrun/external.prg
    * harbour/utils/hbtest/rt_main.ch
      + Following #defines are now available by default without
        the need to #include "hbsetup.ch". These are of course
        also available for applications as defined at Harbour
        build time:
        HB_EXTENSION
        HB_C52_UNDOC
        HB_C52_STRICT
        HB_COMPAT_C53
        HB_COMPAT_XPP
        HB_COMPAT_VO
        HB_COMPAT_FLAGSHIP
        HB_COMPAT_FOXPRO
        HB_COMPAT_DBASE
        HB_COMPAT_CLIP
        HB_COMPAT_XHB
        HB_SHORTNAMES
        HB_FILE_VER_STATIC
----------------------------------------


How can this be solved ?


David Macias




From harbour.01 at syenar.hu  Fri Aug  3 07:18:48 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Aug  3 07:18:57 2007
Subject: [Harbour] hbextern.ch
In-Reply-To: <46B30CC0.1080209@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<46B30CC0.1080209@mail.udg.mx>
Message-ID: <B9846E21-3A9B-4B4E-B1CE-9C3609C864E1@syenar.hu>

Hi David,

If you're using Harbour newer than 2007-04-14 12:40 UTC+0100
(the exact commit you mention), HB_COMPAT_XPP will automatically
be #defined (there is not need to explicitly include hbsetup.ch").
If you're using an older one though, you'll have to add #include
"hbsetup.ch" before #including "hbextern.ch".

(Note that HB_COMPAT_XPP will be automatically defined only if
it was defined at Harbour build time - in hbsetup.ch -, but this
is the default so you probably don't have to worry about it.)

Brgds,
Viktor

On 2007.08.03., at 13:08, David Arturo Macias Corona wrote:

> Viktor:
>
> I have programs which use:
>
> #ifdef HARBOUR
>  #include "hbextern.ch"
> #endif
>
> but runtime errors and preprocessor output show that some sections  
> of hbextern.ch are not included, for example:
>
> ------------------
> #ifdef HB_COMPAT_XPP
>
> EXTERNAL BIN2U
> EXTERNAL CONVTOANSICP
> EXTERNAL CONVTOOEMCP
> EXTERNAL CURDRIVE
> EXTERNAL DBSKIPPER
> EXTERNAL NUMBUTTONS
> EXTERNAL SETMOUSE
> EXTERNAL STOD
> EXTERNAL U2BIN
> EXTERNAL W2BIN
> EXTERNAL ORDWILDSEEK
>
> #endif /* HB_COMPAT_XPP */
>
> /* Harbour extensions */
>
> #ifdef HB_EXTENSION
>
> ...
> ------------------
>
>
> I saw hbextern.ch does not include hbsetup.ch, so these "#define"  
> are not set
>
>
> Browsing SVN I found:
>
> ----------------------------------------
> Revision 7155 - (download) (annotate)
> Sat Apr 14 10:41:54 2007 UTC (3 months, 2 weeks ago) by vszakats
> File size: 17248 byte(s)
>
> 2007-04-14 12:40 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>    * harbour/include/hbstdgen.ch
>    * harbour/include/box.ch
>    * harbour/include/hbclass.ch
>    * harbour/include/hbcommon.ch
>    * harbour/include/hbextern.ch
>    * harbour/include/hbgetcmt.ch
>    * harbour/include/hbsetup.ch
>    * harbour/include/ord.ch
>    * harbour/source/rdd/dbdelim.prg
>    * harbour/source/rdd/dbfuncs.prg
>    * harbour/source/rdd/dbjoin.prg
>    * harbour/source/rdd/dblist.prg
>    * harbour/source/rdd/dbsort.prg
>    * harbour/source/rdd/dbstrux.prg
>    * harbour/source/rdd/dbtotal.prg
>    * harbour/source/rdd/dbupdat.prg
>    * harbour/source/rdd/rddord.prg
>    * harbour/source/rtl/alert.prg
>    * harbour/source/rtl/browdb.prg
>    * harbour/source/rtl/browdbx.prg
>    * harbour/source/rtl/checkbox.prg
>    * harbour/source/rtl/dircmd.prg
>    * harbour/source/rtl/getsys.prg
>    * harbour/source/rtl/input.prg
>    * harbour/source/rtl/mssgline.prg
>    * harbour/source/rtl/pushbtn.prg
>    * harbour/source/rtl/radiobtn.prg
>    * harbour/source/rtl/radiogrp.prg
>    * harbour/source/rtl/setfunc.prg
>    * harbour/source/rtl/setta.prg
>    * harbour/source/rtl/tbcolumn.prg
>    * harbour/source/rtl/tget.prg
>    * harbour/source/rtl/tgetint.prg
>    * harbour/source/rtl/tmenuitm.prg
>    * harbour/source/rtl/tpopup.prg
>    * harbour/source/rtl/ttopbar.prg
>    * harbour/source/rtl/typefile.prg
>    * harbour/source/vm/harbinit.prg
>    * harbour/utils/hbrun/external.prg
>    * harbour/utils/hbtest/rt_main.ch
>      + Following #defines are now available by default without
>        the need to #include "hbsetup.ch". These are of course
>        also available for applications as defined at Harbour
>        build time:
>        HB_EXTENSION
>        HB_C52_UNDOC
>        HB_C52_STRICT
>        HB_COMPAT_C53
>        HB_COMPAT_XPP
>        HB_COMPAT_VO
>        HB_COMPAT_FLAGSHIP
>        HB_COMPAT_FOXPRO
>        HB_COMPAT_DBASE
>        HB_COMPAT_CLIP
>        HB_COMPAT_XHB
>        HB_SHORTNAMES
>        HB_FILE_VER_STATIC
> ----------------------------------------
>
>
> How can this be solved ?
>
>
> David Macias
>
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Fri Aug  3 07:30:49 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Aug  3 07:30:55 2007
Subject: [Harbour] ChangeLog 2007-08-03 13:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070803113049.GA17291@localhost.localdomain>

2007-08-03 13:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/libct/ctwin.c
    * added protection against overwriting right and bottom WBOX border
      directly inside GTCTW so now other screen functions does not have
      to check maximum window coordinates. Please remeber that CTWIN from
      CT3 has a bug which allows to damage top and left border which I
      partialy replicated because peope used it to set window title.

best regards,
Przemek
From dmacias at mail.udg.mx  Fri Aug  3 07:50:16 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Aug  3 07:50:20 2007
Subject: [Harbour] Re: hbextern.ch
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <46B31678.7010303@mail.udg.mx>

 > Hi David,

 > If you're using Harbour newer than 2007-04-14 12:40 UTC+0100
 > (the exact commit you mention), HB_COMPAT_XPP will automatically
 > be #defined (there is not need to explicitly include hbsetup.ch").
 > If you're using an older one though, you'll have to add #include
 > "hbsetup.ch" before #including "hbextern.ch".

 > (Note that HB_COMPAT_XPP will be automatically defined only if
 > it was defined at Harbour build time - in hbsetup.ch -, but this
 > is the default so you probably don't have to worry about it.)

OK. I am using Harbour beta 3 (mid June 2007)

Testing I found error happen if I use my own std.ch with -u switch, and 
not happen without this option

For example:
//test.prg
FUNC main
#include "hbextern.ch"
return nil

and newstd.ch file (just these two lines):
//newstd.ch
#include "set.ch"

and compile
harbour test -p -unewstd.ch

You can see in test.ppo missing of sections which belongs to #defines

Test again without -unewstd.ch


David Macias


From harbour.01 at syenar.hu  Fri Aug  3 07:54:47 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Aug  3 07:54:56 2007
Subject: [Harbour] Re: hbextern.ch
In-Reply-To: <46B31678.7010303@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<46B31678.7010303@mail.udg.mx>
Message-ID: <417EB11E-37D2-49D7-A49E-1114F252DA30@syenar.hu>

You're right, regardless of the Harbour version, if you
use your custom std.ch this will override the built-in one,
along with everything in it, including the build-time
HB_COMPAT_* #defines.

The easiest way to solve this is to #include "hbsetup.ch"
in your "std.ch" guarded with #ifdef __HARBOUR__.

Brgds,
Viktor

On 2007.08.03., at 13:50, David Arturo Macias Corona wrote:

> > Hi David,
>
> > If you're using Harbour newer than 2007-04-14 12:40 UTC+0100
> > (the exact commit you mention), HB_COMPAT_XPP will automatically
> > be #defined (there is not need to explicitly include hbsetup.ch").
> > If you're using an older one though, you'll have to add #include
> > "hbsetup.ch" before #including "hbextern.ch".
>
> > (Note that HB_COMPAT_XPP will be automatically defined only if
> > it was defined at Harbour build time - in hbsetup.ch -, but this
> > is the default so you probably don't have to worry about it.)
>
> OK. I am using Harbour beta 3 (mid June 2007)
>
> Testing I found error happen if I use my own std.ch with -u switch,  
> and not happen without this option
>
> For example:
> //test.prg
> FUNC main
> #include "hbextern.ch"
> return nil
>
> and newstd.ch file (just these two lines):
> //newstd.ch
> #include "set.ch"
>
> and compile
> harbour test -p -unewstd.ch
>
> You can see in test.ppo missing of sections which belongs to #defines
>
> Test again without -unewstd.ch
>
>
> David Macias
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Fri Aug  3 09:21:13 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Aug  3 09:21:18 2007
Subject: [Harbour] What about a "Replaceable User Interface"?
Message-ID: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>

For me textUI remains "strategic" but I also need win and gtk.

Smart customers understand the value of having the same app working
working on Linux "desktop" using gtxwc, terminals using gttrm (
included Windows CE barcode readers and Windows mobile handheld pcs )
and Windows using gtwvt.

But many don't even evaluate "text" apps. My textUI apps have moveble
and sizable  windows, toolbars, folders ( notebooks ), tbrowses with
scrollbars but are still considered "DOS" by many potential customers.

So the idea is to "extend" actual [x]Harbour textUI code with some
classes that can be "reasonably" rendered in a textUI like:
window/dialog/form, toolbar, folder and "map" them to also to win and
gtk even using code from existing GUI like hwgui.

The result should sth like app //uitxt //gttrm for a Linux terminal
and app //uigtk or app //uiwin for a desktop.

Do you think it is a viable solution?

Do you think it is a waste of time?

Comments, ideas, alternatives?

best regard,
Lorenzo
From makis1970 at gmail.com  Fri Aug  3 09:27:24 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Fri Aug  3 09:32:23 2007
Subject: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>
Message-ID: <002001c7d5d2$08cf72d0$1a6e5870$@com>


>Subject: [Harbour] What about a "Replaceable User Interface"?

>For me textUI remains "strategic" but I also need win and gtk.

>Smart customers understand the value of having the same app working
>working on Linux "desktop" using gtxwc, terminals using gttrm (
>included Windows CE barcode readers and Windows mobile handheld pcs )
>and Windows using gtwvt.

>But many don't even evaluate "text" apps. My textUI apps have moveble
>and sizable  windows, toolbars, folders ( notebooks ), tbrowses with
>scrollbars but are still considered "DOS" by many potential customers.

>So the idea is to "extend" actual [x]Harbour textUI code with some
>classes that can be "reasonably" rendered in a textUI like:
>window/dialog/form, toolbar, folder and "map" them to also to win and
>gtk even using code from existing GUI like hwgui.

>The result should sth like app //uitxt //gttrm for a Linux terminal
>and app //uigtk or app //uiwin for a desktop.

>Do you think it is a viable solution?

>Do you think it is a waste of time?

>Comments, ideas, alternatives?

>best regard,
>Lorenzo

Lorenzo,
Be sure that a lot of people want-need exactly what you said. 
First we need a GT that is fully compatible with desktop applications
(GTWVT, GTWVW etc).
Second if its possible without change a line of code this application to
look like a windows one.
I have an application (from another company and using Delphi that doing
exactly that. 
This application before the change had difficult time to be accepted as it
was a dos terminal 
Application. After the transmission everybody think that it's a windows
application and now is
A "status" windows application in my country. He had everything (windows
resize change the font size, maximize etc).
If you want I can send you screen images to see what I'm saying.

Regards
Mike Evans

From lorenzo.fiorini at gmail.com  Fri Aug  3 11:10:40 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Aug  3 11:10:43 2007
Subject: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <002001c7d5d2$08cf72d0$1a6e5870$@com>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>
	<002001c7d5d2$08cf72d0$1a6e5870$@com>
Message-ID: <9257026e0708030810x5bf85a4dua23f805f7fa3d770@mail.gmail.com>

On 8/3/07, Mike Evans (Gmail) <makis1970@gmail.com> wrote:

> First we need a GT that is fully compatible with desktop applications
> (GTWVT, GTWVW etc).

For me GTWVT works as expected. May I help you?

> Second if its possible without change a line of code this application to
> look like a windows one.

I don't expect to have code like @ x,y to w,z ... @ say,get read
working in Windows or Gtk. I think [x]Harbour should have a richer UI
that allow to write "GUI aware" code that can be "rendered" on
different platform. Something like Java SWT but much more simpler. And
IMHO we are not so far. C53 already had some GUI concepts.
We need simply to extend what already exist and create some new
classes like window or toolbar.

> I have an application (from another company and using Delphi that doing
> exactly that.
> This application before the change had difficult time to be accepted as it
> was a dos terminal

Does it create an [x]Harbour app or a Delphi app?

best regards,
Lorenzo
From mbelgrano at deltain.it  Fri Aug  3 11:18:15 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Aug  3 11:18:23 2007
Subject: R: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <002001c7d5d2$08cf72d0$1a6e5870$@com>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>
	<002001c7d5d2$08cf72d0$1a6e5870$@com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A835@SRV02.deltain.net>

Please send me screen image

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Mike Evans (Gmail)
Inviato: venerd? 3 agosto 2007 15.27
A: 'Harbour Project Main Developer List.'
Oggetto: RE: [Harbour] What about a "Replaceable User Interface"?
I have an application (from another company and using Delphi that doing
exactly that. 
This application before the change had difficult time to be accepted as it
was a dos terminal 
Application. After the transmission everybody think that it's a windows
application and now is
A "status" windows application in my country. He had everything (windows
resize change the font size, maximize etc).
If you want I can send you screen images to see what I'm saying.


From mbelgrano at deltain.it  Fri Aug  3 11:21:25 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Aug  3 11:21:32 2007
Subject: R: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A836@SRV02.deltain.net>


Defining some .prg API common for different GUI libraries and platforms with replaceable low level GUI module so 
the same source code can be used in different environments then sth 
like that was started by Giancarlo Niccolai in xHarbour. See: contrib/xwt and contrib/xwt2. But looks that in last years no one tries to continue work on this library 


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Lorenzo Fiorini
Inviato: venerd? 3 agosto 2007 15.21
A: Harbour Project Main Developer List.
Oggetto: [Harbour] What about a "Replaceable User Interface"?

For me textUI remains "strategic" but I also need win and gtk.

Smart customers understand the value of having the same app working
working on Linux "desktop" using gtxwc, terminals using gttrm (
included Windows CE barcode readers and Windows mobile handheld pcs )
and Windows using gtwvt.

But many don't even evaluate "text" apps. My textUI apps have moveble
and sizable  windows, toolbars, folders ( notebooks ), tbrowses with
scrollbars but are still considered "DOS" by many potential customers.

So the idea is to "extend" actual [x]Harbour textUI code with some
classes that can be "reasonably" rendered in a textUI like:
window/dialog/form, toolbar, folder and "map" them to also to win and
gtk even using code from existing GUI like hwgui.

The result should sth like app //uitxt //gttrm for a Linux terminal
and app //uigtk or app //uiwin for a desktop.

Do you think it is a viable solution?

Do you think it is a waste of time?

Comments, ideas, alternatives?

best regard,
Lorenzo
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From makis1970 at gmail.com  Fri Aug  3 11:36:51 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Fri Aug  3 11:41:36 2007
Subject: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <9257026e0708030810x5bf85a4dua23f805f7fa3d770@mail.gmail.com>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>	<002001c7d5d2$08cf72d0$1a6e5870$@com>
	<9257026e0708030810x5bf85a4dua23f805f7fa3d770@mail.gmail.com>
Message-ID: <000001c7d5e4$1e7396e0$5b5ac4a0$@com>

> First we need a GT that is fully compatible with desktop applications
> (GTWVT, GTWVW etc).

For me GTWVT works as expected. May I help you?
And for me its working but I need more control (Catch window resize event
and change my font size respectively, maximize window, Catch Close window
event, catch shutdown event, better looking nested windows (ctwin), partial
windows controls (windows control in a "text" based window) etc. This will
be the first step of conversion. A terminal application that's looking as
windows one using normal clipper functions.


> Second if its possible without change a line of code this application to
> look like a windows one.

>I don't expect to have code like @ x,y to w,z ... @ say,get read
>working in Windows or Gtk. I think [x]Harbour should have a richer UI
>that allow to write "GUI aware" code that can be "rendered" on
>different platform. Something like Java SWT but much more simpler. And
>IMHO we are not so far. C53 already had some GUI concepts.
>We need simply to extend what already exist and create some new
>classes like window or toolbar.

This must be the second part of convertion. Step by step change our
application to a fully windows one. (some screens using plain dos functions
and some screen using full GUI)

> I have an application (from another company and using Delphi that doing
> exactly that.
> This application before the change had difficult time to be accepted as it
> was a dos terminal

Does it create an [x]Harbour app or a Delphi app?
It has nothing to do with xHarbour. They just change the application from a
dos terminal to a windows looking one without change the core of their
program just the GT

best regards,
Mike Evans

From lorenzo.fiorini at gmail.com  Fri Aug  3 11:49:09 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Aug  3 11:49:13 2007
Subject: R: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809A836@SRV02.deltain.net>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03809A836@SRV02.deltain.net>
Message-ID: <9257026e0708030849g64b57ab4if7b88d5a85d74846@mail.gmail.com>

On 8/3/07, Massimo Belgrano <mbelgrano@deltain.it> wrote:

> Defining some .prg API common for different GUI libraries and platforms with replaceable low level GUI module so
> the same source code can be used in different environments then sth
> like that was started by Giancarlo Niccolai in xHarbour. See: contrib/xwt and contrib/xwt2. But looks that in last years no one tries to continue work on this library

I've done some work on xwt work at time, but IMHO it was too "revolutionary".

When possible, an "evolutionary" path is better:

with Harbour 1.0 you can compile your existing apps in 32/64bit and much more
with Harbour 1.x you can add GUI to your existing apps
with Harbour 2.x you can ... to your existing apps
with Harbour 3.x ...

best regards,
Lorenzo
From mbelgrano at deltain.it  Fri Aug  3 12:13:50 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Aug  3 12:14:02 2007
Subject: R: R: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <9257026e0708030849g64b57ab4if7b88d5a85d74846@mail.gmail.com>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com><AFB948164110ED43B5EB849E8DEEF03809A836@SRV02.deltain.net>
	<9257026e0708030849g64b57ab4if7b88d5a85d74846@mail.gmail.com>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A838@SRV02.deltain.net>

"Evolutionary approach " is simply due to integration of GT architecture IN XWT ideas

Having API common for different GUI libraries and platforms with replaceable low level GUI module is only a starting point then all xharbour gui&GT must be XWT compatible

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Lorenzo Fiorini
Inviato: venerd? 3 agosto 2007 17.49
A: Harbour Project Main Developer List.
Oggetto: Re: R: [Harbour] What about a "Replaceable User Interface"?

On 8/3/07, Massimo Belgrano <mbelgrano@deltain.it> wrote:

> Defining some .prg API common for different GUI libraries and platforms with replaceable low level GUI module so
> the same source code can be used in different environments then sth
> like that was started by Giancarlo Niccolai in xHarbour. See: contrib/xwt and contrib/xwt2. But looks that in last years no one tries to continue work on this library

I've done some work on xwt work at time, but IMHO it was too "revolutionary".

When possible, an "evolutionary" path is better:

with Harbour 1.0 you can compile your existing apps in 32/64bit and much more
with Harbour 1.x you can add GUI to your existing apps
with Harbour 2.x you can ... to your existing apps
with Harbour 3.x ...

best regards,
Lorenzo
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From mbelgrano at deltain.it  Fri Aug  3 12:26:39 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Aug  3 12:26:45 2007
Subject: R: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809A835@SRV02.deltain.net>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com><002001c7d5d2$08cf72d0$1a6e5870$@com>
	<AFB948164110ED43B5EB849E8DEEF03809A835@SRV02.deltain.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A839@SRV02.deltain.net>

I have seen your screen shoot and his impressive see a turbo pascal dos program running with full gui

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Massimo Belgrano
Inviato: venerd? 3 agosto 2007 17.18
A: Harbour Project Main Developer List.
Oggetto: R: [Harbour] What about a "Replaceable User Interface"?

Please send me screen image

-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Mike Evans (Gmail)
Inviato: venerd? 3 agosto 2007 15.27
A: 'Harbour Project Main Developer List.'
Oggetto: RE: [Harbour] What about a "Replaceable User Interface"?
I have an application (from another company and using Delphi that doing
exactly that. 
This application before the change had difficult time to be accepted as it
was a dos terminal 
Application. After the transmission everybody think that it's a windows
application and now is
A "status" windows application in my country. He had everything (windows
resize change the font size, maximize etc).
If you want I can send you screen images to see what I'm saying.


_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From druzus at priv.onet.pl  Fri Aug  3 12:40:27 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Aug  3 12:40:32 2007
Subject: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <000001c7d5e4$1e7396e0$5b5ac4a0$@com>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>
	<002001c7d5d2$08cf72d0$1a6e5870$@com>
	<9257026e0708030810x5bf85a4dua23f805f7fa3d770@mail.gmail.com>
	<000001c7d5e4$1e7396e0$5b5ac4a0$@com>
Message-ID: <20070803164027.GA19829@localhost.localdomain>

On Fri, 03 Aug 2007, Mike Evans (Gmail) wrote:
> > Does it create an [x]Harbour app or a Delphi app?
> It has nothing to do with xHarbour. They just change the application from a
> dos terminal to a windows looking one without change the core of their
> program just the GT

Because Turbo Vison library API can be addopted to GUI mode without
source code modification. The Clipper/xBase @SAY/@GET/@BOX cannot
so it's not possible to make sth like that in such easy way.
But we can create new library with new API common for GUI and CUI
mode and reach the same effect. It will be necessary to adopt
existing code to this library but final application will run
in any environment without any source code modification just
like it's possible with programs which use pure Turbo Vison output.
IMHO very good idea.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Aug  3 12:40:56 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Aug  3 12:41:05 2007
Subject: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <000001c7d5e4$1e7396e0$5b5ac4a0$@com>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>
	<002001c7d5d2$08cf72d0$1a6e5870$@com>
	<9257026e0708030810x5bf85a4dua23f805f7fa3d770@mail.gmail.com>
	<000001c7d5e4$1e7396e0$5b5ac4a0$@com>
Message-ID: <9257026e0708030940r44c3a67fk856e4676f2773496@mail.gmail.com>

On 8/3/07, Mike Evans (Gmail) <makis1970@gmail.com> wrote:

> And for me its working but I need more control (Catch window resize event
> and change my font size respectively, maximize window, Catch Close window
> event, catch shutdown event, better looking nested windows (ctwin), partial
> windows controls (windows control in a "text" based window) etc. This will
> be the first step of conversion. A terminal application that's looking as
> windows one using normal clipper functions.

I understand you point but I'm looking for something else.

I'm not looking for a CONVERTION. I need textUI today and probably
I'll need it in the next 20 years. What I need is that the same
customer can use the same app with GTK UI for the PC desktop and the
TXTUI gttrm for the stockroom barcode reader.
The "screens" are the same ( size apart ) but they look different.
Toolbars under GTK are made with icons while on TXT UI are made with chars:
<Fnd><Rst><Cpy><Pte>... like in the html img tag where you provide an
"alt" for the images. If the UI can't show the image it shows the
"alt" you provided.

As every "multi thing" you have to accept some restrictions. If you
want the same look of M$ Office 2007 you'll need sth else but since we
already have:

 CheckBox class    Provides objects for creating check boxes
 Get class         Provides objects for editing variables and database fields
 ListBox class     Provides objects for creating list boxes
 MenuItem class    Provides objects for creating menu items
 PopUpMenu class   Provides objects for creating pop-up menus
 PushButton class  Provides objects for creating push buttons
 RadioButto class  Provides objects for creating radio buttons
 RadioGroup class  Provides objects for creating radio button groups
 Scrollbar class   Provides objects for creating scroll bars
 TBColumn class    Provides objects for browsing table-oriented data
 TBrowse class     Provides the column objects TBrowse objects
 TopBarMenu class  Provides objects for creating top menu bars
 TEditor class Provides objects for creating text editor objects (Harbour)

we only need to add some window/form capabilities and other few classes
to have a "more accepted" UI and still use our favorite language.

Harbour, write once run everywhere made easier :)

best regards,
Lorenzo
From makis1970 at gmail.com  Fri Aug  3 12:53:07 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Fri Aug  3 12:57:57 2007
Subject: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <20070803164027.GA19829@localhost.localdomain>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>	<002001c7d5d2$08cf72d0$1a6e5870$@com>	<9257026e0708030810x5bf85a4dua23f805f7fa3d770@mail.gmail.com>	<000001c7d5e4$1e7396e0$5b5ac4a0$@com>
	<20070803164027.GA19829@localhost.localdomain>
Message-ID: <001101c7d5ee$c636a070$52a3e150$@com>

Przemek,
It not a turbo vision. Just plain Delphi application converted from turbo
pascal. Its working exactly like gtwvt-gtwvw but in their window open
function (like ca tools) they are opening a windows dialog with custom
"title line". Also they've include in this application something like what
you said some time ago (netrdd). If you want I can send you some screen
posts to see what I'm saying. Using the above approach they converted this
application to windows and from time to time they are changing some screen
from this mode to a real windows.

Regards
Mike Evans

PS Przemek sorry for disturbing you again but is it possible to "fix" the
parser in RMDBFCDX to not need the second part of an expression to optimize
the filter? ( dbsetfilter( "!dele()=.=.t." ) etc. As you remember in clipper
it's not necessary to include the "=.t.". I have thousands of Boolean
filters stored in a database and to be compatible(optimize) I need to make
my own parser before the dbsetfilter.

Thanks in advance
Mike Evans

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Friday, August 03, 2007 7:40 PM
To: Harbour Project Main Developer List.
Subject: Re: RE: [Harbour] What about a "Replaceable User Interface"?

On Fri, 03 Aug 2007, Mike Evans (Gmail) wrote:
> > Does it create an [x]Harbour app or a Delphi app?
> It has nothing to do with xHarbour. They just change the application from
a
> dos terminal to a windows looking one without change the core of their
> program just the GT

Because Turbo Vison library API can be addopted to GUI mode without
source code modification. The Clipper/xBase @SAY/@GET/@BOX cannot
so it's not possible to make sth like that in such easy way.
But we can create new library with new API common for GUI and CUI
mode and reach the same effect. It will be necessary to adopt
existing code to this library but final application will run
in any environment without any source code modification just
like it's possible with programs which use pure Turbo Vison output.
IMHO very good idea.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From makis1970 at gmail.com  Fri Aug  3 12:55:47 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Fri Aug  3 13:00:38 2007
Subject: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <9257026e0708030940r44c3a67fk856e4676f2773496@mail.gmail.com>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>	<002001c7d5d2$08cf72d0$1a6e5870$@com>	<9257026e0708030810x5bf85a4dua23f805f7fa3d770@mail.gmail.com>	<000001c7d5e4$1e7396e0$5b5ac4a0$@com>
	<9257026e0708030940r44c3a67fk856e4676f2773496@mail.gmail.com>
Message-ID: <001201c7d5ef$25039400$6f0abc00$@com>

Lorenzo,
We are saying the same but maybe its not possible for me to explain it well.

Regards
Mike Evans

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Lorenzo Fiorini
Sent: Friday, August 03, 2007 7:41 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] What about a "Replaceable User Interface"?

On 8/3/07, Mike Evans (Gmail) <makis1970@gmail.com> wrote:

> And for me its working but I need more control (Catch window resize event
> and change my font size respectively, maximize window, Catch Close window
> event, catch shutdown event, better looking nested windows (ctwin),
partial
> windows controls (windows control in a "text" based window) etc. This will
> be the first step of conversion. A terminal application that's looking as
> windows one using normal clipper functions.

I understand you point but I'm looking for something else.

I'm not looking for a CONVERTION. I need textUI today and probably
I'll need it in the next 20 years. What I need is that the same
customer can use the same app with GTK UI for the PC desktop and the
TXTUI gttrm for the stockroom barcode reader.
The "screens" are the same ( size apart ) but they look different.
Toolbars under GTK are made with icons while on TXT UI are made with chars:
<Fnd><Rst><Cpy><Pte>... like in the html img tag where you provide an
"alt" for the images. If the UI can't show the image it shows the
"alt" you provided.

As every "multi thing" you have to accept some restrictions. If you
want the same look of M$ Office 2007 you'll need sth else but since we
already have:

 CheckBox class    Provides objects for creating check boxes
 Get class         Provides objects for editing variables and database
fields
 ListBox class     Provides objects for creating list boxes
 MenuItem class    Provides objects for creating menu items
 PopUpMenu class   Provides objects for creating pop-up menus
 PushButton class  Provides objects for creating push buttons
 RadioButto class  Provides objects for creating radio buttons
 RadioGroup class  Provides objects for creating radio button groups
 Scrollbar class   Provides objects for creating scroll bars
 TBColumn class    Provides objects for browsing table-oriented data
 TBrowse class     Provides the column objects TBrowse objects
 TopBarMenu class  Provides objects for creating top menu bars
 TEditor class Provides objects for creating text editor objects (Harbour)

we only need to add some window/form capabilities and other few classes
to have a "more accepted" UI and still use our favorite language.

Harbour, write once run everywhere made easier :)

best regards,
Lorenzo
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Fri Aug  3 13:00:52 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Aug  3 13:00:55 2007
Subject: R: R: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809A838@SRV02.deltain.net>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03809A836@SRV02.deltain.net>
	<9257026e0708030849g64b57ab4if7b88d5a85d74846@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03809A838@SRV02.deltain.net>
Message-ID: <9257026e0708031000y437dc889rb088548635c631b9@mail.gmail.com>

On 8/3/07, Massimo Belgrano <mbelgrano@deltain.it> wrote:

> Having API common for different GUI libraries and platforms with replaceable low level GUI module is only a starting point then all xharbour gui&GT must be XWT compatible

Here are some lines from xharbour/contrib/xwt/tests/xwt_test.prg

...

   XwtInit()

   /*** Window creation ****/
   DEFINE WINDOW oWindow TITLE "New FrameWindow from XWT" MENU BuildMenu()
   oWindow:AddEventListener( XWT_E_DESTROY_REQ, @XwtQuit() )


   /*** Splitter panes layout( our new main widget) ***/
   DEFINE LAYOUT oVLay  MODE XWT_LM_VERT PADDING 5 BORDER 2
   DEFINE LAYOUT oVLay2 MODE XWT_LM_VERT PADDING 5 BORDER 2

   DEFINE SPLITTER oSplit MODE XWT_LM_HORIZ FIRSTWIDGET oVLay
SECONDWIDGET oVLay2 OF oWindow

...

I don't see much "evolution" there.

For me evolution is put @ 0,0 WINDOW ... before my
@SAY,GET,PUSHBUTTON,TBROWSE... READ.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Fri Aug  3 13:09:29 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Aug  3 13:09:33 2007
Subject: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <001201c7d5ef$25039400$6f0abc00$@com>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>
	<002001c7d5d2$08cf72d0$1a6e5870$@com>
	<9257026e0708030810x5bf85a4dua23f805f7fa3d770@mail.gmail.com>
	<000001c7d5e4$1e7396e0$5b5ac4a0$@com>
	<9257026e0708030940r44c3a67fk856e4676f2773496@mail.gmail.com>
	<001201c7d5ef$25039400$6f0abc00$@com>
Message-ID: <9257026e0708031009y3e9a6bc1w498594c35f76d246@mail.gmail.com>

On 8/3/07, Mike Evans (Gmail) <makis1970@gmail.com> wrote:

> We are saying the same but maybe its not possible for me to explain it well.

I understand you.

When I read my meesages I always think "why I've wrote that stupid thing?" :)

best regards,
Lorenzo
From makis1970 at gmail.com  Fri Aug  3 13:58:17 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Fri Aug  3 14:03:21 2007
Subject: R: R: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <9257026e0708031000y437dc889rb088548635c631b9@mail.gmail.com>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>	<AFB948164110ED43B5EB849E8DEEF03809A836@SRV02.deltain.net>	<9257026e0708030849g64b57ab4if7b88d5a85d74846@mail.gmail.com>	<AFB948164110ED43B5EB849E8DEEF03809A838@SRV02.deltain.net>
	<9257026e0708031000y437dc889rb088548635c631b9@mail.gmail.com>
Message-ID: <001301c7d5f7$e068a020$a139e060$@com>


...

   XwtInit()

   /*** Window creation ****/
   DEFINE WINDOW oWindow TITLE "New FrameWindow from XWT" MENU BuildMenu()
   oWindow:AddEventListener( XWT_E_DESTROY_REQ, @XwtQuit() )


   /*** Splitter panes layout( our new main widget) ***/
   DEFINE LAYOUT oVLay  MODE XWT_LM_VERT PADDING 5 BORDER 2
   DEFINE LAYOUT oVLay2 MODE XWT_LM_VERT PADDING 5 BORDER 2

   DEFINE SPLITTER oSplit MODE XWT_LM_HORIZ FIRSTWIDGET oVLay
SECONDWIDGET oVLay2 OF oWindow

...

I don't see much "evolution" there.

For me evolution is put @ 0,0 WINDOW ... before my
@SAY,GET,PUSHBUTTON,TBROWSE... READ.

Lorenzo,
Exactly. I'm already use wopen function from catools and if I had something
like that ....... 
Using wopen we have a new window. When this window is selected everything
that displays something in the current window uses as coordinates the
top,left corner of this window. If somehow this window was a real windows
object and every @say @get belong as an object to this window then
everything will be easier. 

Regards
Mike Evans

From antonioharbour at gmail.com  Fri Aug  3 14:12:18 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Fri Aug  3 14:12:49 2007
Subject: R: R: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <001301c7d5f7$e068a020$a139e060$@com>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03809A836@SRV02.deltain.net>
	<9257026e0708030849g64b57ab4if7b88d5a85d74846@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03809A838@SRV02.deltain.net>
	<9257026e0708031000y437dc889rb088548635c631b9@mail.gmail.com>
	<001301c7d5f7$e068a020$a139e060$@com>
Message-ID: <1186164738.5786.22.camel@anto-desktop>

>    /*** Window creation ****/
>    DEFINE WINDOW oWindow TITLE "New FrameWindow from XWT" MENU
> BuildMenu()

That xbase command was originally created for FiveWin back in 1993. We
keep using it for Windows, Mac and Linux :-)

Its quite amazing to see that its a standard,

regards,

Antonio

From druzus at priv.onet.pl  Fri Aug  3 14:59:04 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Aug  3 14:59:11 2007
Subject: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <001101c7d5ee$c636a070$52a3e150$@com>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>
	<002001c7d5d2$08cf72d0$1a6e5870$@com>
	<9257026e0708030810x5bf85a4dua23f805f7fa3d770@mail.gmail.com>
	<000001c7d5e4$1e7396e0$5b5ac4a0$@com>
	<20070803164027.GA19829@localhost.localdomain>
	<001101c7d5ee$c636a070$52a3e150$@com>
Message-ID: <20070803185904.GA20898@localhost.localdomain>

On Fri, 03 Aug 2007, Mike Evans (Gmail) wrote:
> Przemek,
> It not a turbo vision. Just plain Delphi application converted from turbo
> pascal.

AFAIR turbo vision was a part of turbo pascal.

> Its working exactly like gtwvt-gtwvw but in their window open
> function (like ca tools) they are opening a windows dialog with custom
> "title line". Also they've include in this application something like what
> you said some time ago (netrdd). If you want I can send you some screen
> posts to see what I'm saying. Using the above approach they converted this
> application to windows and from time to time they are changing some screen
> from this mode to a real windows.

I wrongly understood that "windows looking". I thought it began to
use GUI objects without source code modification. Now it's clear.

best regards,
Przemek
From druzus at priv.onet.pl  Fri Aug  3 15:24:34 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Aug  3 15:24:41 2007
Subject: R: R: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <001301c7d5f7$e068a020$a139e060$@com>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03809A836@SRV02.deltain.net>
	<9257026e0708030849g64b57ab4if7b88d5a85d74846@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03809A838@SRV02.deltain.net>
	<9257026e0708031000y437dc889rb088548635c631b9@mail.gmail.com>
	<001301c7d5f7$e068a020$a139e060$@com>
Message-ID: <20070803192434.GB20898@localhost.localdomain>

On Fri, 03 Aug 2007, Mike Evans (Gmail) wrote:
> Exactly. I'm already use wopen function from catools and if I had something
> like that ....... 
> Using wopen we have a new window. When this window is selected everything
> that displays something in the current window uses as coordinates the
> top,left corner of this window. If somehow this window was a real windows
> object and every @say @get belong as an object to this window then
> everything will be easier. 

Harbour have full support for CTWIN. In tests/ctwtest.prg you will find
test program. Compile it bu Clipper, Harbour and xHarbour and compare
results - movve windows using arrow keys, hit "B" to disable/enable
borders, "P" for window[0] cross output, etc.

In Harbour CTWIN is implemented as separate GT driver which can inherits
from any other one and adds multi window capability. And now hint:
In Harbour it's possible to implement in the same way GTWVW. It can
inherit from GTWVT adding CTWIN interface so each time when you call:
WOPEN() - new GUI Window can be created so you will not have to change
your source code. Maybe some window developer implement it.

If we are talking about common multi platform GUI then probably Marek's
HbWxW (http://harbour.fm.interia.pl/) is potentially the most portable
library.

But I'm interesting in sth else. I'd like to have library which I can
use with CUI, GUI and WWW Browsers without source code modification.
IMHO today porting application to GUI only mode is a waste of time.
In few years our programs will have to run in WANs and use many different
output devices like PDA, cellar phones, watches ;-)... We will need
interface which will allow to run application remotely in CUI mode and
when user turn off his terminal in scale register ;-) without closing
application on the server and reconnect from office using desktop computer
he should continue his job in GUI mode in the same instance of application
and finally if he will want then we will have to allow him to finish the
job using PDA and WWW browser when he will return to home.
I plan to work on such library in the future.

best regards,
Przemek
From antonioharbour at gmail.com  Fri Aug  3 15:43:35 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Fri Aug  3 15:43:44 2007
Subject: R: R: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <20070803192434.GB20898@localhost.localdomain>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03809A836@SRV02.deltain.net>
	<9257026e0708030849g64b57ab4if7b88d5a85d74846@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03809A838@SRV02.deltain.net>
	<9257026e0708031000y437dc889rb088548635c631b9@mail.gmail.com>
	<001301c7d5f7$e068a020$a139e060$@com>
	<20070803192434.GB20898@localhost.localdomain>
Message-ID: <1186170215.5778.6.camel@anto-desktop>

Przemek,

> But I'm interesting in sth else. I'd like to have library which I can
> use with CUI, GUI and WWW Browsers without source code modification.
> IMHO today porting application to GUI only mode is a waste of time.
> In few years our programs will have to run in WANs and use many different
> output devices like PDA, cellar phones, watches ;-)... We will need
> interface which will allow to run application remotely in CUI mode and
> when user turn off his terminal in scale register ;-) without closing
> application on the server and reconnect from office using desktop computer
> he should continue his job in GUI mode in the same instance of application
> and finally if he will want then we will have to allow him to finish the
> job using PDA and WWW browser when he will return to home.
> I plan to work on such library in the future.

Excellent!!! :-)

Remember the last brain-storming I proposed here ? It was about the
internet revolution and the impact of it to all the software
development.

We have to stop thinking in desktop and in web development as different
entities. We need a common interface for all our developments.

That would be the most important target for Harbour 2.0 :-)

regards,

Antonio

From lorenzo.fiorini at gmail.com  Fri Aug  3 15:51:16 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Aug  3 15:51:20 2007
Subject: R: R: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <20070803192434.GB20898@localhost.localdomain>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03809A836@SRV02.deltain.net>
	<9257026e0708030849g64b57ab4if7b88d5a85d74846@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03809A838@SRV02.deltain.net>
	<9257026e0708031000y437dc889rb088548635c631b9@mail.gmail.com>
	<001301c7d5f7$e068a020$a139e060$@com>
	<20070803192434.GB20898@localhost.localdomain>
Message-ID: <9257026e0708031251v24ae3e2n945ee1d277233263@mail.gmail.com>

On 8/3/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> IMHO today porting application to GUI only mode is a waste of time.
> In few years our programs will have to run in WANs and use many different
> ...
> job using PDA and WWW browser when he will return to home.
> I plan to work on such library in the future.

I couldn't say it better.

best regards,
Lorenzo
From antonioharbour at gmail.com  Fri Aug  3 15:55:26 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Fri Aug  3 15:55:34 2007
Subject: R: R: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <20070803192434.GB20898@localhost.localdomain>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03809A836@SRV02.deltain.net>
	<9257026e0708030849g64b57ab4if7b88d5a85d74846@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03809A838@SRV02.deltain.net>
	<9257026e0708031000y437dc889rb088548635c631b9@mail.gmail.com>
	<001301c7d5f7$e068a020$a139e060$@com>
	<20070803192434.GB20898@localhost.localdomain>
Message-ID: <1186170926.5778.10.camel@anto-desktop>

Przemek,

> In few years our programs will have to run in WANs and use many different
> output devices like PDA, cellar phones, watches ;-)

Just an observation to the above:

Its not in a few years. Its today requirements, here and now :-)

regards,

Antonio

From harbour.01 at syenar.hu  Fri Aug  3 16:01:32 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Fri Aug  3 16:01:40 2007
Subject: R: R: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <20070803192434.GB20898@localhost.localdomain>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03809A836@SRV02.deltain.net>
	<9257026e0708030849g64b57ab4if7b88d5a85d74846@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03809A838@SRV02.deltain.net>
	<9257026e0708031000y437dc889rb088548635c631b9@mail.gmail.com>
	<001301c7d5f7$e068a020$a139e060$@com>
	<20070803192434.GB20898@localhost.localdomain>
Message-ID: <74FAFBD5-528F-440C-83A3-ACF27366DE3A@syenar.hu>

> But I'm interesting in sth else. I'd like to have library which I can
> use with CUI, GUI and WWW Browsers without source code modification.
> IMHO today porting application to GUI only mode is a waste of time.
> In few years our programs will have to run in WANs and use many  
> different
> output devices like PDA, cellar phones, watches ;-)... We will need
> interface which will allow to run application remotely in CUI mode and
> when user turn off his terminal in scale register ;-) without closing
> application on the server and reconnect from office using desktop  
> computer
> he should continue his job in GUI mode in the same instance of  
> application
> and finally if he will want then we will have to allow him to  
> finish the
> job using PDA and WWW browser when he will return to home.
> I plan to work on such library in the future.

I'm seeking for something very similar. For any new development
I would only choose the web.

Gmail is a good example, last week I started a new mail on
the web on my notebook using a client's internet connection.
In the middle I close my Mac, disconnected, went home, opened
the Mac, connected to my home wifi, and I could continue
writing my mail without any hassle, the Send button worked
properly. I was pretty amazed. So this is definitely possible.

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Fri Aug  3 16:28:56 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Aug  3 16:28:59 2007
Subject: R: R: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <1186170215.5778.6.camel@anto-desktop>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03809A836@SRV02.deltain.net>
	<9257026e0708030849g64b57ab4if7b88d5a85d74846@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03809A838@SRV02.deltain.net>
	<9257026e0708031000y437dc889rb088548635c631b9@mail.gmail.com>
	<001301c7d5f7$e068a020$a139e060$@com>
	<20070803192434.GB20898@localhost.localdomain>
	<1186170215.5778.6.camel@anto-desktop>
Message-ID: <9257026e0708031328o668ef842ybb180bfd358682a5@mail.gmail.com>

On 8/3/07, Antonio Linares <antonioharbour@gmail.com> wrote:

> We have to stop thinking in desktop and in web development as different
> entities. We need a common interface for all our developments.
>
> That would be the most important target for Harbour 2.0 :-)

I totally agree.

I had to move all my reporting, dss, analisys apps to php to get/keep
customers. Now I'm using harbour/cgi/ajax.

What I found harder have been the porting "intensive UI" modules like
accounting, order entry, invoicing. In DSS ( decision support system )
usually you have few options, complex query managed by sql and almost
static output in form of tables or charts.

In accounting/business modules there are many business rules "behind"
to the UI. This scenario is not easy to implement in WWW. It was born
for stateless transactions like GET/REPLAY while in complex data entry
you need to keep alive transactions until you commit and the UI should
react to data.
In this case the server side language used ( harbour in my case ) is
relatively not important. The real job is done in Javascript and SQL.

This is why I think we need to find a better way.

Today my customers have harbour/cgi/ajax apps that use a postgresql
database for DSS. The data are loaded from dbfs in the night. Users
have gtxwc/gtwvt apps on the desktops and gttrm apps on the barcode
terminals or pocket pc in stockroom while salesforce use cgi apps to
get customer data and gttrm apps to input orders.

best regards,
Lorenzo
From druzus at priv.onet.pl  Fri Aug  3 16:46:15 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Aug  3 16:46:22 2007
Subject: [Harbour] ChangeLog 2007-08-03 22:45 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070803204615.GA22718@localhost.localdomain>

2007-08-03 22:45 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/libct/screen1.c
    * removed unnecessary casting

  + harbour/contrib/libct/screen3.prg
    + added CLEAREOL(), CLEOL(), CLWIN()

  * harbour/contrib/libct/screen2.c
  + harbour/contrib/libct/showtime.prg
    + added SHOWTIME()

  * harbour/contrib/libct/Makefile
  * harbour/contrib/libct/makefile.bc
  * harbour/contrib/libct/makefile.vc
    * updated for new files

best regards,
Przemek
From guy.roussin at teledetection.fr  Fri Aug  3 23:02:53 2007
From: guy.roussin at teledetection.fr (=?UTF-8?B?R3V5IFJvdXNzaW4=?= )
Date: Fri Aug  3 17:02:58 2007
Subject: [Harbour] Testing creating debian package for harbour
Message-ID: <20070803210251.A978C272EC@mafalda.teledetection.fr>

Hi,

i test make_deb.sh on my debian etch :

$ fakeroot make_deb.sh

I get a package but i need,
on harbour/debian  :

1) missing rules file :
$ ln -s rules.cf rules

2) missing hbverfix.1 file :
$ touch hbverfix.1

3) missing harbour/tmp/
when compiling ! :

cd  harbour
mkdir tmp
cd tmp
ln -s ../etc
ln -s ../usr

and i get a package, install fine.


Guy

___________________________________
http://www.teledetection.fr


From druzus at priv.onet.pl  Fri Aug  3 17:25:06 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Aug  3 17:25:13 2007
Subject: [Harbour] ChangeLog 2007-08-03 23:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070803212506.GA22982@localhost.localdomain>

2007-08-03 23:25 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  - harbour/debian/rules.cf
  + harbour/debian/rules
    * renamed rules.cf to rules - I forgot to make it before commit
    * removed link to not installed hbverfix.1
    * changed default INSTDIR

best regards,
Przemek
From druzus at priv.onet.pl  Fri Aug  3 17:27:34 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Aug  3 17:27:40 2007
Subject: [Harbour] Testing creating debian package for harbour
In-Reply-To: <20070803210251.A978C272EC@mafalda.teledetection.fr>
References: <20070803210251.A978C272EC@mafalda.teledetection.fr>
Message-ID: <20070803212734.GB22982@localhost.localdomain>

On Fri, 03 Aug 2007, Guy Roussin  wrote:
> Hi,
> i test make_deb.sh on my debian etch :
> $ fakeroot make_deb.sh
> I get a package but i need,
> on harbour/debian  :
> 1) missing rules file :
> 2) missing hbverfix.1 file :
> 3) missing harbour/tmp/
> and i get a package, install fine.

Many thanks for your test.
Can you remove your modification and repeat it after:
    2007-08-03 23:25 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)

and if possible please send me list of files included .DEB package

best regards,
Przemek
From bedipritpal at hotmail.com  Fri Aug  3 17:53:10 2007
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Aug  3 17:53:13 2007
Subject: [Harbour] RE: Harbour Digest, Vol 10, Issue 12
Message-ID: <BAY132-W2663081C9CDB49ED2F44D1A7EA0@phx.gbl>


Hello Everybody
 
First timer onboard.
 
> But I'm interesting in sth else. I'd like to have library which I can> use with CUI, GUI and WWW Browsers without source code modification.> IMHO today porting application to GUI only mode is a waste of time.> In few years our programs will have to run in WANs and use many different> output devices like PDA, cellar phones, watches ;-)... We will need> interface which will allow to run application remotely in CUI mode and> when user turn off his terminal in scale register ;-) without closing> application on the server and reconnect from office using desktop computer> he should continue his job in GUI mode in the same instance of application> and finally if he will want then we will have to allow him to finish the> job using PDA and WWW browser when he will return to home.> I plan to work on such library in the future.
This is an EXCELLENT idea. 
 
Being developer of WVTGUI I would like to extend my opinion on the subject. 
 
Few years back I implemented pure console (PM) windows of Xbase++ to work as GUI windows, the concept I introduced, though in a different way, in WVTGUI once Peter Rees contributed GTWVT.  Moreover those PM (Console) windows were having multiple GETLISTSs via ReadModal(), all in their own thread. I just overhaulled and restructed ReadModal() and associated functions to respond to Window in focus. All went well except for the period of application execution when user clicked on another window in the middle of data input/output in one window. The problem I detected, and is well documented in MSDN, was that WM_KillFocus and WM_GetFocus messages were not despatched in orderly fashion. All I fould faulty message dispatching mechanism of Xbase++. This caused my whole effort failing. For sure, Xbase++ has such mechanism in place authenticated by the fact that Tbrowse can be tied to one window. And we all know how many screen i/o functions are executed to display a browser. I tried to extend this behaviour to Get system and I was successful 95% but not 100%.
 
We can implement this behavior in all types of GT's. ALL screen output functions needs to be tied to an abstract identity, for example: windows handle in case of Windows GUI's. Once this basic part is accomplished everything else seems to be fairly straight forward. 
 
I am of the view that user must not have to change the code, just add a parameter and there he goes.
 
More later...
 
Pritpal
a student of software analysis and design
 
 
 
_________________________________________________________________
Recharge--play some free games. Win cool prizes too!
http://club.live.com/home.aspx?icid=CLUB_wlmailtextlink
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070803/2c54be8a/attachment.html
From bedipritpal at hotmail.com  Fri Aug  3 18:47:29 2007
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Aug  3 18:47:32 2007
Subject: [Harbour] [xHarbour-developers] Problem creating .adt files
In-Reply-To: <20070727110932.GD10606@localhost.localdomain>
References: <46A6B354.5020302@shaw.ca>
	<20070725120649.GA5797@localhost.localdomain>
	<46A7825E.9070604@shaw.ca> <020901c7cf6a$568b9620$0301a8c0@bh>
	<20070726115503.GB25341@localhost.localdomain>
	<025b01c7cfaf$ccca39a0$0301a8c0@bh>
	<20070727110932.GD10606@localhost.localdomain>
Message-ID: <11991947.post@talk.nabble.com>


Przemyslaw

>I'll be absent for few days. When I'll be back I'll try to create some
>basic proposition which we can start to discuss. I hope that Marcelo
>and Jacek (SQLRDD/MEDIATOR) will also take a part in discussion.

I too would like to participate in the discussion.

Pritpal Bedi
a student of software analysis and design



-- 
View this message in context: http://www.nabble.com/Problem-creating-.adt-files-tf4139656.html#a11991947
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Fri Aug  3 19:21:49 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Aug  3 19:22:50 2007
Subject: R: RE: R: R: [Harbour] What about a "Replaceable User Interface"?
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com><AFB948164110ED43B5EB849E8DEEF03809A836@SRV02.deltain.net><9257026e0708030849g64b57ab4if7b88d5a85d74846@mail.gmail.com><AFB948164110ED43B5EB849E8DEEF03809A838@SRV02.deltain.net><9257026e0708031000y437dc889rb088548635c631b9@mail.gmail.com><001301c7d5f7$e068a020$a139e060$@com><20070803192434.GB20898@localhost.localdomain>
	<1186170215.5778.6.camel@anto-desktop>
Message-ID: <AFB948164110ED43B5EB849E8DEEF0380375C0@SRV02.deltain.net>

I toaly agre
 
Massimo Belgrano <mailto:mbelgrano@deltain.com> 
Albo Nazionale Informatici Professionisti n? 2620
Socio n? 2843 Associazione Informatici Professionisti

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it <https://srv02.deltain.net/exchweb/bin/redir.asp?URL=http://www.deltain.it/>  
Via Torelli , 31 - 28100 Novara - Tel: 0321/30281

________________________________

Da: harbour-bounces@harbour-project.org per conto di Antonio Linares
Inviato: ven 03/08/2007 21.43
A: Harbour Project Main Developer List.
Oggetto: Re: RE: R: R: [Harbour] What about a "Replaceable User Interface"?



Przemek,

> But I'm interesting in sth else. I'd like to have library which I can
> use with CUI, GUI and WWW Browsers without source code modification.
> IMHO today porting application to GUI only mode is a waste of time.
> In few years our programs will have to run in WANs and use many different
> output devices like PDA, cellar phones, watches ;-)... We will need
> interface which will allow to run application remotely in CUI mode and
> when user turn off his terminal in scale register ;-) without closing
> application on the server and reconnect from office using desktop computer
> he should continue his job in GUI mode in the same instance of application
> and finally if he will want then we will have to allow him to finish the
> job using PDA and WWW browser when he will return to home.
> I plan to work on such library in the future.

Excellent!!! :-)

Remember the last brain-storming I proposed here ? It was about the
internet revolution and the impact of it to all the software
development.

We have to stop thinking in desktop and in web development as different
entities. We need a common interface for all our developments.

That would be the most important target for Harbour 2.0 :-)

regards,

Antonio

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour


-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 6054 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070804/8e879bc5/attachment-0001.bin
From druzus at priv.onet.pl  Sun Aug  5 05:55:46 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sun Aug  5 05:55:52 2007
Subject: [Harbour] ChangeLog 2007-08-05 11:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070805095546.GA8768@localhost.localdomain>

2007-08-05 11:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/libct/screen2.c
    + added CLEARSLOW()

  + harbour/contrib/libct/getsecrt.prg
    + added GETSECRET()

  + harbour/contrib/libct/getinput.prg
    + added GETINPUT()

  * harbour/contrib/libct/ctmisc.prg
    * moved SAVEGETS() and RESTGETS() to getinfo.prg file

  + harbour/contrib/libct/getinfo.prg
    + added COUNTGETS(), CURRENTGET(), GETFLDROW(), GETFLDCOL(), GETFLDVAR()
      modified code by Philip Chee borrowed from xHarbour
    + added SAVEGETS() and RESTGETS() from ctmisc.prg

  + harbour/contrib/libct/keysave.prg
    + SAVESETKEY(), RESTSETKEY() - code by Philip Chee borrowed from
      xHarbour

  * harbour/contrib/libct/Makefile
  * harbour/contrib/libct/makefile.bc
  * harbour/contrib/libct/makefile.vc
    * updated for new files

  * harbour/contrib/libct/screen3.prg
  * harbour/contrib/libct/showtime.prg
    * set svn:eol-style=native

best regards,
Przemek
From druzus at priv.onet.pl  Sun Aug  5 09:01:18 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sun Aug  5 09:01:25 2007
Subject: [Harbour] ChangeLog 2007-08-05 15:00 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070805130118.GA13207@localhost.localdomain>

2007-08-05 15:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/libct/Makefile
  + harbour/contrib/libct/keysec.prg
  + harbour/contrib/libct/keytime.prg
    + added KEYSEC() and KEYTIME() modified code by Pavel Tsarenko
      borrowed from xHarbour

  * harbour/contrib/libct/Makefile
  * harbour/contrib/libct/makefile.bc
  * harbour/contrib/libct/makefile.vc
    * updated for new files

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Sun Aug  5 14:16:53 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Aug  5 14:16:57 2007
Subject: [Harbour] Just few ideas for 2.0 (very long message sorry)
Message-ID: <9257026e0708051116x6808ca77jbf3cd47bddfe0e40@mail.gmail.com>

Sorry for the long message. What about a wiki?

I'm collecting some ideas in random order and without deep analysis.
Feel free to ignore, add your comments and/or expand ideas.

goal; multi-device UI; targets: txt, win, gtk, xhtml browsers, others

description; unmodified Harbour (extended) UI code rendered on
different targets using a framework that implements a set of
controls/classes.

to avoid; replication of full features GUI libs like fivewin, hwgui, xhgtk ...

where to add code; new project? new branch? new module?

comment; IMHO is much better to have a limited set of classes that
will work asap than a never finished big project. This will require
clear choices and "defaults" about look and feel. 3rd party will have
the possibility to extend and customize the framework.

My personal preference goes to "www browser" style app:
Top Menu, Toolbar, Folder with pages, Status line.
On small devices multiple windows are impossible to use. I've found
that "pages/tabs" with a toolbar that help to simulate keyboard keys
is the best way to work.
In mobile devices or xhtml browses things like Esc or Ctrl+F5 often
don't exist so every class should have a :KeyXYZ() method that work as
"virtual keyboard" helper.

At the moment I'm not considering how the controls will be rendered to
the targets.

I'd like to focus on what we need to add to the language so that it
can be rendered as closely as possible to the different targets.

Start point: c53 classes

- CheckBox, Get, ListBox, PushButton, RadioButton, RadioGroup, TEditor
-- these classes have counterparts in all the planned targets
- MenuItem, PopUpMenu, TopBarMenu
-- xhtml doesn't have menu concepts
- TBColumn, TBrowse
-- xhtml tables are a different concept
- Scrollbar
-- xhtml scrollbars are a different concept

what we need to add:

- container classes
-- in win, gtk controls need to be attached to containers such as
windows, dialogs, panels. win target support multiple windows ( mdi )
but it is a deprecated UI and it is not supported in other targets.
I suggest to use folders ( notebooks in gtk ) which give the same
"multitasking" feature but in much more clean way. It is also the
actual interface of almost the xhtml browsers. Folders are also useful
in wizard like situations and are easier to implement in xhtml.
We can provide self centered dialogs for simple tasks like
confirmations, yes/no, get array of values, user/password, search
string...

- combo class
-- combo class is supported in all the targets ( see below )

- lookup feature to get class
-- instead of combos I've always used lookups. The rationale is that a
combo is often too small to provide helpful information f.e. of a
customer. Instead with lookups you open a new window that can be as
complex as needed. Also in xhtml the options have to be provided
before the page render so a combo with many options ( f.e. customer
list ) is a sure slowdown for the app.

- label class
-- say in Harbour are simply text that can't be easily changed in a
GUI env. Labels could be easily implemented like readonly gets with
say colors and updated via varput/varget.

- toolbar class

- status line class

Next steps:

- define the standards to follow ( if any )
- define new classes and hierarchy
- ...

First easy tasks:
- port the GUI classes from xHarbour
- integrate teditor into tgetlist
- add password clause to tget
- ...

best regards,
Lorenzo
From antonioharbour at gmail.com  Sun Aug  5 16:07:03 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Aug  5 16:07:15 2007
Subject: [Harbour] Just few ideas for 2.0 (very long message sorry)
In-Reply-To: <9257026e0708051116x6808ca77jbf3cd47bddfe0e40@mail.gmail.com>
References: <9257026e0708051116x6808ca77jbf3cd47bddfe0e40@mail.gmail.com>
Message-ID: <1186344423.6597.10.camel@anto-desktop>

Lorenzo,

In order to not reinvent the wheel why don't we have a look at Java, and
even consider the possibility to connect to Java for GUI ?

regards,

Antonio

From lorenzo.fiorini at gmail.com  Mon Aug  6 05:06:26 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Aug  6 05:06:30 2007
Subject: [Harbour] Just few ideas for 2.0 (very long message sorry)
In-Reply-To: <1186344423.6597.10.camel@anto-desktop>
References: <9257026e0708051116x6808ca77jbf3cd47bddfe0e40@mail.gmail.com>
	<1186344423.6597.10.camel@anto-desktop>
Message-ID: <9257026e0708060206g66941bf6t6504493111465745@mail.gmail.com>

On 8/5/07, Antonio Linares <antonioharbour@gmail.com> wrote:

> In order to not reinvent the wheel why don't we have a look at Java, and
> even consider the possibility to connect to Java for GUI ?

I'm not a Java expert so I can't say if it is a viable solution.

Few months ago I've evaluated Java for a industrial mobile application
and I've found it really "complex" to implement. You need very skilled
Java developers.
An IDE like Eclipse or Netbeans can help but also add another big tool to learn.

I choosed harbour/cgi and xhtml but since Przemyslaw as added gttrm
I've found how simple is to use a terminal emulation for mobile
devices ( with Linux servers ).

I've found that many industrial Windows CE/Mobile devices have already
installed a telnet/VT100 ( for Linux/Unix ) a 5250/3270 emulator ( for
IBM mainframes ) and the Client Terminal for Windows Terminal Server
so the same "approach" can be used in many environments.

best regards,
Lorenzo
From makis1970 at gmail.com  Mon Aug  6 07:43:49 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Mon Aug  6 07:48:27 2007
Subject: R: R: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <20070803192434.GB20898@localhost.localdomain>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>	<AFB948164110ED43B5EB849E8DEEF03809A836@SRV02.deltain.net>	<9257026e0708030849g64b57ab4if7b88d5a85d74846@mail.gmail.com>	<AFB948164110ED43B5EB849E8DEEF03809A838@SRV02.deltain.net>	<9257026e0708031000y437dc889rb088548635c631b9@mail.gmail.com>	<001301c7d5f7$e068a020$a139e060$@com>
	<20070803192434.GB20898@localhost.localdomain>
Message-ID: <004c01c7d81f$0fb340a0$2f19c1e0$@com>

Przemek,
I'm sure its exactly what everybody want. With something like that Harbour
can be in the future a mainstream language.

Regards
Mike Evans

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Friday, August 03, 2007 10:25 PM
To: Harbour Project Main Developer List.
Subject: Re: RE: R: R: [Harbour] What about a "Replaceable User Interface"?

On Fri, 03 Aug 2007, Mike Evans (Gmail) wrote:
> Exactly. I'm already use wopen function from catools and if I had
something
> like that ....... 
> Using wopen we have a new window. When this window is selected everything
> that displays something in the current window uses as coordinates the
> top,left corner of this window. If somehow this window was a real windows
> object and every @say @get belong as an object to this window then
> everything will be easier. 

Harbour have full support for CTWIN. In tests/ctwtest.prg you will find
test program. Compile it bu Clipper, Harbour and xHarbour and compare
results - movve windows using arrow keys, hit "B" to disable/enable
borders, "P" for window[0] cross output, etc.

In Harbour CTWIN is implemented as separate GT driver which can inherits
from any other one and adds multi window capability. And now hint:
In Harbour it's possible to implement in the same way GTWVW. It can
inherit from GTWVT adding CTWIN interface so each time when you call:
WOPEN() - new GUI Window can be created so you will not have to change
your source code. Maybe some window developer implement it.

If we are talking about common multi platform GUI then probably Marek's
HbWxW (http://harbour.fm.interia.pl/) is potentially the most portable
library.

But I'm interesting in sth else. I'd like to have library which I can
use with CUI, GUI and WWW Browsers without source code modification.
IMHO today porting application to GUI only mode is a waste of time.
In few years our programs will have to run in WANs and use many different
output devices like PDA, cellar phones, watches ;-)... We will need
interface which will allow to run application remotely in CUI mode and
when user turn off his terminal in scale register ;-) without closing
application on the server and reconnect from office using desktop computer
he should continue his job in GUI mode in the same instance of application
and finally if he will want then we will have to allow him to finish the
job using PDA and WWW browser when he will return to home.
I plan to work on such library in the future.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From makis1970 at gmail.com  Mon Aug  6 07:51:20 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Mon Aug  6 07:55:59 2007
Subject: R: R: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <20070803192434.GB20898@localhost.localdomain>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>	<AFB948164110ED43B5EB849E8DEEF03809A836@SRV02.deltain.net>	<9257026e0708030849g64b57ab4if7b88d5a85d74846@mail.gmail.com>	<AFB948164110ED43B5EB849E8DEEF03809A838@SRV02.deltain.net>	<9257026e0708031000y437dc889rb088548635c631b9@mail.gmail.com>	<001301c7d5f7$e068a020$a139e060$@com>
	<20070803192434.GB20898@localhost.localdomain>
Message-ID: <004d01c7d820$1cbd9c90$5638d5b0$@com>

Przemek,
Congrats for all the work you have done. Harbour from a dead end now gets
new life especially with you work (and all the others). I'm looking-testing
every day the harbour project but it's not possible for me to change from
xharbour. As you remember I'm heavily using RMDBFCDX filters and some
functions from nanfor.lib (FT_Fuse etc), that it's not fully implemented in
Harbour. I hope that someday it will be possible to make the transition.

Thanks for everything
Mike Evans

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Friday, August 03, 2007 10:25 PM
To: Harbour Project Main Developer List.
Subject: Re: RE: R: R: [Harbour] What about a "Replaceable User Interface"?

On Fri, 03 Aug 2007, Mike Evans (Gmail) wrote:
> Exactly. I'm already use wopen function from catools and if I had
something
> like that ....... 
> Using wopen we have a new window. When this window is selected everything
> that displays something in the current window uses as coordinates the
> top,left corner of this window. If somehow this window was a real windows
> object and every @say @get belong as an object to this window then
> everything will be easier. 

Harbour have full support for CTWIN. In tests/ctwtest.prg you will find
test program. Compile it bu Clipper, Harbour and xHarbour and compare
results - movve windows using arrow keys, hit "B" to disable/enable
borders, "P" for window[0] cross output, etc.

In Harbour CTWIN is implemented as separate GT driver which can inherits
from any other one and adds multi window capability. And now hint:
In Harbour it's possible to implement in the same way GTWVW. It can
inherit from GTWVT adding CTWIN interface so each time when you call:
WOPEN() - new GUI Window can be created so you will not have to change
your source code. Maybe some window developer implement it.

If we are talking about common multi platform GUI then probably Marek's
HbWxW (http://harbour.fm.interia.pl/) is potentially the most portable
library.

But I'm interesting in sth else. I'd like to have library which I can
use with CUI, GUI and WWW Browsers without source code modification.
IMHO today porting application to GUI only mode is a waste of time.
In few years our programs will have to run in WANs and use many different
output devices like PDA, cellar phones, watches ;-)... We will need
interface which will allow to run application remotely in CUI mode and
when user turn off his terminal in scale register ;-) without closing
application on the server and reconnect from office using desktop computer
he should continue his job in GUI mode in the same instance of application
and finally if he will want then we will have to allow him to finish the
job using PDA and WWW browser when he will return to home.
I plan to work on such library in the future.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Mon Aug  6 14:20:16 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Aug  6 14:20:22 2007
Subject: [Harbour] Viewer <-> XML <-> Application (was multi UI)
Message-ID: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>

Sorry if I continue but it seems I've got some time to waste :)

Going further to the analysis:

Just an example: under Linux I'll have a myapp.exe linked with gtk and
a myapp.exe linked to gttrm but the since source code is equal by
definition why I need two copy of the app?

Instead imagine a pseudo code like this:

proc getcustcode()

  @ 0, 0 FORM oForm SIZE 24,80

  @ 10, 10 GET cField

  READ

return

The only thing it does in the app when called is to create an XML like:

<gestcustcode>
   <form top="0" left="0" bottom="24" right="24">
      <get top="10" left="10" value=XXXXX var="cField"></get>
   </form>
</getcustcode>

then you have a win/gtk/osx/cgi app called hview.exe that calls:
  myapp.exe at start
  get an ip/port pair
  send a "command" like "GET/GETCUSTCODE" using Inet functions
  the myapp.exe respond with the XML above
  the viewer "render" the XML and when the user push the Enter button
  send the "command" "PUT/GETCUSTCODE" with the updated XML tree
  the myapp.exe found the new value=YYYYYY and update the cField var
  all this until the MSG_QUIT

In this way we've to create only one viewer per GUI and the "main" app
will not be linked to any specific GUI code. This also will easily fit
in the "browser" model of work since the browser is outside the memory
app.

best regards,
Lorenzo
From antonioharbour at gmail.com  Mon Aug  6 18:11:00 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Aug  6 16:11:17 2007
Subject: [Harbour] Viewer <-> XML <-> Application (was multi UI)
In-Reply-To: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>
Message-ID: <59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>

Lorenzo,

> The only thing it does in the app when called is to create an XML  
> like:

IMO it should go the other way round.

There are standard tools to design GUIs forms in the different OS:
In Windows: Resources Editors from Borland, Microsoft, etc. (RC files).
In Mac OSX: Interface builder. (NIB files).
In Linux: Glade for GTK+. (glade files).
In www: Adobe, Microsoft, etc. (HTML files).

Those files could be converted to XML with a special format for  
Harbour. Selecting some common elements, then the same XML file could  
be used for any of those OS.

i.e. FiveWin avoids the use of intermediate XML files and directly  
manages RC, NIB and glade files.

> then you have a win/gtk/osx/cgi app called hview.exe that calls:

There are lots of hosting companies that will not accept CGI apps,  
only PHP. Here I think we should use HRB files. The question is: what  
to use to remotely implement a virtual machine for the HRB files ? PHP ?

regards,

Antonio
From druzus at priv.onet.pl  Tue Aug  7 03:40:18 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Aug  7 03:40:16 2007
Subject: [Harbour] [xHarbour-developers] Problem creating .adt files
In-Reply-To: <11991947.post@talk.nabble.com>
References: <46A6B354.5020302@shaw.ca>
	<20070725120649.GA5797@localhost.localdomain>
	<46A7825E.9070604@shaw.ca> <020901c7cf6a$568b9620$0301a8c0@bh>
	<20070726115503.GB25341@localhost.localdomain>
	<025b01c7cfaf$ccca39a0$0301a8c0@bh>
	<20070727110932.GD10606@localhost.localdomain>
	<11991947.post@talk.nabble.com>
Message-ID: <20070807074018.GA13622@localhost.localdomain>

On Fri, 03 Aug 2007, Pritpal Bedi wrote:
> >I'll be absent for few days. When I'll be back I'll try to create some
> >basic proposition which we can start to discuss. I hope that Marcelo
> >and Jacek (SQLRDD/MEDIATOR) will also take a part in discussion.
> I too would like to participate in the discussion.

Thank you and sorry for long delay. Unfortunately there is very small
chance I will find a time in this week. I'm really sorry but I remember
about it and I'll start discussion ASAP.

best regards,
Przemek
From druzus at priv.onet.pl  Tue Aug  7 03:45:59 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Aug  7 03:45:56 2007
Subject: [Harbour] Just few ideas for 2.0 (very long message sorry)
In-Reply-To: <9257026e0708051116x6808ca77jbf3cd47bddfe0e40@mail.gmail.com>
References: <9257026e0708051116x6808ca77jbf3cd47bddfe0e40@mail.gmail.com>
Message-ID: <20070807074559.GB13622@localhost.localdomain>

On Sun, 05 Aug 2007, Lorenzo Fiorini wrote:
> Sorry for the long message. What about a wiki?
[...]

Lorenzo,

thanks for your message - they always help. I also have some ideas
but I do not have time to work on it now. For sure I'll try to
start some serious work in few months. My knowledge about Clipper
predefined classes is very small - I always used my own libraries
in my programs - so here any help will be very important for me.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Tue Aug  7 03:46:37 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Aug  7 03:46:41 2007
Subject: [Harbour] Viewer <-> XML <-> Application (was multi UI)
In-Reply-To: <59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>
	<59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
Message-ID: <9257026e0708070046u48cc64f3v787fd89348a3ce18@mail.gmail.com>

On 8/7/07, Antonio Linares <antonioharbour@gmail.com> wrote:

Antonio, first of all many thanks for this very interesting thread and
sorry another long replay, but I think this is an extremely important
moment for the future of Harbour.

> There are standard tools to design GUIs forms in the different OS:
> In Windows: Resources Editors from Borland, Microsoft, etc. (RC files).
> In Mac OSX: Interface builder. (NIB files).
> In Linux: Glade for GTK+. (glade files).
> In www: Adobe, Microsoft, etc. (HTML files).

> Those files could be converted to XML with a special format for
> Harbour. Selecting some common elements, then the same XML file could
> be used for any of those OS.

Sorry, probably I was not clear enough. The XML is generated at runtime.
It is the "body" of the message between the viewer and the application.
It is like the SOA approach ( service oriented architecture ) you only
need to know the name of the service ( function ) pass the parameters
and render the XML it returns.
Then call the service ( function ) behind the Ok button ( or whatever
else ) with the right parameters and so on.

As you said we have to forget the desktop and think in the WWW way.
I'd add we need also to start to think in SOA way.
A customers list function of the app is a service called CUSTLIST that
returns a pdf with the customers information. You need only to give
the parameters and view/print/email the pdf. This approach can be used
with almost every application and this is why it is used in large
organizations to glue different kind of
systems/applications/environments.

We need to create only one viewer per platform/GUI ( and since you
have a huge knowledge of win/gt/macosx/wince.... ;).
The community should be interested to participate since every fix or
performance enhancement will benefit everyone and since the viewers
are binary applications, 3rd party could create better ones or add
support for other controls and extended features.
Using HRBs the only OS dependent binaries could be the viewer and hbrun.

Just to give you an idea of what I'm thinking of:
Let's say I've sold a Windows version of my "bill of materials" app to
a customer.
One day he buys a MacOSX since they need a special app for the design
office but they also need to access my "bill of materials" from that
workstation.
In the "desktop way" I'll have some options:
- write a MacOSX version ( for a single customer could be a budget problem )
- install a MacOSX remote access software to connect to another Windows PC
- install an emulation layer to run Windows version

With "viewers" the only thing I have to provide is a "license" ( if
any ) and the MacOSX viewer. The same thing if they wants the app on
WinCE handhelds or via WWW.

Clearly viewers can't replace native applications since they'll look
fairly "standard" and will introduce some performance degradations but
in www/mobile/disconnected world performances are quite relative.

best regards,
Lorenzo
From druzus at priv.onet.pl  Tue Aug  7 03:59:20 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Aug  7 03:59:18 2007
Subject: [Harbour] RE: Harbour Digest, Vol 10, Issue 12
In-Reply-To: <BAY132-W2663081C9CDB49ED2F44D1A7EA0@phx.gbl>
References: <BAY132-W2663081C9CDB49ED2F44D1A7EA0@phx.gbl>
Message-ID: <20070807075920.GC13622@localhost.localdomain>

On Fri, 03 Aug 2007, Pritpal Bedi wrote:
> Hello Everybody
> First timer onboard.

Welcome :-)

> This is an EXCELLENT idea. 
> Being developer of WVTGUI I would like to extend my opinion on the subject. 
> Few years back I implemented pure console (PM) windows of Xbase++ to work
> as GUI windows, the concept I introduced, though in a different way, in
> WVTGUI once Peter Rees contributed GTWVT.  Moreover those PM (Console)
> windows were having multiple GETLISTSs via ReadModal(), all in their own
> thread. I just overhaulled and restructed ReadModal() and associated
> functions to respond to Window in focus. All went well except for the
> period of application execution when user clicked on another window in
> the middle of data input/output in one window. The problem I detected,
> and is well documented in MSDN, was that WM_KillFocus and WM_GetFocus
> messages were not despatched in orderly fashion. All I fould faulty
> message dispatching mechanism of Xbase++. This caused my whole effort
> failing. For sure, Xbase++ has such mechanism in place authenticated by
> the fact that Tbrowse can be tied to one window. And we all know how many
> screen i/o functions are executed to display a browser. I tried to extend
> this behaviour to Get system and I was successful 95% but not 100%.
> We can implement this behavior in all types of GT's. ALL screen output
> functions needs to be tied to an abstract identity, for example: windows
> handle in case of Windows GUI's. Once this basic part is accomplished
> everything else seems to be fairly straight forward. 

I cannot help much with Windows code - you know much more about
Windows API then I and you have much bigger practice. I think
that when we try to define some abstract layer then each of us
will have to say how he can see the implementation in environment
he is using. Probably working on such library we will have to
define some process for any new extensions:
    1. local implementation for given platform - not officially
       supported feature
    2. implementation for other platforms
    3. depending on point 2 success:
         - the extension is removed
         - the extension is kept as platform local officially
           not supported
         - the extension is accepted as official Harbour API
To avoid problems we will have to also keep some strict naming
convention for local and platform independent features.

> I am of the view that user must not have to change the code,
> just add a parameter and there he goes.

Exactly.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Tue Aug  7 04:14:28 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Aug  7 04:14:32 2007
Subject: [Harbour] Just few ideas for 2.0 (very long message sorry)
In-Reply-To: <20070807074559.GB13622@localhost.localdomain>
References: <9257026e0708051116x6808ca77jbf3cd47bddfe0e40@mail.gmail.com>
	<20070807074559.GB13622@localhost.localdomain>
Message-ID: <9257026e0708070114w324fd3bfk16b3c8b1f224405a@mail.gmail.com>

On 8/7/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> I also have some ideas
> but I do not have time to work on it now. For sure I'll try to
> start some serious work in few months.

I'm not asking you to start any work but surely we all be interested
in your ideas and comments.

You are the project leader and nothing will begin until your bless :)

> My knowledge about Clipper
> predefined classes is very small - I always used my own libraries
> in my programs

In fact I also use my own framework that started in Autumn 86 times
and that worked well in C52x. I'm looking at standard C53 classes
simply because they are in the repository and because they are the
only documented standard we can rely on.

best regards,
Lorenzo
From m.renzi at maticasrl.it  Tue Aug  7 04:14:34 2007
From: m.renzi at maticasrl.it (Massimo Renzi (MaticaSrl))
Date: Tue Aug  7 04:14:54 2007
Subject: [Harbour] Starting guide;
In-Reply-To: <d4ce00e70705270556g469626b9r20ec8895bc405131@mail.gmail.com>
References: <d4ce00e70705270556g469626b9r20ec8895bc405131@mail.gmail.com>
Message-ID: <001e01c7d8ca$fd6fe270$2a00df0a@maxsoft>

Hi all.
Exist a StartingGuide to install, configure e test xHarbour (with OpenWatcom
cause the link to Borland c++ 5.5 does not works) ?

Thank you all.

Max
 

From druzus at priv.onet.pl  Tue Aug  7 04:15:40 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Aug  7 04:15:40 2007
Subject: R: R: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <004d01c7d820$1cbd9c90$5638d5b0$@com>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03809A836@SRV02.deltain.net>
	<9257026e0708030849g64b57ab4if7b88d5a85d74846@mail.gmail.com>
	<AFB948164110ED43B5EB849E8DEEF03809A838@SRV02.deltain.net>
	<9257026e0708031000y437dc889rb088548635c631b9@mail.gmail.com>
	<001301c7d5f7$e068a020$a139e060$@com>
	<20070803192434.GB20898@localhost.localdomain>
	<004d01c7d820$1cbd9c90$5638d5b0$@com>
Message-ID: <20070807081540.GD13622@localhost.localdomain>

On Mon, 06 Aug 2007, Mike Evans (Gmail) wrote:
> Congrats for all the work you have done. Harbour from a dead end now gets
> new life especially with you work (and all the others). I'm looking-testing
> every day the harbour project but it's not possible for me to change from
> xharbour. As you remember I'm heavily using RMDBFCDX filters and some
> functions from nanfor.lib (FT_Fuse etc), that it's not fully implemented in
> Harbour. I hope that someday it will be possible to make the transition.

Thanks for kind words.

As I answered to Fernando now I do not plan to public RMAP (RMDBFCDX/
RMDBFNTX) library code. IMHO without xHarbour.com some things like
professional documentation had never been created and if RMAP helps
them to keep their work then at least now I will keep this code
private.
BTW AFAIR binaries from xHarbour.com can be used also in Harbour with
some small wrappers.

Nanfor library can be synced with Harbour quite fast though it should
not be simple copy and past process because some nanfor functions cannot
be implemented in xHarbour but quite easy in Harbour (f.e. functions
which operate on video buffer). So it should be done in similar way as
I ported CT3 xHarbour modifications.

best regards,
Przemek
From druzus at priv.onet.pl  Tue Aug  7 04:19:39 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Aug  7 04:19:37 2007
Subject: [Harbour] ChangeLog 2007-08-07 03:12 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070807081939.GE13622@localhost.localdomain>

2007-08-07 03:12 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbclass.ch
    ! fixed typo: AddClsMthds() => AddClsMethod()
    + added support for executing InitClass() constructor - it's not
      exact Class(y) behavior but rather sth what xHarbour does now.
      It will be change in the future when we will have real class
      methods and variables.

  * harbour/contrib/libct/blank.prg
    ! fixed typo

  * harbour/contrib/libct/dbftools.c
    * added function list in header

  * harbour/contrib/libct/screen1.c
    + added SCREENTEXT()

  * harbour/contrib/libct/disk.c
    - removed DELETEFILE() and FILEMOVE()

  * harbour/contrib/libct/files.c
    + added DELETEFILE(), RENAMEFILE(), FILEMOVE()

  * harbour/contrib/libct/ctwfunc.c
    ! fixed typo in parameters numbers in WFORMAT()

  + harbour/contrib/libct/charsprd.c
    + added CHARSPREAD()

  + harbour/contrib/libct/scrmark.prg
    + added SCREENMARK()

  + harbour/contrib/libct/expand.c
    + added EXPAND()

  + harbour/contrib/libct/fcopy.prg
    + added FILECOPY(), FILECOPEN(), FILECCLOSE(), FILEAPPEND(), FILECDATI()
      it's modified and fixed code by Frederic J. Bell borrowed from
      xHarbour

  * harbour/contrib/libct/Makefile
  * harbour/contrib/libct/makefile.bc
  * harbour/contrib/libct/makefile.vc
    * update for new files. makefile.bc will have to be modified yet
      (some files were missing and I added them to file list) but I'd
      like to leave it for BCC users who can test modifications

best regards,
Przemek
From antonioharbour at gmail.com  Tue Aug  7 05:01:44 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Aug  7 05:01:59 2007
Subject: [Harbour] Viewer <-> XML <-> Application (was multi UI)
In-Reply-To: <9257026e0708070046u48cc64f3v787fd89348a3ce18@mail.gmail.com>
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>
	<59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
	<9257026e0708070046u48cc64f3v787fd89348a3ce18@mail.gmail.com>
Message-ID: <1186477304.5686.29.camel@anto-desktop>

Lorenzo,

> The XML is generated at runtime.

Then I guess it would be simpler to implement different GT<OS>.lib as
Przemek has commented several times. You just link the required GT
library but I guess the final result will be quite poor.

Anyhow, I don't see the different OS support as the real important issue
here. Considering that Windows is the most widely used OS by far, you
can code for Windows and then use Wine on Linux, and CrossOver on Mac
OSX, and you get the job done. FiveWin uses the OS GUI APIs natively, so
we manage GTK+ on Linux and Cocoa on Mac OSX. No need for emulators.

But what about the www ? :-) How can Harbour be used here ? We are
Clipper programmers and we don't want to use PHP, as we are fully
productive using the Clipper language. If you own the host machine then
you can run Harbour apps as CGIs, but there are lots of hosting
companies that will only allow you to use PHP. PHP was specifically
designed for the www. How can Harbour compete with it ?

Up to now, we have focused on a C language virtual machine only. Maybe
its the time to implement new virtual machines for Harbour using
different languages ?

regards,

Antonio

From antonioharbour at gmail.com  Tue Aug  7 05:06:57 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Aug  7 05:07:11 2007
Subject: [Harbour] Starting guide;
In-Reply-To: <001e01c7d8ca$fd6fe270$2a00df0a@maxsoft>
References: <d4ce00e70705270556g469626b9r20ec8895bc405131@mail.gmail.com>
	<001e01c7d8ca$fd6fe270$2a00df0a@maxsoft>
Message-ID: <1186477617.5686.32.camel@anto-desktop>

max,

> Exist a StartingGuide to install, configure e test xHarbour (with OpenWatcom
> cause the link to Borland c++ 5.5 does not works) ?

This Borland link is properly working:
ftp://ftpd.borland.com/download/bcppbuilder/freecommandLinetools.exe

If you want a very friendly Harbour/xHarbour setup you can use:
www.fivetechsoft.com/files/harbour.exe
www.fivetechsoft.com/files/xharbour.exe

regards,

Antonio

From druzus at priv.onet.pl  Tue Aug  7 05:38:06 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Aug  7 05:38:04 2007
Subject: [Harbour] Viewer <-> XML <-> Application (was multi UI)
In-Reply-To: <59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>
	<59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
Message-ID: <20070807093806.GA14920@localhost.localdomain>

On Mon, 06 Aug 2007, Antonio Linares wrote:
> IMO it should go the other way round.
> There are standard tools to design GUIs forms in the different OS:
> In Windows: Resources Editors from Borland, Microsoft, etc. (RC files).
> In Mac OSX: Interface builder. (NIB files).
> In Linux: Glade for GTK+. (glade files).
> In www: Adobe, Microsoft, etc. (HTML files).

And after using the above tools we can forget about portable
multiplatform/multidevice code so it's not any alternative or
solution for us.

> Those files could be converted to XML with a special format for  
> Harbour. Selecting some common elements, then the same XML file could  
> be used for any of those OS.

You are thinking like about GUI only applications.

> i.e. FiveWin avoids the use of intermediate XML files and directly  
> manages RC, NIB and glade files.

Lorenzo proposed XML as type of protocol between client and host.

> >then you have a win/gtk/osx/cgi app called hview.exe that calls:
> There are lots of hosting companies that will not accept CGI apps,  
> only PHP. Here I think we should use HRB files. The question is: what  
> to use to remotely implement a virtual machine for the HRB files ? PHP ?

We can create mod_hb for Apache just like it already has mod_php used
for PHP scripts. It was one of the goal when I was working on compiler
library but it's different subject not important for .prg users which
will use our new output library.
The idea is to hide destination device so user will create the same code
for GUI, CUI and WWW mode. It will not have to know anything about WWW.
He will only use Harbour classes and functions. For sure such universal
library will not allow to use all platform native features but it's not
important for me at all. I only need "good enough" look and feel if
possible similar to other native for given platform applications.

best regards,
Przemek
From m.renzi at maticasrl.it  Tue Aug  7 05:44:32 2007
From: m.renzi at maticasrl.it (Massimo Renzi (MaticaSrl))
Date: Tue Aug  7 05:44:49 2007
Subject: R: [Harbour] Viewer <-> XML <-> Application (was multi UI)
In-Reply-To: <1186477304.5686.29.camel@anto-desktop>
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com><59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com><9257026e0708070046u48cc64f3v787fd89348a3ce18@mail.gmail.com>
	<1186477304.5686.29.camel@anto-desktop>
Message-ID: <002d01c7d8d7$8e6bb4a0$2a00df0a@maxsoft>

Hi,
perhaps we can add a Web Framework to easy develop web in xHarbour.
Develop for web stay for "read" client query (GET/POST) and write a response
to client. 
To have OpenSource Multiplatform and stable solutions, perhaps, it will be
possible writes an Apache Module Extension.

Apache Module Extension is written in C (and C++) to personalize web request
and response.
(see http://thomas.eibner.dk/apache/api.html)

Bye
Max


From m.renzi at maticasrl.it  Tue Aug  7 05:58:36 2007
From: m.renzi at maticasrl.it (Massimo Renzi (MaticaSrl))
Date: Tue Aug  7 05:58:57 2007
Subject: R: [Harbour] Viewer <-> XML <-> Application (was multi UI)
In-Reply-To: <20070807093806.GA14920@localhost.localdomain>
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com><59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
	<20070807093806.GA14920@localhost.localdomain>
Message-ID: <002e01c7d8d9$86e8b910$2a00df0a@maxsoft>

Morning Przemyslaw,
I'm very interesting in your mission to make Developer independent by client
GUI destination.

I like ask you something about:
1. how to make independent write a "selection helper", I mean a window where
user selects a row from a table (like TBrowse) and return some information?
2. In your mission is there TextMode also? If yes, how to translate a
comboBox in TextMode? (perhaps making a behind open TBrowse)
3. In your mission is there Telnet client?

Coding for web it's very different from coding for desktop application cause
it's STATE LESS. This is mean that information need to be stored on server. 
I think it's very hard code independent desktop/state-less application.
But I like tips you a thing, I remember that in Clipper exist SAVE MEMORY,
we can use this features to save user session environment variables.

Thank you very much for your time,

Bye

Max


From lorenzo.fiorini at gmail.com  Tue Aug  7 05:59:16 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Aug  7 05:59:22 2007
Subject: [Harbour] Viewer <-> XML <-> Application (was multi UI)
In-Reply-To: <1186477304.5686.29.camel@anto-desktop>
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>
	<59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
	<9257026e0708070046u48cc64f3v787fd89348a3ce18@mail.gmail.com>
	<1186477304.5686.29.camel@anto-desktop>
Message-ID: <9257026e0708070259j1993ee46yd123a4074b6c7749@mail.gmail.com>

On 8/7/07, Antonio Linares <antonioharbour@gmail.com> wrote:

> Then I guess it would be simpler to implement different GT<OS>.lib as
> Przemek has commented several times. You just link the required GT
> library but I guess the final result will be quite poor.

This was were I started but in this way you need an OSX machine and
OSX skills to generate an OSX app and a Linux GTK with Linux skills...
and so on.
You've seen in the past days with gnome-commander how difficult is
simply to move between systems. Today I'm maintaining the same apps
using C53b/FiveWin16bit, Harbour gtwc/gttrm/gtwvt and I've started to
use hwgui win/gtk on both Linux and Windows. Getting all this working
is becoming hard and all to get the same screens everywhere. I'm
looking for a next 10 years solution.

> Anyhow, I don't see the different OS support as the real important issue
> here.  Considering that Windows is the most widely used OS by far, you
> can code for Windows and then use Wine on Linux, and CrossOver on Mac
> OSX, and you get the job done.

Considering "incomes" I'm 80 Linux 20 Windows. Windows market here is
dominated by M$ partners with Navision/Dynamics or with VisualX
certified applications.

> But what about the www ? :-) How can Harbour be used here ? We are
> Clipper programmers and we don't want to use PHP, as we are fully
> productive using the Clipper language. If you own the host machine then
> you can run Harbour apps as CGIs, but there are lots of hosting
> companies that will only allow you to use PHP. PHP was specifically
> designed for the www. How can Harbour compete with it ?

I think we do not compete with PHP. We don't create web sites. I don't
know a single company that has ever moved their accounting/business
data on "cheap/public/php" providers ( at least in my country there
are so many implications about privacy, reliability and security that
you'll be soon in troubles ) and every virtual server solution allows
to install whatever you want.
AFAIK the most common situation is to provide access to an internal
web server to sales force and  selected "authenticated" partners often
using a simple ADSL with static IP.

> Up to now, we have focused on a C language virtual machine only. Maybe
> its the time to implement new virtual machines for Harbour using
> different languages ?

Sorry I'm not a "low level" guru I can't say much about this.

best regards,
Lorenzo
From antonioharbour at gmail.com  Tue Aug  7 06:07:14 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Aug  7 06:07:29 2007
Subject: [Harbour] Viewer <-> XML <-> Application (was multi UI)
In-Reply-To: <20070807093806.GA14920@localhost.localdomain>
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>
	<59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
	<20070807093806.GA14920@localhost.localdomain>
Message-ID: <1186481234.5686.55.camel@anto-desktop>

Przemek,

> And after using the above tools we can forget about portable
> multiplatform/multidevice code

i.e. FiveWin allows the use of those tools and it offers portable code. 

Do you plan to design professional looking GUI apps using "hand coded"
@ ..., ... commands instead of "mouse designed" WYSIWYG forms ?

> We can create mod_hb for Apache just like it already has mod_php used
> for PHP scripts.

How many hosting companies do you think that will allow to install that
mod_hb ? None of them, I tell you. They don't want troubles on their
servers. They just trust in highly stable and secure standards.

regards,

Antonio

From lorenzo.fiorini at gmail.com  Tue Aug  7 06:16:36 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Aug  7 06:16:39 2007
Subject: R: [Harbour] Viewer <-> XML <-> Application (was multi UI)
In-Reply-To: <002e01c7d8d9$86e8b910$2a00df0a@maxsoft>
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>
	<59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
	<20070807093806.GA14920@localhost.localdomain>
	<002e01c7d8d9$86e8b910$2a00df0a@maxsoft>
Message-ID: <9257026e0708070316l50d503e2pabfcc2122e98782e@mail.gmail.com>

On 8/7/07, Massimo Renzi (MaticaSrl) <m.renzi@maticasrl.it> wrote:

I'm not Przemyslaw but... :)

> 1. how to make independent write a "selection helper", I mean a window where
> user selects a row from a table (like TBrowse) and return some information?

Have you read my previous msg about adding lookup block to get?

> 2. In your mission is there TextMode also? If yes, how to translate a
> comboBox in TextMode? (perhaps making a behind open TBrowse)

In the same msg I planned to add combos but I also argued that maybe
the lookups are more flexibles

> 3. In your mission is there Telnet client?

I'm sure it is. Actually gttrm work great on telnet/ssh clients like putty.

> Coding for web it's very different from coding for desktop application cause
> it's STATE LESS. This is mean that information need to be stored on server.
> I think it's very hard code independent desktop/state-less application.
> But I like tips you a thing, I remember that in Clipper exist SAVE MEMORY,
> we can use this features to save user session environment variables.

Your vars are still in your exe. The only things that should be
exchanged are the "controls contents". Clearly apps should be coded
with file trasfer in mind.
If you have ever written a web app you know how bad is to have sql
that extract hundreds of rows that has to rendered with tables. In the
same way you have to narrow the user request as much as possible
BEFORE the tbrowse.

Please keep in mind that these is only "vaporware" at the moment.
Many things will never happen and the what will happen will be surely
different :)

P.S. could you kindly configure your mail app to replay with Re: instead of R:?
GMail does not thread it correctly

best regards,
Lorenzo
From antonioharbour at gmail.com  Tue Aug  7 06:44:47 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Aug  7 06:45:00 2007
Subject: [Harbour] Viewer <-> XML <-> Application (was multi UI)
In-Reply-To: <9257026e0708070259j1993ee46yd123a4074b6c7749@mail.gmail.com>
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>
	<59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
	<9257026e0708070046u48cc64f3v787fd89348a3ce18@mail.gmail.com>
	<1186477304.5686.29.camel@anto-desktop>
	<9257026e0708070259j1993ee46yd123a4074b6c7749@mail.gmail.com>
Message-ID: <1186483487.5686.79.camel@anto-desktop>

Lorenzo,

> I think we do not compete with PHP. We don't create web sites. 

I prefer to think about web applications, not web sites :-)

> I don't know a single company that has ever moved their accounting/business
> data on "cheap/public/php" providers

Same as there are small/medium companies and large companies, there are
requirements for cheap solutions and for expensive solutions too. 

Its like saying that you just code for large companies. I know about
lots of software development companies that have done lots of money just
coding cheap and very popular applications. Both are equally important.

regards,

Antonio

From lorenzo.fiorini at gmail.com  Tue Aug  7 06:44:58 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Aug  7 06:45:03 2007
Subject: [Harbour] First text viewer example :)
Message-ID: <9257026e0708070344s50b26e6eo2fb9a1cd9a7f07e8@mail.gmail.com>

Build it using  hbmk -b -n -static -gtxxx viewer and run using viewer form1.txt
Since Harbour does not have an XML lib I've used another format :)
Replace dispbox()/read with your favorite win/gtk lib window/dialog
code and you'll get the first win/gtk viewer.

Imagine form1.txt coming from an inet socket and more if clauses and...

best regards,
Lorenzo

/* form1.txt */

FORM;10;10;20;70;;SAY;11;11;Hello what's your
name?;@!;;GET;12;11;harbour;@!;cField;;

/* viewer.prg */

#include "fileio.ch"

procedure main( cGuiFile )

   local aSchema := Schema2Array( cGuiFile )
   local nRows := len( aSchema )
   local nRow
   local aCols

   if nRows > 0

      for nRow := 1 to nRows
         aCols := aSchema[ nRow ]
         if aCols[ 1 ] == "FORM"
            dispbox( val( aCols[ 2 ] ), val( acols[ 3 ] ), val( aCols[
4 ] ), val( acols[ 5 ] ) )
         elseif aCols[ 1 ] == "GET"
            &(aCols[ 6 ]) := aCols[ 4 ]
            @ val( aCols[ 2 ] ), val( acols[ 3 ] ) GET cField PICTURE aCols[ 5 ]
         elseif aCols[ 1 ] == "SAY"
            @ val( aCols[ 2 ] ), val( acols[ 3 ] ) SAY aCols[ 4 ]
PICTURE aCols[ 5 ]
         endif
      next

   endif

   read

   alert( cField )

return

function Schema2Array( cFname )

   local nRows
   local aRows
   local nCount
   local nCols
   local aCols
   local cSchema
   local aSchema := {}

   cSchema := filereadall( cFname )

   if cSchema != nil

      aRows := HB_ATOKENS( cSchema, ";;" )

      nRows := len( arows )

      for nCount := 1 to nRows
         aCols := HB_ATOKENS( aRows[ nCount ], ";" )
         aadd( aSchema, aCols )
      next nCount

   endif

   return aSchema

function filereadall( cFname )

   local nFile
   local nMaxLen
   local cBuffer
   local nRead

   nFile := fopen( cFname )

   if nFile > 0

      nMaxLen := fseek( nFile, 0, FS_END )
      cBuffer := space( nMaxLen )
      fseek( nFile, 0, FS_SET )
      nRead := fread( nFile, @cBuffer, nMaxLen )
      if nRead != nMaxLen
         cBuffer := nil
      endif

   endif

   fclose( nFile )

   return cBuffer
From toninhofwi at yahoo.com.br  Tue Aug  7 06:49:50 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Aug  7 06:49:55 2007
Subject: [Harbour] Starting guide;
In-Reply-To: <001e01c7d8ca$fd6fe270$2a00df0a@maxsoft>
References: <d4ce00e70705270556g469626b9r20ec8895bc405131@mail.gmail.com>
	<001e01c7d8ca$fd6fe270$2a00df0a@maxsoft>
Message-ID: <jejgb31he66kktn6i3i5fr8h992hjm8c18@4ax.com>

Hi Max,

If you can, I have uploaded it in rapidshare.

Here is the links for bcc 5.82 compiler. Only uncompress it in any
folder and is ready to use. Look at xharbour dir, inside the package
for bcc32.cfg file that I use and some .bat files.

If you can use your config or path from old bcc55, only you need is
add: \bccfolder\include\dinkumware to exiting include path.

http://rapidshare.com/files/30539513/Bcc55.7z.001
http://rapidshare.com/files/30442674/Bcc55.7z.002
http://rapidshare.com/files/30564752/Bcc55.7z.003

Use 7z to uncompress it.

Password: xharbourpower

Regards,

Toninho.



	

	
		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op誽o para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From antonioharbour at gmail.com  Tue Aug  7 07:04:53 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Aug  7 07:05:08 2007
Subject: [Harbour] First text viewer example :)
In-Reply-To: <9257026e0708070344s50b26e6eo2fb9a1cd9a7f07e8@mail.gmail.com>
References: <9257026e0708070344s50b26e6eo2fb9a1cd9a7f07e8@mail.gmail.com>
Message-ID: <1186484693.5686.85.camel@anto-desktop>

Lorenzo,

You can replace function filereadall( cFname ) with
MemoRead( cFname ) :-)

Anyhow, I don't see your point. Its not a critic, really, its that I
don't see any advantage.

Thats just a data driven application, no matter if you read the data
from a dbf, any file, a socket, etc (any stream).

regards,

Antonio

From druzus at priv.onet.pl  Tue Aug  7 07:23:53 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Aug  7 07:23:50 2007
Subject: [Harbour] Viewer <-> XML <-> Application (was multi UI)
In-Reply-To: <1186481234.5686.55.camel@anto-desktop>
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>
	<59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
	<20070807093806.GA14920@localhost.localdomain>
	<1186481234.5686.55.camel@anto-desktop>
Message-ID: <20070807112353.GA16301@localhost.localdomain>

On Tue, 07 Aug 2007, Antonio Linares wrote:
> Przemek,
> > And after using the above tools we can forget about portable
> > multiplatform/multidevice code
> i.e. FiveWin allows the use of those tools and it offers portable code. 

For CUI and WWW?

> Do you plan to design professional looking GUI apps using "hand coded"
> @ ..., ... commands instead of "mouse designed" WYSIWYG forms ?

No, where did I suggest anything like that?

> > We can create mod_hb for Apache just like it already has mod_php used
> > for PHP scripts.
> How many hosting companies do you think that will allow to install that
> mod_hb ? None of them, I tell you. They don't want troubles on their
> servers. They just trust in highly stable and secure standards.

1. I know some hosting companies which trust me enough to install
   what I'll suggest because they need stable and secure standards :-)
2. I do not plan to use any hosting companies for my business application
   just like 95% percent or more Harbour users so it's not a problem at
   all.
3. You cut the most important part from my message so I repeat that
   it has nothing to our new output library.
4. For our new library we will not need any external WWW server.
5. From the beginning I'm talking about running binaries on the host
   and connecting to the same instance of program using different
   terminals. It means that we have to be able to run binaries on
   host so your comments about limits in running binaries (f.e. CGI)
   on some 3-rd party companies computers does not have any sense in
   this discussion. If we will talk about mod_hb, xbase scripts or sth
   like that then we can start discussion about hosting companies and
   their security standards. Many of the modifications in Harbour core
   code I done in last year was for increasing security and protection
   against wrong user code which may intentionally try to break HVM.
   Still some things have to be changed and some functions excluded
   but know we are quite close to create such HVM version but it's
   other subject.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Tue Aug  7 07:30:56 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Aug  7 07:31:04 2007
Subject: [Harbour] Viewer <-> XML <-> Application (was multi UI)
In-Reply-To: <1186483487.5686.79.camel@anto-desktop>
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>
	<59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
	<9257026e0708070046u48cc64f3v787fd89348a3ce18@mail.gmail.com>
	<1186477304.5686.29.camel@anto-desktop>
	<9257026e0708070259j1993ee46yd123a4074b6c7749@mail.gmail.com>
	<1186483487.5686.79.camel@anto-desktop>
Message-ID: <9257026e0708070430x22f55ae2pe05e06017cf8b16d@mail.gmail.com>

On 8/7/07, Antonio Linares <antonioharbour@gmail.com> wrote:

> I prefer to think about web applications, not web sites :-)

Yes the boundaries in www world are so indefinite :)

best regards,
Lorenzo
From antonioharbour at gmail.com  Tue Aug  7 08:05:04 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Aug  7 08:05:19 2007
Subject: [Harbour] Viewer <-> XML <-> Application (was multi UI)
In-Reply-To: <20070807112353.GA16301@localhost.localdomain>
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>
	<59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
	<20070807093806.GA14920@localhost.localdomain>
	<1186481234.5686.55.camel@anto-desktop>
	<20070807112353.GA16301@localhost.localdomain>
Message-ID: <1186488304.5686.107.camel@anto-desktop>

Przemek,

> > i.e. FiveWin allows the use of those tools and it offers portable code. 
> 
> For CUI and WWW?

CUI yes, since long time ago (FiveDos). Exactly same syntax. With
windows image internal buffering, etc. Very nice and fast, similar to
FoxPro MsDos windowing.

Not for WWW yet.

> > Do you plan to design professional looking GUI apps using "hand coded"
> > @ ..., ... commands instead of "mouse designed" WYSIWYG forms ?
> 
> No, where did I suggest anything like that?

In that case, you do need to use a designer. Do you plan to build a
designer ?

> 1. I know some hosting companies which trust me enough to install
>    what I'll suggest because they need stable and secure standards :-)
> 2. I do not plan to use any hosting companies for my business application
>    just like 95% percent or more Harbour users so it's not a problem at
>    all.

Then it may be a valid solution for you, but not for all of Harbour
users.

> 5. From the beginning I'm talking about running binaries on the host
>    and connecting to the same instance of program using different
>    terminals.

Then it looks as we are talking about different things :)

>    Many of the modifications in Harbour core
>    code I done in last year was for increasing security and protection
>    against wrong user code which may intentionally try to break HVM.

In that case, it looks as multithreading is one of the most important
requisites, and we don't even have a first release of it.

Is it your point to run an application on a server and then accessing it
from different OS and getting the (limited) look of the OS ? If so,
whats the advantage of that ? To make the customer temporarly happy ? :)

The customer soon will be requiring specific OS features support that
your application will not be able to provide. 

regards,

Antonio

From lorenzo.fiorini at gmail.com  Tue Aug  7 08:28:39 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Aug  7 08:28:43 2007
Subject: [Harbour] First text viewer example :)
In-Reply-To: <1186484693.5686.85.camel@anto-desktop>
References: <9257026e0708070344s50b26e6eo2fb9a1cd9a7f07e8@mail.gmail.com>
	<1186484693.5686.85.camel@anto-desktop>
Message-ID: <9257026e0708070528q445de213sb130963ea859fb8c@mail.gmail.com>

On 8/7/07, Antonio Linares <antonioharbour@gmail.com> wrote:

> You can replace function filereadall( cFname ) with
> MemoRead( cFname ) :-)

Many thanks.

> Anyhow, I don't see your point. Its not a critic, really, its that I
> don't see any advantage.
>
> Thats just a data driven application, no matter if you read the data
> from a dbf, any file, a socket, etc (any stream).

For me is completely different.
The application can be here in Italy while the viewer can be there in Spain.
Also the app can be on Linux server while the viewer can be on a
Windows client, or if you prefer the app can be on a Windows server
while the viewer can be a WindowsCE handheld.

best regards,
Lorenzo
From philb at philb.us  Tue Aug  7 08:38:01 2007
From: philb at philb.us (Phil Barnett)
Date: Tue Aug  7 08:42:08 2007
Subject: [Harbour] Beta Process
Message-ID: <200708070838.01405.philb@philb.us>

Prezemek,

Do we need another Beta cycle, or are we ready to prepare Release Candidate 1?

-- 
Phil Barnett
AI4OF
SKCC #600
From druzus at priv.onet.pl  Tue Aug  7 09:17:01 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Aug  7 09:17:09 2007
Subject: [Harbour] Beta Process
In-Reply-To: <200708070838.01405.philb@philb.us>
References: <200708070838.01405.philb@philb.us>
Message-ID: <20070807131701.GA17051@localhost.localdomain>

On Tue, 07 Aug 2007, Phil Barnett wrote:
> Prezemek,
> Do we need another Beta cycle, or are we ready to prepare Release Candidate 1?

IMHO we should release last BETA4 and next one will be RC1 I hope.
Today or tomorrow I'll sync fixes in DEVEL end BETA3 branch
and we can start release process.

best regards,
Przemek
From antonioharbour at gmail.com  Tue Aug  7 09:22:44 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Aug  7 09:23:00 2007
Subject: [Harbour] First text viewer example :)
In-Reply-To: <9257026e0708070528q445de213sb130963ea859fb8c@mail.gmail.com>
References: <9257026e0708070344s50b26e6eo2fb9a1cd9a7f07e8@mail.gmail.com>
	<1186484693.5686.85.camel@anto-desktop>
	<9257026e0708070528q445de213sb130963ea859fb8c@mail.gmail.com>
Message-ID: <1186492964.5686.110.camel@anto-desktop>

Lorenzo,

> The application can be here in Italy while the viewer can be there in Spain.
> Also the app can be on Linux server while the viewer can be on a
> Windows client, or if you prefer the app can be on a Windows server
> while the viewer can be a WindowsCE handheld.

Why don't use SSH ?

regards,

Antonio

From lorenzo.fiorini at gmail.com  Tue Aug  7 09:44:24 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Aug  7 09:44:30 2007
Subject: [Harbour] First text viewer example :)
In-Reply-To: <1186492964.5686.110.camel@anto-desktop>
References: <9257026e0708070344s50b26e6eo2fb9a1cd9a7f07e8@mail.gmail.com>
	<1186484693.5686.85.camel@anto-desktop>
	<9257026e0708070528q445de213sb130963ea859fb8c@mail.gmail.com>
	<1186492964.5686.110.camel@anto-desktop>
Message-ID: <9257026e0708070644r18872189u5d7137fd8496ef19@mail.gmail.com>

On 8/7/07, Antonio Linares <antonioharbour@gmail.com> wrote:

> Why don't use SSH ?

I would surely use SSH in that case but SSH is a "communication"
protocol and has nothing to do with the GUI.

But I would need an "X server" on the Windows client Pc to run the GTK
GUI of the Linux server but for example I couldn't easily run a
Windows application from a Linux box or from a MacOSX.

Think at viewer<->XML<->application is just like browser<->XHTML<->http server.

It doesn't matter where run the browser and where run the server they
need only to manage correctly the "protocol".

best regards,
Lorenzo
From dbtopas at dbtopas.lt  Tue Aug  7 09:32:49 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Aug  7 09:51:55 2007
Subject: [Harbour] What about a "Replaceable User Interface"?
In-Reply-To: <20070803192434.GB20898@localhost.localdomain>
References: <9257026e0708030621l45504efbye2e139afbec6823d@mail.gmail.com>	<AFB948164110ED43B5EB849E8DEEF03809A836@SRV02.deltain.net>	<9257026e0708030849g64b57ab4if7b88d5a85d74846@mail.gmail.com>	<AFB948164110ED43B5EB849E8DEEF03809A838@SRV02.deltain.net>	<9257026e0708031000y437dc889rb088548635c631b9@mail.gmail.com>	<001301c7d5f7$e068a020$a139e060$@com>
	<20070803192434.GB20898@localhost.localdomain>
Message-ID: <46B87481.7060400@dbtopas.lt>

Hello,


it seems, everyone is interested in CUI/GUI/WWW with the same source. 
It's a problem that makes me still thing about it, when I go to sleep, 
for the last half of the year. I a spear time I try to write some 
AJAX/PHP code to implement a browser widget via WWW.

I've done some remote GUI terminal tests last December, and I've post a 
letter to xharbour developers mailing list  (the letter is cited in the 
end of this message). But I want to my terminal to by multiplatform, so 
I've started a similar work on implementing GTK+ calls via TCP. I've 
also found a similar inactive project: http://ntw.sourceforge.net/


Przemyslaw Czerpak wrote:
> But I'm interesting in sth else. I'd like to have library which I can
> use with CUI, GUI and WWW Browsers without source code modification.
> IMHO today porting application to GUI only mode is a waste of time.
> In few years our programs will have to run in WANs and use many different
> output devices like PDA, cellar phones, watches ;-)... We will need
> interface which will allow to run application remotely in CUI mode and

Do you think about a specific existing multiplatform GUI like wxWidgets 
or GTK? Or are you talking about implementation of our own GUI? (I found 
GTK the most useful in this case).


> when user turn off his terminal in scale register ;-) without closing
> application on the server and reconnect from office using desktop computer
> he should continue his job in GUI mode in the same instance of application
> and finally if he will want then we will have to allow him to finish the
> job using PDA and WWW browser when he will return to home.

I see a difficulty here if some widgets library is used. Because GUI 
application can have a few opened modal dialogs. Application's CPU stack 
is executing (recursively) a several message processing loops. How can 
such application state be restored after reconnection from another terminal?
Of cause, it can be done if the whole windows managers is implemented on 
the server side and only GUI image is send over the network. But 
implementation of windows managers itself is a big job and network 
traffic for "server side GUI" application is much bigger, than for 
client side widgets.

> I plan to work on such library in the future.
Does anyone have a time machine??? :)


Antonio Linares wrote:
> If you own the host machine then 
> you can run Harbour apps as CGIs, but there are lots of hosting
> companies that will only allow you to use PHP

Perhaps you needs are different, but in my case, I do not need a Harbour 
application on web site hosted by another company. In many cases I need 
a possibility to install a Linux computer and use it as database 
application server for my customers. The other workstations usually are 
WinXP. A remote GUI terminals or WWW terminals is the thing I need!


> Up to now, we have focused on a C language virtual machine only. Maybe
> its the time to implement new virtual machines for Harbour using
> different languages ?

I thing implementation of HVM in PHP or another vitual machine will be 
very slow. The only possible solution is not to implement the HVM 
itself, but try to convert HVM PCode to ex., PHP PCode, and pass 
converted PCode to PHP VM.


> Do you plan to design professional looking GUI apps using "hand coded"
> @ ..., ... commands instead of "mouse designed" WYSIWYG forms ?

I do not know if Przemek uses any "mouse designer", but after I've tried 
  "hand coded" and "visually designed" coding style, I've understood I'm 
a programmer but not designer.
Of cause if you need to think about coordinates @ ..., ... for every 
widget, I can not make a good widget layout. But this fixed coordinates 
approach is not very good. In different OS the same widget (ex., 
RadioButton) can have a different dimension, so fixed coordinates is not 
good as well as mouse designed dialogs. I prefer layout widgets to do 
dialog. Currently (well, already for 7 years...) in our company, we use 
a pretty crazy(!) 3 letter description for position of any widget 
(letters corresponds to something like: LEFT, RIGHT, TOP, BOTTOM, 
CENTER, VCENTER, etc...). All dialogs are "hand coded" and widgets' 
positions are calculated using its layout descriptions.



-------- Original Message --------
Subject: Remote terminal
Date: Tue, 12 Dec 2006 17:10:31 +0200
From: Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>
To: xharbour-developers@lists.sourceforge.net

Hello,


Rodd Graham, GAS wrote:
    > Platform independent OOP gui model with Win32 driver

Przemyslaw is also working on GTNET. This letter is on related subject.
I want to share my ideas and discuss about remote terminal solution. See
attachment.


Best regards,
Mindaugas


=================== Attachment: docs.txt ====================

History
=======
     After I've found Clip-4-Win product I've understood that Clipper
application can perfectly run on Windows OS. Memory management, startup
and a few other functions should be rewritten. Our company was able to
buy Clip-4-Win, but we had bad experienced with other product (we
send self contained bug samples to Successware for 5 or more times,
but SIX3 bugs were not fixed). So, we decided to write memory
management functions ourselves. I've started to analyse internals of
Clipper in early 1996. After half a year we had a working "Hello,
World" under Win16 and Clipper. After implementetion of WinAPI wrapper
functions and creation of some GUI control objects like browse, we
had first Win16 database application in 1997. We call our library
CAWI (Clipper Application Windows Interface).
     Later we rewrote wrapper functions and GUI objects under Win32 and
now we are successfully using CAWI32 to write true Win32 GUI xHarbour
applications.


Problems
========
     We are very satisfied with our current "programming enviroment",
but we have to problems:

1) Windows file sharing is not very suitable for database applications.
We use Advantage Database Server to avoid index corruption, but ADS
seems to expensive for smaller customers;

2) customer are also seeking for terminal solutions. Quite often the
subdivisions of a company are in a few cities, but they want to share
the same database. They are forced to buy microsoft terminal server
licences and use internet connection.

     The alternative for ADS could be NETRDD. More complex (requires
some rewrite of application) solution for both of problems could be a
Linux server with locally running server application and remote GUI
terminal. I do not know exactly what is in Przemyslaw's head, but
probabily he call this GTNET.

     I want to share and discuss the ideas about remote GUI terminal
implementation. I know I can implement it alone in a year, but my
implementation will be not multiplatform, a little bit adapted to
the needs of our company, a little bit hacky and it will be not the
thing I can upload to CVS (just like my CAWI32 library now).


Ideas
=====
   - Server code depends only on socket functions, so it is easy to make
     it multiplatform. Terminal part could be implemented on native GUI
     on Win32 and using GTK on Linux. This will make terminal part to be
     multiplatform. So, we need two terminal applications, but terminal
     application is universal (except you want to implement new
     controls/widgets).

   - Control layout. People in our company were to lazy to work with
     dialog form designers and do not like "visual programming" approach
     very much. So, we implemented a layout management in our CAWI
     library. This is a great thing! It allows dialog to be resized!
     This should be implemented.

   - I suggest using UTF8 for server code and network transfer.

   - Control, browse, column, menu ids should be string typed. This will
     help to avoid meaningless constants and defines. Hash can easy do
     all nessesary job.

   - Code should be executed on one side: server or client! Otherwise
     inconsistent server/client state could appear. Ex., server sent
     a command to destroy dialog, but client at the same time sent
     notification command which should open a new child for this dialog.
     So, all network I/O could be done in synchronous way.

   - The number of commands (methods) which requires an answer from
     remote site should be minimal!
     Ex., the typical place to create dialog's child controls is
     WM_CREATE message in dialog callback function. So, after
     CreateWindow() return, all childs controls are already created.
     This technique is slow in network enviroment since we must
     forward WM_CREATE back to server and return after controls are
     created:

         Server side                     Terminal side
         =====================           ======================
         CreateWindow (dialog)  ---->    CreateWindow()
                                         |
         WM_CREATE              <----    WM_CREATE
         |
         CreateWindow (child)   ---->    CreateWindow()
                                         |
         hwndChild              <----    return from CreateWindow()
         |
         return from WM_CREATE  ---->
                                         |
         hwndDialog             <----    return from CreateWindow()
         |

     In this case we have triple network round-trip time, for creation
     of such dialog. This would noticable even in LAN, if the number of
     controls is large.

     If we create child controls after return from CreateWindow
     (WM_CREATE is empty or processed on terminal side) we reduce
     creation time. To avoid blinking of the created dialog and control
     we need to create dialog invisible and show it after control
     creation.

         CreateWindow (dialog)  ---->    CreateWindow()
                                         |
         hwndDialog             <----    return from CreateWindow()
         |
         CreateWindow (child)   ---->    CreateWindow()
                                         |
         hwndChild              <----    return from CreateWindow()
         |
         ShowWindow   (dialog)  ---->    ShowWindow()
         |

     If we can omit ShowWindow() result we reduce creation time to
     double network round-trip time.

     The return value of CreateWindow() is window handle hwnd, which
     is used to identify window in the following function calls. If
     we use some other object/window identification method we can
     drop CreateWindow() response packet. Solution could be the
     following: unique ids are sent from server side and after creation
     of window, the obtained hwnd is bound to the id.

         CreateWindow id1 (dialog)   ---->  CreateWindow(),
         |                                  |  hwndDialog <-> id1
         CreateWindow id2 (child)    ---->  CreateWindow(),
         |                                  |  hwndChild <-> id2
         ShowWindow id1              ---->  ShowWindow( hwndDialog )
         |

     Using this approach, dialog creation time does not have network
     round-trip time component at all. Server sends commands and
     terminal creates controls in parallel.

   - Usualy window generates a huge number of notification messages, ex.,
     mouse move over window. Most of them should be processed on terminal
     side and only registered messages should be sent to server. For ex.,
     if we have checkbox in a dialog and we want to enable/disable other
     dialog controls if this checkbox is clicked, we need to register
     "onclick" message for this checkbox and do required enable/disable
     operations on "onclick" notification message. If message is not
     registered, notification messages will not be sent to the server and
     other control will be independent from the state of checkbox.

     It is possible to implement macro or even PCode transfer from server
     to terminal and process some notification messages locally and this
     way even more reduce required network traffic.


Problems to solve
=================
   - How objects are identified in communication protocol? Is current
     :nTID ok?

   - If object is destroyed (no more references) on terminal, do we
     need to destroy it on server? Vice-versa?

   - Howto stream method/function call to the network? What protocol to
     use? How to call method with variable number of parameters?
       hb_vmPushSymbol( method )
       hb_vmPush( pitemObject )
       hb_vmPush( pitemParam1 )
       ...
       hb_vmPush( pitemParamN )
       hb_vmSend( N )
     How to hold method symbols? Can we use method names? How slow is
     resolving symbol from name?

   - Can objects be created on terminal (ex., some terminal extensions,
     terminal side dialogs)? Do they have its ids (:TID)? Can these
     controls send notification messages to server? Can method of these
     objects be called by server code?

   - Class hierarchy

   - In gtk, widgets are created without parent and later are added to
     container and get parent this way. In Windows, it is required to
     have handle of parent during widget creation process. Windows does
     not create widgets if parent is NULL.
     The other difference is that layout is not a real widget's parent
     in Windows, the real parent is dialog.
     I've tried to do workaround. I've created widgets with dummy
     (existing, but hidden) parent, and when widget is added to layout,
     I change widget's parent to the dialog which owns layout (using
     SetParent()).
     From the first look it was a nice solution. The only limitation is
     that the layout should be added to dialog before widget is added to
     the layout. But this could be documented.
     But later I found a problem, SetParent() puts widget into the front
     of child widgets list (but not to the end of the list like in
     normal widget creation process). So, TAB key actives such widgets
     in reversed order.
     It seems, the better solution in this situation is lazy widget
     creation. Widgets should be created after widget objects are added
     to the layout and dialog is to be displayed.

   - The selection of activate widget using TAB key is also implemented
     in very strange way in windows.
     Application architecture is message oriented, but implementation of
     TAB key in dialog boxes requires to alter main message processing
     loop. The function IsDialogMessage() should be added to this loop.
     This function processes keyboard and some other messages to
     implement TAB key function (and some other functions) for the
     dialog box. The main problem is that handle of active dialog should
     be passed to this function.
     It is not a problem if we have modal dialog, it has its own message
     processing loop with IsDialogMessage() call. But if we have
     modeless dialog, we must pass handle of active dialog to the main
     message processing loop which is very independent code from the
     dialog itself. We must use some static variables, etc., to pass this
     handle. The problem is more difficult if we have several modeless
     dialogs, or the want to place widgets inside MDI childs and have TAB
     key functionality. We must pass handle of active dialog to
     IsDialogMessage(), i.e., we must change the static handle variable
     on each window activation/deactivation.
     I'm not familiar how this is implemented in other OS.


Sample application
==================
   - I've put source.zip and demo executables (Win32) on the web at
     http://www.dbtopas.lt/hrb
     You can download it, if you are interested in.

   - Files:
     source.zip
         Contains demo source code. File rapp.prg is terminal application
         server. Such code should be writen by application programmers.
         The rest of code (rterm.prg and src\ files) are to be written by
         remote terminal library developers.
         Code is not fully self contained. The source of WinAPI wrapper
         library (CAWI32) is missing, but you can understand what function
         do, by name of the function. Win32 API references is also
         available on the web. Server (application) code is almost
         multiplatform. The only depend on socket api. Perhaps, dropping
         WSAStartup() and WSACleanup() calls is the only change needed to
         run it on Linux.

     rtapp.exe [ <ip_port> ]
         Default <ip_port> is 9215

     rterm.exe [ tcp://<host>:<port> ]
         Default parameter is tcp://localhost:9215











From M.Horodyski at pzuzycie.com.pl  Tue Aug  7 09:56:42 2007
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Tue Aug  7 09:56:47 2007
Subject: [Harbour] RE: Harbour Digest, Vol 10, Issue 18
Message-ID: <503AD832DBBF60469E9F807668A2F6A20261F74F@PINK.zycie.pzu>

>------------------------------
>
>Message: 8
>Date: Tue, 07 Aug 2007 14:05:04 +0200
>From: Antonio Linares <antonioharbour@gmail.com>
>Subject: Re: [Harbour] Viewer <-> XML <-> Application (was multi UI)
>To: "Harbour Project Main Developer List."
>	<harbour@harbour-project.org>
>Message-ID: <1186488304.5686.107.camel@anto-desktop>
>Content-Type: text/plain

[ ... ]

>Is it your point to run an application on a server and then 
>accessing it
>from different OS and getting the (limited) look of the OS ? If so,
>whats the advantage of that ? To make the customer temporarly 
>happy ? :)
>

Antonio, many [x]harbour users are look for this future. In this case
aplication can work as serwer aplication, like java scripts on jBoss
serwer. Przemek and Lorenzo are right.

My ask in this weft is (oh my poor english :( ) -
"can we hope acces to private variable in thread, and whether private
variable with the same name in 2 or more threads can have different
value" ?
What can we hope ?


Regards,
Marek Horodyski

P.S. 
I'm too wating on indexed string in normal (not recompile) distribution.
Plase!
From druzus at priv.onet.pl  Tue Aug  7 09:57:02 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Aug  7 09:56:59 2007
Subject: [Harbour] Viewer <-> XML <-> Application (was multi UI)
In-Reply-To: <1186488304.5686.107.camel@anto-desktop>
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>
	<59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
	<20070807093806.GA14920@localhost.localdomain>
	<1186481234.5686.55.camel@anto-desktop>
	<20070807112353.GA16301@localhost.localdomain>
	<1186488304.5686.107.camel@anto-desktop>
Message-ID: <20070807135702.GB17051@localhost.localdomain>

On Tue, 07 Aug 2007, Antonio Linares wrote:
> In that case, you do need to use a designer. Do you plan to build a
> designer ?

Looks that we are talking about absolutely different things.

> Then it may be a valid solution for you, but not for all of Harbour
> users.

It's possible but I'd rather think you do not understand
what I'm talking about because you are not familiar with
real client/server applications hosted on remote servers.

> > 5. From the beginning I'm talking about running binaries on the host
> >    and connecting to the same instance of program using different
> >    terminals.
> Then it looks as we are talking about different things :)

Exactly.

> >    Many of the modifications in Harbour core
> >    code I done in last year was for increasing security and protection
> >    against wrong user code which may intentionally try to break HVM.
> In that case, it looks as multithreading is one of the most important
> requisites, and we don't even have a first release of it.

Sorry Antonio but I have very serious problem to understand what
you are talking about. Can you say sth more why you need MT mode
and what you want to do with it?

> Is it your point to run an application on a server and then accessing it
> from different OS and getting the (limited) look of the OS ? If so,

On most OSes it will look as any other OS native application.

> whats the advantage of that ? To make the customer temporarly happy ? :)

Just simply to increase hundreds time the speed, to protect the data,
to allow working from any place and any device, to work with very slow
connections, to resolve some very unpleasure synchronization problems
which appear when you are using RDBMS and many others.

> The customer soon will be requiring specific OS features support that
> your application will not be able to provide. 

The specific OS features can be implemented on the client side and it's
usually the simplest and the less payment part of code. I also do not
see any reason to not add some support for communication with external
OS specific programs. The native OS viewer will be such application
and it will use protocol we will define.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Tue Aug  7 10:02:23 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Aug  7 10:02:28 2007
Subject: [Harbour] Beta Process
In-Reply-To: <20070807131701.GA17051@localhost.localdomain>
References: <200708070838.01405.philb@philb.us>
	<20070807131701.GA17051@localhost.localdomain>
Message-ID: <9257026e0708070702o772a1c1fsb106a778efeac75e@mail.gmail.com>

On 8/7/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> IMHO we should release last BETA4 and next one will be RC1 I hope.
> Today or tomorrow I'll sync fixes in DEVEL end BETA3 branch
> and we can start release process.

Please remember that I'm still using code from xHarbour to run my apps
so for me actual Harbour UI code is buggy and fixing it is a non sense
since xHarbour code is working much better for me ( not perfect but
much better ).

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Tue Aug  7 10:26:07 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Aug  7 10:26:11 2007
Subject: [Harbour] First viewgtk/viewwin example :)
Message-ID: <9257026e0708070726t60ea5c67lf3fa744ea7b6f9ad@mail.gmail.com>

The code below can be built with Harbour and hwgui in both gtk and win
mode and it shows ( more or less ) the same form as the previous text
viewer.

I've left fixed positions since hwgui uses x,y coordinates instead of
r,c and I've added the cText var in the form text since here says are
"labels" but you get the idea.

Here is the new form.txt ( keep on one line )

FORM;10;10;20;70;;SAY;11;11;Hello what's your
name?;@!;cText;;GET;12;11;harbour;@!;cField;;

Now we have three way to get a name :)

best regards,
Lorenzo

#include "guilib.ch"
#include "windows.ch"

procedure main( cGuiFile )

   local aSchema := Schema2Array( cGuiFile )
   local nRows := len( aSchema )
   local nRow
   local aCols

   local oModDlg

   if nRows > 0

      for nRow := 1 to nRows
         aCols := aSchema[ nRow ]
         if aCols[ 1 ] == "FORM"
            INIT DIALOG oModDlg TITLE "viewgtk"        ;
            AT 210,10  SIZE 300,300
         elseif aCols[ 1 ] == "GET"
            &(aCols[ 6 ]) := aCols[ 4 ]
            @ 20,50 GET cField SIZE 80,22 STYLE WS_BORDER
         elseif aCols[ 1 ] == "SAY"
            &(aCols[ 6 ]) := aCols[ 4 ]
            @ 20,10 SAY cText SIZE 260, 22
         endif
      next

   endif

   ACTIVATE DIALOG oModDlg

   alert( cField )

return

function Schema2Array( cFname )

   local nRows
   local aRows
   local nCount
   local nCols
   local aCols
   local cSchema
   local aSchema := {}

   cSchema := memoread( cFname )

   if cSchema != nil

      aRows := HB_ATOKENS( cSchema, ";;" )

      nRows := len( arows )

      for nCount := 1 to nRows
         aCols := HB_ATOKENS( aRows[ nCount ], ";" )
         aadd( aSchema, aCols )
      next nCount

   endif

   return aSchema
From maurilio.longo at libero.it  Tue Aug  7 11:18:24 2007
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Aug  7 11:19:27 2007
Subject: [Harbour] Viewer <-> XML <-> Application (was multi UI)
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>
	<59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
	<20070807093806.GA14920@localhost.localdomain>
	<1186481234.5686.55.camel@anto-desktop>
	<20070807112353.GA16301@localhost.localdomain>
	<1186488304.5686.107.camel@anto-desktop>
	<20070807135702.GB17051@localhost.localdomain>
Message-ID: <46B88D40.5820800@libero.it>

Przemyslaw and all,

is AJAX intended to do such kind of things, isn't it?

GoogleEarth, for example, should be such a kind of program, where the client
UI talks to a server which is somewhere.

If it is so, why reinvent the wheel? Google API is available, maybe it could
be feasible to 'attach' ourselves to those APIs and just add some more
'business' like logic (maybe a way to use codeblock to validate input and such
kind of issues).

Am I completely wrong? :)

Maurilio.


Przemyslaw Czerpak ha scritto:
> 
> On Tue, 07 Aug 2007, Antonio Linares wrote:
> > In that case, you do need to use a designer. Do you plan to build a
> > designer ?
> 
> Looks that we are talking about absolutely different things.
> 
> > Then it may be a valid solution for you, but not for all of Harbour
> > users.
> 
> It's possible but I'd rather think you do not understand
> what I'm talking about because you are not familiar with
> real client/server applications hosted on remote servers.
> 
> > > 5. From the beginning I'm talking about running binaries on the host
> > >    and connecting to the same instance of program using different
> > >    terminals.
> > Then it looks as we are talking about different things :)
> 
> Exactly.
> 
> > >    Many of the modifications in Harbour core
> > >    code I done in last year was for increasing security and protection
> > >    against wrong user code which may intentionally try to break HVM.
> > In that case, it looks as multithreading is one of the most important
> > requisites, and we don't even have a first release of it.
> 
> Sorry Antonio but I have very serious problem to understand what
> you are talking about. Can you say sth more why you need MT mode
> and what you want to do with it?
> 
> > Is it your point to run an application on a server and then accessing it
> > from different OS and getting the (limited) look of the OS ? If so,
> 
> On most OSes it will look as any other OS native application.
> 
> > whats the advantage of that ? To make the customer temporarly happy ? :)
> 
> Just simply to increase hundreds time the speed, to protect the data,
> to allow working from any place and any device, to work with very slow
> connections, to resolve some very unpleasure synchronization problems
> which appear when you are using RDBMS and many others.
> 
> > The customer soon will be requiring specific OS features support that
> > your application will not be able to provide.
> 
> The specific OS features can be implemented on the client side and it's
> usually the simplest and the less payment part of code. I also do not
> see any reason to not add some support for communication with external
> OS specific programs. The native OS viewer will be such application
> and it will use protocol we will define.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

-- 
 __________                   
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.
From harbour.01 at syenar.hu  Tue Aug  7 11:35:22 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Tue Aug  7 11:35:32 2007
Subject: [Harbour] First viewgtk/viewwin example :)
In-Reply-To: <9257026e0708070726t60ea5c67lf3fa744ea7b6f9ad@mail.gmail.com>
References: <9257026e0708070726t60ea5c67lf3fa744ea7b6f9ad@mail.gmail.com>
Message-ID: <78498473-2A66-488F-8D83-ADA93EA895B7@syenar.hu>

Hi Lorenzo,

How is there any programming logic attached to such solution?
(VALID, WHEN, realtime field updates, subwindow openings)

Brgds,
Viktor

On 2007.08.07., at 16:26, Lorenzo Fiorini wrote:

> The code below can be built with Harbour and hwgui in both gtk and win
> mode and it shows ( more or less ) the same form as the previous text
> viewer.
>
> I've left fixed positions since hwgui uses x,y coordinates instead of
> r,c and I've added the cText var in the form text since here says are
> "labels" but you get the idea.
>
> Here is the new form.txt ( keep on one line )
>
> FORM;10;10;20;70;;SAY;11;11;Hello what's your
> name?;@!;cText;;GET;12;11;harbour;@!;cField;;
>
> Now we have three way to get a name :)
>
> best regards,
> Lorenzo
>
> #include "guilib.ch"
> #include "windows.ch"
>
> procedure main( cGuiFile )
>
>    local aSchema := Schema2Array( cGuiFile )
>    local nRows := len( aSchema )
>    local nRow
>    local aCols
>
>    local oModDlg
>
>    if nRows > 0
>
>       for nRow := 1 to nRows
>          aCols := aSchema[ nRow ]
>          if aCols[ 1 ] == "FORM"
>             INIT DIALOG oModDlg TITLE "viewgtk"        ;
>             AT 210,10  SIZE 300,300
>          elseif aCols[ 1 ] == "GET"
>             &(aCols[ 6 ]) := aCols[ 4 ]
>             @ 20,50 GET cField SIZE 80,22 STYLE WS_BORDER
>          elseif aCols[ 1 ] == "SAY"
>             &(aCols[ 6 ]) := aCols[ 4 ]
>             @ 20,10 SAY cText SIZE 260, 22
>          endif
>       next
>
>    endif
>
>    ACTIVATE DIALOG oModDlg
>
>    alert( cField )
>
> return
>
> function Schema2Array( cFname )
>
>    local nRows
>    local aRows
>    local nCount
>    local nCols
>    local aCols
>    local cSchema
>    local aSchema := {}
>
>    cSchema := memoread( cFname )
>
>    if cSchema != nil
>
>       aRows := HB_ATOKENS( cSchema, ";;" )
>
>       nRows := len( arows )
>
>       for nCount := 1 to nRows
>          aCols := HB_ATOKENS( aRows[ nCount ], ";" )
>          aadd( aSchema, aCols )
>       next nCount
>
>    endif
>
>    return aSchema
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From antonioharbour at gmail.com  Tue Aug  7 11:41:28 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Aug  7 11:41:52 2007
Subject: [Harbour] First text viewer example :)
In-Reply-To: <9257026e0708070644r18872189u5d7137fd8496ef19@mail.gmail.com>
References: <9257026e0708070344s50b26e6eo2fb9a1cd9a7f07e8@mail.gmail.com>
	<1186484693.5686.85.camel@anto-desktop>
	<9257026e0708070528q445de213sb130963ea859fb8c@mail.gmail.com>
	<1186492964.5686.110.camel@anto-desktop>
	<9257026e0708070644r18872189u5d7137fd8496ef19@mail.gmail.com>
Message-ID: <1186501288.5686.118.camel@anto-desktop>

Lorenzo,

> I would surely use SSH in that case but SSH is a "communication"
> protocol and has nothing to do with the GUI.

I meant a SSH client like Putty, StarWin (X server), etc.

regards,

Antonio

From antonioharbour at gmail.com  Tue Aug  7 11:51:50 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Aug  7 11:52:06 2007
Subject: [Harbour] Viewer <-> XML <-> Application (was multi UI)
In-Reply-To: <20070807135702.GB17051@localhost.localdomain>
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>
	<59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
	<20070807093806.GA14920@localhost.localdomain>
	<1186481234.5686.55.camel@anto-desktop>
	<20070807112353.GA16301@localhost.localdomain>
	<1186488304.5686.107.camel@anto-desktop>
	<20070807135702.GB17051@localhost.localdomain>
Message-ID: <1186501910.5686.125.camel@anto-desktop>

Przemek,

> On most OSes it will look as any other OS native application.

An application without a pulldown menu, a buttons bar, a bottom messages
bar, without common GUI controls (push buttons, checkboxes, radio
buttons, drop down boxes, sliders, bitmaps, folders, etc.), dialog
boxes, etc. do you think that it will really look as an OS native
application ?

regards,

Antonio

From druzus at priv.onet.pl  Tue Aug  7 12:07:35 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Aug  7 12:07:32 2007
Subject: [Harbour] Viewer <-> XML <-> Application (was multi UI)
In-Reply-To: <1186501910.5686.125.camel@anto-desktop>
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>
	<59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
	<20070807093806.GA14920@localhost.localdomain>
	<1186481234.5686.55.camel@anto-desktop>
	<20070807112353.GA16301@localhost.localdomain>
	<1186488304.5686.107.camel@anto-desktop>
	<20070807135702.GB17051@localhost.localdomain>
	<1186501910.5686.125.camel@anto-desktop>
Message-ID: <20070807160735.GA17838@localhost.localdomain>

On Tue, 07 Aug 2007, Antonio Linares wrote:
> An application without a pulldown menu, a buttons bar, a bottom messages
> bar, without common GUI controls (push buttons, checkboxes, radio
> buttons, drop down boxes, sliders, bitmaps, folders, etc.), dialog
> boxes, etc. do you think that it will really look as an OS native
> application ?

My English to pure to continue this discussion. EOT.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Tue Aug  7 12:34:22 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Aug  7 12:34:32 2007
Subject: [Harbour] First text viewer example :)
In-Reply-To: <1186501288.5686.118.camel@anto-desktop>
References: <9257026e0708070344s50b26e6eo2fb9a1cd9a7f07e8@mail.gmail.com>
	<1186484693.5686.85.camel@anto-desktop>
	<9257026e0708070528q445de213sb130963ea859fb8c@mail.gmail.com>
	<1186492964.5686.110.camel@anto-desktop>
	<9257026e0708070644r18872189u5d7137fd8496ef19@mail.gmail.com>
	<1186501288.5686.118.camel@anto-desktop>
Message-ID: <9257026e0708070934t2ba9ba67i615cc69e0de11234@mail.gmail.com>

On 8/7/07, Antonio Linares <antonioharbour@gmail.com> wrote:

> I meant a SSH client like Putty, StarWin (X server), etc.

Sorry I didn't understand it.

I already use them ( or better I've just start to use them ) thanks to
Przemyslaw's great work on gttrm, but many users consider them "old
DOS programs" so I can't have only the gttrm interface, I need also
gtk and win but I'd like to avoid to write 4 versions of the same app
gttrm/gtk/win/www and this was the start of the "What about a
replaceable user interface" thread.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Tue Aug  7 12:37:45 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Aug  7 12:37:49 2007
Subject: [Harbour] First viewgtk/viewwin example :)
In-Reply-To: <78498473-2A66-488F-8D83-ADA93EA895B7@syenar.hu>
References: <9257026e0708070726t60ea5c67lf3fa744ea7b6f9ad@mail.gmail.com>
	<78498473-2A66-488F-8D83-ADA93EA895B7@syenar.hu>
Message-ID: <9257026e0708070937v10fbf225ka6fac405edb5c4a5@mail.gmail.com>

On 8/7/07, Szak?ts Viktor <harbour.01@syenar.hu> wrote:

> How is there any programming logic attached to such solution?
> (VALID, WHEN, realtime field updates, subwindow openings)

Sorry Viktor this was simply a joke to show the intended "final" results.

I don't think these viewers can be used for anything useful :)

But in general I think we could have two kind of whens/valids:

- client side like min, max, minlen, maxlen, readonly, size, and
=<!=>= vs other fields
- server side the one that require code to execute in this case it is
impossible to know in the client what will be so the client has to
call the "server" and exec the function that returns true or false

The idea is to emulate the dom tree in xhtml pages. The XML represents
the status of the "page" and updating the value attrib of the field
will update of the control.

If our goal is to port apps to web browsers I think the browser should
be our guideline.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Tue Aug  7 12:46:20 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Aug  7 12:46:24 2007
Subject: [Harbour] Viewer <-> XML <-> Application (was multi UI)
In-Reply-To: <46B88D40.5820800@libero.it>
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>
	<59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
	<20070807093806.GA14920@localhost.localdomain>
	<1186481234.5686.55.camel@anto-desktop>
	<20070807112353.GA16301@localhost.localdomain>
	<1186488304.5686.107.camel@anto-desktop>
	<20070807135702.GB17051@localhost.localdomain>
	<46B88D40.5820800@libero.it>
Message-ID: <9257026e0708070946i33d4c38l46ec4eaa65f7f313@mail.gmail.com>

On 8/7/07, Maurilio Longo <maurilio.longo@libero.it> wrote:

> is AJAX intended to do such kind of things, isn't it?
>
> GoogleEarth, for example, should be such a kind of program, where the client
> UI talks to a server which is somewhere.
>
> If it is so, why reinvent the wheel? Google API is available, maybe it could
> be feasible to 'attach' ourselves to those APIs and just add some more
> 'business' like logic (maybe a way to use codeblock to validate input and such
> kind of issues).
>
> Am I completely wrong? :)

Maurilio, for me ajax is the use of the XmlHttpRequest object to
modify browser's dom tree using javascript. This combined with html's
divs and css2 will give the ability to update the browser pages
without unnecessary reloads and with a pretty look :)

I've looked at Google's code repository but I didn't find anything
like we are discussing.

best regards,
Lorenzo
From antonioharbour at gmail.com  Tue Aug  7 14:58:44 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Aug  7 14:59:00 2007
Subject: [Harbour] RE: Harbour Digest, Vol 10, Issue 18
In-Reply-To: <503AD832DBBF60469E9F807668A2F6A20261F74F@PINK.zycie.pzu>
References: <503AD832DBBF60469E9F807668A2F6A20261F74F@PINK.zycie.pzu>
Message-ID: <1186513124.5686.137.camel@anto-desktop>

Marek,

> Antonio, many [x]harbour users are look for this future. In this case
> application can work as server application, like java scripts on jBoss
> server. Przemek and Lorenzo are right.

That's what I first thought they wanted. That's the reason why I asked
for the multithreading issue. But it seems we are discussing here a
different topic:

They want to run a character (CUI) application at the server (one
instance per customer) and get GUI look from the different clients OSes.
IMO its not quite difficult to be implemented, though the GUI look will
be poor.

regards,

Antonio

From druzus at priv.onet.pl  Tue Aug  7 20:56:13 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Aug  7 20:56:08 2007
Subject: [Harbour] Beta Process
In-Reply-To: <9257026e0708070702o772a1c1fsb106a778efeac75e@mail.gmail.com>
References: <200708070838.01405.philb@philb.us>
	<20070807131701.GA17051@localhost.localdomain>
	<9257026e0708070702o772a1c1fsb106a778efeac75e@mail.gmail.com>
Message-ID: <20070808005613.GA7635@localhost.localdomain>

On Tue, 07 Aug 2007, Lorenzo Fiorini wrote:
> Please remember that I'm still using code from xHarbour to run my apps
> so for me actual Harbour UI code is buggy and fixing it is a non sense
> since xHarbour code is working much better for me ( not perfect but
> much better ).

I know about it but I do not use the Clipper UI classes and I do not
plan to rewrite them so if someone else will not invest some time in
exact checking what Clipper does then this code will not be fixed.
If someone will declare that he will try then we can wait. If not then
I do not see any reason to wait.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Aug  8 02:37:34 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Aug  8 02:37:39 2007
Subject: [Harbour] Beta Process
In-Reply-To: <20070808005613.GA7635@localhost.localdomain>
References: <200708070838.01405.philb@philb.us>
	<20070807131701.GA17051@localhost.localdomain>
	<9257026e0708070702o772a1c1fsb106a778efeac75e@mail.gmail.com>
	<20070808005613.GA7635@localhost.localdomain>
Message-ID: <9257026e0708072337y2f4234eaj8348bc7ca9efd19f@mail.gmail.com>

On 8/8/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> I know about it but I do not use the Clipper UI classes and I do not
> plan to rewrite them so if someone else will not invest some time in
> exact checking what Clipper does then this code will not be fixed.
> If someone will declare that he will try then we can wait. If not then
> I do not see any reason to wait.

Ok, we can look at it after beta4.

best regards,
Lorenzo
From maurilio.longo at libero.it  Wed Aug  8 02:50:54 2007
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Aug  8 02:51:01 2007
Subject: [Harbour] Viewer <-> XML <-> Application (was multi UI)
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>
	<59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
	<20070807093806.GA14920@localhost.localdomain>
	<1186481234.5686.55.camel@anto-desktop>
	<20070807112353.GA16301@localhost.localdomain>
	<1186488304.5686.107.camel@anto-desktop>
	<20070807135702.GB17051@localhost.localdomain>
	<46B88D40.5820800@libero.it>
	<9257026e0708070946i33d4c38l46ec4eaa65f7f313@mail.gmail.com>
Message-ID: <46B967CE.1B73393F@libero.it>

Lorenzo,

look at 

code.google.com/webtoolkit

this is what I was thinking of and not GoogleEarth (which could use such APIs,
I simply cannot find a reference anymore).

Best regards.

Maurilio.

Lorenzo Fiorini ha scritto:
> 
> On 8/7/07, Maurilio Longo <maurilio.longo@libero.it> wrote:
> 
> > is AJAX intended to do such kind of things, isn't it?
> >
> > GoogleEarth, for example, should be such a kind of program, where the client
> > UI talks to a server which is somewhere.
> >
> > If it is so, why reinvent the wheel? Google API is available, maybe it could
> > be feasible to 'attach' ourselves to those APIs and just add some more
> > 'business' like logic (maybe a way to use codeblock to validate input and such
> > kind of issues).
> >
> > Am I completely wrong? :)
> 
> Maurilio, for me ajax is the use of the XmlHttpRequest object to
> modify browser's dom tree using javascript. This combined with html's
> divs and css2 will give the ability to update the browser pages
> without unnecessary reloads and with a pretty look :)
> 
> I've looked at Google's code repository but I didn't find anything
> like we are discussing.
> 
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

-- 
 __________                   
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.
From maurilio.longo at libero.it  Wed Aug  8 02:53:15 2007
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Aug  8 02:53:21 2007
Subject: [Harbour] Beta Process
References: <200708070838.01405.philb@philb.us>
	<20070807131701.GA17051@localhost.localdomain>
	<9257026e0708070702o772a1c1fsb106a778efeac75e@mail.gmail.com>
	<20070808005613.GA7635@localhost.localdomain>
	<9257026e0708072337y2f4234eaj8348bc7ca9efd19f@mail.gmail.com>
Message-ID: <46B9685A.75B34B73@libero.it>

Lorenzo, Przemyslaw,

why don't you simply import xharbour .prg modules when they have more features
than harbour ones?

They are self contained modules so it should be easy to do.

Best regards.

Maurilio.


Lorenzo Fiorini ha scritto:
> 
> On 8/8/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:
> 
> > I know about it but I do not use the Clipper UI classes and I do not
> > plan to rewrite them so if someone else will not invest some time in
> > exact checking what Clipper does then this code will not be fixed.
> > If someone will declare that he will try then we can wait. If not then
> > I do not see any reason to wait.
> 
> Ok, we can look at it after beta4.
> 
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

-- 
 __________                   
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.
From miguelangel at marchuet.net  Wed Aug  8 03:08:20 2007
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Aug  8 03:12:26 2007
Subject: [Harbour] Triggers over all RDD ?
Message-ID: <46B96BE4.5020704@marchuet.net>

I can implement triggers over RDD. Any one is interested on it?

Best regards,
Miguel Angel Marchuet

  Sx_SetTrigger():

  Syntax:   Sx_SetTrigger( <nAction> [,<cTriggerName>] )

         nAction = A numeric value indicating the action to be taken with
                   the currently active or specified trigger function.
                   These values are defined as manifest constants in the
                   SIXCDX.CH file, and are as follows:

                     TRIGGER_ENABLE   = Activate an installed trigger
                     TRIGGER_DISABLE  = Deactivate an installed trigger
                     TRIGGER_REMOVE   = Uninstall an installed trigger
                     TRIGGER_INSTALL  = Install a new trigger function.
                                        A newly installed trigger automatic-
                                        ally uninstalls any previously
                                        installed trigger.  The new trigger
                                        also becomes ENABLEd automatically.

                   NOTE:  Although these constants preprocess into numeric
                          values, you should not use the numeric values in
                          your source code.  Instead, you should use the
                          constants, as defined above.  This will insure
                          compatibility with all future releases of the
                          SIx Driver.

    cTriggerName = Optional name of a trigger function to install.  This
                   parameter is only required if the first parameter is
                   TRIGGER_INSTALL.

  Returns:  The currently active trigger name.

  Description:  This function allows the developer to activate (or install)
                a function to handle each triggerable event.  This is
                done by using the TRIGGER_INSTALL constant as the first
                parameter, and passing the new function name as the second
                parameter.  The specified function would then handle all
                subsequent triggerable events for that workarea, until it is
                disabled or uninstalled.

                An installed trigger function can be temporarily disabled,
                by using the TRIGGER_DISABLE constant.  This would result
                in all triggerable events being controlled by the default
                actions in Sx_DefTrigger().

                A disabled trigger function can be reactivated by using the
                TRIGGER_ENABLE constant.

                To totally remove a previously installed trigger function,
                use the TRIGGER_REMOVE constant.

  Example:


    /*
       The following example uses a custom trigger function that handles
       special operations for two different events:

        1.  Looks for and, if found, reads in a <cDBFname>.INI file for
            each database file that is opened.  (See the ".INI Files"
            section for more details on their use.)

        2.  Prompts the user for a password upon opening a data file.  If
            the password is not kosher, it transfers trigger control to a
            different user-defined trigger function "LimitTrig()".  (The
            source for LimitTrig() is not shown.)

        3.  Displays an "Are you sure?" message whenever a ZAP command is
            issued.
    */

    #include "INKEY.CH"
    #include "SIXCDX.CH"

    Sx_SetPass( "Pengo" )
    USE test VIA "SIXCDX" TRIGGER "CustomTrig"
    browse()

    //----------------------------------------------------------//
    FUNC CustomTrig( nEvent, nArea, nFieldPos, xTrigVal )

       LOCAL nKey := 0, cPassWord := Space(10)
       LOCAL GetList := {}

       DO CASE

          CASE nEvent == EVENT_PREUSE

             _sx_INIinit( nArea )         // Read in .INI file information

             @ MaxRow(),0 SAY "PASSWORD:" GET cPassWord
             READ

             IF LastKey() == K_ESC .or. cPassWord != "FooBar"
                Sx_SetTrigger( TRIGGER_INSTALL, "LimitTrig" )
             ENDIF

          CASE nEvent == EVENT_ZAP

             nKey := Alert( "ZAP : Are you sure?", {"Yes","No"} )
             if nKey == 1
                Return( .T. )  // Okay to ZAP
             else
                Return( .F. )  // Don't ZAP
             endif

       ENDCASE

    Return( .T. )




  Sx_DefTrigger():

  Syntax:   Sx_DefTrigger( <nEvent>, <nArea>, <nFieldPos>, <xTrigVal> )

        nEvent = A numeric value indicating the type of event that is
                 activating the trigger.  These values are defined as
                 manifest constants in the SIXCDX.CH file, and are as
                 follows:

                 EVENT_PREUSE       = A DBF file is about to be opened
               * EVENT_POSTUSE      = A DBF file has just been opened
               * EVENT_UPDATE       = An index is being updated
                 EVENT_APPEND       = A new record is being appended
                 EVENT_DELETE       = A record is being deleted
                 EVENT_RECALL       = A deleted record is being recalled
                 EVENT_PACK         = The DBF file is being packed
                 EVENT_ZAP          = The DBF file is being zapped
                 EVENT_PUT          = A value is being stored in the DBF
                 EVENT_GET          = A value is being retrieved from the DBF
                 EVENT_PRECLOSE     = The DBF file is about to be closed
               * EVENT_POSTCLOSE    = The DBF file has just been closed
                 EVENT_PREMEMOPACK  = A MEMOPACK is just about to occur
                 EVENT_POSTMEMOPACK = A MEMOPACK has just been completed

                 NOTE:  Although these constants preprocess into numeric
                        values, you should not use the numeric values in
                        your source code.  Instead, you should use the
                        constants, as defined above.  This will insure
                        compatibility with all future releases of the
                        SIx Driver.

               (*) - The events marked with an asterisk (*) will continue
                     even if the return value for that event is set to false
                     (.F.).  This is to insure data integrity.

         nArea = The currently active workarea number.

     nFieldPos = The field position for the PUT or GET, if applicable.

      xTrigVal = This parameter contains the value, if any, associated with
                 the event being processed.  If no value of significance is
                 associated with the event, a zero (0) is passed down.

  Returns:   Logical.  TRUE (.T.) if the current event should be allowed to
             successfully complete, FALSE (.F.) if not.

  Description:  By default, this function is automatically called whenever
                any of the events listed above occurs.  It contains the
                default triggers (none) to be attached to each event.

                The parameters are passed to it automatically by the SIx
                Driver.  This is similar to the way parameters are
                automatically passed to a UDF used in Clipper's MemoEdit()
                or AChoice() functions.

                To cause the SIx Driver to use a different set of triggers,
                you would USE the file with the TRIGGER keyword, specifying
                the name of the desired trigger function in quotes.  For
                example, to use a modified Sx_DefTrigger() function called
                DemoTrigger(), you would do this:

                    USE test VIA "SIXCDX" TRIGGER "DemoTrigger"

                This would cause all triggerable events for this workarea to
                be handled through DemoTrigger(), rather than the SIx
                Driver's default Sx_DefTrigger() function.

                The Clipper source code for Sx_DefTrigger() is contained in
                SIXTRIG.PRG, and can be modified as desired.  Just insure
                that the new SIXTRIG.OBJ module is linked into your
                application ahead of the SIXCDX.LIB file.  The complete
                source for Sx_DefTrigger() is also listed below in the
                Example section.

                In its present condition, Sx_DefTrigger() maintains the
                exact same behavior as in previous SIx Driver releases.
                The call to Sx_SetTrigger( TRIGGER_REMOVE ) under the
                EVENT_PREUSE case effectively removes the trigger controls
                just prior to a database being opened.  To allow support
                for event trigger handling, just comment out this call to
                Sx_SetTrigger().

                Also, if you want the SIx Driver to automatically look for
                an associated .INI file when a .DBF is USEd, you need to
                uncomment the _sx_INIinit( nArea ) call.  See the section
                on ".INI Files" for more details on these.  The _sx_INIinit()
                function can ONLY be used in this manner.  If it is called
                anywhere else in your application, unpredictable results can
                occur.


    NOTE:  See the TRIGDEMO.PRG file for an example of using event triggers.


  Example:

    #include "SIXCDX.CH"

    FUNC Sx_DefTrigger( nEvent, nArea, nFieldPos, xTrigVal )

      DO CASE

        CASE nEvent == EVENT_PREUSE
    //    _sx_INIinit( nArea )
          Sx_SetTrigger( TRIGGER_REMOVE )

        CASE nEvent == EVENT_POSTUSE

        CASE nEvent == EVENT_UPDATE

        CASE nEvent == EVENT_APPEND

        CASE nEvent == EVENT_DELETE

        CASE nEvent == EVENT_RECALL

        CASE nEvent == EVENT_PACK

        CASE nEvent == EVENT_ZAP

        CASE nEvent == EVENT_PUT

        CASE nEvent == EVENT_GET

        CASE nEvent == EVENT_PRECLOSE

        CASE nEvent == EVENT_POSTCLOSE

        CASE nEvent == EVENT_PREMEMOPACK

        CASE nEvent == EVENT_POSTMEMOPACK

      ENDCASE

    Return( .T. )
From lorenzo.fiorini at gmail.com  Wed Aug  8 03:44:08 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Aug  8 03:44:13 2007
Subject: [Harbour] Viewer <-> XML <-> Application (was multi UI)
In-Reply-To: <46B967CE.1B73393F@libero.it>
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>
	<59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
	<20070807093806.GA14920@localhost.localdomain>
	<1186481234.5686.55.camel@anto-desktop>
	<20070807112353.GA16301@localhost.localdomain>
	<1186488304.5686.107.camel@anto-desktop>
	<20070807135702.GB17051@localhost.localdomain>
	<46B88D40.5820800@libero.it>
	<9257026e0708070946i33d4c38l46ec4eaa65f7f313@mail.gmail.com>
	<46B967CE.1B73393F@libero.it>
Message-ID: <9257026e0708080044l23b57f14u6a7ec8b266226b6b@mail.gmail.com>

On 8/8/07, Maurilio Longo <maurilio.longo@libero.it> wrote:

> look at code.google.com/webtoolkit
> this is what I was thinking of and not GoogleEarth (which could use such APIs,
> I simply cannot find a reference anymore).

Ok, now I understood. I've looked at GWT sometime ago when I needed to
rebuild my php apps but I didn't evaluate it deeply when I saw it is
Java.

So far I haven't understood what are the Przemyslaw's plans so I can't
say what we need to do what we want to do :)

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Wed Aug  8 03:59:24 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Aug  8 03:59:29 2007
Subject: [Harbour] Beta Process
In-Reply-To: <46B9685A.75B34B73@libero.it>
References: <200708070838.01405.philb@philb.us>
	<20070807131701.GA17051@localhost.localdomain>
	<9257026e0708070702o772a1c1fsb106a778efeac75e@mail.gmail.com>
	<20070808005613.GA7635@localhost.localdomain>
	<9257026e0708072337y2f4234eaj8348bc7ca9efd19f@mail.gmail.com>
	<46B9685A.75B34B73@libero.it>
Message-ID: <9257026e0708080059m6e1f19ek3ca03adc3b2bbbd3@mail.gmail.com>

On 8/8/07, Maurilio Longo <maurilio.longo@libero.it> wrote:

> why don't you simply import xharbour .prg modules when they have more features
> than harbour ones?
>
> They are self contained modules so it should be easy to do.

In fact this is what I do every time I update Harbour.

Maurilio are you still using "text" apps?

best regards,
Lorenzo
From maurilio.longo at libero.it  Wed Aug  8 05:03:09 2007
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Aug  8 05:03:17 2007
Subject: [Harbour] Beta Process
References: <200708070838.01405.philb@philb.us>
	<20070807131701.GA17051@localhost.localdomain>
	<9257026e0708070702o772a1c1fsb106a778efeac75e@mail.gmail.com>
	<20070808005613.GA7635@localhost.localdomain>
	<9257026e0708072337y2f4234eaj8348bc7ca9efd19f@mail.gmail.com>
	<46B9685A.75B34B73@libero.it>
	<9257026e0708080059m6e1f19ek3ca03adc3b2bbbd3@mail.gmail.com>
Message-ID: <46B986CD.A9F0C589@libero.it>

Lorenzo,

yes and no :)

I use them here at work for internal use, but our main application is win32
and written with xbase++.

We have an application written with xharbour + hwGui on win32 but we have not
linux apps.

I think that the idea of an app with a remote gui/viewer is nice but I don't
know (I can't estimate easily) how much feasible.

You need to have a class treee of controls which get rendered remotely more or
less like a X app does on a remote linux XServer. X is a huge project, though.

You need to think in terms of a 'virtual' coordinate system which needs to be
translated both to a char terminal and a graphic one in a usable way (on a
graphical window you end up putting a lot more controls than a char window can
contain).

A graphical window can be resized and the controls move themselves to fit the
new size, maybe reducing font size, on a char terminal what happens?

So the problems, I fear, are not in the way you can render things on different
output devices, but in the way you can create a dialog which works equally
well in both environments without sacrifying the possibility of the graphical
one.

Our main application was written with clipper, most of its code base is inside
the xbase++ version, but the user interface was completely rewritten because
on a GUI you simply do things in a different way. Our customers, though, still
use the dos version on dos terminals on the counter of a lot of shops
(chemist's shops); the dos version is faster/lighter/easier to use when
standing up and talking with customers but they use it mostly because they
don't want to throw away a working solution and spend money just to have some
bells and whistells which the GUI version has, but which are not essential to
the work they're doing at the counter.

We don't have web applications and I don't think we will end up using web apps
any time soon. A client/server app, with the gui running on a graphical
terminal seems more the way things are going to go (and the Google toolkit
does this).

So it seems to me that focusing on a client/server GUI which can run at least
on win32/wince, X and MacOSX could be a more 'usefull' or 'focused' project
which would give you the possibility to write just one program (which gets
rendered by a native GUI viewer on different platforms) and one interface
(using cross platform gui controls) and it would give you the ability to run
this program from whaterver environment best fits your needs and remotely and
having several viewers which use the same 'backend' code.

Char terminals are going to go away, IMHO, in a way or another.

Best regards.

Lorenzo Fiorini ha scritto:
> 
> On 8/8/07, Maurilio Longo <maurilio.longo@libero.it> wrote:
> 
> > why don't you simply import xharbour .prg modules when they have more features
> > than harbour ones?
> >
> > They are self contained modules so it should be easy to do.
> 
> In fact this is what I do every time I update Harbour.
> 
> Maurilio are you still using "text" apps?
> 
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

-- 
 __________                   
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.
From lorenzo.fiorini at gmail.com  Wed Aug  8 05:49:18 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Aug  8 05:49:22 2007
Subject: [Harbour] Beta Process
In-Reply-To: <46B986CD.A9F0C589@libero.it>
References: <200708070838.01405.philb@philb.us>
	<20070807131701.GA17051@localhost.localdomain>
	<9257026e0708070702o772a1c1fsb106a778efeac75e@mail.gmail.com>
	<20070808005613.GA7635@localhost.localdomain>
	<9257026e0708072337y2f4234eaj8348bc7ca9efd19f@mail.gmail.com>
	<46B9685A.75B34B73@libero.it>
	<9257026e0708080059m6e1f19ek3ca03adc3b2bbbd3@mail.gmail.com>
	<46B986CD.A9F0C589@libero.it>
Message-ID: <9257026e0708080249r32fe52fm8ae747867e2cafd5@mail.gmail.com>

On 8/8/07, Maurilio Longo <maurilio.longo@libero.it> wrote:

> I use them here at work for internal use, but our main application is win32
> and written with xbase++.

I was interested to know if you're still using things like tbrowse and
teditor and if you've problems with them.

> I think that the idea of an app with a remote gui/viewer is nice but I don't
> know (I can't estimate easily) how much feasible.
> ....

As I said I don't know what Przemyslaw and other are thinking of so I
can't say how difficult it'll be.

best regards,
Lorenzo
From maurilio.longo at libero.it  Wed Aug  8 06:02:34 2007
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Aug  8 06:02:41 2007
Subject: [Harbour] Beta Process
References: <200708070838.01405.philb@philb.us>
	<20070807131701.GA17051@localhost.localdomain>
	<9257026e0708070702o772a1c1fsb106a778efeac75e@mail.gmail.com>
	<20070808005613.GA7635@localhost.localdomain>
	<9257026e0708072337y2f4234eaj8348bc7ca9efd19f@mail.gmail.com>
	<46B9685A.75B34B73@libero.it>
	<9257026e0708080059m6e1f19ek3ca03adc3b2bbbd3@mail.gmail.com>
	<46B986CD.A9F0C589@libero.it>
	<9257026e0708080249r32fe52fm8ae747867e2cafd5@mail.gmail.com>
Message-ID: <46B994BA.94884143@libero.it>

Lorenzo Fiorini ha scritto:
> 
> On 8/8/07, Maurilio Longo <maurilio.longo@libero.it> wrote:
> 
> > I use them here at work for internal use, but our main application is win32
> > and written with xbase++.
> 
> I was interested to know if you're still using things like tbrowse and
> teditor and if you've problems with them.
> 

I'm using old versions since I've not had the time to test all the changes
against my code.

Ciao!

Maurilio.

-- 
 __________                   
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.
From lorenzo.fiorini at gmail.com  Wed Aug  8 06:15:09 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Aug  8 06:15:14 2007
Subject: [Harbour] Beta Process
In-Reply-To: <46B994BA.94884143@libero.it>
References: <200708070838.01405.philb@philb.us>
	<20070807131701.GA17051@localhost.localdomain>
	<9257026e0708070702o772a1c1fsb106a778efeac75e@mail.gmail.com>
	<20070808005613.GA7635@localhost.localdomain>
	<9257026e0708072337y2f4234eaj8348bc7ca9efd19f@mail.gmail.com>
	<46B9685A.75B34B73@libero.it>
	<9257026e0708080059m6e1f19ek3ca03adc3b2bbbd3@mail.gmail.com>
	<46B986CD.A9F0C589@libero.it>
	<9257026e0708080249r32fe52fm8ae747867e2cafd5@mail.gmail.com>
	<46B994BA.94884143@libero.it>
Message-ID: <9257026e0708080315u36aa2061r259d79c6c63aac0c@mail.gmail.com>

On 8/8/07, Maurilio Longo <maurilio.longo@libero.it> wrote:

> I'm using old versions since I've not had the time to test all the changes
> against my code.

Sorry, how much old? Could you tell me a ChangeLog date that you
consider stable?

best regards,
Lorenzo
From maurilio.longo at libero.it  Wed Aug  8 06:28:14 2007
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Aug  8 06:28:21 2007
Subject: [Harbour] Beta Process
References: <200708070838.01405.philb@philb.us>
	<20070807131701.GA17051@localhost.localdomain>
	<9257026e0708070702o772a1c1fsb106a778efeac75e@mail.gmail.com>
	<20070808005613.GA7635@localhost.localdomain>
	<9257026e0708072337y2f4234eaj8348bc7ca9efd19f@mail.gmail.com>
	<46B9685A.75B34B73@libero.it>
	<9257026e0708080059m6e1f19ek3ca03adc3b2bbbd3@mail.gmail.com>
	<46B986CD.A9F0C589@libero.it>
	<9257026e0708080249r32fe52fm8ae747867e2cafd5@mail.gmail.com>
	<46B994BA.94884143@libero.it>
	<9257026e0708080315u36aa2061r259d79c6c63aac0c@mail.gmail.com>
Message-ID: <46B99ABE.5C184C32@libero.it>

Lorenzo,

very old, I don't have Changelogs anymore (since I'm using a built library)
but the library is dated january 2006.

I'm not saying that after this date tbrowse is no more stable or has bugs,
mind you, probably is better now than it was at that date, but I've not
rebuilt my main application which is one of my tests for tbrowse.

Best regards.

Maurilio.

Lorenzo Fiorini ha scritto:
> 
> On 8/8/07, Maurilio Longo <maurilio.longo@libero.it> wrote:
> 
> > I'm using old versions since I've not had the time to test all the changes
> > against my code.
> 
> Sorry, how much old? Could you tell me a ChangeLog date that you
> consider stable?
> 
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

-- 
 __________                   
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.
From lorenzo.fiorini at gmail.com  Wed Aug  8 06:39:21 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Aug  8 06:39:25 2007
Subject: [Harbour] Beta Process
In-Reply-To: <46B99ABE.5C184C32@libero.it>
References: <200708070838.01405.philb@philb.us>
	<20070808005613.GA7635@localhost.localdomain>
	<9257026e0708072337y2f4234eaj8348bc7ca9efd19f@mail.gmail.com>
	<46B9685A.75B34B73@libero.it>
	<9257026e0708080059m6e1f19ek3ca03adc3b2bbbd3@mail.gmail.com>
	<46B986CD.A9F0C589@libero.it>
	<9257026e0708080249r32fe52fm8ae747867e2cafd5@mail.gmail.com>
	<46B994BA.94884143@libero.it>
	<9257026e0708080315u36aa2061r259d79c6c63aac0c@mail.gmail.com>
	<46B99ABE.5C184C32@libero.it>
Message-ID: <9257026e0708080339o43c24d49x41889004f381205b@mail.gmail.com>

On 8/8/07, Maurilio Longo <maurilio.longo@libero.it> wrote:

> very old, I don't have Changelogs anymore (since I'm using a built library)
> but the library is dated january 2006.

Thanks anyway.

The real problem is that we don't know anything about how and where
harbour is used so it could be that we haven't error report simply
because nobody is using that piece of code.

Phil what about a survey?

best regards,
Lorenzo
From makis1970 at gmail.com  Wed Aug  8 06:40:03 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Wed Aug  8 06:44:51 2007
Subject: [Harbour] is there any documentation about available Gt's
Message-ID: <003901c7d9a8$7c19b0a0$744d11e0$@com>

I can see under the rtl folder many different Gts but for most of them I
don't know what they do and where (Platform, gui, terminal etc). Also Which
functions-methods are available for each of them?

 

Thanks in advance

Mike Evans

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070808/11e1dad0/attachment.html
From lorenzo.fiorini at gmail.com  Wed Aug  8 07:42:00 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Aug  8 07:42:09 2007
Subject: [Harbour] is there any documentation about available Gt's
In-Reply-To: <003901c7d9a8$7c19b0a0$744d11e0$@com>
References: <003901c7d9a8$7c19b0a0$744d11e0$@com>
Message-ID: <9257026e0708080442x67b21e15ja1ab6d3d09420e76@mail.gmail.com>

On 8/8/07, Mike Evans (Gmail) <makis1970@gmail.com> wrote:

> I can see under the rtl folder many different Gts but for most of them I
> don't know what they do and where (Platform, gui, terminal etc).

I use only few of them but I'll try to replay.
I hope other will correct or add informations.

name - description - status ( AFAIK ) - use if I use it:

gtalleg - allegro lib http://www.talula.demon.co.uk/allegro/ - unknown
gtcgi - for cgi apps - working - use
gtdos - dos real dos - unknown
gtpca - pc ansi - unknown
gtwvt - win32 window - working - use
gtwin - win32 console - working
gtsln - slang lib - working
gtxwc - X11 window - working - use
gtgui - for win32 gui apps that don't need gt - working
gtstd - linux/unix standard console - working - use
gttrm - ncurses? lib for me works better than gtcrs - working - use
gtcrs - ncurses lib - working
gtos2 - for os2 - unknown

there are also:

gtnul - if you don't need a gt ( much like gtgui I guess ) - working - use
gtwin - use contrib/libct - unknown/working

> Also Which functions-methods are available for each of them?

Don't expect GUI or semi-GUI but only the output you would get from a
Clipper app.
There are extra functions like clipboard and codepage management, font
attributes...
look in include/hbgtinfo.ch

best regards,
Lorenzo
From druzus at priv.onet.pl  Wed Aug  8 08:23:51 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Aug  8 08:23:56 2007
Subject: [Harbour] is there any documentation about available Gt's
In-Reply-To: <003901c7d9a8$7c19b0a0$744d11e0$@com>
References: <003901c7d9a8$7c19b0a0$744d11e0$@com>
Message-ID: <20070808122351.GA9832@localhost.localdomain>

On Wed, 08 Aug 2007, Mike Evans (Gmail) wrote:
> I can see under the rtl folder many different Gts but for most of them I
> don't know what they do and where (Platform, gui, terminal etc). Also Which
> functions-methods are available for each of them?

gtnul  - base GT driver from which each other inherits.
         it gives screen buffer functionality but does not
         produce any screen output from disp*() commands
         Only outStd()/outErr() are supported.
         It's present on all platforms and i always linked.

gtcgi  - very simple GT driver which does not make any output
         formatting and simply send it as to stdout.
         Supported by all platforms.

gtstd  - it uses stdout output but tries to support full screen output but
         without collor support and cursor shape. It format text to number
         of row and columns if is able to detect these values on given
         platform.
         Supported by all platforms.

gtpca  - It's PCANSI terminal GT - it works in similar way to ANSI GT
         driver in Clipper though keyboard input is not fully supported.
         Now GTTRM can make all GTPCA job and much more.
         Supported by all platforms.

gtdos  - GT driver for DOS - it uses BIOS and direct hardware screen output
         so it's very similar to Clipper one - in practice due to the same
         environment you will noticed that all small details of Clipper
         GT drivers are replicated here. You can think about it like 100%
         Clipper compatible.
         Supported only by DOS builds.

gtos2  - GT driver for OS2 - It's sth like GTWIN but for other OS.
         Supported only by OS2 builds.

gtwin  - GT driver for MS-Windows console window.
         Supported only by MS-WINDOWS (W95 or higher) builds.

gtcrs  - GT driver for platforms which supports curses or compatible
         (ncurses) library - in practice POSIX systems.
         Supported by POSIX systems (mostly different *nixes)

gtsln  - GT driver for platforms which supports slang library.
         It's like GTCRS but instead of CURSES it uses SLANG.
         Supported by POSIX systems (mostly different *nixes).
         It supports Unicode input/output if compiled with slang
         version which also supports it.

gttrm  - it's like GTCRS and GTSLN but it does not use any external
         terminal library like SLANG or CURSES and it does not use
         any external database to extract terminal capabilities so
         it can be compiled on any POSIX system - I'll add support
         also for DOS/Windows in the future. It should automatically
         detect UTF-8 terminal mode and switch internally to Unicode
         mode if necessary. In theory is less functional then GTCRS
         and GTSLN because I hard coded escape sequences only for few
         terminals but because I added support also for some non
         standard terminal extensions and I'm using very limited set
         of output sequences then it usually works better then GTCRS
         and GTSLN.
         Supported by POSIX systems (mostly different *nixes)

gtwvt  - GT driver for MS-Windows. It creates its own GUI window
         instead of using MS-console window. It allows to change
         font, window size, etc.
         Supported only by MS-WINDOWS (W95 or higher) builds.

gtxwc  - GT driver for X-Window. It's like GTWVT but for nixes.
         Additionaly it has set of predefined vector characters
         (box and arrowd drawing characters) which can be used
         instead of the one defined in font. It means that you
         will have all boxes and arrows you know from DOS ans CP437
         even if you chose font which does not have them. Additionally
         it support some simple graphic output. See tests/gfx.prg
         for simple program which demonstrates it.
         Supported by POSIX systems (mostly different *nixes)

gtalleg- GT driver which uses alegro library for input/output.
         It's also GUI driver which support HB_GFX*() drawing.
         Multi platform, works on all platforms for which allegro
         library has been ported: MS-Win, DOS, VESA, X11, FB, SDL, ...

gtgui  - pseudo GT driver which adds to GTNUL Clipboard and Tone
         functionality. If you are using some MS-Windows GUI library
         and you still want to use TONE() function or GTI_CLIPBOARD
         actions then link this GT driver with your application.
         If you do not want to use TONE() or GTI_CLIPBOARD then
         do not link it - it will be only waste of memory.

gtctw  - GT driver which adds CT3 Window functionality to any other
         GT driver from which it inherits. It's activated automatically
         when you execute first W*() function.
         In similar way in Harbour it's possible to add support for
         GTWVW inheriting from GTWVT.

Some of the GT drivers support additional functionality with hb_gtInfo()
interface. See include/hbgtinfo.ch for different actions.

best regards,
Przemek
From philb at philb.us  Wed Aug  8 08:45:55 2007
From: philb at philb.us (Phil Barnett)
Date: Wed Aug  8 08:50:18 2007
Subject: [Harbour] Beta Process
In-Reply-To: <9257026e0708080339o43c24d49x41889004f381205b@mail.gmail.com>
References: <200708070838.01405.philb@philb.us> <46B99ABE.5C184C32@libero.it>
	<9257026e0708080339o43c24d49x41889004f381205b@mail.gmail.com>
Message-ID: <200708080845.55876.philb@philb.us>

On Wednesday 08 August 2007, Lorenzo Fiorini wrote:
> Phil what about a survey?

With what question / Answers?

-- 
Phil Barnett
AI4OF
SKCC #600
From randy at palmasdev.com  Tue Aug  7 11:31:41 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Wed Aug  8 08:51:40 2007
Subject: [Harbour] Viewer <-> XML <-> Application (was multi UI)
In-Reply-To: <46B88D40.5820800@libero.it>
References: <9257026e0708061120u494fabfbuab12974d74d81d7c@mail.gmail.com>
	<59D09FF6-D976-47D4-A3A7-A3295ECFB1CD@gmail.com>
	<20070807093806.GA14920@localhost.localdomain>
	<1186481234.5686.55.camel@anto-desktop>
	<20070807112353.GA16301@localhost.localdomain>
	<1186488304.5686.107.camel@anto-desktop>
	<20070807135702.GB17051@localhost.localdomain>
	<46B88D40.5820800@libero.it>
Message-ID: <20070807153602.434CE5061@smtp.tor.pathcom.com>

Hi all,

I am not sure if this helps you, but we are currently porting our 
Windows app to Ajax - We intend on re-routing all the Windows API 
code with calls to an Ajax Web client. We are developing an XML 
schema to describe the user events and responses from the server. 
There will be one instance of the Win32 EXE running on one or more 
servers (ie. server farms) for each web client instance. See the 
attached diagram as an example of how we are implementing this. This 
framework allows us to offer both a Windows and web client using the 
same source code base.

Regards,
Randy.

At 11:18 AM 8/7/2007, Maurilio Longo wrote:
>Przemyslaw and all,
>
>is AJAX intended to do such kind of things, isn't it?
>
>GoogleEarth, for example, should be such a kind of program, where the client
>UI talks to a server which is somewhere.
>
>If it is so, why reinvent the wheel? Google API is available, maybe it could
>be feasible to 'attach' ourselves to those APIs and just add some more
>'business' like logic (maybe a way to use codeblock to validate input and such
>kind of issues).
>
>Am I completely wrong? :)
>
>Maurilio.
>
>
>Przemyslaw Czerpak ha scritto:
> >
> > On Tue, 07 Aug 2007, Antonio Linares wrote:
> > > In that case, you do need to use a designer. Do you plan to build a
> > > designer ?
> >
> > Looks that we are talking about absolutely different things.
> >
> > > Then it may be a valid solution for you, but not for all of Harbour
> > > users.
> >
> > It's possible but I'd rather think you do not understand
> > what I'm talking about because you are not familiar with
> > real client/server applications hosted on remote servers.
> >
> > > > 5. From the beginning I'm talking about running binaries on the host
> > > >    and connecting to the same instance of program using different
> > > >    terminals.
> > > Then it looks as we are talking about different things :)
> >
> > Exactly.
> >
> > > >    Many of the modifications in Harbour core
> > > >    code I done in last year was for increasing security and protection
> > > >    against wrong user code which may intentionally try to break HVM.
> > > In that case, it looks as multithreading is one of the most important
> > > requisites, and we don't even have a first release of it.
> >
> > Sorry Antonio but I have very serious problem to understand what
> > you are talking about. Can you say sth more why you need MT mode
> > and what you want to do with it?
> >
> > > Is it your point to run an application on a server and then accessing it
> > > from different OS and getting the (limited) look of the OS ? If so,
> >
> > On most OSes it will look as any other OS native application.
> >
> > > whats the advantage of that ? To make the customer temporarly happy ? :)
> >
> > Just simply to increase hundreds time the speed, to protect the data,
> > to allow working from any place and any device, to work with very slow
> > connections, to resolve some very unpleasure synchronization problems
> > which appear when you are using RDBMS and many others.
> >
> > > The customer soon will be requiring specific OS features support that
> > > your application will not be able to provide.
> >
> > The specific OS features can be implemented on the client side and it's
> > usually the simplest and the less payment part of code. I also do not
> > see any reason to not add some support for communication with external
> > OS specific programs. The native OS viewer will be such application
> > and it will use protocol we will define.
> >
> > best regards,
> > Przemek
> > _______________________________________________
> > Harbour mailing list
> > Harbour@harbour-project.org
> > http://lists.harbour-project.org/mailman/listinfo/harbour
>
>--
>  __________
>|  |  | |__| Maurilio Longo
>|_|_|_|____| farmaconsult s.r.l.
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Framework.pdf
Type: application/pdf
Size: 28032 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070807/0376e1ed/Framework-0001.pdf
From makis1970 at gmail.com  Wed Aug  8 08:53:13 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Wed Aug  8 08:58:16 2007
Subject: [Harbour] is there any documentation about available Gt's
In-Reply-To: <20070808122351.GA9832@localhost.localdomain>
References: <003901c7d9a8$7c19b0a0$744d11e0$@com>
	<20070808122351.GA9832@localhost.localdomain>
Message-ID: <005d01c7d9bb$1b8262b0$52872810$@com>

Przmeyslaw, Lorenzo,

Thank you very much.

Regards
Mike Evans

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Wednesday, August 08, 2007 3:24 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] is there any documentation about available Gt's

On Wed, 08 Aug 2007, Mike Evans (Gmail) wrote:
> I can see under the rtl folder many different Gts but for most of them I
> don't know what they do and where (Platform, gui, terminal etc). Also
Which
> functions-methods are available for each of them?

gtnul  - base GT driver from which each other inherits.
         it gives screen buffer functionality but does not
         produce any screen output from disp*() commands
         Only outStd()/outErr() are supported.
         It's present on all platforms and i always linked.

gtcgi  - very simple GT driver which does not make any output
         formatting and simply send it as to stdout.
         Supported by all platforms.

gtstd  - it uses stdout output but tries to support full screen output but
         without collor support and cursor shape. It format text to number
         of row and columns if is able to detect these values on given
         platform.
         Supported by all platforms.

gtpca  - It's PCANSI terminal GT - it works in similar way to ANSI GT
         driver in Clipper though keyboard input is not fully supported.
         Now GTTRM can make all GTPCA job and much more.
         Supported by all platforms.

gtdos  - GT driver for DOS - it uses BIOS and direct hardware screen output
         so it's very similar to Clipper one - in practice due to the same
         environment you will noticed that all small details of Clipper
         GT drivers are replicated here. You can think about it like 100%
         Clipper compatible.
         Supported only by DOS builds.

gtos2  - GT driver for OS2 - It's sth like GTWIN but for other OS.
         Supported only by OS2 builds.

gtwin  - GT driver for MS-Windows console window.
         Supported only by MS-WINDOWS (W95 or higher) builds.

gtcrs  - GT driver for platforms which supports curses or compatible
         (ncurses) library - in practice POSIX systems.
         Supported by POSIX systems (mostly different *nixes)

gtsln  - GT driver for platforms which supports slang library.
         It's like GTCRS but instead of CURSES it uses SLANG.
         Supported by POSIX systems (mostly different *nixes).
         It supports Unicode input/output if compiled with slang
         version which also supports it.

gttrm  - it's like GTCRS and GTSLN but it does not use any external
         terminal library like SLANG or CURSES and it does not use
         any external database to extract terminal capabilities so
         it can be compiled on any POSIX system - I'll add support
         also for DOS/Windows in the future. It should automatically
         detect UTF-8 terminal mode and switch internally to Unicode
         mode if necessary. In theory is less functional then GTCRS
         and GTSLN because I hard coded escape sequences only for few
         terminals but because I added support also for some non
         standard terminal extensions and I'm using very limited set
         of output sequences then it usually works better then GTCRS
         and GTSLN.
         Supported by POSIX systems (mostly different *nixes)

gtwvt  - GT driver for MS-Windows. It creates its own GUI window
         instead of using MS-console window. It allows to change
         font, window size, etc.
         Supported only by MS-WINDOWS (W95 or higher) builds.

gtxwc  - GT driver for X-Window. It's like GTWVT but for nixes.
         Additionaly it has set of predefined vector characters
         (box and arrowd drawing characters) which can be used
         instead of the one defined in font. It means that you
         will have all boxes and arrows you know from DOS ans CP437
         even if you chose font which does not have them. Additionally
         it support some simple graphic output. See tests/gfx.prg
         for simple program which demonstrates it.
         Supported by POSIX systems (mostly different *nixes)

gtalleg- GT driver which uses alegro library for input/output.
         It's also GUI driver which support HB_GFX*() drawing.
         Multi platform, works on all platforms for which allegro
         library has been ported: MS-Win, DOS, VESA, X11, FB, SDL, ...

gtgui  - pseudo GT driver which adds to GTNUL Clipboard and Tone
         functionality. If you are using some MS-Windows GUI library
         and you still want to use TONE() function or GTI_CLIPBOARD
         actions then link this GT driver with your application.
         If you do not want to use TONE() or GTI_CLIPBOARD then
         do not link it - it will be only waste of memory.

gtctw  - GT driver which adds CT3 Window functionality to any other
         GT driver from which it inherits. It's activated automatically
         when you execute first W*() function.
         In similar way in Harbour it's possible to add support for
         GTWVW inheriting from GTWVT.

Some of the GT drivers support additional functionality with hb_gtInfo()
interface. See include/hbgtinfo.ch for different actions.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From makis1970 at gmail.com  Wed Aug  8 09:12:21 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Wed Aug  8 09:17:20 2007
Subject: [Harbour] Fonts adn foolish question.
Message-ID: <005e01c7d9bd$c49676f0$4dc364d0$@com>

Maybee I'm idiot but I understand nothing about how fonts - codepage - inkey
values works. So here is my question. I have a WVT application (converted
from a dos application codepage 737).  I use  wvt_setcodepage(255) and here
is my first question The value 255 (OEM) means that my program will use what
codepage (737?). Then I put a wvt_setfont( "Lucida console" x,x,x,x). As I
found this font is  TTF. If I open it through a specialized font program I
can see all the characters that exist in ascii 737 but my program does not
display them (I'm talking about chr( 30 ) chr(31 ) etc. but displays
correctly the box characters. and characters from my language.  I found
another TTF font that also have this characters and I f use this all the
characters are displayed correctly. I couln't found any difference between
the 2 fonts. So my question is how wvt translate my characters to and how
WVT translates them to the corresponding font.  At last I have another
problem Using GTwin the ALT_? (letter) combination produce different values
if my current writing language English (correct the same as clipper) and
different if I use a different writing language (greek) wrong values. If I
use wvt I'm getting the same correct values (the same as clipper)
independent from the writing language why this happen. Also under wvt the
KbdStat function returns correct value about ALT key state but this is not
true under gtwin. I've tried to read the source of both Gt's but I
understand nothing.

 

Thanks in advance

Mike Evans

 

PS. Is it possible to use a font from wvt_setfont without install it first.
(I don't want to install the font but just use it under my wvt application)?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070808/dbbca264/attachment.html
From druzus at priv.onet.pl  Wed Aug  8 09:30:13 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Aug  8 09:30:19 2007
Subject: [Harbour] ChangeLog 2007-08-08 15:20 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070808133013.GA15532@localhost.localdomain>

2007-08-08 15:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/libnf/at2.prg
  * harbour/contrib/libnf/min2dhm.prg
  * harbour/contrib/libnf/ontick.c
  * harbour/contrib/libnf/sqzn.prg
  * harbour/contrib/libnf/bytexor.prg
  * harbour/contrib/libnf/asum.prg
  * harbour/contrib/libnf/sleep.prg
  * harbour/contrib/libnf/any2any.prg
  * harbour/contrib/libnf/origin.c
  * harbour/contrib/libnf/mouse.c
  * harbour/contrib/libnf/stod.c
  * harbour/contrib/libnf/vertmenu.prg
  * harbour/contrib/libnf/aredit.prg
  * harbour/contrib/libnf/n2color.c
  * harbour/contrib/libnf/xbox.prg
  * harbour/contrib/libnf/hex2dec.prg
  * harbour/contrib/libnf/getver.c
  * harbour/contrib/libnf/Makefile
  * harbour/contrib/libnf/invclr.prg
  * harbour/contrib/libnf/popadder.prg
  * harbour/contrib/libnf/d2e.prg
  * harbour/contrib/libnf/anomatch.prg
  * harbour/contrib/libnf/color2n.c
  * harbour/contrib/libnf/datecnfg.prg
  * harbour/contrib/libnf/easter.prg
  * harbour/contrib/libnf/ntow.prg
  * harbour/contrib/libnf/floptst.prg
  * harbour/contrib/libnf/pchr.prg
  * harbour/contrib/libnf/tbwhile.prg
  * harbour/contrib/libnf/e2d.prg
  * harbour/contrib/libnf/sysmem.prg
  * harbour/contrib/libnf/dfile.prg
  * harbour/contrib/libnf/clrsel.prg
  + harbour/contrib/libnf/fttext.c
  + harbour/contrib/libnf/putkey.c
    * basic cleanup and syncing with some of xHarbour fixes and extensions.
      I'd like to ask Windows users to update non GNU make file

  * harbour/source/pp/ppcore.c
    + added support for .T., .F., .Y., .N. in PP and #IF ... / #ELIF ...
      expressions. It was reported by Nick Van Dyck on xHarbour devel list
      that old PP supported it. I haven't known that old PP suported .T.
      and .F. in #IF directive. Please not that there are other diferences
      between new PP and the old one in expresions which can be used in
      #IF ... / #ELIF directives. New PP supports C like expressions with
      support for pseudo functions like defined(), operates on integer
      numbers only to not damage 64bit values during conversion to double
      and keep C compatible results (the old one used double values) and
      is much more restrictive in checking for valid expression.

best regards,
Przemek
From antonioharbour at gmail.com  Wed Aug  8 09:35:47 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Aug  8 09:36:08 2007
Subject: [Harbour] Web 3.0 by Google CEO
Message-ID: <1186580147.5658.2.camel@anto-desktop>

http://www.readwriteweb.com/archives/eric_schmidt_defines_web_30.php

From devlist.harbour at gmail.com  Wed Aug  8 09:38:55 2007
From: devlist.harbour at gmail.com (Patrick Mast, xHarbour.com)
Date: Wed Aug  8 09:39:50 2007
Subject: [Harbour] ChangeLog 2007-08-08 15:20 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070808133013.GA15532@localhost.localdomain>
References: <20070808133013.GA15532@localhost.localdomain>
Message-ID: <01B6449E-7C0F-46F8-AE25-EE57A7510EA1@GMail.com>

Hey Przemyslaw,

>   * harbour/source/pp/ppcore.c
>     + added support for .T., .F., .Y., .N. in PP and #IF ... /  
> #ELIF ...
>       expressions. It was reported by Nick Van Dyck on xHarbour  
> devel list
>       that old PP supported it. I haven't known that old PP  
> suported .T.
>       and .F. in #IF directive. Please not that there are other  
> diferences
>       between new PP and the old one in expresions which can be  
> used in
>       #IF ... / #ELIF directives. New PP supports C like  
> expressions with
>       support for pseudo functions like defined(), operates on integer
>       numbers only to not damage 64bit values during conversion to  
> double
>       and keep C compatible results (the old one used double  
> values) and
>       is much more restrictive in checking for valid expression.

Thanks for the fix Przemek. This was reported by a xHarbour.com user.

Patrick
From harbour.01 at syenar.hu  Wed Aug  8 09:42:01 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Aug  8 09:42:08 2007
Subject: [Harbour] CHANGELOG: 2007-08-08 15:41 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7d9c1$Blat.v2.6.1$e63c326e$1f6037febd86@127.0.0.1>

2007-08-08 15:41 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * contrib/libnf/makefile.vc
   * contrib/libnf/nanfor.bc
     * Updated.

From harbour.01 at syenar.hu  Wed Aug  8 09:44:28 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Aug  8 09:44:32 2007
Subject: [Harbour] CHANGELOG: 2007-08-08 15:44 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7d9c2$Blat.v2.6.1$3dbe01b6$1564ddb372c2@127.0.0.1>

2007-08-08 15:44 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * contrib/libnf/make_b32.bat
   - contrib/libnf/nanfor.bc
   + contrib/libnf/makefile.bc
     * BC makefile name made uniform.

From lorenzo.fiorini at gmail.com  Wed Aug  8 10:05:46 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Aug  8 10:05:55 2007
Subject: [Harbour] Fonts adn foolish question.
In-Reply-To: <005e01c7d9bd$c49676f0$4dc364d0$@com>
References: <005e01c7d9bd$c49676f0$4dc364d0$@com>
Message-ID: <9257026e0708080705j695336fcqbcc49020d60b9cd8@mail.gmail.com>

On 8/8/07, Mike Evans (Gmail) <makis1970@gmail.com> wrote:

> my first question The value 255 (OEM) means that my program will use what
> ...
> understand nothing.

It is really difficult to help people with other keyboards/languages
issue and even more when they use different alphabet :)

So I simply report my experience:
I've completely dropped every OEM/DOS codepage support. I've converted
all my dbfs to LATIN1 ( ANSI in Windows slang or ISO8859-1 in web
slang ) and I've removed every char > 127 from my code.

It has been a shock but I survived. chr(x) is better than []<>|-v^ but
it is considered DOS anyway so at least I can say I have a
"multi-platform" interface :)

You can't even count on UTF-8 for example putty for Windows support it
but pocketputty doesn't.

Just an advice don't try to replace borders with +-| they really have
a 70's look.
Replace them with colored space( 1 ) borders.

best regards,
Lorenzo
From m.renzi at maticasrl.it  Wed Aug  8 10:16:21 2007
From: m.renzi at maticasrl.it (Massimo Renzi (MaticaSrl))
Date: Wed Aug  8 10:16:44 2007
Subject: [Harbour] Web 3.0 by Google CEO
In-Reply-To: <1186580147.5658.2.camel@anto-desktop>
References: <1186580147.5658.2.camel@anto-desktop>
Message-ID: <002301c7d9c6$b21e4a30$2a00df0a@maxsoft>

Thank you Antonio for your link. 
:)

I think that web3 stand for the END of web as we actually know.
Next generation will be like RemoteDesktop (windows OS) and XClient for
XServer (linux OS) in multi-session application-os.

Future is in new different browsers multiplatform that use TCP/IP to
communicate, but actual browser and WEB have no future.

See also http://www.youos.com that I think can be web3... but I think that
HTML era is finished.
HTML is not designed to develop application, but to share information, and
those are 2 very different mission.

So I think that next software house that will develop a browser that can
connect to WebServer, TelnetServer, TerminalServer, XServer for run
application and share documents will be the Microsoft of future.

Best regards.

Max

(if someone wanna collaborate to develop that next generation of browser
contact me :) )




From harbour.01 at syenar.hu  Wed Aug  8 10:33:32 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Aug  8 10:33:35 2007
Subject: [Harbour] CHANGELOG: 2007-08-08 16:31 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7d9c9$Blat.v2.6.1$18b2d318$1534abb22da8@127.0.0.1>

2007-08-08 16:31 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * include/hbcompat.ch
   * include/hbextern.ch
   * contrib/libnf/fttext.c
   * source/vm/arrayshb.c
     + xhb RASCAN() added to Harbour without HB_COMPAT_XHB 
       switch, under the name HB_RASCAN().
       Translation from RASCAN() is done via hbcompat.ch
     ! NFLib/FT_FRSEEK() now works in Harbour regardless 
       of the HB_COMPAT switches.

From lorenzo.fiorini at gmail.com  Wed Aug  8 10:40:27 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Aug  8 10:40:31 2007
Subject: [Harbour] Web 3.0 Harbour browser outlined :)
Message-ID: <9257026e0708080740y7af260a9q7286f8b900ed3b20@mail.gmail.com>

I've written it like an outline to define what I'm thinking so the
subject is me not you :)

- replace the word viewer with browser and imagine to use f.e. FiveWin
to create an app called HBrowser in Win/Gtk/OSX/WinCE ( let's forget
text by now )

- HBrowser is made by a main window with a menu, a toolbar, a long
text entry and a folder control ( notebook in gtk ). With menu/toolbar
you can create/delete folder's pages and the application can
replace/integrate the main menu.

- once you're on a folder page you can type in the "address text
entry" a string like hrb://IP/PORT/FUNCTION?p1&p2&px. Clearly after
the first call I can use the menu or the toolbar if it has been
replaced by the remote app and I can have "bookmarks" to avoid type
adresses

- on the other side there'll be an Harbour application with a function
name FUNCTION with code like @ x,y PAGE .... @ x,y GET ...

- Harbour GTXINET process those classes but instead of calling a GUI
api simply create an XML with all the control's attribute like name,
size, position, default value and so on

- instead of the ACTIVATE, at the end of the function there is a SHOW
function that send the XML to the browser that has called the function

- the HBrowser read this XML and create on-fly the controls on the active page

- the data that the user enter/modifiy/delete update XML's nodes and
the XML is in memory

- behind the "Save/Ok/Done" button there is a SEND action that returns
the modified XML to the function specified in the button's action

- this one read from the XML the data it needs and continue the
application process until it has another SHOW method which send
another XML with other controls to the browser and so on

- it is exactly like IE or FF works but instead of xhtml we exchange
XML page of controls which are rendered using the native HBrowse
functions

- since the number and the type of the controls is limited and known
it will be much easier than an xhtml browser where you don't know how
many nested levels have a table

- like WWW browser we need a multi-page interface instead of a
multi-window one so that the users find the same interface moving
between HBrowser to IE/FF

- beside the "basic" GPL HBrowser there can be binary "plugins" made
as dll/so that can be loaded dynamically by the HBrowser and that
process extra controls or do particular tasks

- on the "server" side it is really easy to add control's
specifications since it is only an XML's node but this specification
need something at the client side to be understood

best regards,
Lorenzo
From m.renzi at maticasrl.it  Wed Aug  8 10:59:40 2007
From: m.renzi at maticasrl.it (Massimo Renzi (MaticaSrl))
Date: Wed Aug  8 11:00:04 2007
Subject: [Harbour] Web 3.0 Harbour browser outlined :)
In-Reply-To: <9257026e0708080740y7af260a9q7286f8b900ed3b20@mail.gmail.com>
References: <9257026e0708080740y7af260a9q7286f8b900ed3b20@mail.gmail.com>
Message-ID: <000001c7d9cc$bf3bedc0$2a00df0a@maxsoft>

Hi Lorenzo,
very great job.

I think that a GUI xClient will better, for example you have to think about
user interaction. Now in browser there is Javascript (and Ajax), how in
HBrowser ? We cant make somethink that is badder than actual system :)

I think about an HBGUIServer like a TerminalServer, that run more instance
of the same application and make a bridge to send and recive user interface
events (open window, intercept mouse movements, keyboard and so on).
Instead of send data to the graphical hardware, it send data to HBroser that
send to graphical hardware of the client pc.

What about?
Where the developer that has written GT for xHarbour?

Best regards

Max


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] Per conto di Lorenzo Fiorini
Inviato: mercoled? 8 agosto 2007 16.40
A: Harbour Project Main Developer List.
Oggetto: [Harbour] Web 3.0 Harbour browser outlined :)

I've written it like an outline to define what I'm thinking so the
subject is me not you :)

- replace the word viewer with browser and imagine to use f.e. FiveWin
to create an app called HBrowser in Win/Gtk/OSX/WinCE ( let's forget
text by now )

- HBrowser is made by a main window with a menu, a toolbar, a long
text entry and a folder control ( notebook in gtk ). With menu/toolbar
you can create/delete folder's pages and the application can
replace/integrate the main menu.

- once you're on a folder page you can type in the "address text
entry" a string like hrb://IP/PORT/FUNCTION?p1&p2&px. Clearly after
the first call I can use the menu or the toolbar if it has been
replaced by the remote app and I can have "bookmarks" to avoid type
adresses

- on the other side there'll be an Harbour application with a function
name FUNCTION with code like @ x,y PAGE .... @ x,y GET ...

- Harbour GTXINET process those classes but instead of calling a GUI
api simply create an XML with all the control's attribute like name,
size, position, default value and so on

- instead of the ACTIVATE, at the end of the function there is a SHOW
function that send the XML to the browser that has called the function

- the HBrowser read this XML and create on-fly the controls on the active
page

- the data that the user enter/modifiy/delete update XML's nodes and
the XML is in memory

- behind the "Save/Ok/Done" button there is a SEND action that returns
the modified XML to the function specified in the button's action

- this one read from the XML the data it needs and continue the
application process until it has another SHOW method which send
another XML with other controls to the browser and so on

- it is exactly like IE or FF works but instead of xhtml we exchange
XML page of controls which are rendered using the native HBrowse
functions

- since the number and the type of the controls is limited and known
it will be much easier than an xhtml browser where you don't know how
many nested levels have a table

- like WWW browser we need a multi-page interface instead of a
multi-window one so that the users find the same interface moving
between HBrowser to IE/FF

- beside the "basic" GPL HBrowser there can be binary "plugins" made
as dll/so that can be loaded dynamically by the HBrowser and that
process extra controls or do particular tasks

- on the "server" side it is really easy to add control's
specifications since it is only an XML's node but this specification
need something at the client side to be understood

best regards,
Lorenzo
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From makis1970 at gmail.com  Wed Aug  8 10:58:12 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Wed Aug  8 11:03:06 2007
Subject: [Harbour] ChangeLog 2007-08-08 15:20 UTC+0200 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20070808133013.GA15532@localhost.localdomain>
References: <20070808133013.GA15532@localhost.localdomain>
Message-ID: <006c01c7d9cc$8d4518a0$a7cf49e0$@com>

The fttext.c is incompatible with clipper nanfor.
In Clipper nanfor Ft_Fgobottom is Ft_fgobot
In clipper nanfor Ft_Fuse returns numeric (area of the file) if the file is
opened, on error returns -1, and in close mode returns 0, HARBOUR return
always logical.
In clipper nanfor there is Ft_Ferror function that returns the error number
on a failed ft_fuse operation.
Also ft_fuse in clipper does not need ft_fselect before but just use the
next unused area

Regards
Mike Evans

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Przemyslaw Czerpak
Sent: Wednesday, August 08, 2007 4:30 PM
To: Harbour Project Main Developer List.
Subject: [Harbour] ChangeLog 2007-08-08 15:20 UTC+0200 Przemyslaw Czerpak
(druzus/at/priv.onet.pl)

2007-08-08 15:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/libnf/at2.prg
  * harbour/contrib/libnf/min2dhm.prg
  * harbour/contrib/libnf/ontick.c
  * harbour/contrib/libnf/sqzn.prg
  * harbour/contrib/libnf/bytexor.prg
  * harbour/contrib/libnf/asum.prg
  * harbour/contrib/libnf/sleep.prg
  * harbour/contrib/libnf/any2any.prg
  * harbour/contrib/libnf/origin.c
  * harbour/contrib/libnf/mouse.c
  * harbour/contrib/libnf/stod.c
  * harbour/contrib/libnf/vertmenu.prg
  * harbour/contrib/libnf/aredit.prg
  * harbour/contrib/libnf/n2color.c
  * harbour/contrib/libnf/xbox.prg
  * harbour/contrib/libnf/hex2dec.prg
  * harbour/contrib/libnf/getver.c
  * harbour/contrib/libnf/Makefile
  * harbour/contrib/libnf/invclr.prg
  * harbour/contrib/libnf/popadder.prg
  * harbour/contrib/libnf/d2e.prg
  * harbour/contrib/libnf/anomatch.prg
  * harbour/contrib/libnf/color2n.c
  * harbour/contrib/libnf/datecnfg.prg
  * harbour/contrib/libnf/easter.prg
  * harbour/contrib/libnf/ntow.prg
  * harbour/contrib/libnf/floptst.prg
  * harbour/contrib/libnf/pchr.prg
  * harbour/contrib/libnf/tbwhile.prg
  * harbour/contrib/libnf/e2d.prg
  * harbour/contrib/libnf/sysmem.prg
  * harbour/contrib/libnf/dfile.prg
  * harbour/contrib/libnf/clrsel.prg
  + harbour/contrib/libnf/fttext.c
  + harbour/contrib/libnf/putkey.c
    * basic cleanup and syncing with some of xHarbour fixes and extensions.
      I'd like to ask Windows users to update non GNU make file

  * harbour/source/pp/ppcore.c
    + added support for .T., .F., .Y., .N. in PP and #IF ... / #ELIF ...
      expressions. It was reported by Nick Van Dyck on xHarbour devel list
      that old PP supported it. I haven't known that old PP suported .T.
      and .F. in #IF directive. Please not that there are other diferences
      between new PP and the old one in expresions which can be used in
      #IF ... / #ELIF directives. New PP supports C like expressions with
      support for pseudo functions like defined(), operates on integer
      numbers only to not damage 64bit values during conversion to double
      and keep C compatible results (the old one used double values) and
      is much more restrictive in checking for valid expression.

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Wed Aug  8 12:14:33 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Aug  8 12:14:36 2007
Subject: [Harbour] Web 3.0 Harbour browser outlined :)
In-Reply-To: <000001c7d9cc$bf3bedc0$2a00df0a@maxsoft>
References: <9257026e0708080740y7af260a9q7286f8b900ed3b20@mail.gmail.com>
	<000001c7d9cc$bf3bedc0$2a00df0a@maxsoft>
Message-ID: <9257026e0708080914x20036699hc9d01d11c342fcdc@mail.gmail.com>

On 8/8/07, Massimo Renzi (MaticaSrl) <m.renzi@maticasrl.it> wrote:

> I think that a GUI xClient will better, for example you have to think about
> user interaction. Now in browser there is Javascript (and Ajax), how in
> HBrowser ? We cant make somethink that is badder than actual system :)

HBrowser does not exist yet it is simply a way to advance the discussion.

> I think about an HBGUIServer like a TerminalServer, that run more instance
> of the same application and make a bridge to send and recive user interface
> events (open window, intercept mouse movements, keyboard and so on).
> Instead of send data to the graphical hardware, it send data to HBroser that
> send to graphical hardware of the client pc.

I think it can be much easier than this. Like we try to separate GUI
and business rules inside the app we can have GUI and business rules
on completely different apps.

"Server" app doesn't need to now anything about mouse movements it
should only say
"Hey I need these informations from user to run this report".
Clearly there are more complex tasks like invoicing or accounting but
I see that users don't complain when their bank web page have 3 combos
for day, month and year to compose a date ( and this means a lot of
clicks ).
Also since here we use dd/mm/yyyy often they know only at the end that
31/02 is invalid :)

But since they want web apps this is what they deserve ::)

> Where the developer that has written GT for xHarbour?

???

best regards,
Lorenzo
From randy at palmasdev.com  Wed Aug  8 12:32:27 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Wed Aug  8 12:38:15 2007
Subject: [Harbour] Web 3.0 Harbour browser outlined :)
In-Reply-To: <9257026e0708080914x20036699hc9d01d11c342fcdc@mail.gmail.co
 m>
References: <9257026e0708080740y7af260a9q7286f8b900ed3b20@mail.gmail.com>
	<000001c7d9cc$bf3bedc0$2a00df0a@maxsoft>
	<9257026e0708080914x20036699hc9d01d11c342fcdc@mail.gmail.com>
Message-ID: <20070808163812.0B2E955F7@smtp.tor.pathcom.com>

Hi Lorenzo,

>"Server" app doesn't need to now anything about mouse movements it
>should only say
>"Hey I need these informations from user to run this report".
>Clearly there are more complex tasks like invoicing or accounting but
>I see that users don't complain when their bank web page have 3 combos
>for day, month and year to compose a date ( and this means a lot of
>clicks ).
>Also since here we use dd/mm/yyyy often they know only at the end that
>31/02 is invalid :)

True, but our analysis of this is that it is far more complex than 
simply "grabbing" field values from a web client. For example, if you 
want to be truly platform independent AND Cl*pper compatible, you 
need to also support events such as pre/post validation on fields and 
all the interrelationships. In our case, we must fire an event back 
to the app (on the server) whenever a user is moving from one field 
to another. But you are correct, the actual keyboard and mouse 
activity can be localized on the web client.

Furthermore, our initial investigation indicates that Java/Ajax is 
capable of rendering dialogs at the pixel level - This means that we 
will be able to duplicate our Windows dialogs with the placement of 
controls almost exactly the same on the web client - Again, offering 
true cross-platform capability (at least for Windows and web).

Regards,
Randy.

From labitas at gmail.com  Wed Aug  8 13:11:07 2007
From: labitas at gmail.com (Saulius Zrelskis)
Date: Wed Aug  8 13:11:15 2007
Subject: [Harbour] Fonts adn foolish question.
In-Reply-To: <005e01c7d9bd$c49676f0$4dc364d0$@com>
References: <005e01c7d9bd$c49676f0$4dc364d0$@com>
Message-ID: <2386af1b0708081011q23058619pa0d98f8174f327d1@mail.gmail.com>

>Also under wvt the KbdStat function returns correct value about ALT key
state but this is not true under gtwin. I've tried to read the >source of
both Gt's but I understand nothing.

>From \source\rtl\gtwin\gtwin.c module:

static int kbdShiftsState( void )
{
   int  kbdShifts = 0;

   if ( GetKeyState( VK_SHIFT )   & 0x80 ) kbdShifts |= GTI_KBD_SHIFT;
   if ( GetKeyState( VK_CONTROL ) & 0x80 ) kbdShifts |= GTI_KBD_CTRL;
   //if ( GetKeyState( VK_MENU )    & 0x80 ) kbdShifts |= GTI_KBD_ALT;
   if ( GetKeyState( VK_LWIN )    & 0x80 ) kbdShifts |= GTI_KBD_LWIN;
   if ( GetKeyState( VK_RWIN )    & 0x80 ) kbdShifts |= GTI_KBD_RWIN;
   if ( GetKeyState( VK_APPS )    & 0x80 ) kbdShifts |= GTI_KBD_MENU;
   if ( GetKeyState( VK_SCROLL )  & 0x01 ) kbdShifts |= GTI_KBD_SCROLOCK;
   if ( GetKeyState( VK_NUMLOCK ) & 0x01 ) kbdShifts |= GTI_KBD_NUMLOCK;
   if ( GetKeyState( VK_CAPITAL ) & 0x01 ) kbdShifts |= GTI_KBD_CAPSLOCK;

   return kbdShifts;
}

ALT state setting (VK_MENU) is commented out :((
(in \source\rtl\gtwvt\gtwvt.c module not!)

best regards,
Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070808/f40b740a/attachment.html
From e.m.giordano at emagsoftware.it  Wed Aug  8 14:37:29 2007
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Aug  8 14:37:45 2007
Subject: [Harbour] Web 3.0 Harbour browser outlined :)
References: <9257026e0708080740y7af260a9q7286f8b900ed3b20@mail.gmail.com><000001c7d9cc$bf3bedc0$2a00df0a@maxsoft>
	<9257026e0708080914x20036699hc9d01d11c342fcdc@mail.gmail.com>
Message-ID: <005a01c7d9eb$2cb2b640$ca64fea9@emag>


-----Messaggio Originale----- 
Da: "Lorenzo Fiorini" <lorenzo.fiorini@gmail.com>
A: <m.renzi@maticasrl.it>; "Harbour Project Main Developer List." 
<harbour@harbour-project.org>
Data invio: mercoled? 8 agosto 2007 18.14
Oggetto: Re: [Harbour] Web 3.0 Harbour browser outlined :)


> I see that users don't complain when their bank web page have 3 combos
> for day, month and year to compose a date ( and this means a lot of
> clicks ).

They don't complain because complaining with banks is not so easy. But they 
will complain when you'll give them your new web app.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From lorenzo.fiorini at gmail.com  Wed Aug  8 14:39:34 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Aug  8 14:39:39 2007
Subject: [Harbour] Web 3.0 Harbour browser outlined :)
In-Reply-To: <005a01c7d9eb$2cb2b640$ca64fea9@emag>
References: <9257026e0708080740y7af260a9q7286f8b900ed3b20@mail.gmail.com>
	<000001c7d9cc$bf3bedc0$2a00df0a@maxsoft>
	<9257026e0708080914x20036699hc9d01d11c342fcdc@mail.gmail.com>
	<005a01c7d9eb$2cb2b640$ca64fea9@emag>
Message-ID: <9257026e0708081139s3f0488efuc3d81fe4c4a09b45@mail.gmail.com>

On 8/8/07, Enrico Maria Giordano <e.m.giordano@emagsoftware.it> wrote:

> They don't complain because complaining with banks is not so easy. But they
> will complain when you'll give them your new web app.

Sure :)

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Wed Aug  8 14:42:22 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Aug  8 14:42:30 2007
Subject: [Harbour] Web 3.0 Harbour browser outlined :)
In-Reply-To: <20070808163812.0B2E955F7@smtp.tor.pathcom.com>
References: <9257026e0708080740y7af260a9q7286f8b900ed3b20@mail.gmail.com>
	<000001c7d9cc$bf3bedc0$2a00df0a@maxsoft>
	<9257026e0708080914x20036699hc9d01d11c342fcdc@mail.gmail.com>
	<20070808163812.0B2E955F7@smtp.tor.pathcom.com>
Message-ID: <9257026e0708081142q34e44296x1a8af6505ac90080@mail.gmail.com>

On 8/8/07, Randy Portnoff <randy@palmasdev.com> wrote:

> True, but our analysis of this is that it is far more complex than
> simply "grabbing" field values from a web client. For example, if you
> want to be truly platform independent AND Cl*pper compatible, you
> need to also support events such as pre/post validation on fields and
> all the interrelationships. In our case, we must fire an event back
> to the app (on the server) whenever a user is moving from one field
> to another.

You're right I also have this kind of situations but for me this
"convertion" should be also the chance to "clean" the code.

Let's suppose a company that enters the orders locally with Harbour
apps, via web from salesforce and via XML email attachments from a big
customer e-procurement app ( a smallcolmpany has often a big customer
to whom they cannot say no ).
If valid code is attached to the gets it has to be replicated on the
web but it still won't work for the XML upload. Instead if there is a
single order_validate() function that returns for example an array
with the errors, it can be used in all the situations also to log the
errors in batch processing. Less interactive than usual but much more
safe and if we agree that the future will be multisource/multidevice
such situations will be more frequents.

This doesn't mean eliminate when/valid but rethink the apps in different way.
For this I'm looking for a long term solution.

best regards,
Lorenzo
From randy at palmasdev.com  Wed Aug  8 15:12:46 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Wed Aug  8 15:12:17 2007
Subject: [Harbour] Web 3.0 Harbour browser outlined :)
In-Reply-To: <9257026e0708081142q34e44296x1a8af6505ac90080@mail.gmail.co
 m>
References: <9257026e0708080740y7af260a9q7286f8b900ed3b20@mail.gmail.com>
	<000001c7d9cc$bf3bedc0$2a00df0a@maxsoft>
	<9257026e0708080914x20036699hc9d01d11c342fcdc@mail.gmail.com>
	<20070808163812.0B2E955F7@smtp.tor.pathcom.com>
	<9257026e0708081142q34e44296x1a8af6505ac90080@mail.gmail.com>
Message-ID: <20070808191202.E47AB5566@smtp.tor.pathcom.com>

Hi Lorenzo,

>This doesn't mean eliminate when/valid but rethink the apps in different way.
>For this I'm looking for a long term solution.

Yes, I agree - Ideally, a single page validation would be best but 
sometimes the value in one field can affect others (eg. the value in 
one field may cause other fields to be disabled). Anyway, I agree 
that "tweaking" of the Windows app is necessary to make it work well 
in a web environment. However, now that browsers automatically 
maintain persistent connections between the client and the webserver 
(for up to 60 seconds), the performance hit of communicating with the 
server, even when any field loses/gains focus, may not be that bad - 
In fact, our preliminary tests indicate that this will happen in less 
than one second if the connection is already open. Also, as time goes 
on and the IP/web technology improves, this will become even less of an issue.

Regards,
Randy. 

From makis1970 at gmail.com  Wed Aug  8 15:08:10 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Wed Aug  8 15:13:01 2007
Subject: [Harbour] Fonts adn foolish question.
In-Reply-To: <2386af1b0708081011q23058619pa0d98f8174f327d1@mail.gmail.com>
References: <005e01c7d9bd$c49676f0$4dc364d0$@com>
	<2386af1b0708081011q23058619pa0d98f8174f327d1@mail.gmail.com>
Message-ID: <000301c7d9ef$77d66960$67833c20$@com>

Saulius,

Thank you very much. Is there any reason for that?

 

Regards

Mike Evans

 

From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Saulius Zrelskis
Sent: Wednesday, August 08, 2007 8:11 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Fonts adn foolish question.

 

 

>Also under wvt the KbdStat function returns correct value about ALT key
state but this is not true under gtwin. I've tried to read the >source of
both Gt's but I understand nothing.

>From \source\rtl\gtwin\gtwin.c module:

static int kbdShiftsState( void )
{
   int  kbdShifts = 0;

   if ( GetKeyState( VK_SHIFT )   & 0x80 ) kbdShifts |= GTI_KBD_SHIFT;
   if ( GetKeyState( VK_CONTROL ) & 0x80 ) kbdShifts |= GTI_KBD_CTRL; 
   //if ( GetKeyState( VK_MENU )    & 0x80 ) kbdShifts |= GTI_KBD_ALT;
   if ( GetKeyState( VK_LWIN )    & 0x80 ) kbdShifts |= GTI_KBD_LWIN;
   if ( GetKeyState( VK_RWIN )    & 0x80 ) kbdShifts |= GTI_KBD_RWIN; 
   if ( GetKeyState( VK_APPS )    & 0x80 ) kbdShifts |= GTI_KBD_MENU;
   if ( GetKeyState( VK_SCROLL )  & 0x01 ) kbdShifts |= GTI_KBD_SCROLOCK;
   if ( GetKeyState( VK_NUMLOCK ) & 0x01 ) kbdShifts |= GTI_KBD_NUMLOCK; 
   if ( GetKeyState( VK_CAPITAL ) & 0x01 ) kbdShifts |= GTI_KBD_CAPSLOCK;

   return kbdShifts;
}

ALT state setting (VK_MENU) is commented out :((
(in \source\rtl\gtwvt\gtwvt.c module not!) 

best regards,
Saulius 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070808/65248b4f/attachment-0001.html
From makis1970 at gmail.com  Wed Aug  8 15:10:05 2007
From: makis1970 at gmail.com (Mike Evans (Gmail))
Date: Wed Aug  8 15:14:52 2007
Subject: [Harbour] Fonts adn foolish question.
In-Reply-To: <2386af1b0708081011q23058619pa0d98f8174f327d1@mail.gmail.com>
References: <005e01c7d9bd$c49676f0$4dc364d0$@com>
	<2386af1b0708081011q23058619pa0d98f8174f327d1@mail.gmail.com>
Message-ID: <000801c7d9ef$bc0e8db0$342ba910$@com>

Lorenzo,

Thanks but for now I want to have compatibility with the clipper app.

 

Regards

Mike Evans

 

From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Saulius Zrelskis
Sent: Wednesday, August 08, 2007 8:11 PM
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] Fonts adn foolish question.

 

 

>Also under wvt the KbdStat function returns correct value about ALT key
state but this is not true under gtwin. I've tried to read the >source of
both Gt's but I understand nothing.

>From \source\rtl\gtwin\gtwin.c module:

static int kbdShiftsState( void )
{
   int  kbdShifts = 0;

   if ( GetKeyState( VK_SHIFT )   & 0x80 ) kbdShifts |= GTI_KBD_SHIFT;
   if ( GetKeyState( VK_CONTROL ) & 0x80 ) kbdShifts |= GTI_KBD_CTRL; 
   //if ( GetKeyState( VK_MENU )    & 0x80 ) kbdShifts |= GTI_KBD_ALT;
   if ( GetKeyState( VK_LWIN )    & 0x80 ) kbdShifts |= GTI_KBD_LWIN;
   if ( GetKeyState( VK_RWIN )    & 0x80 ) kbdShifts |= GTI_KBD_RWIN; 
   if ( GetKeyState( VK_APPS )    & 0x80 ) kbdShifts |= GTI_KBD_MENU;
   if ( GetKeyState( VK_SCROLL )  & 0x01 ) kbdShifts |= GTI_KBD_SCROLOCK;
   if ( GetKeyState( VK_NUMLOCK ) & 0x01 ) kbdShifts |= GTI_KBD_NUMLOCK; 
   if ( GetKeyState( VK_CAPITAL ) & 0x01 ) kbdShifts |= GTI_KBD_CAPSLOCK;

   return kbdShifts;
}

ALT state setting (VK_MENU) is commented out :((
(in \source\rtl\gtwvt\gtwvt.c module not!) 

best regards,
Saulius 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070808/a1ca0872/attachment.html
From lorenzo.fiorini at gmail.com  Wed Aug  8 16:01:48 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Aug  8 16:01:53 2007
Subject: [Harbour] Web 3.0 Harbour browser outlined :)
In-Reply-To: <20070808191202.E47AB5566@smtp.tor.pathcom.com>
References: <9257026e0708080740y7af260a9q7286f8b900ed3b20@mail.gmail.com>
	<000001c7d9cc$bf3bedc0$2a00df0a@maxsoft>
	<9257026e0708080914x20036699hc9d01d11c342fcdc@mail.gmail.com>
	<20070808163812.0B2E955F7@smtp.tor.pathcom.com>
	<9257026e0708081142q34e44296x1a8af6505ac90080@mail.gmail.com>
	<20070808191202.E47AB5566@smtp.tor.pathcom.com>
Message-ID: <9257026e0708081301m5b0e2473p8162a647413e6517@mail.gmail.com>

On 8/8/07, Randy Portnoff <randy@palmasdev.com> wrote:

> Also, as time goes on and the IP/web technology improves, this will become even less of
> an issue.

I agree, even today we have cpu power that we don't use.
We should not be limited by performance issues.

best regards,
Lorenzo
From teo at windtelsoft.com  Wed Aug  8 16:56:30 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Wed Aug  8 16:56:38 2007
Subject: [Harbour] Harbour & MinGW on Windows
Message-ID: <200708081556.31204.teo@windtelsoft.com>

Hello,

I have installed MinGW32 (5.1.3) and MSYS.

My guess is that I need to execute the make_gnu.bat file, so I have already 
set the HB_ARCHITECTURE=w32 and HB_COMPILER=mingw32 vars. But I am unable to 
build Harbour.

How can I build Harbour with MinGW32 ?

Thanks in advance for the help.


best regards

Teo Fonrouge
From harbour.01 at syenar.hu  Wed Aug  8 17:18:00 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Aug  8 17:18:09 2007
Subject: [Harbour] Harbour & MinGW on Windows
In-Reply-To: <200708081556.31204.teo@windtelsoft.com>
References: <200708081556.31204.teo@windtelsoft.com>
Message-ID: <FFB7D520-9812-4F6F-BC45-DE081FCD10B7@syenar.hu>

Hi Teo,

This what I use:
--------------------------------------------------------------
@echo off

set path=C:\MinGW\bin\;C:\msys\1.0\bin\;%path%
set HB_ARCHITECTURE=w32
set HB_COMPILER=mingw32

make %1 %2 %3 -r SHELL=%COMSPEC% 2> make_gnu_mingw32_err.log >  
make_gnu_mingw32_std.log
--------------------------------------------------------------

Brgds,
Viktor

On 2007.08.08., at 22:56, Teo Fonrouge wrote:

> Hello,
>
> I have installed MinGW32 (5.1.3) and MSYS.
>
> My guess is that I need to execute the make_gnu.bat file, so I have  
> already
> set the HB_ARCHITECTURE=w32 and HB_COMPILER=mingw32 vars. But I am  
> unable to
> build Harbour.
>
> How can I build Harbour with MinGW32 ?
>
> Thanks in advance for the help.
>
>
> best regards
>
> Teo Fonrouge
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From teo at windtelsoft.com  Wed Aug  8 18:00:29 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Wed Aug  8 18:00:40 2007
Subject: [Harbour] Harbour & MinGW on Windows
In-Reply-To: <FFB7D520-9812-4F6F-BC45-DE081FCD10B7@syenar.hu>
References: <200708081556.31204.teo@windtelsoft.com>
	<FFB7D520-9812-4F6F-BC45-DE081FCD10B7@syenar.hu>
Message-ID: <200708081700.29752.teo@windtelsoft.com>

On Wednesday 08 August 2007 04:18:00 pm Szak?ts Viktor wrote:
> @echo off
>
> set path=C:\MinGW\bin\;C:\msys\1.0\bin\;%path%
> set HB_ARCHITECTURE=w32
> set HB_COMPILER=mingw32
>
> make %1 %2 %3 -r SHELL=%COMSPEC% 2> make_gnu_mingw32_err.log > ?
> make_gnu_mingw32_std.log


Many thanks Viktor

It's working OK now.


best regards

Teo
From teo at windtelsoft.com  Wed Aug  8 18:30:16 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Wed Aug  8 18:30:24 2007
Subject: [Harbour] Missing file in Current SVN
Message-ID: <200708081730.16125.teo@windtelsoft.com>

Hello,

Up at Changelog 7644, there is a missing file in the svn tree 
named "contrib/libnf/ftshadow.c"

This file is referenced in the "contrib/libnf/Makefile"

best regards

Teo Fonrouge

From teo at windtelsoft.com  Wed Aug  8 18:42:13 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Wed Aug  8 18:42:19 2007
Subject: [Harbour] Harbour & MinGW on Windows
In-Reply-To: <FFB7D520-9812-4F6F-BC45-DE081FCD10B7@syenar.hu>
References: <200708081556.31204.teo@windtelsoft.com>
	<FFB7D520-9812-4F6F-BC45-DE081FCD10B7@syenar.hu>
Message-ID: <200708081742.13470.teo@windtelsoft.com>

On Wednesday 08 August 2007 04:18:00 pm Szak?ts Viktor wrote:
> Hi Teo,
>
> This what I use:
> --------------------------------------------------------------
> @echo off
>
> set path=C:\MinGW\bin\;C:\msys\1.0\bin\;%path%
> set HB_ARCHITECTURE=w32
> set HB_COMPILER=mingw32
>
> make %1 %2 %3 -r SHELL=%COMSPEC% 2> make_gnu_mingw32_err.log >
> make_gnu_mingw32_std.log
> --------------------------------------------------------------
>

Hello,

I have a few questions in this same matter, once that Harbour is builded ok:

1. I have to manually "collect" the produced files (harbour.exe, libs, etc) 
and put those in their correct directories ?

1.1 If above is true, how do I know which files to collect ?

2. How can I build the hb* tools (hbmk, hbrun, hbcc, hblnk) ?

3. How can I pass flags to build Harbour (eg: --with xhb --with tip ) ?


Thanks in advance for the help

best regards,

Teo
From lkrausem at shaw.ca  Wed Aug  8 20:11:56 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Wed Aug  8 20:12:54 2007
Subject: [Harbour] obj:Set( "PropertyName",
	... ) syntax for TOleAuto doesn't work
Message-ID: <46BA5BCC.8080604@shaw.ca>

Hi:

I have a small app that creates Excel files with TOleAuto with
Clipper/FW/TOLEAuto from Jos? Gim?nez as
well as with [x]Harbour/FWH.

Since Clipper won't handle property names longer than 10
character I use the ::Set() method and pass the property name
in quotes to set it's value ( or ::Get() to grab it).

Under xHarbour it works fine but I get an E_FAIL error with Harbour
on the same line. 

I can't seem to find the difference in harbour\contrib\ole2\win32ole.prg
vs. the xHarbour one, so I'm not sure what's causing the different
behaviour.

Here's a small sample demonstrating the problem (using current SVN):

//----
function main()
local oExcel

oExcel := TOleAuto():New( "Excel.Application" )
oExcel:DisplayAlerts := .f.
oExcel:Set( "DisplayAlerts", .t. )  // syntax works OK with Clipper/FW16 
bits and xHarbour but not Harbour.

? "test successful"

return nil
//----

And this is the error reported in Harbour:

Error Excel.Application/16389  E_FAIL: DISPLAYALERTS
Called from TOLEAUTO:DISPLAYALERTS(0)
Called from HB_EXECFROMARRAY(0)
Called from TOLEAUTO:SET(344)
Called from MAIN(7)

Regards,

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


From harbour.01 at syenar.hu  Wed Aug  8 21:56:38 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Aug  8 21:56:50 2007
Subject: [Harbour] Harbour & MinGW on Windows
In-Reply-To: <200708081742.13470.teo@windtelsoft.com>
References: <200708081556.31204.teo@windtelsoft.com>
	<FFB7D520-9812-4F6F-BC45-DE081FCD10B7@syenar.hu>
	<200708081742.13470.teo@windtelsoft.com>
Message-ID: <9B6F0E01-810F-4A6A-934C-15BBF8BC04B6@syenar.hu>

Okey here is my complete batch file which should give you
some more answers :)

----------------------------------------------
@echo off

set path=C:\MinGW-412\bin\;C:\msys\1.0\bin\;%path%
set BISON_PKGDATADIR=C:\devl\cygwin-new\usr\share\bison\

set HB_INSTALL_PREFIX=C:\devl\hb_gcc\
set HB_BIN_INSTALL=%HB_INSTALL_PREFIX%\bin\
set HB_LIB_INSTALL=%HB_INSTALL_PREFIX%\lib\
set HB_INC_INSTALL=%HB_INSTALL_PREFIX%\include\
set HB_ARCHITECTURE=w32
set HB_COMPILER=mingw32
set PRG_USR=-l
set C_USR=-march=pentiumpro -O3 -fomit-frame-pointer -ffast-math
set L_USR=-s

make %1 %2 %3 -r SHELL=%COMSPEC% 2> make_gnu_mingw32_err.log >  
make_gnu_mingw32_std.log
----------------------------------------------

You need to call this batch file with the INSTALL parameter
to copy all results to the final dirs.

hbmk and the rest is for Linux only and they are getting
created by make_tgz.sh I believe.

Brgds,
Viktor


On 2007.08.09., at 0:42, Teo Fonrouge wrote:

> On Wednesday 08 August 2007 04:18:00 pm Szak?ts Viktor wrote:
>> Hi Teo,
>>
>> This what I use:
>> --------------------------------------------------------------
>> @echo off
>>
>> set path=C:\MinGW\bin\;C:\msys\1.0\bin\;%path%
>> set HB_ARCHITECTURE=w32
>> set HB_COMPILER=mingw32
>>
>> make %1 %2 %3 -r SHELL=%COMSPEC% 2> make_gnu_mingw32_err.log >
>> make_gnu_mingw32_std.log
>> --------------------------------------------------------------
>>
>
> Hello,
>
> I have a few questions in this same matter, once that Harbour is  
> builded ok:
>
> 1. I have to manually "collect" the produced files (harbour.exe,  
> libs, etc)
> and put those in their correct directories ?
>
> 1.1 If above is true, how do I know which files to collect ?
>
> 2. How can I build the hb* tools (hbmk, hbrun, hbcc, hblnk) ?
>
> 3. How can I pass flags to build Harbour (eg: --with xhb --with  
> tip ) ?
>
>
> Thanks in advance for the help
>
> best regards,
>
> Teo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lostmyhearttoher at gmail.com  Wed Aug  8 22:05:47 2007
From: lostmyhearttoher at gmail.com (Lost)
Date: Wed Aug  8 22:05:53 2007
Subject: [Harbour] Harbour & MinGW on Windows
In-Reply-To: <9B6F0E01-810F-4A6A-934C-15BBF8BC04B6@syenar.hu>
References: <200708081556.31204.teo@windtelsoft.com>	<FFB7D520-9812-4F6F-BC45-DE081FCD10B7@syenar.hu>	<200708081742.13470.teo@windtelsoft.com>
	<9B6F0E01-810F-4A6A-934C-15BBF8BC04B6@syenar.hu>
Message-ID: <46BA767B.6040101@gmail.com>

Szak?ts Viktor escribi? el 08/08/07 a las 22:56:
> 
> hbmk and the rest is for Linux only and they are getting
> created by make_tgz.sh I believe.

Not really. Personally, when on W32, I build harbour just by issuing a
'cd harbour && ./make_gnu.sh install' from the msys console.
*Everything* gets built, including those useful scripts. Where they get
installed it depends on your msys configuration (mine mimics a standard
GNU/Linux folder tree)

> 
> Brgds,
> Viktor
> 

HTH,
Lost
From harbour.01 at syenar.hu  Wed Aug  8 22:09:43 2007
From: harbour.01 at syenar.hu (=?ISO-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Wed Aug  8 22:09:49 2007
Subject: [Harbour] Harbour & MinGW on Windows
In-Reply-To: <46BA767B.6040101@gmail.com>
References: <200708081556.31204.teo@windtelsoft.com>	<FFB7D520-9812-4F6F-BC45-DE081FCD10B7@syenar.hu>	<200708081742.13470.teo@windtelsoft.com>
	<9B6F0E01-810F-4A6A-934C-15BBF8BC04B6@syenar.hu>
	<46BA767B.6040101@gmail.com>
Message-ID: <F9F52288-3479-470F-80CC-F6A255549D94@syenar.hu>

>> hbmk and the rest is for Linux only and they are getting
>> created by make_tgz.sh I believe.
>
> Not really. Personally, when on W32, I build harbour just by issuing a
> 'cd harbour && ./make_gnu.sh install' from the msys console.
> *Everything* gets built, including those useful scripts. Where they  
> get
> installed it depends on your msys configuration (mine mimics a  
> standard
> GNU/Linux folder tree)

Thanks for this information, I'll try it tomorrow.

Brgds,
Viktor
From teo at windtelsoft.com  Wed Aug  8 22:33:17 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Wed Aug  8 22:33:27 2007
Subject: [Harbour] Harbour & MinGW on Windows
In-Reply-To: <9B6F0E01-810F-4A6A-934C-15BBF8BC04B6@syenar.hu>
References: <200708081556.31204.teo@windtelsoft.com>
	<200708081742.13470.teo@windtelsoft.com>
	<9B6F0E01-810F-4A6A-934C-15BBF8BC04B6@syenar.hu>
Message-ID: <200708082133.18849.teo@windtelsoft.com>

On Wednesday 08 August 2007 08:56:38 pm Szak?ts Viktor wrote:
> Okey here is my complete batch file which should give you
> some more answers :)
>
> ----------------------------------------------
> @echo off
>
> set path=C:\MinGW-412\bin\;C:\msys\1.0\bin\;%path%
> set BISON_PKGDATADIR=C:\devl\cygwin-new\usr\share\bison\
>
> set HB_INSTALL_PREFIX=C:\devl\hb_gcc\
> set HB_BIN_INSTALL=%HB_INSTALL_PREFIX%\bin\
> set HB_LIB_INSTALL=%HB_INSTALL_PREFIX%\lib\
> set HB_INC_INSTALL=%HB_INSTALL_PREFIX%\include\
> set HB_ARCHITECTURE=w32
> set HB_COMPILER=mingw32
> set PRG_USR=-l
> set C_USR=-march=pentiumpro -O3 -fomit-frame-pointer -ffast-math
> set L_USR=-s
>
> make %1 %2 %3 -r SHELL=%COMSPEC% 2> make_gnu_mingw32_err.log >
> make_gnu_mingw32_std.log
> ----------------------------------------------
>
> You need to call this batch file with the INSTALL parameter
> to copy all results to the final dirs.
>
> hbmk and the rest is for Linux only and they are getting
> created by make_tgz.sh I believe.

Ok, now this seems much more clear. I was on the way to solve this myself in 
the next 2 hours ( or may be not :)  ) .

Would be nice to have some documentation based on this, under a place 
like /doc/install.mingw32 


Thank you Viktor.

best regards

Teo
From teo at windtelsoft.com  Wed Aug  8 22:35:33 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Wed Aug  8 22:35:38 2007
Subject: [Harbour] Harbour & MinGW on Windows
In-Reply-To: <46BA767B.6040101@gmail.com>
References: <200708081556.31204.teo@windtelsoft.com>
	<9B6F0E01-810F-4A6A-934C-15BBF8BC04B6@syenar.hu>
	<46BA767B.6040101@gmail.com>
Message-ID: <200708082135.33617.teo@windtelsoft.com>

On Wednesday 08 August 2007 09:05:47 pm Lost wrote:
> Szak?ts Viktor escribi? el 08/08/07 a las 22:56:
> > hbmk and the rest is for Linux only and they are getting
> > created by make_tgz.sh I believe.
>
> Not really. Personally, when on W32, I build harbour just by issuing a
> 'cd harbour && ./make_gnu.sh install' from the msys console.
> *Everything* gets built, including those useful scripts. Where they get
> installed it depends on your msys configuration (mine mimics a standard
> GNU/Linux folder tree)

Hello Lost,

Based on what I see so far, seems that is viable & easy to have these very 
useful tools (hb* ) under MinGW32/windows


Thank You.


best regards

Teo
From druzus at priv.onet.pl  Thu Aug  9 02:45:06 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug  9 02:45:12 2007
Subject: [Harbour] Harbour & MinGW on Windows
In-Reply-To: <9B6F0E01-810F-4A6A-934C-15BBF8BC04B6@syenar.hu>
References: <200708081556.31204.teo@windtelsoft.com>
	<FFB7D520-9812-4F6F-BC45-DE081FCD10B7@syenar.hu>
	<200708081742.13470.teo@windtelsoft.com>
	<9B6F0E01-810F-4A6A-934C-15BBF8BC04B6@syenar.hu>
Message-ID: <20070809064506.GA25507@localhost.localdomain>

On Thu, 09 Aug 2007, Szak?ts Viktor wrote:
> hbmk and the rest is for Linux only and they are getting
> created by make_tgz.sh I believe.

hb* scripts are create in:
    make install
phase on all platforms which have bash like shell. It means that
if you try to build Harbour using MSYS in Windows or BASH from
DJGPP in DOS then they will be also created.
In Windows harbour-*.dll is also automatically create just like
harbour-*.so in Linux so -shared and -[full]static options works
in hb* scrptis.
You can also use make_tgz.sh and make_gnu.sh in MinGW+MSys and
DJGPP+Bash. I'm using make_tgz.sh to create packages for new
release.

best regards,
Przemek
From druzus at priv.onet.pl  Thu Aug  9 02:48:20 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug  9 02:48:26 2007
Subject: [Harbour] ChangeLog 2007-08-09 02:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070809064820.GB25507@localhost.localdomain>

2007-08-09 02:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbgtinfo.ch
    + added GTI_KBD_INSERT

  * harbour/common.mak
  * harbour/include/hbgtcore.h
  * harbour/source/rtl/Makefile
  + harbour/source/rtl/gtkbstat.c
    + added common for W32 GT drivers: hb_gt_w32_getKbdState() and
      hb_gt_w32_setKbdState()

  * harbour/source/rtl/gtgui/gtgui.c
  * harbour/source/rtl/gtwvt/gtwvt.c
  * harbour/source/rtl/gtwin/gtwin.c
    * use hb_gt_w32_getKbdState() and hb_gt_w32_setKbdState() for
      GTI_KBDSHIFTS

  * harbour/source/rtl/gtdos/gtdos.c
    + added support for GTI_KBDSHIFTS

  * harbour/contrib/libct/keyset.c
    * use GTI_KBDSHIFTS to get/set keyboard flags

  * harbour/contrib/libnf/prtscr.c
  * harbour/contrib/libnf/numlock.c
  * harbour/contrib/libnf/shift.c
  * harbour/contrib/libnf/alt.c
  * harbour/contrib/libnf/ctrl.c
  * harbour/contrib/libnf/caplock.c
    * use GTI_KBDSHIFTS to get/set keyboard flags

  + harbour/contrib/libnf/ftshadow.c
  * harbour/contrib/libnf/makefile.bc
  * harbour/contrib/libnf/makefile.vc
    + added missing file I forgot to add in previous commit

2007-08-09 02:25 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtgui/gtgui.c
    ! fixed typo in copy and past in previous commit

2007-08-09 03:35 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/libnf/numlock.c
  * harbour/contrib/libnf/caplock.c
  * harbour/contrib/libct/keyset.c
    ! fixed typo

2007-08-09 08:48 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gtxwc/gtxwc.c
    + added support for GTI_KBDSHIFTS

best regards,
Przemek
From labitas at gmail.com  Thu Aug  9 02:58:26 2007
From: labitas at gmail.com (Saulius Zrelskis)
Date: Thu Aug  9 02:58:31 2007
Subject: [Harbour] Fonts adn foolish question.
In-Reply-To: <000301c7d9ef$77d66960$67833c20$@com>
References: <005e01c7d9bd$c49676f0$4dc364d0$@com>
	<2386af1b0708081011q23058619pa0d98f8174f327d1@mail.gmail.com>
	<000301c7d9ef$77d66960$67833c20$@com>
Message-ID: <2386af1b0708082358m57499403rd9b1872dfb461835@mail.gmail.com>

>Thank you very much. Is there any reason for that?

I find in xHarbour changelog:

2005-11-19 13:55 UTC-0400 Marcelo Anelli <
marceloanelli@users.sourceforge.net>
  * source\rtl\gtwin\gtwin.c
    + Added function kbdShiftsState for using with GTINFO(GTI_KBDSHIFTS) but
      with ALT detection disabled for now.

Only Marcelo knows...

Regards,
Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070809/6ebddb8b/attachment.html
From mbelgrano at deltain.it  Thu Aug  9 04:30:48 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Aug  9 04:31:01 2007
Subject: R: [Harbour] Triggers over all RDD ?
In-Reply-To: <46B96BE4.5020704@marchuet.net>
References: <46B96BE4.5020704@marchuet.net>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A843@SRV02.deltain.net>

Yes i am very interested!


-----Messaggio originale-----
Da: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] Per conto di Miguel Angel Marchuet
Inviato: mercoled? 8 agosto 2007 9.08
A: xharbour developer list; Harbour Project Main Developer List.
Oggetto: [Harbour] Triggers over all RDD ?

I can implement triggers over RDD. Any one is interested on it?

Best regards,
Miguel Angel Marchuet

  Sx_SetTrigger():

  Syntax:   Sx_SetTrigger( <nAction> [,<cTriggerName>] )

         nAction = A numeric value indicating the action to be taken with
                   the currently active or specified trigger function.
                   These values are defined as manifest constants in the
                   SIXCDX.CH file, and are as follows:

                     TRIGGER_ENABLE   = Activate an installed trigger
                     TRIGGER_DISABLE  = Deactivate an installed trigger
                     TRIGGER_REMOVE   = Uninstall an installed trigger
                     TRIGGER_INSTALL  = Install a new trigger function.
                                        A newly installed trigger automatic-
                                        ally uninstalls any previously
                                        installed trigger.  The new trigger
                                        also becomes ENABLEd automatically.

                   NOTE:  Although these constants preprocess into numeric
                          values, you should not use the numeric values in
                          your source code.  Instead, you should use the
                          constants, as defined above.  This will insure
                          compatibility with all future releases of the
                          SIx Driver.

    cTriggerName = Optional name of a trigger function to install.  This
                   parameter is only required if the first parameter is
                   TRIGGER_INSTALL.

  Returns:  The currently active trigger name.

  Description:  This function allows the developer to activate (or install)
                a function to handle each triggerable event.  This is
                done by using the TRIGGER_INSTALL constant as the first
                parameter, and passing the new function name as the second
                parameter.  The specified function would then handle all
                subsequent triggerable events for that workarea, until it is
                disabled or uninstalled.

                An installed trigger function can be temporarily disabled,
                by using the TRIGGER_DISABLE constant.  This would result
                in all triggerable events being controlled by the default
                actions in Sx_DefTrigger().

                A disabled trigger function can be reactivated by using the
                TRIGGER_ENABLE constant.

                To totally remove a previously installed trigger function,
                use the TRIGGER_REMOVE constant.

  Example:


    /*
       The following example uses a custom trigger function that handles
       special operations for two different events:

        1.  Looks for and, if found, reads in a <cDBFname>.INI file for
            each database file that is opened.  (See the ".INI Files"
            section for more details on their use.)

        2.  Prompts the user for a password upon opening a data file.  If
            the password is not kosher, it transfers trigger control to a
            different user-defined trigger function "LimitTrig()".  (The
            source for LimitTrig() is not shown.)

        3.  Displays an "Are you sure?" message whenever a ZAP command is
            issued.
    */

    #include "INKEY.CH"
    #include "SIXCDX.CH"

    Sx_SetPass( "Pengo" )
    USE test VIA "SIXCDX" TRIGGER "CustomTrig"
    browse()

    //----------------------------------------------------------//
    FUNC CustomTrig( nEvent, nArea, nFieldPos, xTrigVal )

       LOCAL nKey := 0, cPassWord := Space(10)
       LOCAL GetList := {}

       DO CASE

          CASE nEvent == EVENT_PREUSE

             _sx_INIinit( nArea )         // Read in .INI file information

             @ MaxRow(),0 SAY "PASSWORD:" GET cPassWord
             READ

             IF LastKey() == K_ESC .or. cPassWord != "FooBar"
                Sx_SetTrigger( TRIGGER_INSTALL, "LimitTrig" )
             ENDIF

          CASE nEvent == EVENT_ZAP

             nKey := Alert( "ZAP : Are you sure?", {"Yes","No"} )
             if nKey == 1
                Return( .T. )  // Okay to ZAP
             else
                Return( .F. )  // Don't ZAP
             endif

       ENDCASE

    Return( .T. )




  Sx_DefTrigger():

  Syntax:   Sx_DefTrigger( <nEvent>, <nArea>, <nFieldPos>, <xTrigVal> )

        nEvent = A numeric value indicating the type of event that is
                 activating the trigger.  These values are defined as
                 manifest constants in the SIXCDX.CH file, and are as
                 follows:

                 EVENT_PREUSE       = A DBF file is about to be opened
               * EVENT_POSTUSE      = A DBF file has just been opened
               * EVENT_UPDATE       = An index is being updated
                 EVENT_APPEND       = A new record is being appended
                 EVENT_DELETE       = A record is being deleted
                 EVENT_RECALL       = A deleted record is being recalled
                 EVENT_PACK         = The DBF file is being packed
                 EVENT_ZAP          = The DBF file is being zapped
                 EVENT_PUT          = A value is being stored in the DBF
                 EVENT_GET          = A value is being retrieved from the DBF
                 EVENT_PRECLOSE     = The DBF file is about to be closed
               * EVENT_POSTCLOSE    = The DBF file has just been closed
                 EVENT_PREMEMOPACK  = A MEMOPACK is just about to occur
                 EVENT_POSTMEMOPACK = A MEMOPACK has just been completed

                 NOTE:  Although these constants preprocess into numeric
                        values, you should not use the numeric values in
                        your source code.  Instead, you should use the
                        constants, as defined above.  This will insure
                        compatibility with all future releases of the
                        SIx Driver.

               (*) - The events marked with an asterisk (*) will continue
                     even if the return value for that event is set to false
                     (.F.).  This is to insure data integrity.

         nArea = The currently active workarea number.

     nFieldPos = The field position for the PUT or GET, if applicable.

      xTrigVal = This parameter contains the value, if any, associated with
                 the event being processed.  If no value of significance is
                 associated with the event, a zero (0) is passed down.

  Returns:   Logical.  TRUE (.T.) if the current event should be allowed to
             successfully complete, FALSE (.F.) if not.

  Description:  By default, this function is automatically called whenever
                any of the events listed above occurs.  It contains the
                default triggers (none) to be attached to each event.

                The parameters are passed to it automatically by the SIx
                Driver.  This is similar to the way parameters are
                automatically passed to a UDF used in Clipper's MemoEdit()
                or AChoice() functions.

                To cause the SIx Driver to use a different set of triggers,
                you would USE the file with the TRIGGER keyword, specifying
                the name of the desired trigger function in quotes.  For
                example, to use a modified Sx_DefTrigger() function called
                DemoTrigger(), you would do this:

                    USE test VIA "SIXCDX" TRIGGER "DemoTrigger"

                This would cause all triggerable events for this workarea to
                be handled through DemoTrigger(), rather than the SIx
                Driver's default Sx_DefTrigger() function.

                The Clipper source code for Sx_DefTrigger() is contained in
                SIXTRIG.PRG, and can be modified as desired.  Just insure
                that the new SIXTRIG.OBJ module is linked into your
                application ahead of the SIXCDX.LIB file.  The complete
                source for Sx_DefTrigger() is also listed below in the
                Example section.

                In its present condition, Sx_DefTrigger() maintains the
                exact same behavior as in previous SIx Driver releases.
                The call to Sx_SetTrigger( TRIGGER_REMOVE ) under the
                EVENT_PREUSE case effectively removes the trigger controls
                just prior to a database being opened.  To allow support
                for event trigger handling, just comment out this call to
                Sx_SetTrigger().

                Also, if you want the SIx Driver to automatically look for
                an associated .INI file when a .DBF is USEd, you need to
                uncomment the _sx_INIinit( nArea ) call.  See the section
                on ".INI Files" for more details on these.  The _sx_INIinit()
                function can ONLY be used in this manner.  If it is called
                anywhere else in your application, unpredictable results can
                occur.


    NOTE:  See the TRIGDEMO.PRG file for an example of using event triggers.


  Example:

    #include "SIXCDX.CH"

    FUNC Sx_DefTrigger( nEvent, nArea, nFieldPos, xTrigVal )

      DO CASE

        CASE nEvent == EVENT_PREUSE
    //    _sx_INIinit( nArea )
          Sx_SetTrigger( TRIGGER_REMOVE )

        CASE nEvent == EVENT_POSTUSE

        CASE nEvent == EVENT_UPDATE

        CASE nEvent == EVENT_APPEND

        CASE nEvent == EVENT_DELETE

        CASE nEvent == EVENT_RECALL

        CASE nEvent == EVENT_PACK

        CASE nEvent == EVENT_ZAP

        CASE nEvent == EVENT_PUT

        CASE nEvent == EVENT_GET

        CASE nEvent == EVENT_PRECLOSE

        CASE nEvent == EVENT_POSTCLOSE

        CASE nEvent == EVENT_PREMEMOPACK

        CASE nEvent == EVENT_POSTMEMOPACK

      ENDCASE

    Return( .T. )
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
From dmacias at mail.udg.mx  Thu Aug  9 04:42:27 2007
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Aug  9 04:42:27 2007
Subject: [Harbour] Re: is there any documentation about available Gt's
In-Reply-To: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
Message-ID: <46BAD373.4080906@mail.udg.mx>

Przemek:

Excelent info

Can you add to Harbour doc somewhere ?
Maybe in doc\gtapi.txt ?

David Macias



On Wed, 08 Aug 2007, Mike Evans (Gmail) wrote:
 > I can see under the rtl folder many different Gts but for most of them I
 > don't know what they do and where (Platform, gui, terminal etc). Also 
Which
 > functions-methods are available for each of them?

gtnul  - base GT driver from which each other inherits.
          it gives screen buffer functionality but does not
          produce any screen output from disp*() commands
          Only outStd()/outErr() are supported.
          It's present on all platforms and i always linked.

gtcgi  - very simple GT driver which does not make any output
          formatting and simply send it as to stdout.
          Supported by all platforms.

gtstd  - it uses stdout output but tries to support full screen output but
          without collor support and cursor shape. It format text to number
          of row and columns if is able to detect these values on given
          platform.
          Supported by all platforms.

gtpca  - It's PCANSI terminal GT - it works in similar way to ANSI GT
          driver in Clipper though keyboard input is not fully supported.
          Now GTTRM can make all GTPCA job and much more.
          Supported by all platforms.

gtdos  - GT driver for DOS - it uses BIOS and direct hardware screen output
          so it's very similar to Clipper one - in practice due to the same
          environment you will noticed that all small details of Clipper
          GT drivers are replicated here. You can think about it like 100%
          Clipper compatible.
          Supported only by DOS builds.

gtos2  - GT driver for OS2 - It's sth like GTWIN but for other OS.
          Supported only by OS2 builds.

gtwin  - GT driver for MS-Windows console window.
          Supported only by MS-WINDOWS (W95 or higher) builds.

gtcrs  - GT driver for platforms which supports curses or compatible
          (ncurses) library - in practice POSIX systems.
          Supported by POSIX systems (mostly different *nixes)

gtsln  - GT driver for platforms which supports slang library.
          It's like GTCRS but instead of CURSES it uses SLANG.
          Supported by POSIX systems (mostly different *nixes).
          It supports Unicode input/output if compiled with slang
          version which also supports it.

gttrm  - it's like GTCRS and GTSLN but it does not use any external
          terminal library like SLANG or CURSES and it does not use
          any external database to extract terminal capabilities so
          it can be compiled on any POSIX system - I'll add support
          also for DOS/Windows in the future. It should automatically
          detect UTF-8 terminal mode and switch internally to Unicode
          mode if necessary. In theory is less functional then GTCRS
          and GTSLN because I hard coded escape sequences only for few
          terminals but because I added support also for some non
          standard terminal extensions and I'm using very limited set
          of output sequences then it usually works better then GTCRS
          and GTSLN.
          Supported by POSIX systems (mostly different *nixes)

gtwvt  - GT driver for MS-Windows. It creates its own GUI window
          instead of using MS-console window. It allows to change
          font, window size, etc.
          Supported only by MS-WINDOWS (W95 or higher) builds.

gtxwc  - GT driver for X-Window. It's like GTWVT but for nixes.
          Additionaly it has set of predefined vector characters
          (box and arrowd drawing characters) which can be used
          instead of the one defined in font. It means that you
          will have all boxes and arrows you know from DOS ans CP437
          even if you chose font which does not have them. Additionally
          it support some simple graphic output. See tests/gfx.prg
          for simple program which demonstrates it.
          Supported by POSIX systems (mostly different *nixes)

gtalleg- GT driver which uses alegro library for input/output.
          It's also GUI driver which support HB_GFX*() drawing.
          Multi platform, works on all platforms for which allegro
          library has been ported: MS-Win, DOS, VESA, X11, FB, SDL, ...

gtgui  - pseudo GT driver which adds to GTNUL Clipboard and Tone
          functionality. If you are using some MS-Windows GUI library
          and you still want to use TONE() function or GTI_CLIPBOARD
          actions then link this GT driver with your application.
          If you do not want to use TONE() or GTI_CLIPBOARD then
          do not link it - it will be only waste of memory.

gtctw  - GT driver which adds CT3 Window functionality to any other
          GT driver from which it inherits. It's activated automatically
          when you execute first W*() function.
          In similar way in Harbour it's possible to add support for
          GTWVW inheriting from GTWVT.

Some of the GT drivers support additional functionality with hb_gtInfo()
interface. See include/hbgtinfo.ch for different actions.

best regards,
Przemek




From mbelgrano at deltain.it  Thu Aug  9 05:07:34 2007
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Aug  9 05:07:42 2007
Subject: R: [Harbour] Re: is there any documentation about available Gt's
In-Reply-To: <46BAD373.4080906@mail.udg.mx>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<46BAD373.4080906@mail.udg.mx>
Message-ID: <AFB948164110ED43B5EB849E8DEEF03809A844@SRV02.deltain.net>

Where can i found info/sample about gtctw?


-----Messaggio originale-----

gtctw  - GT driver which adds CT3 Window functionality to any other
          GT driver from which it inherits. It's activated automatically
          when you execute first W*() function.
          In similar way in Harbour it's possible to add support for
          GTWVW inheriting from GTWVT.


From druzus at priv.onet.pl  Thu Aug  9 05:12:46 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug  9 05:12:53 2007
Subject: R: [Harbour] Re: is there any documentation about available Gt's
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03809A844@SRV02.deltain.net>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<46BAD373.4080906@mail.udg.mx>
	<AFB948164110ED43B5EB849E8DEEF03809A844@SRV02.deltain.net>
Message-ID: <20070809091246.GA5322@localhost.localdomain>

On Thu, 09 Aug 2007, Massimo Belgrano wrote:
> Where can i found info/sample about gtctw?

tests/ctwtest.prg

best regards,
Przemek
From labitas at gmail.com  Thu Aug  9 07:10:26 2007
From: labitas at gmail.com (Saulius Zrelskis)
Date: Thu Aug  9 07:10:29 2007
Subject: [Harbour] ChangeLog 2007-08-09 02:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070809064820.GB25507@localhost.localdomain>
References: <20070809064820.GB25507@localhost.localdomain>
Message-ID: <2386af1b0708090410v2144ed8o60654117bc245003@mail.gmail.com>

Thanks for the fixs and expands, Przemek
Some text-mans you make happy :)

One notice about INSERT key.

from \contrib\libct\misc3.c function KBDSTAT:
...
      if( hb_set.HB_SET_INSERT )
         iRet |= 0x80;
...

CT3 function KBDSTAT gets keys states from "hardware"
(INT 16 KEYBOARD) and peoples intended to know if say
key CapsLock lamp or not. The same with INSERT key.
(without lamp)
"Software" INSERT meaning user gets with SET() function.
IMO mixing hard/soft is improper there?

Regards,
Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070809/eb621285/attachment.html
From druzus at priv.onet.pl  Thu Aug  9 07:24:51 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug  9 07:24:56 2007
Subject: [Harbour] ChangeLog 2007-08-09 02:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <2386af1b0708090410v2144ed8o60654117bc245003@mail.gmail.com>
References: <20070809064820.GB25507@localhost.localdomain>
	<2386af1b0708090410v2144ed8o60654117bc245003@mail.gmail.com>
Message-ID: <20070809112451.GA18946@localhost.localdomain>

On Thu, 09 Aug 2007, Saulius Zrelskis wrote:
> Thanks for the fixs and expands, Przemek
> Some text-mans you make happy :)
> One notice about INSERT key.
> from \contrib\libct\misc3.c function KBDSTAT:
> ...
>       if( hb_set.HB_SET_INSERT )
>          iRet |= 0x80;
> ...

I'll change it to GTI_KBD_INSERT.

> CT3 function KBDSTAT gets keys states from "hardware"
> (INT 16 KEYBOARD) and peoples intended to know if say
> key CapsLock lamp or not. The same with INSERT key.
> (without lamp)

Please note that this flag is not supported by most platforms.

> "Software" INSERT meaning user gets with SET() function.
> IMO mixing hard/soft is improper there?

Even in DOS/BIOS it's also nothing more then software flag
(bit 0x80 at 0x0417) but updated automatically by keyboard
interrupt (0x09) so can be shared between programs.

best regards,
Przemek
From druzus at priv.onet.pl  Thu Aug  9 07:30:15 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug  9 07:30:22 2007
Subject: [Harbour] ChangeLog 2007-08-09 13:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070809113015.GB18946@localhost.localdomain>

2007-08-09 13:27 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/libct/misc3.c
    * changed hb_set.HB_SET_INSERT to GTI_KBD_INSERT - thanks to Saulius
      for information

best regards,
Przemek
From labitas at gmail.com  Thu Aug  9 07:59:22 2007
From: labitas at gmail.com (Saulius Zrelskis)
Date: Thu Aug  9 07:59:26 2007
Subject: [Harbour] ChangeLog 2007-08-09 02:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070809112451.GA18946@localhost.localdomain>
References: <20070809064820.GB25507@localhost.localdomain>
	<2386af1b0708090410v2144ed8o60654117bc245003@mail.gmail.com>
	<20070809112451.GA18946@localhost.localdomain>
Message-ID: <2386af1b0708090459o6ccd70f1r99c687087b103135@mail.gmail.com>

> I'll change it to GTI_KBD_INSERT.

Thank you

> Even in DOS/BIOS it's also nothing more then software flag
> (bit 0x80 at 0x0417) but updated automatically by keyboard
> interrupt (0x09) so can be shared between programs.

and this sharing very important when synchronizing INSERT (soft) status

Best regards,
Saulius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070809/1db72681/attachment.html
From druzus at priv.onet.pl  Thu Aug  9 08:18:53 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug  9 08:18:59 2007
Subject: [Harbour] OL note
Message-ID: <20070809121853.GA15995@localhost.localdomain>

Hi All,

I'll be offline until next week.
Phil sorry but I haven't time to sync BETA and DEVEL branches.
If no one else will make it then I'll do that in next week when
I'll be back.

best regards,
Przemek
From philb at philb.us  Thu Aug  9 08:34:36 2007
From: philb at philb.us (Phil Barnett)
Date: Thu Aug  9 08:41:02 2007
Subject: [Harbour] OL note
In-Reply-To: <20070809121853.GA15995@localhost.localdomain>
References: <20070809121853.GA15995@localhost.localdomain>
Message-ID: <200708090834.36962.philb@philb.us>

On Thursday 09 August 2007, Przemyslaw Czerpak wrote:
> Hi All,
>
> I'll be offline until next week.
> Phil sorry but I haven't time to sync BETA and DEVEL branches.
> If no one else will make it then I'll do that in next week when
> I'll be back.

Ok, no problem. Your work is exemplary of someone who cares enough to do it 
right. I'll take that over speed every time!

-- 
Phil Barnett
AI4OF
SKCC #600
From m.renzi at maticasrl.it  Thu Aug  9 10:42:12 2007
From: m.renzi at maticasrl.it (Massimo Renzi (MaticaSrl))
Date: Thu Aug  9 10:42:44 2007
Subject: [Harbour] Re: is there any documentation about available Gt's
In-Reply-To: <20070809091246.GA5322@localhost.localdomain>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx><46BAD373.4080906@mail.udg.mx><AFB948164110ED43B5EB849E8DEEF03809A844@SRV02.deltain.net>
	<20070809091246.GA5322@localhost.localdomain>
Message-ID: <000501c7da93$7931e830$2a00df0a@maxsoft>

Hi all,
where can I find "tests" folder? I've downloaded latest binary but does not
exist.
Thank you.
Max



On Thu, 09 Aug 2007, Massimo Belgrano wrote:
> Where can i found info/sample about gtctw?

tests/ctwtest.prg

best regards,
Przemek
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From m.renzi at maticasrl.it  Thu Aug  9 10:43:05 2007
From: m.renzi at maticasrl.it (Massimo Renzi (MaticaSrl))
Date: Thu Aug  9 10:43:25 2007
Subject: [Harbour] Re: is there any documentation about available Gt's
In-Reply-To: <20070809091246.GA5322@localhost.localdomain>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx><46BAD373.4080906@mail.udg.mx><AFB948164110ED43B5EB849E8DEEF03809A844@SRV02.deltain.net>
	<20070809091246.GA5322@localhost.localdomain>
Message-ID: <000601c7da93$989be630$2a00df0a@maxsoft>

... I've find it on source ;)
Thank you

Max

From randy at palmasdev.com  Thu Aug  9 14:46:05 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Thu Aug  9 14:45:28 2007
Subject: [Harbour] Interrogating code block contents
In-Reply-To: <000501c7da93$7931e830$2a00df0a@maxsoft>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<46BAD373.4080906@mail.udg.mx>
	<AFB948164110ED43B5EB849E8DEEF03809A844@SRV02.deltain.net>
	<20070809091246.GA5322@localhost.localdomain>
	<000501c7da93$7931e830$2a00df0a@maxsoft>
Message-ID: <20070809184524.DFDAA424A@smtp.tor.pathcom.com>

Hi all,

Is there a way (eg. using Harbour internals) to know if a variable is 
referenced in a code block _without_ evaluating the code block?

For example:

local xVar, bCodeBlock
bCodeBlock := { || SomeFunc( xVar ) }
...
if xVar IS_REFERENCED_IN bCodeBlock
     ...
endif

TIA.

Regards,
Randy.

From antonioharbour at gmail.com  Thu Aug  9 15:03:11 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Aug  9 15:03:36 2007
Subject: [Harbour] Interrogating code block contents
In-Reply-To: <20070809184524.DFDAA424A@smtp.tor.pathcom.com>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<46BAD373.4080906@mail.udg.mx>
	<AFB948164110ED43B5EB849E8DEEF03809A844@SRV02.deltain.net>
	<20070809091246.GA5322@localhost.localdomain>
	<000501c7da93$7931e830$2a00df0a@maxsoft>
	<20070809184524.DFDAA424A@smtp.tor.pathcom.com>
Message-ID: <1186686191.5680.5.camel@anto-desktop>

Randy,

> Is there a way (eg. using Harbour internals) to know if a variable is 
> referenced in a code block _without_ evaluating the code block?

I think it is not possible unless it is an array or an object.

Anyhow Przemek or Ryszard are the right ones to answer.

regards,

Antonio


From randy at palmasdev.com  Thu Aug  9 15:13:22 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Thu Aug  9 15:12:44 2007
Subject: [Harbour] Interrogating code block contents
In-Reply-To: <1186686191.5680.5.camel@anto-desktop>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<46BAD373.4080906@mail.udg.mx>
	<AFB948164110ED43B5EB849E8DEEF03809A844@SRV02.deltain.net>
	<20070809091246.GA5322@localhost.localdomain>
	<000501c7da93$7931e830$2a00df0a@maxsoft>
	<20070809184524.DFDAA424A@smtp.tor.pathcom.com>
	<1186686191.5680.5.camel@anto-desktop>
Message-ID: <20070809191241.BFB4E4860@smtp.tor.pathcom.com>

Antonio (Przemek and Ryszard),

I was poking around in CODEBLOC.C and noticed:

* pLocalPosTable -> a table with positions on eval stack for 
referenced variables
* pSymbols    -> a pointer to the module symbol table

I was hoping that the variables pointer would be stored in there - If 
so, a wrapper could be written to look for the variable's pointer in that list.

Any ideas?

At 03:03 PM 8/9/2007, you wrote:
>Randy,
>
> > Is there a way (eg. using Harbour internals) to know if a variable is
> > referenced in a code block _without_ evaluating the code block?
>
>I think it is not possible unless it is an array or an object.
>
>Anyhow Przemek or Ryszard are the right ones to answer.
>
>regards,
>
>Antonio
>
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour

From antonioharbour at gmail.com  Thu Aug  9 16:35:03 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Aug  9 16:35:21 2007
Subject: [Harbour] Interrogating code block contents
In-Reply-To: <20070809191241.BFB4E4860@smtp.tor.pathcom.com>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<46BAD373.4080906@mail.udg.mx>
	<AFB948164110ED43B5EB849E8DEEF03809A844@SRV02.deltain.net>
	<20070809091246.GA5322@localhost.localdomain>
	<000501c7da93$7931e830$2a00df0a@maxsoft>
	<20070809184524.DFDAA424A@smtp.tor.pathcom.com>
	<1186686191.5680.5.camel@anto-desktop>
	<20070809191241.BFB4E4860@smtp.tor.pathcom.com>
Message-ID: <1186691703.5680.5.camel@anto-desktop>

Randy,

> * pLocalPosTable -> a table with positions on eval stack for 
> referenced variables

I am just guessing here as I have never reviewed codeblocks internals in
deep, but if you look at this code inside codebloc.c:

  memcpy( pLocals + ui, pLocal, sizeof( HB_ITEM ) );

you see that the local var item content is being copied, not the pointer
to it. So we can not compare those locals comparing their pointers.

Anyhow, Przemek and Ryszard will have the right answer.

BTW, thinking about the project that you are developing using Ajax, I
was wondering why don't you just use Microsoft terminal server ?

regards,

Antonio

From randy at palmasdev.com  Thu Aug  9 16:48:30 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Thu Aug  9 16:47:50 2007
Subject: [Harbour] Interrogating code block contents
In-Reply-To: <1186691703.5680.5.camel@anto-desktop>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<46BAD373.4080906@mail.udg.mx>
	<AFB948164110ED43B5EB849E8DEEF03809A844@SRV02.deltain.net>
	<20070809091246.GA5322@localhost.localdomain>
	<000501c7da93$7931e830$2a00df0a@maxsoft>
	<20070809184524.DFDAA424A@smtp.tor.pathcom.com>
	<1186686191.5680.5.camel@anto-desktop>
	<20070809191241.BFB4E4860@smtp.tor.pathcom.com>
	<1186691703.5680.5.camel@anto-desktop>
Message-ID: <20070809204746.9F5F44108@smtp.tor.pathcom.com>

Hi Antonio,

>you see that the local var item content is being copied, not the pointer
>to it. So we can not compare those locals comparing their pointers.

Yes, but there must be a reference to the original pointer somewhere 
otherwise things like...

bVar := { || nSomeVar := 5 }

...would never work.

>BTW, thinking about the project that you are developing using Ajax, I
>was wondering why don't you just use Microsoft terminal server ?

Marketing. :-(

BTW, for those of you that need a TS/Citrix like solution but want to 
supply it along with your application, take a look at 
<http://www.graphon.com/>www.GraphOn.com.

Regards,
Randy. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070809/8b845c83/attachment.html
From antonioharbour at gmail.com  Thu Aug  9 17:38:10 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Thu Aug  9 17:38:27 2007
Subject: [Harbour] Interrogating code block contents
In-Reply-To: <20070809204746.9F5F44108@smtp.tor.pathcom.com>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx>
	<46BAD373.4080906@mail.udg.mx>
	<AFB948164110ED43B5EB849E8DEEF03809A844@SRV02.deltain.net>
	<20070809091246.GA5322@localhost.localdomain>
	<000501c7da93$7931e830$2a00df0a@maxsoft>
	<20070809184524.DFDAA424A@smtp.tor.pathcom.com>
	<1186686191.5680.5.camel@anto-desktop>
	<20070809191241.BFB4E4860@smtp.tor.pathcom.com>
	<1186691703.5680.5.camel@anto-desktop>
	<20070809204746.9F5F44108@smtp.tor.pathcom.com>
Message-ID: <1186695490.5680.12.camel@anto-desktop>

Randy,

> Yes, but there must be a reference to the original pointer somewhere
> otherwise things like...
> 
> bVar := { || nSomeVar := 5 }
> 
> ...would never work.

But that's specified into the pcode itself. Maybe the way to implement
the function you are looking for is to step through the codeblock pcode
looking for those locals references. Anyhow lets wait for
Przemek/Ryszard answers :-)

regards,

Antonio

From m.renzi at maticasrl.it  Fri Aug 10 02:25:27 2007
From: m.renzi at maticasrl.it (Massimo Renzi (MaticaSrl))
Date: Fri Aug 10 02:25:48 2007
Subject: [Harbour] xHarbour.org VS .com (easy Windows Form GUI)
In-Reply-To: <1186695490.5680.12.camel@anto-desktop>
References: <20070330102120.D46851E3795@antivirus2.noc.udg.mx><46BAD373.4080906@mail.udg.mx><AFB948164110ED43B5EB849E8DEEF03809A844@SRV02.deltain.net><20070809091246.GA5322@localhost.localdomain><000501c7da93$7931e830$2a00df0a@maxsoft><20070809184524.DFDAA424A@smtp.tor.pathcom.com><1186686191.5680.5.camel@anto-desktop><20070809191241.BFB4E4860@smtp.tor.pathcom.com><1186691703.5680.5.camel@anto-desktop><20070809204746.9F5F44108@smtp.tor.pathcom.com>
	<1186695490.5680.12.camel@anto-desktop>
Message-ID: <001001c7db17$3e0febb0$2a00df0a@maxsoft>

Hi all,
I've tested the IDE of xHarbour.com to develop a simple program that say
"hello".
I've seen that "Hello" appear in a Windows Form, but I've only write:

PROCEDURE MAIN
@10,10 SAY "HELLO"
INKEY(0)
RETURN .T.

So, how to use Windows GUI with xHarbour.org  also ?
Need I to include some library on the linker?
Thank you.

Max


From teo at windtelsoft.com  Fri Aug 10 12:15:05 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Fri Aug 10 12:15:13 2007
Subject: [Harbour] hblnk under MinGW
Message-ID: <200708101115.05769.teo@windtelsoft.com>

Hello,

I have a little project that originaly started under Linux and uses the 
wxWidgets library.

This project compiles, links and runs fine under Linux. The project is hosted 
in SourceForge at  http://sourceforge.net/projects/wxharbour

Well, I'm try to port this project under Windows, and MinGW was choosen 
because this makes easier to port and mantain the Makefiles.

Under MinGW I have successfully:

 + Compiled Harbour
 + Compiled the project libraries
 + Compiled the wxWidgets library
 + Compile/Link/Execute simple Harbour programs
 + Compile/Link/Execute the wxWidgets samples


The PROBLEM:

One makefile script uses the hblnk tool to do the final link and create the 
executable binary, by linking together the:
  + Harbour libraries
  + the project libraries
  + the wxWidgets libraries

the linking process has the form:

$ hblnk -o helloworld.exe helloworld.o wxlib.a `wx-widgets --libs`

where: 
 - helloworld.o is the object file produced by compiling a Harbour source file
 - wxlib.a is the project library, it contains the C++ wrappers for the 
wxWidgets libraries, to be accesible to the Harbour program.
 - `wx-widgets` : this returns all the necesary library paths and library 
files and flags needed to successfully link the wxWidgets.

However at the end, the linking process reports a lot of unresolved functions 
( mostly from the wxWidgets libs ) and the executable binary is not created.

This does not happen under Linux, only under MinGW (on windows).

QUESTION:

How can I 'manually' link all this libraries using g++ to produce the final 
Harbour binary ?

I've tried the following, but is not working, I guess that I'm  linking in the 
wrong order the libs:

<script.sh>

HBLIBS="-lvm -lrtl -lcommon -lcompiler -lmainstd -lgtwvt -lgt -lgtwin -lpp -lrdd -ldebug -lhsx -lhbsix -ldbfntx -ldbffpt -lnf"
g++ test.o -L/usr/local/lib/harbour $HBLIBS `wx-config --libs`

<\script.sh>

Thanks in advance for any help.


best regards

Teo Fonrouge
From niki at synel.co.il  Fri Aug 10 14:28:00 2007
From: niki at synel.co.il (Chen Kedem)
Date: Fri Aug 10 14:28:39 2007
Subject: [Harbour] Interrogating code block contents
Message-ID: <B75D4A6BE471094AB02513DB81890397088F99@exch.SYNEL-COMPANY.LTD>

Randy,
 
> Is there a way (eg. using Harbour internals) to know if a variable is
> referenced in a code block _without_ evaluating the code block?

What do you want it for? maybe there is another approach that can be used.
 
  Chen.
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070810/1ad5fa5a/attachment.html
From randy at palmasdev.com  Fri Aug 10 14:51:43 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Fri Aug 10 14:51:05 2007
Subject: [Harbour] Interrogating code block contents
In-Reply-To: <B75D4A6BE471094AB02513DB81890397088F99@exch.SYNEL-COMPANY. LTD>
References: <B75D4A6BE471094AB02513DB81890397088F99@exch.SYNEL-COMPANY.LTD>
Message-ID: <20070810185101.D9ACA49B6@smtp.tor.pathcom.com>

Hi Chen,

Ok, you asked for it, here's the explanation...

As you may have read recently, I am porting my Windows app to Ajax. 
As part of this framework, if a field needs postvalidation as the 
user is leaving the field, an event is fired from the Ajax client to 
the application running on the server. To avoid this hit, if there is 
no postvalidation,  there is no need for the event to fire.

HOWEVER, let's say that another field's prevalidation is affected by 
the value of the current field (eg. the field is disabled if the 
current field is empty) - In this case, even if the current field 
does NOT have postvalidation code, it must still fire an event since 
its value affects another field.

So, ideally, I would like to be able to know (at runtime) if a 
variable is referenced in a code block (ie. in the prevalidation 
block associated with another field). Here's an example:

@1,2 GET cVAR1
@2,2 GET cVAR2 WHEN .NOT. EMPTY( cVAR1 )

In this example, the Ajax client needs to fire an event as the user 
leaves field 1 since its value affects field 2.

So, without having to change the existing code base, I was hoping 
that I could poke around in the Harbour internals and find a way to 
know if a var's pointer is being referenced in a code block.

Regards,
Randy.

At 02:28 PM 8/10/2007, you wrote:
>Content-class: urn:content-classes:message
>Content-Type: multipart/alternative;
>         boundary="----_=_NextPart_001_01C7DB7C.2E3F013B"
>
>Randy,
>
> > Is there a way (eg. using Harbour internals) to know if a variable is
> > referenced in a code block _without_ evaluating the code block?
>
>What do you want it for? maybe there is another approach that can be used.
>
>   Chen.
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070810/8e094c31/attachment.html
From lorenzo.fiorini at gmail.com  Mon Aug 13 03:30:23 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Aug 13 03:30:29 2007
Subject: [Harbour] harbour rpc and multithreading
Message-ID: <9257026e0708130030w19d64cb4k8554e1d39019cfe0@mail.gmail.com>

I've tried to port xHarbour's source/rtl/trpc.prg but it start with

#ifdef HB_THREAD_SUPPORT

Is there anybody that has implemented a simple http like server inside
harbour app without multi-threading?

I'm not trying to create a server that replay to multiple clients but
simply a "function" that reads a port and process http like commands
like GET and POST.

best regards,
Lorenzo
From fmancera at viaopen.com  Mon Aug 13 13:17:52 2007
From: fmancera at viaopen.com (ViaOpen - Fernando Mancera)
Date: Mon Aug 13 13:17:59 2007
Subject: [Harbour] TGet Decimal Problem
Message-ID: <mailman.2.1187025479.3664.harbour@harbour-project.org>

Viktor,

Another important TGet bug. Please try the next example.

The decimal numbers with negative sign not working.


Example:

function Main()

   local nValue  := 0.00

   SET COLOR TO GR+/B, W+/BG
   CLS

   @ 4, 2 SAY "Enter -0.58 :" GET nValue PICTURE "999.99"

   READ

   ? nValue
   ? "it should be -0.58"

return nil


Regards,

Fernando Mancera

From antonioharbour at gmail.com  Mon Aug 13 13:22:11 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Aug 13 13:22:19 2007
Subject: [Harbour] Pending GETs bugs (Vikthor)
Message-ID: <46c09347.130c420a.2a77.ffffa0ae@mx.google.com>

Vikthor,

Acording to the Class TGet changelogs, you have been modifying it
intensively.

Actually it has two pending bugs:

1) Dates() without PICTURE
2) Negative sign with decimal numbers

Harbour GET, as it is right now, it is NOT usable.

We appreciate your inmediate attention to this issue, thanks

Regards,

Antonio

From randy at palmasdev.com  Mon Aug 13 13:29:59 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Mon Aug 13 13:29:52 2007
Subject: [Harbour] Pending GETs bugs (Vikthor)
In-Reply-To: <46c09347.130c420a.2a77.ffffa0ae@mx.google.com>
References: <46c09347.130c420a.2a77.ffffa0ae@mx.google.com>
Message-ID: <20070813172948.191AD4592@smtp.tor.pathcom.com>

I would also like to add that I found the original TGet version 
(prior to the xHarbour syncing) to be much more stable/usable than 
the current TGet version - In fact, for my purposes, I have 
maintained this older version of TGet in my Harbour build. I am not 
sure how the other feel about this, but maybe we should consider 
reinstating the original Harbour TGet class from before the xHarbour 
syncing and apply any bug fixes to that version instead.

At 01:22 PM 8/13/2007, you wrote:
>Vikthor,
>
>Acording to the Class TGet changelogs, you have been modifying it
>intensively.
>
>Actually it has two pending bugs:
>
>1) Dates() without PICTURE
>2) Negative sign with decimal numbers
>
>Harbour GET, as it is right now, it is NOT usable.
>
>We appreciate your inmediate attention to this issue, thanks
>
>Regards,
>
>Antonio
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Aug 13 13:30:23 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Aug 13 13:30:30 2007
Subject: [Harbour] Pending GETs bugs (Vikthor)
In-Reply-To: <46c09347.130c420a.2a77.ffffa0ae@mx.google.com>
References: <46c09347.130c420a.2a77.ffffa0ae@mx.google.com>
Message-ID: <C20D997D-A7E1-4C18-BE9B-3D2616345F6F@syenar.hu>

Hi Antonio,

> Vikthor,
>
> Acording to the Class TGet changelogs, you have been modifying it
> intensively.
>
> Actually it has two pending bugs:
>
> 1) Dates() without PICTURE
> 2) Negative sign with decimal numbers

Thanks for Fernando for pointing it out, I'll look into
it ASAP (second half of this week).

> Harbour GET, as it is right now, it is NOT usable.
>
> We appreciate your inmediate attention to this issue, thanks

Was this really needed here?

Brgds,
Viktor

From antonioharbour at gmail.com  Mon Aug 13 13:36:42 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Aug 13 13:36:51 2007
Subject: [Harbour] Pending GETs bugs (Vikthor)
In-Reply-To: <C20D997D-A7E1-4C18-BE9B-3D2616345F6F@syenar.hu>
Message-ID: <46c096ae.1783420a.5465.00ed@mx.google.com>

Vikthor, 

>> Harbour GET, as it is right now, it is NOT usable.
>>
>> We appreciate your inmediate attention to this issue, thanks

> Was this really needed here?

Maybe you don't use GETs but GETs are extremelly important for the Clipper
language.

I reported the Date() PICTURE bug several days ago and you have not reacted
at all.


Antonio

From harbour.01 at syenar.hu  Mon Aug 13 13:37:04 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Aug 13 13:37:15 2007
Subject: [Harbour] Pending GETs bugs (Viktor)
In-Reply-To: <20070813172948.191AD4592@smtp.tor.pathcom.com>
References: <46c09347.130c420a.2a77.ffffa0ae@mx.google.com>
	<20070813172948.191AD4592@smtp.tor.pathcom.com>
Message-ID: <2BB4154B-FD8D-4709-8FE2-32969523CC11@syenar.hu>

Hi Randy,

I've found the previous version to have tons of discrepancies
compared to the CA-Cl*pper one, making it fully unusuable in
my environment without app level hacks.

The only problem with the current one is that we don't yet
have a regression test suit to cover the actual editing
behaviour. Just try to run the test suit using the previous
one and xhb's version to see how they perform with the current
test suit.

Could you pls provide some examples where the current code is
less stable, so that I can look into it too.

Brgds,
Viktor

On 2007.08.13., at 19:29, Randy Portnoff wrote:

> I would also like to add that I found the original TGet version  
> (prior to the xHarbour syncing) to be much more stable/usable than  
> the current TGet version - In fact, for my purposes, I have  
> maintained this older version of TGet in my Harbour build. I am not  
> sure how the other feel about this, but maybe we should consider  
> reinstating the original Harbour TGet class from before the  
> xHarbour syncing and apply any bug fixes to that version instead.
>
> At 01:22 PM 8/13/2007, you wrote:
>> Vikthor,
>>
>> Acording to the Class TGet changelogs, you have been modifying it
>> intensively.
>>
>> Actually it has two pending bugs:
>>
>> 1) Dates() without PICTURE
>> 2) Negative sign with decimal numbers
>>
>> Harbour GET, as it is right now, it is NOT usable.
>>
>> We appreciate your inmediate attention to this issue, thanks
>>
>> Regards,
>>
>> Antonio
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From randy at palmasdev.com  Mon Aug 13 13:47:30 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Mon Aug 13 13:46:51 2007
Subject: [Harbour] Pending GETs bugs (Viktor)
In-Reply-To: <2BB4154B-FD8D-4709-8FE2-32969523CC11@syenar.hu>
References: <46c09347.130c420a.2a77.ffffa0ae@mx.google.com>
	<20070813172948.191AD4592@smtp.tor.pathcom.com>
	<2BB4154B-FD8D-4709-8FE2-32969523CC11@syenar.hu>
Message-ID: <20070813174647.AE8CD4D2A@smtp.tor.pathcom.com>

Hi Viktor,

>Could you pls provide some examples where the current code is
>less stable, so that I can look into it too.

I don't remember what the exact problems were but I did report them 
at the time. Also, I was using build 43 for a very long time and only 
noticed these differences when I started using Beta 1 - I am not sure 
when the problems started since I did not use any of the builds in 
between build 43 and beta 1.

Regards,
Randy. 

From harbour.01 at syenar.hu  Mon Aug 13 13:55:22 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Aug 13 13:55:30 2007
Subject: [Harbour] Pending GETs bugs (Vikthor)
In-Reply-To: <46c096ae.1783420a.5465.00ed@mx.google.com>
References: <46c096ae.1783420a.5465.00ed@mx.google.com>
Message-ID: <0E8F3FFF-48FA-4BC7-B30F-068DAC9727BA@syenar.hu>

> Vikthor,

Viktor :)

>>> Harbour GET, as it is right now, it is NOT usable.
>>>
>>> We appreciate your inmediate attention to this issue, thanks
>
>> Was this really needed here?
>
> Maybe you don't use GETs but GETs are extremelly important for the  
> Clipper
> language.
>
> I reported the Date() PICTURE bug several days ago and you have not  
> reacted
> at all.

I didn't get any e-mails since days from the list...

I'm using GETs and I know they are important, that's why I've
spent quite some days last time with them.

Just pls let's keep the tone friendly on this.

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Aug 13 13:59:03 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Aug 13 13:59:13 2007
Subject: [Harbour] Pending GETs bugs (Viktor)
In-Reply-To: <20070813174647.AE8CD4D2A@smtp.tor.pathcom.com>
References: <46c09347.130c420a.2a77.ffffa0ae@mx.google.com>
	<20070813172948.191AD4592@smtp.tor.pathcom.com>
	<2BB4154B-FD8D-4709-8FE2-32969523CC11@syenar.hu>
	<20070813174647.AE8CD4D2A@smtp.tor.pathcom.com>
Message-ID: <8AD576C1-D6C1-46D3-850B-82782282DF11@syenar.hu>

Could you repost these because I can't recall any reports
since my modifications. Maybe I didn't receive them, just
like now.

BTW, you can CC me directly so that I get it for sure.

Brgds,
Viktor

On 2007.08.13., at 19:47, Randy Portnoff wrote:

> Hi Viktor,
>
>> Could you pls provide some examples where the current code is
>> less stable, so that I can look into it too.
>
> I don't remember what the exact problems were but I did report them  
> at the time. Also, I was using build 43 for a very long time and  
> only noticed these differences when I started using Beta 1 - I am  
> not sure when the problems started since I did not use any of the  
> builds in between build 43 and beta 1.
>
> Regards,
> Randy.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From antonioharbour at gmail.com  Mon Aug 13 14:03:05 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Aug 13 14:03:16 2007
Subject: [Harbour] Pending GETs bugs (Vikthor)
In-Reply-To: <0E8F3FFF-48FA-4BC7-B30F-068DAC9727BA@syenar.hu>
Message-ID: <46c09cdc.01ac420a.76d2.0399@mx.google.com>

Viktor,

> Just pls let's keep the tone friendly on this.

>> We appreciate your inmediate attention to this issue, thanks"

"Appreciate" and "thanks" look quite friendly. 

What it is NOT friendly at ALL is that the Class TGet is broken since over
ONE month ago, cause your changes. And you are RESPONSABLE of your changes.


Antonio

From harbour.01 at syenar.hu  Mon Aug 13 14:12:00 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Aug 13 14:12:08 2007
Subject: [Harbour] Pending GETs bugs (Vikthor)
In-Reply-To: <46c09cdc.01ac420a.76d2.0399@mx.google.com>
References: <46c09cdc.01ac420a.76d2.0399@mx.google.com>
Message-ID: <820A4A93-CCCE-4829-96F3-10A92B2CDD9F@syenar.hu>

> Viktor,
>
>> Just pls let's keep the tone friendly on this.
>
>>> We appreciate your inmediate attention to this issue, thanks"
>
> "Appreciate" and "thanks" look quite friendly.
>
> What it is NOT friendly at ALL is that the Class TGet is broken  
> since over
> ONE month ago, cause your changes. And you are RESPONSABLE of your  
> changes.

Sorry, you don't seem friendly the least bit. I used to react
to things (pretty quickly) since 1999 so pls take this as a starting
point. If I'm not reacting quickly enough for you consider that I
missed it, or that I have other duties.

I _didn't get_ your report one month ago, or I simply missed it
(which would be strange but can happen).

Now you're shouting, acting like a boss, what do you expect?

Brdgs,
Viktor

From antonioharbour at gmail.com  Mon Aug 13 14:20:42 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Aug 13 14:20:51 2007
Subject: [Harbour] Pending GETs bugs (Vikthor)
In-Reply-To: <820A4A93-CCCE-4829-96F3-10A92B2CDD9F@syenar.hu>
Message-ID: <46c0a0fe.01b2420a.0fa9.068c@mx.google.com>

Viktor,
 
I am not shouting anybody, I am just stressing on some parts of my msg.

This is the bug test for the GET for dates without PICTURE:

function Main()

   local dDay := Date()

   SET COLOR TO GR+/B, W+/BG
   CLS

   @ 4, 2 SAY "Start typing a date :" GET dDay

   READ

return nil

Antonio

From antonioharbour at gmail.com  Mon Aug 13 14:26:50 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Aug 13 14:27:00 2007
Subject: [Harbour] Pending GETs bugs (Vikthor)
Message-ID: <46c0a26e.2381420a.2191.05ce@mx.google.com>

> This is the bug test for the GET for dates without PICTURE:

For that bug we have found a solution (or workaround):

METHOD IsEditable( nPos ) CLASS Get

   local cChar

   if Empty( ::cPicMask ) .and. ::cType == "D"  // new
      ::cPicMask = "99/99/9999"                 // new
   endif                                        // new

   if Empty( ::cPicMask )
      return .t.
   Endif

Now we are working to find a fix for the negative and decimals bug.

Antonio

From harbour.01 at syenar.hu  Mon Aug 13 14:26:54 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Aug 13 14:27:04 2007
Subject: [Harbour] TGET issues
Message-ID: <66F6AD74-D701-4142-946D-C0D04E880E65@syenar.hu>

Hi all,

I've checked my local Harbour list backlogs for reported TGET
problems since my modifications. First of all my backlog is
pretty consistent with the web archive, so I don't think I've
missed any mails.

- I've fixed one bug reported by Teo.
- There was another report by Randy missing a method hidden
   in the new version (in sync with CA-Cl*pper) which was
   previously allowed in Harbour (due to not using any method/var
   protecion at all)
- Antonio reported a problem with Type() which turned out
   to a somewhat complex problem involving both his code and Harbour
   code. This triggered my fixes, and he also fixed his code AFAIR.
- An hour ago I received a report from Fernando telling about
   the -0.10 bug, 10 minutes later from Antonio the date without
   a picture bug. I've also noticed the latter BTW.

There is also an infinite loop bug in the date code, which
was there even before and which wasn't fixed by last fixes.

I'll look into the latter one ASAP (Wednesday/Thursday probably).

If you have any more reports regarding the TGET() class, pls.
speak up, I'll look into it.

Brgds,
Viktor


From harbour.01 at syenar.hu  Mon Aug 13 14:30:41 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Aug 13 14:30:53 2007
Subject: [Harbour] Pending GETs bugs (Vikthor)
In-Reply-To: <46c0a0fe.01b2420a.0fa9.068c@mx.google.com>
References: <46c0a0fe.01b2420a.0fa9.068c@mx.google.com>
Message-ID: <D41B648F-EED4-4429-AF8C-66737F7613E7@syenar.hu>

Antonio,

> I am not shouting anybody, I am just stressing on some parts of my  
> msg.
>
> This is the bug test for the GET for dates without PICTURE:

I'm getting the message and your bug report as well, thanks.
Also see my other mail.

Now I'm out for Sziget Fesztival.

Brgds,
Viktor

>
> function Main()
>
>    local dDay := Date()
>
>    SET COLOR TO GR+/B, W+/BG
>    CLS
>
>    @ 4, 2 SAY "Start typing a date :" GET dDay
>
>    READ
>
> return nil
>
> Antonio
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From fmancera at viaopen.com  Mon Aug 13 15:16:06 2007
From: fmancera at viaopen.com (ViaOpen - Fernando Mancera)
Date: Mon Aug 13 15:16:10 2007
Subject: [Harbour] SVN Commit
Message-ID: <mailman.3.1187032570.3664.harbour@harbour-project.org>

Hi,

Please, can anybody provide the exact SVN COMMIT command line to USE ?

I'm using this one but not work:

svn commit --force-log --username yyyyyy --password xxxxxx
https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/ha
rbour --file harbour/source/rtl/tget.prg

svn: 

Can't check path
'https:\\harbour-project.svn.sourceforge.net\svnroot\harbo
ur-project\trunk\harbour': The filename, directory name, or volume label
syntax is incorrect.

Regards,

Fernando Mancera

From lorenzo.fiorini at gmail.com  Tue Aug 14 02:03:09 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Aug 14 02:03:20 2007
Subject: [Harbour] Pending GETs bugs (Vikthor)
In-Reply-To: <20070813172948.191AD4592@smtp.tor.pathcom.com>
References: <46c09347.130c420a.2a77.ffffa0ae@mx.google.com>
	<20070813172948.191AD4592@smtp.tor.pathcom.com>
Message-ID: <9257026e0708132303p7f542b63je9601e80909d37b7@mail.gmail.com>

On 8/13/07, Randy Portnoff <randy@palmasdev.com> wrote:

> I would also like to add that I found the original TGet version
> (prior to the xHarbour syncing) to be much more stable/usable than
> the current TGet version - In fact, for my purposes, I have
> maintained this older version of TGet in my Harbour build. I am not
> sure how the other feel about this, but maybe we should consider
> reinstating the original Harbour TGet class from before the xHarbour
> syncing and apply any bug fixes to that version instead.

Randy, Antonio may I get your comment about some "patches" ( they are
mainly xHarbour's code with some modifications for Harbour ) to the
text UI system?
Without them, Harbour's text UI is unusable in my apps.

I've sent them to Viktor time ago but we have different results so
other opinions would be useful.

They are complete sources so it is easy to copy them over the harbour dev ones.

best regards,
Lorenzo
From harbour at rglab.pl  Tue Aug 14 03:02:38 2007
From: harbour at rglab.pl (=?iso-8859-2?Q?Ryszard_G=B3=B1b?=)
Date: Tue Aug 14 03:02:41 2007
Subject: [Harbour] Interrogating code block contents
References: <B75D4A6BE471094AB02513DB81890397088F99@exch.SYNEL-COMPANY.LTD>
	<20070810185101.D9ACA49B6@smtp.tor.pathcom.com>
Message-ID: <27973cd6d0b56ced2ec71d7b7d003ce4.qmail@home.pl>

Randy Portnoff <randy@palmasdev.com> napisa?(a):

> So, without having to change the existing code base, I was hoping 
> that I could poke around in the Harbour internals and find a way to 
> know if a var's pointer is being referenced in a code block.

  If you need to check if a local var is referenced in a codeblock then
you can use the following code (this uses HVM internal data so the best
place for it will be in codeblock.c)

HB_FUNC( HB_VARINCB )
{
 PHB_ITEM pItem = hb_stackItemFromBase( 1 );
 hb_retl( HB_IS_BYREF(pItem) && HB_IS_MEMVAR(pItem) );
}

Notice however that this code have some limitations:
1. the local variable has to be passed by reference eg.
  ? HB_VARINCB( @alocalvar )

2. The codeblock which refers to this variable have to be created before
you can check it (local variables are detached at the time of codeblock
creation)
 LOCAL a, b
 ? HB_VARINCB( @a )	// prints .F.
 b:={|| a}
 ? HB_VARINCB( @a )	//prints .T.

3. This function will return .T. if you pass a reference to memvar 
variable

Regards, Ryszard

-- 
Ryszard Glab


From antonioharbour at gmail.com  Tue Aug 14 03:59:38 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Aug 14 03:59:46 2007
Subject: [Harbour] Pending GETs bugs (Vikthor)
In-Reply-To: <9257026e0708132303p7f542b63je9601e80909d37b7@mail.gmail.com>
Message-ID: <46c160ed.1b10420a.0a7a.4ffa@mx.google.com>

Lorenzo,
 
>
Randy, Antonio may I get your comment about some "patches" ( they are mainly
xHarbour's code with some modifications for Harbour ) to the text UI system?
Without them, Harbour's text UI is unusable in my apps.
>

Could you please post the patches again ? Thanks,

Regards,

Antonio

From antonioharbour at gmail.com  Tue Aug 14 04:07:00 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Aug 14 04:07:11 2007
Subject: [Harbour] SVN Commit
In-Reply-To: <46c0adfd.1486460a.074a.587cSMTPIN_ADDED@mx.google.com>
Message-ID: <46c162a7.2787420a.090b.50fb@mx.google.com>

Ryszard,

Are you able to commit using SVN ? If yes, could you please explain in
detail the command line to use ? Thanks

Regards,

Antonio

From randy at palmasdev.com  Tue Aug 14 08:31:04 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Tue Aug 14 08:30:29 2007
Subject: [Harbour] Interrogating code block contents
In-Reply-To: <27973cd6d0b56ced2ec71d7b7d003ce4.qmail@home.pl>
References: <B75D4A6BE471094AB02513DB81890397088F99@exch.SYNEL-COMPANY.LTD>
	<20070810185101.D9ACA49B6@smtp.tor.pathcom.com>
	<27973cd6d0b56ced2ec71d7b7d003ce4.qmail@home.pl>
Message-ID: <20070814123023.40417405B@smtp.tor.pathcom.com>

Hi Ryszard,

Thanks! Is there anyway it could also work with 
an array element - eg. HB_VARINCB( @a[1] )?

Regards,
Randy.

At 03:02 AM 8/14/2007, you wrote:
>Randy Portnoff <randy@palmasdev.com> napisa?(a):
>
> > So, without having to change the existing code base, I was hoping
> > that I could poke around in the Harbour internals and find a way to
> > know if a var's pointer is being referenced in a code block.
>
>   If you need to check if a local var is referenced in a codeblock then
>you can use the following code (this uses HVM internal data so the best
>place for it will be in codeblock.c)
>
>HB_FUNC( HB_VARINCB )
>{
>  PHB_ITEM pItem = hb_stackItemFromBase( 1 );
>  hb_retl( HB_IS_BYREF(pItem) && HB_IS_MEMVAR(pItem) );
>}
>
>Notice however that this code have some limitations:
>1. the local variable has to be passed by reference eg.
>   ? HB_VARINCB( @alocalvar )
>
>2. The codeblock which refers to this variable have to be created before
>you can check it (local variables are detached at the time of codeblock
>creation)
>  LOCAL a, b
>  ? HB_VARINCB( @a )     // prints .F.
>  b:={|| a}
>  ? HB_VARINCB( @a )     //prints .T.
>
>3. This function will return .T. if you pass a reference to memvar
>variable
>
>Regards, Ryszard
>
>--
>Ryszard Glab
>
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour

From randy at palmasdev.com  Tue Aug 14 08:32:38 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Tue Aug 14 08:32:00 2007
Subject: [Harbour] Pending GETs bugs (Vikthor)
In-Reply-To: <9257026e0708132303p7f542b63je9601e80909d37b7@mail.gmail.co
 m>
References: <46c09347.130c420a.2a77.ffffa0ae@mx.google.com>
	<20070813172948.191AD4592@smtp.tor.pathcom.com>
	<9257026e0708132303p7f542b63je9601e80909d37b7@mail.gmail.com>
Message-ID: <20070814123154.E881E437F@smtp.tor.pathcom.com>

Hi Lorenzo,

I do not know what "patches" you are referring to - If you send me 
your patched TGET.PRG (for Beta 3) I will test it.

Regards,
Randy.

At 02:03 AM 8/14/2007, you wrote:
>On 8/13/07, Randy Portnoff <randy@palmasdev.com> wrote:
>
> > I would also like to add that I found the original TGet version
> > (prior to the xHarbour syncing) to be much more stable/usable than
> > the current TGet version - In fact, for my purposes, I have
> > maintained this older version of TGet in my Harbour build. I am not
> > sure how the other feel about this, but maybe we should consider
> > reinstating the original Harbour TGet class from before the xHarbour
> > syncing and apply any bug fixes to that version instead.
>
>Randy, Antonio may I get your comment about some "patches" ( they are
>mainly xHarbour's code with some modifications for Harbour ) to the
>text UI system?
>Without them, Harbour's text UI is unusable in my apps.
>
>I've sent them to Viktor time ago but we have different results so
>other opinions would be useful.
>
>They are complete sources so it is easy to copy them over the 
>harbour dev ones.
>
>best regards,
>Lorenzo
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Tue Aug 14 10:10:23 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Aug 14 10:10:31 2007
Subject: [Harbour] Pending GETs bugs (Vikthor)
In-Reply-To: <20070814123154.E881E437F@smtp.tor.pathcom.com>
References: <46c09347.130c420a.2a77.ffffa0ae@mx.google.com>
	<20070813172948.191AD4592@smtp.tor.pathcom.com>
	<9257026e0708132303p7f542b63je9601e80909d37b7@mail.gmail.com>
	<20070814123154.E881E437F@smtp.tor.pathcom.com>
Message-ID: <9257026e0708140710l5620bab5sbe4483fb4641357f@mail.gmail.com>

On 8/14/07, Randy Portnoff <randy@palmasdev.com> wrote:

> I do not know what "patches" you are referring to - If you send me
> your patched TGET.PRG (for Beta 3) I will test it.

I have already sent them to the list.

They are related to dev branch but they are full source files so you
can use them for beta3 also.The only difference I'm aware is about
recent Viktor's change RASCAN vs HB_RASCAN.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Tue Aug 14 04:36:59 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Aug 16 01:26:16 2007
Subject: [Harbour] Pending GETs bugs (Vikthor)
In-Reply-To: <46c160ed.1b10420a.0a7a.4ffa@mx.google.com>
References: <9257026e0708132303p7f542b63je9601e80909d37b7@mail.gmail.com>
	<46c160ed.1b10420a.0a7a.4ffa@mx.google.com>
Message-ID: <9257026e0708140136p38a0c530kdcc679e56fcdeba0@mail.gmail.com>

On 8/14/07, Antonio Linares <antonioharbour@gmail.com> wrote:

> Could you please post the patches again ? Thanks,

Here they are.

Unzip it in a harbour dev root ( please use a copy I cannot test it in
every env ).

It adds two sources in rtl and replaces others. It also replace
inkey.ch and tbrwtext.prg in debug since it depends on tbrowse. Please
compile using -DHB_EXT_INKEY -DHB_COMPAT_XHB -DHB_PP_MULTILINE_STRING.

best regards,
Lorenzo
-------------- next part --------------
A non-text attachment was scrubbed...
Name: diff.zip
Type: application/zip
Size: 182924 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070814/49f7ecd9/diff-0001.zip
From tomaz.zupan at orpo.si  Thu Aug 16 02:48:14 2007
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Thu Aug 16 02:48:23 2007
Subject: [Harbour] .spec file
Message-ID: <200708160848.15102.tomaz.zupan@orpo.si>



Hi!

After succesfully creating rpm packages with make_rpm.sh, I have a problem
installing harbour package:
Failed dependencies:
harbour-lib = %{epoch}:0.99.3-0mdk20070 is needed by
harbour-0.99.3-0mdk20070.i586

It seems that tag {epoch} is note defined in harbour.spec or there should
not be {epoch} tag in Requires tag.

I have the same problem with trunk and beta branch. Anyone else with same
problem?

-- 
Toma? Zupan
ORPO d.o.o.
http://www.orpo.si
From teo at windtelsoft.com  Thu Aug 16 03:39:11 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Thu Aug 16 03:39:19 2007
Subject: [Harbour] .spec file
In-Reply-To: <200708160848.15102.tomaz.zupan@orpo.si>
References: <200708160848.15102.tomaz.zupan@orpo.si>
Message-ID: <200708160239.12036.teo@windtelsoft.com>

On Thursday 16 August 2007 01:48:14 am Toma? Zupan wrote:
> Hi!
>
> After succesfully creating rpm packages with make_rpm.sh, I have a problem
> installing harbour package:
> Failed dependencies:
> harbour-lib = %{epoch}:0.99.3-0mdk20070 is needed by
> harbour-0.99.3-0mdk20070.i586
>
> It seems that tag {epoch} is note defined in harbour.spec or there should
> not be {epoch} tag in Requires tag.
>
> I have the same problem with trunk and beta branch. Anyone else with same
> problem?

Yes, looks like a typo in the harbour.spec file.

Anyway you can install safely the packages with:

$ rpm -Uvh --nodeps harbour*rpm


best regards

Teo Fonrouge
From antonioharbour at gmail.com  Fri Aug 17 07:05:50 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Fri Aug 17 07:05:57 2007
Subject: [Harbour] is there any documentation about available Gt's
In-Reply-To: <20070808122351.GA9832@localhost.localdomain>
References: <003901c7d9a8$7c19b0a0$744d11e0$@com>
	<20070808122351.GA9832@localhost.localdomain>
Message-ID: <1187348750.5750.2.camel@anto-desktop>

Przemek and other Linux users,

> gtnul  - base GT driver from which each other inherits.
>          it gives screen buffer functionality but does not
>          produce any screen output from disp*() commands
>          Only outStd()/outErr() are supported.
>          It's present on all platforms and i always linked.

How to use gtnul only ? I can't find a libgtnul.a and if I don't link
any libgt... then I get the error: undefined reference to
`HB_FUN_HB_GT_STD'

Thanks,

Antonio

From toninhofwi at yahoo.com.br  Fri Aug 17 08:50:35 2007
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Fri Aug 17 08:50:50 2007
Subject: [Harbour] About ACE.H
Message-ID: <f96bc3tlielosjaelhuvstlto7h4fi8i87@4ax.com>

Hi.

I update ace.h in xharbour, to make it compatible with ADS 8.1, but
when I look at Harbour?s ace.h, I see a lot of differences from
xharbour?s ace.h.

Is this intentional? Can both be synched ?

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor op??o para voc?! 
Experimente j? e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From m.renzi at maticasrl.it  Fri Aug 17 11:30:10 2007
From: m.renzi at maticasrl.it (Massimo Renzi (MaticaSrl))
Date: Fri Aug 17 11:30:35 2007
Subject: [Harbour] xHarbour editor;
In-Reply-To: <9257026e0708140136p38a0c530kdcc679e56fcdeba0@mail.gmail.com>
References: <9257026e0708132303p7f542b63je9601e80909d37b7@mail.gmail.com><46c160ed.1b10420a.0a7a.4ffa@mx.google.com>
	<9257026e0708140136p38a0c530kdcc679e56fcdeba0@mail.gmail.com>
Message-ID: <000001c7e0e3$7fbeb0b0$6e00e00a@maxsoft>

Hi all, 
actually I use xMate to compile and edit files.
Can you suggest me another free IDE ?

Thank you.

Max


From marciomgil at bol.com.br  Fri Aug 17 14:58:06 2007
From: marciomgil at bol.com.br (=?iso-8859-1?Q?M=E1rcio_Gil?=)
Date: Fri Aug 17 14:58:28 2007
Subject: [Harbour] Fail to build a PostgreSQL application
Message-ID: <20070817185819.91540480011BC@smart3.bol.com.br>

Hello,

Trying to build a PostgreSQL application I found these errors on directory
?harbour/contrib/pgsql?, file ?makefile.bc?:

8c8
< PG_DIR = C:\PostgreSQL
---
> PG_DIR = $(PROGRAMFILES)\PostgreSQL\8.1
13c13
< BIN_DIR = c:\xharbour\bin
---
> BIN_DIR = c:\harbour\bin
18c18
<   $(OBJ_DIR)\TPostgres.obj \
---
>   $(OBJ_DIR)\TPostgre.obj \
21,22c21,22
< $(OBJ_DIR)\TPostgres.c    : TPostgres.prg
< $(OBJ_DIR)\TPostgres.obj  : $(OBJ_DIR)\TPostgres.c
---
> $(OBJ_DIR)\TPostgre.c    : TPostgre.prg
> $(OBJ_DIR)\TPostgre.obj  : $(OBJ_DIR)\TPostgre.c

The correct file is annexed.

I make the library ?libhbpg.lib? and the file ?libpq.dll? has converted to
?libpq.lib?, but I can?t compile the ?test.prg? program. The output has:

Borland C++ 5.5 for Win32 Copyright (c) 1993, 2000 Borland
psqltest.c:
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Error: Unresolved external '_PQconnectdb' referenced from
C:\HARBOUR\LIB\LIBHBPG.LIB|postgres
Error: Unresolved external '_PQsetdbLogin' referenced from
C:\HARBOUR\LIB\LIBHBPG.LIB|postgres
Error: Unresolved external '_PQfinish' referenced from
C:\HARBOUR\LIB\LIBHBPG.LIB|postgres
Error: Unresolved external '_PQreset' referenced from
C:\HARBOUR\LIB\LIBHBPG.LIB|postgres
...

Harbour Build Info
---------------------------
Version: Harbour Beta build 0.99-3 Intl.
PCode version: 0.2
Compiler: Borland C++ 5.5 (32 bit)
Platform: Windows XP 5.1.2600 Service Pack 2

Built on: Jun 15 2007 10:35:02
Last ChangeLog entry: 2007-06-14 00:30 UTC+0200 Przemyslaw Czerpak
ChangeLog CVS version: ChangeLog,v 1.5168.2.62 2007/06/13 22:30:59

Harbour extensions: Yes
CA-Clipper 5.2e undocumented: Yes
CA-Clipper 5.2e strict compatibility: No
CA-Clipper 5.3x compatible extensions: Yes
xHarbour compatible extensions: No
Alaska Xbase++ compatible extensions: Yes
CA-Visual Objects compatible extensions: No
Multisoft Flagship compatible extensions: Yes
CLIP compatible extensions: No
Microsoft FoxPro compatible extensions: No
dBase compatible extensions: No
Object file generation support: No
ANSI C usage: Non strict
C++ mode: Off
Compiler YACC debug mode: Off
Memory tracing and statistics: On
Maximum symbol name length: 63
---------------------------

The batch file is:

SET HB_ARCHITECTURE=w32
SET HB_COMPILER=bcc32
SET HB_GT_LIB=gtwin
SET HB_STD_LIBS=codepage.lib debug.lib vm.lib rtl.lib %HB_GT_LIB%.lib
lang.lib rdd.lib macro.lib pp.lib dbffpt.lib dbfntx.lib dbfcdx.lib hbsix.lib
common.lib
SET HB_PG_LIBS=libpq.lib libhbpg.lib

ECHO.
ECHO *** Gerando PSQLTEST.EXE ***
ECHO.
harbour psqltest.prg -gc0 -m -n -w -dMP20 -i%HB_INC_INSTALL%
IF NOT ERRORLEVEL 1 ECHO.
IF NOT ERRORLEVEL 1 bcc32 -epsqltest.exe -O2 -I%HB_INC_INSTALL%
-L%HB_LIB_INSTALL% psqltest.c %HB_STD_LIBS% %HB_PG_LIBS%
IF NOT ERRORLEVEL 1 ECHO.
IF NOT ERRORLEVEL 1 ECHO *** Completado ***
IF NOT ERRORLEVEL 1 ECHO.

Thanks for any help.

M?rcio Gil.
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: makefile.bc
Type: application/octet-stream
Size: 853 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070817/d43999dd/makefile.obj
From antonioharbour at gmail.com  Fri Aug 17 15:14:02 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Fri Aug 17 15:14:06 2007
Subject: [Harbour] xHarbour editor;
In-Reply-To: <000001c7e0e3$7fbeb0b0$6e00e00a@maxsoft>
References: <9257026e0708132303p7f542b63je9601e80909d37b7@mail.gmail.com>
	<46c160ed.1b10420a.0a7a.4ffa@mx.google.com>
	<9257026e0708140136p38a0c530kdcc679e56fcdeba0@mail.gmail.com>
	<000001c7e0e3$7fbeb0b0$6e00e00a@maxsoft>
Message-ID: <1187378042.5750.18.camel@anto-desktop>

Massimo,

Have a look at UEStudio. Its not free, but there is an eval version. It
works really fine. It has full support for Harbour and xHarbour.

regards,

Antonio

On Fri, 2007-08-17 at 17:30 +0200, Massimo Renzi (MaticaSrl) wrote:
> Hi all, 
> actually I use xMate to compile and edit files.
> Can you suggest me another free IDE ?
> 
> Thank you.
> 
> Max
> 
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From marciomgil at bol.com.br  Sat Aug 18 11:27:07 2007
From: marciomgil at bol.com.br (=?iso-8859-1?Q?M=E1rcio_Gil?=)
Date: Sat Aug 18 11:27:25 2007
Subject: RES: [Harbour] Fail to build a PostgreSQL application
In-Reply-To: <20070817185819.91540480011BC@smart3.bol.com.br>
Message-ID: <20070818152744.634324800065F@smart4.bol.com.br>

OK,

I just execute ?implib ?a libpq.lib libpq.dll? (adding the ?a flag) and now
I can compile the test program. But the README is wrong?

Instead of:

< BORLAND BCC
< -----------
< Using this library with bcc, you will need import library,
< ex: implib libpq.lib libpq.dll or (advice this) build your
< own Postgres Library.

Can we correct to this?

> BORLAND BCC
> -----------
> Using this library with bcc, you will need import library,
> ex: implib -a libpq.lib libpq.dll or (advice this) build your
> own Postgres Library.

But, now I receive this output:

D:\Projetos\proj\prg\test>psqltest marcio mypassword

test marcio  localhost 5432
NIL
         0
Blocking:  .F. .F. .T.
Verbose:           1
D:\Projetos\proj\prg\test>

And the Windows return the error ?The psqltest.exe found a problem and
wanted to be closed?

The difference between my test program and the official ?test.prg? is:

9c10
< Function main()
---
> Function main( P1, P2, P3 )
12,16c13,38
<     Local cUser := 'user'
<     Local cPass := 'pass'
<     
<     CLEAR SCREEN
<   
---
>     Local cUser := ''
>     Local cPass := ''
> 
>     *CLEAR SCREEN
>     IF P1 == NIL
>        ?? "Inform the user name and password"
>        ?
>        Quit
>     ELSE
>        cUser := P1
>     ENDIF
> 
>     IF P2 == NIL
>        ?? "Inform the password"
>        ?
>        Quit
>     ELSE
>        cPass := P2
>     ENDIF
> 
>     IF P3 # NIL
>        ?? "Incorrect parameter:", P3
>        ?
>        Quit
>     ENDIF
>

Bests regards,

M?rcio Gil.

> -----Mensagem original-----
> De: harbour-bounces@harbour-project.org 
> [mailto:harbour-bounces@harbour-project.org] Em nome de M?rcio Gil
> Enviada em: sexta-feira, 17 de agosto de 2007 15:58
> Para: 'Harbour Project Main Developer List.'
> Assunto: [Harbour] Fail to build a PostgreSQL application
> 
> Hello,
> 
> Trying to build a PostgreSQL application I found these errors 
> on directory
> ?harbour/contrib/pgsql?, file ?makefile.bc?:
> 
> 8c8
> < PG_DIR = C:\PostgreSQL
> ---
> > PG_DIR = $(PROGRAMFILES)\PostgreSQL\8.1
> 13c13
> < BIN_DIR = c:\xharbour\bin
> ---
> > BIN_DIR = c:\harbour\bin
> 18c18
> <   $(OBJ_DIR)\TPostgres.obj \
> ---
> >   $(OBJ_DIR)\TPostgre.obj \
> 21,22c21,22
> < $(OBJ_DIR)\TPostgres.c    : TPostgres.prg
> < $(OBJ_DIR)\TPostgres.obj  : $(OBJ_DIR)\TPostgres.c
> ---
> > $(OBJ_DIR)\TPostgre.c    : TPostgre.prg
> > $(OBJ_DIR)\TPostgre.obj  : $(OBJ_DIR)\TPostgre.c
> 
> The correct file is annexed.
> 
> I make the library ?libhbpg.lib? and the file ?libpq.dll? has 
> converted to
> ?libpq.lib?, but I can?t compile the ?test.prg? program. The 
> output has:
> 
> Borland C++ 5.5 for Win32 Copyright (c) 1993, 2000 Borland
> psqltest.c:
> Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
> Error: Unresolved external '_PQconnectdb' referenced from
> C:\HARBOUR\LIB\LIBHBPG.LIB|postgres
> Error: Unresolved external '_PQsetdbLogin' referenced from
> C:\HARBOUR\LIB\LIBHBPG.LIB|postgres
> Error: Unresolved external '_PQfinish' referenced from
> C:\HARBOUR\LIB\LIBHBPG.LIB|postgres
> Error: Unresolved external '_PQreset' referenced from
> C:\HARBOUR\LIB\LIBHBPG.LIB|postgres
> ..
> 
> Harbour Build Info
> ---------------------------
> Version: Harbour Beta build 0.99-3 Intl.
> PCode version: 0.2
> Compiler: Borland C++ 5.5 (32 bit)
> Platform: Windows XP 5.1.2600 Service Pack 2
> 
> Built on: Jun 15 2007 10:35:02
> Last ChangeLog entry: 2007-06-14 00:30 UTC+0200 Przemyslaw Czerpak
> ChangeLog CVS version: ChangeLog,v 1.5168.2.62 2007/06/13 22:30:59
> 
> Harbour extensions: Yes
> CA-Clipper 5.2e undocumented: Yes
> CA-Clipper 5.2e strict compatibility: No
> CA-Clipper 5.3x compatible extensions: Yes
> xHarbour compatible extensions: No
> Alaska Xbase++ compatible extensions: Yes
> CA-Visual Objects compatible extensions: No
> Multisoft Flagship compatible extensions: Yes
> CLIP compatible extensions: No
> Microsoft FoxPro compatible extensions: No
> dBase compatible extensions: No
> Object file generation support: No
> ANSI C usage: Non strict
> C++ mode: Off
> Compiler YACC debug mode: Off
> Memory tracing and statistics: On
> Maximum symbol name length: 63
> ---------------------------
> 
> The batch file is:
> 
> SET HB_ARCHITECTURE=w32
> SET HB_COMPILER=bcc32
> SET HB_GT_LIB=gtwin
> SET HB_STD_LIBS=codepage.lib debug.lib vm.lib rtl.lib %HB_GT_LIB%.lib
> lang.lib rdd.lib macro.lib pp.lib dbffpt.lib dbfntx.lib 
> dbfcdx.lib hbsix.lib
> common.lib
> SET HB_PG_LIBS=libpq.lib libhbpg.lib
> 
> ECHO.
> ECHO *** Gerando PSQLTEST.EXE ***
> ECHO.
> harbour psqltest.prg -gc0 -m -n -w -dMP20 -i%HB_INC_INSTALL%
> IF NOT ERRORLEVEL 1 ECHO.
> IF NOT ERRORLEVEL 1 bcc32 -epsqltest.exe -O2 -I%HB_INC_INSTALL%
> -L%HB_LIB_INSTALL% psqltest.c %HB_STD_LIBS% %HB_PG_LIBS%
> IF NOT ERRORLEVEL 1 ECHO.
> IF NOT ERRORLEVEL 1 ECHO *** Completado ***
> IF NOT ERRORLEVEL 1 ECHO.
> 
> Thanks for any help.
> 
> M?rcio Gil.
>  
> 

From harbour.01 at syenar.hu  Sat Aug 18 23:17:01 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sat Aug 18 23:17:03 2007
Subject: [Harbour] CHANGELOG: 2007-08-19 05:14 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7e20f$Blat.v2.6.1$68fb3e52$17d4600cad76@127.0.0.1>

2007-08-19 05:14 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * source/rtl/tget.prg
     ! Fixed bug where mask was missing for date var type when 
       no explicit picture was used.

   * contrib/libct/makefile.bc
     ! Added missing lines.

From antonioharbour at gmail.com  Sun Aug 19 03:29:04 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Aug 19 03:29:13 2007
Subject: [Harbour] CHANGELOG: 2007-08-19 05:14 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <01c7e20f$Blat.v2.6.1$68fb3e52$17d4600cad76@127.0.0.1>
References: <01c7e20f$Blat.v2.6.1$68fb3e52$17d4600cad76@127.0.0.1>
Message-ID: <1187508544.5820.12.camel@anto-desktop>

Viktor,

> 2007-08-19 05:14 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>    * source/rtl/tget.prg
>      ! Fixed bug where mask was missing for date var type when 
>        no explicit picture was used.
> 
>    * contrib/libct/makefile.bc
>      ! Added missing lines.

Thanks!

regards,

Antonio

From harbour.01 at syenar.hu  Sun Aug 19 07:01:42 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Aug 19 07:01:44 2007
Subject: [Harbour] CHANGELOG: 2007-08-19 12:58 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7e250$Blat.v2.6.1$53805e72$b4c49ef8e1a@127.0.0.1>

2007-08-19 12:58 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * source/rtl/tget.prg
     ! Fixed bug where negativ number in ge buffer beginning 
       with a decimal sign was erroneously converted back to 
       a numeric. (like: -.58)
       Please test!
     % Minor optimization in @E handling.

From tomaz.zupan at orpo.si  Sun Aug 19 07:37:52 2007
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Sun Aug 19 07:38:00 2007
Subject: [Harbour] .spec file
In-Reply-To: <200708160239.12036.teo@windtelsoft.com>
References: <200708160848.15102.tomaz.zupan@orpo.si>
	<200708160239.12036.teo@windtelsoft.com>
Message-ID: <200708191337.52310.tomaz.zupan@orpo.si>

There is also a copnflict with nss package:
file /usr/bin/pp from install of harbour-pp-1.1.1-0mdk20070 conflicts with 
file from package nss-3.11.5-4mdv2007.1

-- 
Toma? Zupan
ORPO d.o.o.
http://www.orpo.si
From druzus at priv.onet.pl  Sun Aug 19 08:08:16 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sun Aug 19 08:08:21 2007
Subject: [Harbour] .spec file
In-Reply-To: <200708160239.12036.teo@windtelsoft.com>
References: <200708160848.15102.tomaz.zupan@orpo.si>
	<200708160239.12036.teo@windtelsoft.com>
Message-ID: <20070819120816.GA11038@localhost.localdomain>

On Thu, 16 Aug 2007, Teo Fonrouge wrote:
> > After succesfully creating rpm packages with make_rpm.sh, I have a problem
> > installing harbour package:
> > Failed dependencies:
> > harbour-lib = %{epoch}:0.99.3-0mdk20070 is needed by
> > harbour-0.99.3-0mdk20070.i586
> > It seems that tag {epoch} is note defined in harbour.spec or there should
> > not be {epoch} tag in Requires tag.
> > I have the same problem with trunk and beta branch. Anyone else with same
> > problem?
> Yes, looks like a typo in the harbour.spec file.

It's not a typo and it's perfectly valid tag.
Please report to Mandriva developers that their RPM does not support
'epoch' macro.
Now we can safely remove 'epoch' macro but I do not think if it's good
idea to remove some possibly usable extensions due to problems in some
distros.

best regards,
Przemek
From antonioharbour at gmail.com  Sun Aug 19 09:58:52 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Aug 19 09:59:01 2007
Subject: [Harbour] CHANGELOG: 2007-08-19 12:58 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <01c7e250$Blat.v2.6.1$53805e72$b4c49ef8e1a@127.0.0.1>
References: <01c7e250$Blat.v2.6.1$53805e72$b4c49ef8e1a@127.0.0.1>
Message-ID: <1187531932.5820.17.camel@anto-desktop>

Viktor,

Thanks so much,

regards,

Antonio

On Sun, 2007-08-19 at 13:01 +0200, Szak?ts Viktor wrote:
> 2007-08-19 12:58 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
>    * source/rtl/tget.prg
>      ! Fixed bug where negativ number in ge buffer beginning 
>        with a decimal sign was erroneously converted back to 
>        a numeric. (like: -.58)
>        Please test!
>      % Minor optimization in @E handling.
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From antonioharbour at gmail.com  Sun Aug 19 10:02:41 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Aug 19 10:02:50 2007
Subject: [Harbour] Possible RDD bug ?
Message-ID: <1187532161.5820.21.camel@anto-desktop>

Hello Przemek,

A FWH user has reported this strange (possible?) bug and I would like
you to know about it and also know your opinion, thanks:

>>>
                                 use lvrlog new 
          INDEX ON str(val(type),2)+str(val(noden),2)+str(val(modn),2)
                      TAG MODULE for val(modn)#0 
                                   ? ordfor() 
                   INDEX ON str(val(type),2)+str(val(noden),2)
TAG PM     for (nr = '4' .or. nr = '6') .and. nodet # 'HG' .and. nodet #
                                 'NIM' 
                                   ? ordfor() 
                                     
In the first message the filtering is shown but in the second it's
empty. Also if I browse the database, all records are shown. 
If I create a small test-program, everything works fine.
>>>

regards,

Antonio

From antonioharbour at gmail.com  Sun Aug 19 10:05:26 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Sun Aug 19 10:05:34 2007
Subject: [Harbour] Re: Possible RDD bug ?
In-Reply-To: <1187532161.5820.21.camel@anto-desktop>
References: <1187532161.5820.21.camel@anto-desktop>
Message-ID: <1187532326.5820.24.camel@anto-desktop>

Przemek,

> for (nr = '4' .or. nr = '6') .and. nodet # 'HG' .and. nodet #
> 'NIM' 
> ? ordfor() 

Also he said that removing the "(" and ")" then it was ok:

... for nr $ '4;6' .and. nodet # 'HG' .and. nodet # 'NIM' 

regards,

Antonio

From harbour.01 at syenar.hu  Sun Aug 19 11:01:26 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Aug 19 11:01:28 2007
Subject: [Harbour] CHANGELOG: 2007-08-19 17:00 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7e271$Blat.v2.6.1$d0f32148$10706516c702@127.0.0.1>

2007-08-19 17:00 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * source/rtl/tgetlist.prg
     ! Fixed crash when bad date is detected. (:TypeOut was 
       used in an assignment)

From mhsabado at gmail.com  Sun Aug 19 12:20:51 2007
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Sun Aug 19 12:21:08 2007
Subject: [Harbour] Missing Functions?
Message-ID: <46C86DE3.2000300@gmail.com>

Hi,

I'm trying to compile my console application but I have missing 
functions as listed below.  What libs I may need to link or equivalent 
functions?

TIA,
Mario

NumToHex()
IsDir()
PrintFileRaw()
GetPrinters()
GetDefaultPrinter()

From fmancera at viaopen.com  Sun Aug 19 12:42:57 2007
From: fmancera at viaopen.com (ViaOpen - Fernando Mancera)
Date: Sun Aug 19 12:43:00 2007
Subject: [Harbour] SVN Commit
Message-ID: <mailman.4.1187541780.3664.harbour@harbour-project.org>

Hi,

Please, can anybody provide the exact SVN COMMIT command line to USE ?

I'm using this one but not work:

svn commit --force-log --username yyyyyy --password xxxxxx
https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/ha
rbour --file harbour/source/rtl/tget.prg

svn: 

Can't check path
'https:\\harbour-project.svn.sourceforge.net\svnroot\harbo
ur-project\trunk\harbour': The filename, directory name, or volume label
syntax is incorrect.

Regards,

Fernando Mancera

From mpaliwoda at interia.pl  Sun Aug 19 12:50:38 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sun Aug 19 12:50:47 2007
Subject: [Harbour] 2007-08-19 18:35 UTC+0100 Marek Paliwoda (mpaliwoda at
	interia pl)
Message-ID: <46C874DE.6090104@interia.pl>

2007-08-19 18:35 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
   * harbour/makefile.bc
   * harbour/makefile.vc
   * harbour/makefile.gc
      + Added more descripion in a makefile's headers
      % Minor makefile cleanup

-- 

     Marek Paliwoda
mpaliwoda at interia pl

----------------------------------------------------------------------
Jak najszybciej dostac sie na wymarzona plaze?
Znajdz trase ekspresowa

>>>http://link.interia.pl/f1b0c

From teo at windtelsoft.com  Sun Aug 19 15:21:28 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Sun Aug 19 15:21:35 2007
Subject: [Harbour] .spec file
In-Reply-To: <20070819120816.GA11038@localhost.localdomain>
References: <200708160848.15102.tomaz.zupan@orpo.si>
	<200708160239.12036.teo@windtelsoft.com>
	<20070819120816.GA11038@localhost.localdomain>
Message-ID: <200708191421.28643.teo@windtelsoft.com>

On Sunday 19 August 2007 07:08:16 am Przemyslaw Czerpak wrote:
> On Thu, 16 Aug 2007, Teo Fonrouge wrote:
> > > After succesfully creating rpm packages with make_rpm.sh, I have a
> > > problem installing harbour package:
> > > Failed dependencies:
> > > harbour-lib = %{epoch}:0.99.3-0mdk20070 is needed by
> > > harbour-0.99.3-0mdk20070.i586
> > > It seems that tag {epoch} is note defined in harbour.spec or there
> > > should not be {epoch} tag in Requires tag.
> > > I have the same problem with trunk and beta branch. Anyone else with
> > > same problem?
> >
> > Yes, looks like a typo in the harbour.spec file.
>
> It's not a typo and it's perfectly valid tag.
> Please report to Mandriva developers that their RPM does not support
> 'epoch' macro.
> Now we can safely remove 'epoch' macro but I do not think if it's good
> idea to remove some possibly usable extensions due to problems in some
> distros.

The harbour.spec file in the svn tree does not have a declared epoch tag, 
thats why the dependency error reported by Toma?, attached is a patch.


best regards

Teo Fonrouge
-------------- next part --------------
A non-text attachment was scrubbed...
Name: harbour.spec.diff
Type: text/x-diff
Size: 653 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070819/5d2f778c/harbour.spec.bin
From tomaz.zupan at orpo.si  Sun Aug 19 16:31:18 2007
From: tomaz.zupan at orpo.si (=?iso-8859-2?q?Toma=BE_Zupan?=)
Date: Sun Aug 19 16:31:32 2007
Subject: [Harbour] .spec file
In-Reply-To: <20070819120816.GA11038@localhost.localdomain>
References: <200708160848.15102.tomaz.zupan@orpo.si>
	<200708160239.12036.teo@windtelsoft.com>
	<20070819120816.GA11038@localhost.localdomain>
Message-ID: <200708192231.18551.tomaz.zupan@orpo.si>

> It's not a typo and it's perfectly valid tag.

Of course it is valid tag, but it is not defined - if I understand docs
correctly.
http://www.rpm.org/max-rpm-snapshot/s1-rpm-depend-manual-dependencies.html

IMO it should be defined before Requires tag:
Epoch:          48

I tested and it works as expected.

LP, Toma?

PS: Have you noticed other message regarding conflict with nss package?
Could someone test that on another distro?
From harbour.01 at syenar.hu  Sun Aug 19 22:06:54 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Sun Aug 19 22:06:51 2007
Subject: [Harbour] CHANGELOG: 2007-08-20 04:03 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7e2ce$Blat.v2.6.1$c7ad9732$d84dbbbe36@127.0.0.1>

2007-08-20 04:03 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * source/rtl/tget.prg
     ! Fixed incompatible setting of ::TypeOut in certain 
       situations. As an example this could cause infinite 
       loops in the get reader when a bad date was entered 
       like: 2007.12.32 (very old bug)
     ! Recent missing date picture mask bug fixed in a different 
       way, because the previous one caused some regressions.
     ! Fixed ::TypeOut behaviour for non-editable types.

From antonioharbour at gmail.com  Mon Aug 20 03:06:41 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Aug 20 03:06:50 2007
Subject: [Harbour] CHANGELOG: 2007-08-20 04:03 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <01c7e2ce$Blat.v2.6.1$c7ad9732$d84dbbbe36@127.0.0.1>
References: <01c7e2ce$Blat.v2.6.1$c7ad9732$d84dbbbe36@127.0.0.1>
Message-ID: <1187593601.5820.38.camel@anto-desktop>

Viktor,

Could you please explain the exact syntax to commit to svn ? Thanks,

I have tried it in several ways with no success.

regards,

Antonio

From harbour.01 at syenar.hu  Mon Aug 20 04:58:00 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Aug 20 04:58:11 2007
Subject: [Harbour] CHANGELOG: 2007-08-20 04:03 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <1187593601.5820.38.camel@anto-desktop>
References: <01c7e2ce$Blat.v2.6.1$c7ad9732$d84dbbbe36@127.0.0.1>
	<1187593601.5820.38.camel@anto-desktop>
Message-ID: <CBA58108-971B-4370-8437-C7B2028B2A19@syenar.hu>

Hi Antonio, Fernando,

This is what I use (notice that it's best to commit the
whole sandbox, not just one file, if for nothing else,
but to commit the ChangeLog changes and the other changes
together):

svn commit --editor-cmd notepad.exe --username vszakats --password  
xxx --encoding latin2 -F ChangeLog_Last harbour

I issue this command one level upper than the harbour root folder
named "harbour", in order to commit every changes I've made to the
whole local repository (sandbox). This is the same folder I used
to checkout harbour from, using this command:
svn co https://harbour-project.svn.sourceforge.net/svnroot/harbour- 
project/trunk/harbour

See these original messages for similar info:
http://lists.harbour-project.org/pipermail/harbour/2007-June/002461.html
http://lists.harbour-project.org/pipermail/harbour/2007-June/002449.html

Brgds,
Viktor


On 2007.08.20., at 9:06, Antonio Linares wrote:

> Viktor,
>
> Could you please explain the exact syntax to commit to svn ? Thanks,
>
> I have tried it in several ways with no success.
>
> regards,
>
> Antonio
>

From antonioharbour at gmail.com  Mon Aug 20 05:00:54 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Aug 20 05:01:05 2007
Subject: [Harbour] CHANGELOG: 2007-08-20 04:03 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
In-Reply-To: <CBA58108-971B-4370-8437-C7B2028B2A19@syenar.hu>
References: <01c7e2ce$Blat.v2.6.1$c7ad9732$d84dbbbe36@127.0.0.1>
	<1187593601.5820.38.camel@anto-desktop>
	<CBA58108-971B-4370-8437-C7B2028B2A19@syenar.hu>
Message-ID: <1187600454.5802.0.camel@anto-desktop>

Viktor,

Thanks for the detailed explanation,

regards,

Antonio

> This is what I use (notice that it's best to commit the
> whole sandbox, not just one file, if for nothing else,
> but to commit the ChangeLog changes and the other changes
> together):
> 
> svn commit --editor-cmd notepad.exe --username vszakats --password  
> xxx --encoding latin2 -F ChangeLog_Last harbour
> 
> I issue this command one level upper than the harbour root folder
> named "harbour", in order to commit every changes I've made to the
> whole local repository (sandbox). This is the same folder I used
> to checkout harbour from, using this command:
> svn co https://harbour-project.svn.sourceforge.net/svnroot/harbour- 
> project/trunk/harbour
> 
> See these original messages for similar info:
> http://lists.harbour-project.org/pipermail/harbour/2007-June/002461.html
> http://lists.harbour-project.org/pipermail/harbour/2007-June/002449.html
> 
> Brgds,
> Viktor
> 
> 
> On 2007.08.20., at 9:06, Antonio Linares wrote:
> 
> > Viktor,
> >
> > Could you please explain the exact syntax to commit to svn ? Thanks,
> >
> > I have tried it in several ways with no success.
> >
> > regards,
> >
> > Antonio
> >
> 

From fmancera at viaopen.com  Mon Aug 20 09:05:29 2007
From: fmancera at viaopen.com (ViaOpen - Fernando Mancera)
Date: Mon Aug 20 09:05:34 2007
Subject: [Harbour] CHANGELOG: 2007-08-20 04:03 UTC+0100 Viktor
	Szakats(harbour.01 syenar.hu)
In-Reply-To: <CBA58108-971B-4370-8437-C7B2028B2A19@syenar.hu>
Message-ID: <mailman.5.1187615134.3664.harbour@harbour-project.org>

Viktor,

Thank you for your info :-)

Regards,

Fernando Mancera
www.viaopen.com

 

From druzus at priv.onet.pl  Mon Aug 20 09:51:11 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Aug 20 09:51:16 2007
Subject: [Harbour] ChangeLog 2007-08-20 15:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070820135111.GA13960@localhost.localdomain>

2007-08-20 15:25 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/fserror.c
    + added translation (errno=>dosError) for ENOSPC

best regards,
Przemek
From druzus at priv.onet.pl  Mon Aug 20 09:51:45 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Aug 20 09:51:51 2007
Subject: [Harbour] ChangeLog 2007-08-20 15:50 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070820135145.GB13960@localhost.localdomain>

2007-08-20 15:50 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbexprb.c
    * do not generate error for QSELF()[...] - Clipper allows such
      operation and because some valid Clipper code needs it then
      I disabled error message.

  * harbour/common.mak
  * harbour/source/rtl/Makefile
  + harbour/source/rtl/einstvar.prg
    + added undocumented CA-Cl*pper function _eInstVar() used to validate
      variable type in assign messages.

  * harbour/include/hbapi.h
  * harbour/source/vm/arrays.c
    * changed 'char *' to 'const char *' in hb_arraySetC() and hb_arraySetCL()

  * harbour/source/rdd/dbcmd.c
    * cleaned DBSKIPPER() code

  * harbour/source/rtl/browdb.prg
    * use written in C DBSKIPPER() function instead of static .prg Skipped()
      when HB_COMPAT_XPP macro is enabled

  * harbour/source/rtl/browse.prg
    ! fixes in BROWSE() function:
      ! displaying box characters
      + added CL53 compatible mouse actions
      + added mouse wheel actions
      + added support for deleting records (K_DEL)
      + added support for edit mode
      + added support for append mode

best regards,
Przemek
From druzus at priv.onet.pl  Mon Aug 20 10:14:00 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Aug 20 10:14:08 2007
Subject: [Harbour] ChangeLog(s) BETA branch
Message-ID: <20070820141400.GC13960@localhost.localdomain>

2007-08-14 15:35 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/doc/whatsnew.txt
    * reverted unnecessary synchronization

2007-08-14 15:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbextern.ch
  * harbour/source/rtl/cdpapi.c
    * synced with modifications in DEVEL branch

2007-08-14 02:47 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/libnf/makefile.bc
    * set SVN attributes

2007-08-14 02:32 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bldcmncf.sh
  * harbour/debian/control
  * harbour/debian/harbour.cfg
  * harbour/debian/dirs
  * harbour/debian/harbour.1
  * harbour/debian/compat
  * harbour/debian/hbmake.1
  * harbour/debian/changelog
  * harbour/debian/copyright
  * harbour/debian/hbpp.1
  * harbour/debian/hbtest.1
  * harbour/debian/rules
  * harbour/debian/hbrun.1
  * harbour/debian/hbdoc.1
  * harbour/make_deb.sh
  * harbour/make_gcc.sh
  * harbour/makefile.gc
  * harbour/doc/howtosvn.txt
  * harbour/contrib/libnf/makefile.bc
  * harbour/contrib/tip/thtml.ch
  * harbour/contrib/libct/ctdisk.ch
  * harbour/contrib/libct/ctvideo.ch
    * set some SVN attributes

2007-08-14 02:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  + harbour/bldcmncf.sh
  + harbour/debian
  + harbour/debian/control
  + harbour/debian/harbour.cfg
  + harbour/debian/dirs
  + harbour/debian/harbour.1
  + harbour/debian/compat
  + harbour/debian/hbmake.1
  + harbour/debian/changelog
  + harbour/debian/copyright
  + harbour/debian/hbpp.1
  + harbour/debian/hbtest.1
  + harbour/debian/rules
  + harbour/debian/hbrun.1
  + harbour/debian/hbdoc.1
  * harbour/makefile.vc
  * harbour/hbgtmk.sh
  * harbour/make_b32.bat
  + harbour/make_deb.sh
  + harbour/tests/foreach2.prg
  + harbour/tests/gtchars.prg
  + harbour/tests/gtcolors.prg
  + harbour/tests/gtkeys.prg
  - harbour/make_drw.sh
  + harbour/make_gcc.sh
  * harbour/make_rpm.sh
  + harbour/makefile.gc
  - harbour/doc/howtocvs.txt
  + harbour/doc/howtosvn.txt
  * harbour/doc/whatsnew.txt
  * harbour/bin/hb-mkslib.sh
  * harbour/bin/bld.sh
  * harbour/bin/hb-func.sh
  * harbour/bin/postinst.sh
  * harbour/bin/pack_src.sh
  * harbour/make_vc.bat
  - harbour/make_bsd.sh
  * harbour/make_xmingw.sh
  * harbour/include/hbgtinfo.ch
  * harbour/include/hbcomp.h
  * harbour/include/hbapicdp.h
  * harbour/include/hbapirdd.h
  * harbour/include/hbfixdj.h
  * harbour/include/hbcompdf.h
  * harbour/include/hbclass.ch
  * harbour/include/hbgtcore.h
  * harbour/include/hbapifs.h
  * harbour/include/hb_io.h
  * harbour/include/hbcompat.ch
  * harbour/include/hbextern.ch
  * harbour/include/hbapi.h
  * harbour/include/hbapicls.h
  * harbour/include/hberrors.h
  * harbour/include/hbpers.ch
  * harbour/include/hbapiitm.h
  * harbour/include/hbexprb.c
  * harbour/harbour.spec
  * harbour/common.mak
  * harbour/contrib/libnf/make_b32.bat
  * harbour/contrib/libnf/prtscr.c
  + harbour/contrib/libnf/ftshadow.c
  * harbour/contrib/libnf/proper.c
  + harbour/contrib/libnf/fttext.c
  * harbour/contrib/libnf/at2.prg
  * harbour/contrib/libnf/dispc.c
  * harbour/contrib/libnf/makefile.vc
  * harbour/contrib/libnf/min2dhm.prg
  * harbour/contrib/libnf/numlock.c
  * harbour/contrib/libnf/ontick.c
  * harbour/contrib/libnf/sqzn.prg
  * harbour/contrib/libnf/bytexor.prg
  * harbour/contrib/libnf/asum.prg
  * harbour/contrib/libnf/shift.c
  * harbour/contrib/libnf/sleep.prg
  * harbour/contrib/libnf/any2any.prg
  * harbour/contrib/libnf/origin.c
  * harbour/contrib/libnf/mouse.c
  * harbour/contrib/libnf/stod.c
  * harbour/contrib/libnf/vertmenu.prg
  * harbour/contrib/libnf/aredit.prg
  * harbour/contrib/libnf/n2color.c
  * harbour/contrib/libnf/alt.c
  - harbour/contrib/libnf/nanfor.bc
  * harbour/contrib/libnf/xbox.prg
  * harbour/contrib/libnf/hex2dec.prg
  * harbour/contrib/libnf/getver.c
  * harbour/contrib/libnf/Makefile
  * harbour/contrib/libnf/invclr.prg
  * harbour/contrib/libnf/ctrl.c
  * harbour/contrib/libnf/popadder.prg
  + harbour/contrib/libnf/makefile.bc
  * harbour/contrib/libnf/d2e.prg
  * harbour/contrib/libnf/anomatch.prg
  * harbour/contrib/libnf/ftattr.c
  * harbour/contrib/libnf/color2n.c
  + harbour/contrib/libnf/putkey.c
  * harbour/contrib/libnf/datecnfg.prg
  * harbour/contrib/libnf/getenvrn.c
  * harbour/contrib/libnf/easter.prg
  * harbour/contrib/libnf/ntow.prg
  * harbour/contrib/libnf/floptst.prg
  * harbour/contrib/libnf/pchr.prg
  * harbour/contrib/libnf/tbwhile.prg
  * harbour/contrib/libnf/caplock.c
  * harbour/contrib/libnf/e2d.prg
  * harbour/contrib/libnf/sysmem.prg
  * harbour/contrib/libnf/dfile.prg
  * harbour/contrib/libnf/clrsel.prg
  + harbour/contrib/tip/thtml.prg
  + harbour/contrib/tip/thtml.ch
  * harbour/contrib/tip/utils.c
  * harbour/contrib/tip/popcln.prg
  * harbour/contrib/tip/Changelog
  * harbour/contrib/tip/url.prg
  * harbour/contrib/tip/cgi.prg
  * harbour/contrib/tip/makefile.bc
  - harbour/contrib/tip/cstr.prg
  * harbour/contrib/tip/encmthd.c
  * harbour/contrib/tip/httpcln.prg
  * harbour/contrib/tip/client.prg
  * harbour/contrib/tip/encoder.prg
  * harbour/contrib/tip/smtpcln.prg
  * harbour/contrib/tip/mail.prg
  * harbour/contrib/tip/ftpcln.prg
  * harbour/contrib/tip/Makefile
  * harbour/contrib/libct/bitnum.c
  + harbour/contrib/libct/screen2.c
  * harbour/contrib/libct/strdiff.c
  * harbour/contrib/libct/token2.c
  + harbour/contrib/libct/charsprd.c
  * harbour/contrib/libct/charlist.c
  + harbour/contrib/libct/dbftools.c
  * harbour/contrib/libct/ctnet.c
  - harbour/contrib/libct/dattime2.prg
  * harbour/contrib/libct/charonly.c
  * harbour/contrib/libct/atadjust.c
  * harbour/contrib/libct/ctmath.c
  * harbour/contrib/libct/ctset.c
  * harbour/contrib/libct/ctwin.c
  - harbour/contrib/libct/color.prg
  * harbour/contrib/libct/charsort.c
  * harbour/contrib/libct/ctmath.h
  + harbour/contrib/libct/getsecrt.prg
  * harbour/contrib/libct/ctset.h
  * harbour/contrib/libct/cterror.ch
  + harbour/contrib/libct/ctdisk.ch
  + harbour/contrib/libct/keysec.prg
  * harbour/contrib/libct/ftoc.c
  * harbour/contrib/libct/charmix.c
  * harbour/contrib/libct/charevod.c
  * harbour/contrib/libct/Makefile
  + harbour/contrib/libct/maxline.c
  * harbour/contrib/libct/wordrepl.c
  * harbour/contrib/libct/exponent.c
  * harbour/contrib/libct/charrepl.c
  * harbour/contrib/libct/files.c
  * harbour/contrib/libct/strswap.c
  * harbour/contrib/libct/trig.c
  + harbour/contrib/libct/getinput.prg
  + harbour/contrib/libct/video.c
  - harbour/contrib/libct/screen2.prg
  * harbour/contrib/libct/charswap.c
  + harbour/contrib/libct/screen3.prg
  + harbour/contrib/libct/dattime3.c
  * harbour/contrib/libct/charop.c
  * harbour/contrib/libct/ct.prg
  + harbour/contrib/libct/lton.c
  + harbour/contrib/libct/misc2.c
  + harbour/contrib/libct/cursor.c
  + harbour/contrib/libct/keytime.prg
  * harbour/contrib/libct/ct.ch
  + harbour/contrib/libct/color.c
  * harbour/contrib/libct/makefile.bc
  * harbour/contrib/libct/charone.c
  * harbour/contrib/libct/num1.c
  * harbour/contrib/libct/ctchksum.c
  * harbour/contrib/libct/pos1.c
  * harbour/contrib/libct/ascpos.c
  + harbour/contrib/libct/cttime.prg
  * harbour/contrib/libct/numconv.prg
  * harbour/contrib/libct/ctstr.c
  * harbour/contrib/libct/screen1.c
  * harbour/contrib/libct/token1.c
  * harbour/contrib/libct/makefile.vc
  * harbour/contrib/libct/keyset.c
  * harbour/contrib/libct/ctstr.h
  + harbour/contrib/libct/ctvideo.ch
  + harbour/contrib/libct/showtime.prg
  * harbour/contrib/libct/charmirr.c
  + harbour/contrib/libct/numcount.c
  * harbour/contrib/libct/ctc.c
  * harbour/contrib/libct/ctwfunc.c
  * harbour/contrib/libct/ct.h
  * harbour/contrib/libct/relation.c
  + harbour/contrib/libct/pack.c
  + harbour/contrib/libct/setlast.c
  * harbour/contrib/libct/atnum.c
  + harbour/contrib/libct/like.c
  * harbour/contrib/libct/count.c
  * harbour/contrib/libct/ctmisc.prg
  * harbour/contrib/libct/ctcrypt.c
  * harbour/contrib/libct/posdiff.c
  + harbour/contrib/libct/disk.c
  + harbour/contrib/libct/ctstrfil.c
  * harbour/contrib/libct/finan.c
  * harbour/contrib/libct/range.c
  + harbour/contrib/libct/ctstrfil.h
  * harbour/contrib/libct/addascii.c
  + harbour/contrib/libct/getinfo.prg
  - harbour/contrib/libct/datetime.prg
  * harbour/contrib/libct/ctmath2.c
  - harbour/contrib/libct/pad.c
  * harbour/contrib/libct/ctextern.ch
  * harbour/contrib/libct/tab.c
  + harbour/contrib/libct/numline.c
  + harbour/contrib/libct/scrmark.prg
  + harbour/contrib/libct/dattime2.c
  * harbour/contrib/libct/replace.c
  * harbour/contrib/libct/misc1.c
  * harbour/contrib/libct/asciisum.c
  + harbour/contrib/libct/keysave.prg
  + harbour/contrib/libct/misc3.c
  + harbour/contrib/libct/expand.c
  * harbour/contrib/libct/pos2.c
  * harbour/contrib/libct/numat.c
  - harbour/contrib/libct/setlast.prg
  - harbour/contrib/libct/invrtwin.prg
  + harbour/contrib/libct/fcopy.prg
  * harbour/contrib/libct/atrepl.c
  * harbour/contrib/libct/wordtoch.c
  + harbour/contrib/libct/ctpad.c
  * harbour/contrib/libct/print.c
  + harbour/contrib/libct/datetime.c
  * harbour/contrib/libct/justify.c
  * harbour/contrib/libct/remove.c
  + harbour/contrib/libct/blank.prg
  * harbour/contrib/ole2/w32ole.c
  * harbour/contrib/mysql/tmysql.prg
  * harbour/contrib/mysql/mysql.c
  * harbour/source/pp/ppcore.c
  * harbour/source/macro/macro.yyc
  * harbour/source/macro/macro.y
  * harbour/source/macro/macrolex.c
  * harbour/source/rtl/gtdos/gtdos.c
  * harbour/source/rtl/strcase.c
  * harbour/source/rtl/gtwin/gtwin.c
  * harbour/source/rtl/gtxwc/gtxwc.h
  * harbour/source/rtl/gtxwc/gtxwc.c
  * harbour/source/rtl/right.c
  * harbour/source/rtl/hbgtcore.c
  * harbour/source/rtl/cdpapi.c
  * harbour/source/rtl/gtcrs/hb-charmap.def
  * harbour/source/rtl/gtcrs/gtcrs.c
  * harbour/source/rtl/gtcrs/gtcrs.h
  - harbour/source/rtl/gtcrs/chrmap.c
  * harbour/source/rtl/gtcrs/Makefile
  * harbour/source/rtl/dateshb.c
  * harbour/source/rtl/gtfunc.c
  * harbour/source/rtl/scrollbr.prg
  * harbour/source/rtl/datesx.c
  * harbour/source/rtl/left.c
  + harbour/source/rtl/gtchrmap.c
  * harbour/source/rtl/is.c
  * harbour/source/rtl/errorapi.c
  * harbour/source/rtl/gtstd/gtstd.c
  * harbour/source/rtl/gtsln/gtsln.c
  * harbour/source/rtl/gtsln/gtsln.h
  + harbour/source/rtl/gttrm
  + harbour/source/rtl/gttrm/Makefile
  + harbour/source/rtl/gttrm/gttrm.c
  * harbour/source/rtl/gtpca/gtpca.c
  * harbour/source/rtl/listbox.prg
  + harbour/source/rtl/hbhex.c
  * harbour/source/rtl/seconds.c
  * harbour/source/rtl/gtgui/gtgui.c
  * harbour/source/rtl/gttone.c
  * harbour/source/rtl/Makefile
  * harbour/source/rtl/gtcgi/gtcgi.c
  * harbour/source/rtl/gtwvt/gtwvt.c
  * harbour/source/rtl/gtapi.c
  * harbour/source/rtl/file.c
  + harbour/source/rtl/gtkbstat.c
  + harbour/source/rtl/hbbit.c
  * harbour/source/vm/hashfunc.c
  * harbour/source/vm/hvm.c
  * harbour/source/vm/maindllp.c
  * harbour/source/vm/memvars.c
  * harbour/source/vm/arrayshb.c
  * harbour/source/vm/dynlibhb.c
  * harbour/source/vm/classes.c
  * harbour/source/debug/dbgentry.c
  + harbour/source/codepage/cpsv850.c
  * harbour/source/codepage/Makefile
  + harbour/source/codepage/cpsk852.c
  * harbour/source/codepage/uckam.c
  + harbour/source/codepage/ucmik.c
  + harbour/source/codepage/cpbgmik.c
  + harbour/source/codepage/cpsvwin.c
  + harbour/source/codepage/cpskiso.c
  + harbour/source/codepage/cpskwin.c
  + harbour/source/codepage/cpsvclip.c
  + harbour/source/codepage/cpskkam.c
  * harbour/source/common/reserved.c
  * harbour/source/common/expropt1.c
  * harbour/source/common/hbdate.c
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
  * harbour/source/rdd/delim1.c
  * harbour/source/rdd/dbf1.c
  * harbour/source/rdd/hbsix/sxcompr.c
  * harbour/source/rdd/sdf1.c
  * harbour/source/compiler/hbmain.c
  * harbour/source/compiler/cmdcheck.c
  * harbour/source/compiler/harbour.yyc
  * harbour/source/compiler/harbour.y
  * harbour/source/compiler/harbour.yyh
  * harbour/source/compiler/gencobj.c
  * harbour/source/compiler/hbopt.c
  * harbour/source/compiler/hbusage.c
  * harbour/source/compiler/hbgenerr.c
  * harbour/makefile.bc
  * harbour/config/hpux/global.cf
  * harbour/config/darwin/global.cf
  * harbour/config/linux/global.cf
  * harbour/config/sunos/global.cf
  * harbour/config/bsd/global.cf
  + harbour/config/w32/owatcom.cf
  * harbour/config/w32/watcom.cf
  * harbour/make_tgz.sh
    * synced with modifications in DEVEL branch


Victor please inform me when your modifications in GET class code
will be finished so I'll sync them too.
I've just made some test with Clipper and also our ERROR class
should be fixed to be Clipper compatible. Below I'm attaching
code which simulates Clipper error class behavior though it uses
different internal error object structure. This is .prg version
but I also have .c one. Personally I think that we should make
an exception for error object and fully define it at .c level
because now it's impossible to create new error object when we
have pending HVM exception set. Also working on classy code is
much harder because errors in TCLASS code are not reported and
we have only recursive RT errors calls and then internal error.
If we'll move error class code to .c level then then we will not
have such problems and we can make creating and updating error
object much faster. Now due to speed overhead I had to drop some
exact Clipper compatibility in few places where error object
should be created using some workarounds. If you do not like
this idea then please inform me about it ASAP.

best regards,
Przemek




/* ERROR CLASS */
#include "common.ch"
#include "hboo.ch"

#define HB_TERROR_ARGS        01
#define HB_TERROR_CANDEFAULT  02
#define HB_TERROR_CANRETRY    03
#define HB_TERROR_CANSUBST    04
#define HB_TERROR_CARGO       05
#define HB_TERROR_DESCRIPTION 06
#define HB_TERROR_FILENAME    07
#define HB_TERROR_GENCODE     08
#define HB_TERROR_OPERATION   09
#define HB_TERROR_OSCODE      10
#define HB_TERROR_SEVERITY    11
#define HB_TERROR_SUBCODE     12
#define HB_TERROR_SUBSYSTEM   13
#define HB_TERROR_TRIES       14

#define HB_TERROR_IVARCOUNT   14


STATIC FUNCTION ARGS()
   RETURN QSELF()[ HB_TERROR_ARGS ]

STATIC FUNCTION _ARGS( args )
   IF VALTYPE( args ) $ "AO"
      QSELF()[ HB_TERROR_ARGS ] := args
   ENDIF
   RETURN args


STATIC FUNCTION CANDEFAULT()
   RETURN QSELF()[ HB_TERROR_CANDEFAULT ]

STATIC FUNCTION _CANDEFAULT( can )
   IF ISLOGICAL( can )
      RETURN QSELF()[ HB_TERROR_CANDEFAULT ] := can
   ENDIF
   RETURN NIL


STATIC FUNCTION CANRETRY()
   RETURN QSELF()[ HB_TERROR_CANRETRY ]

STATIC FUNCTION _CANRETRY( can )
   IF ISLOGICAL( can )
      RETURN QSELF()[ HB_TERROR_CANRETRY ] := can
   ENDIF
   RETURN NIL


STATIC FUNCTION CANSUBST()
   RETURN QSELF()[ HB_TERROR_CANSUBST ]

STATIC FUNCTION _CANSUBST( can )
   IF ISLOGICAL( can )
      RETURN QSELF()[ HB_TERROR_CANSUBST ] := can
   ENDIF
   RETURN NIL


STATIC FUNCTION CARGO()
   RETURN QSELF()[ HB_TERROR_CARGO ]

STATIC FUNCTION _CARGO( cargo )
   RETURN QSELF()[ HB_TERROR_CARGO ] := cargo


STATIC FUNCTION DESCRIPTION()
   RETURN QSELF()[ HB_TERROR_DESCRIPTION ]

STATIC FUNCTION _DESCRIPTION( descript )
   IF ISCHARACTER( descript )
      QSELF()[ HB_TERROR_DESCRIPTION ] := descript
   ENDIF
   RETURN descript


STATIC FUNCTION FILENAME()
   RETURN QSELF()[ HB_TERROR_FILENAME ]

STATIC FUNCTION _FILENAME( fname )
   IF ISCHARACTER( fname )
      QSELF()[ HB_TERROR_FILENAME ] := fname
   ENDIF
   RETURN fname


STATIC FUNCTION OPERATION()
   RETURN QSELF()[ HB_TERROR_OPERATION ]

STATIC FUNCTION _OPERATION( oper )
   IF ISCHARACTER( oper )
      QSELF()[ HB_TERROR_OPERATION ] := oper
   ENDIF
   RETURN oper


STATIC FUNCTION SUBSYSTEM()
   RETURN QSELF()[ HB_TERROR_SUBSYSTEM ]

STATIC FUNCTION _SUBSYSTEM( subsys )
   IF ISCHARACTER( subsys )
      QSELF()[ HB_TERROR_SUBSYSTEM ] := subsys
   ENDIF
   RETURN subsys


STATIC FUNCTION GENCODE()
   RETURN QSELF()[ HB_TERROR_GENCODE ]

STATIC FUNCTION _GENCODE( code )
   IF !ISNUMBER( code )
      code := _eInstVar( QSELF(), "GENCODE", code, "N", 1001 )
   ENDIF
   QSELF()[ HB_TERROR_DESCRIPTION ] := ;
                  HB_LANGERRMSG( QSELF()[ HB_TERROR_GENCODE ] := INT( code ) )
   RETURN code


STATIC FUNCTION OSCODE()
   RETURN QSELF()[ HB_TERROR_OSCODE ]

STATIC FUNCTION _OSCODE( code )
   IF !ISNUMBER( code )
      code := _eInstVar( QSELF(), "OSCODE", code, "N", 1001 )
   ENDIF
   QSELF()[ HB_TERROR_OSCODE ] := INT( code )
   RETURN code


STATIC FUNCTION SUBCODE()
   RETURN QSELF()[ HB_TERROR_SUBCODE ]

STATIC FUNCTION _SUBCODE( code )
   IF !ISNUMBER( code )
      code := _eInstVar( QSELF(), "SUBCODE", code, "N", 1001 )
   ENDIF
   QSELF()[ HB_TERROR_SUBCODE ] := INT( code )
   RETURN code


STATIC FUNCTION SEVERITY()
   RETURN QSELF()[ HB_TERROR_SEVERITY ]

STATIC FUNCTION _SEVERITY( code )
   IF !ISNUMBER( code )
      code := _eInstVar( QSELF(), "SEVERITY", code, "N", 1001 )
   ENDIF
   QSELF()[ HB_TERROR_SEVERITY ] := INT( code )
   RETURN code


STATIC FUNCTION TRIES()
   RETURN QSELF()[ HB_TERROR_TRIES ]

STATIC FUNCTION _TRIES( code )
   IF !ISNUMBER( code )
      code := _eInstVar( QSELF(), "TRIES", code, "N", 1001 )
   ENDIF
   QSELF()[ HB_TERROR_TRIES ] := INT( code )
   RETURN code


STATIC FUNCTION ErrClassNew()
   LOCAL hClass
   hClass := __clsNew( "ERROR", HB_TERROR_IVARCOUNT,, @ErrorNew() )
   __clsAddMsg( hClass, "ARGS"          , @ARGS()        , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "_ARGS"         , @_ARGS()       , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "CANDEFAULT"    , @CANDEFAULT()  , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "_CANDEFAULT"   , @_CANDEFAULT() , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "CANRETRY"      , @CANRETRY()    , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "_CANRETRY"     , @_CANRETRY()   , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "CANSUBSTITUTE" , @CANSUBST()    , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "_CANSUBSTITUTE", @_CANSUBST()   , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "CARGO"         , @CARGO()       , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "_CARGO"        , @_CARGO()      , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "DESCRIPTION"   , @DESCRIPTION() , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "_DESCRIPTION"  , @_DESCRIPTION(), HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "FILENAME"      , @FILENAME()    , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "_FILENAME"     , @_FILENAME()   , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "GENCODE"       , @GENCODE()     , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "_GENCODE"      , @_GENCODE()    , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "OPERATION"     , @OPERATION()   , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "_OPERATION"    , @_OPERATION()  , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "OSCODE"        , @OSCODE()      , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "_OSCODE"       , @_OSCODE()     , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "SEVERITY"      , @SEVERITY()    , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "_SEVERITY"     , @_SEVERITY()   , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "SUBCODE"       , @SUBCODE()     , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "_SUBCODE"      , @_SUBCODE()    , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "SUBSYSTEM"     , @SUBSYSTEM()   , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "_SUBSYSTEM"    , @_SUBSYSTEM()  , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "TRIES"         , @TRIES()       , HB_OO_MSG_METHOD )
   __clsAddMsg( hClass, "_TRIES"        , @_TRIES()      , HB_OO_MSG_METHOD )
   RETURN hClass

FUNCTION ErrorNew()
   STATIC s_oError
   IF s_oError == NIL
      s_oError := __clsInst( ErrClassNew() )
      s_oError[ HB_TERROR_ARGS        ] := NIL
      s_oError[ HB_TERROR_CANDEFAULT  ] := .F.
      s_oError[ HB_TERROR_CANRETRY    ] := .F.
      s_oError[ HB_TERROR_CANSUBST    ] := .F.
      s_oError[ HB_TERROR_CARGO       ] := NIL
      s_oError[ HB_TERROR_DESCRIPTION ] := ""
      s_oError[ HB_TERROR_FILENAME    ] := ""
      s_oError[ HB_TERROR_GENCODE     ] := 0
      s_oError[ HB_TERROR_OPERATION   ] := ""
      s_oError[ HB_TERROR_OSCODE      ] := 0
      s_oError[ HB_TERROR_SEVERITY    ] := 0
      s_oError[ HB_TERROR_SUBCODE     ] := 0
      s_oError[ HB_TERROR_SUBSYSTEM   ] := ""
      s_oError[ HB_TERROR_TRIES       ] := 0
   ENDIF
   RETURN __objClone( s_oError )

From harbour.01 at syenar.hu  Mon Aug 20 10:41:39 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Aug 20 10:41:50 2007
Subject: [Harbour] ChangeLog(s) BETA branch
In-Reply-To: <20070820141400.GC13960@localhost.localdomain>
References: <20070820141400.GC13960@localhost.localdomain>
Message-ID: <3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>

Hi Przemek,

I don't see a problem to move the whole Error class to C
(it's almost in C right now anyway). What are the remaining
incompatible parts you mention?

I'm still fiddling with TGET, I'll let you know when it's
ready. Probably tomorrow.

Brgds,
Viktor

On 2007.08.20., at 16:14, Przemyslaw Czerpak wrote:

> 2007-08-14 15:35 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/doc/whatsnew.txt
>     * reverted unnecessary synchronization
>
> 2007-08-14 15:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/include/hbextern.ch
>   * harbour/source/rtl/cdpapi.c
>     * synced with modifications in DEVEL branch
>
> 2007-08-14 02:47 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/contrib/libnf/makefile.bc
>     * set SVN attributes
>
> 2007-08-14 02:32 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/bldcmncf.sh
>   * harbour/debian/control
>   * harbour/debian/harbour.cfg
>   * harbour/debian/dirs
>   * harbour/debian/harbour.1
>   * harbour/debian/compat
>   * harbour/debian/hbmake.1
>   * harbour/debian/changelog
>   * harbour/debian/copyright
>   * harbour/debian/hbpp.1
>   * harbour/debian/hbtest.1
>   * harbour/debian/rules
>   * harbour/debian/hbrun.1
>   * harbour/debian/hbdoc.1
>   * harbour/make_deb.sh
>   * harbour/make_gcc.sh
>   * harbour/makefile.gc
>   * harbour/doc/howtosvn.txt
>   * harbour/contrib/libnf/makefile.bc
>   * harbour/contrib/tip/thtml.ch
>   * harbour/contrib/libct/ctdisk.ch
>   * harbour/contrib/libct/ctvideo.ch
>     * set some SVN attributes
>
> 2007-08-14 02:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   + harbour/bldcmncf.sh
>   + harbour/debian
>   + harbour/debian/control
>   + harbour/debian/harbour.cfg
>   + harbour/debian/dirs
>   + harbour/debian/harbour.1
>   + harbour/debian/compat
>   + harbour/debian/hbmake.1
>   + harbour/debian/changelog
>   + harbour/debian/copyright
>   + harbour/debian/hbpp.1
>   + harbour/debian/hbtest.1
>   + harbour/debian/rules
>   + harbour/debian/hbrun.1
>   + harbour/debian/hbdoc.1
>   * harbour/makefile.vc
>   * harbour/hbgtmk.sh
>   * harbour/make_b32.bat
>   + harbour/make_deb.sh
>   + harbour/tests/foreach2.prg
>   + harbour/tests/gtchars.prg
>   + harbour/tests/gtcolors.prg
>   + harbour/tests/gtkeys.prg
>   - harbour/make_drw.sh
>   + harbour/make_gcc.sh
>   * harbour/make_rpm.sh
>   + harbour/makefile.gc
>   - harbour/doc/howtocvs.txt
>   + harbour/doc/howtosvn.txt
>   * harbour/doc/whatsnew.txt
>   * harbour/bin/hb-mkslib.sh
>   * harbour/bin/bld.sh
>   * harbour/bin/hb-func.sh
>   * harbour/bin/postinst.sh
>   * harbour/bin/pack_src.sh
>   * harbour/make_vc.bat
>   - harbour/make_bsd.sh
>   * harbour/make_xmingw.sh
>   * harbour/include/hbgtinfo.ch
>   * harbour/include/hbcomp.h
>   * harbour/include/hbapicdp.h
>   * harbour/include/hbapirdd.h
>   * harbour/include/hbfixdj.h
>   * harbour/include/hbcompdf.h
>   * harbour/include/hbclass.ch
>   * harbour/include/hbgtcore.h
>   * harbour/include/hbapifs.h
>   * harbour/include/hb_io.h
>   * harbour/include/hbcompat.ch
>   * harbour/include/hbextern.ch
>   * harbour/include/hbapi.h
>   * harbour/include/hbapicls.h
>   * harbour/include/hberrors.h
>   * harbour/include/hbpers.ch
>   * harbour/include/hbapiitm.h
>   * harbour/include/hbexprb.c
>   * harbour/harbour.spec
>   * harbour/common.mak
>   * harbour/contrib/libnf/make_b32.bat
>   * harbour/contrib/libnf/prtscr.c
>   + harbour/contrib/libnf/ftshadow.c
>   * harbour/contrib/libnf/proper.c
>   + harbour/contrib/libnf/fttext.c
>   * harbour/contrib/libnf/at2.prg
>   * harbour/contrib/libnf/dispc.c
>   * harbour/contrib/libnf/makefile.vc
>   * harbour/contrib/libnf/min2dhm.prg
>   * harbour/contrib/libnf/numlock.c
>   * harbour/contrib/libnf/ontick.c
>   * harbour/contrib/libnf/sqzn.prg
>   * harbour/contrib/libnf/bytexor.prg
>   * harbour/contrib/libnf/asum.prg
>   * harbour/contrib/libnf/shift.c
>   * harbour/contrib/libnf/sleep.prg
>   * harbour/contrib/libnf/any2any.prg
>   * harbour/contrib/libnf/origin.c
>   * harbour/contrib/libnf/mouse.c
>   * harbour/contrib/libnf/stod.c
>   * harbour/contrib/libnf/vertmenu.prg
>   * harbour/contrib/libnf/aredit.prg
>   * harbour/contrib/libnf/n2color.c
>   * harbour/contrib/libnf/alt.c
>   - harbour/contrib/libnf/nanfor.bc
>   * harbour/contrib/libnf/xbox.prg
>   * harbour/contrib/libnf/hex2dec.prg
>   * harbour/contrib/libnf/getver.c
>   * harbour/contrib/libnf/Makefile
>   * harbour/contrib/libnf/invclr.prg
>   * harbour/contrib/libnf/ctrl.c
>   * harbour/contrib/libnf/popadder.prg
>   + harbour/contrib/libnf/makefile.bc
>   * harbour/contrib/libnf/d2e.prg
>   * harbour/contrib/libnf/anomatch.prg
>   * harbour/contrib/libnf/ftattr.c
>   * harbour/contrib/libnf/color2n.c
>   + harbour/contrib/libnf/putkey.c
>   * harbour/contrib/libnf/datecnfg.prg
>   * harbour/contrib/libnf/getenvrn.c
>   * harbour/contrib/libnf/easter.prg
>   * harbour/contrib/libnf/ntow.prg
>   * harbour/contrib/libnf/floptst.prg
>   * harbour/contrib/libnf/pchr.prg
>   * harbour/contrib/libnf/tbwhile.prg
>   * harbour/contrib/libnf/caplock.c
>   * harbour/contrib/libnf/e2d.prg
>   * harbour/contrib/libnf/sysmem.prg
>   * harbour/contrib/libnf/dfile.prg
>   * harbour/contrib/libnf/clrsel.prg
>   + harbour/contrib/tip/thtml.prg
>   + harbour/contrib/tip/thtml.ch
>   * harbour/contrib/tip/utils.c
>   * harbour/contrib/tip/popcln.prg
>   * harbour/contrib/tip/Changelog
>   * harbour/contrib/tip/url.prg
>   * harbour/contrib/tip/cgi.prg
>   * harbour/contrib/tip/makefile.bc
>   - harbour/contrib/tip/cstr.prg
>   * harbour/contrib/tip/encmthd.c
>   * harbour/contrib/tip/httpcln.prg
>   * harbour/contrib/tip/client.prg
>   * harbour/contrib/tip/encoder.prg
>   * harbour/contrib/tip/smtpcln.prg
>   * harbour/contrib/tip/mail.prg
>   * harbour/contrib/tip/ftpcln.prg
>   * harbour/contrib/tip/Makefile
>   * harbour/contrib/libct/bitnum.c
>   + harbour/contrib/libct/screen2.c
>   * harbour/contrib/libct/strdiff.c
>   * harbour/contrib/libct/token2.c
>   + harbour/contrib/libct/charsprd.c
>   * harbour/contrib/libct/charlist.c
>   + harbour/contrib/libct/dbftools.c
>   * harbour/contrib/libct/ctnet.c
>   - harbour/contrib/libct/dattime2.prg
>   * harbour/contrib/libct/charonly.c
>   * harbour/contrib/libct/atadjust.c
>   * harbour/contrib/libct/ctmath.c
>   * harbour/contrib/libct/ctset.c
>   * harbour/contrib/libct/ctwin.c
>   - harbour/contrib/libct/color.prg
>   * harbour/contrib/libct/charsort.c
>   * harbour/contrib/libct/ctmath.h
>   + harbour/contrib/libct/getsecrt.prg
>   * harbour/contrib/libct/ctset.h
>   * harbour/contrib/libct/cterror.ch
>   + harbour/contrib/libct/ctdisk.ch
>   + harbour/contrib/libct/keysec.prg
>   * harbour/contrib/libct/ftoc.c
>   * harbour/contrib/libct/charmix.c
>   * harbour/contrib/libct/charevod.c
>   * harbour/contrib/libct/Makefile
>   + harbour/contrib/libct/maxline.c
>   * harbour/contrib/libct/wordrepl.c
>   * harbour/contrib/libct/exponent.c
>   * harbour/contrib/libct/charrepl.c
>   * harbour/contrib/libct/files.c
>   * harbour/contrib/libct/strswap.c
>   * harbour/contrib/libct/trig.c
>   + harbour/contrib/libct/getinput.prg
>   + harbour/contrib/libct/video.c
>   - harbour/contrib/libct/screen2.prg
>   * harbour/contrib/libct/charswap.c
>   + harbour/contrib/libct/screen3.prg
>   + harbour/contrib/libct/dattime3.c
>   * harbour/contrib/libct/charop.c
>   * harbour/contrib/libct/ct.prg
>   + harbour/contrib/libct/lton.c
>   + harbour/contrib/libct/misc2.c
>   + harbour/contrib/libct/cursor.c
>   + harbour/contrib/libct/keytime.prg
>   * harbour/contrib/libct/ct.ch
>   + harbour/contrib/libct/color.c
>   * harbour/contrib/libct/makefile.bc
>   * harbour/contrib/libct/charone.c
>   * harbour/contrib/libct/num1.c
>   * harbour/contrib/libct/ctchksum.c
>   * harbour/contrib/libct/pos1.c
>   * harbour/contrib/libct/ascpos.c
>   + harbour/contrib/libct/cttime.prg
>   * harbour/contrib/libct/numconv.prg
>   * harbour/contrib/libct/ctstr.c
>   * harbour/contrib/libct/screen1.c
>   * harbour/contrib/libct/token1.c
>   * harbour/contrib/libct/makefile.vc
>   * harbour/contrib/libct/keyset.c
>   * harbour/contrib/libct/ctstr.h
>   + harbour/contrib/libct/ctvideo.ch
>   + harbour/contrib/libct/showtime.prg
>   * harbour/contrib/libct/charmirr.c
>   + harbour/contrib/libct/numcount.c
>   * harbour/contrib/libct/ctc.c
>   * harbour/contrib/libct/ctwfunc.c
>   * harbour/contrib/libct/ct.h
>   * harbour/contrib/libct/relation.c
>   + harbour/contrib/libct/pack.c
>   + harbour/contrib/libct/setlast.c
>   * harbour/contrib/libct/atnum.c
>   + harbour/contrib/libct/like.c
>   * harbour/contrib/libct/count.c
>   * harbour/contrib/libct/ctmisc.prg
>   * harbour/contrib/libct/ctcrypt.c
>   * harbour/contrib/libct/posdiff.c
>   + harbour/contrib/libct/disk.c
>   + harbour/contrib/libct/ctstrfil.c
>   * harbour/contrib/libct/finan.c
>   * harbour/contrib/libct/range.c
>   + harbour/contrib/libct/ctstrfil.h
>   * harbour/contrib/libct/addascii.c
>   + harbour/contrib/libct/getinfo.prg
>   - harbour/contrib/libct/datetime.prg
>   * harbour/contrib/libct/ctmath2.c
>   - harbour/contrib/libct/pad.c
>   * harbour/contrib/libct/ctextern.ch
>   * harbour/contrib/libct/tab.c
>   + harbour/contrib/libct/numline.c
>   + harbour/contrib/libct/scrmark.prg
>   + harbour/contrib/libct/dattime2.c
>   * harbour/contrib/libct/replace.c
>   * harbour/contrib/libct/misc1.c
>   * harbour/contrib/libct/asciisum.c
>   + harbour/contrib/libct/keysave.prg
>   + harbour/contrib/libct/misc3.c
>   + harbour/contrib/libct/expand.c
>   * harbour/contrib/libct/pos2.c
>   * harbour/contrib/libct/numat.c
>   - harbour/contrib/libct/setlast.prg
>   - harbour/contrib/libct/invrtwin.prg
>   + harbour/contrib/libct/fcopy.prg
>   * harbour/contrib/libct/atrepl.c
>   * harbour/contrib/libct/wordtoch.c
>   + harbour/contrib/libct/ctpad.c
>   * harbour/contrib/libct/print.c
>   + harbour/contrib/libct/datetime.c
>   * harbour/contrib/libct/justify.c
>   * harbour/contrib/libct/remove.c
>   + harbour/contrib/libct/blank.prg
>   * harbour/contrib/ole2/w32ole.c
>   * harbour/contrib/mysql/tmysql.prg
>   * harbour/contrib/mysql/mysql.c
>   * harbour/source/pp/ppcore.c
>   * harbour/source/macro/macro.yyc
>   * harbour/source/macro/macro.y
>   * harbour/source/macro/macrolex.c
>   * harbour/source/rtl/gtdos/gtdos.c
>   * harbour/source/rtl/strcase.c
>   * harbour/source/rtl/gtwin/gtwin.c
>   * harbour/source/rtl/gtxwc/gtxwc.h
>   * harbour/source/rtl/gtxwc/gtxwc.c
>   * harbour/source/rtl/right.c
>   * harbour/source/rtl/hbgtcore.c
>   * harbour/source/rtl/cdpapi.c
>   * harbour/source/rtl/gtcrs/hb-charmap.def
>   * harbour/source/rtl/gtcrs/gtcrs.c
>   * harbour/source/rtl/gtcrs/gtcrs.h
>   - harbour/source/rtl/gtcrs/chrmap.c
>   * harbour/source/rtl/gtcrs/Makefile
>   * harbour/source/rtl/dateshb.c
>   * harbour/source/rtl/gtfunc.c
>   * harbour/source/rtl/scrollbr.prg
>   * harbour/source/rtl/datesx.c
>   * harbour/source/rtl/left.c
>   + harbour/source/rtl/gtchrmap.c
>   * harbour/source/rtl/is.c
>   * harbour/source/rtl/errorapi.c
>   * harbour/source/rtl/gtstd/gtstd.c
>   * harbour/source/rtl/gtsln/gtsln.c
>   * harbour/source/rtl/gtsln/gtsln.h
>   + harbour/source/rtl/gttrm
>   + harbour/source/rtl/gttrm/Makefile
>   + harbour/source/rtl/gttrm/gttrm.c
>   * harbour/source/rtl/gtpca/gtpca.c
>   * harbour/source/rtl/listbox.prg
>   + harbour/source/rtl/hbhex.c
>   * harbour/source/rtl/seconds.c
>   * harbour/source/rtl/gtgui/gtgui.c
>   * harbour/source/rtl/gttone.c
>   * harbour/source/rtl/Makefile
>   * harbour/source/rtl/gtcgi/gtcgi.c
>   * harbour/source/rtl/gtwvt/gtwvt.c
>   * harbour/source/rtl/gtapi.c
>   * harbour/source/rtl/file.c
>   + harbour/source/rtl/gtkbstat.c
>   + harbour/source/rtl/hbbit.c
>   * harbour/source/vm/hashfunc.c
>   * harbour/source/vm/hvm.c
>   * harbour/source/vm/maindllp.c
>   * harbour/source/vm/memvars.c
>   * harbour/source/vm/arrayshb.c
>   * harbour/source/vm/dynlibhb.c
>   * harbour/source/vm/classes.c
>   * harbour/source/debug/dbgentry.c
>   + harbour/source/codepage/cpsv850.c
>   * harbour/source/codepage/Makefile
>   + harbour/source/codepage/cpsk852.c
>   * harbour/source/codepage/uckam.c
>   + harbour/source/codepage/ucmik.c
>   + harbour/source/codepage/cpbgmik.c
>   + harbour/source/codepage/cpsvwin.c
>   + harbour/source/codepage/cpskiso.c
>   + harbour/source/codepage/cpskwin.c
>   + harbour/source/codepage/cpsvclip.c
>   + harbour/source/codepage/cpskkam.c
>   * harbour/source/common/reserved.c
>   * harbour/source/common/expropt1.c
>   * harbour/source/common/hbdate.c
>   * harbour/source/rdd/dbfcdx/dbfcdx1.c
>   * harbour/source/rdd/delim1.c
>   * harbour/source/rdd/dbf1.c
>   * harbour/source/rdd/hbsix/sxcompr.c
>   * harbour/source/rdd/sdf1.c
>   * harbour/source/compiler/hbmain.c
>   * harbour/source/compiler/cmdcheck.c
>   * harbour/source/compiler/harbour.yyc
>   * harbour/source/compiler/harbour.y
>   * harbour/source/compiler/harbour.yyh
>   * harbour/source/compiler/gencobj.c
>   * harbour/source/compiler/hbopt.c
>   * harbour/source/compiler/hbusage.c
>   * harbour/source/compiler/hbgenerr.c
>   * harbour/makefile.bc
>   * harbour/config/hpux/global.cf
>   * harbour/config/darwin/global.cf
>   * harbour/config/linux/global.cf
>   * harbour/config/sunos/global.cf
>   * harbour/config/bsd/global.cf
>   + harbour/config/w32/owatcom.cf
>   * harbour/config/w32/watcom.cf
>   * harbour/make_tgz.sh
>     * synced with modifications in DEVEL branch
>
>
> Victor please inform me when your modifications in GET class code
> will be finished so I'll sync them too.
> I've just made some test with Clipper and also our ERROR class
> should be fixed to be Clipper compatible. Below I'm attaching
> code which simulates Clipper error class behavior though it uses
> different internal error object structure. This is .prg version
> but I also have .c one. Personally I think that we should make
> an exception for error object and fully define it at .c level
> because now it's impossible to create new error object when we
> have pending HVM exception set. Also working on classy code is
> much harder because errors in TCLASS code are not reported and
> we have only recursive RT errors calls and then internal error.
> If we'll move error class code to .c level then then we will not
> have such problems and we can make creating and updating error
> object much faster. Now due to speed overhead I had to drop some
> exact Clipper compatibility in few places where error object
> should be created using some workarounds. If you do not like
> this idea then please inform me about it ASAP.
>
> best regards,
> Przemek
>
>
>
>
> /* ERROR CLASS */
> #include "common.ch"
> #include "hboo.ch"
>
> #define HB_TERROR_ARGS        01
> #define HB_TERROR_CANDEFAULT  02
> #define HB_TERROR_CANRETRY    03
> #define HB_TERROR_CANSUBST    04
> #define HB_TERROR_CARGO       05
> #define HB_TERROR_DESCRIPTION 06
> #define HB_TERROR_FILENAME    07
> #define HB_TERROR_GENCODE     08
> #define HB_TERROR_OPERATION   09
> #define HB_TERROR_OSCODE      10
> #define HB_TERROR_SEVERITY    11
> #define HB_TERROR_SUBCODE     12
> #define HB_TERROR_SUBSYSTEM   13
> #define HB_TERROR_TRIES       14
>
> #define HB_TERROR_IVARCOUNT   14
>
>
> STATIC FUNCTION ARGS()
>    RETURN QSELF()[ HB_TERROR_ARGS ]
>
> STATIC FUNCTION _ARGS( args )
>    IF VALTYPE( args ) $ "AO"
>       QSELF()[ HB_TERROR_ARGS ] := args
>    ENDIF
>    RETURN args
>
>
> STATIC FUNCTION CANDEFAULT()
>    RETURN QSELF()[ HB_TERROR_CANDEFAULT ]
>
> STATIC FUNCTION _CANDEFAULT( can )
>    IF ISLOGICAL( can )
>       RETURN QSELF()[ HB_TERROR_CANDEFAULT ] := can
>    ENDIF
>    RETURN NIL
>
>
> STATIC FUNCTION CANRETRY()
>    RETURN QSELF()[ HB_TERROR_CANRETRY ]
>
> STATIC FUNCTION _CANRETRY( can )
>    IF ISLOGICAL( can )
>       RETURN QSELF()[ HB_TERROR_CANRETRY ] := can
>    ENDIF
>    RETURN NIL
>
>
> STATIC FUNCTION CANSUBST()
>    RETURN QSELF()[ HB_TERROR_CANSUBST ]
>
> STATIC FUNCTION _CANSUBST( can )
>    IF ISLOGICAL( can )
>       RETURN QSELF()[ HB_TERROR_CANSUBST ] := can
>    ENDIF
>    RETURN NIL
>
>
> STATIC FUNCTION CARGO()
>    RETURN QSELF()[ HB_TERROR_CARGO ]
>
> STATIC FUNCTION _CARGO( cargo )
>    RETURN QSELF()[ HB_TERROR_CARGO ] := cargo
>
>
> STATIC FUNCTION DESCRIPTION()
>    RETURN QSELF()[ HB_TERROR_DESCRIPTION ]
>
> STATIC FUNCTION _DESCRIPTION( descript )
>    IF ISCHARACTER( descript )
>       QSELF()[ HB_TERROR_DESCRIPTION ] := descript
>    ENDIF
>    RETURN descript
>
>
> STATIC FUNCTION FILENAME()
>    RETURN QSELF()[ HB_TERROR_FILENAME ]
>
> STATIC FUNCTION _FILENAME( fname )
>    IF ISCHARACTER( fname )
>       QSELF()[ HB_TERROR_FILENAME ] := fname
>    ENDIF
>    RETURN fname
>
>
> STATIC FUNCTION OPERATION()
>    RETURN QSELF()[ HB_TERROR_OPERATION ]
>
> STATIC FUNCTION _OPERATION( oper )
>    IF ISCHARACTER( oper )
>       QSELF()[ HB_TERROR_OPERATION ] := oper
>    ENDIF
>    RETURN oper
>
>
> STATIC FUNCTION SUBSYSTEM()
>    RETURN QSELF()[ HB_TERROR_SUBSYSTEM ]
>
> STATIC FUNCTION _SUBSYSTEM( subsys )
>    IF ISCHARACTER( subsys )
>       QSELF()[ HB_TERROR_SUBSYSTEM ] := subsys
>    ENDIF
>    RETURN subsys
>
>
> STATIC FUNCTION GENCODE()
>    RETURN QSELF()[ HB_TERROR_GENCODE ]
>
> STATIC FUNCTION _GENCODE( code )
>    IF !ISNUMBER( code )
>       code := _eInstVar( QSELF(), "GENCODE", code, "N", 1001 )
>    ENDIF
>    QSELF()[ HB_TERROR_DESCRIPTION ] := ;
>                   HB_LANGERRMSG( QSELF()[ HB_TERROR_GENCODE ] := INT 
> ( code ) )
>    RETURN code
>
>
> STATIC FUNCTION OSCODE()
>    RETURN QSELF()[ HB_TERROR_OSCODE ]
>
> STATIC FUNCTION _OSCODE( code )
>    IF !ISNUMBER( code )
>       code := _eInstVar( QSELF(), "OSCODE", code, "N", 1001 )
>    ENDIF
>    QSELF()[ HB_TERROR_OSCODE ] := INT( code )
>    RETURN code
>
>
> STATIC FUNCTION SUBCODE()
>    RETURN QSELF()[ HB_TERROR_SUBCODE ]
>
> STATIC FUNCTION _SUBCODE( code )
>    IF !ISNUMBER( code )
>       code := _eInstVar( QSELF(), "SUBCODE", code, "N", 1001 )
>    ENDIF
>    QSELF()[ HB_TERROR_SUBCODE ] := INT( code )
>    RETURN code
>
>
> STATIC FUNCTION SEVERITY()
>    RETURN QSELF()[ HB_TERROR_SEVERITY ]
>
> STATIC FUNCTION _SEVERITY( code )
>    IF !ISNUMBER( code )
>       code := _eInstVar( QSELF(), "SEVERITY", code, "N", 1001 )
>    ENDIF
>    QSELF()[ HB_TERROR_SEVERITY ] := INT( code )
>    RETURN code
>
>
> STATIC FUNCTION TRIES()
>    RETURN QSELF()[ HB_TERROR_TRIES ]
>
> STATIC FUNCTION _TRIES( code )
>    IF !ISNUMBER( code )
>       code := _eInstVar( QSELF(), "TRIES", code, "N", 1001 )
>    ENDIF
>    QSELF()[ HB_TERROR_TRIES ] := INT( code )
>    RETURN code
>
>
> STATIC FUNCTION ErrClassNew()
>    LOCAL hClass
>    hClass := __clsNew( "ERROR", HB_TERROR_IVARCOUNT,, @ErrorNew() )
>    __clsAddMsg( hClass, "ARGS"          , @ARGS()        ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "_ARGS"         , @_ARGS()       ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "CANDEFAULT"    , @CANDEFAULT()  ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "_CANDEFAULT"   , @_CANDEFAULT() ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "CANRETRY"      , @CANRETRY()    ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "_CANRETRY"     , @_CANRETRY()   ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "CANSUBSTITUTE" , @CANSUBST()    ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "_CANSUBSTITUTE", @_CANSUBST()   ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "CARGO"         , @CARGO()       ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "_CARGO"        , @_CARGO()      ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "DESCRIPTION"   , @DESCRIPTION() ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "_DESCRIPTION"  , @_DESCRIPTION(),  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "FILENAME"      , @FILENAME()    ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "_FILENAME"     , @_FILENAME()   ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "GENCODE"       , @GENCODE()     ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "_GENCODE"      , @_GENCODE()    ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "OPERATION"     , @OPERATION()   ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "_OPERATION"    , @_OPERATION()  ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "OSCODE"        , @OSCODE()      ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "_OSCODE"       , @_OSCODE()     ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "SEVERITY"      , @SEVERITY()    ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "_SEVERITY"     , @_SEVERITY()   ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "SUBCODE"       , @SUBCODE()     ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "_SUBCODE"      , @_SUBCODE()    ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "SUBSYSTEM"     , @SUBSYSTEM()   ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "_SUBSYSTEM"    , @_SUBSYSTEM()  ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "TRIES"         , @TRIES()       ,  
> HB_OO_MSG_METHOD )
>    __clsAddMsg( hClass, "_TRIES"        , @_TRIES()      ,  
> HB_OO_MSG_METHOD )
>    RETURN hClass
>
> FUNCTION ErrorNew()
>    STATIC s_oError
>    IF s_oError == NIL
>       s_oError := __clsInst( ErrClassNew() )
>       s_oError[ HB_TERROR_ARGS        ] := NIL
>       s_oError[ HB_TERROR_CANDEFAULT  ] := .F.
>       s_oError[ HB_TERROR_CANRETRY    ] := .F.
>       s_oError[ HB_TERROR_CANSUBST    ] := .F.
>       s_oError[ HB_TERROR_CARGO       ] := NIL
>       s_oError[ HB_TERROR_DESCRIPTION ] := ""
>       s_oError[ HB_TERROR_FILENAME    ] := ""
>       s_oError[ HB_TERROR_GENCODE     ] := 0
>       s_oError[ HB_TERROR_OPERATION   ] := ""
>       s_oError[ HB_TERROR_OSCODE      ] := 0
>       s_oError[ HB_TERROR_SEVERITY    ] := 0
>       s_oError[ HB_TERROR_SUBCODE     ] := 0
>       s_oError[ HB_TERROR_SUBSYSTEM   ] := ""
>       s_oError[ HB_TERROR_TRIES       ] := 0
>    ENDIF
>    RETURN __objClone( s_oError )
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Mon Aug 20 11:34:11 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Aug 20 11:34:19 2007
Subject: [Harbour] .spec file
In-Reply-To: <200708192231.18551.tomaz.zupan@orpo.si>
References: <200708160848.15102.tomaz.zupan@orpo.si>
	<200708160239.12036.teo@windtelsoft.com>
	<20070819120816.GA11038@localhost.localdomain>
	<200708192231.18551.tomaz.zupan@orpo.si>
Message-ID: <20070820153411.GA19458@localhost.localdomain>

On Sun, 19 Aug 2007, Toma? Zupan wrote:
> Of course it is valid tag, but it is not defined - if I understand docs
> correctly.
> http://www.rpm.org/max-rpm-snapshot/s1-rpm-depend-manual-dependencies.html
> IMO it should be defined before Requires tag:
> Epoch:          48

Ups, I dropped the tag setting by mistake.
I'll add a small trick and it will work without epoch tag.

> PS: Have you noticed other message regarding conflict with nss package?
> Could someone test that on another distro?

We can rename pp to sth like xprompt or dotprompt simply remove it.
This package has not been updated for very long time. Now to execute
.prg code we have hbrun which works much better because it contains
compiler and preprocessor exactly the same as in harbour bianries
so it works with all supported syntax.
Maybe someone has some spare time and can add dotprompt interface to
hbrun? We can call it hbdot.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Aug 20 11:43:48 2007
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Szak=E1ts_Viktor?=)
Date: Mon Aug 20 11:43:48 2007
Subject: [Harbour] CHANGELOG: 2007-08-20 17:42 UTC+0100 Viktor Szakats
	(harbour.01 syenar.hu)
Message-ID: <01c7e340$Blat.v2.6.1$e6919a64$1104184a78f2@127.0.0.1>

2007-08-20 17:42 UTC+0100 Viktor Szakats (harbour.01 syenar.hu)
   * source/rtl/tget.prg
     ! Recent missing date picture mask bug fixed in another 
       different way. Now without any side-effects, tested with 
       the regression test suit.
     ! Fixed a minor incompatibility in some rare situations.
       This is grey area even in C5.2 so compatibility is not 100% 
       here.

From druzus at priv.onet.pl  Mon Aug 20 11:48:33 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Aug 20 11:48:44 2007
Subject: [Harbour] ChangeLog(s) BETA branch
In-Reply-To: <3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>
References: <20070820141400.GC13960@localhost.localdomain>
	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>
Message-ID: <20070820154833.GA19648@localhost.localdomain>

On Mon, 20 Aug 2007, Szak?ts Viktor wrote:
> Hi Przemek,
> I don't see a problem to move the whole Error class to C
> (it's almost in C right now anyway). 

Fine.

> What are the remaining incompatible parts you mention?

F.e. I had to implement hb_fsExtOpen() in different way then _fsExtOpen()
in Clipper adding some new FXO_* flags because creating error object
before each call to this function was two expensive.

> I'm still fiddling with TGET, I'll let you know when it's
> ready. Probably tomorrow.

Thanks.

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Aug 20 12:03:24 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Aug 20 12:03:37 2007
Subject: [Harbour] ChangeLog(s) BETA branch
In-Reply-To: <20070820154833.GA19648@localhost.localdomain>
References: <20070820141400.GC13960@localhost.localdomain>
	<3B2AD9A8-004D-447F-A754-1AB9F02F42EE@syenar.hu>
	<20070820154833.GA19648@localhost.localdomain>
Message-ID: <32FB9E84-CBC1-47D2-9B19-DE5E7DFDD4AA@syenar.hu>

Hi Przemek,

On 2007.08.20., at 17:48, Przemyslaw Czerpak wrote:

> On Mon, 20 Aug 2007, Szak?ts Viktor wrote:
>> Hi Przemek,
>> I don't see a problem to move the whole Error class to C
>> (it's almost in C right now anyway).
>
> Fine.
>
>> What are the remaining incompatible parts you mention?
>
> F.e. I had to implement hb_fsExtOpen() in different way then  
> _fsExtOpen()
> in Clipper adding some new FXO_* flags because creating error object
> before each call to this function was two expensive.

I think this is okey.

>> I'm still fiddling with TGET, I'll let you know when it's
>> ready. Probably tomorrow.
>
> Thanks.

It should be fine now. I'd still appreciate some testing
from developers.

Brgds,
Viktor

From antonioharbour at gmail.com  Mon Aug 20 13:21:04 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Mon Aug 20 13:21:22 2007
Subject: [Harbour] ChangeLog(s) BETA branch
In-Reply-To: <32FB9E84-CBC1-47D2-9B19-DE5E7DFDD4AA@syenar.hu>
Message-ID: <46c9cd83.03eb300a.0cd8.fffff658@mx.google.com>

Viktor, 

> It should be fine now. I'd still appreciate some testing from developers.

We are going to test it asap,

Regards,

Antonio

From druzus at priv.onet.pl  Mon Aug 20 17:56:27 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Aug 20 17:56:34 2007
Subject: [Harbour] ChangeLog 2007-08-20 23:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070820215627.GA16023@localhost.localdomain>

2007-08-20 23:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/harbour.spec
    ! added workaround for undefined Epoch tag

  * harbour/source/rtl/Makefile
  * harbour/common.mak
  - harbour/source/rtl/terror.prg
    - removed .prg level ERROR class

  * harbour/include/hbapierr.h
  * harbour/source/rtl/errorapi.c
    + added ERROR class supported at .c level and updated all necessary
      functions to work without PCODE execution - it should allow to
      create and update ERROR object when HVM has active exceptions

  * harbour/utils/hbtest/rt_hvma.prg
  * harbour/utils/hbtest/rt_misc.prg
  * harbour/utils/hbtest/rt_array.prg
    * update HBTEST for new ERROR object structure

best regards,
Przemek
From soporte at dsgsoftware.com  Tue Aug 21 04:49:46 2007
From: soporte at dsgsoftware.com (=?iso-8859-1?Q?Juan_G=E1lvez?=)
Date: Tue Aug 21 04:50:30 2007
Subject: [Harbour] OrdCreate() issue ?
Message-ID: <013901c7e3d0$4877ec30$1700000a@PcJuanxp>

Hi Przemek,

Please, I need your help and opinion about an *aleatory* GPF that I get on 
our xHarbour / FWH application.

I haven't made enough tests with Harbour to affirm if it also happens ...

It seems the *aleatory* GPF always occurs from OrdCreate() when we're 
creating an index that contains a DTOS expression.

I'm not sure but I think it could be related with these changes :


2007-07-05 12:56 UTC+0100 Miguel Angel Marchuet 
(miguelangel/at/marchuet.net)
  * source/rdd/delim1.c
  * source/rdd/dbf1.c
  * source/rdd/sdf1.c
  * source/rdd/dbfcdx/dbfcdx1.c
    ! fixed casting
    % do not copy date value to separate memory buffer but decode dates 
directly from record buffer
    * cleaned few warnings
    ; synced with harbour


2007-06-30 15:00 UTC+1200 Peter Rees <peter(AT)rees.co.nz>
  * source/rtl/dateshb.c
    * change HB_FUNC( STOD ) to support strings passed longer than 8 char
       e.g. STOD( "20070630sadasd " )
  * source/hbexprb.c
    * alter STOD() optimiser support date strings "YYYYMMDD" passed longer 
than 8 char
  * source/common/hbdate.c
    * hb_dateStrGet() support date strings "YYYYMMDD" passed longer than 8 
char
  * source/rdd/delim.c
    * support date strings "YYYYMMDD" passed longer than 8 char


Would you have the kindness to give me your opinion?

Many thanks
Juan 

From druzus at priv.onet.pl  Tue Aug 21 06:22:04 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Aug 21 06:22:10 2007
Subject: [Harbour] OrdCreate() issue ?
In-Reply-To: <013901c7e3d0$4877ec30$1700000a@PcJuanxp>
References: <013901c7e3d0$4877ec30$1700000a@PcJuanxp>
Message-ID: <20070821102204.GA2614@localhost.localdomain>

On Tue, 21 Aug 2007, Juan G?lvez wrote:
> Hi Przemek,
> Please, I need your help and opinion about an *aleatory* GPF that I get on 
> our xHarbour / FWH application.
> I haven't made enough tests with Harbour to affirm if it also happens ...

It's only xHarbour problem and it doesn't happen in Harbour.

> It seems the *aleatory* GPF always occurs from OrdCreate() when we're 
> creating an index that contains a DTOS expression.
> I'm not sure but I think it could be related with these changes :
> 2007-07-05 12:56 UTC+0100 Miguel Angel Marchuet 
> 2007-06-30 15:00 UTC+1200 Peter Rees <peter(AT)rees.co.nz>
> Would you have the kindness to give me your opinion?

Yes. These modifications are the reason of problem which can cause GPFs
when "D8" date field is read from DBF.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Tue Aug 21 06:46:59 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Aug 21 06:47:05 2007
Subject: [Harbour] gttrm run w3m/elinks when return mouse doesn't work
Message-ID: <9257026e0708210346l4c49dcddue97d9f5155da974f@mail.gmail.com>

I'm trying to give access of my html's based help system to gttrm.

To view the page I use sth like:

      if empty( getenv( "DISPLAY" ) )
         cSaveScreen := savescreen( 0, 0, maxrow(), maxcol() )
         cSaveMouse := msavestate()
         cls
         run( "w3m " + cWeb )
         restscreen( 0, 0, maxrow(), maxcol(), cSaveScreen )
         mreststate( cSaveMouse )
      else
         nRetCode := StartUrl( cWeb )
      endif

but I cannot get the mouse back from w3m. The same with elinks.

Any idea?

best regards,
Lorenzo
From druzus at priv.onet.pl  Tue Aug 21 07:41:06 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Aug 21 07:41:12 2007
Subject: [Harbour] gttrm run w3m/elinks when return mouse doesn't work
In-Reply-To: <9257026e0708210346l4c49dcddue97d9f5155da974f@mail.gmail.com>
References: <9257026e0708210346l4c49dcddue97d9f5155da974f@mail.gmail.com>
Message-ID: <20070821114106.GA3452@localhost.localdomain>

On Tue, 21 Aug 2007, Lorenzo Fiorini wrote:
> I'm trying to give access of my html's based help system to gttrm.
> To view the page I use sth like:
>       if empty( getenv( "DISPLAY" ) )
>          cSaveScreen := savescreen( 0, 0, maxrow(), maxcol() )
>          cSaveMouse := msavestate()
>          cls
>          run( "w3m " + cWeb )
>          restscreen( 0, 0, maxrow(), maxcol(), cSaveScreen )
>          mreststate( cSaveMouse )
>       else
>          nRetCode := StartUrl( cWeb )
>       endif
> but I cannot get the mouse back from w3m. The same with elinks.
> Any idea?

What type of terminal do you use?
Does it support mouse events or it's GPM mouse?
Does mouse work in w3m?

best regards,
Przemek
From soporte at dsgsoftware.com  Tue Aug 21 08:00:28 2007
From: soporte at dsgsoftware.com (=?iso-8859-2?Q?Juan_G=E1lvez?=)
Date: Tue Aug 21 08:00:44 2007
Subject: [Harbour] OrdCreate() issue ?
References: <013901c7e3d0$4877ec30$1700000a@PcJuanxp>
	<20070821102204.GA2614@localhost.localdomain>
Message-ID: <001201c7e3ea$e2caea70$1700000a@PcJuanxp>

Przemek,

Please, I know you aren't involved in xHarbour but perhaps you could be more
explicit ...

> Yes. These modifications are the reason of problem which can cause GPFs
> when "D8" date field is read from DBF.

In your changes on hb_dbfGetValue() this code :
            ...
            char szBuffer[ 9 ];
            memcpy( szBuffer, pArea->pRecord + pArea->pFieldOffset[
uiIndex ], 8 );
            szBuffer[ 8 ] = 0;
            hb_itemPutDS( pItem, szBuffer );
            ...
have been changed by :
            ...
            hb_itemPutDS( pItem, ( char * ) pArea->pRecord +
pArea->pFieldOffset[ uiIndex ] );
            ...

Peter changed on hb_dateStrGet() this code :
            ...
            if( szDate && szDate[ 8 ] == '\0' )
            ...
by :
            ...
            if( szDate && strlen( szDate ) >= 8 )
            ...

I'm not a C guru but I wonder if strlen() would cause GPF,s with these
changes.

Any suggestion ?

Many thanks
Juan

From lorenzo.fiorini at gmail.com  Tue Aug 21 08:15:53 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Aug 21 08:15:57 2007
Subject: [Harbour] gttrm run w3m/elinks when return mouse doesn't work
In-Reply-To: <20070821114106.GA3452@localhost.localdomain>
References: <9257026e0708210346l4c49dcddue97d9f5155da974f@mail.gmail.com>
	<20070821114106.GA3452@localhost.localdomain>
Message-ID: <9257026e0708210515j61030ac1h764475baed5525a9@mail.gmail.com>

On 8/21/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> What type of terminal do you use?

pocketputty under a HP IPAQ but I have the same problem with pterm.
After running w3m the cursor change from arrow to "text caret" and I
have no more mouse in my apps.

> Does it support mouse events or it's GPM mouse?

After googling I guess it's GPM. I build my apps with HB_COMMERCIAL=YES

> Does mouse work in w3m?

Yes.

if I run w3m using -no-mouse I have no mouse but my apps have no problems.
Clearly using "software" keyboard is not so fancy.

best regards,
Lorenzo
From druzus at priv.onet.pl  Tue Aug 21 08:34:50 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Aug 21 08:35:07 2007
Subject: [Harbour] OrdCreate() issue ?
In-Reply-To: <001201c7e3ea$e2caea70$1700000a@PcJuanxp>
References: <013901c7e3d0$4877ec30$1700000a@PcJuanxp>
	<20070821102204.GA2614@localhost.localdomain>
	<001201c7e3ea$e2caea70$1700000a@PcJuanxp>
Message-ID: <20070821123450.GB3452@localhost.localdomain>

On Tue, 21 Aug 2007, Juan G?lvez wrote:
>            if( szDate && strlen( szDate ) >= 8 )
> I'm not a C guru but I wonder if strlen() would cause GPF,s with these
> changes.

It can if there is no chr(0) from szDate to end of memory page and
the next memory page does not belong to the process.
At least it should be changed to:
    if( szDate && hb_strnlen( szDate, 8 ) >= 8 )
Below is small test program and valgrind output for current xHarbour code.

best regards,
Przemek



proc main(rdd)
field F1, F2, F3
dbcreate("_tst",{{"F1","D",8,0},{"F2","D",8,0},{"F3","D",8,0}})
use _tst shared
while lastrec()<1000
   dbAppend()
   F1:=date()-1000+recno()%20
   F2:=date()-100+recno()%30
   F3:=date()-recno()%40
enddo
index on dtos(F1)+dtos(F2)+dtos(F3) tag t1
return


==2790== Invalid read of size 1
==2790==    at 0x1BA88409: hb_dateEncStr (hbdate.c:195)
==2790==    by 0x1BB01C46: hb_itemPutDS (itemapi.c:745)
==2790==    by 0x1BB64B4E: hb_dbfGetValue (dbf1.c:1495)
==2790==    by 0x1BAC5755: hb_fptGetVarField (dbffpt1.c:3353)
==2790==    by 0x1BAC6502: hb_fptGetValue (dbffpt1.c:3738)
==2790==    by 0x1BB61A0E: hb_rddGetFieldValue (wafunc.c:465)
==2790==    by 0x1BADF65E: hb_vmExecute (hvm.c:2758)
==2790==    by 0x1BAE21F8: hb_vmDoBlock (hvm.c:7478)
==2790==    by 0x1BAE2816: hb_vmSend (hvm.c:7323)
==2790==    by 0x1BAE2EAD: hb_vmEvalBlockOrMacro (hvm.c:7550)
==2790==    by 0x1BB7549A: hb_waEvalBlock (workarea.c:1598)
==2790==    by 0x1BA1FE65: ntxOrderCreate (dbfntx1.c:6089)
==2790==    by 0x1BB6CD51: HB_FUN_ORDCREATE (dbcmd.c:1363)
==2790==    by 0x1BAEA971: hb_vmDo (hvm.c:6943)
==2790==    by 0x1BADCCF6: hb_vmExecute (hvm.c:1385)
==2790==    by 0x80487DE: (within /tmp/2/t)
==2790==  Address 0x1BDAB4E1 is 0 bytes after a block of size 25 alloc'd
==2790==    at 0x1B904A90: malloc (vg_replace_malloc.c:131)
==2790==    by 0x1BB0A600: hb_xgrab (fm.c:405)
==2790==    by 0x1BB67F97: hb_dbfOpen (dbf1.c:3448)
==2790==    by 0x1BA1FB78: ntxOpen (dbfntx1.c:5985)
==2790==    by 0x1BB61C9E: hb_rddOpenTable (wafunc.c:648)
==2790==    by 0x1BB6BF57: HB_FUN_DBUSEAREA (dbcmd.c:861)
==2790==    by 0x1BAEA971: hb_vmDo (hvm.c:6943)
==2790==    by 0x1BADCCF6: hb_vmExecute (hvm.c:1385)
==2790==    by 0x80487DE: (within /tmp/2/t)
==2790==    by 0x1BAEA971: hb_vmDo (hvm.c:6943)
==2790==    by 0x1BAF5C82: main (mainstd.c:66)
==2790== 
==2790== Conditional jump or move depends on uninitialised value(s)
==2790==    at 0x1BA88409: hb_dateEncStr (hbdate.c:195)
==2790==    by 0x1BB01C46: hb_itemPutDS (itemapi.c:745)
==2790==    by 0x1BB64B4E: hb_dbfGetValue (dbf1.c:1495)
==2790==    by 0x1BAC5755: hb_fptGetVarField (dbffpt1.c:3353)
==2790==    by 0x1BAC6502: hb_fptGetValue (dbffpt1.c:3738)
==2790==    by 0x1BB61A0E: hb_rddGetFieldValue (wafunc.c:465)
==2790==    by 0x1BADF65E: hb_vmExecute (hvm.c:2758)
==2790==    by 0x1BAE21F8: hb_vmDoBlock (hvm.c:7478)
==2790==    by 0x1BAE2816: hb_vmSend (hvm.c:7323)
==2790==    by 0x1BAE2EAD: hb_vmEvalBlockOrMacro (hvm.c:7550)
==2790==    by 0x1BA1D55E: hb_ntxTagCreate (dbfntx1.c:5359)
==2790==    by 0x1BA20D40: ntxOrderCreate (dbfntx1.c:6410)
==2790==    by 0x1BB6CD51: HB_FUN_ORDCREATE (dbcmd.c:1363)
==2790==    by 0x1BAEA971: hb_vmDo (hvm.c:6943)
==2790==    by 0x1BADCCF6: hb_vmExecute (hvm.c:1385)
==2790==    by 0x80487DE: (within /tmp/2/t)
==2790== 
==2790== Use of uninitialised value of size 4
==2790==    at 0x1BA88409: hb_dateEncStr (hbdate.c:195)
==2790==    by 0x1BB01C46: hb_itemPutDS (itemapi.c:745)
==2790==    by 0x1BB64B4E: hb_dbfGetValue (dbf1.c:1495)
==2790==    by 0x1BAC5755: hb_fptGetVarField (dbffpt1.c:3353)
==2790==    by 0x1BAC6502: hb_fptGetValue (dbffpt1.c:3738)
==2790==    by 0x1BB61A0E: hb_rddGetFieldValue (wafunc.c:465)
==2790==    by 0x1BADF65E: hb_vmExecute (hvm.c:2758)
==2790==    by 0x1BAE21F8: hb_vmDoBlock (hvm.c:7478)
==2790==    by 0x1BAE2816: hb_vmSend (hvm.c:7323)
==2790==    by 0x1BAE2EAD: hb_vmEvalBlockOrMacro (hvm.c:7550)
==2790==    by 0x1BA1D55E: hb_ntxTagCreate (dbfntx1.c:5359)
==2790==    by 0x1BA20D40: ntxOrderCreate (dbfntx1.c:6410)
==2790==    by 0x1BB6CD51: HB_FUN_ORDCREATE (dbcmd.c:1363)
==2790==    by 0x1BAEA971: hb_vmDo (hvm.c:6943)
==2790==    by 0x1BADCCF6: hb_vmExecute (hvm.c:1385)
==2790==    by 0x80487DE: (within /tmp/2/t)
==2790== 
==2790== More than 30000 total errors detected.  I'm not reporting any more.
==2790== Final error counts will be inaccurate.  Go fix your program!
==2790== Rerun with --error-limit=no to disable this cutoff.  Note
==2790== that errors may occur in your program without prior warning from
==2790== Valgrind, because errors are no longer being displayed.
==2790== 
==2790== ERROR SUMMARY: 30000 errors from 3 contexts (suppressed: 20 from 1)
From druzus at priv.onet.pl  Tue Aug 21 08:41:23 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Aug 21 08:41:35 2007
Subject: [Harbour] gttrm run w3m/elinks when return mouse doesn't work
In-Reply-To: <9257026e0708210515j61030ac1h764475baed5525a9@mail.gmail.com>
References: <9257026e0708210346l4c49dcddue97d9f5155da974f@mail.gmail.com>
	<20070821114106.GA3452@localhost.localdomain>
	<9257026e0708210515j61030ac1h764475baed5525a9@mail.gmail.com>
Message-ID: <20070821124123.GC3452@localhost.localdomain>

On Tue, 21 Aug 2007, Lorenzo Fiorini wrote:
> pocketputty under a HP IPAQ but I have the same problem with pterm.
> After running w3m the cursor change from arrow to "text caret" and I
> have no more mouse in my apps.

It uses terminal mouse events. The program you are running does not restore
mouse status on exit or PuTTY does not support mouse status stack (I'll
check it in some spare time). In such case adding:

    fwrite( hb_gtInfo( GTI_OUTPUTFD ), ;
	    chr( 27 ) + "[?1001s" + chr( 27 ) + "[?1002h" )
just after:

    __run( ... )

should resolve the problem.
If it helps then please inform me - maybe I'll to GTTRM add automatic mouse
reinitialization in hb_gtResume().

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Tue Aug 21 08:54:14 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Aug 21 08:54:18 2007
Subject: [Harbour] gttrm run w3m/elinks when return mouse doesn't work
In-Reply-To: <20070821124123.GC3452@localhost.localdomain>
References: <9257026e0708210346l4c49dcddue97d9f5155da974f@mail.gmail.com>
	<20070821114106.GA3452@localhost.localdomain>
	<9257026e0708210515j61030ac1h764475baed5525a9@mail.gmail.com>
	<20070821124123.GC3452@localhost.localdomain>
Message-ID: <9257026e0708210554t4fdd3463xd51ad5680fa39b04@mail.gmail.com>

On 8/21/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> It uses terminal mouse events. The program you are running does not restore
> mouse status on exit or PuTTY does not support mouse status stack (I'll
> check it in some spare time). In such case adding:
>
>     fwrite( hb_gtInfo( GTI_OUTPUTFD ), ;
>             chr( 27 ) + "[?1001s" + chr( 27 ) + "[?1002h" )
> just after:
>
>     __run( ... )
>
> should resolve the problem.
> If it helps then please inform me - maybe I'll to GTTRM add automatic mouse
> reinitialization in hb_gtResume().

YES adding that line it works. Many thanks.

best regards,
Lorenzo
From soporte at dsgsoftware.com  Tue Aug 21 08:56:52 2007
From: soporte at dsgsoftware.com (=?iso-8859-2?Q?Juan_G=E1lvez?=)
Date: Tue Aug 21 08:57:13 2007
Subject: [Harbour] OrdCreate() issue ?
References: <013901c7e3d0$4877ec30$1700000a@PcJuanxp><20070821102204.GA2614@localhost.localdomain><001201c7e3ea$e2caea70$1700000a@PcJuanxp>
	<20070821123450.GB3452@localhost.localdomain>
Message-ID: <001201c7e3f2$c881f7a0$1700000a@PcJuanxp>

Przemek,

> It can if there is no chr(0) from szDate to end of memory page and
> the next memory page does not belong to the process.

This was my intuition.

> At least it should be changed to:
>    if( szDate && hb_strnlen( szDate, 8 ) >= 8 )

I'll try your change.

Many thanks
Juan
From druzus at priv.onet.pl  Tue Aug 21 10:01:47 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Tue Aug 21 10:01:54 2007
Subject: [Harbour] ChangeLog 2007-08-21 16:00 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070821140147.GA12096@localhost.localdomain>

2007-08-21 16:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/memvars.c
    + added __MVSETBASE() function

  * harbour/source/pp/ppcore.c
    * redirect error messages when error trap is not defined into
      user dispout function

  * harbour/include/hbcomp.h
  * harbour/source/compiler/hbmain.c
  * harbour/source/compiler/cmdcheck.c
  * harbour/source/compiler/hbcomp.c
  * harbour/source/compiler/genjava.c
  * harbour/source/compiler/genc.c
  * harbour/source/compiler/hbcmplib.c
  * harbour/source/compiler/ppcomp.c
  * harbour/source/compiler/gencli.c
  * harbour/source/compiler/genhrb.c
  * harbour/source/compiler/gencobj.c
  * harbour/source/compiler/genobj32.c
  * harbour/source/compiler/hbusage.c
  * harbour/source/compiler/hbgenerr.c
    + added hb_compOutStd() and hb_compOutErr()
    * redirected all compiler output to above functions

best regards,
Przemek
From niki at synel.co.il  Wed Aug 22 01:26:16 2007
From: niki at synel.co.il (Chen Kedem)
Date: Wed Aug 22 02:10:35 2007
Subject: [Harbour] Missing pptable.c
Message-ID: <46CBC8F8.15A4@synel.co.il>

Hi,

source/pp/pptable.c v6938 was still there yesterday, but today
it seems to be missing (I can't event see it on viewvc asking
for 6938). I wonder what happen?

  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From niki at synel.co.il  Wed Aug 22 01:50:18 2007
From: niki at synel.co.il (Chen Kedem)
Date: Wed Aug 22 02:10:43 2007
Subject: [Harbour] Re: Missing pptable.c
References: <46CBC8F8.15A4@synel.co.il>
Message-ID: <46CBCE9A.4757@synel.co.il>

Opps, stupid me, its a generated file!
I didn't read the whole comment at the top just saw the $Id header.

  Chen.
**********************************************************************************************
IMPORTANT: The contents of this email and any attachments are confidential. They are intended for the 
named recipient(s) only.
If you have received this email in error, please notify the system manager or the sender immediately and do 
not disclose the contents to anyone or make copies thereof.
*** eSafe scanned this email for viruses, vandals, and malicious content. ***
**********************************************************************************************

From randy at palmasdev.com  Wed Aug 22 09:45:23 2007
From: randy at palmasdev.com (Randy Portnoff)
Date: Wed Aug 22 09:54:10 2007
Subject: [Harbour] Interrogating code block contents
Message-ID: <20070822134439.180B04ECE@smtp.tor.pathcom.com>

Hi Ryszard,

Thanks! Is there anyway it could also work with 
an array element - eg. HB_VARINCB( @a[1] )?

Regards,
Randy.

At 03:02 AM 8/14/2007, you wrote:
>Randy Portnoff <randy@palmasdev.com> napisa?(a):
>
> > So, without having to change the existing code base, I was hoping
> > that I could poke around in the Harbour internals and find a way to
> > know if a var's pointer is being referenced in a code block.
>
>   If you need to check if a local var is referenced in a codeblock then
>you can use the following code (this uses HVM internal data so the best
>place for it will be in codeblock.c)
>
>HB_FUNC( HB_VARINCB )
>{
>  PHB_ITEM pItem = hb_stackItemFromBase( 1 );
>  hb_retl( HB_IS_BYREF(pItem) && HB_IS_MEMVAR(pItem) );
>}
>
>Notice however that this code have some limitations:
>1. the local variable has to be passed by reference eg.
>   ? HB_VARINCB( @alocalvar )
>
>2. The codeblock which refers to this variable have to be created before
>you can check it (local variables are detached at the time of codeblock
>creation)
>  LOCAL a, b
>  ? HB_VARINCB( @a )     // prints .F.
>  b:={|| a}
>  ? HB_VARINCB( @a )     //prints .T.
>
>3. This function will return .T. if you pass a reference to memvar
>variable
>
>Regards, Ryszard
>
>--
>Ryszard Glab
>
>
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour


From lorenzo.fiorini at gmail.com  Wed Aug 22 11:20:58 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Aug 22 11:21:04 2007
Subject: [Harbour] optimistic locking and XML/JSON rdd "native" support
Message-ID: <9257026e0708220820w56313cbej2c863b1dbba515d0@mail.gmail.com>

Exchanging XML/JSON is almost necessary for web apps but it takes time.
After some weeks of tests I've found some things that would nice to
have built in rdd at C level.

- recno is a perfect "primary key" ( many BIG product add autoid
columns ) and a function like CRECNO() would avoid many
alltrim(str(recno()))

- a function like rechash() to return an hash of the buffer that can
be bound to the XML/JSON. At the return it can match against the
actual data to check if others have updated the record

- a function that returns the actual record in XML/JSON and another
one that replace the fields from an XML/JSON. It is not difficult to
create in prg but there are a lot of string concatenations and
dates/numbers to/from string convertions.
( sth like foxpro's SCATTER/GATHER TO/FROM XML/JSON )

- lately JSON www.json.org has become popular. While XML is "generic"
and can contains everything ( but this means also you need to define
by yourself what is an array ) JSON is specific for the task
"Javascript to/from app".

There are JSON parsers for many other languages, anyone has already
done sth for Harbour?

best regards,
Lorenzo
From druzus at priv.onet.pl  Wed Aug 22 13:24:57 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Aug 22 13:25:02 2007
Subject: [Harbour] ChangeLog 2007-08-22 19:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070822172457.GA11601@localhost.localdomain>

2007-08-22 19:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbpp.h
  * harbour/include/hbcomp.h
  * harbour/include/hbcompdf.h
  * harbour/source/pp/ppcore.c
  * harbour/source/rtl/gttrm/gttrm.c
  * harbour/source/main/harbour.c
  * harbour/source/compiler/hbmain.c
  * harbour/source/compiler/cmdcheck.c
  * harbour/source/compiler/hbcomp.c
  * harbour/source/compiler/hbcmplib.c
  * harbour/source/compiler/ppcomp.c
    * added 'const' to some 'char *' declarations
    + added hb_pp_inBuffer()
    + extended hb_compMain() to accept source code passed as ASCIIZ
      string
    + .prg function HB_COMPILEFROMBUF()
    + added support for -q2 compiler switch - it disables _ALL_ stdout/stderr
      messages

  * harbour/utils/Makefile
  + harbour/utils/hbdot
  + harbour/utils/hbdot/hbdot.prg
  + harbour/utils/hbdot/Makefile
    + added hbdot utility program.
      It's a "DOt Prompt" Console for the Harbour Language
         Syntax:  hbdot [<hrbfile[.prg]> [<parameters,...>]]
      It should look and work in similar way to pp/xBaseScript
      by Ron Pinkas but unlike xBaseScript is does not have preprocessor
      or simulated runtime environment but simply uses Harbour pp and
      compiler libraries to preprocess and compile commands. It means
      that it supports all language constructions also statements, f.e.:
         "for i:=1 to 10; ? i; next"
      Additionally it can also compile and execute .prg files given as
      first parameter just like hbrun.
      Please test it. If it will work as expected then we can remove
      'pp' (contrib/dot) from standard packages

best regards,
Przemek
From antonioharbour at gmail.com  Wed Aug 22 14:21:21 2007
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Aug 22 14:21:33 2007
Subject: [Harbour] IDX indexes
Message-ID: <46cc7ea4.0622300a.552a.ffffb75e@mx.google.com>

Przemek,

Does Harbour support FoxPro IDX indexes ? Thanks,

Regards,

Antonio

From lorenzo.fiorini at gmail.com  Wed Aug 22 15:50:09 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Aug 22 15:50:13 2007
Subject: [Harbour] hbdot build small issue
Message-ID: <9257026e0708221250l4ad81270le9184e3928a872f6@mail.gmail.com>

Just a report.

At first run I got:

hbdot.o:(.data+0x36d8): undefined reference to `HB_FUN_HB_GT_TRM_DEFAULT'
collect2: ld returned 1 exit status
make[3]: *** [hbdot] Error 1
make[2]: *** [descend] Error 2

this was because HB_GT_LIB=gtcrs. Fixed changing HB_GT_LIB=gttrm

best regards,
Lorenzo
From druzus at priv.onet.pl  Wed Aug 22 16:37:56 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Aug 22 16:38:05 2007
Subject: [Harbour] ChangeLog 2007-08-22 22:37 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070822203756.GA18373@localhost.localdomain>

2007-08-22 22:37 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/makefile.bc
  * harbour/makefile.vc
  * harbour/makefile.gc
  * harbour/common.mak
    * always pass all GT libraries to linked library list so compiled
      programs can use REQUEST HB_GT_*
    + added HBDOT

best regards,
Przemek
From druzus at priv.onet.pl  Wed Aug 22 16:38:34 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Aug 22 16:38:39 2007
Subject: [Harbour] hbdot build small issue
In-Reply-To: <9257026e0708221250l4ad81270le9184e3928a872f6@mail.gmail.com>
References: <9257026e0708221250l4ad81270le9184e3928a872f6@mail.gmail.com>
Message-ID: <20070822203834.GB18373@localhost.localdomain>

On Wed, 22 Aug 2007, Lorenzo Fiorini wrote:
> Just a report.
> At first run I got:
> hbdot.o:(.data+0x36d8): undefined reference to `HB_FUN_HB_GT_TRM_DEFAULT'
> collect2: ld returned 1 exit status
> make[3]: *** [hbdot] Error 1
> make[2]: *** [descend] Error 2
> this was because HB_GT_LIB=gtcrs. Fixed changing HB_GT_LIB=gttrm

Thanks for info. I'll fix it ASAP.

best regards,
Przemek
From druzus at priv.onet.pl  Wed Aug 22 16:38:54 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Aug 22 16:39:00 2007
Subject: [Harbour] IDX indexes
In-Reply-To: <46cc7ea4.0622300a.552a.ffffb75e@mx.google.com>
References: <46cc7ea4.0622300a.552a.ffffb75e@mx.google.com>
Message-ID: <20070822203854.GC18373@localhost.localdomain>

On Wed, 22 Aug 2007, Antonio Linares wrote:
> Does Harbour support FoxPro IDX indexes ? Thanks,

No.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Aug 22 16:41:55 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Aug 22 16:41:59 2007
Subject: [Harbour] hbdot, how to add others libs like tip, ct, gd?
Message-ID: <9257026e0708221341p2feff99l8f6fb1411ee162cd@mail.gmail.com>

I've tried to rebuild hbdot using hbmak and to add EXTERNAL to my prgs
but it still says:
Error BASE/9999  Unknown or unregistered symbol: THTTPSERVER.

Clearly the same prg builds correctly using hbmk -n -static -gtcgi ...

Any suggestion?

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Wed Aug 22 17:57:16 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Aug 22 17:57:20 2007
Subject: [Harbour] hbdot build small issue
In-Reply-To: <20070822203834.GB18373@localhost.localdomain>
References: <9257026e0708221250l4ad81270le9184e3928a872f6@mail.gmail.com>
	<20070822203834.GB18373@localhost.localdomain>
Message-ID: <9257026e0708221457o4fcd4f1fg8366eb70822428f0@mail.gmail.com>

On 8/22/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> Thanks for info. I'll fix it ASAP.

Thanks, for your information, I have the same problem cross building with mingw:

hbdot.o:hbdot.c:(.data+0x36d8): undefined reference to
`_HB_FUN_HB_GT_WIN_DEFAULT'
collect2: ld returned 1 exit status
make[3]: *** [hbdot.exe] Error 1
make[2]: *** [descend] Error 2

here I use HB_GT_LIB=gtwvt

best regards,
Lorenzo
From druzus at priv.onet.pl  Wed Aug 22 20:56:49 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Aug 22 20:56:55 2007
Subject: [Harbour] ChangeLog 2007-08-23 02:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070823005649.GA23370@localhost.localdomain>

2007-08-23 02:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/darwin/gcc.cf
  * harbour/config/darwin/global.cf
  * harbour/config/hpux/gcc.cf
  * harbour/config/hpux/global.cf
  * harbour/config/dos/owatcom.cf
  * harbour/config/dos/watcom.cf
  * harbour/config/dos/bcc16.cf
  * harbour/config/dos/global.cf
  * harbour/config/dos/rsx32.cf
  * harbour/config/dos/djgpp.cf
  * harbour/config/linux/owatcom.cf
  * harbour/config/linux/gcc.cf
  * harbour/config/linux/global.cf
  * harbour/config/os2/gcc.cf
  * harbour/config/os2/icc.cf
  * harbour/config/os2/global.cf
  * harbour/config/sunos/global.cf
  * harbour/config/bsd/gcc.cf
  * harbour/config/bsd/global.cf
  * harbour/config/w32/msvc.cf
  * harbour/config/w32/owatcom.cf
  * harbour/config/w32/watcom.cf
  * harbour/config/w32/bcc32.cf
  * harbour/config/w32/gcc.cf
  * harbour/config/w32/xcc.cf
  * harbour/config/w32/rsxnt.cf
  * harbour/config/w32/global.cf
  * harbour/config/w32/mingw32.cf
    + added support for linking with all GT libraries - please test

  * harbour/makefile.gc
    * removed system screen libraries - they are set by make_gcc.sh

  * harbour/bin/pack_src.sh
    + added HBDOT

  * harbour/harbour.spec
  * harbour/make_tgz.sh
    * replaced PP with HBDOT

best regards,
Przemek
From philb at philb.us  Wed Aug 22 20:56:38 2007
From: philb at philb.us (Phil Barnett)
Date: Wed Aug 22 20:57:09 2007
Subject: [Harbour] optimistic locking and XML/JSON rdd "native" support
In-Reply-To: <9257026e0708220820w56313cbej2c863b1dbba515d0@mail.gmail.com>
References: <9257026e0708220820w56313cbej2c863b1dbba515d0@mail.gmail.com>
Message-ID: <200708222056.38159.philb@philb.us>

On Wednesday 22 August 2007, Lorenzo Fiorini wrote:

> recno is a perfect "primary key"

No, it is not.

If you pack the database after deletions, your primary key just changed. Don't 
use recno for a primary key. It will get even with you when you least expect 
it.

-- 
Phil Barnett
AI4OF
SKCC #600
From druzus at priv.onet.pl  Wed Aug 22 21:38:55 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Aug 22 21:39:04 2007
Subject: [Harbour] About ACE.H
In-Reply-To: <f96bc3tlielosjaelhuvstlto7h4fi8i87@4ax.com>
References: <f96bc3tlielosjaelhuvstlto7h4fi8i87@4ax.com>
Message-ID: <20070823013855.GB23370@localhost.localdomain>

On Fri, 17 Aug 2007, Toninho@fwi wrote:
> Hi.
> I update ace.h in xharbour, to make it compatible with ADS 8.1, but
> when I look at Harbour?s ace.h, I see a lot of differences from
> xharbour?s ace.h.
> Is this intentional? Can both be synched ?

ace.h is original ExtSys file with some minor fixes. Current Harbour
version is taken from ADS 5.x or 6.x - I do not exactly know but
it should not cause bigger problems. I've just compared ace.h in
Harbour and xHarbour and I do not see any serious problem with
binary compatibility between both versions. It should be safe to
update ace.h to the newst version. Just take current version of
ace.h from ADS and add few fixes we added the version we have in
repository. It should work with old ads versions too.
BTW 99% of current code should work with current header files and
ADS8.1 so I do not know why you need to update it but I'm not ADS
user and I can miss sth important (1% ;-)). IMHO Brian is the best
person to give you answers about ADS.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Thu Aug 23 08:27:01 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Aug 23 08:27:07 2007
Subject: [Harbour] class() reference vs class():new() instance
Message-ID: <9257026e0708230527n7f95f4c8l92f626c1f1d50f77@mail.gmail.com>

Actually class() and class():New() are the same thing.

I know that this has been discussed time ago, but reading messages I
can't understand if the Harbour class code will be changed to support
class references.

best regards,
Lorenzo
From druzus at priv.onet.pl  Thu Aug 23 08:32:40 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug 23 08:32:46 2007
Subject: [Harbour] ChangeLog 2007-08-23 14:30 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070823123240.GA26635@localhost.localdomain>

2007-08-23 14:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbgtcore.h
  * harbour/source/rtl/hbgtcore.c
    + added new GT method: SEMICOLD()

  * harbour/source/rtl/gtxwc/gtxwc.c
    * use SEMICOLD() for late console window initialization

  * harbour/source/rtl/gttrm/gttrm.c
    * use SEMICOLD() to not erase startup screen contnts.
      Now applications which uses GTTRM and only simple QOUT()/QQOUT()
      output will work like with GTSTD. It means that in *nixes we can
      use GTTRM as default GT driver for all Harbour utilities.

  * harbour/make_gcc.sh
  * harbour/make_tgz.sh
  * harbour/harbour.spec
    * changed default GT driver for *nixes from to GTSTD to GTTRM

best regards,
Przemek
From druzus at priv.onet.pl  Thu Aug 23 08:36:44 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug 23 08:36:50 2007
Subject: [Harbour] class() reference vs class():new() instance
In-Reply-To: <9257026e0708230527n7f95f4c8l92f626c1f1d50f77@mail.gmail.com>
References: <9257026e0708230527n7f95f4c8l92f626c1f1d50f77@mail.gmail.com>
Message-ID: <20070823123644.GB26635@localhost.localdomain>

On Thu, 23 Aug 2007, Lorenzo Fiorini wrote:
> Actually class() and class():New() are the same thing.

Now. Class() does not execute constructor (INIT() method) - you
have to call Class():New() if you need full initialization.

> I know that this has been discussed time ago, but reading messages I
> can't understand if the Harbour class code will be changed to support
> class references.

Yes, I'll do that. Class() function will return "class object" just
like in Class(y) and it will be necessary to send NEW() message to
create class instance (object).

best regards,
Przemek
From druzus at priv.onet.pl  Thu Aug 23 08:49:01 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug 23 08:49:07 2007
Subject: [Harbour] hbdot, how to add others libs like tip, ct, gd?
In-Reply-To: <9257026e0708221341p2feff99l8f6fb1411ee162cd@mail.gmail.com>
References: <9257026e0708221341p2feff99l8f6fb1411ee162cd@mail.gmail.com>
Message-ID: <20070823124901.GA26900@localhost.localdomain>

On Wed, 22 Aug 2007, Lorenzo Fiorini wrote:
> I've tried to rebuild hbdot using hbmak and to add EXTERNAL to my prgs
> but it still says:
> Error BASE/9999  Unknown or unregistered symbol: THTTPSERVER.
> Clearly the same prg builds correctly using hbmk -n -static -gtcgi ...
> Any suggestion?

THTTPSERVER is part of TIP library and functions from this library are not
included in hbextern.ch. You will have to add:
    EXTERN THTTPSERVER
or
    REQUEST THTTPSERVER
to your source code.
If you want you can easy create automatically file with requests for
all Harbour public functions in TIP library by:

 nm libtip.a|grep " T HB_FUN_"|sed -e 's/^.* HB_FUN_/EXTERN /g' > tipextrn.ch

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Thu Aug 23 10:45:54 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Aug 23 10:46:04 2007
Subject: [Harbour] class() reference vs class():new() instance
In-Reply-To: <20070823123644.GB26635@localhost.localdomain>
References: <9257026e0708230527n7f95f4c8l92f626c1f1d50f77@mail.gmail.com>
	<20070823123644.GB26635@localhost.localdomain>
Message-ID: <9257026e0708230745j4f1def81hf1247a924c0a7996@mail.gmail.com>

On 8/23/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> Yes, I'll do that. Class() function will return "class object" just
> like in Class(y) and it will be necessary to send NEW() message to
> create class instance (object).

Many thanks, I was not sure about it.

best regards,
Lorenzo
From druzus at priv.onet.pl  Thu Aug 23 11:24:01 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug 23 11:24:06 2007
Subject: [Harbour] ChangeLog 2007-08-23 17:15 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070823152401.GA19113@localhost.localdomain>

2007-08-23 17:15 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gttrm/gttrm.c
    * set cursor position at beginning of new line on application exit

  * harbour/include/hbextern.ch
    + added missing functions (CDPs, LANGs, HSX, ...)

  * harbour/utils/hbdot/Makefile
  * harbour/utils/hbrun/Makefile
    + added codepage library

best regards,
Przemek
From druzus at priv.onet.pl  Thu Aug 23 11:25:07 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug 23 11:25:12 2007
Subject: [Harbour] ChangeLog(s) BETA branch
Message-ID: <20070823152507.GB19113@localhost.localdomain>

2007-08-23 17:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gttrm/gttrm.c
  * harbour/include/hbextern.ch
  * harbour/utils/hbdot/Makefile
  * harbour/utils/hbrun/Makefile
    * synced with modifications in DEVEL branch

2007-08-23 14:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/make_gcc.sh
  * harbour/make_tgz.sh
  * harbour/harbour.spec
  * harbour/include/hbgtcore.h
  * harbour/source/rtl/hbgtcore.c
  * harbour/source/rtl/gtxwc/gtxwc.c
  * harbour/source/rtl/gttrm/gttrm.c
    * synced with modifications in DEVEL branch

2007-08-23 04:35 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/makefile.vc
  * harbour/makefile.gc
  * harbour/bin/pack_src.sh
  * harbour/include/hbpp.h
  * harbour/include/hbcomp.h
  * harbour/include/hbcompdf.h
  * harbour/include/hbapi.h
  * harbour/include/hbapierr.h
  * harbour/include/hbexprb.c
  * harbour/ChangeLog
  * harbour/harbour.spec
  * harbour/common.mak
  * harbour/contrib/libct/makefile.bc
  * harbour/source/pp/ppcore.c
  * harbour/source/rtl/fserror.c
  * harbour/source/rtl/errorapi.c
  * harbour/source/rtl/tgetlist.prg
  * harbour/source/rtl/gttrm/gttrm.c
  * harbour/source/rtl/browse.prg
  * harbour/source/rtl/tget.prg
  * harbour/source/rtl/browdb.prg
  * harbour/source/rtl/Makefile
  - harbour/source/rtl/terror.prg
  + harbour/source/rtl/einstvar.prg
  * harbour/source/vm/arrays.c
  * harbour/source/vm/memvars.c
  * harbour/source/main/harbour.c
  * harbour/source/rdd/dbcmd.c
  * harbour/source/compiler/hbmain.c
  * harbour/source/compiler/cmdcheck.c
  * harbour/source/compiler/hbcomp.c
  * harbour/source/compiler/genjava.c
  * harbour/source/compiler/genc.c
  * harbour/source/compiler/hbcmplib.c
  * harbour/source/compiler/ppcomp.c
  * harbour/source/compiler/gencli.c
  * harbour/source/compiler/genhrb.c
  * harbour/source/compiler/gencobj.c
  * harbour/source/compiler/genobj32.c
  * harbour/source/compiler/hbusage.c
  * harbour/source/compiler/hbgenerr.c
  + harbour/utils/hbdot
  + harbour/utils/hbdot/hbdot.prg
  + harbour/utils/hbdot/Makefile
  * harbour/utils/hbtest/rt_hvma.prg
  * harbour/utils/hbtest/rt_misc.prg
  * harbour/utils/hbtest/rt_array.prg
  * harbour/utils/Makefile
  * harbour/makefile.bc
  * harbour/config/darwin/gcc.cf
  * harbour/config/darwin/global.cf
  * harbour/config/hpux/gcc.cf
  * harbour/config/hpux/global.cf
  * harbour/config/dos/owatcom.cf
  * harbour/config/dos/watcom.cf
  * harbour/config/dos/bcc16.cf
  * harbour/config/dos/global.cf
  * harbour/config/dos/rsx32.cf
  * harbour/config/dos/djgpp.cf
  * harbour/config/linux/owatcom.cf
  * harbour/config/linux/gcc.cf
  * harbour/config/linux/global.cf
  * harbour/config/os2/gcc.cf
  * harbour/config/os2/icc.cf
  * harbour/config/os2/global.cf
  * harbour/config/sunos/global.cf
  * harbour/config/bsd/gcc.cf
  * harbour/config/bsd/global.cf
  * harbour/config/w32/msvc.cf
  * harbour/config/w32/owatcom.cf
  * harbour/config/w32/watcom.cf
  * harbour/config/w32/bcc32.cf
  * harbour/config/w32/gcc.cf
  * harbour/config/w32/xcc.cf
  * harbour/config/w32/rsxnt.cf
  * harbour/config/w32/global.cf
  * harbour/config/w32/mingw32.cf
  * harbour/make_tgz.sh
    * synced with modifications in DEVEL branch
From lorenzo.fiorini at gmail.com  Thu Aug 23 13:12:14 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Aug 23 13:12:18 2007
Subject: [Harbour] gtxwc issue after "semicold"
Message-ID: <9257026e0708231012r5ea04eeama1d226e642ffa7bf@mail.gmail.com>

I see a "flash" effect at the app start and I have a black line at
bottom -1 of the screen.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Thu Aug 23 13:31:31 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Aug 23 13:31:35 2007
Subject: [Harbour] Re: gtxwc issue after "semicold"
In-Reply-To: <9257026e0708231012r5ea04eeama1d226e642ffa7bf@mail.gmail.com>
References: <9257026e0708231012r5ea04eeama1d226e642ffa7bf@mail.gmail.com>
Message-ID: <9257026e0708231031q30cabbefscb44a4e700f550c8@mail.gmail.com>

On 8/23/07, Lorenzo Fiorini <lorenzo.fiorini@gmail.com> wrote:

> I see a "flash" effect at the app start and I have a black line at
> bottom -1 of the screen.

Indeed it seems that newer code is better than older.
Some time ago I had to add:

      #ifndef __XHARBOUR__
         setmode( MAXROW() , MAXCOL() )
      #endif

to get the same rows, cols as the "old" xHarbour gtxwc.
Now it seems that I HAD to delete this workaround.
Try the code below.

So probably is more a fix than a problem :)

best regards,
Lorenzo

// tt21.prg

request HB_GT_XWC_DEFAULT

procedure main

   ? setmode( 35, 109 )
   clear screen
   ? setmode( maxrow(), maxcol() )
   wait

return

// tt21.prg
From druzus at priv.onet.pl  Thu Aug 23 14:03:51 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug 23 14:03:59 2007
Subject: [Harbour] Re: gtxwc issue after "semicold"
In-Reply-To: <9257026e0708231031q30cabbefscb44a4e700f550c8@mail.gmail.com>
References: <9257026e0708231012r5ea04eeama1d226e642ffa7bf@mail.gmail.com>
	<9257026e0708231031q30cabbefscb44a4e700f550c8@mail.gmail.com>
Message-ID: <20070823180351.GA8972@localhost.localdomain>

On Thu, 23 Aug 2007, Lorenzo Fiorini wrote:
> > I see a "flash" effect at the app start and I have a black line at
> > bottom -1 of the screen.
> Indeed it seems that newer code is better than older.
> Some time ago I had to add:
>       #ifndef __XHARBOUR__
>          setmode( MAXROW() , MAXCOL() )
>       #endif
> to get the same rows, cols as the "old" xHarbour gtxwc.
> Now it seems that I HAD to delete this workaround.
> Try the code below.
> So probably is more a fix than a problem :)

I added to GTXWC support for late opening console window.
It allows to create an application which can use GTXWC
and still can be executed without XSERVER. F.e.:

   REQUEST HB_GT_XWC_DEFAULT
   PROC MAIN()
      IF EMPTY( GETENV( "DISPLAY" ) )
         STDERR( "This program can be executed only in XWindow" + ;
                  HB_OsNewLine() )
         QUIT
      ENDIF
      ALERT( "Hello World !!!" )
   RETURN

Before my today modifications Harbour's GTXWC was opening console
Window when character different then " " or in different then default
color (W/N=>7) was shown. It means that CLEAR SCREEN was not enough to
activate console Window. Now putting any character (even simple: ? " ")
activates it.

> // tt21.prg
> request HB_GT_XWC_DEFAULT
> procedure main
>    ? setmode( 35, 109 )
>    clear screen
>    ? setmode( maxrow(), maxcol() )
>    wait
> return

Now after CLEAR SCREEN you will have console window so you do not have
to repeat setmode(). BTW with previous version it was enough to make ? "."
to activate console window and it was not necessary to repeat setmode().

In xHarbour there is no default screen buffer like in Harbour so I had
to make it in less efficient way by adding to all output functions a small
code which creates console window if it does not exist.

best regards,
Przemek
From teo at windtelsoft.com  Thu Aug 23 14:50:41 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Thu Aug 23 14:50:51 2007
Subject: [Harbour] ChangeLog 2007-08-22 19:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070822172457.GA11601@localhost.localdomain>
References: <20070822172457.GA11601@localhost.localdomain>
Message-ID: <200708231350.42246.teo@windtelsoft.com>

On Wednesday 22 August 2007 12:24:57 pm Przemyslaw Czerpak wrote:
> 2007-08-22 19:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/include/hbpp.h
>   * harbour/include/hbcomp.h
>   * harbour/include/hbcompdf.h
>   * harbour/source/pp/ppcore.c
>   * harbour/source/rtl/gttrm/gttrm.c
>   * harbour/source/main/harbour.c
>   * harbour/source/compiler/hbmain.c
>   * harbour/source/compiler/cmdcheck.c
>   * harbour/source/compiler/hbcomp.c
>   * harbour/source/compiler/hbcmplib.c
>   * harbour/source/compiler/ppcomp.c
>     * added 'const' to some 'char *' declarations
>     + added hb_pp_inBuffer()
>     + extended hb_compMain() to accept source code passed as ASCIIZ
>       string
>     + .prg function HB_COMPILEFROMBUF()
>     + added support for -q2 compiler switch - it disables _ALL_
> stdout/stderr messages
>
>   * harbour/utils/Makefile
>   + harbour/utils/hbdot
>   + harbour/utils/hbdot/hbdot.prg
>   + harbour/utils/hbdot/Makefile
>     + added hbdot utility program.
>       It's a "DOt Prompt" Console for the Harbour Language
>          Syntax:  hbdot [<hrbfile[.prg]> [<parameters,...>]]
>       It should look and work in similar way to pp/xBaseScript
>       by Ron Pinkas but unlike xBaseScript is does not have preprocessor
>       or simulated runtime environment but simply uses Harbour pp and
>       compiler libraries to preprocess and compile commands. It means
>       that it supports all language constructions also statements, f.e.:
>          "for i:=1 to 10; ? i; next"
>       Additionally it can also compile and execute .prg files given as
>       first parameter just like hbrun.
>       Please test it. If it will work as expected then we can remove
>       'pp' (contrib/dot) from standard packages

Hello Przemek,

First, thanks for this powerfull addition.

Now I am able to create in run-time, compiled functions/procedures directly 
from plain source code. Which allows to have a 'library' of customized 
functions for specific tasks.

Please kindly answer for me the following questions:

1. Why it is neccesary to have HB_ARGV(0) within the 
HB_COMPILEBUF/HB_COMPILEFROMBUF functions ?
  ( the starting executable is doing the compilation in a separate process ? )

2. I need to set inside the source code the -n compilation switch (no implicit 
starting procedure). How can I set a determined compile switch ?
  ( Is there a #pragma alike syntax available ? )

3. It is possible to 'override' a currently compiled/linked function (inside 
the current executable binary) with a new one (the same name) created from 
the HB_COMPILEBUF/HB_COMPILEFROMBUF and loaded in the symbol table with 
__hbLoad() ?


thanks in advance for your time.


best regards

Teo
From lorenzo.fiorini at gmail.com  Thu Aug 23 15:27:19 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Aug 23 15:27:24 2007
Subject: [Harbour] Re: gtxwc issue after "semicold"
In-Reply-To: <20070823180351.GA8972@localhost.localdomain>
References: <9257026e0708231012r5ea04eeama1d226e642ffa7bf@mail.gmail.com>
	<9257026e0708231031q30cabbefscb44a4e700f550c8@mail.gmail.com>
	<20070823180351.GA8972@localhost.localdomain>
Message-ID: <9257026e0708231227o1aab4376r8c827673f75102b4@mail.gmail.com>

On 8/23/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> Now after CLEAR SCREEN you will have console window so you do not have
> to repeat setmode(). BTW with previous version it was enough to make ? "."
> to activate console window and it was not necessary to repeat setmode().

I confirm that removing setmode(maxrow(), maxcol()) the actual code works well,

For example the code below set the window to the max, to defined
rows,cols and to the max again without "flickers".

Many thanks again.

best regards,
Lorenzo

request HB_GT_XWC_DEFAULT

procedure main

   ? setmode( 255, 255 )
   clear screen
   ? maxrow(), maxcol()
   wait
   ? setmode( 35, 109 )
   clear screen
   ? maxrow(), maxcol()
   wait
   ? setmode( 255, 255 )
   clear screen
   ? maxrow(), maxcol()
   wait

return
From druzus at priv.onet.pl  Thu Aug 23 15:41:37 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug 23 15:41:43 2007
Subject: [Harbour] ChangeLog 2007-08-22 19:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <200708231350.42246.teo@windtelsoft.com>
References: <20070822172457.GA11601@localhost.localdomain>
	<200708231350.42246.teo@windtelsoft.com>
Message-ID: <20070823194137.GA9991@localhost.localdomain>

On Thu, 23 Aug 2007, Teo Fonrouge wrote:
> 1. Why it is neccesary to have HB_ARGV(0) within the 
> HB_COMPILEBUF/HB_COMPILEFROMBUF functions ?
>   ( the starting executable is doing the compilation in a separate process ? )

It's only for some existing or future compiler messages which may use
process name. You can pass any value as first argument.
No additional processes are created.

> 2. I need to set inside the source code the -n compilation switch (no implicit 
> starting procedure). How can I set a determined compile switch ?
>   ( Is there a #pragma alike syntax available ? )

It's not possible. You have to pass "-n" to HB_COMPILE*() switch. In hbrun
"-n" is enabled by default.
It's possible to change some compiler switches using #pragma, f.e.:

    #pragma -es2
or:
    #pragma ExitSeverity=2

    #pragma -w2
or:
    #pragma WarningLevel=2

etc. but -n cannot be changed in such way - just simply it has to be
defined at beginning of compilation. If you need such functionality
then you can easy add support for it yourself, f.e. use this function
to take default switches:

   func getSwitches( cFile )
      local cLine, cHead := "//COMPILE:"
      cLine := alltrim( memoline( memoread( cFile ),, 1 ) )
      if UPPER( cLine ) = cHead
         return hb_atokens( substr( cLine, len( cHead ) + 1 ) )
      endif
   return {}

and then if you will want to set some compiler switches simply start
your surce code with sth like:

   //COMPILE: -n -w -es2

and use getSwitches( cFile ) as one of HB_COMPILE*() parameters.


> 3. It is possible to 'override' a currently compiled/linked function (inside 
> the current executable binary) with a new one (the same name) created from 
> the HB_COMPILEBUF/HB_COMPILEFROMBUF and loaded in the symbol table with 
> __hbLoad() ?

Not yet. Now functions are not overloaded. In the future I'll add support
for it to HB_LIBLOAD() and __hrbLoad(). These functions will accept numeric
parameter with some default actions, f.e.:
   HB_RTLD_LAZY         // allow to load libraries with unsuficient
                        // dependences
   HB_RTLD_NOCONFLICT   // refuse to load library when name conflict appears
   HB_RTLD_OVERLOADFUNC // overload existing functions
   HB_RTLD_LOCALFUNC    // overload functions only locally (in loaded module)
   HB_RTLD_NOINIT       // do not execute INIT functions
   HB_RTLD_NOEXIT       // do not execute EXIT functions
   HB_RTLD_REINITSTATIC // force static variable reinitialization when
                        // library was unloaded and then loaded again
etc.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Thu Aug 23 16:02:30 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Aug 23 16:02:37 2007
Subject: [Harbour] hbdot, how to add others libs like tip, ct, gd?
In-Reply-To: <20070823124901.GA26900@localhost.localdomain>
References: <9257026e0708221341p2feff99l8f6fb1411ee162cd@mail.gmail.com>
	<20070823124901.GA26900@localhost.localdomain>
Message-ID: <9257026e0708231302m51d699e7kdcb6b0a488151804@mail.gmail.com>

On 8/23/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> THTTPSERVER is part of TIP library and functions from this library are not
> included in hbextern.ch. You will have to add:
>     EXTERN THTTPSERVER
> or
>     REQUEST THTTPSERVER
> to your source code.
> If you want you can easy create automatically file with requests for
> all Harbour public functions in TIP library by:
>
>  nm libtip.a|grep " T HB_FUN_"|sed -e 's/^.* HB_FUN_/EXTERN /g' > tipextrn.ch

Many thanks.

Since I use both beta3 and dev I had /usr/lib/libharbour.so. linked to
the "wrong" so.

For anyone interested rebuilding hbdot with hbmk adding tip, pqsql, gd
and then adding EXTERNALs to the prg I can test a lot of code directly
from prg.

With "modi comm x.prg" and "do x.prg" I could think I'm back to dbase III
( unfortunately 20 years older :)

best regards,
Lorenzo
From teo at windtelsoft.com  Thu Aug 23 16:26:14 2007
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Thu Aug 23 16:26:20 2007
Subject: [Harbour] ChangeLog 2007-08-22 19:10 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070823194137.GA9991@localhost.localdomain>
References: <20070822172457.GA11601@localhost.localdomain>
	<200708231350.42246.teo@windtelsoft.com>
	<20070823194137.GA9991@localhost.localdomain>
Message-ID: <200708231526.14730.teo@windtelsoft.com>

On Thursday 23 August 2007 02:41:37 pm Przemyslaw Czerpak wrote:
> On Thu, 23 Aug 2007, Teo Fonrouge wrote:
> > 1. Why it is neccesary to have HB_ARGV(0) within the
> > HB_COMPILEBUF/HB_COMPILEFROMBUF functions ?
> >   ( the starting executable is doing the compilation in a separate
> > process ? )
>
> It's only for some existing or future compiler messages which may use
> process name. You can pass any value as first argument.
> No additional processes are created.
>
> > 2. I need to set inside the source code the -n compilation switch (no
> > implicit starting procedure). How can I set a determined compile switch ?
> > ( Is there a #pragma alike syntax available ? )
>
> It's not possible. You have to pass "-n" to HB_COMPILE*() switch. In hbrun
> "-n" is enabled by default.
> It's possible to change some compiler switches using #pragma, f.e.:
>
>     #pragma -es2
> or:
>     #pragma ExitSeverity=2
>
>     #pragma -w2
> or:
>     #pragma WarningLevel=2
>
> etc. but -n cannot be changed in such way - just simply it has to be
> defined at beginning of compilation. If you need such functionality
> then you can easy add support for it yourself, f.e. use this function
> to take default switches:
>
>    func getSwitches( cFile )
>       local cLine, cHead := "//COMPILE:"
>       cLine := alltrim( memoline( memoread( cFile ),, 1 ) )
>       if UPPER( cLine ) = cHead
>          return hb_atokens( substr( cLine, len( cHead ) + 1 ) )
>       endif
>    return {}
>
> and then if you will want to set some compiler switches simply start
> your surce code with sth like:
>
>    //COMPILE: -n -w -es2
>
> and use getSwitches( cFile ) as one of HB_COMPILE*() parameters.
>
> > 3. It is possible to 'override' a currently compiled/linked function
> > (inside the current executable binary) with a new one (the same name)
> > created from the HB_COMPILEBUF/HB_COMPILEFROMBUF and loaded in the symbol
> > table with __hbLoad() ?
>
> Not yet. Now functions are not overloaded. In the future I'll add support
> for it to HB_LIBLOAD() and __hrbLoad(). These functions will accept numeric
> parameter with some default actions, f.e.:
>    HB_RTLD_LAZY         // allow to load libraries with unsuficient
>                         // dependences
>    HB_RTLD_NOCONFLICT   // refuse to load library when name conflict
> appears HB_RTLD_OVERLOADFUNC // overload existing functions
>    HB_RTLD_LOCALFUNC    // overload functions only locally (in loaded
> module) HB_RTLD_NOINIT       // do not execute INIT functions
>    HB_RTLD_NOEXIT       // do not execute EXIT functions
>    HB_RTLD_REINITSTATIC // force static variable reinitialization when
>                         // library was unloaded and then loaded again
> etc.

Splendid.


best regards

Teo Fonrouge
From gvarona at ec-red.com  Thu Aug 23 17:53:36 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Thu Aug 23 17:48:04 2007
Subject: [Harbour] Foro's/Lists in spanish
In-Reply-To: <9257026e0708231012r5ea04eeama1d226e642ffa7bf@mail.gmail.com>
References: <9257026e0708231012r5ea04eeama1d226e642ffa7bf@mail.gmail.com>
Message-ID: <46CE01E0.4030301@ec-red.com>

Hola Amigos:

?Existe algun foro de Harbour en espa?ol?

Veo que esta es una Lista de Desarrolladores, ?Puedo hacer preguntas de 
programaci?n en este foro?

Sucede que puedo leer los mensajes en ingl?s, pero para escribir me 
complico bastante.

Gracias de Antemano


powered for http://ets.freetranslation.com/:

Hello friends:
Exists algun forum of Harbour in Spanish? 

I see that this is a List of Desarrolladores, ?I can ask questions of 
programming in this forum? 

It happens that I can read the messages in English, but to write I 
complicate me enough. 

Thanks beforehand

Salu2,
GVS
From philb at philb.us  Thu Aug 23 21:04:47 2007
From: philb at philb.us (Phil Barnett)
Date: Thu Aug 23 21:05:32 2007
Subject: [Harbour] Foro's/Lists in spanish
In-Reply-To: <46CE01E0.4030301@ec-red.com>
References: <9257026e0708231012r5ea04eeama1d226e642ffa7bf@mail.gmail.com>
	<46CE01E0.4030301@ec-red.com>
Message-ID: <200708232104.47180.philb@philb.us>

On Thursday 23 August 2007, Guillermo Varona Silup? wrote:
> I see that this is a List of Desarrolladores, ?I can ask questions of
> programming in this forum?

Yes. English is the preferred language here, but there are fluent users of 
many languages here, so you can probably get help.

> It happens that I can read the messages in English, but to write I
> complicate me enough.

English can be a difficult language. Ask in your language. We'll try to help.

> Thanks beforehand

Thanks for asking.

-- 
Phil Barnett
AI4OF
SKCC #600
From lorenzo.fiorini at gmail.com  Fri Aug 24 04:40:40 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Aug 24 04:40:56 2007
Subject: [Harbour] optimistic locking and XML/JSON rdd "native" support
In-Reply-To: <200708222056.38159.philb@philb.us>
References: <9257026e0708220820w56313cbej2c863b1dbba515d0@mail.gmail.com>
	<200708222056.38159.philb@philb.us>
Message-ID: <9257026e0708240140k1e5e4f46xd604cfd921eefcab@mail.gmail.com>

On 8/23/07, Phil Barnett <philb@philb.us> wrote:

> If you pack the database after deletions, your primary key just changed. Don't
> use recno for a primary key. It will get even with you when you least expect
> it.

You're right Phil, probably "perfect" was too much :)

But indeed recno() is the easiest thing to manage, pack needs
exclusive access so it is not a user common option and using real
primary keys would require to manage the index to use.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Fri Aug 24 05:01:24 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Aug 24 05:01:31 2007
Subject: [Harbour] Will Harbour be multitasking?
Message-ID: <9257026e0708240201n45cd0c98occ7000e36dfa4fd@mail.gmail.com>

I don't need it today since there are many other things to do but I'd
like to know if and when Harbour will have multitasking.

It's not a request, I can implement it in different ways I simply need
to know it to design the framework.

The idea is to "listen" a port and exec a procedure when a request
comes while the app is "normally used". In this way I could implement
new interface gradually instead of a "all or nothing" approach.

best regards,
Lorenzo
From philb at philb.us  Fri Aug 24 08:23:53 2007
From: philb at philb.us (Phil Barnett)
Date: Fri Aug 24 08:24:39 2007
Subject: [Harbour] optimistic locking and XML/JSON rdd "native" support
In-Reply-To: <9257026e0708240140k1e5e4f46xd604cfd921eefcab@mail.gmail.com>
References: <9257026e0708220820w56313cbej2c863b1dbba515d0@mail.gmail.com>
	<200708222056.38159.philb@philb.us>
	<9257026e0708240140k1e5e4f46xd604cfd921eefcab@mail.gmail.com>
Message-ID: <200708240823.53823.philb@philb.us>

On Friday 24 August 2007, Lorenzo Fiorini wrote:
> On 8/23/07, Phil Barnett <philb@philb.us> wrote:
> > If you pack the database after deletions, your primary key just changed.
> > Don't use recno for a primary key. It will get even with you when you
> > least expect it.
>
> You're right Phil, probably "perfect" was too much :)
>
> But indeed recno() is the easiest thing to manage, pack needs
> exclusive access so it is not a user common option and using real
> primary keys would require to manage the index to use.

Don't take the chance. It only takes one mistake to ruin the key. It's much 
better to dedicate a column in the table and do it right.

What would be nice would be an autonum feature for an identity column.

-- 
Phil Barnett
AI4OF
SKCC #600
From druzus at priv.onet.pl  Fri Aug 24 08:35:28 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Aug 24 08:35:35 2007
Subject: [Harbour] Will Harbour be multitasking?
In-Reply-To: <9257026e0708240201n45cd0c98occ7000e36dfa4fd@mail.gmail.com>
References: <9257026e0708240201n45cd0c98occ7000e36dfa4fd@mail.gmail.com>
Message-ID: <20070824123528.GA22883@localhost.localdomain>

On Fri, 24 Aug 2007, Lorenzo Fiorini wrote:
> I don't need it today since there are many other things to do but I'd
> like to know if and when Harbour will have multitasking.

It will. I hope to the end of this year.

> It's not a request, I can implement it in different ways I simply need
> to know it to design the framework.
> The idea is to "listen" a port and exec a procedure when a request
> comes while the app is "normally used". In this way I could implement
> new interface gradually instead of a "all or nothing" approach.

select()/poll() are very powerful functions and in many cases such
type of polling is much more efficient then creating separate thread.
If separate thread is necessary then sometimes creating new process
is not bad idea - you will not have to worry about some synchronization
mechanisms and in *nixes fork() is relatively quite fast (f.e. in Linux).

Ryszard announced that he is working on polling system for Harbour.
I do not know the current status of his code but it looks like quite
good solution for you.
Ryszard?

best regards,
Przemek
From gvarona at ec-red.com  Fri Aug 24 09:55:19 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Fri Aug 24 09:49:46 2007
Subject: [Harbour] Foro's/Lists in spanish
In-Reply-To: <200708232104.47180.philb@philb.us>
References: <9257026e0708231012r5ea04eeama1d226e642ffa7bf@mail.gmail.com>	<46CE01E0.4030301@ec-red.com>
	<200708232104.47180.philb@philb.us>
Message-ID: <46CEE347.5050209@ec-red.com>

Phil Barnett escribi?:

>Yes. English is the preferred language here, but there are fluent users of 
>many languages here, so you can probably get help.
>  
>
Thanks!!!

>English can be a difficult language. Ask in your language. We'll try to help.
>  
>
Many thanks again.

Best Regard.
GVS

From gvarona at ec-red.com  Fri Aug 24 10:08:27 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Fri Aug 24 10:02:49 2007
Subject: [Harbour] Support for Class TopBarMenu of Clipper 5.3
In-Reply-To: <469B03D6.40A2@synel.co.il>
References: <469B03D6.40A2@synel.co.il>
Message-ID: <46CEE65B.8090007@ec-red.com>

Chen Kedem escribi?:

>GVS wrote:
>  
>
>>Subject: Support for Class TopBarMenu of Clipper 5.3
>>not support?
>>    
>>
>There is source/rtl/ttopbar.prg in the repository. You probably need
>to build Harbour with the HB_COMPAT_C53 flag (it is on by default).
>  
>
?C?mo puedo hacer para construir Harbour con el flag HB_COMPAT_C53?
?D?nde especifico este flag?

Powered for http://ets.freetranslation.com/
How can I do to build Harbour with the flag HB_COMPAT_C53?  Where do I 
specify this flag? 

>What platform (compiler/OS) you are using?
>  
>
WinXP SP2 + MinGW 3.4.2

Best Regards.
GVS
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070824/39c6c9d6/attachment.html
From lorenzo.fiorini at gmail.com  Fri Aug 24 10:13:16 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Aug 24 10:13:25 2007
Subject: [Harbour] Will Harbour be multitasking?
In-Reply-To: <20070824123528.GA22883@localhost.localdomain>
References: <9257026e0708240201n45cd0c98occ7000e36dfa4fd@mail.gmail.com>
	<20070824123528.GA22883@localhost.localdomain>
Message-ID: <9257026e0708240713v2ec36d83s2cb128536c94b4b7@mail.gmail.com>

On 8/24/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> It will. I hope to the end of this year.

Many thanks.

> select()/poll() are very powerful functions and in many cases such
> type of polling is much more efficient then creating separate thread.
> If separate thread is necessary then sometimes creating new process
> is not bad idea - you will not have to worry about some synchronization
> mechanisms and in *nixes fork() is relatively quite fast (f.e. in Linux).

Interesting. I really don't need to has separate threads. I only need
a "switch" to move the I/O path of the app from the kdb/scr to http. I
could even ask to the user to do it in the menu sth like "switch the
commands to external".

best regards,
Lorenzo
From gvarona at ec-red.com  Fri Aug 24 12:14:26 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Fri Aug 24 12:08:53 2007
Subject: [Harbour] Support for Class TopBarMenu of Clipper 5.3
In-Reply-To: <46CEE65B.8090007@ec-red.com>
References: <469B03D6.40A2@synel.co.il> <46CEE65B.8090007@ec-red.com>
Message-ID: <46CF03E2.3070207@ec-red.com>

Bien, ya he construido el harbour con compatibilidad para Clipper 5.3x 
(esta por default), esta es la informaci?n de la construcci?n:
Well, already I have built the harbour with compatibility for Clipper 
5.3x (this by default), this is the information of the build: 

C:\HARBOU~1\bin>harbour /build
Harbour devel build 1.1-1 Intl.
Copyright 1999-2007, http://www.harbour-project.org/

Harbour Build Info
---------------------------
Version: Harbour devel build 1.1-1 Intl.
PCode version: 0.2
Compiler: MinGW GNU C 3.4.2 (32 bit)
Platform: Windows XP 5.1.2600 Service Pack 2
Built on: Aug 24 2007 10:18:55
Last ChangeLog entry: 2007-06-14 00:20 UTC+0200 Przemyslaw Czerpak
ChangeLog CVS version: ChangeLog,v 1.5396 2007/06/13 22:20:13
Harbour extensions: Yes
CA-Clipper 5.2e undocumented: Yes
CA-Clipper 5.2e strict compatibility: No
CA-Clipper 5.3x compatible extensions: Yes
xHarbour compatible extensions: No
Alaska Xbase++ compatible extensions: Yes
CA-Visual Objects compatible extensions: No
Multisoft Flagship compatible extensions: Yes
CLIP compatible extensions: No
Microsoft FoxPro compatible extensions: No
dBase compatible extensions: No
Object file generation support: No
ANSI C usage: Non strict
C++ mode: Off
Compiler YACC debug mode: Off
Memory tracing and statistics: On
Maximum symbol name length: 63
---------------------------

Pero al intentar compilar el ejemplo menu.prg (lo adjunto), que esta en 
la carpeta C:\CLIP53\SOURCE\SAMPLE, obtengo este error:
But to try to compile the example menu.prg (the enclosed thing), that 
this in the folder C: \CLIP53\SOURCE\SAMPLE, I obtain this error: 

Error BASE/1081  Argument error: +
Called from POPUPMENU:SETCOORS(455)
Called from TOPBARMENU:DISPLAY(419)
Called from TOPBARMENU:MODAL(541)
Called from MENUMODAL(98)
Called from MAIN(46)
C:\CLIP53\SOURCE\SAMPLE>

?Que puede estar pasando?, agradezco de antemano su ayuda.
hat may be passing?, I thank beforehand his aid. 

Best Regards
GVS

-------------- next part --------------
/***
*
*  Menu.prg
*
*  Sample menu handling functions
*
*  Copyright (c) 1990-1995, Computer Associates International Inc.
*  All rights reserved.
*
*  This is not meant to run as a standalone file.  There are function
*  calls from within this file (such as MyCreateFile()) that do not
*  exist.  This code can be modified, however, for your use.  If it
*  is modified, use the /n switch when compiling.
*
*  Compile: CLIPPER menu /n
*  Link: EXOSPACE FI menu
*
***/

   #include "button.ch"   // Menu definitions
   #include "inkey.ch"    // Key definitions


// This function sets up the environment and then calls MENU_Create() to
// create the menu.  Finally, it waits for a menu event to occur by calling
// the MenuModal() function.

* function MENU_Test()

FUNCTION MAIN
   local oInfo

   // Allow mouse actions to take place
   SET( _SET_EVENTMASK, INKEY_ALL )

   // Make the mouse cursor visible
   msetcursor(.T.)

   // Clear the screen
   cls

   // Create the menu
   oInfo=MENU_Create()

   // Wait for a menu event and do not exit until File/Exit is chosen
   DO WHILE MenuModal(oInfo,1,24,1,79,"r/w") <> 999
   ENDDO

   return(NIL)



// This function will create the menu and return the newly created
// MenuObject as its return value.  This menu consists of three "Main Menu choices" ..
// File, Edit, and Options.  Additionally, the Edit TopBarMenu item has a secondary menu for
// one of its menu items.

function MENU_Create()
   local oTopBar, oPopUp, oPopUp1, oItem


      // TopBar() creates the menu at the very top of the screen
      oTopBar := TopBar( 0, 10, 50)
      oTopBar:ColorSpec :="b/w,gr+/rb,r/w,g/rb,n+/w,w+/b"


      // Create a new popup menu named FILE and add it to the TopBar object
      oPopUp := PopUp()
      oPopUp :ColorSpec:= "b/w,gr+/rb,r/w,g/rb,n+/w,w+/b"
      oTopBar:AddItem( MenuItem ( "&File",oPopUp) )


      // Add some menu items to the newly created File popup
      oItem :=MenuItem( "&New" ,{|| MyCreateFile() }, K_CTRL_N,"Create a new file", 101)
      oPopUp:AddItem( oItem)


      oItem :=MenuItem( "&Open..." ,{|| MyOpenFile() }, K_CTRL_O,"Open a file")
      oPopUp:AddItem( oItem)


      oItem :=MenuItem( "Sa&ve" ,{|| MySaveFile() }, K_CTRL_V,"Save a file")

      // Disable this menu item
      oItem:Enabled := .f.
      oPopUp:AddItem( oItem)


      // Add a separator
      oPopUp:AddItem( MenuItem( MENU_SEPARATOR ) )


      oItem :=MenuItem( "&Print..." ,{|| MyPrintFile() }, K_CTRL_P,"Print a file")
      // Disable this menu item
      oItem:Enabled := .f.
      oPopUp:AddItem( oItem)


      // Another separator
      oPopUp:AddItem( MenuItem( MENU_SEPARATOR ) )


      oItem :=MenuItem( "E&xit" ,{|| .t. }, K_ALT_F4,"End of application", 999)
      oPopUp:AddItem( oItem)


      // Create a second popup menu named EDIT and attach it to oTopBar
      oPopUp := PopUp()
      oPopUp :ColorSpec:= "b/w,gr+/rb,r/w,g/rb,n+/w,w+/b"
      oTopBar:AddItem( MenuItem ( "&Edit",oPopUp) )

      // Add some menu items to this EDIT popup menu
      oItem :=MenuItem( "&Undo" ,{|| MyUndo() }, K_CTRL_Z,"Reverse changes made to this file")
      oPopUp:AddItem( oItem)


      oItem :=MenuItem( "Cu&t" ,{|| MyCut() }, K_CTRL_X,"Cut to clipboard")
      oPopUp:AddItem( oItem)


      oItem :=MenuItem( "&Copy" ,{|| MyCopy() }, K_CTRL_C,"Copy to clipboard")
      oPopUp:AddItem( oItem)


      oItem :=MenuItem( "&Paste" ,{|| MyPaste() }, K_CTRL_V,"Paste from clipboard")
      oPopUp:AddItem( oItem)

      // Another separator
      oPopUp:AddItem( MenuItem( MENU_SEPARATOR ) )


      // Create a new popup menu on the EDIT popup menu named Go.  (This is also
      // known as a "Cascading" menu.)
      oPopUp1 := PopUp()
      oPopUp1 :ColorSpec:= "b/w,gr+/rb,r/w,g/rb,n+/w,w+/b"
      oItem :=MenuItem( "&Go",oPopUp1 )

      oPopup:AddItem( oItem )

      // Add some items to the Go cascading menu
      oItem :=MenuItem( "&Go To..." ,{|| MyGoToLine() }, K_F5,"Go to a specific line number")
      oPopUp1:AddItem( oItem)


      oItem :=MenuItem( "G&o To Top" ,{|| MyGoTop() }, K_CTRL_HOME,"Go to top of file")
      oPopUp1:AddItem( oItem)


      oItem :=MenuItem( "Go To &Bottom" ,{|| MyGoBottom() }, K_CTRL_END,"Go to bottom of file")
      oPopUp1:AddItem( oItem)

      // Change the style of the GO popup menu.  The second character in
      // the string below represents the arrow that will be displayed next
      // to the word GO.  The default is a "", but I have changed it to
      // a ">".  I have kept the check mark ("?") the same as the default.
      oItem :Style = "?>"

      // Add yet another separator
      oPopUp:AddItem( MenuItem( MENU_SEPARATOR ) )


      // Add one final menu item to the EDIT popup menu
      oItem :=MenuItem( "&Find..." ,{|| MySearch() }, K_ALT_F3,"Search for text")
      oPopUp:AddItem( oItem)

      //Create a 3rd PopUpMenu called OPTIONS and attatch it to oTopBar
      oPopUp := PopUp()
      oPopUp :ColorSpec:= "b/w,gr+/rb,r/w,g/rb,n+/w,w+/b"
      oTopBar:AddItem( MenuItem ( "&Options",oPopUp) )


      // Add the first item to the OPTIONS popup menu
      oItem :=MenuItem( "AutoSave" ,{|| MyAutoSave() },,"Toggle auto save preference")


      // Place a check mark next to this new item
      oItem:Checked := .t.
      oPopUp:AddItem( oItem)


      // Add a second item to the OPTIONS popup menu.
      oItem :=MenuItem( "Tab Stops..." ,{|| MyTabStops() },,"Set number of spaces for tab stops")
      oPopUp:AddItem( oItem)


   // Return our TopBar object back to MENU_Test()
   return ( oTopBar)


// The following are dummy functions which do not do anything
// These functions are here to avoid receiving Unresolved External
// Errors

FUNCTION MyCreateFile()
RETURN NIL

FUNCTION MyOpenFile()
RETURN NIL

FUNCTION MySaveFile()
RETURN NIL

FUNCTION MyPrintFile()
RETURN NIL

FUNCTION MyUndo()
RETURN NIL

FUNCTION MyCut()
RETURN NIL

FUNCTION MyCopy()
RETURN NIL

FUNCTION MyPaste()
RETURN NIL

FUNCTION MyGoToLine()
RETURN NIL

FUNCTION MyGoTop()
RETURN NIL

FUNCTION MyGoBottom()
RETURN NIL

FUNCTION MySearch()
RETURN NIL

FUNCTION MyAutoSave()
RETURN NIL

FUNCTION MyTabStops()
RETURN NIL
From mpaliwoda at interia.pl  Fri Aug 24 15:26:24 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Aug 24 13:26:34 2007
Subject: [Harbour] Compiling Harbour with MingW using make_gcc.sh
Message-ID: <46CF30E0.4030507@interia.pl>

Hi Przemek,

Compiling Harbour with MingW using make_gcc.sh I get :

----------
lib/gc/libvm.a(mainstd.o):mainstd.c:(.text+0x0): multiple definition of `main'
obj/gc/hbverfix.o:hbverfix.c:(.text+0xd0): first defined here
collect2: ld returned 1 exit status
make: *** [bin/gc/hbverfix.exe] Error 1
----------

Compiling Harbour with Cygwin using make_gcc.sh is OK,
except hbdot.prg where I had to change the order last
#ifdefs :

------------
#if defined( __PLATFORM__Windows )
REQUEST HB_GT_WIN_DEFAULT
#elif defined( __PLATFORM__UNIX )
REQUEST HB_GT_TRM_DEFAULT
#elif defined( __PLATFORM__DOS )
REQUEST HB_GT_DOS_DEFAULT
#elif defined( __PLATFORM__OS2 )
REQUEST HB_GT_OS2_DEFAULT
#endif
------------

Did I misconfigure MingW or it is makefile.gc error ?


I also noticed that you added a line :
    mkdir -p obj/$CC_DIRNAME lib/$CC_DIRNAME bin/$CC_DIRNAME
to make_gcc.sh. Is it really neccesary ? Makefile.gc should
handle it properly I guess ( hopefully in Linux also :) ).

-- 

Marek


----------------------------------------------------------------------
Piekne kobiety wsrod samych swin!
Obejrzyj

>>>http://link.interia.pl/f1b18

From druzus at priv.onet.pl  Fri Aug 24 13:50:52 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Aug 24 13:51:01 2007
Subject: [Harbour] Will Harbour be multitasking?
In-Reply-To: <9257026e0708240713v2ec36d83s2cb128536c94b4b7@mail.gmail.com>
References: <9257026e0708240201n45cd0c98occ7000e36dfa4fd@mail.gmail.com>
	<20070824123528.GA22883@localhost.localdomain>
	<9257026e0708240713v2ec36d83s2cb128536c94b4b7@mail.gmail.com>
Message-ID: <20070824175052.GA25268@localhost.localdomain>

On Fri, 24 Aug 2007, Lorenzo Fiorini wrote:
> > select()/poll() are very powerful functions and in many cases such
> > type of polling is much more efficient then creating separate thread.
> > If separate thread is necessary then sometimes creating new process
> > is not bad idea - you will not have to worry about some synchronization
> > mechanisms and in *nixes fork() is relatively quite fast (f.e. in Linux).
> Interesting. I really don't need to has separate threads. I only need
> a "switch" to move the I/O path of the app from the kdb/scr to http. I
> could even ask to the user to do it in the menu sth like "switch the
> commands to external".

Below I'm attaching simple code (only for *nixes, it will not work in
Windows) with two functions from my private library: HB_POPEN() and
HB_FDSELECT() and small .prg program which illustrates how they can be
used.
This code copies from SourceForge FTP server source code of BETA3 but
for user it will look like coping in background because it will still
accept keyboard input. Please note that it will not consume CPU so it's
very friendly for multiuser/multiprocess environment. If you want you
can easy extend this code to copy simultaneously more files.

IMHO it should be enough for you.

BTW threads are very popular now but about 90% of programs which uses
threads should not use threads but simple polling because threads are
used as workaround for blocking IO operation.
Additionally in MS-Windows there is no central input function like select()
or poll() in *nixes which can be used for any type of handles. select() in
MS-Windows works only for sockets and WaitForMultipleObjects() does not work
for sockets (maybe it was changed in newer Windows versions) so people used
to create threads for each asynchronous IO operations and now many of them
often wrongly thing that some operations cannot be implemented without
threads.

best regards,
Przemek
-------------- next part --------------
#include "hbgtinfo.ch"
proc main()
   local cFile := "harbour-0.99.3.src.tar.gz"
   local cUrl := "http://heanet.dl.sourceforge.net/sourceforge/harbour-project/"
   local hFile, hInput, hDest, aReadFDs, nKey, nRead, nWritten, h
   local cBuff := space( 100000 )

   hInput := hb_gtInfo( GTI_INPUTFD )
   hFile := HB_POpen( "curl " + cUrl + cFile + "|" )
   if hFile == -1
      ? "Cannot execute: curl " + cUrl
      QUIT
   endif
   hDest := fcreate( cFile )
   if hDest == -1
      ? "Cannot create:", cFile
      fclose( hFile )
      QUIT
   endif
   nWritten := 0

   ? "Copping..., ESC - interrupt"
   ?

   while hFile != -1
      aReadFDs := { hInput, hFile }
      if HB_FDSELECT( 0, aReadFDs ) > 0
         for each h in aReadFDs
            if h == hInput
               nKey := inkey()
               ? "key code:", nKey
               ?
               if nKey == 27
                  fclose( hDest )
                  fclose( hFile )
                  hFile := -1
                  ? "Operation interrupted"
               endif
            elseif h == hFile
               nRead := fread( hFile, @cBuff, len( cBuff ) )
               if nRead == 0
                  fclose( hDest )
                  fclose( hFile )
                  hFile := -1
                  ? "File", cFile,"copied."
               else
                  nWritten += fwrite( hDest, cBuff, nRead )
                  ?? chr( 13 ) + "bytes copied: ", nWritten
               endif
            endif
         next
      endif
   enddo

return

#pragma begindump
#include "hbapi.h"
#include "hbapifs.h"
#include "hbapierr.h"

HB_FUNC( HB_POPEN )
{
   BYTE *pFilename, *pbyTmp, byMode = 0;
   ULONG ln;
   FHANDLE fHnd = FS_ERROR;

   if( ISCHAR( 1 ) )
   {
      pFilename = ( BYTE * ) hb_parc( 1 );
      ln = strlen( ( char * ) pFilename );

      switch( hb_parcx( 2 )[0] )
      {
         case 'R':
         case 'r':
            byMode = 'r';
            break;
         case 'W':
         case 'w':
            byMode = 'w';
            break;
         default:
            if( pFilename[0] == '|' )
               byMode = 'w';
            else if( pFilename[ln - 1] == '|' )
               byMode = 'r';
            else
               byMode = 'w';
      }

      if( pFilename[0] == '|' )
      {
         ++pFilename;
         --ln;
      }
      if( pFilename[ln - 1] == '|' )
         pFilename = pbyTmp = ( BYTE * ) hb_strndup( ( char * ) pFilename, --ln );
      else
         pbyTmp = NULL;

      fHnd = hb_fsPOpen( pFilename, &byMode );

      if( pbyTmp )
         hb_xfree( pbyTmp );

      hb_retnl( fHnd );
   }
   else
      hb_errRT_BASE_SubstR( EG_ARG, 3012, NULL, "HB_POPEN", 1, hb_param( 1, HB_IT_ANY ) );
}

HB_FUNC( HB_FDSELECT )
{
   int i, iFD, iMax, iMaxFD, iDelay, iRetVal;
   ULONG ulLen, ulPos, ul;
   PHB_ITEM pItemSets[3];
   fd_set fds[3], *pfds[3];
   struct timeval tv, *ptv;

   iDelay = hb_parni( 1 );
   iMaxFD = -1;

   for( i = 0; i < 3; i++ )
   {
      pfds[i] = NULL;
      pItemSets[i] = hb_param( 2 + i, HB_IT_ARRAY );
      ulLen = pItemSets[i] ? hb_arrayLen( pItemSets[i] ) : 0;
      if( ulLen > 0 )
      {
         FD_ZERO( &fds[i] );
         iMax = -1;
         for( ul = 1; ul <= ulLen; ul++ )
         {
            if( hb_arrayGetType( pItemSets[i], ul ) & HB_IT_NUMERIC )
            {
               iFD = hb_arrayGetNI( pItemSets[i], ul );
               if( iFD >= 0 )
               {
                  if( iMax < iFD )
                     iMax = iFD;
                  FD_SET( iFD, &fds[i] );
               }
            }
         }
         if( iMax >= 0 )
         {
            pfds[i] = &fds[i];
            if( iMaxFD < iMax )
               iMaxFD = iMax;
         }
      }
   }

   if( iDelay == 0 )
      ptv = NULL;
   else
   {
      if( iDelay < 0 )
         iDelay = 0;
      tv.tv_sec = ( iDelay / 1000 );
      tv.tv_usec = ( iDelay % 1000 ) * 1000;
      ptv = &tv;
   }

   iRetVal = select( iMaxFD + 1, pfds[0], pfds[1], pfds[2], ptv );

   for( i = 0; i < 3; i++ )
   {
      if( pfds[i] )
      {
         ulPos = 0;
         if( iRetVal > 0 )
         {
            ulLen = hb_arrayLen( pItemSets[i] );
            for( ul = 1; ul <= ulLen; ul++ )
            {
               if( hb_arrayGetType( pItemSets[i], ul ) & HB_IT_NUMERIC )
               {
                  iFD = hb_arrayGetNI( pItemSets[i], ul );
                  if( FD_ISSET( iFD, pfds[i] ) )
                     hb_arraySetNI( pItemSets[i], ++ulPos, iFD );
               }
            }
         }
         hb_arraySize( pItemSets[i], ulPos );
      }
   }

   hb_retni( iRetVal );
}
#pragma enddump
From harbour.01 at syenar.hu  Fri Aug 24 14:13:06 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Aug 24 14:13:13 2007
Subject: [Harbour] Compiling Harbour with MingW using make_gcc.sh
In-Reply-To: <46CF30E0.4030507@interia.pl>
References: <46CF30E0.4030507@interia.pl>
Message-ID: <42406AD3-E033-40E1-A745-DCADEC639EAF@syenar.hu>

Hi Marek,

FYI, I've just tried MinGW (4.12) and it worked for me, but
only after doing a clean first.

Brgds,
Viktor

On 2007.08.24., at 21:26, Marek Paliwoda wrote:

> Hi Przemek,
>
> Compiling Harbour with MingW using make_gcc.sh I get :
>
> ----------
> lib/gc/libvm.a(mainstd.o):mainstd.c:(.text+0x0): multiple  
> definition of `main'
> obj/gc/hbverfix.o:hbverfix.c:(.text+0xd0): first defined here
> collect2: ld returned 1 exit status
> make: *** [bin/gc/hbverfix.exe] Error 1
> ----------
>
> Compiling Harbour with Cygwin using make_gcc.sh is OK,
> except hbdot.prg where I had to change the order last
> #ifdefs :
>
> ------------
> #if defined( __PLATFORM__Windows )
> REQUEST HB_GT_WIN_DEFAULT
> #elif defined( __PLATFORM__UNIX )
> REQUEST HB_GT_TRM_DEFAULT
> #elif defined( __PLATFORM__DOS )
> REQUEST HB_GT_DOS_DEFAULT
> #elif defined( __PLATFORM__OS2 )
> REQUEST HB_GT_OS2_DEFAULT
> #endif
> ------------
>
> Did I misconfigure MingW or it is makefile.gc error ?
>
>
> I also noticed that you added a line :
>    mkdir -p obj/$CC_DIRNAME lib/$CC_DIRNAME bin/$CC_DIRNAME
> to make_gcc.sh. Is it really neccesary ? Makefile.gc should
> handle it properly I guess ( hopefully in Linux also :) ).
>
> -- 
>
> Marek
>
>
> ----------------------------------------------------------------------
> Piekne kobiety wsrod samych swin!
> Obejrzyj
>
>>>> http://link.interia.pl/f1b18
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Fri Aug 24 14:27:44 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Aug 24 14:27:52 2007
Subject: [Harbour] Compiling Harbour with MingW using make_gcc.sh
In-Reply-To: <46CF30E0.4030507@interia.pl>
References: <46CF30E0.4030507@interia.pl>
Message-ID: <20070824182744.GA25496@localhost.localdomain>

On Fri, 24 Aug 2007, Marek Paliwoda wrote:
> Hi Przemek,
> Compiling Harbour with MingW using make_gcc.sh I get :
> ----------
> lib/gc/libvm.a(mainstd.o):mainstd.c:(.text+0x0): multiple definition of 
> `main'
> obj/gc/hbverfix.o:hbverfix.c:(.text+0xd0): first defined here
> collect2: ld returned 1 exit status
> make: *** [bin/gc/hbverfix.exe] Error 1
> ----------

It's perfectly valid message. main() is repeated.
The problem is caused by LDFLAGS which contains also list of
harbour libraries and hbverfix does not need any of them.
It will be necessary to divide LDFLAGS into LDFLAGS and LDLIBS.

> Compiling Harbour with Cygwin using make_gcc.sh is OK,

Just lik in Linux. Only for MinGW() main() has special meaning.
It scans all linked object files and libraries for main() function
and if it locate it then it creates console binaries. If it doesn't
then MS-Windows GUI binaries with WinMain() as startup function are
created. It means that adding mainstd.c to hvm lib in MinGW build
blocks creating GUI programs. To resolve this problem we have a hack
for MinGW in source/hvm/Makefile which excludes mainstd.c from HVM
but adds new library "mainstd" so when user wants to create console
program he simply adds mainstd to linked library list. Otherwise
GUI programs are created.
I think it will be good to replicate this also in makefile.gc

> except hbdot.prg where I had to change the order last
> #ifdefs :
> ------------
> #if defined( __PLATFORM__Windows )
> REQUEST HB_GT_WIN_DEFAULT
> #elif defined( __PLATFORM__UNIX )
> REQUEST HB_GT_TRM_DEFAULT
> #elif defined( __PLATFORM__DOS )
> REQUEST HB_GT_DOS_DEFAULT
> #elif defined( __PLATFORM__OS2 )
> REQUEST HB_GT_OS2_DEFAULT
> #endif
> ------------

Fine.

> I also noticed that you added a line :
>    mkdir -p obj/$CC_DIRNAME lib/$CC_DIRNAME bin/$CC_DIRNAME
> to make_gcc.sh. Is it really neccesary ? Makefile.gc should
> handle it properly I guess ( hopefully in Linux also :) ).

I know that makefile.gc creates such directories but if you will make
a test then you will find that errors will appear in first build.
The second one will be correct.
The problem is caused by relative paths we are using with VPATH.
When MAKE starts then it tries to resolve all relative paths.
Because we are using VPATHs it will look for ./obj subdirectory
first in the directory where source file is located then in current
directory. It happens before mkdir is executed so ./obj does not
exist yet and cannot be found by make. In such case make choses
by default that ./obj is subdirectory in the directory where source
file is located. It's very nice feature because GNU make can
automatically expand relative paths but in our case it's a source
of problem if destination directories does not exist at startup.

best regards,
Przemek
From mpaliwoda at interia.pl  Fri Aug 24 14:35:46 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Aug 24 14:35:51 2007
Subject: [Harbour] ChangeLog 2007-08-24 20:35 UTC+0100 Marek Paliwoda
 (mpaliwoda at interia pl)
Message-ID: <46CF2502.5070508@interia.pl>

2007-08-24 20:35 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
   * harbour/makefile.gc
      ! Fixed compilation of hbverfix
   * harbour/make_gcc.gc
      * Changed the way CC and LD envvars are set

-- 

     Marek Paliwoda
mpaliwoda at interia pl

----------------------------------------------------------------------
Plaza plazy nierowna
Kliknij
>>>http://link.interia.pl/f1af7

From mpaliwoda at interia.pl  Fri Aug 24 14:38:02 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Aug 24 14:38:07 2007
Subject: [Harbour] Compiling Harbour with MingW using make_gcc.sh
In-Reply-To: <42406AD3-E033-40E1-A745-DCADEC639EAF@syenar.hu>
References: <46CF30E0.4030507@interia.pl>
	<42406AD3-E033-40E1-A745-DCADEC639EAF@syenar.hu>
Message-ID: <46CF258A.9040301@interia.pl>

Hi Viktor,

> FYI, I've just tried MinGW (4.12) and it worked for me, but
> only after doing a clean first.

Did you compile using make_gcc.sh ? I've just tried with
gcc 3.4.5 and gcc 4.2.1 and none has worked for me.

But I figured out why and fixed it :).

-- 

Marek

----------------------------------------------------------------------
Jak najszybciej dostac sie na wymarzona plaze?
Znajdz trase ekspresowa 

>>>http://link.interia.pl/f1b0d

From mpaliwoda at interia.pl  Fri Aug 24 14:47:24 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Fri Aug 24 14:47:29 2007
Subject: [Harbour] Compiling Harbour with MingW using make_gcc.sh
In-Reply-To: <20070824182744.GA25496@localhost.localdomain>
References: <46CF30E0.4030507@interia.pl>
	<20070824182744.GA25496@localhost.localdomain>
Message-ID: <46CF27BC.4020405@interia.pl>

Hi Przemek,

>> Compiling Harbour with MingW using make_gcc.sh I get :
>> ----------
>> lib/gc/libvm.a(mainstd.o):mainstd.c:(.text+0x0): multiple definition of 
>> `main'
>> obj/gc/hbverfix.o:hbverfix.c:(.text+0xd0): first defined here
>> collect2: ld returned 1 exit status
>> make: *** [bin/gc/hbverfix.exe] Error 1
>> ----------
> 
> It's perfectly valid message. main() is repeated.
> The problem is caused by LDFLAGS which contains also list of
> harbour libraries and hbverfix does not need any of them.
> It will be necessary to divide LDFLAGS into LDFLAGS and LDLIBS.

Well, I just fixed  it in a little bit different way :).

>> Compiling Harbour with Cygwin using make_gcc.sh is OK,
> 
> Just lik in Linux. Only for MinGW() main() has special meaning.
> It scans all linked object files and libraries for main() function
> and if it locate it then it creates console binaries. If it doesn't
> then MS-Windows GUI binaries with WinMain() as startup function are
> created. It means that adding mainstd.c to hvm lib in MinGW build
> blocks creating GUI programs. To resolve this problem we have a hack
> for MinGW in source/hvm/Makefile which excludes mainstd.c from HVM
> but adds new library "mainstd" so when user wants to create console
> program he simply adds mainstd to linked library list. Otherwise
> GUI programs are created.
> I think it will be good to replicate this also in makefile.gc

Absolutely.

I'll try to do it as soon as possible if none does it ealier.

>> except hbdot.prg where I had to change the order last
>> #ifdefs :
>> ------------
>> #if defined( __PLATFORM__Windows )
>> REQUEST HB_GT_WIN_DEFAULT
>> #elif defined( __PLATFORM__UNIX )
>> REQUEST HB_GT_TRM_DEFAULT
>> #elif defined( __PLATFORM__DOS )
>> REQUEST HB_GT_DOS_DEFAULT
>> #elif defined( __PLATFORM__OS2 )
>> REQUEST HB_GT_OS2_DEFAULT
>> #endif
>> ------------
> 
> Fine.
> 
>> I also noticed that you added a line :
>>    mkdir -p obj/$CC_DIRNAME lib/$CC_DIRNAME bin/$CC_DIRNAME
>> to make_gcc.sh. Is it really neccesary ? Makefile.gc should
>> handle it properly I guess ( hopefully in Linux also :) ).
> 
> I know that makefile.gc creates such directories but if you will make
> a test then you will find that errors will appear in first build.
> The second one will be correct.
> The problem is caused by relative paths we are using with VPATH.
> When MAKE starts then it tries to resolve all relative paths.
> Because we are using VPATHs it will look for ./obj subdirectory
> first in the directory where source file is located then in current
> directory. It happens before mkdir is executed so ./obj does not
> exist yet and cannot be found by make. In such case make choses
> by default that ./obj is subdirectory in the directory where source
> file is located. It's very nice feature because GNU make can
> automatically expand relative paths but in our case it's a source
> of problem if destination directories does not exist at startup.

You're absolutely right ( as usual :) ).

-- 

Marek

----------------------------------------------------------------------
Jak najszybciej dostac sie na wymarzona plaze?
Znajdz trase ekspresowa

>>>http://link.interia.pl/f1b0c

From gvarona at ec-red.com  Fri Aug 24 14:53:57 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Fri Aug 24 14:48:23 2007
Subject: [Harbour] Support for Class TopBarMenu of Clipper 5.3
In-Reply-To: <46CF03E2.3070207@ec-red.com>
References: <469B03D6.40A2@synel.co.il> <46CEE65B.8090007@ec-red.com>
	<46CF03E2.3070207@ec-red.com>
Message-ID: <46CF2945.8070702@ec-red.com>

Siguiendo con los menu's, he logrado avanzar un poco mas, para lo cual 
he tenido que modificar el programa fuente ttopbar.prg de la siguiente 
manera:
Continuing with the menu' s, I have managed to advance a little but, for 
which I have had that to modify the source program ttopbar.prg in the 
following way: 

file: ttopbar.prg, Line 419
419         ::aItems[ n ]:data:SetCoors( ::row + 1, ::aItems[ n 
]:column, .t. )
419         ::aItems[ n ]:data:SetCoors( n, ::row + 1, ::aItems[ n 
]:column, .t. )

Ahora obtengo el siguiente mensaje de error:
Now I obtain the following error message: 

Error BASE/1004  Message not found: POPUPMENU:ISQUICK
Called from __ERRRT_SBASE(0)
Called from POPUPMENU:ERROR(172)
Called from (b)HBOBJECT(103)
Called from POPUPMENU:MSGNOTFOUND(0)
Called from POPUPMENU:ISQUICK(162)
Called from TOPBARMENU:ISQUICK(485)
Called from TOPBARMENU:ISSHORTCUT(463)
Called from TOPBARMENU:MODAL(873)
Called from MENUMODAL(98)
Called from MAIN(46)

Preguntas:
Questions:

1.- Quien hace estos cambios en el servidor (repositorio)
2.- Como se puede ver en el ejemplo, esta Linea:

      oTopBar := TopBar( 0, 10, 50)

   Indica que el menu debe aparecer en la columna 10, pero siempre aparece en la columna 0.

3.- Al inicio, el menu se muestra con un parpadeo molesto, este desaparece despues de presionar cualquier tecla.
4.- No funciona el mouse.
5.- ?Harbour es totalmente compatible con el Clipper 5.3b?. Sucede que he desarrollado una peque?a aplicaci?n con Clipper 5.3b, y al querer pasarlo a Harbour estoy teniendo estos problemas.

Espero me puedan ayudar.


ENGLISH
1.- Who makes these changes in the servant (repository)
2.- As can be seen in the example, this Line: 

oTopBar: = TopBar (0, 10, 50)

It indicates that the menu should appear in the column 10, but always 
appears in the column 0. 

3.- Al start, the menu is shown with an uncomfortable blinking, this 
disappears despues to pressure any key. 
4.- Not the mouse functions. 
5.- ?Harbour is completely compatible with the Clipper 5.3b?.  It 
happens that I have developed a small application with Clipper 5.3b, and 
al wanted to pass it to Harbour I am having these problems. 

I expect they can help me. 

Salu2,
GVS


From lorenzo.fiorini at gmail.com  Fri Aug 24 14:49:29 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Aug 24 14:49:34 2007
Subject: [Harbour] Will Harbour be multitasking?
In-Reply-To: <20070824175052.GA25268@localhost.localdomain>
References: <9257026e0708240201n45cd0c98occ7000e36dfa4fd@mail.gmail.com>
	<20070824123528.GA22883@localhost.localdomain>
	<9257026e0708240713v2ec36d83s2cb128536c94b4b7@mail.gmail.com>
	<20070824175052.GA25268@localhost.localdomain>
Message-ID: <9257026e0708241149o22935bagd3a343485c491aa2@mail.gmail.com>

On 8/24/07, Przemyslaw Czerpak <druzus@priv.onet.pl> wrote:

> Below I'm attaching simple code (only for *nixes, it will not work in
> Windows) with two functions from my private library: HB_POPEN() and
> HB_FDSELECT() and small .prg program which illustrates how they can be
> used.

Many thanks I'll look at it.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Fri Aug 24 14:55:42 2007
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Aug 24 14:55:47 2007
Subject: [Harbour] OL note
Message-ID: <9257026e0708241155w5987cc35s64572d6dd90ce0f3@mail.gmail.com>

I'll be offline until Sep 10th.

best regards,
Lorenzo
From druzus at priv.onet.pl  Fri Aug 24 16:46:00 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Aug 24 16:46:10 2007
Subject: [Harbour] ChangeLog 2007-08-24 22:45 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070824204600.GA26563@localhost.localdomain>

2007-08-24 22:45 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/utils/hbdot/hbdot.prg
    * some minor modifications for GT drivers which allow to change
      the size of console window
    * changed the order of requested GTs for CYGWIN builds

best regards,
Przemek
From gvarona at ec-red.com  Fri Aug 24 17:56:56 2007
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Fri Aug 24 17:51:25 2007
Subject: [Harbour] Support for Class TopBarMenu of Clipper 5.3
In-Reply-To: <46CF2945.8070702@ec-red.com>
References: <469B03D6.40A2@synel.co.il>
	<46CEE65B.8090007@ec-red.com>	<46CF03E2.3070207@ec-red.com>
	<46CF2945.8070702@ec-red.com>
Message-ID: <46CF5428.1060509@ec-red.com>

. . . y sigo con los menu's,
He bajado e instalado una copia de xHarbour y he visto que aqui no da 
ningun problema el ejemplo que estoy  probando 
(C:\CLIP53\SOURCE\SAMPLE\menu.prg), funciona perfectamente

Entonces, He copiado desde xHarbour el m?todo que esta faltando (Called 
from POPUPMENU:ISQUICK(162) ), y ahora el ejemplo compila bien, pero 
s?lo me muestra las opciones horizontales del menu, al presionar las 
teclas HOT KEY (Alt+E), muestra las opciones verticales pero desaparecen 
rapidamente.
Ah y sigue quedando un parpadeo en la primera opcion del menu horizontal.

Agradezco de antemano cualquier ayuda.

Saludos,
GVS

IN ENGLISH:

.  .  . and I continue with the menu' s, I have descended and installed 
a copy of xHarbour and I have seen that aqui does not give any problem 
the example that am testing (C:\CLIP53\SOURCE\SAMPLE\menu.prg), 
functions perfectly

Then, I have copied from xHarbour the method that this lacking (Called 
from POPUPMENU:ISQUICK(162)), and now the example compiles well, but 
only shows me the horizontal options of the menu, al to pressure the 
keys HOT KEY (Alt + E), sample the vertical options but they disappear 
rapidamente.  Oh and continues remaining a blinking in the first one 
opcion of the menu horizontal. 

Best Regards
GVS


Guillermo Varona Silup? escribi?:

> Siguiendo con los menu's, he logrado avanzar un poco mas, para lo cual 
> he tenido que modificar el programa fuente ttopbar.prg de la siguiente 
> manera:
> Continuing with the menu' s, I have managed to advance a little but, 
> for which I have had that to modify the source program ttopbar.prg in 
> the following way:
> file: ttopbar.prg, Line 419
> 419         ::aItems[ n ]:data:SetCoors( ::row + 1, ::aItems[ n 
> ]:column, .t. )
> 419         ::aItems[ n ]:data:SetCoors( n, ::row + 1, ::aItems[ n 
> ]:column, .t. )
>
> Ahora obtengo el siguiente mensaje de error:
> Now I obtain the following error message:
> Error BASE/1004  Message not found: POPUPMENU:ISQUICK
> Called from __ERRRT_SBASE(0)
> Called from POPUPMENU:ERROR(172)
> Called from (b)HBOBJECT(103)
> Called from POPUPMENU:MSGNOTFOUND(0)
> Called from POPUPMENU:ISQUICK(162)
> Called from TOPBARMENU:ISQUICK(485)
> Called from TOPBARMENU:ISSHORTCUT(463)
> Called from TOPBARMENU:MODAL(873)
> Called from MENUMODAL(98)
> Called from MAIN(46)
>
> Preguntas:
> Questions:
>
> 1.- Quien hace estos cambios en el servidor (repositorio)
> 2.- Como se puede ver en el ejemplo, esta Linea:
>
>      oTopBar := TopBar( 0, 10, 50)
>
>   Indica que el menu debe aparecer en la columna 10, pero siempre 
> aparece en la columna 0.
>
> 3.- Al inicio, el menu se muestra con un parpadeo molesto, este 
> desaparece despues de presionar cualquier tecla.
> 4.- No funciona el mouse.
> 5.- ?Harbour es totalmente compatible con el Clipper 5.3b?. Sucede que 
> he desarrollado una peque?a aplicaci?n con Clipper 5.3b, y al querer 
> pasarlo a Harbour estoy teniendo estos problemas.
>
> Espero me puedan ayudar.
>
>
> ENGLISH
> 1.- Who makes these changes in the servant (repository)
> 2.- As can be seen in the example, this Line:
> oTopBar: = TopBar (0, 10, 50)
>
> It indicates that the menu should appear in the column 10, but always 
> appears in the column 0.
> 3.- Al start, the menu is shown with an uncomfortable blinking, this 
> disappears despues to pressure any key. 4.- Not the mouse functions. 
> 5.- ?Harbour is completely compatible with the Clipper 5.3b?.  It 
> happens that I have developed a small application with Clipper 5.3b, 
> and al wanted to pass it to Harbour I am having these problems.
> I expect they can help me.
> Salu2,
> GVS
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>

From harbour.01 at syenar.hu  Fri Aug 24 21:44:02 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Fri Aug 24 21:44:12 2007
Subject: [Harbour] Support for Class TopBarMenu of Clipper 5.3
In-Reply-To: <46CF2945.8070702@ec-red.com>
References: <469B03D6.40A2@synel.co.il> <46CEE65B.8090007@ec-red.com>
	<46CF03E2.3070207@ec-red.com> <46CF2945.8070702@ec-red.com>
Message-ID: <DA55809C-D362-40A9-BDED-4813C2FF2A71@syenar.hu>

Well, I think we should update out CA-Cl*pper 5.3
classes with the xhb ones (as I've once proposed),
because those ones we have are pretty much dead code
with obvious and not so obvious bugs.

I've started to fix TBrowse/TBColumn anyway, so I'll
check what can be done in that area too.

Brgds,
Viktor

On 2007.08.24., at 20:53, Guillermo Varona Silup? wrote:

> Siguiendo con los menu's, he logrado avanzar un poco mas, para lo  
> cual he tenido que modificar el programa fuente ttopbar.prg de la  
> siguiente manera:
> Continuing with the menu' s, I have managed to advance a little  
> but, for which I have had that to modify the source program  
> ttopbar.prg in the following way:
> file: ttopbar.prg, Line 419
> 419         ::aItems[ n ]:data:SetCoors( ::row + 1, ::aItems 
> [ n ]:column, .t. )
> 419         ::aItems[ n ]:data:SetCoors( n, ::row + 1, ::aItems 
> [ n ]:column, .t. )
>
> Ahora obtengo el siguiente mensaje de error:
> Now I obtain the following error message:
> Error BASE/1004  Message not found: POPUPMENU:ISQUICK
> Called from __ERRRT_SBASE(0)
> Called from POPUPMENU:ERROR(172)
> Called from (b)HBOBJECT(103)
> Called from POPUPMENU:MSGNOTFOUND(0)
> Called from POPUPMENU:ISQUICK(162)
> Called from TOPBARMENU:ISQUICK(485)
> Called from TOPBARMENU:ISSHORTCUT(463)
> Called from TOPBARMENU:MODAL(873)
> Called from MENUMODAL(98)
> Called from MAIN(46)
>
> Preguntas:
> Questions:
>
> 1.- Quien hace estos cambios en el servidor (repositorio)
> 2.- Como se puede ver en el ejemplo, esta Linea:
>
>      oTopBar := TopBar( 0, 10, 50)
>
>   Indica que el menu debe aparecer en la columna 10, pero siempre  
> aparece en la columna 0.
>
> 3.- Al inicio, el menu se muestra con un parpadeo molesto, este  
> desaparece despues de presionar cualquier tecla.
> 4.- No funciona el mouse.
> 5.- ?Harbour es totalmente compatible con el Clipper 5.3b?. Sucede  
> que he desarrollado una peque?a aplicaci?n con Clipper 5.3b, y al  
> querer pasarlo a Harbour estoy teniendo estos problemas.
>
> Espero me puedan ayudar.
>
>
> ENGLISH
> 1.- Who makes these changes in the servant (repository)
> 2.- As can be seen in the example, this Line:
> oTopBar: = TopBar (0, 10, 50)
>
> It indicates that the menu should appear in the column 10, but  
> always appears in the column 0.
> 3.- Al start, the menu is shown with an uncomfortable blinking,  
> this disappears despues to pressure any key. 4.- Not the mouse  
> functions. 5.- ?Harbour is completely compatible with the Clipper  
> 5.3b?.  It happens that I have developed a small application with  
> Clipper 5.3b, and al wanted to pass it to Harbour I am having these  
> problems.
> I expect they can help me.
> Salu2,
> GVS
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Fri Aug 24 22:03:10 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Aug 24 22:03:22 2007
Subject: [Harbour] Support for Class TopBarMenu of Clipper 5.3
In-Reply-To: <DA55809C-D362-40A9-BDED-4813C2FF2A71@syenar.hu>
References: <469B03D6.40A2@synel.co.il> <46CEE65B.8090007@ec-red.com>
	<46CF03E2.3070207@ec-red.com> <46CF2945.8070702@ec-red.com>
	<DA55809C-D362-40A9-BDED-4813C2FF2A71@syenar.hu>
Message-ID: <20070825020306.GA25005@localhost.localdomain>

On Sat, 25 Aug 2007, Szak?ts Viktor wrote:
> Well, I think we should update out CA-Cl*pper 5.3
> classes with the xhb ones (as I've once proposed),
> because those ones we have are pretty much dead code
> with obvious and not so obvious bugs.
> I've started to fix TBrowse/TBColumn anyway, so I'll
> check what can be done in that area too.

Below is TBColumn which should be Clipper compatible also with
the order of instance variables in object array.
It's very simple class.
I also created base version of TBrowse class but because I've
never used it in Clipper so tests of exact Clipper behavior is
really time consuming process for me. I do not know If I'll
find enough time to finish it. I do not have enough motivation ;-)

best regards,
Przemek




#include "hbclass.ch"
#include "common.ch"
#include "tbrowse.ch"

/*
 * In Clipper it's possible to assign NIL to all typed instance
 * variables and such operation is ignored without RT error.
 * The order of instance variables in code below it's the same as
 * in Clipper so code which tries to access them directly should
 * also work.
 * In Clipper TBCOLUMN class does not inherit from any other classes
 * and there is no public class function like TBCOLUMN()
 */ 

#ifdef HB_C52_STRICT
CREATE CLASS TBCOLUMN STATIC
#else
CREATE CLASS TBCOLUMN
#endif

EXPORTED:
   VAR cargo      AS USUAL                      // 01. User-definable variable
   VAR width      AS NUMERIC                    // 02. Column display width
   VAR block      AS BLOCK                      // 03. Code block to retrieve data for the column
   VAR defColor   AS ARRAY     INIT { 1, 2 }    // 04. Array of numeric indexes into the color table
   VAR colorBlock AS BLOCK     INIT {|| NIL }   // 05. Code block that determines color of data items
   VAR heading    AS CHARACTER                  // 06. Column heading
   VAR headSep    /* AS CHARACTER OR NIL */     // 07. Heading separator character
   VAR colSep     /* AS CHARACTER OR NIL */     // 08. Column separator character
   VAR footSep    /* AS CHARACTER OR NIL */     // 09. Footing separator character
   VAR footing    AS CHARACTER INIT ""          // 10. Column Footing
   VAR picture    AS USUAL                      // 11. Column picture string
#ifdef HB_COMPAT_C53
   VAR postBlock  AS BLOCK                      // 12. Code block validating values
   VAR preBlock   AS BLOCK                      // 13. Code block determining editing

   METHOD setStyle( nStyle, lNewValue )

   // NOTE: 17/08/01 - <maurilio.longo@libero.it>
   //       It is not correct in my opinion that this instance variable be exported
   VAR colPos     INIT 1

HIDDEN:
   VAR styles     AS ARRAY INIT {.F.,.F.,.F.}   // 14. Array of TBC_* styles
#endif

ENDCLASS

#ifdef HB_COMPAT_C53
METHOD setStyle( nStyle, lNewValue )

   IF nStyle > LEN( ::styles ) .AND. ;
      nStyle <= 4096 // some reasonable limit for maximum number of styles
      ASIZE( ::styles, nStyle )
   ENDIF
   IF ISLOGICAL( lNewValue )
      ::styles[ nStyle ] := lNewValue
   ENDIF

   RETURN ::styles[ nStyle ]
#endif

FUNCTION TBColumnNew( cHeading, bBlock )

   LOCAL oCol := TBColumn():New()

   /* Clipper does not chaeck type of cHeading and bBlock inside TBColumnNew()
    */
   oCol:Heading := cHeading
   oCol:block   := bBlock

   RETURN oCol
From druzus at priv.onet.pl  Sat Aug 25 07:03:59 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Sat Aug 25 07:04:06 2007
Subject: [Harbour] ChangeLog 2007-08-25 12:20 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070825110359.GA25929@localhost.localdomain>

2007-08-25 12:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapi.h
  * harbour/source/vm/arrays.c
  * harbour/source/vm/extend.c
    ! fixed hb_stor*() functions return value to be Clipper compatible.
      These functions should return 1 _ONLY_ when the operation is really
      successful; otherwise, they return zero.
    + added hb_storclen_buffer(), hb_arraySetPtrGC()

  * harbour/config/darwin/gcc.cf
  * harbour/config/hpux/gcc.cf
  * harbour/config/dos/rsx32.cf
  * harbour/config/os2/gcc.cf
  * harbour/config/sunos/gcc.cf
  * harbour/config/w32/gcc.cf
  * harbour/config/w32/rsxnt.cf
    + added rtl library after gt drivers for linker which do not support
      backward references

best regards,
Przemek
From harbour.01 at syenar.hu  Sat Aug 25 17:39:51 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Aug 25 17:40:01 2007
Subject: [Harbour] Compiling Harbour with MingW using make_gcc.sh
In-Reply-To: <46CF258A.9040301@interia.pl>
References: <46CF30E0.4030507@interia.pl>
	<42406AD3-E033-40E1-A745-DCADEC639EAF@syenar.hu>
	<46CF258A.9040301@interia.pl>
Message-ID: <42948B76-4E79-41AE-AC5D-A6092C53B7CD@syenar.hu>

No, you're right, I've been using make_gcc.bat via
a start batch file (posted last week).

(I'm a bit reluctant to use bash under Windows :)

Brgds,
Viktor

On 2007.08.24., at 20:38, Marek Paliwoda wrote:

> Hi Viktor,
>
>> FYI, I've just tried MinGW (4.12) and it worked for me, but
>> only after doing a clean first.
>
> Did you compile using make_gcc.sh ? I've just tried with
> gcc 3.4.5 and gcc 4.2.1 and none has worked for me.
>
> But I figured out why and fixed it :).
>
> -- 
>
> Marek
>
> ----------------------------------------------------------------------
> Jak najszybciej dostac sie na wymarzona plaze?
> Znajdz trase ekspresowa
>>>> http://link.interia.pl/f1b0d
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sat Aug 25 17:41:04 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Aug 25 17:41:13 2007
Subject: [Harbour] Support for Class TopBarMenu of Clipper 5.3
In-Reply-To: <20070825020306.GA25005@localhost.localdomain>
References: <469B03D6.40A2@synel.co.il> <46CEE65B.8090007@ec-red.com>
	<46CF03E2.3070207@ec-red.com> <46CF2945.8070702@ec-red.com>
	<DA55809C-D362-40A9-BDED-4813C2FF2A71@syenar.hu>
	<20070825020306.GA25005@localhost.localdomain>
Message-ID: <D3638898-73AF-4DCD-9BE4-1F0195A5D332@syenar.hu>

Hi Przemek,

> Below is TBColumn which should be Clipper compatible also with
> the order of instance variables in object array.
> It's very simple class.

Thanks, I've incorporated some ideas from your source :)

Brgds,
Viktor



From esgici at gmail.com  Sat Aug 25 18:30:42 2007
From: esgici at gmail.com (Bicahi Esgici)
Date: Sat Aug 25 18:30:46 2007
Subject: [Harbour] Unsigned long integer conversion
Message-ID: <d4ce00e70708251530v4595f5f1xc0ed97c428607106@mail.gmail.com>

Hi to all

? ( BIN2U( U2BIN( 0xFFFFFFFF   ) ) < 0 ) // => .T.

Is this correct ?

TIA

-- 
esgici
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070826/c28db6a4/attachment.html
From harbour.01 at syenar.hu  Sat Aug 25 18:39:04 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Sat Aug 25 18:39:13 2007
Subject: [Harbour] Unsigned long integer conversion
In-Reply-To: <d4ce00e70708251530v4595f5f1xc0ed97c428607106@mail.gmail.com>
References: <d4ce00e70708251530v4595f5f1xc0ed97c428607106@mail.gmail.com>
Message-ID: <E2E7386C-E401-4C5F-ACD2-55D17C7F8402@syenar.hu>

Hi,

Yes. If you need an unsigned value, you'll need to
convert it first, using something like this:

iif( n < 0, n + 4294967296, n )

Brgds,
Viktor

On 2007.08.26., at 0:30, Bicahi Esgici wrote:

> Hi to all
>
> ? ( BIN2U( U2BIN( 0xFFFFFFFF   ) ) < 0 ) // => .T.
>
> Is this correct ?
>
> TIA
>
> -- 
> esgici
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mpaliwoda at interia.pl  Sun Aug 26 12:21:35 2007
From: mpaliwoda at interia.pl (Marek Paliwoda)
Date: Sun Aug 26 12:21:43 2007
Subject: [Harbour] ChangeLog 2007-08-26 18:15 UTC+0100 Marek Paliwoda
 (mpaliwoda at interia pl)
Message-ID: <46D1A88F.1070102@interia.pl>

2007-08-26 18:15 UTC+0100 Marek Paliwoda (mpaliwoda at interia pl)
   * harbour/makefile.gc
      * Added a DIRTY hack for Windows systems to allow
        building either CONSOLE or GUI programs with gcc.
        A new library libmainstd.a is created. This library
        should be added to a link libraries if programs are
        CONSOLE based.

-- 

     Marek Paliwoda
mpaliwoda at interia pl

----------------------------------------------------------------------
Wygraj depilator, prostownice do wlasow lub mikser

>>> http://link.interia.pl/f1b72 


From jd10jd10 at yahoo.com  Sun Aug 26 22:16:38 2007
From: jd10jd10 at yahoo.com (Jack Daniels)
Date: Sun Aug 26 22:16:58 2007
Subject: [Harbour] Windows Network Printer
Message-ID: <120705.23071.qm@web33213.mail.mud.yahoo.com>

Hello All,
.
Is there a way in Harbour to set the printer to a network printer without
mapping it to a physical port?
.
Ex. SET PRINT TO \\ServerName\PrinterName
.
I know xHarbour has this capability but I would like to stay with Harbour.
.
Also, I have ported tprinter.c from xHarbour to Harbour and all functions
appear to be working quite well.  The only output difference is I added a
column 5 for pPrinterInfo2->pServerName and column 3 is loaded from
pPrinterInfo2->pShareName instead of "NETWORK" in the array returned
from GetPrinters(.T.).  I don't know if it fits the Harbour roadmap but if
there is any interest I can send it to one of the Harbour Masters for review.
.
I was trying to port xHarbour's set network printer but I don't know enough
about whether the HB_set_enum values are related to P-Code or not, so I
quit and decided to write this request for help.
.
TIA,
Jack Daniels
jd10jd10@yahoo.com


       
____________________________________________________________________________________
Looking for a deal? Find great prices on flights and hotels with Yahoo! FareChase.
http://farechase.yahoo.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20070826/8832338f/attachment.html
From harbour.01 at syenar.hu  Mon Aug 27 03:46:45 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Aug 27 03:46:56 2007
Subject: [Harbour] Windows Network Printer
In-Reply-To: <120705.23071.qm@web33213.mail.mud.yahoo.com>
References: <120705.23071.qm@web33213.mail.mud.yahoo.com>
Message-ID: <7D2985A9-197F-475C-886C-07BB8C57DFE6@syenar.hu>

Hi Jack,

On 2007.08.27., at 4:16, Jack Daniels wrote:

> Hello All,
> .
> Is there a way in Harbour to set the printer to a network printer  
> without
> mapping it to a physical port?
> .
> Ex. SET PRINT TO \\ServerName\PrinterName

Try this:
lOld := Set( _SET_DEFEXTENSIONS, .F. )
SET PRINT TO \\ServerName\PrinterName
Set( _SET_DEFEXTENSIONS, lOld )

> Also, I have ported tprinter.c from xHarbour to Harbour and all  
> functions
> appear to be working quite well.  The only output difference is I  
> added a
> column 5 for pPrinterInfo2->pServerName and column 3 is loaded from
> pPrinterInfo2->pShareName instead of "NETWORK" in the array returned
> from GetPrinters(.T.).  I don't know if it fits the Harbour roadmap  
> but if
> there is any interest I can send it to one of the Harbour Masters  
> for review.

This seems like a DOS/Windows-only functionality and it also needs
some serious (naming) cleanups before we can consider adding it. Send
us the code, and I'll look into it.

Brgds,
Viktor


From druzus at priv.onet.pl  Mon Aug 27 09:00:45 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Aug 27 09:00:54 2007
Subject: [Harbour] Unsigned long integer conversion
In-Reply-To: <E2E7386C-E401-4C5F-ACD2-55D17C7F8402@syenar.hu>
References: <d4ce00e70708251530v4595f5f1xc0ed97c428607106@mail.gmail.com>
	<E2E7386C-E401-4C5F-ACD2-55D17C7F8402@syenar.hu>
Message-ID: <20070827130045.GA8878@localhost.localdomain>

On Sun, 26 Aug 2007, Szak?ts Viktor wrote:
> Yes. If you need an unsigned value, you'll need to
> convert it first, using something like this:
> iif( n < 0, n + 4294967296, n )
> >? ( BIN2U( U2BIN( 0xFFFFFFFF   ) ) < 0 ) // => .T.
> >Is this correct ?

Victor have you tested it in xbase++?
If the value returned by xbase++ is positive then we should change
hb_retnl() to hb_retnint() in BIN2U() function. The name suggests
that it should be unsigned (positive) value. Can you check it?

best regards,
Przemek
From harbour.01 at syenar.hu  Mon Aug 27 09:12:02 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Mon Aug 27 09:12:10 2007
Subject: [Harbour] Unsigned long integer conversion
In-Reply-To: <20070827130045.GA8878@localhost.localdomain>
References: <d4ce00e70708251530v4595f5f1xc0ed97c428607106@mail.gmail.com>
	<E2E7386C-E401-4C5F-ACD2-55D17C7F8402@syenar.hu>
	<20070827130045.GA8878@localhost.localdomain>
Message-ID: <0D3AE382-E98D-4987-9EEC-6C57211F93D5@syenar.hu>

I've checked and you're right.

BIN2U( U2BIN( 0xFFFFFFFF ) ) -> 4294967295
BIN2U( Chr( 255 ) + Chr( 255 ) + Chr( 255 ) + Chr( 255 ) ) -> 4294967295
BIN2U( U2BIN( -1 ) ) -> Error BASE/1024 Parameter has a wrong value

Brgds,
Viktor

On 2007.08.27., at 15:00, Przemyslaw Czerpak wrote:

> On Sun, 26 Aug 2007, Szak?ts Viktor wrote:
>> Yes. If you need an unsigned value, you'll need to
>> convert it first, using something like this:
>> iif( n < 0, n + 4294967296, n )
>>> ? ( BIN2U( U2BIN( 0xFFFFFFFF   ) ) < 0 ) // => .T.
>>> Is this correct ?
>
> Victor have you tested it in xbase++?
> If the value returned by xbase++ is positive then we should change
> hb_retnl() to hb_retnint() in BIN2U() function. The name suggests
> that it should be unsigned (positive) value. Can you check it?
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From jd10jd10 at yahoo.com  Mon Aug 27 09:16:05 2007
From: jd10jd10 at yahoo.com (Jack Daniels)
Date: Mon Aug 27 09:16:11 2007
Subject: [Harbour] Windows Network Printer
Message-ID: <983517.5100.qm@web33203.mail.mud.yahoo.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: =?utf-8?q?tprinter.rar?=
Type: application/octet-stream
Size: 18216 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20070827/64830735/utf-8qtprinter-0001.obj
From druzus at priv.onet.pl  Mon Aug 27 11:40:52 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Mon Aug 27 11:40:58 2007
Subject: [Harbour] ChangeLog 2007-08-27 17:35 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070827154052.GA13187@localhost.localdomain>

2007-08-27 17:35 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/diskspac.c
  * harbour/source/rtl/disksphb.c
    * use statvfs() instead of statfs() in *nixes - unlike statfs()
      statvfs() is  documented POSIX function
    * respect superuser status in calculating free space in DISKSPACE()
    * respect _SET_FILECASE, _SET_DIRCASE in HB_DISKSPACE()
    * accept numeric parameter with driver number in systems
      which supports drive letters

  * harbour/source/rtl/binnum.c
  * harbour/source/rtl/binnumx.c
    * force positive return value in BIN2W() and BIN2U()

best regards,
Przemek
From info at fsgiudice.com  Wed Aug 29 07:24:51 2007
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Aug 29 07:25:19 2007
Subject: [Harbour] test please ignore
References: <20070827154052.GA13187@localhost.localdomain>
Message-ID: <001c01c7ea2f$3e6b2440$b400a8c0@ASUSFSG>

Regards

Francesco
From druzus at priv.onet.pl  Wed Aug 29 21:56:55 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Wed Aug 29 21:57:01 2007
Subject: [Harbour] ChangeLog 2007-08-30 03:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070830015655.GA27789@localhost.localdomain>

2007-08-30 03:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapi.h
  * harbour/source/rtl/console.c
    * changed hb_conOutAlt() from static to global function.

  * harbour/include/hbapi.h
  * harbour/source/common/hbver.c
    + added hb_verBuildDate()

  * harbour/source/rtl/accept.c
    ! Fixed ACCEPT to respect SET CONSOLE and similar sets.

  * harbour/source/rtl/hbgtcore.c
  * harbour/contrib/libct/ctwin.c
    ! fixed chr(8) console output - it should erase character on the screen

  * harbour/include/set.ch
  * harbour/include/hbset.h
  * harbour/source/rtl/set.c
  * harbour/source/rtl/filesys.c
    + added _SET_TRIMFILENAME - when enabled low level hb_fs*() functions
      strip trailing and leading spaces from file names to emulate DOS
      like behavior - switch compatible with xHarbour


  * harbour/source/rtl/run.c
    * remove compiler type checking - if system() is not supported by
      some platform/compiler then I'd prefer to exclude it explicitly.

  * harbour/source/rtl/dircmd.prg
    + added support for extended DBF types and replaced some of
      Bin2W() by ASC()

  * harbour/source/rtl/defpath.c
    * use OS_HAS_DRIVE_LETTER macro to detect if platform supports drive
      letters

  * harbour/source/rtl/philes.c
    + added HB_FCOMMIT(), HB_OSERROR(), HB_OSDRIVESEPARATOR()
      Question: why we have HB_F_EOF() instead HB_FEOF()

  * harbour/source/rtl/oldbox.c
  * harbour/source/rtl/box.c
    ! fixed __BOX() to be Clipper compatible

  * harbour/source/rtl/math.c
  * harbour/source/rtl/dateshb.c
    * formatting and some minor improvements

  * harbour/source/rtl/isprint.c
  * harbour/source/vm/itemapi.c
  * harbour/source/rtl/ampm.c
  * harbour/source/rtl/inkey.c
  * harbour/source/rtl/gete.c
  * harbour/source/rtl/fkmax.c
  * harbour/source/rtl/langapi.c
  * harbour/source/rtl/colorind.c
  * harbour/source/rtl/mouseapi.c
  * harbour/source/rtl/readvar.prg
  * harbour/source/rtl/devoutp.prg
  * harbour/source/rtl/readkey.prg
    * code checking and formatting
    ! some minor fixes
    % some speed improvements

  * harbour/source/rtl/menuto.prg
  * harbour/source/rtl/radiogrp.prg
  * harbour/source/rtl/listbox.prg
  * harbour/source/rtl/checkbox.prg
  * harbour/source/rtl/pushbtn.prg
  * harbour/source/rtl/radiobtn.prg
    * code checking and formatting
    ! added fixes borrowed from xHarbour 
    ! some other fixes
    % some speed improvements

  * harbour/source/rtl/filehb.c
    + added commment

  * harbour/source/rtl/transfrm.c
    ! fixed integer numbers transformation when _SET_FIXED is on to
      be Clipper compatible

  * harbour/source/rtl/version.c
    + added HB_PCODEVER() and HB_BUILDDATE()

  * harbour/source/rtl/copyfile.c
    ! fixed __COPYFILE() - source and destination files should respect
      _SET_DEFAULT

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Aug 30 04:14:59 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Aug 30 04:15:07 2007
Subject: [Harbour] ChangeLog 2007-08-30 03:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070830015655.GA27789@localhost.localdomain>
References: <20070830015655.GA27789@localhost.localdomain>
Message-ID: <9D95113F-CFB8-4703-A930-E418880BA10B@syenar.hu>

Hi Przemek,

>   * harbour/source/rtl/philes.c
>     + added HB_FCOMMIT(), HB_OSERROR(), HB_OSDRIVESEPARATOR()
>       Question: why we have HB_F_EOF() instead HB_FEOF()

Good question. I'd vote to change to HB_FEOF().

>   * harbour/source/rtl/menuto.prg
>   * harbour/source/rtl/radiogrp.prg
>   * harbour/source/rtl/listbox.prg
>   * harbour/source/rtl/checkbox.prg
>   * harbour/source/rtl/pushbtn.prg
>   * harbour/source/rtl/radiobtn.prg
>     * code checking and formatting
>     ! added fixes borrowed from xHarbour
>     ! some other fixes
>     % some speed improvements

Hm, I'm currently inside a so far
two weeks long fix session for these files :(

I'm actually working on the last file of
them and will post the changes for testing
as soon as I'm finished.

I'll try to keep your changes, but I'd ask
everyone not to touch these files for
some more time. (BTW xhb had some very
doubtful changes in these files as far as
I could see)

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Aug 30 05:32:45 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Aug 30 05:32:54 2007
Subject: [Harbour] ChangeLog 2007-08-30 03:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070830015655.GA27789@localhost.localdomain>
References: <20070830015655.GA27789@localhost.localdomain>
Message-ID: <0A175489-F0AD-4232-88C1-9DB4F7A1D2A5@syenar.hu>

Hi Przemek,

In dircmd.prg (maybe some other places too), hb_SToD()
should be used, as plain SToD() is guarded with HB_COMPAT_XPP,
so if someone compiles without it we don't have this
function. (in other words Harbour RTL should always
use hb_SToD(), which is always available.)

As another small note for the update FILE() NOTE. The
trimming is actually done my CA-Cl*pper, not DOS. Moreover,
the CA-Cl*pper interals also limit the maximum length
of the path passed to about 63 chars, but that's another
matter.

Brgds,
Viktor

On 2007.08.30., at 3:56, Przemyslaw Czerpak wrote:

> 2007-08-30 03:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/include/hbapi.h
>   * harbour/source/rtl/console.c
>     * changed hb_conOutAlt() from static to global function.
>
>   * harbour/include/hbapi.h
>   * harbour/source/common/hbver.c
>     + added hb_verBuildDate()
>
>   * harbour/source/rtl/accept.c
>     ! Fixed ACCEPT to respect SET CONSOLE and similar sets.
>
>   * harbour/source/rtl/hbgtcore.c
>   * harbour/contrib/libct/ctwin.c
>     ! fixed chr(8) console output - it should erase character on  
> the screen
>
>   * harbour/include/set.ch
>   * harbour/include/hbset.h
>   * harbour/source/rtl/set.c
>   * harbour/source/rtl/filesys.c
>     + added _SET_TRIMFILENAME - when enabled low level hb_fs*()  
> functions
>       strip trailing and leading spaces from file names to emulate DOS
>       like behavior - switch compatible with xHarbour
>
>
>   * harbour/source/rtl/run.c
>     * remove compiler type checking - if system() is not supported by
>       some platform/compiler then I'd prefer to exclude it explicitly.
>
>   * harbour/source/rtl/dircmd.prg
>     + added support for extended DBF types and replaced some of
>       Bin2W() by ASC()
>
>   * harbour/source/rtl/defpath.c
>     * use OS_HAS_DRIVE_LETTER macro to detect if platform supports  
> drive
>       letters
>
>   * harbour/source/rtl/philes.c
>     + added HB_FCOMMIT(), HB_OSERROR(), HB_OSDRIVESEPARATOR()
>       Question: why we have HB_F_EOF() instead HB_FEOF()
>
>   * harbour/source/rtl/oldbox.c
>   * harbour/source/rtl/box.c
>     ! fixed __BOX() to be Clipper compatible
>
>   * harbour/source/rtl/math.c
>   * harbour/source/rtl/dateshb.c
>     * formatting and some minor improvements
>
>   * harbour/source/rtl/isprint.c
>   * harbour/source/vm/itemapi.c
>   * harbour/source/rtl/ampm.c
>   * harbour/source/rtl/inkey.c
>   * harbour/source/rtl/gete.c
>   * harbour/source/rtl/fkmax.c
>   * harbour/source/rtl/langapi.c
>   * harbour/source/rtl/colorind.c
>   * harbour/source/rtl/mouseapi.c
>   * harbour/source/rtl/readvar.prg
>   * harbour/source/rtl/devoutp.prg
>   * harbour/source/rtl/readkey.prg
>     * code checking and formatting
>     ! some minor fixes
>     % some speed improvements
>
>   * harbour/source/rtl/menuto.prg
>   * harbour/source/rtl/radiogrp.prg
>   * harbour/source/rtl/listbox.prg
>   * harbour/source/rtl/checkbox.prg
>   * harbour/source/rtl/pushbtn.prg
>   * harbour/source/rtl/radiobtn.prg
>     * code checking and formatting
>     ! added fixes borrowed from xHarbour
>     ! some other fixes
>     % some speed improvements
>
>   * harbour/source/rtl/filehb.c
>     + added commment
>
>   * harbour/source/rtl/transfrm.c
>     ! fixed integer numbers transformation when _SET_FIXED is on to
>       be Clipper compatible
>
>   * harbour/source/rtl/version.c
>     + added HB_PCODEVER() and HB_BUILDDATE()
>
>   * harbour/source/rtl/copyfile.c
>     ! fixed __COPYFILE() - source and destination files should respect
>       _SET_DEFAULT
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at priv.onet.pl  Thu Aug 30 06:45:48 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug 30 06:45:54 2007
Subject: [Harbour] ChangeLog 2007-08-30 03:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <0A175489-F0AD-4232-88C1-9DB4F7A1D2A5@syenar.hu>
References: <20070830015655.GA27789@localhost.localdomain>
	<0A175489-F0AD-4232-88C1-9DB4F7A1D2A5@syenar.hu>
Message-ID: <20070830104548.GA29115@localhost.localdomain>

On Thu, 30 Aug 2007, Szak?ts Viktor wrote:
> In dircmd.prg (maybe some other places too), hb_SToD()
> should be used, as plain SToD() is guarded with HB_COMPAT_XPP,
> so if someone compiles without it we don't have this
> function. (in other words Harbour RTL should always
> use hb_SToD(), which is always available.)

Yes, if I left STOD() then it was my fault - I'll fix it.

> As another small note for the update FILE() NOTE. The
> trimming is actually done my CA-Cl*pper, not DOS.

Yes. In some functions CA-Cl*pper strips trailing and leading
spaces but in some other it doesn't and trimming is done by DOS,
f.e. FCREATE().
To be more precise. DOS refuse to create file if file name start
with space so leading spaces had to be removed by Clipper but
it strips trailing spaces from base name and from extension.
Now _SET_TRIMFILENAME does not emulate exactly this behavior but
also space striping in FILE() done by Clipper does not seems to
be correct. This example clearly shows it.

    PROC MAIN()
    ? FCREATE("FILE.0")
    ? FCREATE("FILE.1 ")
    ? FCREATE("FILE. 2")
    ? FCREATE("FILE .3")
    ? FCREATE("FILE .4 ")
    ? FCREATE("FILE . 5")
    ? FCREATE("FILE . 6 ")
    ? FCREATE("FI LE . 7 ")
    ?
    ? FCREATE(" FILE.8")
    ? FCREATE(" FILE . 9 ")
    ?
    ? FILE(" FILE . 0 ")
    ? FILE(" FILE .0 ")
    ? FILE("FILE. 2")
    RETURN

> Moreover, the CA-Cl*pper interals also limit the maximum length
> of the path passed to about 63 chars, but that's another
> matter.

63 characters + chr(0) is also old DOS limit for maximum path size.
In Harbour we are using _POSIX_PATH_MAX for such limit.

best regards,
Przemek
From druzus at priv.onet.pl  Thu Aug 30 06:54:36 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug 30 06:54:44 2007
Subject: [Harbour] ChangeLog 2007-08-30 03:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <9D95113F-CFB8-4703-A930-E418880BA10B@syenar.hu>
References: <20070830015655.GA27789@localhost.localdomain>
	<9D95113F-CFB8-4703-A930-E418880BA10B@syenar.hu>
Message-ID: <20070830105436.GB29115@localhost.localdomain>

On Thu, 30 Aug 2007, Szak?ts Viktor wrote:
> >      Question: why we have HB_F_EOF() instead HB_FEOF()
> Good question. I'd vote to change to HB_FEOF().

I'll change it.

> >  * harbour/source/rtl/menuto.prg
> >  * harbour/source/rtl/radiogrp.prg
> >  * harbour/source/rtl/listbox.prg
> >  * harbour/source/rtl/checkbox.prg
> >  * harbour/source/rtl/pushbtn.prg
> >  * harbour/source/rtl/radiobtn.prg
> >    * code checking and formatting
> >    ! added fixes borrowed from xHarbour
> >    ! some other fixes
> >    % some speed improvements
> Hm, I'm currently inside a so far
> two weeks long fix session for these files :(

Ups, sorry. But the good side effect will be double verification ;-)

> I'm actually working on the last file of
> them and will post the changes for testing
> as soon as I'm finished.
> I'll try to keep your changes, but I'd ask
> everyone not to touch these files for
> some more time.

I'm checking other RTL files but I'll left untouched the ones with
.prg classes. I already updated scrollbr.prg but I will wait with
committing for you or I can send this file to you.

> (BTW xhb had some very doubtful changes in these files as far as
> I could see)

I know and I hope that I haven't borrowed them but of course it's possible.
I found also some typos in xHarbour code. Probably when we finish someone
from xHarbour team should compare xHarbour and Harbour files for the
differences in code and take our fixes.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Aug 30 07:14:54 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Aug 30 07:15:04 2007
Subject: [Harbour] ChangeLog 2007-08-30 03:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070830104548.GA29115@localhost.localdomain>
References: <20070830015655.GA27789@localhost.localdomain>
	<0A175489-F0AD-4232-88C1-9DB4F7A1D2A5@syenar.hu>
	<20070830104548.GA29115@localhost.localdomain>
Message-ID: <546BB244-7389-4C5A-AF8A-4AD278593800@syenar.hu>

> On Thu, 30 Aug 2007, Szak?ts Viktor wrote:
>> In dircmd.prg (maybe some other places too), hb_SToD()
>> should be used, as plain SToD() is guarded with HB_COMPAT_XPP,
>> so if someone compiles without it we don't have this
>> function. (in other words Harbour RTL should always
>> use hb_SToD(), which is always available.)
>
> Yes, if I left STOD() then it was my fault - I'll fix it.

Thanks.

>> As another small note for the update FILE() NOTE. The
>> trimming is actually done my CA-Cl*pper, not DOS.
>
> Yes. In some functions CA-Cl*pper strips trailing and leading
> spaces but in some other it doesn't and trimming is done by DOS,
> f.e. FCREATE().
> To be more precise. DOS refuse to create file if file name start
> with space so leading spaces had to be removed by Clipper but
> it strips trailing spaces from base name and from extension.
> Now _SET_TRIMFILENAME does not emulate exactly this behavior but
> also space striping in FILE() done by Clipper does not seems to
> be correct. This example clearly shows it.

Thanks, that's a proper solution. In CA-Cl*pper the
trimming is done pretty "randomly".

(still I think the new extension to the FILE() NOTE: is
now a bit misleading, not that it would matter too much.)

>> Moreover, the CA-Cl*pper interals also limit the maximum length
>> of the path passed to about 63 chars, but that's another
>> matter.
>
> 63 characters + chr(0) is also old DOS limit for maximum path size.
> In Harbour we are using _POSIX_PATH_MAX for such limit.

Actually, even under DOS I could raise this limit by
having my own FileExists() function which would simply
call the DOS interrupt.

BTW, there is an important issue with FILE(), in both
CA-Cl*pper and Harbour (as we are now compatible).

The problem is that both are using the FileFind API
to look for the file, but there can be cases where
filelist parsing is denied by an ACL. A good example
for this is the %SYSTEMROOT%\TEMP\ (C:\WINDOWS\TEMP\)
dir under Windows XP. There is a good reason to disallow
filelist parsing for such a userglobal temp directory,
because otherwise processes could hunt for each others
temp files and might be catching some important
information from other processes' this way.
So, by using the FileFind API, now Clipper is not
returning .T. for files actually there. (*)

For this reason C RTLs used to use stat() (or similar,
like GetFileAttributes() under Windows) to check for
the presence of a given file, instead of the FileFind API.
Also notice that FileFind is probably slower.

Question: Should we fix the way Harbour's FILE() works?
My vote is yes, but pls let's discuss it.

Brgds,
Viktor

(*) Under Windows XP, you can easily try this by
creating the file C:\WINDOWS\TEMP\test.tmp as an
administrator user, then by running a Clipper
program with the line "? File("C:\WINDOWS\TEMP\test.tmp")"
as a _normal_ (non-admin, non-poweruser) user. Given
that the ACLs of C:\WINDOWS\TEMP\ are the install
defaults.

From harbour.01 at syenar.hu  Thu Aug 30 07:18:51 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Aug 30 07:19:00 2007
Subject: [Harbour] ChangeLog 2007-08-30 03:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070830105436.GB29115@localhost.localdomain>
References: <20070830015655.GA27789@localhost.localdomain>
	<9D95113F-CFB8-4703-A930-E418880BA10B@syenar.hu>
	<20070830105436.GB29115@localhost.localdomain>
Message-ID: <CE671C94-A56D-4AB7-B997-040D477F5DA1@syenar.hu>

> Ups, sorry. But the good side effect will be double verification ;-)

Well yes, and debugging classes is such a pain anyway,
that I'll call for help from actual users. (as I'm also
not using any C 5.3 classes)

>> I'm actually working on the last file of
>> them and will post the changes for testing
>> as soon as I'm finished.
>> I'll try to keep your changes, but I'd ask
>> everyone not to touch these files for
>> some more time.
>
> I'm checking other RTL files but I'll left untouched the ones with
> .prg classes. I already updated scrollbr.prg but I will wait with
> committing for you or I can send this file to you.

Just send it to me pls.

>> (BTW xhb had some very doubtful changes in these files as far as
>> I could see)
>
> I know and I hope that I haven't borrowed them but of course it's  
> possible.
> I found also some typos in xHarbour code. Probably when we finish  
> someone
> from xHarbour team should compare xHarbour and Harbour files for the
> differences in code and take our fixes.

Yes. I hope to come up with something soon. I'm right now at
ttopbar.prg's MENUSYS part (which is the last 5.3 class), after that
I'll get back to TBrowse() fixing (which is the biggest pain of all,
but in this case xhb has indeed some improvements over Harbour).

I've also made some minor changes, uniformization and formatting to
the other .prg classes.

Brgds,
Viktor

From druzus at priv.onet.pl  Thu Aug 30 07:42:18 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug 30 07:42:24 2007
Subject: [Harbour] ChangeLog 2007-08-30 03:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <546BB244-7389-4C5A-AF8A-4AD278593800@syenar.hu>
References: <20070830015655.GA27789@localhost.localdomain>
	<0A175489-F0AD-4232-88C1-9DB4F7A1D2A5@syenar.hu>
	<20070830104548.GA29115@localhost.localdomain>
	<546BB244-7389-4C5A-AF8A-4AD278593800@syenar.hu>
Message-ID: <20070830114218.GA29554@localhost.localdomain>

On Thu, 30 Aug 2007, Szak?ts Viktor wrote:
> (still I think the new extension to the FILE() NOTE: is
> now a bit misleading, not that it would matter too much.)

OK, I'll try to update it.

> >63 characters + chr(0) is also old DOS limit for maximum path size.
> >In Harbour we are using _POSIX_PATH_MAX for such limit.
> Actually, even under DOS I could raise this limit by
> having my own FileExists() function which would simply
> call the DOS interrupt.

AFAIR in DOS 5.0 or 6.0 (if it's important I can check in documentation
exact DOS version) this limit was moved from 64 to 128 but probably
some constance used to compile Clipper where not updated.

> BTW, there is an important issue with FILE(), in both
> CA-Cl*pper and Harbour (as we are now compatible).
> The problem is that both are using the FileFind API
> to look for the file, but there can be cases where
> filelist parsing is denied by an ACL.
[...]
> So, by using the FileFind API, now Clipper is not
> returning .T. for files actually there. (*)
> For this reason C RTLs used to use stat() (or similar,
> like GetFileAttributes() under Windows) to check for
> the presence of a given file, instead of the FileFind API.

I use my own function HB_ACCESS() which is wrapper to access()
function. This function  should be used instead of stat().

> Also notice that FileFind is probably slower.

It will depend on OS but in most cases yes.

> Question: Should we fix the way Harbour's FILE() works?
> My vote is yes, but pls let's discuss it.

Please remember that FILE() accepts wildcards. We cannot eliminate
directory scanning without breaking Clipper compatibility. So we
can add to FILE() additional call to access( ( char * ) pFilename, F_OK )
at the beginning to check if file exists and then make directory scanning
or we can add new function HB_ACCESS() which will be wrapper to POSIX
access() C function. Of course we can also make both modifications.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Aug 30 07:49:12 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Aug 30 07:49:19 2007
Subject: [Harbour] ChangeLog 2007-08-30 03:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070830114218.GA29554@localhost.localdomain>
References: <20070830015655.GA27789@localhost.localdomain>
	<0A175489-F0AD-4232-88C1-9DB4F7A1D2A5@syenar.hu>
	<20070830104548.GA29115@localhost.localdomain>
	<546BB244-7389-4C5A-AF8A-4AD278593800@syenar.hu>
	<20070830114218.GA29554@localhost.localdomain>
Message-ID: <22F2B92C-DA6C-4CE3-A983-3537DC4AAF3B@syenar.hu>

>> Also notice that FileFind is probably slower.
>
> It will depend on OS but in most cases yes.
>
>> Question: Should we fix the way Harbour's FILE() works?
>> My vote is yes, but pls let's discuss it.
>
> Please remember that FILE() accepts wildcards. We cannot eliminate
> directory scanning without breaking Clipper compatibility. So we
> can add to FILE() additional call to access( ( char * ) pFilename,  
> F_OK )

That's a good idea. Or, detect if a wildcard was used, use
"access" if not, and use FileFind if there was any.

> at the beginning to check if file exists and then make directory  
> scanning
> or we can add new function HB_ACCESS() which will be wrapper to POSIX
> access() C function. Of course we can also make both modifications.

Oh yes, I've forgotten about the wildcard feature.

I think it would still be very useful to add a proper
function like HB_ACCESS(). We should also aim to use
this inside Harbour instead of FILE() / hb_fsFile(),
where it makes sense (and where there is no wildcard).

Brgds,
Viktor

From guy.roussin at teledetection.fr  Thu Aug 30 18:55:56 2007
From: guy.roussin at teledetection.fr (=?UTF-8?B?R3V5IFJvdXNzaW4=?= )
Date: Thu Aug 30 12:56:01 2007
Subject: [Harbour] Bug with SetCoors() in source/rtl/tpopup.prg
Message-ID: <20070830165556.5A3B53683F@mafalda.teledetection.fr>

Hi,

I get a bug with SetCoors() function (last svn)

Error BASE/1081  Argument error: +
Called from POPUPMENU:SETCOORS(455)
Called from TOPBARMENU:DISPLAY(419)
Called from TOPBARMENU:MODAL(541)
Called from MENUMODAL(98)
Called from MAIN(46)
Called from __HRBRUN(0)
Called from _APPMAIN(106)

Notice the parameters of SetCoors():

$ grep -r "SetCoors" *
source/rtl/tpopup.prg:   METHOD SetCoors( nRow, nCol, lTop )
source/rtl/tpopup.prg:METHOD SetCoors( nItem, nRow, nCol ) CLASS PopUpMenu
source/rtl/tpopup.prg:         ::aItems[ nItem ]:data:SetCoors( 0, row, ::right + 1 )
source/rtl/ttopbar.prg:         ::aItems[ n ]:data:SetCoors( ::row + 1, ::aItems[ n ]:column, .t. )

Thanks,

--
Guy Roussin

___________________________________
http://www.teledetection.fr


From harbour.01 at syenar.hu  Thu Aug 30 13:57:55 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Aug 30 13:58:06 2007
Subject: [Harbour] Bug with SetCoors() in source/rtl/tpopup.prg
In-Reply-To: <20070830165556.5A3B53683F@mafalda.teledetection.fr>
References: <20070830165556.5A3B53683F@mafalda.teledetection.fr>
Message-ID: <35F88470-E28E-4FFE-93E6-5BB2CE2D54CE@syenar.hu>

Guy and all,

I'll be off for a few days, and I'll continue the work
on .prg classes next Tuesday.

Until then, if you want to have a peek to the new code,
here is the link:
http://www.syenar.hu/harbour/hb_prg_class_patch_work_in_progress.zip

Disclaimer: Work in progress, there is still a lot to do.

If you have any experience with it, or fixes for it, pls tell.

Brgds,
Viktor

On 2007.08.30., at 18:55, Guy Roussin wrote:

> Hi,
>
> I get a bug with SetCoors() function (last svn)
>
> Error BASE/1081  Argument error: +
> Called from POPUPMENU:SETCOORS(455)
> Called from TOPBARMENU:DISPLAY(419)
> Called from TOPBARMENU:MODAL(541)
> Called from MENUMODAL(98)
> Called from MAIN(46)
> Called from __HRBRUN(0)
> Called from _APPMAIN(106)
>
> Notice the parameters of SetCoors():
>
> $ grep -r "SetCoors" *
> source/rtl/tpopup.prg:   METHOD SetCoors( nRow, nCol, lTop )
> source/rtl/tpopup.prg:METHOD SetCoors( nItem, nRow, nCol ) CLASS  
> PopUpMenu
> source/rtl/tpopup.prg:         ::aItems[ nItem ]:data:SetCoors( 0,  
> row, ::right + 1 )
> source/rtl/ttopbar.prg:         ::aItems[ n ]:data:SetCoors( ::row  
> + 1, ::aItems[ n ]:column, .t. )
>
> Thanks,
>
> --
> Guy Roussin
>
> ___________________________________
> http://www.teledetection.fr
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From gvarona at ec-red.com  Thu Aug 30 14:02:47 2007
From: gvarona at ec-red.com (=?UTF-8?B?R3VpbGxlcm1vIFZhcm9uYSBTaWx1cMO6?=)
Date: Thu Aug 30 14:03:03 2007
Subject: [Harbour] Bug with SetCoors() in source/rtl/tpopup.prg
In-Reply-To: <20070830165556.5A3B53683F@mafalda.teledetection.fr>
References: <20070830165556.5A3B53683F@mafalda.teledetection.fr>
Message-ID: <46D70647.1020709@ec-red.com>

See this thread:

http://lists.harbour-project.org/pipermail/harbour/2007-August/003314.html

Best Regard.
GVS

Guy Roussin escribi?:
> Hi,
>
> I get a bug with SetCoors() function (last svn)
>
> Error BASE/1081  Argument error: +
> Called from POPUPMENU:SETCOORS(455)
> Called from TOPBARMENU:DISPLAY(419)
> Called from TOPBARMENU:MODAL(541)
> Called from MENUMODAL(98)
> Called from MAIN(46)
> Called from __HRBRUN(0)
> Called from _APPMAIN(106)
>
> Notice the parameters of SetCoors():
>
> $ grep -r "SetCoors" *
> source/rtl/tpopup.prg:   METHOD SetCoors( nRow, nCol, lTop )
> source/rtl/tpopup.prg:METHOD SetCoors( nItem, nRow, nCol ) CLASS PopUpMenu
> source/rtl/tpopup.prg:         ::aItems[ nItem ]:data:SetCoors( 0, row, ::right + 1 )
> source/rtl/ttopbar.prg:         ::aItems[ n ]:data:SetCoors( ::row + 1, ::aItems[ n ]:column, .t. )
>
> Thanks,
>
> --
> Guy Roussin
>
> ___________________________________
> http://www.teledetection.fr
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
>   

From druzus at priv.onet.pl  Thu Aug 30 14:11:00 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug 30 14:11:10 2007
Subject: [Harbour] Bug with SetCoors() in source/rtl/tpopup.prg
In-Reply-To: <20070830165556.5A3B53683F@mafalda.teledetection.fr>
References: <20070830165556.5A3B53683F@mafalda.teledetection.fr>
Message-ID: <20070830181059.GA3806@localhost.localdomain>

On Thu, 30 Aug 2007, Guy Roussin  wrote:
> Hi,
> I get a bug with SetCoors() function (last svn)
> Error BASE/1081  Argument error: +
> Called from POPUPMENU:SETCOORS(455)

Neither I nor Victor hasn't touched TOPBARMENU class so far.
So it's an old bug which exists for a long time. Probably it
will be fixed by Victor when he will update this class. Of
course if it's real bug.
Please note that also in Clipper you can cause similar errors
using predefined classes and they do not have to be Clipper bug.
For us most important is self contain as small as possible example
reproducing the problem which we can compile by Clipper and Harbour
and compare results. Such examples are also valuable for regression
tests. If you can create code example for above problem (as I said
as small as possible) which will be also non interactive then it will
help us when we will work on TOPBARMENU class.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Aug 30 14:34:27 2007
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Szak=E1ts_Viktor?=)
Date: Thu Aug 30 14:34:35 2007
Subject: [Harbour] Bug with SetCoors() in source/rtl/tpopup.prg
In-Reply-To: <20070830181059.GA3806@localhost.localdomain>
References: <20070830165556.5A3B53683F@mafalda.teledetection.fr>
	<20070830181059.GA3806@localhost.localdomain>
Message-ID: <B98F64F5-7D31-44B9-95E0-346BDA788138@syenar.hu>

Actually, in the new code, :SetCoors is not used by TOPBARMENU,
and it doesn't even exist in original CA-Cl*pper. Just like
:IsQuick or :IsShortCut, someone posted the other day.

For the time being if anyone has any meaningful test apps
that can be used to test these 5.3 classes, don't hesitate
to send either to the list or to me directly.

(I know about the one for the MENU in 5.3 samples dir)

Brgds,
Viktor

On 2007.08.30., at 20:11, Przemyslaw Czerpak wrote:

> On Thu, 30 Aug 2007, Guy Roussin  wrote:
>> Hi,
>> I get a bug with SetCoors() function (last svn)
>> Error BASE/1081  Argument error: +
>> Called from POPUPMENU:SETCOORS(455)
>
> Neither I nor Victor hasn't touched TOPBARMENU class so far.
> So it's an old bug which exists for a long time. Probably it
> will be fixed by Victor when he will update this class. Of
> course if it's real bug.
> Please note that also in Clipper you can cause similar errors
> using predefined classes and they do not have to be Clipper bug.
> For us most important is self contain as small as possible example
> reproducing the problem which we can compile by Clipper and Harbour
> and compare results. Such examples are also valuable for regression
> tests. If you can create code example for above problem (as I said
> as small as possible) which will be also non interactive then it will
> help us when we will work on TOPBARMENU class.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From guy.roussin at teledetection.fr  Thu Aug 30 21:18:55 2007
From: guy.roussin at teledetection.fr (=?UTF-8?B?R3V5IFJvdXNzaW4=?= )
Date: Thu Aug 30 15:18:59 2007
Subject: =?UTF-8?B?UmU6IFtIYXJib3VyXSBCdWcgd2l0aCBTZXRDb29ycygpIGluIHNvdXJjZS9ydGwvdHBvcHVwLnByZw==?=
Message-ID: <20070830191855.8179D3683E@mafalda.teledetection.fr>

Przemyslaw Czerpak <druzus@priv.onet.pl> a ?crit :
> If you can create code example for above problem (as I said
> as small as possible) which will be also non interactive then it will
> help us when we will work on TOPBARMENU class.

#!/usr/local/bin/hbrun
#include "inkey.ch"
function main()
 local oInfo:=menucreer()
 while MenuModal(oInfo,1,24,1,79,"r/w") <> 999
 end
return(NIL)

function menucreer()
local oTopBar, oPopUp, oPopUp1, oItem
oTopBar := TopBar( 0, 10, 50)
oPopUp := PopUp()
oTopBar:AddItem( MenuItem ( "&Fichier",oPopUp) )
oItem :=MenuItem( "&Nouveau" ,{|| creerfichier() }, K_CTRL_N,"Nouv fichier", 101)
oPopUp:AddItem( oItem)
return(oTopBar)

function creerfichier()
return(NIL)


--
Guy Roussin

___________________________________
http://www.teledetection.fr


From druzus at priv.onet.pl  Thu Aug 30 17:06:23 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug 30 17:06:32 2007
Subject: [Harbour] Bug with SetCoors() in source/rtl/tpopup.prg
In-Reply-To: <20070830191855.8179D3683E@mafalda.teledetection.fr>
References: <20070830191855.8179D3683E@mafalda.teledetection.fr>
Message-ID: <20070830210623.GA4514@localhost.localdomain>

On Thu, 30 Aug 2007, Guy Roussin  wrote:
> > If you can create code example for above problem (as I said
> > as small as possible) which will be also non interactive then it will
> > help us when we will work on TOPBARMENU class.
> 
> #!/usr/local/bin/hbrun
> #include "inkey.ch"
> function main()
>  local oInfo:=menucreer()
>  while MenuModal(oInfo,1,24,1,79,"r/w") <> 999
>  end
> return(NIL)
> 
> function menucreer()
> local oTopBar, oPopUp, oPopUp1, oItem
> oTopBar := TopBar( 0, 10, 50)
> oPopUp := PopUp()
> oTopBar:AddItem( MenuItem ( "&Fichier",oPopUp) )
> oItem :=MenuItem( "&Nouveau" ,{|| creerfichier() }, K_CTRL_N,"Nouv fichier", 101)
> oPopUp:AddItem( oItem)
> return(oTopBar)
> 
> function creerfichier()
> return(NIL)

Thank you very much. Good example - it works with CL53 but doesn't with
Harbour. I hope it will be fixed in few weeks.

best regards,
Przemek
From druzus at priv.onet.pl  Thu Aug 30 21:18:27 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug 30 21:18:35 2007
Subject: [Harbour] ChangeLog 2007-08-31 03:20 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070831011827.GA4768@localhost.localdomain>

2007-08-31 03:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapi.h
  * harbour/source/vm/dynsym.c
    + added hb_dynsymIsFunction()

  * harbour/source/rtl/filehb.c
    * updated comment

  * harbour/source/rtl/scroll.c
  * harbour/source/rtl/transfrm.c
  * harbour/source/rtl/file.c
    * formatting

  * harbour/source/rtl/substr.c
  * harbour/source/rtl/trim.c
    % optimization

  * harbour/source/rtl/typefile.prg
    % use HB_ATOKENS() instead of static .prg function

  * harbour/source/rtl/setkey.c
    % optimization and protection aganst possible GPF when wrong array
      is passed to HB_SETKEYSAVE()

  * harbour/source/rtl/xhelp.c
    ! do not generate RT error when HELP symbol exist
      (f.e. after PUBLIC HELP) but HELP() function doesn't
    ! keep reference in parametes passed by reference to __XHELP()
    * use only PHB_DYNS instead of PHB_SYMB

  * harbour/source/rtl/seconds.c
    + added WIN32 version borrowed from XHARBOUR

  * harbour/source/rtl/trace.c
    ! protection against possible GPF when wrong parameters are passed

  * harbour/source/rtl/samples.c
    ! protection against possible GPF when wrong parameters are passed
      Warning! We have in this file few functions without HB_ prefix.
      Some of them may create conflicts with future functions for TIMEDATE
      items.

  * harbour/source/rtl/inkey.c
    + added support for passing array with key codes as __KEYBOARD()
      parameter, covered by HB_EXTENSION macro - this is xHarbour compatible
      extension. I do not like it but we already had extension with numeric
      parameters and probably it would be hard to remove it now and keep
      __KEYBOARD() code clean so I decided to add support also for arrays
      instead of creating new function and adding conditional code covered
      by HB_COMPAT_XHB macro.

  * harbour/source/rtl/setfunc.prg
    * accept extended __KEYBOARD() parameters when HB_EXTENSION macro
      is set.

best regards,
Przemek
From druzus at priv.onet.pl  Thu Aug 30 21:25:29 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Thu Aug 30 21:25:35 2007
Subject: [Harbour] ChangeLog 2007-08-31 03:25 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070831012529.GB4768@localhost.localdomain>

2007-08-31 03:25 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/dircmd.prg
    * changed STOD() to HB_STOD()

  * harbour/source/rtl/philes.c
    * renamed HB_F_EOF() to HB_FEOF()

best regards,
Przemek
From druzus at priv.onet.pl  Fri Aug 31 05:55:09 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Aug 31 05:55:17 2007
Subject: [Harbour] ChangeLog 2007-08-31 11:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070831095509.GA3202@localhost.localdomain>

2007-08-31 11:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/hbhex.c
    + added HB_HEXTOSTR() and HB_STRTOHEX() - they are compatible with
      HEXTOSTR() and STRTOHEX() in xHarbour

  * harbour/include/hbcompat.ch
    + added translations for HB_HEXTOSTR(), HB_STRTOHEX()

  * harbour/include/hbextern.ch
    + added new functions

  * harbour/contrib/libct/ctextern.ch
    * updated function list

best regards,
Przemek
From dbtopas at dbtopas.lt  Fri Aug 31 06:26:35 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Aug 31 06:28:20 2007
Subject: [Harbour] ChangeLog 2007-08-31 11:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20070831095509.GA3202@localhost.localdomain>
References: <20070831095509.GA3202@localhost.localdomain>
Message-ID: <46D7ECDB.3070300@dbtopas.lt>

Przemyslaw Czerpak wrote:
> 2007-08-31 11:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/source/rtl/hbhex.c
>     + added HB_HEXTOSTR() and HB_STRTOHEX() - they are compatible with
>       HEXTOSTR() and STRTOHEX() in xHarbour


Hi,


I've not tried to compile, but it seems hbhex.c line 164:
             ulStr += ulSep;
should be:
             szPtr += ulSep;


extend.c has a lot of
    if( ( iParam >= 0 && iParam <= hb_pcount() ) || ( iParam == -1 ) )
This could be optimized to
    if( iParam >= -1 && iParam <= hb_pcount() )
I've looked to bcc5.5 and gcc3.4 compiled code. It is not optimized by 
these compilers. What is group opinion about this optimization?


Best regards,
Mindaugas

From druzus at priv.onet.pl  Fri Aug 31 09:46:04 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Aug 31 09:46:13 2007
Subject: [Harbour] ChangeLog 2007-08-31 11:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <46D7ECDB.3070300@dbtopas.lt>
References: <20070831095509.GA3202@localhost.localdomain>
	<46D7ECDB.3070300@dbtopas.lt>
Message-ID: <20070831134604.GA1457@localhost.localdomain>

On Fri, 31 Aug 2007, Mindaugas Kavaliauskas wrote:
> Hi,
> I've not tried to compile, but it seems hbhex.c line 164:
>             ulStr += ulSep;
> should be:
>             szPtr += ulSep;

Yes sure - stupid typo. Good to know that someone is checking me :-) - thank
you very much.

> extend.c has a lot of
>    if( ( iParam >= 0 && iParam <= hb_pcount() ) || ( iParam == -1 ) )
> This could be optimized to
>    if( iParam >= -1 && iParam <= hb_pcount() )
> I've looked to bcc5.5 and gcc3.4 compiled code. It is not optimized by 
> these compilers. What is group opinion about this optimization?

I agree. I thought about it too. Should I make it or you can do that?

best regards,
Przemek
From dbtopas at dbtopas.lt  Fri Aug 31 11:14:00 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Aug 31 11:15:46 2007
Subject: [Harbour] ChangeLog 2007-08-31 18:01 UTC+0300 Mindaugas Kavaliauskas
Message-ID: <46D83038.8090607@dbtopas.lt>

2007-08-31 18:01 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * harbour/source/rtl/hbhex.c
     * fixed typo in HB_STRTOHEX()
   * harbour/source/vm/extend.c
     * code optimisation



 > I agree. I thought about it too. Should I make it or you can do that?

I'll try to do it myself, just want to test SVN commit :)


Best regards,
Mindaugas
From druzus at priv.onet.pl  Fri Aug 31 11:52:53 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Aug 31 11:53:01 2007
Subject: [Harbour] ChangeLog 2007-08-31 18:01 UTC+0300 Mindaugas
	Kavaliauskas
In-Reply-To: <46D83038.8090607@dbtopas.lt>
References: <46D83038.8090607@dbtopas.lt>
Message-ID: <20070831155253.GA5657@localhost.localdomain>

On Fri, 31 Aug 2007, Mindaugas Kavaliauskas wrote:
> 2007-08-31 18:01 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
>   * harbour/source/rtl/hbhex.c
>     * fixed typo in HB_STRTOHEX()
>   * harbour/source/vm/extend.c
>     * code optimisation
> > I agree. I thought about it too. Should I make it or you can do that?
> I'll try to do it myself, just want to test SVN commit :)

Thanks,
I'll commit also fix to HB_HEXTOSTR().

best regards,
Przemek
From druzus at priv.onet.pl  Fri Aug 31 11:55:14 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Aug 31 11:55:23 2007
Subject: [Harbour] ChangeLog 2007-08-31 17:55 UTC+0200 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20070831155514.GB5657@localhost.localdomain>

2007-08-31 17:55 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcompat.ch
    + added some reverted translation rules for xHarbour

  * harbour/source/rtl/hbhex.c
    ! fixed HB_HEXTOSTR() - I had really bad day, sorry

best regards,
Przemek
From druzus at priv.onet.pl  Fri Aug 31 12:07:48 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Aug 31 12:07:54 2007
Subject: [Harbour] ChangeLog 2007-08-31 18:01 UTC+0300 Mindaugas
	Kavaliauskas
In-Reply-To: <20070831155253.GA5657@localhost.localdomain>
References: <46D83038.8090607@dbtopas.lt>
	<20070831155253.GA5657@localhost.localdomain>
Message-ID: <20070831160748.GA5983@localhost.localdomain>

On Fri, 31 Aug 2007, Przemyslaw Czerpak wrote:
> >   * harbour/source/vm/extend.c
> >     * code optimisation

BTW You can also make the same modification in hb_parinfo() because
0 is served by earlier condition.

best regards,
Przemek
From dbtopas at dbtopas.lt  Fri Aug 31 12:51:14 2007
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Aug 31 12:52:58 2007
Subject: [Harbour] ChangeLog 2007-08-31 18:01 UTC+0300
	Mindaugas	Kavaliauskas
In-Reply-To: <20070831160748.GA5983@localhost.localdomain>
References: <46D83038.8090607@dbtopas.lt>	<20070831155253.GA5657@localhost.localdomain>
	<20070831160748.GA5983@localhost.localdomain>
Message-ID: <46D84702.7060609@dbtopas.lt>

Przemyslaw Czerpak wrote:
> On Fri, 31 Aug 2007, Przemyslaw Czerpak wrote:
>>>   * harbour/source/vm/extend.c
>>>     * code optimisation
> 
> BTW You can also make the same modification in hb_parinfo() because
> 0 is served by earlier condition.

Yes, I've seen this, but I have not changed it because it will reduce 
readability of code a little. If someone will do some search-replace 
they can miss that "iParam == 0" condition is checked before and "else" 
branch could not have zero value of iParam.

If all developers will be as much attentive as you, I vote to optimize 
this code also :)


Best regards,
Mindaugas
From druzus at priv.onet.pl  Fri Aug 31 13:12:52 2007
From: druzus at priv.onet.pl (Przemyslaw Czerpak)
Date: Fri Aug 31 13:13:01 2007
Subject: [Harbour] ChangeLog 2007-08-31 18:01 UTC+0300
	Mindaugas	Kavaliauskas
In-Reply-To: <46D84702.7060609@dbtopas.lt>
References: <46D83038.8090607@dbtopas.lt>
	<20070831155253.GA5657@localhost.localdomain>
	<20070831160748.GA5983@localhost.localdomain>
	<46D84702.7060609@dbtopas.lt>
Message-ID: <20070831171252.GA6243@localhost.localdomain>

On Fri, 31 Aug 2007, Mindaugas Kavaliauskas wrote:
> >BTW You can also make the same modification in hb_parinfo() because
> >0 is served by earlier condition.
> Yes, I've seen this, but I have not changed it because it will reduce 
> readability of code a little. If someone will do some search-replace 
> they can miss that "iParam == 0" condition is checked before and "else" 
> branch could not have zero value of iParam.

So lets change:

   if( iParam == 0 )
      return ( ULONG ) hb_pcount();
   else
   {
      if( iParam >= -1 && iParam <= hb_pcount() )
      {
         ...

to:
   if( iParam == 0 )
      return ( ULONG ) hb_pcount();
   else if( iParam >= -1 && iParam <= hb_pcount() )
   {
      ...

In such case it's explicitly shown that is 'else if' condition and
not standalone 'if'


> If all developers will be as much attentive as you, I vote to optimize 
> this code also :)

:) You've got my vote.

best regards,
Przemek
From lkrausem at shaw.ca  Fri Aug 31 16:45:57 2007
From: lkrausem at shaw.ca (Luis Krause Mantilla)
Date: Fri Aug 31 16:48:06 2007
Subject: [Harbour] update ADS_REQUIRE_VERSION
Message-ID: <46D87E05.4080300@shaw.ca>

Hi:

A Harbour user contacted me with a problem he has having getting 
adsConnect60()
to work with Harbour.  He was building rddads.lib w/o the 
ADS_REQUIRE_VERSION
manifest constant, so all v 6.0 or higher versions weren't being linked in.

Should we update rddads.h from the current default of 5 to 8?

#ifndef ADS_REQUIRE_VERSION
   #define ADS_REQUIRE_VERSION 8
#endif

Regards,

-- 
Luis Krause Mantilla
lkrausem at shaw dot ca
luis_krause at hotmail dot com
"May the Source be with GNU"


