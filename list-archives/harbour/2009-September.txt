From bedipritpal at hotmail.com  Tue Sep  1 00:45:15 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Sep  1 00:45:21 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12382] trunk/harbour
In-Reply-To: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
Message-ID: <25234250.post@talk.nabble.com>


Hello Przemek


druzus wrote:
> 
> Revision: 12382
>          
> http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12382&view=rev
> Author:   druzus
> Date:     2009-08-31 22:56:45 +0000 (Mon, 31 Aug 2009)
> 

First, thanks for this wonderful development.

I am compiling netiotst.prg as 
hbmk2 netiotst.hbm -run
and I receive this console output:

NETIO_CONNECT(): .F.

and then:

  Error DBFCDX/1004  Create error:
 net:127.0.0.1:2941:data/_tst_.dbf

     Quit    Retry    Default

This error is obivious as TCP/IP connection is not established.

I think I am missing something but what ?
Is it something connected with firewall or what ?

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-12382--trunk-harbour-tp25231702p25234250.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Tue Sep  1 01:55:00 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep  1 01:55:27 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12382] trunk/harbour
In-Reply-To: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
Message-ID: <609353e70908312255q62f11dbfvecc587f1a9a0950f@mail.gmail.com>

Thank you Thank you
Thank you

2009/9/1 <druzus@users.sourceforge.net>

> Revision: 12382
>
> http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12382&view=rev
> Author:   druzus
> Date:     2009-08-31 22:56:45 +0000 (Mon, 31 Aug 2009)
>
> Log Message:
> -----------
> 2009-09-01 00:56 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/harbour.spec
>  * harbour/harbour-win-spec
>  * harbour/harbour-wce-spec
>  * harbour/bin/hb-func.sh
>  * harbour/contrib/Makefile
>  + harbour/contrib/hbnetio
>  + harbour/contrib/hbnetio/netio.h
>  + harbour/contrib/hbnetio/netiomt.prg
>  + harbour/contrib/hbnetio/netiocli.c
>  + harbour/contrib/hbnetio/netiosrv.c
>  + harbour/contrib/hbnetio/Makefile
>    + added new library: HBNETIO.
>      It implements alternative RDD IO API which uses own TCP/IP sockets
>      to exchange data between client and server.
>      This library contains client and server code and is fully MT safe.
>      On client side it's enough to execute:
>         NETIO_CONNECT( [<cServer>], [<cPort>], [<nTimeOut>] ) -> <lOK>
>      function to register alternative NETIO RDD API and set default
>      server address and port.
>         <cServer>  - server addres       (default 127.0.0.1)
>         <cPort>    - server port         (default 2941)
>         <nTimeOut> - connection timeout  (default -1 - not timeout)
>      Above settings are thread local and parameters of the 1-st successful
>      connection are used as default values for each new thread.
>      After registering NETIO client by above function each file starting
>      "net:" prefix is automatically redirected to given NETIO server, i.e.
>         use "net:mytable"
>      It's also possible to pass NETIO server and port as part of file name,
>      i.e.:
>         use "net:192.168.0.1:10005:mytable"
>      On the server side the following functions are available:
>      create NETIO listen socket:
>         NETIO_LISTEN( [<nPort>], [<cAddress>], [<cRootDir>] )
>                                                -> <pListenSocket> | NIL
>      accept new connection on NETIO listen socket:
>         NETIO_ACCEPT( <pListenSocket> [, <nTimeOut>] )
>                                                -> <pConnectionSocket> | NIL
>      start connection server:
>         NETIO_SERVER( <pConnectionSocket> ) -> NIL
>      stop connection accepting or connection server:
>         NETIO_SERVERSTOP( <pListenSocket> | <pConnectionSocket>, <lStop> )
>                                                -> NIL
>      activate MT NETIO server (it needs MT HVM):
>         NETIO_MTSERVER( [<nPort>], [<cAddress>] ) -> <pListenSocket> | NIL
>
>      To create NETIO server is enough to compile and link with MT HVM
>      this code:
>
>         proc main()
>            local pListenSocket
>
>            pListenSocket := netio_mtserver()
>            if empty( pListenSocket )
>               ? "Cannot start server."
>            else
>               wait "Press any key to stop NETIO server."
>               netio_serverstop( pListenSocket )
>               pListenSocket := NIL
>            endif
>         return
>
>      NETIO works with all core RDDs (DBF, DBFFPT, DBFBLOB, DBFNTX, DBFCDX,
>      DBFNSX, SDF, DELIM) and any other RDD which inherits from above or
>      use standard RDD IO API (hb_file*() functions).
>      Without touching even single line in RDD code it gives the same
>      functionality as REDBFCDX in xHarbour but for all RDDs.
>      It's possible that such direct TCP/IP connection is faster then
>      file server protocols especially if they need more then one IP frame
>      to exchange data so it's one of the reason to use it in such cases.
>      Please make real speed tests.
>      The second reason to use NETIO server is resolving problem with
>      concurrent access to the same files using Harbour applications
>      compiled for different platforms, i.e. DOS, LINUX, Windows and OS2.
>      It's very hard to configure all client stations to use correct
>      locking system. NETIO fully resolves this problem so it can be
>      interesting alternative also for MS-Windows users only if they
>      do not want to play with oplocks setting on each station.
>      I'm interesting in user opinions about real life NETIO usage.
>
>      Have a fun with this new toy ;-)
>
>  + harbour/contrib/hbnetio/tests
>  + harbour/contrib/hbnetio/tests/netiotst.prg
>  + harbour/contrib/hbnetio/tests/netiotst.hbp
>  + harbour/contrib/hbnetio/tests/data
>    + added simple test code for NETIO. It activates NETIO MT server
>      and then connects to this server to create and browse table with
>      memo file and production index with few tags.
>
> Modified Paths:
> --------------
>    trunk/harbour/ChangeLog
>    trunk/harbour/bin/hb-func.sh
>    trunk/harbour/contrib/Makefile
>    trunk/harbour/harbour-wce-spec
>    trunk/harbour/harbour-win-spec
>    trunk/harbour/harbour.spec
>
> Added Paths:
> -----------
>    trunk/harbour/contrib/hbnetio/
>    trunk/harbour/contrib/hbnetio/Makefile
>    trunk/harbour/contrib/hbnetio/netio.h
>    trunk/harbour/contrib/hbnetio/netiocli.c
>    trunk/harbour/contrib/hbnetio/netiomt.prg
>    trunk/harbour/contrib/hbnetio/netiosrv.c
>    trunk/harbour/contrib/hbnetio/tests/
>    trunk/harbour/contrib/hbnetio/tests/data/
>    trunk/harbour/contrib/hbnetio/tests/netiotst.hbp
>    trunk/harbour/contrib/hbnetio/tests/netiotst.prg
>
>
> This was sent by the SourceForge.net collaborative development platform,
> the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090901/6be365e2/attachment.html
From fmancera at viaopen.com  Tue Sep  1 02:38:47 2009
From: fmancera at viaopen.com (Fernando Mancera)
Date: Tue Sep  1 02:38:13 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12382] trunk/harbour
In-Reply-To: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
Message-ID: <006101ca2ace$dd3f6770$97be3650$@com>

Hello Przemek,

Thank you very much for this wonderful contribution!!!!!!

Best Regards,
Fernando Mancera
www.viaopen.com


From kadziola at tlen.pl  Tue Sep  1 02:50:06 2009
From: kadziola at tlen.pl (Jaroslaw Kadziola)
Date: Tue Sep  1 02:50:18 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12382] trunk/harbour
In-Reply-To: <006101ca2ace$dd3f6770$97be3650$@com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
	<006101ca2ace$dd3f6770$97be3650$@com>
Message-ID: <49128706.20090901085006@tlen.pl>

Hi,


FM> Thank you very much for this wonderful contribution!!!!!!

+9999999

-- 
Regards,
 Jaroslaw Kadziola

From druzus at acn.waw.pl  Tue Sep  1 03:07:28 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  1 03:07:35 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12382] trunk/harbour
In-Reply-To: <25234250.post@talk.nabble.com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
	<25234250.post@talk.nabble.com>
Message-ID: <20090901070728.GA21984@uran.home.aster.pl>

On Mon, 31 Aug 2009, Pritpal Bedi wrote:

Hi Pritpal,

> > http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12382&view=rev
> > Author:   druzus
> > Date:     2009-08-31 22:56:45 +0000 (Mon, 31 Aug 2009)
> > 
> First, thanks for this wonderful development.

Thank you to all of you for kind words.

> I am compiling netiotst.prg as 
> hbmk2 netiotst.hbm -run
> and I receive this console output:
> NETIO_CONNECT(): .F.
> and then:
>   Error DBFCDX/1004  Create error:
>  net:127.0.0.1:2941:data/_tst_.dbf
>      Quit    Retry    Default
> 
> This error is obivious as TCP/IP connection is not established.
> I think I am missing something but what ?
> Is it something connected with firewall or what ?

1-st: please check if you do not have firewall installed which
may blocks access to given ports.
NETIO server uses port 2941 on and client code uses 'lo' interface
(127.0.0.1) to access the server.
2-nd: please try to increase timeout after server starting and 1-st
connection. Now we have:
   hb_idleSleep( 0.1 )
but it's possible that on some OS-es it have to be bigger value, i.e.
use 1 or 2 seconds. I was testing it in my Linux box also with MinGW
builds using WINE and 0.1 sec. was enough but maybe in real Windows
the situation is different. Sorry but I was two lazy to eliminate this
race condition from netiotst code. Anyhow if longer time resolves the
problem for you then I'll update it.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep  1 03:21:02 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  1 03:21:08 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12382] trunk/harbour
In-Reply-To: <25233147.post@talk.nabble.com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
	<25233147.post@talk.nabble.com>
Message-ID: <20090901072102.GB21984@uran.home.aster.pl>

On Mon, 31 Aug 2009, Abeb wrote:

Hi,

> Will this work on Wince too, so we have a client/server solution for Wince?

It should work with WinCE though seeing Jarek results from one tests
in WinCE which was using sockets and threads I have very serious doubts
if this OS can be used (is efficient enough) to execute server so server
part should be installed rather on desktop.

BTW it's not exactly client/server solution like in ADS or NETRDD
if I finish it. It only replace file server protocol with own transport
layer using TCP/IP socket. It may reduce network traffic a little bit
because messages and data are usually very small and should be exchange
in IP packets encapsulated single ethernet frames. I do not know the
exact details of SMB protocol but it's possible that average overhead
is higher. If someone wants then he can made such tests. I.e. count
ethernet frames for netiotst.prg executed for network drive, i.e.:
   #define DBNAME    "\\192.168.0.1\_tst_"
and compare it with default:
   #define DBNAME    "net:192.168.0.1:2941:_tst_"

best regards,
Przemek
From druzus at users.sourceforge.net  Tue Sep  1 03:28:43 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue Sep  1 03:28:49 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12383] trunk/harbour
Message-ID: <E1MiNnH-0003J7-Jr@dn4whf1.ch3.sourceforge.com>

Revision: 12383
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12383&view=rev
Author:   druzus
Date:     2009-09-01 07:28:42 +0000 (Tue, 01 Sep 2009)

Log Message:
-----------
2009-09-01 09:28 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbnetio/tests/netiotst.prg
    * added header with copyright message

  * harbour/contrib/hbnetio/netiocli.c
    * pacified two BCC warnings

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbnetio/netiocli.c
    trunk/harbour/contrib/hbnetio/tests/netiotst.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From fmancera at viaopen.com  Tue Sep  1 03:36:14 2009
From: fmancera at viaopen.com (Fernando Mancera)
Date: Tue Sep  1 03:35:40 2009
Subject: [Harbour] ViaNemo: New Framework Opensource for Harbour
In-Reply-To: <20090901072102.GB21984@uran.home.aster.pl>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>	<25233147.post@talk.nabble.com>
	<20090901072102.GB21984@uran.home.aster.pl>
Message-ID: <008f01ca2ad6$e3c84000$ab58c000$@com>

Dear all, 

I am pleased to inform that we do have a first developed functional version of ViaNemo,
our OPENSOURCE suggestion of Framework for Harbour.

It has interesting features as developed  applications on Windows 32bits/64bits and also Windows Mobile. 
Its adapted design will permit us in near future to pass to other operating systems such as Mac OSX or Linux.

Possibility to compile applications written for other GUI?s in order users can reuse all applications.
At the moment we have started with FiveWin compatibility for being the most popular one.

We have published this piece of news on our blog http://blog.viaopen.com

We have not decided how to provide it yet, but I think that according to its features,
it would be very interesting for community to add it as Harbour-project contribution.
My questions are ?What do you think about it??; ?Would it be possible to get authorization to add it??

Thank you, 
Best regards

Fernando Mancera
www.viaopen.com


From druzus at users.sourceforge.net  Tue Sep  1 03:48:48 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue Sep  1 03:48:53 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12384] trunk/harbour
Message-ID: <E1MiO6i-0003sA-0f@dn4whf1.ch3.sourceforge.com>

Revision: 12384
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12384&view=rev
Author:   druzus
Date:     2009-09-01 07:48:44 +0000 (Tue, 01 Sep 2009)

Log Message:
-----------
2009-09-01 09:48 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbnetio/tests/netiotst.prg
    * check if NETIO server is properly started
    * formatting some messages

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbnetio/tests/netiotst.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From M.Horodyski at pzuzycie.com.pl  Tue Sep  1 04:04:19 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Tue Sep  1 04:04:28 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12382] trunk/harbour
In-Reply-To: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C95027929CE@PINK.zycie.pzu>

>-----Original Message-----
>From: druzus@users.sourceforge.net 
>[mailto:druzus@users.sourceforge.net] 
>Sent: Tuesday, September 01, 2009 12:57 AM
>To: harbour@harbour-project.org
>Subject: [Harbour] SF.net SVN: harbour-project:[12382] trunk/harbour
>
>Revision: 12382
>          
>http://harbour-project.svn.sourceforge.net/harbour-project/?rev
=12382&view=rev
>Author:   druzus
>Date:     2009-08-31 22:56:45 +0000 (Mon, 31 Aug 2009)

...

>         NETIO_CONNECT( [<cServer>], [<cPort>], [<nTimeOut>] ) -> <lOK>
>      function to register alternative NETIO RDD API and set default
>      server address and port.

...

>      "net:" prefix is automatically redirected to given NETIO server,
i.e.
>         use "net:mytable"
>      It's also possible to pass NETIO server and port as part of file
name, i.e.:
>         use "net:192.168.0.1:10005:mytable"

How we can connect to many than one server ?
Maby :
NETIO_CONNECT( [<cServer>], [<cPort>], [<nTimeOut>], @server_alias ) ->
<lOK>

And server_alias can be : net01, net02 etc.

Regards,
Marek Horodyski

P.S.
Many thanks for these big solution :)
From druzus at acn.waw.pl  Tue Sep  1 04:11:17 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  1 04:11:23 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12382] trunk/harbour
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C95027929CE@PINK.zycie.pzu>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
	<FFAFD6EA63A3FC4784FBDA52BE7A7C95027929CE@PINK.zycie.pzu>
Message-ID: <20090901081117.GA21702@uran.home.aster.pl>

On Tue, 01 Sep 2009, Horodyski Marek (PZUZ) wrote:
> How we can connect to many than one server ?

In few different ways, i.e.:

   NETIO_CONNECT( "192.168.0.1" )
   use net:table1
   NETIO_CONNECT( "192.168.0.2" )
   use net:table2
   use net:192.168.0.3:table3

NETIO_CONNECT() stores information about default connection in thread
local area so can be safely used in MT programs. But you can also
use server name and port in file name. You have this information in
ChangeLog message I sent.

best regards,
Przemek
From mhsabado at gmail.com  Tue Sep  1 04:11:13 2009
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Tue Sep  1 04:11:27 2009
Subject: [Harbour] Testing HBNETIO
In-Reply-To: <4a9cc467.aa15f10a.6c5f.5fb1SMTPIN_ADDED@mx.google.com>
References: <4a9cc467.aa15f10a.6c5f.5fb1SMTPIN_ADDED@mx.google.com>
Message-ID: <4A9CD721.6040200@gmail.com>

Hi Przemek,

I've tested under Windows using BCC and MingW and got the "Cannot start 
NETIO server !!!" message.  I tried adding the 2941 port to Windows 
firewall exception also but still the same.

Thank you so much for the great work and more power!

Best regards,
Mario

From bedipritpal at hotmail.com  Tue Sep  1 04:17:16 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Sep  1 04:17:22 2009
Subject: [Harbour] Testing HBNETIO
In-Reply-To: <4A9CD721.6040200@gmail.com>
References: <4A9CD721.6040200@gmail.com>
Message-ID: <25236180.post@talk.nabble.com>


Hi


Mario H. Sabado wrote:
> 
> I've tested under Windows using BCC and MingW and got the "Cannot start 
> NETIO server !!!" message.  I tried adding the 2941 port to Windows 
> firewall exception also but still the same.
> 

Same is the case with me.
After struggling for two hours, I cannot connect, still trying why?

Windows XP with no firewall installed.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Testing-HBNETIO-tp25236094p25236180.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From hernad at sigma-com.net  Tue Sep  1 04:31:59 2009
From: hernad at sigma-com.net (Ernad Husremovic)
Date: Tue Sep  1 04:32:12 2009
Subject: [Harbour] LETODB or NETIO ?
In-Reply-To: <14675314.51251793696414.JavaMail.root@zimbra-1.sigma-com.net>
Message-ID: <7319175.71251793919383.JavaMail.root@zimbra-1.sigma-com.net>

Hello hb community.
A few days ago, we started porting our clipper solutions to LETODB RDD.

Today I read about new Przemek great contribution: NETIO RDD.

Reading Changelog, NETIO is also good candidate for our default RDD.

Our main goal is to provide multiplatform (linux, windows) solution which is not vulnerable 
to data corruption caused by direct file access.

In some earlier conversation, Przemek wrote: 
> BTW it's not exactly client/server solution like in ADS or NETRDD if I finish it.

I would like to hear community comments about the optimal choice of (opensource) RDDs in the client/server arena. 

Thank you,
Ernad
From druzus at acn.waw.pl  Tue Sep  1 04:45:44 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  1 04:45:51 2009
Subject: [Harbour] Testing HBNETIO
In-Reply-To: <25236180.post@talk.nabble.com>
References: <4A9CD721.6040200@gmail.com> <25236180.post@talk.nabble.com>
Message-ID: <20090901084544.GB21702@uran.home.aster.pl>

On Tue, 01 Sep 2009, Pritpal Bedi wrote:

Hi,

> > I've tested under Windows using BCC and MingW and got the "Cannot start 
> > NETIO server !!!" message.  I tried adding the 2941 port to Windows 
> > firewall exception also but still the same.
> Same is the case with me.
> After struggling for two hours, I cannot connect, still trying why?
> Windows XP with no firewall installed.

I think that I know the reason of problem. I still forgot that in
windows it's necessary to initialize socket library explicitly.
Please add:
      hb_inetInit()
before:
      pSockSrv := netio_mtserver()
and try again. When I run windows application using WINE in my
linux box I do not have to initialize WINSOCK library so it was
working for me.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep  1 04:59:48 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  1 04:59:54 2009
Subject: [Harbour] LETODB or NETIO ?
In-Reply-To: <7319175.71251793919383.JavaMail.root@zimbra-1.sigma-com.net>
References: <14675314.51251793696414.JavaMail.root@zimbra-1.sigma-com.net>
	<7319175.71251793919383.JavaMail.root@zimbra-1.sigma-com.net>
Message-ID: <20090901085947.GC21702@uran.home.aster.pl>

On Tue, 01 Sep 2009, Ernad Husremovic wrote:

Hi,

> Hello hb community.
> A few days ago, we started porting our clipper solutions to LETODB RDD.
> Today I read about new Przemek great contribution: NETIO RDD.

To clarify. It's not RDD but only alternative RDD IO API library so
it allows to switch transport layer in all RDDs which uses hb_file*()
interface.

> Reading Changelog, NETIO is also good candidate for our default RDD.
> Our main goal is to provide multiplatform (linux, windows) solution

NETIO RDD resolves the problem with sharing database files between
different OS-es so it can be usefull in such cases.

> which is not vulnerable 
> to data corruption caused by direct file access.

But here it will not help you in noticeable way.
It's not client server solution for database and index file processing.
They are still updated by the local station not the server so station
crash may leave index not fully updated.
NETIO replaces only transport layer.

> In some earlier conversation, Przemek wrote: 
> > BTW it's not exactly client/server solution like in ADS or NETRDD if I finish it.
> I would like to hear community comments about the optimal choice of (opensource) RDDs in the client/server arena. 

For sure full server side table and index processing is much better solution.
ADS and LETO are such servers. I haven't used any of them so I cannot say
too much about them. ADS is commercial project with very good user opinion.
LETO is opensource project but I do not know user experience about using it
in larger installations. I also cannot say too much about its internals
and if it's safe or not to use it with Harbour multithread programs.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep  1 05:08:02 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  1 05:08:10 2009
Subject: [Harbour] ViaNemo: New Framework Opensource for Harbour
In-Reply-To: <008f01ca2ad6$e3c84000$ab58c000$@com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
	<25233147.post@talk.nabble.com>
	<20090901072102.GB21984@uran.home.aster.pl>
	<008f01ca2ad6$e3c84000$ab58c000$@com>
Message-ID: <20090901090802.GA32202@uran.home.aster.pl>

On Tue, 01 Sep 2009, Fernando Mancera wrote:

Hi Fernando,

> I am pleased to inform that we do have a first developed functional version of ViaNemo,
> our OPENSOURCE suggestion of Framework for Harbour.
> It has interesting features as developed  applications on Windows 32bits/64bits and also Windows Mobile. 
> Its adapted design will permit us in near future to pass to other operating systems such as Mac OSX or Linux.
> Possibility to compile applications written for other GUI?s in order users can reuse all applications.
> At the moment we have started with FiveWin compatibility for being the most popular one.
> We have published this piece of news on our blog http://blog.viaopen.com
> We have not decided how to provide it yet, but I think that according to its features,
> it would be very interesting for community to add it as Harbour-project contribution.
> My questions are ?What do you think about it??; ?Would it be possible to get authorization to add it??

Thank you very much for great contribution.
I think that it's the answer for many user requests:
GUI library which is compatible with FWH, works on desktop windows
and with WinCE and can be ported to other OS-es, maybe even integrated
with our HBQT keeping the compatibility with code created for FWH.
I'm not windows user so I cannot make real tests myself but I hope
windows/WinCE users will want to try it and can send their opinion here.
And of course I would like to see such library as part of Harbour SVN
code.

best regards,
Przemek
From elart at elart.it  Tue Sep  1 05:17:49 2009
From: elart at elart.it (elart)
Date: Tue Sep  1 05:17:56 2009
Subject: [Harbour] Testing HBNETIO
In-Reply-To: <20090901084544.GB21702@uran.home.aster.pl>
Message-ID: <3sGiZiEc.1251796669.8210590.marcobra@82.105.36.210>


In data 1/9/2009, "Przemyslaw Czerpak" <druzus@acn.waw.pl> ha scritto:

>On Tue, 01 Sep 2009, Pritpal Bedi wrote:
>
>Hi,
>
>> > I've tested under Windows using BCC and MingW and got the "Cannot start
>> > NETIO server !!!" message.  I tried adding the 2941 port to Windows
>> > firewall exception also but still the same.
>> Same is the case with me.
>> After struggling for two hours, I cannot connect, still trying why?
>> Windows XP with no firewall installed.
>
>I think that I know the reason of problem. I still forgot that in
>windows it's necessary to initialize socket library explicitly.
>Please add:
>      hb_inetInit()
>before:
>      pSockSrv := netio_mtserver()
>and try again. When I run windows application using WINE in my
>linux box I do not have to initialize WINSOCK library so it was
>working for me.

Hi Przemek

So you use and compile DOS/WIN app using Wine...
Which distribution are you using...?
Do you have some guidelines some quick and short guidelines or some
internet page to get same... on my Ubuntu 9.04 and 9.10 boxes...

I have already Wine installed
I think i must be follow the same procedure to install a compiler on Win,
right... ?
Which compiler is better
http://www.harbour-project.org/faq/harbour22.html#22

Many thanks for all you works
Best regards

Marco
From druzus at users.sourceforge.net  Tue Sep  1 05:34:36 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue Sep  1 05:34:42 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12385] trunk/harbour
Message-ID: <E1MiPl6-0006rU-2M@dn4whf1.ch3.sourceforge.com>

Revision: 12385
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12385&view=rev
Author:   druzus
Date:     2009-09-01 09:34:26 +0000 (Tue, 01 Sep 2009)

Log Message:
-----------
2009-09-01 11:33 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/hbsocket.c
    ! added sock_init()/sock_exit() calls to DOS builds.
    ! use select_s() and close_s() instead of select() and close()
      in DOS builds.

  * harbour/contrib/hbnetio/netiocli.c
  * harbour/contrib/hbnetio/netiosrv.c
    ! initialize socket library automatically - it's necessary for some
      platforms.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbnetio/netiocli.c
    trunk/harbour/contrib/hbnetio/netiosrv.c
    trunk/harbour/source/rtl/hbsocket.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Tue Sep  1 06:03:00 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  1 06:03:06 2009
Subject: [Harbour] Testing HBNETIO
In-Reply-To: <3sGiZiEc.1251796669.8210590.marcobra@82.105.36.210>
References: <20090901084544.GB21702@uran.home.aster.pl>
	<3sGiZiEc.1251796669.8210590.marcobra@82.105.36.210>
Message-ID: <20090901100300.GA30366@uran.home.aster.pl>

On Tue, 01 Sep 2009, elart wrote:

Hi,

> So you use and compile DOS/WIN app using Wine...

I'm using WINE only for WIN app. For DOS I use DOSEMU with FreeDOS.
I configured binfmt to execute windows programs using WINE automatically
so I can simply run any windows .exe files just like native applications.
It's also possible to create DOS and Windows application in Linux without
using WINE. You have to download and install MinGW and/or DJGPP for Linux.
I haven't tried DJGPP for Linux yet but MinGW works nicely and I can
create WIN programs though to execute them WINE is still necessary.

> Which distribution are you using...?

SUSE 11.0

> Do you have some guidelines some quick and short guidelines or some
> internet page to get same... on my Ubuntu 9.04 and 9.10 boxes...

If you configure binfmt then you can try to use as C compiler some native
windows binaries. In such way I compiled Harbour using BCC, OpenWatcom,
POCC, XCC, DMC.

> I have already Wine installed
> I think i must be follow the same procedure to install a compiler on Win,
> right... ?

You can look at DEB packages with MinGW cross build. Install them
and then simply execute:

   make HB_PLATFORM=win

to create Harbour MinGW build.

> Which compiler is better
> http://www.harbour-project.org/faq/harbour22.html#22

This is very old text and should be updated.
Personally I like GCC based compilers and I used to use them.
They give very good code for Linux which is comparable in speed
to Intel C compiler at least in speedtst.prg results.
SunPRO C and OpenWatcom gives slower code for Linux@x86.
In Windows the fastest code seems to be generated by MSVC and Intel C.
A little bit slower code is given by MinGW-GCC. Next is OpwnWatcom.
Code generated by BCC is noticeable slower and POCC/XCC gives the
slowest code.

best regards,
Przemek
From kadziola at tlen.pl  Tue Sep  1 06:17:33 2009
From: kadziola at tlen.pl (Jaroslaw Kadziola)
Date: Tue Sep  1 06:17:41 2009
Subject: [Harbour] ViaNemo: New Framework Opensource for Harbour
In-Reply-To: <008f01ca2ad6$e3c84000$ab58c000$@com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
	<25233147.post@talk.nabble.com>
	<20090901072102.GB21984@uran.home.aster.pl>
	<008f01ca2ad6$e3c84000$ab58c000$@com>
Message-ID: <211532118.20090901121733@tlen.pl>

Hi,


FM> It has interesting features as developed  applications on Windows 32bits/64bits
FM> and also Windows Mobile. 
             ^^^^^^^^^^^^^^
Very good news !! We are waiting for this contribution for Harbour :)
Thank You very much for this great job !

-- 
Regards,
 Jaroslaw Kadziola

From mhsabado at gmail.com  Tue Sep  1 06:49:31 2009
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Tue Sep  1 06:49:47 2009
Subject: [Harbour] Testing HBNETIO
In-Reply-To: <4a9ce048.a215f10a.0cc5.208bSMTPIN_ADDED@mx.google.com>
References: <4a9ce048.a215f10a.0cc5.208bSMTPIN_ADDED@mx.google.com>
Message-ID: <4A9CFC3B.3090800@gmail.com>

Hi Pritpal,

Works fine now after 2009-09-01 11:33 UTC+0200 Przemyslaw Czerpak 
(druzus/at/priv.onet.pl).

Many thanks Prezemek!

Mario

Message: 8
Date: Tue, 01 Sep 2009 16:11:13 +0800
From: "Mario H. Sabado" <mhsabado@gmail.com>
Subject: [Harbour] Testing HBNETIO
To: harbour@harbour-project.org
Message-ID: <4A9CD721.6040200@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Hi Przemek,

I've tested under Windows using BCC and MingW and got the "Cannot start 
NETIO server !!!" message.  I tried adding the 2941 port to Windows 
firewall exception also but still the same.

Thank you so much for the great work and more power!

Best regards,
Mario



------------------------------

Message: 9
Date: Tue, 1 Sep 2009 01:17:16 -0700 (PDT)
From: Pritpal Bedi <bedipritpal@hotmail.com>
Subject: Re: [Harbour] Testing HBNETIO
To: harbour@harbour-project.org
Message-ID: <25236180.post@talk.nabble.com>
Content-Type: text/plain; charset=us-ascii


Hi


Mario H. Sabado wrote:

> > 
> > I've tested under Windows using BCC and MingW and got the "Cannot start 
> > NETIO server !!!" message.  I tried adding the 2941 port to Windows 
> > firewall exception also but still the same.
> > 
>   

Same is the case with me.
After struggling for two hours, I cannot connect, still trying why?

Windows XP with no firewall installed.

Regards
Pritpal Bedi


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090901/8c7ddddc/attachment.html
From druzus at acn.waw.pl  Tue Sep  1 07:20:43 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  1 07:20:49 2009
Subject: [Harbour] Testing HBNETIO
In-Reply-To: <4A9CFC3B.3090800@gmail.com>
References: <4a9ce048.a215f10a.0cc5.208bSMTPIN_ADDED@mx.google.com>
	<4A9CFC3B.3090800@gmail.com>
Message-ID: <20090901112043.GA28477@uran.home.aster.pl>

On Tue, 01 Sep 2009, Mario H. Sabado wrote:

Hi,

> Works fine now after 2009-09-01 11:33 UTC+0200 Przemyslaw Czerpak 
> (druzus/at/priv.onet.pl).

Thank you for confirmation.
So adding hb_inetInit() to older versions should also resolve the problem.

best regards,
Przemek
From elart at elart.it  Tue Sep  1 07:41:57 2009
From: elart at elart.it (elart)
Date: Tue Sep  1 07:42:04 2009
Subject: [Harbour] Help on error using compiling Harbour with minGW under
	Ubuntu 9.04
In-Reply-To: <4A9CFC3B.3090800@gmail.com>
Message-ID: <toDk2KTL.1251805317.3363620.marcobra@82.105.36.210>


I'm trying to cross compile Harbour using minGW on a Ubuntu 9.04 32 bit
Linux box
when i run...

make HB_PLATFORM=win

i get this...

/usr/bin/i586-mingw32msvc-gccgcc not exixtent compiler string

My system have the "i586-mingw32msvc-gcc" installed...
# which i586-mingw32msvc-gcc
return
/usr/bin/i586-mingw32msvc-gcc


 make HB_PLATFORM=win
! Building Harbour 2.0.0beta2 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh
! HB_HOST_PLAT: linux  HB_SHELL: sh
! HB_PLATFORM: win (x86)
! HB_COMPILER: mingw (autodetected: /usr/bin/)
! HB_BIN_COMPILE not specified. Automatically set to:
/home/ubuntu/src/harbour/bin/linux/gcc
! Component: 'openssl' location not specified
! Component: 'gpm' not supported on win platform
! Component: 'slang' location not specified
! Component: 'curses' location not specified
! Component: 'x11' location not specified
! Component: 'WATTCP/WATT-32' not supported on win platform
! HB_INSTALL_PREFIX automatically set to: /home/ubuntu/src/harbour
! REVISION: 12385
make[2]: Non c'? da fare nulla per ?all?
make[1]: Non c'? da fare nulla per ?all?
/usr/bin/i586-mingw32msvc-gccgcc  -I. -I../../../../../include  -Wall -W
-O3 -fomit-frame-pointer -march=i586 -mtune=pentiumpro   -oexpropt1.o -c
../../../expropt1.c
make[3]: /usr/bin/i586-mingw32msvc-gccgcc: comando non trovato
make[3]: *** [expropt1.o] Errore 127
make[2]: *** [descend] Errore 2
make[1]: *** [common] Errore 2
make: *** [source] Errore 2

Thank you
From druzus at acn.waw.pl  Tue Sep  1 07:45:55 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  1 07:46:02 2009
Subject: [Harbour] Off Topic. LetoDb Request.
In-Reply-To: <h7gbb5$r7i$1@ger.gmane.org>
References: <h7gbb5$r7i$1@ger.gmane.org>
Message-ID: <20090901114555.GA359@uran.home.aster.pl>

On Mon, 31 Aug 2009, Itamar Lins wrote:

Hi,

> Anybody of the group LetoDB can updated it ?
> To be compiling with the new harbour function hb_socket... for exemple.

The whole modification you are asking for is adding 'static ' at the
beginning of line 373 in source/common/hbip.c. But if you want then you
can make also other cleanups.

below is a patch.

modifications in console.prg and manage.prg fix hardcoded windows
paths so this code can be compiled also in Linux or using different
relative paths.

modification in hbip.c fixes multiple definition of hb_socketConnect()
function. Anyhow here I suggest to rewrite this code to use hbsocket.h
API. It's multiplatform so LETODB can be used on all supported platforms.
But I'm leaving such decision to LETODB developers.

best regards,
Przemek



Index: source/common/hbip.c
===================================================================
RCS file: /cvsroot/letodb/letodb/source/common/hbip.c,v
retrieving revision 1.14
diff -u -r1.14 hbip.c
--- source/common/hbip.c	2 Jul 2009 10:40:58 -0000	1.14
+++ source/common/hbip.c	1 Sep 2009 11:36:14 -0000
@@ -370,7 +370,7 @@
 #endif
 }
 
-int hb_socketConnect( HB_SOCKET_T hSocket, struct sockaddr_in *remote, int timeout )
+static int hb_socketConnect( HB_SOCKET_T hSocket, struct sockaddr_in *remote, int timeout )
 {
    int iErr1;
    #if ! defined(HB_OS_WIN_32)
Index: utils/manager/console.prg
===================================================================
RCS file: /cvsroot/letodb/letodb/utils/manager/console.prg,v
retrieving revision 1.11
diff -u -r1.11 console.prg
--- utils/manager/console.prg	2 Jul 2009 10:40:58 -0000	1.11
+++ utils/manager/console.prg	1 Sep 2009 11:36:14 -0000
@@ -49,7 +49,7 @@
  */
 
 #include "hbclass.ch"
-#include "..\..\include\rddleto.ch"
+#include "rddleto.ch"
 
 Static CRLF
 
Index: utils/manager/manage.prg
===================================================================
RCS file: /cvsroot/letodb/letodb/utils/manager/manage.prg,v
retrieving revision 1.19
diff -u -r1.19 manage.prg
--- utils/manager/manage.prg	28 May 2009 06:45:44 -0000	1.19
+++ utils/manager/manage.prg	1 Sep 2009 11:36:14 -0000
@@ -51,7 +51,7 @@
 #include "hbclass.ch"
 #include "hwgui.ch"
 #include "hxml.ch"
-#include "..\..\include\rddleto.ch"
+#include "rddleto.ch"
 
 #ifndef __XHARBOUR__
 ANNOUNCE HB_GTSYS
From M.Horodyski at pzuzycie.com.pl  Tue Sep  1 07:47:41 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Tue Sep  1 07:47:50 2009
Subject: [Harbour] ViaNemo: New Framework Opensource for Harbour
In-Reply-To: <20090901090802.GA32202@uran.home.aster.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9502792A7B@PINK.zycie.pzu>

>-----Original Message-----
>From: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl] 
>Sent: Tuesday, September 01, 2009 11:08 AM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] ViaNemo: New Framework Opensource for Harbour

...

>hope windows/WinCE users will want to try it and can send 
>their opinion here.
>And of course I would like to see such library as part of 
>Harbour SVN code.

I too :)

Regards,
Marek Horodyski
From fmancera at viaopen.com  Tue Sep  1 08:02:14 2009
From: fmancera at viaopen.com (Fernando Mancera)
Date: Tue Sep  1 08:01:41 2009
Subject: [Harbour] ViaNemo: New Framework Opensource for Harbour
In-Reply-To: <211532118.20090901121733@tlen.pl>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>	<25233147.post@talk.nabble.com>	<20090901072102.GB21984@uran.home.aster.pl>	<008f01ca2ad6$e3c84000$ab58c000$@com>
	<211532118.20090901121733@tlen.pl>
Message-ID: <015701ca2afc$0c6c4db0$2544e910$@com>

Hello Jaroslaw & Horodyski,

Thank you very much!!!!!!!

Best Regards,

Fernando Mancera
www.viaopen.com



From druzus at users.sourceforge.net  Tue Sep  1 08:02:28 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue Sep  1 08:02:34 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12386] trunk/harbour
Message-ID: <E1MiS4C-0002PO-Nk@dn4whf1.ch3.sourceforge.com>

Revision: 12386
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12386&view=rev
Author:   druzus
Date:     2009-09-01 12:02:24 +0000 (Tue, 01 Sep 2009)

Log Message:
-----------
2009-09-01 14:02 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/global.mk
    ! fixed MinGW prefix detection in some cross installations, i.e.
      Debian ones.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/global.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Tue Sep  1 08:02:49 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  1 08:02:56 2009
Subject: [Harbour] Help on error using compiling Harbour with minGW
	under Ubuntu 9.04
In-Reply-To: <toDk2KTL.1251805317.3363620.marcobra@82.105.36.210>
References: <4A9CFC3B.3090800@gmail.com>
	<toDk2KTL.1251805317.3363620.marcobra@82.105.36.210>
Message-ID: <20090901120249.GA17836@uran.home.aster.pl>

On Tue, 01 Sep 2009, elart wrote:
> I'm trying to cross compile Harbour using minGW on a Ubuntu 9.04 32 bit
> Linux box
> when i run...
> make HB_PLATFORM=win
> i get this...
> /usr/bin/i586-mingw32msvc-gccgcc not exixtent compiler string

Please try after:

2009-09-01 14:02 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/global.mk
    ! fixed MinGW prefix detection in some cross installations, i.e.
      Debian ones.

best regards,
Przemek
From elart at elart.it  Tue Sep  1 08:23:10 2009
From: elart at elart.it (elart)
Date: Tue Sep  1 08:23:16 2009
Subject: [Harbour] Help on error using compiling Harbour with minGWunder
	Ubuntu 9.04
In-Reply-To: <20090901120249.GA17836@uran.home.aster.pl>
Message-ID: <WBuGlMzH.1251807790.7137340.marcobra@82.105.36.210>


In data 1/9/2009, "Przemyslaw Czerpak" <druzus@acn.waw.pl> ha scritto:

>On Tue, 01 Sep 2009, elart wrote:
>> I'm trying to cross compile Harbour using minGW on a Ubuntu 9.04 32 bit
>> Linux box
>> when i run...
>> make HB_PLATFORM=win
>> i get this...
>> /usr/bin/i586-mingw32msvc-gccgcc not exixtent compiler string
>
>Please try after:
>
>2009-09-01 14:02 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/config/global.mk
>    ! fixed MinGW prefix detection in some cross installations, i.e.
>      Debian ones.
>
>best regards,
>Przemek
>

Fixed, many thanks and best regards to all.

But now i get...

/usr/bin/i586-mingw32msvc-ar   crs
../../../../../lib/win/mingw/liblibpng.a png.o pngerror.o pnggccrd.o
pngget.o pngmem.o pngpread.o pngread.o pngrio.o pngrtran.o pngrutil.o
pngset.o pngtrans.o pngvcrd.o pngwio.o pngwrite.o pngwtran.o pngwutil.o
|| rm -f ../../../../../lib/win/mingw/liblibpng.a
/usr/bin/i586-mingw32msvc-gcc  -I. -I../../../../../include  -O3
-fomit-frame-pointer -march=i586 -mtune=pentiumpro   -osqlite3.o -c
../../../sqlite3.c
../../../sqlite3.c: In function ?sqlite3BtreeFactory?:
../../../sqlite3.c:92183: warning: passing argument 2 of
?sqlite3BtreeOpen? discards qualifiers from pointer target type
/usr/bin/i586-mingw32msvc-ar   crs
../../../../../lib/win/mingw/libsqlite3.a sqlite3.o || rm -f
../../../../../lib/win/mingw/libsqlite3.a


Marco
From gvarona at ec-red.com  Tue Sep  1 08:59:11 2009
From: gvarona at ec-red.com (=?UTF-8?B?R3VpbGxlcm1vIFZhcm9uYSBTaWx1cMO6?=)
Date: Tue Sep  1 08:56:39 2009
Subject: [Harbour] Cannot start server
In-Reply-To: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
Message-ID: <4A9D1A9F.80606@ec-red.com>

druzus@users.sourceforge.net escribi?:
> . . .
>       To create NETIO server is enough to compile and link with MT HVM
>       this code:
>   
***********server.prg
>          proc main()
>             local pListenSocket
>
>             pListenSocket := netio_mtserver()
>             if empty( pListenSocket )
>                ? "Cannot start server."
>             else
>                wait "Press any key to stop NETIO server."
>                netio_serverstop( pListenSocket )
>                pListenSocket := NIL
>             endif
>          return
>   
***********-> server.prg

Env: WinXP Pro SP3 + Harbour +MinGW

Hi, I'm testing star server, but get this:

Cannot start server.

I'm using this HBP
#
# $Id: uhttpd2.hbp 11370 2009-06-15 18:22:09Z vszakats $
#

server.prg
-lhbnetio
-mt
-lhbvmmt.a

Any TIP?

TIA

Best Regards
GVS


P.D.: Sorry for me bad english

From abe.buch at att.net  Tue Sep  1 08:56:40 2009
From: abe.buch at att.net (AbeB)
Date: Tue Sep  1 08:56:45 2009
Subject: [Harbour] Testing HBNETIO
In-Reply-To: <20090901100300.GA30366@uran.home.aster.pl>
References: <4A9CD721.6040200@gmail.com> <25236180.post@talk.nabble.com>
	<20090901084544.GB21702@uran.home.aster.pl>
	<3sGiZiEc.1251796669.8210590.marcobra@82.105.36.210>
	<20090901100300.GA30366@uran.home.aster.pl>
Message-ID: <1251809800049-3560323.post@n2.nabble.com>


Hi Przemyslaw,
Works Great!
can it be made to support names like net:hostname:port:filename instead of
ip address?

also in my test the NETIO_CONNECT():  returns .F., but it works!

NETIO_CONNECT(): .F.

used: .T.
nterr: .F.
alias: CLASS
lastrec:        121
ordCount:          0



Thanks
Abe


-- 
View this message in context: http://n2.nabble.com/Testing-HBNETIO-tp3558989p3560323.html
Sent from the harbour-devel mailing list archive at Nabble.com.
From itamarlins at bol.com.br  Tue Sep  1 09:05:16 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Tue Sep  1 09:07:15 2009
Subject: [Harbour] Re: Off Topic. LetoDb Request.
References: <h7gbb5$r7i$1@ger.gmane.org>
	<20090901114555.GA359@uran.home.aster.pl>
Message-ID: <h7j68u$vj7$1@ger.gmane.org>

Hi!
Works fine now. Thanks!

best regards,
Itamar M. Lins Jr. 



From itamarlins at bol.com.br  Tue Sep  1 09:25:44 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Tue Sep  1 09:27:37 2009
Subject: [Harbour] TODO list
Message-ID: <h7j7fa$41c$1@ger.gmane.org>

Hi!

Have prevision for this?

Assign to: <nobody>
Detail...: Add support for virtual file handles and registering some
           meta handles so it will be possible to make:
              h := fopen( "gzip:/tmp/myarchive.gz", FO_WRITE )
              fwrite( h, cData )
              fclose( h )
           or:
              h := fopen( "tcp:some.host:port", FO_WRITE )
              ...
           or:
              h := fopen( "|lpr -PLaserJet", FO_WRITE )
              ...
           or:
              h := fopen( "gunzip /tmp/myarchive.gz|", FO_READ )
              ...
           etc.
Status...: Open.

best regards,
Itamar M. Lins Jr. 



From itamarlins at bol.com.br  Tue Sep  1 09:47:09 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Tue Sep  1 09:49:05 2009
Subject: [Harbour] Re: TODO list
References: <h7j7fa$41c$1@ger.gmane.org>
Message-ID: <h7j8nh$8d6$1@ger.gmane.org>

For us user's of LetoDB we:

      LETO_FILE( cFileName )
      LETO_FERASE( cFileName )
      LETO_FRENAME( cFileName, cFileNewName )
      LETO_FERROR()
I need this:
port:='2815'
oPath := 'c:\'
nPath := 'c:\test\'
 FILECOPY(localhost:port\oPath+cFile,localhost:port\nPath+cFile)

Maybe LETO_FILECOPY...
But, lot time off  LetoDb update and difficult email exchange with dev list.

best regards,
Itamar M. Lins Jr. 



From gvarona at ec-red.com  Tue Sep  1 09:59:30 2009
From: gvarona at ec-red.com (=?UTF-8?B?R3VpbGxlcm1vIFZhcm9uYSBTaWx1cMO6?=)
Date: Tue Sep  1 09:56:50 2009
Subject: [Harbour] Cannot start server
In-Reply-To: <4A9D1A9F.80606@ec-red.com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
	<4A9D1A9F.80606@ec-red.com>
Message-ID: <4A9D28C2.20805@ec-red.com>


Ok. reading all post, now work fine

Best Regards
GVS

Guillermo Varona Silup? escribi?:
> druzus@users.sourceforge.net escribi?:
>> . . .
>>       To create NETIO server is enough to compile and link with MT HVM
>>       this code:
>>   
> ***********server.prg
>>          proc main()
>>             local pListenSocket
>>
>>             pListenSocket := netio_mtserver()
>>             if empty( pListenSocket )
>>                ? "Cannot start server."
>>             else
>>                wait "Press any key to stop NETIO server."
>>                netio_serverstop( pListenSocket )
>>                pListenSocket := NIL
>>             endif
>>          return
>>   
> ***********-> server.prg
>
> Env: WinXP Pro SP3 + Harbour +MinGW
>
> Hi, I'm testing star server, but get this:
>
> Cannot start server.
>
> I'm using this HBP
> #
> # $Id: uhttpd2.hbp 11370 2009-06-15 18:22:09Z vszakats $
> #
>
> server.prg
> -lhbnetio
> -mt
> -lhbvmmt.a
>
> Any TIP?
>
> TIA
>
> Best Regards
> GVS
>
>
> P.D.: Sorry for me bad english
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>

From bruno.luciani at gmail.com  Tue Sep  1 10:07:36 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Tue Sep  1 10:07:43 2009
Subject: [Harbour] ViaNemo: New Framework Opensource for Harbour
In-Reply-To: <008f01ca2ad6$e3c84000$ab58c000$@com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
	<25233147.post@talk.nabble.com>
	<20090901072102.GB21984@uran.home.aster.pl>
	<008f01ca2ad6$e3c84000$ab58c000$@com>
Message-ID: <133778360909010707i30d093f6ke0fc5878c11dfa5@mail.gmail.com>

where can I download to test It

Bruno

2009/9/1 Fernando Mancera <fmancera@viaopen.com>

> Dear all,
>
> I am pleased to inform that we do have a first developed functional version
> of ViaNemo,
> our OPENSOURCE suggestion of Framework for Harbour.
>
> It has interesting features as developed  applications on Windows
> 32bits/64bits and also Windows Mobile.
> Its adapted design will permit us in near future to pass to other operating
> systems such as Mac OSX or Linux.
>
> Possibility to compile applications written for other GUI?s in order users
> can reuse all applications.
> At the moment we have started with FiveWin compatibility for being the most
> popular one.
>
> We have published this piece of news on our blog http://blog.viaopen.com
>
> We have not decided how to provide it yet, but I think that according to
> its features,
> it would be very interesting for community to add it as Harbour-project
> contribution.
> My questions are ?What do you think about it??; ?Would it be possible to
> get authorization to add it??
>
> Thank you,
> Best regards
>
> Fernando Mancera
> www.viaopen.com
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090901/b6a82348/attachment.html
From fmancera at viaopen.com  Tue Sep  1 10:16:22 2009
From: fmancera at viaopen.com (Fernando Mancera)
Date: Tue Sep  1 10:15:50 2009
Subject: [Harbour] ViaNemo: New Framework Opensource for Harbour
In-Reply-To: <133778360909010707i30d093f6ke0fc5878c11dfa5@mail.gmail.com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>	<25233147.post@talk.nabble.com>	<20090901072102.GB21984@uran.home.aster.pl>	<008f01ca2ad6$e3c84000$ab58c000$@com>
	<133778360909010707i30d093f6ke0fc5878c11dfa5@mail.gmail.com>
Message-ID: <000601ca2b0e$c9d7a590$5d86f0b0$@com>

Hello Bruno,

 

How you can read on  <http://blog.viaopen.com> http://blog.viaopen.com 
?We have not decided date and way of publishing yet but will soon provide
this information.?

Best Regards,

 

Fernando

 

De: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] En nombre de Bruno Luciani
Enviado el: martes, 01 de septiembre de 2009 16:08
Para: Harbour Project Main Developer List.
Asunto: Re: [Harbour] ViaNemo: New Framework Opensource for Harbour

 

where can I download to test It 

Bruno

2009/9/1 Fernando Mancera <fmancera@viaopen.com>

Dear all,

I am pleased to inform that we do have a first developed functional version
of ViaNemo,
our OPENSOURCE suggestion of Framework for Harbour.

It has interesting features as developed  applications on Windows
32bits/64bits and also Windows Mobile.
Its adapted design will permit us in near future to pass to other operating
systems such as Mac OSX or Linux.

Possibility to compile applications written for other GUI?s in order users
can reuse all applications.
At the moment we have started with FiveWin compatibility for being the most
popular one.

We have published this piece of news on our blog http://blog.viaopen.com

We have not decided how to provide it yet, but I think that according to its
features,
it would be very interesting for community to add it as Harbour-project
contribution.
My questions are ?What do you think about it??; ?Would it be possible to get
authorization to add it??

Thank you,
Best regards

Fernando Mancera
www.viaopen.com


_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090901/a22e544c/attachment.html
From druzus at acn.waw.pl  Tue Sep  1 10:16:44 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  1 10:16:53 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12374] trunk/harbour
In-Reply-To: <E1MhurZ-0000A4-RB@74yxhf1.ch3.sourceforge.com>
References: <E1MhurZ-0000A4-RB@74yxhf1.ch3.sourceforge.com>
Message-ID: <20090901141643.GA13532@uran.home.aster.pl>

On Mon, 31 Aug 2009, vouchcac@users.sourceforge.net wrote:

Hi Pritpal,

> 2009-08-30 17:30 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>   * contrib/hbqt/hbqt_slots.cpp
>     ! Completely reworked events management. It now supports multi-threads.
>   * contrib/hbxbp/xbpbrowse.prg
>   * contrib/hbxbp/xbpdialog.prg
>   * contrib/hbxbp/xbpgeneric.prg
>     ! Reworked event management to support multi threads.
>   * contrib/hbxbp/tests/demoxbp.prg
>     ! Demonstrated the MT support. Click on <Dialogs> on main menu and play
>       with more than one dialog.
>   /*  Still there are few glitches in MT mode and I do request Przemek to 
>       look into the code and suggest us what else is required. 
>    */

In next week I'll try to install new Linux host with the QT4.5 or newer
so I can make real life tests with HBQT library. BTW you are making
really amazing job.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep  1 10:30:17 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  1 10:30:25 2009
Subject: [Harbour] Testing HBNETIO
In-Reply-To: <1251809800049-3560323.post@n2.nabble.com>
References: <4A9CD721.6040200@gmail.com> <25236180.post@talk.nabble.com>
	<20090901084544.GB21702@uran.home.aster.pl>
	<3sGiZiEc.1251796669.8210590.marcobra@82.105.36.210>
	<20090901100300.GA30366@uran.home.aster.pl>
	<1251809800049-3560323.post@n2.nabble.com>
Message-ID: <20090901143017.GB13532@uran.home.aster.pl>

On Tue, 01 Sep 2009, AbeB wrote:

Hi,

> Works Great!
> can it be made to support names like net:hostname:port:filename instead of
> ip address?

It can be done if you need it. It's enough to call hb_socketResolveAddr()
but remember that in such case you will need fully functional DNS service.

> also in my test the NETIO_CONNECT():  returns .F., but it works!
> NETIO_CONNECT(): .F.

Have you passed your server IP address and port as NETIO_CONNECT()
parameters?
If not then it only registers "net:" file IO API returning false
and server address and port has to be given in file name.
If you initialize valid server address and port using NETIO_CONNECT(),
i.e.
   ? "NETIO_CONNECT()", NETIO_CONNECT( "192.168.0.1", 2941 )
then later you can simply use:
   use net:path/filename
without server address and port.

best regards,
Przemek
From druzus at users.sourceforge.net  Tue Sep  1 10:44:15 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue Sep  1 10:44:22 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12387] trunk/harbour
Message-ID: <E1MiUal-0003xJ-Sj@bj8yhf1.ch3.sourceforge.com>

Revision: 12387
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12387&view=rev
Author:   druzus
Date:     2009-09-01 14:44:14 +0000 (Tue, 01 Sep 2009)

Log Message:
-----------
2009-09-01 16:43 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcomp.h
  * harbour/include/hbcompdf.h
  * harbour/source/compiler/hbmain.c
  * harbour/source/compiler/genc.c
  * harbour/source/compiler/genhrb.c
    % removed FUNCALLS internal structures and functions.
      It simplifies compiler code, reduce memory usage and
      increase performance due to eliminating unnecessary
      structures which were update and scanned in previous.
      Now we have all necessary information in symbol table.

  * harbour/contrib/hbnetio/netiocli.c
    + added support for DNS addresses

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbnetio/netiocli.c
    trunk/harbour/include/hbcomp.h
    trunk/harbour/include/hbcompdf.h
    trunk/harbour/source/compiler/genc.c
    trunk/harbour/source/compiler/genhrb.c
    trunk/harbour/source/compiler/hbmain.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From mhsabado at gmail.com  Tue Sep  1 10:48:47 2009
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Tue Sep  1 10:49:00 2009
Subject: [Harbour] HBNETIO Windows Drive Letter Support
In-Reply-To: <4a9d26fb.a815f10a.75f4.ffff96deSMTPIN_ADDED@mx.google.com>
References: <4a9d26fb.a815f10a.75f4.ffff96deSMTPIN_ADDED@mx.google.com>
Message-ID: <4A9D344F.1030709@gmail.com>


Hi Przemek,

Is it possible to have drive letter support for Windows OS when 
specifying database file?  The root of data starts from where the 
program was executed, is this correct?  What if the hierarchy of the 
data directory is higher than where the program is executed or in the 
other directory or drive (in case of Windows)?

Thank you for any clarification.

Best regards,
Mario
From druzus at acn.waw.pl  Tue Sep  1 11:18:09 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  1 11:18:15 2009
Subject: [Harbour] HBNETIO Windows Drive Letter Support
In-Reply-To: <4A9D344F.1030709@gmail.com>
References: <4a9d26fb.a815f10a.75f4.ffff96deSMTPIN_ADDED@mx.google.com>
	<4A9D344F.1030709@gmail.com>
Message-ID: <20090901151809.GA24249@uran.home.aster.pl>

On Tue, 01 Sep 2009, Mario H. Sabado wrote:

Hi,

> Is it possible to have drive letter support for Windows OS when specifying 
> database file?  The root of data starts from where the program was 
> executed, is this correct?

Yes, it is intentional protection. Otherwise somoone can easy write
program to remove all files from your hard disk.
You can control default file location using 3-rd parameter in
NETIO_LISTEN() function, see the ChangeLog:

   NETIO_LISTEN( [<nPort>], [<cAddress>], [<cRootDir>] )
                                          -> <pListenSocket> | NIL

If you pass empty string "" as <cRootDir> then you will fully disable
the protection. Do it for your own risk.
Default value for <cRootDir> is the localization of server binaries.

> What if the hierarchy of the data directory is 
> higher than where the program is executed or in the other directory or 
> drive (in case of Windows)?

NETIO server control given paths and does not allow to create any file
outside root directory. It also controls ".." usage in paths so it cannot
be used as workaround for protection but they can be used only to the
level of root directory, i.e. cRootDir:="/var/data" and you can access
file /var/data/myfs1/../myfs2/mytable using "myfs1/../myfs2/mytable"
as file name of course if above directories exists but it's illegal
to use "../somedir/somefile".
If filesystem support soft or hard links then they can be used
to break this protection anyhow for this it's necessary to have
direct access to shared paths because NETIO server does not allow
to create any links remotely.

best regards,
Przemek
From elart at elart.it  Tue Sep  1 11:18:17 2009
From: elart at elart.it (elart)
Date: Tue Sep  1 11:18:25 2009
Subject: [Harbour] Help on error using compiling Harbour with
	minGWunderUbuntu 9.04
In-Reply-To: <WBuGlMzH.1251807790.7137340.marcobra@82.105.36.210>
Message-ID: <EY5ijTo1.1251818297.8903950.marcobra@82.105.36.210>


>>On Tue, 01 Sep 2009, elart wrote:
>>> I'm trying to cross compile Harbour using minGW on a Ubuntu 9.04 32 bit
>>> Linux box
>>> when i run...
>>> make HB_PLATFORM=win
>>> i get this...
>>> /usr/bin/i586-mingw32msvc-gccgcc not exixtent compiler string
>>
>>Please try after:
>>
>>2009-09-01 14:02 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>>  * harbour/config/global.mk
>>    ! fixed MinGW prefix detection in some cross installations, i.e.
>>      Debian ones.
>>
>>best regards,
>>Przemek
>>
>
>Fixed, many thanks and best regards to all.
>
>But now i get...
>
>/usr/bin/i586-mingw32msvc-ar   crs
>.../../../../../lib/win/mingw/liblibpng.a png.o pngerror.o pnggccrd.o
>pngget.o pngmem.o pngpread.o pngread.o pngrio.o pngrtran.o pngrutil.o
>pngset.o pngtrans.o pngvcrd.o pngwio.o pngwrite.o pngwtran.o pngwutil.o
>|| rm -f ../../../../../lib/win/mingw/liblibpng.a
>/usr/bin/i586-mingw32msvc-gcc  -I. -I../../../../../include  -O3
>-fomit-frame-pointer -march=i586 -mtune=pentiumpro   -osqlite3.o -c
>.../../../sqlite3.c
>.../../../sqlite3.c: In function ?sqlite3BtreeFactory?:
>.../../../sqlite3.c:92183: warning: passing argument 2 of
>?sqlite3BtreeOpen? discards qualifiers from pointer target type
>/usr/bin/i586-mingw32msvc-ar   crs
>.../../../../../lib/win/mingw/libsqlite3.a sqlite3.o || rm -f
>.../../../../../lib/win/mingw/libsqlite3.a
>
>
>Marco

Now with This update


2009-09-01 16:43 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
* harbour/include/hbcomp.h
* harbour/include/hbcompdf.h
* harbour/source/compiler/hbmain.c
* harbour/source/compiler/genc.c
* harbour/source/compiler/genhrb.c
% removed FUNCALLS internal structures and functions.
It simplifies compiler code, reduce memory usage and
increase performance due to eliminating unnecessary
structures which were update and scanned in previous.
Now we have all necessary information in symbol table.

* harbour/contrib/hbnetio/netiocli.c
+ added support for DNS addresses


All seems working...

Many thanks

Marco
From ice at extreme.hu  Tue Sep  1 11:24:11 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Tue Sep  1 11:24:18 2009
Subject: [Harbour] rddsql/sddpg install problems
Message-ID: <alpine.GSO.2.00.0909011704300.17720@dawn.royalcomp.hu>


hi,

something's fishy with the rddsql install target. right now as far as 
i can tell, it only manifests itself on sunos (where /bin/sh isn't 
quite the brightest spark in town), and on the surface is 
shell-related, but the cause looks to be lying deeper therein.

do find the relevant piece of the install log below (i've slightly 
modified instsh.mk so it coughs up the actual fragments it is about to 
execute).

it seems as if INSTALL_RULE was assembled more than once, once with 
INSTALL_FILES set to libsddpg.a, but at the next iteration 
INSTALL_FILES was empty. afaict this second iteration must somehow be 
happening inside instsh.mk, as it is protected to be evaluated with an 
empty install_files list.

the problem (symptom, really) is that while bash (and ksh, and dash, 
and zsh, and anything i could get my hands on momentarily) treat the 
following fragment:

for i in ; do
	...
done

as a loop which should not be executed at all (as it has an empty list 
argument), whereas solaris' /bin/sh treats the empty list as an error.

i suspect that things go belly up upon entering contrib/, as at that 
point it looks as if the install rules (or at least some of them) 
were get evaluated twice, as in for example:

gmake[3]: `../../../../../lib/sunos/sunpro/libhbgt.a' is up to date.
! Installing ../../lib/sunos/sunpro/libhbgt.a on /tmp/hb/lib
gmake[3]: `../../../../../lib/sunos/sunpro/libhbmisc.a' is up to date.
! Installing ../../lib/sunos/sunpro/libhbmisc.a on /tmp/hb/lib
gmake[3]: `../../../../../lib/sunos/sunpro/libhbmzip.a' is up to date.
! Installing ../../lib/sunos/sunpro/libhbmzip.a on /tmp/hb/lib
! Installing ../../lib/sunos/sunpro/libhbmzip.a on /tmp/hb/lib
! Installing hbmzip.ch on /tmp/hb/include
gmake[3]: `../../../../../lib/sunos/sunpro/libhbnetio.a' is up to date.
! Installing ../../lib/sunos/sunpro/libhbnetio.a on /tmp/hb/lib
gmake[3]: `../../../../../lib/sunos/sunpro/libhbnf.a' is up to date.
! Installing ../../lib/sunos/sunpro/libhbnf.a on /tmp/hb/lib
! Installing ../../lib/sunos/sunpro/libhbnf.a on /tmp/hb/lib
! Installing ftmenuto.ch on /tmp/hb/include
! 'hbodbc' library skipped ('odbc' not found)
! 'hbsqlit3' library skipped ('sqlite3' not found)

this behaviour can be observed on linux too. notice that some items 
get installed twice, while some aren't.

this is the log fragment for the sddpg problem:

! 'sddmy' library skipped ('mysql' not found)
gmake[4]: `../../../../../../lib/sunos/sunpro/libsddpg.a' is up to date.
set -x; mkdir -p /tmp/hb/lib; if [ ! -d "/tmp/hb/lib" ]; then echo "! Can't install, path not found: '/tmp/hb/lib'" 1>&2; false; else for i in ../../../lib/sunos/sunpro/libsddpg.a; do if [ -r "$i" ]; then echo "! Installing $i on /tmp/hb/lib"; cp -f $i /tmp/hb/lib; true; else echo "! Can't install $i, not found" 1>&2; fi done fi
+ mkdir -p /tmp/hb/lib 
+ [ ! -d /tmp/hb/lib ] 
+ [ -r ../../../lib/sunos/sunpro/libsddpg.a ] 
+ echo ! Installing ../../../lib/sunos/sunpro/libsddpg.a on /tmp/hb/lib 
! Installing ../../../lib/sunos/sunpro/libsddpg.a on /tmp/hb/lib
+ cp -f ../../../lib/sunos/sunpro/libsddpg.a /tmp/hb/lib 
+ true 
set -x; mkdir -p /tmp/hb/lib; if [ ! -d "/tmp/hb/lib" ]; then echo "! Can't install, path not found: '/tmp/hb/lib'" 1>&2; false; else for i in ../../../lib/sunos/sunpro/libsddpg.a; do if [ -r "$i" ]; then echo "! Installing $i on /tmp/hb/lib"; cp -f $i /tmp/hb/lib; true; else echo "! Can't install $i, not found" 1>&2; fi done fi
+ mkdir -p /tmp/hb/lib 
+ [ ! -d /tmp/hb/lib ] 
+ [ -r ../../../lib/sunos/sunpro/libsddpg.a ] 
+ echo ! Installing ../../../lib/sunos/sunpro/libsddpg.a on /tmp/hb/lib 
! Installing ../../../lib/sunos/sunpro/libsddpg.a on /tmp/hb/lib
+ cp -f ../../../lib/sunos/sunpro/libsddpg.a /tmp/hb/lib 
+ true 
set -x; mkdir -p /tmp/hb/include; if [ ! -d "/tmp/hb/include" ]; then echo "! Can't install, path not found: '/tmp/hb/include'" 1>&2; false; else for i in   ; do if [ -r "$i" ]; then echo "! Installing $i on /tmp/hb/include"; cp -f $i /tmp/hb/include; true; else echo "! Can't install $i, not found" 1>&2; fi done fi
/bin/sh: syntax error at line 1: `;' unexpected
gmake[3]: *** [install] Error 2
gmake[2]: *** [sddpg.inst] Error 2
gmake[1]: *** [rddsql.inst] Error 2
make: *** [contrib.inst] Error 2


-- 
[-]

mkdir /nonexistent
From bedipritpal at hotmail.com  Tue Sep  1 11:33:27 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Sep  1 11:33:34 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12374] trunk/harbour
In-Reply-To: <20090901141643.GA13532@uran.home.aster.pl>
References: <E1MhurZ-0000A4-RB@74yxhf1.ch3.sourceforge.com>
	<20090901141643.GA13532@uran.home.aster.pl>
Message-ID: <25242532.post@talk.nabble.com>


Hi


Przemyslaw Czerpak-2 wrote:
> 
> In next week I'll try to install new Linux host with the QT4.5 or newer
> so I can make real life tests with HBQT library. 
> 

I am waiting so long for this moment to happen!



> BTW you are making really amazing job.
> 

Thanks a lot.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-12374--trunk-harbour-tp25217031p25242532.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From elart at elart.it  Tue Sep  1 11:42:07 2009
From: elart at elart.it (elart)
Date: Tue Sep  1 11:42:16 2009
Subject: [Harbour] Help on error using compiling Harbour
	withminGWunderUbuntu 9.04
In-Reply-To: <EY5ijTo1.1251818297.8903950.marcobra@82.105.36.210>
Message-ID: <4lsWjrkF.1251819727.1117820.marcobra@82.105.36.210>


In data 1/9/2009, "elart" <elart@elart.it> ha scritto:

>
>>>On Tue, 01 Sep 2009, elart wrote:
>>>> I'm trying to cross compile Harbour using minGW on a Ubuntu 9.04 32 bit
>>>> Linux box
>>>> when i run...
>>>> make HB_PLATFORM=win
>>>> i get this...
>>>> /usr/bin/i586-mingw32msvc-gccgcc not exixtent compiler string
>>>
>>>Please try after:
>>>
>>>2009-09-01 14:02 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>>>  * harbour/config/global.mk
>>>    ! fixed MinGW prefix detection in some cross installations, i.e.
>>>      Debian ones.
>>>
>>>best regards,
>>>Przemek
>>>
>>
>>Fixed, many thanks and best regards to all.
>>
>>But now i get...
>>
>>/usr/bin/i586-mingw32msvc-ar   crs
>>.../../../../../lib/win/mingw/liblibpng.a png.o pngerror.o pnggccrd.o
>>pngget.o pngmem.o pngpread.o pngread.o pngrio.o pngrtran.o pngrutil.o
>>pngset.o pngtrans.o pngvcrd.o pngwio.o pngwrite.o pngwtran.o pngwutil.o
>>|| rm -f ../../../../../lib/win/mingw/liblibpng.a
>>/usr/bin/i586-mingw32msvc-gcc  -I. -I../../../../../include  -O3
>>-fomit-frame-pointer -march=i586 -mtune=pentiumpro   -osqlite3.o -c
>>.../../../sqlite3.c
>>.../../../sqlite3.c: In function ?sqlite3BtreeFactory?:
>>.../../../sqlite3.c:92183: warning: passing argument 2 of
>>?sqlite3BtreeOpen? discards qualifiers from pointer target type
>>/usr/bin/i586-mingw32msvc-ar   crs
>>.../../../../../lib/win/mingw/libsqlite3.a sqlite3.o || rm -f
>>.../../../../../lib/win/mingw/libsqlite3.a
>>
>>
>>Marco
>
>Now with This update
>
>
>2009-09-01 16:43 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>* harbour/include/hbcomp.h
>* harbour/include/hbcompdf.h
>* harbour/source/compiler/hbmain.c
>* harbour/source/compiler/genc.c
>* harbour/source/compiler/genhrb.c
>% removed FUNCALLS internal structures and functions.
>It simplifies compiler code, reduce memory usage and
>increase performance due to eliminating unnecessary
>structures which were update and scanned in previous.
>Now we have all necessary information in symbol table.
>
>* harbour/contrib/hbnetio/netiocli.c
>+ added support for DNS addresses
>
>
>All seems working...
>
>Many thanks
>
>Marco
>_______________________________________________
>Harbour mailing list
>Harbour@harbour-project.org
>http://lists.harbour-project.org/mailman/listinfo/harbour
>

Previous message is wrong...

NOT work still this error related to sqlite3

/usr/bin/i586-mingw32msvc-ar   crs
../../../../../lib/win/mingw/liblibpng.a png.o pngerror.o pnggccrd.o
pngget.o pngmem.o pngpread.o pngread.o pngrio.o pngrtran.o pngrutil.o
pngset.o pngtrans.o pngvcrd.o pngwio.o pngwrite.o pngwtran.o pngwutil.o
|| rm -f ../../../../../lib/win/mingw/liblibpng.a
/usr/bin/i586-mingw32msvc-gcc  -I. -I../../../../../include  -O3
-fomit-frame-pointer -march=i586 -mtune=pentiumpro   -osqlite3.o -c
../../../sqlite3.c
../../../sqlite3.c: In function ?sqlite3BtreeFactory?:
../../../sqlite3.c:92183: warning: passing argument 2 of
?sqlite3BtreeOpen? discards qualifiers from pointer target type
/usr/bin/i586-mingw32msvc-ar   crs
../../../../../lib/win/mingw/libsqlite3.a sqlite3.o || rm -f
../../../../../lib/win/mingw/libsqlite3.a

Thank you
From dbtopas at dbtopas.lt  Tue Sep  1 12:08:19 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Sep  1 12:09:55 2009
Subject: [Harbour] OLE
Message-ID: <4A9D46F3.7010106@dbtopas.lt>

Hi,


> I have problems with OLE and variables by reference, exemple:
> 
> ---cut---
> oOle = Win_OleCreateObject( "NFe_Util_PL005a.Util" )
> cName = ""
> cMess = ""
> oOle:PegaNomeCertificado( @cName, @cMess )
> ? cName,cMess
> ---cut---

I have not implemented references in OLE because of a simple reason: I
was not able to find any sample to test my code. I see Przemek added
this missing code. Thanks!


> Yes that's right, thanks. Do you think it could be moved to core? 
> I don't use WVG, but HWGUI. The implementation by Mindaugus and 
> further work by Viktor and Przemyslaw look very clean and I 
> would prefer to use it than the ActiveX implementation in HWGUI, 
> but without the support for different events I cannot. 
...
> Let me ask differently, we have :
> FUNC WIN_AxGetControl( hWnd, bHandler )
> What form is bHandler?
> Is there some kind of default event?
> If it handles one thing, can't it handle several? 

I guess current implementation is enough. bHandler receives event
type/number as a first parameter. I do not remember if I used copy
pasted event log for my test code:
    WIN_AxInit()
    hWndAx := CreateWindow("ATLAXWin", "http://sf.net", ...
    oAx := WIN_AxGetControl( hWndAx, @SomeEventLogFunc() )

I used a simple logging function:
STATIC FUNC SomeEventLogFunc(...)
LOCAL aParam := {...}
   AEVAL( aParam, {|X,Y| IF(VALTYPE(X)=="O", aParam[Y] := "O:" +
X:ClassName, NIL)}) // Avoid HB_VALTOEXP() crash
   ? HB_VALTOEXP(aParam)
RETURN

Log was:
{105, 2, .T.}
{105, 1, .F.}
{105, -1, .F.}
{102, "Finding site: www.delfi.lt"}
{108, 100, 10000}
{102, "Connecting to site 81.16.232.110"}
{102, "Web site found. Waiting for reply..."}
{108, 100, 10000}
{102, "Start downloading from site: http://www.delfi.lt/"}
{270, .T., NIL}
...

The first number is event number, but I really do not know the meaning
of it. I have a feeling that passing event number as a parameter to
handler is traditional and acceptable in windows. Just like in windows
message handlers:
   LRESULT WndProc( HWND hWnd, UINT nMsg, WPARAM wParam, LPARAM lParam )

I see additional Przemek's code that distributes events into different
event handlers. I hope it help for those who do not like to write:
   IF nMsg == SOME_EVENT
     ...
   ELSE nMsg == ANOTHER_EVENT
     ...

> Release() method makes something strange for me. Mindaugas?
> To implement such functionality it's necessary to change
> the method of iSink allocation. It has to be allocated by
> hb_xgrab() and then we should only allocate holder for
> iSink pointer using hb_gcAlloc(). The only one reason this
> code was working without GPF traps is this line:
>    pSink->count = 2; /* 1 for pCP->Advice() param and 1 for Harbour
>                         collectible pointer [Mindaugas] */
> which effectively blocks executing hb_xfree() due to initialization
> with 2 instead of 1. BTW I do not understand above comment. For me
> it should be 1 and other code fixed.

I was somehow fixed on idea about using collectible pointer to store 
ISink. This way I've got into trouble of recursive GC block references 
described on: 
http://lists.harbour-project.org/pipermail/harbour/2009-June/020569.html
I had to initialize counter to 2, to avoid premature ISink release. GC 
mark function was required to solve the problem. Thanks, for easy 
solution of the problem.


Regards,
Mindaugas

From druzus at acn.waw.pl  Tue Sep  1 12:27:02 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  1 12:27:10 2009
Subject: [Harbour] Help on error using compiling Harbour
	withminGWunderUbuntu 9.04
In-Reply-To: <4lsWjrkF.1251819727.1117820.marcobra@82.105.36.210>
References: <EY5ijTo1.1251818297.8903950.marcobra@82.105.36.210>
	<4lsWjrkF.1251819727.1117820.marcobra@82.105.36.210>
Message-ID: <20090901162702.GA21880@uran.home.aster.pl>

On Tue, 01 Sep 2009, elart wrote:

Hi,

> Previous message is wrong...
> NOT work still this error related to sqlite3
> /usr/bin/i586-mingw32msvc-ar   crs
> ../../../../../lib/win/mingw/liblibpng.a png.o pngerror.o pnggccrd.o
> pngget.o pngmem.o pngpread.o pngread.o pngrio.o pngrtran.o pngrutil.o
> pngset.o pngtrans.o pngvcrd.o pngwio.o pngwrite.o pngwtran.o pngwutil.o
> || rm -f ../../../../../lib/win/mingw/liblibpng.a
> /usr/bin/i586-mingw32msvc-gcc  -I. -I../../../../../include  -O3
> -fomit-frame-pointer -march=i586 -mtune=pentiumpro   -osqlite3.o -c
> ../../../sqlite3.c
> ../../../sqlite3.c: In function ?sqlite3BtreeFactory?:
> ../../../sqlite3.c:92183: warning: passing argument 2 of
> ?sqlite3BtreeOpen? discards qualifiers from pointer target type
> /usr/bin/i586-mingw32msvc-ar   crs
> ../../../../../lib/win/mingw/libsqlite3.a sqlite3.o || rm -f
> ../../../../../lib/win/mingw/libsqlite3.a

This is not error message but warning only and you
can safely ignore it.
I do not see any errors.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Tue Sep  1 12:46:55 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep  1 12:47:01 2009
Subject: [Harbour] Shared lib issue after svn rsync
Message-ID: <9257026e0909010946s2d70869di293da8537ca21f73@mail.gmail.com>

I've just resync my local repo after vacation and I've found that in
hb-func.sh the lines below are commented:

#   echo "Making ${full_lib_name}..."
#   ${hb_mkdyn} ${full_lib_name} ${LIBS} ${linker_options}
#   if [ "${LIBS}" != "${LIBSMT}" ]; then
#       echo "Making ${full_lib_name_mt}..."
#       ${hb_mkdyn} ${full_lib_name_mt} ${LIBSMT} ${linker_mtoptions}
${linker_options}
#   fi

I've read in the Changelog that:
...
  * bin/hb-func.sh
    - Commented creation of dynamic libs. Now it's done on GNU Make
      level.

But now I can't find a way to add contrib libs to libharbour.so.

Any suggestion?

best regards,
Lorenzo
From qiinfo at ig.com.br  Tue Sep  1 13:48:01 2009
From: qiinfo at ig.com.br (Rossine)
Date: Tue Sep  1 13:48:06 2009
Subject: [Harbour] ViaNemo: New Framework Opensource for Harbour
In-Reply-To: <000601ca2b0e$c9d7a590$5d86f0b0$@com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
	<25233147.post@talk.nabble.com>
	<20090901072102.GB21984@uran.home.aster.pl>
	<008f01ca2ad6$e3c84000$ab58c000$@com>
	<133778360909010707i30d093f6ke0fc5878c11dfa5@mail.gmail.com>
	<000601ca2b0e$c9d7a590$5d86f0b0$@com>
Message-ID: <25244059.post@talk.nabble.com>


Hello Fernando,

Is possible to have compatibility with MiniGUI extended also ?
-- 
View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-12382--trunk-harbour-tp25231702p25244059.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Tue Sep  1 13:49:54 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  1 13:50:00 2009
Subject: [Harbour] rddsql/sddpg install problems
In-Reply-To: <alpine.GSO.2.00.0909011704300.17720@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909011704300.17720@dawn.royalcomp.hu>
Message-ID: <20090901174954.GA17742@uran.home.aster.pl>

On Tue, 01 Sep 2009, Tamas TEVESZ wrote:

Hi,

> something's fishy with the rddsql install target. right now as far as 
> i can tell, it only manifests itself on sunos (where /bin/sh isn't 
> quite the brightest spark in town), and on the surface is 
> shell-related, but the cause looks to be lying deeper therein.
> do find the relevant piece of the install log below (i've slightly 
> modified instsh.mk so it coughs up the actual fragments it is about to 
> execute).
> it seems as if INSTALL_RULE was assembled more than once, once with 
> INSTALL_FILES set to libsddpg.a, but at the next iteration 
> INSTALL_FILES was empty. afaict this second iteration must somehow be 
> happening inside instsh.mk, as it is protected to be evaluated with an 
> empty install_files list.

Yes, it's a known problem caused by hack used to install header files
with libraries or binaries, i.e.:

   INSTALL_RULE_HEADERS := $(INSTALL_RULE)
   install::
   	$(INSTALL_RULE_HEADERS)

Such code in Makefiles is a workaround for INSTALL_RULE designed for
single action. In the past I added yet another hack as workaround for
it. It's used in source/pp/Makefile, see HB_INSTALL_DEF.
The problem in SQLRDDs is caused by including:
   include $(TOP)$(ROOT)config/header.mk
without any PRG_HEADERS, C_HEADER and API_HEADERS and it's enough
to remove above line.
But for final version it should be fully redesigned and we should
add support for multiple install goals: binaries, libraries and
header files.

best regards,
Przemek
From druzus at users.sourceforge.net  Tue Sep  1 15:06:01 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue Sep  1 15:06:09 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12388] trunk/harbour
Message-ID: <E1MiYg5-000755-6z@dn4whf1.ch3.sourceforge.com>

Revision: 12388
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12388&view=rev
Author:   druzus
Date:     2009-09-01 19:05:19 +0000 (Tue, 01 Sep 2009)

Log Message:
-----------
2009-09-01 21:00 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/lib.mk
  * harbour/config/bin.mk
  * harbour/config/header.mk
  * harbour/config/dyn.mk
  * harbour/config/doc.mk
  * harbour/config/instsh.mk
    ! rewritten install rules so now they work without any problem when
      more then one target .mk file is included, i.e. lib.mk and header.mk

  * harbour/source/pp/Makefile
  * harbour/source/dynlib/mt/Makefile
  * harbour/source/dynlib/Makefile
  * harbour/contrib/hbmysql/Makefile
  * harbour/contrib/hbct/Makefile
  * harbour/contrib/xhb/Makefile
  * harbour/contrib/hbodbc/Makefile
  * harbour/contrib/hbtpathy/Makefile
  * harbour/contrib/hbsqlit3/Makefile
  * harbour/contrib/hbmzip/Makefile
  * harbour/contrib/hbblat/Makefile
  * harbour/contrib/hbqt/Makefile
  * harbour/contrib/hbxbp/Makefile
  * harbour/contrib/xpp/Makefile
  * harbour/contrib/hbnf/Makefile
  * harbour/contrib/hbcurl/Makefile
  * harbour/contrib/gtqtc/Makefile
  * harbour/contrib/rddsql/sddmy/Makefile
  * harbour/contrib/rddsql/sddpg/Makefile
  * harbour/contrib/rddsql/sddfb/Makefile
  * harbour/contrib/rddsql/sddodbc/Makefile
  * harbour/contrib/hbhpdf/Makefile
  * harbour/contrib/rddado/Makefile
  * harbour/contrib/gtwvg/Makefile
  * harbour/contrib/hbpgsql/Makefile
  * harbour/contrib/hbclipsm/Makefile
  * harbour/contrib/rddads/Makefile
  * harbour/contrib/hbfimage/Makefile
  * harbour/contrib/hbgd/Makefile
  * harbour/contrib/hbtip/Makefile
  * harbour/contrib/hbwin/Makefile
  * harbour/contrib/hbvpdf/Makefile
  * harbour/contrib/hbbtree/Makefile
  * harbour/contrib/hbssl/Makefile
  * harbour/external/libhpdf/Makefile
    * removed not longer necessary workaround for overwritten by different
      targets INSTALL_RULE
      Possible TODO: clean up some other rules in config .mk files to remove
      hacks from pp and dynlib Makefile(s).

   Above modifications should fully resolve the problems with repeated
   install actions and also build problems with some more restrictive
   POSIX SHELLs.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/bin.mk
    trunk/harbour/config/doc.mk
    trunk/harbour/config/dyn.mk
    trunk/harbour/config/header.mk
    trunk/harbour/config/instsh.mk
    trunk/harbour/config/lib.mk
    trunk/harbour/contrib/gtqtc/Makefile
    trunk/harbour/contrib/gtwvg/Makefile
    trunk/harbour/contrib/hbblat/Makefile
    trunk/harbour/contrib/hbbtree/Makefile
    trunk/harbour/contrib/hbclipsm/Makefile
    trunk/harbour/contrib/hbct/Makefile
    trunk/harbour/contrib/hbcurl/Makefile
    trunk/harbour/contrib/hbfimage/Makefile
    trunk/harbour/contrib/hbgd/Makefile
    trunk/harbour/contrib/hbhpdf/Makefile
    trunk/harbour/contrib/hbmysql/Makefile
    trunk/harbour/contrib/hbmzip/Makefile
    trunk/harbour/contrib/hbnf/Makefile
    trunk/harbour/contrib/hbodbc/Makefile
    trunk/harbour/contrib/hbpgsql/Makefile
    trunk/harbour/contrib/hbqt/Makefile
    trunk/harbour/contrib/hbsqlit3/Makefile
    trunk/harbour/contrib/hbssl/Makefile
    trunk/harbour/contrib/hbtip/Makefile
    trunk/harbour/contrib/hbtpathy/Makefile
    trunk/harbour/contrib/hbvpdf/Makefile
    trunk/harbour/contrib/hbwin/Makefile
    trunk/harbour/contrib/hbxbp/Makefile
    trunk/harbour/contrib/rddado/Makefile
    trunk/harbour/contrib/rddads/Makefile
    trunk/harbour/contrib/rddsql/sddfb/Makefile
    trunk/harbour/contrib/rddsql/sddmy/Makefile
    trunk/harbour/contrib/rddsql/sddodbc/Makefile
    trunk/harbour/contrib/rddsql/sddpg/Makefile
    trunk/harbour/contrib/xhb/Makefile
    trunk/harbour/contrib/xpp/Makefile
    trunk/harbour/external/libhpdf/Makefile
    trunk/harbour/source/dynlib/Makefile
    trunk/harbour/source/dynlib/mt/Makefile
    trunk/harbour/source/pp/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Tue Sep  1 15:08:47 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue Sep  1 15:08:53 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12389] trunk/harbour
Message-ID: <E1MiYil-00078m-Jl@dn4whf1.ch3.sourceforge.com>

Revision: 12389
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12389&view=rev
Author:   druzus
Date:     2009-09-01 19:08:45 +0000 (Tue, 01 Sep 2009)

Log Message:
-----------
2009-09-01 21:08 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/hbinet.c
    * return logical value from hb_socketInit() function.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rtl/hbinet.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From elart at elart.it  Tue Sep  1 15:55:10 2009
From: elart at elart.it (elart)
Date: Tue Sep  1 15:55:35 2009
Subject: [Harbour] Help on error using compiling
	Harbour	withminGWunderUbuntu 9.04
In-Reply-To: <20090901162702.GA21880@uran.home.aster.pl>
References: <EY5ijTo1.1251818297.8903950.marcobra@82.105.36.210>
	<4lsWjrkF.1251819727.1117820.marcobra@82.105.36.210>
	<20090901162702.GA21880@uran.home.aster.pl>
Message-ID: <4A9D7C1E.6010900@elart.it>

On 09/01/2009 06:27 PM, Przemyslaw Czerpak wrote:
> On Tue, 01 Sep 2009, elart wrote:
>
> Hi,
>
>> Previous message is wrong...
>> NOT work still this error related to sqlite3
>> /usr/bin/i586-mingw32msvc-ar   crs
>> ../../../../../lib/win/mingw/liblibpng.a png.o pngerror.o pnggccrd.o
>> pngget.o pngmem.o pngpread.o pngread.o pngrio.o pngrtran.o pngrutil.o
>> pngset.o pngtrans.o pngvcrd.o pngwio.o pngwrite.o pngwtran.o pngwutil.o
>> || rm -f ../../../../../lib/win/mingw/liblibpng.a
>> /usr/bin/i586-mingw32msvc-gcc  -I. -I../../../../../include  -O3
>> -fomit-frame-pointer -march=i586 -mtune=pentiumpro   -osqlite3.o -c
>> ../../../sqlite3.c
>> ../../../sqlite3.c: In function ?sqlite3BtreeFactory?:
>> ../../../sqlite3.c:92183: warning: passing argument 2 of
>> ?sqlite3BtreeOpen? discards qualifiers from pointer target type
>> /usr/bin/i586-mingw32msvc-ar   crs
>> ../../../../../lib/win/mingw/libsqlite3.a sqlite3.o || rm -f
>> ../../../../../lib/win/mingw/libsqlite3.a
>
> This is not error message but warning only and you
> can safely ignore it.
> I do not see any errors.
>
> best regards,
> Przemek

Hi Premzek

Thank you.

please give me some suggestion on the default install path for the 
cross-compiled Harbour to test and use in a good way.

Best regards,

Marco
From bedipritpal at hotmail.com  Tue Sep  1 16:10:00 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Sep  1 16:10:13 2009
Subject: [Harbour] HBNETIO - How I tested ...
Message-ID: <25244306.post@talk.nabble.com>


Hello All

For the deeper insight what you can use to 
create test environments...
10.0.40.111 is a symbolic name, use your own.

netserver.prg  
==========
0. Place netserver.exe on 10.0.40.111 in, say, mydata folder
1. Create a subfolder /data and stay in {mydata}
2. execute: {10.0.40.111/mydata/netserver.exe 63000 10.0.40.111 
3. Do not use 127.0.0.1 as it does not work : theoretically  it should.

proc main( cPort, cServer ) 
   local pListenSocket 

   if empty( cPort )
      cPort := '63000'
   endif
   if empty( cServer )
      cServer := '127.0.0.1'
   endif

   pListenSocket := netio_mtserver( val( cPort ), cServer ) 
   if empty( pListenSocket ) 
      ? "Cannot start server." 
   else 
      wait "Press any key to stop NETIO server." 
      netio_serverstop( pListenSocket ) 
      pListenSocket := NIL 
   endif 
   return 



netapplctn.prg   
===========
1. Stay anywhere you want on another terminal
2. execute:\>netappln.exe 10.0.40.111 63000


#define DBNAME    "net:data/_tst_"

request DBFCDX

proc main( cServer, cPort )
   local pSockSrv

   set exclusive off
   rddSetDefault( "DBFCDX" )

   if empty( cServer )
      cServer := '127.0.0.1'
   endif
   if empty( cPort )
      cPort := '63000'
   endif

   ?
   ? "NETIO_CONNECT():", cServer, int( val( cPort ) ), netio_connect(
cServer, int( val( cPort ) ) )
   ?

   createdb( DBNAME )
   testdb( DBNAME )
   wait

   return

proc createdb( cName )
   local n
if !dbExists( DBNAME )
   dbCreate( cName, {{"F1", "C", 20, 0},;
                     {"F2", "M",  4, 0},;
                     {"F3", "N", 10, 2},;
                     {"F4", "T",  8, 0}} )
   ? "create neterr:", neterr(), hb_osError()
   use (cName)
   ? "use neterr:", neterr(), hb_osError()
   while lastrec() < 100
      dbAppend()
      n := recno() - 1
      field->F1 := chr( n % 26 + asc( "A" ) ) + " " + time()
      field->F2 := field->F1
      field->F3 := n / 100
      field->F4 := hb_dateTime()
   enddo
   index on field->F1 tag T1
   index on field->F3 tag T3
   index on field->F4 tag T4
   close
   ?
else
   ? DBNAME, 'Already exists'
endif
return

proc testdb( cName )
   local i, j
   ?
   ? 'using:',time()
   use (cName)
   ? "used:", time(), used()
   ? "nterr:", neterr()
   ? "alias:", alias()
   ? "lastrec:", lastrec()
   ? "ordCount:", ordCount()
   for i:=1 to ordCount()
      ordSetFocus( i )
      ? i, "name:", ordName(), "key:", ordKey(), "keycount:", ordKeyCount()
   next
   ordSetFocus( 1 )
   dbgotop()
   while !eof()
      if ! field->F1 == field->F2
         ? "error at record:", recno()
         ? "  ! '" + field->F1 + "' == '" + field->F2 + "'"
      endif
      dbSkip()
   enddo
   i := row()
   j := col()
   dbgotop()

   ? 'locking:',time()
   ? 'locked:', rlock(), time()

   wait

   browse()
   setpos( i, j )
   close

   return


THE OBSERVATION
==============
1. USE command takes about 18 seconds to open a table
2. Once table is opened, data access is quiet fast - almost instant
3. Locks are very well synchonized.
4. Data population is instantly visible on other terminals.

10.0.40.111 is a Windows 2003 Server on our local network.
I could not test on some domain server which in fact be a real test.

Regards
Pritpal Bedi



-- 
View this message in context: http://www.nabble.com/HBNETIO---How-I-tested-...-tp25244306p25244306.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Tue Sep  1 16:48:17 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  1 16:48:24 2009
Subject: [Harbour] HBNETIO - How I tested ...
In-Reply-To: <25244306.post@talk.nabble.com>
References: <25244306.post@talk.nabble.com>
Message-ID: <20090901204817.GA17539@uran.home.aster.pl>

On Tue, 01 Sep 2009, Pritpal Bedi wrote:

Hi Pritpal,

Thank you very much for your tests.

> For the deeper insight what you can use to 
> create test environments...
> 10.0.40.111 is a symbolic name, use your own.
> netserver.prg  
> ==========
> 0. Place netserver.exe on 10.0.40.111 in, say, mydata folder
> 1. Create a subfolder /data and stay in {mydata}
> 2. execute: {10.0.40.111/mydata/netserver.exe 63000 10.0.40.111 
> 3. Do not use 127.0.0.1 as it does not work : theoretically  it should.
> proc main( cPort, cServer ) 
>    local pListenSocket 
> 
>    if empty( cPort )
>       cPort := '63000'
>    endif
>    if empty( cServer )
>       cServer := '127.0.0.1'
>    endif
>    pListenSocket := netio_mtserver( val( cPort ), cServer ) 
>    if empty( pListenSocket ) 
>       ? "Cannot start server." 
>    else 
>       wait "Press any key to stop NETIO server." 
>       netio_serverstop( pListenSocket ) 
>       pListenSocket := NIL 
>    endif 
>    return 

Passing inet address to netio_mtserver() is only to select interfaces.
If you do not want to block access from different networks simply pass
nothing or "0.0.0.0" which has the same effect.

> netapplctn.prg   
> ===========
> 1. Stay anywhere you want on another terminal
> 2. execute:\>netappln.exe 10.0.40.111 63000
> #define DBNAME    "net:data/_tst_"
> request DBFCDX
> 
> proc main( cServer, cPort )
>    local pSockSrv
> 
>    set exclusive off
>    rddSetDefault( "DBFCDX" )
> 
>    if empty( cServer )
>       cServer := '127.0.0.1'
>    endif
>    if empty( cPort )
>       cPort := '63000'
>    endif
> 
>    ?
>    ? "NETIO_CONNECT():", cServer, int( val( cPort ) ), netio_connect(
> cServer, int( val( cPort ) ) )
>    ?
> 
>    createdb( DBNAME )
>    testdb( DBNAME )
>    wait
> 
>    return
> 
> proc createdb( cName )
>    local n
> if !dbExists( DBNAME )
>    dbCreate( cName, {{"F1", "C", 20, 0},;
>                      {"F2", "M",  4, 0},;
>                      {"F3", "N", 10, 2},;
>                      {"F4", "T",  8, 0}} )
>    ? "create neterr:", neterr(), hb_osError()
>    use (cName)
>    ? "use neterr:", neterr(), hb_osError()
>    while lastrec() < 100
>       dbAppend()
>       n := recno() - 1
>       field->F1 := chr( n % 26 + asc( "A" ) ) + " " + time()
>       field->F2 := field->F1
>       field->F3 := n / 100
>       field->F4 := hb_dateTime()
>    enddo
>    index on field->F1 tag T1
>    index on field->F3 tag T3
>    index on field->F4 tag T4
>    close
>    ?
> else
>    ? DBNAME, 'Already exists'
> endif
> return
> 
> proc testdb( cName )
>    local i, j
>    ?
>    ? 'using:',time()
>    use (cName)
>    ? "used:", time(), used()
>    ? "nterr:", neterr()
>    ? "alias:", alias()
>    ? "lastrec:", lastrec()
>    ? "ordCount:", ordCount()
>    for i:=1 to ordCount()
>       ordSetFocus( i )
>       ? i, "name:", ordName(), "key:", ordKey(), "keycount:", ordKeyCount()
>    next
>    ordSetFocus( 1 )
>    dbgotop()
>    while !eof()
>       if ! field->F1 == field->F2
>          ? "error at record:", recno()
>          ? "  ! '" + field->F1 + "' == '" + field->F2 + "'"
>       endif
>       dbSkip()
>    enddo
>    i := row()
>    j := col()
>    dbgotop()
> 
>    ? 'locking:',time()
>    ? 'locked:', rlock(), time()
> 
>    wait
> 
>    browse()
>    setpos( i, j )
>    close
> 
>    return
> 
> THE OBSERVATION
> ==============
> 1. USE command takes about 18 seconds to open a table

This is not inside Harbour code. At least not directly.
It should open table immediately just like any other operations.
If it's slower then for some reasons opening new connection is
delayed but it's outside of harbour application so should be
configurable by some system settings. Maybe it's side effect of
used firewall which tries to verify all accepted connections.
It's also possible that it's inside winsock library when name is
resolved. This you can easy verify by modifying netiocli.c[373].
Simply replace:
   pszIpAddres = hb_socketResolveAddr( pszServer, HB_SOCKET_AF_INET );
with:
   pszIpAddres = hb_strdup( pszServer );
recompile hbnetio library and your application and check if delay
in use still exists. If it resolves the problem then I would like
to know your C compiler so I can try to look for workaround but
it's hbsocket code problem not hbnetio.

> 2. Once table is opened, data access is quiet fast - almost instant
> 3. Locks are very well synchonized.
> 4. Data population is instantly visible on other terminals.

It should be. All accessed files are redirected to the server so
it should work without any problem. This is probably safer then using
SMB as transport layer because you do not have to worry about oplocks
setting or similar problems.

> 10.0.40.111 is a Windows 2003 Server on our local network.
> I could not test on some domain server which in fact be a real test.

Thank you for your tests.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep  1 17:01:21 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  1 17:01:27 2009
Subject: [Harbour] Help on error using compiling Harbour
	withminGWunderUbuntu 9.04
In-Reply-To: <4A9D7C1E.6010900@elart.it>
References: <EY5ijTo1.1251818297.8903950.marcobra@82.105.36.210>
	<4lsWjrkF.1251819727.1117820.marcobra@82.105.36.210>
	<20090901162702.GA21880@uran.home.aster.pl>
	<4A9D7C1E.6010900@elart.it>
Message-ID: <20090901210121.GB17539@uran.home.aster.pl>

On Tue, 01 Sep 2009, elart wrote:

Hi,

>>> /usr/bin/i586-mingw32msvc-gcc  -I. -I../../../../../include  -O3
>>> -fomit-frame-pointer -march=i586 -mtune=pentiumpro   -osqlite3.o -c
>>> ../../../sqlite3.c
>>> ../../../sqlite3.c: In function ?sqlite3BtreeFactory?:
>>> ../../../sqlite3.c:92183: warning: passing argument 2 of
>>> ?sqlite3BtreeOpen? discards qualifiers from pointer target type
>>> /usr/bin/i586-mingw32msvc-ar   crs
>>> ../../../../../lib/win/mingw/libsqlite3.a sqlite3.o || rm -f
>>> ../../../../../lib/win/mingw/libsqlite3.a
>> This is not error message but warning only and you
>> can safely ignore it.
>> I do not see any errors.
> please give me some suggestion on the default install path for the 
> cross-compiled Harbour to test and use in a good way.

This is correct. sqlite3 is the last compiled library.
If you want to create hbw* scripts then you have to
set HB_INSTALL_PREFIX and execute make install, i.e.

   export HB_INSTALL_PREFIX=/tmp/hbwin
   make install HB_PLATFORM=win

then inside /tmp/hbwin/bin you will find hbw* scripts which
you can use to build windows binaries. Just add this directory to
you PATH, i.e.:
   export PATH="/tmp/hbwin/bin:$PATH"
and then:
   hbwmk -n -w -es2 myprog
You can also configure hbmk2 to create windows binaries.

best regards,
Przemek
From mbelgrano at deltain.it  Tue Sep  1 18:01:42 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep  1 18:02:09 2009
Subject: [Harbour] ViaNemo: New Framework Opensource for Harbour
In-Reply-To: <25244059.post@talk.nabble.com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com> 
	<25233147.post@talk.nabble.com>
	<20090901072102.GB21984@uran.home.aster.pl> 
	<008f01ca2ad6$e3c84000$ab58c000$@com>
	<133778360909010707i30d093f6ke0fc5878c11dfa5@mail.gmail.com> 
	<000601ca2b0e$c9d7a590$5d86f0b0$@com> <25244059.post@talk.nabble.com>
Message-ID: <609353e70909011501n43fa451bu8973e7a3316754b9@mail.gmail.com>

and with xbase++ gui syntax or Visual fox Pro?
2009/9/1 Rossine <qiinfo@ig.com.br>

>
> Hello Fernando,
>
> Is possible to have compatibility with MiniGUI extended also ?
> --
> View this message in context:
> http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-12382--trunk-harbour-tp25231702p25244059.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090902/b421b938/attachment.html
From toninhofwi at yahoo.com.br  Tue Sep  1 19:54:44 2009
From: toninhofwi at yahoo.com.br (ToninhoFWi)
Date: Tue Sep  1 19:54:53 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12382] trunk/harbour
In-Reply-To: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
Message-ID: <fvcr959jqqaborcghj6186ikai9ds5skf6@4ax.com>

>      Have a fun with this new toy ;-)

Toy?  This is a wonderful tool.

Thank you Przemek.

Toninho.
__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From ice at extreme.hu  Tue Sep  1 20:14:02 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Tue Sep  1 20:14:08 2009
Subject: [Harbour] rddsql/sddpg install problems
In-Reply-To: <20090901174954.GA17742@uran.home.aster.pl>
References: <alpine.GSO.2.00.0909011704300.17720@dawn.royalcomp.hu>
	<20090901174954.GA17742@uran.home.aster.pl>
Message-ID: <alpine.GSO.2.00.0909020212120.17720@dawn.royalcomp.hu>

On Tue, 1 Sep 2009, Przemyslaw Czerpak wrote:

hi,

 > > it seems as if INSTALL_RULE was assembled more than once, once with 
 > > INSTALL_FILES set to libsddpg.a, but at the next iteration 
 > > INSTALL_FILES was empty. afaict this second iteration must somehow be 
 > > happening inside instsh.mk, as it is protected to be evaluated with an 
 > > empty install_files list.
 > 
 > Yes, it's a known problem caused by hack used to install header files
 > with libraries or binaries, i.e.:


thanks, i got further with this. now it's external/libhpdf:
   
make[3]: `../../../../../lib/sunos/sunpro/libhbxbp.a' is up to date.
! Installing xbp.ch on /tmp/hb/include
! Installing xbpdev.ch on /tmp/hb/include
! Installing appevent.ch on /tmp/hb/include
! Installing gra.ch on /tmp/hb/include
! Installing ../../lib/sunos/sunpro/libhbxbp.a on /tmp/hb/lib
make[3]: `../../../../../lib/sunos/sunpro/liblibhpdf.a' is up to date.
/bin/sh: syntax error at line 1: `;' unexpected
make[2]: *** [install] Error 2
make[1]: *** [libhpdf.inst] Error 2
make: *** [external.inst] Error 2
   
this actually has been bugging me for a while - it seems that much    
(all, perhaps) other extensions are installed so that in lib<foo>.a   
there's both the glue code object to the original library (or the 
object implementing the complete functionality) and the harbour 
bridge. in case of hpdf, what gets installed is a libhbpdf.a (which is 
the hb bridge), and a liblibhpdf.a (which is libharu itself). is that 
supposed to be so? even if so, "liblib" seems somewhat unintentional..

thanks,

-- 
[-]

mkdir /nonexistent
From druzus at acn.waw.pl  Tue Sep  1 20:48:32 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  1 20:48:38 2009
Subject: [Harbour] rddsql/sddpg install problems
In-Reply-To: <alpine.GSO.2.00.0909020212120.17720@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909011704300.17720@dawn.royalcomp.hu>
	<20090901174954.GA17742@uran.home.aster.pl>
	<alpine.GSO.2.00.0909020212120.17720@dawn.royalcomp.hu>
Message-ID: <20090902004832.GA22722@uran.home.aster.pl>

On Wed, 02 Sep 2009, Tamas TEVESZ wrote:

Hi,

> thanks, i got further with this. now it's external/libhpdf:
> make[3]: `../../../../../lib/sunos/sunpro/libhbxbp.a' is up to date.
> ! Installing xbp.ch on /tmp/hb/include
> ! Installing xbpdev.ch on /tmp/hb/include
> ! Installing appevent.ch on /tmp/hb/include
> ! Installing gra.ch on /tmp/hb/include
> ! Installing ../../lib/sunos/sunpro/libhbxbp.a on /tmp/hb/lib
> make[3]: `../../../../../lib/sunos/sunpro/liblibhpdf.a' is up to date.
> /bin/sh: syntax error at line 1: `;' unexpected
> make[2]: *** [install] Error 2
> make[1]: *** [libhpdf.inst] Error 2
> make: *** [external.inst] Error 2

Yet another:
      include $(TOP)$(ROOT)config/header.mk
without any header files.
Maybe instead of removing this line I'll simply fix the
detection for empty INSTALL_FILES?

   ifneq ($(INSTALL_FILES),) # Empty install list

in instsh.mk does not work for INSTALL_FILES defined in
header.mk because this line:
   INSTALL_FILES := $(C_HEADERS) $(PRG_HEADERS) $(API_HEADERS)
assign to INSTALL_FILES string with two spaces and it's not empty
value for GNU make and later your SHELL reports problems errors.
I'll commit fix in a while.

> this actually has been bugging me for a while - it seems that much    
> (all, perhaps) other extensions are installed so that in lib<foo>.a   
> there's both the glue code object to the original library (or the 
> object implementing the complete functionality) and the harbour 
> bridge. in case of hpdf, what gets installed is a libhbpdf.a (which is 
> the hb bridge), and a liblibhpdf.a (which is libharu itself). is that 
> supposed to be so? even if so, "liblib" seems somewhat unintentional..

IMHO it's typo. Both libhpdf and libpng should be renamed to hpdf and png.
Anyhow I would like to leave this modification to Viktor. He should be
back in next week.
AFAIK both are standard libraries for OS which do not support them so
in most of *nixes they are less usable. I used to set:
   export HB_EXTERNALLIBS=no
to disable external module compilation.

best regards,
Przemek
From druzus at users.sourceforge.net  Tue Sep  1 20:52:02 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue Sep  1 20:52:08 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12390] trunk/harbour
Message-ID: <E1Mie4w-0006Ky-Gk@3kljzd1.ch3.sourceforge.com>

Revision: 12390
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12390&view=rev
Author:   druzus
Date:     2009-09-02 00:52:01 +0000 (Wed, 02 Sep 2009)

Log Message:
-----------
2009-09-02 02:51 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/compiler/hbmain.c
    % farther optimizations and simplifications

  * harbour/config/instsh.mk
    ! fixed detection of empty INSTALL_FILES and INSTALL_DIR

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/instsh.mk
    trunk/harbour/source/compiler/hbmain.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From ice at extreme.hu  Tue Sep  1 21:07:26 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Tue Sep  1 21:07:35 2009
Subject: [Harbour] rddsql/sddpg install problems
In-Reply-To: <20090902004832.GA22722@uran.home.aster.pl>
References: <alpine.GSO.2.00.0909011704300.17720@dawn.royalcomp.hu>
	<20090901174954.GA17742@uran.home.aster.pl>
	<alpine.GSO.2.00.0909020212120.17720@dawn.royalcomp.hu>
	<20090902004832.GA22722@uran.home.aster.pl>
Message-ID: <alpine.GSO.2.00.0909020301550.17720@dawn.royalcomp.hu>

On Wed, 2 Sep 2009, Przemyslaw Czerpak wrote:

hi,

 > Yet another:
 >       include $(TOP)$(ROOT)config/header.mk
 > without any header files.

oh. i thought PRG_HEADERS := harupdf.ch was that.

anyway, testing...

 > > this actually has been bugging me for a while - it seems that much    
 > > (all, perhaps) other extensions are installed so that in lib<foo>.a   
 > > there's both the glue code object to the original library (or the 
 > > object implementing the complete functionality) and the harbour 
 > > bridge. in case of hpdf, what gets installed is a libhbpdf.a (which is 
 > > the hb bridge), and a liblibhpdf.a (which is libharu itself). is that 
 > > supposed to be so? even if so, "liblib" seems somewhat unintentional..
 > 
 > IMHO it's typo. Both libhpdf and libpng should be renamed to hpdf and png.
 > Anyhow I would like to leave this modification to Viktor. He should be
 > back in next week.

ok, i'll keep this in mind and bug him once he's back.

thanks,

-- 
[-]

mkdir /nonexistent
From mhsabado at gmail.com  Tue Sep  1 21:50:35 2009
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Tue Sep  1 21:50:51 2009
Subject: [Harbour] HBNETIO Windows Drive Letter Support
In-Reply-To: <4a9d450d.a615f10a.4ff0.0af4SMTPIN_ADDED@mx.google.com>
References: <4a9d450d.a615f10a.4ff0.0af4SMTPIN_ADDED@mx.google.com>
Message-ID: <4A9DCF6B.5090107@gmail.com>

Thank you Przemek for the clarification and explanation.

Best regards,
Mario

Message: 1
Date: Tue, 1 Sep 2009 17:18:09 +0200
From: Przemyslaw Czerpak <druzus@acn.waw.pl>
Subject: Re: [Harbour] HBNETIO Windows Drive Letter Support
To: "Harbour Project Main Developer List."
	<harbour@harbour-project.org>
Message-ID: <20090901151809.GA24249@uran.home.aster.pl>
Content-Type: text/plain; charset=utf-8

On Tue, 01 Sep 2009, Mario H. Sabado wrote:

Hi,


> > Is it possible to have drive letter support for Windows OS when specifying 
> > database file?  The root of data starts from where the program was 
> > executed, is this correct?
>   

Yes, it is intentional protection. Otherwise somoone can easy write
program to remove all files from your hard disk.
You can control default file location using 3-rd parameter in
NETIO_LISTEN() function, see the ChangeLog:

   NETIO_LISTEN( [<nPort>], [<cAddress>], [<cRootDir>] )
                                          -> <pListenSocket> | NIL

If you pass empty string "" as <cRootDir> then you will fully disable
the protection. Do it for your own risk.
Default value for <cRootDir> is the localization of server binaries.


> > What if the hierarchy of the data directory is 
> > higher than where the program is executed or in the other directory or 
> > drive (in case of Windows)?
>   

NETIO server control given paths and does not allow to create any file
outside root directory. It also controls ".." usage in paths so it cannot
be used as workaround for protection but they can be used only to the
level of root directory, i.e. cRootDir:="/var/data" and you can access
file /var/data/myfs1/../myfs2/mytable using "myfs1/../myfs2/mytable"
as file name of course if above directories exists but it's illegal
to use "../somedir/somefile".
If filesystem support soft or hard links then they can be used
to break this protection anyhow for this it's necessary to have
direct access to shared paths because NETIO server does not allow
to create any links remotely.

best regards,
Przemek


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090902/27ad4bbf/attachment-0001.html
From druzus at acn.waw.pl  Tue Sep  1 22:05:38 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  1 22:05:44 2009
Subject: [Harbour] rddsql/sddpg install problems
In-Reply-To: <alpine.GSO.2.00.0909020301550.17720@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909011704300.17720@dawn.royalcomp.hu>
	<20090901174954.GA17742@uran.home.aster.pl>
	<alpine.GSO.2.00.0909020212120.17720@dawn.royalcomp.hu>
	<20090902004832.GA22722@uran.home.aster.pl>
	<alpine.GSO.2.00.0909020301550.17720@dawn.royalcomp.hu>
Message-ID: <20090902020537.GA21314@uran.home.aster.pl>

On Wed, 02 Sep 2009, Tamas TEVESZ wrote:

Hi,

>  > Yet another:
>  >       include $(TOP)$(ROOT)config/header.mk
>  > without any header files.
> oh. i thought PRG_HEADERS := harupdf.ch was that.
> anyway, testing...

harupdf.ch is part of contrib/hbhpdf library only.
There is no:
   PRG_HEADERS := harupdf.ch
in external/libhpdf/Makefile.

best regards,
Przemek
From francek.prijatelj at siol.net  Wed Sep  2 03:19:36 2009
From: francek.prijatelj at siol.net (=?windows-1250?Q?FRAN=C8EK_PRIJATELJ?=)
Date: Wed Sep  2 03:19:46 2009
Subject: [Harbour] Error in makefile
Message-ID: <4A9E1C88.6050505@siol.net>

Hi Victor

There is infinite recursion in makefile(s)

Try win-make --print-data-base

BRGS
-------------- next part --------------
A non-text attachment was scrubbed...
Name: francek_prijatelj.vcf
Type: text/x-vcard
Size: 182 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090902/f303f101/francek_prijatelj.vcf
From francek.prijatelj at siol.net  Wed Sep  2 03:40:34 2009
From: francek.prijatelj at siol.net (=?windows-1250?Q?FRAN=C8EK_PRIJATELJ?=)
Date: Wed Sep  2 03:40:43 2009
Subject: [Harbour] Proposal for change in rules.mk
Message-ID: <4A9E2172.90708@siol.net>

Hi

Maybe I am impolite to write about same problem third time.
Sorry in advance.

When building Harbour with msvc,  .cpp files (from hbqt)  are compiled 
with g++.

Problem is CXX in rules.mk , which has default value g++
In rules.mk , line 56:

# The rule to compile a C++ source file.
ifeq ($(CPP_RULE),)
    ifeq ($(CXX),)
       CXX := $(CC)
    endif
    CPP_RULE = $(CXX) $(CC_FLAGS) $(HB_USER_CFLAGS) 
$(CC_OUT)$(<F:.cpp=$(OBJ_EXT)) $(CC_IN) $<
endif

Try command
mingw32-make --print-data-base > 0.txt

In o.txt line 223
223 # default
224 CXX = g++
225 # default
226 COFLAGS =

Solution:
Change CXX to some other name


BRGS
Fran?ek Prijatelj

-------------- next part --------------
A non-text attachment was scrubbed...
Name: francek_prijatelj.vcf
Type: text/x-vcard
Size: 182 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090902/c089e4d7/francek_prijatelj.vcf
From francek.prijatelj at siol.net  Wed Sep  2 03:48:16 2009
From: francek.prijatelj at siol.net (=?UTF-8?Q?Fran=C4=8Dek_Prijatelj?=)
Date: Wed Sep  2 03:48:22 2009
Subject: [Harbour] Proposal for change in rules.mk
In-Reply-To: <4A9E2172.90708@siol.net>
References: <4A9E2172.90708@siol.net>
Message-ID: <25253062.post@talk.nabble.com>



Fran?ek Prijatelj wrote:
> 
> 
> Try command
> mingw32-make --print-data-base > 0.txt
> 
> 

You have to be outside harbour dierostory 
(because of infinite loop mentioned in previous post)

regards
Fran?ek
-- 
View this message in context: http://www.nabble.com/Proposal-for-change-in-rules.mk-tp25252986p25253062.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From maurilio.longo at libero.it  Wed Sep  2 07:36:37 2009
From: maurilio.longo at libero.it (maurilio longo)
Date: Wed Sep  2 07:36:44 2009
Subject: [Harbour] make and OS/2, to Viktor
Message-ID: <KPCDL1$4A15F493C20A4522A8E8933C6528A4A4@libero.it>

Viktor,

sorry to bother you; this is just to let you know that I've found a work around using find and xargs and/or find and echo to the problem I'm having with OS/2 cmd.exe line length limit.

I'm also talking with the latest porter to see if he can find a way around this problem in gnu make.

As soon as he gives me an answer (I have found out that there is a make 2.79.a2 version which is able to handle current makefiles even if it has other problems; but we don't know _how_ it is able to do this) I'll let you know so that we can decide whether to use the find hack or not (btw, the find hack comes from that page about ARG_MAX whose link you posted a few days ago).

Best regards.

Maurilio.


From druzus at users.sourceforge.net  Wed Sep  2 08:08:31 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Wed Sep  2 08:08:39 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12391] trunk/harbour
Message-ID: <E1Miodb-0007Sj-Bd@bj8yhf1.ch3.sourceforge.com>

Revision: 12391
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12391&view=rev
Author:   druzus
Date:     2009-09-02 12:08:30 +0000 (Wed, 02 Sep 2009)

Log Message:
-----------
2009-09-02 14:08 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcomp.h
  * harbour/include/hbcompdf.h
  * harbour/source/compiler/hbmain.c
  * harbour/source/compiler/genc.c
  * harbour/source/compiler/genhrb.c
    + added support for compiling multiple .prg modules into single
      compilation unit with repeated static or init/exit functions
      with the same name.
      Now Harbour compiler compiling .prg code from different .prg modules
      included by @<name>.clp or by SET PROCEDURE TO ... / DO ... [ WITH ... ]
      works exactly like Clipper. It supports separated file wide definitions
      for each compiled .prg module when -n switch is used and allows to
      use static or init/exit functions/procedures with the same names but
      in different modules.
      It resolves incompatibility often reported by [x]Harbour users.
      Now it's not longer necessary to update existing Clipper code.
      @.clp files and SET PROCEDURE TO ... / DO ... [ WITH ... ] are
      fully functional like in Clipper.
      AFAIR it was the last unintentional incompatibility with Clipper.

      TODO: add support for multiple static functions with the same name
            in .HRB files - it's necessary to change used format so I'll
            probably to that with .HRL support. Now when -gh switch is used
            harbour and such functions exists then compiler generates:
               Error E0002  Redefinition of procedure or function ...
      TODO: modify hbmk2 to pass @<name>.clp files directly to Harbour
            compiler so it can compile them just like Clipper does and
            generate single output file: <name>.<ext>

  * harbour/config/instsh.mk
    * disabled install command echo

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/instsh.mk
    trunk/harbour/include/hbcomp.h
    trunk/harbour/include/hbcompdf.h
    trunk/harbour/source/compiler/genc.c
    trunk/harbour/source/compiler/genhrb.c
    trunk/harbour/source/compiler/hbmain.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From sscc at mweb.co.za  Wed Sep  2 08:44:01 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Wed Sep  2 08:44:04 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12391] trunk/harbour
In-Reply-To: <E1Miodb-0007Sj-Bd@bj8yhf1.ch3.sourceforge.com>
References: <E1Miodb-0007Sj-Bd@bj8yhf1.ch3.sourceforge.com>
Message-ID: <4A9E6891.30601@mweb.co.za>

druzus@users.sourceforge.net wrote:

>       AFAIR it was the last unintentional incompatibility with Clipper.

A real milestone!

Congratulations!

Regards
Alex

From info at fsgiudice.com  Wed Sep  2 09:07:08 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Sep  2 09:07:33 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12391] trunk/harbour
In-Reply-To: <4A9E6891.30601@mweb.co.za>
References: <E1Miodb-0007Sj-Bd@bj8yhf1.ch3.sourceforge.com>
	<4A9E6891.30601@mweb.co.za>
Message-ID: <4A9E6DFC.7010009@fsgiudice.com>



on 02/09/2009 14.44 Alex Strickland wrote:
> druzus@users.sourceforge.net wrote:
> 
>>       AFAIR it was the last unintentional incompatibility with Clipper.
> 
> A real milestone!
> 
> Congratulations!
> 
+1
Thank you.

Best regards,
Francesco
From M.Horodyski at pzuzycie.com.pl  Wed Sep  2 09:17:16 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Wed Sep  2 09:17:25 2009
Subject: [Harbour] Trouble with ole
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9502792CAB@PINK.zycie.pzu>

I try modify opened excel sheet, but this code :

Local oExcel, oAs
if ( oExcel := win_oleCreateObject( "Excel.Application" )) == Nil
   ok( 'Error ...')
   Return
end
cls
* oExcel:WorkBooks:Add() // <-- when I uncommet this line, all is ok
oAS := oExcel:ActiveSheet()
? valtype( oas)
inkey( 0)
return

Is displaed 'U'. This code was work in xHarbour.
How can I catch active sheet ?
My version is : Harbour 2.0.0beta2 (Rev. 11801). MinGW.

Regards,
Marek Horodyski
From dbtopas at dbtopas.lt  Wed Sep  2 09:56:11 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Sep  2 09:57:45 2009
Subject: [Harbour] Trouble with ole
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C9502792CAB@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9502792CAB@PINK.zycie.pzu>
Message-ID: <4A9E797B.7000801@dbtopas.lt>

Hi,


Horodyski Marek (PZUZ) wrote:
> I try modify opened excel sheet, but this code :
> 
> Local oExcel, oAs
> if ( oExcel := win_oleCreateObject( "Excel.Application" )) == Nil
>    ok( 'Error ...')
>    Return
> end
> cls
> * oExcel:WorkBooks:Add() // <-- when I uncommet this line, all is ok
> oAS := oExcel:ActiveSheet()
> ? valtype( oas)
> inkey( 0)
> return
> 
> Is displaed 'U'. This code was work in xHarbour.

I do not thing so, or xHarbour has hacked OleCreateObject to do 
OleGetActiveObject() before real OleCreateObject call.

> How can I catch active sheet ?

Win_oleCreateObject("Excel.Application") create a new Excel object 
without any open documents (i.e. workbook), so it is unable to have 
active sheet.


I successfully use code:
   oExcel := Win_OleGetActiveObject("Excel.Application")
   IF !EMPTY(oExcel);  oSheet := oExcel:ActiveSheet()
   ENDIF
   IF EMPTY(oSheet) .OR. EMPTY(oSheet:Cells(1, 1):Value)
     ? "Please, open not empty data file in Excel"
     RETURN .F.
   ENDIF
   ...



Regards,
Mindaugas
From druzus at users.sourceforge.net  Wed Sep  2 10:52:50 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Wed Sep  2 10:52:55 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12392] trunk/harbour
Message-ID: <E1MirCc-0006yr-7Y@74yxhf1.ch3.sourceforge.com>

Revision: 12392
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12392&view=rev
Author:   druzus
Date:     2009-09-02 14:52:49 +0000 (Wed, 02 Sep 2009)

Log Message:
-----------
2009-09-02 16:52 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/runner.c
    ! fixed possible GPF after loading .hrb module - clear function
      address if dynamic symbol does not exist

  * harbour/source/compiler/hbmain.c
    ! fixed typo in conditional compilation in last commit

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/compiler/hbmain.c
    trunk/harbour/source/vm/runner.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dbtopas at dbtopas.lt  Wed Sep  2 10:53:06 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Sep  2 10:54:38 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12382] trunk/harbour
In-Reply-To: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
Message-ID: <4A9E86D2.4050207@dbtopas.lt>

Hi,


>     + added new library: HBNETIO.

Great!!!!! :)

s_netio_exit:
    if( s_fInit )  // should be ! s_fInit
    {
       hb_socketCleanup();
       s_fInit = TRUE;
    }


Regards,
Mindaugas

From druzus at users.sourceforge.net  Wed Sep  2 11:04:43 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Wed Sep  2 11:04:48 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12393] trunk/harbour
Message-ID: <E1MirO7-0007J7-H9@74yxhf1.ch3.sourceforge.com>

Revision: 12393
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12393&view=rev
Author:   druzus
Date:     2009-09-02 15:04:42 +0000 (Wed, 02 Sep 2009)

Log Message:
-----------
2009-09-02 17:04 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbnetio/netiocli.c
    ! fixed typo - thanks to Mindaugas

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbnetio/netiocli.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Wed Sep  2 11:05:07 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep  2 11:05:15 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12382] trunk/harbour
In-Reply-To: <4A9E86D2.4050207@dbtopas.lt>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
	<4A9E86D2.4050207@dbtopas.lt>
Message-ID: <20090902150507.GA12630@uran.home.aster.pl>

On Wed, 02 Sep 2009, Mindaugas Kavaliauskas wrote:

Hi,

>>     + added new library: HBNETIO.
> Great!!!!! :)
> s_netio_exit:
>    if( s_fInit )  // should be ! s_fInit
>    {
>       hb_socketCleanup();
>       s_fInit = TRUE;
>    }

Thank you x 2 :-) (fixed)

best regards,
Przemek
From druzus at users.sourceforge.net  Wed Sep  2 11:10:44 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Wed Sep  2 11:10:51 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12394] trunk/harbour
Message-ID: <E1MirTw-0007U1-UK@74yxhf1.ch3.sourceforge.com>

Revision: 12394
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12394&view=rev
Author:   druzus
Date:     2009-09-02 15:10:43 +0000 (Wed, 02 Sep 2009)

Log Message:
-----------
2009-09-02 17:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbnetio/netio.h
    * added small description

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbnetio/netio.h


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From M.Horodyski at pzuzycie.com.pl  Wed Sep  2 11:27:58 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Wed Sep  2 11:28:07 2009
Subject: [Harbour] Trouble with ole
In-Reply-To: <4A9E797B.7000801@dbtopas.lt>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9502792D08@PINK.zycie.pzu>

>-----Original Message-----
>From: Mindaugas Kavaliauskas [mailto:dbtopas@dbtopas.lt] 
>Sent: Wednesday, September 02, 2009 3:56 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] Trouble with ole
...
>I successfully use code:
>   oExcel := Win_OleGetActiveObject("Excel.Application")
>   IF !EMPTY(oExcel);  oSheet := oExcel:ActiveSheet()
>   ENDIF
>   IF EMPTY(oSheet) .OR. EMPTY(oSheet:Cells(1, 1):Value)
>     ? "Please, open not empty data file in Excel"
>     RETURN .F.
>   ENDIF
>   ...

Strange, worked. Still do not know what was wrong, but it's important
that worked:)
Great thanks.

Regards,
Marek Horodyski
From abe.buch at att.net  Wed Sep  2 12:49:10 2009
From: abe.buch at att.net (AbeB)
Date: Wed Sep  2 12:49:16 2009
Subject: [Harbour] msvc error
Message-ID: <1251910150967-3567969.post@n2.nabble.com>


! Building Harbour 2.0.0beta2 from source - http://www.harbour-project.org
! MAKE: win-make.exe 3.81 sh.exe
! HB_INSTALL_PREFIX: c:\Harbour\Dev
! HB_HOST_PLAT: win (x86)  HB_SHELL: nt
! HB_PLATFORM: win (x86) (autodetected)
! HB_COMPILER: msvc (autodetected: c:/Program Files/Microsoft Visual Studio
9.0/VC/BIN/cl.exe C:/Program Files/Microsoft Visual Studio/VC98/bin/)
! Component: 'openssl' not found
! Component: 'gpm' not supported on win platform
! Component: 'slang' not found
! Component: 'curses' not found
! Component: 'x11' not found
! Component: 'WATTCP/WATT-32' not supported on win platform
win-make.exe[2]: Nothing to be done for `all'.
win-make.exe[1]: Nothing to be done for `all'.
cl.exe  -nologo -I. -I../../../../../include -Gs -TP -W4 -wd4127 -Ot2b1
-EHs-c- -MT    -Fohbver.obj -c ../../../hbver.c
hbver.c
../../../hbver.c(308) : error C2039: 'wProductType' : is not a member of
'_OSVERSIONINFOEXA'
        C:\Program Files\Microsoft Visual
Studio\VC98\include\winbase.h(7998) : see declaration of '_OSVERSIONINFOEXA'
../../../hbver.c(308) : error C2065: 'VER_NT_WORKSTATION' : undeclared
identifier
../../../hbver.c(315) : error C2039: 'wProductType' : is not a member of
'_OSVERSIONINFOEXA'
        C:\Program Files\Microsoft Visual
Studio\VC98\include\winbase.h(7998) : see declaration of '_OSVERSIONINFOEXA'
../../../hbver.c(315) : error C2065: 'VER_NT_WORKSTATION' : undeclared
identifier
win-make.exe[3]: *** [hbver.obj] Error 2
win-make.exe[2]: *** [descend] Error 2
win-make.exe[1]: *** [common] Error 2
win-make.exe: *** [source] Error 2
-- 
View this message in context: http://n2.nabble.com/msvc-error-tp3567969p3567969.html
Sent from the harbour-devel mailing list archive at Nabble.com.
From druzus at users.sourceforge.net  Wed Sep  2 13:26:57 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Wed Sep  2 13:27:03 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12395] trunk/harbour
Message-ID: <E1Mitbl-0006WD-Rh@d5vjzd1.ch3.sourceforge.com>

Revision: 12395
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12395&view=rev
Author:   druzus
Date:     2009-09-02 17:26:55 +0000 (Wed, 02 Sep 2009)

Log Message:
-----------
2009-09-02 19:26 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/common/hbver.c
    ! added additional hack for conditional code used for Windows detection
      to work with VC98.
      Viktor please verify it but this condition:
         ( !defined( _MSC_VER ) || _MSC_VER >= 1400 )
      was not enough.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/common/hbver.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From amigosam at adinet.com.uy  Wed Sep  2 13:49:52 2009
From: amigosam at adinet.com.uy (Angel Pais)
Date: Wed Sep  2 13:50:27 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
In-Reply-To: <20090901204817.GA17539@uran.home.aster.pl>
References: <25244306.post@talk.nabble.com>
	<20090901204817.GA17539@uran.home.aster.pl>
Message-ID: <h7mb80$eq8$1@ger.gmane.org>

When trying to compile this new lib on Ubuntu I get...

angel@angel-laptop:~/src/harbour$ make
! Building Harbour 2.0.0beta2 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh
! HB_INSTALL_PREFIX: /usr/bin
! HB_BIN_INSTALL: /usr/bin
! HB_LIB_INSTALL: /usr/lib
! HB_INC_INSTALL: /usr/include
! HB_HOST_PLAT: linux  HB_SHELL: sh
! HB_PLATFORM: linux (autodetected)
! HB_COMPILER: gcc (autodetected: /usr/bin/)
! Component: 'openssl' found in /usr/include
! Component: 'gpm' found in /usr/include
! Component: 'slang' found in /usr/include
! Component: 'curses' found in /usr/include
! Component: 'x11' found in /usr/include
! Component: 'WATTCP/WATT-32' not supported on linux platform
! REVISION: 12394
make[2]: No se hace nada para `all'.
make[1]: No se hace nada para `all'.
make[3]: `../../../../../lib/linux/gcc/libhbcommon.a' est? actualizado.
make[3]: `../../../../../lib/linux/gcc/libhbnortl.a' est? actualizado.
make[3]: `../../../../../lib/linux/gcc/libhbpp.a' est? actualizado.
make[3]: `../../../../../lib/linux/gcc/libhbcplr.a' est? actualizado.
make[3]: `../../../../../bin/linux/gcc/harbour' est? actualizado.
make[3]: `../../../../../lib/linux/gcc/libhbrtl.a' est? actualizado.
make[4]: `../../../../../../lib/linux/gcc/libgtcgi.a' est? actualizado.
make[4]: `../../../../../../lib/linux/gcc/libgtcrs.a' est? actualizado.
! 'gtdos' library skipped
! 'gtgui' library skipped
! 'gtos2' library skipped
make[4]: `../../../../../../lib/linux/gcc/libgtpca.a' est? actualizado.
make[4]: `../../../../../../lib/linux/gcc/libgtsln.a' est? actualizado.
make[4]: `../../../../../../lib/linux/gcc/libgtstd.a' est? actualizado.
make[4]: `../../../../../../lib/linux/gcc/libgttrm.a' est? actualizado.
! 'gtwin' library skipped
! 'gtwvt' library skipped
make[4]: `../../../../../../lib/linux/gcc/libgtxwc.a' est? actualizado.
make[3]: `../../../../../lib/linux/gcc/libhbvm.a' est? actualizado.
make[4]: `../../../../../../lib/linux/gcc/libhbvmmt.a' est? actualizado.
make[3]: `../../../../../lib/linux/gcc/libhbmacro.a' est? actualizado.
make[3]: `../../../../../lib/linux/gcc/libhbcpage.a' est? actualizado.
make[3]: `../../../../../lib/linux/gcc/libhblang.a' est? actualizado.
make[3]: `../../../../../lib/linux/gcc/libhbrdd.a' est? actualizado.
make[4]: `../../../../../../lib/linux/gcc/libhbnulrdd.a' est? actualizado.
make[4]: `../../../../../../lib/linux/gcc/librddntx.a' est? actualizado.
make[4]: `../../../../../../lib/linux/gcc/librddnsx.a' est? actualizado.
make[4]: `../../../../../../lib/linux/gcc/librddcdx.a' est? actualizado.
make[4]: `../../../../../../lib/linux/gcc/librddfpt.a' est? actualizado.
make[4]: `../../../../../../lib/linux/gcc/libhbsix.a' est? actualizado.
make[4]: `../../../../../../lib/linux/gcc/libhbhsx.a' est? actualizado.
make[4]: `../../../../../../lib/linux/gcc/libhbusrrdd.a' est? actualizado.
make[4]: `../../../../../../../lib/linux/gcc/libhbuddall.a' est? 
actualizado.
make[3]: `../../../../../lib/linux/gcc/libhbextern.a' est? actualizado.
make[3]: `../../../../../lib/linux/gcc/libhbpcre.a' est? actualizado.
make[3]: `../../../../../lib/linux/gcc/libhbzlib.a' est? actualizado.
make[3]: `../../../../../lib/linux/gcc/libhbdebug.a' est? actualizado.
make[3]: `../../../../../lib/linux/gcc/libharbour-2.0.0.so' est? 
actualizado.
make[4]: `../../../../../../lib/linux/gcc/libharbourmt-2.0.0.so' est? 
actualizado.
make[3]: `../../../../../bin/linux/gcc/hbrun' est? actualizado.
make[3]: `../../../../../bin/linux/gcc/hbmk2' est? actualizado.
make[3]: `../../../../../bin/linux/gcc/hbi18n' est? actualizado.
make[3]: `../../../../../bin/linux/gcc/hbtest' est? actualizado.
make[3]: `../../../../../bin/linux/gcc/hbformat' est? actualizado.
! 'gtwvg' library skipped
make[3]: `../../../../../lib/linux/gcc/libhbbmcdx.a' est? actualizado.
make[3]: `../../../../../lib/linux/gcc/libhbbtree.a' est? actualizado.
make[3]: `../../../../../lib/linux/gcc/libhbclipsm.a' est? actualizado.
make[3]: `../../../../../lib/linux/gcc/libhbct.a' est? actualizado.
make[3]: `../../../../../lib/linux/gcc/libhbgt.a' est? actualizado.
make[3]: `../../../../../lib/linux/gcc/libhbmisc.a' est? actualizado.
make[3]: `../../../../../lib/linux/gcc/libhbmzip.a' est? actualizado.
make[2]: *** No hay objetivos.  Alto.
make[1]: *** [hbnetio] Error 2
make: *** [contrib] Error 2
angel@angel-laptop:~/src/harbour$

From elart at elart.it  Wed Sep  2 14:08:43 2009
From: elart at elart.it (elart)
Date: Wed Sep  2 14:09:01 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
In-Reply-To: <h7mb80$eq8$1@ger.gmane.org>
References: <25244306.post@talk.nabble.com>	<20090901204817.GA17539@uran.home.aster.pl>
	<h7mb80$eq8$1@ger.gmane.org>
Message-ID: <4A9EB4AB.4090008@elart.it>

On 09/02/2009 07:49 PM, Angel Pais wrote:
> When trying to compile this new lib on Ubuntu I get...
>
> angel@angel-laptop:~/src/harbour$ make
> ! Building Harbour 2.0.0beta2 from source - http://www.harbour-project.org
> ! MAKE: make 3.81 /bin/sh
> ! HB_INSTALL_PREFIX: /usr/bin
> ! HB_BIN_INSTALL: /usr/bin
> ! HB_LIB_INSTALL: /usr/lib
> ! HB_INC_INSTALL: /usr/include
> ! HB_HOST_PLAT: linux HB_SHELL: sh
> ! HB_PLATFORM: linux (autodetected)
> ! HB_COMPILER: gcc (autodetected: /usr/bin/)
> ! Component: 'openssl' found in /usr/include
> ! Component: 'gpm' found in /usr/include
> ! Component: 'slang' found in /usr/include
> ! Component: 'curses' found in /usr/include
> ! Component: 'x11' found in /usr/include
> ! Component: 'WATTCP/WATT-32' not supported on linux platform
> ! REVISION: 12394
> make[2]: No se hace nada para `all'.
> make[1]: No se hace nada para `all'.
> make[3]: `../../../../../lib/linux/gcc/libhbcommon.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbnortl.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbpp.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbcplr.a' est? actualizado.
> make[3]: `../../../../../bin/linux/gcc/harbour' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbrtl.a' est? actualizado.
> make[4]: `../../../../../../lib/linux/gcc/libgtcgi.a' est? actualizado.
> make[4]: `../../../../../../lib/linux/gcc/libgtcrs.a' est? actualizado.
> ! 'gtdos' library skipped
> ! 'gtgui' library skipped
> ! 'gtos2' library skipped
> make[4]: `../../../../../../lib/linux/gcc/libgtpca.a' est? actualizado.
> make[4]: `../../../../../../lib/linux/gcc/libgtsln.a' est? actualizado.
> make[4]: `../../../../../../lib/linux/gcc/libgtstd.a' est? actualizado.
> make[4]: `../../../../../../lib/linux/gcc/libgttrm.a' est? actualizado.
> ! 'gtwin' library skipped
> ! 'gtwvt' library skipped
> make[4]: `../../../../../../lib/linux/gcc/libgtxwc.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbvm.a' est? actualizado.
> make[4]: `../../../../../../lib/linux/gcc/libhbvmmt.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbmacro.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbcpage.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhblang.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbrdd.a' est? actualizado.
> make[4]: `../../../../../../lib/linux/gcc/libhbnulrdd.a' est? actualizado.
> make[4]: `../../../../../../lib/linux/gcc/librddntx.a' est? actualizado.
> make[4]: `../../../../../../lib/linux/gcc/librddnsx.a' est? actualizado.
> make[4]: `../../../../../../lib/linux/gcc/librddcdx.a' est? actualizado.
> make[4]: `../../../../../../lib/linux/gcc/librddfpt.a' est? actualizado.
> make[4]: `../../../../../../lib/linux/gcc/libhbsix.a' est? actualizado.
> make[4]: `../../../../../../lib/linux/gcc/libhbhsx.a' est? actualizado.
> make[4]: `../../../../../../lib/linux/gcc/libhbusrrdd.a' est? actualizado.
> make[4]: `../../../../../../../lib/linux/gcc/libhbuddall.a' est?
> actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbextern.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbpcre.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbzlib.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbdebug.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libharbour-2.0.0.so' est?
> actualizado.
> make[4]: `../../../../../../lib/linux/gcc/libharbourmt-2.0.0.so' est?
> actualizado.
> make[3]: `../../../../../bin/linux/gcc/hbrun' est? actualizado.
> make[3]: `../../../../../bin/linux/gcc/hbmk2' est? actualizado.
> make[3]: `../../../../../bin/linux/gcc/hbi18n' est? actualizado.
> make[3]: `../../../../../bin/linux/gcc/hbtest' est? actualizado.
> make[3]: `../../../../../bin/linux/gcc/hbformat' est? actualizado.
> ! 'gtwvg' library skipped
> make[3]: `../../../../../lib/linux/gcc/libhbbmcdx.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbbtree.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbclipsm.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbct.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbgt.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbmisc.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbmzip.a' est? actualizado.
> make[2]: *** No hay objetivos. Alto.
> make[1]: *** [hbnetio] Error 2
> make: *** [contrib] Error 2
> angel@angel-laptop:~/src/harbour$
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour


HOW TO BUILD AND INSTALL HARBOUR FROM SOURCE AND CROSS COMPILE HARBOUR 
FOR WIN ON LINUX
=======================================================================================

*----------------------------------------
( Tested on Ubuntu 9.04 and Ubuntu 9.10 )
*----------------------------------------

To get main reference please read the INSTALL file under the harbour 
source directory

You need to be connected to the Net.

First please  enable the "universe" repositories from menu System ? 
Administration ? Software Sources and confirm repositorie reload
Please install these deb packages... so you have almost all packages to 
compile contrib libraries and related stuffs

Please open a terminal window Applications ? Accessories ? Terminal and 
type or copy and paste (one row a time then press <enter>)

sudo apt-get update

When you use "sudo" the system ask you for a password, please typein 
your user password: you will not see any feedback (i.e terminal chars) 
when you type your password, so type the password, then press enter;

sudo apt-get install wget cvs rcs build-essential ncurses-dev 
libslang2-dev tk8.3-dev unixodbc-dev subversion libncurses-dev 
libx11-dev libgpm-dev libcurl4-openssl-dev firebird2.1-dev 
libfreeimage-dev libgd2-xpm-dev libmysqlclient15-dev libpq-dev 
libqt4-dev liballegro4.2-dev libsqlite3-dev wine dosemu-freedos mingw32

Then update from svn Harbour

1) - Please open a terminal window Applications ? Accessories ? Terminal
2) - Please check the requested packages are installed see above;
3) - Type the commands rows below you can also do a copy and paste of 
the row, please copy and paste a row a time then press enter;
mkdir $HOME/src
cd $HOME/src
svn co 
https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/harbour 
harbour
cd $HOME/src/harbour
export HB_BIN_INSTALL=/usr/bin
export HB_INSTALL_PREFIX=/usr/bin
export HB_LIB_INSTALL=/usr/lib
export HB_INC_INSTALL=/usr/include
make
sudo -E make install

When you use "sudo" the system ask you for a password, please type-in 
your user password: you will not see any feedback (i.e terminal chars) 
when you type your password, so type the password, then press enter;

to verify your build date of harbour, type:
harbour -build

to generate Harbour for Win

cd $HOME/src/harbour/; make HB_PLATFORM=win

export HB_INSTALL_PREFIX=/tmp/hbwin; make install HB_PLATFORM=win

Possible cross-build targets: Windows, Windows CE, MS-DOS, OS/2

You can use HB_PLATFORM values to select other platforms than Linux:

    win     - MS Windows (all flavors)
    wce     - MS Windows CE
    dos     - MS-DOS (32-bit protected mode only)
              (MS-DOS compatible system also work, like dosemu)
    os2     - OS/2


To generate the win exe files to be run with wine using Harbour

export HB_BIN_COMPILE=/tmp/hbwin/bin
export PATH=/tmp/hbwin/bin:$PATH

to your *nix PATH and then:

cd $HOME/src/harbour/contrib/hbnetio

hbwmk -static -n -w -es2 netiotst

To check the file generated

# file netiotst.exe
netiotst.exe: PE32 executable for MS Windows (GUI) Intel 80386 32-bit

to run the file type:

wine ./netiotst.exe

Hope this helps
From elart at elart.it  Wed Sep  2 14:27:04 2009
From: elart at elart.it (elart)
Date: Wed Sep  2 14:27:11 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
In-Reply-To: <h7mb80$eq8$1@ger.gmane.org>
References: <25244306.post@talk.nabble.com>	<20090901204817.GA17539@uran.home.aster.pl>
	<h7mb80$eq8$1@ger.gmane.org>
Message-ID: <4A9EB8F8.3010302@elart.it>

On 09/02/2009 07:49 PM, Angel Pais wrote:
> When trying to compile this new lib on Ubuntu I get...
>
> angel@angel-laptop:~/src/harbour$ make
> ! Building Harbour 2.0.0beta2 from source - http://www.harbour-project.org
> ! MAKE: make 3.81 /bin/sh
> ! HB_INSTALL_PREFIX: /usr/bin
> ! HB_BIN_INSTALL: /usr/bin
> ! HB_LIB_INSTALL: /usr/lib
> ! HB_INC_INSTALL: /usr/include
> ! HB_HOST_PLAT: linux HB_SHELL: sh
> ! HB_PLATFORM: linux (autodetected)
> ! HB_COMPILER: gcc (autodetected: /usr/bin/)
> ! Component: 'openssl' found in /usr/include
> ! Component: 'gpm' found in /usr/include
> ! Component: 'slang' found in /usr/include
> ! Component: 'curses' found in /usr/include
> ! Component: 'x11' found in /usr/include
> ! Component: 'WATTCP/WATT-32' not supported on linux platform
> ! REVISION: 12394
> make[2]: No se hace nada para `all'.
> make[1]: No se hace nada para `all'.
> make[3]: `../../../../../bin/linux/gcc/harbour' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbrtl.a' est? actualizado.
> make[4]: `../../../../../../lib/linux/gcc/libgtcgi.a' est? actualizado.
> make[4]: `../../../../../../lib/linux/gcc/libgtcrs.a' est? actualizado.
> ! 'gtdos' library skipped
> ! 'gtgui' library skipped
> ! 'gtos2' library skipped
> ...
> ....
> ....
> make[3]: `../../../../../lib/linux/gcc/libhbgt.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbmisc.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbmzip.a' est? actualizado.
> make[2]: *** No hay objetivos. Alto.
> make[1]: *** [hbnetio] Error 2
> make: *** [contrib] Error 2
> angel@angel-laptop:~/src/harbour$
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

In previous reply please replace the row:

hbwmk -static -n -w -es2 netiotst

with this:

hbwmk -static -n -w -es2 -gtwin netiotst



I repost entirely here for clarity

HOW TO BUILD AND INSTALL HARBOUR FROM SOURCE AND CROSS COMPILE HARBOUR
FOR WIN ON LINUX
=======================================================================================

*----------------------------------------
( Tested on Ubuntu 9.04 and Ubuntu 9.10 )
*----------------------------------------

To get main reference please read the INSTALL file under the harbour
source directory

You need to be connected to the Net.

First please  enable the "universe" repositories from menu System ?
Administration ? Software Sources and confirm repositorie reload
Please install these deb packages... so you have almost all packages to
compile contrib libraries and related stuffs

Please open a terminal window Applications ? Accessories ? Terminal and
type or copy and paste (one row a time then press <enter>)

sudo apt-get update

When you use "sudo" the system ask you for a password, please typein
your user password: you will not see any feedback (i.e terminal chars)
when you type your password, so type the password, then press enter;

sudo apt-get install wget cvs rcs build-essential ncurses-dev
libslang2-dev tk8.3-dev unixodbc-dev subversion libncurses-dev
libx11-dev libgpm-dev libcurl4-openssl-dev firebird2.1-dev
libfreeimage-dev libgd2-xpm-dev libmysqlclient15-dev libpq-dev
libqt4-dev liballegro4.2-dev libsqlite3-dev wine dosemu-freedos mingw32

Then update from svn Harbour

1) - Please open a terminal window Applications ? Accessories ? Terminal
2) - Please check the requested packages are installed see above;
3) - Type the commands rows below you can also do a copy and paste of
the row, please copy and paste a row a time then press enter;
mkdir $HOME/src
cd $HOME/src
svn co
https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/harbour 

harbour
cd $HOME/src/harbour
export HB_BIN_INSTALL=/usr/bin
export HB_INSTALL_PREFIX=/usr/bin
export HB_LIB_INSTALL=/usr/lib
export HB_INC_INSTALL=/usr/include
make
sudo -E make install

When you use "sudo" the system ask you for a password, please type-in
your user password: you will not see any feedback (i.e terminal chars)
when you type your password, so type the password, then press enter;

to verify your build date of harbour, type:
harbour -build

to generate Harbour for Win

cd $HOME/src/harbour/; make HB_PLATFORM=win

export HB_INSTALL_PREFIX=/tmp/hbwin; make install HB_PLATFORM=win

Possible cross-build targets: Windows, Windows CE, MS-DOS, OS/2

You can use HB_PLATFORM values to select other platforms than Linux:

     win     - MS Windows (all flavors)
     wce     - MS Windows CE
     dos     - MS-DOS (32-bit protected mode only)
               (MS-DOS compatible system also work, like dosemu)
     os2     - OS/2


To generate the win exe files to be run with wine using Harbour

export HB_BIN_COMPILE=/tmp/hbwin/bin
export PATH=/tmp/hbwin/bin:$PATH

to your *nix PATH and then:

cd $HOME/src/harbour/contrib/hbnetio

hbwmk -static -n -w -es2 -gtwin netiotst

To check the file generated

# file netiotst.exe
netiotst.exe: PE32 executable for MS Windows (GUI) Intel 80386 32-bit

to run the file type:

wine ./netiotst.exe

Hope this helps
From amigosam at adinet.com.uy  Wed Sep  2 14:46:03 2009
From: amigosam at adinet.com.uy (Angel Pais)
Date: Wed Sep  2 14:46:36 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
In-Reply-To: <4A9EB8F8.3010302@elart.it>
References: <25244306.post@talk.nabble.com>	<20090901204817.GA17539@uran.home.aster.pl>	<h7mb80$eq8$1@ger.gmane.org>
	<4A9EB8F8.3010302@elart.it>
Message-ID: <h7mehc$q99$1@ger.gmane.org>

Thank your...
I've done all that.
On sunday harbour complide well.
After recent changes It showed me the log I posted here.

So should I guess that on your ubuntu instalation netio compiled and ran 
fine ?

Regards
Angel

From qiinfo at ig.com.br  Wed Sep  2 15:01:37 2009
From: qiinfo at ig.com.br (Rossine)
Date: Wed Sep  2 15:01:43 2009
Subject: [Harbour] Error with 12395 and msvc
Message-ID: <25263591.post@talk.nabble.com>


Hello,

I see this errors:

[ERROR]

\Qt\qt\include/QtWebKit -DQT_NODLL -DHB_GC_AUTO -DHB_FM_STATISTIC
-Fomoc_slots.o
bj -c ../../../moc_slots.cpp, ...) failed.
make (e=2): O sistema n?o pode encontrar o arquivo especificado.
mingw32-make[3]: *** [moc_slots.obj] Error 2
mingw32-make[2]: *** [descend] Error 2
mingw32-make[1]: *** [hbqt.inst] Error 2
mingw32-make: *** [contrib.inst] Error 2

[ENDERROR]

Best Regards,

Rossine.

-- 
View this message in context: http://www.nabble.com/Error-with-12395-and-msvc-tp25263591p25263591.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Wed Sep  2 15:39:08 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep  2 15:39:15 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
In-Reply-To: <h7mb80$eq8$1@ger.gmane.org>
References: <25244306.post@talk.nabble.com>
	<20090901204817.GA17539@uran.home.aster.pl>
	<h7mb80$eq8$1@ger.gmane.org>
Message-ID: <20090902193908.GB28017@uran.home.aster.pl>

On Wed, 02 Sep 2009, Angel Pais wrote:

Hi,

> When trying to compile this new lib on Ubuntu I get...
[...]
> make[3]: `../../../../../lib/linux/gcc/libhbgt.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbmisc.a' est? actualizado.
> make[3]: `../../../../../lib/linux/gcc/libhbmzip.a' est? actualizado.
> make[2]: *** No hay objetivos.  Alto.
> make[1]: *** [hbnetio] Error 2
> make: *** [contrib] Error 2
> angel@angel-laptop:~/src/harbour$

It looks like a local problem with your SVN repository copy.
Check what you have in ~/src/harbour/contrib/hbnetio
directory. I.e. execute:
   svn update
and
   svn status
in this directory.
For sure the SVN code and build scripts are correct.

BTW hbnetio should be added to DEB packages too. I'll make it in a while.

best regards,
Przemek
From druzus at users.sourceforge.net  Wed Sep  2 15:40:29 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Wed Sep  2 15:40:35 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12396] trunk/harbour
Message-ID: <E1Mivgz-0006oi-Hy@74yxhf1.ch3.sourceforge.com>

Revision: 12396
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12396&view=rev
Author:   druzus
Date:     2009-09-02 19:40:28 +0000 (Wed, 02 Sep 2009)

Log Message:
-----------
2009-09-02 21:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/mpkg_deb.sh
    + added hbnetio to DEB packages

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/mpkg_deb.sh


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From abe.buch at att.net  Wed Sep  2 16:20:47 2009
From: abe.buch at att.net (AbeB)
Date: Wed Sep  2 16:20:53 2009
Subject: [Harbour] another msvc error
Message-ID: <1251922847669-3569248.post@n2.nabble.com>


! Building Harbour 2.0.0beta2 from source - http://www.harbour-project.org
! MAKE: win-make.exe 3.81 sh.exe
! HB_INSTALL_PREFIX: c:\Harbour\Dev
! HB_HOST_PLAT: win (x86)  HB_SHELL: nt
! HB_PLATFORM: win (x86) (autodetected)
! HB_COMPILER: msvc (autodetected: c:/Program Files/Microsoft Visual Studio
9.0/VC/BIN/cl.exe C:/Program Files/Microsoft Visual Studio/VC98/bin/)
! Component: 'openssl' not found
! Component: 'gpm' not supported on win platform
! Component: 'slang' not found
! Component: 'curses' not found
! Component: 'x11' not found
! Component: 'WATTCP/WATT-32' not supported on win platform
win-make.exe[2]: Nothing to be done for `all'.
win-make.exe[1]: Nothing to be done for `all'.
win-make.exe[3]: `../../../../../lib/win/msvc/hbcommon.lib' is up to date.
win-make.exe[3]: `../../../../../lib/win/msvc/hbnortl.lib' is up to date.
win-make.exe[3]: `../../../../../lib/win/msvc/hbpp.lib' is up to date.
win-make.exe[3]: `../../../../../lib/win/msvc/hbcplr.lib' is up to date.
win-make.exe[3]: `../../../../../bin/win/msvc/harbour.exe' is up to date.
win-make.exe[3]: `../../../../../lib/win/msvc/hbrtl.lib' is up to date.
win-make.exe[4]: `../../../../../../lib/win/msvc/gtcgi.lib' is up to date.
! 'gtcrs' library skipped
! 'gtdos' library skipped
win-make.exe[4]: `../../../../../../lib/win/msvc/gtgui.lib' is up to date.
! 'gtos2' library skipped
win-make.exe[4]: `../../../../../../lib/win/msvc/gtpca.lib' is up to date.
! 'gtsln' library skipped
win-make.exe[4]: `../../../../../../lib/win/msvc/gtstd.lib' is up to date.
! 'gttrm' library skipped
win-make.exe[4]: `../../../../../../lib/win/msvc/gtwin.lib' is up to date.
cl.exe  -nologo -I. -I../../../../../../include -Gs -TP -W4 -wd4127 -Ot2b1
-EHs-c- -MT    -Fogtwvt.obj -c ../../../gtwvt.c
gtwvt.c
../../../gtwvt.c(745) : error C3861: 'SetWindowLongPtr': identifier not
found
../../../gtwvt.c(1700) : error C3861: 'SetWindowLongPtr': identifier not
found
../../../gtwvt.c(1855) : error C2065: 'WS_EX_LAYERED' : undeclared
identifier
../../../gtwvt.c(1855) : error C3861: 'SetWindowLongPtr': identifier not
found
../../../gtwvt.c(1855) : error C3861: 'GetWindowLongPtr': identifier not
found
../../../gtwvt.c(1861) : error C2065: 'LWA_ALPHA' : undeclared identifier
../../../gtwvt.c(2545) : error C3861: 'SetWindowLongPtr': identifier not
found
win-make.exe[4]: *** [gtwvt.obj] Error 2
win-make.exe[3]: *** [descend] Error 2
win-make.exe[2]: *** [gtwvt] Error 2
win-make.exe[1]: *** [rtl] Error 2
win-make.exe: *** [source] Error 2
-- 
View this message in context: http://n2.nabble.com/another-msvc-error-tp3569248p3569248.html
Sent from the harbour-devel mailing list archive at Nabble.com.
From druzus at acn.waw.pl  Thu Sep  3 01:58:58 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep  3 01:59:03 2009
Subject: [Harbour] ActiveX
In-Reply-To: <25178548.post@talk.nabble.com>
References: <4A96A903.7050808@mweb.co.za> <25178548.post@talk.nabble.com>
Message-ID: <20090903055857.GA6924@uran.home.aster.pl>

On Thu, 27 Aug 2009, Pritpal Bedi wrote:

Hi,

> > error is 0x80040200 (CONNECT_E_NOCONNECTION), MSDN says:
> > "CONNECT_E_NOCONNECTION Error
> > The CONNECT_E_NOCONNECTION error is returned when AtlAdvise() calls the 
> > IConnectionPointContainer::FindConnectionPoint() method and fails. The ATL 
> > implementation of the IConnectionPointContainerImpl::FindConnectionPoint() 
> > function looks in the connection point map for the event interface and
> > returns 
> > this error if it doesn't find it."
> Now I remember why I used another appproach to detect the 
> Connection Point in GTWVG. I believe some OLE's are misaligned 
> ( I have few ) which do not confirm to FindConnectionPoint() method.
> I had to enumerate all entry points and then Advise() if one is matching.
> I struggled onto this point so many days.
> Mindaugas is the right person to extend on this subject.

Looking at the code I see one important difference between our new AX
code and GTWVG/HWGUI.
New AX code calls

   lOleError = HB_VTBL( pCPC )->FindConnectionPoint( HB_THIS_( pCPC )
                                       HB_ID_REF( IID_IDispatch ), &pCP );

to take connection point but GTWVG and HWGUI use different method.
They make sth like:

   IEnumConnectionPoints* pEnumCPs = NULL;
   IID                    rriid = IID_IUnknown;

   lOleError = HB_VTBL( pCPC )->EnumConnectionPoints( HB_THIS_( pCPC )
                                                      &pEnumCPs );
   if( lOleError == S_OK )
   {
      do
      {
         lOleError = HB_VTBL( pEnumCPs )->Next( HB_THIS_( pEnumCPs ) 1,
                                                &pCP, NULL );
         if( lOleError == S_OK )
         {
            lOleError = HB_VTBL( pCP )->GetConnectionInterface(
                                                   HB_THIS_( pCP ) &rriid );
            if( lOleError == S_OK )
               break;
         }
      }
      while( lOleError == S_OK );
      HB_VTBL( pEnumCPs )->Release( HB_THIS( pEnumCPs ) );
   }

and they store rriid inside own OLE structure so it cean be used in
QueryInterface() method, i.e.:

   static HRESULT STDMETHODCALLTYPE QueryInterface( IDispatch* lpThis,
                                                REFIID riid, void** ppRet )
   {
      if( IsEqualIID( riid, HB_ID_REF( IID_IUnknown ) ) ||
          IsEqualIID( riid, HB_ID_REF( IID_IDispatch ) ) ||
          IsEqualIID( riid, HB_ID_REF( ( ( ISink* ) lpThis )->rriid ) ) )
      {
         *ppRet = ( void* ) lpThis;
         HB_VTBL( lpThis )->AddRef( HB_THIS( lpThis ) );
         return S_OK;
      }
      *ppRet = NULL;
      return E_NOINTERFACE;
   }

I can add such method to our new AX code if FindConnectionPoint() fails.
Anyhow I would like to ask Mindaugas to accept it and you and Alex to make
tests.

best regards,
Przemek
From druzus at users.sourceforge.net  Thu Sep  3 02:26:03 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Thu Sep  3 02:26:09 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12397] trunk/harbour
Message-ID: <E1Mj5lj-00021x-JC@bj8yhf1.ch3.sourceforge.com>

Revision: 12397
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12397&view=rev
Author:   druzus
Date:     2009-09-03 06:26:02 +0000 (Thu, 03 Sep 2009)

Log Message:
-----------
2009-09-03 08:25 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbwin/axcore.c
    + added alternative method to look for connection point if
      FindConnectionPoint() method fails when new AX control is created.
      Such method is used by HWGUI and GTWVG.
      Mindaugas please verify it, windows users please test it.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/axcore.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From fmancera at viaopen.com  Thu Sep  3 04:47:46 2009
From: fmancera at viaopen.com (Fernando Mancera)
Date: Thu Sep  3 04:47:15 2009
Subject: [Harbour] ViaNemo: New Framework Opensource for Harbour
In-Reply-To: <609353e70909011501n43fa451bu8973e7a3316754b9@mail.gmail.com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
	<25233147.post@talk.nabble.com>	<20090901072102.GB21984@uran.home.aster.pl>
	<008f01ca2ad6$e3c84000$ab58c000$@com>	<133778360909010707i30d093f6ke0fc5878c11dfa5@mail.gmail.com>
	<000601ca2b0e$c9d7a590$5d86f0b0$@com>
	<25244059.post@talk.nabble.com>
	<609353e70909011501n43fa451bu8973e7a3316754b9@mail.gmail.com>
Message-ID: <003001ca2c73$38dc66f0$aa9534d0$@com>

Hello Massimo,


>>Is possible to have compatibility with MiniGUI extended also ?



I don't know the MINIGUI sintax, but ViaNemo is opensource and full source
code,

Any user can expand for user other GUI's sintax.


Best Regards,

Fernando Mancera
http://blog.viaopen.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090903/8ae2992d/attachment.html
From fmancera at viaopen.com  Thu Sep  3 04:57:07 2009
From: fmancera at viaopen.com (Fernando Mancera)
Date: Thu Sep  3 04:56:32 2009
Subject: [Harbour] ViaNemo: New Framework Opensource for Harbour
In-Reply-To: <20090901090802.GA32202@uran.home.aster.pl>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>	<25233147.post@talk.nabble.com>	<20090901072102.GB21984@uran.home.aster.pl>	<008f01ca2ad6$e3c84000$ab58c000$@com>
	<20090901090802.GA32202@uran.home.aster.pl>
Message-ID: <003b01ca2c74$85c0bd30$91423790$@com>

Hello Przemek,


>>Thank you very much for great contribution.
>>I think that it's the answer for many user requests:
>>GUI library which is compatible with FWH, works on desktop windows
>>and with WinCE and can be ported to other OS-es, maybe even integrated
>>with our HBQT keeping the compatibility with code created for FWH.
>>I'm not windows user so I cannot make real tests myself but I hope
>>windows/WinCE users will want to try it and can send their opinion here.

Thank you very much for your words.

>>And of course I would like to see such library as part of Harbour SVN
>>code.

ViaNemo always be part of Harbour SVN.


Best Regards,

Fernando Mancera
www.viaopen.com

From sscc at mweb.co.za  Thu Sep  3 05:24:58 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Sep  3 05:25:00 2009
Subject: [Harbour] ActiveX
In-Reply-To: <20090903055857.GA6924@uran.home.aster.pl>
References: <4A96A903.7050808@mweb.co.za> <25178548.post@talk.nabble.com>
	<20090903055857.GA6924@uran.home.aster.pl>
Message-ID: <4A9F8B6A.9010401@mweb.co.za>

Przemyslaw Czerpak wrote:

> I can add such method to our new AX code if FindConnectionPoint() fails.
> Anyhow I would like to ask Mindaugas to accept it and you and Alex to make
> tests.

I will test asap, thank you for your efforts. Really, sometimes reading mails on 
this group is like getting Christmas presents!

Regards
Alex

From sscc at mweb.co.za  Thu Sep  3 05:27:26 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Sep  3 05:27:28 2009
Subject: [Harbour] ViaNemo: New Framework Opensource for Harbour
In-Reply-To: <003001ca2c73$38dc66f0$aa9534d0$@com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>	<25233147.post@talk.nabble.com>	<20090901072102.GB21984@uran.home.aster.pl>	<008f01ca2ad6$e3c84000$ab58c000$@com>	<133778360909010707i30d093f6ke0fc5878c11dfa5@mail.gmail.com>	<000601ca2b0e$c9d7a590$5d86f0b0$@com>	<25244059.post@talk.nabble.com>	<609353e70909011501n43fa451bu8973e7a3316754b9@mail.gmail.com>
	<003001ca2c73$38dc66f0$aa9534d0$@com>
Message-ID: <4A9F8BFE.9050205@mweb.co.za>

Hi Fernando

Did you consider applying your efforts to HWGUI or HMG? I know nothing of HMG, 
but I think HWGUI would benefit from some internal changes, and yet you would 
still have something of a community which already exists. The command syntax is 
quite similar to FiveWin.

Why did you decide to start from scratch? It seems we will have yet another GUI, 
and there are quite a few.

I used to use Clip4Win which had in my opinion a very much cleaner object model 
than what I have seen of HWGUI or FiveWin.

I hope I don't sound too negative, I am sincerely interested in your 
motivations. Cool name anyway.

Regards
Alex



From sscc at mweb.co.za  Thu Sep  3 07:13:11 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Sep  3 07:13:14 2009
Subject: [Harbour] ActiveX
In-Reply-To: <20090903055857.GA6924@uran.home.aster.pl>
References: <4A96A903.7050808@mweb.co.za> <25178548.post@talk.nabble.com>
	<20090903055857.GA6924@uran.home.aster.pl>
Message-ID: <4A9FA4C7.1050003@mweb.co.za>

Przemyslaw Czerpak wrote:

> I can add such method to our new AX code if FindConnectionPoint() fails.
> Anyhow I would like to ask Mindaugas to accept it and you and Alex to make
> tests.

I Didn't get near ActiveX! When I compile I get :

====
Compiling 'hellox.prg'...
hellox.prg(0) Warning W0001  Ambiguous reference 'OMAINWINDOW'
hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OMAINWINDOW'
hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OMAINWINDOW'
hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OMSCAL'
hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OBPTI'
hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OMAINWINDOW'
hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OMSCAL'
hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OMAINWINDOW'
hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OBPTI'
hellox.prg(0) Warning W0025  Class 'HWGACTIVEX' not known in declaration of 'SEL
F'
Wrong type of codeblock parameter, is: 1, should be: 8
hellox.prg(0) Warning W0025  Class 'HWGACTIVEX' not known in declaration of 'SEL
F'
hellox.prg(0) Warning W0025  Class 'HWGACTIVEX' not known in declaration of 'SEL
F'
Lines 4191, Functions/Procedures 8
Generating C source output to 'hellox.c'... Done.
===

I seem to be committing a range of sins, although these messages are new to me. 
I changed my original a bit to try and fix them, the code is below.

I don't know why oMainWindow is "ambiguous".

The line numbers appear to be missing for the "Class not known" and I do not 
know how to correct.

The message about the differing scopes in the codeblock have no line number at 
all. I guess oMSCal is the culprit, but I did not know this was illegal. A 
lookup function to supply text equivalents of the scope types (1 and 8) would be 
nice.

Regards
Alex

===
#include "hbclass.ch"
#include "windows.ch"
#include "guilib.ch"


static oMSCAL
static oBPTI

memvar oMainWindow
public oMainWindow


function main()

     INIT WINDOW oMainWindow MAIN TITLE "Hello ActiveX"  ;
             AT 200, 0 SIZE 420, 300

     MENU OF oMainWindow
         MENU TITLE "&File"
             MENUITEM "Test &MSCal" ACTION { || MSCALInit() }
             MENUITEM "&Change Date" ACTION { || oMSCAL:NextDay() }
             SEPARATOR
             MENUITEM "Test &BPTI" ACTION { || BPTIInit() }
             SEPARATOR
             MENUITEM "E&xit" ACTION { || EndWindow() }
         ENDMENU
     ENDMENU

     ACTIVATE WINDOW oMainWindow

     oMSCAL := nil
     oBPTI := nil

return nil


procedure MSCALInit()

     oMSCAL := HWGActiveX():New( oMainWindow, "MSCAL.Calendar", 0, 0, 300, 300 )

return


procedure BPTIInit()

     oBPTI := HWGActiveX():New( oMainWindow, "BPTI.CoBpTiX1", 0, 0, 300, 300 )

return



CLASS HWGActiveX FROM HControl

     CLASS VAR winclass INIT "ACTIVEX"

     DATA oOLE INIT NIL

     METHOD New
     METHOD Event

     ERROR HANDLER OnError

ENDCLASS


METHOD New( oWnd, cProgId, nTop, nLeft, nWidth, nHeight ) CLASS HWGActiveX

     local nStyle
     local hWnd

     nStyle := WS_CHILD + WS_VISIBLE + WS_CLIPCHILDREN
     //Super:New( oWnd, , nStyle, nLeft, nTop, nWidth, nHeight )
     WIN_AxInit()
     hWnd := WAPI_CreateWindowEX( 0, "AtlAxWin", cProgId, nStyle, nLeft, nTop, 
nWidth, nHeight, WIN_N2P( oWnd:handle ), 0 )
     ::oOLE := WIN_AxGetControl( hWnd, { | event, ... | ::Event( event, ... ) } )

return self


METHOD Event( event, ... ) CLASS HWGActiveX

     MsgInfo( HB_ValToStr( event ) )

return NIL


METHOD OnError() CLASS HWGActiveX

return HB_ExecFromArray( ::oOLE, __GetMessage(), HB_AParams() )
From druzus at acn.waw.pl  Thu Sep  3 07:19:56 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep  3 07:20:02 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4A9FA4C7.1050003@mweb.co.za>
References: <4A96A903.7050808@mweb.co.za> <25178548.post@talk.nabble.com>
	<20090903055857.GA6924@uran.home.aster.pl>
	<4A9FA4C7.1050003@mweb.co.za>
Message-ID: <20090903111956.GA16309@uran.home.aster.pl>

On Thu, 03 Sep 2009, Alex Strickland wrote:
> I Didn't get near ActiveX! When I compile I get :
> ====
> Compiling 'hellox.prg'...
> hellox.prg(0) Warning W0001  Ambiguous reference 'OMAINWINDOW'
> hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OMAINWINDOW'
> hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OMAINWINDOW'
> hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OMSCAL'
> hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OBPTI'
> hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OMAINWINDOW'
> hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OMSCAL'
> hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OMAINWINDOW'
> hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OBPTI'
> hellox.prg(0) Warning W0025  Class 'HWGACTIVEX' not known in declaration of 'SEL
> F'
> Wrong type of codeblock parameter, is: 1, should be: 8
> hellox.prg(0) Warning W0025  Class 'HWGACTIVEX' not known in declaration of 'SEL
> F'
> hellox.prg(0) Warning W0025  Class 'HWGACTIVEX' not known in declaration of 'SEL
> F'
> Lines 4191, Functions/Procedures 8
> Generating C source output to 'hellox.c'... Done.
> ===
> I seem to be committing a range of sins, although these messages are new to 
> me. I changed my original a bit to try and fix them, the code is below.
> I don't know why oMainWindow is "ambiguous".
> The line numbers appear to be missing for the "Class not known" and I do 
> not know how to correct.
> The message about the differing scopes in the codeblock have no line number 
> at all. I guess oMSCal is the culprit, but I did not know this was illegal. 
> A lookup function to supply text equivalents of the scope types (1 and 8) 
> would be nice.

I can only guess that you sync SVN after few days and you haven't made
clean build. Please recompile whole Harbour code, i.e.
   make clean
   make

best regards,
Przemek
From fernando_athayde at yahoo.com.br  Thu Sep  3 07:21:25 2009
From: fernando_athayde at yahoo.com.br (Fernando Athayde)
Date: Thu Sep  3 07:21:31 2009
Subject: Res: [Harbour] ActiveX
In-Reply-To: <4A9FA4C7.1050003@mweb.co.za>
References: <4A96A903.7050808@mweb.co.za> <25178548.post@talk.nabble.com>
	<20090903055857.GA6924@uran.home.aster.pl>
	<4A9FA4C7.1050003@mweb.co.za>
Message-ID: <679091.42091.qm@web52210.mail.re2.yahoo.com>

why memvar and public in same time?
you should to put only public

regards,
Fernando




________________________________
De: Alex Strickland <sscc@mweb.co.za>
Para: Harbour Project Main Developer List. <harbour@harbour-project.org>
Enviadas: Quinta-feira, 3 de Setembro de 2009 8:13:11
Assunto: Re: [Harbour] ActiveX

Przemyslaw Czerpak wrote:

> I can add such method to our new AX code if FindConnectionPoint() fails.
> Anyhow I would like to ask Mindaugas to accept it and you and Alex to make
> tests.

I Didn't get near ActiveX! When I compile I get :

====
Compiling 'hellox.prg'...
hellox.prg(0) Warning W0001  Ambiguous reference 'OMAINWINDOW'
hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OMAINWINDOW'
hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OMAINWINDOW'
hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OMSCAL'
hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OBPTI'
hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OMAINWINDOW'
hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OMSCAL'
hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OMAINWINDOW'
hellox.prg(0) Warning W0002  Ambiguous reference, assuming memvar 'OBPTI'
hellox.prg(0) Warning W0025  Class 'HWGACTIVEX' not known in declaration of 'SEL
F'
Wrong type of codeblock parameter, is: 1, should be: 8
hellox.prg(0) Warning W0025  Class 'HWGACTIVEX' not known in declaration of 'SEL
F'
hellox.prg(0) Warning W0025  Class 'HWGACTIVEX' not known in declaration of 'SEL
F'
Lines 4191, Functions/Procedures 8
Generating C source output to 'hellox.c'... Done.
===

I seem to be committing a range of sins, although these messages are new to me. I changed my original a bit to try and fix them, the code is below.

I don't know why oMainWindow is "ambiguous".

The line numbers appear to be missing for the "Class not known" and I do not know how to correct.

The message about the differing scopes in the codeblock have no line number at all. I guess oMSCal is the culprit, but I did not know this was illegal. A lookup function to supply text equivalents of the scope types (1 and 8) would be nice.

Regards
Alex

===
#include "hbclass.ch"
#include "windows.ch"
#include "guilib.ch"


static oMSCAL
static oBPTI

memvar oMainWindow
public oMainWindow


function main()

    INIT WINDOW oMainWindow MAIN TITLE "Hello ActiveX"  ;
            AT 200, 0 SIZE 420, 300

    MENU OF oMainWindow
        MENU TITLE "&File"
            MENUITEM "Test &MSCal" ACTION { || MSCALInit() }
            MENUITEM "&Change Date" ACTION { || oMSCAL:NextDay() }
            SEPARATOR
            MENUITEM "Test &BPTI" ACTION { || BPTIInit() }
            SEPARATOR
            MENUITEM "E&xit" ACTION { || EndWindow() }
        ENDMENU
    ENDMENU

    ACTIVATE WINDOW oMainWindow

    oMSCAL := nil
    oBPTI := nil

return nil


procedure MSCALInit()

    oMSCAL := HWGActiveX():New( oMainWindow, "MSCAL.Calendar", 0, 0, 300, 300 )

return


procedure BPTIInit()

    oBPTI := HWGActiveX():New( oMainWindow, "BPTI.CoBpTiX1", 0, 0, 300, 300 )

return



CLASS HWGActiveX FROM HControl

    CLASS VAR winclass INIT "ACTIVEX"

    DATA oOLE INIT NIL

    METHOD New
    METHOD Event

    ERROR HANDLER OnError

ENDCLASS


METHOD New( oWnd, cProgId, nTop, nLeft, nWidth, nHeight ) CLASS HWGActiveX

    local nStyle
    local hWnd

    nStyle := WS_CHILD + WS_VISIBLE + WS_CLIPCHILDREN
    //Super:New( oWnd, , nStyle, nLeft, nTop, nWidth, nHeight )
    WIN_AxInit()
    hWnd := WAPI_CreateWindowEX( 0, "AtlAxWin", cProgId, nStyle, nLeft, nTop, nWidth, nHeight, WIN_N2P( oWnd:handle ), 0 )
    ::oOLE := WIN_AxGetControl( hWnd, { | event, ... | ::Event( event, ... ) } )

return self


METHOD Event( event, ... ) CLASS HWGActiveX

    MsgInfo( HB_ValToStr( event ) )

return NIL


METHOD OnError() CLASS HWGActiveX

return HB_ExecFromArray( ::oOLE, __GetMessage(), HB_AParams() )
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour



      ____________________________________________________________________________________
Veja quais s?o os assuntos do momento no Yahoo! +Buscados
http://br.maisbuscados.yahoo.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090903/fa83470b/attachment.html
From sscc at mweb.co.za  Thu Sep  3 07:25:38 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Sep  3 07:25:40 2009
Subject: Res: [Harbour] ActiveX
In-Reply-To: <679091.42091.qm@web52210.mail.re2.yahoo.com>
References: <4A96A903.7050808@mweb.co.za>
	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FA4C7.1050003@mweb.co.za>
	<679091.42091.qm@web52210.mail.re2.yahoo.com>
Message-ID: <4A9FA7B2.9060306@mweb.co.za>

Fernando Athayde wrote:
> why memvar and public in same time?
> you should to put only public

I like to compile with full warnings so I always put

memvar x

public x

If you mean why am I mixing memvars and statics, only because I was trying a few 
things to make sense of the crazy compiler messages. I think Przemyslaw is 
correct though and I am rebuilding...

Regards
Alex

From elart at elart.it  Thu Sep  3 07:45:19 2009
From: elart at elart.it (elart)
Date: Thu Sep  3 07:45:25 2009
Subject: [Harbour] My note on how to compile... Harbour and to test netio on
	Ubuntu Linux
Message-ID: <rcPvk5kJ.1251978319.6235270.marcobra@82.105.36.210>


HOW TO BUILD AND INSTALL HARBOUR FROM SOURCE AND CROSS COMPILE HARBOUR
FOR WIN ON LINUX
=======================================================================================

*----------------------------------------
( Tested on Ubuntu 9.04 and Ubuntu 9.10 )
*----------------------------------------

To get main reference please read the INSTALL file under the harbour
source directory

You need to be connected to the Net.

First please  enable the "universe" repositories from menu System
&#8594; Administration &#8594; Software Sources and confirm repositorie
reload
Please install these deb packages... so you have almost all packages to
compile contrib libraries and related stuffs

Please open a terminal window Applications &#8594; Accessories &#8594;
Terminal and type or copy and paste (one row a time then press <enter>)

sudo apt-get update

When you use "sudo" the system ask you for a password, please typein
your user password: you will not see any feedback (i.e terminal chars)
when you type your password, so type the password, then press enter;

sudo apt-get install wget cvs rcs build-essential ncurses-dev
libslang2-dev tk8.3-dev unixodbc-dev subversion libncurses-dev
libx11-dev libgpm-dev libcurl4-openssl-dev firebird2.1-dev
libfreeimage-dev libgd2-xpm-dev libmysqlclient15-dev libpq-dev
libqt4-dev liballegro4.2-dev libsqlite3-dev wine dosemu-freedos mingw32

Then update from svn Harbour

1) - Please open a terminal window Applications &#8594; Accessories
&#8594; Terminal
2) - Please check the requested packages are installed see above;
3) - Type the commands rows below you can also do a copy and paste of the
row, please copy and paste a row a time then press enter;

mkdir $HOME/src
cd $HOME/src
svn co
https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/harbour
harbour
cd $HOME/src/harbour
export HB_BIN_INSTALL=/usr/bin
export HB_INSTALL_PREFIX=/usr/bin
export HB_LIB_INSTALL=/usr/lib
export HB_INC_INSTALL=/usr/include
make
sudo -E make install

When you use "sudo" the system ask you for a password, please typein
your user password: you will not see any feedback (i.e terminal chars)
when you type your password, so type the password, then press enter;

to verify your build date of harbour, type:
harbour -build

to generate Harbour for Win

cd $HOME/src/harbour/; make HB_PLATFORM=win

export HB_INSTALL_PREFIX=/tmp/hbwin; make install HB_PLATFORM=win

if you want install hbwin in a different directory than /tmp/hbwin with
more stricted directory permissions... you must use sudo to install it:

export HB_INSTALL_PREFIX=/usr/bin/hbwin; sudo -E make install
HB_PLATFORM=win


***********************************
Tip: if you want to automate the update and compile from svn please put
this command into a file for example: MBaggharbour2_svn so type
mkdir $HOME/src
cd $HOME/src

gedit MBaggharbour_svn

Copy and paste the contents below into the file:


#!/bin/bash
clear
echo "----------------------------------------------------------------"
echo "Please wait connecting to svn server to fetch Harbour updates..."
echo "----------------------------------------------------------------"
cd $HOME/src
svn co
https://harbour-project.svn.sourceforge.net/svnroot/harbour-project/trunk/harbour
harbour

sleep 3

cd $HOME/src/harbour
export HB_BIN_INSTALL=/usr/bin
export HB_INSTALL_PREFIX=/usr/bin
export HB_LIB_INSTALL=/usr/lib
export HB_INC_INSTALL=/usr/include
#export HB_CONTRIBLIBS="hbqt hbpgsql hbhpdf rddsql hbsqlit3 hbodbc
gtqtc"

#hbverfix

r='n'

echo "Do you want to run a make clean before to compile sources [Ny]
Please answer in 4 sec"
read -t 4 r


if [[ $r == 'Y' || $r == 'y' ]]; then
	make clean; make; sudo -E make install
else
	make; sudo -E make install
fi

cw='n'
echo "Do you want to compile Harbour for Win [Ny] Please answer in 30
sec or press enter"
read -t 30 cw

if [[ $cw == 'Y' || $cw == 'y' ]]; then
	unset cw
	cd $HOME/harbour
	unset HB_BIN_INSTALL
	unset HB_INSTALL_PREFIX
	unset HB_LIB_INSTALL
	unset HB_INC_INSTALL
	old_path=$PATH
	export PATH=/tmp/hbwin/bin:$PATH
	make HB_PLATFORM=win
	export HB_INSTALL_PREFIX=/tmp/hbwin
	make install HB_PLATFORM=win
	PATH=$old_path
fi




--------------------------
Please save and exit from gedit editor then please give to this script
the execute permission, type:
chmod 700 MBaggharbour_svn

Then to run it...

cd $HOME/src
./MBaggharbour_svn


then inside /tmp/hbwin/bin you will find hbw* scripts which you can use
to build windows binaries.


Point this envvar to the directory where native Harbour executables for
your host platform can be found:
HB_BIN_COMPILE=<HARBOUR_NATIVE_BUILD_DIR>\bin
If you leave this value empty, the make system will try to autodetect it,
so in practice all you have to do is to create a native build first (no
'install' required), then create the cross-build. If you set this value
manually, it may be useful to know that only harbour, hbpp and hbmk2
executables are required for a cross-build process to succeed.

*********************************************************
Howto compile the harbour/contrib/hbnetio/test/netiotst
**********************************************************

# cd $NOME/src/harbour/contrib/hbnetio/tests

Just add this directory to you PATH, i.e.:

# export PATH=/tmp/hbwin/bin:$PATH

to your *nix PATH and then:

# hbwmk -static -n -w -es2 -mt -gtwin netiotst

To check the file generated

# file netiotst.exe
netiotst.exe: PE32 executable for MS Windows (GUI) Intel 80386 32-bit

To run the test...

wine ./netiotst.exe



********************************************************************
> When all is compiled fine, i must run the complied file inside dosemu... right ?

No. DOSEMU is for pure DOS emulation. Win32 programs should be executed
using WINE, i.e.
wine ./netiotst.exe
********************************************************************

so

wine ./netiotst.exe

to debug something

WINEDEBUG=relay; wine ./netiotst.exe

or double click using nautilus on the generate exe file

we can test if the exe is running by typing
ps -el | grep -i netiotst.exe

You can also register WINE in binfmt and then you can execute windows
programs just like native linux ones if they only have execute attribute
(x).


Then please read this

http://lists.harbour-project.org/pipermail/harbour/2009-September/024351.html
http://lists.harbour-project.org/pipermail/harbour/2009-September/024352.html


*********************************************
To test netio with a server and client app
*********************************************

mkdir $HOME/hb_testio
mkdir $HOME/hb_testio/data
cd $HOME/hb_testio


We can create 2 prg files... the netio_client.prg and the netio_server.prg

So we can use gedit to create the netio_client.prg file

gedit netio_client.prg



-- Then copy and paste the contents below:

#define DBNAME    "net:data/_tst_"

request DBFCDX

proc main( cServer, cPort )
   local pSockSrv

   set exclusive off
   rddSetDefault( "DBFCDX" )
?"start netio app client applications..."
   if empty( cServer )
      cServer := '127.0.0.1'
   endif
   if empty( cPort )
      cPort := '63000'
   endif

   ?
   ? "NETIO_CONNECT():", cServer, int( val( cPort ) ), netio_connect(
cServer, int( val( cPort ) ) )
   ?

   createdb( DBNAME )
   testdb( DBNAME )
   wait

   return

proc createdb( cName )
   local n
if !dbExists( DBNAME )
   dbCreate( cName, {{"F1", "C", 20, 0},;
                     {"F2", "M",  4, 0},;
                     {"F3", "N", 10, 2},;
                     {"F4", "T",  8, 0}} )
   ? "create neterr:", neterr(), hb_osError()
   use (cName)
   ? "use neterr:", neterr(), hb_osError()
   while lastrec() < 100
      dbAppend()
      n := recno() - 1
      field->F1 := chr( n % 26 + asc( "A" ) ) + " " + time()
      field->F2 := field->F1
      field->F3 := n / 100
      field->F4 := hb_dateTime()
   enddo
   index on field->F1 tag T1
   index on field->F3 tag T3
   index on field->F4 tag T4
   close
   ?
else
   ? DBNAME, 'Already exists'
endif
return

proc testdb( cName )
   local i, j
   ?
   ? 'using:',time()
   use (cName)
   ? "used:", time(), used()
   ? "nterr:", neterr()
   ? "alias:", alias()
   ? "lastrec:", lastrec()
   ? "ordCount:", ordCount()
   for i:=1 to ordCount()
      ordSetFocus( i )
      ? i, "name:", ordName(), "key:", ordKey(), "keycount:",
ordKeyCount()
   next
   ordSetFocus( 1 )
   dbgotop()
   while !eof()
      if ! field->F1 == field->F2
         ? "error at record:", recno()
         ? "  ! '" + field->F1 + "' == '" + field->F2 + "'"
      endif
      dbSkip()
   enddo
   i := row()
   j := col()
   dbgotop()

   ? 'locking:',time()
   ? 'locked:', rlock(), time()

   wait

   browse()
   setpos( i, j )
   close

   return




- Save and exit




-- Then we must create the netio_server.prg

gedit netio_server.prg


-- Then copy and paste the contents below:



proc main( cServer, cPort )
   local pListenSocket

   if empty( cPort )
      cPort := '63000'
   endif
//   if empty( cServer )
//      cServer := '127.0.0.1'
//   endif

   pListenSocket := netio_mtserver( val( cPort ), cServer )
   if empty( pListenSocket )
      ? "Cannot start server. press a key to exit..."
      inkey(0)
   else
      wait "Press any key to stop NETIO server."
      netio_serverstop( pListenSocket )
      pListenSocket := NIL
   endif
   return



- Save and exit

Then we must compile them...

export PATH=/tmp/hbwin/bin:$PATH; hbwmk -static -n -w -es2 -gtwin
netio_client.prg; hbwmk -static -n -w -es2 -gtwin -mt netio_server.prg


Then to test the netio apps

A) If we are on the same pc we must open two terminal (1 e 2) on terminal
(1) type:
wine ./netio_server.exe

on the terminal 2 type:
wine ./netio_client.exe

B) if we have two pc on the net (A and B) on pc A open a terminal and
type:

ifconfig

to get the ip number, then we can start the server

wine ./netio_server.exe

on the pc B we must copy the netio_client.exe and run it

wine ./netio_client.exe ip_of_pc_where_netio_server_is_running



****************************************************************************************************
Przemek note...
****************************************************************************************************
NETIO server application has to be linked with MT HVM version.
Please use -mt hbwmk switch to compile server.

> > give me the wine app started window with the message it cannot start 
> > server...
> > Can you test my app in your enviroment...
> > in attach the hb_testio.tar.gz
It works if you compile netioserver.prg with -mt switch.
I tested Windows and Linux binaries.
BTW for normal usage I suggest to always use native binaries.
If you want to run server on Linux machine then create native
Linux netio server binaries. And of course native client binaries.
Of course you can connect to the one server from different stations
working with WIN, DOS, OS2 or different *nixes.

And remove from netioserver.prg this code:

   if empty( cServer )
      cServer := '127.0.0.1'
   endif

it reduces connections to 127.0.0.1 only so such server cannot be accessed
remotely. Use empty value or 0.0.0.0 if you want to give access from
different interfaces without any limitation.
****************************************************************************************************
From qiinfo at ig.com.br  Thu Sep  3 07:57:35 2009
From: qiinfo at ig.com.br (Rossine)
Date: Thu Sep  3 07:57:41 2009
Subject: [Harbour] ViaNemo: New Framework Opensource for Harbour
In-Reply-To: <003001ca2c73$38dc66f0$aa9534d0$@com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
	<25233147.post@talk.nabble.com>
	<20090901072102.GB21984@uran.home.aster.pl>
	<008f01ca2ad6$e3c84000$ab58c000$@com>
	<133778360909010707i30d093f6ke0fc5878c11dfa5@mail.gmail.com>
	<000601ca2b0e$c9d7a590$5d86f0b0$@com>
	<25244059.post@talk.nabble.com>
	<609353e70909011501n43fa451bu8973e7a3316754b9@mail.gmail.com>
	<003001ca2c73$38dc66f0$aa9534d0$@com>
Message-ID: <25274557.post@talk.nabble.com>


Hello Fernando, 

When can we start testing ViaNemo ?

Regards,

Rossine.

-- 
View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-12382--trunk-harbour-tp25231702p25274557.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From sscc at mweb.co.za  Thu Sep  3 08:02:25 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Sep  3 08:02:26 2009
Subject: [Harbour] ActiveX
In-Reply-To: <20090903111956.GA16309@uran.home.aster.pl>
References: <4A96A903.7050808@mweb.co.za>
	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FA4C7.1050003@mweb.co.za>
	<20090903111956.GA16309@uran.home.aster.pl>
Message-ID: <4A9FB051.7020405@mweb.co.za>

Przemyslaw Czerpak wrote:

> I can only guess that you sync SVN after few days and you haven't made
> clean build. Please recompile whole Harbour code, i.e.

You were correct.

The good news is that both activex controls load without error, I have done no 
very deep tests but things seem fine.

The bad news is that on exit, the application GPFs. I have done a build with 
debugging enabled and then I "attach" to the process from VS 2008. The GPF is 
within crt0.c.

This Debug output "may" help:

'hellox.exe': Unloaded 'C:\Windows\System32\atl.dll'
'hellox.exe': Unloaded 'C:\Windows\System32\MSCAL.OCX'
First-chance exception at 0x0041501d in hellox.exe: 0xC0000005: Access violation 
reading location 0x100103d0.
Unhandled exception at 0x0041501d in hellox.exe: 0xC0000005: Access violation 
reading location 0x100103d0.

I see that atl.dll is unloaded before MSCAL.OCX, perhaps that is a problem?

Regards
Alex

From druzus at users.sourceforge.net  Thu Sep  3 08:02:23 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Thu Sep  3 08:02:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12398] trunk/harbour
Message-ID: <E1MjB1D-0005ap-AG@3kljzd1.ch3.sourceforge.com>

Revision: 12398
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12398&view=rev
Author:   druzus
Date:     2009-09-03 12:02:22 +0000 (Thu, 03 Sep 2009)

Log Message:
-----------
2009-09-03 14:02 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/compiler/hbmain.c
    ! added missing pFunc initialization in symbol structure.
      It was causing GPF when C code was attached to .prg file using
      HB_INLINE() {} or #pragma BEGIN/ENDDUMP with HB_FUNC_STATIC()
      inside. Many thanks to Andi for information about the problem.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/compiler/hbmain.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From sscc at mweb.co.za  Thu Sep  3 08:05:13 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Sep  3 08:05:13 2009
Subject: [Harbour] ActiveX
In-Reply-To: <20090903111956.GA16309@uran.home.aster.pl>
References: <4A96A903.7050808@mweb.co.za>
	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FA4C7.1050003@mweb.co.za>
	<20090903111956.GA16309@uran.home.aster.pl>
Message-ID: <4A9FB0F9.4060304@mweb.co.za>

Too quick, the full log:

'hellox.exe': Loaded 'C:\Users\Alex\ECR6.4\tests\hellox.exe', Symbols loaded.
'hellox.exe': Loaded 'C:\Windows\System32\ntdll.dll'
'hellox.exe': Loaded 'C:\Windows\System32\kernel32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\user32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\gdi32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\advapi32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\rpcrt4.dll'
'hellox.exe': Loaded 'C:\Windows\System32\winspool.drv'
'hellox.exe': Loaded 'C:\Windows\System32\msvcrt.dll'
'hellox.exe': Loaded 
'C:\Windows\winsxs\x86_microsoft.windows.common-controls_6595b64144ccf1df_5.82.6001.18000_none_886786f450a74a05\comctl32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\comdlg32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\shlwapi.dll'
'hellox.exe': Loaded 'C:\Windows\System32\shell32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\ole32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\oleaut32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\imm32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\msctf.dll'
'hellox.exe': Loaded 'C:\Windows\System32\lpk.dll'
'hellox.exe': Loaded 'C:\Windows\System32\usp10.dll'
'hellox.exe': Loaded 
'C:\Windows\winsxs\x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.6002.18005_none_5cb72f96088b0de0\comctl32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\uxtheme.dll'
The thread 'Win32 Thread' (0x1274) has exited with code 0 (0x0).
'hellox.exe': Loaded 'C:\Windows\System32\atl.dll'
'hellox.exe': Loaded 'C:\Windows\System32\clbcatq.dll'
'hellox.exe': Loaded 'C:\Windows\System32\MSCAL.OCX', Binary was not built with 
debug information.
'hellox.exe': Unloaded 'C:\Windows\System32\atl.dll'
'hellox.exe': Unloaded 'C:\Windows\System32\MSCAL.OCX'
First-chance exception at 0x0041501d in hellox.exe: 0xC0000005: Access violation 
reading location 0x100103d0.
Unhandled exception at 0x0041501d in hellox.exe: 0xC0000005: Access violation 
reading location 0x100103d0.

I see atl.dll is unloaded twice?

Regards
Alex


From druzus at acn.waw.pl  Thu Sep  3 08:27:26 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep  3 08:27:33 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4A9FB051.7020405@mweb.co.za>
References: <4A96A903.7050808@mweb.co.za> <25178548.post@talk.nabble.com>
	<20090903055857.GA6924@uran.home.aster.pl>
	<4A9FA4C7.1050003@mweb.co.za>
	<20090903111956.GA16309@uran.home.aster.pl>
	<4A9FB051.7020405@mweb.co.za>
Message-ID: <20090903122726.GA28968@uran.home.aster.pl>

On Thu, 03 Sep 2009, Alex Strickland wrote:
>> I can only guess that you sync SVN after few days and you haven't made
>> clean build. Please recompile whole Harbour code, i.e.
> You were correct.

Fine,

> The bad news is that on exit, the application GPFs. I have done a build 
> with debugging enabled and then I "attach" to the process from VS 2008. The 
> GPF is within crt0.c.
> This Debug output "may" help:
> 'hellox.exe': Unloaded 'C:\Windows\System32\atl.dll'
> 'hellox.exe': Unloaded 'C:\Windows\System32\MSCAL.OCX'
> First-chance exception at 0x0041501d in hellox.exe: 0xC0000005: Access 
> violation reading location 0x100103d0.
> Unhandled exception at 0x0041501d in hellox.exe: 0xC0000005: Access 
> violation reading location 0x100103d0.
> I see that atl.dll is unloaded before MSCAL.OCX, perhaps that is a problem?

atl.dll is unloaded when HVM quits at the very end part of releasing HVM
structures. If it causes the problem then we can look for workarounds
though this is probably problem with some other code which does not free
objects holding references to our ACX controls. I can only guess it's HWGUI.
It does not uses autodestructors so it's highly possible.
Please comment in contrib/hbwin/axcore.c[78] this line:

      FreeLibrary( s_hLib );

and check if it resolves the problem.
If not then you can also (or instead) comment in contrib/hbwin/oleinit.c[79]:

      OleInitialize( NULL );

Please inform me if it resolves the problem.

best regards,
Przemek
From sscc at mweb.co.za  Thu Sep  3 08:47:09 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Sep  3 08:47:11 2009
Subject: [Harbour] ActiveX
In-Reply-To: <20090903122726.GA28968@uran.home.aster.pl>
References: <4A96A903.7050808@mweb.co.za>
	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FA4C7.1050003@mweb.co.za>	<20090903111956.GA16309@uran.home.aster.pl>	<4A9FB051.7020405@mweb.co.za>
	<20090903122726.GA28968@uran.home.aster.pl>
Message-ID: <4A9FBACD.2040404@mweb.co.za>

Przemyslaw Czerpak wrote:
> Please comment in contrib/hbwin/axcore.c[78] this line:
> 
>       FreeLibrary( s_hLib );
> 
> and check if it resolves the problem.

static void hb_oleAxExit( void* cargo )
{
    HB_SYMBOL_UNUSED( cargo );

    if( s_hLib )
    {
       s_pAtlAxGetControl = NULL;

MessageBox(NULL, "FreeLibrary", "", MB_OK);
       //FreeLibrary( s_hLib );

       s_hLib = NULL;
    }
}

This didn't help.

> If not then you can also (or instead) comment in contrib/hbwin/oleinit.c[79]:
> 
>       OleInitialize( NULL );
> 
> Please inform me if it resolves the problem.

void hb_oleInit()
{
    if( ! s_iOleInit )
    {
MessageBox(NULL, "OleInitialize", "", MB_OK);
       //OleInitialize( NULL );
       hb_vmAtQuit( hb_ole_exit, NULL );
    }
    s_iOleInit++;
}

It did not resolve it.

Both together did not help either. Note though, that I did not see the 
MessageBox with "FreeLibrary" with both changes so I guess the bad memory access 
had already occurred. This was the debug output in this case:

'hellox.exe': Loaded 'C:\Users\Alex\ECR6.4\tests\hellox.exe', Symbols loaded.
'hellox.exe': Loaded 'C:\Windows\System32\ntdll.dll'
'hellox.exe': Loaded 'C:\Windows\System32\kernel32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\user32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\gdi32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\advapi32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\rpcrt4.dll'
'hellox.exe': Loaded 'C:\Windows\System32\winspool.drv'
'hellox.exe': Loaded 'C:\Windows\System32\msvcrt.dll'
'hellox.exe': Loaded 
'C:\Windows\winsxs\x86_microsoft.windows.common-controls_6595b64144ccf1df_5.82.6001.18000_none_886786f450a74a05\comctl32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\comdlg32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\shlwapi.dll'
'hellox.exe': Loaded 'C:\Windows\System32\shell32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\ole32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\oleaut32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\imm32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\msctf.dll'
'hellox.exe': Loaded 'C:\Windows\System32\lpk.dll'
'hellox.exe': Loaded 'C:\Windows\System32\usp10.dll'
'hellox.exe': Loaded 
'C:\Windows\winsxs\x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.6002.18005_none_5cb72f96088b0de0\comctl32.dll'
'hellox.exe': Loaded 'C:\Windows\System32\uxtheme.dll'
The thread 'Win32 Thread' (0xe1c) has exited with code 0 (0x0).
'hellox.exe': Loaded 'C:\Windows\System32\atl.dll'
'hellox.exe': Loaded 'C:\Windows\System32\clbcatq.dll'
'hellox.exe': Loaded 'C:\Windows\System32\MSCAL.OCX', Binary was not built with 
debug information.
'hellox.exe': Unloaded 'C:\Windows\System32\MSCAL.OCX'
First-chance exception at 0x1000ba5e in hellox.exe: 0xC0000005: Access violation 
reading location 0x1000ba5e.
Unhandled exception at 0x1000ba5e in hellox.exe: 0xC0000005: Access violation 
reading location 0x1000ba5e.

Regards
Alex
From sscc at mweb.co.za  Thu Sep  3 09:07:24 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Sep  3 09:07:25 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4A9FBACD.2040404@mweb.co.za>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FA4C7.1050003@mweb.co.za>	<20090903111956.GA16309@uran.home.aster.pl>	<4A9FB051.7020405@mweb.co.za>	<20090903122726.GA28968@uran.home.aster.pl>
	<4A9FBACD.2040404@mweb.co.za>
Message-ID: <4A9FBF8C.8080409@mweb.co.za>

Hi

If I write:

     MsgInfo( "Activate" )
     ACTIVATE WINDOW oMainWindow

     MsgInfo( "Setting oMSCAL to nil" )
     oMSCAL := nil
     MsgInfo( "Setting oBPTI to nil" )
     oBPTI := nil

Then I see "Activate" but not "Setting oMSCAL to nil". It is when the container 
window is destroyed that the ActiveX is destroyed.

The last "good" line is :

             mainret = _tWinMain( (HINSTANCE)&__ImageBase,
                                  NULL,
                                  lpszCommandLine,
                                  StartupInfo.dwFlags & STARTF_USESHOWWINDOW
                                       ? StartupInfo.wShowWindow
                                       : SW_SHOWDEFAULT
                                 );

from crt0.c.

I wonder if I am doing the wrong thing with the window creation.

Should I try a complete /DEBUG build of Harbour and HWGUI?

Regards
Alex

From druzus at acn.waw.pl  Thu Sep  3 09:26:33 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep  3 09:26:40 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4A9FBACD.2040404@mweb.co.za>
References: <4A96A903.7050808@mweb.co.za> <25178548.post@talk.nabble.com>
	<20090903055857.GA6924@uran.home.aster.pl>
	<4A9FA4C7.1050003@mweb.co.za>
	<20090903111956.GA16309@uran.home.aster.pl>
	<4A9FB051.7020405@mweb.co.za>
	<20090903122726.GA28968@uran.home.aster.pl>
	<4A9FBACD.2040404@mweb.co.za>
Message-ID: <20090903132633.GA10425@uran.home.aster.pl>

On Thu, 03 Sep 2009, Alex Strickland wrote:
> static void hb_oleAxExit( void* cargo )
> {
>    HB_SYMBOL_UNUSED( cargo );
>    if( s_hLib )
>    {
>       s_pAtlAxGetControl = NULL;
> MessageBox(NULL, "FreeLibrary", "", MB_OK);
>       //FreeLibrary( s_hLib );
>       s_hLib = NULL;
>    }
> }
> This didn't help.
> void hb_oleInit()
> {
>    if( ! s_iOleInit )
>    {
> MessageBox(NULL, "OleInitialize", "", MB_OK);
>       //OleInitialize( NULL );
>       hb_vmAtQuit( hb_ole_exit, NULL );
>    }
>    s_iOleInit++;
> }
> It did not resolve it.
> Both together did not help either. Note though, that I did not see the 
> MessageBox with "FreeLibrary" with both changes so I guess the bad memory 
> access had already occurred.

so it's not the exact reason of the problem.
I'm afraid that in such case I cannot help you and you will need help from
real MS-Windows developers. Maybe Mindaugas or Pritpal can help.

best regards,
Przemek
From sscc at mweb.co.za  Thu Sep  3 09:33:51 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Sep  3 09:33:52 2009
Subject: [Harbour] ActiveX
In-Reply-To: <20090903132633.GA10425@uran.home.aster.pl>
References: <4A96A903.7050808@mweb.co.za>
	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FA4C7.1050003@mweb.co.za>	<20090903111956.GA16309@uran.home.aster.pl>	<4A9FB051.7020405@mweb.co.za>	<20090903122726.GA28968@uran.home.aster.pl>	<4A9FBACD.2040404@mweb.co.za>
	<20090903132633.GA10425@uran.home.aster.pl>
Message-ID: <4A9FC5BF.50706@mweb.co.za>

Przemyslaw Czerpak wrote:

> so it's not the exact reason of the problem.

No. Note that this same behavior (GPF) occurs with new Harbour and HWGUI ActiveX 
code, so perhaps there is some change in the general ole code that is exploited 
by the ActiveX. The last "good" version of Harbour which I have is "10786 
2009-04-06 13:35:09Z druzus", which was roughly 1.1.0. Perhaps I will try some 
cut and paste.

> I'm afraid that in such case I cannot help you and you will need help from
> real MS-Windows developers. Maybe Mindaugas or Pritpal can help.

No problem, thanks, and the "more general" event code is a big step forward.

Regards
Alex

From dbtopas at dbtopas.lt  Thu Sep  3 09:34:26 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Sep  3 09:35:58 2009
Subject: [Harbour] ActiveX
In-Reply-To: <20090903055857.GA6924@uran.home.aster.pl>
References: <4A96A903.7050808@mweb.co.za> <25178548.post@talk.nabble.com>
	<20090903055857.GA6924@uran.home.aster.pl>
Message-ID: <4A9FC5E2.6090701@dbtopas.lt>

Hi,


> Looking at the code I see one important difference between our new AX
> code and GTWVG/HWGUI.
> New AX code calls
> 
>    lOleError = HB_VTBL( pCPC )->FindConnectionPoint( HB_THIS_( pCPC )
>                                        HB_ID_REF( IID_IDispatch ), &pCP );
> 
> to take connection point but GTWVG and HWGUI use different method.
> They make sth like:
> 
>    IEnumConnectionPoints* pEnumCPs = NULL;
>    IID                    rriid = IID_IUnknown;
> 
>    lOleError = HB_VTBL( pCPC )->EnumConnectionPoints( HB_THIS_( pCPC )
>                                                       &pEnumCPs );
>    if( lOleError == S_OK )
>    {
>       do
>       {
>          lOleError = HB_VTBL( pEnumCPs )->Next( HB_THIS_( pEnumCPs ) 1,
>                                                 &pCP, NULL );
>          if( lOleError == S_OK )
>          {
>             lOleError = HB_VTBL( pCP )->GetConnectionInterface(
>                                                    HB_THIS_( pCP ) &rriid );
>             if( lOleError == S_OK )
>                break;
>          }
>       }
>       while( lOleError == S_OK );
>       HB_VTBL( pEnumCPs )->Release( HB_THIS( pEnumCPs ) );
>    }
> 
> and they store rriid inside own OLE structure so it cean be used in
> QueryInterface() method, i.e.:
> 
>    static HRESULT STDMETHODCALLTYPE QueryInterface( IDispatch* lpThis,
>                                                 REFIID riid, void** ppRet )
>    {
>       if( IsEqualIID( riid, HB_ID_REF( IID_IUnknown ) ) ||
>           IsEqualIID( riid, HB_ID_REF( IID_IDispatch ) ) ||
>           IsEqualIID( riid, HB_ID_REF( ( ( ISink* ) lpThis )->rriid ) ) )
>       {
>          *ppRet = ( void* ) lpThis;
>          HB_VTBL( lpThis )->AddRef( HB_THIS( lpThis ) );
>          return S_OK;
>       }
>       *ppRet = NULL;
>       return E_NOINTERFACE;
>    }
> 
> I can add such method to our new AX code if FindConnectionPoint() fails.
> Anyhow I would like to ask Mindaugas to accept it and you and Alex to make
> tests.

Connection point can be implemented using different interfaces. Let us 
assume, Internet Explorer notifies a new URL is loaded using UrlLoaded 
method of IExplorerNotify interface:
   void IExplorerNotify:UrlLoaded( char* pszURL )
Such interface is good for C code, but it is not a best solution for 
languages like Visual Basic, etc. So, Internet Explorer also provides 
notification using IDispatch interface. If IDispatch is provided, it calls:
   IDispatch:Invoke(DISPID_URLLOADED, pParams/*contains VARIANT pszURL*/)

We can accept only IDispatch notifications, but we do not implement any 
other interfaces for event notification (our ISink implements 
IDispatch). So, I do not see any chance to use another interfaces and 
that's why I implemented IDispatch only. I would expect a GPF on first 
event, if we connect to another notification interface.

WARINING: I'VE NEVER USED ANY ACTIVEX CONTROL AND ALL ABOVE COULD BE 
FALSE. BUT THIS IS THE WAY I UNDERSTAND THE IDEA OF MULTIPLE CONNECTION 
POINT INTERFACES.


Regards,
Mindaugas
From sscc at mweb.co.za  Thu Sep  3 09:50:55 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Sep  3 09:50:56 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4A9FC5E2.6090701@dbtopas.lt>
References: <4A96A903.7050808@mweb.co.za>
	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>
	<4A9FC5E2.6090701@dbtopas.lt>
Message-ID: <4A9FC9BF.2080501@mweb.co.za>

Mindaugas Kavaliauskas wrote:

> Connection point can be implemented using different interfaces. Let us 
> assume, Internet Explorer notifies a new URL is loaded using UrlLoaded 
> method of IExplorerNotify interface:
>   void IExplorerNotify:UrlLoaded( char* pszURL )
> Such interface is good for C code, but it is not a best solution for 
> languages like Visual Basic, etc. So, Internet Explorer also provides 
> notification using IDispatch interface. If IDispatch is provided, it calls:
>   IDispatch:Invoke(DISPID_URLLOADED, pParams/*contains VARIANT pszURL*/)
> 
> We can accept only IDispatch notifications, but we do not implement any 
> other interfaces for event notification (our ISink implements 
> IDispatch). So, I do not see any chance to use another interfaces and 
> that's why I implemented IDispatch only. I would expect a GPF on first 
> event, if we connect to another notification interface.

... and yet somehow, it works ... I just tested with this rather weird EFT 
ActiveX I have been given to talk to, and Przemyslaws new code. Unless the GPF 
you warn of is on the last event :)

Regards
Alex
From druzus at acn.waw.pl  Thu Sep  3 09:58:45 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep  3 10:01:54 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4A9FC5BF.50706@mweb.co.za>
References: <4A96A903.7050808@mweb.co.za> <25178548.post@talk.nabble.com>
	<20090903055857.GA6924@uran.home.aster.pl>
	<4A9FA4C7.1050003@mweb.co.za>
	<20090903111956.GA16309@uran.home.aster.pl>
	<4A9FB051.7020405@mweb.co.za>
	<20090903122726.GA28968@uran.home.aster.pl>
	<4A9FBACD.2040404@mweb.co.za>
	<20090903132633.GA10425@uran.home.aster.pl>
	<4A9FC5BF.50706@mweb.co.za>
Message-ID: <20090903135845.GA1443@uran.home.aster.pl>

On Thu, 03 Sep 2009, Alex Strickland wrote:
> ActiveX code, so perhaps there is some change in the general ole code that 
> is exploited by the ActiveX. The last "good" version of Harbour which I 
> have is "10786 2009-04-06 13:35:09Z druzus", which was roughly 1.1.0. 
> Perhaps I will try some cut and paste.

The old AX code never freed OLE objects.
If you want to replicate this behavior simply remove the code
to release the OLE object from current implementation or set wrong
value in the reference counter.
I.e. try to initialize it to 2 in axcore.c[445]:
   pSink->count = 2;

>> I'm afraid that in such case I cannot help you and you will need help from
>> real MS-Windows developers. Maybe Mindaugas or Pritpal can help.
> No problem, thanks, and the "more general" event code is a big step forward.

I only added support for passing parameters by reference and using hash
array to hold event handlers. The general event code was created by
Mindaugas at the beginning.

best regards,
Przemek
From dbtopas at dbtopas.lt  Thu Sep  3 10:11:11 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Sep  3 10:12:41 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4A9FC9BF.2080501@mweb.co.za>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>
	<4A9FC9BF.2080501@mweb.co.za>
Message-ID: <4A9FCE7F.6000507@dbtopas.lt>

> ... and yet somehow, it works ... I just tested with this rather weird 
> EFT ActiveX I have been given to talk to, and Przemyslaws new code. 
> Unless the GPF you warn of is on the last event :)

Can you debug: what interface you connect to (value of rriid after 
connection point enumeration loop)? What events are notified? Do these 
events has parameters? Some premature memory corruption could be reason 
of GPF.


Regards,
Mindaugas
From druzus at acn.waw.pl  Thu Sep  3 10:14:22 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep  3 10:14:28 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4A9FC5E2.6090701@dbtopas.lt>
References: <4A96A903.7050808@mweb.co.za> <25178548.post@talk.nabble.com>
	<20090903055857.GA6924@uran.home.aster.pl>
	<4A9FC5E2.6090701@dbtopas.lt>
Message-ID: <20090903141421.GB1443@uran.home.aster.pl>

On Thu, 03 Sep 2009, Mindaugas Kavaliauskas wrote:

Hi,

> Connection point can be implemented using different interfaces. Let us 
> assume, Internet Explorer notifies a new URL is loaded using UrlLoaded 
> method of IExplorerNotify interface:
>   void IExplorerNotify:UrlLoaded( char* pszURL )
> Such interface is good for C code, but it is not a best solution for 
> languages like Visual Basic, etc. So, Internet Explorer also provides 
> notification using IDispatch interface. If IDispatch is provided, it calls:
>   IDispatch:Invoke(DISPID_URLLOADED, pParams/*contains VARIANT pszURL*/)
> We can accept only IDispatch notifications, but we do not implement any 
> other interfaces for event notification (our ISink implements IDispatch). 
> So, I do not see any chance to use another interfaces and that's why I 
> implemented IDispatch only. I would expect a GPF on first event, if we 
> connect to another notification interface.
> WARINING: I'VE NEVER USED ANY ACTIVEX CONTROL AND ALL ABOVE COULD BE FALSE. 
> BUT THIS IS THE WAY I UNDERSTAND THE IDEA OF MULTIPLE CONNECTION POINT 
> INTERFACES.

Thank you very much. You know much more then me. I have really only
very basic information which mostly comes from C header files ;-)
so I trust your opinion.

If I understand you well then we should remove the rriid ISink member
and modifiy this code:

   for( ;; )
   {
      lOleError = HB_VTBL( pEnumCPs )->Next( HB_THIS_( pEnumCPs ) 1,
                                             &pCP, NULL );
      if( lOleError != S_OK )
         break;
      if( HB_VTBL( pCP )->GetConnectionInterface( HB_THIS_( pCP ) &rriid )
                                                                  == S_OK )
         break;
      rriid = IID_IUnknown;
   }

to accept only IDispatch interfaces, i.e.:

   for( ;; )
   {
      lOleError = HB_VTBL( pEnumCPs )->Next( HB_THIS_( pEnumCPs ) 1,
                                             &pCP, NULL );
      if( lOleError != S_OK )
         break;
      if( HB_VTBL( pCP )->GetConnectionInterface( HB_THIS_( pCP ) &rriid )
                                                                  == S_OK )
      {
         if( IsEqualIID( HB_ID_REF( rriid ), HB_ID_REF( IID_IDispatch ) ) )
            break;
      }
      rriid = IID_IUnknown;
   }

Am I right?

best regards,
Przemek
From dbtopas at dbtopas.lt  Thu Sep  3 10:36:52 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Sep  3 10:38:22 2009
Subject: [Harbour] ActiveX
In-Reply-To: <20090903141421.GB1443@uran.home.aster.pl>
References: <4A96A903.7050808@mweb.co.za>
	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>
	<20090903141421.GB1443@uran.home.aster.pl>
Message-ID: <4A9FD484.6050608@dbtopas.lt>

> If I understand you well then we should remove the rriid ISink member
> and modifiy this code:
> 
>    for( ;; )
>    {
>       lOleError = HB_VTBL( pEnumCPs )->Next( HB_THIS_( pEnumCPs ) 1,
>                                              &pCP, NULL );
>       if( lOleError != S_OK )
>          break;
>       if( HB_VTBL( pCP )->GetConnectionInterface( HB_THIS_( pCP ) &rriid )
>                                                                   == S_OK )
>          break;
>       rriid = IID_IUnknown;
>    }
> 
> to accept only IDispatch interfaces, i.e.:
> 
>    for( ;; )
>    {
>       lOleError = HB_VTBL( pEnumCPs )->Next( HB_THIS_( pEnumCPs ) 1,
>                                              &pCP, NULL );
>       if( lOleError != S_OK )
>          break;
>       if( HB_VTBL( pCP )->GetConnectionInterface( HB_THIS_( pCP ) &rriid )
>                                                                   == S_OK )
>       {
>          if( IsEqualIID( HB_ID_REF( rriid ), HB_ID_REF( IID_IDispatch ) ) )
>             break;
>       }
>       rriid = IID_IUnknown;
>    }
> 
> Am I right?


But that is done by :FindConnectionPoint() method. It accepts interface 
parameter and returns a required connect point if it exists, instead of 
evaluation over all available interfaces.

It's a kind of:
    pConnectionPoint := hConnPointContainer[ IID_IDispatch ]

instead of enumeration:
    FOR nI := 1 TO LEN(hConnPointContainer)
      IF HB_HKEYAT( hConnPointContainer, nI ) == IID_IDispatch
        pConnectionPoint := HB_HVALUEAT( hConnPointContainer, nI )
        BREAK
      ENDIF
    NEXT

That's why I simplified code and used FindConnectionPoint().

The same notice again...

WARINING: I'VE NEVER USED ANY ACTIVEX CONTROL AND ALL ABOVE COULD BE 
FALSE. BUT THIS IS THE WAY I UNDERSTAND THE IDEA OF MULTIPLE CONNECTION 
POINT INTERFACES.


Regards,
Mindaugas
From druzus at acn.waw.pl  Thu Sep  3 10:50:34 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep  3 10:50:40 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4A9FD484.6050608@dbtopas.lt>
References: <4A96A903.7050808@mweb.co.za> <25178548.post@talk.nabble.com>
	<20090903055857.GA6924@uran.home.aster.pl>
	<4A9FC5E2.6090701@dbtopas.lt>
	<20090903141421.GB1443@uran.home.aster.pl>
	<4A9FD484.6050608@dbtopas.lt>
Message-ID: <20090903145034.GA24408@uran.home.aster.pl>

On Thu, 03 Sep 2009, Mindaugas Kavaliauskas wrote:
> But that is done by :FindConnectionPoint() method. It accepts interface 
> parameter and returns a required connect point if it exists, instead of 
> evaluation over all available interfaces.
>
> It's a kind of:
>    pConnectionPoint := hConnPointContainer[ IID_IDispatch ]
>
> instead of enumeration:
>    FOR nI := 1 TO LEN(hConnPointContainer)
>      IF HB_HKEYAT( hConnPointContainer, nI ) == IID_IDispatch
>        pConnectionPoint := HB_HVALUEAT( hConnPointContainer, nI )
>        BREAK
>      ENDIF
>    NEXT
>
> That's why I simplified code and used FindConnectionPoint().

It's logical for me and I expected such behavior but I was confused
by this Pritpal message:

| Now I remember why I used another appproach to detect the 
| Connection Point in GTWVG. I believe some OLE's are misaligned 
| ( I have few ) which do not confirm to FindConnectionPoint() method.
| I had to enumerate all entry points and then Advise() if one is matching.

So there is sth wrong with FindConnectionPoint() and probably due to
wrong interface ID but I think we should verify it.
And of course we should check what interface ID we are accepting now.
Alex?

best regards,
Przemek
From sscc at mweb.co.za  Thu Sep  3 10:51:30 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Sep  3 10:51:31 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4A9FCE7F.6000507@dbtopas.lt>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<4A9FC9BF.2080501@mweb.co.za>
	<4A9FCE7F.6000507@dbtopas.lt>
Message-ID: <4A9FD7F2.1090601@mweb.co.za>

Mindaugas Kavaliauskas wrote:
>> ... and yet somehow, it works ... I just tested with this rather weird 
>> EFT ActiveX I have been given to talk to, and Przemyslaws new code. 
>> Unless the GPF you warn of is on the last event :)
> 
> Can you debug: what interface you connect to (value of rriid after 
> connection point enumeration loop)? What events are notified? Do these 
> events has parameters? Some premature memory corruption could be reason 
> of GPF.

I can try these things, but you should be aware that MSCAL does get a connection 
point via FindConnectionPoint, and so the new code added by Przemyslaw does not 
come into play. This GPF's on exit.

I chose MSCAL because I think it is available on all Windows machines.

My BPTI ActiveX uses EnumConnectionPoints and GetConnectionInterface as 
FindConnectionPoint fails. It seems to work fine, I get events that I expect. 
But, like MSCAL it GPF's on exit.

If you could test only MSCAL, and it works fine for you, then the problem does 
not lie in the ActiveX support in Harbour, but likely in HWGUI or my own poor 
implementation of something.

Regards
Alex

From sscc at mweb.co.za  Thu Sep  3 10:56:49 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Sep  3 10:56:51 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4A9FD484.6050608@dbtopas.lt>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<20090903141421.GB1443@uran.home.aster.pl>
	<4A9FD484.6050608@dbtopas.lt>
Message-ID: <4A9FD931.6060404@mweb.co.za>

Mindaugas Kavaliauskas wrote:
> That's why I simplified code and used FindConnectionPoint().

Does this from MSDN help explain:

===
This is all well and good again, but begs another question: "How does a client 
know the IID it wants to connect to?" Excellent question! There are two possible 
answers:

The client assumes that the object supports a connection point for an interface 
known at compile time. For example, control containers assume that controls 
support the IPropertyNotifySink interface as an outgoing interface, and can pass 
IID_IPropertyNotifySink directly to FindConnectionPoint (as we'll see in the 
"Properties" section).


The client uses the object's type information to find the IID of an outgoing 
dispinterface. A control provides the IID of its event set in this fashion.
The first answer is easy to work with?it's like passing an IID to 
QueryInterface. The second is a little trickier, because as a client you need a 
mechanism to look for the IID you want, without having to load the object's type 
library from its DLL or EXE. That mechanism is exactly what the 
IProvideClassInfo interface was created for, as described earlier under 
"Automation Extensions." The ITypeInfo interface returned from 
IProvideClassInfo::GetClassInfo is the interface on the object's entire type 
library. With this pointer you can call ITypeInfo::GetTypeAttr to look for an 
interface with the Source attributes and call GetRefTypeOfImplType and 
GetRefTypeInfo to retrieve the ITypeInfo interface for that particular 
interface. Outgoing interfaces can be standard COM type interfaces or 
dispinterfaces. Only one, however, can be marked with the Default attribute that 
makes it the primary ?event set.?
===

To find out the events, I look in the type library, whereas someone "lucky" 
enough to be using VB would get the info via ITypeInfo etc. See below:

Regards
Alex

 From OLE View bundled with VB6:

[
   uuid(F41DF7FB-5014-4859-B4DD-854A9D2143CC),
   version(1.17),
   helpstring("Events interface for CoBpTi Object")
]
dispinterface ICoBpTiEvents {
     properties:
     methods:
         [id(0x00000001)]
         HRESULT terminalDspEvent(
                         [in] BSTR* row1,
                         [in] BSTR* row2,
                         [in] BSTR* row3,
                         [in] BSTR* row4);
         [id(0x00000002)]
         HRESULT infoEvent([in] BSTR* text);
         [id(0x00000003)]
         HRESULT exceptionEvent(
                         [in] BSTR* text,
                         [in] long code);
         [id(0x00000004)]
         HRESULT txnResultEvent(
                         [in] long txnType,
                         [in] long resultCode,
                         [in] BSTR* text);
         [id(0x00000005)]
         HRESULT referralEvent([in] BSTR* text);
         [id(0x00000006)]
         HRESULT lppCmdFailedEvent(
                         [in] long cmd,
                         [in] long code,
                         [in] BSTR* text);
         [id(0x00000007)]
         HRESULT cardDataEvent(
                         [in] BSTR* text,
                         [in] BSTR* cardNo,
                         [in] BSTR* expDate,
                         [in] BSTR* track2);
         [id(0x00000008)]
         HRESULT resultDataEvent(
                         [in] long resultType,
                         [in] long item,
                         [in] BSTR* description,
                         [in] BSTR* Value);
         [id(0x00000009)]
         HRESULT terminatedEvent(
                         [in] BSTR* reason,
                         [in] long reasonCode);
         [id(0x0000000a)]
         HRESULT statusChangeEvent([in] long newStatus);
};

From dbtopas at dbtopas.lt  Thu Sep  3 11:05:18 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Sep  3 11:06:48 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4A9FD7F2.1090601@mweb.co.za>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<4A9FC9BF.2080501@mweb.co.za>	<4A9FCE7F.6000507@dbtopas.lt>
	<4A9FD7F2.1090601@mweb.co.za>
Message-ID: <4A9FDB2E.8030200@dbtopas.lt>

> My BPTI ActiveX uses EnumConnectionPoints and GetConnectionInterface as 
> FindConnectionPoint fails. It seems to work fine, I get events that I 
> expect. But, like MSCAL it GPF's on exit.

Can you enumerate and print all available BPTI connection interfaces and 
try if these interfaces are available via FindConnectionPoint()?

> If you could test only MSCAL, and it works fine for you, then the 
> problem does not lie in the ActiveX support in Harbour, but likely in 
> HWGUI or my own poor implementation of something.

Do you have any simple MSCAL test code, I can compile/modify test? Plain 
Harbour code would be the best!!


Regards,
Mindaugas

From sscc at mweb.co.za  Thu Sep  3 11:09:21 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Sep  3 11:09:22 2009
Subject: [Harbour] ActiveX
In-Reply-To: <20090903145034.GA24408@uran.home.aster.pl>
References: <4A96A903.7050808@mweb.co.za>
	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<20090903141421.GB1443@uran.home.aster.pl>	<4A9FD484.6050608@dbtopas.lt>
	<20090903145034.GA24408@uran.home.aster.pl>
Message-ID: <4A9FDC21.2030204@mweb.co.za>

Przemyslaw Czerpak wrote:
> So there is sth wrong with FindConnectionPoint() and probably due to
> wrong interface ID but I think we should verify it.
> And of course we should check what interface ID we are accepting now.
> Alex?

I am not sure what to do? Check it for equality with IID_IDispatch?

Regards
Alex



From sscc at mweb.co.za  Thu Sep  3 11:19:36 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Sep  3 11:19:38 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4A9FDB2E.8030200@dbtopas.lt>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<4A9FC9BF.2080501@mweb.co.za>	<4A9FCE7F.6000507@dbtopas.lt>	<4A9FD7F2.1090601@mweb.co.za>
	<4A9FDB2E.8030200@dbtopas.lt>
Message-ID: <4A9FDE88.4040205@mweb.co.za>

Mindaugas Kavaliauskas wrote:

> Can you enumerate and print all available BPTI connection interfaces and 
> try if these interfaces are available via FindConnectionPoint()?

I'm a bit out of my depth here, for me it's kind of "monkey see, monkey do".

> Do you have any simple MSCAL test code, I can compile/modify test? Plain 
> Harbour code would be the best!!

I'm sorry no, I have used HWGUI. I don't really know how to make an example in 
plain Harbour, or I would. The code in this thread was about as basic as I could 
get it.

Regards
Alex

From dbtopas at dbtopas.lt  Thu Sep  3 11:38:12 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Sep  3 11:39:43 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4A9FD931.6060404@mweb.co.za>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<20090903141421.GB1443@uran.home.aster.pl>	<4A9FD484.6050608@dbtopas.lt>
	<4A9FD931.6060404@mweb.co.za>
Message-ID: <4A9FE2E4.4010107@dbtopas.lt>

> This is all well and good again, but begs another question: "How does a 
> client know the IID it wants to connect to?" Excellent question! There 
> are two possible answers:

Actually, the first method is known and implemented, but the second is 
not clear for me.


>  From OLE View bundled with VB6:
> 
> [
>   uuid(F41DF7FB-5014-4859-B4DD-854A9D2143CC),
>   version(1.17),
>   helpstring("Events interface for CoBpTi Object")
> ]
> dispinterface ICoBpTiEvents {
>     properties:
>     methods:
>         [id(0x00000001)]
>         HRESULT terminalDspEvent(
>                         [in] BSTR* row1,
>                         [in] BSTR* row2,
>                         [in] BSTR* row3,
>                         [in] BSTR* row4);
>         [id(0x00000002)]
>         HRESULT infoEvent([in] BSTR* text);
>         [id(0x00000003)]
>         HRESULT exceptionEvent(
>                         [in] BSTR* text,
>                         [in] long code);
> ...


This makes a little more light (to me) on the subject. Is this 
"dispinterface ICoBpTiEvents { ... }" a C++ syntax? I do not find such 
definitions in BCC. But BCC include files contains for example:

/* dispinterface DispHTMLWindow2 */
/* [uuid][hidden] */
EXTERN_C const IID DIID_DispHTMLWindow2;

     MIDL_INTERFACE("3050f55d-98b5-11cf-bb82-00aa00bdce0b")
     DispHTMLWindow2 : public IDispatch
     {
     };

It means DispHTMLWindow2 is exactly the same interface as IDispatch (has 
exactly the same methods and no additional). A few letter ago I wrote 
that we can accept only IDispatch notifications. I had in mind we can 
accept a interfaces subclassed from IDispatch, if it does not call 
additional methods, but I did not find this subclassing useful. Though, 
it seems this subclassing without any method extension is a common 
practice in ActiveX world.

In such a case we can add additional parameter:
   __AXREGISTERHANDLER( pDisp, bHandler [, cIID ] ) --> pDisp
cIID is default to IID_IDispatch.

This extension will allow to use any interface, f.e., you can use:
   __AXREGISTERHANDLER( pDisp, bHandler, 
"{F41DF7FB-5014-4859-B4DD-854A9D2143CC}" )
to connect to "Events interface for CoBpTi Object".

I do not like a solution that uses enumeration and returns first 
interface, without any knowledge about what kind of interface it is. We 
will GPF, if we receive interface not identical to IDispatch. But... OLE 
has surprises, so, it could be also a common practice... So, decision is 
for those who use it and knows how it works in practice.


Regards,
Mindaugas

From sscc at mweb.co.za  Thu Sep  3 12:23:46 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Sep  3 12:23:48 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4A9FE2E4.4010107@dbtopas.lt>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<20090903141421.GB1443@uran.home.aster.pl>	<4A9FD484.6050608@dbtopas.lt>	<4A9FD931.6060404@mweb.co.za>
	<4A9FE2E4.4010107@dbtopas.lt>
Message-ID: <4A9FED92.7010904@mweb.co.za>

Mindaugas Kavaliauskas wrote:
> This makes a little more light (to me) on the subject. Is this 
> "dispinterface ICoBpTiEvents { ... }" a C++ syntax?

"OLE View" is an application supplied with Visual Studio 6 which displays type 
library information, I guess it might correspond to how the interface is 
described in IDL.

> This extension will allow to use any interface, f.e., you can use:
>   __AXREGISTERHANDLER( pDisp, bHandler, 
> "{F41DF7FB-5014-4859-B4DD-854A9D2143CC}" )
> to connect to "Events interface for CoBpTi Object".

Yes, I see. That sounds suitable to me.

> I do not like a solution that uses enumeration and returns first 
> interface, without any knowledge about what kind of interface it is. We 
> will GPF, if we receive interface not identical to IDispatch. But... OLE 
> has surprises, so, it could be also a common practice... So, decision is 
> for those who use it and knows how it works in practice.

Doesn't this code change below that Przemyslaw proposes take care of your concern?

       if( HB_VTBL( pCP )->GetConnectionInterface( HB_THIS_( pCP ) &rriid )
                                                                   == S_OK )
       {
          if( IsEqualIID( HB_ID_REF( rriid ), HB_ID_REF( IID_IDispatch ) ) )
             break;
       }


I must go and make supper!

Regards
Alex
From druzus at acn.waw.pl  Thu Sep  3 17:53:11 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep  3 17:53:17 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4A9FE2E4.4010107@dbtopas.lt>
References: <4A96A903.7050808@mweb.co.za> <25178548.post@talk.nabble.com>
	<20090903055857.GA6924@uran.home.aster.pl>
	<4A9FC5E2.6090701@dbtopas.lt>
	<20090903141421.GB1443@uran.home.aster.pl>
	<4A9FD484.6050608@dbtopas.lt> <4A9FD931.6060404@mweb.co.za>
	<4A9FE2E4.4010107@dbtopas.lt>
Message-ID: <20090903215311.GA29866@uran.home.aster.pl>

On Thu, 03 Sep 2009, Mindaugas Kavaliauskas wrote:

Hi,

> In such a case we can add additional parameter:
>   __AXREGISTERHANDLER( pDisp, bHandler [, cIID ] ) --> pDisp
> cIID is default to IID_IDispatch.
>
> This extension will allow to use any interface, f.e., you can use:
>   __AXREGISTERHANDLER( pDisp, bHandler, 
> "{F41DF7FB-5014-4859-B4DD-854A9D2143CC}" )
> to connect to "Events interface for CoBpTi Object".
> I do not like a solution that uses enumeration and returns first interface, 
> without any knowledge about what kind of interface it is. We will GPF, if 
> we receive interface not identical to IDispatch. But... OLE has surprises, 
> so, it could be also a common practice... So, decision is for those who use 
> it and knows how it works in practice.

For sure you have much more experience with OLE/AX then I've ever
planed to have and your proposition is reasonable for me.
Current code is a hack which can work in some cases but in some others
can cause GPF. If someone wants to force using IDispatch like interface
with interface using different vendor ID then he should know what he
does and ask our AX code about it explicitly using valid interface ID
so your proposition seems the be reasonable choice for me.
In such case I guess that we should leave rriid ISink member, remove
connection enumeration and simply make sth like:

   HRESULT                    lOleError = S_OK;
   IID                        rriid = IID_IDispatch;
   const char*                cID = hb_parc( 3 );

   if( cID )
   {
      wchar_t* wCLSID = hb_mbtowc( cID );
      lOleError = CLSIDFromString( wCLSID, &rriid );
      hb_xfree( wCLSID );
   }

   if( lOleError == S_OK )
   {
      lOleError = HB_VTBL( pDisp )->QueryInterface( HB_THIS_( pDisp )
                              HB_ID_REF( IID_IConnectionPointContainer ),
                              ( void** ) ( void* ) &pCPC );

      if( lOleError == S_OK )
      {
         lOleError = HB_VTBL( pCPC )->FindConnectionPoint( HB_THIS_( pCPC )
                                 HB_ID_REF( rriid ), &pCP );
         [...]

I'll commit this modification in a while and I would like to ask MS-Windows
developers to make any farther modifications or fixes. I'm the last person
to work on MS-Windows only code which touches unknown for me areas where
real life practice seems to be most important thing.

best regards,
Przemek
From druzus at users.sourceforge.net  Thu Sep  3 17:55:02 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Thu Sep  3 17:55:08 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12399] trunk/harbour
Message-ID: <E1MjKGk-0000xM-M0@3kljzd1.ch3.sourceforge.com>

Revision: 12399
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12399&view=rev
Author:   druzus
Date:     2009-09-03 21:55:01 +0000 (Thu, 03 Sep 2009)

Log Message:
-----------
2009-09-03 23:54 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbwin/axcore.c
    ! removed the hack I added in previous commit with interface enumeration
      which was accepting any interface without validation its ID.
    + added 3-rd parameter to __AXREGISTERHANDLER() as Mindaugas proposed.
      Now this function has the following syntax:
         __AXREGISTERHANDLER( <pDisp>, <bHandler> | <hHandlers>
                              [, <cIID> ] ) -> <pDisp>
      default value for <cIID> is IID_IDispatch.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/axcore.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bedipritpal at hotmail.com  Thu Sep  3 19:08:38 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Sep  3 19:08:43 2009
Subject: [Harbour] Syntax of DllCall () - Harbour vs Xbase++
Message-ID: <25285674.post@talk.nabble.com>


Hi

Here is the DllCall() usage in Xbase++:


   #define SW_HIDE             0
   #define SW_NORMAL           1
   #define SW_SHOWMINIMIZED    2
   #define SW_SHOWMAXIMIZED    3
   #define SW_MAXIMIZE         3
   #define SW_SHOWNOACTIVATE   4
   #define SW_SHOW             5
   #define SW_MINIMIZE         6
   #define SW_SHOWMINNOACTIVE  7
   #define SW_SHOWNA           8
   #define SW_RESTORE          9
   #define SW_SHOWDEFAULT      10

   #define SE_ERR_NOASSOC      31

   lSuccess := DllCall( "SHELL32.DLL"  , DLL_STDCALL, ;
            "ShellExecuteA", AppDesktop():GetHWND(), "open", cPath+cFile,;
            NIL, CurDir(), SW_NORMAL ) 

Do we have this usage in Harbour or not. 
If we have, what are the parameters to call it.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Syntax-of-DllCall-%28%29---Harbour-vs-Xbase%2B%2B-tp25285674p25285674.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at users.sourceforge.net  Thu Sep  3 19:44:50 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Thu Sep  3 19:44:57 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12400] trunk/harbour
Message-ID: <E1MjLz0-0000gx-UP@bj8yhf1.ch3.sourceforge.com>

Revision: 12400
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12400&view=rev
Author:   druzus
Date:     2009-09-03 23:44:49 +0000 (Thu, 03 Sep 2009)

Log Message:
-----------
2009-09-04 01:44 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/ChangeLog
    * marked TODO as DONE and fixed typo

  * harbour/include/hbcomp.h
    ! removed repeated declaration

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/include/hbcomp.h


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From lorenzo.fiorini at gmail.com  Fri Sep  4 02:16:13 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Sep  4 02:16:20 2009
Subject: [Harbour] demoxbp segfault in Fedora 11
Message-ID: <9257026e0909032316h2488ffb1w29db3dad85dcb246@mail.gmail.com>

Using QT SDK from trolltech site ./demoxbp worked as expected.
Then I've installed distro's KDE and qt-dev and I always get at start:

Program received signal SIGSEGV, Segmentation fault.
0x006a9163 in strlen () from /lib/libc.so.6
...
(gdb) bt
#0  0x006a9163 in strlen () from /lib/libc.so.6
#1  0x00e2d04f in XSetCommand () from /usr/lib/libX11.so.6
#2  0x00e31aa1 in XSetWMProperties () from /usr/lib/libX11.so.6
#3  0x05a88128 in QWidgetPrivate::create_sys(unsigned long, bool, bool) ()
   from /usr/lib/libQtGui.so.4
#4  0x05a4b6b0 in QWidget::create(unsigned long, bool, bool) ()
   from /usr/lib/libQtGui.so.4
#5  0x05a477e6 in QWidgetPrivate::createWinId(unsigned long) ()
   from /usr/lib/libQtGui.so.4
#6  0x05a4b0a8 in QWidgetPrivate::setWindowTitle_helper(QString const&) ()
   from /usr/lib/libQtGui.so.4
#7  0x05a4b4e2 in QWidget::setWindowTitle(QString const&) ()
   from /usr/lib/libQtGui.so.4
#8  0x080c3fd1 in HB_FUN_ERRORNEW ()
#9  0x00d450ff in hb_vmProc () from /opt/harbour/lib/libharbour.so
#10 0x00d13e35 in hb_vmExecute () from /opt/harbour/lib/libharbour.so
#11 0x00d480ff in hb_vmDoBlock () from /opt/harbour/lib/libharbour.so
#12 0x00d17912 in hb_vmSend () from /opt/harbour/lib/libharbour.so
#13 0x00d429ce in hb___msgEvalInline () from /opt/harbour/lib/libharbour.so
#14 0x00d17912 in hb_vmSend () from /opt/harbour/lib/libharbour.so
#15 0x00d150ef in hb_vmExecute () from /opt/harbour/lib/libharbour.so
#16 0x080770bb in HB_FUN_ERRORNEW ()
#17 0x080d45a0 in ?? ()
#18 0x0815ace0 in HB_FUN_ERRORNEW ()
#19 0x00000008 in ?? ()
#20 0xbfffea5c in ?? ()
#21 0x08159c90 in HB_FUN_ERRORNEW ()
#22 0x081afae8 in ?? ()
#23 0xbfffea88 in ?? ()
#24 0x00d17912 in hb_vmSend () from /opt/harbour/lib/libharbour.so
Backtrace stopped: frame did not save the PC
(gdb)

using valgrind --tool=memcheck --leak-check=yes -v ./demoxbp &>
demoxbp.log I see:
...
==11511== Invalid read of size 1
==11511==    at 0x4007668: strlen (mc_replace_strmem.c:242)
==11511==    by 0x9AB04E: XSetCommand (in /usr/lib/libX11.so.6.2.0)
==11511==    by 0x9AFAA0: XSetWMProperties (in /usr/lib/libX11.so.6.2.0)
==11511==    by 0x5A88127: QWidgetPrivate::create_sys(unsigned long,
bool, bool) (in /usr/lib/libQtGui.so.4.5.2)
==11511==    by 0x5A4B6AF: QWidget::create(unsigned long, bool, bool)
(in /usr/lib/libQtGui.so.4.5.2)
==11511==    by 0x5A477E5: QWidgetPrivate::createWinId(unsigned long)
(in /usr/lib/libQtGui.so.4.5.2)
==11511==    by 0x5A4B0A7:
QWidgetPrivate::setWindowTitle_helper(QString const&) (in
/usr/lib/libQtGui.so.4.5.2)
==11511==    by 0x5A4B4E1: QWidget::setWindowTitle(QString const&) (in
/usr/lib/libQtGui.so.4.5.2)
==11511==    by 0x80C3FD0: (within
/home/twfiorlo/workspace/harbour/contrib/hbxbp/tests/demoxbp)
==11511==    by 0x43AE0FE: hb_vmProc (in /opt/harbour/lib/libharbour-2.0.0.so)
==11511==    by 0x437CE34: hb_vmExecute (in
/opt/harbour/lib/libharbour-2.0.0.so)
...

Is there anything we can do at hbqt side?

best regards,
Lorenzo
From sscc at mweb.co.za  Fri Sep  4 04:57:35 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Sep  4 04:57:47 2009
Subject: [Harbour] ActiveX
In-Reply-To: <20090903215311.GA29866@uran.home.aster.pl>
References: <4A96A903.7050808@mweb.co.za>
	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<20090903141421.GB1443@uran.home.aster.pl>	<4A9FD484.6050608@dbtopas.lt>
	<4A9FD931.6060404@mweb.co.za>	<4A9FE2E4.4010107@dbtopas.lt>
	<20090903215311.GA29866@uran.home.aster.pl>
Message-ID: <4AA0D67F.7060501@mweb.co.za>

Przemyslaw Czerpak wrote:

> I'll commit this modification in a while and I would like to ask MS-Windows
> developers to make any farther modifications or fixes.

I changed in axfunc.prg :


FUNCTION WIN_AxGetControl( hWnd, bHandler, cID )
    LOCAL oAx := WIN_OleAuto()

    oAx:__hObj := __AxGetControl( hWnd )
    IF bHandler != NIL
       oAx:__hSink := __AxRegisterHandler( oAx:__hObj, bHandler, cID )
    ENDIF

    RETURN oAx


I called :


     oMSCAL := HWGActiveX():New( oMainWindow, "MSCAL.Calendar", 0, 0, 300, 300, 
"8E27C92D-1264-101C-8A2F-040224009C02" )


with in HWGActiveX:New():


     hWnd := WAPI_CreateWindowEX( 0, "AtlAxWin", cProgId, nStyle, nLeft, nTop, 
nWidth, nHeight, WIN_N2P( oWnd:handle ), 0 )
     ::oOLE := WIN_AxGetControl( hWnd, { | event, ... | ::Event( event, ... ) }, 
cID )


To debug, in axcore.c I put:


          if( cID )
          {
             wchar_t* wCLSID = hb_mbtowc( cID );
MessageBox(NULL, "cID", cID, MB_OK);
             lOleError = CLSIDFromString( wCLSID, &rriid );
             hb_xfree( wCLSID );
          }
MessageBox(NULL, WIN_OLEErrorText( lOleError ), "CLSIDFromString", MB_OK);


the ActiveX displays, I see the MessageBox with cID, and then lOLEError is 
CO_E_CLASSSTRING, and then I get the runtime error, 3012, "Failed to obtain 
connection point", but it *does not* GPF on shutdown. Strange thing is that the 
app does not quit immediately, I see my shutdown messages : MsgInfo( "Setting 
oMSCAL to nil" ). I'm not sure if HWGUI errorsys is at fault with this or maybe 
it is the "ERROR HANDLER OnError" clause.

If I pass "00020400-0000-0000-C000-000000000046" which I think is the IID of 
IDispatch, it gives the same CO_E_CLASSSTRING error.

If I *don't* pass the ID, then the control displays as it should, events work, 
although it still GPF's on shut down.

I changed the app to not try and register an event handler at all, then no GPF 
on exit (similar to getting an error), but of course no events.

So I conclude that something in the event handling code causes a GPF on 
shutdown. At this point I have not proved anything about whether passing an 
interface ID is the right thing to do, but the two I've tried don't work.

With BPTI Active X:

     oBPTI := HWGActiveX():New( oMainWindow, "BPTI.CoBpTiX1", 0, 0, 300, 300, 
"F41DF7FB-5014-4859-B4DD-854A9D2143CC" )

fails with CO_E_CLASSSTRING, and

     oBPTI := HWGActiveX():New( oMainWindow, "BPTI.CoBpTiX1", 0, 0, 300, 300 )

fails with runtime error, 3012, "Failed to obtain connection point".

Attached are the TypeLib info for MSCAL and BPTI, I found a way to dump it.

Regards
Alex
-------------- next part --------------
// Generated .IDL file (by the OLE/COM Object Viewer)
// 
// typelib filename: bpti.dll

[
  uuid(0D17F878-8008-4FF6-AD9C-FBE1C1BB5299),
  version(1.0),
  helpstring("BPTI Library")
]
library BPTI
{
    // TLib :     // TLib : OLE Automation : {00020430-0000-0000-C000-000000000046}
    importlib("stdole2.tlb");

    // Forward declare all types defined in this typelib
    interface IBpTi;
    dispinterface ICoBpTiEvents;

    [
      odl,
      uuid(22BDC4E0-B4CF-4A29-8D6D-D7D17195394B),
      version(1.32),
      helpstring("Dispatch interface for CoBpTi Object"),
      dual,
      oleautomation
    ]
    interface IBpTi : IDispatch {
        [id(0x00000001)]
        HRESULT initLan(
                        [in] BSTR terminalAdr, 
                        [in] long terminalPort);
        [id(0x00000002)]
        HRESULT open();
        [id(0x00000003)]
        HRESULT start([in] long lppType);
        [id(0x00000004)]
        HRESULT end();
        [id(0x00000005)]
        HRESULT close();
        [id(0x00000006)]
        HRESULT disconnect();
        [id(0x00000007)]
        HRESULT sendAmounts(
                        [in] long amount, 
                        [in] long VAT, 
                        [in] long cashBack);
        [id(0x00000008)]
        HRESULT sendCardData(
                        [in] BSTR pan, 
                        [in] BSTR expDate, 
                        [in] BSTR CVV);
        [id(0x0000000a)]
        HRESULT cancel();
        [id(0x0000000b)]
        HRESULT terminate();
        [id(0x0000000c)]
        HRESULT connect();
        [id(0x0000000d)]
        HRESULT sendApprovalCode([in] BSTR approvalCode);
        [id(0x00000009)]
        HRESULT bonusValidation(
                        [in] long validity, 
                        [in] BSTR description);
        [id(0x0000000f)]
        HRESULT customerReceipt();
        [id(0x00000010)]
        HRESULT merchantReceipt();
        [id(0x0000000e)]
        HRESULT batchReport();
        [id(0x00000011)]
        HRESULT initRs232(
                        [in] long comPort, 
                        [in] BSTR config);
        [id(0x00000012)]
        HRESULT terminalConfig();
        [id(0x00000013)]
        HRESULT transLogByNbr(
                        [in] long reportType, 
                        [in] long nbr);
        [id(0x00000014)]
        HRESULT transLogByPeriod(
                        [in] long reportType, 
                        [in] BSTR from, 
                        [in] BSTR to);
        [id(0x00000015)]
        HRESULT unsentTransactions();
        [id(0x00000016)]
        HRESULT currentBatch();
        [id(0x00000017), propget]
        HRESULT canClose([out, retval] long* Value);
        [id(0x00000018)]
        HRESULT testHostConnection();
        [id(0x00000019)]
        HRESULT setCloseBatchTime([in] BSTR time);
        [id(0x000000c9)]
        HRESULT endTransaction();
    };

    [
      uuid(F41DF7FB-5014-4859-B4DD-854A9D2143CC),
      version(1.17),
      helpstring("Events interface for CoBpTi Object")
    ]
    dispinterface ICoBpTiEvents {
        properties:
        methods:
            [id(0x00000001)]
            HRESULT terminalDspEvent(
                            [in] BSTR* row1, 
                            [in] BSTR* row2, 
                            [in] BSTR* row3, 
                            [in] BSTR* row4);
            [id(0x00000002)]
            HRESULT infoEvent([in] BSTR* text);
            [id(0x00000003)]
            HRESULT exceptionEvent(
                            [in] BSTR* text, 
                            [in] long code);
            [id(0x00000004)]
            HRESULT txnResultEvent(
                            [in] long txnType, 
                            [in] long resultCode, 
                            [in] BSTR* text);
            [id(0x00000005)]
            HRESULT referralEvent([in] BSTR* text);
            [id(0x00000006)]
            HRESULT lppCmdFailedEvent(
                            [in] long cmd, 
                            [in] long code, 
                            [in] BSTR* text);
            [id(0x00000007)]
            HRESULT cardDataEvent(
                            [in] BSTR* text, 
                            [in] BSTR* cardNo, 
                            [in] BSTR* expDate, 
                            [in] BSTR* track2);
            [id(0x00000008)]
            HRESULT resultDataEvent(
                            [in] long resultType, 
                            [in] long item, 
                            [in] BSTR* description, 
                            [in] BSTR* Value);
            [id(0x00000009)]
            HRESULT terminatedEvent(
                            [in] BSTR* reason, 
                            [in] long reasonCode);
            [id(0x0000000a)]
            HRESULT statusChangeEvent([in] long newStatus);
    };

    [
      uuid(B58CC4FA-4DEA-4FD6-9044-38F05052D199),
      version(1.0),
      helpstring("CoBpTi Object")
    ]
    coclass CoBpTi {
        [default] interface IBpTi;
        [default, source] dispinterface ICoBpTiEvents;
    };

    typedef [uuid(9BCC37D4-37A2-4096-B60C-3F2411C96E8F), version(1.0)]
    enum {
        PAN_NOT_VALID = 2001,
        PAN_NOT_DEFINED = 2020,
        DO_CLOSEBATCH = 1011,
        CUSTOMER_CANCEL = 2022,
        CARD_NOT_ENTERED = 2021
    } LPP_CODES;

    [
      uuid(C81E6890-F0B9-4DC3-AE59-80890E9C4426),
      version(1.0),
      helpstring("CoBpTiX1 Object")
    ]
    coclass CoBpTiX1 {
        [default] interface IBpTi;
        [default, source] dispinterface ICoBpTiEvents;
    };
};
-------------- next part --------------
// Generated .IDL file (by the OLE/COM Object Viewer)
// 
// typelib filename: MSCAL.OCX

[
  uuid(8E27C92E-1264-101C-8A2F-040224009C02),
  version(7.0),
  helpstring("Microsoft Calendar Control 8.0"),
  helpfile("mscal.hlp"),
  helpcontext(0x0000347e)
]
library MSACAL
{
    // TLib :     // TLib : OLE Automation : {00020430-0000-0000-C000-000000000046}
    importlib("stdole2.tlb");

    // Forward declare all types defined in this typelib
    interface ICalendar;
    dispinterface DCalendarEvents;

    [
      odl,
      uuid(8E27C92C-1264-101C-8A2F-040224009C02),
      helpstring("Calendar Control"),
      hidden,
      dual,
      oleautomation
    ]
    interface ICalendar : IDispatch {
        [id(0xfffffe0b), propget, bindable, requestedit, helpcontext(0x00003483)]
        HRESULT BackColor([out, retval] OLE_COLOR* pclrBackColor);
        [id(0xfffffe0b), propput, bindable, requestedit, helpcontext(0x00003483)]
        HRESULT BackColor([in] OLE_COLOR pclrBackColor);
        [id(0x00000011), propget, bindable, helpcontext(0x00003484)]
        HRESULT Day([out, retval] short* pnDay);
        [id(0x00000011), propput, bindable, helpcontext(0x00003484)]
        HRESULT Day([in] short pnDay);
        [id(0x00000001), propget, helpcontext(0x00003485)]
        HRESULT DayFont([out, retval] IFontDisp** ppfontDayFont);
        [id(0x00000001), propput, helpcontext(0x00003485)]
        HRESULT DayFont([in] IFontDisp* ppfontDayFont);
        [id(0x00000002), propget, helpcontext(0x00003486)]
        HRESULT DayFontColor([out, retval] OLE_COLOR* pclrDayFontColor);
        [id(0x00000002), propput, helpcontext(0x00003486)]
        HRESULT DayFontColor([in] OLE_COLOR pclrDayFontColor);
        [id(0x00000012), propget, helpcontext(0x00003487)]
        HRESULT DayLength([out, retval] short* pnDayLength);
        [id(0x00000012), propput, helpcontext(0x00003487)]
        HRESULT DayLength([in] short pnDayLength);
        [id(0x00000013), propget, helpcontext(0x00003489)]
        HRESULT FirstDay([out, retval] short* pnFirstDay);
        [id(0x00000013), propput, helpcontext(0x00003489)]
        HRESULT FirstDay([in] short pnFirstDay);
        [id(0x00000014), propget, helpcontext(0x000036e0)]
        HRESULT GridCellEffect([out, retval] long* plGridCellEffect);
        [id(0x00000014), propput, helpcontext(0x000036e0)]
        HRESULT GridCellEffect([in] long plGridCellEffect);
        [id(0x00000003), propget, helpcontext(0x0000348b)]
        HRESULT GridFont([out, retval] IFontDisp** ppfontGridFont);
        [id(0x00000003), propput, helpcontext(0x0000348b)]
        HRESULT GridFont([in] IFontDisp* ppfontGridFont);
        [id(0x00000004), propget, helpcontext(0x0000348c)]
        HRESULT GridFontColor([out, retval] OLE_COLOR* pclrGridFontColor);
        [id(0x00000004), propput, helpcontext(0x0000348c)]
        HRESULT GridFontColor([in] OLE_COLOR pclrGridFontColor);
        [id(0x0000000d), propget, helpcontext(0x0000348d)]
        HRESULT GridLinesColor([out, retval] OLE_COLOR* pclrGridLinesColor);
        [id(0x0000000d), propput, helpcontext(0x0000348d)]
        HRESULT GridLinesColor([in] OLE_COLOR pclrGridLinesColor);
        [id(0x00000010), propget, bindable, helpcontext(0x0000348f)]
        HRESULT Month([out, retval] short* pnMonth);
        [id(0x00000010), propput, bindable, helpcontext(0x0000348f)]
        HRESULT Month([in] short pnMonth);
        [id(0x00000015), propget, helpcontext(0x00003490)]
        HRESULT MonthLength([out, retval] short* pnMonthLength);
        [id(0x00000015), propput, helpcontext(0x00003490)]
        HRESULT MonthLength([in] short pnMonthLength);
        [id(0x00000005), propget, helpcontext(0x00003491)]
        HRESULT ShowDateSelectors([out, retval] VARIANT_BOOL* pfShowDateSelectors);
        [id(0x00000005), propput, helpcontext(0x00003491)]
        HRESULT ShowDateSelectors([in] VARIANT_BOOL pfShowDateSelectors);
        [id(0x00000006), propget, helpcontext(0x00003492)]
        HRESULT ShowDays([out, retval] VARIANT_BOOL* pfShowDays);
        [id(0x00000006), propput, helpcontext(0x00003492)]
        HRESULT ShowDays([in] VARIANT_BOOL pfShowDays);
        [id(0x00000007), propget, helpcontext(0x00003493)]
        HRESULT ShowHorizontalGrid([out, retval] VARIANT_BOOL* pfShowHorizontalGrid);
        [id(0x00000007), propput, helpcontext(0x00003493)]
        HRESULT ShowHorizontalGrid([in] VARIANT_BOOL pfShowHorizontalGrid);
        [id(0x00000008), propget, helpcontext(0x00003494)]
        HRESULT ShowTitle([out, retval] VARIANT_BOOL* pfShowTitle);
        [id(0x00000008), propput, helpcontext(0x00003494)]
        HRESULT ShowTitle([in] VARIANT_BOOL pfShowTitle);
        [id(0x00000009), propget, helpcontext(0x00003495)]
        HRESULT ShowVerticalGrid([out, retval] VARIANT_BOOL* pfShowVerticalGrid);
        [id(0x00000009), propput, helpcontext(0x00003495)]
        HRESULT ShowVerticalGrid([in] VARIANT_BOOL pfShowVerticalGrid);
        [id(0x0000000a), propget, helpcontext(0x00003496)]
        HRESULT TitleFont([out, retval] IFontDisp** ppfontTitleFont);
        [id(0x0000000a), propput, helpcontext(0x00003496)]
        HRESULT TitleFont([in] IFontDisp* ppfontTitleFont);
        [id(0x0000000b), propget, helpcontext(0x00003497)]
        HRESULT TitleFontColor([out, retval] OLE_COLOR* pclrTitleFontColor);
        [id(0x0000000b), propput, helpcontext(0x00003497)]
        HRESULT TitleFontColor([in] OLE_COLOR pclrTitleFontColor);
        [id(0x0000000c), propget, bindable, requestedit, displaybind, defaultbind, helpcontext(0x00003498)]
        HRESULT Value([out, retval] VARIANT* pvarValue);
        [id(0x0000000c), propput, bindable, requestedit, displaybind, defaultbind, helpcontext(0x00003498)]
        HRESULT Value([in] VARIANT pvarValue);
        [id(00000000), propget, hidden]
        HRESULT _Value([out, retval] VARIANT* pvarValue);
        [id(00000000), propput, hidden]
        HRESULT _Value([in] VARIANT pvarValue);
        [id(0x0000000e), propget, helpcontext(0x00003499)]
        HRESULT ValueIsNull([out, retval] VARIANT_BOOL* pfValueIsNull);
        [id(0x0000000e), propput, helpcontext(0x00003499)]
        HRESULT ValueIsNull([in] VARIANT_BOOL pfValueIsNull);
        [id(0x0000000f), propget, bindable, helpcontext(0x0000349a)]
        HRESULT Year([out, retval] short* pnYear);
        [id(0x0000000f), propput, bindable, helpcontext(0x0000349a)]
        HRESULT Year([in] short pnYear);
        [id(0x00000016), helpcontext(0x0000349c)]
        HRESULT NextDay();
        [id(0x00000017), helpcontext(0x0000349e)]
        HRESULT NextMonth();
        [id(0x00000018), helpcontext(0x000034a0)]
        HRESULT NextWeek();
        [id(0x00000019), helpcontext(0x000034a2)]
        HRESULT NextYear();
        [id(0x0000001a), helpcontext(0x000034a4)]
        HRESULT PreviousDay();
        [id(0x0000001b), helpcontext(0x000034a6)]
        HRESULT PreviousMonth();
        [id(0x0000001c), helpcontext(0x000034a8)]
        HRESULT PreviousWeek();
        [id(0x0000001d), helpcontext(0x000034aa)]
        HRESULT PreviousYear();
        [id(0xfffffdda), helpcontext(0x000034ac)]
        HRESULT Refresh();
        [id(0x0000001e), helpcontext(0x000034ae)]
        HRESULT Today();
        [id(0xfffffdd8), helpcontext(0x0000349b)]
        HRESULT AboutBox();
    };

    [
      uuid(8E27C92D-1264-101C-8A2F-040224009C02),
      helpstring("Event interface for Calendar control"),
      hidden
    ]
    dispinterface DCalendarEvents {
        properties:
        methods:
            [id(0xfffffda8), helpcontext(0x000034b1)]
            void Click();
            [id(0xfffffda7), helpcontext(0x000034b2)]
            void DblClick();
            [id(0xfffffda6), helpcontext(0x000034b4)]
            void KeyDown(
                            short* KeyCode, 
                            short Shift);
            [id(0xfffffda5), helpcontext(0x000034b5)]
            void KeyPress(short* KeyAscii);
            [id(0xfffffda4), helpcontext(0x000034b4)]
            void KeyUp(
                            short* KeyCode, 
                            short Shift);
            [id(0x00000002), helpcontext(0x000034b0)]
            void BeforeUpdate(short* Cancel);
            [id(0x00000001), helpcontext(0x000034af)]
            void AfterUpdate();
            [id(0x00000003), helpcontext(0x000034b6)]
            void NewMonth();
            [id(0x00000004), helpcontext(0x000034b7)]
            void NewYear();
    };

    [
      uuid(8E27C92B-1264-101C-8A2F-040224009C02),
      helpstring("Calendar control"),
      helpcontext(0x0000347e),
      control
    ]
    coclass Calendar {
        [default] interface ICalendar;
        [default, source] dispinterface DCalendarEvents;
    };
};
From fmancera at viaopen.com  Fri Sep  4 05:17:26 2009
From: fmancera at viaopen.com (Fernando Mancera)
Date: Fri Sep  4 05:16:52 2009
Subject: [Harbour] Syntax of DllCall () - Harbour vs Xbase++
In-Reply-To: <25285674.post@talk.nabble.com>
References: <25285674.post@talk.nabble.com>
Message-ID: <001a01ca2d40$86944020$93bcc060$@com>

Hi,

>Here is the DllCall() usage in Xbase++:
>   #define SW_HIDE             0
>   #define SW_NORMAL           1
>   #define SW_SHOWMINIMIZED    2
>   #define SW_SHOWMAXIMIZED    3
>   #define SW_MAXIMIZE         3
>   #define SW_SHOWNOACTIVATE   4
>   #define SW_SHOW             5
>   #define SW_MINIMIZE         6
>   #define SW_SHOWMINNOACTIVE  7
>   #define SW_SHOWNA           8
>   #define SW_RESTORE          9
>   #define SW_SHOWDEFAULT      10

>   #define SE_ERR_NOASSOC      31

>   lSuccess := DllCall( "SHELL32.DLL"  , DLL_STDCALL, ;
>            "ShellExecuteA", AppDesktop():GetHWND(), "open", cPath+cFile,;
>            NIL, CurDir(), SW_NORMAL ) 

>Do we have this usage in Harbour or not. 
>If we have, what are the parameters to call it.

About this, is available in 64bits ??

Regards,

Fernando Mancera
http://blog.viaopen.com



From sscc at mweb.co.za  Fri Sep  4 05:17:29 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Sep  4 05:17:38 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4AA0D67F.7060501@mweb.co.za>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<20090903141421.GB1443@uran.home.aster.pl>	<4A9FD484.6050608@dbtopas.lt>	<4A9FD931.6060404@mweb.co.za>	<4A9FE2E4.4010107@dbtopas.lt>	<20090903215311.GA29866@uran.home.aster.pl>
	<4AA0D67F.7060501@mweb.co.za>
Message-ID: <4AA0DB29.7070707@mweb.co.za>

> If I *don't* pass the ID, then the control displays as it should, events 
> work, although it still GPF's on shut down.

Actually, only a few events work, and then GPF, maybe this stack trace will help:

 >	hellox.exe!_hb_itemString()  + 0x1e bytes	C++
  	hellox.exe!_HB_FUN_HB_VALTOSTR()  + 0x1f bytes	C++
  	hellox.exe!_hb_vmProc()  + 0x53 bytes	C++
  	hellox.exe!_hb_stackPushReturn()  + 0x332e bytes	C++
  	hellox.exe!_hb_vmExecute()  + 0x179d bytes	C++
  	hellox.exe!_HB_FUN_HWGACTIVEX()  + 0x50 bytes	C
  	hellox.exe!_hb_vmSend()  + 0x71 bytes	C++
  	hellox.exe!_hb_stackOldFrame()  + 0x14e bytes	C++
  	hellox.exe!_hb_vmExecute()  + 0x17ae bytes	C++
  	hellox.exe!_hb_codeblockEvaluate()  + 0x1f bytes	C++
  	hellox.exe!_hb_vmEnumRelease()  + 0x1ee bytes	C++
  	hellox.exe!_hb_vmSend()  + 0x71 bytes	C++
  	hellox.exe!_HB_FUN___AXDOVERB()  + 0x44d bytes	C
  	user32.dll!76cbfea1() 	
  	[Frames below may be incorrect and/or missing, no symbols loaded for user32.dll]	
  	user32.dll!76cc0943() 	
  	user32.dll!76cc781e() 	
  	user32.dll!76cc6aca() 	
  	user32.dll!76cbfd72() 	
  	user32.dll!76cbfea1() 	
  	user32.dll!76cc0943() 	
  	user32.dll!76caf99f() 	
  	MSCAL.OCX!10006fbf() 	
  	MSCAL.OCX!10004e99() 	
  	MSCAL.OCX!10004be5() 	
  	MSCAL.OCX!10005520() 	
  	MSCAL.OCX!1000bb2f() 	
  	user32.dll!76cbfd72() 	
  	user32.dll!76cbfe4a() 	
  	user32.dll!76cbfdf3() 	
  	user32.dll!76cc018d() 	
  	user32.dll!76cb8b7c() 	
  	hellox.exe!_ProcessMessage()  + 0xa1 bytes	C
  	hellox.exe!_HB_FUN_HWG_ACTIVATEMAINWINDOW()  + 0xd8 bytes	C
  	hellox.exe!_hb_vmProc()  + 0x53 bytes	C++
  	hellox.exe!_hb_vmExecute()  + 0x6df bytes	C++
  	hellox.exe!_HB_FUN_HMAINWINDOW()  + 0x50 bytes	C
  	hellox.exe!_hb_vmSend()  + 0x71 bytes	C++
  	hellox.exe!_hb_vmExecute()  + 0x900 bytes	C++
  	hellox.exe!_HB_FUN_MAIN()  + 0x10 bytes	C
  	hellox.exe!_hb_vmProc()  + 0x53 bytes	C++
  	hellox.exe!_hb_vmInit()  + 0x223 bytes	C++
  	hellox.exe!_WinMain@16()  + 0xf3 bytes	C++
  	hellox.exe!__tmainCRTStartup()  Line 263 + 0x1b bytes	C
  	kernel32.dll!75d3d0e9() 	
  	ntdll.dll!776819bb() 	
  	ntdll.dll!7768198e() 	

Regards
Alex


My current app FWIW:


#include "hbclass.ch"
#include "windows.ch"
#include "guilib.ch"


static oMSCAL
static oBPTI

memvar oMainWindow

public oMainWindow


function main()

     INIT WINDOW oMainWindow MAIN TITLE "Hello ActiveX"  ;
             AT 200, 0 SIZE 420, 300

     MENU OF oMainWindow
         MENU TITLE "&File"
             MENUITEM "Test &MSCal" ACTION { || MSCALInit() }
             MENUITEM "&Change Date" ACTION { || oMSCAL:NextDay() }
             SEPARATOR
             MENUITEM "Test &BPTI" ACTION { || BPTIInit() }
             //MENUITEM "Init BPTI" ACTION { || msginfo(HB_ValToStr(oBPTI)), 
oBPTI:InitLan("127.0.0.1", 2000) }
             //MENUITEM "Disconnect BPTI" ACTION { || oBPTI:disconnect() }
             SEPARATOR
             MENUITEM "E&xit" ACTION { || EndWindow() }
         ENDMENU
     ENDMENU

     MsgInfo( "Activate" )
     ACTIVATE WINDOW oMainWindow

     MsgInfo( "Setting oMSCAL to nil" )
     oMSCAL := nil
     MsgInfo( "Setting oBPTI to nil" )
     oBPTI := nil

return nil


procedure MSCALInit()

     //oMSCAL := HWGActiveX():New( oMainWindow, "MSCAL.Calendar", 0, 0, 300, 
300, "8E27C92D-1264-101C-8A2F-040224009C02" )
     //oMSCAL := HWGActiveX():New( oMainWindow, "MSCAL.Calendar", 0, 0, 300, 
300, "00020400-0000-0000-C000-000000000046" )
     oMSCAL := HWGActiveX():New( oMainWindow, "MSCAL.Calendar", 0, 0, 300, 300 )

return


procedure BPTIInit()

     //oBPTI := HWGActiveX():New( oMainWindow, "BPTI.CoBpTiX1", 0, 0, 300, 300, 
"F41DF7FB-5014-4859-B4DD-854A9D2143CC" )
     oBPTI := HWGActiveX():New( oMainWindow, "BPTI.CoBpTiX1", 0, 0, 300, 300, 
"22BDC4E0-B4CF-4A29-8D6D-D7D17195394B" )
     //oBPTI := HWGActiveX():New( oMainWindow, "BPTI.CoBpTiX1", 0, 0, 300, 300 )
     oBPTI:InitLan("127.0.0.1", 2000)

return



CLASS HWGActiveX FROM HControl

     CLASS VAR winclass INIT "ACTIVEX"

     DATA oOLE INIT NIL

     METHOD New
     METHOD Event

     ERROR HANDLER OnError

ENDCLASS


METHOD New( oWnd, cProgId, nTop, nLeft, nWidth, nHeight, cID ) CLASS HWGActiveX

     local nStyle
     local hWnd

     nStyle := WS_CHILD + WS_VISIBLE + WS_CLIPCHILDREN
     //Super:New( oWnd, , nStyle, nLeft, nTop, nWidth, nHeight )
     WIN_AxInit()
     hWnd := WAPI_CreateWindowEX( 0, "AtlAxWin", cProgId, nStyle, nLeft, nTop, 
nWidth, nHeight, WIN_N2P( oWnd:handle ), 0 )
     ::oOLE := WIN_AxGetControl( hWnd, { | event, ... | ::Event( event, ... ) }, 
cID )

return self


METHOD Event( event, ... ) CLASS HWGActiveX

     MsgInfo( HB_ValToStr( event ) )
     MsgInfo( HB_ValToStr( ... ) )

return NIL


METHOD OnError() CLASS HWGActiveX

return HB_ExecFromArray( ::oOLE, __GetMessage(), HB_AParams() )
From dbtopas at dbtopas.lt  Fri Sep  4 05:31:12 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Sep  4 05:32:42 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12399] trunk/harbour
In-Reply-To: <E1MjKGk-0000xM-M0@3kljzd1.ch3.sourceforge.com>
References: <E1MjKGk-0000xM-M0@3kljzd1.ch3.sourceforge.com>
Message-ID: <4AA0DE60.6030900@dbtopas.lt>

Hi,


> 2009-09-03 23:54 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/contrib/hbwin/axcore.c
>     ! removed the hack I added in previous commit with interface enumeration
>       which was accepting any interface without validation its ID.
>     + added 3-rd parameter to __AXREGISTERHANDLER() as Mindaugas proposed.
>       Now this function has the following syntax:
>          __AXREGISTERHANDLER( <pDisp>, <bHandler> | <hHandlers>
>                               [, <cIID> ] ) -> <pDisp>
>       default value for <cIID> is IID_IDispatch.

Thank You.


Regards,
Mindaugas
From francek.prijatelj at siol.net  Fri Sep  4 05:34:09 2009
From: francek.prijatelj at siol.net (=?windows-1250?Q?FRAN=C8EK_PRIJATELJ?=)
Date: Fri Sep  4 05:34:17 2009
Subject: [Harbour] Patch for debugger.prg   (handling of init.cld)
Message-ID: <4AA0DF11.4000202@siol.net>

Hi

As you know debugger doesn't process init.cld well.
There is a  patch :


--- C:/RAZVOJ/HARBOUR/TEST/Debugger/debugger.prg    Fri Sep 04 11:18:59 
2009
+++ C:/HRB/SVN/SRC-SVN/source/debug/debugger.prg    Fri Sep 04 11:11:09 
2009
@@ -154,10 +154,6 @@
        s_oDebugger:aModules := uParam4
        s_oDebugger:aBreakPoints := uParam5
        IF lStartup
-         IF File( s_oDebugger:cSettingsFileName )
-            s_oDebugger:LoadSettings()
-            s_oDebugger:lGo := s_oDebugger:lRunAtStartup // Once again 
after settings file is loaded
-         ENDIF
           IF s_oDebugger:lRunAtStartup
              __dbgSetGo( uParam1 )
              RETURN
@@ -420,6 +416,12 @@

     ::BuildCommandWindow()
     ::BuildBrowseStack()
+
+   IF File( ::cSettingsFileName )
+      ::LoadSettings()
+      ::lGo := ::lRunAtStartup // Once again after settings file is loaded
+   ENDIF
+
     RETURN Self

  METHOD OpenDebuggerWindow() CLASS HBDebugger
@@ -2744,6 +2746,10 @@

     LOCAL nAt

+   IF !::lActive
+      RETURN NIL
+   ENDIF
+
     IF nLine == NIL
        cFileName := strip_path( ::cPrgName )
        nLine := ::oBrwText:RowPos()
@@ -2770,9 +2776,9 @@
           ::oBrwText:ToggleBreakPoint( nLine, .F. )
        ENDIF
     ENDIF
-   IF ::lActive
-      ::oBrwText:RefreshCurrent():ForceStable()
-   ENDIF
+
+   ::oBrwText:RefreshCurrent():ForceStable()
+
     RETURN NIL

-------------- next part --------------
A non-text attachment was scrubbed...
Name: francek_prijatelj.vcf
Type: text/x-vcard
Size: 182 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090904/c26ce427/francek_prijatelj.vcf
From dbtopas at dbtopas.lt  Fri Sep  4 05:32:56 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Sep  4 05:34:25 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4AA0D67F.7060501@mweb.co.za>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<20090903141421.GB1443@uran.home.aster.pl>	<4A9FD484.6050608@dbtopas.lt>	<4A9FD931.6060404@mweb.co.za>	<4A9FE2E4.4010107@dbtopas.lt>	<20090903215311.GA29866@uran.home.aster.pl>
	<4AA0D67F.7060501@mweb.co.za>
Message-ID: <4AA0DEC8.60200@dbtopas.lt>

Hi,


Alex Strickland wrote:
> To debug, in axcore.c I put:
> 
> 
>          if( cID )
>          {
>             wchar_t* wCLSID = hb_mbtowc( cID );
> MessageBox(NULL, "cID", cID, MB_OK);
>             lOleError = CLSIDFromString( wCLSID, &rriid );
>             hb_xfree( wCLSID );
>          }
> MessageBox(NULL, WIN_OLEErrorText( lOleError ), "CLSIDFromString", MB_OK);
> 
> 
> the ActiveX displays, I see the MessageBox with cID, and then lOLEError 
> is CO_E_CLASSSTRING, and then I get the runtime error, 3012, "Failed to 
> obtain connection point", but it *does not* GPF on shutdown. Strange 
> thing is that the app does not quit immediately, I see my shutdown 
> messages : MsgInfo( "Setting oMSCAL to nil" ). I'm not sure if HWGUI 
> errorsys is at fault with this or maybe it is the "ERROR HANDLER 
> OnError" clause.
> 
> If I pass "00020400-0000-0000-C000-000000000046" which I think is the 
> IID of IDispatch, it gives the same CO_E_CLASSSTRING error.

We have code:
       wCLSID = ( BSTR ) AnsiToWide( ( LPSTR ) cOleName );
       if( cOleName[ 0 ] == '{' )
          lOleError = CLSIDFromString( wCLSID, ( LPCLSID ) &ClassID );

So, I can make a conclusion, that "{" and "}" are missing in your 
ClassID parameter.


Regards,
Mindaugas
From sscc at mweb.co.za  Fri Sep  4 06:07:22 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Sep  4 06:07:31 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4AA0DEC8.60200@dbtopas.lt>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<20090903141421.GB1443@uran.home.aster.pl>	<4A9FD484.6050608@dbtopas.lt>	<4A9FD931.6060404@mweb.co.za>	<4A9FE2E4.4010107@dbtopas.lt>	<20090903215311.GA29866@uran.home.aster.pl>	<4AA0D67F.7060501@mweb.co.za>
	<4AA0DEC8.60200@dbtopas.lt>
Message-ID: <4AA0E6DA.1010802@mweb.co.za>

Mindaugas Kavaliauskas wrote:

> So, I can make a conclusion, that "{" and "}" are missing in your 
> ClassID parameter.

You're right, thank you.

     oMSCAL := HWGActiveX():New( oMainWindow, "MSCAL.Calendar", 0, 0, 300, 300, 
"{8E27C92D-1264-101C-8A2F-040224009C02}" )
     oMSCAL := HWGActiveX():New( oMainWindow, "MSCAL.Calendar", 0, 0, 300, 300, 
"{00020400-0000-0000-C000-000000000046}" )
     oMSCAL := HWGActiveX():New( oMainWindow, "MSCAL.Calendar", 0, 0, 300, 300 )

all work to register an event handler. However, each GPF's after a few events. 
Or if no events, GPF on shut down. Also when I run menu option "Change Date" I 
get a run-time error, Error BASE/1003  Variable does not exist: OMSCAL

For BPTI:

     oBPTI := HWGActiveX():New( oMainWindow, "BPTI.CoBpTiX1", 0, 0, 300, 300 )

fails with run-time error as expected.

     oBPTI := HWGActiveX():New( oMainWindow, "BPTI.CoBpTiX1", 0, 0, 300, 300, 
"{F41DF7FB-5014-4859-B4DD-854A9D2143CC}" )

seems to set up the event handler ok.

However, I get the same really weird errors afterwards, if I run "Init BPTI" : 
Error BASE/1003  Variable does not exist: OBPTI.

Regards
Alex


App :

#include "hbclass.ch"
#include "windows.ch"
#include "guilib.ch"


static oMSCAL
static oBPTI

memvar oMainWindow

public oMainWindow


function main()

     INIT WINDOW oMainWindow MAIN TITLE "Hello ActiveX"  ;
             AT 200, 0 SIZE 420, 300

     MENU OF oMainWindow
         MENU TITLE "&File"
             MENUITEM "Test &MSCal" ACTION { || MSCALInit() }
             MENUITEM "&Change Date" ACTION { || oMSCAL:NextDay() }
             SEPARATOR
             MENUITEM "Test &BPTI" ACTION { || BPTIInit() }
             MENUITEM "Init BPTI" ACTION { || BPTIInitLan() }
             MENUITEM "Disconnect BPTI" ACTION { || BPTIDisconnect() }
             SEPARATOR
             MENUITEM "E&xit" ACTION { || EndWindow() }
         ENDMENU
     ENDMENU

     MsgInfo( "Activate" )
     ACTIVATE WINDOW oMainWindow

     MsgInfo( "Setting oMSCAL to nil" )
     oMSCAL := nil
     MsgInfo( "Setting oBPTI to nil" )
     oBPTI := nil
     MsgInfo( "return nil" )

return nil


procedure MSCALInit()

     //oMSCAL := HWGActiveX():New( oMainWindow, "MSCAL.Calendar", 0, 0, 300, 
300, "{8E27C92D-1264-101C-8A2F-040224009C02}" )
     //oMSCAL := HWGActiveX():New( oMainWindow, "MSCAL.Calendar", 0, 0, 300, 
300, "{00020400-0000-0000-C000-000000000046}" )
     oMSCAL := HWGActiveX():New( oMainWindow, "MSCAL.Calendar", 0, 0, 300, 300 )

return


procedure BPTIInit()

     oBPTI := HWGActiveX():New( oMainWindow, "BPTI.CoBpTiX1", 0, 0, 300, 300, 
"{F41DF7FB-5014-4859-B4DD-854A9D2143CC}" )
     //oBPTI := HWGActiveX():New( oMainWindow, "BPTI.CoBpTiX1", 0, 0, 300, 300 )

return


procedure BPTIInitLan()

     oBPTI:InitLan("127.0.0.1", 2000)

return


procedure BPTIDisconnect()

     oBPTI:disconnect()

return



CLASS HWGActiveX FROM HControl

     CLASS VAR winclass INIT "ACTIVEX"

     DATA oOLE INIT NIL

     METHOD New
     METHOD Event

     ERROR HANDLER OnError

ENDCLASS


METHOD New( oWnd, cProgId, nTop, nLeft, nWidth, nHeight, cID ) CLASS HWGActiveX

     local nStyle
     local hWnd

     nStyle := WS_CHILD + WS_VISIBLE + WS_CLIPCHILDREN
     //Super:New( oWnd, , nStyle, nLeft, nTop, nWidth, nHeight )
     WIN_AxInit()
     hWnd := WAPI_CreateWindowEX( 0, "AtlAxWin", cProgId, nStyle, nLeft, nTop, 
nWidth, nHeight, WIN_N2P( oWnd:handle ), 0 )
     ::oOLE := WIN_AxGetControl( hWnd, { | event, ... | ::Event( event, ... ) }, 
cID )

return self


METHOD Event( event, ... ) CLASS HWGActiveX

     MsgInfo( HB_ValToStr( event ) )
     MsgInfo( HB_ValToStr( ... ) )

return NIL


METHOD OnError() CLASS HWGActiveX

return HB_ExecFromArray( ::oOLE, __GetMessage(), HB_AParams() )
From sscc at mweb.co.za  Fri Sep  4 06:14:24 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Sep  4 06:14:33 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4AA0DEC8.60200@dbtopas.lt>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<20090903141421.GB1443@uran.home.aster.pl>	<4A9FD484.6050608@dbtopas.lt>	<4A9FD931.6060404@mweb.co.za>	<4A9FE2E4.4010107@dbtopas.lt>	<20090903215311.GA29866@uran.home.aster.pl>	<4AA0D67F.7060501@mweb.co.za>
	<4AA0DEC8.60200@dbtopas.lt>
Message-ID: <4AA0E880.5090005@mweb.co.za>


If I try this I see a message box with "start" and then I get a run-time error???

#include "hbclass.ch"
#include "windows.ch"
#include "guilib.ch"


static oMSCAL:="fred"
static oBPTI

memvar oMainWindow

public oMainWindow


function main()
msginfo("start")
msginfo(oMSCal)

etc...

Error BASE/1003  Variable does not exist: OMSCAL
Called from MAIN(16)

Now, thoroughly confused ...

Regards
Alex
From sscc at mweb.co.za  Fri Sep  4 06:15:52 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Sep  4 06:16:00 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4AA0DEC8.60200@dbtopas.lt>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<20090903141421.GB1443@uran.home.aster.pl>	<4A9FD484.6050608@dbtopas.lt>	<4A9FD931.6060404@mweb.co.za>	<4A9FE2E4.4010107@dbtopas.lt>	<20090903215311.GA29866@uran.home.aster.pl>	<4AA0D67F.7060501@mweb.co.za>
	<4AA0DEC8.60200@dbtopas.lt>
Message-ID: <4AA0E8D8.6030008@mweb.co.za>

Actually if I try a console app:

static oMSCAL:="fred"
static oBPTI

memvar oMainWindow

public oMainWindow



function Main()

    ? "Hello world!"
    ? oMSCAL

return nil


It also fails on the second ? line.

Is this a regression, or am I being thick?

Regards
Alex
From dbtopas at dbtopas.lt  Fri Sep  4 06:21:41 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Sep  4 06:23:10 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4AA0E8D8.6030008@mweb.co.za>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<20090903141421.GB1443@uran.home.aster.pl>	<4A9FD484.6050608@dbtopas.lt>	<4A9FD931.6060404@mweb.co.za>	<4A9FE2E4.4010107@dbtopas.lt>	<20090903215311.GA29866@uran.home.aster.pl>	<4AA0D67F.7060501@mweb.co.za>	<4AA0DEC8.60200@dbtopas.lt>
	<4AA0E8D8.6030008@mweb.co.za>
Message-ID: <4AA0EA35.2070308@dbtopas.lt>

> Actually if I try a console app:
> 
> static oMSCAL:="fred"
> static oBPTI
> 
> memvar oMainWindow
> 
> public oMainWindow
> 
> 
> 
> function Main()
> 
>    ? "Hello world!"
>    ? oMSCAL
> 
> return nil
> 
> 
> It also fails on the second ? line.
> 
> Is this a regression, or am I being thick?


Use -n compiler switch.


Regards,
Mindaugas
From mhsabado at gmail.com  Fri Sep  4 06:52:39 2009
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Fri Sep  4 06:52:54 2009
Subject: [Harbour] HBNETIO - How I tested ...
In-Reply-To: <4a9dcfa8.9a15f10a.27ea.1645SMTPIN_ADDED@mx.google.com>
References: <4a9dcfa8.9a15f10a.27ea.1645SMTPIN_ADDED@mx.google.com>
Message-ID: <4AA0F177.3060107@gmail.com>

Hi Przemek,

> Simply replace:
>    pszIpAddres = hb_socketResolveAddr( pszServer, HB_SOCKET_AF_INET );
> with:
>    pszIpAddres = hb_strdup( pszServer );
Doing the above changes did reduce the opening (use) of database file in 
my test from ~9 seconds to 1.  I'm using Windows XP network 
environment.  Will this be adjusted accordingly from the repository?

Thanks and best regards,

Mario
From druzus at acn.waw.pl  Fri Sep  4 07:00:57 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep  4 07:01:04 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4AA0E8D8.6030008@mweb.co.za>
References: <20090903055857.GA6924@uran.home.aster.pl>
	<4A9FC5E2.6090701@dbtopas.lt>
	<20090903141421.GB1443@uran.home.aster.pl>
	<4A9FD484.6050608@dbtopas.lt> <4A9FD931.6060404@mweb.co.za>
	<4A9FE2E4.4010107@dbtopas.lt>
	<20090903215311.GA29866@uran.home.aster.pl>
	<4AA0D67F.7060501@mweb.co.za> <4AA0DEC8.60200@dbtopas.lt>
	<4AA0E8D8.6030008@mweb.co.za>
Message-ID: <20090904110057.GA25464@uran.home.aster.pl>

On Fri, 04 Sep 2009, Alex Strickland wrote:
> Actually if I try a console app:
>
> static oMSCAL:="fred"
> static oBPTI
> memvar oMainWindow
> public oMainWindow
> function Main()
>    ? "Hello world!"
>    ? oMSCAL
> return nil
> It also fails on the second ? line.
> Is this a regression, or am I being thick?


Your code is buggy. Also all the examples you send before.
Those definitions are not file wide because you are compiling
this code without -n switch.
If you try to compile this code with -n then ypou will have
compile time error because if have:
   public oMainWindow
outside procedure/functions.
Such syntax is not supported neither by Clipper nor Harbour.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Sep  4 07:03:25 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep  4 07:03:31 2009
Subject: [Harbour] HBNETIO - How I tested ...
In-Reply-To: <4AA0F177.3060107@gmail.com>
References: <4a9dcfa8.9a15f10a.27ea.1645SMTPIN_ADDED@mx.google.com>
	<4AA0F177.3060107@gmail.com>
Message-ID: <20090904110325.GA1026@uran.home.aster.pl>

On Fri, 04 Sep 2009, Mario H. Sabado wrote:

Hi,

>> Simply replace:
>>    pszIpAddres = hb_socketResolveAddr( pszServer, HB_SOCKET_AF_INET );
>> with:
>>    pszIpAddres = hb_strdup( pszServer );
> Doing the above changes did reduce the opening (use) of database file in my 
> test from ~9 seconds to 1.  I'm using Windows XP network environment.  Will 
> this be adjusted accordingly from the repository?

What is your C compiler?

best regards,
Przemek
From sscc at mweb.co.za  Fri Sep  4 08:14:03 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Sep  4 08:14:12 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4AA0EA35.2070308@dbtopas.lt>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<20090903141421.GB1443@uran.home.aster.pl>	<4A9FD484.6050608@dbtopas.lt>	<4A9FD931.6060404@mweb.co.za>	<4A9FE2E4.4010107@dbtopas.lt>	<20090903215311.GA29866@uran.home.aster.pl>	<4AA0D67F.7060501@mweb.co.za>	<4AA0DEC8.60200@dbtopas.lt>	<4AA0E8D8.6030008@mweb.co.za>
	<4AA0EA35.2070308@dbtopas.lt>
Message-ID: <4AA1048B.3080406@mweb.co.za>

Mindaugas Kavaliauskas wrote:

> Use -n compiler switch.

Hmmm, just thick. Thanks.

MSCAL loads as expected, events from MSCAL work well, exiting after loading 
MSCAL causes a GPF.

BPTI loads as expected (via new param), events from BPTI work well, exiting 
after loading BPTI causes a GPF.

HTTP loads as expected, events from HTTP work well, exiting after loading HTTP 
*does not* cause a GPF.

I can start and stop the ActiveX controls as many times as I like, no GPF.

The event handler which I have commented out causes GPFs, see my next e-mail.

I can't make destructors work automatically?

Regards
Alex

#include "hbclass.ch"
#include "windows.ch"
#include "guilib.ch"

function main()
     local oMSCAL
     local oBPTI
     local oHTTP
     local oMainWindow
     INIT WINDOW oMainWindow MAIN TITLE "Hello ActiveX"  ;
             AT 200, 0 SIZE 420, 300
     MENU OF oMainWindow
         MENU TITLE "&File"
             MENUITEM "Test MSCal" ACTION { || oMSCAL := HWGActiveX():New( 
oMainWindow, "MSCAL.Calendar", 0, 0, 300, 300 ) }
             MENUITEM "Change Date" ACTION { || oMSCAL:NextDay() }
             MENUITEM "Kill MSCal" ACTION { || oMSCal:Distroy(), oMSCAL := nil }
             SEPARATOR
             MENUITEM "Test BPTI" ACTION { || oBPTI := HWGActiveX():New( 
oMainWindow, "BPTI.CoBpTiX1", 0, 0, 300, 300, 
"{F41DF7FB-5014-4859-B4DD-854A9D2143CC}" ) }
             MENUITEM "Init BPTI" ACTION { || oBPTI:InitLan("127.0.0.1", 2000) }
             MENUITEM "Disconnect BPTI" ACTION { || oBPTI:disconnect() }
             MENUITEM "Kill BPTI" ACTION { || oBPTI:Distroy(), oBPTI := nil }
             SEPARATOR
             MENUITEM "HTTP" ACTION { || oHTTP := HWGActiveX():New( oMainWindow, 
"http://www.seamonkey-project.org/start/", 0, 0, 300, 300 ) }
             MENUITEM "Kill HTTP" ACTION { || oHTTP:Distroy(), oHTTP := nil }
             SEPARATOR
             MENUITEM "E&xit" ACTION { || EndWindow() }
         ENDMENU
     ENDMENU
     ACTIVATE WINDOW oMainWindow
return nil


CLASS HWGActiveX FROM HControl
     CLASS VAR winclass INIT "ACTIVEX"
     DATA oOLE INIT nil
     DATA hWnd INIT nil
     METHOD New
     METHOD Event
     METHOD Distroy
     ERROR HANDLER OnError
     //DESTRUCTOR Destroy
     //DESTRUCTOR Distroy
ENDCLASS

METHOD New( oWnd, cProgId, nTop, nLeft, nWidth, nHeight, cID ) CLASS HWGActiveX
     local nStyle
     nStyle := WS_CHILD + WS_VISIBLE + WS_CLIPCHILDREN
     WIN_AxInit()
     ::hWnd := WAPI_CreateWindowEX( 0, "AtlAxWin", cProgId, nStyle, nLeft, nTop, 
nWidth, nHeight, WIN_N2P( oWnd:handle ), 0 )
     ::oOLE := WIN_AxGetControl( ::hWnd, { | event, ... | ::Event( event, ... ) 
}, cID )
return self

// This causes a GPF !!!
//METHOD Event( event, ... ) CLASS HWGActiveX
     //MsgInfo( HB_ValToStr( event ) )
     //MsgInfo( HB_ValToStr( ... ) )
//return nil

METHOD Event( ... ) CLASS HWGActiveX
     local cEvents := ""
     local aEvents := { ... }
     local nHandle
     aEval(aEvents, { | xEvent | cEvents += HB_ValToStr( xEvent ) + ", " } )
     if !file( "Event.Log" )
         nHandle := fcreate( "Event.Log" )
     else
         nHandle := fopen( "Event.Log", 1 )
         fseek( nHandle, 0, 2 )
     endif
     fwrite( nHandle, cEvents + chr( 13 ) + chr( 10 ) )
     fclose( nHandle )
return nil

METHOD Distroy() CLASS HWGActiveX
     MsgInfo( "Bye" )
     DestroyWindow(WIN_P2N(::hWnd))
     ::hWnd := nil
return nil

METHOD OnError() CLASS HWGActiveX
return HB_ExecFromArray( ::oOLE, __GetMessage(), HB_AParams() )

From sscc at mweb.co.za  Fri Sep  4 08:16:47 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Sep  4 08:16:55 2009
Subject: [Harbour] Error with ellipsis operator?
Message-ID: <4AA1052F.4010500@mweb.co.za>

Hi Przemyslav

This app:

function Main()

     event( 1 )
     event( 1, 2 )

return nil

function event( nEvent, ... )

     ? hb_valtostr( nEvent )
     ? hb_valtostr( ... )

return nil


compiled with:

hbmk2 -n hello


gives this ouput:


          1
Unrecoverable error 6005: Exception error:

     Exception Code:C0000005
     Exception Address:0041723E
     EAX:9FFF7B33  EBX:0012FE6C  ECX:0022123C  EDX:00000000
     ESI:00000000  EDI:00000000  EBP:0012FE68
     CS:EIP:001B:0041723E  SS:ESP:0023:0012FE18
     DS:0023  ES:0023  FS:003B  GS:0000
     Flags:00010286
     CS:EIP: 8B 07 25 FF FF FB FF 89 5C 24 10 83 F8 20 0F 87
     SS:ESP: 00000000 00000000 0046F2CC 00000001 0047D000 0046F2BE 00417323 0012F
E78 0012FF88 00000000 00223EA8 00405D4B 004808A8 00000060 00000000 9FFF7B33

     C stack:
     EIP:     EBP:       Frame: OldEBP, RetAddr, Params...
     0041723E 0012FE68   004095B2 0012FE74 004095F3 00000003 00000000 00000000 00
000000 00000000 0041061E 00000000


Modules:
0x00400000 0x00084000 C:\Users\Alex\ECR6.4\tests\hello.exe
0x77640000 0x00127000 C:\Windows\system32\ntdll.dll
0x75CF0000 0x000DC000 C:\Windows\system32\kernel32.dll
0x76CA0000 0x0009D000 C:\Windows\system32\USER32.dll
0x76BC0000 0x0004B000 C:\Windows\system32\GDI32.dll
0x773E0000 0x000C6000 C:\Windows\system32\ADVAPI32.dll
0x75FE0000 0x000C3000 C:\Windows\system32\RPCRT4.dll
0x75E30000 0x0001E000 C:\Windows\system32\IMM32.DLL
0x76D40000 0x000C8000 C:\Windows\system32\MSCTF.dll
0x77330000 0x000AA000 C:\Windows\system32\msvcrt.dll
0x77190000 0x00009000 C:\Windows\system32\LPK.DLL
0x775C0000 0x0007D000 C:\Windows\system32\USP10.dll

Called from HB_VALTOSTR(0)
Called from EVENT(11) in hello.prg
Called from MAIN(3) in hello.prg

Regards
Alex
From druzus at acn.waw.pl  Fri Sep  4 08:40:14 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep  4 08:40:21 2009
Subject: [Harbour] Error with ellipsis operator?
In-Reply-To: <4AA1052F.4010500@mweb.co.za>
References: <4AA1052F.4010500@mweb.co.za>
Message-ID: <20090904124014.GA8816@uran.home.aster.pl>

On Fri, 04 Sep 2009, Alex Strickland wrote:

Hi,

> This app:
> function Main()
>     event( 1 )
>     event( 1, 2 )
> return nil
> function event( nEvent, ... )
>     ? hb_valtostr( nEvent )
>     ? hb_valtostr( ... )
> return nil
> gives this ouput:
> Unrecoverable error 6005: Exception error:
[...]
> Called from HB_VALTOSTR(0)
> Called from EVENT(11) in hello.prg
> Called from MAIN(3) in hello.prg

Thank you very much for information. Here is reduced example:
   proc main()
      hb_valtostr()
   return
for the same problem. I'll fix it in a while.

best regards,
Przemek
From druzus at users.sourceforge.net  Fri Sep  4 09:13:12 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Fri Sep  4 09:13:20 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12401] trunk/harbour
Message-ID: <E1MjYbI-0002v9-Nn@dn4whf1.ch3.sourceforge.com>

Revision: 12401
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12401&view=rev
Author:   druzus
Date:     2009-09-04 13:13:07 +0000 (Fri, 04 Sep 2009)

Log Message:
-----------
2009-09-04 15:12 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/doc/cmpopt.txt
    * added information about ( "<alias>" )-> to <alias>-> compile time
      optimization

  * harbour/source/rtl/valtostr.c
    ! fixed GPF if hb_valToStr() is called without any parameters.
      In such case RTE is generated.

  * harbour/source/rtl/transfrm.c
    ! fixed GPF if transform() is called without any parameters, i.e.:
         ? &("transform")()

  * harbour/source/vm/itemapi.c
    ! return "U" if hb_itemTypeStr() is called with NULL parameter
      It fixed GPF when valtype() is called without any parameters, i.e.:
         ? &("valtype")()

      NOTE: Compiler check number of parameters in some functions and
            refuse to compile the code when it's wrong but such validation
            does not work in macrocompiler or when function is called
            indirectly like in above examples or using function symbols
            so always write such functions to work with wrong number of
            parameters.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/doc/cmpopt.txt
    trunk/harbour/source/rtl/transfrm.c
    trunk/harbour/source/rtl/valtostr.c
    trunk/harbour/source/vm/itemapi.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From sscc at mweb.co.za  Fri Sep  4 10:22:16 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Sep  4 10:22:26 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4AA1048B.3080406@mweb.co.za>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<20090903141421.GB1443@uran.home.aster.pl>	<4A9FD484.6050608@dbtopas.lt>	<4A9FD931.6060404@mweb.co.za>	<4A9FE2E4.4010107@dbtopas.lt>	<20090903215311.GA29866@uran.home.aster.pl>	<4AA0D67F.7060501@mweb.co.za>	<4AA0DEC8.60200@dbtopas.lt>	<4AA0E8D8.6030008@mweb.co.za>	<4AA0EA35.2070308@dbtopas.lt>
	<4AA1048B.3080406@mweb.co.za>
Message-ID: <4AA12298.3060609@mweb.co.za>

Alex Strickland wrote:

> MSCAL loads as expected, events from MSCAL work well, exiting after 
> loading MSCAL causes a GPF.
> 
> BPTI loads as expected (via new param), events from BPTI work well, 
> exiting after loading BPTI causes a GPF.
> 
> HTTP loads as expected, events from HTTP work well, exiting after 
> loading HTTP *does not* cause a GPF.

I'm wrong, it does GPF :(

I have noticed that Release() is called after each HTTP event, it is not called 
after events for the other two controls. Nor is it called at exit.

This is unfathomable.

Regards
Alex



From sscc at mweb.co.za  Fri Sep  4 10:40:57 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Sep  4 10:41:07 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4AA12298.3060609@mweb.co.za>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<20090903141421.GB1443@uran.home.aster.pl>	<4A9FD484.6050608@dbtopas.lt>	<4A9FD931.6060404@mweb.co.za>	<4A9FE2E4.4010107@dbtopas.lt>	<20090903215311.GA29866@uran.home.aster.pl>	<4AA0D67F.7060501@mweb.co.za>	<4AA0DEC8.60200@dbtopas.lt>	<4AA0E8D8.6030008@mweb.co.za>	<4AA0EA35.2070308@dbtopas.lt>	<4AA1048B.3080406@mweb.co.za>
	<4AA12298.3060609@mweb.co.za>
Message-ID: <4AA126F9.9070407@mweb.co.za>

Alex Strickland wrote:
>> HTTP loads as expected, events from HTTP work well, exiting after 
>> loading HTTP *does not* cause a GPF.
> 
> I'm wrong, it does GPF :(

I'm wrong again, it does not GPF, it was my own debugging that was doing it. The 
count on pSink never drops below 1?

Regards
Alex

From mhsabado at gmail.com  Fri Sep  4 10:52:56 2009
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Fri Sep  4 10:53:13 2009
Subject: [Harbour] HBNETIO - How I tested ...
In-Reply-To: <4aa1274b.8915f10a.31ba.ffffe0a7SMTPIN_ADDED@mx.google.com>
References: <4aa1274b.8915f10a.31ba.ffffe0a7SMTPIN_ADDED@mx.google.com>
Message-ID: <4AA129C8.6030303@gmail.com>

On Fri, 04 Sep 2009, Mario H. Sabado wrote:

Hi,


>> >> Simply replace:
>> >>    pszIpAddres = hb_socketResolveAddr( pszServer, HB_SOCKET_AF_INET );
>> >> with:
>> >>    pszIpAddres = hb_strdup( pszServer );
>>     
> > Doing the above changes did reduce the opening (use) of database file in my 
> > test from ~9 seconds to 1.  I'm using Windows XP network environment.  Will 
> > this be adjusted accordingly from the repository?
>   

What is your C compiler?

best regards,
Przemek


Hi Przemek,  

I'm using BCC 5.82.  My apology for the incomplete info.

Thanks again.

Mario





-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090904/5a7be4da/attachment.html
From bruno.luciani at gmail.com  Fri Sep  4 11:55:45 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Fri Sep  4 11:55:51 2009
Subject: [Harbour] MultiThreads
Message-ID: <133778360909040855o41463000n5fd2c1a437fe8b33@mail.gmail.com>

*When I need to compile a harbour code in console mode and need to use
**MultiThreads,
I use -mt nodifier to include
 **libhbvmMT.a   instead  libhbvm.a

I like to know what problems or disadvantages could  be generated if I use
this by default , in programs that not use **MultiThreads


Thanks in advance

Bruno Luciani
**

*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090904/d0010088/attachment.html
From dbtopas at dbtopas.lt  Fri Sep  4 12:03:48 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Sep  4 12:05:18 2009
Subject: [Harbour] MultiThreads
In-Reply-To: <133778360909040855o41463000n5fd2c1a437fe8b33@mail.gmail.com>
References: <133778360909040855o41463000n5fd2c1a437fe8b33@mail.gmail.com>
Message-ID: <4AA13A64.2090009@dbtopas.lt>

> /When I need to compile a harbour code in console mode and need to use 
> //MultiThreads, I use -mt nodifier to include
>  //libhbvmMT.a   instead  libhbvm.a  
> 
> I like to know what problems or disadvantages could  be generated if I 
> use this by default , in programs that not use //MultiThreads

MT causes some overhead. So, code could be for example 25% slower 
(depends on compiler, platform, etc., see mailing list archive for more 
precise numbers).


Regards,
Mindaugas
From mhsabado at gmail.com  Fri Sep  4 12:05:05 2009
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Fri Sep  4 12:05:21 2009
Subject: [Harbour] HBNETIO FileCopy Support
In-Reply-To: <4a9ebe96.9c15f10a.09fa.4c93SMTPIN_ADDED@mx.google.com>
References: <4a9ebe96.9c15f10a.09fa.4c93SMTPIN_ADDED@mx.google.com>
Message-ID: <4AA13AB1.2020909@gmail.com>


Hi Przemek,

How to copy a file from server to/from local workstation via HBNETIO?  I 
have to copy files from my program folder to local for faster processing 
of reports in my application.  I'm using external report writer.  I 
think this is one remaining issue to convert my application to HBNETIO.

Thanks,
Mario
From sscc at mweb.co.za  Fri Sep  4 12:05:55 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Sep  4 12:06:04 2009
Subject: [Harbour] HB_ValToStr
Message-ID: <4AA13AE3.5060503@mweb.co.za>

Hi

I have a fragment:

     wapi_OutputDebugString( "OnError = " + iif(empty(::oole), " empty", "not 
empty"))
     wapi_OutputDebugString( "OnError = " + hb_ValToStr(::oOLE) )

Which outputs:

[4636] OnError = not empty
[4636] OnError =

in the debug console. Surely I should see a hex value? ::oOLE is definitely 
working as a pointer.

Regards
Alex
From bruno.luciani at gmail.com  Fri Sep  4 12:43:14 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Fri Sep  4 12:43:20 2009
Subject: [Harbour] MultiThreads
In-Reply-To: <4AA13A64.2090009@dbtopas.lt>
References: <133778360909040855o41463000n5fd2c1a437fe8b33@mail.gmail.com>
	<4AA13A64.2090009@dbtopas.lt>
Message-ID: <133778360909040943v747ec1k41c2f6c835a445fe@mail.gmail.com>

Thanks Mindaugas

Bruno

2009/9/4 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>

> /When I need to compile a harbour code in console mode and need to use
>> //MultiThreads, I use -mt nodifier to include
>>  //libhbvmMT.a   instead  libhbvm.a
>> I like to know what problems or disadvantages could  be generated if I use
>> this by default , in programs that not use //MultiThreads
>>
>
> MT causes some overhead. So, code could be for example 25% slower (depends
> on compiler, platform, etc., see mailing list archive for more precise
> numbers).
>
>
> Regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090904/25222869/attachment.html
From Istvan.Bisz at t-online.hu  Fri Sep  4 13:01:24 2009
From: Istvan.Bisz at t-online.hu (=?iso-8859-1?Q?Bisz_Istv=E1n?=)
Date: Fri Sep  4 13:01:42 2009
Subject: [Harbour] demoxbp segfault in Fedora 11
In-Reply-To: <9257026e0909032316h2488ffb1w29db3dad85dcb246@mail.gmail.com>
References: <9257026e0909032316h2488ffb1w29db3dad85dcb246@mail.gmail.com>
Message-ID: <001801ca2d81$5641e2b0$02c5a810$@Bisz@t-online.hu>

Hi,

I just finished the demoxbp testing. It works without the mentioned error
with the latest commits and KDE qt-devel installed, but without QT SDK from
Trolltech site.

Best regards,
Istv?n 

-----Original Message-----
From: Lorenzo Fiorini [mailto:lorenzo.fiorini@gmail.com] 
Sent: 2009. szeptember 4. 8:16
To: Harbour Project Main Developer List.
Subject: [Harbour] demoxbp segfault in Fedora 11

Using QT SDK from trolltech site ./demoxbp worked as expected.
Then I've installed distro's KDE and qt-dev and I always get at start:

Program received signal SIGSEGV, Segmentation fault.
0x006a9163 in strlen () from /lib/libc.so.6
...
(gdb) bt
#0  0x006a9163 in strlen () from /lib/libc.so.6
#1  0x00e2d04f in XSetCommand () from /usr/lib/libX11.so.6
#2  0x00e31aa1 in XSetWMProperties () from /usr/lib/libX11.so.6
#3  0x05a88128 in QWidgetPrivate::create_sys(unsigned long, bool, bool) ()
   from /usr/lib/libQtGui.so.4
#4  0x05a4b6b0 in QWidget::create(unsigned long, bool, bool) ()
   from /usr/lib/libQtGui.so.4
#5  0x05a477e6 in QWidgetPrivate::createWinId(unsigned long) ()
   from /usr/lib/libQtGui.so.4
#6  0x05a4b0a8 in QWidgetPrivate::setWindowTitle_helper(QString const&) ()
   from /usr/lib/libQtGui.so.4
#7  0x05a4b4e2 in QWidget::setWindowTitle(QString const&) ()
   from /usr/lib/libQtGui.so.4
#8  0x080c3fd1 in HB_FUN_ERRORNEW ()
#9  0x00d450ff in hb_vmProc () from /opt/harbour/lib/libharbour.so
#10 0x00d13e35 in hb_vmExecute () from /opt/harbour/lib/libharbour.so
#11 0x00d480ff in hb_vmDoBlock () from /opt/harbour/lib/libharbour.so
#12 0x00d17912 in hb_vmSend () from /opt/harbour/lib/libharbour.so
#13 0x00d429ce in hb___msgEvalInline () from /opt/harbour/lib/libharbour.so
#14 0x00d17912 in hb_vmSend () from /opt/harbour/lib/libharbour.so
#15 0x00d150ef in hb_vmExecute () from /opt/harbour/lib/libharbour.so
#16 0x080770bb in HB_FUN_ERRORNEW ()
#17 0x080d45a0 in ?? ()
#18 0x0815ace0 in HB_FUN_ERRORNEW ()
#19 0x00000008 in ?? ()
#20 0xbfffea5c in ?? ()
#21 0x08159c90 in HB_FUN_ERRORNEW ()
#22 0x081afae8 in ?? ()
#23 0xbfffea88 in ?? ()
#24 0x00d17912 in hb_vmSend () from /opt/harbour/lib/libharbour.so
Backtrace stopped: frame did not save the PC
(gdb)

using valgrind --tool=memcheck --leak-check=yes -v ./demoxbp &>
demoxbp.log I see:
...
==11511== Invalid read of size 1
==11511==    at 0x4007668: strlen (mc_replace_strmem.c:242)
==11511==    by 0x9AB04E: XSetCommand (in /usr/lib/libX11.so.6.2.0)
==11511==    by 0x9AFAA0: XSetWMProperties (in /usr/lib/libX11.so.6.2.0)
==11511==    by 0x5A88127: QWidgetPrivate::create_sys(unsigned long,
bool, bool) (in /usr/lib/libQtGui.so.4.5.2)
==11511==    by 0x5A4B6AF: QWidget::create(unsigned long, bool, bool)
(in /usr/lib/libQtGui.so.4.5.2)
==11511==    by 0x5A477E5: QWidgetPrivate::createWinId(unsigned long)
(in /usr/lib/libQtGui.so.4.5.2)
==11511==    by 0x5A4B0A7:
QWidgetPrivate::setWindowTitle_helper(QString const&) (in
/usr/lib/libQtGui.so.4.5.2)
==11511==    by 0x5A4B4E1: QWidget::setWindowTitle(QString const&) (in
/usr/lib/libQtGui.so.4.5.2)
==11511==    by 0x80C3FD0: (within
/home/twfiorlo/workspace/harbour/contrib/hbxbp/tests/demoxbp)
==11511==    by 0x43AE0FE: hb_vmProc (in
/opt/harbour/lib/libharbour-2.0.0.so)
==11511==    by 0x437CE34: hb_vmExecute (in
/opt/harbour/lib/libharbour-2.0.0.so)
...

Is there anything we can do at hbqt side?

best regards,
Lorenzo


From harbour.01 at syenar.hu  Fri Sep  4 13:08:20 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 13:08:31 2009
Subject: [Harbour] Will hbmk2 be renamed to hbmk?
In-Reply-To: <609353e70908300303g40a8478bg55aea79283531b86@mail.gmail.com>
References: <609353e70908300303g40a8478bg55aea79283531b86@mail.gmail.com>
Message-ID: <B9BF3023-81C1-49E1-8B35-B79717C20715@syenar.hu>

There is one prerequisite: we should drop hbmk script to
do this. AFACS everything is in place to make this move,
but I'd like to hear other opinions.

If this is done, we can think about the name. To tell the
truth I got used to the name 'hbmk2' quite much (and I guess
some users as well), so IMO it's okay to keep it. It's also
much easier to search for than 'hbmk'. But, opinions are
welcome also here.

Brgds,
Viktor

On 2009.08.30., at 0:03, Massimo Belgrano wrote:

> Will hbmk2 be renamed to hbmk?
>
> -- 
> Massimo Belgrano
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Sep  4 14:23:01 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 14:29:22 2009
Subject: [Harbour] HbQt Static and Dynamic
In-Reply-To: <578c73340908310700we64c422ga27639405bc97e77@mail.gmail.com>
References: <578c73340908310700we64c422ga27639405bc97e77@mail.gmail.com>
Message-ID: <9E1089C7-DCD8-474D-9F1F-4138086EB139@syenar.hu>

I'll change current method to enable static build also,
rather than switching to it.

The switch (when enabled) will cause a significantly longer
build process.

Brgds,
Viktor

On 2009.08.31., at 4:00, CarozoDeQuilmes wrote:

> Hi Viktor / Pritpal
>
> I use Dynamic HbQt Library and Static HbQt Library in my project  
> with great success, but I need make HbQt Static library and HbQt  
> Dynamic library simultaneously, because I need test any change in  
> HbQt source in both cases
>
> I ask: Is possible add some environment var (like HB_QT_STATIC) with  
> default "NO" that make both libaries (instead of just only one  
> library) ???
>
> Thanks in advance
> CdQ
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Sep  4 14:30:55 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 14:31:03 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12377] trunk/harbour
In-Reply-To: <E1Mi7DR-0007Sw-Fz@74yxhf1.ch3.sourceforge.com>
References: <E1Mi7DR-0007Sw-Fz@74yxhf1.ch3.sourceforge.com>
Message-ID: <98486C7A-B125-4552-B9BD-1EBE823F6C35@syenar.hu>

Hi Przemek,

May I change HB_*_TCP to HB_*_WATT? Could be I'm not overseeing the
whole matter yet, but these names should reflect the exact component
detected, not just an area of functionality.

Brgds,
Viktor

On 2009.08.31., at 3:46, druzus@users.sourceforge.net wrote:

> Revision: 12377
>          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12377&view=rev
> Author:   druzus
> Date:     2009-08-31 13:46:36 +0000 (Mon, 31 Aug 2009)
>
> Log Message:
> -----------
> 2009-08-31 15:46 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/config/detect.mk
>  * harbour/source/rtl/Makefile
>  * harbour/source/rtl/hbsocket.c
>    + added support for TCPIP in DOS builds using WATTCP/WATT-32  
> library.
>      The latest release of Watt-32 is available at
>      http://www.bgnett.no/~giva/
>
> Modified Paths:
> --------------
>    trunk/harbour/ChangeLog
>    trunk/harbour/config/detect.mk
>    trunk/harbour/source/rtl/Makefile
>    trunk/harbour/source/rtl/hbsocket.c
>
>
> This was sent by the SourceForge.net collaborative development  
> platform, the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Sep  4 14:35:04 2009
From: harbour.01 at syenar.hu (=?WINDOWS-1250?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 14:35:12 2009
Subject: [Harbour] Error compiling .cpp files
In-Reply-To: <4A9C1AF4.6070608@siol.net>
References: <4A9C1AF4.6070608@siol.net>
Message-ID: <4821A41D-4399-4F55-A352-A240C86DB43F@syenar.hu>

I'll fix this.

Brgds,
Viktor

On 2009.08.31., at 8:48, FRAN?EK PRIJATELJ wrote:

> Hi
>
> Building Harbour with msvc , *.cpp files from HbQt are compiled
> with mingw g++ (with msvc flags), while *.c files are correctly
> compiled with cl.exe.
>
> Sample:
>
> ! Building Harbour 2.0.0beta2 from source - http://www.harbour-project.org
> ! MAKE: mingw32-make 3.81 sh.exe clean install i
> ! HB_INSTALL_PREFIX: C:\HRB\msvc_D_Tr
> ! HB_BIN_INSTALL: C:\HRB\msvc_D_Tr\bin
> ! HB_LIB_INSTALL: C:\HRB\msvc_D_Tr\lib
> ! HB_INC_INSTALL: C:\HRB\msvc_D_Tr\include
> ! HB_DOC_INSTALL: C:\HRB\msvc_D_Tr\doc
> ! HB_BUILD_MODE: cpp
> ! HB_HOST_PLAT: win (x86)  HB_SHELL: nt
> ! HB_PLATFORM: win (x86)
> ! HB_COMPILER: msvc
>
>
> cl.exe  -nologo -I. -I../../../../../include -Gs -TP -W4 -wd4127 - 
> Ot2b1
> -EHs-c- -MT    -Foexpropt1.obj -c ../../../expropt1.c
> expropt1.c
> .
> .
> .
> g++  -nologo -I. -I../../../../../include -Gs -TP -W4 -wd4127 -Ot2b1
> -EHs-c- -MT   -IC:\Qt\2009.03\qt_msvc\include
> -IC:\Qt\2009.03\qt_msvc\include/Qt
> -IC:\Qt\2009.03\qt_msvc\include/QtCore
> -IC:\Qt\2009.03\qt_msvc\include/QtGui
> -IC:\Qt\2009.03\qt_msvc\include/QtNetwork
> -IC:\Qt\2009.03\qt_msvc\include/QtWebKit  -Fomoc_slots.obj -c
> ../../../moc_slots.cpp
> cc1plus.exe: error: invalid option argument `-Ot2b1'
> cc1plus.exe: error: to generate dependencies you must specify either  
> -M
> or -MM
> .
> .
> .
> cl.exe  -nologo -I. -I../../../../../include -Gs -TP -W4 -wd4127 - 
> Ot2b1
> -EHs-c- -MT   -IC:\Qt\2009.03\qt_msvc\include
> -IC:\Qt\2009.03\qt_msvc\include/Qt
> -IC:\Qt\2009.03\qt_msvc\include/QtCore
> -IC:\Qt\2009.03\qt_msvc\include/QtGui
> -IC:\Qt\2009.03\qt_msvc\include/QtNetwork
> -IC:\Qt\2009.03\qt_msvc\include/QtWebKit  -FoTQAbstractButton.obj -c
> TQAbstractButton.c
> TQAbstractButton.c
> .
> .
> .
>
>
>
> BRGS
>
> Fran?ek
>
> <francek_prijatelj.vcf>_______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From francek.prijatelj at siol.net  Fri Sep  4 05:28:27 2009
From: francek.prijatelj at siol.net (=?windows-1250?Q?FRAN=C8EK_PRIJATELJ?=)
Date: Fri Sep  4 14:46:41 2009
Subject: [Harbour] Patch for debugger.prg
Message-ID: <4AA0DDBB.50308@siol.net>

Hi

As you know debugger doesn't process init.cld well.
There is a  patch :


--- C:/RAZVOJ/HARBOUR/TEST/Debugger/debugger.prg    Fri Sep 04 11:18:59 2009
+++ C:/HRB/SVN/SRC-SVN/source/debug/debugger.prg    Fri Sep 04 11:11:09 2009
@@ -154,10 +154,6 @@
        s_oDebugger:aModules := uParam4
        s_oDebugger:aBreakPoints := uParam5
        IF lStartup
-         IF File( s_oDebugger:cSettingsFileName )
-            s_oDebugger:LoadSettings()
-            s_oDebugger:lGo := s_oDebugger:lRunAtStartup // Once again 
after settings file is loaded
-         ENDIF
           IF s_oDebugger:lRunAtStartup
              __dbgSetGo( uParam1 )
              RETURN
@@ -420,6 +416,12 @@

     ::BuildCommandWindow()
     ::BuildBrowseStack()
+
+   IF File( ::cSettingsFileName )
+      ::LoadSettings()
+      ::lGo := ::lRunAtStartup // Once again after settings file is loaded
+   ENDIF
+
     RETURN Self

  METHOD OpenDebuggerWindow() CLASS HBDebugger
@@ -2744,6 +2746,10 @@

     LOCAL nAt

+   IF !::lActive
+      RETURN NIL
+   ENDIF
+
     IF nLine == NIL
        cFileName := strip_path( ::cPrgName )
        nLine := ::oBrwText:RowPos()
@@ -2770,9 +2776,9 @@
           ::oBrwText:ToggleBreakPoint( nLine, .F. )
        ENDIF
     ENDIF
-   IF ::lActive
-      ::oBrwText:RefreshCurrent():ForceStable()
-   ENDIF
+
+   ::oBrwText:RefreshCurrent():ForceStable()
+
     RETURN NIL


-------------- next part --------------
/*
 * $Id: debugger.prg 11101 2009-05-22 09:59:20Z druzus $
 */

/*
 * Harbour Project source code:
 * The Debugger
 *
 * Copyright 1999 Antonio Linares <alinares@fivetechsoft.com>
 * www - http://www.harbour-project.org
 *
 * Copyright 2003-2006 Phil Krylov <phil@newstar.rinet.ru>
 * www - http://www.xharbour.org
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version, with one exception:
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2, or (at your option)
 * any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this software; see the file COPYING.  If not, write to
 * the Free Software Foundation, Inc., 59 Temple Place, Suite 330,
 * Boston, MA 02111-1307 USA (or visit the web site http://www.gnu.org/).
 *
 * As a special exception, the Harbour Project gives permission for
 * additional uses of the text contained in its release of Harbour.
 *
 * The exception is that, if you link the Harbour libraries with other
 * files to produce an executable, this does not by itself cause the
 * resulting executable to be covered by the GNU General Public License.
 * Your use of that executable is in no way restricted on account of
 * linking the Harbour library code into it.
 *
 * This exception does not however invalidate any other reasons why
 * the executable file might be covered by the GNU General Public License.
 *
 * This exception applies only to the code released by the Harbour
 * Project under the name Harbour.  If you copy code from other
 * Harbour Project or Free Software Foundation releases into a copy of
 * Harbour, as the General Public License permits, the exception does
 * not apply to the code that you add in this way.  To avoid misleading
 * anyone as to the status of such modified files, you must delete
 * this exception notice from them.
 *
 * If you write modifications of your own for Harbour, it is your choice
 * whether to permit this exception to apply to your modifications.
 * If you do not wish that, delete this exception notice.
 *
 */

/*
 * The following parts are Copyright of the individual authors.
 * www - http://www.harbour-project.org
 *
 * Copyright 2007 Przemyslaw Czerpak <druzus / at / priv.onet.pl>
 *    __dbgCStr()
 *
 * See COPYING for licensing terms.
 *
 */

/* NOTE: Don't use SAY/DevOut()/DevPos() for screen output, otherwise
         the debugger output may interfere with the applications output
         redirection, and is also slower. [vszakats] */

#pragma DEBUGINFO=OFF

#define HB_CLS_NOTOBJECT      /* do not inherit from HBObject calss */
#include "hbclass.ch"

#include "hbdebug.ch"   /* for "nMode" of __dbgEntry */
#include "hbgtinfo.ch"
#include "hbmemvar.ch"

#include "box.ch"
#include "common.ch"
#include "getexit.ch"
#include "inkey.ch"
#include "set.ch"
#include "setcurs.ch"


/* Information structure stored in DATA aCallStack */
#define CSTACK_MODULE           1  // module name (.prg file)
#define CSTACK_FUNCTION         2  // function name
#define CSTACK_LINE             3  // start line
#define CSTACK_LEVEL            4  // eval stack level of the function
#define CSTACK_LOCALS           5  // an array with local variables
#define CSTACK_STATICS          6  // an array with static variables

/* Information structure stored in aCallStack[ n ][ CSTACK_LOCALS ]
   { cLocalName, nLocalIndex, "Local", ProcName( 1 ), nLevel } */
#define VAR_NAME                1
#define VAR_POS                 2
#define VAR_TYPE                3
#define VAR_LEVEL               4  // eval stack level of the function

/* Information structure stored in ::aWatch (watchpoints) */
#define WP_TYPE                 1  // wp = watchpoint, tr = tracepoint
#define WP_EXPR                 2  // source of an expression

/* Information structure stored in ::aModules */
#define MODULE_NAME             1
#define MODULE_STATICS          2
#define MODULE_GLOBALS          3
#define MODULE_EXTERNGLOBALS    4

/* The dimensions of the debugger window */
#define DEBUGGER_MINROW         0
#define DEBUGGER_MINCOL         0
#define DEBUGGER_MAXROW         22
#define DEBUGGER_MAXCOL         77

THREAD STATIC s_oDebugger

PROCEDURE __dbgAltDEntry()

   /* do not activate the debugger imediatelly because the module
      where ALTD() was called can have no debugger info - stop
      on first LINE with debugged info
    */
   __dbgINVOKEDEBUG( Set( _SET_DEBUG ) )

   RETURN

/* debugger entry point */
PROCEDURE __dbgEntry( nMode, uParam1, uParam2, uParam3, uParam4, uParam5 )

   LOCAL lStartup

   DO CASE
   CASE nMode == HB_DBG_GETENTRY

      __dbgSetEntry()

   CASE nMode == HB_DBG_ACTIVATE

      IF ( lStartup := ( s_oDebugger == NIL ) )
         s_oDebugger := HBDebugger():New()
         s_oDebugger:pInfo := uParam1
      ENDIF
      s_oDebugger:nProcLevel := uParam2
      s_oDebugger:aCallStack := uParam3
      s_oDebugger:aModules := uParam4
      s_oDebugger:aBreakPoints := uParam5
      IF lStartup
         IF File( s_oDebugger:cSettingsFileName )
            s_oDebugger:LoadSettings() 
            s_oDebugger:lGo := s_oDebugger:lRunAtStartup // Once again after settings file is loaded
         ENDIF
         IF s_oDebugger:lRunAtStartup
            __dbgSetGo( uParam1 )
            RETURN
         ENDIF
      ENDIF
      s_oDebugger:lGo := .F.
      s_oDebugger:Activate()

   ENDCASE

   RETURN

CREATE CLASS HBDebugger

   VAR pInfo
   VAR aWindows          INIT {}
   VAR nCurrentWindow    INIT 1
   VAR oPullDown

   VAR oWndCode
   VAR oWndCommand
   VAR oWndStack
   VAR oWndVars

   VAR oBrwText
   VAR cPrgName
   VAR oBrwStack
   VAR oBrwVars
   VAR aVars             INIT {}

   VAR nAppDispCount

   VAR nAppDirCase
   VAR nAppFileCase
   VAR nAppTypeAhead
   VAR nAppLastKey

   VAR bAppInkeyAfter
   VAR bAppInkeyBefore
   VAR bAppClassScope

   VAR nMaxRow
   VAR nMaxCol

   VAR hUserWindow
   VAR hDebuggerWindow
   VAR lDebuggerWindowIsOpen INIT .F.

   VAR aBreakPoints      INIT {}
   VAR aCallStack        INIT {}    // stack of procedures with debug info
   VAR aProcStack        INIT {}    // stack of all procedures
   VAR nProcLevel                   // procedure level where the debugger is currently
   VAR aModules          INIT {}    // array of modules with static and GLOBAL variables
   VAR aWatch            INIT {}
   VAR aColors           INIT { "W+/BG", "N/BG", "R/BG", "N+/BG", "W+/B", "GR+/B", "W/B", "N/W", "R/W", "N/BG", "R/BG" }

   VAR aLastCommands
   VAR nCommand
   VAR oGet

   VAR lAnimate          INIT .F.
   VAR lEnd              INIT .F.
   VAR lCaseSensitive    INIT .F.
   VAR lMonoDisplay      INIT .F.
   VAR lSortVars         INIT .F.

   VAR cSearchString     INIT ""
   VAR cPathForFiles
   VAR cSettingsFileName INIT "init.cld"
   VAR aPathDirs

   VAR nTabWidth         INIT 4
   VAR nSpeed            INIT 0

   VAR lShowPublics      INIT .F.
   VAR lShowPrivates     INIT .F.
   VAR lShowStatics      INIT .F.
   VAR lShowLocals       INIT .F.
   VAR lShowGlobals      INIT .F.
   VAR lShowAllGlobals   INIT .F.
   VAR lAll              INIT .F.
   VAR lShowCallStack    INIT .F.
   VAR lGo                          // stores if GO was requested
   VAR lActive           INIT .F.
   VAR lCBTrace          INIT .T.   // stores if codeblock tracing is allowed
   VAR oBrwPnt
   VAR oWndPnt
   VAR lPPO              INIT .F.
   VAR lRunAtStartup     INIT .T.   // Clipper compatible
   VAR lLineNumbers      INIT .T.
   VAR nHelpPage         INIT 1
   VAR nWaFocus          INIT 1

   METHOD New()
   METHOD Activate()

   METHOD All()

   METHOD Animate() INLINE iif( ::lAnimate, ::Step(), NIL )

   METHOD BarDisplay()
   METHOD BuildCommandWindow()
   METHOD BuildBrowseStack()

   METHOD CallStackProcessKey( nKey )
   METHOD ClrModal() INLINE iif( ::lMonoDisplay, "N/W, W+/W, W/N, W+/N",;
                                                 "N/W, R/W, N/BG, R/BG" )
   METHOD GetColors() INLINE iif( ! ::lMonoDisplay, ::aColors,;
                                  { "W+/N", "W+/N", "N/W", "N/W",;
                                    "N/W", "N/W", "W+/N", "N/W",;
                                    "W+/W", "W/N", "W+/N" } )
   METHOD CodeblockTrace()
   METHOD CodeWindowProcessKey( nKey )
   METHOD Colors()
   METHOD CommandWindowProcessKey( nKey )
   METHOD DoCommand( cCommand )
   METHOD DoScript( cFileName )
   METHOD EditColor( nColor, oBrwColors )
   METHOD EditSet( nSet, oBrwSets )
   METHOD EditVar( nVar )
   METHOD Exit() INLINE ::lEnd := .T.
   METHOD FindNext()
   METHOD FindPrevious()
   METHOD GetExprValue( xExpr, lValid )
   METHOD GetSourceFiles()

   METHOD Global()

   METHOD Go()
   METHOD GoToLine( nLine )
   METHOD HandleEvent()
   METHOD Hide()
   METHOD HideCallStack()
   METHOD HideVars()
   METHOD InputBox( cMsg, uValue, bValid, lEditable )
   METHOD Inspect( uValue, cValueName )
   METHOD IsValidStopLine( cName, nLine )
   METHOD ListBox( cCaption, aItems )
   METHOD LoadColors()
   METHOD LoadSettings()
   METHOD LoadVars()
   METHOD LoadCallStack()

   METHOD Local()

   METHOD Locate( nMode, cValue )

   METHOD MonoDisplay()
   METHOD NextWindow()
   METHOD Open()
   METHOD OpenPPO()
   METHOD Resume() INLINE ::ShowCodeLine( 1 )
   METHOD OSShell()
   METHOD PathForFiles( cPathForFiles )

   METHOD PrevWindow()
   METHOD Private()
   METHOD Public()
   METHOD Quit()
   METHOD RefreshVars()
   METHOD RestoreAppScreen()
   METHOD RestoreAppState()
   METHOD RestoreSettings()
   METHOD RunAtStartup() INLINE ::lRunAtStartup := ::oPullDown:GetItemByIdent( "ALTD" ):checked := !::lRunAtStartup
   METHOD SaveAppScreen()
   METHOD SaveAppState()
   METHOD SaveSettings()
   METHOD Show()
   METHOD ShowAllGlobals()
   METHOD ShowAppScreen()
   METHOD ShowCallStack()
   METHOD ShowCodeLine( nProc )
   METHOD ShowHelp( nTopic )
   METHOD ShowVars()
   METHOD RedisplayBreakpoints()
   METHOD LocatePrgPath( cPrgName )
   METHOD Sort() INLINE ASort( ::aVars,,, { | x, y | x[ 1 ] < y[ 1 ] } ),;
                        ::lSortVars := .T.,;
                        iif( ::oBrwVars != NIL, ::oBrwVars:RefreshAll(), NIL ),;
                        iif( ::oWndVars != NIL .AND. ::oWndVars:lVisible, iif( !::lGo .AND. ::oBrwVars != NIL, ::oBrwVars:ForceStable(), NIL ), NIL )

   METHOD Speed() INLINE ::nSpeed := ::InputBox( "Step delay (in tenths of a second)", ::nSpeed )

   METHOD Stack()
   METHOD Static()

   METHOD Step()

   METHOD TabWidth() INLINE ;
          ::nTabWidth := ::InputBox( "Tab width", ::nTabWidth ),;
          ::oBrwText:nTabWidth := ::nTabWidth, ::oBrwText:RefreshAll()

   METHOD ToggleBreakPoint()

   METHOD Trace()

   METHOD ToCursor()
   METHOD NextRoutine()
   METHOD ViewSets()
   METHOD WndVarsLButtonDown( nMRow, nMCol )
   METHOD LineNumbers( lLineNumbers ) // Toggles numbering of source code lines
   METHOD RemoveWindow()
   METHOD SearchLine()
   METHOD ToggleAnimate() INLINE ::oPullDown:GetItemByIdent( "ANIMATE" ):checked := ::lAnimate := ! ::lAnimate
   METHOD ToggleCaseSensitive() INLINE ::oPullDown:GetItemByIdent( "CASE" ):checked := ::lCaseSensitive := ! ::lCaseSensitive
   METHOD ShowWorkAreas() INLINE __dbgShowWorkAreas( Self )

   METHOD TracepointAdd( cExpr )
   METHOD WatchpointAdd( cExpr )
   METHOD WatchpointDel( nPos )
   METHOD WatchpointsShow()
   METHOD WatchpointsHide()
   METHOD WatchpointEdit( nVar )
   METHOD WatchpointInspect( nPos )
   METHOD WatchGetInfo( nWatch )

   METHOD VarGetInfo( aVar )
   METHOD VarGetValue( aVar )
   METHOD VarSetValue( aVar, uValue )

   METHOD ResizeWindows( oWindow )
   METHOD NotSupported() INLINE __dbgAlert( "Not implemented yet!" )

   METHOD OpenDebuggerWindow()
   METHOD CloseDebuggerWindow()

ENDCLASS


METHOD New() CLASS HBDebugger

   s_oDebugger := Self

   /* default the search path for files to the current directory
      that way if the source is in the same directory it will still be found even if the application
      changes the current directory with the SET DEFAULT command. */
   ::cPathForFiles := GetEnv( "HB_DBG_PATH" )
   IF Empty( ::cPathForFiles )
      ::cPathForFiles := GetEnv( "PATH" )
   ENDIF
   ::aPathDirs := PathToArray( ::cPathForFiles )

   ::lGo := ::lRunAtStartup

   /* Store the initial screen dimensions for now */
   ::nMaxRow := MaxRow()
   ::nMaxCol := MaxCol()

   ::oPullDown := __dbgBuildMenu( Self )

   ::oWndCode             := HBDbWindow():New( 1, 0, ::nMaxRow - 6, ::nMaxCol )
   ::oWndCode:Cargo       := { ::oWndCode:nTop, ::oWndCode:nLeft }
   ::oWndCode:bKeyPressed := { | nKey | ::CodeWindowProcessKey( nKey ) }
   ::oWndCode:bGotFocus   := { || ::oGet:SetFocus() }
   ::oWndCode:bLostFocus  := { || ::oGet:KillFocus(), SetCursor( SC_NONE ), ;
                                  ::oWndCode:Cargo[ 1 ] := Row(), ;
                                  ::oWndCode:Cargo[ 2 ] := Col() }

   AAdd( ::aWindows, ::oWndCode )

   ::BuildCommandWindow()
   ::BuildBrowseStack()
   RETURN Self

METHOD OpenDebuggerWindow() CLASS HBDebugger

   IF !::lDebuggerWindowIsOpen
      ::hUserWindow := hb_gtInfo( HB_GTI_GETWIN )
      IF ::hDebuggerWindow == NIL
         ::hDebuggerWindow := hb_gtInfo( HB_GTI_GETWIN, ;
                                 { "Debugger", DEBUGGER_MINROW, DEBUGGER_MINCOL, ;
                                   DEBUGGER_MAXROW, DEBUGGER_MAXCOL } )
      ELSE
         hb_gtInfo( HB_GTI_SETWIN, ::hDebuggerWindow )
      ENDIF
      ::lDebuggerWindowIsOpen := .T.
   ENDIF

   RETURN NIL


METHOD CloseDebuggerWindow() CLASS HBDebugger

   IF ::lDebuggerWindowIsOpen
      ::hDebuggerWindow := hb_gtInfo( HB_GTI_GETWIN )
      hb_gtInfo( HB_GTI_SETWIN, ::hUserWindow )
      ::lDebuggerWindowIsOpen := .F.
   ENDIF

   RETURN NIL


METHOD Activate() CLASS HBDebugger

   ::LoadCallStack()
   ::SaveAppState()

   IF ! ::lActive
      ::lActive := .T.
      ::Show()
      IF ::lShowCallStack
         ::ShowCallStack()
      ENDIF
   ELSE
      ::SaveAppScreen()
   ENDIF

   ::LoadVars()
   ::ShowVars()

   IF ::oWndPnt != NIL
      ::WatchpointsShow()
   ENDIF

   // show the topmost procedure
   ::ShowCodeLine( 1 ) // ::aCallStack[ 1 ][ CSTACK_LINE ], ::aCallStack[ 1 ][ CSTACK_MODULE ] )
   ::HandleEvent()

   RETURN NIL


METHOD All() CLASS HBDebugger

   ::lShowPublics := ::lShowPrivates := ::lShowStatics := ;
   ::lShowLocals := ::lShowGlobals := ::lAll := ! ::lAll

   ::RefreshVars()

   RETURN NIL

METHOD BarDisplay() CLASS HBDebugger

   LOCAL cClrItem   := __DbgColors()[ 8 ]
   LOCAL cClrHotKey := __DbgColors()[ 9 ]

   DispBegin()

   SetColor( cClrItem )

   @ ::nMaxRow, 0 CLEAR TO ::nMaxRow, ::nMaxCol

   hb_dispOutAt( ::nMaxRow,  0, "F1-Help F2-Zoom F3-Repeat F4-User F5-Go F6-WA F7-Here F8-Step F9-BkPt F10-Trace", cClrItem )
   hb_dispOutAt( ::nMaxRow,  0, "F1", cClrHotKey )
   hb_dispOutAt( ::nMaxRow,  8, "F2", cClrHotKey )
   hb_dispOutAt( ::nMaxRow, 16, "F3", cClrHotKey )
   hb_dispOutAt( ::nMaxRow, 26, "F4", cClrHotKey )
   hb_dispOutAt( ::nMaxRow, 34, "F5", cClrHotKey )
   hb_dispOutAt( ::nMaxRow, 40, "F6", cClrHotKey )
   hb_dispOutAt( ::nMaxRow, 46, "F7", cClrHotKey )
   hb_dispOutAt( ::nMaxRow, 54, "F8", cClrHotKey )
   hb_dispOutAt( ::nMaxRow, 62, "F9", cClrHotKey )
   hb_dispOutAt( ::nMaxRow, 70, "F10", cClrHotKey )

   DispEnd()

   RETURN NIL


METHOD BuildBrowseStack() CLASS HBDebugger

   LOCAL aColors

   IF ::oBrwStack == NIL
      aColors := __DbgColors()
      ::oBrwStack := HBDbBrowser():New( 2, ::nMaxCol - 14, ::nMaxRow - 7, ::nMaxCol - 1 )
      ::oBrwStack:ColorSpec := aColors[ 3 ] + "," + aColors[ 4 ] + "," + aColors[ 5 ] + "," + aColors[ 6 ]
      ::oBrwStack:goTopBlock := { || ::oBrwStack:Cargo := 1 }
      ::oBrwStack:goBottomBlock := { || ::oBrwStack:Cargo := Len( ::aProcStack ) }
      ::oBrwStack:skipBlock := { | nSkip, nOld | nOld := ::oBrwStack:Cargo,;
                              ::oBrwStack:Cargo += nSkip,;
                              ::oBrwStack:Cargo := Min( Max( ::oBrwStack:Cargo, 1 ),;
                              Len( ::aProcStack ) ), ::oBrwStack:Cargo - nOld }

      ::oBrwStack:Cargo := 1 // Actual highligthed row

      ::oBrwStack:AddColumn( HBDbColumnNew( "", { || iif( Len( ::aProcStack ) > 0,;
            PadC( ::aProcStack[ ::oBrwStack:Cargo ][ CSTACK_FUNCTION ], 14 ), Space( 14 ) ) } ) )
   ENDIF

   RETURN NIL


METHOD BuildCommandWindow() CLASS HBDebugger

   LOCAL nSize

   ::oWndCommand := HBDbWindow():New( ::nMaxRow - 5, 0, ::nMaxRow - 1, ::nMaxCol, "Command" )

   ::oWndCommand:bGotFocus   := { || ::oGet:SetFocus() }
   ::oWndCommand:bLostFocus  := { || ::oGet:KillFocus(), SetCursor( SC_NONE ) }
   ::oWndCommand:bKeyPressed := { | nKey | ::CommandWindowProcessKey( nKey ) }
   ::oWndCommand:bPainted    := { || hb_dispOutAt( ::oWndCommand:nBottom - 1,;
                             ::oWndCommand:nLeft + 1, "> ", __DbgColors()[ 2 ] ),;
                             ::oGet:setColor( __DbgColors()[ 2 ] ):display(),;
                             hb_ClrArea( ::oWndCommand:nTop + 1, ::oWndCommand:nLeft + 1,;
                             ::oWndCommand:nBottom - 2, ::oWndCommand:nRight - 1,;
                             IIF( ::lMonoDisplay, 15, hb_ColorToN( __DbgColors()[ 2 ] ) ) ) }
   AAdd( ::aWindows, ::oWndCommand )

   ::aLastCommands := { "" }
   ::nCommand := 1

   nSize := ::oWndCommand:nRight - ::oWndCommand:nLeft - 3
   ::oGet := HbDbInput():new( ::oWndCommand:nBottom - 1, ::oWndCommand:nLeft + 3,;
                              nSize, "", __DbgColors()[ 2 ], Max( nSize, 256 ) )

   RETURN NIL


METHOD CallStackProcessKey( nKey ) CLASS HBDebugger

   LOCAL n
   LOCAL nSkip
   LOCAL lUpdate := .F.

   DO CASE
   CASE nKey == K_HOME .OR. nKey == K_CTRL_PGUP .OR. nKey == K_CTRL_HOME

      IF ::oBrwStack:Cargo > 1
         ::oBrwStack:GoTop()
         ::oBrwStack:ForceStable()
         lUpdate := .T.
      ENDIF

   CASE nKey == K_END .OR. nKey == K_CTRL_PGDN .OR. nKey == K_CTRL_END

      IF ::oBrwStack:Cargo < Len( ::aProcStack )
         ::oBrwStack:GoBottom()
         ::oBrwStack:ForceStable()
         lUpdate := .T.
      ENDIF

   CASE nKey == K_UP

      IF ::oBrwStack:Cargo > 1
         ::oBrwStack:Up()
         ::oBrwStack:ForceStable()
         lUpdate := .T.
      ENDIF

   CASE nKey == K_DOWN

      IF ::oBrwStack:Cargo < Len( ::aProcStack )
         ::oBrwStack:Down()
         ::oBrwStack:ForceStable()
         lUpdate := .T.
      ENDIF

   CASE nKey == K_PGUP

      ::oBrwStack:PageUp()
      ::oBrwStack:ForceStable()
      lUpdate := .T.

   CASE nKey == K_PGDN

      ::oBrwStack:PageDown()
      ::oBrwStack:ForceStable()
      lUpdate := .T.

   CASE nKey == K_LBUTTONDOWN

      IF ( nSkip := MRow() - ::oWndStack:nTop - ::oBrwStack:RowPos ) != 0
         IF nSkip > 0
            FOR n := 1 TO nSkip
               ::oBrwStack:Down()
               ::oBrwStack:Stabilize()
            NEXT
         ELSE
            FOR n := 1 TO nSkip + 2 STEP -1
               ::oBrwStack:Up()
               ::oBrwStack:Stabilize()
            NEXT
         ENDIF
         ::oBrwStack:ForceStable()
      ENDIF
      lUpdate := .T.

   ENDCASE

   IF lUpdate
      IF ::oWndVars != NIL .AND. ::oWndVars:lVisible
         ::LoadVars()
         ::ShowVars()
      ENDIF

      // jump to source line for a function

      /*
      IF ::aCallStack[ ::oBrwStack:Cargo ][ CSTACK_LINE ] != NIL
         ::ShowCodeLine( ::aCallStack[ ::oBrwStack:Cargo ][ CSTACK_LINE ], ::aCallStack[ ::oBrwStack:Cargo ][ CSTACK_MODULE ] )
      ELSE
         ::GotoLine( 1 )
      ENDIF
      */

      ::ShowCodeLine( ::oBrwStack:Cargo )
   ENDIF

   RETURN NIL


METHOD CodeblockTrace()

   ::oPullDown:GetItemByIdent( "CODEBLOCK" ):checked := ::lCBTrace := ! ::lCBTrace
   __dbgSetCBTrace( ::pInfo, ::lCBTrace )

   RETURN NIL


METHOD CodeWindowProcessKey( nKey ) CLASS HBDebugger

   IF ::oBrwText != NIL

      DO CASE
      CASE nKey == K_HOME .OR. nKey == K_CTRL_PGUP .OR. nKey == K_CTRL_HOME

         ::oBrwText:GoTop()
         IF ::oWndCode:lFocused
            SetCursor( SC_SPECIAL1 )
         ENDIF

      CASE nKey == K_END .OR. nKey == K_CTRL_PGDN .OR. nKey == K_CTRL_END

         ::oBrwText:GoBottom()
         ::oBrwText:nCol := ::oWndCode:nLeft + 1
         ::oBrwText:nFirstCol := ::oWndCode:nLeft + 1
         SetPos( Row(), ::oWndCode:nLeft + 1 )
         IF ::oWndCode:lFocused
            SetCursor( SC_SPECIAL1 )
         ENDIF

      CASE nKey == K_LEFT
         ::oBrwText:Left()

      CASE nKey == K_RIGHT
         ::oBrwText:Right()

      CASE nKey == K_UP
         ::oBrwText:Up()

      CASE nKey == K_DOWN
         ::oBrwText:Down()

      CASE nKey == K_PGUP
         ::oBrwText:PageUp()

      CASE nKey == K_PGDN
         ::oBrwText:PageDown()

      ENDCASE
   ENDIF

   RETURN NIL


METHOD Colors() CLASS HBDebugger

   LOCAL oWndColors := HBDbWindow():New( 4, 5, 16, ::nMaxCol - 5,;
                                        "Debugger Colors[1..11]", ::ClrModal() )
   LOCAL aColors := { "Border", "Text", "Text High", "Text PPO", "Text Selected",;
                      "Text High Sel.", "Text PPO Sel.", "Menu", "Menu High",;
                      "Menu Selected", "Menu High Sel." }

   LOCAL oBrwColors := HBDbBrowser():New( oWndColors:nTop + 1, oWndColors:nLeft + 1,;
                                          oWndColors:nBottom - 1, oWndColors:nRight - 1 )
   LOCAL nWidth := oWndColors:nRight - oWndColors:nLeft - 1
   LOCAL oCol

   IF ::lMonoDisplay
      __dbgAlert( "Monochrome display" )
      RETURN NIL
   ENDIF

   oBrwColors:Cargo := { 1, {} } // Actual highligthed row
   oBrwColors:ColorSpec := ::ClrModal()
   oBrwColors:goTopBlock := { || oBrwColors:cargo[ 1 ] := 1 }
   oBrwColors:goBottomBlock := { || oBrwColors:cargo[ 1 ] := Len( oBrwColors:cargo[ 2 ][ 1 ] ) }
   oBrwColors:skipBlock := { | nPos | ( nPos := ArrayBrowseSkip( nPos, oBrwColors ), oBrwColors:cargo[ 1 ] := ;
   oBrwColors:cargo[ 1 ] + nPos, nPos ) }

   oBrwColors:AddColumn( oCol := HBDbColumnNew( "", { || PadR( aColors[ oBrwColors:Cargo[ 1 ] ], 14 ) } ) )
   oCol:defColor := { 1, 2 }
   AAdd( oBrwColors:Cargo[ 2 ], aColors )
   oBrwColors:AddColumn( oCol := HBDbColumnNew( "",;
                       { || PadR( '"' + ::aColors[ oBrwColors:Cargo[ 1 ] ] + '"', nWidth - 15 ) } ) )
   AAdd( oBrwColors:Cargo[ 2 ], aColors )
   oCol:defColor := { 1, 3 }
   ocol:width := 50
   oBrwColors:autolite := .F.

   oWndColors:bPainted    := { || oBrwColors:ForceStable(), RefreshVarsS( oBrwColors ) }

   oWndColors:bKeyPressed := { | nKey | SetsKeyPressed( nKey, oBrwColors,;
                               Len( aColors ), oWndColors, "Debugger Colors",;
                               { || ::EditColor( oBrwColors:Cargo[ 1 ], oBrwColors ) } ) }
   oWndColors:ShowModal()

   ::LoadColors()

   RETURN NIL


METHOD CommandWindowProcessKey( nKey ) CLASS HBDebugger

   LOCAL cCommand
   LOCAL n

   SWITCH nKey
      CASE K_UP
      CASE K_F3
         IF ::nCommand > 1
            ::aLastCommands[ ::nCommand ] := RTrim( ::oGet:getValue() )
            ::oGet:setValue( ::aLastCommands[ --::nCommand ] ):display()
         ENDIF
         EXIT
      CASE K_DOWN
         IF ::nCommand < Len( ::aLastCommands )
            ::aLastCommands[ ::nCommand ] := RTrim( ::oGet:getValue() )
            ::oGet:setValue( ::aLastCommands[ ++::nCommand ] ):display()
         ENDIF
         EXIT
      CASE K_ENTER
         cCommand := RTrim( ::oGet:getValue() )
         IF ! Empty( cCommand )
            IF ( n := AScan( ::aLastCommands, cCommand ) ) > 0 .AND. n < Len( ::aLastCommands )
               HB_ADel( ::aLastCommands, n, .T. )
            ENDIF
            ::nCommand := Len( ::aLastCommands )
            ::aLastCommands[ ::nCommand ] := cCommand
            AAdd( ::aLastCommands, "" )
            ::nCommand := Len( ::aLastCommands )
            ::oWndCommand:ScrollUp( 1 )
            ::DoCommand( cCommand )
         ENDIF
         hb_dispOutAt( ::oWndCommand:nBottom - 1, ::oWndCommand:nLeft + 1, "> ", ;
                       __DbgColors()[ 2 ] )
         ::oGet:setValue( "" ):display()
         EXIT
      OTHERWISE
         ::oGet:applyKey( nKey )
   ENDSWITCH

   RETURN NIL


/*
 * ?? <expr>
 *      displays inspect window with value or display nothing on error
 * ? <expr>
 *      displays either result or error description in command window
 */
METHOD DoCommand( cCommand ) CLASS HBDebugger

   LOCAL aCmnd[ 3 ]
   LOCAL cParam
   LOCAL cParam1 := ""
   LOCAL cResult
   LOCAL lValid
   LOCAL n

   cCommand := AllTrim( cCommand )

   DO CASE
   CASE Empty( cCommand )
      RETURN ""

   CASE starts( cCommand, "??" )
      cParam := AllTrim( SubStr( cCommand, 3 ) )
      cCommand := "??"

   CASE starts( cCommand, "?" )
      cParam := SubStr( cCommand, 2 )
      cCommand := "?"

   OTHERWISE
      IF ( n := At( " ", cCommand ) ) > 0
         cParam := AllTrim( SubStr( cCommand, n + 1 ) )
         cCommand := Left( cCommand, n - 1 )
      ENDIF
      cCommand := Upper( cCommand )

   ENDCASE

   DO CASE
   CASE cCommand == "??" .OR. cCommand == "?"
      aCmnd[ WP_TYPE ] := cCommand
      aCmnd[ WP_EXPR ] := cParam

      ::RestoreAppState()
      cResult := ::GetExprValue( cParam, @lValid )
      ::SaveAppState()

      IF aCmnd[ WP_TYPE ] == "??"
         IF lValid
            ::Inspect( aCmnd[ WP_EXPR ], cResult )
         ENDIF
         cResult := ""  //discard result
      ELSE
         IF lValid
            cResult := __dbgValToStr( cResult )
         ENDIF
      ENDIF
      ::RefreshVars()

   CASE starts( "ANIMATE", cCommand )
      IF ::lActive
         ::lAnimate := .T.
         ::Animate()
         SetCursor( SC_NORMAL )
      ENDIF

   CASE starts( "BP", cCommand )
      /* TODO: Support BP <cFuncName> */
      IF !Empty( cParam )
         IF ( n := At( " ", cParam ) ) > 0
            cParam1 := AllTrim( SubStr( cParam, n + 1 ) )
            cParam := Left( cParam, n - 1 )
         ELSE
            cParam1 := ::cPrgName
         ENDIF
         ::ToggleBreakPoint( Val( cParam ), strip_path( cParam1 ) )
      ELSE
         ::ToggleBreakPoint()
      ENDIF

   CASE starts( "CALLSTACK", cCommand )
      ::Stack( Upper( cParam ) == "ON" )

   /* TODO: Support DELETE ALL [TP|BP|WP], DELETE WP|TP|BP <nNumber> */

   CASE starts( "DOS", cCommand )
      ::OsShell()
      SetCursor( SC_NORMAL )

   CASE starts( "FIND", cCommand )
      ::Locate( 0, cParam )

   CASE starts( "GO", cCommand )
      ::Go()

   CASE starts( "GOTO", cCommand ) .AND. Val( cParam ) > 0
      ::GoToLine( Val( cParam ) )

   CASE starts( "HELP", cCommand )
      ::ShowHelp()

   CASE starts( "INPUT", cCommand ) .AND. !Empty( cParam )
      ::DoScript( cParam )

   /* TODO: Support LIST BP|WP|TP */

   CASE starts( "MONITOR", cCommand )

      cParam := Upper( cParam )

      DO CASE
      CASE starts( "GLOBAL", cParam )
         ::Global()
      CASE starts( "LOCAL", cParam )
         ::Local()
      CASE starts( "PRIVATE", cParam )
         ::Private()
      CASE starts( "PUBLIC", cParam )
         ::Public()
      CASE starts( "SORT", cParam )
         ::Sort()
      CASE starts( "STATIC", cParam )
         ::Static()
      OTHERWISE
         cResult := "Command error"
      ENDCASE

   CASE starts( "NEXT", cCommand )
      ::FindNext()

   CASE starts( "NUM", cCommand )
      IF Upper( cParam ) == "OFF"
         ::LineNumbers( .F. )
      ELSEIF Upper( cParam ) == "ON"
         ::LineNumbers( .T. )
      ELSE
         cResult := "Command error"
      ENDIF

   CASE starts( "OPTIONS", cCommand )

      IF ( n := At( " ", cParam ) ) > 0
         cParam1 := AllTrim( SubStr( cParam, n + 1 ) )
         cParam := Left( cParam, n - 1 )
      ENDIF

      cParam := Upper( cParam )

      DO CASE
      CASE starts( "COLORS", cParam )

         IF Empty( cParam1 )
            ::Colors()
         ELSE
            cParam1 := SubStr( cParam1, At( "{", cParam1 ) + 1 )
            FOR n := 1 TO 11
               IF At( ",", cParam1 ) != 0
                  ::aColors[ n ] := ;
                     StrTran( Left( cParam1, At( ",", cParam1 ) - 1 ), '"', "" )
                  cParam1 := SubStr( cParam1, At( ",", cParam1 ) + 1 )
               ELSE
                  ::aColors[ n ] := ;
                     StrTran( Left( cParam1, At( "}", cParam1 ) - 1 ), '"', "" )
               ENDIF
            NEXT
            ::LoadColors()
         ENDIF
      CASE starts( "NORUNATSTARTUP", cParam )
         ::lRunAtStartup := .F.
      CASE starts( "PATH", cParam )
         ::PathForFiles( AllTrim( cParam1 ) )
      CASE starts( "TAB", cParam )
         ::nTabWidth := Val( Left( cParam1, 3 ) )
      OTHERWISE
         cResult := "Command error"
      ENDCASE

   CASE starts( "OUTPUT", cCommand )
      SetCursor( SC_NONE )
      ::ShowAppScreen()
      SetCursor( SC_NORMAL )

   CASE starts( "PREV", cCommand )
      ::FindPrevious()

   CASE starts( "QUIT", cCommand )
      ::Quit()

   /* TODO: Support RESTART */

   CASE starts( "RESUME", cCommand )
      ::Resume()

   CASE starts( "SPEED", cCommand )
      IF !Empty( cParam )
         ::nSpeed := Val( cParam )
      ELSE
         ::nSpeed := 0
      ENDIF

   CASE starts( "STEP", cCommand )
      ::Step()

   CASE starts( "TP", cCommand )
      ::TracepointAdd( cParam )

   CASE starts( "VIEW", cCommand )
      IF !Empty( cParam ) .AND. starts( "CALLSTACK", Upper( cParam ) )
         ::Stack()
      ELSE
         cResult := "Command error"
      ENDIF

   CASE starts( "WINDOW", cCommand )

      IF ( n := At( " ", cParam ) ) > 0
         cParam1 := AllTrim( SubStr( cParam, n + 1 ) )
         cParam := Left( cParam, n - 1 )
      ENDIF

      DO CASE
      CASE starts( "MOVE", cParam )
         WITH OBJECT ::aWindows[ ::nCurrentWindow ]
            n := At( " ", cParam1 )
            IF n > 0
               n := Val( SubStr( cParam1, n ) )
            ENDIF
            :Resize( Val( cParam1 ), n, ;
                     :nBottom + Val( cParam1 ) - :nTop, :nRight + n - :nLeft )
         ENDWITH
      CASE starts( "NEXT", cParam )
         ::NextWindow()
      CASE starts( "SIZE", cParam )
         WITH OBJECT ::aWindows[ ::nCurrentWindow ]
            n := At( " ", cParam1 )
            IF Val( cParam1 ) >= 2 .AND. n > 0 .AND. Val( SubStr( cParam1, n ) ) > 0
               :Resize( :nTop, :nLeft, Val( cParam1 ) - 1 + :nTop, ;
                        Val( SubStr( cParam1, n ) ) - 1 + :nLeft )
            ENDIF
         ENDWITH
      ENDCASE

   CASE starts( "WP", cCommand )
      ::WatchpointAdd( cParam )

   OTHERWISE
      cResult := "Command error"

   ENDCASE

   IF ::lActive
      hb_dispOutAt( ::oWndCommand:nBottom - 1, ::oWndCommand:nLeft + 1, ;
                 Space( ::oWndCommand:nRight - ::oWndCommand:nLeft - 1 ), ;
                 __DbgColors()[ 2 ] )
      IF !Empty( cResult )
         hb_dispOutAt( ::oWndCommand:nBottom - 1, ::oWndCommand:nLeft + 3, ;
                     cResult, __DbgColors()[ 2 ] )
         ::oWndCommand:ScrollUp( 1 )
      ENDIF
   ENDIF

   RETURN cResult


METHOD DoScript( cFileName ) CLASS HBDebugger

   LOCAL cInfo
   LOCAL n
   LOCAL cLine
   LOCAL nLen

   IF File( cFileName )
      cInfo := MemoRead( cFileName )
      nLen := MLCount( cInfo, NIL, NIL, .F. )
      FOR n := 1 TO nLen
         cLine := MemoLine( cInfo, 16384, n, NIL, .F., .T. )
         ::DoCommand( cLine )
      NEXT
   ENDIF

   RETURN NIL


METHOD EditColor( nColor, oBrwColors ) CLASS HBDebugger

   LOCAL cColor     := PadR( '"' + ::aColors[ nColor ] + '"',;
                             oBrwColors:getColumn( 2 ):Width )

   oBrwColors:RefreshCurrent()
   oBrwColors:ForceStable()

   IF __dbgInput( Row(), Col() + 15,, @cColor, ;
                  { | cColor | iif( Type( cColor ) != "C", ;
                           ( __dbgAlert( "Must be string" ), .F. ), .T. ) }, ;
                  SubStr( ::ClrModal(), 5 ) )
      ::aColors[ nColor ] := &cColor
   ENDIF

   oBrwColors:RefreshCurrent()
   oBrwColors:ForceStable()

   RETURN NIL

METHOD EditSet( nSet, oBrwSets ) CLASS HBDebugger

   LOCAL cSet       := PadR( __dbgValToStr( Set( nSet ) ), oBrwSets:getColumn( 2 ):Width )
   LOCAL cType      := ValType( Set( nSet ) )

   oBrwSets:RefreshCurrent()
   oBrwSets:ForceStable()

   IF __dbgInput( Row(), Col() + 13,, @cSet, ;
                  { | cSet | iif( Type( cSet ) != cType, ;
                     ( __dbgAlert( "Must be of type '" + cType + "'" ), .F. ), .T. ) }, ;
                  SubStr( ::ClrModal(), 5 ) )
      Set( nSet, &cSet )
   ENDIF

   oBrwSets:RefreshCurrent()
   oBrwSets:ForceStable()

   RETURN NIL


METHOD EditVar( nVar ) CLASS HBDebugger

   LOCAL cVarName   := ::aVars[ nVar ][ 1 ]
   LOCAL uVarValue
   LOCAL cVarStr
   LOCAL oErr

   uVarValue := ::VarGetValue( ::aVars[ nVar ] )

   IF ValType( uVarValue ) $ "AHOP"
      ::InputBox( cVarName, uVarValue, NIL, .F. )
   ELSE
      cVarStr := ::InputBox( cVarName, __dbgValToStr( uVarValue ),;
                { | u | iif( Type( u ) == "UE", ( __dbgAlert( "Expression error" ), .F. ), .T. ) } )
   ENDIF

   IF LastKey() != K_ESC

      DO CASE
      CASE cVarStr == "{ ... }"
         //aArray := ::VarGetValue( ::aVars[ nVar ] )
         IF Len( uVarValue ) > 0
            __DbgArrays( uVarValue, cVarName )
         ELSE
            __dbgAlert( "Array is empty" )
         ENDIF

      CASE Upper( Left( cVarStr, 5 ) ) == "CLASS"
         __DbgObject( uVarValue, cVarName )

      OTHERWISE
         BEGIN SEQUENCE WITH {|oErr| break( oErr ) }
            ::VarSetValue( ::aVars[ nVar ], &cVarStr )
         RECOVER USING oErr
            __dbgAlert( oErr:description )
         END SEQUENCE
      ENDCASE
   ENDIF

   ::oBrwVars:RefreshCurrent()
   ::oBrwVars:ForceStable()

   RETURN NIL


METHOD FindNext() CLASS HBDebugger
   RETURN ::Locate( 1, ::cSearchString )


METHOD FindPrevious() CLASS HBDebugger
   RETURN ::Locate( 2, ::cSearchString )


METHOD GetExprValue( xExpr, lValid ) CLASS HBDebugger

   LOCAL xResult
   LOCAL oErr

   lValid := .F.

   BEGIN SEQUENCE WITH { | oErr | Break( oErr ) }
      xResult := __dbgGetExprValue( ::pInfo, xExpr, @lValid )
      IF !lValid
         xResult := "Syntax error"
      ENDIF
   RECOVER USING oErr
      xResult := oErr:operation + ": " + oErr:description
      IF ISARRAY( oErr:args )
         xResult += "; arguments:"
         AEval( oErr:args, { | x | xResult += " " + AllTrim( __dbgCStr( x ) ) } )
      ENDIF
      lValid := .F.
   END SEQUENCE

   RETURN xResult


METHOD GetSourceFiles() CLASS HBDebugger
   RETURN __dbgGetSourceFiles( ::pInfo )


METHOD Global() CLASS HBDebugger
   ::lShowGlobals := ! ::lShowGlobals
   ::RefreshVars()
   RETURN NIL


METHOD Go() CLASS HBDebugger
   // we are starting to run again so reset to the deepest call if
   // displaying stack
   IF ! ::oBrwStack == NIL
      ::oBrwStack:GoTop()
   ENDIF
   ::RestoreAppScreen()
   ::RestoreAppState()
   __dbgSetGo( ::pInfo )
   ::Exit()
   RETURN NIL


METHOD GotoLine( nLine ) CLASS HBDebugger

   LOCAL nRow
   LOCAL nCol

   /*
   IF ::oBrwVars != NIL
      ::ShowVars()
   ENDIF
   */

   ::oBrwText:GotoLine( nLine )
   nRow := Row()
   nCol := Col()

   // no source code line stored yet

   /*
   IF ::oBrwStack != NIL .AND. Len( ::aCallStack ) > 0 .AND. ;
      ::aCallStack[ ::oBrwStack:Cargo ][ CSTACK_LINE ] == NIL
      ::aCallStack[ ::oBrwStack:Cargo ][ CSTACK_LINE ] := nLine
   ENDIF
   */

   IF ::oWndStack != NIL .AND. ! ::oBrwStack:Stable
      ::oBrwStack:ForceStable()
   ENDIF

   IF ::oWndCode:lFocused .AND. SetCursor() != SC_SPECIAL1
      SetPos( nRow, nCol )
      SetCursor( SC_SPECIAL1 )
   ENDIF
   SetPos( nRow, nCol )

   // Store cursor position to be restored by ::oWndCode:bGotFocus
   ::oWndCode:cargo[ 1 ] := nRow
   ::oWndCode:cargo[ 2 ] := nCol

   RETURN NIL


METHOD HandleEvent() CLASS HBDebugger

   LOCAL nPopup
   LOCAL oWnd
   LOCAL nKey
   LOCAL nMRow
   LOCAL nMCol
   LOCAL n

   IF ::lAnimate
      IF ::nSpeed != 0
         Inkey( ::nSpeed / 10 )
      ENDIF
      IF __dbgINVOKEDEBUG()  //NextKey() == K_ALT_D
         ::lAnimate := .F.
      ELSE
         ::Step()
         RETURN NIL
      ENDIF
   ENDIF

   ::lEnd := .F.

   DO WHILE ! ::lEnd

      nKey := Inkey( 0, INKEY_ALL )

      DO CASE
      CASE nKey == K_ALT_X
         s_oDebugger:Quit()

      CASE ::oPullDown:IsOpen()
         ::oPullDown:ProcessKey( nKey )
         IF ::oPullDown:nOpenPopup == 0 // Closed
            ::aWindows[ ::nCurrentWindow ]:Show( .T. )
         ENDIF

      CASE nKey == K_LDBLCLK

         IF MRow() != 0 .AND. MRow() != ::nMaxRow

            nMRow := MRow()
            nMCol := MCol()
            FOR n := 1 TO Len( ::aWindows )
               IF ::aWindows[ n ]:IsOver( nMRow, nMCol )
                  IF ! ::aWindows[ n ]:lFocused
                     ::aWindows[ ::nCurrentWindow ]:Show( .F. )
                     ::nCurrentWindow := n
                     ::aWindows[ n ]:Show( .T. )
                  ENDIF
                  ::aWindows[ n ]:LDblClick( nMRow, nMCol )
                  EXIT
               ENDIF
            NEXT
         ENDIF

      CASE nKey == K_LBUTTONDOWN

         IF MRow() == 0

            IF ( nPopup := ::oPullDown:GetItemOrdByCoors( 0, MCol() ) ) != 0
               IF ! ::oPullDown:IsOpen()
                  IF ::oWndCode:lFocused
                     Eval( ::oWndCode:bLostFocus )
                  ENDIF
                  SetCursor( SC_NONE )
               ENDIF
               ::oPullDown:ShowPopup( nPopup )
            ENDIF

         ELSEIF MRow() != ::nMaxRow

            nMRow := MRow()
            nMCol := MCol()
            FOR n := 1 TO Len( ::aWindows )
               IF ::aWindows[ n ]:IsOver( nMRow, nMCol )
                  IF ! ::aWindows[ n ]:lFocused
                     ::aWindows[ ::nCurrentWindow ]:Show( .F. )
                     ::nCurrentWindow := n
                     ::aWindows[ n ]:Show( .T. )
                  ENDIF
                  ::aWindows[ n ]:LButtonDown( nMRow, nMCol )
                  EXIT
               ENDIF
            NEXT
         ENDIF

      CASE nKey == K_RBUTTONDOWN
/*
      CASE nKey == K_ESC
         ::RestoreAppStatus()
         s_oDebugger := NIL
         s_lExit := .T.
         DispEnd()
         ::Exit()
*/

      CASE nKey == K_UP .OR. nKey == K_DOWN .OR. nKey == K_HOME .OR. ;
           nKey == K_END .OR. nKey == K_ENTER .OR. nKey == K_PGDN .OR. ;
           nKey == K_PGUP .OR. nKey == K_DEL .OR. nKey == K_LEFT .OR. ;
           nKey == K_RIGHT .OR. nKey == K_CTRL_ENTER

         oWnd := ::aWindows[ ::nCurrentWindow ]
         oWnd:KeyPressed( nKey )

      CASE nKey == K_F1
         ::ShowHelp()

      CASE nKey == K_F4
         ::ShowAppScreen()

      CASE nKey == K_F5
         ::Go()

      CASE nKey == K_CTRL_F5
         ::NextRoutine()

      CASE nKey == K_F6
         ::ShowWorkAreas()

      CASE nKey == K_F7
         ::ToCursor()

      CASE nKey == K_F8
         ::Step()

      CASE nKey == K_F9
         ::ToggleBreakPoint()

      CASE nKey == K_F10
         ::Trace()

      CASE nKey == K_TAB
         ::NextWindow()

      CASE nKey == K_SH_TAB
         ::PrevWindow()

      CASE /* ::oWndCommand:lFocused .AND. */ nKey < 272 // Alt
         ::oWndCommand:KeyPressed( nKey )

      OTHERWISE
         IF ( nPopup := ::oPullDown:GetHotKeyPos( __dbgAltToKey( nKey ) ) ) != 0
            IF ::oPullDown:nOpenPopup != nPopup
               IF ::oWndCode:lFocused
                  Eval( ::oWndCode:bLostFocus )
               ENDIF
               SetCursor( SC_NONE )
               ::oPullDown:ShowPopup( nPopup )
            ENDIF
         ENDIF
      ENDCASE
   ENDDO

   RETURN NIL

METHOD Hide() CLASS HBDebugger
   ::CloseDebuggerWindow()
   RETURN NIL


METHOD HideCallStack() CLASS HBDebugger

   ::lShowCallStack := .F.

   IF ::oWndStack != NIL
      DispBegin()
      ::oWndStack:Hide()
      IF ::aWindows[ ::nCurrentWindow ] == ::oWndStack
        ::NextWindow()
      ENDIF
      ::RemoveWindow( ::oWndStack )
      ::oWndStack := NIL

      ::oWndCode:Resize(,,, ::oWndCode:nRight + 16 )
      IF ::oWndVars != NIL
         ::oWndVars:Resize(,,, ::oWndVars:nRight + 16 )
      ENDIF
      IF ::oWndPnt != NIL
         ::oWndPnt:Resize(,,, ::oWndPnt:nRight + 16 )
      ENDIF
      DispEnd()
   ENDIF

   RETURN NIL


METHOD HideVars() CLASS HBDebugger
   LOCAL nTop

   IF ::oWndVars == NIL
      RETURN NIL
   ENDIF

   ::oWndVars:Hide()
   IF ::oWndPnt == NIL
      nTop := 1
   ELSE
      ::oWndPnt:Resize( 1, , ::oWndPnt:nBottom - ( ::oWndPnt:nTop - 1 ) )
      ::oBrwPnt:Resize( 2, , ::oWndPnt:nBottom - 1 )
      nTop := ::oWndPnt:nBottom + 1
   ENDIF
   ::oWndCode:Resize( nTop )
   IF ::oBrwText != NIL
      ::oBrwText:Resize( ::oWndCode:nTop + 1 )
   ENDIF
   IF ::oWndCode:lFocused
      ::oWndCode:cargo[ 1 ] := Row()
      ::oWndCode:cargo[ 2 ] := Col()
   ENDIF

   IF ::aWindows[ ::nCurrentWindow ] == ::oWndVars
      ::NextWindow()
   ENDIF

   RETURN NIL


METHOD InputBox( cMsg, uValue, bValid, lEditable ) CLASS HBDebugger

   LOCAL nTop    := Int( ( ::nMaxRow / 2 ) - 5 )
   LOCAL nLeft   := Int( ( ::nMaxCol / 2 ) - 25 )
   LOCAL nBottom := nTop + 2
   LOCAL nRight  := nLeft + 50
   LOCAL cType   := ValType( uValue )
   LOCAL nWidth  := nRight - nLeft - 1
   LOCAL uTemp
   LOCAL nOldCursor
   LOCAL nOldRow
   LOCAL nOldCol
   LOCAL lExit
   LOCAL oWndInput := HBDbWindow():New( nTop, nLeft, nBottom, nRight, cMsg,;
                                       ::oPullDown:cClrPopup )
   DEFAULT lEditable TO .T.

   oWndInput:lShadow := .T.
   oWndInput:Show()

   nOldCursor := SetCursor()
   nOldRow := Row()
   nOldCol := Col()

   uTemp := uValue

   IF lEditable

      IF cType != "C" .OR. Len( uValue ) < nWidth
         uTemp := PadR( uValue, nWidth )
      ENDIF
      __dbgInput( nTop + 1, nLeft + 1, nWidth, @uTemp, bValid, ;
                  __DbgColors()[ 5 ], Max( Max( nWidth, Len( uTemp ) ), 256 ) )
      SWITCH cType
         CASE "C" ; uTemp := AllTrim( uTemp ) ; EXIT
         CASE "D" ; uTemp := CToD( uTemp )    ; EXIT
         CASE "N" ; uTemp := Val( uTemp )     ; EXIT
      ENDSWITCH

   ELSE

      hb_dispOutAt( nTop + 1, nLeft + 1, __dbgValToStr( uValue ), "," + __DbgColors()[ 5 ] )
      SetPos( nTop + 1, nLeft + 1 )

      lExit := .F.

      DO WHILE ! lExit
         Inkey( 0 )

         DO CASE
         CASE LastKey() == K_ESC
            lExit := .T.

         CASE LastKey() == K_ENTER
            IF cType == "A"
               IF Len( uValue ) == 0
                  __dbgAlert( "Array is empty" )
               ELSE
                  __DbgArrays( uValue, cMsg )
               ENDIF

            ELSEIF cType == "H"
               IF Len( uValue ) == 0
                  __dbgAlert( "Hash is empty" )
               ELSE
                  __DbgHashes( uValue, cMsg )
               ENDIF

            ELSEIF cType == "O"
               __DbgObject( uValue, cMsg )

            ELSE
               __dbgAlert( "Value cannot be edited" )
            ENDIF

         OTHERWISE
            __dbgAlert( "Value cannot be edited" )
         ENDCASE
      ENDDO

   ENDIF

   SetCursor( nOldCursor )
   SetPos( nOldRow, nOldCol )

   oWndInput:Hide()

   RETURN uTemp


METHOD Inspect( uValue, cValueName ) CLASS HBDebugger

   uValue := ::InputBox( uValue, cValueName,, .F. )

   RETURN NIL


METHOD IsValidStopLine( cName, nLine ) CLASS HBDebugger
   RETURN __dbgIsValidStopLine( ::pInfo, cName, nLine )


METHOD LineNumbers( lLineNumbers ) CLASS HBDebugger

   DEFAULT lLineNumbers TO !::lLineNumbers

   ::lLineNumbers := lLineNumbers
   ::oPulldown:GetItemByIdent( "LINE" ):checked := ::lLineNumbers
   IF ::oBrwText != NIL
      ::oBrwText:lLineNumbers := lLineNumbers
      ::oBrwText:RefreshAll()
   ENDIF

   RETURN Self


METHOD ListBox( cCaption, aItems ) CLASS HBDebugger

   LOCAL nItems
   LOCAL nMaxWid
   LOCAL nLeft
   LOCAL nTop
   LOCAL nBottom
   LOCAL nRight
   LOCAL oWndList
   LOCAL aColors
   LOCAL n

   nItems := Len( aItems )
   nMaxWid := Len( cCaption ) + 2
   AEval( aItems, { | x | nMaxWid := Max( Len( x ), nMaxWid ) } )
   nMaxWid += 2

   nTop    := ( ::nMaxRow / 2 ) - Min( nItems, ::nMaxRow - 5 ) / 2
   nBottom := ( ::nMaxRow / 2 ) + Min( nItems, ::nMaxRow - 5 ) / 2 + 1
   nLeft   := ( ::nMaxCol / 2 ) - Min( nMaxWid, ::nMaxCol * 3 / 2 ) / 2
   nRight  := ( ::nMaxCol / 2 ) + Min( nMaxWid, ::nMaxCol * 3 / 2 ) / 2
   oWndList := HBDbWindow():new( nTop, nLeft, nBottom, nRight, cCaption, ;
                                ::oPullDown:cClrPopup )
   oWndList:lShadow := .T.
   oWndList:Show()

   aColors := __DbgColors()
   n := __dbgAChoice( nTop + 1, nLeft + 1, nBottom - 1, nRight - 1, aItems, ;
                      aColors[ 8 ] + "," + aColors[ 10 ] )
   oWndList:Hide()

   RETURN n


METHOD LoadCallStack() CLASS HBDebugger

   LOCAL i
   LOCAL nDebugLevel
   LOCAL nCurrLevel
   LOCAL nlevel
   LOCAL nPos

   ::aProcStack := Array( ::nProcLevel )

   nCurrLevel := __dbgProcLevel() - 1
   nDebugLevel := nCurrLevel - ::nProcLevel + 1

   FOR i := nDebugLevel TO nCurrLevel
      nLevel := nCurrLevel - i + 1
      nPos := AScan( ::aCallStack, { | a | a[ CSTACK_LEVEL ] == nLevel } )
      IF nPos > 0
         // a procedure with debug info
         ::aProcStack[ i - nDebugLevel + 1 ] := ::aCallStack[ nPos ]
      ELSE
         ::aProcStack[ i - nDebugLevel + 1 ] := { , ProcName( i ) + "(" + hb_NToS( ProcLine( i ) ) + ")", , nLevel, , }
      ENDIF
   NEXT

   RETURN NIL


METHOD LoadColors() CLASS HBDebugger

   LOCAL n

   ::oPullDown:LoadColors()
   IF ::lActive
      ::oPullDown:Refresh()
      ::BarDisplay()
   ENDIF
   FOR n := 1 TO Len( ::aWindows )
      ::aWindows[ n ]:LoadColors()
      IF ::lActive
         ::aWindows[ n ]:Refresh()
      ENDIF
   NEXT

   RETURN NIL


METHOD LoadSettings() CLASS HBDebugger
   ::DoScript( ::cSettingsFileName )
   RETURN NIL


METHOD LoadVars() CLASS HBDebugger // updates monitored variables

   LOCAL nCount
   LOCAL n
   LOCAL m
   LOCAL xValue
   LOCAL cName
   LOCAL aVars
   LOCAL aBVars
   LOCAL hSkip

   aBVars := {}

   IF ::lShowPublics
      nCount := __mvDbgInfo( HB_MV_PUBLIC )
      FOR n := nCount TO 1 STEP -1
         xValue := __mvDbgInfo( HB_MV_PUBLIC, n, @cName )
         AAdd( aBVars, { cName, xValue, "Public" } )
      NEXT
   ENDIF

   IF ::lShowPrivates
      /* CA-Cl*pper shows only local private variables in monitor
       * We are marking non local private variables with "^" character
       */
      nCount := __mvDbgInfo( HB_MV_PRIVATE )
      IF nCount > 0
         m := __mvDbgInfo( HB_MV_PRIVATE_LOCAL, ::nProcLevel )
         hSkip := { => }
         hb_hAllocate( hSkip, nCount )
         FOR n := nCount TO 1 STEP -1
            xValue := __mvDbgInfo( HB_MV_PRIVATE, n, @cName )
            IF ! cName $ hSkip
               AAdd( aBVars, { cName, xValue,  iif( m > 0, "Private", "Private^" ) } )
               hSkip[ cName ] := NIL
            ENDIF
            --m
         NEXT
      ENDIF
   ENDIF

   IF ::aProcStack[ ::oBrwStack:Cargo ][ CSTACK_LINE ] != NIL
      IF ::lShowGlobals
         cName := ::aProcStack[ ::oBrwStack:Cargo ][ CSTACK_MODULE ]
         FOR n := 1 TO Len( ::aModules )
            IF !::lShowAllGlobals
               IF !hb_FileMatch( ::aModules[ n ][ MODULE_NAME ], cName )
                  LOOP
               ENDIF
            ENDIF
            aVars := ::aModules[ n ][ MODULE_GLOBALS ]
            FOR m := 1 TO Len( aVars )
               AAdd( aBVars, aVars[ m ] )
            NEXT
            IF !::lShowAllGlobals
               aVars := ::aModules[ n ][ MODULE_EXTERNGLOBALS ]
               FOR m := 1 TO Len( aVars )
                  AAdd( aBVars, aVars[ m ] )
               NEXT
            ENDIF
         NEXT
      ENDIF

      IF ::lShowStatics
         cName := ::aProcStack[ ::oBrwStack:Cargo ][ CSTACK_MODULE ]
         n := AScan( ::aModules, { | a | hb_FileMatch( a[ MODULE_NAME ], cName ) } )
         IF n > 0
            aVars := ::aModules[ n ][ MODULE_STATICS ]
            FOR m := 1 TO Len( aVars )
               AAdd( aBVars, aVars[ m ] )
            NEXT
         ENDIF
         aVars := ::aProcStack[ ::oBrwStack:Cargo ][ CSTACK_STATICS ]
         FOR n := 1 TO Len( aVars )
            AAdd( aBVars, aVars[ n ] )
         NEXT
      ENDIF

      IF ::lShowLocals
         aVars := ::aProcStack[ ::oBrwStack:Cargo ][ CSTACK_LOCALS ]
         FOR n := 1 TO Len( aVars )
            cName := aVars[ n ][ VAR_NAME ]
            m := AScan( aBVars,; // Is there another var with this name ?
                        { | aVar | aVar[ VAR_NAME ] == cName .AND. Left( aVar[ VAR_TYPE ], 1 ) == "S" } )
            IF m > 0
               aBVars[ m ] := aVars[ n ]
            ELSE
               AAdd( aBVars, aVars[ n ] )
            ENDIF
         NEXT
      ENDIF
   ENDIF

   IF ::oBrwVars != NIL .AND. ::oBrwVars:cargo[ 1 ] > Len( aBVars )
      ::oBrwVars:GoTop()
   ENDIF
   ::aVars := aBVars
   IF ::lSortVars .AND. !Empty( ::aVars )
      ::Sort()
   ENDIF

   RETURN NIL


METHOD Local() CLASS HBDebugger
   ::lShowLocals := ! ::lShowLocals
   ::RefreshVars()
   RETURN NIL


METHOD Locate( nMode, cValue ) CLASS HBDebugger

   LOCAL lFound

   DEFAULT nMode TO 0

   IF Empty( cValue )
      ::cSearchString := PadR( ::cSearchString, 256 )
      cValue := ::InputBox( "Search string", ::cSearchString )
      IF Empty( cValue )
         RETURN NIL
      ENDIF
   ENDIF

   ::cSearchString := cValue

   lFound := ::oBrwText:Search( ::cSearchString, ::lCaseSensitive, nMode )

   // Save cursor position to be restored by ::oWndCode:bGotFocus
   ::oWndCode:cargo[ 1 ] := Row()
   ::oWndCode:cargo[ 2 ] := Col()
   RETURN lFound


METHOD LocatePrgPath( cPrgName ) CLASS HBDebugger

   LOCAL aPaths := ::aPathDirs
   LOCAL iMax := Len( aPaths )
   LOCAL cSep := hb_OSPathSeparator()
   LOCAL cRetPrgName
   LOCAL i

   FOR i := 1 TO iMax
      cRetPrgName := aPaths[ i ] + cSep + cPrgName
      IF File( cRetPrgName )
         RETURN cRetPrgName
      ENDIF
   NEXT

   RETURN NIL


METHOD MonoDisplay() CLASS HBDebugger

   ::lMonoDisplay := ! ::lMonoDisplay
   ::oPullDown:GetItemByIdent( "MONO" ):checked := ::lMonoDisplay
   ::LoadColors()

   RETURN NIL


METHOD NextRoutine() CLASS HBDebugger
   ::RestoreAppScreen()
   ::RestoreAppState()
   __dbgSetNextRoutine( ::pInfo )
   ::Exit()
   RETURN Self


METHOD NextWindow() CLASS HBDebugger

   LOCAL oWnd

   IF Len( ::aWindows ) > 0
      oWnd := ::aWindows[ ::nCurrentWindow++ ]
      oWnd:Show( .F. )
      IF ::nCurrentWindow > Len( ::aWindows )
         ::nCurrentWindow := 1
      ENDIF
      DO WHILE ! ::aWindows[ ::nCurrentWindow ]:lVisible
         ::nCurrentWindow++
         IF ::nCurrentWindow > Len( ::aWindows )
            ::nCurrentWindow := 1
         ENDIF
      ENDDO
      oWnd := ::aWindows[ ::nCurrentWindow ]
      oWnd:Show( .T. )
   ENDIF

   RETURN NIL


METHOD Open() CLASS HBDebugger

   LOCAL nFileName
   LOCAL cFileName
   LOCAL cRealName
   LOCAL aFiles := ::GetSourceFiles()
   LOCAL cExt

   ASort( aFiles )
   ASize( aFiles, Len( aFiles ) + 1 )
   HB_AIns( aFiles, 1, "(Another file)", .F. )

   nFileName := ::ListBox( "Please choose a source file", aFiles )
   IF nFileName == 0
      RETURN NIL
   ELSEIF nFileName == 1
      cFileName := ::InputBox( "Please enter the filename", Space( 255 ) )
      cFileName := AllTrim( cFileName )
   ELSE
      cFileName := aFiles[ nFileName ]
   ENDIF

   IF !Empty( cFileName ) ;
        .AND. ( ValType( ::cPrgName ) == "U" .OR. !hb_FileMatch( cFileName, ::cPrgName ) )

      IF ! File( cFileName ) .AND. ! Empty( ::cPathForFiles )
         cRealName := ::LocatePrgPath( cFileName )
         IF Empty( cRealName )
           __dbgAlert( "File '" + cFileName + "' not found!" )
           RETURN NIL
         ENDIF
         cFileName := cRealName
      ENDIF
      ::cPrgName := cFileName
      hb_FNameSplit( cFileName, NIL, NIL, @cExt )
      ::lPPO := ( Lower( cExt ) == ".ppo" )
      ::oPulldown:GetItemByIdent( "PPO" ):Checked := ::lPPO
      ::oBrwText := HBBrwText():New( ::oWndCode:nTop + 1, ::oWndCode:nLeft + 1,;
                    ::oWndCode:nBottom - 1, ::oWndCode:nRight - 1, cFileName,;
                    __DbgColors()[ 2 ] + "," + __DbgColors()[ 5 ] + "," + ;
                    __DbgColors()[ 3 ] + "," + __DbgColors()[ 6 ], ;
                    ::lLineNumbers, ::nTabWidth )
      ::oWndCode:Browser := ::oBrwText
      ::RedisplayBreakpoints()               // check for breakpoints in this file and display them
      ::oWndCode:SetCaption( ::cPrgName )
      ::oWndCode:Refresh()       // to force the window caption to update
   ENDIF
   RETURN NIL


METHOD OpenPPO() CLASS HBDebugger

   LOCAL lSuccess
   LOCAL cDir
   LOCAL cName
   LOCAL cExt

   IF Empty( ::cPrgName )
      RETURN .F.
   ENDIF

   hb_FNameSplit( ::cPrgName, @cDir, @cName, @cExt )

   IF Lower( cExt ) == ".ppo"
      ::cPrgName := hb_FNameMerge( cDir, cName, ".prg" )
      lSuccess := File( ::cPrgName )
      ::lPPO := !lSuccess
   ELSE
      ::cPrgName := hb_FNameMerge( cDir, cName, ".ppo" )
      lSuccess := File( ::cPrgName )
      ::lPPO := lSuccess
   ENDIF

   IF lSuccess
      ::oBrwText := HBBrwText():New( ::oWndCode:nTop + 1, ::oWndCode:nLeft + 1,;
        ::oWndCode:nBottom - 1, ::oWndCode:nRight - 1, ::cPrgName,;
        __DbgColors()[ 2 ] + "," + __DbgColors()[ 5 ] + "," + ;
        __DbgColors()[ 3 ] + "," + __DbgColors()[ 6 ], ::lLineNumbers, ::nTabWidth )
      ::oWndCode:Browser := ::oBrwText
      ::RedisplayBreakpoints()               // check for breakpoints in this file and display them
      ::oWndCode:SetCaption( ::cPrgName )
      ::oWndCode:Refresh() // to force the window caption to update
   ENDIF

   ::oPullDown:GetItemByIdent( "PPO" ):checked := ::lPPO

   RETURN lSuccess


METHOD OSShell() CLASS HBDebugger

   LOCAL cImage := SaveScreen()
   LOCAL cColors := SetColor()
   LOCAL oE

   SetColor( "W/N" )
   CLS
   QOut( "Type 'exit' to RETURN to the Debugger" )
   SetCursor( SC_NORMAL )

   BEGIN SEQUENCE WITH { | objErr | Break( objErr ) }

#if defined( __PLATFORM__WINDOWS ) .OR. ;
    defined( __PLATFORM__DOS ) .OR. ;
    defined( __PLATFORM__OS2 )
      hb_Run( GetEnv( "COMSPEC" ) )
#elif defined( __PLATFORM__UNIX )
      hb_Run( GetEnv( "SHELL" ) )
#else
      __dbgAlert( "Not implemented yet!" )
#endif

   RECOVER USING oE

      __dbgAlert( "Error: " + oE:description )

   END SEQUENCE

   SetCursor( SC_NONE )
   RestScreen( ,,,, cImage )
   SetColor( cColors )

   RETURN NIL


METHOD Quit() CLASS HBDebugger

   ::Exit()
   ::Hide()
   __dbgSetQuit( ::pInfo )
   s_oDebugger := NIL

   __QUIT()

   RETURN NIL


METHOD PathForFiles( cPathForFiles ) CLASS HBDebugger

   IF cPathForFiles == NIL
      cPathForFiles := ::InputBox( "Search path for source files:", ::cPathForFiles )
   ENDIF
   ::cPathForFiles := cPathForFiles
   ::aPathDirs := PathToArray( ::cPathForFiles )

   ::Resume()
   RETURN Self


METHOD PrevWindow() CLASS HBDebugger

   LOCAL oWnd

   IF Len( ::aWindows ) > 0

      oWnd := ::aWindows[ ::nCurrentWindow-- ]
      oWnd:Show( .F. )
      IF ::nCurrentWindow < 1
         ::nCurrentWindow := Len( ::aWindows )
      ENDIF
      DO WHILE ! ::aWindows[ ::nCurrentWindow ]:lVisible
         ::nCurrentWindow--
         IF ::nCurrentWindow < 1
            ::nCurrentWindow := Len( ::aWindows )
         ENDIF
      ENDDO
      oWnd := ::aWindows[ ::nCurrentWindow ]
      oWnd:Show( .T. )

   ENDIF

   RETURN NIL


METHOD Private() CLASS HBDebugger

   ::lShowPrivates := ! ::lShowPrivates
   ::RefreshVars()

   RETURN NIL


METHOD Public() CLASS HBDebugger

   ::lShowPublics := ! ::lShowPublics
   ::RefreshVars()

   RETURN NIL


// check for breakpoints in the current file and display them
METHOD RedisplayBreakPoints() CLASS HBDebugger

   LOCAL n

   FOR n := 1 TO Len( ::aBreakpoints )
      IF hb_FileMatch( ::aBreakpoints[ n ][ 2 ], strip_path( ::cPrgName ) )
         ::oBrwText:ToggleBreakPoint( ::aBreakpoints[ n ][ 1 ], .T.)
      ENDIF
   NEXT

   RETURN NIL


METHOD RefreshVars() CLASS HBDebugger

   ::oPulldown:GetItemByIdent( "GLOBAL" ):checked := ::lShowGlobals
   ::oPulldown:GetItemByIdent( "LOCAL" ):checked := ::lShowLocals
   ::oPulldown:GetItemByIdent( "PRIVATE" ):checked := ::lShowPrivates
   ::oPulldown:GetItemByIdent( "PUBLIC" ):checked := ::lShowPublics
   ::oPulldown:GetItemByIdent( "STATIC" ):checked := ::lShowStatics
   ::oPulldown:GetItemByIdent( "ALL" ):checked := ::lAll
   ::oPulldown:GetItemByIdent( "SHOWALLGLOBALS" ):checked := ::lShowAllGlobals

   IF ::lActive
      IF ::lShowGlobals .OR. ::lShowPublics .OR. ::lShowPrivates .OR. ::lShowStatics .OR. ::lShowLocals
         ::LoadVars()
         ::ShowVars()
      ELSE
         ::HideVars()
      ENDIF
   ENDIF

   RETURN NIL


METHOD RemoveWindow( oWnd ) CLASS HBDebugger

   LOCAL n := AScan( ::aWindows, { | o | o == oWnd } )

   IF n != 0
      ::aWindows := ADel( ::aWindows, n )
      ::aWindows := ASize( ::aWindows, Len( ::aWindows ) - 1 )
   ENDIF

   ::nCurrentWindow := 1

   RETURN NIL


METHOD ResizeWindows( oWindow ) CLASS HBDebugger

   LOCAL oWindow2
   LOCAL nTop
   LOCAL lVisible2 := .F.

   IF oWindow == ::oWndVars
      oWindow2 := ::oWndPnt
   ELSEIF oWindow == ::oWndPnt
      oWindow2 := ::oWndVars
   ENDIF

   DispBegin()
   IF oWindow2 == NIL
      nTop := oWindow:nBottom + 1
   ELSE
      lVisible2 := oWindow2:lVisible
      IF oWindow2:lVisible
         IF oWindow:nTop < oWindow2:nTop
            nTop := oWindow2:nBottom - oWindow2:nTop + 1
            oWindow2:Resize( oWindow:nBottom + 1,, oWindow:nBottom + nTop )
         ELSE
            nTop := oWindow:nBottom - oWindow:nTop + 1
            oWindow:Resize( oWindow2:nBottom + 1,, oWindow2:nBottom + nTop )
         ENDIF
         nTop := Max( oWindow:nBottom, oWindow2:nBottom ) + 1
      ELSE
         IF oWindow:nTop > 1
            nTop := oWindow:nBottom - oWindow:nTop + 1
            oWindow:Resize( 1, NIL, nTop )
         ENDIF
         nTop := oWindow:nBottom + 1
      ENDIF
   ENDIF

   oWindow:hide()
   IF oWindow2 != NIL
      oWindow2:hide()
   ENDIF

   ::oWndCode:Resize( nTop )
   IF ::oWndCode:lFocused
      ::oWndCode:cargo[ 1 ] := Row()
      ::oWndCode:cargo[ 2 ] := Col()
   ENDIF

   IF oWindow2 != NIL .AND. lVisible2
      oWindow2:show()
   ENDIF
   oWindow:show()
   DispEnd()

   RETURN Self


METHOD RestoreAppScreen() CLASS HBDebugger

   LOCAL i

   ::CloseDebuggerWindow()

   FOR i := 1 TO ::nAppDispCount
      DispBegin()
   NEXT

   RETURN NIL


METHOD RestoreAppState() CLASS HBDebugger
   Set( _SET_DIRCASE, ::nAppDirCase )
   Set( _SET_FILECASE, ::nAppFileCase )
   Set( _SET_TYPEAHEAD, ::nAppTypeAhead )
   hb_SetLastKey( ::nAppLastKey )
#ifdef __XHARBOUR__
   SetInkeyAfterBlock( ::bAppInkeyAfter )
   SetInkeyBeforeBlock( ::bAppInkeyBefore )
   __SetClassScope( ::bAppClassScope )
#endif
   RETURN NIL


METHOD RestoreSettings() CLASS HBDebugger

   ::cSettingsFileName := ::InputBox( "File name", ::cSettingsFileName )

   IF LastKey() != K_ESC
      ::LoadSettings()
      ::ShowVars()
   ENDIF

   RETURN NIL


METHOD SaveAppScreen() CLASS HBDebugger

   LOCAL nRight
   LOCAL nTop
   LOCAL i

   ::nAppDispCount := DispCount()
   FOR i := 1 TO ::nAppDispCount
      DispEnd()
   NEXT

   ::OpenDebuggerWindow()

   IF ::nMaxRow != MaxRow() .OR. ::nMaxCol != MaxCol()
      DispBegin()
      ::nMaxRow := MaxRow()
      ::nMaxCol := MaxCol()
      nTop := 1
      nRight := ::nMaxCol
      ::oWndCommand:Resize( ::nMaxRow - 5, 0, ::nMaxRow - 1, ::nMaxCol )
      ::oGet:newPos( ::oWndCommand:nBottom - 1, ::oWndCommand:nLeft + 3 )
      ::oBrwStack:nTop := 2
      ::oBrwStack:nLeft := ::nMaxCol - 14
      ::oBrwStack:nRight := ::nMaxCol - 1
      ::oBrwStack:nBottom := ::nMaxRow - 7
      IF ::oWndStack != NIL
         nRight -= 16
         ::oWndStack:Resize( , nRight + 1, ::nMaxRow - 6, ::nMaxCol )
      ENDIF
      IF ::oWndVars != NIL
         ::oWndVars:Resize( , , , nRight )
         nTop := Max( nTop, ::oWndVars:nBottom + 1 )
      ENDIF
      IF ::oWndPnt != NIL
         ::oWndPnt:Resize( , , , nRight )
         nTop := Max( nTop, ::oWndPnt:nBottom + 1 )
      ENDIF
      ::oWndCode:Resize( nTop, 0, ::nMaxRow - 6, nRight )
      ::oPullDown:Refresh()
      ::BarDisplay()
      DispEnd()
   ENDIF
   RETURN NIL


METHOD SaveAppState() CLASS HBDebugger
   ::nAppDirCase := Set( _SET_DIRCASE, 0 )
   ::nAppFileCase := Set( _SET_FILECASE, 0 )
   ::nAppTypeAhead := Set( _SET_TYPEAHEAD, 16 )
   ::nAppLastKey := LastKey()
#ifdef __XHARBOUR__
   ::bAppInkeyAfter := SetInkeyAfterBlock( NIL )
   ::bAppInkeyBefore := SetInkeyBeforeBlock( NIL )
   ::bAppClassScope := __SetClassScope( .F. )
#endif
   RETURN NIL


METHOD SaveSettings() CLASS HBDebugger

   LOCAL cInfo := ""
   LOCAL n
   LOCAL oWnd

   ::cSettingsFileName := ::InputBox( "File name", ::cSettingsFileName )

   IF LastKey() != K_ESC

      IF ! Empty( ::cPathForFiles )
         cInfo += "Options Path " + ::cPathForFiles + hb_OSNewLine()
      ENDIF

      cInfo += "Options Colors {"
      FOR n := 1 TO Len( ::aColors )
         cInfo += '"' + ::aColors[ n ] + '"'
         IF n < Len( ::aColors )
            cInfo += ","
         ENDIF
      NEXT
      cInfo += "}" + hb_OSNewLine()

      IF ::lMonoDisplay
         cInfo += "Options mono " + hb_OSNewLine()
      ENDIF

      IF !::lRunAtStartup
         cInfo += "Options NoRunAtStartup " + hb_OSNewLine()
      ENDIF

      IF ::nSpeed != 0
         cInfo += "Run Speed " + hb_NToS( ::nSpeed ) + hb_OSNewLine()
      ENDIF

      IF ::nTabWidth != 4
         cInfo += "Options Tab " + hb_NToS( ::nTabWidth ) + hb_OSNewLine()
      ENDIF

      IF ::lShowStatics
         cInfo += "Monitor Static" + hb_OSNewLine()
      ENDIF

      IF ::lShowPublics
         cInfo += "Monitor Public" + hb_OSNewLine()
      ENDIF

      IF ::lShowLocals
         cInfo += "Monitor Local" + hb_OSNewLine()
      ENDIF

      IF ::lShowPrivates
         cInfo += "Monitor Private" + hb_OSNewLine()
      ENDIF

      IF ::lShowGlobals
         cInfo += "Monitor Global" + hb_OSNewLine()
      ENDIF

      IF ::lSortVars
         cInfo += "Monitor Sort" + hb_OSNewLine()
      ENDIF

      IF ::lShowCallStack
         cInfo += "View CallStack" + hb_OSNewLine()
      ENDIF

      IF ! ::lLineNumbers
         cInfo += "Num Off" + hb_OSNewLine()
      ENDIF

      IF ! Empty( ::aBreakPoints )
         FOR n := 1 TO Len( ::aBreakPoints )
            cInfo += "BP " + hb_NToS( ::aBreakPoints[ n ][ 1 ] ) + " " + ;
                     AllTrim( ::aBreakPoints[ n ][ 2 ] ) + hb_OSNewLine()
         NEXT
      ENDIF

      /* This part of the script must be executed after all windows are created */
      FOR n := 1 TO Len( ::aWindows )
         oWnd := ::aWindows[ n ]
         cInfo += "Window Size " + hb_NToS( oWnd:nBottom - oWnd:nTop + 1 ) + " "
         cInfo += hb_NToS( oWnd:nRight - oWnd:nLeft + 1 ) + hb_OSNewLine()
         cInfo += "Window Move " + hb_NToS( oWnd:nTop ) + " "
         cInfo += hb_NToS( oWnd:nLeft ) + hb_OSNewLine()
         cInfo += "Window Next" + hb_OSNewLine()
      NEXT

      hb_MemoWrit( ::cSettingsFileName, cInfo )
   ENDIF

   RETURN NIL


METHOD SearchLine() CLASS HBDebugger

   LOCAL cLine := ::InputBox( "Line number", "1" )

   IF Val( cLine ) > 0
      ::GotoLine ( Val( cLine ) )
   ENDIF

   RETURN NIL


METHOD Show() CLASS HBDebugger

   ::SaveAppScreen()
   ::oPullDown:Display()
   ::oWndCode:Show( .T. )
   ::oWndCommand:Show()
   hb_dispOutAt( ::oWndCommand:nBottom - 1, ::oWndCommand:nLeft + 1, ">" )

   ::BarDisplay()

   RETURN NIL


METHOD ShowAllGlobals() CLASS HBDebugger

   ::lShowAllGlobals := ! ::lShowAllGlobals
   ::RefreshVars()

   RETURN NIL


METHOD ShowAppScreen() CLASS HBDebugger

   ::CloseDebuggerWindow()

   IF LastKey() == K_LBUTTONDOWN
      Inkey( 0, INKEY_ALL )
   ENDIF
   DO WHILE Inkey( 0, INKEY_ALL ) == K_MOUSEMOVE
   ENDDO

   ::OpenDebuggerWindow()

   RETURN NIL


METHOD ShowCallStack() CLASS HBDebugger

   ::lShowCallStack := .T.

   IF ::oWndStack == NIL

      SetCursor( SC_NONE )

      DispBegin()
      // Resize code window
      ::oWndCode:Resize(,,, ::oWndCode:nRight - 16 )
      // Resize vars window
      IF ::oWndVars != NIL
         ::oWndVars:Resize(,,, ::oWndVars:nRight - 16 )
      ENDIF
      // Resize watchpoints window
      IF ::oWndPnt != NIL
         ::oWndPnt:Resize(,,, ::oWndPnt:nRight - 16)
      ENDIF
      DispEnd()

      IF ::aWindows[ ::nCurrentWindow ]:lFocused
         ::aWindows[ ::nCurrentWindow ]:Show( .F. )
      ENDIF

      ::oWndStack := HBDbWindow():New( 1, ::nMaxCol - 15, ::nMaxRow - 6, ::nMaxCol,;
                                     "Calls" )
      ::oWndStack:bKeyPressed  := { | nKey | ::CallStackProcessKey( nKey ) }
      ::oWndStack:bLButtonDown := { || ::CallStackProcessKey( K_LBUTTONDOWN ) }

      AAdd( ::aWindows, ::oWndStack )
      //::nCurrentWindow := Len( ::aWindows )

      IF ::oBrwStack == NIL
         ::BuildBrowseStack()
      ENDIF

      ::oWndStack:bPainted := { || ::oBrwStack:ColorSpec := __DbgColors()[ 2 ] + "," + ;
                                  __DbgColors()[ 5 ] + "," + __DbgColors()[ 4 ] + "," + __DbgColors()[ 6 ],;
                                  ::oBrwStack:RefreshAll(), ::oBrwStack:ForceStable() }
      ::oWndStack:bGotFocus := { || SetCursor( SC_NONE ) }

      ::oWndStack:Show( .F. )
   ENDIF

   RETURN NIL


METHOD ShowCodeLine( nProc ) CLASS HBDebugger

   LOCAL cDir
   LOCAL cName
   LOCAL nLine
   LOCAL cPrgName

   // we only update the stack window and up a new browse
   // to view the code if we have just broken execution
   IF !::lGo
      IF ::oWndStack != NIL
         ::oBrwStack:RefreshAll()
      ENDIF

      nLine := ::aProcStack[ nProc ][ CSTACK_LINE ]
      cPrgName := ::aProcStack[ nProc ][ CSTACK_MODULE ]
      IF nLine == NIL
         ::oBrwText := NIL
         ::oWndCode:Browser := NIL
         ::oWndCode:SetCaption( ::aProcStack[ nProc ][ CSTACK_FUNCTION ] +;
                                ": Code not available" )
         ::oWndCode:Refresh() // to force the window caption to update
         RETURN NIL
      ENDIF

      IF ::lPPO
         hb_FNameSplit( cPrgName, @cDir, @cName, NIL )
         cPrgName := hb_FNameMerge( cDir, cName, ".ppo" )
      ENDIF

      IF ! Empty( cPrgName )

         IF !hb_FileMatch( strip_path( cPrgName ), strip_path( ::cPrgName ) ) ;
              .OR. ::oBrwText == NIL

            IF ! File( cPrgName ) .AND. !Empty( ::cPathForFiles )
               cPrgName := ::LocatePrgPath( cPrgName )
            ENDIF

            ::cPrgName := cPrgName

            IF !File( cPrgName )
               ::oBrwText := NIL
               ::oWndCode:Browser := NIL
               ::oWndCode:SetCaption( ::aProcStack[ nProc ][ CSTACK_MODULE ] + ;
                                     "  File not found" )
               ::oWndCode:Refresh()
               RETURN NIL
            ENDIF

            IF ::oBrwText == NIL
               ::oBrwText := HBBrwText():New( ::oWndCode:nTop + 1, ::oWndCode:nLeft + 1,;
                                              ::oWndCode:nBottom - 1, ::oWndCode:nRight - 1, cPrgName,;
                                              __DbgColors()[ 2 ] + "," + __DbgColors()[ 5 ] + "," + ;
                                              __DbgColors()[ 3 ] + "," + __DbgColors()[ 6 ], ;
                                              ::lLineNumbers, ::nTabWidth )

               ::oWndCode:Browser := ::oBrwText

            ELSE
               ::oBrwText:LoadFile(cPrgName)
            ENDIF

            ::oWndCode:bPainted := { || iif( ::oBrwText != NIL, ::oBrwText:RefreshAll():ForceStable(), ::oWndCode:Clear() ) }
            ::RedisplayBreakpoints()               // check for breakpoints in this file and display them
            ::oWndCode:SetCaption( ::cPrgName )
            ::oWndCode:Refresh()       // to force the window caption to update
         ENDIF
         ::oBrwText:SetActiveLine( nLine )
         ::GotoLine( nLine )
      ENDIF

   ENDIF

   RETURN NIL


METHOD ShowHelp( nTopic ) CLASS HBDebugger

   LOCAL nCursor := SetCursor( SC_NONE )

   __dbgHelp( nTopic )
   SetCursor( nCursor )

   RETURN NIL


#define MAX_VARS_HEIGHT 7

METHOD ShowVars() CLASS HBDebugger

   LOCAL oCol
   LOCAL lRepaint := .F.
   LOCAL nTop
   LOCAL nBottom
   LOCAL lWindowCreated := .F.
   LOCAL aColors

   IF ::lGo
      RETURN NIL
   ENDIF

   IF ! ( ::lShowLocals .OR. ::lShowStatics .OR. ::lShowPrivates .OR. ;
          ::lShowPublics .OR. ::lShowGlobals )
      RETURN NIL
   ENDIF

   DispBegin()

   IF ::oWndVars == NIL

      nTop := iif( ::oWndPnt != NIL .AND. ::oWndPnt:lVisible, ::oWndPnt:nBottom + 1,1)
      nBottom := nTop + Min( MAX_VARS_HEIGHT, Len( ::aVars ) + 1 )

      ::oWndVars := HBDbWindow():New( nTop, 0, nBottom,;
         ::nMaxCol - iif( ::oWndStack != NIL, ::oWndStack:nWidth(), 0 ),;
         "Monitor:" + ;
         iif( ::lShowGlobals, " Global", "" ) + iif( ::lShowLocals, " Local", "" ) + ;
         iif( ::lShowStatics, " Static", "" ) + iif( ::lShowPrivates, " Private", "" ) + ;
         iif( ::lShowPublics, " Public", "" ) )

      ::oWndVars:bLButtonDown := { | nMRow, nMCol | ::WndVarsLButtonDown( nMRow, nMCol ) }
      ::oWndVars:bLDblClick   := { || ::EditVar( ::oBrwVars:Cargo[ 1 ] ) }
      ::oWndVars:bPainted     := { || iif(Len( ::aVars ) > 0, ( ::oBrwVars:RefreshAll():ForceStable(),RefreshVarsS(::oBrwVars) ),) }

      ::oWndVars:bKeyPressed := { | nKey | iif( Len( ::aVars ) == 0, NIL, ( ;
      iif( nKey == K_DOWN, ::oBrwVars:Down(), NIL ) ;
      , iif( nKey == K_UP, ::oBrwVars:Up(), NIL ) ;
      , iif( nKey == K_PGDN, ::oBrwVars:PageDown(), NIL ) ;
      , iif( nKey == K_PGUP, ::oBrwVars:PageUp(), NIL ) ;
      , iif( nKey == K_HOME, ::oBrwVars:GoTop(), NIL ) ;
      , iif( nKey == K_END, ::oBrwVars:GoBottom(), NIL ) ;
      , iif( nKey == K_ENTER, ::EditVar( ::oBrwVars:Cargo[ 1 ] ), NIL ), ;
      iif(Len(::aVars)>0, ::oBrwVars:ForceStable(), NIL) ) ) }

      AAdd( ::aWindows, ::oWndVars )
      lWindowCreated := .T.
   ELSE

      nTop := ::oWndVars:nTop
      ::oWndVars:cCaption := "Monitor:" + ;
      iif( ::lShowGlobals, " Global", "" ) + ;
      iif( ::lShowLocals, " Local", "" ) + ;
      iif( ::lShowStatics, " Static", "" ) + ;
      iif( ::lShowPrivates, " Private", "" ) + ;
      iif( ::lShowPublics, " Public", "" )

      nBottom := ::oWndVars:nBottom
      IF Len( ::aVars ) == 0
         IF ::oWndVars:nBottom - ::oWndVars:nTop > 1
            nBottom := nTop + 1
         ENDIF
      ELSEIF Len( ::aVars ) > ::oWndVars:nBottom - ::oWndVars:nTop - 1
         nBottom := nTop + Min( Len( ::aVars ) + 1, MAX_VARS_HEIGHT )
      ELSEIF Len( ::aVars ) < ::oWndVars:nBottom - ::oWndVars:nTop - 1
         nBottom := nTop + Len( ::aVars ) + 1
      ELSE
         nBottom := ::oWndVars:nBottom
      ENDIF
   ENDIF

   IF Len( ::aVars ) > 0 .AND. ::oBrwVars == NIL
      ::oBrwVars := HBDbBrowser():New( nTop + 1, 1, nBottom - 1, ;
                                       ::nMaxCol - iif( ::oWndStack != NIL, ::oWndStack:nWidth(), 0 ) - 1 )
      aColors := __DbgColors()
      ::oBrwVars:Cargo := { 1, {} } // Actual highlighted row
      ::oBrwVars:ColorSpec := aColors[ 2 ] + "," + aColors[ 5 ] + "," + aColors[ 3 ] + "," + aColors[ 6 ]
      ::oBrwVars:goTopBlock := { || ::oBrwVars:cargo[ 1 ] := Min( 1, Len( ::aVars ) ) }
      ::oBrwVars:goBottomBlock := { || ::oBrwVars:cargo[ 1 ] := Max( 1, Len( ::aVars ) ) }
      ::oBrwVars:skipBlock := { | nSkip, nOld | ;
                               nOld := ::oBrwVars:Cargo[ 1 ],;
                               ::oBrwVars:Cargo[ 1 ] += nSkip,;
                               ::oBrwVars:Cargo[ 1 ] := Min( Max( ::oBrwVars:Cargo[ 1 ], 1 ), Len( ::aVars ) ),;
                               ::oBrwVars:Cargo[ 1 ] - nOld }

      oCol := HBDbColumnNew( "", ;
           { || PadR( hb_NToS( ::oBrwVars:Cargo[ 1 ] - 1 ) + ") " + ;
                      ::VarGetInfo( ::aVars[ Max( ::oBrwVars:Cargo[ 1 ], 1 ) ] ), ;
                      ::oWndVars:nWidth() - 2 ) } )
      ::oBrwVars:AddColumn( oCol )
      AAdd( ::oBrwVars:Cargo[ 2 ], ::aVars )
      oCol:DefColor := { 1, 2 }
      ::oBrwVars:ForceStable()
   ELSEIF Len( ::aVars ) == 0
      ::oBrwVars := NIL
      ::oWndVars:Browser := NIL
   ENDIF

   ::oWndVars:Browser := ::oBrwVars

   IF lWindowCreated
      ::oWndVars:Show()
      ::ResizeWindows( ::oWndVars )

   ELSE

      IF ::oBrwVars != NIL
         IF ::oBrwVars:cargo[ 1 ] <= 0
            ::oBrwVars:cargo[ 1 ] := 1
         ENDIF
      ENDIF

      IF Len( ::aVars ) == 0
         IF nBottom == ::oWndVars:nBottom
            /* We still need to redraw window caption, it could have changed */
            ::oWndVars:Refresh()
         ENDIF
      ENDIF
      IF nBottom != ::oWndVars:nBottom
         ::oWndVars:Resize( ,, nBottom )
         lRepaint := .T.
      ELSE
         IF ::oBrwVars != NIL
           ::oBrwVars:RefreshAll():ForceStable()
         ENDIF
         ::oWndVars:Refresh()
      ENDIF
      IF ! ::oWndVars:lVisible .OR. lRepaint
         ::ResizeWindows( ::oWndVars )
      ENDIF
   ENDIF

   DispEnd()

   RETURN NIL


METHOD Stack() CLASS HBDebugger

   ::lShowCallStack := ! ::lShowCallStack
   ::oPulldown:GetItemByIdent( "CALLSTACK" ):checked := ::lShowCallStack

   IF ::lActive
      IF ::lShowCallStack
         ::ShowCallStack()
      ELSE
         ::HideCallStack()
      ENDIF
   ENDIF

   RETURN NIL


METHOD Static() CLASS HBDebugger

   ::lShowStatics := ! ::lShowStatics
   ::RefreshVars()

   RETURN NIL


METHOD Step() CLASS HBDebugger

   // we are starting to run again so reset to the deepest call if displaying stack
   IF ! ::oBrwStack == NIL
      ::oBrwStack:GoTop()
   ENDIF

   ::RestoreAppScreen()
   ::RestoreAppState()
   ::Exit()

   RETURN NIL


METHOD ToCursor() CLASS HBDebugger

   IF ::IsValidStopLine( strip_path( ::cPrgName ), ::oBrwText:RowPos() )
      __dbgSetToCursor( ::pInfo, strip_path( ::cPrgName ), ::oBrwText:RowPos() )
      ::RestoreAppScreen()
      ::RestoreAppState()
      ::Exit()
   ENDIF

   RETURN Self


// Toggle a breakpoint at the cursor position in the currently viewed file
// which may be different from the file in which execution was broken
METHOD ToggleBreakPoint( nLine, cFileName ) CLASS HBDebugger

   // look for a breakpoint which matches both line number and program name

   LOCAL nAt

   IF nLine == NIL
      cFileName := strip_path( ::cPrgName )
      nLine := ::oBrwText:RowPos()
   ENDIF

   IF !::IsValidStopLine( cFileName, nLine )
      RETURN NIL
   ENDIF

   nAt := AScan( ::aBreakPoints, { | aBreak | aBreak[ 1 ] == nLine ;
                                     .AND. hb_FileMatch( aBreak[ 2 ], cFileName ) } )

   IF nAt == 0
      AAdd( ::aBreakPoints, { nLine, cFileName } )     // it was nLine
      __dbgAddBreak( ::pInfo, cFileName, nLine )
      IF hb_FileMatch( cFileName, strip_path( ::cPrgName ) )
         ::oBrwText:ToggleBreakPoint( nLine, .T. )
      ENDIF
   ELSE
      ADel( ::aBreakPoints, nAt )
      ASize( ::aBreakPoints, Len( ::aBreakPoints ) - 1 )
      __dbgDelBreak( ::pInfo, nAt - 1 )
      IF hb_FileMatch( cFileName, strip_path( ::cPrgName ) )
         ::oBrwText:ToggleBreakPoint( nLine, .F. )
      ENDIF
   ENDIF
   IF ::lActive
      ::oBrwText:RefreshCurrent():ForceStable()
   ENDIF 
   RETURN NIL


METHOD Trace() CLASS HBDebugger

   __dbgSetTrace( ::pInfo )
   ::Step() //forces a Step()

   RETURN Self


METHOD TracepointAdd( cExpr ) CLASS HBDebugger

   LOCAL aWatch

   IF cExpr == NIL
      cExpr := Space( 255 )
      cExpr := AllTrim( ::InputBox( "Enter Tracepoint", cExpr ) )
      IF LastKey() == K_ESC
         RETURN Self
      ENDIF
   ENDIF
   cExpr := AllTrim( cExpr )
   IF Empty( cExpr )
      RETURN Self
   ENDIF
   aWatch := { "tp", cExpr, NIL }
   ::RestoreAppState()
   __dbgAddWatch( ::pInfo, cExpr, .T. )
   ::SaveAppState()
   AAdd( ::aWatch, aWatch )
   ::WatchpointsShow()

   RETURN Self


METHOD VarGetInfo( aVar ) CLASS HBDebugger

   LOCAL cType := Left( aVar[ VAR_TYPE ], 1 )
   LOCAL uValue := ::VarGetValue( aVar )

   DO CASE
   CASE cType == "G" ; RETURN aVar[ VAR_NAME ] + " <Global, " + ValType( uValue ) + ">: " + __dbgValToStr( uValue )
   CASE cType == "L" ; RETURN aVar[ VAR_NAME ] + " <Local, " + ValType( uValue ) + ">: " + __dbgValToStr( uValue )
   CASE cType == "S" ; RETURN aVar[ VAR_NAME ] + " <Static, " + ValType( uValue ) + ">: " + __dbgValToStr( uValue )
   OTHERWISE         ; RETURN aVar[ VAR_NAME ] + " <" + aVar[ VAR_TYPE ] + ", " + ValType( uValue ) + ">: " + __dbgValToStr( uValue )
   ENDCASE

   // ; Never reached

   RETURN ""


METHOD VarGetValue( aVar ) CLASS HBDebugger

   LOCAL cType := Left( aVar[ VAR_TYPE ], 1 )

   DO CASE
   CASE cType == "G" ; RETURN __dbgvmVarGGet( aVar[ VAR_LEVEL ], aVar[ VAR_POS ] )
   CASE cType == "L" ; RETURN __dbgvmVarLGet( __dbgprocLevel() - aVar[ VAR_LEVEL ], aVar[ VAR_POS ] )
   CASE cType == "S" ; RETURN __dbgvmVarSGet( aVar[ VAR_LEVEL ], aVar[ VAR_POS ] )
   OTHERWISE         ; RETURN aVar[ VAR_POS ] // Public or Private
   ENDCASE

   // ; Never reached

   RETURN NIL


METHOD VarSetValue( aVar, uValue ) CLASS HBDebugger

   LOCAL nProcLevel
   LOCAL cType := Left( aVar[ VAR_TYPE ], 1 )

   IF cType == "G"
     __dbgvmVarGSet( aVar[ VAR_LEVEL ], aVar[ VAR_POS ], uValue )

   ELSEIF cType == "L"
     nProcLevel := __dbgprocLevel() - aVar[ VAR_LEVEL ]   //skip debugger stack
     __dbgvmVarLSet( nProcLevel, aVar[ VAR_POS ], uValue )

   ELSEIF cType == "S"
     __dbgvmVarSSet( aVar[ VAR_LEVEL ], aVar[ VAR_POS ], uValue )

   ELSE
     // Public or Private
     aVar[ VAR_POS ] := uValue
     &( aVar[ VAR_NAME ] ) := uValue

   ENDIF

   RETURN Self


METHOD ViewSets() CLASS HBDebugger

   LOCAL oWndSets := HBDbWindow():New( 1, 8, ::nMaxRow - 2, ::nMaxCol - 8,;
                                      "System Settings[1..47]", ::ClrModal() )
   LOCAL aSets := { "Exact", "Fixed", "Decimals", "DateFormat", "Epoch", "Path",;
                    "Default", "Exclusive", "SoftSeek", "Unique", "Deleted",;
                    "Cancel", "Debug", "TypeAhead", "Color", "Cursor", "Console",;
                    "Alternate", "AltFile", "Device", "Extra", "ExtraFile",;
                    "Printer", "PrintFile", "Margin", "Bell", "Confirm", "Escape",;
                    "Insert", "Exit", "Intensity", "ScoreBoard", "Delimeters",;
                    "DelimChars", "Wrap", "Message", "MCenter", "ScrollBreak",;
                    "EventMask", "VideoMode", "MBlockSize", "MFileExt",;
                    "StrictRead", "Optimize", "Autopen", "Autorder", "AutoShare" }

   LOCAL oBrwSets := HBDbBrowser():new( oWndSets:nTop + 1, oWndSets:nLeft + 1,;
                                        oWndSets:nBottom - 1, oWndSets:nRight - 1 )
   LOCAL nWidth := oWndSets:nRight - oWndSets:nLeft - 1
   LOCAL oCol

   oBrwSets:Cargo := { 1, {} } // Actual highlighted row
   oBrwSets:autolite := .F.
   oBrwSets:ColorSpec := ::ClrModal()
   oBrwSets:goTopBlock := { || oBrwSets:cargo[ 1 ] := 1 }
   oBrwSets:goBottomBlock := { || oBrwSets:cargo[ 1 ] := Len( oBrwSets:cargo[ 2 ][ 1 ] ) }
   oBrwSets:skipBlock := { | nPos | ( nPos := ArrayBrowseSkip( nPos, oBrwSets ), oBrwSets:cargo[ 1 ] := ;
   oBrwSets:cargo[ 1 ] + nPos, nPos ) }
   oBrwSets:AddColumn( oCol := HBDbColumnNew( "", { || PadR( aSets[ oBrwSets:cargo[ 1 ] ], 12 ) } ) )
   AAdd( oBrwSets:Cargo[ 2 ], aSets )
   ocol:defcolor := { 1, 2 }
   oBrwSets:AddColumn( oCol := HBDbColumnNew( "",;
                       { || PadR( __dbgValToStr( Set( oBrwSets:cargo[ 1 ]  ) ), nWidth - 13 ) } ) )
   ocol:defcolor := { 1, 3 }
   ocol:width := 40
   oWndSets:bPainted := { || oBrwSets:ForceStable(), RefreshVarsS( oBrwSets ) }
   oWndSets:bKeyPressed := { | nKey | SetsKeyPressed( nKey, oBrwSets, Len( aSets ),;
                            oWndSets, "System Settings",;
                            { || ::EditSet( oBrwSets:Cargo[ 1 ], oBrwSets ) } ) }

   SetCursor( SC_NONE )
   oWndSets:ShowModal()

   RETURN NIL


METHOD WatchGetInfo( nWatch ) CLASS HBDebugger

   LOCAL xVal
   LOCAL cType
   LOCAL lValid
   LOCAL aWatch := ::aWatch[ nWatch ]

   ::RestoreAppState()
   xVal := ::GetExprValue( nWatch, @lValid )
   ::SaveAppState()

   IF lValid
      cType := ValType( xVal )
      xVal  := __dbgValToStr( xVal )
   ELSE
      // xVal contains error description
      cType := "U"
      // xVal := "Undefined"
   ENDIF

   RETURN aWatch[ WP_EXPR ] + " <" + aWatch[ WP_TYPE ] + ", " + cType + ">: " + xVal


METHOD WatchpointAdd( cExpr ) CLASS HBDebugger

   LOCAL aWatch

   IF cExpr == NIL

      cExpr := Space( 255 )
      cExpr := AllTrim( ::InputBox( "Enter Watchpoint", cExpr ) )

      IF LastKey() == K_ESC
         RETURN Self
      ENDIF
   ENDIF

   cExpr := AllTrim( cExpr )

   IF Empty( cExpr )
      RETURN Self
   ENDIF

   aWatch := { "wp", cExpr }
   __dbgAddWatch( ::pInfo, cExpr, .F. )
   AAdd( ::aWatch, aWatch )
   ::WatchpointsShow()

   RETURN Self


METHOD WatchpointDel( nPos ) CLASS HBDebugger

   IF ::oWndPnt != NIL .AND. ::oWndPnt:lVisible
      IF nPos == NIL
         // called from the menu
         nPos := ::InputBox( "Enter item number to delete", ::oBrwPnt:cargo[ 1 ] - 1 )
      ELSE
         nPos--
      ENDIF
      IF LastKey() != K_ESC
         IF nPos >=0 .AND. nPos < Len( ::aWatch )
            ::oBrwPnt:gotop()
            __dbgDelWatch( ::pInfo, nPos )
            ADel( ::aWatch, nPos + 1 )
            ASize( ::aWatch, Len( ::aWatch ) - 1 )
            IF Len( ::aWatch ) == 0
               ::WatchpointsHide()
            ELSE
               ::WatchpointsShow()
            ENDIF
         ENDIF
      ENDIF
   ENDIF

   RETURN Self


METHOD WatchpointEdit( nPos ) CLASS HBDebugger

   LOCAL cExpr
   LOCAL aWatch

   cExpr := PadR( ::aWatch[ nPos ][ WP_EXPR ], 255 )
   cExpr := AllTrim( ::InputBox( "Enter Watchpoint", cExpr ) )

   IF LastKey() == K_ESC
      RETURN Self
   ENDIF

   cExpr := AllTrim( cExpr )

   IF Empty( cExpr )
      RETURN Self
   ENDIF

   aWatch := { "wp", cExpr }

   __dbgSetWatch( ::pInfo, nPos - 1, cExpr, .F. )
   ::aWatch[ nPos ] := aWatch
   ::WatchpointsShow()

   RETURN Self


METHOD WatchpointInspect( nPos ) CLASS HBDebugger

   LOCAL xValue
   LOCAL lValid

   ::RestoreAppState()
   xValue := ::GetExprValue( ::aWatch[ nPos ][ WP_EXPR ], @lValid )
   ::SaveAppState()

   ::InputBox( ::aWatch[ nPos ][ WP_EXPR ], xValue, NIL, .F. )
   ::RefreshVars()

   RETURN Self


METHOD WatchpointsHide() CLASS HBDebugger

   ::oWndPnt:Hide()
   ::oWndCode:nTop := iif( ::oWndVars != NIL .AND. ::oWndVars:lVisible, ::oWndVars:nBottom + 1, 1 )
   ::oBrwText:Resize( ::oWndCode:nTop + 1 )
   IF ::aWindows[ ::nCurrentWindow ] == ::oWndPnt
      ::NextWindow()
   ENDIF

   RETURN NIL


METHOD WatchpointsShow() CLASS HBDebugger

   LOCAL oCol
   LOCAL lRepaint := .F.
   LOCAL nTop
   LOCAL aColors

   IF ::lGo
      RETURN NIL
   ENDIF

   IF Len( ::aWatch ) == 0
      RETURN NIL
   ENDIF

   IF ::oWndPnt == NIL

      nTop := iif( ::oWndVars != NIL .AND. ::oWndVars:lVisible, ::oWndVars:nBottom, 0 ) + 1

      ::oWndPnt := HBDbWindow():New( nTop,;
         0, ;
         nTop + Min( 4, Len( ::aWatch ) ) + 1,;
         ::nMaxCol - iif( ::oWndStack != NIL, ::oWndStack:nWidth(), 0 ),;
         "Watch" )

//      ::oBrwText:Resize( ::oWndPnt:nBottom + 1 )
//      ::oWndCode:nTop := ::oWndPnt:nBottom + 1
//      ::oBrwText:Resize( ::oWndCode:nTop + 1 )
//      ::oBrwText:RefreshAll()
//      ::oWndCode:SetFocus( .T. )

//      ::oWndPnt:bLButtonDown := { | nMRow, nMCol | ::WndVarsLButtonDown( nMRow, nMCol ) }
//      ::oWndPnt:bLDblClick   := { | nMRow, nMCol | ::EditVar( ::oBrwPnt:Cargo[ 1 ] ) }

      ::oBrwPnt := HBDbBrowser():New( nTop + 1, 1, ::oWndPnt:nBottom - 1, ::nMaxCol - iif( ::oWndStack != NIL,;
                               ::oWndStack:nWidth(), 0 ) - 1 )

      ::oWndPnt:Browser := ::oBrwPnt

      ::oBrwPnt:Cargo := { 1, {} } // Actual highlighted row
      aColors := __DbgColors()
      ::oBrwPnt:ColorSpec := aColors[ 2 ] + "," + aColors[ 5 ] + "," + aColors[ 3 ] + "," + aColors[ 6 ]
      ::oBrwPnt:goTopBlock := { || ::oBrwPnt:cargo[ 1 ] := Min( 1, Len(::aWatch ) ) }
      ::oBrwPnt:goBottomBlock := { || ::oBrwPnt:cargo[ 1 ] := Len( ::aWatch ) }
      ::oBrwPnt:skipBlock := { | nSkip, nOld | nOld := ::oBrwPnt:Cargo[ 1 ],;
                               ::oBrwPnt:Cargo[ 1 ] += nSkip,;
                               ::oBrwPnt:Cargo[ 1 ] := Min( Max( ::oBrwPnt:Cargo[ 1 ], 1 ),;
                                                             Len( ::aWatch ) ),;
                               iif( Len(::aWatch) > 0, ::oBrwPnt:Cargo[ 1 ] - nOld, 0 ) }

      oCol := HBDbColumnNew( "", ;
         { || PadR( iif( Len( ::aWatch ) > 0, ;
                       hb_NToS( ::oBrwPnt:Cargo[ 1 ] - 1 ) + ") " + ;
                       ::WatchGetInfo( Max( ::oBrwPnt:Cargo[ 1 ], 1 ) ), ;
                       " " ), ;
                   ::oWndPnt:nWidth() - 2 ) } )
      ::oBrwPnt:AddColumn( oCol )
      AAdd( ::oBrwPnt:Cargo[ 2 ], ::aWatch)
      oCol:DefColor := { 1, 2 }

      ::oWndPnt:bPainted := { || iif( Len( ::aWatch ) > 0, ( ::oBrwPnt:RefreshAll():ForceStable(), RefreshVarsS( ::oBrwPnt ) /*, ::RefreshVars()*/ ) , ) }

      ::oWndPnt:bKeyPressed := { | nKey | ;
      ( iif( nKey == K_DOWN, ::oBrwPnt:Down(), NIL ) ;
      , iif( nKey == K_UP, ::oBrwPnt:Up(), NIL ) ;
      , iif( nKey == K_PGDN, ::oBrwPnt:PageDown(), NIL ) ;
      , iif( nKey == K_PGUP, ::oBrwPnt:PageUp(), NIL ) ;
      , iif( nKey == K_HOME, ::oBrwPnt:GoTop(), NIL ) ;
      , iif( nKey == K_END, ::oBrwPnt:GoBottom(), NIL ) ;
      , iif( nKey == K_DEL, ::WatchpointDel( ::oBrwPnt:Cargo[ 1 ] ), NIL ) ;
      , iif( nKey == K_ENTER, ::WatchpointEdit( ::oBrwPnt:Cargo[ 1 ] ), NIL ) ;
      , iif( nKey == K_CTRL_ENTER, ::WatchpointInspect( ::oBrwPnt:Cargo[ 1 ] ), NIL ) ;
      , ::oBrwPnt:ForceStable() ) }

      AAdd( ::aWindows, ::oWndPnt )
      ::oWndPnt:Show()
      ::ResizeWindows( ::oWndPnt )
   ELSE
      IF ::oBrwPnt:cargo[ 1 ] <= 0
         ::oBrwPnt:cargo[ 1 ] := 1
      ENDIF
      DispBegin()
      IF Len( ::aWatch ) > ::oWndPnt:nBottom - ::oWndPnt:nTop - 1
         //Resize( top, left, bottom, right )
         ::oWndPnt:Resize( ,, ::oWndPnt:nTop + Min( Len( ::aWatch ) + 1, 4 ) )
         lRepaint := .T.
      ELSEIF Len( ::aWatch ) < ::oWndPnt:nBottom - ::oWndPnt:nTop - 1
         ::oWndPnt:Resize( ,, ::oWndPnt:nTop + Len( ::aWatch ) + 1 )
         lRepaint := .T.
      ELSE
         ::oBrwPnt:RefreshAll():ForceStable()
      ENDIF
      IF ! ::oWndPnt:lVisible .OR. lRepaint
         ::ResizeWindows( ::oWndPnt )
      ENDIF
      DispEnd()
   ENDIF

   RETURN NIL


METHOD WndVarsLButtonDown( nMRow, nMCol ) CLASS HBDebugger

   IF nMRow > ::oWndVars:nTop .AND. ;
      nMRow < ::oWndVars:nBottom .AND. ;
      nMCol > ::oWndVars:nLeft .AND. ;
      nMCol < ::oWndVars:nRight

      IF nMRow - ::oWndVars:nTop >= 1 .AND. ;
         nMRow - ::oWndVars:nTop <= Len( ::aVars )

         DO WHILE ::oBrwVars:RowPos > nMRow - ::oWndVars:nTop
            ::oBrwVars:Up()
            ::oBrwVars:ForceStable()
         ENDDO

         DO WHILE ::oBrwVars:RowPos < nMRow - ::oWndVars:nTop
            ::oBrwVars:Down()
            ::oBrwVars:ForceStable()
         ENDDO

      ENDIF
   ENDIF

   RETURN NIL


STATIC PROCEDURE SetsKeyPressed( nKey, oBrwSets, nSets, oWnd, cCaption, bEdit )

   DO CASE
   CASE nKey == K_UP

      oBrwSets:up()

   CASE nKey == K_DOWN

      oBrwSets:down()

   CASE nKey == K_HOME .OR. nKey == K_CTRL_PGUP .OR. nKey == K_CTRL_HOME

      oBrwSets:goTop()

   CASE nKey == K_END .OR. nKey == K_CTRL_PGDN .OR. nKey == K_CTRL_END

      oBrwSets:goBottom()

   CASE nKey == K_PGDN

      oBrwSets:pageDown()

   CASE nKey == K_PGUP

      oBrwSets:pageUp()

   CASE nKey == K_ENTER

      IF bEdit != NIL
         Eval( bEdit )
      ENDIF

      IF LastKey() == K_ENTER
         KEYBOARD Chr( K_DOWN )
      ENDIF

   ENDCASE

   RefreshVarsS( oBrwSets )

   oWnd:SetCaption( cCaption + "[" + RTrim( Str( oBrwSets:Cargo[ 1 ] ) ) + ".." + RTrim( Str( nSets ) ) + "]" )

   RETURN


STATIC PROCEDURE StripUntil( pcLine, i, cChar )

   LOCAL j
   LOCAL n
   LOCAL nLen := Len( pcLine )

   n := Len( cChar )
   j := i + n
   DO WHILE j <= nLen .AND. SubStr( pcLine, j, n ) != cChar
      j++
   ENDDO

   IF j <= nLen
      pcLine := Left( pcLine, i - 1 ) + SubStr( pcLine, j + n )
   ENDIF

   RETURN


FUNCTION __DbgColors()
   RETURN s_oDebugger:GetColors()


FUNCTION __Dbg()
   RETURN s_oDebugger


STATIC PROCEDURE RefreshVarsS( oBrowse )

   LOCAL nLen := oBrowse:colCount

   IF nLen == 2
      oBrowse:deHilite():colPos := 2
   ENDIF
   oBrowse:deHilite():forceStable()

   IF nLen == 2
      oBrowse:hilite():colPos := 1
   ENDIF
   oBrowse:hilite()

   RETURN


STATIC FUNCTION ArrayBrowseSkip( nPos, oBrwSets )
   RETURN iif( oBrwSets:cargo[ 1 ] + nPos < 1, 0 - oBrwSets:cargo[ 1 ] + 1 , ;
             iif( oBrwSets:cargo[ 1 ] + nPos > Len( oBrwSets:cargo[ 2 ][ 1 ] ), ;
                Len( oBrwSets:cargo[ 2 ][ 1 ] ) - oBrwSets:cargo[ 1 ], nPos ) )


STATIC FUNCTION PathToArray( cList )

   LOCAL aList := {}
   LOCAL cSep := hb_OSPathListSeparator()
   LOCAL cDirSep := hb_OSPathDelimiters()
   LOCAL nPos

   IF cList != NIL

      DO WHILE ( nPos := At( cSep, cList ) ) != 0
         AAdd( aList, SubStr( cList, 1, nPos - 1 ) )        // Add a new element
         cList := SubStr( cList, nPos + 1 )
      ENDDO

      AAdd( aList, cList )              // Add final element

      /* Strip ending delimiters */
      AEval( aList, { | x, i | iif( Right( x, 1 ) $ cDirSep,  aList[ i ] := Left( x, Len( x ) - 1 ), ) } )
   ENDIF

   RETURN aList


/* Check if a string starts with another string */
STATIC FUNCTION starts( cLine, cStart )
   RETURN cStart == Left( cLine, Len( cStart ) )


/* Strip path from filename */
STATIC FUNCTION strip_path( cFileName )

   LOCAL cName
   LOCAL cExt

   DEFAULT cFileName TO ""

   hb_FNameSplit( cFileName, NIL, @cName, @cExt )

   RETURN cName + cExt


FUNCTION __dbgInput( nRow, nCol, nWidth, cValue, bValid, cColor, nSize )

   LOCAL nOldCursor := SetCursor( SC_NORMAL )
   LOCAL lOK := .F.
   LOCAL nKey
   LOCAL oGet

   IF !ISNUMBER( nWidth )
      nWidth := Len( cValue )
   ENDIF
   oGet := HbDbInput():new( nRow, nCol, nWidth, cValue, cColor, nSize )
   oGet:setFocus()

   WHILE .T.
      nKey := Inkey( 0 )
      IF nKey == K_ESC
         EXIT
      ELSEIF nKey == K_ENTER
         IF bValid == NIL .OR. Eval( bValid, oGet:getValue() )
            cValue := oGet:getValue()
            lOK := .T.
            EXIT
         ENDIF
      ELSE
         oGet:applyKey( nKey )
      ENDIF
   ENDDO

   SetCursor( nOldCursor )

   RETURN lOK


FUNCTION __dbgAchoice( nTop, nLeft, nBottom, nRight, aItems, cColors )
   LOCAL oBrw
   LOCAL oCol
   LOCAL nRow
   LOCAL nKey
   LOCAL nLen

   oBrw := HBDbBrowser():New( nTop, nLeft, nBottom, nRight )
   oBrw:colorSpec := IIF( ISCHARACTER( cColors ), cColors, SetColor() )
   nLen := nRight - nLeft + 1
   nRow := 1
   oCol := HBDbColumnNew( "", {|| PadR( aItems[ nRow ], nLen ) } )
   oBrw:AddColumn( oCol )
   oBrw:goTopBlock := {|| nRow := 1 }
   oBrw:goBottomBlock := {|| nRow := Len( aItems ) }
   oBrw:skipBlock := {| n | n := IIF( n < 0, Max( n, 1 - nRow ), ;
                                             Min( Len( aItems ) - nRow, n ) ), ;
                            nRow += n, n }
   WHILE .T.
      oBrw:forceStable()
      nKey := Inkey( 0 )
      SWITCH nKey
         CASE K_UP;     oBrw:up();        EXIT
         CASE K_DOWN;   oBrw:down();      EXIT
         CASE K_PGUP;   oBrw:pageUp();    EXIT
         CASE K_PGDN;   oBrw:pageDown();  EXIT
         CASE K_HOME;   oBrw:goTop();     EXIT
         CASE K_END;    oBrw:goBottom();  EXIT
         CASE K_ESC;    nRow := 0
         CASE K_ENTER;  RETURN nRow
      ENDSWITCH
   ENDDO

   RETURN 0


FUNCTION __dbgAlert( cMessage )
   RETURN hb_gtAlert( cMessage, { "Ok" }, "W+/R", "W+/B" )


FUNCTION __dbgValToStr( uVal )

   LOCAL cType := ValType( uVal )

   DO CASE
   CASE uVal == NIL  ; RETURN "NIL"
   CASE cType == "B" ; RETURN "{ || ... }"
   CASE cType == "A" ; RETURN "{ ... }"
   CASE cType $ "CM" ; RETURN '"' + uVal + '"'
   CASE cType == "L" ; RETURN iif( uVal, ".T.", ".F." )
   CASE cType == "D" ; RETURN DToC( uVal )
   CASE cType == "N" ; RETURN RTrim( Str( uVal ) )
   CASE cType == "O" ; RETURN "Class " + uVal:ClassName() + " object"
   CASE cType == "H" ; RETURN "Hash of " + RTrim( Str( Len( uVal ) ) ) + " elements"
   CASE cType == "P" ; RETURN "Pointer"
   ENDCASE

   RETURN "U"


/* NOTE: This is a copy of hb_CStr() */

FUNCTION __dbgCStr( xVal )
   LOCAL v := ValType( xVal )

   SWITCH v
      CASE "C"
      CASE "M"
         RETURN xVal
      CASE "N"
         RETURN Str( xVal )
      CASE "D"
         RETURN iif( Empty( xVal ), "0d00000000", "0d" + DToS( xVal ) )
      CASE "L"
         RETURN iif( xVal, ".T.", ".F." )
      CASE "S"
         RETURN "@" + xVal:name + "()"
      CASE "B"
         RETURN "{|| ... }"
      CASE "O"
         RETURN "{ " + xVal:className + " Object }"
      CASE "A"
         RETURN "{ Array of " + hb_NToS( Len( xVal ) ) + " Items }"
      CASE "H"
         RETURN "{ Hash of " + hb_NToS( Len( xVal ) ) + " Items }"
      CASE "P"
         RETURN "<pointer>"
      OTHERWISE
         IF xVal == NIL
            RETURN "NIL"
         ENDIF
   ENDSWITCH

   RETURN "???:" + v
-------------- next part --------------
--- C:/RAZVOJ/HARBOUR/TEST/Debugger/debugger.prg	Fri Sep 04 11:18:59 2009
+++ C:/HRB/SVN/SRC-SVN/source/debug/debugger.prg	Fri Sep 04 11:11:09 2009
@@ -154,10 +154,6 @@
       s_oDebugger:aModules := uParam4
       s_oDebugger:aBreakPoints := uParam5
       IF lStartup
-         IF File( s_oDebugger:cSettingsFileName )
-            s_oDebugger:LoadSettings() 
-            s_oDebugger:lGo := s_oDebugger:lRunAtStartup // Once again after settings file is loaded
-         ENDIF
          IF s_oDebugger:lRunAtStartup
             __dbgSetGo( uParam1 )
             RETURN
@@ -420,6 +416,12 @@
 
    ::BuildCommandWindow()
    ::BuildBrowseStack()
+
+   IF File( ::cSettingsFileName )
+      ::LoadSettings()
+      ::lGo := ::lRunAtStartup // Once again after settings file is loaded
+   ENDIF
+
    RETURN Self
 
 METHOD OpenDebuggerWindow() CLASS HBDebugger
@@ -2744,6 +2746,10 @@
 
    LOCAL nAt
 
+   IF !::lActive
+      RETURN NIL
+   ENDIF
+
    IF nLine == NIL
       cFileName := strip_path( ::cPrgName )
       nLine := ::oBrwText:RowPos()
@@ -2770,9 +2776,9 @@
          ::oBrwText:ToggleBreakPoint( nLine, .F. )
       ENDIF
    ENDIF
-   IF ::lActive
-      ::oBrwText:RefreshCurrent():ForceStable()
-   ENDIF 
+
+   ::oBrwText:RefreshCurrent():ForceStable()
+
    RETURN NIL
 
 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: francek_prijatelj.vcf
Type: text/x-vcard
Size: 182 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090904/ae2b1a26/francek_prijatelj-0001.vcf
From harbour.01 at syenar.hu  Fri Sep  4 15:26:35 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 15:26:43 2009
Subject: [Harbour] ViaNemo: New Framework Opensource for Harbour
In-Reply-To: <008f01ca2ad6$e3c84000$ab58c000$@com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>	<25233147.post@talk.nabble.com>
	<20090901072102.GB21984@uran.home.aster.pl>
	<008f01ca2ad6$e3c84000$ab58c000$@com>
Message-ID: <1DDEE740-0C5B-41E1-9692-A91C1514B1D9@syenar.hu>

Hi Fernando,

Thanks for this initiative and for making it OSS and also offering
it as a Harbour addition.

I'm awaiting for more information, to give answers to your questions.

Brgds,
Viktor

On 2009.09.01., at 9:36, Fernando Mancera wrote:

> Dear all,
>
> I am pleased to inform that we do have a first developed functional  
> version of ViaNemo,
> our OPENSOURCE suggestion of Framework for Harbour.
>
> It has interesting features as developed  applications on Windows  
> 32bits/64bits and also Windows Mobile.
> Its adapted design will permit us in near future to pass to other  
> operating systems such as Mac OSX or Linux.
>
> Possibility to compile applications written for other GUI?s in order  
> users can reuse all applications.
> At the moment we have started with FiveWin compatibility for being  
> the most popular one.
>
> We have published this piece of news on our blog http://blog.viaopen.com
>
> We have not decided how to provide it yet, but I think that  
> according to its features,
> it would be very interesting for community to add it as Harbour- 
> project contribution.
> My questions are ?What do you think about it??; ?Would it be  
> possible to get authorization to add it??
>
> Thank you,
> Best regards
>
> Fernando Mancera
> www.viaopen.com
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Sep  4 15:30:45 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 15:30:53 2009
Subject: [Harbour] Testing HBNETIO
In-Reply-To: <20090901084544.GB21702@uran.home.aster.pl>
References: <4A9CD721.6040200@gmail.com> <25236180.post@talk.nabble.com>
	<20090901084544.GB21702@uran.home.aster.pl>
Message-ID: <FF57447D-75A5-4D02-923F-CBAA83E806C8@syenar.hu>

Hi Przemek,

>>> I've tested under Windows using BCC and MingW and got the "Cannot  
>>> start
>>> NETIO server !!!" message.  I tried adding the 2941 port to Windows
>>> firewall exception also but still the same.
>> Same is the case with me.
>> After struggling for two hours, I cannot connect, still trying why?
>> Windows XP with no firewall installed.
>
> I think that I know the reason of problem. I still forgot that in
> windows it's necessary to initialize socket library explicitly.
> Please add:
>      hb_inetInit()

Is it possible to make this automatic? It's a little bit strange
that a core API needs such platform dependent way to do the required
initialization.

[ Actually, I thought this was fixed a few weeks ago. ]

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Sep  4 15:34:39 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 15:34:47 2009
Subject: [Harbour] ViaNemo: New Framework Opensource for Harbour
In-Reply-To: <20090901090802.GA32202@uran.home.aster.pl>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
	<25233147.post@talk.nabble.com>
	<20090901072102.GB21984@uran.home.aster.pl>
	<008f01ca2ad6$e3c84000$ab58c000$@com>
	<20090901090802.GA32202@uran.home.aster.pl>
Message-ID: <4B02066D-7A8A-4B55-A5CE-670817A8FF57@syenar.hu>

Maybe I'm missing something, but is there any downloadable
code already made available?

Brgds,
Viktor

On 2009.09.01., at 11:08, Przemyslaw Czerpak wrote:

> On Tue, 01 Sep 2009, Fernando Mancera wrote:
>
> Hi Fernando,
>
>> I am pleased to inform that we do have a first developed functional  
>> version of ViaNemo,
>> our OPENSOURCE suggestion of Framework for Harbour.
>> It has interesting features as developed  applications on Windows  
>> 32bits/64bits and also Windows Mobile.
>> Its adapted design will permit us in near future to pass to other  
>> operating systems such as Mac OSX or Linux.
>> Possibility to compile applications written for other GUI?s in  
>> order users can reuse all applications.
>> At the moment we have started with FiveWin compatibility for being  
>> the most popular one.
>> We have published this piece of news on our blog http://blog.viaopen.com
>> We have not decided how to provide it yet, but I think that  
>> according to its features,
>> it would be very interesting for community to add it as Harbour- 
>> project contribution.
>> My questions are ?What do you think about it??; ?Would it be  
>> possible to get authorization to add it??
>
> Thank you very much for great contribution.
> I think that it's the answer for many user requests:
> GUI library which is compatible with FWH, works on desktop windows
> and with WinCE and can be ported to other OS-es, maybe even integrated
> with our HBQT keeping the compatibility with code created for FWH.
> I'm not windows user so I cannot make real tests myself but I hope
> windows/WinCE users will want to try it and can send their opinion  
> here.
> And of course I would like to see such library as part of Harbour SVN
> code.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Sep  4 15:50:20 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 15:50:28 2009
Subject: [Harbour] Cannot start server
In-Reply-To: <4A9D1A9F.80606@ec-red.com>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>
	<4A9D1A9F.80606@ec-red.com>
Message-ID: <9B90D410-FE85-4CC5-8ECA-D11A4349D625@syenar.hu>

> Cannot start server.
>
> I'm using this HBP
> #
> # $Id: uhttpd2.hbp 11370 2009-06-15 18:22:09Z vszakats $
> #
>
> server.prg
> -lhbnetio
> -mt
> -lhbvmmt.a

Never add any Harbour core libs to hbmk2 command lines or hbp files.

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Sep  4 16:09:36 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 16:09:44 2009
Subject: [Harbour] Shared lib issue after svn rsync
In-Reply-To: <9257026e0909010946s2d70869di293da8537ca21f73@mail.gmail.com>
References: <9257026e0909010946s2d70869di293da8537ca21f73@mail.gmail.com>
Message-ID: <D17D6F8E-75EE-411C-BC1B-FF664A8E728F@syenar.hu>

Core 'Harbour dynlib' creation has been integrated into
the make system, so such customized harbour dynlibs aren't
supported by core build process anymore.

I believe such customized Harbour dynlibs should be rolled
by those few users who require it by their own, firstly
because it breaks the separation of core/contrib areas,
secondly because 'harbour dynlib' should provide a standardized
interface and set of functionality, so that they are
interchangeable and won't cause any mess when different
copies are installed onto the same system (dll hell).

If someone needs such customized dynlib (which shouldn't
normally be called harbour.[dll] anymore), can be created
using regular tools or still provided hb-mkdyn.sh script.

BTW, technically it could be solved probably (by investing
another big amount of time), but for above reasons I
rather plan to think/work on allowing to convert any contribs
into separate .dlls. (like hbct.dll, hbct.so)

Brgds,
Viktor

On 2009.09.01., at 6:46, Lorenzo Fiorini wrote:

> I've just resync my local repo after vacation and I've found that in
> hb-func.sh the lines below are commented:
>
> #   echo "Making ${full_lib_name}..."
> #   ${hb_mkdyn} ${full_lib_name} ${LIBS} ${linker_options}
> #   if [ "${LIBS}" != "${LIBSMT}" ]; then
> #       echo "Making ${full_lib_name_mt}..."
> #       ${hb_mkdyn} ${full_lib_name_mt} ${LIBSMT} ${linker_mtoptions}
> ${linker_options}
> #   fi
>
> I've read in the Changelog that:
> ...
>  * bin/hb-func.sh
>    - Commented creation of dynamic libs. Now it's done on GNU Make
>      level.
>
> But now I can't find a way to add contrib libs to libharbour.so.
>
> Any suggestion?
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Sep  4 16:20:05 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 16:20:13 2009
Subject: [Harbour] rddsql/sddpg install problems
In-Reply-To: <alpine.GSO.2.00.0909020212120.17720@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909011704300.17720@dawn.royalcomp.hu>
	<20090901174954.GA17742@uran.home.aster.pl>
	<alpine.GSO.2.00.0909020212120.17720@dawn.royalcomp.hu>
Message-ID: <23D9469E-283D-48B6-99EF-9E0E1779DE10@syenar.hu>

>>> it seems as if INSTALL_RULE was assembled more than once, once with
>>> INSTALL_FILES set to libsddpg.a, but at the next iteration
>>> INSTALL_FILES was empty. afaict this second iteration must somehow  
>>> be
>>> happening inside instsh.mk, as it is protected to be evaluated  
>>> with an
>>> empty install_files list.
>>
>> Yes, it's a known problem caused by hack used to install header files
>> with libraries or binaries, i.e.:
>
>
> thanks, i got further with this. now it's external/libhpdf:
>
> make[3]: `../../../../../lib/sunos/sunpro/libhbxbp.a' is up to date.
> ! Installing xbp.ch on /tmp/hb/include
> ! Installing xbpdev.ch on /tmp/hb/include
> ! Installing appevent.ch on /tmp/hb/include
> ! Installing gra.ch on /tmp/hb/include
> ! Installing ../../lib/sunos/sunpro/libhbxbp.a on /tmp/hb/lib
> make[3]: `../../../../../lib/sunos/sunpro/liblibhpdf.a' is up to date.
> /bin/sh: syntax error at line 1: `;' unexpected
> make[2]: *** [install] Error 2
> make[1]: *** [libhpdf.inst] Error 2
> make: *** [external.inst] Error 2
>
> this actually has been bugging me for a while - it seems that much
> (all, perhaps) other extensions are installed so that in lib<foo>.a
> there's both the glue code object to the original library (or the
> object implementing the complete functionality) and the harbour
> bridge. in case of hpdf, what gets installed is a libhbpdf.a (which is
> the hb bridge), and a liblibhpdf.a (which is libharu itself). is that
> supposed to be so? even if so, "liblib" seems somewhat unintentional..

Yes it is. libhpdf isn't distributed with *nixes yet, at least
to my knowledge, so the locally hosted version will be used in
Harbour builds. For non-*nix platforms this is just plain
convenience for all users as this packages is naturally not available
on any known locations (nor will it ever be).

Even double lib is normal if the "official" name of a lib contains
the word "lib", otherwise there would be problems when trying to
use the same lib name (like libpng) across different platforms and
compilers f.e. in a .hbp file.

Brgds,
Viktor

From gvarona at ec-red.com  Fri Sep  4 16:23:15 2009
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Fri Sep  4 16:20:31 2009
Subject: [Harbour] Cannot start server
In-Reply-To: <9B90D410-FE85-4CC5-8ECA-D11A4349D625@syenar.hu>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>	<4A9D1A9F.80606@ec-red.com>
	<9B90D410-FE85-4CC5-8ECA-D11A4349D625@syenar.hu>
Message-ID: <4AA17733.2070002@ec-red.com>

Viktor Szak?ts escribi?:
>> Cannot start server.
>> I'm using this HBP
>> #
>> # $Id: uhttpd2.hbp 11370 2009-06-15 18:22:09Z vszakats $
>> #
>>
>> server.prg
>> -lhbnetio
>> -mt
>> -lhbvmmt.a
>
> Never add any Harbour core libs to hbmk2 command lines or hbp files.
Ok. Thanks Viktor.

Best Regards
GVS
From harbour.01 at syenar.hu  Fri Sep  4 16:22:05 2009
From: harbour.01 at syenar.hu (=?WINDOWS-1250?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 16:22:14 2009
Subject: [Harbour] Proposal for change in rules.mk
In-Reply-To: <4A9E2172.90708@siol.net>
References: <4A9E2172.90708@siol.net>
Message-ID: <38069C70-2463-45D2-9D3F-E050219D9664@syenar.hu>

CXX should be set to empty in global.mk. I'll commit this in a while.

Brgds,
Viktor

On 2009.09.02., at 9:40, FRAN?EK PRIJATELJ wrote:

> Hi
>
> Maybe I am impolite to write about same problem third time.
> Sorry in advance.
>
> When building Harbour with msvc,  .cpp files (from hbqt)  are  
> compiled with g++.
>
> Problem is CXX in rules.mk , which has default value g++
> In rules.mk , line 56:
>
> # The rule to compile a C++ source file.
> ifeq ($(CPP_RULE),)
>   ifeq ($(CXX),)
>      CXX := $(CC)
>   endif
>   CPP_RULE = $(CXX) $(CC_FLAGS) $(HB_USER_CFLAGS) $(CC_OUT)$(<F:.cpp= 
> $(OBJ_EXT)) $(CC_IN) $<
> endif
>
> Try command
> mingw32-make --print-data-base > 0.txt
>
> In o.txt line 223
> 223 # default
> 224 CXX = g++
> 225 # default
> 226 COFLAGS =
>
> Solution:
> Change CXX to some other name
>
>
> BRGS
> Fran?ek Prijatelj
>
> <francek_prijatelj.vcf>_______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Fri Sep  4 16:38:18 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep  4 16:38:24 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12377] trunk/harbour
In-Reply-To: <98486C7A-B125-4552-B9BD-1EBE823F6C35@syenar.hu>
References: <E1Mi7DR-0007Sw-Fz@74yxhf1.ch3.sourceforge.com>
	<98486C7A-B125-4552-B9BD-1EBE823F6C35@syenar.hu>
Message-ID: <20090904203818.GA5396@uran.home.aster.pl>

On Fri, 04 Sep 2009, Szak?ts Viktor wrote:

Hi,

> May I change HB_*_TCP to HB_*_WATT? Could be I'm not overseeing the
> whole matter yet, but these names should reflect the exact component
> detected, not just an area of functionality.

Yes, sure.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Sep  4 16:40:18 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep  4 16:40:25 2009
Subject: [Harbour] Testing HBNETIO
In-Reply-To: <FF57447D-75A5-4D02-923F-CBAA83E806C8@syenar.hu>
References: <4A9CD721.6040200@gmail.com> <25236180.post@talk.nabble.com>
	<20090901084544.GB21702@uran.home.aster.pl>
	<FF57447D-75A5-4D02-923F-CBAA83E806C8@syenar.hu>
Message-ID: <20090904204018.GB5396@uran.home.aster.pl>

On Fri, 04 Sep 2009, Szak?ts Viktor wrote:

Hi,

>> Please add:
>>      hb_inetInit()
> Is it possible to make this automatic? It's a little bit strange
> that a core API needs such platform dependent way to do the required
> initialization.
>
> [ Actually, I thought this was fixed a few weeks ago. ]

It was but only for hb_inet*() functions.
I'll add automatic initialization for hb_socket*() functions too.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Sep  4 16:42:06 2009
From: harbour.01 at syenar.hu (=?WINDOWS-1250?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 16:42:16 2009
Subject: [Harbour] Error in makefile
In-Reply-To: <4A9E1C88.6050505@siol.net>
References: <4A9E1C88.6050505@siol.net>
Message-ID: <91B9F213-6728-47CF-80AF-31F17A8411E2@syenar.hu>

Hi Francek,

Could be that I'm missing something, but can't replicate.

Maybe if you have a snippet of the output showing the
problem, it would help.

Brgds,
Viktor

On 2009.09.02., at 9:19, FRAN?EK PRIJATELJ wrote:

> Hi Victor
>
> There is infinite recursion in makefile(s)
>
> Try win-make --print-data-base
>
> BRGS
> <francek_prijatelj.vcf>_______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From fmancera at viaopen.com  Fri Sep  4 16:47:03 2009
From: fmancera at viaopen.com (Fernando Mancera)
Date: Fri Sep  4 16:46:32 2009
Subject: [Harbour] ViaNemo: New Framework Opensource for Harbour
In-Reply-To: <4B02066D-7A8A-4B55-A5CE-670817A8FF57@syenar.hu>
References: <E1MiFnq-00085E-JY@d5vjzd1.ch3.sourceforge.com>	<25233147.post@talk.nabble.com>	<20090901072102.GB21984@uran.home.aster.pl>	<008f01ca2ad6$e3c84000$ab58c000$@com>	<20090901090802.GA32202@uran.home.aster.pl>
	<4B02066D-7A8A-4B55-A5CE-670817A8FF57@syenar.hu>
Message-ID: <000b01ca2da0$df0e3cf0$9d2ab6d0$@com>

Hello Vikthor,

Thank You very much for your words.

>>Maybe I'm missing something, but is there any downloadable
>>code already made available?

At the moment no.
I decided to add ViaNemo how contribution to Harbour-Project. I will publish
more news :-)

Best Regards,

Fernando 

Brgds,
Viktor

On 2009.09.01., at 11:08, Przemyslaw Czerpak wrote:

> On Tue, 01 Sep 2009, Fernando Mancera wrote:
>
> Hi Fernando,
>
>> I am pleased to inform that we do have a first developed functional  
>> version of ViaNemo,
>> our OPENSOURCE suggestion of Framework for Harbour.
>> It has interesting features as developed  applications on Windows  
>> 32bits/64bits and also Windows Mobile.
>> Its adapted design will permit us in near future to pass to other  
>> operating systems such as Mac OSX or Linux.
>> Possibility to compile applications written for other GUI?s in  
>> order users can reuse all applications.
>> At the moment we have started with FiveWin compatibility for being  
>> the most popular one.
>> We have published this piece of news on our blog http://blog.viaopen.com
>> We have not decided how to provide it yet, but I think that  
>> according to its features,
>> it would be very interesting for community to add it as Harbour- 
>> project contribution.
>> My questions are ?What do you think about it??; ?Would it be  
>> possible to get authorization to add it??
>
> Thank you very much for great contribution.
> I think that it's the answer for many user requests:
> GUI library which is compatible with FWH, works on desktop windows
> and with WinCE and can be ported to other OS-es, maybe even integrated
> with our HBQT keeping the compatibility with code created for FWH.
> I'm not windows user so I cannot make real tests myself but I hope
> windows/WinCE users will want to try it and can send their opinion  
> here.
> And of course I would like to see such library as part of Harbour SVN
> code.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From ranier at cultura.com.br  Fri Sep  4 16:37:37 2009
From: ranier at cultura.com.br (Ranier Vilela)
Date: Fri Sep  4 16:47:41 2009
Subject: [Harbour] New harbour make world
Message-ID: <4AA17A91.4000409@cultura.com.br>

Hi Viktor,
First of all, thanks for your great work!!

I?m really impressed.

Today I?ve been recompiled all harbour-cvs and was simple.
Batch used:

ECHO OFF
SET HB_USER_PRGFLAGS=-l -gc0
SET HB_USER_CFLAGS=-Wall -O2xtyb1 -Gy -GS- -GR- -DNDEBUG 
-DHB_FM_STATISTICS_OFF -D_CRT_SECURE_NO_DEPRECATE -D_SCL_SECURE_NO_DEPRECATE
SET HB_VM_ALL=yes
SET HB_BUILD_OPTIM=yes
SET HB_BUILD_DLL=no
call mingw32-make > log.txt 2>&1

Anyone have more hit to better compilation?

Best regards,

Ranier Vilela
From harbour.01 at syenar.hu  Fri Sep  4 16:50:42 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 16:50:51 2009
Subject: [Harbour] make and OS/2, to Viktor
In-Reply-To: <KPCDL1$4A15F493C20A4522A8E8933C6528A4A4@libero.it>
References: <KPCDL1$4A15F493C20A4522A8E8933C6528A4A4@libero.it>
Message-ID: <823D6A1B-FE51-4318-BEA4-6F51D2F0A503@syenar.hu>

Hi Maurilio,

Thanks for the efforts and info, pls tell if there is
anything we can commit to step ahead.

Brgds,
Viktor

On 2009.09.02., at 1:36, maurilio longo wrote:

> Viktor,
>
> sorry to bother you; this is just to let you know that I've found a  
> work around using find and xargs and/or find and echo to the problem  
> I'm having with OS/2 cmd.exe line length limit.
>
> I'm also talking with the latest porter to see if he can find a way  
> around this problem in gnu make.
>
> As soon as he gives me an answer (I have found out that there is a  
> make 2.79.a2 version which is able to handle current makefiles even  
> if it has other problems; but we don't know _how_ it is able to do  
> this) I'll let you know so that we can decide whether to use the  
> find hack or not (btw, the find hack comes from that page about  
> ARG_MAX whose link you posted a few days ago).
>
> Best regards.
>
> Maurilio.
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From carozodequilmes at gmail.com  Fri Sep  4 17:37:21 2009
From: carozodequilmes at gmail.com (CarozoDeQuilmes)
Date: Fri Sep  4 17:37:27 2009
Subject: [Harbour] HbQt Static and Dynamic
In-Reply-To: <9E1089C7-DCD8-474D-9F1F-4138086EB139@syenar.hu>
References: <578c73340908310700we64c422ga27639405bc97e77@mail.gmail.com>
	<9E1089C7-DCD8-474D-9F1F-4138086EB139@syenar.hu>
Message-ID: <578c73340909041437h3350ba1dy258f1b96f125712b@mail.gmail.com>

Many thanks in advance !!!!!

CdQ

On Fri, Sep 4, 2009 at 3:23 PM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:

> I'll change current method to enable static build also,
> rather than switching to it.
>
> The switch (when enabled) will cause a significantly longer
> build process.
>
> Brgds,
> Viktor
>
>
> On 2009.08.31., at 4:00, CarozoDeQuilmes wrote:
>
>  Hi Viktor / Pritpal
>>
>> I use Dynamic HbQt Library and Static HbQt Library in my project with
>> great success, but I need make HbQt Static library and HbQt Dynamic library
>> simultaneously, because I need test any change in HbQt source in both cases
>>
>> I ask: Is possible add some environment var (like HB_QT_STATIC) with
>> default "NO" that make both libaries (instead of just only one library) ???
>>
>> Thanks in advance
>> CdQ
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
QAC (I want something comfortable !!!) - Incremental Compilation with all
MiniGUIs versions
QAC (Quiero Algo C?modo !!!) - Compilaci?n Incremental con todas las
versiones de MiniGUI

Download: www.CarozoDeQuilmes.com.ar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090904/1518519e/attachment.html
From harbour.01 at syenar.hu  Fri Sep  4 17:50:23 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 17:50:32 2009
Subject: [Harbour] msvc error
In-Reply-To: <1251910150967-3567969.post@n2.nabble.com>
References: <1251910150967-3567969.post@n2.nabble.com>
Message-ID: <8379E4C5-CC46-457F-B055-47DE8E23E964@syenar.hu>

Pls sort out your compiler setup to include only one version of MSVC  
compiler.

See the first prerequisite of win builds in INSTALL, also  
TROUBLESHOOTING section.

Brgds,
Viktor

On 2009.09.02., at 6:49, AbeB wrote:

>
> ! Building Harbour 2.0.0beta2 from source - http://www.harbour-project.org
> ! MAKE: win-make.exe 3.81 sh.exe
> ! HB_INSTALL_PREFIX: c:\Harbour\Dev
> ! HB_HOST_PLAT: win (x86)  HB_SHELL: nt
> ! HB_PLATFORM: win (x86) (autodetected)
> ! HB_COMPILER: msvc (autodetected: c:/Program Files/Microsoft Visual  
> Studio
> 9.0/VC/BIN/cl.exe C:/Program Files/Microsoft Visual Studio/VC98/bin/)
> ! Component: 'openssl' not found
> ! Component: 'gpm' not supported on win platform
> ! Component: 'slang' not found
> ! Component: 'curses' not found
> ! Component: 'x11' not found
> ! Component: 'WATTCP/WATT-32' not supported on win platform
> win-make.exe[2]: Nothing to be done for `all'.
> win-make.exe[1]: Nothing to be done for `all'.
> cl.exe  -nologo -I. -I../../../../../include -Gs -TP -W4 -wd4127 - 
> Ot2b1
> -EHs-c- -MT    -Fohbver.obj -c ../../../hbver.c
> hbver.c
> ../../../hbver.c(308) : error C2039: 'wProductType' : is not a  
> member of
> '_OSVERSIONINFOEXA'
>        C:\Program Files\Microsoft Visual
> Studio\VC98\include\winbase.h(7998) : see declaration of  
> '_OSVERSIONINFOEXA'
> ../../../hbver.c(308) : error C2065: 'VER_NT_WORKSTATION' : undeclared
> identifier
> ../../../hbver.c(315) : error C2039: 'wProductType' : is not a  
> member of
> '_OSVERSIONINFOEXA'
>        C:\Program Files\Microsoft Visual
> Studio\VC98\include\winbase.h(7998) : see declaration of  
> '_OSVERSIONINFOEXA'
> ../../../hbver.c(315) : error C2065: 'VER_NT_WORKSTATION' : undeclared
> identifier
> win-make.exe[3]: *** [hbver.obj] Error 2
> win-make.exe[2]: *** [descend] Error 2
> win-make.exe[1]: *** [common] Error 2
> win-make.exe: *** [source] Error 2
> -- 
> View this message in context: http://n2.nabble.com/msvc-error-tp3567969p3567969.html
> Sent from the harbour-devel mailing list archive at Nabble.com.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Sep  4 18:15:29 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 18:15:39 2009
Subject: [Harbour] Re: SF.net SVN: harbour-project:[12395] trunk/harbour
In-Reply-To: <E1Mitbk-0006W4-3G@d5vjzd1.ch3.sourceforge.com>
References: <E1Mitbk-0006W4-3G@d5vjzd1.ch3.sourceforge.com>
Message-ID: <4AA9A1A3-8FBC-4DDD-8B4C-E335F5A3137F@syenar.hu>

> Log Message:
> -----------
> 2009-09-02 19:26 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/common/hbver.c
>    ! added additional hack for conditional code used for Windows  
> detection
>      to work with VC98.
>      Viktor please verify it but this condition:
>         ( !defined( _MSC_VER ) || _MSC_VER >= 1400 )
>      was not enough.

In passed to the list example I guess it was faulty local
compiler configuration mixing new (MSVC 2008) C compiler
binaries with old (VC98, whichever version this is) C compiler
headers. If this is so, above fix is unnecessary and/or wrong.

Properly configuring C compiler is the most important (and
only) step before doing a Harbour build, and some users are
still missing it. This topic is fairly well documented in
INSTALL.

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Sep  4 18:25:56 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 18:26:05 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4A9FDE88.4040205@mweb.co.za>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<4A9FC9BF.2080501@mweb.co.za>	<4A9FCE7F.6000507@dbtopas.lt>	<4A9FD7F2.1090601@mweb.co.za>
	<4A9FDB2E.8030200@dbtopas.lt> <4A9FDE88.4040205@mweb.co.za>
Message-ID: <89C5B072-B48A-45FA-8675-0B2B39BA035B@syenar.hu>

> I'm a bit out of my depth here, for me it's kind of "monkey see,  
> monkey do".
>
>> Do you have any simple MSCAL test code, I can compile/modify test?  
>> Plain Harbour code would be the best!!
>
> I'm sorry no, I have used HWGUI. I don't really know how to make an  
> example in plain Harbour, or I would. The code in this thread was  
> about as basic as I could get it.

IMO sorting out HWGUI from the equation would be essential here.

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Sep  4 18:28:08 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 18:28:18 2009
Subject: [Harbour] Syntax of DllCall () - Harbour vs Xbase++
In-Reply-To: <001a01ca2d40$86944020$93bcc060$@com>
References: <25285674.post@talk.nabble.com>
	<001a01ca2d40$86944020$93bcc060$@com>
Message-ID: <D07B9F32-0154-4A9D-957F-DB975581FD76@syenar.hu>

No. The heart of this functionality is still non-portable code
which came from xhb, and which only works on x86 CPUs.

Brgds,
Viktor

On 2009.09.04., at 11:17, Fernando Mancera wrote:

> Hi,
>
>> Here is the DllCall() usage in Xbase++:
>>  #define SW_HIDE             0
>>  #define SW_NORMAL           1
>>  #define SW_SHOWMINIMIZED    2
>>  #define SW_SHOWMAXIMIZED    3
>>  #define SW_MAXIMIZE         3
>>  #define SW_SHOWNOACTIVATE   4
>>  #define SW_SHOW             5
>>  #define SW_MINIMIZE         6
>>  #define SW_SHOWMINNOACTIVE  7
>>  #define SW_SHOWNA           8
>>  #define SW_RESTORE          9
>>  #define SW_SHOWDEFAULT      10
>
>>  #define SE_ERR_NOASSOC      31
>
>>  lSuccess := DllCall( "SHELL32.DLL"  , DLL_STDCALL, ;
>>           "ShellExecuteA", AppDesktop():GetHWND(), "open", cPath 
>> +cFile,;
>>           NIL, CurDir(), SW_NORMAL )
>
>> Do we have this usage in Harbour or not.
>> If we have, what are the parameters to call it.
>
> About this, is available in 64bits ??
>
> Regards,
>
> Fernando Mancera
> http://blog.viaopen.com
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Sep  4 18:36:56 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 18:37:04 2009
Subject: [Harbour] New harbour make world
In-Reply-To: <4AA17A91.4000409@cultura.com.br>
References: <4AA17A91.4000409@cultura.com.br>
Message-ID: <2E2F15A2-D0AE-463A-A488-2E23B653444B@syenar.hu>

Hi Ranier,

On 2009.09.04., at 10:37, Ranier Vilela wrote:

> Hi Viktor,
> First of all, thanks for your great work!!
>
> I?m really impressed.
>
> Today I?ve been recompiled all harbour-cvs and was simple.
> Batch used:
>
> ECHO OFF
> SET HB_USER_PRGFLAGS=-l -gc0

You can drop -l as it's the default. You can also drop -gc0
unless you _do_ mean to force -gc0 on hbrtl and hbrdd, where -gc3
is the default for speed.

> SET HB_USER_CFLAGS=-Wall -O2xtyb1 -Gy -GS- -GR- -DNDEBUG - 
> DHB_FM_STATISTICS_OFF -D_CRT_SECURE_NO_DEPRECATE - 
> D_SCL_SECURE_NO_DEPRECATE

I'd recommend not using above settings. Some of them
are defaults (HB_FM_STATISTICS_OFF), some others may
collide with Harbour defined switches. You may keep
these two: -D_CRT_SECURE_NO_DEPRECATE -D_SCL_SECURE_NO_DEPRECATE
if you're bothered by the two extra warnings this will
suppress (but I think only the first will make any difference
in Harbour).

> SET HB_VM_ALL=yes

Default and non-official setting, so not needed.

> SET HB_BUILD_OPTIM=yes

Default, not needed.

> SET HB_BUILD_DLL=no
> call mingw32-make > log.txt 2>&1

Ok.

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Sep  4 19:46:12 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 19:46:20 2009
Subject: [Harbour] building httpadv.prg in tip tests using ssl support
In-Reply-To: <4A9B7525.7080107@fsgiudice.com>
References: <4A982D64.60003@fsgiudice.com>
	<2A3F70D4-ECBF-4B14-B7DA-DFE3B5EBC75B@syenar.hu>
	<4A9B7525.7080107@fsgiudice.com>
Message-ID: <0934C78D-E86A-461F-BC27-3A62B84844CF@syenar.hu>

Hi Francesco,

These things are already in SVN since then.

Brgds,
Viktor

On 2009.08.31., at 9:00, Francesco Saverio Giudice wrote:

> Hi Viktor,
>
> Il 29/08/2009 1.30, Viktor Szak?ts ha scritto:
>> In a recent ChangeLog I've linked an OpenSSL binary package for
>> Windows, you can also find it from openssl.org (they're finally
>> offering such thing).
>> Personally I used to build OpenSSL from source in static mode,
>> so I don't have any experience first hand about above pkg, but
>> it has mingw libs too, and static and dyn versions for msvc.
>> There is also usual chaos regarding lib names. The ones currently
>> included in hbssl.hbc are the default static lib names generated
>> if you build OpenSSL from source (speaking about Windows now).
>> If you use other bin pkgs, or dll implib version, you'll have to
>> adjust these names. For dll versions, probably even some macros
>> need to be defined when you build hbssl, I didn't explore this
>> yet, the name of the macro is OPENSSL_OPT_WINDLL.
>> Probably we should have a HB_OPENSSL_STATIC flag for hbssl lib
>> to control that and also lib name to some extent. The .dll
>> method could be setup pretty much universally. The implibs
>> are already generated in HB_BUILD_IMPLIB mode.
>> Please feel free to experiment. Maybe I'll make some steps
>> into above directions.
>
> Ok, I will try, thank you.
>
> Best Regards,
> Francesco
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vszakats at users.sourceforge.net  Fri Sep  4 20:23:52 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri Sep  4 20:24:01 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12402] trunk/harbour
Message-ID: <E1Mjj4K-0000F6-OM@bj8yhf1.ch3.sourceforge.com>

Revision: 12402
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12402&view=rev
Author:   vszakats
Date:     2009-09-05 00:23:51 +0000 (Sat, 05 Sep 2009)

Log Message:
-----------
2009-09-05 02:22 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    + Added experimental support for @.clp files.
      A bit hacky and could be incomplete. I'm not a .clp file user,
      so pls test and extend.

  * INSTALL
  * contrib/gtalleg/Makefile
  + contrib/gtalleg/gtallegs
  + contrib/gtalleg/gtallegs/Makefile
  * contrib/gtalleg/gtalleg.hbc
  + contrib/gtalleg/gtallegs.hbc
    + Added static flavour of gtalleg. This was an option until now,
      now both versions are automatically built to be in sync with
      rest of contribs. This also means that HB_ALLEGRO_STATIC
      setting is no longer needed.
    + Added separate static/dynamic .hbc files accordingly.

  * contrib/hbqt/Makefile
  + contrib/hbqt/hbqts
  + contrib/hbqt/hbqts/Makefile
  * contrib/hbqt/hbqt.hbc
  + contrib/hbqt/hbqts.hbc
    + HB_QT_STATIC=yes setting will now cause building of static
      flavor hbqt lib *above* the default one which links against
      dynamic qt libs. Until now this setting caused that the
      static version was built *instead* of the dynamic one.
      NOTE: Using this setting will cause a significantly longer
            build time on non-*nix systems.
    + Added separate static/dynamic .hbc files accordingly.

  * config/global.mk
    ! Fixed to set CXX predefined variable to empty to make
      defaulting logic in rules.mk work as expected.
      This fixes recent hbqt build failure with MSVC.

  * config/dos/watcom.mk
    + Added watt lib support. (untested, please test)

  * source/rtl/Makefile
  * source/rtl/hbsocket.c
  * config/detect.mk
  * config/dos/djgpp.mk
    * Renamed HB_*_TCP to HB_*_WATT.
    + Added HB_INC_WATT to INSTALL. (couldn't make it work locally,
      so it's not very precise yet)

  * config/detect.mk
    * Minor: lowercased component name for watt lib.

  * config/dos/djgpp.mk
    * Minor: Using LIBPATHS to store watt lib path instead of LDLIBS.

  * config/install.mk
    % Deleted no longer used/needed HB_INSTALL_DEF variable.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/config/detect.mk
    trunk/harbour/config/dos/djgpp.mk
    trunk/harbour/config/dos/watcom.mk
    trunk/harbour/config/global.mk
    trunk/harbour/config/install.mk
    trunk/harbour/contrib/gtalleg/Makefile
    trunk/harbour/contrib/gtalleg/gtalleg.hbc
    trunk/harbour/contrib/hbqt/Makefile
    trunk/harbour/contrib/hbqt/hbqt.hbc
    trunk/harbour/source/rtl/Makefile
    trunk/harbour/source/rtl/hbsocket.c
    trunk/harbour/utils/hbmk2/hbmk2.prg

Added Paths:
-----------
    trunk/harbour/contrib/gtalleg/gtallegs/
    trunk/harbour/contrib/gtalleg/gtallegs/Makefile
    trunk/harbour/contrib/gtalleg/gtallegs.hbc
    trunk/harbour/contrib/hbqt/hbqts/
    trunk/harbour/contrib/hbqt/hbqts/Makefile
    trunk/harbour/contrib/hbqt/hbqts.hbc


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Fri Sep  4 21:13:47 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 21:13:58 2009
Subject: [Harbour] another msvc error
In-Reply-To: <1251922847669-3569248.post@n2.nabble.com>
References: <1251922847669-3569248.post@n2.nabble.com>
Message-ID: <F5A4AAE4-0B70-4798-84FA-9549A80BECFA@syenar.hu>

While this is probably a very uncommon setup (and by local accident),
it shows that the guards we're using could be fixed to check real
SDK version rather than MSVC compiler version (since, generally speaking
any MSVC compiler can be combined with any Windows SDKs).

We could check WINVER. or _WIN32_WINNT. or to see the whole mess:

http://blogs.msdn.com/oldnewthing/archive/2007/04/11/2079137.aspx

Brgds,
Viktor

On 2009.09.02., at 10:20, AbeB wrote:

>
> ! Building Harbour 2.0.0beta2 from source - http://www.harbour-project.org
> ! MAKE: win-make.exe 3.81 sh.exe
> ! HB_INSTALL_PREFIX: c:\Harbour\Dev
> ! HB_HOST_PLAT: win (x86)  HB_SHELL: nt
> ! HB_PLATFORM: win (x86) (autodetected)
> ! HB_COMPILER: msvc (autodetected: c:/Program Files/Microsoft Visual  
> Studio
> 9.0/VC/BIN/cl.exe C:/Program Files/Microsoft Visual Studio/VC98/bin/)
> ! Component: 'openssl' not found
> ! Component: 'gpm' not supported on win platform
> ! Component: 'slang' not found
> ! Component: 'curses' not found
> ! Component: 'x11' not found
> ! Component: 'WATTCP/WATT-32' not supported on win platform
> win-make.exe[2]: Nothing to be done for `all'.
> win-make.exe[1]: Nothing to be done for `all'.
> win-make.exe[3]: `../../../../../lib/win/msvc/hbcommon.lib' is up to  
> date.
> win-make.exe[3]: `../../../../../lib/win/msvc/hbnortl.lib' is up to  
> date.
> win-make.exe[3]: `../../../../../lib/win/msvc/hbpp.lib' is up to date.
> win-make.exe[3]: `../../../../../lib/win/msvc/hbcplr.lib' is up to  
> date.
> win-make.exe[3]: `../../../../../bin/win/msvc/harbour.exe' is up to  
> date.
> win-make.exe[3]: `../../../../../lib/win/msvc/hbrtl.lib' is up to  
> date.
> win-make.exe[4]: `../../../../../../lib/win/msvc/gtcgi.lib' is up to  
> date.
> ! 'gtcrs' library skipped
> ! 'gtdos' library skipped
> win-make.exe[4]: `../../../../../../lib/win/msvc/gtgui.lib' is up to  
> date.
> ! 'gtos2' library skipped
> win-make.exe[4]: `../../../../../../lib/win/msvc/gtpca.lib' is up to  
> date.
> ! 'gtsln' library skipped
> win-make.exe[4]: `../../../../../../lib/win/msvc/gtstd.lib' is up to  
> date.
> ! 'gttrm' library skipped
> win-make.exe[4]: `../../../../../../lib/win/msvc/gtwin.lib' is up to  
> date.
> cl.exe  -nologo -I. -I../../../../../../include -Gs -TP -W4 -wd4127 - 
> Ot2b1
> -EHs-c- -MT    -Fogtwvt.obj -c ../../../gtwvt.c
> gtwvt.c
> ../../../gtwvt.c(745) : error C3861: 'SetWindowLongPtr': identifier  
> not
> found
> ../../../gtwvt.c(1700) : error C3861: 'SetWindowLongPtr': identifier  
> not
> found
> ../../../gtwvt.c(1855) : error C2065: 'WS_EX_LAYERED' : undeclared
> identifier
> ../../../gtwvt.c(1855) : error C3861: 'SetWindowLongPtr': identifier  
> not
> found
> ../../../gtwvt.c(1855) : error C3861: 'GetWindowLongPtr': identifier  
> not
> found
> ../../../gtwvt.c(1861) : error C2065: 'LWA_ALPHA' : undeclared  
> identifier
> ../../../gtwvt.c(2545) : error C3861: 'SetWindowLongPtr': identifier  
> not
> found
> win-make.exe[4]: *** [gtwvt.obj] Error 2
> win-make.exe[3]: *** [descend] Error 2
> win-make.exe[2]: *** [gtwvt] Error 2
> win-make.exe[1]: *** [rtl] Error 2
> win-make.exe: *** [source] Error 2
> -- 
> View this message in context: http://n2.nabble.com/another-msvc-error-tp3569248p3569248.html
> Sent from the harbour-devel mailing list archive at Nabble.com.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Sep  4 21:19:46 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep  4 21:19:54 2009
Subject: [Harbour] Re: SF.net SVN: harbour-project:[12395] trunk/harbour
In-Reply-To: <E1Mitbk-0006W4-3G@d5vjzd1.ch3.sourceforge.com>
References: <E1Mitbk-0006W4-3G@d5vjzd1.ch3.sourceforge.com>
Message-ID: <4C7B8FCD-C93A-4BBF-89D1-12F008D87FBC@syenar.hu>

Seems okay although probably the VER_NT_WORKSTATION check is
enough and MSC_VER check can be dropped. It'd be also better
to use some official macro to find out the required WSDK
version.

Brgds,
Viktor

On 2009.09.02., at 7:26, druzus@users.sourceforge.net wrote:

> Revision: 12395
>          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12395&view=rev
> Author:   druzus
> Date:     2009-09-02 17:26:55 +0000 (Wed, 02 Sep 2009)
>
> Log Message:
> -----------
> 2009-09-02 19:26 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/common/hbver.c
>    ! added additional hack for conditional code used for Windows  
> detection
>      to work with VC98.
>      Viktor please verify it but this condition:
>         ( !defined( _MSC_VER ) || _MSC_VER >= 1400 )
>      was not enough.
>
> Modified Paths:
> --------------
>    trunk/harbour/ChangeLog
>    trunk/harbour/source/common/hbver.c
>
> Modified: trunk/harbour/ChangeLog
> ===================================================================
> --- trunk/harbour/ChangeLog	2009-09-02 15:10:43 UTC (rev 12394)
> +++ trunk/harbour/ChangeLog	2009-09-02 17:26:55 UTC (rev 12395)
> @@ -17,6 +17,14 @@
>    past entries belonging to author(s): Viktor Szakats.
> */
>
> +2009-09-02 19:26 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> +  * harbour/source/common/hbver.c
> +    ! added additional hack for conditional code used for Windows  
> detection
> +      to work with VC98.
> +      Viktor please verify it but this condition:
> +         ( !defined( _MSC_VER ) || _MSC_VER >= 1400 )
> +      was not enough.
> +
> 2009-09-02 17:10 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/contrib/hbnetio/netio.h
>     * added small description
>
> Modified: trunk/harbour/source/common/hbver.c
> ===================================================================
> --- trunk/harbour/source/common/hbver.c	2009-09-02 15:10:43 UTC (rev  
> 12394)
> +++ trunk/harbour/source/common/hbver.c	2009-09-02 17:26:55 UTC (rev  
> 12395)
> @@ -296,7 +296,9 @@
>
>                if( osVer.dwMajorVersion == 6 )
>                {
> -#if !defined( HB_OS_WIN_CE ) && !defined( __DMC__ ) && ( ! 
> defined( _MSC_VER ) || _MSC_VER >= 1400 )
> +#if !defined( HB_OS_WIN_CE ) && !defined( __DMC__ ) && \
> +    ( !defined( _MSC_VER ) || _MSC_VER >= 1400 ) && \
> +    defined( VER_NT_WORKSTATION )
>                   OSVERSIONINFOEXA osVerEx;
>
>                   osVerEx.dwOSVersionInfoSize = sizeof( osVerEx );
>
>
> This was sent by the SourceForge.net collaborative development  
> platform, the world's largest Open Source development site.

From vszakats at users.sourceforge.net  Fri Sep  4 21:38:52 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri Sep  4 21:38:58 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12403] trunk/harbour
Message-ID: <E1MjkEu-0003Gw-Rn@74yxhf1.ch3.sourceforge.com>

Revision: 12403
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12403&view=rev
Author:   vszakats
Date:     2009-09-05 01:38:51 +0000 (Sat, 05 Sep 2009)

Log Message:
-----------
2009-09-05 03:37 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/global.mk
    ! Fixed svnversion command call to work with older svn versions.
      Thanks to Tamas Tevesz.

  * contrib/hbfbird/firebird.c
    ! Fixed all remaining 64-bit compiler warnings. (msvc64, mingw64)

  + contrib/hbnetio/hbnetio.hbc
  - contrib/hbnetio/tests/netiotst.hbp
  + contrib/hbnetio/tests/hbmk.hbm
    + Added .hbc file.
    * Changed .prg specific .hbp file to generic autoprocessed .hbm file,
      referring to .hbc file. This way it's in sync with rest of contribs
      and makes it possible to add new tests in a lighter way)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/global.mk
    trunk/harbour/contrib/hbfbird/firebird.c

Added Paths:
-----------
    trunk/harbour/contrib/hbnetio/hbnetio.hbc
    trunk/harbour/contrib/hbnetio/tests/hbmk.hbm

Removed Paths:
-------------
    trunk/harbour/contrib/hbnetio/tests/netiotst.hbp


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From fmancera at viaopen.com  Sat Sep  5 03:16:57 2009
From: fmancera at viaopen.com (Fernando Mancera)
Date: Sat Sep  5 03:16:21 2009
Subject: [Harbour] Syntax of DllCall () - Harbour vs Xbase++
In-Reply-To: <D07B9F32-0154-4A9D-957F-DB975581FD76@syenar.hu>
References: <25285674.post@talk.nabble.com>	<001a01ca2d40$86944020$93bcc060$@com>
	<D07B9F32-0154-4A9D-957F-DB975581FD76@syenar.hu>
Message-ID: <000d01ca2df8$dbccc590$936650b0$@com>

Hello Vikthor,

>>No. The heart of this functionality is still non-portable code
>>which came from xhb, and which only works on x86 CPUs.

we can export to 64bits ??

Best Regards,

Fernando


From harbour.01 at syenar.hu  Sat Sep  5 03:27:25 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Sep  5 03:27:36 2009
Subject: [Harbour] Syntax of DllCall () - Harbour vs Xbase++
In-Reply-To: <000d01ca2df8$dbccc590$936650b0$@com>
References: <25285674.post@talk.nabble.com>	<001a01ca2d40$86944020$93bcc060$@com>
	<D07B9F32-0154-4A9D-957F-DB975581FD76@syenar.hu>
	<000d01ca2df8$dbccc590$936650b0$@com>
Message-ID: <F1997934-D645-49BD-89D9-9F4A64CCF81E@syenar.hu>

Hi Fernando,

> Hello Vikthor,
>
>>> No. The heart of this functionality is still non-portable code
>>> which came from xhb, and which only works on x86 CPUs.
>
> we can export to 64bits ??

Przemek had an idea to extend this for all CPUs (f.e. also ARM),
but it needs to be implemented by someone interested enough (and
naturally who understands the topic in and out :).

Brgds,
Viktor

From Istvan.Bisz at t-online.hu  Sat Sep  5 04:24:05 2009
From: Istvan.Bisz at t-online.hu (=?iso-8859-1?Q?Bisz_Istv=E1n?=)
Date: Sat Sep  5 04:24:18 2009
Subject: [Harbour] demoxbp segfault in Fedora 11
In-Reply-To: <001801ca2d81$5641e2b0$02c5a810$@Bisz@t-online.hu>
References: <9257026e0909032316h2488ffb1w29db3dad85dcb246@mail.gmail.com>
	<001801ca2d81$5641e2b0$02c5a810$@Bisz@t-online.hu>
Message-ID: <001e01ca2e02$3b8d2ac0$b2a78040$@Bisz@t-online.hu>

Hi,

Sorry I should correct me, the error mentioned by Lorenzo appears just in
the case when demoxbp is linked statically, the dynamic version works.

...
==20686== Memcheck, a memory error detector.
==20686== Copyright (C) 2002-2008, and GNU GPL'd, by Julian Seward et al.
==20686== Using LibVEX rev 1884, a library for dynamic binary translation.
==20686== Copyright (C) 2004-2008, and GNU GPL'd, by OpenWorks LLP.
==20686== Using valgrind-3.4.1, a dynamic binary instrumentation framework.
==20686== Copyright (C) 2000-2008, and GNU GPL'd, by Julian Seward et al.
==20686== For more details, rerun with: -v
==20686== 
==20686== Invalid read of size 1
==20686==    at 0x4007668: strlen (mc_replace_strmem.c:242)
==20686==    by 0xAF604E: XSetCommand (in /usr/lib/libX11.so.6.2.0)
==20686==    by 0xAFAAA0: XSetWMProperties (in /usr/lib/libX11.so.6.2.0)
==20686==    by 0x30B9127: QWidgetPrivate::create_sys(unsigned long, bool,
bool) (in /usr/lib/libQtGui.so.4.5.2)
==20686==    by 0x307C6AF: QWidget::create(unsigned long, bool, bool) (in
/usr/lib/libQtGui.so.4.5.2)
==20686==    by 0x30787E5: QWidgetPrivate::createWinId(unsigned long) (in
/usr/lib/libQtGui.so.4.5.2)
==20686==    by 0x307C0A7: QWidgetPrivate::setWindowTitle_helper(QString
const&) (in /usr/lib/libQtGui.so.4.5.2)
==20686==    by 0x307C4E1: QWidget::setWindowTitle(QString const&) (in
/usr/lib/libQtGui.so.4.5.2)
==20686==    by 0x80C55D0: HB_FUN_QT_QWIDGET_SETWINDOWTITLE (in
/home/Istvan/Download/harbour/contrib/hbxbp/tests/demoxbp)
==20686==    by 0x811247E: hb_vmProc (in
/home/Istvan/Download/harbour/contrib/hbxbp/tests/demoxbp)
==20686==    by 0x80E11B4: hb_vmExecute (in
/home/Istvan/Download/harbour/contrib/hbxbp/tests/demoxbp)
==20686==    by 0x811547E: hb_vmDoBlock (in
/home/Istvan/Download/harbour/contrib/hbxbp/tests/demoxbp)
==20686==  Address 0x1 is not stack'd, malloc'd or (recently) free'd
==20686==
...
Unrecoverable error 6005:
...
Exception SIGSEGV at address 0x1
...
Called from QT_QWIDGET_SETWINDOWTITLE(0)
...
Called from (b)QWIDGET(0) in ../../../TQWidget.prg
...
Called from QMAINWINDOW:SETWINDOWTITLE(0) in ../../../TQWidget.prg
Called from XBPDIALOG:CREATE(0) in ../../../xbpdialog.prg
Called from GUISTDDIALOG(312) in demoxbp.prg
Called from BUILDADIALOG(117) in demoxbp.prg
Called from _BUILDADIALOG(104) in demoxbp.prg
Called from MAIN(95) in demoxbp.prg
...

Best regards,
Istv?n Bisz 

-----Original Message-----
From: Bisz Istv?n [mailto:Istvan.Bisz@t-online.hu] 
Sent: 2009. szeptember 4. 19:01
To: 'Harbour Project Main Developer List.'
Subject: RE: [Harbour] demoxbp segfault in Fedora 11

Hi,

I just finished the demoxbp testing. It works without the mentioned error
with the latest commits and KDE qt-devel installed, but without QT SDK from
Trolltech site.

Best regards,
Istv?n 

-----Original Message-----
From: Lorenzo Fiorini [mailto:lorenzo.fiorini@gmail.com] 
Sent: 2009. szeptember 4. 8:16
To: Harbour Project Main Developer List.
Subject: [Harbour] demoxbp segfault in Fedora 11

Using QT SDK from trolltech site ./demoxbp worked as expected.
Then I've installed distro's KDE and qt-dev and I always get at start:

Program received signal SIGSEGV, Segmentation fault.
0x006a9163 in strlen () from /lib/libc.so.6
...
(gdb) bt
#0  0x006a9163 in strlen () from /lib/libc.so.6
#1  0x00e2d04f in XSetCommand () from /usr/lib/libX11.so.6
#2  0x00e31aa1 in XSetWMProperties () from /usr/lib/libX11.so.6
#3  0x05a88128 in QWidgetPrivate::create_sys(unsigned long, bool, bool) ()
   from /usr/lib/libQtGui.so.4
#4  0x05a4b6b0 in QWidget::create(unsigned long, bool, bool) ()
   from /usr/lib/libQtGui.so.4
#5  0x05a477e6 in QWidgetPrivate::createWinId(unsigned long) ()
   from /usr/lib/libQtGui.so.4
#6  0x05a4b0a8 in QWidgetPrivate::setWindowTitle_helper(QString const&) ()
   from /usr/lib/libQtGui.so.4
#7  0x05a4b4e2 in QWidget::setWindowTitle(QString const&) ()
   from /usr/lib/libQtGui.so.4
#8  0x080c3fd1 in HB_FUN_ERRORNEW ()
#9  0x00d450ff in hb_vmProc () from /opt/harbour/lib/libharbour.so
#10 0x00d13e35 in hb_vmExecute () from /opt/harbour/lib/libharbour.so
#11 0x00d480ff in hb_vmDoBlock () from /opt/harbour/lib/libharbour.so
#12 0x00d17912 in hb_vmSend () from /opt/harbour/lib/libharbour.so
#13 0x00d429ce in hb___msgEvalInline () from /opt/harbour/lib/libharbour.so
#14 0x00d17912 in hb_vmSend () from /opt/harbour/lib/libharbour.so
#15 0x00d150ef in hb_vmExecute () from /opt/harbour/lib/libharbour.so
#16 0x080770bb in HB_FUN_ERRORNEW ()
#17 0x080d45a0 in ?? ()
#18 0x0815ace0 in HB_FUN_ERRORNEW ()
#19 0x00000008 in ?? ()
#20 0xbfffea5c in ?? ()
#21 0x08159c90 in HB_FUN_ERRORNEW ()
#22 0x081afae8 in ?? ()
#23 0xbfffea88 in ?? ()
#24 0x00d17912 in hb_vmSend () from /opt/harbour/lib/libharbour.so
Backtrace stopped: frame did not save the PC
(gdb)

using valgrind --tool=memcheck --leak-check=yes -v ./demoxbp &>
demoxbp.log I see:
...
==11511== Invalid read of size 1
==11511==    at 0x4007668: strlen (mc_replace_strmem.c:242)
==11511==    by 0x9AB04E: XSetCommand (in /usr/lib/libX11.so.6.2.0)
==11511==    by 0x9AFAA0: XSetWMProperties (in /usr/lib/libX11.so.6.2.0)
==11511==    by 0x5A88127: QWidgetPrivate::create_sys(unsigned long,
bool, bool) (in /usr/lib/libQtGui.so.4.5.2)
==11511==    by 0x5A4B6AF: QWidget::create(unsigned long, bool, bool)
(in /usr/lib/libQtGui.so.4.5.2)
==11511==    by 0x5A477E5: QWidgetPrivate::createWinId(unsigned long)
(in /usr/lib/libQtGui.so.4.5.2)
==11511==    by 0x5A4B0A7:
QWidgetPrivate::setWindowTitle_helper(QString const&) (in
/usr/lib/libQtGui.so.4.5.2)
==11511==    by 0x5A4B4E1: QWidget::setWindowTitle(QString const&) (in
/usr/lib/libQtGui.so.4.5.2)
==11511==    by 0x80C3FD0: (within
/home/twfiorlo/workspace/harbour/contrib/hbxbp/tests/demoxbp)
==11511==    by 0x43AE0FE: hb_vmProc (in
/opt/harbour/lib/libharbour-2.0.0.so)
==11511==    by 0x437CE34: hb_vmExecute (in
/opt/harbour/lib/libharbour-2.0.0.so)
...

Is there anything we can do at hbqt side?

best regards,
Lorenzo




From lorenzo.fiorini at gmail.com  Sat Sep  5 05:02:33 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Sep  5 05:02:39 2009
Subject: [Harbour] demoxbp segfault in Fedora 11
In-Reply-To: <3534837719855956578@unknownmsgid>
References: <9257026e0909032316h2488ffb1w29db3dad85dcb246@mail.gmail.com>
	<3534837719855956578@unknownmsgid>
Message-ID: <9257026e0909050202t27cfcae2mbbe9ae4631ec3c5f@mail.gmail.com>

On Sat, Sep 5, 2009 at 10:24 AM, Bisz Istv?n<Istvan.Bisz@t-online.hu> wrote:

> Sorry I should correct me, the error mentioned by Lorenzo appears just in
> the case when demoxbp is linked statically, the dynamic version works.

I've never tried to link statically ( as far as I'm concerned ).

I use: hbmk -n demoxbp -lhbxbp -lhbqt -lQtCore ...

best regards,
Lorenzo
From vszakats at users.sourceforge.net  Sat Sep  5 06:36:31 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep  5 06:36:37 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12404] trunk/harbour
Message-ID: <E1MjsdD-00054W-6s@74yxhf1.ch3.sourceforge.com>

Revision: 12404
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12404&view=rev
Author:   vszakats
Date:     2009-09-05 10:36:30 +0000 (Sat, 05 Sep 2009)

Log Message:
-----------
2009-09-05 12:35 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/global.mk
  * config/wce/msvcarm.mk
    + Applied 'de-xmastree' patch from Tamas Tevesz.
      (using 'else if' construct of GNU Make 3.81)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/global.mk
    trunk/harbour/config/wce/msvcarm.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat Sep  5 06:51:23 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep  5 06:51:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12405] trunk/harbour
Message-ID: <E1Mjsrb-0005MP-Bs@74yxhf1.ch3.sourceforge.com>

Revision: 12405
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12405&view=rev
Author:   vszakats
Date:     2009-09-05 10:51:22 +0000 (Sat, 05 Sep 2009)

Log Message:
-----------
2009-09-05 12:50 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/dos/watcom.mk
    ! Adjusted watcom watt lib name.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/dos/watcom.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From ranier at cultura.com.br  Sat Sep  5 07:29:39 2009
From: ranier at cultura.com.br (Ranier Vilela)
Date: Sat Sep  5 07:27:57 2009
Subject: [Harbour] New harbour make world
In-Reply-To: <2E2F15A2-D0AE-463A-A488-2E23B653444B@syenar.hu>
References: <4AA17A91.4000409@cultura.com.br>
	<2E2F15A2-D0AE-463A-A488-2E23B653444B@syenar.hu>
Message-ID: <4AA24BA3.5030506@cultura.com.br>

Hi Viktor,
Thank you for the hints.
I will follow your recommendations.

Best regards,

Ranier Vilela
From harbour.01 at syenar.hu  Sat Sep  5 08:09:40 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sat Sep  5 08:09:46 2009
Subject: [Harbour] dos/watcom + watt errors
Message-ID: <18d502870909050509s58544e4dm133d52fa192860bf@mail.gmail.com>

---
! Building Harbour 2.0.0beta2 from source - http://www.harbour-project.org
! MAKE: mingw32-make.exe 3.81 sh.exe
! HB_INSTALL_PREFIX: C:\devl\hb20
! HB_HOST_PLAT: win (x86)  HB_SHELL: nt
! HB_PLATFORM: dos (x86) (autodetected)
! HB_COMPILER: watcom (autodetected:
C:/devl/owatcom-1.8/BINNT/wpp386.exe C:/devl/owatcom-1.8/BINW/)
! Component: 'openssl' not supported on dos platform
! Component: 'gpm' not supported on dos platform
! Component: 'slang' not found
! Component: 'curses' not found
! Component: 'x11' not found
! Component: 'wattcp/watt-32' found in C:\devl\watt\inc
wpp386   -fo=hbsocket.obj  ../../../hbsocket.c
../../../hbsocket.c(175): Error! E059: col(23) unable to open 'sys/time.h'
C:\devl\owatcom-1.8\H\unistd.h(43): Error! E670: col(93) function
modifier conflicts with previous declaration '_w32_getopt'
C:\devl\watt\inc\tcp.h(728): Note! N392: col(16) definition: 'int
_w32_getopt( int, char * const *, char const * )'
C:\devl\watt\inc\tcp.h(728): Note! N822: col(16) current declaration
has type 'int watcall ( int, char * const *, char const * )'
../../../hbsocket.c(2330): Warning! W014: col(1) no reference to symbol 'TODO'
../../../hbsocket.c(2323): Note! N392: col(8) definition: 'int TODO'
in 'int hb_socketSetBlockingIO( int, int )'
mingw32-make.exe[1]: *** [hbsocket.obj] Error 8
---

Brgds,
Viktor
From vszakats at users.sourceforge.net  Sat Sep  5 08:21:24 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep  5 08:21:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12406] trunk/harbour
Message-ID: <E1MjuGi-0006SB-0u@3kljzd1.ch3.sourceforge.com>

Revision: 12406
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12406&view=rev
Author:   vszakats
Date:     2009-09-05 12:21:22 +0000 (Sat, 05 Sep 2009)

Log Message:
-----------
2009-09-05 14:20 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.pt_BR.po
  * utils/hbmk2/hbmk2.hu_HU.po
  * utils/hbmk2/hbmk2.prg
    + Added -compiler and -platform options as alternatives for 
      -comp and -plat, maybe this is more clear and it's also better in
      sync with GNU Make's HB_COMPILER/HB_PLATFORM.

  * config/dos/watcom.mk
    * watt libname to lowercase.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/dos/watcom.mk
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.po
    trunk/harbour/utils/hbmk2/hbmk2.prg
    trunk/harbour/utils/hbmk2/hbmk2.pt_BR.po


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From sscc at mweb.co.za  Sat Sep  5 08:41:36 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Sat Sep  5 08:41:53 2009
Subject: [Harbour] ActiveX
In-Reply-To: <89C5B072-B48A-45FA-8675-0B2B39BA035B@syenar.hu>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<4A9FC9BF.2080501@mweb.co.za>	<4A9FCE7F.6000507@dbtopas.lt>	<4A9FD7F2.1090601@mweb.co.za>	<4A9FDB2E.8030200@dbtopas.lt>
	<4A9FDE88.4040205@mweb.co.za>
	<89C5B072-B48A-45FA-8675-0B2B39BA035B@syenar.hu>
Message-ID: <4AA25C80.9050206@mweb.co.za>

Viktor Szak?ts wrote:

> IMO sorting out HWGUI from the equation would be essential here.

I think you are right, but can it even be done? Without an event loop it's not 
much of a Windows app, and if I try and put all that stuff in, it might as well 
be HWGUI. Plus, although I am very keen for this to work, I am at about the 
limit of what I can justify in terms of my time. It does work in other ways, and 
I will just have to use that.

Regards
Alex

From harbour.01 at syenar.hu  Sat Sep  5 08:57:11 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Sep  5 08:57:21 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4AA25C80.9050206@mweb.co.za>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<4A9FC9BF.2080501@mweb.co.za>	<4A9FCE7F.6000507@dbtopas.lt>	<4A9FD7F2.1090601@mweb.co.za>	<4A9FDB2E.8030200@dbtopas.lt>
	<4A9FDE88.4040205@mweb.co.za>
	<89C5B072-B48A-45FA-8675-0B2B39BA035B@syenar.hu>
	<4AA25C80.9050206@mweb.co.za>
Message-ID: <EB7F995D-A101-4F2D-BCDD-9B19791D3616@syenar.hu>

On 2009.09.05., at 2:41, Alex Strickland wrote:

> Viktor Szak?ts wrote:
>
>> IMO sorting out HWGUI from the equation would be essential here.
>
> I think you are right, but can it even be done? Without an event  
> loop it's not much of a Windows app, and if I try and put all that  
> stuff in, it might as well be HWGUI. Plus, although I am very keen  
> for this to work, I am at about the limit of what I can justify in  
> terms of my time. It does work in other ways, and I will just have  
> to use that.

You'll limit the chances that these problems will be tested
/ fixed by Harbour developers if they need external components.
Few ppl have time to build and debug all external libs that
exist. It's also not possible to easily recreate such environment
given how many versions and builds exist of these libs (not
to mention some of them aren't free).

The biggest problem however is that we cannot include any such
tests in our repository, which means developers can't test
these features/bugfixes after making changes. This means
regressions are more likely.

Basically the golden rule applies here: Supply self-contained
example and everything will be smoother.

If some basic Windows functionality can help creating such
examples, IMO we should add them to hbwin lib. I'm not familiar
with Windows API, but this could be covered by a few more WAPI_*
wrappers.

Brgds,
Viktor

From mbelgrano at deltain.it  Sat Sep  5 09:14:37 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Sep  5 09:15:04 2009
Subject: [Harbour] Will hbmk2 be renamed to hbmk?
In-Reply-To: <B9BF3023-81C1-49E1-8B35-B79717C20715@syenar.hu>
References: <609353e70908300303g40a8478bg55aea79283531b86@mail.gmail.com> 
	<B9BF3023-81C1-49E1-8B35-B79717C20715@syenar.hu>
Message-ID: <609353e70909050614m6ae80ce2kb671da911fe78b4@mail.gmail.com>

as file name i prefer have bcc32.exe and not bcc55.exe
for search in web you are right

2009/9/4 Viktor Szak?ts <harbour.01@syenar.hu>

> There is one prerequisite: we should drop hbmk script to
> do this. AFACS everything is in place to make this move,
> but I'd like to hear other opinions.
>
> If this is done, we can think about the name. To tell the
> truth I got used to the name 'hbmk2' quite much (and I guess
> some users as well), so IMO it's okay to keep it. It's also
> much easier to search for than 'hbmk'. But, opinions are
> welcome also here.
>
> Brgds,
> Viktor
>
> On 2009.08.30., at 0:03, Massimo Belgrano wrote:
>
>  Will hbmk2 be renamed to hbmk?
>>
>> --
>> Massimo Belgrano
>>
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090905/564ca042/attachment.html
From Istvan.Bisz at t-online.hu  Sat Sep  5 09:19:21 2009
From: Istvan.Bisz at t-online.hu (=?iso-8859-1?Q?Bisz_Istv=E1n?=)
Date: Sat Sep  5 09:19:40 2009
Subject: [Harbour] demoxbp segfault in Fedora 11
In-Reply-To: <9257026e0909050202t27cfcae2mbbe9ae4631ec3c5f@mail.gmail.com>
References: <9257026e0909032316h2488ffb1w29db3dad85dcb246@mail.gmail.com>	<3534837719855956578@unknownmsgid>
	<9257026e0909050202t27cfcae2mbbe9ae4631ec3c5f@mail.gmail.com>
Message-ID: <002801ca2e2b$7b1510d0$713f3270$@Bisz@t-online.hu>

For demoxbp building I used the following command:

$ hbmk2 -trace demoxbp &>shared.txt

producing the output:

hbmk2: Processing local make script: hbmk.hbm

hbmk2: Processing configuration: /usr/local/bin/hbmk.cfg

hbmk2: Harbour compiler command (internal):

(/usr/local/bin/harbour) -n2 demoxbp.prg -w3 -i/usr/local/include/harbour
-i.. -i../../hbqt
Harbour 2.0.0beta2 (Rev. 12403)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 'demoxbp.prg'...
...
Lines 3336, Functions/Procedures 49
Generating C source output to 'demoxbp.c'... Done.
hbmk2: C compiler command:

gcc -c -O3  -I/usr/local/include/harbour -I.. -I../../hbqt demoxbp.c
/tmp/hbmk_1wvog5.c
hbmk2: Linker command:

gcc demoxbp.o hbmk_1wvog5.o   -lgpm -lhbxbp -lhbqt -lQtCore -lQtGui
-lQtNetwork -lQtWebKit -lsupc++ -lhbcplr -lhbdebug -lharbour  -odemoxbp
-L/usr/local/lib/harbour

This shared version works for me.

For static build in hbmk2 terminology I used the following command:

$ hbmk2 -trace -static demoxbp &>static.txt

producing the output:

hbmk2: Processing local make script: hbmk.hbm

hbmk2: Processing configuration: /usr/local/bin/hbmk.cfg

hbmk2: Harbour compiler command (internal):

(/usr/local/bin/harbour) -n2 demoxbp.prg -w3 -i/usr/local/include/harbour
-i.. -i../../hbqt
Harbour 2.0.0beta2 (Rev. 12403)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 'demoxbp.prg'...
...
Lines 3336, Functions/Procedures 49
Generating C source output to 'demoxbp.c'... Done.
hbmk2: C compiler command:

gcc -c -O3  -I/usr/local/include/harbour -I.. -I../../hbqt demoxbp.c
/tmp/hbmk_p5m66x.c
hbmk2: Linker command:

gcc demoxbp.o hbmk_p5m66x.o   -lgpm -lhbxbp -lhbqt -lQtCore -lQtGui
-lQtNetwork -lQtWebKit -lsupc++ -lhbextern -lhbdebug -lhbvm -lhbrtl -lhblang
-lhbcpage -lgtcgi -lgtpca -lgtstd -lgttrm -lhbrdd -lhbusrrdd -lhbhsx -lhbsix
-lrddntx -lrddcdx -lrddfpt -lhbuddall -lrddnsx -lhbrtl -lhbvm -lhbmacro
-lhbcplr -lhbpp -lhbcommon -lhbpcre -lhbzlib -lm -ldl -lrt  -odemoxbp
-L/usr/local/lib/harbour

This build generates the mentioned error.

I tried to build a fullstatic build without any success:

$ hbmk2 -trace -fullstatic demoxbp &>fullstatic.txt

hbmk2: Processing local make script: hbmk.hbm

hbmk2: Processing configuration: /usr/local/bin/hbmk.cfg

hbmk2: Harbour compiler command (internal):

(/usr/local/bin/harbour) -n2 demoxbp.prg -w3 -i/usr/local/include/harbour
-i.. -i../../hbqt
Harbour 2.0.0beta2 (Rev. 12403)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 'demoxbp.prg'...
...
Lines 3336, Functions/Procedures 49
Generating C source output to 'demoxbp.c'... Done.
hbmk2: C compiler command:

gcc -c -O3  -I/usr/local/include/harbour -I.. -I../../hbqt demoxbp.c
/tmp/hbmk_37ktzv.c
hbmk2: Linker command:

gcc demoxbp.o hbmk_37ktzv.o   -lgpm -lhbxbp -lhbqt -lQtCore -lQtGui
-lQtNetwork -lQtWebKit -lsupc++ -lhbextern -lhbdebug -lhbvm -lhbrtl -lhblang
-lhbcpage -lgtcgi -lgtpca -lgtstd -lgttrm -lhbrdd -lhbusrrdd -lhbhsx -lhbsix
-lrddntx -lrddcdx -lrddfpt -lhbuddall -lrddnsx -lhbrtl -lhbvm -lhbmacro
-lhbcplr -lhbpp -lhbcommon -lhbpcre -lhbzlib -lm -ldl -lrt  -static
-odemoxbp -L/usr/local/lib/harbour
/usr/bin/ld: cannot find -lgpm
collect2: ld returned 1 exit status
hbmk2: Error: Running linker. 1

gcc demoxbp.o hbmk_37ktzv.o   -lgpm -lhbxbp -lhbqt -lQtCore -lQtGui
-lQtNetwork -lQtWebKit -lsupc++ -lhbextern -lhbdebug -lhbvm -lhbrtl -lhblang
-lhbcpage -lgtcgi -lgtpca -lgtstd -lgttrm -lhbrdd -lhbusrrdd -lhbhsx -lhbsix
-lrddntx -lrddcdx -lrddfpt -lhbuddall -lrddnsx -lhbrtl -lhbvm -lhbmacro
-lhbcplr -lhbpp -lhbcommon -lhbpcre -lhbzlib -lm -ldl -lrt  -static
-odemoxbp -L/usr/local/lib/harbour 


Best regards,
Istv?n

-----Original Message-----
From: Lorenzo Fiorini [mailto:lorenzo.fiorini@gmail.com] 
Sent: 2009. szeptember 5. 11:03
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] demoxbp segfault in Fedora 11

On Sat, Sep 5, 2009 at 10:24 AM, Bisz Istv?n<Istvan.Bisz@t-online.hu> wrote:

> Sorry I should correct me, the error mentioned by Lorenzo appears just in
> the case when demoxbp is linked statically, the dynamic version works.

I've never tried to link statically ( as far as I'm concerned ).

I use: hbmk -n demoxbp -lhbxbp -lhbqt -lQtCore ...

best regards,
Lorenzo


From harbour.01 at syenar.hu  Sat Sep  5 09:21:09 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Sep  5 09:21:18 2009
Subject: [Harbour] Will hbmk2 be renamed to hbmk?
In-Reply-To: <609353e70909050614m6ae80ce2kb671da911fe78b4@mail.gmail.com>
References: <609353e70908300303g40a8478bg55aea79283531b86@mail.gmail.com>
	<B9BF3023-81C1-49E1-8B35-B79717C20715@syenar.hu>
	<609353e70909050614m6ae80ce2kb671da911fe78b4@mail.gmail.com>
Message-ID: <75EFB4F0-0A5A-450C-946E-271615CA7DFD@syenar.hu>

Sorry, I'm not sure I understand.

Brgds,
Viktor

On 2009.09.05., at 3:14, Massimo Belgrano wrote:

> as file name i prefer have bcc32.exe and not bcc55.exe
>
> for search in web you are right
>
> 2009/9/4 Viktor Szak?ts <harbour.01@syenar.hu>
> There is one prerequisite: we should drop hbmk script to
> do this. AFACS everything is in place to make this move,
> but I'd like to hear other opinions.
>
> If this is done, we can think about the name. To tell the
> truth I got used to the name 'hbmk2' quite much (and I guess
> some users as well), so IMO it's okay to keep it. It's also
> much easier to search for than 'hbmk'. But, opinions are
> welcome also here.
>
> Brgds,
> Viktor
>
>
> On 2009.08.30., at 0:03, Massimo Belgrano wrote:
>
> Will hbmk2 be renamed to hbmk?
>
> -- 
> Massimo Belgrano
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
>
> -- 
> Massimo Belgrano
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Sat Sep  5 09:31:29 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Sep  5 09:31:56 2009
Subject: [Harbour] Will hbmk2 be renamed to hbmk?
In-Reply-To: <75EFB4F0-0A5A-450C-946E-271615CA7DFD@syenar.hu>
References: <609353e70908300303g40a8478bg55aea79283531b86@mail.gmail.com> 
	<B9BF3023-81C1-49E1-8B35-B79717C20715@syenar.hu>
	<609353e70909050614m6ae80ce2kb671da911fe78b4@mail.gmail.com> 
	<75EFB4F0-0A5A-450C-946E-271615CA7DFD@syenar.hu>
Message-ID: <609353e70909050631p1883b137i2c6bc9c1cf889e71@mail.gmail.com>

i try explain my idea about the name 'hbmk2' /hbmk

Better hbmk because not include a version number in file name like HBMK2



2009/9/5 Viktor Szak?ts <harbour.01@syenar.hu>

> Sorry, I'm not sure I understand.
>
> Brgds,
> Viktor
>
>
> On 2009.09.05., at 3:14, Massimo Belgrano wrote:
>
>  as file name i prefer have bcc32.exe and not bcc55.exe
>>
>> for search in web you are right
>>
>> 2009/9/4 Viktor Szak?ts <harbour.01@syenar.hu>
>> There is one prerequisite: we should drop hbmk script to
>> do this. AFACS everything is in place to make this move,
>> but I'd like to hear other opinions.
>>
>> If this is done, we can think about the name. To tell the
>> truth I got used to the name 'hbmk2' quite much (and I guess
>> some users as well), so IMO it's okay to keep it. It's also
>> much easier to search for than 'hbmk'. But, opinions are
>> welcome also here.
>>
>> Brgds,
>> Viktor
>>
>>
>> On 2009.08.30., at 0:03, Massimo Belgrano wrote:
>>
>> Will hbmk2 be renamed to hbmk?
>>
>> --
>> Massimo Belgrano
>>
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>
>>
>> --
>> Massimo Belgrano
>>
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090905/0323d6df/attachment.html
From harbour.01 at syenar.hu  Sat Sep  5 10:02:02 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Sep  5 10:02:11 2009
Subject: [Harbour] Will hbmk2 be renamed to hbmk?
In-Reply-To: <609353e70909050631p1883b137i2c6bc9c1cf889e71@mail.gmail.com>
References: <609353e70908300303g40a8478bg55aea79283531b86@mail.gmail.com>
	<B9BF3023-81C1-49E1-8B35-B79717C20715@syenar.hu>
	<609353e70909050614m6ae80ce2kb671da911fe78b4@mail.gmail.com>
	<75EFB4F0-0A5A-450C-946E-271615CA7DFD@syenar.hu>
	<609353e70909050631p1883b137i2c6bc9c1cf889e71@mail.gmail.com>
Message-ID: <4CB9CB16-44E4-46B0-B346-2A0CE6BFD11B@syenar.hu>

> i try explain my idea about the name 'hbmk2' /hbmk

oh, okay.

> Better hbmk because not include a version number in file name like  
> HBMK2

'2' is not really a classic version number, just an
indicator that this is the second edition/incarnation
of this tool. This means it will stay '2' for its whole
lifetime.

Just like in 'Jaguar MkII', 'Canon 5D MkII' or
'Supermarine Spitfire MkII' (but here the numbering
scheme is a little bit less obvious).

Brgds,
Viktor

>
>
>
> 2009/9/5 Viktor Szak?ts <harbour.01@syenar.hu>
> Sorry, I'm not sure I understand.
>
> Brgds,
> Viktor
>
>
> On 2009.09.05., at 3:14, Massimo Belgrano wrote:
>
> as file name i prefer have bcc32.exe and not bcc55.exe
>
> for search in web you are right
>
> 2009/9/4 Viktor Szak?ts <harbour.01@syenar.hu>
> There is one prerequisite: we should drop hbmk script to
> do this. AFACS everything is in place to make this move,
> but I'd like to hear other opinions.
>
> If this is done, we can think about the name. To tell the
> truth I got used to the name 'hbmk2' quite much (and I guess
> some users as well), so IMO it's okay to keep it. It's also
> much easier to search for than 'hbmk'. But, opinions are
> welcome also here.
>
> Brgds,
> Viktor
>
>
> On 2009.08.30., at 0:03, Massimo Belgrano wrote:
>
> Will hbmk2 be renamed to hbmk?
>
> -- 
> Massimo Belgrano
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
>
> -- 
> Massimo Belgrano
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
>
> -- 
> Massimo Belgrano
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sat Sep  5 10:14:49 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Sep  5 10:14:57 2009
Subject: [Harbour] demoxbp segfault in Fedora 11
In-Reply-To: <002801ca2e2b$7b1510d0$713f3270$@Bisz@t-online.hu>
References: <9257026e0909032316h2488ffb1w29db3dad85dcb246@mail.gmail.com>	<3534837719855956578@unknownmsgid>
	<9257026e0909050202t27cfcae2mbbe9ae4631ec3c5f@mail.gmail.com>
	<002801ca2e2b$7b1510d0$713f3270$@Bisz@t-online.hu>
Message-ID: <73109AC2-0C8D-4779-AF7A-20F25244A387@syenar.hu>

> $ hbmk2 -trace -fullstatic demoxbp &>fullstatic.txt
> /usr/bin/ld: cannot find -lgpm

Quite strange that it gets detected at build time, but
not at hbmk2 time. No idea how can that happen assuming
the same Linux installation for both sessions.

Anyhow it wouldn't work due to the removal of lib grouping
(at least I guess), I'll fix this.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Sat Sep  5 10:24:07 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep  5 10:24:15 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12407] trunk/harbour
Message-ID: <E1MjwBT-0007LW-7v@bj8yhf1.ch3.sourceforge.com>

Revision: 12407
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12407&view=rev
Author:   vszakats
Date:     2009-09-05 14:24:06 +0000 (Sat, 05 Sep 2009)

Log Message:
-----------
2009-09-05 16:20 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * INSTALL
    + Little improvements.

  * bin/hb-func.sh
  * utils/hbmk2/hbmk2.pt_BR.po
  * utils/hbmk2/hbmk2.hu_HU.po
  * utils/hbmk2/hbmk2.prg
    ! Fixed gpm lib to be added at the end of liblist to make
      it link after removal of lib grouping switches.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/bin/hb-func.sh
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.po
    trunk/harbour/utils/hbmk2/hbmk2.prg
    trunk/harbour/utils/hbmk2/hbmk2.pt_BR.po


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From mbelgrano at deltain.it  Sat Sep  5 10:37:39 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Sep  5 10:38:06 2009
Subject: [Harbour] Will hbmk2 be renamed to hbmk?
In-Reply-To: <4CB9CB16-44E4-46B0-B346-2A0CE6BFD11B@syenar.hu>
References: <609353e70908300303g40a8478bg55aea79283531b86@mail.gmail.com> 
	<B9BF3023-81C1-49E1-8B35-B79717C20715@syenar.hu>
	<609353e70909050614m6ae80ce2kb671da911fe78b4@mail.gmail.com> 
	<75EFB4F0-0A5A-450C-946E-271615CA7DFD@syenar.hu>
	<609353e70909050631p1883b137i2c6bc9c1cf889e71@mail.gmail.com> 
	<4CB9CB16-44E4-46B0-B346-2A0CE6BFD11B@syenar.hu>
Message-ID: <609353e70909050737w5e64debbh6b9904538e28140b@mail.gmail.com>

well
If good for you is good for all

2009/9/5 Viktor Szak?ts <harbour.01@syenar.hu>

>  i try explain my idea about the name 'hbmk2' /hbmk
>>
>
> oh, okay.
>
>  Better hbmk because not include a version number in file name like HBMK2
>>
>
> '2' is not really a classic version number, just an
> indicator that this is the second edition/incarnation
> of this tool. This means it will stay '2' for its whole
> lifetime.
>
> Just like in 'Jaguar MkII', 'Canon 5D MkII' or
> 'Supermarine Spitfire MkII' (but here the numbering
> scheme is a little bit less obvious).
>
> Brgds,
> Viktor
>
>
>
>>
>>
>> 2009/9/5 Viktor Szak?ts <harbour.01@syenar.hu>
>> Sorry, I'm not sure I understand.
>>
>> Brgds,
>> Viktor
>>
>>
>> On 2009.09.05., at 3:14, Massimo Belgrano wrote:
>>
>> as file name i prefer have bcc32.exe and not bcc55.exe
>>
>> for search in web you are right
>>
>> 2009/9/4 Viktor Szak?ts <harbour.01@syenar.hu>
>> There is one prerequisite: we should drop hbmk script to
>> do this. AFACS everything is in place to make this move,
>> but I'd like to hear other opinions.
>>
>> If this is done, we can think about the name. To tell the
>> truth I got used to the name 'hbmk2' quite much (and I guess
>> some users as well), so IMO it's okay to keep it. It's also
>> much easier to search for than 'hbmk'. But, opinions are
>> welcome also here.
>>
>> Brgds,
>> Viktor
>>
>>
>> On 2009.08.30., at 0:03, Massimo Belgrano wrote:
>>
>> Will hbmk2 be renamed to hbmk?
>>
>> --
>> Massimo Belgrano
>>
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>
>>
>> --
>> Massimo Belgrano
>>
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>
>>
>> --
>> Massimo Belgrano
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090905/22504031/attachment.html
From Istvan.Bisz at t-online.hu  Sat Sep  5 10:55:22 2009
From: Istvan.Bisz at t-online.hu (=?iso-8859-1?Q?Bisz_Istv=E1n?=)
Date: Sat Sep  5 10:55:44 2009
Subject: [Harbour] demoxbp segfault in Fedora 11
In-Reply-To: <73109AC2-0C8D-4779-AF7A-20F25244A387@syenar.hu>
References: <9257026e0909032316h2488ffb1w29db3dad85dcb246@mail.gmail.com>	<3534837719855956578@unknownmsgid>	<9257026e0909050202t27cfcae2mbbe9ae4631ec3c5f@mail.gmail.com>	<002801ca2e2b$7b1510d0$713f3270$@Bisz@t-online.hu>
	<73109AC2-0C8D-4779-AF7A-20F25244A387@syenar.hu>
Message-ID: <000001ca2e38$e4ed1770$aec74650$@Bisz@t-online.hu>

Looks that the linking stops on the first not found static library:

hbmk2: Processing local make script: hbmk.hbm

hbmk2: Processing configuration: /usr/local/bin/hbmk.cfg

hbmk2: Harbour compiler command (internal):

(/usr/local/bin/harbour) -n2 demoxbp.prg -w3 -i/usr/local/include/harbour
-i.. -i../../hbqt
Harbour 2.0.0beta2 (Rev. 12407)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 'demoxbp.prg'...
...
Lines 3336, Functions/Procedures 49
Generating C source output to 'demoxbp.c'... Done.
hbmk2: C compiler command:

gcc -c -O3  -I/usr/local/include/harbour -I.. -I../../hbqt demoxbp.c
/tmp/hbmk_2bzah7.c
hbmk2: Linker command:

gcc demoxbp.o hbmk_2bzah7.o   -lhbxbp -lhbqt -lQtCore -lQtGui -lQtNetwork
-lQtWebKit -lsupc++ -lhbextern -lhbdebug -lhbvm -lhbrtl -lhblang -lhbcpage
-lgtcgi -lgtpca -lgtstd -lgttrm -lhbrdd -lhbusrrdd -lhbhsx -lhbsix -lrddntx
-lrddcdx -lrddfpt -lhbuddall -lrddnsx -lhbrtl -lhbvm -lhbmacro -lhbcplr
-lhbpp -lhbcommon -lhbpcre -lhbzlib -lm -ldl -lrt -lgpm  -static -odemoxbp
-L/usr/local/lib/harbour
/usr/bin/ld: cannot find -lQtCore
collect2: ld returned 1 exit status
hbmk2: Error: Running linker. 1

gcc demoxbp.o hbmk_2bzah7.o   -lhbxbp -lhbqt -lQtCore -lQtGui -lQtNetwork
-lQtWebKit -lsupc++ -lhbextern -lhbdebug -lhbvm -lhbrtl -lhblang -lhbcpage
-lgtcgi -lgtpca -lgtstd -lgttrm -lhbrdd -lhbusrrdd -lhbhsx -lhbsix -lrddntx
-lrddcdx -lrddfpt -lhbuddall -lrddnsx -lhbrtl -lhbvm -lhbmacro -lhbcplr
-lhbpp -lhbcommon -lhbpcre -lhbzlib -lm -ldl -lrt -lgpm  -static -odemoxbp
-L/usr/local/lib/harbour

Best regards,
Istv?n

-----Original Message-----
From: Viktor Szak?ts [mailto:harbour.01@syenar.hu] 
Sent: 2009. szeptember 5. 16:15
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] demoxbp segfault in Fedora 11

> $ hbmk2 -trace -fullstatic demoxbp &>fullstatic.txt
> /usr/bin/ld: cannot find -lgpm

Quite strange that it gets detected at build time, but
not at hbmk2 time. No idea how can that happen assuming
the same Linux installation for both sessions.

Anyhow it wouldn't work due to the removal of lib grouping
(at least I guess), I'll fix this.

Brgds,
Viktor



From harbour.01 at syenar.hu  Sat Sep  5 11:14:56 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Sep  5 11:15:08 2009
Subject: [Harbour] demoxbp segfault in Fedora 11
In-Reply-To: <000001ca2e38$e4ed1770$aec74650$@Bisz@t-online.hu>
References: <9257026e0909032316h2488ffb1w29db3dad85dcb246@mail.gmail.com>	<3534837719855956578@unknownmsgid>	<9257026e0909050202t27cfcae2mbbe9ae4631ec3c5f@mail.gmail.com>	<002801ca2e2b$7b1510d0$713f3270$@Bisz@t-online.hu>
	<73109AC2-0C8D-4779-AF7A-20F25244A387@syenar.hu>
	<000001ca2e38$e4ed1770$aec74650$@Bisz@t-online.hu>
Message-ID: <12826C8A-D98E-4185-89D0-F2B199657E6D@syenar.hu>

> Looks that the linking stops on the first not found static library:

This part is normal.

Brgds,
Viktor

> hbmk2: Processing local make script: hbmk.hbm
>
> hbmk2: Processing configuration: /usr/local/bin/hbmk.cfg
>
> hbmk2: Harbour compiler command (internal):
>
> (/usr/local/bin/harbour) -n2 demoxbp.prg -w3 -i/usr/local/include/ 
> harbour
> -i.. -i../../hbqt
> Harbour 2.0.0beta2 (Rev. 12407)
> Copyright (c) 1999-2009, http://www.harbour-project.org/
> Compiling 'demoxbp.prg'...
> ...
> Lines 3336, Functions/Procedures 49
> Generating C source output to 'demoxbp.c'... Done.
> hbmk2: C compiler command:
>
> gcc -c -O3  -I/usr/local/include/harbour -I.. -I../../hbqt demoxbp.c
> /tmp/hbmk_2bzah7.c
> hbmk2: Linker command:
>
> gcc demoxbp.o hbmk_2bzah7.o   -lhbxbp -lhbqt -lQtCore -lQtGui - 
> lQtNetwork
> -lQtWebKit -lsupc++ -lhbextern -lhbdebug -lhbvm -lhbrtl -lhblang - 
> lhbcpage
> -lgtcgi -lgtpca -lgtstd -lgttrm -lhbrdd -lhbusrrdd -lhbhsx -lhbsix - 
> lrddntx
> -lrddcdx -lrddfpt -lhbuddall -lrddnsx -lhbrtl -lhbvm -lhbmacro - 
> lhbcplr
> -lhbpp -lhbcommon -lhbpcre -lhbzlib -lm -ldl -lrt -lgpm  -static - 
> odemoxbp
> -L/usr/local/lib/harbour
> /usr/bin/ld: cannot find -lQtCore
> collect2: ld returned 1 exit status
> hbmk2: Error: Running linker. 1
>
> gcc demoxbp.o hbmk_2bzah7.o   -lhbxbp -lhbqt -lQtCore -lQtGui - 
> lQtNetwork
> -lQtWebKit -lsupc++ -lhbextern -lhbdebug -lhbvm -lhbrtl -lhblang - 
> lhbcpage
> -lgtcgi -lgtpca -lgtstd -lgttrm -lhbrdd -lhbusrrdd -lhbhsx -lhbsix - 
> lrddntx
> -lrddcdx -lrddfpt -lhbuddall -lrddnsx -lhbrtl -lhbvm -lhbmacro - 
> lhbcplr
> -lhbpp -lhbcommon -lhbpcre -lhbzlib -lm -ldl -lrt -lgpm  -static - 
> odemoxbp
> -L/usr/local/lib/harbour
>
> Best regards,
> Istv?n
>
> -----Original Message-----
> From: Viktor Szak?ts [mailto:harbour.01@syenar.hu]
> Sent: 2009. szeptember 5. 16:15
> To: Harbour Project Main Developer List.
> Subject: Re: [Harbour] demoxbp segfault in Fedora 11
>
>> $ hbmk2 -trace -fullstatic demoxbp &>fullstatic.txt
>> /usr/bin/ld: cannot find -lgpm
>
> Quite strange that it gets detected at build time, but
> not at hbmk2 time. No idea how can that happen assuming
> the same Linux installation for both sessions.
>
> Anyhow it wouldn't work due to the removal of lib grouping
> (at least I guess), I'll fix this.
>
> Brgds,
> Viktor
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From Istvan.Bisz at t-online.hu  Sat Sep  5 12:10:51 2009
From: Istvan.Bisz at t-online.hu (=?iso-8859-1?Q?Bisz_Istv=E1n?=)
Date: Sat Sep  5 12:11:15 2009
Subject: [Harbour] demoxbp segfault in Fedora 11
In-Reply-To: <12826C8A-D98E-4185-89D0-F2B199657E6D@syenar.hu>
References: <9257026e0909032316h2488ffb1w29db3dad85dcb246@mail.gmail.com>	<3534837719855956578@unknownmsgid>	<9257026e0909050202t27cfcae2mbbe9ae4631ec3c5f@mail.gmail.com>	<002801ca2e2b$7b1510d0$713f3270$@Bisz@t-online.hu>	<73109AC2-0C8D-4779-AF7A-20F25244A387@syenar.hu>	<000001ca2e38$e4ed1770$aec74650$@Bisz@t-online.hu>
	<12826C8A-D98E-4185-89D0-F2B199657E6D@syenar.hu>
Message-ID: <000601ca2e43$70e40a40$52ac1ec0$@Bisz@t-online.hu>

Hi Viktor,

Yes, it is normal to exclude the fulstatic case from shared, static and
fulstatic test cases. But back to the original issue, why have we different
behavior between shared and static builds? The same problem appears with
demoqt buils. It's time to go deeper in these issues.

Best regards,
Istv?n

-----Original Message-----
From: Viktor Szak?ts [mailto:harbour.01@syenar.hu] 
Sent: 2009. szeptember 5. 17:15
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] demoxbp segfault in Fedora 11

> Looks that the linking stops on the first not found static library:

This part is normal.

Brgds,
Viktor

> hbmk2: Processing local make script: hbmk.hbm
>
> hbmk2: Processing configuration: /usr/local/bin/hbmk.cfg
>
> hbmk2: Harbour compiler command (internal):
>
> (/usr/local/bin/harbour) -n2 demoxbp.prg -w3 -i/usr/local/include/ 
> harbour
> -i.. -i../../hbqt
> Harbour 2.0.0beta2 (Rev. 12407)
> Copyright (c) 1999-2009, http://www.harbour-project.org/
> Compiling 'demoxbp.prg'...
> ...
> Lines 3336, Functions/Procedures 49
> Generating C source output to 'demoxbp.c'... Done.
> hbmk2: C compiler command:
>
> gcc -c -O3  -I/usr/local/include/harbour -I.. -I../../hbqt demoxbp.c
> /tmp/hbmk_2bzah7.c
> hbmk2: Linker command:
>
> gcc demoxbp.o hbmk_2bzah7.o   -lhbxbp -lhbqt -lQtCore -lQtGui - 
> lQtNetwork
> -lQtWebKit -lsupc++ -lhbextern -lhbdebug -lhbvm -lhbrtl -lhblang - 
> lhbcpage
> -lgtcgi -lgtpca -lgtstd -lgttrm -lhbrdd -lhbusrrdd -lhbhsx -lhbsix - 
> lrddntx
> -lrddcdx -lrddfpt -lhbuddall -lrddnsx -lhbrtl -lhbvm -lhbmacro - 
> lhbcplr
> -lhbpp -lhbcommon -lhbpcre -lhbzlib -lm -ldl -lrt -lgpm  -static - 
> odemoxbp
> -L/usr/local/lib/harbour
> /usr/bin/ld: cannot find -lQtCore
> collect2: ld returned 1 exit status
> hbmk2: Error: Running linker. 1
>
> gcc demoxbp.o hbmk_2bzah7.o   -lhbxbp -lhbqt -lQtCore -lQtGui - 
> lQtNetwork
> -lQtWebKit -lsupc++ -lhbextern -lhbdebug -lhbvm -lhbrtl -lhblang - 
> lhbcpage
> -lgtcgi -lgtpca -lgtstd -lgttrm -lhbrdd -lhbusrrdd -lhbhsx -lhbsix - 
> lrddntx
> -lrddcdx -lrddfpt -lhbuddall -lrddnsx -lhbrtl -lhbvm -lhbmacro - 
> lhbcplr
> -lhbpp -lhbcommon -lhbpcre -lhbzlib -lm -ldl -lrt -lgpm  -static - 
> odemoxbp
> -L/usr/local/lib/harbour
>
> Best regards,
> Istv?n
>
> -----Original Message-----
> From: Viktor Szak?ts [mailto:harbour.01@syenar.hu]
> Sent: 2009. szeptember 5. 16:15
> To: Harbour Project Main Developer List.
> Subject: Re: [Harbour] demoxbp segfault in Fedora 11
>
>> $ hbmk2 -trace -fullstatic demoxbp &>fullstatic.txt
>> /usr/bin/ld: cannot find -lgpm
>
> Quite strange that it gets detected at build time, but
> not at hbmk2 time. No idea how can that happen assuming
> the same Linux installation for both sessions.
>
> Anyhow it wouldn't work due to the removal of lib grouping
> (at least I guess), I'll fix this.
>
> Brgds,
> Viktor
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour



From harbour.01 at syenar.hu  Sat Sep  5 12:30:01 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Sep  5 12:30:10 2009
Subject: [Harbour] demoxbp segfault in Fedora 11
In-Reply-To: <000601ca2e43$70e40a40$52ac1ec0$@Bisz@t-online.hu>
References: <9257026e0909032316h2488ffb1w29db3dad85dcb246@mail.gmail.com>	<3534837719855956578@unknownmsgid>	<9257026e0909050202t27cfcae2mbbe9ae4631ec3c5f@mail.gmail.com>	<002801ca2e2b$7b1510d0$713f3270$@Bisz@t-online.hu>	<73109AC2-0C8D-4779-AF7A-20F25244A387@syenar.hu>	<000001ca2e38$e4ed1770$aec74650$@Bisz@t-online.hu>
	<12826C8A-D98E-4185-89D0-F2B199657E6D@syenar.hu>
	<000601ca2e43$70e40a40$52ac1ec0$@Bisz@t-online.hu>
Message-ID: <FECFBC79-7C28-4C1D-8775-E4F31A4DB617@syenar.hu>

Hi Istvan,

On 2009.09.05., at 6:10, Bisz Istv?n wrote:

> Hi Viktor,
>
> Yes, it is normal to exclude the fulstatic case from shared, static  
> and
> fulstatic test cases. But back to the original issue, why have we  
> different

I'm not sure I understand the issue here. I'd still be interested
how can it happen that gpm is detected at build time but missing
at hbmk2 time.

> behavior between shared and static builds? The same problem appears  
> with
> demoqt buils. It's time to go deeper in these issues.

No idea, I hope someone will be able to give some hints.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Sat Sep  5 13:18:13 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep  5 13:18:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12408] trunk/harbour
Message-ID: <E1Mjytx-0007p5-Hf@dn4whf1.ch3.sourceforge.com>

Revision: 12408
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12408&view=rev
Author:   vszakats
Date:     2009-09-05 17:18:12 +0000 (Sat, 05 Sep 2009)

Log Message:
-----------
2009-09-05 19:17 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/examples/contribf.hbc
  * contrib/hbtip/hbtipssl.hbc
  * contrib/hbtip/hbtip.hbc
  * contrib/hbtip/Makefile
    + Enabled hbtip lib for dos platform. It can work with watt lib.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbtip/Makefile
    trunk/harbour/contrib/hbtip/hbtip.hbc
    trunk/harbour/contrib/hbtip/hbtipssl.hbc
    trunk/harbour/utils/hbmk2/examples/contribf.hbc


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat Sep  5 13:20:25 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep  5 13:20:30 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12409] trunk/harbour
Message-ID: <E1Mjyw5-0007tE-Ra@dn4whf1.ch3.sourceforge.com>

Revision: 12409
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12409&view=rev
Author:   vszakats
Date:     2009-09-05 17:20:24 +0000 (Sat, 05 Sep 2009)

Log Message:
-----------
2009-09-05 19:19 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/examples/contribf.hbc
  * utils/hbmk2/examples/contrib.hbc
    ! Deleted hbcrypt lib references.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/examples/contrib.hbc
    trunk/harbour/utils/hbmk2/examples/contribf.hbc


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat Sep  5 14:40:30 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep  5 14:40:35 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12410]
	trunk/harbour/ChangeLog
Message-ID: <E1Mk0Ba-0001VY-1F@dn4whf1.ch3.sourceforge.com>

Revision: 12410
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12410&view=rev
Author:   vszakats
Date:     2009-09-05 18:40:28 +0000 (Sat, 05 Sep 2009)

Log Message:
-----------
2009-09-05 20:39 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * ChangeLog
    ! Minor typos.

Modified Paths:
--------------
    trunk/harbour/ChangeLog


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat Sep  5 16:11:44 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep  5 16:11:50 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12411] trunk/harbour
Message-ID: <E1Mk1bs-0007f2-PZ@74yxhf1.ch3.sourceforge.com>

Revision: 12411
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12411&view=rev
Author:   vszakats
Date:     2009-09-05 20:11:43 +0000 (Sat, 05 Sep 2009)

Log Message:
-----------
2009-09-05 22:11 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * contrib/hbcurl/Makefile
    + Using WATTCP lib if available to make it build on dos.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbcurl/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From lucasdebeltran at gmail.com  Sat Sep  5 16:29:51 2009
From: lucasdebeltran at gmail.com (=?ISO-8859-1?Q?Lucas_De_Beltr=E1n?=)
Date: Sat Sep  5 16:29:57 2009
Subject: [Harbour] SQL RDD
Message-ID: <eb96f4980909051329l90b797ftaecd9842534d074a@mail.gmail.com>

Hi,

In Harbour, is there a RDD for SQL, so I keep the same code (such as SELECT
("INFO"), SET FILTER, PACK, etc).

Thank you very much. Regards,

Lucas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090905/7dc607e2/attachment.html
From lucasdebeltran at gmail.com  Sat Sep  5 16:32:45 2009
From: lucasdebeltran at gmail.com (=?ISO-8859-1?Q?Lucas_De_Beltr=E1n?=)
Date: Sat Sep  5 16:32:50 2009
Subject: [Harbour] ViaNemo: New Framework Opensource for Harbour
Message-ID: <eb96f4980909051332i69658d1ek14b7b16e4e1b8054@mail.gmail.com>

Hello Fernando,

It is a great idea, as Harbour lacks an official GUI. Fivewin is the most
used GUI, and Harbour will improve so much if it has it?s own GUI compilant
with Fivewin and capable to run in Windows, Linux and Mac.

Where can I test it?.

Thanks a lot!!!.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090905/61fba163/attachment.html
From vszakats at users.sourceforge.net  Sat Sep  5 18:02:38 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep  5 18:02:45 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12412] trunk/harbour
Message-ID: <E1Mk3LC-0007ZG-Hv@bj8yhf1.ch3.sourceforge.com>

Revision: 12412
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12412&view=rev
Author:   vszakats
Date:     2009-09-05 22:02:37 +0000 (Sat, 05 Sep 2009)

Log Message:
-----------
2009-09-05 23:59 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * INSTALL
  * config/detect.mk
    + Enabled OPENSSL lib for dos platform.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/config/detect.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From info at fsgiudice.com  Sat Sep  5 18:37:57 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Sep  5 18:38:10 2009
Subject: [Harbour] building httpadv.prg in tip tests using ssl support
In-Reply-To: <0934C78D-E86A-461F-BC27-3A62B84844CF@syenar.hu>
References: <4A982D64.60003@fsgiudice.com>	<2A3F70D4-ECBF-4B14-B7DA-DFE3B5EBC75B@syenar.hu>	<4A9B7525.7080107@fsgiudice.com>
	<0934C78D-E86A-461F-BC27-3A62B84844CF@syenar.hu>
Message-ID: <4AA2E845.6010608@fsgiudice.com>

Hi Viktor,

Il 05/09/2009 1.46, Viktor Szak?ts ha scritto:
> Hi Francesco,
> 
> These things are already in SVN since then.
> 

I'm trying but without success. Now I have downloaded last openssl and 
I'm rebuilding last SVN again, but I get some missing exported openssl 
functions.
I will mail some infos in minutes.

What I would like to have is to use httpadv.prg passing an https url to 
see if your additions work also for this test.

Best Regards,
Francesco
From info at fsgiudice.com  Sat Sep  5 19:29:24 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Sep  5 19:29:35 2009
Subject: [Harbour] building httpadv.prg in tip tests using ssl support
In-Reply-To: <4AA2E845.6010608@fsgiudice.com>
References: <4A982D64.60003@fsgiudice.com>	<2A3F70D4-ECBF-4B14-B7DA-DFE3B5EBC75B@syenar.hu>	<4A9B7525.7080107@fsgiudice.com>	<0934C78D-E86A-461F-BC27-3A62B84844CF@syenar.hu>
	<4AA2E845.6010608@fsgiudice.com>
Message-ID: <4AA2F454.1090005@fsgiudice.com>

Hi Viktor,

Bingo!

I successfully built httpadv.prg using mingw but with a few changes:

1) I have renamed hbmk.hbm in contrib\hbtip\tests\ because I have not 
found a parameter to make hbmk2 to ignore default hbmk.hbm (I miss 
something)

2) I added a hbmkssl.hbm that points to
../hbtipssl.hbc

3) changed hbtipssl.hbc that wrongly had
lib=hbtips
instead of
lib=hbtipssl

4) copied
c:\openssl\lib\mingw\ssleay32.a
c:\openssl\lib\mingw\libeay32.a
to
c:\openssl\lib\mingw\libssleay32.a
c:\openssl\lib\mingw\liblibeay32.a

to make hbmk2 happy finding lib*
(tested also with hbssls.hbc but there is same problem finding ssleay32 
that not has lib on front)

and the result is that httpadv.prg is working (excellent work, thank you).

There are some parts to update, could you check them ?

Best Regards,
Francesco

Il 06/09/2009 0.37, Francesco Saverio Giudice ha scritto:
> Hi Viktor,
> 
> Il 05/09/2009 1.46, Viktor Szak?ts ha scritto:
>> Hi Francesco,
>>
>> These things are already in SVN since then.
>>
> 
> I'm trying but without success. Now I have downloaded last openssl and 
> I'm rebuilding last SVN again, but I get some missing exported openssl 
> functions.
> I will mail some infos in minutes.
> 
> What I would like to have is to use httpadv.prg passing an https url to 
> see if your additions work also for this test.
> 
> Best Regards,
> Francesco
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
From vszakats at users.sourceforge.net  Sat Sep  5 19:44:23 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep  5 19:44:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12413] trunk/harbour
Message-ID: <E1Mk4vf-0003Hk-U1@74yxhf1.ch3.sourceforge.com>

Revision: 12413
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12413&view=rev
Author:   vszakats
Date:     2009-09-05 23:44:22 +0000 (Sat, 05 Sep 2009)

Log Message:
-----------
2009-09-06 01:44 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * contrib/hbtip/hbtipssl.hbc
    ! Fixed typo in lib name.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbtip/hbtipssl.hbc


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Sat Sep  5 20:12:48 2009
From: harbour.01 at syenar.hu (=?WINDOWS-1252?Q?Viktor_Szak=E1ts?=)
Date: Sat Sep  5 20:12:56 2009
Subject: [Harbour] building httpadv.prg in tip tests using ssl support
In-Reply-To: <4AA2F454.1090005@fsgiudice.com>
References: <4A982D64.60003@fsgiudice.com>	<2A3F70D4-ECBF-4B14-B7DA-DFE3B5EBC75B@syenar.hu>	<4A9B7525.7080107@fsgiudice.com>	<0934C78D-E86A-461F-BC27-3A62B84844CF@syenar.hu>
	<4AA2E845.6010608@fsgiudice.com> <4AA2F454.1090005@fsgiudice.com>
Message-ID: <E371A34A-221D-4426-92D1-398C6935047F@syenar.hu>

Hi Francesco,

> I successfully built httpadv.prg using mingw but with a few changes:
>
> 1) I have renamed hbmk.hbm in contrib\hbtip\tests\ because I have  
> not found a parameter to make hbmk2 to ignore default hbmk.hbm (I  
> miss something)

There is no such parameter, but the point in this case is easy config
for default cases. It's very easy to create another dir (or delete/ 
modify
hbmk.hbm) for anything else. I can add an envvar to control that, but
probably it'd just make things more complicated.

> 2) I added a hbmkssl.hbm that points to
> ../hbtipssl.hbc

Good.

> 3) changed hbtipssl.hbc that wrongly had
> lib=hbtips
> instead of
> lib=hbtipssl

Thanks, I'll fix it.

> 4) copied
> c:\openssl\lib\mingw\ssleay32.a
> c:\openssl\lib\mingw\libeay32.a
> to
> c:\openssl\lib\mingw\libssleay32.a
> c:\openssl\lib\mingw\liblibeay32.a
> to make hbmk2 happy finding lib*
> (tested also with hbssls.hbc but there is same problem finding  
> ssleay32 that not has lib on front)

Yes, such adjustment looks inevitable ATM given the chaos
regarding ssl lib names in different distros, compilers
and build situations. Maybe later this will somewhat clear
up as maybe the OpenSSL team will clean it up and/or we
will better see what is the need of Harbour users in
general.

> and the result is that httpadv.prg is working (excellent work, thank  
> you).

Great news!

> There are some parts to update, could you check them ?

I've committed a fix for the libname typo, I can't really
do too much with the rest ATM.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Sat Sep  5 21:10:13 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep  5 21:10:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12414] trunk/harbour
Message-ID: <E1Mk6Gj-0007oO-HP@c3vjzd1.ch3.sourceforge.com>

Revision: 12414
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12414&view=rev
Author:   vszakats
Date:     2009-09-06 01:10:09 +0000 (Sun, 06 Sep 2009)

Log Message:
-----------
2009-09-06 03:08 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed to not apply compression in -hbcmp (and similar) modes.
    ! Adjusted rdd lib ordering to make some linkers (mingw) happy without
      using lib grouping. Please review.

  * bin/hb-mkimp.bat
    * Little formatting.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/hb-mkimp.bat
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat Sep  5 21:22:06 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep  5 21:22:11 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12415] trunk/harbour
Message-ID: <E1Mk6SE-00084D-39@c3vjzd1.ch3.sourceforge.com>

Revision: 12415
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12415&view=rev
Author:   vszakats
Date:     2009-09-06 01:22:05 +0000 (Sun, 06 Sep 2009)

Log Message:
-----------
2009-09-06 03:21 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    ! Typo in recent addition (-compiler/-platform options)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat Sep  5 21:58:04 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep  5 21:58:10 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12416] trunk/harbour
Message-ID: <E1Mk712-0005r2-RH@74yxhf1.ch3.sourceforge.com>

Revision: 12416
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12416&view=rev
Author:   vszakats
Date:     2009-09-06 01:58:03 +0000 (Sun, 06 Sep 2009)

Log Message:
-----------
2009-09-06 03:57 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    ! Further adjusted rdd lib ordering to make some linkers (mingw) 
      happy without using lib grouping. Applied also for xhb mode.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bedipritpal at hotmail.com  Sat Sep  5 22:25:51 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Sep  5 22:25:57 2009
Subject: [Harbour] HBMK2 - Error
Message-ID: <25314099.post@talk.nabble.com>


C:\harbour\contrib\hbnetio\tests>hbmk2 netiosrv.hbm
hbmk2: Processing local make script: hbmk.hbm
hbmk2: Warning: File cannot be found: netiosrv.hbm
hbmk2: Processing configuration: c:\harbour_dev\harbour\mingw\bin\hbmk.cfg
Error BASE/1124  Argument error: LEFT (Quit)
Error BASE/1124  Argument error: LEFT
Called from LEFT(0)
Called from HBMK(1848)
Called from MAIN(398)
C:\harbour\contrib\hbnetio\tests>

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/HBMK2---Error-tp25314099p25314099.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Sun Sep  6 00:10:55 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun Sep  6 00:11:04 2009
Subject: [Harbour] HBMK2 - Error
In-Reply-To: <25314099.post@talk.nabble.com>
References: <25314099.post@talk.nabble.com>
Message-ID: <25314506.post@talk.nabble.com>


Hi


Pritpal Bedi wrote:
> 
> C:\harbour\contrib\hbnetio\tests>hbmk2 netiosrv.hbm
> hbmk2: Processing local make script: hbmk.hbm
> hbmk2: Warning: File cannot be found: netiosrv.hbm
> hbmk2: Processing configuration: c:\harbour_dev\harbour\mingw\bin\hbmk.cfg
> Error BASE/1124  Argument error: LEFT (Quit)
> Error BASE/1124  Argument error: LEFT
> Called from LEFT(0)
> Called from HBMK(1848)
> Called from MAIN(398)
> C:\harbour\contrib\hbnetio\tests>
> 

Please ignore.
I surely need a cup -f strong coffee.

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/HBMK2---Error-tp25314099p25314506.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From marek.horodyski at interia.pl  Sun Sep  6 02:39:03 2009
From: marek.horodyski at interia.pl (marek.horodyski@interia.pl)
Date: Sun Sep  6 02:39:11 2009
Subject: [Harbour] problem with link tools library
Message-ID: <20090906063903.9D86C216CB4@f52.poczta.interia.pl>

I try build all from scratch from night zip file. 
Compilator is build ok. But when I try link my app after command :

D:\harbour\bin\win\mingw\hbmk2 -n -m -w2 -gc3 -gui -gtwvg homar.prg braki.prg -lhbct -lhomar -lhbwin -trace

(
in folder have I too file homar.hbc with contents :

libs=hbhpdf libhpdf libpng
libs=sddodbc hbodbc
libs=rddsql rddado
{win}libs=odbc32
#{win}libs=gtwvg
#mt=yes
#gui=yes
)


have I many warnings. Last what I see on screen is :

D:/harbour/lib/win/mingw/libhomar.a(BEZKOM.o)(.data+0x48):BEZKOM.c: undefined reference to `HB_FUN_CRYPT'
D:/harbour/lib/win/mingw/libhomar.a(PLUSPLUS.o)(.data+0x68):PLUSPLUS.c: undefined reference to `HB_FUN_ADDASCII'
D:/harbour/lib/win/mingw/libhomar.a(MINUSMIN.o)(.data+0x68):MINUSMIN.c: undefined reference to `HB_FUN_ADDASCII'
D:/harbour/lib/win/mingw/libhomar.a(FILENEW.o)(.data+0x208):FILENEW.c: undefined reference to `HB_FUN_ATNUM'
D:/harbour/lib/win/mingw/libhomar.a(DELREC.o)(.data+0xf8):DELREC.c: undefined reference to `HB_FUN_BLANK'
D:/harbour/lib/win/mingw/libhomar.a(STERUJPR.o)(.data+0x5e8):STERUJPR.c: undefined reference to `HB_FUN_SETLASTKEY'
D:/harbour/lib/win/mingw/libhomar.a(STERUJPR.o)(.data+0xa38):STERUJPR.c: undefined reference to `HB_FUN_NTOCOLOR'
D:/harbour/lib/win/mingw/libhomar.a(GET.o)(.data+0x408):GET.c: undefined reference to `HB_FUN_KBDSTAT'
D:/harbour/lib/win/mingw/libhomar.a(PARPRACY.o)(.data+0x1a8):PARPRACY.c: undefined reference to `HB_FUN_TIMEVALID'
D:/harbour/lib/win/mingw/libhomar.a(WORM.o)(.data+0x2d8):WORM.c: undefined reference to `HB_FUN_ADDASCII'
D:/harbour/lib/win/mingw/libhomar.a(DOS_SHEL.o)(.data+0x78):DOS_SHEL.c: undefined reference to `HB_FUN_EXENAME'
D:/harbour/lib/win/mingw/libhomar.a(OBRAZ.o)(.data+0xd8):OBRAZ.c: undefined reference to `HB_FUN_NTOCOLOR'
D:/harbour/lib/win/mingw/libhomar.a(EKRAN.o)(.data+0x108):EKRAN.c: undefined reference to `HB_FUN_NTOCOLOR'
D:/harbour/lib/win/mingw/libhomar.a(EDDOKZB.o)(.data+0x508):EDDOKZB.c: undefined reference to `HB_FUN_SETLASTKEY'
D:/harbour/lib/win/mingw/libhomar.a(KALENDAR.o)(.data+0x3a8):KALENDAR.c: undefined reference to `HB_FUN_TIMEVALID'
D:/harbour/lib/win/mingw/libhomar.a(KALENDAR.o)(.data+0x3d8):KALENDAR.c: undefined reference to `HB_FUN_SETTIME'
D:/harbour/lib/win/mingw/libhomar.a(KALENDAR.o)(.data+0x3e8):KALENDAR.c: undefined reference to `HB_FUN_SETDATE'
D:/harbour/lib/win/mingw/libhomar.a(KOLOR.o)(.data+0x208):KOLOR.c: undefined reference to `HB_FUN_COLORTON'
D:/harbour/lib/win/mingw/libhomar.a(KOLOR.o)(.data+0x238):KOLOR.c: undefined reference to `HB_FUN_NTOCOLOR'
D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text+0x2e1a):dbfntx1.c: undefined reference to `hb_dbfLockIdxFile'
D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text+0x2e5c):dbfntx1.c: undefined reference to `hb_dbfLockIdxFile'
D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text+0x2f80):dbfntx1.c: undefined reference to `hb_dbfLockIdxFile'
D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text+0x3003):dbfntx1.c: undefined reference to `hb_dbfLockIdxFile'
D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text+0x3248):dbfntx1.c: undefined reference to `hb_dbfLockIdxFile'
D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text+0x34e8):dbfntx1.c: more undefined references to `hb_dbfLockIdxFile' follow
D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text+0x13647):dbfntx1.c: undefined reference to `hb_dbfLockIdxGetData'
D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text+0x13ec5):dbfntx1.c: undefined reference to `hb_dbfLockIdxFile'
D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text+0x14798):dbfntx1.c: undefined reference to `hb_dbfLockIdxFile'
D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text+0x14f31):dbfntx1.c: undefined reference to `hb_dbfLockIdxFile'
D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text+0x151df):dbfntx1.c: undefined reference to `hb_dbfLockIdxFile'
D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text+0x152f9):dbfntx1.c: undefined reference to `hb_dbfLockIdxFile'
D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text+0x153c6):dbfntx1.c: more undefined references to `hb_dbfLockIdxFile' follow
D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text+0x173dd):dbfntx1.c: undefined reference to `HB_FUN__DBF'
D:/harbour/lib/win/mingw/librddcdx.a(dbfcdx1.o)(.text+0x2b59):dbfcdx1.c: undefined reference to `hb_dbfLockIdxFile'
D:/harbour/lib/win/mingw/librddcdx.a(dbfcdx1.o)(.text+0x2c95):dbfcdx1.c: undefined reference to `hb_dbfLockIdxFile'
D:/harbour/lib/win/mingw/librddcdx.a(dbfcdx1.o)(.text+0x300c):dbfcdx1.c: undefined reference to `hb_dbfLockIdxFile'
D:/harbour/lib/win/mingw/librddcdx.a(dbfcdx1.o)(.text+0x33e3):dbfcdx1.c: undefined reference to `hb_dbfLockIdxFile'
D:/harbour/lib/win/mingw/librddcdx.a(dbfcdx1.o)(.text+0x13c94):dbfcdx1.c: undefined reference to `hb_dbfLockIdxGetData'
D:/harbour/lib/win/mingw/librddcdx.a(dbfcdx1.o)(.text+0x1b9cd):dbfcdx1.c: undefined reference to `HB_FUN__DBF'
D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text+0x145):dbffpt1.c: undefined reference to `hb_dbfGetEGcode'
D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text+0x276f):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text+0x2a41):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text+0x46dc):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text+0x4815):dbffpt1.c: undefined reference to `hb_dbfSetMemoData'
D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text+0x4d7d):dbffpt1.c: undefined reference to `hb_sxPtoD'
D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text+0x551c):dbffpt1.c: undefined reference to `hb_sxDtoP'
D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text+0x55bd):dbffpt1.c: undefined reference to `hb_sxDtoP'
D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text+0x5a3f):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text+0x6af3):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text+0x6ca8):dbffpt1.c: undefined reference to `hb_dbfSetMemoData'
D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text+0x6e5f):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text+0x6f36):dbffpt1.c: undefined reference to `hb_dbfSetMemoData'
D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text+0x74a0):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text+0x92a1):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text+0x9312):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text+0x9353):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text+0x94af):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text+0x9c7d):dbffpt1.c: undefined reference to `HB_FUN__DBF'
collect2: ld returned 1 exit status
hbmk2: Error: Running linker. 1
gcc.exe homar.o braki.o hbmk_llbci2.o    -mwindows -lgtwvg -lhbhpdf -llibhpdf -llibpng -lsddodbc -lhbodbc -lrddsql -lrddado -lodbc32 -lhbct -lho
mar -lhbwin -lhbextern -lhbdebug -lhbvm -lhbrtl -lhblang -lhbcpage -lgtcgi -lgtpca -lgtstd -lgtwin -lgtwvt -lgtgui -lhbrdd -lhbusrrdd -lhbhsx -l
hbsix -lrddntx -lrddcdx -lrddfpt -lhbuddall -lrddnsx -lhbrtl -lhbvm -lhbmacro -lhbcplr -lhbpp -lhbcommon -lhbpcre -lhbzlib -lkernel32 -luser32 -
lgdi32 -ladvapi32 -lws2_32 -lwinspool -lcomctl32 -lcomdlg32 -lshell32 -luuid -lole32 -loleaut32 -lmpr -lwinmm -lmapi32 -limm32 -lmsimg32 -lwinin
et  -ohomar.exe -LD:/harbour/lib/win/mingw


tools library is in folder (D:\harbour\lib\win\mingw\libhbct.a)
?????????????????????????????? Find: *ct
?    Name    ?  Size   ?  Date  ?Time ?
?..          ?<UP--DIR>?06-09-09?07:58?
?libhbct    a?  269 758?05-09-09?22:58?


What I make bad ?

Regards,
Marek Horodyski



----------------------------------------------------------------------
EuroBasket 2009 &#8211; grasz w kosza? Poczytaj o rozgrywkach. 
Kliknij >>> http://link.interia.pl/f2329

From vszakats at users.sourceforge.net  Sun Sep  6 02:58:56 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun Sep  6 02:59:02 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12417] trunk/harbour
Message-ID: <E1MkBiC-00074t-PL@74yxhf1.ch3.sourceforge.com>

Revision: 12417
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12417&view=rev
Author:   vszakats
Date:     2009-09-06 06:58:55 +0000 (Sun, 06 Sep 2009)

Log Message:
-----------
2009-09-06 08:58 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed regression from yesterday (@.clp handling RTE)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Sun Sep  6 03:00:41 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Sep  6 03:00:48 2009
Subject: [Harbour] HBMK2 - Error
In-Reply-To: <25314506.post@talk.nabble.com>
References: <25314099.post@talk.nabble.com> <25314506.post@talk.nabble.com>
Message-ID: <A7E47D92-2F82-4F06-B74A-272E4717EAA6@syenar.hu>

Hi Pritpal,

No it's a real (and new) bug, I've just fixed it. Thank you.

Brgds,
Viktor

On 2009.09.06., at 6:10, Pritpal Bedi wrote:

>
> Hi
>
>
> Pritpal Bedi wrote:
>>
>> C:\harbour\contrib\hbnetio\tests>hbmk2 netiosrv.hbm
>> hbmk2: Processing local make script: hbmk.hbm
>> hbmk2: Warning: File cannot be found: netiosrv.hbm
>> hbmk2: Processing configuration: c:\harbour_dev\harbour\mingw\bin 
>> \hbmk.cfg
>> Error BASE/1124  Argument error: LEFT (Quit)
>> Error BASE/1124  Argument error: LEFT
>> Called from LEFT(0)
>> Called from HBMK(1848)
>> Called from MAIN(398)
>> C:\harbour\contrib\hbnetio\tests>
>>
>
> Please ignore.
> I surely need a cup -f strong coffee.
>
> Regards
> Pritpal Bedi
>
>
> -- 
> View this message in context: http://www.nabble.com/HBMK2---Error-tp25314099p25314506.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sun Sep  6 03:39:55 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Sep  6 03:40:06 2009
Subject: [Harbour] problem with link tools library
In-Reply-To: <20090906063903.9D86C216CB4@f52.poczta.interia.pl>
References: <20090906063903.9D86C216CB4@f52.poczta.interia.pl>
Message-ID: <809F0715-EAF7-403C-8B71-6C7476950562@syenar.hu>

First, try with recent SVN, as I've just attempted to fix this.

Second, you'll probably need to play around with the position
of -lhbct parameter in your setup to make mingw linker happy.

I'm more and more annoyed by this stupid-looking behavior of
mingw (and a few others gccs), so I may simply readd lib grouping
to make it behave like every other tool. I noticed that the
large number of default windows libs in hbmk2 slows down
linking much more than we could gain by dropping lib grouping
option.

Brgds,
Viktor

On 2009.09.06., at 8:39, marek.horodyski@interia.pl wrote:

> I try build all from scratch from night zip file.
> Compilator is build ok. But when I try link my app after command :
>
> D:\harbour\bin\win\mingw\hbmk2 -n -m -w2 -gc3 -gui -gtwvg homar.prg  
> braki.prg -lhbct -lhomar -lhbwin -trace
>
> (
> in folder have I too file homar.hbc with contents :
>
> libs=hbhpdf libhpdf libpng
> libs=sddodbc hbodbc
> libs=rddsql rddado
> {win}libs=odbc32
> #{win}libs=gtwvg
> #mt=yes
> #gui=yes
> )
>
>
> have I many warnings. Last what I see on screen is :
>
> D:/harbour/lib/win/mingw/libhomar.a(BEZKOM.o)(.data+0x48):BEZKOM.c:  
> undefined reference to `HB_FUN_CRYPT'
> D:/harbour/lib/win/mingw/libhomar.a(PLUSPLUS.o)(.data 
> +0x68):PLUSPLUS.c: undefined reference to `HB_FUN_ADDASCII'
> D:/harbour/lib/win/mingw/libhomar.a(MINUSMIN.o)(.data 
> +0x68):MINUSMIN.c: undefined reference to `HB_FUN_ADDASCII'
> D:/harbour/lib/win/mingw/libhomar.a(FILENEW.o)(.data 
> +0x208):FILENEW.c: undefined reference to `HB_FUN_ATNUM'
> D:/harbour/lib/win/mingw/libhomar.a(DELREC.o)(.data+0xf8):DELREC.c:  
> undefined reference to `HB_FUN_BLANK'
> D:/harbour/lib/win/mingw/libhomar.a(STERUJPR.o)(.data 
> +0x5e8):STERUJPR.c: undefined reference to `HB_FUN_SETLASTKEY'
> D:/harbour/lib/win/mingw/libhomar.a(STERUJPR.o)(.data 
> +0xa38):STERUJPR.c: undefined reference to `HB_FUN_NTOCOLOR'
> D:/harbour/lib/win/mingw/libhomar.a(GET.o)(.data+0x408):GET.c:  
> undefined reference to `HB_FUN_KBDSTAT'
> D:/harbour/lib/win/mingw/libhomar.a(PARPRACY.o)(.data 
> +0x1a8):PARPRACY.c: undefined reference to `HB_FUN_TIMEVALID'
> D:/harbour/lib/win/mingw/libhomar.a(WORM.o)(.data+0x2d8):WORM.c:  
> undefined reference to `HB_FUN_ADDASCII'
> D:/harbour/lib/win/mingw/libhomar.a(DOS_SHEL.o)(.data 
> +0x78):DOS_SHEL.c: undefined reference to `HB_FUN_EXENAME'
> D:/harbour/lib/win/mingw/libhomar.a(OBRAZ.o)(.data+0xd8):OBRAZ.c:  
> undefined reference to `HB_FUN_NTOCOLOR'
> D:/harbour/lib/win/mingw/libhomar.a(EKRAN.o)(.data+0x108):EKRAN.c:  
> undefined reference to `HB_FUN_NTOCOLOR'
> D:/harbour/lib/win/mingw/libhomar.a(EDDOKZB.o)(.data 
> +0x508):EDDOKZB.c: undefined reference to `HB_FUN_SETLASTKEY'
> D:/harbour/lib/win/mingw/libhomar.a(KALENDAR.o)(.data 
> +0x3a8):KALENDAR.c: undefined reference to `HB_FUN_TIMEVALID'
> D:/harbour/lib/win/mingw/libhomar.a(KALENDAR.o)(.data 
> +0x3d8):KALENDAR.c: undefined reference to `HB_FUN_SETTIME'
> D:/harbour/lib/win/mingw/libhomar.a(KALENDAR.o)(.data 
> +0x3e8):KALENDAR.c: undefined reference to `HB_FUN_SETDATE'
> D:/harbour/lib/win/mingw/libhomar.a(KOLOR.o)(.data+0x208):KOLOR.c:  
> undefined reference to `HB_FUN_COLORTON'
> D:/harbour/lib/win/mingw/libhomar.a(KOLOR.o)(.data+0x238):KOLOR.c:  
> undefined reference to `HB_FUN_NTOCOLOR'
> D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text 
> +0x2e1a):dbfntx1.c: undefined reference to `hb_dbfLockIdxFile'
> D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text 
> +0x2e5c):dbfntx1.c: undefined reference to `hb_dbfLockIdxFile'
> D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text 
> +0x2f80):dbfntx1.c: undefined reference to `hb_dbfLockIdxFile'
> D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text 
> +0x3003):dbfntx1.c: undefined reference to `hb_dbfLockIdxFile'
> D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text 
> +0x3248):dbfntx1.c: undefined reference to `hb_dbfLockIdxFile'
> D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text 
> +0x34e8):dbfntx1.c: more undefined references to `hb_dbfLockIdxFile'  
> follow
> D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text 
> +0x13647):dbfntx1.c: undefined reference to `hb_dbfLockIdxGetData'
> D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text 
> +0x13ec5):dbfntx1.c: undefined reference to `hb_dbfLockIdxFile'
> D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text 
> +0x14798):dbfntx1.c: undefined reference to `hb_dbfLockIdxFile'
> D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text 
> +0x14f31):dbfntx1.c: undefined reference to `hb_dbfLockIdxFile'
> D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text 
> +0x151df):dbfntx1.c: undefined reference to `hb_dbfLockIdxFile'
> D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text 
> +0x152f9):dbfntx1.c: undefined reference to `hb_dbfLockIdxFile'
> D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text 
> +0x153c6):dbfntx1.c: more undefined references to  
> `hb_dbfLockIdxFile' follow
> D:/harbour/lib/win/mingw/librddntx.a(dbfntx1.o)(.text 
> +0x173dd):dbfntx1.c: undefined reference to `HB_FUN__DBF'
> D:/harbour/lib/win/mingw/librddcdx.a(dbfcdx1.o)(.text 
> +0x2b59):dbfcdx1.c: undefined reference to `hb_dbfLockIdxFile'
> D:/harbour/lib/win/mingw/librddcdx.a(dbfcdx1.o)(.text 
> +0x2c95):dbfcdx1.c: undefined reference to `hb_dbfLockIdxFile'
> D:/harbour/lib/win/mingw/librddcdx.a(dbfcdx1.o)(.text 
> +0x300c):dbfcdx1.c: undefined reference to `hb_dbfLockIdxFile'
> D:/harbour/lib/win/mingw/librddcdx.a(dbfcdx1.o)(.text 
> +0x33e3):dbfcdx1.c: undefined reference to `hb_dbfLockIdxFile'
> D:/harbour/lib/win/mingw/librddcdx.a(dbfcdx1.o)(.text 
> +0x13c94):dbfcdx1.c: undefined reference to `hb_dbfLockIdxGetData'
> D:/harbour/lib/win/mingw/librddcdx.a(dbfcdx1.o)(.text 
> +0x1b9cd):dbfcdx1.c: undefined reference to `HB_FUN__DBF'
> D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text 
> +0x145):dbffpt1.c: undefined reference to `hb_dbfGetEGcode'
> D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text 
> +0x276f):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
> D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text 
> +0x2a41):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
> D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text 
> +0x46dc):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
> D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text 
> +0x4815):dbffpt1.c: undefined reference to `hb_dbfSetMemoData'
> D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text 
> +0x4d7d):dbffpt1.c: undefined reference to `hb_sxPtoD'
> D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text 
> +0x551c):dbffpt1.c: undefined reference to `hb_sxDtoP'
> D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text 
> +0x55bd):dbffpt1.c: undefined reference to `hb_sxDtoP'
> D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text 
> +0x5a3f):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
> D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text 
> +0x6af3):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
> D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text 
> +0x6ca8):dbffpt1.c: undefined reference to `hb_dbfSetMemoData'
> D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text 
> +0x6e5f):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
> D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text 
> +0x6f36):dbffpt1.c: undefined reference to `hb_dbfSetMemoData'
> D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text 
> +0x74a0):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
> D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text 
> +0x92a1):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
> D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text 
> +0x9312):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
> D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text 
> +0x9353):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
> D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text 
> +0x94af):dbffpt1.c: undefined reference to `hb_dbfGetMemoData'
> D:/harbour/lib/win/mingw/librddfpt.a(dbffpt1.o)(.text 
> +0x9c7d):dbffpt1.c: undefined reference to `HB_FUN__DBF'
> collect2: ld returned 1 exit status
> hbmk2: Error: Running linker. 1
> gcc.exe homar.o braki.o hbmk_llbci2.o    -mwindows -lgtwvg -lhbhpdf - 
> llibhpdf -llibpng -lsddodbc -lhbodbc -lrddsql -lrddado -lodbc32 - 
> lhbct -lho
> mar -lhbwin -lhbextern -lhbdebug -lhbvm -lhbrtl -lhblang -lhbcpage - 
> lgtcgi -lgtpca -lgtstd -lgtwin -lgtwvt -lgtgui -lhbrdd -lhbusrrdd - 
> lhbhsx -l
> hbsix -lrddntx -lrddcdx -lrddfpt -lhbuddall -lrddnsx -lhbrtl -lhbvm - 
> lhbmacro -lhbcplr -lhbpp -lhbcommon -lhbpcre -lhbzlib -lkernel32 - 
> luser32 -
> lgdi32 -ladvapi32 -lws2_32 -lwinspool -lcomctl32 -lcomdlg32 - 
> lshell32 -luuid -lole32 -loleaut32 -lmpr -lwinmm -lmapi32 -limm32 - 
> lmsimg32 -lwinin
> et  -ohomar.exe -LD:/harbour/lib/win/mingw
>
>
> tools library is in folder (D:\harbour\lib\win\mingw\libhbct.a)
> ? 
> ? 
> ? 
> ? 
> ? 
> ? 
> ? 
> ???????????????????????  
> Find: *ct
> ?    Name    ?  Size   ?  Date  ?Time ?
> ?..          ?<UP--DIR>?06-09-09?07:58?
> ?libhbct    a?  269 758?05-09-09?22:58?
>
>
> What I make bad ?
>
> Regards,
> Marek Horodyski
>
>
>
> ----------------------------------------------------------------------
> EuroBasket 2009 &#8211; grasz w kosza? Poczytaj o rozgrywkach.
> Kliknij >>> http://link.interia.pl/f2329
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vszakats at users.sourceforge.net  Sun Sep  6 04:28:39 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun Sep  6 04:28:45 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12418] trunk/harbour
Message-ID: <E1MkD71-00030T-9Y@3kljzd1.ch3.sourceforge.com>

Revision: 12418
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12418&view=rev
Author:   vszakats
Date:     2009-09-06 08:28:38 +0000 (Sun, 06 Sep 2009)

Log Message:
-----------
2009-09-06 10:21 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    + Readded lib grouping by default for all targets which
      require it: mingw, linux/gcc, bsd/gcc, dos/djgpp.
    + Added option '-nolibgrouping' to disable lib grouping
      for advanced users who'd like to streamline link process.
      Maybe once we manage to make this smooth for everyone,
      it will become the default.
    + Added option '-nomiscsyslib' to disable default list
      of extra system libs (on win/wce platforms currently).
      This will speed up link process but you should in turn
      supply these libs manually (even for our own contribs).

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sun Sep  6 05:11:30 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun Sep  6 05:11:36 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12419] trunk/harbour
Message-ID: <E1MkDmU-0008BJ-RA@bj8yhf1.ch3.sourceforge.com>

Revision: 12419
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12419&view=rev
Author:   vszakats
Date:     2009-09-06 09:11:29 +0000 (Sun, 06 Sep 2009)

Log Message:
-----------
2009-09-06 11:08 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * harbour-win-spec
  * harbour-wce-spec
  * harbour.spec
  * include/hbver.h
  * config/global.mk
    * Changed version to 2.0.0beta3 (from 2.0.0beta2)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/global.mk
    trunk/harbour/harbour-wce-spec
    trunk/harbour/harbour-win-spec
    trunk/harbour/harbour.spec
    trunk/harbour/include/hbver.h


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From mbelgrano at deltain.it  Sun Sep  6 06:11:44 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Sep  6 06:12:11 2009
Subject: [Harbour] Windows 7 64 bit
Message-ID: <609353e70909060311l658f79ceq4874762f831aaf64@mail.gmail.com>

I want try harbour on windows 7 64 bit (RTM version) with mingw e msvc
need follow tool:
mingw32-make   afaik the only available
mingw-w64_x86-64_mingw32_4.4.0-1.zip download from
http://sourceforge.net/projects/mingw-w64/files/
-----------------
   set OLDP=%PATH%
?? set PATH=C:\devl\mingw\bin;%PATH%
?? ? ?mingw32-make
      --- MinGW GCC for Windows x86-64 (requires preceding build for
native target)
      set PATH=C:\mingw64\bin;%OLDP%
      mingw32-make

rddads is  not available for 64 bit ?
How can i make a win32 executable and how a 64 bit?

I want also document required step  with viktor's distribution

--
Massimo Belgrano
From harbour.01 at syenar.hu  Sun Sep  6 06:33:06 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun Sep  6 06:33:12 2009
Subject: [Harbour] cygwin gttrm build error
Message-ID: <18d502870909060333v76d1a4fbpcac4c283fd4ee0c3@mail.gmail.com>

---
! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh
! HB_HOST_PLAT: win (x86)  HB_SHELL: sh
! HB_PLATFORM: win (x86) (autodetected)
! HB_COMPILER: cygwin (autodetected: /usr/bin/)
! Component: 'openssl' found in /usr/include
! Component: 'gpm' not supported on win platform
! Component: 'slang' not found
! Component: 'curses' found in /usr/include
! Component: 'x11' found in /usr/include
! Component: 'wattcp/watt-32' not supported on win platform
! HB_INSTALL_PREFIX automatically set to: /cygdrive/c/work/harbour/harbour
gcc  -I. -I../../../../../../include  -Wall -W -O3
-fomit-frame-pointer -march=i586 -mtune=pentiumpro   -ogttrm.o -c
../../../gttrm.c
../../../gttrm.c: In function `get_inch':
../../../gttrm.c:1176: error: storage size of 'tv' isn't known
../../../gttrm.c:1218: warning: implicit declaration of function `select'
../../../gttrm.c:1176: warning: unused variable `tv'
../../../gttrm.c: In function `hb_gt_trm_AnsiGetCursorPos':
../../../gttrm.c:1841: warning: unused variable `iTODO'
make[1]: *** [gttrm.o] Error 1
---

Brgds,
Viktor
From druzus at acn.waw.pl  Sun Sep  6 06:45:34 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep  6 06:45:39 2009
Subject: [Harbour] demoxbp segfault in Fedora 11
In-Reply-To: <FECFBC79-7C28-4C1D-8775-E4F31A4DB617@syenar.hu>
References: <9257026e0909032316h2488ffb1w29db3dad85dcb246@mail.gmail.com>
	<3534837719855956578@unknownmsgid>
	<9257026e0909050202t27cfcae2mbbe9ae4631ec3c5f@mail.gmail.com>
	<73109AC2-0C8D-4779-AF7A-20F25244A387@syenar.hu>
	<12826C8A-D98E-4185-89D0-F2B199657E6D@syenar.hu>
	<FECFBC79-7C28-4C1D-8775-E4F31A4DB617@syenar.hu>
Message-ID: <20090906104534.GA20927@uran.home.aster.pl>

On Sat, 05 Sep 2009, Szak?ts Viktor wrote:

Hi,

>> Yes, it is normal to exclude the fulstatic case from shared, static and
>> fulstatic test cases. But back to the original issue, why have we 
>> different
> I'm not sure I understand the issue here. I'd still be interested
> how can it happen that gpm is detected at build time but missing
> at hbmk2 time.

We do not link anything in core code using full static mode so we
do not know if it works.
I guess that gpm-devel is installed only with shared library and
libgpm.a is not installed.

>> behavior between shared and static builds? The same problem appears with
>> demoqt buils. It's time to go deeper in these issues.
> No idea, I hope someone will be able to give some hints.

Not all libraries are installed in static mode. Please also remember
that not all features can work in static mode so full static binaries
may not be fully functional.

best regards,
Przemek
From vszakats at users.sourceforge.net  Sun Sep  6 06:46:54 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun Sep  6 06:47:04 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12420] trunk/harbour
Message-ID: <E1MkFGo-0008Bd-Bu@d5vjzd1.ch3.sourceforge.com>

Revision: 12420
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12420&view=rev
Author:   vszakats
Date:     2009-09-06 10:46:51 +0000 (Sun, 06 Sep 2009)

Log Message:
-----------
2009-09-06 12:46 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * contrib/hbqt/hbqts/Makefile
    ! Fixed missing vpath setting.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbqt/hbqts/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sun Sep  6 07:00:23 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun Sep  6 07:00:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12421] trunk/harbour
Message-ID: <E1MkFTr-0008SG-5t@d5vjzd1.ch3.sourceforge.com>

Revision: 12421
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12421&view=rev
Author:   vszakats
Date:     2009-09-06 11:00:21 +0000 (Sun, 06 Sep 2009)

Log Message:
-----------
2009-09-06 12:55 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    + Added detection of multi-host dir layout: /bin/<plat>/hbmk2.exe 
      (not yet used)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sun Sep  6 07:49:40 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun Sep  6 07:49:47 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12422] trunk/harbour
Message-ID: <E1MkGFY-0002mB-1i@bj8yhf1.ch3.sourceforge.com>

Revision: 12422
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12422&view=rev
Author:   vszakats
Date:     2009-09-06 11:49:38 +0000 (Sun, 06 Sep 2009)

Log Message:
-----------
2009-09-06 13:48 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  + tests/tb1.prg
    + Added Przemek's TBrowse() test code.

  * config/global.mk
    ! Fixed another typo in yesterday's modifications. (non-critical)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/global.mk

Added Paths:
-----------
    trunk/harbour/tests/tb1.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From mbelgrano at deltain.it  Sun Sep  6 09:49:27 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Sep  6 09:49:54 2009
Subject: [Harbour] will harbour run on present and future os for small 
	device?
In-Reply-To: <BD3DC30F-CF33-4548-953B-C0C275C345DB@syenar.hu>
References: <609353e70907110049k3172b59fsf03f4b4359c0fc43@mail.gmail.com> 
	<BD3DC30F-CF33-4548-953B-C0C275C345DB@syenar.hu>
Message-ID: <609353e70909060649v108bee87sf9d7708379b49ade@mail.gmail.com>

wich step are neccessary for have compiler frontends: .NET CLI and JAVA.


2009/7/11 Viktor Szak?ts <harbour.01@syenar.hu>:
>> Android
>> http://www.android.com/
>
> It's Java based, so chances aren't very high.
>
>> Iphone OS
>> http://en.wikipedia.org/wiki/IPhone_OS
>
> Probably possible. The basics are there already:
> Harbour already supports Darwin and ARM CPU.
>
>> Google chrome os
>> http://en.wikipedia.org/wiki/Google_Chrome_OS
>
> Since we don't know much about it, it's hard to tell.
> Anyhow Harbour already supports Linux and ARM, so it
> probably will.
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From gvarona at ec-red.com  Sun Sep  6 11:27:53 2009
From: gvarona at ec-red.com (gvarona)
Date: Sun Sep  6 11:19:32 2009
Subject: [Harbour] Exist PICTURE for password with GET?
Message-ID: <20090906152753.29705.qmail@ml110b.qnet.com.pe>

Best Regards
GVS
---------------------------------------------------------------
EC Red Internet gr@tis
Inscr?bete en www.ec-red.com
From calimero22 at freemail.it  Sun Sep  6 11:33:09 2009
From: calimero22 at freemail.it (calimero22@freemail.it)
Date: Sun Sep  6 11:33:15 2009
Subject: [Harbour] Exist PICTURE for password with GET?
Message-ID: <20090906153309.AA29C6805557@eva124.dadanet.it>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090906/e75af9ff/attachment.html
From harbour.01 at syenar.hu  Sun Sep  6 11:39:46 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Sep  6 11:39:53 2009
Subject: [Harbour] Exist PICTURE for password with GET?
In-Reply-To: <20090906152753.29705.qmail@ml110b.qnet.com.pe>
References: <20090906152753.29705.qmail@ml110b.qnet.com.pe>
Message-ID: <011271D9-7140-4518-B15E-60E1FBD4A597@syenar.hu>

Harbour has an extended GET class called HB_GET, which
has this functionality. It can be enabled via ::hideInput( .T. )
method call.

Brgds,
Viktor

On 2009.09.06., at 5:27, gvarona wrote:

> Best Regards
> GVS
> ---------------------------------------------------------------
> EC Red Internet gr@tis
> Inscr?bete en www.ec-red.com
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From gvarona at ec-red.com  Sun Sep  6 12:06:23 2009
From: gvarona at ec-red.com (gvarona)
Date: Sun Sep  6 11:57:57 2009
Subject: [Harbour] Exist PICTURE for password with GET?
In-Reply-To: <011271D9-7140-4518-B15E-60E1FBD4A597@syenar.hu>
References: <20090906152753.29705.qmail@ml110b.qnet.com.pe>
	<011271D9-7140-4518-B15E-60E1FBD4A597@syenar.hu>
Message-ID: <20090906160623.31494.qmail@ml110b.qnet.com.pe>

Ok.
Thanks Viktor y Calimero22 

Best Regards
GVS 


Viktor Szak?ts escribi?: 

> Harbour has an extended GET class called HB_GET, which
> has this functionality. It can be enabled via ::hideInput( .T. )
> method call. 
> 
> Brgds,
> Viktor 
> 
> On 2009.09.06., at 5:27, gvarona wrote: 
> 
>> Best Regards
>> GVS
>> ---------------------------------------------------------------
>> EC Red Internet gr@tis
>> Inscr?bete en www.ec-red.com
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
---------------------------------------------------------------
EC Red Internet gr@tis
Inscr?bete en www.ec-red.com
From vszakats at users.sourceforge.net  Sun Sep  6 12:33:18 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun Sep  6 12:33:24 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12423] trunk/harbour
Message-ID: <E1MkKg2-0008G5-Ck@bj8yhf1.ch3.sourceforge.com>

Revision: 12423
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12423&view=rev
Author:   vszakats
Date:     2009-09-06 16:33:17 +0000 (Sun, 06 Sep 2009)

Log Message:
-----------
2009-09-06 18:32 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.pt_BR.po
  * utils/hbmk2/hbmk2.hu_HU.po
  * utils/hbmk2/hbmk2.prg
    + Added '@.clp' to cmdline template in help.
    ! Fixed double linefeeds in output (visible in dos builds).
    ! Fixed syntax of generated .rc file for os2 targets.
      I can't check but the app icons still don't seem to
      be added, so this will need further attention from
      real OS/2 users.

  * config/detect.mk
  * config/dos/watcom.mk
  * config/dos/djgpp.mk
    ! Fixed to properly set watt lib location even when backslash
      is used in HB_INC_WATT setting.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/detect.mk
    trunk/harbour/config/dos/djgpp.mk
    trunk/harbour/config/dos/watcom.mk
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.po
    trunk/harbour/utils/hbmk2/hbmk2.prg
    trunk/harbour/utils/hbmk2/hbmk2.pt_BR.po


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From gvarona at ec-red.com  Sun Sep  6 13:03:45 2009
From: gvarona at ec-red.com (gvarona)
Date: Sun Sep  6 12:55:19 2009
Subject: [Harbour] Exist PICTURE for password with GET?
In-Reply-To: <011271D9-7140-4518-B15E-60E1FBD4A597@syenar.hu>
References: <20090906152753.29705.qmail@ml110b.qnet.com.pe>
	<011271D9-7140-4518-B15E-60E1FBD4A597@syenar.hu>
Message-ID: <20090906170345.24469.qmail@ml110b.qnet.com.pe>

Viktor Szak?ts escribi?: 

> Harbour has an extended GET class called HB_GET, which
> has this functionality. It can be enabled via ::hideInput( .T. )
> method call.

Hi Viktor, How use this extended?
I have this, but not work. 

PROCEDURE Main
LOCAL cVar := SPAC(10)
oGet := HB_GET()
oGet:name := "cVar"
oGet:row := 10
oGet:col := 10
oGet:hideInput := .T.
oGet:style := "#"
? oget:name
? oget:style
wait
READ
READMODAL({oGet})
? cVar
return 

Help please
TIA 

Best regards
GVS
---------------------------------------------------------------
EC Red Internet gr@tis
Inscr?bete en www.ec-red.com
From abe.buch at att.net  Sun Sep  6 12:56:47 2009
From: abe.buch at att.net (AbeB)
Date: Sun Sep  6 12:56:52 2009
Subject: [Harbour] does the get system support a mouse?
Message-ID: <1252256207163-3593190.post@n2.nabble.com>


Hi All,

How can I make my app mouseable? in gtwin.
clicking on a get to make it the active get, double clicking to put the
cursor on that position within that get?


Thanks,
Abe
-- 
View this message in context: http://n2.nabble.com/does-the-get-system-support-a-mouse-tp3593190p3593190.html
Sent from the harbour-devel mailing list archive at Nabble.com.
From harbour.01 at syenar.hu  Sun Sep  6 13:11:18 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun Sep  6 13:11:27 2009
Subject: [Harbour] Harbour 2.0.0beta3 (unofficial) available now
Message-ID: <18d502870909061011n328e50afhbe802e356bbf2642@mail.gmail.com>

Hi All,

Harbour 2.0.0beta3 (r12422) source archives and Windows binary
releases are available for download here:
   http://syenar.hu/harbour/

Make sure to check INSTALL doc "QUICK START" section and visit
our user forums at:
   http://sourceforge.net/apps/phpbb/harbour-project/

Release notes:
-----------------------------------------------------------------------
Unified Windows release for most supported compilers and
x86, x64, WinCE/ARM, MS-DOS, OS/2, Linux target platforms.

Installed size: 232MB (46MB - 340MB)

The default installation will install MinGW compiler + x86 static and
shared libs, MSVC and BCC x86 libs and examples.

Options: x86 shared tools, x64 shared tools, MinGW x64 and
WinCE-ARM libs, MSVC x64 libs, Open Watcom x86 libs,
shared x64/WinCE-ARM libs, MS-DOS 32-bit DJGPP libs,
OS/2 (watcom) libs, Linux (watcom) libs.

Usage:
1) install/unpack to any directory (C:\hb20)
2) go to bin dir (optional if you specify path for hbmk2)
3) For x86 executable, type: 'hbmk2 ../tests/hello.prg'
4) For x64 executable, type: 'hbmk2 ../tests/hello.prg -compiler=mingw64'
   [needs mingw64 to be installed beforehand]
5) For WinCE/ARM executable, type: 'hbmk2 ../tests/hello.prg -platform=wce'
   [needs cegcc to be installed beforehand]
6) For MS-DOS executable, type: 'hbmk2 ../tests/hello.prg -platform=dos'
   [needs DJGPP to be installed beforehand]
7) For Linux executable, type: 'hbmk2 ../tests/hello.prg -platform=linux'
   [needs OpenWatcom to be installed beforehand]

Tool/lib versions used to create this package:
-----------------------------------------------------------------------

   Compiler tools
   --------------

   MinGW 4.4.1 (included)
   MinGW w64 4.5.0
   MinGW CEGCC 4.1.0
   DJGPP 4.4.1 (2.04b1)
   MSVC 2008 SP1
   Open Watcom C++ 1.8
   Borland C++ 5.5.1

   External lib dependencies
   -------------------------

   ACE 9.10
   Allegro 4.2.2
   Blat 2.6.2
   libcurl 7.19.6
   Firebird 2.1.2
   FreeImage 3.12.0
   GD 2.0.35
   MySQL 5.1.35
   OpenSSL 0.9.8k
   PostgreSQL 8.3.7
   QT 4.5.2
   WATTCG 2.2.10

Changes since previous (2.0.0beta2 20090624) release:
-----------------------------------------------------------------------

- Harbour updated to r12422 (from r11508)
- Rewritten socket library.
- Fixed remaining Clipper compatibility issues (@.clp, SET PROC TO, DO
WITH, etc)
- Added replaceable core file I/O layer.
- Reworked build system with integrated dynlib creation, cross-platform
  support, compiler and external component autodetection and much more.
- MinGW updated to 4.4.1
- MinGW x64 updated to 4.5.0 (20090905)
- Finalizing ActiveX/OLE2 support.
- Timestamp/datetime support in core.
- Added MT support for dos platform.
- Added socket support for dos platform (via WATTCP lib).
- Added hbnetio lib client/server file I/O implementation.
- hbxbp lib about feature complete.
- wce/msvcarm target improvements, sunpro compiler support.
- hbssl OpenSSL wrapper lib.
- SSL support in hbtip lib.
- Serial communication fixes in hbwin/hbtpathy on win platform.
- Lots of other additions and some fixes.
- Changed default install path to be 'hb20' rather than 'harbour20',
  to avoid long filenames.
- Replaced mingw64 built x64 shared tools with msvc64 builds, as
  the former didn't work.
- Included hbqt lib which links against static QT libs.

Changes since previous (2.0.0beta1 20090609) release:
-----------------------------------------------------------------------
- Harbour updated to r11508 (from r11287)
- New User's Forum linked
- upx compressor included in install package
- DOS cross build libs included in install package
- preparation to host 3rd party packages inside Harbour directory tree
- new "zero-conf" library install system in preparation
- hbmk2: lots of minor refinements, support for all free compilers
  in embedded form, support spaces in filenames/paths, all Harbour
  supported C compilers have now complete support in hbmk2
- DOS support tested and required fixes applied
- embedded compilers moved to 'comp' subdir
- support for latest MinGW x64 and MSVS 2010 compilers
- extended INSTALL with new examples and app build quick guide
- icon for installer and hbrun tool
- hbxbp and hbqt enhancements
- hbwin refinements and better compatibility
- new uhttpd2 sessioned HTTP server
- C++ build support for all compilers, new HB_WAEVAL() function,
  new xpp (Xbase++ compatibility) lib, .hrb loading enhancements
- DBU, RL, SuperLib fixes.
- MinGW64 updated to 4.4.1
- There were a few changes in this release which may require updating
  your source code (hb_par*()/hb_stor*() in .c files and GTWVG WIN_*()
  function in .prg files). Search for 'incompatible' word in ChangeLog
  for more.
-----------------------------------------------------------------------

Changes since previous (1.1.0dev 20090602) release:
-----------------------------------------------------------------------
- Harbour updated to r11287 (from r11179)
- all contrib tests included in install package
- All 3rd party packages upgraded to latest version.
- hbmk2: project support, new file extensions, fixes, Harbour 1.0.x
  support.
- further simplified/updated build process and instructions
- hbqt many enhancements
- almost full xhb compatibility
- 'terminal' fixed in examples
- source formatter, Cl*pper RL tool, legacy hbmake added
- MT Xbase++ compatibility
-----------------------------------------------------------------------

Changes since previous (1.1.0dev 20090408) release:
-----------------------------------------------------------------------
- Harbour updated to r11179 (from r10819)
- Updated hbmk2 (filter issues + experimental Harbour 1.0.x support)
- Included contrib tests/utils
- Full and now standalone 'examples'
- 'tests' with subdirs included.
- No longer included pocc/pocc64/poccarm libs.
- QT updated to 4.5.1
- MinGW updated to 4.4.0

--
Brgds,
Viktor Szakats
From gvarona at ec-red.com  Sun Sep  6 13:23:33 2009
From: gvarona at ec-red.com (gvarona)
Date: Sun Sep  6 13:15:08 2009
Subject: [Harbour] does the get system support a mouse?
In-Reply-To: <1252256207163-3593190.post@n2.nabble.com>
References: <1252256207163-3593190.post@n2.nabble.com>
Message-ID: <20090906172333.10092.qmail@ml110b.qnet.com.pe>

AbeB escribi?: 

> 
> Hi All,
> > How can I make my app mouseable? in gtwin.
> clicking on a get to make it the active get, double clicking to put the
> cursor on that position within that get?

#include "Inkey.ch"
PROCEDURE MAIN
LOCAL cVar1 := cVar2 := cVar3 := SPAC(10)
SET(_SET_EVENTMASK, INKEY_ALL)
MSETCURSOR(.T.)
@ 10, 20 SAY "Var 1:" GET cVar1
@ 11, 20 SAY "Var 2:" GET cVar2
@ 12, 20 SAY "Var 3:" GET cVar3
READ
RETURN 

Best Regards
GVS
---------------------------------------------------------------
EC Red Internet gr@tis
Inscr?bete en www.ec-red.com
From calimero22 at freemail.it  Sun Sep  6 13:46:40 2009
From: calimero22 at freemail.it (calimero22@freemail.it)
Date: Sun Sep  6 13:46:46 2009
Subject: [Harbour] Harbour 2.0.0beta3 (unofficial) available now
Message-ID: <20090906174640.E7C016800292@eva105.dadanet.it>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090906/387b33ae/attachment.html
From harbour.01 at syenar.hu  Sun Sep  6 14:05:09 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Sep  6 14:05:19 2009
Subject: [Harbour] Harbour 2.0.0beta3 (unofficial) available now
In-Reply-To: <20090906174640.E7C016800292@eva105.dadanet.it>
References: <20090906174640.E7C016800292@eva105.dadanet.it>
Message-ID: <E7453087-6BF5-45CE-8ECD-6AC4A4CBB187@syenar.hu>

These look like false alarms to me (or something local to your system).

BTW exact same dlltool.exe and addr2line.exe is included in previous
betas, including the official one available from sf.net.

Brgds,
Viktor

On 2009.09.06., at 7:46, calimero22@freemail.it wrote:

>
> Hi All
> I have installet Harbour 2.0.0beta 3.
> It works very fine.
> But during installation, my PANDA ANTIVIRUS shown me the following  
> suspicius VIRUS:
>
> --------------------------------------- Suspicious file detected  
> Location: C:\harbour20\mingw\mingw32\bin\dlltool.exe 06/09/2009  
> 19.36.44 Neutralized
> ---------------------------------------
> Suspicious file detected Location: C:\harbour20\comp\mingw 
> \mingw32\bin\dlltool.exe 06/09/2009 19.31.49 Neutralized
> ---------------------------------------
> Suspicious file detected Location: C:\harbour20\comp\mingw\bin 
> \addr2line.exe 06/09/2009 19.31.17 Neutralized
> ---------------------------------------
> Suspicious file detected Location: C:\harbour20\comp\mingw\bin 
> \dlltool.exe 06/09/2009 19.31.17 Neutralized  
> ---------------------------------------
> Regards
> Giovanni Di Maria
>
>
>
>
>
>
> Hi All,
>
> Harbour 2.0.0beta3 (r12422) source archives and Windows binary
> releases are available for download here:
> http://syenar.hu/harbour/
>
> Make sure to check INSTALL doc "QUICK START" section and visit
> our user forums at:
> http://sourceforge.net/apps/phpbb/harbour-project/
>
> Release notes:
> -----------------------------------------------------------------------
> Unified Windows release for most supported compilers and
> x86, x64, WinCE/ARM, MS-DOS, OS/2, Linux target platforms.
>
> Installed size: 232MB (46MB - 340MB)
>
> The default installation will install MinGW compiler + x86 static and
> shared libs, MSVC and BCC x86 libs and examples.
>
> Options: x86 shared tools, x64 shared tools, MinGW x64 and
> WinCE-ARM libs, MSVC x64 libs, Open Watcom x86 libs,
> shared x64/WinCE-ARM libs, MS-DOS 32-bit DJGPP libs,
> OS/2 (watcom) libs, Linux (watcom) libs.
>
> Usage:
> 1) install/unpack to any directory (C:\hb20)
> 2) go to bin dir (optional if you specify path for hbmk2)
> 3) For x86 executable, type: 'hbmk2 ../tests/hello.prg'
> 4) For x64 executable, type: 'hbmk2 ../tests/hello.prg - 
> compiler=mingw64'
> [needs mingw64 to be installed beforehand]
> 5) For WinCE/ARM executable, type: 'hbmk2 ../tests/hello.prg - 
> platform=wce'
> [needs cegcc to be installed beforehand]
> 6) For MS-DOS executable, type: 'hbmk2 ../tests/hello.prg - 
> platform=dos'
> [needs DJGPP to be installed beforehand]
> 7) For Linux executable, type: 'hbmk2 ../tests/hello.prg - 
> platform=linux'
> [needs OpenWatcom to be installed beforehand]
>
> Tool/lib versions used to create this package:
> -----------------------------------------------------------------------
>
> Compiler tools
> --------------
>
> MinGW 4.4.1 (included)
> MinGW w64 4.5.0
> MinGW CEGCC 4.1.0
> DJGPP 4.4.1 (2.04b1)
> MSVC 2008 SP1
> Open Watcom C++ 1.8
> Borland C++ 5.5.1
>
> External lib dependencies
> -------------------------
>
> ACE 9.10
> Allegro 4.2.2
> Blat 2.6.2
> libcurl 7.19.6
> Firebird 2.1.2
> FreeImage 3.12.0
> GD 2.0.35
> MySQL 5.1.35
> OpenSSL 0.9.8k
> PostgreSQL 8.3.7
> QT 4.5.2
> WATTCG 2.2.10
>
> Changes since previous (2.0.0beta2 20090624) release:
> -----------------------------------------------------------------------
>
> - Harbour updated to r12422 (from r11508)
> - Rewritten socket library.
> - Fixed remaining Clipper compatibility issues (@.clp, SET PROC TO, DO
> WITH, etc)
> - Added replaceable core file I/O layer.
> - Reworked build system with integrated dynlib creation, cross- 
> platform
> support, compiler and external component autodetection and much more.
> - MinGW updated to 4.4.1
> - MinGW x64 updated to 4.5.0 (20090905)
> - Finalizing ActiveX/OLE2 support.
> - Timestamp/datetime support in core.
> - Added MT support for dos platform.
> - Added socket support for dos platform (via WATTCP lib).
> - Added hbnetio lib client/server file I/O implementation.
> - hbxbp lib about feature complete.
> - wce/msvcarm target improvements, sunpro compiler support.
> - hbssl OpenSSL wrapper lib.
> - SSL support in hbtip lib.
> - Serial communication fixes in hbwin/hbtpathy on win platform.
> - Lots of other additions and some fixes.
> - Changed default install path to be 'hb20' rather than 'harbour20',
> to avoid long filenames.
> - Replaced mingw64 built x64 shared tools with msvc64 builds, as
> the former didn't work.
> - Included hbqt lib which links against static QT libs.
>
> Changes since previous (2.0.0beta1 20090609) release:
> -----------------------------------------------------------------------
> - Harbour updated to r11508 (from r11287)
> - New User's Forum linked
> - upx compressor included in install package
> - DOS cross build libs included in install package
> - preparation to host 3rd party packages inside Harbour directory tree
> - new "zero-conf" library install system in preparation
> - hbmk2: lots of minor refinements, support for all free compilers
> in embedded form, support spaces in filenames/paths, all Harbour
> supported C compilers have now complete support in hbmk2
> - DOS support tested and required fixes applied
> - embedded compilers moved to 'comp' subdir
> - support for latest MinGW x64 and MSVS 2010 compilers
> - extended INSTALL with new examples and app build quick guide
> - icon for installer and hbrun tool
> - hbxbp and hbqt enhancements
> - hbwin refinements and better compatibility
> - new uhttpd2 sessioned HTTP server
> - C++ build support for all compilers, new HB_WAEVAL() function,
> new xpp (Xbase++ compatibility) lib, .hrb loading enhancements
> - DBU, RL, SuperLib fixes.
> - MinGW64 updated to 4.4.1
> - There were a few changes in this release which may require updating
> your source code (hb_par*()/hb_stor*() in .c files and GTWVG WIN_*()
> function in .prg files). Search for 'incompatible' word in ChangeLog
> for more.
> -----------------------------------------------------------------------
>
> Changes since previous (1.1.0dev 20090602) release:
> -----------------------------------------------------------------------
> - Harbour updated to r11287 (from r11179)
> - all contrib tests included in install package
> - All 3rd party packages upgraded to latest version.
> - hbmk2: project support, new file extensions, fixes, Harbour 1.0.x
> support.
> - further simplified/updated build process and instructions
> - hbqt many enhancements
> - almost full xhb compatibility
> - 'terminal' fixed in examples
> - source formatter, Cl*pper RL tool, legacy hbmake added
> - MT Xbase++ compatibility
> -----------------------------------------------------------------------
>
> Changes since previous (1.1.0dev 20090408) release:
> -----------------------------------------------------------------------
> - Harbour updated to r11179 (from r10819)
> - Updated hbmk2 (filter issues + experimental Harbour 1.0.x support)
> - Included contrib tests/utils
> - Full and now standalone 'examples'
> - 'tests' with subdirs included.
> - No longer included pocc/pocc64/poccarm libs.
> - QT updated to 4.5.1
> - MinGW updated to 4.4.0
>
> -- 
> Brgds,
> Viktor Szakats
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
> --- Dada Music Movement, tutta la musica che vuoi! ---

From hbco2 at sbcglobal.net  Sun Sep  6 15:18:21 2009
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Sun Sep  6 15:18:31 2009
Subject: [Harbour] Harbour 2.0.0beta3 (unofficial) available now
References: <18d502870909061011n328e50afhbe802e356bbf2642@mail.gmail.com>
Message-ID: <000a01ca2f26$cdb60000$0303a8c0@hbco>

Hi Victor,

Thank you so much!

Installed the default hb2.0 beta (checked the tools option at the top of the
list) in a WindowsXP system.
Changed the default path from /hb20 to /drived/hdv/hb20.

Compilation of the example file guestbk results in the following linking
errors:

guestbk.o:guestbk.c:(.data+0x48): undefined reference to `HB_FUN_TINIFILE'
guestbk.o:guestbk.c:(.data+0x58): undefined reference to `HB_FUN_THTML'

Bill


From: Viktor Szak?ts
To: Harbour Project Main Developer List.
Sent: Sunday, September 06, 2009 10:11 AM
Subject: [Harbour] Harbour 2.0.0beta3 (unofficial) available now


Hi All,

Harbour 2.0.0beta3 (r12422) source archives and Windows binary
releases are available for download here:
   http://syenar.hu/harbour/

Make sure to check INSTALL doc "QUICK START" section and visit
our user forums at: http://sourceforge.net/apps/phpbb/harbour-project/


From harbour.01 at syenar.hu  Sun Sep  6 16:29:28 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun Sep  6 16:29:34 2009
Subject: [Harbour] Harbour 2.0.0beta3 (unofficial) available now
In-Reply-To: <000a01ca2f26$cdb60000$0303a8c0@hbco>
References: <18d502870909061011n328e50afhbe802e356bbf2642@mail.gmail.com>
	<000a01ca2f26$cdb60000$0303a8c0@hbco>
Message-ID: <18d502870909061329h424640cag25eb4fb8d2d1cafb@mail.gmail.com>

Hi Bill,

On Sun, Sep 6, 2009 at 9:18 PM, Bill Smith<hbco2@sbcglobal.net> wrote:
> Hi Victor,
>
> Thank you so much!
>
> Installed the default hb2.0 beta (checked the tools option at the top of the
> list) in a WindowsXP system.
> Changed the default path from /hb20 to /drived/hdv/hb20.
>
> Compilation of the example file guestbk results in the following linking
> errors:
>
> guestbk.o:guestbk.c:(.data+0x48): undefined reference to `HB_FUN_TINIFILE'
> guestbk.o:guestbk.c:(.data+0x58): undefined reference to `HB_FUN_THTML'

This is a multifile project, use the .hbp file to build it.

Brgds,
Viktor
From abe.buch at att.net  Sun Sep  6 16:46:22 2009
From: abe.buch at att.net (AbeB)
Date: Sun Sep  6 16:46:28 2009
Subject: [Harbour] does the get system support a mouse?
In-Reply-To: <20090906172333.10092.qmail@ml110b.qnet.com.pe>
References: <1252256207163-3593190.post@n2.nabble.com>
	<20090906172333.10092.qmail@ml110b.qnet.com.pe>
Message-ID: <1252269982807-3594105.post@n2.nabble.com>


Thanks a lot.


Guillermo Varona Silup? wrote:
> 
> AbeB escribi?: 
> 
>> 
>> Hi All,
>> > How can I make my app mouseable? in gtwin.
>> clicking on a get to make it the active get, double clicking to put the
>> cursor on that position within that get?
> 
> #include "Inkey.ch"
> PROCEDURE MAIN
> LOCAL cVar1 := cVar2 := cVar3 := SPAC(10)
> SET(_SET_EVENTMASK, INKEY_ALL)
> MSETCURSOR(.T.)
> @ 10, 20 SAY "Var 1:" GET cVar1
> @ 11, 20 SAY "Var 2:" GET cVar2
> @ 12, 20 SAY "Var 3:" GET cVar3
> READ
> RETURN 
> 
> Best Regards
> GVS
> ---------------------------------------------------------------
> EC Red Internet gr@tis
> Inscr?bete en www.ec-red.com
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://n2.nabble.com/does-the-get-system-support-a-mouse-tp3593190p3594105.html
Sent from the harbour-devel mailing list archive at Nabble.com.
From harbour.01 at syenar.hu  Sun Sep  6 18:33:35 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Sun Sep  6 18:33:41 2009
Subject: [Harbour] Re: Harbour 2.0.0beta3 (unofficial) available now
In-Reply-To: <18d502870909061011n328e50afhbe802e356bbf2642@mail.gmail.com>
References: <18d502870909061011n328e50afhbe802e356bbf2642@mail.gmail.com>
Message-ID: <18d502870909061533i5e3a46adsfbe421e87d740c15@mail.gmail.com>

Some more information which may be important seeing some threads
in Harbour related forums:

This version resolves hbmk2 'unresolved external' output experienced
with mingw compiler with interim versions (after previous beta).

It also fixes GPFs experienced by some not-so-lucky users who built
hbmk2 while Harbour repository was unstable for a few hours last week.
(this is the same problem reported on this list as harbour compiler GPF)

Brgds,
Viktor

On Sun, Sep 6, 2009 at 7:11 PM, Viktor Szak?ts<harbour.01@syenar.hu> wrote:
> Hi All,
>
> Harbour 2.0.0beta3 (r12422) source archives and Windows binary
> releases are available for download here:
> ? http://syenar.hu/harbour/
>
> Make sure to check INSTALL doc "QUICK START" section and visit
> our user forums at:
> ? http://sourceforge.net/apps/phpbb/harbour-project/
>
> Release notes:
> -----------------------------------------------------------------------
> Unified Windows release for most supported compilers and
> x86, x64, WinCE/ARM, MS-DOS, OS/2, Linux target platforms.
>
> Installed size: 232MB (46MB - 340MB)
>
> The default installation will install MinGW compiler + x86 static and
> shared libs, MSVC and BCC x86 libs and examples.
>
> Options: x86 shared tools, x64 shared tools, MinGW x64 and
> WinCE-ARM libs, MSVC x64 libs, Open Watcom x86 libs,
> shared x64/WinCE-ARM libs, MS-DOS 32-bit DJGPP libs,
> OS/2 (watcom) libs, Linux (watcom) libs.
>
> Usage:
> 1) install/unpack to any directory (C:\hb20)
> 2) go to bin dir (optional if you specify path for hbmk2)
> 3) For x86 executable, type: 'hbmk2 ../tests/hello.prg'
> 4) For x64 executable, type: 'hbmk2 ../tests/hello.prg -compiler=mingw64'
> ? [needs mingw64 to be installed beforehand]
> 5) For WinCE/ARM executable, type: 'hbmk2 ../tests/hello.prg -platform=wce'
> ? [needs cegcc to be installed beforehand]
> 6) For MS-DOS executable, type: 'hbmk2 ../tests/hello.prg -platform=dos'
> ? [needs DJGPP to be installed beforehand]
> 7) For Linux executable, type: 'hbmk2 ../tests/hello.prg -platform=linux'
> ? [needs OpenWatcom to be installed beforehand]
>
> Tool/lib versions used to create this package:
> -----------------------------------------------------------------------
>
> ? Compiler tools
> ? --------------
>
> ? MinGW 4.4.1 (included)
> ? MinGW w64 4.5.0
> ? MinGW CEGCC 4.1.0
> ? DJGPP 4.4.1 (2.04b1)
> ? MSVC 2008 SP1
> ? Open Watcom C++ 1.8
> ? Borland C++ 5.5.1
>
> ? External lib dependencies
> ? -------------------------
>
> ? ACE 9.10
> ? Allegro 4.2.2
> ? Blat 2.6.2
> ? libcurl 7.19.6
> ? Firebird 2.1.2
> ? FreeImage 3.12.0
> ? GD 2.0.35
> ? MySQL 5.1.35
> ? OpenSSL 0.9.8k
> ? PostgreSQL 8.3.7
> ? QT 4.5.2
> ? WATTCG 2.2.10
>
> Changes since previous (2.0.0beta2 20090624) release:
> -----------------------------------------------------------------------
>
> - Harbour updated to r12422 (from r11508)
> - Rewritten socket library.
> - Fixed remaining Clipper compatibility issues (@.clp, SET PROC TO, DO
> WITH, etc)
> - Added replaceable core file I/O layer.
> - Reworked build system with integrated dynlib creation, cross-platform
> ?support, compiler and external component autodetection and much more.
> - MinGW updated to 4.4.1
> - MinGW x64 updated to 4.5.0 (20090905)
> - Finalizing ActiveX/OLE2 support.
> - Timestamp/datetime support in core.
> - Added MT support for dos platform.
> - Added socket support for dos platform (via WATTCP lib).
> - Added hbnetio lib client/server file I/O implementation.
> - hbxbp lib about feature complete.
> - wce/msvcarm target improvements, sunpro compiler support.
> - hbssl OpenSSL wrapper lib.
> - SSL support in hbtip lib.
> - Serial communication fixes in hbwin/hbtpathy on win platform.
> - Lots of other additions and some fixes.
> - Changed default install path to be 'hb20' rather than 'harbour20',
> ?to avoid long filenames.
> - Replaced mingw64 built x64 shared tools with msvc64 builds, as
> ?the former didn't work.
> - Included hbqt lib which links against static QT libs.
>
> Changes since previous (2.0.0beta1 20090609) release:
> -----------------------------------------------------------------------
> - Harbour updated to r11508 (from r11287)
> - New User's Forum linked
> - upx compressor included in install package
> - DOS cross build libs included in install package
> - preparation to host 3rd party packages inside Harbour directory tree
> - new "zero-conf" library install system in preparation
> - hbmk2: lots of minor refinements, support for all free compilers
> ?in embedded form, support spaces in filenames/paths, all Harbour
> ?supported C compilers have now complete support in hbmk2
> - DOS support tested and required fixes applied
> - embedded compilers moved to 'comp' subdir
> - support for latest MinGW x64 and MSVS 2010 compilers
> - extended INSTALL with new examples and app build quick guide
> - icon for installer and hbrun tool
> - hbxbp and hbqt enhancements
> - hbwin refinements and better compatibility
> - new uhttpd2 sessioned HTTP server
> - C++ build support for all compilers, new HB_WAEVAL() function,
> ?new xpp (Xbase++ compatibility) lib, .hrb loading enhancements
> - DBU, RL, SuperLib fixes.
> - MinGW64 updated to 4.4.1
> - There were a few changes in this release which may require updating
> ?your source code (hb_par*()/hb_stor*() in .c files and GTWVG WIN_*()
> ?function in .prg files). Search for 'incompatible' word in ChangeLog
> ?for more.
> -----------------------------------------------------------------------
>
> Changes since previous (1.1.0dev 20090602) release:
> -----------------------------------------------------------------------
> - Harbour updated to r11287 (from r11179)
> - all contrib tests included in install package
> - All 3rd party packages upgraded to latest version.
> - hbmk2: project support, new file extensions, fixes, Harbour 1.0.x
> ?support.
> - further simplified/updated build process and instructions
> - hbqt many enhancements
> - almost full xhb compatibility
> - 'terminal' fixed in examples
> - source formatter, Cl*pper RL tool, legacy hbmake added
> - MT Xbase++ compatibility
> -----------------------------------------------------------------------
>
> Changes since previous (1.1.0dev 20090408) release:
> -----------------------------------------------------------------------
> - Harbour updated to r11179 (from r10819)
> - Updated hbmk2 (filter issues + experimental Harbour 1.0.x support)
> - Included contrib tests/utils
> - Full and now standalone 'examples'
> - 'tests' with subdirs included.
> - No longer included pocc/pocc64/poccarm libs.
> - QT updated to 4.5.1
> - MinGW updated to 4.4.0
>
> --
> Brgds,
> Viktor Szakats
>
From mbelgrano at deltain.it  Sun Sep  6 18:56:43 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Sep  6 18:57:11 2009
Subject: [Harbour] Harbour 2.0.0beta3 (unofficial) available now
In-Reply-To: <18d502870909061011n328e50afhbe802e356bbf2642@mail.gmail.com>
References: <18d502870909061011n328e50afhbe802e356bbf2642@mail.gmail.com>
Message-ID: <609353e70909061556x285d9336q6b975ff019afe18f@mail.gmail.com>

Very good
this is  quantum leap for harbour
Now also windows platform is very ready to use

2009/9/6 Viktor Szak?ts <harbour.01@syenar.hu>:
> Hi All,
>
> Harbour 2.0.0beta3 (r12422) source archives and Windows binary
> releases are available for download here:
> ? http://syenar.hu/harbour/
>
> Make sure to check INSTALL doc "QUICK START" section and visit
> our user forums at:
> ? http://sourceforge.net/apps/phpbb/harbour-project/
>
> Release notes:
> -----------------------------------------------------------------------
> Unified Windows release for most supported compilers and
> x86, x64, WinCE/ARM, MS-DOS, OS/2, Linux target platforms.
>
> Installed size: 232MB (46MB - 340MB)
>
> The default installation will install MinGW compiler + x86 static and
> shared libs, MSVC and BCC x86 libs and examples.
>
> Options: x86 shared tools, x64 shared tools, MinGW x64 and
> WinCE-ARM libs, MSVC x64 libs, Open Watcom x86 libs,
> shared x64/WinCE-ARM libs, MS-DOS 32-bit DJGPP libs,
> OS/2 (watcom) libs, Linux (watcom) libs.
>
> Usage:
> 1) install/unpack to any directory (C:\hb20)
> 2) go to bin dir (optional if you specify path for hbmk2)
> 3) For x86 executable, type: 'hbmk2 ../tests/hello.prg'
> 4) For x64 executable, type: 'hbmk2 ../tests/hello.prg -compiler=mingw64'
> ? [needs mingw64 to be installed beforehand]
> 5) For WinCE/ARM executable, type: 'hbmk2 ../tests/hello.prg -platform=wce'
> ? [needs cegcc to be installed beforehand]
> 6) For MS-DOS executable, type: 'hbmk2 ../tests/hello.prg -platform=dos'
> ? [needs DJGPP to be installed beforehand]
> 7) For Linux executable, type: 'hbmk2 ../tests/hello.prg -platform=linux'
> ? [needs OpenWatcom to be installed beforehand]
>
> Tool/lib versions used to create this package:
> -----------------------------------------------------------------------
>
> ? Compiler tools
> ? --------------
>
> ? MinGW 4.4.1 (included)
> ? MinGW w64 4.5.0
> ? MinGW CEGCC 4.1.0
> ? DJGPP 4.4.1 (2.04b1)
> ? MSVC 2008 SP1
> ? Open Watcom C++ 1.8
> ? Borland C++ 5.5.1
>
> ? External lib dependencies
> ? -------------------------
>
> ? ACE 9.10
> ? Allegro 4.2.2
> ? Blat 2.6.2
> ? libcurl 7.19.6
> ? Firebird 2.1.2
> ? FreeImage 3.12.0
> ? GD 2.0.35
> ? MySQL 5.1.35
> ? OpenSSL 0.9.8k
> ? PostgreSQL 8.3.7
> ? QT 4.5.2
> ? WATTCG 2.2.10
>
> Changes since previous (2.0.0beta2 20090624) release:
> -----------------------------------------------------------------------
>
> - Harbour updated to r12422 (from r11508)
> - Rewritten socket library.
> - Fixed remaining Clipper compatibility issues (@.clp, SET PROC TO, DO
> WITH, etc)
> - Added replaceable core file I/O layer.
> - Reworked build system with integrated dynlib creation, cross-platform
> ?support, compiler and external component autodetection and much more.
> - MinGW updated to 4.4.1
> - MinGW x64 updated to 4.5.0 (20090905)
> - Finalizing ActiveX/OLE2 support.
> - Timestamp/datetime support in core.
> - Added MT support for dos platform.
> - Added socket support for dos platform (via WATTCP lib).
> - Added hbnetio lib client/server file I/O implementation.
> - hbxbp lib about feature complete.
> - wce/msvcarm target improvements, sunpro compiler support.
> - hbssl OpenSSL wrapper lib.
> - SSL support in hbtip lib.
> - Serial communication fixes in hbwin/hbtpathy on win platform.
> - Lots of other additions and some fixes.
> - Changed default install path to be 'hb20' rather than 'harbour20',
> ?to avoid long filenames.
> - Replaced mingw64 built x64 shared tools with msvc64 builds, as
> ?the former didn't work.
> - Included hbqt lib which links against static QT libs.
>
> Changes since previous (2.0.0beta1 20090609) release:
> -----------------------------------------------------------------------
> - Harbour updated to r11508 (from r11287)
> - New User's Forum linked
> - upx compressor included in install package
> - DOS cross build libs included in install package
> - preparation to host 3rd party packages inside Harbour directory tree
> - new "zero-conf" library install system in preparation
> - hbmk2: lots of minor refinements, support for all free compilers
> ?in embedded form, support spaces in filenames/paths, all Harbour
> ?supported C compilers have now complete support in hbmk2
> - DOS support tested and required fixes applied
> - embedded compilers moved to 'comp' subdir
> - support for latest MinGW x64 and MSVS 2010 compilers
> - extended INSTALL with new examples and app build quick guide
> - icon for installer and hbrun tool
> - hbxbp and hbqt enhancements
> - hbwin refinements and better compatibility
> - new uhttpd2 sessioned HTTP server
> - C++ build support for all compilers, new HB_WAEVAL() function,
> ?new xpp (Xbase++ compatibility) lib, .hrb loading enhancements
> - DBU, RL, SuperLib fixes.
> - MinGW64 updated to 4.4.1
> - There were a few changes in this release which may require updating
> ?your source code (hb_par*()/hb_stor*() in .c files and GTWVG WIN_*()
> ?function in .prg files). Search for 'incompatible' word in ChangeLog
> ?for more.
> -----------------------------------------------------------------------
>
> Changes since previous (1.1.0dev 20090602) release:
> -----------------------------------------------------------------------
> - Harbour updated to r11287 (from r11179)
> - all contrib tests included in install package
> - All 3rd party packages upgraded to latest version.
> - hbmk2: project support, new file extensions, fixes, Harbour 1.0.x
> ?support.
> - further simplified/updated build process and instructions
> - hbqt many enhancements
> - almost full xhb compatibility
> - 'terminal' fixed in examples
> - source formatter, Cl*pper RL tool, legacy hbmake added
> - MT Xbase++ compatibility
> -----------------------------------------------------------------------
>
> Changes since previous (1.1.0dev 20090408) release:
> -----------------------------------------------------------------------
> - Harbour updated to r11179 (from r10819)
> - Updated hbmk2 (filter issues + experimental Harbour 1.0.x support)
> - Included contrib tests/utils
> - Full and now standalone 'examples'
> - 'tests' with subdirs included.
> - No longer included pocc/pocc64/poccarm libs.
> - QT updated to 4.5.1
> - MinGW updated to 4.4.0
>
> --
> Brgds,
> Viktor Szakats
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From hbco2 at sbcglobal.net  Sun Sep  6 20:12:51 2009
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Sun Sep  6 20:12:57 2009
Subject: [Harbour] Harbour 2.0.0beta3 (unofficial) available now
References: <18d502870909061011n328e50afhbe802e356bbf2642@mail.gmail.com><000a01ca2f26$cdb60000$0303a8c0@hbco>
	<18d502870909061329h424640cag25eb4fb8d2d1cafb@mail.gmail.com>
Message-ID: <001d01ca2f4f$f1f704e0$0303a8c0@hbco>

Hi Victor,

Here's another from the peanut gallery...

C:\DriveD\hdv\hb20\examples\terminal>hbmk2 trm_cli.hbp
hbmk2: Processing configuration: c:\drived\hdv\hb20\bin\hbmk.cfg
hbmk2: Processing: terminal.hbc
trm_cli.prg(286) Warning W0001  Ambiguous reference 'INKEY_ALL'
trm_cli.prg(286) Warning W0001  Ambiguous reference 'NKEY'
trm_cli.prg(288) Warning W0001  Ambiguous reference 'S_COMMSOCKET'
trm_cli.prg(288) Warning W0001  Ambiguous reference 'NKEY'
trm_cli.prg(289) Warning W0001  Ambiguous reference 'S_LSENDING'
trm_cli.prg(290) Warning W0001  Ambiguous reference 'S_COMMSOCKET'
trm_cli.prg(290) Warning W0001  Ambiguous reference 'NKEY'
trm_cli.prg(291) Warning W0001  Ambiguous reference 'S_LSENDING'
trm_cli.prg(294) Warning W0001  Ambiguous reference 'S_COMMSOCKET'

No code generated.
hbmk2: Error: Running Harbour compiler (internal). 1
(c:\drived\hdv\hb20\bin\harbour.exe) -n2
trm_cli.prg -q0 -w3 -es2 -kmo -l -ic:/d
rived/hdv/hb20/include

Bill

----- Original Message ----- 
From: Viktor Szak?ts
To: Harbour Project Main Developer List.
Sent: Sunday, September 06, 2009 1:29 PM
Subject: Re: [Harbour] Harbour 2.0.0beta3 (unofficial) available now

>
> Compilation of the example file guestbk results in the following linking
> errors:
>
This is a multifile project, use the .hbp file to build it.

Brgds,
Viktor


From vszakats at users.sourceforge.net  Mon Sep  7 03:08:02 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep  7 03:08:09 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12424] trunk/harbour
Message-ID: <E1MkYKY-0002ZU-CM@c3vjzd1.ch3.sourceforge.com>

Revision: 12424
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12424&view=rev
Author:   vszakats
Date:     2009-09-07 07:08:01 +0000 (Mon, 07 Sep 2009)

Log Message:
-----------
2009-09-07 09:03 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * INSTALL
    + Added "Embarcadero" to Borland compiler description.
    ! Fixed "Open Watcom C++ 9 or above" compiler description.
    ; Thanks to Tamas Tevesz for pointing these.
    + Added a bit more detail to *BSD platform description.
    + Added eComStation to OS/2 platform description.
    ! Few minor fixes when referring to Borland C++ compiler
      by its full name.

  * utils/hbmk2/hbmk2.prg
    ! Using 'svnversion .' (instead of 'svnversion') to make
      it work with older svn versions.

  * examples/terminal/trm_cli.prg
    ! Fixed some var naming problems slipped in the source.
      Thanks to Bill Smith for reporting it.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/examples/terminal/trm_cli.prg
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Mon Sep  7 04:47:10 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Mon Sep  7 04:47:17 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12425] trunk/harbour
Message-ID: <E1MkZsU-0000f3-I3@3kljzd1.ch3.sourceforge.com>

Revision: 12425
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12425&view=rev
Author:   druzus
Date:     2009-09-07 08:47:09 +0000 (Mon, 07 Sep 2009)

Log Message:
-----------
2009-09-07 10:46 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/hbsocket.c
    ! fixed compilation with WATT-32 in OpenWatcom DOS builds

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rtl/hbsocket.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Mon Sep  7 04:53:06 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Mon Sep  7 04:53:12 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12426] trunk/harbour
Message-ID: <E1MkZyE-0000ne-KT@3kljzd1.ch3.sourceforge.com>

Revision: 12426
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12426&view=rev
Author:   druzus
Date:     2009-09-07 08:53:05 +0000 (Mon, 07 Sep 2009)

Log Message:
-----------
2009-09-07 10:52 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/hbsocket.c
    + added support for setting non blocking IO mode in OpenWatcom OS2
      builds - please test.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rtl/hbsocket.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Mon Sep  7 04:59:59 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep  7 05:00:04 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12427] trunk/harbour
Message-ID: <E1Mka4t-0007N6-1Z@d5vjzd1.ch3.sourceforge.com>

Revision: 12427
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12427&view=rev
Author:   vszakats
Date:     2009-09-07 08:59:58 +0000 (Mon, 07 Sep 2009)

Log Message:
-----------
2009-09-07 10:58 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * contrib/hbssl/hbssl.c
    ! Fixed wrong pointer references (reported by watcom).
      For some reason it wasn't fatal.
      (please review me)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbssl/hbssl.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Mon Sep  7 05:23:47 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep  7 05:23:53 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12428] trunk/harbour
Message-ID: <E1MkaRv-0003DN-Bk@74yxhf1.ch3.sourceforge.com>

Revision: 12428
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12428&view=rev
Author:   vszakats
Date:     2009-09-07 09:23:46 +0000 (Mon, 07 Sep 2009)

Log Message:
-----------
2009-09-07 11:21 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/wce/mingwarm.mk
  * config/win/mingw.mk
    + Reenabled implib generation for mingw targets.
      This will be needed to implement multi-host binary distros
      supporting cross-build shared targets. This way there is no
      need to fiddle with switching BIN dirs in cross-build situations,
      the LIB dir selection is enough to find all required libs,
      regardless where .dlls are installed. (.dlls should ideally
      be installed to system locations).

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/wce/mingwarm.mk
    trunk/harbour/config/win/mingw.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Mon Sep  7 05:41:20 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Mon Sep  7 05:41:26 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12429] trunk/harbour
Message-ID: <E1Mkaiu-0006Eg-TX@c3vjzd1.ch3.sourceforge.com>

Revision: 12429
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12429&view=rev
Author:   druzus
Date:     2009-09-07 09:41:19 +0000 (Mon, 07 Sep 2009)

Log Message:
-----------
2009-09-07 11:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/detect.mk
    ! fixed linking in DJGPP and OpenWatcom DOS when WATT-32 is enabled

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/detect.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Mon Sep  7 05:52:56 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon Sep  7 05:53:02 2009
Subject: [Harbour] Re: SF.net SVN: harbour-project:[12429] trunk/harbour
In-Reply-To: <E1Mkaiu-0006EZ-1u@c3vjzd1.ch3.sourceforge.com>
References: <E1Mkaiu-0006EZ-1u@c3vjzd1.ch3.sourceforge.com>
Message-ID: <18d502870909070252h5c8a0cd0xf284064a3f70b54f@mail.gmail.com>

Hi Przemek,

I had a conflicting fix pending here, but now I'm unsure about it.
The major problem with my previous commit was wrong placement
of the two HB_LIB_WATT lines. They should have come after 'include detfun.mk'.
I think this commit also broke the case when HB_INC_WATT is
explicitly set to a dir which uses backslashes. What I can't see is if
export and indirect assignment is still needed here after such fix
(particularly 'export').

I'll commit something in a few, could you pls retest in your system afterwards?

Brgds,
Viktor

On Mon, Sep 7, 2009 at 11:41 AM, <druzus@users.sourceforge.net> wrote:
> Revision: 12429
> ? ? ? ? ?http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12429&view=rev
> Author: ? druzus
> Date: ? ? 2009-09-07 09:41:19 +0000 (Mon, 07 Sep 2009)
>
> Log Message:
> -----------
> 2009-09-07 11:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> ?* harbour/config/detect.mk
> ? ?! fixed linking in DJGPP and OpenWatcom DOS when WATT-32 is enabled
>
> Modified Paths:
> --------------
> ? ?trunk/harbour/ChangeLog
> ? ?trunk/harbour/config/detect.mk
>
> Modified: trunk/harbour/ChangeLog
> ===================================================================
> --- trunk/harbour/ChangeLog ? ? 2009-09-07 09:23:46 UTC (rev 12428)
> +++ trunk/harbour/ChangeLog ? ? 2009-09-07 09:41:19 UTC (rev 12429)
> @@ -17,6 +17,10 @@
> ? ?past entries belonging to author(s): Viktor Szakats.
> ?*/
>
> +2009-09-07 11:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> + ?* harbour/config/detect.mk
> + ? ?! fixed linking in DJGPP and OpenWatcom DOS when WATT-32 is enabled
> +
> ?2009-09-07 11:21 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
> ? * config/wce/mingwarm.mk
> ? * config/win/mingw.mk
>
> Modified: trunk/harbour/config/detect.mk
> ===================================================================
> --- trunk/harbour/config/detect.mk ? ? ?2009-09-07 09:23:46 UTC (rev 12428)
> +++ trunk/harbour/config/detect.mk ? ? ?2009-09-07 09:41:19 UTC (rev 12429)
> @@ -121,11 +121,11 @@
> ?_DET_VAR_HAS_ := HB_HAS_WATT
> ?_DET_FLT_PLAT := dos
> ?_DET_FLT_COMP :=
> -_DET_INC_DEFP := $(if $(WATT_ROOT),$(WATT_ROOT)/inc,) /usr/include
> +_DET_INC_DEFP := $(if $(WATT_ROOT),$(subst \,/,$(WATT_ROOT))/inc,) /usr/include
> ?_DET_INC_HEAD := /sys/socket.h
>
> -HB_LIB_WATT := $(HB_HAS_WATT:/inc=/lib)
> -HB_LIB_WATT := $(HB_LIB_WATT:\inc=\lib)
> +# indirect assignment used intentionally
> +export HB_LIB_WATT = $(HB_HAS_WATT:/inc=/lib)
>
> ?include $(TOP)$(ROOT)config/detfun.mk
>
>
>
> This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
>
From druzus at acn.waw.pl  Mon Sep  7 06:03:34 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep  7 06:03:40 2009
Subject: [Harbour] Re: SF.net SVN: harbour-project:[12429] trunk/harbour
In-Reply-To: <18d502870909070252h5c8a0cd0xf284064a3f70b54f@mail.gmail.com>
References: <E1Mkaiu-0006EZ-1u@c3vjzd1.ch3.sourceforge.com>
	<18d502870909070252h5c8a0cd0xf284064a3f70b54f@mail.gmail.com>
Message-ID: <20090907100334.GA13917@uran.home.aster.pl>

On Mon, 07 Sep 2009, Szak?ts Viktor wrote:

Hi,

> I had a conflicting fix pending here, but now I'm unsure about it.
> The major problem with my previous commit was wrong placement
> of the two HB_LIB_WATT lines. They should have come after 'include detfun.mk'.

Yes, instead of indirect assignment you can move it after 'include detfun.mk'
Anyhow export is still necessary though we can drop HB_LIB_WATT support
and set it inside dos/{djgpp,watcom}.mk files. In such will reduce
environment usage.

> I think this commit also broke the case when HB_INC_WATT is
> explicitly set to a dir which uses backslashes. What I can't see is if
> export and indirect assignment is still needed here after such fix
> (particularly 'export').

Now it's correct because only / are used inside HB_HAS_WATT just like in
all other HB_HAS_* vars and before was broken because possible '\' in
WATT_ROOT were mixed with slash from '/inc'.
If some compiler needs backslashes only then it should convert
HB_HAS_WATT and HB_LIB_WATT just like I guess it does for
other HB_HAS_* vars.

best regards,
Przemek
From vszakats at users.sourceforge.net  Mon Sep  7 06:03:49 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep  7 06:03:56 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12430] trunk/harbour
Message-ID: <E1Mkb4f-0008WB-Vv@d5vjzd1.ch3.sourceforge.com>

Revision: 12430
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12430&view=rev
Author:   vszakats
Date:     2009-09-07 10:03:48 +0000 (Mon, 07 Sep 2009)

Log Message:
-----------
2009-09-07 12:03 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * bin/postinst.bat
    + Installation of hb-mkimp.bat will now be done automatically
      at postinst phase for win/wce targets.

  * config/detect.mk
    ! Fixed HB_INC_WATT handling if it contained backslashes
      (broken after last commit)
    % Avoid using indirect assigment by moving it after detection
      function (it was a mistake in my previous commit).

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/postinst.bat
    trunk/harbour/config/detect.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Mon Sep  7 06:05:16 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon Sep  7 06:05:24 2009
Subject: [Harbour] Re: SF.net SVN: harbour-project:[12429] trunk/harbour
In-Reply-To: <18d502870909070252h5c8a0cd0xf284064a3f70b54f@mail.gmail.com>
References: <E1Mkaiu-0006EZ-1u@c3vjzd1.ch3.sourceforge.com>
	<18d502870909070252h5c8a0cd0xf284064a3f70b54f@mail.gmail.com>
Message-ID: <18d502870909070305o2c0844c1m5358e11cad2c4a33@mail.gmail.com>

Okay, only HB_INC_WATT with backslashes were broken, plus I
sorted the indirect assignment out according to my original fix.

Brgds,
Viktor

On Mon, Sep 7, 2009 at 11:52 AM, Viktor Szak?ts<harbour.01@syenar.hu> wrote:
> Hi Przemek,
>
> I had a conflicting fix pending here, but now I'm unsure about it.
> The major problem with my previous commit was wrong placement
> of the two HB_LIB_WATT lines. They should have come after 'include detfun.mk'.
> I think this commit also broke the case when HB_INC_WATT is
> explicitly set to a dir which uses backslashes. What I can't see is if
> export and indirect assignment is still needed here after such fix
> (particularly 'export').
>
> I'll commit something in a few, could you pls retest in your system afterwards?
>
> Brgds,
> Viktor
>
> On Mon, Sep 7, 2009 at 11:41 AM, <druzus@users.sourceforge.net> wrote:
>> Revision: 12429
>> ? ? ? ? ?http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12429&view=rev
>> Author: ? druzus
>> Date: ? ? 2009-09-07 09:41:19 +0000 (Mon, 07 Sep 2009)
>>
>> Log Message:
>> -----------
>> 2009-09-07 11:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>> ?* harbour/config/detect.mk
>> ? ?! fixed linking in DJGPP and OpenWatcom DOS when WATT-32 is enabled
>>
>> Modified Paths:
>> --------------
>> ? ?trunk/harbour/ChangeLog
>> ? ?trunk/harbour/config/detect.mk
>>
>> Modified: trunk/harbour/ChangeLog
>> ===================================================================
>> --- trunk/harbour/ChangeLog ? ? 2009-09-07 09:23:46 UTC (rev 12428)
>> +++ trunk/harbour/ChangeLog ? ? 2009-09-07 09:41:19 UTC (rev 12429)
>> @@ -17,6 +17,10 @@
>> ? ?past entries belonging to author(s): Viktor Szakats.
>> ?*/
>>
>> +2009-09-07 11:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>> + ?* harbour/config/detect.mk
>> + ? ?! fixed linking in DJGPP and OpenWatcom DOS when WATT-32 is enabled
>> +
>> ?2009-09-07 11:21 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>> ? * config/wce/mingwarm.mk
>> ? * config/win/mingw.mk
>>
>> Modified: trunk/harbour/config/detect.mk
>> ===================================================================
>> --- trunk/harbour/config/detect.mk ? ? ?2009-09-07 09:23:46 UTC (rev 12428)
>> +++ trunk/harbour/config/detect.mk ? ? ?2009-09-07 09:41:19 UTC (rev 12429)
>> @@ -121,11 +121,11 @@
>> ?_DET_VAR_HAS_ := HB_HAS_WATT
>> ?_DET_FLT_PLAT := dos
>> ?_DET_FLT_COMP :=
>> -_DET_INC_DEFP := $(if $(WATT_ROOT),$(WATT_ROOT)/inc,) /usr/include
>> +_DET_INC_DEFP := $(if $(WATT_ROOT),$(subst \,/,$(WATT_ROOT))/inc,) /usr/include
>> ?_DET_INC_HEAD := /sys/socket.h
>>
>> -HB_LIB_WATT := $(HB_HAS_WATT:/inc=/lib)
>> -HB_LIB_WATT := $(HB_LIB_WATT:\inc=\lib)
>> +# indirect assignment used intentionally
>> +export HB_LIB_WATT = $(HB_HAS_WATT:/inc=/lib)
>>
>> ?include $(TOP)$(ROOT)config/detfun.mk
>>
>>
>>
>> This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
>>
>
From harbour.01 at syenar.hu  Mon Sep  7 06:09:03 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon Sep  7 06:09:12 2009
Subject: [Harbour] Re: SF.net SVN: harbour-project:[12429] trunk/harbour
In-Reply-To: <20090907100334.GA13917@uran.home.aster.pl>
References: <E1Mkaiu-0006EZ-1u@c3vjzd1.ch3.sourceforge.com>
	<18d502870909070252h5c8a0cd0xf284064a3f70b54f@mail.gmail.com>
	<20090907100334.GA13917@uran.home.aster.pl>
Message-ID: <18d502870909070309h45c8f674s7594261c6d503d30@mail.gmail.com>

>> I had a conflicting fix pending here, but now I'm unsure about it.
>> The major problem with my previous commit was wrong placement
>> of the two HB_LIB_WATT lines. They should have come after 'include detfun.mk'.
>
> Yes, instead of indirect assignment you can move it after 'include detfun.mk'
> Anyhow export is still necessary though we can drop HB_LIB_WATT support
> and set it inside dos/{djgpp,watcom}.mk files. In such will reduce
> environment usage.

Yes, right.

>> I think this commit also broke the case when HB_INC_WATT is
>> explicitly set to a dir which uses backslashes. What I can't see is if
>> export and indirect assignment is still needed here after such fix
>> (particularly 'export').
>
> Now it's correct because only / are used inside HB_HAS_WATT just like in
> all other HB_HAS_* vars and before was broken because possible '\' in
> WATT_ROOT were mixed with slash from '/inc'.
> If some compiler needs backslashes only then it should convert
> HB_HAS_WATT and HB_LIB_WATT just like I guess it does for
> other HB_HAS_* vars.

I use 'set HB_INC_WATT=C:\devl\watt\inc' which needs some
extra manual massaging to work when forming HB_LIB_WATT,
due to explicit forward slash in s&r operation.
(I don't use WATT_ROOT var).

Pls check after my commit.

Brgds,
Viktor
From druzus at acn.waw.pl  Mon Sep  7 06:22:35 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep  7 06:22:41 2009
Subject: [Harbour] Re: SF.net SVN: harbour-project:[12429] trunk/harbour
In-Reply-To: <18d502870909070309h45c8f674s7594261c6d503d30@mail.gmail.com>
References: <E1Mkaiu-0006EZ-1u@c3vjzd1.ch3.sourceforge.com>
	<18d502870909070252h5c8a0cd0xf284064a3f70b54f@mail.gmail.com>
	<20090907100334.GA13917@uran.home.aster.pl>
	<18d502870909070309h45c8f674s7594261c6d503d30@mail.gmail.com>
Message-ID: <20090907102235.GA29923@uran.home.aster.pl>

On Mon, 07 Sep 2009, Szak?ts Viktor wrote:

Hi Viktor,

> I use 'set HB_INC_WATT=C:\devl\watt\inc' which needs some
> extra manual massaging to work when forming HB_LIB_WATT,
> due to explicit forward slash in s&r operation.
> (I don't use WATT_ROOT var).

WATT_ROOT is official envvar to setup WATT-32 environment so
for mne it'sa much mnore important then our local envvars.

> Pls check after my commit.

It's OK but this:
    ! Fixed HB_INC_WATT handling if it contained backslashes
      (broken after last commit)
is not true.
HB_INC_WATT was not broken at all and your commit did not change it
at all. Only HB_LIB_WATT was broken and it was done by your commit
few days before so DJGPP builds stop to work and I had to fix it.
Please be more precise.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Mon Sep  7 06:28:51 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep  7 06:28:59 2009
Subject: [Harbour] About mingw 4.4.1 and --enable-auto-import
Message-ID: <9257026e0909070328v1b8bb84dm4f3633150b25eff5@mail.gmail.com>

I'm testing beta3 under WinXP env and I get:

Creating shared lib libhbpgsql...
c:/mingw/bin/../lib/gcc/mingw32/4.4.1/../../../../mingw32/bin/ld.exe:
warning: auto-importing has been activated without
--enable-auto-import specified on the command line.
Info: resolving _PQisnonblocking by linking to __imp__PQisnonblocking
(auto-import)
This should work unless it involves constant data structures
referencing symbols from auto-imported DLLs.

Should we add --enable-auto-import to the command line?

best regards,
Lorenzo
From ice at extreme.hu  Mon Sep  7 06:33:01 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Mon Sep  7 06:33:11 2009
Subject: [Harbour] hbmain.c build failure in debug mode
Message-ID: <alpine.GSO.2.00.0909071225380.17720@dawn.royalcomp.hu>


hi,

tinky:~/w/xhb/harbour-build$ export HB_BUILD_DEBUG=yes
tinky:~/w/xhb/harbour-build$ make
! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh   
! HB_BUILD_DEBUG: yes
! HB_HOST_PLAT: linux  HB_SHELL: sh
! HB_PLATFORM: linux (autodetected)
! HB_COMPILER: gcc (autodetected: /usr/bin/gcc /usr/bin/X11/gcc /usr/X11R6/bin/gcc /usr/bin/)
! Component: 'openssl' found in /usr/include
! Component: 'gpm' found in /usr/include
! Component: 'slang' found in /usr/include
! Component: 'curses' found in /usr/include
! Component: 'x11' found in /usr/include
! Component: 'wattcp/watt-32' not supported on linux platform
! HB_INSTALL_PREFIX automatically set to: /usr/local
! REVISION: 12430
[...]
gcc  -I. -I../../../../../include  -Wall -W -O3 -g -DHB_TR_LEVEL_DEBUG  -fPIC  -ocompi18n.o -c ../../../compi18n.c
gcc  -I. -I../../../../../include  -Wall -W -O3 -g -DHB_TR_LEVEL_DEBUG  -fPIC  -ohbmain.o -c ../../../hbmain.c
../../../hbmain.c: In function ?hb_compCompile?:
../../../hbmain.c:3902: error: ?iFileType? undeclared (first use in this function)
../../../hbmain.c:3902: error: (Each undeclared identifier is reported only once
../../../hbmain.c:3902: error: for each function it appears in.)
make[3]: *** [hbmain.o] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [compiler] Error 2
make: *** [source] Error 2

-- 
[-]

mkdir /nonexistent
From harbour.01 at syenar.hu  Mon Sep  7 06:39:24 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon Sep  7 06:39:30 2009
Subject: [Harbour] Re: SF.net SVN: harbour-project:[12429] trunk/harbour
In-Reply-To: <20090907102235.GA29923@uran.home.aster.pl>
References: <E1Mkaiu-0006EZ-1u@c3vjzd1.ch3.sourceforge.com>
	<18d502870909070252h5c8a0cd0xf284064a3f70b54f@mail.gmail.com>
	<20090907100334.GA13917@uran.home.aster.pl>
	<18d502870909070309h45c8f674s7594261c6d503d30@mail.gmail.com>
	<20090907102235.GA29923@uran.home.aster.pl>
Message-ID: <18d502870909070339u3ef6a7d5j6aaecdc4d4d50589@mail.gmail.com>

On Mon, Sep 7, 2009 at 12:22 PM, Przemyslaw Czerpak<druzus@acn.waw.pl> wrote:
> On Mon, 07 Sep 2009, Szak?ts Viktor wrote:
>
> Hi Viktor,
>
>> I use 'set HB_INC_WATT=C:\devl\watt\inc' which needs some
>> extra manual massaging to work when forming HB_LIB_WATT,
>> due to explicit forward slash in s&r operation.
>> (I don't use WATT_ROOT var).
>
> WATT_ROOT is official envvar to setup WATT-32 environment so
> for mne it'sa much mnore important then our local envvars.

For me it's much more clear to use a well defined set of Harbour
envvars to control *all* external components in a consistent way
and detach these from such external ones, which may or may not
exist depending on actual external component. Anyhow we can
support both, no prob with that. HB_INC_* vars must always work
though.

>> Pls check after my commit.
>
> It's OK but this:
> ? ?! Fixed HB_INC_WATT handling if it contained backslashes
> ? ? ?(broken after last commit)
> is not true.
> HB_INC_WATT was not broken at all and your commit did not change it
> at all. Only HB_LIB_WATT was broken and it was done by your commit
> few days before so DJGPP builds stop to work and I had to fix it.
> Please be more precise.

I've attempted to fix handling backslashes with a mistake,
which made it not work (and which you fixed), but the baskslash fix
was there, and it was removed (well moved to WATT_ROOT).
Well, anyway.

Brgds,
Viktor
From harbour.01 at syenar.hu  Mon Sep  7 06:41:45 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon Sep  7 06:41:50 2009
Subject: [Harbour] About mingw 4.4.1 and --enable-auto-import
In-Reply-To: <9257026e0909070328v1b8bb84dm4f3633150b25eff5@mail.gmail.com>
References: <9257026e0909070328v1b8bb84dm4f3633150b25eff5@mail.gmail.com>
Message-ID: <18d502870909070341i23542a7q7f49b924199da4a9@mail.gmail.com>

On Mon, Sep 7, 2009 at 12:28 PM, Lorenzo
Fiorini<lorenzo.fiorini@gmail.com> wrote:
> I'm testing beta3 under WinXP env and I get:
>
> Creating shared lib libhbpgsql...
> c:/mingw/bin/../lib/gcc/mingw32/4.4.1/../../../../mingw32/bin/ld.exe:
> warning: auto-importing has been activated without
> --enable-auto-import specified on the command line.
> Info: resolving _PQisnonblocking by linking to __imp__PQisnonblocking
> (auto-import)
> This should work unless it involves constant data structures
> referencing symbols from auto-imported DLLs.
>
> Should we add --enable-auto-import to the command line?

I think I'm missing the exact scenario here.
Do you mean to bin/hb-mkdyn.sh ?

Brgds,
Viktor
From harbour.01 at syenar.hu  Mon Sep  7 06:52:31 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon Sep  7 06:52:37 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12428] trunk/harbour
In-Reply-To: <E1MkaRv-0003DN-Bk@74yxhf1.ch3.sourceforge.com>
References: <E1MkaRv-0003DN-Bk@74yxhf1.ch3.sourceforge.com>
Message-ID: <18d502870909070352s1a133f46g4a2afe228b4afd96@mail.gmail.com>

At this revision it's possible to create Harbour install kits which
support dos, os/2, win, win-x64, win-ia64 _host_ systems at the
same time (well x64 is already included in a somewhat optimized
form in beta3).

This means that all non-*nix platforms can be covered by using
just one unified install kit. The only price to pay is some size growth
of the install kit. Probably not very exciting for most users (but
maybe I'm wrong), anyhow the method is quite generic and may
become useful in the future.

*nix system support both as host and target can also be added
quite easily but I'm not sure how this would fall in line with general
expectations of *nix users. Anyhow technically it's possible.

Brgds,
Viktor

On Mon, Sep 7, 2009 at 11:23 AM, <vszakats@users.sourceforge.net> wrote:
> Revision: 12428
> ? ? ? ? ?http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12428&view=rev
> Author: ? vszakats
> Date: ? ? 2009-09-07 09:23:46 +0000 (Mon, 07 Sep 2009)
>
> Log Message:
> -----------
> 2009-09-07 11:21 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
> ?* config/wce/mingwarm.mk
> ?* config/win/mingw.mk
> ? ?+ Reenabled implib generation for mingw targets.
> ? ? ?This will be needed to implement multi-host binary distros
> ? ? ?supporting cross-build shared targets. This way there is no
> ? ? ?need to fiddle with switching BIN dirs in cross-build situations,
> ? ? ?the LIB dir selection is enough to find all required libs,
> ? ? ?regardless where .dlls are installed. (.dlls should ideally
> ? ? ?be installed to system locations).
>
> Modified Paths:
> --------------
> ? ?trunk/harbour/ChangeLog
> ? ?trunk/harbour/config/wce/mingwarm.mk
> ? ?trunk/harbour/config/win/mingw.mk
>
>
> This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From lorenzo.fiorini at gmail.com  Mon Sep  7 07:06:21 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep  7 07:06:30 2009
Subject: [Harbour] About mingw 4.4.1 and --enable-auto-import
In-Reply-To: <18d502870909070341i23542a7q7f49b924199da4a9@mail.gmail.com>
References: <9257026e0909070328v1b8bb84dm4f3633150b25eff5@mail.gmail.com>
	<18d502870909070341i23542a7q7f49b924199da4a9@mail.gmail.com>
Message-ID: <9257026e0909070406s602e210aga3c127e6d827bd97@mail.gmail.com>

On Mon, Sep 7, 2009 at 12:41 PM, Viktor Szak?ts<harbour.01@syenar.hu> wrote:

> I think I'm missing the exact scenario here.
> Do you mean to bin/hb-mkdyn.sh ?

...
l="libhbpgsql"
...
hb-mkslib "$HB_BIN_INSTALL/$l.dll" "$l.a" -L$HB_DIR_PGSQL/lib -lpq
$HB_BIN_INSTALL/harbour.dll $HB_DIR_PGSQL/bin/libpq.dll
...

This creates a libhbpgsql.dll that "include" references to libpq.dll
and harbour.dll

best regards,
Lorenzo
From druzus at users.sourceforge.net  Mon Sep  7 07:35:29 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Mon Sep  7 07:35:35 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12431] trunk/harbour
Message-ID: <E1MkcVN-0005fb-Vi@74yxhf1.ch3.sourceforge.com>

Revision: 12431
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12431&view=rev
Author:   druzus
Date:     2009-09-07 11:35:28 +0000 (Mon, 07 Sep 2009)

Log Message:
-----------
2009-09-07 13:35 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/compiler/hbmain.c
    ! fixed HB_TRACE() message - thanks to Tamas Tevesz for info.

  * harbour/source/rtl/hbproces.c
  * harbour/contrib/xhb/txtline.c
    ! fixed HB_TRACE() messages

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/xhb/txtline.c
    trunk/harbour/source/compiler/hbmain.c
    trunk/harbour/source/rtl/hbproces.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Mon Sep  7 12:18:42 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Mon Sep  7 12:18:48 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12432] trunk/harbour
Message-ID: <E1MkgvS-00021L-7N@bj8yhf1.ch3.sourceforge.com>

Revision: 12432
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12432&view=rev
Author:   druzus
Date:     2009-09-07 16:18:41 +0000 (Mon, 07 Sep 2009)

Log Message:
-----------
2009-09-07 18:18 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/hbsocket.c
    % modified hb_socketResolveAddr() to try use given address in
      raw form. On some platforms like MS-Windows it eliminates
      huge delay caused by unnecessary DNS lookup for addresses given
      in dot.number notation. It should be well seen in NETIO open
      operation if client program is compiled for windows.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rtl/hbsocket.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From sscc at mweb.co.za  Mon Sep  7 12:27:55 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Mon Sep  7 12:28:03 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4AA0EA35.2070308@dbtopas.lt>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<20090903141421.GB1443@uran.home.aster.pl>	<4A9FD484.6050608@dbtopas.lt>	<4A9FD931.6060404@mweb.co.za>	<4A9FE2E4.4010107@dbtopas.lt>	<20090903215311.GA29866@uran.home.aster.pl>	<4AA0D67F.7060501@mweb.co.za>	<4AA0DEC8.60200@dbtopas.lt>	<4AA0E8D8.6030008@mweb.co.za>
	<4AA0EA35.2070308@dbtopas.lt>
Message-ID: <4AA5348B.4020003@mweb.co.za>

Hi Mindaugas, Przemyslaw

Do you think it is worth having a function to manually shut down the connection 
point, as HWGUI does? It seems that Release() is never called, for whatever reason.

Regards
Alex

From mbelgrano at deltain.it  Mon Sep  7 12:42:20 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep  7 12:42:47 2009
Subject: [Harbour] Digital signature with harbour using X509 Cryptographic
	Classes
Message-ID: <609353e70909070942g1a78f2a5o5c10cf3ee54ae79a@mail.gmail.com>

A digital signature scheme typically consists of three algorithms:
A key generation algorithm that selects a private key uniformly at
random from a set of possible private keys. The algorithm outputs the
private key and a corresponding public key.
A signing algorithm which, given a message and a private key, produces
a signature.
A signature verifying algorithm which given a message, public key and
a signature, either accepts or rejects.

Any experience of it using harbour?
openssl

-- 
Massimo Belgrano
From ice at extreme.hu  Mon Sep  7 13:00:53 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Mon Sep  7 13:01:00 2009
Subject: [Harbour] watcom on linux xbuild win failure
Message-ID: <alpine.GSO.2.00.0909071843560.17720@dawn.royalcomp.hu>


hi,

this is a very uncharted territory for me, so sorry in advance if i'm 
too off.

export HB_BUILD_DEBUG=yes
export HB_COMMERCE=yes
export HB_BUILD_OPTIM=no      (also happens w/ optimized build)
export HB_CONTRIBLIBS=no
export WATCOM="/opt/ow"
export PATH="$WATCOM/binl:$PATH"
export INCLUDE="$WATCOM/h:$WATCOM/h/nt"
export EDPATH="$WATCOM/eddat"
export HB_PLATFORM=win
export HB_COMPILER=watcom
export HB_XBUILD=yes
export HB_BUILD_MODE=cpp
export HB_INSTALL_PREFIX=$appdir/inst/$HB_PLATFORM/$HB_COMPILER/$HB_BUILD_MODE

(i know most of these are unneeded, but it's part of a bigger script 
monster that builds hb in many combinations.)

! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh   
! HB_INSTALL_PREFIX: /home/ice/w/xhb/inst/win/watcom/cpp
! HB_BUILD_DEBUG: yes
! HB_BUILD_OPTIM: no
! HB_BUILD_MODE: cpp
! HB_CONTRIBLIBS: no
! HB_HOST_PLAT: linux  HB_SHELL: sh
! HB_PLATFORM: win (x86) 
! HB_COMPILER: watcom 
! HB_BIN_COMPILE not specified. Automatically set to: /usr/bin
! Component: 'openssl' not supported with watcom compiler
! Component: 'gpm' explicitly disabled
! Component: 'slang' explicitly disabled
! Component: 'curses' location not specified
! Component: 'x11' location not specified
! Component: 'wattcp/watt-32' not supported on win platform
! REVISION: 12432
[...]
wpp386  -zq -bt=nt -bm -w3 -3s -i. -i../../../../../include -d2  -DHB_TR_LEVEL_DEBUG   -fo=wait.obj  wait.c
wpp386  -zq -bt=nt -bm -w3 -3s -i. -i../../../../../include -d2  -DHB_TR_LEVEL_DEBUG   -fo=wait_dyn.obj -DHB_DYNLIB  wait.c
wlib -q -p=64 -c -n  ../../../../../lib/win/watcom/hbrtl.lib -+abs.obj
   -+accept.obj -+ampm.obj -+at.obj -+ati.obj -+base64c.obj -+binnum.obj
   -+binnumx.obj -+box.obj -+cdpapi.obj -+chrasc.obj -+colorind.obj -+console.obj
   -+copyfile.obj -+cputime.obj -+datec.obj -+dates.obj -+dateshb.obj -+datesx.obj
   -+defpath.obj -+defpathu.obj -+descend.obj -+dirdrive.obj -+direct.obj
   -+diskspac.obj -+disksphb.obj -+do.obj -+empty.obj -+errapi.obj -+errapiu.obj
   -+errint.obj -+errintlo.obj -+file.obj -+filebuf.obj -+filehb.obj -+filesys.obj
   -+fkmax.obj -+fmhb.obj -+fnsplit.obj -+fscopy.obj -+fserr.obj -+fssize.obj
   -+fstemp.obj -+gete.obj -+gt.obj -+gtapi.obj -+gtchrmap.obj -+gtclip.obj
   -+gtfunc.obj -+gtkbstat.obj -+gtkeycod.obj -+gtsys.obj -+gttone.obj -+gx.obj
   -+hardcr.obj -+hbadler.obj -+hbbit.obj -+hbbyte.obj -+hbcrc.obj -+hbhex.obj
   -+hbfeof.obj -+hbmd5.obj -+hbntos.obj -+hbfile.obj -+hbgtcore.obj -+hbi18n1.obj
   -+hbinet.obj -+hbproces.obj -+hbprocfn.obj -+hbrandom.obj -+hbregex.obj
   -+hbregexc.obj -+hbrunfun.obj -+hbsha1.obj -+hbsha1hm.obj -+hbsha2.obj
   -+hbsha2hm.obj -+hbsocket.obj -+hbstrfmt.obj -+hbstrsh.obj -+hbtoken.obj
   -+hbzlib.obj -+hbzlibgz.obj -+idle.obj -+idlex.obj -+inkey.obj -+inkeyapi.obj
   -+is.obj -+isprint.obj -+itemseri.obj -+lang.obj -+langapi.obj -+left.obj
   -+len.obj -+lennum.obj -+math.obj -+maxrow.obj -+memofile.obj -+minmax.obj
   -+mlcfunc.obj -+mod.obj -+mouse53.obj -+mouseapi.obj -+mousehb.obj -+mousex.obj
   -+mtran.obj -+natmsg.obj -+natmsgu.obj -+net.obj -+oemansi.obj -+oemansix.obj
   -+oldbox.obj -+oldclear.obj -+pad.obj -+padc.obj -+padl.obj -+padr.obj
   -+philes.obj -+philes53.obj -+philesx.obj -+rat.obj -+replic.obj -+right.obj
   -+round.obj -+run.obj -+samples.obj -+saverest.obj -+scroll.obj -+scrrow.obj
   -+secondfs.obj -+seconds.obj -+setcolor.obj -+setcurs.obj -+setkey.obj
   -+setpos.obj -+setposbs.obj -+sha1.obj -+sha1hmac.obj -+sha2.obj -+sha2hmac.obj
   -+shadow.obj -+shadowu.obj -+soundex.obj -+space.obj -+spfiles.obj -+str.obj
   -+strc.obj -+strcase.obj -+strmatch.obj -+strpeek.obj -+strtoexp.obj
   -+strtran.obj -+strxor.obj -+strzero.obj -+stuff.obj -+substr.obj -+tone.obj
   -+trace.obj -+transfrm.obj -+trim.obj -+tscalara.obj -+tscalarb.obj
   -+tscalarc.obj -+tscalard.obj -+tscalarh.obj -+tscalarl.obj -+tscalarn.obj
   -+tscalarp.obj -+tscalars.obj -+tscalart.obj -+tscalaru.obj -+type.obj -+val.obj
   -+valtostr.obj -+valtype.obj -+version.obj -+word.obj -+xhelp.obj -+xsavescr.obj
   -+achoice.obj -+adir.obj -+alert.obj -+altd.obj -+base64.obj -+browdb.obj
   -+browdbx.obj -+browse.obj -+checkbox.obj -+color53.obj -+dbedit.obj
   -+devoutp.obj -+dircmd.obj -+dirscan.obj -+einstv52.obj -+einstvar.obj
   -+einstvau.obj -+errsys.obj -+fieldbl.obj -+getlist.obj -+getsys.obj
   -+getsys53.obj -+gui.obj -+hbi18n2.obj -+hbini.obj -+input.obj -+listbox.obj
   -+memoedit.obj -+memvarbl.obj -+menuto.obj -+menusys.obj -+objfunc.obj
   -+perfuncs.obj -+profiler.obj -+pushbtn.obj -+radiobhb.obj -+radiobtn.obj
   -+radiogrp.obj -+readkey.obj -+readvar.obj -+scrollbr.obj -+setfunc.obj
   -+setta.obj -+tclass.obj -+tbcolumn.obj -+tbrowse.obj -+tbrowsys.obj
   -+teditor.obj -+text.obj -+tget.obj -+tgethb.obj -+tgetint.obj -+tgetlist.obj
   -+tgetx.obj -+thfuncx.obj -+tlabel.obj -+tmenuitm.obj -+tmenusys.obj
   -+tobject.obj -+tpersist.obj -+tpopup.obj -+treport.obj -+tscalar.obj
   -+tsymbol.obj -+ttextlin.obj -+tthreadx.obj -+ttopbar.obj -+typefile.obj
   -+typefilx.obj -+valtoexp.obj -+wait.obj
Error! Library too large.  Recommend splitting the library into two or trying a page_bound larger than 64.
make[3]: *** [hbrtl.lib] Error 8
make[2]: *** [descend] Error 2
make[1]: *** [rtl] Error 2
make: *** [source] Error 2

(line broken 'cause it was was too long)

this does not happen for HB_PLATFORM=os2.

do i get it right that openwatcom on a linux host is only for 
cross-compiling to win/dos/os2 targets (ie. openwatcom can not build a 
native linux hb)?

when does one need to use HB_XBUILD=yes? i'm getting the idea that 
"always if your host and target platforms differ", though i was able 
to cross-build from linux to win target using mingw32.

thanks,

-- 
[-]

mkdir /nonexistent
From harbour.01 at syenar.hu  Mon Sep  7 13:31:28 2009
From: harbour.01 at syenar.hu (=?ISO-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep  7 13:31:39 2009
Subject: [Harbour] watcom on linux xbuild win failure
In-Reply-To: <alpine.GSO.2.00.0909071843560.17720@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909071843560.17720@dawn.royalcomp.hu>
Message-ID: <B46DE532-ACBF-435E-BC5B-6E4DDD85E7DD@syenar.hu>

Hi,

> wlib -q -p=64 -c -n  ../../../../../lib/win/watcom/hbrtl.lib -+abs.obj
> Error! Library too large.  Recommend splitting the library into two  
> or trying a page_bound larger than 64.
> make[3]: *** [hbrtl.lib] Error 8
> make[2]: *** [descend] Error 2
> make[1]: *** [rtl] Error 2
> make: *** [source] Error 2
>
> (line broken 'cause it was was too long)

Try with a higher value in -p=64 option. Dunno what are
the rules here, but 128 is something to try.

> this does not happen for HB_PLATFORM=os2.
>
> do i get it right that openwatcom on a linux host is only for
> cross-compiling to win/dos/os2 targets (ie. openwatcom can not build a
> native linux hb)?

It can. (though I never personally tried that scenario. Przemek did
it for sure though.)

> when does one need to use HB_XBUILD=yes? i'm getting the idea that
> "always if your host and target platforms differ", though i was able
> to cross-build from linux to win target using mingw32.

HB_XBUILD suppresses all *default* header locations used
for external component detection. (The name HB_XBUILD is
not yet finalized, I'll try to come with something which
better describes its purpose).

Brgds,
Viktor

From ice at extreme.hu  Mon Sep  7 14:17:42 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Mon Sep  7 14:17:49 2009
Subject: [Harbour] watcom on linux xbuild win failure
In-Reply-To: <B46DE532-ACBF-435E-BC5B-6E4DDD85E7DD@syenar.hu>
References: <alpine.GSO.2.00.0909071843560.17720@dawn.royalcomp.hu>
	<B46DE532-ACBF-435E-BC5B-6E4DDD85E7DD@syenar.hu>
Message-ID: <alpine.GSO.2.00.0909072000360.17720@dawn.royalcomp.hu>

On Mon, 7 Sep 2009, Viktor Szak?ts wrote:

hi,

 > > wlib -q -p=64 -c -n  ../../../../../lib/win/watcom/hbrtl.lib -+abs.obj
 > > Error! Library too large.  Recommend splitting the library into two or
 > > trying a page_bound larger than 64.
 > > make[3]: *** [hbrtl.lib] Error 8
 > > make[2]: *** [descend] Error 2
 > > make[1]: *** [rtl] Error 2
 > > make: *** [source] Error 2
 > > 
 > > (line broken 'cause it was was too long)
 > 
 > Try with a higher value in -p=64 option. Dunno what are
 > the rules here, but 128 is something to try.

ok, 65 is enough (whatever that actually means ;). this doesn't seem 
to break neither the os2 nor the dos target, nor native linux.

 > > do i get it right that openwatcom on a linux host is only for
 > > cross-compiling to win/dos/os2 targets (ie. openwatcom can not build a
 > > native linux hb)?
 > 
 > It can. (though I never personally tried that scenario. Przemek did
 > it for sure though.)
 > 
 > > when does one need to use HB_XBUILD=yes? i'm getting the idea that
 > > "always if your host and target platforms differ", though i was able
 > > to cross-build from linux to win target using mingw32.
 > 
 > HB_XBUILD suppresses all *default* header locations used
 > for external component detection. (The name HB_XBUILD is
 > not yet finalized, I'll try to come with something which
 > better describes its purpose).

ok, this was the missing piece. this is needed for watcom to build for 
linux on linux. thanks.

-- 
[-]

mkdir /nonexistent
From francek.prijatelj at siol.net  Mon Sep  7 14:35:17 2009
From: francek.prijatelj at siol.net (=?windows-1250?Q?FRAN=C8EK_PRIJATELJ?=)
Date: Mon Sep  7 14:35:24 2009
Subject: [Harbour] HOWTO about codepage in HbQt
Message-ID: <4AA55265.1080808@siol.net>

Hi Pritpal

Is there a function equivalent of  HB_SetCodePage("SLWIN") in HbQt.
I would like to use  cp1250 tekst on buttons:

    oBtn := QPushButton():new( QT_PTROF( oWnd ) )
    oBtn:setText( "Push Button ??????" )

BRGS
Fran?ek

-------------- next part --------------
A non-text attachment was scrubbed...
Name: francek_prijatelj.vcf
Type: text/x-vcard
Size: 182 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090907/77a829bc/francek_prijatelj.vcf
From bedipritpal at hotmail.com  Mon Sep  7 14:42:54 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep  7 14:43:00 2009
Subject: [Harbour] HOWTO about codepage in HbQt
In-Reply-To: <4AA55265.1080808@siol.net>
References: <4AA55265.1080808@siol.net>
Message-ID: <25334703.post@talk.nabble.com>


Hi


Fran?ek Prijatelj wrote:
> 
> Is there a function equivalent of  HB_SetCodePage("SLWIN") in HbQt.
> I would like to use  cp1250 tekst on buttons:
> 
>     oBtn := QPushButton():new( QT_PTROF( oWnd ) )
>     oBtn:setText( "Push Button ??????" )
> 

This is still a gray area for me.
Infact I have not looked into it deeply yet.
Documentation suggests that they have all classes in place 
but I am unable to figure-out how those classes can be 
made functional with HB_SetCodePage("SLWIN")  call.

Anyone to suggest something on the subject?

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/HOWTO-about-codepage-in-HbQt-tp25334628p25334703.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vszakats at users.sourceforge.net  Mon Sep  7 15:18:36 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep  7 15:18:41 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12433] trunk/harbour
Message-ID: <E1MkjjY-0005P5-3h@bj8yhf1.ch3.sourceforge.com>

Revision: 12433
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12433&view=rev
Author:   vszakats
Date:     2009-09-07 19:18:35 +0000 (Mon, 07 Sep 2009)

Log Message:
-----------
2009-09-07 21:16 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  + contrib/hbnetio/utils
  + contrib/hbnetio/utils/netiosrv.prg
  + contrib/hbnetio/utils/hbmk.hbm
    + Committed simple server code posted in the ChangeLog entry
      from Przemek. I've added very simple passing of port and
      address parameters, this can be enhanced in the future 
      using proper switches. Plus maybe an option to avoid 
      accidental exit by keypress.

Modified Paths:
--------------
    trunk/harbour/ChangeLog

Added Paths:
-----------
    trunk/harbour/contrib/hbnetio/utils/
    trunk/harbour/contrib/hbnetio/utils/hbmk.hbm
    trunk/harbour/contrib/hbnetio/utils/netiosrv.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Mon Sep  7 15:22:27 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep  7 15:22:34 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12434]
	trunk/harbour/config/common/watcom.mk
Message-ID: <E1MkjnH-0005U3-Oo@bj8yhf1.ch3.sourceforge.com>

Revision: 12434
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12434&view=rev
Author:   vszakats
Date:     2009-09-07 19:22:27 +0000 (Mon, 07 Sep 2009)

Log Message:
-----------
2009-09-07 21:21 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/common/watcom.mk
    ! Upped -p linker option (from 64 to 72) to not choke on hbrtl
      in some certain build situations.
      Thanks to Tamas Tevesz for report/testing.

Modified Paths:
--------------
    trunk/harbour/config/common/watcom.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Mon Sep  7 15:23:01 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep  7 15:23:08 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12435]
	trunk/harbour/ChangeLog
Message-ID: <E1Mkjnp-0005Ue-E4@bj8yhf1.ch3.sourceforge.com>

Revision: 12435
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12435&view=rev
Author:   vszakats
Date:     2009-09-07 19:23:00 +0000 (Mon, 07 Sep 2009)

Log Message:
-----------
missed the entry from ChangeLog:

2009-09-07 21:21 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/common/watcom.mk
    ! Upped -p linker option (from 64 to 72) to not choke on hbrtl
      in some certain build situations.
      Thanks to Tamas Tevesz for report/testing.

Modified Paths:
--------------
    trunk/harbour/ChangeLog


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From francek.prijatelj at siol.net  Mon Sep  7 15:24:01 2009
From: francek.prijatelj at siol.net (=?UTF-8?Q?Fran=C4=8Dek_Prijatelj?=)
Date: Mon Sep  7 15:24:06 2009
Subject: [Harbour] HOWTO about codepage in HbQt
In-Reply-To: <25334703.post@talk.nabble.com>
References: <4AA55265.1080808@siol.net> <25334703.post@talk.nabble.com>
Message-ID: <25335153.post@talk.nabble.com>


Hi

Thanks for your quick answer.
I just started reading "Internationalization with Qt"
and I hope to have solution in few days.

Regards
Fran?ek Prijatelj



Pritpal Bedi wrote:
> 
> Hi
> 
> 
> Fran?ek Prijatelj wrote:
>> 
>> Is there a function equivalent of  HB_SetCodePage("SLWIN") in HbQt.
>> I would like to use  cp1250 tekst on buttons:
>> 
>>     oBtn := QPushButton():new( QT_PTROF( oWnd ) )
>>     oBtn:setText( "Push Button ??????" )
>> 
> 
> This is still a gray area for me.
> Infact I have not looked into it deeply yet.
> Documentation suggests that they have all classes in place 
> but I am unable to figure-out how those classes can be 
> made functional with HB_SetCodePage("SLWIN")  call.
> 
> Anyone to suggest something on the subject?
> 
> Regards
> Pritpal Bedi
> 
> 

-- 
View this message in context: http://www.nabble.com/HOWTO-about-codepage-in-HbQt-tp25334628p25335153.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Mon Sep  7 16:29:16 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep  7 16:29:21 2009
Subject: [Harbour] HBNETIO - A Case Study
Message-ID: <25335910.post@talk.nabble.com>


Hello All

Here are the steps I took to convert my flagship 
application "Vouch" ( a mini ERP solutions for a variety of verticals )
to honor HBNETIO lib along-with normal execution as ususal.

BACKDROP
=======
I use configuration file vouch.ini to set various parameters of the 
application, which beside setting extended protocols, sets the data 
paths too. So at any given point of execution every table/index/other
file always contain fully qualified path.

This principal I adopted and implemented in my applications 
always made my efforts to switch to different RDD's which a minimum
efforts and changes in the source code. Even mixing different RDDs 
for different parts of the application are made possible and been 
used successfully.

A table when used has this format:
   c:\creative.ram\checks.dbf  [ index: c:\creative.ram\checks.z01 ]
   ^^^^^^^^^^                                   ROOT FOLDER
                         ^^^^^^^                   TABLE
        =>
   net:checks.dbf

   c:\creative.ram\cac00001\vpn453za.dbf
   c:\creative.ram\caccomon\defaults.dbf   , etc
   ^^^^^^^^^^                                   ROOT FOLDER
                         ^^^^^^^                    AREA OF OPERATION
                                         ^^^^^^^    TABLE NAME
        =>
   net:caccomon\defaults.dbf

For HBNETIO protocol I just changed the root data path of any 
supported file [ .dbf | .z01 (CDX) ] [ which must reside on the 
data server ] with "net:" and that's it.

I executed the netiosrv.exe as:
   c:\creative.acp\netio\netiosrv.exe  63000  0.0.0.0  c:\creative.ram

And included in vouch.exe:

   #if 1   /* Net IO Client-Server Protocol */
      IF INIVLW( "NetIOEnabled" )
         cNetIOServer := IniValue( 'NetIOServer' )
         cNetIOPort   := IniValue( 'NetIOPort'   )
         IF !empty( cNetIOServer ) .and. !empty( cNetIOPort )
            lSuccess  := netio_connect( cNetIOServer, val( cNetIOPort ) )
            uiDebug( "netio_connect()", lSuccess, cNetIOServer, cNetIOPort )
            uiDebug( " " )
         ENDIF
      ENDIF
   #endif

IniValue() parses the vouch.ini and keeps in static variable and 
supplies a value as requested.

The other functions which I adjusted to change the root
folder to "net:" looks like this:

Function VouExistTable( cAlias, cFile, cPath, cDriver, lTemp )
   Local lRet := .f.

   DEFAULT lTemp TO .f.

   cFile := UPPER( trim( cFile ) )
   if right( cFile,4 ) == '.DBF'
      cFile := substr( cFile, 1, len( cFile )-4 )
   endif

   do case

   case lTemp
      lRet := file( cPath +'\'+ cFile + '.DBF' )

   case cDriver == 'SQLRDD'
      lRet := VouIsFile( cFile )

   case cDriver == 'CACHERDD'
      #ifdef __CACHE__
      lRet := CacheExistTable( cFile )
      #endif

   otherwise
      IF Vou_IsNetIO()
         IF right( cPath, 1 ) == ":"
            cFile := cPath + cFile + '.DBF'
         ELSE
            cFile := cPath +'\'+ cFile + '.DBF'
         ENDIF
      ELSE
         cFile := cPath +'\'+ cFile + '.DBF'
      ENDIF
      lRet := DbExists( cFile )

   endcase

   Return lRet

//----------------------------------------------------------------------//

Function VouExistIndex( cAlias, cFile, cPath, cDriver, lTemp )
   Local lRet := .f.

   DEFAULT lTemp TO .f.

   cFile := UPPER( trim( cFile ) )
   if right( cFile,4 ) == '.Z01'
      cFile := substr( cFile, 1, len( cFile )-4 )
   endif

   do case

   case lTemp
      lRet := file( cPath +'\'+ cFile + '.Z01' )

   case cDriver == 'SQLRDD'
      lRet := VouIsFile( cFile,.t. )

   case cDriver == 'CACHERDD'
      #ifdef __CACHE__
      lRet := CacheExistIndex( cFile )
      #endif

   otherwise
      IF Vou_IsNetIO()
         IF right( cPath, 1 ) == ":"
            cFile := cPath + cFile + '.Z01'
         ELSE
            cFile := cPath +'\'+ cFile + '.Z01'
         ENDIF
      ELSE
         cFile := cPath +'\'+ cFile + '.Z01'
      ENDIF
      lRet := DbExists( cFile )

   endcase

   Return lRet

//----------------------------------------------------------------------//

FUNCTION Vou_IsNetIO()

   IF INIVLW( 'NetIOEnabled' )
      RETURN .t.
   ENDIF

   RETURN .f.

/*----------------------------------------------------------------------*/

FUNCTION Get_Path( cAlias )
   LOCAL cPath, p

   IF !empty( p := get_d_attr( cAlias,D_PATH ) )
      cPath := eval( COMPILE( p ) )
   ELSE
      cPath := setWPath()
   ENDIF

   IF get_d_attr( cAlias, D_FILE_TYPE ) <> 9  /* Vouch Specific and on the
Client */
      cPath := Vou_AdjustPathToNetIO( cPath )
   ENDIF

   RETURN cPath

/*----------------------------------------------------------------------*/

FUNCTION Vou_AdjustPathToNetIO( cPath )
   LOCAL n, cPathL

   IF Vou_IsNetIO()
      cPathL := lower( cPath )
      IF left( cPathL, 4 ) != "net:"
         n := at( 'creative.',  cPathL )
         IF n > 0  // And it must be
            cPath := "net:" + substr( cPath, n + 13 )
         ENDIF
      ENDIF
   ENDIF

   RETURN cPath

//----------------------------------------------------------------------//


NOTE: the above code is a case study only and should not 
         be used as is. However you may adopt the similar approach if 
         you want to.


OTHER CHANGES YOU MAY REQUIRE
==========================
   You may also need to swich to following changes which work in both modes.

   FILE()       =>   DBEXISTS()
   FERASE()   =>   DBDROP()
   
THE OBSERVATION
==============
   netiosrv.prg

//------------------------------//
proc main( cPort, cServer, cRoot ) 
   local pListenSocket 

   if empty( cPort )
      cPort := '63000'
   endif

   pListenSocket := netio_mtserver( val( cPort ), cServer, cRoot ) 

   if empty( pListenSocket ) 
      ? "Cannot start server." 
   else 
      wait "Press any key to stop NETIO server." 
      netio_serverstop( pListenSocket ) 
      pListenSocket := NIL 
   endif 

   return 
//------------------------------//

   netiosrv.prg => hbmk2 netiosrv.hbp => netiosrv.exe 

   * Consumes very little memory footprint : 2.5 MB
   * Consumes very little CPU time even if many instances are logged : 3-5%
   * With each instance increase in memory : 16 KB
   * Reduces 16 kb with every instance if quits or is killed
   * Record|File locks a released instantlt if an instance holding them is
killed.

THE EXPECTATIONS
===============
   Would been nice if root path be automatically stripped 
   if "net:" is found a part of the table name, i.e., 
      net:c:\creative.ram\cac00001\mytable.dbf 
         =>
      net:cac00001\mytable.dbf
          where
      c:\creative.ram == netiosrv's root path

THE RESULTS
==========
   Amazing.
   Przemek, accept my hats off to this contribution.

   BUT it will be really heartening if you decide to finish NETRDD.
   The community is looking at NETRDD desperately.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/HBNETIO---A-Case-Study-tp25335910p25335910.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at users.sourceforge.net  Mon Sep  7 16:30:07 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Mon Sep  7 16:30:13 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12436] trunk/harbour
Message-ID: <E1Mkkql-0003gI-Cn@d5vjzd1.ch3.sourceforge.com>

Revision: 12436
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12436&view=rev
Author:   druzus
Date:     2009-09-07 20:30:06 +0000 (Mon, 07 Sep 2009)

Log Message:
-----------
2009-09-07 22:29 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/thread.c
    + added HB_MT() PRG function which exists only in MT HVM version and
      can be REQUESTed from .prg code to force linking MT HVM.

  * harbour/contrib/hbnetio/utils/netiosrv.prg
    ! fixed typo in port parameter support
    * modified name of second parameter. Instead of 'address' use 'ifaddr'
      (interface address) which seems to be more precise name.
    * added 'request HB_MT' to protect linking with HVM without MT support.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbnetio/utils/netiosrv.prg
    trunk/harbour/source/vm/thread.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From gvarona at ec-red.com  Mon Sep  7 16:39:10 2009
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Mon Sep  7 16:36:22 2009
Subject: [Harbour] Exist PICTURE for password with GET?
In-Reply-To: <20090906170345.24469.qmail@ml110b.qnet.com.pe>
References: <20090906152753.29705.qmail@ml110b.qnet.com.pe>	<011271D9-7140-4518-B15E-60E1FBD4A597@syenar.hu>
	<20090906170345.24469.qmail@ml110b.qnet.com.pe>
Message-ID: <4AA56F6E.3080104@ec-red.com>

Hi
?Algui?n tendr? algun ejemplo del uso de la clase HB_GET?

[Powered by Google]
Does anyone have any example of using class HB_GET?

TIA

Best Regars
GVS


gvarona escribi?:
> Viktor Szak?ts escribi?:
>> Harbour has an extended GET class called HB_GET, which
>> has this functionality. It can be enabled via ::hideInput( .T. )
>> method call.
>
> Hi Viktor, How use this extended?
> I have this, but not work.
> PROCEDURE Main
> LOCAL cVar := SPAC(10)
> oGet := HB_GET()
> oGet:name := "cVar"
> oGet:row := 10
> oGet:col := 10
> oGet:hideInput := .T.
> oGet:style := "#"
> ? oget:name
> ? oget:style
> wait
> READ
> READMODAL({oGet})
> ? cVar
> return
> Help please
> TIA
> Best regards
> GVS
> ---------------------------------------------------------------
> EC Red Internet gr@tis
> Inscr?bete en www.ec-red.com
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>

From ice at extreme.hu  Mon Sep  7 17:02:08 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Mon Sep  7 17:02:15 2009
Subject: [Harbour] gcc/cpp failure on sunos
Message-ID: <alpine.GSO.2.00.0909072257540.17720@dawn.royalcomp.hu>


hi,

solaris 10, sparc, g++ 4.0.2:

! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh   
! HB_INSTALL_PREFIX: /home/ice/inst/sunos/gcc/cpp
! HB_BUILD_DEBUG: yes
! HB_BUILD_OPTIM: no
! HB_BUILD_MODE: cpp
! HB_CONTRIBLIBS: no
! HB_HOST_PLAT: sunos  HB_SHELL: sh
! HB_PLATFORM: sunos 
! HB_COMPILER: gcc 
! Component: 'openssl' not found
! Component: 'gpm' explicitly disabled
! Component: 'slang' explicitly disabled
! Component: 'curses' found in /usr/include
! Component: 'x11' found in /usr/include
! Component: 'wattcp/watt-32' not supported on sunos platform
! REVISION: 12435
make[2]: Nothing to be done for `all'.
make[1]: Nothing to be done for `all'.
g++  -I. -I../../../../../include  -Wall -W -fPIC -g -DHB_TR_LEVEL_DEBUG   -o expropt1.o -c ../../../expropt1.c
g++  -I. -I../../../../../include  -Wall -W -fPIC -g -DHB_TR_LEVEL_DEBUG   -o expropt2.o -c ../../../expropt2.c
g++  -I. -I../../../../../include  -Wall -W -fPIC -g -DHB_TR_LEVEL_DEBUG   -o hbffind.o -c ../../../hbffind.c
g++  -I. -I../../../../../include  -Wall -W -fPIC -g -DHB_TR_LEVEL_DEBUG   -o hbfopen.o -c ../../../hbfopen.c
g++  -I. -I../../../../../include  -Wall -W -fPIC -g -DHB_TR_LEVEL_DEBUG   -o hbfsapi.o -c ../../../hbfsapi.c
g++  -I. -I../../../../../include  -Wall -W -fPIC -g -DHB_TR_LEVEL_DEBUG   -o hbgete.o -c ../../../hbgete.c
g++  -I. -I../../../../../include  -Wall -W -fPIC -g -DHB_TR_LEVEL_DEBUG   -o hbwince.o -c ../../../hbwince.c
g++  -I. -I../../../../../include  -Wall -W -fPIC -g -DHB_TR_LEVEL_DEBUG   -o hbhash.o -c ../../../hbhash.c
g++  -I. -I../../../../../include  -Wall -W -fPIC -g -DHB_TR_LEVEL_DEBUG   -o hbprintf.o -c ../../../hbprintf.c
../../../hbprintf.c: In function 'int hb_vsnprintf(char*, size_t, const char*, void*)':
../../../hbprintf.c:1066: error: 'isinf' was not declared in this scope
make[3]: *** [hbprintf.o] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [common] Error 2
make: *** [source] Error 2

this one seems to be all over the place, google isinf solaris, isinf 
sunmath.h and the like, with differing suggestions for a fix. i got 
lost in the macros in hbprintf.c :(

-- 
[-]

mkdir /nonexistent
From ice at extreme.hu  Mon Sep  7 17:14:13 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Mon Sep  7 17:14:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12436] trunk/harbour
In-Reply-To: <E1Mkkql-0003gI-Cn@d5vjzd1.ch3.sourceforge.com>
References: <E1Mkkql-0003gI-Cn@d5vjzd1.ch3.sourceforge.com>
Message-ID: <alpine.GSO.2.00.0909072302230.17720@dawn.royalcomp.hu>

On Mon, 7 Sep 2009, druzus@users.sourceforge.net wrote:

hi,

 > 2009-09-07 22:29 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
 >   * harbour/source/vm/thread.c
 >     + added HB_MT() PRG function which exists only in MT HVM version and
 >       can be REQUESTed from .prg code to force linking MT HVM.

this broke several combinations:

linux, sunpro, both c and cpp (with minimal differences in the wording
of the error message):

! HB_BUILD_DEBUG: yes
! HB_BUILD_OPTIM: no
! HB_BUILD_MODE: c (also cpp)
! HB_CONTRIBLIBS: no
! HB_HOST_PLAT: linux  HB_SHELL: sh
! HB_PLATFORM: linux 
! HB_COMPILER: sunpro 

ar   crs ../../../../../lib/linux/sunpro/libhbvm.a hvmall.o arrayshb.o asort.o break.o cmdarg.o debug.o dynlibhb.o eval.o evalhb.o extrap.o hashfunc.o initexit.o initsymb.o memvclip.o pcount.o pvalue.o proc.o runner.o vm.o main.o harbinit.o || ( rm -f ../../../../../lib/linux/sunpro/libhbvm.a && false )
suncc  -I. -I../../../../../../include  -KPIC  -erroff=%none -g -DHB_TR_LEVEL_DEBUG  -DHB_MT_VM  -o hvmall.o -c ../../../../hvmall.c
"../../../../thread.c", line 2512: undefined symbol: _hb_stack_ptr_
"../../../../thread.c", line 2512: cannot dereference non-pointer type
"../../../../thread.c", line 2512: warning: left operand of "." must be struct/union object
"../../../../thread.c", line 2512: cannot access member of non-struct/union object
cc: acomp failed for ../../../../hvmall.c
make[4]: *** [hvmall.o] Error 1
make[3]: *** [descend] Error 2
make[2]: *** [vmmt] Error 2
make[1]: *** [vm] Error 2
make: *** [source] Error 2

linux, mingw to win, both c and cpp (with minimal differences in the wording
of the error message):

! HB_BUILD_DEBUG: yes
! HB_BUILD_OPTIM: no
! HB_BUILD_MODE: c (also cpp)
! HB_CONTRIBLIBS: no
! HB_HOST_PLAT: linux  HB_SHELL: sh
! HB_PLATFORM: win (x86) 
! HB_COMPILER: mingw (autodetected: /usr/bin/)

/usr/bin/i586-mingw32msvc-gcc  -I. -I../../../../../../include  -Wall -W -g -DHB_TR_LEVEL_DEBUG  -DHB_MT_VM  -ohvmall.o -c ../../../../hvmall.c
In file included from ../../../../hvmall.c:89:
../../../../thread.c: In function ?HB_FUN_HB_MT?:
../../../../thread.c:2512: error: ?_hb_stack_ptr_? undeclared (first use in this function)
../../../../thread.c:2512: error: (Each undeclared identifier is reported only once
../../../../thread.c:2512: error: for each function it appears in.)
make[4]: *** [hvmall.o] Error 1
make[3]: *** [descend] Error 2
make[2]: *** [vmmt] Error 2
make[1]: *** [vm] Error 2
make: *** [source] Error 2

linux xbuild dos/watcom, linux/gcc, linux/g++, linux/watcom, linux 
xbuild win/watcom seem fine.

-- 
[-]

mkdir /nonexistent
From ice at extreme.hu  Mon Sep  7 17:42:04 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Mon Sep  7 17:42:11 2009
Subject: [Harbour] sun/cpp on sunos build failure
Message-ID: <alpine.GSO.2.00.0909072151380.17720@dawn.royalcomp.hu>


hi,

sunos (solaris 10/sparc), sunpro 5.9 p124863-15, c++ mode, can't 
pinpoint anything obvious, so here's the complete build log at 

http://dawn.dev.hu/~ice/tmp/log_sunos_sunpro_cpp.gz

the failure itself is:

! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh   
! HB_INSTALL_PREFIX: /home/ice/inst/sunos/sunpro/cpp
! HB_BUILD_DEBUG: yes
! HB_BUILD_OPTIM: no
! HB_BUILD_MODE: cpp
! HB_CONTRIBLIBS: no
! HB_HOST_PLAT: sunos  HB_SHELL: sh
! HB_PLATFORM: sunos 
! HB_COMPILER: sunpro 
! Component: 'openssl' not found
! Component: 'gpm' explicitly disabled
! Component: 'slang' explicitly disabled
! Component: 'curses' found in /usr/include
! Component: 'x11' found in /usr/include
! Component: 'wattcp/watt-32' not supported on sunos platform
! REVISION: 12435
[...]
sunCC  -I. -I../../../../../include  -xcode=pic32  -erroff=%none -g -DHB_TR_LEVEL_DEBUG   -o hbrun.o -c hbrun.c
"hbrun.c", line 157: Warning (Anachronism): Using extern "C" void(*)() to initialize void(*)().
[...]
"hbrun.c", line 159: Warning: attribute constructor is unsupported and will be skipped..
64 Warning(s) detected.
sunCC  -xcode=pic32  -erroff=%none -g -o ../../../../../bin/sunos/sunpro/hbrun hbrun.o   -L../../../../../lib/sunos/sunpro -L/usr/X11R6/lib   -lhbextern -lhbdebug -lhbvm -lhbrtl -lhblang -lhbcpage -lgtcgi -lgtpca -lgtstd -lgtcrs -lgtxwc -lgttrm -lhbrdd -lrddntx -lrddnsx -lrddcdx -lrddfpt -lhbsix -lhbhsx -lhbusrrdd -lhbuddall -lhbrtl -lhbvm -lhbmacro -lhbcplr -lhbpp -lhbcommon -lhbpcre -lhbzlib -lcurses -lX11 -lrt -lsocket -lnsl -lresolv -lm
Undefined			first referenced
 symbol  			    in file
int _pcre_is_newline(const unsigned char*,int,const unsigned char*,int*,int) ../../../../../lib/sunos/sunpro/libhbpcre.a(pcrecomp.o)
int _pcre_was_newline(const unsigned char*,int,const unsigned char*,int*,int) ../../../../../lib/sunos/sunpro/libhbpcre.a(pcreexec.o)
ld: fatal: Symbol referencing errors. No output written to ../../../../../bin/sunos/sunpro/hbrun
make[3]: *** [hbrun] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [hbrun] Error 2
make: *** [utils] Error 2

doesn't happen on linux, where sunc is 5.10 (5.9 on sparc is the 
newest, corresponding to sun studio 12 update 1); also c mode is ok, 
gcc/c too.

thanks,

-- 
[-]

mkdir /nonexistent
From phil at newstar.rinet.ru  Mon Sep  7 17:55:11 2009
From: phil at newstar.rinet.ru (Phil Krylov)
Date: Mon Sep  7 17:55:36 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12436] trunk/harbour
In-Reply-To: <E1Mkkql-0003gI-Cn@d5vjzd1.ch3.sourceforge.com>
References: <E1Mkkql-0003gI-Cn@d5vjzd1.ch3.sourceforge.com>
Message-ID: <c10dbf450909071455j7ba54c38j14246dacc0c220a7@mail.gmail.com>

Hi,

On Tue, Sep 8, 2009 at 12:30 AM, <druzus@users.sourceforge.net> wrote:
> 2009-09-07 22:29 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> ?* harbour/source/vm/thread.c
> ? ?+ added HB_MT() PRG function which exists only in MT HVM version and
> ? ? ?can be REQUESTed from .prg code to force linking MT HVM.

I think it misses a HB_STACK_TLS_PRELOAD:

gcc  -I. -I../../../../../../include -no-cpp-precomp -fno-common -Wall
-W -O3  -DHB_MT_VM  -o hvmall.o -c ../../../../hvmall.c
In file included from ../../../../hvmall.c:89:
../../../../thread.c: In function ?HB_FUN_HB_MT?:
../../../../thread.c:2512: error: ?_hb_stack_ptr_? undeclared (first
use in this function)
../../../../thread.c:2512: error: (Each undeclared identifier is
reported only once
../../../../thread.c:2512: error: for each function it appears in.)

-- Ph.
From vszakats at users.sourceforge.net  Mon Sep  7 20:46:05 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep  7 20:46:10 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12437] trunk/harbour
Message-ID: <E1MkoqT-0002T4-7U@dn4whf1.ch3.sourceforge.com>

Revision: 12437
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12437&view=rev
Author:   vszakats
Date:     2009-09-08 00:45:56 +0000 (Tue, 08 Sep 2009)

Log Message:
-----------
2009-09-08 02:44 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed to work on newer Darwin systems (f.e. latest XCode
      with gcc 4.2.1). -Wno-long-double option had to be removed.
      This way hbmk2 is in sync with GNU Make.

  * source/vm/thread.c
    ! Fixed to compile HB_MT().

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/vm/thread.c
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From francek.prijatelj at siol.net  Tue Sep  8 03:13:49 2009
From: francek.prijatelj at siol.net (=?UTF-8?Q?Fran=C4=8Dek_Prijatelj?=)
Date: Tue Sep  8 03:13:54 2009
Subject: [Harbour] HOWTO about codepage in HbQt
In-Reply-To: <25334703.post@talk.nabble.com>
References: <4AA55265.1080808@siol.net> <25334703.post@talk.nabble.com>
Message-ID: <25340944.post@talk.nabble.com>


Hi Pritpal

Obviously we need Qstring implementation (not nedded for begining).
Instead of using char* we have to use QString and its methods.
By default Qstring uses "fromAscii()" method on char* assignement.

You should change in hbqt.h (for begining)

#define hbqt_par_QString( n )                ( ( QString ) hb_parcx( n ) )
to
#define hbqt_par_QString( n )               (QString::fromLocal8Bit(
hb_parcx( n )))

I have tried it with demoqt, and it works.

Of course we need more sofisticated system.
For example  I intend to use utf-8 encoding for all UI 
so there should be ::fromUtf8 method instead of ::fromLocal8bit.
It would be very simple to write universal function that depends
on some  "SET QT_CP   xxxx " seting.


Here is naive example in cpp how to use local encoding .
We should use it by default.

#include <QApplication>
#include <QFont>
#include <QPushButton>

int main(int argc, char* argv[])
{
    QApplication app(argc, argv);
    //-----   wrong -------------
    //char * cBtnCapt= "Qu ???";
    //---------------------------   
    QString cBtnCapt= QString::fromLocal8Bit( "Qu ???");
    QPushButton quit(cBtnCapt);

    quit.resize(75, 30);
    quit.setFont(QFont("Times", 18, QFont::Bold));

    QObject::connect(&quit, SIGNAL(clicked()), &app, SLOT(quit()));

    quit.show();

    return app.exec();
}





Pritpal Bedi wrote:
> 
> Hi
> 
> 
> Fran?ek Prijatelj wrote:
>> 
>> Is there a function equivalent of  HB_SetCodePage("SLWIN") in HbQt.
>> I would like to use  cp1250 tekst on buttons:
>> 
>>     oBtn := QPushButton():new( QT_PTROF( oWnd ) )
>>     oBtn:setText( "Push Button ??????" )
>> 
> 
> This is still a gray area for me.
> Infact I have not looked into it deeply yet.
> Documentation suggests that they have all classes in place 
> but I am unable to figure-out how those classes can be 
> made functional with HB_SetCodePage("SLWIN")  call.
> 
> Anyone to suggest something on the subject?
> 
> Regards
> Pritpal Bedi
> 
> 

-- 
View this message in context: http://www.nabble.com/HOWTO-about-codepage-in-HbQt-tp25334628p25340944.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vszakats at users.sourceforge.net  Tue Sep  8 04:07:20 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue Sep  8 04:07:28 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12438] trunk/harbour
Message-ID: <E1MkvjU-0004nM-UK@dn4whf1.ch3.sourceforge.com>

Revision: 12438
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12438&view=rev
Author:   vszakats
Date:     2009-09-08 08:07:12 +0000 (Tue, 08 Sep 2009)

Log Message:
-----------
2009-09-08 10:04 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * contrib/hbnetio/utils/netiosrv.prg
    + Added 'root' cmdline parameter.

  * utils/hbmk2/hbmk2.prg
    + Small steps towards msvcmips and msvcsh support.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbnetio/utils/netiosrv.prg
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From alxokhotnikov at gmail.com  Tue Sep  8 04:21:59 2009
From: alxokhotnikov at gmail.com (Alexandr Okhotnikov)
Date: Tue Sep  8 04:22:05 2009
Subject: [Harbour] HOWTO about codepage in HbQt
In-Reply-To: <25340944.post@talk.nabble.com>
References: <4AA55265.1080808@siol.net> <25334703.post@talk.nabble.com>
	<25340944.post@talk.nabble.com>
Message-ID: <d6fa31440909080121g7d445f2aie39b6bdec7868dd0@mail.gmail.com>

Hi

example: (for Russian, all *.prg in codepage 1251)

INIT PROCEDURE Qt_Start()
    LOCAL lang
    qt_qapplication()

    lang := QTextCodec():new()
    lang:setCodecForCStrings( lang:codecForName_1("Windows-1251") )

    HB_SETCODEPAGE( "RU1251" )
RETURN

All messages are displayed correctly in QT
My problem in the other - in Linux (UTF8) incorrectly creates files
with national characters in name
From harbour.01 at syenar.hu  Tue Sep  8 04:39:29 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep  8 04:39:40 2009
Subject: [Harbour] Exist PICTURE for password with GET?
In-Reply-To: <4AA56F6E.3080104@ec-red.com>
References: <20090906152753.29705.qmail@ml110b.qnet.com.pe>	<011271D9-7140-4518-B15E-60E1FBD4A597@syenar.hu>
	<20090906170345.24469.qmail@ml110b.qnet.com.pe>
	<4AA56F6E.3080104@ec-red.com>
Message-ID: <49E349B5-F88C-465A-9B21-551204CEAE8E@syenar.hu>

Hi,

Please check the end of source/rtl/tget.prg, there you
can find which parameters need to be passed to hb_get():new()
to create a new instance. The parameters are the same as
for GetNew(), you can find a GetNew() example in tests/rto_get.prg.
Then you can add the created get object to GetList and
use READ.

Brgds,
Viktor

On 2009.09.07., at 10:39, Guillermo Varona Silup? wrote:

> Hi
> ?Algui?n tendr? algun ejemplo del uso de la clase HB_GET?
>
> [Powered by Google]
> Does anyone have any example of using class HB_GET?
>
> TIA
>
> Best Regars
> GVS
>
>
> gvarona escribi?:
>> Viktor Szak?ts escribi?:
>>> Harbour has an extended GET class called HB_GET, which
>>> has this functionality. It can be enabled via ::hideInput( .T. )
>>> method call.
>>
>> Hi Viktor, How use this extended?
>> I have this, but not work.
>> PROCEDURE Main
>> LOCAL cVar := SPAC(10)
>> oGet := HB_GET()
>> oGet:name := "cVar"
>> oGet:row := 10
>> oGet:col := 10
>> oGet:hideInput := .T.
>> oGet:style := "#"
>> ? oget:name
>> ? oget:style
>> wait
>> READ
>> READMODAL({oGet})
>> ? cVar
>> return
>> Help please
>> TIA
>> Best regards
>> GVS
>> ---------------------------------------------------------------
>> EC Red Internet gr@tis
>> Inscr?bete en www.ec-red.com
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From dmacias at mail.udg.mx  Tue Sep  8 04:55:35 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Sep  8 04:55:53 2009
Subject: [Harbour] Harbour under OS/2 - eCS 12437
Message-ID: <4AA61C07.3050706@mail.udg.mx>

Harbour build fine with gcc433 on Sep 5, now with
   * $Id: ChangeLog 12437 2009-09-08 00:45:56Z vszakats $
   2009-09-08 02:44 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
it fail with error:
-----------------------
[E:\harbour909c\harbour]make -r -w           1>make_gnu.log
SYS1003: The syntax of the command is incorrect.
Error occurred while processing: /q.
make[3]: *** [hbcplr.lib] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [compiler] Error 2
make: *** [source] Error 2
-----------------------

make_gnu.log does not show any reference of error

Error is happening in this line and does not fail excluding it:
-----------------------------
    $(if $(wildcard $(subst /,$(DIRSEP),$(LIB_FILE))),@$(RM) $(subst
/,$(DIRSEP),$(LIB_FILE)),)
-----------------------------

so maybe @$(RM) is wrong

config\globsh.mk contain /q only for NT:
-------------
ifeq ($(HB_SHELL),nt)
RM := del /q /f
-------------

Something was mixed in last two days

make_gnu.log headers show "HB_SHELL: nt":
-----------------
! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 E:\OS2\CMD.EXE  wr
! HB_USER_CFLAGS: -DTCPV40HDRS -DHB_FM_STATISTICS_OFF
! HB_USER_LDFLAGS: -Le:\usr\lib\tcpipv4
! HB_INSTALL_PREFIX: \harbour909c\harbour
! HB_BIN_INSTALL: \harbour909c\harbour\bin
! HB_LIB_INSTALL: \harbour909c\harbour\lib\\gcc
! HB_INC_INSTALL: \harbour909c\harbour\include
! HB_DOC_INSTALL: \harbour909c\harbour\doc
! HB_HOST_PLAT: os2 (x86)  HB_SHELL: nt
! HB_PLATFORM: os2 (x86)
-----------------

and this seem wrong too:

\harbour909c\harbour\lib\\gcc


David Macias



From dmacias at mail.udg.mx  Tue Sep  8 05:07:42 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Sep  8 05:08:00 2009
Subject: [Harbour] Re: SF.net SVN: harbour-project:[12426] trunk/harbour
Message-ID: <4AA61EDE.9060204@mail.udg.mx>

 >2009-09-07 10:52 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
 >  * harbour/source/rtl/hbsocket.c
 >    + added support for setting non blocking IO mode in OpenWatcom OS2
 >      builds - please test.

How can be tested ?

David Macias

From vszakats at users.sourceforge.net  Tue Sep  8 05:13:48 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue Sep  8 05:13:53 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12439] trunk/harbour
Message-ID: <E1Mkwlo-00067J-Jj@3kljzd1.ch3.sourceforge.com>

Revision: 12439
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12439&view=rev
Author:   vszakats
Date:     2009-09-08 09:13:47 +0000 (Tue, 08 Sep 2009)

Log Message:
-----------
2009-09-08 11:13 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/global.mk
    ! Corrected typo in de-xmastree patch. Symptom was broken
      shell detection on os2.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/global.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Tue Sep  8 05:16:11 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep  8 05:16:20 2009
Subject: [Harbour] Harbour under OS/2 - eCS 12437
In-Reply-To: <4AA61C07.3050706@mail.udg.mx>
References: <4AA61C07.3050706@mail.udg.mx>
Message-ID: <4F06E55F-7311-448E-A8C4-7587018F5CCD@syenar.hu>

Hi David,

Pls try with 12439.

Brgds,
Viktor

On 2009.09.08., at 10:55, David Arturo Macias Corona wrote:

> Harbour build fine with gcc433 on Sep 5, now with
>  * $Id: ChangeLog 12437 2009-09-08 00:45:56Z vszakats $
>  2009-09-08 02:44 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
> it fail with error:
> -----------------------
> [E:\harbour909c\harbour]make -r -w           1>make_gnu.log
> SYS1003: The syntax of the command is incorrect.
> Error occurred while processing: /q.
> make[3]: *** [hbcplr.lib] Error 1
> make[2]: *** [descend] Error 2
> make[1]: *** [compiler] Error 2
> make: *** [source] Error 2
> -----------------------
>
> make_gnu.log does not show any reference of error
>
> Error is happening in this line and does not fail excluding it:
> -----------------------------
>   $(if $(wildcard $(subst /,$(DIRSEP),$(LIB_FILE))),@$(RM) $(subst
> /,$(DIRSEP),$(LIB_FILE)),)
> -----------------------------
>
> so maybe @$(RM) is wrong
>
> config\globsh.mk contain /q only for NT:
> -------------
> ifeq ($(HB_SHELL),nt)
> RM := del /q /f
> -------------
>
> Something was mixed in last two days
>
> make_gnu.log headers show "HB_SHELL: nt":
> -----------------
> ! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
> ! MAKE: make 3.81 E:\OS2\CMD.EXE  wr
> ! HB_USER_CFLAGS: -DTCPV40HDRS -DHB_FM_STATISTICS_OFF
> ! HB_USER_LDFLAGS: -Le:\usr\lib\tcpipv4
> ! HB_INSTALL_PREFIX: \harbour909c\harbour
> ! HB_BIN_INSTALL: \harbour909c\harbour\bin
> ! HB_LIB_INSTALL: \harbour909c\harbour\lib\\gcc
> ! HB_INC_INSTALL: \harbour909c\harbour\include
> ! HB_DOC_INSTALL: \harbour909c\harbour\doc
> ! HB_HOST_PLAT: os2 (x86)  HB_SHELL: nt
> ! HB_PLATFORM: os2 (x86)
> -----------------
>
> and this seem wrong too:
>
> \harbour909c\harbour\lib\\gcc
>
>
> David Macias
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Tue Sep  8 05:21:35 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep  8 05:21:41 2009
Subject: [Harbour] Wrong autodetection in Eclipse
Message-ID: <9257026e0909080221p5f544c7bh7fc2e80f28cc7278@mail.gmail.com>

I've always built harbour using Eclipse. Today I removed sh
./make_gnu.sh and I get:

**** Build of configuration Linux GCC for project harbour ****

make clean
!HB_PLATFORM: linux
! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh clean
make: command.com: Command not found
! HB_HOST_PLAT: dos (x86)  HB_SHELL: dos
config/global.mk:802: *** ! HB_COMPILER not set, could not autodetect.  Stop.

I've also set HB_PLATFORM to linux ( see !HB_PLATFORM: linux line )
but it doesn't help.

Any idea?

best regards,
Lorenzo
From harbour.01 at syenar.hu  Tue Sep  8 05:23:48 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep  8 05:23:57 2009
Subject: [Harbour] Wrong autodetection in Eclipse
In-Reply-To: <9257026e0909080221p5f544c7bh7fc2e80f28cc7278@mail.gmail.com>
References: <9257026e0909080221p5f544c7bh7fc2e80f28cc7278@mail.gmail.com>
Message-ID: <42A30355-C354-4AB5-B25A-8E0ED31A0C6A@syenar.hu>

Pls first try after 12439. Maybe it fixes the problem.

Brgds,
Viktor

On 2009.09.08., at 11:21, Lorenzo Fiorini wrote:

> I've always built harbour using Eclipse. Today I removed sh
> ./make_gnu.sh and I get:
>
> **** Build of configuration Linux GCC for project harbour ****
>
> make clean
> !HB_PLATFORM: linux
> ! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
> ! MAKE: make 3.81 /bin/sh clean
> make: command.com: Command not found
> ! HB_HOST_PLAT: dos (x86)  HB_SHELL: dos
> config/global.mk:802: *** ! HB_COMPILER not set, could not  
> autodetect.  Stop.
>
> I've also set HB_PLATFORM to linux ( see !HB_PLATFORM: linux line )
> but it doesn't help.
>
> Any idea?
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From dmacias at mail.udg.mx  Tue Sep  8 05:37:34 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Sep  8 05:37:46 2009
Subject: [Harbour] Re: Harbour under OS/2 - eCS 12437
Message-ID: <4AA625DE.2060601@mail.udg.mx>

Thanks Viktor

 >Pls try with 12439.

It work fine now

David Macias




From harbour.01 at syenar.hu  Tue Sep  8 05:39:59 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep  8 05:40:09 2009
Subject: [Harbour] Re: Harbour under OS/2 - eCS 12437
In-Reply-To: <4AA625DE.2060601@mail.udg.mx>
References: <4AA625DE.2060601@mail.udg.mx>
Message-ID: <6C218C17-586A-448C-8A00-762172CBD109@syenar.hu>

Thank you.

Brgds,
Viktor

On 2009.09.08., at 11:37, David Arturo Macias Corona wrote:

> Thanks Viktor
>
> >Pls try with 12439.
>
> It work fine now
>
> David Macias
>
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Tue Sep  8 05:44:42 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep  8 05:44:49 2009
Subject: [Harbour] Wrong autodetection in Eclipse
In-Reply-To: <42A30355-C354-4AB5-B25A-8E0ED31A0C6A@syenar.hu>
References: <9257026e0909080221p5f544c7bh7fc2e80f28cc7278@mail.gmail.com>
	<42A30355-C354-4AB5-B25A-8E0ED31A0C6A@syenar.hu>
Message-ID: <9257026e0909080244m572ce54ch546290c7b1fd4f53@mail.gmail.com>

On Tue, Sep 8, 2009 at 11:23 AM, Viktor Szak?ts<harbour.01@syenar.hu> wrote:

> Pls first try after 12439. Maybe it fixes the problem.

Many thanks, it works now.

best regards,
Lorenzo
From francek.prijatelj at siol.net  Tue Sep  8 05:50:50 2009
From: francek.prijatelj at siol.net (=?UTF-8?Q?Fran=C4=8Dek_Prijatelj?=)
Date: Tue Sep  8 05:50:56 2009
Subject: [Harbour] HOWTO about codepage in HbQt
In-Reply-To: <d6fa31440909080121g7d445f2aie39b6bdec7868dd0@mail.gmail.com>
References: <4AA55265.1080808@siol.net> <25334703.post@talk.nabble.com>
	<25340944.post@talk.nabble.com>
	<d6fa31440909080121g7d445f2aie39b6bdec7868dd0@mail.gmail.com>
Message-ID: <25343020.post@talk.nabble.com>


Hi Alexandr

Yes this is another solution.
If we want to be portable we shuldn't use
spaces and national characters in file names.


BRGS
Fran?ek



Alexandr Okhotnikov wrote:
> 
> Hi
> 
> example: (for Russian, all *.prg in codepage 1251)
> 
> INIT PROCEDURE Qt_Start()
>     LOCAL lang
>     qt_qapplication()
> 
>     lang := QTextCodec():new()
>     lang:setCodecForCStrings( lang:codecForName_1("Windows-1251") )
> 
>     HB_SETCODEPAGE( "RU1251" )
> RETURN
> 
> All messages are displayed correctly in QT
> My problem in the other - in Linux (UTF8) incorrectly creates files
> with national characters in name
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/HOWTO-about-codepage-in-HbQt-tp25334628p25343020.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Tue Sep  8 05:51:17 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep  8 05:51:43 2009
Subject: [Harbour] Wrong autodetection in Eclipse
In-Reply-To: <9257026e0909080244m572ce54ch546290c7b1fd4f53@mail.gmail.com>
References: <9257026e0909080221p5f544c7bh7fc2e80f28cc7278@mail.gmail.com> 
	<42A30355-C354-4AB5-B25A-8E0ED31A0C6A@syenar.hu>
	<9257026e0909080244m572ce54ch546290c7b1fd4f53@mail.gmail.com>
Message-ID: <609353e70909080251k1f08d11cm9150e0f900af65f8@mail.gmail.com>

which ecliple you use: http://www.eclipse.org/downloads/

you use eclipse as ide?


2009/9/8 Lorenzo Fiorini <lorenzo.fiorini@gmail.com>:
> On Tue, Sep 8, 2009 at 11:23 AM, Viktor Szak?ts<harbour.01@syenar.hu> wrote:
>
>> Pls first try after 12439. Maybe it fixes the problem.
>
> Many thanks, it works now.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From lorenzo.fiorini at gmail.com  Tue Sep  8 05:56:19 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep  8 05:56:25 2009
Subject: [Harbour] Wrong autodetection in Eclipse
In-Reply-To: <609353e70909080251k1f08d11cm9150e0f900af65f8@mail.gmail.com>
References: <9257026e0909080221p5f544c7bh7fc2e80f28cc7278@mail.gmail.com>
	<42A30355-C354-4AB5-B25A-8E0ED31A0C6A@syenar.hu>
	<9257026e0909080244m572ce54ch546290c7b1fd4f53@mail.gmail.com>
	<609353e70909080251k1f08d11cm9150e0f900af65f8@mail.gmail.com>
Message-ID: <9257026e0909080256x66b46b73obd60b3fdf0605576@mail.gmail.com>

On Tue, Sep 8, 2009 at 11:51 AM, Massimo Belgrano<mbelgrano@deltain.it> wrote:

> which ecliple you use: http://www.eclipse.org/downloads/
>
> you use eclipse as ide?

Yes, Eclipse IDE for C/C++ developers.

best regards,
Lorenzo
From druzus at users.sourceforge.net  Tue Sep  8 06:03:25 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue Sep  8 06:03:31 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12440] trunk/harbour
Message-ID: <E1MkxXp-0001Va-Gt@d5vjzd1.ch3.sourceforge.com>

Revision: 12440
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12440&view=rev
Author:   druzus
Date:     2009-09-08 10:03:24 +0000 (Tue, 08 Sep 2009)

Log Message:
-----------
2009-09-08 12:03 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbstack.h
  * harbour/source/vm/estack.c
    * small cleanup in some macros definitions

  * harbour/source/vm/hvm.c
    * pacified ICC++ warnings

  * harbour/source/vm/mainstd.c
    ! do not force main() declaration as extern "C"

  * harbour/include/hbdefs.h
  * harbour/include/hbsetup.h
    * modified HB_FUNC*() macros declarations to respect global extern "C"
      settings

  * harbour/source/vm/classes.c
    * use HB_FUNC*() macros to declare harbour functions

  * harbour/source/common/hbprintf.c
    * added workaround for some missing C99 math macros in SunOS GCC used in
      C++ mode. Warning C++ mode in SunOS-GCC disables C99 extensions.

  * harbour/contrib/gtalleg/gtalleg.c
    * hack for compilation with SunPRO C

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtalleg/gtalleg.c
    trunk/harbour/include/hbdefs.h
    trunk/harbour/include/hbsetup.h
    trunk/harbour/include/hbstack.h
    trunk/harbour/source/common/hbprintf.c
    trunk/harbour/source/vm/classes.c
    trunk/harbour/source/vm/estack.c
    trunk/harbour/source/vm/hvm.c
    trunk/harbour/source/vm/mainstd.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Tue Sep  8 06:04:53 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep  8 06:05:01 2009
Subject: [Harbour] HOWTO about codepage in HbQt
In-Reply-To: <25343020.post@talk.nabble.com>
References: <4AA55265.1080808@siol.net> <25334703.post@talk.nabble.com>
	<25340944.post@talk.nabble.com>
	<d6fa31440909080121g7d445f2aie39b6bdec7868dd0@mail.gmail.com>
	<25343020.post@talk.nabble.com>
Message-ID: <293E35F6-0CFF-409B-AD0D-3D9B16B52BDA@syenar.hu>

Actually, Harbour has the basics for such filename conversion
support, but internally UTF-8 isn't yet supported in these
conversions yet. Same goes for terminal output f.e..

Brgds,
Viktor

On 2009.09.08., at 11:50, Fran?ek Prijatelj wrote:

>
> Hi Alexandr
>
> Yes this is another solution.
> If we want to be portable we shuldn't use
> spaces and national characters in file names.
>
>
> BRGS
> Fran?ek
>
>
>
> Alexandr Okhotnikov wrote:
>>
>> Hi
>>
>> example: (for Russian, all *.prg in codepage 1251)
>>
>> INIT PROCEDURE Qt_Start()
>>    LOCAL lang
>>    qt_qapplication()
>>
>>    lang := QTextCodec():new()
>>    lang:setCodecForCStrings( lang:codecForName_1("Windows-1251") )
>>
>>    HB_SETCODEPAGE( "RU1251" )
>> RETURN
>>
>> All messages are displayed correctly in QT
>> My problem in the other - in Linux (UTF8) incorrectly creates files
>> with national characters in name
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/HOWTO-about-codepage-in-HbQt-tp25334628p25343020.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Tue Sep  8 06:08:33 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  8 06:08:42 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12436] trunk/harbour
In-Reply-To: <c10dbf450909071455j7ba54c38j14246dacc0c220a7@mail.gmail.com>
References: <E1Mkkql-0003gI-Cn@d5vjzd1.ch3.sourceforge.com>
	<c10dbf450909071455j7ba54c38j14246dacc0c220a7@mail.gmail.com>
Message-ID: <20090908100833.GA9290@uran.home.aster.pl>

On Tue, 08 Sep 2009, Phil Krylov wrote:

Hi,

> On Tue, Sep 8, 2009 at 12:30 AM, <druzus@users.sourceforge.net> wrote:
> > 2009-09-07 22:29 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
> > ?* harbour/source/vm/thread.c
> > ? ?+ added HB_MT() PRG function which exists only in MT HVM version and
> > ? ? ?can be REQUESTed from .prg code to force linking MT HVM.
> I think it misses a HB_STACK_TLS_PRELOAD:
> gcc  -I. -I../../../../../../include -no-cpp-precomp -fno-common -Wall
> -W -O3  -DHB_MT_VM  -o hvmall.o -c ../../../../hvmall.c
> In file included from ../../../../hvmall.c:89:
> ../../../../thread.c: In function ?HB_FUN_HB_MT?:
> ../../../../thread.c:2512: error: ?_hb_stack_ptr_? undeclared (first
> use in this function)
> ../../../../thread.c:2512: error: (Each undeclared identifier is
> reported only once
> ../../../../thread.c:2512: error: for each function it appears in.)

Yes, my fault - I left
   hb_retl( TRUE );
and I committed it unintentionally. This functions should be empty
and used only in REQUEST statement.

Thanks for the info and to Viktor for adding HB_STACK_TLS_PRELOAD as
workaround.

best regards,
Przemek
From druzus at users.sourceforge.net  Tue Sep  8 06:10:25 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue Sep  8 06:10:33 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12441] trunk/harbour
Message-ID: <E1Mkxeb-0001eh-S7@d5vjzd1.ch3.sourceforge.com>

Revision: 12441
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12441&view=rev
Author:   druzus
Date:     2009-09-08 10:10:24 +0000 (Tue, 08 Sep 2009)

Log Message:
-----------
2009-09-08 12:09 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/thread.c
    * removed HB_MT() function body

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/vm/thread.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Tue Sep  8 06:33:35 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  8 06:33:42 2009
Subject: [Harbour] HOWTO about codepage in HbQt
In-Reply-To: <293E35F6-0CFF-409B-AD0D-3D9B16B52BDA@syenar.hu>
References: <4AA55265.1080808@siol.net> <25334703.post@talk.nabble.com>
	<25340944.post@talk.nabble.com>
	<d6fa31440909080121g7d445f2aie39b6bdec7868dd0@mail.gmail.com>
	<25343020.post@talk.nabble.com>
	<293E35F6-0CFF-409B-AD0D-3D9B16B52BDA@syenar.hu>
Message-ID: <20090908103335.GA16201@uran.home.aster.pl>

On Tue, 08 Sep 2009, Szak?ts Viktor wrote:

Hi,

> Actually, Harbour has the basics for such filename conversion
> support, but internally UTF-8 isn't yet supported in these
> conversions yet. Same goes for terminal output f.e..

Terminal output depends on used GTs. GTTRM and GTSLN supports
utf8 mode but GTCRS does not and it's caused by curses internals
not Harbour code and I doubt that we will ever add support for
unicode mode to this GT.
GTs which do not use escape control codes to detect terminal settings
like GTCGI or GTSTD cannot detect utf8 terminal mode though we can
add some hardcoded solutions, i.e. set UTF8 output depending on
LANG envvar but it can help in some programs but create problems for
others so it's also not ideal solution.
For UTF-8 translation in some procedures like filename translation
or GTSTD/GTCGI we can introduce pseudo codepage "UTF8" though probably
the best way is to remove current lang and codepage libraries and
reimplement them from scratch to work well with mulitbyte character
sets, translations between languages and eliminate repeated msg* modules
for the same country but with different encoding.

BTW the Alexandr's method used to inform QT about string encoding in
HVM is very good and simple solution though later we can eliminate using
Unicode base API i.e. hb_parc_utf8(). Now I suggest to use it.

best regards,
Przemek
From vszakats at users.sourceforge.net  Tue Sep  8 07:26:29 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue Sep  8 07:26:34 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12442] trunk/harbour
Message-ID: <E1MkyqD-0002EW-6u@dn4whf1.ch3.sourceforge.com>

Revision: 12442
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12442&view=rev
Author:   vszakats
Date:     2009-09-08 11:26:25 +0000 (Tue, 08 Sep 2009)

Log Message:
-----------
2009-09-08 13:25 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  + config/darwin/clang.mk
    + Added experimental support for clang compiler frontend on
      Snow Leopard + new XCode systems. (it's unclear which of them
      exactly is required for this feature)
    ; TOFIX: '__attribute (( flatten ))' is complained about by clang.

Modified Paths:
--------------
    trunk/harbour/ChangeLog

Added Paths:
-----------
    trunk/harbour/config/darwin/clang.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Tue Sep  8 07:28:02 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  8 07:28:08 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4AA5348B.4020003@mweb.co.za>
References: <20090903141421.GB1443@uran.home.aster.pl>
	<4A9FD484.6050608@dbtopas.lt> <4A9FD931.6060404@mweb.co.za>
	<4A9FE2E4.4010107@dbtopas.lt>
	<20090903215311.GA29866@uran.home.aster.pl>
	<4AA0D67F.7060501@mweb.co.za> <4AA0DEC8.60200@dbtopas.lt>
	<4AA0E8D8.6030008@mweb.co.za> <4AA0EA35.2070308@dbtopas.lt>
	<4AA5348B.4020003@mweb.co.za>
Message-ID: <20090908112802.GA8631@uran.home.aster.pl>

On Mon, 07 Sep 2009, Alex Strickland wrote:

Hi,

> Do you think it is worth having a function to manually shut down the 
> connection point, as HWGUI does?

No, we should not have anything like that - it's potential GPF trap.
In Harbour Release() is called automatically when all variables
holding pointer to AX control are cleared so it's not necessary
to call it automatically.

> It seems that Release() is never called, for whatever reason.

few weeks ago I sent a small peace of code (see below) to test it and
Toninho confirmed (BTW thanks) that now AX controls are removed.
You can test it yourself and check if destructor is executed.
Please only remember that inside Release() is reference counter
which is updated also by C code so destructor is executed when
the last owner (code which executed AddRef() directly or indirectly
by some other method) calls Release().
If you will find any problems in Harbour code then please inform
us and we try to fix it but calling Release() by our code as workaround
for some other buggy code which does not call it it's very bad idea.

best regards,
Przemek



   proc test( hWnd )
      local oAx
      if valtype( hWnd ) == "N"
         hWnd := win_n2p( hWnd )
      endif
      ? "start"
      oAx := WIN_AxGetControl( hWnd, mk_cblock( mycls():new() ) )
      ? "ax control created:", oAx
      oAx := NIL
      ? "ax control destroyed"
   return

   func mk_cblock( obj )
      return {|| obj }

   class mycls
      destructor dtor
   endclass

   method procedure dtor()
      ? "*** destructor executed ***"
   return
From druzus at acn.waw.pl  Tue Sep  8 07:32:39 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  8 07:32:46 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12442] trunk/harbour
In-Reply-To: <E1MkyqD-0002EW-6u@dn4whf1.ch3.sourceforge.com>
References: <E1MkyqD-0002EW-6u@dn4whf1.ch3.sourceforge.com>
Message-ID: <20090908113239.GB8631@uran.home.aster.pl>

On Tue, 08 Sep 2009, vszakats@users.sourceforge.net wrote:

Hi,

> 2009-09-08 13:25 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>   + config/darwin/clang.mk
>     + Added experimental support for clang compiler frontend on
>       Snow Leopard + new XCode systems. (it's unclear which of them
>       exactly is required for this feature)
>     ; TOFIX: '__attribute (( flatten ))' is complained about by clang.

Add to include/hbsetup.h[514] valid
   && !defined( ... )
to disable it for clang.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Sep  8 07:39:15 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep  8 07:39:27 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12442] trunk/harbour
In-Reply-To: <20090908113239.GB8631@uran.home.aster.pl>
References: <E1MkyqD-0002EW-6u@dn4whf1.ch3.sourceforge.com>
	<20090908113239.GB8631@uran.home.aster.pl>
Message-ID: <EE9D84D1-2643-4667-AE91-BA3A95345385@syenar.hu>

Thank you.

[ Couldn't yet find the compiler identification macro for clang. ]

Brgds,
Viktor

On 2009.09.08., at 1:32, Przemyslaw Czerpak wrote:

> On Tue, 08 Sep 2009, vszakats@users.sourceforge.net wrote:
>
> Hi,
>
>> 2009-09-08 13:25 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>>  + config/darwin/clang.mk
>>    + Added experimental support for clang compiler frontend on
>>      Snow Leopard + new XCode systems. (it's unclear which of them
>>      exactly is required for this feature)
>>    ; TOFIX: '__attribute (( flatten ))' is complained about by clang.
>
> Add to include/hbsetup.h[514] valid
>   && !defined( ... )
> to disable it for clang.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vszakats at users.sourceforge.net  Tue Sep  8 08:09:43 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue Sep  8 08:09:48 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12443] trunk/harbour
Message-ID: <E1MkzW3-0003UM-Im@dn4whf1.ch3.sourceforge.com>

Revision: 12443
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12443&view=rev
Author:   vszakats
Date:     2009-09-08 12:09:22 +0000 (Tue, 08 Sep 2009)

Log Message:
-----------
2009-09-08 14:06 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * include/hbsetup.h
  * config/darwin/clang.mk
    + Added manual compiler macro HB_CC_CLANG until we find the official
      predefined macro to detect this compiler.
      Actually we could roll our own HB_CC_<comp> set of macros to do compiler
      detection in central headers and clean compiler specific macros from
      code.
    ! Fixed '__attribute (( flatten ))' not being supported with clang.
      (Thanks Przemek)
    ! Deleted extra parameters from libtool command line.

  * INSTALL
    + Added clang to the darwin compiler list.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/config/darwin/clang.mk
    trunk/harbour/include/hbsetup.h


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Tue Sep  8 08:37:13 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep  8 08:37:24 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12443] trunk/harbour
In-Reply-To: <E1MkzW3-0003UM-Im@dn4whf1.ch3.sourceforge.com>
References: <E1MkzW3-0003UM-Im@dn4whf1.ch3.sourceforge.com>
Message-ID: <714633A0-96C8-4B72-B915-AB8EA44EE053@syenar.hu>

Harbour builds cleanly with clang now. To try, use:

$ make HB_CCPREFIX=/Developer/usr/bin/ HB_COMPILER=clang

This frontend is much faster than gcc (especially than latest 4.2.1).

Brgds,
Viktor

On 2009.09.08., at 2:09, vszakats@users.sourceforge.net wrote:

> Revision: 12443
>          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12443&view=rev
> Author:   vszakats
> Date:     2009-09-08 12:09:22 +0000 (Tue, 08 Sep 2009)
>
> Log Message:
> -----------
> 2009-09-08 14:06 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>  * include/hbsetup.h
>  * config/darwin/clang.mk
>    + Added manual compiler macro HB_CC_CLANG until we find the  
> official
>      predefined macro to detect this compiler.
>      Actually we could roll our own HB_CC_<comp> set of macros to do  
> compiler
>      detection in central headers and clean compiler specific macros  
> from
>      code.
>    ! Fixed '__attribute (( flatten ))' not being supported with clang.
>      (Thanks Przemek)
>    ! Deleted extra parameters from libtool command line.
>
>  * INSTALL
>    + Added clang to the darwin compiler list.
>
> Modified Paths:
> --------------
>    trunk/harbour/ChangeLog
>    trunk/harbour/INSTALL
>    trunk/harbour/config/darwin/clang.mk
>    trunk/harbour/include/hbsetup.h
>
>
> This was sent by the SourceForge.net collaborative development  
> platform, the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From alxokhotnikov at gmail.com  Tue Sep  8 08:39:19 2009
From: alxokhotnikov at gmail.com (Alexandr Okhotnikov)
Date: Tue Sep  8 08:39:26 2009
Subject: [Harbour] HOWTO about codepage in HbQt
In-Reply-To: <25343020.post@talk.nabble.com>
References: <4AA55265.1080808@siol.net> <25334703.post@talk.nabble.com>
	<25340944.post@talk.nabble.com>
	<d6fa31440909080121g7d445f2aie39b6bdec7868dd0@mail.gmail.com>
	<25343020.post@talk.nabble.com>
Message-ID: <d6fa31440909080539k65a3969el6f0941748a5bacc@mail.gmail.com>

Hi

It's not about application portability, I just can not open existing
files with national characters. For example, the user's home directory
is the analogue of "Pictures" - "???????" (in Russian)

2009/9/8 Fran?ek Prijatelj <francek.prijatelj@siol.net>:
>
> Hi Alexandr
>
> Yes this is another solution.
> If we want to be portable we shuldn't use
> spaces and national characters in file names.
>
>
> BRGS
> Fran?ek
From vszakats at users.sourceforge.net  Tue Sep  8 08:59:03 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue Sep  8 08:59:09 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12444] trunk/harbour
Message-ID: <E1Ml0Hn-0002IC-CI@3kljzd1.ch3.sourceforge.com>

Revision: 12444
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12444&view=rev
Author:   vszakats
Date:     2009-09-08 12:59:02 +0000 (Tue, 08 Sep 2009)

Log Message:
-----------
2009-09-08 14:56 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/darwin/clang.mk
    + Added comment with option to force C++ mode with clang.

  * utils/hbmk2/hbmk2.prg
    + Added (not yet tested) darwin/clang support.
      Probably it could be added for other platforms, too. Also
      for GNU Make. clang cmdline is compatible with GCC for the most
      part, so it's easy to do and if the few differences can be sorted out,
      it can be done without duplicating .mk file logic.

  * config/darwin/gcc.mk
    - Disabled '-no-cpp-precomp' option for darwin/gcc. Most probably
      it's not needed anymore. For users using older darwin systems, this
      can be added manually.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/darwin/clang.mk
    trunk/harbour/config/darwin/gcc.mk
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Tue Sep  8 09:09:33 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  8 09:09:39 2009
Subject: [Harbour] HOWTO about codepage in HbQt
In-Reply-To: <d6fa31440909080539k65a3969el6f0941748a5bacc@mail.gmail.com>
References: <4AA55265.1080808@siol.net> <25334703.post@talk.nabble.com>
	<25340944.post@talk.nabble.com>
	<d6fa31440909080121g7d445f2aie39b6bdec7868dd0@mail.gmail.com>
	<25343020.post@talk.nabble.com>
	<d6fa31440909080539k65a3969el6f0941748a5bacc@mail.gmail.com>
Message-ID: <20090908130933.GA24975@uran.home.aster.pl>

On Tue, 08 Sep 2009, Alexandr Okhotnikov wrote:

Hi,

> It's not about application portability, I just can not open existing
> files with national characters. For example, the user's home directory
> is the analogue of "Pictures" - "???????" (in Russian)

Who's forbidden you to use hb_strtoutf8() function?

   proc main()
      local cFile
      request hb_codepage_PLISO
      set( _SET_CODEPAGE, "PLISO" )
      cFile := "b??dz?cy-???w"
      memowrit( cFile, "test1" )
      memowrit( hb_strToUTF8( cFile ), "test2" )
   return

Please note that in both cases files are created with raw names specified
by user and both are valid.

best regards,
Przemek
From gvarona at ec-red.com  Tue Sep  8 10:17:48 2009
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Tue Sep  8 10:14:56 2009
Subject: [Harbour] Exist PICTURE for password with GET?
In-Reply-To: <49E349B5-F88C-465A-9B21-551204CEAE8E@syenar.hu>
References: <20090906152753.29705.qmail@ml110b.qnet.com.pe>	<011271D9-7140-4518-B15E-60E1FBD4A597@syenar.hu>	<20090906170345.24469.qmail@ml110b.qnet.com.pe>	<4AA56F6E.3080104@ec-red.com>
	<49E349B5-F88C-465A-9B21-551204CEAE8E@syenar.hu>
Message-ID: <4AA6678C.5010103@ec-red.com>

Viktor Szak?ts escribi?:
> Hi,
> Please check the end of source/rtl/tget.prg, there you
> can find which parameters need to be passed to hb_get():new()
> to create a new instance. The parameters are the same as
> for GetNew(), you can find a GetNew() example in tests/rto_get.prg.
> Then you can add the created get object to GetList and
> use READ.
Thanks Viktor
The example was as follows:

PROCEDURE Main
LOCAL cVar1 := cVar2 := SPAC(10), oPsw //, GetList
SETMODE(25,80)
CLS
@ 10, 10 SAY "Entrada con GET Normal:" GET cVar1
@ 11, 10 SAY "Entrada con PSW ......:"
* Creo una nueva instancia
oPsw := HB_GET():new(11, 34, { | x | iif( x == NIL, cVar2, cVar2 := x ) 
}, "cVar2",, "W+/N,BG/N" )
oPsw:hideInput := .T.
AADD(GetList, oPsw)
READ
return

Just an observation:
Why not work with getList LOCAL?
TIA

Best Regards
GVS
From druzus at acn.waw.pl  Tue Sep  8 10:18:28 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep  8 10:18:35 2009
Subject: [Harbour] Exist PICTURE for password with GET?
In-Reply-To: <4AA6678C.5010103@ec-red.com>
References: <20090906152753.29705.qmail@ml110b.qnet.com.pe>
	<011271D9-7140-4518-B15E-60E1FBD4A597@syenar.hu>
	<20090906170345.24469.qmail@ml110b.qnet.com.pe>
	<4AA56F6E.3080104@ec-red.com>
	<49E349B5-F88C-465A-9B21-551204CEAE8E@syenar.hu>
	<4AA6678C.5010103@ec-red.com>
Message-ID: <20090908141828.GA30185@uran.home.aster.pl>

On Tue, 08 Sep 2009, Guillermo Varona Silup? wrote:
> PROCEDURE Main
> LOCAL cVar1 := cVar2 := SPAC(10), oPsw //, GetList
[...]
> AADD(GetList, oPsw)
[...]
> Just an observation:
> Why not work with getList LOCAL?

Because it's NIL. You have to initialize it to be an array:
   local GetList := {}

best regards,
Przemek
From gvarona at ec-red.com  Tue Sep  8 10:31:41 2009
From: gvarona at ec-red.com (=?UTF-8?B?R3VpbGxlcm1vIFZhcm9uYSBTaWx1cMO6?=)
Date: Tue Sep  8 10:28:49 2009
Subject: [Harbour] Exist PICTURE for password with GET?
In-Reply-To: <20090908141828.GA30185@uran.home.aster.pl>
References: <20090906152753.29705.qmail@ml110b.qnet.com.pe>	<011271D9-7140-4518-B15E-60E1FBD4A597@syenar.hu>	<20090906170345.24469.qmail@ml110b.qnet.com.pe>	<4AA56F6E.3080104@ec-red.com>	<49E349B5-F88C-465A-9B21-551204CEAE8E@syenar.hu>	<4AA6678C.5010103@ec-red.com>
	<20090908141828.GA30185@uran.home.aster.pl>
Message-ID: <4AA66ACD.2070909@ec-red.com>

Przemyslaw Czerpak escribi?:
> On Tue, 08 Sep 2009, Guillermo Varona Silup? wrote:
>   
>> PROCEDURE Main
>> LOCAL cVar1 := cVar2 := SPAC(10), oPsw //, GetList
>>     
> [...]
>   
>> AADD(GetList, oPsw)
>>     
> [...]
>   
>> Just an observation:
>> Why not work with getList LOCAL?
>>     
>
> Because it's NIL. You have to initialize it to be an array:
>    local GetList := {}
>   
Thanks Pzremek.
now work fine.

Best Regards
GVS
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090908/147fd303/attachment.html
From sscc at mweb.co.za  Tue Sep  8 11:16:40 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Sep  8 11:16:46 2009
Subject: [Harbour] win_prt.c and win_tprt.prg
Message-ID: <4AA67558.1040906@mweb.co.za>

Hi Viktor

I have changed a few things here, made it a bit more consistent (setting queue 
size and timeouts) and added to your parameter checking (initialised the port 
handles to -1). I have changed the name of the Error() method to ErrorText() (I 
discovered was an unfortunate choice). I dropped restoring the parameters, and a 
few other small things. It seems to work ok in a small test.

Two questions, do you think 256 ports is necessary, it seems a lot, maybe 32 or 
64 would be ok? win_prt.c and win_tprt.prg makes me think of printer - maybe 
something like win_comm.c and win_tcom.prg?

Can I send you the source?

Regards
Alex
From m.lacecilia at gmail.com  Tue Sep  8 12:08:07 2009
From: m.lacecilia at gmail.com (Maurizio la Cecilia)
Date: Tue Sep  8 12:08:19 2009
Subject: [Harbour] Getting errors and warnings in MinGW compile
In-Reply-To: <4aa657d4.9e15f10a.5d53.ffff87a5SMTPIN_ADDED@mx.google.com>
References: <4aa657d4.9e15f10a.5d53.ffff87a5SMTPIN_ADDED@mx.google.com>
Message-ID: <!&!AAAAAAAAAAAYAAAAAAAAAESGsVuZMAhNnqDOKdTTUVyipAEAEAAAAHdZKRFvqttOnDdzGi4Mf6gBAAAAAA==@gmail.com>

I receive the messages below trying to compile latest CVS versions with
MinGW.

hbmk2: Error: Running Harbour compiler (internal). 1
hbi18n.o:hbi18n.c:(.text+0x2c): undefined reference to
`hb_vmProcessSymbolsEx'

c:/CVS/harbour/bin/../utils/hbmk2/hbmk2.prg(845) Warning W0001  Ambiguous
reference 'HB_VERSION_BUILD_PLAT'

c:/CVS/harbour/bin/../utils/hbmk2/hbmk2.prg(1102) Warning W0001  Ambiguous
reference 'HB_VERSION_BUILD_COMP'

c:/CVS/harbour/bin/../utils/hbmk2/hbmk2.prg(5832) Warning W0001  Ambiguous
reference 'HB_VERSION_BUILD_PLAT'

c:/include\common.ch(85) Warning W0001  Redefinition or duplicate definition
of #define HB_SYMBOL_UNUSED

The commands given to compile are:

Win-make clean
Win-make install

TIA for your answer.

Maurizio la Cecilia               

From harbour.01 at syenar.hu  Tue Sep  8 12:35:27 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep  8 12:35:37 2009
Subject: [Harbour] win_prt.c and win_tprt.prg
In-Reply-To: <4AA67558.1040906@mweb.co.za>
References: <4AA67558.1040906@mweb.co.za>
Message-ID: <96B0F2F4-FE8E-415D-8E8C-CAB22A86707D@syenar.hu>

Hi Alex,

On 2009.09.08., at 5:16, Alex Strickland wrote:

> Hi Viktor
>
> I have changed a few things here, made it a bit more consistent  
> (setting queue size and timeouts) and added to your parameter  
> checking (initialised the port handles to -1). I have changed the  
> name of the Error() method to ErrorText() (I discovered was an  
> unfortunate choice). I dropped restoring the parameters, and a few  
> other small things. It seems to work ok in a small test.

Initialization is better be done dynamically if we want to
avoid consuming a relatively large amount of space in .exe files.
This needs some extra logic. Of course the while thing could
get dynamically allocated COM port structures to really
make it scalable.

> Two questions, do you think 256 ports is necessary, it seems a lot,  
> maybe 32 or 64 would be ok? win_prt.c and win_tprt.prg makes me  
> think of printer - maybe something like win_comm.c and win_tcom.prg?

256 is the maximum offered by NT systems, so if we don't
to create an artificial Harbour limit, we should support
all of them. COM numbers aren't necessary assigned sequentially,
so it's possible to have a higher numbered one on any systems.

As for the naming, the class name is WIN_PORT, and the API
prefix is also WIN_PORT*() so, while I don't like 'prt' in
the filenames (reminds me of 'printer'), if we do some renaming,
we should do it consistently. Probably WIN_COM*() would be
better overall. Probably not a huge compatibility concern
yet, so maybe we should do it now.

> Can I send you the source?

Yes, please do.

Brgds,
Viktor

From mhsabado at gmail.com  Tue Sep  8 13:03:47 2009
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Tue Sep  8 13:04:02 2009
Subject: [Harbour] Exist PICTURE for password with GET?
In-Reply-To: <4aa67f8d.8b15f10a.4d0b.2e4cSMTPIN_ADDED@mx.google.com>
References: <4aa67f8d.8b15f10a.4d0b.2e4cSMTPIN_ADDED@mx.google.com>
Message-ID: <4AA68E73.1040105@gmail.com>

Hi GVS,

Viktor Szak?ts escribi?:

> > Hi,
> > Please check the end of source/rtl/tget.prg, there you
> > can find which parameters need to be passed to hb_get():new()
> > to create a new instance. The parameters are the same as
> > for GetNew(), you can find a GetNew() example in tests/rto_get.prg.
> > Then you can add the created get object to GetList and
> > use READ.
>   
Thanks Viktor
The example was as follows:

PROCEDURE Main
LOCAL cVar1 := cVar2 := SPAC(10), oPsw //, GetList
SETMODE(25,80)
CLS
@ 10, 10 SAY "Entrada con GET Normal:" GET cVar1
@ 11, 10 SAY "Entrada con PSW ......:"
* Creo una nueva instancia
oPsw := HB_GET():new(11, 34, { | x | iif( x == NIL, cVar2, cVar2 := x ) 
}, "cVar2",, "W+/N,BG/N" )
oPsw:hideInput := .T.
AADD(GetList, oPsw)
READ
return

Just an observation:
Why not work with getList LOCAL?
TIA

Best Regards
GVS


I think GetList should be initialized with empty array (GetList:={})

Regards,
Mario

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090909/76827b3f/attachment.html
From harbour.01 at syenar.hu  Tue Sep  8 13:00:30 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep  8 13:07:40 2009
Subject: [Harbour] clang vs gcc (on Darwin)
Message-ID: <1ED65E02-513B-4BC7-9A76-19253B792CEF@syenar.hu>

Snippet from this article:
http://arstechnica.com/apple/reviews/2009/08/mac-os-x-10-6.ars/9

"Clang brings with it the two headline attributes you expect in a hot,  
new compiler: shorter compile times and faster executables. In Apple's  
testing with its own applications such as iCal, Address Book, and  
Xcode itself, plus third-party applications like Adium and Growl,  
Clang compiles nearly three times faster than GCC 4.2. As for the  
speed of the finished product, the LLVM back-end, whether used in  
Clang or in LLVM-GCC, produces executables that are 5-25% faster than  
those generated by GCC 4.2."

clang seems like a good choice for newer darwin systems.
I didn't make any speed measurements yet, but for sure the
compile times are incredibly shorter, and the resulting
executables noticeable smaller.

Brgds,
Viktor

From david at gesintur.com  Tue Sep  8 15:13:30 2009
From: david at gesintur.com (David MS)
Date: Tue Sep  8 15:13:42 2009
Subject: [Harbour] Capture errors messages in hb_compilebuf()  at runtime
Message-ID: <39912385CC0F4D2F9EC8E7B2F4C136C4@INFOR04>

Hi all,

There is a way to capture error messages generated by hb_compilebuf() or 
hb_compilefrombuf() at runtime?

Best Regards,
David Monta?o. 

From gvarona at ec-red.com  Tue Sep  8 15:43:36 2009
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Tue Sep  8 15:40:45 2009
Subject: [Harbour] Exist PICTURE for password with GET?
In-Reply-To: <4AA68E73.1040105@gmail.com>
References: <4aa67f8d.8b15f10a.4d0b.2e4cSMTPIN_ADDED@mx.google.com>
	<4AA68E73.1040105@gmail.com>
Message-ID: <4AA6B3E8.8080209@ec-red.com>

Thanks Mario.

Best Regards
GVS

Mario H. Sabado escribi?:
> Hi GVS,
>
> Viktor Szak?ts escribi?:
>   
>> > Hi,
>> > Please check the end of source/rtl/tget.prg, there you
>> > can find which parameters need to be passed to hb_get():new()
>> > to create a new instance. The parameters are the same as
>> > for GetNew(), you can find a GetNew() example in tests/rto_get.prg.
>> > Then you can add the created get object to GetList and
>> > use READ.
>>   
> Thanks Viktor
> The example was as follows:
>
> PROCEDURE Main
> LOCAL cVar1 := cVar2 := SPAC(10), oPsw //, GetList
> SETMODE(25,80)
> CLS
> @ 10, 10 SAY "Entrada con GET Normal:" GET cVar1
> @ 11, 10 SAY "Entrada con PSW ......:"
> * Creo una nueva instancia
> oPsw := HB_GET():new(11, 34, { | x | iif( x == NIL, cVar2, cVar2 := x ) 
> }, "cVar2",, "W+/N,BG/N" )
> oPsw:hideInput := .T.
> AADD(GetList, oPsw)
> READ
> return
>
> Just an observation:
> Why not work with getList LOCAL?
> TIA
>
> Best Regards
> GVS
>
>
> I think GetList should be initialized with empty array (GetList:={})
>
> Regards,
> Mario
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>   

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090908/852a6c18/attachment.html
From carozodequilmes at gmail.com  Tue Sep  8 16:16:00 2009
From: carozodequilmes at gmail.com (CarozoDeQuilmes)
Date: Tue Sep  8 16:16:06 2009
Subject: [Harbour] Signals in HbQt
Message-ID: <578c73340909081316x2c15b225uf756cbf75cb8d6b@mail.gmail.com>

Hi Pritpal, could you add the following signals to HbQt


For Class QTableWidget:

I need them:

   - void *cellActivated<http://qt.nokia.com/doc/4.5/qtablewidget.html#cellActivated>
   * ( int *row*, int *column* )
   - void *cellChanged<http://qt.nokia.com/doc/4.5/qtablewidget.html#cellChanged>
   * ( int *row*, int *column* )
   - void *cellClicked<http://qt.nokia.com/doc/4.5/qtablewidget.html#cellClicked>
   * ( int *row*, int *column* )
   - void *cellDoubleClicked<http://qt.nokia.com/doc/4.5/qtablewidget.html#cellDoubleClicked>
   * ( int *row*, int *column* )
   - void *cellEntered<http://qt.nokia.com/doc/4.5/qtablewidget.html#cellEntered>
   * ( int *row*, int *column* )
   - void *cellPressed<http://qt.nokia.com/doc/4.5/qtablewidget.html#cellPressed>
   * ( int *row*, int *column* )
   - void *currentCellChanged<http://qt.nokia.com/doc/4.5/qtablewidget.html#currentCellChanged>
   * ( int *currentRow*, int *currentColumn*, int *previousRow*, int *
   previousColumn* )

Optionals (I think that I don't need them):

   - void *currentItemChanged<http://qt.nokia.com/doc/4.5/qtablewidget.html#currentItemChanged>
   * ( QTableWidgetItem * *current*, QTableWidgetItem * *previous* )
   - void *itemActivated<http://qt.nokia.com/doc/4.5/qtablewidget.html#itemActivated>
   * ( QTableWidgetItem * *item* )
   - void *itemChanged<http://qt.nokia.com/doc/4.5/qtablewidget.html#itemChanged>
   * ( QTableWidgetItem * *item* )
   - void *itemClicked<http://qt.nokia.com/doc/4.5/qtablewidget.html#itemClicked>
   * ( QTableWidgetItem * *item* )
   - void *itemDoubleClicked<http://qt.nokia.com/doc/4.5/qtablewidget.html#itemDoubleClicked>
   * ( QTableWidgetItem * *item* )
   - void *itemEntered<http://qt.nokia.com/doc/4.5/qtablewidget.html#itemEntered>
   * ( QTableWidgetItem * *item* )
   - void *itemPressed<http://qt.nokia.com/doc/4.5/qtablewidget.html#itemPressed>
   * ( QTableWidgetItem * *item* )
   - void *itemSelectionChanged<http://qt.nokia.com/doc/4.5/qtablewidget.html#itemSelectionChanged>
   * ()



Thanks in advance

CdQ
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090908/5f349b3a/attachment-0001.html
From vszakats at users.sourceforge.net  Tue Sep  8 17:25:25 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue Sep  8 17:25:31 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12445] trunk/harbour
Message-ID: <E1Ml8Bp-0006cE-AP@d5vjzd1.ch3.sourceforge.com>

Revision: 12445
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12445&view=rev
Author:   vszakats
Date:     2009-09-08 21:25:24 +0000 (Tue, 08 Sep 2009)

Log Message:
-----------
2009-09-08 23:23 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed to use 'rc' AR cmd on sunos. (instead of 'rcs')
    + Added -hbdyn support for gcc family of compilers. (very light testing with mingw)
    + Added sunpro compiler support. (not tested, bazaar style)
    ! Basic CPU detection fixed for clang.
    + Added TOFIX for CPU detection for *nix based gcc, icc, clang, sunpro
      compilers.

  * config/wce/mingwarm.mk
  * config/hpux/gcc.mk
  * config/win/mingw.mk
  * config/linux/gcc.mk
  * config/linux/icc.mk
  * config/linux/sunpro.mk
  * config/sunos/gcc.mk
  * config/sunos/sunpro.mk
    * Minor: AR cmd chars reordered to be in sync with hbmk2.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/hpux/gcc.mk
    trunk/harbour/config/linux/gcc.mk
    trunk/harbour/config/linux/icc.mk
    trunk/harbour/config/linux/sunpro.mk
    trunk/harbour/config/sunos/gcc.mk
    trunk/harbour/config/sunos/sunpro.mk
    trunk/harbour/config/wce/mingwarm.mk
    trunk/harbour/config/win/mingw.mk
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Tue Sep  8 18:02:15 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Tue Sep  8 18:02:23 2009
Subject: [Harbour] Harbour clang static analyzer results
Message-ID: <18d502870909081502g68611775p37df9584778fa21d@mail.gmail.com>

Hi All,

Running clang in static analyser mode on darwin (x86-64) resulted in these
messages:
(http://clang-analyzer.llvm.org/)

Maybe some of them are worth to verify.

---
../../../ppcore.c:1785:21: warning: Dereference of null pointer
     pState->pMap[ HB_PP_HASHID( pMatch ) ] |= id;
                   ^
../../../../../include/hbpp.h:407:43: note: instantiated from:
#define HB_PP_HASHID(t)       ( ( UCHAR ) HB_PP_UPPER( (t)->value[0] ) )
                                         ^
../../../../../include/hbpp.h:455:34: note: instantiated from:
#define HB_PP_UPPER(c)           HB_TOUPPER( c )
                                ^
../../../ppcore.c:1785:21: note: instantiated from:
     pState->pMap[ HB_PP_HASHID( pMatch ) ] |= id;
                   ^
../../../../../include/hbpp.h:407:43: note: instantiated from:
#define HB_PP_HASHID(t)       ( ( UCHAR ) HB_PP_UPPER( (t)->value[0] ) )
                                         ^
../../../ppcore.c:1785:21: note: instantiated from:
     pState->pMap[ HB_PP_HASHID( pMatch ) ] |= id;
                   ^
../../../../../include/hbpp.h:407:61: note: instantiated from:
#define HB_PP_HASHID(t)       ( ( UCHAR ) HB_PP_UPPER( (t)->value[0] ) )
                                                           ^
../../../ppcore.c:3420:47: warning: Dereference of null pointer
  if( HB_PP_TOKEN_ISEOC( pToken ) && pToken->pNext &&
                                             ^
../../../ppcore.c:3469:17: warning: Dereference of null pointer
     curtype = HB_PP_TOKEN_TYPE( pToken->type );
               ^
../../../ppcore.c:3469:43: note: instantiated from:
     curtype = HB_PP_TOKEN_TYPE( pToken->type );
                                         ^
3 diagnostics generated.

../../../errint.c:69:8: warning: Dereference of null pointer
      *pGPF = 0;
      ^
1 diagnostic generated.

../../../hbcrc.c:219:14: warning: Result of operation is undefined.
     mask = ( HB_LONG ) 1 << ( bits - 1 );
            ^
1 diagnostic generated.

../../../hbstrfmt.c:220:17: warning: Dereference of null pointer
           if( HB_IS_NUMERIC( pItem ) )
               ^
../../../../../include/hbapi.h:214:35: note: instantiated from:
#define HB_IS_NUMERIC( p )    ( ( HB_ITEM_TYPERAW( p ) & HB_IT_NUMERIC ) !=
0 )
                                 ^
../../../../../include/hbvmpub.h:170:36: note: instantiated from:
#  define HB_ITEM_TYPERAW( p )   ( * ( HB_TYPE * ) ( p ) )
                                  ^
../../../hbstrfmt.c:325:17: warning: Dereference of null pointer
           if( HB_IS_NUMERIC( pItem ) )
               ^
../../../../../include/hbapi.h:214:35: note: instantiated from:
#define HB_IS_NUMERIC( p )    ( ( HB_ITEM_TYPERAW( p ) & HB_IT_NUMERIC ) !=
0 )
                                 ^
../../../../../include/hbvmpub.h:170:36: note: instantiated from:
#  define HB_ITEM_TYPERAW( p )   ( * ( HB_TYPE * ) ( p ) )
                                  ^
2 diagnostics generated.

../../../gtcrs.c:399:20: warning: Although the value stored to 'pid' is used
in the enclosing expression, the value is never actually read from 'pid'
        while ( ( pid = waitpid( -1, &stat, WNOHANG ) ) > 0 ) ;
                  ^     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../../../gtcrs.c:780:4: warning: Value stored to 'nKey' is never read
  nKey = esc = n = i = 0;
  ^      ~~~~~~~~~~~~~~~
../../../gtcrs.c:861:10: warning: Value stored to 'nKey' is never read
        nKey = 0;
        ^      ~
3 diagnostics generated.

../../../gtstd.c:141:20: warning: Although the value stored to 'pid' is used
in the enclosing expression, the value is never actually read from 'pid'
        while ( ( pid = waitpid( -1, &stat, WNOHANG ) ) > 0 ) ;
                  ^     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
1 diagnostic generated.

../../../gttrm.c:617:19: warning: Although the value stored to 'pid' is used
in the enclosing expression, the value is never actually read from 'pid'
        while( ( pid = waitpid( -1, &stat, WNOHANG ) ) > 0 ) { ; }
                 ^     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../../../gttrm.c:1347:4: warning: Value stored to 'nKey' is never read
  nKey = esc = n = i = 0;
  ^      ~~~~~~~~~~~~~~~
../../../gttrm.c:1427:10: warning: Value stored to 'nKey' is never read
        nKey = 0;
        ^      ~
3 diagnostics generated.

../../../gtxwc.c:3333:7: warning: Value stored to 'whiteColor' is never read
     whiteColor = WhitePixel( wnd->dpy, DefaultScreen( wnd->dpy ) );
     ^            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
1 diagnostic generated.

../../../wafunc.c:864:11: warning: Dereference of null pointer
     if( * szField == '\0' )
         ^
1 diagnostic generated.

../../../dbf1.c:3262:10: warning: Dereference of null pointer
        pBuffer[ ulSize - 2 ] = '\r';
        ^
../../../dbf1.c:2983:19: warning: Dereference of null pointer
     pThisField->bFieldFlags = ( BYTE ) pField->uiFlags;
                 ^
../../../dbf1.c:3259:10: warning: Dereference of null pointer
        pBuffer[ ulSize - 1 ] = '\r';
        ^
../../../dbf1.c:3190:19: warning: Dereference of null pointer
     pThisField->bType = '0';
                 ^
4 diagnostics generated.

../../../dbfcdx1.c:2837:26: warning: Dereference of null pointer
                        pPtr[ ( iKeys - 1 ) * iLen + j ] == pbKey[ j ]; j++
) {}
                        ^
../../../dbfcdx1.c:2883:37: warning: Dereference of null pointer
                 bMax = iLen - 6 - pPtr[ iLen - 1 ];
                                   ^
../../../dbfcdx1.c:2827:84: warning: Dereference of null pointer
              iSize += iLen - 6 - ( j == 0 ? 0 : pPtr[ ( j + 1 ) * iLen - 2
] ) - pPtr[ ( j + 1 ) * iLen - 1 ];

      ^
3 diagnostics generated.

../../../bmdbfcdx.c:2864:84: warning: Dereference of null pointer
              iSize += iLen - 6 - ( j == 0 ? 0 : pPtr[ ( j + 1 ) * iLen - 2
] ) - pPtr[ ( j + 1 ) * iLen - 1 ];

      ^
../../../bmdbfcdx.c:2874:26: warning: Dereference of null pointer
                        pPtr[ ( iKeys - 1 ) * iLen + j ] == pbKey[ j ]; j++
) {}
                        ^
../../../bmdbfcdx.c:2920:37: warning: Dereference of null pointer
                 bMax = iLen - 6 - pPtr[ iLen - 1 ];
                                   ^
3 diagnostics generated.

../../../hb_btree.c:517:19: warning: Dereference of null pointer
   if ( thisptr->ulPage != page && thisptr->IsDirty )
                 ^
../../../hb_btree.c:531:22: warning: Dereference of null pointer
 else if ( thisptr->IsDirty )
                    ^
../../../hb_btree.c:781:19: warning: Dereference of null pointer
   if ( thisptr->prev )   thisptr->prev->next = thisptr->next;
                 ^
3 diagnostics generated.

../../../sqlmix.c:1110:22: warning: Dereference of null pointer
        if ( pNode->Leaf )
                    ^
../../../sqlmix.c:1221:22: warning: Dereference of null pointer
     pTag->CurKey = MIX_KEY( pTag, pNode, uiPos );
                    ^
../../../sqlmix.c:71:49: note: instantiated from:
  ( (PMIXKEY) & ( (BYTE*) (node) ) [ ( (node)->Leaf ? sizeof( MIXNODELEAF )
: sizeof( MIXNODE ) ) + (index) * (tag)->uiTotalLen ] )
                                               ^
2 diagnostics generated.
---

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090909/d708f218/attachment.html
From druzus at users.sourceforge.net  Tue Sep  8 20:25:06 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue Sep  8 20:25:12 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12446] trunk/harbour
Message-ID: <E1MlAzi-0001aJ-T7@dn4whf1.ch3.sourceforge.com>

Revision: 12446
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12446&view=rev
Author:   druzus
Date:     2009-09-09 00:24:54 +0000 (Wed, 09 Sep 2009)

Log Message:
-----------
2009-09-09 02:24 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hb-func.sh
    * updated hb* script to work with import library and new
      harbour.dll names.
    + added workaround for problem with shared linking in gui mode caused
      by wrong import library in MinGW builds - without it hb* scripts
      can work only with pure .DLLs
      TOFIX: shared linking in gui mode does not work in hbmk2 at least
             with MinGW cross builds I have in my Linux box, i.e.:
                /*** tst.prg ***/
                ? "TEST"; WAIT
             hbmk2 tst.prg -shared -gtwvt -mwindows
             ./tst.exe
               -> Unrecoverable error 10001: It's not a GUI program

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/hb-func.sh


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From ice at extreme.hu  Tue Sep  8 23:25:49 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Tue Sep  8 23:25:57 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12445] trunk/harbour
In-Reply-To: <E1Ml8Bp-0006cE-AP@d5vjzd1.ch3.sourceforge.com>
References: <E1Ml8Bp-0006cE-AP@d5vjzd1.ch3.sourceforge.com>
Message-ID: <alpine.GSO.2.00.0909090517380.26525@dawn.royalcomp.hu>

On Tue, 8 Sep 2009, vszakats@users.sourceforge.net wrote:

hi,

 >   * utils/hbmk2/hbmk2.prg

 >     + Added sunpro compiler support. (not tested, bazaar style)

no time for more extensive tests (it just finished building, and i'm 
about to fall asleep standing), but it does seem to be in perfect 
working order:

ice@rygel:~/harbour-build/tests$ export LD_LIBRARY_PATH=/opt/hb/lib/harbour 
ice@rygel:~/harbour-build/tests$ hbmk2 speedtst.prg 
hbmk2: Processing configuration: /opt/hb/bin/hbmk.cfg                          
Harbour 2.0.0beta3 (Rev. 12446)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 'speedtst.prg'...
Lines 1204, Functions/Procedures 79
Generating C source output to 'speedtst.c'... Done.
cc: Warning: -xarch=native has been explicitly specified, or implicitly specified by a macro option, -xarch=native on this architecture implies -xarch=sparcvis which generates code that does not run on pre UltraSPARC processors
ice@rygel:~/harbour-build/tests$ ./speedtst 
   
2009.09.09 05:19:46 SunOS 5.10 sun4u                                                                                           
Harbour 2.0.0beta3 (Rev. 12446) Sun C 5.9 (32-bit) Sparc/32
THREADS: 0                                                 
N_LOOPS: 1000000
[ T000: empty loop overhead ]...................................1.20
====================================================================
[ T001: x := L_C ]..............................................1.02
[ T002: x := L_N ]..............................................0.82

etc.

thanks!

-- 
[-]

mkdir /nonexistent
From alxokhotnikov at gmail.com  Wed Sep  9 02:13:50 2009
From: alxokhotnikov at gmail.com (Alexandr Okhotnikov)
Date: Wed Sep  9 02:13:58 2009
Subject: [Harbour] HOWTO about codepage in HbQt
In-Reply-To: <20090908130933.GA24975@uran.home.aster.pl>
References: <4AA55265.1080808@siol.net> <25334703.post@talk.nabble.com>
	<25340944.post@talk.nabble.com>
	<d6fa31440909080121g7d445f2aie39b6bdec7868dd0@mail.gmail.com>
	<25343020.post@talk.nabble.com>
	<d6fa31440909080539k65a3969el6f0941748a5bacc@mail.gmail.com>
	<20090908130933.GA24975@uran.home.aster.pl>
Message-ID: <d6fa31440909082313j35d69090j44c2f66acb0bb1bc@mail.gmail.com>

2009/9/8 Przemyslaw Czerpak <druzus@acn.waw.pl>:
> On Tue, 08 Sep 2009, Alexandr Okhotnikov wrote:
>
> Who's forbidden you to use hb_strtoutf8() function?
>
> ? proc main()
> ? ? ?local cFile
> ? ? ?request hb_codepage_PLISO
> ? ? ?set( _SET_CODEPAGE, "PLISO" )
> ? ? ?cFile := "b??dz?cy-???w"
> ? ? ?memowrit( cFile, "test1" )
> ? ? ?memowrit( hb_strToUTF8( cFile ), "test2" )
> ? return

Function working with files a lot (several dozen) and each must write
a wrapper, given codepage each platform and each locale? Nuance:
passing a string (UTF8) in the function (eg, strfile ()), we may face
a situation where the called function (do not understand UTF8)
incorrectly processes the string.
From druzus at acn.waw.pl  Wed Sep  9 02:55:32 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep  9 02:55:38 2009
Subject: [Harbour] HOWTO about codepage in HbQt
In-Reply-To: <d6fa31440909082313j35d69090j44c2f66acb0bb1bc@mail.gmail.com>
References: <4AA55265.1080808@siol.net> <25334703.post@talk.nabble.com>
	<25340944.post@talk.nabble.com>
	<d6fa31440909080121g7d445f2aie39b6bdec7868dd0@mail.gmail.com>
	<25343020.post@talk.nabble.com>
	<d6fa31440909080539k65a3969el6f0941748a5bacc@mail.gmail.com>
	<20090908130933.GA24975@uran.home.aster.pl>
	<d6fa31440909082313j35d69090j44c2f66acb0bb1bc@mail.gmail.com>
Message-ID: <20090909065531.GA21116@uran.home.aster.pl>

On Wed, 09 Sep 2009, Alexandr Okhotnikov wrote:

Hi,

> Function working with files a lot (several dozen) and each must write
> a wrapper, given codepage each platform and each locale? Nuance:

No, you haven't.
You wrote that you cannot open existing files with national
characters what is not true and I sent the example to illustrate it.

> passing a string (UTF8) in the function (eg, strfile ()), we may face
> a situation where the called function (do not understand UTF8)
> incorrectly processes the string.

Exactly. But the same we can say about using UTF8 in file names at all.
Some 3-rd part programs may not understand it correctly, i.e. it creates
very serious problems when you have to share the same files using SMB
volumes with MS-Windows stations.
Any arbitrary translations to UTF8 or locale is very bad idea.
It has to be programmer choice otherwise it may cause more troubles
then help and create situations when Harbour really will not be able
to open existing files.

I know that you are asking about automatic UTF8<->HVM-CP conversions
and of course as an option it's interesting solution though it does
not resolve the problem in many cases, i.e. it will not enable any
automatic translations in 3-rd party libraries linked with Harbour
application but it can work only for our own code which operates
on file system names so your above problem will still exists in
applications using some 3-rd party extensions. Such translation
will block opening files which are not valid UTF8 names or cannot
be translated to HVM CP. It also does not resolve the problem with
source code using UTF8 encoding. In fact we should have support for
CP translation also in compiler so programmer can define encoding
in source code as one of compile time switches.

Now I do not have time and enough motivation to rewrite our CP code
so if no one else does it then we will have to leave with it yet but
I'll add hack with pseudo codepage called "UTF8" which can be used
only for translations so you can set it as _SET_OSCODEPAGE.

best regards,
Przemek
From vszakats at users.sourceforge.net  Wed Sep  9 03:16:22 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep  9 03:16:28 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12447] trunk/harbour
Message-ID: <E1MlHPi-0005DO-OL@74yxhf1.ch3.sourceforge.com>

Revision: 12447
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12447&view=rev
Author:   vszakats
Date:     2009-09-09 07:16:21 +0000 (Wed, 09 Sep 2009)

Log Message:
-----------
2009-09-09 09:15 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/darwin/clang.mk
    + Disable -c option to avoid warnings when --analyze user option is used.

  * utils/hbmk2/hbmk2.prg
    ! Implemented fix from hbmk script for shared mingw targets in GUI mode.

  * bin/hb-func.sh
    ! Synced wce .dll name with rest of Harbour.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/hb-func.sh
    trunk/harbour/config/darwin/clang.mk
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Wed Sep  9 03:52:37 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep  9 03:52:43 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12447] trunk/harbour
In-Reply-To: <E1MlHPi-0005DO-OL@74yxhf1.ch3.sourceforge.com>
References: <E1MlHPi-0005DO-OL@74yxhf1.ch3.sourceforge.com>
Message-ID: <20090909075237.GA5925@uran.home.aster.pl>

On Wed, 09 Sep 2009, vszakats@users.sourceforge.net wrote:
>   * utils/hbmk2/hbmk2.prg
>     ! Implemented fix from hbmk script for shared mingw targets in GUI mode.

Thank you.
There is yet another problem.
hbmk2 passes GT libraries specified by -gt* switch to link command before
harbour import library which also contains them so finally they are linked
twice.
You can see it checking the size of final binaries. For simple test code
it should be less then 10KB and each GT increase it.
Known core GTs should be removed from linked library list in share builds.
The same happens in Linux.

best regards,
Przemek
From m.lacecilia at gmail.com  Wed Sep  9 03:52:37 2009
From: m.lacecilia at gmail.com (Maurizio la Cecilia)
Date: Wed Sep  9 03:52:51 2009
Subject: R: [Harbour] Getting errors and warnings in MinGW compile
In-Reply-To: <!&!AAAAAAAAAAAYAAAAAAAAAESGsVuZMAhNnqDOKdTTUVyipAEAEAAAAHdZKRFvqttOnDdzGi4Mf6gBAAAAAA==@gmail.com>
References: <4aa657d4.9e15f10a.5d53.ffff87a5SMTPIN_ADDED@mx.google.com>
	<!&!AAAAAAAAAAAYAAAAAAAAAESGsVuZMAhNnqDOKdTTUVyipAEAEAAAAHdZKRFvqttOnDdzGi4Mf6gBAAAAAA==@gmail.com>
Message-ID: <!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAABhOImxPagNDmGlGFbCqYh4BAAAAAA==@gmail.com>

I confirm the persistence of the problem also after updating to:
ChangeLog 12446 2009-09-09 00:24:54Z druzus

No other one reports same problem?
Best regards.
Maurizio la Cecilia               
 
 

> -----Messaggio originale-----
> Da: Maurizio la Cecilia [mailto:m.lacecilia@gmail.com] 
> Inviato: marted? 8 settembre 2009 18.08
> A: harbour@harbour-project.org
> Oggetto: [Harbour] Getting errors and warnings in MinGW compile
> 
> I receive the messages below trying to compile latest CVS 
> versions with
> MinGW.
> 
> hbmk2: Error: Running Harbour compiler (internal). 1
> hbi18n.o:hbi18n.c:(.text+0x2c): undefined reference to
> `hb_vmProcessSymbolsEx'
> 
> c:/CVS/harbour/bin/../utils/hbmk2/hbmk2.prg(845) Warning 
> W0001  Ambiguous
> reference 'HB_VERSION_BUILD_PLAT'
> 
> c:/CVS/harbour/bin/../utils/hbmk2/hbmk2.prg(1102) Warning 
> W0001  Ambiguous
> reference 'HB_VERSION_BUILD_COMP'
> 
> c:/CVS/harbour/bin/../utils/hbmk2/hbmk2.prg(5832) Warning 
> W0001  Ambiguous
> reference 'HB_VERSION_BUILD_PLAT'
> 
> c:/include\common.ch(85) Warning W0001  Redefinition or 
> duplicate definition
> of #define HB_SYMBOL_UNUSED
> 
> The commands given to compile are:
> 
> Win-make clean
> Win-make install
> 
> TIA for your answer.
> 
> Maurizio la Cecilia               
> 
> 
> 

From vouchcac at users.sourceforge.net  Wed Sep  9 03:54:15 2009
From: vouchcac at users.sourceforge.net (vouchcac@users.sourceforge.net)
Date: Wed Sep  9 03:54:21 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12448] trunk/harbour
Message-ID: <E1MlI0N-0002Lk-Tp@d5vjzd1.ch3.sourceforge.com>

Revision: 12448
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12448&view=rev
Author:   vouchcac
Date:     2009-09-09 07:54:14 +0000 (Wed, 09 Sep 2009)

Log Message:
-----------
2009-09-09 00:49 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * contrib/hbqt/hbqt_slots.cpp
  * contrib/hbqt/hbqt_slots.h
  * contrib/hbqt/moc_slots.cpp
    + Implemented few more signal/slots as reqested by CdQ.
    ! Introduced    && hb_vmRequestReenter()  in the condition statment executing a block.
      Przemek, please check me. It still GPFs in MT scenarios.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbqt/hbqt_slots.cpp
    trunk/harbour/contrib/hbqt/hbqt_slots.h
    trunk/harbour/contrib/hbqt/moc_slots.cpp


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Wed Sep  9 04:09:38 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep  9 04:09:45 2009
Subject: R: [Harbour] Getting errors and warnings in MinGW compile
In-Reply-To: <!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAABhOImxPagNDmGlGFbCqYh4BAAAAAA==@gmail.com>
References: <4aa657d4.9e15f10a.5d53.ffff87a5SMTPIN_ADDED@mx.google.com>
	<!&!AAAAAAAAAAAYAAAAAAAAAESGsVuZMAhNnqDOKdTTUVyipAEAEAAAAHdZKRFvqttOnDdzGi4Mf6gBAAAAAA==@gmail.com>
	<!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAABhOImxPagNDmGlGFbCqYh4BAAAAAA==@gmail.com>
Message-ID: <20090909080938.GA22830@uran.home.aster.pl>

On Wed, 09 Sep 2009, Maurizio la Cecilia wrote:

Hi,

> I confirm the persistence of the problem also after updating to:
> ChangeLog 12446 2009-09-09 00:24:54Z druzus
> No other one reports same problem?

There is no problem with current SVN code but we have
never ending problem with asking users to make _CLEAN_
build after syncing with SVN and before reporting problems ;-)

Please execute:
   make clean
before:
   make

I believe it will help. If not then please report the problem.
Otherwise such messages only confuse other users.

best regards,
Przemek
From francek.prijatelj at siol.net  Wed Sep  9 04:11:39 2009
From: francek.prijatelj at siol.net (=?UTF-8?Q?Fran=C4=8Dek_Prijatelj?=)
Date: Wed Sep  9 04:11:45 2009
Subject: [Harbour] HOWTO about codepage in HbQt
In-Reply-To: <20090909065531.GA21116@uran.home.aster.pl>
References: <4AA55265.1080808@siol.net> <25334703.post@talk.nabble.com>
	<25340944.post@talk.nabble.com>
	<d6fa31440909080121g7d445f2aie39b6bdec7868dd0@mail.gmail.com>
	<25343020.post@talk.nabble.com>
	<d6fa31440909080539k65a3969el6f0941748a5bacc@mail.gmail.com>
	<20090908130933.GA24975@uran.home.aster.pl>
	<d6fa31440909082313j35d69090j44c2f66acb0bb1bc@mail.gmail.com>
	<20090909065531.GA21116@uran.home.aster.pl>
Message-ID: <25360489.post@talk.nabble.com>


Hi Przemek

I think Harbour compiler should support BOM in .prg and include files.
Tell me ,if there is a big problem to conditionaly skip first tree bytes.
Every modern editor supports it.
Anyhow we are in Unicode age.

Sorry if my comment is out of the main thread.


Brgs
Fran?ek
-- 
View this message in context: http://www.nabble.com/HOWTO-about-codepage-in-HbQt-tp25334628p25360489.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Wed Sep  9 04:17:22 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep  9 04:17:29 2009
Subject: [Harbour] HOWTO about codepage in HbQt
In-Reply-To: <25360489.post@talk.nabble.com>
References: <4AA55265.1080808@siol.net> <25334703.post@talk.nabble.com>
	<25340944.post@talk.nabble.com>
	<d6fa31440909080121g7d445f2aie39b6bdec7868dd0@mail.gmail.com>
	<25343020.post@talk.nabble.com>
	<d6fa31440909080539k65a3969el6f0941748a5bacc@mail.gmail.com>
	<20090908130933.GA24975@uran.home.aster.pl>
	<d6fa31440909082313j35d69090j44c2f66acb0bb1bc@mail.gmail.com>
	<20090909065531.GA21116@uran.home.aster.pl>
	<25360489.post@talk.nabble.com>
Message-ID: <20090909081722.GA29461@uran.home.aster.pl>

On Wed, 09 Sep 2009, Fran?ek Prijatelj wrote:

Hi,

> I think Harbour compiler should support BOM in .prg and include files.
> Tell me ,if there is a big problem to conditionaly skip first tree bytes.
> Every modern editor supports it.
> Anyhow we are in Unicode age.

It's not a problem with file signature striping - this is trivial but
you still have to know how to encode/translate data inside the file
and for this you need CP support in compiler.
As long as we will not have CP support in compiler then current compile
error is quite good protection against possible problems caused by files
unintentionally translated to UTF8 by some editors.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Sep  9 04:21:26 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 04:21:38 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12447] trunk/harbour
In-Reply-To: <20090909075237.GA5925@uran.home.aster.pl>
References: <E1MlHPi-0005DO-OL@74yxhf1.ch3.sourceforge.com>
	<20090909075237.GA5925@uran.home.aster.pl>
Message-ID: <F9082C79-9061-41F7-870F-0C3E83CA3052@syenar.hu>

> On Wed, 09 Sep 2009, vszakats@users.sourceforge.net wrote:
>>  * utils/hbmk2/hbmk2.prg
>>    ! Implemented fix from hbmk script for shared mingw targets in  
>> GUI mode.
>
> Thank you.
> There is yet another problem.
> hbmk2 passes GT libraries specified by -gt* switch to link command  
> before
> harbour import library which also contains them so finally they are  
> linked
> twice.
> You can see it checking the size of final binaries. For simple test  
> code
> it should be less then 10KB and each GT increase it.
> Known core GTs should be removed from linked library list in share  
> builds.
> The same happens in Linux.

Thank you, it was typo in -gt option processing code.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Wed Sep  9 04:21:57 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep  9 04:22:03 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12449] trunk/harbour
Message-ID: <E1MlIRB-0004wO-RZ@dn4whf1.ch3.sourceforge.com>

Revision: 12449
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12449&view=rev
Author:   vszakats
Date:     2009-09-09 08:21:54 +0000 (Wed, 09 Sep 2009)

Log Message:
-----------

2009-09-09 10:20 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed typo in -gt option processing code which cause that
      duplicate and core GTs were added to internal GT list.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Wed Sep  9 04:23:20 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 04:23:30 2009
Subject: R: [Harbour] Getting errors and warnings in MinGW compile
In-Reply-To: <20090909080938.GA22830@uran.home.aster.pl>
References: <4aa657d4.9e15f10a.5d53.ffff87a5SMTPIN_ADDED@mx.google.com>
	<!&!AAAAAAAAAAAYAAAAAAAAAESGsVuZMAhNnqDOKdTTUVyipAEAEAAAAHdZKRFvqttOnDdzGi4Mf6gBAAAAAA==@gmail.com>
	<!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAABhOImxPagNDmGlGFbCqYh4BAAAAAA==@gmail.com>
	<20090909080938.GA22830@uran.home.aster.pl>
Message-ID: <AEB2C702-FF1C-4768-A37F-2C14640D835B@syenar.hu>

To me it looks local environment setting problem,
covered by TROUBLESHOOTING section in INSTALL.

Brgds,
Viktor

On 2009.09.09., at 10:09, Przemyslaw Czerpak wrote:

> On Wed, 09 Sep 2009, Maurizio la Cecilia wrote:
>
> Hi,
>
>> I confirm the persistence of the problem also after updating to:
>> ChangeLog 12446 2009-09-09 00:24:54Z druzus
>> No other one reports same problem?
>
> There is no problem with current SVN code but we have
> never ending problem with asking users to make _CLEAN_
> build after syncing with SVN and before reporting problems ;-)
>
> Please execute:
>   make clean
> before:
>   make
>
> I believe it will help. If not then please report the problem.
> Otherwise such messages only confuse other users.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From francek.prijatelj at siol.net  Wed Sep  9 04:33:48 2009
From: francek.prijatelj at siol.net (=?UTF-8?Q?Fran=C4=8Dek_Prijatelj?=)
Date: Wed Sep  9 04:33:54 2009
Subject: [Harbour] HOWTO about codepage in HbQt
In-Reply-To: <20090909081722.GA29461@uran.home.aster.pl>
References: <4AA55265.1080808@siol.net> <25334703.post@talk.nabble.com>
	<25340944.post@talk.nabble.com>
	<d6fa31440909080121g7d445f2aie39b6bdec7868dd0@mail.gmail.com>
	<25343020.post@talk.nabble.com>
	<d6fa31440909080539k65a3969el6f0941748a5bacc@mail.gmail.com>
	<20090908130933.GA24975@uran.home.aster.pl>
	<d6fa31440909082313j35d69090j44c2f66acb0bb1bc@mail.gmail.com>
	<20090909065531.GA21116@uran.home.aster.pl>
	<25360489.post@talk.nabble.com>
	<20090909081722.GA29461@uran.home.aster.pl>
Message-ID: <25360758.post@talk.nabble.com>


Hi 

Til now I had a few cases where I needed it.
For example a string of html encoded in utf8.
Maybe  it can be solved  with -utf8 switch.

best regards,
Fran?ek




Przemyslaw Czerpak-2 wrote:
> 
> On Wed, 09 Sep 2009, Fran?ek Prijatelj wrote:
> 
> Hi,
> 
>> I think Harbour compiler should support BOM in .prg and include files.
>> Tell me ,if there is a big problem to conditionaly skip first tree bytes.
>> Every modern editor supports it.
>> Anyhow we are in Unicode age.
> 
> It's not a problem with file signature striping - this is trivial but
> you still have to know how to encode/translate data inside the file
> and for this you need CP support in compiler.
> As long as we will not have CP support in compiler then current compile
> error is quite good protection against possible problems caused by files
> unintentionally translated to UTF8 by some editors.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/HOWTO-about-codepage-in-HbQt-tp25334628p25360758.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Wed Sep  9 04:39:30 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 04:39:41 2009
Subject: [Harbour] HOWTO about codepage in HbQt
In-Reply-To: <25360758.post@talk.nabble.com>
References: <4AA55265.1080808@siol.net> <25334703.post@talk.nabble.com>
	<25340944.post@talk.nabble.com>
	<d6fa31440909080121g7d445f2aie39b6bdec7868dd0@mail.gmail.com>
	<25343020.post@talk.nabble.com>
	<d6fa31440909080539k65a3969el6f0941748a5bacc@mail.gmail.com>
	<20090908130933.GA24975@uran.home.aster.pl>
	<d6fa31440909082313j35d69090j44c2f66acb0bb1bc@mail.gmail.com>
	<20090909065531.GA21116@uran.home.aster.pl>
	<25360489.post@talk.nabble.com>
	<20090909081722.GA29461@uran.home.aster.pl>
	<25360758.post@talk.nabble.com>
Message-ID: <D7259E29-8D2B-4EBA-B1E7-9B517777FC57@syenar.hu>

Unicode handling all across Harbour is probably the last missing
big core/compiler feature which is needed to level our project
to Python/Java and the like.

IMO a very important one.

Maybe we can make use of some existing Unicode conversion libs
(like iconv) to avoid replicating such logic inside Harbour.
Of course this is just one part of the problem.

Brgds,
Viktor

On 2009.09.09., at 10:33, Fran?ek Prijatelj wrote:

>
> Hi
>
> Til now I had a few cases where I needed it.
> For example a string of html encoded in utf8.
> Maybe  it can be solved  with -utf8 switch.
>
> best regards,
> Fran?ek
>
>
>
>
> Przemyslaw Czerpak-2 wrote:
>>
>> On Wed, 09 Sep 2009, Fran?ek Prijatelj wrote:
>>
>> Hi,
>>
>>> I think Harbour compiler should support BOM in .prg and include  
>>> files.
>>> Tell me ,if there is a big problem to conditionaly skip first tree  
>>> bytes.
>>> Every modern editor supports it.
>>> Anyhow we are in Unicode age.
>>
>> It's not a problem with file signature striping - this is trivial but
>> you still have to know how to encode/translate data inside the file
>> and for this you need CP support in compiler.
>> As long as we will not have CP support in compiler then current  
>> compile
>> error is quite good protection against possible problems caused by  
>> files
>> unintentionally translated to UTF8 by some editors.
>>
>> best regards,
>> Przemek
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/HOWTO-about-codepage-in-HbQt-tp25334628p25360758.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From m.lacecilia at gmail.com  Wed Sep  9 04:47:41 2009
From: m.lacecilia at gmail.com (Maurizio la Cecilia)
Date: Wed Sep  9 04:47:54 2009
Subject: R: R: [Harbour] Getting errors and warnings in MinGW compile
In-Reply-To: <20090909080938.GA22830@uran.home.aster.pl>
References: <4aa657d4.9e15f10a.5d53.ffff87a5SMTPIN_ADDED@mx.google.com><!&!AAAAAAAAAAAYAAAAAAAAAESGsVuZMAhNnqDOKdTTUVyipAEAEAAAAHdZKRFvqttOnDdzGi4Mf6gBAAAAAA==@gmail.com><!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAABhOImxPagNDmGlGFbCqYh4BAAAAAA==@gmail.com>
	<20090909080938.GA22830@uran.home.aster.pl>
Message-ID: <!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAAGUCDLC1GcxMh89Lpz/l+wYBAAAAAA==@gmail.com>


> Da: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl] 
> Inviato: mercoled? 9 settembre 2009 10.10
> A: Harbour Project Main Developer List.
> Oggetto: Re: R: [Harbour] Getting errors and warnings in MinGW compile
> 
> On Wed, 09 Sep 2009, Maurizio la Cecilia wrote:
> 
> Hi,
> 
> > I confirm the persistence of the problem also after updating to:
> > ChangeLog 12446 2009-09-09 00:24:54Z druzus
> > No other one reports same problem?
> 
> There is no problem with current SVN code but we have
> never ending problem with asking users to make _CLEAN_
> build after syncing with SVN and before reporting problems ;-)
> 
> Please execute:
>    make clean
> before:
>    make
> 
> I believe it will help. If not then please report the problem.
> Otherwise such messages only confuse other users.
> 
> best regards,
> Przemek
> 
> 

As said in my first message:

> The commands given to compile are:
> 
> Win-make clean
> Win-make install
> 

Thus, if i don't missed something, the problem is real.
I ever compiled fine using those commands.
I advise also that, to avoid conflicts with old versions, i tried to compile
after a fresh checkout from repository, but the result is the same.
Anyway, if i risk only to confuse other users, don't worry about this
problem if seems to be only of mine.
Best regards,
Maurizio

From alxokhotnikov at gmail.com  Wed Sep  9 05:13:39 2009
From: alxokhotnikov at gmail.com (Alexandr Okhotnikov)
Date: Wed Sep  9 05:13:46 2009
Subject: [Harbour] HOWTO about codepage in HbQt
In-Reply-To: <25360758.post@talk.nabble.com>
References: <4AA55265.1080808@siol.net>
	<d6fa31440909080121g7d445f2aie39b6bdec7868dd0@mail.gmail.com>
	<25343020.post@talk.nabble.com>
	<d6fa31440909080539k65a3969el6f0941748a5bacc@mail.gmail.com>
	<20090908130933.GA24975@uran.home.aster.pl>
	<d6fa31440909082313j35d69090j44c2f66acb0bb1bc@mail.gmail.com>
	<20090909065531.GA21116@uran.home.aster.pl>
	<25360489.post@talk.nabble.com>
	<20090909081722.GA29461@uran.home.aster.pl>
	<25360758.post@talk.nabble.com>
Message-ID: <d6fa31440909090213k4769dcf3s7b6ec8fb68d52029@mail.gmail.com>

Hi

sources in codepage 1251

REQUEST HB_CODEPAGE_RU1251
INIT PROCEDURE ALX_INIT ()
     LOCAL lang: = QTextCodec (): new ()
     lang: setCodecForCStrings (lang: codecForName_1 ( "Windows-1251"))
     HB_SETCODEPAGE ( "RU1251")
RETURN

National symbols in the string:

For example, QlineEdit
If you do QLineEdit: SetText (string), then the string is displayed
correctly. But after this QLineEdit: Text () returns a wrong string
(replaced all national symbols on the "?")

/ *
  * QString text () const
  * /
HB_FUNC (QT_QLINEEDIT_TEXT)
(
    hb_retc (hbqt_par_QLineEdit (1) -> text (). toLatin1 (). data ());
)

Replacing toLatin1 () on toAscii () everything is working properly
From harbour.01 at syenar.hu  Wed Sep  9 05:33:27 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 05:33:37 2009
Subject: [Harbour] Darwin "Grand Central" low-level thread dispatching
	feature
Message-ID: <95F66E99-8070-4C56-A2EE-9A5BD5054358@syenar.hu>

Maybe useful for Harbour:
http://arstechnica.com/apple/reviews/2009/08/mac-os-x-10-6.ars/12

Brgds,
Viktor

From vszakats at users.sourceforge.net  Wed Sep  9 06:33:02 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep  9 06:33:08 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12450] trunk/harbour
Message-ID: <E1MlKU2-0000MK-PW@dn4whf1.ch3.sourceforge.com>

Revision: 12450
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12450&view=rev
Author:   vszakats
Date:     2009-09-09 10:33:01 +0000 (Wed, 09 Sep 2009)

Log Message:
-----------
2009-09-09 12:32 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  + contrib/hbnetio/utils/netiosrv.hbp
    * Added project file which will include platform name in
      target netiosrv executable name.

Modified Paths:
--------------
    trunk/harbour/ChangeLog

Added Paths:
-----------
    trunk/harbour/contrib/hbnetio/utils/netiosrv.hbp


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Wed Sep  9 07:02:24 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep  9 07:02:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12451] trunk/harbour
Message-ID: <E1MlKwS-0001C7-EB@dn4whf1.ch3.sourceforge.com>

Revision: 12451
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12451&view=rev
Author:   vszakats
Date:     2009-09-09 11:02:20 +0000 (Wed, 09 Sep 2009)

Log Message:
-----------
2009-09-09 13:00 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * bin/postinst.bat
    + Adding watt lib to hbmk.cfg at postinst phase.

  * contrib/hbnetio/utils/netiosrv.hbp
    + Added 8.3 output name for dos platforms.

  * config/detfun.mk
    + Always export HB_HAS_* variables.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/postinst.bat
    trunk/harbour/config/detfun.mk
    trunk/harbour/contrib/hbnetio/utils/netiosrv.hbp


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From elart at elart.it  Wed Sep  9 07:02:38 2009
From: elart at elart.it (elart)
Date: Wed Sep  9 07:02:46 2009
Subject: [Harbour] Question about revision number and harbour -build update
Message-ID: <WWopapUh.1252494158.0261020.marcobra@82.105.36.210>


When i do a partial compile from svn

make; sudo -E make install

i cannot get the build number sync with revision number coming from svn...

only if i do a make clean i get the revision build number is like the svn
revision number.

make clean; make; sudo -E make install

it is possible to update the build number without recompiling all the
source tree.

I remember there was a "hbverfix" command in previous release.

Thank you
From vszakats at users.sourceforge.net  Wed Sep  9 07:28:04 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep  9 07:28:10 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12452] trunk/harbour
Message-ID: <E1MlLLI-0001o6-VA@dn4whf1.ch3.sourceforge.com>

Revision: 12452
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12452&view=rev
Author:   vszakats
Date:     2009-09-09 11:28:02 +0000 (Wed, 09 Sep 2009)

Log Message:
-----------
2009-09-09 13:27 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/detfun.mk
    ! Reverted prev. It was wrong and also unnecessary.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/detfun.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Wed Sep  9 07:33:31 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 07:33:43 2009
Subject: [Harbour] Question about revision number and harbour -build update
In-Reply-To: <WWopapUh.1252494158.0261020.marcobra@82.105.36.210>
References: <WWopapUh.1252494158.0261020.marcobra@82.105.36.210>
Message-ID: <709887AA-818C-49AD-836E-DA73C040EB8D@syenar.hu>

To make that, I think we should finally make the step to
rename ChangeLog to CHANGES to make 8.3 systems happy. If
this is done we can add a make rule to update hbverbld.h
when CHANGES changed. [ as a side effect some ugly kludges
could be deleted which aim to handle this case. ] [ If
this is done, source/hbpp/Makefile should be touched which
is best done by Przemek. ]

Maybe there are better ideas for it though.

Brgds,
Viktor

On 2009.09.09., at 1:02, elart wrote:

>
> When i do a partial compile from svn
>
> make; sudo -E make install
>
> i cannot get the build number sync with revision number coming from  
> svn...
>
> only if i do a make clean i get the revision build number is like  
> the svn
> revision number.
>
> make clean; make; sudo -E make install
>
> it is possible to update the build number without recompiling all the
> source tree.
>
> I remember there was a "hbverfix" command in previous release.
>
> Thank you
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Sep  9 09:00:04 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 09:00:15 2009
Subject: [Harbour] dbRename() or equivalent
Message-ID: <93E3ECA7-F832-41F4-AF8A-04A1B63A0333@syenar.hu>

Hi All,

What is the proper way to rename a table so that it
also works on remote server?

We have dbExists(), dbDrop(), we this bit seems to be
missing. Or I'm missing some method which can be used
to get the same effect.

Remote rename is used when modifying structure of
existing tables, manually implemented (somewhat more
intelligent/efficient) packing and a few other scenarios.

Brgds,
Viktor

From Istvan.Bisz at t-online.hu  Wed Sep  9 09:04:40 2009
From: Istvan.Bisz at t-online.hu (=?UTF-8?Q?Bisz_Istv=C3=A1n?=)
Date: Wed Sep  9 09:05:15 2009
Subject: [Harbour] 'sqlite3' is skipped in clean phase,
	but isn't skipped  in install phase.
Message-ID: <002601ca314e$17e42c00$47ac8400$@Bisz@t-online.hu>

Hi,

 

A small glitch during the harbour build on CentOS 5.3 solved with export HB_INC_SQLITE3=no.

 

During the make clean the sqlite3 is skipped:

 

! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org

! MAKE: make 3.81 /bin/sh clean  

! HB_HOST_PLAT: linux  HB_SHELL: sh

! HB_PLATFORM: linux (autodetected)

! HB_COMPILER: gcc (autodetected: /usr/bin/)

! Component: 'openssl' found in /usr/include

! Component: 'gpm' found in /usr/include

! Component: 'slang' found in /usr/include/slang

! Component: 'curses' found in /usr/include

! Component: 'x11' found in /usr/include

! Component: 'wattcp/watt-32' not supported on linux platform

! HB_INSTALL_PREFIX automatically set to: /usr/local

! REVISION: 12452

! 'gtdos' library skipped 

! 'gtgui' library skipped 

! 'gtos2' library skipped 

! 'gtwin' library skipped 

! 'gtwvt' library skipped 

! 'gtwvg' library skipped 

! 'hbodbc' library skipped ('odbc' not found)

! 'hbwin' library skipped 

! 'gtalleg' library skipped ('allegro' not found)

! 'hbblat' library skipped 

! 'hbfbird' library skipped ('firebird' not found)

! 'hbfimage' library skipped ('freeimage' not supported on linux platform)

! 'hbmysql' library skipped ('mysql' not found)

! 'hbpgsql' library skipped ('postgresql' not found)

! 'rddads' library skipped ('ads' not found)

! 'sddmy' library skipped ('mysql' not found)

! 'sddpg' library skipped ('postgresql' not found)

! 'sddfb' library skipped ('firebird' not found)

! 'sddodbc' library skipped ('odbc' not found)

! 'libpng' library skipped 

! 'sqlite3' library skipped (not supported or disabled)

 

But during the make install:

 

! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org

! MAKE: make 3.81 /bin/sh install  

! HB_HOST_PLAT: linux  HB_SHELL: sh

! HB_PLATFORM: linux (autodetected)

! HB_COMPILER: gcc (autodetected: /usr/bin/)

! Component: 'openssl' found in /usr/include

! Component: 'gpm' found in /usr/include

! Component: 'slang' found in /usr/include/slang

! Component: 'curses' found in /usr/include

! Component: 'x11' found in /usr/include

! Component: 'wattcp/watt-32' not supported on linux platform

! HB_INSTALL_PREFIX automatically set to: /usr/local

! REVISION: 12452

make[2]: Nothing to be done for `install'.

 

?

 

! 'hbodbc' library skipped ('odbc' not found)

gcc  -I. -I../../../../../include  -Wall -W -O3  -I/usr/include  -ohbsqlit3.o -c ../../../hbsqlit3.c

../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_EXTENDED_RESULT_CODES???:

../../../hbsqlit3.c:443: warning: implicit declaration of function ???sqlite3_extended_result_codes???

../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_PREPARE???:

../../../hbsqlit3.c:741: warning: implicit declaration of function ???sqlite3_prepare_v2???

../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_BIND_ZEROBLOB???:

../../../hbsqlit3.c:1044: warning: implicit declaration of function ???sqlite3_bind_zeroblob???

../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_ENABLE_LOAD_EXTENSION???:

../../../hbsqlit3.c:1347: warning: implicit declaration of function ???sqlite3_enable_load_extension???

../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_RESET_AUTO_EXTENSION???:

../../../hbsqlit3.c:1363: warning: implicit declaration of function ???sqlite3_reset_auto_extension???

../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_BLOB_OPEN???:

../../../hbsqlit3.c:1568: error: ???sqlite3_blob??? undeclared (first use in this function)

../../../hbsqlit3.c:1568: error: (Each undeclared identifier is reported only once

../../../hbsqlit3.c:1568: error: for each function it appears in.)

../../../hbsqlit3.c:1568: error: ???ppBlob??? undeclared (first use in this function)

../../../hbsqlit3.c:1573: warning: implicit declaration of function ???sqlite3_blob_open???

../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_BLOB_CLOSE???:

../../../hbsqlit3.c:1603: error: ???sqlite3_blob??? undeclared (first use in this function)

../../../hbsqlit3.c:1603: error: ???pBlob??? undeclared (first use in this function)

../../../hbsqlit3.c:1603: error: expected expression before ???)??? token

../../../hbsqlit3.c:1607: warning: implicit declaration of function ???sqlite3_blob_close???

../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_BLOB_BYTES???:

../../../hbsqlit3.c:1621: error: ???sqlite3_blob??? undeclared (first use in this function)

../../../hbsqlit3.c:1621: error: ???pBlob??? undeclared (first use in this function)

../../../hbsqlit3.c:1621: error: expected expression before ???)??? token

../../../hbsqlit3.c:1625: warning: implicit declaration of function ???sqlite3_blob_bytes???

../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_BLOB_READ???:

../../../hbsqlit3.c:1639: error: ???sqlite3_blob??? undeclared (first use in this function)

../../../hbsqlit3.c:1639: error: ???pBlob??? undeclared (first use in this function)

../../../hbsqlit3.c:1639: error: expected expression before ???)??? token

../../../hbsqlit3.c:1655: warning: implicit declaration of function ???sqlite3_blob_read???

../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_BLOB_WRITE???:

../../../hbsqlit3.c:1677: error: ???sqlite3_blob??? undeclared (first use in this function)

../../../hbsqlit3.c:1677: error: ???pBlob??? undeclared (first use in this function)

../../../hbsqlit3.c:1677: error: expected expression before ???)??? token

../../../hbsqlit3.c:1688: warning: implicit declaration of function ???sqlite3_blob_write???

make[3]: *** [hbsqlit3.o] Error 1

make[2]: *** [descend] Error 2

make[1]: *** [hbsqlit3.inst] Error 2

make: *** [contrib.inst] Error 2

 

Best regards,

Istv?n Bisz

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090909/13c1e03c/attachment.html
From harbour.01 at syenar.hu  Wed Sep  9 09:15:21 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 09:15:32 2009
Subject: [Harbour] 'sqlite3' is skipped in clean phase,
	but isn't skipped  in install phase.
In-Reply-To: <002601ca314e$17e42c00$47ac8400$@Bisz@t-online.hu>
References: <002601ca314e$17e42c00$47ac8400$@Bisz@t-online.hu>
Message-ID: <D1A9ACEE-F0E6-4FDC-A090-0E39302312F3@syenar.hu>

Hi,

The problem seems to be elsewhere. 'sqlite3' is probably not built in
either scenarios (although this part is actually missing from the second
log snippet included). The error seems to happen when building  
'hbsqlit3'
(the Harbour wrapper lib) and it suspiciously looks like errors due to
old sqlite3 headers, and missing guards from the wrapper code. Which  
version
of sqlite3 is provided on your CentOS system?

Brgds,
Viktor

On 2009.09.09., at 3:04, Bisz Istv?n wrote:

> Hi,
>
> A small glitch during the harbour build on CentOS 5.3 solved with  
> export HB_INC_SQLITE3=no.
>
> During the make clean the sqlite3 is skipped:
>
> ! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
> ! MAKE: make 3.81 /bin/sh clean
> ! HB_HOST_PLAT: linux  HB_SHELL: sh
> ! HB_PLATFORM: linux (autodetected)
> ! HB_COMPILER: gcc (autodetected: /usr/bin/)
> ! Component: 'openssl' found in /usr/include
> ! Component: 'gpm' found in /usr/include
> ! Component: 'slang' found in /usr/include/slang
> ! Component: 'curses' found in /usr/include
> ! Component: 'x11' found in /usr/include
> ! Component: 'wattcp/watt-32' not supported on linux platform
> ! HB_INSTALL_PREFIX automatically set to: /usr/local
> ! REVISION: 12452
> ! 'gtdos' library skipped
> ! 'gtgui' library skipped
> ! 'gtos2' library skipped
> ! 'gtwin' library skipped
> ! 'gtwvt' library skipped
> ! 'gtwvg' library skipped
> ! 'hbodbc' library skipped ('odbc' not found)
> ! 'hbwin' library skipped
> ! 'gtalleg' library skipped ('allegro' not found)
> ! 'hbblat' library skipped
> ! 'hbfbird' library skipped ('firebird' not found)
> ! 'hbfimage' library skipped ('freeimage' not supported on linux  
> platform)
> ! 'hbmysql' library skipped ('mysql' not found)
> ! 'hbpgsql' library skipped ('postgresql' not found)
> ! 'rddads' library skipped ('ads' not found)
> ! 'sddmy' library skipped ('mysql' not found)
> ! 'sddpg' library skipped ('postgresql' not found)
> ! 'sddfb' library skipped ('firebird' not found)
> ! 'sddodbc' library skipped ('odbc' not found)
> ! 'libpng' library skipped
> ! 'sqlite3' library skipped (not supported or disabled)
>
> But during the make install:
>
> ! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
> ! MAKE: make 3.81 /bin/sh install
> ! HB_HOST_PLAT: linux  HB_SHELL: sh
> ! HB_PLATFORM: linux (autodetected)
> ! HB_COMPILER: gcc (autodetected: /usr/bin/)
> ! Component: 'openssl' found in /usr/include
> ! Component: 'gpm' found in /usr/include
> ! Component: 'slang' found in /usr/include/slang
> ! Component: 'curses' found in /usr/include
> ! Component: 'x11' found in /usr/include
> ! Component: 'wattcp/watt-32' not supported on linux platform
> ! HB_INSTALL_PREFIX automatically set to: /usr/local
> ! REVISION: 12452
> make[2]: Nothing to be done for `install'.
>
> ?
>
> ! 'hbodbc' library skipped ('odbc' not found)
> gcc  -I. -I../../../../../include  -Wall -W -O3  -I/usr/include  - 
> ohbsqlit3.o -c ../../../hbsqlit3.c
> ../../../hbsqlit3.c: In function ? 
> ??HB_FUN_SQLITE3_EXTENDED_RESULT_CODES???:
> ../../../hbsqlit3.c:443: warning: implicit declaration of function ? 
> ??sqlite3_extended_result_codes???
> ../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_PREPARE? 
> ??:
> ../../../hbsqlit3.c:741: warning: implicit declaration of function ? 
> ??sqlite3_prepare_v2???
> ../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_BIND_ZEROBLOB? 
> ??:
> ../../../hbsqlit3.c:1044: warning: implicit declaration of function ? 
> ??sqlite3_bind_zeroblob???
> ../../../hbsqlit3.c: In function ? 
> ??HB_FUN_SQLITE3_ENABLE_LOAD_EXTENSION???:
> ../../../hbsqlit3.c:1347: warning: implicit declaration of function ? 
> ??sqlite3_enable_load_extension???
> ../../../hbsqlit3.c: In function ? 
> ??HB_FUN_SQLITE3_RESET_AUTO_EXTENSION???:
> ../../../hbsqlit3.c:1363: warning: implicit declaration of function ? 
> ??sqlite3_reset_auto_extension???
> ../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_BLOB_OPEN? 
> ??:
> ../../../hbsqlit3.c:1568: error: ???sqlite3_blob???  
> undeclared (first use in this function)
> ../../../hbsqlit3.c:1568: error: (Each undeclared identifier is  
> reported only once
> ../../../hbsqlit3.c:1568: error: for each function it appears in.)
> ../../../hbsqlit3.c:1568: error: ???ppBlob??? undeclared  
> (first use in this function)
> ../../../hbsqlit3.c:1573: warning: implicit declaration of function ? 
> ??sqlite3_blob_open???
> ../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_BLOB_CLOSE? 
> ??:
> ../../../hbsqlit3.c:1603: error: ???sqlite3_blob???  
> undeclared (first use in this function)
> ../../../hbsqlit3.c:1603: error: ???pBlob??? undeclared  
> (first use in this function)
> ../../../hbsqlit3.c:1603: error: expected expression before ???)? 
> ?? token
> ../../../hbsqlit3.c:1607: warning: implicit declaration of function ? 
> ??sqlite3_blob_close???
> ../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_BLOB_BYTES? 
> ??:
> ../../../hbsqlit3.c:1621: error: ???sqlite3_blob???  
> undeclared (first use in this function)
> ../../../hbsqlit3.c:1621: error: ???pBlob??? undeclared  
> (first use in this function)
> ../../../hbsqlit3.c:1621: error: expected expression before ???)? 
> ?? token
> ../../../hbsqlit3.c:1625: warning: implicit declaration of function ? 
> ??sqlite3_blob_bytes???
> ../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_BLOB_READ? 
> ??:
> ../../../hbsqlit3.c:1639: error: ???sqlite3_blob???  
> undeclared (first use in this function)
> ../../../hbsqlit3.c:1639: error: ???pBlob??? undeclared  
> (first use in this function)
> ../../../hbsqlit3.c:1639: error: expected expression before ???)? 
> ?? token
> ../../../hbsqlit3.c:1655: warning: implicit declaration of function ? 
> ??sqlite3_blob_read???
> ../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_BLOB_WRITE? 
> ??:
> ../../../hbsqlit3.c:1677: error: ???sqlite3_blob???  
> undeclared (first use in this function)
> ../../../hbsqlit3.c:1677: error: ???pBlob??? undeclared  
> (first use in this function)
> ../../../hbsqlit3.c:1677: error: expected expression before ???)? 
> ?? token
> ../../../hbsqlit3.c:1688: warning: implicit declaration of function ? 
> ??sqlite3_blob_write???
> make[3]: *** [hbsqlit3.o] Error 1
> make[2]: *** [descend] Error 2
> make[1]: *** [hbsqlit3.inst] Error 2
> make: *** [contrib.inst] Error 2
>
> Best regards,
> Istv?n Bisz
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From Istvan.Bisz at t-online.hu  Wed Sep  9 09:23:09 2009
From: Istvan.Bisz at t-online.hu (=?UTF-8?Q?Bisz_Istv=C3=A1n?=)
Date: Wed Sep  9 09:23:45 2009
Subject: [Harbour] 'sqlite3' is skipped in clean phase,
	but isn't skipped  in install phase.
In-Reply-To: <D1A9ACEE-F0E6-4FDC-A090-0E39302312F3@syenar.hu>
References: <002601ca314e$17e42c00$47ac8400$@Bisz@t-online.hu>
	<D1A9ACEE-F0E6-4FDC-A090-0E39302312F3@syenar.hu>
Message-ID: <003301ca3150$ad246a30$076d3e90$@Bisz@t-online.hu>

Hi,

sqlite.i386                             3.3.6-2                        installed
sqlite-devel.i386                       3.3.6-2                        installed

Best regards,
Istv?n Bisz

-----Original Message-----
From: Viktor Szak?ts [mailto:harbour.01@syenar.hu] 
Sent: 2009. szeptember 9. 15:15
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] 'sqlite3' is skipped in clean phase, but isn't skipped in install phase.

Hi,

The problem seems to be elsewhere. 'sqlite3' is probably not built in
either scenarios (although this part is actually missing from the second
log snippet included). The error seems to happen when building  
'hbsqlit3'
(the Harbour wrapper lib) and it suspiciously looks like errors due to
old sqlite3 headers, and missing guards from the wrapper code. Which  
version
of sqlite3 is provided on your CentOS system?

Brgds,
Viktor

On 2009.09.09., at 3:04, Bisz Istv?n wrote:

> Hi,
>
> A small glitch during the harbour build on CentOS 5.3 solved with  
> export HB_INC_SQLITE3=no.
>
> During the make clean the sqlite3 is skipped:
>
> ! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
> ! MAKE: make 3.81 /bin/sh clean
> ! HB_HOST_PLAT: linux  HB_SHELL: sh
> ! HB_PLATFORM: linux (autodetected)
> ! HB_COMPILER: gcc (autodetected: /usr/bin/)
> ! Component: 'openssl' found in /usr/include
> ! Component: 'gpm' found in /usr/include
> ! Component: 'slang' found in /usr/include/slang
> ! Component: 'curses' found in /usr/include
> ! Component: 'x11' found in /usr/include
> ! Component: 'wattcp/watt-32' not supported on linux platform
> ! HB_INSTALL_PREFIX automatically set to: /usr/local
> ! REVISION: 12452
> ! 'gtdos' library skipped
> ! 'gtgui' library skipped
> ! 'gtos2' library skipped
> ! 'gtwin' library skipped
> ! 'gtwvt' library skipped
> ! 'gtwvg' library skipped
> ! 'hbodbc' library skipped ('odbc' not found)
> ! 'hbwin' library skipped
> ! 'gtalleg' library skipped ('allegro' not found)
> ! 'hbblat' library skipped
> ! 'hbfbird' library skipped ('firebird' not found)
> ! 'hbfimage' library skipped ('freeimage' not supported on linux  
> platform)
> ! 'hbmysql' library skipped ('mysql' not found)
> ! 'hbpgsql' library skipped ('postgresql' not found)
> ! 'rddads' library skipped ('ads' not found)
> ! 'sddmy' library skipped ('mysql' not found)
> ! 'sddpg' library skipped ('postgresql' not found)
> ! 'sddfb' library skipped ('firebird' not found)
> ! 'sddodbc' library skipped ('odbc' not found)
> ! 'libpng' library skipped
> ! 'sqlite3' library skipped (not supported or disabled)
>
> But during the make install:
>
> ! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
> ! MAKE: make 3.81 /bin/sh install
> ! HB_HOST_PLAT: linux  HB_SHELL: sh
> ! HB_PLATFORM: linux (autodetected)
> ! HB_COMPILER: gcc (autodetected: /usr/bin/)
> ! Component: 'openssl' found in /usr/include
> ! Component: 'gpm' found in /usr/include
> ! Component: 'slang' found in /usr/include/slang
> ! Component: 'curses' found in /usr/include
> ! Component: 'x11' found in /usr/include
> ! Component: 'wattcp/watt-32' not supported on linux platform
> ! HB_INSTALL_PREFIX automatically set to: /usr/local
> ! REVISION: 12452
> make[2]: Nothing to be done for `install'.
>
> ?
>
> ! 'hbodbc' library skipped ('odbc' not found)
> gcc  -I. -I../../../../../include  -Wall -W -O3  -I/usr/include  - 
> ohbsqlit3.o -c ../../../hbsqlit3.c
> ../../../hbsqlit3.c: In function ? 
> ??HB_FUN_SQLITE3_EXTENDED_RESULT_CODES???:
> ../../../hbsqlit3.c:443: warning: implicit declaration of function ? 
> ??sqlite3_extended_result_codes???
> ../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_PREPARE? 
> ??:
> ../../../hbsqlit3.c:741: warning: implicit declaration of function ? 
> ??sqlite3_prepare_v2???
> ../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_BIND_ZEROBLOB? 
> ??:
> ../../../hbsqlit3.c:1044: warning: implicit declaration of function ? 
> ??sqlite3_bind_zeroblob???
> ../../../hbsqlit3.c: In function ? 
> ??HB_FUN_SQLITE3_ENABLE_LOAD_EXTENSION???:
> ../../../hbsqlit3.c:1347: warning: implicit declaration of function ? 
> ??sqlite3_enable_load_extension???
> ../../../hbsqlit3.c: In function ? 
> ??HB_FUN_SQLITE3_RESET_AUTO_EXTENSION???:
> ../../../hbsqlit3.c:1363: warning: implicit declaration of function ? 
> ??sqlite3_reset_auto_extension???
> ../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_BLOB_OPEN? 
> ??:
> ../../../hbsqlit3.c:1568: error: ???sqlite3_blob???  
> undeclared (first use in this function)
> ../../../hbsqlit3.c:1568: error: (Each undeclared identifier is  
> reported only once
> ../../../hbsqlit3.c:1568: error: for each function it appears in.)
> ../../../hbsqlit3.c:1568: error: ???ppBlob??? undeclared  
> (first use in this function)
> ../../../hbsqlit3.c:1573: warning: implicit declaration of function ? 
> ??sqlite3_blob_open???
> ../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_BLOB_CLOSE? 
> ??:
> ../../../hbsqlit3.c:1603: error: ???sqlite3_blob???  
> undeclared (first use in this function)
> ../../../hbsqlit3.c:1603: error: ???pBlob??? undeclared  
> (first use in this function)
> ../../../hbsqlit3.c:1603: error: expected expression before ???)? 
> ?? token
> ../../../hbsqlit3.c:1607: warning: implicit declaration of function ? 
> ??sqlite3_blob_close???
> ../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_BLOB_BYTES? 
> ??:
> ../../../hbsqlit3.c:1621: error: ???sqlite3_blob???  
> undeclared (first use in this function)
> ../../../hbsqlit3.c:1621: error: ???pBlob??? undeclared  
> (first use in this function)
> ../../../hbsqlit3.c:1621: error: expected expression before ???)? 
> ?? token
> ../../../hbsqlit3.c:1625: warning: implicit declaration of function ? 
> ??sqlite3_blob_bytes???
> ../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_BLOB_READ? 
> ??:
> ../../../hbsqlit3.c:1639: error: ???sqlite3_blob???  
> undeclared (first use in this function)
> ../../../hbsqlit3.c:1639: error: ???pBlob??? undeclared  
> (first use in this function)
> ../../../hbsqlit3.c:1639: error: expected expression before ???)? 
> ?? token
> ../../../hbsqlit3.c:1655: warning: implicit declaration of function ? 
> ??sqlite3_blob_read???
> ../../../hbsqlit3.c: In function ???HB_FUN_SQLITE3_BLOB_WRITE? 
> ??:
> ../../../hbsqlit3.c:1677: error: ???sqlite3_blob???  
> undeclared (first use in this function)
> ../../../hbsqlit3.c:1677: error: ???pBlob??? undeclared  
> (first use in this function)
> ../../../hbsqlit3.c:1677: error: expected expression before ???)? 
> ?? token
> ../../../hbsqlit3.c:1688: warning: implicit declaration of function ? 
> ??sqlite3_blob_write???
> make[3]: *** [hbsqlit3.o] Error 1
> make[2]: *** [descend] Error 2
> make[1]: *** [hbsqlit3.inst] Error 2
> make: *** [contrib.inst] Error 2
>
> Best regards,
> Istv?n Bisz
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour



From lorenzo.fiorini at gmail.com  Wed Sep  9 10:11:19 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Sep  9 10:11:26 2009
Subject: [Harbour] End of building message
Message-ID: <9257026e0909090711u25fc6f8qb3ffbe7a14aec9a2@mail.gmail.com>

Since the make start with messages it would be nice to have an 'End of
building' message.

! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
...
! 'gtwin' library skipped
! 'gtwvt' library skipped
...
! End of building

best regards,
Lorenzo
From sscc at mweb.co.za  Wed Sep  9 10:19:28 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Wed Sep  9 10:19:36 2009
Subject: [Harbour] win_prt.c and win_tprt.prg
In-Reply-To: <96B0F2F4-FE8E-415D-8E8C-CAB22A86707D@syenar.hu>
References: <4AA67558.1040906@mweb.co.za>
	<96B0F2F4-FE8E-415D-8E8C-CAB22A86707D@syenar.hu>
Message-ID: <4AA7B970.4020703@mweb.co.za>

Viktor Szak?ts wrote:

> Initialization is better be done dynamically if we want to
> avoid consuming a relatively large amount of space in .exe files.
> This needs some extra logic. Of course the while thing could
> get dynamically allocated COM port structures to really
> make it scalable.
> 
> 256 is the maximum offered by NT systems, so if we don't
> to create an artificial Harbour limit, we should support
> all of them. COM numbers aren't necessary assigned sequentially,
> so it's possible to have a higher numbered one on any systems.

It takes less space than before, but of course dynamic allocation would be the 
best to save space. The initialisation is to allow checking for valid ports.

> As for the naming, the class name is WIN_PORT, and the API
> prefix is also WIN_PORT*() so, while I don't like 'prt' in
> the filenames (reminds me of 'printer'), if we do some renaming,
> we should do it consistently. Probably WIN_COM*() would be
> better overall. Probably not a huge compatibility concern
> yet, so maybe we should do it now.

I suspect I am the only person to ever use it :), so I did it. I didn't change 
any #defines.

Regards
Alex
-------------- next part --------------
/*
 * $Id: win_com.c 12006 2009-08-09 14:37:15Z vszakats $
 */

/*
 * xHarbour Project source code:
 * Windows communications library
 *
 * Copyright 2005 Alex Strickland <sscc@mweb.co.za>
 * www - http://www.xharbour.org
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2, or (at your option)
 * any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this software; see the file COPYING.  If not, write to
 * the Free Software Foundation, Inc., 59 Temple Place, Suite 330,
 * Boston, MA 02111-1307 USA (or visit the web site http://www.gnu.org/).
 *
 * As a special exception, the Harbour Project gives permission for
 * additional uses of the text contained in its release of Harbour.
 *
 * The exception is that, if you link the Harbour libraries with other
 * files to produce an executable, this does not by itself cause the
 * resulting executable to be covered by the GNU General Public License.
 * Your use of that executable is in no way restricted on account of
 * linking the Harbour library code into it.
 *
 * This exception does not however invalidate any other reasons why
 * the executable file might be covered by the GNU General Public License.
 *
 * This exception applies only to the code released by the Harbour
 * Project under the name Harbour.  If you copy code from other
 * Harbour Project or Free Software Foundation releases into a copy of
 * Harbour, as the General Public License permits, the exception does
 * not apply to the code that you add in this way.  To avoid misleading
 * anyone as to the status o such modified files, you must delete
 * this exception notice from them.
 *
 * If you write modifications of your own for Harbour, it is your choice
 * whether to permit this exception to apply to your modifications.
 * If you do not wish that, delete this exception notice.
 *
 */

#define HB_OS_WIN_USED

#include "hbapi.h"
#include "hbapierr.h"
#include "hbwin.h"

static struct
{
   HANDLE       hPort;
   int          iFunction;
   DWORD        dwError;
} s_PortData[ 256 ];

HB_INITFUNC( WIN_COMINIT )
{
   int i;

   for ( i = 0; i < ( int ) HB_SIZEOFARRAY( s_PortData ); i++ )
      s_PortData[ i ].hPort = INVALID_HANDLE_VALUE;
}

HB_FUNC( WIN_COMOPEN )
{
   int iPort = hb_parni( 1 );

   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) )
   {
      DWORD dwBaudRate = ( DWORD ) hb_parnl( 2 );
      int iParity = hb_parni( 3 );
      int iByteSize = hb_parni( 4 );
      int iStopBits = hb_parni( 5 );

      char szName[ 11 ];
      TCHAR tszName[ 11 ];

      HANDLE hCommPort;
      DCB NewDCB;

      hb_snprintf( szName, sizeof( szName ), "\\\\.\\COM%d", iPort + 1 );
      HB_TCHAR_SETTO( tszName, szName, strlen( szName ) );

      s_PortData[ iPort ].hPort = INVALID_HANDLE_VALUE;
      s_PortData[ iPort ].iFunction = FCNCREATEFILE;
      s_PortData[ iPort ].dwError = 0;

      if( ( hCommPort = CreateFile( szName,
                                    GENERIC_READ | GENERIC_WRITE,
                                    0,
                                    NULL,
                                    OPEN_EXISTING,
                                    FILE_FLAG_NO_BUFFERING, NULL ) ) == INVALID_HANDLE_VALUE )
      {
         s_PortData[ iPort ].dwError = GetLastError();
         hb_retnl( -1 );
         return;
      }

      NewDCB.DCBlength = sizeof( DCB );
      if( ! GetCommState( hCommPort, &NewDCB ) )
      {
         s_PortData[ iPort ].dwError = GetLastError();
         CloseHandle( hCommPort );
         hb_retnl( -1 );
         return;
      }

      /* Initialised with NO flow control or control signals! */
      NewDCB.BaudRate = dwBaudRate;
      NewDCB.fBinary = 1;
      NewDCB.fParity = 0;
      NewDCB.fOutxCtsFlow = 0;
      NewDCB.fOutxDsrFlow = 0;
      NewDCB.fDtrControl = DTR_CONTROL_DISABLE;
      NewDCB.fDsrSensitivity = 0;
      NewDCB.fTXContinueOnXoff = 1;
      NewDCB.fOutX = 0;
      NewDCB.fInX = 0;
      NewDCB.fErrorChar = 1;
      NewDCB.fNull = 0;
      NewDCB.fRtsControl = RTS_CONTROL_DISABLE;
      NewDCB.fAbortOnError = 0;
    /*NewDCB.XonLim*/
    /*NewDCB.XoffLim*/
      NewDCB.ByteSize = ( BYTE ) iByteSize;
      NewDCB.Parity = ( BYTE ) iParity;
      NewDCB.StopBits = ( BYTE ) iStopBits;
    /*NewDCB.XonChar*/
    /*NewDCB.XoffChar*/
      NewDCB.ErrorChar = '?';
    /*NewDCB.EofChar*/
    /*NewDCB.EvtChar*/

      /* function reinitializes all hardware and control settings, but it does not empty output or input queues */
      s_PortData[ iPort ].iFunction = FCNSETCOMMSTATE;
      s_PortData[ iPort ].dwError = 0;
      if( ! SetCommState( hCommPort, &NewDCB ) )
      {
         s_PortData[ iPort ].dwError = GetLastError();
         CloseHandle( hCommPort );
         hb_retnl( -1 );
         return;
      }

      s_PortData[ iPort ].hPort = hCommPort;
      hb_retnl( hCommPort == INVALID_HANDLE_VALUE ? -1 : 0 );
   }
   else
      hb_retnl( -1 );
}

HB_FUNC( WIN_COMCLOSE )
{
   int iPort = hb_parni( 1 );
   HANDLE hCommPort;

   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) && (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
   {
      long lDrain = hb_parnl( 2 );

      if( lDrain > 0 )
         Sleep( lDrain * 1000 );

      s_PortData[ iPort ].hPort = INVALID_HANDLE_VALUE;

      s_PortData[ iPort ].iFunction = FCNCLOSEHANDLE;
      s_PortData[ iPort ].dwError = 0;

      hb_retl( CloseHandle( hCommPort ) != 0 );
      s_PortData[ iPort ].dwError = GetLastError();
   }
   else
      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( WIN_COMWRITE )
{
   int iPort = hb_parni( 1 );
   HANDLE hCommPort;

   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) && (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
   {
      const char * lpBuffer = hb_parcx( 2 );
      DWORD dwNumberofBytesToWrite = ( DWORD ) hb_parclen( 2 );
      DWORD dwNumberofBytesWritten;

      s_PortData[ iPort ].iFunction = FCNWRITEFILE;
      s_PortData[ iPort ].dwError = 0;
      if( WriteFile( hCommPort, lpBuffer, dwNumberofBytesToWrite, &dwNumberofBytesWritten, NULL ) )
         hb_retnl( dwNumberofBytesWritten );
      else
      {
         s_PortData[ iPort ].dwError = GetLastError();
         hb_retnl( -1 );
      }
   }
   else
      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( WIN_COMREAD )
{
   int iPort = hb_parni( 1 );
   HANDLE hCommPort;

   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) && (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
   {
      char * lpBuffer;
      DWORD dwNumberOfBytesToRead = ( DWORD ) hb_parclen( 2 );
      DWORD dwNumberOfBytesRead;

      lpBuffer = ( char * ) hb_xgrab( dwNumberOfBytesToRead + 1 );
      s_PortData[ iPort ].iFunction = FCNREADFILE;
      s_PortData[ iPort ].dwError = 0;
      if( ReadFile( hCommPort, lpBuffer, dwNumberOfBytesToRead, &dwNumberOfBytesRead, NULL ) )
      {
         if( ! hb_storclen_buffer( lpBuffer, dwNumberOfBytesRead, 2 ) )
            hb_xfree( lpBuffer );
         hb_retnl( dwNumberOfBytesRead );
      }
      else
      {
         hb_storc( NULL, 2 );
         hb_xfree( lpBuffer );
         s_PortData[ iPort ].dwError = GetLastError();
         hb_retnl( -1 );
      }
   }
   else
      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( WIN_COMRECV )
{
   int iPort = hb_parni( 1 );
   HANDLE hCommPort;

   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) && (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
   {
      char * lpBuffer;
      DWORD dwNumberOfBytesToRead = ( DWORD ) hb_parnl( 2 );
      DWORD dwNumberOfBytesRead;

      lpBuffer = ( char * ) hb_xgrab( dwNumberOfBytesToRead + 1 );
      s_PortData[ iPort ].iFunction = FCNREADFILE;
      s_PortData[ iPort ].dwError = 0;
      if( ReadFile( hCommPort, lpBuffer, dwNumberOfBytesToRead, &dwNumberOfBytesRead, NULL ) )
      {
         hb_retclen_buffer( lpBuffer, dwNumberOfBytesRead );
         hb_stornl( dwNumberOfBytesRead, 3 );
      }
      else
      {
         hb_retc_null();
         hb_xfree( lpBuffer );
         s_PortData[ iPort ].dwError = GetLastError();
         hb_stornl( -1, 3 );
      }
   }
   else
      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( WIN_COMSTATUS )
{
   int iPort = hb_parni( 1 );
   HANDLE hCommPort;

   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) && (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
   {
      DWORD dwModemStat = 0;

      s_PortData[ iPort ].iFunction = FCNGETCOMMMODEMSTATUS;
      s_PortData[ iPort ].dwError = 0;
      if( GetCommModemStatus( hCommPort, &dwModemStat ) )
      {
         hb_storl( ( dwModemStat & MS_CTS_ON )  != 0, 2 );     /* The CTS (clear-to-send) signal is on. */
         hb_storl( ( dwModemStat & MS_DSR_ON )  != 0, 3 );     /* The DSR (data-set-ready) signal is on. */
         hb_storl( ( dwModemStat & MS_RING_ON ) != 0, 4 );     /* The ring indicator signal is on. */
         hb_storl( ( dwModemStat & MS_RLSD_ON ) != 0, 5 );     /* The RLSD (receive-line-signal-detect) signal is on. Also is DCD. */

         hb_retl( TRUE );
      }
      else
      {
         s_PortData[ iPort ].dwError = GetLastError();

         hb_storl( FALSE, 2 );
         hb_storl( FALSE, 3 );
         hb_storl( FALSE, 4 );
         hb_storl( FALSE, 5 );

         hb_retl( FALSE );
      }
   }
   else
      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( WIN_COMPURGE )
{
   int iPort = hb_parni( 1 );
   HANDLE hCommPort;

   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) && (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
   {
      DWORD dwFlags;

      dwFlags = ( hb_parl( 2 ) ? PURGE_RXCLEAR : 0 ) | ( hb_parl( 3 ) ? PURGE_TXCLEAR : 0 );
      s_PortData[ iPort ].iFunction = FCNPURGECOMM;
      s_PortData[ iPort ].dwError = 0;
      if( PurgeComm( hCommPort, dwFlags ) )
         hb_retl( TRUE );
      else
      {
         s_PortData[ iPort ].dwError = GetLastError();
         hb_retl( FALSE );
      }
   }
   else
      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( WIN_COMQUEUESTATUS )
{
   int iPort = hb_parni( 1 );
   HANDLE hCommPort;

   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) && (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
   {
      DWORD dwErrors = 0;
      COMSTAT ComStat;

      s_PortData[ iPort ].iFunction = FCNCLEARCOMMERROR;
      s_PortData[ iPort ].dwError = 0;
      if( ClearCommError( hCommPort, &dwErrors, &ComStat ) )
      {
         hb_storl( ComStat.fCtsHold, 2 );
         hb_storl( ComStat.fDsrHold, 3 );
         hb_storl( ComStat.fRlsdHold, 4 );
         hb_storl( ComStat.fXoffHold, 5 );
         hb_storl( ComStat.fXoffSent, 6 );
         hb_stornl( ComStat.cbInQue, 7 );
         hb_stornl( ComStat.cbOutQue, 8 ); /* This value will be zero for a nonoverlapped write */

         hb_retl( TRUE );
      }
      else
      {
         s_PortData[ iPort ].dwError = GetLastError();

         hb_storl( FALSE, 2 );
         hb_storl( FALSE, 3 );
         hb_storl( FALSE, 4 );
         hb_storl( FALSE, 5 );
         hb_storl( FALSE, 6 );
         hb_stornl( 0, 7 );
         hb_stornl( 0, 8 );

         hb_retl( FALSE );
      }
   }
   else
      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

/* If handshaking is enabled, it is an error for the application to adjust the line by
   using the EscapeCommFunction function */

HB_FUNC( WIN_COMSETRTS )
{
   int iPort = hb_parni( 1 );
   HANDLE hCommPort;

   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) && (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
   {
      DWORD dwFunc = hb_parl( 2 ) ? SETRTS : CLRRTS;

      s_PortData[ iPort ].iFunction = ESCAPECOMMFUNCTION;
      s_PortData[ iPort ].dwError = 0;
      if( EscapeCommFunction( hCommPort, dwFunc ) )
         hb_retl( TRUE );
      else
      {
         s_PortData[ iPort ].dwError = GetLastError();
         hb_retl( FALSE );
      }
   }
   else
      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

/* If handshaking is enabled, it is an error for the application to adjust the line by
   using the EscapeCommFunction function */

HB_FUNC( WIN_COMSETDTR )
{
   int iPort = hb_parni( 1 );
   HANDLE hCommPort;

   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) && (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
   {
      DWORD dwFunc = hb_parl( 2 ) ? SETDTR : CLRDTR;

      s_PortData[ iPort ].iFunction = ESCAPECOMMFUNCTION;
      s_PortData[ iPort ].dwError = 0;
      if( EscapeCommFunction( hCommPort, dwFunc ) )
         hb_retl( TRUE );
      else
      {
         s_PortData[ iPort ].dwError = GetLastError();
         hb_retl( FALSE );
      }
   }
   else
      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( WIN_COMRTSFLOW )
{
   int iPort = hb_parni( 1 );
   HANDLE hCommPort;

   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) && (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
   {
      DCB CurDCB;
      int iRtsControl = hb_parni( 2 );

      s_PortData[ iPort ].iFunction = FCNGETCOMMSTATE;
      s_PortData[ iPort ].dwError = 0;
      CurDCB.DCBlength = sizeof( DCB );
      if( ! GetCommState( hCommPort, &CurDCB ) )
      {
         s_PortData[ iPort ].dwError = GetLastError();
         hb_retl( FALSE );
         return;
      }

      if( iRtsControl == RTS_CONTROL_DISABLE )
      {
         CurDCB.fOutxCtsFlow = 0;
         CurDCB.fRtsControl = RTS_CONTROL_DISABLE;
      }
      else if( iRtsControl == RTS_CONTROL_ENABLE )
      {
         CurDCB.fOutxCtsFlow = 1;
         CurDCB.fRtsControl = RTS_CONTROL_ENABLE;
      }
      else if( iRtsControl == RTS_CONTROL_HANDSHAKE )
      {
         CurDCB.fOutxCtsFlow = 1;
         CurDCB.fRtsControl = RTS_CONTROL_HANDSHAKE;
      }
      else    /* RTS_CONTROL_TOGGLE - RS485? */
      {
         hb_retl( FALSE );
         return;
      }

      s_PortData[ iPort ].iFunction = FCNSETCOMMSTATE;
      s_PortData[ iPort ].dwError = 0;
      if( ! SetCommState( hCommPort, &CurDCB ) )
      {
         s_PortData[ iPort ].dwError = GetLastError();
         hb_retl( FALSE );
      }
      else
         hb_retl( TRUE );
   }
   else
      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( WIN_COMDTRFLOW )
{
   int iPort = hb_parni( 1 );
   HANDLE hCommPort;

   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) && (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
   {
      DCB CurDCB;
      int DtrControl = hb_parni( 2 );

      s_PortData[ iPort ].iFunction = FCNGETCOMMSTATE;
      s_PortData[ iPort ].dwError = 0;
      CurDCB.DCBlength = sizeof( DCB );
      if( ! GetCommState( hCommPort, &CurDCB ) )
      {
         s_PortData[ iPort ].dwError = GetLastError();
         hb_retl( FALSE );
         return;
      }

      if( DtrControl == DTR_CONTROL_DISABLE )
      {
         CurDCB.fOutxDsrFlow = 0;
         CurDCB.fDtrControl = DTR_CONTROL_DISABLE;
      }
      else if( DtrControl == DTR_CONTROL_ENABLE )
      {
         CurDCB.fOutxDsrFlow = 1;
         CurDCB.fDtrControl = DTR_CONTROL_ENABLE;
      }
      else if( DtrControl == DTR_CONTROL_HANDSHAKE )
      {
         CurDCB.fOutxDsrFlow = 1;
         CurDCB.fDtrControl = DTR_CONTROL_HANDSHAKE;
      }
      else
      {
         hb_retl( FALSE );
         return;
      }

      s_PortData[ iPort ].iFunction = FCNSETCOMMSTATE;
      s_PortData[ iPort ].dwError = 0;
      if( ! SetCommState( hCommPort, &CurDCB ) )
      {
         s_PortData[ iPort ].dwError = GetLastError();
         hb_retl( FALSE );
      }
      else
         hb_retl( TRUE );
   }
   else
      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( WIN_COMXONXOFFFLOW )
{
   int iPort = hb_parni( 1 );
   HANDLE hCommPort;

   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) && ( hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
   {
      DCB CurDCB;

      s_PortData[ iPort ].iFunction = FCNGETCOMMSTATE;
      s_PortData[ iPort ].dwError = 0;
      CurDCB.DCBlength = sizeof( DCB );
      if( ! GetCommState( hCommPort, &CurDCB ) )
      {
         s_PortData[ iPort ].dwError = GetLastError();
         hb_retl( FALSE );
         return;
      }

      if( hb_parl( 2 ) )
      {
         CurDCB.fInX = 1;
         CurDCB.fOutX = 1;
      }
      else
      {
         CurDCB.fInX = 0;
         CurDCB.fOutX = 0;
      }

      s_PortData[ iPort ].iFunction = FCNSETCOMMSTATE;
      s_PortData[ iPort ].dwError = 0;
      if( ! SetCommState( hCommPort, &CurDCB ) )
      {
         s_PortData[ iPort ].dwError = GetLastError();
         hb_retl( FALSE );
      }
      else
         hb_retl( TRUE );
   }
   else
      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

int Win_ComSetTimeouts( HANDLE hCommPort, LPCOMMTIMEOUTS Timeouts, DWORD dwBaudRate, int iParity, int iByteSize, int iStopBits )
{
   COMMTIMEOUTS NewTimeouts;

	  /* Maximum time, in milliseconds, allowed to elapse between the arrival of two characters on
      the communications line. During a ReadFile operation, the time period begins when the first
      character is received. If the interval between the arrival of any two characters exceeds this
      amount, the ReadFile operation is completed and any buffered data is returned. A value of zero
      indicates that interval time-outs are not used. */

   /* A value of MAXDWORD, combined with zero values for both the ReadTotalTimeoutConstant and
      ReadTotalTimeoutMultiplier members, specifies that the read operation is to return
      immediately with the characters that have already been received, even if no characters
      have been received. */
   NewTimeouts.ReadIntervalTimeout = ( Timeouts->ReadIntervalTimeout == -1 ? MAXDWORD : Timeouts->ReadIntervalTimeout );

   /* Multiplier, in milliseconds, used to calculate the total time-out period for read operations.
      For each read operation, this value is multiplied by the requested number of bytes to be read. */
   NewTimeouts.ReadTotalTimeoutMultiplier = ( Timeouts->ReadTotalTimeoutMultiplier == -1 ? 0 : Timeouts->ReadTotalTimeoutMultiplier );

   /* Constant, in milliseconds, used to calculate the total time-out period for read operations.
      For each read operation, this value is added to the product of the ReadTotalTimeoutMultiplier
      member and the requested number of bytes. */
   NewTimeouts.ReadTotalTimeoutConstant = ( Timeouts->ReadTotalTimeoutConstant == -1 ? 0 : Timeouts->ReadTotalTimeoutConstant );

   /* A value of zero for both the ReadTotalTimeoutMultiplier and ReadTotalTimeoutConstant members
      indicates that total time-outs are not used for read operations ...
      and MAXDWORD, 0 and 0 are what we use by default */

   /* Multiplier, in milliseconds, used to calculate the total time-out period for write operations.
      For each write operation, this value is multiplied by the number of bytes to be written. */
   if( Timeouts->WriteTotalTimeoutMultiplier == -1 )
   {
       /* float of 1.0 makes whole expression float */
       NewTimeouts.WriteTotalTimeoutMultiplier = HB_MIN( 1, ( DWORD ) ( ( 1.0 / dwBaudRate ) *
           ( iByteSize + 1 + ( iParity == NOPARITY ? 0 : 1 ) + ( iStopBits == ONESTOPBIT ? 1 : iStopBits == ONE5STOPBITS ? 1.5 : 2 ) ) * 1000 ) );
   }
   /* Constant, in milliseconds, used to calculate the total time-out period for write operations.
      For each write operation, this value is added to the product of the WriteTotalTimeoutMultiplier member and the number of bytes to be written. */
   else
      NewTimeouts.WriteTotalTimeoutMultiplier = Timeouts->WriteTotalTimeoutMultiplier;

   /* 50 ms is a thumbsuck - seems long enough and not too long! */
   NewTimeouts.WriteTotalTimeoutConstant = Timeouts->WriteTotalTimeoutConstant == -1 ? 50 : Timeouts->WriteTotalTimeoutConstant;

   /* A value of zero for both the WriteTotalTimeoutMultiplier and WriteTotalTimeoutConstant members
      indicates that total time-outs are not used for write operations ...
      and if flow control is enabled the program will "hang" or if it is not enabled the data will
      be lost (potentially), so we set a minimum of 1ms (baud rates higher than 4800) */

   return SetCommTimeouts( hCommPort, &NewTimeouts );
}

HB_FUNC( WIN_COMSETTIMEOUTS )
{
   int iPort = hb_parni( 1 );
   HANDLE hCommPort;
   DCB CurDCB;
   COMMTIMEOUTS Timeouts;

   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) && ( hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
   {
      if( HB_ISNUM( 2 ) )
         Timeouts.ReadIntervalTimeout = hb_parnl( 2 );
      else
         Timeouts.ReadIntervalTimeout = -1;

      if( HB_ISNUM( 3 ) )
         Timeouts.ReadTotalTimeoutMultiplier = hb_parnl( 3 );
      else
         Timeouts.ReadTotalTimeoutMultiplier = -1;

      if( HB_ISNUM( 4 ) )
         Timeouts.ReadTotalTimeoutConstant = hb_parnl( 4 );
      else
         Timeouts.ReadTotalTimeoutConstant = -1;

      if( HB_ISNUM( 5 ) )
         Timeouts.WriteTotalTimeoutMultiplier = hb_parnl( 5 );
      else
         Timeouts.WriteTotalTimeoutMultiplier = -1;

      if( HB_ISNUM( 6 ) )
         Timeouts.WriteTotalTimeoutConstant = hb_parnl( 6 );
      else
         Timeouts.WriteTotalTimeoutConstant = -1;

	  s_PortData[ iPort ].iFunction = FCNGETCOMMSTATE;
      s_PortData[ iPort ].dwError = 0;

      CurDCB.DCBlength = sizeof( DCB );
      if( ! GetCommState( s_PortData[ iPort ].hPort, &CurDCB ) )
      {
         s_PortData[ iPort ].dwError = GetLastError();
         hb_retl( FALSE );
         return;
      }

      s_PortData[ iPort ].iFunction = FCNSETCOMMTIMEOUTS;
      s_PortData[ iPort ].dwError = 0;
      if( ! Win_ComSetTimeouts( s_PortData[ iPort ].hPort, &Timeouts, CurDCB.BaudRate, CurDCB.Parity, CurDCB.ByteSize, CurDCB.StopBits ) )
      {
         s_PortData[ iPort ].dwError = GetLastError();
         hb_retl( FALSE );
      }
      else
         hb_retl( TRUE );
   }
   else
      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( WIN_COMSETQUEUESIZE )
{
   int iPort = hb_parni( 1 );
   HANDLE hCommPort;

   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) && ( hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE && HB_ISNUM( 2 ) && HB_ISNUM( 3 ) )
   {
      s_PortData[ iPort ].iFunction = FCNSETUPCOMM;
      s_PortData[ iPort ].dwError = 0;
      if( ! SetupComm( s_PortData[ iPort ].hPort, hb_parni( 2 ), hb_parni( 3 ) ) )
      {
         s_PortData[ iPort ].dwError = GetLastError();
         hb_retl( FALSE );
      }
      else
         hb_retl( TRUE );
   }
   else
      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( WIN_COMERROR )
{
   int iPort = hb_parni( 1 );

   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) )
   {
      hb_retnl( s_PortData[ iPort ].dwError );
      s_PortData[ iPort ].dwError = 0; /* NOTE: reset */
   }
   else
      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( WIN_COMFUNCLAST )
{
   int iPort = hb_parni( 1 );

   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) )
      hb_retni( s_PortData[ iPort ].iFunction );
   else
      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}

HB_FUNC( WIN_COMDEBUGDCB )
{
   int iPort = hb_parni( 1 );
   HANDLE hCommPort;

   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) && ( hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
   {
      int iDebugLevel = HB_ISNUM( 2 ) ? hb_parni( 2 ) : WPDBGBASIC;
      DCB CurDCB;
      COMMTIMEOUTS CurCOMMTIMEOUTS;
      COMMPROP CurCOMMPROP;
      char szDebugString[ 1024 ] = "";
      char buffer[ 80 ];

      s_PortData[ iPort ].iFunction = FCNGETCOMMSTATE;
      s_PortData[ iPort ].dwError = 0;
      CurDCB.DCBlength = sizeof( DCB );
      if( GetCommState( hCommPort, &CurDCB ) )
      {
         if( iDebugLevel & WPDBGBASIC )
         {
            hb_snprintf( buffer, sizeof( buffer ), "Baud     : %lu\n", CurDCB.BaudRate ) ; hb_strncat( szDebugString, buffer, sizeof( szDebugString ) - 1 );
            hb_snprintf( buffer, sizeof( buffer ), "ByteSize : %i\n" , CurDCB.ByteSize ) ; hb_strncat( szDebugString, buffer, sizeof( szDebugString ) - 1 );
            hb_snprintf( buffer, sizeof( buffer ), "Parity   : %i\n" , CurDCB.Parity   ) ; hb_strncat( szDebugString, buffer, sizeof( szDebugString ) - 1 );
            hb_snprintf( buffer, sizeof( buffer ), "StopBits : %i\n" , CurDCB.StopBits ) ; hb_strncat( szDebugString, buffer, sizeof( szDebugString ) - 1 );
         }
         if( iDebugLevel & WPDBGFLOW )
         {
            hb_strncat( szDebugString, "fRtsControl : ", sizeof( szDebugString ) - 1 );
            hb_strncat( szDebugString, CurDCB.fRtsControl == RTS_CONTROL_DISABLE ? "RTS_CONTROL_DISABLE\n" :
                                       CurDCB.fRtsControl == RTS_CONTROL_ENABLE ? "RTS_CONTROL_ENABLE\n" :
                                       CurDCB.fRtsControl == RTS_CONTROL_HANDSHAKE ? "RTS_CONTROL_HANDSHAKE\n" : "RTS_CONTROL_TOGGLE\n", sizeof( szDebugString ) - 1 );
            hb_strncat( szDebugString, "fOutxCtsFlow : ", sizeof( szDebugString ) - 1 );
            hb_strncat( szDebugString, CurDCB.fOutxCtsFlow ? "true\n" : "false\n", sizeof( szDebugString ) - 1 );
            hb_strncat( szDebugString, "fOutX : ", sizeof( szDebugString ) - 1 );
            hb_strncat( szDebugString, CurDCB.fOutX ? "true\n" : "false\n", sizeof( szDebugString ) - 1 );
            hb_strncat( szDebugString, "fInX : ", sizeof( szDebugString ) - 1 );
            hb_strncat( szDebugString, CurDCB.fInX ? "true\n" : "false\n", sizeof( szDebugString ) - 1 );
            hb_strncat( szDebugString, "fDtrControl : ", sizeof( szDebugString ) - 1 );
            hb_strncat( szDebugString, CurDCB.fDtrControl == DTR_CONTROL_DISABLE ? "DTR_CONTROL_DISABLE\n" :
                                       CurDCB.fDtrControl == DTR_CONTROL_ENABLE ? "DTR_CONTROL_ENABLE\n" : "DTR_CONTROL_HANDSHAKE\n", sizeof( szDebugString ) - 1 );
            hb_strncat( szDebugString, "fOutxDsrFlow : ", sizeof( szDebugString ) - 1 );
            hb_strncat( szDebugString, CurDCB.fOutxDsrFlow ? "true\n" : "false\n", sizeof( szDebugString ) - 1 );
         }
         if( iDebugLevel & WPDBGXTRAFLOW )
         {
            hb_strncat( szDebugString, "fDsrSensitivity : ", sizeof( szDebugString ) - 1 );
            hb_strncat( szDebugString, CurDCB.fDsrSensitivity ? "true\n" : "false\n", sizeof( szDebugString ) - 1 );
            hb_strncat( szDebugString, "fTXContinueOnXoff : ", sizeof( szDebugString ) - 1 );
            hb_strncat( szDebugString, CurDCB.fTXContinueOnXoff ? "true\n" : "false\n", sizeof( szDebugString ) - 1 );
            hb_snprintf( buffer, sizeof( buffer ), "XonLim : %i\n"    , CurDCB.XonLim   ) ; hb_strncat( szDebugString, buffer, sizeof( szDebugString ) - 1 );
            hb_snprintf( buffer, sizeof( buffer ), "XoffLim : %i\n"   , CurDCB.XoffLim  ) ; hb_strncat( szDebugString, buffer, sizeof( szDebugString ) - 1 );
            hb_snprintf( buffer, sizeof( buffer ), "XonChar : 0x%i\n" , CurDCB.XonChar  ) ; hb_strncat( szDebugString, buffer, sizeof( szDebugString ) - 1 );
            hb_snprintf( buffer, sizeof( buffer ), "XoffChar : 0x%i\n", CurDCB.XoffChar ) ; hb_strncat( szDebugString, buffer, sizeof( szDebugString ) - 1 );
         }
         if( iDebugLevel & WPDBGOTHER )
         {
            hb_strncat(szDebugString, "fBinary : ", sizeof( szDebugString ) - 1 );
            hb_strncat(szDebugString, CurDCB.fBinary ? "true\n" : "false\n", sizeof( szDebugString ) - 1 );
            hb_strncat(szDebugString, "fParity : ", sizeof( szDebugString ) - 1 );
            hb_strncat(szDebugString, CurDCB.fParity ? "true\n" : "false\n", sizeof( szDebugString ) - 1 );
            hb_strncat(szDebugString, "fErrorChar : ", sizeof( szDebugString ) - 1 );
            hb_strncat(szDebugString, CurDCB.fErrorChar ? "true\n" : "false\n", sizeof( szDebugString ) - 1 );
            hb_strncat(szDebugString, "fNull : ", sizeof( szDebugString ) - 1 );
            hb_strncat(szDebugString, CurDCB.fNull ? "true\n" : "false\n", sizeof( szDebugString ) - 1 );
            hb_strncat(szDebugString, "fAbortOnError : ", sizeof( szDebugString ) - 1 );
            hb_strncat(szDebugString, CurDCB.fAbortOnError ? "true\n" : "false\n", sizeof( szDebugString ) - 1 );
            hb_snprintf( buffer, sizeof( buffer ), "ErrorChar : 0x%i\n", CurDCB.ErrorChar ) ; hb_strncat( szDebugString, buffer, sizeof( szDebugString ) - 1 );
            hb_snprintf( buffer, sizeof( buffer ), "EofChar : 0x%i\n"  , CurDCB.EofChar   ) ; hb_strncat( szDebugString, buffer, sizeof( szDebugString ) - 1 );
            hb_snprintf( buffer, sizeof( buffer ), "EvtChar : 0x%i\n"  , CurDCB.EvtChar   ) ; hb_strncat( szDebugString, buffer, sizeof( szDebugString ) - 1 );
         }
      }
      else
      {
         s_PortData[ iPort ].dwError = GetLastError();
         hb_retc_null();
         return;
      }

      if( iDebugLevel & WPDBGTIMEOUTS )
      {
         s_PortData[ iPort ].iFunction = FCNGETCOMMTIMEOUTS;
         s_PortData[ iPort ].dwError = 0;
         if( GetCommTimeouts( hCommPort, &CurCOMMTIMEOUTS ) )
         {
            hb_snprintf( buffer, sizeof( buffer ), "ReadIntervalTimeout : %lu\n"        , CurCOMMTIMEOUTS.ReadIntervalTimeout         ) ; hb_strncat( szDebugString, buffer, sizeof( szDebugString ) - 1 );
            hb_snprintf( buffer, sizeof( buffer ), "ReadTotalTimeoutMultiplier : %ld\n" , CurCOMMTIMEOUTS.ReadTotalTimeoutMultiplier  ) ; hb_strncat( szDebugString, buffer, sizeof( szDebugString ) - 1 );
            hb_snprintf( buffer, sizeof( buffer ), "ReadTotalTimeoutConstant : %ld\n"   , CurCOMMTIMEOUTS.ReadTotalTimeoutConstant    ) ; hb_strncat( szDebugString, buffer, sizeof( szDebugString ) - 1 );
            hb_snprintf( buffer, sizeof( buffer ), "WriteTotalTimeoutMultiplier : %ld\n", CurCOMMTIMEOUTS.WriteTotalTimeoutMultiplier ) ; hb_strncat( szDebugString, buffer, sizeof( szDebugString ) - 1 );
            hb_snprintf( buffer, sizeof( buffer ), "WriteTotalTimeoutConstant : %ld\n"  , CurCOMMTIMEOUTS.WriteTotalTimeoutConstant   ) ; hb_strncat( szDebugString, buffer, sizeof( szDebugString ) - 1 );
         }
         else
         {
            s_PortData[ iPort ].dwError = GetLastError();
            hb_retc_null();
            return;
         }
      }

      if( iDebugLevel & WPDBGQUEUE )
      {
         s_PortData[ iPort ].iFunction = FCNGETCOMMPROPERTIES;
         s_PortData[ iPort ].dwError = 0;
         if( GetCommProperties( hCommPort, &CurCOMMPROP ) )
         {
            hb_snprintf( buffer, sizeof( buffer ), "dwCurrentTxQueue : %lu\n", CurCOMMPROP.dwCurrentTxQueue ) ; hb_strncat( szDebugString, buffer, sizeof( szDebugString ) - 1 );
            hb_snprintf( buffer, sizeof( buffer ), "dwCurrentRxQueue : %lu\n", CurCOMMPROP.dwCurrentRxQueue ) ; hb_strncat( szDebugString, buffer, sizeof( szDebugString ) - 1 );
         }
         else
         {
            s_PortData[ iPort ].dwError = GetLastError();
            hb_retc_null();
            return;
         }
      }

      hb_retc( szDebugString );
   }
   else
      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME, HB_ERR_ARGS_BASEPARAMS );
}
-------------- next part --------------
/*
 * $Id: win_tcom.prg 12004 2009-08-09 10:54:06Z vszakats $
 */

/*
 * xHarbour Project source code:
 * Windows communications library
 *
 * Copyright 2005 Alex Strickland <sscc@mweb.co.za>
 * www - http://www.xharbour.org
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2, or (at your option)
 * any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this software; see the file COPYING.  If not, write to
 * the Free Software Foundation, Inc., 59 Temple Place, Suite 330,
 * Boston, MA 02111-1307 USA (or visit the web site http://www.gnu.org/).
 *
 * As a special exception, the Harbour Project gives permission for
 * additional uses of the text contained in its release of Harbour.
 *
 * The exception is that, if you link the Harbour libraries with other
 * files to produce an executable, this does not by itself cause the
 * resulting executable to be covered by the GNU General Public License.
 * Your use of that executable is in no way restricted on account of
 * linking the Harbour library code into it.
 *
 * This exception does not however invalidate any other reasons why
 * the executable file might be covered by the GNU General Public License.
 *
 * This exception applies only to the code released by the Harbour
 * Project under the name Harbour.  If you copy code from other
 * Harbour Project or Free Software Foundation releases into a copy of
 * Harbour, as the General Public License permits, the exception does
 * not apply to the code that you add in this way.  To avoid misleading
 * anyone as to the status o such modified files, you must delete
 * this exception notice from them.
 *
 * If you write modifications of your own for Harbour, it is your choice
 * whether to permit this exception to apply to your modifications.
 * If you do not wish that, delete this exception notice.
 *
 */

#include "hbclass.ch"
#include "common.ch"

#include "hbwin.ch"

/* The class is a VERY thin layer over the xHarbour functions and the xHarbour functions
   are a VERY thin layer over the Win functions, almost no parameter checking! You get what you
   pay for :)

   I haven't bothered to remember things that you can remember for yourself - the state of DTR (low
   to begin with) or the baud rate for example, you can always sub-class it.

   I've only done the things that I've found useful over the years, for example I never used the
   "BREAK" state of a line so I haven't done it here.

   The class needs the port to be already open to change timeouts and buffer sizes, it doesn't have to
   be that way, but it is.

   Really Windows comms should be done with threads and/or OVERLAPPED I/O - and I haven't. */

CREATE CLASS win_Com

   ACCESS Open()     INLINE ::lOpen
   ACCESS PortName() INLINE ::cPortName

   PROTECT nPort     INIT -1
   PROTECT lOpen     INIT .F.
   PROTECT cPortName INIT ""

   METHOD Init( cPortName, nBaudRate, nParity, nByteSize, nStopBits )
   METHOD QueueSize( nInQueue, nOutQueue )  INLINE win_ComSetQueueSize( ::nPort, nInQueue, nOutQueue )
   METHOD TimeOuts( nReadInterval, nReadMultiplier, nReadConstant, nWriteMultiplier, nWriteConstant ) ;
                                            INLINE win_ComSetTimeOuts( ::nPort, nReadInterval, nReadMultiplier, nReadConstant, nWriteMultiplier, nWriteConstant )
   METHOD Read( /* @ */ cString, nLength )
   METHOD Recv( nLength, nResult )          INLINE win_ComRecv( ::nPort, nLength, @nResult )
   METHOD RecvTo( cDelim, nMaxlen )
   METHOD Write( cString )                  INLINE win_ComWrite( ::nPort, cString )
   METHOD Status( lCTS, lDSR, lRing, lDCD ) INLINE win_ComStatus( ::nPort, @lCTS, @lDSR, @lRing, @lDCD )
   METHOD QueueStatus( lCTSHold, lDSRHold, lDCDHold, lXoffHold, lXoffSent, nInQueue, nOutQueue ) ;
                                            INLINE win_ComQueueStatus( ::nPort, @lCTSHold, @lDSRHold, @lDCDHold, @lXoffHold, @lXoffSent, @nInQueue, @nOutQueue )
   METHOD SetRTS( lCTS )                    INLINE win_ComSetRTS( ::nPort, lCTS ) /* boolean return is the status of the call not the line! */
   METHOD SetDTR( lDTR )                    INLINE win_ComSetDTR( ::nPort, lDTR ) /* boolean return is the status of the call not the line! */
   METHOD RTSFlow( nRTS )                   INLINE win_ComRTSFlow( ::nPort, nRTS )
   METHOD DTRFlow( nDTR )                   INLINE win_ComDTRFlow( ::nPort, nDTR )
   METHOD XonXoffFlow( lXonXoff )           INLINE win_ComXonXoffFlow( ::nPort, lXonXoff )
   METHOD Purge( lRXBuffer, lTXBuffer )     INLINE win_ComPurge( ::nPort, lRXBuffer, lTXBuffer )
   METHOD PurgeRX()                         INLINE win_ComPurge( ::nPort, .T., .F. )
   METHOD PurgeTX()                         INLINE win_ComPurge( ::nPort, .F., .T. )
   METHOD Close( nDrain )                   INLINE win_ComClose( ::nPort, iif( Empty( nDrain ), 0, nDrain ) )
   METHOD DebugDCB( nDebug )                INLINE win_ComDebugDCB( ::nPort, nDebug )
   METHOD ErrorText()

ENDCLASS


METHOD Init( cPortName, nBaudRate, nParity, nByteSize, nStopBits ) CLASS win_Com

   ::cPortName := Upper( cPortName )
   IF Left( ::cPortName, 3 ) == "COM"
      ::nPort := Val( SubStr( ::cPortName, 4 ) ) - 1
      IF win_ComOpen( ::nPort, nBaudRate, nParity, nByteSize, nStopBits ) != -1
         ::lOpen := .T.
      ENDIF
   ENDIF

   RETURN self

METHOD Read( /* @ */ cString, nLength ) CLASS win_Com

   cString := Space( nlength )

   RETURN win_ComRead( ::nPort, @cString )

METHOD RecvTo( cDelim, nMaxlen ) CLASS win_Com
   LOCAL nResult
   LOCAL cRecv := ""

   LOCAL cString

   DO WHILE .T.
      cString := Space( 1 )
      IF ( nResult := win_ComRead( ::nPort, @cString ) ) != -1
         IF nResult == 0
            EXIT
         ELSE
            cRecv += cString
            IF cDelim != NIL .AND. cString == cDelim
               EXIT
            ENDIF
            IF Len( cRecv ) == nMaxlen
               EXIT
            ENDIF
         ENDIF
      ELSE
         EXIT
      ENDIF
   ENDDO

   RETURN cRecv

/* Since the win_Com functions are an amalgamation of Win functions this allows
   you to see what call did the deed when things go wrong. */

METHOD ErrorText() CLASS win_Com
   LOCAL nFcn := win_ComFuncLast( ::nPort )
   LOCAL cString
   LOCAL nError
   LOCAL cMsg
   LOCAL aWinPortFcns := { ;
      "CreateFile", ;
      "GetCommState", ;
      "SetCommState", ;
      "SetupComm", ;
      "GetCommTimeouts", ;
      "SetCommTimeouts", ;
      "CloseHandle", ;
      "WriteFile", ;
      "ReadFile", ;
      "GetCommModemStatus", ;
      "PurgeComm", ;
      "ClearCommError", ;
      "EscapeCommFunction", ;
      "GetCommProperties" }

   IF nFcn >= 1 .AND. nFcn <= Len( aWinPortFcns )
      cString := aWinPortFcns[ nFcn ] + "(), "
   ELSE
      cString := "Function number (" + hb_ntos( nFcn ) + ") invalid, "
   ENDIF

   /* WinPortError clears the error - don't call it twice */
   cMsg := Space( 256 )
   wapi_FormatMessage( NIL, NIL, nError := win_ComError( ::nPort ), NIL, @cMsg )

   RETURN cString + "error (" + hb_ntos( nError ) + ") : " + cMsg
From mbelgrano at deltain.it  Wed Sep  9 10:56:46 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Sep  9 10:57:13 2009
Subject: [Harbour] dbRename() or equivalent
In-Reply-To: <93E3ECA7-F832-41F4-AF8A-04A1B63A0333@syenar.hu>
References: <93E3ECA7-F832-41F4-AF8A-04A1B63A0333@syenar.hu>
Message-ID: <609353e70909090756v3ad34799ud67b701f1e38cacc@mail.gmail.com>

I post a prev post of Przemek Maj be not reply to your question
This post be marked as GFD  Good for documentation
IF we reply with GFD all post good for documenting a function
the we can easy exstract

On Tue, 29 Apr 2008, Massimo Belgrano wrote:
> How is possible use ADSCHECKEXISTENCE function from ads?
> Is correct think that function like ADSCHECKEXISTENCE (ads) or sr_file
> (sqlrdd) must be replaceable via rdd?
> ADSCHECKEXISTENCE
> Probably also letodb need a function for check for existence of a file
> by server side

We already have such functionality:
  dbExists( <cTable>, [<cIndex>], [<ulConnction>] ) -> <lExists>

It checks if table or index to given table exists.
F.e.:
  dbExists( "test" )
returns true if table "test" exists. It's not necessary to add
file name extension. It will be done automatically by RDD.
And
  dbExists( "test", "fisrt" )
checks if table "test" has index "first". Some RDDs like DBF*
may ignore table name during index checking.

We have also
  dbDrop( <cTable>, [<cIndex>], [<ulConnction>] ) -> <lRemoved>
which can remove table with all related files (indexs and memos)
f.e.:
  dbDrop( "test" )
or only given index, f.e.
  dbDrop( "test", "fisrt" )

AFAIK SQLRDD does not support them at all. In ADS they are supported
but only using standard file API and it should be fixed to use ACE
functions. Though I do not know if it can be implemented using documented
ACE API.




2009/9/9 Viktor Szak?ts <harbour.01@syenar.hu>:
> Hi All,
>
> What is the proper way to rename a table so that it
> also works on remote server?
>
> We have dbExists(), dbDrop(), we this bit seems to be
> missing. Or I'm missing some method which can be used
> to get the same effect.
>
> Remote rename is used when modifying structure of
> existing tables, manually implemented (somewhat more
> intelligent/efficient) packing and a few other scenarios.
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From harbour.01 at syenar.hu  Wed Sep  9 11:02:32 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 11:02:43 2009
Subject: [Harbour] End of building message
In-Reply-To: <9257026e0909090711u25fc6f8qb3ffbe7a14aec9a2@mail.gmail.com>
References: <9257026e0909090711u25fc6f8qb3ffbe7a14aec9a2@mail.gmail.com>
Message-ID: <5FFE9E4C-1D75-4147-BD4B-B176E7BDB921@syenar.hu>

Good idea. Though, I have no good idea how to implement this
or if it's possible to implement at all.

The closest idea is some top level rule which does nothing
else but shows this message.

[ simply adding an $(info) line to end of a Makefile (or
all Makefiles) isn't working for multiple reasons. ]

Brgds,
Viktor

On 2009.09.09., at 16:11, Lorenzo Fiorini wrote:

> Since the make start with messages it would be nice to have an 'End of
> building' message.
>
> ! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
> ...
> ! 'gtwin' library skipped
> ! 'gtwvt' library skipped
> ...
> ! End of building
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Sep  9 11:06:18 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 11:06:28 2009
Subject: [Harbour] dbRename() or equivalent
In-Reply-To: <609353e70909090756v3ad34799ud67b701f1e38cacc@mail.gmail.com>
References: <93E3ECA7-F832-41F4-AF8A-04A1B63A0333@syenar.hu>
	<609353e70909090756v3ad34799ud67b701f1e38cacc@mail.gmail.com>
Message-ID: <E3C1F614-88C9-4EA5-9E29-ED5E419B561D@syenar.hu>

> I post a prev post of Przemek Maj be not reply to your question
> This post be marked as GFD  Good for documentation
> IF we reply with GFD all post good for documenting a function
> the we can easy exstract

You probably misunderstood me. I'm aware of these functions.

What I need is RENAME. (analogous to FRename())

Brgds,
Viktor

> On Tue, 29 Apr 2008, Massimo Belgrano wrote:
>> How is possible use ADSCHECKEXISTENCE function from ads?
>> Is correct think that function like ADSCHECKEXISTENCE (ads) or  
>> sr_file
>> (sqlrdd) must be replaceable via rdd?
>> ADSCHECKEXISTENCE
>> Probably also letodb need a function for check for existence of a  
>> file
>> by server side
>
> We already have such functionality:
>  dbExists( <cTable>, [<cIndex>], [<ulConnction>] ) -> <lExists>
>
> It checks if table or index to given table exists.
> F.e.:
>  dbExists( "test" )
> returns true if table "test" exists. It's not necessary to add
> file name extension. It will be done automatically by RDD.
> And
>  dbExists( "test", "fisrt" )
> checks if table "test" has index "first". Some RDDs like DBF*
> may ignore table name during index checking.
>
> We have also
>  dbDrop( <cTable>, [<cIndex>], [<ulConnction>] ) -> <lRemoved>
> which can remove table with all related files (indexs and memos)
> f.e.:
>  dbDrop( "test" )
> or only given index, f.e.
>  dbDrop( "test", "fisrt" )
>
> AFAIK SQLRDD does not support them at all. In ADS they are supported
> but only using standard file API and it should be fixed to use ACE
> functions. Though I do not know if it can be implemented using  
> documented
> ACE API.
>
>
>
>
> 2009/9/9 Viktor Szak?ts <harbour.01@syenar.hu>:
>> Hi All,
>>
>> What is the proper way to rename a table so that it
>> also works on remote server?
>>
>> We have dbExists(), dbDrop(), we this bit seems to be
>> missing. Or I'm missing some method which can be used
>> to get the same effect.
>>
>> Remote rename is used when modifying structure of
>> existing tables, manually implemented (somewhat more
>> intelligent/efficient) packing and a few other scenarios.
>>
>> Brgds,
>> Viktor
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
>
>
> -- 
> Massimo Belgrano
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From leonardo at sygecom.com.br  Wed Sep  9 11:12:43 2009
From: leonardo at sygecom.com.br (sygecom)
Date: Wed Sep  9 11:12:47 2009
Subject: [Harbour] There is a function FileValid() in the Harbour?
Message-ID: <25367075.post@talk.nabble.com>


Hello to All,

I wonder if there is a function: FileValid () in the Harbour?

Below is an example of function in xHarbour:

PROCEDURE Main

      ? FileValid( "MyApp.prg" )                   // result: .T.

      ? FileValid( "My New Application.prg" )      // result: .F.

      ? LongFileValid( "My New Application.prg" )  // result: .T.

   RETURN

   FUNCTION LongFileValid( cFileName, lExtension )

      IF Valtype( lExtension ) <> "L"
         lExtension := .F.
      ENDIF

   RETURN FileValid( cFileName, 255, 255, lExtension, .T. )

-- 
View this message in context: http://www.nabble.com/There-is-a-function-FileValid%28%29-in-the-Harbour--tp25367075p25367075.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Wed Sep  9 11:20:43 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Sep  9 11:21:11 2009
Subject: [Harbour] dbRename() or equivalent
In-Reply-To: <E3C1F614-88C9-4EA5-9E29-ED5E419B561D@syenar.hu>
References: <93E3ECA7-F832-41F4-AF8A-04A1B63A0333@syenar.hu> 
	<609353e70909090756v3ad34799ud67b701f1e38cacc@mail.gmail.com> 
	<E3C1F614-88C9-4EA5-9E29-ED5E419B561D@syenar.hu>
Message-ID: <609353e70909090820j30f497e0lf9b30455c5eb969f@mail.gmail.com>

Sorry i typicall use file exist and rename in sequence so merge
concept9/9 Viktor Szak?ts <harbour.01@syenar.hu>:
>> I post a prev post of Przemek Maj be not reply to your question
>> This post be marked as GFD ?Good for documentation
>> IF we reply with GFD all post good for documenting a function
>> the we can easy exstract
>
> You probably misunderstood me. I'm aware of these functions.
>
> What I need is RENAME. (analogous to FRename())
>
> Brgds,
> Viktor
>
>> On Tue, 29 Apr 2008, Massimo Belgrano wrote:
>>>
>>> How is possible use ADSCHECKEXISTENCE function from ads?
>>> Is correct think that function like ADSCHECKEXISTENCE (ads) or sr_file
>>> (sqlrdd) must be replaceable via rdd?
>>> ADSCHECKEXISTENCE
>>> Probably also letodb need a function for check for existence of a file
>>> by server side
>>
>> We already have such functionality:
>> ?dbExists( <cTable>, [<cIndex>], [<ulConnction>] ) -> <lExists>
>>
>> It checks if table or index to given table exists.
>> F.e.:
>> ?dbExists( "test" )
>> returns true if table "test" exists. It's not necessary to add
>> file name extension. It will be done automatically by RDD.
>> And
>> ?dbExists( "test", "fisrt" )
>> checks if table "test" has index "first". Some RDDs like DBF*
>> may ignore table name during index checking.
>>
>> We have also
>> ?dbDrop( <cTable>, [<cIndex>], [<ulConnction>] ) -> <lRemoved>
>> which can remove table with all related files (indexs and memos)
>> f.e.:
>> ?dbDrop( "test" )
>> or only given index, f.e.
>> ?dbDrop( "test", "fisrt" )
>>
>> AFAIK SQLRDD does not support them at all. In ADS they are supported
>> but only using standard file API and it should be fixed to use ACE
>> functions. Though I do not know if it can be implemented using documented
>> ACE API.
>>
>>
>>
>>
>> 2009/9/9 Viktor Szak?ts <harbour.01@syenar.hu>:
>>>
>>> Hi All,
>>>
>>> What is the proper way to rename a table so that it
>>> also works on remote server?
>>>
>>> We have dbExists(), dbDrop(), we this bit seems to be
>>> missing. Or I'm missing some method which can be used
>>> to get the same effect.
>>>
>>> Remote rename is used when modifying structure of
>>> existing tables, manually implemented (somewhat more
>>> intelligent/efficient) packing and a few other scenarios.
>>>
>>> Brgds,
>>> Viktor
>>>
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>>
>>
>>
>>
>> --
>> Massimo Belgrano
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From harbour.01 at syenar.hu  Wed Sep  9 11:25:18 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 11:25:29 2009
Subject: [Harbour] There is a function FileValid() in the Harbour?
In-Reply-To: <25367075.post@talk.nabble.com>
References: <25367075.post@talk.nabble.com>
Message-ID: <DC7AA81F-2891-49C0-B116-49EC0629A9BC@syenar.hu>

Yes, in hbct lib.

[ xhb decided to mix in all ct functions to core, so they
appear as "xhb" functions which they are not. ]

Brgds,
Viktor

On 2009.09.09., at 17:12, sygecom wrote:

>
> Hello to All,
>
> I wonder if there is a function: FileValid () in the Harbour?
>
> Below is an example of function in xHarbour:
>
> PROCEDURE Main
>
>      ? FileValid( "MyApp.prg" )                   // result: .T.
>
>      ? FileValid( "My New Application.prg" )      // result: .F.
>
>      ? LongFileValid( "My New Application.prg" )  // result: .T.
>
>   RETURN
>
>   FUNCTION LongFileValid( cFileName, lExtension )
>
>      IF Valtype( lExtension ) <> "L"
>         lExtension := .F.
>      ENDIF
>
>   RETURN FileValid( cFileName, 255, 255, lExtension, .T. )
>
> -- 
> View this message in context: http://www.nabble.com/There-is-a-function-FileValid%28%29-in-the-Harbour--tp25367075p25367075.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Wed Sep  9 11:33:23 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Sep  9 11:33:51 2009
Subject: [Harbour] Harbour 2.0.0beta3 (unofficial) available now
In-Reply-To: <18d502870909061011n328e50afhbe802e356bbf2642@mail.gmail.com>
References: <18d502870909061011n328e50afhbe802e356bbf2642@mail.gmail.com>
Message-ID: <609353e70909090833y15c4a9a6k8949343245a06a50@mail.gmail.com>

C:\hb20\bin>hbmk2 ..\tests\hello.prg -compiler=mingw64
hbmk2: Processing configuration: C:\hb20\bin\hbmk.cfg
Harbour 2.0.0beta3 (Rev. 12422)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling '../tests/hello.prg'...
Lines 11, Functions/Procedures 1
Generating C source output to 'hello.c'... Done.
hello.o:hello.c:(.text+0xf): undefined reference to `hb_vmExecute'
hello.o:hello.c:(.text+0x2c): undefined reference to `hb_vmProcessSymbols'
hello.o:hello.c:(.data+0x38): undefined reference to `HB_FUN_QOUT'
c:/mingw/bin/../lib/gcc/mingw32/4.3.3/../../../libmingw32.a(main.o):main.c:(.tex
t+0x104): undefined reference to `WinMain@16'
collect2: ld returned 1 exit status
hbmk2: Error: Running linker. 1
gcc.exe hello.o    -mconsole -Wl,--start-group -lhbextern -lhbdebug -lhbvm -lhbr
tl -lhblang -lhbcpage -lgtcgi -lgtpca -lgtstd -lgtwin -lgtwvt -lgtgui -lhbrdd -l
hbuddall -lhbusrrdd -lrddntx -lrddcdx -lrddnsx -lrddfpt -lhbrdd -lhbhsx -lhbsix
-lhbmacro -lhbcplr -lhbpp -lhbcommon -lhbpcre -lhbzlib -lkernel32 -luser32 -lgdi
32 -ladvapi32 -lws2_32 -lwinspool -lcomctl32 -lcomdlg32 -lshell32 -luuid -lole32
 -loleaut32 -lmpr -lwinmm -lmapi32 -limm32 -lmsimg32 -lwininet  -Wl,--end-group
-ohello.exe -LC:/hb20/lib/win/mingw64


MinGW w64 4.5.0 installed c:\devl\mingw64 and added to  path

What i miss?


2009/9/6 Viktor Szak?ts <harbour.01@syenar.hu>:
> Hi All,
>
> Harbour 2.0.0beta3 (r12422) source archives and Windows binary
> releases are available for download here:
> ? http://syenar.hu/harbour/
>
> Make sure to check INSTALL doc "QUICK START" section and visit
> our user forums at:
> ? http://sourceforge.net/apps/phpbb/harbour-project/
>
> Release notes:
> -----------------------------------------------------------------------
> Unified Windows release for most supported compilers and
> x86, x64, WinCE/ARM, MS-DOS, OS/2, Linux target platforms.
>
> Installed size: 232MB (46MB - 340MB)
>
> The default installation will install MinGW compiler + x86 static and
> shared libs, MSVC and BCC x86 libs and examples.
>
> Options: x86 shared tools, x64 shared tools, MinGW x64 and
> WinCE-ARM libs, MSVC x64 libs, Open Watcom x86 libs,
> shared x64/WinCE-ARM libs, MS-DOS 32-bit DJGPP libs,
> OS/2 (watcom) libs, Linux (watcom) libs.
>
> Usage:
> 1) install/unpack to any directory (C:\hb20)
> 2) go to bin dir (optional if you specify path for hbmk2)
> 3) For x86 executable, type: 'hbmk2 ../tests/hello.prg'
> 4) For x64 executable, type: 'hbmk2 ../tests/hello.prg -compiler=mingw64'
> ? [needs mingw64 to be installed beforehand]
> 5) For WinCE/ARM executable, type: 'hbmk2 ../tests/hello.prg -platform=wce'
> ? [needs cegcc to be installed beforehand]
> 6) For MS-DOS executable, type: 'hbmk2 ../tests/hello.prg -platform=dos'
> ? [needs DJGPP to be installed beforehand]
> 7) For Linux executable, type: 'hbmk2 ../tests/hello.prg -platform=linux'
> ? [needs OpenWatcom to be installed beforehand]
>
> Tool/lib versions used to create this package:
> -----------------------------------------------------------------------
>
> ? Compiler tools
> ? --------------
>
> ? MinGW 4.4.1 (included)
> ? MinGW w64 4.5.0
> ? MinGW CEGCC 4.1.0
> ? DJGPP 4.4.1 (2.04b1)
> ? MSVC 2008 SP1
> ? Open Watcom C++ 1.8
> ? Borland C++ 5.5.1
>
> ? External lib dependencies
> ? -------------------------
>
> ? ACE 9.10
> ? Allegro 4.2.2
> ? Blat 2.6.2
> ? libcurl 7.19.6
> ? Firebird 2.1.2
> ? FreeImage 3.12.0
> ? GD 2.0.35
> ? MySQL 5.1.35
> ? OpenSSL 0.9.8k
> ? PostgreSQL 8.3.7
> ? QT 4.5.2
> ? WATTCG 2.2.10
>
> Changes since previous (2.0.0beta2 20090624) release:
> -----------------------------------------------------------------------
>
> - Harbour updated to r12422 (from r11508)
> - Rewritten socket library.
> - Fixed remaining Clipper compatibility issues (@.clp, SET PROC TO, DO
> WITH, etc)
> - Added replaceable core file I/O layer.
> - Reworked build system with integrated dynlib creation, cross-platform
> ?support, compiler and external component autodetection and much more.
> - MinGW updated to 4.4.1
> - MinGW x64 updated to 4.5.0 (20090905)
> - Finalizing ActiveX/OLE2 support.
> - Timestamp/datetime support in core.
> - Added MT support for dos platform.
> - Added socket support for dos platform (via WATTCP lib).
> - Added hbnetio lib client/server file I/O implementation.
> - hbxbp lib about feature complete.
> - wce/msvcarm target improvements, sunpro compiler support.
> - hbssl OpenSSL wrapper lib.
> - SSL support in hbtip lib.
> - Serial communication fixes in hbwin/hbtpathy on win platform.
> - Lots of other additions and some fixes.
> - Changed default install path to be 'hb20' rather than 'harbour20',
> ?to avoid long filenames.
> - Replaced mingw64 built x64 shared tools with msvc64 builds, as
> ?the former didn't work.
> - Included hbqt lib which links against static QT libs.
>
> Changes since previous (2.0.0beta1 20090609) release:
> -----------------------------------------------------------------------
> - Harbour updated to r11508 (from r11287)
> - New User's Forum linked
> - upx compressor included in install package
> - DOS cross build libs included in install package
> - preparation to host 3rd party packages inside Harbour directory tree
> - new "zero-conf" library install system in preparation
> - hbmk2: lots of minor refinements, support for all free compilers
> ?in embedded form, support spaces in filenames/paths, all Harbour
> ?supported C compilers have now complete support in hbmk2
> - DOS support tested and required fixes applied
> - embedded compilers moved to 'comp' subdir
> - support for latest MinGW x64 and MSVS 2010 compilers
> - extended INSTALL with new examples and app build quick guide
> - icon for installer and hbrun tool
> - hbxbp and hbqt enhancements
> - hbwin refinements and better compatibility
> - new uhttpd2 sessioned HTTP server
> - C++ build support for all compilers, new HB_WAEVAL() function,
> ?new xpp (Xbase++ compatibility) lib, .hrb loading enhancements
> - DBU, RL, SuperLib fixes.
> - MinGW64 updated to 4.4.1
> - There were a few changes in this release which may require updating
> ?your source code (hb_par*()/hb_stor*() in .c files and GTWVG WIN_*()
> ?function in .prg files). Search for 'incompatible' word in ChangeLog
> ?for more.
> -----------------------------------------------------------------------
>
> Changes since previous (1.1.0dev 20090602) release:
> -----------------------------------------------------------------------
> - Harbour updated to r11287 (from r11179)
> - all contrib tests included in install package
> - All 3rd party packages upgraded to latest version.
> - hbmk2: project support, new file extensions, fixes, Harbour 1.0.x
> ?support.
> - further simplified/updated build process and instructions
> - hbqt many enhancements
> - almost full xhb compatibility
> - 'terminal' fixed in examples
> - source formatter, Cl*pper RL tool, legacy hbmake added
> - MT Xbase++ compatibility
> -----------------------------------------------------------------------
>
> Changes since previous (1.1.0dev 20090408) release:
> -----------------------------------------------------------------------
> - Harbour updated to r11179 (from r10819)
> - Updated hbmk2 (filter issues + experimental Harbour 1.0.x support)
> - Included contrib tests/utils
> - Full and now standalone 'examples'
> - 'tests' with subdirs included.
> - No longer included pocc/pocc64/poccarm libs.
> - QT updated to 4.5.1
> - MinGW updated to 4.4.0
>
> --
> Brgds,
> Viktor Szakats
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Analisi e sviluppo software per Lan e Web - Consulenza informatica - Formazione
Delta Informatica S.r.l. http://www.deltain.it/   +39 0321 455962
From leonardo at sygecom.com.br  Wed Sep  9 11:36:56 2009
From: leonardo at sygecom.com.br (sygecom)
Date: Wed Sep  9 11:37:02 2009
Subject: [Harbour] There is a function FileValid() in the Harbour?
In-Reply-To: <DC7AA81F-2891-49C0-B116-49EC0629A9BC@syenar.hu>
References: <25367075.post@talk.nabble.com>
	<DC7AA81F-2891-49C0-B116-49EC0629A9BC@syenar.hu>
Message-ID: <25367601.post@talk.nabble.com>



Hello Viktor,
I'm linking to hbct and still is giving error that does not think this
function.
Below the error:
SISTEMA.obj : error LNK2001: s?mbolo externo _HB_FUN_FILEVALID sin resolver
SISTEMA.exe : fatal error LNK1120: 1 externos sin resolver

Leonardo Machado


Viktor Szak?ts wrote:
> 
> Yes, in hbct lib.
> 
> [ xhb decided to mix in all ct functions to core, so they
> appear as "xhb" functions which they are not. ]
> 
> Brgds,
> Viktor
> 
> On 2009.09.09., at 17:12, sygecom wrote:
> 
>>
>> Hello to All,
>>
>> I wonder if there is a function: FileValid () in the Harbour?
>>
>> Below is an example of function in xHarbour:
>>
>> PROCEDURE Main
>>
>>      ? FileValid( "MyApp.prg" )                   // result: .T.
>>
>>      ? FileValid( "My New Application.prg" )      // result: .F.
>>
>>      ? LongFileValid( "My New Application.prg" )  // result: .T.
>>
>>   RETURN
>>
>>   FUNCTION LongFileValid( cFileName, lExtension )
>>
>>      IF Valtype( lExtension ) <> "L"
>>         lExtension := .F.
>>      ENDIF
>>
>>   RETURN FileValid( cFileName, 255, 255, lExtension, .T. )
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/There-is-a-function-FileValid%28%29-in-the-Harbour--tp25367075p25367075.html
>> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/There-is-a-function-FileValid%28%29-in-the-Harbour--tp25367075p25367601.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Wed Sep  9 11:50:02 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 11:50:16 2009
Subject: [Harbour] Harbour 2.0.0beta3 (unofficial) available now
In-Reply-To: <609353e70909090833y15c4a9a6k8949343245a06a50@mail.gmail.com>
References: <18d502870909061011n328e50afhbe802e356bbf2642@mail.gmail.com>
	<609353e70909090833y15c4a9a6k8949343245a06a50@mail.gmail.com>
Message-ID: <407A1579-3922-474B-BF30-D88F9B1CBF61@syenar.hu>

> C:\hb20\bin>hbmk2 ..\tests\hello.prg -compiler=mingw64
> hbmk2: Processing configuration: C:\hb20\bin\hbmk.cfg
> Harbour 2.0.0beta3 (Rev. 12422)
> Copyright (c) 1999-2009, http://www.harbour-project.org/
> Compiling '../tests/hello.prg'...
> Lines 11, Functions/Procedures 1
> Generating C source output to 'hello.c'... Done.
> hello.o:hello.c:(.text+0xf): undefined reference to `hb_vmExecute'
> hello.o:hello.c:(.text+0x2c): undefined reference to  
> `hb_vmProcessSymbols'
> hello.o:hello.c:(.data+0x38): undefined reference to `HB_FUN_QOUT'
> c:/mingw/bin/../lib/gcc/mingw32/4.3.3/../../../libmingw32.a 
> (main.o):main.c:(.tex
> t+0x104): undefined reference to `WinMain@16'
> collect2: ld returned 1 exit status
> hbmk2: Error: Running linker. 1
> gcc.exe hello.o    -mconsole -Wl,--start-group -lhbextern -lhbdebug - 
> lhbvm -lhbr
> tl -lhblang -lhbcpage -lgtcgi -lgtpca -lgtstd -lgtwin -lgtwvt - 
> lgtgui -lhbrdd -l
> hbuddall -lhbusrrdd -lrddntx -lrddcdx -lrddnsx -lrddfpt -lhbrdd - 
> lhbhsx -lhbsix
> -lhbmacro -lhbcplr -lhbpp -lhbcommon -lhbpcre -lhbzlib -lkernel32 - 
> luser32 -lgdi
> 32 -ladvapi32 -lws2_32 -lwinspool -lcomctl32 -lcomdlg32 -lshell32 - 
> luuid -lole32
> -loleaut32 -lmpr -lwinmm -lmapi32 -limm32 -lmsimg32 -lwininet  -Wl,-- 
> end-group
> -ohello.exe -LC:/hb20/lib/win/mingw64
>
> MinGW w64 4.5.0 installed c:\devl\mingw64 and added to  path
>
> What i miss?

In this case you should drop -compiler option. It's autodetected.

You should use -compiler option if you install mingw64 into comp/ 
mingw64.

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep  9 11:53:00 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 11:53:08 2009
Subject: [Harbour] There is a function FileValid() in the Harbour?
In-Reply-To: <25367601.post@talk.nabble.com>
References: <25367075.post@talk.nabble.com>
	<DC7AA81F-2891-49C0-B116-49EC0629A9BC@syenar.hu>
	<25367601.post@talk.nabble.com>
Message-ID: <F0134482-3C96-4716-8EF9-BC3920A02721@syenar.hu>

That's because hbct seems to miss this ct function, but xhb has it.

Hopefully someone will copy these to Harbour, until then you can do
it locally.

Brgds,
Viktor

On 2009.09.09., at 17:36, sygecom wrote:

>
>
> Hello Viktor,
> I'm linking to hbct and still is giving error that does not think this
> function.
> Below the error:
> SISTEMA.obj : error LNK2001: s?mbolo externo _HB_FUN_FILEVALID sin  
> resolver
> SISTEMA.exe : fatal error LNK1120: 1 externos sin resolver
>
> Leonardo Machado
>
>
> Viktor Szak?ts wrote:
>>
>> Yes, in hbct lib.
>>
>> [ xhb decided to mix in all ct functions to core, so they
>> appear as "xhb" functions which they are not. ]
>>
>> Brgds,
>> Viktor
>>
>> On 2009.09.09., at 17:12, sygecom wrote:
>>
>>>
>>> Hello to All,
>>>
>>> I wonder if there is a function: FileValid () in the Harbour?
>>>
>>> Below is an example of function in xHarbour:
>>>
>>> PROCEDURE Main
>>>
>>>     ? FileValid( "MyApp.prg" )                   // result: .T.
>>>
>>>     ? FileValid( "My New Application.prg" )      // result: .F.
>>>
>>>     ? LongFileValid( "My New Application.prg" )  // result: .T.
>>>
>>>  RETURN
>>>
>>>  FUNCTION LongFileValid( cFileName, lExtension )
>>>
>>>     IF Valtype( lExtension ) <> "L"
>>>        lExtension := .F.
>>>     ENDIF
>>>
>>>  RETURN FileValid( cFileName, 255, 255, lExtension, .T. )
>>>
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/There-is-a-function-FileValid%28%29-in-the-Harbour--tp25367075p25367075.html
>>> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>>>
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/There-is-a-function-FileValid%28%29-in-the-Harbour--tp25367075p25367601.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From leonardo at sygecom.com.br  Wed Sep  9 12:01:40 2009
From: leonardo at sygecom.com.br (sygecom)
Date: Wed Sep  9 12:01:46 2009
Subject: [Harbour] There is a function FileValid() in the Harbour?
In-Reply-To: <F0134482-3C96-4716-8EF9-BC3920A02721@syenar.hu>
References: <25367075.post@talk.nabble.com>
	<DC7AA81F-2891-49C0-B116-49EC0629A9BC@syenar.hu>
	<25367601.post@talk.nabble.com>
	<F0134482-3C96-4716-8EF9-BC3920A02721@syenar.hu>
Message-ID: <25368069.post@talk.nabble.com>


Thanks, I will look for it then. Thank you.


Viktor Szak?ts wrote:
> 
> That's because hbct seems to miss this ct function, but xhb has it.
> 
> Hopefully someone will copy these to Harbour, until then you can do
> it locally.
> 
> Brgds,
> Viktor
> 
> On 2009.09.09., at 17:36, sygecom wrote:
> 
>>
>>
>> Hello Viktor,
>> I'm linking to hbct and still is giving error that does not think this
>> function.
>> Below the error:
>> SISTEMA.obj : error LNK2001: s?mbolo externo _HB_FUN_FILEVALID sin  
>> resolver
>> SISTEMA.exe : fatal error LNK1120: 1 externos sin resolver
>>
>> Leonardo Machado
>>
>>
>> Viktor Szak?ts wrote:
>>>
>>> Yes, in hbct lib.
>>>
>>> [ xhb decided to mix in all ct functions to core, so they
>>> appear as "xhb" functions which they are not. ]
>>>
>>> Brgds,
>>> Viktor
>>>
>>> On 2009.09.09., at 17:12, sygecom wrote:
>>>
>>>>
>>>> Hello to All,
>>>>
>>>> I wonder if there is a function: FileValid () in the Harbour?
>>>>
>>>> Below is an example of function in xHarbour:
>>>>
>>>> PROCEDURE Main
>>>>
>>>>     ? FileValid( "MyApp.prg" )                   // result: .T.
>>>>
>>>>     ? FileValid( "My New Application.prg" )      // result: .F.
>>>>
>>>>     ? LongFileValid( "My New Application.prg" )  // result: .T.
>>>>
>>>>  RETURN
>>>>
>>>>  FUNCTION LongFileValid( cFileName, lExtension )
>>>>
>>>>     IF Valtype( lExtension ) <> "L"
>>>>        lExtension := .F.
>>>>     ENDIF
>>>>
>>>>  RETURN FileValid( cFileName, 255, 255, lExtension, .T. )
>>>>
>>>> -- 
>>>> View this message in context:
>>>> http://www.nabble.com/There-is-a-function-FileValid%28%29-in-the-Harbour--tp25367075p25367075.html
>>>> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>>>>
>>>> _______________________________________________
>>>> Harbour mailing list
>>>> Harbour@harbour-project.org
>>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>>
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>>
>>>
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/There-is-a-function-FileValid%28%29-in-the-Harbour--tp25367075p25367601.html
>> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/There-is-a-function-FileValid%28%29-in-the-Harbour--tp25367075p25368069.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Wed Sep  9 12:02:26 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 12:02:35 2009
Subject: [Harbour] Harbour 2.0.0beta3 (unofficial) available now
In-Reply-To: <609353e70909090833y15c4a9a6k8949343245a06a50@mail.gmail.com>
References: <18d502870909061011n328e50afhbe802e356bbf2642@mail.gmail.com>
	<609353e70909090833y15c4a9a6k8949343245a06a50@mail.gmail.com>
Message-ID: <C6371D49-E413-48A2-A994-D5BB62230AD0@syenar.hu>

BTW, you should also clean your environment to have only ONE
compiler at a time. See various points in INSTALL / TROUBLESHOOTING
warning this.

[ I think this was my last message ever answering to a messed
local configuration sort of complain, even if this means ppl
will think hbmk2 or Harbour build system is the culprit. It's
very tiring to act like a parrot and correct these basic mistakes
for years on and on. Nothing personal, it's just extremely
annoying regardless who is having it. Harbour already went to
far making it simple, but it's impossible to protect against
not reading basic docs, not keeping compiler setup and local env
vars clean, having only ONE COMPILER setup at one time, etc,
etc. ]

Brgds,
Viktor

On 2009.09.09., at 17:33, Massimo Belgrano wrote:

> C:\hb20\bin>hbmk2 ..\tests\hello.prg -compiler=mingw64
> hbmk2: Processing configuration: C:\hb20\bin\hbmk.cfg
> Harbour 2.0.0beta3 (Rev. 12422)
> Copyright (c) 1999-2009, http://www.harbour-project.org/
> Compiling '../tests/hello.prg'...
> Lines 11, Functions/Procedures 1
> Generating C source output to 'hello.c'... Done.
> hello.o:hello.c:(.text+0xf): undefined reference to `hb_vmExecute'
> hello.o:hello.c:(.text+0x2c): undefined reference to  
> `hb_vmProcessSymbols'
> hello.o:hello.c:(.data+0x38): undefined reference to `HB_FUN_QOUT'
> c:/mingw/bin/../lib/gcc/mingw32/4.3.3/../../../libmingw32.a 
> (main.o):main.c:(.tex
> t+0x104): undefined reference to `WinMain@16'
> collect2: ld returned 1 exit status
> hbmk2: Error: Running linker. 1
> gcc.exe hello.o    -mconsole -Wl,--start-group -lhbextern -lhbdebug - 
> lhbvm -lhbr
> tl -lhblang -lhbcpage -lgtcgi -lgtpca -lgtstd -lgtwin -lgtwvt - 
> lgtgui -lhbrdd -l
> hbuddall -lhbusrrdd -lrddntx -lrddcdx -lrddnsx -lrddfpt -lhbrdd - 
> lhbhsx -lhbsix
> -lhbmacro -lhbcplr -lhbpp -lhbcommon -lhbpcre -lhbzlib -lkernel32 - 
> luser32 -lgdi
> 32 -ladvapi32 -lws2_32 -lwinspool -lcomctl32 -lcomdlg32 -lshell32 - 
> luuid -lole32
> -loleaut32 -lmpr -lwinmm -lmapi32 -limm32 -lmsimg32 -lwininet  -Wl,-- 
> end-group
> -ohello.exe -LC:/hb20/lib/win/mingw64
>
>
> MinGW w64 4.5.0 installed c:\devl\mingw64 and added to  path
>
> What i miss?
>
>
> 2009/9/6 Viktor Szak?ts <harbour.01@syenar.hu>:
>> Hi All,
>>
>> Harbour 2.0.0beta3 (r12422) source archives and Windows binary
>> releases are available for download here:
>>   http://syenar.hu/harbour/
>>
>> Make sure to check INSTALL doc "QUICK START" section and visit
>> our user forums at:
>>   http://sourceforge.net/apps/phpbb/harbour-project/
>>
>> Release notes:
>> -----------------------------------------------------------------------
>> Unified Windows release for most supported compilers and
>> x86, x64, WinCE/ARM, MS-DOS, OS/2, Linux target platforms.
>>
>> Installed size: 232MB (46MB - 340MB)
>>
>> The default installation will install MinGW compiler + x86 static and
>> shared libs, MSVC and BCC x86 libs and examples.
>>
>> Options: x86 shared tools, x64 shared tools, MinGW x64 and
>> WinCE-ARM libs, MSVC x64 libs, Open Watcom x86 libs,
>> shared x64/WinCE-ARM libs, MS-DOS 32-bit DJGPP libs,
>> OS/2 (watcom) libs, Linux (watcom) libs.
>>
>> Usage:
>> 1) install/unpack to any directory (C:\hb20)
>> 2) go to bin dir (optional if you specify path for hbmk2)
>> 3) For x86 executable, type: 'hbmk2 ../tests/hello.prg'
>> 4) For x64 executable, type: 'hbmk2 ../tests/hello.prg - 
>> compiler=mingw64'
>>   [needs mingw64 to be installed beforehand]
>> 5) For WinCE/ARM executable, type: 'hbmk2 ../tests/hello.prg - 
>> platform=wce'
>>   [needs cegcc to be installed beforehand]
>> 6) For MS-DOS executable, type: 'hbmk2 ../tests/hello.prg - 
>> platform=dos'
>>   [needs DJGPP to be installed beforehand]
>> 7) For Linux executable, type: 'hbmk2 ../tests/hello.prg - 
>> platform=linux'
>>   [needs OpenWatcom to be installed beforehand]
>>
>> Tool/lib versions used to create this package:
>> -----------------------------------------------------------------------
>>
>>   Compiler tools
>>   --------------
>>
>>   MinGW 4.4.1 (included)
>>   MinGW w64 4.5.0
>>   MinGW CEGCC 4.1.0
>>   DJGPP 4.4.1 (2.04b1)
>>   MSVC 2008 SP1
>>   Open Watcom C++ 1.8
>>   Borland C++ 5.5.1
>>
>>   External lib dependencies
>>   -------------------------
>>
>>   ACE 9.10
>>   Allegro 4.2.2
>>   Blat 2.6.2
>>   libcurl 7.19.6
>>   Firebird 2.1.2
>>   FreeImage 3.12.0
>>   GD 2.0.35
>>   MySQL 5.1.35
>>   OpenSSL 0.9.8k
>>   PostgreSQL 8.3.7
>>   QT 4.5.2
>>   WATTCG 2.2.10
>>
>> Changes since previous (2.0.0beta2 20090624) release:
>> -----------------------------------------------------------------------
>>
>> - Harbour updated to r12422 (from r11508)
>> - Rewritten socket library.
>> - Fixed remaining Clipper compatibility issues (@.clp, SET PROC TO,  
>> DO
>> WITH, etc)
>> - Added replaceable core file I/O layer.
>> - Reworked build system with integrated dynlib creation, cross- 
>> platform
>>  support, compiler and external component autodetection and much  
>> more.
>> - MinGW updated to 4.4.1
>> - MinGW x64 updated to 4.5.0 (20090905)
>> - Finalizing ActiveX/OLE2 support.
>> - Timestamp/datetime support in core.
>> - Added MT support for dos platform.
>> - Added socket support for dos platform (via WATTCP lib).
>> - Added hbnetio lib client/server file I/O implementation.
>> - hbxbp lib about feature complete.
>> - wce/msvcarm target improvements, sunpro compiler support.
>> - hbssl OpenSSL wrapper lib.
>> - SSL support in hbtip lib.
>> - Serial communication fixes in hbwin/hbtpathy on win platform.
>> - Lots of other additions and some fixes.
>> - Changed default install path to be 'hb20' rather than 'harbour20',
>>  to avoid long filenames.
>> - Replaced mingw64 built x64 shared tools with msvc64 builds, as
>>  the former didn't work.
>> - Included hbqt lib which links against static QT libs.
>>
>> Changes since previous (2.0.0beta1 20090609) release:
>> -----------------------------------------------------------------------
>> - Harbour updated to r11508 (from r11287)
>> - New User's Forum linked
>> - upx compressor included in install package
>> - DOS cross build libs included in install package
>> - preparation to host 3rd party packages inside Harbour directory  
>> tree
>> - new "zero-conf" library install system in preparation
>> - hbmk2: lots of minor refinements, support for all free compilers
>>  in embedded form, support spaces in filenames/paths, all Harbour
>>  supported C compilers have now complete support in hbmk2
>> - DOS support tested and required fixes applied
>> - embedded compilers moved to 'comp' subdir
>> - support for latest MinGW x64 and MSVS 2010 compilers
>> - extended INSTALL with new examples and app build quick guide
>> - icon for installer and hbrun tool
>> - hbxbp and hbqt enhancements
>> - hbwin refinements and better compatibility
>> - new uhttpd2 sessioned HTTP server
>> - C++ build support for all compilers, new HB_WAEVAL() function,
>>  new xpp (Xbase++ compatibility) lib, .hrb loading enhancements
>> - DBU, RL, SuperLib fixes.
>> - MinGW64 updated to 4.4.1
>> - There were a few changes in this release which may require updating
>>  your source code (hb_par*()/hb_stor*() in .c files and GTWVG WIN_*()
>>  function in .prg files). Search for 'incompatible' word in ChangeLog
>>  for more.
>> -----------------------------------------------------------------------
>>
>> Changes since previous (1.1.0dev 20090602) release:
>> -----------------------------------------------------------------------
>> - Harbour updated to r11287 (from r11179)
>> - all contrib tests included in install package
>> - All 3rd party packages upgraded to latest version.
>> - hbmk2: project support, new file extensions, fixes, Harbour 1.0.x
>>  support.
>> - further simplified/updated build process and instructions
>> - hbqt many enhancements
>> - almost full xhb compatibility
>> - 'terminal' fixed in examples
>> - source formatter, Cl*pper RL tool, legacy hbmake added
>> - MT Xbase++ compatibility
>> -----------------------------------------------------------------------
>>
>> Changes since previous (1.1.0dev 20090408) release:
>> -----------------------------------------------------------------------
>> - Harbour updated to r11179 (from r10819)
>> - Updated hbmk2 (filter issues + experimental Harbour 1.0.x support)
>> - Included contrib tests/utils
>> - Full and now standalone 'examples'
>> - 'tests' with subdirs included.
>> - No longer included pocc/pocc64/poccarm libs.
>> - QT updated to 4.5.1
>> - MinGW updated to 4.4.0
>>
>> --
>> Brgds,
>> Viktor Szakats
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
>
>
> -- 
> Massimo Belgrano
>
> Analisi e sviluppo software per Lan e Web - Consulenza informatica -  
> Formazione
> Delta Informatica S.r.l. http://www.deltain.it/   +39 0321 455962
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mbelgrano at deltain.it  Wed Sep  9 12:05:25 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Sep  9 12:05:51 2009
Subject: [Harbour] Harbour 2.0.0beta3 (unofficial) available now
In-Reply-To: <407A1579-3922-474B-BF30-D88F9B1CBF61@syenar.hu>
References: <18d502870909061011n328e50afhbe802e356bbf2642@mail.gmail.com> 
	<609353e70909090833y15c4a9a6k8949343245a06a50@mail.gmail.com> 
	<407A1579-3922-474B-BF30-D88F9B1CBF61@syenar.hu>
Message-ID: <609353e70909090905m1f8939c5wdcc3eac25cf4bc11@mail.gmail.com>

right
Thanks

now notice that in readme C:\hb20\comp\mingwarm
you pint at https://sourceforge.net/project/downloading.php?group_id=173455&use_mirror=switch&filename=cygwin-cegcc-mingw32ce-0.51.0-1.tar.gz&a=34126466
but it reply:

The "cygwin-cegcc-mingw32ce-0.51.0-1.tar.gz" file could not be found
or is not available. Please select another file.


2009/9/9 Viktor Szak?ts <harbour.01@syenar.hu>:
>> C:\hb20\bin>hbmk2 ..\tests\hello.prg -compiler=mingw64
>> hbmk2: Processing configuration: C:\hb20\bin\hbmk.cfg
>> Harbour 2.0.0beta3 (Rev. 12422)
>> Copyright (c) 1999-2009, http://www.harbour-project.org/
>> Compiling '../tests/hello.prg'...
>> Lines 11, Functions/Procedures 1
>> Generating C source output to 'hello.c'... Done.
>> hello.o:hello.c:(.text+0xf): undefined reference to `hb_vmExecute'
>> hello.o:hello.c:(.text+0x2c): undefined reference to `hb_vmProcessSymbols'
>> hello.o:hello.c:(.data+0x38): undefined reference to `HB_FUN_QOUT'
>>
>> c:/mingw/bin/../lib/gcc/mingw32/4.3.3/../../../libmingw32.a(main.o):main.c:(.tex
>> t+0x104): undefined reference to `WinMain@16'
>> collect2: ld returned 1 exit status
>> hbmk2: Error: Running linker. 1
>> gcc.exe hello.o ? ?-mconsole -Wl,--start-group -lhbextern -lhbdebug -lhbvm
>> -lhbr
>> tl -lhblang -lhbcpage -lgtcgi -lgtpca -lgtstd -lgtwin -lgtwvt -lgtgui
>> -lhbrdd -l
>> hbuddall -lhbusrrdd -lrddntx -lrddcdx -lrddnsx -lrddfpt -lhbrdd -lhbhsx
>> -lhbsix
>> -lhbmacro -lhbcplr -lhbpp -lhbcommon -lhbpcre -lhbzlib -lkernel32 -luser32
>> -lgdi
>> 32 -ladvapi32 -lws2_32 -lwinspool -lcomctl32 -lcomdlg32 -lshell32 -luuid
>> -lole32
>> -loleaut32 -lmpr -lwinmm -lmapi32 -limm32 -lmsimg32 -lwininet
>> ?-Wl,--end-group
>> -ohello.exe -LC:/hb20/lib/win/mingw64
>>
>> MinGW w64 4.5.0 installed c:\devl\mingw64 and added to ?path
>>
>> What i miss?
>
> In this case you should drop -compiler option. It's autodetected.
>
> You should use -compiler option if you install mingw64 into comp/mingw64.
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From vszakats at users.sourceforge.net  Wed Sep  9 12:16:58 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep  9 12:17:04 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12453] trunk/harbour
Message-ID: <E1MlPqs-0006ZI-IW@bj8yhf1.ch3.sourceforge.com>

Revision: 12453
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12453&view=rev
Author:   vszakats
Date:     2009-09-09 16:16:57 +0000 (Wed, 09 Sep 2009)

Log Message:
-----------
2009-09-09 18:12 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * bin/postinst.bat
    ! Fixed for dos shells. (cmdline lenght problems, end of .cfg
      extension was clipped on the longest line to .cf)

  + package/winuni
  + package/winuni/HARBOUR_README_MINGW
  + package/winuni/HARBOUR_README_MINGWARM
  + package/winuni/HARBOUR_README_ADDINS
  + package/winuni/HARBOUR_README_DJGPP
  + package/winuni/HARBOUR_README_POCC
  + package/winuni/HARBOUR_README_WATCOM
  + package/winuni/HARBOUR_README_MINGW64
  + package/winuni/mpkg_win_uni.bat
  + package/winuni/mpkg_win_uni_extra_copy.bat
  + package/winuni/RELNOTES
  + package/winuni/mpkg_win_uni.nsi
    + Added components needed to create unified Windows build.
      Of course the dir structure with content should be assembled
      manually. These files are rough ones, ease of use was no
      concern.

      Anyone please feel free to continue this work.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/postinst.bat

Added Paths:
-----------
    trunk/harbour/package/winuni/
    trunk/harbour/package/winuni/HARBOUR_README_ADDINS
    trunk/harbour/package/winuni/HARBOUR_README_DJGPP
    trunk/harbour/package/winuni/HARBOUR_README_MINGW
    trunk/harbour/package/winuni/HARBOUR_README_MINGW64
    trunk/harbour/package/winuni/HARBOUR_README_MINGWARM
    trunk/harbour/package/winuni/HARBOUR_README_POCC
    trunk/harbour/package/winuni/HARBOUR_README_WATCOM
    trunk/harbour/package/winuni/RELNOTES
    trunk/harbour/package/winuni/mpkg_win_uni.bat
    trunk/harbour/package/winuni/mpkg_win_uni.nsi
    trunk/harbour/package/winuni/mpkg_win_uni_extra_copy.bat


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Wed Sep  9 12:17:20 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 12:17:28 2009
Subject: [Harbour] Harbour 2.0.0beta3 (unofficial) available now
In-Reply-To: <609353e70909090905m1f8939c5wdcc3eac25cf4bc11@mail.gmail.com>
References: <18d502870909061011n328e50afhbe802e356bbf2642@mail.gmail.com>
	<609353e70909090833y15c4a9a6k8949343245a06a50@mail.gmail.com>
	<407A1579-3922-474B-BF30-D88F9B1CBF61@syenar.hu>
	<609353e70909090905m1f8939c5wdcc3eac25cf4bc11@mail.gmail.com>
Message-ID: <E11AA125-3407-47BC-94D8-F5442323DC5B@syenar.hu>

yes, did you read the whole document?

Brgds,
Viktor

On 2009.09.09., at 18:05, Massimo Belgrano wrote:

> right
> Thanks
>
> now notice that in readme C:\hb20\comp\mingwarm
> you pint at https://sourceforge.net/project/downloading.php?group_id=173455&use_mirror=switch&filename=cygwin-cegcc-mingw32ce-0.51.0-1.tar.gz&a=34126466
> but it reply:
>
> The "cygwin-cegcc-mingw32ce-0.51.0-1.tar.gz" file could not be found
> or is not available. Please select another file.
>
>
> 2009/9/9 Viktor Szak?ts <harbour.01@syenar.hu>:
>>> C:\hb20\bin>hbmk2 ..\tests\hello.prg -compiler=mingw64
>>> hbmk2: Processing configuration: C:\hb20\bin\hbmk.cfg
>>> Harbour 2.0.0beta3 (Rev. 12422)
>>> Copyright (c) 1999-2009, http://www.harbour-project.org/
>>> Compiling '../tests/hello.prg'...
>>> Lines 11, Functions/Procedures 1
>>> Generating C source output to 'hello.c'... Done.
>>> hello.o:hello.c:(.text+0xf): undefined reference to `hb_vmExecute'
>>> hello.o:hello.c:(.text+0x2c): undefined reference to  
>>> `hb_vmProcessSymbols'
>>> hello.o:hello.c:(.data+0x38): undefined reference to `HB_FUN_QOUT'
>>>
>>> c:/mingw/bin/../lib/gcc/mingw32/4.3.3/../../../libmingw32.a 
>>> (main.o):main.c:(.tex
>>> t+0x104): undefined reference to `WinMain@16'
>>> collect2: ld returned 1 exit status
>>> hbmk2: Error: Running linker. 1
>>> gcc.exe hello.o    -mconsole -Wl,--start-group -lhbextern - 
>>> lhbdebug -lhbvm
>>> -lhbr
>>> tl -lhblang -lhbcpage -lgtcgi -lgtpca -lgtstd -lgtwin -lgtwvt - 
>>> lgtgui
>>> -lhbrdd -l
>>> hbuddall -lhbusrrdd -lrddntx -lrddcdx -lrddnsx -lrddfpt -lhbrdd - 
>>> lhbhsx
>>> -lhbsix
>>> -lhbmacro -lhbcplr -lhbpp -lhbcommon -lhbpcre -lhbzlib -lkernel32 - 
>>> luser32
>>> -lgdi
>>> 32 -ladvapi32 -lws2_32 -lwinspool -lcomctl32 -lcomdlg32 -lshell32 - 
>>> luuid
>>> -lole32
>>> -loleaut32 -lmpr -lwinmm -lmapi32 -limm32 -lmsimg32 -lwininet
>>>  -Wl,--end-group
>>> -ohello.exe -LC:/hb20/lib/win/mingw64
>>>
>>> MinGW w64 4.5.0 installed c:\devl\mingw64 and added to  path
>>>
>>> What i miss?
>>
>> In this case you should drop -compiler option. It's autodetected.
>>
>> You should use -compiler option if you install mingw64 into comp/ 
>> mingw64.
>>
>> Brgds,
>> Viktor
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
>
>
> -- 
> Massimo Belgrano
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vouchcac at users.sourceforge.net  Wed Sep  9 12:33:21 2009
From: vouchcac at users.sourceforge.net (vouchcac@users.sourceforge.net)
Date: Wed Sep  9 12:33:28 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12454] trunk/harbour
Message-ID: <E1MlQ6j-0006tl-AM@bj8yhf1.ch3.sourceforge.com>

Revision: 12454
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12454&view=rev
Author:   vouchcac
Date:     2009-09-09 16:33:18 +0000 (Wed, 09 Sep 2009)

Log Message:
-----------
2009-09-09 09:24 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * contrib/hbqt/generator/hbqtgen.prg
    !  cCmd := 'hb_retc( ' + cCmn + '.toLatin1().data()' + ' )'
            =>
       cCmd := 'hb_retc( ' + cCmn + '.toAscii().data()' + ' )'
    
  * contrib/hbqt/QAbstractButton.cpp
  * contrib/hbqt/QAbstractSpinBox.cpp
  * contrib/hbqt/QAction.cpp
  * contrib/hbqt/QApplication.cpp
  * contrib/hbqt/QClipboard.cpp
  * contrib/hbqt/QColor.cpp
  * contrib/hbqt/QComboBox.cpp
  * contrib/hbqt/QCommandLinkButton.cpp
  * contrib/hbqt/QCoreApplication.cpp
  * contrib/hbqt/QDateTime.cpp
  * contrib/hbqt/QDateTimeEdit.cpp
  * contrib/hbqt/QDir.cpp
  * contrib/hbqt/QDirModel.cpp
  * contrib/hbqt/QDoubleSpinBox.cpp
  * contrib/hbqt/QFileDialog.cpp
  * contrib/hbqt/QFileSystemModel.cpp
  * contrib/hbqt/QFont.cpp
  * contrib/hbqt/QFontDatabase.cpp
  * contrib/hbqt/QFontInfo.cpp
  * contrib/hbqt/QFontMetrics.cpp
  * contrib/hbqt/QFontMetricsF.cpp
  * contrib/hbqt/QFtp.cpp
  * contrib/hbqt/QGroupBox.cpp
  * contrib/hbqt/QHttp.cpp
  * contrib/hbqt/QImage.cpp
  * contrib/hbqt/QImageReader.cpp
  * contrib/hbqt/QImageWriter.cpp
  * contrib/hbqt/QInputDialog.cpp
  * contrib/hbqt/QIODevice.cpp
  * contrib/hbqt/QKeyEvent.cpp
  * contrib/hbqt/QKeySequence.cpp
  * contrib/hbqt/QLabel.cpp
  * contrib/hbqt/QLineEdit.cpp
  * contrib/hbqt/QListWidgetItem.cpp
  * contrib/hbqt/QMenu.cpp
  * contrib/hbqt/QMessageBox.cpp
  * contrib/hbqt/QObject.cpp
  * contrib/hbqt/QPrinter.cpp
  * contrib/hbqt/QProcess.cpp
  * contrib/hbqt/QProgressBar.cpp
  * contrib/hbqt/QProgressDialog.cpp
  * contrib/hbqt/QResource.cpp
  * contrib/hbqt/QSound.cpp
  * contrib/hbqt/QSpinBox.cpp
  * contrib/hbqt/QStandardItem.cpp
  * contrib/hbqt/QStatusBar.cpp
  * contrib/hbqt/QStringList.cpp
  * contrib/hbqt/QStyledItemDelegate.cpp
  * contrib/hbqt/QSystemTrayIcon.cpp
  * contrib/hbqt/QTabBar.cpp
  * contrib/hbqt/QTableWidgetItem.cpp
  * contrib/hbqt/QTabWidget.cpp
  * contrib/hbqt/QTextBlock.cpp
  * contrib/hbqt/QTextBoundaryFinder.cpp
  * contrib/hbqt/QTextBrowser.cpp
  * contrib/hbqt/QTextCharFormat.cpp
  * contrib/hbqt/QTextCodec.cpp
  * contrib/hbqt/QTextCursor.cpp
  * contrib/hbqt/QTextDecoder.cpp
  * contrib/hbqt/QTextDocument.cpp
  * contrib/hbqt/QTextDocumentFragment.cpp
  * contrib/hbqt/QTextDocumentWriter.cpp
  * contrib/hbqt/QTextEdit.cpp
  * contrib/hbqt/QTextFormat.cpp
  * contrib/hbqt/QTextFragment.cpp
  * contrib/hbqt/QTextImageFormat.cpp
  * contrib/hbqt/QTextItem.cpp
  * contrib/hbqt/QTextLayout.cpp
  * contrib/hbqt/QTextStream.cpp
  * contrib/hbqt/QToolBox.cpp
  * contrib/hbqt/QTreeWidgetItem.cpp
  * contrib/hbqt/QUrl.cpp
  * contrib/hbqt/QVariant.cpp
  * contrib/hbqt/QWebFrame.cpp
  * contrib/hbqt/QWebHistoryItem.cpp
  * contrib/hbqt/QWebHitTestResult.cpp
  * contrib/hbqt/QWebPage.cpp
  * contrib/hbqt/QWebSecurityOrigin.cpp
  * contrib/hbqt/QWebSettings.cpp
  * contrib/hbqt/QWebView.cpp
  * contrib/hbqt/QWidget.cpp
  * contrib/hbqt/QWizard.cpp
  * contrib/hbxbp/tests/demoxbp.prg
    ! Result of change in hbqtgen.prg
      cCmd := 'hb_retc( ' + cCmn + '.toLatin1().data()' + ' )'
           =>
      cCmd := 'hb_retc( ' + cCmn + '.toAscii().data()' + ' )'
  
      This change is initiated after Alexandr Okhotnikov's message and seems
      to be working harmless with default code page. I will request to Alexsnder 
      to test it deeply and post his results to this list.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbqt/QAbstractButton.cpp
    trunk/harbour/contrib/hbqt/QAbstractSpinBox.cpp
    trunk/harbour/contrib/hbqt/QAction.cpp
    trunk/harbour/contrib/hbqt/QApplication.cpp
    trunk/harbour/contrib/hbqt/QClipboard.cpp
    trunk/harbour/contrib/hbqt/QColor.cpp
    trunk/harbour/contrib/hbqt/QComboBox.cpp
    trunk/harbour/contrib/hbqt/QCommandLinkButton.cpp
    trunk/harbour/contrib/hbqt/QCoreApplication.cpp
    trunk/harbour/contrib/hbqt/QDateTime.cpp
    trunk/harbour/contrib/hbqt/QDateTimeEdit.cpp
    trunk/harbour/contrib/hbqt/QDir.cpp
    trunk/harbour/contrib/hbqt/QDirModel.cpp
    trunk/harbour/contrib/hbqt/QDoubleSpinBox.cpp
    trunk/harbour/contrib/hbqt/QFileDialog.cpp
    trunk/harbour/contrib/hbqt/QFileSystemModel.cpp
    trunk/harbour/contrib/hbqt/QFont.cpp
    trunk/harbour/contrib/hbqt/QFontDatabase.cpp
    trunk/harbour/contrib/hbqt/QFontInfo.cpp
    trunk/harbour/contrib/hbqt/QFontMetrics.cpp
    trunk/harbour/contrib/hbqt/QFontMetricsF.cpp
    trunk/harbour/contrib/hbqt/QFtp.cpp
    trunk/harbour/contrib/hbqt/QGroupBox.cpp
    trunk/harbour/contrib/hbqt/QHttp.cpp
    trunk/harbour/contrib/hbqt/QIODevice.cpp
    trunk/harbour/contrib/hbqt/QImage.cpp
    trunk/harbour/contrib/hbqt/QImageReader.cpp
    trunk/harbour/contrib/hbqt/QImageWriter.cpp
    trunk/harbour/contrib/hbqt/QInputDialog.cpp
    trunk/harbour/contrib/hbqt/QKeyEvent.cpp
    trunk/harbour/contrib/hbqt/QKeySequence.cpp
    trunk/harbour/contrib/hbqt/QLabel.cpp
    trunk/harbour/contrib/hbqt/QLineEdit.cpp
    trunk/harbour/contrib/hbqt/QListWidgetItem.cpp
    trunk/harbour/contrib/hbqt/QMenu.cpp
    trunk/harbour/contrib/hbqt/QMessageBox.cpp
    trunk/harbour/contrib/hbqt/QObject.cpp
    trunk/harbour/contrib/hbqt/QPrinter.cpp
    trunk/harbour/contrib/hbqt/QProcess.cpp
    trunk/harbour/contrib/hbqt/QProgressBar.cpp
    trunk/harbour/contrib/hbqt/QProgressDialog.cpp
    trunk/harbour/contrib/hbqt/QResource.cpp
    trunk/harbour/contrib/hbqt/QSound.cpp
    trunk/harbour/contrib/hbqt/QSpinBox.cpp
    trunk/harbour/contrib/hbqt/QStandardItem.cpp
    trunk/harbour/contrib/hbqt/QStatusBar.cpp
    trunk/harbour/contrib/hbqt/QStringList.cpp
    trunk/harbour/contrib/hbqt/QStyledItemDelegate.cpp
    trunk/harbour/contrib/hbqt/QSystemTrayIcon.cpp
    trunk/harbour/contrib/hbqt/QTabBar.cpp
    trunk/harbour/contrib/hbqt/QTabWidget.cpp
    trunk/harbour/contrib/hbqt/QTableWidgetItem.cpp
    trunk/harbour/contrib/hbqt/QTextBlock.cpp
    trunk/harbour/contrib/hbqt/QTextBoundaryFinder.cpp
    trunk/harbour/contrib/hbqt/QTextBrowser.cpp
    trunk/harbour/contrib/hbqt/QTextCharFormat.cpp
    trunk/harbour/contrib/hbqt/QTextCodec.cpp
    trunk/harbour/contrib/hbqt/QTextCursor.cpp
    trunk/harbour/contrib/hbqt/QTextDecoder.cpp
    trunk/harbour/contrib/hbqt/QTextDocument.cpp
    trunk/harbour/contrib/hbqt/QTextDocumentFragment.cpp
    trunk/harbour/contrib/hbqt/QTextDocumentWriter.cpp
    trunk/harbour/contrib/hbqt/QTextEdit.cpp
    trunk/harbour/contrib/hbqt/QTextFormat.cpp
    trunk/harbour/contrib/hbqt/QTextFragment.cpp
    trunk/harbour/contrib/hbqt/QTextImageFormat.cpp
    trunk/harbour/contrib/hbqt/QTextItem.cpp
    trunk/harbour/contrib/hbqt/QTextLayout.cpp
    trunk/harbour/contrib/hbqt/QTextStream.cpp
    trunk/harbour/contrib/hbqt/QToolBox.cpp
    trunk/harbour/contrib/hbqt/QTreeWidgetItem.cpp
    trunk/harbour/contrib/hbqt/QUrl.cpp
    trunk/harbour/contrib/hbqt/QVariant.cpp
    trunk/harbour/contrib/hbqt/QWebFrame.cpp
    trunk/harbour/contrib/hbqt/QWebHistoryItem.cpp
    trunk/harbour/contrib/hbqt/QWebHitTestResult.cpp
    trunk/harbour/contrib/hbqt/QWebPage.cpp
    trunk/harbour/contrib/hbqt/QWebSecurityOrigin.cpp
    trunk/harbour/contrib/hbqt/QWebSettings.cpp
    trunk/harbour/contrib/hbqt/QWebView.cpp
    trunk/harbour/contrib/hbqt/QWidget.cpp
    trunk/harbour/contrib/hbqt/QWizard.cpp
    trunk/harbour/contrib/hbqt/generator/hbqtgen.prg
    trunk/harbour/contrib/hbxbp/tests/demoxbp.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From mbelgrano at deltain.it  Wed Sep  9 12:39:10 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Sep  9 12:39:35 2009
Subject: [Harbour] Harbour 2.0.0beta3 (unofficial) available now
In-Reply-To: <E11AA125-3407-47BC-94D8-F5442323DC5B@syenar.hu>
References: <18d502870909061011n328e50afhbe802e356bbf2642@mail.gmail.com> 
	<609353e70909090833y15c4a9a6k8949343245a06a50@mail.gmail.com> 
	<407A1579-3922-474B-BF30-D88F9B1CBF61@syenar.hu>
	<609353e70909090905m1f8939c5wdcc3eac25cf4bc11@mail.gmail.com> 
	<E11AA125-3407-47BC-94D8-F5442323DC5B@syenar.hu>
Message-ID: <609353e70909090939ye880050p4071ed3125bded5@mail.gmail.com>

Right now read
UPDATE: It seems the cegcc team doesn't provide this binary download
        anymore. Please consult their website for more information.

i have the old file 0.51 on other machine so for me is not a problem
in next release will be supported 0.55 or 0.59
CeGCC 0.59.1 uses gcc 4.4. The latest official release (0.55) is based
on gcc 4.1.0.

Hi hope that will be more easy to unpack using cgywin
     > sh
     $ tar -zxvf cygwin-cegcc-mingw32ce-0.51.0-1.tar.gz
     $ exit

2009/9/9 Viktor Szak?ts <harbour.01@syenar.hu>:
> yes, did you read the whole document?
>
> Brgds,
> Viktor
>
> On 2009.09.09., at 18:05, Massimo Belgrano wrote:
>
>> right
>> Thanks
>>
>> now notice that in readme C:\hb20\comp\mingwarm
>> you pint at
>> https://sourceforge.net/project/downloading.php?group_id=173455&use_mirror=switch&filename=cygwin-cegcc-mingw32ce-0.51.0-1.tar.gz&a=34126466
>> but it reply:
>>
>> The "cygwin-cegcc-mingw32ce-0.51.0-1.tar.gz" file could not be found
>> or is not available. Please select another file.
>>
>>
>> 2009/9/9 Viktor Szak?ts <harbour.01@syenar.hu>:
>>>>
>>>> C:\hb20\bin>hbmk2 ..\tests\hello.prg -compiler=mingw64
>>>> hbmk2: Processing configuration: C:\hb20\bin\hbmk.cfg
>>>> Harbour 2.0.0beta3 (Rev. 12422)
>>>> Copyright (c) 1999-2009, http://www.harbour-project.org/
>>>> Compiling '../tests/hello.prg'...
>>>> Lines 11, Functions/Procedures 1
>>>> Generating C source output to 'hello.c'... Done.
>>>> hello.o:hello.c:(.text+0xf): undefined reference to `hb_vmExecute'
>>>> hello.o:hello.c:(.text+0x2c): undefined reference to
>>>> `hb_vmProcessSymbols'
>>>> hello.o:hello.c:(.data+0x38): undefined reference to `HB_FUN_QOUT'
>>>>
>>>>
>>>> c:/mingw/bin/../lib/gcc/mingw32/4.3.3/../../../libmingw32.a(main.o):main.c:(.tex
>>>> t+0x104): undefined reference to `WinMain@16'
>>>> collect2: ld returned 1 exit status
>>>> hbmk2: Error: Running linker. 1
>>>> gcc.exe hello.o ? ?-mconsole -Wl,--start-group -lhbextern -lhbdebug
>>>> -lhbvm
>>>> -lhbr
>>>> tl -lhblang -lhbcpage -lgtcgi -lgtpca -lgtstd -lgtwin -lgtwvt -lgtgui
>>>> -lhbrdd -l
>>>> hbuddall -lhbusrrdd -lrddntx -lrddcdx -lrddnsx -lrddfpt -lhbrdd -lhbhsx
>>>> -lhbsix
>>>> -lhbmacro -lhbcplr -lhbpp -lhbcommon -lhbpcre -lhbzlib -lkernel32
>>>> -luser32
>>>> -lgdi
>>>> 32 -ladvapi32 -lws2_32 -lwinspool -lcomctl32 -lcomdlg32 -lshell32 -luuid
>>>> -lole32
>>>> -loleaut32 -lmpr -lwinmm -lmapi32 -limm32 -lmsimg32 -lwininet
>>>> ?-Wl,--end-group
>>>> -ohello.exe -LC:/hb20/lib/win/mingw64
>>>>
>>>> MinGW w64 4.5.0 installed c:\devl\mingw64 and added to ?path
>>>>
>>>> What i miss?
>>>
>>> In this case you should drop -compiler option. It's autodetected.
>>>
>>> You should use -compiler option if you install mingw64 into comp/mingw64.
>>>
>>> Brgds,
>>> Viktor
>>>
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>>
>>
>>
>>
>> --
>> Massimo Belgrano
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From harbour.01 at syenar.hu  Wed Sep  9 12:41:05 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 12:41:14 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12454] trunk/harbour
In-Reply-To: <E1MlQ6j-0006tl-AM@bj8yhf1.ch3.sourceforge.com>
References: <E1MlQ6j-0006tl-AM@bj8yhf1.ch3.sourceforge.com>
Message-ID: <1FE8B3C8-7C44-4B8F-90FE-254B7A239F58@syenar.hu>

Hi Pritpal,

Could you make the same change for gtqtc?

Brgds,
Viktor

On 2009.09.09., at 18:33, vouchcac@users.sourceforge.net wrote:

> Revision: 12454
>          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12454&view=rev
> Author:   vouchcac
> Date:     2009-09-09 16:33:18 +0000 (Wed, 09 Sep 2009)
>
> Log Message:
> -----------
> 2009-09-09 09:24 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>  * contrib/hbqt/generator/hbqtgen.prg
>    !  cCmd := 'hb_retc( ' + cCmn + '.toLatin1().data()' + ' )'
>            =>
>       cCmd := 'hb_retc( ' + cCmn + '.toAscii().data()' + ' )'
>
>  * contrib/hbqt/QAbstractButton.cpp
>  * contrib/hbqt/QAbstractSpinBox.cpp
>  * contrib/hbqt/QAction.cpp
>  * contrib/hbqt/QApplication.cpp
>  * contrib/hbqt/QClipboard.cpp
>  * contrib/hbqt/QColor.cpp
>  * contrib/hbqt/QComboBox.cpp
>  * contrib/hbqt/QCommandLinkButton.cpp
>  * contrib/hbqt/QCoreApplication.cpp
>  * contrib/hbqt/QDateTime.cpp
>  * contrib/hbqt/QDateTimeEdit.cpp
>  * contrib/hbqt/QDir.cpp
>  * contrib/hbqt/QDirModel.cpp
>  * contrib/hbqt/QDoubleSpinBox.cpp
>  * contrib/hbqt/QFileDialog.cpp
>  * contrib/hbqt/QFileSystemModel.cpp
>  * contrib/hbqt/QFont.cpp
>  * contrib/hbqt/QFontDatabase.cpp
>  * contrib/hbqt/QFontInfo.cpp
>  * contrib/hbqt/QFontMetrics.cpp
>  * contrib/hbqt/QFontMetricsF.cpp
>  * contrib/hbqt/QFtp.cpp
>  * contrib/hbqt/QGroupBox.cpp
>  * contrib/hbqt/QHttp.cpp
>  * contrib/hbqt/QImage.cpp
>  * contrib/hbqt/QImageReader.cpp
>  * contrib/hbqt/QImageWriter.cpp
>  * contrib/hbqt/QInputDialog.cpp
>  * contrib/hbqt/QIODevice.cpp
>  * contrib/hbqt/QKeyEvent.cpp
>  * contrib/hbqt/QKeySequence.cpp
>  * contrib/hbqt/QLabel.cpp
>  * contrib/hbqt/QLineEdit.cpp
>  * contrib/hbqt/QListWidgetItem.cpp
>  * contrib/hbqt/QMenu.cpp
>  * contrib/hbqt/QMessageBox.cpp
>  * contrib/hbqt/QObject.cpp
>  * contrib/hbqt/QPrinter.cpp
>  * contrib/hbqt/QProcess.cpp
>  * contrib/hbqt/QProgressBar.cpp
>  * contrib/hbqt/QProgressDialog.cpp
>  * contrib/hbqt/QResource.cpp
>  * contrib/hbqt/QSound.cpp
>  * contrib/hbqt/QSpinBox.cpp
>  * contrib/hbqt/QStandardItem.cpp
>  * contrib/hbqt/QStatusBar.cpp
>  * contrib/hbqt/QStringList.cpp
>  * contrib/hbqt/QStyledItemDelegate.cpp
>  * contrib/hbqt/QSystemTrayIcon.cpp
>  * contrib/hbqt/QTabBar.cpp
>  * contrib/hbqt/QTableWidgetItem.cpp
>  * contrib/hbqt/QTabWidget.cpp
>  * contrib/hbqt/QTextBlock.cpp
>  * contrib/hbqt/QTextBoundaryFinder.cpp
>  * contrib/hbqt/QTextBrowser.cpp
>  * contrib/hbqt/QTextCharFormat.cpp
>  * contrib/hbqt/QTextCodec.cpp
>  * contrib/hbqt/QTextCursor.cpp
>  * contrib/hbqt/QTextDecoder.cpp
>  * contrib/hbqt/QTextDocument.cpp
>  * contrib/hbqt/QTextDocumentFragment.cpp
>  * contrib/hbqt/QTextDocumentWriter.cpp
>  * contrib/hbqt/QTextEdit.cpp
>  * contrib/hbqt/QTextFormat.cpp
>  * contrib/hbqt/QTextFragment.cpp
>  * contrib/hbqt/QTextImageFormat.cpp
>  * contrib/hbqt/QTextItem.cpp
>  * contrib/hbqt/QTextLayout.cpp
>  * contrib/hbqt/QTextStream.cpp
>  * contrib/hbqt/QToolBox.cpp
>  * contrib/hbqt/QTreeWidgetItem.cpp
>  * contrib/hbqt/QUrl.cpp
>  * contrib/hbqt/QVariant.cpp
>  * contrib/hbqt/QWebFrame.cpp
>  * contrib/hbqt/QWebHistoryItem.cpp
>  * contrib/hbqt/QWebHitTestResult.cpp
>  * contrib/hbqt/QWebPage.cpp
>  * contrib/hbqt/QWebSecurityOrigin.cpp
>  * contrib/hbqt/QWebSettings.cpp
>  * contrib/hbqt/QWebView.cpp
>  * contrib/hbqt/QWidget.cpp
>  * contrib/hbqt/QWizard.cpp
>  * contrib/hbxbp/tests/demoxbp.prg
>    ! Result of change in hbqtgen.prg
>      cCmd := 'hb_retc( ' + cCmn + '.toLatin1().data()' + ' )'
>           =>
>      cCmd := 'hb_retc( ' + cCmn + '.toAscii().data()' + ' )'
>
>      This change is initiated after Alexandr Okhotnikov's message  
> and seems
>      to be working harmless with default code page. I will request  
> to Alexsnder
>      to test it deeply and post his results to this list.
>
> Modified Paths:
> --------------
>    trunk/harbour/ChangeLog
>    trunk/harbour/contrib/hbqt/QAbstractButton.cpp
>    trunk/harbour/contrib/hbqt/QAbstractSpinBox.cpp
>    trunk/harbour/contrib/hbqt/QAction.cpp
>    trunk/harbour/contrib/hbqt/QApplication.cpp
>    trunk/harbour/contrib/hbqt/QClipboard.cpp
>    trunk/harbour/contrib/hbqt/QColor.cpp
>    trunk/harbour/contrib/hbqt/QComboBox.cpp
>    trunk/harbour/contrib/hbqt/QCommandLinkButton.cpp
>    trunk/harbour/contrib/hbqt/QCoreApplication.cpp
>    trunk/harbour/contrib/hbqt/QDateTime.cpp
>    trunk/harbour/contrib/hbqt/QDateTimeEdit.cpp
>    trunk/harbour/contrib/hbqt/QDir.cpp
>    trunk/harbour/contrib/hbqt/QDirModel.cpp
>    trunk/harbour/contrib/hbqt/QDoubleSpinBox.cpp
>    trunk/harbour/contrib/hbqt/QFileDialog.cpp
>    trunk/harbour/contrib/hbqt/QFileSystemModel.cpp
>    trunk/harbour/contrib/hbqt/QFont.cpp
>    trunk/harbour/contrib/hbqt/QFontDatabase.cpp
>    trunk/harbour/contrib/hbqt/QFontInfo.cpp
>    trunk/harbour/contrib/hbqt/QFontMetrics.cpp
>    trunk/harbour/contrib/hbqt/QFontMetricsF.cpp
>    trunk/harbour/contrib/hbqt/QFtp.cpp
>    trunk/harbour/contrib/hbqt/QGroupBox.cpp
>    trunk/harbour/contrib/hbqt/QHttp.cpp
>    trunk/harbour/contrib/hbqt/QIODevice.cpp
>    trunk/harbour/contrib/hbqt/QImage.cpp
>    trunk/harbour/contrib/hbqt/QImageReader.cpp
>    trunk/harbour/contrib/hbqt/QImageWriter.cpp
>    trunk/harbour/contrib/hbqt/QInputDialog.cpp
>    trunk/harbour/contrib/hbqt/QKeyEvent.cpp
>    trunk/harbour/contrib/hbqt/QKeySequence.cpp
>    trunk/harbour/contrib/hbqt/QLabel.cpp
>    trunk/harbour/contrib/hbqt/QLineEdit.cpp
>    trunk/harbour/contrib/hbqt/QListWidgetItem.cpp
>    trunk/harbour/contrib/hbqt/QMenu.cpp
>    trunk/harbour/contrib/hbqt/QMessageBox.cpp
>    trunk/harbour/contrib/hbqt/QObject.cpp
>    trunk/harbour/contrib/hbqt/QPrinter.cpp
>    trunk/harbour/contrib/hbqt/QProcess.cpp
>    trunk/harbour/contrib/hbqt/QProgressBar.cpp
>    trunk/harbour/contrib/hbqt/QProgressDialog.cpp
>    trunk/harbour/contrib/hbqt/QResource.cpp
>    trunk/harbour/contrib/hbqt/QSound.cpp
>    trunk/harbour/contrib/hbqt/QSpinBox.cpp
>    trunk/harbour/contrib/hbqt/QStandardItem.cpp
>    trunk/harbour/contrib/hbqt/QStatusBar.cpp
>    trunk/harbour/contrib/hbqt/QStringList.cpp
>    trunk/harbour/contrib/hbqt/QStyledItemDelegate.cpp
>    trunk/harbour/contrib/hbqt/QSystemTrayIcon.cpp
>    trunk/harbour/contrib/hbqt/QTabBar.cpp
>    trunk/harbour/contrib/hbqt/QTabWidget.cpp
>    trunk/harbour/contrib/hbqt/QTableWidgetItem.cpp
>    trunk/harbour/contrib/hbqt/QTextBlock.cpp
>    trunk/harbour/contrib/hbqt/QTextBoundaryFinder.cpp
>    trunk/harbour/contrib/hbqt/QTextBrowser.cpp
>    trunk/harbour/contrib/hbqt/QTextCharFormat.cpp
>    trunk/harbour/contrib/hbqt/QTextCodec.cpp
>    trunk/harbour/contrib/hbqt/QTextCursor.cpp
>    trunk/harbour/contrib/hbqt/QTextDecoder.cpp
>    trunk/harbour/contrib/hbqt/QTextDocument.cpp
>    trunk/harbour/contrib/hbqt/QTextDocumentFragment.cpp
>    trunk/harbour/contrib/hbqt/QTextDocumentWriter.cpp
>    trunk/harbour/contrib/hbqt/QTextEdit.cpp
>    trunk/harbour/contrib/hbqt/QTextFormat.cpp
>    trunk/harbour/contrib/hbqt/QTextFragment.cpp
>    trunk/harbour/contrib/hbqt/QTextImageFormat.cpp
>    trunk/harbour/contrib/hbqt/QTextItem.cpp
>    trunk/harbour/contrib/hbqt/QTextLayout.cpp
>    trunk/harbour/contrib/hbqt/QTextStream.cpp
>    trunk/harbour/contrib/hbqt/QToolBox.cpp
>    trunk/harbour/contrib/hbqt/QTreeWidgetItem.cpp
>    trunk/harbour/contrib/hbqt/QUrl.cpp
>    trunk/harbour/contrib/hbqt/QVariant.cpp
>    trunk/harbour/contrib/hbqt/QWebFrame.cpp
>    trunk/harbour/contrib/hbqt/QWebHistoryItem.cpp
>    trunk/harbour/contrib/hbqt/QWebHitTestResult.cpp
>    trunk/harbour/contrib/hbqt/QWebPage.cpp
>    trunk/harbour/contrib/hbqt/QWebSecurityOrigin.cpp
>    trunk/harbour/contrib/hbqt/QWebSettings.cpp
>    trunk/harbour/contrib/hbqt/QWebView.cpp
>    trunk/harbour/contrib/hbqt/QWidget.cpp
>    trunk/harbour/contrib/hbqt/QWizard.cpp
>    trunk/harbour/contrib/hbqt/generator/hbqtgen.prg
>    trunk/harbour/contrib/hbxbp/tests/demoxbp.prg
>
>
> This was sent by the SourceForge.net collaborative development  
> platform, the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Wed Sep  9 13:36:53 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep  9 13:36:59 2009
Subject: [Harbour] Question about revision number and harbour -build update
In-Reply-To: <709887AA-818C-49AD-836E-DA73C040EB8D@syenar.hu>
References: <WWopapUh.1252494158.0261020.marcobra@82.105.36.210>
	<709887AA-818C-49AD-836E-DA73C040EB8D@syenar.hu>
Message-ID: <20090909173652.GA16219@uran.home.aster.pl>

On Wed, 09 Sep 2009, Szak?ts Viktor wrote:

Hi,

> To make that, I think we should finally make the step to
> rename ChangeLog to CHANGES to make 8.3 systems happy. If
> this is done we can add a make rule to update hbverbld.h
> when CHANGES changed. [ as a side effect some ugly kludges
> could be deleted which aim to handle this case. ] [ If
> this is done, source/hbpp/Makefile should be touched which
> is best done by Przemek. ]
> Maybe there are better ideas for it though.

Personally I prefer current behavior.
Too much times in the past I had to look for false bug
reports due to old or not fully recompiled Harbour code
so I do not like the idea that we begin to update revision
number after each ChangeLog modification. We simply lost
the simplest method to verify user harbour binaries.
I know that it's not perfect but for me it's much better
then nothing.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Sep  9 13:38:41 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep  9 13:38:47 2009
Subject: [Harbour] dbRename() or equivalent
In-Reply-To: <93E3ECA7-F832-41F4-AF8A-04A1B63A0333@syenar.hu>
References: <93E3ECA7-F832-41F4-AF8A-04A1B63A0333@syenar.hu>
Message-ID: <20090909173840.GB16219@uran.home.aster.pl>

On Wed, 09 Sep 2009, Szak?ts Viktor wrote:
> Hi All,
> What is the proper way to rename a table so that it
> also works on remote server?
> We have dbExists(), dbDrop(), we this bit seems to be
> missing. Or I'm missing some method which can be used
> to get the same effect.
> Remote rename is used when modifying structure of
> existing tables, manually implemented (somewhat more
> intelligent/efficient) packing and a few other scenarios.

I'll add dbRename() - it should be part of core code supported
by all RDDs.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Sep  9 13:49:32 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 13:49:42 2009
Subject: [Harbour] Question about revision number and harbour -build update
In-Reply-To: <20090909173652.GA16219@uran.home.aster.pl>
References: <WWopapUh.1252494158.0261020.marcobra@82.105.36.210>
	<709887AA-818C-49AD-836E-DA73C040EB8D@syenar.hu>
	<20090909173652.GA16219@uran.home.aster.pl>
Message-ID: <709DECF2-EE98-4C7F-9DAF-FEB45F5AEFA0@syenar.hu>

You are right.

[ IOW recompiling a single file or module doesn't bump Harbour
to the new version number by definition. ]

Brgds,
Viktor

On 2009.09.09., at 19:36, Przemyslaw Czerpak wrote:

> On Wed, 09 Sep 2009, Szak?ts Viktor wrote:
>
> Hi,
>
>> To make that, I think we should finally make the step to
>> rename ChangeLog to CHANGES to make 8.3 systems happy. If
>> this is done we can add a make rule to update hbverbld.h
>> when CHANGES changed. [ as a side effect some ugly kludges
>> could be deleted which aim to handle this case. ] [ If
>> this is done, source/hbpp/Makefile should be touched which
>> is best done by Przemek. ]
>> Maybe there are better ideas for it though.
>
> Personally I prefer current behavior.
> Too much times in the past I had to look for false bug
> reports due to old or not fully recompiled Harbour code
> so I do not like the idea that we begin to update revision
> number after each ChangeLog modification. We simply lost
> the simplest method to verify user harbour binaries.
> I know that it's not perfect but for me it's much better
> then nothing.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Sep  9 13:49:59 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 13:50:05 2009
Subject: [Harbour] dbRename() or equivalent
In-Reply-To: <20090909173840.GB16219@uran.home.aster.pl>
References: <93E3ECA7-F832-41F4-AF8A-04A1B63A0333@syenar.hu>
	<20090909173840.GB16219@uran.home.aster.pl>
Message-ID: <B55BE755-DCA0-4D4A-94D9-7CCCA7C1AF4C@syenar.hu>

Great news, thank you very much.

Brgds,
Viktor

On 2009.09.09., at 19:38, Przemyslaw Czerpak wrote:

> On Wed, 09 Sep 2009, Szak?ts Viktor wrote:
>> Hi All,
>> What is the proper way to rename a table so that it
>> also works on remote server?
>> We have dbExists(), dbDrop(), we this bit seems to be
>> missing. Or I'm missing some method which can be used
>> to get the same effect.
>> Remote rename is used when modifying structure of
>> existing tables, manually implemented (somewhat more
>> intelligent/efficient) packing and a few other scenarios.
>
> I'll add dbRename() - it should be part of core code supported
> by all RDDs.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Wed Sep  9 13:52:49 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep  9 13:52:57 2009
Subject: [Harbour] 'sqlite3' is skipped in clean phase, but isn't
	skipped  in install phase.
In-Reply-To: <003301ca3150$ad246a30$076d3e90$@Bisz@t-online.hu>
References: <D1A9ACEE-F0E6-4FDC-A090-0E39302312F3@syenar.hu>
	<003301ca3150$ad246a30$076d3e90$@Bisz@t-online.hu>
Message-ID: <20090909175249.GC16219@uran.home.aster.pl>

On Wed, 09 Sep 2009, Bisz Istv?n wrote:

Hi,

> sqlite.i386                             3.3.6-2                        installed
> sqlite-devel.i386                       3.3.6-2                        installed

It's quite old version.

If you have a while please try to update hbsqlit3.c code to work
with you SQLITE3 version, i.e. at line 441 we have:

   if( pHbSqlite3 && pHbSqlite3->db )
   {
      hb_retni( sqlite3_extended_result_codes(pHbSqlite3->db, hb_parl(2)) );
   }

change it to:

   if( pHbSqlite3 && pHbSqlite3->db )
   {
      /* TODO: verify exact SQLITE3 version in
       * which sqlite3_extended_result_codes() was added
       */
#if SQLITE_VERSION_NUMBER > 3003006
      hb_retni( sqlite3_extended_result_codes(pHbSqlite3->db, hb_parl(2)) );
#else
      hb_retni( -1 );
#endif
   }

3003006 is you SQLITE3. You can try to invest more time and check
exact SQLITE3 version in which some functions appeared, i.e. if
functions was intorduce im 3.4.0 then cahnge #if condition to:
   #if SQLITE_VERSION_NUMBER >= 3004000
otherwise use > instead of >= and leave TODO: note so other developers
will know that the exact SQLITE3 version was not precisely defined and
can update it in the future. If you send to us your modifications then
we can commit them to SVN or if you want then we can give you an account
so you can make it yourself.

best regards,
Przemek
From ice at extreme.hu  Wed Sep  9 14:03:23 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Wed Sep  9 14:03:30 2009
Subject: [Harbour] 'sqlite3' is skipped in clean phase, but isn't
	skipped in install phase.
In-Reply-To: <20090909175249.GC16219@uran.home.aster.pl>
References: <D1A9ACEE-F0E6-4FDC-A090-0E39302312F3@syenar.hu>
	<003301ca3150$ad246a30$076d3e90$@Bisz@t-online.hu>
	<20090909175249.GC16219@uran.home.aster.pl>
Message-ID: <alpine.GSO.2.00.0909092002530.26525@dawn.royalcomp.hu>

On Wed, 9 Sep 2009, Przemyslaw Czerpak wrote:

hi,

 > change it to:
 > 
 >    if( pHbSqlite3 && pHbSqlite3->db )
 >    {
 >       /* TODO: verify exact SQLITE3 version in
 >        * which sqlite3_extended_result_codes() was added
 >        */
 > #if SQLITE_VERSION_NUMBER > 3003006
 >       hb_retni( sqlite3_extended_result_codes(pHbSqlite3->db, hb_parl(2)) );
 > #else
 >       hb_retni( -1 );
 > #endif

a cursory look suggests 3.3.8 was the first to have it.


-- 
[-]

mkdir /nonexistent
From m.lacecilia at gmail.com  Wed Sep  9 14:11:56 2009
From: m.lacecilia at gmail.com (Maurizio la Cecilia)
Date: Wed Sep  9 14:12:11 2009
Subject: R: R: [Harbour] Getting errors and warnings in MinGW compile
In-Reply-To: <!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAAGUCDLC1GcxMh89Lpz/l+wYBAAAAAA==@gmail.com>
References: <4aa657d4.9e15f10a.5d53.ffff87a5SMTPIN_ADDED@mx.google.com><!&!AAAAAAAAAAAYAAAAAAAAAESGsVuZMAhNnqDOKdTTUVyipAEAEAAAAHdZKRFvqttOnDdzGi4Mf6gBAAAAAA==@gmail.com><!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAABhOImxPagNDmGlGFbCqYh4BAAAAAA==@gmail.com><20090909080938.GA22830@uran.home.aster.pl>
	<!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAAGUCDLC1GcxMh89Lpz/l+wYBAAAAAA==@gmail.com>
Message-ID: <!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAADRc6bCAR+BKq3GoCji0nFMBAAAAAA==@gmail.com>

After this commit:

2009-09-09 18:12 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * bin/postinst.bat
    ! Fixed for dos shells. (cmdline lenght problems, end of .cfg
      extension was clipped on the longest line to .cf)

all returned to work fine.
Thanks.
Best regards.
Maurizio la Cecilia               

 
 

> -----Messaggio originale-----
> Da: Maurizio la Cecilia [mailto:m.lacecilia@gmail.com] 
> Inviato: mercoled? 9 settembre 2009 10.48
> A: 'Harbour Project Main Developer List.'
> Oggetto: R: R: [Harbour] Getting errors and warnings in MinGW compile
> 
> 
> > Da: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl] 
> > Inviato: mercoled? 9 settembre 2009 10.10
> > A: Harbour Project Main Developer List.
> > Oggetto: Re: R: [Harbour] Getting errors and warnings in 
> MinGW compile
> > 
> > On Wed, 09 Sep 2009, Maurizio la Cecilia wrote:
> > 
> > Hi,
> > 
> > > I confirm the persistence of the problem also after updating to:
> > > ChangeLog 12446 2009-09-09 00:24:54Z druzus
> > > No other one reports same problem?
> > 
> > There is no problem with current SVN code but we have
> > never ending problem with asking users to make _CLEAN_
> > build after syncing with SVN and before reporting problems ;-)
> > 
> > Please execute:
> >    make clean
> > before:
> >    make
> > 
> > I believe it will help. If not then please report the problem.
> > Otherwise such messages only confuse other users.
> > 
> > best regards,
> > Przemek
> > 
> > 
> 
> As said in my first message:
> 
> > The commands given to compile are:
> > 
> > Win-make clean
> > Win-make install
> > 
> 
> Thus, if i don't missed something, the problem is real.
> I ever compiled fine using those commands.
> I advise also that, to avoid conflicts with old versions, i 
> tried to compile
> after a fresh checkout from repository, but the result is the same.
> Anyway, if i risk only to confuse other users, don't worry about this
> problem if seems to be only of mine.
> Best regards,
> Maurizio
> 
> 
> 

From druzus at acn.waw.pl  Wed Sep  9 14:20:43 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep  9 14:20:49 2009
Subject: [Harbour] There is a function FileValid() in the Harbour?
In-Reply-To: <F0134482-3C96-4716-8EF9-BC3920A02721@syenar.hu>
References: <25367075.post@talk.nabble.com>
	<DC7AA81F-2891-49C0-B116-49EC0629A9BC@syenar.hu>
	<25367601.post@talk.nabble.com>
	<F0134482-3C96-4716-8EF9-BC3920A02721@syenar.hu>
Message-ID: <20090909182043.GD16219@uran.home.aster.pl>

On Wed, 09 Sep 2009, Szak?ts Viktor wrote:

Hi,

> That's because hbct seems to miss this ct function, but xhb has it.
> Hopefully someone will copy these to Harbour, until then you can do
> it locally.

When I was updating HBCT functions in Harbour I intentionally didn't
copy diskutil.prg from xHarbour.
It's the only one file which still exist in my harbour/contrib/hbct/TODO/
directory. Unfortunately all functions inside have to be implemented
from scratch.
I only implemented RENAMEFILE() as synonym of FILEMOVE() in
harbour/contrib/hbct/files.c.

If someone needs it and accept xHarbour implementation then as temporary
solution he can simply link with his code source/ct/diskutil.prg from
xHarbour CVS but it will be very nice if he can implement it correctly
though it's not trivial job.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Sep  9 14:22:34 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep  9 14:22:40 2009
Subject: [Harbour] 'sqlite3' is skipped in clean phase, but isn't
	skipped in install phase.
In-Reply-To: <alpine.GSO.2.00.0909092002530.26525@dawn.royalcomp.hu>
References: <D1A9ACEE-F0E6-4FDC-A090-0E39302312F3@syenar.hu>
	<20090909175249.GC16219@uran.home.aster.pl>
	<alpine.GSO.2.00.0909092002530.26525@dawn.royalcomp.hu>
Message-ID: <20090909182234.GE16219@uran.home.aster.pl>

On Wed, 09 Sep 2009, Tamas TEVESZ wrote:

Hi,

>  > change it to:
>  >    if( pHbSqlite3 && pHbSqlite3->db )
>  >    {
>  >       /* TODO: verify exact SQLITE3 version in
>  >        * which sqlite3_extended_result_codes() was added
>  >        */
>  > #if SQLITE_VERSION_NUMBER > 3003006
>  >       hb_retni( sqlite3_extended_result_codes(pHbSqlite3->db, hb_parl(2)) );
>  > #else
>  >       hb_retni( -1 );
>  > #endif
> a cursory look suggests 3.3.8 was the first to have it.

Thank you.
So this #if condition should be changed to:
      #if SQLITE_VERSION_NUMBER >= 3003008
and TODO note removed.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Sep  9 14:38:15 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 14:38:23 2009
Subject: R: R: [Harbour] Getting errors and warnings in MinGW compile
In-Reply-To: <!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAADRc6bCAR+BKq3GoCji0nFMBAAAAAA==@gmail.com>
References: <4aa657d4.9e15f10a.5d53.ffff87a5SMTPIN_ADDED@mx.google.com><!&!AAAAAAAAAAAYAAAAAAAAAESGsVuZMAhNnqDOKdTTUVyipAEAEAAAAHdZKRFvqttOnDdzGi4Mf6gBAAAAAA==@gmail.com><!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAABhOImxPagNDmGlGFbCqYh4BAAAAAA==@gmail.com><20090909080938.GA22830@uran.home.aster.pl>
	<!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAAGUCDLC1GcxMh89Lpz/l+wYBAAAAAA==@gmail.com>
	<!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAADRc6bCAR+BKq3GoCji0nFMBAAAAAA==@gmail.com>
Message-ID: <BEA74842-BD1C-41C2-BED0-F3C142098F5B@syenar.hu>

I didn't aim to fix anything based on your report,
just added some new unrelated features.

You probably fixed your environment in between.

Notice that such lines:
> c:/include\common.ch(85) Warning W0001  Redefinition or
> duplicate definition

are telling almost 100% that something IS wrong with your
environment if your SVN source tree otherwise resides in
C:\CVS\harbour (which is seen in other log lines in your report).

Brgds,
Viktor

On 2009.09.09., at 20:11, Maurizio la Cecilia wrote:

> After this commit:
>
> 2009-09-09 18:12 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>  * bin/postinst.bat
>    ! Fixed for dos shells. (cmdline lenght problems, end of .cfg
>      extension was clipped on the longest line to .cf)
>
> all returned to work fine.
> Thanks.
> Best regards.
> Maurizio la Cecilia
>
>
>
>
>> -----Messaggio originale-----
>> Da: Maurizio la Cecilia [mailto:m.lacecilia@gmail.com]
>> Inviato: mercoled? 9 settembre 2009 10.48
>> A: 'Harbour Project Main Developer List.'
>> Oggetto: R: R: [Harbour] Getting errors and warnings in MinGW compile
>>
>>
>>> Da: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl]
>>> Inviato: mercoled? 9 settembre 2009 10.10
>>> A: Harbour Project Main Developer List.
>>> Oggetto: Re: R: [Harbour] Getting errors and warnings in
>> MinGW compile
>>>
>>> On Wed, 09 Sep 2009, Maurizio la Cecilia wrote:
>>>
>>> Hi,
>>>
>>>> I confirm the persistence of the problem also after updating to:
>>>> ChangeLog 12446 2009-09-09 00:24:54Z druzus
>>>> No other one reports same problem?
>>>
>>> There is no problem with current SVN code but we have
>>> never ending problem with asking users to make _CLEAN_
>>> build after syncing with SVN and before reporting problems ;-)
>>>
>>> Please execute:
>>>   make clean
>>> before:
>>>   make
>>>
>>> I believe it will help. If not then please report the problem.
>>> Otherwise such messages only confuse other users.
>>>
>>> best regards,
>>> Przemek
>>>
>>>
>>
>> As said in my first message:
>>
>>> The commands given to compile are:
>>>
>>> Win-make clean
>>> Win-make install
>>>
>>
>> Thus, if i don't missed something, the problem is real.
>> I ever compiled fine using those commands.
>> I advise also that, to avoid conflicts with old versions, i
>> tried to compile
>> after a fresh checkout from repository, but the result is the same.
>> Anyway, if i risk only to confuse other users, don't worry about this
>> problem if seems to be only of mine.
>> Best regards,
>> Maurizio
>>
>>
>>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Sep  9 14:42:10 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 14:42:22 2009
Subject: [Harbour] There is a function FileValid() in the Harbour?
In-Reply-To: <20090909182043.GD16219@uran.home.aster.pl>
References: <25367075.post@talk.nabble.com>
	<DC7AA81F-2891-49C0-B116-49EC0629A9BC@syenar.hu>
	<25367601.post@talk.nabble.com>
	<F0134482-3C96-4716-8EF9-BC3920A02721@syenar.hu>
	<20090909182043.GD16219@uran.home.aster.pl>
Message-ID: <9452E72C-2277-4208-9E27-3477380C19C7@syenar.hu>

>> That's because hbct seems to miss this ct function, but xhb has it.
>> Hopefully someone will copy these to Harbour, until then you can do
>> it locally.
>
> When I was updating HBCT functions in Harbour I intentionally didn't
> copy diskutil.prg from xHarbour.
> It's the only one file which still exist in my harbour/contrib/hbct/ 
> TODO/
> directory. Unfortunately all functions inside have to be implemented
> from scratch.
> I only implemented RENAMEFILE() as synonym of FILEMOVE() in
> harbour/contrib/hbct/files.c.
>
> If someone needs it and accept xHarbour implementation then as  
> temporary
> solution he can simply link with his code source/ct/diskutil.prg from
> xHarbour CVS but it will be very nice if he can implement it correctly
> though it's not trivial job.

I took a quick look in the afternoon and found the whole file not really
suited for Harbour. It has a whole range of 'no-no's starting from using
'format' as external command to small things like formatting and general
coding style (like not using DEFAULT TO but some unique replacement
instead). Such code usually has a multitude of other problems.

So I'd vote to include only what's absolutely necessary, and/or done  
right
(or ported right).

Brgds,
Viktor

From vouchcac at users.sourceforge.net  Wed Sep  9 15:22:45 2009
From: vouchcac at users.sourceforge.net (vouchcac@users.sourceforge.net)
Date: Wed Sep  9 15:22:51 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12455] trunk/harbour
Message-ID: <E1MlSkf-0002Mv-JM@74yxhf1.ch3.sourceforge.com>

Revision: 12455
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12455&view=rev
Author:   vouchcac
Date:     2009-09-09 19:22:44 +0000 (Wed, 09 Sep 2009)

Log Message:
-----------

2009-09-09 12:20 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * contrib/gtqtc/gtqtc.cpp
    !  toLatin1().data()
          =>
       toAscii().data()

       I am unable to build gtqtc.lib so please test it.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtqtc/gtqtc.cpp


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bedipritpal at hotmail.com  Wed Sep  9 15:26:57 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Sep  9 15:27:02 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12455] trunk/harbour
In-Reply-To: <E1MlSkf-0002Mv-JM@74yxhf1.ch3.sourceforge.com>
References: <E1MlSkf-0002Mv-JM@74yxhf1.ch3.sourceforge.com>
Message-ID: <25371737.post@talk.nabble.com>


Hello Viktor


vouchcac wrote:
> 
> 2009-09-09 12:20 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>   * contrib/gtqtc/gtqtc.cpp
>     !  toLatin1().data()
>           =>
>        toAscii().data()
> 
>        I am unable to build gtqtc.lib so please test it.
> 

I am not sure if the commit went ok because I got error at the end.
But the message above is posted by source-forge.

Also I cannot build gtqtc.lib:


E:\harbour\contrib\gtqtc>make install
! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 sh.exe install
! HB_USER_PRGFLAGS: -gc3
! HB_USER_CFLAGS: -DHB_FM_STATISTICS_OFF -DHB_GUI
! HB_INSTALL_PREFIX: e:\harbour
! HB_HOST_PLAT: win (x86)  HB_SHELL: nt
! HB_PLATFORM: win (x86) (autodetected)
! HB_COMPILER: mingw
! Component: 'openssl' not found
! Component: 'gpm' not supported on win platform
! Component: 'slang' not found
! Component: 'curses' not found
! Component: 'x11' not found
! Component: 'wattcp/watt-32' not supported on win platform
make[1]: *** No rule to make target `moc_slots.o', needed by `libgtqtc.a'. 
Stop
.
make: *** [descend] Error 2

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-12455--trunk-harbour-tp25371681p25371737.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From Istvan.Bisz at t-online.hu  Wed Sep  9 15:36:44 2009
From: Istvan.Bisz at t-online.hu (=?UTF-8?Q?Bisz_Istv=C3=A1n?=)
Date: Wed Sep  9 15:37:57 2009
Subject: [Harbour] 'sqlite3' is skipped in clean phase,
	but isn't	skipped  in install phase.
In-Reply-To: <20090909175249.GC16219@uran.home.aster.pl>
References: <D1A9ACEE-F0E6-4FDC-A090-0E39302312F3@syenar.hu>	<003301ca3150$ad246a30$076d3e90$@Bisz@t-online.hu>
	<20090909175249.GC16219@uran.home.aster.pl>
Message-ID: <002601ca3184$dd8b2bd0$98a18370$@Bisz@t-online.hu>

Hi Przemek,

I just want to signal a building problem with 'CentOS 5.3' based on 'RedHat Enterprise Linux 5.3'. Just to clarify the stability of the distribution. The RHEL is upgraded from 5.3 to 5.4 just in the last weeks. Yes, the 'sqlite' is quite "old", but is furnished by the RHEL 5.3 too. As I see our common goal is to maintain the compatibility at least with these stable releases too.

Best regards,
Istv?n

-----Original Message-----
From: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl] 
Sent: 2009. szeptember 9. 19:53
To: Harbour Project Main Developer List.
Subject: Re: RE: [Harbour] 'sqlite3' is skipped in clean phase, but isn't skipped in install phase.

On Wed, 09 Sep 2009, Bisz Istv?n wrote:

Hi,

> sqlite.i386                             3.3.6-2                        installed
> sqlite-devel.i386                       3.3.6-2                        installed

It's quite old version.

If you have a while please try to update hbsqlit3.c code to work
with you SQLITE3 version, i.e. at line 441 we have:

   if( pHbSqlite3 && pHbSqlite3->db )
   {
      hb_retni( sqlite3_extended_result_codes(pHbSqlite3->db, hb_parl(2)) );
   }

change it to:

   if( pHbSqlite3 && pHbSqlite3->db )
   {
      /* TODO: verify exact SQLITE3 version in
       * which sqlite3_extended_result_codes() was added
       */
#if SQLITE_VERSION_NUMBER > 3003006
      hb_retni( sqlite3_extended_result_codes(pHbSqlite3->db, hb_parl(2)) );
#else
      hb_retni( -1 );
#endif
   }

3003006 is you SQLITE3. You can try to invest more time and check
exact SQLITE3 version in which some functions appeared, i.e. if
functions was intorduce im 3.4.0 then cahnge #if condition to:
   #if SQLITE_VERSION_NUMBER >= 3004000
otherwise use > instead of >= and leave TODO: note so other developers
will know that the exact SQLITE3 version was not precisely defined and
can update it in the future. If you send to us your modifications then
we can commit them to SVN or if you want then we can give you an account
so you can make it yourself.

best regards,
Przemek


From ice at extreme.hu  Wed Sep  9 15:58:00 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Wed Sep  9 15:58:08 2009
Subject: [Harbour] 'sqlite3' is skipped in clean phase, but isn't
	skipped in install phase.
In-Reply-To: <002601ca3184$dd8b2bd0$98a18370$@Bisz@t-online.hu>
References: <D1A9ACEE-F0E6-4FDC-A090-0E39302312F3@syenar.hu>
	<003301ca3150$ad246a30$076d3e90$@Bisz@t-online.hu>
	<20090909175249.GC16219@uran.home.aster.pl>
	<002601ca3184$dd8b2bd0$98a18370$@Bisz@t-online.hu>
Message-ID: <alpine.GSO.2.00.0909092155260.26525@dawn.royalcomp.hu>

On Wed, 9 Sep 2009, Bisz Istv?n wrote:

hi,

 > I just want to signal a building problem with 'CentOS 5.3' based on 
 > 'RedHat Enterprise Linux 5.3'. Just to clarify the stability of the 
 > distribution. The RHEL is upgraded from 5.3 to 5.4 just in the last 
 > weeks. Yes, the 'sqlite' is quite "old", but is furnished by the 
 > RHEL 5.3 too. As I see our common goal is to maintain the 
 > compatibility at least with these stable releases too.

just for the record, this check will by far not be enough to build hb 
with sqlite 3.3.6.

maybe the least resistance would be for you to not use the 
system-provied sqlite, but use the bundled one, from external/ (except 
i haven't yet figured out how to do that, especially in the 
presence of a system-wide sqlite, but still).

 > If you have a while please try to update hbsqlit3.c code to work
 > with you SQLITE3 version, i.e. at line 441 we have:
 > 
 >    if( pHbSqlite3 && pHbSqlite3->db )
 >    {
 >       hb_retni( sqlite3_extended_result_codes(pHbSqlite3->db, hb_parl(2)) );
 >    }
 > 
 > change it to:
 > 
 >    if( pHbSqlite3 && pHbSqlite3->db )
 >    {
 >       /* TODO: verify exact SQLITE3 version in
 >        * which sqlite3_extended_result_codes() was added
 >        */
 > #if SQLITE_VERSION_NUMBER > 3003006
 >       hb_retni( sqlite3_extended_result_codes(pHbSqlite3->db, hb_parl(2)) );
 > #else
 >       hb_retni( -1 );
 > #endif

-- 
[-]

mkdir /nonexistent
From vszakats at users.sourceforge.net  Wed Sep  9 16:06:26 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep  9 16:06:32 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12456] trunk/harbour
Message-ID: <E1MlTQw-0002eI-Ir@bj8yhf1.ch3.sourceforge.com>

Revision: 12456
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12456&view=rev
Author:   vszakats
Date:     2009-09-09 20:06:25 +0000 (Wed, 09 Sep 2009)

Log Message:
-----------
2009-09-09 22:06 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * contrib/gtqtc/Makefile
    ! Fix little (but fatal) mistake.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtqtc/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Wed Sep  9 16:11:29 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 16:11:44 2009
Subject: [Harbour] 'sqlite3' is skipped in clean phase,
	but isn't	skipped  in install phase.
In-Reply-To: <002601ca3184$dd8b2bd0$98a18370$@Bisz@t-online.hu>
References: <D1A9ACEE-F0E6-4FDC-A090-0E39302312F3@syenar.hu>	<003301ca3150$ad246a30$076d3e90$@Bisz@t-online.hu>
	<20090909175249.GC16219@uran.home.aster.pl>
	<002601ca3184$dd8b2bd0$98a18370$@Bisz@t-online.hu>
Message-ID: <77DE0ABD-E905-4801-97E1-22385D51A54A@syenar.hu>

I don't think anyone disputes that Harbour should build with
old sqlite3 version, but f.e. in my case I couldn't get
_any_ availability information on these functions, so only
someone who does, can make any fixes.

Brgds,
Viktor

On 2009.09.09., at 21:36, Bisz Istv?n wrote:

> Hi Przemek,
>
> I just want to signal a building problem with 'CentOS 5.3' based on  
> 'RedHat Enterprise Linux 5.3'. Just to clarify the stability of the  
> distribution. The RHEL is upgraded from 5.3 to 5.4 just in the last  
> weeks. Yes, the 'sqlite' is quite "old", but is furnished by the  
> RHEL 5.3 too. As I see our common goal is to maintain the  
> compatibility at least with these stable releases too.
>
> Best regards,
> Istv?n
>
> -----Original Message-----
> From: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl]
> Sent: 2009. szeptember 9. 19:53
> To: Harbour Project Main Developer List.
> Subject: Re: RE: [Harbour] 'sqlite3' is skipped in clean phase, but  
> isn't skipped in install phase.
>
> On Wed, 09 Sep 2009, Bisz Istv?n wrote:
>
> Hi,
>
>> sqlite.i386                              
>> 3.3.6-2                        installed
>> sqlite-devel.i386                        
>> 3.3.6-2                        installed
>
> It's quite old version.
>
> If you have a while please try to update hbsqlit3.c code to work
> with you SQLITE3 version, i.e. at line 441 we have:
>
>   if( pHbSqlite3 && pHbSqlite3->db )
>   {
>      hb_retni( sqlite3_extended_result_codes(pHbSqlite3->db, hb_parl 
> (2)) );
>   }
>
> change it to:
>
>   if( pHbSqlite3 && pHbSqlite3->db )
>   {
>      /* TODO: verify exact SQLITE3 version in
>       * which sqlite3_extended_result_codes() was added
>       */
> #if SQLITE_VERSION_NUMBER > 3003006
>      hb_retni( sqlite3_extended_result_codes(pHbSqlite3->db, hb_parl 
> (2)) );
> #else
>      hb_retni( -1 );
> #endif
>   }
>
> 3003006 is you SQLITE3. You can try to invest more time and check
> exact SQLITE3 version in which some functions appeared, i.e. if
> functions was intorduce im 3.4.0 then cahnge #if condition to:
>   #if SQLITE_VERSION_NUMBER >= 3004000
> otherwise use > instead of >= and leave TODO: note so other developers
> will know that the exact SQLITE3 version was not precisely defined and
> can update it in the future. If you send to us your modifications then
> we can commit them to SVN or if you want then we can give you an  
> account
> so you can make it yourself.
>
> best regards,
> Przemek
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From bedipritpal at hotmail.com  Wed Sep  9 17:17:14 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Sep  9 17:17:20 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12454] trunk/harbour
In-Reply-To: <1FE8B3C8-7C44-4B8F-90FE-254B7A239F58@syenar.hu>
References: <E1MlQ6j-0006tl-AM@bj8yhf1.ch3.sourceforge.com>
	<1FE8B3C8-7C44-4B8F-90FE-254B7A239F58@syenar.hu>
Message-ID: <25373283.post@talk.nabble.com>


Hello Viktor


Viktor Szak?ts wrote:
> 
> Could you make the same change for gtqtc?
> 

Done.

But I am not sure how to apply code page in 
some INIT PROC as is shown by Alexandar. To me it 
seems it is application specific. Can you do some tests 
on gtqtc with different code page scenarios? Please 
show us the screen output of the gtqtc compiled code.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-12454--trunk-harbour-tp25368714p25373283.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Wed Sep  9 18:30:30 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 18:30:38 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12454] trunk/harbour
In-Reply-To: <25373283.post@talk.nabble.com>
References: <E1MlQ6j-0006tl-AM@bj8yhf1.ch3.sourceforge.com>
	<1FE8B3C8-7C44-4B8F-90FE-254B7A239F58@syenar.hu>
	<25373283.post@talk.nabble.com>
Message-ID: <753B3105-02B5-4DB5-85B2-A80026D1D8ED@syenar.hu>

Hi Pritpal,

On 2009.09.09., at 23:17, Pritpal Bedi wrote:
> Viktor Szak?ts wrote:
>>
>> Could you make the same change for gtqtc?
>>
>
> Done.
>
> But I am not sure how to apply code page in
> some INIT PROC as is shown by Alexandar. To me it
> seems it is application specific. Can you do some tests
> on gtqtc with different code page scenarios? Please
> show us the screen output of the gtqtc compiled code.

I had to link in hbqt lib, added the three lines of code to
my startup code. I used "IBM850" for CP name, because
852 doesn't seem to be supported in QT. Now, qt_qapplication()
caused the GTQTC app to not respond to input, so I deleted
it, and bingo the display was alright (except few 852-only
chars, but even these weren't garbled).

So, except that QT doesn't support all possible CPs, it
seems to work fine.

One thing to fix though is GTQTC and HBQT lib clash. IMO
they should be able to work together in one app.

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep  9 18:34:36 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 18:34:44 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12454] trunk/harbour
In-Reply-To: <753B3105-02B5-4DB5-85B2-A80026D1D8ED@syenar.hu>
References: <E1MlQ6j-0006tl-AM@bj8yhf1.ch3.sourceforge.com>
	<1FE8B3C8-7C44-4B8F-90FE-254B7A239F58@syenar.hu>
	<25373283.post@talk.nabble.com>
	<753B3105-02B5-4DB5-85B2-A80026D1D8ED@syenar.hu>
Message-ID: <7C44C3A6-9010-4DCC-BB97-8A66AE91181C@syenar.hu>

Ops, one/two comment(s) on GTQTC, now that the output is
correct: It's quite slow. (and key modifiers don't work,
but I think I've reported that already).

Also, now that we know this method works, maybe it's
possible to implement it as std hb_gtInfo() setting,
so hbqt isn't needed just to set CP.

Brgds,
Viktor

On 2009.09.10., at 00:30, Viktor Szak?ts wrote:

> Hi Pritpal,
>
> On 2009.09.09., at 23:17, Pritpal Bedi wrote:
>> Viktor Szak?ts wrote:
>>>
>>> Could you make the same change for gtqtc?
>>>
>>
>> Done.
>>
>> But I am not sure how to apply code page in
>> some INIT PROC as is shown by Alexandar. To me it
>> seems it is application specific. Can you do some tests
>> on gtqtc with different code page scenarios? Please
>> show us the screen output of the gtqtc compiled code.
>
> I had to link in hbqt lib, added the three lines of code to
> my startup code. I used "IBM850" for CP name, because
> 852 doesn't seem to be supported in QT. Now, qt_qapplication()
> caused the GTQTC app to not respond to input, so I deleted
> it, and bingo the display was alright (except few 852-only
> chars, but even these weren't garbled).
>
> So, except that QT doesn't support all possible CPs, it
> seems to work fine.
>
> One thing to fix though is GTQTC and HBQT lib clash. IMO
> they should be able to work together in one app.
>
> Brgds,
> Viktor
>

From harbour.01 at syenar.hu  Wed Sep  9 19:02:09 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep  9 19:02:17 2009
Subject: [Harbour] hbzlib and hbpcre move to /external dir
Message-ID: <808091D5-2003-4617-9878-77F4FC992CA9@syenar.hu>

Hi All,

There is a pending item on my TODO list to move
hbzlib and hbpcre sources under /external tree.

At the same time the detection of externally available
versions could also be added, and possibility to override
them with usual HB_INC_* vars also. It's probably healthier
to use these on *nix systems anyway.

The other benefit would be that we'd hold all 3rd
party code in one easy to identify spot, which makes
them easier to manage (update/config/strip/distribute).

One consequence is that they'd have to be renamed
to their original lib names (dropping 'hb' prefix).
Plus some additional hbmk[2] tricks will be required.

Is there any reason this move cannot or shouldn't be
made? Or some issues to be aware of?

Brgds,
Viktor

From philb at philb.us  Wed Sep  9 19:08:32 2009
From: philb at philb.us (Phil Barnett)
Date: Wed Sep  9 19:08:39 2009
Subject: [Harbour] hbzlib and hbpcre move to /external dir
In-Reply-To: <808091D5-2003-4617-9878-77F4FC992CA9@syenar.hu>
References: <808091D5-2003-4617-9878-77F4FC992CA9@syenar.hu>
Message-ID: <1252537712.2181.12.camel@SunSpot>

On Thu, 2009-09-10 at 01:02 +0200, Viktor Szak?ts wrote:
> Hi All,
> 
> There is a pending item on my TODO list to move
> hbzlib and hbpcre sources under /external tree.
> 
> At the same time the detection of externally available
> versions could also be added, and possibility to override
> them with usual HB_INC_* vars also. It's probably healthier
> to use these on *nix systems anyway.
> 
> The other benefit would be that we'd hold all 3rd
> party code in one easy to identify spot, which makes
> them easier to manage (update/config/strip/distribute).
> 
> One consequence is that they'd have to be renamed
> to their original lib names (dropping 'hb' prefix).
> Plus some additional hbmk[2] tricks will be required.
> 
> Is there any reason this move cannot or shouldn't be
> made? Or some issues to be aware of?

This was one of my stated goals and we had many discussions about it.

I can't see it as anything but a good idea that should be done asap.

BTW, great work on the beta process. Amazing work!

From vszakats at users.sourceforge.net  Wed Sep  9 19:42:22 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep  9 19:42:28 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12457] trunk/harbour
Message-ID: <E1MlWnu-0000Vw-Me@3kljzd1.ch3.sourceforge.com>

Revision: 12457
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12457&view=rev
Author:   vszakats
Date:     2009-09-09 23:42:21 +0000 (Wed, 09 Sep 2009)

Log Message:
-----------
2009-09-10 01:41 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * source/hbpcre/Makefile
  * config/linux/sunpro.mk
  * config/sunos/sunpro.mk
    * Moved hbpcre lib specific sunpro compiler option tweaks to
      lib local Makefile.

  * config/detect.mk
    + Added zlib and pcre lib detection. (not yet used)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/detect.mk
    trunk/harbour/config/linux/sunpro.mk
    trunk/harbour/config/sunos/sunpro.mk
    trunk/harbour/source/hbpcre/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Wed Sep  9 20:53:59 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep  9 20:54:05 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12458] trunk/harbour
Message-ID: <E1MlXvD-00069u-H1@d5vjzd1.ch3.sourceforge.com>

Revision: 12458
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12458&view=rev
Author:   vszakats
Date:     2009-09-10 00:53:58 +0000 (Thu, 10 Sep 2009)

Log Message:
-----------
2009-09-10 02:45 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * include/hbzlib.ch
    * Minor formatting.

  * source/hbpcre/Makefile
    ! Fixed missing global.mk from prev commit.

  * source/hbpcre/Makefile
  - source/hbpcre/_hbconf.h
  - source/hbpcre/_hbpcreg.c
  + source/hbpcre/pcreglob.c
  * source/hbpcre/config.h
  * source/hbpcre/cnv_o2hb.bat
  * source/hbpcre/cnv_hb2o.bat
    + Modified to not require extra Harbour source file. _hbpcreg.c
      wasn't necessary even before, as this initialization is
      done from init code in hbrtl/hbregex.c.
    % Reduced content of local config stub _hbconf.h to just three
      lines. We don't need to suppress warnings anymore as we have
      HB_BUILD_WARN build option to control that, the rest is solved
      by adding such options to local Makefile.
    * Changed to use config.h instead of local stub (which
      is now just three lines and only needed to support dynlib
      build pass).

  * source/hbpcre/pcrevutf.c
  * source/hbpcre/pcreconf.c
  * source/hbpcre/pcreinfo.c
  * source/hbpcre/pcremktb.c
  * source/hbpcre/config.h
  * source/hbpcre/pcrenewl.c
  * source/hbpcre/pcreucd.c
  * source/hbpcre/pcreoutf.c
  * source/hbpcre/chartabs.c
  * source/hbpcre/pcrerefc.c
  * source/hbpcre/pcreget.c
  * source/hbpcre/pcrefinf.c
  * source/hbpcre/pcretryf.c
  * source/hbpcre/pcreexec.c
  * source/hbpcre/pcretabs.c
  * source/hbpcre/pcredfa.c
  * source/hbpcre/pcrever.c
  * source/hbpcre/pcrecomp.c
  * source/hbpcre/pcrexcls.c
  * source/hbpcre/pcrestud.c
    * Restored some original code after above changes.
      (config inclusion logic)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/include/hbzlib.ch
    trunk/harbour/source/hbpcre/Makefile
    trunk/harbour/source/hbpcre/chartabs.c
    trunk/harbour/source/hbpcre/cnv_hb2o.bat
    trunk/harbour/source/hbpcre/cnv_o2hb.bat
    trunk/harbour/source/hbpcre/config.h
    trunk/harbour/source/hbpcre/pcrecomp.c
    trunk/harbour/source/hbpcre/pcreconf.c
    trunk/harbour/source/hbpcre/pcredfa.c
    trunk/harbour/source/hbpcre/pcreexec.c
    trunk/harbour/source/hbpcre/pcrefinf.c
    trunk/harbour/source/hbpcre/pcreget.c
    trunk/harbour/source/hbpcre/pcreinfo.c
    trunk/harbour/source/hbpcre/pcremktb.c
    trunk/harbour/source/hbpcre/pcrenewl.c
    trunk/harbour/source/hbpcre/pcreoutf.c
    trunk/harbour/source/hbpcre/pcrerefc.c
    trunk/harbour/source/hbpcre/pcrestud.c
    trunk/harbour/source/hbpcre/pcretabs.c
    trunk/harbour/source/hbpcre/pcretryf.c
    trunk/harbour/source/hbpcre/pcreucd.c
    trunk/harbour/source/hbpcre/pcrever.c
    trunk/harbour/source/hbpcre/pcrevutf.c
    trunk/harbour/source/hbpcre/pcrexcls.c

Added Paths:
-----------
    trunk/harbour/source/hbpcre/pcreglob.c

Removed Paths:
-------------
    trunk/harbour/source/hbpcre/_hbconf.h
    trunk/harbour/source/hbpcre/_hbpcreg.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From carozodequilmes at gmail.com  Wed Sep  9 21:00:38 2009
From: carozodequilmes at gmail.com (CarozoDeQuilmes)
Date: Wed Sep  9 21:00:44 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12448] trunk/harbour
In-Reply-To: <E1MlI0N-0002Lk-Tp@d5vjzd1.ch3.sourceforge.com>
References: <E1MlI0N-0002Lk-Tp@d5vjzd1.ch3.sourceforge.com>
Message-ID: <578c73340909091800k6322cc5ar30352d3a58f59218@mail.gmail.com>

Many thanks !!! It works very fine
CdQ

On Wed, Sep 9, 2009 at 4:54 AM, <vouchcac@users.sourceforge.net> wrote:

> Revision: 12448
>
> http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12448&view=rev
> Author:   vouchcac
> Date:     2009-09-09 07:54:14 +0000 (Wed, 09 Sep 2009)
>
> Log Message:
> -----------
> 2009-09-09 00:49 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>  * contrib/hbqt/hbqt_slots.cpp
>  * contrib/hbqt/hbqt_slots.h
>  * contrib/hbqt/moc_slots.cpp
>    + Implemented few more signal/slots as reqested by CdQ.
>    ! Introduced    && hb_vmRequestReenter()  in the condition statment
> executing a block.
>      Przemek, please check me. It still GPFs in MT scenarios.
>
> Modified Paths:
> --------------
>    trunk/harbour/ChangeLog
>    trunk/harbour/contrib/hbqt/hbqt_slots.cpp
>    trunk/harbour/contrib/hbqt/hbqt_slots.h
>    trunk/harbour/contrib/hbqt/moc_slots.cpp
>
>
> This was sent by the SourceForge.net collaborative development platform,
> the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
QAC (I want something comfortable !!!) - Incremental Compilation with all
MiniGUIs versions
QAC (Quiero Algo C?modo !!!) - Compilaci?n Incremental con todas las
versiones de MiniGUI

Download: www.CarozoDeQuilmes.com.ar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090909/35f5b31a/attachment.html
From ice at extreme.hu  Wed Sep  9 21:19:08 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Wed Sep  9 21:19:15 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12458] trunk/harbour
In-Reply-To: <E1MlXvD-00069u-H1@d5vjzd1.ch3.sourceforge.com>
References: <E1MlXvD-00069u-H1@d5vjzd1.ch3.sourceforge.com>
Message-ID: <alpine.GSO.2.00.0909100312570.13711@dawn.royalcomp.hu>

On Thu, 10 Sep 2009, vszakats@users.sourceforge.net wrote:

hi,

 > Revision: 12458
 >           http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12458&view=rev
 > Author:   vszakats
 > Date:     2009-09-10 00:53:58 +0000 (Thu, 10 Sep 2009)

breaks all (well, all i have) watcoms.

! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh   
! HB_INSTALL_PREFIX: /home/ice/w/xhb/hbci/inst/dos/watcom/cpp
! HB_BUILD_DEBUG: yes
! HB_BUILD_OPTIM: no
! HB_BUILD_MODE: cpp
! HB_CONTRIBLIBS: no
! HB_HOST_PLAT: linux  HB_SHELL: sh
! HB_PLATFORM: dos (x86) 
! HB_COMPILER: watcom 
! HB_BIN_COMPILE not specified. Automatically set to: /usr/bin
! Component: 'zlib' location not specified
! Component: 'pcre' location not specified
! Component: 'openssl' not supported with watcom compiler
! Component: 'gpm' explicitly disabled
! Component: 'slang' explicitly disabled
! Component: 'curses' location not specified
! Component: 'x11' location not specified
! Component: 'wattcp/watt-32' location not specified
! REVISION: 12458
[...]
wpp386   -fo=pcreget.obj  ../../../pcreget.c
wpp386   -fo=pcreglob.obj  ../../../pcreglob.c
../../../pcreglob.c(56): Error! E042: col(49) symbol 'pcre_malloc' already defined
../../../pcre.h(256): Note! N392: col(23) definition: 'void * (* pcre_malloc)( unsigned )'
../../../pcreglob.c(57): Error! E042: col(47) symbol 'pcre_free' already defined
../../../pcre.h(257): Note! N392: col(23) definition: 'void (* pcre_free)( void * )'
../../../pcreglob.c(58): Error! E042: col(55) symbol 'pcre_stack_malloc' already defined
../../../pcre.h(258): Note! N392: col(23) definition: 'void * (* pcre_stack_malloc)( unsigned )'
../../../pcreglob.c(59): Error! E042: col(53) symbol 'pcre_stack_free' already defined
../../../pcre.h(259): Note! N392: col(23) definition: 'void (* pcre_stack_free)( void * )'
../../../pcreglob.c(60): Error! E042: col(64) symbol 'pcre_callout' already defined
../../../pcre.h(260): Note! N392: col(23) definition: 'int (* pcre_callout)( pcre_callout_block * )'
make[3]: *** [pcreglob.obj] Error 8
make[2]: *** [descend] Error 2
make[1]: *** [hbpcre] Error 2
make: *** [source] Error 2

same with linux native, linux x os2, linux x win.

-- 
[-]

mkdir /nonexistent
From vouchcac at users.sourceforge.net  Thu Sep 10 00:03:19 2009
From: vouchcac at users.sourceforge.net (vouchcac@users.sourceforge.net)
Date: Thu Sep 10 00:03:26 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12459] trunk/harbour
Message-ID: <E1MlasR-0007St-06@dn4whf1.ch3.sourceforge.com>

Revision: 12459
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12459&view=rev
Author:   vouchcac
Date:     2009-09-10 04:03:15 +0000 (Thu, 10 Sep 2009)

Log Message:
-----------
2009-09-09 20:58 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * include/hbgtinfo.ch
    + #define HB_GTI_CODEC  60

  * contrib/gtqtc/gtqtc.h
  * contrib/gtqtc/gtqtc.cpp
    + Implemented CODEC support. 
      USAGE: 
         hb_gtInfo( HB_GTI_CODEC, "Windows-1251" )
         hb_setCodePage( "RU1251" ) 
            Please test as I have never used any codepage.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtqtc/gtqtc.cpp
    trunk/harbour/contrib/gtqtc/gtqtc.h
    trunk/harbour/include/hbgtinfo.ch


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From alxokhotnikov at gmail.com  Thu Sep 10 01:09:13 2009
From: alxokhotnikov at gmail.com (Alexandr Okhotnikov)
Date: Thu Sep 10 01:09:20 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12454] trunk/harbour
In-Reply-To: <E1MlQ6j-0006tl-AM@bj8yhf1.ch3.sourceforge.com>
References: <E1MlQ6j-0006tl-AM@bj8yhf1.ch3.sourceforge.com>
Message-ID: <d6fa31440909092209m4819cda7i383337dbd42f34a7@mail.gmail.com>

Hi

Everything works fine, thank you very much

2009/9/9  <vouchcac@users.sourceforge.net>:
> Revision: 12454
> ? ? ? ? ?http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12454&view=rev
> Author: ? vouchcac
> Date: ? ? 2009-09-09 16:33:18 +0000 (Wed, 09 Sep 2009)
>
> Log Message:
> -----------
> 2009-09-09 09:24 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
> ?* contrib/hbqt/generator/hbqtgen.prg
> ? ?! ?cCmd := 'hb_retc( ' + cCmn + '.toLatin1().data()' + ' )'
> ? ? ? ? ? ?=>
> ? ? ? cCmd := 'hb_retc( ' + cCmn + '.toAscii().data()' + ' )'
>
> ? ? ?This change is initiated after Alexandr Okhotnikov's message and seems
> ? ? ?to be working harmless with default code page. I will request to Alexsnder
> ? ? ?to test it deeply and post his results to this list.
From vszakats at users.sourceforge.net  Thu Sep 10 03:00:51 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 10 03:00:56 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12460] trunk/harbour
Message-ID: <E1MldeF-00039U-D8@dn4whf1.ch3.sourceforge.com>

Revision: 12460
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12460&view=rev
Author:   vszakats
Date:     2009-09-10 07:00:48 +0000 (Thu, 10 Sep 2009)

Log Message:
-----------
2009-09-10 08:57 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * include/hbgtinfo.ch
  + contrib/gtqtc/hbgtqtc.ch
  * contrib/gtqtc/gtqtc.h
  * contrib/gtqtc/Makefile
    * Moved HB_GTI_CODEC local to GT. Pls never add GT specific
      (especially non-core) HB_GTI_* settings to core header.
    * Renamed HB_GTI_CODEC to HB_GTI_QTCODEC.
    ! Fix to not install non-public header gtqtc.h.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtqtc/Makefile
    trunk/harbour/contrib/gtqtc/gtqtc.cpp
    trunk/harbour/contrib/gtqtc/gtqtc.h
    trunk/harbour/include/hbgtinfo.ch

Added Paths:
-----------
    trunk/harbour/contrib/gtqtc/hbgtqtc.ch


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Thu Sep 10 03:02:00 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 10 03:02:05 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12461]
	trunk/harbour/ChangeLog
Message-ID: <E1MldfM-0003CR-43@dn4whf1.ch3.sourceforge.com>

Revision: 12461
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12461&view=rev
Author:   vszakats
Date:     2009-09-10 07:01:55 +0000 (Thu, 10 Sep 2009)

Log Message:
-----------
missed file from last entry

Modified Paths:
--------------
    trunk/harbour/ChangeLog


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Thu Sep 10 03:07:35 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 10 03:07:45 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12458] trunk/harbour
In-Reply-To: <alpine.GSO.2.00.0909100312570.13711@dawn.royalcomp.hu>
References: <E1MlXvD-00069u-H1@d5vjzd1.ch3.sourceforge.com>
	<alpine.GSO.2.00.0909100312570.13711@dawn.royalcomp.hu>
Message-ID: <A714E34D-3C44-40DE-BAA2-C43041D66A06@syenar.hu>

Thanks, I can confirm, but I'm unsure how to fix it.

Brgds,
Viktor

On 2009.09.10., at 03:19, Tamas TEVESZ wrote:

> On Thu, 10 Sep 2009, vszakats@users.sourceforge.net wrote:
>
> hi,
>
>> Revision: 12458
>>          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12458&view=rev
>> Author:   vszakats
>> Date:     2009-09-10 00:53:58 +0000 (Thu, 10 Sep 2009)
>
> breaks all (well, all i have) watcoms.
>
> ! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
> ! MAKE: make 3.81 /bin/sh
> ! HB_INSTALL_PREFIX: /home/ice/w/xhb/hbci/inst/dos/watcom/cpp
> ! HB_BUILD_DEBUG: yes
> ! HB_BUILD_OPTIM: no
> ! HB_BUILD_MODE: cpp
> ! HB_CONTRIBLIBS: no
> ! HB_HOST_PLAT: linux  HB_SHELL: sh
> ! HB_PLATFORM: dos (x86)
> ! HB_COMPILER: watcom
> ! HB_BIN_COMPILE not specified. Automatically set to: /usr/bin
> ! Component: 'zlib' location not specified
> ! Component: 'pcre' location not specified
> ! Component: 'openssl' not supported with watcom compiler
> ! Component: 'gpm' explicitly disabled
> ! Component: 'slang' explicitly disabled
> ! Component: 'curses' location not specified
> ! Component: 'x11' location not specified
> ! Component: 'wattcp/watt-32' location not specified
> ! REVISION: 12458
> [...]
> wpp386   -fo=pcreget.obj  ../../../pcreget.c
> wpp386   -fo=pcreglob.obj  ../../../pcreglob.c
> ../../../pcreglob.c(56): Error! E042: col(49) symbol 'pcre_malloc'  
> already defined
> ../../../pcre.h(256): Note! N392: col(23) definition: 'void * (*  
> pcre_malloc)( unsigned )'
> ../../../pcreglob.c(57): Error! E042: col(47) symbol 'pcre_free'  
> already defined
> ../../../pcre.h(257): Note! N392: col(23) definition: 'void (*  
> pcre_free)( void * )'
> ../../../pcreglob.c(58): Error! E042: col(55) symbol  
> 'pcre_stack_malloc' already defined
> ../../../pcre.h(258): Note! N392: col(23) definition: 'void * (*  
> pcre_stack_malloc)( unsigned )'
> ../../../pcreglob.c(59): Error! E042: col(53) symbol  
> 'pcre_stack_free' already defined
> ../../../pcre.h(259): Note! N392: col(23) definition: 'void (*  
> pcre_stack_free)( void * )'
> ../../../pcreglob.c(60): Error! E042: col(64) symbol 'pcre_callout'  
> already defined
> ../../../pcre.h(260): Note! N392: col(23) definition: 'int (*  
> pcre_callout)( pcre_callout_block * )'
> make[3]: *** [pcreglob.obj] Error 8
> make[2]: *** [descend] Error 2
> make[1]: *** [hbpcre] Error 2
> make: *** [source] Error 2
>
> same with linux native, linux x os2, linux x win.
>
> -- 
> [-]
>
> mkdir /nonexistent
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From m.lacecilia at gmail.com  Thu Sep 10 03:40:39 2009
From: m.lacecilia at gmail.com (Maurizio la Cecilia)
Date: Thu Sep 10 03:40:53 2009
Subject: R: R: R: [Harbour] Getting errors and warnings in MinGW compile
In-Reply-To: <BEA74842-BD1C-41C2-BED0-F3C142098F5B@syenar.hu>
References: <4aa657d4.9e15f10a.5d53.ffff87a5SMTPIN_ADDED@mx.google.com><!&!AAAAAAAAAAAYAAAAAAAAAESGsVuZMAhNnqDOKdTTUVyipAEAEAAAAHdZKRFvqttOnDdzGi4Mf6gBAAAAAA==@gmail.com><!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAABhOImxPagNDmGlGFbCqYh4BAAAAAA==@gmail.com><20090909080938.GA22830@uran.home.aster.pl><!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAAGUCDLC1GcxMh89Lpz/l+wYBAAAAAA==@gmail.com><!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAADRc6bCAR+BKq3GoCji0nFMBAAAAAA==@gmail.com>
	<BEA74842-BD1C-41C2-BED0-F3C142098F5B@syenar.hu>
Message-ID: <!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAAOwogG/CFYxOhWoywCUj2LYBAAAAAA==@gmail.com>

Ok.
As usual, you're right.
I missed some changes in environment variables naming and solved updating
the settings.
Gone confused because was in postinst.bat execution that i received the
error messages.
My apologies to you and Przemek.
Best regards.
Maurizio la Cecilia               
 

> -----Messaggio originale-----
> Da: Viktor Szak?ts [mailto:harbour.01@syenar.hu] 
> Inviato: mercoled? 9 settembre 2009 20.38
> A: Harbour Project Main Developer List.
> Oggetto: Re: R: R: [Harbour] Getting errors and warnings in 
> MinGW compile
> 
> I didn't aim to fix anything based on your report,
> just added some new unrelated features.
> 
> You probably fixed your environment in between.
> 
> Notice that such lines:
> > c:/include\common.ch(85) Warning W0001  Redefinition or
> > duplicate definition
> 
> are telling almost 100% that something IS wrong with your
> environment if your SVN source tree otherwise resides in
> C:\CVS\harbour (which is seen in other log lines in your report).
> 
> Brgds,
> Viktor
> 
> On 2009.09.09., at 20:11, Maurizio la Cecilia wrote:
> 
> > After this commit:
> >
> > 2009-09-09 18:12 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
> >  * bin/postinst.bat
> >    ! Fixed for dos shells. (cmdline lenght problems, end of .cfg
> >      extension was clipped on the longest line to .cf)
> >
> > all returned to work fine.
> > Thanks.
> > Best regards.
> > Maurizio la Cecilia
> >
> >
> >
> >
> >> -----Messaggio originale-----
> >> Da: Maurizio la Cecilia [mailto:m.lacecilia@gmail.com]
> >> Inviato: mercoled? 9 settembre 2009 10.48
> >> A: 'Harbour Project Main Developer List.'
> >> Oggetto: R: R: [Harbour] Getting errors and warnings in 
> MinGW compile
> >>
> >>
> >>> Da: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl]
> >>> Inviato: mercoled? 9 settembre 2009 10.10
> >>> A: Harbour Project Main Developer List.
> >>> Oggetto: Re: R: [Harbour] Getting errors and warnings in
> >> MinGW compile
> >>>
> >>> On Wed, 09 Sep 2009, Maurizio la Cecilia wrote:
> >>>
> >>> Hi,
> >>>
> >>>> I confirm the persistence of the problem also after updating to:
> >>>> ChangeLog 12446 2009-09-09 00:24:54Z druzus
> >>>> No other one reports same problem?
> >>>
> >>> There is no problem with current SVN code but we have
> >>> never ending problem with asking users to make _CLEAN_
> >>> build after syncing with SVN and before reporting problems ;-)
> >>>
> >>> Please execute:
> >>>   make clean
> >>> before:
> >>>   make
> >>>
> >>> I believe it will help. If not then please report the problem.
> >>> Otherwise such messages only confuse other users.
> >>>
> >>> best regards,
> >>> Przemek
> >>>
> >>>
> >>
> >> As said in my first message:
> >>
> >>> The commands given to compile are:
> >>>
> >>> Win-make clean
> >>> Win-make install
> >>>
> >>
> >> Thus, if i don't missed something, the problem is real.
> >> I ever compiled fine using those commands.
> >> I advise also that, to avoid conflicts with old versions, i
> >> tried to compile
> >> after a fresh checkout from repository, but the result is the same.
> >> Anyway, if i risk only to confuse other users, don't worry 
> about this
> >> problem if seems to be only of mine.
> >> Best regards,
> >> Maurizio
> >>
> >>
> >>
> >
> > _______________________________________________
> > Harbour mailing list
> > Harbour@harbour-project.org
> > http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 
> 

From vszakats at users.sourceforge.net  Thu Sep 10 04:02:55 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 10 04:03:01 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12462] trunk/harbour
Message-ID: <E1MlecJ-0004hk-FE@dn4whf1.ch3.sourceforge.com>

Revision: 12462
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12462&view=rev
Author:   vszakats
Date:     2009-09-10 08:02:45 +0000 (Thu, 10 Sep 2009)

Log Message:
-----------
2009-09-10 09:52 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * external/libhpdf/Makefile
    + Enabled for all dos platforms (dos/watcom currently and
      probably all dos builds done on MS-DOS hosts).

  + external/libhpdf/ori_dst
  + external/libhpdf/ori_src
  + external/libhpdf/cnv_hb2o.bat
  + external/libhpdf/cnv_o2hb.bat
  - external/libhpdf/hpdf_annotation.c
  - external/libhpdf/hpdf_annotation.h
  - external/libhpdf/hpdf_array.c
  - external/libhpdf/hpdf_binary.c
  - external/libhpdf/hpdf_boolean.c
  - external/libhpdf/hpdf_catalog.c
  - external/libhpdf/hpdf_catalog.h
  - external/libhpdf/hpdf_conf.h
  - external/libhpdf/hpdf_config.h
  - external/libhpdf/hpdf_consts.h
  - external/libhpdf/hpdf_destination.c
  - external/libhpdf/hpdf_destination.h
  - external/libhpdf/hpdf_dict.c
  - external/libhpdf/hpdf_doc.c
  - external/libhpdf/hpdf_doc.h
  - external/libhpdf/hpdf_doc_png.c
  - external/libhpdf/hpdf_encoder.c
  - external/libhpdf/hpdf_encoder.h
  - external/libhpdf/hpdf_encoder_cns.c
  - external/libhpdf/hpdf_encoder_cnt.c
  - external/libhpdf/hpdf_encoder_jp.c
  - external/libhpdf/hpdf_encoder_kr.c
  - external/libhpdf/hpdf_encrypt.c
  - external/libhpdf/hpdf_encrypt.h
  - external/libhpdf/hpdf_encryptdict.c
  - external/libhpdf/hpdf_encryptdict.h
  - external/libhpdf/hpdf_error.c
  - external/libhpdf/hpdf_error.h
  - external/libhpdf/hpdf_ext_gstate.c
  - external/libhpdf/hpdf_ext_gstate.h
  - external/libhpdf/hpdf_font.c
  - external/libhpdf/hpdf_font.h
  - external/libhpdf/hpdf_font_cid.c
  - external/libhpdf/hpdf_font_tt.c
  - external/libhpdf/hpdf_font_type1.c
  - external/libhpdf/hpdf_fontdef.c
  - external/libhpdf/hpdf_fontdef.h
  - external/libhpdf/hpdf_fontdef_base14.c
  - external/libhpdf/hpdf_fontdef_cid.c
  - external/libhpdf/hpdf_fontdef_cns.c
  - external/libhpdf/hpdf_fontdef_cnt.c
  - external/libhpdf/hpdf_fontdef_jp.c
  - external/libhpdf/hpdf_fontdef_kr.c
  - external/libhpdf/hpdf_fontdef_tt.c
  - external/libhpdf/hpdf_fontdef_type1.c
  - external/libhpdf/hpdf_gstate.c
  - external/libhpdf/hpdf_gstate.h
  - external/libhpdf/hpdf_image.c
  - external/libhpdf/hpdf_image.h
  - external/libhpdf/hpdf_image_png.c
  - external/libhpdf/hpdf_info.c
  - external/libhpdf/hpdf_info.h
  - external/libhpdf/hpdf_list.c
  - external/libhpdf/hpdf_list.h
  - external/libhpdf/hpdf_mmgr.c
  - external/libhpdf/hpdf_mmgr.h
  - external/libhpdf/hpdf_name.c
  - external/libhpdf/hpdf_null.c
  - external/libhpdf/hpdf_number.c
  - external/libhpdf/hpdf_objects.c
  - external/libhpdf/hpdf_objects.h
  - external/libhpdf/hpdf_outline.c
  - external/libhpdf/hpdf_outline.h
  - external/libhpdf/hpdf_page_label.c
  - external/libhpdf/hpdf_page_label.h
  - external/libhpdf/hpdf_page_operator.c
  - external/libhpdf/hpdf_pages.c
  - external/libhpdf/hpdf_pages.h
  - external/libhpdf/hpdf_real.c
  - external/libhpdf/hpdf_streams.c
  - external/libhpdf/hpdf_streams.h
  - external/libhpdf/hpdf_string.c
  - external/libhpdf/hpdf_types.h
  - external/libhpdf/hpdf_u3d.c
  - external/libhpdf/hpdf_u3d.h
  - external/libhpdf/hpdf_utils.c
  - external/libhpdf/hpdf_utils.h
  - external/libhpdf/hpdf_version.h
  - external/libhpdf/hpdf_xref.c
  + external/libhpdf/hpdfanno.c
  + external/libhpdf/hpdfanno.h
  + external/libhpdf/hpdfarra.c
  + external/libhpdf/hpdfbina.c
  + external/libhpdf/hpdfbool.c
  + external/libhpdf/hpdfcata.c
  + external/libhpdf/hpdfcata.h
  + external/libhpdf/hpdfcfg.h
  + external/libhpdf/hpdfconf.h
  + external/libhpdf/hpdfcons.h
  + external/libhpdf/hpdfdest.c
  + external/libhpdf/hpdfdest.h
  + external/libhpdf/hpdfdict.c
  + external/libhpdf/hpdfdoc.c
  + external/libhpdf/hpdfdoc.h
  + external/libhpdf/hpdfdocp.c
  + external/libhpdf/hpdfecy.c
  + external/libhpdf/hpdfecyd.c
  + external/libhpdf/hpdfencc.c
  + external/libhpdf/hpdfencj.c
  + external/libhpdf/hpdfenck.c
  + external/libhpdf/hpdfencn.c
  + external/libhpdf/hpdfenco.c
  + external/libhpdf/hpdfenco.h
  + external/libhpdf/hpdfencr.h
  + external/libhpdf/hpdfency.h
  + external/libhpdf/hpdferro.c
  + external/libhpdf/hpdferro.h
  + external/libhpdf/hpdfextg.c
  + external/libhpdf/hpdfextg.h
  + external/libhpdf/hpdffdf.c
  + external/libhpdf/hpdffdf1.c
  + external/libhpdf/hpdffdfb.c
  + external/libhpdf/hpdffdfc.c
  + external/libhpdf/hpdffdfi.c
  + external/libhpdf/hpdffdfj.c
  + external/libhpdf/hpdffdfk.c
  + external/libhpdf/hpdffdfn.c
  + external/libhpdf/hpdffdft.c
  + external/libhpdf/hpdffon1.c
  + external/libhpdf/hpdffonc.c
  + external/libhpdf/hpdffond.h
  + external/libhpdf/hpdffont.c
  + external/libhpdf/hpdffont.h
  + external/libhpdf/hpdffott.c
  + external/libhpdf/hpdfgsta.c
  + external/libhpdf/hpdfgsta.h
  + external/libhpdf/hpdfimag.c
  + external/libhpdf/hpdfimag.h
  + external/libhpdf/hpdfimap.c
  + external/libhpdf/hpdfinfo.c
  + external/libhpdf/hpdfinfo.h
  + external/libhpdf/hpdflist.c
  + external/libhpdf/hpdflist.h
  + external/libhpdf/hpdfmmgr.c
  + external/libhpdf/hpdfmmgr.h
  + external/libhpdf/hpdfname.c
  + external/libhpdf/hpdfnull.c
  + external/libhpdf/hpdfnumb.c
  + external/libhpdf/hpdfobje.c
  + external/libhpdf/hpdfobje.h
  + external/libhpdf/hpdfoutl.c
  + external/libhpdf/hpdfoutl.h
  + external/libhpdf/hpdfpage.c
  + external/libhpdf/hpdfpage.h
  + external/libhpdf/hpdfpago.c
  + external/libhpdf/hpdfpags.c
  + external/libhpdf/hpdfpags.h
  + external/libhpdf/hpdfreal.c
  + external/libhpdf/hpdfstre.c
  + external/libhpdf/hpdfstre.h
  + external/libhpdf/hpdfstri.c
  + external/libhpdf/hpdftype.h
  + external/libhpdf/hpdfu3d.c
  + external/libhpdf/hpdfu3d.h
  + external/libhpdf/hpdfutil.c
  + external/libhpdf/hpdfutil.h
  + external/libhpdf/hpdfvers.h
  + external/libhpdf/hpdfxref.c
  * external/libhpdf/hpdf.h
  * external/libhpdf/Makefile
    * Converted to short filenames. Added converted scripts.

  * source/hbpcre/cnv_hb2o.bat
  * source/hbpcre/cnv_o2hb.bat
    ! Fixed typo in prev.
    * Removed PCRE references from comment texts.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/external/libhpdf/Makefile
    trunk/harbour/external/libhpdf/hpdf.h
    trunk/harbour/source/hbpcre/cnv_hb2o.bat
    trunk/harbour/source/hbpcre/cnv_o2hb.bat

Added Paths:
-----------
    trunk/harbour/external/libhpdf/cnv_hb2o.bat
    trunk/harbour/external/libhpdf/cnv_o2hb.bat
    trunk/harbour/external/libhpdf/hpdfanno.c
    trunk/harbour/external/libhpdf/hpdfanno.h
    trunk/harbour/external/libhpdf/hpdfarra.c
    trunk/harbour/external/libhpdf/hpdfbina.c
    trunk/harbour/external/libhpdf/hpdfbool.c
    trunk/harbour/external/libhpdf/hpdfcata.c
    trunk/harbour/external/libhpdf/hpdfcata.h
    trunk/harbour/external/libhpdf/hpdfcfg.h
    trunk/harbour/external/libhpdf/hpdfconf.h
    trunk/harbour/external/libhpdf/hpdfcons.h
    trunk/harbour/external/libhpdf/hpdfdest.c
    trunk/harbour/external/libhpdf/hpdfdest.h
    trunk/harbour/external/libhpdf/hpdfdict.c
    trunk/harbour/external/libhpdf/hpdfdoc.c
    trunk/harbour/external/libhpdf/hpdfdoc.h
    trunk/harbour/external/libhpdf/hpdfdocp.c
    trunk/harbour/external/libhpdf/hpdfecy.c
    trunk/harbour/external/libhpdf/hpdfecyd.c
    trunk/harbour/external/libhpdf/hpdfencc.c
    trunk/harbour/external/libhpdf/hpdfencj.c
    trunk/harbour/external/libhpdf/hpdfenck.c
    trunk/harbour/external/libhpdf/hpdfencn.c
    trunk/harbour/external/libhpdf/hpdfenco.c
    trunk/harbour/external/libhpdf/hpdfenco.h
    trunk/harbour/external/libhpdf/hpdfencr.h
    trunk/harbour/external/libhpdf/hpdfency.h
    trunk/harbour/external/libhpdf/hpdferro.c
    trunk/harbour/external/libhpdf/hpdferro.h
    trunk/harbour/external/libhpdf/hpdfextg.c
    trunk/harbour/external/libhpdf/hpdfextg.h
    trunk/harbour/external/libhpdf/hpdffdf.c
    trunk/harbour/external/libhpdf/hpdffdf1.c
    trunk/harbour/external/libhpdf/hpdffdfb.c
    trunk/harbour/external/libhpdf/hpdffdfc.c
    trunk/harbour/external/libhpdf/hpdffdfi.c
    trunk/harbour/external/libhpdf/hpdffdfj.c
    trunk/harbour/external/libhpdf/hpdffdfk.c
    trunk/harbour/external/libhpdf/hpdffdfn.c
    trunk/harbour/external/libhpdf/hpdffdft.c
    trunk/harbour/external/libhpdf/hpdffon1.c
    trunk/harbour/external/libhpdf/hpdffonc.c
    trunk/harbour/external/libhpdf/hpdffond.h
    trunk/harbour/external/libhpdf/hpdffont.c
    trunk/harbour/external/libhpdf/hpdffont.h
    trunk/harbour/external/libhpdf/hpdffott.c
    trunk/harbour/external/libhpdf/hpdfgsta.c
    trunk/harbour/external/libhpdf/hpdfgsta.h
    trunk/harbour/external/libhpdf/hpdfimag.c
    trunk/harbour/external/libhpdf/hpdfimag.h
    trunk/harbour/external/libhpdf/hpdfimap.c
    trunk/harbour/external/libhpdf/hpdfinfo.c
    trunk/harbour/external/libhpdf/hpdfinfo.h
    trunk/harbour/external/libhpdf/hpdflist.c
    trunk/harbour/external/libhpdf/hpdflist.h
    trunk/harbour/external/libhpdf/hpdfmmgr.c
    trunk/harbour/external/libhpdf/hpdfmmgr.h
    trunk/harbour/external/libhpdf/hpdfname.c
    trunk/harbour/external/libhpdf/hpdfnull.c
    trunk/harbour/external/libhpdf/hpdfnumb.c
    trunk/harbour/external/libhpdf/hpdfobje.c
    trunk/harbour/external/libhpdf/hpdfobje.h
    trunk/harbour/external/libhpdf/hpdfoutl.c
    trunk/harbour/external/libhpdf/hpdfoutl.h
    trunk/harbour/external/libhpdf/hpdfpage.c
    trunk/harbour/external/libhpdf/hpdfpage.h
    trunk/harbour/external/libhpdf/hpdfpago.c
    trunk/harbour/external/libhpdf/hpdfpags.c
    trunk/harbour/external/libhpdf/hpdfpags.h
    trunk/harbour/external/libhpdf/hpdfreal.c
    trunk/harbour/external/libhpdf/hpdfstre.c
    trunk/harbour/external/libhpdf/hpdfstre.h
    trunk/harbour/external/libhpdf/hpdfstri.c
    trunk/harbour/external/libhpdf/hpdftype.h
    trunk/harbour/external/libhpdf/hpdfu3d.c
    trunk/harbour/external/libhpdf/hpdfu3d.h
    trunk/harbour/external/libhpdf/hpdfutil.c
    trunk/harbour/external/libhpdf/hpdfutil.h
    trunk/harbour/external/libhpdf/hpdfvers.h
    trunk/harbour/external/libhpdf/hpdfxref.c
    trunk/harbour/external/libhpdf/ori_dst/
    trunk/harbour/external/libhpdf/ori_src/

Removed Paths:
-------------
    trunk/harbour/external/libhpdf/hpdf_annotation.c
    trunk/harbour/external/libhpdf/hpdf_annotation.h
    trunk/harbour/external/libhpdf/hpdf_array.c
    trunk/harbour/external/libhpdf/hpdf_binary.c
    trunk/harbour/external/libhpdf/hpdf_boolean.c
    trunk/harbour/external/libhpdf/hpdf_catalog.c
    trunk/harbour/external/libhpdf/hpdf_catalog.h
    trunk/harbour/external/libhpdf/hpdf_conf.h
    trunk/harbour/external/libhpdf/hpdf_config.h
    trunk/harbour/external/libhpdf/hpdf_consts.h
    trunk/harbour/external/libhpdf/hpdf_destination.c
    trunk/harbour/external/libhpdf/hpdf_destination.h
    trunk/harbour/external/libhpdf/hpdf_dict.c
    trunk/harbour/external/libhpdf/hpdf_doc.c
    trunk/harbour/external/libhpdf/hpdf_doc.h
    trunk/harbour/external/libhpdf/hpdf_doc_png.c
    trunk/harbour/external/libhpdf/hpdf_encoder.c
    trunk/harbour/external/libhpdf/hpdf_encoder.h
    trunk/harbour/external/libhpdf/hpdf_encoder_cns.c
    trunk/harbour/external/libhpdf/hpdf_encoder_cnt.c
    trunk/harbour/external/libhpdf/hpdf_encoder_jp.c
    trunk/harbour/external/libhpdf/hpdf_encoder_kr.c
    trunk/harbour/external/libhpdf/hpdf_encrypt.c
    trunk/harbour/external/libhpdf/hpdf_encrypt.h
    trunk/harbour/external/libhpdf/hpdf_encryptdict.c
    trunk/harbour/external/libhpdf/hpdf_encryptdict.h
    trunk/harbour/external/libhpdf/hpdf_error.c
    trunk/harbour/external/libhpdf/hpdf_error.h
    trunk/harbour/external/libhpdf/hpdf_ext_gstate.c
    trunk/harbour/external/libhpdf/hpdf_ext_gstate.h
    trunk/harbour/external/libhpdf/hpdf_font.c
    trunk/harbour/external/libhpdf/hpdf_font.h
    trunk/harbour/external/libhpdf/hpdf_font_cid.c
    trunk/harbour/external/libhpdf/hpdf_font_tt.c
    trunk/harbour/external/libhpdf/hpdf_font_type1.c
    trunk/harbour/external/libhpdf/hpdf_fontdef.c
    trunk/harbour/external/libhpdf/hpdf_fontdef.h
    trunk/harbour/external/libhpdf/hpdf_fontdef_base14.c
    trunk/harbour/external/libhpdf/hpdf_fontdef_cid.c
    trunk/harbour/external/libhpdf/hpdf_fontdef_cns.c
    trunk/harbour/external/libhpdf/hpdf_fontdef_cnt.c
    trunk/harbour/external/libhpdf/hpdf_fontdef_jp.c
    trunk/harbour/external/libhpdf/hpdf_fontdef_kr.c
    trunk/harbour/external/libhpdf/hpdf_fontdef_tt.c
    trunk/harbour/external/libhpdf/hpdf_fontdef_type1.c
    trunk/harbour/external/libhpdf/hpdf_gstate.c
    trunk/harbour/external/libhpdf/hpdf_gstate.h
    trunk/harbour/external/libhpdf/hpdf_image.c
    trunk/harbour/external/libhpdf/hpdf_image.h
    trunk/harbour/external/libhpdf/hpdf_image_png.c
    trunk/harbour/external/libhpdf/hpdf_info.c
    trunk/harbour/external/libhpdf/hpdf_info.h
    trunk/harbour/external/libhpdf/hpdf_list.c
    trunk/harbour/external/libhpdf/hpdf_list.h
    trunk/harbour/external/libhpdf/hpdf_mmgr.c
    trunk/harbour/external/libhpdf/hpdf_mmgr.h
    trunk/harbour/external/libhpdf/hpdf_name.c
    trunk/harbour/external/libhpdf/hpdf_null.c
    trunk/harbour/external/libhpdf/hpdf_number.c
    trunk/harbour/external/libhpdf/hpdf_objects.c
    trunk/harbour/external/libhpdf/hpdf_objects.h
    trunk/harbour/external/libhpdf/hpdf_outline.c
    trunk/harbour/external/libhpdf/hpdf_outline.h
    trunk/harbour/external/libhpdf/hpdf_page_label.c
    trunk/harbour/external/libhpdf/hpdf_page_label.h
    trunk/harbour/external/libhpdf/hpdf_page_operator.c
    trunk/harbour/external/libhpdf/hpdf_pages.c
    trunk/harbour/external/libhpdf/hpdf_pages.h
    trunk/harbour/external/libhpdf/hpdf_real.c
    trunk/harbour/external/libhpdf/hpdf_streams.c
    trunk/harbour/external/libhpdf/hpdf_streams.h
    trunk/harbour/external/libhpdf/hpdf_string.c
    trunk/harbour/external/libhpdf/hpdf_types.h
    trunk/harbour/external/libhpdf/hpdf_u3d.c
    trunk/harbour/external/libhpdf/hpdf_u3d.h
    trunk/harbour/external/libhpdf/hpdf_utils.c
    trunk/harbour/external/libhpdf/hpdf_utils.h
    trunk/harbour/external/libhpdf/hpdf_version.h
    trunk/harbour/external/libhpdf/hpdf_xref.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Thu Sep 10 04:09:12 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 10 04:09:18 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12463] trunk/harbour
Message-ID: <E1MleiO-0004s1-BL@dn4whf1.ch3.sourceforge.com>

Revision: 12463
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12463&view=rev
Author:   vszakats
Date:     2009-09-10 08:09:07 +0000 (Thu, 10 Sep 2009)

Log Message:
-----------
2009-09-10 10:08 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * contrib/hbfimage/Makefile
  * contrib/hbfimage/tests/fitest.prg
  + contrib/hbfimage/freeimag.ch
  - contrib/hbfimage/freeimage.ch
    ! Renamed last public long filename in Harbour source tree.
      This lib could in theory be compiled for dos, but this is 
      not yet possible to not-yet-cleaned core from Windows 
      types (LONG, DWORD, WORD, BOOL).
    ; INCOMPATIBLE: Please modify your source to use the new header 
                    name.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbfimage/Makefile
    trunk/harbour/contrib/hbfimage/tests/fitest.prg

Added Paths:
-----------
    trunk/harbour/contrib/hbfimage/freeimag.ch

Removed Paths:
-------------
    trunk/harbour/contrib/hbfimage/freeimage.ch


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From elart at elart.it  Thu Sep 10 04:24:53 2009
From: elart at elart.it (elart)
Date: Thu Sep 10 04:25:00 2009
Subject: [Harbour] Compile error - Harbour svn rev.  12463
Message-ID: <ye26Du0j.1252571093.4869270.marcobra@82.105.36.210>


Hi, all

Today i get this error compiling harbour for win

        export PATH=/tmp/hbwin/bin:$PATH
        make HB_PLATFORM=win


Thank you and best regards

...
/usr/bin/i586-mingw32msvc-gcc -shared  -o
../../../../../bin/win/mingw/harbour-20.dll __dyn__.tmp -lkernel32
-luser32 -lws2_32 -ladvapi32 -lgdi32
-Wl,--out-implib,../../../../../lib/win/mingw/libharbour-20.a,--output-def,../../../../../bin/win/mingw/harbour-20.def
Creating library file: ../../../../../lib/win/mingw/libharbour-20.a
../../../../../source/hbpcre/obj/win/mingw/pcreglob.o:pcreglob.c:(.data+0x0):
multiple definition of `_pcre_malloc'
../../../../../source/hbpcre/obj/win/mingw/_hbpcreg.o:_hbpcreg.c:(.data+0x0):
first defined here
../../../../../source/hbpcre/obj/win/mingw/pcreglob.o:pcreglob.c:(.data+0x4):
multiple definition of `_pcre_free'
../../../../../source/hbpcre/obj/win/mingw/_hbpcreg.o:_hbpcreg.c:(.data+0x4):
first defined here
../../../../../source/hbpcre/obj/win/mingw/pcreglob.o:pcreglob.c:(.data+0x8):
multiple definition of `_pcre_stack_malloc'
../../../../../source/hbpcre/obj/win/mingw/_hbpcreg.o:_hbpcreg.c:(.data+0x8):
first defined here
../../../../../source/hbpcre/obj/win/mingw/pcreglob.o:pcreglob.c:(.data+0xc):
multiple definition of `_pcre_stack_free'
../../../../../source/hbpcre/obj/win/mingw/_hbpcreg.o:_hbpcreg.c:(.data+0xc):
first defined here
../../../../../source/hbpcre/obj/win/mingw/pcreglob.o:pcreglob.c:(.bss+0x0):
multiple definition of `_pcre_callout'
../../../../../source/hbpcre/obj/win/mingw/_hbpcreg.o:_hbpcreg.c:(.bss+0x0):
first defined here
collect2: ld returned 1 exit status
make[3]: *** [harbour-20.dll] Errore 1
make[2]: *** [descend] Errore 2
make[1]: *** [dynlib] Errore 2
make: *** [source] Errore 2
From vszakats at users.sourceforge.net  Thu Sep 10 04:45:04 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 10 04:45:11 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12464] trunk/harbour
Message-ID: <E1MlfH6-0005sW-NR@dn4whf1.ch3.sourceforge.com>

Revision: 12464
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12464&view=rev
Author:   vszakats
Date:     2009-09-10 08:45:03 +0000 (Thu, 10 Sep 2009)

Log Message:
-----------
2009-09-10 10:44 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/detect.mk
    + Detecting pcre on darwin.

  * INSTALL
    + Added darwin MacPorts pkg name for pcre.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/config/detect.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Thu Sep 10 05:39:34 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 10 05:39:45 2009
Subject: [Harbour] hbzlib and hbpcre move to /external dir
In-Reply-To: <1252537712.2181.12.camel@SunSpot>
References: <808091D5-2003-4617-9878-77F4FC992CA9@syenar.hu>
	<1252537712.2181.12.camel@SunSpot>
Message-ID: <169C6878-6706-465E-A698-A8E4AAF267D6@syenar.hu>

Thank you Phil.

Brgds,
Viktor

On 2009.09.10., at 01:08, Phil Barnett wrote:

> On Thu, 2009-09-10 at 01:02 +0200, Viktor Szak?ts wrote:
>> Hi All,
>>
>> There is a pending item on my TODO list to move
>> hbzlib and hbpcre sources under /external tree.
>>
>> At the same time the detection of externally available
>> versions could also be added, and possibility to override
>> them with usual HB_INC_* vars also. It's probably healthier
>> to use these on *nix systems anyway.
>>
>> The other benefit would be that we'd hold all 3rd
>> party code in one easy to identify spot, which makes
>> them easier to manage (update/config/strip/distribute).
>>
>> One consequence is that they'd have to be renamed
>> to their original lib names (dropping 'hb' prefix).
>> Plus some additional hbmk[2] tricks will be required.
>>
>> Is there any reason this move cannot or shouldn't be
>> made? Or some issues to be aware of?
>
> This was one of my stated goals and we had many discussions about it.
>
> I can't see it as anything but a good idea that should be done asap.
>
> BTW, great work on the beta process. Amazing work!
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Thu Sep 10 05:55:22 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 10 05:55:30 2009
Subject: [Harbour] hbzlib and hbpcre move to /external dir
In-Reply-To: <808091D5-2003-4617-9878-77F4FC992CA9@syenar.hu>
References: <808091D5-2003-4617-9878-77F4FC992CA9@syenar.hu>
Message-ID: <20090910095522.GA3837@uran.home.aster.pl>

On Thu, 10 Sep 2009, Szak?ts Viktor wrote:

Hi,

> One consequence is that they'd have to be renamed
> to their original lib names (dropping 'hb' prefix).
> Plus some additional hbmk[2] tricks will be required.

If you can resolve potential problems with name conflicts
when one library with the same name exists in the system
but it's not in version compatible with Harbour so we have
to force using our own one then it's not a problem for me
but I do not know how to make it for GCC builds in non
fullstatic linking. By default GCC chooses shared libraries
before static ones with the same name so system libraries
will be preferred after such modification.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Sep 10 06:01:00 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 10 06:01:10 2009
Subject: [Harbour] hbzlib and hbpcre move to /external dir
In-Reply-To: <20090910095522.GA3837@uran.home.aster.pl>
References: <808091D5-2003-4617-9878-77F4FC992CA9@syenar.hu>
	<20090910095522.GA3837@uran.home.aster.pl>
Message-ID: <CA4EA9ED-0616-48BF-8F03-56649AA6DBC9@syenar.hu>

Hi,

Yes, I'm still thinking about this. It's probably
inevitable to add some tricks for proper lib name
detection/usage. The details are unclear yet,
for sure it's an option to continue to use our own
name, so whichever will make things easier to manage.

Brgds,
Viktor

On 2009.09.10., at 11:55, Przemyslaw Czerpak wrote:

> On Thu, 10 Sep 2009, Szak?ts Viktor wrote:
>
> Hi,
>
>> One consequence is that they'd have to be renamed
>> to their original lib names (dropping 'hb' prefix).
>> Plus some additional hbmk[2] tricks will be required.
>
> If you can resolve potential problems with name conflicts
> when one library with the same name exists in the system
> but it's not in version compatible with Harbour so we have
> to force using our own one then it's not a problem for me
> but I do not know how to make it for GCC builds in non
> fullstatic linking. By default GCC chooses shared libraries
> before static ones with the same name so system libraries
> will be preferred after such modification.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Thu Sep 10 06:05:38 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 10 06:05:45 2009
Subject: [Harbour] HB_SENDMAIL hangs with beta3
Message-ID: <9257026e0909100305o5130f1d0p5fc030fafdabd9b1@mail.gmail.com>

Using beta3 - 2009-09-09 13:27 UTC+0200 Viktor Szakats (harbour.01
syenar.hu) under linux, a simple test like:

procedure main

? HB_SendMail( "...", ;
               , ;
               "...", ;
               { "..." }, ;
               , ;
               , ;
               "test", ;
               "test", ;
               , ;
               "...", ;
               "...", ;
               "...", ;
               3, ;
               .f., ;
               .t., ;
               .t., ;
               .f., ;
               1000 )

return

HANGS and you need to kill the app.

The same with beta1 - 2009-06-12 09:40 UTC+0200 Viktor Szakats
(harbour.01 syenar.hu) works as expected.

( you need to replace "..." with your settings )

best regards,
Lorenzo
From vszakats at users.sourceforge.net  Thu Sep 10 07:18:53 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 10 07:18:59 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12465] trunk/harbour
Message-ID: <E1Mlhfx-0001fV-9u@dn4whf1.ch3.sourceforge.com>

Revision: 12465
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12465&view=rev
Author:   vszakats
Date:     2009-09-10 11:18:51 +0000 (Thu, 10 Sep 2009)

Log Message:
-----------
2009-09-10 13:17 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * harbour-win-spec
  * harbour-wce-spec
  * INSTALL
  * bin/hb-func.sh
  * config/detfun.mk
  * config/global.mk
    * Renamed HB_XBUILD to HB_BUILD_EXTDEF=no[|yes].
      Not the perfect name, but anyway.
    + Documented HB_BUILD_EXTDEF setting.
    ; TOFIX: There is an HB_XBUILD reference in mpkg_tgz.sh which
             I couldn't correct.

  * Makefile
    + Moved building of external libs before utils.
      This will allow to add embedded external libs which are used 
      by Harbour core.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/Makefile
    trunk/harbour/bin/hb-func.sh
    trunk/harbour/config/detfun.mk
    trunk/harbour/config/global.mk
    trunk/harbour/harbour-wce-spec
    trunk/harbour/harbour-win-spec


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Thu Sep 10 07:20:57 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 10 07:21:08 2009
Subject: [Harbour] Re: hbzlib and hbpcre move to /external dir
In-Reply-To: <808091D5-2003-4617-9878-77F4FC992CA9@syenar.hu>
References: <808091D5-2003-4617-9878-77F4FC992CA9@syenar.hu>
Message-ID: <60835743-B6A6-4CF3-96D3-4429921CA1E3@syenar.hu>

So, in case there is no objection, I'd like to start
making some changes regarding that. Pls be warned that
I may break things in the process due to mistakes or
because I don't fully oversee some configuration scenarios.
So be patient.

Few thoughts on the process:
- pcre and zlib will be removed from Harbour dynlibs.
   On *nix they will be linked to system libs by default,
   otherwise they will have to be linked statically
   to apps (not to dynlibs - at least that's how I
   see it now). This will need hbmk2/hbmk modifications.
- external dir will have to be moved up in build order,
   so utils can be created when using local zlib/pcre builds.
- for bcc an additional package will have to be detected.
   I'm not at all sure if support for this built-in bcc
   regex is worth all the effort (maintenance/testing).
   So I'd like to get opinions in dropping it. [ We have
   the real pcre there for bcc. ].
- above changes will most probably cause that we drop
   HB_EXT_ZLIB (this will be the default when available),
   HB_PCRE_REGEX (replaced by HB_INC_PCRE) and
   HB_POSIX_REGEX (replaced by HB_INC_PCRE=no on
   *nix systems).
- HB_INC_ZLIB will be added to control zlib location,
   with the option to force local one. Here 'no' may
   not be a valid option, as we need something for core.
- include/hbzlib.h will be dropped. Replaced by direct
   #include <zlib.h> lines and appropriate -I options
   added on build level.
- Internal pcre include logic to be change like above.

Any comments on these?

Brgds,
Viktor

On 2009.09.10., at 01:02, Viktor Szak?ts wrote:

> Hi All,
>
> There is a pending item on my TODO list to move
> hbzlib and hbpcre sources under /external tree.
>
> At the same time the detection of externally available
> versions could also be added, and possibility to override
> them with usual HB_INC_* vars also. It's probably healthier
> to use these on *nix systems anyway.
>
> The other benefit would be that we'd hold all 3rd
> party code in one easy to identify spot, which makes
> them easier to manage (update/config/strip/distribute).
>
> One consequence is that they'd have to be renamed
> to their original lib names (dropping 'hb' prefix).
> Plus some additional hbmk[2] tricks will be required.
>
> Is there any reason this move cannot or shouldn't be
> made? Or some issues to be aware of?
>
> Brgds,
> Viktor
>

From Istvan.Bisz at t-online.hu  Thu Sep 10 07:52:29 2009
From: Istvan.Bisz at t-online.hu (=?UTF-8?Q?Bisz_Istv=C3=A1n?=)
Date: Thu Sep 10 07:52:58 2009
Subject: [Harbour] demoxbp segfault in Fedora 11
In-Reply-To: <20090906104534.GA20927@uran.home.aster.pl>
References: <9257026e0909032316h2488ffb1w29db3dad85dcb246@mail.gmail.com>	<3534837719855956578@unknownmsgid>	<9257026e0909050202t27cfcae2mbbe9ae4631ec3c5f@mail.gmail.com>	<73109AC2-0C8D-4779-AF7A-20F25244A387@syenar.hu>	<12826C8A-D98E-4185-89D0-F2B199657E6D@syenar.hu>	<FECFBC79-7C28-4C1D-8775-E4F31A4DB617@syenar.hu>
	<20090906104534.GA20927@uran.home.aster.pl>
Message-ID: <002b01ca320d$2ca9f560$85fde020$@Bisz@t-online.hu>

Hi,

The segfault error is fixed with the a correction in QApplication.cpp, see below. The problem was with 'argc' passed to Qt by reference:

QApplication ( int & argc, char ** argv )

I just moved it out from the stack. Now the 'hbmk2 demoxbp' and 'hbmk2 -static demoxbp' builds are running. Tested until now on CentOS 5.3 with qtsdk-2009.03. 

Best regards,
Istv?n

Index: QApplication.cpp
===================================================================
--- QApplication.cpp	(revision 12449)
+++ QApplication.cpp	(working copy)
@@ -89,6 +89,9 @@
 static QApplication * app = NULL;
 static bool hbqtinit = false;
 
+int argc1;
+char ** argv1;
+
 /*
  * QApplication ( int & argc, char ** argv )
  * QApplication ( int & argc, char ** argv, bool GUIenabled )
@@ -129,15 +132,17 @@
 
 static void hbqt_Init( void * cargo )
 {
+/*
    int argc;
    char ** argv;
+*/
 
    HB_SYMBOL_UNUSED( cargo );
 
-   argc = hb_cmdargARGC();
-   argv = hb_cmdargARGV();
+   argc1 = hb_cmdargARGC();
+   argv1 = hb_cmdargARGV();
 
-   app = new QApplication( argc, argv );
+   app = new QApplication( argc1, argv1 );
 
    if( app )
       hbqtinit = true;
@@ -145,7 +150,7 @@
    if( ! hbqtinit )
       hb_errInternal( 11001, "hbqt_Init(): QT Initilization Error.", NULL, NULL );
 
-   hb_cmdargInit( argc, argv );
+   hb_cmdargInit( argc1, argv1 );
 
    hb_vmAtExit( hbqt_Exit, NULL );
 }


-----Original Message-----
From: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl] 
Sent: 2009. szeptember 6. 12:46
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] demoxbp segfault in Fedora 11

On Sat, 05 Sep 2009, Szak?ts Viktor wrote:

Hi,

>> Yes, it is normal to exclude the fulstatic case from shared, static and
>> fulstatic test cases. But back to the original issue, why have we 
>> different
> I'm not sure I understand the issue here. I'd still be interested
> how can it happen that gpm is detected at build time but missing
> at hbmk2 time.

We do not link anything in core code using full static mode so we
do not know if it works.
I guess that gpm-devel is installed only with shared library and
libgpm.a is not installed.

>> behavior between shared and static builds? The same problem appears with
>> demoqt buils. It's time to go deeper in these issues.
> No idea, I hope someone will be able to give some hints.

Not all libraries are installed in static mode. Please also remember
that not all features can work in static mode so full static binaries
may not be fully functional.

best regards,
Przemek


From alxokhotnikov at gmail.com  Thu Sep 10 08:26:09 2009
From: alxokhotnikov at gmail.com (Alexandr Okhotnikov)
Date: Thu Sep 10 08:26:16 2009
Subject: [Harbour] HBQT and DEBUG
Message-ID: <d6fa31440909100526y1e18e008g6c4d12038219f009@mail.gmail.com>

Hi

how to use the debugger (for *. prg) and hbqt (hbxbp) together?
(it's even possible?)

-- 
Best regards
Alexander Okhotnikov
From M.Horodyski at pzuzycie.com.pl  Thu Sep 10 09:06:18 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Sep 10 09:06:26 2009
Subject: [Harbour] Ado rdd
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AB06@PINK.zycie.pzu>

Can anybody repaire ADORDD ?
>From this RDD we can read only character fields.
When in database are number or date, we mus transtlate it to character.
After send query, for example :
HB_AdoSetQuery( "select DATA_TRANSAKCJI DATA, JED_ZRODLO JED, OBIEKT_NR
OBIEKT, ILOSC, BANDEROLA, PESEL
                  from system_mk@l2mk_&_JED
                  where PESEL is not null
                  and   ilosc > 0
                  and   DATA_TRANSAKCJI between '2009-01-01' and
'2009-01-31'")
 
ADO is returned such types :

1. - DATA - U        // sould be DATA
2. - JED - C
3. - OBIEKT - C
4. - ILOSC - U       // should be numeric
5. - BANDEROLA - C
6. - PESEL - C



Regards,
Marek Horodyski
From vszakats at users.sourceforge.net  Thu Sep 10 10:08:53 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 10 10:08:59 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12466] trunk/harbour
Message-ID: <E1MlkKT-0007Dq-Jz@bj8yhf1.ch3.sourceforge.com>

Revision: 12466
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12466&view=rev
Author:   vszakats
Date:     2009-09-10 14:08:51 +0000 (Thu, 10 Sep 2009)

Log Message:
-----------
2009-09-10 15:48 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * Makefile
  - source/hbpcre
  - source/hbzlib
  * external/Makefile
  + external/pcre
  + external/zlib
  * external/pcre/Makefile
  * external/zlib/Makefile
  * external/libhpdf/Makefile
  * external/libpng/Makefile
  * include/hbsetup.h
  * include/hbzlib.h
  * include/hbregex.h
  * source/rtl/hbzlibgz.c
  * source/rtl/Makefile
  * source/rtl/hbregexc.c
  * source/rtl/hbregex.c
  * source/rtl/hbzlib.c
  * source/Makefile
  * contrib/xhb/Makefile
  * contrib/hbmzip/Makefile
  * utils/hbmk2/hbmk2.prg
  * config/global.mk
  * config/lib.mk
  * config/bin.mk
  * config/detect.mk
  * config/darwin/libs.mk
  * config/linux/libs.mk
  * config/wce/mingwarm.mk
  * config/wce/poccarm.mk
  * config/wce/msvcarm.mk
  * config/win/xcc.mk
  * config/win/mingw.mk
  * config/win/pocc.mk
  * config/win/bcc.mk
  * config/win/watcom.mk
  * config/win/icc.mk
  * config/win/cygwin.mk
  * config/win/msvc.mk
  * config/dyn.mk
  * config/os2/watcom.mk
  * config/os2/gcc.mk
  * config/bsd/libs.mk
  * config/hpux/libs.mk
  * config/sunos/libs.mk
    * Changed the way embedded zlib and pcre are handled:
      - They now reside in /external dir.
      - They are now excluded from Harbour dynlib. This means they
        will now be linked statically on non-*nix systems and
        dynamically on *nix systems. On *nix it's probably easy to
        switch to link statically. On non-*nix this is quite
        complicated to do.
      - If these libs are provided by the system, those will be used.
      - On non-*nix systems the locally hosted versions will be used,
        unless user overrides them using HB_INC_PCRE or HB_INC_ZLIB.
      - There is currently no officially supported way to force usage
        of locally hosted libs.
      - If PCRE lib is forcibly disabled or not found, build system
        will fall back to POSIX regex on *nix systems and Borland regex
        with bcc compiler. Otherwise it will stop the build with an error.
      - If zlib is forcibly disabled or not found, an error will be
        generated at build-time (in hbrtl). hbmzip is simply skipped
        in this case.
      - hbmk2 will use local builds of these libs if they are present
        in lib dir.
    ; TOFIX: hbmk script.
    ; TOFIX: dos builds. cmdline lenghts are most probably too big for them.
    ; NOTE: Bumps are expected.
    ; NOTE: I've yet to test/verify it.

  - external/libhpdf/ori_src
  - external/libhpdf/ori_dst
    - Deleted. (added in prev commit by oversight)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/Makefile
    trunk/harbour/config/bin.mk
    trunk/harbour/config/bsd/libs.mk
    trunk/harbour/config/darwin/libs.mk
    trunk/harbour/config/detect.mk
    trunk/harbour/config/dyn.mk
    trunk/harbour/config/global.mk
    trunk/harbour/config/hpux/libs.mk
    trunk/harbour/config/lib.mk
    trunk/harbour/config/linux/libs.mk
    trunk/harbour/config/os2/gcc.mk
    trunk/harbour/config/os2/watcom.mk
    trunk/harbour/config/sunos/libs.mk
    trunk/harbour/config/wce/mingwarm.mk
    trunk/harbour/config/wce/msvcarm.mk
    trunk/harbour/config/wce/poccarm.mk
    trunk/harbour/config/win/bcc.mk
    trunk/harbour/config/win/cygwin.mk
    trunk/harbour/config/win/icc.mk
    trunk/harbour/config/win/mingw.mk
    trunk/harbour/config/win/msvc.mk
    trunk/harbour/config/win/pocc.mk
    trunk/harbour/config/win/watcom.mk
    trunk/harbour/config/win/xcc.mk
    trunk/harbour/contrib/hbmzip/Makefile
    trunk/harbour/contrib/xhb/Makefile
    trunk/harbour/external/Makefile
    trunk/harbour/external/libhpdf/Makefile
    trunk/harbour/external/libpng/Makefile
    trunk/harbour/external/pcre/Makefile
    trunk/harbour/external/zlib/Makefile
    trunk/harbour/include/hbregex.h
    trunk/harbour/include/hbsetup.h
    trunk/harbour/include/hbzlib.h
    trunk/harbour/source/Makefile
    trunk/harbour/source/rtl/Makefile
    trunk/harbour/source/rtl/hbregex.c
    trunk/harbour/source/rtl/hbregexc.c
    trunk/harbour/source/rtl/hbzlib.c
    trunk/harbour/source/rtl/hbzlibgz.c
    trunk/harbour/utils/hbmk2/hbmk2.prg

Added Paths:
-----------
    trunk/harbour/external/pcre/
    trunk/harbour/external/zlib/

Removed Paths:
-------------
    trunk/harbour/external/libhpdf/ori_dst/
    trunk/harbour/external/libhpdf/ori_src/
    trunk/harbour/source/hbpcre/
    trunk/harbour/source/hbzlib/


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From Istvan.Bisz at t-online.hu  Thu Sep 10 10:23:12 2009
From: Istvan.Bisz at t-online.hu (=?utf-8?Q?Bisz_Istv=C3=A1n?=)
Date: Thu Sep 10 10:23:24 2009
Subject: [Harbour] demoxbp segfault in Fedora 11
References: <9257026e0909032316h2488ffb1w29db3dad85dcb246@mail.gmail.com>	<3534837719855956578@unknownmsgid>	<9257026e0909050202t27cfcae2mbbe9ae4631ec3c5f@mail.gmail.com>	<73109AC2-0C8D-4779-AF7A-20F25244A387@syenar.hu>	<12826C8A-D98E-4185-89D0-F2B199657E6D@syenar.hu>	<FECFBC79-7C28-4C1D-8775-E4F31A4DB617@syenar.hu>
	<20090906104534.GA20927@uran.home.aster.pl> 
Message-ID: <000801ca3222$3b6d5be0$b24813a0$@Bisz@t-online.hu>

Hi,

Confirmed on Fedora 11 with qt 4.5.2 as native package.

Both 'hbmk2 demoxbp' and 'hbmk2 -static demoxbp' builds are fully operational.
So the pointer to a variable resident temporary on the stack was the problem.

Best regards,
Istv?n 

-----Original Message-----
From: Bisz Istv?n [mailto:Istvan.Bisz@t-online.hu] 
Sent: 2009. szeptember 10. 13:52
To: 'Harbour Project Main Developer List.'
Subject: RE: [Harbour] demoxbp segfault in Fedora 11

Hi,

The segfault error is fixed with the a correction in QApplication.cpp, see below. The problem was with 'argc' passed to Qt by reference:

QApplication ( int & argc, char ** argv )

I just moved it out from the stack. Now the 'hbmk2 demoxbp' and 'hbmk2 -static demoxbp' builds are running. Tested until now on CentOS 5.3 with qtsdk-2009.03. 

Best regards,
Istv?n

Index: QApplication.cpp
===================================================================
--- QApplication.cpp	(revision 12449)
+++ QApplication.cpp	(working copy)
@@ -89,6 +89,9 @@
 static QApplication * app = NULL;
 static bool hbqtinit = false;
 
+int argc1;
+char ** argv1;
+
 /*
  * QApplication ( int & argc, char ** argv )
  * QApplication ( int & argc, char ** argv, bool GUIenabled )
@@ -129,15 +132,17 @@
 
 static void hbqt_Init( void * cargo )
 {
+/*
    int argc;
    char ** argv;
+*/
 
    HB_SYMBOL_UNUSED( cargo );
 
-   argc = hb_cmdargARGC();
-   argv = hb_cmdargARGV();
+   argc1 = hb_cmdargARGC();
+   argv1 = hb_cmdargARGV();
 
-   app = new QApplication( argc, argv );
+   app = new QApplication( argc1, argv1 );
 
    if( app )
       hbqtinit = true;
@@ -145,7 +150,7 @@
    if( ! hbqtinit )
       hb_errInternal( 11001, "hbqt_Init(): QT Initilization Error.", NULL, NULL );
 
-   hb_cmdargInit( argc, argv );
+   hb_cmdargInit( argc1, argv1 );
 
    hb_vmAtExit( hbqt_Exit, NULL );
 }


-----Original Message-----
From: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl] 
Sent: 2009. szeptember 6. 12:46
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] demoxbp segfault in Fedora 11

On Sat, 05 Sep 2009, Szak?ts Viktor wrote:

Hi,

>> Yes, it is normal to exclude the fulstatic case from shared, static and
>> fulstatic test cases. But back to the original issue, why have we 
>> different
> I'm not sure I understand the issue here. I'd still be interested
> how can it happen that gpm is detected at build time but missing
> at hbmk2 time.

We do not link anything in core code using full static mode so we
do not know if it works.
I guess that gpm-devel is installed only with shared library and
libgpm.a is not installed.

>> behavior between shared and static builds? The same problem appears with
>> demoqt buils. It's time to go deeper in these issues.
> No idea, I hope someone will be able to give some hints.

Not all libraries are installed in static mode. Please also remember
that not all features can work in static mode so full static binaries
may not be fully functional.

best regards,
Przemek


From harbour.01 at syenar.hu  Thu Sep 10 10:28:56 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 10 10:29:06 2009
Subject: [Harbour] demoxbp segfault in Fedora 11
In-Reply-To: <002b01ca320d$2ca9f560$85fde020$@Bisz@t-online.hu>
References: <9257026e0909032316h2488ffb1w29db3dad85dcb246@mail.gmail.com>	<3534837719855956578@unknownmsgid>	<9257026e0909050202t27cfcae2mbbe9ae4631ec3c5f@mail.gmail.com>	<73109AC2-0C8D-4779-AF7A-20F25244A387@syenar.hu>	<12826C8A-D98E-4185-89D0-F2B199657E6D@syenar.hu>	<FECFBC79-7C28-4C1D-8775-E4F31A4DB617@syenar.hu>
	<20090906104534.GA20927@uran.home.aster.pl>
	<002b01ca320d$2ca9f560$85fde020$@Bisz@t-online.hu>
Message-ID: <F7BAB3E5-3020-4605-8B33-7C759153AAA9@syenar.hu>

Hi Istvan,

Thank you.

Is it also working if you add 'static' to argc1/argv1?

Plus an important (administrative) request not just to you but
everyone else posting patches or source code to the list:

Please .zip these files before attaching them. otherwise it's
nearly impossible (or at least very time-consuming on my system)
to recreate the original file for commit or to be accepted by
patch tool.

Brgds,
Viktor

On 2009.09.10., at 13:52, Bisz Istv?n wrote:

> Hi,
>
> The segfault error is fixed with the a correction in  
> QApplication.cpp, see below. The problem was with 'argc' passed to  
> Qt by reference:
>
> QApplication ( int & argc, char ** argv )
>
> I just moved it out from the stack. Now the 'hbmk2 demoxbp' and  
> 'hbmk2 -static demoxbp' builds are running. Tested until now on  
> CentOS 5.3 with qtsdk-2009.03.
>
> Best regards,
> Istv?n
>
> Index: QApplication.cpp
> ===================================================================
> --- QApplication.cpp	(revision 12449)
> +++ QApplication.cpp	(working copy)
> @@ -89,6 +89,9 @@
> static QApplication * app = NULL;
> static bool hbqtinit = false;
>
> +int argc1;
> +char ** argv1;
> +
> /*
>  * QApplication ( int & argc, char ** argv )
>  * QApplication ( int & argc, char ** argv, bool GUIenabled )
> @@ -129,15 +132,17 @@
>
> static void hbqt_Init( void * cargo )
> {
> +/*
>    int argc;
>    char ** argv;
> +*/
>
>    HB_SYMBOL_UNUSED( cargo );
>
> -   argc = hb_cmdargARGC();
> -   argv = hb_cmdargARGV();
> +   argc1 = hb_cmdargARGC();
> +   argv1 = hb_cmdargARGV();
>
> -   app = new QApplication( argc, argv );
> +   app = new QApplication( argc1, argv1 );
>
>    if( app )
>       hbqtinit = true;
> @@ -145,7 +150,7 @@
>    if( ! hbqtinit )
>       hb_errInternal( 11001, "hbqt_Init(): QT Initilization Error.",  
> NULL, NULL );
>
> -   hb_cmdargInit( argc, argv );
> +   hb_cmdargInit( argc1, argv1 );
>
>    hb_vmAtExit( hbqt_Exit, NULL );
> }
>
>
> -----Original Message-----
> From: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl]
> Sent: 2009. szeptember 6. 12:46
> To: Harbour Project Main Developer List.
> Subject: Re: [Harbour] demoxbp segfault in Fedora 11
>
> On Sat, 05 Sep 2009, Szak?ts Viktor wrote:
>
> Hi,
>
>>> Yes, it is normal to exclude the fulstatic case from shared,  
>>> static and
>>> fulstatic test cases. But back to the original issue, why have we
>>> different
>> I'm not sure I understand the issue here. I'd still be interested
>> how can it happen that gpm is detected at build time but missing
>> at hbmk2 time.
>
> We do not link anything in core code using full static mode so we
> do not know if it works.
> I guess that gpm-devel is installed only with shared library and
> libgpm.a is not installed.
>
>>> behavior between shared and static builds? The same problem  
>>> appears with
>>> demoqt buils. It's time to go deeper in these issues.
>> No idea, I hope someone will be able to give some hints.
>
> Not all libraries are installed in static mode. Please also remember
> that not all features can work in static mode so full static binaries
> may not be fully functional.
>
> best regards,
> Przemek
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From elart at elart.it  Thu Sep 10 10:39:19 2009
From: elart at elart.it (elart)
Date: Thu Sep 10 10:39:25 2009
Subject: [Harbour] Ubuntu for Win compile error after update from svn rev.
	12466
Message-ID: <tDHHBch8.1252593559.3013020.marcobra@82.105.36.210>


After 12466 svn update on Ubuntu 9.04  i get this compile error on a
clean compile of sources:

Harbour compile fine

but when i try to compile Harbour for Win

cd $HOME/src/harbour
export PATH=/tmp/hbwin/bin:$PATH
make HB_PLATFORM=win

i get:

! Installing ../../lib/win/mingw/libhbcplr.a on /tmp/hbwin/lib/win/mingw
make[3]: ?../../../../../bin/win/mingw/harbour.exe? ? aggiornato.
! Installing ../../bin/win/mingw/harbour.exe on /tmp/hbwin/bin
Makefile:335: *** ! Error: zlib component required, but not available. 
Arresto.
make[1]: *** [rtl.inst] Errore 2
make: *** [source.inst] Errore 2

Best regards
From harbour.01 at syenar.hu  Thu Sep 10 11:02:21 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 10 11:02:31 2009
Subject: [Harbour] Ubuntu for Win compile error after update from svn rev.
	12466
In-Reply-To: <tDHHBch8.1252593559.3013020.marcobra@82.105.36.210>
References: <tDHHBch8.1252593559.3013020.marcobra@82.105.36.210>
Message-ID: <18DEADE8-F5E4-4531-9186-7B54E2E6672A@syenar.hu>

Yes, that seems to be "HB_XBUILD" in action.

I'll have to add extra logic to not let it suppress
internal locations from autodetection.

Brgds,
Viktor

On 2009.09.10., at 16:39, elart wrote:

>
> After 12466 svn update on Ubuntu 9.04  i get this compile error on a
> clean compile of sources:
>
> Harbour compile fine
>
> but when i try to compile Harbour for Win
>
> cd $HOME/src/harbour
> export PATH=/tmp/hbwin/bin:$PATH
> make HB_PLATFORM=win
>
> i get:
>
> ! Installing ../../lib/win/mingw/libhbcplr.a on /tmp/hbwin/lib/win/ 
> mingw
> make[3]: ?../../../../../bin/win/mingw/harbour.exe? ? aggiornato.
> ! Installing ../../bin/win/mingw/harbour.exe on /tmp/hbwin/bin
> Makefile:335: *** ! Error: zlib component required, but not available.
> Arresto.
> make[1]: *** [rtl.inst] Errore 2
> make: *** [source.inst] Errore 2
>
> Best regards
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vszakats at users.sourceforge.net  Thu Sep 10 11:14:54 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 10 11:15:00 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12467] trunk/harbour
Message-ID: <E1MllMM-0000IN-Q5@dn4whf1.ch3.sourceforge.com>

Revision: 12467
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12467&view=rev
Author:   vszakats
Date:     2009-09-10 15:14:46 +0000 (Thu, 10 Sep 2009)

Log Message:
-----------
2009-09-10 17:12 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * external/libhpdf/Makefile
  * external/libpng/Makefile
  * contrib/xhb/Makefile
  * contrib/hbmzip/Makefile
  * contrib/hbsqlit3/Makefile
  * contrib/hbqt/QApplication.cpp
  * contrib/hbhpdf/Makefile
  * source/rtl/Makefile
  * config/detfun.mk
  * config/detect.mk
    + Added separate variable to pass embedded locations to autodetection,
      so that these aren't suppressed by HB_XBUILD (now HB_BUILD_EXTDEF).
      I hope it will work, I still have to try it on Linux.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/detect.mk
    trunk/harbour/config/detfun.mk
    trunk/harbour/contrib/hbhpdf/Makefile
    trunk/harbour/contrib/hbmzip/Makefile
    trunk/harbour/contrib/hbqt/QApplication.cpp
    trunk/harbour/contrib/hbsqlit3/Makefile
    trunk/harbour/contrib/xhb/Makefile
    trunk/harbour/external/libhpdf/Makefile
    trunk/harbour/external/libpng/Makefile
    trunk/harbour/source/rtl/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Thu Sep 10 11:38:38 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 10 11:38:44 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12468]
	trunk/harbour/ChangeLog
Message-ID: <E1MlljK-0000h1-Lt@c3vjzd1.ch3.sourceforge.com>

Revision: 12468
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12468&view=rev
Author:   vszakats
Date:     2009-09-10 15:38:34 +0000 (Thu, 10 Sep 2009)

Log Message:
-----------
2009-09-10 17:37 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * ChangeLog
    ! Missed item from previous entry:
      * contrib/hbqt/QApplication.cpp
        ! Applied GPF fix for static linkage on Linux
          submitted by Istvan Bisz. Thank you very much.
        ; NOTE: I've added 'static' to the two arg* var copied.
                Please test if it's still okay.

Modified Paths:
--------------
    trunk/harbour/ChangeLog


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From ice at extreme.hu  Thu Sep 10 11:43:14 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Thu Sep 10 11:43:21 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12467] trunk/harbour
In-Reply-To: <E1MllMM-0000IN-Q5@dn4whf1.ch3.sourceforge.com>
References: <E1MllMM-0000IN-Q5@dn4whf1.ch3.sourceforge.com>
Message-ID: <alpine.GSO.2.00.0909101733350.13711@dawn.royalcomp.hu>

On Thu, 10 Sep 2009, vszakats@users.sourceforge.net wrote:

hi,

 > Revision: 12467
 >           http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12467&view=rev
 > Author:   vszakats
 > Date:     2009-09-10 15:14:46 +0000 (Thu, 10 Sep 2009)

all my tests (except the ones using watcom) are failing at essentially 
the same place, cherrypicked native linux/gcc/c mode:

! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh   
! HB_INSTALL_PREFIX: /home/ice/w/xhb/hbci/inst/linux/gcc/c
! HB_BUILD_DEBUG: yes
! HB_BUILD_OPTIM: no
! HB_BUILD_MODE: c
! HB_CONTRIBLIBS: no
! HB_HOST_PLAT: linux  HB_SHELL: sh
! HB_PLATFORM: linux 
! HB_COMPILER: gcc 
! Component: 'zlib' found in /usr/include
! Component: 'pcre' found in /usr/include
! Component: 'openssl' found in /usr/include
! Component: 'gpm' explicitly disabled
! Component: 'slang' explicitly disabled
! Component: 'curses' found in /usr/include
! Component: 'x11' found in /usr/include
! Component: 'wattcp/watt-32' not supported on linux platform
! REVISION: 12467
[...]
gcc  -I. -I../../../../../include  -Wall -W -g -DHB_TR_LEVEL_DEBUG  
  -fPIC  -ohbrun.o -c hbrun.c
gcc  -Wall -W -g -o../../../../../bin/linux/gcc/hbrun hbrun.o  
  -L../../../../../lib/linux/gcc -L/usr/X11R6/lib64 -L/usr/X11R6/lib   
  -lhbextern -lhbdebug -lhbvm -lhbrtl -lhblang -lhbcpage -lgtcgi 
  -lgtpca -lgtstd -lgtcrs -lgtxwc -lgttrm -lhbrdd -lrddntx -lrddnsx 
  -lrddcdx -lrddfpt -lhbsix -lhbhsx -lhbusrrdd -lhbuddall -lhbrtl 
  -lhbvm -lhbmacro -lhbcplr -lhbpp -lhbcommon -lhbpcre -lhbzlib 
  -lncurses -lX11  -lrt -ldl -lm
/usr/bin/ld: cannot find -lhbpcre
collect2: ld returned 1 exit status
make[3]: *** [hbrun] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [hbrun] Error 2
make: *** [utils] Error 2

watcom ones are failing at the already-reported pcre thing.

-- 
[-]

mkdir /nonexistent
From Istvan.Bisz at t-online.hu  Thu Sep 10 11:51:20 2009
From: Istvan.Bisz at t-online.hu (=?utf-8?Q?Bisz_Istv=C3=A1n?=)
Date: Thu Sep 10 11:51:36 2009
Subject: [Harbour] demoxbp segfault in Fedora 11
References: <9257026e0909032316h2488ffb1w29db3dad85dcb246@mail.gmail.com>	<3534837719855956578@unknownmsgid>	<9257026e0909050202t27cfcae2mbbe9ae4631ec3c5f@mail.gmail.com>	<73109AC2-0C8D-4779-AF7A-20F25244A387@syenar.hu>	<12826C8A-D98E-4185-89D0-F2B199657E6D@syenar.hu>	<FECFBC79-7C28-4C1D-8775-E4F31A4DB617@syenar.hu>
	<20090906104534.GA20927@uran.home.aster.pl> 
Message-ID: <000f01ca322e$8ab6f150$a024d3f0$@Bisz@t-online.hu>

Hi Viktor,

Please find attached the diff file with the latest requests implemented and tested on Fedora 11. Hopefully this corresponds to a common thinking, if not please refer to a HOWTO in written form.

Best regards,
Istv?n

-----Original Message-----
From: Bisz Istv?n [mailto:Istvan.Bisz@t-online.hu] 
Sent: 2009. szeptember 10. 16:23
To: 'Harbour Project Main Developer List.'
Subject: RE: [Harbour] demoxbp segfault in Fedora 11

Hi,

Confirmed on Fedora 11 with qt 4.5.2 as native package.

Both 'hbmk2 demoxbp' and 'hbmk2 -static demoxbp' builds are fully operational.
So the pointer to a variable resident temporary on the stack was the problem.

Best regards,
Istv?n 

-----Original Message-----
From: Bisz Istv?n [mailto:Istvan.Bisz@t-online.hu] 
Sent: 2009. szeptember 10. 13:52
To: 'Harbour Project Main Developer List.'
Subject: RE: [Harbour] demoxbp segfault in Fedora 11

Hi,

The segfault error is fixed with the a correction in QApplication.cpp, see below. The problem was with 'argc' passed to Qt by reference:

QApplication ( int & argc, char ** argv )

I just moved it out from the stack. Now the 'hbmk2 demoxbp' and 'hbmk2 -static demoxbp' builds are running. Tested until now on CentOS 5.3 with qtsdk-2009.03. 

Best regards,
Istv?n

Index: QApplication.cpp
===================================================================
--- QApplication.cpp	(revision 12449)
+++ QApplication.cpp	(working copy)
@@ -89,6 +89,9 @@
 static QApplication * app = NULL;
 static bool hbqtinit = false;
 
+int argc1;
+char ** argv1;
+
 /*
  * QApplication ( int & argc, char ** argv )
  * QApplication ( int & argc, char ** argv, bool GUIenabled )
@@ -129,15 +132,17 @@
 
 static void hbqt_Init( void * cargo )
 {
+/*
    int argc;
    char ** argv;
+*/
 
    HB_SYMBOL_UNUSED( cargo );
 
-   argc = hb_cmdargARGC();
-   argv = hb_cmdargARGV();
+   argc1 = hb_cmdargARGC();
+   argv1 = hb_cmdargARGV();
 
-   app = new QApplication( argc, argv );
+   app = new QApplication( argc1, argv1 );
 
    if( app )
       hbqtinit = true;
@@ -145,7 +150,7 @@
    if( ! hbqtinit )
       hb_errInternal( 11001, "hbqt_Init(): QT Initilization Error.", NULL, NULL );
 
-   hb_cmdargInit( argc, argv );
+   hb_cmdargInit( argc1, argv1 );
 
    hb_vmAtExit( hbqt_Exit, NULL );
 }


-----Original Message-----
From: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl] 
Sent: 2009. szeptember 6. 12:46
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] demoxbp segfault in Fedora 11

On Sat, 05 Sep 2009, Szak?ts Viktor wrote:

Hi,

>> Yes, it is normal to exclude the fulstatic case from shared, static and
>> fulstatic test cases. But back to the original issue, why have we 
>> different
> I'm not sure I understand the issue here. I'd still be interested
> how can it happen that gpm is detected at build time but missing
> at hbmk2 time.

We do not link anything in core code using full static mode so we
do not know if it works.
I guess that gpm-devel is installed only with shared library and
libgpm.a is not installed.

>> behavior between shared and static builds? The same problem appears with
>> demoqt buils. It's time to go deeper in these issues.
> No idea, I hope someone will be able to give some hints.

Not all libraries are installed in static mode. Please also remember
that not all features can work in static mode so full static binaries
may not be fully functional.

best regards,
Przemek

-------------- next part --------------
A non-text attachment was scrubbed...
Name: svn_diff_QApplication.zip
Type: application/x-zip-compressed
Size: 620 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090910/5290c0b4/svn_diff_QApplication-0001.bin
From harbour.01 at syenar.hu  Thu Sep 10 12:02:14 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 10 12:02:24 2009
Subject: [Harbour] demoxbp segfault in Fedora 11
In-Reply-To: <000f01ca322e$8ab6f150$a024d3f0$@Bisz@t-online.hu>
References: <9257026e0909032316h2488ffb1w29db3dad85dcb246@mail.gmail.com>	<3534837719855956578@unknownmsgid>	<9257026e0909050202t27cfcae2mbbe9ae4631ec3c5f@mail.gmail.com>	<73109AC2-0C8D-4779-AF7A-20F25244A387@syenar.hu>	<12826C8A-D98E-4185-89D0-F2B199657E6D@syenar.hu>	<FECFBC79-7C28-4C1D-8775-E4F31A4DB617@syenar.hu>
	<20090906104534.GA20927@uran.home.aster.pl>
	<000f01ca322e$8ab6f150$a024d3f0$@Bisz@t-online.hu>
Message-ID: <92DDB8FD-E1E0-4976-9909-8650F3FA87A6@syenar.hu>

Hi Istvan,

Thanks a lot, I've committed it with a little change in var names.

[ We don't have yet a document describing how to send in
attachments. My request was a simple and friendly one
just to help the process, patch files are extremely sensitive
to their format which makes them unusable when passing
through a medium where white spaces are not retained exactly.
I didn't plan to create a formal document about this matter,
but maybe I'll add a small section to INSTALL. ]

If you're interested I'm sure all other admins would agree
to give you write permissions to SVN, to commit directly.
You definitely have my vote.

Brgds,
Viktor

On 2009.09.10., at 17:51, Bisz Istv?n wrote:

> Hi Viktor,
>
> Please find attached the diff file with the latest requests  
> implemented and tested on Fedora 11. Hopefully this corresponds to a  
> common thinking, if not please refer to a HOWTO in written form.
>
> Best regards,
> Istv?n
>
> -----Original Message-----
> From: Bisz Istv?n [mailto:Istvan.Bisz@t-online.hu]
> Sent: 2009. szeptember 10. 16:23
> To: 'Harbour Project Main Developer List.'
> Subject: RE: [Harbour] demoxbp segfault in Fedora 11
>
> Hi,
>
> Confirmed on Fedora 11 with qt 4.5.2 as native package.
>
> Both 'hbmk2 demoxbp' and 'hbmk2 -static demoxbp' builds are fully  
> operational.
> So the pointer to a variable resident temporary on the stack was the  
> problem.
>
> Best regards,
> Istv?n
>
> -----Original Message-----
> From: Bisz Istv?n [mailto:Istvan.Bisz@t-online.hu]
> Sent: 2009. szeptember 10. 13:52
> To: 'Harbour Project Main Developer List.'
> Subject: RE: [Harbour] demoxbp segfault in Fedora 11
>
> Hi,
>
> The segfault error is fixed with the a correction in  
> QApplication.cpp, see below. The problem was with 'argc' passed to  
> Qt by reference:
>
> QApplication ( int & argc, char ** argv )
>
> I just moved it out from the stack. Now the 'hbmk2 demoxbp' and  
> 'hbmk2 -static demoxbp' builds are running. Tested until now on  
> CentOS 5.3 with qtsdk-2009.03.
>
> Best regards,
> Istv?n
>
> Index: QApplication.cpp
> ===================================================================
> --- QApplication.cpp	(revision 12449)
> +++ QApplication.cpp	(working copy)
> @@ -89,6 +89,9 @@
> static QApplication * app = NULL;
> static bool hbqtinit = false;
>
> +int argc1;
> +char ** argv1;
> +
> /*
>  * QApplication ( int & argc, char ** argv )
>  * QApplication ( int & argc, char ** argv, bool GUIenabled )
> @@ -129,15 +132,17 @@
>
> static void hbqt_Init( void * cargo )
> {
> +/*
>    int argc;
>    char ** argv;
> +*/
>
>    HB_SYMBOL_UNUSED( cargo );
>
> -   argc = hb_cmdargARGC();
> -   argv = hb_cmdargARGV();
> +   argc1 = hb_cmdargARGC();
> +   argv1 = hb_cmdargARGV();
>
> -   app = new QApplication( argc, argv );
> +   app = new QApplication( argc1, argv1 );
>
>    if( app )
>       hbqtinit = true;
> @@ -145,7 +150,7 @@
>    if( ! hbqtinit )
>       hb_errInternal( 11001, "hbqt_Init(): QT Initilization Error.",  
> NULL, NULL );
>
> -   hb_cmdargInit( argc, argv );
> +   hb_cmdargInit( argc1, argv1 );
>
>    hb_vmAtExit( hbqt_Exit, NULL );
> }
>
>
> -----Original Message-----
> From: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl]
> Sent: 2009. szeptember 6. 12:46
> To: Harbour Project Main Developer List.
> Subject: Re: [Harbour] demoxbp segfault in Fedora 11
>
> On Sat, 05 Sep 2009, Szak?ts Viktor wrote:
>
> Hi,
>
>>> Yes, it is normal to exclude the fulstatic case from shared,  
>>> static and
>>> fulstatic test cases. But back to the original issue, why have we
>>> different
>> I'm not sure I understand the issue here. I'd still be interested
>> how can it happen that gpm is detected at build time but missing
>> at hbmk2 time.
>
> We do not link anything in core code using full static mode so we
> do not know if it works.
> I guess that gpm-devel is installed only with shared library and
> libgpm.a is not installed.
>
>>> behavior between shared and static builds? The same problem  
>>> appears with
>>> demoqt buils. It's time to go deeper in these issues.
>> No idea, I hope someone will be able to give some hints.
>
> Not all libraries are installed in static mode. Please also remember
> that not all features can work in static mode so full static binaries
> may not be fully functional.
>
> best regards,
> Przemek
>
> < 
> svn_diff_QApplication.zip 
> >_______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From elart at elart.it  Thu Sep 10 12:04:28 2009
From: elart at elart.it (elart)
Date: Thu Sep 10 12:04:34 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12467] trunk/harbour
In-Reply-To: <E1MllMM-0000IN-Q5@dn4whf1.ch3.sourceforge.com>
Message-ID: <8LJfaQ5Y.1252598668.1237830.marcobra@82.105.36.210>


>Revision: 12467
>          http://harbour-project.svn.sourceforge.net/harbour-projec/?rev=12467&view=rev
>Author:   vszakats
>Date:     2009-09-10 15:14:46 +0000 (Thu, 10 Sep 2009)

Clean compile of all source code upgraded from svn: revision 12467

on Ubuntu 9.04 Desktop 32 bits (stable)
and
on Ubuntu 9.10 Desktop 32 bits (development)

was successful...

While building Harbour for Win on this Linux boxes get me the same error,
this error....

/usr/bin/i586-mingw32msvc-gcc -shared  -o
../../../../../bin/win/mingw/harbour-20.dll __dyn__.tmp -lhbpcre
-lhbzlib -lkernel32 -luser32 -lws2_32 -ladvapi32 -lgdi32
-Wl,--out-implib,../../../../../lib/win/mingw/libharbour-20.a,--output-def,../../../../../bin/win/mingw/harbour-20.def
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld:
cannot find -lhbpcre
collect2: ld returned 1 exit status
make[3]: *** [harbour-20.dll] Errore 1
make[2]: *** [descend] Errore 2
make[1]: *** [dynlib] Errore 2
make: *** [source] Errore 2
.
..
...
..
.
! Installing ../../lib/win/mingw/libhbdebug.a on /tmp/hbwin/lib/win/mingw
/usr/bin/i586-mingw32msvc-gcc -shared  -o
../../../../../bin/win/mingw/harbour-20.dll __dyn__.tmp -lhbpcre
-lhbzlib -lkernel32 -luser32 -lws2_32 -ladvapi32 -lgdi32
-Wl,--out-implib,../../../../../lib/win/mingw/libharbour-20.a,--output-def,../../../../../bin/win/mingw/harbour-20.def
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld:
cannot find -lhbpcre
collect2: ld returned 1 exit status
make[3]: *** [harbour-20.dll] Errore 1
make[2]: *** [descend] Errore 2
make[1]: *** [dynlib.inst] Errore 2
make: *** [source.inst] Errore 2
From bedipritpal at hotmail.com  Thu Sep 10 12:10:35 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Sep 10 12:10:41 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12468]
	trunk/harbour/ChangeLog
In-Reply-To: <E1MlljK-0000h1-Lt@c3vjzd1.ch3.sourceforge.com>
References: <E1MlljK-0000h1-Lt@c3vjzd1.ch3.sourceforge.com>
Message-ID: <25385901.post@talk.nabble.com>


Hi


vszakats wrote:
> 
> Revision: 12468
>          
> http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12468&view=rev
> Author:   vszakats
> Date:     2009-09-10 15:38:34 +0000 (Thu, 10 Sep 2009)
> 
> Log Message:
> -----------
> 2009-09-10 17:37 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>   * ChangeLog
>     ! Missed item from previous entry:
>       * contrib/hbqt/QApplication.cpp
>         ! Applied GPF fix for static linkage on Linux
>           submitted by Istvan Bisz. Thank you very much.
>         ; NOTE: I've added 'static' to the two arg* var copied.
>                 Please test if it's still okay.
> 

It should have been fixed in QApplication.qth.

I will do after experiments.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-12468--trunk-harbour-ChangeLog-tp25385712p25385901.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Thu Sep 10 12:12:30 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 10 12:12:39 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12467] trunk/harbour
In-Reply-To: <8LJfaQ5Y.1252598668.1237830.marcobra@82.105.36.210>
References: <8LJfaQ5Y.1252598668.1237830.marcobra@82.105.36.210>
Message-ID: <412B66E1-B9E5-41C1-8D62-2070A7F5ED19@syenar.hu>

Okay, so hbpcre lib is missing. Could you look up relevant
section in log file to see what was the reason it got
skipped? Also hbzlib lib, maybe it's also missing.

Brgds,
Viktor

On 2009.09.10., at 18:04, elart wrote:

>
>> Revision: 12467
>>         http://harbour-project.svn.sourceforge.net/harbour-projec/?rev=12467&view=rev
>> Author:   vszakats
>> Date:     2009-09-10 15:14:46 +0000 (Thu, 10 Sep 2009)
>
> Clean compile of all source code upgraded from svn: revision 12467
>
> on Ubuntu 9.04 Desktop 32 bits (stable)
> and
> on Ubuntu 9.10 Desktop 32 bits (development)
>
> was successful...
>
> While building Harbour for Win on this Linux boxes get me the same  
> error,
> this error....
>
> /usr/bin/i586-mingw32msvc-gcc -shared  -o
> ../../../../../bin/win/mingw/harbour-20.dll __dyn__.tmp -lhbpcre
> -lhbzlib -lkernel32 -luser32 -lws2_32 -ladvapi32 -lgdi32
> -Wl,--out-implib,../../../../../lib/win/mingw/libharbour-20.a,-- 
> output-def,../../../../../bin/win/mingw/harbour-20.def
> /usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586- 
> mingw32msvc/bin/ld:
> cannot find -lhbpcre
> collect2: ld returned 1 exit status
> make[3]: *** [harbour-20.dll] Errore 1
> make[2]: *** [descend] Errore 2
> make[1]: *** [dynlib] Errore 2
> make: *** [source] Errore 2
> .
> ..
> ...
> ..
> .
> ! Installing ../../lib/win/mingw/libhbdebug.a on /tmp/hbwin/lib/win/ 
> mingw
> /usr/bin/i586-mingw32msvc-gcc -shared  -o
> ../../../../../bin/win/mingw/harbour-20.dll __dyn__.tmp -lhbpcre
> -lhbzlib -lkernel32 -luser32 -lws2_32 -ladvapi32 -lgdi32
> -Wl,--out-implib,../../../../../lib/win/mingw/libharbour-20.a,-- 
> output-def,../../../../../bin/win/mingw/harbour-20.def
> /usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586- 
> mingw32msvc/bin/ld:
> cannot find -lhbpcre
> collect2: ld returned 1 exit status
> make[3]: *** [harbour-20.dll] Errore 1
> make[2]: *** [descend] Errore 2
> make[1]: *** [dynlib.inst] Errore 2
> make: *** [source.inst] Errore 2
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From ice at extreme.hu  Thu Sep 10 12:18:54 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Thu Sep 10 12:19:01 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12467] trunk/harbour
In-Reply-To: <412B66E1-B9E5-41C1-8D62-2070A7F5ED19@syenar.hu>
References: <8LJfaQ5Y.1252598668.1237830.marcobra@82.105.36.210>
	<412B66E1-B9E5-41C1-8D62-2070A7F5ED19@syenar.hu>
Message-ID: <alpine.GSO.2.00.0909101818160.13711@dawn.royalcomp.hu>

On Thu, 10 Sep 2009, Viktor Szak?ts wrote:

 > Okay, so hbpcre lib is missing. Could you look up relevant
 > section in log file to see what was the reason it got
 > skipped? Also hbzlib lib, maybe it's also missing.

for me its

! 'hbpcre' library skipped (not supported or disabled)
! 'hbzlib' library skipped (not supported or disabled)


 > 
 > Brgds,
 > Viktor
 > 
 > On 2009.09.10., at 18:04, elart wrote:
 > 
 > > 
 > > > Revision: 12467
 > > >        http://harbour-project.svn.sourceforge.net/harbour-projec/?rev=12467&view=rev
 > > > Author:   vszakats
 > > > Date:     2009-09-10 15:14:46 +0000 (Thu, 10 Sep 2009)
 > > 
 > > Clean compile of all source code upgraded from svn: revision 12467
 > > 
 > > on Ubuntu 9.04 Desktop 32 bits (stable)
 > > and
 > > on Ubuntu 9.10 Desktop 32 bits (development)
 > > 
 > > was successful...
 > > 
 > > While building Harbour for Win on this Linux boxes get me the same error,
 > > this error....
 > > 
 > > /usr/bin/i586-mingw32msvc-gcc -shared  -o
 > > ../../../../../bin/win/mingw/harbour-20.dll __dyn__.tmp -lhbpcre
 > > -lhbzlib -lkernel32 -luser32 -lws2_32 -ladvapi32 -lgdi32
 > > -Wl,--out-implib,../../../../../lib/win/mingw/libharbour-20.a,--output-def,../../../../../bin/win/mingw/harbour-20.def
 > > /usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld:
 > > cannot find -lhbpcre
 > > collect2: ld returned 1 exit status
 > > make[3]: *** [harbour-20.dll] Errore 1
 > > make[2]: *** [descend] Errore 2
 > > make[1]: *** [dynlib] Errore 2
 > > make: *** [source] Errore 2
 > > .
 > > ..
 > > ...
 > > ..
 > > .
 > > ! Installing ../../lib/win/mingw/libhbdebug.a on /tmp/hbwin/lib/win/mingw
 > > /usr/bin/i586-mingw32msvc-gcc -shared  -o
 > > ../../../../../bin/win/mingw/harbour-20.dll __dyn__.tmp -lhbpcre
 > > -lhbzlib -lkernel32 -luser32 -lws2_32 -ladvapi32 -lgdi32
 > > -Wl,--out-implib,../../../../../lib/win/mingw/libharbour-20.a,--output-def,../../../../../bin/win/mingw/harbour-20.def
 > > /usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld:
 > > cannot find -lhbpcre
 > > collect2: ld returned 1 exit status
 > > make[3]: *** [harbour-20.dll] Errore 1
 > > make[2]: *** [descend] Errore 2
 > > make[1]: *** [dynlib.inst] Errore 2
 > > make: *** [source.inst] Errore 2
 > > _______________________________________________
 > > Harbour mailing list
 > > Harbour@harbour-project.org
 > > http://lists.harbour-project.org/mailman/listinfo/harbour
 > 
 > _______________________________________________
 > Harbour mailing list
 > Harbour@harbour-project.org
 > http://lists.harbour-project.org/mailman/listinfo/harbour

-- 
[-]

mkdir /nonexistent
From M.Horodyski at pzuzycie.com.pl  Thu Sep 10 12:32:17 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Sep 10 12:32:26 2009
Subject: [Harbour] Problems with ADORDD.
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AB4B@PINK.zycie.pzu>

What can cause this error :

oErr:subCode______      3012
oErr:description__Nieprawid?owy argument // <-- wrong parameter
oErr:filename_____
oErr:operation____OPEN
oErr:genCode______         1
oErr:args_________A
Argumenty:
  1.[C]select to_char( PERSON_ID, '0000000000')
  2.[O]O

Stack :
3. WIN_OLEAUTO:OPEN(0)
2. ADO_OPEN(0)
1. DBUSEAREA(0)


I'm try send query that work in any other tool :

HB_AdoSetQuery( "select to_char( PERSON_ID, '0000000000') PERSON_ID, [...]
                 from   table_name@dbLinkName
                 where  ID = '&_ID'")
dbUseArea( .T., "ADORDD", "ALIAS_NAME",, Nil, .F.)

Many other query is worked, and here I can not find the cause of the error :(

Regards,
Marek Horodyski
From elart at elart.it  Thu Sep 10 12:37:58 2009
From: elart at elart.it (elart)
Date: Thu Sep 10 12:38:04 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12467] trunk/harbour
In-Reply-To: <412B66E1-B9E5-41C1-8D62-2070A7F5ED19@syenar.hu>
Message-ID: <BShuEhtm.1252600678.8737850.marcobra@82.105.36.210>


>Okay, so hbpcre lib is missing. Could you look up relevant
>section in log file to see what was the reason it got
>skipped? Also hbzlib lib, maybe it's also missing.
>
>Brgds,
>Viktor
>

I have sent complete long log to you...

Hope this helps, best regards and thank you
From harbour.01 at syenar.hu  Thu Sep 10 13:34:20 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 10 13:34:43 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12467] trunk/harbour
In-Reply-To: <BShuEhtm.1252600678.8737850.marcobra@82.105.36.210>
References: <BShuEhtm.1252600678.8737850.marcobra@82.105.36.210>
Message-ID: <41B6E699-3D89-48F2-91E8-E266EBA9E709@syenar.hu>

Thanks to all for logs.

I'm not near my dev PC right now, but the prob seems to be
missing libpath option from certain dynlib creation commands.
I'll do the fix a bit later today. [ some signaled no created
hbprce/hbzlib libs, but I hope these were non-cross link
scenarios. ]

Brgds,
Viktor

On 2009.09.10., at 18:37, elart wrote:

>
>> Okay, so hbpcre lib is missing. Could you look up relevant
>> section in log file to see what was the reason it got
>> skipped? Also hbzlib lib, maybe it's also missing.
>>
>> Brgds,
>> Viktor
>>
>
> I have sent complete long log to you...
>
> Hope this helps, best regards and thank you
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From Istvan.Bisz at t-online.hu  Thu Sep 10 13:50:06 2009
From: Istvan.Bisz at t-online.hu (=?utf-8?Q?Bisz_Istv=C3=A1n?=)
Date: Thu Sep 10 13:50:21 2009
Subject: [Harbour] demoxbp segfault in Fedora 11
In-Reply-To: <92DDB8FD-E1E0-4976-9909-8650F3FA87A6@syenar.hu>
References: <9257026e0909032316h2488ffb1w29db3dad85dcb246@mail.gmail.com>	<3534837719855956578@unknownmsgid>	<9257026e0909050202t27cfcae2mbbe9ae4631ec3c5f@mail.gmail.com>	<73109AC2-0C8D-4779-AF7A-20F25244A387@syenar.hu>	<12826C8A-D98E-4185-89D0-F2B199657E6D@syenar.hu>	<FECFBC79-7C28-4C1D-8775-E4F31A4DB617@syenar.hu>	<20090906104534.GA20927@uran.home.aster.pl>	<000f01ca322e$8ab6f150$a024d3f0$@Bisz@t-online.hu>
	<92DDB8FD-E1E0-4976-9909-8650F3FA87A6@syenar.hu>
Message-ID: <000801ca323f$223927e0$66ab77a0$@Bisz@t-online.hu>

Hi Viktor,

Ok, I understand. But don't forget a well designed interface... Actually I am interesting to port my test program for some fiscal printers under Harbour on different platforms. Actually I am successful just for Windows. So that?s I am so active at Linux ports.

Thanks for your words... I am open to serve this community with my limited capabilities.

Best regards,
Istv?n Bisz

-----Original Message-----
From: Viktor Szak?ts [mailto:harbour.01@syenar.hu] 
Sent: 2009. szeptember 10. 18:02
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] demoxbp segfault in Fedora 11

Hi Istvan,

Thanks a lot, I've committed it with a little change in var names.

[ We don't have yet a document describing how to send in
attachments. My request was a simple and friendly one
just to help the process, patch files are extremely sensitive
to their format which makes them unusable when passing
through a medium where white spaces are not retained exactly.
I didn't plan to create a formal document about this matter,
but maybe I'll add a small section to INSTALL. ]

If you're interested I'm sure all other admins would agree
to give you write permissions to SVN, to commit directly.
You definitely have my vote.

Brgds,
Viktor

On 2009.09.10., at 17:51, Bisz Istv?n wrote:

> Hi Viktor,
>
> Please find attached the diff file with the latest requests  
> implemented and tested on Fedora 11. Hopefully this corresponds to a  
> common thinking, if not please refer to a HOWTO in written form.
>
> Best regards,
> Istv?n
>
> -----Original Message-----
> From: Bisz Istv?n [mailto:Istvan.Bisz@t-online.hu]
> Sent: 2009. szeptember 10. 16:23
> To: 'Harbour Project Main Developer List.'
> Subject: RE: [Harbour] demoxbp segfault in Fedora 11
>
> Hi,
>
> Confirmed on Fedora 11 with qt 4.5.2 as native package.
>
> Both 'hbmk2 demoxbp' and 'hbmk2 -static demoxbp' builds are fully  
> operational.
> So the pointer to a variable resident temporary on the stack was the  
> problem.
>
> Best regards,
> Istv?n
>
> -----Original Message-----
> From: Bisz Istv?n [mailto:Istvan.Bisz@t-online.hu]
> Sent: 2009. szeptember 10. 13:52
> To: 'Harbour Project Main Developer List.'
> Subject: RE: [Harbour] demoxbp segfault in Fedora 11
>
> Hi,
>
> The segfault error is fixed with the a correction in  
> QApplication.cpp, see below. The problem was with 'argc' passed to  
> Qt by reference:
>
> QApplication ( int & argc, char ** argv )
>
> I just moved it out from the stack. Now the 'hbmk2 demoxbp' and  
> 'hbmk2 -static demoxbp' builds are running. Tested until now on  
> CentOS 5.3 with qtsdk-2009.03.
>
> Best regards,
> Istv?n
>
> Index: QApplication.cpp
> ===================================================================
> --- QApplication.cpp	(revision 12449)
> +++ QApplication.cpp	(working copy)
> @@ -89,6 +89,9 @@
> static QApplication * app = NULL;
> static bool hbqtinit = false;
>
> +int argc1;
> +char ** argv1;
> +
> /*
>  * QApplication ( int & argc, char ** argv )
>  * QApplication ( int & argc, char ** argv, bool GUIenabled )
> @@ -129,15 +132,17 @@
>
> static void hbqt_Init( void * cargo )
> {
> +/*
>    int argc;
>    char ** argv;
> +*/
>
>    HB_SYMBOL_UNUSED( cargo );
>
> -   argc = hb_cmdargARGC();
> -   argv = hb_cmdargARGV();
> +   argc1 = hb_cmdargARGC();
> +   argv1 = hb_cmdargARGV();
>
> -   app = new QApplication( argc, argv );
> +   app = new QApplication( argc1, argv1 );
>
>    if( app )
>       hbqtinit = true;
> @@ -145,7 +150,7 @@
>    if( ! hbqtinit )
>       hb_errInternal( 11001, "hbqt_Init(): QT Initilization Error.",  
> NULL, NULL );
>
> -   hb_cmdargInit( argc, argv );
> +   hb_cmdargInit( argc1, argv1 );
>
>    hb_vmAtExit( hbqt_Exit, NULL );
> }
>
>
> -----Original Message-----
> From: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl]
> Sent: 2009. szeptember 6. 12:46
> To: Harbour Project Main Developer List.
> Subject: Re: [Harbour] demoxbp segfault in Fedora 11
>
> On Sat, 05 Sep 2009, Szak?ts Viktor wrote:
>
> Hi,
>
>>> Yes, it is normal to exclude the fulstatic case from shared,  
>>> static and
>>> fulstatic test cases. But back to the original issue, why have we
>>> different
>> I'm not sure I understand the issue here. I'd still be interested
>> how can it happen that gpm is detected at build time but missing
>> at hbmk2 time.
>
> We do not link anything in core code using full static mode so we
> do not know if it works.
> I guess that gpm-devel is installed only with shared library and
> libgpm.a is not installed.
>
>>> behavior between shared and static builds? The same problem  
>>> appears with
>>> demoqt buils. It's time to go deeper in these issues.
>> No idea, I hope someone will be able to give some hints.
>
> Not all libraries are installed in static mode. Please also remember
> that not all features can work in static mode so full static binaries
> may not be fully functional.
>
> best regards,
> Przemek
>
> < 
> svn_diff_QApplication.zip 
> >_______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour



From vszakats at users.sourceforge.net  Thu Sep 10 15:58:18 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 10 15:58:24 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12469] trunk/harbour
Message-ID: <E1Mlpmc-00028h-BI@d5vjzd1.ch3.sourceforge.com>

Revision: 12469
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12469&view=rev
Author:   vszakats
Date:     2009-09-10 19:58:13 +0000 (Thu, 10 Sep 2009)

Log Message:
-----------
2009-09-10 21:36 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * INSTALL
    + Added new section "HOW TO CONTRIBUTE". Very short, ideas are
      welcome who to extend it.

  * config/bsd/gcc.mk
  * config/wce/mingwarm.mk
  * config/wce/poccarm.mk
  * config/wce/msvcarm.mk
  * config/darwin/gcc.mk
  * config/darwin/icc.mk
  * config/darwin/clang.mk
  * config/hpux/gcc.mk
  * config/win/xcc.mk
  * config/win/mingw.mk
  * config/win/pocc.mk
  * config/win/icc.mk
  * config/win/cygwin.mk
  * config/win/msvc.mk
  * config/linux/gcc.mk
  * config/linux/icc.mk
  * config/linux/sunpro.mk
  * config/os2/gcc.mk
  * config/sunos/gcc.mk
  * config/sunos/sunpro.mk
    * Synced the way LIBPATHS variable is formed and used in all
      .mk files.
    ! Fixed to pass LIBPATHS to dynlib link command too.

  * contrib/hbqt/qth/QApplication.qth
    ! Reapplyied previous patch to .qth file.

  * contrib/hbqt/generator/hbqtgen.prg
    + Added WARNING text to generated source files informing
      developers about this very fact, and pointing to .qth files
      and the generator as the proper places to make modifications.

  * contrib/hbqt/QWebSecurityOrigin.cpp
  * contrib/hbqt/QDragEnterEvent.cpp
  * contrib/hbqt/QPageSetupDialog.cpp
  * contrib/hbqt/TQToolBox.prg
  * contrib/hbqt/QTextBoundaryFinder.cpp
  * contrib/hbqt/QTextCodec.cpp
  * contrib/hbqt/QWindowsXPStyle.cpp
  * contrib/hbqt/QGridLayout.cpp
  * contrib/hbqt/TQTreeView.prg
  * contrib/hbqt/TQTextCharFormat.prg
  * contrib/hbqt/TQTextLine.prg
  * contrib/hbqt/QConicalGradient.cpp
  * contrib/hbqt/QTextLength.cpp
  * contrib/hbqt/TQRect.prg
  * contrib/hbqt/TQInputEvent.prg
  * contrib/hbqt/TQWidgetItem.prg
  * contrib/hbqt/QGradient.cpp
  * contrib/hbqt/TQTextItem.prg
  * contrib/hbqt/TQTimeEdit.prg
  * contrib/hbqt/TQDropEvent.prg
  * contrib/hbqt/QStandardItemModel.cpp
  * contrib/hbqt/TQTextObject.prg
  * contrib/hbqt/TQSizeF.prg
  * contrib/hbqt/QPicture.cpp
  * contrib/hbqt/QAction.cpp
  * contrib/hbqt/QPaintEvent.cpp
  * contrib/hbqt/TQStyleHintReturn.prg
  * contrib/hbqt/QStyledItemDelegate.cpp
  * contrib/hbqt/QAbstractListModel.cpp
  * contrib/hbqt/QWidget.cpp
  * contrib/hbqt/TQProgressBar.prg
  * contrib/hbqt/TQFontDatabase.prg
  * contrib/hbqt/QFontDialog.cpp
  * contrib/hbqt/QToolBox.cpp
  * contrib/hbqt/QResource.cpp
  * contrib/hbqt/TQLineEdit.prg
  * contrib/hbqt/TQHBoxLayout.prg
  * contrib/hbqt/TQWebHistory.prg
  * contrib/hbqt/QMouseEvent.cpp
  * contrib/hbqt/QTextEdit.cpp
  * contrib/hbqt/TQToolBar.prg
  * contrib/hbqt/TQAbstractItemModel.prg
  * contrib/hbqt/TQTreeWidget.prg
  * contrib/hbqt/QPointF.cpp
  * contrib/hbqt/QFontComboBox.cpp
  * contrib/hbqt/QStyle.cpp
  * contrib/hbqt/TQSplitter.prg
  * contrib/hbqt/TQComboBox.prg
  * contrib/hbqt/QStyleOptionHeader.cpp
  * contrib/hbqt/QListView.cpp
  * contrib/hbqt/QWheelEvent.cpp
  * contrib/hbqt/QRadialGradient.cpp
  * contrib/hbqt/QLayout.cpp
  * contrib/hbqt/QCursor.cpp
  * contrib/hbqt/TQProgressDialog.prg
  * contrib/hbqt/QLabel.cpp
  * contrib/hbqt/TQBoxLayout.prg
  * contrib/hbqt/QFocusEvent.cpp
  * contrib/hbqt/QStyleHintReturn.cpp
  * contrib/hbqt/QStyleOptionToolButton.cpp
  * contrib/hbqt/QStylePainter.cpp
  * contrib/hbqt/QBrush.cpp
  * contrib/hbqt/QWebPluginFactory.cpp
  * contrib/hbqt/TQRadioButton.prg
  * contrib/hbqt/TQSystemTrayIcon.prg
  * contrib/hbqt/TQListWidgetItem.prg
  * contrib/hbqt/QLinearGradient.cpp
  * contrib/hbqt/QProgressBar.cpp
  * contrib/hbqt/TQTextFrame.prg
  * contrib/hbqt/TQTextBlock.prg
  * contrib/hbqt/QDragLeaveEvent.cpp
  * contrib/hbqt/TQStyleOptionViewItem.prg
  * contrib/hbqt/QClipboard.cpp
  * contrib/hbqt/QStyleOptionTabBarBase.cpp
  * contrib/hbqt/QStyleOptionToolBox.cpp
  * contrib/hbqt/QStringList.cpp
  * contrib/hbqt/QToolBar.cpp
  * contrib/hbqt/TQTextBlockFormat.prg
  * contrib/hbqt/TQStatusBar.prg
  * contrib/hbqt/TQTextFrameFormat.prg
  * contrib/hbqt/QFontMetricsF.cpp
  * contrib/hbqt/TQTextDecoder.prg
  * contrib/hbqt/TQTabWidget.prg
  * contrib/hbqt/TQLCDNumber.prg
  * contrib/hbqt/TQMainWindow.prg
  * contrib/hbqt/QToolButton.cpp
  * contrib/hbqt/TQStyleOptionTitleBar.prg
  * contrib/hbqt/QWindowsStyle.cpp
  * contrib/hbqt/TQDockWidget.prg
  * contrib/hbqt/QColor.cpp
  * contrib/hbqt/QListWidget.cpp
  * contrib/hbqt/QTextLayout.cpp
  * contrib/hbqt/TQSound.prg
  * contrib/hbqt/QSignalMapper.cpp
  * contrib/hbqt/QTextCursor.cpp
  * contrib/hbqt/TQPoint.prg
  * contrib/hbqt/QTextDocument.cpp
  * contrib/hbqt/TQGradient.prg
  * contrib/hbqt/TQWebSettings.prg
  * contrib/hbqt/QRadioButton.cpp
  * contrib/hbqt/TQWizard.prg
  * contrib/hbqt/TQAbstractPrintDialog.prg
  * contrib/hbqt/TQApplication.prg
  * contrib/hbqt/QAbstractButton.cpp
  * contrib/hbqt/QStyleOptionViewItem.cpp
  * contrib/hbqt/TQCoreApplication.prg
  * contrib/hbqt/QTextFrameFormat.cpp
  * contrib/hbqt/QTextBlockFormat.cpp
  * contrib/hbqt/TQInputDialog.prg
  * contrib/hbqt/QTextDecoder.cpp
  * contrib/hbqt/QSize.cpp
  * contrib/hbqt/TQEvent.prg
  * contrib/hbqt/TQKeySequence.prg
  * contrib/hbqt/QBitmap.cpp
  * contrib/hbqt/QStyleOptionToolBar.cpp
  * contrib/hbqt/QCalendarWidget.cpp
  * contrib/hbqt/TQPrinter.prg
  * contrib/hbqt/QStyleOptionTitleBar.cpp
  * contrib/hbqt/TQResource.prg
  * contrib/hbqt/QScrollBar.cpp
  * contrib/hbqt/QHeaderView.cpp
  * contrib/hbqt/TQTextEdit.prg
  * contrib/hbqt/QStyleOptionButton.cpp
  * contrib/hbqt/QCommandLinkButton.cpp
  * contrib/hbqt/TQFontComboBox.prg
  * contrib/hbqt/QFocusFrame.cpp
  * contrib/hbqt/QSizePolicy.cpp
  * contrib/hbqt/QWebSettings.cpp
  * contrib/hbqt/QAbstractPrintDialog.cpp
  * contrib/hbqt/TQStyleOptionSizeGrip.prg
  * contrib/hbqt/TQListView.prg
  * contrib/hbqt/QApplication.cpp
  * contrib/hbqt/QAbstractSlider.cpp
  * contrib/hbqt/TQTextBlockGroup.prg
  * contrib/hbqt/QObject.cpp
  * contrib/hbqt/QTextFragment.cpp
  * contrib/hbqt/TQStyleOptionGroupBox.prg
  * contrib/hbqt/QAbstractScrollArea.cpp
  * contrib/hbqt/QCoreApplication.cpp
  * contrib/hbqt/TQPrintEngine.prg
  * contrib/hbqt/TQStylePainter.prg
  * contrib/hbqt/TQWebPluginFactory.prg
  * contrib/hbqt/QInputDialog.cpp
  * contrib/hbqt/QTimer.cpp
  * contrib/hbqt/QKeySequence.cpp
  * contrib/hbqt/TQFtp.prg
  * contrib/hbqt/QPrinter.cpp
  * contrib/hbqt/TQMessageBox.prg
  * contrib/hbqt/QKeyEvent.cpp
  * contrib/hbqt/QTextCharFormat.cpp
  * contrib/hbqt/TQUrl.prg
  * contrib/hbqt/QStyleOptionSlider.cpp
  * contrib/hbqt/TQFontMetricsF.prg
  * contrib/hbqt/TQDragMoveEvent.prg
  * contrib/hbqt/QInputEvent.cpp
  * contrib/hbqt/TQWebView.prg
  * contrib/hbqt/QWidgetItem.cpp
  * contrib/hbqt/TQCommonStyle.prg
  * contrib/hbqt/QMenu.cpp
  * contrib/hbqt/TQPushButton.prg
  * contrib/hbqt/TQWindowsStyle.prg
  * contrib/hbqt/TQEventLoop.prg
  * contrib/hbqt/QStyleOptionSizeGrip.cpp
  * contrib/hbqt/TQDoubleSpinBox.prg
  * contrib/hbqt/TQWebHistoryItem.prg
  * contrib/hbqt/QTextObject.cpp
  * contrib/hbqt/TQSignalMapper.prg
  * contrib/hbqt/TQTableView.prg
  * contrib/hbqt/TQTreeWidgetItem.prg
  * contrib/hbqt/TQTextDocument.prg
  * contrib/hbqt/QStyleOptionGroupBox.cpp
  * contrib/hbqt/TQButtonGroup.prg
  * contrib/hbqt/QFontInfo.cpp
  * contrib/hbqt/QImage.cpp
  * contrib/hbqt/QPrintEngine.cpp
  * contrib/hbqt/TQFrame.prg
  * contrib/hbqt/QLine.cpp
  * contrib/hbqt/TQTextFormat.prg
  * contrib/hbqt/QIcon.cpp
  * contrib/hbqt/TQColorDialog.prg
  * contrib/hbqt/QFtp.cpp
  * contrib/hbqt/TQStyleOptionProgressBar.prg
  * contrib/hbqt/QHBoxLayout.cpp
  * contrib/hbqt/QWebHistory.cpp
  * contrib/hbqt/QUrl.cpp
  * contrib/hbqt/TQStyleHintReturnVariant.prg
  * contrib/hbqt/QRectF.cpp
  * contrib/hbqt/QTreeWidget.cpp
  * contrib/hbqt/TQSize.prg
  * contrib/hbqt/TQWebSecurityOrigin.prg
  * contrib/hbqt/TQProcess.prg
  * contrib/hbqt/QWebView.cpp
  * contrib/hbqt/QCommonStyle.cpp
  * contrib/hbqt/TQStyleOptionTab.prg
  * contrib/hbqt/TQTextDocumentWriter.prg
  * contrib/hbqt/TQTextCodec.prg
  * contrib/hbqt/TQStringListModel.prg
  * contrib/hbqt/QAbstractItemView.cpp
  * contrib/hbqt/QHttp.cpp
  * contrib/hbqt/QWebHitTestResult.cpp
  * contrib/hbqt/TQTextBrowser.prg
  * contrib/hbqt/QProgressDialog.cpp
  * contrib/hbqt/TQTableWidget.prg
  * contrib/hbqt/TQTabBar.prg
  * contrib/hbqt/QStyleFactory.cpp
  * contrib/hbqt/QButtonGroup.cpp
  * contrib/hbqt/TQFileDialog.prg
  * contrib/hbqt/TQDialog.prg
  * contrib/hbqt/TQTextStream.prg
  * contrib/hbqt/TQStandardItemModel.prg
  * contrib/hbqt/TQFormLayout.prg
  * contrib/hbqt/QSystemTrayIcon.cpp
  * contrib/hbqt/QStyleOptionDockWidget.cpp
  * contrib/hbqt/QListWidgetItem.cpp
  * contrib/hbqt/QColorDialog.cpp
  * contrib/hbqt/QStyleOptionTabWidgetFrame.cpp
  * contrib/hbqt/TQFileSystemModel.prg
  * contrib/hbqt/TQAbstractSpinBox.prg
  * contrib/hbqt/TQTextFragment.prg
  * contrib/hbqt/QDateTimeEdit.cpp
  * contrib/hbqt/TQVBoxLayout.prg
  * contrib/hbqt/QStyleOptionFocusRect.cpp
  * contrib/hbqt/QMoveEvent.cpp
  * contrib/hbqt/TQImageWriter.prg
  * contrib/hbqt/TQAbstractListModel.prg
  * contrib/hbqt/QMainWindow.cpp
  * contrib/hbqt/QDesktopWidget.cpp
  * contrib/hbqt/QProcess.cpp
  * contrib/hbqt/QWidgetAction.cpp
  * contrib/hbqt/TQModelIndex.prg
  * contrib/hbqt/TQMenuBar.prg
  * contrib/hbqt/QStringListModel.cpp
  * contrib/hbqt/TQKeyEvent.prg
  * contrib/hbqt/QDockWidget.cpp
  * contrib/hbqt/TQPaintDevice.prg
  * contrib/hbqt/TQStyleOptionMenuItem.prg
  * contrib/hbqt/TQFontMetrics.prg
  * contrib/hbqt/QTextBrowser.cpp
  * contrib/hbqt/TQStyle.prg
  * contrib/hbqt/QTableWidget.cpp
  * contrib/hbqt/TQStyleOptionHeader.prg
  * contrib/hbqt/QErrorMessage.cpp
  * contrib/hbqt/TQMenu.prg
  * contrib/hbqt/QWizard.cpp
  * contrib/hbqt/QFileSystemModel.cpp
  * contrib/hbqt/TQPrintDialog.prg
  * contrib/hbqt/QAbstractSpinBox.cpp
  * contrib/hbqt/TQPrintPreviewDialog.prg
  * contrib/hbqt/TQLabel.prg
  * contrib/hbqt/QDial.cpp
  * contrib/hbqt/TQWebHistoryInterface.prg
  * contrib/hbqt/TQStyleOptionComboBox.prg
  * contrib/hbqt/TQFontInfo.prg
  * contrib/hbqt/TQSlider.prg
  * contrib/hbqt/TQBrush.prg
  * contrib/hbqt/TQStyleOptionToolButton.prg
  * contrib/hbqt/QImageWriter.cpp
  * contrib/hbqt/filelist.mk
  * contrib/hbqt/TQScrollArea.prg
  * contrib/hbqt/TQLine.prg
  * contrib/hbqt/TQIcon.prg
  * contrib/hbqt/TQLayoutItem.prg
  * contrib/hbqt/TQAbstractTableModel.prg
  * contrib/hbqt/QIODevice.cpp
  * contrib/hbqt/TQPixmap.prg
  * contrib/hbqt/QMenuBar.cpp
  * contrib/hbqt/TQClipboard.prg
  * contrib/hbqt/TQTextImageFormat.prg
  * contrib/hbqt/TQStyleOptionTabBarBase.prg
  * contrib/hbqt/QPaintDevice.cpp
  * contrib/hbqt/QStyleOptionMenuItem.cpp
  * contrib/hbqt/QFontMetrics.cpp
  * contrib/hbqt/TQImageReader.prg
  * contrib/hbqt/QDropEvent.cpp
  * contrib/hbqt/TQAbstractItemView.prg
  * contrib/hbqt/TQColor.prg
  * contrib/hbqt/TQDir.prg
  * contrib/hbqt/TQHttp.prg
  * contrib/hbqt/TQStyleOptionComplex.prg
  * contrib/hbqt/TQWebHitTestResult.prg
  * contrib/hbqt/QPrintDialog.cpp
  * contrib/hbqt/QTextBlockGroup.cpp
  * contrib/hbqt/TQRegion.prg
  * contrib/hbqt/QStandardItem.cpp
  * contrib/hbqt/QLatin1String.cpp
  * contrib/hbqt/QSizeF.cpp
  * contrib/hbqt/TQLatin1Char.prg
  * contrib/hbqt/QWebHistoryInterface.cpp
  * contrib/hbqt/QStyleOptionComboBox.cpp
  * contrib/hbqt/TQStyleFactory.prg
  * contrib/hbqt/TQStyleOptionSpinBox.prg
  * contrib/hbqt/TQPalette.prg
  * contrib/hbqt/QSplashScreen.cpp
  * contrib/hbqt/TQDateTimeEdit.prg
  * contrib/hbqt/TQPainter.prg
  * contrib/hbqt/QSizeGrip.cpp
  * contrib/hbqt/QMessageBox.cpp
  * contrib/hbqt/TQResizeEvent.prg
  * contrib/hbqt/QTextImageFormat.cpp
  * contrib/hbqt/TQStyleOptionFocusRect.prg
  * contrib/hbqt/QAbstractItemModel.cpp
  * contrib/hbqt/QGroupBox.cpp
  * contrib/hbqt/QImageReader.cpp
  * contrib/hbqt/TQDragEnterEvent.prg
  * contrib/hbqt/QTextDocumentFragment.cpp
  * contrib/hbqt/TQTextBoundaryFinder.prg
  * contrib/hbqt/QPushButton.cpp
  * contrib/hbqt/TQWidgetAction.prg
  * contrib/hbqt/TQScrollBar.prg
  * contrib/hbqt/TQGridLayout.prg
  * contrib/hbqt/TQWindowsXPStyle.prg
  * contrib/hbqt/QWebHistoryItem.cpp
  * contrib/hbqt/QDir.cpp
  * contrib/hbqt/TQStyleOptionButton.prg
  * contrib/hbqt/TQTextLength.prg
  * contrib/hbqt/QTreeWidgetItem.cpp
  * contrib/hbqt/TQCommandLinkButton.prg
  * contrib/hbqt/QBoxLayout.cpp
  * contrib/hbqt/TQErrorMessage.prg
  * contrib/hbqt/QDateTime.cpp
  * contrib/hbqt/QTextFormat.cpp
  * contrib/hbqt/QPalette.cpp
  * contrib/hbqt/QTextBlock.cpp
  * contrib/hbqt/QTextFrame.cpp
  * contrib/hbqt/QPainter.cpp
  * contrib/hbqt/QResizeEvent.cpp
  * contrib/hbqt/TQDial.prg
  * contrib/hbqt/QStyleOptionProgressBar.cpp
  * contrib/hbqt/TQTableWidgetItem.prg
  * contrib/hbqt/TQAction.prg
  * contrib/hbqt/TQPaintEvent.prg
  * contrib/hbqt/QStyleHintReturnVariant.cpp
  * contrib/hbqt/QStatusBar.cpp
  * contrib/hbqt/TQStyledItemDelegate.prg
  * contrib/hbqt/TQTimer.prg
  * contrib/hbqt/QTabWidget.cpp
  * contrib/hbqt/QTextInlineObject.cpp
  * contrib/hbqt/QLCDNumber.cpp
  * contrib/hbqt/QList.cpp
  * contrib/hbqt/TQWidget.prg
  * contrib/hbqt/QStyleOptionTab.cpp
  * contrib/hbqt/TQFontDialog.prg
  * contrib/hbqt/QTextDocumentWriter.cpp
  * contrib/hbqt/TQIODevice.prg
  * contrib/hbqt/TQStyleOption.prg
  * contrib/hbqt/QDateEdit.cpp
  * contrib/hbqt/TQMouseEvent.prg
  * contrib/hbqt/QCheckBox.cpp
  * contrib/hbqt/TQStyleOptionSlider.prg
  * contrib/hbqt/QSound.cpp
  * contrib/hbqt/QWebFrame.cpp
  * contrib/hbqt/QPoint.cpp
  * contrib/hbqt/TQPointF.prg
  * contrib/hbqt/QTabBar.cpp
  * contrib/hbqt/QDirModel.cpp
  * contrib/hbqt/QFileDialog.cpp
  * contrib/hbqt/QDialog.cpp
  * contrib/hbqt/QTextStream.cpp
  * contrib/hbqt/TQWheelEvent.prg
  * contrib/hbqt/QFormLayout.cpp
  * contrib/hbqt/QStyleOptionFrame.cpp
  * contrib/hbqt/TQWebPage.prg
  * contrib/hbqt/TQRadialGradient.prg
  * contrib/hbqt/QFont.cpp
  * contrib/hbqt/TQCursor.prg
  * contrib/hbqt/TQLayout.prg
  * contrib/hbqt/TQLatin1String.prg
  * contrib/hbqt/TQStandardItem.prg
  * contrib/hbqt/QTableWidgetItem.cpp
  * contrib/hbqt/TQFocusEvent.prg
  * contrib/hbqt/TQImage.prg
  * contrib/hbqt/TQSpinBox.prg
  * contrib/hbqt/QVBoxLayout.cpp
  * contrib/hbqt/QEvent.cpp
  * contrib/hbqt/TQLinearGradient.prg
  * contrib/hbqt/TQSplashScreen.prg
  * contrib/hbqt/TQDragLeaveEvent.prg
  * contrib/hbqt/TQSizeGrip.prg
  * contrib/hbqt/QModelIndex.cpp
  * contrib/hbqt/QStyleOption.cpp
  * contrib/hbqt/TQStyleHintReturnMask.prg
  * contrib/hbqt/TQStyleOptionToolBox.prg
  * contrib/hbqt/QTreeView.cpp
  * contrib/hbqt/TQStringList.prg
  * contrib/hbqt/QTextLine.cpp
  * contrib/hbqt/TQRectF.prg
  * contrib/hbqt/QRect.cpp
  * contrib/hbqt/TQGroupBox.prg
  * contrib/hbqt/TQTextDocumentFragment.prg
  * contrib/hbqt/TQToolButton.prg
  * contrib/hbqt/QTextItem.cpp
  * contrib/hbqt/QTimeEdit.cpp
  * contrib/hbqt/TQListWidget.prg
  * contrib/hbqt/QWebPage.cpp
  * contrib/hbqt/TQTextLayout.prg
  * contrib/hbqt/TQTextCursor.prg
  * contrib/hbqt/TQPen.prg
  * contrib/hbqt/QPrintPreviewDialog.cpp
  * contrib/hbqt/TQTextEncoder.prg
  * contrib/hbqt/QSlider.cpp
  * contrib/hbqt/QSpinBox.cpp
  * contrib/hbqt/TQDateTime.prg
  * contrib/hbqt/QScrollArea.cpp
  * contrib/hbqt/TQStyleOptionDockWidget.prg
  * contrib/hbqt/TQAbstractButton.prg
  * contrib/hbqt/TQStyleOptionTabWidgetFrame.prg
  * contrib/hbqt/QFontDatabase.cpp
  * contrib/hbqt/QAbstractTableModel.cpp
  * contrib/hbqt/QLayoutItem.cpp
  * contrib/hbqt/QLineEdit.cpp
  * contrib/hbqt/TQVariant.prg
  * contrib/hbqt/QPixmap.cpp
  * contrib/hbqt/QStyleHintReturnMask.cpp
  * contrib/hbqt/TQMoveEvent.prg
  * contrib/hbqt/TQTextInlineObject.prg
  * contrib/hbqt/TQList.prg
  * contrib/hbqt/QDragMoveEvent.cpp
  * contrib/hbqt/TQStyleOptionToolBar.prg
  * contrib/hbqt/TQBitmap.prg
  * contrib/hbqt/QSplitter.cpp
  * contrib/hbqt/TQCalendarWidget.prg
  * contrib/hbqt/TQDesktopWidget.prg
  * contrib/hbqt/TQPageSetupDialog.prg
  * contrib/hbqt/QComboBox.cpp
  * contrib/hbqt/QEventLoop.cpp
  * contrib/hbqt/QDoubleSpinBox.cpp
  * contrib/hbqt/TQDateEdit.prg
  * contrib/hbqt/TQHeaderView.prg
  * contrib/hbqt/TQCheckBox.prg
  * contrib/hbqt/TQConicalGradient.prg
  * contrib/hbqt/QStyleOptionComplex.cpp
  * contrib/hbqt/QTableView.cpp
  * contrib/hbqt/TQWebFrame.prg
  * contrib/hbqt/QPen.cpp
  * contrib/hbqt/QRegion.cpp
  * contrib/hbqt/QTextEncoder.cpp
  * contrib/hbqt/TQFocusFrame.prg
  * contrib/hbqt/TQSizePolicy.prg
  * contrib/hbqt/QLatin1Char.cpp
  * contrib/hbqt/TQDirModel.prg
  * contrib/hbqt/QFrame.cpp
  * contrib/hbqt/QStyleOptionSpinBox.cpp
  * contrib/hbqt/TQStyleOptionFrame.prg
  * contrib/hbqt/TQFont.prg
  * contrib/hbqt/TQAbstractSlider.prg
  * contrib/hbqt/TQObject.prg
  * contrib/hbqt/QVariant.cpp
  * contrib/hbqt/TQAbstractScrollArea.prg
  * contrib/hbqt/TQPicture.prg
    * Regenerated code, now with WARNING message.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/config/bsd/gcc.mk
    trunk/harbour/config/darwin/clang.mk
    trunk/harbour/config/darwin/gcc.mk
    trunk/harbour/config/darwin/icc.mk
    trunk/harbour/config/hpux/gcc.mk
    trunk/harbour/config/linux/gcc.mk
    trunk/harbour/config/linux/icc.mk
    trunk/harbour/config/linux/sunpro.mk
    trunk/harbour/config/os2/gcc.mk
    trunk/harbour/config/sunos/gcc.mk
    trunk/harbour/config/sunos/sunpro.mk
    trunk/harbour/config/wce/mingwarm.mk
    trunk/harbour/config/wce/msvcarm.mk
    trunk/harbour/config/wce/poccarm.mk
    trunk/harbour/config/win/cygwin.mk
    trunk/harbour/config/win/icc.mk
    trunk/harbour/config/win/mingw.mk
    trunk/harbour/config/win/msvc.mk
    trunk/harbour/config/win/pocc.mk
    trunk/harbour/config/win/xcc.mk
    trunk/harbour/contrib/hbqt/QAbstractButton.cpp
    trunk/harbour/contrib/hbqt/QAbstractItemModel.cpp
    trunk/harbour/contrib/hbqt/QAbstractItemView.cpp
    trunk/harbour/contrib/hbqt/QAbstractListModel.cpp
    trunk/harbour/contrib/hbqt/QAbstractPrintDialog.cpp
    trunk/harbour/contrib/hbqt/QAbstractScrollArea.cpp
    trunk/harbour/contrib/hbqt/QAbstractSlider.cpp
    trunk/harbour/contrib/hbqt/QAbstractSpinBox.cpp
    trunk/harbour/contrib/hbqt/QAbstractTableModel.cpp
    trunk/harbour/contrib/hbqt/QAction.cpp
    trunk/harbour/contrib/hbqt/QApplication.cpp
    trunk/harbour/contrib/hbqt/QBitmap.cpp
    trunk/harbour/contrib/hbqt/QBoxLayout.cpp
    trunk/harbour/contrib/hbqt/QBrush.cpp
    trunk/harbour/contrib/hbqt/QButtonGroup.cpp
    trunk/harbour/contrib/hbqt/QCalendarWidget.cpp
    trunk/harbour/contrib/hbqt/QCheckBox.cpp
    trunk/harbour/contrib/hbqt/QClipboard.cpp
    trunk/harbour/contrib/hbqt/QColor.cpp
    trunk/harbour/contrib/hbqt/QColorDialog.cpp
    trunk/harbour/contrib/hbqt/QComboBox.cpp
    trunk/harbour/contrib/hbqt/QCommandLinkButton.cpp
    trunk/harbour/contrib/hbqt/QCommonStyle.cpp
    trunk/harbour/contrib/hbqt/QConicalGradient.cpp
    trunk/harbour/contrib/hbqt/QCoreApplication.cpp
    trunk/harbour/contrib/hbqt/QCursor.cpp
    trunk/harbour/contrib/hbqt/QDateEdit.cpp
    trunk/harbour/contrib/hbqt/QDateTime.cpp
    trunk/harbour/contrib/hbqt/QDateTimeEdit.cpp
    trunk/harbour/contrib/hbqt/QDesktopWidget.cpp
    trunk/harbour/contrib/hbqt/QDial.cpp
    trunk/harbour/contrib/hbqt/QDialog.cpp
    trunk/harbour/contrib/hbqt/QDir.cpp
    trunk/harbour/contrib/hbqt/QDirModel.cpp
    trunk/harbour/contrib/hbqt/QDockWidget.cpp
    trunk/harbour/contrib/hbqt/QDoubleSpinBox.cpp
    trunk/harbour/contrib/hbqt/QDragEnterEvent.cpp
    trunk/harbour/contrib/hbqt/QDragLeaveEvent.cpp
    trunk/harbour/contrib/hbqt/QDragMoveEvent.cpp
    trunk/harbour/contrib/hbqt/QDropEvent.cpp
    trunk/harbour/contrib/hbqt/QErrorMessage.cpp
    trunk/harbour/contrib/hbqt/QEvent.cpp
    trunk/harbour/contrib/hbqt/QEventLoop.cpp
    trunk/harbour/contrib/hbqt/QFileDialog.cpp
    trunk/harbour/contrib/hbqt/QFileSystemModel.cpp
    trunk/harbour/contrib/hbqt/QFocusEvent.cpp
    trunk/harbour/contrib/hbqt/QFocusFrame.cpp
    trunk/harbour/contrib/hbqt/QFont.cpp
    trunk/harbour/contrib/hbqt/QFontComboBox.cpp
    trunk/harbour/contrib/hbqt/QFontDatabase.cpp
    trunk/harbour/contrib/hbqt/QFontDialog.cpp
    trunk/harbour/contrib/hbqt/QFontInfo.cpp
    trunk/harbour/contrib/hbqt/QFontMetrics.cpp
    trunk/harbour/contrib/hbqt/QFontMetricsF.cpp
    trunk/harbour/contrib/hbqt/QFormLayout.cpp
    trunk/harbour/contrib/hbqt/QFrame.cpp
    trunk/harbour/contrib/hbqt/QFtp.cpp
    trunk/harbour/contrib/hbqt/QGradient.cpp
    trunk/harbour/contrib/hbqt/QGridLayout.cpp
    trunk/harbour/contrib/hbqt/QGroupBox.cpp
    trunk/harbour/contrib/hbqt/QHBoxLayout.cpp
    trunk/harbour/contrib/hbqt/QHeaderView.cpp
    trunk/harbour/contrib/hbqt/QHttp.cpp
    trunk/harbour/contrib/hbqt/QIODevice.cpp
    trunk/harbour/contrib/hbqt/QIcon.cpp
    trunk/harbour/contrib/hbqt/QImage.cpp
    trunk/harbour/contrib/hbqt/QImageReader.cpp
    trunk/harbour/contrib/hbqt/QImageWriter.cpp
    trunk/harbour/contrib/hbqt/QInputDialog.cpp
    trunk/harbour/contrib/hbqt/QInputEvent.cpp
    trunk/harbour/contrib/hbqt/QKeyEvent.cpp
    trunk/harbour/contrib/hbqt/QKeySequence.cpp
    trunk/harbour/contrib/hbqt/QLCDNumber.cpp
    trunk/harbour/contrib/hbqt/QLabel.cpp
    trunk/harbour/contrib/hbqt/QLatin1Char.cpp
    trunk/harbour/contrib/hbqt/QLatin1String.cpp
    trunk/harbour/contrib/hbqt/QLayout.cpp
    trunk/harbour/contrib/hbqt/QLayoutItem.cpp
    trunk/harbour/contrib/hbqt/QLine.cpp
    trunk/harbour/contrib/hbqt/QLineEdit.cpp
    trunk/harbour/contrib/hbqt/QLinearGradient.cpp
    trunk/harbour/contrib/hbqt/QList.cpp
    trunk/harbour/contrib/hbqt/QListView.cpp
    trunk/harbour/contrib/hbqt/QListWidget.cpp
    trunk/harbour/contrib/hbqt/QListWidgetItem.cpp
    trunk/harbour/contrib/hbqt/QMainWindow.cpp
    trunk/harbour/contrib/hbqt/QMenu.cpp
    trunk/harbour/contrib/hbqt/QMenuBar.cpp
    trunk/harbour/contrib/hbqt/QMessageBox.cpp
    trunk/harbour/contrib/hbqt/QModelIndex.cpp
    trunk/harbour/contrib/hbqt/QMouseEvent.cpp
    trunk/harbour/contrib/hbqt/QMoveEvent.cpp
    trunk/harbour/contrib/hbqt/QObject.cpp
    trunk/harbour/contrib/hbqt/QPageSetupDialog.cpp
    trunk/harbour/contrib/hbqt/QPaintDevice.cpp
    trunk/harbour/contrib/hbqt/QPaintEvent.cpp
    trunk/harbour/contrib/hbqt/QPainter.cpp
    trunk/harbour/contrib/hbqt/QPalette.cpp
    trunk/harbour/contrib/hbqt/QPen.cpp
    trunk/harbour/contrib/hbqt/QPicture.cpp
    trunk/harbour/contrib/hbqt/QPixmap.cpp
    trunk/harbour/contrib/hbqt/QPoint.cpp
    trunk/harbour/contrib/hbqt/QPointF.cpp
    trunk/harbour/contrib/hbqt/QPrintDialog.cpp
    trunk/harbour/contrib/hbqt/QPrintEngine.cpp
    trunk/harbour/contrib/hbqt/QPrintPreviewDialog.cpp
    trunk/harbour/contrib/hbqt/QPrinter.cpp
    trunk/harbour/contrib/hbqt/QProcess.cpp
    trunk/harbour/contrib/hbqt/QProgressBar.cpp
    trunk/harbour/contrib/hbqt/QProgressDialog.cpp
    trunk/harbour/contrib/hbqt/QPushButton.cpp
    trunk/harbour/contrib/hbqt/QRadialGradient.cpp
    trunk/harbour/contrib/hbqt/QRadioButton.cpp
    trunk/harbour/contrib/hbqt/QRect.cpp
    trunk/harbour/contrib/hbqt/QRectF.cpp
    trunk/harbour/contrib/hbqt/QRegion.cpp
    trunk/harbour/contrib/hbqt/QResizeEvent.cpp
    trunk/harbour/contrib/hbqt/QResource.cpp
    trunk/harbour/contrib/hbqt/QScrollArea.cpp
    trunk/harbour/contrib/hbqt/QScrollBar.cpp
    trunk/harbour/contrib/hbqt/QSignalMapper.cpp
    trunk/harbour/contrib/hbqt/QSize.cpp
    trunk/harbour/contrib/hbqt/QSizeF.cpp
    trunk/harbour/contrib/hbqt/QSizeGrip.cpp
    trunk/harbour/contrib/hbqt/QSizePolicy.cpp
    trunk/harbour/contrib/hbqt/QSlider.cpp
    trunk/harbour/contrib/hbqt/QSound.cpp
    trunk/harbour/contrib/hbqt/QSpinBox.cpp
    trunk/harbour/contrib/hbqt/QSplashScreen.cpp
    trunk/harbour/contrib/hbqt/QSplitter.cpp
    trunk/harbour/contrib/hbqt/QStandardItem.cpp
    trunk/harbour/contrib/hbqt/QStandardItemModel.cpp
    trunk/harbour/contrib/hbqt/QStatusBar.cpp
    trunk/harbour/contrib/hbqt/QStringList.cpp
    trunk/harbour/contrib/hbqt/QStringListModel.cpp
    trunk/harbour/contrib/hbqt/QStyle.cpp
    trunk/harbour/contrib/hbqt/QStyleFactory.cpp
    trunk/harbour/contrib/hbqt/QStyleHintReturn.cpp
    trunk/harbour/contrib/hbqt/QStyleHintReturnMask.cpp
    trunk/harbour/contrib/hbqt/QStyleHintReturnVariant.cpp
    trunk/harbour/contrib/hbqt/QStyleOption.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionButton.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionComboBox.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionComplex.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionDockWidget.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionFocusRect.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionFrame.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionGroupBox.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionHeader.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionMenuItem.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionProgressBar.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionSizeGrip.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionSlider.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionSpinBox.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionTab.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionTabBarBase.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionTabWidgetFrame.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionTitleBar.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionToolBar.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionToolBox.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionToolButton.cpp
    trunk/harbour/contrib/hbqt/QStyleOptionViewItem.cpp
    trunk/harbour/contrib/hbqt/QStylePainter.cpp
    trunk/harbour/contrib/hbqt/QStyledItemDelegate.cpp
    trunk/harbour/contrib/hbqt/QSystemTrayIcon.cpp
    trunk/harbour/contrib/hbqt/QTabBar.cpp
    trunk/harbour/contrib/hbqt/QTabWidget.cpp
    trunk/harbour/contrib/hbqt/QTableView.cpp
    trunk/harbour/contrib/hbqt/QTableWidget.cpp
    trunk/harbour/contrib/hbqt/QTableWidgetItem.cpp
    trunk/harbour/contrib/hbqt/QTextBlock.cpp
    trunk/harbour/contrib/hbqt/QTextBlockFormat.cpp
    trunk/harbour/contrib/hbqt/QTextBlockGroup.cpp
    trunk/harbour/contrib/hbqt/QTextBoundaryFinder.cpp
    trunk/harbour/contrib/hbqt/QTextBrowser.cpp
    trunk/harbour/contrib/hbqt/QTextCharFormat.cpp
    trunk/harbour/contrib/hbqt/QTextCodec.cpp
    trunk/harbour/contrib/hbqt/QTextCursor.cpp
    trunk/harbour/contrib/hbqt/QTextDecoder.cpp
    trunk/harbour/contrib/hbqt/QTextDocument.cpp
    trunk/harbour/contrib/hbqt/QTextDocumentFragment.cpp
    trunk/harbour/contrib/hbqt/QTextDocumentWriter.cpp
    trunk/harbour/contrib/hbqt/QTextEdit.cpp
    trunk/harbour/contrib/hbqt/QTextEncoder.cpp
    trunk/harbour/contrib/hbqt/QTextFormat.cpp
    trunk/harbour/contrib/hbqt/QTextFragment.cpp
    trunk/harbour/contrib/hbqt/QTextFrame.cpp
    trunk/harbour/contrib/hbqt/QTextFrameFormat.cpp
    trunk/harbour/contrib/hbqt/QTextImageFormat.cpp
    trunk/harbour/contrib/hbqt/QTextInlineObject.cpp
    trunk/harbour/contrib/hbqt/QTextItem.cpp
    trunk/harbour/contrib/hbqt/QTextLayout.cpp
    trunk/harbour/contrib/hbqt/QTextLength.cpp
    trunk/harbour/contrib/hbqt/QTextLine.cpp
    trunk/harbour/contrib/hbqt/QTextObject.cpp
    trunk/harbour/contrib/hbqt/QTextStream.cpp
    trunk/harbour/contrib/hbqt/QTimeEdit.cpp
    trunk/harbour/contrib/hbqt/QTimer.cpp
    trunk/harbour/contrib/hbqt/QToolBar.cpp
    trunk/harbour/contrib/hbqt/QToolBox.cpp
    trunk/harbour/contrib/hbqt/QToolButton.cpp
    trunk/harbour/contrib/hbqt/QTreeView.cpp
    trunk/harbour/contrib/hbqt/QTreeWidget.cpp
    trunk/harbour/contrib/hbqt/QTreeWidgetItem.cpp
    trunk/harbour/contrib/hbqt/QUrl.cpp
    trunk/harbour/contrib/hbqt/QVBoxLayout.cpp
    trunk/harbour/contrib/hbqt/QVariant.cpp
    trunk/harbour/contrib/hbqt/QWebFrame.cpp
    trunk/harbour/contrib/hbqt/QWebHistory.cpp
    trunk/harbour/contrib/hbqt/QWebHistoryInterface.cpp
    trunk/harbour/contrib/hbqt/QWebHistoryItem.cpp
    trunk/harbour/contrib/hbqt/QWebHitTestResult.cpp
    trunk/harbour/contrib/hbqt/QWebPage.cpp
    trunk/harbour/contrib/hbqt/QWebPluginFactory.cpp
    trunk/harbour/contrib/hbqt/QWebSecurityOrigin.cpp
    trunk/harbour/contrib/hbqt/QWebSettings.cpp
    trunk/harbour/contrib/hbqt/QWebView.cpp
    trunk/harbour/contrib/hbqt/QWheelEvent.cpp
    trunk/harbour/contrib/hbqt/QWidget.cpp
    trunk/harbour/contrib/hbqt/QWidgetAction.cpp
    trunk/harbour/contrib/hbqt/QWidgetItem.cpp
    trunk/harbour/contrib/hbqt/QWindowsStyle.cpp
    trunk/harbour/contrib/hbqt/QWindowsXPStyle.cpp
    trunk/harbour/contrib/hbqt/QWizard.cpp
    trunk/harbour/contrib/hbqt/TQAbstractButton.prg
    trunk/harbour/contrib/hbqt/TQAbstractItemModel.prg
    trunk/harbour/contrib/hbqt/TQAbstractItemView.prg
    trunk/harbour/contrib/hbqt/TQAbstractListModel.prg
    trunk/harbour/contrib/hbqt/TQAbstractPrintDialog.prg
    trunk/harbour/contrib/hbqt/TQAbstractScrollArea.prg
    trunk/harbour/contrib/hbqt/TQAbstractSlider.prg
    trunk/harbour/contrib/hbqt/TQAbstractSpinBox.prg
    trunk/harbour/contrib/hbqt/TQAbstractTableModel.prg
    trunk/harbour/contrib/hbqt/TQAction.prg
    trunk/harbour/contrib/hbqt/TQApplication.prg
    trunk/harbour/contrib/hbqt/TQBitmap.prg
    trunk/harbour/contrib/hbqt/TQBoxLayout.prg
    trunk/harbour/contrib/hbqt/TQBrush.prg
    trunk/harbour/contrib/hbqt/TQButtonGroup.prg
    trunk/harbour/contrib/hbqt/TQCalendarWidget.prg
    trunk/harbour/contrib/hbqt/TQCheckBox.prg
    trunk/harbour/contrib/hbqt/TQClipboard.prg
    trunk/harbour/contrib/hbqt/TQColor.prg
    trunk/harbour/contrib/hbqt/TQColorDialog.prg
    trunk/harbour/contrib/hbqt/TQComboBox.prg
    trunk/harbour/contrib/hbqt/TQCommandLinkButton.prg
    trunk/harbour/contrib/hbqt/TQCommonStyle.prg
    trunk/harbour/contrib/hbqt/TQConicalGradient.prg
    trunk/harbour/contrib/hbqt/TQCoreApplication.prg
    trunk/harbour/contrib/hbqt/TQCursor.prg
    trunk/harbour/contrib/hbqt/TQDateEdit.prg
    trunk/harbour/contrib/hbqt/TQDateTime.prg
    trunk/harbour/contrib/hbqt/TQDateTimeEdit.prg
    trunk/harbour/contrib/hbqt/TQDesktopWidget.prg
    trunk/harbour/contrib/hbqt/TQDial.prg
    trunk/harbour/contrib/hbqt/TQDialog.prg
    trunk/harbour/contrib/hbqt/TQDir.prg
    trunk/harbour/contrib/hbqt/TQDirModel.prg
    trunk/harbour/contrib/hbqt/TQDockWidget.prg
    trunk/harbour/contrib/hbqt/TQDoubleSpinBox.prg
    trunk/harbour/contrib/hbqt/TQDragEnterEvent.prg
    trunk/harbour/contrib/hbqt/TQDragLeaveEvent.prg
    trunk/harbour/contrib/hbqt/TQDragMoveEvent.prg
    trunk/harbour/contrib/hbqt/TQDropEvent.prg
    trunk/harbour/contrib/hbqt/TQErrorMessage.prg
    trunk/harbour/contrib/hbqt/TQEvent.prg
    trunk/harbour/contrib/hbqt/TQEventLoop.prg
    trunk/harbour/contrib/hbqt/TQFileDialog.prg
    trunk/harbour/contrib/hbqt/TQFileSystemModel.prg
    trunk/harbour/contrib/hbqt/TQFocusEvent.prg
    trunk/harbour/contrib/hbqt/TQFocusFrame.prg
    trunk/harbour/contrib/hbqt/TQFont.prg
    trunk/harbour/contrib/hbqt/TQFontComboBox.prg
    trunk/harbour/contrib/hbqt/TQFontDatabase.prg
    trunk/harbour/contrib/hbqt/TQFontDialog.prg
    trunk/harbour/contrib/hbqt/TQFontInfo.prg
    trunk/harbour/contrib/hbqt/TQFontMetrics.prg
    trunk/harbour/contrib/hbqt/TQFontMetricsF.prg
    trunk/harbour/contrib/hbqt/TQFormLayout.prg
    trunk/harbour/contrib/hbqt/TQFrame.prg
    trunk/harbour/contrib/hbqt/TQFtp.prg
    trunk/harbour/contrib/hbqt/TQGradient.prg
    trunk/harbour/contrib/hbqt/TQGridLayout.prg
    trunk/harbour/contrib/hbqt/TQGroupBox.prg
    trunk/harbour/contrib/hbqt/TQHBoxLayout.prg
    trunk/harbour/contrib/hbqt/TQHeaderView.prg
    trunk/harbour/contrib/hbqt/TQHttp.prg
    trunk/harbour/contrib/hbqt/TQIODevice.prg
    trunk/harbour/contrib/hbqt/TQIcon.prg
    trunk/harbour/contrib/hbqt/TQImage.prg
    trunk/harbour/contrib/hbqt/TQImageReader.prg
    trunk/harbour/contrib/hbqt/TQImageWriter.prg
    trunk/harbour/contrib/hbqt/TQInputDialog.prg
    trunk/harbour/contrib/hbqt/TQInputEvent.prg
    trunk/harbour/contrib/hbqt/TQKeyEvent.prg
    trunk/harbour/contrib/hbqt/TQKeySequence.prg
    trunk/harbour/contrib/hbqt/TQLCDNumber.prg
    trunk/harbour/contrib/hbqt/TQLabel.prg
    trunk/harbour/contrib/hbqt/TQLatin1Char.prg
    trunk/harbour/contrib/hbqt/TQLatin1String.prg
    trunk/harbour/contrib/hbqt/TQLayout.prg
    trunk/harbour/contrib/hbqt/TQLayoutItem.prg
    trunk/harbour/contrib/hbqt/TQLine.prg
    trunk/harbour/contrib/hbqt/TQLineEdit.prg
    trunk/harbour/contrib/hbqt/TQLinearGradient.prg
    trunk/harbour/contrib/hbqt/TQList.prg
    trunk/harbour/contrib/hbqt/TQListView.prg
    trunk/harbour/contrib/hbqt/TQListWidget.prg
    trunk/harbour/contrib/hbqt/TQListWidgetItem.prg
    trunk/harbour/contrib/hbqt/TQMainWindow.prg
    trunk/harbour/contrib/hbqt/TQMenu.prg
    trunk/harbour/contrib/hbqt/TQMenuBar.prg
    trunk/harbour/contrib/hbqt/TQMessageBox.prg
    trunk/harbour/contrib/hbqt/TQModelIndex.prg
    trunk/harbour/contrib/hbqt/TQMouseEvent.prg
    trunk/harbour/contrib/hbqt/TQMoveEvent.prg
    trunk/harbour/contrib/hbqt/TQObject.prg
    trunk/harbour/contrib/hbqt/TQPageSetupDialog.prg
    trunk/harbour/contrib/hbqt/TQPaintDevice.prg
    trunk/harbour/contrib/hbqt/TQPaintEvent.prg
    trunk/harbour/contrib/hbqt/TQPainter.prg
    trunk/harbour/contrib/hbqt/TQPalette.prg
    trunk/harbour/contrib/hbqt/TQPen.prg
    trunk/harbour/contrib/hbqt/TQPicture.prg
    trunk/harbour/contrib/hbqt/TQPixmap.prg
    trunk/harbour/contrib/hbqt/TQPoint.prg
    trunk/harbour/contrib/hbqt/TQPointF.prg
    trunk/harbour/contrib/hbqt/TQPrintDialog.prg
    trunk/harbour/contrib/hbqt/TQPrintEngine.prg
    trunk/harbour/contrib/hbqt/TQPrintPreviewDialog.prg
    trunk/harbour/contrib/hbqt/TQPrinter.prg
    trunk/harbour/contrib/hbqt/TQProcess.prg
    trunk/harbour/contrib/hbqt/TQProgressBar.prg
    trunk/harbour/contrib/hbqt/TQProgressDialog.prg
    trunk/harbour/contrib/hbqt/TQPushButton.prg
    trunk/harbour/contrib/hbqt/TQRadialGradient.prg
    trunk/harbour/contrib/hbqt/TQRadioButton.prg
    trunk/harbour/contrib/hbqt/TQRect.prg
    trunk/harbour/contrib/hbqt/TQRectF.prg
    trunk/harbour/contrib/hbqt/TQRegion.prg
    trunk/harbour/contrib/hbqt/TQResizeEvent.prg
    trunk/harbour/contrib/hbqt/TQResource.prg
    trunk/harbour/contrib/hbqt/TQScrollArea.prg
    trunk/harbour/contrib/hbqt/TQScrollBar.prg
    trunk/harbour/contrib/hbqt/TQSignalMapper.prg
    trunk/harbour/contrib/hbqt/TQSize.prg
    trunk/harbour/contrib/hbqt/TQSizeF.prg
    trunk/harbour/contrib/hbqt/TQSizeGrip.prg
    trunk/harbour/contrib/hbqt/TQSizePolicy.prg
    trunk/harbour/contrib/hbqt/TQSlider.prg
    trunk/harbour/contrib/hbqt/TQSound.prg
    trunk/harbour/contrib/hbqt/TQSpinBox.prg
    trunk/harbour/contrib/hbqt/TQSplashScreen.prg
    trunk/harbour/contrib/hbqt/TQSplitter.prg
    trunk/harbour/contrib/hbqt/TQStandardItem.prg
    trunk/harbour/contrib/hbqt/TQStandardItemModel.prg
    trunk/harbour/contrib/hbqt/TQStatusBar.prg
    trunk/harbour/contrib/hbqt/TQStringList.prg
    trunk/harbour/contrib/hbqt/TQStringListModel.prg
    trunk/harbour/contrib/hbqt/TQStyle.prg
    trunk/harbour/contrib/hbqt/TQStyleFactory.prg
    trunk/harbour/contrib/hbqt/TQStyleHintReturn.prg
    trunk/harbour/contrib/hbqt/TQStyleHintReturnMask.prg
    trunk/harbour/contrib/hbqt/TQStyleHintReturnVariant.prg
    trunk/harbour/contrib/hbqt/TQStyleOption.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionButton.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionComboBox.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionComplex.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionDockWidget.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionFocusRect.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionFrame.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionGroupBox.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionHeader.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionMenuItem.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionProgressBar.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionSizeGrip.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionSlider.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionSpinBox.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionTab.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionTabBarBase.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionTabWidgetFrame.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionTitleBar.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionToolBar.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionToolBox.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionToolButton.prg
    trunk/harbour/contrib/hbqt/TQStyleOptionViewItem.prg
    trunk/harbour/contrib/hbqt/TQStylePainter.prg
    trunk/harbour/contrib/hbqt/TQStyledItemDelegate.prg
    trunk/harbour/contrib/hbqt/TQSystemTrayIcon.prg
    trunk/harbour/contrib/hbqt/TQTabBar.prg
    trunk/harbour/contrib/hbqt/TQTabWidget.prg
    trunk/harbour/contrib/hbqt/TQTableView.prg
    trunk/harbour/contrib/hbqt/TQTableWidget.prg
    trunk/harbour/contrib/hbqt/TQTableWidgetItem.prg
    trunk/harbour/contrib/hbqt/TQTextBlock.prg
    trunk/harbour/contrib/hbqt/TQTextBlockFormat.prg
    trunk/harbour/contrib/hbqt/TQTextBlockGroup.prg
    trunk/harbour/contrib/hbqt/TQTextBoundaryFinder.prg
    trunk/harbour/contrib/hbqt/TQTextBrowser.prg
    trunk/harbour/contrib/hbqt/TQTextCharFormat.prg
    trunk/harbour/contrib/hbqt/TQTextCodec.prg
    trunk/harbour/contrib/hbqt/TQTextCursor.prg
    trunk/harbour/contrib/hbqt/TQTextDecoder.prg
    trunk/harbour/contrib/hbqt/TQTextDocument.prg
    trunk/harbour/contrib/hbqt/TQTextDocumentFragment.prg
    trunk/harbour/contrib/hbqt/TQTextDocumentWriter.prg
    trunk/harbour/contrib/hbqt/TQTextEdit.prg
    trunk/harbour/contrib/hbqt/TQTextEncoder.prg
    trunk/harbour/contrib/hbqt/TQTextFormat.prg
    trunk/harbour/contrib/hbqt/TQTextFragment.prg
    trunk/harbour/contrib/hbqt/TQTextFrame.prg
    trunk/harbour/contrib/hbqt/TQTextFrameFormat.prg
    trunk/harbour/contrib/hbqt/TQTextImageFormat.prg
    trunk/harbour/contrib/hbqt/TQTextInlineObject.prg
    trunk/harbour/contrib/hbqt/TQTextItem.prg
    trunk/harbour/contrib/hbqt/TQTextLayout.prg
    trunk/harbour/contrib/hbqt/TQTextLength.prg
    trunk/harbour/contrib/hbqt/TQTextLine.prg
    trunk/harbour/contrib/hbqt/TQTextObject.prg
    trunk/harbour/contrib/hbqt/TQTextStream.prg
    trunk/harbour/contrib/hbqt/TQTimeEdit.prg
    trunk/harbour/contrib/hbqt/TQTimer.prg
    trunk/harbour/contrib/hbqt/TQToolBar.prg
    trunk/harbour/contrib/hbqt/TQToolBox.prg
    trunk/harbour/contrib/hbqt/TQToolButton.prg
    trunk/harbour/contrib/hbqt/TQTreeView.prg
    trunk/harbour/contrib/hbqt/TQTreeWidget.prg
    trunk/harbour/contrib/hbqt/TQTreeWidgetItem.prg
    trunk/harbour/contrib/hbqt/TQUrl.prg
    trunk/harbour/contrib/hbqt/TQVBoxLayout.prg
    trunk/harbour/contrib/hbqt/TQVariant.prg
    trunk/harbour/contrib/hbqt/TQWebFrame.prg
    trunk/harbour/contrib/hbqt/TQWebHistory.prg
    trunk/harbour/contrib/hbqt/TQWebHistoryInterface.prg
    trunk/harbour/contrib/hbqt/TQWebHistoryItem.prg
    trunk/harbour/contrib/hbqt/TQWebHitTestResult.prg
    trunk/harbour/contrib/hbqt/TQWebPage.prg
    trunk/harbour/contrib/hbqt/TQWebPluginFactory.prg
    trunk/harbour/contrib/hbqt/TQWebSecurityOrigin.prg
    trunk/harbour/contrib/hbqt/TQWebSettings.prg
    trunk/harbour/contrib/hbqt/TQWebView.prg
    trunk/harbour/contrib/hbqt/TQWheelEvent.prg
    trunk/harbour/contrib/hbqt/TQWidget.prg
    trunk/harbour/contrib/hbqt/TQWidgetAction.prg
    trunk/harbour/contrib/hbqt/TQWidgetItem.prg
    trunk/harbour/contrib/hbqt/TQWindowsStyle.prg
    trunk/harbour/contrib/hbqt/TQWindowsXPStyle.prg
    trunk/harbour/contrib/hbqt/TQWizard.prg
    trunk/harbour/contrib/hbqt/filelist.mk
    trunk/harbour/contrib/hbqt/generator/hbqtgen.prg
    trunk/harbour/contrib/hbqt/qth/QApplication.qth


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From ranier at cultura.com.br  Thu Sep 10 16:01:52 2009
From: ranier at cultura.com.br (Ranier Vilela)
Date: Thu Sep 10 16:00:04 2009
Subject: [Harbour] Problems with ADORDD.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AB4B@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AB4B@PINK.zycie.pzu>
Message-ID: <4AA95B30.1030700@cultura.com.br>

Horodyski Marek (PZUZ) escreveu:
> What can cause this error :
>
> oErr:subCode______      3012
> oErr:description__Nieprawid?owy argument // <-- wrong parameter
> oErr:filename_____
> oErr:operation____OPEN
> oErr:genCode______         1
> oErr:args_________A
> Argumenty:
>   1.[C]select to_char( PERSON_ID, '0000000000')
>   2.[O]O
>
> Stack :
> 3. WIN_OLEAUTO:OPEN(0)
> 2. ADO_OPEN(0)
> 1. DBUSEAREA(0)
>
>
> I'm try send query that work in any other tool :
>
> HB_AdoSetQuery( "select to_char( PERSON_ID, '0000000000') PERSON_ID, [...]
>                  from   table_name@dbLinkName
>                  where  ID = '&_ID'")
> dbUseArea( .T., "ADORDD", "ALIAS_NAME",, Nil, .F.)
>
> Many other query is worked, and here I can not find the cause of the error :(
>
> Regards,
> Marek Horodyski
>   
Proballly ADORDD is broken because is ole intensive and ole was changed 
in Harbour.
ADORDD need review to suport new ole api in Harbour?

Best regards,

Ranier Vilela

From eghorbino at yahoo.com  Thu Sep 10 16:53:58 2009
From: eghorbino at yahoo.com (Edmer)
Date: Thu Sep 10 16:54:04 2009
Subject: [Harbour] Problems with ADORDD.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AB4B@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AB4B@PINK.zycie.pzu>
Message-ID: <25390830.post@talk.nabble.com>


And ADO_SEEK() is still not working.

Thanks,
Ed



Horodyski Marek (PZUZ) wrote:
> 
> What can cause this error :
> 
> oErr:subCode______      3012
> oErr:description__Nieprawid?owy argument // <-- wrong parameter
> oErr:filename_____
> oErr:operation____OPEN
> oErr:genCode______         1
> oErr:args_________A
> Argumenty:
>   1.[C]select to_char( PERSON_ID, '0000000000')
>   2.[O]O
> 
> Stack :
> 3. WIN_OLEAUTO:OPEN(0)
> 2. ADO_OPEN(0)
> 1. DBUSEAREA(0)
> 
> 
> I'm try send query that work in any other tool :
> 
> HB_AdoSetQuery( "select to_char( PERSON_ID, '0000000000') PERSON_ID, [...]
>                  from   table_name@dbLinkName
>                  where  ID = '&_ID'")
> dbUseArea( .T., "ADORDD", "ALIAS_NAME",, Nil, .F.)
> 
> Many other query is worked, and here I can not find the cause of the error
> :(
> 
> Regards,
> Marek Horodyski
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/Problems-with-ADORDD.-tp25386708p25390830.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From ice at extreme.hu  Thu Sep 10 16:55:24 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Thu Sep 10 16:55:31 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12467] trunk/harbour
In-Reply-To: <41B6E699-3D89-48F2-91E8-E266EBA9E709@syenar.hu>
References: <BShuEhtm.1252600678.8737850.marcobra@82.105.36.210>
	<41B6E699-3D89-48F2-91E8-E266EBA9E709@syenar.hu>
Message-ID: <alpine.GSO.2.00.0909102246490.13711@dawn.royalcomp.hu>

On Thu, 10 Sep 2009, Viktor Szak?ts wrote:

here's some extra info which may mean something.

if i switch on to use the bundled zlib and pcre with

HB_WITH_ZLIB=yes
HB_WITH_PCRE=yes
HB_INC_PCRE=$( realpath harbour-build/external/pcre/ )
HB_INC_ZLIB=$( realpath harbour-build/external/zlib/ )

then everything is back to semi-normal (ie. only watcoms fail on 
pcre).

 > Thanks to all for logs.
 > 
 > I'm not near my dev PC right now, but the prob seems to be
 > missing libpath option from certain dynlib creation commands.
 > I'll do the fix a bit later today. [ some signaled no created
 > hbprce/hbzlib libs, but I hope these were non-cross link
 > scenarios. ]

-- 
[-]

mkdir /nonexistent
From harbour.01 at syenar.hu  Thu Sep 10 17:01:43 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 10 17:01:53 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12467] trunk/harbour
In-Reply-To: <alpine.GSO.2.00.0909102246490.13711@dawn.royalcomp.hu>
References: <BShuEhtm.1252600678.8737850.marcobra@82.105.36.210>
	<41B6E699-3D89-48F2-91E8-E266EBA9E709@syenar.hu>
	<alpine.GSO.2.00.0909102246490.13711@dawn.royalcomp.hu>
Message-ID: <3304306C-9EDF-440C-B3BB-192682DDC942@syenar.hu>

Okay, what are the errors without these settings? The goal
would be to use system libs on *nixes.

I'm stuck with the watcom thing, no idea how to fix it,
I hope Przemek or someone else will be able to comment
on it. Let's focus on rest of compilers until then.

Brgds,
Viktor

On 2009.09.10., at 22:55, Tamas TEVESZ wrote:

> On Thu, 10 Sep 2009, Viktor Szak?ts wrote:
>
> here's some extra info which may mean something.
>
> if i switch on to use the bundled zlib and pcre with
>
> HB_WITH_ZLIB=yes
> HB_WITH_PCRE=yes
> HB_INC_PCRE=$( realpath harbour-build/external/pcre/ )
> HB_INC_ZLIB=$( realpath harbour-build/external/zlib/ )
>
> then everything is back to semi-normal (ie. only watcoms fail on
> pcre).
>
>> Thanks to all for logs.
>>
>> I'm not near my dev PC right now, but the prob seems to be
>> missing libpath option from certain dynlib creation commands.
>> I'll do the fix a bit later today. [ some signaled no created
>> hbprce/hbzlib libs, but I hope these were non-cross link
>> scenarios. ]
>
> -- 
> [-]
>
> mkdir /nonexistent
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From ice at extreme.hu  Thu Sep 10 17:14:09 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Thu Sep 10 17:14:18 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12467] trunk/harbour
In-Reply-To: <3304306C-9EDF-440C-B3BB-192682DDC942@syenar.hu>
References: <BShuEhtm.1252600678.8737850.marcobra@82.105.36.210>
	<41B6E699-3D89-48F2-91E8-E266EBA9E709@syenar.hu>
	<alpine.GSO.2.00.0909102246490.13711@dawn.royalcomp.hu>
	<3304306C-9EDF-440C-B3BB-192682DDC942@syenar.hu>
Message-ID: <alpine.GSO.2.00.0909102311060.13711@dawn.royalcomp.hu>

On Thu, 10 Sep 2009, Viktor Szak?ts wrote:

 > Okay, what are the errors without these settings? The goal
 > would be to use system libs on *nixes.

find attached the complete build log. points of interest seem to be:

! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh   
! HB_INSTALL_PREFIX: /home/ice/w/xhb/hbci/inst/linux/gcc/c
! HB_BUILD_DEBUG: yes
! HB_BUILD_OPTIM: no
! HB_BUILD_MODE: c
! HB_CONTRIBLIBS: no
! HB_HOST_PLAT: linux  HB_SHELL: sh
! HB_PLATFORM: linux 
! HB_COMPILER: gcc 
! Component: 'zlib' found in /usr/include
! Component: 'pcre' found in /usr/include
! Component: 'openssl' found in /usr/include
! Component: 'gpm' explicitly disabled
! Component: 'slang' explicitly disabled
! Component: 'curses' found in /usr/include
! Component: 'x11' found in /usr/include
! Component: 'wattcp/watt-32' not supported on linux platform
! REVISION: 12469
make[2]: Nothing to be done for `all'.
make[1]: Nothing to be done for `all'.
[...]
! 'libpng' library skipped 
! 'hbpcre' library skipped (not supported or disabled)
! 'sqlite3' library skipped (not supported or disabled)
! 'hbzlib' library skipped (not supported or disabled)
[...]
gcc  -Wall -W -g -o../../../../../bin/linux/gcc/hbrun hbrun.o  
 -L../../../../../lib/linux/gcc -L/usr/X11R6/lib64 -L/usr/X11R6/lib   
 -lhbextern -lhbdebug -lhbvm -lhbrtl -lhblang -lhbcpage -lgtcgi 
 -lgtpca -lgtstd -lgtcrs -lgtxwc -lgttrm -lhbrdd -lrddntx -lrddnsx 
 -lrddcdx -lrddfpt -lhbsix -lhbhsx -lhbusrrdd -lhbuddall -lhbrtl -lhbvm 
 -lhbmacro -lhbcplr -lhbpp -lhbcommon -lhbpcre -lhbzlib -lncurses 
 -lX11 -lrt -ldl -lm
/usr/bin/ld: cannot find -lhbpcre
collect2: ld returned 1 exit status
make[3]: *** [hbrun] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [hbrun] Error 2
make: *** [utils] Error 2


 > 
 > I'm stuck with the watcom thing, no idea how to fix it,
 > I hope Przemek or someone else will be able to comment
 > on it. Let's focus on rest of compilers until then.
 > 
 > Brgds,
 > Viktor
 > 
 > On 2009.09.10., at 22:55, Tamas TEVESZ wrote:
 > 
 > > On Thu, 10 Sep 2009, Viktor Szak?ts wrote:
 > > 
 > > here's some extra info which may mean something.
 > > 
 > > if i switch on to use the bundled zlib and pcre with
 > > 
 > > HB_WITH_ZLIB=yes
 > > HB_WITH_PCRE=yes
 > > HB_INC_PCRE=$( realpath harbour-build/external/pcre/ )
 > > HB_INC_ZLIB=$( realpath harbour-build/external/zlib/ )
 > > 
 > > then everything is back to semi-normal (ie. only watcoms fail on
 > > pcre).
 > > 
 > > > Thanks to all for logs.
 > > > 
 > > > I'm not near my dev PC right now, but the prob seems to be
 > > > missing libpath option from certain dynlib creation commands.
 > > > I'll do the fix a bit later today. [ some signaled no created
 > > > hbprce/hbzlib libs, but I hope these were non-cross link
 > > > scenarios. ]
 > > 
 > > -- 
 > > [-]
 > > 
 > > mkdir /nonexistent
 > > _______________________________________________
 > > Harbour mailing list
 > > Harbour@harbour-project.org
 > > http://lists.harbour-project.org/mailman/listinfo/harbour
 > 
 > _______________________________________________
 > Harbour mailing list
 > Harbour@harbour-project.org
 > http://lists.harbour-project.org/mailman/listinfo/harbour
 > 

-- 
[-]

mkdir /nonexistent
-------------- next part --------------
A non-text attachment was scrubbed...
Name: log_linux_gcc_c.zip
Type: application/zip
Size: 15311 bytes
Desc: 
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090910/e5032391/log_linux_gcc_c-0001.zip
From druzus at acn.waw.pl  Thu Sep 10 17:39:28 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 10 17:39:34 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12467] trunk/harbour
In-Reply-To: <3304306C-9EDF-440C-B3BB-192682DDC942@syenar.hu>
References: <BShuEhtm.1252600678.8737850.marcobra@82.105.36.210>
	<41B6E699-3D89-48F2-91E8-E266EBA9E709@syenar.hu>
	<alpine.GSO.2.00.0909102246490.13711@dawn.royalcomp.hu>
	<3304306C-9EDF-440C-B3BB-192682DDC942@syenar.hu>
Message-ID: <20090910213928.GA31019@uran.home.aster.pl>

On Thu, 10 Sep 2009, Szak?ts Viktor wrote:
> Okay, what are the errors without these settings?

Still the same. HBPCRE and HBZLIB is not found during linking.

   [...]/bin/ld: cannot find -lhbpcre
   collect2: ld returned 1 exit status
   make[3]: *** [hbi18n] B??d 1

Probably because HB_HAS_ZLIB* and HB_HAS_PCRE* are not exported
so during linking hbzlib and hbpcre is used instead of system libraries.
BTW replicating detection logic in rtl/Makefile is very bad idea.
I strongly prefer to eliminate such things and export variables.
If necesary use real path or pseudo value like "[ROOT]" inside
include paths and then replace it with $(TOP)$(ROOT).
I also suggest to use in include directory detection 'firstword'
function. Otherwise it's possible that header files will be found
in more then one location and some very old implementation with
not all header files used by our code will be included 1-st.
It may cause that wrong binaries will be created instead of compile
time error.

> The goal would be to use system libs on *nixes.

How can I force using harbour version for 'external' libraries?
Please remember that we do not have any version detection and
simple header scan may not be enough so sometimes user needs
to use local version.

> I'm stuck with the watcom thing, no idea how to fix it,
> I hope Przemek or someone else will be able to comment
> on it. Let's focus on rest of compilers until then.

Lets make base builds working 1-st then we can look for other
problems. Now I do not know how it should look in final version.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Sep  9 11:08:47 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 10 17:45:03 2009
Subject: [Harbour] win_prt.c and win_tprt.prg
In-Reply-To: <4AA7B970.4020703@mweb.co.za>
References: <4AA67558.1040906@mweb.co.za>
	<96B0F2F4-FE8E-415D-8E8C-CAB22A86707D@syenar.hu>
	<4AA7B970.4020703@mweb.co.za>
Message-ID: <17C052B6-0F87-456D-863E-229C331060FB@syenar.hu>

Thanks Alex.

May I ask you to send it as attachments? (if you did this already,
pls try .zipping it first)

[ this way formatting is lost in various ways depending on how
I'm trying to extract/copy it. ]

Brgds,
Viktor

On 2009.09.09., at 16:19, Alex Strickland wrote:

> Viktor Szak?ts wrote:
>
>> Initialization is better be done dynamically if we want to
>> avoid consuming a relatively large amount of space in .exe files.
>> This needs some extra logic. Of course the while thing could
>> get dynamically allocated COM port structures to really
>> make it scalable.
>> 256 is the maximum offered by NT systems, so if we don't
>> to create an artificial Harbour limit, we should support
>> all of them. COM numbers aren't necessary assigned sequentially,
>> so it's possible to have a higher numbered one on any systems.
>
> It takes less space than before, but of course dynamic allocation  
> would be the best to save space. The initialisation is to allow  
> checking for valid ports.
>
>> As for the naming, the class name is WIN_PORT, and the API
>> prefix is also WIN_PORT*() so, while I don't like 'prt' in
>> the filenames (reminds me of 'printer'), if we do some renaming,
>> we should do it consistently. Probably WIN_COM*() would be
>> better overall. Probably not a huge compatibility concern
>> yet, so maybe we should do it now.
>
> I suspect I am the only person to ever use it :), so I did it. I  
> didn't change any #defines.
>
> Regards
> Alex
> /*
> * $Id: win_com.c 12006 2009-08-09 14:37:15Z vszakats $
> */
>
> /*
> * xHarbour Project source code:
> * Windows communications library
> *
> * Copyright 2005 Alex Strickland <sscc@mweb.co.za>
> * www - http://www.xharbour.org
> *
> * This program is free software; you can redistribute it and/or modify
> * it under the terms of the GNU General Public License as published by
> * the Free Software Foundation; either version 2, or (at your option)
> * any later version.
> *
> * This program is distributed in the hope that it will be useful,
> * but WITHOUT ANY WARRANTY; without even the implied warranty of
> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
> * GNU General Public License for more details.
> *
> * You should have received a copy of the GNU General Public License
> * along with this software; see the file COPYING.  If not, write to
> * the Free Software Foundation, Inc., 59 Temple Place, Suite 330,
> * Boston, MA 02111-1307 USA (or visit the web site http:// 
> www.gnu.org/).
> *
> * As a special exception, the Harbour Project gives permission for
> * additional uses of the text contained in its release of Harbour.
> *
> * The exception is that, if you link the Harbour libraries with other
> * files to produce an executable, this does not by itself cause the
> * resulting executable to be covered by the GNU General Public  
> License.
> * Your use of that executable is in no way restricted on account of
> * linking the Harbour library code into it.
> *
> * This exception does not however invalidate any other reasons why
> * the executable file might be covered by the GNU General Public  
> License.
> *
> * This exception applies only to the code released by the Harbour
> * Project under the name Harbour.  If you copy code from other
> * Harbour Project or Free Software Foundation releases into a copy of
> * Harbour, as the General Public License permits, the exception does
> * not apply to the code that you add in this way.  To avoid misleading
> * anyone as to the status o such modified files, you must delete
> * this exception notice from them.
> *
> * If you write modifications of your own for Harbour, it is your  
> choice
> * whether to permit this exception to apply to your modifications.
> * If you do not wish that, delete this exception notice.
> *
> */
>
> #define HB_OS_WIN_USED
>
> #include "hbapi.h"
> #include "hbapierr.h"
> #include "hbwin.h"
>
> static struct
> {
>   HANDLE       hPort;
>   int          iFunction;
>   DWORD        dwError;
> } s_PortData[ 256 ];
>
> HB_INITFUNC( WIN_COMINIT )
> {
>   int i;
>
>   for ( i = 0; i < ( int ) HB_SIZEOFARRAY( s_PortData ); i++ )
>      s_PortData[ i ].hPort = INVALID_HANDLE_VALUE;
> }
>
> HB_FUNC( WIN_COMOPEN )
> {
>   int iPort = hb_parni( 1 );
>
>   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) )
>   {
>      DWORD dwBaudRate = ( DWORD ) hb_parnl( 2 );
>      int iParity = hb_parni( 3 );
>      int iByteSize = hb_parni( 4 );
>      int iStopBits = hb_parni( 5 );
>
>      char szName[ 11 ];
>      TCHAR tszName[ 11 ];
>
>      HANDLE hCommPort;
>      DCB NewDCB;
>
>      hb_snprintf( szName, sizeof( szName ), "\\\\.\\COM%d", iPort +  
> 1 );
>      HB_TCHAR_SETTO( tszName, szName, strlen( szName ) );
>
>      s_PortData[ iPort ].hPort = INVALID_HANDLE_VALUE;
>      s_PortData[ iPort ].iFunction = FCNCREATEFILE;
>      s_PortData[ iPort ].dwError = 0;
>
>      if( ( hCommPort = CreateFile( szName,
>                                    GENERIC_READ | GENERIC_WRITE,
>                                    0,
>                                    NULL,
>                                    OPEN_EXISTING,
>                                    FILE_FLAG_NO_BUFFERING, NULL ) )  
> == INVALID_HANDLE_VALUE )
>      {
>         s_PortData[ iPort ].dwError = GetLastError();
>         hb_retnl( -1 );
>         return;
>      }
>
>      NewDCB.DCBlength = sizeof( DCB );
>      if( ! GetCommState( hCommPort, &NewDCB ) )
>      {
>         s_PortData[ iPort ].dwError = GetLastError();
>         CloseHandle( hCommPort );
>         hb_retnl( -1 );
>         return;
>      }
>
>      /* Initialised with NO flow control or control signals! */
>      NewDCB.BaudRate = dwBaudRate;
>      NewDCB.fBinary = 1;
>      NewDCB.fParity = 0;
>      NewDCB.fOutxCtsFlow = 0;
>      NewDCB.fOutxDsrFlow = 0;
>      NewDCB.fDtrControl = DTR_CONTROL_DISABLE;
>      NewDCB.fDsrSensitivity = 0;
>      NewDCB.fTXContinueOnXoff = 1;
>      NewDCB.fOutX = 0;
>      NewDCB.fInX = 0;
>      NewDCB.fErrorChar = 1;
>      NewDCB.fNull = 0;
>      NewDCB.fRtsControl = RTS_CONTROL_DISABLE;
>      NewDCB.fAbortOnError = 0;
>    /*NewDCB.XonLim*/
>    /*NewDCB.XoffLim*/
>      NewDCB.ByteSize = ( BYTE ) iByteSize;
>      NewDCB.Parity = ( BYTE ) iParity;
>      NewDCB.StopBits = ( BYTE ) iStopBits;
>    /*NewDCB.XonChar*/
>    /*NewDCB.XoffChar*/
>      NewDCB.ErrorChar = '?';
>    /*NewDCB.EofChar*/
>    /*NewDCB.EvtChar*/
>
>      /* function reinitializes all hardware and control settings,  
> but it does not empty output or input queues */
>      s_PortData[ iPort ].iFunction = FCNSETCOMMSTATE;
>      s_PortData[ iPort ].dwError = 0;
>      if( ! SetCommState( hCommPort, &NewDCB ) )
>      {
>         s_PortData[ iPort ].dwError = GetLastError();
>         CloseHandle( hCommPort );
>         hb_retnl( -1 );
>         return;
>      }
>
>      s_PortData[ iPort ].hPort = hCommPort;
>      hb_retnl( hCommPort == INVALID_HANDLE_VALUE ? -1 : 0 );
>   }
>   else
>      hb_retnl( -1 );
> }
>
> HB_FUNC( WIN_COMCLOSE )
> {
>   int iPort = hb_parni( 1 );
>   HANDLE hCommPort;
>
>   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) &&  
> (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
>   {
>      long lDrain = hb_parnl( 2 );
>
>      if( lDrain > 0 )
>         Sleep( lDrain * 1000 );
>
>      s_PortData[ iPort ].hPort = INVALID_HANDLE_VALUE;
>
>      s_PortData[ iPort ].iFunction = FCNCLOSEHANDLE;
>      s_PortData[ iPort ].dwError = 0;
>
>      hb_retl( CloseHandle( hCommPort ) != 0 );
>      s_PortData[ iPort ].dwError = GetLastError();
>   }
>   else
>      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME,  
> HB_ERR_ARGS_BASEPARAMS );
> }
>
> HB_FUNC( WIN_COMWRITE )
> {
>   int iPort = hb_parni( 1 );
>   HANDLE hCommPort;
>
>   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) &&  
> (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
>   {
>      const char * lpBuffer = hb_parcx( 2 );
>      DWORD dwNumberofBytesToWrite = ( DWORD ) hb_parclen( 2 );
>      DWORD dwNumberofBytesWritten;
>
>      s_PortData[ iPort ].iFunction = FCNWRITEFILE;
>      s_PortData[ iPort ].dwError = 0;
>      if( WriteFile( hCommPort, lpBuffer, dwNumberofBytesToWrite,  
> &dwNumberofBytesWritten, NULL ) )
>         hb_retnl( dwNumberofBytesWritten );
>      else
>      {
>         s_PortData[ iPort ].dwError = GetLastError();
>         hb_retnl( -1 );
>      }
>   }
>   else
>      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME,  
> HB_ERR_ARGS_BASEPARAMS );
> }
>
> HB_FUNC( WIN_COMREAD )
> {
>   int iPort = hb_parni( 1 );
>   HANDLE hCommPort;
>
>   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) &&  
> (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
>   {
>      char * lpBuffer;
>      DWORD dwNumberOfBytesToRead = ( DWORD ) hb_parclen( 2 );
>      DWORD dwNumberOfBytesRead;
>
>      lpBuffer = ( char * ) hb_xgrab( dwNumberOfBytesToRead + 1 );
>      s_PortData[ iPort ].iFunction = FCNREADFILE;
>      s_PortData[ iPort ].dwError = 0;
>      if( ReadFile( hCommPort, lpBuffer, dwNumberOfBytesToRead,  
> &dwNumberOfBytesRead, NULL ) )
>      {
>         if( ! hb_storclen_buffer( lpBuffer, dwNumberOfBytesRead, 2 ) )
>            hb_xfree( lpBuffer );
>         hb_retnl( dwNumberOfBytesRead );
>      }
>      else
>      {
>         hb_storc( NULL, 2 );
>         hb_xfree( lpBuffer );
>         s_PortData[ iPort ].dwError = GetLastError();
>         hb_retnl( -1 );
>      }
>   }
>   else
>      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME,  
> HB_ERR_ARGS_BASEPARAMS );
> }
>
> HB_FUNC( WIN_COMRECV )
> {
>   int iPort = hb_parni( 1 );
>   HANDLE hCommPort;
>
>   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) &&  
> (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
>   {
>      char * lpBuffer;
>      DWORD dwNumberOfBytesToRead = ( DWORD ) hb_parnl( 2 );
>      DWORD dwNumberOfBytesRead;
>
>      lpBuffer = ( char * ) hb_xgrab( dwNumberOfBytesToRead + 1 );
>      s_PortData[ iPort ].iFunction = FCNREADFILE;
>      s_PortData[ iPort ].dwError = 0;
>      if( ReadFile( hCommPort, lpBuffer, dwNumberOfBytesToRead,  
> &dwNumberOfBytesRead, NULL ) )
>      {
>         hb_retclen_buffer( lpBuffer, dwNumberOfBytesRead );
>         hb_stornl( dwNumberOfBytesRead, 3 );
>      }
>      else
>      {
>         hb_retc_null();
>         hb_xfree( lpBuffer );
>         s_PortData[ iPort ].dwError = GetLastError();
>         hb_stornl( -1, 3 );
>      }
>   }
>   else
>      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME,  
> HB_ERR_ARGS_BASEPARAMS );
> }
>
> HB_FUNC( WIN_COMSTATUS )
> {
>   int iPort = hb_parni( 1 );
>   HANDLE hCommPort;
>
>   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) &&  
> (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
>   {
>      DWORD dwModemStat = 0;
>
>      s_PortData[ iPort ].iFunction = FCNGETCOMMMODEMSTATUS;
>      s_PortData[ iPort ].dwError = 0;
>      if( GetCommModemStatus( hCommPort, &dwModemStat ) )
>      {
>         hb_storl( ( dwModemStat & MS_CTS_ON )  != 0, 2 );     /* The  
> CTS (clear-to-send) signal is on. */
>         hb_storl( ( dwModemStat & MS_DSR_ON )  != 0, 3 );     /* The  
> DSR (data-set-ready) signal is on. */
>         hb_storl( ( dwModemStat & MS_RING_ON ) != 0, 4 );     /* The  
> ring indicator signal is on. */
>         hb_storl( ( dwModemStat & MS_RLSD_ON ) != 0, 5 );     /* The  
> RLSD (receive-line-signal-detect) signal is on. Also is DCD. */
>
>         hb_retl( TRUE );
>      }
>      else
>      {
>         s_PortData[ iPort ].dwError = GetLastError();
>
>         hb_storl( FALSE, 2 );
>         hb_storl( FALSE, 3 );
>         hb_storl( FALSE, 4 );
>         hb_storl( FALSE, 5 );
>
>         hb_retl( FALSE );
>      }
>   }
>   else
>      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME,  
> HB_ERR_ARGS_BASEPARAMS );
> }
>
> HB_FUNC( WIN_COMPURGE )
> {
>   int iPort = hb_parni( 1 );
>   HANDLE hCommPort;
>
>   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) &&  
> (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
>   {
>      DWORD dwFlags;
>
>      dwFlags = ( hb_parl( 2 ) ? PURGE_RXCLEAR : 0 ) | ( hb_parl 
> ( 3 ) ? PURGE_TXCLEAR : 0 );
>      s_PortData[ iPort ].iFunction = FCNPURGECOMM;
>      s_PortData[ iPort ].dwError = 0;
>      if( PurgeComm( hCommPort, dwFlags ) )
>         hb_retl( TRUE );
>      else
>      {
>         s_PortData[ iPort ].dwError = GetLastError();
>         hb_retl( FALSE );
>      }
>   }
>   else
>      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME,  
> HB_ERR_ARGS_BASEPARAMS );
> }
>
> HB_FUNC( WIN_COMQUEUESTATUS )
> {
>   int iPort = hb_parni( 1 );
>   HANDLE hCommPort;
>
>   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) &&  
> (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
>   {
>      DWORD dwErrors = 0;
>      COMSTAT ComStat;
>
>      s_PortData[ iPort ].iFunction = FCNCLEARCOMMERROR;
>      s_PortData[ iPort ].dwError = 0;
>      if( ClearCommError( hCommPort, &dwErrors, &ComStat ) )
>      {
>         hb_storl( ComStat.fCtsHold, 2 );
>         hb_storl( ComStat.fDsrHold, 3 );
>         hb_storl( ComStat.fRlsdHold, 4 );
>         hb_storl( ComStat.fXoffHold, 5 );
>         hb_storl( ComStat.fXoffSent, 6 );
>         hb_stornl( ComStat.cbInQue, 7 );
>         hb_stornl( ComStat.cbOutQue, 8 ); /* This value will be zero  
> for a nonoverlapped write */
>
>         hb_retl( TRUE );
>      }
>      else
>      {
>         s_PortData[ iPort ].dwError = GetLastError();
>
>         hb_storl( FALSE, 2 );
>         hb_storl( FALSE, 3 );
>         hb_storl( FALSE, 4 );
>         hb_storl( FALSE, 5 );
>         hb_storl( FALSE, 6 );
>         hb_stornl( 0, 7 );
>         hb_stornl( 0, 8 );
>
>         hb_retl( FALSE );
>      }
>   }
>   else
>      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME,  
> HB_ERR_ARGS_BASEPARAMS );
> }
>
> /* If handshaking is enabled, it is an error for the application to  
> adjust the line by
>   using the EscapeCommFunction function */
>
> HB_FUNC( WIN_COMSETRTS )
> {
>   int iPort = hb_parni( 1 );
>   HANDLE hCommPort;
>
>   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) &&  
> (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
>   {
>      DWORD dwFunc = hb_parl( 2 ) ? SETRTS : CLRRTS;
>
>      s_PortData[ iPort ].iFunction = ESCAPECOMMFUNCTION;
>      s_PortData[ iPort ].dwError = 0;
>      if( EscapeCommFunction( hCommPort, dwFunc ) )
>         hb_retl( TRUE );
>      else
>      {
>         s_PortData[ iPort ].dwError = GetLastError();
>         hb_retl( FALSE );
>      }
>   }
>   else
>      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME,  
> HB_ERR_ARGS_BASEPARAMS );
> }
>
> /* If handshaking is enabled, it is an error for the application to  
> adjust the line by
>   using the EscapeCommFunction function */
>
> HB_FUNC( WIN_COMSETDTR )
> {
>   int iPort = hb_parni( 1 );
>   HANDLE hCommPort;
>
>   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) &&  
> (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
>   {
>      DWORD dwFunc = hb_parl( 2 ) ? SETDTR : CLRDTR;
>
>      s_PortData[ iPort ].iFunction = ESCAPECOMMFUNCTION;
>      s_PortData[ iPort ].dwError = 0;
>      if( EscapeCommFunction( hCommPort, dwFunc ) )
>         hb_retl( TRUE );
>      else
>      {
>         s_PortData[ iPort ].dwError = GetLastError();
>         hb_retl( FALSE );
>      }
>   }
>   else
>      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME,  
> HB_ERR_ARGS_BASEPARAMS );
> }
>
> HB_FUNC( WIN_COMRTSFLOW )
> {
>   int iPort = hb_parni( 1 );
>   HANDLE hCommPort;
>
>   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) &&  
> (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
>   {
>      DCB CurDCB;
>      int iRtsControl = hb_parni( 2 );
>
>      s_PortData[ iPort ].iFunction = FCNGETCOMMSTATE;
>      s_PortData[ iPort ].dwError = 0;
>      CurDCB.DCBlength = sizeof( DCB );
>      if( ! GetCommState( hCommPort, &CurDCB ) )
>      {
>         s_PortData[ iPort ].dwError = GetLastError();
>         hb_retl( FALSE );
>         return;
>      }
>
>      if( iRtsControl == RTS_CONTROL_DISABLE )
>      {
>         CurDCB.fOutxCtsFlow = 0;
>         CurDCB.fRtsControl = RTS_CONTROL_DISABLE;
>      }
>      else if( iRtsControl == RTS_CONTROL_ENABLE )
>      {
>         CurDCB.fOutxCtsFlow = 1;
>         CurDCB.fRtsControl = RTS_CONTROL_ENABLE;
>      }
>      else if( iRtsControl == RTS_CONTROL_HANDSHAKE )
>      {
>         CurDCB.fOutxCtsFlow = 1;
>         CurDCB.fRtsControl = RTS_CONTROL_HANDSHAKE;
>      }
>      else    /* RTS_CONTROL_TOGGLE - RS485? */
>      {
>         hb_retl( FALSE );
>         return;
>      }
>
>      s_PortData[ iPort ].iFunction = FCNSETCOMMSTATE;
>      s_PortData[ iPort ].dwError = 0;
>      if( ! SetCommState( hCommPort, &CurDCB ) )
>      {
>         s_PortData[ iPort ].dwError = GetLastError();
>         hb_retl( FALSE );
>      }
>      else
>         hb_retl( TRUE );
>   }
>   else
>      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME,  
> HB_ERR_ARGS_BASEPARAMS );
> }
>
> HB_FUNC( WIN_COMDTRFLOW )
> {
>   int iPort = hb_parni( 1 );
>   HANDLE hCommPort;
>
>   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) &&  
> (hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
>   {
>      DCB CurDCB;
>      int DtrControl = hb_parni( 2 );
>
>      s_PortData[ iPort ].iFunction = FCNGETCOMMSTATE;
>      s_PortData[ iPort ].dwError = 0;
>      CurDCB.DCBlength = sizeof( DCB );
>      if( ! GetCommState( hCommPort, &CurDCB ) )
>      {
>         s_PortData[ iPort ].dwError = GetLastError();
>         hb_retl( FALSE );
>         return;
>      }
>
>      if( DtrControl == DTR_CONTROL_DISABLE )
>      {
>         CurDCB.fOutxDsrFlow = 0;
>         CurDCB.fDtrControl = DTR_CONTROL_DISABLE;
>      }
>      else if( DtrControl == DTR_CONTROL_ENABLE )
>      {
>         CurDCB.fOutxDsrFlow = 1;
>         CurDCB.fDtrControl = DTR_CONTROL_ENABLE;
>      }
>      else if( DtrControl == DTR_CONTROL_HANDSHAKE )
>      {
>         CurDCB.fOutxDsrFlow = 1;
>         CurDCB.fDtrControl = DTR_CONTROL_HANDSHAKE;
>      }
>      else
>      {
>         hb_retl( FALSE );
>         return;
>      }
>
>      s_PortData[ iPort ].iFunction = FCNSETCOMMSTATE;
>      s_PortData[ iPort ].dwError = 0;
>      if( ! SetCommState( hCommPort, &CurDCB ) )
>      {
>         s_PortData[ iPort ].dwError = GetLastError();
>         hb_retl( FALSE );
>      }
>      else
>         hb_retl( TRUE );
>   }
>   else
>      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME,  
> HB_ERR_ARGS_BASEPARAMS );
> }
>
> HB_FUNC( WIN_COMXONXOFFFLOW )
> {
>   int iPort = hb_parni( 1 );
>   HANDLE hCommPort;
>
>   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) &&  
> ( hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
>   {
>      DCB CurDCB;
>
>      s_PortData[ iPort ].iFunction = FCNGETCOMMSTATE;
>      s_PortData[ iPort ].dwError = 0;
>      CurDCB.DCBlength = sizeof( DCB );
>      if( ! GetCommState( hCommPort, &CurDCB ) )
>      {
>         s_PortData[ iPort ].dwError = GetLastError();
>         hb_retl( FALSE );
>         return;
>      }
>
>      if( hb_parl( 2 ) )
>      {
>         CurDCB.fInX = 1;
>         CurDCB.fOutX = 1;
>      }
>      else
>      {
>         CurDCB.fInX = 0;
>         CurDCB.fOutX = 0;
>      }
>
>      s_PortData[ iPort ].iFunction = FCNSETCOMMSTATE;
>      s_PortData[ iPort ].dwError = 0;
>      if( ! SetCommState( hCommPort, &CurDCB ) )
>      {
>         s_PortData[ iPort ].dwError = GetLastError();
>         hb_retl( FALSE );
>      }
>      else
>         hb_retl( TRUE );
>   }
>   else
>      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME,  
> HB_ERR_ARGS_BASEPARAMS );
> }
>
> int Win_ComSetTimeouts( HANDLE hCommPort, LPCOMMTIMEOUTS Timeouts,  
> DWORD dwBaudRate, int iParity, int iByteSize, int iStopBits )
> {
>   COMMTIMEOUTS NewTimeouts;
>
> 	  /* Maximum time, in milliseconds, allowed to elapse between the  
> arrival of two characters on
>      the communications line. During a ReadFile operation, the time  
> period begins when the first
>      character is received. If the interval between the arrival of  
> any two characters exceeds this
>      amount, the ReadFile operation is completed and any buffered  
> data is returned. A value of zero
>      indicates that interval time-outs are not used. */
>
>   /* A value of MAXDWORD, combined with zero values for both the  
> ReadTotalTimeoutConstant and
>      ReadTotalTimeoutMultiplier members, specifies that the read  
> operation is to return
>      immediately with the characters that have already been  
> received, even if no characters
>      have been received. */
>   NewTimeouts.ReadIntervalTimeout = ( Timeouts->ReadIntervalTimeout  
> == -1 ? MAXDWORD : Timeouts->ReadIntervalTimeout );
>
>   /* Multiplier, in milliseconds, used to calculate the total time- 
> out period for read operations.
>      For each read operation, this value is multiplied by the  
> requested number of bytes to be read. */
>   NewTimeouts.ReadTotalTimeoutMultiplier = ( Timeouts- 
> >ReadTotalTimeoutMultiplier == -1 ? 0 : Timeouts- 
> >ReadTotalTimeoutMultiplier );
>
>   /* Constant, in milliseconds, used to calculate the total time-out  
> period for read operations.
>      For each read operation, this value is added to the product of  
> the ReadTotalTimeoutMultiplier
>      member and the requested number of bytes. */
>   NewTimeouts.ReadTotalTimeoutConstant = ( Timeouts- 
> >ReadTotalTimeoutConstant == -1 ? 0 : Timeouts- 
> >ReadTotalTimeoutConstant );
>
>   /* A value of zero for both the ReadTotalTimeoutMultiplier and  
> ReadTotalTimeoutConstant members
>      indicates that total time-outs are not used for read  
> operations ...
>      and MAXDWORD, 0 and 0 are what we use by default */
>
>   /* Multiplier, in milliseconds, used to calculate the total time- 
> out period for write operations.
>      For each write operation, this value is multiplied by the  
> number of bytes to be written. */
>   if( Timeouts->WriteTotalTimeoutMultiplier == -1 )
>   {
>       /* float of 1.0 makes whole expression float */
>       NewTimeouts.WriteTotalTimeoutMultiplier = HB_MIN( 1, ( DWORD )  
> ( ( 1.0 / dwBaudRate ) *
>           ( iByteSize + 1 + ( iParity == NOPARITY ? 0 : 1 ) +  
> ( iStopBits == ONESTOPBIT ? 1 : iStopBits == ONE5STOPBITS ? 1.5 :  
> 2 ) ) * 1000 ) );
>   }
>   /* Constant, in milliseconds, used to calculate the total time-out  
> period for write operations.
>      For each write operation, this value is added to the product of  
> the WriteTotalTimeoutMultiplier member and the number of bytes to be  
> written. */
>   else
>      NewTimeouts.WriteTotalTimeoutMultiplier = Timeouts- 
> >WriteTotalTimeoutMultiplier;
>
>   /* 50 ms is a thumbsuck - seems long enough and not too long! */
>   NewTimeouts.WriteTotalTimeoutConstant = Timeouts- 
> >WriteTotalTimeoutConstant == -1 ? 50 : Timeouts- 
> >WriteTotalTimeoutConstant;
>
>   /* A value of zero for both the WriteTotalTimeoutMultiplier and  
> WriteTotalTimeoutConstant members
>      indicates that total time-outs are not used for write  
> operations ...
>      and if flow control is enabled the program will "hang" or if it  
> is not enabled the data will
>      be lost (potentially), so we set a minimum of 1ms (baud rates  
> higher than 4800) */
>
>   return SetCommTimeouts( hCommPort, &NewTimeouts );
> }
>
> HB_FUNC( WIN_COMSETTIMEOUTS )
> {
>   int iPort = hb_parni( 1 );
>   HANDLE hCommPort;
>   DCB CurDCB;
>   COMMTIMEOUTS Timeouts;
>
>   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) &&  
> ( hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
>   {
>      if( HB_ISNUM( 2 ) )
>         Timeouts.ReadIntervalTimeout = hb_parnl( 2 );
>      else
>         Timeouts.ReadIntervalTimeout = -1;
>
>      if( HB_ISNUM( 3 ) )
>         Timeouts.ReadTotalTimeoutMultiplier = hb_parnl( 3 );
>      else
>         Timeouts.ReadTotalTimeoutMultiplier = -1;
>
>      if( HB_ISNUM( 4 ) )
>         Timeouts.ReadTotalTimeoutConstant = hb_parnl( 4 );
>      else
>         Timeouts.ReadTotalTimeoutConstant = -1;
>
>      if( HB_ISNUM( 5 ) )
>         Timeouts.WriteTotalTimeoutMultiplier = hb_parnl( 5 );
>      else
>         Timeouts.WriteTotalTimeoutMultiplier = -1;
>
>      if( HB_ISNUM( 6 ) )
>         Timeouts.WriteTotalTimeoutConstant = hb_parnl( 6 );
>      else
>         Timeouts.WriteTotalTimeoutConstant = -1;
>
> 	  s_PortData[ iPort ].iFunction = FCNGETCOMMSTATE;
>      s_PortData[ iPort ].dwError = 0;
>
>      CurDCB.DCBlength = sizeof( DCB );
>      if( ! GetCommState( s_PortData[ iPort ].hPort, &CurDCB ) )
>      {
>         s_PortData[ iPort ].dwError = GetLastError();
>         hb_retl( FALSE );
>         return;
>      }
>
>      s_PortData[ iPort ].iFunction = FCNSETCOMMTIMEOUTS;
>      s_PortData[ iPort ].dwError = 0;
>      if( ! Win_ComSetTimeouts( s_PortData[ iPort ].hPort, &Timeouts,  
> CurDCB.BaudRate, CurDCB.Parity, CurDCB.ByteSize, CurDCB.StopBits ) )
>      {
>         s_PortData[ iPort ].dwError = GetLastError();
>         hb_retl( FALSE );
>      }
>      else
>         hb_retl( TRUE );
>   }
>   else
>      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME,  
> HB_ERR_ARGS_BASEPARAMS );
> }
>
> HB_FUNC( WIN_COMSETQUEUESIZE )
> {
>   int iPort = hb_parni( 1 );
>   HANDLE hCommPort;
>
>   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) &&  
> ( hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE &&  
> HB_ISNUM( 2 ) && HB_ISNUM( 3 ) )
>   {
>      s_PortData[ iPort ].iFunction = FCNSETUPCOMM;
>      s_PortData[ iPort ].dwError = 0;
>      if( ! SetupComm( s_PortData[ iPort ].hPort, hb_parni( 2 ),  
> hb_parni( 3 ) ) )
>      {
>         s_PortData[ iPort ].dwError = GetLastError();
>         hb_retl( FALSE );
>      }
>      else
>         hb_retl( TRUE );
>   }
>   else
>      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME,  
> HB_ERR_ARGS_BASEPARAMS );
> }
>
> HB_FUNC( WIN_COMERROR )
> {
>   int iPort = hb_parni( 1 );
>
>   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) )
>   {
>      hb_retnl( s_PortData[ iPort ].dwError );
>      s_PortData[ iPort ].dwError = 0; /* NOTE: reset */
>   }
>   else
>      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME,  
> HB_ERR_ARGS_BASEPARAMS );
> }
>
> HB_FUNC( WIN_COMFUNCLAST )
> {
>   int iPort = hb_parni( 1 );
>
>   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) )
>      hb_retni( s_PortData[ iPort ].iFunction );
>   else
>      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME,  
> HB_ERR_ARGS_BASEPARAMS );
> }
>
> HB_FUNC( WIN_COMDEBUGDCB )
> {
>   int iPort = hb_parni( 1 );
>   HANDLE hCommPort;
>
>   if( iPort >= 0 && iPort < ( int ) HB_SIZEOFARRAY( s_PortData ) &&  
> ( hCommPort = s_PortData[ iPort ].hPort) != INVALID_HANDLE_VALUE )
>   {
>      int iDebugLevel = HB_ISNUM( 2 ) ? hb_parni( 2 ) : WPDBGBASIC;
>      DCB CurDCB;
>      COMMTIMEOUTS CurCOMMTIMEOUTS;
>      COMMPROP CurCOMMPROP;
>      char szDebugString[ 1024 ] = "";
>      char buffer[ 80 ];
>
>      s_PortData[ iPort ].iFunction = FCNGETCOMMSTATE;
>      s_PortData[ iPort ].dwError = 0;
>      CurDCB.DCBlength = sizeof( DCB );
>      if( GetCommState( hCommPort, &CurDCB ) )
>      {
>         if( iDebugLevel & WPDBGBASIC )
>         {
>            hb_snprintf( buffer, sizeof( buffer ), "Baud     : %lu 
> \n", CurDCB.BaudRate ) ; hb_strncat( szDebugString, buffer, sizeof 
> ( szDebugString ) - 1 );
>            hb_snprintf( buffer, sizeof( buffer ), "ByteSize : %i 
> \n" , CurDCB.ByteSize ) ; hb_strncat( szDebugString, buffer, sizeof 
> ( szDebugString ) - 1 );
>            hb_snprintf( buffer, sizeof( buffer ), "Parity   : %i 
> \n" , CurDCB.Parity   ) ; hb_strncat( szDebugString, buffer, sizeof 
> ( szDebugString ) - 1 );
>            hb_snprintf( buffer, sizeof( buffer ), "StopBits : %i 
> \n" , CurDCB.StopBits ) ; hb_strncat( szDebugString, buffer, sizeof 
> ( szDebugString ) - 1 );
>         }
>         if( iDebugLevel & WPDBGFLOW )
>         {
>            hb_strncat( szDebugString, "fRtsControl : ", sizeof 
> ( szDebugString ) - 1 );
>            hb_strncat( szDebugString, CurDCB.fRtsControl ==  
> RTS_CONTROL_DISABLE ? "RTS_CONTROL_DISABLE\n" :
>                                       CurDCB.fRtsControl ==  
> RTS_CONTROL_ENABLE ? "RTS_CONTROL_ENABLE\n" :
>                                       CurDCB.fRtsControl ==  
> RTS_CONTROL_HANDSHAKE ? "RTS_CONTROL_HANDSHAKE\n" :  
> "RTS_CONTROL_TOGGLE\n", sizeof( szDebugString ) - 1 );
>            hb_strncat( szDebugString, "fOutxCtsFlow : ", sizeof 
> ( szDebugString ) - 1 );
>            hb_strncat( szDebugString, CurDCB.fOutxCtsFlow ? "true 
> \n" : "false\n", sizeof( szDebugString ) - 1 );
>            hb_strncat( szDebugString, "fOutX : ", sizeof 
> ( szDebugString ) - 1 );
>            hb_strncat( szDebugString, CurDCB.fOutX ? "true\n" :  
> "false\n", sizeof( szDebugString ) - 1 );
>            hb_strncat( szDebugString, "fInX : ", sizeof 
> ( szDebugString ) - 1 );
>            hb_strncat( szDebugString, CurDCB.fInX ? "true\n" : "false 
> \n", sizeof( szDebugString ) - 1 );
>            hb_strncat( szDebugString, "fDtrControl : ", sizeof 
> ( szDebugString ) - 1 );
>            hb_strncat( szDebugString, CurDCB.fDtrControl ==  
> DTR_CONTROL_DISABLE ? "DTR_CONTROL_DISABLE\n" :
>                                       CurDCB.fDtrControl ==  
> DTR_CONTROL_ENABLE ? "DTR_CONTROL_ENABLE\n" : "DTR_CONTROL_HANDSHAKE 
> \n", sizeof( szDebugString ) - 1 );
>            hb_strncat( szDebugString, "fOutxDsrFlow : ", sizeof 
> ( szDebugString ) - 1 );
>            hb_strncat( szDebugString, CurDCB.fOutxDsrFlow ? "true 
> \n" : "false\n", sizeof( szDebugString ) - 1 );
>         }
>         if( iDebugLevel & WPDBGXTRAFLOW )
>         {
>            hb_strncat( szDebugString, "fDsrSensitivity : ", sizeof 
> ( szDebugString ) - 1 );
>            hb_strncat( szDebugString, CurDCB.fDsrSensitivity ? "true 
> \n" : "false\n", sizeof( szDebugString ) - 1 );
>            hb_strncat( szDebugString, "fTXContinueOnXoff : ", sizeof 
> ( szDebugString ) - 1 );
>            hb_strncat( szDebugString, CurDCB.fTXContinueOnXoff ?  
> "true\n" : "false\n", sizeof( szDebugString ) - 1 );
>            hb_snprintf( buffer, sizeof( buffer ), "XonLim : %i 
> \n"    , CurDCB.XonLim   ) ; hb_strncat( szDebugString, buffer,  
> sizeof( szDebugString ) - 1 );
>            hb_snprintf( buffer, sizeof( buffer ), "XoffLim : %i 
> \n"   , CurDCB.XoffLim  ) ; hb_strncat( szDebugString, buffer, sizeof 
> ( szDebugString ) - 1 );
>            hb_snprintf( buffer, sizeof( buffer ), "XonChar : 0x%i 
> \n" , CurDCB.XonChar  ) ; hb_strncat( szDebugString, buffer, sizeof 
> ( szDebugString ) - 1 );
>            hb_snprintf( buffer, sizeof( buffer ), "XoffChar : 0x%i 
> \n", CurDCB.XoffChar ) ; hb_strncat( szDebugString, buffer, sizeof 
> ( szDebugString ) - 1 );
>         }
>         if( iDebugLevel & WPDBGOTHER )
>         {
>            hb_strncat(szDebugString, "fBinary : ", sizeof 
> ( szDebugString ) - 1 );
>            hb_strncat(szDebugString, CurDCB.fBinary ? "true\n" :  
> "false\n", sizeof( szDebugString ) - 1 );
>            hb_strncat(szDebugString, "fParity : ", sizeof 
> ( szDebugString ) - 1 );
>            hb_strncat(szDebugString, CurDCB.fParity ? "true\n" :  
> "false\n", sizeof( szDebugString ) - 1 );
>            hb_strncat(szDebugString, "fErrorChar : ", sizeof 
> ( szDebugString ) - 1 );
>            hb_strncat(szDebugString, CurDCB.fErrorChar ? "true\n" :  
> "false\n", sizeof( szDebugString ) - 1 );
>            hb_strncat(szDebugString, "fNull : ", sizeof 
> ( szDebugString ) - 1 );
>            hb_strncat(szDebugString, CurDCB.fNull ? "true\n" : "false 
> \n", sizeof( szDebugString ) - 1 );
>            hb_strncat(szDebugString, "fAbortOnError : ", sizeof 
> ( szDebugString ) - 1 );
>            hb_strncat(szDebugString, CurDCB.fAbortOnError ? "true 
> \n" : "false\n", sizeof( szDebugString ) - 1 );
>            hb_snprintf( buffer, sizeof( buffer ), "ErrorChar : 0x%i 
> \n", CurDCB.ErrorChar ) ; hb_strncat( szDebugString, buffer, sizeof 
> ( szDebugString ) - 1 );
>            hb_snprintf( buffer, sizeof( buffer ), "EofChar : 0x%i 
> \n"  , CurDCB.EofChar   ) ; hb_strncat( szDebugString, buffer, sizeof 
> ( szDebugString ) - 1 );
>            hb_snprintf( buffer, sizeof( buffer ), "EvtChar : 0x%i 
> \n"  , CurDCB.EvtChar   ) ; hb_strncat( szDebugString, buffer, sizeof 
> ( szDebugString ) - 1 );
>         }
>      }
>      else
>      {
>         s_PortData[ iPort ].dwError = GetLastError();
>         hb_retc_null();
>         return;
>      }
>
>      if( iDebugLevel & WPDBGTIMEOUTS )
>      {
>         s_PortData[ iPort ].iFunction = FCNGETCOMMTIMEOUTS;
>         s_PortData[ iPort ].dwError = 0;
>         if( GetCommTimeouts( hCommPort, &CurCOMMTIMEOUTS ) )
>         {
>            hb_snprintf( buffer, sizeof( buffer ),  
> "ReadIntervalTimeout : %lu\n"        ,  
> CurCOMMTIMEOUTS.ReadIntervalTimeout         ) ; hb_strncat 
> ( szDebugString, buffer, sizeof( szDebugString ) - 1 );
>            hb_snprintf( buffer, sizeof( buffer ),  
> "ReadTotalTimeoutMultiplier : %ld\n" ,  
> CurCOMMTIMEOUTS.ReadTotalTimeoutMultiplier  ) ; hb_strncat 
> ( szDebugString, buffer, sizeof( szDebugString ) - 1 );
>            hb_snprintf( buffer, sizeof( buffer ),  
> "ReadTotalTimeoutConstant : %ld\n"   ,  
> CurCOMMTIMEOUTS.ReadTotalTimeoutConstant    ) ; hb_strncat 
> ( szDebugString, buffer, sizeof( szDebugString ) - 1 );
>            hb_snprintf( buffer, sizeof( buffer ),  
> "WriteTotalTimeoutMultiplier : %ld\n",  
> CurCOMMTIMEOUTS.WriteTotalTimeoutMultiplier ) ; hb_strncat 
> ( szDebugString, buffer, sizeof( szDebugString ) - 1 );
>            hb_snprintf( buffer, sizeof( buffer ),  
> "WriteTotalTimeoutConstant : %ld\n"  ,  
> CurCOMMTIMEOUTS.WriteTotalTimeoutConstant   ) ; hb_strncat 
> ( szDebugString, buffer, sizeof( szDebugString ) - 1 );
>         }
>         else
>         {
>            s_PortData[ iPort ].dwError = GetLastError();
>            hb_retc_null();
>            return;
>         }
>      }
>
>      if( iDebugLevel & WPDBGQUEUE )
>      {
>         s_PortData[ iPort ].iFunction = FCNGETCOMMPROPERTIES;
>         s_PortData[ iPort ].dwError = 0;
>         if( GetCommProperties( hCommPort, &CurCOMMPROP ) )
>         {
>            hb_snprintf( buffer, sizeof( buffer ),  
> "dwCurrentTxQueue : %lu\n", CurCOMMPROP.dwCurrentTxQueue ) ;  
> hb_strncat( szDebugString, buffer, sizeof( szDebugString ) - 1 );
>            hb_snprintf( buffer, sizeof( buffer ),  
> "dwCurrentRxQueue : %lu\n", CurCOMMPROP.dwCurrentRxQueue ) ;  
> hb_strncat( szDebugString, buffer, sizeof( szDebugString ) - 1 );
>         }
>         else
>         {
>            s_PortData[ iPort ].dwError = GetLastError();
>            hb_retc_null();
>            return;
>         }
>      }
>
>      hb_retc( szDebugString );
>   }
>   else
>      hb_errRT_BASE( EG_ARG, 2010, NULL, HB_ERR_FUNCNAME,  
> HB_ERR_ARGS_BASEPARAMS );
> }
> /*
> * $Id: win_tcom.prg 12004 2009-08-09 10:54:06Z vszakats $
> */
>
> /*
> * xHarbour Project source code:
> * Windows communications library
> *
> * Copyright 2005 Alex Strickland <sscc@mweb.co.za>
> * www - http://www.xharbour.org
> *
> * This program is free software; you can redistribute it and/or modify
> * it under the terms of the GNU General Public License as published by
> * the Free Software Foundation; either version 2, or (at your option)
> * any later version.
> *
> * This program is distributed in the hope that it will be useful,
> * but WITHOUT ANY WARRANTY; without even the implied warranty of
> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
> * GNU General Public License for more details.
> *
> * You should have received a copy of the GNU General Public License
> * along with this software; see the file COPYING.  If not, write to
> * the Free Software Foundation, Inc., 59 Temple Place, Suite 330,
> * Boston, MA 02111-1307 USA (or visit the web site http:// 
> www.gnu.org/).
> *
> * As a special exception, the Harbour Project gives permission for
> * additional uses of the text contained in its release of Harbour.
> *
> * The exception is that, if you link the Harbour libraries with other
> * files to produce an executable, this does not by itself cause the
> * resulting executable to be covered by the GNU General Public  
> License.
> * Your use of that executable is in no way restricted on account of
> * linking the Harbour library code into it.
> *
> * This exception does not however invalidate any other reasons why
> * the executable file might be covered by the GNU General Public  
> License.
> *
> * This exception applies only to the code released by the Harbour
> * Project under the name Harbour.  If you copy code from other
> * Harbour Project or Free Software Foundation releases into a copy of
> * Harbour, as the General Public License permits, the exception does
> * not apply to the code that you add in this way.  To avoid misleading
> * anyone as to the status o such modified files, you must delete
> * this exception notice from them.
> *
> * If you write modifications of your own for Harbour, it is your  
> choice
> * whether to permit this exception to apply to your modifications.
> * If you do not wish that, delete this exception notice.
> *
> */
>
> #include "hbclass.ch"
> #include "common.ch"
>
> #include "hbwin.ch"
>
> /* The class is a VERY thin layer over the xHarbour functions and  
> the xHarbour functions
>   are a VERY thin layer over the Win functions, almost no parameter  
> checking! You get what you
>   pay for :)
>
>   I haven't bothered to remember things that you can remember for  
> yourself - the state of DTR (low
>   to begin with) or the baud rate for example, you can always sub- 
> class it.
>
>   I've only done the things that I've found useful over the years,  
> for example I never used the
>   "BREAK" state of a line so I haven't done it here.
>
>   The class needs the port to be already open to change timeouts and  
> buffer sizes, it doesn't have to
>   be that way, but it is.
>
>   Really Windows comms should be done with threads and/or OVERLAPPED  
> I/O - and I haven't. */
>
> CREATE CLASS win_Com
>
>   ACCESS Open()     INLINE ::lOpen
>   ACCESS PortName() INLINE ::cPortName
>
>   PROTECT nPort     INIT -1
>   PROTECT lOpen     INIT .F.
>   PROTECT cPortName INIT ""
>
>   METHOD Init( cPortName, nBaudRate, nParity, nByteSize, nStopBits )
>   METHOD QueueSize( nInQueue, nOutQueue )  INLINE win_ComSetQueueSize 
> ( ::nPort, nInQueue, nOutQueue )
>   METHOD TimeOuts( nReadInterval, nReadMultiplier, nReadConstant,  
> nWriteMultiplier, nWriteConstant ) ;
>                                            INLINE win_ComSetTimeOuts 
> ( ::nPort, nReadInterval, nReadMultiplier, nReadConstant,  
> nWriteMultiplier, nWriteConstant )
>   METHOD Read( /* @ */ cString, nLength )
>   METHOD Recv( nLength, nResult )          INLINE win_ComRecv 
> ( ::nPort, nLength, @nResult )
>   METHOD RecvTo( cDelim, nMaxlen )
>   METHOD Write( cString )                  INLINE win_ComWrite 
> ( ::nPort, cString )
>   METHOD Status( lCTS, lDSR, lRing, lDCD ) INLINE win_ComStatus 
> ( ::nPort, @lCTS, @lDSR, @lRing, @lDCD )
>   METHOD QueueStatus( lCTSHold, lDSRHold, lDCDHold, lXoffHold,  
> lXoffSent, nInQueue, nOutQueue ) ;
>                                            INLINE win_ComQueueStatus 
> ( ::nPort, @lCTSHold, @lDSRHold, @lDCDHold, @lXoffHold, @lXoffSent,  
> @nInQueue, @nOutQueue )
>   METHOD SetRTS( lCTS )                    INLINE win_ComSetRTS 
> ( ::nPort, lCTS ) /* boolean return is the status of the call not  
> the line! */
>   METHOD SetDTR( lDTR )                    INLINE win_ComSetDTR 
> ( ::nPort, lDTR ) /* boolean return is the status of the call not  
> the line! */
>   METHOD RTSFlow( nRTS )                   INLINE win_ComRTSFlow 
> ( ::nPort, nRTS )
>   METHOD DTRFlow( nDTR )                   INLINE win_ComDTRFlow 
> ( ::nPort, nDTR )
>   METHOD XonXoffFlow( lXonXoff )           INLINE win_ComXonXoffFlow 
> ( ::nPort, lXonXoff )
>   METHOD Purge( lRXBuffer, lTXBuffer )     INLINE win_ComPurge 
> ( ::nPort, lRXBuffer, lTXBuffer )
>   METHOD PurgeRX()                         INLINE win_ComPurge 
> ( ::nPort, .T., .F. )
>   METHOD PurgeTX()                         INLINE win_ComPurge 
> ( ::nPort, .F., .T. )
>   METHOD Close( nDrain )                   INLINE win_ComClose 
> ( ::nPort, iif( Empty( nDrain ), 0, nDrain ) )
>   METHOD DebugDCB( nDebug )                INLINE win_ComDebugDCB 
> ( ::nPort, nDebug )
>   METHOD ErrorText()
>
> ENDCLASS
>
>
> METHOD Init( cPortName, nBaudRate, nParity, nByteSize, nStopBits )  
> CLASS win_Com
>
>   ::cPortName := Upper( cPortName )
>   IF Left( ::cPortName, 3 ) == "COM"
>      ::nPort := Val( SubStr( ::cPortName, 4 ) ) - 1
>      IF win_ComOpen( ::nPort, nBaudRate, nParity, nByteSize,  
> nStopBits ) != -1
>         ::lOpen := .T.
>      ENDIF
>   ENDIF
>
>   RETURN self
>
> METHOD Read( /* @ */ cString, nLength ) CLASS win_Com
>
>   cString := Space( nlength )
>
>   RETURN win_ComRead( ::nPort, @cString )
>
> METHOD RecvTo( cDelim, nMaxlen ) CLASS win_Com
>   LOCAL nResult
>   LOCAL cRecv := ""
>
>   LOCAL cString
>
>   DO WHILE .T.
>      cString := Space( 1 )
>      IF ( nResult := win_ComRead( ::nPort, @cString ) ) != -1
>         IF nResult == 0
>            EXIT
>         ELSE
>            cRecv += cString
>            IF cDelim != NIL .AND. cString == cDelim
>               EXIT
>            ENDIF
>            IF Len( cRecv ) == nMaxlen
>               EXIT
>            ENDIF
>         ENDIF
>      ELSE
>         EXIT
>      ENDIF
>   ENDDO
>
>   RETURN cRecv
>
> /* Since the win_Com functions are an amalgamation of Win functions  
> this allows
>   you to see what call did the deed when things go wrong. */
>
> METHOD ErrorText() CLASS win_Com
>   LOCAL nFcn := win_ComFuncLast( ::nPort )
>   LOCAL cString
>   LOCAL nError
>   LOCAL cMsg
>   LOCAL aWinPortFcns := { ;
>      "CreateFile", ;
>      "GetCommState", ;
>      "SetCommState", ;
>      "SetupComm", ;
>      "GetCommTimeouts", ;
>      "SetCommTimeouts", ;
>      "CloseHandle", ;
>      "WriteFile", ;
>      "ReadFile", ;
>      "GetCommModemStatus", ;
>      "PurgeComm", ;
>      "ClearCommError", ;
>      "EscapeCommFunction", ;
>      "GetCommProperties" }
>
>   IF nFcn >= 1 .AND. nFcn <= Len( aWinPortFcns )
>      cString := aWinPortFcns[ nFcn ] + "(), "
>   ELSE
>      cString := "Function number (" + hb_ntos( nFcn ) + ") invalid, "
>   ENDIF
>
>   /* WinPortError clears the error - don't call it twice */
>   cMsg := Space( 256 )
>   wapi_FormatMessage( NIL, NIL, nError := win_ComError( ::nPort ),  
> NIL, @cMsg )
>
>   RETURN cString + "error (" + hb_ntos( nError ) + ") : " + cMsg
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From abe.buch at att.net  Thu Sep 10 20:48:27 2009
From: abe.buch at att.net (AbeB)
Date: Thu Sep 10 20:48:30 2009
Subject: [Harbour] gpf on Copy struc with no open dbf
Message-ID: <1252630107390-3622441.post@n2.nabble.com>


Proc Main()
copy struc to temp



-- 
View this message in context: http://n2.nabble.com/gpf-on-Copy-struc-with-no-open-dbf-tp3622441p3622441.html
Sent from the harbour-devel mailing list archive at Nabble.com.
From vszakats at users.sourceforge.net  Thu Sep 10 21:37:45 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 10 21:37:51 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12470] trunk/harbour
Message-ID: <E1Mlv57-0004bC-J5@dn4whf1.ch3.sourceforge.com>

Revision: 12470
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12470&view=rev
Author:   vszakats
Date:     2009-09-11 01:37:44 +0000 (Fri, 11 Sep 2009)

Log Message:
-----------
2009-09-11 03:31 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * INSTALL
    + Added Ubuntu pcre and zlib pkg information.
    + Documented HB_INC_ZLIB and HB_INC_PCRE settings.
    + Documented 'local' setting of HB_INC_* values.

  * external/libhpdf/Makefile
  * external/libpng/Makefile
  * source/rtl/Makefile
  * contrib/xhb/Makefile
  * contrib/hbmzip/Makefile
  * contrib/hbsqlit3/Makefile
  * contrib/hbhpdf/Makefile
  * config/detfun.mk
  * config/detect.mk
    % Avoid redetection for local packages.
    + Integrated logic to find out whether we're using the local
      copy of any given package. This is now returned in a
      variable called HB_HAS_*_LOCAL, if this value is non-empty
      we're using the local version.
    + Added HB_INC_* option 'local', which will force using the
      locally hosted version of given package.
    + HB_HAS_* variable will now contain only the first dir where
      header was detected.
    + Locally hosted headers will always be detected now, if they
      weren't found at any default system locations.
    + Added 'nolocal' HB_INC_* option which disables above behaviour.
    ; TODO: Delete _DET_LOC_PLAT variable if current system turns
            out to work well.
    ; NOTE: I've yet to test all this on *nix.

  * config/global.mk
    + Added HB_HOST_PLAT_UNIX variable.

  * contrib/hbhpdf/Makefile
    ! Fixed mistake in prev commit.

  * contrib/gtwvg/Makefile
  * source/rtl/gttrm/Makefile
  * external/sqlite3/Makefile
  * external/libhpdf/Makefile
  * external/libpng/Makefile
    % Optimization in make logic in GTWVG Makefile.
    - HB_WITH_* vars changed to not aid user override.
    + Displaying more meaningful reason if skipped.
    + compiler/platform availability checks laxed to reflect real buildability
      (will most probably need refinements), so that it becomes possible to
      use these even on *nix platforms, in case the system hosted copy is not
      good for us or not available.
    + Now these will be built if autodetections reveals that local version
      is to be used.
    * Renamed HB_WITH_* vars to HB_SUPPORTED to not collide with HB_WITH_*
      concept which is due to replace HB_INC_*.
    ; IOW: Now it should be possible to enable these locally hosted components
           on any systems/scenarios where compilation of the given component
           is supported. This happens automatically according to HB_INC_*
           variables.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/config/detect.mk
    trunk/harbour/config/detfun.mk
    trunk/harbour/config/global.mk
    trunk/harbour/contrib/gtwvg/Makefile
    trunk/harbour/contrib/hbhpdf/Makefile
    trunk/harbour/contrib/hbmzip/Makefile
    trunk/harbour/contrib/hbsqlit3/Makefile
    trunk/harbour/contrib/xhb/Makefile
    trunk/harbour/external/libhpdf/Makefile
    trunk/harbour/external/libpng/Makefile
    trunk/harbour/external/pcre/Makefile
    trunk/harbour/external/sqlite3/Makefile
    trunk/harbour/external/zlib/Makefile
    trunk/harbour/source/rtl/Makefile
    trunk/harbour/source/rtl/gttrm/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Thu Sep 10 21:49:58 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 10 21:50:04 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12471] trunk/harbour
Message-ID: <E1MlvGw-000516-1P@dn4whf1.ch3.sourceforge.com>

Revision: 12471
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12471&view=rev
Author:   vszakats
Date:     2009-09-11 01:49:57 +0000 (Fri, 11 Sep 2009)

Log Message:
-----------
2009-09-11 03:49 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * external/pcre/Makefile
    ! Missed update to reason text.

  * contrib/hbblat/Makefile
  * contrib/hbwin/Makefile
  * source/rtl/gtdos/Makefile
  * source/rtl/gtwin/Makefile
  * source/rtl/gtos2/Makefile
  * source/rtl/gtgui/Makefile
  * source/rtl/gtwvt/Makefile
    + Indented.
    + Added skip reason.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbblat/Makefile
    trunk/harbour/contrib/hbwin/Makefile
    trunk/harbour/external/pcre/Makefile
    trunk/harbour/source/rtl/gtdos/Makefile
    trunk/harbour/source/rtl/gtgui/Makefile
    trunk/harbour/source/rtl/gtos2/Makefile
    trunk/harbour/source/rtl/gtwin/Makefile
    trunk/harbour/source/rtl/gtwvt/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Thu Sep 10 21:53:22 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 10 21:53:28 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12472] trunk/harbour
Message-ID: <E1MlvKE-00059x-BD@dn4whf1.ch3.sourceforge.com>

Revision: 12472
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12472&view=rev
Author:   vszakats
Date:     2009-09-11 01:53:20 +0000 (Fri, 11 Sep 2009)

Log Message:
-----------
2009-09-11 03:52 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * source/rtl/gtxwc/Makefile
  * source/rtl/gtcrs/Makefile
  * source/rtl/gtsln/Makefile
    + Added skip reason.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rtl/gtcrs/Makefile
    trunk/harbour/source/rtl/gtsln/Makefile
    trunk/harbour/source/rtl/gtxwc/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From ice at extreme.hu  Thu Sep 10 21:58:48 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Thu Sep 10 21:58:55 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12470] trunk/harbour
In-Reply-To: <E1Mlv57-0004bC-J5@dn4whf1.ch3.sourceforge.com>
References: <E1Mlv57-0004bC-J5@dn4whf1.ch3.sourceforge.com>
Message-ID: <alpine.GSO.2.00.0909110356590.13711@dawn.royalcomp.hu>

On Fri, 11 Sep 2009, vszakats@users.sourceforge.net wrote:

hi,

 > Revision: 12470
 >           http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12470&view=rev
 > Author:   vszakats
 > Date:     2009-09-11 01:37:44 +0000 (Fri, 11 Sep 2009)

with this, builds seem to be nicely back on track, thanks!


-- 
[-]

mkdir /nonexistent
From bedipritpal at hotmail.com  Thu Sep 10 23:08:24 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Sep 10 23:08:29 2009
Subject: [Harbour] Build Error
Message-ID: <25394369.post@talk.nabble.com>


Hello Viktor

Here is the last few lines of build error coming for when
make process is building shared libs:

e:/harbour/lib/win/mingw/libhbrtl.a(hbzlibgz.o):hbzlibgz.c:(.text+0x9e7):
undefi
ned reference to `gzwrite'
e:/harbour/lib/win/mingw/libhbrtl.a(hbzlibgz.o):hbzlibgz.c:(.text+0xaad):
undefi
ned reference to `gzgets'
e:/harbour/lib/win/mingw/libhbrtl.a(hbzlibgz.o):hbzlibgz.c:(.text+0xb9c):
undefi
ned reference to `gzsetparams'
collect2: ld returned 1 exit status
hbmk2: Error: Running linker. 1

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Build-Error-tp25394369p25394369.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Fri Sep 11 03:25:05 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 11 03:25:12 2009
Subject: [Harbour] gpf on Copy struc with no open dbf
In-Reply-To: <1252630107390-3622441.post@n2.nabble.com>
References: <1252630107390-3622441.post@n2.nabble.com>
Message-ID: <20090911072505.GA22566@uran.home.aster.pl>

On Thu, 10 Sep 2009, AbeB wrote:
> Proc Main()
> copy struc to temp

Thank you for information. Fixed.
I'll try to commit it today.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Sep 11 03:37:12 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 11 03:37:21 2009
Subject: [Harbour] Build Error
In-Reply-To: <25394369.post@talk.nabble.com>
References: <25394369.post@talk.nabble.com>
Message-ID: <4E91B3FC-4914-43E1-89E4-A1F8A1A2E71C@syenar.hu>

Hi Pritpal,

I need more information than that. Pls post other relevant
log sections.

Brgds,
Viktor

On 2009.09.11., at 05:08, Pritpal Bedi wrote:

>
> Hello Viktor
>
> Here is the last few lines of build error coming for when
> make process is building shared libs:
>
> e:/harbour/lib/win/mingw/libhbrtl.a(hbzlibgz.o):hbzlibgz.c:(.text 
> +0x9e7):
> undefi
> ned reference to `gzwrite'
> e:/harbour/lib/win/mingw/libhbrtl.a(hbzlibgz.o):hbzlibgz.c:(.text 
> +0xaad):
> undefi
> ned reference to `gzgets'
> e:/harbour/lib/win/mingw/libhbrtl.a(hbzlibgz.o):hbzlibgz.c:(.text 
> +0xb9c):
> undefi
> ned reference to `gzsetparams'
> collect2: ld returned 1 exit status
> hbmk2: Error: Running linker. 1
>
> Regards
> Pritpal Bedi
> -- 
> View this message in context: http://www.nabble.com/Build-Error-tp25394369p25394369.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Fri Sep 11 04:16:25 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 11 04:16:31 2009
Subject: [Harbour] Build Error
In-Reply-To: <4E91B3FC-4914-43E1-89E4-A1F8A1A2E71C@syenar.hu>
References: <25394369.post@talk.nabble.com>
	<4E91B3FC-4914-43E1-89E4-A1F8A1A2E71C@syenar.hu>
Message-ID: <20090911081625.GA28151@uran.home.aster.pl>

On Fri, 11 Sep 2009, Szak?ts Viktor wrote:
> I need more information than that. Pls post other relevant
> log sections.

I can replicate such this problem in Linux by:

   /*** tst.prg ***/
   proc main()
      ? HB_ZLIBVERSION()
   return

   hbmk2 tst -static

best regards,
Przemek
From vszakats at users.sourceforge.net  Fri Sep 11 04:16:38 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri Sep 11 04:16:45 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12473] trunk/harbour
Message-ID: <E1Mm1J8-0006a3-Rs@c3vjzd1.ch3.sourceforge.com>

Revision: 12473
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12473&view=rev
Author:   vszakats
Date:     2009-09-11 08:16:37 +0000 (Fri, 11 Sep 2009)

Log Message:
-----------
2009-09-11 10:16 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed missing libprefix handling in lib presence check.
      This should fix error reported by Pritpal. Thanks.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Fri Sep 11 04:17:50 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 11 04:17:58 2009
Subject: [Harbour] Build Error
In-Reply-To: <20090911081625.GA28151@uran.home.aster.pl>
References: <25394369.post@talk.nabble.com>
	<4E91B3FC-4914-43E1-89E4-A1F8A1A2E71C@syenar.hu>
	<20090911081625.GA28151@uran.home.aster.pl>
Message-ID: <F9FCD66E-7C59-458C-9A15-91F2084FAF94@syenar.hu>

Pls restest with 12473.

Brgds,
Viktor

On 2009.09.11., at 10:16, Przemyslaw Czerpak wrote:

> On Fri, 11 Sep 2009, Szak?ts Viktor wrote:
>> I need more information than that. Pls post other relevant
>> log sections.
>
> I can replicate such this problem in Linux by:
>
>   /*** tst.prg ***/
>   proc main()
>      ? HB_ZLIBVERSION()
>   return
>
>   hbmk2 tst -static
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From M.Horodyski at pzuzycie.com.pl  Fri Sep 11 04:21:34 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri Sep 11 04:21:44 2009
Subject: [Harbour] Problems with ADORDD.
In-Reply-To: <4AA95B30.1030700@cultura.com.br>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AB9B@PINK.zycie.pzu>

 

>-----Original Message-----
>From: Ranier Vilela [mailto:ranier@cultura.com.br] 
>Sent: Thursday, September 10, 2009 10:02 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] Problems with ADORDD.
>
>Horodyski Marek (PZUZ) escreveu:
>> What can cause this error :
>>
>> oErr:subCode______      3012
>> oErr:description__Nieprawid?owy argument // <-- wrong parameter 
>> oErr:filename_____ oErr:operation____OPEN
>> oErr:genCode______         1

[...]   

>Proballly ADORDD is broken because is ole intensive and ole 
>was changed in Harbour.
>ADORDD need review to suport new ole api in Harbour?
>
>Best regards,
>
>Ranier Vilela

I know that the problem does not concern Harbor.
I'm using ADO because only through them can get to Oracle.
This shows, however, that the Harbor is not a major stable gateway for access to databases like Oracle or DB2. 

Do you tried to get through to Oracle SQLRDD?

Regards,
Marek Horodyski
From elart at elart.it  Fri Sep 11 04:27:37 2009
From: elart at elart.it (elart)
Date: Fri Sep 11 04:27:44 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12472] trunk/harbour
In-Reply-To: <E1MlvKE-00059x-BD@dn4whf1.ch3.sourceforge.com>
Message-ID: <kMvTIFbQ.1252657657.5496870.marcobra@82.105.36.210>


Viktor

All is compiling fine on Ubuntu 9.04 32 bits

Many thanks and best regards...!

Marco
From harbour.01 at syenar.hu  Fri Sep 11 04:34:39 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 11 04:34:47 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12472] trunk/harbour
In-Reply-To: <kMvTIFbQ.1252657657.5496870.marcobra@82.105.36.210>
References: <kMvTIFbQ.1252657657.5496870.marcobra@82.105.36.210>
Message-ID: <A51782CC-D64E-40B1-B193-81C0675E0EE9@syenar.hu>

Hi Marco,

Thank you for the feedback.

Brgds,
Viktor

On 2009.09.11., at 10:27, elart wrote:

>
> Viktor
>
> All is compiling fine on Ubuntu 9.04 32 bits
>
> Many thanks and best regards...!
>
> Marco
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Fri Sep 11 04:38:05 2009
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 11 04:38:13 2009
Subject: [Harbour] Problems with ADORDD.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AB9B@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AB9B@PINK.zycie.pzu>
Message-ID: <43CABE9D-2571-4366-B47D-A690BCFF243F@syenar.hu>

>> Proballly ADORDD is broken because is ole intensive and ole
>> was changed in Harbour.
>> ADORDD need review to suport new ole api in Harbour?
>>
>> Best regards,
>>
>> Ranier Vilela
>
> I know that the problem does not concern Harbor.
> I'm using ADO because only through them can get to Oracle.
> This shows, however, that the Harbor is not a major stable gateway  
> for access to databases like Oracle or DB2.

It seems that ADORDD is not important enough for its users
(developers) that they maintain it. Sad, but what can we do.

Oracle can be accessed also by ODBC. I also hope we will
have a native access mode for Oracle in the future. ocilib
looks a very nice lib to build a Harbour wrapper upon.

Brgds,
Viktor

From ice at extreme.hu  Fri Sep 11 04:51:18 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Fri Sep 11 04:51:24 2009
Subject: [Harbour] Build Error
In-Reply-To: <F9FCD66E-7C59-458C-9A15-91F2084FAF94@syenar.hu>
References: <25394369.post@talk.nabble.com>
	<4E91B3FC-4914-43E1-89E4-A1F8A1A2E71C@syenar.hu>
	<20090911081625.GA28151@uran.home.aster.pl>
	<F9FCD66E-7C59-458C-9A15-91F2084FAF94@syenar.hu>
Message-ID: <alpine.GSO.2.00.0909111049440.13711@dawn.royalcomp.hu>

On Fri, 11 Sep 2009, Viktor Szak?ts wrote:

no joy ;(

$    hbmk2 t.prg -static
hbmk2: Processing configuration: /usr/bin/hbmk.cfg                             
Harbour 2.0.0beta3 (Rev. 12473)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 't.prg'...
Lines 6, Functions/Procedures 1
Generating C source output to 't.c'... Done.
/usr/lib/harbour/libhbrtl.a(hbzlib.o): In function `HB_FUN_HB_ZERROR':
(.text+0x11): undefined reference to `zError'
/usr/lib/harbour/libhbrtl.a(hbzlib.o): In function `HB_FUN_HB_ZCOMPRESS':
(.text+0x102): undefined reference to `compress2'
/usr/lib/harbour/libhbrtl.a(hbzlib.o): In function `HB_FUN_HB_ZCOMPRESS':
(.text+0x211): undefined reference to `compress'
/usr/lib/harbour/libhbrtl.a(hbzlib.o): In function `HB_FUN_HB_ZCOMPRESS':
(.text+0x23c): undefined reference to `compressBound'
/usr/lib/harbour/libhbrtl.a(hbzlib.o): In function `HB_FUN_HB_ZCOMPRESSBOUND':
(.text+0x276): undefined reference to `compressBound'
/usr/lib/harbour/libhbrtl.a(hbzlib.o): In function `HB_FUN_HB_ZLIBVERSION':
(.text+0x2f4): undefined reference to `zlibVersion'
/usr/lib/harbour/libhbrtl.a(hbzlib.o): In function `hb_zlibUncompressedSize':
(.text+0x36b): undefined reference to `inflateInit_'
/usr/lib/harbour/libhbrtl.a(hbzlib.o): In function `hb_zlibUncompressedSize':
(.text+0x38b): undefined reference to `inflate'
/usr/lib/harbour/libhbrtl.a(hbzlib.o): In function `hb_zlibUncompressedSize':
(.text+0x39e): undefined reference to `inflateEnd'
/usr/lib/harbour/libhbrtl.a(hbzlib.o): In function `HB_FUN_HB_ZUNCOMPRESS':
(.text+0x474): undefined reference to `uncompress'
collect2: ld returned 1 exit status
hbmk2: Error: Running linker. 1                                                
gcc t.o hbmk_crnhmk.o   -Wl,--start-group -lhbextern -lhbdebug -lhbvm 
-lhbrtl -lhblang -lhbcpage -lgtcgi -lgtpca -lgtstd -lgttrm -lhbrdd 
-lhbuddall -lhbusrrdd -lrddntx -lrddcdx -lrddnsx -lrddfpt -lhbrdd 
-lhbhsx -lhbsix -lhbmacro -lhbcplr -lhbpp -lhbcommon -lm -ldl -lrt 
-lgpm  -Wl,--end-group -ot -L/usr/lib/harbour

 > Pls restest with 12473.
 > 
 > Brgds,
 > Viktor
 > 
 > On 2009.09.11., at 10:16, Przemyslaw Czerpak wrote:
 > 
 > > On Fri, 11 Sep 2009, Szak???ts Viktor wrote:
 > > > I need more information than that. Pls post other relevant
 > > > log sections.
 > > 
 > > I can replicate such this problem in Linux by:
 > > 
 > >   /*** tst.prg ***/
 > >   proc main()
 > >      ? HB_ZLIBVERSION()
 > >   return
 > > 
 > >   hbmk2 tst -static
 > > 
 > > best regards,
 > > Przemek
 > > _______________________________________________
 > > Harbour mailing list
 > > Harbour@harbour-project.org
 > > http://lists.harbour-project.org/mailman/listinfo/harbour
 > 
 > _______________________________________________
 > Harbour mailing list
 > Harbour@harbour-project.org
 > http://lists.harbour-project.org/mailman/listinfo/harbour
 > 

-- 
[-]

mkdir /nonexistent
From Istvan.Bisz at t-online.hu  Fri Sep 11 05:11:30 2009
From: Istvan.Bisz at t-online.hu (=?iso-8859-1?Q?Bisz_Istv=E1n?=)
Date: Fri Sep 11 05:11:57 2009
Subject: [Harbour] SELinux alert: libharbour-2.0.0.so which requires text
	relocation
Message-ID: <002d01ca32bf$db95f260$92c1d720$@Bisz@t-online.hu>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: selinux_alert.zip
Type: application/x-zip-compressed
Size: 1460 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090911/8f83194b/selinux_alert.bin
From vszakats at users.sourceforge.net  Fri Sep 11 05:17:45 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri Sep 11 05:17:51 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12474] trunk/harbour
Message-ID: <E1Mm2GH-0001CD-Qb@dn4whf1.ch3.sourceforge.com>

Revision: 12474
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12474&view=rev
Author:   vszakats
Date:     2009-09-11 09:17:44 +0000 (Fri, 11 Sep 2009)

Log Message:
-----------
2009-09-11 11:16 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed to include system zlib/pcre libs in static mode if local built lib
      isn't found.

  * external/sqlite3/Makefile
  * external/libhpdf/Makefile
  * external/libpng/Makefile
  * utils/hbmk2/hbmk2.prg
  * contrib/hbsqlit3/Makefile
  * contrib/hbhpdf/Makefile
  * config/detfun.mk
  * config/detect.mk
    - Deleted _DET_LOC_PLAT variable.

  * package/winuni/mpkg_win_uni_extra_copy.bat
    - Deleted some extra commented lines dealing with pcre/zlib headers.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/detect.mk
    trunk/harbour/config/detfun.mk
    trunk/harbour/contrib/hbhpdf/Makefile
    trunk/harbour/contrib/hbsqlit3/Makefile
    trunk/harbour/external/libhpdf/Makefile
    trunk/harbour/external/libpng/Makefile
    trunk/harbour/external/sqlite3/Makefile
    trunk/harbour/package/winuni/mpkg_win_uni_extra_copy.bat
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Fri Sep 11 05:23:02 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 11 05:23:11 2009
Subject: [Harbour] Build Error
In-Reply-To: <alpine.GSO.2.00.0909111049440.13711@dawn.royalcomp.hu>
References: <25394369.post@talk.nabble.com>
	<4E91B3FC-4914-43E1-89E4-A1F8A1A2E71C@syenar.hu>
	<20090911081625.GA28151@uran.home.aster.pl>
	<F9FCD66E-7C59-458C-9A15-91F2084FAF94@syenar.hu>
	<alpine.GSO.2.00.0909111049440.13711@dawn.royalcomp.hu>
Message-ID: <41094CBE-2D1E-4A41-87DA-E976A80C8212@syenar.hu>

Okay, this was a different issue, pls recheck after 12474.

Brgds,
Viktor

On 2009.09.11., at 10:51, Tamas TEVESZ wrote:

> On Fri, 11 Sep 2009, Viktor Szak?ts wrote:
>
> no joy ;(
>
> $    hbmk2 t.prg -static
> hbmk2: Processing configuration: /usr/bin/hbmk.cfg
> Harbour 2.0.0beta3 (Rev. 12473)
> Copyright (c) 1999-2009, http://www.harbour-project.org/
> Compiling 't.prg'...
> Lines 6, Functions/Procedures 1
> Generating C source output to 't.c'... Done.
> /usr/lib/harbour/libhbrtl.a(hbzlib.o): In function `HB_FUN_HB_ZERROR':
> (.text+0x11): undefined reference to `zError'
> /usr/lib/harbour/libhbrtl.a(hbzlib.o): In function  
> `HB_FUN_HB_ZCOMPRESS':
> (.text+0x102): undefined reference to `compress2'
> /usr/lib/harbour/libhbrtl.a(hbzlib.o): In function  
> `HB_FUN_HB_ZCOMPRESS':
> (.text+0x211): undefined reference to `compress'
> /usr/lib/harbour/libhbrtl.a(hbzlib.o): In function  
> `HB_FUN_HB_ZCOMPRESS':
> (.text+0x23c): undefined reference to `compressBound'
> /usr/lib/harbour/libhbrtl.a(hbzlib.o): In function  
> `HB_FUN_HB_ZCOMPRESSBOUND':
> (.text+0x276): undefined reference to `compressBound'
> /usr/lib/harbour/libhbrtl.a(hbzlib.o): In function  
> `HB_FUN_HB_ZLIBVERSION':
> (.text+0x2f4): undefined reference to `zlibVersion'
> /usr/lib/harbour/libhbrtl.a(hbzlib.o): In function  
> `hb_zlibUncompressedSize':
> (.text+0x36b): undefined reference to `inflateInit_'
> /usr/lib/harbour/libhbrtl.a(hbzlib.o): In function  
> `hb_zlibUncompressedSize':
> (.text+0x38b): undefined reference to `inflate'
> /usr/lib/harbour/libhbrtl.a(hbzlib.o): In function  
> `hb_zlibUncompressedSize':
> (.text+0x39e): undefined reference to `inflateEnd'
> /usr/lib/harbour/libhbrtl.a(hbzlib.o): In function  
> `HB_FUN_HB_ZUNCOMPRESS':
> (.text+0x474): undefined reference to `uncompress'
> collect2: ld returned 1 exit status
> hbmk2: Error: Running linker. 1
> gcc t.o hbmk_crnhmk.o   -Wl,--start-group -lhbextern -lhbdebug -lhbvm
> -lhbrtl -lhblang -lhbcpage -lgtcgi -lgtpca -lgtstd -lgttrm -lhbrdd
> -lhbuddall -lhbusrrdd -lrddntx -lrddcdx -lrddnsx -lrddfpt -lhbrdd
> -lhbhsx -lhbsix -lhbmacro -lhbcplr -lhbpp -lhbcommon -lm -ldl -lrt
> -lgpm  -Wl,--end-group -ot -L/usr/lib/harbour
>
>> Pls restest with 12473.
>>
>> Brgds,
>> Viktor
>>
>> On 2009.09.11., at 10:16, Przemyslaw Czerpak wrote:
>>
>>> On Fri, 11 Sep 2009, Szak???ts Viktor wrote:
>>>> I need more information than that. Pls post other relevant
>>>> log sections.
>>>
>>> I can replicate such this problem in Linux by:
>>>
>>>  /*** tst.prg ***/
>>>  proc main()
>>>     ? HB_ZLIBVERSION()
>>>  return
>>>
>>>  hbmk2 tst -static
>>>
>>> best regards,
>>> Przemek
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
> -- 
> [-]
>
> mkdir /nonexistent
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From sscc at mweb.co.za  Fri Sep 11 05:31:35 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Sep 11 05:31:44 2009
Subject: [Harbour] Harbour 2.0.0beta3 (unofficial) available now
In-Reply-To: <18d502870909061011n328e50afhbe802e356bbf2642@mail.gmail.com>
References: <18d502870909061011n328e50afhbe802e356bbf2642@mail.gmail.com>
Message-ID: <4AAA18F7.1090404@mweb.co.za>

Viktor Szak?ts wrote:

> Harbour 2.0.0beta3 (r12422) source archives and Windows binary
> releases are available for download here:
>    http://syenar.hu/harbour/
> 
> Make sure to check INSTALL doc "QUICK START" section and visit
> our user forums at:
>    http://sourceforge.net/apps/phpbb/harbour-project/
> 

Can I post this on Clipper news group?

Regards
Alex

From elart at elart.it  Fri Sep 11 05:33:46 2009
From: elart at elart.it (elart)
Date: Fri Sep 11 05:33:53 2009
Subject: [Harbour] HB_SENDMAIL hangs with beta3
In-Reply-To: <9257026e0909100305o5130f1d0p5fc030fafdabd9b1@mail.gmail.com>
Message-ID: <ztHQGPJ0.1252661626.3996760.marcobra@82.105.36.210>


Same here with:

Harbour 2.0.0beta3 (Rev. 12472)
Copyright (c) 1999-2009, http://www.harbour-project.org/

Harbour Build Info
---------------------------
Version: Harbour 2.0.0beta3 (Rev. 12472)
Compiler: GNU C 4.3.3 (32-bit)
Platform: Linux 2.6.28-15-generic i686
PCode version: 0.2


the prg hang,  how i test it...

I have create a file testmail.prg with this content....

-------------------------------------------------------------------------------------------

procedure main

    local cServer       :=      "192.168.100.18"
    local nPort         :=      25
    local cFrom         :=      "marcobra@mypc"
    local aTo           :=      {"marcobra@mypc"}
    local aCC           :=      {"marcobra@mypc"}
    local aBCC          :=      {"marcobra@mypc"}
    local cBody         :=      "test"
    local cSubject      :=      "Test from Harbour..."
    local aFiles        :=      {}
    local cUser         :=      "marcobra"
    local cPass         :=      ""
    local cPopServer    :=      "192.168.100.18"
    local nPriority     :=      3
    local lRead         :=      .f.
    local bTrace        :=      .t.
    local lPopAuth      :=      .f.
    local lNoAuth       :=      .f.
    local nTimeOut      :=      2000
    local cReplyTo      :=      "marcobra@mypc"
    local lTLS          :=      .f.
    local cSMTPPass     :=      ""

   ? "sending mail"
      hb_SendMail( cServer, nPort, cFrom, aTo, aCC, aBCC, cBody,
cSubject, aFiles, cUser, cPass, cPopServer, nPriority, lRead, bTrace,
lPopAuth, lNoAuth, nTimeOut, cReplyTo, lTLS, cSMTPPass )
   ? "finish send"
 return


// FUNCTION hb_SendMail( cServer, nPort, cFrom, aTo, aCC, aBCC, cBody,
cSubject, aFiles, cUser, cPass, cPopServer, nPriority, lRead, bTrace,
lPopAuth, lNoAuth, nTimeOut, cReplyTo, lTLS, cSMTPPass )

   /*
   cServer    -> Required. IP or domain name of the mail server
   nPort      -> Optional. Port used my email server
   cFrom      -> Required. Email address of the sender
   aTo        -> Required. Character string or array of email addresses
to send the email to
   aCC        -> Optional. Character string or array of email adresses
for CC (Carbon Copy)
   aBCC       -> Optional. Character string or array of email adresses
for BCC (Blind Carbon Copy)
   cBody      -> Optional. The body message of the email as text, or the
filename of the HTML message to send.
   cSubject   -> Optional. Subject of the sending email
   aFiles     -> Optional. Array of attachments to the email to send
   cUser      -> Required. User name for the POP3 server
   cPass      -> Required. Password for cUser
   cPopServer -> Required. POP3 server name or address
   nPriority  -> Optional. Email priority: 1=High, 3=Normal (Standard),
5=Low
   lRead      -> Optional. If set to .T., a confirmation request is send.
Standard setting is .F.
   bTrace     -> Optional. If set to .T., a log file is created
(smtp-<nNr>.log). Standard setting is NIL.
                           If a block is passed, it will be called for
each log event with the message a string, no param on session close.
   lPopAuth   -> Optional. Do POP3 authentication before sending mail.
   lNoAuth    -> Optional. Disable Autentication methods
   nTimeOut   -> Optional. Number os ms to wait default 20000 (20s)
   cReplyTo   -> Optional.
   lTLS       -> Optional. Default .F., connect to the server using
Secure Socket Layer connection (pop3s, smtps)
   */

-------------------------------------------------------------------------------------------

Then i compile with...

hbmk2 -lhbtip -lpcre -static testmail

then i run with

./testmail

it hang the timeout is not working and i must kill the process from
another terminal

i can see this smtp.log in the same dir of running testmail

20090911-10:53:36  :INETCONNECT( 192.168.100.18, 25 )
>> <pointer> <<

20090911-10:53:36  :INETERRORCODE( <pointer> )
>>          0 <<

20090911-10:53:36  :INETSENDALL( <pointer>, 15, EHLO marcobra )
>>         15 <<

20090911-10:53:36  :INETRECVLINE( <pointer>, , 512 )
>> 220 mymailserverpc.xxx.xxx ESMTP Postfix (Ubuntu) <<

20090911-10:53:36  :INETERRORCODE( <pointer> )
>>          0 <<

20090911-10:53:36  :INETRECVLINE( <pointer>, , 512 )
>> 250-mymailserverpc.xxx.xxx <<

20090911-10:53:36  :INETERRORCODE( <pointer> )
>>          0 <<

20090911-10:53:36  :INETRECVLINE( <pointer>, , 512 )
>> 250-PIPELINING <<

20090911-10:53:36  :INETERRORCODE( <pointer> )
>>          0 <<

20090911-10:53:36  :INETRECVLINE( <pointer>, , 512 )
>> 250-SIZE 153600000 <<

20090911-10:53:36  :INETERRORCODE( <pointer> )
>>          0 <<

20090911-10:53:36  :INETRECVLINE( <pointer>, , 512 )
>> 250-VRFY <<

20090911-10:53:36  :INETERRORCODE( <pointer> )
>>          0 <<

20090911-10:53:36  :INETRECVLINE( <pointer>, , 512 )
>> 250-ETRN <<

20090911-10:53:36  :INETERRORCODE( <pointer> )
>>          0 <<

20090911-10:53:36  :INETRECVLINE( <pointer>, , 512 )
>> 250-STARTTLS <<

20090911-10:53:36  :INETERRORCODE( <pointer> )
>>          0 <<

20090911-10:53:36  :INETRECVLINE( <pointer>, , 512 )
>> 250-ENHANCEDSTATUSCODES <<

20090911-10:53:36  :INETERRORCODE( <pointer> )
>>          0 <<

20090911-10:53:36  :INETRECVLINE( <pointer>, , 512 )
>> 250-8BITMIME <<

20090911-10:53:36  :INETERRORCODE( <pointer> )
>>          0 <<

20090911-10:53:36  :INETRECVLINE( <pointer>, , 512 )
>> 250 DSN <<

20090911-10:53:36  :INETERRORCODE( <pointer> )
>>          0 <<

20090911-10:53:37  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:37  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:38  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:38  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:39  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:39  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:40  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:40  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:41  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:41  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:42  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:42  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:43  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:43  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:44  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:44  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:45  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:45  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:46  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:46  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:47  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:47  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:48  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:48  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:49  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:49  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:50  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:50  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:51  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:51  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:52  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:52  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:53  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:53  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:54  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:54  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:55  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:55  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:56  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:56  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:57  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:57  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:58  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:58  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:53:59  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:53:59  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:54:00  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:54:00  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:54:01  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:54:01  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:54:02  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:54:02  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:54:03  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:54:03  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:54:04  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:54:04  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:54:05  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:54:05  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:54:06  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:54:06  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:54:07  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:54:07  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:54:08  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:54:08  :INETERRORCODE( <pointer> )
>>         -1 <<

20090911-10:54:09  :INETRECVLINE( <pointer>, , 512 )
>>  <<

20090911-10:54:09  :INETERRORCODE( <pointer> )
>>         -1 <<
From vszakats at users.sourceforge.net  Fri Sep 11 05:36:37 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri Sep 11 05:36:44 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12475] trunk/harbour
Message-ID: <E1Mm2YX-0001c2-Kl@dn4whf1.ch3.sourceforge.com>

Revision: 12475
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12475&view=rev
Author:   vszakats
Date:     2009-09-11 09:36:28 +0000 (Fri, 11 Sep 2009)

Log Message:
-----------
2009-09-11 11:35 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * INSTALL
  * contrib/rddsql/sddpg/Makefile
  * contrib/hbpgsql/Makefile
    + Added pgsql84 default support.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/contrib/hbpgsql/Makefile
    trunk/harbour/contrib/rddsql/sddpg/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Fri Sep 11 05:37:59 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 11 05:38:09 2009
Subject: [Harbour] Harbour 2.0.0beta3 (unofficial) available now
In-Reply-To: <4AAA18F7.1090404@mweb.co.za>
References: <18d502870909061011n328e50afhbe802e356bbf2642@mail.gmail.com>
	<4AAA18F7.1090404@mweb.co.za>
Message-ID: <93186FE2-2957-46B6-86C0-665BCA4715E2@syenar.hu>

On 2009.09.11., at 11:31, Alex Strickland wrote:

> Viktor Szak?ts wrote:
>
>> Harbour 2.0.0beta3 (r12422) source archives and Windows binary
>> releases are available for download here:
>>   http://syenar.hu/harbour/
>> Make sure to check INSTALL doc "QUICK START" section and visit
>> our user forums at:
>>   http://sourceforge.net/apps/phpbb/harbour-project/
>
> Can I post this on Clipper news group?

Of course. Thank you very much.

[ maybe you missed it: can you pls send me the win_com sources
in .zipped form? Thanks in advance ]

Brgds,
Viktor

From ice at extreme.hu  Fri Sep 11 05:39:09 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Fri Sep 11 05:39:16 2009
Subject: [Harbour] Build Error
In-Reply-To: <41094CBE-2D1E-4A41-87DA-E976A80C8212@syenar.hu>
References: <25394369.post@talk.nabble.com>
	<4E91B3FC-4914-43E1-89E4-A1F8A1A2E71C@syenar.hu>
	<20090911081625.GA28151@uran.home.aster.pl>
	<F9FCD66E-7C59-458C-9A15-91F2084FAF94@syenar.hu>
	<alpine.GSO.2.00.0909111049440.13711@dawn.royalcomp.hu>
	<41094CBE-2D1E-4A41-87DA-E976A80C8212@syenar.hu>
Message-ID: <alpine.GSO.2.00.0909111128410.13711@dawn.royalcomp.hu>

On Fri, 11 Sep 2009, Viktor Szak?ts wrote:

 > Okay, this was a different issue, pls recheck after 12474.

yup, this works, thanks.

 > > $    hbmk2 t.prg -static
 > > hbmk2: Processing configuration: /usr/bin/hbmk.cfg
 > > Harbour 2.0.0beta3 (Rev. 12473)
 > > Copyright (c) 1999-2009, http://www.harbour-project.org/
 > > Compiling 't.prg'...
 > > Lines 6, Functions/Procedures 1
 > > Generating C source output to 't.c'... Done.
 > > /usr/lib/harbour/libhbrtl.a(hbzlib.o): In function `HB_FUN_HB_ZERROR':
 > > (.text+0x11): undefined reference to `zError'
 > > /usr/lib/harbour/libhbrtl.a(hbzlib.o): In function `HB_FUN_HB_ZCOMPRESS':

 > > > On 2009.09.11., at 10:16, Przemyslaw Czerpak wrote:
 > > > 
 > > > > On Fri, 11 Sep 2009, Szak???ts Viktor wrote:
 > > > > > I need more information than that. Pls post other relevant
 > > > > > log sections.
 > > > > 
 > > > > I can replicate such this problem in Linux by:
 > > > > 
 > > > > /*** tst.prg ***/
 > > > > proc main()
 > > > >    ? HB_ZLIBVERSION()
 > > > > return
 > > > > 
 > > > > hbmk2 tst -static

-- 
[-]

mkdir /nonexistent
From lorenzo.fiorini at gmail.com  Fri Sep 11 05:43:20 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Sep 11 05:43:26 2009
Subject: [Harbour] SELinux alert: libharbour-2.0.0.so which requires text 
	relocation
In-Reply-To: <8789634506907346438@unknownmsgid>
References: <8789634506907346438@unknownmsgid>
Message-ID: <9257026e0909110243h1ec34430o6910cb37bab7ed37@mail.gmail.com>

On Fri, Sep 11, 2009 at 11:11 AM, Bisz Istv?n <Istvan.Bisz@t-online.hu> wrote:
>
> ?SELinux is preventing demoqt from loading
> /usr/local/lib/harbour/libharbour-2.0.0.so which requires text relocation.?

It has always been in this way.

If I run eu-findtextrel I get 81094 lines of:

either the file containing the function '_init' or the file containing
the function 'HB_FUN_HB_GT_TRM' is not compiled with -fpic/-fPIC
...
either the file containing the function 'hb_macroExprNewFunCall' or
the file containing the function 'hb_macroerror' is not compiled with
-fpic/-fPIC

best regards,
Lorenzo
From M.Horodyski at pzuzycie.com.pl  Fri Sep 11 06:02:35 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri Sep 11 06:02:43 2009
Subject: [Harbour] Problems with ADORDD.
In-Reply-To: <43CABE9D-2571-4366-B47D-A690BCFF243F@syenar.hu>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280ABDD@PINK.zycie.pzu>

>-----Original Message-----
>From: Viktor Szak?ts [mailto:harbour.01@syenar.hu] 
>Sent: Friday, September 11, 2009 10:38 AM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] Problems with ADORDD.

[...]

>It seems that ADORDD is not important enough for its users
>(developers) that they maintain it. Sad, but what can we do.
>
>Oracle can be accessed also by ODBC. I also hope we will have 
>a native access mode for Oracle in the future. ocilib looks a 
>very nice lib to build a Harbour wrapper upon.
>
>Brgds,
>Viktor

Oci is like a dream. I managed in test app to get through the OCI into the base of pure C code, but in C I not know how to write users application. 
Unfortunately, ODBC, despite many attempts I was not able to connect to the database, and through ADO, you can easily connect. Problems begin until later.

Regards,
Marek Horodyski
From harbour.01 at syenar.hu  Fri Sep 11 06:11:52 2009
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 11 06:12:01 2009
Subject: [Harbour] Problems with ADORDD.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280ABDD@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280ABDD@PINK.zycie.pzu>
Message-ID: <7F1276F0-33B8-45C0-9933-60B3DC958AC7@syenar.hu>

>> It seems that ADORDD is not important enough for its users
>> (developers) that they maintain it. Sad, but what can we do.
>>
>> Oracle can be accessed also by ODBC. I also hope we will have
>> a native access mode for Oracle in the future. ocilib looks a
>> very nice lib to build a Harbour wrapper upon.
>>
>> Brgds,
>> Viktor
>
> Oci is like a dream. I managed in test app to get through the OCI  
> into the base of pure C code, but in C I not know how to write users  
> application.
> Unfortunately, ODBC, despite many attempts I was not able to connect  
> to the database, and through ADO, you can easily connect. Problems  
> begin until later.

Maybe ODBC could also be fixed. I can't remember you exact
report ATM, but probably some debugging on your part could
help. I assume ODBC itself is able to connect to Oracle.
If this is so, it should be possible from Harbour too.
First probably it would be useful to test pure Harbour-less
ODBC to Oracle access than move on to hbodbc.

Brgds,
Viktor

From kadziola at tlen.pl  Fri Sep 11 06:45:27 2009
From: kadziola at tlen.pl (Jaroslaw Kadziola)
Date: Fri Sep 11 06:45:37 2009
Subject: [Harbour] OLE in WINCE
In-Reply-To: <609353e70908260431o726da9fene0c1a2ead25d4f24@mail.gmail.com>
References: <1871917516.20090821141159@tlen.pl>
	<411007996.20090821143028@tlen.pl>
	<18d502870908210536o8ee63eck25123b2b8fd281c9@mail.gmail.com>
	<14464984.20090821152825@tlen.pl>
	<20090821134502.GA1678@uran.home.aster.pl>
	<11010132970.20090822184639@tlen.pl>
	<20090824181300.GA14328@uran.home.aster.pl>
	<100391600.20090826072836@tlen.pl>
	<20090826092129.GA22748@uran.home.aster.pl>
	<813518256.20090826125846@tlen.pl>
	<609353e70908260431o726da9fene0c1a2ead25d4f24@mail.gmail.com>
Message-ID: <49219562.20090911124527@tlen.pl>

Hi,

4 pictures for the same code -  clipper with pocketdos for WM
and  harbour for winCE with this sets :

   hb_setCodePage( "PL852" )
   hb_setTermCP( "PL852" )

   hb_gtInfo( HB_GTI_RESIZEMODE, HB_GTI_RESIZEMODE_ROWS )
   hb_gtInfo( HB_GTI_CODEPAGE, 0 )

   hb_gtInfo( HB_GTI_FONTNAME, 'Tahoma' )
   hb_gtInfo( HB_GTI_FONTWIDTH, 8 )
   hb_gtInfo( HB_GTI_FONTSIZE, 12 )
   SetBlink(.F.)
   Set Color To 'N/W*'
   SetMode(40,25)



first screen :

clip+pocketdos : http://picasaweb.google.pl/jarek.kadziola/HarbourVsClipperPocketDos#5380151348454158114
harbour :        http://picasaweb.google.pl/jarek.kadziola/HarbourVsClipperPocketDos#5380151347686813842

and second screen :

clip+pocketdos : http://picasaweb.google.pl/jarek.kadziola/HarbourVsClipperPocketDos#5380151354110200034
harbour :        http://picasaweb.google.pl/jarek.kadziola/HarbourVsClipperPocketDos#5380151354434082450

-- 
Regards,

Jaroslaw Kadziola

From sscc at mweb.co.za  Fri Sep 11 06:46:01 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Sep 11 06:46:11 2009
Subject: [Harbour] Harbour 2.0.0beta3 (unofficial) available now
In-Reply-To: <93186FE2-2957-46B6-86C0-665BCA4715E2@syenar.hu>
References: <18d502870909061011n328e50afhbe802e356bbf2642@mail.gmail.com>	<4AAA18F7.1090404@mweb.co.za>
	<93186FE2-2957-46B6-86C0-665BCA4715E2@syenar.hu>
Message-ID: <4AAA2A69.5010600@mweb.co.za>

Viktor Szak?ts wrote:

> Of course. Thank you very much.

Thanks, I posted it.

> [ maybe you missed it: can you pls send me the win_com sources
> in .zipped form? Thanks in advance ]

No, just busy with other things, please find attached.

Regards
Alex


-------------- next part --------------
A non-text attachment was scrubbed...
Name: win_com.zip
Type: application/zip
Size: 8286 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090911/3dcd7eac/win_com.zip
From dbtopas at dbtopas.lt  Fri Sep 11 06:54:03 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Sep 11 06:55:24 2009
Subject: [Harbour] SQL RDD
In-Reply-To: <eb96f4980909051329l90b797ftaecd9842534d074a@mail.gmail.com>
References: <eb96f4980909051329l90b797ftaecd9842534d074a@mail.gmail.com>
Message-ID: <4AAA2C4B.3070908@dbtopas.lt>

Hi,


Lucas De Beltr?n wrote:
> In Harbour, is there a RDD for SQL, so I keep the same code (such as SELECT
> ("INFO"), SET FILTER, PACK, etc).

RDDSQL gives possibility to obtain SELECT query result via RDD API, but 
it does not support PACK. There is no PACK query in SQL.


Regards,
Mindaugas
From dbtopas at dbtopas.lt  Fri Sep 11 06:58:15 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Sep 11 06:59:35 2009
Subject: [Harbour] ActiveX
In-Reply-To: <4AA5348B.4020003@mweb.co.za>
References: <4A96A903.7050808@mweb.co.za>	<25178548.post@talk.nabble.com>	<20090903055857.GA6924@uran.home.aster.pl>	<4A9FC5E2.6090701@dbtopas.lt>	<20090903141421.GB1443@uran.home.aster.pl>	<4A9FD484.6050608@dbtopas.lt>	<4A9FD931.6060404@mweb.co.za>	<4A9FE2E4.4010107@dbtopas.lt>	<20090903215311.GA29866@uran.home.aster.pl>	<4AA0D67F.7060501@mweb.co.za>	<4AA0DEC8.60200@dbtopas.lt>	<4AA0E8D8.6030008@mweb.co.za>	<4AA0EA35.2070308@dbtopas.lt>
	<4AA5348B.4020003@mweb.co.za>
Message-ID: <4AAA2D47.6040104@dbtopas.lt>

Hi,


> Do you think it is worth having a function to manually shut down the 
> connection point, as HWGUI does? It seems that Release() is never 
> called, for whatever reason.

I'm really sorry, but I have nothing to do, if you are talking about 
HWGUI. SELF CONTAINED samples would help to solve the problem. Please, 
include WinAPI wrapper functions into this sample to be able to compile 
it without external code.


Regards,
Mindaugas
From dbtopas at dbtopas.lt  Fri Sep 11 07:08:58 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Sep 11 07:10:17 2009
Subject: [Harbour] Problems with ADORDD.
In-Reply-To: <7F1276F0-33B8-45C0-9933-60B3DC958AC7@syenar.hu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280ABDD@PINK.zycie.pzu>
	<7F1276F0-33B8-45C0-9933-60B3DC958AC7@syenar.hu>
Message-ID: <4AAA2FCA.9010707@dbtopas.lt>

Hi,


>> Oci is like a dream. I managed in test app to get through the OCI into 
>> the base of pure C code, but in C I not know how to write users 
>> application.
>> Unfortunately, ODBC, despite many attempts I was not able to connect 
>> to the database, and through ADO, you can easily connect. Problems 
>> begin until later.
> 
> Maybe ODBC could also be fixed. I can't remember you exact
> report ATM, but probably some debugging on your part could
> help. I assume ODBC itself is able to connect to Oracle.
> If this is so, it should be possible from Harbour too.
> First probably it would be useful to test pure Harbour-less
> ODBC to Oracle access than move on to hbodbc.

1) I guess Oracle forums should help to establish Oracle ODBC connection.

2) We had some discussion about OCI in June. I've downloaded Oracle 
Client, but server download is 1.7GB size. I do not want to install such 
amount of code just for developing SDDOCI/SDDORA library. If someone can 
give access to Oracle server (open firewall ports, give information how 
to connect to server via OCI, etc.) for development/testing purposes, I 
can help to write RDDSQL driver for it.


Regards,
Mindaugas
From dbtopas at dbtopas.lt  Fri Sep 11 07:14:43 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Sep 11 07:16:03 2009
Subject: [Harbour] Harbour clang static analyzer results
In-Reply-To: <18d502870909081502g68611775p37df9584778fa21d@mail.gmail.com>
References: <18d502870909081502g68611775p37df9584778fa21d@mail.gmail.com>
Message-ID: <4AAA3123.5010802@dbtopas.lt>

Hi,


> ../../../sqlmix.c:1110:22: warning: Dereference of null pointer
>         if ( pNode->Leaf )

static void hb_mixTagSkip( PMIXTAG pTag, LONG lSkip )
{
    PMIXNODE      pNode, pNode2;
    unsigned int  uiPos, uiPos2;

    pNode = pTag->CurNode;
    uiPos = pTag->CurPos;

    if ( lSkip > 0 )
    {
       pTag->fBof = FALSE;
       while ( ! pTag->fEof && lSkip > 0 )
       {
          if ( pNode->Leaf )
          {



Hmmm... Maybe some clever interprocedure optimization causes this 
warning, but I do not see any problem.


Regards,
Mindaugas
From harbour.01 at syenar.hu  Fri Sep 11 07:36:56 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 11 07:37:05 2009
Subject: [Harbour] Problems with ADORDD.
In-Reply-To: <4AAA2FCA.9010707@dbtopas.lt>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280ABDD@PINK.zycie.pzu>
	<7F1276F0-33B8-45C0-9933-60B3DC958AC7@syenar.hu>
	<4AAA2FCA.9010707@dbtopas.lt>
Message-ID: <4BA6E549-3E6D-45DB-96F0-36D1EC628536@syenar.hu>

>>> Oci is like a dream. I managed in test app to get through the OCI  
>>> into the base of pure C code, but in C I not know how to write  
>>> users application.
>>> Unfortunately, ODBC, despite many attempts I was not able to  
>>> connect to the database, and through ADO, you can easily connect.  
>>> Problems begin until later.
>> Maybe ODBC could also be fixed. I can't remember you exact
>> report ATM, but probably some debugging on your part could
>> help. I assume ODBC itself is able to connect to Oracle.
>> If this is so, it should be possible from Harbour too.
>> First probably it would be useful to test pure Harbour-less
>> ODBC to Oracle access than move on to hbodbc.
>
> 1) I guess Oracle forums should help to establish Oracle ODBC  
> connection.
>
> 2) We had some discussion about OCI in June. I've downloaded Oracle  
> Client, but server download is 1.7GB size. I do not want to install  
> such amount of code just for developing SDDOCI/SDDORA library. If  
> someone can give access to Oracle server (open firewall ports, give  
> information how to connect to server via OCI, etc.) for development/ 
> testing purposes, I can help to write RDDSQL driver for it.

I think I'll have to install Oracle 10g (with Academic License) for
other reasons anyway (probably onto a dedicated virtual machine), if
this is done, I'll try to open it for you. Of course unless someone
else jumps in with a quicker / better offer.

Brgds,
Viktor

From tomaz.zupan at orpo.si  Fri Sep 11 08:10:27 2009
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Fri Sep 11 08:10:39 2009
Subject: [Harbour] Problems with ADORDD.
In-Reply-To: <4AAA2FCA.9010707@dbtopas.lt>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280ABDD@PINK.zycie.pzu>
	<7F1276F0-33B8-45C0-9933-60B3DC958AC7@syenar.hu>
	<4AAA2FCA.9010707@dbtopas.lt>
Message-ID: <200909111410.28084.tomaz.zupan@orpo.si>

Friday 11 September 2009 13:08:58 je Mindaugas Kavaliauskas napisal:
>
> 2) We had some discussion about OCI in June. I've downloaded Oracle
> Client, but server download is 1.7GB size. I do not want to install such
> amount of code just for developing SDDOCI/SDDORA library. 

You can try ORACLE 10g Express Edition, which is much smaller. 
http://www.oracle.com/technology/products/database/xe/index.html
-- 
LP, 
Toma? Zupan
ORPO d.o.o.
http://www.orpo.si
tel: +386 4 2806400
faks:+386 4 2806410


From dbtopas at dbtopas.lt  Fri Sep 11 08:21:55 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Sep 11 08:23:14 2009
Subject: [Harbour] Problems with ADORDD.
In-Reply-To: <200909111410.28084.tomaz.zupan@orpo.si>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280ABDD@PINK.zycie.pzu>	<7F1276F0-33B8-45C0-9933-60B3DC958AC7@syenar.hu>	<4AAA2FCA.9010707@dbtopas.lt>
	<200909111410.28084.tomaz.zupan@orpo.si>
Message-ID: <4AAA40E3.4010503@dbtopas.lt>

Toma? Zupan wrote:
> You can try ORACLE 10g Express Edition, which is much smaller. 
> http://www.oracle.com/technology/products/database/xe/index.html

Minimal install file is 165MB. Perhaps, I'll wait for Viktor. :)


Regards,
Mindaugas
From abe.buch at att.net  Fri Sep 11 08:27:31 2009
From: abe.buch at att.net (AbeB)
Date: Fri Sep 11 08:27:35 2009
Subject: [Harbour] OLE in WINCE
In-Reply-To: <49219562.20090911124527@tlen.pl>
References: <18d502870908210536o8ee63eck25123b2b8fd281c9@mail.gmail.com>
	<14464984.20090821152825@tlen.pl>
	<20090821134502.GA1678@uran.home.aster.pl>
	<11010132970.20090822184639@tlen.pl>
	<20090824181300.GA14328@uran.home.aster.pl>
	<100391600.20090826072836@tlen.pl>
	<20090826092129.GA22748@uran.home.aster.pl>
	<813518256.20090826125846@tlen.pl>
	<609353e70908260431o726da9fene0c1a2ead25d4f24@mail.gmail.com>
	<49219562.20090911124527@tlen.pl>
Message-ID: <1252672051953-3625471.post@n2.nabble.com>


i observed the same results

1. the font size won't show bigger or smaller when resized, it will only
reserve more pixels for it's height.
2. it will not draw the letters in the center of the charecter cell.
3. non alpha characters don't show.

i'm afraid it's not actually using Tohama font which is mono spaced, it will
still use Curier New which is proportional.

I'm waiting eagerly for this fix.

Thanks
abe




Jaroslaw Kadziola wrote:
> 
> Hi,
> 
> 4 pictures for the same code -  clipper with pocketdos for WM
> and  harbour for winCE with this sets :
> 
>    hb_setCodePage( "PL852" )
>    hb_setTermCP( "PL852" )
> 
>    hb_gtInfo( HB_GTI_RESIZEMODE, HB_GTI_RESIZEMODE_ROWS )
>    hb_gtInfo( HB_GTI_CODEPAGE, 0 )
> 
>    hb_gtInfo( HB_GTI_FONTNAME, 'Tahoma' )
>    hb_gtInfo( HB_GTI_FONTWIDTH, 8 )
>    hb_gtInfo( HB_GTI_FONTSIZE, 12 )
>    SetBlink(.F.)
>    Set Color To 'N/W*'
>    SetMode(40,25)
> 
> 
> 
> first screen :
> 
> clip+pocketdos :
> http://picasaweb.google.pl/jarek.kadziola/HarbourVsClipperPocketDos#5380151348454158114
> harbour :       
> http://picasaweb.google.pl/jarek.kadziola/HarbourVsClipperPocketDos#5380151347686813842
> 
> and second screen :
> 
> clip+pocketdos :
> http://picasaweb.google.pl/jarek.kadziola/HarbourVsClipperPocketDos#5380151354110200034
> harbour :       
> http://picasaweb.google.pl/jarek.kadziola/HarbourVsClipperPocketDos#5380151354434082450
> 
> -- 
> Regards,
> 
> Jaroslaw Kadziola
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://n2.nabble.com/OLE-in-WINCE-tp3488851p3625471.html
Sent from the harbour-devel mailing list archive at Nabble.com.
From harbour.01 at syenar.hu  Fri Sep 11 08:39:27 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 11 08:39:36 2009
Subject: [Harbour] Harbour 2.0.0beta3 (unofficial) available now
In-Reply-To: <4AAA2A69.5010600@mweb.co.za>
References: <18d502870909061011n328e50afhbe802e356bbf2642@mail.gmail.com>	<4AAA18F7.1090404@mweb.co.za>
	<93186FE2-2957-46B6-86C0-665BCA4715E2@syenar.hu>
	<4AAA2A69.5010600@mweb.co.za>
Message-ID: <7AA97A9F-799E-4336-AC65-36EE65EF6865@syenar.hu>

>> [ maybe you missed it: can you pls send me the win_com sources
>> in .zipped form? Thanks in advance ]
>
> No, just busy with other things, please find attached.

Thank you very much.

Committed.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Fri Sep 11 08:40:05 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri Sep 11 08:40:12 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12476] trunk/harbour
Message-ID: <E1Mm5Q5-00079W-Fa@dn4whf1.ch3.sourceforge.com>

Revision: 12476
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12476&view=rev
Author:   vszakats
Date:     2009-09-11 12:39:57 +0000 (Fri, 11 Sep 2009)

Log Message:
-----------
2009-09-11 14:38 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * contrib/hbwin/Makefile
  - contrib/hbwin/win_tprt.prg
  - contrib/hbwin/win_prt.c
  + contrib/hbwin/win_tcom.prg
  + contrib/hbwin/win_com.c
    + Applied patch from Alex Strickland.
      This patch renames all former WIN_PORT*() functions and classes
      to WIN_COM*(). INCOMPATIBLE.
    ! Added missing DWORD casts to -1 values.
    * Slightly renamed Win_ComSetTimeouts() and made it static.
    ; TOFIX: I had to comment out WIN_COMINIT() function since HB_INITFUNC()
             doesn't exist in Harbour.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/Makefile

Added Paths:
-----------
    trunk/harbour/contrib/hbwin/win_com.c
    trunk/harbour/contrib/hbwin/win_tcom.prg

Removed Paths:
-------------
    trunk/harbour/contrib/hbwin/win_prt.c
    trunk/harbour/contrib/hbwin/win_tprt.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From M.Horodyski at pzuzycie.com.pl  Fri Sep 11 08:40:13 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri Sep 11 08:40:23 2009
Subject: [Harbour] Problems with ADORDD.
In-Reply-To: <4AAA2FCA.9010707@dbtopas.lt>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AC40@PINK.zycie.pzu>

 

>-----Original Message-----
>From: Mindaugas Kavaliauskas [mailto:dbtopas@dbtopas.lt] 
>Sent: Friday, September 11, 2009 1:09 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] Problems with ADORDD.
>

[...]

>2) We had some discussion about OCI in June. I've downloaded 
>Oracle Client, but server download is 1.7GB size. I do not 
>want to install such amount of code just for developing 

Oracle has let Oracle XE as free database server for commercial users
with limited (one procesor, 4Gb quota for data files etc.).
This Express database is good for test and has only 150Mb.
It is like 10g version.
I can send it for you via normal post on CD.

Regards,
Marek Horodyski
From dbtopas at dbtopas.lt  Fri Sep 11 08:49:20 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Sep 11 08:50:39 2009
Subject: [Harbour] Problems with ADORDD.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AC40@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AC40@PINK.zycie.pzu>
Message-ID: <4AAA4750.4020804@dbtopas.lt>

Hi,


> Oracle has let Oracle XE as free database server for commercial users
> with limited (one procesor, 4Gb quota for data files etc.).
> This Express database is good for test and has only 150Mb.
> It is like 10g version.
> I can send it for you via normal post on CD.

Thank, You. I can download it, but I do not want to install a big 
product just for a few days of development.


Regards,
Mindaugas
From vszakats at users.sourceforge.net  Fri Sep 11 08:59:22 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri Sep 11 08:59:27 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12477] trunk/harbour
Message-ID: <E1Mm5ik-0007iM-MY@dn4whf1.ch3.sourceforge.com>

Revision: 12477
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12477&view=rev
Author:   vszakats
Date:     2009-09-11 12:59:21 +0000 (Fri, 11 Sep 2009)

Log Message:
-----------
2009-09-11 14:58 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * contrib/hbwin/hbwin.h
  + contrib/hbwin/tests/testcom1.prg
  + contrib/hbwin/tests/testcom2.prg
  * contrib/hbwin/tests/testprt1.prg
  - contrib/hbwin/tests/testprt2.prg
  * contrib/hbwin/win_tcom.prg
  * contrib/hbwin/win_com.c
    ! Tests synced with lib.
    * Formatting.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/hbwin.h
    trunk/harbour/contrib/hbwin/win_com.c
    trunk/harbour/contrib/hbwin/win_tcom.prg

Added Paths:
-----------
    trunk/harbour/contrib/hbwin/tests/testcom1.prg
    trunk/harbour/contrib/hbwin/tests/testcom2.prg

Removed Paths:
-------------
    trunk/harbour/contrib/hbwin/tests/testprt1.prg
    trunk/harbour/contrib/hbwin/tests/testprt2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From M.Horodyski at pzuzycie.com.pl  Fri Sep 11 09:19:01 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri Sep 11 09:19:10 2009
Subject: [Harbour] Problems with ADORDD.
In-Reply-To: <7F1276F0-33B8-45C0-9933-60B3DC958AC7@syenar.hu>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AC60@PINK.zycie.pzu>

>-----Original Message-----
>From: Viktor Szak?ts [mailto:harbour.01@syenar.hu] 
>Sent: Friday, September 11, 2009 12:12 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] Problems with ADORDD.

[...]

>Maybe ODBC could also be fixed. I can't remember you exact 
>report ATM, but probably some debugging on your part could 
>help. I assume ODBC itself is able to connect to Oracle.
>If this is so, it should be possible from Harbour too.

How can I test connect to database from ODBC itself ?

Regards,
Marek Horodyski
From harbour.01 at syenar.hu  Fri Sep 11 09:22:26 2009
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 11 09:22:35 2009
Subject: [Harbour] Problems with ADORDD.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AC60@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AC60@PINK.zycie.pzu>
Message-ID: <A3C61B78-C381-4FC2-892F-B1B6AAB1014F@syenar.hu>

Try with Microsoft Query. It's part of the Office
package, as far as I recall.

Brgds,
Viktor

On 2009.09.11., at 15:19, Horodyski Marek (PZUZ) wrote:

>> -----Original Message-----
>> From: Viktor Szak?ts [mailto:harbour.01@syenar.hu]
>> Sent: Friday, September 11, 2009 12:12 PM
>> To: Harbour Project Main Developer List.
>> Subject: Re: [Harbour] Problems with ADORDD.
>
> [...]
>
>> Maybe ODBC could also be fixed. I can't remember you exact
>> report ATM, but probably some debugging on your part could
>> help. I assume ODBC itself is able to connect to Oracle.
>> If this is so, it should be possible from Harbour too.
>
> How can I test connect to database from ODBC itself ?
>
> Regards,
> Marek Horodyski
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From tomaz.zupan at orpo.si  Fri Sep 11 09:29:09 2009
From: tomaz.zupan at orpo.si (=?iso-8859-2?q?Toma=BE_Zupan?=)
Date: Fri Sep 11 09:29:23 2009
Subject: [Harbour] Problems with ADORDD.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AC60@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AC60@PINK.zycie.pzu>
Message-ID: <200909111529.09111.tomaz.zupan@orpo.si>


Friday 11 September 2009 15:19:01 je Horodyski Marek (PZUZ) napisal:
>
> How can I test connect to database from ODBC itself ?
>

Oracle driver has Test Connection button in ODBC configuration.


-- 
LP, 
Toma? Zupan
ORPO d.o.o.
http://www.orpo.si
tel: +386 4 2806400
faks:+386 4 2806410

From vszakats at users.sourceforge.net  Fri Sep 11 10:00:49 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri Sep 11 10:00:55 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12478] trunk/harbour
Message-ID: <E1Mm6gD-0002qS-V9@3kljzd1.ch3.sourceforge.com>

Revision: 12478
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12478&view=rev
Author:   vszakats
Date:     2009-09-11 14:00:49 +0000 (Fri, 11 Sep 2009)

Log Message:
-----------
2009-09-11 16:00 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * contrib/hbfbird/Makefile
  * contrib/rddsql/sddfb/Makefile
    + Added autodetection of Firebird on darwin.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbfbird/Makefile
    trunk/harbour/contrib/rddsql/sddfb/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From Istvan.Bisz at t-online.hu  Fri Sep 11 10:35:20 2009
From: Istvan.Bisz at t-online.hu (=?iso-8859-1?Q?Bisz_Istv=E1n?=)
Date: Fri Sep 11 10:35:37 2009
Subject: [Harbour] SELinux alert: libharbour-2.0.0.so which requires text
	relocation
In-Reply-To: <9257026e0909110243h1ec34430o6910cb37bab7ed37@mail.gmail.com>
References: <8789634506907346438@unknownmsgid>
	<9257026e0909110243h1ec34430o6910cb37bab7ed37@mail.gmail.com>
Message-ID: <002901ca32ed$176eb650$464c22f0$@Bisz@t-online.hu>

Hi,

The problem is solved with 'export HB_USER_CFLAGS=-fpic' magic as it is
recommended in a document from Red Hat. I verified the new harbour.so with
eu-findtextrel and the errors are gone.
Any comment of this issue is useful, as I see. Maybe the '-fpic' flag should
be the default and without, the option.

Best regards,
Istv?n


-----Original Message-----
From: Lorenzo Fiorini [mailto:lorenzo.fiorini@gmail.com] 
Sent: 2009. szeptember 11. 11:43
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] SELinux alert: libharbour-2.0.0.so which requires
text relocation

On Fri, Sep 11, 2009 at 11:11 AM, Bisz Istv?n <Istvan.Bisz@t-online.hu>
wrote:
>
> ?SELinux is preventing demoqt from loading
> /usr/local/lib/harbour/libharbour-2.0.0.so which requires text
relocation.?

It has always been in this way.

If I run eu-findtextrel I get 81094 lines of:

either the file containing the function '_init' or the file containing
the function 'HB_FUN_HB_GT_TRM' is not compiled with -fpic/-fPIC
...
either the file containing the function 'hb_macroExprNewFunCall' or
the file containing the function 'hb_macroerror' is not compiled with
-fpic/-fPIC

best regards,
Lorenzo


From harbour.01 at syenar.hu  Fri Sep 11 10:51:52 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 11 10:52:01 2009
Subject: [Harbour] SELinux alert: libharbour-2.0.0.so which requires text
	relocation
In-Reply-To: <002901ca32ed$176eb650$464c22f0$@Bisz@t-online.hu>
References: <8789634506907346438@unknownmsgid>
	<9257026e0909110243h1ec34430o6910cb37bab7ed37@mail.gmail.com>
	<002901ca32ed$176eb650$464c22f0$@Bisz@t-online.hu>
Message-ID: <ED0CDF68-3648-4252-BEDB-168C909EFF16@syenar.hu>

Hi,

> The problem is solved with 'export HB_USER_CFLAGS=-fpic' magic as it  
> is
> recommended in a document from Red Hat. I verified the new  
> harbour.so with
> eu-findtextrel and the errors are gone.
> Any comment of this issue is useful, as I see. Maybe the '-fpic'  
> flag should
> be the default and without, the option.

Recent changes in GNU Make system makes it possible to
build with -fpic for Harbour dynamic lib and build without
it for static libs/binaries in one build pass. [ of course
the build will take more time to complete as most core libs
will be compiled twice. ]

I've proposed this option already, but without consent
/ interest / and most importantly input from Linux (*nix)
users, I couldn't start on that road.

Anyhow it's still a possibility.

Brgds,
Viktor

From ice at extreme.hu  Fri Sep 11 10:54:16 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Fri Sep 11 10:54:23 2009
Subject: [Harbour] SELinux alert: libharbour-2.0.0.so which requires text
	relocation
In-Reply-To: <002901ca32ed$176eb650$464c22f0$@Bisz@t-online.hu>
References: <8789634506907346438@unknownmsgid>
	<9257026e0909110243h1ec34430o6910cb37bab7ed37@mail.gmail.com>
	<002901ca32ed$176eb650$464c22f0$@Bisz@t-online.hu>
Message-ID: <alpine.GSO.2.00.0909111649140.13711@dawn.royalcomp.hu>

On Fri, 11 Sep 2009, Bisz Istv?n wrote:

 > The problem is solved with 'export HB_USER_CFLAGS=-fpic' magic as it is
 > recommended in a document from Red Hat. I verified the new harbour.so with
 > eu-findtextrel and the errors are gone.
 > Any comment of this issue is useful, as I see. Maybe the '-fpic' flag should
 > be the default and without, the option.

we've been over this several times. due to some (in certain cases, 
mathematically signidficant) speed penalty, przemek doesn't like pic 
(just try speedtst.prg with and without, it does show).

btw ypou should really be using -fPIC, rather than -fpic. i don't 
think it actually matters on x86 or x64, but doesn't hurt to get used 
to it.

 > > ?SELinux is preventing demoqt from loading
 > > /usr/local/lib/harbour/libharbour-2.0.0.so which requires text
 > relocation.?
 > 
 > It has always been in this way.
 > 
 > If I run eu-findtextrel I get 81094 lines of:
 > 
 > either the file containing the function '_init' or the file containing
 > the function 'HB_FUN_HB_GT_TRM' is not compiled with -fpic/-fPIC
 > ...
 > either the file containing the function 'hb_macroExprNewFunCall' or
 > the file containing the function 'hb_macroerror' is not compiled with
 > -fpic/-fPIC

-- 
[-]

mkdir /nonexistent
From mbelgrano at deltain.it  Fri Sep 11 11:02:35 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep 11 11:03:03 2009
Subject: [Harbour] SQL RDD
In-Reply-To: <4AAA2C4B.3070908@dbtopas.lt>
References: <eb96f4980909051329l90b797ftaecd9842534d074a@mail.gmail.com> 
	<4AAA2C4B.3070908@dbtopas.lt>
Message-ID: <609353e70909110802h1cab8233sf1958ae1a67e0b9a@mail.gmail.com>

Is possible detect if a rdd support same capability at run time?
2009/9/11 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>

> Hi,
>
>
> Lucas De Beltr?n wrote:
>
>> In Harbour, is there a RDD for SQL, so I keep the same code (such as
>> SELECT
>> ("INFO"), SET FILTER, PACK, etc).
>>
>
> RDDSQL gives possibility to obtain SELECT query result via RDD API, but it
> does not support PACK. There is no PACK query in SQL.
>
>
> Regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090911/d6b6fb9d/attachment.html
From ice at extreme.hu  Fri Sep 11 11:04:20 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Fri Sep 11 11:04:27 2009
Subject: [Harbour] SELinux alert: libharbour-2.0.0.so which requires text
	relocation
In-Reply-To: <ED0CDF68-3648-4252-BEDB-168C909EFF16@syenar.hu>
References: <8789634506907346438@unknownmsgid>
	<9257026e0909110243h1ec34430o6910cb37bab7ed37@mail.gmail.com>
	<002901ca32ed$176eb650$464c22f0$@Bisz@t-online.hu>
	<ED0CDF68-3648-4252-BEDB-168C909EFF16@syenar.hu>
Message-ID: <alpine.GSO.2.00.0909111654450.13711@dawn.royalcomp.hu>

On Fri, 11 Sep 2009, Viktor Szak?ts wrote:

 > Recent changes in GNU Make system makes it possible to
 > build with -fpic for Harbour dynamic lib and build without
 > it for static libs/binaries in one build pass. [ of course
 > the build will take more time to complete as most core libs
 > will be compiled twice. ]
 > 
 > I've proposed this option already, but without consent
 > / interest / and most importantly input from Linux (*nix)
 > users, I couldn't start on that road.

my op is that it should just be on by default, and those who want 
should be able to switch it off (-fPIC that is).

i think that despite speedtst showing what it's showing, it's an 
incredibly synthetic test (i mean, c'mon, 98+% of the time you'll be 
waiting for either the user or disk/network/other io, not the cpu), 
and as such, it is great for checking whether you've just improved the 
vm or actually made it worse, but i don't believe it to reflect 
real-world usage at all.

-- 
[-]

mkdir /nonexistent
From Jacek.Potempa at otc.com.pl  Fri Sep 11 11:06:59 2009
From: Jacek.Potempa at otc.com.pl (Jacek Potempa)
Date: Fri Sep 11 11:07:12 2009
Subject: [Harbour] SQL RDD
In-Reply-To: <4AAA2C4B.3070908@dbtopas.lt>
References: <eb96f4980909051329l90b797ftaecd9842534d074a@mail.gmail.com>
	<4AAA2C4B.3070908@dbtopas.lt>
Message-ID: <4AAA6793.9030403@otc.com.pl>

Hi,

Try Mediator SQL RDD from
http://www.otc.pl/index.asp?s=21&l=2

We do support PACK, SET FILTER e.t.c
All locking commands & functions are also 100% Clipper/Harbour compatible.

Regards,
Jacek
> Hi,
>
>
> Lucas De Beltr?n wrote:
>> In Harbour, is there a RDD for SQL, so I keep the same code (such as 
>> SELECT
>> ("INFO"), SET FILTER, PACK, etc).
>
> RDDSQL gives possibility to obtain SELECT query result via RDD API, 
> but it does not support PACK. There is no PACK query in SQL.
>
>
> Regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>

From M.Horodyski at pzuzycie.com.pl  Fri Sep 11 11:07:09 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri Sep 11 11:07:19 2009
Subject: [Harbour] Problems with ADORDD.
In-Reply-To: <A3C61B78-C381-4FC2-892F-B1B6AAB1014F@syenar.hu>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AC85@PINK.zycie.pzu>

>-----Original Message-----
>From: Viktor Szak?ts [mailto:harbour.01@syenar.hu] 
>Sent: Friday, September 11, 2009 3:22 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] Problems with ADORDD.
>
>Try with Microsoft Query. It's part of the Office package, as 
>far as I recall.
>
>Brgds,
>Viktor

Finally something is moved.
Now found useful by a small example of connect via ODBC to Oracle and not *.MDB file.

Regards,
Marek Horodyski
From vszakats at users.sourceforge.net  Fri Sep 11 11:57:53 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri Sep 11 11:57:58 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12479] trunk/harbour
Message-ID: <E1Mm8VV-0000H6-EI@d5vjzd1.ch3.sourceforge.com>

Revision: 12479
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12479&view=rev
Author:   vszakats
Date:     2009-09-11 15:57:41 +0000 (Fri, 11 Sep 2009)

Log Message:
-----------
2009-09-11 17:56 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * include/hbdefs.h
    * Using #define instead of typedef for legacy core types.
      This is needed to allow for ugly hack to disable these.

  * contrib/hbfimage/fi_wrp.c
    ! Added terrible hack to make them build on non-win platforms.
    ; dos/djgpp and probably os2/gcc would work, but there I wasn't
      interested enough to add extra logic to handle each special
      case.
    ; non-linux/darwin *nixes should be tested.

  * contrib/hbfimage/Makefile
    + Enabled for linux and darwin.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbfimage/Makefile
    trunk/harbour/contrib/hbfimage/fi_wrp.c
    trunk/harbour/include/hbdefs.h


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From Istvan.Bisz at t-online.hu  Fri Sep 11 12:21:13 2009
From: Istvan.Bisz at t-online.hu (=?UTF-8?Q?Bisz_Istv=C3=A1n?=)
Date: Fri Sep 11 12:21:32 2009
Subject: [Harbour] SELinux alert: libharbour-2.0.0.so which requires
	text	relocation
In-Reply-To: <alpine.GSO.2.00.0909111654450.13711@dawn.royalcomp.hu>
References: <8789634506907346438@unknownmsgid>	<9257026e0909110243h1ec34430o6910cb37bab7ed37@mail.gmail.com>	<002901ca32ed$176eb650$464c22f0$@Bisz@t-online.hu>	<ED0CDF68-3648-4252-BEDB-168C909EFF16@syenar.hu>
	<alpine.GSO.2.00.0909111654450.13711@dawn.royalcomp.hu>
Message-ID: <000b01ca32fb$e1e43550$a5ac9ff0$@Bisz@t-online.hu>

Hi,

We can stated that '-fpic' or '-fPIC' is necessary for 'so'-es. The '-fpic' generates a smaller and faster code as it is stated in http://people.redhat.com/drepper/dsohowto.pdf.
If the '-fpic' doesn't work for a huge 'so' code it, will be signaled by gcc in its linking time, is not the case on my test distributions.
The build time is not so long on my linux systems, so the method proposed by Viktor is plausible [Sorry, I lost this info or I can't realize the interdependencies]. The other proposal is to use '-fpic' or '-fPIC' [-fpic my option] as default and optionally without, is maybe the easiest IMO. 

Best regards,
Istv?n


-----Original Message-----
From: Tamas TEVESZ [mailto:ice@extreme.hu] 
Sent: 2009. szeptember 11. 17:04
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] SELinux alert: libharbour-2.0.0.so which requires text relocation

On Fri, 11 Sep 2009, Viktor Szak?ts wrote:

 > Recent changes in GNU Make system makes it possible to
 > build with -fpic for Harbour dynamic lib and build without
 > it for static libs/binaries in one build pass. [ of course
 > the build will take more time to complete as most core libs
 > will be compiled twice. ]
 > 
 > I've proposed this option already, but without consent
 > / interest / and most importantly input from Linux (*nix)
 > users, I couldn't start on that road.

my op is that it should just be on by default, and those who want 
should be able to switch it off (-fPIC that is).

i think that despite speedtst showing what it's showing, it's an 
incredibly synthetic test (i mean, c'mon, 98+% of the time you'll be 
waiting for either the user or disk/network/other io, not the cpu), 
and as such, it is great for checking whether you've just improved the 
vm or actually made it worse, but i don't believe it to reflect 
real-world usage at all.

-- 
[-]

mkdir /nonexistent


From druzus at acn.waw.pl  Fri Sep 11 12:34:21 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 11 12:34:27 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12476] trunk/harbour
In-Reply-To: <E1Mm5Q5-00079W-Fa@dn4whf1.ch3.sourceforge.com>
References: <E1Mm5Q5-00079W-Fa@dn4whf1.ch3.sourceforge.com>
Message-ID: <20090911163421.GA10667@uran.home.aster.pl>

On Fri, 11 Sep 2009, vszakats@users.sourceforge.net wrote:
>     ; TOFIX: I had to comment out WIN_COMINIT() function since HB_INITFUNC()
>              doesn't exist in Harbour.

Such function has never existed in Harbour and xHarbour. In the past we
had macros HB_INITFUNC() and HB_EXITFUNC() used to set special function
names in .c files generated by Harbour compiler but it was their whole
functionality and they had never been function declarations.
So none of HB_INITFUNC() or HB_EXITFUNC() functions in .c code has ever
worked in the whole [x]Harbour history.
If you see such things in the code then it only means that author wanted
to create sth but didn't know how and created dummy code which was never
executed and it was not even possible to execute it explicitly from .prg
code. It also suggests that other parts of such code should be carefully
checked.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Sep 11 12:41:00 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 11 12:41:07 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12479] trunk/harbour
In-Reply-To: <E1Mm8VV-0000H6-EI@d5vjzd1.ch3.sourceforge.com>
References: <E1Mm8VV-0000H6-EI@d5vjzd1.ch3.sourceforge.com>
Message-ID: <20090911164100.GB10667@uran.home.aster.pl>

On Fri, 11 Sep 2009, vszakats@users.sourceforge.net wrote:
> 2009-09-11 17:56 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>   * include/hbdefs.h
>     * Using #define instead of typedef for legacy core types.
>       This is needed to allow for ugly hack to disable these.

In file included from /usr/include/sql.h:19,
                 from ../../../odbc.c:82:
/usr/include/sqltypes.h:101: error: duplicate ?unsigned?
/usr/include/sqltypes.h:101: error: multiple types in one declaration
/usr/include/sqltypes.h:101: error: declaration does not declare anything
/usr/include/sqltypes.h:251: error: duplicate ?unsigned?
/usr/include/sqltypes.h:251: error: multiple types in one declaration
/usr/include/sqltypes.h:251: error: declaration does not declare anything
/usr/include/sqltypes.h:252: error: duplicate ?signed?
/usr/include/sqltypes.h:252: error: multiple types in one declaration
/usr/include/sqltypes.h:252: error: declaration does not declare anything
/usr/include/sqltypes.h:263: error: duplicate ?unsigned?
/usr/include/sqltypes.h:263: error: multiple types in one declaration
/usr/include/sqltypes.h:263: error: declaration does not declare anything
/usr/include/sqltypes.h:266: error: duplicate ?unsigned?
/usr/include/sqltypes.h:266: error: declaration does not declare anything
/usr/include/sqltypes.h:267: error: duplicate ?unsigned?
/usr/include/sqltypes.h:267: error: duplicate ?short?
/usr/include/sqltypes.h:267: error: declaration does not declare anything

best regards,
Przemek
From druzus at acn.waw.pl  Fri Sep 11 12:45:11 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 11 12:45:17 2009
Subject: [Harbour] OLE in WINCE
In-Reply-To: <1252672051953-3625471.post@n2.nabble.com>
References: <14464984.20090821152825@tlen.pl>
	<20090821134502.GA1678@uran.home.aster.pl>
	<11010132970.20090822184639@tlen.pl>
	<20090824181300.GA14328@uran.home.aster.pl>
	<100391600.20090826072836@tlen.pl>
	<20090826092129.GA22748@uran.home.aster.pl>
	<813518256.20090826125846@tlen.pl>
	<609353e70908260431o726da9fene0c1a2ead25d4f24@mail.gmail.com>
	<49219562.20090911124527@tlen.pl>
	<1252672051953-3625471.post@n2.nabble.com>
Message-ID: <20090911164511.GA11453@uran.home.aster.pl>

On Fri, 11 Sep 2009, AbeB wrote:
> i observed the same results
> 1. the font size won't show bigger or smaller when resized, it will only
> reserve more pixels for it's height.
> 2. it will not draw the letters in the center of the charecter cell.
> 3. non alpha characters don't show.
> i'm afraid it's not actually using Tohama font which is mono spaced, it will
> still use Curier New which is proportional.
> I'm waiting eagerly for this fix.

I'm really sorry but I do not find anything to fix in current code
so you should not expect any fix as long as you do not report what
is the problem. The fact that some windows proportional fonts do
not look good and windows cannot well scaled them or they do not
have all glyphs it's not Harbour problem.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Sep 11 12:46:41 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Sep 11 12:46:47 2009
Subject: [Harbour] What are the setting to use qtsdk ( the one from
	qt.nokia.com ) under linux?
Message-ID: <9257026e0909110946k4276b1afuc84f41dd36fe4db9@mail.gmail.com>

Like in Windows I've set HB_INC_QT and HB_DIR_QT but the make still says:

...
! 'hbqt' library skipped ('qt' not found)
...

best regards,
Lorenzo
From druzus at acn.waw.pl  Fri Sep 11 12:50:13 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 11 12:50:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12479] trunk/harbour
In-Reply-To: <20090911164100.GB10667@uran.home.aster.pl>
References: <E1Mm8VV-0000H6-EI@d5vjzd1.ch3.sourceforge.com>
	<20090911164100.GB10667@uran.home.aster.pl>
Message-ID: <20090911165013.GA15990@uran.home.aster.pl>

On Fri, 11 Sep 2009, Przemyslaw Czerpak wrote:
> On Fri, 11 Sep 2009, vszakats@users.sourceforge.net wrote:
> > 2009-09-11 17:56 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
> >   * include/hbdefs.h
> >     * Using #define instead of typedef for legacy core types.
> >       This is needed to allow for ugly hack to disable these.
> 
> In file included from /usr/include/sql.h:19,
>                  from ../../../odbc.c:82:
> /usr/include/sqltypes.h:101: error: duplicate ?unsigned?
> /usr/include/sqltypes.h:101: error: multiple types in one declaration

And one thing else.
Now all cross builds seems to be broken because -I/usr/include is passed
as C compiler parameter so incompatible platform native header files
are used.

best regards,
Przemek
From info at fsgiudice.com  Fri Sep 11 13:04:00 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri Sep 11 13:04:15 2009
Subject: [Harbour] Build error
Message-ID: <4AAA8300.2000705@fsgiudice.com>

Hi Viktor,

rebuilding last SVN with msys + mingw on Vista I got errors.
Attached build log.

Best regards,
Francesco
-------------- next part --------------
A non-text attachment was scrubbed...
Name: makegnu_mingw.zip
Type: application/x-zip-compressed
Size: 5369 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090911/93b6861e/makegnu_mingw.bin
From harbour.01 at syenar.hu  Fri Sep 11 13:30:21 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 11 13:30:32 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12479] trunk/harbour
In-Reply-To: <20090911164100.GB10667@uran.home.aster.pl>
References: <E1Mm8VV-0000H6-EI@d5vjzd1.ch3.sourceforge.com>
	<20090911164100.GB10667@uran.home.aster.pl>
Message-ID: <44ECEA20-B0AD-43A1-AAA0-4F442D1D13BF@syenar.hu>

Yes, this was wrong.

Before I revert, do you have an idea for a better fix?

Brgds,
Viktor

On 2009.09.11., at 18:41, Przemyslaw Czerpak wrote:

> On Fri, 11 Sep 2009, vszakats@users.sourceforge.net wrote:
>> 2009-09-11 17:56 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>>  * include/hbdefs.h
>>    * Using #define instead of typedef for legacy core types.
>>      This is needed to allow for ugly hack to disable these.
>
> In file included from /usr/include/sql.h:19,
>                 from ../../../odbc.c:82:
> /usr/include/sqltypes.h:101: error: duplicate ?unsigned?
> /usr/include/sqltypes.h:101: error: multiple types in one declaration
> /usr/include/sqltypes.h:101: error: declaration does not declare  
> anything
> /usr/include/sqltypes.h:251: error: duplicate ?unsigned?
> /usr/include/sqltypes.h:251: error: multiple types in one declaration
> /usr/include/sqltypes.h:251: error: declaration does not declare  
> anything
> /usr/include/sqltypes.h:252: error: duplicate ?signed?
> /usr/include/sqltypes.h:252: error: multiple types in one declaration
> /usr/include/sqltypes.h:252: error: declaration does not declare  
> anything
> /usr/include/sqltypes.h:263: error: duplicate ?unsigned?
> /usr/include/sqltypes.h:263: error: multiple types in one declaration
> /usr/include/sqltypes.h:263: error: declaration does not declare  
> anything
> /usr/include/sqltypes.h:266: error: duplicate ?unsigned?
> /usr/include/sqltypes.h:266: error: declaration does not declare  
> anything
> /usr/include/sqltypes.h:267: error: duplicate ?unsigned?
> /usr/include/sqltypes.h:267: error: duplicate ?short?
> /usr/include/sqltypes.h:267: error: declaration does not declare  
> anything
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vszakats at users.sourceforge.net  Fri Sep 11 13:35:08 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri Sep 11 13:35:13 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12480] trunk/harbour
Message-ID: <E1MmA1c-0006a3-9W@74yxhf1.ch3.sourceforge.com>

Revision: 12480
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12480&view=rev
Author:   vszakats
Date:     2009-09-11 17:35:07 +0000 (Fri, 11 Sep 2009)

Log Message:
-----------
2009-09-11 19:33 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * include/hbdefs.h
  * contrib/hbfimage/fi_wrp.c
  * contrib/hbfimage/Makefile
    ! Reverted prev. It does all sort of strange things.
    ; TODO: So the only way is the proper fix: Cleaning Harbour 
            source from BOOL, BYTE, LONG, ULONG and all other 
            'legacy' types.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbfimage/Makefile
    trunk/harbour/contrib/hbfimage/fi_wrp.c
    trunk/harbour/include/hbdefs.h


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Fri Sep 11 13:38:00 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 11 13:38:09 2009
Subject: [Harbour] SELinux alert: libharbour-2.0.0.so which requires
	text	relocation
In-Reply-To: <000b01ca32fb$e1e43550$a5ac9ff0$@Bisz@t-online.hu>
References: <8789634506907346438@unknownmsgid>	<9257026e0909110243h1ec34430o6910cb37bab7ed37@mail.gmail.com>	<002901ca32ed$176eb650$464c22f0$@Bisz@t-online.hu>	<ED0CDF68-3648-4252-BEDB-168C909EFF16@syenar.hu>
	<alpine.GSO.2.00.0909111654450.13711@dawn.royalcomp.hu>
	<000b01ca32fb$e1e43550$a5ac9ff0$@Bisz@t-online.hu>
Message-ID: <75DD19F5-2AFB-4363-8664-9B1EC6E02D4D@syenar.hu>

Hi Przemek and all,

Any opinion on this?

Brgds,
Viktor

On 2009.09.11., at 18:21, Bisz Istv?n wrote:

> Hi,
>
> We can stated that '-fpic' or '-fPIC' is necessary for 'so'-es. The  
> '-fpic' generates a smaller and faster code as it is stated in http://people.redhat.com/drepper/dsohowto.pdf 
> .
> If the '-fpic' doesn't work for a huge 'so' code it, will be  
> signaled by gcc in its linking time, is not the case on my test  
> distributions.
> The build time is not so long on my linux systems, so the method  
> proposed by Viktor is plausible [Sorry, I lost this info or I can't  
> realize the interdependencies]. The other proposal is to use '-fpic'  
> or '-fPIC' [-fpic my option] as default and optionally without, is  
> maybe the easiest IMO.
>
> Best regards,
> Istv?n
>
>
> -----Original Message-----
> From: Tamas TEVESZ [mailto:ice@extreme.hu]
> Sent: 2009. szeptember 11. 17:04
> To: Harbour Project Main Developer List.
> Subject: Re: [Harbour] SELinux alert: libharbour-2.0.0.so which  
> requires text relocation
>
> On Fri, 11 Sep 2009, Viktor Szak?ts wrote:
>
>> Recent changes in GNU Make system makes it possible to
>> build with -fpic for Harbour dynamic lib and build without
>> it for static libs/binaries in one build pass. [ of course
>> the build will take more time to complete as most core libs
>> will be compiled twice. ]
>>
>> I've proposed this option already, but without consent
>> / interest / and most importantly input from Linux (*nix)
>> users, I couldn't start on that road.
>
> my op is that it should just be on by default, and those who want
> should be able to switch it off (-fPIC that is).
>
> i think that despite speedtst showing what it's showing, it's an
> incredibly synthetic test (i mean, c'mon, 98+% of the time you'll be
> waiting for either the user or disk/network/other io, not the cpu),
> and as such, it is great for checking whether you've just improved the
> vm or actually made it worse, but i don't believe it to reflect
> real-world usage at all.
>
> -- 
> [-]
>
> mkdir /nonexistent
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Fri Sep 11 14:22:19 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 11 14:22:26 2009
Subject: [Harbour] SELinux alert: libharbour-2.0.0.so which requires
	text relocation
In-Reply-To: <75DD19F5-2AFB-4363-8664-9B1EC6E02D4D@syenar.hu>
References: <8789634506907346438@unknownmsgid>
	<9257026e0909110243h1ec34430o6910cb37bab7ed37@mail.gmail.com>
	<ED0CDF68-3648-4252-BEDB-168C909EFF16@syenar.hu>
	<alpine.GSO.2.00.0909111654450.13711@dawn.royalcomp.hu>
	<75DD19F5-2AFB-4363-8664-9B1EC6E02D4D@syenar.hu>
Message-ID: <20090911182219.GA12678@uran.home.aster.pl>

On Fri, 11 Sep 2009, Szak?ts Viktor wrote:
> Hi Przemek and all,
> Any opinion on this?
>> We can stated that '-fpic' or '-fPIC' is necessary for 'so'-es. The 
>> '-fpic' generates a smaller and faster code as it is stated in 
>> http://people.redhat.com/drepper/dsohowto.pdf.
>> If the '-fpic' doesn't work for a huge 'so' code it, will be signaled by 
>> gcc in its linking time, is not the case on my test distributions.
>> The build time is not so long on my linux systems, so the method proposed 
>> by Viktor is plausible [Sorry, I lost this info or I can't realize the 
>> interdependencies]. The other proposal is to use '-fpic' or '-fPIC' [-fpic 
>> my option] as default and optionally without, is maybe the easiest IMO.

In practice in all builds we need separate compilation for shared library.
On some platforms/CPUs modules compiled without switches to force position
independent code can work in some limited way but sooner or later they
creates troubles so we should always use switches to force PIC for modules
used to create shared library.
The difference between -fPIC and -fpic is platform/CPU dependent.
Usually -fpic introduce smaller overhead then -fPIC with the cost of
some limitations, like smaller symbol table or maximum code side
though there are platforms where there is not difference between
them or where both are ignored because generated code is always
position independent. Limits introduced by -fpic should be verified
at link time but on some platforms they may depends also on other
libraries so it's safer for general distributions to use -fPIC.
But such decision should be taken by developers working with
given platform/CPUs. We can use for some architectures -fPIC and
on some others -fpic as default settings. We can also start with
-fpic and then switch to -fPIC when user reports problems just like
now we are increasing page side in some library tools.

best regards,
Przemek
From druzus at users.sourceforge.net  Fri Sep 11 14:38:12 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Fri Sep 11 14:38:17 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12481] trunk/harbour
Message-ID: <E1MmB0e-0007sn-7T@74yxhf1.ch3.sourceforge.com>

Revision: 12481
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12481&view=rev
Author:   druzus
Date:     2009-09-11 18:38:10 +0000 (Fri, 11 Sep 2009)

Log Message:
-----------
2009-09-11 20:37 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapi.h
    + added hb_xgrabz() and hb_xmemdup() macros

  * harbour/include/hbapicdp.h
  * harbour/source/rtl/cdpapi.c
    + added new functions which can be used in translations changing the
      size of trnaslated strings:
         hb_cdpDup(), hb_cdpnDup(), hb_cdpnDup2(), hb_cdpnDup3(),
         hb_cdpnDupLen(), hb_cdpnDup2Len()
      Now hb_cdp[n]Translate() functions are depreciated.
    + added pseduto codepage "UTF8" which can be used in trnaslations only
    + added new function hb_cdpFindExt() which allows to chose pseudo CPs

  * harbour/include/hbapi.h
  * harbour/include/hbset.h
  * harbour/source/vm/set.c
  * harbour/source/nortl/nortl.c
    - removed old functions: hb_osEncode() and hb_osDecode() with low level
      code which was using static char to char translation table
    + add new functions hb_osEncodeCP() and hb_osDecodeCP() which can make
      translations changing the size of translated strings.
      Warning all parameters have to be initialized.
      Passing NULL in second parameter means that the 1-st is dynamically
      allocated and can be used as buffer and reallocated if necessary.
      if 2-nd parameter is not NULL then the 1-st one is used as const value.
      The size of allocated buffer can be passed by reference in 3-rd
      parameter and this value is updated on reallocation.
      If buffer is two small then new bigger one is allocated and old one
      freed.

  * harbour/source/vm/set.c
    + added support for UTF8 translations in _SET_OSCODEPAGE

  * harbour/source/vm/cmdarg.c
  * harbour/source/common/hbffind.c
  * harbour/source/rtl/filesys.c
  * harbour/source/rtl/philes.c
  * harbour/source/rtl/gete.c
  * harbour/source/rtl/net.c
  * harbour/source/rtl/hbproces.c
  * harbour/source/rtl/hbrunfun.c
  * harbour/source/rtl/run.c
  * harbour/contrib/hbwin/win_misc.c
  * harbour/contrib/hbwin/wapi_shellapi.c
  * harbour/contrib/hbwin/wapi_winbase.c
    * use new hb_osEncodeCP()/hb_osDecodeCP() functions

  * harbour/source/rtl/hbi18n1.c
  * harbour/source/rtl/gtxwc/gtxwc.c
  * harbour/source/rtl/gtpca/gtpca.c
    * replaced depreciated hb_cdp[n]Translate() functions with new
      hb_cdp[n]Dup*()

  * harbour/source/rtl/gtstd/gtstd.c
  * harbour/source/rtl/gtcgi/gtcgi.c
  * harbour/source/rtl/hbgtcore.c
    * replaced depreciated hb_cdp[n]Translate() functions with new
      hb_cdp[n]Dup*()
    + added support for UTF8 translations set by hb_setDispCP() and
      hb_setTermCP() functions

  * harbour/source/rdd/delim1.c
  * harbour/source/rdd/sdf1.c
  * harbour/source/rdd/dbf1.c
  * harbour/source/rdd/dbffpt/dbffpt1.c
  * harbour/source/rdd/dbfnsx/dbfnsx1.c
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
  * harbour/source/rdd/dbfntx/dbfntx1.c
    * replaced depreciated hb_cdp[n]Translate() functions with new
      hb_cdp[n]Dup*()
    + added support for CP translations which can change the size of
      translated strings
    ! disabled memo field translations for fields marked as binary
    + added support for UTF8 translations.
      Using UTF8 as CP disables any national sorting in indexes.
      Warning: please remember that normal character fields in tables have
               fixed size and translation to UTF8 may increase the string
               and cut results.

  * harbour/source/rdd/dbf1.c
    ! fixed GPF in dbCreate() with empty struct table

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/wapi_shellapi.c
    trunk/harbour/contrib/hbwin/wapi_winbase.c
    trunk/harbour/contrib/hbwin/win_misc.c
    trunk/harbour/include/hbapi.h
    trunk/harbour/include/hbapicdp.h
    trunk/harbour/include/hbset.h
    trunk/harbour/source/common/hbffind.c
    trunk/harbour/source/nortl/nortl.c
    trunk/harbour/source/rdd/dbf1.c
    trunk/harbour/source/rdd/dbfcdx/dbfcdx1.c
    trunk/harbour/source/rdd/dbffpt/dbffpt1.c
    trunk/harbour/source/rdd/dbfnsx/dbfnsx1.c
    trunk/harbour/source/rdd/dbfntx/dbfntx1.c
    trunk/harbour/source/rdd/delim1.c
    trunk/harbour/source/rdd/sdf1.c
    trunk/harbour/source/rtl/cdpapi.c
    trunk/harbour/source/rtl/filesys.c
    trunk/harbour/source/rtl/gete.c
    trunk/harbour/source/rtl/gtcgi/gtcgi.c
    trunk/harbour/source/rtl/gtpca/gtpca.c
    trunk/harbour/source/rtl/gtstd/gtstd.c
    trunk/harbour/source/rtl/gtxwc/gtxwc.c
    trunk/harbour/source/rtl/hbgtcore.c
    trunk/harbour/source/rtl/hbi18n1.c
    trunk/harbour/source/rtl/hbproces.c
    trunk/harbour/source/rtl/hbrunfun.c
    trunk/harbour/source/rtl/net.c
    trunk/harbour/source/rtl/philes.c
    trunk/harbour/source/rtl/run.c
    trunk/harbour/source/vm/cmdarg.c
    trunk/harbour/source/vm/set.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Fri Sep 11 15:26:04 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 11 15:26:13 2009
Subject: [Harbour] SELinux alert: libharbour-2.0.0.so which requires text
	relocation
In-Reply-To: <20090911182219.GA12678@uran.home.aster.pl>
References: <8789634506907346438@unknownmsgid>
	<9257026e0909110243h1ec34430o6910cb37bab7ed37@mail.gmail.com>
	<ED0CDF68-3648-4252-BEDB-168C909EFF16@syenar.hu>
	<alpine.GSO.2.00.0909111654450.13711@dawn.royalcomp.hu>
	<75DD19F5-2AFB-4363-8664-9B1EC6E02D4D@syenar.hu>
	<20090911182219.GA12678@uran.home.aster.pl>
Message-ID: <5E5E2E7F-DAB7-4EAF-BFB9-2604D6D4CE33@syenar.hu>

Hi Przemek,

Okay, I tried to enable -fpic it for linux/gcc .so files.

It's enough to add 'HB_DYN_COPT := -fpic' line to config/linux/gcc.mk

Now the problem is again with hbpp_dyn.o. I'd like to
avoid adding -DHB_DYNLIB also for linux/gcc (in addition
to -fpic), besides being unelegant I'm not sure what
side-effects it may have on non-win. Any idea how to solve
this problem the best way?

Can't we somehow cleanup that hbpp build rule in some
ways?

Brgds,
Viktor

On 2009.09.11., at 20:22, Przemyslaw Czerpak wrote:

> On Fri, 11 Sep 2009, Szak?ts Viktor wrote:
>> Hi Przemek and all,
>> Any opinion on this?
>>> We can stated that '-fpic' or '-fPIC' is necessary for 'so'-es. The
>>> '-fpic' generates a smaller and faster code as it is stated in
>>> http://people.redhat.com/drepper/dsohowto.pdf.
>>> If the '-fpic' doesn't work for a huge 'so' code it, will be  
>>> signaled by
>>> gcc in its linking time, is not the case on my test distributions.
>>> The build time is not so long on my linux systems, so the method  
>>> proposed
>>> by Viktor is plausible [Sorry, I lost this info or I can't realize  
>>> the
>>> interdependencies]. The other proposal is to use '-fpic' or '- 
>>> fPIC' [-fpic
>>> my option] as default and optionally without, is maybe the easiest  
>>> IMO.
>
> In practice in all builds we need separate compilation for shared  
> library.
> On some platforms/CPUs modules compiled without switches to force  
> position
> independent code can work in some limited way but sooner or later they
> creates troubles so we should always use switches to force PIC for  
> modules
> used to create shared library.
> The difference between -fPIC and -fpic is platform/CPU dependent.
> Usually -fpic introduce smaller overhead then -fPIC with the cost of
> some limitations, like smaller symbol table or maximum code side
> though there are platforms where there is not difference between
> them or where both are ignored because generated code is always
> position independent. Limits introduced by -fpic should be verified
> at link time but on some platforms they may depends also on other
> libraries so it's safer for general distributions to use -fPIC.
> But such decision should be taken by developers working with
> given platform/CPUs. We can use for some architectures -fPIC and
> on some others -fpic as default settings. We can also start with
> -fpic and then switch to -fPIC when user reports problems just like
> now we are increasing page side in some library tools.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From info at fsgiudice.com  Fri Sep 11 15:39:25 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri Sep 11 15:39:36 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12480] trunk/harbour
In-Reply-To: <E1MmA1c-0006a3-9W@74yxhf1.ch3.sourceforge.com>
References: <E1MmA1c-0006a3-9W@74yxhf1.ch3.sourceforge.com>
Message-ID: <4AAAA76D.5040204@fsgiudice.com>

Hi Viktor,
thank you. After this changelog SVN builds again.

Tell me what I have to change (how translate current typedef) and I will do.
Best regards,
Francesco

Il 11/09/2009 19.35, vszakats@users.sourceforge.net ha scritto:
> Revision: 12480
>           http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12480&view=rev
> Author:   vszakats
> Date:     2009-09-11 17:35:07 +0000 (Fri, 11 Sep 2009)
> 
> Log Message:
> -----------
> 2009-09-11 19:33 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>   * include/hbdefs.h
>   * contrib/hbfimage/fi_wrp.c
>   * contrib/hbfimage/Makefile
>     ! Reverted prev. It does all sort of strange things.
>     ; TODO: So the only way is the proper fix: Cleaning Harbour 
>             source from BOOL, BYTE, LONG, ULONG and all other 
>             'legacy' types.
> 
> Modified Paths:
> --------------
>     trunk/harbour/ChangeLog
>     trunk/harbour/contrib/hbfimage/Makefile
>     trunk/harbour/contrib/hbfimage/fi_wrp.c
>     trunk/harbour/include/hbdefs.h
> 
> 
> This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Fri Sep 11 15:49:03 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 11 15:49:12 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12480] trunk/harbour
In-Reply-To: <4AAAA76D.5040204@fsgiudice.com>
References: <E1MmA1c-0006a3-9W@74yxhf1.ch3.sourceforge.com>
	<4AAAA76D.5040204@fsgiudice.com>
Message-ID: <EDF26B0A-6F54-4916-89EE-CFD1FC47C132@syenar.hu>

Hi Francesco,

> Hi Viktor,
> thank you. After this changelog SVN builds again.

> Tell me what I have to change (how translate current typedef) and I  
> will do.

Whole Harbour needs to be changed. There is a type collision
between freeimage headers and Harbour's legacy types :(

Maybe it's possible to fix it locally, you may give it a go.

Brgds,
Viktor

> Best regards,
> Francesco
>
> Il 11/09/2009 19.35, vszakats@users.sourceforge.net ha scritto:
>> Revision: 12480
>>          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12480&view=rev
>> Author:   vszakats
>> Date:     2009-09-11 17:35:07 +0000 (Fri, 11 Sep 2009)
>> Log Message:
>> -----------
>> 2009-09-11 19:33 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>>  * include/hbdefs.h
>>  * contrib/hbfimage/fi_wrp.c
>>  * contrib/hbfimage/Makefile
>>    ! Reverted prev. It does all sort of strange things.
>>    ; TODO: So the only way is the proper fix: Cleaning  
>> Harbour             source from BOOL, BYTE, LONG, ULONG and all  
>> other             'legacy' types.
>> Modified Paths:
>> --------------
>>    trunk/harbour/ChangeLog
>>    trunk/harbour/contrib/hbfimage/Makefile
>>    trunk/harbour/contrib/hbfimage/fi_wrp.c
>>    trunk/harbour/include/hbdefs.h
>> This was sent by the SourceForge.net collaborative development  
>> platform, the world's largest Open Source development site.
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From info at fsgiudice.com  Fri Sep 11 16:07:20 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri Sep 11 16:07:31 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12480] trunk/harbour
In-Reply-To: <EDF26B0A-6F54-4916-89EE-CFD1FC47C132@syenar.hu>
References: <E1MmA1c-0006a3-9W@74yxhf1.ch3.sourceforge.com>	<4AAAA76D.5040204@fsgiudice.com>
	<EDF26B0A-6F54-4916-89EE-CFD1FC47C132@syenar.hu>
Message-ID: <4AAAADF8.3000206@fsgiudice.com>

Hi Viktor,

Il 11/09/2009 21.49, Viktor Szak?ts ha scritto:
> Hi Francesco,
> 
> Whole Harbour needs to be changed. There is a type collision
> between freeimage headers and Harbour's legacy types :(
> 
> Maybe it's possible to fix it locally, you may give it a go.
> 
what error do you have with freeimage ?

Best Regards,
Francesco
From elart at elart.it  Fri Sep 11 18:16:35 2009
From: elart at elart.it (elart)
Date: Fri Sep 11 18:16:59 2009
Subject: [Harbour] Harbour svn rev.
Message-ID: <4AAACC43.8070905@elart.it>

After 12466 svn update on Ubuntu 9.04 32 bits and Ubuntu 9.10 32 bits i 
get this compile error on a clean compile of sources:

Harbour compile fine

but when i try to compile Harbour for Win

cd $HOME/src/harbour
export PATH=/tmp/hbwin/bin:$PATH
make HB_PLATFORM=win

i get ( i have attached completw compile logs of Ubuntu 9.04 and Ubuntu 
9.10 ) :

/usr/bin/i586-mingw32msvc-gcc -shared -L../../../../../lib/win/mingw  -o 
../../../../../bin/win/mingw/harbour-20.dll __dyn__.tmp -lhbpcre 
-lhbzlib -lkernel32 -luser32 -lws2_32 -ladvapi32 -lgdi32 
-Wl,--out-implib,../../../../../lib/win/mingw/libharbour-20.a,--output-def,../../../../../bin/win/mingw/harbour-20.def
Creating library file: ../../../../../lib/win/mingw/libharbour-20.a
../../../../../source/common/obj/win/mingw/hbffind.o:hbffind.c:(.text+0x474): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0xc8): undefined 
reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0x2f7): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0x10f1): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0xaa): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0xc6): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0x18c): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0x2cb): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/hbproces.o:hbproces.c:(.text+0x180): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/hbproces.o:hbproces.c:(.text+0x5bd): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/hbrunfun.o:hbrunfun.c:(.text+0x58): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/net.o:net.c:(.text+0xc1): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/net.o:net.c:(.text+0x121): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/philes.o:philes.c:(.text+0x5fd): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/run.o:run.c:(.text+0x3f): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/vm/obj/win/mingw/cmdarg.o:cmdarg.c:(.text+0x3b9): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/vm/obj/win/mingw/cmdarg.o:cmdarg.c:(.text+0x796): 
undefined reference to `_hb_osDecodeCP'
collect2: ld returned 1 exit status
make[3]: *** [harbour-20.dll] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [dynlib.inst] Error 2
make: *** [source.inst] Error 2
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ubuntu-compile-logs.tar.gz
Type: application/x-gzip
Size: 9205 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090912/0f82bbb7/ubuntu-compile-logs.tar.gz
From vszakats at users.sourceforge.net  Fri Sep 11 19:17:07 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri Sep 11 19:17:12 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12482] trunk/harbour
Message-ID: <E1MmFMZ-00057w-GV@74yxhf1.ch3.sourceforge.com>

Revision: 12482
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12482&view=rev
Author:   vszakats
Date:     2009-09-11 23:17:06 +0000 (Fri, 11 Sep 2009)

Log Message:
-----------
2009-09-12 01:15 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/linux/gcc.mk
    + Enabled separate -fpic (with lowercase as a start) compilation
      phase for Harbour dynlib.
    % Deleted -fPIC from dynlib link command-line. Please advise if
      this is necessary and what are the rules here. On linux/ubuntu
      it made no difference whatsoever.
    ; Please test.
    ; TODO: hbmk2 will have to updated once we've settled with fpic
            setup in GNU Make.

  * config/darwin/icc.mk
    - Deleted commented fpic option. On darwin this is not needed,
      but some further research will be needed what *is* needed
      on this platform. (check -fno-common).

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/darwin/icc.mk
    trunk/harbour/config/linux/gcc.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From M.Horodyski at pzuzycie.com.pl  Fri Sep 11 10:37:09 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri Sep 11 20:59:28 2009
Subject: [Harbour] Problems with ADORDD.
In-Reply-To: <200909111529.09111.tomaz.zupan@orpo.si>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AC7E@PINK.zycie.pzu>

>-----Original Message-----
>From: Toma? Zupan [mailto:tomaz.zupan@orpo.si] 
>Sent: Friday, September 11, 2009 3:29 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] Problems with ADORDD.
>
[...]
>
>Oracle driver has Test Connection button in ODBC configuration.
>
>
>--
>LP,
>Toma? Zupan


See on my odbc MS Tools.
Where ? :(

Regards,
Marek Horodyski
-------------- next part --------------
A non-text attachment was scrubbed...
Name: odbc.zip
Type: application/x-zip-compressed
Size: 48445 bytes
Desc: odbc.zip
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090911/5d1b2dab/odbc-0001.bin
From rodrigo at flaro.net  Fri Sep 11 02:11:02 2009
From: rodrigo at flaro.net (Rodrigo Machado)
Date: Fri Sep 11 20:59:32 2009
Subject: [Harbour] =?iso-8859-1?q?Contrib_TPostgres_=28Contribuci=F3n=29?=
Message-ID: <b0552e6d0909102311p656ac2cud73f12f9df305e07@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: TPostgres.prg
Type: application/octet-stream
Size: 37765 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090911/4274e46e/TPostgres-0001.obj
From tomaz.zupan at orpo.si  Sat Sep 12 02:45:41 2009
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Sat Sep 12 02:45:48 2009
Subject: [Harbour] Problems with ADORDD.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AC7E@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AC7E@PINK.zycie.pzu>
Message-ID: <200909120845.41469.tomaz.zupan@orpo.si>

On Friday 11 September 2009 16:37:09 Horodyski Marek (PZUZ) wrote:
> >Oracle driver has Test Connection button in ODBC configuration.
> >
> See on my odbc MS Tools.

You are using Microsoft ODBC driver for ORACLE. I am using ORACLE ODBC driver 
that is included in ORACLE XE Client. Install that or ORACLE instant client 
and ORACLE ODBC driver and you will get that Test Connection button.

LP, Toma?
From harbour.01 at syenar.hu  Sat Sep 12 03:43:11 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Sep 12 03:43:20 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12480] trunk/harbour
In-Reply-To: <4AAAADF8.3000206@fsgiudice.com>
References: <E1MmA1c-0006a3-9W@74yxhf1.ch3.sourceforge.com>	<4AAAA76D.5040204@fsgiudice.com>
	<EDF26B0A-6F54-4916-89EE-CFD1FC47C132@syenar.hu>
	<4AAAADF8.3000206@fsgiudice.com>
Message-ID: <49791E08-BBB2-4811-A0EC-065712429997@syenar.hu>

Hi,

> Il 11/09/2009 21.49, Viktor Szak?ts ha scritto:
>> Hi Francesco,
>> Whole Harbour needs to be changed. There is a type collision
>> between freeimage headers and Harbour's legacy types :(
>> Maybe it's possible to fix it locally, you may give it a go.
> what error do you have with freeimage ?

This is the error:

---
gcc  -I. -I../../../../../include  -Wall -W -O3  -I/usr/include  - 
ofi_winfu.o -c ../../../fi_winfu.c
gcc  -I. -I../../../../../include  -Wall -W -O3  -I/usr/include  - 
ofi_wrp.o -c ../../../fi_wrp.c
In file included from ../../../fi_wrp.c:68:
/usr/include/FreeImage.h:157: error: conflicting types for ?LONG?
../../../../../include/hbdefs.h:217: error: previous declaration of  
?LONG? was here
make[1]: *** [fi_wrp.o] Error 1
---

Brgds,
Viktor

From Istvan.Bisz at t-online.hu  Sat Sep 12 04:20:56 2009
From: Istvan.Bisz at t-online.hu (=?UTF-8?Q?Bisz_Istv=C3=A1n?=)
Date: Sat Sep 12 04:21:25 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12482] trunk/harbour
In-Reply-To: <E1MmFMZ-00057w-GV@74yxhf1.ch3.sourceforge.com>
References: <E1MmFMZ-00057w-GV@74yxhf1.ch3.sourceforge.com>
Message-ID: <001101ca3381$f3b7d7b0$db278710$@Bisz@t-online.hu>

Hi Viktor,

The tests executed on 'CentOS 5.3' and 'Fedora 11' with 'eu-findtextrel' are positive on 'libharbour.so' 'libharbourmt.so'.
I also tested the 'demoqt' and 'demoxbp' on these platforms, the 'SELinux' accepts smoothly the 'libharbour.so' loading.

Best regards,
Istv?n

-----Original Message-----
From: vszakats@users.sourceforge.net [mailto:vszakats@users.sourceforge.net] 
Sent: 2009. szeptember 12. 1:17
To: harbour@harbour-project.org
Subject: [Harbour] SF.net SVN: harbour-project:[12482] trunk/harbour

Revision: 12482
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12482&view=rev
Author:   vszakats
Date:     2009-09-11 23:17:06 +0000 (Fri, 11 Sep 2009)

Log Message:
-----------
2009-09-12 01:15 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/linux/gcc.mk
    + Enabled separate -fpic (with lowercase as a start) compilation
      phase for Harbour dynlib.
    % Deleted -fPIC from dynlib link command-line. Please advise if
      this is necessary and what are the rules here. On linux/ubuntu
      it made no difference whatsoever.
    ; Please test.
    ; TODO: hbmk2 will have to updated once we've settled with fpic
            setup in GNU Make.

  * config/darwin/icc.mk
    - Deleted commented fpic option. On darwin this is not needed,
      but some further research will be needed what *is* needed
      on this platform. (check -fno-common).

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/darwin/icc.mk
    trunk/harbour/config/linux/gcc.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.


From harbour.01 at syenar.hu  Sat Sep 12 04:50:25 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Sep 12 04:50:37 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12482] trunk/harbour
In-Reply-To: <001101ca3381$f3b7d7b0$db278710$@Bisz@t-online.hu>
References: <E1MmFMZ-00057w-GV@74yxhf1.ch3.sourceforge.com>
	<001101ca3381$f3b7d7b0$db278710$@Bisz@t-online.hu>
Message-ID: <43768A01-59D9-4C05-A326-9A9CA7DEDFDF@syenar.hu>

Hi Istvan,

> The tests executed on 'CentOS 5.3' and 'Fedora 11' with 'eu- 
> findtextrel' are positive on 'libharbour.so' 'libharbourmt.so'.
> I also tested the 'demoqt' and 'demoxbp' on these platforms, the  
> 'SELinux' accepts smoothly the 'libharbour.so' loading.

Thank you for the feedback. I'll apply this change to
rest of linux compilers. (except watcom, where I couldn't
find any information on how to implement it)

Brgds,
Viktor

From info at fsgiudice.com  Sat Sep 12 04:57:05 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Sep 12 04:57:23 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12480] trunk/harbour
In-Reply-To: <49791E08-BBB2-4811-A0EC-065712429997@syenar.hu>
References: <E1MmA1c-0006a3-9W@74yxhf1.ch3.sourceforge.com>	<4AAAA76D.5040204@fsgiudice.com>	<EDF26B0A-6F54-4916-89EE-CFD1FC47C132@syenar.hu>	<4AAAADF8.3000206@fsgiudice.com>
	<49791E08-BBB2-4811-A0EC-065712429997@syenar.hu>
Message-ID: <4AAB6261.7010509@fsgiudice.com>

Hi Viktor,

Il 12/09/2009 9.43, Viktor Szak?ts ha scritto:
> Hi,
> 
> This is the error:
> 
> ---
> gcc  -I. -I../../../../../include  -Wall -W -O3  -I/usr/include  
> -ofi_winfu.o -c ../../../fi_winfu.c
> gcc  -I. -I../../../../../include  -Wall -W -O3  -I/usr/include  
> -ofi_wrp.o -c ../../../fi_wrp.c
> In file included from ../../../fi_wrp.c:68:
> /usr/include/FreeImage.h:157: error: conflicting types for ?LONG?
> ../../../../../include/hbdefs.h:217: error: previous declaration of 
> ?LONG? was here
> make[1]: *** [fi_wrp.o] Error 1
> ---
> 
What platform ? I will try to replicate it and I'm checking if there is 
a possible solution (within my C limits).

Best Regards,
Francesco
From vszakats at users.sourceforge.net  Sat Sep 12 05:01:28 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 12 05:01:34 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12483] trunk/harbour
Message-ID: <E1MmOU4-0007MK-Qp@c3vjzd1.ch3.sourceforge.com>

Revision: 12483
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12483&view=rev
Author:   vszakats
Date:     2009-09-12 09:01:27 +0000 (Sat, 12 Sep 2009)

Log Message:
-----------
2009-09-12 11:00 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * INSTALL
    + Minor tuning here and there.

  * external/libhpdf/Makefile
    + Enabled libpng detection on darwin.

  * config/linux/icc.mk
  * config/linux/sunpro.mk
    + Implemented PIC compilation phase.

  * config/linux/global.mk
    * Deleted hacks dealing with PIC. Notice that now
      we use -fpic on gcc/icc, while it was previously
      set to -fPIC. The old hacks enabled PIC only for
      Intel x86/x86_64 ABIs, which is now removed. Pls
      speak up if we need to readd them on compiler
      level. This way it'd be possible to optimize out second
      compilation pass for ABIs which don't need special
      PIC code generation. To make this useful in a generic
      way, IMO we should fix ABI (CPU) HB_HOST_CPU/HB_CPU
      detection in global.mk for *nix systems, and do
      compiler level decisions based on HB_CPU value.

  * config/linux/gcc.mk
    * Minor option reordering.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/config/linux/gcc.mk
    trunk/harbour/config/linux/global.mk
    trunk/harbour/config/linux/icc.mk
    trunk/harbour/config/linux/sunpro.mk
    trunk/harbour/external/libhpdf/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Sat Sep 12 05:02:38 2009
From: harbour.01 at syenar.hu (=?windows-1252?Q?Viktor_Szak=E1ts?=)
Date: Sat Sep 12 05:02:47 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12480] trunk/harbour
In-Reply-To: <4AAB6261.7010509@fsgiudice.com>
References: <E1MmA1c-0006a3-9W@74yxhf1.ch3.sourceforge.com>	<4AAAA76D.5040204@fsgiudice.com>	<EDF26B0A-6F54-4916-89EE-CFD1FC47C132@syenar.hu>	<4AAAADF8.3000206@fsgiudice.com>
	<49791E08-BBB2-4811-A0EC-065712429997@syenar.hu>
	<4AAB6261.7010509@fsgiudice.com>
Message-ID: <F4DA3D8F-CAAE-405B-AC58-C8DA34D6ECFE@syenar.hu>

> Il 12/09/2009 9.43, Viktor Szak?ts ha scritto:
>> Hi,
>> This is the error:
>> ---
>> gcc  -I. -I../../../../../include  -Wall -W -O3  -I/usr/include  - 
>> ofi_winfu.o -c ../../../fi_winfu.c
>> gcc  -I. -I../../../../../include  -Wall -W -O3  -I/usr/include  - 
>> ofi_wrp.o -c ../../../fi_wrp.c
>> In file included from ../../../fi_wrp.c:68:
>> /usr/include/FreeImage.h:157: error: conflicting types for ?LONG?
>> ../../../../../include/hbdefs.h:217: error: previous declaration of  
>> ?LONG? was here
>> make[1]: *** [fi_wrp.o] Error 1
>> ---
> What platform ? I will try to replicate it and I'm checking if there  
> is a possible solution (within my C limits).

This was tested on Linux (Ubuntu).

Here's the darwin output:
---
gcc  -I. -I../../../../../include -fno-common -Wall -W -O3  -I/opt/ 
local/include  -o fi_wrp.o -c ../../../fi_wrp.c
In file included from ../../../fi_wrp.c:68:
/opt/local/include/FreeImage.h:153: error: redefinition of typedef  
?BOOL?
../../../../../include/hbdefs.h:192: error: previous declaration of  
?BOOL? was here
/opt/local/include/FreeImage.h:154: error: redefinition of typedef  
?BYTE?
../../../../../include/hbdefs.h:206: error: previous declaration of  
?BYTE? was here
/opt/local/include/FreeImage.h:157: error: conflicting types for ?LONG?
../../../../../include/hbdefs.h:217: error: previous declaration of  
?LONG? was here
make[3]: *** [fi_wrp.o] Error 1
---

Brgds,
Viktor

From vszakats at users.sourceforge.net  Sat Sep 12 05:18:35 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 12 05:18:41 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12484] trunk/harbour
Message-ID: <E1MmOkd-0007ig-62@c3vjzd1.ch3.sourceforge.com>

Revision: 12484
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12484&view=rev
Author:   vszakats
Date:     2009-09-12 09:18:34 +0000 (Sat, 12 Sep 2009)

Log Message:
-----------
2009-09-12 11:16 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/global.mk
    + Added logic for host CPU detection on *nix systems.
      Please extend 'check_host_cpu' with more real-world values.
    + HB_CPU made equal to HB_HOST_CPU for *nix systems.
      This should be fine-tuned on the compiler level depending
      on default compiler behaviour and ABI modifier options.
      (if we do this further tweaks in global.mk will be needed)

  * INSTALL
    ! Deleted wrong (and duplicate) HB_INC_* value.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/config/global.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat Sep 12 05:30:01 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 12 05:30:06 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12485] trunk/harbour
Message-ID: <E1MmOvh-0007xx-Ib@c3vjzd1.ch3.sourceforge.com>

Revision: 12485
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12485&view=rev
Author:   vszakats
Date:     2009-09-12 09:30:00 +0000 (Sat, 12 Sep 2009)

Log Message:
-----------
2009-09-12 11:29 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/global.mk
    + Added several CPUs to CPU autodetection.
    ; Please test it on actual systems.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/global.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat Sep 12 05:49:18 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 12 05:49:23 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12486] trunk/harbour
Message-ID: <E1MmPEM-0008Lv-Fw@c3vjzd1.ch3.sourceforge.com>

Revision: 12486
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12486&view=rev
Author:   vszakats
Date:     2009-09-12 09:49:14 +0000 (Sat, 12 Sep 2009)

Log Message:
-----------
2009-09-12 11:48 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/global.mk
    + Added ppc detection on PPC macs.
    ! Fixed 64bit CPUs detection.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/global.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From Istvan.Bisz at t-online.hu  Sat Sep 12 08:42:00 2009
From: Istvan.Bisz at t-online.hu (=?iso-8859-1?Q?Bisz_Istv=E1n?=)
Date: Sat Sep 12 08:42:56 2009
Subject: [Harbour] What are the setting to use qtsdk ( the one
	from	qt.nokia.com ) under linux?
In-Reply-To: <9257026e0909110946k4276b1afuc84f41dd36fe4db9@mail.gmail.com>
References: <9257026e0909110946k4276b1afuc84f41dd36fe4db9@mail.gmail.com>
Message-ID: <001201ca33a6$6c8d7cc0$45a87640$@Bisz@t-online.hu>

Hi Lorenzo,

If the qtsdk is installed with default parameters:

export HB_INC_QT=/opt/qtsdk-2009.03/qt/include

after './config' './gmake' './gmake install' the recompiled 'qtsdk' is
installed in /usr/local/Trolltech/Qt-4.5.2/, so you should use:

export HB_INC_QT=/usr/local/Trolltech/Qt-4.5.2/include

hbmk2 -trace demoqt -L/usr/local/Trolltech/Qt-4.5.2/lib

Best regards,
Istv?n

-----Original Message-----
From: Lorenzo Fiorini [mailto:lorenzo.fiorini@gmail.com] 
Sent: 2009. szeptember 11. 18:47
To: Harbour Project Main Developer List.
Subject: [Harbour] What are the setting to use qtsdk ( the one from
qt.nokia.com ) under linux?

Like in Windows I've set HB_INC_QT and HB_DIR_QT but the make still says:

...
! 'hbqt' library skipped ('qt' not found)
...

best regards,
Lorenzo


From vszakats at users.sourceforge.net  Sat Sep 12 09:28:44 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 12 09:28:50 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12487] trunk/harbour
Message-ID: <E1MmSei-0007k7-FX@d5vjzd1.ch3.sourceforge.com>

Revision: 12487
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12487&view=rev
Author:   vszakats
Date:     2009-09-12 13:28:43 +0000 (Sat, 12 Sep 2009)

Log Message:
-----------
2009-09-12 15:27 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/bsd/gcc.mk
  * config/hpux/gcc.mk
  * config/sunos/gcc.mk
    - Deleted -fPIC from DFLAGS. Pls tell if this was put there for a reason.

  * config/hpux/gcc.mk
  * config/sunos/gcc.mk
  * config/sunos/sunpro.mk
    + Added separate compilation pass for Harbour dynlibs using PIC option.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/bsd/gcc.mk
    trunk/harbour/config/hpux/gcc.mk
    trunk/harbour/config/sunos/gcc.mk
    trunk/harbour/config/sunos/sunpro.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From elart at elart.it  Sat Sep 12 10:46:58 2009
From: elart at elart.it (elart)
Date: Sat Sep 12 10:47:46 2009
Subject: [Harbour] Harbour for Win compile error Ubuntu 9.04 -  Rev. 12487
Message-ID: <4AABB462.6050707@elart.it>

Harbour for Win compile error Ubuntu 9.04 -  Rev. 12487

On Ubuntu 9.04 compile error...


! Installing ../../lib/win/mingw/libhbdebug.a on /tmp/hbwin/lib/win/mingw
/usr/bin/i586-mingw32msvc-gcc -shared -L../../../../../lib/win/mingw  -o 
../../../../../bin/win/mingw/harbour-20.dll __dyn__.tmp -lhbpcre 
-lhbzlib -lkernel32 -luser32 -lws2_32 -ladvapi32 -lgdi32 
-Wl,--out-implib,../../../../../lib/win/mingw/libharbour-20.a,--output-def,../../../../../bin/win/mingw/harbour-20.def
Creating library file: ../../../../../lib/win/mingw/libharbour-20.a
../../../../../source/common/obj/win/mingw/hbffind.o:hbffind.c:(.text+0x474): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0xc8): undefined 
reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0x2f7): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0x10f1): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0xaa): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0xc6): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0x18c): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0x2cb): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/hbproces.o:hbproces.c:(.text+0x180): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/hbproces.o:hbproces.c:(.text+0x5bd): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/hbrunfun.o:hbrunfun.c:(.text+0x58): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/net.o:net.c:(.text+0xc1): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/net.o:net.c:(.text+0x121): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/philes.o:philes.c:(.text+0x5fd): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/run.o:run.c:(.text+0x3f): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/vm/obj/win/mingw/cmdarg.o:cmdarg.c:(.text+0x3b9): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/vm/obj/win/mingw/cmdarg.o:cmdarg.c:(.text+0x796): 
undefined reference to `_hb_osDecodeCP'
collect2: ld returned 1 exit status
make[3]: *** [harbour-20.dll] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [dynlib.inst] Error 2
make: *** [source.inst] Error 2
From vszakats at users.sourceforge.net  Sat Sep 12 10:47:56 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 12 10:48:03 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12488] trunk/harbour
Message-ID: <E1MmTtM-0006hV-Sa@bj8yhf1.ch3.sourceforge.com>

Revision: 12488
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12488&view=rev
Author:   vszakats
Date:     2009-09-12 14:47:55 +0000 (Sat, 12 Sep 2009)

Log Message:
-----------
2009-09-12 16:47 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * external/pcre/pcreglob.c
    ! Fixed watcom compilation. There are still warnings.
      Please review it.

  * external/pcre/config.h
  * external/pcre/Makefile
    * -DPCRE_STATIC moved to Makefile from config.h. There is 
      no dynlib build mode here, so this could be done.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/external/pcre/Makefile
    trunk/harbour/external/pcre/config.h
    trunk/harbour/external/pcre/pcreglob.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From Istvan.Bisz at t-online.hu  Sat Sep 12 11:40:28 2009
From: Istvan.Bisz at t-online.hu (=?UTF-8?Q?Bisz_Istv=C3=A1n?=)
Date: Sat Sep 12 11:40:36 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12486] trunk/harbour
In-Reply-To: <E1MmPEM-0008Lv-Fw@c3vjzd1.ch3.sourceforge.com>
References: <E1MmPEM-0008Lv-Fw@c3vjzd1.ch3.sourceforge.com>
Message-ID: <000001ca33bf$5b435570$11ca0050$@Bisz@t-online.hu>

Hi Viktor,

The builds on 'CentOS 5.3', 'Fedora 11' and 'Vista' are running correctly. The 'demoqt' and 'demoxbp' executed coreectly, just one crash on Vista at 'demoxbp' finishing, but as I know correctly this is already reported.

I tried on 'Fedora 11' a correct crossbuild with the following script:

export HB_PLATFORM=win
export HB_CCPATH=/usr/bin/
export HB_CCPREFIX=i686-pc-mingw32-
export HB_BIN_COMPILE=/usr/local/bin
export HB_INSTALL_PREFIX=/usr/local/windows
cd ./harbour
make clean install
cd ..

My question is regarding the mingw32 auto detection on 'Fedora 11', could it be implemented for this distribution too? Is this HB_CCPATH and HB_CCPREFIX info sufficient for this or do you need more input?

Best regards,
Istv?n 

-----Original Message-----
From: vszakats@users.sourceforge.net [mailto:vszakats@users.sourceforge.net] 
Sent: 2009. szeptember 12. 11:49
To: harbour@harbour-project.org
Subject: [Harbour] SF.net SVN: harbour-project:[12486] trunk/harbour

Revision: 12486
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12486&view=rev
Author:   vszakats
Date:     2009-09-12 09:49:14 +0000 (Sat, 12 Sep 2009)

Log Message:
-----------
2009-09-12 11:48 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/global.mk
    + Added ppc detection on PPC macs.
    ! Fixed 64bit CPUs detection.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/global.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.


From harbour.01 at syenar.hu  Sat Sep 12 12:06:42 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Sep 12 12:06:51 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12486] trunk/harbour
In-Reply-To: <000001ca33bf$5b435570$11ca0050$@Bisz@t-online.hu>
References: <E1MmPEM-0008Lv-Fw@c3vjzd1.ch3.sourceforge.com>
	<000001ca33bf$5b435570$11ca0050$@Bisz@t-online.hu>
Message-ID: <1571A21F-B517-47E5-94BF-A1F0D201FF48@syenar.hu>

Hi,

> The builds on 'CentOS 5.3', 'Fedora 11' and 'Vista' are running  
> correctly. The 'demoqt' and 'demoxbp' executed coreectly, just one  
> crash on Vista at 'demoxbp' finishing, but as I know correctly this  
> is already reported.

Thank you for the information. One exit crash on win with QT was
already fixed AFAIR. I've just tried it here and it doesn't do
it on XP/mingw. If you have some more on this, please post it.

> I tried on 'Fedora 11' a correct crossbuild with the following script:
>
> export HB_PLATFORM=win
> export HB_CCPATH=/usr/bin/
> export HB_CCPREFIX=i686-pc-mingw32-
> export HB_BIN_COMPILE=/usr/local/bin
> export HB_INSTALL_PREFIX=/usr/local/windows
> cd ./harbour
> make clean install
> cd ..
>
> My question is regarding the mingw32 auto detection on 'Fedora 11',  
> could it be implemented for this distribution too? Is this HB_CCPATH  
> and HB_CCPREFIX info sufficient for this or do you need more input?

In config/global.mk line 524 try to change 'i?86-mingw*-gcc' text to
'i?86*-mingw*-gcc' (note the extra '*' after 86), and see if it gets
detected.

Brgds,
Viktor

From elart at elart.it  Sat Sep 12 12:17:37 2009
From: elart at elart.it (elart)
Date: Sat Sep 12 12:18:22 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12488] trunk/harbour
In-Reply-To: <E1MmTtM-0006hV-Sa@bj8yhf1.ch3.sourceforge.com>
References: <E1MmTtM-0006hV-Sa@bj8yhf1.ch3.sourceforge.com>
Message-ID: <4AABC9A1.4020004@elart.it>

On 09/12/2009 04:47 PM, vszakats@users.sourceforge.net wrote:
> Revision: 12488
>            http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12488&view=rev
> Author:   vszakats
> Date:     2009-09-12 14:47:55 +0000 (Sat, 12 Sep 2009)
>
> Log Message:
> -----------
> 2009-09-12 16:47 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>    * external/pcre/pcreglob.c
>      ! Fixed watcom compilation. There are still warnings.
>        Please review it.
>
>    * external/pcre/config.h
>    * external/pcre/Makefile
>      * -DPCRE_STATIC moved to Makefile from config.h. There is
>        no dynlib build mode here, so this could be done.
>
> Modified Paths:
> --------------
>      trunk/harbour/ChangeLog
>      trunk/harbour/external/pcre/Makefile
>      trunk/harbour/external/pcre/config.h
>      trunk/harbour/external/pcre/pcreglob.c
>
>
> This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

Hi Viktor

On ubuntu 9.04 32 bits compiling Harbour for Win i get this error....

Thank you and best regards


! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh
! HB_HOST_PLAT: linux (x86)  HB_SHELL: sh
! HB_PLATFORM: win (x86)
! HB_COMPILER: mingw (autodetected: /usr/bin/)
! HB_BIN_COMPILE not specified. Automatically set to: 
/home/danilo/src/harbour/bin/linux/gcc
! Component: 'zlib' found in /home/danilo/src/harbour/external/zlib (local)
! Component: 'pcre' found in /home/danilo/src/harbour/external/pcre (local)
! Component: 'openssl' not found
! Component: 'gpm' not supported on win platform
! Component: 'slang' not found
! Component: 'curses' not found
! Component: 'x11' not found
! Component: 'wattcp/watt-32' not supported on win platform
! HB_INSTALL_PREFIX automatically set to: /home/danilo/src/harbour
! REVISION: 12488
make[2]: Nothing to be done for `all'.
make[1]: Nothing to be done for `all'.
make[3]: `../../../../../lib/win/mingw/liblibhpdf.a' is up to date.
make[3]: `../../../../../lib/win/mingw/liblibpng.a' is up to date.
/usr/bin/i586-mingw32msvc-gcc  -I. -I../../../../../include  -O3 
-fomit-frame-pointer -march=i586 -mtune=pentiumpro  -DPCRE_STATIC 
-DHAVE_CONFIG_H  -opcreglob.o -c ../../../pcreglob.c
../../../pcreglob.c:56: error: expected identifier or ?(? before string 
constant
make[3]: *** [pcreglob.o] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [pcre] Error 2
make: *** [external] Error 2
! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh install
! HB_INSTALL_PREFIX: /tmp/hbwin
! HB_HOST_PLAT: linux (x86)  HB_SHELL: sh
! HB_PLATFORM: win (x86)
! HB_COMPILER: mingw (autodetected: /usr/bin/)
! HB_BIN_COMPILE not specified. Automatically set to: 
/home/danilo/src/harbour/bin/linux/gcc
! Component: 'zlib' found in /home/danilo/src/harbour/external/zlib (local)
! Component: 'pcre' found in /home/danilo/src/harbour/external/pcre (local)
! Component: 'openssl' not found
! Component: 'gpm' not supported on win platform
! Component: 'slang' not found
! Component: 'curses' not found
! Component: 'x11' not found
! Component: 'wattcp/watt-32' not supported on win platform
! REVISION: 12488
! Installing c_std.txt on /tmp/hbwin/doc
! Installing class_tp.txt on /tmp/hbwin/doc
! Installing cmdline.txt on /tmp/hbwin/doc
! Installing cmpopt.txt on /tmp/hbwin/doc
! Installing codebloc.txt on /tmp/hbwin/doc
! Installing codestyl.txt on /tmp/hbwin/doc
! Installing destruct.txt on /tmp/hbwin/doc
! Installing dirstruc.txt on /tmp/hbwin/doc
! Installing gmake.txt on /tmp/hbwin/doc
! Installing gtapi.txt on /tmp/hbwin/doc
! Installing hdr_tpl.txt on /tmp/hbwin/doc
! Installing howtobld.txt on /tmp/hbwin/doc
! Installing howtorel.txt on /tmp/hbwin/doc
! Installing howtosvn.txt on /tmp/hbwin/doc
! Installing inet.txt on /tmp/hbwin/doc
! Installing pcode.txt on /tmp/hbwin/doc
! Installing pp.txt on /tmp/hbwin/doc
! Installing pragma.txt on /tmp/hbwin/doc
! Installing readme.txt on /tmp/hbwin/doc
! Installing statics.txt on /tmp/hbwin/doc
! Installing tracing.txt on /tmp/hbwin/doc
! Installing transfrm.txt on /tmp/hbwin/doc
! Installing vm.txt on /tmp/hbwin/doc
! Installing whatsnew.txt on /tmp/hbwin/doc
! Installing windll.txt on /tmp/hbwin/doc
! Installing array.txt on /tmp/hbwin/doc/en-EN
! Installing binnum.txt on /tmp/hbwin/doc/en-EN
! Installing browse.txt on /tmp/hbwin/doc/en-EN
! Installing clipper.txt on /tmp/hbwin/doc/en-EN
! Installing cmdline.txt on /tmp/hbwin/doc/en-EN
! Installing command.txt on /tmp/hbwin/doc/en-EN
! Installing compiler.txt on /tmp/hbwin/doc/en-EN
! Installing datetime.txt on /tmp/hbwin/doc/en-EN
! Installing dbdelim.txt on /tmp/hbwin/doc/en-EN
! Installing dbsdf.txt on /tmp/hbwin/doc/en-EN
! Installing dbstrux.txt on /tmp/hbwin/doc/en-EN
! Installing dir.txt on /tmp/hbwin/doc/en-EN
! Installing diskspac.txt on /tmp/hbwin/doc/en-EN
! Installing errsys.txt on /tmp/hbwin/doc/en-EN
! Installing eval.txt on /tmp/hbwin/doc/en-EN
! Installing file.txt on /tmp/hbwin/doc/en-EN
! Installing garbage.txt on /tmp/hbwin/doc/en-EN
! Installing gnulice.txt on /tmp/hbwin/doc/en-EN
! Installing gtslang.txt on /tmp/hbwin/doc/en-EN
! Installing harbext.txt on /tmp/hbwin/doc/en-EN
! Installing hb_api.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apier.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apifs.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apigt.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apiit.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apiln.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apird.txt on /tmp/hbwin/doc/en-EN
! Installing hb_compa.txt on /tmp/hbwin/doc/en-EN
! Installing hb_date.txt on /tmp/hbwin/doc/en-EN
! Installing hb_macro.txt on /tmp/hbwin/doc/en-EN
! Installing hb_set.txt on /tmp/hbwin/doc/en-EN
! Installing hb_vm.txt on /tmp/hbwin/doc/en-EN
! Installing hvm.txt on /tmp/hbwin/doc/en-EN
! Installing idle.txt on /tmp/hbwin/doc/en-EN
! Installing input.txt on /tmp/hbwin/doc/en-EN
! Installing lang.txt on /tmp/hbwin/doc/en-EN
! Installing license.txt on /tmp/hbwin/doc/en-EN
! Installing macro.txt on /tmp/hbwin/doc/en-EN
! Installing math.txt on /tmp/hbwin/doc/en-EN
! Installing memo.txt on /tmp/hbwin/doc/en-EN
! Installing memvar2.txt on /tmp/hbwin/doc/en-EN
! Installing menu.txt on /tmp/hbwin/doc/en-EN
! Installing misc.txt on /tmp/hbwin/doc/en-EN
! Installing nation.txt on /tmp/hbwin/doc/en-EN
! Installing objfunc.txt on /tmp/hbwin/doc/en-EN
! Installing rdd.txt on /tmp/hbwin/doc/en-EN
! Installing rdddb.txt on /tmp/hbwin/doc/en-EN
! Installing rddmisc.txt on /tmp/hbwin/doc/en-EN
! Installing rddord.txt on /tmp/hbwin/doc/en-EN
! Installing readme.txt on /tmp/hbwin/doc/en-EN
! Installing sayget.txt on /tmp/hbwin/doc/en-EN
! Installing set.txt on /tmp/hbwin/doc/en-EN
! Installing setmode.txt on /tmp/hbwin/doc/en-EN
! Installing string.txt on /tmp/hbwin/doc/en-EN
! Installing strotype.txt on /tmp/hbwin/doc/en-EN
! Installing subcodes.txt on /tmp/hbwin/doc/en-EN
! Installing tbrowse.txt on /tmp/hbwin/doc/en-EN
! Installing tclass.txt on /tmp/hbwin/doc/en-EN
! Installing terminal.txt on /tmp/hbwin/doc/en-EN
! Installing tgetlist.txt on /tmp/hbwin/doc/en-EN
! Installing tlabel.txt on /tmp/hbwin/doc/en-EN
! Installing treport.txt on /tmp/hbwin/doc/en-EN
! Installing var.txt on /tmp/hbwin/doc/en-EN
! Installing clipdefs.h on /tmp/hbwin/include
! Installing extend.h on /tmp/hbwin/include
! Installing hbapi.h on /tmp/hbwin/include
! Installing hbapicdp.h on /tmp/hbwin/include
! Installing hbapicls.h on /tmp/hbwin/include
! Installing hbapidbg.h on /tmp/hbwin/include
! Installing hbapierr.h on /tmp/hbwin/include
! Installing hbapifs.h on /tmp/hbwin/include
! Installing hbapigt.h on /tmp/hbwin/include
! Installing hbapiitm.h on /tmp/hbwin/include
! Installing hbapilng.h on /tmp/hbwin/include
! Installing hbapirdd.h on /tmp/hbwin/include
! Installing hbassert.h on /tmp/hbwin/include
! Installing hbatomic.h on /tmp/hbwin/include
! Installing hbchksum.h on /tmp/hbwin/include
! Installing hbcomp.h on /tmp/hbwin/include
! Installing hbcompdf.h on /tmp/hbwin/include
! Installing hbdate.h on /tmp/hbwin/include
! Installing hbdbf.h on /tmp/hbwin/include
! Installing hbdbferr.h on /tmp/hbwin/include
! Installing hbdbsort.h on /tmp/hbwin/include
! Installing hbdefs.h on /tmp/hbwin/include
! Installing hberrors.h on /tmp/hbwin/include
! Installing hbexprop.h on /tmp/hbwin/include
! Installing hbgtcore.h on /tmp/hbwin/include
! Installing hbhash.h on /tmp/hbwin/include
! Installing hbinit.h on /tmp/hbwin/include
! Installing hbmacro.h on /tmp/hbwin/include
! Installing hbmath.h on /tmp/hbwin/include
! Installing hbpcode.h on /tmp/hbwin/include
! Installing hbpp.h on /tmp/hbwin/include
! Installing hbrddcdx.h on /tmp/hbwin/include
! Installing hbrdddbf.h on /tmp/hbwin/include
! Installing hbrddfpt.h on /tmp/hbwin/include
! Installing hbrdddel.h on /tmp/hbwin/include
! Installing hbrddntx.h on /tmp/hbwin/include
! Installing hbrddsdf.h on /tmp/hbwin/include
! Installing hbrddnsx.h on /tmp/hbwin/include
! Installing hbregex.h on /tmp/hbwin/include
! Installing hbset.h on /tmp/hbwin/include
! Installing hbsetup.h on /tmp/hbwin/include
! Installing hbsocket.h on /tmp/hbwin/include
! Installing hbstack.h on /tmp/hbwin/include
! Installing hbsxfunc.h on /tmp/hbwin/include
! Installing hbthread.h on /tmp/hbwin/include
! Installing hbtrace.h on /tmp/hbwin/include
! Installing hbtypes.h on /tmp/hbwin/include
! Installing hbver.h on /tmp/hbwin/include
! Installing hbvm.h on /tmp/hbwin/include
! Installing hbvmint.h on /tmp/hbwin/include
! Installing hbvmopt.h on /tmp/hbwin/include
! Installing hbvmpub.h on /tmp/hbwin/include
! Installing hbxvm.h on /tmp/hbwin/include
! Installing hbwince.h on /tmp/hbwin/include
! Installing hbzlib.h on /tmp/hbwin/include
! Installing hb_io.h on /tmp/hbwin/include
! Installing achoice.ch on /tmp/hbwin/include
! Installing assert.ch on /tmp/hbwin/include
! Installing box.ch on /tmp/hbwin/include
! Installing button.ch on /tmp/hbwin/include
! Installing blob.ch on /tmp/hbwin/include
! Installing color.ch on /tmp/hbwin/include
! Installing common.ch on /tmp/hbwin/include
! Installing dbedit.ch on /tmp/hbwin/include
! Installing dbinfo.ch on /tmp/hbwin/include
! Installing dbstruct.ch on /tmp/hbwin/include
! Installing directry.ch on /tmp/hbwin/include
! Installing error.ch on /tmp/hbwin/include
! Installing fileio.ch on /tmp/hbwin/include
! Installing getexit.ch on /tmp/hbwin/include
! Installing hbclass.ch on /tmp/hbwin/include
! Installing hbdebug.ch on /tmp/hbwin/include
! Installing hbextcdp.ch on /tmp/hbwin/include
! Installing hbextlng.ch on /tmp/hbwin/include
! Installing hbextern.ch on /tmp/hbwin/include
! Installing hbgfx.ch on /tmp/hbwin/include
! Installing hbgfxdef.ch on /tmp/hbwin/include
! Installing hbgtinfo.ch on /tmp/hbwin/include
! Installing hbhrb.ch on /tmp/hbwin/include
! Installing hbinkey.ch on /tmp/hbwin/include
! Installing hblang.ch on /tmp/hbwin/include
! Installing hbmacro.ch on /tmp/hbwin/include
! Installing hbmath.ch on /tmp/hbwin/include
! Installing hbmemory.ch on /tmp/hbwin/include
! Installing hbmemvar.ch on /tmp/hbwin/include
! Installing hboo.ch on /tmp/hbwin/include
! Installing hbpers.ch on /tmp/hbwin/include
! Installing hbsetup.ch on /tmp/hbwin/include
! Installing hbsix.ch on /tmp/hbwin/include
! Installing hbsocket.ch on /tmp/hbwin/include
! Installing hbstdgen.ch on /tmp/hbwin/include
! Installing hbthread.ch on /tmp/hbwin/include
! Installing hbusrrdd.ch on /tmp/hbwin/include
! Installing hbver.ch on /tmp/hbwin/include
! Installing hbzlib.ch on /tmp/hbwin/include
! Installing inkey.ch on /tmp/hbwin/include
! Installing memoedit.ch on /tmp/hbwin/include
! Installing ord.ch on /tmp/hbwin/include
! Installing rddsys.ch on /tmp/hbwin/include
! Installing reserved.ch on /tmp/hbwin/include
! Installing set.ch on /tmp/hbwin/include
! Installing setcurs.ch on /tmp/hbwin/include
! Installing simpleio.ch on /tmp/hbwin/include
! Installing std.ch on /tmp/hbwin/include
! Installing hbsxdef.ch on /tmp/hbwin/include
! Installing tbrowse.ch on /tmp/hbwin/include
! Installing error.api on /tmp/hbwin/include
! Installing extend.api on /tmp/hbwin/include
! Installing filesys.api on /tmp/hbwin/include
! Installing fm.api on /tmp/hbwin/include
! Installing gt.api on /tmp/hbwin/include
! Installing hbundoc.api on /tmp/hbwin/include
! Installing item.api on /tmp/hbwin/include
! Installing rdd.api on /tmp/hbwin/include
! Installing vm.api on /tmp/hbwin/include
make[3]: `../../../../../lib/win/mingw/liblibhpdf.a' is up to date.
! Installing ../../lib/win/mingw/liblibhpdf.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/liblibpng.a' is up to date.
! Installing ../../lib/win/mingw/liblibpng.a on /tmp/hbwin/lib/win/mingw
/usr/bin/i586-mingw32msvc-gcc  -I. -I../../../../../include  -O3 
-fomit-frame-pointer -march=i586 -mtune=pentiumpro  -DPCRE_STATIC 
-DHAVE_CONFIG_H  -opcreglob.o -c ../../../pcreglob.c
../../../pcreglob.c:56: error: expected identifier or ?(? before string 
constant
make[3]: *** [pcreglob.o] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [pcre.inst] Error 2
make: *** [external.inst] Error 2

From vszakats at users.sourceforge.net  Sat Sep 12 12:33:59 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 12 12:34:04 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12489] trunk/harbour
Message-ID: <E1MmVXz-0001k6-8W@3kljzd1.ch3.sourceforge.com>

Revision: 12489
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12489&view=rev
Author:   vszakats
Date:     2009-09-12 16:33:58 +0000 (Sat, 12 Sep 2009)

Log Message:
-----------
2009-09-12 18:33 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * external/pcre/pcreglob.c
    ! Fixed fatal mistake in prev commit.

  * config/global.mk
    + Extended generic mingw autodetection on *nix to work on Fedora 11.
      Please test. On Fedora 11 HB_CCPREFIX is i686-pc-mingw32-

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/global.mk
    trunk/harbour/external/pcre/pcreglob.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From elart at elart.it  Sat Sep 12 13:30:04 2009
From: elart at elart.it (elart)
Date: Sat Sep 12 13:31:02 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12489] trunk/harbour
In-Reply-To: <E1MmVXz-0001k6-8W@3kljzd1.ch3.sourceforge.com>
References: <E1MmVXz-0001k6-8W@3kljzd1.ch3.sourceforge.com>
Message-ID: <4AABDA9C.2040901@elart.it>

On 09/12/2009 06:33 PM, vszakats@users.sourceforge.net wrote:
> Revision: 12489
>            http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12489&view=rev
> Author:   vszakats
> Date:     2009-09-12 16:33:58 +0000 (Sat, 12 Sep 2009)
>
> Log Message:
> -----------
> 2009-09-12 18:33 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>    * external/pcre/pcreglob.c
>      ! Fixed fatal mistake in prev commit.
>
>    * config/global.mk
>      + Extended generic mingw autodetection on *nix to work on Fedora 11.
>        Please test. On Fedora 11 HB_CCPREFIX is i686-pc-mingw32-
>
> Modified Paths:
> --------------
>      trunk/harbour/ChangeLog
>      trunk/harbour/config/global.mk
>      trunk/harbour/external/pcre/pcreglob.c
>
>
> This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

Hi Viktor i get this error on Ubuntu 9.04 compiling Harbour for Win (no 
error for Harbour for Linux)

! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh
! HB_HOST_PLAT: linux (x86)  HB_SHELL: sh
! HB_PLATFORM: win (x86)
! HB_COMPILER: mingw (autodetected: /usr/bin/)
! HB_BIN_COMPILE not specified. Automatically set to: 
/home/danilo/src/harbour/bin/linux/gcc
! Component: 'zlib' found in /home/danilo/src/harbour/external/zlib (local)
! Component: 'pcre' found in /home/danilo/src/harbour/external/pcre (local)
! Component: 'openssl' not found
! Component: 'gpm' not supported on win platform
! Component: 'slang' not found
! Component: 'curses' not found
! Component: 'x11' not found
! Component: 'wattcp/watt-32' not supported on win platform
! HB_INSTALL_PREFIX automatically set to: /home/danilo/src/harbour
! REVISION: 12489
make[2]: Nothing to be done for `all'.
make[1]: Nothing to be done for `all'.
make[3]: `../../../../../lib/win/mingw/liblibhpdf.a' is up to date.
make[3]: `../../../../../lib/win/mingw/liblibpng.a' is up to date.
/usr/bin/i586-mingw32msvc-gcc  -I. -I../../../../../include  -O3 
-fomit-frame-pointer -march=i586 -mtune=pentiumpro  -DPCRE_STATIC 
-DHAVE_CONFIG_H  -opcreglob.o -c ../../../pcreglob.c
/usr/bin/i586-mingw32msvc-ar   rcs 
../../../../../lib/win/mingw/libhbpcre.a chartabs.o pcrecomp.o 
pcreconf.o pcredfa.o pcreexec.o pcrefinf.o pcreget.o pcreglob.o 
pcreinfo.o pcremktb.o pcrenewl.o pcreoutf.o pcrerefc.o pcrestud.o 
pcretabs.o pcretryf.o pcreucd.o pcrever.o pcrevutf.o pcrexcls.o || rm -f 
../../../../../lib/win/mingw/libhbpcre.a
make[3]: `../../../../../lib/win/mingw/libsqlite3.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbzlib.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbcommon.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbnortl.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbpp.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbcplr.a' is up to date.
make[3]: `../../../../../bin/win/mingw/harbour.exe' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbrtl.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libgtcgi.a' is up to date.
! 'gtcrs' library skipped (component not found)
! 'gtdos' library skipped (platform not supported)
make[4]: `../../../../../../lib/win/mingw/libgtgui.a' is up to date.
! 'gtos2' library skipped (platform not supported)
make[4]: `../../../../../../lib/win/mingw/libgtpca.a' is up to date.
! 'gtsln' library skipped (component not found)
make[4]: `../../../../../../lib/win/mingw/libgtstd.a' is up to date.
! 'gttrm' library skipped (platform or compiler not supported)
make[4]: `../../../../../../lib/win/mingw/libgtwin.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libgtwvt.a' is up to date.
! 'gtxwc' library skipped (component not found)
make[3]: `../../../../../lib/win/mingw/libhbvm.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbmainstd.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbmainwin.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbmaindllh.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbmaindllp.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbvmmt.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbmacro.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbcpage.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhblang.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbrdd.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbnulrdd.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/librddntx.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/librddnsx.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/librddcdx.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/librddfpt.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbsix.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbhsx.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbusrrdd.a' is up to date.
make[4]: `../../../../../../../lib/win/mingw/libhbuddall.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbextern.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbdebug.a' is up to date.
/usr/bin/i586-mingw32msvc-gcc -shared -L../../../../../lib/win/mingw  -o 
../../../../../bin/win/mingw/harbour-20.dll __dyn__.tmp -lhbpcre 
-lhbzlib -lkernel32 -luser32 -lws2_32 -ladvapi32 -lgdi32 
-Wl,--out-implib,../../../../../lib/win/mingw/libharbour-20.a,--output-def,../../../../../bin/win/mingw/harbour-20.def
Creating library file: ../../../../../lib/win/mingw/libharbour-20.a
../../../../../source/common/obj/win/mingw/hbffind.o:hbffind.c:(.text+0x474): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0xc8): undefined 
reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0x2f7): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0x10f1): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0xaa): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0xc6): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0x18c): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0x2cb): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/hbproces.o:hbproces.c:(.text+0x180): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/hbproces.o:hbproces.c:(.text+0x5bd): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/hbrunfun.o:hbrunfun.c:(.text+0x58): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/net.o:net.c:(.text+0xc1): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/net.o:net.c:(.text+0x121): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/philes.o:philes.c:(.text+0x5fd): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/run.o:run.c:(.text+0x3f): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/vm/obj/win/mingw/cmdarg.o:cmdarg.c:(.text+0x3b9): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/vm/obj/win/mingw/cmdarg.o:cmdarg.c:(.text+0x796): 
undefined reference to `_hb_osDecodeCP'
collect2: ld returned 1 exit status
make[3]: *** [harbour-20.dll] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [dynlib] Error 2
make: *** [source] Error 2
! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh install
! HB_INSTALL_PREFIX: /tmp/hbwin
! HB_HOST_PLAT: linux (x86)  HB_SHELL: sh
! HB_PLATFORM: win (x86)
! HB_COMPILER: mingw (autodetected: /usr/bin/)
! HB_BIN_COMPILE not specified. Automatically set to: 
/home/danilo/src/harbour/bin/linux/gcc
! Component: 'zlib' found in /home/danilo/src/harbour/external/zlib (local)
! Component: 'pcre' found in /home/danilo/src/harbour/external/pcre (local)
! Component: 'openssl' not found
! Component: 'gpm' not supported on win platform
! Component: 'slang' not found
! Component: 'curses' not found
! Component: 'x11' not found
! Component: 'wattcp/watt-32' not supported on win platform
! REVISION: 12489
! Installing c_std.txt on /tmp/hbwin/doc
! Installing class_tp.txt on /tmp/hbwin/doc
! Installing cmdline.txt on /tmp/hbwin/doc
! Installing cmpopt.txt on /tmp/hbwin/doc
! Installing codebloc.txt on /tmp/hbwin/doc
! Installing codestyl.txt on /tmp/hbwin/doc
! Installing destruct.txt on /tmp/hbwin/doc
! Installing dirstruc.txt on /tmp/hbwin/doc
! Installing gmake.txt on /tmp/hbwin/doc
! Installing gtapi.txt on /tmp/hbwin/doc
! Installing hdr_tpl.txt on /tmp/hbwin/doc
! Installing howtobld.txt on /tmp/hbwin/doc
! Installing howtorel.txt on /tmp/hbwin/doc
! Installing howtosvn.txt on /tmp/hbwin/doc
! Installing inet.txt on /tmp/hbwin/doc
! Installing pcode.txt on /tmp/hbwin/doc
! Installing pp.txt on /tmp/hbwin/doc
! Installing pragma.txt on /tmp/hbwin/doc
! Installing readme.txt on /tmp/hbwin/doc
! Installing statics.txt on /tmp/hbwin/doc
! Installing tracing.txt on /tmp/hbwin/doc
! Installing transfrm.txt on /tmp/hbwin/doc
! Installing vm.txt on /tmp/hbwin/doc
! Installing whatsnew.txt on /tmp/hbwin/doc
! Installing windll.txt on /tmp/hbwin/doc
! Installing array.txt on /tmp/hbwin/doc/en-EN
! Installing binnum.txt on /tmp/hbwin/doc/en-EN
! Installing browse.txt on /tmp/hbwin/doc/en-EN
! Installing clipper.txt on /tmp/hbwin/doc/en-EN
! Installing cmdline.txt on /tmp/hbwin/doc/en-EN
! Installing command.txt on /tmp/hbwin/doc/en-EN
! Installing compiler.txt on /tmp/hbwin/doc/en-EN
! Installing datetime.txt on /tmp/hbwin/doc/en-EN
! Installing dbdelim.txt on /tmp/hbwin/doc/en-EN
! Installing dbsdf.txt on /tmp/hbwin/doc/en-EN
! Installing dbstrux.txt on /tmp/hbwin/doc/en-EN
! Installing dir.txt on /tmp/hbwin/doc/en-EN
! Installing diskspac.txt on /tmp/hbwin/doc/en-EN
! Installing errsys.txt on /tmp/hbwin/doc/en-EN
! Installing eval.txt on /tmp/hbwin/doc/en-EN
! Installing file.txt on /tmp/hbwin/doc/en-EN
! Installing garbage.txt on /tmp/hbwin/doc/en-EN
! Installing gnulice.txt on /tmp/hbwin/doc/en-EN
! Installing gtslang.txt on /tmp/hbwin/doc/en-EN
! Installing harbext.txt on /tmp/hbwin/doc/en-EN
! Installing hb_api.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apier.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apifs.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apigt.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apiit.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apiln.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apird.txt on /tmp/hbwin/doc/en-EN
! Installing hb_compa.txt on /tmp/hbwin/doc/en-EN
! Installing hb_date.txt on /tmp/hbwin/doc/en-EN
! Installing hb_macro.txt on /tmp/hbwin/doc/en-EN
! Installing hb_set.txt on /tmp/hbwin/doc/en-EN
! Installing hb_vm.txt on /tmp/hbwin/doc/en-EN
! Installing hvm.txt on /tmp/hbwin/doc/en-EN
! Installing idle.txt on /tmp/hbwin/doc/en-EN
! Installing input.txt on /tmp/hbwin/doc/en-EN
! Installing lang.txt on /tmp/hbwin/doc/en-EN
! Installing license.txt on /tmp/hbwin/doc/en-EN
! Installing macro.txt on /tmp/hbwin/doc/en-EN
! Installing math.txt on /tmp/hbwin/doc/en-EN
! Installing memo.txt on /tmp/hbwin/doc/en-EN
! Installing memvar2.txt on /tmp/hbwin/doc/en-EN
! Installing menu.txt on /tmp/hbwin/doc/en-EN
! Installing misc.txt on /tmp/hbwin/doc/en-EN
! Installing nation.txt on /tmp/hbwin/doc/en-EN
! Installing objfunc.txt on /tmp/hbwin/doc/en-EN
! Installing rdd.txt on /tmp/hbwin/doc/en-EN
! Installing rdddb.txt on /tmp/hbwin/doc/en-EN
! Installing rddmisc.txt on /tmp/hbwin/doc/en-EN
! Installing rddord.txt on /tmp/hbwin/doc/en-EN
! Installing readme.txt on /tmp/hbwin/doc/en-EN
! Installing sayget.txt on /tmp/hbwin/doc/en-EN
! Installing set.txt on /tmp/hbwin/doc/en-EN
! Installing setmode.txt on /tmp/hbwin/doc/en-EN
! Installing string.txt on /tmp/hbwin/doc/en-EN
! Installing strotype.txt on /tmp/hbwin/doc/en-EN
! Installing subcodes.txt on /tmp/hbwin/doc/en-EN
! Installing tbrowse.txt on /tmp/hbwin/doc/en-EN
! Installing tclass.txt on /tmp/hbwin/doc/en-EN
! Installing terminal.txt on /tmp/hbwin/doc/en-EN
! Installing tgetlist.txt on /tmp/hbwin/doc/en-EN
! Installing tlabel.txt on /tmp/hbwin/doc/en-EN
! Installing treport.txt on /tmp/hbwin/doc/en-EN
! Installing var.txt on /tmp/hbwin/doc/en-EN
! Installing clipdefs.h on /tmp/hbwin/include
! Installing extend.h on /tmp/hbwin/include
! Installing hbapi.h on /tmp/hbwin/include
! Installing hbapicdp.h on /tmp/hbwin/include
! Installing hbapicls.h on /tmp/hbwin/include
! Installing hbapidbg.h on /tmp/hbwin/include
! Installing hbapierr.h on /tmp/hbwin/include
! Installing hbapifs.h on /tmp/hbwin/include
! Installing hbapigt.h on /tmp/hbwin/include
! Installing hbapiitm.h on /tmp/hbwin/include
! Installing hbapilng.h on /tmp/hbwin/include
! Installing hbapirdd.h on /tmp/hbwin/include
! Installing hbassert.h on /tmp/hbwin/include
! Installing hbatomic.h on /tmp/hbwin/include
! Installing hbchksum.h on /tmp/hbwin/include
! Installing hbcomp.h on /tmp/hbwin/include
! Installing hbcompdf.h on /tmp/hbwin/include
! Installing hbdate.h on /tmp/hbwin/include
! Installing hbdbf.h on /tmp/hbwin/include
! Installing hbdbferr.h on /tmp/hbwin/include
! Installing hbdbsort.h on /tmp/hbwin/include
! Installing hbdefs.h on /tmp/hbwin/include
! Installing hberrors.h on /tmp/hbwin/include
! Installing hbexprop.h on /tmp/hbwin/include
! Installing hbgtcore.h on /tmp/hbwin/include
! Installing hbhash.h on /tmp/hbwin/include
! Installing hbinit.h on /tmp/hbwin/include
! Installing hbmacro.h on /tmp/hbwin/include
! Installing hbmath.h on /tmp/hbwin/include
! Installing hbpcode.h on /tmp/hbwin/include
! Installing hbpp.h on /tmp/hbwin/include
! Installing hbrddcdx.h on /tmp/hbwin/include
! Installing hbrdddbf.h on /tmp/hbwin/include
! Installing hbrddfpt.h on /tmp/hbwin/include
! Installing hbrdddel.h on /tmp/hbwin/include
! Installing hbrddntx.h on /tmp/hbwin/include
! Installing hbrddsdf.h on /tmp/hbwin/include
! Installing hbrddnsx.h on /tmp/hbwin/include
! Installing hbregex.h on /tmp/hbwin/include
! Installing hbset.h on /tmp/hbwin/include
! Installing hbsetup.h on /tmp/hbwin/include
! Installing hbsocket.h on /tmp/hbwin/include
! Installing hbstack.h on /tmp/hbwin/include
! Installing hbsxfunc.h on /tmp/hbwin/include
! Installing hbthread.h on /tmp/hbwin/include
! Installing hbtrace.h on /tmp/hbwin/include
! Installing hbtypes.h on /tmp/hbwin/include
! Installing hbver.h on /tmp/hbwin/include
! Installing hbvm.h on /tmp/hbwin/include
! Installing hbvmint.h on /tmp/hbwin/include
! Installing hbvmopt.h on /tmp/hbwin/include
! Installing hbvmpub.h on /tmp/hbwin/include
! Installing hbxvm.h on /tmp/hbwin/include
! Installing hbwince.h on /tmp/hbwin/include
! Installing hbzlib.h on /tmp/hbwin/include
! Installing hb_io.h on /tmp/hbwin/include
! Installing achoice.ch on /tmp/hbwin/include
! Installing assert.ch on /tmp/hbwin/include
! Installing box.ch on /tmp/hbwin/include
! Installing button.ch on /tmp/hbwin/include
! Installing blob.ch on /tmp/hbwin/include
! Installing color.ch on /tmp/hbwin/include
! Installing common.ch on /tmp/hbwin/include
! Installing dbedit.ch on /tmp/hbwin/include
! Installing dbinfo.ch on /tmp/hbwin/include
! Installing dbstruct.ch on /tmp/hbwin/include
! Installing directry.ch on /tmp/hbwin/include
! Installing error.ch on /tmp/hbwin/include
! Installing fileio.ch on /tmp/hbwin/include
! Installing getexit.ch on /tmp/hbwin/include
! Installing hbclass.ch on /tmp/hbwin/include
! Installing hbdebug.ch on /tmp/hbwin/include
! Installing hbextcdp.ch on /tmp/hbwin/include
! Installing hbextlng.ch on /tmp/hbwin/include
! Installing hbextern.ch on /tmp/hbwin/include
! Installing hbgfx.ch on /tmp/hbwin/include
! Installing hbgfxdef.ch on /tmp/hbwin/include
! Installing hbgtinfo.ch on /tmp/hbwin/include
! Installing hbhrb.ch on /tmp/hbwin/include
! Installing hbinkey.ch on /tmp/hbwin/include
! Installing hblang.ch on /tmp/hbwin/include
! Installing hbmacro.ch on /tmp/hbwin/include
! Installing hbmath.ch on /tmp/hbwin/include
! Installing hbmemory.ch on /tmp/hbwin/include
! Installing hbmemvar.ch on /tmp/hbwin/include
! Installing hboo.ch on /tmp/hbwin/include
! Installing hbpers.ch on /tmp/hbwin/include
! Installing hbsetup.ch on /tmp/hbwin/include
! Installing hbsix.ch on /tmp/hbwin/include
! Installing hbsocket.ch on /tmp/hbwin/include
! Installing hbstdgen.ch on /tmp/hbwin/include
! Installing hbthread.ch on /tmp/hbwin/include
! Installing hbusrrdd.ch on /tmp/hbwin/include
! Installing hbver.ch on /tmp/hbwin/include
! Installing hbzlib.ch on /tmp/hbwin/include
! Installing inkey.ch on /tmp/hbwin/include
! Installing memoedit.ch on /tmp/hbwin/include
! Installing ord.ch on /tmp/hbwin/include
! Installing rddsys.ch on /tmp/hbwin/include
! Installing reserved.ch on /tmp/hbwin/include
! Installing set.ch on /tmp/hbwin/include
! Installing setcurs.ch on /tmp/hbwin/include
! Installing simpleio.ch on /tmp/hbwin/include
! Installing std.ch on /tmp/hbwin/include
! Installing hbsxdef.ch on /tmp/hbwin/include
! Installing tbrowse.ch on /tmp/hbwin/include
! Installing error.api on /tmp/hbwin/include
! Installing extend.api on /tmp/hbwin/include
! Installing filesys.api on /tmp/hbwin/include
! Installing fm.api on /tmp/hbwin/include
! Installing gt.api on /tmp/hbwin/include
! Installing hbundoc.api on /tmp/hbwin/include
! Installing item.api on /tmp/hbwin/include
! Installing rdd.api on /tmp/hbwin/include
! Installing vm.api on /tmp/hbwin/include
make[3]: `../../../../../lib/win/mingw/liblibhpdf.a' is up to date.
! Installing ../../lib/win/mingw/liblibhpdf.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/liblibpng.a' is up to date.
! Installing ../../lib/win/mingw/liblibpng.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbpcre.a' is up to date.
! Installing ../../lib/win/mingw/libhbpcre.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libsqlite3.a' is up to date.
! Installing ../../lib/win/mingw/libsqlite3.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbzlib.a' is up to date.
! Installing ../../lib/win/mingw/libhbzlib.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbcommon.a' is up to date.
! Installing ../../lib/win/mingw/libhbcommon.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbnortl.a' is up to date.
! Installing ../../lib/win/mingw/libhbnortl.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbpp.a' is up to date.
! Installing ../../lib/win/mingw/libhbpp.a on /tmp/hbwin/lib/win/mingw
! Installing ../../bin/win/mingw/hbpp.exe on /tmp/hbwin/bin
make[3]: `../../../../../lib/win/mingw/libhbcplr.a' is up to date.
! Installing ../../lib/win/mingw/libhbcplr.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../bin/win/mingw/harbour.exe' is up to date.
! Installing ../../bin/win/mingw/harbour.exe on /tmp/hbwin/bin
make[3]: `../../../../../lib/win/mingw/libhbrtl.a' is up to date.
! Installing ../../lib/win/mingw/libhbrtl.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libgtcgi.a' is up to date.
! Installing ../../../lib/win/mingw/libgtcgi.a on /tmp/hbwin/lib/win/mingw
! 'gtcrs' library skipped (component not found)
! 'gtdos' library skipped (platform not supported)
make[4]: `../../../../../../lib/win/mingw/libgtgui.a' is up to date.
! Installing ../../../lib/win/mingw/libgtgui.a on /tmp/hbwin/lib/win/mingw
! 'gtos2' library skipped (platform not supported)
make[4]: `../../../../../../lib/win/mingw/libgtpca.a' is up to date.
! Installing ../../../lib/win/mingw/libgtpca.a on /tmp/hbwin/lib/win/mingw
! 'gtsln' library skipped (component not found)
make[4]: `../../../../../../lib/win/mingw/libgtstd.a' is up to date.
! Installing ../../../lib/win/mingw/libgtstd.a on /tmp/hbwin/lib/win/mingw
! 'gttrm' library skipped (platform or compiler not supported)
make[4]: `../../../../../../lib/win/mingw/libgtwin.a' is up to date.
! Installing ../../../lib/win/mingw/libgtwin.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libgtwvt.a' is up to date.
! Installing ../../../lib/win/mingw/libgtwvt.a on /tmp/hbwin/lib/win/mingw
! 'gtxwc' library skipped (component not found)
make[3]: `../../../../../lib/win/mingw/libhbvm.a' is up to date.
! Installing ../../lib/win/mingw/libhbvm.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbmainstd.a' is up to date.
! Installing ../../../lib/win/mingw/libhbmainstd.a on 
/tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbmainwin.a' is up to date.
! Installing ../../../lib/win/mingw/libhbmainwin.a on 
/tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbmaindllh.a' is up to date.
! Installing ../../../lib/win/mingw/libhbmaindllh.a on 
/tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbmaindllp.a' is up to date.
! Installing ../../../lib/win/mingw/libhbmaindllp.a on 
/tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbvmmt.a' is up to date.
! Installing ../../../lib/win/mingw/libhbvmmt.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbmacro.a' is up to date.
! Installing ../../lib/win/mingw/libhbmacro.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbcpage.a' is up to date.
! Installing ../../lib/win/mingw/libhbcpage.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhblang.a' is up to date.
! Installing ../../lib/win/mingw/libhblang.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbrdd.a' is up to date.
! Installing ../../lib/win/mingw/libhbrdd.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbnulrdd.a' is up to date.
! Installing ../../../lib/win/mingw/libhbnulrdd.a on 
/tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/librddntx.a' is up to date.
! Installing ../../../lib/win/mingw/librddntx.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/librddnsx.a' is up to date.
! Installing ../../../lib/win/mingw/librddnsx.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/librddcdx.a' is up to date.
! Installing ../../../lib/win/mingw/librddcdx.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/librddfpt.a' is up to date.
! Installing ../../../lib/win/mingw/librddfpt.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbsix.a' is up to date.
! Installing ../../../lib/win/mingw/libhbsix.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbhsx.a' is up to date.
! Installing ../../../lib/win/mingw/libhbhsx.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbusrrdd.a' is up to date.
! Installing ../../../lib/win/mingw/libhbusrrdd.a on 
/tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../../lib/win/mingw/libhbuddall.a' is up to date.
! Installing ../../../../lib/win/mingw/libhbuddall.a on 
/tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbextern.a' is up to date.
! Installing ../../lib/win/mingw/libhbextern.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbdebug.a' is up to date.
! Installing ../../lib/win/mingw/libhbdebug.a on /tmp/hbwin/lib/win/mingw
/usr/bin/i586-mingw32msvc-gcc -shared -L../../../../../lib/win/mingw  -o 
../../../../../bin/win/mingw/harbour-20.dll __dyn__.tmp -lhbpcre 
-lhbzlib -lkernel32 -luser32 -lws2_32 -ladvapi32 -lgdi32 
-Wl,--out-implib,../../../../../lib/win/mingw/libharbour-20.a,--output-def,../../../../../bin/win/mingw/harbour-20.def
Creating library file: ../../../../../lib/win/mingw/libharbour-20.a
../../../../../source/common/obj/win/mingw/hbffind.o:hbffind.c:(.text+0x474): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0xc8): undefined 
reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0x2f7): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0x10f1): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0xaa): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0xc6): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0x18c): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0x2cb): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/hbproces.o:hbproces.c:(.text+0x180): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/hbproces.o:hbproces.c:(.text+0x5bd): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/hbrunfun.o:hbrunfun.c:(.text+0x58): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/net.o:net.c:(.text+0xc1): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/net.o:net.c:(.text+0x121): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/philes.o:philes.c:(.text+0x5fd): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/run.o:run.c:(.text+0x3f): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/vm/obj/win/mingw/cmdarg.o:cmdarg.c:(.text+0x3b9): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/vm/obj/win/mingw/cmdarg.o:cmdarg.c:(.text+0x796): 
undefined reference to `_hb_osDecodeCP'
collect2: ld returned 1 exit status
make[3]: *** [harbour-20.dll] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [dynlib.inst] Error 2
make: *** [source.inst] Error 2
From e.m.giordano at emagsoftware.it  Sat Sep 12 14:30:36 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Sep 12 14:30:43 2009
Subject: [Harbour] Warnings
Message-ID: <51A4C25F1561421588ECB655F020BF65@emag>

Warning W8004 ../../../win_com.c 678: 'hCommPort' is assigned a value that 
is never used in function HB_FUN_WIN_COMSETTIMEOUTS
Warning W8004 ../../../win_com.c 699: 'hCommPort' is assigned a value that 
is never used in function HB_FUN_WIN_COMSETQUEUESIZE

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From Istvan.Bisz at t-online.hu  Sat Sep 12 17:11:24 2009
From: Istvan.Bisz at t-online.hu (=?UTF-8?Q?Bisz_Istv=C3=A1n?=)
Date: Sat Sep 12 17:11:49 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12489] trunk/harbour
In-Reply-To: <4AABDA9C.2040901@elart.it>
References: <E1MmVXz-0001k6-8W@3kljzd1.ch3.sourceforge.com>
	<4AABDA9C.2040901@elart.it>
Message-ID: <000c01ca33ed$961ba3e0$c252eba0$@Bisz@t-online.hu>

Hi Viktor,

Great, the 'mingw' auto-detection works now on 'Fedora 11', thank you.

Best regards,
Istv?n


-----Original Message-----
From: elart [mailto:elart@elart.it] 
Sent: 2009. szeptember 12. 19:30
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] SF.net SVN: harbour-project:[12489] trunk/harbour

On 09/12/2009 06:33 PM, vszakats@users.sourceforge.net wrote:
> Revision: 12489
>            http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12489&view=rev
> Author:   vszakats
> Date:     2009-09-12 16:33:58 +0000 (Sat, 12 Sep 2009)
>
> Log Message:
> -----------
> 2009-09-12 18:33 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>    * external/pcre/pcreglob.c
>      ! Fixed fatal mistake in prev commit.
>
>    * config/global.mk
>      + Extended generic mingw autodetection on *nix to work on Fedora 11.
>        Please test. On Fedora 11 HB_CCPREFIX is i686-pc-mingw32-
>
> Modified Paths:
> --------------
>      trunk/harbour/ChangeLog
>      trunk/harbour/config/global.mk
>      trunk/harbour/external/pcre/pcreglob.c
>
>
> This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

Hi Viktor i get this error on Ubuntu 9.04 compiling Harbour for Win (no 
error for Harbour for Linux)

! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh
! HB_HOST_PLAT: linux (x86)  HB_SHELL: sh
! HB_PLATFORM: win (x86)
! HB_COMPILER: mingw (autodetected: /usr/bin/)
! HB_BIN_COMPILE not specified. Automatically set to: 
/home/danilo/src/harbour/bin/linux/gcc
! Component: 'zlib' found in /home/danilo/src/harbour/external/zlib (local)
! Component: 'pcre' found in /home/danilo/src/harbour/external/pcre (local)
! Component: 'openssl' not found
! Component: 'gpm' not supported on win platform
! Component: 'slang' not found
! Component: 'curses' not found
! Component: 'x11' not found
! Component: 'wattcp/watt-32' not supported on win platform
! HB_INSTALL_PREFIX automatically set to: /home/danilo/src/harbour
! REVISION: 12489
make[2]: Nothing to be done for `all'.
make[1]: Nothing to be done for `all'.
make[3]: `../../../../../lib/win/mingw/liblibhpdf.a' is up to date.
make[3]: `../../../../../lib/win/mingw/liblibpng.a' is up to date.
/usr/bin/i586-mingw32msvc-gcc  -I. -I../../../../../include  -O3 
-fomit-frame-pointer -march=i586 -mtune=pentiumpro  -DPCRE_STATIC 
-DHAVE_CONFIG_H  -opcreglob.o -c ../../../pcreglob.c
/usr/bin/i586-mingw32msvc-ar   rcs 
../../../../../lib/win/mingw/libhbpcre.a chartabs.o pcrecomp.o 
pcreconf.o pcredfa.o pcreexec.o pcrefinf.o pcreget.o pcreglob.o 
pcreinfo.o pcremktb.o pcrenewl.o pcreoutf.o pcrerefc.o pcrestud.o 
pcretabs.o pcretryf.o pcreucd.o pcrever.o pcrevutf.o pcrexcls.o || rm -f 
../../../../../lib/win/mingw/libhbpcre.a
make[3]: `../../../../../lib/win/mingw/libsqlite3.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbzlib.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbcommon.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbnortl.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbpp.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbcplr.a' is up to date.
make[3]: `../../../../../bin/win/mingw/harbour.exe' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbrtl.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libgtcgi.a' is up to date.
! 'gtcrs' library skipped (component not found)
! 'gtdos' library skipped (platform not supported)
make[4]: `../../../../../../lib/win/mingw/libgtgui.a' is up to date.
! 'gtos2' library skipped (platform not supported)
make[4]: `../../../../../../lib/win/mingw/libgtpca.a' is up to date.
! 'gtsln' library skipped (component not found)
make[4]: `../../../../../../lib/win/mingw/libgtstd.a' is up to date.
! 'gttrm' library skipped (platform or compiler not supported)
make[4]: `../../../../../../lib/win/mingw/libgtwin.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libgtwvt.a' is up to date.
! 'gtxwc' library skipped (component not found)
make[3]: `../../../../../lib/win/mingw/libhbvm.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbmainstd.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbmainwin.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbmaindllh.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbmaindllp.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbvmmt.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbmacro.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbcpage.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhblang.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbrdd.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbnulrdd.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/librddntx.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/librddnsx.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/librddcdx.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/librddfpt.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbsix.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbhsx.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbusrrdd.a' is up to date.
make[4]: `../../../../../../../lib/win/mingw/libhbuddall.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbextern.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbdebug.a' is up to date.
/usr/bin/i586-mingw32msvc-gcc -shared -L../../../../../lib/win/mingw  -o 
../../../../../bin/win/mingw/harbour-20.dll __dyn__.tmp -lhbpcre 
-lhbzlib -lkernel32 -luser32 -lws2_32 -ladvapi32 -lgdi32 
-Wl,--out-implib,../../../../../lib/win/mingw/libharbour-20.a,--output-def,../../../../../bin/win/mingw/harbour-20.def
Creating library file: ../../../../../lib/win/mingw/libharbour-20.a
../../../../../source/common/obj/win/mingw/hbffind.o:hbffind.c:(.text+0x474): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0xc8): undefined 
reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0x2f7): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0x10f1): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0xaa): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0xc6): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0x18c): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0x2cb): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/hbproces.o:hbproces.c:(.text+0x180): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/hbproces.o:hbproces.c:(.text+0x5bd): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/hbrunfun.o:hbrunfun.c:(.text+0x58): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/net.o:net.c:(.text+0xc1): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/net.o:net.c:(.text+0x121): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/philes.o:philes.c:(.text+0x5fd): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/run.o:run.c:(.text+0x3f): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/vm/obj/win/mingw/cmdarg.o:cmdarg.c:(.text+0x3b9): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/vm/obj/win/mingw/cmdarg.o:cmdarg.c:(.text+0x796): 
undefined reference to `_hb_osDecodeCP'
collect2: ld returned 1 exit status
make[3]: *** [harbour-20.dll] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [dynlib] Error 2
make: *** [source] Error 2
! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh install
! HB_INSTALL_PREFIX: /tmp/hbwin
! HB_HOST_PLAT: linux (x86)  HB_SHELL: sh
! HB_PLATFORM: win (x86)
! HB_COMPILER: mingw (autodetected: /usr/bin/)
! HB_BIN_COMPILE not specified. Automatically set to: 
/home/danilo/src/harbour/bin/linux/gcc
! Component: 'zlib' found in /home/danilo/src/harbour/external/zlib (local)
! Component: 'pcre' found in /home/danilo/src/harbour/external/pcre (local)
! Component: 'openssl' not found
! Component: 'gpm' not supported on win platform
! Component: 'slang' not found
! Component: 'curses' not found
! Component: 'x11' not found
! Component: 'wattcp/watt-32' not supported on win platform
! REVISION: 12489
! Installing c_std.txt on /tmp/hbwin/doc
! Installing class_tp.txt on /tmp/hbwin/doc
! Installing cmdline.txt on /tmp/hbwin/doc
! Installing cmpopt.txt on /tmp/hbwin/doc
! Installing codebloc.txt on /tmp/hbwin/doc
! Installing codestyl.txt on /tmp/hbwin/doc
! Installing destruct.txt on /tmp/hbwin/doc
! Installing dirstruc.txt on /tmp/hbwin/doc
! Installing gmake.txt on /tmp/hbwin/doc
! Installing gtapi.txt on /tmp/hbwin/doc
! Installing hdr_tpl.txt on /tmp/hbwin/doc
! Installing howtobld.txt on /tmp/hbwin/doc
! Installing howtorel.txt on /tmp/hbwin/doc
! Installing howtosvn.txt on /tmp/hbwin/doc
! Installing inet.txt on /tmp/hbwin/doc
! Installing pcode.txt on /tmp/hbwin/doc
! Installing pp.txt on /tmp/hbwin/doc
! Installing pragma.txt on /tmp/hbwin/doc
! Installing readme.txt on /tmp/hbwin/doc
! Installing statics.txt on /tmp/hbwin/doc
! Installing tracing.txt on /tmp/hbwin/doc
! Installing transfrm.txt on /tmp/hbwin/doc
! Installing vm.txt on /tmp/hbwin/doc
! Installing whatsnew.txt on /tmp/hbwin/doc
! Installing windll.txt on /tmp/hbwin/doc
! Installing array.txt on /tmp/hbwin/doc/en-EN
! Installing binnum.txt on /tmp/hbwin/doc/en-EN
! Installing browse.txt on /tmp/hbwin/doc/en-EN
! Installing clipper.txt on /tmp/hbwin/doc/en-EN
! Installing cmdline.txt on /tmp/hbwin/doc/en-EN
! Installing command.txt on /tmp/hbwin/doc/en-EN
! Installing compiler.txt on /tmp/hbwin/doc/en-EN
! Installing datetime.txt on /tmp/hbwin/doc/en-EN
! Installing dbdelim.txt on /tmp/hbwin/doc/en-EN
! Installing dbsdf.txt on /tmp/hbwin/doc/en-EN
! Installing dbstrux.txt on /tmp/hbwin/doc/en-EN
! Installing dir.txt on /tmp/hbwin/doc/en-EN
! Installing diskspac.txt on /tmp/hbwin/doc/en-EN
! Installing errsys.txt on /tmp/hbwin/doc/en-EN
! Installing eval.txt on /tmp/hbwin/doc/en-EN
! Installing file.txt on /tmp/hbwin/doc/en-EN
! Installing garbage.txt on /tmp/hbwin/doc/en-EN
! Installing gnulice.txt on /tmp/hbwin/doc/en-EN
! Installing gtslang.txt on /tmp/hbwin/doc/en-EN
! Installing harbext.txt on /tmp/hbwin/doc/en-EN
! Installing hb_api.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apier.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apifs.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apigt.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apiit.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apiln.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apird.txt on /tmp/hbwin/doc/en-EN
! Installing hb_compa.txt on /tmp/hbwin/doc/en-EN
! Installing hb_date.txt on /tmp/hbwin/doc/en-EN
! Installing hb_macro.txt on /tmp/hbwin/doc/en-EN
! Installing hb_set.txt on /tmp/hbwin/doc/en-EN
! Installing hb_vm.txt on /tmp/hbwin/doc/en-EN
! Installing hvm.txt on /tmp/hbwin/doc/en-EN
! Installing idle.txt on /tmp/hbwin/doc/en-EN
! Installing input.txt on /tmp/hbwin/doc/en-EN
! Installing lang.txt on /tmp/hbwin/doc/en-EN
! Installing license.txt on /tmp/hbwin/doc/en-EN
! Installing macro.txt on /tmp/hbwin/doc/en-EN
! Installing math.txt on /tmp/hbwin/doc/en-EN
! Installing memo.txt on /tmp/hbwin/doc/en-EN
! Installing memvar2.txt on /tmp/hbwin/doc/en-EN
! Installing menu.txt on /tmp/hbwin/doc/en-EN
! Installing misc.txt on /tmp/hbwin/doc/en-EN
! Installing nation.txt on /tmp/hbwin/doc/en-EN
! Installing objfunc.txt on /tmp/hbwin/doc/en-EN
! Installing rdd.txt on /tmp/hbwin/doc/en-EN
! Installing rdddb.txt on /tmp/hbwin/doc/en-EN
! Installing rddmisc.txt on /tmp/hbwin/doc/en-EN
! Installing rddord.txt on /tmp/hbwin/doc/en-EN
! Installing readme.txt on /tmp/hbwin/doc/en-EN
! Installing sayget.txt on /tmp/hbwin/doc/en-EN
! Installing set.txt on /tmp/hbwin/doc/en-EN
! Installing setmode.txt on /tmp/hbwin/doc/en-EN
! Installing string.txt on /tmp/hbwin/doc/en-EN
! Installing strotype.txt on /tmp/hbwin/doc/en-EN
! Installing subcodes.txt on /tmp/hbwin/doc/en-EN
! Installing tbrowse.txt on /tmp/hbwin/doc/en-EN
! Installing tclass.txt on /tmp/hbwin/doc/en-EN
! Installing terminal.txt on /tmp/hbwin/doc/en-EN
! Installing tgetlist.txt on /tmp/hbwin/doc/en-EN
! Installing tlabel.txt on /tmp/hbwin/doc/en-EN
! Installing treport.txt on /tmp/hbwin/doc/en-EN
! Installing var.txt on /tmp/hbwin/doc/en-EN
! Installing clipdefs.h on /tmp/hbwin/include
! Installing extend.h on /tmp/hbwin/include
! Installing hbapi.h on /tmp/hbwin/include
! Installing hbapicdp.h on /tmp/hbwin/include
! Installing hbapicls.h on /tmp/hbwin/include
! Installing hbapidbg.h on /tmp/hbwin/include
! Installing hbapierr.h on /tmp/hbwin/include
! Installing hbapifs.h on /tmp/hbwin/include
! Installing hbapigt.h on /tmp/hbwin/include
! Installing hbapiitm.h on /tmp/hbwin/include
! Installing hbapilng.h on /tmp/hbwin/include
! Installing hbapirdd.h on /tmp/hbwin/include
! Installing hbassert.h on /tmp/hbwin/include
! Installing hbatomic.h on /tmp/hbwin/include
! Installing hbchksum.h on /tmp/hbwin/include
! Installing hbcomp.h on /tmp/hbwin/include
! Installing hbcompdf.h on /tmp/hbwin/include
! Installing hbdate.h on /tmp/hbwin/include
! Installing hbdbf.h on /tmp/hbwin/include
! Installing hbdbferr.h on /tmp/hbwin/include
! Installing hbdbsort.h on /tmp/hbwin/include
! Installing hbdefs.h on /tmp/hbwin/include
! Installing hberrors.h on /tmp/hbwin/include
! Installing hbexprop.h on /tmp/hbwin/include
! Installing hbgtcore.h on /tmp/hbwin/include
! Installing hbhash.h on /tmp/hbwin/include
! Installing hbinit.h on /tmp/hbwin/include
! Installing hbmacro.h on /tmp/hbwin/include
! Installing hbmath.h on /tmp/hbwin/include
! Installing hbpcode.h on /tmp/hbwin/include
! Installing hbpp.h on /tmp/hbwin/include
! Installing hbrddcdx.h on /tmp/hbwin/include
! Installing hbrdddbf.h on /tmp/hbwin/include
! Installing hbrddfpt.h on /tmp/hbwin/include
! Installing hbrdddel.h on /tmp/hbwin/include
! Installing hbrddntx.h on /tmp/hbwin/include
! Installing hbrddsdf.h on /tmp/hbwin/include
! Installing hbrddnsx.h on /tmp/hbwin/include
! Installing hbregex.h on /tmp/hbwin/include
! Installing hbset.h on /tmp/hbwin/include
! Installing hbsetup.h on /tmp/hbwin/include
! Installing hbsocket.h on /tmp/hbwin/include
! Installing hbstack.h on /tmp/hbwin/include
! Installing hbsxfunc.h on /tmp/hbwin/include
! Installing hbthread.h on /tmp/hbwin/include
! Installing hbtrace.h on /tmp/hbwin/include
! Installing hbtypes.h on /tmp/hbwin/include
! Installing hbver.h on /tmp/hbwin/include
! Installing hbvm.h on /tmp/hbwin/include
! Installing hbvmint.h on /tmp/hbwin/include
! Installing hbvmopt.h on /tmp/hbwin/include
! Installing hbvmpub.h on /tmp/hbwin/include
! Installing hbxvm.h on /tmp/hbwin/include
! Installing hbwince.h on /tmp/hbwin/include
! Installing hbzlib.h on /tmp/hbwin/include
! Installing hb_io.h on /tmp/hbwin/include
! Installing achoice.ch on /tmp/hbwin/include
! Installing assert.ch on /tmp/hbwin/include
! Installing box.ch on /tmp/hbwin/include
! Installing button.ch on /tmp/hbwin/include
! Installing blob.ch on /tmp/hbwin/include
! Installing color.ch on /tmp/hbwin/include
! Installing common.ch on /tmp/hbwin/include
! Installing dbedit.ch on /tmp/hbwin/include
! Installing dbinfo.ch on /tmp/hbwin/include
! Installing dbstruct.ch on /tmp/hbwin/include
! Installing directry.ch on /tmp/hbwin/include
! Installing error.ch on /tmp/hbwin/include
! Installing fileio.ch on /tmp/hbwin/include
! Installing getexit.ch on /tmp/hbwin/include
! Installing hbclass.ch on /tmp/hbwin/include
! Installing hbdebug.ch on /tmp/hbwin/include
! Installing hbextcdp.ch on /tmp/hbwin/include
! Installing hbextlng.ch on /tmp/hbwin/include
! Installing hbextern.ch on /tmp/hbwin/include
! Installing hbgfx.ch on /tmp/hbwin/include
! Installing hbgfxdef.ch on /tmp/hbwin/include
! Installing hbgtinfo.ch on /tmp/hbwin/include
! Installing hbhrb.ch on /tmp/hbwin/include
! Installing hbinkey.ch on /tmp/hbwin/include
! Installing hblang.ch on /tmp/hbwin/include
! Installing hbmacro.ch on /tmp/hbwin/include
! Installing hbmath.ch on /tmp/hbwin/include
! Installing hbmemory.ch on /tmp/hbwin/include
! Installing hbmemvar.ch on /tmp/hbwin/include
! Installing hboo.ch on /tmp/hbwin/include
! Installing hbpers.ch on /tmp/hbwin/include
! Installing hbsetup.ch on /tmp/hbwin/include
! Installing hbsix.ch on /tmp/hbwin/include
! Installing hbsocket.ch on /tmp/hbwin/include
! Installing hbstdgen.ch on /tmp/hbwin/include
! Installing hbthread.ch on /tmp/hbwin/include
! Installing hbusrrdd.ch on /tmp/hbwin/include
! Installing hbver.ch on /tmp/hbwin/include
! Installing hbzlib.ch on /tmp/hbwin/include
! Installing inkey.ch on /tmp/hbwin/include
! Installing memoedit.ch on /tmp/hbwin/include
! Installing ord.ch on /tmp/hbwin/include
! Installing rddsys.ch on /tmp/hbwin/include
! Installing reserved.ch on /tmp/hbwin/include
! Installing set.ch on /tmp/hbwin/include
! Installing setcurs.ch on /tmp/hbwin/include
! Installing simpleio.ch on /tmp/hbwin/include
! Installing std.ch on /tmp/hbwin/include
! Installing hbsxdef.ch on /tmp/hbwin/include
! Installing tbrowse.ch on /tmp/hbwin/include
! Installing error.api on /tmp/hbwin/include
! Installing extend.api on /tmp/hbwin/include
! Installing filesys.api on /tmp/hbwin/include
! Installing fm.api on /tmp/hbwin/include
! Installing gt.api on /tmp/hbwin/include
! Installing hbundoc.api on /tmp/hbwin/include
! Installing item.api on /tmp/hbwin/include
! Installing rdd.api on /tmp/hbwin/include
! Installing vm.api on /tmp/hbwin/include
make[3]: `../../../../../lib/win/mingw/liblibhpdf.a' is up to date.
! Installing ../../lib/win/mingw/liblibhpdf.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/liblibpng.a' is up to date.
! Installing ../../lib/win/mingw/liblibpng.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbpcre.a' is up to date.
! Installing ../../lib/win/mingw/libhbpcre.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libsqlite3.a' is up to date.
! Installing ../../lib/win/mingw/libsqlite3.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbzlib.a' is up to date.
! Installing ../../lib/win/mingw/libhbzlib.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbcommon.a' is up to date.
! Installing ../../lib/win/mingw/libhbcommon.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbnortl.a' is up to date.
! Installing ../../lib/win/mingw/libhbnortl.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbpp.a' is up to date.
! Installing ../../lib/win/mingw/libhbpp.a on /tmp/hbwin/lib/win/mingw
! Installing ../../bin/win/mingw/hbpp.exe on /tmp/hbwin/bin
make[3]: `../../../../../lib/win/mingw/libhbcplr.a' is up to date.
! Installing ../../lib/win/mingw/libhbcplr.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../bin/win/mingw/harbour.exe' is up to date.
! Installing ../../bin/win/mingw/harbour.exe on /tmp/hbwin/bin
make[3]: `../../../../../lib/win/mingw/libhbrtl.a' is up to date.
! Installing ../../lib/win/mingw/libhbrtl.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libgtcgi.a' is up to date.
! Installing ../../../lib/win/mingw/libgtcgi.a on /tmp/hbwin/lib/win/mingw
! 'gtcrs' library skipped (component not found)
! 'gtdos' library skipped (platform not supported)
make[4]: `../../../../../../lib/win/mingw/libgtgui.a' is up to date.
! Installing ../../../lib/win/mingw/libgtgui.a on /tmp/hbwin/lib/win/mingw
! 'gtos2' library skipped (platform not supported)
make[4]: `../../../../../../lib/win/mingw/libgtpca.a' is up to date.
! Installing ../../../lib/win/mingw/libgtpca.a on /tmp/hbwin/lib/win/mingw
! 'gtsln' library skipped (component not found)
make[4]: `../../../../../../lib/win/mingw/libgtstd.a' is up to date.
! Installing ../../../lib/win/mingw/libgtstd.a on /tmp/hbwin/lib/win/mingw
! 'gttrm' library skipped (platform or compiler not supported)
make[4]: `../../../../../../lib/win/mingw/libgtwin.a' is up to date.
! Installing ../../../lib/win/mingw/libgtwin.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libgtwvt.a' is up to date.
! Installing ../../../lib/win/mingw/libgtwvt.a on /tmp/hbwin/lib/win/mingw
! 'gtxwc' library skipped (component not found)
make[3]: `../../../../../lib/win/mingw/libhbvm.a' is up to date.
! Installing ../../lib/win/mingw/libhbvm.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbmainstd.a' is up to date.
! Installing ../../../lib/win/mingw/libhbmainstd.a on 
/tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbmainwin.a' is up to date.
! Installing ../../../lib/win/mingw/libhbmainwin.a on 
/tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbmaindllh.a' is up to date.
! Installing ../../../lib/win/mingw/libhbmaindllh.a on 
/tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbmaindllp.a' is up to date.
! Installing ../../../lib/win/mingw/libhbmaindllp.a on 
/tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbvmmt.a' is up to date.
! Installing ../../../lib/win/mingw/libhbvmmt.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbmacro.a' is up to date.
! Installing ../../lib/win/mingw/libhbmacro.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbcpage.a' is up to date.
! Installing ../../lib/win/mingw/libhbcpage.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhblang.a' is up to date.
! Installing ../../lib/win/mingw/libhblang.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbrdd.a' is up to date.
! Installing ../../lib/win/mingw/libhbrdd.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbnulrdd.a' is up to date.
! Installing ../../../lib/win/mingw/libhbnulrdd.a on 
/tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/librddntx.a' is up to date.
! Installing ../../../lib/win/mingw/librddntx.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/librddnsx.a' is up to date.
! Installing ../../../lib/win/mingw/librddnsx.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/librddcdx.a' is up to date.
! Installing ../../../lib/win/mingw/librddcdx.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/librddfpt.a' is up to date.
! Installing ../../../lib/win/mingw/librddfpt.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbsix.a' is up to date.
! Installing ../../../lib/win/mingw/libhbsix.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbhsx.a' is up to date.
! Installing ../../../lib/win/mingw/libhbhsx.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbusrrdd.a' is up to date.
! Installing ../../../lib/win/mingw/libhbusrrdd.a on 
/tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../../lib/win/mingw/libhbuddall.a' is up to date.
! Installing ../../../../lib/win/mingw/libhbuddall.a on 
/tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbextern.a' is up to date.
! Installing ../../lib/win/mingw/libhbextern.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbdebug.a' is up to date.
! Installing ../../lib/win/mingw/libhbdebug.a on /tmp/hbwin/lib/win/mingw
/usr/bin/i586-mingw32msvc-gcc -shared -L../../../../../lib/win/mingw  -o 
../../../../../bin/win/mingw/harbour-20.dll __dyn__.tmp -lhbpcre 
-lhbzlib -lkernel32 -luser32 -lws2_32 -ladvapi32 -lgdi32 
-Wl,--out-implib,../../../../../lib/win/mingw/libharbour-20.a,--output-def,../../../../../bin/win/mingw/harbour-20.def
Creating library file: ../../../../../lib/win/mingw/libharbour-20.a
../../../../../source/common/obj/win/mingw/hbffind.o:hbffind.c:(.text+0x474): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0xc8): undefined 
reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0x2f7): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0x10f1): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0xaa): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0xc6): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0x18c): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0x2cb): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/hbproces.o:hbproces.c:(.text+0x180): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/hbproces.o:hbproces.c:(.text+0x5bd): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/hbrunfun.o:hbrunfun.c:(.text+0x58): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/net.o:net.c:(.text+0xc1): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/net.o:net.c:(.text+0x121): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/philes.o:philes.c:(.text+0x5fd): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/run.o:run.c:(.text+0x3f): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/vm/obj/win/mingw/cmdarg.o:cmdarg.c:(.text+0x3b9): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/vm/obj/win/mingw/cmdarg.o:cmdarg.c:(.text+0x796): 
undefined reference to `_hb_osDecodeCP'
collect2: ld returned 1 exit status
make[3]: *** [harbour-20.dll] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [dynlib.inst] Error 2
make: *** [source.inst] Error 2


From ice at extreme.hu  Sun Sep 13 07:42:47 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Sun Sep 13 07:42:55 2009
Subject: [Harbour] two more watcom failures
Message-ID: <alpine.GSO.2.00.0909131335200.13711@dawn.royalcomp.hu>


hi,

after viktor's recent watcom treat, things have gotten much better, 
the build log for linux x os2 is attached (as it's big), the other, 
native linux, is inlined here.

it's not entirely impossible i've gotten hb_build_extdef wrong, at 
least not finding pthread.h would indicate that, but if i let it be 
the default yes, it's even worse.

HB_BUILD_DEBUG=yes
WATCOM=/opt/ow
HB_CONTRIBLIBS=no
HB_BUILD_EXTDEF=no
HB_COMMERCE=yes
HB_INSTALL_PREFIX=/home/ice/w/xhb/hbci/inst/linux/watcom/cpp
HB_COMPILER=watcom
HB_BUILD_MODE=cpp
HB_BUILD_OPTIM=no
HB_PLATFORM=linux
INCLUDE=/opt/ow/lh
===
! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh   
! HB_INSTALL_PREFIX: /home/ice/w/xhb/hbci/inst/linux/watcom/cpp
! HB_BUILD_DEBUG: yes
! HB_BUILD_OPTIM: no
! HB_BUILD_MODE: cpp
! HB_CONTRIBLIBS: no
! HB_HOST_PLAT: linux (x86_64)  HB_SHELL: sh
! HB_PLATFORM: linux (x86_64) 
! HB_COMPILER: watcom 
! Component: 'zlib' found in /home/ice/w/xhb/hbci/harbour-build/external/zlib (local)
! Component: 'pcre' found in /home/ice/w/xhb/hbci/harbour-build/external/pcre (local)
! Component: 'openssl' not supported with watcom compiler
! Component: 'gpm' explicitly disabled
! Component: 'slang' explicitly disabled
! Component: 'curses' not found
! Component: 'x11' not found
! Component: 'wattcp/watt-32' not supported on linux platform
! REVISION: 12489
make[2]: Nothing to be done for `all'.
make[1]: Nothing to be done for `all'.
[...]
wpp386  -zq -bt=linux -3r -i. -i../../../../../include -d2  -DHB_TR_LEVEL_DEBUG  -DPCRE_STATIC -DHAVE_CONFIG_H  -fo=pcrevutf.o  ../../../pcrevutf.c
wpp386  -zq -bt=linux -3r -i. -i../../../../../include -d2  -DHB_TR_LEVEL_DEBUG  -DPCRE_STATIC -DHAVE_CONFIG_H  -fo=pcrexcls.o  ../../../pcrexcls.c
wlib -q -p=72 -c -n  ../../../../../lib/linux/watcom/hbpcre.lib -+chartabs.o -+pcrecomp.o -+pcreconf.o -+pcredfa.o -+pcreexec.o -+pcrefinf.o -+pcreget.o -+pcreglob.o -+pcreinfo.o -+pcremktb.o -+pcrenewl.o -+pcreoutf.o -+pcrerefc.o -+pcrestud.o -+pcretabs.o -+pcretryf.o -+pcreucd.o -+pcrever.o -+pcrevutf.o -+pcrexcls.o
wcc386  -zq -bt=linux -3r -i. -i../../../../../include -d2  -DHB_TR_LEVEL_DEBUG   -fo=sqlite3.o  ../../../sqlite3.c
../../../sqlite3.c(14690): Error! E1055: Unable to open 'pthread.h'
../../../sqlite3.c(14697): Error! E1022: Missing or misspelled data type near 'pthread_mutex_t'
../../../sqlite3.c(14700): Error! E1022: Missing or misspelled data type near 'pthread_t'
../../../sqlite3.c(14785): Error! E1011: Symbol 'PTHREAD_MUTEX_INITIALIZER' has not been declared
../../../sqlite3.c(14785): Error! E1054: Expression must be constant
../../../sqlite3.c(14785): Error! E1011: Symbol 'pthread_t' has not been declared
../../../sqlite3.c(14785): Error! E1054: Expression must be constant
../../../sqlite3.c(14785): Error! E1009: Expecting ',' but found '0'
../../../sqlite3.c(14786): Error! E1054: Expression must be constant
../../../sqlite3.c(14786): Error! E1054: Expression must be constant
../../../sqlite3.c(14786): Error! E1009: Expecting ',' but found '0'
../../../sqlite3.c(14787): Error! E1054: Expression must be constant
../../../sqlite3.c(14787): Error! E1054: Expression must be constant
../../../sqlite3.c(14787): Error! E1009: Expecting ',' but found '0'
../../../sqlite3.c(14788): Error! E1054: Expression must be constant
../../../sqlite3.c(14788): Error! E1054: Expression must be constant
../../../sqlite3.c(14788): Error! E1009: Expecting ',' but found '0'
../../../sqlite3.c(14789): Error! E1054: Expression must be constant
../../../sqlite3.c(14789): Error! E1054: Expression must be constant
../../../sqlite3.c(14789): Error! E1009: Expecting ',' but found '0'
../../../sqlite3.c(14790): Error! E1147: Too many errors: compilation aborted
make[3]: *** [sqlite3.o] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [sqlite3] Error 2
make: *** [external] Error 2

-- 
[-]

mkdir /nonexistent
-------------- next part --------------
A non-text attachment was scrubbed...
Name: log_os2_watcom_cpp.gz
Type: application/octet-stream
Size: 16096 bytes
Desc: 
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090913/00646c66/log_os2_watcom_cpp.obj
From ice at extreme.hu  Sun Sep 13 07:55:31 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Sun Sep 13 07:55:39 2009
Subject: [Harbour] linux x mingw strange behaviour
Message-ID: <alpine.GSO.2.00.0909131348230.13711@dawn.royalcomp.hu>


hi,

if i specify HB_PLATFORM=win, compiler is autodetected fine to be 
mingw, and all is fine.

if, however, i explicitly specify HB_COMPILER=mingw (along with 
HB_PLATFORM=win of course(?)), all hell breaks loose. it looks as if 
compile commands were *mostly* set (ie. switches and stuff are almost 
fine, some pathes are somewhat off), but the compiler itself is way 
off (gcc instead of i586-mingw32msvc-gcc).


tinky:~/w/xhb/hbci/harbour-build$ export HB_PLATFORM=win
tinky:~/w/xhb/hbci/harbour-build$ make
! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh   
! HB_HOST_PLAT: linux (x86_64)  HB_SHELL: sh
! HB_PLATFORM: win (x86) 
! HB_COMPILER: mingw (autodetected: /usr/bin/)
! HB_BIN_COMPILE not specified. Automatically set to: /usr/bin
! Component: 'zlib' found in /home/ice/w/xhb/hbci/harbour-build/external/zlib (local)
! Component: 'pcre' found in /home/ice/w/xhb/hbci/harbour-build/external/pcre (local)
! Component: 'openssl' not found
! Component: 'gpm' not supported on win platform
! Component: 'slang' not found
! Component: 'curses' not found
! Component: 'x11' not found
! Component: 'wattcp/watt-32' not supported on win platform
! HB_INSTALL_PREFIX automatically set to: /home/ice/w/xhb/hbci/harbour-build
! REVISION: 12489
make[2]: Nothing to be done for `all'.
make[1]: Nothing to be done for `all'.
/usr/bin/i586-mingw32msvc-gcc  -I. -I../../../../../include  -O3 -fomit-frame-pointer -march=i586 -mtune=pentiumpro  -I/home/ice/w/xhb/hbci/harbour-build/external/zlib -I../../../../../external/libpng  -o_hbhbpdf.o -c ../../../_hbhbpdf.c
/usr/bin/i586-mingw32msvc-gcc  -I. -I../../../../../include  -O3 -fomit-frame-pointer -march=i586 -mtune=pentiumpro  -I/home/ice/w/xhb/hbci/harbour-build/external/zlib -I../../../../../external/libpng  -ohpdfanno.o -c ../../../hpdfanno.c

tinky:~/w/xhb/hbci/harbour-build$ export HB_PLATFORM=win HB_COMPILER=mingw
tinky:~/w/xhb/hbci/harbour-build$ make
! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh   
! HB_HOST_PLAT: linux (x86_64)  HB_SHELL: sh
! HB_PLATFORM: win (x86) 
! HB_COMPILER: mingw 
! HB_BIN_COMPILE not specified. Automatically set to: /usr/bin
! Component: 'zlib' found in /usr/include 
! Component: 'pcre' found in /usr/include 
! Component: 'openssl' found in /usr/include 
! Component: 'gpm' not supported on win platform
! Component: 'slang' found in /usr/include 
! Component: 'curses' found in /usr/include 
! Component: 'x11' found in /usr/include 
! Component: 'wattcp/watt-32' not supported on win platform
! HB_INSTALL_PREFIX automatically set to: /home/ice/w/xhb/hbci/harbour-build
! REVISION: 12489
make[2]: Nothing to be done for `all'.
make[1]: Nothing to be done for `all'.
gcc  -I. -I../../../../../include  -O3 -fomit-frame-pointer -march=i586 -mtune=pentiumpro  -I/usr/include -I/usr/include  -ohpdfdict.o -c ../../../hpdfdict.c
../../../hpdfdict.c:1: error: CPU you selected does not support x86-64 instruction set
../../../hpdfdict.c:1: error: CPU you selected does not support x86-64 instruction set
make[3]: *** [hpdfdict.o] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [libhpdf] Error 2
make: *** [external] Error 2


-- 
[-]

mkdir /nonexistent
From Istvan.Bisz at t-online.hu  Sun Sep 13 08:11:38 2009
From: Istvan.Bisz at t-online.hu (=?UTF-8?Q?Bisz_Istv=C3=A1n?=)
Date: Sun Sep 13 08:12:50 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12489] trunk/harbour
In-Reply-To: <000c01ca33ed$961ba3e0$c252eba0$@Bisz@t-online.hu>
References: <E1MmVXz-0001k6-8W@3kljzd1.ch3.sourceforge.com>	<4AABDA9C.2040901@elart.it>
	<000c01ca33ed$961ba3e0$c252eba0$@Bisz@t-online.hu>
Message-ID: <001201ca346b$58ef6730$0ace3590$@Bisz@t-online.hu>

Hi,

I continued the cross building mechanism testing...

My goal was to build the 'demoqt.exe' and 'demoxbp.exe' executable under wine.
1. step was the copying of the 'qt' folder of the qtsdk from 'Vista' to 'Fedora 11' under '/opt/Qtwin-4.5.2' (Windows version).
2. step was the 'harbour' cross building with the following (now with the 'mingw' auto-detection) shell script:

export HB_INC_QT=/opt/Qtwin-4.5.2/qt/include
export HB_PLATFORM=win
export HB_BIN_COMPILE=/usr/local/bin
export HB_INSTALL_PREFIX=/usr/local/windows
cd ./harbour
make clean install 1>../w1.log 2>../w2.log
cd ..
 
3. step is building of the 'demoqt.exe' with the following shell script:

export HB_PLATFORM=win
export HB_CCPATH=/usr/bin
export HB_CCPREFIX=i686-pc-mingw32-
export HB_BIN_INSTALL=/usr/local/windows/bin
export HB_INC_INSTALL=/usr/local/windows/include
export HB_LIB_INSTALL=/usr/local/windows/lib/win/mingw
export HB_USER_LIBPATHS=/opt/Qtwin-4.5.2/qt/lib

hbmk2 -trace demoqt 1>demoqt.txt

generating the output:
 
hbmk2: Processing local make script: hbmk.hbm                                  
hbmk2: Processing configuration: /usr/local/bin/hbmk.cfg                       
hbmk2: Harbour compiler command (internal):                                    
(/usr/local/bin/harbour.exe) -n2 demoqt.prg -i/usr/local/windows/include -i.. -undef:__PLATFORM__LINUX -undef:__PLATFORM__UNIX -D__PLATFORM__WINDOWS
Harbour 2.0.0beta3 (Rev. 12486)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 'demoqt.prg'...

...

Lines 750, Functions/Procedures 20
Generating C source output to 'demoqt.c'... Done.
hbmk2: C compiler command:                                                     
/usr/bin/i686-pc-mingw32-gcc -c -O3 -march=i586 -mtune=pentiumpro -fomit-frame-pointer  -I/usr/local/windows/include -I.. demoqt.c /tmp/hbmk_9jem9x.c
hbmk2: Linker command:                                                         
/usr/bin/i686-pc-mingw32-gcc demoqt.o hbmk_9jem9x.o    -mwindows -Wl,--start-group -lhbqt -lversion -lshlwapi -lQtCore4 -lQtGui4 -lQtNetwork4 -lQtWebKit4 -lsupc++ -lhbextern -lhbdebug -lhbvm -lhbrtl -lhblang -lhbcpage -lgtcgi -lgtpca -lgtstd -lgtwin -lgtwvt -lgtgui -lhbrdd -lhbuddall -lhbusrrdd -lrddntx -lrddcdx -lrddnsx -lrddfpt -lhbrdd -lhbhsx -lhbsix -lhbmacro -lhbcplr -lhbpp -lhbcommon -lkernel32 -luser32 -lgdi32 -ladvapi32 -lws2_32 -lwinspool -lcomctl32 -lcomdlg32 -lshell32 -luuid -lole32 -loleaut32 -lmpr -lwinmm -lmapi32 -limm32 -lmsimg32 -lwininet -lhbpcre -lhbzlib  -Wl,--end-group -odemoqt.exe -L/usr/local/windows/lib/win/mingw -L/opt/Qtwin-4.5.2/qt/lib -L..//lib 


3. step is building of the 'demoxbp.exe' with the following shell script:

export HB_PLATFORM=win
export HB_CCPATH=/usr/bin
export HB_CCPREFIX=i686-pc-mingw32-
export HB_BIN_INSTALL=/usr/local/windows/bin
export HB_INC_INSTALL=/usr/local/windows/include
export HB_LIB_INSTALL=/usr/local/windows/lib/win/mingw
export HB_USER_LIBPATHS=/opt/Qtwin-4.5.2/qt/lib

hbmk2 -trace demoxbp 1>demoxbp.txt

generating the output:

hbmk2: Processing local make script: hbmk.hbm                                  
hbmk2: Processing configuration: /usr/local/bin/hbmk.cfg                       
hbmk2: Harbour compiler command (internal):                                    
(/usr/local/bin/harbour.exe) -n2 demoxbp.prg -w3 -i/usr/local/windows/include -i.. -i../../hbqt -undef:__PLATFORM__LINUX -undef:__PLATFORM__UNIX -D__PLATFORM__WINDOWS
Harbour 2.0.0beta3 (Rev. 12486)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 'demoxbp.prg'...

...

Lines 3336, Functions/Procedures 49
Generating C source output to 'demoxbp.c'... Done.
hbmk2: C compiler command:                                                     
/usr/bin/i686-pc-mingw32-gcc -c -O3 -march=i586 -mtune=pentiumpro -fomit-frame-pointer  -I/usr/local/windows/include -I.. -I../../hbqt demoxbp.c /tmp/hbmk_gm7mwj.c
hbmk2: Linker command:                                                         
/usr/bin/i686-pc-mingw32-gcc demoxbp.o hbmk_gm7mwj.o    -mwindows -Wl,--start-group -lhbxbp -lhbqt -lversion -lshlwapi -lQtCore4 -lQtGui4 -lQtNetwork4 -lQtWebKit4 -lsupc++ -lhbextern -lhbdebug -lhbvm -lhbrtl -lhblang -lhbcpage -lgtcgi -lgtpca -lgtstd -lgtwin -lgtwvt -lgtgui -lhbrdd -lhbuddall -lhbusrrdd -lrddntx -lrddcdx -lrddnsx -lrddfpt -lhbrdd -lhbhsx -lhbsix -lhbmacro -lhbcplr -lhbpp -lhbcommon -lkernel32 -luser32 -lgdi32 -ladvapi32 -lws2_32 -lwinspool -lcomctl32 -lcomdlg32 -lshell32 -luuid -lole32 -loleaut32 -lmpr -lwinmm -lmapi32 -limm32 -lmsimg32 -lwininet -lhbpcre -lhbzlib  -Wl,--end-group -odemoxbp.exe -L/usr/local/windows/lib/win/mingw -L/opt/Qtwin-4.5.2/qt/lib -L../../hbqt//lib


The generated 'demoqt.exe' and 'demoxbp.ext' together with 'mingwm10.dll' 'QtCore4.dll' 'QtGui4.dll' 'QtNetwork4.dll' 'QtWebKit4.dll' are functional under 'wine' on 'Fedora 11'.
There are some 'not jet implemented (fixme)' messages, but I can't see any crashes.

After copying these files (exe and dll) in a folder on Vista, the two demo programs are fully functional, just the 'demoxbp.exe' produces the same crash as I encountered with the direct 'Vista/mingw32' build. The crash appears at program exiting after playing with some menu points.

Viktor, could you please take a look on the hbmk2 cross-compiler auto detection. Maybe there exist a similar solution with your last commit, thank you.
A second check of the linker '-L../../hbqt//lib ' switch maybe will be useful.
 
Best regards,
Istv?n

-----Original Message-----
From: Bisz Istv?n [mailto:Istvan.Bisz@t-online.hu] 
Sent: 2009. szeptember 12. 23:11
To: elart@elart.it; 'Harbour Project Main Developer List.'
Subject: RE: [Harbour] SF.net SVN: harbour-project:[12489] trunk/harbour

Hi Viktor,

Great, the 'mingw' auto-detection works now on 'Fedora 11', thank you.

Best regards,
Istv?n


-----Original Message-----
From: elart [mailto:elart@elart.it] 
Sent: 2009. szeptember 12. 19:30
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] SF.net SVN: harbour-project:[12489] trunk/harbour

On 09/12/2009 06:33 PM, vszakats@users.sourceforge.net wrote:
> Revision: 12489
>            http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12489&view=rev
> Author:   vszakats
> Date:     2009-09-12 16:33:58 +0000 (Sat, 12 Sep 2009)
>
> Log Message:
> -----------
> 2009-09-12 18:33 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>    * external/pcre/pcreglob.c
>      ! Fixed fatal mistake in prev commit.
>
>    * config/global.mk
>      + Extended generic mingw autodetection on *nix to work on Fedora 11.
>        Please test. On Fedora 11 HB_CCPREFIX is i686-pc-mingw32-
>
> Modified Paths:
> --------------
>      trunk/harbour/ChangeLog
>      trunk/harbour/config/global.mk
>      trunk/harbour/external/pcre/pcreglob.c
>
>
> This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

Hi Viktor i get this error on Ubuntu 9.04 compiling Harbour for Win (no 
error for Harbour for Linux)

! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh
! HB_HOST_PLAT: linux (x86)  HB_SHELL: sh
! HB_PLATFORM: win (x86)
! HB_COMPILER: mingw (autodetected: /usr/bin/)
! HB_BIN_COMPILE not specified. Automatically set to: 
/home/danilo/src/harbour/bin/linux/gcc
! Component: 'zlib' found in /home/danilo/src/harbour/external/zlib (local)
! Component: 'pcre' found in /home/danilo/src/harbour/external/pcre (local)
! Component: 'openssl' not found
! Component: 'gpm' not supported on win platform
! Component: 'slang' not found
! Component: 'curses' not found
! Component: 'x11' not found
! Component: 'wattcp/watt-32' not supported on win platform
! HB_INSTALL_PREFIX automatically set to: /home/danilo/src/harbour
! REVISION: 12489
make[2]: Nothing to be done for `all'.
make[1]: Nothing to be done for `all'.
make[3]: `../../../../../lib/win/mingw/liblibhpdf.a' is up to date.
make[3]: `../../../../../lib/win/mingw/liblibpng.a' is up to date.
/usr/bin/i586-mingw32msvc-gcc  -I. -I../../../../../include  -O3 
-fomit-frame-pointer -march=i586 -mtune=pentiumpro  -DPCRE_STATIC 
-DHAVE_CONFIG_H  -opcreglob.o -c ../../../pcreglob.c
/usr/bin/i586-mingw32msvc-ar   rcs 
../../../../../lib/win/mingw/libhbpcre.a chartabs.o pcrecomp.o 
pcreconf.o pcredfa.o pcreexec.o pcrefinf.o pcreget.o pcreglob.o 
pcreinfo.o pcremktb.o pcrenewl.o pcreoutf.o pcrerefc.o pcrestud.o 
pcretabs.o pcretryf.o pcreucd.o pcrever.o pcrevutf.o pcrexcls.o || rm -f 
../../../../../lib/win/mingw/libhbpcre.a
make[3]: `../../../../../lib/win/mingw/libsqlite3.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbzlib.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbcommon.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbnortl.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbpp.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbcplr.a' is up to date.
make[3]: `../../../../../bin/win/mingw/harbour.exe' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbrtl.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libgtcgi.a' is up to date.
! 'gtcrs' library skipped (component not found)
! 'gtdos' library skipped (platform not supported)
make[4]: `../../../../../../lib/win/mingw/libgtgui.a' is up to date.
! 'gtos2' library skipped (platform not supported)
make[4]: `../../../../../../lib/win/mingw/libgtpca.a' is up to date.
! 'gtsln' library skipped (component not found)
make[4]: `../../../../../../lib/win/mingw/libgtstd.a' is up to date.
! 'gttrm' library skipped (platform or compiler not supported)
make[4]: `../../../../../../lib/win/mingw/libgtwin.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libgtwvt.a' is up to date.
! 'gtxwc' library skipped (component not found)
make[3]: `../../../../../lib/win/mingw/libhbvm.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbmainstd.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbmainwin.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbmaindllh.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbmaindllp.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbvmmt.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbmacro.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbcpage.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhblang.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbrdd.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbnulrdd.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/librddntx.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/librddnsx.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/librddcdx.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/librddfpt.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbsix.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbhsx.a' is up to date.
make[4]: `../../../../../../lib/win/mingw/libhbusrrdd.a' is up to date.
make[4]: `../../../../../../../lib/win/mingw/libhbuddall.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbextern.a' is up to date.
make[3]: `../../../../../lib/win/mingw/libhbdebug.a' is up to date.
/usr/bin/i586-mingw32msvc-gcc -shared -L../../../../../lib/win/mingw  -o 
../../../../../bin/win/mingw/harbour-20.dll __dyn__.tmp -lhbpcre 
-lhbzlib -lkernel32 -luser32 -lws2_32 -ladvapi32 -lgdi32 
-Wl,--out-implib,../../../../../lib/win/mingw/libharbour-20.a,--output-def,../../../../../bin/win/mingw/harbour-20.def
Creating library file: ../../../../../lib/win/mingw/libharbour-20.a
../../../../../source/common/obj/win/mingw/hbffind.o:hbffind.c:(.text+0x474): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0xc8): undefined 
reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0x2f7): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0x10f1): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0xaa): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0xc6): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0x18c): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0x2cb): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/hbproces.o:hbproces.c:(.text+0x180): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/hbproces.o:hbproces.c:(.text+0x5bd): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/hbrunfun.o:hbrunfun.c:(.text+0x58): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/net.o:net.c:(.text+0xc1): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/net.o:net.c:(.text+0x121): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/philes.o:philes.c:(.text+0x5fd): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/run.o:run.c:(.text+0x3f): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/vm/obj/win/mingw/cmdarg.o:cmdarg.c:(.text+0x3b9): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/vm/obj/win/mingw/cmdarg.o:cmdarg.c:(.text+0x796): 
undefined reference to `_hb_osDecodeCP'
collect2: ld returned 1 exit status
make[3]: *** [harbour-20.dll] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [dynlib] Error 2
make: *** [source] Error 2
! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh install
! HB_INSTALL_PREFIX: /tmp/hbwin
! HB_HOST_PLAT: linux (x86)  HB_SHELL: sh
! HB_PLATFORM: win (x86)
! HB_COMPILER: mingw (autodetected: /usr/bin/)
! HB_BIN_COMPILE not specified. Automatically set to: 
/home/danilo/src/harbour/bin/linux/gcc
! Component: 'zlib' found in /home/danilo/src/harbour/external/zlib (local)
! Component: 'pcre' found in /home/danilo/src/harbour/external/pcre (local)
! Component: 'openssl' not found
! Component: 'gpm' not supported on win platform
! Component: 'slang' not found
! Component: 'curses' not found
! Component: 'x11' not found
! Component: 'wattcp/watt-32' not supported on win platform
! REVISION: 12489
! Installing c_std.txt on /tmp/hbwin/doc
! Installing class_tp.txt on /tmp/hbwin/doc
! Installing cmdline.txt on /tmp/hbwin/doc
! Installing cmpopt.txt on /tmp/hbwin/doc
! Installing codebloc.txt on /tmp/hbwin/doc
! Installing codestyl.txt on /tmp/hbwin/doc
! Installing destruct.txt on /tmp/hbwin/doc
! Installing dirstruc.txt on /tmp/hbwin/doc
! Installing gmake.txt on /tmp/hbwin/doc
! Installing gtapi.txt on /tmp/hbwin/doc
! Installing hdr_tpl.txt on /tmp/hbwin/doc
! Installing howtobld.txt on /tmp/hbwin/doc
! Installing howtorel.txt on /tmp/hbwin/doc
! Installing howtosvn.txt on /tmp/hbwin/doc
! Installing inet.txt on /tmp/hbwin/doc
! Installing pcode.txt on /tmp/hbwin/doc
! Installing pp.txt on /tmp/hbwin/doc
! Installing pragma.txt on /tmp/hbwin/doc
! Installing readme.txt on /tmp/hbwin/doc
! Installing statics.txt on /tmp/hbwin/doc
! Installing tracing.txt on /tmp/hbwin/doc
! Installing transfrm.txt on /tmp/hbwin/doc
! Installing vm.txt on /tmp/hbwin/doc
! Installing whatsnew.txt on /tmp/hbwin/doc
! Installing windll.txt on /tmp/hbwin/doc
! Installing array.txt on /tmp/hbwin/doc/en-EN
! Installing binnum.txt on /tmp/hbwin/doc/en-EN
! Installing browse.txt on /tmp/hbwin/doc/en-EN
! Installing clipper.txt on /tmp/hbwin/doc/en-EN
! Installing cmdline.txt on /tmp/hbwin/doc/en-EN
! Installing command.txt on /tmp/hbwin/doc/en-EN
! Installing compiler.txt on /tmp/hbwin/doc/en-EN
! Installing datetime.txt on /tmp/hbwin/doc/en-EN
! Installing dbdelim.txt on /tmp/hbwin/doc/en-EN
! Installing dbsdf.txt on /tmp/hbwin/doc/en-EN
! Installing dbstrux.txt on /tmp/hbwin/doc/en-EN
! Installing dir.txt on /tmp/hbwin/doc/en-EN
! Installing diskspac.txt on /tmp/hbwin/doc/en-EN
! Installing errsys.txt on /tmp/hbwin/doc/en-EN
! Installing eval.txt on /tmp/hbwin/doc/en-EN
! Installing file.txt on /tmp/hbwin/doc/en-EN
! Installing garbage.txt on /tmp/hbwin/doc/en-EN
! Installing gnulice.txt on /tmp/hbwin/doc/en-EN
! Installing gtslang.txt on /tmp/hbwin/doc/en-EN
! Installing harbext.txt on /tmp/hbwin/doc/en-EN
! Installing hb_api.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apier.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apifs.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apigt.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apiit.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apiln.txt on /tmp/hbwin/doc/en-EN
! Installing hb_apird.txt on /tmp/hbwin/doc/en-EN
! Installing hb_compa.txt on /tmp/hbwin/doc/en-EN
! Installing hb_date.txt on /tmp/hbwin/doc/en-EN
! Installing hb_macro.txt on /tmp/hbwin/doc/en-EN
! Installing hb_set.txt on /tmp/hbwin/doc/en-EN
! Installing hb_vm.txt on /tmp/hbwin/doc/en-EN
! Installing hvm.txt on /tmp/hbwin/doc/en-EN
! Installing idle.txt on /tmp/hbwin/doc/en-EN
! Installing input.txt on /tmp/hbwin/doc/en-EN
! Installing lang.txt on /tmp/hbwin/doc/en-EN
! Installing license.txt on /tmp/hbwin/doc/en-EN
! Installing macro.txt on /tmp/hbwin/doc/en-EN
! Installing math.txt on /tmp/hbwin/doc/en-EN
! Installing memo.txt on /tmp/hbwin/doc/en-EN
! Installing memvar2.txt on /tmp/hbwin/doc/en-EN
! Installing menu.txt on /tmp/hbwin/doc/en-EN
! Installing misc.txt on /tmp/hbwin/doc/en-EN
! Installing nation.txt on /tmp/hbwin/doc/en-EN
! Installing objfunc.txt on /tmp/hbwin/doc/en-EN
! Installing rdd.txt on /tmp/hbwin/doc/en-EN
! Installing rdddb.txt on /tmp/hbwin/doc/en-EN
! Installing rddmisc.txt on /tmp/hbwin/doc/en-EN
! Installing rddord.txt on /tmp/hbwin/doc/en-EN
! Installing readme.txt on /tmp/hbwin/doc/en-EN
! Installing sayget.txt on /tmp/hbwin/doc/en-EN
! Installing set.txt on /tmp/hbwin/doc/en-EN
! Installing setmode.txt on /tmp/hbwin/doc/en-EN
! Installing string.txt on /tmp/hbwin/doc/en-EN
! Installing strotype.txt on /tmp/hbwin/doc/en-EN
! Installing subcodes.txt on /tmp/hbwin/doc/en-EN
! Installing tbrowse.txt on /tmp/hbwin/doc/en-EN
! Installing tclass.txt on /tmp/hbwin/doc/en-EN
! Installing terminal.txt on /tmp/hbwin/doc/en-EN
! Installing tgetlist.txt on /tmp/hbwin/doc/en-EN
! Installing tlabel.txt on /tmp/hbwin/doc/en-EN
! Installing treport.txt on /tmp/hbwin/doc/en-EN
! Installing var.txt on /tmp/hbwin/doc/en-EN
! Installing clipdefs.h on /tmp/hbwin/include
! Installing extend.h on /tmp/hbwin/include
! Installing hbapi.h on /tmp/hbwin/include
! Installing hbapicdp.h on /tmp/hbwin/include
! Installing hbapicls.h on /tmp/hbwin/include
! Installing hbapidbg.h on /tmp/hbwin/include
! Installing hbapierr.h on /tmp/hbwin/include
! Installing hbapifs.h on /tmp/hbwin/include
! Installing hbapigt.h on /tmp/hbwin/include
! Installing hbapiitm.h on /tmp/hbwin/include
! Installing hbapilng.h on /tmp/hbwin/include
! Installing hbapirdd.h on /tmp/hbwin/include
! Installing hbassert.h on /tmp/hbwin/include
! Installing hbatomic.h on /tmp/hbwin/include
! Installing hbchksum.h on /tmp/hbwin/include
! Installing hbcomp.h on /tmp/hbwin/include
! Installing hbcompdf.h on /tmp/hbwin/include
! Installing hbdate.h on /tmp/hbwin/include
! Installing hbdbf.h on /tmp/hbwin/include
! Installing hbdbferr.h on /tmp/hbwin/include
! Installing hbdbsort.h on /tmp/hbwin/include
! Installing hbdefs.h on /tmp/hbwin/include
! Installing hberrors.h on /tmp/hbwin/include
! Installing hbexprop.h on /tmp/hbwin/include
! Installing hbgtcore.h on /tmp/hbwin/include
! Installing hbhash.h on /tmp/hbwin/include
! Installing hbinit.h on /tmp/hbwin/include
! Installing hbmacro.h on /tmp/hbwin/include
! Installing hbmath.h on /tmp/hbwin/include
! Installing hbpcode.h on /tmp/hbwin/include
! Installing hbpp.h on /tmp/hbwin/include
! Installing hbrddcdx.h on /tmp/hbwin/include
! Installing hbrdddbf.h on /tmp/hbwin/include
! Installing hbrddfpt.h on /tmp/hbwin/include
! Installing hbrdddel.h on /tmp/hbwin/include
! Installing hbrddntx.h on /tmp/hbwin/include
! Installing hbrddsdf.h on /tmp/hbwin/include
! Installing hbrddnsx.h on /tmp/hbwin/include
! Installing hbregex.h on /tmp/hbwin/include
! Installing hbset.h on /tmp/hbwin/include
! Installing hbsetup.h on /tmp/hbwin/include
! Installing hbsocket.h on /tmp/hbwin/include
! Installing hbstack.h on /tmp/hbwin/include
! Installing hbsxfunc.h on /tmp/hbwin/include
! Installing hbthread.h on /tmp/hbwin/include
! Installing hbtrace.h on /tmp/hbwin/include
! Installing hbtypes.h on /tmp/hbwin/include
! Installing hbver.h on /tmp/hbwin/include
! Installing hbvm.h on /tmp/hbwin/include
! Installing hbvmint.h on /tmp/hbwin/include
! Installing hbvmopt.h on /tmp/hbwin/include
! Installing hbvmpub.h on /tmp/hbwin/include
! Installing hbxvm.h on /tmp/hbwin/include
! Installing hbwince.h on /tmp/hbwin/include
! Installing hbzlib.h on /tmp/hbwin/include
! Installing hb_io.h on /tmp/hbwin/include
! Installing achoice.ch on /tmp/hbwin/include
! Installing assert.ch on /tmp/hbwin/include
! Installing box.ch on /tmp/hbwin/include
! Installing button.ch on /tmp/hbwin/include
! Installing blob.ch on /tmp/hbwin/include
! Installing color.ch on /tmp/hbwin/include
! Installing common.ch on /tmp/hbwin/include
! Installing dbedit.ch on /tmp/hbwin/include
! Installing dbinfo.ch on /tmp/hbwin/include
! Installing dbstruct.ch on /tmp/hbwin/include
! Installing directry.ch on /tmp/hbwin/include
! Installing error.ch on /tmp/hbwin/include
! Installing fileio.ch on /tmp/hbwin/include
! Installing getexit.ch on /tmp/hbwin/include
! Installing hbclass.ch on /tmp/hbwin/include
! Installing hbdebug.ch on /tmp/hbwin/include
! Installing hbextcdp.ch on /tmp/hbwin/include
! Installing hbextlng.ch on /tmp/hbwin/include
! Installing hbextern.ch on /tmp/hbwin/include
! Installing hbgfx.ch on /tmp/hbwin/include
! Installing hbgfxdef.ch on /tmp/hbwin/include
! Installing hbgtinfo.ch on /tmp/hbwin/include
! Installing hbhrb.ch on /tmp/hbwin/include
! Installing hbinkey.ch on /tmp/hbwin/include
! Installing hblang.ch on /tmp/hbwin/include
! Installing hbmacro.ch on /tmp/hbwin/include
! Installing hbmath.ch on /tmp/hbwin/include
! Installing hbmemory.ch on /tmp/hbwin/include
! Installing hbmemvar.ch on /tmp/hbwin/include
! Installing hboo.ch on /tmp/hbwin/include
! Installing hbpers.ch on /tmp/hbwin/include
! Installing hbsetup.ch on /tmp/hbwin/include
! Installing hbsix.ch on /tmp/hbwin/include
! Installing hbsocket.ch on /tmp/hbwin/include
! Installing hbstdgen.ch on /tmp/hbwin/include
! Installing hbthread.ch on /tmp/hbwin/include
! Installing hbusrrdd.ch on /tmp/hbwin/include
! Installing hbver.ch on /tmp/hbwin/include
! Installing hbzlib.ch on /tmp/hbwin/include
! Installing inkey.ch on /tmp/hbwin/include
! Installing memoedit.ch on /tmp/hbwin/include
! Installing ord.ch on /tmp/hbwin/include
! Installing rddsys.ch on /tmp/hbwin/include
! Installing reserved.ch on /tmp/hbwin/include
! Installing set.ch on /tmp/hbwin/include
! Installing setcurs.ch on /tmp/hbwin/include
! Installing simpleio.ch on /tmp/hbwin/include
! Installing std.ch on /tmp/hbwin/include
! Installing hbsxdef.ch on /tmp/hbwin/include
! Installing tbrowse.ch on /tmp/hbwin/include
! Installing error.api on /tmp/hbwin/include
! Installing extend.api on /tmp/hbwin/include
! Installing filesys.api on /tmp/hbwin/include
! Installing fm.api on /tmp/hbwin/include
! Installing gt.api on /tmp/hbwin/include
! Installing hbundoc.api on /tmp/hbwin/include
! Installing item.api on /tmp/hbwin/include
! Installing rdd.api on /tmp/hbwin/include
! Installing vm.api on /tmp/hbwin/include
make[3]: `../../../../../lib/win/mingw/liblibhpdf.a' is up to date.
! Installing ../../lib/win/mingw/liblibhpdf.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/liblibpng.a' is up to date.
! Installing ../../lib/win/mingw/liblibpng.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbpcre.a' is up to date.
! Installing ../../lib/win/mingw/libhbpcre.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libsqlite3.a' is up to date.
! Installing ../../lib/win/mingw/libsqlite3.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbzlib.a' is up to date.
! Installing ../../lib/win/mingw/libhbzlib.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbcommon.a' is up to date.
! Installing ../../lib/win/mingw/libhbcommon.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbnortl.a' is up to date.
! Installing ../../lib/win/mingw/libhbnortl.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbpp.a' is up to date.
! Installing ../../lib/win/mingw/libhbpp.a on /tmp/hbwin/lib/win/mingw
! Installing ../../bin/win/mingw/hbpp.exe on /tmp/hbwin/bin
make[3]: `../../../../../lib/win/mingw/libhbcplr.a' is up to date.
! Installing ../../lib/win/mingw/libhbcplr.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../bin/win/mingw/harbour.exe' is up to date.
! Installing ../../bin/win/mingw/harbour.exe on /tmp/hbwin/bin
make[3]: `../../../../../lib/win/mingw/libhbrtl.a' is up to date.
! Installing ../../lib/win/mingw/libhbrtl.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libgtcgi.a' is up to date.
! Installing ../../../lib/win/mingw/libgtcgi.a on /tmp/hbwin/lib/win/mingw
! 'gtcrs' library skipped (component not found)
! 'gtdos' library skipped (platform not supported)
make[4]: `../../../../../../lib/win/mingw/libgtgui.a' is up to date.
! Installing ../../../lib/win/mingw/libgtgui.a on /tmp/hbwin/lib/win/mingw
! 'gtos2' library skipped (platform not supported)
make[4]: `../../../../../../lib/win/mingw/libgtpca.a' is up to date.
! Installing ../../../lib/win/mingw/libgtpca.a on /tmp/hbwin/lib/win/mingw
! 'gtsln' library skipped (component not found)
make[4]: `../../../../../../lib/win/mingw/libgtstd.a' is up to date.
! Installing ../../../lib/win/mingw/libgtstd.a on /tmp/hbwin/lib/win/mingw
! 'gttrm' library skipped (platform or compiler not supported)
make[4]: `../../../../../../lib/win/mingw/libgtwin.a' is up to date.
! Installing ../../../lib/win/mingw/libgtwin.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libgtwvt.a' is up to date.
! Installing ../../../lib/win/mingw/libgtwvt.a on /tmp/hbwin/lib/win/mingw
! 'gtxwc' library skipped (component not found)
make[3]: `../../../../../lib/win/mingw/libhbvm.a' is up to date.
! Installing ../../lib/win/mingw/libhbvm.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbmainstd.a' is up to date.
! Installing ../../../lib/win/mingw/libhbmainstd.a on 
/tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbmainwin.a' is up to date.
! Installing ../../../lib/win/mingw/libhbmainwin.a on 
/tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbmaindllh.a' is up to date.
! Installing ../../../lib/win/mingw/libhbmaindllh.a on 
/tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbmaindllp.a' is up to date.
! Installing ../../../lib/win/mingw/libhbmaindllp.a on 
/tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbvmmt.a' is up to date.
! Installing ../../../lib/win/mingw/libhbvmmt.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbmacro.a' is up to date.
! Installing ../../lib/win/mingw/libhbmacro.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbcpage.a' is up to date.
! Installing ../../lib/win/mingw/libhbcpage.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhblang.a' is up to date.
! Installing ../../lib/win/mingw/libhblang.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbrdd.a' is up to date.
! Installing ../../lib/win/mingw/libhbrdd.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbnulrdd.a' is up to date.
! Installing ../../../lib/win/mingw/libhbnulrdd.a on 
/tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/librddntx.a' is up to date.
! Installing ../../../lib/win/mingw/librddntx.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/librddnsx.a' is up to date.
! Installing ../../../lib/win/mingw/librddnsx.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/librddcdx.a' is up to date.
! Installing ../../../lib/win/mingw/librddcdx.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/librddfpt.a' is up to date.
! Installing ../../../lib/win/mingw/librddfpt.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbsix.a' is up to date.
! Installing ../../../lib/win/mingw/libhbsix.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbhsx.a' is up to date.
! Installing ../../../lib/win/mingw/libhbhsx.a on /tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../lib/win/mingw/libhbusrrdd.a' is up to date.
! Installing ../../../lib/win/mingw/libhbusrrdd.a on 
/tmp/hbwin/lib/win/mingw
make[4]: `../../../../../../../lib/win/mingw/libhbuddall.a' is up to date.
! Installing ../../../../lib/win/mingw/libhbuddall.a on 
/tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbextern.a' is up to date.
! Installing ../../lib/win/mingw/libhbextern.a on /tmp/hbwin/lib/win/mingw
make[3]: `../../../../../lib/win/mingw/libhbdebug.a' is up to date.
! Installing ../../lib/win/mingw/libhbdebug.a on /tmp/hbwin/lib/win/mingw
/usr/bin/i586-mingw32msvc-gcc -shared -L../../../../../lib/win/mingw  -o 
../../../../../bin/win/mingw/harbour-20.dll __dyn__.tmp -lhbpcre 
-lhbzlib -lkernel32 -luser32 -lws2_32 -ladvapi32 -lgdi32 
-Wl,--out-implib,../../../../../lib/win/mingw/libharbour-20.a,--output-def,../../../../../bin/win/mingw/harbour-20.def
Creating library file: ../../../../../lib/win/mingw/libharbour-20.a
../../../../../source/common/obj/win/mingw/hbffind.o:hbffind.c:(.text+0x474): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0xc8): undefined 
reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0x2f7): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0x10f1): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0xaa): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0xc6): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0x18c): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0x2cb): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/hbproces.o:hbproces.c:(.text+0x180): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/hbproces.o:hbproces.c:(.text+0x5bd): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/hbrunfun.o:hbrunfun.c:(.text+0x58): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/net.o:net.c:(.text+0xc1): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/net.o:net.c:(.text+0x121): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/philes.o:philes.c:(.text+0x5fd): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/run.o:run.c:(.text+0x3f): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/vm/obj/win/mingw/cmdarg.o:cmdarg.c:(.text+0x3b9): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/vm/obj/win/mingw/cmdarg.o:cmdarg.c:(.text+0x796): 
undefined reference to `_hb_osDecodeCP'
collect2: ld returned 1 exit status
make[3]: *** [harbour-20.dll] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [dynlib.inst] Error 2
make: *** [source.inst] Error 2




From harbour.01 at syenar.hu  Sun Sep 13 08:52:40 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Sep 13 08:52:50 2009
Subject: [Harbour] linux x mingw strange behaviour
In-Reply-To: <alpine.GSO.2.00.0909131348230.13711@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909131348230.13711@dawn.royalcomp.hu>
Message-ID: <A12721B3-6B77-4458-B948-A784C079165C@syenar.hu>

Hi,

If you specify HB_COMPILER explicitly, there will be
no autodetection done, so you also have to setup the other
aspects of the compiler, like HB_CCPREFIX, HB_BUILD_EXTDEF.

Of course it could be implemented otherwise, but it
looks a bit too costly compared to the value added.
Anyway it's a path we can follow.

Brgds,
Viktor

On 2009.09.13., at 13:55, Tamas TEVESZ wrote:

>
> hi,
>
> if i specify HB_PLATFORM=win, compiler is autodetected fine to be
> mingw, and all is fine.
>
> if, however, i explicitly specify HB_COMPILER=mingw (along with
> HB_PLATFORM=win of course(?)), all hell breaks loose. it looks as if
> compile commands were *mostly* set (ie. switches and stuff are almost
> fine, some pathes are somewhat off), but the compiler itself is way
> off (gcc instead of i586-mingw32msvc-gcc).
>
>
> tinky:~/w/xhb/hbci/harbour-build$ export HB_PLATFORM=win
> tinky:~/w/xhb/hbci/harbour-build$ make
> ! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
> ! MAKE: make 3.81 /bin/sh
> ! HB_HOST_PLAT: linux (x86_64)  HB_SHELL: sh
> ! HB_PLATFORM: win (x86)
> ! HB_COMPILER: mingw (autodetected: /usr/bin/)
> ! HB_BIN_COMPILE not specified. Automatically set to: /usr/bin
> ! Component: 'zlib' found in /home/ice/w/xhb/hbci/harbour-build/ 
> external/zlib (local)
> ! Component: 'pcre' found in /home/ice/w/xhb/hbci/harbour-build/ 
> external/pcre (local)
> ! Component: 'openssl' not found
> ! Component: 'gpm' not supported on win platform
> ! Component: 'slang' not found
> ! Component: 'curses' not found
> ! Component: 'x11' not found
> ! Component: 'wattcp/watt-32' not supported on win platform
> ! HB_INSTALL_PREFIX automatically set to: /home/ice/w/xhb/hbci/ 
> harbour-build
> ! REVISION: 12489
> make[2]: Nothing to be done for `all'.
> make[1]: Nothing to be done for `all'.
> /usr/bin/i586-mingw32msvc-gcc  -I. -I../../../../../include  -O3 - 
> fomit-frame-pointer -march=i586 -mtune=pentiumpro  -I/home/ice/w/xhb/ 
> hbci/harbour-build/external/zlib -I../../../../../external/libpng  - 
> o_hbhbpdf.o -c ../../../_hbhbpdf.c
> /usr/bin/i586-mingw32msvc-gcc  -I. -I../../../../../include  -O3 - 
> fomit-frame-pointer -march=i586 -mtune=pentiumpro  -I/home/ice/w/xhb/ 
> hbci/harbour-build/external/zlib -I../../../../../external/libpng  - 
> ohpdfanno.o -c ../../../hpdfanno.c
>
> tinky:~/w/xhb/hbci/harbour-build$ export HB_PLATFORM=win  
> HB_COMPILER=mingw
> tinky:~/w/xhb/hbci/harbour-build$ make
> ! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
> ! MAKE: make 3.81 /bin/sh
> ! HB_HOST_PLAT: linux (x86_64)  HB_SHELL: sh
> ! HB_PLATFORM: win (x86)
> ! HB_COMPILER: mingw
> ! HB_BIN_COMPILE not specified. Automatically set to: /usr/bin
> ! Component: 'zlib' found in /usr/include
> ! Component: 'pcre' found in /usr/include
> ! Component: 'openssl' found in /usr/include
> ! Component: 'gpm' not supported on win platform
> ! Component: 'slang' found in /usr/include
> ! Component: 'curses' found in /usr/include
> ! Component: 'x11' found in /usr/include
> ! Component: 'wattcp/watt-32' not supported on win platform
> ! HB_INSTALL_PREFIX automatically set to: /home/ice/w/xhb/hbci/ 
> harbour-build
> ! REVISION: 12489
> make[2]: Nothing to be done for `all'.
> make[1]: Nothing to be done for `all'.
> gcc  -I. -I../../../../../include  -O3 -fomit-frame-pointer - 
> march=i586 -mtune=pentiumpro  -I/usr/include -I/usr/include  - 
> ohpdfdict.o -c ../../../hpdfdict.c
> ../../../hpdfdict.c:1: error: CPU you selected does not support  
> x86-64 instruction set
> ../../../hpdfdict.c:1: error: CPU you selected does not support  
> x86-64 instruction set
> make[3]: *** [hpdfdict.o] Error 1
> make[2]: *** [descend] Error 2
> make[1]: *** [libhpdf] Error 2
> make: *** [external] Error 2
>
>
> -- 
> [-]
>
> mkdir /nonexistent
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From ice at extreme.hu  Sun Sep 13 09:39:31 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Sun Sep 13 09:39:39 2009
Subject: [Harbour] linux x mingw strange behaviour
In-Reply-To: <A12721B3-6B77-4458-B948-A784C079165C@syenar.hu>
References: <alpine.GSO.2.00.0909131348230.13711@dawn.royalcomp.hu>
	<A12721B3-6B77-4458-B948-A784C079165C@syenar.hu>
Message-ID: <alpine.GSO.2.00.0909131528430.13711@dawn.royalcomp.hu>

On Sun, 13 Sep 2009, Viktor Szak?ts wrote:

hi,

 > If you specify HB_COMPILER explicitly, there will be
 > no autodetection done, so you also have to setup the other
 > aspects of the compiler, like HB_CCPREFIX, HB_BUILD_EXTDEF.
 > 
 > Of course it could be implemented otherwise, but it
 > looks a bit too costly compared to the value added.
 > Anyway it's a path we can follow.

right, thanks. don't complicate it. works fine this way.

maybe something like this would make it absolutely clear:

Index: INSTALL
===================================================================
--- INSTALL     (revision 12489)
+++ INSTALL     (working copy)
@@ -408,6 +408,10 @@
    - HB_COMPILER               Override C compiler autodetection
                                See this section for possible values:
                                SUPPORTED PLATFORMS AND C COMPILERS
+                               If HB_COMPILER is specified explicitly,
+                               other toolchain properties (like HB_CCPREFIX,
+                               HB_BUILD_EXTDEF etc.) also have to be
+                               explicitly specified.
 
    - HB_USER_PRGFLAGS          User Harbour compiler options
    - HB_USER_CFLAGS            User C compiler options




-- 
[-]

mkdir /nonexistent
From bedipritpal at hotmail.com  Sun Sep 13 11:26:14 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun Sep 13 11:26:20 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12489] trunk/harbour
In-Reply-To: <001201ca346b$58ef6730$0ace3590$@Bisz@t-online.hu>
References: <E1MmVXz-0001k6-8W@3kljzd1.ch3.sourceforge.com>
	<4AABDA9C.2040901@elart.it>
	<000c01ca33ed$961ba3e0$c252eba0$@Bisz@t-online.hu>
	<001201ca346b$58ef6730$0ace3590$@Bisz@t-online.hu>
Message-ID: <25424087.post@talk.nabble.com>


Hi


Bisz Istv?n wrote:
> 
> After copying these files (exe and dll) in a folder on Vista, the two demo
> programs are fully functional, just the 'demoxbp.exe' produces the same
> crash as I encountered with the direct 'Vista/mingw32' build. The crash
> appears at program exiting after playing with some menu points.
> 

Probbaly I know why demoxbp.exe crashes on exit.
I am experimenting with MT and have detected this crash.
Probably I will commit a fix within a couple of days as 
my local repository is totally unstable state due to
heavy changes.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-12489--trunk-harbour-tp25416035p25424087.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From Istvan.Bisz at t-online.hu  Sun Sep 13 13:24:31 2009
From: Istvan.Bisz at t-online.hu (=?UTF-8?Q?Bisz_Istv=C3=A1n?=)
Date: Sun Sep 13 13:25:39 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12489] trunk/harbour
In-Reply-To: <25424087.post@talk.nabble.com>
References: <E1MmVXz-0001k6-8W@3kljzd1.ch3.sourceforge.com>	<4AABDA9C.2040901@elart.it>	<000c01ca33ed$961ba3e0$c252eba0$@Bisz@t-online.hu>	<001201ca346b$58ef6730$0ace3590$@Bisz@t-online.hu>
	<25424087.post@talk.nabble.com>
Message-ID: <000601ca3497$0e5c5a80$2b150f80$@Bisz@t-online.hu>

Hi Pritpal,

Thanks for your feedback. I will ignore in my test reports these issues until your fix.

Best regards,
Istv?n Bisz

-----Original Message-----
From: Pritpal Bedi [mailto:bedipritpal@hotmail.com] 
Sent: 2009. szeptember 13. 17:26
To: harbour@harbour-project.org
Subject: RE: [Harbour] SF.net SVN: harbour-project:[12489] trunk/harbour


Hi


Bisz Istv?n wrote:
> 
> After copying these files (exe and dll) in a folder on Vista, the two demo
> programs are fully functional, just the 'demoxbp.exe' produces the same
> crash as I encountered with the direct 'Vista/mingw32' build. The crash
> appears at program exiting after playing with some menu points.
> 

Probbaly I know why demoxbp.exe crashes on exit.
I am experimenting with MT and have detected this crash.
Probably I will commit a fix within a couple of days as 
my local repository is totally unstable state due to
heavy changes.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/SF.net-SVN%3A-harbour-project%3A-12489--trunk-harbour-tp25416035p25424087.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.



From april_white at sympatico.ca  Sun Sep 13 16:39:13 2009
From: april_white at sympatico.ca (April White)
Date: Sun Sep 13 16:39:22 2009
Subject: [Harbour] sample of my hbdoc2 results
Message-ID: <BLU0-SMTP55241942156B87DEA06434EFE50@phx.gbl>

I'm looking for some reviews and comments on my work.  It is not ready 
to be uploaded to the repository yet.

I've uploaded source documents and sample results to:
    http://www.harbour-project.com.br/apwhite/hrbdocs.zip

This contains the source files /dir.txt/ and /menu.txt/ and the output 
formats for /ascii, text, html, html2, and xml/

If you want to see the source code, it is at:
        http://www.harbour-project.com.br/apwhite/hbdoc2-20090913-1633.zip

I think I've settled on the internal code design (classes); I'm going to 
tackle rtf output next (so it can be turned into hlp files) and then trf.

April

-- 
The hardest years in life are those between ten and seventy.
- Helen Hayes (at 73)

From vailtom at gmail.com  Sun Sep 13 17:55:27 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Sun Sep 13 17:55:53 2009
Subject: [Harbour] sample of my hbdoc2 results
In-Reply-To: <BLU0-SMTP55241942156B87DEA06434EFE50@phx.gbl>
References: <BLU0-SMTP55241942156B87DEA06434EFE50@phx.gbl>
Message-ID: <531d7a750909131455q2c8373b9o973481b90113a8f7@mail.gmail.com>

Hi April!

Great job! How can we help in the documentation of functions? Will
still be updating the text files inside DOC folder?

Vailton

2009/9/13 April White <april_white@sympatico.ca>:
> I'm looking for some reviews and comments on my work. ?It is not ready to be
> uploaded to the repository yet.
>
> I've uploaded source documents and sample results to:
> ? http://www.harbour-project.com.br/apwhite/hrbdocs.zip
>
> This contains the source files /dir.txt/ and /menu.txt/ and the output
> formats for /ascii, text, html, html2, and xml/
>
> If you want to see the source code, it is at:
> ? ? ? http://www.harbour-project.com.br/apwhite/hbdoc2-20090913-1633.zip
>
> I think I've settled on the internal code design (classes); I'm going to
> tackle rtf output next (so it can be turned into hlp files) and then trf.
>
> April
>
> --
> The hardest years in life are those between ten and seventy.
> - Helen Hayes (at 73)
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From april_white at sympatico.ca  Sun Sep 13 18:53:44 2009
From: april_white at sympatico.ca (April White)
Date: Sun Sep 13 18:53:52 2009
Subject: [Harbour] sample of my hbdoc2 results
In-Reply-To: <531d7a750909131455q2c8373b9o973481b90113a8f7@mail.gmail.com>
References: <BLU0-SMTP55241942156B87DEA06434EFE50@phx.gbl>
	<531d7a750909131455q2c8373b9o973481b90113a8f7@mail.gmail.com>
Message-ID: <BLU0-SMTP664B5B889313731C52F23FEFE50@phx.gbl>

Vailton Renato wrote:
> Hi April!
>
> Great job! How can we help in the documentation of functions? Will
> still be updating the text files inside DOC folder?
>   

Thank you Vailton.

I've been standardizing the sections within the doc\en-en folder, so 
until my work is complete and uploaded any changes would either be 
discarded or would break my code.

If the group accepts that only the five formats are available at this 
time, I can upload my work.

April

-- 
The hardest years in life are those between ten and seventy.
- Helen Hayes (at 73)

From gvarona at ec-red.com  Sun Sep 13 22:24:15 2009
From: gvarona at ec-red.com (gvarona)
Date: Sun Sep 13 22:15:36 2009
Subject: [Harbour] Capture the event "Minimize" or "close (x)"
 a window of a console application
Message-ID: <20090914022415.30103.qmail@ml110b.qnet.com.pe>

It can capture the event "Minimize" or "close (x)" a window of a console 
application? 

TIA 

BestRegards
GVS
---------------------------------------------------------------
EC Red Internet gr@tis
Inscr?bete en www.ec-red.com
From carlo.borelli at gmail.com  Sun Sep 13 22:25:04 2009
From: carlo.borelli at gmail.com (Carlo Borelli)
Date: Sun Sep 13 22:25:10 2009
Subject: =?UTF-8?Q?Re=3A_=5BHarbour=5D_Contrib_TPostgres_=28Contribuci=C3=B3n=29?=
In-Reply-To: <b0552e6d0909102311p656ac2cud73f12f9df305e07@mail.gmail.com>
References: <b0552e6d0909102311p656ac2cud73f12f9df305e07@mail.gmail.com>
Message-ID: <f60d50830909131925i64dae0e7sb872e1feea0e38e@mail.gmail.com>

Hola, es muy interesante eso pero porque no prueba a traducir tu
intervenci?n en ingles para que toda la lista pueda comprender y a la
vez agregar tus modificaciones?
Un saludo cordial.

El 11/09/09, Rodrigo Machado <rodrigo@flaro.net> escribi?:
> Buenos Dias
>
> Hace algun tiempo he modificado el contrib para postgresql agregandole la
> posibilidad de acceder a los datos de la siguiente manera
> En vez de:
> oQuery:getrow( oQuery:recno() ):fieldget('codigo')
> Se puede usar asi:
> oQuery:codigo
>
> Este metodo ha facilitado y mucho la programaci?n, y por esto vengo a
> compartir con ustedes.
>
> Me gustaria que se incluyera a los fuentes en el SVN.
> Saludos
>
>
> *****************************
> ***    Rodrigo Machado    ***
> ***  rodrigo at flaro.net ***
> ***   30/08/2008  - 7:26  ***
> *****************************
> METHOD SetFieldsValues()  CLASS TPQquery
>    Local i
>    Local aData
>
> if ::nRecno > 0
>    aData := array( len( ::aStruct ), 2 )
>    for i := 1 to len(::aStruct)
>       if ! __objHasData( SELF,  ::aStruct[i,1] )
>          __objAddData( SELF, ::aStruct[i,1] )
>       endif
>       aData[ i, HB_OO_DATA_SYMBOL ] := ::aStruct[i,1]
>       aData[ i, HB_OO_DATA_VALUE  ] := ::GetRow():Fieldget( i )
>    next
>    __ObjSetValueList( SELF, aData )
> endif
>
> RETURN nil
>
>
>
> ?Estas buscando alg?n numero telef?nico? www.teleguia.com.py
>
> *:-.,_,.-:*'``'*:-.,_,.-:*:-.,_,.-:*'``'*:-.,_,.-:
>       :: Rodrigo Machado ::
>           FlaRo Sistemas
>            www.flaro.net
>
>       Telef:  0673 221 480
> *:-.,_,.-:*'``'*:-.,_,.-:*:-.,_,.-:*'``'*:-.,_,.-:
>

-- 
Enviado desde mi dispositivo m?vil

Ing. Carlo Borelli
Caracas, Venezuela
Tel. +58 0412 6319387 / +58 0212 5170479
Registered Linux User #249354
From ssbbstw at pchome.com.tw  Sun Sep 13 22:52:51 2009
From: ssbbstw at pchome.com.tw (WenSheng)
Date: Sun Sep 13 22:53:04 2009
Subject: [Harbour] about NETIO
Message-ID: <20090914104704.997B.84A669A0@mail.zzz.com.tw>


Hi~
  I test netio function,
  at server side use:
  -------------------
   pListenSocket := NETIO_LISTEN( PORT, IP, DRIVER )
   do while .t.
      pConnectionSocket := NETIO_ACCEPT( pListenSocket )
      ? 'Have one connect...', pConnectionSocket
      NETIO_SERVER( pConnectionSocket )
   enddo
  -------------------

I'm use 'netio_server' to create connect, 
but, I don't know how to stop server connect when client is close connect!!

server side is add memory when client connect to server.
no method to release memory when client connect is close.



From alxokhotnikov at gmail.com  Mon Sep 14 01:09:02 2009
From: alxokhotnikov at gmail.com (Alexandr Okhotnikov)
Date: Mon Sep 14 01:09:10 2009
Subject: [Harbour] debug
Message-ID: <d6fa31440909132209k6f148f1dkb06a4a44f784961f@mail.gmail.com>

Hi Pritpal Bedi

Using hbqt how to use the harbour-debugger (for *. prg)?
I asked earlier, no one answered. The debugger is not called. It is
not possible or require additional conditions?

Best regards,
Alexandr Okhotnikov
From bedipritpal at hotmail.com  Mon Sep 14 01:38:52 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep 14 01:38:57 2009
Subject: [Harbour] debug
In-Reply-To: <d6fa31440909132209k6f148f1dkb06a4a44f784961f@mail.gmail.com>
References: <d6fa31440909132209k6f148f1dkb06a4a44f784961f@mail.gmail.com>
Message-ID: <25430565.post@talk.nabble.com>


Hi


Alexandr Okhotnikov wrote:
> 
> Using hbqt how to use the harbour-debugger (for *. prg)?
> I asked earlier, no one answered. The debugger is not called. It is
> not possible or require additional conditions?
> 

I never use a debugger so cannot comment on the issue.
May be someone else could reply.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/debug-tp25430407p25430565.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Mon Sep 14 02:40:12 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 14 02:40:43 2009
Subject: [Harbour] sample of my hbdoc2 results
In-Reply-To: <BLU0-SMTP55241942156B87DEA06434EFE50@phx.gbl>
References: <BLU0-SMTP55241942156B87DEA06434EFE50@phx.gbl>
Message-ID: <609353e70909132340y19d25c1av3f08c7e204e180fa@mail.gmail.com>

Compliment this is a Very good work!Nice milestone days for harbour's
calendar.
Structure of doc is good
if possible i suggest generate one file (pdf) with all function inside
easy to distribute easy to made a search

2009/9/13 April White <april_white@sympatico.ca>

> I'm looking for some reviews and comments on my work.  It is not ready to
> be uploaded to the repository yet.
>
> I've uploaded source documents and sample results to:
>   http://www.harbour-project.com.br/apwhite/hrbdocs.zip
>
> This contains the source files /dir.txt/ and /menu.txt/ and the output
> formats for /ascii, text, html, html2, and xml/
>
> If you want to see the source code, it is at:
>       http://www.harbour-project.com.br/apwhite/hbdoc2-20090913-1633.zip
>
> I think I've settled on the internal code design (classes); I'm going to
> tackle rtf output next (so it can be turned into hlp files) and then trf.
>
> April
>
> --
> The hardest years in life are those between ten and seventy.
> - Helen Hayes (at 73)
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090914/57e01df9/attachment-0001.html
From francek.prijatelj at siol.net  Mon Sep 14 04:04:09 2009
From: francek.prijatelj at siol.net (=?UTF-8?Q?Fran=C4=8Dek_Prijatelj?=)
Date: Mon Sep 14 04:04:14 2009
Subject: [Harbour] debug
In-Reply-To: <d6fa31440909132209k6f148f1dkb06a4a44f784961f@mail.gmail.com>
References: <d6fa31440909132209k6f148f1dkb06a4a44f784961f@mail.gmail.com>
Message-ID: <25431876.post@talk.nabble.com>


Hi Alexandr

In demoqt.prg insert before main()

****INSERT THIS ****
REQUEST HB_GT_WIN
********************


INIT PROCEDURE Qt_Start()
 LOCAL lang:= QTextCodec():new ()
   qt_qapplication()
   ********* HERE IS YOUR CODE ********
   lang:setCodecForCStrings (lang:codecForName_1("Windows-1250")) 
   **********************************
   RETURN

EXIT PROCEDURE Qt_End()
   qt_qapplication_quit()
   RETURN

/*----------------------------------------------------------------------*/

PROCEDURE Main()
   Local oLabel, oBtn, oDA, oTabBar
   Local oWnd, oSize
   Local oMenuBar, pIcon
   Local oMenuA, pAction
   LOCAL oPS, oPPrv, oMB, oWZ, oCD, oWP, oSBar, oStyle
   
   ***** INSERT THIS ****************
   Altd()   
   ********************************
.
.
.
.
  
**** And remove this
/*
#ifdef __PLATFORM__WINDOWS
PROCEDURE hb_GtSys()
   HB_GT_GUI_DEFAULT()
   RETURN
#endif
*/


You have to link gtwin  
(If working on windows, otherwise some linux gt library) 
It works for me.

I also changed few lines in debugger.prg,
so that I can set breakpoints and other settings in init.cld


BRGS
Fran?ek Prijatelj



Alexandr Okhotnikov wrote:
> 
> Hi Pritpal Bedi
> 
> Using hbqt how to use the harbour-debugger (for *. prg)?
> I asked earlier, no one answered. The debugger is not called. It is
> not possible or require additional conditions?
> 
> Best regards,
> Alexandr Okhotnikov
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/debug-tp25430407p25431876.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vszakats at users.sourceforge.net  Mon Sep 14 06:46:26 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep 14 06:46:36 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12490] trunk/harbour
Message-ID: <E1Mn94k-0004dj-8Z@c3vjzd1.ch3.sourceforge.com>

Revision: 12490
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12490&view=rev
Author:   vszakats
Date:     2009-09-14 10:46:22 +0000 (Mon, 14 Sep 2009)

Log Message:
-----------
2009-09-14 12:43 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    % Deleted UTF-8 hack. Now using the built-in UTF-8 conversion
      support.

  * contrib/hbwin/win_com.c
    % Minor optimization and fixed warnings after recent patch.

  * INSTALL
    + Added see also HB_CC* to HB_COMPILER settings.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/contrib/hbwin/win_com.c
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From alxokhotnikov at gmail.com  Mon Sep 14 08:10:43 2009
From: alxokhotnikov at gmail.com (Alexandr Okhotnikov)
Date: Mon Sep 14 08:10:49 2009
Subject: [Harbour] debug
In-Reply-To: <25431876.post@talk.nabble.com>
References: <d6fa31440909132209k6f148f1dkb06a4a44f784961f@mail.gmail.com>
	<25431876.post@talk.nabble.com>
Message-ID: <d6fa31440909140510m2ce724yc39317bdebbbacee@mail.gmail.com>

Hi Fran?ek Prijatelj

Hangs on startup
What compilation options for the harbour and demoqt should I use?
From Istvan.Bisz at t-online.hu  Mon Sep 14 08:32:42 2009
From: Istvan.Bisz at t-online.hu (=?iso-8859-1?Q?Bisz_Istv=E1n?=)
Date: Mon Sep 14 08:33:02 2009
Subject: [Harbour] demoqt tests with debug_new - Leaked objects 
Message-ID: <004601ca3537$74bda720$5e38f560$@Bisz@t-online.hu>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: demoqt_debug_new.zip
Type: application/x-zip-compressed
Size: 27855 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090914/00c74450/demoqt_debug_new-0001.bin
From francek.prijatelj at siol.net  Mon Sep 14 09:16:08 2009
From: francek.prijatelj at siol.net (=?UTF-8?Q?Fran=C4=8Dek_Prijatelj?=)
Date: Mon Sep 14 09:16:13 2009
Subject: [Harbour] debug
In-Reply-To: <d6fa31440909140510m2ce724yc39317bdebbbacee@mail.gmail.com>
References: <d6fa31440909132209k6f148f1dkb06a4a44f784961f@mail.gmail.com>
	<25431876.post@talk.nabble.com>
	<d6fa31440909140510m2ce724yc39317bdebbbacee@mail.gmail.com>
Message-ID: <25435612.post@talk.nabble.com>


Hi  Aleksandr

Try with this settings (with exact order of libs )

harbour demoqt.prg  -b -dDEBUG -n -m -w0 -gc -q0    
-i.;C:\HRB\include;C:\Qt\2009.03\qt_msvc\include;   -odemoqt.c  
cl.exe -c -TC -W4 -D_CRT_SECURE_NO_WARNINGS -D_CRT_SECURE_NO_DEPRECATE   
-IC:\HRB\include   demoqt.c -Fdemoqt.obj
Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 14.00.50727.762 for
80x86
Copyright (C) Microsoft Corporation.  All rights reserved.
demoqt.c

LINK  /OUT:demoqt.exe /MANIFEST:NO demoqt.obj 
/subsystem:WINDOWS  /DEFAULTLIB:LIBCMT 
/NODEFAULTLIB:LIBC 
/FORCE:MULTIPLE   
/libpath:C:/HRB/lib 
/libpath:C:/Qt/2009.03/qt_msvc/lib 
/libpath:c:/Lib/mysql/lib 
hbqt.lib  QtCore4.lib QtGui4.lib QtNetwork4.lib QtWebKit4.lib 
gtgui.lib gtstd.lib gtwin.lib hbbmcdx.lib hbbtree.lib hbcommon.lib 
hbcpage.lib hbct.lib hbdebug.lib hbextern.lib 
hbgt.lib hblang.lib hbmacro.lib hbmisc.lib hbmzip.lib 
hbodbc.lib hbwin.lib hbpcre.lib hbpp.lib 
hbrdd.lib hbsix.lib hbrtl.lib 
hbtip.lib hbusrrdd.lib hbvmmt.lib hbziparc.lib 
hbzlib.lib hbnf.lib rddcdx.lib rddfpt.lib 
rddntx.lib xhb.lib hbmysql.lib libmysql.lib 
kernel32.lib gdi32.lib user32.lib comctl32.lib comdlg32.lib shell32.lib 
winspool.lib ole32.lib oleaut32.lib uuid.lib ws2_32.lib 
advapi32.lib vfw32.lib winmm.lib   
Microsoft (R) Incremental Linker Version 8.00.50727.762
Copyright (C) Microsoft Corporation.  All rights reserved.


BRGS 
Fran?ek


Alexandr Okhotnikov wrote:
> 
> Hi Fran?ek Prijatelj
> 
> Hangs on startup
> What compilation options for the harbour and demoqt should I use?
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/debug-tp25430407p25435612.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From francek.prijatelj at siol.net  Mon Sep 14 09:33:18 2009
From: francek.prijatelj at siol.net (=?UTF-8?Q?Fran=C4=8Dek_Prijatelj?=)
Date: Mon Sep 14 09:33:24 2009
Subject: [Harbour] debug
In-Reply-To: <d6fa31440909140510m2ce724yc39317bdebbbacee@mail.gmail.com>
References: <d6fa31440909132209k6f148f1dkb06a4a44f784961f@mail.gmail.com>
	<25431876.post@talk.nabble.com>
	<d6fa31440909140510m2ce724yc39317bdebbbacee@mail.gmail.com>
Message-ID: <25435888.post@talk.nabble.com>


Hi again

And here for mingw 

harbour demoqt.prg  -b -dDEBUG -n -m -w0 -gc -q0
    -i.C:\HRB\mingw\include;C:\Qt\2009.03\qt_mingw\include;
    -odemoqt.c  
    
gcc.exe    -c -Wall -W -O3 -fomit-frame-pointer  
-march=i586 -mtune=pentiumpro -fms-extensions -mms-bitfields 
-ffast-math -pipe  
-IC:\HRB\mingw\include  
demoqt.c -odemoqt.o
g++  -o demoqt  demoqt.o              
-mwindows -fms-extensions -Wall -mms-bitfields 
-LC:/HRB/mingw/lib 
-LC:/Qt/2009.03/qt_mingw/lib 
 -Wl,--allow-multiple-definition -Wl,--start-group 
 -lhbqt -lhbxbp -lQtCore4 -lQtGui4 -lQtNetwork4 -lQtWebKit4 
 -lsupc++ -lgtgui -lgtpca -lgtstd -lgtwin -lhbbmcdx -lhbbtree 
 -lhbcommon -lhbcpage -lhbct -lhbdebug -lhbextern -lhbgt 
 -lhblang -lhbmacro -lhbmisc -lhbmzip -lhbodbc -lhbwin -lhbpcre 
 -lhbpp -lhbrdd -lhbsix -lhbrtl -lhbtip -lhbusrrdd 
 -lhbvmmt -lhbziparc -lhbzlib -lhbnf -lrddcdx -lrddfpt 
 -lrddntx -lxhb  
 -lkernel32 -lgdi32 -luser32 -lcomctl32 -lcomdlg32 -lshell32 
 -lwinspool -lole32 -loleaut32 -luuid -lws2_32 
 -ladvapi32 -lvfw32 -lwinmm   -Wl,--end-group 

BRGS 
Fran?ek



Alexandr Okhotnikov wrote:
> 
> Hi Fran?ek Prijatelj
> 
> Hangs on startup
> What compilation options for the harbour and demoqt should I use?
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/debug-tp25430407p25435888.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From alxokhotnikov at gmail.com  Mon Sep 14 10:27:38 2009
From: alxokhotnikov at gmail.com (Alexandr Okhotnikov)
Date: Mon Sep 14 10:31:21 2009
Subject: [Harbour] debug
In-Reply-To: <25435888.post@talk.nabble.com>
References: <d6fa31440909132209k6f148f1dkb06a4a44f784961f@mail.gmail.com>
	<25431876.post@talk.nabble.com>
	<d6fa31440909140510m2ce724yc39317bdebbbacee@mail.gmail.com>
	<25435888.post@talk.nabble.com>
Message-ID: <d6fa31440909140727w6b7dded7s9c155aab0ba9f3fe@mail.gmail.com>

Hi

Many thanks
From harbour.01 at syenar.hu  Mon Sep 14 11:12:50 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 14 11:13:03 2009
Subject: [Harbour] sample of my hbdoc2 results
In-Reply-To: <BLU0-SMTP55241942156B87DEA06434EFE50@phx.gbl>
References: <BLU0-SMTP55241942156B87DEA06434EFE50@phx.gbl>
Message-ID: <73F05D2A-D3A5-43AD-9C51-FF2F6D353C49@syenar.hu>

Great job April. Feel free to upload it in place of old hbdoc.

BTW, for quality .pdf output you can try hbhpdf lib, I have very
good experiences with it.

Brgds,
Viktor

On 2009.09.13., at 22:39, April White wrote:

> I'm looking for some reviews and comments on my work.  It is not  
> ready to be uploaded to the repository yet.
>
> I've uploaded source documents and sample results to:
>   http://www.harbour-project.com.br/apwhite/hrbdocs.zip
>
> This contains the source files /dir.txt/ and /menu.txt/ and the  
> output formats for /ascii, text, html, html2, and xml/
>
> If you want to see the source code, it is at:
>       http://www.harbour-project.com.br/apwhite/hbdoc2-20090913-1633.zip
>
> I think I've settled on the internal code design (classes); I'm  
> going to tackle rtf output next (so it can be turned into hlp files)  
> and then trf.
>
> April
>
> -- 
> The hardest years in life are those between ten and seventy.
> - Helen Hayes (at 73)
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Sep 14 11:16:53 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 14 11:17:02 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12489] trunk/harbour
In-Reply-To: <001201ca346b$58ef6730$0ace3590$@Bisz@t-online.hu>
References: <E1MmVXz-0001k6-8W@3kljzd1.ch3.sourceforge.com>	<4AABDA9C.2040901@elart.it>
	<000c01ca33ed$961ba3e0$c252eba0$@Bisz@t-online.hu>
	<001201ca346b$58ef6730$0ace3590$@Bisz@t-online.hu>
Message-ID: <A72C0880-CB0F-4F34-A6B7-5204FAC74238@syenar.hu>

Hi,

> Viktor, could you please take a look on the hbmk2 cross-compiler  
> auto detection. Maybe there exist a similar solution with your last  
> commit, thank you.

It's not so easy ATM. That part of autodetection code is not yet
implemented in hbmk2 at all. I plan to rework hbmk2 autodetection
to have all features of global.mk in the future, but probably only
after a stable release.

> A second check of the linker '-L../../hbqt//lib ' switch maybe will  
> be useful.

Could not replicate the double slashes locally, anyway it's just  
cosmetics,
won't cause any harm.

Brgds,
Viktor

From rodrigo at flaro.net  Mon Sep 14 12:22:47 2009
From: rodrigo at flaro.net (Rodrigo Machado)
Date: Mon Sep 14 12:23:14 2009
Subject: [Harbour] =?iso-8859-1?q?Fwd=3A_Contrib_TPostgres_=28Contribuci?=
	=?iso-8859-1?q?=F3n=29_=5BTRANSLATE=5D?=
Message-ID: <b0552e6d0909140922r70580403u88c2a8a8036b0baf@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: TPostgres.prg
Type: application/octet-stream
Size: 37765 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090914/3dbe17de/TPostgres-0001.obj
From druzus at acn.waw.pl  Mon Sep 14 12:25:08 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 14 12:25:14 2009
Subject: [Harbour] about NETIO
In-Reply-To: <20090914104704.997B.84A669A0@mail.zzz.com.tw>
References: <20090914104704.997B.84A669A0@mail.zzz.com.tw>
Message-ID: <20090914162508.GA14003@uran.home.aster.pl>

On Mon, 14 Sep 2009, WenSheng wrote:

Hi,

>   I test netio function,
>   at server side use:
>   -------------------
>    pListenSocket := NETIO_LISTEN( PORT, IP, DRIVER )
>    do while .t.
>       pConnectionSocket := NETIO_ACCEPT( pListenSocket )
>       ? 'Have one connect...', pConnectionSocket
>       NETIO_SERVER( pConnectionSocket )
>    enddo
>   -------------------
> I'm use 'netio_server' to create connect, 
> but, I don't know how to stop server connect when client is close connect!!

It's stopped automatically when client close all connections to
given server or when last copy of connection socket is cleared.
All allocated resorces are released when last copy of connection
socket is cleared. BTW you should add to above code:
      pConnectionSocket := NIL
just after:
      NETIO_SERVER( pConnectionSocket )
if you want to force releasing the resources bound with pConnectionSocket.
Otherwise they are release when new connection is accepted and
pConnectionSocket is overwrite in line:
      pListenSocket := NETIO_LISTEN( PORT, IP, DRIVER )

> server side is add memory when client connect to server.
> no method to release memory when client connect is close.

I do not think that above is true. AFAIK all allocated resources are
cleanly released.

best regards,
Przemek
From mbelgrano at deltain.it  Mon Sep 14 13:17:01 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 14 13:17:28 2009
Subject: [Harbour] about NETIO
In-Reply-To: <20090914162508.GA14003@uran.home.aster.pl>
References: <20090914104704.997B.84A669A0@mail.zzz.com.tw> 
	<20090914162508.GA14003@uran.home.aster.pl>
Message-ID: <609353e70909141017n81b2430ybab6d0f8689c96a@mail.gmail.com>

Hi Przemek
have you same news regarding GTNET idea , for control remotely  GT/GUI object
NETGT like current NETIO a universal  solution For having the terminal
side on remote  computer with each GT

Are GTNET & NETIO the basic for universal harbour application server?
The better implementation ot this idea is now on c:\harbour\examples\terminal

Follow is prev post regarding Gtnet
>- with Remote Resource Sharing and Procedures Calls

>- lease also do not forget about yet another functionality. As long as
>it will be possible to recreate all application windows from scratch
>using only our own meta description then it will be possible to have
>GTNET in aApplication running on the server and native GT client on user side.
>When user computer crashes then it's enough to connect to the
>server again and restore all windows using information from server.
>In the moment when you introduce hidden bindings between GT windows
>not visible for our GT layer you are loosing such functionality.



2009/9/14 Przemyslaw Czerpak <druzus@acn.waw.pl>:
> On Mon, 14 Sep 2009, WenSheng wrote:
>
> Hi,
>
>> ? I test netio function,
>> ? at server side use:
>> ? -------------------
>> ? ?pListenSocket := NETIO_LISTEN( PORT, IP, DRIVER )
>> ? ?do while .t.
>> ? ? ? pConnectionSocket := NETIO_ACCEPT( pListenSocket )
>> ? ? ? ? 'Have one connect...', pConnectionSocket
>> ? ? ? NETIO_SERVER( pConnectionSocket )
>> ? ?enddo
>> ? -------------------
>> I'm use 'netio_server' to create connect,
>> but, I don't know how to stop server connect when client is close connect!!
>
> It's stopped automatically when client close all connections to
> given server or when last copy of connection socket is cleared.
> All allocated resorces are released when last copy of connection
> socket is cleared. BTW you should add to above code:
> ? ? ?pConnectionSocket := NIL
> just after:
> ? ? ?NETIO_SERVER( pConnectionSocket )
> if you want to force releasing the resources bound with pConnectionSocket.
> Otherwise they are release when new connection is accepted and
> pConnectionSocket is overwrite in line:
> ? ? ?pListenSocket := NETIO_LISTEN( PORT, IP, DRIVER )
>
>> server side is add memory when client connect to server.
>> no method to release memory when client connect is close.
>
> I do not think that above is true. AFAIK all allocated resources are
> cleanly released.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
From bedipritpal at hotmail.com  Mon Sep 14 13:33:20 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep 14 13:33:26 2009
Subject: [Harbour] demoqt tests with debug_new - Leaked objects
In-Reply-To: <004601ca3537$74bda720$5e38f560$@Bisz@t-online.hu>
References: <004601ca3537$74bda720$5e38f560$@Bisz@t-online.hu>
Message-ID: <25440044.post@talk.nabble.com>


Hi Istv?n


Bisz Istv?n wrote:
> 
> The ?demoqt? tests with ?debug_new? shows a lot of ?leaked objects? , see
> attached ?debug_new.txt?. As I see now, the objects allocated by the new
> operator are not released by a corresponding delete operator.
> 

I am struggling with this aspect since 20 days and 
could not reached to any consclusion why Qt is not releasing the 
objects. To illustrate, just navigate in <Brw> tab in demoxbp and 
also keep an eye over task manager. You will be surprized to 
observe that memory keeps on growing all the time.
Not only here, just move the mouse in/out of the 
demoxbp window, the same behavior will follow.
And the worse is, if you play like this for a 
couple of hours, netxt time, demoxbp.exe will fail to 
load. You will need to reboot your computer.

I was wondering why this happens. I rewrote and 
subclassed QMainWindow() and implemented it for 
XbpDialog() class to have finer control over events 
and their execution. However I could not avoid this behavior.

And today you have confirmed that Qt itself is buggy on this front.

Even I downloaded Qt 2009.03 and checked all above against it
but the result is the same.

Along with above issue, I have one more issue with Qt in 
respect to its paint engine which fails on MT scenario.
I will post the modified code and will show what is needed to 
control it and what heavy penalty we have to pay.

And thanks for stopping my frustration over the subject.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/demoqt-tests-with-debug_new---Leaked-objects-tp25434990p25440044.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Mon Sep 14 13:42:26 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep 14 13:42:31 2009
Subject: [Harbour] NETIO - Real Web IP - Application Behavior
Message-ID: <25440212.post@talk.nabble.com>


Hello Przemek

I did as follows:

1. Opened a port on my router, 63000, to be accessible from outside.
2. Obtained temporary IP for my computer from no-ip .com, say, 64.123.212.67
3. Verified that the port 63000 is visible on that IP with some net tool.
4. Started NetIOSrv.exe 63000 0.0.0.0 c:\someFolderAsRootFolder
5. Executed the application with 64.123.212.67 63000

Application just hanged for indefinitely and did not showup next screen.
Normally if port is not accessible or NerIOSrv.exe is not running, 
application returns immediately with an error.

What could be the reasons for this behavior?

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/NETIO---Real-Web-IP---Application-Behavior-tp25440212p25440212.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From elart at elart.it  Mon Sep 14 15:24:10 2009
From: elart at elart.it (elart)
Date: Mon Sep 14 15:24:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12490] trunk/harbour
In-Reply-To: <E1Mn94k-0004dj-8Z@c3vjzd1.ch3.sourceforge.com>
References: <E1Mn94k-0004dj-8Z@c3vjzd1.ch3.sourceforge.com>
Message-ID: <4AAE985A.70401@elart.it>

On 09/14/2009 12:46 PM, vszakats@users.sourceforge.net wrote:
> Revision: 12490
>            http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12490&view=rev
> Author:   vszakats
> Date:     2009-09-14 10:46:22 +0000 (Mon, 14 Sep 2009)
>
> Log Message:
> -----------
> 2009-09-14 12:43 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>    * utils/hbmk2/hbmk2.prg
>      % Deleted UTF-8 hack. Now using the built-in UTF-8 conversion
>        support.
>
>    * contrib/hbwin/win_com.c
>      % Minor optimization and fixed warnings after recent patch.
>
>    * INSTALL
>      + Added see also HB_CC* to HB_COMPILER settings.
>
> Modified Paths:
> --------------
>      trunk/harbour/ChangeLog
>      trunk/harbour/INSTALL
>      trunk/harbour/contrib/hbwin/win_com.c
>      trunk/harbour/utils/hbmk2/hbmk2.prg
>
>
> This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

On Ubuntu 9.10 32 bits Harbour for Linux compile fine

Harbour for Win give me this error

In attachment the complete compile log...

Thank you and best regards

make[3]: ?../../../../../lib/win/mingw/libhbdebug.a? ? aggiornato.
/usr/bin/i586-mingw32msvc-gcc -shared -L../../../../../lib/win/mingw  -o 
../../../../../bin/win/mingw/harbour-20.dll __dyn__.tmp -lhbpcre 
-lhbzlib -lkernel32 -luser32 -lws2_32 -ladvapi32 -lgdi32 
-Wl,--out-implib,../../../../../lib/win/mingw/libharbour-20.a,--output-def,../../../../../bin/win/mingw/harbour-20.def
Creating library file: ../../../../../lib/win/mingw/libharbour-20.a
../../../../../source/common/obj/win/mingw/hbffind.o:hbffind.c:(.text+0x474): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0xc8): undefined 
reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0x2f7): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/filesys.o:filesys.c:(.text+0x10f1): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0xaa): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0xc6): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0x18c): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/gete.o:gete.c:(.text+0x2cb): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/hbproces.o:hbproces.c:(.text+0x180): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/hbproces.o:hbproces.c:(.text+0x5bd): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/hbrunfun.o:hbrunfun.c:(.text+0x58): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/rtl/obj/win/mingw/net.o:net.c:(.text+0xc1): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/net.o:net.c:(.text+0x121): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/philes.o:philes.c:(.text+0x5fd): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/rtl/obj/win/mingw/run.o:run.c:(.text+0x3f): 
undefined reference to `_hb_osEncodeCP'
../../../../../source/vm/obj/win/mingw/cmdarg.o:cmdarg.c:(.text+0x3b9): 
undefined reference to `_hb_osDecodeCP'
../../../../../source/vm/obj/win/mingw/cmdarg.o:cmdarg.c:(.text+0x796): 
undefined reference to `_hb_osDecodeCP'
collect2: ld returned 1 exit status
make[3]: *** [harbour-20.dll] Errore 1
make[2]: *** [descend] Errore 2
make[1]: *** [dynlib] Errore 2
make: *** [source] Errore 2



-------------- next part --------------
A non-text attachment was scrubbed...
Name: log.txt.tar.gz
Type: application/x-gzip
Size: 4609 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090914/ae48862f/log.txt.tar.gz
From elart at elart.it  Mon Sep 14 15:51:39 2009
From: elart at elart.it (elart)
Date: Mon Sep 14 15:51:58 2009
Subject: [Harbour] NETIO - Real Web IP - Application Behavior
In-Reply-To: <25440212.post@talk.nabble.com>
References: <25440212.post@talk.nabble.com>
Message-ID: <4AAE9ECB.5030000@elart.it>

On 09/14/2009 07:42 PM, Pritpal Bedi wrote:
>
> Hello Przemek
>
> I did as follows:
>
> 1. Opened a port on my router, 63000, to be accessible from outside.
> 2. Obtained temporary IP for my computer from no-ip .com, say, 64.123.212.67
> 3. Verified that the port 63000 is visible on that IP with some net tool.
> 4. Started NetIOSrv.exe 63000 0.0.0.0 c:\someFolderAsRootFolder
> 5. Executed the application with 64.123.212.67 63000
>
> Application just hanged for indefinitely and did not showup next screen.
> Normally if port is not accessible or NerIOSrv.exe is not running,
> application returns immediately with an error.
>
> What could be the reasons for this behavior?
>
> Regards
> Pritpal Bedi
I have a similar issue on Linux and Przemek tell me to link at compile 
time the -gtwin lib.

Hope this helps
From ice at extreme.hu  Mon Sep 14 16:42:33 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Mon Sep 14 16:42:42 2009
Subject: [Harbour] if you have some time to kill....
Message-ID: <alpine.GSO.2.00.0909142212520.13711@dawn.royalcomp.hu>


hi,

i had, this was fun.

it's barely over the "it just compiles" stage, there are a whole loads 
of problems with terminal, possibly network, and whatnot.

anyway, if someone wants to chew this, it's a start. the downloadable 
haiku r1alpha1 iso contains everything one needs to get started ;)

2009.09.14 20:54:52 Haiku 1 BePC
Harbour 2.0.0beta3 (Rev. 12490) GNU C 2.95 (32-bit) x86
THREADS: 0
N_LOOPS: 1000000
[ T000: empty loop overhead ]...................................0.89
====================================================================
[ T001: x := L_C ]..............................................0.00
[ T002: x := L_N ]..............................................0.00
[ T003: x := L_D ]..............................................0.00
[ T004: x := S_C ]..............................................0.00
[ T005: x := S_N ]..............................................0.00
[ T006: x := S_D ]..............................................0.00
[ T007: x := M->M_C ]...........................................0.00
[ T008: x := M->M_N ]...........................................0.00
[ T009: x := M->M_D ]...........................................0.00
[ T010: x := M->P_C ]...........................................0.00
[ T011: x := M->P_N ]...........................................0.00
[ T012: x := M->P_D ]...........................................0.00
[ T013: x := F_C ]..............................................4.17
[ T014: x := F_N ]..............................................0.10
[ T015: x := F_D ]..............................................0.00
[ T016: x := o:Args ]...........................................0.13
[ T017: x := o[2] ].............................................0.00
[ T018: round( i / 1000, 2 ) ]..................................0.31
[ T019: str( i / 1000 ) ].......................................4.34
[ T020: val( s ) ]..............................................0.21
[ T021: val( a [ i % 16 + 1 ] ) ]...............................0.90
[ T022: dtos( d - i % 10000 ) ].................................1.88
[ T023: eval( { || i % 16 } ) ].................................2.01
[ T024: eval( bc := { || i % 16 } ) ]...........................0.00
[ T025: eval( { |x| x % 16 }, i ) ].............................0.97
[ T026: eval( bc := { |x| x % 16 }, i ) ].......................0.00
[ T027: eval( { |x| f1( x ) }, i ) ]............................1.25
[ T028: eval( bc := { |x| f1( x ) }, i ) ]......................0.20
[ T029: eval( bc := &("{ |x| f1( x ) }"), i ) ].................0.33
[ T030: x := &( "f1(" + str(i) + ")" ) ].......................22.08
[ T031: bc := &( "{|x|f1(x)}" ), eval( bc, i ) ]...............25.36
[ T032: x := valtype( x ) +  valtype( i ) ].....................1.93
[ T033: x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ]..........5.00
[ T034: x := a[ i % 16 + 1 ] == s ].............................0.17
[ T035: x := a[ i % 16 + 1 ] = s ]..............................0.24
[ T036: x := a[ i % 16 + 1 ] >= s ].............................0.25
[ T037: x := a[ i % 16 + 1 ] <= s ].............................0.48
[ T038: x := a[ i % 16 + 1 ] < s ]..............................0.23
[ T039: x := a[ i % 16 + 1 ] > s ]..............................0.22
[ T040: ascan( a, i % 16 ) ]....................................0.08
[ T041: ascan( a, { |x| x == i % 16 } ) ].......................7.77
[ T042: iif( i%1000==0, a:={}, ) , aadd(a,{i,1,.T.,s,s2,a2 ]....3.73
[ T043: x := a ]................................................0.00
[ T044: x := {} ]...............................................0.45
[ T045: f0() ]..................................................0.00
[ T046: f1( i ) ]...............................................0.00
[ T047: f2( c[1...8] ) ]........................................0.00
[ T048: f2( c[1...40000] ) ]....................................0.00
[ T049: f2( @c[1...40000] ) ]...................................0.00
[ T050: f2( @c[1...40000] ), c2 := c ]..........................0.00
[ T051: f3( a, a2, s, i, s2, bc, i, n, x ) ]....................0.38
[ T052: f2( a ) ]...............................................0.00
[ T053: x := f4() ].............................................2.80
[ T054: x := f5() ].............................................1.35
[ T055: x := space(16) ]........................................0.99
[ T056: f_prv( c ) ]............................................1.32
====================================================================
[ total application time: ]...................................134.25
[ total real time: ]..........................................139.30

-- 
[-]

mkdir /nonexistent
-------------- next part --------------
Index: include/hbthread.h
===================================================================
--- include/hbthread.h	(revision 12490)
+++ include/hbthread.h	(working copy)
@@ -62,7 +62,8 @@
       defined( HB_OS_DOS )
 #  define HB_TASK_THREAD
 #elif defined( HB_OS_LINUX ) || defined( HB_OS_DARWIN ) || \
-      defined( HB_OS_SUNOS ) || defined( HB_OS_HPUX )
+      defined( HB_OS_SUNOS ) || defined( HB_OS_HPUX ) || \
+      defined( HB_OS_HAIKU )
 #  include <pthread.h>
 #  define HB_PTHREAD_API
 #elif defined( HB_OS_WIN )
Index: include/hbdefs.h
===================================================================
--- include/hbdefs.h	(revision 12490)
+++ include/hbdefs.h	(working copy)
@@ -78,7 +78,7 @@
         ( defined( __STDC_VERSION__ ) && __STDC_VERSION__ >= 199901L ) || \
         ( defined( __DJGPP__ ) && \
           ( __DJGPP__ > 2 || ( __DJGPP__ == 2 && __DJGPP_MINOR__ >= 4 ) ) ) || \
-        defined( HB_OS_LINUX ) || defined( HB_OS_DARWIN ) || defined( HB_OS_SUNOS ) ) )
+        defined( HB_OS_LINUX ) || defined( HB_OS_DARWIN ) || defined( HB_OS_SUNOS ) || defined( HB_OS_HAIKU ) ) )
    #include <stdint.h>
    /* workaround for BCC 5.8 bug */
    #if ( defined( __BORLANDC__ ) && __BORLANDC__ >= 1410 )
Index: include/hbsetup.h
===================================================================
--- include/hbsetup.h	(revision 12490)
+++ include/hbsetup.h	(working copy)
@@ -279,12 +279,19 @@
    #endif
 #endif
 
+#ifndef HB_OS_HAIKU
+   #if defined( __HAIKU__ )
+      #define HB_OS_HAIKU
+   #endif
+#endif
+
 #ifndef HB_OS_UNIX
    #if defined( HB_OS_LINUX ) || \
        defined( HB_OS_DARWIN ) || \
        defined( HB_OS_BSD ) || \
        defined( HB_OS_SUNOS ) || \
-       defined( HB_OS_HPUX )
+       defined( HB_OS_HPUX ) || \
+       defined( HB_OS_HAIKU )
       #define HB_OS_UNIX
       /* Compatibility. Do not use this. */
       #ifdef HB_LEGACY_LEVEL2
Index: include/hbinit.h
===================================================================
--- include/hbinit.h	(revision 12490)
+++ include/hbinit.h	(working copy)
@@ -112,7 +112,8 @@
    #define HB_CALL_ON_STARTUP_END( func ) \
       }
 
-#elif defined( __GNUC__ ) || defined( __SUNPRO_C ) || defined( __SUNPRO_CC )
+#elif defined( __GNUC__ ) || defined( __SUNPRO_C ) || defined( __SUNPRO_CC ) || \
+      defined( __HAIKU__ )
 
    #if defined( HB_PRAGMA_STARTUP ) || defined( HB_MSC_STARTUP )
       #error Wrong macros set for startup code - clean your make/env settings.
Index: source/common/hbprintf.c
===================================================================
--- source/common/hbprintf.c	(revision 12490)
+++ source/common/hbprintf.c	(working copy)
@@ -160,7 +160,8 @@
     ( defined( __DJGPP__ ) && \
       ( __DJGPP__ < 2 || ( __DJGPP__ == 2 && __DJGPP_MINOR__ <= 3 ) ) ) || \
     ( defined( _MSC_VER ) && \
-      !( defined( __LCC__ ) || defined( __POCC__ ) || defined( __XCC__ ) ) )
+      !( defined( __LCC__ ) || defined( __POCC__ ) || defined( __XCC__ ) ) ) || \
+      ( defined( __GNUC__ ) && __GNUC__ < 3 )
    /* TODO: add other C compilers which does not support [u]intmax_t
     *       definitions (check C compiler version number).
     *       If compiler supports stdint.h then it should be added
@@ -283,7 +284,7 @@
 #  else
 #     define _x_long_dbl      long double
 #     if defined( __WATCOMC__ ) || defined( __MINGW32CE__ ) || defined( __CYGWIN__ ) || \
-         ( defined( HB_OS_WIN_CE ) && defined( __POCC__ ) )
+         ( defined( HB_OS_WIN_CE ) && defined( __POCC__ ) ) || defined( __HAIKU__ )
 #        define _HB_WRAP_MODFL_
 #        define _MODFD( x, p )   _hb_modfl( x, p )
 #     else
Index: source/rtl/hbsocket.c
===================================================================
--- source/rtl/hbsocket.c	(revision 12490)
+++ source/rtl/hbsocket.c	(working copy)
@@ -113,7 +113,7 @@
 
 #if defined( HB_OS_UNIX ) && ! defined( __CYGWIN__ )
 #  define HB_HAS_UNIX
-#  if !defined( __WATCOMC__ )
+#  if !defined( __WATCOMC__ ) && !defined( __HAIKU__ )
 #     define HB_HAS_INET_ATON
 #     define HB_HAS_INET_PTON
 #     define HB_HAS_INET_NTOP
@@ -1044,7 +1044,9 @@
          uiErr = HB_SOCKET_ERR_PROTOTYPE;
          break;
       case EOPNOTSUPP:
+#if defined( SOCKTNOSUPPORT )
       case ESOCKTNOSUPPORT:
+#endif
          uiErr = HB_SOCKET_ERR_NOSUPPORT;
          break;
       case EMFILE:
@@ -1094,9 +1096,11 @@
       case ESHUTDOWN:
          uiErr = HB_SOCKET_ERR_SHUTDOWN;
          break;
+#if defined( ETOOMANYREFS )
       case ETOOMANYREFS:
          uiErr = HB_SOCKET_ERR_TOOMANYREFS;
          break;
+#endif
       case EHOSTDOWN:
          uiErr = HB_SOCKET_ERR_HOSTDOWN;
          break;
Index: config/haiku/libs.mk
===================================================================
--- config/haiku/libs.mk	(revision 0)
+++ config/haiku/libs.mk	(revision 0)
@@ -0,0 +1,36 @@
+#
+# $Id: libs.mk 12466 2009-09-10 14:08:51Z vszakats $
+#
+
+SYSLIBS :=
+SYSLIBPATHS := /system/lib /boot/develop/abi/x86/gcc2/lib
+
+ifneq ($(HB_LINKING_RTL),)
+   ifeq ($(HB_CRS_LIB),)
+      HB_CRS_LIB := ncurses
+   endif
+   ifneq ($(HB_HAS_CURSES),)
+      SYSLIBS += $(HB_CRS_LIB)
+   endif
+   ifneq ($(HB_HAS_SLANG),)
+      SYSLIBS += slang
+   endif
+   ifneq ($(HB_HAS_X11),)
+      SYSLIBS += X11
+      # add 64-bit lib dir needed for some distros (red hat)
+      #ifneq ($(findstring 64,$(shell uname -m)),)
+      #   SYSLIBPATHS += /usr/X11R6/lib64
+      #endif
+      #SYSLIBPATHS += /usr/X11R6/lib
+   endif
+   ifneq ($(HB_HAS_PCRE),)
+      ifeq ($(HB_HAS_PCRE_LOCAL),)
+         SYSLIBS += pcre
+      endif
+   endif
+   ifeq ($(HB_HAS_ZLIB_LOCAL),)
+      SYSLIBS += z
+   endif
+   SYSLIBS += root socket
+endif
+
Index: config/haiku/gcc.mk
===================================================================
--- config/haiku/gcc.mk	(revision 0)
+++ config/haiku/gcc.mk	(revision 0)
@@ -0,0 +1,56 @@
+#
+# $Id: gcc.mk 12483 2009-09-12 09:01:27Z vszakats $
+#
+
+ifeq ($(HB_BUILD_MODE),cpp)
+   HB_CMP := g++
+else
+   HB_CMP := gcc
+endif
+
+OBJ_EXT := .o
+LIB_PREF := lib
+LIB_EXT := .a
+
+HB_DYN_COPT := -DHB_DYNLIB -fpic
+
+CC := $(HB_CCACHE) $(HB_CCPREFIX)$(HB_CMP)$(HB_CCPOSTFIX)
+CC_IN := -c
+CC_OUT := -o
+
+CPPFLAGS := -I. -I$(HB_INC_COMPILE)
+CFLAGS :=
+LDFLAGS :=
+
+ifneq ($(HB_BUILD_WARN),no)
+   CFLAGS += -Wall -W
+endif
+
+ifneq ($(HB_BUILD_OPTIM),no)
+   CFLAGS += -O3
+endif
+
+ifeq ($(HB_BUILD_DEBUG),yes)
+   CFLAGS += -g
+endif
+
+LD := $(HB_CCACHE) $(HB_CCPREFIX)$(HB_CMP)$(HB_CCPOSTFIX)
+LD_OUT := -o
+
+LIBPATHS := $(foreach dir,$(LIB_DIR) $(SYSLIBPATHS),-L$(dir))
+LDLIBS := $(foreach lib,$(LIBS) $(SYSLIBS),-l$(lib))
+
+LDFLAGS += $(LIBPATHS)
+
+AR := $(HB_CCPREFIX)ar
+ARFLAGS :=
+AR_RULE = $(AR) $(ARFLAGS) $(HB_USER_AFLAGS) rcs $(LIB_DIR)/$@ $(^F) || ( $(RM) $(LIB_DIR)/$@ && false )
+
+DY := $(CC)
+DFLAGS := -shared $(LIBPATHS)
+DY_OUT := -o$(subst x,x, )
+DLIBS := $(foreach lib,$(SYSLIBS),-l$(lib))
+
+DY_RULE = $(DY) $(DFLAGS) $(HB_USER_DFLAGS) $(DY_OUT)$(DYN_DIR)/$@ $^ $(DLIBS)
+
+include $(TOP)$(ROOT)config/rules.mk
Index: config/haiku/global.mk
===================================================================
--- config/haiku/global.mk	(revision 0)
+++ config/haiku/global.mk	(revision 0)
@@ -0,0 +1,11 @@
+#
+# $Id: global.mk 12483 2009-09-12 09:01:27Z vszakats $
+#
+
+all : first
+
+BIN_EXT :=
+DYN_EXT := .so
+DYN_PREF := lib
+
+HB_GT_LIBS += gttrm
Index: config/global.mk
===================================================================
--- config/global.mk	(revision 12490)
+++ config/global.mk	(working copy)
@@ -108,6 +108,8 @@
       HB_HOST_PLAT := dos
    else ifneq ($(findstring msdos,$(1)),)
       HB_HOST_PLAT := dos
+   else ifneq ($(findstring Haiku,$(1)),)
+      HB_HOST_PLAT := haiku
    endif
 
 endef
@@ -816,6 +818,12 @@
                            endif
                         endif
                      else
+                        ifeq ($(HB_PLATFORM),haiku)
+                           HB_COMP_PATH := $(call find_in_path,gcc)
+                           ifneq ($(HB_COMP_PATH),)
+                              HB_COMPILER := gcc
+                           endif
+                        endif
                         # add other platforms here
                      endif
                   endif
Index: config/detect.mk
===================================================================
--- config/detect.mk	(revision 12490)
+++ config/detect.mk	(working copy)
@@ -47,7 +47,7 @@
 _DET_VAR_HAS_ := HB_HAS_ZLIB
 _DET_FLT_PLAT :=
 _DET_FLT_COMP :=
-_DET_INC_DEFP := /usr/include
+_DET_INC_DEFP := /usr/include /boot/develop/headers/3rdparty
 _DET_INC_LOCL := $(realpath $(TOP)$(ROOT)external/zlib)
 _DET_INC_HEAD := /zlib.h
 
@@ -118,7 +118,7 @@
 _DET_VAR_HAS_ := HB_HAS_CURSES
 _DET_FLT_PLAT := !os2
 _DET_FLT_COMP :=
-_DET_INC_DEFP :=
+_DET_INC_DEFP := /boot/develop/headers/3rdparty
 _DET_INC_HEAD := /curses.h
 
 ifeq ($(HB_NCURSES_194),yes)
From harbour.01 at syenar.hu  Mon Sep 14 17:16:33 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 14 17:16:43 2009
Subject: [Harbour] if you have some time to kill....
In-Reply-To: <alpine.GSO.2.00.0909142212520.13711@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909142212520.13711@dawn.royalcomp.hu>
Message-ID: <E90C9AB0-163B-4876-884A-CD8A50D618AE@syenar.hu>

Hi,

Just great!

I'll upload it.

Brgds,
Viktor

On 2009.09.14., at 22:42, Tamas TEVESZ wrote:

>
> hi,
>
> i had, this was fun.
>
> it's barely over the "it just compiles" stage, there are a whole loads
> of problems with terminal, possibly network, and whatnot.
>
> anyway, if someone wants to chew this, it's a start. the downloadable
> haiku r1alpha1 iso contains everything one needs to get started ;)
>
> 2009.09.14 20:54:52 Haiku 1 BePC
> Harbour 2.0.0beta3 (Rev. 12490) GNU C 2.95 (32-bit) x86
> THREADS: 0
> N_LOOPS: 1000000
> [ T000: empty loop overhead ]...................................0.89
> ====================================================================
> [ T001: x := L_C ]..............................................0.00
> [ T002: x := L_N ]..............................................0.00
> [ T003: x := L_D ]..............................................0.00
> [ T004: x := S_C ]..............................................0.00
> [ T005: x := S_N ]..............................................0.00
> [ T006: x := S_D ]..............................................0.00
> [ T007: x := M->M_C ]...........................................0.00
> [ T008: x := M->M_N ]...........................................0.00
> [ T009: x := M->M_D ]...........................................0.00
> [ T010: x := M->P_C ]...........................................0.00
> [ T011: x := M->P_N ]...........................................0.00
> [ T012: x := M->P_D ]...........................................0.00
> [ T013: x := F_C ]..............................................4.17
> [ T014: x := F_N ]..............................................0.10
> [ T015: x := F_D ]..............................................0.00
> [ T016: x := o:Args ]...........................................0.13
> [ T017: x := o[2] ].............................................0.00
> [ T018: round( i / 1000, 2 ) ]..................................0.31
> [ T019: str( i / 1000 ) ].......................................4.34
> [ T020: val( s ) ]..............................................0.21
> [ T021: val( a [ i % 16 + 1 ] ) ]...............................0.90
> [ T022: dtos( d - i % 10000 ) ].................................1.88
> [ T023: eval( { || i % 16 } ) ].................................2.01
> [ T024: eval( bc := { || i % 16 } ) ]...........................0.00
> [ T025: eval( { |x| x % 16 }, i ) ].............................0.97
> [ T026: eval( bc := { |x| x % 16 }, i ) ].......................0.00
> [ T027: eval( { |x| f1( x ) }, i ) ]............................1.25
> [ T028: eval( bc := { |x| f1( x ) }, i ) ]......................0.20
> [ T029: eval( bc := &("{ |x| f1( x ) }"), i ) ].................0.33
> [ T030: x := &( "f1(" + str(i) + ")" ) ].......................22.08
> [ T031: bc := &( "{|x|f1(x)}" ), eval( bc, i ) ]...............25.36
> [ T032: x := valtype( x ) +  valtype( i ) ].....................1.93
> [ T033: x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ]..........5.00
> [ T034: x := a[ i % 16 + 1 ] == s ].............................0.17
> [ T035: x := a[ i % 16 + 1 ] = s ]..............................0.24
> [ T036: x := a[ i % 16 + 1 ] >= s ].............................0.25
> [ T037: x := a[ i % 16 + 1 ] <= s ].............................0.48
> [ T038: x := a[ i % 16 + 1 ] < s ]..............................0.23
> [ T039: x := a[ i % 16 + 1 ] > s ]..............................0.22
> [ T040: ascan( a, i % 16 ) ]....................................0.08
> [ T041: ascan( a, { |x| x == i % 16 } ) ].......................7.77
> [ T042: iif( i%1000==0, a:={}, ) , aadd(a,{i,1,.T.,s,s2,a2 ]....3.73
> [ T043: x := a ]................................................0.00
> [ T044: x := {} ]...............................................0.45
> [ T045: f0() ]..................................................0.00
> [ T046: f1( i ) ]...............................................0.00
> [ T047: f2( c[1...8] ) ]........................................0.00
> [ T048: f2( c[1...40000] ) ]....................................0.00
> [ T049: f2( @c[1...40000] ) ]...................................0.00
> [ T050: f2( @c[1...40000] ), c2 := c ]..........................0.00
> [ T051: f3( a, a2, s, i, s2, bc, i, n, x ) ]....................0.38
> [ T052: f2( a ) ]...............................................0.00
> [ T053: x := f4() ].............................................2.80
> [ T054: x := f5() ].............................................1.35
> [ T055: x := space(16) ]........................................0.99
> [ T056: f_prv( c ) ]............................................1.32
> ====================================================================
> [ total application time: ]...................................134.25
> [ total real time: ]..........................................139.30
>
> --  
> [-]
>
> mkdir / 
> nonexistent<haiku.diff>_______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vszakats at users.sourceforge.net  Mon Sep 14 18:06:19 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep 14 18:06:25 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12491] trunk/harbour
Message-ID: <E1MnJgh-000450-Qy@d5vjzd1.ch3.sourceforge.com>

Revision: 12491
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12491&view=rev
Author:   vszakats
Date:     2009-09-14 22:06:18 +0000 (Mon, 14 Sep 2009)

Log Message:
-----------
2009-09-15 00:02 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * include/hbthread.h
  * include/hbdefs.h
  * include/hbsetup.h
  * include/hbinit.h
  * source/common/hbprintf.c
  * source/rtl/hbsocket.c
  + config/haiku
  + config/haiku/libs.mk
  + config/haiku/gcc.mk
  + config/haiku/global.mk
  * config/global.mk
  * config/detect.mk
    + Applied patch adding Haiku OS port to Harbour.
      By Tamas Tevesz.

  * INSTALL
    + Added haiku to supported OS list (in 'experimental' status)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/config/detect.mk
    trunk/harbour/config/global.mk
    trunk/harbour/include/hbdefs.h
    trunk/harbour/include/hbinit.h
    trunk/harbour/include/hbsetup.h
    trunk/harbour/include/hbthread.h
    trunk/harbour/source/common/hbprintf.c
    trunk/harbour/source/rtl/hbsocket.c

Added Paths:
-----------
    trunk/harbour/config/haiku/
    trunk/harbour/config/haiku/gcc.mk
    trunk/harbour/config/haiku/global.mk
    trunk/harbour/config/haiku/libs.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Mon Sep 14 18:43:46 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 14 18:43:56 2009
Subject: [Harbour] if you have some time to kill....
In-Reply-To: <alpine.GSO.2.00.0909142212520.13711@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909142212520.13711@dawn.royalcomp.hu>
Message-ID: <F753C269-3187-4B93-8235-F8E0447E2DA1@syenar.hu>

Hi,

What do you think to rename HAIKU to BEOS inside Harbour?

It'd certainly sound more familiar for ppl, but I wonder
if it would be accurate.

[ f.e. OSTYPE returns 'beos' in Haiku, uname -m returns 'BePC'. ]

BTW, not wanting to give any ideas ;) but we're still missing
two important ports of Harbour: IBM AIX and OpenVMS :)

Brgds,
Viktor

On 2009.09.14., at 22:42, Tamas TEVESZ wrote:

>
> hi,
>
> i had, this was fun.
>
> it's barely over the "it just compiles" stage, there are a whole loads
> of problems with terminal, possibly network, and whatnot.
>
> anyway, if someone wants to chew this, it's a start. the downloadable
> haiku r1alpha1 iso contains everything one needs to get started ;)
>
> 2009.09.14 20:54:52 Haiku 1 BePC
> Harbour 2.0.0beta3 (Rev. 12490) GNU C 2.95 (32-bit) x86
> THREADS: 0
> N_LOOPS: 1000000
> [ T000: empty loop overhead ]...................................0.89
> ====================================================================
> [ T001: x := L_C ]..............................................0.00
> [ T002: x := L_N ]..............................................0.00
> [ T003: x := L_D ]..............................................0.00
> [ T004: x := S_C ]..............................................0.00
> [ T005: x := S_N ]..............................................0.00
> [ T006: x := S_D ]..............................................0.00
> [ T007: x := M->M_C ]...........................................0.00
> [ T008: x := M->M_N ]...........................................0.00
> [ T009: x := M->M_D ]...........................................0.00
> [ T010: x := M->P_C ]...........................................0.00
> [ T011: x := M->P_N ]...........................................0.00
> [ T012: x := M->P_D ]...........................................0.00
> [ T013: x := F_C ]..............................................4.17
> [ T014: x := F_N ]..............................................0.10
> [ T015: x := F_D ]..............................................0.00
> [ T016: x := o:Args ]...........................................0.13
> [ T017: x := o[2] ].............................................0.00
> [ T018: round( i / 1000, 2 ) ]..................................0.31
> [ T019: str( i / 1000 ) ].......................................4.34
> [ T020: val( s ) ]..............................................0.21
> [ T021: val( a [ i % 16 + 1 ] ) ]...............................0.90
> [ T022: dtos( d - i % 10000 ) ].................................1.88
> [ T023: eval( { || i % 16 } ) ].................................2.01
> [ T024: eval( bc := { || i % 16 } ) ]...........................0.00
> [ T025: eval( { |x| x % 16 }, i ) ].............................0.97
> [ T026: eval( bc := { |x| x % 16 }, i ) ].......................0.00
> [ T027: eval( { |x| f1( x ) }, i ) ]............................1.25
> [ T028: eval( bc := { |x| f1( x ) }, i ) ]......................0.20
> [ T029: eval( bc := &("{ |x| f1( x ) }"), i ) ].................0.33
> [ T030: x := &( "f1(" + str(i) + ")" ) ].......................22.08
> [ T031: bc := &( "{|x|f1(x)}" ), eval( bc, i ) ]...............25.36
> [ T032: x := valtype( x ) +  valtype( i ) ].....................1.93
> [ T033: x := strzero( i % 100, 2 ) $ a[ i % 16 + 1 ] ]..........5.00
> [ T034: x := a[ i % 16 + 1 ] == s ].............................0.17
> [ T035: x := a[ i % 16 + 1 ] = s ]..............................0.24
> [ T036: x := a[ i % 16 + 1 ] >= s ].............................0.25
> [ T037: x := a[ i % 16 + 1 ] <= s ].............................0.48
> [ T038: x := a[ i % 16 + 1 ] < s ]..............................0.23
> [ T039: x := a[ i % 16 + 1 ] > s ]..............................0.22
> [ T040: ascan( a, i % 16 ) ]....................................0.08
> [ T041: ascan( a, { |x| x == i % 16 } ) ].......................7.77
> [ T042: iif( i%1000==0, a:={}, ) , aadd(a,{i,1,.T.,s,s2,a2 ]....3.73
> [ T043: x := a ]................................................0.00
> [ T044: x := {} ]...............................................0.45
> [ T045: f0() ]..................................................0.00
> [ T046: f1( i ) ]...............................................0.00
> [ T047: f2( c[1...8] ) ]........................................0.00
> [ T048: f2( c[1...40000] ) ]....................................0.00
> [ T049: f2( @c[1...40000] ) ]...................................0.00
> [ T050: f2( @c[1...40000] ), c2 := c ]..........................0.00
> [ T051: f3( a, a2, s, i, s2, bc, i, n, x ) ]....................0.38
> [ T052: f2( a ) ]...............................................0.00
> [ T053: x := f4() ].............................................2.80
> [ T054: x := f5() ].............................................1.35
> [ T055: x := space(16) ]........................................0.99
> [ T056: f_prv( c ) ]............................................1.32
> ====================================================================
> [ total application time: ]...................................134.25
> [ total real time: ]..........................................139.30
>
> --  
> [-]
>
> mkdir / 
> nonexistent<haiku.diff>_______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From ice at extreme.hu  Mon Sep 14 19:09:20 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Mon Sep 14 19:09:28 2009
Subject: [Harbour] if you have some time to kill....
In-Reply-To: <F753C269-3187-4B93-8235-F8E0447E2DA1@syenar.hu>
References: <alpine.GSO.2.00.0909142212520.13711@dawn.royalcomp.hu>
	<F753C269-3187-4B93-8235-F8E0447E2DA1@syenar.hu>
Message-ID: <alpine.GSO.2.00.0909150055290.13711@dawn.royalcomp.hu>

On Tue, 15 Sep 2009, Viktor Szak?ts wrote:

hi,

 > What do you think to rename HAIKU to BEOS inside Harbour?

as you see fit.

 > It'd certainly sound more familiar for ppl, but I wonder
 > if it would be accurate.

i absolutely have no idea. six hours ago i didn't even really know 
haiku exists (sure, i read about it every now and then, but that was 
just about it...)

 > BTW, not wanting to give any ideas ;) but we're still missing
 > two important ports of Harbour: IBM AIX and OpenVMS :)

i am ready to loan you, for an extended period of time, an ibm 
intellistation 9114/275 (it's about a 1ghz power4 with about a gig of 
ram, sadly no disk but i borrow one) and an almost fully equipped 
vaxstation vlc 4000 :))

and you are forgetting sco (yes, they are still used all over). but i 
am not :)

aix (damned be thy name) shouldn't be a problem. vms... good luck? :) 
(but i have good connections to very knowledgeable vms people :)


-- 
[-]

mkdir /nonexistent
From bedipritpal at hotmail.com  Mon Sep 14 20:06:54 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep 14 20:07:00 2009
Subject: [Harbour] NETIO - Real Web IP - Application Behavior
In-Reply-To: <4AAE9ECB.5030000@elart.it>
References: <25440212.post@talk.nabble.com> <4AAE9ECB.5030000@elart.it>
Message-ID: <25445752.post@talk.nabble.com>


Hi


elart wrote:
> 
> I have a similar issue on Linux and Przemek tell me to link at compile 
> time the -gtwin lib.
> 

What part GT has to play with NetIO ?

BTW on LAN and on 127.0.0.1 I am getting the correct results.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/NETIO---Real-Web-IP---Application-Behavior-tp25440212p25445752.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From elart at elart.it  Mon Sep 14 20:16:34 2009
From: elart at elart.it (elart)
Date: Mon Sep 14 20:16:52 2009
Subject: [Harbour] NETIO - Real Web IP - Application Behavior
In-Reply-To: <25445752.post@talk.nabble.com>
References: <25440212.post@talk.nabble.com> <4AAE9ECB.5030000@elart.it>
	<25445752.post@talk.nabble.com>
Message-ID: <4AAEDCE2.4060508@elart.it>

On 09/15/2009 02:06 AM, Pritpal Bedi wrote:
>
> Hi
>
>
> elart wrote:
>>
>> I have a similar issue on Linux and Przemek tell me to link at compile
>> time the -gtwin lib.
>>
>
> What part GT has to play with NetIO ?
>
> BTW on LAN and on 127.0.0.1 I am getting the correct results.
>
> Regards
> Pritpal Bedi
>

*********************************************************
Howto compile the harbour/contrib/hbnetio/test/netiotst
**********************************************************

# cd $HOME/src/harbour/contrib/hbnetio/tests

Just add the directory where hbwin is installed (/tmp/hbwin in my Linux 
box) to you PATH, i.e.:

# export PATH=/tmp/hbwin/bin:$PATH

to your *nix PATH and then:

# hbwmk -static -n -w -es2 -mt -gtwin netiotst

To check the file generated

# file netiotst.exe
netiotst.exe: PE32 executable for MS Windows (GUI) Intel 80386 32-bit

To run the test...

wine ./netiotst.exe


---------------------------

Below some sent to me by Przemek

Best regards

Marco




****************************************************************************************************
Przemek note...
****************************************************************************************************
NETIO server application has to be linked with MT HVM version.
Please use -mt hbwmk switch to compile server.

 > > give me the wine app started window with the message it cannot start
 > > server...
 > > Can you test my app in your enviroment...
 > > in attach the hb_testio.tar.gz
It works if you compile netioserver.prg with -mt switch.
I tested Windows and Linux binaries.
BTW for normal usage I suggest to always use native binaries.
If you want to run server on Linux machine then create native
Linux netio server binaries. And of course native client binaries.
Of course you can connect to the one server from different stations
working with WIN, DOS, OS2 or different *nixes.

And remove from netioserver.prg this code:

    if empty( cServer )
       cServer := '127.0.0.1'
    endif

it reduces connections to 127.0.0.1 only so such server cannot be accessed
remotely. Use empty value or 0.0.0.0 if you want to give access from
different interfaces without any limitation.

best regards,
Przemek
From bedipritpal at hotmail.com  Mon Sep 14 20:41:01 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep 14 20:41:06 2009
Subject: [Harbour] NETIO - Real Web IP - Application Behavior
In-Reply-To: <4AAEDCE2.4060508@elart.it>
References: <25440212.post@talk.nabble.com> <4AAE9ECB.5030000@elart.it>
	<25445752.post@talk.nabble.com> <4AAEDCE2.4060508@elart.it>
Message-ID: <25446023.post@talk.nabble.com>


Hi

BUT did you read my message carefully ?

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/NETIO---Real-Web-IP---Application-Behavior-tp25440212p25446023.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From ssbbstw at pchome.com.tw  Mon Sep 14 20:47:36 2009
From: ssbbstw at pchome.com.tw (WenSheng)
Date: Mon Sep 14 20:47:50 2009
Subject: [Harbour] about NETIO
In-Reply-To: <20090914162508.GA14003@uran.home.aster.pl>
References: <20090914104704.997B.84A669A0@mail.zzz.com.tw>
	<20090914162508.GA14003@uran.home.aster.pl>
Message-ID: <20090915084145.34CB.84A669A0@mail.zzz.com.tw>


Thank You!

Yes, I had change prg code to view change of memory and it's up/down,

I have another question.
How can I stop server listen ?
like code:
//---------------------
   do while .t.
      pConnectionSocket := NETIO_ACCEPT( pListenSocket )
      ? 'Have one connect...', pConnectionSocket, memory(0)
      NETIO_SERVER( pConnectionSocket )
   enddo
//---------------------
The code is loop to accept client connect,
I don't know how to STOP SERVER on server side.



From april_white at sympatico.ca  Mon Sep 14 21:09:07 2009
From: april_white at sympatico.ca (April White)
Date: Mon Sep 14 21:09:17 2009
Subject: [Harbour] sample of my hbdoc2 results
In-Reply-To: <73F05D2A-D3A5-43AD-9C51-FF2F6D353C49@syenar.hu>
References: <BLU0-SMTP55241942156B87DEA06434EFE50@phx.gbl>
	<73F05D2A-D3A5-43AD-9C51-FF2F6D353C49@syenar.hu>
Message-ID: <BLU0-SMTP622C976CA187E853517351EFE30@phx.gbl>

Viktor Szak?ts wrote:
> Great job April. Feel free to upload it in place of old hbdoc.
I want to upload this as soon as possible but I also want to keep the 
existing hbdoc for reference

I'm going to:
- backup my local repository,
- do a checkout
- do an update of the hbdoc folder to restore the current version
    - is this the correct operation?  I originally did some changed to 
hbdoc before I started hbdoc2
- add my 'hbdoc2' folder; in the future I/we can remove hbdoc and rename 
hbdoc2

> BTW, for quality .pdf output you can try hbhpdf lib, I have very
> good experiences with it.
Thank you Viktor.  I'll do some simple work with this soon; I need to 
fully implement 'seealso' and other links within HTML files before I can 
tackle RTF and PDF.

April

-- 
A male gynecologist is like an auto mechanic who never owned a car.
- Carrie Snow

From vszakats at users.sourceforge.net  Mon Sep 14 21:57:20 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep 14 21:57:26 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12492] trunk/harbour
Message-ID: <E1MnNIG-0004Kg-Vi@dn4whf1.ch3.sourceforge.com>

Revision: 12492
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12492&view=rev
Author:   vszakats
Date:     2009-09-15 01:57:20 +0000 (Tue, 15 Sep 2009)

Log Message:
-----------
2009-09-15 03:56 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    + Extended autodetection of mingw cross-compiler on *nix system.
    * Disabled native compiler tool autodetection for non-*nix targets
      on *nix hosts. This will need further refinement.

  * config/haiku/libs.mk
    - Deleted commented lines.

  * config/global.mk
    + Some more Haiku/BeOS autodetection.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/global.mk
    trunk/harbour/config/haiku/libs.mk
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From ice at extreme.hu  Mon Sep 14 22:01:06 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Mon Sep 14 22:01:13 2009
Subject: [Harbour] if you have some time to kill....
In-Reply-To: <alpine.GSO.2.00.0909150055290.13711@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909142212520.13711@dawn.royalcomp.hu>
	<F753C269-3187-4B93-8235-F8E0447E2DA1@syenar.hu>
	<alpine.GSO.2.00.0909150055290.13711@dawn.royalcomp.hu>
Message-ID: <alpine.GSO.2.00.0909150316180.13711@dawn.royalcomp.hu>


the following (and attached, too) makes it possible to just "make", 
and get most of the stuff (compiled, at least). after this, my regular 
build tests still build.

i also need some help. it seems that there's only a static library for 
ncurses, and no matter how i bend things, it just won't get linked 
into gtcrs (libncurses.a is ~400k, libgtcrs.a stays at ~65k, and 
curses doesn't seem to work). any idea how to twist it so that it gets 
linked in?

viktor, could you please, when you find some time, whip up some 
support for this combination in hbmk2?

also a second look at the changes in contrib/hbtpathy/tpunix.c would 
be great.

thanks,

Index: external/libpng/Makefile
===================================================================
--- external/libpng/Makefile	(revision 12491)
+++ external/libpng/Makefile	(working copy)
@@ -42,7 +42,7 @@
    _DET_VAR_HAS_ := HB_HAS_PNG
    _DET_FLT_PLAT :=
    _DET_FLT_COMP :=
-   _DET_INC_DEFP := /usr/include
+   _DET_INC_DEFP := /usr/include /boot/develop/headers/3rdparty
    _DET_INC_LOCL := $(TOP)$(ROOT)external/libpng
    _DET_INC_HEAD := /png.h
    include $(TOP)$(ROOT)config/detfun.mk
Index: contrib/xhb/hbserv.c
===================================================================
--- contrib/xhb/hbserv.c	(revision 12491)
+++ contrib/xhb/hbserv.c	(working copy)
@@ -68,7 +68,9 @@
     !defined( HB_OS_DARWIN_5 ) && \
     ! ( defined( HB_OS_WIN_CE ) && defined( __POCC__ ) ) && \
     !defined( HB_OS_WIN_64 ) && \
-    ( !defined( HB_OS_OS2 ) || defined( HB_OS_OS2_GCC ) )
+    ( !defined( HB_OS_OS2 ) || defined( HB_OS_OS2_GCC ) ) && \
+    !defined( HB_OS_HAIKU )
+/* TODO: Haiku will supposedly do this later on, read /boot/develop/headers/posix/signal.h */
 
 #if defined( HB_OS_UNIX ) || defined( HB_OS_OS2_GCC )
 #include <sys/types.h>
Index: contrib/hbtpathy/tpunix.c
===================================================================
--- contrib/hbtpathy/tpunix.c	(revision 12491)
+++ contrib/hbtpathy/tpunix.c	(working copy)
@@ -125,8 +125,10 @@
    /* Enable the receiver and set local mode... */
    options.c_cflag |= ( CLOCAL | CREAD );
 
+#if defined( cfmakeraw )
    /* Raw input from device */
    cfmakeraw( &options );
+#endif
 
    /* Reset data bits ( cfmakeraw() puts it to CS8 ) */
    options.c_cflag &= ~CSIZE;
@@ -219,41 +221,49 @@
 
 HB_FUNC( __TP_ISDCD )
 {
+#if defined( TIOCMGET )
    int status;
 
    if ( ioctl( hb_parnl( 1 ), TIOCMGET, &status ) == 0 )
       hb_retl( ( status & TIOCM_CD ) == TIOCM_CD );
    else
+#endif
       hb_retl( FALSE );
 }
 
 HB_FUNC( __TP_ISRI )
 {
+#if defined( TIOCMGET )
    int status;
 
    if ( ioctl( hb_parnl( 1 ), TIOCMGET, &status ) == 0 )
       hb_retl( ( status & TIOCM_RI ) == TIOCM_RI );
    else
+#endif
       hb_retl( FALSE );
 }
 
 HB_FUNC( __TP_ISDSR )
 {
+#if defined( TIOCMGET )
    int status;
 
    if ( ioctl( hb_parnl( 1 ), TIOCMGET, &status ) == 0 )
       hb_retl( ( status & TIOCM_DSR ) == TIOCM_DSR );
    else
+#endif
       hb_retl( FALSE );
 }
 
 HB_FUNC( __TP_ISCTS )
 {
+#if defined( TIOCMGET )
    int status;
 
    if ( ioctl( hb_parnl( 1 ), TIOCMGET, &status ) == 0 )
       hb_retl( ( status & TIOCM_CTS ) == TIOCM_CTS );
    else
+#endif
       hb_retl( FALSE );
 }
 
Index: contrib/hbsqlit3/Makefile
===================================================================
--- contrib/hbsqlit3/Makefile	(revision 12491)
+++ contrib/hbsqlit3/Makefile	(working copy)
@@ -19,7 +19,7 @@
 _DET_VAR_HAS_ := HB_HAS_SQLITE3
 _DET_FLT_PLAT :=
 _DET_FLT_COMP :=
-_DET_INC_DEFP := /usr/include
+_DET_INC_DEFP := /usr/include /boot/common/include
 _DET_INC_LOCL := $(TOP)$(ROOT)external/sqlite3
 _DET_INC_HEAD := /sqlite3.h
 include $(TOP)$(ROOT)config/detfun.mk
Index: config/detect.mk
===================================================================
--- config/detect.mk	(revision 12491)
+++ config/detect.mk	(working copy)
@@ -73,7 +73,7 @@
 _DET_VAR_HAS_ := HB_HAS_OPENSSL
 _DET_FLT_PLAT :=
 _DET_FLT_COMP := !watcom
-_DET_INC_DEFP := /usr/include /usr/local/ssl/include
+_DET_INC_DEFP := /usr/include /usr/local/ssl/include /boot/common/include
 _DET_INC_HEAD := /openssl/ssl.h
 
 include $(TOP)$(ROOT)config/detfun.mk

-- 
[-]

mkdir /nonexistent
-------------- next part --------------
Index: external/libpng/Makefile
===================================================================
--- external/libpng/Makefile	(revision 12491)
+++ external/libpng/Makefile	(working copy)
@@ -42,7 +42,7 @@
    _DET_VAR_HAS_ := HB_HAS_PNG
    _DET_FLT_PLAT :=
    _DET_FLT_COMP :=
-   _DET_INC_DEFP := /usr/include
+   _DET_INC_DEFP := /usr/include /boot/develop/headers/3rdparty
    _DET_INC_LOCL := $(TOP)$(ROOT)external/libpng
    _DET_INC_HEAD := /png.h
    include $(TOP)$(ROOT)config/detfun.mk
Index: contrib/xhb/hbserv.c
===================================================================
--- contrib/xhb/hbserv.c	(revision 12491)
+++ contrib/xhb/hbserv.c	(working copy)
@@ -68,7 +68,9 @@
     !defined( HB_OS_DARWIN_5 ) && \
     ! ( defined( HB_OS_WIN_CE ) && defined( __POCC__ ) ) && \
     !defined( HB_OS_WIN_64 ) && \
-    ( !defined( HB_OS_OS2 ) || defined( HB_OS_OS2_GCC ) )
+    ( !defined( HB_OS_OS2 ) || defined( HB_OS_OS2_GCC ) ) && \
+    !defined( HB_OS_HAIKU )
+/* TODO: Haiku will supposedly do this later on, read /boot/develop/headers/posix/signal.h */
 
 #if defined( HB_OS_UNIX ) || defined( HB_OS_OS2_GCC )
 #include <sys/types.h>
Index: contrib/hbtpathy/tpunix.c
===================================================================
--- contrib/hbtpathy/tpunix.c	(revision 12491)
+++ contrib/hbtpathy/tpunix.c	(working copy)
@@ -125,8 +125,10 @@
    /* Enable the receiver and set local mode... */
    options.c_cflag |= ( CLOCAL | CREAD );
 
+#if defined( cfmakeraw )
    /* Raw input from device */
    cfmakeraw( &options );
+#endif
 
    /* Reset data bits ( cfmakeraw() puts it to CS8 ) */
    options.c_cflag &= ~CSIZE;
@@ -219,41 +221,49 @@
 
 HB_FUNC( __TP_ISDCD )
 {
+#if defined( TIOCMGET )
    int status;
 
    if ( ioctl( hb_parnl( 1 ), TIOCMGET, &status ) == 0 )
       hb_retl( ( status & TIOCM_CD ) == TIOCM_CD );
    else
+#endif
       hb_retl( FALSE );
 }
 
 HB_FUNC( __TP_ISRI )
 {
+#if defined( TIOCMGET )
    int status;
 
    if ( ioctl( hb_parnl( 1 ), TIOCMGET, &status ) == 0 )
       hb_retl( ( status & TIOCM_RI ) == TIOCM_RI );
    else
+#endif
       hb_retl( FALSE );
 }
 
 HB_FUNC( __TP_ISDSR )
 {
+#if defined( TIOCMGET )
    int status;
 
    if ( ioctl( hb_parnl( 1 ), TIOCMGET, &status ) == 0 )
       hb_retl( ( status & TIOCM_DSR ) == TIOCM_DSR );
    else
+#endif
       hb_retl( FALSE );
 }
 
 HB_FUNC( __TP_ISCTS )
 {
+#if defined( TIOCMGET )
    int status;
 
    if ( ioctl( hb_parnl( 1 ), TIOCMGET, &status ) == 0 )
       hb_retl( ( status & TIOCM_CTS ) == TIOCM_CTS );
    else
+#endif
       hb_retl( FALSE );
 }
 
Index: contrib/hbsqlit3/Makefile
===================================================================
--- contrib/hbsqlit3/Makefile	(revision 12491)
+++ contrib/hbsqlit3/Makefile	(working copy)
@@ -19,7 +19,7 @@
 _DET_VAR_HAS_ := HB_HAS_SQLITE3
 _DET_FLT_PLAT :=
 _DET_FLT_COMP :=
-_DET_INC_DEFP := /usr/include
+_DET_INC_DEFP := /usr/include /boot/common/include
 _DET_INC_LOCL := $(TOP)$(ROOT)external/sqlite3
 _DET_INC_HEAD := /sqlite3.h
 include $(TOP)$(ROOT)config/detfun.mk
Index: config/detect.mk
===================================================================
--- config/detect.mk	(revision 12491)
+++ config/detect.mk	(working copy)
@@ -73,7 +73,7 @@
 _DET_VAR_HAS_ := HB_HAS_OPENSSL
 _DET_FLT_PLAT :=
 _DET_FLT_COMP := !watcom
-_DET_INC_DEFP := /usr/include /usr/local/ssl/include
+_DET_INC_DEFP := /usr/include /usr/local/ssl/include /boot/common/include
 _DET_INC_HEAD := /openssl/ssl.h
 
 include $(TOP)$(ROOT)config/detfun.mk
From vszakats at users.sourceforge.net  Mon Sep 14 22:21:42 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep 14 22:21:48 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12493] trunk/harbour
Message-ID: <E1MnNfq-0004tp-SS@dn4whf1.ch3.sourceforge.com>

Revision: 12493
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12493&view=rev
Author:   vszakats
Date:     2009-09-15 02:21:41 +0000 (Tue, 15 Sep 2009)

Log Message:
-----------
2009-09-15 04:07 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * INSTALL
  * include/hbthread.h
  * include/hbdefs.h
  * include/hbsetup.h
  - config/haiku
  + config/beos
  * config/global.mk
    * Changed Haiku's internal name in Harbour to BeOS.
      HB_OS_HAIKU -> HB_OS_BEOS
      'haiku' -> 'beos'
    * Changed __HAIKU__ guards to HB_OS_BEOS (two occurrences).
      Hope this is right.

  * external/libpng/Makefile
  * contrib/xhb/hbserv.c
  * contrib/hbtpathy/tpunix.c
  * contrib/hbsqlit3/Makefile
  * config/detect.mk
    + Applied 2nd Haiku patch by Tamas Tevesz.
    ; Please review hbtpathy patch.
    ; I've changed one HB_OS_HAIKU reference to __HAIKU__ since
      it looks to be a Haiku specific thing (thus HB_OS_BEOS doesn't
      seem appropriate).

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/config/detect.mk
    trunk/harbour/config/global.mk
    trunk/harbour/contrib/hbsqlit3/Makefile
    trunk/harbour/contrib/hbtpathy/tpunix.c
    trunk/harbour/contrib/xhb/hbserv.c
    trunk/harbour/external/libpng/Makefile
    trunk/harbour/include/hbdefs.h
    trunk/harbour/include/hbsetup.h
    trunk/harbour/include/hbthread.h
    trunk/harbour/source/common/hbprintf.c
    trunk/harbour/source/rtl/hbsocket.c

Added Paths:
-----------
    trunk/harbour/config/beos/

Removed Paths:
-------------
    trunk/harbour/config/haiku/


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Tue Sep 15 03:28:49 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 15 03:28:57 2009
Subject: [Harbour] NETIO - Real Web IP - Application Behavior
In-Reply-To: <4AAEDCE2.4060508@elart.it>
References: <25440212.post@talk.nabble.com> <4AAE9ECB.5030000@elart.it>
	<25445752.post@talk.nabble.com> <4AAEDCE2.4060508@elart.it>
Message-ID: <905D22C0-55AD-4084-A1E0-506B787ECFB9@syenar.hu>

> *********************************************************
> Howto compile the harbour/contrib/hbnetio/test/netiotst
> **********************************************************
>
> # cd $HOME/src/harbour/contrib/hbnetio/tests
>
> Just add the directory where hbwin is installed (/tmp/hbwin in my  
> Linux box) to you PATH, i.e.:
>
> # export PATH=/tmp/hbwin/bin:$PATH
>
> to your *nix PATH and then:
>
> # hbwmk -static -n -w -es2 -mt -gtwin netiotst

After recent patch, it's much easier to simply issue
this one command:

hbmk2 netiotst -platform=win

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 15 03:42:43 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 15 03:42:51 2009
Subject: [Harbour] if you have some time to kill....
In-Reply-To: <alpine.GSO.2.00.0909150055290.13711@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909142212520.13711@dawn.royalcomp.hu>
	<F753C269-3187-4B93-8235-F8E0447E2DA1@syenar.hu>
	<alpine.GSO.2.00.0909150055290.13711@dawn.royalcomp.hu>
Message-ID: <84902548-BAF6-4BB0-AC25-DB86C429E2C2@syenar.hu>

>> BTW, not wanting to give any ideas ;) but we're still missing
>> two important ports of Harbour: IBM AIX and OpenVMS :)
>
> i am ready to loan you, for an extended period of time, an ibm
> intellistation 9114/275 (it's about a 1ghz power4 with about a gig of
> ram, sadly no disk but i borrow one) and an almost fully equipped
> vaxstation vlc 4000 :))
>
> and you are forgetting sco (yes, they are still used all over). but i
> am not :)
>
> aix (damned be thy name) shouldn't be a problem. vms... good luck? :)
> (but i have good connections to very knowledgeable vms people :)

:) Okay, thx for the nice offer, probably I have to extend my "lab"
first to make room for such beasts ;) I'd be most happy with some
sort of remote access to these gears, not that it wouldn't be cool
to check them in person. Anyway AIX looks a relatively easy trip
compared to VMS (although it has GNU tools ported).

BTW, if someone is interested I have Oracle 10g running here already,
and I can pass the access info in private.

Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Tue Sep 15 05:23:16 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Sep 15 05:23:23 2009
Subject: [Harbour] Error using OLE
Message-ID: <42C8CE6069994F6385E68910BA78EE11@emag>

The following sample

FUNCTION MAIN()

    LOCAL oWord

    oWord = CREATEOBJECT( "Word.Application" )

    oWord:Documents:Add()

    oWord:Visible = .T.

    RETURN NIL

stops with

Error TOleAuto/65535  : TOLEAUTO:NEW
Called from THROW(0)
Called from TOLEAUTO:NEW(0)
Called from CREATEOBJECT(0)
Called from MAIN(5)

It works fine using xHarbour. What am I missing?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From druzus at acn.waw.pl  Tue Sep 15 05:24:55 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 15 05:25:02 2009
Subject: [Harbour] NETIO - Real Web IP - Application Behavior
In-Reply-To: <4AAE9ECB.5030000@elart.it>
References: <25440212.post@talk.nabble.com> <4AAE9ECB.5030000@elart.it>
Message-ID: <20090915092455.GA655@uran.home.aster.pl>

On Mon, 14 Sep 2009, elart wrote:

Hi,

>> 1. Opened a port on my router, 63000, to be accessible from outside.
>> 2. Obtained temporary IP for my computer from no-ip .com, say, 64.123.212.67
>> 3. Verified that the port 63000 is visible on that IP with some net tool.
>> 4. Started NetIOSrv.exe 63000 0.0.0.0 c:\someFolderAsRootFolder
>> 5. Executed the application with 64.123.212.67 63000
>> Application just hanged for indefinitely and did not showup next screen.
>> Normally if port is not accessible or NerIOSrv.exe is not running,
>> application returns immediately with an error.
>> What could be the reasons for this behavior?
> I have a similar issue on Linux and Przemek tell me to link at compile time 
> the -gtwin lib.

It was completely different thing.
When you execute GTSTD code in WINE then inkey() without timeout stops
application so I suggested you to change the GT. That's all. It has
nothing to NETIO or problem described by Pritpal.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep 15 05:48:40 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 15 05:48:45 2009
Subject: [Harbour] NETIO - Real Web IP - Application Behavior
In-Reply-To: <25440212.post@talk.nabble.com>
References: <25440212.post@talk.nabble.com>
Message-ID: <20090915094840.GB655@uran.home.aster.pl>

On Mon, 14 Sep 2009, Pritpal Bedi wrote:

Hi,

> I did as follows:
> 1. Opened a port on my router, 63000, to be accessible from outside.
> 2. Obtained temporary IP for my computer from no-ip .com, say, 64.123.212.67
> 3. Verified that the port 63000 is visible on that IP with some net tool.
> 4. Started NetIOSrv.exe 63000 0.0.0.0 c:\someFolderAsRootFolder
> 5. Executed the application with 64.123.212.67 63000
> Application just hanged for indefinitely and did not showup next screen.
> Normally if port is not accessible or NerIOSrv.exe is not running, 
> application returns immediately with an error.
> What could be the reasons for this behavior?

I guess that you are talking about client application not server
and it stops inside connect(). Usually low level TCP/IP code in the
OS should interrupt this operation after some timeout if it cannot
be realized. Sometimes this timeout is really huge. It depends on many
things, i.e. average time of packet confirmation which in TCP IP
is dynamically updated following the transport layer quality.
Anyhow it's out of Harbour or any other application controll.
If connection freeze the process forever then I can only guess
it's side effect of used firewall or some other similar protection
software. Otherwise it's serious bug in TCP/IP implementation which
should be reported to MS but I rather do not believe that Windows
has such serious problem with basic functionality.
If you can exclude some other trivial problem like mistakes in
routing tables or sth like that then for me it has to be problem
with firewall which blocks connection only partially and may
send some sync packages waiting for user interaction (i.e. to
confirm if connection is legal) what effectively blocks timeout
on client side.
If you want to you can pass as 3-parameter of netio_connect() timeout
in milliseconds. Default is -1 what means not user space timeout and
operation should be interrupted by OS inside connect() function.
If you use 10000 then after 10 sec. netio_connect() will return .F.
signaling the problem.
Of course it's only workaround with protection against freezing
the application not real solution but because the problem is outside
Harbour I cannot suggest you anything more as programmer solution
(I do not want to introduce some low level TCP/IP hacks because in
most of cases they increase the problem instead of help ;-))
Look at your firewall configuration. It's possible that the problem
is trivial, i.e. firewall needs valid DNS entry for client and/or
server station and it's enough to disable such verification.

best regards,
Przemek
From M.Horodyski at pzuzycie.com.pl  Tue Sep 15 05:55:35 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Tue Sep 15 05:55:43 2009
Subject: [Harbour] SF.net SVN: harbour-project:[10782] trunk/harbour
In-Reply-To: <22899832.post@talk.nabble.com>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AF1C@PINK.zycie.pzu>

>-----Original Message-----
>From: Pritpal Bedi [mailto:bedipritpal@hotmail.com] 
>Sent: Monday, April 06, 2009 12:58 AM
>To: harbour@harbour-project.org
>Subject: Re: [Harbour] SF.net SVN: harbour-project:[10782] 
>trunk/harbour

[...]

I'm read old instruction, how build qt* :

>PROGNOSIS:
>           - Stay in harbour/contrib/hbqt/generator
>           - hbmk2.exe hbqtgen
>           - del ..\gensource\*.*
>           - del ..\doc\*.*
>           - hbqtgen.exe qt45.qtp
>           - cd ..
>           - you should be staying at harbour/contrib/hbqt
>           - del *.* ( be careful that you are under the right folder )
>           - copy gensource/*.*

But in this moment subfolder "gensource" is empty :(
Where can we found doc instruction, how build test app with qt ?

Regards,
Marek Horodyski
From druzus at users.sourceforge.net  Tue Sep 15 06:09:17 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue Sep 15 06:09:23 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12494] trunk/harbour
Message-ID: <E1MnUyL-0006s1-Kj@c3vjzd1.ch3.sourceforge.com>

Revision: 12494
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12494&view=rev
Author:   druzus
Date:     2009-09-15 10:09:16 +0000 (Tue, 15 Sep 2009)

Log Message:
-----------
2009-09-15 12:09 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbwin/win_com.c
    ! fixed small typo in UNICODE builds

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/win_com.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From sscc at mweb.co.za  Tue Sep 15 07:36:41 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Sep 15 07:36:44 2009
Subject: [Harbour] SendMail.prg
Message-ID: <4AAF7C49.5010708@mweb.co.za>

Hi

I was trying to send e-mails to an sms service, but they were being rejected. On 
closer examination it turns out that although they only had a simple body they 
were being transmitted as multi-part.

Also, the encoding was set as "7-bit" which does not exist.

These changes fix the issue above, please review and include them if you think 
they are OK, it has fixed the problem for me, although it seems that most SMTP 
servers, and mail clients are quite forgiving.

Regards
Alex
-------------- next part --------------
A non-text attachment was scrubbed...
Name: sendmail.zip
Type: application/x-zip-compressed
Size: 6699 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090915/8ecabdd4/sendmail.bin
From dmacias at mail.udg.mx  Tue Sep 15 07:46:37 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Tue Sep 15 07:47:00 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
Message-ID: <4AAF7E9D.2070406@mail.udg.mx>

At last, a delayed test  :-)

Based in Pritpal Bedi guide, I made same tests with few changes:

- OS/2 as server, using gcc433
- Tests in LAN and Internet

netserver.prg and netapplctn.prg only contain change to use port 2941

netserver_os2.exe is running in \mydata
client was tested with winXP+watcom

LAN:
===
  Response is fast, there are not delay opening files
  Work very well

Internet:
========
  Response are slow, as expected
  120 seconds to create, fill and index file
   50 seconds to browse

You can test it on Internet, I will leave running netserver_os2.exe for
a short time (128 Kbits bandwidth)

 From your prefered environment, use:
    netapplctn 189.162.70.97 2941

First people in test will create files  :-)

David Macias



From info at fsgiudice.com  Tue Sep 15 07:48:40 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Sep 15 07:48:49 2009
Subject: [Harbour] Error using OLE
In-Reply-To: <42C8CE6069994F6385E68910BA78EE11@emag>
References: <42C8CE6069994F6385E68910BA78EE11@emag>
Message-ID: <4AAF7F18.9080803@fsgiudice.com>

Hi Enrico,

Il 15/09/2009 11.23, Enrico Maria Giordano ha scritto:
> The following sample
> 
> FUNCTION MAIN()
> 
>    LOCAL oWord
> 
>    oWord = CREATEOBJECT( "Word.Application" )
> 
>    oWord:Documents:Add()
> 
>    oWord:Visible = .T.
> 
>    RETURN NIL
> 
> stops with
> 
> Error TOleAuto/65535  : TOLEAUTO:NEW
> Called from THROW(0)
> Called from TOLEAUTO:NEW(0)
> Called from CREATEOBJECT(0)
> Called from MAIN(5)
> 
> It works fine using xHarbour. What am I missing?
> 

What compiler ?
With mingw here it works correctly, below there is trace of hbmk2

--------
J:\sviluppo\cvs\harbour-version\systemWMIwatch\tests>hbmk2 ote1.prg -trace

hbmk2: Processing local make script: hbmk.hbm 

hbmk2: Processing configuration: j:\cvs\harbour_mingw\bin\hbmk.cfg 

hbmk2: Harbour compiler command (internal): 

(j:\cvs\harbour_mingw\bin\harbour.exe) -n2 ote1.prg 
-ij:/cvs/harbour_mingw/include
hbmk2: C compiler command: 

gcc.exe -c -O3 -march=i586 -mtune=pentiumpro -fomit-frame-pointer 
-Ij:/cvs/harbour_mingw/include ote1.c c:\temp\hbmk_mjhklo.c
hbmk2: Linker command: 

gcc.exe ote1.o hbmk_mjhklo.o    -mconsole -Wl,--start-group -lhbwin 
-lhbextern -lhbdebug -lhbvm -lhbrtl -lhblang -lhbcpage -lgtcgi -lgtpca 
-lgtstd -lgtwin -lgtwvt -lgtgui -lhbrdd -lhbuddall -lhbusrrdd -lrddntx 
-lrddcdx -lrddnsx -lrddfpt -lhbrdd -lhbhsx -lhbsix -lhbmacro -lhbcplr 
-lhbpp -lhbcommon -lkernel32 -luser32 -lgdi32 -ladvapi32 -lws2_32 
-lwinspool -lcomctl32 -lcomdlg32 -lshell32 -luuid -lole32 -loleaut32 
-lmpr -lwinmm -lmapi32 -limm32 -lmsimg32 -lwininet -lhbpcre -lhbzlib 
-Wl,--end-group -oote1.exe -Lj:/cvs/harbour_mingw/lib/win/mingw
--------
and result is that Word opens correctly.
Mingw + Vista + Office 2007

Best regards,
Francesco


From dbtopas at dbtopas.lt  Tue Sep 15 07:55:26 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Sep 15 07:56:41 2009
Subject: [Harbour] Error using OLE
In-Reply-To: <42C8CE6069994F6385E68910BA78EE11@emag>
References: <42C8CE6069994F6385E68910BA78EE11@emag>
Message-ID: <4AAF80AE.5090701@dbtopas.lt>

Hi,

>    oWord = CREATEOBJECT( "Word.Application" )
>    oWord:Documents:Add()
>    oWord:Visible = .T.
>    RETURN NIL
> 
> stops with
> 
> Error TOleAuto/65535  : TOLEAUTO:NEW
> Called from THROW(0)
> Called from TOLEAUTO:NEW(0)
> Called from CREATEOBJECT(0)
> Called from MAIN(5)
> 
> It works fine using xHarbour. What am I missing?

I do not have Word for testing, but changing CreateObject() to
WIN_OleCreateObject() should help.


Regards,
Mindaugas


From sscc at mweb.co.za  Tue Sep 15 08:39:38 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Sep 15 08:39:41 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12476] trunk/harbour
In-Reply-To: <20090911163421.GA10667@uran.home.aster.pl>
References: <E1Mm5Q5-00079W-Fa@dn4whf1.ch3.sourceforge.com>
	<20090911163421.GA10667@uran.home.aster.pl>
Message-ID: <4AAF8B0A.3020802@mweb.co.za>

Przemyslaw Czerpak wrote:

> If you see such things in the code then it only means that author wanted
> to create sth but didn't know how and created dummy code which was never
> executed and it was not even possible to execute it explicitly from .prg
> code. It also suggests that other parts of such code should be carefully
> checked.

I have made a change to ensure the initialisation works correctly. You are right 
that I did not test that part, it seemed a no-brainer as all it was doing was 
ensuring that invalid ports will be picked up, and I didn't try an invalid port.

As for the rest I have used it for a few years and I think that while far from 
perfect it is usable. The other new parts are working for me.

Thanks for fixing the warnings.

Please review and commit if it looks ok.

Regards
Alex

-------------- next part --------------
A non-text attachment was scrubbed...
Name: win_com.zip
Type: application/x-zip-compressed
Size: 8291 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090915/f950688f/win_com.bin
From harbour.01 at syenar.hu  Tue Sep 15 09:00:01 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 15 09:00:12 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12476] trunk/harbour
In-Reply-To: <4AAF8B0A.3020802@mweb.co.za>
References: <E1Mm5Q5-00079W-Fa@dn4whf1.ch3.sourceforge.com>
	<20090911163421.GA10667@uran.home.aster.pl>
	<4AAF8B0A.3020802@mweb.co.za>
Message-ID: <6A492B61-E9DE-41CF-BD19-72FF1EC16941@syenar.hu>

Hi Alex,

This patch won't solve the problem when someone tries
to use the low-level (non-class) interface directly.
(f.e. I use such code).

So it needs to be moved to low-level. On low-level
though it should be made MT ready.

Brgds,
Viktor

On 2009.09.15., at 14:39, Alex Strickland wrote:

> Przemyslaw Czerpak wrote:
>
>> If you see such things in the code then it only means that author  
>> wanted
>> to create sth but didn't know how and created dummy code which was  
>> never
>> executed and it was not even possible to execute it explicitly  
>> from .prg
>> code. It also suggests that other parts of such code should be  
>> carefully
>> checked.
>
> I have made a change to ensure the initialisation works correctly.  
> You are right that I did not test that part, it seemed a no-brainer  
> as all it was doing was ensuring that invalid ports will be picked  
> up, and I didn't try an invalid port.
>
> As for the rest I have used it for a few years and I think that  
> while far from perfect it is usable. The other new parts are working  
> for me.
>
> Thanks for fixing the warnings.
>
> Please review and commit if it looks ok.
>
> Regards
> Alex
>
> <win_com.zip>_______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Sep 15 09:04:14 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 15 09:04:24 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12476] trunk/harbour
In-Reply-To: <6A492B61-E9DE-41CF-BD19-72FF1EC16941@syenar.hu>
References: <E1Mm5Q5-00079W-Fa@dn4whf1.ch3.sourceforge.com>
	<20090911163421.GA10667@uran.home.aster.pl>
	<4AAF8B0A.3020802@mweb.co.za>
	<6A492B61-E9DE-41CF-BD19-72FF1EC16941@syenar.hu>
Message-ID: <CBC820C9-97C2-454F-BC09-47D346C1CD48@syenar.hu>

+ To clarify: IMO any such explicit initialization as WIN_COMINIT()
isn't very elegant in Harbour programs and programmers tend to forget
it. Hence IMO it should be done automatically on first call, but in
this case we have to deal with MT mode also if I'm not missing anything.

Brgds,
Viktor

On 2009.09.15., at 15:00, Viktor Szak?ts wrote:

> Hi Alex,
>
> This patch won't solve the problem when someone tries
> to use the low-level (non-class) interface directly.
> (f.e. I use such code).
>
> So it needs to be moved to low-level. On low-level
> though it should be made MT ready.
>
> Brgds,
> Viktor
>
> On 2009.09.15., at 14:39, Alex Strickland wrote:
>
>> Przemyslaw Czerpak wrote:
>>
>>> If you see such things in the code then it only means that author  
>>> wanted
>>> to create sth but didn't know how and created dummy code which was  
>>> never
>>> executed and it was not even possible to execute it explicitly  
>>> from .prg
>>> code. It also suggests that other parts of such code should be  
>>> carefully
>>> checked.
>>
>> I have made a change to ensure the initialisation works correctly.  
>> You are right that I did not test that part, it seemed a no-brainer  
>> as all it was doing was ensuring that invalid ports will be picked  
>> up, and I didn't try an invalid port.
>>
>> As for the rest I have used it for a few years and I think that  
>> while far from perfect it is usable. The other new parts are  
>> working for me.
>>
>> Thanks for fixing the warnings.
>>
>> Please review and commit if it looks ok.
>>
>> Regards
>> Alex
>>
>> <win_com.zip>_______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>

From harbour.01 at syenar.hu  Tue Sep 15 09:08:39 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 15 09:08:48 2009
Subject: [Harbour] if you have some time to kill....
In-Reply-To: <84902548-BAF6-4BB0-AC25-DB86C429E2C2@syenar.hu>
References: <alpine.GSO.2.00.0909142212520.13711@dawn.royalcomp.hu>
	<F753C269-3187-4B93-8235-F8E0447E2DA1@syenar.hu>
	<alpine.GSO.2.00.0909150055290.13711@dawn.royalcomp.hu>
	<84902548-BAF6-4BB0-AC25-DB86C429E2C2@syenar.hu>
Message-ID: <9AFC260F-4970-4274-BDC5-CF0E4A0BD0C3@syenar.hu>

BTW, here there is free OpenVMS terminal access provided:
http://deathrow.vistech.net/

Know zero about VMS, I couldn't do much, but it's useful.
[ I used the DEMO account. ]

Brgds,
Viktor

On 2009.09.15., at 09:42, Viktor Szak?ts wrote:

>>> BTW, not wanting to give any ideas ;) but we're still missing
>>> two important ports of Harbour: IBM AIX and OpenVMS :)
>>
>> i am ready to loan you, for an extended period of time, an ibm
>> intellistation 9114/275 (it's about a 1ghz power4 with about a gig of
>> ram, sadly no disk but i borrow one) and an almost fully equipped
>> vaxstation vlc 4000 :))
>>
>> and you are forgetting sco (yes, they are still used all over). but i
>> am not :)
>>
>> aix (damned be thy name) shouldn't be a problem. vms... good luck? :)
>> (but i have good connections to very knowledgeable vms people :)
>
> :) Okay, thx for the nice offer, probably I have to extend my "lab"
> first to make room for such beasts ;) I'd be most happy with some
> sort of remote access to these gears, not that it wouldn't be cool
> to check them in person. Anyway AIX looks a relatively easy trip
> compared to VMS (although it has GNU tools ported).
>
> BTW, if someone is interested I have Oracle 10g running here already,
> and I can pass the access info in private.
>
> Brgds,
> Viktor
>

From ice at extreme.hu  Tue Sep 15 09:11:34 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Tue Sep 15 09:11:44 2009
Subject: [Harbour] linux x win crossbuilds broken
Message-ID: <alpine.GSO.2.00.0909151508280.17989@dawn.royalcomp.hu>


hi,

linux x win, mingw/c,cpp watcom/cpp

i586-mingw32msvc-gcc  -I. -I../../../../../include  -Wall -W -g 
-DHB_TR_LEVEL_DEBUG   -ohbrun.o -c hbrun.c
i586-mingw32msvc-gcc  -Wall -W -g -o 
../../../../../bin/win/mingw/hbrun.exe hbrun.o  
-L../../../../../lib/win/mingw   -lhbextern -lhbdebug -lhbvm -lhbrtl 
-lhblang -lhbcpage -lgtcgi -lgtpca -lgtstd -lgtwvt -lgtgui -lgtwin 
-lhbrdd -lrddntx -lrddnsx -lrddcdx -lrddfpt -lhbsix -lhbhsx -lhbusrrdd 
-lhbuddall -lhbrtl -lhbvm -lhbmacro -lhbcplr -lhbpp -lhbcommon 
-lhbpcre -lhbzlib -lkernel32 -luser32 -lws2_32 -ladvapi32 -lgdi32 
-lhbmainstd
/usr/bin/harbour ../../../hbmk2.prg  -i../../../../../include -n1 -q0 
-w3 -es2 -kmo  -undef:__PLATFORM__LINUX -undef:__PLATFORM__UNIX 
-D__PLATFORM__WINDOWS 
^M../../../hbmk2.prg(4347) Warning W0003  Variable 'TMP3' declared but 
not used in function 'HBMK(605)'

No code generated.
make[3]: *** [hbmk2.c] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [hbmk2] Error 2
make: *** [utils] Error 2

there's nothing else error-ish before that, but just to err on the 
safe side, the full buold log is attached.

-- 
[-]

mkdir /nonexistent
-------------- next part --------------
A non-text attachment was scrubbed...
Name: log_win_mingw_cpp.gz
Type: application/octet-stream
Size: 11056 bytes
Desc: 
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090915/b07495b6/log_win_mingw_cpp-0001.obj
From ice at extreme.hu  Tue Sep 15 09:15:41 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Tue Sep 15 09:15:47 2009
Subject: [Harbour] if you have some time to kill....
In-Reply-To: <9AFC260F-4970-4274-BDC5-CF0E4A0BD0C3@syenar.hu>
References: <alpine.GSO.2.00.0909142212520.13711@dawn.royalcomp.hu>
	<F753C269-3187-4B93-8235-F8E0447E2DA1@syenar.hu>
	<alpine.GSO.2.00.0909150055290.13711@dawn.royalcomp.hu>
	<84902548-BAF6-4BB0-AC25-DB86C429E2C2@syenar.hu>
	<9AFC260F-4970-4274-BDC5-CF0E4A0BD0C3@syenar.hu>
Message-ID: <alpine.GSO.2.00.0909151512190.17989@dawn.royalcomp.hu>

On Tue, 15 Sep 2009, Viktor Szak?ts wrote:

 > BTW, here there is free OpenVMS terminal access provided:
 > http://deathrow.vistech.net/
 > 
 > Know zero about VMS, I couldn't do much, but it's useful.

vms crash course for unix users, most important lesson #1:

DO NOT EVER UNDER ANY CIRCUMSTANCES TYPE 'ls'.

:)

-- 
[-]

mkdir /nonexistent
From vszakats at users.sourceforge.net  Tue Sep 15 09:19:20 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue Sep 15 09:19:26 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12495] trunk/harbour
Message-ID: <E1MnXwG-0004GF-7t@bj8yhf1.ch3.sourceforge.com>

Revision: 12495
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12495&view=rev
Author:   vszakats
Date:     2009-09-15 13:19:19 +0000 (Tue, 15 Sep 2009)

Log Message:
-----------
2009-09-15 15:19 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * contrib/hbtip/sendmail.prg
    ! Applied patch from Alex Strickland.
      Fixes wrong encoding (7-bit).
      Fixed mails sent as multi-part even if there was only simple body.

  * utils/hbmk2/hbmk2.prg
    ! Fixed stupid error in last cmomit.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbtip/sendmail.prg
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From maurilio.longo at libero.it  Tue Sep 15 09:26:57 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Sep 15 09:27:07 2009
Subject: [Harbour] os/2 and make, some progress 
Message-ID: <4AAF9621.6090909@libero.it>

Hi Viktor,

I've got an answer from Andreas Buening, latest OS/2 porter, which has
discovered a bug in OS/2 port which was affecting its behavior when calling a
shell.

So now I've got a version which passes the test makefile you sent me and which
is able to build __dyn__.tmp file (32K more or less).

Anyway, gcc on OS/2 does not support -shared and needs (as it seems) a .def
file to build a .dll.

I'm investigating this issue right now and I'll come back as soon as I have
news or more problems :)

Maurilio.

PS. Maybe we could remove all other hacks with line lenght, but right now I'd
better build a .dll which is more important, imho.



-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Tue Sep 15 09:31:58 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 15 09:32:11 2009
Subject: [Harbour] if you have some time to kill....
In-Reply-To: <alpine.GSO.2.00.0909151512190.17989@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909142212520.13711@dawn.royalcomp.hu>
	<F753C269-3187-4B93-8235-F8E0447E2DA1@syenar.hu>
	<alpine.GSO.2.00.0909150055290.13711@dawn.royalcomp.hu>
	<84902548-BAF6-4BB0-AC25-DB86C429E2C2@syenar.hu>
	<9AFC260F-4970-4274-BDC5-CF0E4A0BD0C3@syenar.hu>
	<alpine.GSO.2.00.0909151512190.17989@dawn.royalcomp.hu>
Message-ID: <7D945898-B628-4278-A30B-532B02AFF5B0@syenar.hu>

>> BTW, here there is free OpenVMS terminal access provided:
>> http://deathrow.vistech.net/
>>
>> Know zero about VMS, I couldn't do much, but it's useful.
>
> vms crash course for unix users, most important lesson #1:
>
> DO NOT EVER UNDER ANY CIRCUMSTANCES TYPE 'ls'.
>
> :)

This was exactly the first thing I did :)

[ Took a while to recover from it ;) ]

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 15 09:35:10 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 15 09:35:19 2009
Subject: [Harbour] os/2 and make, some progress 
In-Reply-To: <4AAF9621.6090909@libero.it>
References: <4AAF9621.6090909@libero.it>
Message-ID: <766BB4E1-A5E4-438B-8AC8-7C58F35A8B1A@syenar.hu>

Hi Maurilio,

That's great news, both for Harbour and all OS/2 GNU Make
users I guess :)

Could you replace /os2-make.exe in our repository with the
fixed version? If you have any pointers to publicly available
source code of maybe even fixed binary build, pls include
them as well in the entry.

Brgds,
Viktor

On 2009.09.15., at 15:26, Maurilio Longo wrote:

> Hi Viktor,
>
> I've got an answer from Andreas Buening, latest OS/2 porter, which has
> discovered a bug in OS/2 port which was affecting its behavior when  
> calling a
> shell.
>
> So now I've got a version which passes the test makefile you sent me  
> and which
> is able to build __dyn__.tmp file (32K more or less).
>
> Anyway, gcc on OS/2 does not support -shared and needs (as it seems)  
> a .def
> file to build a .dll.
>
> I'm investigating this issue right now and I'll come back as soon as  
> I have
> news or more problems :)
>
> Maurilio.
>
> PS. Maybe we could remove all other hacks with line lenght, but  
> right now I'd
> better build a .dll which is more important, imho.
>
>
>
> -- 
> __________
> |  |  | |__| Maurilio Longo
> |_|_|_|____| farmaconsult s.r.l.
>
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Tue Sep 15 09:39:04 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 15 09:39:17 2009
Subject: [Harbour] os/2 and make, some progress 
In-Reply-To: <766BB4E1-A5E4-438B-8AC8-7C58F35A8B1A@syenar.hu>
References: <4AAF9621.6090909@libero.it>
	<766BB4E1-A5E4-438B-8AC8-7C58F35A8B1A@syenar.hu>
Message-ID: <32F89852-D7D5-4289-BACC-494D4525633F@syenar.hu>

Nevermind, I already see the new versions here:
http://www.os2site.com/sw/dev/make/index.html

Brgds,
Viktor

On 2009.09.15., at 15:35, Viktor Szak?ts wrote:

> Hi Maurilio,
>
> That's great news, both for Harbour and all OS/2 GNU Make
> users I guess :)
>
> Could you replace /os2-make.exe in our repository with the
> fixed version? If you have any pointers to publicly available
> source code of maybe even fixed binary build, pls include
> them as well in the entry.
>
> Brgds,
> Viktor
>
> On 2009.09.15., at 15:26, Maurilio Longo wrote:
>
>> Hi Viktor,
>>
>> I've got an answer from Andreas Buening, latest OS/2 porter, which  
>> has
>> discovered a bug in OS/2 port which was affecting its behavior when  
>> calling a
>> shell.
>>
>> So now I've got a version which passes the test makefile you sent  
>> me and which
>> is able to build __dyn__.tmp file (32K more or less).
>>
>> Anyway, gcc on OS/2 does not support -shared and needs (as it  
>> seems) a .def
>> file to build a .dll.
>>
>> I'm investigating this issue right now and I'll come back as soon  
>> as I have
>> news or more problems :)
>>
>> Maurilio.
>>
>> PS. Maybe we could remove all other hacks with line lenght, but  
>> right now I'd
>> better build a .dll which is more important, imho.
>>
>>
>>
>> -- 
>> __________
>> |  |  | |__| Maurilio Longo
>> |_|_|_|____| farmaconsult s.r.l.
>>
>> 
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>

From vszakats at users.sourceforge.net  Tue Sep 15 09:48:39 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue Sep 15 09:48:44 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12496] trunk/harbour
Message-ID: <E1MnYOd-0002gq-CI@c3vjzd1.ch3.sourceforge.com>

Revision: 12496
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12496&view=rev
Author:   vszakats
Date:     2009-09-15 13:48:33 +0000 (Tue, 15 Sep 2009)

Log Message:
-----------
2009-09-15 15:56 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * INSTALL
  * doc/bintools.txt
  * os2-make.exe
    ! Updated OS/2 make.exe (and links in INSTALL) to make-3.81-r3
      (from make-3.81-r2).
      This fixes the dreaded cmdline length inducated GNU Make crashes
      which made us add .mk workarounds and which created a showstopper
      towards OS/2 .dll support.
      Many thanks to Maurilio Longo and Andreas Buening for hunting
      down and fixing the problem in OS/2 GNU Make port.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/doc/bintools.txt
    trunk/harbour/os2-make.exe


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From maurilio.longo at libero.it  Tue Sep 15 09:48:42 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Sep 15 09:48:51 2009
Subject: [Harbour] os/2 and make, some progress
In-Reply-To: <32F89852-D7D5-4289-BACC-494D4525633F@syenar.hu>
References: <4AAF9621.6090909@libero.it>	<766BB4E1-A5E4-438B-8AC8-7C58F35A8B1A@syenar.hu>
	<32F89852-D7D5-4289-BACC-494D4525633F@syenar.hu>
Message-ID: <4AAF9B3A.8020307@libero.it>

Yes,

the r3 is the one I'm using, anyway, I think we should remove os2-make.exe and
use the available one on user's system.

Maurilio.


Viktor Szak?ts wrote:
> Nevermind, I already see the new versions here:
> http://www.os2site.com/sw/dev/make/index.html
> 
> Brgds,
> Viktor
> 
> On 2009.09.15., at 15:35, Viktor Szak?ts wrote:
> 
>> Hi Maurilio,
>>
>> That's great news, both for Harbour and all OS/2 GNU Make
>> users I guess :)
>>
>> Could you replace /os2-make.exe in our repository with the
>> fixed version? If you have any pointers to publicly available
>> source code of maybe even fixed binary build, pls include
>> them as well in the entry.
>>
>> Brgds,
>> Viktor
>>
>> On 2009.09.15., at 15:26, Maurilio Longo wrote:
>>
>>> Hi Viktor,
>>>
>>> I've got an answer from Andreas Buening, latest OS/2 porter, which has
>>> discovered a bug in OS/2 port which was affecting its behavior when
>>> calling a
>>> shell.
>>>
>>> So now I've got a version which passes the test makefile you sent me
>>> and which
>>> is able to build __dyn__.tmp file (32K more or less).
>>>
>>> Anyway, gcc on OS/2 does not support -shared and needs (as it seems)
>>> a .def
>>> file to build a .dll.
>>>
>>> I'm investigating this issue right now and I'll come back as soon as
>>> I have
>>> news or more problems :)
>>>
>>> Maurilio.
>>>
>>> PS. Maybe we could remove all other hacks with line lenght, but right
>>> now I'd
>>> better build a .dll which is more important, imho.
>>>
>>>
>>>
>>> -- 
>>> __________
>>> |  |  | |__| Maurilio Longo
>>> |_|_|_|____| farmaconsult s.r.l.
>>>
>>> 
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Tue Sep 15 09:59:12 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 15 09:59:22 2009
Subject: [Harbour] os/2 and make, some progress
In-Reply-To: <4AAF9B3A.8020307@libero.it>
References: <4AAF9621.6090909@libero.it>	<766BB4E1-A5E4-438B-8AC8-7C58F35A8B1A@syenar.hu>
	<32F89852-D7D5-4289-BACC-494D4525633F@syenar.hu>
	<4AAF9B3A.8020307@libero.it>
Message-ID: <F2B80D4C-ECC3-4582-A2A8-3AB7F1054587@syenar.hu>

> Yes,
>
> the r3 is the one I'm using, anyway, I think we should remove os2- 
> make.exe and
> use the available one on user's system.

Okay, the names don't collide, so you can use the system
provided one without any hassle, it's even documented that
way in INSTALL. I'd like to leave *-make.exe there for all
non-*nix or remove them all in the future.

Let's concentrate on .dll creation on OS/2. It would a cool
feature. I don't know much about .def files though.

Brgds,
Viktor

From bedipritpal at hotmail.com  Tue Sep 15 10:21:58 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Sep 15 10:22:04 2009
Subject: [Harbour] HBNETIO - How I tested ...
In-Reply-To: <4AAF7E9D.2070406@mail.udg.mx>
References: <4AAF7E9D.2070406@mail.udg.mx>
Message-ID: <25454954.post@talk.nabble.com>


Hi David


David Arturo Macias Corona wrote:
> 
>  From your prefered environment, use:
>     netapplctn 189.162.70.97 2941
> 
> First people in test will create files  :-)
> 

I cannot connect. Is it stopped now ?

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Re%3A-HBNETIO---How-I-tested-...-tp25452521p25454954.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Tue Sep 15 10:44:23 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Sep 15 10:44:30 2009
Subject: [Harbour] NETIO - Real Web IP - Application Behavior
In-Reply-To: <20090915094840.GB655@uran.home.aster.pl>
References: <25440212.post@talk.nabble.com>
	<20090915094840.GB655@uran.home.aster.pl>
Message-ID: <25455343.post@talk.nabble.com>


Hello Przemek


Przemyslaw Czerpak-2 wrote:
> 
> I guess that you are talking about client application not server
> and it stops inside connect(). 
> 

You are correct.



> Usually low level TCP/IP code in the
> OS should interrupt this operation after some timeout if it cannot
> be realized. Sometimes this timeout is really huge. It depends on many
> things, i.e. average time of packet confirmation which in TCP IP
> is dynamically updated following the transport layer quality.
> Anyhow it's out of Harbour or any other application controll.
> If connection freeze the process forever then I can only guess
> it's side effect of used firewall or some other similar protection
> software. Otherwise it's serious bug in TCP/IP implementation which
> should be reported to MS but I rather do not believe that Windows
> has such serious problem with basic functionality.
> If you can exclude some other trivial problem like mistakes in
> routing tables or sth like that then for me it has to be problem
> with firewall which blocks connection only partially and may
> send some sync packages waiting for user interaction (i.e. to
> confirm if connection is legal) what effectively blocks timeout
> on client side.
> If you want to you can pass as 3-parameter of netio_connect() timeout
> in milliseconds. Default is -1 what means not user space timeout and
> operation should be interrupted by OS inside connect() function.
> If you use 10000 then after 10 sec. netio_connect() will return .F.
> signaling the problem.
> Of course it's only workaround with protection against freezing
> the application not real solution but because the problem is outside
> Harbour I cannot suggest you anything more as programmer solution
> (I do not want to introduce some low level TCP/IP hacks because in
> most of cases they increase the problem instead of help ;-))
> Look at your firewall configuration. It's possible that the problem
> is trivial, i.e. firewall needs valid DNS entry for client and/or
> server station and it's enough to disable such verification.
> 

Thanks for the explanation. 
I will make tests with some real-time environments and will report back.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/NETIO---Real-Web-IP---Application-Behavior-tp25440212p25455343.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at users.sourceforge.net  Tue Sep 15 10:53:25 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue Sep 15 10:53:31 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12497] trunk/harbour
Message-ID: <E1MnZPJ-00005v-Fy@74yxhf1.ch3.sourceforge.com>

Revision: 12497
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12497&view=rev
Author:   druzus
Date:     2009-09-15 14:53:23 +0000 (Tue, 15 Sep 2009)

Log Message:
-----------
2009-09-15 16:52 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapifs.h
  * harbour/source/rtl/filebuf.c
    + added hb_fileRename()

  * harbour/contrib/hbnetio/netio.h
  * harbour/contrib/hbnetio/netiocli.c
  * harbour/contrib/hbnetio/netiosrv.c
    + implemented Rename method in NETIO

  * harbour/include/hbapirdd.h
  * harbour/source/rdd/workarea.c
    + added new non workarea method: RENAME()

  * harbour/source/rdd/Makefile
  * harbour/include/hbextern.ch
  * harbour/source/rdd/dbcmd.c
  + harbour/source/rdd/dbrename.c
    + added new .prg function:
         dbRename( <cTable> [,<cIndex>], <cNewName>, ;
                   [<cRDD>], [<nConnect>] ) -> <lOK>
    + added hb_dbRename() - synonym of dbRename()

  * harbour/source/rdd/dbf1.c
    + added support for dbRename() in DBF* RDDs

  * harbour/include/hbrdddbf.h
  * harbour/include/hbrddcdx.h
  * harbour/include/hbrddfpt.h
  * harbour/include/hbrddntx.h
  * harbour/source/rdd/dbffpt/dbffpt1.c
  * harbour/source/rdd/dbfntx/dbfntx1.c
  * harbour/source/rdd/dbfnsx/dbfnsx1.c
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
  * harbour/source/rdd/sdf1.c
  * harbour/source/rdd/delim1.c
  * harbour/include/hbusrrdd.ch
  * harbour/source/rdd/usrrdd/usrrdd.c
  * harbour/contrib/rddads/adsx.c
  * harbour/contrib/rddads/ads1.c
  * harbour/contrib/rddsql/sqlbase.c
  * harbour/contrib/rddsql/sqlmix.c
  * harbour/contrib/hbbmcdx/bmdbfcdx.c
  * harbour/contrib/hbbmcdx/hbbmcdx.h
    + updated to compile with new RDD method: RENAME
      TODO: add support for this method to ADS* RDDs

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbbmcdx/bmdbfcdx.c
    trunk/harbour/contrib/hbbmcdx/hbbmcdx.h
    trunk/harbour/contrib/hbnetio/netio.h
    trunk/harbour/contrib/hbnetio/netiocli.c
    trunk/harbour/contrib/hbnetio/netiosrv.c
    trunk/harbour/contrib/rddads/ads1.c
    trunk/harbour/contrib/rddads/adsx.c
    trunk/harbour/contrib/rddsql/sqlbase.c
    trunk/harbour/contrib/rddsql/sqlmix.c
    trunk/harbour/include/hbapifs.h
    trunk/harbour/include/hbapirdd.h
    trunk/harbour/include/hbextern.ch
    trunk/harbour/include/hbrddcdx.h
    trunk/harbour/include/hbrdddbf.h
    trunk/harbour/include/hbrddfpt.h
    trunk/harbour/include/hbrddntx.h
    trunk/harbour/include/hbusrrdd.ch
    trunk/harbour/source/rdd/Makefile
    trunk/harbour/source/rdd/dbcmd.c
    trunk/harbour/source/rdd/dbf1.c
    trunk/harbour/source/rdd/dbfcdx/dbfcdx1.c
    trunk/harbour/source/rdd/dbffpt/dbffpt1.c
    trunk/harbour/source/rdd/dbfnsx/dbfnsx1.c
    trunk/harbour/source/rdd/dbfntx/dbfntx1.c
    trunk/harbour/source/rdd/delim1.c
    trunk/harbour/source/rdd/sdf1.c
    trunk/harbour/source/rdd/usrrdd/usrrdd.c
    trunk/harbour/source/rdd/workarea.c
    trunk/harbour/source/rtl/filebuf.c

Added Paths:
-----------
    trunk/harbour/source/rdd/dbrename.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From ice at extreme.hu  Tue Sep 15 11:05:41 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Tue Sep 15 11:05:49 2009
Subject: [Harbour] tests/menutest.prg
Message-ID: <alpine.GSO.2.00.0909151704140.17989@dawn.royalcomp.hu>


hi,

Harbour 2.0.0beta3 (Rev. 12474)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 'menutest.prg'...
menutest.prg(17) Error E0030  Syntax error "syntax error at '@'"
menutest.prg(18) Error E0030  Syntax error "syntax error at '@'"
menutest.prg(19) Error E0030  Syntax error "syntax error at '@'"
menutest.prg(20) Error E0030  Syntax error "syntax error at '@'"
menutest.prg(35) Error E0030  Syntax error "syntax error at '@'"
menutest.prg(36) Error E0030  Syntax error "syntax error at '@'"
menutest.prg(37) Error E0030  Syntax error "syntax error at '@'"
menutest.prg(38) Error E0030  Syntax error "syntax error at '@'"
8 errors

is this intentional? is caused by the color statements, what are 
those?

-- 
[-]

mkdir /nonexistent
From druzus at users.sourceforge.net  Tue Sep 15 11:11:24 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue Sep 15 11:11:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12498] trunk/harbour
Message-ID: <E1MnZgi-0000Vr-LW@74yxhf1.ch3.sourceforge.com>

Revision: 12498
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12498&view=rev
Author:   druzus
Date:     2009-09-15 15:11:23 +0000 (Tue, 15 Sep 2009)

Log Message:
-----------
2009-09-15 17:11 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbnetio/netiocli.c
    ! added missing in previous commit casting for C++ mode

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbnetio/netiocli.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From M.Horodyski at pzuzycie.com.pl  Tue Sep 15 11:11:37 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Tue Sep 15 11:11:46 2009
Subject: [Harbour] Problems with ADORDD.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280AB9B@PINK.zycie.pzu>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B027@PINK.zycie.pzu>

>-----Original Message-----
>From: Horodyski Marek (PZUZ) 
>Sent: Friday, September 11, 2009 10:22 AM
>To: Harbour Project Main Developer List.
>Subject: RE: [Harbour] Problems with ADORDD.
>
> 
>
>>-----Original Message-----
>>From: Ranier Vilela [mailto:ranier@cultura.com.br]
>>Sent: Thursday, September 10, 2009 10:02 PM
>>To: Harbour Project Main Developer List.
>>Subject: Re: [Harbour] Problems with ADORDD.
[...]
>>> oErr:subCode______      3012
>>> oErr:description__Nieprawid?owy argument // <-- wrong parameter 
>>> oErr:filename_____ oErr:operation____OPEN
>>> oErr:genCode______         1
>
>[...]   
>
>>Proballly ADORDD is broken because is ole intensive and ole 
>was changed 

I have access to Oracle via Microsoft ODBC :).
Failed Oracle-ODBC, but Microsofts work.

For all, try :
RDDINFO( 1001, { "ODBC", connectstring})

My connect string is :
"DSN=MyDescription;SERVER=TNSALIAS;PWD=PWD;UID=USER"

Where :
DSN=MyDescription is my name of record in ODBC table (with Microsoft driver).
SERVER=TNSALIAS   is alias from TNSNAMES.ORA file, where is described connection.
PWD is a password for user, 
UID is a user name in database.

And use via sqlmix :
DBUSEAREA( .T., "SQLMIX", "select * from ...", "MYALIAS")

ODBC is much much better than ADO. I have long names, numeric fields and timestamps :)
For examle :
DB struct: {{"PERSON_ID",            "N", 10,  0},
            {"EFFECTIVE_START_DATE", "@", 19,  0},
            {"EFFECTIVE_END_DATE",   "@", 19,  0},
            {"LAST_NAME",            "C", 150, 0},
            {"FIRST_NAME",           "C", 150, 0},
            {"MIDDLE_NAMES",         "C", 60,  0},
            {"FULL_NAME",            "C", 240, 0},
            {"START_DATE",           "@", 19,  0},
            {"DATE_OF_BIRTH",        "@", 19,  0},
            {"DATE_OF_DEATH",        "@", 19,  0},
            {"EMAIL_ADDRESS",        "C", 240, 0},
            {"EMPLOYEE_NUMBER",      "C", 30,  0},
            {"NARODOWOSC",           "C", 30,  0},
            {"PESEL",                "C", 30,  0},
            {"NIP",                  "C", 150, 0},
            {"SEX",                  "C", 30,  0},
            {"WORK_TELEPHONE",       "C", 4000,0},
            {"ADR_ULICA",            "C", 240, 0},
            {"ADR_NR_D",             "C", 240, 0},
            {"ADR_NR_L",             "C", 240, 0},
            {"ADR_MSC",              "C", 30,  0},
            {"KOD_POCZ",             "C", 30,  0},
            {"ADR_POCZTA",           "C", 120, 0},
            {"D_ADDRESS_TYPE",       "C", 80,  0},
            {"NAZWISKO_RODOWE",      "C", 150, 0},
            {"MSC_URODZENIA",        "C", 150, 0},
            {"IM_OJCA",              "C", 150, 0},
            {"IM_MATKI",             "C", 150, 0},
            {"OBYWATELSTWO",         "C", 150, 0},
            {"TYP_DOKUMENTU",        "C", 11,  0},
            {"NR_DOKUMENTU",         "C", 150, 0},
            {"ADR_DATE_FROM",        "@", 19,  0},
            {"ADR_DATA_TO",          "@", 19,  0},
            {"DATA_AKTUALIZACJI",    "@", 19,  0}}

ODBC correct queries database , where the ADO crashes.
And again I can work :)

Regards,
Marek Horodyski
From sscc at mweb.co.za  Tue Sep 15 11:18:07 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Sep 15 11:18:28 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12476] trunk/harbour
In-Reply-To: <CBC820C9-97C2-454F-BC09-47D346C1CD48@syenar.hu>
References: <E1Mm5Q5-00079W-Fa@dn4whf1.ch3.sourceforge.com>	<20090911163421.GA10667@uran.home.aster.pl>	<4AAF8B0A.3020802@mweb.co.za>	<6A492B61-E9DE-41CF-BD19-72FF1EC16941@syenar.hu>
	<CBC820C9-97C2-454F-BC09-47D346C1CD48@syenar.hu>
Message-ID: <4AAFB02F.3020607@mweb.co.za>

Viktor Szak?ts wrote:
> + To clarify: IMO any such explicit initialization as WIN_COMINIT()
> isn't very elegant in Harbour programs and programmers tend to forget
> it. Hence IMO it should be done automatically on first call, but in
> this case we have to deal with MT mode also if I'm not missing anything.

Until such time, would you prefer an INIT PROCEDURE - this is MT safe I think?

Regards
Alex
From harbour.01 at syenar.hu  Tue Sep 15 11:18:26 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 15 11:18:35 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12497] trunk/harbour
In-Reply-To: <E1MnZPJ-00005v-Fy@74yxhf1.ch3.sourceforge.com>
References: <E1MnZPJ-00005v-Fy@74yxhf1.ch3.sourceforge.com>
Message-ID: <01A56AC5-2712-4109-A9A4-5245A1187A9C@syenar.hu>

Thank you very much Przemek. I can now continue
converting my RDD code to cli/srv.

Brgds,
Viktor

On 2009.09.15., at 16:53, druzus@users.sourceforge.net wrote:

> Revision: 12497
>          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12497&view=rev
> Author:   druzus
> Date:     2009-09-15 14:53:23 +0000 (Tue, 15 Sep 2009)
>
> Log Message:
> -----------
> 2009-09-15 16:52 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbapifs.h
>  * harbour/source/rtl/filebuf.c
>    + added hb_fileRename()
>
>  * harbour/contrib/hbnetio/netio.h
>  * harbour/contrib/hbnetio/netiocli.c
>  * harbour/contrib/hbnetio/netiosrv.c
>    + implemented Rename method in NETIO
>
>  * harbour/include/hbapirdd.h
>  * harbour/source/rdd/workarea.c
>    + added new non workarea method: RENAME()
>
>  * harbour/source/rdd/Makefile
>  * harbour/include/hbextern.ch
>  * harbour/source/rdd/dbcmd.c
>  + harbour/source/rdd/dbrename.c
>    + added new .prg function:
>         dbRename( <cTable> [,<cIndex>], <cNewName>, ;
>                   [<cRDD>], [<nConnect>] ) -> <lOK>
>    + added hb_dbRename() - synonym of dbRename()
>
>  * harbour/source/rdd/dbf1.c
>    + added support for dbRename() in DBF* RDDs
>
>  * harbour/include/hbrdddbf.h
>  * harbour/include/hbrddcdx.h
>  * harbour/include/hbrddfpt.h
>  * harbour/include/hbrddntx.h
>  * harbour/source/rdd/dbffpt/dbffpt1.c
>  * harbour/source/rdd/dbfntx/dbfntx1.c
>  * harbour/source/rdd/dbfnsx/dbfnsx1.c
>  * harbour/source/rdd/dbfcdx/dbfcdx1.c
>  * harbour/source/rdd/sdf1.c
>  * harbour/source/rdd/delim1.c
>  * harbour/include/hbusrrdd.ch
>  * harbour/source/rdd/usrrdd/usrrdd.c
>  * harbour/contrib/rddads/adsx.c
>  * harbour/contrib/rddads/ads1.c
>  * harbour/contrib/rddsql/sqlbase.c
>  * harbour/contrib/rddsql/sqlmix.c
>  * harbour/contrib/hbbmcdx/bmdbfcdx.c
>  * harbour/contrib/hbbmcdx/hbbmcdx.h
>    + updated to compile with new RDD method: RENAME
>      TODO: add support for this method to ADS* RDDs
>
> Modified Paths:
> --------------
>    trunk/harbour/ChangeLog
>    trunk/harbour/contrib/hbbmcdx/bmdbfcdx.c
>    trunk/harbour/contrib/hbbmcdx/hbbmcdx.h
>    trunk/harbour/contrib/hbnetio/netio.h
>    trunk/harbour/contrib/hbnetio/netiocli.c
>    trunk/harbour/contrib/hbnetio/netiosrv.c
>    trunk/harbour/contrib/rddads/ads1.c
>    trunk/harbour/contrib/rddads/adsx.c
>    trunk/harbour/contrib/rddsql/sqlbase.c
>    trunk/harbour/contrib/rddsql/sqlmix.c
>    trunk/harbour/include/hbapifs.h
>    trunk/harbour/include/hbapirdd.h
>    trunk/harbour/include/hbextern.ch
>    trunk/harbour/include/hbrddcdx.h
>    trunk/harbour/include/hbrdddbf.h
>    trunk/harbour/include/hbrddfpt.h
>    trunk/harbour/include/hbrddntx.h
>    trunk/harbour/include/hbusrrdd.ch
>    trunk/harbour/source/rdd/Makefile
>    trunk/harbour/source/rdd/dbcmd.c
>    trunk/harbour/source/rdd/dbf1.c
>    trunk/harbour/source/rdd/dbfcdx/dbfcdx1.c
>    trunk/harbour/source/rdd/dbffpt/dbffpt1.c
>    trunk/harbour/source/rdd/dbfnsx/dbfnsx1.c
>    trunk/harbour/source/rdd/dbfntx/dbfntx1.c
>    trunk/harbour/source/rdd/delim1.c
>    trunk/harbour/source/rdd/sdf1.c
>    trunk/harbour/source/rdd/usrrdd/usrrdd.c
>    trunk/harbour/source/rdd/workarea.c
>    trunk/harbour/source/rtl/filebuf.c
>
> Added Paths:
> -----------
>    trunk/harbour/source/rdd/dbrename.c
>
>
> This was sent by the SourceForge.net collaborative development  
> platform, the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at users.sourceforge.net  Tue Sep 15 11:30:21 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue Sep 15 11:30:27 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12499] trunk/harbour
Message-ID: <E1MnZz3-0000uX-Ce@74yxhf1.ch3.sourceforge.com>

Revision: 12499
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12499&view=rev
Author:   druzus
Date:     2009-09-15 15:30:20 +0000 (Tue, 15 Sep 2009)

Log Message:
-----------
2009-09-15 17:30 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbwin/win_com.c
    * initialize s_PortData structure at application startup

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/win_com.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Tue Sep 15 11:35:33 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 15 11:35:43 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12476] trunk/harbour
In-Reply-To: <4AAFB02F.3020607@mweb.co.za>
References: <E1Mm5Q5-00079W-Fa@dn4whf1.ch3.sourceforge.com>	<20090911163421.GA10667@uran.home.aster.pl>	<4AAF8B0A.3020802@mweb.co.za>	<6A492B61-E9DE-41CF-BD19-72FF1EC16941@syenar.hu>
	<CBC820C9-97C2-454F-BC09-47D346C1CD48@syenar.hu>
	<4AAFB02F.3020607@mweb.co.za>
Message-ID: <6082BDB9-52D6-4BA1-9970-7D139C356E40@syenar.hu>

On 2009.09.15., at 17:18, Alex Strickland wrote:

> Viktor Szak?ts wrote:
>> + To clarify: IMO any such explicit initialization as WIN_COMINIT()
>> isn't very elegant in Harbour programs and programmers tend to forget
>> it. Hence IMO it should be done automatically on first call, but in
>> this case we have to deal with MT mode also if I'm not missing  
>> anything.
>
> Until such time, would you prefer an INIT PROCEDURE - this is MT  
> safe I think?

This also doesn't work unless someone explicitly links in
the .prg level parts (or at least a stub). With some hacks
this can be solved, but not very good.

Another solution is to add an extra byte array of 256 element,
each initialized to zero at compile time, and use that array
to check for validity. Of course those flags need to be set/reset
from win_com open/close code, too. This would just cause 256 bytes
fix overhead. Still not top beautiful, but perhaps the less
intrusive.

Brgds,
Viktor

From sscc at mweb.co.za  Tue Sep 15 11:41:40 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Sep 15 11:41:50 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12476] trunk/harbour
In-Reply-To: <6082BDB9-52D6-4BA1-9970-7D139C356E40@syenar.hu>
References: <E1Mm5Q5-00079W-Fa@dn4whf1.ch3.sourceforge.com>	<20090911163421.GA10667@uran.home.aster.pl>	<4AAF8B0A.3020802@mweb.co.za>	<6A492B61-E9DE-41CF-BD19-72FF1EC16941@syenar.hu>	<CBC820C9-97C2-454F-BC09-47D346C1CD48@syenar.hu>	<4AAFB02F.3020607@mweb.co.za>
	<6082BDB9-52D6-4BA1-9970-7D139C356E40@syenar.hu>
Message-ID: <4AAFB5B4.5040004@mweb.co.za>

Viktor Szak?ts wrote:

> Another solution is to add an extra byte array of 256 element,
> each initialized to zero at compile time, and use that array
> to check for validity. Of course those flags need to be set/reset
> from win_com open/close code, too. This would just cause 256 bytes
> fix overhead. Still not top beautiful, but perhaps the less
> intrusive.

I see Przemyslaw has done something much more pretty, we just need to remove my 
hack from win_tcom.prg.

Regards
Alex

From vszakats at users.sourceforge.net  Tue Sep 15 11:45:02 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue Sep 15 11:45:08 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12500] trunk/harbour
Message-ID: <E1MnaDG-00058S-Gq@c3vjzd1.ch3.sourceforge.com>

Revision: 12500
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12500&view=rev
Author:   vszakats
Date:     2009-09-15 15:44:56 +0000 (Tue, 15 Sep 2009)

Log Message:
-----------

2009-09-15 17:42 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * tests/menutest.prg
    ! Deleted COLOR keywords from examples. This seems to be an xhb 
      extension no present in Harbour or Clipper.

  * source/rtl/menuto.prg
    + Added NOTE documenting the __ATPROMPT() cColor parameter is 
      a Harbour extension. (it's valid because this is an 
      undocumented/internal function)

  * contrib/xhb/hbcompat.ch
    + Added @ PROMPT + COLOR keyword.
      Please test, I don't know if it collides with std.ch definition.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/xhb/hbcompat.ch
    trunk/harbour/source/rtl/menuto.prg
    trunk/harbour/tests/menutest.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Tue Sep 15 11:45:54 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 15 11:46:03 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12476] trunk/harbour
In-Reply-To: <4AAFB5B4.5040004@mweb.co.za>
References: <E1Mm5Q5-00079W-Fa@dn4whf1.ch3.sourceforge.com>	<20090911163421.GA10667@uran.home.aster.pl>	<4AAF8B0A.3020802@mweb.co.za>	<6A492B61-E9DE-41CF-BD19-72FF1EC16941@syenar.hu>	<CBC820C9-97C2-454F-BC09-47D346C1CD48@syenar.hu>	<4AAFB02F.3020607@mweb.co.za>
	<6082BDB9-52D6-4BA1-9970-7D139C356E40@syenar.hu>
	<4AAFB5B4.5040004@mweb.co.za>
Message-ID: <1F3DA45A-26D3-4328-9640-86EE9FADB4A3@syenar.hu>

>> Another solution is to add an extra byte array of 256 element,
>> each initialized to zero at compile time, and use that array
>> to check for validity. Of course those flags need to be set/reset
>> from win_com open/close code, too. This would just cause 256 bytes
>> fix overhead. Still not top beautiful, but perhaps the less
>> intrusive.
>
> I see Przemyslaw has done something much more pretty, we just need  
> to remove my hack from win_tcom.prg.

It wasn't committed, so I think now we're okay.
Pls double-check it though.

Brgds,
Viktor

From alxokhotnikov at gmail.com  Tue Sep 15 12:35:21 2009
From: alxokhotnikov at gmail.com (Alexandr Okhotnikov)
Date: Tue Sep 15 12:35:28 2009
Subject: [Harbour] hbpgsql
Message-ID: <d6fa31440909150935g205a5a32vb1cde57bb808ef8f@mail.gmail.com>

Hi

Tried hbpgsql

immediately found an error on the example of passing parameters (port
correctly handle)
question: hbpgsql working?
From e.m.giordano at emagsoftware.it  Tue Sep 15 13:29:27 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Sep 15 13:29:34 2009
Subject: [Harbour] Error using OLE
References: <42C8CE6069994F6385E68910BA78EE11@emag>
	<4AAF80AE.5090701@dbtopas.lt>
Message-ID: <552F81AF8E1741708406C73B15AEB701@emag>


-----Messaggio Originale----- 
Da: "Mindaugas Kavaliauskas" <dbtopas@dbtopas.lt>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 15 settembre 2009 13.55
Oggetto: Re: [Harbour] Error using OLE


> I do not have Word for testing, but changing CreateObject() to
> WIN_OleCreateObject() should help.

Thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Tue Sep 15 13:31:22 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Sep 15 13:31:29 2009
Subject: [Harbour] TRY/CATCH/END
Message-ID: <77D7B6CB9E734362ABDA3F8E0DD8D473@emag>

The following sample doesn't trap the error:

#xcommand TRY              => BEGIN SEQUENCE
#xcommand CATCH [<!oErr!>] => RECOVER [USING <oErr>] <-oErr->
#xcommand FINALLY          => ALWAYS


FUNCTION MAIN()

    LOCAL n := "Test"

    TRY
        n++
    CATCH
    END

    ? n

    RETURN NIL

What are the correct commands definitions to mimic xHarbour's TRY/CATCH/END?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Tue Sep 15 13:43:04 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 15 13:43:12 2009
Subject: [Harbour] TRY/CATCH/END
In-Reply-To: <77D7B6CB9E734362ABDA3F8E0DD8D473@emag>
References: <77D7B6CB9E734362ABDA3F8E0DD8D473@emag>
Message-ID: <20090915174304.GA17234@uran.home.aster.pl>

On Tue, 15 Sep 2009, Enrico Maria Giordano wrote:
> The following sample doesn't trap the error:
> #xcommand TRY              => BEGIN SEQUENCE
> #xcommand CATCH [<!oErr!>] => RECOVER [USING <oErr>] <-oErr->
> #xcommand FINALLY          => ALWAYS
> FUNCTION MAIN()
>    LOCAL n := "Test"
>    TRY
>        n++
>    CATCH
>    END
>    ? n
>    RETURN NIL
> What are the correct commands definitions to mimic xHarbour's TRY/CATCH/END?

   #xcommand TRY        => BEGIN SEQUENCE WITH { |e| break( e ) }

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Tue Sep 15 13:45:15 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Sep 15 13:45:22 2009
Subject: [Harbour] Errors and warnings in latest SVN
Message-ID: <A5804476E0954D8DAE7B253F58F9484B@emag>

Warning W8004 ../../../dbf1.c 5550: 'pFileNameNew' is assigned a value that 
is never used in function hb_dbfRename

Error E2258 ../../../win_com.c 844: Declaration was expected in function 
HB_CALL_ON_STARTUP_BEGIN
Error E2258 ../../../win_com.c 845: Declaration was expected in function 
HB_CALL_ON_STARTUP_BEGIN
Warning W8057 ../../../win_com.c 858: Parameter '_hb_wincom_init_' is never 
used in function HB_CALL_ON_STARTUP_BEGIN

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Tue Sep 15 14:01:51 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Sep 15 14:01:59 2009
Subject: [Harbour] TRY/CATCH/END
References: <77D7B6CB9E734362ABDA3F8E0DD8D473@emag>
	<20090915174304.GA17234@uran.home.aster.pl>
Message-ID: <83B03CE6B0564715A85E996F6769BFF1@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 15 settembre 2009 19.43
Oggetto: Re: [Harbour] TRY/CATCH/END


>   #xcommand TRY        => BEGIN SEQUENCE WITH { |e| break( e ) }

Thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Tue Sep 15 14:01:56 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Sep 15 14:02:04 2009
Subject: [Harbour] Another OLE problem
Message-ID: <62AFFC4D3E134DE9A8C3A076639B89B2@emag>

The following sample

FUNCTION MAIN()

    LOCAL oWord

    oWord = WIN_OLECREATEOBJECT( "Word.Application" )

    oWord:Documents:Add()

    ? oWord:ActiveDocument:StoryRanges[ 5 ]

    oWord:Visible = .T.

    RETURN NIL

works fine using xHarbour while stops with

Error BASE/1132  Bound error: array access

using Harbour.

Any ideas?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From druzus at acn.waw.pl  Tue Sep 15 14:02:35 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 15 14:02:42 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12476] trunk/harbour
In-Reply-To: <4AAF8B0A.3020802@mweb.co.za>
References: <E1Mm5Q5-00079W-Fa@dn4whf1.ch3.sourceforge.com>
	<20090911163421.GA10667@uran.home.aster.pl>
	<4AAF8B0A.3020802@mweb.co.za>
Message-ID: <20090915180235.GB17234@uran.home.aster.pl>

On Tue, 15 Sep 2009, Alex Strickland wrote:

Hi,

>> If you see such things in the code then it only means that author wanted
>> to create sth but didn't know how and created dummy code which was never
>> executed and it was not even possible to execute it explicitly from .prg
>> code. It also suggests that other parts of such code should be carefully
>> checked.
> I have made a change to ensure the initialisation works correctly. You are 
> right that I did not test that part, it seemed a no-brainer as all it was 
> doing was ensuring that invalid ports will be picked up, and I didn't try 
> an invalid port.
> As for the rest I have used it for a few years and I think that while far 
> from perfect it is usable. The other new parts are working for me.

I know. The whole win_com code looks really nice and thank you for your
great contribution.
My above text was simply too aggressive voice against HB_FUNC_INIT()/
HB_FUNC_EXIT() macro usage, sorry. Few times in the past I was trying
to explain that these macros are used to create unique function names
which do not create collisions with with normal function names and they
never convert C functions into self executing init/exit code but the
problem was systematically  returning and developers did not use to
check what these macros does in hbdefs.h.

BTW Only GCC and compatible compilers which support function attributes
are flexible enough to reach such functionality using simple macro only.

best regards,
Przemek
From druzus at users.sourceforge.net  Tue Sep 15 14:07:15 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue Sep 15 14:07:21 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12501] trunk/harbour
Message-ID: <E1MncQt-0002Zy-0y@bj8yhf1.ch3.sourceforge.com>

Revision: 12501
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12501&view=rev
Author:   druzus
Date:     2009-09-15 18:07:14 +0000 (Tue, 15 Sep 2009)

Log Message:
-----------
2009-09-15 20:07 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/dbf1.c
    * pacified BCC warning
  * harbour/contrib/hbwin/win_com.c
    ! added missing header #include "hbinit.h"
      Thanks to Enrico for info.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/win_com.c
    trunk/harbour/source/rdd/dbf1.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Tue Sep 15 14:29:01 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 15 14:29:08 2009
Subject: [Harbour] Another OLE problem
In-Reply-To: <62AFFC4D3E134DE9A8C3A076639B89B2@emag>
References: <62AFFC4D3E134DE9A8C3A076639B89B2@emag>
Message-ID: <20090915182901.GA12552@uran.home.aster.pl>

On Tue, 15 Sep 2009, Enrico Maria Giordano wrote:

Hi,

> The following sample
> FUNCTION MAIN()
>    LOCAL oWord
>    oWord = WIN_OLECREATEOBJECT( "Word.Application" )

I have a question here.
In your previous example you used:
   oWord = CREATEOBJECT( "Word.Application" )
I'm interesting if using WIN_OLECREATEOBJECT() resolved the problem you
reported.
CREATEOBJECT() should be an wrapper to WIN_OLECREATEOBJECT()
and in such simple example both function should work without any
problems so if CREATEOBJECT() does not work for you then it may
suggest some problems with old libraries having old version of
CREATEOBJECT() which are linked with final application.
Do you use hbmk2 to link your examples?

>    oWord:Documents:Add()
>    ? oWord:ActiveDocument:StoryRanges[ 5 ]
>    oWord:Visible = .T.
>    RETURN NIL
> works fine using xHarbour while stops with
> Error BASE/1132  Bound error: array access
> using Harbour.
> Any ideas?

Objects created by WIN_OLECREATEOBJECT() do not overload operators
like [], +, -, *, /, %, ++, --. ^. \. ==. != which are overload in
TOLEAUTO class in xHarbour.
AFAIR Mindaugas was explaining on this list why he do not want to
overload [] operator but I do not remember exact reasons.
In the past we had similar to xHarbour TOleAuto class with such
operators. If it's important then we can try to reactivate some
parts of such functionality in our legacy.prg code but I would like
to hear Mindaugas opinion first.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Tue Sep 15 15:09:41 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Sep 15 15:09:48 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12501] trunk/harbour
References: <E1MncQt-0002Zy-0y@bj8yhf1.ch3.sourceforge.com>
Message-ID: <1CF32540D3B34E0CA0BB89FDF814E874@emag>


-----Messaggio Originale----- 
Da: <druzus@users.sourceforge.net>
A: <harbour@harbour-project.org>
Data invio: marted? 15 settembre 2009 20.07
Oggetto: [Harbour] SF.net SVN: harbour-project:[12501] trunk/harbour


> 2009-09-15 20:07 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/rdd/dbf1.c
>    * pacified BCC warning
>  * harbour/contrib/hbwin/win_com.c
>    ! added missing header #include "hbinit.h"
>      Thanks to Enrico for info.

Thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Tue Sep 15 15:18:52 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Sep 15 15:18:59 2009
Subject: [Harbour] Another OLE problem
References: <62AFFC4D3E134DE9A8C3A076639B89B2@emag>
	<20090915182901.GA12552@uran.home.aster.pl>
Message-ID: <2854AC66E09547F3A631AF553DF1448C@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 15 settembre 2009 20.29
Oggetto: Re: [Harbour] Another OLE problem


> I have a question here.
> In your previous example you used:
>   oWord = CREATEOBJECT( "Word.Application" )
> I'm interesting if using WIN_OLECREATEOBJECT() resolved the problem you
> reported.
> CREATEOBJECT() should be an wrapper to WIN_OLECREATEOBJECT()
> and in such simple example both function should work without any
> problems so if CREATEOBJECT() does not work for you then it may
> suggest some problems with old libraries having old version of
> CREATEOBJECT() which are linked with final application.

The following sample

FUNCTION MAIN()

    LOCAL oWord

//    oWord = WIN_OLECREATEOBJECT( "Word.Application" )
    oWord = CREATEOBJECT( "Word.Application" )

    oWord:Documents:Add()

    oWord:Visible = .T.

    RETURN NIL

stops with

Error TOleAuto/65535  : TOLEAUTO:NEW
Called from THROW(0)
Called from TOLEAUTO:NEW(0)
Called from CREATEOBJECT(0)
Called from MAIN(6)

while works fine with WIN_OLE* version. Do I have something wrong in my link 
configuration file?

> Do you use hbmk2 to link your examples?

No, I'm using a batch file.

> Objects created by WIN_OLECREATEOBJECT() do not overload operators
> like [], +, -, *, /, %, ++, --. ^. \. ==. != which are overload in
> TOLEAUTO class in xHarbour.
> AFAIR Mindaugas was explaining on this list why he do not want to
> overload [] operator but I do not remember exact reasons.
> In the past we had similar to xHarbour TOleAuto class with such
> operators. If it's important then we can try to reactivate some
> parts of such functionality in our legacy.prg code but I would like
> to hear Mindaugas opinion first.

It would be nice if you can implement the operator overload in OLE.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Tue Sep 15 15:55:50 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 15 15:55:58 2009
Subject: [Harbour] Another OLE problem
In-Reply-To: <2854AC66E09547F3A631AF553DF1448C@emag>
References: <62AFFC4D3E134DE9A8C3A076639B89B2@emag>
	<20090915182901.GA12552@uran.home.aster.pl>
	<2854AC66E09547F3A631AF553DF1448C@emag>
Message-ID: <20090915195550.GA5462@uran.home.aster.pl>

On Tue, 15 Sep 2009, Enrico Maria Giordano wrote:
>> I have a question here.
>> In your previous example you used:
>>   oWord = CREATEOBJECT( "Word.Application" )
>> I'm interesting if using WIN_OLECREATEOBJECT() resolved the problem you
>> reported.
>> CREATEOBJECT() should be an wrapper to WIN_OLECREATEOBJECT()
>> and in such simple example both function should work without any
>> problems so if CREATEOBJECT() does not work for you then it may
>> suggest some problems with old libraries having old version of
>> CREATEOBJECT() which are linked with final application.
> The following sample
> FUNCTION MAIN()
>    LOCAL oWord
> //    oWord = WIN_OLECREATEOBJECT( "Word.Application" )
>    oWord = CREATEOBJECT( "Word.Application" )
>    oWord:Documents:Add()
>    oWord:Visible = .T.
>    RETURN NIL
> stops with
> Error TOleAuto/65535  : TOLEAUTO:NEW
> Called from THROW(0)
> Called from TOLEAUTO:NEW(0)
> Called from CREATEOBJECT(0)
> Called from MAIN(6)
> while works fine with WIN_OLE* version. Do I have something wrong in my 
> link configuration file?
>> Do you use hbmk2 to link your examples?
> No, I'm using a batch file.

It's possible the the problem is caused by old linked library list
in your batch file which were not updated to new library names in
Harbour and still uses hbole or sth like that. Now Harbour does not
have any hbole library and everything is in hbwin.
Please try to use hbmk2 to link above code, i.e. by simple:
   hbmk2 tst.prg
You can also verify dates of all your Harbour libraries and remove any
libraries which were not refreshed when you were rebuilding Harbour today.

>> Objects created by WIN_OLECREATEOBJECT() do not overload operators
>> like [], +, -, *, /, %, ++, --. ^. \. ==. != which are overload in
>> TOLEAUTO class in xHarbour.
>> AFAIR Mindaugas was explaining on this list why he do not want to
>> overload [] operator but I do not remember exact reasons.
>> In the past we had similar to xHarbour TOleAuto class with such
>> operators. If it's important then we can try to reactivate some
>> parts of such functionality in our legacy.prg code but I would like
>> to hear Mindaugas opinion first.
> It would be nice if you can implement the operator overload in OLE.

You can make it yourself quite easy.
It's enough to copy and past some code.
But 1-st you should check why CREATEOBJECT() does not work for you.
If you look at contrib/hbwin/legacy.prg then you will find that
CREATEOBJECT() is simple wrapper to TOleAuto():New()

   FUNCTION CreateObject( xOle, cClass )
      RETURN TOleAuto():New( xOle, cClass )

and in method new() it makes:

   hOle := __OleCreateObject( xOle )
   IF ! Empty( hOle )
      ::__hObj := hOle
      ::cClassName := xOle
   ELSE
      oError := ErrorNew()
      oError:Args          := hb_AParams()
      oError:CanDefault    := .F.
      oError:CanRetry      := .F.
      oError:CanSubstitute := .T.
      oError:Description   := win_OleErrorText()
      oError:GenCode       := EG_OLEEXCEPTION
      oError:Operation     := ProcName()
      oError:Severity      := ES_ERROR
      oError:SubCode       := -1
      oError:SubSystem     := "TOleAuto"
      RETURN Throw( oError )
   ENDIF

You see above RT error generate by THROW() what is very strange for me
because WIN_OLECREATEOBJECT() in contrib/hbwin/oleauto.prg makes exactly
the same job:

   FUNCTION win_OleCreateObject( ... )
      LOCAL oOle, hOle
      hOle := __OleCreateObject( ... )
      IF ! Empty( hOle )
         oOle := win_OleAuto()
         oOle:__hObj := hOle
      ENDIF
      RETURN oOle

and you reported that it works for you. So there are two possible answers:
There is sth wrong in TOleAuto():New() method and I do not see the wrong
code (maybe you can help) or it's a link time problem and CreateObject()
in your application is taken from some old harbour ole library, i.e.
hbole or hbole2.
I hope that above information should help you to locate the exact reason
of the problem.
If you can link your application with working CreateObject() function
then as next step you can try to add support for overloading [] operators.
You can make it like in xHarbour using OnError interface. Just try to
copy from xHarbour source/rtl/win32ole.prg OleCollection() method to
Harbour TOLEAUTO class in contrib/hbwin/legacy.prg.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Tue Sep 15 16:42:57 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Sep 15 16:43:04 2009
Subject: [Harbour] Another OLE problem
References: <62AFFC4D3E134DE9A8C3A076639B89B2@emag><20090915182901.GA12552@uran.home.aster.pl><2854AC66E09547F3A631AF553DF1448C@emag>
	<20090915195550.GA5462@uran.home.aster.pl>
Message-ID: <16492809A40F41C496D166B9E0AA385B@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 15 settembre 2009 21.55
Oggetto: Re: [Harbour] Another OLE problem


> It's possible the the problem is caused by old linked library list
> in your batch file which were not updated to new library names in
> Harbour and still uses hbole or sth like that. Now Harbour does not
> have any hbole library and everything is in hbwin.

This is my library list:

hbrtl.lib +
hbvm.lib +
hbcommon.lib +
hblang.lib +
gtwin.lib +
hbrdd.lib +
hbusrrdd +
rddfpt.lib +
rddntx.lib +
rddcdx.lib +
hbsix.lib +
hbmacro.lib +
hbodbc.lib +
hbziparc.lib +
hbmzip.lib +
hbzlib.lib +
hbct.lib +
hbtip.lib +
hbwin.lib +
import32.lib +
cw32.lib +
odbc32.lib +
wininet.lib +
hbcplr.lib +
hbpp.lib +
hbhsx.lib +
hbpcre.lib +
hbcpage.lib

Do you see anything wrong?

> Please try to use hbmk2 to link above code, i.e. by simple:
>   hbmk2 tst.prg

I'm not familiar with hbmk2. I just tried it but I get

Harbour 2.0.0beta3 (Rev. 12501)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 'bug.prg'...
Lines 14, Functions/Procedures 1
Generating C source output to 'bug.c'... Done.
hbmk2: Error: Running C compiler. -1
bcc32.exe -c -q -tWM -d -6 -O2 -OS -Ov -Oi -Oc  -IE:\include bug.c

> You can also verify dates of all your Harbour libraries and remove any
> libraries which were not refreshed when you were rebuilding Harbour today.

I always delete all the libs before updating them. Anyway I just checked 
them and they are ok.

> You can make it yourself quite easy.
> It's enough to copy and past some code.

Sorry, this is too much for me. :-(

> and you reported that it works for you. So there are two possible answers:
> There is sth wrong in TOleAuto():New() method and I do not see the wrong
> code (maybe you can help) or it's a link time problem and CreateObject()
> in your application is taken from some old harbour ole library, i.e.
> hbole or hbole2.

I dont' think so. I'm not using neither of the above two libs.

> I hope that above information should help you to locate the exact reason
> of the problem.

Honestly not. Is there any simpler test that I can make? :-)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Tue Sep 15 18:00:02 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 15 18:00:09 2009
Subject: [Harbour] Another OLE problem
In-Reply-To: <16492809A40F41C496D166B9E0AA385B@emag>
References: <20090915195550.GA5462@uran.home.aster.pl>
	<16492809A40F41C496D166B9E0AA385B@emag>
Message-ID: <20090915220002.GA26493@uran.home.aster.pl>

On Tue, 15 Sep 2009, Enrico Maria Giordano wrote:
>> I hope that above information should help you to locate the exact reason
>> of the problem.
> Honestly not. Is there any simpler test that I can make? :-)

I do not know any.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Sep 15 18:47:58 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 15 18:48:10 2009
Subject: [Harbour] Another OLE problem
In-Reply-To: <16492809A40F41C496D166B9E0AA385B@emag>
References: <62AFFC4D3E134DE9A8C3A076639B89B2@emag><20090915182901.GA12552@uran.home.aster.pl><2854AC66E09547F3A631AF553DF1448C@emag>
	<20090915195550.GA5462@uran.home.aster.pl>
	<16492809A40F41C496D166B9E0AA385B@emag>
Message-ID: <B2105522-62B7-42BE-9F40-347E0EAB179D@syenar.hu>

> I'm not familiar with hbmk2. I just tried it but I get
>
> Harbour 2.0.0beta3 (Rev. 12501)
> Copyright (c) 1999-2009, http://www.harbour-project.org/
> Compiling 'bug.prg'...
> Lines 14, Functions/Procedures 1
> Generating C source output to 'bug.c'... Done.
> hbmk2: Error: Running C compiler. -1
> bcc32.exe -c -q -tWM -d -6 -O2 -OS -Ov -Oi -Oc  -IE:\include bug.c

You should put BCC (or your compiler of
preference) in the PATH before running hbmk2.

Probably you have HB_COMPILER set in your
environment which forces BCC. I'd suggest
to delete it, it's not required anymore for
Harbour.

Brgds,
Viktor

From dbtopas at dbtopas.lt  Tue Sep 15 19:14:10 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Sep 15 19:15:22 2009
Subject: [Harbour] Another OLE problem
In-Reply-To: <20090915182901.GA12552@uran.home.aster.pl>
References: <62AFFC4D3E134DE9A8C3A076639B89B2@emag>
	<20090915182901.GA12552@uran.home.aster.pl>
Message-ID: <4AB01FC2.7050109@dbtopas.lt>

Hi,

Przemyslaw Czerpak wrote:
>> FUNCTION MAIN()
>>    LOCAL oWord
>>    oWord = WIN_OLECREATEOBJECT( "Word.Application" )
> 
> I have a question here.
> In your previous example you used:
>    oWord = CREATEOBJECT( "Word.Application" )
> I'm interesting if using WIN_OLECREATEOBJECT() resolved the problem you
> reported.
> CREATEOBJECT() should be an wrapper to WIN_OLECREATEOBJECT()
> and in such simple example both function should work without any
> problems so if CREATEOBJECT() does not work for you then it may
> suggest some problems with old libraries having old version of
> CREATEOBJECT() which are linked with final application.

I also thought it should work with CreateObject(), but I know 
WIN_OLECREATEOBJECT() works, so, I suggested a tested solution.

We had some compatibility layer in hbwin/legacy.prg. Please look into it 
and fix it if it is necessary.


>>    ? oWord:ActiveDocument:StoryRanges[ 5 ]
>> works fine using xHarbour while stops with
>> Error BASE/1132  Bound error: array access
>> using Harbour.
>> Any ideas?
> 
> Objects created by WIN_OLECREATEOBJECT() do not overload operators
> like [], +, -, *, /, %, ++, --. ^. \. ==. != which are overload in
> TOLEAUTO class in xHarbour.
> AFAIR Mindaugas was explaining on this list why he do not want to
> overload [] operator but I do not remember exact reasons.
> In the past we had similar to xHarbour TOleAuto class with such
> operators. If it's important then we can try to reactivate some
> parts of such functionality in our legacy.prg code but I would like
> to hear Mindaugas opinion first.

Well, I do not remember the exact reasons also :), it's something 
related to assign operator and +=, -=, etc. operators. You can find an 
arguments in mailing list archive. The best way is to download gzip'ed 
archive from http://lists.harbour-project.org/pipermail/harbour/ and do 
multi file search.

But I know that, if :StoryRanges is a real OLE collection, when 
:StoryRanges:Item(5) should work for sure in both xHarbour and Harbour, 
because :Item() is OLE method defined for all collections.


Regards,
Mindaugas
From druzus at users.sourceforge.net  Tue Sep 15 20:41:10 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue Sep 15 20:41:15 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12502] trunk/harbour
Message-ID: <E1Mnia6-0003Rm-8U@74yxhf1.ch3.sourceforge.com>

Revision: 12502
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12502&view=rev
Author:   druzus
Date:     2009-09-16 00:41:09 +0000 (Wed, 16 Sep 2009)

Log Message:
-----------
2009-09-16 02:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbvmpub.h
  * harbour/include/hbdefs.h
    * added #if/#endif comments and minor formatting

  * harbour/include/hbsetup.h
    ! disable malloc attribute for GCC < 3.xx

  * harbour/include/hbinit.h
    ! removed unnecessary __HAIKU__ condition

  * harbour/include/hbdate.h
    ! enable MT safe localtime_r() function in HAIKU/BEOS builds

  * harbour/source/common/hbgete.c
    ! enable setenv()/unsetenv() in HAIKU/BEOS builds

  * harbour/source/common/hbprintf.c
    ! removed wrongly added condition which disabled [u]intmax_t for GCC < 3

  * harbour/source/rtl/gtcrs/gtcrs.h
    ! do not redefine existing MAX_SIGNO

  * harbour/source/rtl/hbsocket.c
    ! enabled MT safe socket functions in HAIKU/BEOS builds

  * harbour/config/beos/libs.mk
    ! do not set explicitly GCC internal library paths.
      They are configured in GCC config and should not be overloaded
      in normal builds.

   TOFIX: error code are not properly decoded in HAIKU/BEOS builds.
          It can be seen in hbtest results. It's possible that it's
          HAIKU/BEOS problem not Harbour one.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/beos/libs.mk
    trunk/harbour/include/hbdate.h
    trunk/harbour/include/hbdefs.h
    trunk/harbour/include/hbinit.h
    trunk/harbour/include/hbsetup.h
    trunk/harbour/include/hbvmpub.h
    trunk/harbour/source/common/hbgete.c
    trunk/harbour/source/common/hbprintf.c
    trunk/harbour/source/rtl/gtcrs/gtcrs.h
    trunk/harbour/source/rtl/hbsocket.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Tue Sep 15 20:44:45 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue Sep 15 20:44:50 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12503] trunk/harbour
Message-ID: <E1MnidZ-0003Vj-JD@74yxhf1.ch3.sourceforge.com>

Revision: 12503
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12503&view=rev
Author:   druzus
Date:     2009-09-16 00:44:44 +0000 (Wed, 16 Sep 2009)

Log Message:
-----------
2009-09-16 02:44 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/common/hbgete.c
    ! fixed typo

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/common/hbgete.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From ice at extreme.hu  Tue Sep 15 23:27:49 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Tue Sep 15 23:27:57 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12502] trunk/harbour
In-Reply-To: <E1Mnia6-0003Rm-8U@74yxhf1.ch3.sourceforge.com>
References: <E1Mnia6-0003Rm-8U@74yxhf1.ch3.sourceforge.com>
Message-ID: <alpine.GSO.2.00.0909160404080.17989@dawn.royalcomp.hu>

On Wed, 16 Sep 2009, druzus@users.sourceforge.net wrote:

 >   * harbour/config/beos/libs.mk
 >     ! do not set explicitly GCC internal library paths.
 >       They are configured in GCC config and should not be overloaded
 >       in normal builds.

yes, right, thanks (and for the others too).

a word of warning to anyone who plans tackling haiku, when logged in 
via ssh, you get a substantially different environment compared to 
what you get when in a terminal window (and these differences do skew 
hb builds).

 >    TOFIX: error code are not properly decoded in HAIKU/BEOS builds.
 >           It can be seen in hbtest results. It's possible that it's
 >           HAIKU/BEOS problem not Harbour one.

do you mean errnos? if so, it seems they are doing this in a different 
way. could it not be perhaps that on posix, error codes tend to fit in 
int, whereas on haiku, they apparently don't, and something overflows 
and gets truncated?

that seems to be supported by this:

this from hbtest on haiku:

! 3655 MAIN_MISC(815)  __CopyFile("$$COPYFR.TMP", BADFNAME())
       Result: "E 20 BASE 2012 Create error <*INVALID/*.> OS:24579 #:1 F:DR"
     Expected: "E 20 BASE 2012 Create error <*INVALID/*.> OS:2 #:1 F:DR"

now if i'm not mistaken, the expected os:2 would be ENOENT, whereas 
the actual result of 24579 is 2147508227-2^31, where 2147508227 is 
ENOENT in haiku world. this must be an integer truncation someplace. 

anyway. reading http://www.haiku-os.org/docs/userguide/en/filesystem-layout.html
this, it seems that the following is a better fit for haiku (it's 
unclear to me whether it is also the case for beos or not) than 
/usr/local.

Index: config/global.mk
===================================================================
--- config/global.mk	(revision 12503)
+++ config/global.mk	(working copy)
@@ -1127,7 +1127,9 @@
    # Fill it automatically if not specified
    ifeq ($(HB_INSTALL_PREFIX),)
 
-      ifeq ($(HB_PLATFORM_UNIX),)
+      ifeq ($(HB_PLATFORM),beos)
+         HB_INSTALL_PREFIX := /boot/common
+      else ifeq ($(HB_PLATFORM_UNIX),)
          HB_INSTALL_PREFIX := $(realpath $(TOP)$(ROOT))
       else
          ifneq ($(PREFIX),)
@@ -1177,7 +1179,10 @@
 
 ifneq ($(HB_INSTALL_PREFIX),)
 
-   ifeq ($(HB_PLATFORM_UNIX),)
+   ifeq ($(HB_PLATFORM),beos)
+      LIBPOSTFIX := $(DIRSEP)harbour
+      INCPOSTFIX := $(DIRSEP)harbour
+   else ifeq ($(HB_PLATFORM_UNIX),)
       LIBPOSTFIX := $(DIRSEP)$(subst /,$(DIRSEP),$(PLAT_COMP))
    else
       # Not perfect, please enhance it.



-- 
[-]

mkdir /nonexistent
-------------- next part --------------
Index: config/global.mk
===================================================================
--- config/global.mk	(revision 12503)
+++ config/global.mk	(working copy)
@@ -1127,7 +1127,9 @@
    # Fill it automatically if not specified
    ifeq ($(HB_INSTALL_PREFIX),)
 
-      ifeq ($(HB_PLATFORM_UNIX),)
+      ifeq ($(HB_PLATFORM),beos)
+         HB_INSTALL_PREFIX := /boot/common
+      else ifeq ($(HB_PLATFORM_UNIX),)
          HB_INSTALL_PREFIX := $(realpath $(TOP)$(ROOT))
       else
          ifneq ($(PREFIX),)
@@ -1177,7 +1179,10 @@
 
 ifneq ($(HB_INSTALL_PREFIX),)
 
-   ifeq ($(HB_PLATFORM_UNIX),)
+   ifeq ($(HB_PLATFORM),beos)
+      LIBPOSTFIX := $(DIRSEP)harbour
+      INCPOSTFIX := $(DIRSEP)harbour
+   else ifeq ($(HB_PLATFORM_UNIX),)
       LIBPOSTFIX := $(DIRSEP)$(subst /,$(DIRSEP),$(PLAT_COMP))
    else
       # Not perfect, please enhance it.
From dmacias at mail.udg.mx  Wed Sep 16 01:45:28 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Sep 16 01:45:49 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
Message-ID: <4AB07B78.4070204@mail.udg.mx>

Pritpal:

>>  From your prefered environment, use:
>>     netapplctn 189.162.70.97 2941
>>
>> First people in test will create files  :-)
>>

>I cannot connect. Is it stopped now ?

I left it working around one hour and you tried later

Now is working again with new IP. Use:
   netapplctn 189.162.166.143 2941
It will be working some hours

Notes:
- As said before, in LAN response is fast and do not show delay of 18
seconds in opening table as you reported with Win2003, so seem a matter
of OS response
- In Internet response is slow. Perhaps it explain your note
"Application just hanged for indefinitely and did not showup next
screen" in your recent "Real Web IP" tests

Make tests excluding browse(), as we know is very intensive and unuseful
in low band networks

As you can handle client side, modify netapplctn.prg to apply other kind
of tests, creating, indexing, opening, filling, querys and so on
A simple
   ? recno()
in filling table loop can help to measure time adding/storing records

Try with more than one session too

This will be a "real Web" tests.
If you are in India, the minimum distance in tests will be Earth diameter

David Macias



From mhsabado at gmail.com  Wed Sep 16 02:22:51 2009
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Wed Sep 16 02:23:03 2009
Subject: [Harbour] HBNETIO Unable To Connect After 2009-09-16 02:44 UTC+0200
In-Reply-To: <4aaaf309.1c08c00a.18f2.3ddeSMTPIN_ADDED@mx.google.com>
References: <4aaaf309.1c08c00a.18f2.3ddeSMTPIN_ADDED@mx.google.com>
Message-ID: <4AB0843B.8080101@gmail.com>

Hi Przemek,

I can no longer connect to my server application after above SVN.  I 
didn't change anything from code since last time that it's working.  I'm 
using BCC compiler.  Any advise?

Thanks and best regards,
Mario

From druzus at acn.waw.pl  Wed Sep 16 03:04:50 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 16 03:04:56 2009
Subject: [Harbour] HBNETIO Unable To Connect After 2009-09-16 02:44
	UTC+0200
In-Reply-To: <4AB0843B.8080101@gmail.com>
References: <4aaaf309.1c08c00a.18f2.3ddeSMTPIN_ADDED@mx.google.com>
	<4AB0843B.8080101@gmail.com>
Message-ID: <20090916070449.GA6286@uran.home.aster.pl>

On Wed, 16 Sep 2009, Mario H. Sabado wrote:

Hi,

> I can no longer connect to my server application after above SVN.  I didn't 
> change anything from code since last time that it's working.  I'm using BCC 
> compiler.  Any advise?

Recompile your client and server application.
I extended protocol so I have to change login signature.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Wed Sep 16 03:13:36 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Sep 16 03:13:43 2009
Subject: [Harbour] Another OLE problem
References: <62AFFC4D3E134DE9A8C3A076639B89B2@emag><20090915182901.GA12552@uran.home.aster.pl><2854AC66E09547F3A631AF553DF1448C@emag>
	<20090915195550.GA5462@uran.home.aster.pl>
Message-ID: <E5D44D224E5A48AF8139EADC5DEFF9EE@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 15 settembre 2009 21.55
Oggetto: Re: [Harbour] Another OLE problem


> But 1-st you should check why CREATEOBJECT() does not work for you.
> If you look at contrib/hbwin/legacy.prg then you will find that
> CREATEOBJECT() is simple wrapper to TOleAuto():New()
>
>   FUNCTION CreateObject( xOle, cClass )
>      RETURN TOleAuto():New( xOle, cClass )

I'm trying to compile legacy.prg but I'm getting

Error: Unresolved external '_HB_FUN___OLEPDISP'

It should be in hbwin.lib but it is not. It's normal?

> If you can link your application with working CreateObject() function
> then as next step you can try to add support for overloading [] operators.
> You can make it like in xHarbour using OnError interface. Just try to
> copy from xHarbour source/rtl/win32ole.prg OleCollection() method to
> Harbour TOLEAUTO class in contrib/hbwin/legacy.prg.

Ok, I will try.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Wed Sep 16 03:19:06 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Sep 16 03:19:14 2009
Subject: [Harbour] Another OLE problem
References: <62AFFC4D3E134DE9A8C3A076639B89B2@emag><20090915182901.GA12552@uran.home.aster.pl><2854AC66E09547F3A631AF553DF1448C@emag><20090915195550.GA5462@uran.home.aster.pl><16492809A40F41C496D166B9E0AA385B@emag>
	<B2105522-62B7-42BE-9F40-347E0EAB179D@syenar.hu>
Message-ID: <48789A9A1725430BB63342441AB9937E@emag>


-----Messaggio Originale----- 
Da: "Viktor Szak?ts" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoled? 16 settembre 2009 0.47
Oggetto: Re: [Harbour] Another OLE problem


> You should put BCC (or your compiler of
> preference) in the PATH before running hbmk2.
>
> Probably you have HB_COMPILER set in your
> environment which forces BCC. I'd suggest
> to delete it, it's not required anymore for
> Harbour.

This is what I'm using now:

SET PATH=e:\bcc55\bin;%PATH%
hbmk2 bug

and this is what I get:

Harbour 2.0.0beta3 (Rev. 12501)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 'bug.prg'...
Lines 16, Functions/Procedures 1
Generating C source output to 'bug.c'... Done.
bug.c:
Error E2209 bug.c 7: Unable to open include file 'hbvmpub.h'
Error E2209 bug.c 8: Unable to open include file 'hbinit.h'
Error E2258 bug.c 11: Declaration was expected in function HB_FUNC
Error E2258 bug.c 12: Declaration was expected in function HB_FUNC
Error E2258 bug.c 15: Declaration was expected in function HB_FUNC
Error E2188 bug.c 16: Expression syntax in function HB_FUNC
Warning W8070 bug.c 16: Function should return a value in function HB_FUNC
Warning W8057 bug.c 16: Parameter 'MAIN' is never used in function HB_FUNC
Error E2040 bug.c 16: Declaration terminated incorrectly
*** 7 errors in Compile ***
hbmk2: Error: Running C compiler. 1
bcc32.exe -c -q -tWM -d -6 -O2 -OS -Ov -Oi -Oc -DHB_FM_STATISTICS_OFF -IE:\include 
bug.c

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Wed Sep 16 03:20:44 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 16 03:20:50 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12502] trunk/harbour
In-Reply-To: <alpine.GSO.2.00.0909160404080.17989@dawn.royalcomp.hu>
References: <E1Mnia6-0003Rm-8U@74yxhf1.ch3.sourceforge.com>
	<alpine.GSO.2.00.0909160404080.17989@dawn.royalcomp.hu>
Message-ID: <20090916072044.GB6286@uran.home.aster.pl>

On Wed, 16 Sep 2009, Tamas TEVESZ wrote:

Hi,

> a word of warning to anyone who plans tackling haiku, when logged in 
> via ssh, you get a substantially different environment compared to 
> what you get when in a terminal window (and these differences do skew 
> hb builds).

And note about GTTRM in HAIKU XTerm emulator:
- MIDDLE and RIGHT buttons are reverted
- UP,DOWN,RIGHT,LEFT keys are reported as CTRL+{UP,DOWN,RIGHT,LEFT}
I cannot cleanly fix it because it's incompatible with other XTerm
emulators and here conditional compilation:
   #ifdef HB_OS_BEOS
resolves problem only partially because it will not help if you use
HAIKU XTERM to logon to Linux box and execute remotly Harbour-linux
application, etc.

>  >    TOFIX: error code are not properly decoded in HAIKU/BEOS builds.
>  >           It can be seen in hbtest results. It's possible that it's
>  >           HAIKU/BEOS problem not Harbour one.
> do you mean errnos? if so, it seems they are doing this in a different 
> way. could it not be perhaps that on posix, error codes tend to fit in 
> int, whereas on haiku, they apparently don't, and something overflows 
> and gets truncated?
> that seems to be supported by this:
> this from hbtest on haiku:
> ! 3655 MAIN_MISC(815)  __CopyFile("$$COPYFR.TMP", BADFNAME())
>        Result: "E 20 BASE 2012 Create error <*INVALID/*.> OS:24579 #:1 F:DR"
>      Expected: "E 20 BASE 2012 Create error <*INVALID/*.> OS:2 #:1 F:DR"
> now if i'm not mistaken, the expected os:2 would be ENOENT, whereas 
> the actual result of 24579 is 2147508227-2^31, where 2147508227 is 
> ENOENT in haiku world. this must be an integer truncation someplace. 

Yes, it's a problem with errno macro values in source/rtl/fserr.c.
I'll fix it in a while. Thank you for your suggestion.

> anyway. reading http://www.haiku-os.org/docs/userguide/en/filesystem-layout.html
> this, it seems that the following is a better fit for haiku (it's 
> unclear to me whether it is also the case for beos or not) than 
> /usr/local.
[...]

yes but I would like to leave such modifications to Viktor,

best regards,
Przemek
From druzus at users.sourceforge.net  Wed Sep 16 03:22:54 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Wed Sep 16 03:22:59 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12504] trunk/harbour
Message-ID: <E1Mnoqs-0006J5-0C@c3vjzd1.ch3.sourceforge.com>

Revision: 12504
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12504&view=rev
Author:   druzus
Date:     2009-09-16 07:22:52 +0000 (Wed, 16 Sep 2009)

Log Message:
-----------
2009-09-16 09:22 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hb-func.sh
    * updated hb* scripts to work with HAIKU/BEOS

  * harbour/source/vm/dynlibhb.c
    * enabled dlopen()/dlclose() in HAIKU/BEOS builds
    * added TODO warning in non DOS builds which does not support
      dynamic library loading

  * harbour/source/rtl/fserr.c
    ! fixed errno translation

  * harbour/source/rtl/gttrm/gttrm.c
    + added support for CTRL+{UP,DOWN,RIGHT,LEFT} keys in HAIKU XTerm.
    + added hack for UP,DOWN,RIGHT,LEFT keys in HAIKU XTerm - it works
      only locally.
    * added two notes about problems with HAIKU XTerm which cannot be
      cleanly resolved by us:
         - reverted MIDDLE and RIGHT button
         - UP,DOWN,RIGHT,LEFT use the same sequences as
           CTRL+{UP,DOWN,RIGHT,LEFT} in XTerm 3.x.x
      any hardcoded solution is wrong in such case because XTerm can
      be used for remote access.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/hb-func.sh
    trunk/harbour/source/rtl/fserr.c
    trunk/harbour/source/rtl/gttrm/gttrm.c
    trunk/harbour/source/vm/dynlibhb.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Wed Sep 16 03:25:04 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 16 03:25:10 2009
Subject: [Harbour] Another OLE problem
In-Reply-To: <E5D44D224E5A48AF8139EADC5DEFF9EE@emag>
References: <20090915195550.GA5462@uran.home.aster.pl>
	<E5D44D224E5A48AF8139EADC5DEFF9EE@emag>
Message-ID: <20090916072504.GA6057@uran.home.aster.pl>

On Wed, 16 Sep 2009, Enrico Maria Giordano wrote:

Hi,

> I'm trying to compile legacy.prg but I'm getting
> Error: Unresolved external '_HB_FUN___OLEPDISP'
> It should be in hbwin.lib but it is not. It's normal?

This is not normal and it suggests that there is sth wrong
with your local configuration settings and it looks that
your hbwin is not the latest one.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Sep 16 03:25:54 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 03:26:04 2009
Subject: [Harbour] Another OLE problem
In-Reply-To: <48789A9A1725430BB63342441AB9937E@emag>
References: <62AFFC4D3E134DE9A8C3A076639B89B2@emag><20090915182901.GA12552@uran.home.aster.pl><2854AC66E09547F3A631AF553DF1448C@emag><20090915195550.GA5462@uran.home.aster.pl><16492809A40F41C496D166B9E0AA385B@emag>
	<B2105522-62B7-42BE-9F40-347E0EAB179D@syenar.hu>
	<48789A9A1725430BB63342441AB9937E@emag>
Message-ID: <55EB8BB3-6041-42D4-A416-13F2FA215CAE@syenar.hu>

>> You should put BCC (or your compiler of
>> preference) in the PATH before running hbmk2.
>>
>> Probably you have HB_COMPILER set in your
>> environment which forces BCC. I'd suggest
>> to delete it, it's not required anymore for
>> Harbour.
>
> This is what I'm using now:
>
> SET PATH=e:\bcc55\bin;%PATH%
> hbmk2 bug
>
> and this is what I get:
>
> Harbour 2.0.0beta3 (Rev. 12501)
> Copyright (c) 1999-2009, http://www.harbour-project.org/
> Compiling 'bug.prg'...
> Lines 16, Functions/Procedures 1
> Generating C source output to 'bug.c'... Done.
> bug.c:
> Error E2209 bug.c 7: Unable to open include file 'hbvmpub.h'
> Error E2209 bug.c 8: Unable to open include file 'hbinit.h'
> Error E2258 bug.c 11: Declaration was expected in function HB_FUNC
> Error E2258 bug.c 12: Declaration was expected in function HB_FUNC
> Error E2258 bug.c 15: Declaration was expected in function HB_FUNC
> Error E2188 bug.c 16: Expression syntax in function HB_FUNC
> Warning W8070 bug.c 16: Function should return a value in function  
> HB_FUNC
> Warning W8057 bug.c 16: Parameter 'MAIN' is never used in function  
> HB_FUNC
> Error E2040 bug.c 16: Declaration terminated incorrectly
> *** 7 errors in Compile ***
> hbmk2: Error: Running C compiler. 1
> bcc32.exe -c -q -tWM -d -6 -O2 -OS -Ov -Oi -Oc - 
> DHB_FM_STATISTICS_OFF -IE:\include bug.c

You probably moved hbmk2.exe out of the Harbour directory structure
(or vice versa), as an end result hbmk2's Harbour dir layout  
autodetection
cannot work.

Leave hbmk2.exe in <harbour>/bin, bin/win/bcc or bin/win dir to let
it find it's other components (like headers, which is missing in this
case).

BTW, libs should reside in <harbour>/lib/win/bcc or <harbour>/lib.

[ of course everything can be overridden by HB_*_INSTALL envvars,
but I don't recommend it. ]

Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Wed Sep 16 03:28:06 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Sep 16 03:28:14 2009
Subject: [Harbour] Another OLE problem
References: <62AFFC4D3E134DE9A8C3A076639B89B2@emag><20090915182901.GA12552@uran.home.aster.pl>
	<4AB01FC2.7050109@dbtopas.lt>
Message-ID: <8C84DDB3EFD7494E828F297FC41A80C3@emag>


-----Messaggio Originale----- 
Da: "Mindaugas Kavaliauskas" <dbtopas@dbtopas.lt>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoled? 16 settembre 2009 1.14
Oggetto: Re: [Harbour] Another OLE problem


> I also thought it should work with CreateObject(), but I know 
> WIN_OLECREATEOBJECT() works, so, I suggested a tested solution.

Can you try using CREATEOBJECT() instead?

> We had some compatibility layer in hbwin/legacy.prg. Please look into it 
> and fix it if it is necessary.

As I just wrote in my previous message, it can be linked.

> But I know that, if :StoryRanges is a real OLE collection, when 
> :StoryRanges:Item(5) should work for sure in both xHarbour and Harbour, 
> because :Item() is OLE method defined for all collections.

With the following sample

FUNCTION MAIN()

    LOCAL oWord

    oWord = WIN_OLECREATEOBJECT( "Word.Application" )

    oWord:Documents:Add()

    ? oWord:ActiveDocument:StoryRanges( 5 )

    oWord:Visible = .T.

    RETURN NIL

I get

Error BASE/3012  Argument error: STORYRANGES
Called from WIN_OLEAUTO:STORYRANGES(0)
Called from MAIN(9)

while it still works fine using xHarbour.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Wed Sep 16 03:31:03 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Sep 16 03:31:11 2009
Subject: [Harbour] Another OLE problem
References: <62AFFC4D3E134DE9A8C3A076639B89B2@emag><20090915182901.GA12552@uran.home.aster.pl>
	<4AB01FC2.7050109@dbtopas.lt>
Message-ID: <AFFDCA18D532472A86670E9FA541419A@emag>


-----Messaggio Originale----- 
Da: "Mindaugas Kavaliauskas" <dbtopas@dbtopas.lt>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoled? 16 settembre 2009 1.14
Oggetto: Re: [Harbour] Another OLE problem


> But I know that, if :StoryRanges is a real OLE collection, when 
> :StoryRanges:Item(5) should work for sure in both xHarbour and Harbour, 
> because :Item() is OLE method defined for all collections.

Sorry, I missed "Item". This is the sample now

FUNCTION MAIN()

    LOCAL oWord

    oWord = WIN_OLECREATEOBJECT( "Word.Application" )

    oWord:Documents:Add()

    ? oWord:ActiveDocument:StoryRanges:Item( 5 )

    oWord:Visible = .T.

    RETURN NIL

and this is the error

Error BASE/3012  Argument error: ITEM
Called from WIN_OLEAUTO:ITEM(0)
Called from MAIN(9)

Still works using xHarbour.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at users.sourceforge.net  Wed Sep 16 03:45:43 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Wed Sep 16 03:45:49 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12505]
	trunk/harbour/ChangeLog
Message-ID: <E1MnpCx-0006jC-R6@c3vjzd1.ch3.sourceforge.com>

Revision: 12505
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12505&view=rev
Author:   druzus
Date:     2009-09-16 07:45:42 +0000 (Wed, 16 Sep 2009)

Log Message:
-----------
2009-09-16 09:45 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/ChangeLog
    - removed TOFIX note - already fixed

Modified Paths:
--------------
    trunk/harbour/ChangeLog


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From e.m.giordano at emagsoftware.it  Wed Sep 16 03:48:02 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Sep 16 03:48:09 2009
Subject: [Harbour] Another OLE problem
References: <20090915195550.GA5462@uran.home.aster.pl><E5D44D224E5A48AF8139EADC5DEFF9EE@emag>
	<20090916072504.GA6057@uran.home.aster.pl>
Message-ID: <71A536439E5F4199B2CC33D0BE0FD69B@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoled? 16 settembre 2009 9.25
Oggetto: Re: [Harbour] Another OLE problem


> This is not normal and it suggests that there is sth wrong
> with your local configuration settings and it looks that
> your hbwin is not the latest one.

This is the batch I'm using to build Harbour:

@ ECHO OFF
SET PATH=e:\bcc55\bin;%PATH%
SET HB_COMPILER=bcc
SET HB_USER_CFLAGS=-DHB_FM_STATISTICS_OFF
mingw32-make clean install > make_gnu.log 2>&1

Do you see anything wrong?

I just found one interesting thing: there are two hbwin.lib in my SVN 
repository, one (23 Jun 2009) in lib and one (16 Sep 2009) in lib\win\bcc. 
Do I have to take the latter? If yes, why it is not copied to lib directory 
as the other libs?

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From vszakats at users.sourceforge.net  Wed Sep 16 03:48:58 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep 16 03:49:04 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12506] trunk/harbour
Message-ID: <E1MnpG6-0003V2-MU@dn4whf1.ch3.sourceforge.com>

Revision: 12506
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12506&view=rev
Author:   vszakats
Date:     2009-09-16 07:48:57 +0000 (Wed, 16 Sep 2009)

Log Message:
-----------
2009-09-16 09:47 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    + Added support for beos targets to hbmk2. (untested)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From e.m.giordano at emagsoftware.it  Wed Sep 16 03:52:08 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Sep 16 03:52:15 2009
Subject: [Harbour] Another OLE problem
References: <62AFFC4D3E134DE9A8C3A076639B89B2@emag><20090915182901.GA12552@uran.home.aster.pl><2854AC66E09547F3A631AF553DF1448C@emag><20090915195550.GA5462@uran.home.aster.pl><16492809A40F41C496D166B9E0AA385B@emag><B2105522-62B7-42BE-9F40-347E0EAB179D@syenar.hu><48789A9A1725430BB63342441AB9937E@emag>
	<55EB8BB3-6041-42D4-A416-13F2FA215CAE@syenar.hu>
Message-ID: <CE60CCDFB11C4138860FD9A7D19E98E5@emag>


-----Messaggio Originale----- 
Da: "Viktor Szak?ts" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoled? 16 settembre 2009 9.25
Oggetto: Re: [Harbour] Another OLE problem


> You probably moved hbmk2.exe out of the Harbour directory structure
> (or vice versa), as an end result hbmk2's Harbour dir layout 
> autodetection cannot work.

Yes, I don't like to work directly inside the SVN repository. Anyway, I'm 
going to test...

Now I'm using

@ ECHO OFF
SET PATH=e:\bcc55\bin;%PATH%
\harbour_cvs\harbour\bin\hbmk2 bug

and what I get is

hbmk2: Processing configuration: E:\harbour_cvs\harbour\bin\hbmk.cfg
Harbour 2.0.0beta3 (Rev. 12504)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 'bug.prg'...
Lines 1188, Functions/Procedures 10
Generating C source output to 'bug.c'... Done.
bug.c:
Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
Error: Unresolved external '_HB_FUN_WIN_OLEAUTO' referenced from 
E:\HARBOUR\BUG.OBJ
Error: Unresolved external '_HB_FUN___OLEPDISP' referenced from 
E:\HARBOUR\BUG.OBJ
Error: Unresolved external '_HB_FUN_WIN_P2N' referenced from 
E:\HARBOUR\BUG.OBJ
Error: Unresolved external '_HB_FUN___OLECREATEOBJECT' referenced from 
E:\HARBOUR\BUG.OBJ
Error: Unresolved external '_HB_FUN_WIN_OLEERRORTEXT' referenced from 
E:\HARBOUR\BUG.OBJ
Error: Unresolved external '_HB_FUN___OLEGETACTIVEOBJECT' referenced from 
E:\HARBOUR\BUG.OBJ
Error: Unresolved external '_HB_FUN_WIN_PRN' referenced from 
E:\HARBOUR\BUG.OBJ
Error: Unresolved external '_HB_FUN_WIN_BMP' referenced from 
E:\HARBOUR\BUG.OBJ
hbmk2: Error: Running linker. 2
ilink32.exe @C:\DOCUME~1\ENRICO~1\IMPOST~1\Temp\rpi1fz.lnk

I really don't understand how to use hbmk2...

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Wed Sep 16 03:57:12 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 03:57:20 2009
Subject: [Harbour] Another OLE problem
In-Reply-To: <71A536439E5F4199B2CC33D0BE0FD69B@emag>
References: <20090915195550.GA5462@uran.home.aster.pl><E5D44D224E5A48AF8139EADC5DEFF9EE@emag>
	<20090916072504.GA6057@uran.home.aster.pl>
	<71A536439E5F4199B2CC33D0BE0FD69B@emag>
Message-ID: <6FD70A40-DD31-431A-BB2F-D3835433664F@syenar.hu>

> This is the batch I'm using to build Harbour:
>
> @ ECHO OFF
> SET PATH=e:\bcc55\bin;%PATH%
> SET HB_COMPILER=bcc
> SET HB_USER_CFLAGS=-DHB_FM_STATISTICS_OFF
> mingw32-make clean install > make_gnu.log 2>&1
>
> Do you see anything wrong?

You can deleted 'SET HB_COMPILER=bcc', best to
rely on autodetection to avoid problems.

You can also delete HB_USER_CFLAGS. It's the default.

Which means it's enough to use the two lines shown
in INSTALL/examples.

> I just found one interesting thing: there are two hbwin.lib in my  
> SVN repository, one (23 Jun 2009) in lib and one (16 Sep 2009) in lib 
> \win\bcc. Do I have to take the latter? If yes, why it is not copied  
> to lib directory as the other libs?

There is nothing wrong with the build files, it's
probably the result of some local experimenting or
maybe of some temporary state of the SVN since Jun 23.

Anyhow this is probably the answer to all previous
problems. In case of doubt it's better to start over
with a clean env; fresh repo.

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep 16 04:04:08 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 04:04:17 2009
Subject: [Harbour] Another OLE problem
In-Reply-To: <CE60CCDFB11C4138860FD9A7D19E98E5@emag>
References: <62AFFC4D3E134DE9A8C3A076639B89B2@emag><20090915182901.GA12552@uran.home.aster.pl><2854AC66E09547F3A631AF553DF1448C@emag><20090915195550.GA5462@uran.home.aster.pl><16492809A40F41C496D166B9E0AA385B@emag><B2105522-62B7-42BE-9F40-347E0EAB179D@syenar.hu><48789A9A1725430BB63342441AB9937E@emag>
	<55EB8BB3-6041-42D4-A416-13F2FA215CAE@syenar.hu>
	<CE60CCDFB11C4138860FD9A7D19E98E5@emag>
Message-ID: <EF3478FC-5601-4397-94FB-BFC07293870E@syenar.hu>

>> You probably moved hbmk2.exe out of the Harbour directory structure
>> (or vice versa), as an end result hbmk2's Harbour dir layout  
>> autodetection cannot work.
>
> Yes, I don't like to work directly inside the SVN repository.  
> Anyway, I'm going to test...

You don't have to be inside the SVN source repository sandbox.
You can 'install' Harbour to whereever else and everything
should keep working there, too.

> Now I'm using
>
> @ ECHO OFF
> SET PATH=e:\bcc55\bin;%PATH%
> \harbour_cvs\harbour\bin\hbmk2 bug
>
> and what I get is
>
> hbmk2: Processing configuration: E:\harbour_cvs\harbour\bin\hbmk.cfg
> Harbour 2.0.0beta3 (Rev. 12504)
> Copyright (c) 1999-2009, http://www.harbour-project.org/
> Compiling 'bug.prg'...
> Lines 1188, Functions/Procedures 10
> Generating C source output to 'bug.c'... Done.
> bug.c:
> Turbo Incremental Link 5.00 Copyright (c) 1997, 2000 Borland
> Error: Unresolved external '_HB_FUN_WIN_OLEAUTO' referenced from E: 
> \HARBOUR\BUG.OBJ
> Error: Unresolved external '_HB_FUN___OLEPDISP' referenced from E: 
> \HARBOUR\BUG.OBJ
> Error: Unresolved external '_HB_FUN_WIN_P2N' referenced from E: 
> \HARBOUR\BUG.OBJ
> Error: Unresolved external '_HB_FUN___OLECREATEOBJECT' referenced  
> from E:\HARBOUR\BUG.OBJ
> Error: Unresolved external '_HB_FUN_WIN_OLEERRORTEXT' referenced  
> from E:\HARBOUR\BUG.OBJ
> Error: Unresolved external '_HB_FUN___OLEGETACTIVEOBJECT' referenced  
> from E:\HARBOUR\BUG.OBJ
> Error: Unresolved external '_HB_FUN_WIN_PRN' referenced from E: 
> \HARBOUR\BUG.OBJ
> Error: Unresolved external '_HB_FUN_WIN_BMP' referenced from E: 
> \HARBOUR\BUG.OBJ
> hbmk2: Error: Running linker. 2
> ilink32.exe @C:\DOCUME~1\ENRICO~1\IMPOST~1\Temp\rpi1fz.lnk
>
> I really don't understand how to use hbmk2...

Simply add the extra libs you use. In this case: -lhbwin

Or, this is again can be the result of double hbwin.lib and the wrong
one gets picked.

Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Wed Sep 16 04:12:11 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Sep 16 04:12:18 2009
Subject: [Harbour] Another OLE problem
References: <20090915195550.GA5462@uran.home.aster.pl><E5D44D224E5A48AF8139EADC5DEFF9EE@emag><20090916072504.GA6057@uran.home.aster.pl><71A536439E5F4199B2CC33D0BE0FD69B@emag>
	<6FD70A40-DD31-431A-BB2F-D3835433664F@syenar.hu>
Message-ID: <2E5AE3CEF9AE4E518DAA255B3FB24758@emag>


-----Messaggio Originale----- 
Da: "Viktor Szak?ts" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoled? 16 settembre 2009 9.57
Oggetto: Re: [Harbour] Another OLE problem


> > This is the batch I'm using to build Harbour:
> >
> > @ ECHO OFF
> > SET PATH=e:\bcc55\bin;%PATH%
> > SET HB_COMPILER=bcc
> > SET HB_USER_CFLAGS=-DHB_FM_STATISTICS_OFF
> > mingw32-make clean install > make_gnu.log 2>&1
> >
> > Do you see anything wrong?
>
> You can deleted 'SET HB_COMPILER=bcc', best to
> rely on autodetection to avoid problems.
>
> You can also delete HB_USER_CFLAGS. It's the default.

Great! Now my batch is

@ ECHO OFF
SET PATH=e:\bcc55\bin;%PATH%
mingw32-make clean install > make_gnu.log 2>&1

> > I just found one interesting thing: there are two hbwin.lib in my  SVN 
> > repository, one (23 Jun 2009) in lib and one (16 Sep 2009) in lib 
> > \win\bcc. Do I have to take the latter? If yes, why it is not copied  to 
> > lib directory as the other libs?
>
> There is nothing wrong with the build files, it's
> probably the result of some local experimenting or
> maybe of some temporary state of the SVN since Jun 23.
>
> Anyhow this is probably the answer to all previous
> problems. In case of doubt it's better to start over
> with a clean env; fresh repo.

Ok, but are you saying that I have to take the libs from lib and win folders 
and not only from lib folder? If yes, this is a change that I missed.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From francek.prijatelj at siol.net  Wed Sep 16 04:16:44 2009
From: francek.prijatelj at siol.net (=?UTF-8?Q?Fran=C4=8Dek_Prijatelj?=)
Date: Wed Sep 16 04:16:51 2009
Subject: [Harbour] demoqt tests with debug_new - Leaked objects
In-Reply-To: <25440044.post@talk.nabble.com>
References: <004601ca3537$74bda720$5e38f560$@Bisz@t-online.hu>
	<25440044.post@talk.nabble.com>
Message-ID: <25467896.post@talk.nabble.com>


Hi Pritpal

In STATIC FUNCTION Dialogs You are using local oDlg which
is overwriten many times (you should delete QWidgets pointed to by it,
before allocating new ones)

One solution (not going in other leaks) is this:


PROCEDURE Main()
   Local oLabel, oBtn, oDA, oTabBar
   Local oWnd, oSize
   Local oMenuBar, pIcon
   Local oMenuA, pAction
   LOCAL oPS, oPPrv, oMB, oWZ, oCD, oWP, oSBar, oStyle
   ****  Add code
   PUBLIC oDlg1:=oDlg2:=oDlg3:=oDlg4:=oDlg5:=oDlg6:=Nil
   *********
....


STATIC FUNCTION Dialogs( cType, w, l )

local oUrl

   DO CASE
   CASE cType == "PageSetup"
      if oDlg1 ==Nil
         oDlg1 := QPageSetupDialog():new()
         oDlg1:setWindowTitle( "Harbour-QT ???PageSetup Dialog" )
      endif
      oDlg1:show()
   CASE cType == "Preview"
      if oDlg2 ==Nil
         oDlg2 := QPrintPreviewDialog():new()
         oDlg2:setWindowTitle( "Harbour-QT Preview Dialog" )
      endif
      oDlg2:show()
   CASE cType == "Wizard"
      if oDlg3 ==Nil
         oDlg3 := QWizard():new()
         oDlg3:setWindowTitle( "Harbour-QT Wizard to Show Slides etc." )
      endif
      oDlg3:show()
   CASE cType == "Colors"
      if oDlg4 ==Nil
         oDlg4 := QColorDialog():new()
         oDlg4:setWindowTitle( "Harbour-QT Color Selection Dialog" )
      endif
      oDlg4:show()
      
   CASE cType == "WebPage"
      if oDlg5 ==Nil
         oDlg5 := QWebView():new()
         oUrl := QUrl():new()
         oUrl:setUrl( "http://www.harbour.vouch.info" )
         QT_QWebView_SetUrl( QT_PTROF( oDlg5 ), QT_PTROF( oUrl ) )
         oDlg5:setWindowTitle( "Harbour-QT Web Page Navigator" )
      endif
      oDlg5:show()
   CASE cType == "Fonts"
      if oDlg6 ==Nil
         oDlg6 := QFontDialog():new()
         oDlg6:setWindowTitle( "Harbour-QT Font Selector" )
      endif
      oDlg6:show()
   ENDCASE

   RETURN nil


Qbjects are automaticaly destroyed only if they have parent   (
QSomeWidget:New(parent) )
When parent is destroyed, he destroys it's children to.

BRGS
Fran?ek


Pritpal Bedi wrote:
> 
> Hi Istv?n
> 
> 
> Bisz Istv?n wrote:
>> 
>> The ?demoqt? tests with ?debug_new? shows a lot of ?leaked objects? , see
>> attached ?debug_new.txt?. As I see now, the objects allocated by the new
>> operator are not released by a corresponding delete operator.
>> 
> 
> I am struggling with this aspect since 20 days and 
> could not reached to any consclusion why Qt is not releasing the 
> objects. To illustrate, just navigate in <Brw> tab in demoxbp and 
> also keep an eye over task manager. You will be surprized to 
> observe that memory keeps on growing all the time.
> Not only here, just move the mouse in/out of the 
> demoxbp window, the same behavior will follow.
> And the worse is, if you play like this for a 
> couple of hours, netxt time, demoxbp.exe will fail to 
> load. You will need to reboot your computer.
> 
> I was wondering why this happens. I rewrote and 
> subclassed QMainWindow() and implemented it for 
> XbpDialog() class to have finer control over events 
> and their execution. However I could not avoid this behavior.
> 
> And today you have confirmed that Qt itself is buggy on this front.
> 
> Even I downloaded Qt 2009.03 and checked all above against it
> but the result is the same.
> 
> Along with above issue, I have one more issue with Qt in 
> respect to its paint engine which fails on MT scenario.
> I will post the modified code and will show what is needed to 
> control it and what heavy penalty we have to pay.
> 
> And thanks for stopping my frustration over the subject.
> 
> Regards
> Pritpal Bedi
> 
> 

-- 
View this message in context: http://www.nabble.com/demoqt-tests-with-debug_new---Leaked-objects-tp25434990p25467896.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mhsabado at gmail.com  Wed Sep 16 04:17:14 2009
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Wed Sep 16 04:17:28 2009
Subject: [Harbour] HBNETIO Unable To Connect After 2009-09-16 02:44
In-Reply-To: <4ab093b7.2708c00a.6f64.21a2SMTPIN_ADDED@mx.google.com>
References: <4ab093b7.2708c00a.6f64.21a2SMTPIN_ADDED@mx.google.com>
Message-ID: <4AB09F0A.2060606@gmail.com>

Hi Przemek,
> Message: 3
> Date: Wed, 16 Sep 2009 09:04:50 +0200
> From: Przemyslaw Czerpak <druzus@acn.waw.pl>
> Subject: Re: [Harbour] HBNETIO Unable To Connect After 2009-09-16
> 	02:44	UTC+0200
> To: "Harbour Project Main Developer List."
> 	<harbour@harbour-project.org>
> Message-ID: <20090916070449.GA6286@uran.home.aster.pl>
> Content-Type: text/plain; charset=utf-8
>
> On Wed, 16 Sep 2009, Mario H. Sabado wrote:
>
> Hi,
>
>   
>> I can no longer connect to my server application after above SVN.  I didn't 
>> change anything from code since last time that it's working.  I'm using BCC 
>> compiler.  Any advise?
>>     
>
> Recompile your client and server application.
> I extended protocol so I have to change login signature.
>
> best regards,
> Przemek
>
>   
I already did the full rebuild and still unable to connect.  But using 
my server compiled with the latest SVN and my application compiled with 
ChangeLog 12496 2009-09-15 13:48:33Z, it works.  Anything I need to adjust?

Best regards,
Mario
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090916/dc10133a/attachment.html
From e.m.giordano at emagsoftware.it  Wed Sep 16 04:18:44 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Sep 16 04:18:50 2009
Subject: [Harbour] Another OLE problem
References: <20090915195550.GA5462@uran.home.aster.pl><E5D44D224E5A48AF8139EADC5DEFF9EE@emag><20090916072504.GA6057@uran.home.aster.pl><71A536439E5F4199B2CC33D0BE0FD69B@emag><6FD70A40-DD31-431A-BB2F-D3835433664F@syenar.hu>
	<2E5AE3CEF9AE4E518DAA255B3FB24758@emag>
Message-ID: <EBE379D6B6D547A498CB4F8C28310BBD@emag>


-----Messaggio Originale----- 
Da: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoled? 16 settembre 2009 10.12
Oggetto: Re: [Harbour] Another OLE problem


> Ok, but are you saying that I have to take the libs from lib and win 
> folders and not only from lib folder? If yes, this is a change that I 
> missed.

Ok, I took the libs from lib\win\bcc and then CREATEOBJECT() is working 
fine. Great! But the following sample

FUNCTION MAIN()

    LOCAL oWord

    oWord = CREATEOBJECT( "Word.Application" )

    oWord:Documents:Add()

    ? oWord:ActiveDocument:StoryRanges:Item( 5 )

    oWord:Visible = .T.

    RETURN NIL

still stops with

Error BASE/3012  Argument error: ITEM
Called from WIN_OLEAUTO:ITEM(0)
Called from MAIN(9)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Wed Sep 16 04:19:12 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 04:19:21 2009
Subject: [Harbour] Another OLE problem
In-Reply-To: <2E5AE3CEF9AE4E518DAA255B3FB24758@emag>
References: <20090915195550.GA5462@uran.home.aster.pl><E5D44D224E5A48AF8139EADC5DEFF9EE@emag><20090916072504.GA6057@uran.home.aster.pl><71A536439E5F4199B2CC33D0BE0FD69B@emag>
	<6FD70A40-DD31-431A-BB2F-D3835433664F@syenar.hu>
	<2E5AE3CEF9AE4E518DAA255B3FB24758@emag>
Message-ID: <274E3423-0EC5-4D65-8221-E117D8134F68@syenar.hu>

>> > I just found one interesting thing: there are two hbwin.lib in  
>> my  SVN > repository, one (23 Jun 2009) in lib and one (16 Sep  
>> 2009) in lib > \win\bcc. Do I have to take the latter? If yes, why  
>> it is not copied  to > lib directory as the other libs?
>>
>> There is nothing wrong with the build files, it's
>> probably the result of some local experimenting or
>> maybe of some temporary state of the SVN since Jun 23.
>>
>> Anyhow this is probably the answer to all previous
>> problems. In case of doubt it's better to start over
>> with a clean env; fresh repo.
>
> Ok, but are you saying that I have to take the libs from lib and win  
> folders and not only from lib folder? If yes, this is a change that  
> I missed.

Sorry I don't exactly see where are your two hbwin.lib files.

For sure normally you don't have to take any libs manually
to anywhere since everything is handled by the build process
automatically. By default all libs will be generated in lib/win/bcc,
same happens when you use 'install'. hbmk2 will find them in that
location automatically, so there is no need to copy.

Brgds,
Viktor

From bedipritpal at hotmail.com  Wed Sep 16 04:19:38 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Sep 16 04:19:43 2009
Subject: [Harbour] HBNETIO - How I tested ...
In-Reply-To: <4AB07B78.4070204@mail.udg.mx>
References: <4AAF7E9D.2070406@mail.udg.mx> <4AB07B78.4070204@mail.udg.mx>
Message-ID: <25467938.post@talk.nabble.com>


Hello 


David Arturo Macias Corona wrote:
> 
> Now is working again with new IP. Use:
>    netapplctn 189.162.166.143 2941
> It will be working some hours
> 
> Notes:
> - As said before, in LAN response is fast and do not show delay of 18
> seconds in opening table as you reported with Win2003, so seem a matter
> of OS response
> - In Internet response is slow. Perhaps it explain your note
> "Application just hanged for indefinitely and did not showup next
> screen" in your recent "Real Web IP" tests
> 
> Make tests excluding browse(), as we know is very intensive and unuseful
> in low band networks
> 
> As you can handle client side, modify netapplctn.prg to apply other kind
> of tests, creating, indexing, opening, filling, querys and so on
> A simple
>    ? recno()
> in filling table loop can help to measure time adding/storing records
> 
> Try with more than one session too
> 
> This will be a "real Web" tests.
> If you are in India, the minimum distance in tests will be Earth diameter
> 

I run my application "Vouch" and it did show up the first screen.
A step forward. Then it showed me some errors and that I know why so.
Can you look into "data" folder where server is running and tell me if 
you see some .dbf's and .z01's. If yes, then can you craete a folder 
c:\creative.ram and run server there on 63000 port ? 
My application expect this path and some subfolders therein.

c:\creative.ram
                    \cac00001
                    \caccomon
                    \sema
                    \inet

Thanks for the server for testing.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Re%3A-HBNETIO---How-I-tested-...-tp25452521p25467938.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Wed Sep 16 04:23:28 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 16 04:23:33 2009
Subject: [Harbour] Another OLE problem
In-Reply-To: <2E5AE3CEF9AE4E518DAA255B3FB24758@emag>
References: <6FD70A40-DD31-431A-BB2F-D3835433664F@syenar.hu>
	<2E5AE3CEF9AE4E518DAA255B3FB24758@emag>
Message-ID: <20090916082328.GA27352@uran.home.aster.pl>

On Wed, 16 Sep 2009, Enrico Maria Giordano wrote:

Hi,

> Ok, but are you saying that I have to take the libs from lib and win 
> folders and not only from lib folder? If yes, this is a change that I 
> missed.

You should have only one folder with final binaries.
Just execute:

   SET HB_INSTALL_PREFIX=e:\hb-bcc
   SET PATH=%HB_INSTALL_PREFIX%\bin;e:\bcc55\bin;%PATH%
   win-make install > make_gnu.log 2>&1

and you will have all what you need and ready to use in e:\hb-bcc.
Then try:
   hbmk2 bug -lhbwin

all non core (contrib) libraries should be passed to hbmk2 explicitly
with -l<name> switch

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Sep 16 04:24:14 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 04:24:23 2009
Subject: [Harbour] demoqt tests with debug_new - Leaked objects
In-Reply-To: <25467896.post@talk.nabble.com>
References: <004601ca3537$74bda720$5e38f560$@Bisz@t-online.hu>
	<25440044.post@talk.nabble.com> <25467896.post@talk.nabble.com>
Message-ID: <62C9ACA2-56FE-479A-BDC7-252845F2A4D4@syenar.hu>


On 2009.09.16., at 10:16, Fran?ek Prijatelj wrote:

>
> Hi Pritpal
>
> In STATIC FUNCTION Dialogs You are using local oDlg which
> is overwriten many times (you should delete QWidgets pointed to by it,
> before allocating new ones)
>
> One solution (not going in other leaks) is this:
>
>
> PROCEDURE Main()
>   Local oLabel, oBtn, oDA, oTabBar
>   Local oWnd, oSize
>   Local oMenuBar, pIcon
>   Local oMenuA, pAction
>   LOCAL oPS, oPPrv, oMB, oWZ, oCD, oWP, oSBar, oStyle
>   ****  Add code
>   PUBLIC oDlg1:=oDlg2:=oDlg3:=oDlg4:=oDlg5:=oDlg6:=Nil
>   *********

Sorry to jump in, but if there is anything else we
can use instead of PUBLICs we should rather try to
do so. For me it looks bad example to use PUBLIC vars
in example code, as I'd surely wouldn't like to copy
that in any sort of production code. Perhaps a local
array could replace it.

The other thing I don't understand is how is it
possible to create leaks merely by using valid
.prg code? Is it possible to solve this problem
so that such thing cannot happen? Is there a manual
way to free these objects?

Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Wed Sep 16 04:25:37 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Sep 16 04:25:44 2009
Subject: [Harbour] Another OLE problem
References: <20090915195550.GA5462@uran.home.aster.pl><E5D44D224E5A48AF8139EADC5DEFF9EE@emag><20090916072504.GA6057@uran.home.aster.pl><71A536439E5F4199B2CC33D0BE0FD69B@emag><6FD70A40-DD31-431A-BB2F-D3835433664F@syenar.hu><2E5AE3CEF9AE4E518DAA255B3FB24758@emag>
	<274E3423-0EC5-4D65-8221-E117D8134F68@syenar.hu>
Message-ID: <6F93029169A24804B6EE221BE029DB31@emag>


-----Messaggio Originale----- 
Da: "Viktor Szak?ts" <harbour.01@syenar.hu>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoled? 16 settembre 2009 10.19
Oggetto: Re: [Harbour] Another OLE problem


> Sorry I don't exactly see where are your two hbwin.lib files.

One in lib and one in lib\win\bcc. Now I'm using the one in lib\win\bcc and 
the problem is solved.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From bedipritpal at hotmail.com  Wed Sep 16 04:29:00 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Sep 16 04:29:05 2009
Subject: [Harbour] demoqt tests with debug_new - Leaked objects
In-Reply-To: <25467896.post@talk.nabble.com>
References: <004601ca3537$74bda720$5e38f560$@Bisz@t-online.hu>
	<25440044.post@talk.nabble.com> <25467896.post@talk.nabble.com>
Message-ID: <25468076.post@talk.nabble.com>


Hi


Fran?ek Prijatelj wrote:
> 
> In STATIC FUNCTION Dialogs You are using local oDlg which
> is overwriten many times (you should delete QWidgets pointed to by it,
> before allocating new ones)
> 
> One solution (not going in other leaks) is this:
> 

I never make tests on demoqt, all is based on demoxbp.

Please find some time to do exactly what I pointed out.
In that scenario, I am not creating/deleting any new objects.
I just want to formulate any strategy which may lead to 
avoid this. Otherwise I am afraid Harbour may not be 
utilizing this fantastic library for industrial strength 
applications.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/demoqt-tests-with-debug_new---Leaked-objects-tp25434990p25468076.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Wed Sep 16 04:30:43 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 16 04:30:49 2009
Subject: [Harbour] HBNETIO Unable To Connect After 2009-09-16 02:44
In-Reply-To: <4AB09F0A.2060606@gmail.com>
References: <4ab093b7.2708c00a.6f64.21a2SMTPIN_ADDED@mx.google.com>
	<4AB09F0A.2060606@gmail.com>
Message-ID: <20090916083043.GA1387@uran.home.aster.pl>

On Wed, 16 Sep 2009, Mario H. Sabado wrote:

Hi,

>> Recompile your client and server application.
>> I extended protocol so I have to change login signature.
> I already did the full rebuild and still unable to connect.  But using my 
> server compiled with the latest SVN and my application compiled with 
> ChangeLog 12496 2009-09-15 13:48:33Z, it works.  Anything I need to adjust?

In this commit:
   2009-09-15 16:52 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
I changed login signature adding dbRename() support.
It means client and server can connect only if they are both compiled
from source code before or after this modification.
Any other combinations cannot work.

best regards,
Przemek
From francek.prijatelj at siol.net  Wed Sep 16 04:33:09 2009
From: francek.prijatelj at siol.net (=?UTF-8?Q?Fran=C4=8Dek_Prijatelj?=)
Date: Wed Sep 16 04:33:15 2009
Subject: [Harbour] demoqt tests with debug_new - Leaked objects
In-Reply-To: <62C9ACA2-56FE-479A-BDC7-252845F2A4D4@syenar.hu>
References: <004601ca3537$74bda720$5e38f560$@Bisz@t-online.hu>
	<25440044.post@talk.nabble.com> <25467896.post@talk.nabble.com>
	<62C9ACA2-56FE-479A-BDC7-252845F2A4D4@syenar.hu>
Message-ID: <25468128.post@talk.nabble.com>


Hi Victor

I wanted to say (one dirty solution ...)
Here is another using static instead of PUBLIC ...


STATIC FUNCTION Dialogs( cType, w, l )
static oDlg,oDlg2,oDlg3,oDlg4,oDlg5,oDlg6
local oUrl

   DO CASE
   CASE cType == "PageSetup"
      if oDlg1 ==Nil
         oDlg1 := QPageSetupDialog():new()
         oDlg1:setWindowTitle( "Harbour-QT ???PageSetup Dialog" )
      endif
      oDlg1:show()
   CASE cType == "Preview"
      if oDlg2 ==Nil
         oDlg2 := QPrintPreviewDialog():new()
         oDlg2:setWindowTitle( "Harbour-QT Preview Dialog" )
      endif
      oDlg2:show()
   CASE cType == "Wizard"
      if oDlg3 ==Nil
         oDlg3 := QWizard():new()
         oDlg3:setWindowTitle( "Harbour-QT Wizard to Show Slides etc." )
      endif
      oDlg3:show()
   CASE cType == "Colors"
      if oDlg4 ==Nil
         oDlg4 := QColorDialog():new()
         oDlg4:setWindowTitle( "Harbour-QT Color Selection Dialog" )
      endif
      oDlg4:show()
      
   CASE cType == "WebPage"
      if oDlg5 ==Nil
         oDlg5 := QWebView():new()
         oUrl := QUrl():new()
         oUrl:setUrl( "http://www.harbour.vouch.info" )
         QT_QWebView_SetUrl( QT_PTROF( oDlg5 ), QT_PTROF( oUrl ) )
         oDlg5:setWindowTitle( "Harbour-QT Web Page Navigator" )
      endif
      oDlg5:show()
   CASE cType == "Fonts"
      if oDlg6 ==Nil
         oDlg6 := QFontDialog():new()
         oDlg6:setWindowTitle( "Harbour-QT Font Selector" )
      endif
      oDlg6:show()
   ENDCASE

   RETURN nil

My intention was to show why webpage when visited increases size
of used memory.
With this solution memory is increased only first time.
Of course, there are better solutions.

BRGS
Fran?ek


Viktor Szak?ts wrote:
> 
> 
> On 2009.09.16., at 10:16, Fran?ek Prijatelj wrote:
> 
>>
>> Hi Pritpal
>>
>> In STATIC FUNCTION Dialogs You are using local oDlg which
>> is overwriten many times (you should delete QWidgets pointed to by it,
>> before allocating new ones)
>>
>> One solution (not going in other leaks) is this:
>>
>>
>> PROCEDURE Main()
>>   Local oLabel, oBtn, oDA, oTabBar
>>   Local oWnd, oSize
>>   Local oMenuBar, pIcon
>>   Local oMenuA, pAction
>>   LOCAL oPS, oPPrv, oMB, oWZ, oCD, oWP, oSBar, oStyle
>>   ****  Add code
>>   PUBLIC oDlg1:=oDlg2:=oDlg3:=oDlg4:=oDlg5:=oDlg6:=Nil
>>   *********
> 
> Sorry to jump in, but if there is anything else we
> can use instead of PUBLICs we should rather try to
> do so. For me it looks bad example to use PUBLIC vars
> in example code, as I'd surely wouldn't like to copy
> that in any sort of production code. Perhaps a local
> array could replace it.
> 
> The other thing I don't understand is how is it
> possible to create leaks merely by using valid
> .prg code? Is it possible to solve this problem
> so that such thing cannot happen? Is there a manual
> way to free these objects?
> 
> Brgds,
> Viktor
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/demoqt-tests-with-debug_new---Leaked-objects-tp25434990p25468128.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From e.m.giordano at emagsoftware.it  Wed Sep 16 04:34:38 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Sep 16 04:34:44 2009
Subject: [Harbour] Another OLE problem
References: <62AFFC4D3E134DE9A8C3A076639B89B2@emag><20090915182901.GA12552@uran.home.aster.pl><2854AC66E09547F3A631AF553DF1448C@emag>
	<20090915195550.GA5462@uran.home.aster.pl>
Message-ID: <8111F7A6209D4BF0A94D55E9F8EA6405@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: marted? 15 settembre 2009 21.55
Oggetto: Re: [Harbour] Another OLE problem


> If you can link your application with working CreateObject() function
> then as next step you can try to add support for overloading [] operators.
> You can make it like in xHarbour using OnError interface. Just try to
> copy from xHarbour source/rtl/win32ole.prg OleCollection() method to
> Harbour TOLEAUTO class in contrib/hbwin/legacy.prg.

Done. I'm still getting

Error BASE/1132  Bound error: array access
Called from MAIN(9)

from

FUNCTION MAIN()

    LOCAL oWord

    oWord = CREATEOBJECT( "Word.Application" )

    oWord:Documents:Add()

    ? oWord:ActiveDocument:StoryRanges[ 5 ]

    oWord:Visible = .T.

    RETURN NIL

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From harbour.01 at syenar.hu  Wed Sep 16 04:39:51 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 04:40:00 2009
Subject: [Harbour] Another OLE problem
In-Reply-To: <6F93029169A24804B6EE221BE029DB31@emag>
References: <20090915195550.GA5462@uran.home.aster.pl><E5D44D224E5A48AF8139EADC5DEFF9EE@emag><20090916072504.GA6057@uran.home.aster.pl><71A536439E5F4199B2CC33D0BE0FD69B@emag><6FD70A40-DD31-431A-BB2F-D3835433664F@syenar.hu><2E5AE3CEF9AE4E518DAA255B3FB24758@emag>
	<274E3423-0EC5-4D65-8221-E117D8134F68@syenar.hu>
	<6F93029169A24804B6EE221BE029DB31@emag>
Message-ID: <FE4FFCF7-97E9-423A-BD6B-953F0CBDF4F2@syenar.hu>

>> Sorry I don't exactly see where are your two hbwin.lib files.
>
> One in lib and one in lib\win\bcc. Now I'm using the one in lib\win 
> \bcc and the problem is solved.

Okay, delete everything from lib to be on the safe side.

[ BTW, hbmk2 won't pick it from lib if lib/win/bcc dir is present. ]

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep 16 04:41:31 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 04:41:42 2009
Subject: [Harbour] demoqt tests with debug_new - Leaked objects
In-Reply-To: <25468128.post@talk.nabble.com>
References: <004601ca3537$74bda720$5e38f560$@Bisz@t-online.hu>
	<25440044.post@talk.nabble.com> <25467896.post@talk.nabble.com>
	<62C9ACA2-56FE-479A-BDC7-252845F2A4D4@syenar.hu>
	<25468128.post@talk.nabble.com>
Message-ID: <C614EED8-77D7-4C8C-90F7-A925D75DC08F@syenar.hu>

Hi Francek,

Okay, I see, although I'm still concerned that these
objects are never freed, and if I'd like to free them,
what is the right way to do it?

Brgds,
Viktor

On 2009.09.16., at 10:33, Fran?ek Prijatelj wrote:

>
> Hi Victor
>
> I wanted to say (one dirty solution ...)
> Here is another using static instead of PUBLIC ...
>
>
> STATIC FUNCTION Dialogs( cType, w, l )
> static oDlg,oDlg2,oDlg3,oDlg4,oDlg5,oDlg6
> local oUrl
>
>   DO CASE
>   CASE cType == "PageSetup"
>      if oDlg1 ==Nil
>         oDlg1 := QPageSetupDialog():new()
>         oDlg1:setWindowTitle( "Harbour-QT ???PageSetup Dialog" )
>      endif
>      oDlg1:show()
>   CASE cType == "Preview"
>      if oDlg2 ==Nil
>         oDlg2 := QPrintPreviewDialog():new()
>         oDlg2:setWindowTitle( "Harbour-QT Preview Dialog" )
>      endif
>      oDlg2:show()
>   CASE cType == "Wizard"
>      if oDlg3 ==Nil
>         oDlg3 := QWizard():new()
>         oDlg3:setWindowTitle( "Harbour-QT Wizard to Show Slides  
> etc." )
>      endif
>      oDlg3:show()
>   CASE cType == "Colors"
>      if oDlg4 ==Nil
>         oDlg4 := QColorDialog():new()
>         oDlg4:setWindowTitle( "Harbour-QT Color Selection Dialog" )
>      endif
>      oDlg4:show()
>
>   CASE cType == "WebPage"
>      if oDlg5 ==Nil
>         oDlg5 := QWebView():new()
>         oUrl := QUrl():new()
>         oUrl:setUrl( "http://www.harbour.vouch.info" )
>         QT_QWebView_SetUrl( QT_PTROF( oDlg5 ), QT_PTROF( oUrl ) )
>         oDlg5:setWindowTitle( "Harbour-QT Web Page Navigator" )
>      endif
>      oDlg5:show()
>   CASE cType == "Fonts"
>      if oDlg6 ==Nil
>         oDlg6 := QFontDialog():new()
>         oDlg6:setWindowTitle( "Harbour-QT Font Selector" )
>      endif
>      oDlg6:show()
>   ENDCASE
>
>   RETURN nil
>
> My intention was to show why webpage when visited increases size
> of used memory.
> With this solution memory is increased only first time.
> Of course, there are better solutions.
>
> BRGS
> Fran?ek
>
>
> Viktor Szak?ts wrote:
>>
>>
>> On 2009.09.16., at 10:16, Fran?ek Prijatelj wrote:
>>
>>>
>>> Hi Pritpal
>>>
>>> In STATIC FUNCTION Dialogs You are using local oDlg which
>>> is overwriten many times (you should delete QWidgets pointed to by  
>>> it,
>>> before allocating new ones)
>>>
>>> One solution (not going in other leaks) is this:
>>>
>>>
>>> PROCEDURE Main()
>>>  Local oLabel, oBtn, oDA, oTabBar
>>>  Local oWnd, oSize
>>>  Local oMenuBar, pIcon
>>>  Local oMenuA, pAction
>>>  LOCAL oPS, oPPrv, oMB, oWZ, oCD, oWP, oSBar, oStyle
>>>  ****  Add code
>>>  PUBLIC oDlg1:=oDlg2:=oDlg3:=oDlg4:=oDlg5:=oDlg6:=Nil
>>>  *********
>>
>> Sorry to jump in, but if there is anything else we
>> can use instead of PUBLICs we should rather try to
>> do so. For me it looks bad example to use PUBLIC vars
>> in example code, as I'd surely wouldn't like to copy
>> that in any sort of production code. Perhaps a local
>> array could replace it.
>>
>> The other thing I don't understand is how is it
>> possible to create leaks merely by using valid
>> .prg code? Is it possible to solve this problem
>> so that such thing cannot happen? Is there a manual
>> way to free these objects?
>>
>> Brgds,
>> Viktor
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/demoqt-tests-with-debug_new---Leaked-objects-tp25434990p25468128.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From francek.prijatelj at siol.net  Wed Sep 16 04:44:54 2009
From: francek.prijatelj at siol.net (=?UTF-8?Q?Fran=C4=8Dek_Prijatelj?=)
Date: Wed Sep 16 04:45:00 2009
Subject: [Harbour] demoqt tests with debug_new - Leaked objects
In-Reply-To: <25468076.post@talk.nabble.com>
References: <004601ca3537$74bda720$5e38f560$@Bisz@t-online.hu>
	<25440044.post@talk.nabble.com> <25467896.post@talk.nabble.com>
	<25468076.post@talk.nabble.com>
Message-ID: <25468314.post@talk.nabble.com>


Hi Pritpal

You are right.
My comment was regarding Istv?n's writing.
He began thread writing about demoqt.
Otherwise my compliments about Your great work.

Regards
Fran?ek


Pritpal Bedi wrote:
> 
> Hi
> 
> 
> Fran?ek Prijatelj wrote:
>> 
>> In STATIC FUNCTION Dialogs You are using local oDlg which
>> is overwriten many times (you should delete QWidgets pointed to by it,
>> before allocating new ones)
>> 
>> One solution (not going in other leaks) is this:
>> 
> 
> I never make tests on demoqt, all is based on demoxbp.
> 
> Please find some time to do exactly what I pointed out.
> In that scenario, I am not creating/deleting any new objects.
> I just want to formulate any strategy which may lead to 
> avoid this. Otherwise I am afraid Harbour may not be 
> utilizing this fantastic library for industrial strength 
> applications.
> 
> Regards
> Pritpal Bedi
> 
> 

-- 
View this message in context: http://www.nabble.com/demoqt-tests-with-debug_new---Leaked-objects-tp25434990p25468314.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dmacias at mail.udg.mx  Wed Sep 16 05:01:53 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Sep 16 05:02:12 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
Message-ID: <4AB0A981.4090002@mail.udg.mx>

Pritpal:

>I run my application "Vouch" and it did show up the first screen.
>A step forward. Then it showed me some errors and that I know why so.
>Can you look into "data" folder where server is running and tell me if
>you see some .dbf's and .z01's.

netserver_os2.exe is running in d:\mydata

Nothing in "d:\mydata\data"
No .dbf in d:\mydata
many z01 in d:\mydata

Directory of D:\mydata

15/09/09  5:26a       815,616      0 a---  netserver.exe
15/09/09  5:27a         <DIR>      0 ----  .
15/09/09  5:27a         <DIR>      0 ----  ..
15/09/09  5:27a         <DIR>      0 ----  data
15/09/09  6:09a       904,221      0 a---  netserver_os2.exe
16/09/09  3:03a         3,072      0 a---  V661TDC2.Z01
16/09/09  3:03a         3,072      0 a---  OG_87YTT.Z01
16/09/09  3:03a         4,608      0 a---  CHECKS.Z01
16/09/09  3:04a         3,072      0 a---  UHJICONA.Z01
16/09/09  3:04a         3,072      0 a---  CNF0H00A.Z01
16/09/09  3:04a         3,072      0 a---  ZXKJD444.Z01
16/09/09  3:04a         3,072      0 a---  OBKJN7Y7.Z01
16/09/09  3:05a         6,144      0 a---  VNB39PXG.Z01
16/09/09  3:05a         3,072      0 a---  PRHGT555.Z01
16/09/09  3:05a         4,608      0 a---  OXUJHGGF.Z01
16/09/09  3:06a         3,072      0 a---  CAL01046.Z01
16/09/09  3:06a         3,072      0 a---  CAL11046.Z01
16/09/09  3:06a         3,072      0 a---  OBNVCX32.Z01
16/09/09  3:07a         4,608      0 a---  BRWCON01.Z01
16/09/09  3:07a         3,072      0 a---  XSDE4231.Z01
16/09/09  3:49a             0      0 a---  sale.txt
        21 file(s)   1,773,597 bytes used

Directory of D:\mydata\data

15/09/09  5:27a         <DIR>      0 ----  .
15/09/09  5:27a         <DIR>      0 ----  ..
         2 file(s)           0 bytes used
Total files listed:
        23 file(s)     1,773,597 bytes used


>If yes, then can you craete a folder
>c:\creative.ram and run server there on 63000 port ?
>My application expect this path and some subfolders therein.

>c:\creative.ram
>                    \cac00001
>                    \caccomon
>                    \sema
>                    \inet

>Thanks for the server for testing.

I can not use c:, it is HPFS and can not be accesed by OS/2

I created d:\creative.ram and subfolders and netserver_os2.exe is
running there with port 63000

This machine are running Clipxnet too so you can review your files using:
   http://189.162.166.143/conddb.fml

and using for example:
  DBF: Base de datos: d:\creative.ram\myfile.dbf

Index file, order, RDD, ... are optional
(  Archivo indice:, DBF: Orden controlador:,  DBF: Controlador RDD: )

You can use in Filtro/WHERE: an expression for filter, enclosed in
parenthesis ( "myfilter" )

David Macias


From francek.prijatelj at siol.net  Wed Sep 16 05:03:59 2009
From: francek.prijatelj at siol.net (=?UTF-8?Q?Fran=C4=8Dek_Prijatelj?=)
Date: Wed Sep 16 05:04:04 2009
Subject: [Harbour] demoqt tests with debug_new - Leaked objects
In-Reply-To: <C614EED8-77D7-4C8C-90F7-A925D75DC08F@syenar.hu>
References: <004601ca3537$74bda720$5e38f560$@Bisz@t-online.hu>
	<25440044.post@talk.nabble.com> <25467896.post@talk.nabble.com>
	<62C9ACA2-56FE-479A-BDC7-252845F2A4D4@syenar.hu>
	<25468128.post@talk.nabble.com>
	<C614EED8-77D7-4C8C-90F7-A925D75DC08F@syenar.hu>
Message-ID: <25468576.post@talk.nabble.com>


Hi Victor

In this particular case I see no problem.
Maybe we want to keep a state in every tab.
If not (maybe we are short on memory ..), 
we can delete objects when we loose focus on particular tab.
Anyhow memory is reclaimed at the end of app.

Regards 
Fran?ek


Viktor Szak?ts wrote:
> 
> Hi Francek,
> 
> Okay, I see, although I'm still concerned that these
> objects are never freed, and if I'd like to free them,
> what is the right way to do it?
> 
> Brgds,
> Viktor
> 
> On 2009.09.16., at 10:33, Fran?ek Prijatelj wrote:
> 
>>
>> Hi Victor
>>
>> I wanted to say (one dirty solution ...)
>> Here is another using static instead of PUBLIC ...
>>
>>
>> STATIC FUNCTION Dialogs( cType, w, l )
>> static oDlg,oDlg2,oDlg3,oDlg4,oDlg5,oDlg6
>> local oUrl
>>
>>   DO CASE
>>   CASE cType == "PageSetup"
>>      if oDlg1 ==Nil
>>         oDlg1 := QPageSetupDialog():new()
>>         oDlg1:setWindowTitle( "Harbour-QT ???PageSetup Dialog" )
>>      endif
>>      oDlg1:show()
>>   CASE cType == "Preview"
>>      if oDlg2 ==Nil
>>         oDlg2 := QPrintPreviewDialog():new()
>>         oDlg2:setWindowTitle( "Harbour-QT Preview Dialog" )
>>      endif
>>      oDlg2:show()
>>   CASE cType == "Wizard"
>>      if oDlg3 ==Nil
>>         oDlg3 := QWizard():new()
>>         oDlg3:setWindowTitle( "Harbour-QT Wizard to Show Slides  
>> etc." )
>>      endif
>>      oDlg3:show()
>>   CASE cType == "Colors"
>>      if oDlg4 ==Nil
>>         oDlg4 := QColorDialog():new()
>>         oDlg4:setWindowTitle( "Harbour-QT Color Selection Dialog" )
>>      endif
>>      oDlg4:show()
>>
>>   CASE cType == "WebPage"
>>      if oDlg5 ==Nil
>>         oDlg5 := QWebView():new()
>>         oUrl := QUrl():new()
>>         oUrl:setUrl( "http://www.harbour.vouch.info" )
>>         QT_QWebView_SetUrl( QT_PTROF( oDlg5 ), QT_PTROF( oUrl ) )
>>         oDlg5:setWindowTitle( "Harbour-QT Web Page Navigator" )
>>      endif
>>      oDlg5:show()
>>   CASE cType == "Fonts"
>>      if oDlg6 ==Nil
>>         oDlg6 := QFontDialog():new()
>>         oDlg6:setWindowTitle( "Harbour-QT Font Selector" )
>>      endif
>>      oDlg6:show()
>>   ENDCASE
>>
>>   RETURN nil
>>
>> My intention was to show why webpage when visited increases size
>> of used memory.
>> With this solution memory is increased only first time.
>> Of course, there are better solutions.
>>
>> BRGS
>> Fran?ek
>>
>>
>> Viktor Szak?ts wrote:
>>>
>>>
>>> On 2009.09.16., at 10:16, Fran?ek Prijatelj wrote:
>>>
>>>>
>>>> Hi Pritpal
>>>>
>>>> In STATIC FUNCTION Dialogs You are using local oDlg which
>>>> is overwriten many times (you should delete QWidgets pointed to by  
>>>> it,
>>>> before allocating new ones)
>>>>
>>>> One solution (not going in other leaks) is this:
>>>>
>>>>
>>>> PROCEDURE Main()
>>>>  Local oLabel, oBtn, oDA, oTabBar
>>>>  Local oWnd, oSize
>>>>  Local oMenuBar, pIcon
>>>>  Local oMenuA, pAction
>>>>  LOCAL oPS, oPPrv, oMB, oWZ, oCD, oWP, oSBar, oStyle
>>>>  ****  Add code
>>>>  PUBLIC oDlg1:=oDlg2:=oDlg3:=oDlg4:=oDlg5:=oDlg6:=Nil
>>>>  *********
>>>
>>> Sorry to jump in, but if there is anything else we
>>> can use instead of PUBLICs we should rather try to
>>> do so. For me it looks bad example to use PUBLIC vars
>>> in example code, as I'd surely wouldn't like to copy
>>> that in any sort of production code. Perhaps a local
>>> array could replace it.
>>>
>>> The other thing I don't understand is how is it
>>> possible to create leaks merely by using valid
>>> .prg code? Is it possible to solve this problem
>>> so that such thing cannot happen? Is there a manual
>>> way to free these objects?
>>>
>>> Brgds,
>>> Viktor
>>>
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>>
>>>
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/demoqt-tests-with-debug_new---Leaked-objects-tp25434990p25468128.html
>> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/demoqt-tests-with-debug_new---Leaked-objects-tp25434990p25468576.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vszakats at users.sourceforge.net  Wed Sep 16 05:07:38 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep 16 05:07:44 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12507] trunk/harbour
Message-ID: <E1MnqUE-0008J8-O8@c3vjzd1.ch3.sourceforge.com>

Revision: 12507
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12507&view=rev
Author:   vszakats
Date:     2009-09-16 09:07:37 +0000 (Wed, 16 Sep 2009)

Log Message:
-----------
2009-09-16 11:07 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * INSTALL
    - Deleted experimental status from beos target.

  * config/global.mk
    * Applied patch by Tamas Tevesz:
      Tweak to default install dir for beos.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/config/global.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From jerryfinuliar at operamail.com  Wed Sep 16 05:16:31 2009
From: jerryfinuliar at operamail.com (Jerry Finuliar)
Date: Wed Sep 16 05:16:38 2009
Subject: [Harbour] Another OLE problem
Message-ID: <20090916091631.7BFC17BD6B@ws5-10.us4.outblaze.com>

Hi,

I've done this in VB6 but I'm getting this "the requested member of the collection does not exist" from Debug.Print oWord.ActiveDocument.StoryRanges.Item(5). Changing 5 to 1
and it will run fine without error but also without debug output. 

The only problem I see in Harbour is that you have to press enter before RTE display.


---- vb code ------
Dim oWord As Object

Set oWord = CreateObject("Word.Application")

oWord.Documents.Add

Debug.Print oWord.ActiveDocument.StoryRanges.Item(5)

---- vb code -------

Best Regards
Jerry


FUNCTION MAIN()

    LOCAL oWord

    oWord = WIN_OLECREATEOBJECT( "Word.Application" )

    oWord:Documents:Add()

    ? oWord:ActiveDocument:StoryRanges:Item( 5 )

    oWord:Visible = .T.

    RETURN NIL


-- 
_______________________________________________
Surf the Web in a faster, safer and easier way:
Download Opera 9 at http://www.opera.com

Powered by Outblaze
From harbour.01 at syenar.hu  Wed Sep 16 05:16:55 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 05:17:03 2009
Subject: [Harbour] demoqt tests with debug_new - Leaked objects
In-Reply-To: <25468576.post@talk.nabble.com>
References: <004601ca3537$74bda720$5e38f560$@Bisz@t-online.hu>
	<25440044.post@talk.nabble.com> <25467896.post@talk.nabble.com>
	<62C9ACA2-56FE-479A-BDC7-252845F2A4D4@syenar.hu>
	<25468128.post@talk.nabble.com>
	<C614EED8-77D7-4C8C-90F7-A925D75DC08F@syenar.hu>
	<25468576.post@talk.nabble.com>
Message-ID: <F0FFD855-B361-4C71-9B89-C48C48A44F35@syenar.hu>

Hi Francek, Pritpal,

> Hi Victor
>
> In this particular case I see no problem.
> Maybe we want to keep a state in every tab.
> If not (maybe we are short on memory ..),
> we can delete objects when we loose focus on particular tab.
> Anyhow memory is reclaimed at the end of app.

This means QT cannot be used in apps which is supposed
to run continuously. (?)

Continuously running GUI apps aren't that typical, but
to me it's still a serious concern that and app just
eats memory while running. This makes it f.e. unsuitable
for any sort of embedded GUI applications (like a kiosk).

Is this a property of QT itself, or the property of
Harbour wrappers?

Brgds,
Viktor

From mhsabado at gmail.com  Wed Sep 16 05:41:03 2009
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Wed Sep 16 05:41:15 2009
Subject: [Harbour] HBNETIO HB_ReadIni() Support
In-Reply-To: <4ab09f1b.8253f10a.6dd8.243eSMTPIN_ADDED@mx.google.com>
References: <4ab09f1b.8253f10a.6dd8.243eSMTPIN_ADDED@mx.google.com>
Message-ID: <4AB0B2AF.5010605@gmail.com>

Hi Przemek,

I have a program being shared by ~100 branches which were separated by 
folders respectively in the server.  Each branch/folder have 
peculiarities and initialized by the program thru .ini file found inside 
the folder.  I just want to ask if it is feasible to add HB_ReadIni() 
support to HBNETIO? 

With your creation of HBNETIO, I have overcome one major security issue 
in my environment by setting the shared folder to READONLY from the 
server.  Before this, I've been considering LetoDB but not quite sure of 
the changes I need to make on my code and the ability to switch back to 
standalone.  With HBNETIO, I was able to achieve it in very little time 
by simply passing the server path to DbUseArea() and DbSetIndex().   I 
can easily switch to standalone by passing "" to server path.  I can't 
get away with "shared" mode yet because I'm using 3rd party report 
writer which needs to access the file directly.  FRH maybe the way 
because of its "WorkArea" nature in reading data.

Thank you so much for your marvelous work and sharing it to the community.

Best regards,
Mario



From dmacias at mail.udg.mx  Wed Sep 16 05:50:03 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Sep 16 05:50:16 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
Message-ID: <4AB0B4CB.9070605@mail.udg.mx>

Pritpal:

It is creating files in root of d:\

15/09/09  5:27a         <DIR>      0 ----  mydata
16/09/09  3:42a         <DIR>      0 ----  creative.ram
16/09/09  3:44a            99      0 a---  V661TDC2.dbf
16/09/09  3:45a           682      0 a---  OG_87YTT.dbf
16/09/09  3:47a           195      0 a---  VNB39PXG.dbf
16/09/09  3:48a           131      0 a---  PRHGT555.dbf
16/09/09  3:48a           483      0 a---  OXUJHGGF.dbf
16/09/09  3:48a            99      0 a---  CAL01046.dbf
16/09/09  3:48a            99      0 a---  CAL11046.dbf
16/09/09  3:48a           291      0 a---  OBNVCX32.dbf
16/09/09  3:48a           355      0 a---  BRWCON01.dbf
16/09/09  3:48a            99      0 a---  XSDE4231.dbf
16/09/09  3:50a            99      0 a---  UHJICONA.dbf
16/09/09  3:50a           579      0 a---  CHECKS.dbf
16/09/09  3:50a            99      0 a---  CNF0H00A.dbf
16/09/09  3:50a            99      0 a---  ZXKJD444.dbf
16/09/09  3:50a           163      0 a---  OBKJN7Y7.dbf

David Macias


>I run my application "Vouch" and it did show up the first screen.
>A step forward. Then it showed me some errors and that I know why so.
>Can you look into "data" folder where server is running and tell me if
>you see some .dbf's and .z01's.

netserver_os2.exe is running in d:\mydata

Nothing in "d:\mydata\data"
No .dbf in d:\mydata
many z01 in d:\mydata

Directory of D:\mydata

15/09/09  5:26a       815,616      0 a---  netserver.exe
15/09/09  5:27a         <DIR>      0 ----  .
15/09/09  5:27a         <DIR>      0 ----  ..
15/09/09  5:27a         <DIR>      0 ----  data
15/09/09  6:09a       904,221      0 a---  netserver_os2.exe
16/09/09  3:03a         3,072      0 a---  V661TDC2.Z01
16/09/09  3:03a         3,072      0 a---  OG_87YTT.Z01
16/09/09  3:03a         4,608      0 a---  CHECKS.Z01
16/09/09  3:04a         3,072      0 a---  UHJICONA.Z01
16/09/09  3:04a         3,072      0 a---  CNF0H00A.Z01
16/09/09  3:04a         3,072      0 a---  ZXKJD444.Z01
16/09/09  3:04a         3,072      0 a---  OBKJN7Y7.Z01
16/09/09  3:05a         6,144      0 a---  VNB39PXG.Z01
16/09/09  3:05a         3,072      0 a---  PRHGT555.Z01
16/09/09  3:05a         4,608      0 a---  OXUJHGGF.Z01
16/09/09  3:06a         3,072      0 a---  CAL01046.Z01
16/09/09  3:06a         3,072      0 a---  CAL11046.Z01
16/09/09  3:06a         3,072      0 a---  OBNVCX32.Z01
16/09/09  3:07a         4,608      0 a---  BRWCON01.Z01
16/09/09  3:07a         3,072      0 a---  XSDE4231.Z01
16/09/09  3:49a             0      0 a---  sale.txt
        21 file(s)   1,773,597 bytes used

Directory of D:\mydata\data

15/09/09  5:27a         <DIR>      0 ----  .
15/09/09  5:27a         <DIR>      0 ----  ..
         2 file(s)           0 bytes used
Total files listed:
        23 file(s)     1,773,597 bytes used


>If yes, then can you craete a folder
>c:\creative.ram and run server there on 63000 port ?
>My application expect this path and some subfolders therein.

>c:\creative.ram
>                    \cac00001
>                    \caccomon
>                    \sema
>                    \inet

>Thanks for the server for testing.

I can not use c:, it is HPFS and can not be accesed by OS/2

I created d:\creative.ram and subfolders and netserver_os2.exe is
running there with port 63000

This machine are running Clipxnet too so you can review your files using:
   http://189.162.166.143/conddb.fml

and using for example:
  DBF: Base de datos: d:\creative.ram\myfile.dbf

Index file, order, RDD, ... are optional
(  Archivo indice:, DBF: Orden controlador:,  DBF: Controlador RDD: )

You can use in Filtro/WHERE: an expression for filter, enclosed in
parenthesis ( "myfilter" )

David Macias




From harbour.01 at syenar.hu  Wed Sep 16 06:13:31 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 06:13:38 2009
Subject: [Harbour] Harbour legacy (Windows) types
Message-ID: <CB4D2B9D-BCD7-4FCF-821F-F95AE658EFA7@syenar.hu>

Hi All,

To give a little push to Harbour from current state (where it seems
a little stuck), I'd like to start making some moves towards type
cleanup. Currently this causes problems only with hbfimage, but IMO
this step is required to allow maximum portability and connectability
with any possible 3rd party libs.

The goal is to keep it safe and compatible. So, I'd like to make
equivalent changes only and retaining old type by default.

In this first pass I plan to do these type changes:

TRUE      -> hbTrue
FALSE     -> hbFalse
BOOL      -> hbBool
BYTE      -> hbByte
ULONG     -> hbULong
LONG      -> hbLong
UINT      -> hbUInt
SHORT     -> hbShort
USHORT    -> hbUShort
LONGLONG  -> hbLongLong
ULONGLONG -> hbULongLong
INT16     -> hbI16
UINT16    -> hbU16
INT32     -> hbI32
UINT32    -> hbU32
INT64     -> hbI64
UINT64    -> hbU64
SCHAR     -> hbSChar
UCHAR     -> hbUChar

Only those places will require extra attention where these
types are used in Win API contexts (gtwvg for the most part).

In first round old types will remain and they a new macro
will be introduced to disable them explicitly. This is to
not break 3rd party Harbour code. Probably protected by
HB_LEGACY_LEVEL3 (or 2). While this compatibility period
lasts, the old types will have to be disabled explicitly
for all code where collisions are experienced, f.e. hbfimage.

[ as next step we can continue cleaning up effective type
usage by switching to abstract types or base types where
needed, but that's another matter. ]

Please comment on this.

Brgds,
Viktor

From e.m.giordano at emagsoftware.it  Wed Sep 16 06:14:40 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Sep 16 06:14:47 2009
Subject: [Harbour] Another OLE problem
References: <20090916091631.7BFC17BD6B@ws5-10.us4.outblaze.com>
Message-ID: <039A9780700F4345822F05C1F9155931@emag>


-----Messaggio Originale----- 
Da: "Jerry Finuliar" <jerryfinuliar@operamail.com>
A: <harbour@harbour-project.org>
Data invio: mercoled? 16 settembre 2009 11.16
Oggetto: [Harbour] Another OLE problem


> Changing 5 to 1 and it will run fine without error

All my problems are solved. Many thanks to all.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From vszakats at users.sourceforge.net  Wed Sep 16 07:00:24 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep 16 07:00:30 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12508] trunk/harbour
Message-ID: <E1MnsFM-0003PZ-ED@3kljzd1.ch3.sourceforge.com>

Revision: 12508
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12508&view=rev
Author:   vszakats
Date:     2009-09-16 11:00:23 +0000 (Wed, 16 Sep 2009)

Log Message:
-----------
2009-09-16 12:59 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/examples/contribf.hbc
  * contrib/Makefile
  - contrib/hbvpdf
  + examples/hbvpdf
    * Moved hbvpdf lib to examples section.
      This code is barely updated and offers duplicate functionality
      of superior hbhpdf lib.

  * source/rtl/filesys.c
    * Minor formatting.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/Makefile
    trunk/harbour/source/rtl/filesys.c
    trunk/harbour/utils/hbmk2/examples/contribf.hbc

Added Paths:
-----------
    trunk/harbour/examples/hbvpdf/

Removed Paths:
-------------
    trunk/harbour/contrib/hbvpdf/


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From lorenzo.fiorini at gmail.com  Wed Sep 16 07:14:49 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Sep 16 07:14:55 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12508] trunk/harbour
In-Reply-To: <E1MnsFM-0003PZ-ED@3kljzd1.ch3.sourceforge.com>
References: <E1MnsFM-0003PZ-ED@3kljzd1.ch3.sourceforge.com>
Message-ID: <9257026e0909160414s9c6c4a6p581f85e6b19425f2@mail.gmail.com>

On Wed, Sep 16, 2009 at 1:00 PM,  <vszakats@users.sourceforge.net> wrote:

> 2009-09-16 12:59 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
> ?* utils/hbmk2/examples/contribf.hbc
> ?* contrib/Makefile
> ?- contrib/hbvpdf
> ?+ examples/hbvpdf
> ? ?* Moved hbvpdf lib to examples section.
> ? ? ?This code is barely updated and offers duplicate functionality
> ? ? ?of superior hbhpdf lib.

Please revert it.

I ( and probably others ) use hbvpdf since years, and it was there
much before hbhpdf.

best regards,
Lorenzo
From vszakats at users.sourceforge.net  Wed Sep 16 07:19:58 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep 16 07:20:05 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12509] trunk/harbour
Message-ID: <E1MnsYI-0003oc-U0@3kljzd1.ch3.sourceforge.com>

Revision: 12509
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12509&view=rev
Author:   vszakats
Date:     2009-09-16 11:19:58 +0000 (Wed, 16 Sep 2009)

Log Message:
-----------
2009-09-16 13:19 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * package/winuni/mpkg_win_uni.bat
  * package/winuni/mpkg_win_uni.nsi
    ! Deleted references to hbzlib and hbpcre inside source tree.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/package/winuni/mpkg_win_uni.bat
    trunk/harbour/package/winuni/mpkg_win_uni.nsi


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Wed Sep 16 07:27:42 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 07:27:51 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12508] trunk/harbour
In-Reply-To: <9257026e0909160414s9c6c4a6p581f85e6b19425f2@mail.gmail.com>
References: <E1MnsFM-0003PZ-ED@3kljzd1.ch3.sourceforge.com>
	<9257026e0909160414s9c6c4a6p581f85e6b19425f2@mail.gmail.com>
Message-ID: <14917682-E969-4666-AF13-ED5E24A34098@syenar.hu>

This code was never updated by anyone since a log time,
yet it has quite some problems. Just enough modifications
were made (by me) to put aside features which made it
non-portable.

To me this show that this code is abandoned.

Moreover it was in fact added AFTER hbhpdf, so what you
say that it was included first is not true.

I've added hbvpdf back then only because it didn't need
external components, but by now this problem is nicely
solved for hbhpdf on all platforms.

I'll add however code to build hbvpdf easily inside
examples, so building it is just as easy as it's now
with one extra line of logic. (hbmk2 hbvpdf.hbp)

Brgds,
Viktor

On 2009.09.16., at 13:14, Lorenzo Fiorini wrote:

> On Wed, Sep 16, 2009 at 1:00 PM,  <vszakats@users.sourceforge.net>  
> wrote:
>
>> 2009-09-16 12:59 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>>  * utils/hbmk2/examples/contribf.hbc
>>  * contrib/Makefile
>>  - contrib/hbvpdf
>>  + examples/hbvpdf
>>    * Moved hbvpdf lib to examples section.
>>      This code is barely updated and offers duplicate functionality
>>      of superior hbhpdf lib.
>
> Please revert it.
>
> I ( and probably others ) use hbvpdf since years, and it was there
> much before hbhpdf.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vszakats at users.sourceforge.net  Wed Sep 16 07:31:44 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep 16 07:31:50 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12510] trunk/harbour
Message-ID: <E1Mnsjg-000437-NM@3kljzd1.ch3.sourceforge.com>

Revision: 12510
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12510&view=rev
Author:   vszakats
Date:     2009-09-16 11:31:43 +0000 (Wed, 16 Sep 2009)

Log Message:
-----------
2009-09-16 13:30 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * examples/hbvpdf/hbvpdf.hbc
  + examples/hbvpdf/hbvpdf.hbp
  - examples/hbvpdf/Makefile
    + Added hbmk2 make files.
      Build with 'hbmk2 hbvpdf.hbp'.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/examples/hbvpdf/hbvpdf.hbc

Added Paths:
-----------
    trunk/harbour/examples/hbvpdf/hbvpdf.hbp

Removed Paths:
-------------
    trunk/harbour/examples/hbvpdf/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Wed Sep 16 08:37:47 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 08:37:56 2009
Subject: [Harbour] if you have some time to kill....
In-Reply-To: <alpine.GSO.2.00.0909150316180.13711@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909142212520.13711@dawn.royalcomp.hu>
	<F753C269-3187-4B93-8235-F8E0447E2DA1@syenar.hu>
	<alpine.GSO.2.00.0909150055290.13711@dawn.royalcomp.hu>
	<alpine.GSO.2.00.0909150316180.13711@dawn.royalcomp.hu>
Message-ID: <9464EA94-7732-4DFD-A8D4-09491227FEC9@syenar.hu>

Hi Tamas,

> i also need some help. it seems that there's only a static library for
> ncurses, and no matter how i bend things, it just won't get linked
> into gtcrs (libncurses.a is ~400k, libgtcrs.a stays at ~65k, and
> curses doesn't seem to work). any idea how to twist it so that it gets
> linked in?
>
> viktor, could you please, when you find some time, whip up some
> support for this combination in hbmk2?

I couldn't try Harbour build on haiku yet, since I took the quick
road and used the downloadable vmware package which doesn't have
enough space for this purpose. So, I need to know some more specifics.

Could you send some hbmk2 output depicting this problem? AFAICS
libncurses.a should be linked already, so let's first check that,
then we can see how it could be changed to link it right.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Wed Sep 16 08:50:42 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep 16 08:50:48 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12511] trunk/harbour
Message-ID: <E1Mnty6-0000Cp-L0@74yxhf1.ch3.sourceforge.com>

Revision: 12511
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12511&view=rev
Author:   vszakats
Date:     2009-09-16 12:50:41 +0000 (Wed, 16 Sep 2009)

Log Message:
-----------
2009-09-16 14:50 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * contrib/hbtip/sendmail.prg
    ! Fixed hang experienced in some situations when sending
      e-mail. This was reported on Linux, but was also present
      on Windows (and all OSes). It was cause by not checking
      :GetOk() return value, but looking for :cReply being NIL.
      This seems to be incorrectly coded since the very beginning,
      but surfaced only after cleaning up socket API in core.
      Please review/test, I left also old condition in.

  * utils/hbmk2/hbmk2.prg
    * Minor formatting.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbtip/sendmail.prg
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dmacias at mail.udg.mx  Wed Sep 16 09:02:57 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Sep 16 09:03:23 2009
Subject: [Harbour] Harbour under OS/2 - eCS 12510
Message-ID: <4AB0E201.6010606@mail.udg.mx>

Build tests with current Harbour

  * $Id: ChangeLog 12510 2009-09-16 11:31:43Z vszakats $
2009-09-16 13:30 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)

build fine with gcc433
  and
new os2-make381 r3

Just well-known warnings, included below


Maurilio, thanks for this new os2-make381 r3 fixed by Andreas

David Macias


[E:\harbour909d\harbour]make -r -w           1>make_gnu.log
../../../sqlite3.c: In function 'sqlite3_os_init':
../../../sqlite3.c:20847: warning: initialization from incompatible
pointer type

../../../gtos2.c: In function 'hb_gt_os2_Redraw':
../../../gtos2.c:799: warning: pointer targets in passing argument 5 of
'pGT->pFuncTable->GetScrChar' differ in signedness
../../../gtstd.c: In function 'hb_gt_std_ReadKey':
../../../gtstd.c:412: warning: unused variable 'TODO'

From ice at extreme.hu  Wed Sep 16 09:04:55 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Wed Sep 16 09:05:02 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12506] trunk/harbour
In-Reply-To: <E1MnpG6-0003V2-MU@dn4whf1.ch3.sourceforge.com>
References: <E1MnpG6-0003V2-MU@dn4whf1.ch3.sourceforge.com>
Message-ID: <alpine.GSO.2.00.0909161457590.17989@dawn.royalcomp.hu>

On Wed, 16 Sep 2009, vszakats@users.sourceforge.net wrote:

hi,

 > 2009-09-16 09:47 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
 >   * utils/hbmk2/hbmk2.prg
 >     + Added support for beos targets to hbmk2. (untested)

almost there.

hbmk2 tries to link in libm, which doesn't exist on haiku.

thanks,

-- 
[-]

mkdir /nonexistent
From vszakats at users.sourceforge.net  Wed Sep 16 09:15:55 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep 16 09:16:01 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12512] trunk/harbour
Message-ID: <E1MnuMV-0000mV-O8@74yxhf1.ch3.sourceforge.com>

Revision: 12512
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12512&view=rev
Author:   vszakats
Date:     2009-09-16 13:15:54 +0000 (Wed, 16 Sep 2009)

Log Message:
-----------
2009-09-16 15:15 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed to not include lib 'm' for beos.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Wed Sep 16 09:19:25 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep 16 09:19:31 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12513] trunk/harbour
Message-ID: <E1MnuPt-0000r5-M1@74yxhf1.ch3.sourceforge.com>

Revision: 12513
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12513&view=rev
Author:   vszakats
Date:     2009-09-16 13:19:24 +0000 (Wed, 16 Sep 2009)

Log Message:
-----------
2009-09-16 15:19 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * source/rtl/gtos2/gtos2.c
    ! Fixed warning on os2/gcc.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rtl/gtos2/gtos2.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Wed Sep 16 09:21:21 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 09:21:31 2009
Subject: [Harbour] Harbour under OS/2 - eCS 12510
In-Reply-To: <4AB0E201.6010606@mail.udg.mx>
References: <4AB0E201.6010606@mail.udg.mx>
Message-ID: <FC497C49-0272-41DE-96C2-4195E7D69787@syenar.hu>

Hi David,

> [E:\harbour909d\harbour]make -r -w           1>make_gnu.log

Just FYI, please note that '-r' is not required since long to
invoke make for Harbour. '-r' is automatically turned on by .mk
files internally.

> ../../../sqlite3.c: In function 'sqlite3_os_init':
> ../../../sqlite3.c:20847: warning: initialization from incompatible
> pointer type
>
> ../../../gtos2.c: In function 'hb_gt_os2_Redraw':
> ../../../gtos2.c:799: warning: pointer targets in passing argument 5  
> of
> 'pGT->pFuncTable->GetScrChar' differ in signedness

This should be fixed now, pls retry.

Brgds,
Viktor

From bedipritpal at hotmail.com  Wed Sep 16 10:38:02 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Sep 16 10:38:07 2009
Subject: [Harbour] HBNETIO - How I tested ...
In-Reply-To: <4AB0B4CB.9070605@mail.udg.mx>
References: <4AAF7E9D.2070406@mail.udg.mx> <4AB0B4CB.9070605@mail.udg.mx>
Message-ID: <25473837.post@talk.nabble.com>


Hi David


David Arturo Macias Corona wrote:
> 
> It is creating files in root of d:\
> 
> 15/09/09  5:27a         <DIR>      0 ----  mydata
> 16/09/09  3:42a         <DIR>      0 ----  creative.ram
> 16/09/09  3:44a            99      0 a---  V661TDC2.dbf
> 16/09/09  3:45a           682      0 a---  OG_87YTT.dbf
> 16/09/09  3:47a           195      0 a---  VNB39PXG.dbf
> 16/09/09  3:48a           131      0 a---  PRHGT555.dbf
> 16/09/09  3:48a           483      0 a---  OXUJHGGF.dbf
> 16/09/09  3:48a            99      0 a---  CAL01046.dbf
> 16/09/09  3:48a            99      0 a---  CAL11046.dbf
> 16/09/09  3:48a           291      0 a---  OBNVCX32.dbf
> 16/09/09  3:48a           355      0 a---  BRWCON01.dbf
> 16/09/09  3:48a            99      0 a---  XSDE4231.dbf
> 16/09/09  3:50a            99      0 a---  UHJICONA.dbf
> 16/09/09  3:50a           579      0 a---  CHECKS.dbf
> 16/09/09  3:50a            99      0 a---  CNF0H00A.dbf
> 16/09/09  3:50a            99      0 a---  ZXKJD444.dbf
> 16/09/09  3:50a           163      0 a---  OBKJN7Y7.dbf
> 

So the .dbf's are created in d: while indexs .z01's are created 
in the folder where these belong to. Now the question is why this 
behavior ? Przemek ?

NetIO suggests that "root" of any server will never be allowed to 
be accessed. Am I correct?

Anyhow, it appears that the NetIO protocol is very useful and is 
working for Web IP's also, and is working smartly.

BTW I cannot access your server right now.
I had to leave for somewhere at the time you posted message.

d:\creative.ram and its subfolders are ok with me.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Re%3A-HBNETIO---How-I-tested-...-tp25452521p25473837.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From ice at extreme.hu  Wed Sep 16 10:51:02 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Wed Sep 16 10:51:10 2009
Subject: [Harbour] if you have some time to kill....
In-Reply-To: <9464EA94-7732-4DFD-A8D4-09491227FEC9@syenar.hu>
References: <alpine.GSO.2.00.0909142212520.13711@dawn.royalcomp.hu>
	<F753C269-3187-4B93-8235-F8E0447E2DA1@syenar.hu>
	<alpine.GSO.2.00.0909150055290.13711@dawn.royalcomp.hu>
	<alpine.GSO.2.00.0909150316180.13711@dawn.royalcomp.hu>
	<9464EA94-7732-4DFD-A8D4-09491227FEC9@syenar.hu>
Message-ID: <alpine.GSO.2.00.0909161648320.17989@dawn.royalcomp.hu>

On Wed, 16 Sep 2009, Viktor Szak?ts wrote:

hi,

 > > i also need some help. it seems that there's only a static library for
 > > ncurses, and no matter how i bend things, it just won't get linked
 > > into gtcrs (libncurses.a is ~400k, libgtcrs.a stays at ~65k, and
 > > curses doesn't seem to work). any idea how to twist it so that it gets
 > > linked in?

 > I couldn't try Harbour build on haiku yet, since I took the quick
 > road and used the downloadable vmware package which doesn't have
 > enough space for this purpose. So, I need to know some more specifics.
 > 
 > Could you send some hbmk2 output depicting this problem? AFAICS
 > libncurses.a should be linked already, so let's first check that,
 > then we can see how it could be changed to link it right.

it seems that something fixed it, or maybe this was one of the 
artifacts i experienced when trying to do things via ssh. works now.

thanks!

-- 
[-]

mkdir /nonexistent
From bedipritpal at hotmail.com  Wed Sep 16 11:06:39 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Sep 16 11:06:45 2009
Subject: [Harbour] demoqt tests with debug_new - Leaked objects
In-Reply-To: <F0FFD855-B361-4C71-9B89-C48C48A44F35@syenar.hu>
References: <004601ca3537$74bda720$5e38f560$@Bisz@t-online.hu>
	<25440044.post@talk.nabble.com> <25467896.post@talk.nabble.com>
	<62C9ACA2-56FE-479A-BDC7-252845F2A4D4@syenar.hu>
	<25468128.post@talk.nabble.com>
	<C614EED8-77D7-4C8C-90F7-A925D75DC08F@syenar.hu>
	<25468576.post@talk.nabble.com>
	<F0FFD855-B361-4C71-9B89-C48C48A44F35@syenar.hu>
Message-ID: <25474420.post@talk.nabble.com>


Hello Viktor


Viktor Szak?ts wrote:
> 
> This means QT cannot be used in apps which is supposed
> to run continuously. (?)
> 
> Continuously running GUI apps aren't that typical, but
> to me it's still a serious concern that and app just
> eats memory while running. This makes it f.e. unsuitable
> for any sort of embedded GUI applications (like a kiosk).
> 
> Is this a property of QT itself, or the property of
> Harbour wrappers?
> 

It is a property of Qt itself.
I have made extensive experiments as far as Harbour's 
parameter passing is concerned and have reached to the 
conclusion that it is harmless. Experiments with Qt's 
object destruction has given me weired results.
For example:

   oRect := QRect():new( 20,20,30,400 )
   ? oRect:left()  => 20
   ? oRect:top()  => 20
   ? oRect:right() => 30
   ? oRect:bottom() => 400

   Qt_QRect_destroy( oRect )
   ? oRect:left()  => 4534342  ( a long figure )
   ? oRect:top()  => 8967354  ( another long figure )
   ? oRect:right() => 30         
   ? oRect:bottom() => 400
   
.cpp

   HB_FUNC( QT_QRECT_DESTROY )
   {
      delete hbqt_par_QRect( 1 );           
      //  OR/AND
      hbqt_par_QRect( 1 )->~QRect();
   }

So even after destroy, oRect is an active pointer and 
only firts two slots are pointing to garbase. In theory 
after destroying it it should raise som error or appln
must hang, but results are contrary.
   
Though I have not given up, YET, on this issue,
but at the face value ( till now ) it appears we cannot 
use Harbour-Qt for production level applications.

NOTE: struggle is still on to overcome it.

Regards
Pritpal Bedi    

-- 
View this message in context: http://www.nabble.com/demoqt-tests-with-debug_new---Leaked-objects-tp25434990p25474420.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vszakats at users.sourceforge.net  Wed Sep 16 11:09:37 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep 16 11:09:43 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12514] trunk/harbour
Message-ID: <E1Mnw8X-0000SG-83@3kljzd1.ch3.sourceforge.com>

Revision: 12514
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12514&view=rev
Author:   vszakats
Date:     2009-09-16 15:09:36 +0000 (Wed, 16 Sep 2009)

Log Message:
-----------
2009-09-16 17:08 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * contrib/hbwin/legacy.prg
    + Added operator overloading to TOLEAUTO compatibility class.
      Original code has been optimized and few small bugs fixed.
      Please test, I've only tested clean build.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/legacy.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Wed Sep 16 11:19:18 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 11:19:26 2009
Subject: [Harbour] demoqt tests with debug_new - Leaked objects
In-Reply-To: <25474420.post@talk.nabble.com>
References: <004601ca3537$74bda720$5e38f560$@Bisz@t-online.hu>
	<25440044.post@talk.nabble.com> <25467896.post@talk.nabble.com>
	<62C9ACA2-56FE-479A-BDC7-252845F2A4D4@syenar.hu>
	<25468128.post@talk.nabble.com>
	<C614EED8-77D7-4C8C-90F7-A925D75DC08F@syenar.hu>
	<25468576.post@talk.nabble.com>
	<F0FFD855-B361-4C71-9B89-C48C48A44F35@syenar.hu>
	<25474420.post@talk.nabble.com>
Message-ID: <D21266E2-C3BB-4D44-BAE4-CC94DFA4B74C@syenar.hu>

Hi Pritpal,

>> Is this a property of QT itself, or the property of
>> Harbour wrappers?
>>
>
> It is a property of Qt itself.
> I have made extensive experiments as far as Harbour's
> parameter passing is concerned and have reached to the
> conclusion that it is harmless. Experiments with Qt's
> object destruction has given me weired results.
> For example:
>
>   oRect := QRect():new( 20,20,30,400 )
>   ? oRect:left()  => 20
>   ? oRect:top()  => 20
>   ? oRect:right() => 30
>   ? oRect:bottom() => 400
>
>   Qt_QRect_destroy( oRect )
>   ? oRect:left()  => 4534342  ( a long figure )
>   ? oRect:top()  => 8967354  ( another long figure )
>   ? oRect:right() => 30
>   ? oRect:bottom() => 400
>
> .cpp
>
>   HB_FUNC( QT_QRECT_DESTROY )
>   {
>      delete hbqt_par_QRect( 1 );
>      //  OR/AND
>      hbqt_par_QRect( 1 )->~QRect();
>   }
>
> So even after destroy, oRect is an active pointer and
> only firts two slots are pointing to garbase. In theory
> after destroying it it should raise som error or appln
> must hang, but results are contrary.
>
> Though I have not given up, YET, on this issue,
> but at the face value ( till now ) it appears we cannot
> use Harbour-Qt for production level applications.
>
> NOTE: struggle is still on to overcome it.

Thanks for the explanation and details.

Could it be that QT uses some sort of lazy freeing of the
objects (f.e. to keep user apps not crash when doing object
access after freeing, and/or to maintain compatibility with
earlier QT lib releases, or there could be others reasons
also), so that actual freeing happens only later in a
"gc-like" phase? If so, maybe there is a way to control that
directly or indirectly.

Looks like an issue which would make QT unsuitable for
a lot of uses (embedded systems), so I'd guess they have
solved this issue somehow.

Some easy googling gave this result:
http://lists.trolltech.com/pipermail/qt-interest/2008-December/000458.html

This might help understanding its internals.

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Sep 16 13:01:50 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 16 13:01:56 2009
Subject: [Harbour] HBZLIB and HBPCRE as part of Harbour shared library
Message-ID: <20090916170149.GA19194@uran.home.aster.pl>

Hi Viktor,

There is small problem with share library when local HBZLIB and/or HBPCRE.
Now they are not part of harbour shared library. It means that on some
platforms which strictly needs relocatable code and have to resolve all
dependencies it's not possible to create harbour shared library.
On some other platforms it's necessary to update linked order, i.e.
now in HAIKU shared linked binaries generate the following error:
   Could not resolve symbol 'pcre_malloc'.
It also increase the size of final binaries which have to use regex
or zlib.
Can you second dynamic compilation phase to these libraries and include
them in harbour shared library when they are used in local version?

best regards,
Przemek
From ice at extreme.hu  Wed Sep 16 13:31:25 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Wed Sep 16 13:31:36 2009
Subject: [Harbour] haiku cpp build failure
Message-ID: <alpine.GSO.2.00.0909161820050.17989@dawn.royalcomp.hu>


hi,

! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh   
! HB_BUILD_MODE: cpp
! HB_HOST_PLAT: beos (x86)  HB_SHELL: sh
! HB_PLATFORM: beos (x86) (autodetected)
! HB_COMPILER: gcc (autodetected: /boot/develop/tools/gnupro/bin/)
! Component: 'zlib' found in /boot/develop/headers/3rdparty 
! Component: 'pcre' found in /boot/home/hb/harbour-build/external/pcre (local)
! Component: 'openssl' found in /boot/common/include 
! Component: 'gpm' not supported on beos platform
! Component: 'slang' not found
! Component: 'curses' found in /boot/develop/headers/3rdparty 
! Component: 'x11' not found
! Component: 'wattcp/watt-32' not supported on beos platform
! HB_INSTALL_PREFIX automatically set to: /boot/common
! REVISION: 12513
[...]
ar   rcs ../../../../../lib/beos/gcc/libsqlite3.a sqlite3.o || ( rm -f ../../../../../lib/beos/gcc/libsqlite3.a && false )
! 'hbzlib' library skipped (unused)
g++  -I. -I../../../../../include  -Wall -W -O3   -oexpropt1.o -c ../../../expropt1.c
In file included from /boot/home/hb/harbour-build/include/hbvmpub.h:56,
                 from /boot/home/hb/harbour-build/include/hbapi.h:61,
                 from /boot/home/hb/harbour-build/include/hbcompdf.h:57,
                 from /boot/home/hb/harbour-build/include/hbmacro.h:62,
                 from /boot/home/hb/harbour-build/source/common/expropt1.c:58:
/boot/home/hb/harbour-build/include/hbdefs.h:1624: multiple storage classes in declaration of `PHB_FUNC'
/boot/home/hb/harbour-build/include/hbdefs.h:1625: multiple storage classes in declaration of `HB_FUNC_PTR'
make[3]: *** [expropt1.o] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [common] Error 2
make: *** [source] Error 2

this only with g++2.95.3, building with g++4.3.3 is ok, but using it 
fails:

hbmk2: Processing configuration: /boot/common/bin/hbmk.cfg                     
Harbour 2.0.0beta3 (Rev. 12513)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 't.prg'...
Lines 5, Functions/Procedures 1
Generating C source output to 't.c'... Done.
/boot/common/lib/harbour/libhbvm.a(hvmall.o):(.data.DW.ref.__gxx_personality_v0[DW.ref.__gxx_personality_v0]+0x0): 
undefined reference to `__gxx_personality_v0'
collect2: ld returned 1 exit status
hbmk2: Error: Running linker. 1                                                
gcc t.o hbmk_zy0a15.o   -lhbextern -lhbdebug -lhbvm -lhbrtl -lhblang 
-lhbcpage -lgtcgi -lgtpca -lgtstd -lgttrm -lhbrdd -lhbuddall 
-lhbusrrdd -lrddntx -lrddcdx -lrddnsx -lrddfpt -lhbrdd -lhbhsx -lhbsix 
-lhbrtl -lhbvm -lhbmacro -lhbcplr -lhbpp -lhbcommon -lroot -lsocket 
-lz -lhbpcre  -ot -L/boot/common/lib/harbour -L/system/lib

this even with HB_BUILD_MODE=cpp given to hbmk2, if that matters. if i 
explicitly specify HB_USER_LDFLAGS=-lstdc++, then it works (i reckon 
gcc does this automatically when called as g++, and needs to be given 
if called as gcc).

-- 
[-]

mkdir /nonexistent
From harbour.01 at syenar.hu  Wed Sep 16 13:35:49 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 13:35:57 2009
Subject: [Harbour] HBZLIB and HBPCRE as part of Harbour shared library
In-Reply-To: <20090916170149.GA19194@uran.home.aster.pl>
References: <20090916170149.GA19194@uran.home.aster.pl>
Message-ID: <1E6A11DC-461B-4837-8761-B79C4F491E27@syenar.hu>

Hi Przemek,

> There is small problem with share library when local HBZLIB and/or  
> HBPCRE.
> Now they are not part of harbour shared library. It means that on some
> platforms which strictly needs relocatable code and have to resolve  
> all
> dependencies it's not possible to create harbour shared library.
> On some other platforms it's necessary to update linked order, i.e.
> now in HAIKU shared linked binaries generate the following error:
>   Could not resolve symbol 'pcre_malloc'.

I don't have Harbour running on this platform, but you can
try changing 'LIBS +=' in lines 24 and 28 of config/dyn.mk
to 'SYSLIBS +=' and see if it solves it.

> It also increase the size of final binaries which have to use regex
> or zlib.
> Can you second dynamic compilation phase to these libraries and  
> include
> them in harbour shared library when they are used in local version?

We can move logic in source/Makefile + source/dynlib dir one
level up, although I don't like it too much as it will easily
encourage to add any contribs to harbour dll which is IMO
against the idea of a standard dll interface and having well
separated components, plus it changes the dir layout in a
way which I feel quite uncomfortable / unclean for some reason.
The other concern is that zlib and pcre will be present in
*some* harbour dll builds but not present in others, which
can create confusion and defeats the idea of standard Harbour
dll interface. It can also probably cause problems if someone
wants to link in 3rd party components which *also* exports
zlib/pcre interface.

Possibly we shouldn't reinvent the wheel here, but I don't
have information on how this problem is handled in other projects.

It could be a solution to build separate .dlls from hbpcre
and hbzlib and link those to final executables. But we're
missing generic support for such feature yet.

Or we could force relocatable code for zlib / pcre on all
platforms / builds.

...or any other/better idea?

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep 16 13:47:29 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 13:47:39 2009
Subject: [Harbour] haiku cpp build failure
In-Reply-To: <alpine.GSO.2.00.0909161820050.17989@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909161820050.17989@dawn.royalcomp.hu>
Message-ID: <97B5B036-D7B2-4DDB-B351-E46CD041FF3E@syenar.hu>

Hi,

> hbmk2: Processing configuration: /boot/common/bin/hbmk.cfg
> Harbour 2.0.0beta3 (Rev. 12513)
> Copyright (c) 1999-2009, http://www.harbour-project.org/
> Compiling 't.prg'...
> Lines 5, Functions/Procedures 1
> Generating C source output to 't.c'... Done.
> /boot/common/lib/harbour/libhbvm.a(hvmall.o): 
> (.data.DW.ref.__gxx_personality_v0[DW.ref.__gxx_personality_v0]+0x0):
> undefined reference to `__gxx_personality_v0'
> collect2: ld returned 1 exit status
> hbmk2: Error: Running linker. 1
> gcc t.o hbmk_zy0a15.o   -lhbextern -lhbdebug -lhbvm -lhbrtl -lhblang
> -lhbcpage -lgtcgi -lgtpca -lgtstd -lgttrm -lhbrdd -lhbuddall
> -lhbusrrdd -lrddntx -lrddcdx -lrddnsx -lrddfpt -lhbrdd -lhbhsx -lhbsix
> -lhbrtl -lhbvm -lhbmacro -lhbcplr -lhbpp -lhbcommon -lroot -lsocket
> -lz -lhbpcre  -ot -L/boot/common/lib/harbour -L/system/lib
>
> this even with HB_BUILD_MODE=cpp given to hbmk2, if that matters. if i

hbmk2 doesn't understand HB_BUILD_MODE envvar. You have to
use '-cpp' switch. In fact there are quite some GNU Make
envvars which aren't implemented in hbmk2, and honestly I'd
rather delete existing ones first to clean off some time
waste trying to keep these in sync, and also to clean away
often seen confusion when envvar leftovers change hbmk2
behavior in hard-to-detect and unwanted way.

Dunno how this breaks general assumption from such cmdline
tools, but I'm 100% in favor of cmdline switches. Opinions
are welcome, could be I'm missing some important scenarios
here.

[ BTW, HBMK2_OPTION envvar could be added, which would
accept simple cmdline options as is. ]

>  explicitly specify HB_USER_LDFLAGS=-lstdc++, then it works (i reckon
> gcc does this automatically when called as g++, and needs to be given
> if called as gcc).

If we can define the rules when to include this lib I can add
it to hbmk2. First confusion is what is the difference between
supc++ and stdc++ ? mingw/win requires supc++ when linking hbqt.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Wed Sep 16 13:59:34 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep 16 13:59:40 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12515] trunk/harbour
Message-ID: <E1Mnyn0-0001TY-Av@bj8yhf1.ch3.sourceforge.com>

Revision: 12515
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12515&view=rev
Author:   vszakats
Date:     2009-09-16 17:59:33 +0000 (Wed, 16 Sep 2009)

Log Message:
-----------
2009-09-16 19:58 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * contrib/hbqt/hbqts.hbc
    ! Fixed to include supc++ for gcc targets.

  * contrib/hbqt/hbqt.hbc
  * contrib/gtqtc/gtqtc.hbc
    % Simplified inclusion logic of supc++.

  * contrib/gtqtc/gtqtc.hbc
  + contrib/gtqtc/gtqtcs.hbc
  + contrib/gtqtc/gtqtcs
  + contrib/gtqtc/gtqtcs/Makefile
  * contrib/gtqtc/Makefile
    + HB_QT_STATIC now works the same way as for hbqt.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtqtc/Makefile
    trunk/harbour/contrib/gtqtc/gtqtc.hbc
    trunk/harbour/contrib/hbqt/hbqt.hbc
    trunk/harbour/contrib/hbqt/hbqts.hbc

Added Paths:
-----------
    trunk/harbour/contrib/gtqtc/gtqtcs/
    trunk/harbour/contrib/gtqtc/gtqtcs/Makefile
    trunk/harbour/contrib/gtqtc/gtqtcs.hbc


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From ice at extreme.hu  Wed Sep 16 14:07:25 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Wed Sep 16 14:07:34 2009
Subject: [Harbour] haiku cpp build failure
In-Reply-To: <97B5B036-D7B2-4DDB-B351-E46CD041FF3E@syenar.hu>
References: <alpine.GSO.2.00.0909161820050.17989@dawn.royalcomp.hu>
	<97B5B036-D7B2-4DDB-B351-E46CD041FF3E@syenar.hu>
Message-ID: <alpine.GSO.2.00.0909161958400.17989@dawn.royalcomp.hu>

On Wed, 16 Sep 2009, Viktor Szak?ts wrote:

hi,

 > hbmk2 doesn't understand HB_BUILD_MODE envvar. You have to

it was just a shot in the dark :)

 > use '-cpp' switch. In fact there are quite some GNU Make

this works, thanks. in this case, hbmk2 invokes g++, which is the 
right thing to do.

 > envvars which aren't implemented in hbmk2, and honestly I'd
 > rather delete existing ones first to clean off some time
 > waste trying to keep these in sync, and also to clean away
 > often seen confusion when envvar leftovers change hbmk2
 > behavior in hard-to-detect and unwanted way.

please do.

 > Dunno how this breaks general assumption from such cmdline
 > tools, but I'm 100% in favor of cmdline switches. Opinions

agreed.

 > [ BTW, HBMK2_OPTION envvar could be added, which would
 > accept simple cmdline options as is. ]

this sounds like a good idea, as a convenience. in my opinion, this 
shouldn't in any way affect anything else talked about above and 
below.

 > > explicitly specify HB_USER_LDFLAGS=-lstdc++, then it works (i reckon
 > > gcc does this automatically when called as g++, and needs to be given
 > > if called as gcc).
 > 
 > If we can define the rules when to include this lib I can add
 > it to hbmk2. First confusion is what is the difference between
 > supc++ and stdc++ ? mingw/win requires supc++ when linking hbqt.

i would rather say that if harbour was built with cpp mode, then hbmk2 
should call g++ (CXX) instead gcc (CC) automatically. "manually" 
messing with this seems counterintuitive, no? this i believe also 
would take care of stdc++ vs supc++ (no idea what the difference is), 
libCrun on sunpro, and other c++ support libs other compilers might 
have. i think.


-- 
[-]

mkdir /nonexistent
From druzus at acn.waw.pl  Wed Sep 16 14:33:51 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 16 14:33:59 2009
Subject: [Harbour] haiku cpp build failure
In-Reply-To: <alpine.GSO.2.00.0909161958400.17989@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909161820050.17989@dawn.royalcomp.hu>
	<97B5B036-D7B2-4DDB-B351-E46CD041FF3E@syenar.hu>
	<alpine.GSO.2.00.0909161958400.17989@dawn.royalcomp.hu>
Message-ID: <20090916183351.GA24501@uran.home.aster.pl>

On Wed, 16 Sep 2009, Tamas TEVESZ wrote:

Hi,

>  > If we can define the rules when to include this lib I can add
>  > it to hbmk2. First confusion is what is the difference between
>  > supc++ and stdc++ ? mingw/win requires supc++ when linking hbqt.
> i would rather say that if harbour was built with cpp mode, then hbmk2 
> should call g++ (CXX) instead gcc (CC) automatically. "manually" 
> messing with this seems counterintuitive, no? this i believe also 
> would take care of stdc++ vs supc++ (no idea what the difference is), 
> libCrun on sunpro, and other c++ support libs other compilers might 
> have. i think.

IMHO hbmk2 by default should look for compiler used to compile hbmk2
and then look for others.
In most of cases it's used with the same compiler so it's preferable
behavior and any other combinations also needs to sync libraries.
So it's enough to check existing HB_VERSION_* flags.
It will also resolve few other problems I have now, i.e. I cannot
use hbmk2 on computers where I have other C compilers in the PATH.

BTW what is current order/priority of detecting C compilers in hbmk2?

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Sep 16 15:30:04 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 15:30:14 2009
Subject: [Harbour] haiku cpp build failure
In-Reply-To: <20090916183351.GA24501@uran.home.aster.pl>
References: <alpine.GSO.2.00.0909161820050.17989@dawn.royalcomp.hu>
	<97B5B036-D7B2-4DDB-B351-E46CD041FF3E@syenar.hu>
	<alpine.GSO.2.00.0909161958400.17989@dawn.royalcomp.hu>
	<20090916183351.GA24501@uran.home.aster.pl>
Message-ID: <E7132845-24DE-413C-84CF-4ADC1ECB7FB0@syenar.hu>

>>> If we can define the rules when to include this lib I can add
>>> it to hbmk2. First confusion is what is the difference between
>>> supc++ and stdc++ ? mingw/win requires supc++ when linking hbqt.
>> i would rather say that if harbour was built with cpp mode, then  
>> hbmk2
>> should call g++ (CXX) instead gcc (CC) automatically. "manually"
>> messing with this seems counterintuitive, no? this i believe also
>> would take care of stdc++ vs supc++ (no idea what the difference is),
>> libCrun on sunpro, and other c++ support libs other compilers might
>> have. i think.
>
> IMHO hbmk2 by default should look for compiler used to compile hbmk2
> and then look for others.
> In most of cases it's used with the same compiler so it's preferable
> behavior and any other combinations also needs to sync libraries.
> So it's enough to check existing HB_VERSION_* flags.

Yes, it can be solved easily. It's rather a usability issue.

> It will also resolve few other problems I have now, i.e. I cannot
> use hbmk2 on computers where I have other C compilers in the PATH.

On which platform does this happen?

Maybe on *nixes this is good, but on non-*nix this would be a
disaster and I often praise the day I didn't implement it at
the end (well, actually removed some initial attempts based
on this same train of thought).

Now, if I start to make hbmk2 behave differently on different
platforms, things will start to become very cheesy. For one thing,
I won't be able to support it because it's simply impossible to
know why hbmk2 behaves the way it does.

Moreover, copying around hbmk2 executable would create all sorts
of "interesting" effects. Maybe this is not done often on *nix
systems, but anyway, on non-*nix it's usual, and it happens f.e.
when assembling the unified installer.

> BTW what is current order/priority of detecting C compilers in hbmk2?

It's a little messy ATM. On *nixes there is no autodetection
when doing native builds, it will default to the C compiler
used to build hbmk2 itself (this what you ask for, so I wonder
why doesn't it work for you, but you didn't tell the platform).
For cross builds there is autodetection of cross-tools if you
specify target platform, there isn't if you specify target
compiler.

On non-*nix there is autodetection for most native compilers
(some, like pocc64/poccarm are missing yet). If none can be
detected, it will look for embedded installations based on
target platform. It will also look for embedded installations
if user explicitly selected the compiler.

You can check the order of detecting different compilers in
variables aCOMPDET and aCOMPDET_EMBED.

I plan to rework autodetection to solve all current problems
in an easier to oversee way, current state is rather organic,
and misses some extras we have in GNU Make (although it has
others).

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Sep 16 16:17:13 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 16 16:17:19 2009
Subject: [Harbour] haiku cpp build failure
In-Reply-To: <E7132845-24DE-413C-84CF-4ADC1ECB7FB0@syenar.hu>
References: <alpine.GSO.2.00.0909161820050.17989@dawn.royalcomp.hu>
	<97B5B036-D7B2-4DDB-B351-E46CD041FF3E@syenar.hu>
	<alpine.GSO.2.00.0909161958400.17989@dawn.royalcomp.hu>
	<20090916183351.GA24501@uran.home.aster.pl>
	<E7132845-24DE-413C-84CF-4ADC1ECB7FB0@syenar.hu>
Message-ID: <20090916201713.GA29233@uran.home.aster.pl>

On Wed, 16 Sep 2009, Szak?ts Viktor wrote:

Hi,

> It's a little messy ATM. On *nixes there is no autodetection
> when doing native builds, it will default to the C compiler
> used to build hbmk2 itself (this what you ask for, so I wonder
> why doesn't it work for you, but you didn't tell the platform).
> For cross builds there is autodetection of cross-tools if you
> specify target platform, there isn't if you specify target
> compiler.

I'm really sorry but I was wrong. I've just tested current SVN
and default build time CC is preferred.
I'm "nearly" sure that few weeks ago it was a problem and I had to
update my build scripts, i.e. OpenWatcom was preferred when I had
in my envvars:

   export WATCOM="/home/nwe/lng/watcom"
   export INCLUDE="${WATCOM}/lh"
   export PATH="${WATCOM}/binl:$PATH"

Now this happens only in pure Harbour build system (make) but I can
leave with though I'm not sure it's good choice for default behavior
because we will chose some rather platform exotic compilers if they
are installed instead of system default one.

Current hbmk2 behavior is OK for me - thank you very much and I think
we should only add support to "inherit" C++ mode from Harbour build
settings.

BTW you or Tomaz asked about using OpenWatcom in Linux. Current version
(1.8) in full installation contains binaries for DOS, WIN, OS2 and
Linux builds. It's enough to set executable attributes for Linux
binaries in ${WATCOM}/binl directory.

> On non-*nix there is autodetection for most native compilers
> (some, like pocc64/poccarm are missing yet). If none can be
> detected, it will look for embedded installations based on
> target platform. It will also look for embedded installations
> if user explicitly selected the compiler.
> You can check the order of detecting different compilers in
> variables aCOMPDET and aCOMPDET_EMBED.
> I plan to rework autodetection to solve all current problems
> in an easier to oversee way, current state is rather organic,
> and misses some extras we have in GNU Make (although it has
> others).

Addressing all issues is horrible problem. Now you collected most
of information so you can try to create some more common and simple
rules which can be easier to guess/follow by users what I agree is
very important. Anyhow it's still huge job and thank you very much
for your all affords and final results which are fantastic.

best regards,
Przemek
From Istvan.Bisz at t-online.hu  Wed Sep 16 16:39:47 2009
From: Istvan.Bisz at t-online.hu (=?iso-8859-1?Q?Bisz_Istv=E1n?=)
Date: Wed Sep 16 16:40:07 2009
Subject: [Harbour] demoqt tests with debug_new - Leaked objects
In-Reply-To: <D21266E2-C3BB-4D44-BAE4-CC94DFA4B74C@syenar.hu>
References: <004601ca3537$74bda720$5e38f560$@Bisz@t-online.hu>	<25440044.post@talk.nabble.com>
	<25467896.post@talk.nabble.com>	<62C9ACA2-56FE-479A-BDC7-252845F2A4D4@syenar.hu>	<25468128.post@talk.nabble.com>	<C614EED8-77D7-4C8C-90F7-A925D75DC08F@syenar.hu>	<25468576.post@talk.nabble.com>	<F0FFD855-B361-4C71-9B89-C48C48A44F35@syenar.hu>	<25474420.post@talk.nabble.com>
	<D21266E2-C3BB-4D44-BAE4-CC94DFA4B74C@syenar.hu>
Message-ID: <000601ca370d$d54f3180$7fed9480$@Bisz@t-online.hu>

Hi,

continuing the leaked objects issue, based on the sample sent by Pritpal... 

#define QT_PTROF( oObj )  ( oObj:pPtr )

PROCEDURE Main()
   Local oRect

   oRect := QRect():new( 20,20,30,400 )

   ? oRect:left()
   ? oRect:top()
   ? oRect:right()
   ? oRect:bottom()

/*
   Qt_QRect_destroy( QT_PTROF( oRect ) )
   or
   oRect:Destroy()
*/
   oRect:Destroy()

   RETURN

I executed the following test cases with debug_new:
 
Case 1:

   // With this cpp function
   // See: leakobj_with_delete.txt
   HB_FUNC( QT_QRECT_DESTROY )
   {
      //hbqt_par_QRect( 1 )->~QRect();
      delete hbqt_par_QRect( 1 );
   }

Case 2:


   // With this cpp function
   // See: leakobj_without_delete.txt
   HB_FUNC( QT_QRECT_DESTROY )
   {
      hbqt_par_QRect( 1 )->~QRect();
      //delete hbqt_par_QRect( 1 );
   }

Case 3:

   // With this cpp function
   // See: leakobj_with_destructor_and_delete.txt
   HB_FUNC( QT_QRECT_DESTROY )
   {
      hbqt_par_QRect( 1 )->~QRect();
      delete hbqt_par_QRect( 1 );
   }

The resulted log files are attached.

The reserved heap size at the end goes to zero just in test case 1 and 3.
'delete: freed 0x80b5a60 (size 4, 0 bytes still allocated)'.
Test case 2 shows that QRect (with size 16 bytes) allocated by Qt remains on
the heap. 'delete: freed 0x8e8aa60 (size 4, 16 bytes still allocated).

Pritpal, could you please insert the delete operator in the destructors
logic? An another solution is to define a new Delete() method containing
just the delete operator.
In any case this second solution will help the further investigations.

Best regards,
Istv?n

-----Original Message-----
From: harbour-bounces@harbour-project.org
[mailto:harbour-bounces@harbour-project.org] On Behalf Of Viktor Szak?ts
Sent: 2009. szeptember 16. 17:19
To: Harbour Project Main Developer List.
Subject: Re: [Harbour] demoqt tests with debug_new - Leaked objects

Hi Pritpal,

>> Is this a property of QT itself, or the property of
>> Harbour wrappers?
>>
>
> It is a property of Qt itself.
> I have made extensive experiments as far as Harbour's
> parameter passing is concerned and have reached to the
> conclusion that it is harmless. Experiments with Qt's
> object destruction has given me weired results.
> For example:
>
>   oRect := QRect():new( 20,20,30,400 )
>   ? oRect:left()  => 20
>   ? oRect:top()  => 20
>   ? oRect:right() => 30
>   ? oRect:bottom() => 400
>
>   Qt_QRect_destroy( oRect )
>   ? oRect:left()  => 4534342  ( a long figure )
>   ? oRect:top()  => 8967354  ( another long figure )
>   ? oRect:right() => 30
>   ? oRect:bottom() => 400
>
> .cpp
>
>   HB_FUNC( QT_QRECT_DESTROY )
>   {
>      delete hbqt_par_QRect( 1 );
>      //  OR/AND
>      hbqt_par_QRect( 1 )->~QRect();
>   }
>
> So even after destroy, oRect is an active pointer and
> only firts two slots are pointing to garbase. In theory
> after destroying it it should raise som error or appln
> must hang, but results are contrary.
>
> Though I have not given up, YET, on this issue,
> but at the face value ( till now ) it appears we cannot
> use Harbour-Qt for production level applications.
>
> NOTE: struggle is still on to overcome it.

Thanks for the explanation and details.

Could it be that QT uses some sort of lazy freeing of the
objects (f.e. to keep user apps not crash when doing object
access after freeing, and/or to maintain compatibility with
earlier QT lib releases, or there could be others reasons
also), so that actual freeing happens only later in a
"gc-like" phase? If so, maybe there is a way to control that
directly or indirectly.

Looks like an issue which would make QT unsuitable for
a lot of uses (embedded systems), so I'd guess they have
solved this issue somehow.

Some easy googling gave this result:
http://lists.trolltech.com/pipermail/qt-interest/2008-December/000458.html

This might help understanding its internals.

Brgds,
Viktor

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
-------------- next part --------------
Leaked object at 0x86a2a18 (size 4, 0x2192b5d)
Leaked object at 0x86a2a60 (size 4, 0x216632d)
Leaked object at 0x86a2aa8 (size 96, 0x20ef093)
Leaked object at 0x86a2b50 (size 4, 0x2166a1d)
Leaked object at 0x86a2bc0 (size 4, 0x2192f5d)
Leaked object at 0x86a2c08 (size 96, 0x20ef093)
Leaked object at 0x86a2cb0 (size 4, 0x2192e2d)
Leaked object at 0x86a2cf8 (size 20, 0x2193264)
Leaked object at 0x86a4ed0 (size 20, 0x2193264)
Leaked object at 0x86a4f28 (size 20, 0x2193264)
Leaked object at 0x86a4f80 (size 20, 0x2193264)
Leaked object at 0x86a5008 (size 4, 0x21ee6ed)
Leaked object at 0x86a5050 (size 4, 0x21ee5ed)
Leaked object at 0x86a5098 (size 36, 0x20eff86)
Leaked object at 0x86a5100 (size 96, 0x20ef093)
Leaked object at 0x86a51a8 (size 80, 0x20f50c2)
Leaked object at 0x86a5240 (size 80, 0x20f50c2)
Leaked object at 0x86a53f8 (size 20, 0x2193264)
Leaked object at 0x86a5450 (size 20, 0x2193264)
*** 19 leaks found
delete: freed 0x86a5450 (size 20, 612 bytes still allocated)
delete: freed 0x86a53f8 (size 20, 592 bytes still allocated)
delete: freed 0x86a4f80 (size 20, 572 bytes still allocated)
delete: freed 0x86a4f28 (size 20, 552 bytes still allocated)
delete: freed 0x86a4ed0 (size 20, 532 bytes still allocated)
delete: freed 0x86a2cf8 (size 20, 512 bytes still allocated)
delete: freed 0x86a5240 (size 80, 432 bytes still allocated)
delete: freed 0x86a51a8 (size 80, 352 bytes still allocated)
delete: freed 0x86a5100 (size 96, 256 bytes still allocated)
delete: freed 0x86a5098 (size 36, 220 bytes still allocated)
delete: freed 0x86a5050 (size 4, 216 bytes still allocated)
delete: freed 0x86a5008 (size 4, 212 bytes still allocated)
delete: freed 0x86a2cb0 (size 4, 208 bytes still allocated)
delete: freed 0x86a2c08 (size 96, 112 bytes still allocated)
delete: freed 0x86a2bc0 (size 4, 108 bytes still allocated)
delete: freed 0x86a2a18 (size 4, 104 bytes still allocated)
delete: freed 0x86a2b50 (size 4, 100 bytes still allocated)
delete: freed 0x86a2aa8 (size 96, 4 bytes still allocated)
delete: freed 0x86a2a60 (size 4, 0 bytes still allocated)
-------------- next part --------------
Leaked object at 0x80b5a18 (size 4, 0x2192b5d)
Leaked object at 0x80b5a60 (size 4, 0x216632d)
Leaked object at 0x80b5aa8 (size 96, 0x20ef093)
Leaked object at 0x80b5b50 (size 4, 0x2166a1d)
Leaked object at 0x80b5bc0 (size 4, 0x2192f5d)
Leaked object at 0x80b5c08 (size 96, 0x20ef093)
Leaked object at 0x80b5cb0 (size 4, 0x2192e2d)
Leaked object at 0x80b5cf8 (size 20, 0x2193264)
Leaked object at 0x80b7ed0 (size 20, 0x2193264)
Leaked object at 0x80b7f28 (size 20, 0x2193264)
Leaked object at 0x80b7f80 (size 20, 0x2193264)
Leaked object at 0x80b8008 (size 4, 0x21ee6ed)
Leaked object at 0x80b8050 (size 4, 0x21ee5ed)
Leaked object at 0x80b8098 (size 36, 0x20eff86)
Leaked object at 0x80b8100 (size 96, 0x20ef093)
Leaked object at 0x80b81a8 (size 80, 0x20f50c2)
Leaked object at 0x80b8240 (size 80, 0x20f50c2)
Leaked object at 0x80b83f8 (size 20, 0x2193264)
Leaked object at 0x80b8450 (size 20, 0x2193264)
*** 19 leaks found
delete: freed 0x80b8450 (size 20, 612 bytes still allocated)
delete: freed 0x80b83f8 (size 20, 592 bytes still allocated)
delete: freed 0x80b7f80 (size 20, 572 bytes still allocated)
delete: freed 0x80b7f28 (size 20, 552 bytes still allocated)
delete: freed 0x80b7ed0 (size 20, 532 bytes still allocated)
delete: freed 0x80b5cf8 (size 20, 512 bytes still allocated)
delete: freed 0x80b8240 (size 80, 432 bytes still allocated)
delete: freed 0x80b81a8 (size 80, 352 bytes still allocated)
delete: freed 0x80b8100 (size 96, 256 bytes still allocated)
delete: freed 0x80b8098 (size 36, 220 bytes still allocated)
delete: freed 0x80b8050 (size 4, 216 bytes still allocated)
delete: freed 0x80b8008 (size 4, 212 bytes still allocated)
delete: freed 0x80b5cb0 (size 4, 208 bytes still allocated)
delete: freed 0x80b5c08 (size 96, 112 bytes still allocated)
delete: freed 0x80b5bc0 (size 4, 108 bytes still allocated)
delete: freed 0x80b5a18 (size 4, 104 bytes still allocated)
delete: freed 0x80b5b50 (size 4, 100 bytes still allocated)
delete: freed 0x80b5aa8 (size 96, 4 bytes still allocated)
delete: freed 0x80b5a60 (size 4, 0 bytes still allocated)
-------------- next part --------------
Leaked object at 0x8e8aa18 (size 4, 0x2192b5d)
Leaked object at 0x8e8aa60 (size 4, 0x216632d)
Leaked object at 0x8e8aaa8 (size 96, 0x20ef093)
Leaked object at 0x8e8ab50 (size 4, 0x2166a1d)
Leaked object at 0x8e8abc0 (size 4, 0x2192f5d)
Leaked object at 0x8e8ac08 (size 96, 0x20ef093)
Leaked object at 0x8e8acb0 (size 4, 0x2192e2d)
Leaked object at 0x8e8acf8 (size 20, 0x2193264)
Leaked object at 0x8e8ced0 (size 20, 0x2193264)
Leaked object at 0x8e8cf28 (size 20, 0x2193264)
Leaked object at 0x8e8cf80 (size 20, 0x2193264)
Leaked object at 0x8e8d008 (size 4, 0x21ee6ed)
Leaked object at 0x8e8d050 (size 4, 0x21ee5ed)
Leaked object at 0x8e8d098 (size 36, 0x20eff86)
Leaked object at 0x8e8d100 (size 96, 0x20ef093)
Leaked object at 0x8e8d1a8 (size 80, 0x20f50c2)
Leaked object at 0x8e8d240 (size 80, 0x20f50c2)
Leaked object at 0x8e8d3f8 (size 20, 0x2193264)
Leaked object at 0x8e8d450 (size 20, 0x2193264)
Leaked object at 0x8ea9b18 (size 16, 0x804d5e5)
*** 20 leaks found
delete: freed 0x8e8d450 (size 20, 628 bytes still allocated)
delete: freed 0x8e8d3f8 (size 20, 608 bytes still allocated)
delete: freed 0x8e8cf80 (size 20, 588 bytes still allocated)
delete: freed 0x8e8cf28 (size 20, 568 bytes still allocated)
delete: freed 0x8e8ced0 (size 20, 548 bytes still allocated)
delete: freed 0x8e8acf8 (size 20, 528 bytes still allocated)
delete: freed 0x8e8d240 (size 80, 448 bytes still allocated)
delete: freed 0x8e8d1a8 (size 80, 368 bytes still allocated)
delete: freed 0x8e8d100 (size 96, 272 bytes still allocated)
delete: freed 0x8e8d098 (size 36, 236 bytes still allocated)
delete: freed 0x8e8d050 (size 4, 232 bytes still allocated)
delete: freed 0x8e8d008 (size 4, 228 bytes still allocated)
delete: freed 0x8e8acb0 (size 4, 224 bytes still allocated)
delete: freed 0x8e8ac08 (size 96, 128 bytes still allocated)
delete: freed 0x8e8abc0 (size 4, 124 bytes still allocated)
delete: freed 0x8e8aa18 (size 4, 120 bytes still allocated)
delete: freed 0x8e8ab50 (size 4, 116 bytes still allocated)
delete: freed 0x8e8aaa8 (size 96, 20 bytes still allocated)
delete: freed 0x8e8aa60 (size 4, 16 bytes still allocated)
From francek.prijatelj at siol.net  Wed Sep 16 16:46:37 2009
From: francek.prijatelj at siol.net (=?UTF-8?Q?Fran=C4=8Dek_Prijatelj?=)
Date: Wed Sep 16 16:46:42 2009
Subject: [Harbour] demoqt tests with debug_new - Leaked objects
In-Reply-To: <25474420.post@talk.nabble.com>
References: <004601ca3537$74bda720$5e38f560$@Bisz@t-online.hu>
	<25440044.post@talk.nabble.com> <25467896.post@talk.nabble.com>
	<62C9ACA2-56FE-479A-BDC7-252845F2A4D4@syenar.hu>
	<25468128.post@talk.nabble.com>
	<C614EED8-77D7-4C8C-90F7-A925D75DC08F@syenar.hu>
	<25468576.post@talk.nabble.com>
	<F0FFD855-B361-4C71-9B89-C48C48A44F35@syenar.hu>
	<25474420.post@talk.nabble.com>
Message-ID: <25480346.post@talk.nabble.com>


Hi Pritpal

This behavior is usual for any C++ program.

Here is example:


#include <iostream>

using namespace std;

class TRect
{
public:
  TRect(int t,int l,int w,int h)
    :_t(t),_l(l),_w(w),_h(h)
  {}

  int top()    const { return _t; }
  int left()   const { return _l; }
  int width()  const { return _w; }
  int height() const { return _h; }

private:
  int _t,_l,_w,_h;
};

int main()
{
    TRect *r1= new TRect(20,20,30,400);
    cout << "before delete " << endl;
    cout << r1->top()    << endl;
    cout << r1->left()   << endl;
    cout << r1->width()  << endl;
    cout << r1->height() << endl;

    delete r1;
    cout << "after delete " << endl;
    //r1=0;
    cout << r1->top()    << endl;
    cout << r1->left()   << endl;
    cout << r1->width()  << endl;
    cout << r1->height() << endl;
    return 0;
}

/******** output  
"before delete " 
20
20
30
400   
"after delete " 
0
20
30
400  
************/

Because of that it's recomender to set pointers to 0 (r1=0)

Brgs
Fran?ek



Pritpal Bedi wrote:
> 
> Hello Viktor
> 
> 
> Viktor Szak?ts wrote:
>> 
>> This means QT cannot be used in apps which is supposed
>> to run continuously. (?)
>> 
>> Continuously running GUI apps aren't that typical, but
>> to me it's still a serious concern that and app just
>> eats memory while running. This makes it f.e. unsuitable
>> for any sort of embedded GUI applications (like a kiosk).
>> 
>> Is this a property of QT itself, or the property of
>> Harbour wrappers?
>> 
> 
> It is a property of Qt itself.
> I have made extensive experiments as far as Harbour's 
> parameter passing is concerned and have reached to the 
> conclusion that it is harmless. Experiments with Qt's 
> object destruction has given me weired results.
> For example:
> 
>    oRect := QRect():new( 20,20,30,400 )
>    ? oRect:left()  => 20
>    ? oRect:top()  => 20
>    ? oRect:right() => 30
>    ? oRect:bottom() => 400
> 
>    Qt_QRect_destroy( oRect )
>    ? oRect:left()  => 4534342  ( a long figure )
>    ? oRect:top()  => 8967354  ( another long figure )
>    ? oRect:right() => 30         
>    ? oRect:bottom() => 400
>    
> .cpp
> 
>    HB_FUNC( QT_QRECT_DESTROY )
>    {
>       delete hbqt_par_QRect( 1 );           
>       //  OR/AND
>       hbqt_par_QRect( 1 )->~QRect();
>    }
> 
> So even after destroy, oRect is an active pointer and 
> only firts two slots are pointing to garbase. In theory 
> after destroying it it should raise som error or appln
> must hang, but results are contrary.
>    
> Though I have not given up, YET, on this issue,
> but at the face value ( till now ) it appears we cannot 
> use Harbour-Qt for production level applications.
> 
> NOTE: struggle is still on to overcome it.
> 
> Regards
> Pritpal Bedi    
> 
> 

-- 
View this message in context: http://www.nabble.com/demoqt-tests-with-debug_new---Leaked-objects-tp25434990p25480346.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vszakats at users.sourceforge.net  Wed Sep 16 16:52:13 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep 16 16:52:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12516] trunk/harbour
Message-ID: <E1Mo1U5-0005Tt-EY@c3vjzd1.ch3.sourceforge.com>

Revision: 12516
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12516&view=rev
Author:   vszakats
Date:     2009-09-16 20:52:12 +0000 (Wed, 16 Sep 2009)

Log Message:
-----------
2009-09-16 22:49 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
  * utils/hbmk2/hbmk2.pt_BR.po
  * utils/hbmk2/hbmk2.hu_HU.po
    + Added HBMK_OPTIONS environment variable where options
      can be specified in the same format as in the cmdline.
      This is the supported and recommended way to control
      hbmk2 by envvar.
    + Documented HBMK_OPTION on help screen.
    % Cleaned internal handling of 'legacy' environment
      variables. This means they will be processed in one
      central place and converted to regular cmdline options
      just as if they were specified in HBMK_OPTIONS.
    + Showing screen message if there were any settings read
      from the environment (also showing the actual settings).
      This will make it easy to debug problems caused by
      leftover envvars.
    - Deleted HB_COMPILER and HB_PLATFORM envvar references
      from screen messages. Now these are considered legacy
      and not advertised.
    * Regenerated *.po files.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.po
    trunk/harbour/utils/hbmk2/hbmk2.prg
    trunk/harbour/utils/hbmk2/hbmk2.pt_BR.po


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Wed Sep 16 16:56:54 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 16:57:02 2009
Subject: [Harbour] haiku cpp build failure
In-Reply-To: <20090916201713.GA29233@uran.home.aster.pl>
References: <alpine.GSO.2.00.0909161820050.17989@dawn.royalcomp.hu>
	<97B5B036-D7B2-4DDB-B351-E46CD041FF3E@syenar.hu>
	<alpine.GSO.2.00.0909161958400.17989@dawn.royalcomp.hu>
	<20090916183351.GA24501@uran.home.aster.pl>
	<E7132845-24DE-413C-84CF-4ADC1ECB7FB0@syenar.hu>
	<20090916201713.GA29233@uran.home.aster.pl>
Message-ID: <F04B7015-525A-4C89-B6BA-C23555034B0E@syenar.hu>

Hi Przemek,

> I'm really sorry but I was wrong. I've just tested current SVN
> and default build time CC is preferred.
> I'm "nearly" sure that few weeks ago it was a problem and I had to
> update my build scripts, i.e. OpenWatcom was preferred when I had

This feature works this way since the early days of hbmk2 for
*nix. There are many scenarios, so it's possible you've seen
it in a slightly different one.

> in my envvars:
>
>   export WATCOM="/home/nwe/lng/watcom"
>   export INCLUDE="${WATCOM}/lh"
>   export PATH="${WATCOM}/binl:$PATH"
>
> Now this happens only in pure Harbour build system (make) but I can
> leave with though I'm not sure it's good choice for default behavior
> because we will chose some rather platform exotic compilers if they
> are installed instead of system default one.

If someone added an exotic compiler to the beginning of the PATH
IMO it must have been done for a reason. This is one difference
between hbmk2 and GNU Make, former doesn't do compiler autodetection
in this case, exactly because it's normal to have multiple ones
in PATH on *nix systems. I hope to be able to settle with some
behavior which makes most users happy, and then I'll be able to
sync hbmk2 and GNU Make.

> Current hbmk2 behavior is OK for me - thank you very much and I think
> we should only add support to "inherit" C++ mode from Harbour build
> settings.

I'd resist here. Certainly not a good idea on non-*nix
(additional question: should watcom and msvc built hbmk2
compile in C++ mode by default too?), which makes it rather
odd to implement for *nix only (another additional question:
how to behave in cross-compile mode in this regard?). I've
made some steps which makes it possible to use HB_BUILD_MODE
envvar to control that aspect in a nice way, maybe it could
help to solve this.

> BTW you or Tomaz asked about using OpenWatcom in Linux. Current  
> version
> (1.8) in full installation contains binaries for DOS, WIN, OS2 and
> Linux builds. It's enough to set executable attributes for Linux
> binaries in ${WATCOM}/binl directory.

Thanks, it works like this on all platforms, so I assumed it works
similarly on Linux, but I've yet to install it in my Linux env to
watch it in action. (I have it on DOS and Win, plus setup all
possible cross-platform mode)

>> On non-*nix there is autodetection for most native compilers
>> (some, like pocc64/poccarm are missing yet). If none can be
>> detected, it will look for embedded installations based on
>> target platform. It will also look for embedded installations
>> if user explicitly selected the compiler.
>> You can check the order of detecting different compilers in
>> variables aCOMPDET and aCOMPDET_EMBED.
>> I plan to rework autodetection to solve all current problems
>> in an easier to oversee way, current state is rather organic,
>> and misses some extras we have in GNU Make (although it has
>> others).
>
> Addressing all issues is horrible problem. Now you collected most
> of information so you can try to create some more common and simple
> rules which can be easier to guess/follow by users what I agree is
> very important. Anyhow it's still huge job and thank you very much
> for your all affords and final results which are fantastic.

Thank you for the compliment.

I agree with that and by now we probably know if not all, but
most quirks we have to deal with. Probably time for a refactor :)
Well, I don't plan such thing, but eventually I'd like to touch
at least the autodetection part. Later maybe we can think about
generalizing the internal setup, but that looks quite though.

Brgds,
Viktor

From ice at extreme.hu  Wed Sep 16 16:59:16 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Wed Sep 16 16:59:24 2009
Subject: [Harbour] haiku cpp build failure
In-Reply-To: <20090916201713.GA29233@uran.home.aster.pl>
References: <alpine.GSO.2.00.0909161820050.17989@dawn.royalcomp.hu>
	<97B5B036-D7B2-4DDB-B351-E46CD041FF3E@syenar.hu>
	<alpine.GSO.2.00.0909161958400.17989@dawn.royalcomp.hu>
	<20090916183351.GA24501@uran.home.aster.pl>
	<E7132845-24DE-413C-84CF-4ADC1ECB7FB0@syenar.hu>
	<20090916201713.GA29233@uran.home.aster.pl>
Message-ID: <alpine.GSO.2.00.0909162243480.17989@dawn.royalcomp.hu>

On Wed, 16 Sep 2009, Przemyslaw Czerpak wrote:

hi,

 > I'm really sorry but I was wrong. I've just tested current SVN
 > and default build time CC is preferred.

that is contrary to what i'm experiencing. i've built hb in cpp mode 
(so it was using g++ as the compiler), and if i don't explicitly 
specify "-cpp" to hbmk2, it will call "gcc".

what i'm experiencing is:

tinky:/tmp/hb$ ./bin/harbour -build 2>&1 | fgrep Build
Harbour Build Info
Build options: (C++ mode) 
tinky:/tmp/hb$ ./bin/hbmk2 -trace t.prg 
hbmk2: Processing configuration: /tmp/hb/bin/hbmk.cfg                          
hbmk2: Harbour compiler command (internal):                                    
(/tmp/hb/bin/harbour) -n2 t.prg -i/tmp/hb/include
Harbour 2.0.0beta3 (Rev. 12513)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 't.prg'...
Lines 5, Functions/Procedures 1
Generating C source output to 't.c'... Done.
hbmk2: C compiler command:                                                     
suncc -c  -fast -xnolibmopt -KPIC -I/tmp/hb/include t.c
hbmk2: Linker command:                                                         
suncc t.o   -lhbextern -lhbdebug -lhbvm -lhbrtl -lhblang -lhbcpage [...]

so _even though_ it was built by sunCC, it still calls suncc by 
default. it sunpro seems to overcome this, but this freaks gcc/g++ out 
without the special -lstdc++/supc++ treatment.

my (and i think yours too, and i think viktor's too :), at least 
that's what i gather)  view is that if nothing more specific 
instruction is given to hbmk2 (ie no -cpp, no -comp, no whatever else 
you can tell it what to use), then it should invoke the compiler it 
was compiled with.

 > BTW you or Tomaz asked about using OpenWatcom in Linux. Current version
 > (1.8) in full installation contains binaries for DOS, WIN, OS2 and
 > Linux builds. It's enough to set executable attributes for Linux
 > binaries in ${WATCOM}/binl directory.

yup, my test builds include cross from linux to os2, dos, win and also 
native linux (btw, linux native and os2 cross are still broken :).

-- 
[-]

mkdir /nonexistent
From ice at extreme.hu  Wed Sep 16 17:09:29 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Wed Sep 16 17:09:39 2009
Subject: [Harbour] haiku cpp build failure
In-Reply-To: <F04B7015-525A-4C89-B6BA-C23555034B0E@syenar.hu>
References: <alpine.GSO.2.00.0909161820050.17989@dawn.royalcomp.hu>
	<97B5B036-D7B2-4DDB-B351-E46CD041FF3E@syenar.hu>
	<alpine.GSO.2.00.0909161958400.17989@dawn.royalcomp.hu>
	<20090916183351.GA24501@uran.home.aster.pl>
	<E7132845-24DE-413C-84CF-4ADC1ECB7FB0@syenar.hu>
	<20090916201713.GA29233@uran.home.aster.pl>
	<F04B7015-525A-4C89-B6BA-C23555034B0E@syenar.hu>
Message-ID: <alpine.GSO.2.00.0909162307180.17989@dawn.royalcomp.hu>

On Wed, 16 Sep 2009, Viktor Szak?ts wrote:

 > > Current hbmk2 behavior is OK for me - thank you very much and I think
 > > we should only add support to "inherit" C++ mode from Harbour build
 > > settings.
 > 
 > I'd resist here. Certainly not a good idea on non-*nix
 > (additional question: should watcom and msvc built hbmk2
 > compile in C++ mode by default too?), which makes it rather

hm. i haven't thought about this. you may be right.

maybe it's just gcc/g++ that's the exception here, wrt how it handles 
c/cpp mode linkage? sunpro seems to be able to deal with it, but i 
don't know others. if it's just gcc, then it may worth putting in a 
quirk for it.

-- 
[-]

mkdir /nonexistent
From francek.prijatelj at siol.net  Wed Sep 16 17:11:28 2009
From: francek.prijatelj at siol.net (=?UTF-8?Q?Fran=C4=8Dek_Prijatelj?=)
Date: Wed Sep 16 17:11:34 2009
Subject: [Harbour] demoqt tests with debug_new - Leaked objects
In-Reply-To: <25480346.post@talk.nabble.com>
References: <004601ca3537$74bda720$5e38f560$@Bisz@t-online.hu>
	<25440044.post@talk.nabble.com> <25467896.post@talk.nabble.com>
	<62C9ACA2-56FE-479A-BDC7-252845F2A4D4@syenar.hu>
	<25468128.post@talk.nabble.com>
	<C614EED8-77D7-4C8C-90F7-A925D75DC08F@syenar.hu>
	<25468576.post@talk.nabble.com>
	<F0FFD855-B361-4C71-9B89-C48C48A44F35@syenar.hu>
	<25474420.post@talk.nabble.com> <25480346.post@talk.nabble.com>
Message-ID: <25480744.post@talk.nabble.com>


Hi

By the way, you shuld newer call x->~TXobj directly.
You !!!MUST delete x

Here is explanation

http://www.parashift.com/c++-faq-lite/freestore-mgmt.html#faq-16.9

BRGS
Fran?ek




Fran?ek Prijatelj wrote:
> 
> Hi Pritpal
> 
> This behavior is usual for any C++ program.
> 
> Here is example:
> 
> 
> #include <iostream>
> 
> using namespace std;
> 
> class TRect
> {
> public:
>   TRect(int t,int l,int w,int h)
>     :_t(t),_l(l),_w(w),_h(h)
>   {}
> 
>   int top()    const { return _t; }
>   int left()   const { return _l; }
>   int width()  const { return _w; }
>   int height() const { return _h; }
> 
> private:
>   int _t,_l,_w,_h;
> };
> 
> int main()
> {
>     TRect *r1= new TRect(20,20,30,400);
>     cout << "before delete " << endl;
>     cout << r1->top()    << endl;
>     cout << r1->left()   << endl;
>     cout << r1->width()  << endl;
>     cout << r1->height() << endl;
> 
>     delete r1;
>     cout << "after delete " << endl;
>     //r1=0;
>     cout << r1->top()    << endl;
>     cout << r1->left()   << endl;
>     cout << r1->width()  << endl;
>     cout << r1->height() << endl;
>     return 0;
> }
> 
> /******** output  
> "before delete " 
> 20
> 20
> 30
> 400   
> "after delete " 
> 0
> 20
> 30
> 400  
> ************/
> 
> Because of that it's recomender to set pointers to 0 (r1=0)
> 
> Brgs
> Fran?ek
> 
> 
> 
> Pritpal Bedi wrote:
>> 
>> Hello Viktor
>> 
>> 
>> Viktor Szak?ts wrote:
>>> 
>>> This means QT cannot be used in apps which is supposed
>>> to run continuously. (?)
>>> 
>>> Continuously running GUI apps aren't that typical, but
>>> to me it's still a serious concern that and app just
>>> eats memory while running. This makes it f.e. unsuitable
>>> for any sort of embedded GUI applications (like a kiosk).
>>> 
>>> Is this a property of QT itself, or the property of
>>> Harbour wrappers?
>>> 
>> 
>> It is a property of Qt itself.
>> I have made extensive experiments as far as Harbour's 
>> parameter passing is concerned and have reached to the 
>> conclusion that it is harmless. Experiments with Qt's 
>> object destruction has given me weired results.
>> For example:
>> 
>>    oRect := QRect():new( 20,20,30,400 )
>>    ? oRect:left()  => 20
>>    ? oRect:top()  => 20
>>    ? oRect:right() => 30
>>    ? oRect:bottom() => 400
>> 
>>    Qt_QRect_destroy( oRect )
>>    ? oRect:left()  => 4534342  ( a long figure )
>>    ? oRect:top()  => 8967354  ( another long figure )
>>    ? oRect:right() => 30         
>>    ? oRect:bottom() => 400
>>    
>> .cpp
>> 
>>    HB_FUNC( QT_QRECT_DESTROY )
>>    {
>>       delete hbqt_par_QRect( 1 );           
>>       //  OR/AND
>>       hbqt_par_QRect( 1 )->~QRect();
>>    }
>> 
>> So even after destroy, oRect is an active pointer and 
>> only firts two slots are pointing to garbase. In theory 
>> after destroying it it should raise som error or appln
>> must hang, but results are contrary.
>>    
>> Though I have not given up, YET, on this issue,
>> but at the face value ( till now ) it appears we cannot 
>> use Harbour-Qt for production level applications.
>> 
>> NOTE: struggle is still on to overcome it.
>> 
>> Regards
>> Pritpal Bedi    
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/demoqt-tests-with-debug_new---Leaked-objects-tp25434990p25480744.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Wed Sep 16 17:14:34 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 17:14:42 2009
Subject: [Harbour] haiku cpp build failure
In-Reply-To: <alpine.GSO.2.00.0909162243480.17989@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909161820050.17989@dawn.royalcomp.hu>
	<97B5B036-D7B2-4DDB-B351-E46CD041FF3E@syenar.hu>
	<alpine.GSO.2.00.0909161958400.17989@dawn.royalcomp.hu>
	<20090916183351.GA24501@uran.home.aster.pl>
	<E7132845-24DE-413C-84CF-4ADC1ECB7FB0@syenar.hu>
	<20090916201713.GA29233@uran.home.aster.pl>
	<alpine.GSO.2.00.0909162243480.17989@dawn.royalcomp.hu>
Message-ID: <C00F07A0-6683-48CB-84E8-63F70E8BBF9E@syenar.hu>

Hi,

>> I'm really sorry but I was wrong. I've just tested current SVN
>> and default build time CC is preferred.
>
> that is contrary to what i'm experiencing. i've built hb in cpp mode
> (so it was using g++ as the compiler), and if i don't explicitly
> specify "-cpp" to hbmk2, it will call "gcc".

The compiler (GNU C/C++) is properly selected, but the
*build mode* is not inherited, just like any other Harbour
build options (besides custom compiler flags, which is the
only exception here, but even this could argued upon).

> my (and i think yours too, and i think viktor's too :), at least
> that's what i gather)  view is that if nothing more specific
> instruction is given to hbmk2 (ie no -cpp, no -comp, no whatever else
> you can tell it what to use), then it should invoke the compiler it
> was compiled with.

This wouldn't work out too well for non-*nix compilers,
so unless we want to deepen the differences between platforms
(my goal is the exact opposite), with all the consequences,
plus see my two questions in my answer to Przemek, I'd like
to keep it the way it is now.

I assume sources compiled in C and C++ mode *can* work together,
so we shouldn't force users to change build mode just because
Harbour happens to be built in another mode (C++).

What we should rather try to solve in hbmk2 is how to fix
linkage of objects with mixed C and C++ mode. This would
be far more useful than tweaking default mode.

Notice that even if hbmk2 would inherit build mode, it'd
still be very easy to break it, by simply manually overriding
the default mode, which in some cases may be a necessity to
compile certain sources.

Brgds,
Viktor

From bedipritpal at hotmail.com  Wed Sep 16 17:15:51 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Sep 16 17:15:57 2009
Subject: [Harbour] demoqt tests with debug_new - Leaked objects
In-Reply-To: <000601ca370d$d54f3180$7fed9480$@Bisz@t-online.hu>
References: <004601ca3537$74bda720$5e38f560$@Bisz@t-online.hu>
	<25440044.post@talk.nabble.com> <25467896.post@talk.nabble.com>
	<62C9ACA2-56FE-479A-BDC7-252845F2A4D4@syenar.hu>
	<25468128.post@talk.nabble.com>
	<C614EED8-77D7-4C8C-90F7-A925D75DC08F@syenar.hu>
	<25468576.post@talk.nabble.com>
	<F0FFD855-B361-4C71-9B89-C48C48A44F35@syenar.hu>
	<25474420.post@talk.nabble.com>
	<D21266E2-C3BB-4D44-BAE4-CC94DFA4B74C@syenar.hu>
	<000601ca370d$d54f3180$7fed9480$@Bisz@t-online.hu>
Message-ID: <25480816.post@talk.nabble.com>


Hi 


Bisz Istv?n wrote:
> 
> I executed the following test cases with debug_new:
>  
> Case 1:
> 
>    // With this cpp function
>    // See: leakobj_with_delete.txt
>    HB_FUNC( QT_QRECT_DESTROY )
>    {
>       //hbqt_par_QRect( 1 )->~QRect();
>       delete hbqt_par_QRect( 1 );
>    }
> 
> Case 2:
> 
> 
>    // With this cpp function
>    // See: leakobj_without_delete.txt
>    HB_FUNC( QT_QRECT_DESTROY )
>    {
>       hbqt_par_QRect( 1 )->~QRect();
>       //delete hbqt_par_QRect( 1 );
>    }
> 
> Case 3:
> 
>    // With this cpp function
>    // See: leakobj_with_destructor_and_delete.txt
>    HB_FUNC( QT_QRECT_DESTROY )
>    {
>       hbqt_par_QRect( 1 )->~QRect();
>       delete hbqt_par_QRect( 1 );
>    }
> 
> The resulted log files are attached.
> 
> The reserved heap size at the end goes to zero just in test case 1 and 3.
> 'delete: freed 0x80b5a60 (size 4, 0 bytes still allocated)'.
> Test case 2 shows that QRect (with size 16 bytes) allocated by Qt remains
> on
> the heap. 'delete: freed 0x8e8aa60 (size 4, 16 bytes still allocated).
> 
> Pritpal, could you please insert the delete operator in the destructors
> logic? An another solution is to define a new Delete() method containing
> just the delete operator.
> In any case this second solution will help the further investigations.
> 

I have already implemented case 1.
But still experimenting. It is not the case that the memory is 
release properly at the "END" of the application, I need to have it 
released as soon as an object is "destroyed". 

Hopefully we may find a solution with further investigations.
Keep on your good work of debugging and tips.

BTW which is the best case? 1 or 3 ?

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/demoqt-tests-with-debug_new---Leaked-objects-tp25434990p25480816.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Wed Sep 16 17:17:23 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Sep 16 17:17:28 2009
Subject: [Harbour] demoqt tests with debug_new - Leaked objects
In-Reply-To: <25480744.post@talk.nabble.com>
References: <004601ca3537$74bda720$5e38f560$@Bisz@t-online.hu>
	<25440044.post@talk.nabble.com> <25467896.post@talk.nabble.com>
	<62C9ACA2-56FE-479A-BDC7-252845F2A4D4@syenar.hu>
	<25468128.post@talk.nabble.com>
	<C614EED8-77D7-4C8C-90F7-A925D75DC08F@syenar.hu>
	<25468576.post@talk.nabble.com>
	<F0FFD855-B361-4C71-9B89-C48C48A44F35@syenar.hu>
	<25474420.post@talk.nabble.com> <25480346.post@talk.nabble.com>
	<25480744.post@talk.nabble.com>
Message-ID: <25480835.post@talk.nabble.com>


Hi


Fran?ek Prijatelj wrote:
> 
> By the way, you shuld newer call x->~TXobj directly.
> You !!!MUST delete x
> 
> Here is explanation
> 
> http://www.parashift.com/c++-faq-lite/freestore-mgmt.html#faq-16.9
> 

Thanks for digging deep.
Now exactly this approach I have implemented.
Continue further.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/demoqt-tests-with-debug_new---Leaked-objects-tp25434990p25480835.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From Istvan.Bisz at t-online.hu  Wed Sep 16 17:24:47 2009
From: Istvan.Bisz at t-online.hu (=?utf-8?Q?Bisz_Istv=C3=A1n?=)
Date: Wed Sep 16 17:25:06 2009
Subject: [Harbour] demoqt tests with debug_new - Leaked objects
In-Reply-To: <25480816.post@talk.nabble.com>
References: <004601ca3537$74bda720$5e38f560$@Bisz@t-online.hu>	<25440044.post@talk.nabble.com>
	<25467896.post@talk.nabble.com>	<62C9ACA2-56FE-479A-BDC7-252845F2A4D4@syenar.hu>	<25468128.post@talk.nabble.com>	<C614EED8-77D7-4C8C-90F7-A925D75DC08F@syenar.hu>	<25468576.post@talk.nabble.com>	<F0FFD855-B361-4C71-9B89-C48C48A44F35@syenar.hu>	<25474420.post@talk.nabble.com>	<D21266E2-C3BB-4D44-BAE4-CC94DFA4B74C@syenar.hu>	<000601ca370d$d54f3180$7fed9480$@Bisz@t-online.hu>
	<25480816.post@talk.nabble.com>
Message-ID: <001001ca3714$1e0220d0$5a066270$@Bisz@t-online.hu>

Hi,

As I see now, the best way for test purposing is to have two methods one with destructor as it is now and a second one with the delete operator. In this case it will be possible at 'prg' level to test/design the final destructor for both prg class and Qt native class.

Best regards,
Istv?n 

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of Pritpal Bedi
Sent: 2009. szeptember 16. 23:16
To: harbour@harbour-project.org
Subject: RE: [Harbour] demoqt tests with debug_new - Leaked objects


Hi 


Bisz Istv?n wrote:
> 
> I executed the following test cases with debug_new:
>  
> Case 1:
> 
>    // With this cpp function
>    // See: leakobj_with_delete.txt
>    HB_FUNC( QT_QRECT_DESTROY )
>    {
>       //hbqt_par_QRect( 1 )->~QRect();
>       delete hbqt_par_QRect( 1 );
>    }
> 
> Case 2:
> 
> 
>    // With this cpp function
>    // See: leakobj_without_delete.txt
>    HB_FUNC( QT_QRECT_DESTROY )
>    {
>       hbqt_par_QRect( 1 )->~QRect();
>       //delete hbqt_par_QRect( 1 );
>    }
> 
> Case 3:
> 
>    // With this cpp function
>    // See: leakobj_with_destructor_and_delete.txt
>    HB_FUNC( QT_QRECT_DESTROY )
>    {
>       hbqt_par_QRect( 1 )->~QRect();
>       delete hbqt_par_QRect( 1 );
>    }
> 
> The resulted log files are attached.
> 
> The reserved heap size at the end goes to zero just in test case 1 and 3.
> 'delete: freed 0x80b5a60 (size 4, 0 bytes still allocated)'.
> Test case 2 shows that QRect (with size 16 bytes) allocated by Qt remains
> on
> the heap. 'delete: freed 0x8e8aa60 (size 4, 16 bytes still allocated).
> 
> Pritpal, could you please insert the delete operator in the destructors
> logic? An another solution is to define a new Delete() method containing
> just the delete operator.
> In any case this second solution will help the further investigations.
> 

I have already implemented case 1.
But still experimenting. It is not the case that the memory is 
release properly at the "END" of the application, I need to have it 
released as soon as an object is "destroyed". 

Hopefully we may find a solution with further investigations.
Keep on your good work of debugging and tips.

BTW which is the best case? 1 or 3 ?

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/demoqt-tests-with-debug_new---Leaked-objects-tp25434990p25480816.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Wed Sep 16 17:24:59 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 17:25:13 2009
Subject: [Harbour] haiku cpp build failure
In-Reply-To: <alpine.GSO.2.00.0909162307180.17989@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909161820050.17989@dawn.royalcomp.hu>
	<97B5B036-D7B2-4DDB-B351-E46CD041FF3E@syenar.hu>
	<alpine.GSO.2.00.0909161958400.17989@dawn.royalcomp.hu>
	<20090916183351.GA24501@uran.home.aster.pl>
	<E7132845-24DE-413C-84CF-4ADC1ECB7FB0@syenar.hu>
	<20090916201713.GA29233@uran.home.aster.pl>
	<F04B7015-525A-4C89-B6BA-C23555034B0E@syenar.hu>
	<alpine.GSO.2.00.0909162307180.17989@dawn.royalcomp.hu>
Message-ID: <FAEE2A30-FAC2-4322-ACEA-1153CA3E9D35@syenar.hu>

>>> Current hbmk2 behavior is OK for me - thank you very much and I  
>>> think
>>> we should only add support to "inherit" C++ mode from Harbour build
>>> settings.
>>
>> I'd resist here. Certainly not a good idea on non-*nix
>> (additional question: should watcom and msvc built hbmk2
>> compile in C++ mode by default too?), which makes it rather
>
> hm. i haven't thought about this. you may be right.
>
> maybe it's just gcc/g++ that's the exception here, wrt how it handles
> c/cpp mode linkage? sunpro seems to be able to deal with it, but i
> don't know others. if it's just gcc, then it may worth putting in a
> quirk for it.

This is what I proposed in my last answer to your mail also.

Seems that we'd need to link in stdc++ (or supc++) for all
gcc compilers. Questions: Which one? Does it make any harm
for scenarios when this lib isn't actually needed (pure C)?

By some info found on the net supc++ is a subset of stdc++,
and it can be linked statically. It's rather a hunch than
an educated opinion, but linking supc++ seems to be a better
fit, and I'd guess this wouldn't make any harm when added
to liblist of non C++ programs (few simple tests is mingw
confirmed the latter).

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Sep 16 17:39:01 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 16 17:39:09 2009
Subject: [Harbour] HBZLIB and HBPCRE as part of Harbour shared library
In-Reply-To: <1E6A11DC-461B-4837-8761-B79C4F491E27@syenar.hu>
References: <20090916170149.GA19194@uran.home.aster.pl>
	<1E6A11DC-461B-4837-8761-B79C4F491E27@syenar.hu>
Message-ID: <20090916213901.GA31723@uran.home.aster.pl>

On Wed, 16 Sep 2009, Szak?ts Viktor wrote:

Hi,

> I don't have Harbour running on this platform, but you can
> try changing 'LIBS +=' in lines 24 and 28 of config/dyn.mk
> to 'SYSLIBS +=' and see if it solves it.

I can make such modification but it will not make hbzlib and hbpcre
code relocatable so even if it resolve the problem in this particular
case (I haven't tested) it will not help on architectures where PIC
is required.
BTW HAIKU support library grouping so you can use it in hbmk2.

> We can move logic in source/Makefile + source/dynlib dir one
> level up, although I don't like it too much as it will easily
> encourage to add any contribs to harbour dll which is IMO
> against the idea of a standard dll interface and having well
> separated components, plus it changes the dir layout in a
> way which I feel quite uncomfortable / unclean for some reason.
> The other concern is that zlib and pcre will be present in
> *some* harbour dll builds but not present in others, which
> can create confusion and defeats the idea of standard Harbour
> dll interface. It can also probably cause problems if someone
> wants to link in 3rd party components which *also* exports
> zlib/pcre interface.

Yes it is but if someone forced to use local version for ZLIB
and PCRE then he has good reason for it. I.e. native ports may
not exists or are very seldom installed in some systems.

I resolve the problem using simple patch below without moving
directory structures which for me is not bad option because
I can easy customize harbour shared library for my own use
and create RPMs with such customized version. Otherwise I have
to use some alternative build method when I have to create
such RPMs.

> Possibly we shouldn't reinvent the wheel here, but I don't
> have information on how this problem is handled in other projects.

I do not know any good solution just simply only few projects gives
such wide set of libraries for such many platforms.
But for me an option to force local ZLIB and PCRE as part of Harbour
shared library is quite good solution and I can leave with it.
Patch below makes it automatically when system wide ZLIB or PCRE
libraries are not detected what in some cases is also not perfect
solution. Anyhow sooner or later we begin to add such options
native support for compressed data exchange, i.e. compression
and decompression for some memo fields or TCP/IP streams or
national characters in regular expressions what may force
using ZLIB in nearly all binaries and using own customized
HBPCRE version which understand our VM CPs so we cannot simply
ignore the problem.

> It could be a solution to build separate .dlls from hbpcre
> and hbzlib and link those to final executables. But we're
> missing generic support for such feature yet.
> Or we could force relocatable code for zlib / pcre on all
> platforms / builds.
> ...or any other/better idea?

For me sth like code below is enough but it will be good to
give some control to user to enable or disable such behavior.

BTW why we need:

   ifneq ($(HB_HAS_PCRE),)
      ifneq ($(HB_HAS_PCRE_LOCAL),)
         ...
      endif
   endif

instead of simple:

   ifneq ($(HB_HAS_PCRE_LOCAL),)
      ...
   endif

best regards,
Przemek



Index: harbour/source/Makefile
===================================================================
--- harbour/source/Makefile	(wersja 12515)
+++ harbour/source/Makefile	(kopia robocza)
@@ -104,6 +104,15 @@
          DYNDIRLIST_BASE += source/vm/maindllh
       endif
 
+      ifneq ($(HB_HAS_PCRE),)
+         ifneq ($(HB_HAS_PCRE_LOCAL),)
+            DYNDIRLIST_BASE += external/pcre
+         endif
+      endif
+      ifneq ($(HB_HAS_ZLIB_LOCAL),)
+         DYNDIRLIST_BASE += external/zlib
+      endif
+
       export DYNDIRLIST_BASE
       export DYNNAME_POST
    endif
Index: harbour/config/lib.mk
===================================================================
--- harbour/config/lib.mk	(wersja 12515)
+++ harbour/config/lib.mk	(kopia robocza)
@@ -38,6 +38,15 @@
    hbvmmt \
    hbmaindllh
 
+ifneq ($(HB_HAS_PCRE),)
+   ifneq ($(HB_HAS_PCRE_LOCAL),)
+      HB_DYN_LIBS += hbpcre
+   endif
+endif
+ifneq ($(HB_HAS_ZLIB_LOCAL),)
+   HB_DYN_LIBS += hbzlib
+endif
+
 # Added only for hbpp
 -include $(TOP)$(ROOT)config/$(HB_PLATFORM)/libs.mk
 include $(TOP)$(ROOT)config/$(HB_PLATFORM)/$(HB_COMPILER).mk
From druzus at acn.waw.pl  Wed Sep 16 18:13:36 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 16 18:13:43 2009
Subject: [Harbour] haiku cpp build failure
In-Reply-To: <F04B7015-525A-4C89-B6BA-C23555034B0E@syenar.hu>
References: <alpine.GSO.2.00.0909161820050.17989@dawn.royalcomp.hu>
	<97B5B036-D7B2-4DDB-B351-E46CD041FF3E@syenar.hu>
	<alpine.GSO.2.00.0909161958400.17989@dawn.royalcomp.hu>
	<20090916183351.GA24501@uran.home.aster.pl>
	<E7132845-24DE-413C-84CF-4ADC1ECB7FB0@syenar.hu>
	<20090916201713.GA29233@uran.home.aster.pl>
	<F04B7015-525A-4C89-B6BA-C23555034B0E@syenar.hu>
Message-ID: <20090916221336.GA1435@uran.home.aster.pl>

On Wed, 16 Sep 2009, Szak?ts Viktor wrote:
> If someone added an exotic compiler to the beginning of the PATH

I do not talk about such situation. I'm talking about situations
when some exotic compilers are installed in system paths like
/usr/bin and comes out of the box in some devel distributions
or simply system administrator like it.
As result to create most commonly used binaries we have to
use explicitly HB_COMPILER variable. And in some case like
creating RPMs we always have to set it or in some systems
it will not be possible to create native packages at all.

> IMO it must have been done for a reason. This is one difference
> between hbmk2 and GNU Make, former doesn't do compiler autodetection
> in this case, exactly because it's normal to have multiple ones
> in PATH on *nix systems. I hope to be able to settle with some
> behavior which makes most users happy, and then I'll be able to
> sync hbmk2 and GNU Make.

Now we reach the following effect:
"If you are using some *nix system and you do not exactly know
what comes with default distribution or what admin installed
(or even you unintentionally downloading all devel packages)
then always use HB_COMPILER variable to be sure you create system
compatible binaries. Suggested HB_COMPILER values for different
*nix systems are:
   OS       COMPILER
   ...      ...
"

If it was your goal then you can add such description to INSTALL file
but for me it's not good default behavior.

>> Current hbmk2 behavior is OK for me - thank you very much and I think
>> we should only add support to "inherit" C++ mode from Harbour build
>> settings.
> I'd resist here. Certainly not a good idea on non-*nix
> (additional question: should watcom and msvc built hbmk2
> compile in C++ mode by default too?), which makes it rather
> odd to implement for *nix only (another additional question:
> how to behave in cross-compile mode in this regard?). I've
> made some steps which makes it possible to use HB_BUILD_MODE
> envvar to control that aspect in a nice way, maybe it could
> help to solve this.

I suggest to use it with compilers which needs it, i.e. GCC based
compilers which needs different CRTLs. On some platforms it may not
be possible to link with CRTL C++ code so without inheriting
C++ switch hbmk2 will not work.
Anyhow I do not need such functionality personally so I'm leaving
decision about default settings to you though it will be nice if such
default settings can be modified in hbmk.cfg.

best regards,
Przemek
From gvarona at ec-red.com  Wed Sep 16 18:30:37 2009
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Wed Sep 16 18:27:46 2009
Subject: [Harbour] How do I know if the button was pressed?
Message-ID: <4AB1670D.6010006@ec-red.com>

In this code:
******************************************************
#include "Inkey.ch"
PROCEDURE Main
LOCAL cVar1 := cVar2 := SPAC(10), oPsw, GetList := {}, lBtn := .T.
SET(_SET_EVENTMASK, INKEY_ALL)
MSETCURSOR(.T.)
SETMODE(25,80)
CLS
@ 10, 10 SAY "Entrada1:" GET cVar1 VALID Func1(cVar1,GetList)
@ 11, 10 SAY "Entrada2:" GET cVar2
@ 12, 10 GET lBtn PUSHBUTTON CAPTION " E&xit " STATE {|| ReadKill(.T.)} 
COLOR "W/G,W+/G,G/N,W+/G"
READ
return

FUNCTION Func1(xVar1, xGetList)
? xGetList[3]:buffer
wait
RETURN !EMPTY(xVar1)
*****************************************************
How do I know if the button was pressed?

Buffer is supposed to contain this information, but always returns NIL
The idea is to exit the program by pressing the button, even if this 
cVar1 empty, but the VALID clause does not.

Any help / idea?

TIA
Best Regards
GVS

From harbour.01 at syenar.hu  Wed Sep 16 18:38:03 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 18:38:12 2009
Subject: [Harbour] haiku cpp build failure
In-Reply-To: <20090916221336.GA1435@uran.home.aster.pl>
References: <alpine.GSO.2.00.0909161820050.17989@dawn.royalcomp.hu>
	<97B5B036-D7B2-4DDB-B351-E46CD041FF3E@syenar.hu>
	<alpine.GSO.2.00.0909161958400.17989@dawn.royalcomp.hu>
	<20090916183351.GA24501@uran.home.aster.pl>
	<E7132845-24DE-413C-84CF-4ADC1ECB7FB0@syenar.hu>
	<20090916201713.GA29233@uran.home.aster.pl>
	<F04B7015-525A-4C89-B6BA-C23555034B0E@syenar.hu>
	<20090916221336.GA1435@uran.home.aster.pl>
Message-ID: <74A34652-8577-48B6-8A08-DC80454D92A5@syenar.hu>

> I do not talk about such situation. I'm talking about situations
> when some exotic compilers are installed in system paths like
> /usr/bin and comes out of the box in some devel distributions
> or simply system administrator like it.
> As result to create most commonly used binaries we have to
> use explicitly HB_COMPILER variable. And in some case like
> creating RPMs we always have to set it or in some systems
> it will not be possible to create native packages at all.

Okay, I understand.

It's also a problem for darwin now (clang vs gcc).

>> IMO it must have been done for a reason. This is one difference
>> between hbmk2 and GNU Make, former doesn't do compiler autodetection
>> in this case, exactly because it's normal to have multiple ones
>> in PATH on *nix systems. I hope to be able to settle with some
>> behavior which makes most users happy, and then I'll be able to
>> sync hbmk2 and GNU Make.
>
> Now we reach the following effect:
> "If you are using some *nix system and you do not exactly know
> what comes with default distribution or what admin installed
> (or even you unintentionally downloading all devel packages)
> then always use HB_COMPILER variable to be sure you create system
> compatible binaries. Suggested HB_COMPILER values for different
> *nix systems are:
>   OS       COMPILER
>   ...      ...
> "
>
> If it was your goal then you can add such description to INSTALL file
> but for me it's not good default behavior.

I think it all comes down to the order in which compilers
are detected. The other option is to delete autodetection
on *nix hosts (like it is the case with hbmk2). Deleting might
seem a bit harsh, so maybe we should just tweak the order.
My thought was that watcom/sunpro/icc are currently optional
components on Linux (not available as std pkg AFAIK), so if
it's in the PATH, it's highly likely the user put it there
manually, so that it be used. Same thinking goes for sunpro
on sunos. Or to put in another way: gcc is installed on
these platform (at least on Linux) most of the time, so
if I put it to the top of autodetection, it's very unlikely
the others get ever detected.

So what should be the right thinking here? We can reorder
them any way we like, question which is the most convenient
in real life. (or delete)

This way INSTALL could hold the list of supported C compilers
in order of autodetection preference.

>>> Current hbmk2 behavior is OK for me - thank you very much and I  
>>> think
>>> we should only add support to "inherit" C++ mode from Harbour build
>>> settings.
>> I'd resist here. Certainly not a good idea on non-*nix
>> (additional question: should watcom and msvc built hbmk2
>> compile in C++ mode by default too?), which makes it rather
>> odd to implement for *nix only (another additional question:
>> how to behave in cross-compile mode in this regard?). I've
>> made some steps which makes it possible to use HB_BUILD_MODE
>> envvar to control that aspect in a nice way, maybe it could
>> help to solve this.
>
> I suggest to use it with compilers which needs it, i.e. GCC based
> compilers which needs different CRTLs. On some platforms it may not
> be possible to link with CRTL C++ code so without inheriting
> C++ switch hbmk2 will not work.
> Anyhow I do not need such functionality personally so I'm leaving
> decision about default settings to you though it will be nice if such
> default settings can be modified in hbmk.cfg.

It's possible to control it from hbmk.cfg, using 'cpp=[yes|no|def]'  
line.

I'll try adding supc++ lib to liblist for gcc compilers and
see what happens.

Brgds,
Viktor

From harbour.01 at syenar.hu  Wed Sep 16 18:44:43 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 18:44:52 2009
Subject: [Harbour] HBZLIB and HBPCRE as part of Harbour shared library
In-Reply-To: <20090916213901.GA31723@uran.home.aster.pl>
References: <20090916170149.GA19194@uran.home.aster.pl>
	<1E6A11DC-461B-4837-8761-B79C4F491E27@syenar.hu>
	<20090916213901.GA31723@uran.home.aster.pl>
Message-ID: <1877E987-FB45-4450-9E4B-86CD33C56BB9@syenar.hu>

>> I don't have Harbour running on this platform, but you can
>> try changing 'LIBS +=' in lines 24 and 28 of config/dyn.mk
>> to 'SYSLIBS +=' and see if it solves it.
>
> I can make such modification but it will not make hbzlib and hbpcre
> code relocatable so even if it resolve the problem in this particular
> case (I haven't tested) it will not help on architectures where PIC
> is required.
> BTW HAIKU support library grouping so you can use it in hbmk2.

This was means to solve the lib order problem only.
So does this work, or is it better to add lib grouping?
I'd prefer the former if it makes it link.

[ this will soon be not needed by default, but it'd be great
to have this right anyway. ]

> For me sth like code below is enough but it will be good to
> give some control to user to enable or disable such behavior.
>
> BTW why we need:
>
>   ifneq ($(HB_HAS_PCRE),)
>      ifneq ($(HB_HAS_PCRE_LOCAL),)
>         ...
>      endif
>   endif
>
> instead of simple:
>
>   ifneq ($(HB_HAS_PCRE_LOCAL),)
>      ...
>   endif

Thanks, I'll clean this. It's correct, but it
can be made a little more elegant.

> Index: harbour/source/Makefile
> ===================================================================
> --- harbour/source/Makefile	(wersja 12515)
> +++ harbour/source/Makefile	(kopia robocza)
> @@ -104,6 +104,15 @@
>          DYNDIRLIST_BASE += source/vm/maindllh
>       endif
>
> +      ifneq ($(HB_HAS_PCRE),)
> +         ifneq ($(HB_HAS_PCRE_LOCAL),)
> +            DYNDIRLIST_BASE += external/pcre
> +         endif
> +      endif
> +      ifneq ($(HB_HAS_ZLIB_LOCAL),)
> +         DYNDIRLIST_BASE += external/zlib
> +      endif
> +
>       export DYNDIRLIST_BASE
>       export DYNNAME_POST
>    endif
> Index: harbour/config/lib.mk
> ===================================================================
> --- harbour/config/lib.mk	(wersja 12515)
> +++ harbour/config/lib.mk	(kopia robocza)
> @@ -38,6 +38,15 @@
>    hbvmmt \
>    hbmaindllh
>
> +ifneq ($(HB_HAS_PCRE),)
> +   ifneq ($(HB_HAS_PCRE_LOCAL),)
> +      HB_DYN_LIBS += hbpcre
> +   endif
> +endif
> +ifneq ($(HB_HAS_ZLIB_LOCAL),)
> +   HB_DYN_LIBS += hbzlib
> +endif
> +
> # Added only for hbpp
> -include $(TOP)$(ROOT)config/$(HB_PLATFORM)/libs.mk
> include $(TOP)$(ROOT)config/$(HB_PLATFORM)/$(HB_COMPILER).mk

Looks perfect to me.

The only point I'm out of ideas is to how add option to
disable this behavior. It also needs to be communicated
to hbmk2.

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Sep 16 18:44:55 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 16 18:45:01 2009
Subject: [Harbour] haiku cpp build failure
In-Reply-To: <alpine.GSO.2.00.0909162243480.17989@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909161820050.17989@dawn.royalcomp.hu>
	<97B5B036-D7B2-4DDB-B351-E46CD041FF3E@syenar.hu>
	<alpine.GSO.2.00.0909161958400.17989@dawn.royalcomp.hu>
	<20090916183351.GA24501@uran.home.aster.pl>
	<E7132845-24DE-413C-84CF-4ADC1ECB7FB0@syenar.hu>
	<20090916201713.GA29233@uran.home.aster.pl>
	<alpine.GSO.2.00.0909162243480.17989@dawn.royalcomp.hu>
Message-ID: <20090916224455.GA20218@uran.home.aster.pl>

On Wed, 16 Sep 2009, Tamas TEVESZ wrote:

hi,

> yup, my test builds include cross from linux to os2, dos, win and also 
> native linux (btw, linux native and os2 cross are still broken :).

With default setting yes.
You have to also set:

   export HB_BUILD_EXTDEF=no

to disable code which looks for system header files because enabling
-I/usr/include breaks any watcom builds - it uses own incompatible
header files. It also allows to use hbpcre and hbzlib. The system wide
are not compatible with OpenWatcom.
Then you have to set:

   export HB_BUILD_DLL=no

to disable harbour shared library creation or apply the patch I sent
in message to Viktor which adds hbpcre and hbzlib to harbour shared
library otherwise it fails creating harbour*.so.
Finally you have to set:

   export HB_INC_SQLITE3=no

or add this code to /external/sqlite3/Makefile[59]:

      ifeq ($(HB_COMPILER),watcom)
         ifeq ($(HB_PLATFORM),linux)
            # Watcom Linux builds cannot use system header files
            HB_CFLAGS += -DSQLITE_OS_OTHER
         endif
      endif

and it should be enough.

best regards,
Przemek
From vszakats at users.sourceforge.net  Wed Sep 16 18:59:49 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep 16 18:59:55 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12517] trunk/harbour
Message-ID: <E1Mo3TZ-0004k0-1p@74yxhf1.ch3.sourceforge.com>

Revision: 12517
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12517&view=rev
Author:   vszakats
Date:     2009-09-16 22:59:47 +0000 (Wed, 16 Sep 2009)

Log Message:
-----------
2009-09-17 00:58 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * source/Makefile
  * config/lib.mk
    + Added Przemek's patch to add local hbzlib and hbpcre
      libs to Harbour dynlib.
    ; TODO: Add some ways to disable this because it has some
            drawbacks (it f.e. makes it impossible to link 3rd
            party libs also exporting zlib / pcre interfaces).
            This information needs to be passed to hbmk2, too.
            I don't have any elegant way to solve this problem ATM.

  * utils/hbmk2/hbmk2.prg
    * Changed to only add local hbzlib and hbpcre libs to liblist
      in static mode. (this is needed to support change above).
    + Enabled lib grouping for beos/gcc.
    + Added supc++/supcxx lib to liblist of gcc family compilers.
      This aims to solve link problems when Harbour is built
      in C++, but hbmk2 is used in C mode.

  * contrib/hbqt/hbqts.hbc
  * contrib/hbqt/hbqt.hbc
  * contrib/gtqtc/gtqtcs.hbc
  * contrib/gtqtc/gtqtc.hbc
    - Deleted explicit supc++ libspec. Now it's added by
      hbmk2 automatically.

  * config/dyn.mk
    ! Modified to add local hbpcre and hbzlib to syslib
      list to make it link with beos/haiku.
      Please test/confirm this change.
    - Disabled above logic, since it's not needed.

  * config/global.mk
    + Added autodetection for linux/sunpro, linux/icc,
      darwin/clang, darwin/gcc, darwin/icc.
      On darwin clang became the default, if available.

  * external/sqlite3/Makefile
    + Tweak for linux/watcom. Based on Przemek patch sent to the devlist.

  * config/detfun.mk
  * config/bin.mk
  * config/dyn.mk
  * source/Makefile
  * config/lib.mk
    % Minor modification to HB_HAS_*_LOCAL logic to make
      it safe to use this var without first checking HB_HAS_*.

  ; Please test/review these. I didn't restest everything after above changes.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/bin.mk
    trunk/harbour/config/detfun.mk
    trunk/harbour/config/dyn.mk
    trunk/harbour/config/global.mk
    trunk/harbour/config/lib.mk
    trunk/harbour/contrib/gtqtc/gtqtc.hbc
    trunk/harbour/contrib/gtqtc/gtqtcs.hbc
    trunk/harbour/contrib/hbqt/hbqt.hbc
    trunk/harbour/contrib/hbqt/hbqts.hbc
    trunk/harbour/external/sqlite3/Makefile
    trunk/harbour/source/Makefile
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Wed Sep 16 19:23:30 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 19:23:39 2009
Subject: [Harbour] HBZLIB and HBPCRE as part of Harbour shared library
In-Reply-To: <1877E987-FB45-4450-9E4B-86CD33C56BB9@syenar.hu>
References: <20090916170149.GA19194@uran.home.aster.pl>
	<1E6A11DC-461B-4837-8761-B79C4F491E27@syenar.hu>
	<20090916213901.GA31723@uran.home.aster.pl>
	<1877E987-FB45-4450-9E4B-86CD33C56BB9@syenar.hu>
Message-ID: <04BC1978-07E2-4FA0-BDB9-3505AD09848D@syenar.hu>

>> +ifneq ($(HB_HAS_PCRE),)
>> +   ifneq ($(HB_HAS_PCRE_LOCAL),)
>> +      HB_DYN_LIBS += hbpcre
>> +   endif
>> +endif
>> +ifneq ($(HB_HAS_ZLIB_LOCAL),)
>> +   HB_DYN_LIBS += hbzlib
>> +endif
>> +
>> # Added only for hbpp
>> -include $(TOP)$(ROOT)config/$(HB_PLATFORM)/libs.mk
>> include $(TOP)$(ROOT)config/$(HB_PLATFORM)/$(HB_COMPILER).mk
>
> Looks perfect to me.
>
> The only point I'm out of ideas is to how add option to
> disable this behavior. It also needs to be communicated
> to hbmk2.

Okay so just to document it, above approach has a flaw,
and that was the reason I originally mentioned the need
to rearrange dirs. The flaw is that it will fail to
create harbour dynlib when doing a partial build inside
/source, unless we've previously done a build of hbpcre
/ hbzlib in one way or another, in a separate pass.

Probably we can live with it, but it may be important
to note anyway.

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Sep 16 19:37:58 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 16 19:38:07 2009
Subject: [Harbour] HBZLIB and HBPCRE as part of Harbour shared library
In-Reply-To: <04BC1978-07E2-4FA0-BDB9-3505AD09848D@syenar.hu>
References: <20090916170149.GA19194@uran.home.aster.pl>
	<1E6A11DC-461B-4837-8761-B79C4F491E27@syenar.hu>
	<20090916213901.GA31723@uran.home.aster.pl>
	<1877E987-FB45-4450-9E4B-86CD33C56BB9@syenar.hu>
	<04BC1978-07E2-4FA0-BDB9-3505AD09848D@syenar.hu>
Message-ID: <20090916233758.GA6702@uran.home.aster.pl>

On Thu, 17 Sep 2009, Szak?ts Viktor wrote:
> Okay so just to document it, above approach has a flaw,
> and that was the reason I originally mentioned the need
> to rearrange dirs. The flaw is that it will fail to
> create harbour dynlib when doing a partial build inside
> /source, unless we've previously done a build of hbpcre
> / hbzlib in one way or another, in a separate pass.
> Probably we can live with it, but it may be important
> to note anyway.

You are right that it will not work but we have similar problem
also before because it was not possible to create harbour.dll
without recompiling harbour external/{hbpcre,hbzlib} which were
needed to create final binaries. Now the same is true also on
platforms which allows to create shared libraries with unresolved
references (late binding).
If we begin to use zlib in more places, i.e. for generating
compressed .hrb or .hrl files by compiler then it will not be
possible to even start any compilation without compiling
external/hbzlib if system ZLIB library does not exists. Anyhow
I do not find it as critical. Even now you cannot start compilation
in any directory containing .prg files if harbour compiler was not
compiled before.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Sep 16 19:48:30 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 16 19:48:38 2009
Subject: [Harbour] HBZLIB and HBPCRE as part of Harbour shared library
In-Reply-To: <20090916233758.GA6702@uran.home.aster.pl>
References: <20090916170149.GA19194@uran.home.aster.pl>
	<1E6A11DC-461B-4837-8761-B79C4F491E27@syenar.hu>
	<20090916213901.GA31723@uran.home.aster.pl>
	<1877E987-FB45-4450-9E4B-86CD33C56BB9@syenar.hu>
	<04BC1978-07E2-4FA0-BDB9-3505AD09848D@syenar.hu>
	<20090916233758.GA6702@uran.home.aster.pl>
Message-ID: <138E803F-E92B-4860-825B-B557D39D1E81@syenar.hu>

>> Okay so just to document it, above approach has a flaw,
>> and that was the reason I originally mentioned the need
>> to rearrange dirs. The flaw is that it will fail to
>> create harbour dynlib when doing a partial build inside
>> /source, unless we've previously done a build of hbpcre
>> / hbzlib in one way or another, in a separate pass.
>> Probably we can live with it, but it may be important
>> to note anyway.
>
> You are right that it will not work but we have similar problem
> also before because it was not possible to create harbour.dll
> without recompiling harbour external/{hbpcre,hbzlib} which were
> needed to create final binaries. Now the same is true also on
> platforms which allows to create shared libraries with unresolved
> references (late binding).
> If we begin to use zlib in more places, i.e. for generating
> compressed .hrb or .hrl files by compiler then it will not be
> possible to even start any compilation without compiling
> external/hbzlib if system ZLIB library does not exists. Anyhow
> I do not find it as critical. Even now you cannot start compilation
> in any directory containing .prg files if harbour compiler was not
> compiled before.

Yes, that's right, I agree it's safe to settle on this compromise.

I was about to correct one of my (unrelated to this) replies, so
I stick it here:

on darwin the multiple compiler tool in PATH issue is not present,
since clang isn't put there by default. I'll have to correct
detection logic to look into its default location.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Wed Sep 16 19:58:16 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep 16 19:58:21 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12518] trunk/harbour
Message-ID: <E1Mo4O8-0003ux-95@3kljzd1.ch3.sourceforge.com>

Revision: 12518
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12518&view=rev
Author:   vszakats
Date:     2009-09-16 23:58:15 +0000 (Wed, 16 Sep 2009)

Log Message:
-----------
2009-09-17 01:55 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/global.mk
    ! Fixed clang autodetection on darwin.
    ! Fixed systematic (copy/paste) typos in most 'find_in_path_par' calls.
      (in gentoo mingw and msdosdjgpp autodetection)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/global.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From ice at extreme.hu  Wed Sep 16 20:24:18 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Wed Sep 16 20:24:25 2009
Subject: [Harbour] haiku cpp build failure
In-Reply-To: <20090916224455.GA20218@uran.home.aster.pl>
References: <alpine.GSO.2.00.0909161820050.17989@dawn.royalcomp.hu>
	<97B5B036-D7B2-4DDB-B351-E46CD041FF3E@syenar.hu>
	<alpine.GSO.2.00.0909161958400.17989@dawn.royalcomp.hu>
	<20090916183351.GA24501@uran.home.aster.pl>
	<E7132845-24DE-413C-84CF-4ADC1ECB7FB0@syenar.hu>
	<20090916201713.GA29233@uran.home.aster.pl>
	<alpine.GSO.2.00.0909162243480.17989@dawn.royalcomp.hu>
	<20090916224455.GA20218@uran.home.aster.pl>
Message-ID: <alpine.GSO.2.00.0909170156450.17989@dawn.royalcomp.hu>

On Thu, 17 Sep 2009, Przemyslaw Czerpak wrote:

hi,

 > > yup, my test builds include cross from linux to os2, dos, win and also 
 > > native linux (btw, linux native and os2 cross are still broken :).
 > 
 > With default setting yes.

i've been using the same settings for quite some time. builds used to 
be fine, at one time watcom builds went haywire, BUT, they have been 
fixed just recently, i suspect by one of these last commits (sunos 
builds are still chugging along, we'll see about those in a couple of 
hours).

 > You have to also set:

i'm using fragments like this:

cleanenv
export WATCOM="/opt/ow"
export PATH="$WATCOM/binl:$PATH"
export INCLUDE="$WATCOM/h:$WATCOM/h/os2"
export EDPATH="$WATCOM/eddat"
export HB_PLATFORM=os2
export HB_COMPILER=watcom
export HB_BUILD_EXTDEF=no
export HB_BUILD_MODE=cpp
export HB_INSTALL_PREFIX=$appdir/inst/$HB_PLATFORM/$HB_COMPILER/$HB_BUILD_MODE

showenv > ../log_${HB_PLATFORM}_${HB_COMPILER}_${HB_BUILD_MODE}
make clean && \
        make 2>&1 | tee -a ../log_${HB_PLATFORM}_${HB_COMPILER}_${HB_BUILD_MODE} \
        && make install \
        || touch ../FAIL.${HB_PLATFORM}_${HB_COMPILER}_${HB_BUILD_MODE} \
        && make clean

for a number of combinations.

 > to disable harbour shared library creation or apply the patch I sent
 > in message to Viktor which adds hbpcre and hbzlib to harbour shared
 > library otherwise it fails creating harbour*.so.

i suspect these fixed the builds. i haven't used these options, not 
using them now either.

 > and it should be enough.

it is now. great work.


-- 
[-]

mkdir /nonexistent
From gvarona at ec-red.com  Thu Sep 17 01:21:19 2009
From: gvarona at ec-red.com (gvarona)
Date: Thu Sep 17 01:12:34 2009
Subject: [Harbour] Harbour supports the function MSTATE()?
Message-ID: <20090917052119.19865.qmail@ml110b.qnet.com.pe>

TIA
BestRegard
GVS
---------------------------------------------------------------
EC Red Internet gr@tis
Inscr?bete en www.ec-red.com
From druzus at acn.waw.pl  Thu Sep 17 02:08:38 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 17 02:08:43 2009
Subject: [Harbour] Harbour supports the function MSTATE()?
In-Reply-To: <20090917052119.19865.qmail@ml110b.qnet.com.pe>
References: <20090917052119.19865.qmail@ml110b.qnet.com.pe>
Message-ID: <20090917060838.GA13132@uran.home.aster.pl>

On Thu, 17 Sep 2009, gvarona wrote:
> TIA

LightLib is not supported by Harbour.

best regards,
Przemek
From dmacias at mail.udg.mx  Thu Sep 17 02:17:51 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Sep 17 02:18:14 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
Message-ID: <4AB1D48F.6030400@mail.udg.mx>

Pritpal:

>So the .dbf's are created in d: while indexs .z01's are created
>in the folder where these belong to. Now the question is why this
>behavior ? Przemek ?

>NetIO suggests that "root" of any server will never be allowed to
>be accessed. Am I correct?

>Anyhow, it appears that the NetIO protocol is very useful and is
>working for Web IP's also, and is working smartly.

>BTW I cannot access your server right now.
>I had to leave for somewhere at the time you posted message.

>d:\creative.ram and its subfolders are ok with me.

In your first test running netserver_os2.exe in d:\mydata no one .dbf
file were created and many .z* files were created in d:\mydata and not
in d:\mydata\data. Summary: 0 dbf, many .z* in wrong location

In your second test running netserver_os2.exe in d:\creative.ram many
.dbf files were created in d:\ and no one .z* files were created
No one files were created in d:\creative.ram and subdirectories
Summary: many dbf in wrong location, 0 .z*

Perhaps you have a conflict about where to create .dbf files and where
.z* files and/or is not working as you expected

I suggest you to start with a known behaviour as of netapplctn.prg where
location is stated ("net:data/_tst_") and then with your big system

d:\creative.ram remain clean, I created data directory on it so you can
test netapplctn.prg with different databases, and deleted previous .dbf
files in d:\

netserver_os2.exe is running now in d:\creative.ram\

New IP: 189.162.116.239

As explained before, you can use Clipxnet to browse content of your
database files using:
   http://189.162.116.239/conddb.fml
and information described in previous message

Question remain: How you created .dbf files in d:\ (root dir) when
netserver_os2.exe was running in d:\creative.ram\ ?

David Macias



From druzus at acn.waw.pl  Thu Sep 17 03:08:34 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 17 03:08:40 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
In-Reply-To: <4AB1D48F.6030400@mail.udg.mx>
References: <4AB1D48F.6030400@mail.udg.mx>
Message-ID: <20090917070834.GA30778@uran.home.aster.pl>

On Thu, 17 Sep 2009, David Arturo Macias Corona wrote:

Hi,

>> So the .dbf's are created in d: while indexs .z01's are created
>> in the folder where these belong to. Now the question is why this
>> behavior ? Przemek ?

It should be no difference. HBNETIO knows nothing about file type
or default file location. It simply creates files in places requested
by client.

>> NetIO suggests that "root" of any server will never be allowed to
>> be accessed. Am I correct?

By default NETIO server set as "root" directory the directory
which is returned by HB_DIRBASE(). In most of cases this function
should return absolute path to executed application (NETIO server).
You can test it by simple code:
   proc main()
      ? HB_DIRBASE()
   return
If HB_DIRBASE() doesn't return absolute path then the protection may
not work. In such way I suggest to set root path manually as 3-rd parameter
of NETIO_LISTEN() or NETIO_MTSERVER() functions. Please remember that
setting "" disable protection and client can access whole disk.

In one of last commit I fixed typo which could cause that leading
dir separators were moved before root path, i.e. for root path "c:\dir"
when client was requesting "\\file.xxx" NETIO server was accessing file
"\\c:\dir\file.xxx". I have no idea how it can be interpreted by some
OS-es. Maybe it was possible to use it to exploit the protection.

> Question remain: How you created .dbf files in d:\ (root dir) when
> netserver_os2.exe was running in d:\creative.ram\ ?

They are 4 possible answers:
1. HB_DIRBASE() does not return absolute path on your platform or
   simply returns empty dir. Can you check what it returns?
   Does it contain drive letter?
2. some strange root dir was explicitly set.
3. it was side effect of bug described above and you were using NETIO
   server without my fix (BTW please remember that you have to keep
   server and client version fixed)
4. there is still problem and in some situations (some OS/FS) it's
   possible to break NETIO root dir protection.

best regards,
Przemek
From m.lacecilia at gmail.com  Thu Sep 17 03:19:48 2009
From: m.lacecilia at gmail.com (Maurizio la Cecilia)
Date: Thu Sep 17 03:19:59 2009
Subject: R: [Harbour] How do I know if the button was pressed?
In-Reply-To: <4AB1670D.6010006@ec-red.com>
References: <4AB1670D.6010006@ec-red.com>
Message-ID: <!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAAFQU0gHkkPRNhwpTPGLlcycBAAAAAA==@gmail.com>

I think that when cVar1 get lost his focus and valid clause is evaluated the
pushbutton hit focus but not yet sets the buffer property.
You could try with:

FUNCTION Func1(xVar1, xGetList) 
RETURN xGetList[3]:hasFocus .or. !EMPTY(xVar1) 

Not tested, however, as i don't use cl53 behaviour.
Best regards.
Maurizio la Cecilia               

 

> -----Messaggio originale-----
> Da: Guillermo Varona Silup? [mailto:gvarona@ec-red.com] 
> Inviato: gioved? 17 settembre 2009 0.31
> A: Harbour Project Main Developer List.
> Oggetto: [Harbour] How do I know if the button was pressed?
> 
> In this code:
> ******************************************************
> #include "Inkey.ch"
> PROCEDURE Main
> LOCAL cVar1 := cVar2 := SPAC(10), oPsw, GetList := {}, lBtn := .T.
> SET(_SET_EVENTMASK, INKEY_ALL)
> MSETCURSOR(.T.)
> SETMODE(25,80)
> CLS
> @ 10, 10 SAY "Entrada1:" GET cVar1 VALID Func1(cVar1,GetList)
> @ 11, 10 SAY "Entrada2:" GET cVar2
> @ 12, 10 GET lBtn PUSHBUTTON CAPTION " E&xit " STATE {|| 
> ReadKill(.T.)} 
> COLOR "W/G,W+/G,G/N,W+/G"
> READ
> return
> 
> FUNCTION Func1(xVar1, xGetList)
> ? xGetList[3]:buffer
> wait
> RETURN !EMPTY(xVar1)
> *****************************************************
> How do I know if the button was pressed?
> 
> Buffer is supposed to contain this information, but always returns NIL
> The idea is to exit the program by pressing the button, even if this 
> cVar1 empty, but the VALID clause does not.
> 
> Any help / idea?
> 
> TIA
> Best Regards
> GVS
> 
> 
> 

From jerryfinuliar at operamail.com  Thu Sep 17 03:47:26 2009
From: jerryfinuliar at operamail.com (Jerry Finuliar)
Date: Thu Sep 17 03:47:31 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
Message-ID: <20090917074726.4EE3F448D4@ws5-1.us4.outblaze.com>


Hi Przemek,

Thank you for making NETIO possible. Will directory functions be supported? (e.g. 
mkdir and rmdir) 

I need to scatter my tables for fast access.

Thanks




-- 
_______________________________________________
Surf the Web in a faster, safer and easier way:
Download Opera 9 at http://www.opera.com

Powered by Outblaze
From M.Horodyski at pzuzycie.com.pl  Thu Sep 17 03:53:03 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Sep 17 03:53:12 2009
Subject: [Harbour] Ppo files
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B271@PINK.zycie.pzu>

Please test the /p option in Harbour. 
Very often the resulting file is incomplete.

Regards
Marek Horodyski
From lorenzo.fiorini at gmail.com  Thu Sep 17 04:10:02 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 17 04:10:09 2009
Subject: [Harbour] How to have back pcre and zlib in shared libs
Message-ID: <9257026e0909170110q3522e265y99d4794f6bbcd14d@mail.gmail.com>

if I type hbmk test1.prg I get:

/opt/harbour/lib/libharbour.so: undefined reference to `gzputc'
...
/opt/harbour/lib/libharbour.so: undefined reference to `uncompress'

adding -lz solve the problem.

Is there a configuration to have pcre and zlib "fully" included in the
libharbour.so like before?

I'm not asking to change anything in the svn but simply how should I
change my local repo to get back to a working Harbour.

best regards,
Lorenzo
From sscc at mweb.co.za  Thu Sep 17 04:33:42 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Sep 17 04:33:45 2009
Subject: [Harbour] HBNETIO HB_ReadIni() Support
In-Reply-To: <4AB0B2AF.5010605@gmail.com>
References: <4ab09f1b.8253f10a.6dd8.243eSMTPIN_ADDED@mx.google.com>
	<4AB0B2AF.5010605@gmail.com>
Message-ID: <4AB1F466.6030103@mweb.co.za>

Mario H. Sabado wrote:

> I just want to ask if it is feasible to add HB_ReadIni() 
> support to HBNETIO?

Although I have not used this yet, I think you must just pass the ini file name 
with the "net:" prefix and it will automagically do what you want.

Regards
Alex
From vszakats at users.sourceforge.net  Thu Sep 17 04:43:04 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 17 04:43:10 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12519] trunk/harbour
Message-ID: <E1MoCa0-0005tu-CB@dn4whf1.ch3.sourceforge.com>

Revision: 12519
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12519&view=rev
Author:   vszakats
Date:     2009-09-17 08:43:03 +0000 (Thu, 17 Sep 2009)

Log Message:
-----------
2009-09-17 10:38 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * source/rdd/usrrdd/rdds/arrayrdd.prg
  * contrib/hbct/tests/datetime.prg
  * contrib/xhb/decode.prg
  * contrib/hbsqlit3/tests/hooks.prg
  * contrib/hbsqlit3/tests/backup.prg
  * contrib/hbsqlit3/tests/authoriz.prg
  * contrib/hbblat/blatcls.prg
  * contrib/hbnf/nooccur.prg
  * contrib/hbnf/floptst.prg
  * contrib/hbfimage/tests/fitest.prg
  * contrib/hbgd/tests/gdtestcl.prg
  * contrib/hbgd/tests/counter.prg
  * contrib/hbgd/gdchart.prg
  * contrib/hbgd/gdimage.prg
    * TRUE/FALSE in .prg code changed to .T./.F.

  - contrib/gtwvg/tests/v_calcltr.ico
  + contrib/gtwvg/tests/v_clclt.ico
    * Renamed to short name. (this file isn't used BTW)

  * contrib/hbblat/tests/blattest.prg
  - contrib/hbblat/tests/f_sample1.txt
  + contrib/hbblat/tests/f_sampl1.txt
  - contrib/hbblat/tests/f_subjectline.txt
  + contrib/hbblat/tests/f_subjct.txt
  - contrib/hbblat/tests/f_listtext.txt
  + contrib/hbblat/tests/f_listtx.txt
    * Renamed to short names.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbblat/blatcls.prg
    trunk/harbour/contrib/hbblat/tests/blattest.prg
    trunk/harbour/contrib/hbct/tests/datetime.prg
    trunk/harbour/contrib/hbfimage/tests/fitest.prg
    trunk/harbour/contrib/hbgd/gdchart.prg
    trunk/harbour/contrib/hbgd/gdimage.prg
    trunk/harbour/contrib/hbgd/tests/counter.prg
    trunk/harbour/contrib/hbgd/tests/gdtestcl.prg
    trunk/harbour/contrib/hbnf/floptst.prg
    trunk/harbour/contrib/hbnf/nooccur.prg
    trunk/harbour/contrib/hbsqlit3/tests/authoriz.prg
    trunk/harbour/contrib/hbsqlit3/tests/backup.prg
    trunk/harbour/contrib/hbsqlit3/tests/hooks.prg
    trunk/harbour/contrib/xhb/decode.prg
    trunk/harbour/source/rdd/usrrdd/rdds/arrayrdd.prg

Added Paths:
-----------
    trunk/harbour/contrib/gtwvg/tests/v_clclt.ico
    trunk/harbour/contrib/hbblat/tests/f_listtx.txt
    trunk/harbour/contrib/hbblat/tests/f_sampl1.txt
    trunk/harbour/contrib/hbblat/tests/f_subjct.txt

Removed Paths:
-------------
    trunk/harbour/contrib/gtwvg/tests/v_calcltr.ico
    trunk/harbour/contrib/hbblat/tests/f_listtext.txt
    trunk/harbour/contrib/hbblat/tests/f_sample1.txt
    trunk/harbour/contrib/hbblat/tests/f_subjectline.txt


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Thu Sep 17 04:50:50 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 17 04:50:55 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12520] trunk/harbour
Message-ID: <E1MoChW-00068B-FJ@dn4whf1.ch3.sourceforge.com>

Revision: 12520
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12520&view=rev
Author:   vszakats
Date:     2009-09-17 08:50:40 +0000 (Thu, 17 Sep 2009)

Log Message:
-----------
2009-09-17 10:50 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * include/hbsetup.h
    ! Added __BEOS__ check when detecting HB_OS_BEOS.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/include/hbsetup.h


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Thu Sep 17 05:11:42 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 17 05:11:51 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12521] trunk/harbour
Message-ID: <E1MoD1i-0007lO-3T@74yxhf1.ch3.sourceforge.com>

Revision: 12521
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12521&view=rev
Author:   vszakats
Date:     2009-09-17 09:11:40 +0000 (Thu, 17 Sep 2009)

Log Message:
-----------
2009-09-17 11:11 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  - ERRATA
  * doc/howtosvn.txt
  * INSTALL
  * bin/postinst.cmd
  * bin/postinst.bat
  * package/mpkg_win.nsi
  * package/winuni/mpkg_win_uni.bat
  * package/winuni/mpkg_win_uni.nsi
    + Replaced ERRATA file (which was never updated), with a link
      to bug/feature/etc tracker link in INSTALL.

  * INSTALL
    * Minor improvements.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/bin/postinst.bat
    trunk/harbour/bin/postinst.cmd
    trunk/harbour/doc/howtosvn.txt
    trunk/harbour/package/mpkg_win.nsi
    trunk/harbour/package/winuni/mpkg_win_uni.bat
    trunk/harbour/package/winuni/mpkg_win_uni.nsi

Removed Paths:
-------------
    trunk/harbour/ERRATA


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bedipritpal at hotmail.com  Thu Sep 17 05:19:19 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Sep 17 05:19:25 2009
Subject: [Harbour] HBNETIO - How I tested ...
In-Reply-To: <4AB1D48F.6030400@mail.udg.mx>
References: <4AAF7E9D.2070406@mail.udg.mx> <4AB1D48F.6030400@mail.udg.mx>
Message-ID: <25487839.post@talk.nabble.com>


Hi


David Arturo Macias Corona wrote:
> 
> In your second test running netserver_os2.exe in d:\creative.ram many
> .dbf files were created in d:\ and no one .z* files were created
> No one files were created in d:\creative.ram and subdirectories
> Summary: many dbf in wrong location, 0 .z*
> 

I did not run 2nd time in d:\creative.ram.
Just now I run. Everything seems fine but I cannot reach to 
3rd screen. If you check the folders now, it must contain 
.dbf and corressponding .z01 index files in 
d:\creative.ram  | d:\creative.ram\caccomon .

BTW which changelog you are using to build Harbour 
and netserver.exe ? May be this is the reason as my client 
exe is compiled withour DbRename() changes.

Just let me know and I do the corresponding change.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/Re%3A-HBNETIO---How-I-tested-...-tp25452521p25487839.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Thu Sep 17 05:36:41 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu Sep 17 05:36:48 2009
Subject: [Harbour] bug: SORT /D
Message-ID: <18d502870909170236u4dfc581awe60f8aa984a78a2b@mail.gmail.com>

Hi All,
Found this in our tracker, converted the example to self-contained one:
---
PROCEDURE Main()
   dbCreate( "test", {{ "ITEM", "N", 10, 2 }} )
   USE test
   dbAppend() ; FIELD->ITEM := 5.00
   dbAppend() ; FIELD->ITEM := -5.12
   dbAppend() ; FIELD->ITEM := 6.00
   dbAppend() ; FIELD->ITEM := 7.00
   dbAppend() ; FIELD->ITEM := -5.00
   SORT TO temp ON ITEM /D
   USE temp
   dbEval( {|| QOut( FIELD->ITEM ) } )
   RETURN
---

In Harbour it returns:
---
     -5.12
     -5.00
      7.00
      6.00
      5.00
---

In Clipper:
---
      7.00
      6.00
      5.00
     -5.00
     -5.12
---

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090917/1935d0af/attachment.html
From harbour.01 at syenar.hu  Thu Sep 17 05:38:21 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Thu Sep 17 05:38:28 2009
Subject: [Harbour] Re: bug: SORT /D
In-Reply-To: <18d502870909170236u4dfc581awe60f8aa984a78a2b@mail.gmail.com>
References: <18d502870909170236u4dfc581awe60f8aa984a78a2b@mail.gmail.com>
Message-ID: <18d502870909170238j6c36e3c2h9a5aebbbe911bfb9@mail.gmail.com>

Ops, saw the answer in the tracker a bit too late.Anyway the report is still
valid.

Brgds,
Viktor

On Thu, Sep 17, 2009 at 11:36 AM, Viktor Szak?ts <harbour.01@syenar.hu>wrote:

> Hi All,
> Found this in our tracker, converted the example to self-contained one:
> ---
> PROCEDURE Main()
>    dbCreate( "test", {{ "ITEM", "N", 10, 2 }} )
>    USE test
>    dbAppend() ; FIELD->ITEM := 5.00
>    dbAppend() ; FIELD->ITEM := -5.12
>    dbAppend() ; FIELD->ITEM := 6.00
>    dbAppend() ; FIELD->ITEM := 7.00
>    dbAppend() ; FIELD->ITEM := -5.00
>    SORT TO temp ON ITEM /D
>    USE temp
>    dbEval( {|| QOut( FIELD->ITEM ) } )
>    RETURN
> ---
>
> In Harbour it returns:
> ---
>      -5.12
>      -5.00
>       7.00
>       6.00
>       5.00
> ---
>
> In Clipper:
> ---
>       7.00
>       6.00
>       5.00
>      -5.00
>      -5.12
> ---
>
> Brgds,
> Viktor
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090917/eacd3fbd/attachment.html
From vszakats at users.sourceforge.net  Thu Sep 17 05:58:43 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 17 05:58:49 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12522] trunk/harbour
Message-ID: <E1MoDlD-0001PE-St@d5vjzd1.ch3.sourceforge.com>

Revision: 12522
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12522&view=rev
Author:   vszakats
Date:     2009-09-17 09:58:40 +0000 (Thu, 17 Sep 2009)

Log Message:
-----------
2009-09-17 11:58 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * INSTALL
    + Added darwin/clang to compatibility matrix.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dmacias at mail.udg.mx  Thu Sep 17 06:05:13 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Sep 17 06:05:39 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
Message-ID: <4AB209D9.2090900@mail.udg.mx>

Pritpal:

>I did not run 2nd time in d:\creative.ram.
>Just now I run. Everything seems fine but I cannot reach to
>3rd screen. If you check the folders now, it must contain
>.dbf and corressponding .z01 index files in
>d:\creative.ram  | d:\creative.ram\caccomon .

.dbf are created in root still

Perhaps, as Przemek explained in recent message, is a matter of OS behaviour
Did you checked what you expected in local (LAN) tests ?


These are of root d:\ /od

17/09/09  4:05a            99      0 a---  V661TDC2.dbf
17/09/09  4:06a           682      0 a---  OG_87YTT.dbf
17/09/09  4:06a           579      0 a---  CHECKS.dbf
17/09/09  4:06a            99      0 a---  UHJICONA.dbf
17/09/09  4:06a            99      0 a---  CNF0H00A.dbf
17/09/09  4:07a            99      0 a---  ZXKJD444.dbf
17/09/09  4:07a           163      0 a---  OBKJN7Y7.dbf
17/09/09  4:07a           195      0 a---  VNB39PXG.dbf
17/09/09  4:07a           131      0 a---  PRHGT555.dbf
17/09/09  4:07a           483      0 a---  OXUJHGGF.dbf
17/09/09  4:07a            99      0 a---  CAL01046.dbf
17/09/09  4:07a            99      0 a---  CAL11046.dbf
17/09/09  4:07a           291      0 a---  OBNVCX32.dbf
17/09/09  4:08a           355      0 a---  BRWCON01.dbf
17/09/09  4:08a            99      0 a---  XSDE4231.dbf
17/09/09  4:08a            99      0 a---  CAL00046.dbf
17/09/09  4:08a           227      0 a---  OBGBN7TQ.dbf
17/09/09  4:09a            99      0 a---  GVCX213D.dbf
17/09/09  4:09a           387      0 a---  STD55432.dbf


and these for d:\creative.ram /s /od

Directory of D:\creative.ram

15/09/09  6:09a       904,221      0 a---  netserver_os2.exe
16/09/09  3:42a         <DIR>      0 ----  .
16/09/09  3:42a         <DIR>      0 ----  ..
16/09/09  3:42a         <DIR>      0 ----  cac00001
16/09/09  3:42a         <DIR>      0 ----  caccomon
16/09/09  3:42a         <DIR>      0 ----  sema
16/09/09  3:42a         <DIR>      0 ----  inet
17/09/09  1:08a         <DIR>      0 ----  data
17/09/09  4:02a         3,072      0 a---  V661TDC2.Z01
17/09/09  4:02a         3,072      0 a---  OG_87YTT.Z01
17/09/09  4:02a         4,608      0 a---  CHECKS.Z01
17/09/09  4:03a         3,072      0 a---  UHJICONA.Z01
17/09/09  4:04a         3,072      0 a---  CNF0H00A.Z01
17/09/09  4:04a         3,072      0 a---  ZXKJD444.Z01
17/09/09  4:04a         3,072      0 a---  OBKJN7Y7.Z01
17/09/09  4:04a         6,144      0 a---  VNB39PXG.Z01
17/09/09  4:05a         3,072      0 a---  PRHGT555.Z01
17/09/09  4:05a         4,608      0 a---  OXUJHGGF.Z01
17/09/09  4:07a         3,072      0 a---  CAL01046.Z01
17/09/09  4:07a         3,072      0 a---  CAL11046.Z01
17/09/09  4:07a         3,072      0 a---  OBNVCX32.Z01
17/09/09  4:08a         4,608      0 a---  BRWCON01.Z01
17/09/09  4:08a         3,072      0 a---  XSDE4231.Z01
17/09/09  4:08a         3,072      0 a---  CAL00046.Z01
17/09/09  4:08a         3,072      0 a---  OBGBN7TQ.Z01
17/09/09  4:09a         3,072      0 a---  GVCX213D.Z01
17/09/09  4:09a         3,072      0 a---  STD55432.Z01
        27 file(s)     970,269 bytes used

Directory of D:\creative.ram\cac00001

16/09/09  3:42a         <DIR>      0 ----  .
16/09/09  3:42a         <DIR>      0 ----  ..
         2 file(s)           0 bytes used

Directory of D:\creative.ram\caccomon

16/09/09  3:42a         <DIR>      0 ----  .
16/09/09  3:42a         <DIR>      0 ----  ..
17/09/09  4:08a            99      0 a---  ZX14240D.dbf
17/09/09  4:08a         3,072      0 a---  ZX14240D.Z01
17/09/09  4:09a         1,923      0 a---  VBGSVXXX.dbf
17/09/09  4:10a        10,752      0 a---  VBGSVXXX.Z01
         6 file(s)      15,846 bytes used

Directory of D:\creative.ram\sema

16/09/09  3:42a         <DIR>      0 ----  .
16/09/09  3:42a         <DIR>      0 ----  ..
         2 file(s)           0 bytes used

Directory of D:\creative.ram\inet

16/09/09  3:42a         <DIR>      0 ----  .
16/09/09  3:42a         <DIR>      0 ----  ..
         2 file(s)           0 bytes used

Directory of D:\creative.ram\data

17/09/09  1:08a         <DIR>      0 ----  .
17/09/09  1:08a         <DIR>      0 ----  ..



>BTW which changelog you are using to build Harbour
>and netserver.exe ? May be this is the reason as my client
>exe is compiled withour DbRename() changes.

>Just let me know and I do the corresponding change.

  * $Id: ChangeLog 12439 2009-09-08 09:13:47Z vszakats $
2009-09-08 11:13 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)

David Macias



From lorenzo.fiorini at gmail.com  Thu Sep 17 06:11:45 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 17 06:11:52 2009
Subject: [Harbour] Re: How to have back pcre and zlib in shared libs
In-Reply-To: <9257026e0909170110q3522e265y99d4794f6bbcd14d@mail.gmail.com>
References: <9257026e0909170110q3522e265y99d4794f6bbcd14d@mail.gmail.com>
Message-ID: <9257026e0909170311p1122ad2do5ed73e0a3488a122@mail.gmail.com>

On Thu, Sep 17, 2009 at 10:10 AM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com> wrote:

> Is there a configuration to have pcre and zlib "fully" included in the
> libharbour.so like before?

I've found that:

1) change

export HB_HAS_ZLIB       := yes
export HB_HAS_ZLIB_LOCAL := yes
export HB_HAS_PCRE       := yes
export HB_HAS_PCRE_LOCAL := yes

in config/detect.mk

2) add hbzip and hbpcre to HB_EXTERNALLIBS

3) restore

#   echo "Making ${full_lib_name}..."
#   ${hb_mkdyn} ${full_lib_name} ${LIBS} ${linker_options}
#   if [ "${LIBS}" != "${LIBSMT}" ]; then
#       echo "Making ${full_lib_name_mt}..."
#       ${hb_mkdyn} ${full_lib_name_mt} ${LIBSMT} ${linker_mtoptions}
${linker_options}
#   fi

in hb-func.sh does the trick.

best regards,
Lorenzo
From bedipritpal at hotmail.com  Thu Sep 17 06:19:05 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Sep 17 06:19:12 2009
Subject: [Harbour] HBNETIO - How I tested ...
In-Reply-To: <4AB209D9.2090900@mail.udg.mx>
References: <4AAF7E9D.2070406@mail.udg.mx> <4AB209D9.2090900@mail.udg.mx>
Message-ID: <25488592.post@talk.nabble.com>


Hi


David Arturo Macias Corona wrote:
> 
> .dbf are created in root still
> 
> Perhaps, as Przemek explained in recent message, is a matter of OS
> behaviour
> Did you checked what you expected in local (LAN) tests ?
> 

Now I know what's the problem.
It is path issue when creating and using.
When creating it is like net:\checks.dbf
while using it is net:checks.dbf.

Can you download current SVN and compile netserver.prg and run it as 
netserver.exe 63000 0.0.0.0 d:\creative.ram

I have recompiled my appln with current SVN and 
now I cannot connect to your server. 

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/Re%3A-HBNETIO---How-I-tested-...-tp25452521p25488592.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Thu Sep 17 06:24:26 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 17 06:24:35 2009
Subject: [Harbour] Re: How to have back pcre and zlib in shared libs
In-Reply-To: <9257026e0909170311p1122ad2do5ed73e0a3488a122@mail.gmail.com>
References: <9257026e0909170110q3522e265y99d4794f6bbcd14d@mail.gmail.com>
	<9257026e0909170311p1122ad2do5ed73e0a3488a122@mail.gmail.com>
Message-ID: <2E6B32F1-D327-494F-A499-F5CA2D75E25F@syenar.hu>

> I've found that:
>
> 1) change
>
> export HB_HAS_ZLIB       := yes
> export HB_HAS_ZLIB_LOCAL := yes
> export HB_HAS_PCRE       := yes
> export HB_HAS_PCRE_LOCAL := yes
>
> in config/detect.mk
>
> 2) add hbzip and hbpcre to HB_EXTERNALLIBS
>
> 3) restore
>
> #   echo "Making ${full_lib_name}..."
> #   ${hb_mkdyn} ${full_lib_name} ${LIBS} ${linker_options}
> #   if [ "${LIBS}" != "${LIBSMT}" ]; then
> #       echo "Making ${full_lib_name_mt}..."
> #       ${hb_mkdyn} ${full_lib_name_mt} ${LIBSMT} ${linker_mtoptions}
> ${linker_options}
> #   fi
>
> in hb-func.sh does the trick.

I can't speak of hbmk script errors you mention in your
first mail, but above changes effectively break detection
code and overwrite GNU Make dynlib generation, so pls
don't commit it.

> Is there a configuration to have pcre and zlib "fully" included in the
> libharbour.so like before?

We've discussed that the whole yesterday evening on the
list, and now end result is committed. With current Harbour
SVN, you need to set HB_INC_ZLIB=local and HB_INC_PCRE=local
to force such behavior.

Brgds,
Viktor

From kadziola at tlen.pl  Thu Sep 17 06:30:44 2009
From: kadziola at tlen.pl (Jaroslaw Kadziola)
Date: Thu Sep 17 06:31:01 2009
Subject: [Harbour] bug: SORT /D
In-Reply-To: <18d502870909170236u4dfc581awe60f8aa984a78a2b@mail.gmail.com>
References: <18d502870909170236u4dfc581awe60f8aa984a78a2b@mail.gmail.com>
Message-ID: <954479227.20090917123044@tlen.pl>

Hi,

VS> Hi All,
VS> Found this in our tracker, converted the example to self-contained one:
VS> ---
VS> PROCEDURE Main()
VS>    dbCreate( "test", {{ "ITEM", "N", 10, 2 }} )
VS>    USE test
VS>    dbAppend() ; FIELD->ITEM := 5.00
VS>    dbAppend() ; FIELD->ITEM := -5.12
VS>    dbAppend() ; FIELD->ITEM := 6.00
VS>    dbAppend() ; FIELD->ITEM := 7.00
VS>    dbAppend() ; FIELD->ITEM := -5.00
VS>    SORT TO temp ON ITEM /D
VS>    USE temp
VS>    dbEval( {|| QOut( FIELD->ITEM ) } )
VS>    RETURN
VS> ---

VS> In Harbour it returns:
VS> ---
VS>      -5.12
VS>      -5.00
VS>       7.00
VS>       6.00
VS>       5.00
VS> ---

VS> In Clipper:
VS> ---
VS>       7.00
VS>       6.00
VS>       5.00
VS>      -5.00
VS>      -5.12
VS> ---

 

I was submitter one year ago :)

Instead SORT i use sequence :

INDEX On ..
Copy To  ..

-- 
Regards,
 Jaroslaw Kadziola

From itamarlins at bol.com.br  Thu Sep 17 06:29:07 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Thu Sep 17 06:31:18 2009
Subject: [Harbour] HBNETIO side server.
Message-ID: <h8t34i$hq4$1@ger.gmane.org>

Hi!
The side of server, what is necessary ?

Maybe dummy question but...

Best regards,
Itamar M. Lins Jr.



From vszakats at users.sourceforge.net  Thu Sep 17 06:36:59 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 17 06:37:04 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12523] trunk/harbour
Message-ID: <E1MoEMF-0000l8-CU@dn4whf1.ch3.sourceforge.com>

Revision: 12523
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12523&view=rev
Author:   vszakats
Date:     2009-09-17 10:36:52 +0000 (Thu, 17 Sep 2009)

Log Message:
-----------
2009-09-17 12:35 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  - bin/pack_src.sh
  + mpkg_src.sh
    * Moved and renamed to align with rest of pkg creation scripts.
      (this should also go to package dir once in the future)

  * source/common/hbver.c
    * Converted decimal version numbers to hex in BCC guards.
    + Added BCC version detections for old (pre-5.x) versions.
      (Borrowed from xhb/Miguel Angel Marchuet)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/common/hbver.c

Added Paths:
-----------
    trunk/harbour/mpkg_src.sh

Removed Paths:
-------------
    trunk/harbour/bin/pack_src.sh


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From mhsabado at gmail.com  Thu Sep 17 06:47:34 2009
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Thu Sep 17 06:47:44 2009
Subject: [Harbour] Re: BNETIO HB_ReadIni() Support
In-Reply-To: <4ab20a23.0e08c00a.629c.ffffe3a5SMTPIN_ADDED@mx.google.com>
References: <4ab20a23.0e08c00a.629c.ffffe3a5SMTPIN_ADDED@mx.google.com>
Message-ID: <4AB213C6.4030304@gmail.com>

Hi Alex,
> Message: 2
> Date: Thu, 17 Sep 2009 10:33:42 +0200
> From: Alex Strickland <sscc@mweb.co.za>
> Subject: Re: [Harbour] HBNETIO HB_ReadIni() Support
> To: "Harbour Project Main Developer List."
> 	<harbour@harbour-project.org>
> Message-ID: <4AB1F466.6030103@mweb.co.za>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
> Mario H. Sabado wrote:
>
>   
>> I just want to ask if it is feasible to add HB_ReadIni() 
>> support to HBNETIO?
>>     
>
> Although I have not used this yet, I think you must just pass the ini file name 
> with the "net:" prefix and it will automagically do what you want.
>
> Regards
> Alex
>
>   
I just tried it and it WORKS!  Thank you for hinting it to me.

Best regards,
Mario

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090917/74a4fb32/attachment.html
From lorenzo.fiorini at gmail.com  Thu Sep 17 06:51:10 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 17 06:51:17 2009
Subject: [Harbour] Re: How to have back pcre and zlib in shared libs
In-Reply-To: <2E6B32F1-D327-494F-A499-F5CA2D75E25F@syenar.hu>
References: <9257026e0909170110q3522e265y99d4794f6bbcd14d@mail.gmail.com>
	<9257026e0909170311p1122ad2do5ed73e0a3488a122@mail.gmail.com>
	<2E6B32F1-D327-494F-A499-F5CA2D75E25F@syenar.hu>
Message-ID: <9257026e0909170351o411fce75n76440679253b29a8@mail.gmail.com>

On Thu, Sep 17, 2009 at 12:24 PM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:

> I can't speak of hbmk script errors you mention in your
> first mail, but above changes effectively break detection
> code and overwrite GNU Make dynlib generation, so pls
> don't commit it.

Sure.

> We've discussed that the whole yesterday evening on the
> list, and now end result is committed. With current Harbour
> SVN, you need to set HB_INC_ZLIB=local and HB_INC_PCRE=local
> to force such behavior.

Gulp! I've completely missed it.

Many thanks.

best regards,
Lorenzo
From vszakats at users.sourceforge.net  Thu Sep 17 07:00:59 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 17 07:01:10 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12524] trunk/harbour
Message-ID: <E1MoEjT-0001NX-QG@74yxhf1.ch3.sourceforge.com>

Revision: 12524
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12524&view=rev
Author:   vszakats
Date:     2009-09-17 11:00:58 +0000 (Thu, 17 Sep 2009)

Log Message:
-----------
2009-09-17 13:00 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * bin/hb-func.sh
  * config/beos/libs.mk
  * config/global.mk
  * config/bsd/libs.mk
  * config/darwin/libs.mk
  * config/hpux/libs.mk
  * config/dos/djgpp.mk
  * config/linux/libs.mk
  * config/sunos/libs.mk
    * Renamed two variables to be in sync with latest changes:
      HB_CRS_LIB -> HB_LIBNAME_CURSES
      HB_SLN_LIB -> HB_LIBNAME_SLANG
        (this one is not honored by GNU Make system)
    ; TOFIX: Honor HB_LIBNAME_SLANG in GNU Make system? Is that
             needed in some cases?

  * config/dos/djgpp.mk
    + Synced system lib/libpath logic with libs.mk found on
      other platforms.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/hb-func.sh
    trunk/harbour/config/beos/libs.mk
    trunk/harbour/config/bsd/libs.mk
    trunk/harbour/config/darwin/libs.mk
    trunk/harbour/config/dos/djgpp.mk
    trunk/harbour/config/global.mk
    trunk/harbour/config/hpux/libs.mk
    trunk/harbour/config/linux/libs.mk
    trunk/harbour/config/sunos/libs.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Thu Sep 17 07:15:47 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 17 07:15:56 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12525] trunk/harbour
Message-ID: <E1MoExn-0001hN-Uj@74yxhf1.ch3.sourceforge.com>

Revision: 12525
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12525&view=rev
Author:   vszakats
Date:     2009-09-17 11:15:46 +0000 (Thu, 17 Sep 2009)

Log Message:
-----------
2009-09-17 13:14 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * source/rtl/gtcrs/Makefile
  * source/rtl/gttrm/Makefile
  * source/rtl/gtsln/Makefile
  * config/global.mk
    % Deleted dedicated (redundant) make level settings:
      - HB_GPM_NOICE_DISABLE=yes
        It should be replaced with HB_USER_CFLAGS=-DHB_GPM_NOICE_DISABLE
        Notice this setting was only effective in gtsln (yet it was passed to two other GTs).
      - HB_GT_CRS_BCEHACK=yes
        It should be replaced with HB_USER_CFLAGS=-DHB_GT_CRS_BCEHACK
      - HB_NCURSES_194=yes
        It should be replaced with HB_USER_CFLAGS=-DHB_NCURSES_194
    ; TODO: Change logic in bin/hb-func.sh to lookup user flags for -DHB_NCURSES_194,
            instead of processing dedicated HB_NCURSES_194 variable. I'm unsure
            which variable to check here for user flags.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/detect.mk
    trunk/harbour/config/global.mk
    trunk/harbour/source/rtl/gtcrs/Makefile
    trunk/harbour/source/rtl/gtsln/Makefile
    trunk/harbour/source/rtl/gttrm/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Thu Sep 17 07:52:47 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 17 07:52:52 2009
Subject: [Harbour] Ppo files
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B271@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B271@PINK.zycie.pzu>
Message-ID: <20090917115246.GA13061@uran.home.aster.pl>

On Thu, 17 Sep 2009, Horodyski Marek (PZUZ) wrote:
> Please test the /p option in Harbour. 
> Very often the resulting file is incomplete.

I haven't heard about such situation and I quite often use /p.
Can you present any example?

best regards,
Przemek
From dmacias at mail.udg.mx  Thu Sep 17 07:59:45 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Sep 17 08:00:12 2009
Subject: [Harbour] Harbour under OS/2 - eCS 12510 - 12525
Message-ID: <4AB224B1.4050603@mail.udg.mx>

Viktor:

>> 'pGT->pFuncTable->GetScrChar' differ in signedness

>This should be fixed now, pls retry.

Warning has gone, thanks

Build/run fine with gcc433
  * $Id: ChangeLog 12525 2009-09-17 11:15:46Z vszakats $
  2009-09-17 13:14 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)


Updated info:

Creating netserver.exe, netiosrv.exe, ... generate many warnings, which
does not appear before

.exe files are created and run fine


NOTE: in position 'xyz' exist something which prevent copy/paste, so I
deleted ' ' and replaced with 'xyz'

---------------------

[E:\harbour909d\harbour\contrib\hbnetio\tests]..\..\..\bin\os2\gcc\hbmk2.exe 

netiosrv 2>info.txt
hbmk2: Processing environment options: -platform=os2 -compiler=gcc
hbmk2: Processing local make script: hbmk.hbm

info.txt
========
Harbour 2.0.0beta3 (Rev. 12522)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 'netiosrv.prg'...

Lines 21, Functions/Procedures 1
Generating C source output to 'netiosrv.c'... Done.
emxomf warning: Undefined stabs type 182 referenced
emxomf info: parsing sym no.676 type=1 at char 'xyz' in position 12:
context:p182
emxomf warning: Cycle detected by make_type.
emxomf info: parsing sym no.675 type=160 at char 'xyz' in position 12:
context:p182
emxomf warning: Undefined stabs type 173 referenced
emxomf info: parsing sym no.380 type=64 at char 'xyz' in position 7:
di:p173
emxomf warning: Cycle detected by make_type.
emxomf info: parsing sym no.379 type=160 at char 'xyz' in position 7:
di:p173
emxomf warning: Undefined stabs type 176 referenced
emxomf info: parsing sym no.868 type=64 at char 'xyz' in position 8:
dpi:p176
emxomf warning: Cycle detected by make_type.
emxomf info: parsing sym no.867 type=160 at char 'xyz' in position 8:
dpi:p176
emxomf warning: Cycle detected by make_type.
emxomf info: parsing sym no.1334 type=160 at char 'xyz' in position 7:
di:p173
emxomf warning: Cycle detected by make_type.
emxomf info: parsing sym no.1923 type=160 at char 'xyz' in position 7:
di:p173
emxomf warning: Cycle detected by make_type.
emxomf info: parsing sym no.2236 type=160 at char 'xyz' in position 7:
di:p173


---------------------

David Macias



From druzus at acn.waw.pl  Thu Sep 17 08:00:11 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 17 08:00:19 2009
Subject: [Harbour] HBNETIO side server.
In-Reply-To: <h8t34i$hq4$1@ger.gmane.org>
References: <h8t34i$hq4$1@ger.gmane.org>
Message-ID: <20090917120011.GB13061@uran.home.aster.pl>

On Thu, 17 Sep 2009, Itamar Lins wrote:
> The side of server, what is necessary ?

Compile and execute:
   harbour/contrib/hbnetio/utils/netiosrv.prg

best regards,
Przemek
From dmacias at mail.udg.mx  Thu Sep 17 08:00:01 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Sep 17 08:00:24 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
Message-ID: <4AB224C1.8020802@mail.udg.mx>

Pritpal:

>Now I know what's the problem.
>It is path issue when creating and using.
>When creating it is like net:\checks.dbf
>while using it is net:checks.dbf.

:-)

>Can you download current SVN and compile netserver.prg and run it as
>netserver.exe 63000 0.0.0.0 d:\creative.ram

You are confusing

netserver.prg used to create netserver_os2.exe does not have a third
parameter, and belong to your message "HBNETIO - How I tested ..."
I was talking allways of this

netiosrv.prg have a third parameter, and belong to your message "HBNETIO
- A Case Study"
I have not touched it


>I have recompiled my appln with current SVN and
>now I cannot connect to your server.

I created Harbour with
  * $Id: ChangeLog 12525 2009-09-17 11:15:46Z vszakats $
  2009-09-17 13:14 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)


and created netiosrv_os2.exe

I cleaned d:\creative.ram directories (and .dbf in d:\ ) and server is
running as:

  netiosrv_os2.exe 63000 0.0.0.0 d:\creative.ram


As explained before, you can review your files using Clipxnet
Example:
  DBF: Base de datos: d:\creative.ram\checks.dbf

-----------------------------
This machine are running Clipxnet too so you can review your files using:
   http://189.162.116.239/conddb.fml

and using for example:
  DBF: Base de datos: d:\creative.ram\myfile.dbf

Index file, order, RDD, ... are optional
(  Archivo indice:, DBF: Orden controlador:,  DBF: Controlador RDD: )

You can use in Filtro/WHERE: an expression for filter, enclosed in
parenthesis ( "myfilter" )
-----------------------------


David Macias



From druzus at acn.waw.pl  Thu Sep 17 08:05:57 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 17 08:06:03 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12525] trunk/harbour
In-Reply-To: <E1MoExn-0001hN-Uj@74yxhf1.ch3.sourceforge.com>
References: <E1MoExn-0001hN-Uj@74yxhf1.ch3.sourceforge.com>
Message-ID: <20090917120557.GC13061@uran.home.aster.pl>

On Thu, 17 Sep 2009, vszakats@users.sourceforge.net wrote:

Hi,

>       - HB_NCURSES_194=yes
>         It should be replaced with HB_USER_CFLAGS=-DHB_NCURSES_194
>     ; TODO: Change logic in bin/hb-func.sh to lookup user flags for -DHB_NCURSES_194,
>             instead of processing dedicated HB_NCURSES_194 variable. I'm unsure
>             which variable to check here for user flags.

Please remove any references to ncurses1.94.
I do not think that anyone try to use yet such old and customized
curses versions.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Sep 17 08:06:15 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 17 08:06:27 2009
Subject: [Harbour] Harbour under OS/2 - eCS 12510 - 12525
In-Reply-To: <4AB224B1.4050603@mail.udg.mx>
References: <4AB224B1.4050603@mail.udg.mx>
Message-ID: <C1890A5B-114B-44A6-B746-929923E4CF79@syenar.hu>

Hi David,

> NOTE: in position 'xyz' exist something which prevent copy/paste, so I
> deleted ' ' and replaced with 'xyz'
>
> ---------------------
>
> [E:\harbour909d\harbour\contrib\hbnetio\tests]..\..\..\bin\os2\gcc 
> \hbmk2.exe
> netiosrv 2>info.txt
> hbmk2: Processing environment options: -platform=os2 -compiler=gcc
> hbmk2: Processing local make script: hbmk.hbm
>
> info.txt
> ========
> Harbour 2.0.0beta3 (Rev. 12522)
> Copyright (c) 1999-2009, http://www.harbour-project.org/
> Compiling 'netiosrv.prg'...

Could you repost output with -trace switch to see what exactly gets  
executed?

Brgds,
Viktor

From vszakats at users.sourceforge.net  Thu Sep 17 08:11:00 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 17 08:11:07 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12526] trunk/harbour
Message-ID: <E1MoFpE-0001h9-VR@3kljzd1.ch3.sourceforge.com>

Revision: 12526
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12526&view=rev
Author:   vszakats
Date:     2009-09-17 12:10:59 +0000 (Thu, 17 Sep 2009)

Log Message:
-----------
2009-09-17 14:10 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * bin/hb-func.sh
  * source/rtl/gtcrs/gtcrs.c
  * source/rtl/gtcrs/gtcrs.h
  * config/detect.mk
    - Deleted HB_NCURSES_194 references.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/hb-func.sh
    trunk/harbour/config/detect.mk
    trunk/harbour/source/rtl/gtcrs/gtcrs.c
    trunk/harbour/source/rtl/gtcrs/gtcrs.h


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dmacias at mail.udg.mx  Thu Sep 17 08:41:21 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Sep 17 08:41:45 2009
Subject: [Harbour] Harbour under OS/2 - eCS 12510 - 12525
Message-ID: <4AB22E71.9040703@mail.udg.mx>

Viktor:

>Could you repost output with -trace switch to see what exactly gets
>executed?

News seem to be:
  -lsupc++

----------------
[E:\harbour909d\harbour\contrib\hbnetio\tests]..\..\..\bin\os2\gcc\hbmk2.exe 

-trace netiosrv 2>info2.txt
hbmk2: Processing environment options: -platform=os2 -compiler=gcc
hbmk2: Processing local make script: hbmk.hbm
hbmk2: Harbour compiler command (internal):
(..\..\..\bin\os2\gcc\harbour.exe) -n2 netiosrv.prg -i..\..\..\include
hbmk2: C compiler command:
gcc.exe -c -Zomf -O3 -DTCPV40HDRS -DHB_FM_STATISTICS_OFF
-I..\..\..\include netiosrv.c E:\var\temp\hbmk_afpvdq.c
hbmk2: Linker command:
gcc.exe -Zomf netiosrv.o hbmk_afpvdq.o  -Le:\usr\lib\tcpipv4  -lhbnetio
-lhbextern -lhbdebug -lhbvmmt -lhbrtl -lhblang -lhbcpage -lgtcgi -lgtpca
-lgtstd -lgtos2
  -lhbrdd -lhbuddall -lhbusrrdd -lrddntx -lrddcdx -lrddnsx -lrddfpt
-lhbrdd -lhbhsx -lhbsix -lhbrtl -lhbvmmt -lhbmacro -lhbcplr -lhbpp
-lhbcommon -lsocket -lsupc++  -o netiosrv.exe -L..\..\..\lib\os2\gcc

----------------

David Macias



From druzus at acn.waw.pl  Thu Sep 17 08:42:03 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 17 08:42:08 2009
Subject: [Harbour] HBNETIO HB_ReadIni() Support
In-Reply-To: <4AB1F466.6030103@mweb.co.za>
References: <4ab09f1b.8253f10a.6dd8.243eSMTPIN_ADDED@mx.google.com>
	<4AB0B2AF.5010605@gmail.com> <4AB1F466.6030103@mweb.co.za>
Message-ID: <20090917124203.GA29809@uran.home.aster.pl>

On Thu, 17 Sep 2009, Alex Strickland wrote:
>> I just want to ask if it is feasible to add HB_ReadIni() support to 
>> HBNETIO?
> Although I have not used this yet, I think you must just pass the ini file 
> name with the "net:" prefix and it will automagically do what you want.

It does not yet.
Now only code which uses internally hb_file*() functions can be redirected
to user defined IO API. All core RDDs use hb_file*() functions so they will
work with NETIO. hb_ini*() functions internally use FOPEN()/FCREATE() which
still operates on raw file handles so canno be redirected to user defined
IO API.
In the future I plan to add full support for virtual file handles so
all functions will support it. Here is entry I added to harbour/TODO
long time ago:

   Assign to: <nobody>
   Detail...: Add support for virtual file handles and registering some
              meta handles so it will be possible to make:
                 h := fopen( "gzip:/tmp/myarchive.gz", FO_WRITE )
                 fwrite( h, cData )
                 fclose( h )
              or:
                 h := fopen( "tcp:some.host:port", FO_WRITE )
                 ...
              or:
                 h := fopen( "|lpr -PLaserJet", FO_WRITE )
                 ...
              or:
                 h := fopen( "gunzip /tmp/myarchive.gz|", FO_READ )
                 ...
              etc.
   Status...: Open.

Anyone will be able to create new alternative file IO, i.e. someone
can register code which allows to transfer files via FTP, i.e.:

   hSrc := fopen( "ftp:192.168.1.53:user:pass:/dir/file.txt", FO_READ )
   if hSrc != F_ERROR
      while ( n := fread( hSrc, @buf, len( buf ) ) ) > 0
         fwrite( hDst, buf, len )
      enddo
      fclose( hSrc )
   endif

Of course some alternative IO APIs may not support all functionality
which exists in local file systems, i.e. fseek() will not work for
streams but it's not a problem - they will simply return errors.

Now I want to see how netio will work and decide if I should add new
set of functions like:
   hb_fopen(), hb_fcreate(), hb_fclose(), hb_fread(), ...
or change existing one fopen(), fcreate(), fclose(), fread(), ...
to internally operate on hb_file*() API.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Sep 17 08:42:48 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 17 08:42:53 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12526] trunk/harbour
In-Reply-To: <E1MoFpE-0001h9-VR@3kljzd1.ch3.sourceforge.com>
References: <E1MoFpE-0001h9-VR@3kljzd1.ch3.sourceforge.com>
Message-ID: <20090917124247.GA22404@uran.home.aster.pl>

On Thu, 17 Sep 2009, vszakats@users.sourceforge.net wrote:
> 2009-09-17 14:10 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>   * bin/hb-func.sh
>   * source/rtl/gtcrs/gtcrs.c
>   * source/rtl/gtcrs/gtcrs.h
>   * config/detect.mk
>     - Deleted HB_NCURSES_194 references.

thank you,

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Sep 17 08:47:40 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 17 08:47:49 2009
Subject: [Harbour] Harbour under OS/2 - eCS 12510 - 12525
In-Reply-To: <4AB22E71.9040703@mail.udg.mx>
References: <4AB22E71.9040703@mail.udg.mx>
Message-ID: <61C1FF18-580F-4D21-94AE-5C1383277F10@syenar.hu>

>> Could you repost output with -trace switch to see what exactly gets
>> executed?
>
> News seem to be:
> -lsupc++

Okay, that explains. I don't understand what's happening
there, but the easy option is to simply remove that lib for
OS/2. Next thing to check is whether hbmk2 stills works
in (default) C mode when Harbour is built using HB_BUILD_MODE=cpp
option.

I'd be great if you could make such test after next commit.

Brgds,
Viktor

From druzus at acn.waw.pl  Thu Sep 17 08:47:43 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 17 08:47:54 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
In-Reply-To: <20090917074726.4EE3F448D4@ws5-1.us4.outblaze.com>
References: <20090917074726.4EE3F448D4@ws5-1.us4.outblaze.com>
Message-ID: <20090917124743.GB22404@uran.home.aster.pl>

On Thu, 17 Sep 2009, Jerry Finuliar wrote:

Hi,

> Thank you for making NETIO possible. Will directory functions be supported? (e.g. 
> mkdir and rmdir) 
> I need to scatter my tables for fast access.

Such functionality will be available in final version of alternative
IO APIs. It will be possible to redirect any operations but now only
functionality used by core RDD code is supported.

best regards,
Przemek
From vszakats at users.sourceforge.net  Thu Sep 17 08:51:13 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 17 08:51:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12527] trunk/harbour
Message-ID: <E1MoGS9-0002e1-JW@3kljzd1.ch3.sourceforge.com>

Revision: 12527
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12527&view=rev
Author:   vszakats
Date:     2009-09-17 12:51:12 +0000 (Thu, 17 Sep 2009)

Log Message:
-----------
2009-09-17 14:50 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    - Deleted supc++ lib from os2/gcc targets.
      It causes warnings like this:
      ---
      emxomf warning: Undefined stabs type 182 referenced
      emxomf info: parsing sym no.676 type=1 at char 'xyz' in position 12:context:p182
      emxomf warning: Cycle detected by make_type.
      ---
    ; TODO: Check if C++ built Harbour works with hbmk2 in (default) C mode.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From niki at synel.co.il  Thu Sep 17 08:53:33 2009
From: niki at synel.co.il (Chen Kedem)
Date: Thu Sep 17 08:55:57 2009
Subject: [Harbour] FW: [ harbour-project-Bugs-2860643 ] Duplicated functions
 in Harbour libs 
In-Reply-To: <E1MoGN4-0003DP-0n@3bkjzd1.ch3.sourceforge.com>
References: <E1MoGN4-0003DP-0n@3bkjzd1.ch3.sourceforge.com>
Message-ID: <1A07FEDC778C3E4AA417F089511F859C1D7A237D03@Mail-yoq.SYNEL-COMPANY.LTD>

Just forwarding this from the SF bug tracker.

  Chen.


________________________________________
From: SourceForge.net [noreply@sourceforge.net]
Sent: 17 September 2009 15:45
To: noreply@sourceforge.net
Subject: [ harbour-project-Bugs-2860643 ] Duplicated  functions in Harbour libs

Bugs item #2860643, was opened at 2009-09-17 12:45
Message generated for change (Tracker Item Submitted) made by nobody
You can respond by visiting:
https://sourceforge.net/tracker/?func=detail&atid=100681&aid=2860643&group_id=681

Please note that this message will contain a full copy of the comment thread,
including the initial issue submission, for this request,
not just the latest update.
Category: Other
Group: None
Status: Open
Resolution: None
Priority: 5
Private: No
Submitted By: Nobody/Anonymous (nobody)
Assigned to: Nobody/Anonymous (nobody)
Summary: Duplicated  functions in Harbour libs

Initial Comment:
Hi, guys. After compiling my MiniGUI application I get this output:
c:\hmg\Harbour\lib/libhbct.a(dattime2.o):dattime2.c:(.text+0x2b0): multiple definition of `HB_FUN_DMY'
c:\hmg\Harbour\lib/libhbclipsm.a(date.o):date.c:(.text+0x120): first defined here
c:\hmg\Harbour\lib/libhbct.a(dattime2.o):dattime2.c:(.text+0x520): multiple definition of `HB_FUN_MDY'
c:\hmg\Harbour\lib/libhbclipsm.a(date.o):date.c:(.text+0x0): first defined here
c:\hmg\Harbour\lib/libhbct.a(dattime2.o):dattime2.c:(.text+0x720): multiple definition of `HB_FUN_ADDMONTH'
c:\hmg\Harbour\lib/libhbclipsm.a(date.o):date.c:(.text+0x2f0): first defined here

The duplicated functions are both within Harbour libraries. It's possible to delete the functions of one of the referred libraries to solve the problem?
Thanks so much by your attention!
Regards,
Jorge.

----------------------------------------------------------------------
From druzus at acn.waw.pl  Thu Sep 17 09:03:05 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 17 09:03:11 2009
Subject: [Harbour] Harbour under OS/2 - eCS 12510 - 12525
In-Reply-To: <61C1FF18-580F-4D21-94AE-5C1383277F10@syenar.hu>
References: <4AB22E71.9040703@mail.udg.mx>
	<61C1FF18-580F-4D21-94AE-5C1383277F10@syenar.hu>
Message-ID: <20090917130305.GA27732@uran.home.aster.pl>

On Thu, 17 Sep 2009, Szak?ts Viktor wrote:
>>> Could you repost output with -trace switch to see what exactly gets
>>> executed?
>> News seem to be:
>> -lsupc++
> Okay, that explains. I don't understand what's happening
> there, but the easy option is to simply remove that lib for
> OS/2. Next thing to check is whether hbmk2 stills works
> in (default) C mode when Harbour is built using HB_BUILD_MODE=cpp
> option.
> I'd be great if you could make such test after next commit.

Such unconditional linking -lsupc++ may cause also some other problems.
GCC can be installed without G++ and supc++ library is part of G++.
F.e. in my system MinGW32 cross build and gcc4.4 (the default is 4.3)
does not contain C++ compilers and cannot be used with current hbmk2.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Sep 17 09:10:18 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 17 09:10:27 2009
Subject: [Harbour] FW: [ harbour-project-Bugs-2860643 ] Duplicated
	functions in Harbour libs 
In-Reply-To: <1A07FEDC778C3E4AA417F089511F859C1D7A237D03@Mail-yoq.SYNEL-COMPANY.LTD>
References: <E1MoGN4-0003DP-0n@3bkjzd1.ch3.sourceforge.com>
	<1A07FEDC778C3E4AA417F089511F859C1D7A237D03@Mail-yoq.SYNEL-COMPANY.LTD>
Message-ID: <9E1A671F-845C-4A4C-959E-FE38D38F7F14@syenar.hu>

The easy solution is not to mix these two libraries, or
at least to use date functions from only one of them.

The difficult solution is to move each colliding functions
into separate source files. But even this may not solve
user problems, as it will be difficult to control which one
is actually used in final app.

Renaming / deleting them is not an option as both libs
implement existing functions with these exact names, but
with different (and incompatible) functionality.

Brgds,
Viktor

On 2009 Sep 17, at 14:53, Chen Kedem wrote:

> Just forwarding this from the SF bug tracker.
>
>  Chen.
>
>
> ________________________________________
> From: SourceForge.net [noreply@sourceforge.net]
> Sent: 17 September 2009 15:45
> To: noreply@sourceforge.net
> Subject: [ harbour-project-Bugs-2860643 ] Duplicated  functions in  
> Harbour libs
>
> Bugs item #2860643, was opened at 2009-09-17 12:45
> Message generated for change (Tracker Item Submitted) made by nobody
> You can respond by visiting:
> https://sourceforge.net/tracker/?func=detail&atid=100681&aid=2860643&group_id=681
>
> Please note that this message will contain a full copy of the  
> comment thread,
> including the initial issue submission, for this request,
> not just the latest update.
> Category: Other
> Group: None
> Status: Open
> Resolution: None
> Priority: 5
> Private: No
> Submitted By: Nobody/Anonymous (nobody)
> Assigned to: Nobody/Anonymous (nobody)
> Summary: Duplicated  functions in Harbour libs
>
> Initial Comment:
> Hi, guys. After compiling my MiniGUI application I get this output:
> c:\hmg\Harbour\lib/libhbct.a(dattime2.o):dattime2.c:(.text+0x2b0):  
> multiple definition of `HB_FUN_DMY'
> c:\hmg\Harbour\lib/libhbclipsm.a(date.o):date.c:(.text+0x120): first  
> defined here
> c:\hmg\Harbour\lib/libhbct.a(dattime2.o):dattime2.c:(.text+0x520):  
> multiple definition of `HB_FUN_MDY'
> c:\hmg\Harbour\lib/libhbclipsm.a(date.o):date.c:(.text+0x0): first  
> defined here
> c:\hmg\Harbour\lib/libhbct.a(dattime2.o):dattime2.c:(.text+0x720):  
> multiple definition of `HB_FUN_ADDMONTH'
> c:\hmg\Harbour\lib/libhbclipsm.a(date.o):date.c:(.text+0x2f0): first  
> defined here
>
> The duplicated functions are both within Harbour libraries. It's  
> possible to delete the functions of one of the referred libraries to  
> solve the problem?
> Thanks so much by your attention!
> Regards,
> Jorge.
>
> ----------------------------------------------------------------------
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Sep 17 09:10:59 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 17 09:11:07 2009
Subject: [Harbour] Harbour under OS/2 - eCS 12510 - 12525
In-Reply-To: <20090917130305.GA27732@uran.home.aster.pl>
References: <4AB22E71.9040703@mail.udg.mx>
	<61C1FF18-580F-4D21-94AE-5C1383277F10@syenar.hu>
	<20090917130305.GA27732@uran.home.aster.pl>
Message-ID: <2A54066E-0D67-47F1-808D-AA482B68B8DC@syenar.hu>

Then I'll delete them and let users bother with this matter.

Brgds,
Viktor

On 2009 Sep 17, at 15:03, Przemyslaw Czerpak wrote:

> On Thu, 17 Sep 2009, Szak?ts Viktor wrote:
>>>> Could you repost output with -trace switch to see what exactly gets
>>>> executed?
>>> News seem to be:
>>> -lsupc++
>> Okay, that explains. I don't understand what's happening
>> there, but the easy option is to simply remove that lib for
>> OS/2. Next thing to check is whether hbmk2 stills works
>> in (default) C mode when Harbour is built using HB_BUILD_MODE=cpp
>> option.
>> I'd be great if you could make such test after next commit.
>
> Such unconditional linking -lsupc++ may cause also some other  
> problems.
> GCC can be installed without G++ and supc++ library is part of G++.
> F.e. in my system MinGW32 cross build and gcc4.4 (the default is 4.3)
> does not contain C++ compilers and cannot be used with current hbmk2.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vszakats at users.sourceforge.net  Thu Sep 17 09:16:58 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 17 09:17:04 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12528] trunk/harbour
Message-ID: <E1MoGr4-0005l4-3W@dn4whf1.ch3.sourceforge.com>

Revision: 12528
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12528&view=rev
Author:   vszakats
Date:     2009-09-17 13:16:55 +0000 (Thu, 17 Sep 2009)

Log Message:
-----------
2009-09-17 15:13 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    - Deleted supc++ lib. hbmk2 won't be able to solve every existing
      compiler configuration problems, so in this case users will have to deal
      with this special case and supply supc++ or supcxx or stdc++
      lib if it's required, or manually select C++ mode for hbmk2 if
      that better solves local needs.
      Case closed from my side.

  * contrib/hbqt/hbqts.hbc
  * contrib/hbqt/hbqt.hbc
  * contrib/gtqtc/gtqtcs.hbc
  * contrib/gtqtc/gtqtc.hbc
    + Readded supc++ libs to .hbc files, where needed.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/gtqtc/gtqtc.hbc
    trunk/harbour/contrib/gtqtc/gtqtcs.hbc
    trunk/harbour/contrib/hbqt/hbqt.hbc
    trunk/harbour/contrib/hbqt/hbqts.hbc
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dmacias at mail.udg.mx  Thu Sep 17 09:19:01 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Sep 17 09:19:19 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
Message-ID: <4AB23745.4060405@mail.udg.mx>

Przemek:

I have two network cards in my OS/2 machine
  192.168.1.110
  192.168.2.64
and default route
  192.168.2.1

so I am using
  netiosrv_os2.exe 63000 192.168.2.64 d:\creative.ram

What mean/happen with 0.0.0.0 if I use ?
  netiosrv_os2.exe 63000 0.0.0.0 d:\creative.ram

David Macias



From sscc at mweb.co.za  Thu Sep 17 09:29:16 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Sep 17 09:29:17 2009
Subject: [Harbour] HBNETIO HB_ReadIni() Support
In-Reply-To: <20090917124203.GA29809@uran.home.aster.pl>
References: <4ab09f1b.8253f10a.6dd8.243eSMTPIN_ADDED@mx.google.com>	<4AB0B2AF.5010605@gmail.com>
	<4AB1F466.6030103@mweb.co.za>
	<20090917124203.GA29809@uran.home.aster.pl>
Message-ID: <4AB239AC.6030303@mweb.co.za>

Przemyslaw Czerpak wrote:

> It does not yet.

Thanks for the correction, this is a little worrying then:

 > I just tried it and it WORKS!  Thank you for hinting it to me.

Take note Mario, and revisit your test.

> Now I want to see how netio will work and decide if I should add new
> set of functions like:
>    hb_fopen(), hb_fcreate(), hb_fclose(), hb_fread(), ...
> or change existing one fopen(), fcreate(), fclose(), fread(), ...
> to internally operate on hb_file*() API.

I like the latter, it is so elegant, and I guess the performance impact is 
negligible as currently all these operations are I/O bound.

Regards
Alex

From josemisu at yahoo.com.ar  Thu Sep 17 09:30:25 2009
From: josemisu at yahoo.com.ar (Jose Miguel)
Date: Thu Sep 17 09:30:34 2009
Subject: [Harbour] hbvpdf.lib with image
Message-ID: <52384.4162.qm@web32801.mail.mud.yahoo.com>

Hello

The library hbvpdf.lib
When printing an image and the file does not exist, does not close the pdf and gives error
What are the sources that supports?and what types of pages?
Saludos
Jose Miguel

Ejemplos y programas para Harbour + MiniGUI Extended 
http://www.embalajesterra.com/misdoc/programas/programas.html




      Yahoo! Cocina

Encontra las mejores recetas con Yahoo! Cocina.


http://ar.mujer.yahoo.com/cocina/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090917/799c8acb/attachment-0001.html
From vszakats at users.sourceforge.net  Thu Sep 17 09:38:33 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 17 09:38:39 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12529] trunk/harbour
Message-ID: <E1MoHBx-0002Mj-Sr@bj8yhf1.ch3.sourceforge.com>

Revision: 12529
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12529&view=rev
Author:   vszakats
Date:     2009-09-17 13:38:32 +0000 (Thu, 17 Sep 2009)

Log Message:
-----------
2009-09-17 15:38 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * contrib/hbnetio/utils/netiosrv.prg
    + Added header.
    + Showing server configuration.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbnetio/utils/netiosrv.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Thu Sep 17 10:38:04 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Thu Sep 17 10:38:10 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12530] trunk/harbour
Message-ID: <E1MoI7Y-0006q5-51@d5vjzd1.ch3.sourceforge.com>

Revision: 12530
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12530&view=rev
Author:   druzus
Date:     2009-09-17 14:38:02 +0000 (Thu, 17 Sep 2009)

Log Message:
-----------
2009-09-17 16:37 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/external/libpng/Makefile
    * disabled when XCC compiler is used - it cannot compile it

  * harbour/contrib/hbnetio/netiomt.prg
    * updated comment with NETIO_MTSERVER() syntax

  * harbour/contrib/hbnetio/netiosrv.c
    * minor formatting

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbnetio/netiomt.prg
    trunk/harbour/contrib/hbnetio/netiosrv.c
    trunk/harbour/external/libpng/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From M.Horodyski at pzuzycie.com.pl  Thu Sep 17 10:41:48 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Sep 17 10:42:03 2009
Subject: [Harbour] Ppo files
In-Reply-To: <20090917115246.GA13061@uran.home.aster.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B3B9@PINK.zycie.pzu>

 

>-----Original Message-----
>From: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl] 
>Sent: Thursday, September 17, 2009 1:53 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] Ppo files
>
>On Thu, 17 Sep 2009, Horodyski Marek (PZUZ) wrote:
>> Please test the /p option in Harbour. 
>> Very often the resulting file is incomplete.
>
>I haven't heard about such situation and I quite often use /p.
>Can you present any example?
>
>best regards,
>Przemek

Yes.
Pls test with include in body function.
For example test.prg :

Proc main()
#include 'inkey.ch'

Cls
@ 12, 10 say 'cos tam'

Inkey( 0)
Return

After harbour test.prg /p, in test.ppo is only :

Proc main()

Its all.

Regards,
Marek Horodyski
From lorenzo.fiorini at gmail.com  Thu Sep 17 10:44:04 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 17 10:44:11 2009
Subject: [Harbour] hb_sendmail issues under linux
Message-ID: <9257026e0909170744q550f6f87od17cd513a4d706c5@mail.gmail.com>

In contrib/hbtip/sendmail.prg these lines:

      IF !( Right( cBody, 2 ) == hb_osNewLine() )
         cBody += hb_osNewLine()
      ENDIF

should be:

      IF !( Right( cBody, 2 ) == Chr( 13 ) + Chr( 10 ) )
         cBody += Chr( 13 ) + Chr( 10 )
      ENDIF

the standard requires Cr+Lf and servers like QMail reject messages
with ONLY Lf reporting:

451 See http://pobox.com/~djb/docs/smtplf.html

while others like Postfix accept them but report:

354 End data with <CR><LF>.<CR><LF>

Using Chr( 13 ) + Chr( 10 ) seems to fix the send with QMail but
Postfix still reports 354 ...

Any comments is welcome.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Thu Sep 17 10:48:17 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 17 10:48:24 2009
Subject: [Harbour] Ppo files
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B3B9@PINK.zycie.pzu>
References: <20090917115246.GA13061@uran.home.aster.pl>
	<FFAFD6EA63A3FC4784FBDA52BE7A7C950280B3B9@PINK.zycie.pzu>
Message-ID: <9257026e0909170748p3505c77doca359bfc3780d4e7@mail.gmail.com>

On Thu, Sep 17, 2009 at 4:41 PM, Horodyski Marek (PZUZ)
<M.Horodyski@pzuzycie.com.pl> wrote:

> After harbour test.prg /p, in test.ppo is only :
>
> Proc main()
>
> Its all.

I get:

Compiling 'tppo.prg' and generating preprocessed output to 'tppo.ppo'...

tppo.prg:2: error: F0029  Can't open #include file 'inkey.ch'

If I provide the right -I<path> it works as expected.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Thu Sep 17 10:51:30 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 17 10:51:39 2009
Subject: [Harbour] hb_sendmail issues under linux
In-Reply-To: <9257026e0909170744q550f6f87od17cd513a4d706c5@mail.gmail.com>
References: <9257026e0909170744q550f6f87od17cd513a4d706c5@mail.gmail.com>
Message-ID: <DCBD9F13-EBB1-47D3-A575-F8B2437DDE04@syenar.hu>

Hi Lorenzo,

Seems okay to me.

Current solution is wrong anyway, since Right( , 2 )
will rarely be equal to hb_osNewLine() on systems with
1 char long EOLs.

Pls commit it.

Brgds,
Viktor

On 2009 Sep 17, at 16:44, Lorenzo Fiorini wrote:

> In contrib/hbtip/sendmail.prg these lines:
>
>      IF !( Right( cBody, 2 ) == hb_osNewLine() )
>         cBody += hb_osNewLine()
>      ENDIF
>
> should be:
>
>      IF !( Right( cBody, 2 ) == Chr( 13 ) + Chr( 10 ) )
>         cBody += Chr( 13 ) + Chr( 10 )
>      ENDIF
>
> the standard requires Cr+Lf and servers like QMail reject messages
> with ONLY Lf reporting:
>
> 451 See http://pobox.com/~djb/docs/smtplf.html
>
> while others like Postfix accept them but report:
>
> 354 End data with <CR><LF>.<CR><LF>
>
> Using Chr( 13 ) + Chr( 10 ) seems to fix the send with QMail but
> Postfix still reports 354 ...
>
> Any comments is welcome.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From gvarona at ec-red.com  Thu Sep 17 11:02:22 2009
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Thu Sep 17 10:59:26 2009
Subject: R: [Harbour] How do I know if the button was pressed?
In-Reply-To: <!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAAFQU0gHkkPRNhwpTPGLlcycBAAAAAA==@gmail.com>
References: <4AB1670D.6010006@ec-red.com>
	<!&!AAAAAAAAAAAYAAAAAAAAAEPH+zHhktcRvfQAgK18GwzCgAAAEAAAAFQU0gHkkPRNhwpTPGLlcycBAAAAAA==@gmail.com>
Message-ID: <4AB24F7E.5080302@ec-red.com>

Thank you very much Mauricio.
I solved the problem with a mixture of MLEFTDOWN(), MROW() and MCOL()

Best Regarsd
GVS


Maurizio la Cecilia escribi?:
> I think that when cVar1 get lost his focus and valid clause is evaluated the
> pushbutton hit focus but not yet sets the buffer property.
> You could try with:
>
> FUNCTION Func1(xVar1, xGetList) 
> RETURN xGetList[3]:hasFocus .or. !EMPTY(xVar1) 
>
> Not tested, however, as i don't use cl53 behaviour.
> Best regards.
> Maurizio la Cecilia               
>
>  
>
>   
>> -----Messaggio originale-----
>> Da: Guillermo Varona Silup? [mailto:gvarona@ec-red.com] 
>> Inviato: gioved? 17 settembre 2009 0.31
>> A: Harbour Project Main Developer List.
>> Oggetto: [Harbour] How do I know if the button was pressed?
>>
>> In this code:
>> ******************************************************
>> #include "Inkey.ch"
>> PROCEDURE Main
>> LOCAL cVar1 := cVar2 := SPAC(10), oPsw, GetList := {}, lBtn := .T.
>> SET(_SET_EVENTMASK, INKEY_ALL)
>> MSETCURSOR(.T.)
>> SETMODE(25,80)
>> CLS
>> @ 10, 10 SAY "Entrada1:" GET cVar1 VALID Func1(cVar1,GetList)
>> @ 11, 10 SAY "Entrada2:" GET cVar2
>> @ 12, 10 GET lBtn PUSHBUTTON CAPTION " E&xit " STATE {|| 
>> ReadKill(.T.)} 
>> COLOR "W/G,W+/G,G/N,W+/G"
>> READ
>> return
>>
>> FUNCTION Func1(xVar1, xGetList)
>> ? xGetList[3]:buffer
>> wait
>> RETURN !EMPTY(xVar1)
>> *****************************************************
>> How do I know if the button was pressed?
>>
>> Buffer is supposed to contain this information, but always returns NIL
>> The idea is to exit the program by pressing the button, even if this 
>> cVar1 empty, but the VALID clause does not.
>>
>> Any help / idea?
>>
>> TIA
>> Best Regards
>> GVS
>>
>>
>>
>>     
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
>   

From druzus at acn.waw.pl  Thu Sep 17 11:00:50 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 17 11:00:56 2009
Subject: [Harbour] Ppo files
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B3B9@PINK.zycie.pzu>
References: <20090917115246.GA13061@uran.home.aster.pl>
	<FFAFD6EA63A3FC4784FBDA52BE7A7C950280B3B9@PINK.zycie.pzu>
Message-ID: <20090917150050.GA26790@uran.home.aster.pl>

On Thu, 17 Sep 2009, Horodyski Marek (PZUZ) wrote:

Hi Marek,

> >> Please test the /p option in Harbour. 
> >> Very often the resulting file is incomplete.
> >I haven't heard about such situation and I quite often use /p.
> >Can you present any example?
> Yes.
> Pls test with include in body function.
> For example test.prg :
> 
> Proc main()
> #include 'inkey.ch'
> 
> Cls
> @ 12, 10 say 'cos tam'
> 
> Inkey( 0)
> Return
> 
> After harbour test.prg /p, in test.ppo is only :
> 
> Proc main()
> 
> Its all.

I can see perfectly well generated test.ppo file.
I can only guess that you do not have valid INCLUDE
directory with inkey.ch so compilation is interrupted at:
   t81.prg(2) Error F0029  Can't open #include file 'inkey.ch'
and for unknown for me reason you ignored this error message and
send bug report instead of fixing you environment settings.
Am I right?
If yes then then please explain me what you are asking for?

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Thu Sep 17 11:05:12 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 17 11:05:19 2009
Subject: [Harbour] hb_sendmail issues under linux
In-Reply-To: <DCBD9F13-EBB1-47D3-A575-F8B2437DDE04@syenar.hu>
References: <9257026e0909170744q550f6f87od17cd513a4d706c5@mail.gmail.com>
	<DCBD9F13-EBB1-47D3-A575-F8B2437DDE04@syenar.hu>
Message-ID: <9257026e0909170805u5cc75fc2k2fdc562759d1e037@mail.gmail.com>

On Thu, Sep 17, 2009 at 4:51 PM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:

> Pls commit it.

Sorry, my local repo is quite "customized" and I use mercurial as
local VCS so for me commit to svn is a "big" task.

Could you kindly add this small change to your next commit?

best regards,
Lorenzo
From harbour.01 at syenar.hu  Thu Sep 17 11:27:03 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 17 11:27:12 2009
Subject: [Harbour] hb_sendmail issues under linux
In-Reply-To: <9257026e0909170805u5cc75fc2k2fdc562759d1e037@mail.gmail.com>
References: <9257026e0909170744q550f6f87od17cd513a4d706c5@mail.gmail.com>
	<DCBD9F13-EBB1-47D3-A575-F8B2437DDE04@syenar.hu>
	<9257026e0909170805u5cc75fc2k2fdc562759d1e037@mail.gmail.com>
Message-ID: <E3416FE9-F543-4F4D-B840-2279897CC93C@syenar.hu>

Okay, I'll make it.

Brgds,
Viktor

On 2009 Sep 17, at 17:05, Lorenzo Fiorini wrote:

> On Thu, Sep 17, 2009 at 4:51 PM, Viktor Szak?ts <harbour. 
> 01@syenar.hu> wrote:
>
>> Pls commit it.
>
> Sorry, my local repo is quite "customized" and I use mercurial as
> local VCS so for me commit to svn is a "big" task.
>
> Could you kindly add this small change to your next commit?
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From bedipritpal at hotmail.com  Thu Sep 17 11:35:24 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Sep 17 11:35:30 2009
Subject: [Harbour] HBNETIO - How I tested ...
In-Reply-To: <4AB23745.4060405@mail.udg.mx>
References: <4AAF7E9D.2070406@mail.udg.mx> <4AB23745.4060405@mail.udg.mx>
Message-ID: <25491961.post@talk.nabble.com>


Hi


David Arturo Macias Corona wrote:
> 
> I have two network cards in my OS/2 machine
>   192.168.1.110
>   192.168.2.64
> and default route
>   192.168.2.1
> 
> so I am using
>   netiosrv_os2.exe 63000 192.168.2.64 d:\creative.ram
> 

I was able to connect as above ( if you were using the same ip before ).
So it seems ok to me.



> What mean/happen with 0.0.0.0 if I use ?
>   netiosrv_os2.exe 63000 0.0.0.0 d:\creative.ram
> 

As explained by Przemek, it allows to connect to the 
server practically from anywhere your ip and port is visible.

Regards
Pritpal Bedi

BTW at this moment your server is down or it has changed it IP.



-- 
View this message in context: http://www.nabble.com/Re%3A-HBNETIO---How-I-tested-...-tp25452521p25491961.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Thu Sep 17 11:41:41 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Sep 17 11:41:47 2009
Subject: [Harbour] hbvpdf.lib with image
In-Reply-To: <52384.4162.qm@web32801.mail.mud.yahoo.com>
References: <52384.4162.qm@web32801.mail.mud.yahoo.com>
Message-ID: <25491964.post@talk.nabble.com>


Hi Jose


Jose Miguel-3 wrote:
> 
> The library hbvpdf.lib
> When printing an image and the file does not exist, does not close the pdf
> and gives error
> What are the sources that supports?and what types of pages?
> 

hbvpdf is a port of Viktor K.s procedural code into 
class framework and so far no new functions are added 
into it till its inception. And more likely not many people 
are using it.

You need to make experiments yourself and in case 
you find something interesting let this know.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/hbvpdf.lib-with-image-tp25491291p25491964.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From ice at extreme.hu  Thu Sep 17 11:41:59 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Thu Sep 17 11:42:06 2009
Subject: [Harbour] hb_sendmail issues under linux
In-Reply-To: <9257026e0909170744q550f6f87od17cd513a4d706c5@mail.gmail.com>
References: <9257026e0909170744q550f6f87od17cd513a4d706c5@mail.gmail.com>
Message-ID: <alpine.GSO.2.00.0909171730150.17989@dawn.royalcomp.hu>

On Thu, 17 Sep 2009, Lorenzo Fiorini wrote:

 > In contrib/hbtip/sendmail.prg these lines:
 > 
 >       IF !( Right( cBody, 2 ) == hb_osNewLine() )
 >          cBody += hb_osNewLine()
 >       ENDIF
 > 
 > should be:
 > 
 >       IF !( Right( cBody, 2 ) == Chr( 13 ) + Chr( 10 ) )
 >          cBody += Chr( 13 ) + Chr( 10 )
 >       ENDIF

but this is stlill wrong.

code says:

cBody      -> Optional. The body message of the email as text, or the filename of the HTML message to send.

so, after that, you have to append crlf.crlf _no matter what is in 
cbody_ already.

i think (from a quick skim of the code) that the correct solution 
would be deleting these three altogether, and the smtp client seems to 
already add this in it's commit(), which should be enough (and along 
these lines, appending anything to cbody is wrong).

can you dump out a complete conversation, and get it to me? preferably 
protect it with something so that whitespaces and stuff are not 
mangled, base64, for example).

 > 
 > the standard requires Cr+Lf and servers like QMail reject messages
 > with ONLY Lf reporting:
 > 
 > 451 See http://pobox.com/~djb/docs/smtplf.html
 > 
 > while others like Postfix accept them but report:
 > 
 > 354 End data with <CR><LF>.<CR><LF>
 > 
 > Using Chr( 13 ) + Chr( 10 ) seems to fix the send with QMail but
 > Postfix still reports 354 ...
 > 
 > Any comments is welcome.
 > 
 > best regards,
 > Lorenzo
 > _______________________________________________
 > Harbour mailing list
 > Harbour@harbour-project.org
 > http://lists.harbour-project.org/mailman/listinfo/harbour
 > 

-- 
[-]

mkdir /nonexistent
From mhsabado at gmail.com  Thu Sep 17 11:55:55 2009
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Thu Sep 17 11:56:10 2009
Subject: [Harbour] Re: HBNETIO HB_ReadIni() Support
In-Reply-To: <4ab23a48.2708c00a.665d.0b01SMTPIN_ADDED@mx.google.com>
References: <4ab23a48.2708c00a.665d.0b01SMTPIN_ADDED@mx.google.com>
Message-ID: <4AB25C0B.1060606@gmail.com>

Alex,
> Message: 9
> Date: Thu, 17 Sep 2009 15:29:16 +0200
> From: Alex Strickland <sscc@mweb.co.za>
> Subject: Re: [Harbour] HBNETIO HB_ReadIni() Support
> To: "Harbour Project Main Developer List."
> 	<harbour@harbour-project.org>
> Message-ID: <4AB239AC.6030303@mweb.co.za>
> Content-Type: text/plain; charset=UTF-8; format=flowed
>
> Przemyslaw Czerpak wrote:
>
>   
>> It does not yet.
>>     
>
> Thanks for the correction, this is a little worrying then:
>
>  > I just tried it and it WORKS!  Thank you for hinting it to me.
>
> Take note Mario, and revisit your test.
>
>   
Yes I guess it's not working just yet.  I added 
"net:/path/to/ini/myini.ini" in HB_ReadIni() file parameter and was so 
overwhelmed when I didn't get runtime error but in reality, it didn't 
process the line.  Thanks Przemek for the clarification.

Regards,
Mario.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090917/ef8dfb3d/attachment.html
From alxokhotnikov at gmail.com  Thu Sep 17 12:25:42 2009
From: alxokhotnikov at gmail.com (Alexandr Okhotnikov)
Date: Thu Sep 17 12:25:49 2009
Subject: [Harbour] HBNETIO - How I tested ...
In-Reply-To: <25491961.post@talk.nabble.com>
References: <4AAF7E9D.2070406@mail.udg.mx> <4AB23745.4060405@mail.udg.mx>
	<25491961.post@talk.nabble.com>
Message-ID: <d6fa31440909170925k6638218foc5a4c3d8ffb75ab8@mail.gmail.com>

Hi

I tested it on linux:
lock through NETIO not work (rewriting a locked record, and then flies
out to destroy the index).
removing the "net:" all earned

	
What could be wrong?
From druzus at acn.waw.pl  Thu Sep 17 12:33:58 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 17 12:34:04 2009
Subject: [Harbour] HBNETIO - How I tested ...
In-Reply-To: <d6fa31440909170925k6638218foc5a4c3d8ffb75ab8@mail.gmail.com>
References: <4AAF7E9D.2070406@mail.udg.mx> <4AB23745.4060405@mail.udg.mx>
	<25491961.post@talk.nabble.com>
	<d6fa31440909170925k6638218foc5a4c3d8ffb75ab8@mail.gmail.com>
Message-ID: <20090917163358.GA13453@uran.home.aster.pl>

On Thu, 17 Sep 2009, Alexandr Okhotnikov wrote:

Hi,

> I tested it on linux:
> lock through NETIO not work (rewriting a locked record, and then flies
> out to destroy the index).

Locks works perfectly.

> removing the "net:" all earned
> What could be wrong?

If you can create as small as possible peace of code to replicate
the situation which you think is a problem for you then maybe I can
give you an answer. Now I do not know what you are doing and what
you expect. Your sentence above suggests that you expect that Linux
kernels will work with mandatory locking and DOS like deny flags but
it's highly possible that I didn't guess correctly.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Thu Sep 17 13:31:38 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Sep 17 13:31:44 2009
Subject: [Harbour] hb_sendmail issues under linux
In-Reply-To: <alpine.GSO.2.00.0909171730150.17989@dawn.royalcomp.hu>
References: <9257026e0909170744q550f6f87od17cd513a4d706c5@mail.gmail.com>
	<alpine.GSO.2.00.0909171730150.17989@dawn.royalcomp.hu>
Message-ID: <9257026e0909171031u86d1b6ay6c6dcb29a7be555d@mail.gmail.com>

On Thu, Sep 17, 2009 at 5:41 PM, Tamas TEVESZ <ice@extreme.hu> wrote:

> i think (from a quick skim of the code) that the correct solution
> would be deleting these three altogether, and the smtp client seems to
> already add this in it's commit(), which should be enough (and along
> these lines, appending anything to cbody is wrong).

I've tried to remove them but then a msg with an attachment is wrong.

The client shows everything as text.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Thu Sep 17 14:50:17 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 17 14:50:28 2009
Subject: [Harbour] hb_sendmail issues under linux
In-Reply-To: <9257026e0909171031u86d1b6ay6c6dcb29a7be555d@mail.gmail.com>
References: <9257026e0909170744q550f6f87od17cd513a4d706c5@mail.gmail.com>
	<alpine.GSO.2.00.0909171730150.17989@dawn.royalcomp.hu>
	<9257026e0909171031u86d1b6ay6c6dcb29a7be555d@mail.gmail.com>
Message-ID: <C0CD28CC-7D27-486F-B0BE-F93404EAA521@syenar.hu>

>> i think (from a quick skim of the code) that the correct solution
>> would be deleting these three altogether, and the smtp client seems  
>> to
>> already add this in it's commit(), which should be enough (and along
>> these lines, appending anything to cbody is wrong).
>
> I've tried to remove them but then a msg with an attachment is wrong.
>
> The client shows everything as text.

Just a guess, but that appears to be some bugs in the attachment
logic. It's strange that body needs to be hacked to make attachment
work. Pbly attachment should add any linefeeds required.

Brgds,
Viktor

From alxokhotnikov at gmail.com  Thu Sep 17 16:07:12 2009
From: alxokhotnikov at gmail.com (Alexandr Okhotnikov)
Date: Thu Sep 17 16:07:18 2009
Subject: [Harbour] HBNETIO - How I tested ...
In-Reply-To: <20090917163358.GA13453@uran.home.aster.pl>
References: <4AAF7E9D.2070406@mail.udg.mx> <4AB23745.4060405@mail.udg.mx>
	<25491961.post@talk.nabble.com>
	<d6fa31440909170925k6638218foc5a4c3d8ffb75ab8@mail.gmail.com>
	<20090917163358.GA13453@uran.home.aster.pl>
Message-ID: <d6fa31440909171307m6e58ac93h6f22fbc514c39f0c@mail.gmail.com>

Hi

netiosrv.prg - as is

RUN: "./netiosrv_linux 60001 192.168.1.102"

netiotst.prg:

define DBNAME    "net:data/_tst_"
request DBFCDX

proc main()
   set exclusive off
   rddSetDefault( "DBFCDX" )
   ? "NETIO_CONNECT():", netio_connect( "192.168.1.102", 60001 )
   if ! dbExists( DBNAME )
      createdb( DBNAME )
   endif
   testdb( DBNAME )
return

proc createdb( cName )
   dbCreate( cName, {{"F1", "C", 20, 0}} )
   use (cName)
   dbAppend()
   index on field->F1 tag T1       //without it - all right
   close
return

proc testdb( cName )
   use (cName)
   dbgoto(1)
   ? "DbrLock: second run (in parallel) - must be an error block"
   dbrlock()
   field->f1 := "test"
   ? "Locked"
   wait
   close
return


2009/9/17 Przemyslaw Czerpak <druzus@acn.waw.pl>:
> On Thu, 17 Sep 2009, Alexandr Okhotnikov wrote:
>
> Hi,
>
>> I tested it on linux:
>> lock through NETIO not work (rewriting a locked record, and then flies
>> out to destroy the index).
>
> Locks works perfectly.
>
>> removing the "net:" all earned
>> What could be wrong?
>
> If you can create as small as possible peace of code to replicate
> the situation which you think is a problem for you then maybe I can
> give you an answer. Now I do not know what you are doing and what
> you expect. Your sentence above suggests that you expect that Linux
> kernels will work with mandatory locking and DOS like deny flags but
> it's highly possible that I didn't guess correctly.
>
> best regards,
> Przemek
From ice at extreme.hu  Thu Sep 17 16:42:50 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Thu Sep 17 16:42:57 2009
Subject: [Harbour] hb_sendmail issues under linux
In-Reply-To: <C0CD28CC-7D27-486F-B0BE-F93404EAA521@syenar.hu>
References: <9257026e0909170744q550f6f87od17cd513a4d706c5@mail.gmail.com>
	<alpine.GSO.2.00.0909171730150.17989@dawn.royalcomp.hu>
	<9257026e0909171031u86d1b6ay6c6dcb29a7be555d@mail.gmail.com>
	<C0CD28CC-7D27-486F-B0BE-F93404EAA521@syenar.hu>
Message-ID: <alpine.GSO.2.00.0909172225270.17989@dawn.royalcomp.hu>

On Thu, 17 Sep 2009, Viktor Szak?ts wrote:

 > > > i think (from a quick skim of the code) that the correct solution
 > > > would be deleting these three altogether, and the smtp client seems to
 > > > already add this in it's commit(), which should be enough (and along
 > > > these lines, appending anything to cbody is wrong).
 > > 
 > > I've tried to remove them but then a msg with an attachment is wrong.
 > > 
 > > The client shows everything as text.
 > 
 > Just a guess, but that appears to be some bugs in the attachment
 > logic. It's strange that body needs to be hacked to make attachment
 > work. Pbly attachment should add any linefeeds required.


in hbtip/mail.prg:SetBody() there is:

151 METHOD SetBody( cBody ) CLASS TipMail
152    IF ::oEncoder != NIL
153       ::cBody := ::oEncoder:Encode( cBody )
154       ::lBodyEncoded := .T.  //GD needed to prevent an extra crlf from being appended
155    ELSE
156       ::cBody := cBody
157    ENDIF
158    ::hHeaders[ "Content-Length" ] := hb_ntos( Len( cBody ) )
159    RETURN .T.

maybe this has something to do with it?



-- 
[-]

mkdir /nonexistent
From gerrylist at drouillard.ca  Thu Sep 17 17:21:50 2009
From: gerrylist at drouillard.ca (Gerald Drouillard)
Date: Thu Sep 17 17:19:36 2009
Subject: [Harbour] hb_sendmail issues under linux
In-Reply-To: <9257026e0909170744q550f6f87od17cd513a4d706c5@mail.gmail.com>
References: <9257026e0909170744q550f6f87od17cd513a4d706c5@mail.gmail.com>
Message-ID: <4AB2A86E.6040902@drouillard.ca>

On 9/17/2009 10:44 AM, Lorenzo Fiorini wrote:
> In contrib/hbtip/sendmail.prg these lines:
>
>        IF !( Right( cBody, 2 ) == hb_osNewLine() )
>           cBody += hb_osNewLine()
>        ENDIF
>
> should be:
>
>        IF !( Right( cBody, 2 ) == Chr( 13 ) + Chr( 10 ) )
>           cBody += Chr( 13 ) + Chr( 10 )
>        ENDIF
>
> the standard requires Cr+Lf and servers like QMail reject messages
> with ONLY Lf reporting:
>
> 451 See http://pobox.com/~djb/docs/smtplf.html
>
> while others like Postfix accept them but report:
>
> 354 End data with<CR><LF>.<CR><LF>
>
> Using Chr( 13 ) + Chr( 10 ) seems to fix the send with QMail but
> Postfix still reports 354 ...
>
> Any comments is welcome.
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

Your more than welcome to harvest my changes...
http://www.ask-services.com/tmp/mail.prg

There is more issues than just the crlf.  The handling of attachments 
was broken also, along with encoding in xharbour was broken at one point.

I didn't commit my changes to (x)harbour as they were fairly extensive 
and it looked like it was working for others as is.  My changes are 
heavily tested against postfix email server with sending from linux and 
windows binaries.  One application probably sends 500+ emails a day with 
attachments.


-- 
Regards
--------------------------------------
Gerald Drouillard
Technology Architect
Drouillard & Associates, Inc.
http://www.Drouillard.biz
From druzus at users.sourceforge.net  Thu Sep 17 18:03:10 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Thu Sep 17 18:03:16 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12531] trunk/harbour
Message-ID: <E1MoP4I-0005uA-0u@3kljzd1.ch3.sourceforge.com>

Revision: 12531
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12531&view=rev
Author:   druzus
Date:     2009-09-17 22:03:09 +0000 (Thu, 17 Sep 2009)

Log Message:
-----------
2009-09-18 00:02 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/filebuf.c
    ! fixed missing FS IO error setting on local lock collisions

  * harbour/tests/tb1.prg
    * added my copyright note

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rtl/filebuf.c
    trunk/harbour/tests/tb1.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Thu Sep 17 18:04:20 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 17 18:04:32 2009
Subject: [Harbour] HBNETIO - How I tested ...
In-Reply-To: <d6fa31440909171307m6e58ac93h6f22fbc514c39f0c@mail.gmail.com>
References: <4AAF7E9D.2070406@mail.udg.mx> <4AB23745.4060405@mail.udg.mx>
	<25491961.post@talk.nabble.com>
	<d6fa31440909170925k6638218foc5a4c3d8ffb75ab8@mail.gmail.com>
	<20090917163358.GA13453@uran.home.aster.pl>
	<d6fa31440909171307m6e58ac93h6f22fbc514c39f0c@mail.gmail.com>
Message-ID: <20090917220420.GA10746@uran.home.aster.pl>

On Fri, 18 Sep 2009, Alexandr Okhotnikov wrote:

Hi,

> netiosrv.prg - as is
> RUN: "./netiosrv_linux 60001 192.168.1.102"
> netiotst.prg:
[...]

Thank you very much for example.
Now it's clear what happened. It's not NETIO problem but old
bug exploited now - in RTL FS IO error was not set on local lock collision.
I'll commit fix in a while.

best regards,
Przemek
From dbtopas at dbtopas.lt  Thu Sep 17 18:49:25 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Sep 17 18:50:30 2009
Subject: [Harbour] hb_sendmail issues under linux
In-Reply-To: <9257026e0909170744q550f6f87od17cd513a4d706c5@mail.gmail.com>
References: <9257026e0909170744q550f6f87od17cd513a4d706c5@mail.gmail.com>
Message-ID: <4AB2BCF5.8050603@dbtopas.lt>

Lorenzo Fiorini wrote:
> In contrib/hbtip/sendmail.prg these lines:
> ...
> the standard requires Cr+Lf and servers like QMail reject messages
> with ONLY Lf reporting:
> 
> 451 See http://pobox.com/~djb/docs/smtplf.html
> 
> while others like Postfix accept them but report:
> 
> 354 End data with <CR><LF>.<CR><LF>
> 
> Using Chr( 13 ) + Chr( 10 ) seems to fix the send with QMail but
> Postfix still reports 354 ...
> 
> Any comments is welcome.

Hi,


I know nothing about hbtip, but 354 is a standard response for SMTP DATA 
command. For example, Exim 4.69 response is:
   354 Enter message, ending with "." on a line by itself
It means exactly the same as "End data with <CR><LF>.<CR><LF>". These 
"<CR><LF>" is not a hint that you are doing something wrong.


Regards,
Mindaugas
From druzus at users.sourceforge.net  Thu Sep 17 19:44:11 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Thu Sep 17 19:44:18 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12532] trunk/harbour
Message-ID: <E1MoQe3-0006G9-Qr@bj8yhf1.ch3.sourceforge.com>

Revision: 12532
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12532&view=rev
Author:   druzus
Date:     2009-09-17 23:44:10 +0000 (Thu, 17 Sep 2009)

Log Message:
-----------
2009-09-18 01:43 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbthread.h
  * harbour/include/hbdefs.h
  * harbour/source/vm/dynlibhb.c
  * harbour/config/bsd/libs.mk
    ! updated to work with FreeBSD

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/bsd/libs.mk
    trunk/harbour/include/hbdefs.h
    trunk/harbour/include/hbthread.h
    trunk/harbour/source/vm/dynlibhb.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Thu Sep 17 20:39:13 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Thu Sep 17 20:39:20 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12533] trunk/harbour
Message-ID: <E1MoRVJ-0003A0-W4@d5vjzd1.ch3.sourceforge.com>

Revision: 12533
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12533&view=rev
Author:   druzus
Date:     2009-09-18 00:39:12 +0000 (Fri, 18 Sep 2009)

Log Message:
-----------
2009-09-18 02:38 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/detect.mk
    ! fixed typo in include directory used for slang.h detection
    - removed redundant HB_LOCAL_SLN variable - now this functionality
      can be reached using HB_INC_SLANG

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/detect.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From ice at extreme.hu  Thu Sep 17 21:09:38 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Thu Sep 17 21:09:46 2009
Subject: [Harbour] netiosrv.c range check
Message-ID: <alpine.GSO.2.00.0909180301380.17989@dawn.royalcomp.hu>


hi przemek,

netiosrv.c reads:

440       if( connsd != HB_NO_SOCKET )
441       {
442          BOOL fOK = FALSE;
443          BYTE msgbuf[ 64 ];
444 
445          conn = s_consrvNew( connsd, lsd->rootPath );
446 
447          if( s_srvRecvAll( conn, msgbuf, NETIO_MSGLEN ) == NETIO_MSGLEN &&

it feels better to, instead of the magic 64, to either use some 
formula that includes NETIO_MSGLEN (say 2 * NETIO_MSGLEN + 16, if 
there is such a formula, or just <some> * NETIO_MSGLEN), or after the 
declaration, assert() that msgbuf needs to be this-and-this in size in 
relation to NETIO_MSGLEN.

my reason for that is that 64 is a "magic constant", "far" in context 
from where and how it's being used, and using netio_msglen in there 
gives it some context, and is easier to figure out what it is for, and 
what the constraints for it's size are.


-- 
[-]

mkdir /nonexistent
From bedipritpal at hotmail.com  Thu Sep 17 21:11:10 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Thu Sep 17 21:11:16 2009
Subject: [Harbour] HBNETIO - How I tested ...
In-Reply-To: <d6fa31440909171307m6e58ac93h6f22fbc514c39f0c@mail.gmail.com>
References: <4AAF7E9D.2070406@mail.udg.mx> <4AB23745.4060405@mail.udg.mx>
	<25491961.post@talk.nabble.com>
	<d6fa31440909170925k6638218foc5a4c3d8ffb75ab8@mail.gmail.com>
	<20090917163358.GA13453@uran.home.aster.pl>
	<d6fa31440909171307m6e58ac93h6f22fbc514c39f0c@mail.gmail.com>
Message-ID: <25500051.post@talk.nabble.com>


Hi


Alexandr Okhotnikov wrote:
> 
> proc createdb( cName )
>    dbCreate( cName, {{"F1", "C", 20, 0}} )
>    use (cName)
>    dbAppend()
>    index on field->F1 tag T1       //without it - all right
>    close
> return
> 

Try
index on field->F1 tag T1 TO ( DBNAME+".CDX" )

Remember:
All files which are to be routed to NETIO must 
have a prefix of "net:" and because you are 
not specifying it whicle creating the index.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/Re%3A-HBNETIO---How-I-tested-...-tp25452521p25500051.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From jerryfinuliar at operamail.com  Thu Sep 17 22:04:18 2009
From: jerryfinuliar at operamail.com (Jerry Finuliar)
Date: Thu Sep 17 22:04:24 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
Message-ID: <20090918020418.993147BD6B@ws5-10.us4.outblaze.com>

 
> Such functionality will be available in final version of alternative
> IO APIs. It will be possible to redirect any operations but now only
> functionality used by core RDD code is supported.


Ok I'll wait for it. One more question Are there plans to address data 
corruptions inherent in network applications?

Sorry for asking so much and taking some of your time. TIA

Best Regards,
Jerry

 




-- 
_______________________________________________
Surf the Web in a faster, safer and easier way:
Download Opera 9 at http://www.opera.com

Powered by Outblaze
From druzus at users.sourceforge.net  Thu Sep 17 22:07:12 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Thu Sep 17 22:07:17 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12534] trunk/harbour
Message-ID: <E1MoSsS-000346-DD@74yxhf1.ch3.sourceforge.com>

Revision: 12534
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12534&view=rev
Author:   druzus
Date:     2009-09-18 02:07:11 +0000 (Fri, 18 Sep 2009)

Log Message:
-----------
2009-09-18 04:07 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/gttrm/gttrm.c
    + added support for FreeBSD console

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rtl/gttrm/gttrm.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From ice at extreme.hu  Thu Sep 17 22:45:53 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Thu Sep 17 22:46:01 2009
Subject: [Harbour] haiku network stuff
Message-ID: <alpine.GSO.2.00.0909180438150.17989@dawn.royalcomp.hu>


hi,

the firtst hunk is apparently needed -- with that, netiotest actually 
starts and runs and seems to be doing its stuff fine. note, i'm 
deliberately not mentioning an exit of any sorts -- it doesn't, 
instead it eats up all memory and hangs, but that's for another day, 
when my eyes stopped bleeding from staring at vmware.

the second hunk is based off information found at

http://www.haiku-os.org/documents/dev/haiku_network_stack_architecture

Index: source/rtl/hbsocket.c
===================================================================
--- source/rtl/hbsocket.c	(revision 12533)
+++ source/rtl/hbsocket.c	(working copy)
@@ -58,6 +58,10 @@
 #  endif
 #endif
 
+#if defined( HB_OS_BEOS )
+#  define HB_SOCKET_TRANSLATE_TYPE
+#endif
+
 #if !defined( HB_SOCKET_OFF )
 
 /* we do not use autoconf so we can only guess what is supported
Index: config/beos/libs.mk
===================================================================
--- config/beos/libs.mk	(revision 12533)
+++ config/beos/libs.mk	(working copy)
@@ -26,5 +26,5 @@
    ifeq ($(HB_HAS_ZLIB_LOCAL),)
       SYSLIBS += z
    endif
-   SYSLIBS += root socket
+   SYSLIBS += root network
 endif


-- 
[-]

mkdir /nonexistent
-------------- next part --------------
Index: source/rtl/hbsocket.c
===================================================================
--- source/rtl/hbsocket.c	(revision 12533)
+++ source/rtl/hbsocket.c	(working copy)
@@ -58,6 +58,10 @@
 #  endif
 #endif
 
+#if defined( HB_OS_BEOS )
+#  define HB_SOCKET_TRANSLATE_TYPE
+#endif
+
 #if !defined( HB_SOCKET_OFF )
 
 /* we do not use autoconf so we can only guess what is supported
Index: config/beos/libs.mk
===================================================================
--- config/beos/libs.mk	(revision 12533)
+++ config/beos/libs.mk	(working copy)
@@ -26,5 +26,5 @@
    ifeq ($(HB_HAS_ZLIB_LOCAL),)
       SYSLIBS += z
    endif
-   SYSLIBS += root socket
+   SYSLIBS += root network
 endif
From ice at extreme.hu  Thu Sep 17 23:03:46 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Thu Sep 17 23:03:53 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
In-Reply-To: <20090918020418.993147BD6B@ws5-10.us4.outblaze.com>
References: <20090918020418.993147BD6B@ws5-10.us4.outblaze.com>
Message-ID: <alpine.GSO.2.00.0909180456370.17989@dawn.royalcomp.hu>

On Fri, 18 Sep 2009, Jerry Finuliar wrote:

 > > Such functionality will be available in final version of alternative
 > > IO APIs. It will be possible to redirect any operations but now only
 > > functionality used by core RDD code is supported.
 > 
 > 
 > Ok I'll wait for it. One more question Are there plans to address data 
 > corruptions inherent in network applications?

tcp is already giving you a fair piece of resiliance against 
corruption. not to say more robust stuff is absolutely unimaginable, 
but you are not completely naked in the dark.

-- 
[-]

mkdir /nonexistent
From jerryfinuliar at operamail.com  Fri Sep 18 00:17:18 2009
From: jerryfinuliar at operamail.com (Jerry Finuliar)
Date: Fri Sep 18 00:17:28 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
Message-ID: <20090918041718.C05A1448C8@ws5-1.us4.outblaze.com>

> tcp is already giving you a fair piece of resiliance against
> corruption. not to say more robust stuff is absolutely unimaginable,
> but you are not completely naked in the dark.

Ok I painted a vague picture. I agree tcp is a proven technology but what
will happen with the following scenarios while creating an index: 
1. Connection suddenly went off
2. Client app crash
3. Client app hang

To server and other clients?


Best Regards
Jerry



-- 
_______________________________________________
Surf the Web in a faster, safer and easier way:
Download Opera 9 at http://www.opera.com

Powered by Outblaze
From alxokhotnikov at gmail.com  Fri Sep 18 00:52:11 2009
From: alxokhotnikov at gmail.com (Alexandr Okhotnikov)
Date: Fri Sep 18 00:52:17 2009
Subject: [Harbour] HBNETIO - How I tested ...
In-Reply-To: <25500051.post@talk.nabble.com>
References: <4AAF7E9D.2070406@mail.udg.mx> <4AB23745.4060405@mail.udg.mx>
	<25491961.post@talk.nabble.com>
	<d6fa31440909170925k6638218foc5a4c3d8ffb75ab8@mail.gmail.com>
	<20090917163358.GA13453@uran.home.aster.pl>
	<d6fa31440909171307m6e58ac93h6f22fbc514c39f0c@mail.gmail.com>
	<25500051.post@talk.nabble.com>
Message-ID: <d6fa31440909172152r1739575cw862084a70f128748@mail.gmail.com>

Hi


2009/9/18 Pritpal Bedi <bedipritpal@hotmail.com>:
>
> Try
> index on field->F1 tag T1 TO ( DBNAME+".CDX" )

This is the first that was tried (removed from the example to simplify
the example)
Same error

> Remember:
> All files which are to be routed to NETIO must
> have a prefix of "net:" and because you are
> not specifying it whicle creating the index.

If you look closely at my example, we see that nowhere is there no "net:" :)
The error occurs when you start at the second session (the index is
created, it is automatically caught by the driver DBFCDX).

if ! dbExists( DBNAME )
   createdb( DBNAME )
endif

It tries to forcibly add the index (with a different extension to
DBFCDX not open himself, and, of course, with "net:") leads to the
same error

> Regards
> Pritpal Bedi
From dmacias at mail.udg.mx  Fri Sep 18 01:08:19 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Sep 18 01:08:36 2009
Subject: [Harbour] Re: Harbour under OS/2 - eCS 12510 - 12525
Message-ID: <4AB315C3.4070300@mail.udg.mx>

Viktor:

>> -lsupc++

>Okay, that explains. I don't understand what's happening
>there, but the easy option is to simply remove that lib for
>OS/2.

It work fine removing -lsupc++, warnings gone

David Macias





From dmacias at mail.udg.mx  Fri Sep 18 01:08:49 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Sep 18 01:09:03 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
Message-ID: <4AB315E1.1010301@mail.udg.mx>

Pritpal:

>As explained by Przemek, it allows to connect to the
>server practically from anywhere your ip and port is visible.

>BTW at this moment your server is down or it has changed it IP.

Now is running again in d:\creative.ram
  netiosrv_os2.exe 63000 192.168.2.64 d:\creative.ram

New IP is 189.162.130.7


As explained before, you can review your files using Clipxnet
Example:
  DBF: Base de datos: d:\creative.ram\checks.dbf

-----------------------------
This machine are running Clipxnet too so you can review your files using:
   http://189.162.130.7/conddb.fml

and using for example:
  DBF: Base de datos: d:\creative.ram\myfile.dbf

Index file, order, RDD, ... are optional
(  Archivo indice:, DBF: Orden controlador:,  DBF: Controlador RDD: )

You can use in Filtro/WHERE: an expression for filter, enclosed in
parenthesis ( "myfilter" )
-----------------------------


David Macias


From druzus at acn.waw.pl  Fri Sep 18 04:20:26 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 18 04:20:32 2009
Subject: [Harbour] netiosrv.c range check
In-Reply-To: <alpine.GSO.2.00.0909180301380.17989@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909180301380.17989@dawn.royalcomp.hu>
Message-ID: <20090918082026.GA15847@uran.home.aster.pl>

On Fri, 18 Sep 2009, Tamas TEVESZ wrote:

Hi,

> 440       if( connsd != HB_NO_SOCKET )
> 441       {
> 442          BOOL fOK = FALSE;
> 443          BYTE msgbuf[ 64 ];
> 444 
> 445          conn = s_consrvNew( connsd, lsd->rootPath );
> 446 
> 447          if( s_srvRecvAll( conn, msgbuf, NETIO_MSGLEN ) == NETIO_MSGLEN &&
> it feels better to, instead of the magic 64, to either use some 
> formula that includes NETIO_MSGLEN (say 2 * NETIO_MSGLEN + 16, if 
> there is such a formula, or just <some> * NETIO_MSGLEN), or after the 
> declaration, assert() that msgbuf needs to be this-and-this in size in 
> relation to NETIO_MSGLEN.
> my reason for that is that 64 is a "magic constant", "far" in context 
> from where and how it's being used, and using netio_msglen in there 
> gives it some context, and is easier to figure out what it is for, and 
> what the constraints for it's size are.

It was intentional but I agree that it may cause troubles if someone
tries to modify NETIO in the future. Thank you for information,
I'll change it.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Sep 18 04:45:05 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Sep 18 04:45:12 2009
Subject: [Harbour] sqlite3 autodetection message
Message-ID: <9257026e0909180145t1cef5f08v858e67e1beddc8b3@mail.gmail.com>

This is what I get when I run make clean:

! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh  s
! HB_INSTALL_PREFIX: /opt/harbour
! HB_BUILD_DLL: no
! HB_CONTRIBLIBS: hbct hblog hbxml hbmzip hbtip hbvpdf hbgd hbpgsql
hbcurl hbmysql hbsqlit3 hbssl hbodbc
! HB_EXTERNALLIBS: zlib pcre sqlite3
! HB_HOST_PLAT: linux (x86)  HB_SHELL: sh
! HB_PLATFORM: linux (x86) (autodetected)
! HB_COMPILER: gcc (autodetected: /usr/bin/)
! Component: 'zlib' found in
/media/sda5/dvl/src/ws/harbour/external/zlib (local)
! Component: 'pcre' found in
/media/sda5/dvl/src/ws/harbour/external/pcre (local)
! Component: 'openssl' found in /usr/include
! Component: 'gpm' explicitly disabled
! Component: 'slang' explicitly disabled
! Component: 'curses' not found
! Component: 'x11' found in /usr/include
! Component: 'wattcp/watt-32' not supported on linux platform
! REVISION: exported

is it correct that sqlite3 doesn't shows "local" like:
...
! Component: 'zlib' found in
/media/sda5/dvl/src/ws/harbour/external/zlib (local)
! Component: 'pcre' found in
/media/sda5/dvl/src/ws/harbour/external/pcre (local)
...

my goal is to be sure I'm using "local" dir ( and not sqlite-dev
packages ) and to have it in the libharbour*.so

best regards,
Lorenzo
From clipper at wssk.wroc.pl  Fri Sep 18 04:44:53 2009
From: clipper at wssk.wroc.pl (Jacek Kubica)
Date: Fri Sep 18 04:49:51 2009
Subject: [Harbour] hb_sendmail issues under linux
In-Reply-To: <9257026e0909170744q550f6f87od17cd513a4d706c5@mail.gmail.com>
References: <9257026e0909170744q550f6f87od17cd513a4d706c5@mail.gmail.com>
Message-ID: <1726281177.20090918104453@wssk.wroc.pl>

Hello Lorenzo,

Thursday, September 17, 2009, 4:44:04 PM, you wrote:

LF> In contrib/hbtip/sendmail.prg these lines:

LF>       IF !( Right( cBody, 2 ) == hb_osNewLine() )
LF>          cBody += hb_osNewLine()
LF>       ENDIF

LF> should be:

LF>       IF !( Right( cBody, 2 ) == Chr( 13 ) + Chr( 10 ) )
LF>          cBody += Chr( 13 ) + Chr( 10 )
LF>       ENDIF

LF> the standard requires Cr+Lf and servers like QMail reject messages
LF> with ONLY Lf reporting:

LF> 451 See http://pobox.com/~djb/docs/smtplf.html

LF> while others like Postfix accept them but report:

LF> 354 End data with <CR><LF>.<CR><LF>

LF> Using Chr( 13 ) + Chr( 10 ) seems to fix the send with QMail but
LF> Postfix still reports 354 ...

LF> Any comments is welcome.

IMO, Regarding to RFC821 obsoleted by RFC 5321
it should be fixed to send always <CR><LF>
 http://www.rfc-editor.org/rfc/rfc821.txt
 http://www.rfc-editor.org/rfc/rfc5321.txt

 ".. Lines consist of zero or more data characters terminated by the
   sequence ASCII character "CR" (hex value 0D) followed immediately by
   ASCII character "LF" (hex value 0A).  This termination sequence is
   denoted as <CRLF> in this document.  Conforming implementations MUST
   NOT recognize or generate any other character or character sequence
   as a line terminator. .."

-- 
Best regards,

 Jacek Kubica


From harbour.01 at syenar.hu  Fri Sep 18 05:15:02 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 18 05:15:14 2009
Subject: [Harbour] sqlite3 autodetection message
In-Reply-To: <9257026e0909180145t1cef5f08v858e67e1beddc8b3@mail.gmail.com>
References: <9257026e0909180145t1cef5f08v858e67e1beddc8b3@mail.gmail.com>
Message-ID: <6CBC5B11-EF2B-4049-A46D-D6BAB232AE9D@syenar.hu>

> ! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
> ! MAKE: make 3.81 /bin/sh  s
> ! HB_INSTALL_PREFIX: /opt/harbour
> ! HB_BUILD_DLL: no
> ! HB_CONTRIBLIBS: hbct hblog hbxml hbmzip hbtip hbvpdf hbgd hbpgsql
> hbcurl hbmysql hbsqlit3 hbssl hbodbc
> ! HB_EXTERNALLIBS: zlib pcre sqlite3
> ! HB_HOST_PLAT: linux (x86)  HB_SHELL: sh
> ! HB_PLATFORM: linux (x86) (autodetected)
> ! HB_COMPILER: gcc (autodetected: /usr/bin/)
> ! Component: 'zlib' found in
> /media/sda5/dvl/src/ws/harbour/external/zlib (local)
> ! Component: 'pcre' found in
> /media/sda5/dvl/src/ws/harbour/external/pcre (local)
> ! Component: 'openssl' found in /usr/include
> ! Component: 'gpm' explicitly disabled
> ! Component: 'slang' explicitly disabled
> ! Component: 'curses' not found
> ! Component: 'x11' found in /usr/include
> ! Component: 'wattcp/watt-32' not supported on linux platform
> ! REVISION: exported
>
> is it correct that sqlite3 doesn't shows "local" like:
> ...
> ! Component: 'zlib' found in
> /media/sda5/dvl/src/ws/harbour/external/zlib (local)
> ! Component: 'pcre' found in
> /media/sda5/dvl/src/ws/harbour/external/pcre (local)
> ...
>
> my goal is to be sure I'm using "local" dir ( and not sqlite-dev
> packages ) and to have it in the libharbour*.so

You can force sqlite3 to be local by using 'HB_INC_SQLITE3=local'.
But inclusion in libharbour is only supported for zlib/pcre
(since the core depends on them). If you want to add anything
else, you'll have to roll it on your own. (just like it is
the case with contrib libs)

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Sep 18 05:16:21 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 18 05:16:30 2009
Subject: [Harbour] Re: HBNETIO - How I tested ...
In-Reply-To: <20090918041718.C05A1448C8@ws5-1.us4.outblaze.com>
References: <20090918041718.C05A1448C8@ws5-1.us4.outblaze.com>
Message-ID: <01845470-688F-467E-AD1A-1ED4657C5657@syenar.hu>

>> tcp is already giving you a fair piece of resiliance against
>> corruption. not to say more robust stuff is absolutely unimaginable,
>> but you are not completely naked in the dark.
>
> Ok I painted a vague picture. I agree tcp is a proven technology but  
> what
> will happen with the following scenarios while creating an index:
> 1. Connection suddenly went off
> 2. Client app crash
> 3. Client app hang
>
> To server and other clients?

Same thing as in a "normal" (file-server based)
scenario. NETIO replaces the file-IO layer, so
it can't do any more magic to solve above problems.

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Fri Sep 18 05:35:50 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Sep 18 05:35:56 2009
Subject: [Harbour] sqlite3 autodetection message
In-Reply-To: <6CBC5B11-EF2B-4049-A46D-D6BAB232AE9D@syenar.hu>
References: <9257026e0909180145t1cef5f08v858e67e1beddc8b3@mail.gmail.com>
	<6CBC5B11-EF2B-4049-A46D-D6BAB232AE9D@syenar.hu>
Message-ID: <9257026e0909180235o534ff9b4kd0c754c397d8f744@mail.gmail.com>

On Fri, Sep 18, 2009 at 11:15 AM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:

> You can force sqlite3 to be local by using 'HB_INC_SQLITE3=local'.
> But inclusion in libharbour is only supported for zlib/pcre
> (since the core depends on them). If you want to add anything
> else, you'll have to roll it on your own. (just like it is
> the case with contrib libs)

Many thanks.

How can I add a msg like:

! Component: 'sqlite3' found in
/media/sda5/dvl/src/ws/harbour/external/sqlite3 (local)

HB_* envvars are subject to change and here we have many different
systems with many different envs to keep in sync.

best regards,
Lorenzo
From harbour.01 at syenar.hu  Fri Sep 18 05:51:10 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 18 05:51:20 2009
Subject: [Harbour] sqlite3 autodetection message
In-Reply-To: <9257026e0909180235o534ff9b4kd0c754c397d8f744@mail.gmail.com>
References: <9257026e0909180145t1cef5f08v858e67e1beddc8b3@mail.gmail.com>
	<6CBC5B11-EF2B-4049-A46D-D6BAB232AE9D@syenar.hu>
	<9257026e0909180235o534ff9b4kd0c754c397d8f744@mail.gmail.com>
Message-ID: <4817B316-4515-4E89-8467-7D1B459FBE5F@syenar.hu>

>> You can force sqlite3 to be local by using 'HB_INC_SQLITE3=local'.
>> But inclusion in libharbour is only supported for zlib/pcre
>> (since the core depends on them). If you want to add anything
>> else, you'll have to roll it on your own. (just like it is
>> the case with contrib libs)
>
> Many thanks.
>
> How can I add a msg like:
>
> ! Component: 'sqlite3' found in
> /media/sda5/dvl/src/ws/harbour/external/sqlite3 (local)

You can force verbose detection output by using
make _DET_OPT_VERB=very

But note this is indeed a non-public option ATM, so this
one *is* subject to change (subject to implement to be
more precise). I'll fix the double output in a next commit.

I added '! Component' messages to help us while testing
these new parts of GNU Make system, the reason I didn't
enable it for local component detections is because
component paths are also visible in C compiler command
line, so it's somewhat redundant.

> HB_* envvars are subject to change and here we have many different
> systems with many different envs to keep in sync.

Current state of HB_ variables can be considered stable,
I have only a few ones still on the pending list (in
global.mk there is a comment section dedicated to this),
plus the HB_INC_* to HB_WITH_* conversion, to better
resemble to other systems.

Brgds,
Viktor

From druzus at users.sourceforge.net  Fri Sep 18 06:06:47 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Fri Sep 18 06:06:53 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12535] trunk/harbour
Message-ID: <E1MoaMZ-0000ny-Nl@dn4whf1.ch3.sourceforge.com>

Revision: 12535
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12535&view=rev
Author:   druzus
Date:     2009-09-18 10:06:46 +0000 (Fri, 18 Sep 2009)

Log Message:
-----------
2009-09-18 12:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hb-func.sh
    * updated hb* scripts to work modified bast build conditions

  * harbour/source/rtl/gttrm/gttrm.c
    * added support for terminals with automatic scroll at maxrow,maxcol
      position - now it's enabled for BSD console though it may be also
      usable in other terminals with such behavior but it's hard to detect
      it without real tests.

  * harbour/source/rtl/filebuf.c
    * clear FS error code in dummy close

  * harbour/contrib/hbnetio/netio.h
  * harbour/contrib/hbnetio/netiosrv.c
    * added special error code which is used if some operation fails
      but without setting hb_fsError()
    * replaced const value with macro as Tomas suggested

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/hb-func.sh
    trunk/harbour/contrib/hbnetio/netio.h
    trunk/harbour/contrib/hbnetio/netiosrv.c
    trunk/harbour/source/rtl/filebuf.c
    trunk/harbour/source/rtl/gttrm/gttrm.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From lorenzo.fiorini at gmail.com  Fri Sep 18 06:08:42 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Sep 18 06:08:55 2009
Subject: [Harbour] sqlite3 autodetection message
In-Reply-To: <4817B316-4515-4E89-8467-7D1B459FBE5F@syenar.hu>
References: <9257026e0909180145t1cef5f08v858e67e1beddc8b3@mail.gmail.com>
	<6CBC5B11-EF2B-4049-A46D-D6BAB232AE9D@syenar.hu>
	<9257026e0909180235o534ff9b4kd0c754c397d8f744@mail.gmail.com>
	<4817B316-4515-4E89-8467-7D1B459FBE5F@syenar.hu>
Message-ID: <9257026e0909180308q7b626797n2f30cab227c91c50@mail.gmail.com>

On Fri, Sep 18, 2009 at 11:51 AM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:

> I added '! Component' messages to help us while testing
> these new parts of GNU Make system, the reason I didn't
> enable it for local component detections is because
> component paths are also visible in C compiler command
> line, so it's somewhat redundant.

Ok, the "strange" is that 2 of 3 libs have infos.

> Current state of HB_ variables can be considered stable,
> I have only a few ones still on the pending list (in
> global.mk there is a comment section dedicated to this),
> plus the HB_INC_* to HB_WITH_* conversion, to better
> resemble to other systems.

I agree HB_WITH is better.

best regards,
Lorenzo
From druzus at acn.waw.pl  Fri Sep 18 06:34:49 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 18 06:34:55 2009
Subject: [Harbour] haiku network stuff
In-Reply-To: <alpine.GSO.2.00.0909180438150.17989@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909180438150.17989@dawn.royalcomp.hu>
Message-ID: <20090918103449.GA22979@uran.home.aster.pl>

On Fri, 18 Sep 2009, Tamas TEVESZ wrote:

Hi,

> the firtst hunk is apparently needed -- with that, netiotest actually 
> starts and runs and seems to be doing its stuff fine. note, i'm 
> deliberately not mentioning an exit of any sorts -- it doesn't, 
> instead it eats up all memory and hangs, but that's for another day, 
> when my eyes stopped bleeding from staring at vmware.
> the second hunk is based off information found at
> http://www.haiku-os.org/documents/dev/haiku_network_stack_architecture

Thank you very much for checking it.

> Index: source/rtl/hbsocket.c
> ===================================================================
> --- source/rtl/hbsocket.c	(revision 12533)
> +++ source/rtl/hbsocket.c	(working copy)
> @@ -58,6 +58,10 @@
>  #  endif
>  #endif
>  
> +#if defined( HB_OS_BEOS )
> +#  define HB_SOCKET_TRANSLATE_TYPE
> +#endif
> +

I think it's typo. I've just check in header ifles and only
protocol fmailies/domain should be translated so above define
should be:
   #define HB_SOCKET_TRANSLATE_DOMAIN

> Index: config/beos/libs.mk
> ===================================================================
> --- config/beos/libs.mk	(revision 12533)
> +++ config/beos/libs.mk	(working copy)
> @@ -26,5 +26,5 @@
>     ifeq ($(HB_HAS_ZLIB_LOCAL),)
>        SYSLIBS += z
>     endif
> -   SYSLIBS += root socket
> +   SYSLIBS += root network
>  endif

I'll commit it in a while, thanks again.

best regards,
Przemek
From vszakats at users.sourceforge.net  Fri Sep 18 06:35:21 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri Sep 18 06:35:26 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12536] trunk/harbour
Message-ID: <E1MoaoD-0007gs-Fx@c3vjzd1.ch3.sourceforge.com>

Revision: 12536
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12536&view=rev
Author:   vszakats
Date:     2009-09-18 10:35:17 +0000 (Fri, 18 Sep 2009)

Log Message:
-----------
2009-09-18 12:19 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * ChangeLog
    ! Typos.

  * source/rtl/hbsocket.c
    ! Applied patch for BEOS/HAIKU by Tamas Tevesz.

  * contrib/hbtip/sendmail.prg
    ! Fixed to append CRLF instead of hb_osNewLine() to e-mail body.
      Patch submitted by Lorenzo Fiorini.
      NOTE: This fix is surely valid, I'll apply further fixes as we
            manage to find out more on the bigger picture.

  * contrib/hbtip/mail.prg
    ! Applied a few patches from mail.prg sent by Gerald Drouillard:
      - Using :setBody() from :New() instead of replicating (little bit
        different) logic.
      - "Content-Length" deleted from generated e-mail text.
      - Added parameter list to METHOD declaration for :setHeader().
    * Minor formatting.

  * config/beos/libs.mk
    + Applied patch from Tamas Tevesz changing 'socket' lib to 'network' for BEOS/HAIKU.

  * utils/hbmk2/hbmk2.prg
    + Done the same for hbmk2 (changed 'socket' lib to 'network' for BEOS/HAIKU).

  * config/detfun.mk
    + Changed to avoid duplicate component detection lines in verbose output.
      (_DET_OPT_VERB=very|yes - not yet documented)
      (note this needs absolute paths to be used when referring to internal
      components in _DET_INC_DEFP/_DET_INC_LOCL)

  * external/sqlite3/Makefile
  * external/libhpdf/Makefile
  * external/libpng/Makefile
  * contrib/hbsqlit3/Makefile
  * contrib/hbhpdf/Makefile
    + Changed to use absolute paths when referring to locally hosted components
      in _DET_INC_LOCL variables.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/beos/libs.mk
    trunk/harbour/config/detfun.mk
    trunk/harbour/contrib/hbhpdf/Makefile
    trunk/harbour/contrib/hbsqlit3/Makefile
    trunk/harbour/contrib/hbtip/mail.prg
    trunk/harbour/contrib/hbtip/sendmail.prg
    trunk/harbour/external/libhpdf/Makefile
    trunk/harbour/external/libpng/Makefile
    trunk/harbour/external/sqlite3/Makefile
    trunk/harbour/source/rtl/hbsocket.c
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Fri Sep 18 06:37:56 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Fri Sep 18 06:38:01 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12537] trunk/harbour
Message-ID: <E1Moaqi-0005My-FZ@3kljzd1.ch3.sourceforge.com>

Revision: 12537
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12537&view=rev
Author:   druzus
Date:     2009-09-18 10:37:55 +0000 (Fri, 18 Sep 2009)

Log Message:
-----------
2009-09-18 12:37 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hb-func.sh
  * harbour/config/beos/libs.mk
    ! use network system library instead of socket in BEOS/HAIKU builds

  * harbour/source/rtl/hbsocket.c
    ! translate protocol/address families in BEOS/HAIKU builds

    Thanks to Tomas for locating both problems

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/hb-func.sh
    trunk/harbour/source/rtl/hbsocket.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Fri Sep 18 06:40:22 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Fri Sep 18 06:40:28 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12538]
	trunk/harbour/ChangeLog
Message-ID: <E1Moat4-0005R0-T4@3kljzd1.ch3.sourceforge.com>

Revision: 12538
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12538&view=rev
Author:   druzus
Date:     2009-09-18 10:40:22 +0000 (Fri, 18 Sep 2009)

Log Message:
-----------
2009-09-18 12:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/ChangeLog
    ! fixed my typo in name Tomas->Tamas - I'm sorry.

Modified Paths:
--------------
    trunk/harbour/ChangeLog


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Fri Sep 18 06:43:30 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri Sep 18 06:43:36 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12539] trunk/harbour
Message-ID: <E1Moaw6-0007q1-9L@c3vjzd1.ch3.sourceforge.com>

Revision: 12539
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12539&view=rev
Author:   vszakats
Date:     2009-09-18 10:43:10 +0000 (Fri, 18 Sep 2009)

Log Message:
-----------

2009-09-18 12:40 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * source/rtl/hbsocket.c
    - Reverted patch committed in 2009-09-18 12:19. It was
      overridden by an enhanced version in 2009-09-18 12:37.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/rtl/hbsocket.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From sscc at mweb.co.za  Fri Sep 18 06:46:13 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Sep 18 06:46:14 2009
Subject: [Harbour] win_com.c
Message-ID: <4AB364F5.1000109@mweb.co.za>

Hi Viktor

In win_com.c, when using tszName with CreateFile() I get an error:

CreateFile(), error (2) : The system cannot find the file specified.

If I use szName I do not get an error. I am using MSVC 2008.

Regards
Alex
From druzus at users.sourceforge.net  Fri Sep 18 07:10:05 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Fri Sep 18 07:10:13 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12540] trunk/harbour
Message-ID: <E1MobLp-00064r-FZ@3kljzd1.ch3.sourceforge.com>

Revision: 12540
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12540&view=rev
Author:   druzus
Date:     2009-09-18 11:10:04 +0000 (Fri, 18 Sep 2009)

Log Message:
-----------
2009-09-18 13:09 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbwin/win_com.c
    ! fixed unicode translation - trailing 0 was not set

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbwin/win_com.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From sscc at mweb.co.za  Fri Sep 18 07:13:22 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Sep 18 07:13:21 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12540] trunk/harbour
In-Reply-To: <E1MobLp-00064r-FZ@3kljzd1.ch3.sourceforge.com>
References: <E1MobLp-00064r-FZ@3kljzd1.ch3.sourceforge.com>
Message-ID: <4AB36B52.5050206@mweb.co.za>

druzus@users.sourceforge.net wrote:

> 2009-09-18 13:09 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>   * harbour/contrib/hbwin/win_com.c
>     ! fixed unicode translation - trailing 0 was not set

Thank you.

Regards
Alex

From vszakats at users.sourceforge.net  Fri Sep 18 08:10:49 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri Sep 18 08:10:55 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12541] trunk/harbour
Message-ID: <E1MocIb-00016I-V6@c3vjzd1.ch3.sourceforge.com>

Revision: 12541
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12541&view=rev
Author:   vszakats
Date:     2009-09-18 12:10:36 +0000 (Fri, 18 Sep 2009)

Log Message:
-----------
2009-09-18 14:09 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/os2/gcc.mk
    % Minor sync of internal libpath/liblist forming logic 
      with other platforms.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/os2/gcc.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Fri Sep 18 08:21:46 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 18 08:21:55 2009
Subject: [Harbour] OS/2 question: HB_GT_LIB=os2pm
Message-ID: <CE7FFFD0-404E-445E-84EF-3BF991635A2D@syenar.hu>

Hi All,

We have an option to set HB_GT_LIB to 'os2pm'.

I'd like to ask OS/2 users what is the use of this,
and do we still need it?

Brgds,
Viktor

From ice at extreme.hu  Fri Sep 18 08:34:06 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Fri Sep 18 08:34:14 2009
Subject: [Harbour] OS/2 question: HB_GT_LIB=os2pm
In-Reply-To: <CE7FFFD0-404E-445E-84EF-3BF991635A2D@syenar.hu>
References: <CE7FFFD0-404E-445E-84EF-3BF991635A2D@syenar.hu>
Message-ID: <alpine.GSO.2.00.0909181427020.17989@dawn.royalcomp.hu>

On Fri, 18 Sep 2009, Viktor Szak?ts wrote:

hi,

 > We have an option to set HB_GT_LIB to 'os2pm'.
 > 
 > I'd like to ask OS/2 users what is the use of this,
 > and do we still need it?

(entirely uneducated guess)

"pm" stands for "presentation manager", which is the os/2 gui. i 
suspect this must have been a gt using pm :), all fingers point to 
contrib/hbgf and/or examples/hbgf, which appears to have been removed 
completely.


-- 
[-]

mkdir /nonexistent
From dmacias at mail.udg.mx  Fri Sep 18 08:34:38 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Sep 18 08:34:55 2009
Subject: [Harbour] Re: OS/2 question: HB_GT_LIB=os2pm
Message-ID: <4AB37E5E.3090602@mail.udg.mx>

Viktor:

>We have an option to set HB_GT_LIB to 'os2pm'.

>I'd like to ask OS/2 users what is the use of this,
>and do we still need it?

Sorry, I do not know
Perhaps it exist since beginning of Harbour OS/2 support

I use gtos2 and never tried os2pm

Maurilio and/or David G. Holm may have the answer

David Macias



From toninhofwi at yahoo.com.br  Fri Sep 18 08:40:16 2009
From: toninhofwi at yahoo.com.br (ToninhoFWi)
Date: Fri Sep 18 08:40:15 2009
Subject: [Harbour] Harbour as WEB application
Message-ID: <mqv6b595j8d5neumhn2fqd9e7bsv2j5d06@4ax.com>

Hi ppl.

What is the best way to write an application for web using Harbour ?

I'm not familiar with web app, all coments are welcome.

Thanks and best regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From vailtom at gmail.com  Fri Sep 18 08:46:14 2009
From: vailtom at gmail.com (Vailton Renato)
Date: Fri Sep 18 08:46:39 2009
Subject: [Harbour] Harbour as WEB application
In-Reply-To: <mqv6b595j8d5neumhn2fqd9e7bsv2j5d06@4ax.com>
References: <mqv6b595j8d5neumhn2fqd9e7bsv2j5d06@4ax.com>
Message-ID: <531d7a750909180546h52ce54e1yc22fc9389ebe3b3a@mail.gmail.com>

I use in some cases the CGI with Apache or IIS. And recently I have
tested the uhttpd2 with Adobe Flex with much success.

Vailton
From harbour.01 at syenar.hu  Fri Sep 18 08:51:22 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 18 08:51:32 2009
Subject: [Harbour] OS/2 question: HB_GT_LIB=os2pm
In-Reply-To: <alpine.GSO.2.00.0909181427020.17989@dawn.royalcomp.hu>
References: <CE7FFFD0-404E-445E-84EF-3BF991635A2D@syenar.hu>
	<alpine.GSO.2.00.0909181427020.17989@dawn.royalcomp.hu>
Message-ID: <37746BE2-96DE-47F8-8C06-9F9DDECCB98F@syenar.hu>

Hi,

> On Fri, 18 Sep 2009, Viktor Szak?ts wrote:
>
> hi,
>
>> We have an option to set HB_GT_LIB to 'os2pm'.
>>
>> I'd like to ask OS/2 users what is the use of this,
>> and do we still need it?
>
> (entirely uneducated guess)
>
> "pm" stands for "presentation manager", which is the os/2 gui. i
> suspect this must have been a gt using pm :), all fingers point to
> contrib/hbgf and/or examples/hbgf, which appears to have been removed
> completely.

My suspect too. It was a hack to add something similar
to OS/2 what we have for Windows called gtgui + mainwin.

Probably in its current form it's not very useful, first
because there don't exist any GUI libs for OS/2 (yet, or
could be that I just missed them), second, because it can
only be used when building core Harbour tools.

Probably the right solution would be a standalone GT, like
GTGUI for OS/2, hopefully such lib will be added as soon as
a GUI lib justifies it (and it's required). Plus a gui main
lib for OS/2 (similar to mainwin).

If there are no objections, I'd like to delete this from GNU
Make system and add support for mainpm lib, which can then
be linked to any OS/2 gui apps. Also hbmk2 can support that.

[ BTW current reference to mainpm object seems wrong, as this
object is never generated. ]

Thanks also to David for the input.

Brgds,
Viktor

From ice at extreme.hu  Fri Sep 18 08:52:50 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Fri Sep 18 08:52:57 2009
Subject: [Harbour] haiku network stuff
In-Reply-To: <20090918103449.GA22979@uran.home.aster.pl>
References: <alpine.GSO.2.00.0909180438150.17989@dawn.royalcomp.hu>
	<20090918103449.GA22979@uran.home.aster.pl>
Message-ID: <alpine.GSO.2.00.0909181434230.17989@dawn.royalcomp.hu>

On Fri, 18 Sep 2009, Przemyslaw Czerpak wrote:

hi,

 > > Index: source/rtl/hbsocket.c
 > > ===================================================================
 > > --- source/rtl/hbsocket.c	(revision 12533)
 > > +++ source/rtl/hbsocket.c	(working copy)
 > > @@ -58,6 +58,10 @@
 > >  #  endif
 > >  #endif
 > >  
 > > +#if defined( HB_OS_BEOS )
 > > +#  define HB_SOCKET_TRANSLATE_TYPE
 > > +#endif
 > > +
 > 
 > I think it's typo. I've just check in header ifles and only
 > protocol fmailies/domain should be translated so above define
 > should be:
 >    #define HB_SOCKET_TRANSLATE_DOMAIN

you are right. i just checked, and it appears that translate_domain 
alone is enough. i saw you committed both, so the following should be 
applied to the current tree:

Index: source/rtl/hbsocket.c
===================================================================
--- source/rtl/hbsocket.c	(revision 12540)
+++ source/rtl/hbsocket.c	(working copy)
@@ -126,7 +126,6 @@
 #  endif
 #  if defined( HB_OS_BEOS )
 #     define HB_SOCKET_TRANSLATE_DOMAIN
-#     define HB_SOCKET_TRANSLATE_TYPE
 #  endif
 #  if defined( HB_OS_LINUX )
 #     define HB_HAS_SELECT_TIMER

btw, did you find an alternative terminal, or could you make the 
build-in terminal work like a proper xterm? or some gt setting maybe? 
i'm having all kinds of character set problems, which disappear when i 
ssh in from my regular xterm -- but on the other hand, either sshd or 
the network hangs every now and then.

of your environment is stable, or at least stable-ish, any info 
would be appreciated :)

-- 
[-]

mkdir /nonexistent
From maurilio.longo at libero.it  Fri Sep 18 08:57:36 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Sep 18 08:57:45 2009
Subject: [Harbour] OS/2 question: HB_GT_LIB=os2pm
In-Reply-To: <CE7FFFD0-404E-445E-84EF-3BF991635A2D@syenar.hu>
References: <CE7FFFD0-404E-445E-84EF-3BF991635A2D@syenar.hu>
Message-ID: <4AB383C0.7060602@libero.it>

Viktor,

an old contrib from Antonio Linares, see changelog:

2001-08-23 16:43 GMT+2 Maurilio Longo <maurilio.longo@libero.it>
   + source/vm/mainpm.c
     + added mainpm.c entry point for OS/2 Presentation Manager applications
       based on FiveWin GUI library


I think it can be removed, since it was never finished, it is more like a
proof of concept than working code.

Maurilio.



Viktor Szak?ts wrote:
> Hi All,
> 
> We have an option to set HB_GT_LIB to 'os2pm'.
> 
> I'd like to ask OS/2 users what is the use of this,
> and do we still need it?
> 
> Brgds,
> Viktor
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Fri Sep 18 09:07:04 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri Sep 18 09:07:12 2009
Subject: [Harbour] OS/2 question: HB_GT_LIB=os2pm
In-Reply-To: <4AB383C0.7060602@libero.it>
References: <CE7FFFD0-404E-445E-84EF-3BF991635A2D@syenar.hu>
	<4AB383C0.7060602@libero.it>
Message-ID: <18d502870909180607y2d14e559m7abc259a246eb14d@mail.gmail.com>

Okay, thank you very much.
Brgds,
Viktor

On Fri, Sep 18, 2009 at 2:57 PM, Maurilio Longo <maurilio.longo@libero.it>wrote:

> Viktor,
>
> an old contrib from Antonio Linares, see changelog:
>
> 2001-08-23 16:43 GMT+2 Maurilio Longo <maurilio.longo@libero.it>
>   + source/vm/mainpm.c
>     + added mainpm.c entry point for OS/2 Presentation Manager applications
>       based on FiveWin GUI library
>
>
> I think it can be removed, since it was never finished, it is more like a
> proof of concept than working code.
>
> Maurilio.
>
>
>
> Viktor Szak?ts wrote:
> > Hi All,
> >
> > We have an option to set HB_GT_LIB to 'os2pm'.
> >
> > I'd like to ask OS/2 users what is the use of this,
> > and do we still need it?
> >
> > Brgds,
> > Viktor
> >
> > _______________________________________________
> > Harbour mailing list
> > Harbour@harbour-project.org
> > http://lists.harbour-project.org/mailman/listinfo/harbour
> >
>
> --
>  __________
> |  |  | |__| Maurilio Longo
> |_|_|_|____| farmaconsult s.r.l.
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090918/d79657da/attachment.html
From harbour.01 at syenar.hu  Fri Sep 18 09:08:12 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Fri Sep 18 09:08:18 2009
Subject: [Harbour] OS/2 watcom MT mode
Message-ID: <18d502870909180608s2cc2f9cew5fc3ee7becef6af8@mail.gmail.com>

I'm getting this when building os2/watcom target:
--
wpp386  -zq -bt=os2 -w3 -5r -fp5 -onaehtr -s -ei -zp4 -zt0 -oi+ -i.
-i../../../../../../include   -DHB_MT_VM -fo=thread.obj
 ../../../../thread.c
../../../../thread.c(785): Warning! W869: col(25) use of '_beginthread'
requires build target to be multi-threaded
---

Is this normal? I remember some discussions about this, but
seemingly there wasn't any conclusion. (?)

Brgds,
Viktor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090918/d07e4a11/attachment.html
From vszakats at users.sourceforge.net  Fri Sep 18 09:13:39 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri Sep 18 09:13:45 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12542] trunk/harbour
Message-ID: <E1ModHP-0001GC-Fw@d5vjzd1.ch3.sourceforge.com>

Revision: 12542
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12542&view=rev
Author:   vszakats
Date:     2009-09-18 13:13:32 +0000 (Fri, 18 Sep 2009)

Log Message:
-----------
2009-09-18 15:12 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * doc/gmake.txt
  - source/vm/mainpm.c
  * config/os2/gcc.mk
  * examples/hbdoc/examples/core_es/dirstruc.txt
    - Deleted os2pm and mainpm references. It wasn't needed, so 
      (with OS/2 users) we decided to delete it.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/os2/gcc.mk
    trunk/harbour/doc/gmake.txt
    trunk/harbour/examples/hbdoc/examples/core_es/dirstruc.txt

Removed Paths:
-------------
    trunk/harbour/source/vm/mainpm.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From ice at extreme.hu  Fri Sep 18 09:30:52 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Fri Sep 18 09:30:59 2009
Subject: [Harbour] haiku network stuff
In-Reply-To: <alpine.GSO.2.00.0909180438150.17989@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909180438150.17989@dawn.royalcomp.hu>
Message-ID: <alpine.GSO.2.00.0909181530130.17989@dawn.royalcomp.hu>

On Fri, 18 Sep 2009, Tamas TEVESZ wrote:

 > the firtst hunk is apparently needed -- with that, netiotest actually 
 > starts and runs and seems to be doing its stuff fine. note, i'm 
 > deliberately not mentioning an exit of any sorts -- it doesn't, 
 > instead it eats up all memory and hangs, but that's for another day, 

it's netio_serverstop() that goes haywire.

-- 
[-]

mkdir /nonexistent
From druzus at acn.waw.pl  Fri Sep 18 10:15:43 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 18 10:15:49 2009
Subject: [Harbour] haiku network stuff
In-Reply-To: <alpine.GSO.2.00.0909181434230.17989@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909180438150.17989@dawn.royalcomp.hu>
	<20090918103449.GA22979@uran.home.aster.pl>
	<alpine.GSO.2.00.0909181434230.17989@dawn.royalcomp.hu>
Message-ID: <20090918141543.GA6153@uran.home.aster.pl>

On Fri, 18 Sep 2009, Tamas TEVESZ wrote:

Hi,

> you are right. i just checked, and it appears that translate_domain 
> alone is enough. i saw you committed both, so the following should be 
> applied to the current tree:
>  #  if defined( HB_OS_BEOS )
>  #     define HB_SOCKET_TRANSLATE_DOMAIN
> -#     define HB_SOCKET_TRANSLATE_TYPE
>  #  endif

Yes, I'll remove it though it should not cause any bad side effects.

> btw, did you find an alternative terminal, or could you make the 
> build-in terminal work like a proper xterm? or some gt setting maybe? 
> i'm having all kinds of character set problems, which disappear when i 
> ssh in from my regular xterm -- but on the other hand, either sshd or 
> the network hangs every now and then.
> of your environment is stable, or at least stable-ish, any info 
> would be appreciated :)

I downloaded ISO CD and installed HAIKU in VirtualBOX and it works
quite well. The native xterm works without bigger problems though
it sends arrow escape sequence just like XTERM3.x.x for CTRL+[arrows]
so when I ssh from HAIKU to my host OS and run Harbour application then
it's a problem with [arrows] keys which are recognized as CTRL+[arrows]
BTW I was using GTTRM.
I haven't tried to connect from my host computer to HAIKU in VBOX but
I do not expect any bigger problems.
At the beginning I have some problems with stability but when I disabled
SOUND support in VirtualBOX all begins to work without even single crash.
As network adapter I had to chose "Intel PRO/1000 MT Desktop (82540EM)".
Please remember that HAIKU does not write MBR during installation so
you will have to create it using some ISO image with FDISK or you will
have to leave HAIKU installation ISO image and hit space at the beginning
to chose booting from HAIKU partition.

best regards,
Przemek
From mauriliolongo at users.sourceforge.net  Fri Sep 18 10:22:23 2009
From: mauriliolongo at users.sourceforge.net (mauriliolongo@users.sourceforge.net)
Date: Fri Sep 18 10:22:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12543]
	trunk/harbour/config/os2/gcc.mk
Message-ID: <E1MoeLv-0006p2-07@bj8yhf1.ch3.sourceforge.com>

Revision: 12543
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12543&view=rev
Author:   mauriliolongo
Date:     2009-09-18 14:22:22 +0000 (Fri, 18 Sep 2009)

Log Message:
-----------
2009-09-18 16:22 UTC+0200 Maurilio Longo (maurilio.longo@libero.it)
  * config/os2/gcc.mk
    * enabled .dll creation for OS/2 and GCC.

Modified Paths:
--------------
    trunk/harbour/config/os2/gcc.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From maurilio.longo at libero.it  Fri Sep 18 10:28:55 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Sep 18 10:29:04 2009
Subject: [Harbour] OS/2 .dll creation
Message-ID: <4AB39927.6020403@libero.it>

Hi Viktor,

I've just committed .dll creation under OS/2 and GCC.

I needed to use external programs to create .def file and import library for
the .dlls; I've just added a reference to them to the .mk file; these commands
are available when GCC is istalled.

but I've got a couple of questions:

1) import library for .dll has to be created inside lib\; how can I reference
the correct path from gcc.mk (.dll is created inside bin\)?

2) how can I test that the .dll is working ok?

3) clean does not remove .dlls, do I have to add .dll removing to some .mk
file in particular?

Thanks.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Fri Sep 18 10:46:07 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 18 10:46:16 2009
Subject: [Harbour] OS/2 .dll creation
In-Reply-To: <4AB39927.6020403@libero.it>
References: <4AB39927.6020403@libero.it>
Message-ID: <C894B049-C412-4C51-9548-A59486A9E2E1@syenar.hu>

Hi Maurilio,

> I've just committed .dll creation under OS/2 and GCC.

Great, I just saw it.

> I needed to use external programs to create .def file and import  
> library for
> the .dlls; I've just added a reference to them to the .mk file;  
> these commands
> are available when GCC is istalled.

That seems perfect.

> but I've got a couple of questions:
>
> 1) import library for .dll has to be created inside lib\; how can I  
> reference
> the correct path from gcc.mk (.dll is created inside bin\)?

You can use variable $(IMP_FILE) (this will point to lib/<dllname>.lib  
file)

> 2) how can I test that the .dll is working ok?

That's a good one, given that OS/2 .dll support in hbmk2
isn't ready yet. I'd say try it with 'hbmk2 hello.prg -shared -trace'
and tweak shown link command line until it works. If it does,
it can be added to hbmk2 code.

I'll add some blind modifications to help that.

> 3) clean does not remove .dlls, do I have to add .dll removing to  
> some .mk
> file in particular?

Support for that is already implemented for OS/2 shells,
so you can check why isn't it working properly. F.e.
by removing '@'s from command to see what gets executed.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Fri Sep 18 10:55:54 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri Sep 18 10:56:00 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12544] trunk/harbour
Message-ID: <E1MoesM-0002RA-5f@3kljzd1.ch3.sourceforge.com>

Revision: 12544
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12544&view=rev
Author:   vszakats
Date:     2009-09-18 14:55:53 +0000 (Fri, 18 Sep 2009)

Log Message:
-----------
2009-09-18 16:55 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    ! Fixed to add windows system libs in mingw -shared mode.
    + Added some steps towards os2/gcc -shared support.

  * INSTALL
    * Minor.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From ice at extreme.hu  Fri Sep 18 18:04:26 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Fri Sep 18 18:04:35 2009
Subject: [Harbour] haiku network stuff
In-Reply-To: <20090918141543.GA6153@uran.home.aster.pl>
References: <alpine.GSO.2.00.0909180438150.17989@dawn.royalcomp.hu>
	<20090918103449.GA22979@uran.home.aster.pl>
	<alpine.GSO.2.00.0909181434230.17989@dawn.royalcomp.hu>
	<20090918141543.GA6153@uran.home.aster.pl>
Message-ID: <alpine.GSO.2.00.0909190001330.17989@dawn.royalcomp.hu>

On Fri, 18 Sep 2009, Przemyslaw Czerpak wrote:

 > I downloaded ISO CD and installed HAIKU in VirtualBOX and it works

w.o.w.

i've been (and probably will stay :) a vmware guy (i like the 
interface better...), but i must say, haiku runs about a gazillion 
trillion plus one time better in vb than it does in vmw.

thanks a lot for the tip.

-- 
[-]

mkdir /nonexistent
From guy.roussin at teledetection.fr  Fri Sep 18 18:08:29 2009
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Fri Sep 18 18:08:37 2009
Subject: [Harbour] Can't build harbour/debian with current svn
Message-ID: <4AB404DD.10403@teledetection.fr>

Hi,

$ LANG=C fakeroot sh mpkg_deb.sh
mpkg_deb.sh: line 123: ./bin/pack_src.sh: No such file or directory

Thank you,

-- 
Guy

From ice at extreme.hu  Fri Sep 18 18:20:12 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Fri Sep 18 18:20:20 2009
Subject: [Harbour] Can't build harbour/debian with current svn
In-Reply-To: <4AB404DD.10403@teledetection.fr>
References: <4AB404DD.10403@teledetection.fr>
Message-ID: <alpine.GSO.2.00.0909190018290.17989@dawn.royalcomp.hu>

On Sat, 19 Sep 2009, Guy Roussin wrote:

 > $ LANG=C fakeroot sh mpkg_deb.sh

fakeroot debian/rules binary


-- 
[-]

mkdir /nonexistent
From druzus at users.sourceforge.net  Fri Sep 18 18:20:57 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Fri Sep 18 18:21:03 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12545] trunk/harbour
Message-ID: <E1Molp3-0004sd-TJ@c3vjzd1.ch3.sourceforge.com>

Revision: 12545
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12545&view=rev
Author:   druzus
Date:     2009-09-18 22:20:54 +0000 (Fri, 18 Sep 2009)

Log Message:
-----------
2009-09-19 00:20 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/common/hbgete.c
  * harbour/source/common/hbprintf.c
    ! fixed OpenBSD builds

  * harbour/config/detect.mk
    * added /usr/local/include to scanned paths

  * harbour/contrib/xhb/hboutdbg.c
    * formatting

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/detect.mk
    trunk/harbour/contrib/xhb/hboutdbg.c
    trunk/harbour/source/common/hbgete.c
    trunk/harbour/source/common/hbprintf.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Fri Sep 18 18:30:45 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Fri Sep 18 18:30:51 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12546] trunk/harbour
Message-ID: <E1MolyX-0004AU-I5@d5vjzd1.ch3.sourceforge.com>

Revision: 12546
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12546&view=rev
Author:   vszakats
Date:     2009-09-18 22:30:44 +0000 (Fri, 18 Sep 2009)

Log Message:
-----------
2009-09-19 00:27 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * INSTALL
  * harbour-win-spec
  * harbour-wce-spec
  * Makefile
  * source/pp/Makefile
  * source/Makefile
  * config/global.mk
    * Renamed HB_HOST_BUILD to HB_BUILD_PART. Values 'yes' changed
      to compiler.
    + Documented HB_BUILD_PART in INSTALL.

  * mpkg_deb.sh
  * mpkg_rpm.sh
  * mpkg_rpm_win.sh
  * mpkg_rpm_wce.sh
    ! Changed bin/pack_src.sh to mpkg_src.sh.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/Makefile
    trunk/harbour/config/global.mk
    trunk/harbour/harbour-wce-spec
    trunk/harbour/harbour-win-spec
    trunk/harbour/mpkg_deb.sh
    trunk/harbour/mpkg_rpm.sh
    trunk/harbour/mpkg_rpm_wce.sh
    trunk/harbour/mpkg_rpm_win.sh
    trunk/harbour/source/Makefile
    trunk/harbour/source/pp/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Sat Sep 19 01:19:09 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Sat Sep 19 01:19:15 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12547] trunk/harbour
Message-ID: <E1MosLl-0003XI-Nn@3kljzd1.ch3.sourceforge.com>

Revision: 12547
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12547&view=rev
Author:   druzus
Date:     2009-09-19 05:19:08 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
2009-09-19 07:18 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/xhb/hboutdbg.c
    * casting for some very pedantic C compilers

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/xhb/hboutdbg.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Sat Sep 19 01:47:17 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Sat Sep 19 01:47:23 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12548] trunk/harbour
Message-ID: <E1Mosmz-0003tX-2b@d5vjzd1.ch3.sourceforge.com>

Revision: 12548
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12548&view=rev
Author:   druzus
Date:     2009-09-19 05:47:14 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
2009-09-19 07:46 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hb-func.sh
    * updated for OpenBSD builds

  * harbour/external/sqlite3/sqlite3.c
    ! casting

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/hb-func.sh
    trunk/harbour/external/sqlite3/sqlite3.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From guy.roussin at teledetection.fr  Sat Sep 19 02:31:02 2009
From: guy.roussin at teledetection.fr (Guy Roussin)
Date: Sat Sep 19 02:31:10 2009
Subject: [Harbour] Can't build harbour/debian with current svn
In-Reply-To: <alpine.GSO.2.00.0909190018290.17989@dawn.royalcomp.hu>
References: <4AB404DD.10403@teledetection.fr>
	<alpine.GSO.2.00.0909190018290.17989@dawn.royalcomp.hu>
Message-ID: <4AB47AA6.1070601@teledetection.fr>

Hi,
>  > $ LANG=C fakeroot sh mpkg_deb.sh
>
> fakeroot debian/rules binary
Thank you Tamas

I use :

 > $ dpkg-buildpackage -rfakeroot -uc -b

and build is fine.
I suggest to remove mpkg_deb.sh from svn

-- 
Guy 

From vszakats at users.sourceforge.net  Sat Sep 19 04:16:55 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 19 04:17:00 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12549] trunk/harbour
Message-ID: <E1Mov7n-0006WU-Jk@d5vjzd1.ch3.sourceforge.com>

Revision: 12549
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12549&view=rev
Author:   vszakats
Date:     2009-09-19 08:16:54 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
2009-09-19 10:15 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * debian/rules
    % Minor Makefile optimizations. I hope this is right.

  * INSTALL
    + Readded alternative package for curl on debian.

  + external/zlib/zlib.dif
  + external/sqlite3/sqlite3.dif
    + Added .dif files for local patches to locally hosted
      3rd party code. Pls update these when modifying original
      source locally.
    ; NOTE: I intentionally didn't add svn props to these files.

  * external/sqlite3/Makefile
    ! Typo in comment.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/debian/rules
    trunk/harbour/external/sqlite3/Makefile

Added Paths:
-----------
    trunk/harbour/external/sqlite3/sqlite3.dif
    trunk/harbour/external/zlib/zlib.dif


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat Sep 19 05:27:34 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 19 05:27:41 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12550] trunk/harbour
Message-ID: <E1MowEA-0008Fp-9s@3kljzd1.ch3.sourceforge.com>

Revision: 12550
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12550&view=rev
Author:   vszakats
Date:     2009-09-19 09:27:32 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
2009-09-19 11:26 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * external/sqlite3/sqlite3.c
  * external/sqlite3/sqlite3.dif
  * external/sqlite3/sqlite3.h
    + sqlite upgraded to 3.6.18 (from 3.6.17)

  * external/sqlite3/Makefile
    + Enabled for mingwarm. Now it compiles with only one warning.

  * utils/hbmk2/hbmk2.prg
    + Added 'fossil' version control system support to -vcshead option.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/external/sqlite3/Makefile
    trunk/harbour/external/sqlite3/sqlite3.c
    trunk/harbour/external/sqlite3/sqlite3.dif
    trunk/harbour/external/sqlite3/sqlite3.h
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From toninhofwi at yahoo.com.br  Sat Sep 19 07:29:59 2009
From: toninhofwi at yahoo.com.br (ToninhoFWi)
Date: Sat Sep 19 07:29:55 2009
Subject: [Harbour] Harbour as WEB application
In-Reply-To: <531d7a750909180546h52ce54e1yc22fc9389ebe3b3a@mail.gmail.com>
References: <mqv6b595j8d5neumhn2fqd9e7bsv2j5d06@4ax.com>
	<531d7a750909180546h52ce54e1yc22fc9389ebe3b3a@mail.gmail.com>
Message-ID: <q2g9b5hbnfi32mb5t6gp942sfsk5m7hpqi@4ax.com>

>I use in some cases the CGI with Apache or IIS. And recently I have
>tested the uhttpd2 with Adobe Flex with much success.

Hi Vailton,

Thanks for the answer.

I'll take a look at Adoble Flex.


Regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From vszakats at users.sourceforge.net  Sat Sep 19 07:46:18 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 19 07:46:25 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12551] trunk/harbour
Message-ID: <E1MoyOQ-0001fi-RS@dn4whf1.ch3.sourceforge.com>

Revision: 12551
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12551&view=rev
Author:   vszakats
Date:     2009-09-19 11:46:17 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
2009-09-19 13:45 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * INSTALL
    * HB_INC_* -> HB_WITH_*. This is now the new documented (pbly
      the final name) to control external dependencies. Usage is
      the same as with HB_INC_*. HB_INC_* is still accepted.
    + Synced .deb and .rpm package names with information found in
      mpkg_*.sh files.

  * config/detfun.mk
    ! Fixed to accept HB_WITH_* variables in place of HB_INC_*.
      If both are specified, HB_WITH_* will be used.

  * mpkg_deb.sh
    % Deleted redundant-looking package detection. Packages are now
      detected from GNU Make everywhere where needed.
      Also deleted redundant assembly of HB_CONTRIBLIBS variable.

  * mpkg_tgz.sh
    % Deleted -fPIC handling. Now handled by GNU Make system.
    - Deleted HB_NCURSES_FINK variable which isn't used in Harbour anywhere.

  * config/global.mk
    + Setting lib INSTALL dir to lib64 for x86_64 targets.
      (Please extend this with other 64-bit CPU types, if
      this is how it should work on *nixes)
      This rule was taken from mpkg_tgz.sh.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/config/detfun.mk
    trunk/harbour/config/global.mk
    trunk/harbour/mpkg_deb.sh
    trunk/harbour/mpkg_tgz.sh


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Sat Sep 19 07:51:16 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Sep 19 07:51:23 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12549] trunk/harbour
In-Reply-To: <E1Mov7n-0006WU-Jk@d5vjzd1.ch3.sourceforge.com>
References: <E1Mov7n-0006WU-Jk@d5vjzd1.ch3.sourceforge.com>
Message-ID: <20090919115116.GA30653@uran.home.aster.pl>

On Sat, 19 Sep 2009, vszakats@users.sourceforge.net wrote:

Hi,

>   + external/zlib/zlib.dif
>   + external/sqlite3/sqlite3.dif
>     + Added .dif files for local patches to locally hosted
>       3rd party code. Pls update these when modifying original
>       source locally.
>     ; NOTE: I intentionally didn't add svn props to these files.

Without native EOL it will be hard to update them for none Win/DOS users
anyhow I suggest to remove them. They are redundant and such diffs can be
always generated automatically using svn diff command and for sure it's
much safer method then .diff files updated manually by developers.
If you want then you can simply add log file to store revision number just
after committing new version of given library and before appalling diff
generated for previous code. All new syncs should be done in the following
steps:
   1. generate locally .diff file from last library upgrade using
         svn diff -r <revision> ...
      if possible check <revision> number in log file.
   2. commit new library source code
   3. patch new library using .diff file generated in step 1 and
      update log file adding information about current revision
      number
   4. commit modifications

The log file is optional but it can reduce time necessary to validate exact
revision number from last library update.

best regards,
Przemek
From druzus at users.sourceforge.net  Sat Sep 19 07:53:06 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Sat Sep 19 07:53:11 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12552] trunk/harbour
Message-ID: <E1MoyV0-0002hW-Ls@3kljzd1.ch3.sourceforge.com>

Revision: 12552
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12552&view=rev
Author:   druzus
Date:     2009-09-19 11:53:05 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
2009-09-19 13:52 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hb-func.sh
    ! fixed few problems introduced by macro name modifications and removed
      some wrong RT checking

  * harbour/bin/hb-func.sh
  * harbour/source/common/hbprintf.c
  * harbour/source/rtl/fstemp.c
  * harbour/config/bsd/libs.mk
    * updated for NetBSD builds

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/hb-func.sh
    trunk/harbour/config/bsd/libs.mk
    trunk/harbour/source/common/hbprintf.c
    trunk/harbour/source/rtl/fstemp.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat Sep 19 07:58:26 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 19 07:58:33 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12553] trunk/harbour
Message-ID: <E1MoyaA-0001yt-W2@dn4whf1.ch3.sourceforge.com>

Revision: 12553
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12553&view=rev
Author:   vszakats
Date:     2009-09-19 11:58:24 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
2009-09-19 13:53 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/global.mk
    ! Typo.

  * utils/hbmk2/hbmk2.prg
    ! Fixed BSD CURSES lib name.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/global.mk
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat Sep 19 08:01:47 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 19 08:01:52 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12554] trunk/harbour
Message-ID: <E1MoydP-00026R-2H@dn4whf1.ch3.sourceforge.com>

Revision: 12554
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12554&view=rev
Author:   vszakats
Date:     2009-09-19 12:01:41 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
2009-09-19 14:00 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * external/zlib/zlib.dif
  * external/sqlite3/sqlite3.dif
    ! Set native EOL props. This one is indeed required.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/external/sqlite3/sqlite3.dif
    trunk/harbour/external/zlib/zlib.dif

Property Changed:
----------------
    trunk/harbour/external/sqlite3/sqlite3.dif
    trunk/harbour/external/zlib/zlib.dif


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Sat Sep 19 08:33:12 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Sep 19 08:33:21 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12549] trunk/harbour
In-Reply-To: <20090919115116.GA30653@uran.home.aster.pl>
References: <E1Mov7n-0006WU-Jk@d5vjzd1.ch3.sourceforge.com>
	<20090919115116.GA30653@uran.home.aster.pl>
Message-ID: <1647BB89-BCE2-4C01-8B38-E87CF8F83497@syenar.hu>

Hi,

>>  + external/zlib/zlib.dif
>>  + external/sqlite3/sqlite3.dif
>>    + Added .dif files for local patches to locally hosted
>>      3rd party code. Pls update these when modifying original
>>      source locally.
>>    ; NOTE: I intentionally didn't add svn props to these files.
>
> Without native EOL it will be hard to update them for none Win/DOS  
> users
> anyhow I suggest to remove them. They are redundant and such diffs  
> can be
> always generated automatically using svn diff command and for sure  
> it's
> much safer method then .diff files updated manually by developers.
> If you want then you can simply add log file to store revision  
> number just
> after committing new version of given library and before appalling  
> diff
> generated for previous code. All new syncs should be done in the  
> following
> steps:
>   1. generate locally .diff file from last library upgrade using
>         svn diff -r <revision> ...
>      if possible check <revision> number in log file.

This will give a diff between lib versions, but local
modifications won't appear separately unless they are
always repatched in separate commit after each upgrade.
But once this is missed by mistake, the chain becomes
broken and it becomes quite an effort to repatch it right.

>   2. commit new library source code
>   3. patch new library using .diff file generated in step 1 and
>      update log file adding information about current revision
>      number
>   4. commit modifications
>
> The log file is optional but it can reduce time necessary to  
> validate exact
> revision number from last library update.

Hm, current method with .dif isn't prefect either, but
IMO it more clearly documents the fact that we're dealing
with locally patched code, and it makes it easier to
separate patching and lib upgrading steps. Your method
puts all the burden to lib upgrader, which is IMO more
error prone.

We should also consider that patching sources locally
happens quite rarely and it should only be done if
absolutely necessary. Upgrading however, may happen
quite frequently (speaking of sqlite3, libpng).

.dif method also makes it easy to flush those patches
upstream (by any contributor) which would be the ultimate
goal after all, rather than rolling them locally forever.

Brgds,
Viktor

From druzus at users.sourceforge.net  Sat Sep 19 08:43:59 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Sat Sep 19 08:44:05 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12555] trunk/harbour
Message-ID: <E1MozIF-0003ha-Nh@3kljzd1.ch3.sourceforge.com>

Revision: 12555
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12555&view=rev
Author:   druzus
Date:     2009-09-19 12:43:58 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
2009-09-19 14:43 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/mpkg_deb.sh
  * harbour/mpkg_rpm.sh
  * harbour/mpkg_rpm_win.sh
  * harbour/bin/hb-mkdyn.sh
  * harbour/bin/postinst.sh
  * harbour/mpkg_src.sh
  * harbour/mpkg_rpm_wce.sh
  * harbour/mpkg_tgz.sh
    * replaced command used to force script execution by bash,
      instead of:
         [ "$BASH" ] || exec bash `which $0` ${1+"$@"}
      use:
         [ "$BASH" ] || exec bash $0 "$@"

  * harbour/bin/hb-func.sh
    ! use HB_HAS_* variables instead of HB_INC_*

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/hb-func.sh
    trunk/harbour/bin/hb-mkdyn.sh
    trunk/harbour/bin/postinst.sh
    trunk/harbour/mpkg_deb.sh
    trunk/harbour/mpkg_rpm.sh
    trunk/harbour/mpkg_rpm_wce.sh
    trunk/harbour/mpkg_rpm_win.sh
    trunk/harbour/mpkg_src.sh
    trunk/harbour/mpkg_tgz.sh


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat Sep 19 08:48:32 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 19 08:48:38 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12556] trunk/harbour
Message-ID: <E1MozMe-0003oA-V1@3kljzd1.ch3.sourceforge.com>

Revision: 12556
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12556&view=rev
Author:   vszakats
Date:     2009-09-19 12:48:31 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------

2009-09-19 14:47 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    % Deleted bin dir from lib dir list in shared mode for
      non-*nix compilers. Implibs are used in all cases so this
      is isn't necessary anymore.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Sat Sep 19 09:17:38 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Sep 19 09:17:45 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12549] trunk/harbour
In-Reply-To: <1647BB89-BCE2-4C01-8B38-E87CF8F83497@syenar.hu>
References: <E1Mov7n-0006WU-Jk@d5vjzd1.ch3.sourceforge.com>
	<20090919115116.GA30653@uran.home.aster.pl>
	<1647BB89-BCE2-4C01-8B38-E87CF8F83497@syenar.hu>
Message-ID: <20090919131738.GA23032@uran.home.aster.pl>

On Sat, 19 Sep 2009, Szak?ts Viktor wrote:

Hi,

>>   1. generate locally .diff file from last library upgrade using
>>         svn diff -r <revision> ...
>>      if possible check <revision> number in log file.
> This will give a diff between lib versions, but local
> modifications won't appear separately unless they are
> always repatched in separate commit after each upgrade.

Exactly and they should be done in such way, I asked about it
few times in the past: 1-st commit of 3-rd party code should
always contain unmodified version then we should commit our
patches. If it's a problem now then it can be resolved immediately
by committing unmodified code then storing SVN revision number in
log file and committing our patches.

> But once this is missed by mistake, the chain becomes
> broken and it becomes quite an effort to repatch it right.

In such case you will have to take real source code. Just like now
to update .diff files so I do not understand why I have to make sth
many times on each update when I can make the same only once just
before upgrading to new version.

>>   2. commit new library source code
>>   3. patch new library using .diff file generated in step 1 and
>>      update log file adding information about current revision
>>      number
>>   4. commit modifications
>> The log file is optional but it can reduce time necessary to validate 
>> exact
>> revision number from last library update.
> Hm, current method with .dif isn't prefect either, but
> IMO it more clearly documents the fact that we're dealing
> with locally patched code, and it makes it easier to
> separate patching and lib upgrading steps. Your method
> puts all the burden to lib upgrader, which is IMO more
> error prone.
> We should also consider that patching sources locally
> happens quite rarely and it should only be done if
> absolutely necessary. Upgrading however, may happen
> quite frequently (speaking of sqlite3, libpng).
> .dif method also makes it easy to flush those patches
> upstream (by any contributor) which would be the ultimate
> goal after all, rather than rolling them locally forever.

I'm sorry but I do not agree. For me it's only unnecessary job which
can be eliminated by committing clean version of new library in 1-st
step what for me is the perfect solution.
I do not understand why I have to watch for modifications create
diffs with local copy of original source, update them, etc. in each
commit (I do not believe it will happen without errors) and on
each update I have to repeat things I can made without any diff
file using SVN.
I do not see anything what we can benefit having such .diffs files in
SVN. For sure they do not help in any updates because to create them
it's necessary to compare with original library so it will be always
safer to create .diff file just before an update to be sure that no one
forgot to update the one in SVN. IMHO it's only unnecessary additional
job for developers which can be source of potential problems if someone
use such not updated or wrongly updated (i.e. developer was too lazy
and created .diff entry "by hand" with mistake) .diff instead of
generating new one so it will not help in future upgrades.
In summary you are asking developers to use SVN to replicate SVN job
manually. Creating .diff files is one of the most important thing in
different versions systems.

best regards,
Przemek
From vszakats at users.sourceforge.net  Sat Sep 19 09:18:15 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 19 09:18:21 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12557] trunk/harbour
Message-ID: <E1MozpP-0003qM-Gn@c3vjzd1.ch3.sourceforge.com>

Revision: 12557
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12557&view=rev
Author:   vszakats
Date:     2009-09-19 13:18:14 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
2009-09-19 15:11 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * source/dynlib/mt/Makefile
  * source/dynlib/Makefile
  * source/Makefile
  * config/global.mk
  * config/bin.mk
    + Added experimental support for HB_BUILD_SHARED=yes setting,
      which tells GNU Make to create shared Harbour tool executables.
    ; TOFIX: watcom for sure needs to be fixed.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/config/bin.mk
    trunk/harbour/config/global.mk
    trunk/harbour/source/Makefile
    trunk/harbour/source/dynlib/Makefile
    trunk/harbour/source/dynlib/mt/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Sat Sep 19 09:25:45 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Sep 19 09:25:53 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12557] trunk/harbour
In-Reply-To: <E1MozpP-0003qM-Gn@c3vjzd1.ch3.sourceforge.com>
References: <E1MozpP-0003qM-Gn@c3vjzd1.ch3.sourceforge.com>
Message-ID: <20090919132545.GA13238@uran.home.aster.pl>

On Sat, 19 Sep 2009, vszakats@users.sourceforge.net wrote:
> 2009-09-19 15:11 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>   * source/dynlib/mt/Makefile
>   * source/dynlib/Makefile
>   * source/Makefile
>   * config/global.mk
>   * config/bin.mk
>     + Added experimental support for HB_BUILD_SHARED=yes setting,
>       which tells GNU Make to create shared Harbour tool executables.
>     ; TOFIX: watcom for sure needs to be fixed.

Wow, thank you very much.

Watcom shared library in Linux builds does not work correctly at all
though at least now they can be created and it's probably problem with
watcom but I haven't look for details yet.
Do you have problems with other watcom builds?
BTW has anyone tried to create .DLLs for DOS builds?
In theory it's possible.

best regards,
Przemek
From harbour.01 at syenar.hu  Sat Sep 19 09:39:10 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Sep 19 09:39:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12549] trunk/harbour
In-Reply-To: <20090919131738.GA23032@uran.home.aster.pl>
References: <E1Mov7n-0006WU-Jk@d5vjzd1.ch3.sourceforge.com>
	<20090919115116.GA30653@uran.home.aster.pl>
	<1647BB89-BCE2-4C01-8B38-E87CF8F83497@syenar.hu>
	<20090919131738.GA23032@uran.home.aster.pl>
Message-ID: <2C3CD433-4529-4938-843C-4FE734C14FB6@syenar.hu>

> I'm sorry but I do not agree. For me it's only unnecessary job which
> can be eliminated by committing clean version of new library in 1-st
> step what for me is the perfect solution.
> I do not understand why I have to watch for modifications create
> diffs with local copy of original source, update them, etc. in each
> commit (I do not believe it will happen without errors) and on
> each update I have to repeat things I can made without any diff
> file using SVN.
> I do not see anything what we can benefit having such .diffs files in
> SVN. For sure they do not help in any updates because to create them
> it's necessary to compare with original library so it will be always
> safer to create .diff file just before an update to be sure that no  
> one
> forgot to update the one in SVN. IMHO it's only unnecessary additional
> job for developers which can be source of potential problems if  
> someone
> use such not updated or wrongly updated (i.e. developer was too lazy
> and created .diff entry "by hand" with mistake) .diff instead of
> generating new one so it will not help in future upgrades.
> In summary you are asking developers to use SVN to replicate SVN job
> manually. Creating .diff files is one of the most important thing in
> different versions systems.

No, I'm asking to not make much more difficult job what was
so far an easy task (or at least split the effort), and which
was done so far exclusively by me. (i.e. upgrading foreign sources
inside our repo)

So for me personally two options are left:
1) I won't upgrade any embedded sources which have any patches.
2) I will continue to upgrade to original version and will leave
    repatching to someone else.

Any other options poses too much much of a burden that
I care. (note that I don't use sqlite3 for example, so
for me even such small patch just doubles/triples any work
that needs to be done on each update, and I'd rather spend
time on something more exciting. This is even true for the
current .dif solution. F.e. in this case I had to reapply
patch manually.)

Overall I'd see it much more ideal if these patches would
be submitted to original developers and we'd eventually
get them as part of the normal update process. This way
there would be no need for continuous redundant work either
for updater or developer (or both). I've already submitted
several reports and patches upstream, and some of them
made it to the next version, so I can only encourage
everyone to do the same.

In the future we may upgrade to GIT or some other VCS
system which is able to pull fresh sources from foreign
repositories to automate such upgrade process, so any
manual task which accompanying it might not be a viable
option anymore. [ or we need to automatize local patching,
by applying locally stored .dif at build-time. ]

[ maybe there is some industry standard solution to this
problem, which I'm unaware of though. ]

Brgds,
Viktor

From harbour.01 at syenar.hu  Sat Sep 19 09:49:48 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Sep 19 09:49:57 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12557] trunk/harbour
In-Reply-To: <20090919132545.GA13238@uran.home.aster.pl>
References: <E1MozpP-0003qM-Gn@c3vjzd1.ch3.sourceforge.com>
	<20090919132545.GA13238@uran.home.aster.pl>
Message-ID: <023A6B88-E1D0-4B65-8093-AA91A48915A4@syenar.hu>

> On Sat, 19 Sep 2009, vszakats@users.sourceforge.net wrote:
>> 2009-09-19 15:11 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>>  * source/dynlib/mt/Makefile
>>  * source/dynlib/Makefile
>>  * source/Makefile
>>  * config/global.mk
>>  * config/bin.mk
>>    + Added experimental support for HB_BUILD_SHARED=yes setting,
>>      which tells GNU Make to create shared Harbour tool executables.
>>    ; TOFIX: watcom for sure needs to be fixed.
>
> Wow, thank you very much.
>
> Watcom shared library in Linux builds does not work correctly at all
> though at least now they can be created and it's probably problem with
> watcom but I haven't look for details yet.
> Do you have problems with other watcom builds?

I think whole Harbour dynlib generation for watcom is
missing or broken. -hbdyn option in hbmk2 is also broken,
-shared option in hbmk2 for watcom/linux is broken too.
hbmk2 watcom/os2 support is I believe not tested too much.

> BTW has anyone tried to create .DLLs for DOS builds?
> In theory it's possible.

watcom support is lacking in quite a few places regarding
recently added features. F.e. dynlibs on win, linux, os2.
I didn't even think about dos .dlls yet, but those also are
missing. (is it also possible for DJGPP?)

watcom is problematic because it is the only compiler which
redefines central CC_RULE, and much of the dynlib "magic"
is done there.

In case of HB_BUILD_SHARED it can be done the way it's solved
in hbmk2, but watcom is different enough to need special
watcom.mk level support for this feature. Currently solution
needs main*.libs to be passed with FILE prefix at least on win.

Brgds,
Viktor

From april at users.sourceforge.net  Sat Sep 19 10:00:47 2009
From: april at users.sourceforge.net (april@users.sourceforge.net)
Date: Sat Sep 19 10:00:53 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12558] trunk/harbour
Message-ID: <E1Mp0UZ-0004f0-7w@c3vjzd1.ch3.sourceforge.com>

Revision: 12558
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12558&view=rev
Author:   april
Date:     2009-09-19 14:00:46 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------


Modified Paths:
--------------
    trunk/harbour/ChangeLog

Added Paths:
-----------
    trunk/harbour/examples/hbdoc2/
    trunk/harbour/examples/hbdoc2/genhtml.prg
    trunk/harbour/examples/hbdoc2/gentpl.prg
    trunk/harbour/examples/hbdoc2/gentxt.prg
    trunk/harbour/examples/hbdoc2/genxml.prg
    trunk/harbour/examples/hbdoc2/hbdoc2.ch
    trunk/harbour/examples/hbdoc2/hbdoc2.hbp
    trunk/harbour/examples/hbdoc2/hbdoc2.prg
    trunk/harbour/examples/hbdoc2/tmplates.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat Sep 19 10:04:17 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 19 10:04:22 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12559] trunk/harbour
Message-ID: <E1Mp0Xx-0005Jv-73@3kljzd1.ch3.sourceforge.com>

Revision: 12559
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12559&view=rev
Author:   vszakats
Date:     2009-09-19 14:04:16 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------

2009-09-19 16:02 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/bin.mk
    ! Fixed to leave sys libs for non-*nix systems in shared mode.
    + Added support for win/watcom.

  * utils/hbmk2/Makefile
  * utils/hbrun/Makefile
    + Added extra core lib specs required in shared mode.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/bin.mk
    trunk/harbour/utils/hbmk2/Makefile
    trunk/harbour/utils/hbrun/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From april_white at sympatico.ca  Sat Sep 19 10:07:45 2009
From: april_white at sympatico.ca (April White)
Date: Sat Sep 19 10:07:52 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12558] trunk/harbour
In-Reply-To: <E1Mp0UZ-0004f0-7w@c3vjzd1.ch3.sourceforge.com>
References: <E1Mp0UZ-0004f0-7w@c3vjzd1.ch3.sourceforge.com>
Message-ID: <BLU0-SMTP61E8AE81C4697C4F80408BEFDF0@phx.gbl>

april@users.sourceforge.net wrote:
> Revision: 12558
>           http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12558&view=rev
> Author:   april
> Date:     2009-09-19 14:00:46 +0000 (Sat, 19 Sep 2009)
>
> Log Message:
> -----------
>
> <blank>
>   
I apologize, I did not properly commit my work; the above log message 
should be:

  + examples/hbdoc2/
  + examples/hbdoc2/genhtml.prg
  + examples/hbdoc2/gentpl.prg
  + examples/hbdoc2/gentxt.prg
  + examples/hbdoc2/genxml.prg
  + examples/hbdoc2/hbdoc2.ch
  + examples/hbdoc2/hbdoc2.hbp
  + examples/hbdoc2/hbdoc2.prg
  + examples/hbdoc2/tmplates.prg
    % initial upload

April

-- 
The phrase "working mother" is redundant.
- Jane Sellman

From harbour.01 at syenar.hu  Sat Sep 19 10:09:21 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sat Sep 19 10:09:30 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12557] trunk/harbour
In-Reply-To: <023A6B88-E1D0-4B65-8093-AA91A48915A4@syenar.hu>
References: <E1MozpP-0003qM-Gn@c3vjzd1.ch3.sourceforge.com>
	<20090919132545.GA13238@uran.home.aster.pl>
	<023A6B88-E1D0-4B65-8093-AA91A48915A4@syenar.hu>
Message-ID: <1A6D8BA0-8E26-4F8F-9864-E6122002EE18@syenar.hu>

> I think whole Harbour dynlib generation for watcom is
> missing or broken. -hbdyn option in hbmk2 is also broken,
> -shared option in hbmk2 for watcom/linux is broken too.
> hbmk2 watcom/os2 support is I believe not tested too much.
>
>> BTW has anyone tried to create .DLLs for DOS builds?
>> In theory it's possible.
>
> watcom support is lacking in quite a few places regarding
> recently added features. F.e. dynlibs on win, linux, os2.
> I didn't even think about dos .dlls yet, but those also are
> missing. (is it also possible for DJGPP?)
>
> watcom is problematic because it is the only compiler which
> redefines central CC_RULE, and much of the dynlib "magic"
> is done there.
>
> In case of HB_BUILD_SHARED it can be done the way it's solved
> in hbmk2, but watcom is different enough to need special
> watcom.mk level support for this feature. Currently solution
> needs main*.libs to be passed with FILE prefix at least on win.

Update: Looks like win/watcom dynlib support is okay,
although any modules in forced C mode aren't supported.
(no such modules are required for Harbour .dll ATM)

Brgds,
Viktor

From april at users.sourceforge.net  Sat Sep 19 10:30:34 2009
From: april at users.sourceforge.net (april@users.sourceforge.net)
Date: Sat Sep 19 10:30:41 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12560] trunk/harbour
Message-ID: <E1Mp0xO-0005Dr-Jy@c3vjzd1.ch3.sourceforge.com>

Revision: 12560
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12560&view=rev
Author:   april
Date:     2009-09-19 14:30:32 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
  * doc/class_tp.txt
  * doc/hdr_tpl.txt
  * doc/inet.txt
  * doc/pragma.txt
  * doc/en-EN/array.txt
  * doc/en-EN/binnum.txt
  * doc/en-EN/browse.txt
  * doc/en-EN/clipper.txt
  * doc/en-EN/cmdline.txt
  * doc/en-EN/command.txt
  * doc/en-EN/compiler.txt
  * doc/en-EN/datetime.txt
  * doc/en-EN/dbdelim.txt
  * doc/en-EN/dbsdf.txt
  * doc/en-EN/dbstrux.txt
  * doc/en-EN/dir.txt
  * doc/en-EN/diskspac.txt
  * doc/en-EN/errsys.txt
  * doc/en-EN/eval.txt
  * doc/en-EN/file.txt
  * doc/en-EN/garbage.txt
  * doc/en-EN/gnulice.txt
  * doc/en-EN/gtslang.txt
  * doc/en-EN/harbext.txt
  * doc/en-EN/hb_api.txt
  * doc/en-EN/hb_apier.txt
  * doc/en-EN/hb_apifs.txt
  * doc/en-EN/hb_apigt.txt
  * doc/en-EN/hb_apiit.txt
  * doc/en-EN/hb_apiln.txt
  * doc/en-EN/hb_apird.txt
  * doc/en-EN/hb_compa.txt
  * doc/en-EN/hb_date.txt
  * doc/en-EN/hb_macro.txt
  * doc/en-EN/hb_set.txt
  * doc/en-EN/hb_vm.txt
  * doc/en-EN/hvm.txt
  * doc/en-EN/idle.txt
  * doc/en-EN/input.txt
  * doc/en-EN/lang.txt
  * doc/en-EN/license.txt
  * doc/en-EN/macro.txt
  * doc/en-EN/math.txt
  * doc/en-EN/memo.txt
  * doc/en-EN/memvar2.txt
  * doc/en-EN/menu.txt
  * doc/en-EN/misc.txt
  * doc/en-EN/nation.txt
  * doc/en-EN/objfunc.txt
  * doc/en-EN/rdddb.txt
  * doc/en-EN/rddmisc.txt
  * doc/en-EN/rddord.txt
  * doc/en-EN/readme.txt
  * doc/en-EN/sayget.txt
  * doc/en-EN/set.txt
  * doc/en-EN/setmode.txt
  * doc/en-EN/string.txt
  * doc/en-EN/strotype.txt
  * doc/en-EN/subcodes.txt
  * doc/en-EN/tbrowse.txt
  * doc/en-EN/tclass.txt
  * doc/en-EN/terminal.txt
  * doc/en-EN/tgetlist.txt
  * doc/en-EN/tlabel.txt
  * doc/en-EN/treport.txt
  * doc/en-EN/var.txt
    * amended to use standard content (template, category, sub-category)
    * typos corrected in many files
    ; TODO within hbdoc2:
      ; combine all items of one category into one file
      ; properly build links between html files (index, category, 'top');
        this will be a building block for rtf and pdf files
      ; produce rtf and pdf output
      ; produce tr output

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/doc/class_tp.txt
    trunk/harbour/doc/en-EN/array.txt
    trunk/harbour/doc/en-EN/binnum.txt
    trunk/harbour/doc/en-EN/browse.txt
    trunk/harbour/doc/en-EN/clipper.txt
    trunk/harbour/doc/en-EN/cmdline.txt
    trunk/harbour/doc/en-EN/command.txt
    trunk/harbour/doc/en-EN/compiler.txt
    trunk/harbour/doc/en-EN/datetime.txt
    trunk/harbour/doc/en-EN/dbdelim.txt
    trunk/harbour/doc/en-EN/dbsdf.txt
    trunk/harbour/doc/en-EN/dbstrux.txt
    trunk/harbour/doc/en-EN/dir.txt
    trunk/harbour/doc/en-EN/diskspac.txt
    trunk/harbour/doc/en-EN/errsys.txt
    trunk/harbour/doc/en-EN/eval.txt
    trunk/harbour/doc/en-EN/file.txt
    trunk/harbour/doc/en-EN/garbage.txt
    trunk/harbour/doc/en-EN/gnulice.txt
    trunk/harbour/doc/en-EN/gtslang.txt
    trunk/harbour/doc/en-EN/harbext.txt
    trunk/harbour/doc/en-EN/hb_api.txt
    trunk/harbour/doc/en-EN/hb_apier.txt
    trunk/harbour/doc/en-EN/hb_apifs.txt
    trunk/harbour/doc/en-EN/hb_apigt.txt
    trunk/harbour/doc/en-EN/hb_apiit.txt
    trunk/harbour/doc/en-EN/hb_apiln.txt
    trunk/harbour/doc/en-EN/hb_apird.txt
    trunk/harbour/doc/en-EN/hb_compa.txt
    trunk/harbour/doc/en-EN/hb_date.txt
    trunk/harbour/doc/en-EN/hb_macro.txt
    trunk/harbour/doc/en-EN/hb_set.txt
    trunk/harbour/doc/en-EN/hb_vm.txt
    trunk/harbour/doc/en-EN/hvm.txt
    trunk/harbour/doc/en-EN/idle.txt
    trunk/harbour/doc/en-EN/input.txt
    trunk/harbour/doc/en-EN/lang.txt
    trunk/harbour/doc/en-EN/license.txt
    trunk/harbour/doc/en-EN/macro.txt
    trunk/harbour/doc/en-EN/math.txt
    trunk/harbour/doc/en-EN/memo.txt
    trunk/harbour/doc/en-EN/memvar2.txt
    trunk/harbour/doc/en-EN/menu.txt
    trunk/harbour/doc/en-EN/misc.txt
    trunk/harbour/doc/en-EN/nation.txt
    trunk/harbour/doc/en-EN/objfunc.txt
    trunk/harbour/doc/en-EN/rdddb.txt
    trunk/harbour/doc/en-EN/rddmisc.txt
    trunk/harbour/doc/en-EN/rddord.txt
    trunk/harbour/doc/en-EN/readme.txt
    trunk/harbour/doc/en-EN/sayget.txt
    trunk/harbour/doc/en-EN/set.txt
    trunk/harbour/doc/en-EN/setmode.txt
    trunk/harbour/doc/en-EN/string.txt
    trunk/harbour/doc/en-EN/strotype.txt
    trunk/harbour/doc/en-EN/subcodes.txt
    trunk/harbour/doc/en-EN/tbrowse.txt
    trunk/harbour/doc/en-EN/tclass.txt
    trunk/harbour/doc/en-EN/terminal.txt
    trunk/harbour/doc/en-EN/tgetlist.txt
    trunk/harbour/doc/en-EN/tlabel.txt
    trunk/harbour/doc/en-EN/treport.txt
    trunk/harbour/doc/en-EN/var.txt
    trunk/harbour/doc/hdr_tpl.txt
    trunk/harbour/doc/inet.txt
    trunk/harbour/doc/pragma.txt


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From april at users.sourceforge.net  Sat Sep 19 10:33:07 2009
From: april at users.sourceforge.net (april@users.sourceforge.net)
Date: Sat Sep 19 10:33:13 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12561] trunk/harbour
Message-ID: <E1Mp0zr-0005IT-Ar@c3vjzd1.ch3.sourceforge.com>

Revision: 12561
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12561&view=rev
Author:   april
Date:     2009-09-19 14:33:06 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
  * examples/hbdoc2/hbdoc2.prg
     * bug fix when handling "--help" command line

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/examples/hbdoc2/hbdoc2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat Sep 19 10:56:56 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 19 10:57:02 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12562] trunk/harbour
Message-ID: <E1Mp1Mu-0006NH-VX@3kljzd1.ch3.sourceforge.com>

Revision: 12562
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12562&view=rev
Author:   vszakats
Date:     2009-09-19 14:56:55 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
2009-09-19 16:47 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/bin.mk
    + Added HB_BUILD_SHARED support for os2/watcom.

  * source/Makefile
    * Deleted env space saving optimization for dos platform
      and added support for gtdos when building dos .dlls.
    % Deleted line after prev changes.

  * config/global.mk
    + Added special .dll names when building dos based ones.
      (harbour / harbourm)

  * config/dos/watcom.mk
    + Enabled absolutely experimental dos .dll support.
    ; Current result:
      ---
      wlink OP quiet SYS cwdllr  NAME '..\..\..\..\..\bin\dos\watcom\harbour' OP implib='../../.
      ./../../lib/dos/watcom/harbour.lib' @__dyn__.tmp
      Warning! W1027: file clib3r.lib(cstart): redefinition of ___begtext ignored
      Warning! W1027: file clib3r.lib(cstart): redefinition of __nullarea ignored
      Warning! W1027: file clib3r.lib(cstart): redefinition of __D16Infoseg ignored
      Warning! W1027: file clib3r.lib(cstart): redefinition of __x386_zero_base_selector ignored
      
      Warning! W1027: file clib3r.lib(cstart): redefinition of __exit_ ignored
      Warning! W1027: file clib3r.lib(cstart): redefinition of __do_exit_with_msg__ ignored
      Warning! W1027: file clib3r.lib(cstart): redefinition of __GETDS ignored
      Warning! W1027: file clib3r.lib(cstart): redefinition of ___GETDSStart_ ignored
      Warning! W1027: file clib3r.lib(cstart): redefinition of ___GETDSEnd_ ignored
      Error! E2030: file clib3r.lib(cstart): multiple starting addresses found
      mingw32-make.exe[2]: *** [harbour] Error 1
      ---
    ; TOFIX: hbpp object will be (or is) again a showstopper.

  * config/win/watcom.mk
    * Synced with dos/watcom.mk after above change.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/bin.mk
    trunk/harbour/config/dos/watcom.mk
    trunk/harbour/config/global.mk
    trunk/harbour/config/win/watcom.mk
    trunk/harbour/source/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From rodrigo at flaro.net  Sat Sep 19 12:13:49 2009
From: rodrigo at flaro.net (Rodrigo Machado)
Date: Sat Sep 19 12:14:15 2009
Subject: [Harbour] Harbour as WEB application
In-Reply-To: <mqv6b595j8d5neumhn2fqd9e7bsv2j5d06@4ax.com>
References: <mqv6b595j8d5neumhn2fqd9e7bsv2j5d06@4ax.com>
Message-ID: <b0552e6d0909190913t4bf7169by839be93ae16bebff@mail.gmail.com>

Yo he desarrollado este sitio www.teleguia.com.py con harbour + dbfcdx.
Ahora estoy trabajando en una version mejoarada que integrar? harbour +
dbfcdx + ajax.

Tambien he hecho pruebas con harbour + adobe flex.


?Estas buscando alg?n numero telef?nico? www.teleguia.com.py

*:-.,_,.-:*'``'*:-.,_,.-:*:-.,_,.-:*'``'*:-.,_,.-:
      :: Rodrigo Machado ::
          FlaRo Sistemas
           www.flaro.net

      Telef:  0673 221 480
*:-.,_,.-:*'``'*:-.,_,.-:*:-.,_,.-:*'``'*:-.,_,.-:
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090919/c901e6e5/attachment.html
From vszakats at users.sourceforge.net  Sat Sep 19 12:26:46 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 19 12:26:52 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12563] trunk/harbour
Message-ID: <E1Mp2lq-0000fR-OU@dn4whf1.ch3.sourceforge.com>

Revision: 12563
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12563&view=rev
Author:   vszakats
Date:     2009-09-19 16:26:45 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
2009-09-19 18:25 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * INSTALL
  * config/global.mk
    + HB_BUILD_SHARED will now default to yes, if HB_INSTALL_PREFIX 
      points to a *nix system location. (in sync with hbmk2 logic)

  * config/dos/djgpp.mk
    + Added .dll building rule, but it doesn't work, so I've commented it.
      (-shared isn't accepted by DJGPP ld)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/config/dos/djgpp.mk
    trunk/harbour/config/global.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat Sep 19 14:18:18 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 19 14:18:24 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12564] trunk/harbour
Message-ID: <E1Mp4Vm-00072H-6K@74yxhf1.ch3.sourceforge.com>

Revision: 12564
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12564&view=rev
Author:   vszakats
Date:     2009-09-19 18:18:17 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
2009-09-19 20:17 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * mpkg_tgz.sh
  * bin/postinst.sh
    % Attempt to clean mpkg_tgz.sh from redundant make logic.
      Some tasks (stripping, shared tool making using HB_BUILD_SHARED,
      chmod on HB_INC_INSTALL) moved to postinst.sh, some others
      deleted (platform detection, shared tool building using old
      method, component detections, install dir forming and creation.
    ; Please review me and test.
    ; TODO: Maybe above tasks in postinst.sh should only be
            executed when HB_BUILD_PKG=yes.

  * config/global.mk
    ! Fixed to only use lib64 dir if it exists. Please review/test
      this feature.
    + Now exports HB_SYSLOC variable which is set to non-empty if
      HB_INSTALL_PREFIX points to system location.

  * harbour.spec
    - Deleted PIC option related lines. These are handled by GNU Make now.

  * utils/hbmk2/hbmk2.prg
    + Added PIC related options to *nix compilers when using -hbdyn option.
    % Deleted PIC related option from link command. Not needed.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/postinst.sh
    trunk/harbour/config/global.mk
    trunk/harbour/harbour.spec
    trunk/harbour/mpkg_tgz.sh
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat Sep 19 14:32:47 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 19 14:32:53 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12565] trunk/harbour
Message-ID: <E1Mp4jn-0007Iv-0C@74yxhf1.ch3.sourceforge.com>

Revision: 12565
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12565&view=rev
Author:   vszakats
Date:     2009-09-19 18:32:45 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
2009-09-19 20:32 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * bin/hb-mkdyn.sh
  * bin/postinst.sh
    % Deleted -fPIC option from dynlib link command. It's not needed 
      if there are no .c input files.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/hb-mkdyn.sh
    trunk/harbour/bin/postinst.sh


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat Sep 19 14:49:06 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 19 14:49:12 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12566] trunk/harbour
Message-ID: <E1Mp4za-0007dQ-Uh@74yxhf1.ch3.sourceforge.com>

Revision: 12566
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12566&view=rev
Author:   vszakats
Date:     2009-09-19 18:49:05 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
2009-09-19 20:48 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * examples/hbdoc2/hbdoc2.prg
    * Minor changes/fixes to help screen and header.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/examples/hbdoc2/hbdoc2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat Sep 19 15:34:25 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 19 15:34:30 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12567] trunk/harbour
Message-ID: <E1Mp5hR-0003Y4-G9@3kljzd1.ch3.sourceforge.com>

Revision: 12567
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12567&view=rev
Author:   vszakats
Date:     2009-09-19 19:34:24 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
2009-09-19 21:33 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * bin/postinst.sh
  * config/global.mk
    ! Fixes to prev after testing. (please review anyway)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/postinst.sh
    trunk/harbour/config/global.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From lorenzo.fiorini at gmail.com  Sat Sep 19 16:11:23 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Sep 19 16:11:29 2009
Subject: [Harbour] Should shared libs be stripped?
Message-ID: <9257026e0909191311l45976659j9b88b87c2c42c126@mail.gmail.com>

I've just noticed that so libs created by hb-mkslib are not stripped
by default like binaries created by hbmk.

Is this intentional?

Should hb-mkslib support strip/nostrip like hbmk?

best regards,
Lorenzo
From vszakats at users.sourceforge.net  Sat Sep 19 16:31:50 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 19 16:31:55 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12568] trunk/harbour
Message-ID: <E1Mp6b0-0003hO-KG@c3vjzd1.ch3.sourceforge.com>

Revision: 12568
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12568&view=rev
Author:   vszakats
Date:     2009-09-19 20:31:49 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
2009-09-19 22:28 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * INSTALL
    + Added new section: HOW TO CREATE DISTRIBUTABLE PACKAGES

  * bin/postinst.sh
    % Deleted -KPIC from dynlib command with sunpro.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/bin/postinst.sh


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sat Sep 19 16:50:50 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sat Sep 19 16:50:56 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12569] trunk/harbour
Message-ID: <E1Mp6tO-00046o-VK@c3vjzd1.ch3.sourceforge.com>

Revision: 12569
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12569&view=rev
Author:   vszakats
Date:     2009-09-19 20:50:49 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
2009-09-19 22:48 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * INSTALL
    ! Fixed typos in new section.
    ; NOTE: Please review this section, as I don't have an rpm-capable
            distro at hand. I may have also missed some sudo/fakeroot 
            commands as I never use them in context of Harbour.
            TODO: If there it's at all possible I think Harbour package 
                  creation should support sudo-less way to *create* packages.
                  'sudo' should be a must only to install them to system location.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Sat Sep 19 19:40:40 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Sat Sep 19 19:40:45 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12570] trunk/harbour
Message-ID: <E1Mp9Xk-0007IO-CR@c3vjzd1.ch3.sourceforge.com>

Revision: 12570
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12570&view=rev
Author:   druzus
Date:     2009-09-19 23:40:32 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
2009-09-20 01:40 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/hvm.c
    * allow to check symbol module name for unregistered modules

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/vm/hvm.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From elart at elart.it  Sat Sep 19 20:21:01 2009
From: elart at elart.it (elart)
Date: Sat Sep 19 20:22:24 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12570] trunk/harbour
In-Reply-To: <E1Mp9Xk-0007IO-CR@c3vjzd1.ch3.sourceforge.com>
References: <E1Mp9Xk-0007IO-CR@c3vjzd1.ch3.sourceforge.com>
Message-ID: <4AB5756D.3060702@elart.it>

I get this compile error on Ubuntu 9.04 and Ubuntu 9.10 32 bits...

Thank you

Best Regards

Estratta revisione 12570.
! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh clean  ! HB_INSTALL_PREFIX: /usr/bin
! HB_BIN_INSTALL: /usr/bin
! HB_LIB_INSTALL: /usr/lib
! HB_INC_INSTALL: /usr/include
! HB_HOST_PLAT: linux (x86)  HB_SHELL: sh
! HB_PLATFORM: linux (x86) (autodetected)
! HB_COMPILER: gcc (autodetected: /usr/bin/)
! Component: 'zlib' found in /usr/include
! Component: 'pcre' found in /home/ubuntu/src/harbour/external/pcre (local)
! Component: 'openssl' found in /usr/include
! Component: 'gpm' found in /usr/include
! Component: 'slang' found in /usr/include
! Component: 'curses' found in /usr/include
! Component: 'x11' found in /usr/include
! Component: 'wattcp/watt-32' not supported on linux platform
! REVISION: 12570
! 'libpng' library skipped (unused)
! 'sqlite3' library skipped (unused)
! 'hbzlib' library skipped (unused)
! 'gtdos' library skipped (platform not supported)
! 'gtgui' library skipped (platform not supported)
! 'gtos2' library skipped (platform not supported)
! 'gtwin' library skipped (platform not supported)
! 'gtwvt' library skipped (platform not supported)
! 'gtwvg' library skipped (platform or compiler not supported)
! 'hbwin' library skipped (platform not supported)
! 'hbblat' library skipped (platform not supported)
! 'hbfimage' library skipped ('freeimage' not supported on linux platform)
! 'rddads' library skipped ('ads' not found)
! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh   ! HB_INSTALL_PREFIX: /usr/bin
! HB_BIN_INSTALL: /usr/bin
! HB_LIB_INSTALL: /usr/lib
! HB_INC_INSTALL: /usr/include
! HB_HOST_PLAT: linux (x86)  HB_SHELL: sh
! HB_PLATFORM: linux (x86) (autodetected)
! HB_COMPILER: gcc (autodetected: /usr/bin/)
! Component: 'zlib' found in /usr/include
! Component: 'pcre' found in /home/ubuntu/src/harbour/external/pcre (local)
! Component: 'openssl' found in /usr/include
! Component: 'gpm' found in /usr/include
! Component: 'slang' found in /usr/include
! Component: 'curses' found in /usr/include
! Component: 'x11' found in /usr/include
! Component: 'wattcp/watt-32' not supported on linux platform
! REVISION: 12570
make[2]: Non c'? da fare nulla per ?all?
make[1]: Non c'? da fare nulla per ?all?
gcc  -I. -I../../../../../include  -O3  -I/usr/include -I/usr/include 
-o_hbhbpdf.o -c ../../../_hbhbpdf.c
..
..
..
gcc  -I. -I../../../../../include  -Wall -W -O3   -oppcomp.o -c 
../../../ppcomp.c
gcc  -I. -I../../../../../include  -Wall -W -O3   -oexpropta.o -c 
../../../expropta.c
gcc  -I. -I../../../../../include  -Wall -W -O3   -oexproptb.o -c 
../../../exproptb.c
gcc  -I. -I../../../../../include  -Wall -W -O3   -ocomplex.o -c 
../../../complex.c
gcc  -I. -I../../../../../include  -Wall -W -O3   -ocompi18n.o -c 
../../../compi18n.c
gcc  -I. -I../../../../../include  -Wall -W -O3   -ohbmain.o -c 
../../../hbmain.c
ar   rcs ../../../../../lib/linux/gcc/libhbcplr.a harboury.o cmdcheck.o 
genc.o gencc.o gencobj.o genhrb.o hbcmplib.o hbcomp.o hbdbginf.o 
hbfunchk.o hbgenerr.o hbpcode.o hbfix.o hbdead.o hblbl.o hbopt.o 
hbstripl.o hbusage.o hbident.o ppcomp.o expropta.o exproptb.o complex.o 
compi18n.o hbmain.o || ( rm -f ../../../../../lib/linux/gcc/libhbcplr.a 
&& false )
gcc  -I. -I../../../../../include  -Wall -W -O3   -oharbour.o -c 
../../../harbour.c
gcc  -Wall -W -O3 -o../../../../../bin/linux/gcc/harbour harbour.o 
-L../../../../../lib/linux/gcc   -lhbcplr -lhbpp -lhbnortl -lhbcommon
../../../../../lib/linux/gcc/libhbcommon.a(expropt2.o): In function 
`hb_compExprReducePower':
expropt2.c:(.text+0x2b02): undefined reference to `pow'
../../../../../lib/linux/gcc/libhbcommon.a(expropt2.o): In function 
`hb_compExprReduceMod':
expropt2.c:(.text+0x2c2b): undefined reference to `fmod'
../../../../../lib/linux/gcc/libhbcommon.a(hbstr.o): In function 
`hb_str2number':
hbstr.c:(.text+0x148c): undefined reference to `pow'
../../../../../lib/linux/gcc/libhbcommon.a(hbstr.o): In function 
`hb_numRound':
hbstr.c:(.text+0x17d7): undefined reference to `pow'
hbstr.c:(.text+0x180f): undefined reference to `pow'
../../../../../lib/linux/gcc/libhbcommon.a(hbstr.o): In function 
`hb_numDecConv':
hbstr.c:(.text+0x18a7): undefined reference to `pow'
hbstr.c:(.text+0x18cf): undefined reference to `pow'
collect2: ld returned 1 exit status
make[3]: *** [harbour] Errore 1
make[2]: *** [descend] Errore 2
make[1]: *** [main] Errore 2
make: *** [source] Errore 2

From Istvan.Bisz at t-online.hu  Sun Sep 20 04:09:09 2009
From: Istvan.Bisz at t-online.hu (=?UTF-8?Q?Bisz_Istv=C3=A1n?=)
Date: Sun Sep 20 04:10:08 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12569] trunk/harbour
In-Reply-To: <E1Mp6tO-00046o-VK@c3vjzd1.ch3.sourceforge.com>
References: <E1Mp6tO-00046o-VK@c3vjzd1.ch3.sourceforge.com>
Message-ID: <000301ca39c9$a21ba190$e652e4b0$@Bisz@t-online.hu>

Hi Viktor,

Please find attached the error log of the $ ./mpkg_rpm.sh on Fedora 11.
I don't see any reference to the Qt related harbour contrib libs.

Best regards,
Istv?n

-----Original Message-----
From: harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] On Behalf Of vszakats@users.sourceforge.net
Sent: 2009. szeptember 19. 22:51
To: harbour@harbour-project.org
Subject: [Harbour] SF.net SVN: harbour-project:[12569] trunk/harbour

Revision: 12569
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12569&view=rev
Author:   vszakats
Date:     2009-09-19 20:50:49 +0000 (Sat, 19 Sep 2009)

Log Message:
-----------
2009-09-19 22:48 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * INSTALL
    ! Fixed typos in new section.
    ; NOTE: Please review this section, as I don't have an rpm-capable
            distro at hand. I may have also missed some sudo/fakeroot 
            commands as I never use them in context of Harbour.
            TODO: If there it's at all possible I think Harbour package 
                  creation should support sudo-less way to *create* packages.
                  'sudo' should be a must only to install them to system location.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
_______________________________________________
Harbour mailing list
Harbour@harbour-project.org
http://lists.harbour-project.org/mailman/listinfo/harbour
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mpkg2.zip
Type: application/x-zip-compressed
Size: 1708 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090920/faa99a9f/mpkg2.bin
From druzus at acn.waw.pl  Sun Sep 20 04:17:31 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 20 04:17:40 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12549] trunk/harbour
In-Reply-To: <2C3CD433-4529-4938-843C-4FE734C14FB6@syenar.hu>
References: <E1Mov7n-0006WU-Jk@d5vjzd1.ch3.sourceforge.com>
	<20090919115116.GA30653@uran.home.aster.pl>
	<1647BB89-BCE2-4C01-8B38-E87CF8F83497@syenar.hu>
	<20090919131738.GA23032@uran.home.aster.pl>
	<2C3CD433-4529-4938-843C-4FE734C14FB6@syenar.hu>
Message-ID: <20090920081731.GA27848@uran.home.aster.pl>

On Sat, 19 Sep 2009, Szak?ts Viktor wrote:

Hi,

> No, I'm asking to not make much more difficult job what was
> so far an easy task (or at least split the effort), and which
> was done so far exclusively by me. (i.e. upgrading foreign sources
> inside our repo)
[...]

Thank you very much for your explanations and work on external source
code synchrinization but I still do not understand why we have to
create .diff files manually and commit them to SVN instead of using SVN
to create such diff files automatically if necessary.

> So for me personally two options are left:
> 1) I won't upgrade any embedded sources which have any patches.
> 2) I will continue to upgrade to original version and will leave
>    repatching to someone else.

And unlike everything what you said before these are reasonable
arguments for me which definitely close farther discussion.
The only one libraries I may want to update is ZLIB (maybe also PCRE
but only if I work on unicode support) and I'm not interested in others
so your preferences are rules here as long as you plan to make such
updates. If I will want to change anything in any of our external/*
code I'll report it to this list and you will take decision if it's
worth to commit.
BTW does current PCRE version contain our local modifications or not?
If it does then we should also have .diff file in external/pcre but if
not then we should remove external/pcre/ChangeLog to not confuse users.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Sun Sep 20 04:18:02 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Sep 20 04:18:09 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12570] trunk/harbour
In-Reply-To: <4AB5756D.3060702@elart.it>
References: <E1Mp9Xk-0007IO-CR@c3vjzd1.ch3.sourceforge.com>
	<4AB5756D.3060702@elart.it>
Message-ID: <9257026e0909200118qc38593g2199fccc14a798db@mail.gmail.com>

On Sun, Sep 20, 2009 at 2:21 AM, elart <elart@elart.it> wrote:

> I get this compile error on Ubuntu 9.04 and Ubuntu 9.10 32 bits...
...
> hbstr.c:(.text+0x18cf): undefined reference to `pow'
...

The problem arose after -r12563.

If you set HB_BUILD_SHARED=no it works.

I think that having different options based on INSTALL path is wrong.

In this way INSTALL path become an "hidden switch".

best regards,
Lorenzo
From druzus at acn.waw.pl  Sun Sep 20 06:03:22 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 20 06:03:29 2009
Subject: [Harbour] Harbour build test results
Message-ID: <20090920100322.GB27848@uran.home.aster.pl>

Hi Viktor,

I made some build tests with Harbour source code:
   2009-09-19 14:43 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
using different *nix system and C compilers and I have few notes.


I HAIKU builds I set HB_INSTALL_PREFIX=$HOME/hb and:
make install harbour in:
   $HOME/hb/bin/
   $HOME/hb/lib/harbour/
   $HOME/hb/include/harbour/
in other *nixes for such setting Harbour is instaled in
   $HOME/hb/bin/
   $HOME/hb/lib/
   $HOME/hb/include/
HOME in HAIKU is set to /boot/home.
HAIKU uses a little bit different localizations then other *nixes.
Looking at its dir structure I'm finding the following analogies:
   /boot/common/{bin,lib,include,etc}     => /usr
   /boot/system/{bin,lib,etc}             => /
   /boot/home/config/{bin,lib,etc}        => /usr/local
of course they are not exactly the same anyhow these localization
we can use as system wide. They are in default PATH and LIBRARY_PATH
(HAIKU does not use LD_ prefix). So to keep HAIKU synced with other
*nixes rules we should not add /harbour lib and inc suffix unconditionally
but rather use sth like:
   ifneq ($(foreach dir,/boot/common /boot/system /boot/home/config,
                        $(findstring |$(dir),|$(HB_INSTALL_PREFIX))),)
      LIBPOSTFIX := $(DIRSEP)harbour
      INCPOSTFIX := $(DIRSEP)harbour
   endif


The -fixshared trick is GCC only specific feature and does not work
with other compilers I used: ICC, SUNCC.
It causes problems with HBMK2 which by default redirects -shared
switch to -fixshared for non system library directory so
it ends with error.
It should be changed and for non GCC *nix compilers -shared should
be redirected to -fullshared.
I tested that -fixshared works in GCC@x86@32 builds on the following
OS-es: Linux, SunOS, HAIKU, FreeBSD, NetBSD and OpenBSD.

In HAIKU builds system library directory should be verified using
LIBRARY_PATH envvar instead of using hardcoded paths.
Probably in other *nixes it's good to extend hardcoded paths using
LD_LIBRARY_PATH to detect system localization.

In OpenBSD during linking external libraries bound indirectly by linked
.so libraries (harbour.so in our case) are scanned only in /lib or /usr/lib.
Other localizations supported by dynamic linker at runtime are ignored by
default during linking.
For hbmk2 it means that in -shared mode if harbour.so is linked with
dynamic components from different localizations (i.e. /usr/X11R6/lib for
X11 or /usr/local/lib for SLANG or PCRE) then during linking such paths
have to be passed using -L GCC option.
Now hbmk2 shared linking in OpenBSD works only if necessary -L<path>
are manually specified by user.

HBMK2 does not support -fullstatic in SunPRO builds. To force static mode
in SunPRO it's necessary to use '-B static' compiler switch. Of course it's
possible that such final static binaries cannot be created or will not work
as expected anyhow it's out of hbmk2 control which should only pass valid
switches to compiler/linker.

In NetBSD builds (GCC 4.1.3) MT application linked in -fullstatic mode
GPFs. This is probably bound with __thread variable support but I'm
haven't checked it deeper but I had such problem with some older Linux
distributions.
In general in some OS-es/C compiler -fullstatic mode may not be fully
functional and it's out of our control. Just simply some functionality
may not be implemented in static system libraries.

In SunPROC Linux builds __constructor__ function attribute is ignored
sometimes and startup code is not executed. It means that some symbol
tables may not be registered in HVM and later we have GPF when such
code is executed. I can replicate the problem with hbtest which GPFs
because startup code from HBRTL is not executed.
It looks like compiler bug anyhow it's possible that we exploited
the problem recently. I'm not 100% sure but I think that over month
ago hbtest in SunPROC@Linux builds was working for me. If we can find
the exact reason which exploits the problem then we can try to add
workaround for it.

In ICC Linux builds HVMALL MT cannot be compiled with -fpic switch.
It ends with:
   ../../../../itemapi.c(1047) (col. 1): internal error: 0_1301
   compilation aborted for ../../../../hvmall.c (code 4)
Looks that we exploited bug inside ICC compiler. The easiest workaround
is setting HB_VM_ALL=no when ICC compiles HBVMMT library.

All other things worked as expected.
I tested native builds for Linux(GCC,ICC,SunPRO), SunOS(GCC,SunPRO),
HAIKU(GCC), FreeBSD(GCC), OpenBSD(GCC), NetBSD(GCC).
I checked basic harbour tools like hbrun or hbtest and speedtst in
MT mode (-thread switch to force parallel execution).
I also tested hbmk and hbmk2 using  -[{fix,full}]shared and -[full]static
switches.

best regards,
Przemek
From harbour.01 at syenar.hu  Sun Sep 20 07:04:22 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Sep 20 07:04:32 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12549] trunk/harbour
In-Reply-To: <20090920081731.GA27848@uran.home.aster.pl>
References: <E1Mov7n-0006WU-Jk@d5vjzd1.ch3.sourceforge.com>
	<20090919115116.GA30653@uran.home.aster.pl>
	<1647BB89-BCE2-4C01-8B38-E87CF8F83497@syenar.hu>
	<20090919131738.GA23032@uran.home.aster.pl>
	<2C3CD433-4529-4938-843C-4FE734C14FB6@syenar.hu>
	<20090920081731.GA27848@uran.home.aster.pl>
Message-ID: <BFF23914-40B6-4C04-A728-42FF7BF74C6D@syenar.hu>

Hi Przemek,

>> No, I'm asking to not make much more difficult job what was
>> so far an easy task (or at least split the effort), and which
>> was done so far exclusively by me. (i.e. upgrading foreign sources
>> inside our repo)
> [...]
>
> Thank you very much for your explanations and work on external source
> code synchrinization but I still do not understand why we have to
> create .diff files manually and commit them to SVN instead of using  
> SVN
> to create such diff files automatically if necessary.
>
>> So for me personally two options are left:
>> 1) I won't upgrade any embedded sources which have any patches.
>> 2) I will continue to upgrade to original version and will leave
>>   repatching to someone else.
>
> And unlike everything what you said before these are reasonable
> arguments for me which definitely close farther discussion.
> The only one libraries I may want to update is ZLIB (maybe also PCRE
> but only if I work on unicode support) and I'm not interested in  
> others
> so your preferences are rules here as long as you plan to make such
> updates. If I will want to change anything in any of our external/*
> code I'll report it to this list and you will take decision if it's
> worth to commit.

Thank you.

Anyhow it'd be good to have some sort of system which is not tied
to any complicated knowledge or personal preference (and well  
documented),
since I'd be great to see others contributing in this area also, and
in fact this is the only way to scale in the future (i.e we may have
more embedded sources). This means any further ideas and contributions
are welcome for this area. F.e. someone could deal with submitting
these patches upstream.

> BTW does current PCRE version contain our local modifications or not?
> If it does then we should also have .diff file in external/pcre but if
> not then we should remove external/pcre/ChangeLog to not confuse  
> users.

I've checked and it contains two patches.

One (new, by me) for watcom, which I'm still unsure of.
Another one old for typedef BOOL (from 2009-04-22 20:39).

I'd be great if you could review them.

BTW, Phil Hazel (author/maintainer of pcre) was very responsive
and helpful when I submitted a patch, so if we have something here
which can be useful for pcre in general, we could send these too,
I see good chances to be included. (even your future Unicode patches)

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 20 07:16:01 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Sep 20 07:16:10 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12569] trunk/harbour
In-Reply-To: <000301ca39c9$a21ba190$e652e4b0$@Bisz@t-online.hu>
References: <E1Mp6tO-00046o-VK@c3vjzd1.ch3.sourceforge.com>
	<000301ca39c9$a21ba190$e652e4b0$@Bisz@t-online.hu>
Message-ID: <D1B976C7-2726-4D17-988A-A559EE557628@syenar.hu>

Hi Istvan,

Thanks for your test. This seems to have had broken
when doing the hbpcre/hbzlib lib move to external.

Same problem exist for other libs and currently it's
solved by duplicating detection logic in started batch
file. Either this could be done, but I wonder if there
is better way to solve this problem. (maybe not, because
.rpms need dependent pkg name anyway from somewhere)

I'd need someone familiar with .rpm creation to tackle
that extra logic to mpkg_rpm.sh. Also needs to be solved
referencing to system pcre and zlib packages in this case.

Brgds,
Viktor

On 2009 Sep 20, at 10:09, Bisz Istv?n wrote:

> Hi Viktor,
>
> Please find attached the error log of the $ ./mpkg_rpm.sh on Fedora  
> 11.
> I don't see any reference to the Qt related harbour contrib libs.
>
> Best regards,
> Istv?n
>
> -----Original Message-----
> From: harbour-bounces@harbour-project.org [mailto:harbour- 
> bounces@harbour-project.org] On Behalf Of vszakats@users.sourceforge.net
> Sent: 2009. szeptember 19. 22:51
> To: harbour@harbour-project.org
> Subject: [Harbour] SF.net SVN: harbour-project:[12569] trunk/harbour
>
> Revision: 12569
>          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12569&view=rev
> Author:   vszakats
> Date:     2009-09-19 20:50:49 +0000 (Sat, 19 Sep 2009)
>
> Log Message:
> -----------
> 2009-09-19 22:48 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>  * INSTALL
>    ! Fixed typos in new section.
>    ; NOTE: Please review this section, as I don't have an rpm-capable
>            distro at hand. I may have also missed some sudo/fakeroot
>            commands as I never use them in context of Harbour.
>            TODO: If there it's at all possible I think Harbour package
>                  creation should support sudo-less way to *create*  
> packages.
>                  'sudo' should be a must only to install them to  
> system location.
>
> Modified Paths:
> --------------
>    trunk/harbour/ChangeLog
>    trunk/harbour/INSTALL
>
>
> This was sent by the SourceForge.net collaborative development  
> platform, the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> <mpkg2.zip>_______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vszakats at users.sourceforge.net  Sun Sep 20 08:53:52 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun Sep 20 08:53:58 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12571] trunk/harbour
Message-ID: <E1MpLvM-0002l0-72@3kljzd1.ch3.sourceforge.com>

Revision: 12571
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12571&view=rev
Author:   vszakats
Date:     2009-09-20 12:53:51 +0000 (Sun, 20 Sep 2009)

Log Message:
-----------
2009-09-20 14:51 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * bin/postinst.sh
    ! Fix to strip command. Now using 'find' again and using -maxdepth 1
      to prevent it from parsing subdirs.

  * config/global.mk
    + Added new user settings to screen dump.

  * source/dynlib/mt/Makefile
  * source/dynlib/Makefile
  * config/darwin/gcc.mk
  * config/linux/gcc.mk
  * config/dyn.mk
    + Attempt to add link creation for dynlibs.
      Not tested yet.
    ; TODO: darwin needs even more sopthistication.
    ; TODO: clean support is missing yet.
    ; TODO: add this to rest of targets.

  * source/vm/vmmt/Makefile
    ! Disabled HB_HVM_ALL for linux-icc, because it causes compiler internal
      error when using -fpic.

  * source/vm/Makefile
    * Indenting.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/postinst.sh
    trunk/harbour/config/darwin/gcc.mk
    trunk/harbour/config/dyn.mk
    trunk/harbour/config/global.mk
    trunk/harbour/config/linux/gcc.mk
    trunk/harbour/source/dynlib/Makefile
    trunk/harbour/source/dynlib/mt/Makefile
    trunk/harbour/source/vm/Makefile
    trunk/harbour/source/vm/vmmt/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Sun Sep 20 09:01:49 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Sep 20 09:01:59 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12570] trunk/harbour
In-Reply-To: <9257026e0909200118qc38593g2199fccc14a798db@mail.gmail.com>
References: <E1Mp9Xk-0007IO-CR@c3vjzd1.ch3.sourceforge.com>
	<4AB5756D.3060702@elart.it>
	<9257026e0909200118qc38593g2199fccc14a798db@mail.gmail.com>
Message-ID: <13B49A7B-D7F0-4F79-8F4E-9ECE7E584F6A@syenar.hu>

>> I get this compile error on Ubuntu 9.04 and Ubuntu 9.10 32 bits...
> ...
>> hbstr.c:(.text+0x18cf): undefined reference to `pow'
> ...
>
> The problem arose after -r12563.
>
> If you set HB_BUILD_SHARED=no it works.

I'll have to check. So far I don't understand what's
happening, moreover it's quite difficult for me to
test without installing to syslocs.

My suspect is missing lib grouping. Can you try adding
-Wl,--start-group and -Wl,--end-group around $(DLIBS) in
line 54 of config/linux/gcc.mk ?

> I think that having different options based on INSTALL path is wrong.
>
> In this way INSTALL path become an "hidden switch".

Yes it is, and this is the only way we can somewhat assure
that users not wanting to use system locations for Harbour
also get working builds, while users installing to system
location will get their shared-mode binaries.

Having shared mode binaries in non-system locations don't work
without extra manual steps.
Having non-shared binaries in system location is against the
idea of *nixes and *nix user preferences.

Hence we have this trick. Notice you can override this default
behavior anytime.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Sun Sep 20 09:16:05 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun Sep 20 09:16:11 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12572] trunk/harbour
Message-ID: <E1MpMGr-0003C7-CF@3kljzd1.ch3.sourceforge.com>

Revision: 12572
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12572&view=rev
Author:   vszakats
Date:     2009-09-20 13:16:04 +0000 (Sun, 20 Sep 2009)

Log Message:
-----------
2009-09-20 15:15 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/global.mk
    * Changed to install libs by default to lib/<plat>/<comp> on *nixes too.
      (if HB_INSTALL_PREFIX isn't a system location)

  * config/dyn.mk
    ! Typo in prev.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/dyn.mk
    trunk/harbour/config/global.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sun Sep 20 09:33:59 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun Sep 20 09:34:05 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12573] trunk/harbour
Message-ID: <E1MpMYB-0003YX-No@3kljzd1.ch3.sourceforge.com>

Revision: 12573
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12573&view=rev
Author:   vszakats
Date:     2009-09-20 13:33:58 +0000 (Sun, 20 Sep 2009)

Log Message:
-----------
2009-09-20 15:33 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * external/pcre/config.h
    * Restored original only differing in whitespace.

  - external/pcre/ChangeLog
    - Deleted. Content is obsolete.

  + external/pcre/pcre.dif
    + Added .dif file.

  * config/darwin/gcc.mk
  * config/darwin/clang.mk
  * config/darwin/icc.mk
    + Finished dylib link generation for darwin.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/darwin/clang.mk
    trunk/harbour/config/darwin/gcc.mk
    trunk/harbour/config/darwin/icc.mk
    trunk/harbour/external/pcre/config.h

Added Paths:
-----------
    trunk/harbour/external/pcre/pcre.dif

Removed Paths:
-------------
    trunk/harbour/external/pcre/ChangeLog


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From lorenzo.fiorini at gmail.com  Sun Sep 20 09:59:54 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Sep 20 10:00:00 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12570] trunk/harbour
In-Reply-To: <13B49A7B-D7F0-4F79-8F4E-9ECE7E584F6A@syenar.hu>
References: <E1Mp9Xk-0007IO-CR@c3vjzd1.ch3.sourceforge.com>
	<4AB5756D.3060702@elart.it>
	<9257026e0909200118qc38593g2199fccc14a798db@mail.gmail.com>
	<13B49A7B-D7F0-4F79-8F4E-9ECE7E584F6A@syenar.hu>
Message-ID: <9257026e0909200659n7f6d0d16t644ec56499d15cb4@mail.gmail.com>

On Sun, Sep 20, 2009 at 3:01 PM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:

> Yes it is, and this is the only way we can somewhat assure
> that users not wanting to use system locations for Harbour
> also get working builds, while users installing to system
> location will get their shared-mode binaries.
>
> Having shared mode binaries in non-system locations don't work
> without extra manual steps.
> Having non-shared binaries in system location is against the
> idea of *nixes and *nix user preferences.
>
> Hence we have this trick. Notice you can override this default
> behavior anytime.

I understand your aim to have a "one fit all " *nix setup but IMHO
it'll will be hard to achieve.

Casual users should be pointed to make_{deb,rpm,tgz}.sh while others
should know what is /etc/profile.d and /etc/ld.so.conf.d.

best regards,
Lorenzo
From vszakats at users.sourceforge.net  Sun Sep 20 10:36:23 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun Sep 20 10:36:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12574] trunk/harbour
Message-ID: <E1MpNWZ-00071k-9z@dn4whf1.ch3.sourceforge.com>

Revision: 12574
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12574&view=rev
Author:   vszakats
Date:     2009-09-20 14:36:21 +0000 (Sun, 20 Sep 2009)

Log Message:
-----------
2009-09-20 16:31 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
  * config/global.mk
    + Added beos system location detection.
    + Added system location detection based on [LD_]LIBRARY_PATH.
    ; Please review and even tweak code if needed. I didn't test these changes.

  * utils/hbmk2/hbmk2.prg
    % system location detection code disabled for non-*nix hbmk2 builds.
      It's of no use there, as far as I can overview all scenrios.

  * config/global.mk
    * Restored default lib dir to simply lib on *nixes.
    % Minor opt to system location detection.
    ! Fixed to only use 'harbour' lib/inc postfixes on beos 
      when installed on system location. Thanks Przemek for the patch.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/global.mk
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Sun Sep 20 11:05:51 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun Sep 20 11:05:57 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12575] trunk/harbour
Message-ID: <E1MpNz5-0005WP-Ke@3kljzd1.ch3.sourceforge.com>

Revision: 12575
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12575&view=rev
Author:   vszakats
Date:     2009-09-20 15:05:50 +0000 (Sun, 20 Sep 2009)

Log Message:
-----------
2009-09-20 17:04 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    ; Fixes based on Przemek's extensive tests/suggestions on different *nix systems.
    ! -fixshared option now only effective for gcc compilers. For the rest 
      it behaves as -fullshared.
    ! Added x11 and curses/slang libpath for bsd targets in shared mode.
      hbmk2 solution is rough, but didn't see a reason to make it more 
      complicated. I hope it fixes the problem.
    + Enabled -fullstatic mode for sunpro compilers.

  * utils/hbmk2/hbmk2.prg
    ! Fixed to add /usr/X11R6/lib64 dir to libpath list on linux 
      targets only. (sync with similar guard in sunpro compiler support)

  ; TOFIX: This leaves the GPF in sunpro/linux on the pending list.
  ; TOFIX: And here comes to mind that mingw64 also GPFs in shared mode.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Sun Sep 20 11:06:49 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Sep 20 11:06:58 2009
Subject: [Harbour] Harbour build test results
In-Reply-To: <20090920100322.GB27848@uran.home.aster.pl>
References: <20090920100322.GB27848@uran.home.aster.pl>
Message-ID: <E4EE7639-F264-4C5E-8DDE-DD9960DAE0EC@syenar.hu>

Hi Przemek,

Thanks a lot for these extensive tests and suggestions.

I've just committed last fixes targeting the issues found.
Pls retest.

Brgds,
Viktor

On 2009 Sep 20, at 12:03, Przemyslaw Czerpak wrote:

> Hi Viktor,
>
> I made some build tests with Harbour source code:
>   2009-09-19 14:43 UTC+0200 Przemyslaw Czerpak (druzus/at/ 
> priv.onet.pl)
> using different *nix system and C compilers and I have few notes.
>
>
> I HAIKU builds I set HB_INSTALL_PREFIX=$HOME/hb and:
> make install harbour in:
>   $HOME/hb/bin/
>   $HOME/hb/lib/harbour/
>   $HOME/hb/include/harbour/
> in other *nixes for such setting Harbour is instaled in
>   $HOME/hb/bin/
>   $HOME/hb/lib/
>   $HOME/hb/include/
> HOME in HAIKU is set to /boot/home.
> HAIKU uses a little bit different localizations then other *nixes.
> Looking at its dir structure I'm finding the following analogies:
>   /boot/common/{bin,lib,include,etc}     => /usr
>   /boot/system/{bin,lib,etc}             => /
>   /boot/home/config/{bin,lib,etc}        => /usr/local
> of course they are not exactly the same anyhow these localization
> we can use as system wide. They are in default PATH and LIBRARY_PATH
> (HAIKU does not use LD_ prefix). So to keep HAIKU synced with other
> *nixes rules we should not add /harbour lib and inc suffix  
> unconditionally
> but rather use sth like:
>   ifneq ($(foreach dir,/boot/common /boot/system /boot/home/config,
>                        $(findstring |$(dir),|$(HB_INSTALL_PREFIX))),)
>      LIBPOSTFIX := $(DIRSEP)harbour
>      INCPOSTFIX := $(DIRSEP)harbour
>   endif
>
>
> The -fixshared trick is GCC only specific feature and does not work
> with other compilers I used: ICC, SUNCC.
> It causes problems with HBMK2 which by default redirects -shared
> switch to -fixshared for non system library directory so
> it ends with error.
> It should be changed and for non GCC *nix compilers -shared should
> be redirected to -fullshared.
> I tested that -fixshared works in GCC@x86@32 builds on the following
> OS-es: Linux, SunOS, HAIKU, FreeBSD, NetBSD and OpenBSD.
>
> In HAIKU builds system library directory should be verified using
> LIBRARY_PATH envvar instead of using hardcoded paths.
> Probably in other *nixes it's good to extend hardcoded paths using
> LD_LIBRARY_PATH to detect system localization.
>
> In OpenBSD during linking external libraries bound indirectly by  
> linked
> .so libraries (harbour.so in our case) are scanned only in /lib or / 
> usr/lib.
> Other localizations supported by dynamic linker at runtime are  
> ignored by
> default during linking.
> For hbmk2 it means that in -shared mode if harbour.so is linked with
> dynamic components from different localizations (i.e. /usr/X11R6/lib  
> for
> X11 or /usr/local/lib for SLANG or PCRE) then during linking such  
> paths
> have to be passed using -L GCC option.
> Now hbmk2 shared linking in OpenBSD works only if necessary -L<path>
> are manually specified by user.
>
> HBMK2 does not support -fullstatic in SunPRO builds. To force static  
> mode
> in SunPRO it's necessary to use '-B static' compiler switch. Of  
> course it's
> possible that such final static binaries cannot be created or will  
> not work
> as expected anyhow it's out of hbmk2 control which should only pass  
> valid
> switches to compiler/linker.
>
> In NetBSD builds (GCC 4.1.3) MT application linked in -fullstatic mode
> GPFs. This is probably bound with __thread variable support but I'm
> haven't checked it deeper but I had such problem with some older Linux
> distributions.
> In general in some OS-es/C compiler -fullstatic mode may not be fully
> functional and it's out of our control. Just simply some functionality
> may not be implemented in static system libraries.
>
> In SunPROC Linux builds __constructor__ function attribute is ignored
> sometimes and startup code is not executed. It means that some symbol
> tables may not be registered in HVM and later we have GPF when such
> code is executed. I can replicate the problem with hbtest which GPFs
> because startup code from HBRTL is not executed.
> It looks like compiler bug anyhow it's possible that we exploited
> the problem recently. I'm not 100% sure but I think that over month
> ago hbtest in SunPROC@Linux builds was working for me. If we can find
> the exact reason which exploits the problem then we can try to add
> workaround for it.
>
> In ICC Linux builds HVMALL MT cannot be compiled with -fpic switch.
> It ends with:
>   ../../../../itemapi.c(1047) (col. 1): internal error: 0_1301
>   compilation aborted for ../../../../hvmall.c (code 4)
> Looks that we exploited bug inside ICC compiler. The easiest  
> workaround
> is setting HB_VM_ALL=no when ICC compiles HBVMMT library.
>
> All other things worked as expected.
> I tested native builds for Linux(GCC,ICC,SunPRO), SunOS(GCC,SunPRO),
> HAIKU(GCC), FreeBSD(GCC), OpenBSD(GCC), NetBSD(GCC).
> I checked basic harbour tools like hbrun or hbtest and speedtst in
> MT mode (-thread switch to force parallel execution).
> I also tested hbmk and hbmk2 using  -[{fix,full}]shared and -[full] 
> static
> switches.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Sun Sep 20 12:07:32 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 20 12:07:38 2009
Subject: [Harbour] Harbour build test results
In-Reply-To: <E4EE7639-F264-4C5E-8DDE-DD9960DAE0EC@syenar.hu>
References: <20090920100322.GB27848@uran.home.aster.pl>
	<E4EE7639-F264-4C5E-8DDE-DD9960DAE0EC@syenar.hu>
Message-ID: <20090920160732.GA10386@uran.home.aster.pl>

On Sun, 20 Sep 2009, Szak?ts Viktor wrote:

Hi,

> Thanks a lot for these extensive tests and suggestions.
> I've just committed last fixes targeting the issues found.
> Pls retest.

Thank you, I'll repeat tests soon.
I forgot to write about yet another thing. -Wl, GCC switch
redirects rest of command to linker. Such functionality like
library grouping is linker not compiler part so if it works
in GCC Linux builds then it should work also with other compilers
which use system linker. Both ICC and SunProC use system linker
and even understand -Wl, switch so you can use library grouping
also with these compilers.

Now note about stripping. It's not good idea to strip unconditionally
debug information inside make install. Some systems like RPMs can detect
debug data during creating final packages, extract them from base
binaries and libraries and store into separate *-debug.rpm. If user
needs to debug some internals, i.e. he want to see C call stack
using valgrind then he can simply install such RPMs. Stripping
debug information without an option to control it we are loosing
such functionality.
Personally I always used to install libraries with debug information
and strip only my final binaries. When sth is wrong seeing C call
stack with full information in tools like GDB or valgrind greatly
helps to locate the problem. In the past we also used to ask users
to send to us such C call stack information. Now everyone who wants
to use debug information have to install harbour manually just after
pure build phase.
I think that stripping should be enabled only on user request, i.e.
using HB_STRIP={all,lib,bin} envvar. Now we do not enable full debug
information in default builds (-g is disabled) so stripping is not
such important as it was and overhead is minimal - only basic information
for some trace tools like GDB/VALGRIND to not lose the context.
Using HB_BUILD_DEBUG does not resolve the problem because these switch
causes that different binaries are created.
Please also add ${HB_CCPATH} to strip command:
   ${HB_CCPATH}${HB_CCPREFIX}strip ..

Detection of system location in *nixes and enabling shared mode
needs additional modifications. But here we have more then one
problem mixed together and I have to rethink all of them before
I'll present some propositions.

best regards,
Przemek
From druzus at users.sourceforge.net  Sun Sep 20 12:12:45 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Sun Sep 20 12:12:50 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12576] trunk/harbour
Message-ID: <E1MpP1p-0003CZ-EP@d5vjzd1.ch3.sourceforge.com>

Revision: 12576
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12576&view=rev
Author:   druzus
Date:     2009-09-20 16:12:43 +0000 (Sun, 20 Sep 2009)

Log Message:
-----------
2009-09-20 18:12 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/harbour-win-spec
  * harbour/harbour-wce-spec
  * harbour/bin/hb-func.sh
  * harbour/config/global.mk
    * updated to work with modified base make internals and envvars
    * do not overload defined by user HB_TOOLS_PREF
    ! fixed c&p typo in DJGPP cross build HB_TOOLS_PREF
      Warning: it still needs export HB_BUILD_SHARED=no before creating
      RPMs but it should be fixed in base make together with native builds.
      TODO: we should agree some conditions for alternative system wide
      cross build installation, like .cfg file name and localization.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/hb-func.sh
    trunk/harbour/config/global.mk
    trunk/harbour/harbour-wce-spec
    trunk/harbour/harbour-win-spec


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From ice at extreme.hu  Sun Sep 20 13:31:43 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Sun Sep 20 13:31:50 2009
Subject: [Harbour] silence gnu find in postinst.sh
Message-ID: <alpine.GSO.2.00.0909201930270.17989@dawn.royalcomp.hu>


(doesn't hurt other finds)

Index: bin/postinst.sh
===================================================================
--- bin/postinst.sh	(revision 12576)
+++ bin/postinst.sh	(working copy)
@@ -46,7 +46,7 @@
 fi
 if [ "$HB_PLATFORM" != "hpux" ]; then
    # Keep the size of the libraries to a minimim, but don't try to strip symlinks.
-   ${HB_CCPREFIX}strip -S `find $HB_LIB_INSTALL -type f -maxdepth 1`
+   ${HB_CCPREFIX}strip -S `find $HB_LIB_INSTALL -maxdepth 1 -type f`
 fi
 
 chmod 644 $HB_INC_INSTALL/*

-- 
[-]

mkdir /nonexistent
-------------- next part --------------
Index: bin/postinst.sh
===================================================================
--- bin/postinst.sh	(revision 12576)
+++ bin/postinst.sh	(working copy)
@@ -46,7 +46,7 @@
 fi
 if [ "$HB_PLATFORM" != "hpux" ]; then
    # Keep the size of the libraries to a minimim, but don't try to strip symlinks.
-   ${HB_CCPREFIX}strip -S `find $HB_LIB_INSTALL -type f -maxdepth 1`
+   ${HB_CCPREFIX}strip -S `find $HB_LIB_INSTALL -maxdepth 1 -type f`
 fi
 
 chmod 644 $HB_INC_INSTALL/*
From ice at extreme.hu  Sun Sep 20 13:37:36 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Sun Sep 20 13:37:43 2009
Subject: [Harbour] haiku fallout
Message-ID: <alpine.GSO.2.00.0909201933500.17989@dawn.royalcomp.hu>


hi,

now with libharbour*.so installed in /boot/common/lib/harbour/, things 
don't find it.


-- 
[-]

mkdir /nonexistent
From druzus at acn.waw.pl  Sun Sep 20 13:47:08 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 20 13:47:14 2009
Subject: [Harbour] Patch for debugger.prg
In-Reply-To: <4AA0DDBB.50308@siol.net>
References: <4AA0DDBB.50308@siol.net>
Message-ID: <20090920174708.GA2482@uran.home.aster.pl>

On Fri, 04 Sep 2009, FRAN?EK PRIJATELJ wrote:

Hi,

> As you know debugger doesn't process init.cld well.

Can you repeat what is the exact problem and how to replicate it?

> There is a  patch :
[...]

Thank you very much but before I'll commit it I would like to verify the
problem it fixes. I'm not very familiar with debugger code so I cannot
easy check it with deeper current code analyzing. Maybe Phil can validate
it faster. Phil?

> --- C:/RAZVOJ/HARBOUR/TEST/Debugger/debugger.prg    Fri Sep 04 11:18:59 2009
> +++ C:/HRB/SVN/SRC-SVN/source/debug/debugger.prg    Fri Sep 04 11:11:09 2009

I guess that by mistake you reverted source with destination file so
the patch should be "reverted".

best regards,
Przemek
From harbour.01 at syenar.hu  Sun Sep 20 14:18:32 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Sep 20 14:18:40 2009
Subject: [Harbour] silence gnu find in postinst.sh
In-Reply-To: <alpine.GSO.2.00.0909201930270.17989@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909201930270.17989@dawn.royalcomp.hu>
Message-ID: <5757C474-68C1-4EDD-9FFE-5261F8B37561@syenar.hu>

Thank you!

Brgds,
Viktor

On 2009 Sep 20, at 19:31, Tamas TEVESZ wrote:

>
> (doesn't hurt other finds)
>
> Index: bin/postinst.sh
> ===================================================================
> --- bin/postinst.sh	(revision 12576)
> +++ bin/postinst.sh	(working copy)
> @@ -46,7 +46,7 @@
> fi
> if [ "$HB_PLATFORM" != "hpux" ]; then
>    # Keep the size of the libraries to a minimim, but don't try to  
> strip symlinks.
> -   ${HB_CCPREFIX}strip -S `find $HB_LIB_INSTALL -type f -maxdepth 1`
> +   ${HB_CCPREFIX}strip -S `find $HB_LIB_INSTALL -maxdepth 1 -type f`
> fi
>
> chmod 644 $HB_INC_INSTALL/*
>
> -- 
> [-]
>
> mkdir / 
> nonexistent<find.diff>_______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Sun Sep 20 14:19:54 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Sep 20 14:20:02 2009
Subject: [Harbour] haiku fallout
In-Reply-To: <alpine.GSO.2.00.0909201933500.17989@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909201933500.17989@dawn.royalcomp.hu>
Message-ID: <8B7AF68B-F5DF-4A24-8A5B-5B91C11A2123@syenar.hu>

needs more massaging apparently.

I have no opinion on these file placements, so pls just advise
what to do, or feel free to patch it the way it's best.

Brgds,
Viktor

On 2009 Sep 20, at 19:37, Tamas TEVESZ wrote:

>
> hi,
>
> now with libharbour*.so installed in /boot/common/lib/harbour/, things
> don't find it.
>
>
> -- 
> [-]
>
> mkdir /nonexistent
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Sun Sep 20 14:27:44 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 20 14:27:50 2009
Subject: [Harbour] haiku fallout
In-Reply-To: <alpine.GSO.2.00.0909201933500.17989@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909201933500.17989@dawn.royalcomp.hu>
Message-ID: <20090920182743.GA12180@uran.home.aster.pl>

On Sun, 20 Sep 2009, Tamas TEVESZ wrote:

Hi,

> now with libharbour*.so installed in /boot/common/lib/harbour/, things 
> don't find it.

Not now but from the beginning of adding default HAIKU localization
it was installed in:

   HB_INSTALL_PREFIX=/boot/common
   ${HB_INSTALL_PREFIX}/bin/
   ${HB_INSTALL_PREFIX}/lib/harbour/
   ${HB_INSTALL_PREFIX}/include/harbour/

In general it's a work in progress and in final version we will have soft
links (just like now in other *nixes) or we will store static and dynamic
libraries in different directories. See recent Viktor's modifications.
We should agree here few things:
1. what is system wide localization and what user customized and how
   to detec them.
2. what directory structure we should use for both type of installation
   respecting multi C compiler or cross build binaries. We should also
   define data directory for Harbour system wide installation. I do not
   like current situation that:
      druzus:~# ls /usr/bin|wc -l
      3213
      druzus:~# for f in /usr/bin/*; do [ -x $f ] || echo $f; done
      /usr/bin/hbmk.cfg
      druzus:~#
   storing configuration files in system wide binary directories
   is unacceptable for most of distributions.
3. where to put static and shared libraries (now it's possible
   to set different localizations) and/or where create soft links.
4. shared library naming convention - now only Darwin build tries to
   respect correct version setting in names and links.
5. how to merge binaries for different C compilers and/or different
   platforms (cross building) and how user should chose preferable
   C compiler or destination platform.

I think we should define it ASAP to reduce number of necessary
modifications for users which tries to follow SVN modifications
and sync his local repositories with SVN quite often.

Meanwhile you can simply add /boot/common/lib/harbour to LIBRARY_PATH
envvar in your HAIKU installation.

best regards,
Przemek
From harbour.01 at syenar.hu  Sun Sep 20 14:28:05 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Sep 20 14:28:14 2009
Subject: [Harbour] Harbour build test results
In-Reply-To: <20090920160732.GA10386@uran.home.aster.pl>
References: <20090920100322.GB27848@uran.home.aster.pl>
	<E4EE7639-F264-4C5E-8DDE-DD9960DAE0EC@syenar.hu>
	<20090920160732.GA10386@uran.home.aster.pl>
Message-ID: <CA8B6E7F-2EA2-4A41-AA2A-CE016C67F100@syenar.hu>

> Thank you, I'll repeat tests soon.
> I forgot to write about yet another thing. -Wl, GCC switch
> redirects rest of command to linker. Such functionality like
> library grouping is linker not compiler part so if it works
> in GCC Linux builds then it should work also with other compilers
> which use system linker. Both ICC and SunProC use system linker
> and even understand -Wl, switch so you can use library grouping
> also with these compilers.

You're right. I'll add it to all places where ld is used.

> Now note about stripping. It's not good idea to strip unconditionally
> debug information inside make install. Some systems like RPMs can  
> detect
> debug data during creating final packages, extract them from base
> binaries and libraries and store into separate *-debug.rpm. If user
> needs to debug some internals, i.e. he want to see C call stack
> using valgrind then he can simply install such RPMs. Stripping
> debug information without an option to control it we are loosing
> such functionality.
> Personally I always used to install libraries with debug information
> and strip only my final binaries. When sth is wrong seeing C call
> stack with full information in tools like GDB or valgrind greatly
> helps to locate the problem. In the past we also used to ask users
> to send to us such C call stack information. Now everyone who wants
> to use debug information have to install harbour manually just after
> pure build phase.
> I think that stripping should be enabled only on user request, i.e.
> using HB_STRIP={all,lib,bin} envvar. Now we do not enable full debug
> information in default builds (-g is disabled) so stripping is not
> such important as it was and overhead is minimal - only basic  
> information
> for some trace tools like GDB/VALGRIND to not lose the context.
> Using HB_BUILD_DEBUG does not resolve the problem because these switch
> causes that different binaries are created.
> Please also add ${HB_CCPATH} to strip command:
>   ${HB_CCPATH}${HB_CCPREFIX}strip ..

Okay, point taken. I agree with HB_BUILD_STRIP=[all|lib|bin|no],
with default 'no'.

> Detection of system location in *nixes and enabling shared mode
> needs additional modifications. But here we have more then one
> problem mixed together and I have to rethink all of them before
> I'll present some propositions.

Okay, thanks in advance.

One note from my TODO list: HB_BUILD_SHARED should use versionless
.so names in *nix just like in hbmk2. Although these are links, so
install/clean of links should also be completed inside GNU Make.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 20 14:34:09 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Sep 20 14:34:18 2009
Subject: [Harbour] Harbour build test results
In-Reply-To: <CA8B6E7F-2EA2-4A41-AA2A-CE016C67F100@syenar.hu>
References: <20090920100322.GB27848@uran.home.aster.pl>
	<E4EE7639-F264-4C5E-8DDE-DD9960DAE0EC@syenar.hu>
	<20090920160732.GA10386@uran.home.aster.pl>
	<CA8B6E7F-2EA2-4A41-AA2A-CE016C67F100@syenar.hu>
Message-ID: <7B95DA0A-F995-41AF-90A2-DD7F8423CE90@syenar.hu>

>> Thank you, I'll repeat tests soon.
>> I forgot to write about yet another thing. -Wl, GCC switch
>> redirects rest of command to linker. Such functionality like
>> library grouping is linker not compiler part so if it works
>> in GCC Linux builds then it should work also with other compilers
>> which use system linker. Both ICC and SunProC use system linker
>> and even understand -Wl, switch so you can use library grouping
>> also with these compilers.
>
> You're right. I'll add it to all places where ld is used.

First question popped in quickly:

How can I be sure which targets use system linker (ld)
to do its job?

We never call ld directly, we always call it through gcc.
Maybe we should change this also to direct ld calls. It
would seem cleaner to me and it would also clear above
question without any doubts.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 20 14:39:28 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Sep 20 14:39:36 2009
Subject: [Harbour] haiku fallout
In-Reply-To: <20090920182743.GA12180@uran.home.aster.pl>
References: <alpine.GSO.2.00.0909201933500.17989@dawn.royalcomp.hu>
	<20090920182743.GA12180@uran.home.aster.pl>
Message-ID: <098C59B2-80EC-4EC2-8917-74C9D248A077@syenar.hu>

>> now with libharbour*.so installed in /boot/common/lib/harbour/,  
>> things
>> don't find it.
>
> Not now but from the beginning of adding default HAIKU localization
> it was installed in:
>
>   HB_INSTALL_PREFIX=/boot/common
>   ${HB_INSTALL_PREFIX}/bin/
>   ${HB_INSTALL_PREFIX}/lib/harbour/
>   ${HB_INSTALL_PREFIX}/include/harbour/
>
> In general it's a work in progress and in final version we will have  
> soft
> links (just like now in other *nixes) or we will store static and  
> dynamic
> libraries in different directories. See recent Viktor's modifications.
> We should agree here few things:
> 1. what is system wide localization and what user customized and how
>   to detec them.

Yes.

> 2. what directory structure we should use for both type of  
> installation
>   respecting multi C compiler or cross build binaries. We should also
>   define data directory for Harbour system wide installation. I do not
>   like current situation that:
>      druzus:~# ls /usr/bin|wc -l
>      3213
>      druzus:~# for f in /usr/bin/*; do [ -x $f ] || echo $f; done
>      /usr/bin/hbmk.cfg
>      druzus:~#
>   storing configuration files in system wide binary directories
>   is unacceptable for most of distributions.

Note that hbmk2 already supports several system locations,
so we're free to store it anywhere.

I'd add some more things here:
- where to put 'contrib', 'addon' dirs as separate entities, so that
   they don't get mixed in core libs/headers/etc.
- where to put docs, examples.
- where to put INSTALL, Changelog, ERRATA, TODO and COPYING.

> 3. where to put static and shared libraries (now it's possible
>   to set different localizations) and/or where create soft links.

Yes.

+1: How to name them. Current naming is more or less unified
for non-*nix, but for *nix we have the darwin world and the
rest, which are different in several ways. Maybe this is normal,
but I'd like to know for sure.

> 4. shared library naming convention - now only Darwin build tries to
>   respect correct version setting in names and links.

:) yup, see above.

> 5. how to merge binaries for different C compilers and/or different
>   platforms (cross building) and how user should chose preferable
>   C compiler or destination platform.

Yes, for non-*nix, the system is to use:
bin/<arch>/<comp>/*
or
bin/<arch>/*
for bins.

and
lib/<arch>/<comp>/*
for libs.

> I think we should define it ASAP to reduce number of necessary
> modifications for users which tries to follow SVN modifications
> and sync his local repositories with SVN quite often.

Agreed.

Brgds,
Viktor

From druzus at acn.waw.pl  Sun Sep 20 14:49:55 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 20 14:50:02 2009
Subject: [Harbour] Harbour build test results
In-Reply-To: <7B95DA0A-F995-41AF-90A2-DD7F8423CE90@syenar.hu>
References: <20090920100322.GB27848@uran.home.aster.pl>
	<E4EE7639-F264-4C5E-8DDE-DD9960DAE0EC@syenar.hu>
	<20090920160732.GA10386@uran.home.aster.pl>
	<CA8B6E7F-2EA2-4A41-AA2A-CE016C67F100@syenar.hu>
	<7B95DA0A-F995-41AF-90A2-DD7F8423CE90@syenar.hu>
Message-ID: <20090920184955.GA21950@uran.home.aster.pl>

On Sun, 20 Sep 2009, Szak?ts Viktor wrote:
>> You're right. I'll add it to all places where ld is used.
> First question popped in quickly:
> How can I be sure which targets use system linker (ld)
> to do its job?

I'm think that the only one way is to check in compiler documentation.

In most of cases in *nixes C compilers call platform native linker
with some additional parameters if necessary. The only exception are
compilers like OpenWatcom which comes with own alternative set
of C headers and CRTL libraries not compatible with system ones but
it's rather seldom situation.

> We never call ld directly, we always call it through gcc.
> Maybe we should change this also to direct ld calls. It
> would seem cleaner to me and it would also clear above
> question without any doubts.

I do not think that calling ld directly is good idea. Sometimes
C compiler have to pass some additional parameters to inform linker
about some settings necessary for compiled binaries and/or CRTL
libraries and calling LD directly we will not pass such parameters
so we can create some serious problems.

best regards,
Przemek
From harbour.01 at syenar.hu  Sun Sep 20 16:20:21 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Sep 20 16:20:29 2009
Subject: [Harbour] Harbour build test results
In-Reply-To: <20090920184955.GA21950@uran.home.aster.pl>
References: <20090920100322.GB27848@uran.home.aster.pl>
	<E4EE7639-F264-4C5E-8DDE-DD9960DAE0EC@syenar.hu>
	<20090920160732.GA10386@uran.home.aster.pl>
	<CA8B6E7F-2EA2-4A41-AA2A-CE016C67F100@syenar.hu>
	<7B95DA0A-F995-41AF-90A2-DD7F8423CE90@syenar.hu>
	<20090920184955.GA21950@uran.home.aster.pl>
Message-ID: <BE2F750D-FC50-47BE-A30F-9A2C62930897@syenar.hu>

> On Sun, 20 Sep 2009, Szak?ts Viktor wrote:
>>> You're right. I'll add it to all places where ld is used.
>> First question popped in quickly:
>> How can I be sure which targets use system linker (ld)
>> to do its job?
>
> I'm think that the only one way is to check in compiler documentation.
>
> In most of cases in *nixes C compilers call platform native linker
> with some additional parameters if necessary. The only exception are
> compilers like OpenWatcom which comes with own alternative set
> of C headers and CRTL libraries not compatible with system ones but
> it's rather seldom situation.

Okay, I'll start with the assumption you outlined above
and we will correct if there happens to be some platforms
where there is something else used instead of ld.

>> We never call ld directly, we always call it through gcc.
>> Maybe we should change this also to direct ld calls. It
>> would seem cleaner to me and it would also clear above
>> question without any doubts.
>
> I do not think that calling ld directly is good idea. Sometimes
> C compiler have to pass some additional parameters to inform linker
> about some settings necessary for compiled binaries and/or CRTL
> libraries and calling LD directly we will not pass such parameters
> so we can create some serious problems.

Makes sense.

Brgds,
Viktor

From harbour.01 at syenar.hu  Sun Sep 20 16:39:07 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Sep 20 16:39:18 2009
Subject: [Harbour] haiku fallout
In-Reply-To: <20090920182743.GA12180@uran.home.aster.pl>
References: <alpine.GSO.2.00.0909201933500.17989@dawn.royalcomp.hu>
	<20090920182743.GA12180@uran.home.aster.pl>
Message-ID: <4771CE74-6D74-47AB-B799-EBBEF5AAB953@syenar.hu>

> 1. what is system wide localization and what user customized and how
>   to detec them.

One clean / easy / universal solution is to consider it user customized
when it resides inside /home or /Users, and "system" location if  
anywhere
outside that.

> 3. where to put static and shared libraries (now it's possible
>   to set different localizations) and/or where create soft links.

Here if possible I'd like to see some syncing between *nix and
non-*nix. On non-*nix dlls are created in bin dir, while on *nix
they are created in lib dir. This isn't too good.

So, if there is nothing satanic about it, I'd put *nix dlls also
to bin dir, and add links to lib dir.

> 4. shared library naming convention - now only Darwin build tries to
>   respect correct version setting in names and links.

Current situation:
harbour[mt]-20-wce-arm - WinCE ARM
harbour[mt]-20-wce-mips - WinCE MIPS
harbour[mt]-20-wce-sh - WinCE SH
harbour[mt]-20-wce - WinCE x86
harbour[mt]-20-os2 - OS/2
harbour[mt]-20 - win
harbour[mt]-20-bcc - win x86 (bcc)
harbour[mt]-20-x64 - win x64
harbour[mt]-20-ia64 - win ia64
harbour[mt].2.0.0 - darwin
harbour[mt].2 - darwin (link)
harbour[mt] - darwin (link)
harbour[mt]-2.0.0 - non-darwin *nix
harbour[mt] - non-darwin *nix (link)
harbour[m] - MS-DOS

- For one thing, we should IMO only have major+minor ver numbers
   even on *nixes, since we guarantee binary compatibility between
   revisions.
- We should check whether '.' separate in darwin is a necessity on
   the platform, if not, it should be switched to '-'.
- Maybe we should always add 'win' for win platform, why making it
   the default?
- Maybe we should always add CPU on win platform. x64 will eventually
   become the standard anyway.
- What remains is the major/minor separator.
   Probably we should switch to '2.0' format on non-*nix too.
- Fix darwin/non-darwin links.

This would result in something like this:
harbour[mt]-2.0-wce-arm - WinCE ARM
harbour[mt]-2.0-wce-mips - WinCE MIPS
harbour[mt]-2.0-wce-sh - WinCE SH
harbour[mt]-2.0-wce-x86 - WinCE x86
harbour[mt]-2.0-os2 - OS/2
harbour[mt]-2.0-win-x86 - win
harbour[mt]-2.0-win-x86-bcc - win x86 (bcc)
harbour[mt]-2.0-win-x64 - win x64
harbour[mt]-2.0-win-ia64 - win ia64
harbour[mt]-2.0 - *nix
harbour[mt]-2 - *nix (link - MAYBE - I can't see its use)
harbour[mt] - *nix (link)
harbour[m] - MS-DOS

The only "downside" I can see is longish .dll names, but
IMO that's not a problem.

> 5. how to merge binaries for different C compilers and/or different
>   platforms (cross building) and how user should chose preferable
>   C compiler or destination platform.

[ touched that in a prev mail ]

Brgds,
Viktor

From vszakats at users.sourceforge.net  Sun Sep 20 16:41:52 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun Sep 20 16:41:59 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12577] trunk/harbour
Message-ID: <E1MpTEG-0008Ao-MB@d5vjzd1.ch3.sourceforge.com>

Revision: 12577
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12577&view=rev
Author:   vszakats
Date:     2009-09-20 20:41:51 +0000 (Sun, 20 Sep 2009)

Log Message:
-----------
2009-09-20 22:41 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * harbour-win-spec
  * harbour-wce-spec
  * INSTALL
  * bin/postinst.sh
  * Makefile
  * source/pp/Makefile
  * source/Makefile
  * config/global.mk
    * HB_BUILD_PART -> HB_BUILD_PARTS (simple rename)
    + HB_BUILD_STRIP added. It's dummy yet. Support will have to
      be added on the compiler level and removed from postinst phase.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/Makefile
    trunk/harbour/bin/postinst.sh
    trunk/harbour/config/global.mk
    trunk/harbour/harbour-wce-spec
    trunk/harbour/harbour-win-spec
    trunk/harbour/source/Makefile
    trunk/harbour/source/pp/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Sun Sep 20 16:58:41 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Sep 20 16:58:50 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12576] trunk/harbour
In-Reply-To: <E1MpP1p-0003CZ-EP@d5vjzd1.ch3.sourceforge.com>
References: <E1MpP1p-0003CZ-EP@d5vjzd1.ch3.sourceforge.com>
Message-ID: <F25F20B7-C6A0-4378-A8AF-5E7E97E9656E@syenar.hu>

> 2009-09-20 18:12 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/harbour-win-spec
>  * harbour/harbour-wce-spec
>  * harbour/bin/hb-func.sh
>  * harbour/config/global.mk
>    * updated to work with modified base make internals and envvars
>    * do not overload defined by user HB_TOOLS_PREF
>    ! fixed c&p typo in DJGPP cross build HB_TOOLS_PREF
>      Warning: it still needs export HB_BUILD_SHARED=no before creating
>      RPMs but it should be fixed in base make together with native  
> builds.
>      TODO: we should agree some conditions for alternative system wide
>      cross build installation, like .cfg file name and localization.

It's unclear for me yet the exact purpose we'd like to
use HB_TOOLS_PREF for. I see it being used for hbmk scripts,
plus dynlib helper script.

If we want to take it to the next level IMO it should be renamed
to HB_HBPREFIX or HB_BIN_PREFIX and used to prefix all tools.

But f.e. hbmk2 has regular cmdline switches to select target
platform, so in this case the only reason a prefix would be
needed is to differentiate between different *host* builds.
(ie. the same hbmk2 linux binary is able to produce win/wce/linux
targets) So here the only question is where to put libs/dlls.
(f.e. /usr/lib/harbour/win/mingw/, /usr/lib/harbour/wce and
/usr/harbour/linux/gcc)

In unified Windows installer this is currently solved using
postfixes. Here I planned to store different host builds in
separate dir, and compared to pre/postfixes it has the disadvantage
that they cannot be put in PATH at the same time. pre/postfixes
however has the disadvantage that for MS-DOS hosted one we
always have to create an exception.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Sun Sep 20 17:00:51 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Sun Sep 20 17:00:57 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12578]
	trunk/harbour/ChangeLog
Message-ID: <E1MpTWd-0008Vp-FY@d5vjzd1.ch3.sourceforge.com>

Revision: 12578
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12578&view=rev
Author:   vszakats
Date:     2009-09-20 21:00:47 +0000 (Sun, 20 Sep 2009)

Log Message:
-----------
2009-09-20 23:00 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * ChangeLog
    ! Added missing lines from prev entry:
      * bin/postinst.sh
        + Added HB_CCPATH to strip cmd. Suggest by Przemek.
        ! Minor fix to find cmd by Tamas Tevesz.

Modified Paths:
--------------
    trunk/harbour/ChangeLog


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Sun Sep 20 18:07:09 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Sep 20 18:07:15 2009
Subject: [Harbour] haiku fallout
In-Reply-To: <4771CE74-6D74-47AB-B799-EBBEF5AAB953@syenar.hu>
References: <alpine.GSO.2.00.0909201933500.17989@dawn.royalcomp.hu>
	<20090920182743.GA12180@uran.home.aster.pl>
	<4771CE74-6D74-47AB-B799-EBBEF5AAB953@syenar.hu>
Message-ID: <20090920220709.GA7827@uran.home.aster.pl>

On Sun, 20 Sep 2009, Szak?ts Viktor wrote:
> Here if possible I'd like to see some syncing between *nix and
> non-*nix. On non-*nix dlls are created in bin dir, while on *nix
> they are created in lib dir. This isn't too good.

It will create series of problems. shared libraries have exectable
attribute but they are not normal executable files. It will confuse
shell in tab expansion, GPF on unwanted execution, break strict
protection rules in some distributions, etc.
I think that it's much easier to agree with some conservative admin
that you will put into one of PATH directories series of MP3 files
with hard rock but without executable and write attribute then
single library file with executable attribute and it's not a joke :)

best regards,
Przemek
From bedipritpal at hotmail.com  Mon Sep 21 01:22:08 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep 21 01:22:14 2009
Subject: [Harbour] HBNETIO - Production Application Usage
Message-ID: <25530185.post@talk.nabble.com>


Hello Everybody

Here is what I did to test my flagship application "Vouch"
under HBNETIO protocol concurrently with same system where 
data resides, on LAN connected terminals with/without NETIO, 
on real-time WEB-IP, and everything worked extremely fine.
The only issue worth reporting is the speed on WEB-IP 
whic was 8 times slower than stand-alone and about 
5 times slower than LAN.

ULTIMATELY - results were so satisfying that my clients 
were noticeably impressed. And the credit goes to, PRZEMEK.
Thanks, you did a splendid job.

For WEB-IP we tested with this scenario:

1. Forwarded a port, #63000, on our wireless router.
2. Obtained a domain, vouch.dynalias.com, from DynDNS.com
3. Updated its IP with our server's IP.
4. Executed netiosrv.exe with  63000  192.168.1.108  c:\creative.v15
5. From the terminals invoked "Vouch.exe" with parameters
"vouch.dynalias.com" and "63000" through Vouch.ini.
6. Executed "Vouch.exe" as regular application as before from other
terminals and from same server station.

VOILA all went fine. One terminal employed was from out of the country.

All data updates, concurrent, were ok. All locks respected.

A big leap forward.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/HBNETIO---Production-Application-Usage-tp25530185p25530185.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Mon Sep 21 03:04:14 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 21 03:04:43 2009
Subject: [Harbour] HBNETIO - Production Application Usage
In-Reply-To: <25530185.post@talk.nabble.com>
References: <25530185.post@talk.nabble.com>
Message-ID: <609353e70909210004l6f596c12lee8430ebd4f27f83@mail.gmail.com>

Speed on web can be better compressing data sent from client to server?

2009/9/21 Pritpal Bedi <bedipritpal@hotmail.com>

>
> Hello Everybody
>
> Here is what I did to test my flagship application "Vouch"
> under HBNETIO protocol concurrently with same system where
> data resides, on LAN connected terminals with/without NETIO,
> on real-time WEB-IP, and everything worked extremely fine.
> The only issue worth reporting is the speed on WEB-IP
> whic was 8 times slower than stand-alone and about
> 5 times slower than LAN.
>
> ULTIMATELY - results were so satisfying that my clients
> were noticeably impressed. And the credit goes to, PRZEMEK.
> Thanks, you did a splendid job.
>
> For WEB-IP we tested with this scenario:
>
> 1. Forwarded a port, #63000, on our wireless router.
> 2. Obtained a domain, vouch.dynalias.com, from DynDNS.com
> 3. Updated its IP with our server's IP.
> 4. Executed netiosrv.exe with  63000  192.168.1.108  c:\creative.v15
> 5. From the terminals invoked "Vouch.exe" with parameters
> "vouch.dynalias.com" and "63000" through Vouch.ini.
> 6. Executed "Vouch.exe" as regular application as before from other
> terminals and from same server station.
>
> VOILA all went fine. One terminal employed was from out of the country.
>
> All data updates, concurrent, were ok. All locks respected.
>
> A big leap forward.
>
> Regards
> Pritpal Bedi
> --
> View this message in context:
> http://www.nabble.com/HBNETIO---Production-Application-Usage-tp25530185p25530185.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090921/e08b5933/attachment.html
From M.Horodyski at pzuzycie.com.pl  Mon Sep 21 03:57:04 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Mon Sep 21 03:57:14 2009
Subject: [Harbour] Ppo files
In-Reply-To: <20090917150050.GA26790@uran.home.aster.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B578@PINK.zycie.pzu>

>-----Original Message-----
>From: Przemyslaw Czerpak [mailto:druzus@acn.waw.pl] 
>Sent: Thursday, September 17, 2009 5:01 PM
>To: Harbour Project Main Developer List.
>Subject: Re: RE: [Harbour] Ppo files

[...]

>I can see perfectly well generated test.ppo file.
>I can only guess that you do not have valid INCLUDE directory 
>with inkey.ch so compilation is interrupted at:
>   t81.prg(2) Error F0029  Can't open #include file 'inkey.ch'
>and for unknown for me reason you ignored this error message 
>and send bug report instead of fixing you environment settings.
>Am I right?
>If yes then then please explain me what you are asking for?
>

Really :)
Confused me that script to compile work, and the option /p does not.


Regards,
Marek Horodyski
From mbelgrano at deltain.it  Mon Sep 21 04:52:26 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 21 04:52:54 2009
Subject: [Harbour] HBNETIO - Production Application Usage
In-Reply-To: <609353e70909210004l6f596c12lee8430ebd4f27f83@mail.gmail.com>
References: <25530185.post@talk.nabble.com>
	<609353e70909210004l6f596c12lee8430ebd4f27f83@mail.gmail.com>
Message-ID: <609353e70909210152v5be828f1hdfd4b2ab2aaf178@mail.gmail.com>

Follow is Copied from internet a better description of idea:
In A method of transferring data from a server to a remote client over a
communications link, a request for specific data is sent from the remote
client to the server accompanied by a compression request for transmission
of the data at a specified compression ratio. Upon receipt of this request,
the server retrieves the specific data from a data source, such as a web
server or ftp server. An agent at the remote server intercept the retrieved
data and compresses at least part of the retrieved data prior to
transmission. After transmission to the remote client in compressed form
over the communications link in accordance with the compression request, the
data is decompressed and restored to an uncompressed intelligible form.
http://www.wipo.int/pctdb/en/wo.jsp?wo=2002063882

GNet Server - Network compression client/server software. Compresses data
over slow networks to save on the cost of bandwidth. is developed for Unix
and Windows platforms
http://sourceforge.net/projects/gnunetpress/


2009/9/21 Massimo Belgrano <mbelgrano@deltain.it>

> Speed on web can be better compressing data sent from client to server?
>
> 2009/9/21 Pritpal Bedi <bedipritpal@hotmail.com>
>
>
>> Hello Everybody
>>
>> Here is what I did to test my flagship application "Vouch"
>> under HBNETIO protocol concurrently with same system where
>> data resides, on LAN connected terminals with/without NETIO,
>> on real-time WEB-IP, and everything worked extremely fine.
>> The only issue worth reporting is the speed on WEB-IP
>> whic was 8 times slower than stand-alone and about
>> 5 times slower than LAN.
>>
>> ULTIMATELY - results were so satisfying that my clients
>> were noticeably impressed. And the credit goes to, PRZEMEK.
>> Thanks, you did a splendid job.
>>
>> For WEB-IP we tested with this scenario:
>>
>> 1. Forwarded a port, #63000, on our wireless router.
>> 2. Obtained a domain, vouch.dynalias.com, from DynDNS.com
>> 3. Updated its IP with our server's IP.
>> 4. Executed netiosrv.exe with  63000  192.168.1.108  c:\creative.v15
>> 5. From the terminals invoked "Vouch.exe" with parameters
>> "vouch.dynalias.com" and "63000" through Vouch.ini.
>> 6. Executed "Vouch.exe" as regular application as before from other
>> terminals and from same server station.
>>
>> VOILA all went fine. One terminal employed was from out of the country.
>>
>> All data updates, concurrent, were ok. All locks respected.
>>
>> A big leap forward.
>>
>> Regards
>> Pritpal Bedi
>> --
>> View this message in context:
>> http://www.nabble.com/HBNETIO---Production-Application-Usage-tp25530185p25530185.html
>> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
>
>
> --
> Massimo Belgrano
>
>
>


-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090921/a1d5af33/attachment.html
From vszakats at users.sourceforge.net  Mon Sep 21 05:18:29 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep 21 05:18:34 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12579] trunk/harbour
Message-ID: <E1Mpf2T-0005O8-30@d5vjzd1.ch3.sourceforge.com>

Revision: 12579
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12579&view=rev
Author:   vszakats
Date:     2009-09-21 09:18:24 +0000 (Mon, 21 Sep 2009)

Log Message:
-----------
2009-09-21 11:16 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * contrib/hbqt/Makefile
  * contrib/hbqt/hbqts/Makefile
  * contrib/gtqtc/Makefile
  * contrib/gtqtc/gtqtcs/Makefile
    ! Fixed QT detection on darwin after 2009-09-18 12:19 change
      in detfun.mk.

  * utils/hbmk2/hbmk2.prg
    + Comment added (from .mk).

  * config/darwin/gcc.mk
  * config/darwin/icc.mk
  * config/darwin/clang.mk
  * config/darwin/global.mk
  * config/rules.mk
    + Implemented HB_BUILD_STRIP for darwin.
      (on darwin strip has to be called directly)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/darwin/clang.mk
    trunk/harbour/config/darwin/gcc.mk
    trunk/harbour/config/darwin/global.mk
    trunk/harbour/config/darwin/icc.mk
    trunk/harbour/config/rules.mk
    trunk/harbour/contrib/gtqtc/Makefile
    trunk/harbour/contrib/gtqtc/gtqtcs/Makefile
    trunk/harbour/contrib/hbqt/Makefile
    trunk/harbour/contrib/hbqt/hbqts/Makefile
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From mauriliolongo at users.sourceforge.net  Mon Sep 21 05:29:31 2009
From: mauriliolongo at users.sourceforge.net (mauriliolongo@users.sourceforge.net)
Date: Mon Sep 21 05:29:38 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12580]
	trunk/harbour/ChangeLog
Message-ID: <E1MpfD9-0005bm-9X@d5vjzd1.ch3.sourceforge.com>

Revision: 12580
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12580&view=rev
Author:   mauriliolongo
Date:     2009-09-21 09:29:30 +0000 (Mon, 21 Sep 2009)

Log Message:
-----------
2009-09-21 11:28 UTC+0200 Maurilio Longo (maurilio.longo@libero.it)
  ! ChangeLog
    ! forgot to write here my latest change

Modified Paths:
--------------
    trunk/harbour/ChangeLog


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From jfl at mafact.com  Mon Sep 21 05:36:00 2009
From: jfl at mafact.com (J. Lefebvre)
Date: Mon Sep 21 05:36:42 2009
Subject: [Harbour] "set deleted on"not workin anyore from last CVS
In-Reply-To: <609353e70909210152v5be828f1hdfd4b2ab2aaf178@mail.gmail.com>
Message-ID: <9abefd.1ca3a9f.14163e60.4ae1@mafact.com>

Hi,
 
Compiling the very last cvs version I discovered ?SET DELETED ON? do not work anymore (using ADSRDD).
 
I see some modification around the 15-09-2009.
 
Any idea ?
 
Regards,
 
JF,
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090921/c66d9927/attachment-0001.html
From vszakats at users.sourceforge.net  Mon Sep 21 05:46:34 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep 21 05:46:40 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12581] trunk/harbour
Message-ID: <E1MpfTe-0005xE-SP@d5vjzd1.ch3.sourceforge.com>

Revision: 12581
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12581&view=rev
Author:   vszakats
Date:     2009-09-21 09:46:33 +0000 (Mon, 21 Sep 2009)

Log Message:
-----------

2009-09-21 11:44 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/global.mk
    ! Fixed to recent changes to sysloc detection.

  * config/linux/gcc.mk
    + Added HB_BUILD_STRIP for linux/gcc.

  * config/bin.mk
    ! Fixed to not try to build a shared binary for binaries not
      dependent on HVM. It's done in a little tricky way, maybe
      we should introduce a new variable to signal Harbour
      executables vs plain C ones.
      This should fix link errors in harbour reported by users.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/bin.mk
    trunk/harbour/config/global.mk
    trunk/harbour/config/linux/gcc.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Mon Sep 21 06:13:41 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep 21 06:13:46 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12582] trunk/harbour
Message-ID: <E1Mpftt-0005ot-70@bj8yhf1.ch3.sourceforge.com>

Revision: 12582
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12582&view=rev
Author:   vszakats
Date:     2009-09-21 10:13:39 +0000 (Mon, 21 Sep 2009)

Log Message:
-----------
2009-09-21 12:11 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/beos/gcc.mk
  * config/beos/global.mk
  * config/bsd/gcc.mk
  * config/bsd/global.mk
  * config/wce/mingwarm.mk
  * config/hpux/gcc.mk
  * config/hpux/global.mk
  * config/dos/djgpp.mk
  * config/win/mingw.mk
  * config/win/cygwin.mk
  * config/linux/icc.mk
  * config/linux/sunpro.mk
  * config/os2/gcc.mk
  * config/sunos/gcc.mk
  * config/sunos/global.mk
  * config/sunos/sunpro.mk
    + Added HB_BUILD_STRIP support for rest of compilers.
    ; Please make tests.

  * bin/postinst.sh
    - Deleted strip from postinst phase.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/postinst.sh
    trunk/harbour/config/beos/gcc.mk
    trunk/harbour/config/beos/global.mk
    trunk/harbour/config/bsd/gcc.mk
    trunk/harbour/config/bsd/global.mk
    trunk/harbour/config/dos/djgpp.mk
    trunk/harbour/config/hpux/gcc.mk
    trunk/harbour/config/hpux/global.mk
    trunk/harbour/config/linux/icc.mk
    trunk/harbour/config/linux/sunpro.mk
    trunk/harbour/config/os2/gcc.mk
    trunk/harbour/config/sunos/gcc.mk
    trunk/harbour/config/sunos/global.mk
    trunk/harbour/config/sunos/sunpro.mk
    trunk/harbour/config/wce/mingwarm.mk
    trunk/harbour/config/win/cygwin.mk
    trunk/harbour/config/win/mingw.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Mon Sep 21 06:41:02 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep 21 06:41:08 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12583] trunk/harbour
Message-ID: <E1MpgKM-0008V9-DP@c3vjzd1.ch3.sourceforge.com>

Revision: 12583
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12583&view=rev
Author:   vszakats
Date:     2009-09-21 10:40:57 +0000 (Mon, 21 Sep 2009)

Log Message:
-----------
2009-09-21 12:40 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * external/libpng/pngconf.h
  * external/libpng/pngset.c
  * external/libpng/pngwutil.c
  * external/libpng/png.c
  * external/libpng/png.h
    * Updated to 1.2.40 (from 1.2.39)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/external/libpng/png.c
    trunk/harbour/external/libpng/png.h
    trunk/harbour/external/libpng/pngconf.h
    trunk/harbour/external/libpng/pngset.c
    trunk/harbour/external/libpng/pngwutil.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Mon Sep 21 06:43:20 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep 21 06:43:26 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12584] trunk/harbour
Message-ID: <E1MpgMa-00005N-V3@c3vjzd1.ch3.sourceforge.com>

Revision: 12584
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12584&view=rev
Author:   vszakats
Date:     2009-09-21 10:42:53 +0000 (Mon, 21 Sep 2009)

Log Message:
-----------
2009-09-21 12:41 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * external/libpng/LICENSE
    ! Missed one file from prev.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/external/libpng/LICENSE


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Mon Sep 21 06:55:43 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep 21 06:55:49 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12585] trunk/harbour
Message-ID: <E1MpgYZ-0000L8-62@c3vjzd1.ch3.sourceforge.com>

Revision: 12585
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12585&view=rev
Author:   vszakats
Date:     2009-09-21 10:55:37 +0000 (Mon, 21 Sep 2009)

Log Message:
-----------
2009-09-21 12:54 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * harbour-win-spec
  * harbour-wce-spec
  * harbour.spec
    % Using HB_BUILD_STRIP instead of stripping locally.

  * harbour.spec
    % Using HB_BUILD_SHARED instead of rebuilding tools locally.
    * Changed 'make -i' to 'make' to sync with other spec files.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/harbour-wce-spec
    trunk/harbour/harbour-win-spec
    trunk/harbour/harbour.spec


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Mon Sep 21 07:12:31 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 21 07:12:40 2009
Subject: [Harbour] haiku fallout
In-Reply-To: <20090920220709.GA7827@uran.home.aster.pl>
References: <alpine.GSO.2.00.0909201933500.17989@dawn.royalcomp.hu>
	<20090920182743.GA12180@uran.home.aster.pl>
	<4771CE74-6D74-47AB-B799-EBBEF5AAB953@syenar.hu>
	<20090920220709.GA7827@uran.home.aster.pl>
Message-ID: <C917A0FF-76D6-42BC-B38F-0941ECFFB5B2@syenar.hu>


On 2009 Sep 21, at 00:07, Przemyslaw Czerpak wrote:

> On Sun, 20 Sep 2009, Szak?ts Viktor wrote:
>> Here if possible I'd like to see some syncing between *nix and
>> non-*nix. On non-*nix dlls are created in bin dir, while on *nix
>> they are created in lib dir. This isn't too good.
>
> It will create series of problems. shared libraries have exectable
> attribute but they are not normal executable files. It will confuse
> shell in tab expansion, GPF on unwanted execution, break strict
> protection rules in some distributions, etc.
> I think that it's much easier to agree with some conservative admin
> that you will put into one of PATH directories series of MP3 files
> with hard rock but without executable and write attribute then
> single library file with executable attribute and it's not a joke :)

:) So it *is* satanic. Not a big problem overall, the main thing
here is that all libs should be accessible from lib dir,
which is now solved nicely using implibs for remaining (windows) cases.

Brgds,
Viktor

From jfl at mafact.com  Mon Sep 21 07:49:00 2009
From: jfl at mafact.com (J. Lefebvre)
Date: Mon Sep 21 07:50:00 2009
Subject: [Harbour] "set deleted on"not workin anyore from last CVS
In-Reply-To: <9abefd.1ca3a9f.14163e60.4ae1@mafact.com>
Message-ID: <a0d27ed4.1ca3ab1.14904f63.2ea6@mafact.com>

Using an older ADSRDD do not solve the problem . seem to be higher in RDD structure.
 
De : harbour-bounces@harbour-project.org [mailto:harbour-bounces@harbour-project.org] De la part de J. Lefebvre
Envoy? : lundi 21 septembre 2009 11:36
? : 'Harbour Project Main Developer List.'
Objet : [Harbour] "set deleted on"not workin anyore from last CVS
 
Hi,
 
Compiling the very last cvs version I discovered 'SET DELETED ON' do not work anymore (using ADSRDD).
 
I see some modification around the 15-09-2009.
 
Any idea ?
 
Regards,
 
JF,
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090921/46010f74/attachment.html
From vszakats at users.sourceforge.net  Mon Sep 21 08:04:12 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep 21 08:04:17 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12586] trunk/harbour
Message-ID: <E1Mphcq-0007p9-7K@74yxhf1.ch3.sourceforge.com>

Revision: 12586
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12586&view=rev
Author:   vszakats
Date:     2009-09-21 12:04:11 +0000 (Mon, 21 Sep 2009)

Log Message:
-----------
2009-09-21 14:03 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * harbour-win-spec
  * harbour-wce-spec
    % Deleted some unnecessary lines (related to strip feature)

  * harbour.spec
    * HB_INC_* -> HB_WITH_*

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/harbour-wce-spec
    trunk/harbour/harbour-win-spec
    trunk/harbour/harbour.spec


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From maurilio.longo at libero.it  Mon Sep 21 09:06:32 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Mon Sep 21 09:06:42 2009
Subject: [Harbour] os/2 dll
Message-ID: <4AB77A58.2070900@libero.it>

Hi Viktor,

I'm at a good point, dll gets created so it does for the import library, but
when I start a program (I'm using hbtest after setting hb_build_shared=yes) I
get this error:

(E:\repository\harbour\bin\os2\gcc)hbtest

Unrecoverable error 9012: Can't locate the starting procedure: 'MAIN'

What can it be? I mean, am I missing some module from the building of the .dll
or what?

Maurilio.


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From druzus at acn.waw.pl  Mon Sep 21 09:07:43 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 21 09:07:50 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12586] trunk/harbour
In-Reply-To: <E1Mphcq-0007p9-7K@74yxhf1.ch3.sourceforge.com>
References: <E1Mphcq-0007p9-7K@74yxhf1.ch3.sourceforge.com>
Message-ID: <20090921130743.GA11831@uran.home.aster.pl>

On Mon, 21 Sep 2009, vszakats@users.sourceforge.net wrote:

Hi,

> 2009-09-21 14:03 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>   * harbour-win-spec
>   * harbour-wce-spec
>     % Deleted some unnecessary lines (related to strip feature)

Please revert it. __strip and __objdump macros were redefined intentionally.
Without it in some systems RPM will try to use standard system commands for
Win PE binaries. I left note about it in the .spec files.

best regards,
Przemek
From vszakats at users.sourceforge.net  Mon Sep 21 09:13:18 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep 21 09:13:24 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12587] trunk/harbour
Message-ID: <E1Mpihi-0000h7-DF@74yxhf1.ch3.sourceforge.com>

Revision: 12587
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12587&view=rev
Author:   vszakats
Date:     2009-09-21 13:13:17 +0000 (Mon, 21 Sep 2009)

Log Message:
-----------
2009-09-21 15:07 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/sunos/global.mk
    ! Fixed to not use -s option for stripping. This doesn't seem to
      be supported on sunos platform, at least according to code found
      in hbmk2.

  * utils/hbmk2/hbmk2.prg
    + Added support for -strip in -hbdyn mode.
    + Added -strip support for sunos/gcc targets.
    ! Fixed to use strip command instead of -s option with sunos/sunpro
      targets.

  * utils/hbmk2/hbmk2.prg
  * config/bin.mk
    + Added hbmainstd lib for os/2 targets in shared mode.
      Maurilio, please restest after this change.

  ; Needless to say I couldn't test these, so I'd appreciate if sunos
    users could verify it (except -strip in -hbdyn mode).

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/bin.mk
    trunk/harbour/config/sunos/global.mk
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Mon Sep 21 09:18:02 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 21 09:18:12 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12586] trunk/harbour
In-Reply-To: <20090921130743.GA11831@uran.home.aster.pl>
References: <E1Mphcq-0007p9-7K@74yxhf1.ch3.sourceforge.com>
	<20090921130743.GA11831@uran.home.aster.pl>
Message-ID: <C812B38C-FBEA-4983-A808-D57FF1353317@syenar.hu>

Hi,

> On Mon, 21 Sep 2009, vszakats@users.sourceforge.net wrote:
>
> Hi,
>
>> 2009-09-21 14:03 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>>  * harbour-win-spec
>>  * harbour-wce-spec
>>    % Deleted some unnecessary lines (related to strip feature)
>
> Please revert it. __strip and __objdump macros were redefined  
> intentionally.
> Without it in some systems RPM will try to use standard system  
> commands for
> Win PE binaries. I left note about it in the .spec files.

I can revert it, but this way there is again duplicate
(and potentially contradicting with GNU Make) ccpath/ccprefix
settings used in these .spec files.

Why should rpm call strip (and objdump) in these cases at all?
Can't it be simply disabled?

Brgds,
Viktor

From vszakats at users.sourceforge.net  Mon Sep 21 09:25:21 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep 21 09:25:26 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12588] trunk/harbour
Message-ID: <E1MpitN-0000wL-HV@74yxhf1.ch3.sourceforge.com>

Revision: 12588
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12588&view=rev
Author:   vszakats
Date:     2009-09-21 13:25:20 +0000 (Mon, 21 Sep 2009)

Log Message:
-----------
2009-09-21 15:23 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    + Added support for -strip option in -hblib mode.
    ! Fixed -strip in -hbdyn mode for darwin and sunos targets which
      use individual strip command.

  * harbour-win-spec
  * harbour-wce-spec
    * Reverted change in 2009-09-21 14:03.
    ; See related pending question on dev list.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/harbour-wce-spec
    trunk/harbour/harbour-win-spec
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From ice at extreme.hu  Mon Sep 21 09:25:38 2009
From: ice at extreme.hu (Tamas TEVESZ)
Date: Mon Sep 21 09:25:46 2009
Subject: [Harbour] linux x dos/watcom build failure
Message-ID: <alpine.GSO.2.00.0909211523290.17989@dawn.royalcomp.hu>


hi,

this is something new:

HB_BUILD_DEBUG=yes
WATCOM=/opt/ow
HB_CONTRIBLIBS=no
HB_BUILD_EXTDEF=no
HB_COMMERCE=yes
HB_INSTALL_PREFIX=/home/ice/w/xhb/hbci/inst/dos/watcom/cpp
HB_COMPILER=watcom
HB_BUILD_MODE=cpp
HB_BUILD_OPTIM=no
HB_PLATFORM=dos
INCLUDE=/opt/ow/h
===
! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh   
! HB_INSTALL_PREFIX: /home/ice/w/xhb/hbci/inst/dos/watcom/cpp
! HB_BUILD_DEBUG: yes
! HB_BUILD_OPTIM: no
! HB_BUILD_MODE: cpp
! HB_BUILD_EXTDEF: no
! HB_CONTRIBLIBS: no
! HB_HOST_PLAT: linux (x86_64)  HB_SHELL: sh
! HB_PLATFORM: dos (x86) 
! HB_COMPILER: watcom 
! HB_BIN_COMPILE not specified. Automatically set to: /usr/bin
! Component: 'zlib' found in /home/ice/w/xhb/hbci/harbour-build/external/zlib (local)
! Component: 'pcre' found in /home/ice/w/xhb/hbci/harbour-build/external/pcre (local)
! Component: 'openssl' not supported with watcom compiler
! Component: 'gpm' explicitly disabled
! Component: 'slang' explicitly disabled
! Component: 'curses' not found
! Component: 'x11' not found
! Component: 'wattcp/watt-32' not found
! REVISION: 12586
[...]
wlib -q -p=72 -c -n  ../../../../../lib/dos/watcom/hbdebug.lib 
 -+dbgentry.obj -+dbgmenu.obj -+dbghelp.obj -+dbgtinp.obj 
 -+dbgtmenu.obj -+dbgtmitm.obj -+dbgtwin.obj -+debugger.obj 
 -+dbgtarr.obj -+dbgthsh.obj -+dbgtobj.obj -+tbrwtext.obj -+dbgwa.obj 
 -+dbgbrwsr.obj
wlink OP quiet SYS cwdllr  NAME '../../../../../bin/dos/watcom/harbour' OP 
 implib='../../../../../lib/dos/watcom/harbour.lib' @__dyn__.tmp 
Warning! W1027: file clib3r.lib(cstart): redefinition of ___begtext ignored
Warning! W1027: file clib3r.lib(cstart): redefinition of __nullarea ignored
Warning! W1027: file clib3r.lib(cstart): redefinition of __D16Infoseg ignored
Warning! W1027: file clib3r.lib(cstart): redefinition of __x386_zero_base_selector ignored
Warning! W1027: file clib3r.lib(cstart): redefinition of __exit_ ignored
Warning! W1027: file clib3r.lib(cstart): redefinition of __do_exit_with_msg__ ignored
Warning! W1027: file clib3r.lib(cstart): redefinition of __GETDS ignored
Warning! W1027: file clib3r.lib(cstart): redefinition of ___GETDSStart_ ignored
Warning! W1027: file clib3r.lib(cstart): redefinition of ___GETDSEnd_ ignored
Error! E2030: file clib3r.lib(cstart): multiple starting addresses found
make[3]: *** [harbour] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [dynlib] Error 2
make: *** [source] Error 2


-- 
[-]

mkdir /nonexistent
From harbour.01 at syenar.hu  Mon Sep 21 09:27:38 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 21 09:27:46 2009
Subject: [Harbour] os/2 dll
In-Reply-To: <4AB77A58.2070900@libero.it>
References: <4AB77A58.2070900@libero.it>
Message-ID: <8672CADA-0C57-43D2-A974-2CA714DA236D@syenar.hu>

Hi Maurilio,

I've committed some changes to include hbmainstd lib when
creating shared binaries, but thinking about it, they
might not solve this specific problem altogether. Or it may
need some additional tweaking in hvm.c or elsewhere.

Hopefully Przemek can jump in with more ideas.

Until then pls try after 12587.

Brgds,
Viktor

On 2009 Sep 21, at 15:06, Maurilio Longo wrote:

> Hi Viktor,
>
> I'm at a good point, dll gets created so it does for the import  
> library, but
> when I start a program (I'm using hbtest after setting  
> hb_build_shared=yes) I
> get this error:
>
> (E:\repository\harbour\bin\os2\gcc)hbtest
>
> Unrecoverable error 9012: Can't locate the starting procedure: 'MAIN'
>
> What can it be? I mean, am I missing some module from the building  
> of the .dll
> or what?
>
> Maurilio.
>
>
> -- 
> __________
> |  |  | |__| Maurilio Longo
> |_|_|_|____| farmaconsult s.r.l.
>
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vszakats at users.sourceforge.net  Mon Sep 21 09:29:33 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep 21 09:29:39 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12589] trunk/harbour
Message-ID: <E1MpixR-00011f-79@74yxhf1.ch3.sourceforge.com>

Revision: 12589
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12589&view=rev
Author:   vszakats
Date:     2009-09-21 13:29:32 +0000 (Mon, 21 Sep 2009)

Log Message:
-----------
2009-09-21 15:29 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    ! Fix to -strip with -hblib support for gcc targets.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Mon Sep 21 09:34:33 2009
From: harbour.01 at syenar.hu (=?UTF-8?Q?Viktor_Szak=C3=A1ts?=)
Date: Mon Sep 21 09:34:41 2009
Subject: [Harbour] linux x dos/watcom build failure
In-Reply-To: <alpine.GSO.2.00.0909211523290.17989@dawn.royalcomp.hu>
References: <alpine.GSO.2.00.0909211523290.17989@dawn.royalcomp.hu>
Message-ID: <18d502870909210634q825a8d1r72cea85ab90dd933@mail.gmail.com>

Hi,
Yes, see note in 2009-09-19 16:47.

No idea how to fix it. Personally I can live without dos/watcom
.dll (and without even dos) support indefinitely, so if no one is
interested to contribute some ideas here I'll just comment out
this experiment as a (sort of) fix.

Brgds,
Viktor

On Mon, Sep 21, 2009 at 3:25 PM, Tamas TEVESZ <ice@extreme.hu> wrote:

>
> hi,
>
> this is something new:
>
> HB_BUILD_DEBUG=yes
> WATCOM=/opt/ow
> HB_CONTRIBLIBS=no
> HB_BUILD_EXTDEF=no
> HB_COMMERCE=yes
> HB_INSTALL_PREFIX=/home/ice/w/xhb/hbci/inst/dos/watcom/cpp
> HB_COMPILER=watcom
> HB_BUILD_MODE=cpp
> HB_BUILD_OPTIM=no
> HB_PLATFORM=dos
> INCLUDE=/opt/ow/h
> ===
> ! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
> ! MAKE: make 3.81 /bin/sh
> ! HB_INSTALL_PREFIX: /home/ice/w/xhb/hbci/inst/dos/watcom/cpp
> ! HB_BUILD_DEBUG: yes
> ! HB_BUILD_OPTIM: no
> ! HB_BUILD_MODE: cpp
> ! HB_BUILD_EXTDEF: no
> ! HB_CONTRIBLIBS: no
> ! HB_HOST_PLAT: linux (x86_64)  HB_SHELL: sh
> ! HB_PLATFORM: dos (x86)
> ! HB_COMPILER: watcom
> ! HB_BIN_COMPILE not specified. Automatically set to: /usr/bin
> ! Component: 'zlib' found in
> /home/ice/w/xhb/hbci/harbour-build/external/zlib (local)
> ! Component: 'pcre' found in
> /home/ice/w/xhb/hbci/harbour-build/external/pcre (local)
> ! Component: 'openssl' not supported with watcom compiler
> ! Component: 'gpm' explicitly disabled
> ! Component: 'slang' explicitly disabled
> ! Component: 'curses' not found
> ! Component: 'x11' not found
> ! Component: 'wattcp/watt-32' not found
> ! REVISION: 12586
> [...]
> wlib -q -p=72 -c -n  ../../../../../lib/dos/watcom/hbdebug.lib
>  -+dbgentry.obj -+dbgmenu.obj -+dbghelp.obj -+dbgtinp.obj
>  -+dbgtmenu.obj -+dbgtmitm.obj -+dbgtwin.obj -+debugger.obj
>  -+dbgtarr.obj -+dbgthsh.obj -+dbgtobj.obj -+tbrwtext.obj -+dbgwa.obj
>  -+dbgbrwsr.obj
> wlink OP quiet SYS cwdllr  NAME '../../../../../bin/dos/watcom/harbour' OP
>  implib='../../../../../lib/dos/watcom/harbour.lib' @__dyn__.tmp
> Warning! W1027: file clib3r.lib(cstart): redefinition of ___begtext ignored
> Warning! W1027: file clib3r.lib(cstart): redefinition of __nullarea ignored
> Warning! W1027: file clib3r.lib(cstart): redefinition of __D16Infoseg
> ignored
> Warning! W1027: file clib3r.lib(cstart): redefinition of
> __x386_zero_base_selector ignored
> Warning! W1027: file clib3r.lib(cstart): redefinition of __exit_ ignored
> Warning! W1027: file clib3r.lib(cstart): redefinition of
> __do_exit_with_msg__ ignored
> Warning! W1027: file clib3r.lib(cstart): redefinition of __GETDS ignored
> Warning! W1027: file clib3r.lib(cstart): redefinition of ___GETDSStart_
> ignored
> Warning! W1027: file clib3r.lib(cstart): redefinition of ___GETDSEnd_
> ignored
> Error! E2030: file clib3r.lib(cstart): multiple starting addresses found
> make[3]: *** [harbour] Error 1
> make[2]: *** [descend] Error 2
> make[1]: *** [dynlib] Error 2
> make: *** [source] Error 2
>
>
> --
> [-]
>
> mkdir /nonexistent
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090921/2b68228c/attachment.html
From dbtopas at dbtopas.lt  Mon Sep 21 09:39:13 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Sep 21 09:40:09 2009
Subject: [Harbour] MT compile warning
Message-ID: <4AB78201.3080402@dbtopas.lt>

Hi,


code:
----------------------------
PROC main()
#pragma begindump
#include "hbthread.h"
static HB_CRITICAL_NEW( s_mtx );
void somefunc( void )
{
    HB_CRITICAL_INIT( s_mtx );
}
#pragma enddump
----------------------------

causes warning on BCC:
Warning W8075 test.prg 7: Suspicious pointer conversion in function somefunc

The same warning is generated for HB_CRITICAL_LOCK( s_mtx ) and 
HB_CRITICAL_UNLOCK( s_mtx ).


Regards,
Mindaugas
From druzus at acn.waw.pl  Mon Sep 21 09:55:46 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 21 09:55:53 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12586] trunk/harbour
In-Reply-To: <C812B38C-FBEA-4983-A808-D57FF1353317@syenar.hu>
References: <E1Mphcq-0007p9-7K@74yxhf1.ch3.sourceforge.com>
	<20090921130743.GA11831@uran.home.aster.pl>
	<C812B38C-FBEA-4983-A808-D57FF1353317@syenar.hu>
Message-ID: <20090921135546.GA22029@uran.home.aster.pl>

On Mon, 21 Sep 2009, Szak?ts Viktor wrote:

Hi,

> I can revert it, but this way there is again duplicate
[...]

please do it.

> Why should rpm call strip (and objdump) in these cases at all?

Because it on some distros ti tries to create separate package
with debug information.

> Can't it be simply disabled?

I do not know such method.

best regards,
Przemek
From mbelgrano at deltain.it  Mon Sep 21 10:10:35 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Sep 21 10:11:04 2009
Subject: [Harbour] "set deleted on"not workin anyore from last CVS
In-Reply-To: <a0d27ed4.1ca3ab1.14904f63.2ea6@mafact.com>
References: <9abefd.1ca3a9f.14163e60.4ae1@mafact.com>
	<a0d27ed4.1ca3ab1.14904f63.2ea6@mafact.com>
Message-ID: <609353e70909210710u3645d450i8a7598c4d1514de6@mail.gmail.com>

I try made a test but i am not able to do a testHBMK2 HBDBTEST.PRG ace32.lib
rddado.lib rddads.lib
return me error cannot find -lace32



REQUEST ADS
REQUEST DBFCDX
request DBFFPT
REQUEST ADORDD
// REQUEST SDODBC,SQLMIX // #DEFINE  RDDI_CONNECT 1001 //// #include "
mediator.ch"
#INCLUDE "ORD.CH"
#command DEFAULT <v1> TO <x1> [, <vN> TO <xN> ];
        => IF((<v1>)=NIL,<v1>:=<x1>,NIL) [; IF((<vN>)=NIL,<vN>:=<xN>,NIL)]

FUNCTION MAIN(x_command)
 LOCAL A,X_FLAG
 LOCAL
A_CMDLINE:={{"/ADL","ADS"},{"/ADS","ADS"},{"/ADORDD","ADORDD"},{"/DBFCDX","DBFCDX"},{"/BMDBFCDX","BMDBFCDX"}
}
  LOCAL X_RDD
 DEFAULT x_command TO "/ADS"
 FOR A=1 TO LEN(A_CMDLINE)
    IF A_CMDLINE[A,1] $ UPPER(X_COMMAND)
      X_RDD=A_CMDLINE[A,1]
      X_FLAG=A_CMDLINE[A,2]
    ENDIF
 NEXT A
 rddsetdefault( X_RDD)
  // possible expand with NETIO_CONNECT(*
{"/SQLMIX",/"SQLMIX",},{"/SQLRDD","SQLRDD"},{"MEDSQL"MEDSQL"}
 if x_rdd="ADS"
   IF X_FLAG="/ADL"
     AdsSetServerType ( 1 )  // SET SERVER LOCAL
     ELSE
     AdsSetServerType ( 2 )  // SET SERVER remote
   ENDIF
  SET(_SET_OPTIMIZE,.T.)
   AdsSetFileType(2)   // SET FILETYPE TO CDX // if you are using DBFCDX
   AdsLocking(  .f.   )  // // SET AXS LOCKING OFF
   ADSRightsCheck( .f.)
   AdsSetCharType(2,.T.)  // font oem + recupera il carattere oem
 else
 ENDIF
 SET OPTIMIZE ON
 set deleted off

? DTOC(DATE())+" "
?? TIME()
? +" "+CURDRIVE()+":\"
?? CURDIR()
? "RDD="+X_RDD +" option "+X_FLAG

* TEST TABLE
aDbf := {}
AADD( aDbf, { "FN", "N", 10, 0 } )
AADD( aDbf, { "FNF", "N", 12, 4 } )
AADD( aDbf, { "FC", "C", 40, 0 } )
AADD( aDbf, { "FD", "D", 8, 0 } )
AADD( aDbf, { "FL", "L", 1, 0 } )
AADD( aDbf, { "FM", "M", 0, 0 } )
FOR A=1 TO 20
AADD( aDbf, { "FIELD"+ALLTRIM(STR(A)), "C", 10, 0 } )
NEXT A

dbCreate("hbdbtest",aDbf)
USE dbtest EXCLUSIVE
index on fc + str(fn,10,0) to DBtest_i1

? "Creating gbdbtest database - inserting 10 records"
use hbdbtest  SHARED
IF NETERR()
   ? "Unable to open hbDBTEST - quit"
   QUIT
ENDIF

? "INSERT        : 10   "
st = seconds()
for i = 1 to 10
        append blank
        replace fn with A
        replace fnf with A*A
        replace fc with replicate( CHR(65+A ), 40 )
        replace fd with date() + A
        replace fl with A*2
next
commit
goto 2
delete
goto 5
delete
GO TOP
DBEDIT()

return



2009/9/21 J. Lefebvre <jfl@mafact.com>

>  Using an older ADSRDD do not solve the problem ? seem to be higher in RDD
> structure.
>
>
>
> *De :* harbour-bounces@harbour-project.org [mailto:
> harbour-bounces@harbour-project.org] *De la part de* J. Lefebvre
> *Envoy? :* lundi 21 septembre 2009 11:36
> *? :* 'Harbour Project Main Developer List.'
> *Objet :* [Harbour] "set deleted on"not workin anyore from last CVS
>
>
>
> Hi,
>
>
>
> Compiling the very last cvs version I discovered ?SET DELETED ON? do not
> work anymore (using ADSRDD).
>
>
>
> I see some modification around the 15-09-2009.
>
>
>
> Any idea ?
>
>
>
> Regards,
>
>
>
> JF,
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>


-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090921/fd3cf750/attachment.html
From snaiperis at users.sourceforge.net  Mon Sep 21 10:24:06 2009
From: snaiperis at users.sourceforge.net (snaiperis@users.sourceforge.net)
Date: Mon Sep 21 10:24:12 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12590] trunk/harbour
Message-ID: <E1MpjoE-0002nd-Rq@d5vjzd1.ch3.sourceforge.com>

Revision: 12590
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12590&view=rev
Author:   snaiperis
Date:     2009-09-21 14:24:02 +0000 (Mon, 21 Sep 2009)

Log Message:
-----------
2009-09-21 17:20 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
  + harbour/contrib/iodmem
  + harbour/contrib/iodmem/iodmem.c
    + Implemented Memory file system. Public functions hb_memfs*() are 
      availible, if HB_MEMFS_PUBLIC_API is defined.
    + Implemeted I/O driver for memory file system
    ; HB_IODMEM request can be used to force linking of I/O driver and 
      memory FS into executable.
      "mem:" prefix should be used to indicate a MemFS file, ex.:

      REQUEST HB_IODMEM

      PROC main()
        LOCAL nI
        FIELD F1

        DBCREATE("mem:test", {{"F1", "N", 9, 0}},, .T., "memarea")
        FOR nI := 1 TO 1000
          DBAPPEND();  F1 := HB_RANDOM() * 1000000
        NEXT
        INDEX ON F1 TAG f1
        DBEVAL({|| QOUT(F1)})
        DBCLOSEAREA()
        DBDROP("mem:test")  // Free memory resource
      RETURN

    ; TODO: locking is not supported yet (but it is not very usefull 
      if MemFS is used to store of a temporary database opened in 
      exclusive mode).

Modified Paths:
--------------
    trunk/harbour/ChangeLog

Added Paths:
-----------
    trunk/harbour/contrib/iodmem/
    trunk/harbour/contrib/iodmem/iodmem.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Mon Sep 21 10:55:09 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 21 10:55:15 2009
Subject: [Harbour] os/2 dll
In-Reply-To: <4AB77A58.2070900@libero.it>
References: <4AB77A58.2070900@libero.it>
Message-ID: <20090921145509.GB22029@uran.home.aster.pl>

On Mon, 21 Sep 2009, Maurilio Longo wrote:

Hi,

> I'm at a good point, dll gets created so it does for the import library, but
> when I start a program (I'm using hbtest after setting hb_build_shared=yes) I
> get this error:
> (E:\repository\harbour\bin\os2\gcc)hbtest
> Unrecoverable error 9012: Can't locate the starting procedure: 'MAIN'
> What can it be? I mean, am I missing some module from the building of the
> .dll or what?

There are few possible situations which can cause such behavior. They
depend on OS behavior when shared library is loaded and also on shared
library contents.
In general hb_vmInit() was executed before executing startup code in
static part of application which register user functions/procedures
in HVM so HVM cannot find user MAIN() function/procedure (on some platforms
is also looks for first registered func/proc with HB_FS_FIRST attribute)
and generates above internal error.

Now you have to find the reason of such behavior in OS2 DLLs created
by GCC. Please remember that using different platform or C compiler
may cause totally different behavior.

I do not know OS2 but probably there are some analogies to MS-Windows.
In Windows when DLL is loaded/unloaded special init/exit function is
executed. The name of this function depends on used C compiler, it may
be DllMain(), DllEntryPoint() or even WinMain(). Sometimes more then
one is supported with different priority because linker attach to DLL
CRTL wrapper with OS entry point which later calls some one of known
startup functions in linked code so it can even execute main().
And this is the easiest explanation of your test results: just after
loading DLL and before executing startup code from static part of
application main() function was executed. In such case it's necessary
to exclude mainstd.c from create .DLL file. Probably it will be necessary
to exclude it from HVM and move it to hbmainstd.lib and link this library
with final static or shared applications. We already make such tricks
in some of MS-Windows builds. Just look at source/vm/Makefile. If startup
code attached to harbour.dll executes only one startup function then it's
possible that you will find other 'known' DLL startup function which has
higher priority then main(). In such case it's enough to add such function
to final DLL. We are using this method in some windows builds adding
maindllh.c to final library (see source/vm/maindllh/Makefile).
I hope that above is enough to find the solution. Please check. If it does
not help then I'll ask you to make same small modifications in HVM code
which shows executed startup code so we can see more precisely what exactly
happens when you start shared linked application.

best regards
Przemek,
From harbour.01 at syenar.hu  Mon Sep 21 13:49:21 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 21 13:49:46 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12586] trunk/harbour
In-Reply-To: <20090921135546.GA22029@uran.home.aster.pl>
References: <E1Mphcq-0007p9-7K@74yxhf1.ch3.sourceforge.com>
	<20090921130743.GA11831@uran.home.aster.pl>
	<C812B38C-FBEA-4983-A808-D57FF1353317@syenar.hu>
	<20090921135546.GA22029@uran.home.aster.pl>
Message-ID: <8D2184FC-F26F-4D1B-9F8E-B2911C713946@syenar.hu>

Hi Przemek,

>> I can revert it, but this way there is again duplicate
> [...]
>
> please do it.
>
>> Why should rpm call strip (and objdump) in these cases at all?
>
> Because it on some distros ti tries to create separate package
> with debug information.
>
>> Can't it be simply disabled?
>
> I do not know such method.

Can the .rpm creation process changed so that
it gets called of the GNU Make process, rather
than being the entry point calling GNU Make?

If we could "reverse" it, it would also solve
problems of missing detection information (HB_HAS_*
vars).

IOW, can we call .rpm creation from GNU Make,
instead of calling GNU Make from .rpm creation
script?

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep 21 14:04:05 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 21 14:04:28 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12590] trunk/harbour
In-Reply-To: <E1MpjoE-0002nd-Rq@d5vjzd1.ch3.sourceforge.com>
References: <E1MpjoE-0002nd-Rq@d5vjzd1.ch3.sourceforge.com>
Message-ID: <A8792CE4-0D66-4AE3-8140-3961755A7FC3@syenar.hu>

Hi Mindaugas,

In first test on darwin, I'm getting this:
(with clang, but similar errors happened when trying with gcc)
---
/Developer/usr/bin/clang  -I. -I../../../../../include -DHB_CC_CLANG - 
fno-common -Wall -W -O3    -o iodmem.o -c ../../../iodmem.c
../../../iodmem.c:686:4: warning: incompatible pointer types  
initializing 'PHB_FILE (char const *, char const *, USHORT, char const  
*, PHB_ITEM)', expected 'BOOL (*)(char const *, char const *)'
    s_fileOpen,
    ^~~~~~~~~~
../../../iodmem.c:687:4: warning: incompatible pointer types  
initializing 'void (PHB_FILE)', expected 'PHB_FILE (*)(char const *,  
char const *, USHORT, char const *, PHB_ITEM)'
    s_fileClose,
    ^~~~~~~~~~~
../../../iodmem.c:688:4: warning: incompatible pointer types  
initializing 'BOOL (PHB_FILE, HB_FOFFSET, HB_FOFFSET, int)', expected  
'void (*)(PHB_FILE)'
    s_fileLock,
    ^~~~~~~~~~
../../../iodmem.c:689:4: warning: incompatible pointer types  
initializing 'ULONG (PHB_FILE, void *, ULONG, HB_FOFFSET)', expected  
'BOOL (*)(PHB_FILE, HB_FOFFSET, HB_FOFFSET, int)'
    s_fileReadAt,
    ^~~~~~~~~~~~
../../../iodmem.c:690:4: warning: incompatible pointer types  
initializing 'ULONG (PHB_FILE, void const *, ULONG, HB_FOFFSET)',  
expected 'ULONG (*)(PHB_FILE, void *, ULONG, HB_FOFFSET)'
    s_fileWriteAt,
    ^~~~~~~~~~~~~
../../../iodmem.c:691:4: warning: incompatible pointer types  
initializing 'BOOL (PHB_FILE, HB_FOFFSET)', expected 'ULONG (*) 
(PHB_FILE, void const *, ULONG, HB_FOFFSET)'
    s_fileTruncAt,
    ^~~~~~~~~~~~~
../../../iodmem.c:692:4: warning: incompatible pointer types  
initializing 'HB_FOFFSET (PHB_FILE)', expected 'BOOL (*)(PHB_FILE,  
HB_FOFFSET)'
    s_fileSize,
    ^~~~~~~~~~
../../../iodmem.c:693:4: warning: incompatible pointer types  
initializing 'void (PHB_FILE)', expected 'HB_FOFFSET (*)(PHB_FILE)'
    s_fileCommit,
    ^~~~~~~~~~~~
../../../iodmem.c:694:4: warning: incompatible pointer types  
initializing 'HB_FHANDLE (PHB_FILE)', expected 'void (*)(PHB_FILE)'
    s_fileHandle
    ^~~~~~~~~~~~
---

Brgds,
Viktor

On 2009 Sep 21, at 16:24, snaiperis@users.sourceforge.net wrote:

> Revision: 12590
>          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12590&view=rev
> Author:   snaiperis
> Date:     2009-09-21 14:24:02 +0000 (Mon, 21 Sep 2009)
>
> Log Message:
> -----------
> 2009-09-21 17:20 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/ 
> dbtopas.lt)
>  + harbour/contrib/iodmem
>  + harbour/contrib/iodmem/iodmem.c
>    + Implemented Memory file system. Public functions hb_memfs*() are
>      availible, if HB_MEMFS_PUBLIC_API is defined.
>    + Implemeted I/O driver for memory file system
>    ; HB_IODMEM request can be used to force linking of I/O driver and
>      memory FS into executable.
>      "mem:" prefix should be used to indicate a MemFS file, ex.:
>
>      REQUEST HB_IODMEM
>
>      PROC main()
>        LOCAL nI
>        FIELD F1
>
>        DBCREATE("mem:test", {{"F1", "N", 9, 0}},, .T., "memarea")
>        FOR nI := 1 TO 1000
>          DBAPPEND();  F1 := HB_RANDOM() * 1000000
>        NEXT
>        INDEX ON F1 TAG f1
>        DBEVAL({|| QOUT(F1)})
>        DBCLOSEAREA()
>        DBDROP("mem:test")  // Free memory resource
>      RETURN
>
>    ; TODO: locking is not supported yet (but it is not very usefull
>      if MemFS is used to store of a temporary database opened in
>      exclusive mode).
>
> Modified Paths:
> --------------
>    trunk/harbour/ChangeLog
>
> Added Paths:
> -----------
>    trunk/harbour/contrib/iodmem/
>    trunk/harbour/contrib/iodmem/iodmem.c
>
>
> This was sent by the SourceForge.net collaborative development  
> platform, the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Sep 21 15:43:38 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 21 15:43:47 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12590] trunk/harbour
In-Reply-To: <E1MpjoE-0002nd-Rq@d5vjzd1.ch3.sourceforge.com>
References: <E1MpjoE-0002nd-Rq@d5vjzd1.ch3.sourceforge.com>
Message-ID: <EE291011-9F28-4216-BC36-AA3DB713CFDF@syenar.hu>

Hi Mindaugas and All,

Is there any particular reason you choose a name
without 'hb' prefix?

I'd like to add make files and rename it to hbmemio,
if possible. I'm not sure we should start a new special
prefix to store IO replacement libs yet.

Or, maybe we could rename both this lib and hbnetio
to hbiomem and hbionet. Any opinions?

Brgds,
Viktor

On 2009 Sep 21, at 16:24, snaiperis@users.sourceforge.net wrote:

> Revision: 12590
>          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12590&view=rev
> Author:   snaiperis
> Date:     2009-09-21 14:24:02 +0000 (Mon, 21 Sep 2009)
>
> Log Message:
> -----------
> 2009-09-21 17:20 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/ 
> dbtopas.lt)
>  + harbour/contrib/iodmem
>  + harbour/contrib/iodmem/iodmem.c
>    + Implemented Memory file system. Public functions hb_memfs*() are
>      availible, if HB_MEMFS_PUBLIC_API is defined.
>    + Implemeted I/O driver for memory file system
>    ; HB_IODMEM request can be used to force linking of I/O driver and
>      memory FS into executable.
>      "mem:" prefix should be used to indicate a MemFS file, ex.:
>
>      REQUEST HB_IODMEM
>
>      PROC main()
>        LOCAL nI
>        FIELD F1
>
>        DBCREATE("mem:test", {{"F1", "N", 9, 0}},, .T., "memarea")
>        FOR nI := 1 TO 1000
>          DBAPPEND();  F1 := HB_RANDOM() * 1000000
>        NEXT
>        INDEX ON F1 TAG f1
>        DBEVAL({|| QOUT(F1)})
>        DBCLOSEAREA()
>        DBDROP("mem:test")  // Free memory resource
>      RETURN
>
>    ; TODO: locking is not supported yet (but it is not very usefull
>      if MemFS is used to store of a temporary database opened in
>      exclusive mode).
>
> Modified Paths:
> --------------
>    trunk/harbour/ChangeLog
>
> Added Paths:
> -----------
>    trunk/harbour/contrib/iodmem/
>    trunk/harbour/contrib/iodmem/iodmem.c
>
>
> This was sent by the SourceForge.net collaborative development  
> platform, the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From snaiperis at users.sourceforge.net  Mon Sep 21 15:51:11 2009
From: snaiperis at users.sourceforge.net (snaiperis@users.sourceforge.net)
Date: Mon Sep 21 15:51:19 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12591] trunk/harbour
Message-ID: <E1Mpoul-0007wI-SA@dn4whf1.ch3.sourceforge.com>

Revision: 12591
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12591&view=rev
Author:   snaiperis
Date:     2009-09-21 19:51:10 +0000 (Mon, 21 Sep 2009)

Log Message:
-----------
2009-09-21 22:50 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
  + harbour/contrib/Makefile
  + harbour/contrib/iodmem/Makefile
  + harbour/contrib/iodmem/iodmem.hbc
    + added make files
  * harbour/contrib/iodmem/iodmem.c
    ! updated to be compatible with the latest SVN (rename method implemented)
    * some warnings are fixed

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/Makefile
    trunk/harbour/contrib/iodmem/iodmem.c

Added Paths:
-----------
    trunk/harbour/contrib/iodmem/Makefile
    trunk/harbour/contrib/iodmem/iodmem.hbc


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dbtopas at dbtopas.lt  Mon Sep 21 15:54:23 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Sep 21 15:55:18 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12590] trunk/harbour
In-Reply-To: <A8792CE4-0D66-4AE3-8140-3961755A7FC3@syenar.hu>
References: <E1MpjoE-0002nd-Rq@d5vjzd1.ch3.sourceforge.com>
	<A8792CE4-0D66-4AE3-8140-3961755A7FC3@syenar.hu>
Message-ID: <4AB7D9EF.7000003@dbtopas.lt>

Viktor Szak?ts wrote:
> In first test on darwin, I'm getting this:
> (with clang, but similar errors happened when trying with gcc)
> ---
> /Developer/usr/bin/clang  -I. -I../../../../../include -DHB_CC_CLANG 
> -fno-common -Wall -W -O3    -o iodmem.o -c ../../../iodmem.c
> ../../../iodmem.c:686:4: warning: incompatible pointer types 
> initializing 'PHB_FILE (char const *, char const *, USHORT, char const 
> *, PHB_ITEM)', expected 'BOOL (*)(char const *, char const *)'
>    s_fileOpen,
>    ^~~~~~~~~~
> ../../../iodmem.c:687:4: warning: incompatible pointer types 


Hi,

Thanks. Fixed. Sorry for not final version.

Regards,
Mindaugas
From dbtopas at dbtopas.lt  Mon Sep 21 15:54:35 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Sep 21 15:55:30 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12590] trunk/harbour
In-Reply-To: <EE291011-9F28-4216-BC36-AA3DB713CFDF@syenar.hu>
References: <E1MpjoE-0002nd-Rq@d5vjzd1.ch3.sourceforge.com>
	<EE291011-9F28-4216-BC36-AA3DB713CFDF@syenar.hu>
Message-ID: <4AB7D9FB.1080007@dbtopas.lt>

Viktor Szak?ts wrote:
> Is there any particular reason you choose a name
> without 'hb' prefix?
> 
> I'd like to add make files and rename it to hbmemio,
> if possible. I'm not sure we should start a new special
> prefix to store IO replacement libs yet.
> 
> Or, maybe we could rename both this lib and hbnetio
> to hbiomem and hbionet. Any opinions?


Hi,


I've just tried to follow the other similar cases. We have rdd* 
libraries, and also gt* libraries. I/O Driver sounds very similar to 
Replaceable Data Driver, so I've used iod* prefix.

Feel free to change it.


Regards,
Mindaugas
From harbour.01 at syenar.hu  Mon Sep 21 16:06:01 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 21 16:06:10 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12590] trunk/harbour
In-Reply-To: <4AB7D9FB.1080007@dbtopas.lt>
References: <E1MpjoE-0002nd-Rq@d5vjzd1.ch3.sourceforge.com>
	<EE291011-9F28-4216-BC36-AA3DB713CFDF@syenar.hu>
	<4AB7D9FB.1080007@dbtopas.lt>
Message-ID: <B2C340B0-4F7B-420B-B527-7152B58DFB36@syenar.hu>

>> Is there any particular reason you choose a name
>> without 'hb' prefix?
>> I'd like to add make files and rename it to hbmemio,
>> if possible. I'm not sure we should start a new special
>> prefix to store IO replacement libs yet.
>> Or, maybe we could rename both this lib and hbnetio
>> to hbiomem and hbionet. Any opinions?
>
>
> Hi,
>
>
> I've just tried to follow the other similar cases. We have rdd*  
> libraries, and also gt* libraries. I/O Driver sounds very similar to  
> Replaceable Data Driver, so I've used iod* prefix.
>
> Feel free to change it.

Thank you. In the shade of this, I'd prefer
hbiomem or hbmemio. If we chose the former,
we'd need to rename hbnetio to hbionet.

Any further opinions? Przemek?

[ BTW, I feel this subsystem doesn't fall into the
same category as GT and RDD, it's rather some sort
of plugin subsystem for an existing API, so I wouldn't
give it a special namespace. It's easily possible
f.e. that some normal libs provide such I/O interface
as part of their workings. ]

Brgds,
Viktor

From vszakats at users.sourceforge.net  Mon Sep 21 18:13:33 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep 21 18:13:38 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12592] trunk/harbour
Message-ID: <E1Mpr8X-0005nG-3m@c3vjzd1.ch3.sourceforge.com>

Revision: 12592
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12592&view=rev
Author:   vszakats
Date:     2009-09-21 22:13:27 +0000 (Mon, 21 Sep 2009)

Log Message:
-----------
2009-09-21 00:11 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  - contrib/iodmem
  + contrib/hbmemio
  - contrib/hbmemio/iodmem.hbc
  + contrib/hbmemio/hbmemio.hbc
  * contrib/hbmemio/Makefile
  * contrib/Makefile
    * Renamed to have 'hb' prefix and to be in line with hbnetio.
    ! Fixed props on Makefile.
    ! Corrected to list this lib in no-dependency section in contrib/Makefile.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/Makefile
    trunk/harbour/contrib/hbmemio/Makefile

Added Paths:
-----------
    trunk/harbour/contrib/hbmemio/
    trunk/harbour/contrib/hbmemio/hbmemio.hbc

Removed Paths:
-------------
    trunk/harbour/contrib/hbmemio/iodmem.hbc
    trunk/harbour/contrib/iodmem/

Property Changed:
----------------
    trunk/harbour/contrib/hbmemio/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Mon Sep 21 18:14:57 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 21 18:15:08 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12590] trunk/harbour
In-Reply-To: <4AB7D9FB.1080007@dbtopas.lt>
References: <E1MpjoE-0002nd-Rq@d5vjzd1.ch3.sourceforge.com>
	<EE291011-9F28-4216-BC36-AA3DB713CFDF@syenar.hu>
	<4AB7D9FB.1080007@dbtopas.lt>
Message-ID: <41DEB2FA-1609-4D6B-AECA-79E2EEC16FEC@syenar.hu>

Hi Mindaugas,

And most importantly thanks for this contribution, I think
it's a very nice one and can easily replace any temp tables
created on disk. I'll now go and convert my app to use it.

Brgds,
Viktor

On 2009 Sep 21, at 21:54, Mindaugas Kavaliauskas wrote:

> Viktor Szak?ts wrote:
>> Is there any particular reason you choose a name
>> without 'hb' prefix?
>> I'd like to add make files and rename it to hbmemio,
>> if possible. I'm not sure we should start a new special
>> prefix to store IO replacement libs yet.
>> Or, maybe we could rename both this lib and hbnetio
>> to hbiomem and hbionet. Any opinions?
>
>
> Hi,
>
>
> I've just tried to follow the other similar cases. We have rdd*  
> libraries, and also gt* libraries. I/O Driver sounds very similar to  
> Replaceable Data Driver, so I've used iod* prefix.
>
> Feel free to change it.
>
>
> Regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vszakats at users.sourceforge.net  Mon Sep 21 18:26:50 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep 21 18:26:56 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12593] trunk/harbour
Message-ID: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com>

Revision: 12593
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12593&view=rev
Author:   vszakats
Date:     2009-09-21 22:26:46 +0000 (Mon, 21 Sep 2009)

Log Message:
-----------
2009-09-22 00:18 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  + contrib/hbmemio/tests
  + contrib/hbmemio/tests/hbmk.hbm
  + contrib/hbmemio/tests/test.prg
    + Added test dir.
    + Added test code included by Mindaugas in the ChangeLog entry.

  * contrib/hbmemio/Makefile
  + contrib/hbmemio/memio.c
  - contrib/hbmemio/iodmem.c
    * Renamed to be in sync with netio.
    ! Fixed strcpy() call to hb_strncpy().
      Review me I didn't check if the set length limit is a valid one.
    ! Fixed C++ casting errors on buffer allocation calls.
    ; TOFIX: These warnings remain:
      ---
      ../../../memio.c(170) : warning C4244: 'argument' : conversion from 'HB_FOFFSET' to 'ULONG', possible loss of data
      ../../../memio.c(423) : warning C4244: '=' : conversion from 'HB_FOFFSET' to 'ULONG', possible loss of data
      ../../../memio.c(452) : warning C4244: 'argument' : conversion from 'HB_FOFFSET' to 'ULONG', possible loss of data
      ../../../memio.c(501) : warning C4244: 'argument' : conversion from 'HB_FOFFSET' to 'ULONG', possible loss of data
      ../../../memio.c(508) : warning C4244: 'argument' : conversion from 'HB_FOFFSET' to 'ULONG', possible loss of data
      ../../../memio.c(580) : warning C4267: 'argument' : conversion from 'size_t' to 'ULONG', possible loss of data
      ../../../memio.c(627) : warning C4267: '=' : conversion from 'size_t' to 'ULONG', possible loss of data
      ../../../memio.c(674) : warning C4244: 'argument' : conversion from 'int' to 'USHORT', possible loss of data
      memio.c(373) : warning C4701: potentially uninitialized local variable 'pFile' used
      ---

  * contrib/hbmemio/hbmemio.hbc
    ! Corrected svn props to be like in howtosvn.txt.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbmemio/Makefile

Added Paths:
-----------
    trunk/harbour/contrib/hbmemio/memio.c
    trunk/harbour/contrib/hbmemio/tests/
    trunk/harbour/contrib/hbmemio/tests/hbmk.hbm
    trunk/harbour/contrib/hbmemio/tests/test.prg

Removed Paths:
-------------
    trunk/harbour/contrib/hbmemio/iodmem.c

Property Changed:
----------------
    trunk/harbour/contrib/hbmemio/hbmemio.hbc


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Mon Sep 21 18:32:11 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 21 18:32:17 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12586] trunk/harbour
In-Reply-To: <8D2184FC-F26F-4D1B-9F8E-B2911C713946@syenar.hu>
References: <E1Mphcq-0007p9-7K@74yxhf1.ch3.sourceforge.com>
	<20090921130743.GA11831@uran.home.aster.pl>
	<C812B38C-FBEA-4983-A808-D57FF1353317@syenar.hu>
	<20090921135546.GA22029@uran.home.aster.pl>
	<8D2184FC-F26F-4D1B-9F8E-B2911C713946@syenar.hu>
Message-ID: <20090921223210.GA11001@uran.home.aster.pl>

On Mon, 21 Sep 2009, Szak?ts Viktor wrote:

Hi,

> Can the .rpm creation process changed so that
> it gets called of the GNU Make process, rather
> than being the entry point calling GNU Make?
> If we could "reverse" it, it would also solve
> problems of missing detection information (HB_HAS_*
> vars).
> IOW, can we call .rpm creation from GNU Make,
> instead of calling GNU Make from .rpm creation
> script?

We can add alternative method to start the process, i.e. using
   make rpm
but it will be fully functional RPM only if it can be created
externally using rpmbuild command. Rebuilding is one of the
basic RPM functionality.
Anyhow we can try to create spec file dynamically from
our GNU make system but the problem is that only from DEB
and RPM packages we have access to macros and settings which
allow us to respect given distribution standards. It's impossible
that we ever encode inside our make system different rules for
each popular system using RPM or DEB.

best regards,
Przemek
From vszakats at users.sourceforge.net  Mon Sep 21 18:45:00 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep 21 18:45:07 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12594] trunk/harbour
Message-ID: <E1Mprcy-0006On-JC@c3vjzd1.ch3.sourceforge.com>

Revision: 12594
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12594&view=rev
Author:   vszakats
Date:     2009-09-21 22:44:55 +0000 (Mon, 21 Sep 2009)

Log Message:
-----------
2009-09-22 00:43 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/win/global.mk
    + Enabled UNICODE mode for all 64-bit Windows targets.
      Here there is no concern about Win9x compatibility, so
      it can be safely done, and I hope this move will make it
      easier to catch UNICODE coding problems, as it will be now
      part of some default builds.
      The ultimate litmus test is on Windows is msvc64, where
      C++, 64-bit and Unicode compatibility is tested at the
      same time.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/win/global.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Mon Sep 21 20:05:37 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep 21 20:05:47 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12595] trunk/harbour
Message-ID: <E1Mpssz-00058G-9o@74yxhf1.ch3.sourceforge.com>

Revision: 12595
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12595&view=rev
Author:   vszakats
Date:     2009-09-22 00:05:35 +0000 (Tue, 22 Sep 2009)

Log Message:
-----------
2009-09-22 02:05 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * source/vm/maindllp.c
    ! Fixed for Unicode mode (msvc2010 x64).

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/vm/maindllp.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Tue Sep 22 01:44:12 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue Sep 22 01:44:17 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12596] trunk/harbour
Message-ID: <E1MpyAe-0004M1-9M@d5vjzd1.ch3.sourceforge.com>

Revision: 12596
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12596&view=rev
Author:   vszakats
Date:     2009-09-22 05:44:11 +0000 (Tue, 22 Sep 2009)

Log Message:
-----------
2009-09-22 07:42 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * contrib/hbmemio/memio.c
    ! Fixed warnings reported by gcc and msvc.
      Please review me.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbmemio/memio.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Tue Sep 22 03:49:15 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue Sep 22 03:49:21 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12597] trunk/harbour
Message-ID: <E1Mq07f-0004Su-Da@3kljzd1.ch3.sourceforge.com>

Revision: 12597
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12597&view=rev
Author:   vszakats
Date:     2009-09-22 07:49:14 +0000 (Tue, 22 Sep 2009)

Log Message:
-----------
2009-09-22 09:47 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * include/hbwince.h
  * source/common/hbwince.c
    + Added WIDE version of dummy winapi implementations for WinCE.

  * source/common/hbffind.c
  * source/common/hbfsapi.c
  * source/rtl/diskspac.c
  * source/rtl/disksphb.c
  * source/rtl/filesys.c
  * source/vm/dynlibhb.c
  * contrib/hbmzip/hbmzip.c
  * contrib/xhb/filestat.c
  * contrib/hbwin/win_dll.c
  * contrib/hbwin/wapi_winbase.c
  * contrib/hbwin/win_prn1.c
  * contrib/hbwin/win_prn2.c
    + Changed forced ANSI version of winapi calls to native version.
    ! Fixed potential GPF in WIN_LOADBITMAPFILE().
    % Cleaned types/variables in hb_PrintFileRaw().
    % Minor type cleanup and formatting in filestat.c.
    ; TODO: There are still some forced ANSI calls in Harbour code:
            (plus some dynamically called ones)
      ---
      source/common/hbver.c:264:      if( GetVersionExA( &osVer ) )
      source/common/hbver.c:306:                  if( GetVersionExA( ( OSVERSIONINFOA * ) &osVerEx ) )
      source/common/hbgete.c:75:      DWORD size = GetEnvironmentVariableA( szName, NULL, 0 );
      source/common/hbgete.c:80:         GetEnvironmentVariableA( szName, pszBuffer, size );
      source/common/hbgete.c:114:   bRetVal = GetEnvironmentVariableA( szName, szBuffer, nSize ) != 0;
      source/common/hbgete.c:157:   return SetEnvironmentVariableA( szName, szValue ) != 0;
      source/rtl/filesys.c:2687:   fResult = GetCurrentDirectoryA( ulSize, pszBuffer );
      source/rtl/filesys.c:2876:      type = GetDriveTypeA( buffer );
      source/rtl/fstemp.c:153:         if( ! GetTempPathA( ( DWORD ) ( HB_PATH_MAX - 1 ), pszName ) )
      source/rtl/fstemp.c:270:         if( ! GetTempPathA( ( DWORD ) HB_PATH_MAX, szTempDir ) )
      source/rtl/fstemp.c:278:      fResult = GetTempFileNameA( szTempDir, pszPrefix ? pszPrefix : "hb", 0, pszBuffer );
      source/rtl/net.c:157:   GetComputerNameA( pszValue, &ulLen );
      source/rtl/net.c:186:   GetUserNameA( pszValue, &ulLen );
      contrib/hbwin/win_prn2.c:169:      DWORD dwSize = GetProfileStringA( "windows", "device", "", pPrinterName, *pdwBufferSize );
      ---

  ; Review me.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbmzip/hbmzip.c
    trunk/harbour/contrib/hbwin/wapi_winbase.c
    trunk/harbour/contrib/hbwin/win_dll.c
    trunk/harbour/contrib/hbwin/win_prn1.c
    trunk/harbour/contrib/hbwin/win_prn2.c
    trunk/harbour/contrib/xhb/filestat.c
    trunk/harbour/include/hbwince.h
    trunk/harbour/source/common/hbffind.c
    trunk/harbour/source/common/hbfsapi.c
    trunk/harbour/source/common/hbwince.c
    trunk/harbour/source/rtl/diskspac.c
    trunk/harbour/source/rtl/disksphb.c
    trunk/harbour/source/rtl/filesys.c
    trunk/harbour/source/vm/dynlibhb.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From vszakats at users.sourceforge.net  Tue Sep 22 03:53:17 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue Sep 22 03:53:23 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12598] trunk/harbour
Message-ID: <E1Mq0BZ-0004Xz-7L@3kljzd1.ch3.sourceforge.com>

Revision: 12598
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12598&view=rev
Author:   vszakats
Date:     2009-09-22 07:53:16 +0000 (Tue, 22 Sep 2009)

Log Message:
-----------
2009-09-22 09:52 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * source/vm/dynlibhb.c
    ! Minor typo.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/vm/dynlibhb.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From M.Horodyski at pzuzycie.com.pl  Tue Sep 22 04:24:36 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Tue Sep 22 04:24:44 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12590] trunk/harbour
In-Reply-To: <41DEB2FA-1609-4D6B-AECA-79E2EEC16FEC@syenar.hu>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B6E2@PINK.zycie.pzu>

 

>-----Original Message-----
>From: Viktor Szak?ts [mailto:harbour.01@syenar.hu] 
>Sent: Tuesday, September 22, 2009 12:15 AM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] SF.net SVN: harbour-project:[12590] 
>trunk/harbour
>
>Hi Mindaugas,
>
>And most importantly thanks for this contribution, I think 
>it's a very nice one and can easily replace any temp tables 
>created on disk. I'll now go and convert my app to use it.

But what is the difference with dbCreateTemp() ?
I use dbCreateTemp(), and in this solution OS is decided where table created (memory or disk).

Regards,
Marek Horodyski
From mbelgrano at deltain.it  Tue Sep 22 04:27:25 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Sep 22 04:27:52 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12590] trunk/harbour
In-Reply-To: <41DEB2FA-1609-4D6B-AECA-79E2EEC16FEC@syenar.hu>
References: <E1MpjoE-0002nd-Rq@d5vjzd1.ch3.sourceforge.com> 
	<EE291011-9F28-4216-BC36-AA3DB713CFDF@syenar.hu>
	<4AB7D9FB.1080007@dbtopas.lt> 
	<41DEB2FA-1609-4D6B-AECA-79E2EEC16FEC@syenar.hu>
Message-ID: <609353e70909220127k3b6fe6b4w934c098fbb2549d4@mail.gmail.com>

+1
i can clean a lot of temp in my app with little effort
Is not a rdd so i can't use something like NETIO_CONNECT(*?


2009/9/22 Viktor Szak?ts <harbour.01@syenar.hu>

> Hi Mindaugas,
>
> And most importantly thanks for this contribution, I think
> it's a very nice one and can easily replace any temp tables
> created on disk. I'll now go and convert my app to use it.
>
> Brgds,
> Viktor
>
>
> On 2009 Sep 21, at 21:54, Mindaugas Kavaliauskas wrote:
>
>  Viktor Szak?ts wrote:
>>
>>> Is there any particular reason you choose a name
>>> without 'hb' prefix?
>>> I'd like to add make files and rename it to hbmemio,
>>> if possible. I'm not sure we should start a new special
>>> prefix to store IO replacement libs yet.
>>> Or, maybe we could rename both this lib and hbnetio
>>> to hbiomem and hbionet. Any opinions?
>>>
>>
>>
>> Hi,
>>
>>
>> I've just tried to follow the other similar cases. We have rdd* libraries,
>> and also gt* libraries. I/O Driver sounds very similar to Replaceable Data
>> Driver, so I've used iod* prefix.
>>
>> Feel free to change it.
>>
>>
>> Regards,
>> Mindaugas
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090922/c40dff00/attachment-0001.html
From harbour.01 at syenar.hu  Tue Sep 22 04:35:39 2009
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 22 04:35:49 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12590] trunk/harbour
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B6E2@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B6E2@PINK.zycie.pzu>
Message-ID: <BBF30D98-D333-4593-B8EA-25E3BFB9CD27@syenar.hu>

>> -----Original Message-----
>> From: Viktor Szak?ts [mailto:harbour.01@syenar.hu]
>> Sent: Tuesday, September 22, 2009 12:15 AM
>> To: Harbour Project Main Developer List.
>> Subject: Re: [Harbour] SF.net SVN: harbour-project:[12590]
>> trunk/harbour
>>
>> Hi Mindaugas,
>>
>> And most importantly thanks for this contribution, I think
>> it's a very nice one and can easily replace any temp tables
>> created on disk. I'll now go and convert my app to use it.
>
> But what is the difference with dbCreateTemp() ?
> I use dbCreateTemp(), and in this solution OS is decided where table  
> created (memory or disk).

It's always created as a disk file. As such, it may be
left on disk in case of error, and also exclusive access
isn't guaranteed, plus since it's a disk file, performance
is probably worse in most cases (even if fully cached).

Brgds,
Viktor

From dbtopas at dbtopas.lt  Tue Sep 22 04:42:29 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Sep 22 04:43:23 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12593] trunk/harbour
In-Reply-To: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com>
References: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com>
Message-ID: <4AB88DF5.7090704@dbtopas.lt>

Hi,


> And most importantly thanks for this contribution, I think
> it's a very nice one and can easily replace any temp tables
> created on disk. I'll now go and convert my app to use it.

the primary idea was more a toy I/O driver than the really useful 
addition to harbour. Linux users can reach a similar effect by storing 
files at /dev/shm. Disk buffers also makes a disk to be a little similar 
(by speed) to memory. I still wanted to test disk overhead on local 
drives, so, I've wrote this I/O driver. Test (source code is presented 
below) execution times are:
Mem I/O:
   DBAPPEND       13203
   INDEX        8375
   DBEVAL        6890
File I/O:
   DBAPPEND       24563
   INDEX        9266
   DBEVAL       11484

But now I'm thinking about including this I/O driver into one of the 
projects. We have about a 1 million records in database and report 
generation is too slow in network environment (in local environment 
speed is acceptable). I'm thinking about copying the whole remote file 
(well, about 100MB...) to memory file system, and generating report from 
memory.


Regards,
Mindaugas


REQUEST HB_IODMEM

#define COUNT   2000000

PROC main()
LOCAL nI, nJ, nT
FIELD F1, F2

   ? "Mem I/O:"
   DBCREATE("mem:test", {{"F1", "C", 64, 0}, {"F2", "N", 9, 0}},, .T., 
"memtest")
   nT := HB_MILLISECONDS()
   FOR nI := 1 TO COUNT
      DBAPPEND()
      F2 := HB_RANDOM() * 1000000
      F1 := "Blah, blah, blah..." + STR(RECNO()) + " " + STR(F2)
   NEXT
   ? "  DBAPPEND ", HB_MILLISECONDS() - nT
   nT := HB_MILLISECONDS()
   INDEX ON F2 TAG F2
   ? "  INDEX ", HB_MILLISECONDS() - nT
   nT := HB_MILLISECONDS()
   nJ := 0
   DBEVAL({|| nJ += F2})
   ? "  DBEVAL ", HB_MILLISECONDS() - nT
   DBCLOSEALL()
   DBDROP("mem:test")

   ? "File I/O:"
   DBCREATE("test", {{"F1", "C", 64, 0}, {"F2", "N", 9, 0}},, .T., 
"memtest")
   nT := HB_MILLISECONDS()
   FOR nI := 1 TO COUNT
      DBAPPEND()
      F2 := HB_RANDOM() * 1000000
      F1 := "Blah, blah, blah..." + STR(RECNO()) + " " + STR(F2)
   NEXT
   ? "  DBAPPEND ", HB_MILLISECONDS() - nT
   nT := HB_MILLISECONDS()
   INDEX ON F2 TAG F2
   ? "  INDEX ", HB_MILLISECONDS() - nT
   nT := HB_MILLISECONDS()
   nJ := 0
   DBEVAL({|| nJ += F2})
   ? "  DBEVAL ", HB_MILLISECONDS() - nT
   DBCLOSEALL()
   DBDROP("test")
RETURN

From lorenzo.fiorini at gmail.com  Tue Sep 22 06:27:12 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep 22 06:27:19 2009
Subject: [Harbour] bio.c under Centos 5.3 issue
Message-ID: <9257026e0909220327p2fc764f3g7a56c6287b245d86@mail.gmail.com>

../../../bio.c: In function ?HB_FUN_BIO_TEST_FLAGS?:
../../../bio.c:199: warning: implicit declaration of function ?BIO_test_flags?

Centos 5.3 seems to have openssl-0.9.8e

best regards,
Lorenzo
From labitas at gmail.com  Tue Sep 22 06:32:19 2009
From: labitas at gmail.com (Saulius Zrelskis)
Date: Tue Sep 22 06:32:26 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12593] trunk/harbour
In-Reply-To: <4AB88DF5.7090704@dbtopas.lt>
References: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com>
	<4AB88DF5.7090704@dbtopas.lt>
Message-ID: <2386af1b0909220332j181acac8la3dccccd1741d558@mail.gmail.com>

Hi,

File hb_out.log is generated:

Application Memory Allocation Report - D:\TESTS\test.exe
Terminated at: 2009.09.22 13:19:25
Total memory allocated: 107343446 bytes (913 block(s))
Warning, memory allocated but not released: 99808005 bytes (7 block(s))
Block 1 003AE5E8 (size 64) (0),
"50BF3B0080B73B000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
Block 2 003BBF50 (size 40) DBCREATE(0),
"E3266904000000009FAA6A040000000060001578D8BF3B00010000006D0007002000070000000700"
Block 3 78150060 (size 74099359) DBCREATE(0),
"036D091640420F0062004A000000000000000000000000000000000000000000463100000000000000000043000000004000000000000000000000000000000046320000000000000000004E00000000090000000000000000000000000000000D0020426C61682C20626C61682C20626C61682E2E2E20202020202020202031202020203937313036382020202020202020202020202020202020202020202020202020202039373130363820426C61682C20626C61682C20626C61682E2E2E20202020202020202032202020203739333239382020202020202020202020202020202020202020202020202020202037393332393820426C61682C20626C61"
Block 4 003BBFD8 (size 9) DBCREATE(0), "test.dbf."
Block 5 003BB780 (size 40) ORDCREATE(0),
"00842C0100000000A8478801000000006000B87C20C73B000100000005000000B0C63B0000000000"
Block 6 7CB80060 (size 25708456) ORDCREATE(0),
"0600010000802C010000000011000900000034001A00463200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
Block 7 003BC720 (size 9) ORDCREATE(0), "test.ntx."
------------------------------------------------------------------------
Application Memory Allocation Report - D:\MyXHb\ERROR\testh.exe
Terminated at: 2009.09.22 13:21:12
Total memory allocated: 7535481 bytes (905 block(s))
Warning, memory allocated but not released: 68 bytes (1 block(s))
Block 1 003AE5E8 (size 64) (0),
"00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
------------------------------------------------------------------------
Application Memory Allocation Report - D:\MyXHb\ERROR\testh.exe
Terminated at: 2009.09.22 13:23:00
Total memory allocated: 229933358 bytes (913 block(s))
Warning, memory allocated but not released: 224567773 bytes (7 block(s))
Block 1 003AE5E8 (size 64) (0),
"50BF3B0080B73B000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
Block 2 003BBF50 (size 40) DBCREATE(0),
"634DD20800000000E5FFEF090000000060005F67D8BF3B00010000006D0007002000070000000700"
Block 3 675F0060 (size 166723557) DBCREATE(0),
"036D091680841E0062004A000000000000000000000000000000000000000000463100000000000000000043000000004000000000000000000000000000000046320000000000000000004E00000000090000000000000000000000000000000D0020426C61682C20626C61682C20626C61682E2E2E20202020202020202031202020203130393830362020202020202020202020202020202020202020202020202020202031303938303620426C61682C20626C61682C20626C61682E2E2E20202020202020202032202020203137393735342020202020202020202020202020202020202020202020202020202031373937353420426C61682C20626C61"
Block 4 003BBFD8 (size 9) DBCREATE(0), "test.dbf."
Block 5 003BB780 (size 40) ORDCREATE(0),
"00005902000000003AA172030000000060007E7420C73B000100000005000000B0C63B0000000000"
Block 6 747E0060 (size 57844026) ORDCREATE(0),
"0600010000FC58020000000011000900000034001A00463200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
Block 7 003BC720 (size 9) ORDCREATE(0), "test.ntx."
------------------------------------------------------------------------

Best regards,
Saulius
From harbour.01 at syenar.hu  Tue Sep 22 06:35:33 2009
From: harbour.01 at syenar.hu (=?windows-1252?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 22 06:35:41 2009
Subject: [Harbour] bio.c under Centos 5.3 issue
In-Reply-To: <9257026e0909220327p2fc764f3g7a56c6287b245d86@mail.gmail.com>
References: <9257026e0909220327p2fc764f3g7a56c6287b245d86@mail.gmail.com>
Message-ID: <96FA4A3E-EAE2-407B-AEF2-3945B2F90B81@syenar.hu>

Hi Lorenzo,

Can you try with 'make -i' to list all missing components?

Brgds,
Viktor

On 2009 Sep 22, at 12:27, Lorenzo Fiorini wrote:

> ../../../bio.c: In function ?HB_FUN_BIO_TEST_FLAGS?:
> ../../../bio.c:199: warning: implicit declaration of function  
> ?BIO_test_flags?
>
> Centos 5.3 seems to have openssl-0.9.8e
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Tue Sep 22 06:42:51 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep 22 06:42:57 2009
Subject: [Harbour] bio.c under Centos 5.3 issue
In-Reply-To: <96FA4A3E-EAE2-407B-AEF2-3945B2F90B81@syenar.hu>
References: <9257026e0909220327p2fc764f3g7a56c6287b245d86@mail.gmail.com>
	<96FA4A3E-EAE2-407B-AEF2-3945B2F90B81@syenar.hu>
Message-ID: <9257026e0909220342q722085eard31d750a225edc11@mail.gmail.com>

On Tue, Sep 22, 2009 at 12:35 PM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:

> Can you try with 'make -i' to list all missing components?

These are my envs:

export HB_INSTALL_PREFIX=/opt/harbour
export HB_COMMERCE=yes
export HB_BUILD_DLL=no
export HB_EXTERNALLIBS="zlib pcre sqlite3"
export HB_CONTRIBLIBS="hbct hblog hbxml hbmzip hbtip hbvpdf hbgd
hbpgsql hbcurl hbmysql hbsqlit3 hbssl hbodbc"
export HB_WITH_QT=/opt/qtsdk/qt/include
export HB_WITH_ZLIB=local
export HB_WITH_PCRE=local
export HB_WITH_SQLITE3=local
export HB_USER_CFLAGS=-fpic

and I get:

! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh  i
! HB_USER_CFLAGS: -fpic
! HB_INSTALL_PREFIX: /opt/harbour
! HB_BUILD_DLL: no
! HB_BUILD_SHARED: no
! HB_CONTRIBLIBS: hbct hblog hbxml hbmzip hbtip hbvpdf hbgd hbpgsql
hbcurl hbmysql hbsqlit3 hbssl hbodbc
! HB_EXTERNALLIBS: zlib pcre sqlite3
! HB_HOST_PLAT: linux (x86)  HB_SHELL: sh
! HB_PLATFORM: linux (x86) (autodetected)
! HB_COMPILER: gcc (autodetected: /usr/bin/)
! Component: 'zlib' found in
/mnt/shared/dvl/src/ws/harbour/external/zlib (local)
! Component: 'pcre' found in
/mnt/shared/dvl/src/ws/harbour/external/pcre (local)
! Component: 'openssl' found in /usr/include
! Component: 'gpm' explicitly disabled
! Component: 'slang' explicitly disabled
! Component: 'curses' not found
! Component: 'x11' found in /usr/include
! Component: 'wattcp/watt-32' not supported on linux platform
! REVISION: exported

best regards,
Lorenzo
From harbour.01 at syenar.hu  Tue Sep 22 06:50:56 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 22 06:51:05 2009
Subject: [Harbour] bio.c under Centos 5.3 issue
In-Reply-To: <9257026e0909220342q722085eard31d750a225edc11@mail.gmail.com>
References: <9257026e0909220327p2fc764f3g7a56c6287b245d86@mail.gmail.com>
	<96FA4A3E-EAE2-407B-AEF2-3945B2F90B81@syenar.hu>
	<9257026e0909220342q722085eard31d750a225edc11@mail.gmail.com>
Message-ID: <EE4F277F-D2CF-4E09-98CA-5C99104D6ED7@syenar.hu>

I'd be interested in error output from hbssl.

Brgds,
Viktor

On 2009 Sep 22, at 12:42, Lorenzo Fiorini wrote:

> On Tue, Sep 22, 2009 at 12:35 PM, Viktor Szak?ts <harbour. 
> 01@syenar.hu> wrote:
>
>> Can you try with 'make -i' to list all missing components?
>
> These are my envs:
>
> export HB_INSTALL_PREFIX=/opt/harbour
> export HB_COMMERCE=yes
> export HB_BUILD_DLL=no
> export HB_EXTERNALLIBS="zlib pcre sqlite3"
> export HB_CONTRIBLIBS="hbct hblog hbxml hbmzip hbtip hbvpdf hbgd
> hbpgsql hbcurl hbmysql hbsqlit3 hbssl hbodbc"
> export HB_WITH_QT=/opt/qtsdk/qt/include
> export HB_WITH_ZLIB=local
> export HB_WITH_PCRE=local
> export HB_WITH_SQLITE3=local
> export HB_USER_CFLAGS=-fpic
>
> and I get:
>
> ! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
> ! MAKE: make 3.81 /bin/sh  i
> ! HB_USER_CFLAGS: -fpic
> ! HB_INSTALL_PREFIX: /opt/harbour
> ! HB_BUILD_DLL: no
> ! HB_BUILD_SHARED: no
> ! HB_CONTRIBLIBS: hbct hblog hbxml hbmzip hbtip hbvpdf hbgd hbpgsql
> hbcurl hbmysql hbsqlit3 hbssl hbodbc
> ! HB_EXTERNALLIBS: zlib pcre sqlite3
> ! HB_HOST_PLAT: linux (x86)  HB_SHELL: sh
> ! HB_PLATFORM: linux (x86) (autodetected)
> ! HB_COMPILER: gcc (autodetected: /usr/bin/)
> ! Component: 'zlib' found in
> /mnt/shared/dvl/src/ws/harbour/external/zlib (local)
> ! Component: 'pcre' found in
> /mnt/shared/dvl/src/ws/harbour/external/pcre (local)
> ! Component: 'openssl' found in /usr/include
> ! Component: 'gpm' explicitly disabled
> ! Component: 'slang' explicitly disabled
> ! Component: 'curses' not found
> ! Component: 'x11' found in /usr/include
> ! Component: 'wattcp/watt-32' not supported on linux platform
> ! REVISION: exported
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Tue Sep 22 06:57:01 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep 22 06:57:09 2009
Subject: [Harbour] bio.c under Centos 5.3 issue
In-Reply-To: <EE4F277F-D2CF-4E09-98CA-5C99104D6ED7@syenar.hu>
References: <9257026e0909220327p2fc764f3g7a56c6287b245d86@mail.gmail.com>
	<96FA4A3E-EAE2-407B-AEF2-3945B2F90B81@syenar.hu>
	<9257026e0909220342q722085eard31d750a225edc11@mail.gmail.com>
	<EE4F277F-D2CF-4E09-98CA-5C99104D6ED7@syenar.hu>
Message-ID: <9257026e0909220357k42371671n68ad00d423aa4060@mail.gmail.com>

On Tue, Sep 22, 2009 at 12:50 PM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:

> I'd be interested in error output from hbssl.

../../../bio.c: In function ?HB_FUN_BIO_TEST_FLAGS?:
../../../bio.c:199: warning: implicit declaration of function ?BIO_test_flags?

best regards,
Lorenzo
From druzus at users.sourceforge.net  Tue Sep 22 06:58:11 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue Sep 22 06:58:17 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12599] trunk/harbour
Message-ID: <E1Mq34V-0008Af-VG@3kljzd1.ch3.sourceforge.com>

Revision: 12599
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12599&view=rev
Author:   druzus
Date:     2009-09-22 10:58:10 +0000 (Tue, 22 Sep 2009)

Log Message:
-----------
2009-09-22 12:58 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbrddcdx.h
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
    + added support for national sorting using accented and multibyte
      characters.
      Warning CDX indexes created so far for such CDPs are not sorted using
      the same conditions as current SVN code so new applications should
      reindex.
      Harbour codepages with accented characters:
         cs852, csiso, cskam, cswin,
         sk852, skiso, skkam, skwin
         sv850, sviso, svwin
         fr850, friso, frwin
         el737, elwin,
      Harbour codepages with multibyte characters:
         cs852, csiso, cskam, cswin,
         sk852, skiso, skkam, skwin
      Now string keys in CDX indexes using above codepages are sorted
      in the same way as HVM sorts strings. Please only remember that
      CDX internal format was designed for byte weight sorting so such
      CPs may reduce internal compression level increasing the size of
      final indexes.
      After this modification all native index types (NTX, NSX and CDX)
      fully respects national sorting defined in Harbour CPs.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/include/hbrddcdx.h
    trunk/harbour/source/rdd/dbfcdx/dbfcdx1.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Tue Sep 22 07:10:16 2009
From: harbour.01 at syenar.hu (=?windows-1252?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 22 07:10:25 2009
Subject: [Harbour] bio.c under Centos 5.3 issue
In-Reply-To: <9257026e0909220357k42371671n68ad00d423aa4060@mail.gmail.com>
References: <9257026e0909220327p2fc764f3g7a56c6287b245d86@mail.gmail.com>
	<96FA4A3E-EAE2-407B-AEF2-3945B2F90B81@syenar.hu>
	<9257026e0909220342q722085eard31d750a225edc11@mail.gmail.com>
	<EE4F277F-D2CF-4E09-98CA-5C99104D6ED7@syenar.hu>
	<9257026e0909220357k42371671n68ad00d423aa4060@mail.gmail.com>
Message-ID: <715D472F-F1E1-4C99-A065-540BD146CD95@syenar.hu>

I understand, so this is the only one error, even with -i.

You can try to fix that using:
HB_USER_CFLAGS=-DHB_OPENSSL_OLD_OSX_

Brgds,
Viktor

On 2009 Sep 22, at 12:57, Lorenzo Fiorini wrote:

> On Tue, Sep 22, 2009 at 12:50 PM, Viktor Szak?ts <harbour. 
> 01@syenar.hu> wrote:
>
>> I'd be interested in error output from hbssl.
>
> ../../../bio.c: In function ?HB_FUN_BIO_TEST_FLAGS?:
> ../../../bio.c:199: warning: implicit declaration of function  
> ?BIO_test_flags?
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From lorenzo.fiorini at gmail.com  Tue Sep 22 07:13:29 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep 22 07:13:36 2009
Subject: [Harbour] bio.c under Centos 5.3 issue
In-Reply-To: <715D472F-F1E1-4C99-A065-540BD146CD95@syenar.hu>
References: <9257026e0909220327p2fc764f3g7a56c6287b245d86@mail.gmail.com>
	<96FA4A3E-EAE2-407B-AEF2-3945B2F90B81@syenar.hu>
	<9257026e0909220342q722085eard31d750a225edc11@mail.gmail.com>
	<EE4F277F-D2CF-4E09-98CA-5C99104D6ED7@syenar.hu>
	<9257026e0909220357k42371671n68ad00d423aa4060@mail.gmail.com>
	<715D472F-F1E1-4C99-A065-540BD146CD95@syenar.hu>
Message-ID: <9257026e0909220413o27ad1878p372c071775a9525e@mail.gmail.com>

On Tue, Sep 22, 2009 at 1:10 PM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:

> You can try to fix that using:
> HB_USER_CFLAGS=-DHB_OPENSSL_OLD_OSX_

Yes, it worked.

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Tue Sep 22 07:16:57 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep 22 07:17:03 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12599] trunk/harbour
In-Reply-To: <E1Mq34V-0008Af-VG@3kljzd1.ch3.sourceforge.com>
References: <E1Mq34V-0008Af-VG@3kljzd1.ch3.sourceforge.com>
Message-ID: <9257026e0909220416k23b15486ga6ec3872b68e698a@mail.gmail.com>

On Tue, Sep 22, 2009 at 12:58 PM,  <druzus@users.sourceforge.net> wrote:

Sorry I'm not sure I've understood correctly.

> ? ? ?Warning CDX indexes created so far for such CDPs are not sorted using
> ? ? ?the same conditions as current SVN code so new applications should
> ? ? ?reindex.

Does it mean that we need to recreate all the indexes after this change?

best regards,
Lorenzo
From druzus at acn.waw.pl  Tue Sep 22 07:18:29 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 22 07:18:35 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12593] trunk/harbour
In-Reply-To: <2386af1b0909220332j181acac8la3dccccd1741d558@mail.gmail.com>
References: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com>
	<4AB88DF5.7090704@dbtopas.lt>
	<2386af1b0909220332j181acac8la3dccccd1741d558@mail.gmail.com>
Message-ID: <20090922111829.GA8038@uran.home.aster.pl>

On Tue, 22 Sep 2009, Saulius Zrelskis wrote:

Hi,

> File hb_out.log is generated:
> Application Memory Allocation Report - D:\TESTS\test.exe
> Terminated at: 2009.09.22 13:19:25
> Total memory allocated: 107343446 bytes (913 block(s))
> Warning, memory allocated but not released: 99808005 bytes (7 block(s))

We need self contain .prg example to replicate this problem.
Without it it's hard to guess what is wrong. In my tests all
works correctly without memory leaks.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep 22 07:22:51 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 22 07:22:57 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12593] trunk/harbour
In-Reply-To: <20090922111829.GA8038@uran.home.aster.pl>
References: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com>
	<4AB88DF5.7090704@dbtopas.lt>
	<2386af1b0909220332j181acac8la3dccccd1741d558@mail.gmail.com>
	<20090922111829.GA8038@uran.home.aster.pl>
Message-ID: <20090922112251.GB8038@uran.home.aster.pl>

On Tue, 22 Sep 2009, Przemyslaw Czerpak wrote:
> We need self contain .prg example to replicate this problem.
> Without it it's hard to guess what is wrong. In my tests all
> works correctly without memory leaks.

Ups, I see you were replying to Mindaugas message with test code.
I haven't tested it yet by I guess you did not remove tables and
indexes created in memory. Use dbDrob() before application exit.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep 22 07:27:05 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 22 07:27:11 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12599] trunk/harbour
In-Reply-To: <9257026e0909220416k23b15486ga6ec3872b68e698a@mail.gmail.com>
References: <E1Mq34V-0008Af-VG@3kljzd1.ch3.sourceforge.com>
	<9257026e0909220416k23b15486ga6ec3872b68e698a@mail.gmail.com>
Message-ID: <20090922112705.GC8038@uran.home.aster.pl>

On Tue, 22 Sep 2009, Lorenzo Fiorini wrote:

Hi,

> Sorry I'm not sure I've understood correctly.
> > ? ? ?Warning CDX indexes created so far for such CDPs are not sorted using
> > ? ? ?the same conditions as current SVN code so new applications should
> > ? ? ?reindex.
> Does it mean that we need to recreate all the indexes after this change?

I thought that ChangeLog entry is clear enough.
Have you used Harbour CDP with accented or multibyte characters?
If yes then you have to recreated all character indexes.

best regards,
Przemek
From harbour.01 at syenar.hu  Tue Sep 22 08:19:59 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 22 08:20:07 2009
Subject: [Harbour] hbmemio issue
Message-ID: <1AFCE99C-AC9C-4384-B540-4F34FB4A64AE@syenar.hu>

Hi Mindaugas and All,

My very first problem towards implementing hbmemio
as a replacement for temp tables is that I'd need
to create *unique* "filenames".

BTW the same problem goes to hbnetio, where I sometimes
need to create unique temp files (which later get renamed
to final table name)

How to do that?

Brgds,
Viktor

From maurilio.longo at libero.it  Tue Sep 22 08:32:45 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Sep 22 08:32:53 2009
Subject: [Harbour] build 12599 and os/2
Message-ID: <4AB8C3ED.80303@libero.it>

Hi,

I'm getting a strange error

gcc  -I. -I../../../../../include  -O3  -IE:/repository/harbour/external/zlib  -
opngwutil.o -c ../../../pngwutil.c
for %i in ( *.o ) do @echo ADDMOD %i >> __lib__.tmp
ar   -M < __lib__.tmp
& ..\..\..\..\..\config\os2rm -f __lib__.tmp
SYS1079: & was unexpected at this time.
make[3]: *** [libpng.a] Error 1

The strange thing is that it seems that make is splitting a line in the wrong
position.

What has changed since yesterday to make this happen?

Maurilio.


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Tue Sep 22 08:37:11 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Sep 22 08:37:19 2009
Subject: [Harbour] build 12599 and os/2
In-Reply-To: <4AB8C3ED.80303@libero.it>
References: <4AB8C3ED.80303@libero.it>
Message-ID: <4AB8C4F7.9010300@libero.it>

Uhmm,

wait, could it be that $(ARSTRIP) is empty here and this adds an empty line at
the bottom of the define create_dynlib which adds a \r\n to the generated rule?

Maurilio.


Maurilio Longo wrote:
> Hi,
> 
> I'm getting a strange error
> 
> gcc  -I. -I../../../../../include  -O3  -IE:/repository/harbour/external/zlib  -
> opngwutil.o -c ../../../pngwutil.c
> for %i in ( *.o ) do @echo ADDMOD %i >> __lib__.tmp
> ar   -M < __lib__.tmp
> & ..\..\..\..\..\config\os2rm -f __lib__.tmp
> SYS1079: & was unexpected at this time.
> make[3]: *** [libpng.a] Error 1
> 
> The strange thing is that it seems that make is splitting a line in the wrong
> position.
> 
> What has changed since yesterday to make this happen?
> 
> Maurilio.
> 
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Tue Sep 22 08:43:26 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 22 08:49:27 2009
Subject: [Harbour] build 12599 and os/2
In-Reply-To: <4AB8C4F7.9010300@libero.it>
References: <4AB8C3ED.80303@libero.it> <4AB8C4F7.9010300@libero.it>
Message-ID: <70585D54-8996-4941-9ACA-53118BAE84AD@syenar.hu>


On 2009 Sep 22, at 14:37, Maurilio Longo wrote:

> Uhmm,
>
> wait, could it be that $(ARSTRIP) is empty here and this adds an  
> empty line at
> the bottom of the define create_dynlib which adds a \r\n to the  
> generated rule?

Yes, that's it. If that causes a problem, we should add some sort of  
guard
there, or add it to the same line as $(AR) (don't know how to do this on
OS/2). Anyhow it's strange because we produce empty lines in places like
'clean::' rules (but there it's directly there, not through a var).

Brgds,
Viktor


>
> Maurilio.
>
>
> Maurilio Longo wrote:
>> Hi,
>>
>> I'm getting a strange error
>>
>> gcc  -I. -I../../../../../include  -O3  -IE:/repository/harbour/ 
>> external/zlib  -
>> opngwutil.o -c ../../../pngwutil.c
>> for %i in ( *.o ) do @echo ADDMOD %i >> __lib__.tmp
>> ar   -M < __lib__.tmp
>> & ..\..\..\..\..\config\os2rm -f __lib__.tmp
>> SYS1079: & was unexpected at this time.
>> make[3]: *** [libpng.a] Error 1
>>
>> The strange thing is that it seems that make is splitting a line in  
>> the wrong
>> position.
>>
>> What has changed since yesterday to make this happen?
>>
>> Maurilio.
>>
>>
>
> -- 
> __________
> |  |  | |__| Maurilio Longo
> |_|_|_|____| farmaconsult s.r.l.
>
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vszakats at users.sourceforge.net  Tue Sep 22 08:57:37 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue Sep 22 08:57:43 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12600] trunk/harbour
Message-ID: <E1Mq4w5-0003rX-DF@d5vjzd1.ch3.sourceforge.com>

Revision: 12600
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12600&view=rev
Author:   vszakats
Date:     2009-09-22 12:57:36 +0000 (Tue, 22 Sep 2009)

Log Message:
-----------
2009-09-22 14:57 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * contrib/hbmemio/tests/test.prg
  * contrib/hbmemio/memio.c
    * Internal name also renamed to HB_MEMIO (from HB_IODMEM).

  * source/vm/dynlibhb.c
    + cast.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbmemio/memio.c
    trunk/harbour/contrib/hbmemio/tests/test.prg
    trunk/harbour/source/vm/dynlibhb.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From maurilio.longo at libero.it  Tue Sep 22 08:58:24 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Sep 22 08:58:32 2009
Subject: [Harbour] build 12599 and os/2
In-Reply-To: <70585D54-8996-4941-9ACA-53118BAE84AD@syenar.hu>
References: <4AB8C3ED.80303@libero.it> <4AB8C4F7.9010300@libero.it>
	<70585D54-8996-4941-9ACA-53118BAE84AD@syenar.hu>
Message-ID: <4AB8C9F0.60208@libero.it>

Viktor,

writing it like this works ok

ifneq ($(filter $(HB_BUILD_STRIP),all lib),)
   ARSTRIP = ${HB_CCPATH}${HB_CCPREFIX}strip -S $(LIB_DIR)/$@
else
   ARSTRIP = @$(ECHO) did not strip $(LIB_DIR)/$@
endif

:)

Maurilio.


Viktor Szak?ts wrote:
> 
> On 2009 Sep 22, at 14:37, Maurilio Longo wrote:
> 
>> Uhmm,
>>
>> wait, could it be that $(ARSTRIP) is empty here and this adds an empty
>> line at
>> the bottom of the define create_dynlib which adds a \r\n to the
>> generated rule?
> 
> Yes, that's it. If that causes a problem, we should add some sort of guard
> there, or add it to the same line as $(AR) (don't know how to do this on
> OS/2). Anyhow it's strange because we produce empty lines in places like
> 'clean::' rules (but there it's directly there, not through a var).
> 
> Brgds,
> Viktor
> 
> 
>>
>> Maurilio.
>>
>>
>> Maurilio Longo wrote:
>>> Hi,
>>>
>>> I'm getting a strange error
>>>
>>> gcc  -I. -I../../../../../include  -O3 
>>> -IE:/repository/harbour/external/zlib  -
>>> opngwutil.o -c ../../../pngwutil.c
>>> for %i in ( *.o ) do @echo ADDMOD %i >> __lib__.tmp
>>> ar   -M < __lib__.tmp
>>> & ..\..\..\..\..\config\os2rm -f __lib__.tmp
>>> SYS1079: & was unexpected at this time.
>>> make[3]: *** [libpng.a] Error 1
>>>
>>> The strange thing is that it seems that make is splitting a line in
>>> the wrong
>>> position.
>>>
>>> What has changed since yesterday to make this happen?
>>>
>>> Maurilio.
>>>
>>>
>>
>> -- 
>> __________
>> |  |  | |__| Maurilio Longo
>> |_|_|_|____| farmaconsult s.r.l.
>>
>> 
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Tue Sep 22 09:12:13 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 22 09:12:22 2009
Subject: [Harbour] build 12599 and os/2
In-Reply-To: <4AB8C9F0.60208@libero.it>
References: <4AB8C3ED.80303@libero.it> <4AB8C4F7.9010300@libero.it>
	<70585D54-8996-4941-9ACA-53118BAE84AD@syenar.hu>
	<4AB8C9F0.60208@libero.it>
Message-ID: <A21B49C7-E4DA-495C-9197-B601C27BD8FA@syenar.hu>


On 2009 Sep 22, at 14:58, Maurilio Longo wrote:

> Viktor,
>
> writing it like this works ok
>
> ifneq ($(filter $(HB_BUILD_STRIP),all lib),)
>   ARSTRIP = ${HB_CCPATH}${HB_CCPREFIX}strip -S $(LIB_DIR)/$@
> else
>   ARSTRIP = @$(ECHO) did not strip $(LIB_DIR)/$@
> endif
>
> :)

hm ;) can't we use something which doesn't produce any output?

I guess plain empty $(ECHO) will not work unless we redefine
it to GNU version.

Brgds,
Viktor

From druzus at acn.waw.pl  Tue Sep 22 09:20:20 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 22 09:20:27 2009
Subject: [Harbour] haiku fallout
In-Reply-To: <098C59B2-80EC-4EC2-8917-74C9D248A077@syenar.hu>
References: <alpine.GSO.2.00.0909201933500.17989@dawn.royalcomp.hu>
	<20090920182743.GA12180@uran.home.aster.pl>
	<098C59B2-80EC-4EC2-8917-74C9D248A077@syenar.hu>
Message-ID: <20090922132020.GA31776@uran.home.aster.pl>

On Sun, 20 Sep 2009, Szak?ts Viktor wrote:
[...]

Usually in system installation we have existing structure like:
   <instpref>/bin       - with executable files, one of PATH dirs
                          we should not use any subdirectories here
   <instpref>/lib       - with shared libraries, one of system library dirs
                          we can use subdirectory for static libraries and
                          it's even suggested to reduce name conflicts
                          but native shared library have to be in this
                          localization
   <instpref>/include   - with header files, we can and should use subdir
                          for our own header files
   <instpref>/share/man - with man files - sub dirs with strict meaning and
                          naming convention. Sometimes it's without share
                          <instpref>/man (i.e. in /usr/local)
   <instpref>/share/doc - with non man documentation, we should use subdir
   <instpref>/etc       - with configuration files, if necessary it's
                          possible to use subdirs with the exception to
                          /usr which stores configuration files in /etc
                          FHS suggests also to use /etc/opt and /etc/local
                          for configurations files from /opt /usr/local

For applications which can be globally accessed it's suggested to move
configuration files into '/etc' directory. It helps in creating backups
but also in locating configuration files by other programs bound with
given application, i.e. in our case we may talk about final user
applications compiled by Harbour which may look for some system global
Harbour configuration files, i.e. now /etc/harbour/hb-charmap.def which
is used optionally by some GTs like GTCRS or GTTRM (for details look at
source/rtl/gtcrs/hb-charmap.def, I plan to introduce also hb-keymap.def
and hb-termmap.def for GTTRM what should allow to configure some unknown
for GTTRM terminals by users or system admins) and I would like to keep
/etc/harbour as default global harbour configuration directory though
for packages installed in '/opt' FHS suggests to use '/etc/opt'.

It's not easy to create rules which can follow exactly different
distribution policy so we should give an interface to set each of the
above directory separately. It means that we have to introduce yet
two new envvars for man and configurations files, i.e. HB_MAN_INSTALL
and HB_ETC_INSTALL or HB_CNF_INSTALL.
Building RPM packages we have predefined macros like %{_bindir}, %{_libdir},
%{_includedir}, %{_mandir}, %{_sysconfdir}, %{_defaultdocdir}, ... which
can be used to set our own HB_*_INSTALL variables to suggested system
directories without touching HB_INSTALL_PREFIX so it's not a problem.
We do not use autoconf so we have to chose sth ourselves for 'manual'
installation using only HB_INSTALL_PREFIX. We have to remember also
that at runtime hbmk2 may need to replicate some parts of our detection
logic.


Here are 4 system wide installations which can be used in different
*nixes and try to confirm FHS as close as possible.

'->' means soft link,

1. FHS2.3 compliant localization for add-on applications:
=========================================================
/opt/
    /harbour/
            /bin/
                <harbour_executable_files>
            /lib/
                <native_harbour_libraries>
               [/<addon_harbour_lib>/
                                     <native_addon_libraries>]
               [/<platform>/<cc>/
                                <platform_cc_libraries>]
            /include/
                    <harbour_header_files>
                   [/<addon_harbour_lib>/
                                            <addon_header_files>]
            /share/
                  /man/
                      /man1/
                           <harbour_man_pages>.1
                  /doc/
                      <harbour_doc_files_and_dirs>
                     [/<addon_harbour_lib>/
                                          <addon_docs>]
            /etc -> /etc/harbour
/etc/
    /harbour/
            <harbour_config_files>
/etc/
    /opt/         (if exists)
        /harbour -> /etc/harbour

if /opt/bin exists then we should create in this directory soft links
to executable files in /opt/harbour/bin

if /opt/lib exists then we should create in this directory soft links
to harbour shared libraries in /opt/harbour/lib

if /opt/man/man1 exists then we should create in this directory soft links
to harbour shared libraries in /opt/harbour/share/man/man1



2. FHS2.3 compliant localization for distribution applications:
===============================================================
/usr/
    /bin/
        <harbour_executable_files>
    /lib/
        <soft_links_to_native_harbour_shared_libraries>
        /harbour/
                <native_harbour_libraries>
               [/<addon_harbour_lib>/
               [/<platform>/<cc>/
                                <platform_cc_libraries>]
    /include/
            /harbour/
                    <harbour_header_files>
                   [/<addon_harbour_lib>/
                                        <addon_header_files>]
    /share/
          /man/
              /man1/
                   <harbour_man_pages>.1
          /doc/
              /harbour/
                      <harbour_doc_files_and_dirs>
                      [/<addon_harbour_lib>/
                                           <addon_docs>]
/etc/
    /harbour/
            <harbour_config_files>

In some systems instead of /usr/share/doc/harbour we should use
/usr/share/doc/packages/harbour.
Such localization (tuned by system settings in package manager)
is used now by RPM and DEB packages


3. FHS2.3 compliant localization for local applications
   (BSD compatible localization for non core packages):
=======================================================
/usr/
    /local/
          /bin/
              <harbour_executable_files>
          /lib/
              <soft_links_to_native_harbour_shared_libraries>
              /harbour/
                      <native_harbour_libraries>
                     [/<addon_harbour_lib>/
                     [/<platform>/<cc>/
                                      <platform_cc_libraries>]
          /include/
                  /harbour/
                          <harbour_header_files>
                         [/<addon_harbour_lib>/
                                              <addon_header_files>]
          /man/
              /man1/
                   <harbour_man_pages>.1
          /share/
                /doc/
                    /harbour/
                            <harbour_doc_files_and_dirs>
                            [/<addon_harbour_lib>/
                                                 <addon_docs>]
          /etc/
              /harbour -> /etc/harbour
/etc/
    /harbour/
            <harbour_config_files>
/etc/
    /local/       (if exists)
          /harbour -> /etc/harbour


4. HAIKU localization for non system core packages
==================================================
/boot/
     /common/
            /bin/
                <harbour_executable_files>
            /lib/
                <soft_links_to_native_harbour_shared_libraries>
                /harbour/
                        <native_harbour_libraries>
                       [/<addon_harbour_lib>/
                       [/<platform>/<cc>/
                                        <platform_cc_libraries>]
            /include/
                    /harbour/
                            <harbour_header_files>
                           [/<addon_harbour_lib>/
                                                <addon_header_files>]
            /share/
                  /man/
                      /man1/
                           <harbour_man_pages>.1
                  /doc/
                      /harbour/
                              <harbour_doc_files_and_dirs>
                              [/<addon_harbour_lib>/
                                                   <addon_docs>]
            /etc/
                /harbour/
                        <harbour_config_files>

'share/man' can be replaced by 'man'.


Solaris  does not support /usr/local, suggested localization: 1
*BSD     does not support /opt, suggested localization: 3
Darwin   suggested localization: 1 (please confirm)
Linux    suggested localization: DEB/RPM->2 (tuned by package manager),
         1 or 3 for non package installation.
HPUX     1 or 3 I do not know which is preferred and which lib dirs
         in SHLIB_PATH/LD_LIBRARY_PATH
HAIKU    does not support /usr and /opt, suggested localization: 4
AIX      suggested localization: modified 1 (/opt/freeware instead of /opt)
         but details should be verified by real AIX users

For non system installation we can chose any directory structure though
probably the easiest method is using the same tree as in /opt/harbour
(version 1).



The shard library naming convention
===================================
@ - softlink
* - hardlink

   @<pref><name><epoc>.<ext> ->
   @<pref><name><epoc>.<ext>.<major> ->
   @<pref><name><epoc>.<ext>.<major>.<minor> ->
   *<pref><name><epoc>.<ext>.<major>.<minor>.<rev>

   <pref> is library name prefix,
          'lib' in supported by Harbour *nix systems
   <name> is base name, 'harbour' in our case
   <epoc> is used to mark new or alternative branches, we are using
          'mt' to mark alternative libraries with MT support.
   <ext> is library extension,
         'dylib'  in Darwin,
         'sl'     in HP-UX,
         'so'     in others.
   <major>, <minor>, <rev> - version numbers (i.e. 2.0.0 for current SVN).

   i.e.:
      @libharbour.so ->
      @libharbour.so.2 ->
      @libharbour.so.2.0 ->
      *libharbour.so.2.0.0

Real/suggested usage in supported *nixes:
   Linux, Solaris, Haiku, NetBSD:
      @<pref><name><epoc>.<ext> -> *
      @<pref><name><epoc>.<ext>.<major> ->
      *<pref><name><epoc>.<ext>.<major>.<minor>.<rev>
   FreeBSD (some packages use Linux like form):
      @<pref><name><epoc>.<ext> ->
      *<pref><name><epoc>.<ext>.<major>
   OpenBsd:
      *<pref><name><epoc>.<ext>.<major>.<minor>

   Darwin???
   HP-UX???

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep 22 09:26:57 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 22 09:27:04 2009
Subject: [Harbour] build 12599 and os/2
In-Reply-To: <A21B49C7-E4DA-495C-9197-B601C27BD8FA@syenar.hu>
References: <4AB8C3ED.80303@libero.it> <4AB8C4F7.9010300@libero.it>
	<70585D54-8996-4941-9ACA-53118BAE84AD@syenar.hu>
	<4AB8C9F0.60208@libero.it>
	<A21B49C7-E4DA-495C-9197-B601C27BD8FA@syenar.hu>
Message-ID: <20090922132657.GA9672@uran.home.aster.pl>

On Tue, 22 Sep 2009, Szak?ts Viktor wrote:
>> writing it like this works ok
>> ifneq ($(filter $(HB_BUILD_STRIP),all lib),)
>>   ARSTRIP = ${HB_CCPATH}${HB_CCPREFIX}strip -S $(LIB_DIR)/$@
>> else
>>   ARSTRIP = @$(ECHO) did not strip $(LIB_DIR)/$@
>> endif
> hm ;) can't we use something which doesn't produce any output?
> I guess plain empty $(ECHO) will not work unless we redefine
> it to GNU version.

What about removing ARSTRIP from create_library and using sth like:

   ifneq ($(filter $(HB_BUILD_STRIP),all lib),)
      ARSTRIP = & ${HB_CCPATH}${HB_CCPREFIX}strip -S $(LIB_DIR)/$@
   endif

   AR_RULE = $(create_library) $(ARSTRIP) & $(RM) __lib__.tmp

best regards,
Przemek
From dbtopas at dbtopas.lt  Tue Sep 22 09:26:36 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Sep 22 09:27:30 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12593] trunk/harbour
In-Reply-To: <20090922112251.GB8038@uran.home.aster.pl>
References: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com>	<4AB88DF5.7090704@dbtopas.lt>	<2386af1b0909220332j181acac8la3dccccd1741d558@mail.gmail.com>	<20090922111829.GA8038@uran.home.aster.pl>
	<20090922112251.GB8038@uran.home.aster.pl>
Message-ID: <4AB8D08C.5060104@dbtopas.lt>

Hi,


Przemyslaw Czerpak wrote:
> Ups, I see you were replying to Mindaugas message with test code.
> I haven't tested it yet by I guess you did not remove tables and
> indexes created in memory. Use dbDrob() before application exit.

I'll add automatic memory file system cleanup on application exit.


Regards,
Mindaugas
From maurilio.longo at libero.it  Tue Sep 22 09:31:44 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Sep 22 09:31:53 2009
Subject: [Harbour] build 12599 and os/2
In-Reply-To: <A21B49C7-E4DA-495C-9197-B601C27BD8FA@syenar.hu>
References: <4AB8C3ED.80303@libero.it>
	<4AB8C4F7.9010300@libero.it>	<70585D54-8996-4941-9ACA-53118BAE84AD@syenar.hu>	<4AB8C9F0.60208@libero.it>
	<A21B49C7-E4DA-495C-9197-B601C27BD8FA@syenar.hu>
Message-ID: <4AB8D1C0.7080503@libero.it>

Viktor Szak?ts wrote:
> I guess plain empty $(ECHO) will not work unless we redefine
> it to GNU version.
> 
Correct, OS/2 echo gives a

echo is OFF (or ON)

when called without parameters

Maurilio.

> Brgds,
> Viktor
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Tue Sep 22 09:39:28 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Sep 22 09:39:37 2009
Subject: [Harbour] build 12599 and os/2
In-Reply-To: <20090922132657.GA9672@uran.home.aster.pl>
References: <4AB8C3ED.80303@libero.it>
	<4AB8C4F7.9010300@libero.it>	<70585D54-8996-4941-9ACA-53118BAE84AD@syenar.hu>	<4AB8C9F0.60208@libero.it>	<A21B49C7-E4DA-495C-9197-B601C27BD8FA@syenar.hu>
	<20090922132657.GA9672@uran.home.aster.pl>
Message-ID: <4AB8D390.6070008@libero.it>

Przemyslaw,

Przemyslaw Czerpak wrote:
> 
> What about removing ARSTRIP from create_library and using sth like:
> 
>    ifneq ($(filter $(HB_BUILD_STRIP),all lib),)
>       ARSTRIP = & ${HB_CCPATH}${HB_CCPREFIX}strip -S $(LIB_DIR)/$@
>    endif
> 
>    AR_RULE = $(create_library) $(ARSTRIP) & $(RM) __lib__.tmp
> 
ok, works with ARSTRIP empty, I'll try next to see if it works with it defined
as well.

Maurilio.


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Tue Sep 22 09:42:26 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 22 09:42:34 2009
Subject: [Harbour] haiku fallout
In-Reply-To: <20090922132020.GA31776@uran.home.aster.pl>
References: <alpine.GSO.2.00.0909201933500.17989@dawn.royalcomp.hu>
	<20090920182743.GA12180@uran.home.aster.pl>
	<098C59B2-80EC-4EC2-8917-74C9D248A077@syenar.hu>
	<20090922132020.GA31776@uran.home.aster.pl>
Message-ID: <CD35E2F7-3FE6-45C0-8A78-7FC3EB93992C@syenar.hu>

Hi Przemek,

Just some quick reaction, I have to go now.

> and HB_ETC_INSTALL or HB_CNF_INSTALL.

What is the difference between ETC and CNF?
If possible IMO we should not differentiate between
types of config files.

>            /lib/
>                <native_harbour_libraries>
>               [/<addon_harbour_lib>/
>                                     <native_addon_libraries>]
>               [/<platform>/<cc>/
>                                <platform_cc_libraries>]

I suppose 'contrib' counts as 'addon'.
IMO and if system rules allow it, we should put native
libs also under plat/cc structure, since generally speaking
we may support multiple compilers with incompatible lib formats
(like watcom and gcc, or anything else in the future).
Plus there must a plat/cc structure also below each addon.

> The shard library naming convention
> ===================================
> @ - softlink
> * - hardlink
>
>   @<pref><name><epoc>.<ext> ->
>   @<pref><name><epoc>.<ext>.<major> ->
>   @<pref><name><epoc>.<ext>.<major>.<minor> ->
>   *<pref><name><epoc>.<ext>.<major>.<minor>.<rev>
>
>   <pref> is library name prefix,
>          'lib' in supported by Harbour *nix systems
>   <name> is base name, 'harbour' in our case
>   <epoc> is used to mark new or alternative branches, we are using
>          'mt' to mark alternative libraries with MT support.
>   <ext> is library extension,
>         'dylib'  in Darwin,
>         'sl'     in HP-UX,
>         'so'     in others.
>   <major>, <minor>, <rev> - version numbers (i.e. 2.0.0 for current  
> SVN).
>
>   i.e.:
>      @libharbour.so ->
>      @libharbour.so.2 ->
>      @libharbour.so.2.0 ->
>      *libharbour.so.2.0.0
>
> Real/suggested usage in supported *nixes:
>   Linux, Solaris, Haiku, NetBSD:
>      @<pref><name><epoc>.<ext> -> *
>      @<pref><name><epoc>.<ext>.<major> ->
>      *<pref><name><epoc>.<ext>.<major>.<minor>.<rev>
>   FreeBSD (some packages use Linux like form):
>      @<pref><name><epoc>.<ext> ->
>      *<pref><name><epoc>.<ext>.<major>
>   OpenBsd:
>      *<pref><name><epoc>.<ext>.<major>.<minor>
>
>   Darwin???

On darwin the current naming seems to be the accepted one,
although some libs use '-' to separate name form version no.

[ I've just browsed my /usr/lib dir for above conclusion,
so I don't know what's the official standpoint here, anyway
I'd assumed the extension is fixed. ]

Brgds,
Viktor

From dbtopas at dbtopas.lt  Tue Sep 22 09:42:23 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Sep 22 09:43:19 2009
Subject: [Harbour] hbmemio issue
In-Reply-To: <1AFCE99C-AC9C-4384-B540-4F34FB4A64AE@syenar.hu>
References: <1AFCE99C-AC9C-4384-B540-4F34FB4A64AE@syenar.hu>
Message-ID: <4AB8D43F.3060607@dbtopas.lt>

Hi,


Viktor Szak?ts wrote:
> My very first problem towards implementing hbmemio
> as a replacement for temp tables is that I'd need
> to create *unique* "filenames".
> 
> BTW the same problem goes to hbnetio, where I sometimes
> need to create unique temp files (which later get renamed
> to final table name)
> 
> How to do that?

In Windows and real file system I use GetTempFileName() WinAPI, but I do 
not like this way. Some trivial solutions like
   HB_TTOS(HB_DATETIME()) + LTRIM(STR(HB_RANDOM(999999999999), 12, 0))
usually is also acceptable, but it would be nice to have more beautiful 
way to do that.


Regards,
Mindaugas

From snaiperis at users.sourceforge.net  Tue Sep 22 10:10:00 2009
From: snaiperis at users.sourceforge.net (snaiperis@users.sourceforge.net)
Date: Tue Sep 22 10:10:45 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12601] trunk/harbour
Message-ID: <E1Mq648-00047k-Kf@bj8yhf1.ch3.sourceforge.com>

Revision: 12601
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12601&view=rev
Author:   snaiperis
Date:     2009-09-22 14:09:59 +0000 (Tue, 22 Sep 2009)

Log Message:
-----------
2009-09-22 17:10 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
  * contrib/hbmemio/memio.c
    + added cleanup on application exit
    * some warnings pacified

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbmemio/memio.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From maurilio.longo at libero.it  Tue Sep 22 10:26:11 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Sep 22 10:26:18 2009
Subject: [Harbour] OS/2 .dll
Message-ID: <4AB8DE83.90603@libero.it>

Hi,

Ok, I'm able to build .dlls on OS/2 using gcc and they work since build 12599
(I've tested hbtest.exe only, but if it works everything should work as well).

I still have a question though: on OS/2 .dll names are restricted to 8.3 only.
So, how can I name harbour .dlls?

Best regards.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From druzus at acn.waw.pl  Tue Sep 22 10:48:39 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 22 10:48:45 2009
Subject: [Harbour] haiku fallout
In-Reply-To: <CD35E2F7-3FE6-45C0-8A78-7FC3EB93992C@syenar.hu>
References: <alpine.GSO.2.00.0909201933500.17989@dawn.royalcomp.hu>
	<20090920182743.GA12180@uran.home.aster.pl>
	<098C59B2-80EC-4EC2-8917-74C9D248A077@syenar.hu>
	<20090922132020.GA31776@uran.home.aster.pl>
	<CD35E2F7-3FE6-45C0-8A78-7FC3EB93992C@syenar.hu>
Message-ID: <20090922144839.GA8367@uran.home.aster.pl>

On Tue, 22 Sep 2009, Szak?ts Viktor wrote:

Hi,

> Just some quick reaction, I have to go now.
>> and HB_ETC_INSTALL or HB_CNF_INSTALL.
> What is the difference between ETC and CNF?
> If possible IMO we should not differentiate between
> types of config files.

These are my propositions for our new envvar name.
Chose one of them. Personally I preffer the 1-st one.

>>            /lib/
>>                <native_harbour_libraries>
>>               [/<addon_harbour_lib>/
>>                                     <native_addon_libraries>]
>>               [/<platform>/<cc>/
>>                                <platform_cc_libraries>]
> I suppose 'contrib' counts as 'addon'.

No, I was thinking about 3-rd party packages which may use many libraries.
Contrib libraries only in some chosen cases if for some reasons we decide
they should be separated.

Please also note that such subdirectory exists in include.
I do not think that people will like to update existing code and modify
paths in #include directives but for new 3-rd party / add-on libraries
it seems to be very interesting proposition which allows to resolve
possible name conflicts by using directory with library name in included
files, i.e. instead of:
   #include <header.ch>
user can use:
   #include <lib/header.ch>

or use -I switch to give higher priority to some alternative files
overloading our own ones.

> IMO and if system rules allow it, we should put native
> libs also under plat/cc structure, since generally speaking
> we may support multiple compilers with incompatible lib formats
> (like watcom and gcc, or anything else in the future).
> Plus there must a plat/cc structure also below each addon.

I do not think it's necessary. The default platform libraries always
have to exists and shared libraries from this dir have to be linked
with system library directory so we can store them without plat/cc what
also nicely shows which binaries are platform native ones.
Please also remember that /<platform>/<cc>/ is only some type of
proposition not suggested form because it's not enough. In some cases
it will be necessary to use sth different, i.e. I can have only linux/gcc
builds but using different ABI or CPUs. The problem is how to bound such
different configurations with hbmk2. For me ideal situation will be single
parameter which allows me to chose library subdirectory and hbmk.cfg file,
i.e. working on FreeBSD I'm using -arch=linux-x86_64 and hbmk2 sets
default library directory to <pref>/lib/linux-x86_64/ and then looks
in this directory for hbmk.cfg file to read default configuration.
FHS allows to store some type of configuration/data files used in
readonly mode in 'lib' directories.

>> The shard library naming convention
>> ===================================
>> @ - softlink
>> * - hardlink
>>
>>   @<pref><name><epoc>.<ext> ->
>>   @<pref><name><epoc>.<ext>.<major> ->
>>   @<pref><name><epoc>.<ext>.<major>.<minor> ->
>>   *<pref><name><epoc>.<ext>.<major>.<minor>.<rev>
>>
>>   <pref> is library name prefix,
>>          'lib' in supported by Harbour *nix systems
>>   <name> is base name, 'harbour' in our case
>>   <epoc> is used to mark new or alternative branches, we are using
>>          'mt' to mark alternative libraries with MT support.
>>   <ext> is library extension,
>>         'dylib'  in Darwin,
>>         'sl'     in HP-UX,
>>         'so'     in others.
>>   <major>, <minor>, <rev> - version numbers (i.e. 2.0.0 for current SVN).
>>
>>   i.e.:
>>      @libharbour.so ->
>>      @libharbour.so.2 ->
>>      @libharbour.so.2.0 ->
>>      *libharbour.so.2.0.0
>>
>> Real/suggested usage in supported *nixes:
>>   Linux, Solaris, Haiku, NetBSD:
>>      @<pref><name><epoc>.<ext> -> *
>>      @<pref><name><epoc>.<ext>.<major> ->
>>      *<pref><name><epoc>.<ext>.<major>.<minor>.<rev>
>>   FreeBSD (some packages use Linux like form):
>>      @<pref><name><epoc>.<ext> ->
>>      *<pref><name><epoc>.<ext>.<major>
>>   OpenBsd:
>>      *<pref><name><epoc>.<ext>.<major>.<minor>
>>
>>   Darwin???
> On darwin the current naming seems to be the accepted one,
> although some libs use '-' to separate name form version no.
> [ I've just browsed my /usr/lib dir for above conclusion,
> so I don't know what's the official standpoint here, anyway
> I'd assumed the extension is fixed. ]

Thanks for the info, so it's in form like:
      @<pref><name><epoc>.<ext> ->
      @<pref><name><epoc>.<major>.<ext> ->
      @<pref><name><epoc>.<major>.<minor>.<ext> ->
      *<pref><name><epoc>.<major>.<minor>.<rev>.<ext>

which is not compatible with other *nixes.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Sep 22 10:58:11 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 22 10:58:18 2009
Subject: [Harbour] OS/2 .dll
In-Reply-To: <4AB8DE83.90603@libero.it>
References: <4AB8DE83.90603@libero.it>
Message-ID: <20090922145811.GB8367@uran.home.aster.pl>

On Tue, 22 Sep 2009, Maurilio Longo wrote:

Hi,

> Ok, I'm able to build .dlls on OS/2 using gcc and they work since build 12599
> (I've tested hbtest.exe only, but if it works everything should work as well).

Thank you very much.

> I still have a question though: on OS/2 .dll names are restricted to 8.3 only.
> So, how can I name harbour .dlls?

harbour.dll :-)

BTW now we have GNU make for OS2 working with long internal
    definitions so I think we should remove FOR %I command loops
    from config/os2/gcc.cf and config/common/watcom.cf added as
    workaround for this problems and restore previous versions.
    Please remember that these rules causes that old files in given
    directory are added to library without any validation if they
    belongs to given library or not, i.e. they forced other
    workarounds to not add hbpp.obj to hbpp library.

best regards,
Przemek
From maurilio.longo at libero.it  Tue Sep 22 11:09:25 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Sep 22 11:09:33 2009
Subject: [Harbour] OS/2 .dll
In-Reply-To: <20090922145811.GB8367@uran.home.aster.pl>
References: <4AB8DE83.90603@libero.it>
	<20090922145811.GB8367@uran.home.aster.pl>
Message-ID: <4AB8E8A5.7050206@libero.it>

Przemyslaw Czerpak wrote:
>> I still have a question though: on OS/2 .dll names are restricted to 8.3 only.
>> So, how can I name harbour .dlls?
> 
> harbour.dll :-)

Sure, the st one, but the mt? I was thinking about harbor.dll and
harbormt.dll, that is with the american spelling of harbour.

Otherwise I could use harbour and harbourm.

> 
> BTW now we have GNU make for OS2 working with long internal
>     definitions so I think we should remove FOR %I command loops
>     from config/os2/gcc.cf and config/common/watcom.cf added as
>     workaround for this problems and restore previous versions.
>     Please remember that these rules causes that old files in given
>     directory are added to library without any validation if they
>     belongs to given library or not, i.e. they forced other
>     workarounds to not add hbpp.obj to hbpp library.
> 

Sure; I'll update mine as soon as I've resolved the naming issue, then we can
try with different rules.

Maurilio.


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Tue Sep 22 12:23:19 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 22 12:23:30 2009
Subject: [Harbour] hbmemio issue
In-Reply-To: <4AB8D43F.3060607@dbtopas.lt>
References: <1AFCE99C-AC9C-4384-B540-4F34FB4A64AE@syenar.hu>
	<4AB8D43F.3060607@dbtopas.lt>
Message-ID: <10EBF46A-6DF8-4275-AA86-FBC93EB5B5CE@syenar.hu>

> Viktor Szak?ts wrote:
>> My very first problem towards implementing hbmemio
>> as a replacement for temp tables is that I'd need
>> to create *unique* "filenames".
>> BTW the same problem goes to hbnetio, where I sometimes
>> need to create unique temp files (which later get renamed
>> to final table name)
>> How to do that?
>
> In Windows and real file system I use GetTempFileName() WinAPI, but  
> I do not like this way. Some trivial solutions like
>  HB_TTOS(HB_DATETIME()) + LTRIM(STR(HB_RANDOM(999999999999), 12, 0))
> usually is also acceptable, but it would be nice to have more  
> beautiful way to do that.

Yes, with real FS it's okay with our APIs, but
such date/time/random based solution aren't rock
solid (uniqueness isn't guaranteed), so indeed
something better would be good.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 22 12:25:18 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 22 12:25:27 2009
Subject: [Harbour] OS/2 .dll
In-Reply-To: <4AB8DE83.90603@libero.it>
References: <4AB8DE83.90603@libero.it>
Message-ID: <019FC70D-4125-45DB-A8A1-254BAEF10D8A@syenar.hu>

> Ok, I'm able to build .dlls on OS/2 using gcc and they work since  
> build 12599
> (I've tested hbtest.exe only, but if it works everything should work  
> as well).
>
> I still have a question though: on OS/2 .dll names are restricted to  
> 8.3 only.
> So, how can I name harbour .dlls?

harbour.dll
harbourm.dll

Like in MS-DOS.

Brgds,
Viktor

From harbour.01 at syenar.hu  Tue Sep 22 12:34:14 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 22 12:34:24 2009
Subject: [Harbour] build 12599 and os/2
In-Reply-To: <20090922132657.GA9672@uran.home.aster.pl>
References: <4AB8C3ED.80303@libero.it> <4AB8C4F7.9010300@libero.it>
	<70585D54-8996-4941-9ACA-53118BAE84AD@syenar.hu>
	<4AB8C9F0.60208@libero.it>
	<A21B49C7-E4DA-495C-9197-B601C27BD8FA@syenar.hu>
	<20090922132657.GA9672@uran.home.aster.pl>
Message-ID: <16A54909-C0D6-4CB0-870A-870F74E7FCF9@syenar.hu>

Hi Przemek,

> On Tue, 22 Sep 2009, Szak?ts Viktor wrote:
>>> writing it like this works ok
>>> ifneq ($(filter $(HB_BUILD_STRIP),all lib),)
>>>  ARSTRIP = ${HB_CCPATH}${HB_CCPREFIX}strip -S $(LIB_DIR)/$@
>>> else
>>>  ARSTRIP = @$(ECHO) did not strip $(LIB_DIR)/$@
>>> endif
>> hm ;) can't we use something which doesn't produce any output?
>> I guess plain empty $(ECHO) will not work unless we redefine
>> it to GNU version.
>
> What about removing ARSTRIP from create_library and using sth like:
>
>   ifneq ($(filter $(HB_BUILD_STRIP),all lib),)
>      ARSTRIP = & ${HB_CCPATH}${HB_CCPREFIX}strip -S $(LIB_DIR)/$@
>   endif
>
>   AR_RULE = $(create_library) $(ARSTRIP) & $(RM) __lib__.tmp

Would this work also with MS-DOS shells? (we have the same
problem there probably)

Brgds,
Viktor

From M.Horodyski at pzuzycie.com.pl  Tue Sep 22 12:41:20 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Tue Sep 22 12:41:30 2009
Subject: [Harbour] MS SQL and ODBC.
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B7F8@PINK.zycie.pzu>

I'm try to connect to MS SQL Serwer with code :

*------------
Local rdd 
Cls
rdd := RDDSETDEFAULT( "SQLMIX" )
RDDINFO( 1001, { "ODBC", "Driver={SQL
Server};Server=MSSQL.alias.firma;Database=FIRMY;Trusted_Connection=yes;"
} )
DBUSEAREA( .T., "SQLMIX", "select ID_KLIENT, NAZWA from KLIENT where
nazwa like '%ZAKLAD%'", "CBKI")
RDDSETDEFAULT( rdd)
? Alias()
? "DB struct:", HB_VALTOEXP( DBSTRUCT() )
*------------


And app crash in dbusearea() with :

oErr:severity_____         2
oErr:osCode_______     65527
oErr:subsystem()__SDDODBC
oErr:subCode______      1902
oErr:description__Invalid field type
oErr:filename_____
oErr:operation____select ID_KLIENT, NAZWA from KLIENT where nazwa like
'%ZAKLAD%'
oErr:genCode______        32
oErr:args_________U

Invalid field type is NAZWA.
I can open this select with :

"select id_klient from klient where ...."

Id_klient is numeric, nazwa is varchar.
Can anybody check this ?

And another question : why I must change default rdd before :
    RDDINFO( 1001, { "ODBC", "Driv ...
When I don't make this, app is crashed.


Regards,
Marek Horodyski
From vszakats at users.sourceforge.net  Tue Sep 22 12:52:32 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue Sep 22 12:52:39 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12602] trunk/harbour
Message-ID: <E1Mq8bQ-00076d-FO@3kljzd1.ch3.sourceforge.com>

Revision: 12602
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12602&view=rev
Author:   vszakats
Date:     2009-09-22 16:52:31 +0000 (Tue, 22 Sep 2009)

Log Message:
-----------
2009-09-22 18:51 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
  * config/global.mk
    ! Changed .dll names for OS/2 to be the same as in MS-DOS:
      harbour/harbourm. (.dll names in OS/2 are limited to 8.3)

  * config/dos/djgpp.mk
    ! Attempt to fix empty line problem when stripping isn't requested.
      Something better would be good here.

  * config/os2/gcc.mk
    ! Fixed empty line problem when stripping isn't requested.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/dos/djgpp.mk
    trunk/harbour/config/global.mk
    trunk/harbour/config/os2/gcc.mk
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dbtopas at dbtopas.lt  Tue Sep 22 13:04:25 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Sep 22 13:05:19 2009
Subject: [Harbour] MS SQL and ODBC.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B7F8@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B7F8@PINK.zycie.pzu>
Message-ID: <4AB90399.9090802@dbtopas.lt>

Hi,


Horodyski Marek (PZUZ) wrote:
> I'm try to connect to MS SQL Serwer with code :
  > And app crash in dbusearea() with :
> 
> oErr:severity_____         2
> oErr:osCode_______     65527
> oErr:subsystem()__SDDODBC
> oErr:subCode______      1902
> oErr:description__Invalid field type
> oErr:filename_____
> oErr:operation____select ID_KLIENT, NAZWA from KLIENT where nazwa like
> '%ZAKLAD%'
> oErr:genCode______        32
> oErr:args_________U
> 
> Invalid field type is NAZWA.
> I can open this select with :
> 
> "select id_klient from klient where ...."
> 
> Id_klient is numeric, nazwa is varchar.
> Can anybody check this ?

I can not check because I do not have MS SQL, but to make error more 
informative, I've passed field type to :osCode. You error log shows it 
is value 65527. Since it is USHORT value, it can also mean -9, if it is 
signed. I can not find nor -9 neither 65527 field type sql.h. Varchar is 
defined equal to 12. More tests/docs required.

> And another question : why I must change default rdd before :
>     RDDINFO( 1001, { "ODBC", "Driv ...
> When I don't make this, app is crashed.

Because RDDINFO() uses default RDD by default. You can use 3rd parameter 
to specify RDD, if you do not to change default.


Regards,
Mindaugas
From harbour.01 at syenar.hu  Tue Sep 22 13:12:29 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 22 13:12:39 2009
Subject: [Harbour] haiku fallout
In-Reply-To: <20090922144839.GA8367@uran.home.aster.pl>
References: <alpine.GSO.2.00.0909201933500.17989@dawn.royalcomp.hu>
	<20090920182743.GA12180@uran.home.aster.pl>
	<098C59B2-80EC-4EC2-8917-74C9D248A077@syenar.hu>
	<20090922132020.GA31776@uran.home.aster.pl>
	<CD35E2F7-3FE6-45C0-8A78-7FC3EB93992C@syenar.hu>
	<20090922144839.GA8367@uran.home.aster.pl>
Message-ID: <EA8C14FC-E993-434C-BBEF-7D5673D73EF4@syenar.hu>

>> Just some quick reaction, I have to go now.
>>> and HB_ETC_INSTALL or HB_CNF_INSTALL.
>> What is the difference between ETC and CNF?
>> If possible IMO we should not differentiate between
>> types of config files.
>
> These are my propositions for our new envvar name.
> Chose one of them. Personally I preffer the 1-st one.

I'd also prefer ETC.

>>>           /lib/
>>>               <native_harbour_libraries>
>>>              [/<addon_harbour_lib>/
>>>                                    <native_addon_libraries>]
>>>              [/<platform>/<cc>/
>>>                               <platform_cc_libraries>]
>> I suppose 'contrib' counts as 'addon'.
>
> No, I was thinking about 3-rd party packages which may use many  
> libraries.
> Contrib libraries only in some chosen cases if for some reasons we  
> decide
> they should be separated.

I think it would go rather sooner than later as it starts
to become a problem to manage collisions and it's an important
step towards making contribs fully independent from core and
each other.

> Please also note that such subdirectory exists in include.

That's also needed, so it's good.

> I do not think that people will like to update existing code and  
> modify
> paths in #include directives but for new 3-rd party / add-on libraries
> it seems to be very interesting proposition which allows to resolve
> possible name conflicts by using directory with library name in  
> included
> files, i.e. instead of:
>   #include <header.ch>
> user can use:
>   #include <lib/header.ch>
>
> or use -I switch to give higher priority to some alternative files
> overloading our own ones.

This is also good, but I was thinking about something a little
different. When using hbmk2, it's now possible to refer to a given
"addon" (or contrib), via its .hbc file. Now in this .hbc file
there are settings which automatically setup required additional
lib and inc paths for that given component.

It's possible to setup simple .hbc search rules, so that they
are automatically found if placed according to some rules.

It works quite beautifully on non-*nix, but it doesn't when
libs/headers/docs are scattered around the system to
different base dirs.

Basically I'm looking for a way to implement something similar,
but for *nix systems.

Think of one contrib or addon as a "Harbour package" with libs,
headers, docs, examples, whatnot. Something like we have now
under /contrib/*/ dirs. It would be nice to handle them as one
package even in 'localized' form. Or at least provide it as an
option.

>> IMO and if system rules allow it, we should put native
>> libs also under plat/cc structure, since generally speaking
>> we may support multiple compilers with incompatible lib formats
>> (like watcom and gcc, or anything else in the future).
>> Plus there must a plat/cc structure also below each addon.
>
> I do not think it's necessary. The default platform libraries always
> have to exists and shared libraries from this dir have to be linked
> with system library directory so we can store them without plat/cc  
> what
> also nicely shows which binaries are platform native ones.
> Please also remember that /<platform>/<cc>/ is only some type of
> proposition not suggested form because it's not enough. In some cases
> it will be necessary to use sth different, i.e. I can have only  
> linux/gcc
> builds but using different ABI or CPUs. The problem is how to bound  
> such

It's called build name (HB_BUILD_NAME), and can be added as a 3rd
level above platform / compiler. It doesn't change fundamentals.

We can give a somewhat more distinctive name though.

> different configurations with hbmk2. For me ideal situation will be  
> single
> parameter which allows me to chose library subdirectory and hbmk.cfg  
> file,

I think for most users the best would be if they'd only choose the
target 'platform / compiler / name' and hbmk2 would automatically
know where to look for libs for that specific target.

> i.e. working on FreeBSD I'm using -arch=linux-x86_64 and hbmk2 sets
> default library directory to <pref>/lib/linux-x86_64/ and then looks
> in this directory for hbmk.cfg file to read default configuration.
> FHS allows to store some type of configuration/data files used in
> readonly mode in 'lib' directories.

That part is okay, but for me the notion of "native" isn't
something I like. In hbmk2 I don't really want to deal with what
is native and handle it differently than any other targets.
It creates all sorts of problems. (f.e. you have to move around
libs when copying a Harbour installation to another system,
or after you've upgraded your system to another ABI, f.e from
32-bit to 64-bit, given that 32-bit exes would otherwise still
run on 64-bit - as on Darwin f.e.)

We should also consider multi-host builds (similar to watcom compiler),
where we provide tools for multiple ABI or platforms installed on
one system. In this case which set of libs should be selected
as "native" ones? and how non-native tools would be able to decide
where to find those libs?

Note that such multi-host build is something I plan for
non-*nix, so we should possible try to support it on non-*nix.
I can even imagine a watcom-like layout which just works on
multiple operating systems if shared from a network drive. Here
work means it can run on multiples OSes and it can create
targets for all those targets. The key here is layout of the
libs.

So, unless it's not outright illegal on *nix systems, a generic
layout, which is independent from the actual "native" build and
without exceptions would be IMO much better.

>
>>> The shard library naming convention
>>> ===================================
>>> @ - softlink
>>> * - hardlink
>>>
>>>  @<pref><name><epoc>.<ext> ->
>>>  @<pref><name><epoc>.<ext>.<major> ->
>>>  @<pref><name><epoc>.<ext>.<major>.<minor> ->
>>>  *<pref><name><epoc>.<ext>.<major>.<minor>.<rev>
>>>
>>>  <pref> is library name prefix,
>>>         'lib' in supported by Harbour *nix systems
>>>  <name> is base name, 'harbour' in our case
>>>  <epoc> is used to mark new or alternative branches, we are using
>>>         'mt' to mark alternative libraries with MT support.
>>>  <ext> is library extension,
>>>        'dylib'  in Darwin,
>>>        'sl'     in HP-UX,
>>>        'so'     in others.
>>>  <major>, <minor>, <rev> - version numbers (i.e. 2.0.0 for current  
>>> SVN).
>>>
>>>  i.e.:
>>>     @libharbour.so ->
>>>     @libharbour.so.2 ->
>>>     @libharbour.so.2.0 ->
>>>     *libharbour.so.2.0.0
>>>
>>> Real/suggested usage in supported *nixes:
>>>  Linux, Solaris, Haiku, NetBSD:
>>>     @<pref><name><epoc>.<ext> -> *
>>>     @<pref><name><epoc>.<ext>.<major> ->
>>>     *<pref><name><epoc>.<ext>.<major>.<minor>.<rev>
>>>  FreeBSD (some packages use Linux like form):
>>>     @<pref><name><epoc>.<ext> ->
>>>     *<pref><name><epoc>.<ext>.<major>
>>>  OpenBsd:
>>>     *<pref><name><epoc>.<ext>.<major>.<minor>
>>>
>>>  Darwin???
>> On darwin the current naming seems to be the accepted one,
>> although some libs use '-' to separate name form version no.
>> [ I've just browsed my /usr/lib dir for above conclusion,
>> so I don't know what's the official standpoint here, anyway
>> I'd assumed the extension is fixed. ]
>
> Thanks for the info, so it's in form like:
>      @<pref><name><epoc>.<ext> ->
>      @<pref><name><epoc>.<major>.<ext> ->
>      @<pref><name><epoc>.<major>.<minor>.<ext> ->
>      *<pref><name><epoc>.<major>.<minor>.<rev>.<ext>

Yes.

> which is not compatible with other *nixes.

Possible, but they keep standard extensions, which makes sense.

Brgds,
Viktor

From labitas at gmail.com  Tue Sep 22 13:25:40 2009
From: labitas at gmail.com (Saulius Zrelskis)
Date: Tue Sep 22 13:25:48 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12601] trunk/harbour
In-Reply-To: <E1Mq648-00047k-Kf@bj8yhf1.ch3.sourceforge.com>
References: <E1Mq648-00047k-Kf@bj8yhf1.ch3.sourceforge.com>
Message-ID: <2386af1b0909221025g697cf355l1d36c7380b6b3b41@mail.gmail.com>

Hi,

Now in previous sample dbDrop() returns .F. for Mem I/O.
Is this expected?

Best regards,
Saulius
From maurilio.longo at libero.it  Tue Sep 22 13:27:00 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Sep 22 13:27:14 2009
Subject: [Harbour] build 12599 and os/2
In-Reply-To: <4AB8D390.6070008@libero.it>
References: <4AB8C3ED.80303@libero.it>	<4AB8C4F7.9010300@libero.it>	<70585D54-8996-4941-9ACA-53118BAE84AD@syenar.hu>	<4AB8C9F0.60208@libero.it>	<A21B49C7-E4DA-495C-9197-B601C27BD8FA@syenar.hu>	<20090922132657.GA9672@uran.home.aster.pl>
	<4AB8D390.6070008@libero.it>
Message-ID: <4AB908E4.2090102@libero.it>

I think, I'm still testing, that ARSTRIP has to start with an '&' which is
command separator in OS/2.

Maurilio.


Maurilio Longo wrote:
> Przemyslaw,
> 
> Przemyslaw Czerpak wrote:
>> What about removing ARSTRIP from create_library and using sth like:
>>
>>    ifneq ($(filter $(HB_BUILD_STRIP),all lib),)
>>       ARSTRIP = & ${HB_CCPATH}${HB_CCPREFIX}strip -S $(LIB_DIR)/$@
>>    endif
>>
>>    AR_RULE = $(create_library) $(ARSTRIP) & $(RM) __lib__.tmp
>>
> ok, works with ARSTRIP empty, I'll try next to see if it works with it defined
> as well.
> 
> Maurilio.
> 
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From antonioharbour at gmail.com  Tue Sep 22 13:31:06 2009
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Sep 22 13:31:14 2009
Subject: [Harbour] Possible OLE bug
Message-ID: <9471afc80909221031k30ce629ftf9f153535ccba88f@mail.gmail.com>

Viktor,

This code in olecore.c (hb_oleVariantToItem()) fails if the string has
embedded zeroes, as hb_itemPutCPtr() uses strlen() to calculate the
string length.

      case VT_BSTR:
      {
         char* szString = WideToAnsi( pVariant->n1.n2.n3.bstrVal );
         hb_itemPutCPtr( pItem, szString );
         break;
      }

      case VT_BSTR | VT_BYREF:
      {
         char* szString = WideToAnsi( *pVariant->n1.n2.n3.pbstrVal );
         hb_itemPutCPtr( pItem, szString );
         break;
      }

We appreciate your comments, thanks

best regards,

Antonio
From info at fsgiudice.com  Tue Sep 22 14:34:54 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Sep 22 14:35:04 2009
Subject: [Harbour] Error building last SVN
Message-ID: <4AB918CE.6010605@fsgiudice.com>

Hi Viktor,

I get this error building last SVN with mingw (msys + mingw on Vista)
2009-09-22 18:51 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)


! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 /bin/sh clean install
! HB_USER_CFLAGS: -DHB_LEGACY_OFF -DHB_FM_STATISTICS_OFF 
-DHB_FM_DLMT_ALLOC -DHB_GC_AUTO -DHB_HASH_MSG_ITEMS
! HB_INSTALL_PREFIX: /j/cvs/harbour_mingw
! HB_BUILD_DLL: no
! HB_BUILD_SHARED: no
! HB_BUILD_DEBUG: no
! HB_HOST_PLAT: win (x86)  HB_SHELL: sh
! HB_PLATFORM: win (x86) (autodetected)
! HB_COMPILER: mingw
! Component: 'zlib' found in /j/cvs/harbourSVN_trunk/external/zlib (local)
! Component: 'pcre' found in /j/cvs/harbourSVN_trunk/external/pcre (local)
! Component: 'openssl' not found
! Component: 'gpm' not supported on win platform
! Component: 'slang' not found
! Component: 'curses' not found
! Component: 'x11' not found
! Component: 'wattcp/watt-32' not supported on win platform
config/global.mk:1421: *** missing `endif'.  Stop.

Best Regards,
Francesco
From lorenzo.fiorini at gmail.com  Tue Sep 22 15:01:32 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep 22 15:01:38 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12599] trunk/harbour
In-Reply-To: <20090922112705.GC8038@uran.home.aster.pl>
References: <E1Mq34V-0008Af-VG@3kljzd1.ch3.sourceforge.com>
	<9257026e0909220416k23b15486ga6ec3872b68e698a@mail.gmail.com>
	<20090922112705.GC8038@uran.home.aster.pl>
Message-ID: <9257026e0909221201yd414b19y10d2ec99c2ace7f7@mail.gmail.com>

On Tue, Sep 22, 2009 at 1:27 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> I thought that ChangeLog entry is clear enough.
> Have you used Harbour CDP with accented or multibyte characters?
> If yes then you have to recreated all character indexes.

Sorry but I have multi-millions records tables, I need to carefully
plan the rebuild indexes.

I use codepages with accented ( at least we call them in such way )
but you didn't list them in the msg.

Here is my setup:

   REQUEST HB_CODEPAGE_ITISB
   REQUEST HB_CODEPAGE_ITISO
   REQUEST HB_CODEPAGE_IT850
   REQUEST HB_UTF8TOSTR
   HB_SETCODEPAGE( __CP_HOST__ )
   HB_SETTERMCP( __CP_TERM__, __CP_HOST__, TRUE )

I also still have C53b/Fivewin apps that work on the same files. Not
at the same site, Harbour apps are the next version of the same set of
applications.
Do I need to recreate the indexes when I switch between C53b/DBFCDX and Harbour?

best regards,
Lorenzo
From capelsoft at terra.es  Tue Sep 22 15:18:36 2009
From: capelsoft at terra.es (=?iso-8859-1?Q?Jos=E9_Luis_Capel?=)
Date: Tue Sep 22 15:18:52 2009
Subject: [Harbour] Which pelles c to use?
Message-ID: <DEBC79F62A48439CA1C24D245E0A886A@BASELUNAR1>

Hi,

Which version of 32bits Pelles C can I use ?  5.xx 6.xx?

Brgs,
Jos? Luis Capel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090922/c2b6158c/attachment.html
From druzus at acn.waw.pl  Tue Sep 22 15:27:04 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 22 15:27:11 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12599] trunk/harbour
In-Reply-To: <9257026e0909221201yd414b19y10d2ec99c2ace7f7@mail.gmail.com>
References: <E1Mq34V-0008Af-VG@3kljzd1.ch3.sourceforge.com>
	<9257026e0909220416k23b15486ga6ec3872b68e698a@mail.gmail.com>
	<20090922112705.GC8038@uran.home.aster.pl>
	<9257026e0909221201yd414b19y10d2ec99c2ace7f7@mail.gmail.com>
Message-ID: <20090922192704.GA30972@uran.home.aster.pl>

On Tue, 22 Sep 2009, Lorenzo Fiorini wrote:
> > I thought that ChangeLog entry is clear enough.
> > Have you used Harbour CDP with accented or multibyte characters?
> > If yes then you have to recreated all character indexes.
> Sorry but I have multi-millions records tables, I need to carefully
> plan the rebuild indexes.
> I use codepages with accented ( at least we call them in such way )

Sorry it's terminology/translation problem, probably Phil Krylov is
the best person to define precis names but for sure not me not me.
I thought about sorting method and our CPs definitions. Any of IT*
CPs has marked accented characters. To reduce confusions I listed
Harbour CPs which are defined with accented characters and multibyte
characters.

> but you didn't list them in the msg.
> Here is my setup:
>    REQUEST HB_CODEPAGE_ITISB
>    REQUEST HB_CODEPAGE_ITISO
>    REQUEST HB_CODEPAGE_IT850

None of above CPs uses accented characters which are not sorted using
simple byte weight just like normal letters. They also do not use
multibyte characters so nothing will change for them just like for
most of other CPs.

>    REQUEST HB_UTF8TOSTR
>    HB_SETCODEPAGE( __CP_HOST__ )
>    HB_SETTERMCP( __CP_TERM__, __CP_HOST__, TRUE )
> I also still have C53b/Fivewin apps that work on the same files. Not
> at the same site, Harbour apps are the next version of the same set of
> applications.
> Do I need to recreate the indexes when I switch between C53b/DBFCDX
> and Harbour?

The modification was only for CPs which cannot be Clipper compatible
because Clipper supports only simply byte weight sorting. Any Harbour
CPs using multibyte characters or accented characters which are not
sorted using the same rules as for any other character (simple character
weight) were not Clipper compatible and will never be so this modification
did not change anything in Clipper compatibility area. Things which
were not compatible because Clipper does not support extended national
sorting are still not compatible.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Tue Sep 22 15:51:57 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Sep 22 15:52:04 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12599] trunk/harbour
In-Reply-To: <20090922192704.GA30972@uran.home.aster.pl>
References: <E1Mq34V-0008Af-VG@3kljzd1.ch3.sourceforge.com>
	<9257026e0909220416k23b15486ga6ec3872b68e698a@mail.gmail.com>
	<20090922112705.GC8038@uran.home.aster.pl>
	<9257026e0909221201yd414b19y10d2ec99c2ace7f7@mail.gmail.com>
	<20090922192704.GA30972@uran.home.aster.pl>
Message-ID: <9257026e0909221251n36ed27e8r8d09690955dbabc@mail.gmail.com>

On Tue, Sep 22, 2009 at 9:27 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Sorry it's terminology/translation problem, probably Phil Krylov is
> the best person to define precis names but for sure not me not me.

I guessed it, sorry if I was "pedantic" :)

Using iso8859-15 terminology we call "accented" a char like
"E9/233 LATIN SMALL LETTER E WITH ACUTE".

best regards,
Lorenzo
From vszakats at users.sourceforge.net  Tue Sep 22 16:09:16 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue Sep 22 16:09:22 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12603] trunk/harbour
Message-ID: <E1MqBfo-00032A-7h@3kljzd1.ch3.sourceforge.com>

Revision: 12603
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12603&view=rev
Author:   vszakats
Date:     2009-09-22 20:09:15 +0000 (Tue, 22 Sep 2009)

Log Message:
-----------
2009-09-22 22:05 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/global.mk
    ! Typo

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/global.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From info at fsgiudice.com  Tue Sep 22 16:35:13 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Sep 22 16:35:27 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12603] trunk/harbour
In-Reply-To: <E1MqBfo-00032A-7h@3kljzd1.ch3.sourceforge.com>
References: <E1MqBfo-00032A-7h@3kljzd1.ch3.sourceforge.com>
Message-ID: <4AB93501.8090106@fsgiudice.com>

Hi Viktor,

Il 22/09/2009 22.09, vszakats@users.sourceforge.net ha scritto:
> Revision: 12603
>           http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12603&view=rev
> Author:   vszakats
> Date:     2009-09-22 20:09:15 +0000 (Tue, 22 Sep 2009)
> 

Thank you.

Best Regards,
Francesco
From snaiperis at users.sourceforge.net  Tue Sep 22 17:11:14 2009
From: snaiperis at users.sourceforge.net (snaiperis@users.sourceforge.net)
Date: Tue Sep 22 17:11:21 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12604] trunk/harbour
Message-ID: <E1MqCdm-0005Lz-Of@d5vjzd1.ch3.sourceforge.com>

Revision: 12604
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12604&view=rev
Author:   snaiperis
Date:     2009-09-22 21:11:13 +0000 (Tue, 22 Sep 2009)

Log Message:
-----------
2009-09-23 00:13 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
  * contrib/hbmemio/memio.c
    ! fixed typo in hb_memfsDelete()

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbmemio/memio.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dbtopas at dbtopas.lt  Tue Sep 22 17:11:19 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Sep 22 17:12:14 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12601] trunk/harbour
In-Reply-To: <2386af1b0909221025g697cf355l1d36c7380b6b3b41@mail.gmail.com>
References: <E1Mq648-00047k-Kf@bj8yhf1.ch3.sourceforge.com>
	<2386af1b0909221025g697cf355l1d36c7380b6b3b41@mail.gmail.com>
Message-ID: <4AB93D77.4010706@dbtopas.lt>

Saulius Zrelskis wrote:
> Now in previous sample dbDrop() returns .F. for Mem I/O.
> Is this expected?


Hi,


should be fixed now. Thank You.


Regards,
Mindaugas
From druzus at acn.waw.pl  Tue Sep 22 17:57:36 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 22 17:57:43 2009
Subject: [Harbour] "set deleted on"not workin anyore from last CVS
In-Reply-To: <a0d27ed4.1ca3ab1.14904f63.2ea6@mafact.com>
References: <9abefd.1ca3a9f.14163e60.4ae1@mafact.com>
	<a0d27ed4.1ca3ab1.14904f63.2ea6@mafact.com>
Message-ID: <20090922215736.GA6583@uran.home.aster.pl>

On Mon, 21 Sep 2009, J. Lefebvre wrote:

Hi,

> Using an older ADSRDD do not solve the problem . seem to be higher in RDD structure.
>> Compiling the very last cvs version I discovered 'SET DELETED ON' do not work anymore (using ADSRDD).
>> I see some modification around the 15-09-2009.
>> Any idea ?

I do not see any problems in ADS RDD behavior. SET DELETED ON/OFF works
as expected. I used code below to make tests.
If you think that sth does not work as it should then please create
self contain code example like the one below so we can see what's
the problem (if any).

best regards,
Przemek


/*** tst.prg ***/
request ADS
proc main()
   AdsSetServerType( 1 )
   rddSetDefault("ADSCDX")
   dbCreate( "_tst_", {{"F1","C",10,0},{"F2","D",8,0}} )
   use _tst_
   while lastrec() < 10
      dbAppend()
      if recno() % 3 != 0
         dbDelete()
      endif
   enddo
   ? "set delete on"
   set delete on
   dbEval({||qout(recno())})
   ? "set delete off"
   set delete off
   dbEval({||qout(recno())})
   close
   wait
   ? "reuse"
   use _tst_
   ? "set delete off"
   set delete off
   dbEval({||qout(recno())})
   ? "set delete on"
   set delete on
   dbEval({||qout(recno())})
   close
   wait
return
From antonioharbour at gmail.com  Tue Sep 22 20:25:31 2009
From: antonioharbour at gmail.com (Antonio Linares)
Date: Tue Sep 22 20:25:36 2009
Subject: [Harbour] Re: Possible OLE bug
In-Reply-To: <9471afc80909221031k30ce629ftf9f153535ccba88f@mail.gmail.com>
References: <9471afc80909221031k30ce629ftf9f153535ccba88f@mail.gmail.com>
Message-ID: <9471afc80909221725w2d1fac06q74db8c72716a0013@mail.gmail.com>

Proposed change:

      case VT_BSTR:
      {
         char* szString = WideToAnsi( pVariant->n1.n2.n3.bstrVal );
         hb_itemPutCLPtr( pItem, szString, WideCharToMultiByte(
CP_ACP, 0, pVariant->n1.n2.n3.bstrVal, -1, NULL, 0, NULL, NULL ) );
         break;
      }

best regards

Antonio

2009/9/22 Antonio Linares <antonioharbour@gmail.com>:
> Viktor,
>
> This code in olecore.c (hb_oleVariantToItem()) fails if the string has
> embedded zeroes, as hb_itemPutCPtr() uses strlen() to calculate the
> string length.
>
> ? ? ?case VT_BSTR:
> ? ? ?{
> ? ? ? ? char* szString = WideToAnsi( pVariant->n1.n2.n3.bstrVal );
> ? ? ? ? hb_itemPutCPtr( pItem, szString );
> ? ? ? ? break;
> ? ? ?}
>
> ? ? ?case VT_BSTR | VT_BYREF:
> ? ? ?{
> ? ? ? ? char* szString = WideToAnsi( *pVariant->n1.n2.n3.pbstrVal );
> ? ? ? ? hb_itemPutCPtr( pItem, szString );
> ? ? ? ? break;
> ? ? ?}
>
> We appreciate your comments, thanks
>
> best regards,
>
> Antonio
>
From harbour.01 at syenar.hu  Tue Sep 22 20:45:56 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 22 20:46:08 2009
Subject: [Harbour] Re: Possible OLE bug
In-Reply-To: <9471afc80909221725w2d1fac06q74db8c72716a0013@mail.gmail.com>
References: <9471afc80909221031k30ce629ftf9f153535ccba88f@mail.gmail.com>
	<9471afc80909221725w2d1fac06q74db8c72716a0013@mail.gmail.com>
Message-ID: <C45E0153-B707-496E-B57B-07088C9BF4AB@syenar.hu>

To all:

My dev PC (WinXP) died tonight, so don't expect frequent
SVN updates until the situation gets resolved.

I've also pulled Oracle access for the time being, pls
tell if it's needed and I try to make it online.

BTW, the patch looks wrong to me as WideToAnsi() isn't
passed any length data, so the conversion will cut the
string at the first zero byte and garbage will be
returned after that point by next hb_itemPutCLPtr()
call. Somehow data length should be pulled from pVariant
structure.

Brgds,
Viktor

On 2009 Sep 23, at 02:25, Antonio Linares wrote:

> Proposed change:
>
>      case VT_BSTR:
>      {
>         char* szString = WideToAnsi( pVariant->n1.n2.n3.bstrVal );
>         hb_itemPutCLPtr( pItem, szString, WideCharToMultiByte(
> CP_ACP, 0, pVariant->n1.n2.n3.bstrVal, -1, NULL, 0, NULL, NULL ) );
>         break;
>      }
>
> best regards
>
> Antonio
>
> 2009/9/22 Antonio Linares <antonioharbour@gmail.com>:
>> Viktor,
>>
>> This code in olecore.c (hb_oleVariantToItem()) fails if the string  
>> has
>> embedded zeroes, as hb_itemPutCPtr() uses strlen() to calculate the
>> string length.
>>
>>      case VT_BSTR:
>>      {
>>         char* szString = WideToAnsi( pVariant->n1.n2.n3.bstrVal );
>>         hb_itemPutCPtr( pItem, szString );
>>         break;
>>      }
>>
>>      case VT_BSTR | VT_BYREF:
>>      {
>>         char* szString = WideToAnsi( *pVariant->n1.n2.n3.pbstrVal );
>>         hb_itemPutCPtr( pItem, szString );
>>         break;
>>      }
>>
>> We appreciate your comments, thanks
>>
>> best regards,
>>
>> Antonio
>>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Tue Sep 22 20:59:52 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Sep 22 20:59:58 2009
Subject: [Harbour] Re: Possible OLE bug
In-Reply-To: <C45E0153-B707-496E-B57B-07088C9BF4AB@syenar.hu>
References: <9471afc80909221031k30ce629ftf9f153535ccba88f@mail.gmail.com>
	<9471afc80909221725w2d1fac06q74db8c72716a0013@mail.gmail.com>
	<C45E0153-B707-496E-B57B-07088C9BF4AB@syenar.hu>
Message-ID: <20090923005952.GA22448@uran.home.aster.pl>

On Wed, 23 Sep 2009, Szak?ts Viktor wrote:
> To all:
> My dev PC (WinXP) died tonight, so don't expect frequent
> SVN updates until the situation gets resolved.

Ups, hope you will resolve it soon.

> BTW, the patch looks wrong to me as WideToAnsi() isn't
> passed any length data, so the conversion will cut the
> string at the first zero byte and garbage will be
> returned after that point by next hb_itemPutCLPtr()
> call. Somehow data length should be pulled from pVariant
> structure.

Better check current Harbour SVN code. He simply asked about help in code
he copied from old Harbour SVN repository and is distributing himself.

best regards,
Przemek
From labitas at gmail.com  Wed Sep 23 01:50:03 2009
From: labitas at gmail.com (Saulius Zrelskis)
Date: Wed Sep 23 01:50:09 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12601] trunk/harbour
In-Reply-To: <4AB93D77.4010706@dbtopas.lt>
References: <E1Mq648-00047k-Kf@bj8yhf1.ch3.sourceforge.com>
	<2386af1b0909221025g697cf355l1d36c7380b6b3b41@mail.gmail.com>
	<4AB93D77.4010706@dbtopas.lt>
Message-ID: <2386af1b0909222250p2088bd2ucbb44a030c91e284@mail.gmail.com>

Hi, Mindaugai

> should be fixed now. Thank You.

Nooo, Thank You :)
Excellent job !

Best regards,
Saulius
From labitas at gmail.com  Wed Sep 23 03:23:31 2009
From: labitas at gmail.com (Saulius Zrelskis)
Date: Wed Sep 23 03:23:40 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12601] trunk/harbour
In-Reply-To: <4AB93D77.4010706@dbtopas.lt>
References: <E1Mq648-00047k-Kf@bj8yhf1.ch3.sourceforge.com>
	<2386af1b0909221025g697cf355l1d36c7380b6b3b41@mail.gmail.com>
	<4AB93D77.4010706@dbtopas.lt>
Message-ID: <2386af1b0909230023g51b4d18bw826b3c919bb75a19@mail.gmail.com>

Hi, Mindaugai

One small thing. Example below produces hb_out.log file:

Application Internal Error - D:\ERROR\test.exe
Terminated at: 2009.09.23 10:17:04
Unrecoverable error 9008: hb_xrealloc called with an invalid pointer
------------------------------------------------------------------------

while File I/O only message:
Error DBFNTX/1021  Data width error: F1

--<--
PROC main()
  FIELD F1

 DBCREATE("mem:test", {{"F1", "N", 5, 0}},, .T., "test")
 DBAPPEND()
 F1 := 100000
 DBCLOSEALL()
RETURN
-->--

Best regards,
Saulius
From harbour.01 at syenar.hu  Wed Sep 23 05:14:10 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 23 05:14:18 2009
Subject: [Harbour] dbDrop() question
Message-ID: <19A8EFC4-9047-4EA7-99BF-8831FF99EF26@syenar.hu>

Hi All,

Will dbDrop() also delete compound index and memo file if they are  
present?

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Sep 23 05:53:45 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 23 05:53:54 2009
Subject: [Harbour] dbDrop() question
In-Reply-To: <19A8EFC4-9047-4EA7-99BF-8831FF99EF26@syenar.hu>
References: <19A8EFC4-9047-4EA7-99BF-8831FF99EF26@syenar.hu>
Message-ID: <20090923095345.GA5681@uran.home.aster.pl>

On Wed, 23 Sep 2009, Szak?ts Viktor wrote:

Hi,

> Will dbDrop() also delete compound index and memo file if they are present?

dbDrop() deletes table, memofile and production index if they exist.

best regards,
Przemek
From harbour.01 at syenar.hu  Wed Sep 23 06:43:24 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 23 06:43:34 2009
Subject: [Harbour] dbDrop() question
In-Reply-To: <20090923095345.GA5681@uran.home.aster.pl>
References: <19A8EFC4-9047-4EA7-99BF-8831FF99EF26@syenar.hu>
	<20090923095345.GA5681@uran.home.aster.pl>
Message-ID: <23B4CCE3-8799-49EA-A509-B4B5CA368D40@syenar.hu>

Thank you Przemek.

Brgds,
Viktor

On 2009 Sep 23, at 11:53, Przemyslaw Czerpak wrote:

> On Wed, 23 Sep 2009, Szak?ts Viktor wrote:
>
> Hi,
>
>> Will dbDrop() also delete compound index and memo file if they are  
>> present?
>
> dbDrop() deletes table, memofile and production index if they exist.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From mhsabado at gmail.com  Wed Sep 23 06:58:53 2009
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Wed Sep 23 06:59:06 2009
Subject: [Harbour] TopBarMenu()
In-Reply-To: <4ab09f1b.8253f10a.6dd8.243eSMTPIN_ADDED@mx.google.com>
References: <4ab09f1b.8253f10a.6dd8.243eSMTPIN_ADDED@mx.google.com>
Message-ID: <4AB9FF6D.5050005@gmail.com>

Hi,

I just want to ask what lib should I link to use TopBarMenu()?

TIA,
Mario

From snaiperis at users.sourceforge.net  Wed Sep 23 07:33:17 2009
From: snaiperis at users.sourceforge.net (snaiperis@users.sourceforge.net)
Date: Wed Sep 23 07:33:25 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12605] trunk/harbour
Message-ID: <E1MqQ61-000790-4z@c3vjzd1.ch3.sourceforge.com>

Revision: 12605
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12605&view=rev
Author:   snaiperis
Date:     2009-09-23 11:33:00 +0000 (Wed, 23 Sep 2009)

Log Message:
-----------
2009-09-23 14:30 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
  * contrib/hbmemio/memio.c
    ! fixed cleanup code

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbmemio/memio.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dbtopas at dbtopas.lt  Wed Sep 23 07:32:53 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Sep 23 07:33:44 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12601] trunk/harbour
In-Reply-To: <2386af1b0909230023g51b4d18bw826b3c919bb75a19@mail.gmail.com>
References: <E1Mq648-00047k-Kf@bj8yhf1.ch3.sourceforge.com>	<2386af1b0909221025g697cf355l1d36c7380b6b3b41@mail.gmail.com>	<4AB93D77.4010706@dbtopas.lt>
	<2386af1b0909230023g51b4d18bw826b3c919bb75a19@mail.gmail.com>
Message-ID: <4ABA0765.7040509@dbtopas.lt>

Saulius Zrelskis wrote:
> One small thing. Example below produces hb_out.log file:
> 
> Application Internal Error - D:\ERROR\test.exe
> Terminated at: 2009.09.23 10:17:04
> Unrecoverable error 9008: hb_xrealloc called with an invalid pointer
> ------------------------------------------------------------------------
> 
> while File I/O only message:
> Error DBFNTX/1021  Data width error: F1
> 
> --<--
> PROC main()
>   FIELD F1
> 
>  DBCREATE("mem:test", {{"F1", "N", 5, 0}},, .T., "test")
>  DBAPPEND()
>  F1 := 100000
>  DBCLOSEALL()
> RETURN


Hi,


test above generates 123 error (Invalid name), because "mem:test" is not 
valid file name.
------------------------
C:\cawi32\lab\iod>test5.exe

Error DBFNTX/1004  Create error: mem:test.dbf (DOS Error 123)
Called from DBCREATE(0)
Called from MAIN(4)
------------------------
If I add "REQUEST HB_MEMIO", to force linking of memio driver, I get the 
same error, but no hb_out.log file.
------------------------
C:\cawi32\lab\iod>test5.exe

Error DBFNTX/1021  Data width error: F1
Called from MAIN(7)
Abnormal program termination
------------------------
Why I do not have hb_out.log???


Bug fixed. Thank, You! Actually two bytes in source code was changed. 
hb_vmAtExit -> hb_vmAtQuit :)


Regards,
Mindaugas
From dmacias at mail.udg.mx  Wed Sep 23 07:41:43 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Sep 23 07:42:08 2009
Subject: [Harbour] Harbour under OS/2 - eCS 12604
Message-ID: <4ABA0977.9040006@mail.udg.mx>

Build tests with current Harbour

  * $Id: ChangeLog 12604 2009-09-22 21:11:13Z snaiperis $
2009-09-23 00:13 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)

build fine with gcc433
Pending to adjust for harbour*.dll and gcc433

At first try it fail with:

----------------
[...]
gcc: ..........sourcevmobjos2gccrunner.o: No such file or directory
gcc: ..........sourcevmobjos2gccvm.o: No such file or directory
make[3]: *** [harbour.dll] Error 1
make[2]: *** [descend] Error 2
make[1]: *** [dynlib] Error 2
make: *** [source] Error 2
----------------

so I commented in config\os2\gcc.mk section from/to:
#DY := $(CC)
[...]
#DY_RULE = $(create_dynlib)


In second try it build fine and entirely (except .dll, of course) with
just well-known warnings, included below

David Macias


[E:\harbour909e\harbour]make -w           1>make_gnu.log
../../../sqlite3.c: In function 'sqlite3_os_init':
../../../sqlite3.c:21265: warning: initialization from incompatible
pointer type

../../../gtstd.c: In function 'hb_gt_std_ReadKey':
../../../gtstd.c:412: warning: unused variable 'TODO'



From dmacias at mail.udg.mx  Wed Sep 23 07:43:14 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Sep 23 07:43:50 2009
Subject: [Harbour] OS/2: library format
Message-ID: <4ABA09D2.4070200@mail.udg.mx>

Viktor, Maurilio, Przemek:

In previous messages I exposed details of Harbour build using gcc335,
gcc432, gcc433, gcc440

Since then I build and use Harbour with gcc433

Messages are with subject "Harbour under OS/2 - eCS  gcc" and they
started in 17 August 2009
They contain detailed info

Now I present a summary in order to include in current Harbour build process

Historically gcc for OS/2 used a.out format, due some limitations in old
times
Now can use OMF type, as OpenWatcom for OS/2 does

gcc335: can use a.out and OMF types
gcc432, gcc433, gcc440: use only OMF type due problem with emxbind

Harbour use only a.out format
If we want to use newer gcc's in OS/2 we must include support for OMF


To use OMF:

- Same make.exe
- Modified OpenWatcom wlink.exe available in
   ftp://ftp.netlabs.org/pub/gcc/wl-hll-r1.zip
  and located somewhere in PATH
- gcc335, gcc432, gcc433, gcc440

Environment variables:
=====================
  set EMXOMFLD_TYPE=WLINK
  set EMXOMFLD_LINKER=WL.EXE

harbour\config\os2\gcc.mk
=========================
LIB_EXT := .lib
CFLAGS := -Zomf

Replacement of define create_library (emxomfar.exe work different):
define create_library
    $(if $(wildcard $(subst /,$(DIRSEP),$(LIB_FILE))),@$(RM) $(subst
/,$(DIRSEP),$(LIB_FILE)),)
    for %i in ( *$(OBJ_EXT) ) do $(AR) $(ARFLAGS) $(HB_USER_AFLAGS)
-p128 r $(LIB_DIR)/$@ %i$(ECHOQUOTE)
endef

AR := $(HB_CCPATH)$(HB_CCPREFIX)emxomfar
AR_RULE = $(create_library) $(ARSTRIP)


harbour\utils\hbmk2\hbmk2.prg
=============================
// DAVID: cOpt_CompC := "-c"
cOpt_CompC := "-c -Zomf"

//DAVID: cOpt_Link := "{LO} {LA} {FL} {DL}"
cOpt_Link := "-Zomf {LO} {LA} {FL} {DL}"

// DAVID: cLibLibExt := ".a"
cLibLibExt := ".lib"

// DAVID: cBin_Lib := hbmk[ _HBMK_cCCPREFIX ] + "ar" + cCCEXT
cBin_Lib := hbmk[ _HBMK_cCCPREFIX ] + "emxomfar" + cCCEXT



After all, changes are minimal
Pending adjustment for .dll

We need some way to specify which format will be used in OS/2 gcc, at
least for gcc335
Default should be OMF as is supported for all os2-gcc compilers

My proposal is to use and environmental variable to choose code in
gcc.mk and hbmk2.prg
Something like HB_OS2_TCP32 which was included to choose "tcp/ip stack"
in OS/2

Note for Viktor: In current SVN there are not any reference to
HB_OS2_TCP32. It gone when make_gnu_os2.cmd was deleted
I still use it and maybe Maurilio will use it if upgrade his OS/2



Any suggestions, comments ?


David Macias



From maurilio.longo at libero.it  Wed Sep 23 07:50:28 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Sep 23 07:50:38 2009
Subject: [Harbour] bld 12605 and OS/2
Message-ID: <4ABA0B84.10900@libero.it>

Hi Viktor,

a make clean, on OS/2 with GCC, does not remove .dll files nor their import
libraries. Looking at globsh.mk I don't see any reference to .dll, while it
deletes .exp (??), .tds (watcom compiler?) or .def files explicitly.

Any idea? Do I have to add .dll explicitly? And what about .a import libraries.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Wed Sep 23 08:12:15 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Sep 23 08:12:22 2009
Subject: [Harbour] OS/2: library format
In-Reply-To: <4ABA09D2.4070200@mail.udg.mx>
References: <4ABA09D2.4070200@mail.udg.mx>
Message-ID: <4ABA109F.4050201@libero.it>

David,

as I said, right now, I can barely find the time to keep building harbour with
my toolchain.

GCC 4.x is still beta (the OS/2 port, at least) and I don't think it gives any
real advantage to the code.

So, IMHO, we should use our very limited resources (and Viktor and Przemyslaw
willingness to help us) to keep everything working. Even adding watcom
compiler is, IMHO, a waste of time/resources.

Best regards.

Maurilio.


David Arturo Macias Corona wrote:
> Viktor, Maurilio, Przemek:
> 
> In previous messages I exposed details of Harbour build using gcc335,
> gcc432, gcc433, gcc440
> 
> Since then I build and use Harbour with gcc433
> 
> Messages are with subject "Harbour under OS/2 - eCS  gcc" and they
> started in 17 August 2009
> They contain detailed info
> 
> Now I present a summary in order to include in current Harbour build
> process
> 
> Historically gcc for OS/2 used a.out format, due some limitations in old
> times
> Now can use OMF type, as OpenWatcom for OS/2 does
> 
> gcc335: can use a.out and OMF types
> gcc432, gcc433, gcc440: use only OMF type due problem with emxbind
> 
> Harbour use only a.out format
> If we want to use newer gcc's in OS/2 we must include support for OMF
> 
> 
> To use OMF:
> 
> - Same make.exe
> - Modified OpenWatcom wlink.exe available in
>   ftp://ftp.netlabs.org/pub/gcc/wl-hll-r1.zip
>  and located somewhere in PATH
> - gcc335, gcc432, gcc433, gcc440
> 
> Environment variables:
> =====================
>  set EMXOMFLD_TYPE=WLINK
>  set EMXOMFLD_LINKER=WL.EXE
> 
> harbour\config\os2\gcc.mk
> =========================
> LIB_EXT := .lib
> CFLAGS := -Zomf
> 
> Replacement of define create_library (emxomfar.exe work different):
> define create_library
>    $(if $(wildcard $(subst /,$(DIRSEP),$(LIB_FILE))),@$(RM) $(subst
> /,$(DIRSEP),$(LIB_FILE)),)
>    for %i in ( *$(OBJ_EXT) ) do $(AR) $(ARFLAGS) $(HB_USER_AFLAGS)
> -p128 r $(LIB_DIR)/$@ %i$(ECHOQUOTE)
> endef
> 
> AR := $(HB_CCPATH)$(HB_CCPREFIX)emxomfar
> AR_RULE = $(create_library) $(ARSTRIP)
> 
> 
> harbour\utils\hbmk2\hbmk2.prg
> =============================
> // DAVID: cOpt_CompC := "-c"
> cOpt_CompC := "-c -Zomf"
> 
> //DAVID: cOpt_Link := "{LO} {LA} {FL} {DL}"
> cOpt_Link := "-Zomf {LO} {LA} {FL} {DL}"
> 
> // DAVID: cLibLibExt := ".a"
> cLibLibExt := ".lib"
> 
> // DAVID: cBin_Lib := hbmk[ _HBMK_cCCPREFIX ] + "ar" + cCCEXT
> cBin_Lib := hbmk[ _HBMK_cCCPREFIX ] + "emxomfar" + cCCEXT
> 
> 
> 
> After all, changes are minimal
> Pending adjustment for .dll
> 
> We need some way to specify which format will be used in OS/2 gcc, at
> least for gcc335
> Default should be OMF as is supported for all os2-gcc compilers
> 
> My proposal is to use and environmental variable to choose code in
> gcc.mk and hbmk2.prg
> Something like HB_OS2_TCP32 which was included to choose "tcp/ip stack"
> in OS/2
> 
> Note for Viktor: In current SVN there are not any reference to
> HB_OS2_TCP32. It gone when make_gnu_os2.cmd was deleted
> I still use it and maybe Maurilio will use it if upgrade his OS/2
> 
> 
> 
> Any suggestions, comments ?
> 
> 
> David Macias
> 
> 
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From mauriliolongo at users.sourceforge.net  Wed Sep 23 08:16:35 2009
From: mauriliolongo at users.sourceforge.net (mauriliolongo@users.sourceforge.net)
Date: Wed Sep 23 08:16:40 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12606] trunk/harbour
Message-ID: <E1MqQlv-0005yQ-5J@d5vjzd1.ch3.sourceforge.com>

Revision: 12606
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12606&view=rev
Author:   mauriliolongo
Date:     2009-09-23 12:16:32 +0000 (Wed, 23 Sep 2009)

Log Message:
-----------
2009-09-23 14:15 UTC+0200 Maurilio Longo (maurilio.longo@libero.it)
   * config/os2/gcc.mk
   * source/vm/Makefile
     * finalized OS/2 GCC .DLLs creation at build time.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/os2/gcc.mk
    trunk/harbour/source/vm/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Wed Sep 23 08:22:24 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 23 08:22:36 2009
Subject: [Harbour] bld 12605 and OS/2
In-Reply-To: <4ABA0B84.10900@libero.it>
References: <4ABA0B84.10900@libero.it>
Message-ID: <307FC7F7-1563-4D62-821B-F3B7B5D06838@syenar.hu>

Hi Maurilio,

> Hi Viktor,
>
> a make clean, on OS/2 with GCC, does not remove .dll files nor their  
> import
> libraries. Looking at globsh.mk I don't see any reference to .dll,  
> while it
> deletes .exp (??), .tds (watcom compiler?) or .def files explicitly.

.exp/.tds/.def is fine, on GNU Make level
shell support is generic and I don't think
it's a good idea to delete a few lines to
optimize it, it doesn't hurt, but this way
it's complete and feature-equal with other
shells.

> Any idea? Do I have to add .dll explicitly? And what about .a import  
> libraries.

Well, deletion was indeed missing, I just double checked.
Pls find attached fixed globsh.mk.

As for implib, I don't know, you'll have to find a way to
generate them from create rules in os2/gcc.mk. Either as
some sort of extra command/switch in current logic or an
extra command altogether. Target implib name is in $(IMP_FILE).

Brgds,
Viktor

-------------- next part --------------
A non-text attachment was scrubbed...
Name: globsh.mk
Type: application/octet-stream
Size: 7426 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090923/b9f94a74/globsh-0001.obj
-------------- next part --------------


From harbour.01 at syenar.hu  Wed Sep 23 08:26:19 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 23 08:26:28 2009
Subject: [Harbour] OS/2: library format
In-Reply-To: <4ABA109F.4050201@libero.it>
References: <4ABA09D2.4070200@mail.udg.mx> <4ABA109F.4050201@libero.it>
Message-ID: <06D50FB6-C6A5-4303-A371-438CF37AEC8B@syenar.hu>

> as I said, right now, I can barely find the time to keep building  
> harbour with
> my toolchain.
>
> GCC 4.x is still beta (the OS/2 port, at least) and I don't think it  
> gives any
> real advantage to the code.
>
> So, IMHO, we should use our very limited resources (and Viktor and  
> Przemyslaw
> willingness to help us) to keep everything working. Even adding watcom
> compiler is, IMHO, a waste of time/resources.

I thought so for some time, but in fact watcom is the *only*
way I (and probably Przemek, or anyone without OS/2) can
easily verify OS/2 builds. So for this purpose it's useful.
(extra features, like .dll support is rather just a challenge).
watcom also brings OS/2 cross-build feature to the unified
Windows release.

For native OS/2 users, it's probably not very useful though.

Brgds,
Viktor

From druzus at acn.waw.pl  Wed Sep 23 08:28:46 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 23 08:28:52 2009
Subject: [Harbour] OS/2: library format
In-Reply-To: <4ABA109F.4050201@libero.it>
References: <4ABA09D2.4070200@mail.udg.mx> <4ABA109F.4050201@libero.it>
Message-ID: <20090923122846.GA32380@uran.home.aster.pl>

On Wed, 23 Sep 2009, Maurilio Longo wrote:

Hi Maurilio and David,

I cannot say too much about OS2 real usage because I do not know this
system. IMHO it will be good to create doc/os2howto.txt file to collect
such information as David presented because it may be very useful in
some farther developing saving the time.

> So, IMHO, we should use our very limited resources (and Viktor and Przemyslaw
> willingness to help us) to keep everything working. Even adding watcom
> compiler is, IMHO, a waste of time/resources.

Here I do not agree. OS2 Watcom compiler support introduced one of the
most important future to keep OS2 port alive. Now we can make OS2 build
tests on Linux and Windows what greatly helps in code updating so we do
not have to ask you or David about verification of even single commit
to update the code after seeing your compile logs and repeat the request.
For me it was a milestone in Harbour OS2 support. Please also note that
OpenWatcom builds Harbour in C++ mode what also forces keeping the code
clean with valid casting.

best regards,
Przemek
From maurilio.longo at libero.it  Wed Sep 23 08:55:17 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Sep 23 08:55:25 2009
Subject: [Harbour] OS/2: library format
In-Reply-To: <20090923122846.GA32380@uran.home.aster.pl>
References: <4ABA09D2.4070200@mail.udg.mx> <4ABA109F.4050201@libero.it>
	<20090923122846.GA32380@uran.home.aster.pl>
Message-ID: <4ABA1AB5.3080309@libero.it>

Przemyslaw Czerpak wrote:
> On Wed, 23 Sep 2009, Maurilio Longo wrote:
> 
> Hi Maurilio and David,
> 
> I cannot say too much about OS2 real usage because I do not know this
> system. IMHO it will be good to create doc/os2howto.txt file to collect
> such information as David presented because it may be very useful in
> some farther developing saving the time.
> 
I think it is still used by some large oranization and a few
die-hard-first-time-users-bla-bla :) like David and me which still use it
since we're accustomed to it.

I don't have sales figures for www.ecomstation.com, though, but I don't think
there are more than a few thousand users world-wide still actively using it.

> Here I do not agree. OS2 Watcom compiler support introduced one of the
> most important future to keep OS2 port alive. Now we can make OS2 build
> tests on Linux and Windows what greatly helps in code updating so we do
> not have to ask you or David about verification of even single commit
> to update the code after seeing your compile logs and repeat the request.
> For me it was a milestone in Harbour OS2 support. Please also note that
> OpenWatcom builds Harbour in C++ mode what also forces keeping the code
> clean with valid casting.
> 
Thanks for the info, I stand corrected .)

Best regards.

Maurilio.


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From maurilio.longo at libero.it  Wed Sep 23 09:02:38 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Sep 23 09:02:46 2009
Subject: [Harbour] bld 12605 and OS/2
In-Reply-To: <307FC7F7-1563-4D62-821B-F3B7B5D06838@syenar.hu>
References: <4ABA0B84.10900@libero.it>
	<307FC7F7-1563-4D62-821B-F3B7B5D06838@syenar.hu>
Message-ID: <4ABA1C6E.3050707@libero.it>

Viktor Szak?ts wrote:
> 
> .exp/.tds/.def is fine, on GNU Make level
> shell support is generic and I don't think
> it's a good idea to delete a few lines to
> optimize it, it doesn't hurt, but this way
> it's complete and feature-equal with other
> shells.
> 

Yes, I did not want to remove them

>> Any idea? Do I have to add .dll explicitly? And what about .a import
>> libraries.
> 
> Well, deletion was indeed missing, I just double checked.
> Pls find attached fixed globsh.mk.
> 
Adding $(DYN_FILE_OS) $(IMP_FILE_OS) to the :clean rule of OS/2 cleans up
everything.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Wed Sep 23 09:11:25 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 23 09:18:57 2009
Subject: [Harbour] OS/2: library format
In-Reply-To: <4ABA1AB5.3080309@libero.it>
References: <4ABA09D2.4070200@mail.udg.mx> <4ABA109F.4050201@libero.it>
	<20090923122846.GA32380@uran.home.aster.pl>
	<4ABA1AB5.3080309@libero.it>
Message-ID: <E22A2416-E7C4-437C-8387-2396789E2264@syenar.hu>

> Przemyslaw Czerpak wrote:
>> On Wed, 23 Sep 2009, Maurilio Longo wrote:
>>
>> Hi Maurilio and David,
>>
>> I cannot say too much about OS2 real usage because I do not know this
>> system. IMHO it will be good to create doc/os2howto.txt file to  
>> collect
>> such information as David presented because it may be very useful in
>> some farther developing saving the time.
>>
> I think it is still used by some large oranization and a few
> die-hard-first-time-users-bla-bla :) like David and me which still  
> use it
> since we're accustomed to it.
>
> I don't have sales figures for www.ecomstation.com, though, but I  
> don't think
> there are more than a few thousand users world-wide still actively  
> using it.

Actually just in recent days a Hungarian OS/2 user approached
me for help. All I could do is point him to this list and INSTALL doc.

If there is anything more to say about OS/2/gcc build (like what  
packages
to download/install, if it's something special), I think it'd be good
to include it in INSTALL.

For beta tools and other non-mature / experimental stuff,
doc/howtoos2.txt is fine.

Brgds,
Viktor

From snaiperis at users.sourceforge.net  Wed Sep 23 09:29:54 2009
From: snaiperis at users.sourceforge.net (snaiperis@users.sourceforge.net)
Date: Wed Sep 23 09:30:00 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12607] trunk/harbour
Message-ID: <E1MqRus-0008Hr-6x@74yxhf1.ch3.sourceforge.com>

Revision: 12607
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12607&view=rev
Author:   snaiperis
Date:     2009-09-23 13:29:52 +0000 (Wed, 23 Sep 2009)

Log Message:
-----------
2009-09-23 16:30 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
  * contrib/hbmemio/memio.c
    ! added missing structure field initialization

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbmemio/memio.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From maurilio.longo at libero.it  Wed Sep 23 09:36:22 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Sep 23 09:36:30 2009
Subject: [Harbour] bin/postinst.cmd
Message-ID: <4ABA2456.7020106@libero.it>

Viktor,

postinst.cmd uses HB_INSTALL_PREFIX to decide where to copy some files, on
OS/2 HB_INSTALL_PREFIX gets set on startup to

	! HB_INSTALL_PREFIX automatically set to: E:\repository\harbour

which is where I have my copy of the svn repository, so in postinst.cmd this
test is false

	if "%HB_INSTALL_PREFIX%" == "" goto END

but the copy is from a file onto itself and fails

! Making e:\harbour\bin\hbmk.cfg...
SYS1184: The system cannot copy the file.

SYS1184: The system cannot copy the file.

SYS1184: The system cannot copy the file.

SYS1184: The system cannot copy the file.

make: *** [install] Error 4


Where should those files be copied to?

Best regards.

Maurilio.


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Wed Sep 23 09:48:04 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 23 09:48:13 2009
Subject: [Harbour] bin/postinst.cmd
In-Reply-To: <4ABA2456.7020106@libero.it>
References: <4ABA2456.7020106@libero.it>
Message-ID: <27427C4C-C84A-413B-A44B-E7323B407469@syenar.hu>

> postinst.cmd uses HB_INSTALL_PREFIX to decide where to copy some  
> files, on
> OS/2 HB_INSTALL_PREFIX gets set on startup to
>
> 	! HB_INSTALL_PREFIX automatically set to: E:\repository\harbour
>
> which is where I have my copy of the svn repository, so in  
> postinst.cmd this
> test is false
>
> 	if "%HB_INSTALL_PREFIX%" == "" goto END
>
> but the copy is from a file onto itself and fails
>
> ! Making e:\harbour\bin\hbmk.cfg...
> SYS1184: The system cannot copy the file.
>
> SYS1184: The system cannot copy the file.
>
> SYS1184: The system cannot copy the file.
>
> SYS1184: The system cannot copy the file.
>
> make: *** [install] Error 4
>
>
> Where should those files be copied to?

This is working as expected. HB_INSTALL_PREFIX is
set by default to the only dir we know: the current
SVN tree. In this case make system tries to copy some
files onto themselves.

If you want to install to somewhere else, just set
HB_INSTALL_PREFIX to a different dir of your choice.

What you can do here to avoid above errors is either
tame xcopy to not err in this case, or replace it
with an alternative which handles this situation
more gracefully, like 'copy'. Or os2cp.exe, by
calling config/os2cp.

Brgds,
Viktor

From maurilio.longo at libero.it  Wed Sep 23 09:56:00 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Sep 23 09:56:08 2009
Subject: [Harbour] bin/postinst.cmd
In-Reply-To: <27427C4C-C84A-413B-A44B-E7323B407469@syenar.hu>
References: <4ABA2456.7020106@libero.it>
	<27427C4C-C84A-413B-A44B-E7323B407469@syenar.hu>
Message-ID: <4ABA28F0.1030007@libero.it>

Viktor,

I'm sorry but I don't understand; I have set

HB_BIN_INSTALL
HB_LIB_INSTALL
HB_INC_INSTALL
HB_DOC_INSTALL

Where should this envvar point? Is it attached to the beginning (since it is a
 _PREFIX) of the various HB_???_INSTALL ones?

Maurilio.



Viktor Szak?ts wrote:
>> postinst.cmd uses HB_INSTALL_PREFIX to decide where to copy some
>> files, on
>> OS/2 HB_INSTALL_PREFIX gets set on startup to
>>
>>     ! HB_INSTALL_PREFIX automatically set to: E:\repository\harbour
>>
>> which is where I have my copy of the svn repository, so in
>> postinst.cmd this
>> test is false
>>
>>     if "%HB_INSTALL_PREFIX%" == "" goto END
>>
>> but the copy is from a file onto itself and fails
>>
>> ! Making e:\harbour\bin\hbmk.cfg...
>> SYS1184: The system cannot copy the file.
>>
>> SYS1184: The system cannot copy the file.
>>
>> SYS1184: The system cannot copy the file.
>>
>> SYS1184: The system cannot copy the file.
>>
>> make: *** [install] Error 4
>>
>>
>> Where should those files be copied to?
> 
> This is working as expected. HB_INSTALL_PREFIX is
> set by default to the only dir we know: the current
> SVN tree. In this case make system tries to copy some
> files onto themselves.
> 
> If you want to install to somewhere else, just set
> HB_INSTALL_PREFIX to a different dir of your choice.
> 
> What you can do here to avoid above errors is either
> tame xcopy to not err in this case, or replace it
> with an alternative which handles this situation
> more gracefully, like 'copy'. Or os2cp.exe, by
> calling config/os2cp.
> 
> Brgds,
> Viktor
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From dbtopas at dbtopas.lt  Wed Sep 23 10:03:37 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Sep 23 10:04:28 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12593] trunk/harbour
In-Reply-To: <4AB88DF5.7090704@dbtopas.lt>
References: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com>
	<4AB88DF5.7090704@dbtopas.lt>
Message-ID: <4ABA2AB9.4020101@dbtopas.lt>

Hi,


I want to share more test results after using memory FS in real project.

Report generation time (min:sec):
   Local disk database              3:07
   Network database                25:52
   Local disk database and MemFS    2:22 + 0:03 (copying to memory FS)
   Network database and MemFS       2:24 + 0:13 (copying to memory FS)


Regards,
Mindaugas
From harbour.01 at syenar.hu  Wed Sep 23 10:10:17 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 23 10:10:25 2009
Subject: [Harbour] bin/postinst.cmd
In-Reply-To: <4ABA28F0.1030007@libero.it>
References: <4ABA2456.7020106@libero.it>
	<27427C4C-C84A-413B-A44B-E7323B407469@syenar.hu>
	<4ABA28F0.1030007@libero.it>
Message-ID: <EB713F59-97FC-4D14-897D-CCB790EDEE33@syenar.hu>

> I'm sorry but I don't understand; I have set
>
> HB_BIN_INSTALL
> HB_LIB_INSTALL
> HB_INC_INSTALL
> HB_DOC_INSTALL

You only have to use above settings if you want to use
non-default dir structure inside HB_INSTALL_PREFIX.

Default structure is:
- <HB_INSTALL_PREFIX>/bin
- <HB_INSTALL_PREFIX>/lib/os2/gcc
- <HB_INSTALL_PREFIX>/include
- <HB_INSTALL_PREFIX>/doc
respectively.

> Where should this envvar point? Is it attached to the beginning  
> (since it is a
> _PREFIX) of the various HB_???_INSTALL ones?

Wherever you want to 'install' Harbour. F.e. I keep my
production build in C:\devl\hb20\ (HB_INSTALL_PREFIX=C:\devl\hb20),
and keep my development builds inside the SVN tree
(empty HB_INSTALL_PREFIX). In this latter case, you don't
even need to use 'install', simple 'make' will get you
the exact same result.

[ Note: On *nix the defaults are set differently. ]

Brgds,
Viktor

From M.Horodyski at pzuzycie.com.pl  Wed Sep 23 11:37:55 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Wed Sep 23 11:38:08 2009
Subject: [Harbour] MS SQL and ODBC.
In-Reply-To: <4AB90399.9090802@dbtopas.lt>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B7F8@PINK.zycie.pzu>
	<4AB90399.9090802@dbtopas.lt>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B99D@PINK.zycie.pzu>

>-----Original Message-----
>From: Mindaugas Kavaliauskas [mailto:dbtopas@dbtopas.lt] 
>Sent: Tuesday, September 22, 2009 7:04 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] MS SQL and ODBC.
>
>Hi,
[...]
>> Id_klient is numeric, nazwa is varchar.
>> Can anybody check this ?
>
>I can not check because I do not have MS SQL, but to make 
>error more informative, I've passed field type to :osCode. You 
>error log shows it is value 65527. Since it is USHORT value, 
>it can also mean -9, if it is signed. I can not find nor -9 
>neither 65527 field type sql.h. Varchar is defined equal to 
>12. More tests/docs required.

In attachment you can see type nvarchar( 300) in field NAZWA.
In this table I see types : int, nvarchar( n), nchar( n), char(n) and
tinyint.
In other tables are too : datetime, decimal( n, n), smallint, money,
bigint, float and varchar(n).
Was this information is enough?

Regards,
Marek Horodyski
-------------- next part --------------
A non-text attachment was scrubbed...
Name: data_types_on_sqlserver.jpg
Type: image/jpeg
Size: 12067 bytes
Desc: data_types_on_sqlserver.jpg
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090923/cb3a5efd/data_types_on_sqlserver.jpg
From M.Horodyski at pzuzycie.com.pl  Wed Sep 23 11:46:03 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Wed Sep 23 11:46:12 2009
Subject: [Harbour] MS SQL and ODBC.
In-Reply-To: <4AB90399.9090802@dbtopas.lt>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B7F8@PINK.zycie.pzu>
	<4AB90399.9090802@dbtopas.lt>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B99E@PINK.zycie.pzu>

>-----Original Message-----
>From: Mindaugas Kavaliauskas [mailto:dbtopas@dbtopas.lt] 
>Sent: Tuesday, September 22, 2009 7:04 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] MS SQL and ODBC.
>
>Hi,
>
 ...
>I can not check because I do not have MS SQL, but to make 
>error more informative, I've passed field type to :osCode. You 
>error log shows it is value 65527. Since it is USHORT value, 
>it can also mean -9, if it is signed. I can not find nor -9 
>neither 65527 field type sql.h. Varchar is defined equal to 
>12. More tests/docs required.

In attachment you can see type nvarchar( 300) in field NAZWA.
In this table I see types : int, nvarchar( n), nchar( n), char(n) and
tinyint.
In other tables are too : datetime, decimal( n, n), smallint, money,
bigint, float and varchar(n).
Was this information is enough?

Regards,
Marek Horodyski
-------------- next part --------------
A non-text attachment was scrubbed...
Name: data_types_on_sqlserver.zip
Type: application/x-zip-compressed
Size: 10185 bytes
Desc: data_types_on_sqlserver.zip
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090923/1b10d35e/data_types_on_sqlserver-0001.bin
From druzus at users.sourceforge.net  Wed Sep 23 11:52:30 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Wed Sep 23 11:52:37 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12608] trunk/harbour
Message-ID: <E1MqU8s-0008Jn-Im@dn4whf1.ch3.sourceforge.com>

Revision: 12608
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12608&view=rev
Author:   druzus
Date:     2009-09-23 15:52:09 +0000 (Wed, 23 Sep 2009)

Log Message:
-----------
2009-09-23 17:50 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcomp.h
    * minor formatting

  * harbour/source/rdd/dbfnsx/dbfnsx1.c
    ! fixed false corruption RT error generated due to missing reset
      on cached current key offset - thanks to Jaroslav Janik for
      information and self contain example

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/include/hbcomp.h
    trunk/harbour/source/rdd/dbfnsx/dbfnsx1.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From antonioharbour at gmail.com  Wed Sep 23 12:17:58 2009
From: antonioharbour at gmail.com (Antonio Linares)
Date: Wed Sep 23 12:18:03 2009
Subject: [Harbour] Re: Possible OLE bug
In-Reply-To: <20090923005952.GA22448@uran.home.aster.pl>
References: <9471afc80909221031k30ce629ftf9f153535ccba88f@mail.gmail.com>
	<9471afc80909221725w2d1fac06q74db8c72716a0013@mail.gmail.com>
	<C45E0153-B707-496E-B57B-07088C9BF4AB@syenar.hu>
	<20090923005952.GA22448@uran.home.aster.pl>
Message-ID: <9471afc80909230917w1a65d993k78397e68e4492d8e@mail.gmail.com>

Viktor,

Thanks for your answer and time to review it.

Good to see that Przemek fixes his own bugs :-)

best regards,

Antonio

2009/9/23 Przemyslaw Czerpak <druzus@acn.waw.pl>:
> On Wed, 23 Sep 2009, Szak?ts Viktor wrote:
>> To all:
>> My dev PC (WinXP) died tonight, so don't expect frequent
>> SVN updates until the situation gets resolved.
>
> Ups, hope you will resolve it soon.
>
>> BTW, the patch looks wrong to me as WideToAnsi() isn't
>> passed any length data, so the conversion will cut the
>> string at the first zero byte and garbage will be
>> returned after that point by next hb_itemPutCLPtr()
>> call. Somehow data length should be pulled from pVariant
>> structure.
>
> Better check current Harbour SVN code. He simply asked about help in code
> he copied from old Harbour SVN repository and is distributing himself.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From harbour.01 at syenar.hu  Wed Sep 23 12:36:04 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 23 12:36:12 2009
Subject: [Harbour] Re: Possible OLE bug
In-Reply-To: <9471afc80909230917w1a65d993k78397e68e4492d8e@mail.gmail.com>
References: <9471afc80909221031k30ce629ftf9f153535ccba88f@mail.gmail.com>
	<9471afc80909221725w2d1fac06q74db8c72716a0013@mail.gmail.com>
	<C45E0153-B707-496E-B57B-07088C9BF4AB@syenar.hu>
	<20090923005952.GA22448@uran.home.aster.pl>
	<9471afc80909230917w1a65d993k78397e68e4492d8e@mail.gmail.com>
Message-ID: <FE492FC4-61E5-4497-839B-80504C20CC57@syenar.hu>

Hi Antonio,

I don't understand your message, OLE was never Przemek's code,
current SVN is brand new implementation from Mindaugas and
additions by Przemek.

Brgds,
Viktor

On 2009 Sep 23, at 18:17, Antonio Linares wrote:

> Viktor,
>
> Thanks for your answer and time to review it.
>
> Good to see that Przemek fixes his own bugs :-)
>
> best regards,
>
> Antonio
>
> 2009/9/23 Przemyslaw Czerpak <druzus@acn.waw.pl>:
>> On Wed, 23 Sep 2009, Szak?ts Viktor wrote:
>>> To all:
>>> My dev PC (WinXP) died tonight, so don't expect frequent
>>> SVN updates until the situation gets resolved.
>>
>> Ups, hope you will resolve it soon.
>>
>>> BTW, the patch looks wrong to me as WideToAnsi() isn't
>>> passed any length data, so the conversion will cut the
>>> string at the first zero byte and garbage will be
>>> returned after that point by next hb_itemPutCLPtr()
>>> call. Somehow data length should be pulled from pVariant
>>> structure.
>>
>> Better check current Harbour SVN code. He simply asked about help  
>> in code
>> he copied from old Harbour SVN repository and is distributing  
>> himself.
>>
>> best regards,
>> Przemek
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at users.sourceforge.net  Wed Sep 23 16:06:39 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Wed Sep 23 16:06:45 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12609] trunk/harbour
Message-ID: <E1MqY6p-0007fS-5v@d5vjzd1.ch3.sourceforge.com>

Revision: 12609
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12609&view=rev
Author:   druzus
Date:     2009-09-23 20:06:33 +0000 (Wed, 23 Sep 2009)

Log Message:
-----------
2009-09-23 22:05 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/common/hbffind.c
    ! do not use GetVolumeInformation() in WinCE builds

  * harbour/mpkg_rpm.sh
  * harbour/harbour.spec
    + added new switches '--with localzlib' '--with localpcre'
    * updated to work with current base make system
      TODO: better integration with current base make system

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/harbour.spec
    trunk/harbour/mpkg_rpm.sh
    trunk/harbour/source/common/hbffind.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From jlcapel2 at gmail.com  Wed Sep 23 16:51:56 2009
From: jlcapel2 at gmail.com (=?ISO-8859-1?Q?Jos=E9_Luis_Capel?=)
Date: Wed Sep 23 16:52:07 2009
Subject: [Harbour] Error building Harbour Pelles C 6.0.4
Message-ID: <ab2a7b4c0909231351x587bb86xb3851ce0edea04a4@mail.gmail.com>

Building Harbour from latest svn (PellesC 32bits 6.0.4)


pocc.exe  -I. -Ze -Go -MT -W1 -Ot -I../../../../../include   -DHB_HAS_PCRE
-ID:/
programacion_disk/Programacion/harbour/external/pcre -DPCRE_STATIC
-DHB_HAS_ZLIB
 -ID:/programacion_disk/Programacion/harbour/external/zlib  -Fosha2.obj -c
../..
/../sha2.c
../../../sha2.c(444): fatal error: Internal error:
find_cheapest_spill_range().
win-make[3]: *** [sha2.obj] Error 1
win-make[2]: *** [descend] Error 2
win-make[1]: *** [rtl] Error 2
win-make: *** [source] Error 2

Regards,
Jos? Luis Capel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090923/6d80a838/attachment.html
From harbour.01 at syenar.hu  Wed Sep 23 17:33:20 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 23 17:33:29 2009
Subject: [Harbour] Error building Harbour Pelles C 6.0.4
In-Reply-To: <ab2a7b4c0909231351x587bb86xb3851ce0edea04a4@mail.gmail.com>
References: <ab2a7b4c0909231351x587bb86xb3851ce0edea04a4@mail.gmail.com>
Message-ID: <E6BAE731-F3B0-4692-A7E1-9EE257A7422A@syenar.hu>

This seems to be a FAQ. I'll update INSTALL.

6.0 IS buggy, moreover I reported all problems (starting
with 5.0) and NONE were ever even answered on the forum.

Probably in Harbour we should concentrate on serious
compilers.

Brgds,
Viktor

On 2009 Sep 23, at 22:51, Jos? Luis Capel wrote:

>
> Building Harbour from latest svn (PellesC 32bits 6.0.4)
>
>
> pocc.exe  -I. -Ze -Go -MT -W1 -Ot -I../../../../../include   - 
> DHB_HAS_PCRE -ID:/
> programacion_disk/Programacion/harbour/external/pcre -DPCRE_STATIC - 
> DHB_HAS_ZLIB
>  -ID:/programacion_disk/Programacion/harbour/external/zlib  - 
> Fosha2.obj -c ../..
> /../sha2.c
> ../../../sha2.c(444): fatal error: Internal error:  
> find_cheapest_spill_range().
> win-make[3]: *** [sha2.obj] Error 1
> win-make[2]: *** [descend] Error 2
> win-make[1]: *** [rtl] Error 2
> win-make: *** [source] Error 2
>
> Regards,
> Jos? Luis Capel
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From jlcapel2 at gmail.com  Thu Sep 24 02:12:24 2009
From: jlcapel2 at gmail.com (=?ISO-8859-1?Q?Jos=E9_Luis_Capel?=)
Date: Thu Sep 24 02:12:32 2009
Subject: [Harbour] Error building Harbour Pelles C 6.0.4
In-Reply-To: <E6BAE731-F3B0-4692-A7E1-9EE257A7422A@syenar.hu>
References: <ab2a7b4c0909231351x587bb86xb3851ce0edea04a4@mail.gmail.com>
	<E6BAE731-F3B0-4692-A7E1-9EE257A7422A@syenar.hu>
Message-ID: <ab2a7b4c0909232312n263550day2d0997976dc0475@mail.gmail.com>

Viktor,

Thanks for your answer...



> 6.0 IS buggy, moreover I reported all problems (starting
> with 5.0) and NONE were ever even answered on the forum.
>
>
Ups.. I am sorry but I don't follow so closely this list and I dind't
remeber to read that problems.


> Probably in Harbour we should concentrate on serious
> compilers.
>
>
So I understand that should be better to use, for example, MSVC 8 instead of
any of Pelles c compiler, shouldn't it?


Regards,
Jos? Luis Capel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090924/072e8fb1/attachment.html
From harbour.01 at syenar.hu  Thu Sep 24 03:10:09 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 03:10:18 2009
Subject: [Harbour] Error building Harbour Pelles C 6.0.4
In-Reply-To: <ab2a7b4c0909232312n263550day2d0997976dc0475@mail.gmail.com>
References: <ab2a7b4c0909231351x587bb86xb3851ce0edea04a4@mail.gmail.com>
	<E6BAE731-F3B0-4692-A7E1-9EE257A7422A@syenar.hu>
	<ab2a7b4c0909232312n263550day2d0997976dc0475@mail.gmail.com>
Message-ID: <D1947E9F-2F8A-462F-9890-315B9305FBE0@syenar.hu>

Hi Jose,

On 2009 Sep 24, at 08:12, Jos? Luis Capel wrote:

> Viktor,
>
> Thanks for your answer...
>
>
>
> 6.0 IS buggy, moreover I reported all problems (starting
> with 5.0) and NONE were ever even answered on the forum.
>
>
> Ups.. I am sorry but I don't follow so closely this list and I  
> dind't remeber to read that problems.
>
> Probably in Harbour we should concentrate on serious
> compilers.
>
>
> So I understand that should be better to use, for example, MSVC 8  
> instead of any of Pelles c compiler, shouldn't it?

Yes, or MinGW.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Thu Sep 24 03:39:27 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 24 03:39:32 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12610] trunk/harbour
Message-ID: <E1MqivH-0003XN-8A@3kljzd1.ch3.sourceforge.com>

Revision: 12610
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12610&view=rev
Author:   vszakats
Date:     2009-09-24 07:39:25 +0000 (Thu, 24 Sep 2009)

Log Message:
-----------
2009-09-24 09:34 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * INSTALL
    * Pelles C support version numbers adjusted.
      6.0 DOESN'T work with Harbour due to multiple bugs in this compilers.
      Don't report such problems to the list.

  * package/winuni/HARBOUR_README_MINGWARM 
    * Updated for latest cegcc binary release.

  * utils/hbmk2/hbmk2.prg
    ! Typo in BSD macro redefinition.

  * config/global.mk
    + Extended platform macro redefinition for all supported platforms.
    + Extended arch bit macro redefinition (didn't test it though)

  * config/globsh.mk
    ! Fixed implib not being deleted when using POSIX shells.
    ! Fixed dynlib and implib not being deleted when using OS/2 or MS-DOS shells.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/config/global.mk
    trunk/harbour/config/globsh.mk
    trunk/harbour/package/winuni/HARBOUR_README_MINGWARM
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Thu Sep 24 03:45:14 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 03:45:24 2009
Subject: [Harbour] cegcc 0.59 (4.4.0) warnings
Message-ID: <F3F3C72E-CBA2-43A7-AC7B-21153D07BF3E@syenar.hu>

BTW, the Cygwin binary build is also out.

---
/Users/vszakats/Desktop/work/mingw32ce/bin/arm-mingw32ce-gcc  -I. - 
I../../../../../include  -Wall -W -O2 -fomit-frame-pointer -DUNICODE  - 
DHB_HAS_PCRE -I/Users/vszakats/Desktop/work/harbour/external/pcre - 
DPCRE_STATIC -DHB_HAS_ZLIB -I/Users/vszakats/Desktop/work/harbour/ 
external/zlib  -ofilebuf.o -c ../../../filebuf.c
../../../filebuf.c:98: warning: excess elements in struct initializer
../../../filebuf.c:98: warning: (near initialization for  
's_fileMtx.critical')
/Users/vszakats/Desktop/work/mingw32ce/bin/arm-mingw32ce-gcc  -I. - 
I../../../../../include  -Wall -W -O2 -fomit-frame-pointer -DUNICODE  - 
DHB_HAS_PCRE -I/Users/vszakats/Desktop/work/harbour/external/pcre - 
DPCRE_STATIC -DHB_HAS_ZLIB -I/Users/vszakats/Desktop/work/harbour/ 
external/zlib  -ogtclip.o -c ../../../gtclip.c
../../../gtclip.c:69: warning: excess elements in struct initializer
../../../gtclip.c:69: warning: (near initialization for  
's_clipMtx.critical')
../../../gtclip.c: In function 'hb_gt_winapi_setClipboard':
../../../gtclip.c:143: warning: statement with no effect
../../../gtclip.c: In function 'hb_gt_winapi_getClipboard':
../../../gtclip.c:191: warning: statement with no effect
/Users/vszakats/Desktop/work/mingw32ce/bin/arm-mingw32ce-gcc  -I. - 
I../../../../../include  -Wall -W -O2 -fomit-frame-pointer -DUNICODE  - 
DHB_HAS_PCRE -I/Users/vszakats/Desktop/work/harbour/external/pcre - 
DPCRE_STATIC -DHB_HAS_ZLIB -I/Users/vszakats/Desktop/work/harbour/ 
external/zlib  -ohbsocket.o -c ../../../hbsocket.c
../../../hbsocket.c:702: warning: excess elements in struct initializer
../../../hbsocket.c:702: warning: (near initialization for  
's_sockMtx.critical')
/Users/vszakats/Desktop/work/mingw32ce/bin/arm-mingw32ce-gcc  -I. - 
I../../../../../../include  -Wall -W -O2 -fomit-frame-pointer - 
DUNICODE  -DHB_MT_VM  -ohvmall.o -c ../../../../hvmall.c
In file included from ../../../../hvmall.c:79:
../../../../hvm.c:234: warning: excess elements in struct initializer
../../../../hvm.c:234: warning: (near initialization for  
's_atInitMtx.critical')
../../../../hvm.c:398: warning: excess elements in struct initializer
../../../../hvm.c:398: warning: (near initialization for  
's_vmMtx.critical')
In file included from ../../../../hvmall.c:83:
../../../../classes.c:391: warning: excess elements in struct  
initializer
../../../../classes.c:391: warning: (near initialization for  
's_clsMtx.critical')
In file included from ../../../../hvmall.c:85:
../../../../dynsym.c:76: warning: excess elements in struct initializer
../../../../dynsym.c:76: warning: (near initialization for  
's_dynsMtx.critical')
In file included from ../../../../hvmall.c:93:
../../../../estack.c:83: warning: excess elements in struct initializer
../../../../estack.c:83: warning: (near initialization for  
'TSD_counter.critical')
/Users/vszakats/Desktop/work/mingw32ce/bin/arm-mingw32ce-gcc  -I. - 
I../../../../../include  -Wall -W -O2 -fomit-frame-pointer -DUNICODE    
-oworkarea.o -c ../../../workarea.c
../../../workarea.c:2029: warning: excess elements in struct initializer
../../../workarea.c:2029: warning: (near initialization for  
's_rddMtx.critical')
/Users/vszakats/Desktop/work/mingw32ce/bin/arm-mingw32ce-gcc  -I. - 
I../../../../../include  -Wall -W -O2 -fomit-frame-pointer -DUNICODE    
-owacore.o -c ../../../wacore.c
../../../wacore.c:466: warning: excess elements in struct initializer
../../../wacore.c:466: warning: (near initialization for  
's_waMtx.critical')
---

Brgds,
Viktor

From vszakats at users.sourceforge.net  Thu Sep 24 03:56:52 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 24 03:56:58 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12611] trunk/harbour
Message-ID: <E1MqjC8-0003qw-O3@3kljzd1.ch3.sourceforge.com>

Revision: 12611
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12611&view=rev
Author:   vszakats
Date:     2009-09-24 07:56:51 +0000 (Thu, 24 Sep 2009)

Log Message:
-----------
2009-09-24 09:55 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * config/global.mk
    % Optimized arch bit macro redefinition.
    + Added arm CPU to arch bit target macro definition.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/global.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Thu Sep 24 05:23:35 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Thu Sep 24 05:23:41 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12612] trunk/harbour
Message-ID: <E1MqkY3-0007tW-Oj@d5vjzd1.ch3.sourceforge.com>

Revision: 12612
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12612&view=rev
Author:   druzus
Date:     2009-09-24 09:23:34 +0000 (Thu, 24 Sep 2009)

Log Message:
-----------
2009-09-24 11:23 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbpp.h
  * harbour/include/hbcompdf.h
  * harbour/source/pp/pplib.c
  * harbour/source/pp/ppcore.c
  * harbour/source/compiler/cmdcheck.c
  * harbour/source/compiler/ppcomp.c
    + added support for disabling all automatically set platform dependent
      macros by '-undef:.ARCH.' switch.
      .ARCH. is meta flag to select all architecture dependent macros:
      __PLATFORM__*, __ARCH??BIT__, __*_ENDIAN__
      It should simplify cross build harbour compiler settings in
      core make system and hbmk2 or hb* scripts.

  * harbour/config/dos/watcom.mk
  * harbour/config/os2/watcom.mk
  * harbour/config/win/pocc.mk
  * harbour/config/win/bcc.mk
  * harbour/config/win/watcom.mk
  * harbour/config/linux/watcom.mk
    * disable C compiler warnings when HB_BUILD_WARN=no. Some compilers
      enable warnings by default.
      It pacifies warnings when external libraries are compiled.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/dos/watcom.mk
    trunk/harbour/config/linux/watcom.mk
    trunk/harbour/config/os2/watcom.mk
    trunk/harbour/config/win/bcc.mk
    trunk/harbour/config/win/pocc.mk
    trunk/harbour/config/win/watcom.mk
    trunk/harbour/include/hbcompdf.h
    trunk/harbour/include/hbpp.h
    trunk/harbour/source/compiler/cmdcheck.c
    trunk/harbour/source/compiler/ppcomp.c
    trunk/harbour/source/pp/ppcore.c
    trunk/harbour/source/pp/pplib.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Thu Sep 24 05:27:55 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 05:28:05 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12612] trunk/harbour
In-Reply-To: <E1MqkY3-0007tW-Oj@d5vjzd1.ch3.sourceforge.com>
References: <E1MqkY3-0007tW-Oj@d5vjzd1.ch3.sourceforge.com>
Message-ID: <8D10F775-5AB5-4B71-917B-268303B529C5@syenar.hu>

You must have read my mind ;) Thanks, I'll update make tools.

Brgds,
Viktor

On 2009 Sep 24, at 11:23, druzus@users.sourceforge.net wrote:

> Revision: 12612
>          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12612&view=rev
> Author:   druzus
> Date:     2009-09-24 09:23:34 +0000 (Thu, 24 Sep 2009)
>
> Log Message:
> -----------
> 2009-09-24 11:23 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbpp.h
>  * harbour/include/hbcompdf.h
>  * harbour/source/pp/pplib.c
>  * harbour/source/pp/ppcore.c
>  * harbour/source/compiler/cmdcheck.c
>  * harbour/source/compiler/ppcomp.c
>    + added support for disabling all automatically set platform  
> dependent
>      macros by '-undef:.ARCH.' switch.
>      .ARCH. is meta flag to select all architecture dependent macros:
>      __PLATFORM__*, __ARCH??BIT__, __*_ENDIAN__
>      It should simplify cross build harbour compiler settings in
>      core make system and hbmk2 or hb* scripts.
>
>  * harbour/config/dos/watcom.mk
>  * harbour/config/os2/watcom.mk
>  * harbour/config/win/pocc.mk
>  * harbour/config/win/bcc.mk
>  * harbour/config/win/watcom.mk
>  * harbour/config/linux/watcom.mk
>    * disable C compiler warnings when HB_BUILD_WARN=no. Some compilers
>      enable warnings by default.
>      It pacifies warnings when external libraries are compiled.
>
> Modified Paths:
> --------------
>    trunk/harbour/ChangeLog
>    trunk/harbour/config/dos/watcom.mk
>    trunk/harbour/config/linux/watcom.mk
>    trunk/harbour/config/os2/watcom.mk
>    trunk/harbour/config/win/bcc.mk
>    trunk/harbour/config/win/pocc.mk
>    trunk/harbour/config/win/watcom.mk
>    trunk/harbour/include/hbcompdf.h
>    trunk/harbour/include/hbpp.h
>    trunk/harbour/source/compiler/cmdcheck.c
>    trunk/harbour/source/compiler/ppcomp.c
>    trunk/harbour/source/pp/ppcore.c
>    trunk/harbour/source/pp/pplib.c
>
>
> This was sent by the SourceForge.net collaborative development  
> platform, the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Thu Sep 24 05:38:23 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 05:38:32 2009
Subject: [Harbour] hbmk2 xhb support
Message-ID: <27DDA47F-285B-4E57-B7B9-22277AB0C2B9@syenar.hu>

Hi All,

I've added xhb support to hbmk2 a while ago, but so far
I didn't see quite a huge interest in this feature, so,
since it's a maintenance nightmare, and it isn't very
well tested either, I'd like to remove it.

But before I do so, I'd like to ask opinions on this
feature. Does anyone thinks it's good, or does anyone
actually needs it?

[ f.e. now with -undef:.ARCH. support in Harbour, I still
had to keep complete old code because of xhb support. ]

Brgds,
Viktor

From druzus at acn.waw.pl  Thu Sep 24 06:26:14 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 24 06:26:21 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12593] trunk/harbour
In-Reply-To: <4ABA2AB9.4020101@dbtopas.lt>
References: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com>
	<4AB88DF5.7090704@dbtopas.lt> <4ABA2AB9.4020101@dbtopas.lt>
Message-ID: <20090924102614.GA25988@uran.home.aster.pl>

On Wed, 23 Sep 2009, Mindaugas Kavaliauskas wrote:
> I want to share more test results after using memory FS in real project.
> Report generation time (min:sec):
>   Local disk database              3:07
>   Network database                25:52
>   Local disk database and MemFS    2:22 + 0:03 (copying to memory FS)
>   Network database and MemFS       2:24 + 0:13 (copying to memory FS)

Very nice contribution and also final results.

In last week I've found a while to make some test with NETIO and MS-Windows.
The test were done on WinXP, SMB and NETIO servers were on Suse Linux, T100
LAN. Any opportunistic locks in SMB server were disabled.
The test program is attached below. I was testing only shared mode.
I tested SMB, NETIO and also xHarbour REDBFCDX and there is not noticeable
results. All tests gave results similar:

Harbour 2.0.0beta3 (Rev. 12431), Windows XP 5.1.2600 Dodatek Service Pack 3
RDD: DBFCDX type: CHARACTER (shared) 
records: 10000, repeated: 1, modulo: 10000
creating database and index...        69.66 sec.
skip test...                          17.38 sec. count: 10000
revers skip test...                   17.28 sec. count: 10000
testing seek...                       17.28 sec. count: 10000
goto test...                          17.34 sec. count: 10000
goto+skip test...                     30.38 sec. count: 10000
skip test...                          17.41 sec. count: 10000
revers skip test...                   17.27 sec. count: 10000
testing seek...                       17.30 sec. count: 10000
goto test...                          17.27 sec. count: 10000
goto+skip test...                     30.31 sec. count: 10000
Total execution time...              268.91 sec.

and the difference were smaller then 0.5%. Just simply the net overhead
is such huge that rest is unimportant.
The difference can be seen only in local tests and here Harbour was
faster then xHarbour but it's mostly result for faster Harbour VM.

The local disk tests in WinXP and Harbour using DBFCDX with native IO
took ~2.50 seconds. It means that in above test Harbour consumes less
then 1% and rest is the cost of network overhead.

BTW testing REDBFCDX do not forget to add RE_TURBO( .f. ) - REDBFCDX
enables dirty reading by default or add Sx_SetTurbo( .t. ) to other
RDDs to enable it too. Otherwise there is no sense to make any comparisons
and probably it's also the reason why Miguel has better then native SMB
protocol results testing REDBFCDX.
Of course the difference strongly depends on hardware transport layer,
the results in WAN or in T10/T1000/T10000 LANs can be completely different
but this test clearly shows that to reach real speed improvement it's
necessary to create RDD oriented server which can group IO operations
in some bigger logical units to reduce number of packages which have to
be send and confirmed. Operating only on transport layer like NETIO we
can reach some small improvement yet, i.e. we can disable confirmation
in UNLOCK operation what in above tests can increase the SKIP tests ~20%
(Maybe I'll add such extension soon) or we can try to group some operations,
i.e. join index lock and concurrent access counter read into single
operation what may give even 50% speed improvement in the SKIP but it needs
modifications in core RDD code so I do not like it because it may start
very danger in longer terms process of adding local hacks to core RDD code.

best regards,
Przemek
From elart at elart.it  Thu Sep 24 06:29:28 2009
From: elart at elart.it (elart)
Date: Thu Sep 24 06:29:35 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12612] trunk/harbour
In-Reply-To: <E1MqkY3-0007tW-Oj@d5vjzd1.ch3.sourceforge.com>
Message-ID: <jLtsgxA9.1253788168.3783310.marcobra@82.105.36.210>


Revision: 12612
>          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12612&view=rev
>Author:   druzus
>Date:     2009-09-24 09:23:34 +0000 (Thu, 24 Sep 2009)
>
>Log Message:
>-----------
>2009-09-24 11:23 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)

I get this error on build win version of Harbour from latest svn

Thank you and best regards
Marco

! Installing ../../lib/win/mingw/libharbour-20.a on
/tmp/hbwin/lib/win/mingw
make[3]: ?../../../../../bin/win/mingw/hbrun.exe? ? aggiornato.
! Installing ../../bin/win/mingw/hbrun.exe on /tmp/hbwin/bin
/home/ubuntu/src/harbour/bin/linux/gcc/harbour ../../../hbmk2.prg 
-i../../../../../include -n1 -q0 -w3 -es2 -kmo -l 
-undef:__PLATFORM__LINUX -undef:__PLATFORM__UNIX -D__PLATFORM__WINDOWS
../../../hbmk2.prg(4440) Warning W0003  Variable 'TMP3' declared but
not used in function 'HBMK(612)'

No code generated.
make[3]: *** [hbmk2.c] Errore 1
make[2]: *** [descend] Errore 2
make[1]: *** [hbmk2.inst] Errore 2
make: *** [utils.inst] Errore 2
From druzus at acn.waw.pl  Thu Sep 24 06:32:11 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 24 06:32:17 2009
Subject: [Harbour] MT compile warning
In-Reply-To: <4AB78201.3080402@dbtopas.lt>
References: <4AB78201.3080402@dbtopas.lt>
Message-ID: <20090924103211.GA26239@uran.home.aster.pl>

On Mon, 21 Sep 2009, Mindaugas Kavaliauskas wrote:

Hi,

> code:
> ----------------------------
> PROC main()
> #pragma begindump
> #include "hbthread.h"
> static HB_CRITICAL_NEW( s_mtx );
> void somefunc( void )
> {
>    HB_CRITICAL_INIT( s_mtx );
> }
> #pragma enddump
> ----------------------------
> causes warning on BCC:
> Warning W8075 test.prg 7: Suspicious pointer conversion in function somefunc
> The same warning is generated for HB_CRITICAL_LOCK( s_mtx ) and 
> HB_CRITICAL_UNLOCK( s_mtx ).

HB_CRITICAL_NEW() creates structure which does not need any initialization
and can be used with hb_threadEnterCriticalSection()/
hb_threadLeaveCriticalSection() functions.
HB_CRITICAL_INIT()/HB_CRITICAL_LOCK() and HB_CRITICAL_UNLOCK() are not
public macros. Please do not use it.
To reduce confusions probably I'll hide them for non HVM core code in
the future.

best regards,
Przemek
From alxokhotnikov at gmail.com  Thu Sep 24 06:47:27 2009
From: alxokhotnikov at gmail.com (Alexandr Okhotnikov)
Date: Thu Sep 24 06:47:32 2009
Subject: [Harbour] hbmk2 xhb support
In-Reply-To: <27DDA47F-285B-4E57-B7B9-22277AB0C2B9@syenar.hu>
References: <27DDA47F-285B-4E57-B7B9-22277AB0C2B9@syenar.hu>
Message-ID: <d6fa31440909240347h2a204e8m5e8f8efedeb9a3fe@mail.gmail.com>

Hi

I use XHB to access the string as an array
ie
cStr: = "123"
cStr [1]
As no XHB make a similar decision?

2009/9/24 Viktor Szak?ts <harbour.01@syenar.hu>:
> Hi All,
>
> I've added xhb support to hbmk2 a while ago, but so far
> I didn't see quite a huge interest in this feature, so,
> since it's a maintenance nightmare, and it isn't very
> well tested either, I'd like to remove it.
>
> But before I do so, I'd like to ask opinions on this
> feature. Does anyone thinks it's good, or does anyone
> actually needs it?
>
> [ f.e. now with -undef:.ARCH. support in Harbour, I still
> had to keep complete old code because of xhb support. ]
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From harbour.01 at syenar.hu  Thu Sep 24 06:48:54 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 06:49:08 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12612] trunk/harbour
In-Reply-To: <jLtsgxA9.1253788168.3783310.marcobra@82.105.36.210>
References: <jLtsgxA9.1253788168.3783310.marcobra@82.105.36.210>
Message-ID: <53DFB81C-08F7-44C9-825B-CA9D61773246@syenar.hu>

This can happen if both __PLATFORM__UNIX and __PLATFORM__WINDOWS
are declared. I'l try to fix it (for Cygwin), but in this case
it should work with current hbmk2 code.

Brgds,
Viktor

On 2009 Sep 24, at 12:29, elart wrote:

>
> Revision: 12612
>>         http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12612&view=rev
>> Author:   druzus
>> Date:     2009-09-24 09:23:34 +0000 (Thu, 24 Sep 2009)
>>
>> Log Message:
>> -----------
>> 2009-09-24 11:23 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>
> I get this error on build win version of Harbour from latest svn
>
> Thank you and best regards
> Marco
>
> ! Installing ../../lib/win/mingw/libharbour-20.a on
> /tmp/hbwin/lib/win/mingw
> make[3]: ?../../../../../bin/win/mingw/hbrun.exe? ? aggiornato.
> ! Installing ../../bin/win/mingw/hbrun.exe on /tmp/hbwin/bin
> /home/ubuntu/src/harbour/bin/linux/gcc/harbour ../../../hbmk2.prg
> -i../../../../../include -n1 -q0 -w3 -es2 -kmo -l
> -undef:__PLATFORM__LINUX -undef:__PLATFORM__UNIX -D__PLATFORM__WINDOWS
> ../../../hbmk2.prg(4440) Warning W0003  Variable 'TMP3' declared but
> not used in function 'HBMK(612)'
>
> No code generated.
> make[3]: *** [hbmk2.c] Errore 1
> make[2]: *** [descend] Errore 2
> make[1]: *** [hbmk2.inst] Errore 2
> make: *** [utils.inst] Errore 2
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From dmacias at mail.udg.mx  Thu Sep 24 07:08:54 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Thu Sep 24 07:09:07 2009
Subject: [Harbour] Harbour under OS/2 - eCS 12604
Message-ID: <4ABB5346.70304@mail.udg.mx>

Build tests with current Harbour

  * $Id: ChangeLog 12604 2009-09-22 21:11:13Z snaiperis $
2009-09-23 00:13 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)

build fine with OpenWatcom 1.8

0 errors
many warnings, included below. There are many news

Build results include .dlls:
  24/09/09  5:48a     3,231,453      0 a---  harbour.dll
  24/09/09  5:48a     3,263,217      0 a---  harbourm.dll

How can I test them ?


Przemek: hbrun.exe run fine. As you remember it was raising GPF

David Macias


! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 E:\OS2\CMD.EXE  w
! HB_HOST_PLAT: os2 (x86)  HB_SHELL: os2
! HB_PLATFORM: os2 (x86) (autodetected)
! HB_COMPILER: watcom (autodetected: E:/WATCOM/BINP/wpp386.exe
E:/WATCOM/BINW/)
! Component: 'zlib' found in E:/harbour909e/harbour/external/zlib (local)
! Component: 'pcre' found in E:/harbour909e/harbour/external/pcre (local)
! Component: 'openssl' not supported with watcom compiler
! Component: 'gpm' not supported on os2 platform
! Component: 'slang' not found
! Component: 'curses' not supported on os2 platform
! Component: 'x11' not found
! Component: 'wattcp/watt-32' not supported on os2 platform
! HB_INSTALL_PREFIX automatically set to: E:\harbour909e\harbour

..\..\..\hpdffdft.c(2109): Warning! W136: Comparison equivalent to
'unsigned == 0'
..\..\..\hpdfimap.c(195): Warning! W124: Comparison result always 1
..\..\..\hpdfimap.c(257): Warning! W124: Comparison result always 1
..\..\..\hpdflist.c(56): Warning! W136: Comparison equivalent to
'unsigned == 0'
..\..\..\hpdfpago.c(2563): Warning! W136: Comparison equivalent to
'unsigned == 0'
..\..\..\hpdfpags.c(1509): Warning! W136: Comparison equivalent to
'unsigned == 0'
..\..\..\hpdfstre.c(984): Warning! W136: Comparison equivalent to
'unsigned == 0'
..\..\..\hpdfu3d.c(589): Warning! W131: No prototype found for function
'sqrtf'
..\..\..\hpdfutil.c(125): Warning! W124: Comparison result always 0
../../../pcreglob.c(59): Warning! W601: col(49) converted function type
has different #pragma from original function type
../../../pcreglob.c(60): Warning! W601: col(47) converted function type
has different #pragma from original function type
../../../pcreglob.c(61): Warning! W601: col(55) converted function type
has different #pragma from original function type
../../../pcreglob.c(62): Warning! W601: col(53) converted function type
has different #pragma from original function type

../../../pcreglob.c(59): Warning! W601: col(49) converted function type
has different #pragma from original function type
../../../pcreglob.c(60): Warning! W601: col(47) converted function type
has different #pragma from original function type
../../../pcreglob.c(61): Warning! W601: col(55) converted function type
has different #pragma from original function type
../../../pcreglob.c(62): Warning! W601: col(53) converted function type
has different #pragma from original function type

..\..\..\sqlite3.c(19687): Warning! W136: Comparison equivalent to
'unsigned == 0'
..\..\..\sqlite3.c(21265): Warning! W102: Type mismatch (warning)
..\..\..\sqlite3.c(21265): Note! N2003: source conversion type is 'void
*(*)(struct sqlite3_vfs *__p1,void *__p2,char const *__p3)'
..\..\..\sqlite3.c(21265): Note! N2004: target conversion type is 'void
(*(*)(struct sqlite3_vfs *__p1,void *__p2,char const *__p3))(void )'
..\..\..\sqlite3.c(42970): Warning! W136: Comparison equivalent to
'unsigned == 0'

../../../hbproces.c(938): Warning! W014: col(1) no reference to symbol
'TODO'
../../../hbproces.c(933): Note! N392: col(8) definition: 'int TODO' in
'unsigned long hb_fsProcessClose( int, unsigned long )'

../../../hbproces.c(938): Warning! W014: col(1) no reference to symbol
'TODO'
../../../hbproces.c(933): Note! N392: col(8) definition: 'int TODO' in
'unsigned long hb_fsProcessClose( int, unsigned long )'

tlabel.c(548): Warning! W013: col(18) unreachable code
tlabel.c(548): Warning! W013: col(18) unreachable code

treport.c(1153): Warning! W013: col(18) unreachable code
treport.c(1153): Warning! W013: col(18) unreachable code

../../../../thread.c(785): Warning! W869: col(25) use of '_beginthread'
requires build target to be multi-threaded
../../../../thread.c(785): Warning! W869: col(25) use of '_beginthread'
requires build target to be multi-threaded

dbjoin.c(188): Warning! W013: col(18) unreachable code
dbjoin.c(188): Warning! W013: col(18) unreachable code
dblist.c(198): Warning! W013: col(18) unreachable code
dblist.c(198): Warning! W013: col(18) unreachable code

dbsort.c(101): Warning! W013: col(18) unreachable code
dbsort.c(101): Warning! W013: col(18) unreachable code
dbstrux.c(147): Warning! W013: col(18) unreachable code
dbstrux.c(311): Warning! W013: col(18) unreachable code
dbstrux.c(147): Warning! W013: col(18) unreachable code
dbstrux.c(311): Warning! W013: col(18) unreachable code

dbtotal.c(420): Warning! W013: col(18) unreachable code
dbtotal.c(420): Warning! W013: col(18) unreachable code
dbupdat.c(147): Warning! W013: col(18) unreachable code
dbupdat.c(147): Warning! W013: col(18) unreachable code



From harbour.01 at syenar.hu  Thu Sep 24 07:10:38 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 07:10:47 2009
Subject: [Harbour] hbmk2 xhb support
In-Reply-To: <d6fa31440909240347h2a204e8m5e8f8efedeb9a3fe@mail.gmail.com>
References: <27DDA47F-285B-4E57-B7B9-22277AB0C2B9@syenar.hu>
	<d6fa31440909240347h2a204e8m5e8f8efedeb9a3fe@mail.gmail.com>
Message-ID: <EE820590-B191-4CAA-BFDD-5179CC054A72@syenar.hu>

Sorry for the confusion I didn't mean xhb lib, I did
mean xhb compiler.

xhb *lib* (just like any other libs) is and will always
be supported by bhmk2.

Brgds,
Viktor

On 2009 Sep 24, at 12:47, Alexandr Okhotnikov wrote:

> Hi
>
> I use XHB to access the string as an array
> ie
> cStr: = "123"
> cStr [1]
> As no XHB make a similar decision?
>
> 2009/9/24 Viktor Szak?ts <harbour.01@syenar.hu>:
>> Hi All,
>>
>> I've added xhb support to hbmk2 a while ago, but so far
>> I didn't see quite a huge interest in this feature, so,
>> since it's a maintenance nightmare, and it isn't very
>> well tested either, I'd like to remove it.
>>
>> But before I do so, I'd like to ask opinions on this
>> feature. Does anyone thinks it's good, or does anyone
>> actually needs it?
>>
>> [ f.e. now with -undef:.ARCH. support in Harbour, I still
>> had to keep complete old code because of xhb support. ]
>>
>> Brgds,
>> Viktor
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Thu Sep 24 07:12:07 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 24 07:12:13 2009
Subject: [Harbour] hbmk2 xhb support
In-Reply-To: <27DDA47F-285B-4E57-B7B9-22277AB0C2B9@syenar.hu>
References: <27DDA47F-285B-4E57-B7B9-22277AB0C2B9@syenar.hu>
Message-ID: <20090924111207.GA5990@uran.home.aster.pl>

On Thu, 24 Sep 2009, Szak?ts Viktor wrote:

Hi,

> I've added xhb support to hbmk2 a while ago, but so far
> I didn't see quite a huge interest in this feature, so,
> since it's a maintenance nightmare, and it isn't very
> well tested either, I'd like to remove it.
> But before I do so, I'd like to ask opinions on this
> feature. Does anyone thinks it's good, or does anyone
> actually needs it?
> [ f.e. now with -undef:.ARCH. support in Harbour, I still
> had to keep complete old code because of xhb support. ]

If it creates any bigger problems then simply drop it.
Anyhow you can also try to keep Harbour support with minimal
cost and simply add function to update final commands like
Harbour parameters or linked library list. BTW you can pass
-undef:.ARCH. to xHarbour compiler and it will be simply ignored.

The most important reason to keep xHarbour support in hbmk2
is using it as base make system in some 3-rd party projects
what allows to eliminate different make files/systems but
without some help from xHarboru developers then it will be
hard to keep it alive.
In this particular case I suggest to pase -undef:.ARCH. to
xHarbour compiler and maybe in the future one of xHarbour
developers (maybe Phil) will add support for this switch
so it will not be ignored.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Sep 24 07:18:47 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 24 07:18:53 2009
Subject: [Harbour] Harbour under OS/2 - eCS 12604
In-Reply-To: <4ABB5346.70304@mail.udg.mx>
References: <4ABB5346.70304@mail.udg.mx>
Message-ID: <20090924111847.GA13994@uran.home.aster.pl>

On Thu, 24 Sep 2009, David Arturo Macias Corona wrote:

Hi,

> Przemek: hbrun.exe run fine. As you remember it was raising GPF

Yes but Viktor changed -P64 to -P72 in WLIB parameters and I guess it
also resolved the problem with symbol table inside HBEXTERN library
which caused the GPF.

> ..\..\..\hpdffdft.c(2109): Warning! W136: Comparison equivalent to
> 'unsigned == 0'
[...]

in current SVN I disabled all OpenWatcom warnings for external/ code.
If you repeat the test then they should disappear.

> tlabel.c(548): Warning! W013: col(18) unreachable code
> tlabel.c(548): Warning! W013: col(18) unreachable code

It's a side effect of -gc3 code compiled by OpenWatcom. In fact
it's an OpenWatcom problem (false warning). You can safely ignore
them.

best regards,
Przemek
From druzus at users.sourceforge.net  Thu Sep 24 07:26:40 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Thu Sep 24 07:26:46 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12613] trunk/harbour
Message-ID: <E1MqmTA-0002t4-NK@c3vjzd1.ch3.sourceforge.com>

Revision: 12613
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12613&view=rev
Author:   druzus
Date:     2009-09-24 11:26:33 +0000 (Thu, 24 Sep 2009)

Log Message:
-----------
2009-09-24 13:26 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbthread.h
    * modified some internal structure definitions (used nameless unions)
      to pacify possible warnings on structure initialization.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/include/hbthread.h


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From harbour.01 at syenar.hu  Thu Sep 24 07:44:07 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 07:44:16 2009
Subject: [Harbour] hbmk2 xhb support
In-Reply-To: <20090924111207.GA5990@uran.home.aster.pl>
References: <27DDA47F-285B-4E57-B7B9-22277AB0C2B9@syenar.hu>
	<20090924111207.GA5990@uran.home.aster.pl>
Message-ID: <9BEB43E1-D7F5-4E37-A6D0-2CC4A2DA2B57@syenar.hu>

>> I've added xhb support to hbmk2 a while ago, but so far
>> I didn't see quite a huge interest in this feature, so,
>> since it's a maintenance nightmare, and it isn't very
>> well tested either, I'd like to remove it.
>> But before I do so, I'd like to ask opinions on this
>> feature. Does anyone thinks it's good, or does anyone
>> actually needs it?
>> [ f.e. now with -undef:.ARCH. support in Harbour, I still
>> had to keep complete old code because of xhb support. ]
>
> If it creates any bigger problems then simply drop it.
> Anyhow you can also try to keep Harbour support with minimal
> cost and simply add function to update final commands like
> Harbour parameters or linked library list. BTW you can pass

Hm, there are a few other ugly differences (stubs, dir layout,
cmd names, dlls names + stubs + placement). I'll see. Anyhow
if someone wants to contribute here, it would be nice.

> -undef:.ARCH. to xHarbour compiler and it will be simply ignored.

Good idea.

> The most important reason to keep xHarbour support in hbmk2
> is using it as base make system in some 3-rd party projects
> what allows to eliminate different make files/systems but
> without some help from xHarboru developers then it will be
> hard to keep it alive.

This was the reason I added it. I almost forgot.

> In this particular case I suggest to pase -undef:.ARCH. to
> xHarbour compiler and maybe in the future one of xHarbour
> developers (maybe Phil) will add support for this switch
> so it will not be ignored.

Let's hope so. The other annoying bit is __PLATFORM__Windows
and __PLATFORM__Linux. Hopefully someone will fix them there.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Thu Sep 24 07:52:45 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 24 07:52:51 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12614] trunk/harbour
Message-ID: <E1MqmsP-0003QA-T5@c3vjzd1.ch3.sourceforge.com>

Revision: 12614
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12614&view=rev
Author:   vszakats
Date:     2009-09-24 11:52:43 +0000 (Thu, 24 Sep 2009)

Log Message:
-----------
2009-09-24 13:49 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * utils/hbmk2/hbmk2.prg
    % Using -undef:.ARCH.
    ! Fixed all potential unused tmp3 errors.

  * config/global.mk
    % Using -undef:.ARCH.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/global.mk
    trunk/harbour/utils/hbmk2/hbmk2.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at users.sourceforge.net  Thu Sep 24 07:58:20 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Thu Sep 24 07:58:26 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12615] trunk/harbour
Message-ID: <E1Mqmxo-0003We-Ip@c3vjzd1.ch3.sourceforge.com>

Revision: 12615
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12615&view=rev
Author:   druzus
Date:     2009-09-24 11:58:08 +0000 (Thu, 24 Sep 2009)

Log Message:
-----------
2009-09-24 13:57 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/itemapi.c
    * modified (optimized manually) hb_itemPutNLen() to not exploit bug
      in ICC optimizer when itemapi.c is compiled by ICC with -fpic switch.

  * harbour/source/vm/vmmt/Makefile
    * removed hack for ICC compilers which disabled HB_VM_ALL in ICC builds
       BTW it was not enough (my mistake) and the problem was exploited also
           when itemapi.c was compiled standalone

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/source/vm/itemapi.c
    trunk/harbour/source/vm/vmmt/Makefile


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From maurilio.longo at libero.it  Thu Sep 24 08:00:25 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Sep 24 08:00:33 2009
Subject: [Harbour] bin/postinst.cmd
In-Reply-To: <EB713F59-97FC-4D14-897D-CCB790EDEE33@syenar.hu>
References: <4ABA2456.7020106@libero.it>	<27427C4C-C84A-413B-A44B-E7323B407469@syenar.hu>	<4ABA28F0.1030007@libero.it>
	<EB713F59-97FC-4D14-897D-CCB790EDEE33@syenar.hu>
Message-ID: <4ABB5F59.20109@libero.it>

Viktor,

> Default structure is:
> - <HB_INSTALL_PREFIX>/bin
> - <HB_INSTALL_PREFIX>/lib/os2/gcc

Why not simply <HB_INSTALL_PREFIX>/lib given that /bin does not have an
architecture/compiler subdirs?

What about testing HB_INSTALL_PREFIX_ORI inside postinst.cmd to see if it has
been set to somethin by the user?

Best regards.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Thu Sep 24 08:14:05 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 08:14:14 2009
Subject: [Harbour] bin/postinst.cmd
In-Reply-To: <4ABB5F59.20109@libero.it>
References: <4ABA2456.7020106@libero.it>	<27427C4C-C84A-413B-A44B-E7323B407469@syenar.hu>	<4ABA28F0.1030007@libero.it>
	<EB713F59-97FC-4D14-897D-CCB790EDEE33@syenar.hu>
	<4ABB5F59.20109@libero.it>
Message-ID: <DE775FDE-818C-4765-A61B-02E4F8D70EB2@syenar.hu>

Hi Maurilio,

> Viktor,
>
>> Default structure is:
>> - <HB_INSTALL_PREFIX>/bin
>> - <HB_INSTALL_PREFIX>/lib/os2/gcc
>
> Why not simply <HB_INSTALL_PREFIX>/lib given that /bin does not have  
> an
> architecture/compiler subdirs?

It allows for cross compilation and allows seamless
multicompiler support.

Probably sooner or later bin will also get plat/comp in
install phase (it already has it in build phase), but this
scenario is less widely used yet, so for many ppl it may
turn out to be an inconvenience ATM. Probably win32 vs. win64
will cut the chase here. I'll think about it, maybe next
unified build will use this method. (BTW this is also a
prerequisite to support OS/2 .dlls in "unified" build.)

BTW all above lib and bin placements are already handled
transparently by hbmk2, so users shouldn't really worry
about it.

> What about testing HB_INSTALL_PREFIX_ORI inside postinst.cmd to see  
> if it has
> been set to somethin by the user?

That would smell a little hacky to me, _ORI is an internal variable
and I wouldn't like to guarantee it's content or presence for the
future.

To be in sync with GNU Make to solve the same problem IMO easiest
would be to use os2cp in postinst too. (if there isn't any native
way to silence copy operation in OS/2 shell).

Brgds,
Viktor

From druzus at users.sourceforge.net  Thu Sep 24 08:15:20 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Thu Sep 24 08:15:25 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12616] trunk/harbour
Message-ID: <E1MqnEG-0003sc-ET@c3vjzd1.ch3.sourceforge.com>

Revision: 12616
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12616&view=rev
Author:   druzus
Date:     2009-09-24 12:15:16 +0000 (Thu, 24 Sep 2009)

Log Message:
-----------
2009-09-24 14:14 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbmemio/memio.c
    * pacified warning

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbmemio/memio.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From maurilio.longo at libero.it  Thu Sep 24 08:20:06 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Thu Sep 24 08:20:16 2009
Subject: [Harbour] bin/postinst.cmd
In-Reply-To: <DE775FDE-818C-4765-A61B-02E4F8D70EB2@syenar.hu>
References: <4ABA2456.7020106@libero.it>	<27427C4C-C84A-413B-A44B-E7323B407469@syenar.hu>	<4ABA28F0.1030007@libero.it>	<EB713F59-97FC-4D14-897D-CCB790EDEE33@syenar.hu>	<4ABB5F59.20109@libero.it>
	<DE775FDE-818C-4765-A61B-02E4F8D70EB2@syenar.hu>
Message-ID: <4ABB63F6.60503@libero.it>

Viktor Szak?ts wrote:
>> What about testing HB_INSTALL_PREFIX_ORI inside postinst.cmd to see if
>> it has
>> been set to somethin by the user?
> 
> That would smell a little hacky to me, _ORI is an internal variable
> and I wouldn't like to guarantee it's content or presence for the
> future.
> 
Sure, but postinst.cmd is like any other .mk file, an internal part of the
compiler/suite which is executed during installation only.

BTW, it could be written in .PRG, since at that point hbrun is already built
(and if not, installation should fail), am I wrong?

> To be in sync with GNU Make to solve the same problem IMO easiest
> would be to use os2cp in postinst too. (if there isn't any native
> way to silence copy operation in OS/2 shell).
> 

No way to silence copy/xcopy and, IMHO, a copy that fails without errors is...
an error :)

Maurilio.


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From dbtopas at dbtopas.lt  Thu Sep 24 08:31:15 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Sep 24 08:32:04 2009
Subject: [Harbour] MT compile warning
In-Reply-To: <20090924103211.GA26239@uran.home.aster.pl>
References: <4AB78201.3080402@dbtopas.lt>
	<20090924103211.GA26239@uran.home.aster.pl>
Message-ID: <4ABB6693.5050208@dbtopas.lt>

Hi,


>> Warning W8075 test.prg 7: Suspicious pointer conversion in function somefunc
>> The same warning is generated for HB_CRITICAL_LOCK( s_mtx ) and 
>> HB_CRITICAL_UNLOCK( s_mtx ).
> 
> HB_CRITICAL_NEW() creates structure which does not need any initialization
> and can be used with hb_threadEnterCriticalSection()/
> hb_threadLeaveCriticalSection() functions.
> HB_CRITICAL_INIT()/HB_CRITICAL_LOCK() and HB_CRITICAL_UNLOCK() are not
> public macros. Please do not use it.
> To reduce confusions probably I'll hide them for non HVM core code in
> the future.

Thanks, it's clear now. I've tried to use HB_CRITICAL_INIT(), _LOCK(), 
_UNLOCK() (instead of hb_threadEnterCritical*()) to avoid initialization 
test on every lock, unlock operation, so I had to use HB_CRITICAL_INIT().


Regards,
Mindaugas
From druzus at acn.waw.pl  Thu Sep 24 08:33:05 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 24 08:33:11 2009
Subject: [Harbour] bin/postinst.cmd
In-Reply-To: <DE775FDE-818C-4765-A61B-02E4F8D70EB2@syenar.hu>
References: <4ABA2456.7020106@libero.it>
	<27427C4C-C84A-413B-A44B-E7323B407469@syenar.hu>
	<4ABA28F0.1030007@libero.it>
	<EB713F59-97FC-4D14-897D-CCB790EDEE33@syenar.hu>
	<4ABB5F59.20109@libero.it>
	<DE775FDE-818C-4765-A61B-02E4F8D70EB2@syenar.hu>
Message-ID: <20090924123305.GA21716@uran.home.aster.pl>

On Thu, 24 Sep 2009, Szak?ts Viktor wrote:

Hi,

> To be in sync with GNU Make to solve the same problem IMO easiest
> would be to use os2cp in postinst too. (if there isn't any native
> way to silence copy operation in OS/2 shell).

In general using copy with the same source and destination file
is bad idea and it may cause file corruption or data lost.
If possible we should add protection against such situations.
We should add such protection globally in instsh.mk.
Now we have code like:

   ifeq ($(INSTALL_DIR),) # Empty install dir
      INSTALL_RULE := @$(ECHO) $(ECHOQUOTE)! Can't install, install dir isn't set$(ECHOQUOTE)
   else
      [...] # installation
   endif

It should be enough top change it to sth like:

   ifeq ($(INSTALL_DIR),) # Empty install dir
      INSTALL_RULE := @$(ECHO) $(ECHOQUOTE)! Can't install, install dir isn't set$(ECHOQUOTE)
   else
      ifeq ($(realpath $(INSTALL_DIR)),$(realpath .))
         INSTALL_RULE := @$(ECHO) $(ECHOQUOTE)! Skip installation to the same directory$(ECHOQUOTE)
      else
         [...] # installation
      endif
   endif

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Sep 24 08:39:10 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 08:39:17 2009
Subject: [Harbour] bin/postinst.cmd
In-Reply-To: <4ABB63F6.60503@libero.it>
References: <4ABA2456.7020106@libero.it>	<27427C4C-C84A-413B-A44B-E7323B407469@syenar.hu>	<4ABA28F0.1030007@libero.it>	<EB713F59-97FC-4D14-897D-CCB790EDEE33@syenar.hu>	<4ABB5F59.20109@libero.it>
	<DE775FDE-818C-4765-A61B-02E4F8D70EB2@syenar.hu>
	<4ABB63F6.60503@libero.it>
Message-ID: <96B071FA-3665-4C1F-BDF2-B56542CC6FEF@syenar.hu>

> Viktor Szak?ts wrote:
>>> What about testing HB_INSTALL_PREFIX_ORI inside postinst.cmd to  
>>> see if
>>> it has
>>> been set to somethin by the user?
>>
>> That would smell a little hacky to me, _ORI is an internal variable
>> and I wouldn't like to guarantee it's content or presence for the
>> future.
>>
> Sure, but postinst.cmd is like any other .mk file, an internal part  
> of the
> compiler/suite which is executed during installation only.
>
> BTW, it could be written in .PRG, since at that point hbrun is  
> already built
> (and if not, installation should fail), am I wrong?

Yes, it could be.

Good idea, since it could allow us to drop .bat/.cmd/.sh logic
and replacing it with one common, shell independent .prg code.
(f.e. allowing to create Windows installers when using bash
shell). It would also restore full Win95 compatibility as build
platform.

We should however deal with cross-platform scenarios, where
we currently don't require native build of hbrun.

Besides this I can't see any problems with it ATM, but I may
miss something, so after we gathered some opinions / input,
we may step into this direction.

I'd definitely be happy if our repository wouldn't contain
_any_ bat/cmd/sh code whatsoever.

>> To be in sync with GNU Make to solve the same problem IMO easiest
>> would be to use os2cp in postinst too. (if there isn't any native
>> way to silence copy operation in OS/2 shell).
>>
>
> No way to silence copy/xcopy and, IMHO, a copy that fails without  
> errors is...
> an error :)

Yes, but copying a file to itself can as well be considered
a success (which IMO it is), since our goal was to get the target
file as a result. It really comes down to how intelligently
can copy process decide if the source and target are the same.
Apparently MS-DOS rooted tools don't perform this stunt too
well. Bugging users because of lack of information isn't the
most useful error message. Worst case it should be suppressible
warning IMO.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep 24 08:41:42 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 08:41:51 2009
Subject: [Harbour] bin/postinst.cmd
In-Reply-To: <20090924123305.GA21716@uran.home.aster.pl>
References: <4ABA2456.7020106@libero.it>
	<27427C4C-C84A-413B-A44B-E7323B407469@syenar.hu>
	<4ABA28F0.1030007@libero.it>
	<EB713F59-97FC-4D14-897D-CCB790EDEE33@syenar.hu>
	<4ABB5F59.20109@libero.it>
	<DE775FDE-818C-4765-A61B-02E4F8D70EB2@syenar.hu>
	<20090924123305.GA21716@uran.home.aster.pl>
Message-ID: <36EAE8A0-3998-4050-81AB-0DDE9CE9341D@syenar.hu>

Please do it. At the same time, current limited solution
in global.mk could be deleted.

I'd drop the error message ("! Skip installation...") from
your patch though, as it'd produce many lines in output
with little use to builders.

Brgds,
Viktor

On 2009 Sep 24, at 14:33, Przemyslaw Czerpak wrote:

> On Thu, 24 Sep 2009, Szak?ts Viktor wrote:
>
> Hi,
>
>> To be in sync with GNU Make to solve the same problem IMO easiest
>> would be to use os2cp in postinst too. (if there isn't any native
>> way to silence copy operation in OS/2 shell).
>
> In general using copy with the same source and destination file
> is bad idea and it may cause file corruption or data lost.
> If possible we should add protection against such situations.
> We should add such protection globally in instsh.mk.
> Now we have code like:
>
>   ifeq ($(INSTALL_DIR),) # Empty install dir
>      INSTALL_RULE := @$(ECHO) $(ECHOQUOTE)! Can't install, install  
> dir isn't set$(ECHOQUOTE)
>   else
>      [...] # installation
>   endif
>
> It should be enough top change it to sth like:
>
>   ifeq ($(INSTALL_DIR),) # Empty install dir
>      INSTALL_RULE := @$(ECHO) $(ECHOQUOTE)! Can't install, install  
> dir isn't set$(ECHOQUOTE)
>   else
>      ifeq ($(realpath $(INSTALL_DIR)),$(realpath .))
>         INSTALL_RULE := @$(ECHO) $(ECHOQUOTE)! Skip installation to  
> the same directory$(ECHOQUOTE)
>      else
>         [...] # installation
>      endif
>   endif
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From dbtopas at dbtopas.lt  Thu Sep 24 08:48:33 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Sep 24 08:49:22 2009
Subject: [Harbour] MS SQL and ODBC.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B99D@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B7F8@PINK.zycie.pzu>	<4AB90399.9090802@dbtopas.lt>
	<FFAFD6EA63A3FC4784FBDA52BE7A7C950280B99D@PINK.zycie.pzu>
Message-ID: <4ABB6AA1.8050408@dbtopas.lt>

Hi,

>> I can not check because I do not have MS SQL, but to make 
>> error more informative, I've passed field type to :osCode. You 
>> error log shows it is value 65527. Since it is USHORT value, 
>> it can also mean -9, if it is signed. I can not find nor -9 
>> neither 65527 field type sql.h. Varchar is defined equal to 
>> 12. More tests/docs required.
> 
> In attachment you can see type nvarchar( 300) in field NAZWA.
> In this table I see types : int, nvarchar( n), nchar( n), char(n) and
> tinyint.
> In other tables are too : datetime, decimal( n, n), smallint, money,
> bigint, float and varchar(n).
> Was this information is enough?

Not enough without full documentation, but you can try to change:
          case SQL_CHAR:
          case SQL_VARCHAR:
          case SQL_LONGVARCHAR:
            pFieldInfo.uiType = HB_FT_STRING;
            break;
to:
          case SQL_CHAR:
          case SQL_VARCHAR:
          case SQL_LONGVARCHAR:
          case -9:
            pFieldInfo.uiType = HB_FT_STRING;
            break;
in odbcdd.c.


Regards,
Mindaugas
From druzus at acn.waw.pl  Thu Sep 24 09:14:11 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 24 09:14:17 2009
Subject: [Harbour] bin/postinst.cmd
In-Reply-To: <36EAE8A0-3998-4050-81AB-0DDE9CE9341D@syenar.hu>
References: <4ABA2456.7020106@libero.it>
	<27427C4C-C84A-413B-A44B-E7323B407469@syenar.hu>
	<4ABA28F0.1030007@libero.it>
	<EB713F59-97FC-4D14-897D-CCB790EDEE33@syenar.hu>
	<4ABB5F59.20109@libero.it>
	<DE775FDE-818C-4765-A61B-02E4F8D70EB2@syenar.hu>
	<20090924123305.GA21716@uran.home.aster.pl>
	<36EAE8A0-3998-4050-81AB-0DDE9CE9341D@syenar.hu>
Message-ID: <20090924131411.GA23611@uran.home.aster.pl>

On Thu, 24 Sep 2009, Szak?ts Viktor wrote:

Hi,

> I'd drop the error message ("! Skip installation...") from
> your patch though, as it'd produce many lines in output
> with little use to builders.

IMHO it's better then:
   make: Nothing to be done for `install'.
which appears by default if I we do not set INSTALL_RULE.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Sep 24 09:19:35 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 09:19:44 2009
Subject: [Harbour] bin/postinst.cmd
In-Reply-To: <20090924131411.GA23611@uran.home.aster.pl>
References: <4ABA2456.7020106@libero.it>
	<27427C4C-C84A-413B-A44B-E7323B407469@syenar.hu>
	<4ABA28F0.1030007@libero.it>
	<EB713F59-97FC-4D14-897D-CCB790EDEE33@syenar.hu>
	<4ABB5F59.20109@libero.it>
	<DE775FDE-818C-4765-A61B-02E4F8D70EB2@syenar.hu>
	<20090924123305.GA21716@uran.home.aster.pl>
	<36EAE8A0-3998-4050-81AB-0DDE9CE9341D@syenar.hu>
	<20090924131411.GA23611@uran.home.aster.pl>
Message-ID: <D319522C-31A1-4208-B673-506CD60B9C2B@syenar.hu>

>> I'd drop the error message ("! Skip installation...") from
>> your patch though, as it'd produce many lines in output
>> with little use to builders.
>
> IMHO it's better then:
>   make: Nothing to be done for `install'.
> which appears by default if I we do not set INSTALL_RULE.

That's true, but can we somehow make it fully silent
with some tricky command?

Maybe define an $(ECHONUL) command with content
$(ECHO) > /dev/null|nul

Would that work?

Brgds,
Viktor

From druzus at users.sourceforge.net  Thu Sep 24 09:21:14 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Thu Sep 24 09:21:22 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12617] trunk/harbour
Message-ID: <E1MqoG2-0007AU-Av@bj8yhf1.ch3.sourceforge.com>

Revision: 12617
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12617&view=rev
Author:   druzus
Date:     2009-09-24 13:21:13 +0000 (Thu, 24 Sep 2009)

Log Message:
-----------
2009-09-24 15:21 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/config/instsh.mk
    ! added global protection against installing files to source location

  * harbour/config/global.mk
    * removed previous partial protection

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/global.mk
    trunk/harbour/config/instsh.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Thu Sep 24 09:31:06 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 24 09:31:13 2009
Subject: [Harbour] bin/postinst.cmd
In-Reply-To: <D319522C-31A1-4208-B673-506CD60B9C2B@syenar.hu>
References: <4ABA2456.7020106@libero.it>
	<27427C4C-C84A-413B-A44B-E7323B407469@syenar.hu>
	<4ABA28F0.1030007@libero.it>
	<EB713F59-97FC-4D14-897D-CCB790EDEE33@syenar.hu>
	<4ABB5F59.20109@libero.it>
	<DE775FDE-818C-4765-A61B-02E4F8D70EB2@syenar.hu>
	<20090924123305.GA21716@uran.home.aster.pl>
	<36EAE8A0-3998-4050-81AB-0DDE9CE9341D@syenar.hu>
	<20090924131411.GA23611@uran.home.aster.pl>
	<D319522C-31A1-4208-B673-506CD60B9C2B@syenar.hu>
Message-ID: <20090924133106.GA7909@uran.home.aster.pl>

On Thu, 24 Sep 2009, Szak?ts Viktor wrote:

Hi,

>> IMHO it's better then:
>>   make: Nothing to be done for `install'.
>> which appears by default if I we do not set INSTALL_RULE.
> That's true, but can we somehow make it fully silent
> with some tricky command?
> Maybe define an $(ECHONUL) command with content
> $(ECHO) > /dev/null|nul
> Would that work?

It's platform/shell dependent command so we should introduce new macro
for it. The best name will be TRUE and for POSIX shells it should be
defined as:
   TRUE=true
and it should be used in all places where we need dummy command which
does not set execution error.
Anyhow in this particular case I do not think that 1 message for
harbuor/install and on non *nix platforms two 2 harbour/doc and
harbour/doc/en-EN is enough reason to introduce it. More messages can
appear only if someone set BIN or LIB directory to default build time
localization but it's still only few messages.
I've just committed:
   INSTALL_RULE := @$(ECHO) $(ECHOQUOTE)! Skip install, destination dir '$(INSTALL_DIR)' is the same as source$(ECHOQUOTE)
what allows to verify destination directory settings. If you think it's
unnecessary then simply add support for TRUE command and replace it with:
   INSTALL_RULE := $(TRUE)

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Sep 24 09:58:28 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 09:58:36 2009
Subject: [Harbour] bin/postinst.cmd
In-Reply-To: <20090924133106.GA7909@uran.home.aster.pl>
References: <4ABA2456.7020106@libero.it>
	<27427C4C-C84A-413B-A44B-E7323B407469@syenar.hu>
	<4ABA28F0.1030007@libero.it>
	<EB713F59-97FC-4D14-897D-CCB790EDEE33@syenar.hu>
	<4ABB5F59.20109@libero.it>
	<DE775FDE-818C-4765-A61B-02E4F8D70EB2@syenar.hu>
	<20090924123305.GA21716@uran.home.aster.pl>
	<36EAE8A0-3998-4050-81AB-0DDE9CE9341D@syenar.hu>
	<20090924131411.GA23611@uran.home.aster.pl>
	<D319522C-31A1-4208-B673-506CD60B9C2B@syenar.hu>
	<20090924133106.GA7909@uran.home.aster.pl>
Message-ID: <03A424CF-1A5D-4532-A5F9-6D835EF74B65@syenar.hu>

>>> IMHO it's better then:
>>>  make: Nothing to be done for `install'.
>>> which appears by default if I we do not set INSTALL_RULE.
>> That's true, but can we somehow make it fully silent
>> with some tricky command?
>> Maybe define an $(ECHONUL) command with content
>> $(ECHO) > /dev/null|nul
>> Would that work?
>
> It's platform/shell dependent command so we should introduce new macro
> for it. The best name will be TRUE and for POSIX shells it should be
> defined as:
>   TRUE=true
> and it should be used in all places where we need dummy command which
> does not set execution error.
> Anyhow in this particular case I do not think that 1 message for
> harbuor/install and on non *nix platforms two 2 harbour/doc and
> harbour/doc/en-EN is enough reason to introduce it. More messages can
> appear only if someone set BIN or LIB directory to default build time
> localization but it's still only few messages.

This is the default case on non-*nix for lib, so it will be a lot
of messages there. [ I can't test it right now though. ]

> I've just committed:
>   INSTALL_RULE := @$(ECHO) $(ECHOQUOTE)! Skip install, destination  
> dir '$(INSTALL_DIR)' is the same as source$(ECHOQUOTE)
> what allows to verify destination directory settings. If you think  
> it's
> unnecessary then simply add support for TRUE command and replace it  
> with:
>   INSTALL_RULE := $(TRUE)

Thank you. I'll add TRUE and we can switch to that if it works.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Thu Sep 24 10:01:04 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 24 10:01:10 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12618] trunk/harbour
Message-ID: <E1Mqosa-0007wW-MR@bj8yhf1.ch3.sourceforge.com>

Revision: 12618
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12618&view=rev
Author:   vszakats
Date:     2009-09-24 14:01:03 +0000 (Thu, 24 Sep 2009)

Log Message:
-----------
2009-09-24 16:00 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * harbour/config/globsh.mk
    + Added command $(TRUE) as dummy one for all shells. Pls check.
      The goal is to have a command which does nothing just returns success.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/config/globsh.mk


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Thu Sep 24 10:21:01 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 24 10:21:08 2009
Subject: [Harbour] bin/postinst.cmd
In-Reply-To: <03A424CF-1A5D-4532-A5F9-6D835EF74B65@syenar.hu>
References: <4ABA28F0.1030007@libero.it>
	<EB713F59-97FC-4D14-897D-CCB790EDEE33@syenar.hu>
	<4ABB5F59.20109@libero.it>
	<DE775FDE-818C-4765-A61B-02E4F8D70EB2@syenar.hu>
	<20090924123305.GA21716@uran.home.aster.pl>
	<36EAE8A0-3998-4050-81AB-0DDE9CE9341D@syenar.hu>
	<20090924131411.GA23611@uran.home.aster.pl>
	<D319522C-31A1-4208-B673-506CD60B9C2B@syenar.hu>
	<20090924133106.GA7909@uran.home.aster.pl>
	<03A424CF-1A5D-4532-A5F9-6D835EF74B65@syenar.hu>
Message-ID: <20090924142101.GA18025@uran.home.aster.pl>

On Thu, 24 Sep 2009, Szak?ts Viktor wrote:
>> Anyhow in this particular case I do not think that 1 message for
>> harbuor/install and on non *nix platforms two 2 harbour/doc and
>> harbour/doc/en-EN is enough reason to introduce it. More messages can
>> appear only if someone set BIN or LIB directory to default build time
>> localization but it's still only few messages.
> This is the default case on non-*nix for lib, so it will be a lot
> of messages there. [ I can't test it right now though. ]

Still only few - one per library and executable file and they will replace
current:
   1 file(s) copied
so it does not increase the output too much.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Sep 24 10:38:40 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 10:38:50 2009
Subject: [Harbour] bin/postinst.cmd
In-Reply-To: <20090924142101.GA18025@uran.home.aster.pl>
References: <4ABA28F0.1030007@libero.it>
	<EB713F59-97FC-4D14-897D-CCB790EDEE33@syenar.hu>
	<4ABB5F59.20109@libero.it>
	<DE775FDE-818C-4765-A61B-02E4F8D70EB2@syenar.hu>
	<20090924123305.GA21716@uran.home.aster.pl>
	<36EAE8A0-3998-4050-81AB-0DDE9CE9341D@syenar.hu>
	<20090924131411.GA23611@uran.home.aster.pl>
	<D319522C-31A1-4208-B673-506CD60B9C2B@syenar.hu>
	<20090924133106.GA7909@uran.home.aster.pl>
	<03A424CF-1A5D-4532-A5F9-6D835EF74B65@syenar.hu>
	<20090924142101.GA18025@uran.home.aster.pl>
Message-ID: <4879D1E0-6DAF-4F15-ADE0-B668B1EAA0A9@syenar.hu>

On 2009 Sep 24, at 16:21, Przemyslaw Czerpak wrote:

> On Thu, 24 Sep 2009, Szak?ts Viktor wrote:
>>> Anyhow in this particular case I do not think that 1 message for
>>> harbuor/install and on non *nix platforms two 2 harbour/doc and
>>> harbour/doc/en-EN is enough reason to introduce it. More messages  
>>> can
>>> appear only if someone set BIN or LIB directory to default build  
>>> time
>>> localization but it's still only few messages.
>> This is the default case on non-*nix for lib, so it will be a lot
>> of messages there. [ I can't test it right now though. ]
>
> Still only few - one per library and executable file and they will  
> replace
> current:
>   1 file(s) copied
> so it does not increase the output too much.

True. I'd still prefer it not seeing ('1 file(s) copied' was quite  
annoying ;),
but I'll first check it live when some win machine is up, anyway I can  
live
with it either way. Please check TRUE command, it can be useful in  
some other
places, so it'd be good to get it right.

What about Maurilio's idea of using .prg code to replace postinst.*  
files?
(that file can still spawn scripts if needed for local customization)

Brgds,
Viktor

From druzus at acn.waw.pl  Thu Sep 24 10:54:26 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 24 10:59:12 2009
Subject: [Harbour] bin/postinst.cmd
In-Reply-To: <4879D1E0-6DAF-4F15-ADE0-B668B1EAA0A9@syenar.hu>
References: <4ABB5F59.20109@libero.it>
	<DE775FDE-818C-4765-A61B-02E4F8D70EB2@syenar.hu>
	<20090924123305.GA21716@uran.home.aster.pl>
	<36EAE8A0-3998-4050-81AB-0DDE9CE9341D@syenar.hu>
	<20090924131411.GA23611@uran.home.aster.pl>
	<D319522C-31A1-4208-B673-506CD60B9C2B@syenar.hu>
	<20090924133106.GA7909@uran.home.aster.pl>
	<03A424CF-1A5D-4532-A5F9-6D835EF74B65@syenar.hu>
	<20090924142101.GA18025@uran.home.aster.pl>
	<4879D1E0-6DAF-4F15-ADE0-B668B1EAA0A9@syenar.hu>
Message-ID: <20090924145426.GA7733@uran.home.aster.pl>

On Thu, 24 Sep 2009, Szak?ts Viktor wrote:
> What about Maurilio's idea of using .prg code to replace postinst.* files?
> (that file can still spawn scripts if needed for local customization)

As long as support for pure shell scripts can be optionally
activated by some envvars then it's OK for me.
I need shell scripts when I'm working with new platform.
It's much easier to update script to make tests then update
.prg code and rebuild Harbour. And of course they work even
if HVM is not fully ported and does not work yet.

best regards,
Przemek
From harbour.01 at syenar.hu  Thu Sep 24 11:20:40 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 11:20:49 2009
Subject: [Harbour] bin/postinst.cmd
In-Reply-To: <20090924145426.GA7733@uran.home.aster.pl>
References: <4ABB5F59.20109@libero.it>
	<DE775FDE-818C-4765-A61B-02E4F8D70EB2@syenar.hu>
	<20090924123305.GA21716@uran.home.aster.pl>
	<36EAE8A0-3998-4050-81AB-0DDE9CE9341D@syenar.hu>
	<20090924131411.GA23611@uran.home.aster.pl>
	<D319522C-31A1-4208-B673-506CD60B9C2B@syenar.hu>
	<20090924133106.GA7909@uran.home.aster.pl>
	<03A424CF-1A5D-4532-A5F9-6D835EF74B65@syenar.hu>
	<20090924142101.GA18025@uran.home.aster.pl>
	<4879D1E0-6DAF-4F15-ADE0-B668B1EAA0A9@syenar.hu>
	<20090924145426.GA7733@uran.home.aster.pl>
Message-ID: <B9F994B5-315E-48F2-B13F-2CB0047BE112@syenar.hu>

On 2009 Sep 24, at 16:54, Przemyslaw Czerpak wrote:

> On Thu, 24 Sep 2009, Szak?ts Viktor wrote:
>> What about Maurilio's idea of using .prg code to replace postinst.*  
>> files?
>> (that file can still spawn scripts if needed for local customization)
>
> As long as support for pure shell scripts can be optionally
> activated by some envvars then it's OK for me.
> I need shell scripts when I'm working with new platform.
> It's much easier to update script to make tests then update
> .prg code and rebuild Harbour. And of course they work even
> if HVM is not fully ported and does not work yet.

Yes, this should stay.

So as a next step we should probably have a new bin/postinst.prg,
which gets additionally executed by ./Makefile, after running the
scripts.

hbrun should be built in HB_BUILD_PARTS=compiler mode (also hbmk2
for that matter).

There one new catch: current postinst.bat does actually rebuild
hbrun to include the app icon, so this will have to be kept there
until we implement resource handling in GNU Make.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Thu Sep 24 11:43:11 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 24 11:43:17 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12619] trunk/harbour
Message-ID: <E1MqqTP-0000SE-Ec@c3vjzd1.ch3.sourceforge.com>

Revision: 12619
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12619&view=rev
Author:   vszakats
Date:     2009-09-24 15:43:10 +0000 (Thu, 24 Sep 2009)

Log Message:
-----------
2009-09-24 17:42 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * Makefile
  * utils/Makefile
    * Changed to build hbrun and hbmk2 in HB_BUILD_PARTS=compiler mode.
    + Added running bin/postinst.prg.

  + bin/postinst.prg
    + Added postinst.prg with test content.

  * package/winuni/RELNOTES
    * Added information about new MinGW CEGCC build.

  * utils/Makefile
    * Changed HB_UTILS setting name to HB_UTIL_ADDONS. To be 
      in sync with rest of similar settings.

  * INSTALL
    + Documented HB_UTIL_ADDONS setting. (formerly HB_UTILS)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/Makefile
    trunk/harbour/package/winuni/RELNOTES
    trunk/harbour/utils/Makefile

Added Paths:
-----------
    trunk/harbour/bin/postinst.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From M.Horodyski at pzuzycie.com.pl  Thu Sep 24 11:47:50 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Sep 24 11:47:59 2009
Subject: [Harbour] MS SQL and ODBC.
In-Reply-To: <4ABB6AA1.8050408@dbtopas.lt>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B7F8@PINK.zycie.pzu>	<4AB90399.9090802@dbtopas.lt><FFAFD6EA63A3FC4784FBDA52BE7A7C950280B99D@PINK.zycie.pzu>
	<4ABB6AA1.8050408@dbtopas.lt>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950288D81F@PINK.zycie.pzu>

>-----Original Message-----
>From: Mindaugas Kavaliauskas [mailto:dbtopas@dbtopas.lt] 
>Sent: Thursday, September 24, 2009 2:49 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] MS SQL and ODBC.
>
>Hi,

[ ... ]

>
>Not enough without full documentation, but you can try to change:
>          case SQL_CHAR:
>          case SQL_VARCHAR:
>          case SQL_LONGVARCHAR:
>            pFieldInfo.uiType = HB_FT_STRING;
>            break;
>to:
>          case SQL_CHAR:
>          case SQL_VARCHAR:
>          case SQL_LONGVARCHAR:
>          case -9:
>            pFieldInfo.uiType = HB_FT_STRING;
>            break;
>in odbcdd.c.

This helped, but only on nvarchar.
When I make "select *" problem still :

oErr:severity_____         2
oErr:osCode_______     65528
oErr:subsystem()__SDDODBC
oErr:subCode______      1902
oErr:description__Invalid field type
oErr:filename_____
oErr:operation____select * from KLIENT
          where nazwa like '%FABRYKA%'
oErr:genCode______        32

How can I adopt other types : char, nchar and tinyint ?

Regards,
Marek Horodyski
From alxokhotnikov at gmail.com  Thu Sep 24 12:15:28 2009
From: alxokhotnikov at gmail.com (alxokhotnikov)
Date: Thu Sep 24 12:15:35 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12593] trunk/harbour
In-Reply-To: <20090924102614.GA25988@uran.home.aster.pl>
References: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com>
	<4AB88DF5.7090704@dbtopas.lt> <4ABA2AB9.4020101@dbtopas.lt>
	<20090924102614.GA25988@uran.home.aster.pl>
Message-ID: <d6fa31440909240915w76e61d0bv7b9985fd2752d6fc@mail.gmail.com>

Hi

NETIO

locally (two processes)
adding 100000 entries - 80 seconds
Read all entries - 10 seconds
Update Records - 35 seconds

the network (two computers)
adding 100000 records - 320 seconds
Read all entries - 60 seconds
Update Records - 420 seconds

And all of this, any interruption of the client (eg, hanging) leads to
data corruption (index)


LetoDB

locally (two processes)
adding 100000 entries - 10 seconds
Read all entries - 2 seconds
Update Records - 18 seconds

the network (two computers)
adding 100000 entries - 45 seconds
Read all entries - 10 seconds
Update Records - 110 seconds

1. Data are not damaged
2. The results even better than the RDDADS

Maybe in the harbour add LetoDB (or take it as a basis)?

2009/9/24 Przemyslaw Czerpak <druzus@acn.waw.pl>:
> On Wed, 23 Sep 2009, Mindaugas Kavaliauskas wrote:
>> I want to share more test results after using memory FS in real project.
>> Report generation time (min:sec):
>> ? Local disk database ? ? ? ? ? ? ?3:07
>> ? Network database ? ? ? ? ? ? ? ?25:52
>> ? Local disk database and MemFS ? ?2:22 + 0:03 (copying to memory FS)
>> ? Network database and MemFS ? ? ? 2:24 + 0:13 (copying to memory FS)
>
> Very nice contribution and also final results.
>
> In last week I've found a while to make some test with NETIO and MS-Windows.
> The test were done on WinXP, SMB and NETIO servers were on Suse Linux, T100
> LAN. Any opportunistic locks in SMB server were disabled.
> The test program is attached below. I was testing only shared mode.
> I tested SMB, NETIO and also xHarbour REDBFCDX and there is not noticeable
> results. All tests gave results similar:
>
> Harbour 2.0.0beta3 (Rev. 12431), Windows XP 5.1.2600 Dodatek Service Pack 3
> RDD: DBFCDX type: CHARACTER (shared)
> records: 10000, repeated: 1, modulo: 10000
> creating database and index... ? ? ? ?69.66 sec.
> skip test... ? ? ? ? ? ? ? ? ? ? ? ? ?17.38 sec. count: 10000
> revers skip test... ? ? ? ? ? ? ? ? ? 17.28 sec. count: 10000
> testing seek... ? ? ? ? ? ? ? ? ? ? ? 17.28 sec. count: 10000
> goto test... ? ? ? ? ? ? ? ? ? ? ? ? ?17.34 sec. count: 10000
> goto+skip test... ? ? ? ? ? ? ? ? ? ? 30.38 sec. count: 10000
> skip test... ? ? ? ? ? ? ? ? ? ? ? ? ?17.41 sec. count: 10000
> revers skip test... ? ? ? ? ? ? ? ? ? 17.27 sec. count: 10000
> testing seek... ? ? ? ? ? ? ? ? ? ? ? 17.30 sec. count: 10000
> goto test... ? ? ? ? ? ? ? ? ? ? ? ? ?17.27 sec. count: 10000
> goto+skip test... ? ? ? ? ? ? ? ? ? ? 30.31 sec. count: 10000
> Total execution time... ? ? ? ? ? ? ?268.91 sec.
>
> and the difference were smaller then 0.5%. Just simply the net overhead
> is such huge that rest is unimportant.
> The difference can be seen only in local tests and here Harbour was
> faster then xHarbour but it's mostly result for faster Harbour VM.
>
> The local disk tests in WinXP and Harbour using DBFCDX with native IO
> took ~2.50 seconds. It means that in above test Harbour consumes less
> then 1% and rest is the cost of network overhead.
>
> BTW testing REDBFCDX do not forget to add RE_TURBO( .f. ) - REDBFCDX
> enables dirty reading by default or add Sx_SetTurbo( .t. ) to other
> RDDs to enable it too. Otherwise there is no sense to make any comparisons
> and probably it's also the reason why Miguel has better then native SMB
> protocol results testing REDBFCDX.
> Of course the difference strongly depends on hardware transport layer,
> the results in WAN or in T10/T1000/T10000 LANs can be completely different
> but this test clearly shows that to reach real speed improvement it's
> necessary to create RDD oriented server which can group IO operations
> in some bigger logical units to reduce number of packages which have to
> be send and confirmed. Operating only on transport layer like NETIO we
> can reach some small improvement yet, i.e. we can disable confirmation
> in UNLOCK operation what in above tests can increase the SKIP tests ~20%
> (Maybe I'll add such extension soon) or we can try to group some operations,
> i.e. join index lock and concurrent access counter read into single
> operation what may give even 50% speed improvement in the SKIP but it needs
> modifications in core RDD code so I do not like it because it may start
> very danger in longer terms process of adding local hacks to core RDD code.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From elart at elart.it  Thu Sep 24 12:16:47 2009
From: elart at elart.it (elart)
Date: Thu Sep 24 12:16:54 2009
Subject: [Harbour] Harbour 2.0.0beta3 (Rev. 12618) dirmake and /usr/include
	tree permissions...
Message-ID: <lAW78ySY.1253809007.5287410.marcobra@82.105.36.210>


I have this issue and i want to know how to solve...

I know i must don't use the install paths reported below but i used them
for almost all the time i compiling Harbour from svn more than 5 years
and in the future i change it.

Tha updated svn sources are in $HOME/src/harbour

In a script file i set exported variables:

export HB_BIN_INSTALL=/usr/bin
export HB_INSTALL_PREFIX=/usr/bin
export HB_LIB_INSTALL=/usr/lib
export HB_INC_INSTALL=/usr/include
export HB_BUILD_SHARED=no

make clean; make; sudo -E make install



Today i was compiling this simply prg

ubuntu@ubuntu:~/tmp$ cat p.prg
funct main()
dirmake("ppppppp")
return

with hbmk2 i get:

hbmk2 p
hbmk2: Processing configuration: /usr/bin/hbmk.cfg
Harbour 2.0.0beta3 (Rev. 12618)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 'p.prg'...
Lines 3, Functions/Procedures 1
Generating C source output to 'p.c'... Done.
p.o:(.data+0x38): undefined reference to `HB_FUN_DIRMAKE'
collect2: ld returned 1 exit status
hbmk2: Error: Running linker. 1
gcc p.o hbmk_dp7lf7.o   -Wl,--start-group -lhbextern -lhbdebug -lhbvm
-lhbrtl -lhblang -lhbcpage -lgtcgi -lgtpca -lgtstd -lgttrm -lhbrdd
-lhbuddall -lhbusrrdd -lrddntx -lrddcdx -lrddnsx -lrddfpt -lhbrdd
-lhbhsx -lhbsix -lhbmacro -lhbcplr -lhbpp -lhbcommon -lm -ldl -lrt
-lhbpcre -lhbzlib -lgpm  -Wl,--end-group -op -L/usr/lib

Please note my (never touched) /usr/bin/hbmk.cfg conf file.

cat /usr/bin/hbmk.cfg
# hbmk2 configuration
# Generated by Harbour build process

libpaths=../contrib/%{hb_name}
libpaths=../contrib/rddsql/%{hb_name}
libpaths=../addons/%{hb_name}
libpaths=../examples/%{hb_name}

syslibs={linux&gcc}gpm


Also after the install process of harbour i have all /usr/include files
and directory altered with wrong permissions...


Then... compiling previous reported simply p.prg file with hbmk


ubuntu@ubuntu:~/tmp$ hbmk p
Harbour 2.0.0beta3 (Rev. 12618)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 'p.prg'...
Lines 3, Functions/Procedures 2
Generating C source output to 'p.c'... Done.

ubuntu@ubuntu:~/tmp$ ./p
ubuntu@ubuntu:~/tmp$ ls -l
totale 20
-rwxr-xr-x 1 ubuntu ubuntu 9968 2009-09-24 17:56 p
drwxr-xr-x 2 ubuntu ubuntu 4096 2009-09-24 18:01 ppppppp
-rw-r--r-- 1 ubuntu ubuntu   39 2009-09-24 17:55 p.prg

I think i might have something to dress into the /usr/bin/hbmk.cfg conf
file.
and there be something wrong during install process of harbour because it
change the /usr/include tree files and dirs permissions.

Best regards and thank you
Marco
From harbour.01 at syenar.hu  Thu Sep 24 12:27:40 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 12:27:57 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12593] trunk/harbour
In-Reply-To: <d6fa31440909240915w76e61d0bv7b9985fd2752d6fc@mail.gmail.com>
References: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com>
	<4AB88DF5.7090704@dbtopas.lt> <4ABA2AB9.4020101@dbtopas.lt>
	<20090924102614.GA25988@uran.home.aster.pl>
	<d6fa31440909240915w76e61d0bv7b9985fd2752d6fc@mail.gmail.com>
Message-ID: <A3EA09D8-46A6-4D52-BB0B-5F98A41E192E@syenar.hu>

Dunno where to address this, but I tried LetoDB the other
day with production app, and instantly stumbled upon a
fatal because dbExists() isn't implemented.

I also had to patch source to fix hb_socket...() function
collision.

It'd be great if someone could fix these in LetoDB repository.

BTW I have nothing against hosting LetoDB in Harbour
repository, but here Alexander has the final word, so if
he also likes the idea, plus other Harbour developers also
agree, we can do it.

Brgds,
Viktor

On 2009 Sep 24, at 18:15, alxokhotnikov wrote:

> Hi
>
> NETIO
>
> locally (two processes)
> adding 100000 entries - 80 seconds
> Read all entries - 10 seconds
> Update Records - 35 seconds
>
> the network (two computers)
> adding 100000 records - 320 seconds
> Read all entries - 60 seconds
> Update Records - 420 seconds
>
> And all of this, any interruption of the client (eg, hanging) leads to
> data corruption (index)
>
>
> LetoDB
>
> locally (two processes)
> adding 100000 entries - 10 seconds
> Read all entries - 2 seconds
> Update Records - 18 seconds
>
> the network (two computers)
> adding 100000 entries - 45 seconds
> Read all entries - 10 seconds
> Update Records - 110 seconds
>
> 1. Data are not damaged
> 2. The results even better than the RDDADS
>
> Maybe in the harbour add LetoDB (or take it as a basis)?
>
> 2009/9/24 Przemyslaw Czerpak <druzus@acn.waw.pl>:
>> On Wed, 23 Sep 2009, Mindaugas Kavaliauskas wrote:
>>> I want to share more test results after using memory FS in real  
>>> project.
>>> Report generation time (min:sec):
>>>   Local disk database              3:07
>>>   Network database                25:52
>>>   Local disk database and MemFS    2:22 + 0:03 (copying to memory  
>>> FS)
>>>   Network database and MemFS       2:24 + 0:13 (copying to memory  
>>> FS)
>>
>> Very nice contribution and also final results.
>>
>> In last week I've found a while to make some test with NETIO and MS- 
>> Windows.
>> The test were done on WinXP, SMB and NETIO servers were on Suse  
>> Linux, T100
>> LAN. Any opportunistic locks in SMB server were disabled.
>> The test program is attached below. I was testing only shared mode.
>> I tested SMB, NETIO and also xHarbour REDBFCDX and there is not  
>> noticeable
>> results. All tests gave results similar:
>>
>> Harbour 2.0.0beta3 (Rev. 12431), Windows XP 5.1.2600 Dodatek  
>> Service Pack 3
>> RDD: DBFCDX type: CHARACTER (shared)
>> records: 10000, repeated: 1, modulo: 10000
>> creating database and index...        69.66 sec.
>> skip test...                          17.38 sec. count: 10000
>> revers skip test...                   17.28 sec. count: 10000
>> testing seek...                       17.28 sec. count: 10000
>> goto test...                          17.34 sec. count: 10000
>> goto+skip test...                     30.38 sec. count: 10000
>> skip test...                          17.41 sec. count: 10000
>> revers skip test...                   17.27 sec. count: 10000
>> testing seek...                       17.30 sec. count: 10000
>> goto test...                          17.27 sec. count: 10000
>> goto+skip test...                     30.31 sec. count: 10000
>> Total execution time...              268.91 sec.
>>
>> and the difference were smaller then 0.5%. Just simply the net  
>> overhead
>> is such huge that rest is unimportant.
>> The difference can be seen only in local tests and here Harbour was
>> faster then xHarbour but it's mostly result for faster Harbour VM.
>>
>> The local disk tests in WinXP and Harbour using DBFCDX with native IO
>> took ~2.50 seconds. It means that in above test Harbour consumes less
>> then 1% and rest is the cost of network overhead.
>>
>> BTW testing REDBFCDX do not forget to add RE_TURBO( .f. ) - REDBFCDX
>> enables dirty reading by default or add Sx_SetTurbo( .t. ) to other
>> RDDs to enable it too. Otherwise there is no sense to make any  
>> comparisons
>> and probably it's also the reason why Miguel has better then native  
>> SMB
>> protocol results testing REDBFCDX.
>> Of course the difference strongly depends on hardware transport  
>> layer,
>> the results in WAN or in T10/T1000/T10000 LANs can be completely  
>> different
>> but this test clearly shows that to reach real speed improvement it's
>> necessary to create RDD oriented server which can group IO operations
>> in some bigger logical units to reduce number of packages which  
>> have to
>> be send and confirmed. Operating only on transport layer like NETIO  
>> we
>> can reach some small improvement yet, i.e. we can disable  
>> confirmation
>> in UNLOCK operation what in above tests can increase the SKIP tests  
>> ~20%
>> (Maybe I'll add such extension soon) or we can try to group some  
>> operations,
>> i.e. join index lock and concurrent access counter read into single
>> operation what may give even 50% speed improvement in the SKIP but  
>> it needs
>> modifications in core RDD code so I do not like it because it may  
>> start
>> very danger in longer terms process of adding local hacks to core  
>> RDD code.
>>
>> best regards,
>> Przemek
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From dbtopas at dbtopas.lt  Thu Sep 24 12:31:59 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Sep 24 12:32:48 2009
Subject: [Harbour] MS SQL and ODBC.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950288D81F@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B7F8@PINK.zycie.pzu>	<4AB90399.9090802@dbtopas.lt><FFAFD6EA63A3FC4784FBDA52BE7A7C950280B99D@PINK.zycie.pzu>	<4ABB6AA1.8050408@dbtopas.lt>
	<FFAFD6EA63A3FC4784FBDA52BE7A7C950288D81F@PINK.zycie.pzu>
Message-ID: <4ABB9EFF.8000405@dbtopas.lt>

Hi,

>> to:
>>          case SQL_CHAR:
>>          case SQL_VARCHAR:
>>          case SQL_LONGVARCHAR:
>>          case -9:
>>            pFieldInfo.uiType = HB_FT_STRING;
>>            break;
>> in odbcdd.c.
> 
> This helped, but only on nvarchar.
> When I make "select *" problem still :
> 
> oErr:severity_____         2
> oErr:osCode_______     65528

65528 = -8

It is also not defined or documented. So, add -8 in a same way as -9, to 
a type you guess it should correspond.


Regards,
Mindaugas
From cvc at oohg.org  Thu Sep 24 12:33:03 2009
From: cvc at oohg.org (Ciro Vargas C)
Date: Thu Sep 24 12:33:12 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12593] trunk/harbour
In-Reply-To: <A3EA09D8-46A6-4D52-BB0B-5F98A41E192E@syenar.hu>
References: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com>
	<4AB88DF5.7090704@dbtopas.lt> <4ABA2AB9.4020101@dbtopas.lt>
	<20090924102614.GA25988@uran.home.aster.pl>
	<d6fa31440909240915w76e61d0bv7b9985fd2752d6fc@mail.gmail.com>
	<A3EA09D8-46A6-4D52-BB0B-5F98A41E192E@syenar.hu>
Message-ID: <d6500b450909240933g209eac58k414d947d5afb8f52@mail.gmail.com>

Hi Viktor:

I'm only a user but  I agree

best regards
Ciro

2009/9/24 Viktor Szak?ts <harbour.01@syenar.hu>:
> Dunno where to address this, but I tried LetoDB the other
> day with production app, and instantly stumbled upon a
> fatal because dbExists() isn't implemented.
>
> I also had to patch source to fix hb_socket...() function
> collision.
>
> It'd be great if someone could fix these in LetoDB repository.
>
> BTW I have nothing against hosting LetoDB in Harbour
> repository, but here Alexander has the final word, so if
> he also likes the idea, plus other Harbour developers also
> agree, we can do it.
>
> Brgds,
> Viktor
>
> On 2009 Sep 24, at 18:15, alxokhotnikov wrote:
>
>> Hi
>>
>> NETIO
>>
>> locally (two processes)
>> adding 100000 entries - 80 seconds
>> Read all entries - 10 seconds
>> Update Records - 35 seconds
>>
>> the network (two computers)
>> adding 100000 records - 320 seconds
>> Read all entries - 60 seconds
>> Update Records - 420 seconds
>>
>> And all of this, any interruption of the client (eg, hanging) leads to
>> data corruption (index)
>>
>>
>> LetoDB
>>
>> locally (two processes)
>> adding 100000 entries - 10 seconds
>> Read all entries - 2 seconds
>> Update Records - 18 seconds
>>
>> the network (two computers)
>> adding 100000 entries - 45 seconds
>> Read all entries - 10 seconds
>> Update Records - 110 seconds
>>
>> 1. Data are not damaged
>> 2. The results even better than the RDDADS
>>
>> Maybe in the harbour add LetoDB (or take it as a basis)?
>>
>> 2009/9/24 Przemyslaw Czerpak <druzus@acn.waw.pl>:
>>>
>>> On Wed, 23 Sep 2009, Mindaugas Kavaliauskas wrote:
>>>>
>>>> I want to share more test results after using memory FS in real project.
>>>> Report generation time (min:sec):
>>>> ?Local disk database ? ? ? ? ? ? ?3:07
>>>> ?Network database ? ? ? ? ? ? ? ?25:52
>>>> ?Local disk database and MemFS ? ?2:22 + 0:03 (copying to memory FS)
>>>> ?Network database and MemFS ? ? ? 2:24 + 0:13 (copying to memory FS)
>>>
>>> Very nice contribution and also final results.
>>>
>>> In last week I've found a while to make some test with NETIO and
>>> MS-Windows.
>>> The test were done on WinXP, SMB and NETIO servers were on Suse Linux,
>>> T100
>>> LAN. Any opportunistic locks in SMB server were disabled.
>>> The test program is attached below. I was testing only shared mode.
>>> I tested SMB, NETIO and also xHarbour REDBFCDX and there is not
>>> noticeable
>>> results. All tests gave results similar:
>>>
>>> Harbour 2.0.0beta3 (Rev. 12431), Windows XP 5.1.2600 Dodatek Service Pack
>>> 3
>>> RDD: DBFCDX type: CHARACTER (shared)
>>> records: 10000, repeated: 1, modulo: 10000
>>> creating database and index... ? ? ? ?69.66 sec.
>>> skip test... ? ? ? ? ? ? ? ? ? ? ? ? ?17.38 sec. count: 10000
>>> revers skip test... ? ? ? ? ? ? ? ? ? 17.28 sec. count: 10000
>>> testing seek... ? ? ? ? ? ? ? ? ? ? ? 17.28 sec. count: 10000
>>> goto test... ? ? ? ? ? ? ? ? ? ? ? ? ?17.34 sec. count: 10000
>>> goto+skip test... ? ? ? ? ? ? ? ? ? ? 30.38 sec. count: 10000
>>> skip test... ? ? ? ? ? ? ? ? ? ? ? ? ?17.41 sec. count: 10000
>>> revers skip test... ? ? ? ? ? ? ? ? ? 17.27 sec. count: 10000
>>> testing seek... ? ? ? ? ? ? ? ? ? ? ? 17.30 sec. count: 10000
>>> goto test... ? ? ? ? ? ? ? ? ? ? ? ? ?17.27 sec. count: 10000
>>> goto+skip test... ? ? ? ? ? ? ? ? ? ? 30.31 sec. count: 10000
>>> Total execution time... ? ? ? ? ? ? ?268.91 sec.
>>>
>>> and the difference were smaller then 0.5%. Just simply the net overhead
>>> is such huge that rest is unimportant.
>>> The difference can be seen only in local tests and here Harbour was
>>> faster then xHarbour but it's mostly result for faster Harbour VM.
>>>
>>> The local disk tests in WinXP and Harbour using DBFCDX with native IO
>>> took ~2.50 seconds. It means that in above test Harbour consumes less
>>> then 1% and rest is the cost of network overhead.
>>>
>>> BTW testing REDBFCDX do not forget to add RE_TURBO( .f. ) - REDBFCDX
>>> enables dirty reading by default or add Sx_SetTurbo( .t. ) to other
>>> RDDs to enable it too. Otherwise there is no sense to make any
>>> comparisons
>>> and probably it's also the reason why Miguel has better then native SMB
>>> protocol results testing REDBFCDX.
>>> Of course the difference strongly depends on hardware transport layer,
>>> the results in WAN or in T10/T1000/T10000 LANs can be completely
>>> different
>>> but this test clearly shows that to reach real speed improvement it's
>>> necessary to create RDD oriented server which can group IO operations
>>> in some bigger logical units to reduce number of packages which have to
>>> be send and confirmed. Operating only on transport layer like NETIO we
>>> can reach some small improvement yet, i.e. we can disable confirmation
>>> in UNLOCK operation what in above tests can increase the SKIP tests ~20%
>>> (Maybe I'll add such extension soon) or we can try to group some
>>> operations,
>>> i.e. join index lock and concurrent access counter read into single
>>> operation what may give even 50% speed improvement in the SKIP but it
>>> needs
>>> modifications in core RDD code so I do not like it because it may start
>>> very danger in longer terms process of adding local hacks to core RDD
>>> code.
>>>
>>> best regards,
>>> Przemek
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
http://www.oohg.prg
http://sistemascvc.tripod.com

donaciones para CVC de ooHG

https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=5369884
From harbour.01 at syenar.hu  Thu Sep 24 12:38:19 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 12:38:36 2009
Subject: [Harbour] Harbour 2.0.0beta3 (Rev. 12618) dirmake and
	/usr/include tree permissions...
In-Reply-To: <lAW78ySY.1253809007.5287410.marcobra@82.105.36.210>
References: <lAW78ySY.1253809007.5287410.marcobra@82.105.36.210>
Message-ID: <BBEB6BB7-15A2-4485-960B-F482CA6EEDBC@syenar.hu>

> Today i was compiling this simply prg
>
> ubuntu@ubuntu:~/tmp$ cat p.prg
> funct main()
> dirmake("ppppppp")
> return
>
> with hbmk2 i get:
>
> hbmk2 p
> hbmk2: Processing configuration: /usr/bin/hbmk.cfg
> Harbour 2.0.0beta3 (Rev. 12618)
> Copyright (c) 1999-2009, http://www.harbour-project.org/
> Compiling 'p.prg'...
> Lines 3, Functions/Procedures 1
> Generating C source output to 'p.c'... Done.
> p.o:(.data+0x38): undefined reference to `HB_FUN_DIRMAKE'
> collect2: ld returned 1 exit status
> hbmk2: Error: Running linker. 1
> gcc p.o hbmk_dp7lf7.o   -Wl,--start-group -lhbextern -lhbdebug -lhbvm
> -lhbrtl -lhblang -lhbcpage -lgtcgi -lgtpca -lgtstd -lgttrm -lhbrdd
> -lhbuddall -lhbusrrdd -lrddntx -lrddcdx -lrddnsx -lrddfpt -lhbrdd
> -lhbhsx -lhbsix -lhbmacro -lhbcplr -lhbpp -lhbcommon -lm -ldl -lrt
> -lhbpcre -lhbzlib -lgpm  -Wl,--end-group -op -L/usr/lib
>
> Please note my (never touched) /usr/bin/hbmk.cfg conf file.

DIRMAKE() is a hbct function, so you should add -lhbct option
to you hbmk2 cmdline.

hbmk probably includes this lib by default, that's the reason
it links.

I don't plan to add any hard-wired references of 3rd party
(including Harbour contribs) to hbmk2 code, for clean separation
of components. But you can very easily add it through hbmk.cfg
or hbmk.hbm, (just to mention the two most obvious in this case).

The include permission thing is something done in postinst.sh
and I hope Przemek can take an expert look on it, and give it
fix.

Brgds,
Viktor

From druzus at acn.waw.pl  Thu Sep 24 12:39:13 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 24 12:39:19 2009
Subject: [Harbour] Harbour 2.0.0beta3 (Rev. 12618) dirmake and
	/usr/include tree permissions...
In-Reply-To: <lAW78ySY.1253809007.5287410.marcobra@82.105.36.210>
References: <lAW78ySY.1253809007.5287410.marcobra@82.105.36.210>
Message-ID: <20090924163913.GA17660@uran.home.aster.pl>

On Thu, 24 Sep 2009, elart wrote:

Hi,

[...]
> I think i might have something to dress into the /usr/bin/hbmk.cfg conf
> file.
> and there be something wrong during install process of harbour because it
> change the /usr/include tree files and dirs permissions.

Viktor, Marco is right here. I haven't noticed it so far. I've only
seen similar problem with strip but because you removed 'strip *' command
from postinst.sh I haven't wrote about it.
I see that you copied from mpkg_tgz.sh/harbour.spec to postinst.ch
this line:
   chmod 644 $HB_INC_INSTALL/*
It has to be removed.
Both mpkg_tgz.sh and harbour.spec were working on local directories
only so it was safe to make such trick but here you are operating on
real system directories so it's very serious bug which have to be fixed.

There is also problem with current mpkg_tgz.sh. It was always operating
on local directories only so user could execute it from non root account.
Now it operates on real system directories so it's not possible to
create packages without write permissions to system directories and
creating packages makes also hidden upgrade of Harbour system wide
installation.

best regards,
Przemek
From druzus at acn.waw.pl  Thu Sep 24 12:42:23 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Sep 24 12:42:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12593] trunk/harbour
In-Reply-To: <20090924102614.GA25988@uran.home.aster.pl>
References: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com>
	<4AB88DF5.7090704@dbtopas.lt> <4ABA2AB9.4020101@dbtopas.lt>
	<20090924102614.GA25988@uran.home.aster.pl>
Message-ID: <20090924164223.GA2944@uran.home.aster.pl>

On Thu, 24 Sep 2009, Przemyslaw Czerpak wrote:
> The test program is attached below. I was testing only shared mode.

I forger about attachment.
Now test code included.

best regards,
Przemek
-------------- next part --------------
//#define TST_NUM
//#define TST_DAT
//#define TST_CHR

#ifndef TST_NUM
  #ifndef TST_DAT
    #ifndef TST_CHR
      #define TST_CHR
    #endif
  #endif
#endif

#define TST_SILENT

//#define NO_ORDKEYVAL
static nLoops := 10000
static nModulo := 10000
static nRepeat := 1

#ifdef _SIX3_
  #xtranslate ordkeyval([<xx,...>]) => sx_keyData([<xx>])
#endif


field FTST

#ifdef TST_ADS
#include "ads.ch"
REQUEST ADS
init proc tst_rddInit()
AdsSetServerType( ADS_LOCAL_SERVER )
return
#endif

proc main(rdd, xLoops, xModulo, xRepeat, xLateInd, xReUse, xExcl)
local aDb, n, cFi:="./_tstdb", cNet:="", tm, total:=seconds(), cType,;
      lLateInd:=!empty( xLateInd ), lReUse:=!empty(xReUse),;
      pConn

set alternate to nettio.log additive
set alternate on

?

#ifdef __HARBOUR__
// SET DBFLOCKSCHEME TO 5
#endif
#ifdef __CLIP__
  SET TRANSLATE PATH OFF
#endif
#ifndef FlahShip
  #ifdef _SIX_
    REQUEST SIXCDX
    REQUEST SIXNSX
    REQUEST SIXNTX
  #else
    REQUEST DBFCDX
    REQUEST DBFNTX
    #ifdef __HARBOUR__
      REQUEST DBFNSX
    #endif
  #endif
#endif

? VERSION()+", "+OS()
if empty(xExcl)
  SET EXCLUSIVE OFF
else
  SET EXCLUSIVE ON
endif
#ifdef TST_NUM
  cType := "NUMERIC"
  aDb:={{"FTST", "N", 20, 9}}
#endif
#ifdef TST_DAT
  cType :=  "DATE"
  aDb:={{"FTST", "D", 8, 0}}
#endif
#ifdef TST_CHR
  cType :=  "CHARACTER"
  aDb:={{"FTST", "C", 20, 0}}
#endif

if !empty( xLoops )
  nLoops := val( xLoops )
endif
if !empty( xModulo )
  nModulo := val( xModulo )
  if nModulo == 0
    nModulo := nLoops
  endif
endif
if !empty( xRepeat )
  nRepeat := val( xRepeat )
  if nRepeat == 0
    nRepeat := 1
  endif
endif

if !empty(rdd) .and. upper(rdd)="NET:"
   n:=rat(":",rdd)
   cNet:=left(rdd,n)
   rdd:=substr(rdd,n+1)
#ifdef __HARBOUR__
   #ifndef __XHARBOUR__
      NETIO_CONNECT()
   #endif
#endif
endif

#ifdef __HARBOUR__
   /* disable dirty reading in native RDDs */
   Sx_SetTurbo( .f. )
#endif

#ifdef __XHARBOUR__
   request BMDBFCDX
   request REDBFCDX
   /* disable dirty reading in REDBFCDX RDD - it's enabled by default */
   RE_TURBO( .f. )
   if !empty(rdd) .and. upper(rdd) = "REDBFCDX"
      n:=rat(":",rdd)
      if n != 0
         cNet:=substr(rdd,n+1)
         rdd:=left(rdd,n-1)
      endif
      if empty(cNet)
         cNet:="127.0.0.1"
      endif
      ? "connecting to: " + cNet + ":2813"
      pConn := NET_OPENCONNECTION( cNet, 2813 )
      if empty( pConn )
         ? "cannot connect to the server."
         return
      endif
      cNet:=""
   endif
#endif

if empty(rdd)
#ifdef FlahShip
  rdd:="DBFIDX"
#else
  rdd:="DBFCDX"
#endif
endif

rddSetDefault(rdd)

? "RDD: " + cNet + rdd + " type: " + cType + iif(empty(xExcl), " (shared) ", " (exclusive) ")
? "records: " + ntrim( nLoops ) + ;
  ", repeated: " + ntrim( nRepeat ) + ;
  ", modulo: " + ntrim( nModulo )

if !lReUse
  aeval(directory(cFi+".??x"),{|x|ferase(x[1])})
  ferase(cFi+".dbf")

  ? padr("creating database"+iif(lLateInd, "", " and index")+"...", 30)
  tm := seconds()
  dbcreate(cNet+cFi, aDb)
  use (cNet+cFi)
  if !lLateInd
    if "NTX" $ upper(rdd)
      index on FTST to (cNet+cFi)
    else
      index on FTST tag tg1 to (cNet+cFi)
    endif
    close
    use (cNet+cFi) alias cFi
    set Index To (cNet+cFi)
    set Order To 1
  endif
  for n:=1 to nLoops
    dbappend()
    replace FTST with dbval(n)
#ifndef TST_SILENT
    indexar2(nLoops)
#endif
  next
  dbcommit()
  ?? seconds() - tm, "sec."
  if lLateInd
    ? padr("creating index...", 30)
    tm := seconds()
    if "NTX" $ upper(rdd)
#ifndef TST_SILENT
      index on FTST to (cNet+cFi) eval indexar()
#else
      index on FTST to (cNet+cFi)
#endif
    else
#ifndef TST_SILENT
      index on FTST tag tg1 to (cNet+cFi) eval indexar()
#else
      index on FTST tag tg1 to (cNet+cFi)
#endif
    endif
    dbcommit()
    ?? seconds() - tm, "sec."
  endif
  close
endif
use (cNet+cFi)
set Index To (cNet+cFi)
set Order To 1

testskip()
testrskip()
#ifndef NO_SEEK_TEST
testseek()
#endif
testgoto()
testgotoskip()

testskip()
testrskip()
#ifndef NO_SEEK_TEST
testseek()
#endif
testgoto()
testgotoskip()

dbclosearea()

? padr("Total execution time...",30)
?? seconds() - total, "sec."
?

#ifdef __XHARBOUR__
   if pConn != NIL
      NET_CLOSECONNECTION( pConn )
   endif
#endif

return

function testskip()
local tm, vcur, vold, rcur, rold, l:=0
? padr("skip test...", 30)
tm := seconds()
dbgotop()
while !eof()
  ++l
  vcur:=FTST
  rcur:=recno()
#ifndef NO_ORDKEYVAL
  if ordkeyval()!=dbval(recno())
    ? " ordkeyval="+dspval(ordkeyval())+", dbval="+dspval(dbval(recno()))
  endif
  if rold!=nil .and. (vcur < vold .or. (vcur == vold .and. rcur <= rold ))
    ? " skip faild: curr=["+dspval(vcur)+"]["+ntrim(rcur)+"] prev=["+dspval(vold)+"]["+ntrim(rold)+"]"
  endif
#endif
  vold:=vcur
  rold:=rold
  dbskip()
enddo
?? seconds() - tm, "sec. count: "+ntrim(l)
return nil

function testrskip()
local tm, vcur, vold, rcur, rold, l:=0
? padr("revers skip test...", 30)
tm := seconds()
dbgobottom()
while !bof()
  ++l
  vcur:=FTST
  rcur:=recno()
#ifndef NO_ORDKEYVAL
  if ordkeyval()!=dbval(recno())
    ? " ordkeyval="+dspval(ordkeyval())+", dbval="+dspval(dbval(recno()))
  endif
  if rold!=nil .and. (vcur > vold .or. (vcur == vold .and. rcur >= rold ))
    ? " skip faild: curr=["+dspval(vcur)+"]["+ntrim(rcur)+"] prev=["+dspval(vold)+"]["+ntrim(rold)+"]"
  endif
#endif
  vold:=vcur
  rold:=rold
  dbskip(-1)
enddo
?? seconds() - tm, "sec. count: "+ntrim(l)

return nil

function testseek()
local tm, x, n
? padr("testing seek...", 30)
tm := seconds()
for n:=1 to nLoops
  if !dbseek(x:=dbval(n))
    ? "seek faild: "+dspval(x)
#ifndef NO_ORDKEYVAL
  elseif ordkeyval()!=x .or. FTST!=x
    ? " ordkeyval="+dspval(ordkeyval())+", dbval="+dspval(dbval(n))
#endif
  endif
next
?? seconds() - tm, "sec. count: "+ntrim(n-1)
return nil

function testgoto()
local tm, n
? padr("goto test...", 30)
tm := seconds()
for n:=1 to nLoops-1
  dbgoto(n)
#ifndef NO_ORDKEYVAL
  if ordkeyval()!=dbval(recno())
    ? " ordkeyval="+dspval(ordkeyval())+", dbval="+dspval(dbval(recno()))
  endif
#else
  dbskip(1)
  dbskip(-1)
#endif
next
?? seconds() - tm, "sec. count: "+ntrim(n)
return nil

function testgotoskip()
local tm, n
? padr("goto+skip test...", 30)
tm := seconds()
for n:=1 to nLoops-1
  dbgoto(n)
  dbskip(1)
  dbskip(-1)
#ifndef NO_ORDKEYVAL
  if ordkeyval()!=dbval(recno())
    ? " ordkeyval="+dspval(ordkeyval())+", dbval="+dspval(dbval(recno()))
  endif
#else
  dbskip(1)
  dbskip(-1)
#endif
next
?? seconds() - tm, "sec. count: "+ntrim(n)
return nil

function ntrim(n)
return ltrim(str(n))

function indexar()
fwrite(2, str(recno()/lastrec()*100,6,2) + repl(chr(8),6))
//fwrite(2, str(100,6,2) + repl(chr(8),6))
return (.t.)

function indexar2(n)
fwrite(2, str(recno()/n*100,6,2) + repl(chr(8),6))
return (.t.)

function baseval(nn)
return ( int( nn / nRepeat ) % nModulo ) - ;
       int( ( int( nLoops / nRepeat ) % nModulo ) / 2 )

#ifdef TST_NUM
    function dbval(nn)
    return round( baseval(nn) / 1000, 4 )
    function dspval(x)
    return iif(x==NIL,"NIL",ntrim(x))
#endif
#ifdef TST_DAT
    function dbval(nn)
    static dt
    if dt==nil
      dt:=ctod("01/01/2001")
    endif
    return dt + (baseval(nn) % 500000)
    function dspval(x)
    return iif(x==NIL,"NIL",dtos(x))
#endif
#ifdef TST_CHR
    function dbval(nn)
    return str( baseval(nn) + nLoops + nLoops )
    function dspval(x)
    return iif(x==NIL,"NIL",x)
#endif
From vszakats at users.sourceforge.net  Thu Sep 24 12:43:10 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 24 12:43:17 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12620] trunk/harbour
Message-ID: <E1MqrPS-0000tp-Rk@d5vjzd1.ch3.sourceforge.com>

Revision: 12620
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12620&view=rev
Author:   vszakats
Date:     2009-09-24 16:43:03 +0000 (Thu, 24 Sep 2009)

Log Message:
-----------
2009-09-24 18:41 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * bin/postinst.sh
    ! Commented messing around with include attribs.
      I guess this should only be done if HB_INSTALL_PREFIX is some 
      temp area where we assemble distro package.
      Fixme.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/postinst.sh


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From alich at gmx.de  Thu Sep 24 12:45:41 2009
From: alich at gmx.de (alich@gmx.de)
Date: Thu Sep 24 12:46:48 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12593] trunk/harbour
In-Reply-To: <d6500b450909240933g209eac58k414d947d5afb8f52@mail.gmail.com>
References: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com>	<4AB88DF5.7090704@dbtopas.lt>
	<4ABA2AB9.4020101@dbtopas.lt>	<20090924102614.GA25988@uran.home.aster.pl>	<d6fa31440909240915w76e61d0bv7b9985fd2752d6fc@mail.gmail.com>	<A3EA09D8-46A6-4D52-BB0B-5F98A41E192E@syenar.hu>
	<d6500b450909240933g209eac58k414d947d5afb8f52@mail.gmail.com>
Message-ID: <4ABBA235.4080008@gmx.de>

Hi Victor,

I am only a user too. I would prefer if LetoDB will be in Harbour 
repository.

Best Regards,
Ruediger

> Hi Viktor:
>
> I'm only a user but  I agree
>
> best regards
> Ciro
>
> 2009/9/24 Viktor Szak?ts <harbour.01@syenar.hu>:
>   
>> Dunno where to address this, but I tried LetoDB the other
>> day with production app, and instantly stumbled upon a
>> fatal because dbExists() isn't implemented.
>>
>> I also had to patch source to fix hb_socket...() function
>> collision.
>>
>> It'd be great if someone could fix these in LetoDB repository.
>>
>> BTW I have nothing against hosting LetoDB in Harbour
>> repository, but here Alexander has the final word, so if
>> he also likes the idea, plus other Harbour developers also
>> agree, we can do it.
>>
>> Brgds,
>> Viktor
>>     

From harbour.01 at syenar.hu  Thu Sep 24 12:52:25 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 12:52:36 2009
Subject: [Harbour] Harbour 2.0.0beta3 (Rev. 12618) dirmake and
	/usr/include tree permissions...
In-Reply-To: <20090924163913.GA17660@uran.home.aster.pl>
References: <lAW78ySY.1253809007.5287410.marcobra@82.105.36.210>
	<20090924163913.GA17660@uran.home.aster.pl>
Message-ID: <EBB8EA05-076A-44FF-8FDE-50ECDEBD981E@syenar.hu>

Yes, I realized it, see just committed change.

I'd appreciate if you could help here. As a general direction
IMO we should try to do such installation work in postinst phase
and now with .prg code this might actually be something more
convenient than before.

I don't know if this is useful in this specific case, but maybe.

On non-*nix it works that way already and it uses
./pkg/<plat>/<comp><name> dir to create dir layout required
for packaging. Maybe this idea can be used for *nix, too.

It's currently controlled by HB_BUILD_PKG=yes, but it can
be extended by addition values, like 'src-zip', 'src-tgz', 'src-bz2'
'bin-tgz', 'yes' could mean 'rpm', 'deb' or 'pkg' (or else)
depending on host/target platform.

HB_BUILD_PKG may be replaced by make target, but it seems
we'd lose some level of flexibility.

Brgds,
Viktor

On 2009 Sep 24, at 18:39, Przemyslaw Czerpak wrote:

> On Thu, 24 Sep 2009, elart wrote:
>
> Hi,
>
> [...]
>> I think i might have something to dress into the /usr/bin/hbmk.cfg  
>> conf
>> file.
>> and there be something wrong during install process of harbour  
>> because it
>> change the /usr/include tree files and dirs permissions.
>
> Viktor, Marco is right here. I haven't noticed it so far. I've only
> seen similar problem with strip but because you removed 'strip *'  
> command
> from postinst.sh I haven't wrote about it.
> I see that you copied from mpkg_tgz.sh/harbour.spec to postinst.ch
> this line:
>   chmod 644 $HB_INC_INSTALL/*
> It has to be removed.
> Both mpkg_tgz.sh and harbour.spec were working on local directories
> only so it was safe to make such trick but here you are operating on
> real system directories so it's very serious bug which have to be  
> fixed.
>
> There is also problem with current mpkg_tgz.sh. It was always  
> operating
> on local directories only so user could execute it from non root  
> account.
> Now it operates on real system directories so it's not possible to
> create packages without write permissions to system directories and
> creating packages makes also hidden upgrade of Harbour system wide
> installation.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From M.Horodyski at pzuzycie.com.pl  Thu Sep 24 12:53:46 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Sep 24 12:53:54 2009
Subject: [Harbour] MS SQL and ODBC.
In-Reply-To: <4ABB9EFF.8000405@dbtopas.lt>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B7F8@PINK.zycie.pzu>	<4AB90399.9090802@dbtopas.lt><FFAFD6EA63A3FC4784FBDA52BE7A7C950280B99D@PINK.zycie.pzu>	<4ABB6AA1.8050408@dbtopas.lt><FFAFD6EA63A3FC4784FBDA52BE7A7C950288D81F@PINK.zycie.pzu>
	<4ABB9EFF.8000405@dbtopas.lt>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950288D821@PINK.zycie.pzu>

Viktor, how can I rebuild only  lib sddodbc ?

>-----Original Message-----
>From: Mindaugas Kavaliauskas [mailto:dbtopas@dbtopas.lt] 
>Sent: Thursday, September 24, 2009 6:32 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] MS SQL and ODBC.
>
>Hi,
>
>>> to:
>>>          case SQL_CHAR:
>>>          case SQL_VARCHAR:
>>>          case SQL_LONGVARCHAR:
>>>          case -9:
>>>            pFieldInfo.uiType = HB_FT_STRING;
>>>            break;
>>> in odbcdd.c.
>> 
>> This helped, but only on nvarchar.
>> When I make "select *" problem still :
>> 
>> oErr:severity_____         2
>> oErr:osCode_______     65528
>
>65528 = -8
>
>It is also not defined or documented. So, add -8 in a same way 
>as -9, to a type you guess it should correspond.
>
>
>Regards,
>Mindaugas
>
>
From harbour.01 at syenar.hu  Thu Sep 24 13:09:02 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 13:09:11 2009
Subject: [Harbour] MS SQL and ODBC.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950288D821@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B7F8@PINK.zycie.pzu>	<4AB90399.9090802@dbtopas.lt><FFAFD6EA63A3FC4784FBDA52BE7A7C950280B99D@PINK.zycie.pzu>	<4ABB6AA1.8050408@dbtopas.lt><FFAFD6EA63A3FC4784FBDA52BE7A7C950288D81F@PINK.zycie.pzu>
	<4ABB9EFF.8000405@dbtopas.lt>
	<FFAFD6EA63A3FC4784FBDA52BE7A7C950288D821@PINK.zycie.pzu>
Message-ID: <0C097DAB-09AD-4B3E-8474-4EC9159D8CD3@syenar.hu>

> Viktor, how can I rebuild only  lib sddodbc ?

just run make in that directory.

Covered in INSTALL, section "HOW TO DO A PARTIAL [RE]BUILD".

Brgds,
Viktor

>
>> -----Original Message-----
>> From: Mindaugas Kavaliauskas [mailto:dbtopas@dbtopas.lt]
>> Sent: Thursday, September 24, 2009 6:32 PM
>> To: Harbour Project Main Developer List.
>> Subject: Re: [Harbour] MS SQL and ODBC.
>>
>> Hi,
>>
>>>> to:
>>>>         case SQL_CHAR:
>>>>         case SQL_VARCHAR:
>>>>         case SQL_LONGVARCHAR:
>>>>         case -9:
>>>>           pFieldInfo.uiType = HB_FT_STRING;
>>>>           break;
>>>> in odbcdd.c.
>>>
>>> This helped, but only on nvarchar.
>>> When I make "select *" problem still :
>>>
>>> oErr:severity_____         2
>>> oErr:osCode_______     65528
>>
>> 65528 = -8
>>
>> It is also not defined or documented. So, add -8 in a same way
>> as -9, to a type you guess it should correspond.
>>
>>
>> Regards,
>> Mindaugas
>>
>>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From vszakats at users.sourceforge.net  Thu Sep 24 13:17:27 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Thu Sep 24 13:17:39 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12621] trunk/harbour
Message-ID: <E1Mqrwd-0008N5-Ae@dn4whf1.ch3.sourceforge.com>

Revision: 12621
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12621&view=rev
Author:   vszakats
Date:     2009-09-24 17:17:23 +0000 (Thu, 24 Sep 2009)

Log Message:
-----------
2009-09-24 19:15 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * INSTALL
    + Sections numbered for easier reference when pointing to it 
      in e-mail answers.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From phil at newstar.rinet.ru  Thu Sep 24 13:44:13 2009
From: phil at newstar.rinet.ru (Phil Krylov)
Date: Thu Sep 24 13:44:38 2009
Subject: [Harbour] hbmk2 xhb support
In-Reply-To: <9BEB43E1-D7F5-4E37-A6D0-2CC4A2DA2B57@syenar.hu>
References: <27DDA47F-285B-4E57-B7B9-22277AB0C2B9@syenar.hu> 
	<20090924111207.GA5990@uran.home.aster.pl>
	<9BEB43E1-D7F5-4E37-A6D0-2CC4A2DA2B57@syenar.hu>
Message-ID: <c10dbf450909241044s7132871fo7b70064ef3202b03@mail.gmail.com>

On Thu, Sep 24, 2009 at 3:44 PM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:
>> In this particular case I suggest to pase -undef:.ARCH. to
>> xHarbour compiler and maybe in the future one of xHarbour
>> developers (maybe Phil) will add support for this switch
>> so it will not be ignored.

Of course I can do it and will do it when I have time, I only would
like to see that it has established in Harbour. Basically, I don't
like the syntax, why was .ARCH. chosen, what do these dots mean, are
they somehow related to xBase syntax for logical values and operators?
;) Are there any other samples of usage of such syntax? Does someone
else feel it like me?

> Let's hope so. The other annoying bit is __PLATFORM__Windows
> and __PLATFORM__Linux. Hopefully someone will fix them there.

I think we ([x]Harbour) should define both versions in the current
situation. It was of course a bad choice to make them mixed-case
initially, but I think that it should be kept for compatibility.

-- Ph.
From M.Horodyski at pzuzycie.com.pl  Thu Sep 24 14:08:15 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Sep 24 14:08:24 2009
Subject: [Harbour] MS SQL and ODBC.
In-Reply-To: <0C097DAB-09AD-4B3E-8474-4EC9159D8CD3@syenar.hu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B7F8@PINK.zycie.pzu>	<4AB90399.9090802@dbtopas.lt><FFAFD6EA63A3FC4784FBDA52BE7A7C950280B99D@PINK.zycie.pzu>	<4ABB6AA1.8050408@dbtopas.lt><FFAFD6EA63A3FC4784FBDA52BE7A7C950288D81F@PINK.zycie.pzu><4ABB9EFF.8000405@dbtopas.lt><FFAFD6EA63A3FC4784FBDA52BE7A7C950288D821@PINK.zycie.pzu>
	<0C097DAB-09AD-4B3E-8474-4EC9159D8CD3@syenar.hu>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950288D822@PINK.zycie.pzu>

>-----Original Message-----
>From: Viktor Szak?ts [mailto:harbour.01@syenar.hu] 
>Sent: Thursday, September 24, 2009 7:09 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] MS SQL and ODBC.
>
>> Viktor, how can I rebuild only  lib sddodbc ?
>
>just run make in that directory.
>
>Covered in INSTALL, section "HOW TO DO A PARTIAL [RE]BUILD".
>
>Brgds,
>Viktor

[...]

>>>> oErr:severity_____         2
>>>> oErr:osCode_______     65528
>>>
>>> 65528 = -8


I can read all fields from this table :)
Maybe this solution should be make in svn ?
/*
         case SQL_CHAR:
         case SQL_VARCHAR:
         case SQL_LONGVARCHAR:
         case -8:
         case -9:
           pFieldInfo.uiType = HB_FT_STRING;
           break;
*/

Regards,
Marek Horodyski
From harbour.01 at syenar.hu  Thu Sep 24 14:08:43 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 14:08:55 2009
Subject: [Harbour] hbmk2 xhb support
In-Reply-To: <c10dbf450909241044s7132871fo7b70064ef3202b03@mail.gmail.com>
References: <27DDA47F-285B-4E57-B7B9-22277AB0C2B9@syenar.hu>
	<20090924111207.GA5990@uran.home.aster.pl>
	<9BEB43E1-D7F5-4E37-A6D0-2CC4A2DA2B57@syenar.hu>
	<c10dbf450909241044s7132871fo7b70064ef3202b03@mail.gmail.com>
Message-ID: <4705E542-131A-4549-80CA-E0D7ADB9B92D@syenar.hu>

Hi Phil,

> Of course I can do it and will do it when I have time, I only would
> like to see that it has established in Harbour. Basically, I don't
> like the syntax, why was .ARCH. chosen, what do these dots mean, are
> they somehow related to xBase syntax for logical values and operators?
> ;) Are there any other samples of usage of such syntax? Does someone
> else feel it like me?

I think was chosen because such macro name would be invalid
but at least quite unlikely in normal usage. (I use such names
as special filenames in my code by coincidence)

Since this is basically an internal switch used in a few
obscure places, this is IMO fine.

>> Let's hope so. The other annoying bit is __PLATFORM__Windows
>> and __PLATFORM__Linux. Hopefully someone will fix them there.
>
> I think we ([x]Harbour) should define both versions in the current
> situation. It was of course a bad choice to make them mixed-case
> initially, but I think that it should be kept for compatibility.

For full and seamless compatibility xhb compiler should always
define the mixed-case versions whenever the uppercased version
gets defined either by default or explicitly by user.

This way externally xhb could fully switch to uppercase,
while it would still handle mixed cased ones as an internal
matter for compatibility with xhb-specific sources relying
on them.

Brgds,
Viktor

From harbour.01 at syenar.hu  Thu Sep 24 14:20:47 2009
From: harbour.01 at syenar.hu (=?iso-8859-2?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 14:20:55 2009
Subject: [Harbour] MS SQL and ODBC.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950288D822@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B7F8@PINK.zycie.pzu>	<4AB90399.9090802@dbtopas.lt><FFAFD6EA63A3FC4784FBDA52BE7A7C950280B99D@PINK.zycie.pzu>	<4ABB6AA1.8050408@dbtopas.lt><FFAFD6EA63A3FC4784FBDA52BE7A7C950288D81F@PINK.zycie.pzu><4ABB9EFF.8000405@dbtopas.lt><FFAFD6EA63A3FC4784FBDA52BE7A7C950288D821@PINK.zycie.pzu>
	<0C097DAB-09AD-4B3E-8474-4EC9159D8CD3@syenar.hu>
	<FFAFD6EA63A3FC4784FBDA52BE7A7C950288D822@PINK.zycie.pzu>
Message-ID: <FCD9D0F2-6D41-4A1D-8471-9DED1F5A481A@syenar.hu>


On 2009 Sep 24, at 20:08, Horodyski Marek (PZUZ) wrote:

>> -----Original Message-----
>> From: Viktor Szak?ts [mailto:harbour.01@syenar.hu]
>> Sent: Thursday, September 24, 2009 7:09 PM
>> To: Harbour Project Main Developer List.
>> Subject: Re: [Harbour] MS SQL and ODBC.
>>
>>> Viktor, how can I rebuild only  lib sddodbc ?
>>
>> just run make in that directory.
>>
>> Covered in INSTALL, section "HOW TO DO A PARTIAL [RE]BUILD".
>>
>> Brgds,
>> Viktor
>
> [...]
>
>>>>> oErr:severity_____         2
>>>>> oErr:osCode_______     65528
>>>>
>>>> 65528 = -8
>
>
> I can read all fields from this table :)
> Maybe this solution should be make in svn ?
> /*
>         case SQL_CHAR:
>         case SQL_VARCHAR:
>         case SQL_LONGVARCHAR:
>         case -8:
>         case -9:
>           pFieldInfo.uiType = HB_FT_STRING;
>           break;
> */

Using such arbitrary values without knowing what exactly
they are and where do they come from looks kinda dangerous
to me.

Aren't these things documented somewhere? Even Microsoft
cannot be that sloppy.

Brgds,
Viktor

From toninhofwi at yahoo.com.br  Thu Sep 24 16:45:47 2009
From: toninhofwi at yahoo.com.br (ToninhoFWi)
Date: Thu Sep 24 16:45:53 2009
Subject: [Harbour] Web Services in Harbour
Message-ID: <9gmnb5lptgq9le1lrloeq8pm9opdppaqv4@4ax.com>

Hi ppl,

How I do to access web services in Harbour please ?


Regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From dbtopas at dbtopas.lt  Thu Sep 24 17:21:00 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Sep 24 17:21:49 2009
Subject: [Harbour] MS SQL and ODBC.
In-Reply-To: <FCD9D0F2-6D41-4A1D-8471-9DED1F5A481A@syenar.hu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B7F8@PINK.zycie.pzu>	<4AB90399.9090802@dbtopas.lt><FFAFD6EA63A3FC4784FBDA52BE7A7C950280B99D@PINK.zycie.pzu>	<4ABB6AA1.8050408@dbtopas.lt><FFAFD6EA63A3FC4784FBDA52BE7A7C950288D81F@PINK.zycie.pzu><4ABB9EFF.8000405@dbtopas.lt><FFAFD6EA63A3FC4784FBDA52BE7A7C950288D821@PINK.zycie.pzu>	<0C097DAB-09AD-4B3E-8474-4EC9159D8CD3@syenar.hu>	<FFAFD6EA63A3FC4784FBDA52BE7A7C950288D822@PINK.zycie.pzu>
	<FCD9D0F2-6D41-4A1D-8471-9DED1F5A481A@syenar.hu>
Message-ID: <4ABBE2BC.6000700@dbtopas.lt>

Hi,


>> I can read all fields from this table :)
>> Maybe this solution should be make in svn ?
>> /*
>>         case SQL_CHAR:
>>         case SQL_VARCHAR:
>>         case SQL_LONGVARCHAR:
>>         case -8:
>>         case -9:
>>           pFieldInfo.uiType = HB_FT_STRING;
>>           break;
>> */
> 
> Using such arbitrary values without knowing what exactly
> they are and where do they come from looks kinda dangerous
> to me.
> 
> Aren't these things documented somewhere? Even Microsoft
> cannot be that sloppy.

Here is one of the very few pages on the web, where I can find a names 
for these -8 and -9: 
http://www.japhara.de/report/hsqldb/site/xref/org/hsqldb/Types.html
I still do not know the difference between SQL_VARCHAR and QL_NVARCHAR, etc.


Regards,
Mindaugas
From itamarlins at bol.com.br  Thu Sep 24 17:44:09 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Thu Sep 24 17:46:22 2009
Subject: [Harbour] Re: SF.net SVN: harbour-project:[12593] trunk/harbour
References: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com><4AB88DF5.7090704@dbtopas.lt>
	<4ABA2AB9.4020101@dbtopas.lt><20090924102614.GA25988@uran.home.aster.pl><d6fa31440909240915w76e61d0bv7b9985fd2752d6fc@mail.gmail.com>
	<A3EA09D8-46A6-4D52-BB0B-5F98A41E192E@syenar.hu>
Message-ID: <h9gpad$uu2$1@ger.gmane.org>

Hi!

"Viktor Szakts" <harbour.01@syenar.hu> 
escreveu na mensagem news:A3EA09D8-46A6-4D52-BB0B-5F98A41E192E@syenar.hu...
> Dunno where to address this, but I tried LetoDB the other
> day with production app, and instantly stumbled upon a
> fatal because dbExists() isn't implemented.
But, I use function Leto_File().

>
> I also had to patch source to fix hb_socket...() function
> collision.
>
> It'd be great if someone could fix these in LetoDB repository.
>
> BTW I have nothing against hosting LetoDB in Harbour
> repository, but here Alexander has the final word, so if
> he also likes the idea, plus other Harbour developers also
> agree, we can do it.
>
Alexander to be off line very time.

      Below is a full ( at least, for the moment I write it ) list of 
functions,
 available for using in client applications with RDD LETO linked.

      LETO_CONNECT( cAddress [, cUserName, cPassword ] )   --> 
nConnection, -1 if failed
      LETO_CONNECT_ERR()                                   --> nError
      LETO_DISCONNECT()
      LETO_SETCURRENTCONNECTION( nConnection )
      LETO_GETCURRENTCONNECTION()                          --> nConnection
      LETO_GETSERVERVERSION()                              --> cVersion

      LETO_BEGINTRANSACTION()
      LETO_ROLLBACK()
      LETO_COMMITTRANSACTION( [ lUnlockAll ] )             --> lSuccess
      LETO_INTRANSACTION()                                 --> 
lTransactionActive

      LETO_SUM( cFieldName [, cFilter ] )                  --> nSumma
      LETO_ISFLTOPTIM()                                    --> 
lFilterOptimized
      LETO_SETSKIPBUFFER( nSkip )

      LETO_FILE( cFileName )                               --> lFileExists
      LETO_FERASE( cFileName )                             --> -1 if failed
      LETO_FRENAME( cFileName, cFileNewName )              --> -1 if failed
      LETO_FERROR()                                        --> nError

      LETO_MGGETINFO()
      LETO_MGGETUSERS()
      LETO_MGGETTABLES()
      LETO_MGKILL()

      LETO_USERADD( cUserName, cPass [, cRights ] )        --> lSuccess
      LETO_USERPASSWD( cUserName, cPass )                  --> lSuccess
      LETO_USERRIGHTS( cUserName, cRights )                --> lSuccess
      LETO_USERFLUSH()                                     --> lSuccess

Best regards,
Itamar M. Lins Jr. 



From harbour.01 at syenar.hu  Thu Sep 24 17:59:44 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 17:59:55 2009
Subject: [Harbour] MS SQL and ODBC.
In-Reply-To: <4ABBE2BC.6000700@dbtopas.lt>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950280B7F8@PINK.zycie.pzu>	<4AB90399.9090802@dbtopas.lt><FFAFD6EA63A3FC4784FBDA52BE7A7C950280B99D@PINK.zycie.pzu>	<4ABB6AA1.8050408@dbtopas.lt><FFAFD6EA63A3FC4784FBDA52BE7A7C950288D81F@PINK.zycie.pzu><4ABB9EFF.8000405@dbtopas.lt><FFAFD6EA63A3FC4784FBDA52BE7A7C950288D821@PINK.zycie.pzu>	<0C097DAB-09AD-4B3E-8474-4EC9159D8CD3@syenar.hu>	<FFAFD6EA63A3FC4784FBDA52BE7A7C950288D822@PINK.zycie.pzu>
	<FCD9D0F2-6D41-4A1D-8471-9DED1F5A481A@syenar.hu>
	<4ABBE2BC.6000700@dbtopas.lt>
Message-ID: <A7935BCF-07A3-4F5B-BF44-8ECC4E23E4D4@syenar.hu>

>>> I can read all fields from this table :)
>>> Maybe this solution should be make in svn ?
>>> /*
>>>        case SQL_CHAR:
>>>        case SQL_VARCHAR:
>>>        case SQL_LONGVARCHAR:
>>>        case -8:
>>>        case -9:
>>>          pFieldInfo.uiType = HB_FT_STRING;
>>>          break;
>>> */
>> Using such arbitrary values without knowing what exactly
>> they are and where do they come from looks kinda dangerous
>> to me.
>> Aren't these things documented somewhere? Even Microsoft
>> cannot be that sloppy.
>
> Here is one of the very few pages on the web, where I can find a  
> names for these -8 and -9: http://www.japhara.de/report/hsqldb/site/xref/org/hsqldb/Types.html
> I still do not know the difference between SQL_VARCHAR and  
> QL_NVARCHAR, etc.

Some more here:

http://cran.r-project.org/web/packages/RODBC/vignettes/RODBC.pdf
http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc36273.1502/html/sprocs/CIHHGDBC.htm
http://www.koders.com/csharp/fid85773BCD5EBAA9CD959CABCF3FF1BDA5EEC1FB48.aspx?s=mdef%3Ainsert

Brgds,
Viktor

From dbtopas at dbtopas.lt  Thu Sep 24 18:07:45 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Sep 24 18:08:32 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12593] trunk/harbour
In-Reply-To: <d6fa31440909240915w76e61d0bv7b9985fd2752d6fc@mail.gmail.com>
References: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com>	<4AB88DF5.7090704@dbtopas.lt>
	<4ABA2AB9.4020101@dbtopas.lt>	<20090924102614.GA25988@uran.home.aster.pl>
	<d6fa31440909240915w76e61d0bv7b9985fd2752d6fc@mail.gmail.com>
Message-ID: <4ABBEDB1.5040904@dbtopas.lt>

Hi,

> NETIO
> 
> locally (two processes)
> adding 100000 entries - 80 seconds
> Read all entries - 10 seconds
> Update Records - 35 seconds
> 
> the network (two computers)
> adding 100000 records - 320 seconds
> Read all entries - 60 seconds
> Update Records - 420 seconds
> 
> And all of this, any interruption of the client (eg, hanging) leads to
> data corruption (index)
> 
> 
> LetoDB
> 
> locally (two processes)
> adding 100000 entries - 10 seconds
> Read all entries - 2 seconds
> Update Records - 18 seconds
> 
> the network (two computers)
> adding 100000 entries - 45 seconds
> Read all entries - 10 seconds
> Update Records - 110 seconds


And what are times for local and remote DBFNTX (or DBFCDX) for the same 
test?


Regards,
Mindaugas
From harbour.01 at syenar.hu  Thu Sep 24 19:21:44 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Thu Sep 24 19:22:17 2009
Subject: [Harbour] Re: SF.net SVN: harbour-project:[12593] trunk/harbour
In-Reply-To: <h9gpad$uu2$1@ger.gmane.org>
References: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com><4AB88DF5.7090704@dbtopas.lt>
	<4ABA2AB9.4020101@dbtopas.lt><20090924102614.GA25988@uran.home.aster.pl><d6fa31440909240915w76e61d0bv7b9985fd2752d6fc@mail.gmail.com>
	<A3EA09D8-46A6-4D52-BB0B-5F98A41E192E@syenar.hu>
	<h9gpad$uu2$1@ger.gmane.org>
Message-ID: <3AFDB687-0BA3-45FE-9508-A3C544B2CC32@syenar.hu>

Hi Itamar,

On 2009 Sep 24, at 23:44, Itamar Lins wrote:

> "Viktor Szak?ts" <harbour.01@syenar.hu>
> escreveu na mensagem news:A3EA09D8-46A6-4D52-BB0B-5F98A41E192E@syenar.hu 
> ...
>> Dunno where to address this, but I tried LetoDB the other
>> day with production app, and instantly stumbled upon a
>> fatal because dbExists() isn't implemented.
> But, I use function Leto_File().

For me this is not a solution. I can't distribute/maintain
slightly different builds of each of my application for
every such RDD. This would be nonsense.

If DBEXISTS() is called LETO_FILE() in this RDD, the concept
is broken.

>> I also had to patch source to fix hb_socket...() function
>> collision.
>>
>> It'd be great if someone could fix these in LetoDB repository.
>>
>> BTW I have nothing against hosting LetoDB in Harbour
>> repository, but here Alexander has the final word, so if
>> he also likes the idea, plus other Harbour developers also
>> agree, we can do it.
>>
> Alexander to be off line very time.

I hope he's alright.

>      Below is a full ( at least, for the moment I write it ) list of
> functions,
> available for using in client applications with RDD LETO linked.
>
>      LETO_CONNECT( cAddress [, cUserName, cPassword ] )   -->
> nConnection, -1 if failed
>      LETO_CONNECT_ERR()                                   --> nError
>      LETO_DISCONNECT()
>      LETO_SETCURRENTCONNECTION( nConnection )
>      LETO_GETCURRENTCONNECTION()                          -->  
> nConnection
>      LETO_GETSERVERVERSION()                              --> cVersion
>
>      LETO_BEGINTRANSACTION()
>      LETO_ROLLBACK()
>      LETO_COMMITTRANSACTION( [ lUnlockAll ] )             --> lSuccess
>      LETO_INTRANSACTION()                                 -->
> lTransactionActive
>
>      LETO_SUM( cFieldName [, cFilter ] )                  --> nSumma
>      LETO_ISFLTOPTIM()                                    -->
> lFilterOptimized
>      LETO_SETSKIPBUFFER( nSkip )
>
>      LETO_FILE( cFileName )                               -->  
> lFileExists
>      LETO_FERASE( cFileName )                             --> -1 if  
> failed
>      LETO_FRENAME( cFileName, cFileNewName )              --> -1 if  
> failed
>      LETO_FERROR()                                        --> nError
>
>      LETO_MGGETINFO()
>      LETO_MGGETUSERS()
>      LETO_MGGETTABLES()
>      LETO_MGKILL()
>
>      LETO_USERADD( cUserName, cPass [, cRights ] )        --> lSuccess
>      LETO_USERPASSWD( cUserName, cPass )                  --> lSuccess
>      LETO_USERRIGHTS( cUserName, cRights )                --> lSuccess
>      LETO_USERFLUSH()                                     --> lSuccess

Thanks. This is good, but regular RDD functionality shouldn't
require special API. LETO_FILE(), LETO_FERASE(), LETO_FRENAME()
break this rule. Probably it has some historic reasons (for
sure for LETO_FRENAME() which was just implemented in RDD), but
I hope these will be eventually implemented.

Przemek, I don't know if it's huge job, but maybe if you have
some spare time, you could take a look.

Brgds,
Viktor

From alxokhotnikov at gmail.com  Fri Sep 25 02:11:49 2009
From: alxokhotnikov at gmail.com (Alexandr Okhotnikov)
Date: Fri Sep 25 02:11:56 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12593] trunk/harbour
In-Reply-To: <4ABBEDB1.5040904@dbtopas.lt>
References: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com>
	<4AB88DF5.7090704@dbtopas.lt> <4ABA2AB9.4020101@dbtopas.lt>
	<20090924102614.GA25988@uran.home.aster.pl>
	<d6fa31440909240915w76e61d0bv7b9985fd2752d6fc@mail.gmail.com>
	<4ABBEDB1.5040904@dbtopas.lt>
Message-ID: <d6fa31440909242311x6c2daa0xb296e9f69d655b4e@mail.gmail.com>

Hi

DBFCDX (server WIN2003, client XP, net 100Mb)

There are so many delays (in multiplayer mode) that I did not even
recorded the results :)


2009/9/25 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>:
> Hi,
>
>>
>> And all of this, any interruption of the client (eg, hanging) leads to
>> data corruption (index)

> And what are times for local and remote DBFNTX (or DBFCDX) for the same
> test?
From harbour.01 at syenar.hu  Fri Sep 25 02:34:00 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 25 02:34:13 2009
Subject: [Harbour] hb_xgrablarge() ?
Message-ID: <A067FA4B-58B7-4704-B955-9143F2FA1E30@syenar.hu>

Hi All,

Shouldn't we add memory allocation functions which
are able to allocate memory of 64-bit size?

Brgds,
Viktor

From M.Horodyski at pzuzycie.com.pl  Fri Sep 25 04:06:32 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri Sep 25 04:06:40 2009
Subject: [Harbour] Web Services in Harbour
In-Reply-To: <9gmnb5lptgq9le1lrloeq8pm9opdppaqv4@4ax.com>
References: <9gmnb5lptgq9le1lrloeq8pm9opdppaqv4@4ax.com>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950288D8C9@PINK.zycie.pzu>

>-----Original Message-----
>From: ToninhoFWi [mailto:toninhofwi@yahoo.com.br] 
>Sent: Thursday, September 24, 2009 10:46 PM
>To: harbour@harbour-project.org
>Subject: [Harbour] Web Services in Harbour
>
>Hi ppl,
>
>How I do to access web services in Harbour please ?



Toninho, pls. test this code, it work for my :

// test Web Servicess
PROCEDURE Main()
LOCAL oSoapClient := CreateObject( "MSSOAP.SoapClient" )
Cls

? 'Test czy typ klienta jest dost?pny :', ValType( oSoapClient)
oSoapClient:msSoapInit(  'http://www.dataaccess.com/webservicesserver/textcasing.wso?WSDL')
? oSoapClient:InvertStringCase( "lower UPPER" )

InKey( 0)
RETURN
// end test

But I do not know how cam mad build server of webservices :(

Regards,
Marek Horodyski
From lorenzo.fiorini at gmail.com  Fri Sep 25 04:24:01 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Sep 25 04:24:09 2009
Subject: [Harbour] Status of the svn?
Message-ID: <9257026e0909250124s63e08908p9a1339c63a242907@mail.gmail.com>

I'd like to refresh my "stable" local branch ( now based on beta1
ChangeLog 11315 2009-06-12 ) to include -fpic fixes and so avoid
selinux issues.

Comments about actual status of the svn?

best regards,
Lorenzo
From harbour.01 at syenar.hu  Fri Sep 25 05:08:50 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 25 05:09:02 2009
Subject: [Harbour] Status of the svn?
In-Reply-To: <9257026e0909250124s63e08908p9a1339c63a242907@mail.gmail.com>
References: <9257026e0909250124s63e08908p9a1339c63a242907@mail.gmail.com>
Message-ID: <1C27A9A0-6ADE-4844-A98D-772724841881@syenar.hu>

I think it's safe to use. It only improved compared
to the last beta3, which was also stable.

Brgds,
Viktor

On 2009 Sep 25, at 10:24, Lorenzo Fiorini wrote:

> I'd like to refresh my "stable" local branch ( now based on beta1
> ChangeLog 11315 2009-06-12 ) to include -fpic fixes and so avoid
> selinux issues.
>
> Comments about actual status of the svn?
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From M.Horodyski at pzuzycie.com.pl  Fri Sep 25 05:44:17 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri Sep 25 05:44:27 2009
Subject: [Harbour] Code Pages
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950288D926@PINK.zycie.pzu>

Can I use in 7 parametr in dbUseArea() codepages when i open data via
SQLMIX ?
I try different CP :

* PL852
* PLISO
* PLMAZ
* PLWIN

Without change on screen :(

Regards,
Marek Horodyski
From dmacias at mail.udg.mx  Fri Sep 25 05:52:51 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Sep 25 05:53:07 2009
Subject: [Harbour] Re: OS/2: library format
Message-ID: <4ABC92F3.5070008@mail.udg.mx>

Viktor:

>Actually just in recent days a Hungarian OS/2 user approached
>me for help. All I could do is point him to this list and INSTALL doc.

Care him carefully, perhaps is the last "Hungarian OS/2 user"  :-)

>If there is anything more to say about OS/2/gcc build (like what
>packages to download/install, if it's something special), I think it'd
>be good to include it in INSTALL.

In
     ftp://ftp.netlabs.org/pub/gcc/
there are many gcc versions <= gcc335
The proper last one is:
   GCC-3.3.5-csd3.zip
It is unpacked in x:\usr
In x:\usr\bin, executing gccenv.cmd set proper gcc environment

and with new make:
   ftp://hobbes.nmsu.edu/pub/os2/dev/util/make-3.81-r3-bin-static.zip

Perhaps may require proper libc*.dll file
   libc-0_6_3-csd3.exe or libc-0_6_3-csd3.wpi

So in Harbour is enough
   make install

Is optional to select TCP/IP stack. For older one:
    set HB_USER_CFLAGS=-DTCPV40HDRS %HB_USER_CFLAGS%
    set HB_USER_LDFLAGS=-Lx:\usr\lib\tcpipv4 %HB_USER_LDFLAGS%

It build fine Harbour with gcc335 in a.out library format


For "coming soon" Harbour support of OMF type, gcc432, gcc433, gcc440
the small changes described must be applied

David Macias



From dbtopas at dbtopas.lt  Fri Sep 25 06:08:45 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Sep 25 06:13:32 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12593] trunk/harbour
In-Reply-To: <d6fa31440909242311x6c2daa0xb296e9f69d655b4e@mail.gmail.com>
References: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com>	<4AB88DF5.7090704@dbtopas.lt>
	<4ABA2AB9.4020101@dbtopas.lt>	<20090924102614.GA25988@uran.home.aster.pl>	<d6fa31440909240915w76e61d0bv7b9985fd2752d6fc@mail.gmail.com>	<4ABBEDB1.5040904@dbtopas.lt>
	<d6fa31440909242311x6c2daa0xb296e9f69d655b4e@mail.gmail.com>
Message-ID: <4ABC96AD.90702@dbtopas.lt>

Hi,


I'm not sure I understand you. What delays are you talking about? Do you 
want to say, that local DBFCDX test is so slow, that you have not waited 
until it was finished.

I've asked the question about local DBFCDX speed, because of your results:

> NETIO
> locally (two processes)
> adding 100000 entries - 80 seconds
> Read all entries - 10 seconds
> Update Records - 35 seconds
> 
> LetoDB
> locally (two processes)
> adding 100000 entries - 10 seconds
> Read all entries - 2 seconds
> Update Records - 18 seconds

I do not see a reason for such a big difference between NETIO and LetoDB 
in case server and client runs locally. Sound like something is wrong 
wit our socket layer.


Regards,
Mindaugas


Alexandr Okhotnikov wrote:
> Hi
> 
> DBFCDX (server WIN2003, client XP, net 100Mb)
> 
> There are so many delays (in multiplayer mode) that I did not even
> recorded the results :)
> 
> 
> 2009/9/25 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>:
>> Hi,
>>
>>> And all of this, any interruption of the client (eg, hanging) leads to
>>> data corruption (index)
> 
>> And what are times for local and remote DBFNTX (or DBFCDX) for the same
>> test?

From druzus at acn.waw.pl  Fri Sep 25 06:09:00 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 25 06:16:58 2009
Subject: [Harbour] hbmk2 xhb support
In-Reply-To: <c10dbf450909241044s7132871fo7b70064ef3202b03@mail.gmail.com>
References: <27DDA47F-285B-4E57-B7B9-22277AB0C2B9@syenar.hu>
	<20090924111207.GA5990@uran.home.aster.pl>
	<9BEB43E1-D7F5-4E37-A6D0-2CC4A2DA2B57@syenar.hu>
	<c10dbf450909241044s7132871fo7b70064ef3202b03@mail.gmail.com>
Message-ID: <20090925100859.GA1206@uran.home.aster.pl>

On Thu, 24 Sep 2009, Phil Krylov wrote:

Hik,

> Of course I can do it and will do it when I have time, I only would
> like to see that it has established in Harbour. Basically, I don't
> like the syntax, why was .ARCH. chosen, what do these dots mean, are
> they somehow related to xBase syntax for logical values and operators?
> ;) Are there any other samples of usage of such syntax? Does someone
> else feel it like me?

I also do not find it as ideal solution but as alternative we have
to add new switch. If we want to use -undef: then the right side
value cannot be valid identifier and it's the reason why I added
dots (I chose character which does not have special meaning in
different shells to avoid unecessary quoting). If you prefer
separate switch for such functionality then I'll add it. Please
only chose the name for such switch.

> > Let's hope so. The other annoying bit is __PLATFORM__Windows
> > and __PLATFORM__Linux. Hopefully someone will fix them there.
> I think we ([x]Harbour) should define both versions in the current
> situation. It was of course a bad choice to make them mixed-case
> initially, but I think that it should be kept for compatibility.

It's quite long time when in Harbour these macros were converted to
upper case so users updated their code. Adding support for mixed
case macros to Harbour will only confuse them.
Now the problem is mostly related to xHarbour and this has to be
xHarbour team decision. xHarbour developers should decide if they
want to support both macros or rather force code updating.
In longer terms the second solution seems to be the best choice.

best regards,
Przemek
From dbtopas at dbtopas.lt  Fri Sep 25 06:28:43 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Sep 25 06:29:29 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12593] trunk/harbour
In-Reply-To: <20090924102614.GA25988@uran.home.aster.pl>
References: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com>	<4AB88DF5.7090704@dbtopas.lt>
	<4ABA2AB9.4020101@dbtopas.lt>
	<20090924102614.GA25988@uran.home.aster.pl>
Message-ID: <4ABC9B5B.7080401@dbtopas.lt>

Hi,


> The local disk tests in WinXP and Harbour using DBFCDX with native IO
> took ~2.50 seconds. It means that in above test Harbour consumes less
> then 1% and rest is the cost of network overhead.
> 
> but this test clearly shows that to reach real speed improvement it's
> necessary to create RDD oriented server which can group IO operations
> in some bigger logical units to reduce number of packages which have to
> be send and confirmed. Operating only on transport layer like NETIO we
> can reach some small improvement yet, i.e. we can disable confirmation
> in UNLOCK operation what in above tests can increase the SKIP tests ~20%
> (Maybe I'll add such extension soon) or we can try to group some operations,
> i.e. join index lock and concurrent access counter read into single
> operation what may give even 50% speed improvement in the SKIP but it needs
> modifications in core RDD code so I do not like it because it may start
> very danger in longer terms process of adding local hacks to core RDD code.

It would be better to write a separate RDDNET instead of trying to hack 
existing RDD to reduce I/O operation count. We will be able to group 
DBSEEK (including all required index locks) + FIELDGET() into one 
network packet.


Regards,
Mindaugas
From druzus at acn.waw.pl  Fri Sep 25 06:29:41 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Sep 25 06:29:49 2009
Subject: [Harbour] hb_xgrablarge() ?
In-Reply-To: <A067FA4B-58B7-4704-B955-9143F2FA1E30@syenar.hu>
References: <A067FA4B-58B7-4704-B955-9143F2FA1E30@syenar.hu>
Message-ID: <20090925102941.GB1206@uran.home.aster.pl>

On Fri, 25 Sep 2009, Szak?ts Viktor wrote:

Hi,

> Shouldn't we add memory allocation functions which
> are able to allocate memory of 64-bit size?

We have it: hb_xgrab() ;-)

In all platforms except Win64 'long' is large enough to hold pointer.
Over ten years ago looking at Win API I said that MS will have horrible
problems introducing 64bit support. 32bit 'long' in Win64 is side effect
of bad very design decisions which should not happen in such big firm but
it does not resolve the problem for us. I think that we can add such
function when we will work on new types.

best regards,
Przemek
From harbour.01 at syenar.hu  Fri Sep 25 06:33:00 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 25 06:33:10 2009
Subject: [Harbour] hbmk2 xhb support
In-Reply-To: <20090925100859.GA1206@uran.home.aster.pl>
References: <27DDA47F-285B-4E57-B7B9-22277AB0C2B9@syenar.hu>
	<20090924111207.GA5990@uran.home.aster.pl>
	<9BEB43E1-D7F5-4E37-A6D0-2CC4A2DA2B57@syenar.hu>
	<c10dbf450909241044s7132871fo7b70064ef3202b03@mail.gmail.com>
	<20090925100859.GA1206@uran.home.aster.pl>
Message-ID: <1C2DCE1A-2AA3-4669-9778-1310460F5FEE@syenar.hu>

>> Of course I can do it and will do it when I have time, I only would
>> like to see that it has established in Harbour. Basically, I don't
>> like the syntax, why was .ARCH. chosen, what do these dots mean, are
>> they somehow related to xBase syntax for logical values and  
>> operators?
>> ;) Are there any other samples of usage of such syntax? Does someone
>> else feel it like me?
>
> I also do not find it as ideal solution but as alternative we have
> to add new switch. If we want to use -undef: then the right side
> value cannot be valid identifier and it's the reason why I added
> dots (I chose character which does not have special meaning in
> different shells to avoid unecessary quoting). If you prefer
> separate switch for such functionality then I'll add it. Please
> only chose the name for such switch.

We can add a double dash switch, but in this case it will
result in an error when passed to a Harbour (or Harbour compatible)
compiler versions (implementation) which don't support it.
With current -undef:, this isn't a problem.

Brgds,
Viktor

From harbour.01 at syenar.hu  Fri Sep 25 06:40:05 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 25 06:40:13 2009
Subject: [Harbour] hb_xgrablarge() ?
In-Reply-To: <20090925102941.GB1206@uran.home.aster.pl>
References: <A067FA4B-58B7-4704-B955-9143F2FA1E30@syenar.hu>
	<20090925102941.GB1206@uran.home.aster.pl>
Message-ID: <84A8BD2A-258E-4444-BDC5-CCE49F816623@syenar.hu>

Hi,

>> Shouldn't we add memory allocation functions which
>> are able to allocate memory of 64-bit size?
>
> We have it: hb_xgrab() ;-)
>
> In all platforms except Win64 'long' is large enough to hold pointer.
> Over ten years ago looking at Win API I said that MS will have  
> horrible
> problems introducing 64bit support. 32bit 'long' in Win64 is side  
> effect
> of bad very design decisions which should not happen in such big  
> firm but
> it does not resolve the problem for us. I think that we can add such
> function when we will work on new types.

Ops, of course, I forgot about it. If it's a win-only problem,
I'm less concerned. Terrible design decision indeed, they let
marketing reasons (compatibility) win again against technical
ones. Anyhow it's their problem for the most part, but some of
it will spill onto the win64 developers / users too. Hopefully
by then there will be enough alternatives. [ or MS will hack
it with an awful kludge ;) ]

Brgds,
Viktor

From dmacias at mail.udg.mx  Fri Sep 25 06:41:27 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Sep 25 06:41:44 2009
Subject: [Harbour] Re: OS/2: library format
Message-ID: <4ABC9E57.7020302@mail.udg.mx>

Viktor, Maurilio, Przemek:

Thanks for comments

 > IMHO it will be good to create doc/os2howto.txt file to collect
 >such information as David presented because it may be very useful in
 >some farther developing saving the time.

 >For beta tools and other non-mature / experimental stuff,
 >doc/howtoos2.txt is fine.

I am not agree for "doc/os2howto.txt" and/or "doc/howtoos2.txt"
All these info can be included in INSTALL. Just comments about options 
of library type.

gcc346, 404, 432, 433, 44 are not exactly non-mature or beta as Maurilio 
stated
Paul Smedley and others, working many months just found the good-way, 
tips and tricks to port these gcc versions, and many systems/programs 
are build with them now

So are as stable as gcc335 found in netlabs, where are many versions too

I consider important to add gcc4xx to Harbour because it left many 
tricks we have used for gcc335 (at least Przemek, along history, has 
made that adjustments for os2-gcc335 when Harbour does not build in my 
machine)

So OS/2 can be in the "main-stream" for gcc. Allmost rest of OS 
supported by Harbour are using newer gcc than 335

At last my proposal is simple: to add support of OMF type to 
os2-gcc-Harbour, so it can work with gcc335 and/or gcc4xx

I send summary of changes for OMF type support BEFORE any changes to 
gcc.mk commented by Przemek, Maurilio to delete "tricks" used due older 
make. Perhaps some of that tricks should be used for gcc4xx

If we do not add support now we may be blocking/complicating a future 
work to include it


The main change is replacement of create_library:
----------------------------
Replacement of define create_library (emxomfar.exe work different):
define create_library
     $(if $(wildcard $(subst /,$(DIRSEP),$(LIB_FILE))),@$(RM) $(subst
/,$(DIRSEP),$(LIB_FILE)),)
     for %i in ( *$(OBJ_EXT) ) do $(AR) $(ARFLAGS) $(HB_USER_AFLAGS)
-p128 r $(LIB_DIR)/$@ %i$(ECHOQUOTE)
endef
----------------------------

because I explained that emxomfar.exe work in a file-basis (one file at 
a time). Details are in original message "Harbour under OS/2 - eCS 
gcc", 17 August 2009

In .dll creation seem to exist a similar case


Do you have some comment/suggestion/action for my proposal ?
--------------------------
My proposal is to use and environmental variable to choose code in
gcc.mk and hbmk2.prg
Something like HB_OS2_TCP32 which was included to choose "tcp/ip stack"
in OS/2
--------------------------

Perhaps
  HB_OS2_AOUT=yes if OMF is default
  HB_OS2_OMF=yes if a.out is default
I suggested OMF default because is common to gcc335, gcc4xx, and a.out 
is not able in gcc4xx due problem with emxbind
OpenWatcom use OMF too and OMF is "native" in OS/2


Updated info:

An Makefile for Python in OS/2 have something as:

------------------------------

# The output of the build is a largish Python26.DLL containing the
# essential modules of Python and a small Python.exe program to start
# the interpreter. When embedding Python within another program, only
# Python26.DLL is needed. We also build python_s.a static library (which
# can be converted into OMF (.lib) format using emxomf tool) and both
# python.a and python.lib import libraries.  Then the optional
# extension modules, which are OS/2 DLLs renamed with a PYD file extension.
[...]

# We're using the OMF format since EMX's ld has a obscure bug
# because of which it sometimes fails to build relocations
# in .data segment that point to another .data locations
# (except for the final linking if the .EXEs)
OMF=		yes

[...]

# File extensions
MODULE.EXT=	.pyd
MODLIB.EXT=	.dll
ifeq ($(OMF),yes)
   O=		.obj
   A=		.lib
   AR=		emxomfar
   CFLAGS+=	-Zomf
   LDFLAGS+=	-Zomf
   ifeq ($(MODE),debug)
     ARFLAGS=	-p64 crs
   else
     ARFLAGS=	-p32 crs
   endif
else
   O=		.o
   A=		.a
   AR=		ar
endif

[...]

ifeq ($(EXEOMF),yes)
   PYTHON.EXEIMP=	$(PYTHON.IMPLIB)
   LDMODE.EXE=		-Zomf
else
   PYTHON.EXEIMP=	$(PYTHON_LIB).a
   LDMODE.EXE =
endif
PYTHON.DLL=	$(PYTHON_LIB).dll
PYTHON.DEF=	$(PYTHON_LIB).def

[...]

$(PYTHON.EXE): $(SRC.EXE) $(PYTHON.EXEIMP) $(OUT)python.def
	$(CC) -Zmt $(LDMODE.EXE) -Zcrtdll -Wall $(INCLUDE) -L. -lgcc -o $@ 
$(SRC.EXE) $(PYTHON.EXEIMP) $(LIBS) $(OUT)python.def
	$(EXEOPT) -aq $(PYTHON.EXE) -h$(NFILES)

------------------------------


David Macias


From toninhofwi at yahoo.com.br  Fri Sep 25 06:48:00 2009
From: toninhofwi at yahoo.com.br (Antonio Carlos)
Date: Fri Sep 25 06:48:12 2009
Subject: [Harbour] Web Services in Harbour
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950288D8C9@PINK.zycie.pzu>
Message-ID: <886635.11941.qm@web33707.mail.mud.yahoo.com>

Thank you Marek.

It works perfectly. In my case, I only need ws client, like your sample.

BTW I read on the internet that SOAP was replaced by net framework. Will be so good if we have an example how access ws via net framework too.

Thank you again,

Best regards,

Toninho.
 

--- Em sex, 25/9/09, Horodyski Marek (PZUZ) <M.Horodyski@pzuzycie.com.pl> escreveu:

> De: Horodyski Marek (PZUZ) <M.Horodyski@pzuzycie.com.pl>
> Assunto: RE: [Harbour] Web Services in Harbour
> Para: "Harbour Project Main Developer List." <harbour@harbour-project.org>
> Data: Sexta-feira, 25 de Setembro de 2009, 5:06
> >-----Original Message-----
> >From: ToninhoFWi [mailto:toninhofwi@yahoo.com.br]
> 
> >Sent: Thursday, September 24, 2009 10:46 PM
> >To: harbour@harbour-project.org
> >Subject: [Harbour] Web Services in Harbour
> >
> >Hi ppl,
> >
> >How I do to access web services in Harbour please ?
> 
> 
> 
> Toninho, pls. test this code, it work for my :
> 
> // test Web Servicess
> PROCEDURE Main()
> LOCAL oSoapClient := CreateObject( "MSSOAP.SoapClient" )
> Cls
> 
> ? 'Test czy typ klienta jest dost?pny :', ValType(
> oSoapClient)
> oSoapClient:msSoapInit(? 'http://www.dataaccess.com/webservicesserver/textcasing.wso?WSDL')
> ? oSoapClient:InvertStringCase( "lower UPPER" )
> 
> InKey( 0)
> RETURN
> // end test
> 
> But I do not know how cam mad build server of webservices
> :(
> 
> Regards,
> Marek Horodyski
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 


      ____________________________________________________________________________________
Veja quais s?o os assuntos do momento no Yahoo! +Buscados
http://br.maisbuscados.yahoo.com
From alxokhotnikov at gmail.com  Fri Sep 25 06:48:13 2009
From: alxokhotnikov at gmail.com (Alexandr Okhotnikov)
Date: Fri Sep 25 06:48:21 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12593] trunk/harbour
In-Reply-To: <4ABC96AD.90702@dbtopas.lt>
References: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com>
	<4AB88DF5.7090704@dbtopas.lt> <4ABA2AB9.4020101@dbtopas.lt>
	<20090924102614.GA25988@uran.home.aster.pl>
	<d6fa31440909240915w76e61d0bv7b9985fd2752d6fc@mail.gmail.com>
	<4ABBEDB1.5040904@dbtopas.lt>
	<d6fa31440909242311x6c2daa0xb296e9f69d655b4e@mail.gmail.com>
	<4ABC96AD.90702@dbtopas.lt>
Message-ID: <d6fa31440909250348j5667167dk94c3b930e813b6d6@mail.gmail.com>

Hi

2009/9/25 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>:
> I'm not sure I understand you. What delays are you talking about? Do you
> want to say, that local DBFCDX test is so slow, that you have not waited
> until it was finished.

Locally DBFCDX - the speed I was quite happy (and I use it for local things)
But for the network version - very slowly!

> I've asked the question about local DBFCDX speed, because of your results:

DBFCDX
locally (two processes)
adding 100000 entries - 6 seconds
Read all entries - 0.25 seconds
Update Records - 20 seconds

> I do not see a reason for such a big difference between NETIO and LetoDB in
> case server and client runs locally. Sound like something is wrong wit our
> socket layer.

	
NETIO makes too many small operations (network) of reading and writing
(at the level of individual pieces of the file)
LetoDB transmits macro-operation, at the level of records and commands
From harbour.01 at syenar.hu  Fri Sep 25 06:51:15 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 25 06:51:24 2009
Subject: [Harbour] Re: OS/2: library format
In-Reply-To: <4ABC9E57.7020302@mail.udg.mx>
References: <4ABC9E57.7020302@mail.udg.mx>
Message-ID: <AF35879E-871F-43EF-A588-62D3155D10D6@syenar.hu>

> Do you have some comment/suggestion/action for my proposal ?
> --------------------------
> My proposal is to use and environmental variable to choose code in
> gcc.mk and hbmk2.prg
> Something like HB_OS2_TCP32 which was included to choose "tcp/ip  
> stack"
> in OS/2
> --------------------------
>
> Perhaps
> HB_OS2_AOUT=yes if OMF is default
> HB_OS2_OMF=yes if a.out is default
> I suggested OMF default because is common to gcc335, gcc4xx, and  
> a.out is not able in gcc4xx due problem with emxbind
> OpenWatcom use OMF too and OMF is "native" in OS/2

To keep logic simple I'd rather suggest to
introduce new compiler target os2/gcc4 and
include all "OMF" stuff in there. I would
only add new build switches if absolutely
necessary and if it's generally useful for
*all* targets.

[ Other option is to rename os2/gcc to os2/gcc3
and add new 4.x OMF support as os2/gcc. Depends
on which one OS/2 users think is best to have
as "default". ]

Brgds,
Viktor

From M.Horodyski at pzuzycie.com.pl  Fri Sep 25 06:58:13 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Fri Sep 25 06:58:29 2009
Subject: [Harbour] Web Services in Harbour
In-Reply-To: <886635.11941.qm@web33707.mail.mud.yahoo.com>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950288D8C9@PINK.zycie.pzu>
	<886635.11941.qm@web33707.mail.mud.yahoo.com>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950288D96C@PINK.zycie.pzu>

>-----Original Message-----
>From: Antonio Carlos [mailto:toninhofwi@yahoo.com.br] 
>Sent: Friday, September 25, 2009 12:48 PM
>To: Harbour Project Main Developer List.
>Subject: RE: [Harbour] Web Services in Harbour
>
>Thank you Marek.
>
>It works perfectly. In my case, I only need ws client, like 
>your sample.
>
>BTW I read on the internet that SOAP was replaced by net 
>framework. Will be so good if we have an example how access ws 
>via net framework too.

I do not have any knowledge about it.
This sample code was published many years ago by Ron Pinkas on xHarbour
news group.
I just need to serve webservices :(. 

Regards,
Marek Horodyski
From harbour.01 at syenar.hu  Fri Sep 25 07:41:25 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 25 07:41:35 2009
Subject: [Harbour] Re: OS/2: library format
In-Reply-To: <4ABC92F3.5070008@mail.udg.mx>
References: <4ABC92F3.5070008@mail.udg.mx>
Message-ID: <BA9410A4-8246-43BC-8EAD-6272706A8167@syenar.hu>

>> Actually just in recent days a Hungarian OS/2 user approached
>> me for help. All I could do is point him to this list and INSTALL  
>> doc.
>
> Care him carefully, perhaps is the last "Hungarian OS/2 user"  :-)

Most probably :)

>> If there is anything more to say about OS/2/gcc build (like what
>> packages to download/install, if it's something special), I think  
>> it'd
>> be good to include it in INSTALL.
>
> In
>    ftp://ftp.netlabs.org/pub/gcc/
> there are many gcc versions <= gcc335
> The proper last one is:
>  GCC-3.3.5-csd3.zip
> It is unpacked in x:\usr
> In x:\usr\bin, executing gccenv.cmd set proper gcc environment

I'll add this to INSTALL links and example.

> and with new make:
>  ftp://hobbes.nmsu.edu/pub/os2/dev/util/make-3.81-r3-bin-static.zip

This is already included.

> Perhaps may require proper libc*.dll file
>  libc-0_6_3-csd3.exe or libc-0_6_3-csd3.wpi

Can you define "perhaps" here?
What is the difference between the .exe and .wpi?
(what is .wpi?)

> So in Harbour is enough
>  make install
>
> Is optional to select TCP/IP stack. For older one:
>   set HB_USER_CFLAGS=-DTCPV40HDRS %HB_USER_CFLAGS%
>   set HB_USER_LDFLAGS=-Lx:\usr\lib\tcpipv4 %HB_USER_LDFLAGS%

I'll include it, although I still don't understand
when this is needed, or why.

> It build fine Harbour with gcc335 in a.out library format
>
> For "coming soon" Harbour support of OMF type, gcc432, gcc433, gcc440
> the small changes described must be applied

As discussed in other thread, here a new compiler name
may be the solution, I'll include any info in INSTALL,
when we have some working solution.

Brgds,
Viktor

From maurilio.longo at libero.it  Fri Sep 25 08:20:42 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Fri Sep 25 08:20:51 2009
Subject: [Harbour] Re: OS/2: library format
In-Reply-To: <BA9410A4-8246-43BC-8EAD-6272706A8167@syenar.hu>
References: <4ABC92F3.5070008@mail.udg.mx>
	<BA9410A4-8246-43BC-8EAD-6272706A8167@syenar.hu>
Message-ID: <4ABCB59A.6000409@libero.it>

Viktor Szak?ts wrote:
> Can you define "perhaps" here?
> What is the difference between the .exe and .wpi?
> (what is .wpi?)
> 
an auto installer package, like .msi on win32

>> So in Harbour is enough
>>  make install
>>
>> Is optional to select TCP/IP stack. For older one:
>>   set HB_USER_CFLAGS=-DTCPV40HDRS %HB_USER_CFLAGS%
>>   set HB_USER_LDFLAGS=-Lx:\usr\lib\tcpipv4 %HB_USER_LDFLAGS%
> 
> I'll include it, although I still don't understand
> when this is needed, or why.
> 

It is needed if you want your executable to be able to run on old versions of
OS/2 which had a 16/32 bit tcp-ip stack (newer ones have a full 32 bit tcp-ip
stack).

Maurilio.


-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From dmacias at mail.udg.mx  Fri Sep 25 09:09:43 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Sep 25 09:09:57 2009
Subject: [Harbour] Re: OS/2: library format
Message-ID: <4ABCC117.2050200@mail.udg.mx>

Viktor:

 >To keep logic simple I'd rather suggest to
 >introduce new compiler target os2/gcc4 and
 >include all "OMF" stuff in there. I would
 >only add new build switches if absolutely
 >necessary and if it's generally useful for
 >*all* targets.

 >[ Other option is to rename os2/gcc to os2/gcc3
 >and add new 4.x OMF support as os2/gcc. Depends
 >on which one OS/2 users think is best to have
 >as "default". ]

This lead immediatly to mantain two versions, gcc3 or gcc4, and is 
inadequate. As Maurilio said, we are short of resources
Changes for support a.out and OMF are minimal and can be managed easily 
in gcc.mk, hbmk2.prg as I am doing now and explained in summary

Obviously in this case is necessary a switch for os2-gcc version, as it 
can work with two types of library format
Exactly as HB_OS2_TCP32 was added specifically for OS/2
So is absolutely necessary unless other option lead to choose one type

INSTALL can specify it


 >> The proper last one is:
 >>  GCC-3.3.5-csd3.zip
 >> It is unpacked in x:\usr
 >> In x:\usr\bin, executing gccenv.cmd set proper gcc environment

 >I'll add this to INSTALL links and example.

And for gcc4xx, this is the page of Paul Smedley
   http://os2ports.smedley.info/

Files are unpacked to separate directories, so different versions can be 
used. For example:
  x:\usr\local433

These are some motivations and results of Paul for gcc433:
--------------------------------------
Mainly due to the fact that GCC 3.3.5 (which is what is currently used 
by kLibc) is becoming too old to build the latest Mozilla trunk code, I 
started working on building a newer version of GCC.

I've started with v3.4.6 - as the thought was that the amount of changed 
between 3.3.5 and 3.4.6 would be comparatively small compared with 
aiming for the 'latest' GCC (currently 4.3.3).  I now have builds of 
3.4.6, 4.0.4 and 4.3.3

The current binary of GCC 4.3.3 has been used to build several projects 
successfully - ie rsync, Apache2, MySQL, Firefox 3.0-cvs, Ghostscript, 
ffmpeg amongst others
--------------------------------------


 >> Perhaps may require proper libc*.dll file
 >>  libc-0_6_3-csd3.exe or libc-0_6_3-csd3.wpi

 >Can you define "perhaps" here?

libcxyz.dll are GCC runtime for different gcc versions/releases

They are usually specified as necessary for some program, so maybe the 
last survivor (OS/2 user in Hungary) have it installed previously
Now I have these (I deleted others):
------------------
14/04/04  4:37p       356,330      0 a---  libc05.dll
11/06/07 10:53p        48,142      0 a---  libc06.dll
11/06/07 10:53p        48,142      0 a---  libc061.dll
11/06/07 10:53p       157,124      0 a---  libc062.dll
  5/09/06  8:51a       929,002      0 a---  libc062x.dll
11/06/07 10:53p     1,349,060      0 a---  libc063.dll
------------------

For example, notes for Firefox stated:
------------------------------
The GCC runtime is required; download that at 
ftp://ftp.netlabs.org/pub/gcc/libc-0.6.3-csd3.zip (zip file), 
ftp://ftp.netlabs.org/pub/gcc/libc-0_6_3-csd3.wpi (WarpIn archive), or 
ftp://ftp.netlabs.org/pub/gcc/libc-0_6_3-csd3.exe (a self- extracting 
executable). The GCC runtime installer defaults to x:\OS2\DLL (where x 
is your OS/2 or eComStation boot drive); it may be preferable to put the 
runtime in the same directory as the Firefox executable, or in 
x:\ECS\DLL (which is where I have it on my eComStation machine).
------------------------------

 >What is the difference between the .exe and .wpi?

Explained before

 >(what is .wpi?)
Extension for Warpin files

 From http://warpin.netlabs.org
------------------
     WarpIN is intended to become the new general-purpose installer for 
OS/2 to overcome the current lack of a both flexible and user-friendly 
installer.
------------------

Just like Windows Installer, RPM installer, ...

 >> Is optional to select TCP/IP stack. For older one:
 >>   set HB_USER_CFLAGS=-DTCPV40HDRS %HB_USER_CFLAGS%
 >>   set HB_USER_LDFLAGS=-Lx:\usr\lib\tcpipv4 %HB_USER_LDFLAGS%

 >I'll include it, although I still don't understand
 >when this is needed, or why.

As I said in previous message:
-------------------------------
Note for Viktor: In current SVN there are not any reference to
HB_OS2_TCP32. It gone when make_gnu_os2.cmd was deleted
I still use it and maybe Maurilio will use it if upgrade his OS/2
-------------------------------

This subject caused years ago a long discussion between Maurilio and me 
( as a.out/OMF and/or gcc4xx is causing now  :-) ) and Przemek pacified 
it introducing HB_OS2_TCP32

So a new switch can be introduced too  :-)

I am using eComStation with newer TCP/IP, while Maurilio explained that 
rest of world is using older TCP/IP, so Przemek added this 
explanation/solution (make_gnu_os2.cmd):

------------------------------------
rem In GCC3.2.2 the TCP/IP headers and libraries scheme have been changed.
rem The default is the current OS/2 tcpip toolkit (BSD 4.4 based).
rem To target the older OS/2 tcpip stack (BSD 4.3 based) and create
rem binaries which can be executed also on older OS2 versions you must
rem define TCPV40HDRS before including any TCP/IP headers and make
rem sure usr/lib/tcpipv4 is searched before usr/lib (this is to
rem get the right libsocket). It is recommended to use the -D
rem compiler option for the define and either the LIBRARY_PATH or
rem the -L compiler/linker option for the library.
rem For building Harbour you can also use HB_USER_LDFLAGS environment 
variable,
rem f.e.
rem         set HB_USER_LDFLAGS=-Le:\usr\lib\tcpipv4
rem
rem If you are using newer OS2 version with tcp/ip stack >= 4.1
rem (eComStation, for example) and you do not need backward binary
rem compatibility then you can disable it by setting HB_OS2_TCP32
rem environment variable, f.e.
rem         SET HB_OS2_TCP32=yes

if "%HB_OS2_TCP32%" == "yes" goto tcp32
if "%HB_OS2_TCP32%" == "YES" goto tcp32
Rem   set C_USR=-DTCPV40HDRS %C_USR%
Rem   set L_USR=-Le:\usr\lib\tcpipv4 %L_USR%
    set HB_USER_CFLAGS=-DTCPV40HDRS %HB_USER_CFLAGS%
    set HB_USER_LDFLAGS=-Le:\usr\lib\tcpipv4 %HB_USER_LDFLAGS%
:tcp32
------------------------------------


 >As discussed in other thread, here a new compiler name
 >may be the solution, I'll include any info in INSTALL,
 >when we have some working solution.

Explained before

A new specific OS/2 switch/environmental variable and use/changes in 
gcc.mk / hbmk2.prg will put to work OS/2 in a.out/OMF, gcc335/gcc4xx 
alternatives

After all I am doing it and is very simple

Note: "new specific switch for OS/2" is ONLY to choose library format 
between a.out and OMF, and NOT for choose gcc335/gcc4xx. Later does not 
need to be specified and is stated/autodetected based in path

Again:
gcc335 support a.out and OMF. Harbour historically "ONLY know" a.out
gcc4xx support OMF. Does NOT WORK a.out because a problem with emxbind

So to state different os2\gcc3 and os2\gcc4 is UNNECESSARY

OS/2 Harbour origins were based in emx/gcc(281,295?) environments, 
limited, and later replaced by enhanced gcc335. I was using 
gcc(281,295?), Harbour stop to build, and Maurilio explained me to use 
"newer gcc335" many years ago. Is time to go ahead with gcc4xx 
introducing at same time the option to use a.out or OMF

Other note:
Perhaps OS/2 Hungarian user need emx runtime too (emx.dll, emx 0.9d) if 
using a.out type
As I have it (x:\emx\) since around 10-12 years ago, I am not sure if it 
is need for gcc335/a.out

David Macias


From dmacias at mail.udg.mx  Fri Sep 25 09:15:44 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Sep 25 09:15:56 2009
Subject: [Harbour] Harbour under OS/2 - eCS 12604
Message-ID: <4ABCC280.30803@mail.udg.mx>

Build tests with (near) current Harbour

  * $Id: ChangeLog 12604 2009-09-22 21:11:13Z snaiperis $
2009-09-23 00:13 UTC+0300 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)

build fine with gcc335

Build using Harbour sources "as is": a.out type
  .dll files build fine

Strangely gcc335 report a warning (memio.c, see below) not reported by 
gcc433

Which is right ?  :-)

David Macias


../../../sqlite3.c: In function `sqlite3_os_init':
../../../sqlite3.c:21265: warning: initialization from incompatible 
pointer type

../../../gtstd.c: In function `hb_gt_std_ReadKey':
../../../gtstd.c:412: warning: unused variable `TODO'
../../../memio.c: In function `hb_memfsOpen':
../../../memio.c:307: warning: `pFile' might be used uninitialized in 
this function

From dmacias at mail.udg.mx  Fri Sep 25 09:29:51 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Fri Sep 25 09:30:02 2009
Subject: [Harbour] Re: OS/2: library format
Message-ID: <4ABCC5CF.7080807@mail.udg.mx>

Viktor:

Months ago, trying to use gcc4xx I collected many information and there 
I "discovered" a.out/OMF choices

Below are some parts which come from 2005

David Macias


Date:  Tue, 07 Jun 2005 20:42:32 -0800
From:  "Dave Yeo" <dave_yeo at paralynx.com>
Subject:  Re:  a.out vs omf

On Wed, 08 Jun 2005 08:41:44 +0930, Paul Smedley wrote:

 >Hi All,
 >Is there any good documentation out there on use of a.out and OMF and the
 >relative pros & cons?
 >
 >Cheers,
 >
 >Paul.
 >
 >
Well there's the original EMX documentation (emxdev.inf) which is now 
out of date re
Innotek_Libc. Most of the reasons for a.out are now gone. Fork works on 
both now,
debugger needs OMF instead of a.out now, DLLs seem to be created fine 
with a.out as
well as OMF. Not sure about things like stack size and of course DOS and 
Windows
(RSX) support is now gone.
Knut has done an excellent job of making OMF work now and it is OS/2s 
native format.
A.out was Linuxes original format and is still well supported by the 
auto tools.
I guess read emxdev.inf then the release notes from innotek_libc. 
Hopefully others will
chime in
Dave


**= Email   6 ==========================**

Date:  Wed, 08 Jun 2005 12:23:22 +0200 (CEST)
From:  Stefan.Neis at t-online.de
Subject:  Re:  a.out vs omf

        Hi,

 > Knut has done an excellent job of making OMF
 > work now and it is OS/2s native format.

Yes, from the library point of view, it's fine
now, the only problem left are occasional
limitations of the tools, like complaints on
duplicate symbols are records that are too
long.

        Regards,
              Stefan





From hernad at sigma-com.net  Fri Sep 25 09:35:32 2009
From: hernad at sigma-com.net (Ernad Husremovic)
Date: Fri Sep 25 09:35:44 2009
Subject: [Harbour] LETODB to harbour svn ?
In-Reply-To: <2668582.151253885510952.JavaMail.root@zimbra-1.sigma-com.net>
Message-ID: <9908569.171253885732687.JavaMail.root@zimbra-1.sigma-com.net>

For sure, there's a lot of interest for LETODB or similar RDD in harbour.

There is problem with project support, it seems Alexander is mainly unavailable.

It would be best to get feecback from author about this topic.

But, if he is unreachable, I don't see any obstacle (project license GPL v2) for including LETODB in harbour svn.

LETODB current users will get more confidence in the future of the project. 
It will be quite enough to be close to eyes of Przemek and Victor :)

It would be benefit for other harbour users also: there is strong need for opensource client-server DBF RDD.

For sure, inclusion of LETODB can only have positive efetct on LETODB project itself.

How to do that if we cannot reach Alexander ? What are other's opinion ? 

Regards,
Ernad

----- "Viktor Szak?ts" <harbour.01@syenar.hu> wrote:

> Dunno where to address this, but I tried LetoDB the other
> day with production app, and instantly stumbled upon a
> fatal because dbExists() isn't implemented.
> 
> I also had to patch source to fix hb_socket...() function
> collision.
> 
> It'd be great if someone could fix these in LetoDB repository.
> 
> BTW I have nothing against hosting LetoDB in Harbour
> repository, but here Alexander has the final word, so if
> he also likes the idea, plus other Harbour developers also
> agree, we can do it.
> 
> Brgds,
> Viktor
> 
> On 2009 Sep 24, at 18:15, alxokhotnikov wrote:
> 
> > Hi
> >
> > NETIO
> >
> > locally (two processes)
> > adding 100000 entries - 80 seconds
> > Read all entries - 10 seconds
> > Update Records - 35 seconds
> >
> > the network (two computers)
> > adding 100000 records - 320 seconds
> > Read all entries - 60 seconds
> > Update Records - 420 seconds
> >
> > And all of this, any interruption of the client (eg, hanging) leads
> to
> > data corruption (index)
> >
> >
> > LetoDB
> >
> > locally (two processes)
> > adding 100000 entries - 10 seconds
> > Read all entries - 2 seconds
> > Update Records - 18 seconds
> >
> > the network (two computers)
> > adding 100000 entries - 45 seconds
> > Read all entries - 10 seconds
> > Update Records - 110 seconds
> >
> > 1. Data are not damaged
> > 2. The results even better than the RDDADS
> >
> > Maybe in the harbour add LetoDB (or take it as a basis)?
> >
> > 2009/9/24 Przemyslaw Czerpak <druzus@acn.waw.pl>:
> >> On Wed, 23 Sep 2009, Mindaugas Kavaliauskas wrote:
> >>> I want to share more test results after using memory FS in real  
> >>> project.
> >>> Report generation time (min:sec):
> >>>   Local disk database              3:07
> >>>   Network database                25:52
> >>>   Local disk database and MemFS    2:22 + 0:03 (copying to memory 
> 
> >>> FS)
> >>>   Network database and MemFS       2:24 + 0:13 (copying to memory 
> 
> >>> FS)
> >>
> >> Very nice contribution and also final results.
> >>
> >> In last week I've found a while to make some test with NETIO and
> MS- 
> >> Windows.
> >> The test were done on WinXP, SMB and NETIO servers were on Suse  
> >> Linux, T100
> >> LAN. Any opportunistic locks in SMB server were disabled.
> >> The test program is attached below. I was testing only shared
> mode.
> >> I tested SMB, NETIO and also xHarbour REDBFCDX and there is not  
> >> noticeable
> >> results. All tests gave results similar:
> >>
> >> Harbour 2.0.0beta3 (Rev. 12431), Windows XP 5.1.2600 Dodatek  
> >> Service Pack 3
> >> RDD: DBFCDX type: CHARACTER (shared)
> >> records: 10000, repeated: 1, modulo: 10000
> >> creating database and index...        69.66 sec.
> >> skip test...                          17.38 sec. count: 10000
> >> revers skip test...                   17.28 sec. count: 10000
> >> testing seek...                       17.28 sec. count: 10000
> >> goto test...                          17.34 sec. count: 10000
> >> goto+skip test...                     30.38 sec. count: 10000
> >> skip test...                          17.41 sec. count: 10000
> >> revers skip test...                   17.27 sec. count: 10000
> >> testing seek...                       17.30 sec. count: 10000
> >> goto test...                          17.27 sec. count: 10000
> >> goto+skip test...                     30.31 sec. count: 10000
> >> Total execution time...              268.91 sec.
> >>
> >> and the difference were smaller then 0.5%. Just simply the net  
> >> overhead
> >> is such huge that rest is unimportant.
> >> The difference can be seen only in local tests and here Harbour
> was
> >> faster then xHarbour but it's mostly result for faster Harbour VM.
> >>
> >> The local disk tests in WinXP and Harbour using DBFCDX with native
> IO
> >> took ~2.50 seconds. It means that in above test Harbour consumes
> less
> >> then 1% and rest is the cost of network overhead.
> >>
> >> BTW testing REDBFCDX do not forget to add RE_TURBO( .f. ) -
> REDBFCDX
> >> enables dirty reading by default or add Sx_SetTurbo( .t. ) to
> other
> >> RDDs to enable it too. Otherwise there is no sense to make any  
> >> comparisons
> >> and probably it's also the reason why Miguel has better then native
>  
> >> SMB
> >> protocol results testing REDBFCDX.
> >> Of course the difference strongly depends on hardware transport  
> >> layer,
> >> the results in WAN or in T10/T1000/T10000 LANs can be completely  
> >> different
> >> but this test clearly shows that to reach real speed improvement
> it's
> >> necessary to create RDD oriented server which can group IO
> operations
> >> in some bigger logical units to reduce number of packages which  
> >> have to
> >> be send and confirmed. Operating only on transport layer like NETIO
>  
> >> we
> >> can reach some small improvement yet, i.e. we can disable  
> >> confirmation
> >> in UNLOCK operation what in above tests can increase the SKIP tests
>  
> >> ~20%
> >> (Maybe I'll add such extension soon) or we can try to group some  
> >> operations,
> >> i.e. join index lock and concurrent access counter read into
> single
> >> operation what may give even 50% speed improvement in the SKIP but 
> 
> >> it needs
> >> modifications in core RDD code so I do not like it because it may 
> 
> >> start
> >> very danger in longer terms process of adding local hacks to core 
> 
> >> RDD code.
> >>
> >> best regards,
> >> Przemek
> >> _______________________________________________
> >> Harbour mailing list
> >> Harbour@harbour-project.org
> >> http://lists.harbour-project.org/mailman/listinfo/harbour
> >>
> > _______________________________________________
> > Harbour mailing list
> > Harbour@harbour-project.org
> > http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
From harbour.01 at syenar.hu  Fri Sep 25 09:39:16 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Fri Sep 25 09:39:25 2009
Subject: [Harbour] Re: OS/2: library format
In-Reply-To: <4ABCC117.2050200@mail.udg.mx>
References: <4ABCC117.2050200@mail.udg.mx>
Message-ID: <F3E78904-4C0F-4B44-AF3F-2A163EDD8A77@syenar.hu>

Hi David,

> >[ Other option is to rename os2/gcc to os2/gcc3
> >and add new 4.x OMF support as os2/gcc. Depends
> >on which one OS/2 users think is best to have
> >as "default". ]
>
> This lead immediatly to mantain two versions, gcc3 or gcc4, and is  
> inadequate. As Maurilio said, we are short of resources
> Changes for support a.out and OMF are minimal and can be managed  
> easily in gcc.mk, hbmk2.prg as I am doing now and explained in summary

I don't know, if you ask me both solution give much extra
work to maintain, and the extra switch is even inelegant.

Probably OS/2 users should come to conclusion which gcc
version should be supported in Harbour and invest all time
and energy into that.

Both maintaining two gcc.mk files and adding OS/2 specific
hacks to hbmk2 and the make system seems like giving even
more continuous efforts to maintain OS/2 port, and I envision
most of such effort will have to invested by me. So, sorry
if this sounds rude, but I don't like either ideas.

> >Can you define "perhaps" here?
>
> libcxyz.dll are GCC runtime for different gcc versions/releases
>
> They are usually specified as necessary for some program, so maybe  
> the last survivor (OS/2 user in Hungary) have it installed previously
> Now I have these (I deleted others):
> ------------------
> 14/04/04  4:37p       356,330      0 a---  libc05.dll
> 11/06/07 10:53p        48,142      0 a---  libc06.dll
> 11/06/07 10:53p        48,142      0 a---  libc061.dll
> 11/06/07 10:53p       157,124      0 a---  libc062.dll
> 5/09/06  8:51a       929,002      0 a---  libc062x.dll
> 11/06/07 10:53p     1,349,060      0 a---  libc063.dll
> ------------------
>
> For example, notes for Firefox stated:
> ------------------------------
> The GCC runtime is required; download that at ftp://ftp.netlabs.org/pub/gcc/libc-0.6.3-csd3.zip 
>  (zip file), ftp://ftp.netlabs.org/pub/gcc/libc-0_6_3-csd3.wpi  
> (WarpIn archive), or ftp://ftp.netlabs.org/pub/gcc/libc-0_6_3- 
> csd3.exe (a self- extracting executable). The GCC runtime installer  
> defaults to x:\OS2\DLL (where x is your OS/2 or eComStation boot  
> drive); it may be preferable to put the runtime in the same  
> directory as the Firefox executable, or in x:\ECS\DLL (which is  
> where I have it on my eComStation machine).
> ------------------------------

:$ I'll add link to the first .exe you listed.

> From http://warpin.netlabs.org
> ------------------
>    WarpIN is intended to become the new general-purpose installer  
> for OS/2 to overcome the current lack of a both flexible and user- 
> friendly installer.
> ------------------
>
> Just like Windows Installer, RPM installer, ...

Thank you.

> As I said in previous message:
> -------------------------------
> Note for Viktor: In current SVN there are not any reference to
> HB_OS2_TCP32. It gone when make_gnu_os2.cmd was deleted
> I still use it and maybe Maurilio will use it if upgrade his OS/2
> -------------------------------

I know, but since all starter batch files got deleted, so
were the comment.

> This subject caused years ago a long discussion between Maurilio and  
> me ( as a.out/OMF and/or gcc4xx is causing now  :-) ) and Przemek  
> pacified it introducing HB_OS2_TCP32
>
> So a new switch can be introduced too  :-)

IMO one extra switch to control to other generic ones
doesn't really justify the maintenance of the former,
so IMO we're now just fine.

I'd think that by now there should be a default which
suits _most_ OS/2 users ;)

> ------------------------------------
> rem In GCC3.2.2 the TCP/IP headers and libraries scheme have been  
> changed.
> rem The default is the current OS/2 tcpip toolkit (BSD 4.4 based).
> rem To target the older OS/2 tcpip stack (BSD 4.3 based) and create
> rem binaries which can be executed also on older OS2 versions you must
> rem define TCPV40HDRS before including any TCP/IP headers and make
> rem sure usr/lib/tcpipv4 is searched before usr/lib (this is to
> rem get the right libsocket). It is recommended to use the -D
> rem compiler option for the define and either the LIBRARY_PATH or
> rem the -L compiler/linker option for the library.
> rem For building Harbour you can also use HB_USER_LDFLAGS  
> environment variable,
> rem f.e.
> rem         set HB_USER_LDFLAGS=-Le:\usr\lib\tcpipv4
> rem
> rem If you are using newer OS2 version with tcp/ip stack >= 4.1
> rem (eComStation, for example) and you do not need backward binary
> rem compatibility then you can disable it by setting HB_OS2_TCP32
> rem environment variable, f.e.

Yes, I know this text, but for me it doesn't tell anything
meaningful. For me the most important thing here is what are the
real-life chances some users want to choose this or the other.
And setup the default in a way to it won't require any fiddling
with this for most users.

> A new specific OS/2 switch/environmental variable and use/changes in  
> gcc.mk / hbmk2.prg will put to work OS/2 in a.out/OMF, gcc335/gcc4xx  
> alternatives
>
> After all I am doing it and is very simple
>
> Note: "new specific switch for OS/2" is ONLY to choose library  
> format between a.out and OMF, and NOT for choose gcc335/gcc4xx.  
> Later does not need to be specified and is stated/autodetected based  
> in path

I don't like it.

With the switch solution it would be extremely easy to mess up a build
by forgetting to set or unset the switch depending on gcc version used,
or using lib files coming from the other version of gcc. HB_COMPILER
should denote _compatible_ targets, in this case this would no longer
be true.

Since we're talking about totally incompatible GCC setups, the distinct
names seems to me absolutely justified.

Anyhow even those would require extra work, which I just don't feel
justified either.

> Again:
> gcc335 support a.out and OMF. Harbour historically "ONLY know" a.out
> gcc4xx support OMF. Does NOT WORK a.out because a problem with emxbind

So because of a bug, the object format needs to be changed?

IMO, Harbour OS/2 users should choose gcc3 OR gcc4 as the
supported OS/2 compiler for Harbour, and we should then
concentrate on that.

I personally wouldn't pay the price in extra work just to give
one more extra and incompatible option for OS/2. Support already
is enough of a maintenance burden.

> So to state different os2\gcc3 and os2\gcc4 is UNNECESSARY
>
> OS/2 Harbour origins were based in emx/gcc(281,295?) environments,  
> limited, and later replaced by enhanced gcc335. I was using gcc 
> (281,295?), Harbour stop to build, and Maurilio explained me to use  
> "newer gcc335" many years ago. Is time to go ahead with gcc4xx  
> introducing at same time the option to use a.out or OMF
>
> Other note:
> Perhaps OS/2 Hungarian user need emx runtime too (emx.dll, emx 0.9d)  
> if using a.out type
> As I have it (x:\emx\) since around 10-12 years ago, I am not sure  
> if it is need for gcc335/a.out

I hope he reads these lines!

Brgds,
Viktor

From hernad at sigma-com.net  Fri Sep 25 09:42:14 2009
From: hernad at sigma-com.net (Ernad Husremovic)
Date: Fri Sep 25 09:42:28 2009
Subject: [Harbour] Re: LETODB to harbour svn ?
In-Reply-To: <9908569.171253885732687.JavaMail.root@zimbra-1.sigma-com.net>
Message-ID: <8679710.201253886134272.JavaMail.root@zimbra-1.sigma-com.net>

> .. Przemek and Victor :)
s/Victor/Viktor, sorry
From itamarlins at bol.com.br  Fri Sep 25 09:44:26 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Fri Sep 25 09:46:44 2009
Subject: [Harbour] Re: LETODB to harbour svn ?
References: <2668582.151253885510952.JavaMail.root@zimbra-1.sigma-com.net>
	<9908569.171253885732687.JavaMail.root@zimbra-1.sigma-com.net>
Message-ID: <h9ihiv$h89$1@ger.gmane.org>

Hi!
My vote is for include LetoDb in contrib of harbour.

Best regards,
Itamar M. Lins Jr. 



From mbelgrano at deltain.it  Fri Sep 25 10:09:08 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Sep 25 10:09:37 2009
Subject: [Harbour] Re: LETODB to harbour svn ?
In-Reply-To: <h9ihiv$h89$1@ger.gmane.org>
References: <2668582.151253885510952.JavaMail.root@zimbra-1.sigma-com.net> 
	<9908569.171253885732687.JavaMail.root@zimbra-1.sigma-com.net> 
	<h9ihiv$h89$1@ger.gmane.org>
Message-ID: <609353e70909250709r69f4fe57qeb1236cf0d8ea163@mail.gmail.com>

+1 vote

2009/9/25 Itamar Lins <itamarlins@bol.com.br>

> Hi!
> My vote is for include LetoDb in contrib of harbour.
>
> Best regards,
> Itamar M. Lins Jr.
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090925/f9017d9c/attachment.html
From fmancera at viaopen.com  Fri Sep 25 10:35:59 2009
From: fmancera at viaopen.com (fmancera@viaopen.com)
Date: Fri Sep 25 10:36:05 2009
Subject: [Harbour] Error building Harbour
In-Reply-To: <F3E78904-4C0F-4B44-AF3F-2A163EDD8A77@syenar.hu>
References: <4ABCC117.2050200@mail.udg.mx>
	<F3E78904-4C0F-4B44-AF3F-2A163EDD8A77@syenar.hu>
Message-ID: <eea08a2f3909595282c77f5f07935ffb@viaopen.com>

Hello,

I try build harbour using win-make with bcc and VC2008 and have the next
error:

Fatal: Unable to open file 'KERNEL32.LIB'
win-make[3]: *** [hbpp.exe] Error 1
rm hbpp.obj
win-make[2]: *** [descend] Error 2
win-make[1]: *** [pp] Error 2
win-make: *** [source] Error 2

can any help me ??

Best Regards,

Fernando Mancera
www.viaopen.com
From niki at synel.co.il  Fri Sep 25 12:42:10 2009
From: niki at synel.co.il (Chen Kedem)
Date: Fri Sep 25 12:42:22 2009
Subject: [Harbour] MS SQL and ODBC.
Message-ID: <1A07FEDC778C3E4AA417F089511F859C1D7A237D1C@Mail-yoq.SYNEL-COMPANY.LTD>

Mindaugas,

> I still do not know the difference between SQL_VARCHAR and QL_NVARCHAR

In MS-SQL:

CHAR - Fixed length ASCII field (1 byte per character).
VARCHAR - Variable length ASCII field (1 byte per character).
NCHAR - Fixed length UNICODE field (2 bytes per character).
NVARCHAR - Variable length UNICODE field (2 bytes per character).

  Chen.

PS. Had just finished reading through 166 Harbour digests, and back online with the list
From m.lacecilia at gmail.com  Sat Sep 26 03:38:42 2009
From: m.lacecilia at gmail.com (Maurizio la Cecilia)
Date: Sat Sep 26 03:38:48 2009
Subject: [Harbour] LETODB to harbour svn ?
In-Reply-To: <9908569.171253885732687.JavaMail.root@zimbra-1.sigma-com.net>
References: <9908569.171253885732687.JavaMail.root@zimbra-1.sigma-com.net>
Message-ID: <25623103.post@talk.nabble.com>


I can only agree to LetoDB contrib inclusion.
Same history has hwGUI: Alex become unreachable and the project quite
stopped.
Only when a group of developers got control and involved new guys the lib
returned to grow and new features was introduced, mainly by Luis Fernando
Basso.
Alex is very busy and not ever present, so the partecipation of a greater
team of developers can guarantee the life of the project, giving value to
the very strong and effective Alex's work.
Best regards.
Maurizio la Cecilia
-- 
View this message in context: http://www.nabble.com/LETODB-to-harbour-svn---tp25612291p25623103.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From jlcapel2 at gmail.com  Sat Sep 26 07:35:02 2009
From: jlcapel2 at gmail.com (=?ISO-8859-1?Q?Jos=E9_Luis_Capel?=)
Date: Sat Sep 26 07:35:08 2009
Subject: [Harbour] LETODB to harbour svn ?
In-Reply-To: <25623103.post@talk.nabble.com>
References: <9908569.171253885732687.JavaMail.root@zimbra-1.sigma-com.net>
	<25623103.post@talk.nabble.com>
Message-ID: <ab2a7b4c0909260435u27c8cc8ald0a218d0ce6dac68@mail.gmail.com>

Hi all,

Yes, I think it could be good for letodb and for us :-)

Regards,
Jos? Luis Caepl


2009/9/26 Maurizio la Cecilia <m.lacecilia@gmail.com>

>
> I can only agree to LetoDB contrib inclusion.
> Same history has hwGUI: Alex become unreachable and the project quite
> stopped.
> Only when a group of developers got control and involved new guys the lib
> returned to grow and new features was introduced, mainly by Luis Fernando
> Basso.
> Alex is very busy and not ever present, so the partecipation of a greater
> team of developers can guarantee the life of the project, giving value to
> the very strong and effective Alex's work.
> Best regards.
> Maurizio la Cecilia
> --
> View this message in context:
> http://www.nabble.com/LETODB-to-harbour-svn---tp25612291p25623103.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090926/16ad30ab/attachment.html
From mbelgrano at deltain.it  Sun Sep 27 03:09:50 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Sep 27 03:10:17 2009
Subject: [Harbour] Possible problem on list?
Message-ID: <609353e70909270009s44bd70f2j5a991125cc1c2f29@mail.gmail.com>

In the last two day somebody from Italy not receive any messages from list
which kind of operation is suggested after verify subscription and filter
spam?
-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090927/1533c126/attachment.html
From mbelgrano at deltain.it  Sun Sep 27 03:24:56 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sun Sep 27 03:25:22 2009
Subject: [Harbour] FWH 6.12 free of cost, legal download
Message-ID: <609353e70909270024s1a037681j6089e2c62f5ea76e@mail.gmail.com>

I notice follow news

2009/9/26 Antonio Linares <antonio.fivetech@gmail.com>:
- Nascondi testo citato -
> http://www.fivetechsoft.com/english/downloads.html
>
> --
> Antonio Linares
> www.fivetechsoft.com
>

-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090927/e7f85e9d/attachment.html
From eghorbino at yahoo.com  Sun Sep 27 06:00:49 2009
From: eghorbino at yahoo.com (Edmer)
Date: Sun Sep 27 06:00:55 2009
Subject: [Harbour] Status of the svn?
In-Reply-To: <1C27A9A0-6ADE-4844-A98D-772724841881@syenar.hu>
References: <9257026e0909250124s63e08908p9a1339c63a242907@mail.gmail.com>
	<1C27A9A0-6ADE-4844-A98D-772724841881@syenar.hu>
Message-ID: <25632342.post@talk.nabble.com>


Is there any timeframe for the next stable release ?

Regards,
Ed


Viktor Szak?ts wrote:
> 
> I think it's safe to use. It only improved compared
> to the last beta3, which was also stable.
> 
> Brgds,
> Viktor
> 
> On 2009 Sep 25, at 10:24, Lorenzo Fiorini wrote:
> 
>> I'd like to refresh my "stable" local branch ( now based on beta1
>> ChangeLog 11315 2009-06-12 ) to include -fpic fixes and so avoid
>> selinux issues.
>>
>> Comments about actual status of the svn?
>>
>> best regards,
>> Lorenzo
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/Status-of-the-svn--tp25608321p25632342.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From calimero22 at freemail.it  Sun Sep 27 11:13:29 2009
From: calimero22 at freemail.it (calimero22@freemail.it)
Date: Sun Sep 27 11:13:35 2009
Subject: [Harbour] Possible problem on list?
Message-ID: <20090927151329.442A268001BF@eva105.dadanet.it>

An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090927/014f6e5a/attachment.html
From harbour.01 at syenar.hu  Sun Sep 27 11:16:08 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Sep 27 11:16:17 2009
Subject: [Harbour] off: MiniGUI question (tget*.prg)
Message-ID: <209BACEC-8A54-4F50-9A97-2E2903C4BF69@syenar.hu>

Hi All, especially MiniGUI developers,

In case there are MiniGUI developers reading this list,
I have a question for them.

The second time I'm getting a complaint / report directly
to my e-mail about MiniGUI TGET problems, and while I can't
solve them, I noticed that MiniGUI still ships with a Harbour
build which uses two very old version of tget.prg and tgetint.prg.

Large amount of fixes have been deployed since to these sources,
so I wonder what is the reason that such hack must be made?
And if there would be a solution which would allow using current
versions.

If anyone has some information on that, it'd be nice to hear it.

Brgds,
Viktor

From gfilatov at front.ru  Sun Sep 27 12:33:04 2009
From: gfilatov at front.ru (Grigory Filatov)
Date: Sun Sep 27 12:33:10 2009
Subject: [Harbour] off: MiniGUI question (tget*.prg)
In-Reply-To: <209BACEC-8A54-4F50-9A97-2E2903C4BF69@syenar.hu>
References: <209BACEC-8A54-4F50-9A97-2E2903C4BF69@syenar.hu>
Message-ID: <25635085.post@talk.nabble.com>


Hi Viktor,

Thanks for your interest!

The MiniGUI Extended Edition have a control GetBox which is based on an old
version TGet class.
I've needed help for updating this control to using a current version
tget.prg and tgetint.prg sources.

This is the reason of such hack ;-(

Your help is very appropriative (if it is possible).

Thanks for your attention!

--
Best Regards,
Grigory


Viktor Szak?ts wrote:
> 
> Hi All, especially MiniGUI developers,
> 
> In case there are MiniGUI developers reading this list,
> I have a question for them.
> 
> The second time I'm getting a complaint / report directly
> to my e-mail about MiniGUI TGET problems, and while I can't
> solve them, I noticed that MiniGUI still ships with a Harbour
> build which uses two very old version of tget.prg and tgetint.prg.
> 
> Large amount of fixes have been deployed since to these sources,
> so I wonder what is the reason that such hack must be made?
> And if there would be a solution which would allow using current
> versions.
> 
> If anyone has some information on that, it'd be nice to hear it.
> 
> Brgds,
> Viktor
> 
> 

-- 
View this message in context: http://www.nabble.com/off%3A-MiniGUI-question-%28tget*.prg%29-tp25634465p25635085.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Sun Sep 27 15:05:33 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Sun Sep 27 15:05:50 2009
Subject: [Harbour] off: MiniGUI question (tget*.prg)
In-Reply-To: <25635085.post@talk.nabble.com>
References: <209BACEC-8A54-4F50-9A97-2E2903C4BF69@syenar.hu>
	<25635085.post@talk.nabble.com>
Message-ID: <EBECCEB8-4E9F-46E2-98FB-094C7C79E195@syenar.hu>

Hi Grigory,

Thanks for your answer.

What is exactly the problem which makes GetBox not to work
with new version? My guess would be using protected methods
or internal methods which got removed since. In such case
you can either modify GetBox code to not use those internals
(only pure Clipper compatible GET interface), or (and if
every other options fail) you can subclass it and implement
extra functionality in your MiniGUI_TGET class. If that's
impossible, you can just include old source but using a
different class name and use that in GetBox code. (licensing
should be checked in this case, but if you publish such
modified Harbour source code, it should be okay)

I'd recommend going with first option, if possible.
(this I can't tell without knowing exactly what are the
issue here)

Brgds,
Viktor

On 2009 Sep 27, at 18:33, Grigory Filatov wrote:

>
> Hi Viktor,
>
> Thanks for your interest!
>
> The MiniGUI Extended Edition have a control GetBox which is based on  
> an old
> version TGet class.
> I've needed help for updating this control to using a current version
> tget.prg and tgetint.prg sources.
>
> This is the reason of such hack ;-(
>
> Your help is very appropriative (if it is possible).
>
> Thanks for your attention!
>
> --
> Best Regards,
> Grigory
>
>
> Viktor Szak?ts wrote:
>>
>> Hi All, especially MiniGUI developers,
>>
>> In case there are MiniGUI developers reading this list,
>> I have a question for them.
>>
>> The second time I'm getting a complaint / report directly
>> to my e-mail about MiniGUI TGET problems, and while I can't
>> solve them, I noticed that MiniGUI still ships with a Harbour
>> build which uses two very old version of tget.prg and tgetint.prg.
>>
>> Large amount of fixes have been deployed since to these sources,
>> so I wonder what is the reason that such hack must be made?
>> And if there would be a solution which would allow using current
>> versions.
>>
>> If anyone has some information on that, it'd be nice to hear it.
>>
>> Brgds,
>> Viktor
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/off%3A-MiniGUI-question-%28tget*.prg%29-tp25634465p25635085.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From gfilatov at front.ru  Sun Sep 27 15:25:29 2009
From: gfilatov at front.ru (Grigory Filatov)
Date: Sun Sep 27 15:25:35 2009
Subject: [Harbour] off: MiniGUI question (tget*.prg)
In-Reply-To: <EBECCEB8-4E9F-46E2-98FB-094C7C79E195@syenar.hu>
References: <209BACEC-8A54-4F50-9A97-2E2903C4BF69@syenar.hu>
	<25635085.post@talk.nabble.com>
	<EBECCEB8-4E9F-46E2-98FB-094C7C79E195@syenar.hu>
Message-ID: <25636719.post@talk.nabble.com>


Hi Viktor,

> What is exactly the problem which makes GetBox not to work
> with new version? My guess would be using protected methods
> or internal methods which got removed since. 

That's right!

Examples:

-first definition:
   oget:= GET()
   oget:New( - 1, - 1, { | x | If( x == NIL, oget:cargo, oget:cargo := x ) }
, '', cPicture )
   oget:cargo     := Value
   oget:preblock  := when
   oget:postblock := valid
   oget:message   := cmessage
   oget:name      := mVar
   oget:SetFocus()
   oget:original  := oGet:Buffer

- internal variable access
...
   If ValType( oget:preblock ) == 'B'
      if !eval( oGet:preblock, oGet, .F. )
         if (oGet:VarGet()==oGet:UnTransform(oGet:Original))
            lAllowEdit:=.f.
         endif
      endif
   EndIf
...
      oGet:pos := nEnd + 1
      oget:changed := .f.
      oGet:Updatebuffer()

and so on.

> you can just include old source but using a different class name and use
> that in GetBox code

This is a simple solution for aboved issue.

--
Regards,
Grigory


Viktor Szak?ts wrote:
> 
> Hi Grigory,
> 
> Thanks for your answer.
> 
> What is exactly the problem which makes GetBox not to work
> with new version? My guess would be using protected methods
> or internal methods which got removed since. In such case
> you can either modify GetBox code to not use those internals
> (only pure Clipper compatible GET interface), or (and if
> every other options fail) you can subclass it and implement
> extra functionality in your MiniGUI_TGET class. If that's
> impossible, you can just include old source but using a
> different class name and use that in GetBox code. (licensing
> should be checked in this case, but if you publish such
> modified Harbour source code, it should be okay)
> 
> I'd recommend going with first option, if possible.
> (this I can't tell without knowing exactly what are the
> issue here)
> 
> Brgds,
> Viktor
> 
> 

-- 
View this message in context: http://www.nabble.com/off%3A-MiniGUI-question-%28tget*.prg%29-tp25634465p25636719.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From vouchcac at users.sourceforge.net  Sun Sep 27 16:29:16 2009
From: vouchcac at users.sourceforge.net (vouchcac@users.sourceforge.net)
Date: Sun Sep 27 16:29:28 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12622] trunk/harbour
Message-ID: <E1Ms0Mu-0002QM-2F@3kljzd1.ch3.sourceforge.com>

Revision: 12622
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12622&view=rev
Author:   vouchcac
Date:     2009-09-27 20:29:12 +0000 (Sun, 27 Sep 2009)

Log Message:
-----------
2009-09-27 12:58 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * contrib/hbqt/generator/hbqtgen.prg
    ! Modified TO implement destructors IN a different way.

  * contrib/hbqt/qth/QAbstractItemModel.qth
    + Added more CLASS members.

  * contrib/hbqt/hbqt.ch
  * contrib/hbqt/hbqt.h
  * contrib/hbqt/hbqt_slots.cpp
  * contrib/hbqt/hbqt_slots.h
  * contrib/hbqt/moc_slots.cpp
    + Added more members plus re-worked event management to support multi-threads
      and multi-windows in a different perspective. It is an effort to locate where
      Harbour's Qt implementation is buggy with respect to ever increasing memory usage
      plus Qt's Paint Engine which appears to be dependant on thread's idle time.
      [ This is the way I preceive this fact ]

  * contrib/hbqt/QAbstractButton.cpp
  * contrib/hbqt/QAbstractItemModel.cpp
  * contrib/hbqt/QAbstractItemView.cpp
  * contrib/hbqt/QAbstractListModel.cpp
  * contrib/hbqt/QAbstractScrollArea.cpp
  * contrib/hbqt/QAbstractSlider.cpp
  * contrib/hbqt/QAbstractSpinBox.cpp
  * contrib/hbqt/QAbstractTableModel.cpp
  * contrib/hbqt/QAction.cpp
  * contrib/hbqt/QApplication.cpp
  * contrib/hbqt/QBitmap.cpp
  * contrib/hbqt/QBoxLayout.cpp
  * contrib/hbqt/QBrush.cpp
  * contrib/hbqt/QButtonGroup.cpp
  * contrib/hbqt/QCalendarWidget.cpp
  * contrib/hbqt/QColor.cpp
  * contrib/hbqt/QColorDialog.cpp
  * contrib/hbqt/QComboBox.cpp
  * contrib/hbqt/QCoreApplication.cpp
  * contrib/hbqt/QCursor.cpp
  * contrib/hbqt/QDateTime.cpp
  * contrib/hbqt/QDesktopWidget.cpp
  * contrib/hbqt/QDial.cpp
  * contrib/hbqt/QDialog.cpp
  * contrib/hbqt/QDir.cpp
  * contrib/hbqt/QDirModel.cpp
  * contrib/hbqt/QDockWidget.cpp
  * contrib/hbqt/QDragMoveEvent.cpp
  * contrib/hbqt/QErrorMessage.cpp
  * contrib/hbqt/QEvent.cpp
  * contrib/hbqt/QEventLoop.cpp
  * contrib/hbqt/QFileDialog.cpp
  * contrib/hbqt/QFileSystemModel.cpp
  * contrib/hbqt/QFocusFrame.cpp
  * contrib/hbqt/QFont.cpp
  * contrib/hbqt/QFontComboBox.cpp
  * contrib/hbqt/QFontInfo.cpp
  * contrib/hbqt/QFontMetrics.cpp
  * contrib/hbqt/QFontMetricsF.cpp
  * contrib/hbqt/QFormLayout.cpp
  * contrib/hbqt/QFrame.cpp
  * contrib/hbqt/QFtp.cpp
  * contrib/hbqt/QGridLayout.cpp
  * contrib/hbqt/QGroupBox.cpp
  * contrib/hbqt/QHBoxLayout.cpp
  * contrib/hbqt/QHeaderView.cpp
  * contrib/hbqt/QHttp.cpp
  * contrib/hbqt/QIcon.cpp
  * contrib/hbqt/QImage.cpp
  * contrib/hbqt/QImageReader.cpp
  * contrib/hbqt/QImageWriter.cpp
  * contrib/hbqt/QInputDialog.cpp
  * contrib/hbqt/QIODevice.cpp
  * contrib/hbqt/QKeyEvent.cpp
  * contrib/hbqt/QKeySequence.cpp
  * contrib/hbqt/QLabel.cpp
  * contrib/hbqt/QLayoutItem.cpp
  * contrib/hbqt/QLCDNumber.cpp
  * contrib/hbqt/QLineEdit.cpp
  * contrib/hbqt/QList.cpp
  * contrib/hbqt/QListView.cpp
  * contrib/hbqt/QListWidget.cpp
  * contrib/hbqt/QListWidgetItem.cpp
  * contrib/hbqt/QMainWindow.cpp
  * contrib/hbqt/QMenu.cpp
  * contrib/hbqt/QMenuBar.cpp
  * contrib/hbqt/QMessageBox.cpp
  * contrib/hbqt/QModelIndex.cpp
  * contrib/hbqt/QMouseEvent.cpp
  * contrib/hbqt/QMoveEvent.cpp
  * contrib/hbqt/QObject.cpp
  * contrib/hbqt/QPaintDevice.cpp
  * contrib/hbqt/QPainter.cpp
  * contrib/hbqt/QPalette.cpp
  * contrib/hbqt/QPen.cpp
  * contrib/hbqt/QPicture.cpp
  * contrib/hbqt/QPixmap.cpp
  * contrib/hbqt/QPoint.cpp
  * contrib/hbqt/QPrintDialog.cpp
  * contrib/hbqt/QPrintEngine.cpp
  * contrib/hbqt/QPrinter.cpp
  * contrib/hbqt/QPrintPreviewDialog.cpp
  * contrib/hbqt/QProcess.cpp
  * contrib/hbqt/QProgressDialog.cpp
  * contrib/hbqt/QPushButton.cpp
  * contrib/hbqt/QRect.cpp
  * contrib/hbqt/QRectF.cpp
  * contrib/hbqt/QRegion.cpp
  * contrib/hbqt/QResource.cpp
  * contrib/hbqt/QScrollArea.cpp
  * contrib/hbqt/QScrollBar.cpp
  * contrib/hbqt/QSignalMapper.cpp
  * contrib/hbqt/QSize.cpp
  * contrib/hbqt/QSizeF.cpp
  * contrib/hbqt/QSizeGrip.cpp
  * contrib/hbqt/QSlider.cpp
  * contrib/hbqt/QSound.cpp
  * contrib/hbqt/QSplashScreen.cpp
  * contrib/hbqt/QSplitter.cpp
  * contrib/hbqt/QStandardItem.cpp
  * contrib/hbqt/QStandardItemModel.cpp
  * contrib/hbqt/QStatusBar.cpp
  * contrib/hbqt/QStyle.cpp
  * contrib/hbqt/QStyledItemDelegate.cpp
  * contrib/hbqt/QStyleOption.cpp
  * contrib/hbqt/QSystemTrayIcon.cpp
  * contrib/hbqt/QTabBar.cpp
  * contrib/hbqt/QTableView.cpp
  * contrib/hbqt/QTableWidget.cpp
  * contrib/hbqt/QTableWidgetItem.cpp
  * contrib/hbqt/QTabWidget.cpp
  * contrib/hbqt/QTextBoundaryFinder.cpp
  * contrib/hbqt/QTextCursor.cpp
  * contrib/hbqt/QTextDecoder.cpp
  * contrib/hbqt/QTextDocument.cpp
  * contrib/hbqt/QTextDocumentFragment.cpp
  * contrib/hbqt/QTextDocumentWriter.cpp
  * contrib/hbqt/QTextEdit.cpp
  * contrib/hbqt/QTextEncoder.cpp
  * contrib/hbqt/QTextFormat.cpp
  * contrib/hbqt/QTextFrame.cpp
  * contrib/hbqt/QTextLayout.cpp
  * contrib/hbqt/QTextStream.cpp
  * contrib/hbqt/QTimer.cpp
  * contrib/hbqt/QToolBar.cpp
  * contrib/hbqt/QToolBox.cpp
  * contrib/hbqt/QToolButton.cpp
  * contrib/hbqt/QTreeView.cpp
  * contrib/hbqt/QTreeWidget.cpp
  * contrib/hbqt/QTreeWidgetItem.cpp
  * contrib/hbqt/QUrl.cpp
  * contrib/hbqt/QVariant.cpp
  * contrib/hbqt/QVBoxLayout.cpp
  * contrib/hbqt/QWebHistoryInterface.cpp
  * contrib/hbqt/QWebHistoryItem.cpp
  * contrib/hbqt/QWebHitTestResult.cpp
  * contrib/hbqt/QWebPage.cpp
  * contrib/hbqt/QWebPluginFactory.cpp
  * contrib/hbqt/QWebSecurityOrigin.cpp
  * contrib/hbqt/QWebView.cpp
  * contrib/hbqt/QWidget.cpp
  * contrib/hbqt/QWidgetAction.cpp
  * contrib/hbqt/QWindowsStyle.cpp
  * contrib/hbqt/QWindowsXPStyle.cpp
  * contrib/hbqt/QWizard.cpp
  * contrib/hbqt/TQAbstractItemModel.prg
    ! Result of change in implemention of destructors in hbqtgen.prg.

    [ In this commit I had concentrated on two pit-falls which may 
      certainly prevent Qt's efficacy in Habour applications:

          1. Ever-growing memory usage.
          2. GPF in multi-threaded multi-windows

      Though I have tried my level best to pin-point where memory usage
      keeps up growing, I could not find anything worth control. I changed the 
      way destructors were implemented before, but that also seems to be 
      insufficent. But as we have better control over the events, some 
      of you will be able to locate what exactly is the problem.

      GPF in multi-threaded multi-window scenario is caused by PAINT event
      which produces GPF is CPU is not released momentarily for that thread.
      So I inserted hb_idleSleep( 0.2 ) in the code where PAINT event is about 
      to be returning, and the GPF went away. But this insertion has a greater
      damaging effect that it slows down the application considerably as 
      with each single keystroke, appln becomes idle for that much period.
      I have guarded this under QT_EXECUTE_IN_THREADS constant for now.
      If you want to play with this feature than compile HBQT with it
      and then open <Dialogs><One more instance> menu option. Do not 
      bother about how slow appln executes but simply open as mamny 
      dialogs as you want and navigate different components.
      NOTE: you may require to increase nMilliSeconds in hb_idleSleep( 0.2 )
            from 0.2 to 0.5 as this value is heavily CPU dependant.

      Hope someone will be able to locate exact fixes to above two issues. ]       

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbqt/QAbstractButton.cpp
    trunk/harbour/contrib/hbqt/QAbstractItemModel.cpp
    trunk/harbour/contrib/hbqt/QAbstractItemView.cpp
    trunk/harbour/contrib/hbqt/QAbstractListModel.cpp
    trunk/harbour/contrib/hbqt/QAbstractScrollArea.cpp
    trunk/harbour/contrib/hbqt/QAbstractSlider.cpp
    trunk/harbour/contrib/hbqt/QAbstractSpinBox.cpp
    trunk/harbour/contrib/hbqt/QAbstractTableModel.cpp
    trunk/harbour/contrib/hbqt/QAction.cpp
    trunk/harbour/contrib/hbqt/QApplication.cpp
    trunk/harbour/contrib/hbqt/QBitmap.cpp
    trunk/harbour/contrib/hbqt/QBoxLayout.cpp
    trunk/harbour/contrib/hbqt/QBrush.cpp
    trunk/harbour/contrib/hbqt/QButtonGroup.cpp
    trunk/harbour/contrib/hbqt/QCalendarWidget.cpp
    trunk/harbour/contrib/hbqt/QColor.cpp
    trunk/harbour/contrib/hbqt/QColorDialog.cpp
    trunk/harbour/contrib/hbqt/QComboBox.cpp
    trunk/harbour/contrib/hbqt/QCoreApplication.cpp
    trunk/harbour/contrib/hbqt/QCursor.cpp
    trunk/harbour/contrib/hbqt/QDateTime.cpp
    trunk/harbour/contrib/hbqt/QDesktopWidget.cpp
    trunk/harbour/contrib/hbqt/QDial.cpp
    trunk/harbour/contrib/hbqt/QDialog.cpp
    trunk/harbour/contrib/hbqt/QDir.cpp
    trunk/harbour/contrib/hbqt/QDirModel.cpp
    trunk/harbour/contrib/hbqt/QDockWidget.cpp
    trunk/harbour/contrib/hbqt/QDragMoveEvent.cpp
    trunk/harbour/contrib/hbqt/QErrorMessage.cpp
    trunk/harbour/contrib/hbqt/QEvent.cpp
    trunk/harbour/contrib/hbqt/QEventLoop.cpp
    trunk/harbour/contrib/hbqt/QFileDialog.cpp
    trunk/harbour/contrib/hbqt/QFileSystemModel.cpp
    trunk/harbour/contrib/hbqt/QFocusFrame.cpp
    trunk/harbour/contrib/hbqt/QFont.cpp
    trunk/harbour/contrib/hbqt/QFontComboBox.cpp
    trunk/harbour/contrib/hbqt/QFontInfo.cpp
    trunk/harbour/contrib/hbqt/QFontMetrics.cpp
    trunk/harbour/contrib/hbqt/QFontMetricsF.cpp
    trunk/harbour/contrib/hbqt/QFormLayout.cpp
    trunk/harbour/contrib/hbqt/QFrame.cpp
    trunk/harbour/contrib/hbqt/QFtp.cpp
    trunk/harbour/contrib/hbqt/QGridLayout.cpp
    trunk/harbour/contrib/hbqt/QGroupBox.cpp
    trunk/harbour/contrib/hbqt/QHBoxLayout.cpp
    trunk/harbour/contrib/hbqt/QHeaderView.cpp
    trunk/harbour/contrib/hbqt/QHttp.cpp
    trunk/harbour/contrib/hbqt/QIODevice.cpp
    trunk/harbour/contrib/hbqt/QIcon.cpp
    trunk/harbour/contrib/hbqt/QImage.cpp
    trunk/harbour/contrib/hbqt/QImageReader.cpp
    trunk/harbour/contrib/hbqt/QImageWriter.cpp
    trunk/harbour/contrib/hbqt/QInputDialog.cpp
    trunk/harbour/contrib/hbqt/QKeyEvent.cpp
    trunk/harbour/contrib/hbqt/QKeySequence.cpp
    trunk/harbour/contrib/hbqt/QLCDNumber.cpp
    trunk/harbour/contrib/hbqt/QLabel.cpp
    trunk/harbour/contrib/hbqt/QLayoutItem.cpp
    trunk/harbour/contrib/hbqt/QLineEdit.cpp
    trunk/harbour/contrib/hbqt/QList.cpp
    trunk/harbour/contrib/hbqt/QListView.cpp
    trunk/harbour/contrib/hbqt/QListWidget.cpp
    trunk/harbour/contrib/hbqt/QListWidgetItem.cpp
    trunk/harbour/contrib/hbqt/QMainWindow.cpp
    trunk/harbour/contrib/hbqt/QMenu.cpp
    trunk/harbour/contrib/hbqt/QMenuBar.cpp
    trunk/harbour/contrib/hbqt/QMessageBox.cpp
    trunk/harbour/contrib/hbqt/QModelIndex.cpp
    trunk/harbour/contrib/hbqt/QMouseEvent.cpp
    trunk/harbour/contrib/hbqt/QMoveEvent.cpp
    trunk/harbour/contrib/hbqt/QObject.cpp
    trunk/harbour/contrib/hbqt/QPaintDevice.cpp
    trunk/harbour/contrib/hbqt/QPainter.cpp
    trunk/harbour/contrib/hbqt/QPalette.cpp
    trunk/harbour/contrib/hbqt/QPen.cpp
    trunk/harbour/contrib/hbqt/QPicture.cpp
    trunk/harbour/contrib/hbqt/QPixmap.cpp
    trunk/harbour/contrib/hbqt/QPoint.cpp
    trunk/harbour/contrib/hbqt/QPrintDialog.cpp
    trunk/harbour/contrib/hbqt/QPrintEngine.cpp
    trunk/harbour/contrib/hbqt/QPrintPreviewDialog.cpp
    trunk/harbour/contrib/hbqt/QPrinter.cpp
    trunk/harbour/contrib/hbqt/QProcess.cpp
    trunk/harbour/contrib/hbqt/QProgressDialog.cpp
    trunk/harbour/contrib/hbqt/QPushButton.cpp
    trunk/harbour/contrib/hbqt/QRect.cpp
    trunk/harbour/contrib/hbqt/QRectF.cpp
    trunk/harbour/contrib/hbqt/QRegion.cpp
    trunk/harbour/contrib/hbqt/QResource.cpp
    trunk/harbour/contrib/hbqt/QScrollArea.cpp
    trunk/harbour/contrib/hbqt/QScrollBar.cpp
    trunk/harbour/contrib/hbqt/QSignalMapper.cpp
    trunk/harbour/contrib/hbqt/QSize.cpp
    trunk/harbour/contrib/hbqt/QSizeF.cpp
    trunk/harbour/contrib/hbqt/QSizeGrip.cpp
    trunk/harbour/contrib/hbqt/QSlider.cpp
    trunk/harbour/contrib/hbqt/QSound.cpp
    trunk/harbour/contrib/hbqt/QSplashScreen.cpp
    trunk/harbour/contrib/hbqt/QSplitter.cpp
    trunk/harbour/contrib/hbqt/QStandardItem.cpp
    trunk/harbour/contrib/hbqt/QStandardItemModel.cpp
    trunk/harbour/contrib/hbqt/QStatusBar.cpp
    trunk/harbour/contrib/hbqt/QStyle.cpp
    trunk/harbour/contrib/hbqt/QStyleOption.cpp
    trunk/harbour/contrib/hbqt/QStyledItemDelegate.cpp
    trunk/harbour/contrib/hbqt/QSystemTrayIcon.cpp
    trunk/harbour/contrib/hbqt/QTabBar.cpp
    trunk/harbour/contrib/hbqt/QTabWidget.cpp
    trunk/harbour/contrib/hbqt/QTableView.cpp
    trunk/harbour/contrib/hbqt/QTableWidget.cpp
    trunk/harbour/contrib/hbqt/QTableWidgetItem.cpp
    trunk/harbour/contrib/hbqt/QTextBoundaryFinder.cpp
    trunk/harbour/contrib/hbqt/QTextCursor.cpp
    trunk/harbour/contrib/hbqt/QTextDecoder.cpp
    trunk/harbour/contrib/hbqt/QTextDocument.cpp
    trunk/harbour/contrib/hbqt/QTextDocumentFragment.cpp
    trunk/harbour/contrib/hbqt/QTextDocumentWriter.cpp
    trunk/harbour/contrib/hbqt/QTextEdit.cpp
    trunk/harbour/contrib/hbqt/QTextEncoder.cpp
    trunk/harbour/contrib/hbqt/QTextFormat.cpp
    trunk/harbour/contrib/hbqt/QTextFrame.cpp
    trunk/harbour/contrib/hbqt/QTextLayout.cpp
    trunk/harbour/contrib/hbqt/QTextStream.cpp
    trunk/harbour/contrib/hbqt/QTimer.cpp
    trunk/harbour/contrib/hbqt/QToolBar.cpp
    trunk/harbour/contrib/hbqt/QToolBox.cpp
    trunk/harbour/contrib/hbqt/QToolButton.cpp
    trunk/harbour/contrib/hbqt/QTreeView.cpp
    trunk/harbour/contrib/hbqt/QTreeWidget.cpp
    trunk/harbour/contrib/hbqt/QTreeWidgetItem.cpp
    trunk/harbour/contrib/hbqt/QUrl.cpp
    trunk/harbour/contrib/hbqt/QVBoxLayout.cpp
    trunk/harbour/contrib/hbqt/QVariant.cpp
    trunk/harbour/contrib/hbqt/QWebHistoryInterface.cpp
    trunk/harbour/contrib/hbqt/QWebHistoryItem.cpp
    trunk/harbour/contrib/hbqt/QWebHitTestResult.cpp
    trunk/harbour/contrib/hbqt/QWebPage.cpp
    trunk/harbour/contrib/hbqt/QWebPluginFactory.cpp
    trunk/harbour/contrib/hbqt/QWebSecurityOrigin.cpp
    trunk/harbour/contrib/hbqt/QWebView.cpp
    trunk/harbour/contrib/hbqt/QWidget.cpp
    trunk/harbour/contrib/hbqt/QWidgetAction.cpp
    trunk/harbour/contrib/hbqt/QWindowsStyle.cpp
    trunk/harbour/contrib/hbqt/QWindowsXPStyle.cpp
    trunk/harbour/contrib/hbqt/QWizard.cpp
    trunk/harbour/contrib/hbqt/TQAbstractItemModel.prg
    trunk/harbour/contrib/hbqt/generator/hbqtgen.prg
    trunk/harbour/contrib/hbqt/hbqt.ch
    trunk/harbour/contrib/hbqt/hbqt.h
    trunk/harbour/contrib/hbqt/hbqt_slots.cpp
    trunk/harbour/contrib/hbqt/hbqt_slots.h
    trunk/harbour/contrib/hbqt/moc_slots.cpp
    trunk/harbour/contrib/hbqt/qth/QAbstractItemModel.qth


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bedipritpal at hotmail.com  Sun Sep 27 22:37:31 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sun Sep 27 22:37:37 2009
Subject: [Harbour] MEMIO - Some Clarifications
Message-ID: <25639924.post@talk.nabble.com>


Hello Mindagaus, All

I have finished porting some parts of my appln's
report-generation of routines to take advantage of 
MEMIO instead of disk files and have found the following.

One of reports creates a table, say,  rpa80025.dbf and 
associated index, ttt14071.z01. The numbers part is pulled
with hb_random to ensure that file name is unique in every 
run, regardless of thread or process creating it.

The tables are created properly, and at the end, dbDrop()
reports true for both .dbf and .z01.

I run the same report various times and got these facts

RUN#      TimeToFinish       Mem Usage
               (excluding         ( Task
                  display )           Manager )

1              906
2              859
3              875
4              906
5              937
6              953
7              985
8             1016 
9             1032
10           1062
11           1078
12           1109
13           1141
14           1156
15           1203
16           1203
17           1250           14548
18           1266           14568
19           1282           14568
20           1312           14576
21           1329           14588
22           1375           14604
23           1390           14608
24           1422           14612

Is it a normal behavior ?
Or should I put more rigorous checks
to measure the performance ?
Or something is still required in MemIO implementation ?
Or may be I am missing something completely ?

It appears that this proto is going to be very helpful
in networked and/or netio environments.

Thanks for this very useful contribution.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/MEMIO---Some-Clarifications-tp25639924p25639924.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From M.Horodyski at pzuzycie.com.pl  Mon Sep 28 04:58:57 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Mon Sep 28 04:59:06 2009
Subject: [Harbour] 2 ask on SQL Server in one time.
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950288DA94@PINK.zycie.pzu>

Mindaugas,
I try open 2 selects on MSSQL :

DBUSEAREA( .T., "SQLMIX", "select * from klient", "KLIENT")
DBUSEAREA( .T., "SQLMIX", "select p.*, nazwa from PRODUKT p, klient k where p.id_klient = k.id_klient and jed = '1234' and system = 1", "KLI_PROD")

And have error in second query :

oErr:severity_____         2
oErr:osCode_______         0
oErr:subsystem()__SDDODBC
oErr:subCode______      1903
oErr:description__B??d podczas otwarcia zbioru // Error while opening file
oErr:filename_____
oErr:operation____select p.*, nazwa from PRODUKT p, klient k where p.id_klient = k.id_klient and jed = '1234' and system = 1
oErr:genCode______        21
oErr:args_________U


When I open it as one ask, all is ok..
What is the error and what should I change?

Regards,
Marek Horodyski
From lorenzo.fiorini at gmail.com  Mon Sep 28 05:30:06 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 28 05:30:12 2009
Subject: [Harbour] Type assignment discards qualifiers from pointer target
	type
Message-ID: <9257026e0909280230r68fecfa9s814b454f4eb3b07d@mail.gmail.com>

This is an old C function but it's used in a 3rd party lib so I can't
use HB's standard one.
When I build it with 2.0.0beta3 gcc warnings. How can I fix it?

#include <extend.h>

#ifdef __HARBOUR__
HB_FUNC( BIT )
#else
CLIPPER bit( void )
#endif
{
   char            *ptr;
   unsigned char   mask;
   unsigned int    loc,
                   offset = _parni( 2 ) - 1,
                   res    = 0;

   loc = offset / 8;
   if ( loc < _parclen( 1 ) )
   {
      ptr = _parc( 1 ) + loc;  <---- warning here
      loc = offset % 8;
      res = *ptr << loc & 0x80;

      if ( PCOUNT > 2 )
      {
         mask = (unsigned char ) 0x80 >> loc;
         if ( _parl( 3 ) )
            *ptr = *ptr | mask;
         else
            *ptr = *ptr & ~mask;
      }
   }
   _retl( res );
}

best regards,
Lorenzo
From dmacias at mail.udg.mx  Mon Sep 28 05:39:22 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Mon Sep 28 05:39:45 2009
Subject: [Harbour] Harbour under OS/2 - eCS 12604 -12621
Message-ID: <4AC0844A.2020502@mail.udg.mx>

Confirmed. The guilty is length of command line

Harbour build entirely except harbourm.dll in OMF type with gcc335 and
gcc4xx
I tried to build with Harbour 12604 and after two days of tests I tried
with Harbour 12621 (a fresh new one) with identical results

Harbour build report:

-------------------
gcc: gcc: error executing emxomfld.exe: Invalid argument
make[4]: *** [harbourm.dll] Error 1
make[3]: *** [descend] Error 2
make[2]: *** [mt] Error 2
make[1]: *** [dynlib] Error 2
make: *** [source] Error 2
-------------------

and part of make_gnu.log show (in 12621):
-------------------
gcc -Zomf -shared -L../../../../../lib/os2/gcc  -o
../../../../../bin/os2/gcc/harbour.dll @__dyn__.tmp __dyn__.def -lsocket
Warning! W1058: file ldvJjRLI.: line(613): protmode option not valid for
an OS/2 EMX dynamic link library
emximp -o ../../../../../lib/os2/gcc/harbour.lib
../../../../../bin/os2/gcc/harbour.dll
make[3]: Leaving directory
`E:/harbour909f/harbour/source/dynlib/obj/os2/gcc'
make[3]: Entering directory `E:/harbour909f/harbour/source/dynlib/mt'
make[4]: Entering directory
`E:/harbour909f/harbour/source/dynlib/mt/obj/os2/gcc'
gcc -Zomf -shared -L../../../../../../lib/os2/gcc  -o
../../../../../../bin/os2/gcc/harbourm.dll @__dyn__.tmp __dyn__.def
-lsocket
make[4]: Leaving directory
`E:/harbour909f/harbour/source/dynlib/mt/obj/os2/gcc'
make[3]: Leaving directory `E:/harbour909f/harbour/source/dynlib/mt'
make[2]: Leaving directory `E:/harbour909f/harbour/source/dynlib'
make[1]: Leaving directory `E:/harbour909f/harbour/source'
make: Leaving directory `E:/harbour909f/harbour'
-------------------

So harbour.dll was building fine and not harbourm.dll  (!?)

Note warning for protmode in harbour.dll

Checking and comparing __dyn__.tmp are near identical except for vmmt
directory. Contains same number and names of objects and so on ...

I started a long way of changing values in *.mk files without success,
allways with same error
   "gcc: gcc: error executing emxomfld.exe: Invalid argument"

Reading info I used "p" parameter for make.exe which describe a long
list of values/operations used in current make proccess. It show a lot
of redefinitions
The intention was to limit list of libraries included in order to find
the "possible" object file causing error
I never found where to change this library list, and specially for mt

Never found LIBS definition for this expression:
   DLIBS := $(foreach lib,$(LIBS) $(SYSLIBS),-l$(lib))
and suppressing it nothing change

Note: using $(DYNNAME) does not include .dll extension, so I suppose it
is added by default and not due Harbour definitions
    @$(ECHO) LIBRARY $(DYNNAME) INITINSTANCE TERMINSTANCE >> __dyn__.def

Question: why source\dynlib\Makefile include line
    include $(TOP)$(ROOT)config/dir.mk
and not are included in source\dynlib\mt\Makefile ?


Then I used the "brilliant" idea of use -v parameter in gcc and it gave
a lot of explanations
I tried to include sections for harbour.dll and harbourm.dll but editor
said: "too much selected text for clipboard buffer"
So it is a lot of text :-)

Spliting section for harbour.dll have this form:

---------------------------
gcc -Zomf -shared -L../../../../../lib/os2/gcc -v  -o
../../../../../bin/os2/gcc/harbour.dll @__dyn__.tmp __dyn__.def -lsocket

Reading specs from E:/usr/lib/gcc-lib/i386-pc-os2-emx/3.3.5/specs
Configured with: D:/CODING/LIBC/SVN/BRANCHES/LIBC-0.6/src/gcc/configure
--enable-clh --enable-threads=os2 --enable-shared=libgcc,bfd,opcodes
--enable-nls --without-included-gettext
--with-local-prefix=D:/CODING/LIBC/SVN/BRANCHES/LIBC-0.6/TOOLS/x86.os2/gcc/staged 

--prefix=/gcc --with-gnu-as --disable-libgcj --enable-languages=c,c++
Thread model: os2
gcc version 3.3.5 (Bird Build 2007-06-10 14:30)

  emxomfld.exe -Zdll
-o ../../../../../bin/os2/gcc/harbour.dll
E:/usr/lib/dll0.obj
-L../../../../../lib/os2/gcc
-LE:/usr/lib/gcc-lib/i386-pc-os2-emx/3.3.5
-LE:/usr/lib/gcc-lib
-LE:/usr/lib/gcc-lib/i386-pc-os2-emx/3.3.5
-LE:/usr/lib
-LE:/harbour909f/harbour/source/dynlib/obj/os2/gcc
-LE:/USR/lib/gcc-lib/i386-pc-os2-emx/3.3.5
-LE:/usr/i386-pc-os2-emx/lib
-LE:/USR/i386-pc-os2-emx/lib
-LE:/usr/lib
-LE:/usr/lib

..\..\..\..\..\source\common\obj\os2\gcc\expropt1.obj

[rest of .obj files list]

..\..\..\..\..\source\vm\obj\os2\gcc\vm.obj
__dyn__.def -lsocket
-lc_alias
-lc_dll
-los2
-lgcc_so_d
-lc_alias
-lc_dll
-los2
-lend

Warning! W1058: file ldiCT5F5.: line(613): protmode option not valid for
an OS/2 EMX dynamic link library

emximp -o ../../../../../lib/os2/gcc/harbour.lib
../../../../../bin/os2/gcc/harbour.dll

---------------------------


Spliting section for harbourm.dll have exactly the same form. The only
differences are:
- "..\..\..\..\..\..\" in place of "..\..\..\..\..\"
- "vm\vmmt\" in place of "vm\"

I tried to build harbourm.dll using a directory in same level of dynlib,
for example "source\mydyn", suppresing "source\dynlib\mt", using
Makefile for "source\dynlib\mt" moving up one dir, and adjusting
Makefile for "source"
Results was an harbourm.dll with exactly the same length as harbour.dll
    :-) (?)

So I changed test:
- Move source\dynlib\mt\obj\os2\gcc\__dyn__.tmp, .def files one dir up,
to source\dynlib\mt\obj\os2\__dyn__.tmp, .def files
- Change in __dyn__.tmp "..\..\..\..\..\..\" with "..\..\..\..\..\"
- Execute gcc for harbourm.dll using a dir up:
gcc -Zomf -shared -L../../../../../lib/os2/gcc  -o
../../../../../bin/os2/gcc/harbourm.dll @__dyn__.tmp __dyn__.def -lsocket

and harbourm.dll build fine, with different size than harbour.dll
Same warning for protmode in harbourm.dll

So the reason for emxomfld failure is due to length of long list of
object files in section:

--------------------------
..\..\..\..\..\..\source\common\obj\os2\gcc\expropt1.obj

[rest of .obj files list]

..\..\..\..\..\..\source\vm\vmmt\obj\os2\gcc\vm.obj
--------------------------

This harbourm.dll list is longer than harbour.dll list by a value of:
  "..\" length multiplied by number of total object files plus
  "vmmt\" length multiplied by number of vmmt object files

  3*593 + 5*21 = 1779 + 105 = 1884 byes

so seem to arrive truncated to emxomfld.exe and cause "invalid argument"
error
Moving up one dir resolve need of at least 1779 bytes plus others for -L 
and -o switchs


Viktor, Maurilio, Przemek: 	
  any idea to overcome this limit ?

Below are help for emxomfld.exe
Perhaps you can identify quickly some switch to use

Note: emxomfld.exe is the same for gcc335 and gcc4xx. It is contained in
gcc335 and not in gcc4xx
In fact, gcc335 is a pre-requisite for gcc4xx due last use some tools of
former

David Macias


emxomfld 0.6.3 (Bird Build 2007-06-11 22:22)
Copyright (c) 1992-1996 by Eberhard Mattes
Copyright (c) 2003 by InnoTek Systemberatung GmbH
Copyright (c) 2003-2006 by Knut St. Osmundsen

Usage: emxomfld -o <file> [-l <lib>] [-L <libdir>] [-T <base>] [-igtsS]
            [-Zexe] [-Zdll] [-Zsym] [-Zstack <size>] [-Zmap[=<map_file>]]
            [-Z[no-]autoconv] [-Zdll-search] [-O <option>] [-static]
            [-non_shared] [-Bstatic] [-dn] [call_shared] [-Bshared]
            [-dy] <file>...

Options:
  -Zno-autoconv / -Zautoconv:
     Turns off/on the automatic conversion of a.out libs and objs.
     default: -Zautoconv
  -Bstatic, -non_shared, -dn, -static:
     Link with static libraries.
     The search order is then changed to: lib<name>_s.lib, <name>_s.lib,
     lib<name>.lib, <name>.lib
  -Bshared, -call_shared, -dy:
     Link with shared libraries. This is default.
     The search order is then changed to: lib<name>_dll.lib, <name>_dll.lib,
     lib<name>.lib, <name>.lib, <name>.dll, lib<name>_s.lib, <name>_s.lib.
  -Zdll-search:
     Enables dlls as valid libraries from shared linking. (default disabled)
  -Zsym:    Invoke mapsym.cmd on the mapfile to produce a .sym file.
Requires -Zmap.

Environment variables:
   EMXOMFLD_TYPE:
     The type of linker we're using. Values: WLINK, VAC365, VAC308, LINK386.
         WLINK    wlink.exe from Open Watcom v1.5 or later.
         VAC365   ilink.exe from IBM C and C++ Compilers for OS/2 v3.6
or later.
         VAC308   ilink.exe from Visual Age for C++ v3.08.
         LINK386  link386 form OS/2 install or DDK.
   EMXOMFLD_LINKER:
     Name of the linker to use and optionally extra parameters. Spaces
in the
     linker name or path is not supported. Quotes are not supported either.
The default values for these two variables are VAC365 and ilink.exe.
   EMXOMFLD_RC_TYPE:
     The type of resource compiler we're using. Values: RC,WRC.
         RC       rc.exe as shipped with OS/2 or found in the Toolkit
         WRC      wrc.exe from Open Watcom v1.6 or later.
   EMXOMFLD_RC:
     Name of the resource compiler to use and optionally extra parameters.
     Spaces or quotes in the name or path are not supported.
The default values for these two variables are RC and rc.exe.




From harbour.01 at syenar.hu  Mon Sep 28 05:39:55 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 28 05:40:03 2009
Subject: [Harbour] Type assignment discards qualifiers from pointer target
	type
In-Reply-To: <9257026e0909280230r68fecfa9s814b454f4eb3b07d@mail.gmail.com>
References: <9257026e0909280230r68fecfa9s814b454f4eb3b07d@mail.gmail.com>
Message-ID: <9261E354-4903-40C8-AC9F-97D0594D9175@syenar.hu>

The warning is easy to silence, the bigger problem
is that this function will modify HVM string directly,
which may cause HVM corruption.

It needs to be rewritten to work on a copy of the
string.

We have the exact same kind of problems waiting to be
fixed in examples/gfspell.

Brgds,
Viktor

On 2009 Sep 28, at 11:30, Lorenzo Fiorini wrote:

> This is an old C function but it's used in a 3rd party lib so I can't
> use HB's standard one.
> When I build it with 2.0.0beta3 gcc warnings. How can I fix it?
>
> #include <extend.h>
>
> #ifdef __HARBOUR__
> HB_FUNC( BIT )
> #else
> CLIPPER bit( void )
> #endif
> {
>   char            *ptr;
>   unsigned char   mask;
>   unsigned int    loc,
>                   offset = _parni( 2 ) - 1,
>                   res    = 0;
>
>   loc = offset / 8;
>   if ( loc < _parclen( 1 ) )
>   {
>      ptr = _parc( 1 ) + loc;  <---- warning here
>      loc = offset % 8;
>      res = *ptr << loc & 0x80;
>
>      if ( PCOUNT > 2 )
>      {
>         mask = (unsigned char ) 0x80 >> loc;
>         if ( _parl( 3 ) )
>            *ptr = *ptr | mask;
>         else
>            *ptr = *ptr & ~mask;
>      }
>   }
>   _retl( res );
> }
>
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Sep 28 06:01:55 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 28 06:02:04 2009
Subject: [Harbour] Harbour under OS/2 - eCS 12604 -12621
In-Reply-To: <4AC0844A.2020502@mail.udg.mx>
References: <4AC0844A.2020502@mail.udg.mx>
Message-ID: <F70DABE6-6145-4A78-A89A-DDDDDF21FEED@syenar.hu>

> Note warning for protmode in harbour.dll

Probably caused by PROTMODE keyword.

> Reading info I used "p" parameter for make.exe which describe a long
> list of values/operations used in current make proccess. It show a lot
> of redefinitions
> The intention was to limit list of libraries included in order to find
> the "possible" object file causing error
> I never found where to change this library list, and specially for mt
>
> Never found LIBS definition for this expression:
>  DLIBS := $(foreach lib,$(LIBS) $(SYSLIBS),-l$(lib))
> and suppressing it nothing change

LIBS is optional, if it's not used for os2/gcc, it's not a problem.
Although we may explicitly empty it from global.mk.

> Note: using $(DYNNAME) does not include .dll extension, so I suppose  
> it
> is added by default and not due Harbour definitions
>   @$(ECHO) LIBRARY $(DYNNAME) INITINSTANCE TERMINSTANCE >> __dyn__.def

DYNNAME is the raw name, without any platform specific
decorations. Anyhow $(DYN_EXT) contains the extension,
so it can be added if needed, in this case though I think
it's denoting the internal lib name, so the extension
may not be necessary.

> Question: why source\dynlib\Makefile include line
>   include $(TOP)$(ROOT)config/dir.mk
> and not are included in source\dynlib\mt\Makefile ?

dir.mk is only needed if we want to pass control to
subdirs, in ST we pass it to MT, but MT is the last
one, so there is no dir.mk, nor DIRS variable.

> Spliting section for harbourm.dll have exactly the same form. The only
> differences are:
> - "..\..\..\..\..\..\" in place of "..\..\..\..\..\"
> - "vm\vmmt\" in place of "vm\"

Yes, this can explain extra space needed for mt dll,
it's one level deeper, so each obj is addressed using
an extra ../, that is a few Ks extra in cmdline.

> I tried to build harbourm.dll using a directory in same level of  
> dynlib,
> for example "source\mydyn", suppresing "source\dynlib\mt", using
> Makefile for "source\dynlib\mt" moving up one dir, and adjusting
> Makefile for "source"
> Results was an harbourm.dll with exactly the same length as  
> harbour.dll
>   :-) (?)

You also need to change DYNDIRLIST (copy it from source/dynlib/mt/ 
Makefile)

> So I changed test:
> - Move source\dynlib\mt\obj\os2\gcc\__dyn__.tmp, .def files one dir  
> up,
> to source\dynlib\mt\obj\os2\__dyn__.tmp, .def files
> - Change in __dyn__.tmp "..\..\..\..\..\..\" with "..\..\..\..\..\"
> - Execute gcc for harbourm.dll using a dir up:
> gcc -Zomf -shared -L../../../../../lib/os2/gcc  -o
> ../../../../../bin/os2/gcc/harbourm.dll @__dyn__.tmp __dyn__.def - 
> lsocket
>
> and harbourm.dll build fine, with different size than harbour.dll
> Same warning for protmode in harbourm.dll
>
> So the reason for emxomfld failure is due to length of long list of
> object files in section:
>
> --------------------------
> ..\..\..\..\..\..\source\common\obj\os2\gcc\expropt1.obj
>
> [rest of .obj files list]
>
> ..\..\..\..\..\..\source\vm\vmmt\obj\os2\gcc\vm.obj
> --------------------------
>
> This harbourm.dll list is longer than harbour.dll list by a value of:
> "..\" length multiplied by number of total object files plus
> "vmmt\" length multiplied by number of vmmt object files
>
> 3*593 + 5*21 = 1779 + 105 = 1884 byes
>
> so seem to arrive truncated to emxomfld.exe and cause "invalid  
> argument"
> error
> Moving up one dir resolve need of at least 1779 bytes plus others  
> for -L and -o switchs

Yes.

> Viktor, Maurilio, Przemek: 	
> any idea to overcome this limit ?

I hope so, otherwise we'll have to restructure dir layout for
the sake of OS/2 to an uglier one. I'd like to avoid doing this.

Brgds,
Viktor

From lorenzo.fiorini at gmail.com  Mon Sep 28 06:14:13 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 28 06:14:19 2009
Subject: [Harbour] Type assignment discards qualifiers from pointer target
	type
In-Reply-To: <9261E354-4903-40C8-AC9F-97D0594D9175@syenar.hu>
References: <9257026e0909280230r68fecfa9s814b454f4eb3b07d@mail.gmail.com>
	<9261E354-4903-40C8-AC9F-97D0594D9175@syenar.hu>
Message-ID: <9257026e0909280314h1ce3e88s597a9ebe2a17e586@mail.gmail.com>

On Mon, Sep 28, 2009 at 11:39 AM, Viktor Szak?ts <harbour.01@syenar.hu> wrote:

> The warning is easy to silence, the bigger problem
> is that this function will modify HVM string directly,
> which may cause HVM corruption.

Yes this is why I'd like to replace it.

I've tried to replace it with a prg func but the original works on
strings while hb_bit* work on numbers and I'm not sure about the
correct conversion to use.

best regards,
Lorenzo
From druzus at acn.waw.pl  Mon Sep 28 06:15:25 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 28 06:15:32 2009
Subject: [Harbour] Type assignment discards qualifiers from pointer
	target type
In-Reply-To: <9257026e0909280230r68fecfa9s814b454f4eb3b07d@mail.gmail.com>
References: <9257026e0909280230r68fecfa9s814b454f4eb3b07d@mail.gmail.com>
Message-ID: <20090928101525.GA12816@uran.home.aster.pl>

On Mon, 28 Sep 2009, Lorenzo Fiorini wrote:
> This is an old C function but it's used in a 3rd party lib so I can't
> use HB's standard one.
> When I build it with 2.0.0beta3 gcc warnings. How can I fix it?

It has to be rewritten.
This function is buggy. It's illegal in Clipper and in [x]Harbour to
modify string buffer returned by [hb]_parc() function.
Recent modifications helps to locate such buggy code generating
warnings during compilation.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Mon Sep 28 06:25:40 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 28 06:25:46 2009
Subject: [Harbour] Type assignment discards qualifiers from pointer target
	type
In-Reply-To: <20090928101525.GA12816@uran.home.aster.pl>
References: <9257026e0909280230r68fecfa9s814b454f4eb3b07d@mail.gmail.com>
	<20090928101525.GA12816@uran.home.aster.pl>
Message-ID: <9257026e0909280325x7ba9974egc2a22c16eab9082f@mail.gmail.com>

On Mon, Sep 28, 2009 at 12:15 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> It has to be rewritten.
> This function is buggy. It's illegal in Clipper and in [x]Harbour to
> modify string buffer returned by [hb]_parc() function.
> Recent modifications helps to locate such buggy code generating
> warnings during compilation.

Thanks, I'm trying to replace it with a simple prg like:

function bit( cString, nPos, lSet )

   local lRetCode
   local nString := bin2l( cString ) // <-- or bin2l, bin2w

   if lSet == nil
      lRetCode := hb_bittest( nString, nPos )
   elseif lSet
      cString := hb_bitset( nString, nPos )
   else
      cString := hb_bitreset( nString, nPos )
   endif

   return lRetCode

but I can't get the same results.

best regards,
Lorenzo
From druzus at acn.waw.pl  Mon Sep 28 06:43:48 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 28 06:43:54 2009
Subject: [Harbour] Type assignment discards qualifiers from pointer
	target type
In-Reply-To: <9257026e0909280314h1ce3e88s597a9ebe2a17e586@mail.gmail.com>
References: <9257026e0909280230r68fecfa9s814b454f4eb3b07d@mail.gmail.com>
	<9261E354-4903-40C8-AC9F-97D0594D9175@syenar.hu>
	<9257026e0909280314h1ce3e88s597a9ebe2a17e586@mail.gmail.com>
Message-ID: <20090928104348.GA20000@uran.home.aster.pl>

On Mon, 28 Sep 2009, Lorenzo Fiorini wrote:
> Yes this is why I'd like to replace it.
> I've tried to replace it with a prg func but the original works on
> strings while hb_bit* work on numbers and I'm not sure about the
> correct conversion to use.

Not tested, just written:

   func BIT( cValue, nOffset, lSet )
      local lResult, nChar

      nChar := strpeek( cValue, nOffset / 8 )
      lResult = hb_bitTest( nChar, nOffset % 8 )
      if valtype( lSet ) == "L" .and. lSet != lResult
         strpoke( @cValue, nOffset / 8, ;
                  iif( lSet, hb_bitSet( nChar, nOffset % 8 ), ;
                             hb_bitReset( nChar, nOffset % 8 ) ) )
      endif
   return lResult

Please only remember that unlike the C code you send this function
respects @ operator and will not change original string if cValue
is not passed by reference.

best regards,
Przemek
From fmancera at viaopen.com  Mon Sep 28 06:54:41 2009
From: fmancera at viaopen.com (fmancera@viaopen.com)
Date: Mon Sep 28 06:54:48 2009
Subject: [Harbour] ViaNemo: more news
Message-ID: <ff964557777346aac05a96f48b18bf27@viaopen.com>

Hello Everybody,

I'm post a new article on http://blog.viaopen.com 
with list of most frequent questions we received about ViaNEMO.

Best Regards,

Fernando Mancera
www.viaopen.com

From lorenzo.fiorini at gmail.com  Mon Sep 28 06:56:25 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 28 06:56:31 2009
Subject: [Harbour] Type assignment discards qualifiers from pointer target
	type
In-Reply-To: <20090928104348.GA20000@uran.home.aster.pl>
References: <9257026e0909280230r68fecfa9s814b454f4eb3b07d@mail.gmail.com>
	<9261E354-4903-40C8-AC9F-97D0594D9175@syenar.hu>
	<9257026e0909280314h1ce3e88s597a9ebe2a17e586@mail.gmail.com>
	<20090928104348.GA20000@uran.home.aster.pl>
Message-ID: <9257026e0909280356m6b44d89amc1b5159aca798fb9@mail.gmail.com>

On Mon, Sep 28, 2009 at 12:43 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Not tested, just written:
>
> ? func BIT( cValue, nOffset, lSet )
> ? ? ?local lResult, nChar
> ...

Many thanks.

I'm not sure my test is correct but I'm still not getting the same results.

best regards,
Lorenzo

Here is my test code:

proc main

local cTest := chr(63)+chr(255)+chr(63)+chr(255)

? bit(cTest,1),bitnew(cTest,1)
? bit(cTest,4),bitnew(cTest,4)
? bit(cTest,16),bitnew(cTest,16)
? bit(cTest,32),bitnew(cTest,32)

return

function bitnew( cValue, nOffset, lSet )
     local lResult, nChar

     nChar := strpeek( cValue, nOffset / 8 )
     lResult = hb_bitTest( nChar, nOffset % 8 )
     if valtype( lSet ) == "L" .and. lSet != lResult
        strpoke( @cValue, nOffset / 8, ;
                 iif( lSet, hb_bitSet( nChar, nOffset % 8 ), ;
                            hb_bitReset( nChar, nOffset % 8 ) ) )
     endif
  return lResult

#pragma BEGINDUMP

#include <extend.h>

#ifdef __HARBOUR__
HB_FUNC( BIT )
#else
CLIPPER bit( void )
#endif
{
   char            *ptr;
   unsigned char   mask;
   unsigned int    loc,
                   offset = _parni( 2 ) - 1,
                   res    = 0;

   loc = offset / 8;
   if ( loc < _parclen( 1 ) )
   {
      ptr = _parc( 1 ) + loc;
      loc = offset % 8;
      res = *ptr << loc & 0x80;

      if ( PCOUNT > 2 )
      {
         mask = (unsigned char ) 0x80 >> loc;
         if ( _parl( 3 ) )
            *ptr = *ptr | mask;
         else
            *ptr = *ptr & ~mask;
      }
   }
   _retl( res );
}

#pragma ENDDUMP
From druzus at users.sourceforge.net  Mon Sep 28 06:57:54 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Mon Sep 28 06:58:00 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12623] trunk/harbour
Message-ID: <E1MsDvW-0000Vo-Lb@74yxhf1.ch3.sourceforge.com>

Revision: 12623
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12623&view=rev
Author:   druzus
Date:     2009-09-28 10:57:53 +0000 (Mon, 28 Sep 2009)

Log Message:
-----------
2009-09-28 12:57 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbnetio/netio.h
  * harbour/contrib/hbnetio/netiocli.c
  * harbour/contrib/hbnetio/netiosrv.c
    * added dummy sync messages which can be used as non waiting confirmation
    % added separate messages for UNLOCK actions which are confirmed by
      dummy message
    * updated version number in login string to force client and server
      synchronization with new protocol (both have to be recompiled with
      current SVN code)

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/hbnetio/netio.h
    trunk/harbour/contrib/hbnetio/netiocli.c
    trunk/harbour/contrib/hbnetio/netiosrv.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From druzus at acn.waw.pl  Mon Sep 28 07:13:20 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Sep 28 07:13:26 2009
Subject: [Harbour] Type assignment discards qualifiers from pointer
	target type
In-Reply-To: <9257026e0909280356m6b44d89amc1b5159aca798fb9@mail.gmail.com>
References: <9257026e0909280230r68fecfa9s814b454f4eb3b07d@mail.gmail.com>
	<9261E354-4903-40C8-AC9F-97D0594D9175@syenar.hu>
	<9257026e0909280314h1ce3e88s597a9ebe2a17e586@mail.gmail.com>
	<20090928104348.GA20000@uran.home.aster.pl>
	<9257026e0909280356m6b44d89amc1b5159aca798fb9@mail.gmail.com>
Message-ID: <20090928111320.GA20756@uran.home.aster.pl>

On Mon, 28 Sep 2009, Lorenzo Fiorini wrote:
> Many thanks.
> I'm not sure my test is correct but I'm still not getting the same results.

Modify the offset range (-1) and revert bits (most significant has offset 0):

   function bitnew( cValue, nOffset, lSet )
      local lResult, nChar, nOff, nBit

      nOff := ( nOffset - 1 ) / 8 + 1
      nBit := 7 - ( nOffset - 1 ) % 8
      nChar := strpeek( cValue, nOff )
      lResult = hb_bitTest( nChar, nBit )
      if valtype( lSet ) == "L" .and. lSet != lResult
         strpoke( @cValue, nOff, iif( lSet, hb_bitSet( nChar, nBit ), ;
                                          hb_bitReset( nChar, nBit ) ) )
      endif
   return lResult

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Mon Sep 28 07:38:21 2009
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Sep 28 07:38:27 2009
Subject: [Harbour] Type assignment discards qualifiers from pointer target
	type
In-Reply-To: <20090928111320.GA20756@uran.home.aster.pl>
References: <9257026e0909280230r68fecfa9s814b454f4eb3b07d@mail.gmail.com>
	<9261E354-4903-40C8-AC9F-97D0594D9175@syenar.hu>
	<9257026e0909280314h1ce3e88s597a9ebe2a17e586@mail.gmail.com>
	<20090928104348.GA20000@uran.home.aster.pl>
	<9257026e0909280356m6b44d89amc1b5159aca798fb9@mail.gmail.com>
	<20090928111320.GA20756@uran.home.aster.pl>
Message-ID: <9257026e0909280438h31b0bef0h7a84c69822310545@mail.gmail.com>

On Mon, Sep 28, 2009 at 1:13 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Modify the offset range (-1) and revert bits (most significant has offset 0):

Many thanks it works like a charm but doing tests I've found that the
original bit() SEGFAULTs:

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0xb7895b70 (LWP 10105)]
0x080489f5 in HB_FUN_BIT ()
Current language:  auto; currently asm
(gdb) bt
#0  0x080489f5 in HB_FUN_BIT ()
#1  0xb7ce4cda in hb_vmProc () from /opt/harbour/lib/libharbour.so
#2  0xb7cbc4eb in hb_vmExecute () from /opt/harbour/lib/libharbour.so
#3  0x08048a5a in HB_FUN_MAIN ()
#4  0xb7ce4cda in hb_vmProc () from /opt/harbour/lib/libharbour.so
#5  0xb7ce62d4 in hb_vmInit () from /opt/harbour/lib/libharbour.so
#6  0xb7ce84de in main () from /opt/harbour/lib/libharbour.so
#7  0xb7a0c775 in __libc_start_main () from /lib/tls/i686/cmov/libc.so.6
#8  0x080488a1 in _start () at ../sysdeps/i386/elf/start.S:119

simply bit() is used in functions I don't call.

This is a demonstration that the latest api changes really help to
improve code quality.

best regards,
Lorenzo
From rportnoff at spendmap.com  Mon Sep 28 09:13:55 2009
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Mon Sep 28 09:14:04 2009
Subject: [Harbour] List moderator
In-Reply-To: <9257026e0909280438h31b0bef0h7a84c69822310545@mail.gmail.co
 m>
References: <9257026e0909280230r68fecfa9s814b454f4eb3b07d@mail.gmail.com>
	<9261E354-4903-40C8-AC9F-97D0594D9175@syenar.hu>
	<9257026e0909280314h1ce3e88s597a9ebe2a17e586@mail.gmail.com>
	<20090928104348.GA20000@uran.home.aster.pl>
	<9257026e0909280356m6b44d89amc1b5159aca798fb9@mail.gmail.com>
	<20090928111320.GA20756@uran.home.aster.pl>
	<9257026e0909280438h31b0bef0h7a84c69822310545@mail.gmail.com>
Message-ID: <B0091903516@ms1.3peaks.com>

Hi all,

Who is in charge of the mailing list?

Thanks,
Randy.


From dbtopas at dbtopas.lt  Mon Sep 28 09:32:07 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Sep 28 09:32:48 2009
Subject: [Harbour] 2 ask on SQL Server in one time.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950288DA94@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950288DA94@PINK.zycie.pzu>
Message-ID: <4AC0BAD7.4080005@dbtopas.lt>

Hi,


> DBUSEAREA( .T., "SQLMIX", "select * from klient", "KLIENT")
> DBUSEAREA( .T., "SQLMIX", "select p.*, nazwa from PRODUKT p, klient k where p.id_klient = k.id_klient and jed = '1234' and system = 1", "KLI_PROD")
> 
> And have error in second query :
> 
> oErr:severity_____         2
> oErr:osCode_______         0
> oErr:subsystem()__SDDODBC
> oErr:subCode______      1903
> oErr:description__B??d podczas otwarcia zbioru // Error while opening file
> oErr:filename_____
> oErr:operation____select p.*, nazwa from PRODUKT p, klient k where p.id_klient = k.id_klient and jed = '1234' and system = 1
> oErr:genCode______        21
> oErr:args_________U
> 
> 
> When I open it as one ask, all is ok..
> What is the error and what should I change?


RDDSQL error code are defined in hbrddsql.h:
#define ESQLDD_INVALIDQUERY        1903

The only place this eror is generated in SDDODBC is:
    if ( ! SQL_SUCCEEDED( SQLExecDirect( hStmt, lpStr, strlen( 
pArea->szQuery ) ) ) )
    {
       HB_TCHAR_FREE( lpStr );
       SQLFreeStmt( hStmt, SQL_DROP );
       hb_errRT_ODBCDD( EG_OPEN, ESQLDD_INVALIDQUERY, NULL, 
pArea->szQuery, 0 );
       return HB_FAILURE;
    }

Sounds like syntax error. Try to execute this query using some ODBC 
utility, or try to reduce query to find out a supported syntax.


Regards,
Mindaugas
From dbtopas at dbtopas.lt  Mon Sep 28 09:35:26 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Sep 28 09:36:07 2009
Subject: [Harbour] MEMIO - Some Clarifications
In-Reply-To: <25639924.post@talk.nabble.com>
References: <25639924.post@talk.nabble.com>
Message-ID: <4AC0BB9E.5090606@dbtopas.lt>

Hello,


> Hello Mindagaus, All

My name is Mindaugas.


> I have finished porting some parts of my appln's
> report-generation of routines to take advantage of 
> MEMIO instead of disk files and have found the following.
> 
> One of reports creates a table, say,  rpa80025.dbf and 
> associated index, ttt14071.z01. The numbers part is pulled
> with hb_random to ensure that file name is unique in every 
> run, regardless of thread or process creating it.
> 
> The tables are created properly, and at the end, dbDrop()
> reports true for both .dbf and .z01.
> 
> I run the same report various times and got these facts
> 
> RUN#      TimeToFinish       Mem Usage
>                (excluding         ( Task
>                   display )           Manager )
> 
> 1              906
> 2              859
> 3              875
> 4              906
> 5              937
> 6              953
> 7              985
> 8             1016 
> 9             1032
> 10           1062
> 11           1078
> 12           1109
> 13           1141
> 14           1156
> 15           1203
> 16           1203
> 17           1250           14548
> 18           1266           14568
> 19           1282           14568
> 20           1312           14576
> 21           1329           14588
> 22           1375           14604
> 23           1390           14608
> 24           1422           14612
> 
> Is it a normal behavior ?
> Or should I put more rigorous checks
> to measure the performance ?
> Or something is still required in MemIO implementation ?
> Or may be I am missing something completely ?


Can you try to make self contained sample by changing real report to 
some simple DBAPPEND(), FIELDPUT()? I can not reproduce such bahaviour.


Regards,
Mindaugas
From M.Horodyski at pzuzycie.com.pl  Mon Sep 28 10:41:58 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Mon Sep 28 10:42:09 2009
Subject: [Harbour] 2 ask on SQL Server in one time.
In-Reply-To: <4AC0BAD7.4080005@dbtopas.lt>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950288DA94@PINK.zycie.pzu>
	<4AC0BAD7.4080005@dbtopas.lt>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950288DB56@PINK.zycie.pzu>

>-----Original Message-----
>From: Mindaugas Kavaliauskas [mailto:dbtopas@dbtopas.lt] 
>Sent: Monday, September 28, 2009 3:32 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] 2 ask on SQL Server in one time.
>
>Hi,
>
>
>> DBUSEAREA( .T., "SQLMIX", "select * from klient", "KLIENT") 
>DBUSEAREA( 
>> .T., "SQLMIX", "select p.*, nazwa from PRODUKT p, klient k where 
>> p.id_klient = k.id_klient and jed = '1234' and system = 1", 
>> "KLI_PROD")
 
...

>Sounds like syntax error. Try to execute this query using some 
>ODBC utility, or try to reduce query to find out a supported syntax.

Probably no. This is a serious problem with SQLMIX.
For example work :

dbUseArea( .....
Browse()
dbCloseAll()

But when I use my_old_tBrowse_function() in place of Browse(), in dbCloseAll() have I GPF, and in hb_out.log I see  :

----------------------------
Application Internal Error - C:\NOWEPROD\EXE\homar.exe
Terminated at: 2009.09.28 11:16:57
Nienaprawialny b??d nr 6005: Exception error: 

    Exception Code:C0000005
    Exception Address:00466D23
    EAX:6E15000C  EBX:00000000  ECX:00000000  EDX:5EA8000C
    ESI:015FBE6C  EDI:00000000  EBP:015FBE6C
    CS:EIP:001B:00466D23  SS:ESP:0023:0022F600
    DS:0023  ES:0023  FS:003B  GS:0000
    Flags:00010246
    CS:EIP: F6 04 18 02 74 EB 8B 04 9A 43 89 04 24 E8 5B F4
    SS:ESP: 015FBE6C 00000000 7E3A396F 015FBE6C 00000002 015FBE6C 00000002 0046233D 015FBE6C 01367314 00000001 0040C2B3 0022F704 0082FACC 0082FACC 0067083E

    C stack:
    EIP:     EBP:       Frame: OldEBP, RetAddr, Params...


Modules:
0x00400000 0x00440000 C:\NOWEPROD\EXE\homar.exe
0x7C900000 0x000B4000 C:\WINDOWS\system32\ntdll.dll
0x7C800000 0x000FD000 C:\WINDOWS\system32\kernel32.dll
0x77DC0000 0x000AC000 C:\WINDOWS\system32\ADVAPI32.DLL
0x77E70000 0x00092000 C:\WINDOWS\system32\RPCRT4.dll
0x77FE0000 0x00011000 C:\WINDOWS\system32\Secur32.dll
0x5D520000 0x0009A000 C:\WINDOWS\system32\COMCTL32.DLL
0x77F10000 0x00049000 C:\WINDOWS\system32\GDI32.dll
0x7E360000 0x00091000 C:\WINDOWS\system32\USER32.dll
0x77C00000 0x00058000 C:\WINDOWS\system32\msvcrt.dll
0x74600000 0x0003D000 C:\WINDOWS\system32\ODBC32.dll
0x76380000 0x00049000 C:\WINDOWS\system32\comdlg32.dll
0x7C9C0000 0x0081E000 C:\WINDOWS\system32\SHELL32.dll
0x77F60000 0x00076000 C:\WINDOWS\system32\SHLWAPI.dll
0x774D0000 0x0013D000 C:\WINDOWS\system32\OLE32.dll
0x77110000 0x0008B000 C:\WINDOWS\system32\OLEAUT32.DLL
0x72F90000 0x00026000 C:\WINDOWS\system32\WINSPOOL.DRV
0x76360000 0x0001D000 C:\WINDOWS\system32\IMM32.DLL
0x773C0000 0x00103000 C:\WINDOWS\WinSxS\x86_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.2600.5512_x-ww_35d4ce83\comctl32.dll
0x1F840000 0x00018000 C:\WINDOWS\system32\odbcint.dll
0x76350000 0x00005000 C:\WINDOWS\system32\msimg32.dll
0x5B1D0000 0x00038000 C:\WINDOWS\system32\uxtheme.dll
0x10000000 0x00006000 C:\DOCUME~1\MHorodys\USTAWI~1\Temp\IadHide5.dll
0x746D0000 0x0004C000 C:\WINDOWS\system32\MSCTF.dll
0x75180000 0x0002E000 C:\WINDOWS\system32\msctfime.ime
0x014C0000 0x00008000 C:\Program Files\Gadu-Gadu\ggwhook.dll
0x4E4A0000 0x0006C000 C:\WINDOWS\System32\SQLSRV32.dll
0x6FF40000 0x00055000 C:\WINDOWS\System32\NETAPI32.dll
0x5C620000 0x0002D000 C:\WINDOWS\System32\SQLUNIRL.dll
0x77BF0000 0x00008000 C:\WINDOWS\system32\VERSION.dll
0x75910000 0x00008000 C:\WINDOWS\system32\NDDEAPI.DLL
0x1FA30000 0x00017000 C:\WINDOWS\System32\sqlsrv32.rll
0x5E3E0000 0x0001B000 C:\WINDOWS\system32\odbccp32.dll
0x6DA30000 0x0001B000 C:\WINDOWS\system32\DBNETLIB.DLL
0x71A70000 0x0000A000 C:\WINDOWS\system32\WSOCK32.dll
0x71A50000 0x00017000 C:\WINDOWS\system32\WS2_32.dll
0x71A40000 0x00008000 C:\WINDOWS\system32\WS2HELP.dll
0x71F30000 0x00004000 C:\WINDOWS\system32\security.dll
0x77C60000 0x00025000 C:\WINDOWS\system32\msv1_0.dll
0x76770000 0x0000C000 C:\WINDOWS\system32\cryptdll.dll
0x76D50000 0x00019000 C:\WINDOWS\system32\iphlpapi.dll
0x76780000 0x00013000 C:\WINDOWS\system32\ntdsapi.dll
0x76F10000 0x00027000 C:\WINDOWS\system32\DNSAPI.dll
0x76F50000 0x0002D000 C:\WINDOWS\system32\WLDAP32.dll
0x77A70000 0x00096000 C:\WINDOWS\system32\crypt32.dll
0x77B10000 0x00012000 C:\WINDOWS\system32\MSASN1.dll
0x55600000 0x0001D000 C:\Program Files\Microsoft Firewall Client\wspwsp.dll
0x719F0000 0x00040000 C:\WINDOWS\system32\mswsock.dll
0x66780000 0x00058000 C:\WINDOWS\system32\hnetcfg.dll
0x71A30000 0x00008000 C:\WINDOWS\System32\wshtcpip.dll
0x76FA0000 0x00008000 C:\WINDOWS\System32\winrnr.dll
0x66210000 0x00009000 C:\WINDOWS\system32\netware\NWWS2NDS.DLL
0x50D50000 0x00047000 C:\WINDOWS\system32\NETWIN32.DLL
0x50D00000 0x00015000 C:\WINDOWS\system32\CLNWIN32.DLL
0x50DF0000 0x00020000 C:\WINDOWS\system32\LOCWIN32.DLL
0x50DB0000 0x0002B000 C:\WINDOWS\system32\NCPWIN32.dll
0x66220000 0x0000C000 C:\WINDOWS\system32\netware\NWWS2SLP.DLL
0x1C000000 0x00007000 C:\WINDOWS\system32\NWSRVLOC.dll
0x16080000 0x00025000 C:\Program Files\Bonjour\mdnsNSP.dll
0x76FB0000 0x00006000 C:\WINDOWS\system32\rasadhlp.dll
0x767D0000 0x00028000 C:\WINDOWS\system32\schannel.dll
0x769A0000 0x000B5000 C:\WINDOWS\system32\USERENV.dll
0x68000000 0x00036000 C:\WINDOWS\system32\rsaenh.dll
0x68100000 0x00026000 C:\WINDOWS\system32\dssenh.dll

Called from DBCLOSEALL(0)
Called from (b)KOMPILATOR(0) in KOMPILAT.PRG
Called from BOSS(0) in BOSS.PRG
Called from (b)KOMPILATOR(0) in KOMPILAT.PRG
Called from BOSS(0) in BOSS.PRG
Called from KODKLAW(0) in KODKLAW.PRG
Called from OPCJA(0) in OPCJA.PRG
Called from (b)KOMPILATOR(0) in KOMPILAT.PRG
Called from BOSS(0) in BOSS.PRG
Called from MAIN(244) in homar.prg
------------------------------------------------------------------------

And what on screen can you see in atachment Schowek01.jpg.
Another example :
Work :

dbUseArea( ......, "Alias_Open")
Browse()
dbCloseAll()

And in syntax :

dbUseArea( ....., "Alias_Open")
Alias_Open->( Browse()) // here app hangs :(
dbCloseAll()


This happens only in sqlmix.
It's hard to describe, and probably Developers tests with real sql server are needed.

Regards,
Marek Horodyski
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Schowek01.jpg
Type: image/jpeg
Size: 28021 bytes
Desc: Schowek01.jpg
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20090928/a62868f9/Schowek01-0001.jpg
From dbtopas at dbtopas.lt  Mon Sep 28 11:27:40 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Sep 28 11:28:26 2009
Subject: [Harbour] 2 ask on SQL Server in one time.
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C950288DB56@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950288DA94@PINK.zycie.pzu>	<4AC0BAD7.4080005@dbtopas.lt>
	<FFAFD6EA63A3FC4784FBDA52BE7A7C950288DB56@PINK.zycie.pzu>
Message-ID: <4AC0D5EC.4080205@dbtopas.lt>

Hi,


>> Sounds like syntax error. Try to execute this query using some 
>> ODBC utility, or try to reduce query to find out a supported syntax.
> 
> Probably no. This is a serious problem with SQLMIX.
> For example work :
> 
> dbUseArea( .....
> Browse()
> dbCloseAll()
> 
> But when I use my_old_tBrowse_function() in place of Browse(), in dbCloseAll() have I GPF, and in hb_out.log I see  :
> ...
> dbUseArea( ....., "Alias_Open")
> Alias_Open->( Browse()) // here app hangs :(
> dbCloseAll()
> 
> 
> This happens only in sqlmix.
> It's hard to describe, and probably Developers tests with real sql server are needed.

It would be very helpful if you can write a self contained sample.


Regards,
Mindaugas
From bruno.luciani at gmail.com  Mon Sep 28 12:27:29 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Mon Sep 28 12:27:37 2009
Subject: [Harbour] hbvpdf.lib with image
In-Reply-To: <25491964.post@talk.nabble.com>
References: <52384.4162.qm@web32801.mail.mud.yahoo.com>
	<25491964.post@talk.nabble.com>
Message-ID: <133778360909280927j3da54afcyf5a9bb76af9df425@mail.gmail.com>

Pritpal , I am trying to help Jose Miguel with this problem

aparently is not a big beal , only an error appears when he try ti print
and inexistent image , could you orient us where is teh code to review this
problem ?

Anyway how you and other programmers create PDF files  ?  is there any other
library
better than HBVPDF ?

Thanks in advance

Bruno Luciani


2009/9/17 Pritpal Bedi <bedipritpal@hotmail.com>

>
> Hi Jose
>
>
> Jose Miguel-3 wrote:
> >
> > The library hbvpdf.lib
> > When printing an image and the file does not exist, does not close the
> pdf
> > and gives error
> > What are the sources that supports and what types of pages?
> >
>
> hbvpdf is a port of Viktor K.s procedural code into
> class framework and so far no new functions are added
> into it till its inception. And more likely not many people
> are using it.
>
> You need to make experiments yourself and in case
> you find something interesting let this know.
>
> Regards
> Pritpal Bedi
>
> --
> View this message in context:
> http://www.nabble.com/hbvpdf.lib-with-image-tp25491291p25491964.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090928/8d19899d/attachment.html
From dbtopas at dbtopas.lt  Mon Sep 28 12:52:36 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Sep 28 12:53:16 2009
Subject: [Harbour] hbvpdf.lib with image
In-Reply-To: <133778360909280927j3da54afcyf5a9bb76af9df425@mail.gmail.com>
References: <52384.4162.qm@web32801.mail.mud.yahoo.com>	<25491964.post@talk.nabble.com>
	<133778360909280927j3da54afcyf5a9bb76af9df425@mail.gmail.com>
Message-ID: <4AC0E9D4.5000803@dbtopas.lt>

Hi,


> Anyway how you and other programmers create PDF files  ?  is there any 
> other library
> better than HBVPDF ?

I use cairo.


Regards,
Mindaugas
From bruno.luciani at gmail.com  Mon Sep 28 12:58:13 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Mon Sep 28 12:58:21 2009
Subject: [Harbour] hbvpdf.lib with image
In-Reply-To: <4AC0E9D4.5000803@dbtopas.lt>
References: <52384.4162.qm@web32801.mail.mud.yahoo.com>
	<25491964.post@talk.nabble.com>
	<133778360909280927j3da54afcyf5a9bb76af9df425@mail.gmail.com>
	<4AC0E9D4.5000803@dbtopas.lt>
Message-ID: <133778360909280958y658500ds323647473c6c4f96@mail.gmail.com>

Mindaugas LibHPDF is manteined  actually ?

Bruno

2009/9/28 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>

> Hi,
>
>
>  Anyway how you and other programmers create PDF files  ?  is there any
>> other library
>> better than HBVPDF ?
>>
>
> I use cairo.
>
>
> Regards,
> Mindaugas
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090928/743da8e9/attachment.html
From dbtopas at dbtopas.lt  Mon Sep 28 13:03:11 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Sep 28 13:03:51 2009
Subject: [Harbour] hbvpdf.lib with image
In-Reply-To: <133778360909280958y658500ds323647473c6c4f96@mail.gmail.com>
References: <52384.4162.qm@web32801.mail.mud.yahoo.com>	<25491964.post@talk.nabble.com>	<133778360909280927j3da54afcyf5a9bb76af9df425@mail.gmail.com>	<4AC0E9D4.5000803@dbtopas.lt>
	<133778360909280958y658500ds323647473c6c4f96@mail.gmail.com>
Message-ID: <4AC0EC4F.80906@dbtopas.lt>

Bruno Luciani wrote:
> Mindaugas LibHPDF is manteined  actually ?


Sorry, I do not know anything about libhpdf. Just answered a question 
"how you and other programmers create PDF files".

Regards,
Mindaugas
From bruno.luciani at gmail.com  Mon Sep 28 13:09:17 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Mon Sep 28 13:09:24 2009
Subject: [Harbour] hbvpdf.lib with image
In-Reply-To: <4AC0EC4F.80906@dbtopas.lt>
References: <52384.4162.qm@web32801.mail.mud.yahoo.com>
	<25491964.post@talk.nabble.com>
	<133778360909280927j3da54afcyf5a9bb76af9df425@mail.gmail.com>
	<4AC0E9D4.5000803@dbtopas.lt>
	<133778360909280958y658500ds323647473c6c4f96@mail.gmail.com>
	<4AC0EC4F.80906@dbtopas.lt>
Message-ID: <133778360909281009p60b0edfsd7b768ce617b4a72@mail.gmail.com>

ok

thanks Mindaugas

Bruno

2009/9/28 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>

> Bruno Luciani wrote:
>
>> Mindaugas LibHPDF is manteined  actually ?
>>
>
>
> Sorry, I do not know anything about libhpdf. Just answered a question "how
> you and other programmers create PDF files".
>
>
> Regards,
> Mindaugas
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090928/2544cc70/attachment.html
From harbour.01 at syenar.hu  Mon Sep 28 13:09:28 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 28 13:09:40 2009
Subject: [Harbour] hbvpdf.lib with image
In-Reply-To: <133778360909280927j3da54afcyf5a9bb76af9df425@mail.gmail.com>
References: <52384.4162.qm@web32801.mail.mud.yahoo.com>
	<25491964.post@talk.nabble.com>
	<133778360909280927j3da54afcyf5a9bb76af9df425@mail.gmail.com>
Message-ID: <D2446C74-32D1-4758-AFC2-E7D8AAD2ADD6@syenar.hu>

> Pritpal , I am trying to help Jose Miguel with this problem
>
> aparently is not a big beal , only an error appears when he try ti  
> print
> and inexistent image , could you orient us where is teh code to  
> review this problem ?
>
> Anyway how you and other programmers create PDF files  ?  is there  
> any other library
> better than HBVPDF ?

hbhpdf

Brgds,
Viktor

From harbour.01 at syenar.hu  Mon Sep 28 13:10:05 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 28 13:10:20 2009
Subject: [Harbour] hbvpdf.lib with image
In-Reply-To: <133778360909280958y658500ds323647473c6c4f96@mail.gmail.com>
References: <52384.4162.qm@web32801.mail.mud.yahoo.com>
	<25491964.post@talk.nabble.com>
	<133778360909280927j3da54afcyf5a9bb76af9df425@mail.gmail.com>
	<4AC0E9D4.5000803@dbtopas.lt>
	<133778360909280958y658500ds323647473c6c4f96@mail.gmail.com>
Message-ID: <C9CA73B5-3EE3-4717-808D-2BB5CFC8DC21@syenar.hu>

Yes.

Brgds,
Viktor

On 2009 Sep 28, at 18:58, Bruno Luciani wrote:

> Mindaugas LibHPDF is manteined  actually ?
>
> Bruno
>
> 2009/9/28 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>
> Hi,
>
>
>
> Anyway how you and other programmers create PDF files  ?  is there  
> any other library
> better than HBVPDF ?
>
> I use cairo.
>
>
> Regards,
> Mindaugas
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From bruno.luciani at gmail.com  Mon Sep 28 13:12:34 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Mon Sep 28 13:12:42 2009
Subject: [Harbour] hbvpdf.lib with image
In-Reply-To: <D2446C74-32D1-4758-AFC2-E7D8AAD2ADD6@syenar.hu>
References: <52384.4162.qm@web32801.mail.mud.yahoo.com>
	<25491964.post@talk.nabble.com>
	<133778360909280927j3da54afcyf5a9bb76af9df425@mail.gmail.com>
	<D2446C74-32D1-4758-AFC2-E7D8AAD2ADD6@syenar.hu>
Message-ID: <133778360909281012j224d67dfkaab3bada560ad3b1@mail.gmail.com>

Thanks Viktor

Bruno

2009/9/28 Viktor Szak?ts <harbour.01@syenar.hu>

> Pritpal , I am trying to help Jose Miguel with this problem
>>
>> aparently is not a big beal , only an error appears when he try ti print
>> and inexistent image , could you orient us where is teh code to review
>> this problem ?
>>
>> Anyway how you and other programmers create PDF files  ?  is there any
>> other library
>> better than HBVPDF ?
>>
>
> hbhpdf
>
> Brgds,
> Viktor
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090928/d934d1c5/attachment-0001.html
From harbour.01 at syenar.hu  Mon Sep 28 13:14:32 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 28 13:14:49 2009
Subject: [Harbour] ViaNemo: more news
In-Reply-To: <ff964557777346aac05a96f48b18bf27@viaopen.com>
References: <ff964557777346aac05a96f48b18bf27@viaopen.com>
Message-ID: <1AE608DB-4433-4FA3-9AE4-AADDD4143290@syenar.hu>

Hi Fernando,

Just a minor comment, which striked me:

SET SINTAX TO ...
should be
SET SYNTAX TO ...

Brgds,
Viktor

On 2009 Sep 28, at 12:54, <fmancera@viaopen.com>  
<fmancera@viaopen.com> wrote:

> Hello Everybody,
>
> I'm post a new article on http://blog.viaopen.com
> with list of most frequent questions we received about ViaNEMO.
>
> Best Regards,
>
> Fernando Mancera
> www.viaopen.com
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From harbour.01 at syenar.hu  Mon Sep 28 14:05:13 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 28 14:05:33 2009
Subject: [Harbour] FWH 6.12 free of cost, legal download
In-Reply-To: <609353e70909270024s1a037681j6089e2c62f5ea76e@mail.gmail.com>
References: <609353e70909270024s1a037681j6089e2c62f5ea76e@mail.gmail.com>
Message-ID: <A886B422-3D50-436E-9B80-D47CED182DBE@syenar.hu>

Nice offer. But, unfortunately the installer has a Windows 16-bit
stub, which makes it impossible to install it on 64-bit Windows
systems.

[ I wanted to check whether this FWH works with current Harbour. ]

Brgds,
Viktor

On 2009 Sep 27, at 09:24, Massimo Belgrano wrote:

> I notice follow news
>
> 2009/9/26 Antonio Linares <antonio.fivetech@gmail.com>:
> - Nascondi testo citato -
> > http://www.fivetechsoft.com/english/downloads.html
> >
> > --
> > Antonio Linares
> > www.fivetechsoft.com
> >
>
> -- 
> Massimo Belgrano
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From bedipritpal at hotmail.com  Mon Sep 28 14:14:54 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Sep 28 14:15:00 2009
Subject: [Harbour] MEMIO - Some Clarifications
In-Reply-To: <4AC0BB9E.5090606@dbtopas.lt>
References: <25639924.post@talk.nabble.com> <4AC0BB9E.5090606@dbtopas.lt>
Message-ID: <25650259.post@talk.nabble.com>


Hi


Mindaugas Kavaliauskas wrote:
> 
> My name is Mindaugas.
> 

Again it slipped my memory. Sorry...



> Can you try to make self contained sample by changing real report to 
> some simple DBAPPEND(), FIELDPUT()? I can not reproduce such bahaviour.
> 

This is exactly I could not do. The production appln code 
is really very complex. And I cannot reproduce in stand-alone way.
I do not deny that problem could be in my code, though it works fine
without any memory increases with disk-files, but still I will investigate
further on this issue and will let you know.

Instead of memory increase, I am really concerned with why
execution time with execution of next report increases.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/MEMIO---Some-Clarifications-tp25639924p25650259.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From fmancera at viaopen.com  Mon Sep 28 14:24:32 2009
From: fmancera at viaopen.com (fmancera@viaopen.com)
Date: Mon Sep 28 14:24:37 2009
Subject: [Harbour] ViaNemo: more news
In-Reply-To: <1AE608DB-4433-4FA3-9AE4-AADDD4143290@syenar.hu>
References: <ff964557777346aac05a96f48b18bf27@viaopen.com>
	<1AE608DB-4433-4FA3-9AE4-AADDD4143290@syenar.hu>
Message-ID: <edb58e940d7ef903affc57a44ef63316@viaopen.com>

Hello Viktor,

> Just a minor comment, which striked me:
> 
> SET SINTAX TO ...
> should be
> SET SYNTAX TO ...

Oops!! My fingers are too fast ;-)

Fixed.

Thank You very much.

Best Regards,

Fernando Mancera

> 
> Brgds,
> Viktor
> 
> On 2009 Sep 28, at 12:54, <fmancera@viaopen.com>  
> <fmancera@viaopen.com> wrote:
> 
>> Hello Everybody,
>>
>> I'm post a new article on http://blog.viaopen.com
>> with list of most frequent questions we received about ViaNEMO.
>>
>> Best Regards,
>>
>> Fernando Mancera
>> www.viaopen.com
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
From bruno.luciani at gmail.com  Mon Sep 28 14:27:35 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Mon Sep 28 14:27:42 2009
Subject: [Harbour] hbvpdf.lib with image
In-Reply-To: <C9CA73B5-3EE3-4717-808D-2BB5CFC8DC21@syenar.hu>
References: <52384.4162.qm@web32801.mail.mud.yahoo.com>
	<25491964.post@talk.nabble.com>
	<133778360909280927j3da54afcyf5a9bb76af9df425@mail.gmail.com>
	<4AC0E9D4.5000803@dbtopas.lt>
	<133778360909280958y658500ds323647473c6c4f96@mail.gmail.com>
	<C9CA73B5-3EE3-4717-808D-2BB5CFC8DC21@syenar.hu>
Message-ID: <133778360909281127s25d840a9k70a025fddbb92ca8@mail.gmail.com>

Viktor , why if lib Haru is preferred  you are updating and making samples
of HBVPDF and not of libhpdf ?

Bruno

2009/9/28 Viktor Szak?ts <harbour.01@syenar.hu>

> Yes.
>
> Brgds,
> Viktor
>
>
> On 2009 Sep 28, at 18:58, Bruno Luciani wrote:
>
>  Mindaugas LibHPDF is manteined  actually ?
>>
>> Bruno
>>
>> 2009/9/28 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>
>> Hi,
>>
>>
>>
>> Anyway how you and other programmers create PDF files  ?  is there any
>> other library
>> better than HBVPDF ?
>>
>> I use cairo.
>>
>>
>> Regards,
>> Mindaugas
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090928/17b6be1a/attachment.html
From harbour.01 at syenar.hu  Mon Sep 28 14:38:02 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 28 14:38:24 2009
Subject: [Harbour] hbvpdf.lib with image
In-Reply-To: <133778360909281127s25d840a9k70a025fddbb92ca8@mail.gmail.com>
References: <52384.4162.qm@web32801.mail.mud.yahoo.com>
	<25491964.post@talk.nabble.com>
	<133778360909280927j3da54afcyf5a9bb76af9df425@mail.gmail.com>
	<4AC0E9D4.5000803@dbtopas.lt>
	<133778360909280958y658500ds323647473c6c4f96@mail.gmail.com>
	<C9CA73B5-3EE3-4717-808D-2BB5CFC8DC21@syenar.hu>
	<133778360909281127s25d840a9k70a025fddbb92ca8@mail.gmail.com>
Message-ID: <41243C42-F8C5-4E76-8C9A-FA1387AFE65F@syenar.hu>

> Viktor , why if lib Haru is preferred  you are updating and making  
> samples
> of HBVPDF and not of libhpdf ?

I'm not sure what you mean. I've made some updates to hbvpdf years
ago to make it build, but I don't remember creating any samples for
it, or updating it.

For hbhpdf however, I've added several fixes while I started using
it, plus it has a working sample in its tests dir.

I just guess you mean the move to 'examples' dir. In Harbour
contrib is closer to core than examples, pls keep this in mind.
IOW, we're concentrating on core and contribs.

hbvpdf will probably be deleted from repo sooner or later.

Brgds,
Viktor

>
> Bruno
>
> 2009/9/28 Viktor Szak?ts <harbour.01@syenar.hu>
> Yes.
>
> Brgds,
> Viktor
>
>
> On 2009 Sep 28, at 18:58, Bruno Luciani wrote:
>
> Mindaugas LibHPDF is manteined  actually ?
>
> Bruno
>
> 2009/9/28 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>
> Hi,
>
>
>
> Anyway how you and other programmers create PDF files  ?  is there  
> any other library
> better than HBVPDF ?
>
> I use cairo.
>
>
> Regards,
> Mindaugas
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From M.Horodyski at pzuzycie.com.pl  Mon Sep 28 14:40:38 2009
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Mon Sep 28 14:40:46 2009
Subject: [Harbour] 2 ask on SQL Server in one time.
In-Reply-To: <4AC0D5EC.4080205@dbtopas.lt>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C950288DA94@PINK.zycie.pzu>	<4AC0BAD7.4080005@dbtopas.lt><FFAFD6EA63A3FC4784FBDA52BE7A7C950288DB56@PINK.zycie.pzu>
	<4AC0D5EC.4080205@dbtopas.lt>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C950288DB5C@PINK.zycie.pzu>

>-----Original Message-----
>From: Mindaugas Kavaliauskas [mailto:dbtopas@dbtopas.lt] 
>Sent: Monday, September 28, 2009 5:28 PM
>To: Harbour Project Main Developer List.
>Subject: Re: [Harbour] 2 ask on SQL Server in one time.

...

>> This happens only in sqlmix.
>> It's hard to describe, and probably Developers tests with 
>real sql server are needed.
>
>It would be very helpful if you can write a self contained sample.

I guess I draw erroneous conclusions.
App hangs when from ask is one record with structure after HB_VALTOEXP(
DBSTRUCT()) :

{{"ID_KLIENT",         "I",  10, 0},
 {"NIP",               "C",  20, 0},
 {"NIP_FMT",           "C",  20, 0},
 {"REGON",             "C",  20, 0},
 {"NAZWA",             "C", 300, 0},
 {"NAZWA_SUFFIKS",     "C",  20, 0},	// null
 {"ULICA",             "C", 200, 0},
 {"NR_DOM",            "C",  50, 0},
 {"NR_LOK",            "C",  50, 0},		// null
 {"MIASTO",            "C", 200, 0},
 {"KOD_POCZT",         "C",  20, 0},
 {"TELEFON",           "C",  50, 0},	// null
 {"FAX",               "C",  50, 0},		// null
 {"UWAGI",             "C", 500, 0},		// null
 {"WSK_REJESTRU",      "C",   3, 0},
 {"ID_SYSTEM_ZRODLOWY","I",  10, 0},// null
 {"ID_GRUPA",          "I",  10, 0},		// null
 {"ID_PKD",            "I",  10, 0},		// null
 {"ID_ZEWNETRZNY",     "I",  10, 0},
 {"TELEFON2",          "C",  70, 0},	// null
 {"WOJEWODZTWO",       "C", 100, 0},	// null
 {"POWIAT",            "C", 100, 0},	// null
 {"ZATRUDNIENIE",      "C",  50, 0},	// null
 {"EMAIL",             "C",  80, 0},		// null
 {"WWW",               "C", 255, 0},	// null
 {"BRANZA",            "C",  90, 0},		// null
 {"CENTRALA_ODDZIAL",  "C",   1, 0},	// null
 {"ZRODLO_PROSPEKTU",  "C",   1, 0},	// null
 {"BSA",               "I",   3, 0},
 {"HURT",              "I",   3, 0},		// null
 {"STAT_PROSPEKTU",    "I",  10, 0}}	// null

And in some fields are null contents.
Pprobably, because code :
  for n := 1 to fcount()
    ? field( n), fieldget( n)
  end
Work very nice ( NIL is displayed on NULL contents).
Select from this table with another "where" I can correctly display with
Browse(), even as they are null value..

But the phenomenon gpf with pair tbrowse()/dbCloseAll() is in my
einwironment reproducible.
Now I focus on how to get around it, because I do not know how to make a
small example (self contained), without a sql server.

Regards,
Marek Horodyski
From bruno.luciani at gmail.com  Mon Sep 28 14:48:30 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Mon Sep 28 14:48:37 2009
Subject: [Harbour] hbvpdf.lib with image
In-Reply-To: <41243C42-F8C5-4E76-8C9A-FA1387AFE65F@syenar.hu>
References: <52384.4162.qm@web32801.mail.mud.yahoo.com>
	<25491964.post@talk.nabble.com>
	<133778360909280927j3da54afcyf5a9bb76af9df425@mail.gmail.com>
	<4AC0E9D4.5000803@dbtopas.lt>
	<133778360909280958y658500ds323647473c6c4f96@mail.gmail.com>
	<C9CA73B5-3EE3-4717-808D-2BB5CFC8DC21@syenar.hu>
	<133778360909281127s25d840a9k70a025fddbb92ca8@mail.gmail.com>
	<41243C42-F8C5-4E76-8C9A-FA1387AFE65F@syenar.hu>
Message-ID: <133778360909281148s25aa0a26u4058576ccde6c4f7@mail.gmail.com>

ok exactly I see this movement

I don't find the HBhpdf samples , the test dir not exist in my SVN copy

Thanks Viktor

2009/9/28 Viktor Szak?ts <harbour.01@syenar.hu>

> Viktor , why if lib Haru is preferred  you are updating and making samples
>> of HBVPDF and not of libhpdf ?
>>
>
> I'm not sure what you mean. I've made some updates to hbvpdf years
> ago to make it build, but I don't remember creating any samples for
> it, or updating it.
>
> For hbhpdf however, I've added several fixes while I started using
> it, plus it has a working sample in its tests dir.
>
> I just guess you mean the move to 'examples' dir. In Harbour
> contrib is closer to core than examples, pls keep this in mind.
> IOW, we're concentrating on core and contribs.
>
> hbvpdf will probably be deleted from repo sooner or later.
>
> Brgds,
> Viktor
>
>
>
>> Bruno
>>
>> 2009/9/28 Viktor Szak?ts <harbour.01@syenar.hu>
>> Yes.
>>
>> Brgds,
>> Viktor
>>
>>
>> On 2009 Sep 28, at 18:58, Bruno Luciani wrote:
>>
>> Mindaugas LibHPDF is manteined  actually ?
>>
>> Bruno
>>
>> 2009/9/28 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>
>> Hi,
>>
>>
>>
>> Anyway how you and other programmers create PDF files  ?  is there any
>> other library
>> better than HBVPDF ?
>>
>> I use cairo.
>>
>>
>> Regards,
>> Mindaugas
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090928/085e8915/attachment-0001.html
From harbour.01 at syenar.hu  Mon Sep 28 14:56:00 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 28 14:56:23 2009
Subject: [Harbour] hbvpdf.lib with image
In-Reply-To: <133778360909281148s25aa0a26u4058576ccde6c4f7@mail.gmail.com>
References: <52384.4162.qm@web32801.mail.mud.yahoo.com>
	<25491964.post@talk.nabble.com>
	<133778360909280927j3da54afcyf5a9bb76af9df425@mail.gmail.com>
	<4AC0E9D4.5000803@dbtopas.lt>
	<133778360909280958y658500ds323647473c6c4f96@mail.gmail.com>
	<C9CA73B5-3EE3-4717-808D-2BB5CFC8DC21@syenar.hu>
	<133778360909281127s25d840a9k70a025fddbb92ca8@mail.gmail.com>
	<41243C42-F8C5-4E76-8C9A-FA1387AFE65F@syenar.hu>
	<133778360909281148s25aa0a26u4058576ccde6c4f7@mail.gmail.com>
Message-ID: <8EB7FC1C-1DC1-4CFC-B90B-5916BBD6D282@syenar.hu>

> ok exactly I see this movement
>
> I don't find the HBhpdf samples , the test dir not exist in my SVN  
> copy

Your SVN copy is incomplete then.

Brgds,
Viktor

From bruno.luciani at gmail.com  Mon Sep 28 15:18:30 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Mon Sep 28 15:18:37 2009
Subject: [Harbour] hbvpdf.lib with image
In-Reply-To: <8EB7FC1C-1DC1-4CFC-B90B-5916BBD6D282@syenar.hu>
References: <52384.4162.qm@web32801.mail.mud.yahoo.com>
	<25491964.post@talk.nabble.com>
	<133778360909280927j3da54afcyf5a9bb76af9df425@mail.gmail.com>
	<4AC0E9D4.5000803@dbtopas.lt>
	<133778360909280958y658500ds323647473c6c4f96@mail.gmail.com>
	<C9CA73B5-3EE3-4717-808D-2BB5CFC8DC21@syenar.hu>
	<133778360909281127s25d840a9k70a025fddbb92ca8@mail.gmail.com>
	<41243C42-F8C5-4E76-8C9A-FA1387AFE65F@syenar.hu>
	<133778360909281148s25aa0a26u4058576ccde6c4f7@mail.gmail.com>
	<8EB7FC1C-1DC1-4CFC-B90B-5916BBD6D282@syenar.hu>
Message-ID: <133778360909281218y35e211a7y6ba46d9286161c7@mail.gmail.com>

I just update it and /harbour/external/libhpdf  is ok but /tests not exist

Bruno

2009/9/28 Viktor Szak?ts <harbour.01@syenar.hu>

> ok exactly I see this movement
>>
>> I don't find the HBhpdf samples , the test dir not exist in my SVN copy
>>
>
> Your SVN copy is incomplete then.
>
> Brgds,
> Viktor
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090928/4268788f/attachment.html
From harbour.01 at syenar.hu  Mon Sep 28 15:47:11 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 28 15:47:19 2009
Subject: [Harbour] hbvpdf.lib with image
In-Reply-To: <133778360909281218y35e211a7y6ba46d9286161c7@mail.gmail.com>
References: <52384.4162.qm@web32801.mail.mud.yahoo.com>
	<25491964.post@talk.nabble.com>
	<133778360909280927j3da54afcyf5a9bb76af9df425@mail.gmail.com>
	<4AC0E9D4.5000803@dbtopas.lt>
	<133778360909280958y658500ds323647473c6c4f96@mail.gmail.com>
	<C9CA73B5-3EE3-4717-808D-2BB5CFC8DC21@syenar.hu>
	<133778360909281127s25d840a9k70a025fddbb92ca8@mail.gmail.com>
	<41243C42-F8C5-4E76-8C9A-FA1387AFE65F@syenar.hu>
	<133778360909281148s25aa0a26u4058576ccde6c4f7@mail.gmail.com>
	<8EB7FC1C-1DC1-4CFC-B90B-5916BBD6D282@syenar.hu>
	<133778360909281218y35e211a7y6ba46d9286161c7@mail.gmail.com>
Message-ID: <BB3A1584-5276-41C1-84BC-86F7715A54A4@syenar.hu>

> I just update it and /harbour/external/libhpdf  is ok but /tests not  
> exist

There is no such dir in Harbour.

/contrib/hbhpdf/tests is the dir for hbhpdf contrib tests.

Brgds,
Viktor

From bruno.luciani at gmail.com  Mon Sep 28 16:38:15 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Mon Sep 28 16:38:22 2009
Subject: [Harbour] hbvpdf.lib with image
In-Reply-To: <BB3A1584-5276-41C1-84BC-86F7715A54A4@syenar.hu>
References: <52384.4162.qm@web32801.mail.mud.yahoo.com>
	<4AC0E9D4.5000803@dbtopas.lt>
	<133778360909280958y658500ds323647473c6c4f96@mail.gmail.com>
	<C9CA73B5-3EE3-4717-808D-2BB5CFC8DC21@syenar.hu>
	<133778360909281127s25d840a9k70a025fddbb92ca8@mail.gmail.com>
	<41243C42-F8C5-4E76-8C9A-FA1387AFE65F@syenar.hu>
	<133778360909281148s25aa0a26u4058576ccde6c4f7@mail.gmail.com>
	<8EB7FC1C-1DC1-4CFC-B90B-5916BBD6D282@syenar.hu>
	<133778360909281218y35e211a7y6ba46d9286161c7@mail.gmail.com>
	<BB3A1584-5276-41C1-84BC-86F7715A54A4@syenar.hu>
Message-ID: <133778360909281338s283bef7ci58c274774c0b130@mail.gmail.com>

ok  I check that

may be an old directory

Bruno

2009/9/28 Viktor Szak?ts <harbour.01@syenar.hu>

> I just update it and /harbour/external/libhpdf  is ok but /tests not exist
>>
>
> There is no such dir in Harbour.
>
> /contrib/hbhpdf/tests is the dir for hbhpdf contrib tests.
>
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090928/47dd2cd5/attachment.html
From harbour.01 at syenar.hu  Mon Sep 28 16:45:51 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Mon Sep 28 16:45:59 2009
Subject: [Harbour] hbvpdf.lib with image
In-Reply-To: <133778360909281338s283bef7ci58c274774c0b130@mail.gmail.com>
References: <52384.4162.qm@web32801.mail.mud.yahoo.com>
	<4AC0E9D4.5000803@dbtopas.lt>
	<133778360909280958y658500ds323647473c6c4f96@mail.gmail.com>
	<C9CA73B5-3EE3-4717-808D-2BB5CFC8DC21@syenar.hu>
	<133778360909281127s25d840a9k70a025fddbb92ca8@mail.gmail.com>
	<41243C42-F8C5-4E76-8C9A-FA1387AFE65F@syenar.hu>
	<133778360909281148s25aa0a26u4058576ccde6c4f7@mail.gmail.com>
	<8EB7FC1C-1DC1-4CFC-B90B-5916BBD6D282@syenar.hu>
	<133778360909281218y35e211a7y6ba46d9286161c7@mail.gmail.com>
	<BB3A1584-5276-41C1-84BC-86F7715A54A4@syenar.hu>
	<133778360909281338s283bef7ci58c274774c0b130@mail.gmail.com>
Message-ID: <3F7EA7A5-2558-42DA-8D0E-DD7409634C49@syenar.hu>

> ok  I check that
>
> may be an old directory

No sorry I was wrong, it does exist, although please look
into '/contribs' for contrib libs. 'external' holds different
things, but I'm extremely tired now to explain our dir layout
from scratch.

Usually a 'grep -R' or 'dir /s' command can give quick and
easy answers to these questions though. I encourage everyone
to use them.

Brgds,
Viktor

From vszakats at users.sourceforge.net  Mon Sep 28 16:52:29 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Mon Sep 28 16:52:35 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12624] trunk/harbour
Message-ID: <E1MsNCv-00031I-He@c3vjzd1.ch3.sourceforge.com>

Revision: 12624
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12624&view=rev
Author:   vszakats
Date:     2009-09-28 20:51:46 +0000 (Mon, 28 Sep 2009)

Log Message:
-----------
2009-09-28 22:27 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * INSTALL
    + Added new section: LINKS TO EXTERNAL TOOL, with actual (mostly complete) content.
    + Added OS/2 TCP/IP stack selection info.
    + Added OS/2 gcc 3.3.x build example.
    ! Minor typo.
    + Added linux hosted win/mingw64 target to compatibility matrix.

  * Makefile
    * Swapped shell postinst and .prg postinst invocation order.
    + Executing shell specific postinst command only if it exists.

  + bin/postinst.prg
  * bin/postinst.bat
  - bin/postinst.cmd
    + Started to migrate shell specific tasks to postinst .prg code.
    ; NOTE: Please review and test, this may cause regressions in 
            build process. I did't actually test most of these.

  * contrib/xhb/hbcompat.ch
    ! Minor typo in comment.
    * Updated copyright year.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/Makefile
    trunk/harbour/bin/postinst.bat
    trunk/harbour/bin/postinst.prg
    trunk/harbour/contrib/xhb/hbcompat.ch

Removed Paths:
-------------
    trunk/harbour/bin/postinst.cmd


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From bruno.luciani at gmail.com  Mon Sep 28 18:01:15 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Mon Sep 28 18:01:25 2009
Subject: [Harbour] hbvpdf.lib with image
In-Reply-To: <3F7EA7A5-2558-42DA-8D0E-DD7409634C49@syenar.hu>
References: <52384.4162.qm@web32801.mail.mud.yahoo.com>
	<C9CA73B5-3EE3-4717-808D-2BB5CFC8DC21@syenar.hu>
	<133778360909281127s25d840a9k70a025fddbb92ca8@mail.gmail.com>
	<41243C42-F8C5-4E76-8C9A-FA1387AFE65F@syenar.hu>
	<133778360909281148s25aa0a26u4058576ccde6c4f7@mail.gmail.com>
	<8EB7FC1C-1DC1-4CFC-B90B-5916BBD6D282@syenar.hu>
	<133778360909281218y35e211a7y6ba46d9286161c7@mail.gmail.com>
	<BB3A1584-5276-41C1-84BC-86F7715A54A4@syenar.hu>
	<133778360909281338s283bef7ci58c274774c0b130@mail.gmail.com>
	<3F7EA7A5-2558-42DA-8D0E-DD7409634C49@syenar.hu>
Message-ID: <133778360909281501u7c6da268h109cf20ffccae0db@mail.gmail.com>

thanks viktor

Bruno

2009/9/28 Viktor Szak?ts <harbour.01@syenar.hu>

> ok  I check that
>>
>> may be an old directory
>>
>
> No sorry I was wrong, it does exist, although please look
> into '/contribs' for contrib libs. 'external' holds different
> things, but I'm extremely tired now to explain our dir layout
> from scratch.
>
> Usually a 'grep -R' or 'dir /s' command can give quick and
> easy answers to these questions though. I encourage everyone
> to use them.
>
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090928/8b5a0965/attachment.html
From bruno.luciani at gmail.com  Mon Sep 28 18:13:07 2009
From: bruno.luciani at gmail.com (Bruno Luciani)
Date: Mon Sep 28 18:13:15 2009
Subject: [Harbour] hbvpdf.lib with image
In-Reply-To: <3F7EA7A5-2558-42DA-8D0E-DD7409634C49@syenar.hu>
References: <52384.4162.qm@web32801.mail.mud.yahoo.com>
	<C9CA73B5-3EE3-4717-808D-2BB5CFC8DC21@syenar.hu>
	<133778360909281127s25d840a9k70a025fddbb92ca8@mail.gmail.com>
	<41243C42-F8C5-4E76-8C9A-FA1387AFE65F@syenar.hu>
	<133778360909281148s25aa0a26u4058576ccde6c4f7@mail.gmail.com>
	<8EB7FC1C-1DC1-4CFC-B90B-5916BBD6D282@syenar.hu>
	<133778360909281218y35e211a7y6ba46d9286161c7@mail.gmail.com>
	<BB3A1584-5276-41C1-84BC-86F7715A54A4@syenar.hu>
	<133778360909281338s283bef7ci58c274774c0b130@mail.gmail.com>
	<3F7EA7A5-2558-42DA-8D0E-DD7409634C49@syenar.hu>
Message-ID: <133778360909281513m6b60e4d3yfe8697371a859734@mail.gmail.com>

I found it

thanks

Bruno

2009/9/28 Viktor Szak?ts <harbour.01@syenar.hu>

> ok  I check that
>>
>> may be an old directory
>>
>
> No sorry I was wrong, it does exist, although please look
> into '/contribs' for contrib libs. 'external' holds different
> things, but I'm extremely tired now to explain our dir layout
> from scratch.
>
> Usually a 'grep -R' or 'dir /s' command can give quick and
> easy answers to these questions though. I encourage everyone
> to use them.
>
>
> Brgds,
> Viktor
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090928/6cb4187b/attachment-0001.html
From wangshuming01 at gmail.com  Mon Sep 28 21:15:54 2009
From: wangshuming01 at gmail.com (wang shuming)
Date: Mon Sep 28 21:16:01 2009
Subject: [Harbour] FWH 6.12 free of cost, legal download
Message-ID: <c26b21640909281815m4df81345s9f54cb6a9ea3baf@mail.gmail.com>

The  FWH 612 version is Dec, 2006 version.
The new version  is FWH 909, Sep. 2009 version .

 Shuming Wang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090929/543a6a1c/attachment.html
From jerryfinuliar at operamail.com  Mon Sep 28 22:06:32 2009
From: jerryfinuliar at operamail.com (Jerry Finuliar)
Date: Mon Sep 28 22:06:41 2009
Subject: [Harbour] How to create a dll using hbmk2?
Message-ID: <20090929020632.5F5537BD6D@ws5-10.us4.outblaze.com>

Hi,

Im trying to create a dll but I got the ff:

D:\MyProjects\dbfdll>hbmk2 -hbdyn classdbf -L"%lib%"
hbmk2: Processing configuration: c:\harbour\bin\hbmk.cfg
Harbour 2.0.0beta3 (Rev. 12621)
Copyright (c) 1999-2009, http://www.harbour-project.org/
Compiling 'classdbf.prg'...
Lines 757, Functions/Procedures 2
Generating C source output to 'classdbf.c'... Done.
classdbf.c
Microsoft (R) Incremental Linker Version 8.00.50727.762
Copyright (C) Microsoft Corporation.  All rights reserved.

LINK : warning LNK4001: no object files specified; libraries used
LINK : warning LNK4068: /MACHINE not specified; defaulting to X86
LINK : error LNK2001: unresolved external symbol __DllMainCRTStartup@12
classdbf.dll : fatal error LNK1120: 1 unresolved externals
hbmk2: Error: Running dynamic lib link command. 1120
link.exe -dll -out:classdbf.dll -libpath:c:\harbour\lib\win\msvc -libpath:"C:\Pr
ogram Files\Microsoft Visual Studio 8\VC\lib;C:\Program Files\Microsoft Visual S
tudio 8\SDK\v2.0\Lib;C:\Program Files\Microsoft Visual Studio .NET 2003\SDK\v1.1
\Lib"" classdbf.obj hbextern.lib hbdebug.lib hbvm.lib hbrtl.lib hblang.lib hbcpa
ge.lib gtcgi.lib gtpca.lib gtstd.lib gtwin.lib gtwvt.lib gtgui.lib hbrdd.lib hbu
ddall.lib hbusrrdd.lib rddntx.lib rddcdx.lib rddnsx.lib rddfpt.lib hbrdd.lib hbh
sx.lib hbsix.lib hbmacro.lib hbcplr.lib hbpp.lib hbcommon.lib kernel32.lib user3
2.lib gdi32.lib advapi32.lib ws2_32.lib winspool.lib comctl32.lib comdlg32.lib s
hell32.lib uuid.lib ole32.lib oleaut32.lib mpr.lib winmm.lib mapi32.lib imm32.li
b msimg32.lib wininet.lib hbpcre.lib hbzlib.lib

Any hint?

TIA
Jerry

-- 
_______________________________________________
Surf the Web in a faster, safer and easier way:
Download Opera 9 at http://www.opera.com

Powered by Outblaze
From harbour.01 at syenar.hu  Tue Sep 29 02:07:30 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 29 02:07:39 2009
Subject: [Harbour] How to create a dll using hbmk2?
In-Reply-To: <20090929020632.5F5537BD6D@ws5-10.us4.outblaze.com>
References: <20090929020632.5F5537BD6D@ws5-10.us4.outblaze.com>
Message-ID: <0AC6AF65-BAEC-46D1-9B5C-9AA4CA591F7B@syenar.hu>

Hi Jerry,

> D:\MyProjects\dbfdll>hbmk2 -hbdyn classdbf -L"%lib%"

-L"%lib% seems wrong. Try with "-L%lib%" or -L%lib%.

Brgds,
Viktor

From jerryfinuliar at operamail.com  Tue Sep 29 02:57:31 2009
From: jerryfinuliar at operamail.com (Jerry Finuliar)
Date: Tue Sep 29 02:57:38 2009
Subject: [Harbour] How to create a dll using hbmk2?
Message-ID: <20090929065731.BACE2CBEA7@ws5-11.us4.outblaze.com>

Hi Viktor,

Still with the same error. Is the program below valid to compile to dll using 
MS C++ v2008?

TIA,
Jerry

--- 
#include "hbclass.ch"

CREATE CLASS Dbf
VAR oDbf 
METHOD Open()
ENDCLASS

METHOD Open
RETURN self
---




> ----- Original Message -----
> From: "Viktor Szak?ts" <harbour.01@syenar.hu>
> To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
> Subject: Re: [Harbour] How to create a dll using hbmk2?
> Date: Tue, 29 Sep 2009 08:07:30 +0200
> 
> 
> Hi Jerry,
> 
> > D:\MyProjects\dbfdll>hbmk2 -hbdyn classdbf -L"%lib%"
> 
> -L"%lib% seems wrong. Try with "-L%lib%" or -L%lib%.
> 
> Brgds,
> Viktor
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

>


-- 
_______________________________________________
Surf the Web in a faster, safer and easier way:
Download Opera 9 at http://www.opera.com

Powered by Outblaze
From harbour.01 at syenar.hu  Tue Sep 29 03:19:39 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 29 03:19:47 2009
Subject: [Harbour] How to create a dll using hbmk2?
In-Reply-To: <20090929065731.BACE2CBEA7@ws5-11.us4.outblaze.com>
References: <20090929065731.BACE2CBEA7@ws5-11.us4.outblaze.com>
Message-ID: <89166A1D-5357-4F78-81F6-5DCC7B170437@syenar.hu>

> Hi Viktor,
>
> Still with the same error. Is the program below valid to compile to  
> dll using
> MS C++ v2008?

Yes. Just verified. (at least it should link, I'm not .dll user,
so couldn't test it any further)

If I'm thinking about it even -L%LIB% is wrong. Since %LIB%
itself is a ';' delimited list and might also contain quotes.
Pass your lib dirs manually one by one. hbmk2 will only accept
one dir per -L switch. libpaths= will accept a list, but the
delimiter is a space.

Anyhow your switches cause a quote problem in generated command
line (just watch the output) and this is 99.999% caused by this
suspicious switch.

Brgds,
Viktor


>
> TIA,
> Jerry
>
> ---
> #include "hbclass.ch"
>
> CREATE CLASS Dbf
> VAR oDbf
> METHOD Open()
> ENDCLASS
>
> METHOD Open
> RETURN self
> ---
>
>
>
>
>> ----- Original Message -----
>> From: "Viktor Szak?ts" <harbour.01@syenar.hu>
>> To: "Harbour Project Main Developer List." <harbour@harbour-project.org 
>> >
>> Subject: Re: [Harbour] How to create a dll using hbmk2?
>> Date: Tue, 29 Sep 2009 08:07:30 +0200
>>
>>
>> Hi Jerry,
>>
>>> D:\MyProjects\dbfdll>hbmk2 -hbdyn classdbf -L"%lib%"
>>
>> -L"%lib% seems wrong. Try with "-L%lib%" or -L%lib%.
>>
>> Brgds,
>> Viktor
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>>
>
>
> -- 
> _______________________________________________
> Surf the Web in a faster, safer and easier way:
> Download Opera 9 at http://www.opera.com
>
> Powered by Outblaze
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From jerryfinuliar at operamail.com  Tue Sep 29 03:42:28 2009
From: jerryfinuliar at operamail.com (Jerry Finuliar)
Date: Tue Sep 29 03:42:34 2009
Subject: [Harbour] How to create a dll using hbmk2?
Message-ID: <20090929074228.ADC0ECBEA7@ws5-11.us4.outblaze.com>

Hi Viktor,

Thanks a lot. I go and try now.

Regards,
Jerry



> ----- Original Message -----
> From: "Viktor Szak?ts" <harbour.01@syenar.hu>
> To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
> Subject: Re: [Harbour] How to create a dll using hbmk2?
> Date: Tue, 29 Sep 2009 09:19:39 +0200
> 
> 
> > Hi Viktor,
> >
> > Still with the same error. Is the program below valid to compile 
> > to  dll using
> > MS C++ v2008?
> 
> Yes. Just verified. (at least it should link, I'm not .dll user,
> so couldn't test it any further)
> 
> If I'm thinking about it even -L%LIB% is wrong. Since %LIB%
> itself is a ';' delimited list and might also contain quotes.
> Pass your lib dirs manually one by one. hbmk2 will only accept
> one dir per -L switch. libpaths= will accept a list, but the
> delimiter is a space.
> 
> Anyhow your switches cause a quote problem in generated command
> line (just watch the output) and this is 99.999% caused by this
> suspicious switch.
> 
> Brgds,
> Viktor
> 
> 
> >
> > TIA,
> > Jerry
> >
> > ---
> > #include "hbclass.ch"
> >
> > CREATE CLASS Dbf
> > VAR oDbf
> > METHOD Open()
> > ENDCLASS
> >
> > METHOD Open
> > RETURN self
> > ---
> >
> >
> >
> >
> >> ----- Original Message -----
> >> From: "Viktor Szak?ts" <harbour.01@syenar.hu>
> >> To: "Harbour Project Main Developer List." <harbour@harbour-project.org >
> >> Subject: Re: [Harbour] How to create a dll using hbmk2?
> >> Date: Tue, 29 Sep 2009 08:07:30 +0200
> >>
> >>
> >> Hi Jerry,
> >>
> >>> D:\MyProjects\dbfdll>hbmk2 -hbdyn classdbf -L"%lib%"
> >>
> >> -L"%lib% seems wrong. Try with "-L%lib%" or -L%lib%.
> >>
> >> Brgds,
> >> Viktor
> >>
> >> _______________________________________________
> >> Harbour mailing list
> >> Harbour@harbour-project.org
> >> http://lists.harbour-project.org/mailman/listinfo/harbour
> >
> >>
> >
> >
> > -- _______________________________________________
> > Surf the Web in a faster, safer and easier way:
> > Download Opera 9 at http://www.opera.com
> >
> > Powered by Outblaze
> > _______________________________________________
> > Harbour mailing list
> > Harbour@harbour-project.org
> > http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

>


-- 
_______________________________________________
Surf the Web in a faster, safer and easier way:
Download Opera 9 at http://www.opera.com

Powered by Outblaze
From jerryfinuliar at operamail.com  Tue Sep 29 05:15:38 2009
From: jerryfinuliar at operamail.com (Jerry Finuliar)
Date: Tue Sep 29 05:15:46 2009
Subject: [Harbour] How to create a dll using hbmk2?
Message-ID: <20090929091538.E5BE1CBEA7@ws5-11.us4.outblaze.com>

Hi,

Yes, its now working. I just missed a compiler error/warning stating that I define a 
function in my class that already exists in Harbour. That made me think I needed
to add the lib path explicitly. Oh well thats what you get when not fully reading the
warning/messages by the compiler :)

By the way, Great job in HBMK2!

Regards,
Jerry


> ----- Original Message -----
> From: "Viktor Szak?ts" <harbour.01@syenar.hu>
> To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
> Subject: Re: [Harbour] How to create a dll using hbmk2?
> Date: Tue, 29 Sep 2009 09:19:39 +0200
> 
> 
> > Hi Viktor,
> >
> > Still with the same error. Is the program below valid to compile 
> > to  dll using
> > MS C++ v2008?
> 
> Yes. Just verified. (at least it should link, I'm not .dll user,
> so couldn't test it any further)
> 
> If I'm thinking about it even -L%LIB% is wrong. Since %LIB%
> itself is a ';' delimited list and might also contain quotes.
> Pass your lib dirs manually one by one. hbmk2 will only accept
> one dir per -L switch. libpaths= will accept a list, but the
> delimiter is a space.
> 
> Anyhow your switches cause a quote problem in generated command
> line (just watch the output) and this is 99.999% caused by this
> suspicious switch.
> 
> Brgds,
> Viktor
> 
> 
> >
> > TIA,
> > Jerry
> >
> > ---
> > #include "hbclass.ch"
> >
> > CREATE CLASS Dbf
> > VAR oDbf
> > METHOD Open()
> > ENDCLASS
> >
> > METHOD Open
> > RETURN self
> > ---
> >
> >
> >
> >
> >> ----- Original Message -----
> >> From: "Viktor Szak?ts" <harbour.01@syenar.hu>
> >> To: "Harbour Project Main Developer List." <harbour@harbour-project.org >
> >> Subject: Re: [Harbour] How to create a dll using hbmk2?
> >> Date: Tue, 29 Sep 2009 08:07:30 +0200
> >>
> >>
> >> Hi Jerry,
> >>
> >>> D:\MyProjects\dbfdll>hbmk2 -hbdyn classdbf -L"%lib%"
> >>
> >> -L"%lib% seems wrong. Try with "-L%lib%" or -L%lib%.
> >>
> >> Brgds,
> >> Viktor
> >>
> >> _______________________________________________
> >> Harbour mailing list
> >> Harbour@harbour-project.org
> >> http://lists.harbour-project.org/mailman/listinfo/harbour
> >
> >>
> >
> >
> > -- _______________________________________________
> > Surf the Web in a faster, safer and easier way:
> > Download Opera 9 at http://www.opera.com
> >
> > Powered by Outblaze
> > _______________________________________________
> > Harbour mailing list
> > Harbour@harbour-project.org
> > http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

>


-- 
_______________________________________________
Surf the Web in a faster, safer and easier way:
Download Opera 9 at http://www.opera.com

Powered by Outblaze
From elart at elart.it  Tue Sep 29 05:28:04 2009
From: elart at elart.it (elart)
Date: Tue Sep 29 05:28:11 2009
Subject: [Harbour] Re: SF.net SVN: harbour-project:[12624] trunk/harbour
Message-ID: <h54UKbBj.1254216484.9040620.marcobra@82.105.36.210>


Hi, all

Harbour from Svn: rev. 12624

make[3]: ?../../../../../lib/linux/gcc/libhbxbp.a? ? aggiornato.
! Installing xbp.ch on /usr/include
! Installing xbpdev.ch on /usr/include
! Installing appevent.ch on /usr/include
! Installing gra.ch on /usr/include
! Installing ../../lib/linux/gcc/libhbxbp.a on /usr/lib
./bin/linux/gcc/hbrun --hb:gtcgi ./bin/postinst.prg
./bin/postinst.prg(28) Error E0030  Syntax error "syntax error at ')'"
./bin/postinst.prg(29) Error E0030  Syntax error "syntax error at ')'"
./bin/postinst.prg(31) Error E0030  Syntax error "syntax error at ')'"
./bin/postinst.prg(32) Error E0030  Syntax error "syntax error at ')'"
./bin/postinst.prg(33) Error E0030  Syntax error "syntax error at ')'"
./bin/postinst.prg(34) Error E0030  Syntax error "syntax error at ')'"
./bin/postinst.prg(39) Error E0030  Syntax error "syntax error at ')'"
./bin/postinst.prg(40) Error E0030  Syntax error "syntax error at ')'"
./bin/postinst.prg(41) Error E0030  Syntax error "syntax error at ')'"
9 errors

No code generated.
make: *** [install] Errore 1

Thank you
From vszakats at users.sourceforge.net  Tue Sep 29 06:07:08 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue Sep 29 06:07:14 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12625] trunk/harbour
Message-ID: <E1MsZbw-0002zE-GR@3kljzd1.ch3.sourceforge.com>

Revision: 12625
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12625&view=rev
Author:   vszakats
Date:     2009-09-29 10:07:07 +0000 (Tue, 29 Sep 2009)

Log Message:
-----------
2009-09-29 12:06 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * bin/postinst.prg
    ! Fixed bad typos reported by Elart.

  * utils/hbmk2/hbmk2.hu_HU.po
    * Minor clarification in HU translation.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/postinst.prg
    trunk/harbour/utils/hbmk2/hbmk2.hu_HU.po


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From e.m.giordano at emagsoftware.it  Tue Sep 29 06:27:44 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Sep 29 06:27:51 2009
Subject: [Harbour] Error building latest SVN
Message-ID: <73E36A6F7CC3417899778921750EB2D4@emag>

./bin/win/bcc/hbrun.exe --hb:gtcgi ./bin/postinst.prg
! Making E:\HARBOUR_CVS\harbour\bin\hbmk.cfg...
Error BASE/1081  Argument error: + (Quit) 
Error BASE/1081  Argument error: +
Called from MAIN(50)  
Called from HB_HRBRUN(0)  
Called from _APPMAIN(0)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic
From vszakats at users.sourceforge.net  Tue Sep 29 06:44:18 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Tue Sep 29 06:44:28 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12626] trunk/harbour
Message-ID: <E1MsaBu-0007QT-3s@dn4whf1.ch3.sourceforge.com>

Revision: 12626
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12626&view=rev
Author:   vszakats
Date:     2009-09-29 10:44:14 +0000 (Tue, 29 Sep 2009)

Log Message:
-----------
2009-09-29 12:40 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
  * bin/postinst.prg
    ! Fixed another error.
    + Utilizing ugly hack to avoid using Harbour header files.
      Although it works, this solution is way ugly. I'm brand new hbrun 
      user so I don't know what is the proper solution for using 
      headers from .prgs code run directly.
      Maybe this should be compiled into hbrun and the internal 
      version used, or it needs full include header dir 
      autodetection logic built in.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/bin/postinst.prg


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From sscc at mweb.co.za  Tue Sep 29 06:56:14 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Sep 29 06:56:24 2009
Subject: [Harbour] ViaNemo: more news
In-Reply-To: <ff964557777346aac05a96f48b18bf27@viaopen.com>
References: <ff964557777346aac05a96f48b18bf27@viaopen.com>
Message-ID: <4AC1E7CE.10702@mweb.co.za>

fmancera@viaopen.com wrote:

> I'm post a new article on http://blog.viaopen.com 
> with list of most frequent questions we received about ViaNEMO.

Does Antonio Linares new free release of FiveWin have anything to do with you guys?

Regards
Alex
From e.m.giordano at emagsoftware.it  Tue Sep 29 07:03:42 2009
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Sep 29 07:03:48 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12626] trunk/harbour
References: <E1MsaBu-0007QT-3s@dn4whf1.ch3.sourceforge.com>
Message-ID: <F19252EB6F254F488950773A4E3FB906@emag>


-----Messaggio Originale----- 
Da: <vszakats@users.sourceforge.net>
A: <harbour@harbour-project.org>
Data invio: marted? 29 settembre 2009 12.44
Oggetto: [Harbour] SF.net SVN: harbour-project:[12626] trunk/harbour

Thank you, it's ok now.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at users.sourceforge.net  Tue Sep 29 08:12:05 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Tue Sep 29 08:12:12 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12627] trunk/harbour
Message-ID: <E1MsbYr-0007HX-Id@bj8yhf1.ch3.sourceforge.com>

Revision: 12627
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12627&view=rev
Author:   druzus
Date:     2009-09-29 12:12:04 +0000 (Tue, 29 Sep 2009)

Log Message:
-----------
2009-09-29 14:11 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/cdpapi.c
    * allow to use "UTF8" CP in HB_TRANSLATE() function

  * harbour/include/hbapicdp.h
  * harbour/source/rtl/itemseri.c
    + added support for optional CP translation in serialization and
      deserialization operations
    + added two new public C functions: hb_itemSerializeCP() and
      hb_itemDeserializeCP()
    + added new optional paramters <cCdpIN> and <cCdpOUT> to HB_SERIALIZE()
      function:
         HB_SERIALIZE( <xValue>, [<lNumSize>], [<cCdpIN>], [<cCdpOUT>] )
               -> <cSerialized>
      By default VM CP is used.
    + added new optional paramters <cCdpIN> and <cCdpOUT> to HB_DESERIALIZE()
      function:
         HB_DESERIALIZE( <cSerialized>, [<cCdpIN>], [<cCdpOUT>] ) -> <xValue>
      By default VM CP is used.

  * harbour/source/rdd/dbfntx/dbfntx1.c
  * harbour/source/rdd/dbfnsx/dbfnsx1.c
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
  * harbour/source/rdd/dbffpt/dbffpt1.c
    * formatting

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/include/hbapicdp.h
    trunk/harbour/source/rdd/dbfcdx/dbfcdx1.c
    trunk/harbour/source/rdd/dbffpt/dbffpt1.c
    trunk/harbour/source/rdd/dbfnsx/dbfnsx1.c
    trunk/harbour/source/rdd/dbfntx/dbfntx1.c
    trunk/harbour/source/rtl/cdpapi.c
    trunk/harbour/source/rtl/itemseri.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From info at fsgiudice.com  Tue Sep 29 09:45:45 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Sep 29 09:45:56 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12626] trunk/harbour
In-Reply-To: <E1MsaBu-0007QT-3s@dn4whf1.ch3.sourceforge.com>
References: <E1MsaBu-0007QT-3s@dn4whf1.ch3.sourceforge.com>
Message-ID: <4AC20F89.4050600@fsgiudice.com>

Hi Viktor,


Il 29/09/2009 12.44, vszakats@users.sourceforge.net ha scritto:
> Revision: 12626
>           http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12626&view=rev
> Author:   vszakats
> Date:     2009-09-29 10:44:14 +0000 (Tue, 29 Sep 2009)
> 


with last SVN and building on Windows and MSVC I get:

--------------------------------

! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
! MAKE: make 3.81 sh.exe clean install
! HB_USER_PRGFLAGS: -DHB_HASH_MSG_ITEMS
! HB_USER_CFLAGS: -DHB_LEGACY_OFF -DHB_FM_STATISTICS_OFF 
-DHB_FM_DLMT_ALLOC -DHB_GC_AUTO
! HB_INSTALL_PREFIX: j:\cvs\harbour_msvc
! HB_BUILD_DLL: no
! HB_BUILD_SHARED: no
! HB_BUILD_DEBUG: no
! HB_HOST_PLAT: win (x86)  HB_SHELL: nt
! HB_PLATFORM: win (x86) (autodetected)
! HB_COMPILER: msvc
! Component: 'zlib' found in J:/cvs/harbourSVN_trunk/external/zlib (local)
! Component: 'pcre' found in J:/cvs/harbourSVN_trunk/external/pcre (local)
! Component: 'openssl' found in c:\openssl\include
! Component: 'gpm' not supported on win platform
! Component: 'slang' not found
! Component: 'curses' not found
! Component: 'x11' not found
! Component: 'wattcp/watt-32' not supported on win platform
! 'gtcrs' library skipped (component not found)
! 'gtdos' library skipped (platform not supported)
! 'gtos2' library skipped (platform not supported)
! 'gtsln' library skipped (component not found)
! 'gttrm' library skipped (platform or compiler not supported)
! 'gtxwc' library skipped (component not found)
! 'gtalleg' library skipped ('allegro' not found)
! 'hbcurl' library skipped ('libcurl' not found)
! 'hbmysql' library skipped ('mysql' not found)
! 'hbpgsql' library skipped ('postgresql' not found)
! 'rddads' library skipped ('ads' not found)
! 'sddmy' library skipped ('mysql' not found)
! 'sddpg' library skipped ('postgresql' not found)
         1 file copiati.
         1 file copiati.
         1 file copiati.
[snip]
         1 file copiati.
         1 file copiati.
cl.exe  -nologo -I. -I../../../../../include -Gs -TC -Ot2b1 -EHs-c- -MT 
   -IJ:/cvs/harbourSVN_trunk/external/zlib 
-IJ:/cvs/harbourSVN_trunk/external/libpng -DHB_LEGACY_OFF 
-DHB_FM_STATISTICS_OFF -DHB_FM_DLMT_ALLOC -DHB_GC_AUTO -Fo_hbhbpdf.obj 
-c ../../../_hbhbpdf.c
process_begin: CreateProcess(NULL, cl.exe -nologo -I. 
-I../../../../../include -Gs -TC -Ot2b1 -EHs-c- -MT 
-IJ:/cvs/harbourSVN_trunk/external/zlib 
-IJ:/cvs/harbourSVN_trunk/external/libpng -DHB_LEGACY_OFF 
-DHB_FM_STATISTICS_OFF -DHB_FM_DLMT_ALLOC -DHB_GC_AUTO -Fo_hbhbpdf.obj 
-c ../../../_hbhbpdf.c, ...) failed.
make (e=2): Impossibile trovare il file specificato. (<==file not found)

make[3]: *** [_hbhbpdf.obj] Error 2
make[2]: *** [descend] Error 2
make[1]: *** [libhpdf.inst] Error 2
make: *** [external.inst] Error 2

--------------------------------

Best Regards,
Francesco
From sscc at mweb.co.za  Tue Sep 29 09:52:22 2009
From: sscc at mweb.co.za (Alex Strickland)
Date: Tue Sep 29 09:52:35 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12593] trunk/harbour
In-Reply-To: <A3EA09D8-46A6-4D52-BB0B-5F98A41E192E@syenar.hu>
References: <E1MprLO-00063j-K6@c3vjzd1.ch3.sourceforge.com>	<4AB88DF5.7090704@dbtopas.lt>
	<4ABA2AB9.4020101@dbtopas.lt>	<20090924102614.GA25988@uran.home.aster.pl>	<d6fa31440909240915w76e61d0bv7b9985fd2752d6fc@mail.gmail.com>
	<A3EA09D8-46A6-4D52-BB0B-5F98A41E192E@syenar.hu>
Message-ID: <4AC21116.3070107@mweb.co.za>

Viktor Szak?ts wrote:

> BTW I have nothing against hosting LetoDB in Harbour
> repository, but here Alexander has the final word, so if
> he also likes the idea, plus other Harbour developers also
> agree, we can do it.

If this is a voting thing - +1.

Regards
Alex

From harbour.01 at syenar.hu  Tue Sep 29 09:59:50 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Tue Sep 29 10:00:04 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12626] trunk/harbour
In-Reply-To: <4AC20F89.4050600@fsgiudice.com>
References: <E1MsaBu-0007QT-3s@dn4whf1.ch3.sourceforge.com>
	<4AC20F89.4050600@fsgiudice.com>
Message-ID: <EFB49DF1-F55C-4658-A066-63D9A14D4B58@syenar.hu>

Hi Francesco,

It seems it can't find cl.exe. Is it in the PATH?

I'd suggest to let it autodetect, instead of forcing
HB_COMPILER value manually.

Brgds,
Viktor

On 2009 Sep 29, at 15:45, Francesco Saverio Giudice wrote:

> Hi Viktor,
>
>
> Il 29/09/2009 12.44, vszakats@users.sourceforge.net ha scritto:
>> Revision: 12626
>>          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12626&view=rev
>> Author:   vszakats
>> Date:     2009-09-29 10:44:14 +0000 (Tue, 29 Sep 2009)
>
>
> with last SVN and building on Windows and MSVC I get:
>
> --------------------------------
>
> ! Building Harbour 2.0.0beta3 from source - http://www.harbour-project.org
> ! MAKE: make 3.81 sh.exe clean install
> ! HB_USER_PRGFLAGS: -DHB_HASH_MSG_ITEMS
> ! HB_USER_CFLAGS: -DHB_LEGACY_OFF -DHB_FM_STATISTICS_OFF - 
> DHB_FM_DLMT_ALLOC -DHB_GC_AUTO
> ! HB_INSTALL_PREFIX: j:\cvs\harbour_msvc
> ! HB_BUILD_DLL: no
> ! HB_BUILD_SHARED: no
> ! HB_BUILD_DEBUG: no
> ! HB_HOST_PLAT: win (x86)  HB_SHELL: nt
> ! HB_PLATFORM: win (x86) (autodetected)
> ! HB_COMPILER: msvc
> ! Component: 'zlib' found in J:/cvs/harbourSVN_trunk/external/zlib  
> (local)
> ! Component: 'pcre' found in J:/cvs/harbourSVN_trunk/external/pcre  
> (local)
> ! Component: 'openssl' found in c:\openssl\include
> ! Component: 'gpm' not supported on win platform
> ! Component: 'slang' not found
> ! Component: 'curses' not found
> ! Component: 'x11' not found
> ! Component: 'wattcp/watt-32' not supported on win platform
> ! 'gtcrs' library skipped (component not found)
> ! 'gtdos' library skipped (platform not supported)
> ! 'gtos2' library skipped (platform not supported)
> ! 'gtsln' library skipped (component not found)
> ! 'gttrm' library skipped (platform or compiler not supported)
> ! 'gtxwc' library skipped (component not found)
> ! 'gtalleg' library skipped ('allegro' not found)
> ! 'hbcurl' library skipped ('libcurl' not found)
> ! 'hbmysql' library skipped ('mysql' not found)
> ! 'hbpgsql' library skipped ('postgresql' not found)
> ! 'rddads' library skipped ('ads' not found)
> ! 'sddmy' library skipped ('mysql' not found)
> ! 'sddpg' library skipped ('postgresql' not found)
>        1 file copiati.
>        1 file copiati.
>        1 file copiati.
> [snip]
>        1 file copiati.
>        1 file copiati.
> cl.exe  -nologo -I. -I../../../../../include -Gs -TC -Ot2b1 -EHs-c- - 
> MT   -IJ:/cvs/harbourSVN_trunk/external/zlib -IJ:/cvs/ 
> harbourSVN_trunk/external/libpng -DHB_LEGACY_OFF - 
> DHB_FM_STATISTICS_OFF -DHB_FM_DLMT_ALLOC -DHB_GC_AUTO - 
> Fo_hbhbpdf.obj -c ../../../_hbhbpdf.c
> process_begin: CreateProcess(NULL, cl.exe -nologo -I. - 
> I../../../../../include -Gs -TC -Ot2b1 -EHs-c- -MT -IJ:/cvs/ 
> harbourSVN_trunk/external/zlib -IJ:/cvs/harbourSVN_trunk/external/ 
> libpng -DHB_LEGACY_OFF -DHB_FM_STATISTICS_OFF -DHB_FM_DLMT_ALLOC - 
> DHB_GC_AUTO -Fo_hbhbpdf.obj -c ../../../_hbhbpdf.c, ...) failed.
> make (e=2): Impossibile trovare il file specificato. (<==file not  
> found)
>
> make[3]: *** [_hbhbpdf.obj] Error 2
> make[2]: *** [descend] Error 2
> make[1]: *** [libhpdf.inst] Error 2
> make: *** [external.inst] Error 2
>
> --------------------------------
>
> Best Regards,
> Francesco
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From info at fsgiudice.com  Tue Sep 29 10:49:52 2009
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Sep 29 10:50:00 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12626] trunk/harbour
In-Reply-To: <EFB49DF1-F55C-4658-A066-63D9A14D4B58@syenar.hu>
References: <E1MsaBu-0007QT-3s@dn4whf1.ch3.sourceforge.com>	<4AC20F89.4050600@fsgiudice.com>
	<EFB49DF1-F55C-4658-A066-63D9A14D4B58@syenar.hu>
Message-ID: <4AC21E90.1030009@fsgiudice.com>

Hi Viktor,

Il 29/09/2009 15.59, Viktor Szak?ts ha scritto:
> Hi Francesco,
> 
> It seems it can't find cl.exe. Is it in the PATH?
> 
> I'd suggest to let it autodetect, instead of forcing
> HB_COMPILER value manually.
> 

You, as usual, are right!
I forgot to start my setvc.bat that adds MSVC path.

Sorry for email and for your time, I got confused from the error message

-----------
cl.exe  -nologo -I. -I../../../../../include -Gs -TC -Ot2b1 -EHs-c- -MT 
   -IJ:/cvs/harbourSVN_trunk/external/zlib 
-IJ:/cvs/harbourSVN_trunk/external/libpng -DHB_LEGACY_OFF 
-DHB_FM_STATISTICS_OFF -DHB_FM_DLMT_ALLOC -DHB_GC_AUTO -Fo_hbhbpdf.obj 
-c ../../../_hbhbpdf.c
process_begin: CreateProcess(NULL, cl.exe -nologo -I. 
-I../../../../../include -Gs -TC -Ot2b1 -EHs-c- -MT 
-IJ:/cvs/harbourSVN_trunk/external/zlib 
-IJ:/cvs/harbourSVN_trunk/external/libpng -DHB_LEGACY_OFF 
-DHB_FM_STATISTICS_OFF -DHB_FM_DLMT_ALLOC -DHB_GC_AUTO -Fo_hbhbpdf.obj 
-c ../../../_hbhbpdf.c, ...) failed.
make (e=2): Impossibile trovare il file specificato. (<==file not found)
-----------

because I saw file not found and I thought to _hbhbpdf.c (a path problem 
during building) and not to cl.exe that was missing.

Best regards,
Francesco
From qiinfo at ig.com.br  Tue Sep 29 11:15:18 2009
From: qiinfo at ig.com.br (Rossine)
Date: Tue Sep 29 11:15:26 2009
Subject: [Harbour] Error Comparing two arrays
Message-ID: <25665027.post@talk.nabble.com>


Hello

This sample:

[CODE]

function main

local aArr1 := { }
local aArr2 := { }

? aArr1 != aArr2

return NIL

[ENDCODE]

generate this error:

[ERROR]

Error BASE/1072  Argument error: <>
Called from MAIN(6)

[ENDERROR]

I see that this is correct, it also occurs in the clipper same error. How do
I compare two arrays ?

Regards,

Rossine.

-- 
View this message in context: http://www.nabble.com/Error-Comparing-two-arrays-tp25665027p25665027.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From teo at windtelsoft.com  Tue Sep 29 13:28:55 2009
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Tue Sep 29 13:29:04 2009
Subject: [Harbour] Error Comparing two arrays
In-Reply-To: <25665027.post@talk.nabble.com>
References: <25665027.post@talk.nabble.com>
Message-ID: <70E6D34D-70E4-4ADE-96F9-3D63EEA0C35A@windtelsoft.com>


On 29Sep, 2009, at 10:15 AM, Rossine wrote:

>
> Hello
>
> This sample:
>
> [CODE]
>
> function main
>
> local aArr1 := { }
> local aArr2 := { }
>
> ? aArr1 != aArr2
>
> return NIL
>
> [ENDCODE]
>
> generate this error:
>
> [ERROR]
>
> Error BASE/1072  Argument error: <>
> Called from MAIN(6)
>
> [ENDERROR]
>
> I see that this is correct, it also occurs in the clipper same  
> error. How do
> I compare two arrays ?

Hello Rossine, here is a little function that I wrote years ago to  
compare two array contents:

<prg>
FUNCTION aCompare(a1,a2)
	LOCAL r:=.T.,v
	IF !valtype(a1)=="A" .OR. !valtype(a1)==valtype(a2) .OR. ! 
len(a1)==len(a2)
		RETURN .F.
	ENDIF
	aeval(a1,{|e,i|  
iif 
(r 
,r:=iif((v:=valtype(e))=="A",aCompare(e,a2[i]),v==valtype(a2[i]) .AND.  
e == a2[i]),NIL) })
RETURN r
</prg>

Then you simply use:

   IF aCompare( a1, a2 ) // TRUE on equal array contents
    ....



best regards,

Teo

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090929/89df6fbb/attachment.html
From qiinfo at ig.com.br  Tue Sep 29 14:50:14 2009
From: qiinfo at ig.com.br (Rossine)
Date: Tue Sep 29 14:50:20 2009
Subject: [Harbour] Error Comparing two arrays
In-Reply-To: <70E6D34D-70E4-4ADE-96F9-3D63EEA0C35A@windtelsoft.com>
References: <25665027.post@talk.nabble.com>
	<70E6D34D-70E4-4ADE-96F9-3D63EEA0C35A@windtelsoft.com>
Message-ID: <25668693.post@talk.nabble.com>


Hello Teo,

>Hello Rossine, here is a little function that I wrote years ago to  
>compare two array contents:
><prg>
>...

This work?s fine :)

Many thank?s,

Rossine.

-- 
View this message in context: http://www.nabble.com/Error-Comparing-two-arrays-tp25665027p25668693.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Wed Sep 30 01:36:31 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Sep 30 01:36:37 2009
Subject: [Harbour] MEMIO - Some Clarifications
In-Reply-To: <4AC0BB9E.5090606@dbtopas.lt>
References: <25639924.post@talk.nabble.com> <4AC0BB9E.5090606@dbtopas.lt>
Message-ID: <25675247.post@talk.nabble.com>


Hello,


Mindaugas Kavaliauskas wrote:
> 
> Can you try to make self contained sample by changing real report to 
> some simple DBAPPEND(), FIELDPUT()? I can not reproduce such bahaviour.
> 

Here is the code, though not portraying the exact problem 
I stated, but may be the results may give some clues:

REQUEST HB_MEMIO

PROC Main()
   LOCAL nI
   FIELD F1

   DBCREATE("mem:\test.dbf", {{"F1", "N", 9, 0}},, .T., "memarea")
   FOR nI := 1 TO 1000
     DBAPPEND();  F1 := HB_RANDOM() * 1000000
   NEXT
   INDEX ON F1 TAG f1 TO "mem:\test.z01"
   DBEVAL({|| QOUT(F1)})

   ? alias(), used(), dbInfo( 10 )
   ? "dbDrop()      =>", DBDROP("mem:\test")         // Free memory resource
   ? alias(), used(), dbInfo( 10 )                          // This SHOULD
PRODUCE ERROR 
   DbGotop()                                                    //  if
DbDrop() returns TRUE
   ? fieldget( 1 )                                               //  NOTE: I
have not closed the area
   DbSkip()
   ? fieldget( 1 )

   ? "DbCloseArea() =>", DBCLOSEAREA()
   ? alias(), used(), dbInfo( 10 )

   ? 'Press a key when done'
   inkey( 0 )
   RETURN


Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/MEMIO---Some-Clarifications-tp25639924p25675247.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From harbour.01 at syenar.hu  Wed Sep 30 02:22:36 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 30 02:22:45 2009
Subject: [Harbour] MEMIO - Some Clarifications
In-Reply-To: <25675247.post@talk.nabble.com>
References: <25639924.post@talk.nabble.com> <4AC0BB9E.5090606@dbtopas.lt>
	<25675247.post@talk.nabble.com>
Message-ID: <8B0D6C47-A216-4911-868D-70923600E4C8@syenar.hu>

Hi,

> REQUEST HB_MEMIO
>
> PROC Main()
>   LOCAL nI
>   FIELD F1
>
>   DBCREATE("mem:\test.dbf", {{"F1", "N", 9, 0}},, .T., "memarea")
[...]
>   ? "dbDrop()      =>", DBDROP("mem:\test")         // Free memory  
> resource

Did you try to you the _same_ name for creation and drop?

Maybe .dbf isn't used by MEMIO as default extension
(since there are no files anyway).

Brgds,
Viktor

From maurilio.longo at libero.it  Wed Sep 30 03:43:37 2009
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Sep 30 03:43:45 2009
Subject: [Harbour] Harbour under OS/2 - eCS 12604 -12621
In-Reply-To: <4AC0844A.2020502@mail.udg.mx>
References: <4AC0844A.2020502@mail.udg.mx>
Message-ID: <4AC30C29.2000304@libero.it>

David,

David Arturo Macias Corona wrote:
> Confirmed. The guilty is length of command line
> 
So here we are again :(

> gcc -Zomf -shared -L../../../../../lib/os2/gcc  -o
> ../../../../../bin/os2/gcc/harbour.dll @__dyn__.tmp __dyn__.def -lsocket
> Warning! W1058: file ldvJjRLI.: line(613): protmode option not valid for
> an OS/2 EMX dynamic link library

Maybe .a out files simply don't take it into account?

> Note: using $(DYNNAME) does not include .dll extension, so I suppose it
> is added by default and not due Harbour definitions
>    @$(ECHO) LIBRARY $(DYNNAME) INITINSTANCE TERMINSTANCE >> __dyn__.def
> 

No, it is used because library name is not .dll file name; it has to be
without .dll extension or otherwise import library does not work.

> and harbourm.dll build fine, with different size than harbour.dll
> Same warning for protmode in harbourm.dll
> 
> So the reason for emxomfld failure is due to length of long list of
> object files in section:
> 

As such I say that for the time being we keep .a out. :)

BTW, when using .a out we use a link file (__dyn__.tmp) so where is the line
length limit reached?

> Viktor, Maurilio, Przemek:    
>  any idea to overcome this limit ?
> 

You could try to contact Paul Smedley and/or Knut Osmundsen and see if they
can fix this issue.

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From harbour.01 at syenar.hu  Wed Sep 30 03:55:01 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 30 03:55:11 2009
Subject: [Harbour] Harbour under OS/2 - eCS 12604 -12621
In-Reply-To: <4AC30C29.2000304@libero.it>
References: <4AC0844A.2020502@mail.udg.mx> <4AC30C29.2000304@libero.it>
Message-ID: <4A3F37C5-02CD-4C42-9D63-9252E3D7B0A3@syenar.hu>

Hi Maurilio,

> As such I say that for the time being we keep .a out. :)
>
> BTW, when using .a out we use a link file (__dyn__.tmp) so where is  
> the line
> length limit reached?

Just a guess, that gcc will read arguments from __dyn__.tmp and
will later pass them on to other tools (like ld) internally
as cmdline. If this is the case, it means that this feature isn't
very useful in this scenario.

A workaround could be to call ld (and/or other tools) directly.
Of course in case they support reading arguments from disk file.

Downside is that the exact way these tools need to be called will
have to be checked. Since OS/2 is a pretty static system, it's
probably enough to do it once (and maybe once again for gcc4) and
we're good.

Brgds,
Viktor

From dbtopas at dbtopas.lt  Wed Sep 30 04:41:11 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Sep 30 04:41:46 2009
Subject: [Harbour] MEMIO - Some Clarifications
In-Reply-To: <25675247.post@talk.nabble.com>
References: <25639924.post@talk.nabble.com> <4AC0BB9E.5090606@dbtopas.lt>
	<25675247.post@talk.nabble.com>
Message-ID: <4AC319A7.2090502@dbtopas.lt>

Hi,

>    DBEVAL({|| QOUT(F1)})
> 
>    ? alias(), used(), dbInfo( 10 )
>    ? "dbDrop()      =>", DBDROP("mem:\test")         // Free memory resource
>    ? alias(), used(), dbInfo( 10 )                          // This SHOULD
> PRODUCE ERROR 

It should not, because workarea is not closed. File entry is removed 
from directory after DBDROP(), but file content still exists.


Regards,
Mindaugas
From dmacias at mail.udg.mx  Wed Sep 30 06:56:25 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Sep 30 06:56:49 2009
Subject: [Harbour] Harbour under OS/2 - 12624
Message-ID: <4AC33959.6050501@mail.udg.mx>

Maurilio, Viktor:

Thanks for comments

>BTW, when using .a out we use a link file (__dyn__.tmp) so where is the
>line length limit reached?

ld.exe is not emxomfld.exe
Both use __dyn__.tmp

>You could try to contact Paul Smedley and/or Knut Osmundsen and see if
>they can fix this issue.

As explained emxomfld.exe is part of gcc335 and work of Knut
gcc4xx nothing matter

>Just a guess, that gcc will read arguments from __dyn__.tmp and
>will later pass them on to other tools (like ld) internally
>as cmdline. If this is the case, it means that this feature isn't
>very useful in this scenario.

>A workaround could be to call ld (and/or other tools) directly.
>Of course in case they support reading arguments from disk file.

>Downside is that the exact way these tools need to be called will
>have to be checked. Since OS/2 is a pretty static system, it's
>probably enough to do it once (and maybe once again for gcc4) and
>we're good.

I insist in keep it simple and just to make minimal changes
It is not necessary to change actual behaviour in big extent

For a.out os2gcc use gcc, ar, ld
For OMF os2gcc use gcc, emxomfar, emxomfld
OMF problem is not due gcc4, but without OMF support, Harbour can not
upgrade to gcc4

I made entire tests with gcc335 and gcc4xx using:

  * $Id: ChangeLog 12624 2009-09-28 20:51:46Z vszakats $
  2009-09-28 22:27 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)

Remember, we have two situations and I am dealing with both
a) Support of Harbour OMF type, for gcc335 and gcc4xx
b) Support of Harbour gcc4xx

Results:
- Harbour build entirely with any mode, compiler with minimal changes
- gcc335: work entirely in a.out mode, including .dll files
- gcc335: work near entirely in OMF, except harbourm.dll (*)
- gcc4xx: work near entirely in OMF, except harbourm.dll (*)

(*) Harbourm.dll, as explained, does not build due emxomfld.exe limit
and emxomfld.exe is an gcc335 tool used by gcc4xx too

I moved based in Viktor guidelines source\dynlib\mt to source\dynlibmt
directory, deleting source\dynlib\mt lib and making proper changes in
source\dynlibmt\Makefile and source\Makefile
So harbourm.dll and harbourm.lib build fine with either a.out or OMF

I do not see great challenge to Harbour to change
  "source\dynlib\mt" to "source\dynlibmt"
I do not expect other platforms, compilers to have damages  :-)

Conclusion: Harbour build entirely including harbourm.dll with a.out and
OMF types in gcc335, and OMF type in gcc4xx

Below are included current SVN/diff output for
- config/os2/gcc.mk
- utils/hbmk2/hbmk2.prg
They work with
- gcc335 a.out / OMF types
- gcc4xx OMF type

Note: SVN/diff output look so different than JEdit/"Normal diff output"
JEdit is my prefered editor in any platform since around 2003

Work is based in environmental variable HB_OS2_OMF
As is optional, default is gcc335/a.out and Harbour for OS/2 work as ever

If someone want to build Harbour with gcc335/OMF type or gcc4xx/OMF
type, just need to set:

  set EMXOMFLD_TYPE=WLINK   ( or prefered choice )
  set EMXOMFLD_LINKER=WL.EXE   ( or prefered choice )
  set HB_OS2_OMF=yes

With current diff output and moving "source\dynlib\mt" all work is done

David Macias


Index: config/os2/gcc.mk
===================================================================
--- config/os2/gcc.mk	(revisi?n: 12624)
+++ config/os2/gcc.mk	(copia de trabajo)
@@ -8,9 +8,15 @@
     HB_CMP := gcc
  endif

-OBJ_EXT := .o
-LIB_PREF :=
-LIB_EXT := .a
+ifeq ($(HB_OS2_OMF),yes)
+   OBJ_EXT := .obj
+   LIB_PREF :=
+   LIB_EXT := .lib
+else
+   OBJ_EXT := .o
+   LIB_PREF :=
+   LIB_EXT := .a
+endif

  CC := $(HB_CCPATH)$(HB_CCPREFIX)$(HB_CMP)$(HB_CCPOSTFIX)
  CC_IN := -c
@@ -20,6 +26,10 @@
  CFLAGS :=
  LDFLAGS :=

+ifeq ($(HB_OS2_OMF),yes)
+   CFLAGS += -Zomf
+endif
+
  ifneq ($(HB_BUILD_WARN),no)
     CFLAGS += -Wall -W
  endif
@@ -62,33 +72,52 @@
  #
  #endef

-# We have to use a script to overcome the AR limit of max 850 characters
-# in commmand line
-define create_library
-   $(if $(wildcard $(subst /,$(DIRSEP),$(LIB_FILE))),@$(RM) $(subst
/,$(DIRSEP),$(LIB_FILE)),)
-   @$(ECHO) $(ECHOQUOTE)CREATE $(LIB_DIR)/$@$(ECHOQUOTE) > __lib__.tmp
-   for %i in ( *$(OBJ_EXT) ) do @$(ECHO) $(ECHOQUOTE)ADDMOD
%i$(ECHOQUOTE) >> __lib__.tmp
-   @$(ECHO) $(ECHOQUOTE)SAVE$(ECHOQUOTE) >> __lib__.tmp
-   @$(ECHO) $(ECHOQUOTE)END$(ECHOQUOTE) >> __lib__.tmp
-   $(AR) $(ARFLAGS) $(HB_USER_AFLAGS) -M < __lib__.tmp
-endef

+ifeq ($(HB_OS2_OMF),yes)
+   define create_library
+      $(if $(wildcard $(subst /,$(DIRSEP),$(LIB_FILE))),@$(RM) $(subst
/,$(DIRSEP),$(LIB_FILE)),)
+      for %i in ( *$(OBJ_EXT) ) do $(AR) $(ARFLAGS) $(HB_USER_AFLAGS)
-p128 r $(LIB_DIR)/$@ %i$(ECHOQUOTE)
+   endef
+else
+   # We have to use a script to overcome the AR limit of max 850 characters
+   # in commmand line
+   define create_library
+      $(if $(wildcard $(subst /,$(DIRSEP),$(LIB_FILE))),@$(RM) $(subst
/,$(DIRSEP),$(LIB_FILE)),)
+      @$(ECHO) $(ECHOQUOTE)CREATE $(LIB_DIR)/$@$(ECHOQUOTE) > __lib__.tmp
+      for %i in ( *$(OBJ_EXT) ) do @$(ECHO) $(ECHOQUOTE)ADDMOD
%i$(ECHOQUOTE) >> __lib__.tmp
+      @$(ECHO) $(ECHOQUOTE)SAVE$(ECHOQUOTE) >> __lib__.tmp
+      @$(ECHO) $(ECHOQUOTE)END$(ECHOQUOTE) >> __lib__.tmp
+      $(AR) $(ARFLAGS) $(HB_USER_AFLAGS) -M < __lib__.tmp
+   endef
+endif
+
  # Under OS/2 || isn't a command separator (inside a shell, that is);
correct separator is &
-AR := $(HB_CCPATH)$(HB_CCPREFIX)ar
-ARFLAGS :=
-AR_RULE = $(create_library) $(ARSTRIP) & $(RM) __lib__.tmp

+ifeq ($(HB_OS2_OMF),yes)
+   AR := $(HB_CCPATH)$(HB_CCPREFIX)emxomfar
+   ARFLAGS :=
+   AR_RULE = $(create_library) $(ARSTRIP)
+else
+   AR := $(HB_CCPATH)$(HB_CCPREFIX)ar
+   ARFLAGS :=
+   AR_RULE = $(create_library) $(ARSTRIP) & $(RM) __lib__.tmp
+endif
+
  DY := $(CC)
  DFLAGS := -shared $(LIBPATHS)
+ifeq ($(HB_OS2_OMF),yes)
+   DFLAGS += -Zomf
+endif
  DY_OUT := $(LD_OUT)
  DLIBS := $(foreach lib,$(LIBS) $(SYSLIBS),-l$(lib))

  # NOTE: The empty line directly before 'endef' HAS TO exist!
  define dyn_object
-   @$(ECHO) $(file)>> __dyn__.tmp
+   @$(ECHO) $(subst $(DIRSEP),/,$(file))>> __dyn__.tmp
     @emxexp $(file)>> __dyn__.def

  endef
+
  define create_dynlib
     $(if $(wildcard __dyn__.tmp),@$(RM) __dyn__.tmp,)
     $(if $(wildcard __dyn__.def),@$(RM) __dyn__.def,)



Index: utils/hbmk2/hbmk2.prg
===================================================================
--- utils/hbmk2/hbmk2.prg	(revisi?n: 12624)
+++ utils/hbmk2/hbmk2.prg	(copia de trabajo)
@@ -2417,8 +2417,18 @@
           cLibPrefix := "-l"
           cLibExt := ""
           cObjExt := ".o"
+
+         IF ValueIsT( GetEnv( "HB_OS2_OMF" ) )
+            cObjExt := ".obj"
+         ENDIF
+
           cBin_CompC := hbmk[ _HBMK_cCCPREFIX ] + iif( hbmk[ _HBMK_lCPP
] != NIL .AND. hbmk[ _HBMK_lCPP ], "g++", "gcc" ) + hbmk[
_HBMK_cCCPOSTFIX ] + cCCEXT
           cOpt_CompC := "-c"
+
+         IF ValueIsT( GetEnv( "HB_OS2_OMF" ) )
+            cOpt_CompC += " -Zomf"
+         ENDIF
+
           IF hbmk[ _HBMK_lOPTIM ]
              cOpt_CompC += " -O3"
           ENDIF
@@ -2430,12 +2440,29 @@
           ENDIF
           cBin_Dyn := cBin_CompC
           cOpt_Dyn := "-shared {FD} -o {OD} {DL} {LO} {LL} {LB} {LS}"
+         IF ValueIsT( GetEnv( "HB_OS2_OMF" ) )
+            cOpt_Dyn += " -Zomf"
+         ENDIF
+
           cBin_Link := cBin_CompC
+
           cOpt_Link := "{LO} {LA} {FL} {DL}"
+
+         IF ValueIsT( GetEnv( "HB_OS2_OMF" ) )
+            cOpt_Link += " -Zomf"
+         ENDIF
+
           cLibPathPrefix := "-L"
           cLibPathSep := " "
-         cLibLibExt := ".a"
-         cBin_Lib := hbmk[ _HBMK_cCCPREFIX ] + "ar" + cCCEXT
+
+         IF ValueIsT( GetEnv( "HB_OS2_OMF" ) )
+            cLibLibExt := ".lib"
+            cBin_Lib := hbmk[ _HBMK_cCCPREFIX ] + "emxomfar" + cCCEXT
+         ELSE
+            cLibLibExt := ".a"
+            cBin_Lib := hbmk[ _HBMK_cCCPREFIX ] + "ar" + cCCEXT
+         ENDIF
+
           cOpt_Lib := "{FA} rcs {OL} {LO}"
           IF hbmk[ _HBMK_lMAP ]
              AAdd( hbmk[ _HBMK_aOPTL ], "-Wl,-Map,{OM}" )

From dmacias at mail.udg.mx  Wed Sep 30 07:18:46 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Sep 30 07:19:05 2009
Subject: [Harbour] Harbour under OS/2 - 12624
Message-ID: <4AC33E96.5070706@mail.udg.mx>

Viktor:

For INSTALL we can change/add:

   NOTES:
   a) To select older TCP/IP stack (<4.1), use these values:
      set HB_USER_CFLAGS=-DTCPV40HDRS %HB_USER_CFLAGS%
      set HB_USER_LDFLAGS=-LC:\usr\lib\tcpipv4 %HB_USER_LDFLAGS%
   b) To select alternative OMF library format, use these values:
      set EMXOMFLD_TYPE=WLINK   ( or prefered choice )
      set EMXOMFLD_LINKER=WL.EXE   ( or prefered choice )
      set HB_OS2_OMF=yes
    If choice is WL.exe, modified OpenWatcom wlink.exe available in
      ftp://ftp.netlabs.org/pub/gcc/wl-hll-r1.zip
    and located somewhere in PATH


and for "12. LINKS TO EXTERNAL TOOLS"
       OS/2 GCC [os2, free, open-source]
          ftp://ftp.netlabs.org/pub/gcc/
          ftp://ftp.netlabs.org/pub/gcc/GCC-3.3.5-csd3.zip
          ftp://ftp.netlabs.org/pub/gcc/libc-0_6_3-csd3.exe
          ftp://ftp.netlabs.org/pub/gcc/wl-hll-r1.zip
          http://os2ports.smedley.info/index.php?page=gcc
          http://os2ports.smedley.info/index.php?page=gcc44



For source\Makefile I just used:
       ifneq ($(HB_BUILD_DLL),no)
          DIRS += dynlib{codepage,common,hbextern,lang,macro,pp,rdd,rtl,vm}
          DIRS += 
dynlibmt{codepage,common,hbextern,lang,macro,pp,rdd,rtl,vm}
       endif


For "source\dynlibmt\Makefile" is a copy of "source\dynlib\Makefile" 
changing to:

    DYNDIRLIST := $(DYNDIRLIST_BASE) source/vm/vmmt
    DYNNAME := $(HB_DYNLIB_MT)
    DYNNAME2 := $(HB_DYNLIB_BASE_MT)


David Macias
From harbour.01 at syenar.hu  Wed Sep 30 07:26:03 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 30 07:26:12 2009
Subject: [Harbour] Harbour under OS/2 - 12624
In-Reply-To: <4AC33959.6050501@mail.udg.mx>
References: <4AC33959.6050501@mail.udg.mx>
Message-ID: <8E8DFAD7-AA43-4257-97A4-D87E477010D4@syenar.hu>

Hi David,

>> Downside is that the exact way these tools need to be called will
>> have to be checked. Since OS/2 is a pretty static system, it's
>> probably enough to do it once (and maybe once again for gcc4) and
>> we're good.
>
> I insist in keep it simple and just to make minimal changes
> It is not necessary to change actual behaviour in big extent
>
> For a.out os2gcc use gcc, ar, ld
> For OMF os2gcc use gcc, emxomfar, emxomfld
> OMF problem is not due gcc4, but without OMF support, Harbour can not
> upgrade to gcc4
>
> I made entire tests with gcc335 and gcc4xx using:
>
> * $Id: ChangeLog 12624 2009-09-28 20:51:46Z vszakats $
> 2009-09-28 22:27 UTC+0200 Viktor Szakats (harbour.01 syenar.hu)
>
> Remember, we have two situations and I am dealing with both
> a) Support of Harbour OMF type, for gcc335 and gcc4xx
> b) Support of Harbour gcc4xx
>
> Results:
> - Harbour build entirely with any mode, compiler with minimal changes
> - gcc335: work entirely in a.out mode, including .dll files
> - gcc335: work near entirely in OMF, except harbourm.dll (*)
> - gcc4xx: work near entirely in OMF, except harbourm.dll (*)
>
> (*) Harbourm.dll, as explained, does not build due emxomfld.exe limit
> and emxomfld.exe is an gcc335 tool used by gcc4xx too
>
> I moved based in Viktor guidelines source\dynlib\mt to source\dynlibmt
> directory, deleting source\dynlib\mt lib and making proper changes in
> source\dynlibmt\Makefile and source\Makefile
> So harbourm.dll and harbourm.lib build fine with either a.out or OMF
>
> I do not see great challenge to Harbour to change
> "source\dynlib\mt" to "source\dynlibmt"
> I do not expect other platforms, compilers to have damages  :-)

I don't plan to do it. The reason is two-fold, first it makes
the layout messy, second this solution can only solve the problem
temporarily. Sooner or later we will have additional objects which
are part of .dlls, and in this case it will just break again,
for both .dlls.

So I suggest to solve the root cause instead of adding such
workaround.

> If someone want to build Harbour with gcc335/OMF type or gcc4xx/OMF
> type, just need to set:
>
> set EMXOMFLD_TYPE=WLINK   ( or prefered choice )
> set EMXOMFLD_LINKER=WL.EXE   ( or prefered choice )
> set HB_OS2_OMF=yes
>
> With current diff output and moving "source\dynlib\mt" all work is  
> done

Thanks for the patch, but sorry, I still don't support this
method for reasons described multiple times. It's an
out-of-the-band bunch of options, so for me it's still in
the hack area. I also don't understand why to introduce
additional EMXOMDLD_* variables. I'm trying to REDUCE
number of control variables and to keep the main logic as
straightforward, simple and portable as possible, this
patch goes to the other direction.

Brgds,
Viktor

From fmancera at viaopen.com  Wed Sep 30 07:53:09 2009
From: fmancera at viaopen.com (Fernando Mancera)
Date: Wed Sep 30 07:52:14 2009
Subject: [Harbour] ViaNemo: more news
In-Reply-To: <4AC1E7CE.10702@mweb.co.za>
References: <ff964557777346aac05a96f48b18bf27@viaopen.com>
	<4AC1E7CE.10702@mweb.co.za>
Message-ID: <000001ca41c4$95e92340$c1bb69c0$@com>

Hello Alex,

> I'm post a new article on http://blog.viaopen.com 
> with list of most frequent questions we received about ViaNEMO.

>>Does Antonio Linares new free release of FiveWin have anything to do with you guys?

Antonio Linares and myself are two different companies so each ones run his own business separately.

If you have any further questions about ViaNemo, don?t hesitate to email me or post on blog.

Thank you.

Best Regards,

Fernando Mancera
http://blog.viaopen.com





From vszakats at users.sourceforge.net  Wed Sep 30 08:04:59 2009
From: vszakats at users.sourceforge.net (vszakats@users.sourceforge.net)
Date: Wed Sep 30 08:05:05 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12628] trunk/harbour
Message-ID: <E1MsxvX-0003KM-CR@bj8yhf1.ch3.sourceforge.com>

Revision: 12628
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12628&view=rev
Author:   vszakats
Date:     2009-09-30 12:04:58 +0000 (Wed, 30 Sep 2009)

Log Message:
-----------
2009-09-30 13:53 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * INSTALL
    + Added links to several new components.
      I'd need input for bison/flex link, I didn't have any success 
      making these work on Windows systems.

  - doc/bintools.txt
  * INSTALL
  * COPYING
    * Content of bintools.txt moved to INSTALL and COPYING.

  * bin/hb-mkimp.bat
    * Minor syncing of Sed's name.

Modified Paths:
--------------
    trunk/harbour/COPYING
    trunk/harbour/ChangeLog
    trunk/harbour/INSTALL
    trunk/harbour/bin/hb-mkimp.bat

Removed Paths:
-------------
    trunk/harbour/doc/bintools.txt


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From dmacias at mail.udg.mx  Wed Sep 30 09:06:08 2009
From: dmacias at mail.udg.mx (David Arturo Macias Corona)
Date: Wed Sep 30 09:06:25 2009
Subject: [Harbour] Re: Harbour under OS/2 - 12624
Message-ID: <4AC357C0.4020109@mail.udg.mx>

Viktor:

 >I don't plan to do it. The reason is two-fold, first it makes
 >the layout messy, second this solution can only solve the problem
 >temporarily. Sooner or later we will have additional objects which
 >are part of .dlls, and in this case it will just break again,
 >for both .dlls.

 >So I suggest to solve the root cause instead of adding such
 >workaround.

I do not see two-fold as layout messy
In Harbour we have added, deleted, moved directories oftenly

And for additional objects, yes, I saw it as a future problem
Two-fold was my temporary solution to build entirely Harbour in either 
library format and is suggested as an optional way

Current failure to build harbourm.dll must not stop us in other goals

 >> If someone want to build Harbour with gcc335/OMF type or gcc4xx/OMF
 >> type, just need to set:
 >>
 >> set EMXOMFLD_TYPE=WLINK   ( or prefered choice )
 >> set EMXOMFLD_LINKER=WL.EXE   ( or prefered choice )
 >> set HB_OS2_OMF=yes
 >>
 >> With current diff output and moving "source\dynlib\mt" all work is
 >> done

 >Thanks for the patch, but sorry, I still don't support this
 >method for reasons described multiple times. It's an
 >out-of-the-band bunch of options, so for me it's still in
 >the hack area. I also don't understand why to introduce
 >additional EMXOMDLD_* variables. I'm trying to REDUCE
 >number of control variables and to keep the main logic as
 >straightforward, simple and portable as possible, this
 >patch goes to the other direction.

This goes in the same direction: simple and portable as possible

It was explained since beginning

os2gcc is not linuxgcc, darwingcc, sunosgcc, ... and any other gcc, so 
os2gcc have/support other features and have specific needs

The only work we have to do is to manage these features in Harbour

   set EMXOMFLD_TYPE=WLINK   ( or prefered choice )
   set EMXOMFLD_LINKER=WL.EXE   ( or prefered choice )
together with -Zomf are used by gcc itself to manage library format as 
OMF in place of a.out
Both values are not used by Harbour and belong to C compiler setting
You can exclude any reference of these values in INSTALL and/or Harbour 
but end-users may ignore them failing as consequence


   set HB_OS2_OMF=yes
is the only new value for Harbour, and we need it or something as it 
because in some place we need to tell to Harbour "make process" that we 
are using a different type, and in some pieces of Harbour code

In fact, HB_OS2_OMF is not used in Harbour code in any place except 
hbmk2.prg, because we need to inform hbmk2.prg that os2gcc manage two 
choices
Same is need for any other compiler where we change default values, as 
library format in this case

A value as "set HB_OS2_OMF=yes" was my "simple as possible" proposal for 
this need of os2gcc
Perhaps we can discard this new ONE specific OS/2 value and manage the 
two options of library format on os2gcc based ih other value, for 
example "not empty EMXOMFLD_TYPE" environment value
As in case of HB_OS2_OMF, "not empty EMXOMFLD_TYPE" must be used in
  config\os2\gcc.mk
  utils\hbmk2\hbmk2.prg
implying it mean "OMF type" in place of "a.out type"

In this way we do not need any new values in Harbour and any reference 
in INSTALL of these two gcc values (we discarded HB_OS2_OMF) and 
sucessful build of Harbour rely only on proper gcc environment settings 
applied by end-user

I see this choice against of spirit of INSTALL, when we suppose it exist 
to help Harbour builders

A new os2gcc value in Harbour (HB_OS_OMF) must not stop us in other 
goals: support of OMF type and gcc4xx

The work has been done and is just matter to include it to Harbour, 
expanding Harbour capabilities, keeping it simple

David Macias


From mbelgrano at deltain.it  Wed Sep 30 09:11:37 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Sep 30 09:12:03 2009
Subject: [Harbour] ViaNemo: more news
In-Reply-To: <000001ca41c4$95e92340$c1bb69c0$@com>
References: <ff964557777346aac05a96f48b18bf27@viaopen.com> 
	<4AC1E7CE.10702@mweb.co.za> <000001ca41c4$95e92340$c1bb69c0$@com>
Message-ID: <609353e70909300611y6b938116v6d74788d68df480d@mail.gmail.com>

I think that Antonio Linares have deviced promote a  special version of
Fivewin 6 (cost  zero dollar) after your announce of a product compatible
with fivewin


2009/9/30 Fernando Mancera <fmancera@viaopen.com>

> Hello Alex,
>
> > I'm post a new article on http://blog.viaopen.com
> > with list of most frequent questions we received about ViaNEMO.
>
> >>Does Antonio Linares new free release of FiveWin have anything to do with
> you guys?
>
> Antonio Linares and myself are two different companies so each ones run his
> own business separately.
>
> If you have any further questions about ViaNemo, don?t hesitate to email me
> or post on blog.
>
> Thank you.
>
> Best Regards,
>
> Fernando Mancera
> http://blog.viaopen.com
>
>
>
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090930/f0e40e85/attachment.html
From mbelgrano at deltain.it  Wed Sep 30 09:20:53 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Sep 30 09:21:21 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12628] trunk/harbour
In-Reply-To: <E1MsxvX-0003KM-CR@bj8yhf1.ch3.sourceforge.com>
References: <E1MsxvX-0003KM-CR@bj8yhf1.ch3.sourceforge.com>
Message-ID: <609353e70909300620l57e79c32k5ac80b288d5cc153@mail.gmail.com>

 <massimo@eqanetwork.com>I try...sorry if is bad:
http://sourceforge.net/projects/gnuwin32/files/bison/2.4.1/bison-2.4.1-setup.exe/download

2009/9/30 <vszakats@users.sourceforge.net>

> Revision: 12628
>
> http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12628&view=rev
> Author:   vszakats
> Date:     2009-09-30 12:04:58 +0000 (Wed, 30 Sep 2009)
>
> Log Message:
> -----------
> 2009-09-30 13:53 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * INSTALL
>    + Added links to several new components.
>      I'd need input for bison/flex link, I didn't have any success
>      making these work on Windows systems.
>
>  - doc/bintools.txt
>  * INSTALL
>  * COPYING
>    * Content of bintools.txt moved to INSTALL and COPYING.
>
>  * bin/hb-mkimp.bat
>    * Minor syncing of Sed's name.
>
> Modified Paths:
> --------------
>    trunk/harbour/COPYING
>    trunk/harbour/ChangeLog
>    trunk/harbour/INSTALL
>    trunk/harbour/bin/hb-mkimp.bat
>
> Removed Paths:
> -------------
>    trunk/harbour/doc/bintools.txt
>
>
> This was sent by the SourceForge.net collaborative development platform,
> the world's largest Open Source development site.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090930/159a5119/attachment-0001.html
From mbelgrano at deltain.it  Wed Sep 30 09:24:43 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Sep 30 09:25:10 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12628] trunk/harbour
In-Reply-To: <609353e70909300620l57e79c32k5ac80b288d5cc153@mail.gmail.com>
References: <E1MsxvX-0003KM-CR@bj8yhf1.ch3.sourceforge.com> 
	<609353e70909300620l57e79c32k5ac80b288d5cc153@mail.gmail.com>
Message-ID: <609353e70909300624y388ddde1g6bad2151ef0aac39@mail.gmail.com>

http://sourceforge.net/projects/gnuwin32/files/flex/

2009/9/30 Massimo Belgrano <mbelgrano@deltain.it>

> <massimo@eqanetwork.com>I try...sorry if is bad:
>
> http://sourceforge.net/projects/gnuwin32/files/bison/2.4.1/bison-2.4.1-setup.exe/download
>
> 2009/9/30 <vszakats@users.sourceforge.net>
>
> Revision: 12628
>>
>> http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12628&view=rev
>> Author:   vszakats
>> Date:     2009-09-30 12:04:58 +0000 (Wed, 30 Sep 2009)
>>
>> Log Message:
>> -----------
>> 2009-09-30 13:53 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>>  * INSTALL
>>    + Added links to several new components.
>>      I'd need input for bison/flex link, I didn't have any success
>>      making these work on Windows systems.
>>
>>  - doc/bintools.txt
>>  * INSTALL
>>  * COPYING
>>    * Content of bintools.txt moved to INSTALL and COPYING.
>>
>>  * bin/hb-mkimp.bat
>>    * Minor syncing of Sed's name.
>>
>> Modified Paths:
>> --------------
>>    trunk/harbour/COPYING
>>    trunk/harbour/ChangeLog
>>    trunk/harbour/INSTALL
>>    trunk/harbour/bin/hb-mkimp.bat
>>
>> Removed Paths:
>> -------------
>>    trunk/harbour/doc/bintools.txt
>>
>>
>> This was sent by the SourceForge.net collaborative development platform,
>> the world's largest Open Source development site.
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
>
>
> --
> Massimo Belgrano
>
>


-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090930/1e0768f1/attachment.html
From dbtopas at dbtopas.lt  Wed Sep 30 09:30:19 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Sep 30 09:30:53 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12628] trunk/harbour
In-Reply-To: <E1MsxvX-0003KM-CR@bj8yhf1.ch3.sourceforge.com>
References: <E1MsxvX-0003KM-CR@bj8yhf1.ch3.sourceforge.com>
Message-ID: <4AC35D6B.5010805@dbtopas.lt>

Hi,


> Revision: 12628
>           http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12628&view=rev
> Author:   vszakats
> Date:     2009-09-30 12:04:58 +0000 (Wed, 30 Sep 2009)
> 
> Log Message:
> -----------
> 2009-09-30 13:53 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)

So, who is the author?

>   * INSTALL
>     + Added links to several new components.
>       I'd need input for bison/flex link, I didn't have any success 
>       making these work on Windows systems.

The last time I've used it, the solution was:
http://lists.harbour-project.org/pipermail/harbour/2009-January/014236.html


Regards,
Mindaugas
From mbelgrano at deltain.it  Wed Sep 30 09:41:21 2009
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Sep 30 09:41:48 2009
Subject: [Harbour] FWH 6.12 free of cost, legal download
In-Reply-To: <A886B422-3D50-436E-9B80-D47CED182DBE@syenar.hu>
References: <609353e70909270024s1a037681j6089e2c62f5ea76e@mail.gmail.com> 
	<A886B422-3D50-436E-9B80-D47CED182DBE@syenar.hu>
Message-ID: <609353e70909300641g678c034ds4e38a7742e23bbef@mail.gmail.com>

I confim tha problem on 64 bit system, and i have post problem on fivetech
forum
http://forums.fivetechsupport.com/viewtopic.php?f=3&t=16841&p=87535#p87535

IMO it include a spacial harbour version (borland,microsoft)

2009/9/28 Viktor Szak?ts <harbour.01@syenar.hu>

> Nice offer. But, unfortunately the installer has a Windows 16-bit
> stub, which makes it impossible to install it on 64-bit Windows
> systems.
>
> [ I wanted to check whether this FWH works with current Harbour. ]
>
> Brgds,
> Viktor
>
>
> On 2009 Sep 27, at 09:24, Massimo Belgrano wrote:
>
>  I notice follow news
>>
>> 2009/9/26 Antonio Linares <antonio.fivetech@gmail.com>:
>> - Nascondi testo citato -
>> > http://www.fivetechsoft.com/english/downloads.html
>> >
>> > --
>> > Antonio Linares
>> > www.fivetechsoft.com
>> >
>>
>> --
>> Massimo Belgrano
>>
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20090930/0cb40dc4/attachment.html
From harbour.01 at syenar.hu  Wed Sep 30 09:42:16 2009
From: harbour.01 at syenar.hu (=?iso-8859-1?Q?Viktor_Szak=E1ts?=)
Date: Wed Sep 30 09:42:26 2009
Subject: [Harbour] Re: Harbour under OS/2 - 12624
In-Reply-To: <4AC357C0.4020109@mail.udg.mx>
References: <4AC357C0.4020109@mail.udg.mx>
Message-ID: <CF111560-C802-44E3-B9B5-E25558D34379@syenar.hu>

> I do not see two-fold as layout messy
> In Harbour we have added, deleted, moved directories oftenly

Yes, to avoid mess :)
First mt is solved as subdir even in vm lib. Second we may
have other extra versions of .dll, such flat layout is IMO
very limiting and inelegant.

> And for additional objects, yes, I saw it as a future problem
> Two-fold was my temporary solution to build entirely Harbour in  
> either library format and is suggested as an optional way
>
> Current failure to build harbourm.dll must not stop us in other goals

What I'm suggesting it find the REAL solution
instead of resorting to hacks.

> >straightforward, simple and portable as possible, this
> >patch goes to the other direction.
>
> This goes in the same direction: simple and portable as possible

So we don't agree here. It's simple in the wrong way.
It shortcuts instead of implementing real solution.
You didn't answer to such thing for example, that now
you did create a potential problem if users are mixing
gcc3 and gcc4.

> It was explained since beginning
>
> os2gcc is not linuxgcc, darwingcc, sunosgcc, ... and any other gcc,  
> so os2gcc have/support other features and have specific needs

One of them is not a specific need, it's simply
to INCOMPATIBLE groups of gcc compilers: <= 3.3 and >= 3.4.

Hence gcc3 and gcc4 seems like a logical choice here.

> The only work we have to do is to manage these features in Harbour
>
>  set EMXOMFLD_TYPE=WLINK   ( or prefered choice )
>  set EMXOMFLD_LINKER=WL.EXE   ( or prefered choice )
> together with -Zomf are used by gcc itself to manage library format  
> as OMF in place of a.out
> Both values are not used by Harbour and belong to C compiler setting
> You can exclude any reference of these values in INSTALL and/or  
> Harbour but end-users may ignore them failing as consequence

As for this other choice and I think it just simply
adds something which nobody will find useful, let alone
understand why it's good. For me it looks like such an
exotic setup, that probably only you will eve use it.
But who will then test/support/maintain it? Who will
benefit?

> In fact, HB_OS2_OMF is not used in Harbour code in any place except  
> hbmk2.prg, because we need to inform hbmk2.prg that os2gcc manage  
> two choices
> Same is need for any other compiler where we change default values,  
> as library format in this case

In hbmk2 compiler choice is managed by -compiler= option.
And for consistency I'd like to keep it this way.

> A value as "set HB_OS2_OMF=yes" was my "simple as possible" proposal  
> for this need of os2gcc
> Perhaps we can discard this new ONE specific OS/2 value and manage  
> the two options of library format on os2gcc based ih other value,  
> for example "not empty EMXOMFLD_TYPE" environment value
> As in case of HB_OS2_OMF, "not empty EMXOMFLD_TYPE" must be used in
> config\os2\gcc.mk
> utils\hbmk2\hbmk2.prg
> implying it mean "OMF type" in place of "a.out type"
>
> In this way we do not need any new values in Harbour and any  
> reference in INSTALL of these two gcc values (we discarded  
> HB_OS2_OMF) and sucessful build of Harbour rely only on proper gcc  
> environment settings applied by end-user
>
> I see this choice against of spirit of INSTALL, when we suppose it  
> exist to help Harbour builders
> A new os2gcc value in Harbour (HB_OS_OMF) must not stop us in other  
> goals: support of OMF type and gcc4xx
>
> The work has been done and is just matter to include it to Harbour,  
> expanding Harbour capabilities, keeping it simple

IMO the work has been done in the wrong way.

The other, albeit still ugly option is to add _compiler
version_ as a new setting. This is quite much extra
work, so still gcc3/gcc4 compiler names are better here.

Brgds,
Viktor

From bedipritpal at hotmail.com  Wed Sep 30 13:40:26 2009
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Sep 30 13:40:33 2009
Subject: [Harbour] MEMIO - Some Clarifications
In-Reply-To: <4AC319A7.2090502@dbtopas.lt>
References: <25639924.post@talk.nabble.com> <4AC0BB9E.5090606@dbtopas.lt>
	<25675247.post@talk.nabble.com> <4AC319A7.2090502@dbtopas.lt>
Message-ID: <25685446.post@talk.nabble.com>


Hello


Mindaugas Kavaliauskas wrote:
> 
>>    ? alias(), used(), dbInfo( 10 )
>>    ? "dbDrop()      =>", DBDROP("mem:\test")         // Free memory
>> resource
>>    ? alias(), used(), dbInfo( 10 )                          // This
>> SHOULD
>> PRODUCE ERROR 
> 
> It should not, because workarea is not closed. File entry is removed 
> from directory after DBDROP(), but file content still exists.
> 

Now I am puzzled a bit.

It means DbDrop() only removes file entry from the directory
but does nothing with file contents. Am I right ?
OR if DbCloseArea() is issued prior to calling DbDrop(), it 
removes the file entry as well as file contents.

To me it appears logical that DbDrop() must never be succeeded 
unless file is closed, just like a disk file.

Can you provide more insight how MEMIO be used and what 
precautions one needs to take while adopting this protocol over 
disk-files ?

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/MEMIO---Some-Clarifications-tp25639924p25685446.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From phil at newstar.rinet.ru  Wed Sep 30 14:17:33 2009
From: phil at newstar.rinet.ru (Phil Krylov)
Date: Wed Sep 30 14:17:58 2009
Subject: [Harbour] MEMIO - Some Clarifications
In-Reply-To: <25685446.post@talk.nabble.com>
References: <25639924.post@talk.nabble.com> <4AC0BB9E.5090606@dbtopas.lt> 
	<25675247.post@talk.nabble.com> <4AC319A7.2090502@dbtopas.lt> 
	<25685446.post@talk.nabble.com>
Message-ID: <c10dbf450909301117l644e28e8sb9cdf633a87346e4@mail.gmail.com>

On Wed, Sep 30, 2009 at 9:40 PM, Pritpal Bedi <bedipritpal@hotmail.com> wrote:
> It means DbDrop() only removes file entry from the directory
> but does nothing with file contents. Am I right ?
> OR if DbCloseArea() is issued prior to calling DbDrop(), it
> removes the file entry as well as file contents.
>
> To me it appears logical that DbDrop() must never be succeeded
> unless file is closed, just like a disk file.

What you describe is Windows-only behavior. Under Unix you can unlink
any file from a directory you have write permissions on, even if the
file is open. When the file is actually closed, the number of
references to it becomes 0 and the file content is reclaimed.

-- Ph.
From dbtopas at dbtopas.lt  Wed Sep 30 14:39:04 2009
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Sep 30 14:39:41 2009
Subject: [Harbour] MEMIO - Some Clarifications
In-Reply-To: <25685446.post@talk.nabble.com>
References: <25639924.post@talk.nabble.com>
	<4AC0BB9E.5090606@dbtopas.lt>	<25675247.post@talk.nabble.com>
	<4AC319A7.2090502@dbtopas.lt> <25685446.post@talk.nabble.com>
Message-ID: <4AC3A5C8.7040806@dbtopas.lt>

Hi,

> Now I am puzzled a bit.
> 
> It means DbDrop() only removes file entry from the directory
> but does nothing with file contents. Am I right ?
> OR if DbCloseArea() is issued prior to calling DbDrop(), it 
> removes the file entry as well as file contents.
> 
> To me it appears logical that DbDrop() must never be succeeded 
> unless file is closed, just like a disk file.

Open file can be deleted on all unix systems, but not windows. It is 
very useful behaviour, for example if you want to delete (or replace by 
new version) a running executable. The new version will be used next 
time executable will be started. Actually I do not analyzed how DBDROP() 
works. MEMIO implementetion is at file system level. Perhaps windows 
like behaviour could be reached using some locking, but I'm not an 
expert here. MEMIO uses file content (perhaps it can be called inode) 
counter, after file is removed from directory and all open file handlers 
are closed, file is removed from file system. Here is one nice sample:
=========
mind@linux:~/devel_exp/tmp> cat test1.c
#include "stdio.h"
#include "dirent.h"

static void dirlist( void );

int main( void )
{
    FILE *  file;
    char    buf[ 16 ];

    if( ( file = fopen( "test1.txt", "w+" ) ) != NULL )
    {
       fwrite( "hello", 1, 5, file );
       dirlist();
       remove( "test1.txt" );
       dirlist();
       fseek( file, 0, 0 );
       fread( buf, 1, 5, file );
       printf( "File content: %.5s\n", buf );
       fclose( file );
    }
    return 0;
}

static void dirlist( void )
{
    DIR *            dir;
    struct dirent *  d;

    printf( "Dirlist:\n" );
    if( ( dir = opendir( "." ) ) != NULL )
    {
       while( ( d = readdir( dir ) ) != NULL )
          printf( "  %s\n", d->d_name );
       closedir( dir );
    }
}
mind@linux:~/devel_exp/tmp> ./a.out
Dirlist:
   test1.txt
   test1.c
   .
   ..
   a.out
Dirlist:
   test1.c
   .
   ..
   a.out
File content: hello
=========


> Can you provide more insight how MEMIO be used and what 
> precautions one needs to take while adopting this protocol over 
> disk-files ?

Locking is not supported by MEMIO driver. Temporary file creation is not 
supported because current IO driver architecture does not allow to 
implement it. File system has a "plain root directory", i.e. all files 
are placed in root and "/" or "\" character is just a common character 
in file name. So, "mem:aaa", "mem:\\\", "mem:/../\/\..''\../*$?::::" all 
are a valid file names.

Also, I have an idea some memory corruption exists. Sometimes we have a 
strange behavior in a complex Windows applications, but I'm unable to 
reproduce these errors in self contained samples or track them down 
using valgrind.


Regards,
Mindaugas
From druzus at users.sourceforge.net  Wed Sep 30 17:15:31 2009
From: druzus at users.sourceforge.net (druzus@users.sourceforge.net)
Date: Wed Sep 30 17:15:39 2009
Subject: [Harbour] SF.net SVN: harbour-project:[12629] trunk/harbour
Message-ID: <E1Mt6WJ-0001PQ-Ur@74yxhf1.ch3.sourceforge.com>

Revision: 12629
          http://harbour-project.svn.sourceforge.net/harbour-project/?rev=12629&view=rev
Author:   druzus
Date:     2009-09-30 21:15:30 +0000 (Wed, 30 Sep 2009)

Log Message:
-----------
2009-09-30 23:15 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/dbf1.c
  * harbour/source/rdd/delim1.c
  * harbour/source/rdd/sdf1.c
  * harbour/source/rdd/dbffpt/dbffpt1.c
  * harbour/source/rdd/dbfntx/dbfntx1.c
  * harbour/source/rdd/dbfnsx/dbfnsx1.c
  * harbour/source/rdd/dbfcdx/dbfcdx1.c
  * harbour/contrib/rddads/ads1.c
  * harbour/contrib/rddads/adsx.c
  * harbour/contrib/rddsql/sqlbase.c
  * harbour/contrib/rddsql/sqlmix.c
  * harbour/contrib/rddsql/sddmy/mysqldd.c
  * harbour/contrib/rddsql/sddpg/pgsqldd.c
  * harbour/contrib/rddsql/sddfb/fbirddd.c
  * harbour/contrib/rddsql/sddodbc/odbcdd.c
    * removed some old xHarbour macros

  * harbour/source/rdd/dbfcdx/dbfcdx1.c
    ! fixed sorting with code pages using accented characters with the
      same weight - it's necessary to disable some optimizations for
      such CPs. Thanks to Jaroslav Janik for the information and example.

Modified Paths:
--------------
    trunk/harbour/ChangeLog
    trunk/harbour/contrib/rddads/ads1.c
    trunk/harbour/contrib/rddads/adsx.c
    trunk/harbour/contrib/rddsql/sddfb/fbirddd.c
    trunk/harbour/contrib/rddsql/sddmy/mysqldd.c
    trunk/harbour/contrib/rddsql/sddodbc/odbcdd.c
    trunk/harbour/contrib/rddsql/sddpg/pgsqldd.c
    trunk/harbour/contrib/rddsql/sqlbase.c
    trunk/harbour/contrib/rddsql/sqlmix.c
    trunk/harbour/source/rdd/dbf1.c
    trunk/harbour/source/rdd/dbfcdx/dbfcdx1.c
    trunk/harbour/source/rdd/dbffpt/dbffpt1.c
    trunk/harbour/source/rdd/dbfnsx/dbfnsx1.c
    trunk/harbour/source/rdd/dbfntx/dbfntx1.c
    trunk/harbour/source/rdd/delim1.c
    trunk/harbour/source/rdd/sdf1.c


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.
From itamarlins at bol.com.br  Wed Sep 30 18:26:13 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Wed Sep 30 18:28:54 2009
Subject: [Harbour] xHarbour compatible Hwgui analog clock.
Message-ID: <ha0m1d$k3u$1@ger.gmane.org>

Hi!
This is program was created by Luis Basso, analog clock.
Works fine with xHarbour, with Harbour I get this is error:

error base/1001 Undefined function: HTIMER
Called from HTIME(0)
Called from HRELOGANALOGICO:ADDNEWOBJECT(297)
Called from HRELOGANALOGICO:CREATE(78)
Called from HRELOGANALOGICO:ACTIVATE(400)
Called from HCONTAINER:NEW(371)
Called from HRELOGANALOGICO:NEW(69)
Called from MAIN(28)

#include "hwgui.ch"
#include "hbclass.ch"

#IfnDef __XHARBOUR__
    REQUEST HB_GT_GUI
    ANNOUNCE HB_GTSYS
    REQUEST HB_GT_GUI_DEFAULT
#EndIf

STATIC Thisform


//FUNCTION HRELOGIO
Function Main()

 LOCAL oShape1, oRelogio1, oRelogio2, oRelogio3, oLabel1, oLabel2

  INIT DIALOG oDlg TITLE "Relgios Analgicos" ;
    AT 247,101 SIZE 441,247 ;
        FONT HFont():Add( 'Verdana',0,-13,400,,,) CLIPPER  NOEXIT  ;
     STYLE WS_POPUP+WS_CAPTION+WS_SYSMENU+WS_SIZEBOX+DS_CENTER  ;
             COLOR 12320767
    Thisform := oDlg

   @ 225,20 SAY oLabel1 CAPTION "Italia" TRANSPARENT SIZE 80,19
   @ 348,24 SAY oLabel2 CAPTION "Tokio"  TRANSPARENT SIZE 80,19

    oRelogio1 := HRelogAnalogico():New(,,150,150)
    oRelogio1:reset(29,21)
    oRelogio1:bcolor := rgb(255,255,255)
    oRelogio2 := HRelogAnalogico():New(202,56,100,100)
    oRelogio2:bcolor :=  7303167
    oRelogio2:fuso :=  3
    oRelogio3 := HRelogAnalogico():New(328,72,75,75)
    oRelogio3:bcolor := 16761220
    oRelogio3:fuso := 11

   @ 140,199 BUTTONEX oButtonex1 CAPTION "Close"  SIZE 161,32 ;
        STYLE WS_TABSTOP   ;
        ON CLICK {|| ThisForm:CLOSE()  }

   ACTIVATE DIALOG oDlg


RETURN oDlg:lresult


CLASS HRelogAnalogico INHERIT HContainer

  DATA oLabelTime
  DATA Fuso INIT 0

   METHOD NEW()
   METHOD INIT()
   METHOD Hora()
   METHOD Reset( nleft,nTop,nWidth,nHeigt )
   METHOD Visible( lVisible ) SETGET
   METHOD Penduricos( )
   METHOD Create()
  METHOD AddNewObject()

   END CLASS

   METHOD NEW( nleft,ntop,nwidth,nheight ) CLASS HRelogAnalogico

  nWidth := IIF(  nWidth = Nil ,150, nWidth )
  nHeight := IIF( nHeight = Nil ,150, nHeight )

  Super:New(,,,nLeft,nTop,nWidth+1,nHeight+1)
  ::lnoBorder := .T.

  RETURN Self

 METHOD CREATE() CLASS HRelogAnalogico
 // METHOD Activate() CLASS HRelogAnalogico

   IF !::lCreate
      ::addnewobject( "tmrTimer" ,"htimer" )
      ::addnewobject( "shpesfera" ,"hshape", {|This| shpesfera_Init( This, 
self ) })
      ::addNewobject( "oShapepino", 'HShape' )
      FOR lnI = 0 TO 55 STEP 5
          lcO := "shp"+TRANS(lnI,"@L 99")
          lcL := "lbl"+TRANS(lnI,"@L 99")
         lcO := ::addNewobject( lco, 'HShape' )
         lcL :=  ::addNewobject( lcL, 'HStatic' )
        NEXT
      ::LinHor := ::addNewobject( "LinHor", 'HLine' )
      ::LinMin := ::addNewobject( "LinMin", 'HLine' )
      ::LinSeg := ::addNewobject( "LinSeg", 'HLine' )
   ENDIF
   ::lCreate := .T.
   RETURN NIL

   METHOD Init CLASS HRelogAnalogico
      LOCAL lnCX,lnCY,lnH, lcL, lcO


   ::tmrTimer:baction := {|| ::Hora() }

  ::shpesfera:nLeft := 0
  ::shpesfera:nTop := 0
  ::shpesfera:nWidth := ::nWidth
  ::shpesfera:nHeight := ::nheight

  ::shpesfera:nCurvature := 360
  ::shpesfera:nfStyle := 10
  ::shpesfera:BCOLOR := ::bColor

      *--- Horas

      lnCX := ::nWIDTH / 2
      lnCY := ::nHEIGHT / 2

     WITH OBJECT ::oShapepino
        :nwidth = 8
        :nheight = 8
        :nborder = 1
      :nCurvature := 45
      :nfStyle := 10
      :setcolor(,96)
    END

      lnH := 0
      FOR lnI = 0 TO 55 STEP 5
        lcO := "shp"+TRANS(lnI,"@L 99")
        //lcL := "lbl"+TRANS(lnI,"@L 99")
        lnA := lnI * 6
       lcO := ::addNewobject( lco, 'HShape' )
       //lcL :=  ::addNewobject( lcL, 'HStatic' )
        WITH OBJECT  lcO
          :nwidth = 5 + int( ::nwidth/100 )
          :nheight = 5 + int( ::nheight/100 )
          :nborder = 2
          :ncurvature := 20
          :bcolor := 250
        END

      NEXT
  ::linHor:nBORDER := 5
  ::linHor:setCOLOR(RGB(0,0,255))
  ::linHor:LineSlant := "/"
  ::linHor:oPenLight := HPen():Add( BS_SOLID, 3, RGB(0,0,255) )
  ::linMin:nBORDER := 3
  ::linMin:LineSlant := "\"
  ::linMin:tCOLOR := RGB(0,0,255)
  ::linMin:oPenLight := HPen():Add( BS_SOLID, 2, RGB(0,0,255) )
  ::linSeg:nBORDER := 1
  ::linSeg:LineSlant := "/"
  ::linSeg:tCOLOR := RGB(0,0,255)
  ::linSeg:oPenLight := HPen():Add( BS_SOLID, 1, RGB(0,0,0) )
  ::Penduricos()
  ::tmrTimer:Interval := 1000
   ::Hora()

   RETURN Nil

  METHOD Penduricos CLASS HRelogAnalogico
      LOCAL lnCX,lnCY,lnH, lcL, lcO

     shpesfera_Init( ::shpesfera, Self )

       lnCX := ::nWIDTH / 2
      lnCY := ::nHEIGHT / 2
      ::oShapepino:nLeft :=  lnCX - 4
      ::oShapepino:nTop :=   lnCY - 4
      ::oShapepino:move()
      lnH := 0
      FOR lnI = 0 TO 55 STEP 5
        lnA := lnI * 6
      lcO := ::&("shp"+TRANS(lnI,"@L 99") )
      //lcL := ::&("lbl"+TRANS(lnI,"@L 99") )
        WITH OBJECT  lcO
        //*
          // SIN(DTOR(lnA+90))<0 parte de baixo
          :nTOP := :nTop + lnCY - (lnCY * SIN(DTOR(lnA+90))) + ;
            IIF(SIN(DTOR(lnA+90))<0,-6,IIF(SIN(DTOR(lnA+90))>0,0,-6))
          :nLEFT := :nLeft + lnCX - (lnCX * COS(DTOR(lnA+90))) + ;
            IIF(COS(DTOR(lnA+90))<0,-6,IIF(COS(DTOR(lnA+90))>0,0,-6))
          :move()
         */
         *:hide()
        END
    NEXT
    ::hora()
   RETURN Nil

   METHOD hora( ) CLASS HRelogAnalogico
      LOCAL ln, lnAng, lnCos, lnSen, ;
        lnCoI, lnCoD, lnSeI, lnSeD
     LOCAL lnCX, lnCY, lnA, lnX1, lnX2, lnY1, lnY2, lnC

      lnCX := ::nWIDTH / 2 //+ ::nLeft
      lnCY := ::nHEIGHT / 2 //+ ::nTop
      *--- Hora actual
      ln := SECONDS() + ( ::Fuso * 3600 )
      *--- Posi?o segundos
      lnA := INT(ln % 60) * 6

      lnC := .95
      lnX1 := MIN(lnCX - (lnCX * COS(DTOR(lnA + 90))) * lnC, lnCX)
      lnY1 := MIN(lnCY - (lnCY * SIN(DTOR(lnA + 90))) * lnC, lnCY)
      lnX2 := MAX(lnCX - (lnCX * COS(DTOR(lnA + 90))) * lnC, lnCX)
      lnY2 := MAX(lnCY - (lnCY * SIN(DTOR(lnA + 90))) * lnC, lnCY)
      ::linSeg:nTOP :=  lnY1 //+ ::nTop
      ::linSeg:nLEFT := lnX1 //+ ::nLeft
      ::linSeg:nHEIGHT := lnY2-lnY1 + 1
      ::linSeg:nWIDTH := lnX2 - lnX1 + 1
     ::linSeg:lineSLANT := IIF(((lnA>=0.and.lnA<=90) .OR. 
(lnA>=180.and.lnA<=270)),"/","\")

      *--- Posi?o minutos
      lnA := INT((ln / 60) % 60) * 6
      lnC := .75
      lnX1 := MIN(lnCX - (lnCX * COS(DTOR(lnA + 90))) * lnC, lnCX)
      lnY1 := MIN(lnCY - (lnCY * SIN(DTOR(lnA + 90))) * lnC, lnCY)
      lnX2 := MAX(lnCX - (lnCX * COS(DTOR(lnA + 90))) * lnC, lnCX)
      lnY2 := MAX(lnCY - (lnCY * SIN(DTOR(lnA + 90))) * lnC, lnCY)
      ::linMin:nTOP :=  lnY1 //+ ::nTop
      ::linMin:nLEFT := lnX1 //+ ::nLeft
      ::linMin:nHEIGHT := lnY2-lnY1 + 1
      ::linMin:nWIDTH := lnX2 - lnX1 + 1
      ::linMin:lineSLANT := IIF(((lnA>=0.and.lnA<=90) .OR. 
(lnA>=180.and.lnA<=270)),"/","\")
      *--- Posi?o horas
      lnA := ( (ln / 3600) % 12)* 30
      lnC := .55
      lnX1 := MIN(lnCX - (lnCX * COS(DTOR(lnA + 90))) * lnC, lnCX)
      lnY1 := MIN(lnCY - (lnCY * SIN(DTOR(lnA + 90))) * lnC, lnCY)
      lnX2 := MAX(lnCX - (lnCX * COS(DTOR(lnA + 90))) * lnC, lnCX)
      lnY2 := MAX(lnCY - (lnCY * SIN(DTOR(lnA + 90))) * lnC, lnCY)
      ::linHor:nTOP := lnY1 //+ ::nTop
      ::linHor:nLEFT := lnX1 //+ ::nLeft
      ::linHor:nHEIGHT := lnY2-lnY1 + 1
      ::linHor:nWIDTH := lnX2 - lnX1 + 1
    // horas
      ::linHor:lineSLANT := IIF(((lnA>=0.and.lnA<=90) .OR. 
(lnA>=180.and.lnA<=270)),"/","\")
    RedrawWindow(::linhor:handle,RDW_ERASE + RDW_INVALIDATE )
    ::linhor:move(::linhor:nLeft,::linhor:nTOP , ::linhor:nWidth, 
::linhor:nHeight)
    // minutos
    RedrawWindow(::linmin:handle,RDW_ERASE + RDW_INVALIDATE )
    ::linmin:move(::linmin:nLeft,::linmin:nTOP , ::linmin:nWidth, 
::linmin:nHeight)
    // segundos
    RedrawWindow(::linseg:handle,RDW_ERASE + RDW_INVALIDATE )
    ::linseg:move(::linseg:nLeft,::linseg:nTOP , ::linseg:nWidth, 
::linseg:nHeight)

    IF !empty( ::oLabelTime )
        ::olabeltime:caption := TIME() 
//str(::linmin:nwidth)+str(::linmin:nheight)
     ENDIF


   RETURN Nil

  METHOD Visible( lVisible )
  LOCAL  lnI, lcO,lcL
    IF lVisible != Nil
      IF lVisible
        ::TMRTIMER:Interval := 1000
      ELSE
        ::TMRTIMER:Interval := 0
      ENDIF
       if lvisible
          ::penduricos()
          ::shpesfera:INIT( ::shpesfera, self )
       endif
    ENDIF
    RETURN super:visible( lVisible )

   METHOD Reset( nLeft, nTop, nWidth, nHeight, tcolor, bcolor )
     LOCAL  lnI, lcO,lcL

    RedrawWindow( ::oParent:Handle, RDW_ERASE + RDW_INVALIDATE , ::nLeft, 
::nTop, ::nWidth , ::nHeight )
     ::nLeft   := nLeft
     ::nTop    := nTop
      ::nHeight := IIF( nHeight != Nil, nHeight, ::nHeight )
      ::nWidth  := IIF( nWidth != Nil, nWidth, ::nWidth )
     IF ::lINit
        ::penduricos()
        shpesfera_Init( ::shpesfera, Self )
      ENDIF
    ::move()

  RETURN Nil

METHOD AddNewObject( cName, cClass, bInit ) //CLASS HCustomWindow
   Local oSelf, cClassNew &&, oContainer
   Memvar oContainer
   Private oContainer

   IF EMPTY( cName ) .OR. EMPTY( cClass )
      RETURN Nil
   ENDIF
   oContainer := Self
   cClass := UPPER( cClass )
   IF oContainer:oParent != NiL
       cClassNew := "New( oContainer, , )"
   ELSE
       cClassNew := "New( , , )" // 0, 0, 0, 0 )"
   ENDIF
   oSelf := & ( cClass + "():" + cClassNew )
   IF VALTYPE( oSelf ) = "O"
      IF __objHasData( oSelf, "Name" )
         oSelf:Name := cName
      ELSE
         ADDPROPERTY( oSelf, "Name", cName )
      ENDIF
      ADDPROPERTY( oContainer, cName, oSelf )
      IF ISBLOCK( bInit )
         oSelf:bInit := bInit
         Eval( bInit, oSelf )
      ENDIF
   ENDIF
   Release oContainer
   RETURN oSelf

   FUNCTION shpesfera_Init( This, oParent  )

     This:nLeft   := 0 //oParent:nLeft+1
     This:nTop    := 0 //oParent:nTop+1
      THIS:nHEIGHT := oParent:nHEIGHT - 1
      THIS:nWIDTH  := oParent:nWIDTH - 1
      this:move()

   RETURN Nil


*
*-- EndDefine: relojanalogico
**************************************************




From itamarlins at bol.com.br  Wed Sep 30 18:32:46 2009
From: itamarlins at bol.com.br (Itamar Lins)
Date: Wed Sep 30 18:35:11 2009
Subject: [Harbour] Re: xHarbour compatible Hwgui analog clock.
References: <ha0m1d$k3u$1@ger.gmane.org>
Message-ID: <ha0mdl$l8d$1@ger.gmane.org>

Maybe this line not compatible with harbour,
   oSelf := & ( cClass + "():" + cClassNew )

Best regards,
Itamar M. Lins Jr. 



From mhsabado at gmail.com  Wed Sep 30 19:15:05 2009
From: mhsabado at gmail.com (Mario H. Sabado)
Date: Wed Sep 30 19:15:18 2009
Subject: [Harbour] Compile Error Using BCC 6.20
Message-ID: <4AC3E679.3050104@gmail.com>

Hi Viktor,

I have the following error when compiling Harbour under Windows XP using 
BCC 6.20.
**********************************************************
ilink32.exe -q -Gn -C -aa -Tpd -Gi -x  c0d32.obj @__dyn__.tmp
Error: Unresolved external 'WSAIoctl' referenced from 
D:\HARBOUR\SOURCE\RTL\OBJ\WIN\BCC\HBSOCKET_DYN.OBJ
Error: Unable to perform link
mingw32-make.exe[3]: *** [harbour-20-bcc.dll] Error 2
mingw32-make.exe[2]: *** [descend] Error 2
mingw32-make.exe[1]: *** [dynlib.inst] Error 2
mingw32-make.exe: *** [source.inst] Error 2

******************************************************
Thank you for any help.

Regards,
Mario

From april_white at sympatico.ca  Wed Sep 30 20:18:25 2009
From: april_white at sympatico.ca (April White)
Date: Wed Sep 30 20:18:33 2009
Subject: [Harbour] Re: xHarbour compatible Hwgui analog clock.
In-Reply-To: <ha0mdl$l8d$1@ger.gmane.org>
References: <ha0m1d$k3u$1@ger.gmane.org> <ha0mdl$l8d$1@ger.gmane.org>
Message-ID: <BLU0-SMTP31D849CA88764B9B97CF7DEFD30@phx.gbl>

Itamar Lins wrote:
> Maybe this line not compatible with harbour,
>    oSelf := & ( cClass + "():" + cClassNew )
>   

I do not have hbgui to try this, but I know that   
    & ( cClass + "()" )
works, I use it in hbdoc2.

Maybe the __objsendmsg function can be used.

	oSelf := __objSendMsg( &( cClass + "()" ), cClassNew )

April

-- 
When I was young, I was put in a school for retarded kids for two years before they realized I actually had a hearing loss. And they called ME slow!
- Kathy Buckley

From druzus at acn.waw.pl  Wed Sep 30 20:47:46 2009
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Sep 30 20:47:52 2009
Subject: [Harbour] xHarbour compatible Hwgui analog clock.
In-Reply-To: <ha0m1d$k3u$1@ger.gmane.org>
References: <ha0m1d$k3u$1@ger.gmane.org>
Message-ID: <20091001004746.GA20557@uran.home.aster.pl>

On Wed, 30 Sep 2009, Itamar Lins wrote:

Hi,

> This is program was created by Luis Basso, analog clock.
> Works fine with xHarbour,

Have you tried with *EXACTLY* the same code?
I know quite well both compilers internals and for me such
things are impossible.

> with Harbour I get this is error:
> error base/1001 Undefined function: HTIMER
> Called from HTIME(0)
              ^^^^^^^^
The most important question: is missing 'R' your typo?
If not then you are using seriously broken HVM and maybe
we will have to invest more time in this problem.
If yes then you have perfect error message so why you
haven't tried to read it and fix your problem?
Function HTIMER was not linked with your final application
and it's accessed by macrocompiler only so the problem is
not reported at link time. I think that you should read
some Clipper documentation about linkers and instruction for
   REQUEST <funcName>
statement. Please check what will happen if you add to your code:
   REQUEST HTIMER
It has the same behavior in Harbour, xHarbour and Clipper.

best regards,
Przemek
