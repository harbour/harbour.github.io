From bedipritpal at hotmail.com  Mon Dec  1 02:34:51 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Dec  1 02:34:54 2008
Subject: [Harbour] 2008-11-30 23:05 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20767241.post@talk.nabble.com>


2008-11-30 23:05 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/makefile
  * harbour/contrib/gtwvg/common.mak
    + wvgparts.ch
    + wincallb.c
    + wincback.prg
    + wvglistb.prg
    + wvgpushb.prg
    + wvgstatb.prg
    + wvgstatc.prg
    + wvgtreev.prg

  * harbour/contrib/gtwvg/wvggui.c
  * harbour/contrib/gtwvg/wvgsink.c
  * harbour/contrib/gtwvg/wvgutils.c
  * harbour/contrib/gtwvg/wvgwin.c
  * harbour/contrib/gtwvg/hbgtwvg.ch
  * harbour/contrib/gtwvg/wvgparts.ch
  * harbour/contrib/gtwvg/wvtwin.ch
  * harbour/contrib/gtwvg/wvgax.prg
  * harbour/contrib/gtwvg/wvgcrt.prg
  * harbour/contrib/gtwvg/wvgdlg.prg
  * harbour/contrib/gtwvg/wvgmenub.prg
  * harbour/contrib/gtwvg/wvgphdlr.prg
  * harbour/contrib/gtwvg/wvgtoolb.prg
  * harbour/contrib/gtwvg/wvgwnd.prg
    ! More synchronization, more events firings, etc.

  + harbour/contrib/gtwvg/wincback.prg
  + harbour/contrib/gtwvg/wincallb.c
    Now PRG/C level callback procedures/code blocks/methods 
    are made available by Andy Wos. A big thank you. 

       :nWndProc := HB_AsCallBack( 'MYWNDPROC', Self )

       METHOD MYWndProc( hWnd, nMessage, nwParam, nlParam )
          IF nMessage == WM_LBUTTONDOWN
             Win_MessageBox( , 'Prg level callback procedure!, 'Info' )
             RETURN 0
	  ENDIF
 
          RETURN 1

       Before this mechanism was available with only C callbacks which 
       were of limiting nature. It has made our life so easy.

  + harbour/contrib/gtwvg/wvglistb.prg
  + harbour/contrib/gtwvg/wvgcombo.prg
  + harbour/contrib/gtwvg/wvgpushb.prg
  + harbour/contrib/gtwvg/wvgstatb.prg
  + harbour/contrib/gtwvg/wvgstatc.prg
  + harbour/contrib/gtwvg/wvgtreev.prg
    + Added Xbase++ compatible new classes. 
       NOTE: Still a work-in-progress, subject to heavy changes.
       Basic functionality is working and class skeletons are in place.
       The partially functional classes added are:
          WvgStatusBar()
          WvgStatic()
          WvgPushButton()

  * harbour/contrib/gtwvg/tests/demowvg.prg
    + Added functionality of new classes.

    ; TOFIX: harbour/contrib/gtwvg/wvggui.c
             Przemek, can you please look into this stripped down
             version of gtwvg.c. It has memory leak in inkey() and 
             hb_gtInfo() functions. To test, just resize the window
             and exit, boooom, a big hb_out.log with above mem leak 
             entries. I am sure I just stripped some important loop
             but am unable to locate where.     

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-11-30-23%3A05-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20767241p20767241.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Mon Dec  1 02:51:31 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Dec  1 02:51:34 2008
Subject: [Harbour] 2008-11-30 23:49 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20767409.post@talk.nabble.com>


2008-11-30 23:49 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/wvggui.c
  * harbour/contrib/gtwvg/wvgdlg.prg
  * harbour/contrib/gtwvg/wvgphdlr.prg
  * harbour/contrib/gtwvg/wvgwnd.prg
    ! Cleanup - leftover trace calls.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-11-30-23%3A49-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20767409p20767409.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Mon Dec  1 04:07:55 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Dec  1 04:08:01 2008
Subject: [Harbour] 2008-11-30 23:05 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <20767241.post@talk.nabble.com>
References: <20767241.post@talk.nabble.com>
Message-ID: <609353e70812010107p751b1c7ei5a9a175e6e45383d@mail.gmail.com>

Very compliment!
for whath be use PRG/C level callback procedures?

2008/12/1 Pritpal Bedi <bedipritpal@hotmail.com>

>
> 2008-11-30 23:05 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>  * harbour/contrib/gtwvg/makefile
>  * harbour/contrib/gtwvg/common.mak
>    + wvgparts.ch
>    + wincallb.c
>    + wincback.prg
>    + wvglistb.prg
>    + wvgpushb.prg
>    + wvgstatb.prg
>    + wvgstatc.prg
>    + wvgtreev.prg
>
>  * harbour/contrib/gtwvg/wvggui.c
>  * harbour/contrib/gtwvg/wvgsink.c
>  * harbour/contrib/gtwvg/wvgutils.c
>  * harbour/contrib/gtwvg/wvgwin.c
>  * harbour/contrib/gtwvg/hbgtwvg.ch
>  * harbour/contrib/gtwvg/wvgparts.ch
>  * harbour/contrib/gtwvg/wvtwin.ch
>  * harbour/contrib/gtwvg/wvgax.prg
>  * harbour/contrib/gtwvg/wvgcrt.prg
>  * harbour/contrib/gtwvg/wvgdlg.prg
>  * harbour/contrib/gtwvg/wvgmenub.prg
>  * harbour/contrib/gtwvg/wvgphdlr.prg
>  * harbour/contrib/gtwvg/wvgtoolb.prg
>  * harbour/contrib/gtwvg/wvgwnd.prg
>    ! More synchronization, more events firings, etc.
>
>  + harbour/contrib/gtwvg/wincback.prg
>  + harbour/contrib/gtwvg/wincallb.c
>    Now PRG/C level callback procedures/code blocks/methods
>    are made available by Andy Wos. A big thank you.
>
>       :nWndProc := HB_AsCallBack( 'MYWNDPROC', Self )
>
>       METHOD MYWndProc( hWnd, nMessage, nwParam, nlParam )
>          IF nMessage == WM_LBUTTONDOWN
>             Win_MessageBox( , 'Prg level callback procedure!, 'Info' )
>             RETURN 0
>          ENDIF
>
>          RETURN 1
>
>       Before this mechanism was available with only C callbacks which
>       were of limiting nature. It has made our life so easy.
>
>  + harbour/contrib/gtwvg/wvglistb.prg
>  + harbour/contrib/gtwvg/wvgcombo.prg
>  + harbour/contrib/gtwvg/wvgpushb.prg
>  + harbour/contrib/gtwvg/wvgstatb.prg
>  + harbour/contrib/gtwvg/wvgstatc.prg
>  + harbour/contrib/gtwvg/wvgtreev.prg
>    + Added Xbase++ compatible new classes.
>       NOTE: Still a work-in-progress, subject to heavy changes.
>       Basic functionality is working and class skeletons are in place.
>       The partially functional classes added are:
>          WvgStatusBar()
>          WvgStatic()
>          WvgPushButton()
>
>  * harbour/contrib/gtwvg/tests/demowvg.prg
>    + Added functionality of new classes.
>
>    ; TOFIX: harbour/contrib/gtwvg/wvggui.c
>             Przemek, can you please look into this stripped down
>             version of gtwvg.c. It has memory leak in inkey() and
>             hb_gtInfo() functions. To test, just resize the window
>             and exit, boooom, a big hb_out.log with above mem leak
>             entries. I am sure I just stripped some important loop
>             but am unable to locate where.
>
> Regards
> Pritpal Bedi
> --
> View this message in context:
> http://www.nabble.com/2008-11-30-23%3A05-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20767241p20767241.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081201/0b157b55/attachment.html
From dbtopas at dbtopas.lt  Mon Dec  1 08:01:26 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Dec  1 07:59:59 2008
Subject: [Harbour] rddsql
In-Reply-To: <133778360811281552j4c994929l1a0b4e74e24a05f1@mail.gmail.com>
References: <133778360811281552j4c994929l1a0b4e74e24a05f1@mail.gmail.com>
Message-ID: <4933E026.5050400@dbtopas.lt>

Bruno Luciani wrote:
> Yes mindaugas I understand what do you say , I use DBF and RDDCDX
> but I like in future try other databases .
> 
> In your experiencies how is the perfomance of rddsql and mysql or postgres
> when you load a database , in a browse ? respect DBF ?
> 
> I hear that may be is not good in larger database, which is your experience ?
> 
> 
> thanks for your answers
> 
> Bruno

Hi,


I'm using rddsql to access mysql databases on web server. This make nice 
integration of desktop app and web. I've never tried to compare speed to 
DBF, etc, but it's more a question of SQL speed itself. RDD does not add 
any calculation or speed overhead, it just stores data in memory.

My web server database is not so large, so, I do not have experience.


Best regards,
Mindaugas
From adam_l at poczta.onet.pl  Mon Dec  1 11:15:09 2008
From: adam_l at poczta.onet.pl (Adam Lubszczyk)
Date: Mon Dec  1 11:15:13 2008
Subject: [Harbour] PRG Function as a Window's Callback Procedure
In-Reply-To: <20758851.post@talk.nabble.com>
References: <20758851.post@talk.nabble.com>
Message-ID: <20774496.post@talk.nabble.com>


Hi!

Pritpal Bedi wrote:
> 
> Hello
> 
> I am looking for a way ( I am sure it exists ) to do something 
> like this:
> 
> HB_FUNC( WIN_SETWNDPROC )
> {
>    HWND hWnd = ( HWND ) ( HB_PTRDIFF ) hb_parnint( 1 );
>    WNDPROC wndProc = ( WNDPROC ) ( HB_PTRDIFF ) hb_parnint( 2 );
>    WNDPROC oldProc;
> 
>    oldProc = ( WNDPROC ) SetWindowLong( hWnd, GWL_WNDPROC,( long ) wndProc
> ) ;
> 
>    hb_retnint( ( HB_PTRDIFF ) oldProc );
> }
> 
> and fron prg code :
> 
> METHOD MyMethod()
>    Win_SetWndProc( ::hWnd, @WndProc() )   // or LIKE
>    //   
>    Return Self
> 
> Function/Method WndProc( hWnd, nMessage, nwParam, nlParam )
>    // take action
>    Return 0
> 

Mayby You try like in HMG (Harbour MiniGUI) doing.

PROCEDURE main
LOCAL hWnd
hWnd := GetWindowHandle("NameWindow")

SetWindowProc(hWnd,.T.)
 ...
SetWindowProc(hWnd,.F.)
 ...
RETURN
**********
//window callback function in PRG
FUNCTION PrgWindowProc( hWnd, nMsg, wParam, ,lParam ) 
#define WM_MOUSEMOVE                    0x0200
#define WM_LBUTTONDOWN                  0x0201
#define WM_LBUTTONUP                    0x0202
DO CASE
   CASE nMsg == WM_MOUSEMOVE
           ...
        RETURN 1
   CASE nMsg == WM_LBUTTONDOWN
          ...  
   CASE nMsg == WM_LBUTTONUP
         ...
ENDCASE
RETURN 0
*******
#pragma BEGINDUMP
#include <windows.h>
#include <commctrl.h>
#include <wingdi.h>
#include <winuser.h>
#include "hbapi.h"
#include "hbvm.h"

LRESULT CALLBACK MyWindowProc (HWND hWin, UINT Msg, WPARAM wParam, LPARAM
lParam)
{
        static PHB_SYMB pSymbol = NULL;
        long int r;
        WNDPROC OldWndProc;

        OldWndProc = (WNDPROC)GetProp( hWin, "oldwindowproc" );

        switch( Msg )
        {
                case WM_DESTROY:

                        SetWindowLong( hWin, GWL_WNDPROC, (DWORD)OldWndProc
);
                        RemoveProp( hWin, "oldwindowproc" );
                        break;

                case WM_LBUTTONDOWN:
                case WM_LBUTTONUP:
                case WM_MOUSEMOVE:
                {
                        if ( ! pSymbol)
                        {
                                pSymbol = hb_dynsymSymbol( hb_dynsymGet(
"PRGWINDOWPROC" ));
                        }
                        if ( pSymbol )
                        {
                                hb_vmPushSymbol( pSymbol  );
                                hb_vmPushNil();
                                hb_vmPushLong( ( LONG ) hWin );
                                hb_vmPushLong( Msg );
                                hb_vmPushLong( wParam );
                                hb_vmPushLong( lParam );
                                hb_vmDo( 4 );
                        }
                        r = hb_parnl( -1 );

                        if ( r != 0 )
                        {
                                return r ;
                        }
                        else
                        {
                                return( CallWindowProc( OldWndProc, hWin,
Msg, wParam, lParam ) );
                        }
                }
        }

        return( CallWindowProc( OldWndProc, hWin, Msg, wParam, lParam ) );
}
//--------
HB_FUNC ( SETWINDOWPROC )   // SeWindowProc(hWindow,lSet)
{
   WNDPROC OldWndProc;
   HWND hWin = (HWND) hb_parnl(1) ;

   if( hb_parl(2) )
   {
     SetProp(  hWin, "oldwindowproc", (HWND) GetWindowLong(  hWin,
GWL_WNDPROC ) ) ;
     SetWindowLong( hWin, GWL_WNDPROC, (LONG)(WNDPROC)MyWindowProc ) ;
   }
   else
   {
      OldWndProc = (WNDPROC)GetProp( hWin, "oldwindowproc" );
      SetWindowLong( hWin, GWL_WNDPROC, (DWORD)OldWndProc );
      RemoveProp( hWin, "oldwindowproc" );
   }

}
#pragma ENDDUMP

-- 
View this message in context: http://www.nabble.com/PRG-Function-as-a-Window%27s-Callback-Procedure-tp20758851p20774496.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Mon Dec  1 11:24:11 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Dec  1 11:22:24 2008
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081128213258.GA20608@34-mo7-2.acn.waw.pl>
References: <20081105201105.GA26241@34-mo7-2.acn.waw.pl>
	<4912E7C2.6010801@dbtopas.lt>
	<10B32C8C-926E-455F-BD36-0F8236EBCBDA@syenar.hu>
	<491315D1.7030303@dbtopas.lt>
	<6B0D3378-AB28-4273-B24E-CD3D321FDD30@syenar.hu>
	<20081106172214.GA9967@34-mo7-2.acn.waw.pl>
	<492D46FA.9010808@dbtopas.lt>
	<20081127155323.GA25089@34-mo7-2.acn.waw.pl>
	<493008E0.9020503@dbtopas.lt>
	<20081128213258.GA20608@34-mo7-2.acn.waw.pl>
Message-ID: <20081201162410.GA12301@34-mo7-2.acn.waw.pl>

On Fri, 28 Nov 2008, Przemyslaw Czerpak wrote:

Hi Mindaugas,

> In this weekend or at the beginning of next one I'll try to create some
> basic core version.

I would like to ask you about permission to move your hb_compI18n*()
functions from hbmain.c to separate file with license having Harbour
exception. Can I do that?

best regards,
Przemek
From dbtopas at dbtopas.lt  Mon Dec  1 11:47:49 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Dec  1 11:46:15 2008
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20081201162410.GA12301@34-mo7-2.acn.waw.pl>
References: <20081105201105.GA26241@34-mo7-2.acn.waw.pl>	<4912E7C2.6010801@dbtopas.lt>	<10B32C8C-926E-455F-BD36-0F8236EBCBDA@syenar.hu>	<491315D1.7030303@dbtopas.lt>	<6B0D3378-AB28-4273-B24E-CD3D321FDD30@syenar.hu>	<20081106172214.GA9967@34-mo7-2.acn.waw.pl>	<492D46FA.9010808@dbtopas.lt>	<20081127155323.GA25089@34-mo7-2.acn.waw.pl>	<493008E0.9020503@dbtopas.lt>	<20081128213258.GA20608@34-mo7-2.acn.waw.pl>
	<20081201162410.GA12301@34-mo7-2.acn.waw.pl>
Message-ID: <49341535.5080406@dbtopas.lt>

Hi,


Przemyslaw Czerpak wrote:
> I would like to ask you about permission to move your hb_compI18n*()
> functions from hbmain.c to separate file with license having Harbour
> exception. Can I do that?

YES, of cause.


Best regards,
Mindaugas
From dbtopas at dbtopas.lt  Mon Dec  1 11:53:39 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Dec  1 11:52:09 2008
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20081128213258.GA20608@34-mo7-2.acn.waw.pl>
References: <E026792F-67F0-415C-BB19-95277B4CFA92@syenar.hu>	<20081105201105.GA26241@34-mo7-2.acn.waw.pl>	<4912E7C2.6010801@dbtopas.lt>	<10B32C8C-926E-455F-BD36-0F8236EBCBDA@syenar.hu>	<491315D1.7030303@dbtopas.lt>	<6B0D3378-AB28-4273-B24E-CD3D321FDD30@syenar.hu>	<20081106172214.GA9967@34-mo7-2.acn.waw.pl>	<492D46FA.9010808@dbtopas.lt>	<20081127155323.GA25089@34-mo7-2.acn.waw.pl>	<493008E0.9020503@dbtopas.lt>
	<20081128213258.GA20608@34-mo7-2.acn.waw.pl>
Message-ID: <49341693.9080300@dbtopas.lt>

Hi,


>> In Lithuanian language plural forms does not always solves the problem, 
>> because we need more that 2 word ending. AFAIK, the same problem is for 
>> Polish translations. I guess we can live without plurals.
> 
> This is resolved in gettext. At least for European languages.
> Usually it's possible to define some limited number of basic
> rules which depends on given number. F.e. in Polish there are
> 3 forms: for 1, for numbers ending with 2,3,4 except 11,12,...,19
> and for rest.
>    1 dom
>    2 domy, 3 domy, 4 domy, 22 domy, 34 domy
>    5 dom?w, 6 dom?w, 11 dom?w, 13 dom?w, 31 dom?w, 45 dom?w
> 
> In Lithuanian you have also 3 forms:
>    1. for numbers ending with 10, 11, 12, 13, ..., 19
>    2. for numbers ending with 1
>    3. for rest

I remembered the problem. I wanted to create app with Lithuanian source 
code language, but ngettext() is adopted for english source code.


>> Do you mean just an overloading of i18n C function by other module, or some 
>> more complex possibility to have alternative gettext?
> 
> I'm thinking about simple table with function address which can be
> overloaded using some public function so it will be possible to
> replace our default functions by user ones.

This can put some restrictions on Harbour's i18n implementation. We will 
have to be more GNU gettext compatible and could be more difficult to 
gave a different meaning of context or domains, etc. But if you'll find 
a solution for both Harbour's i18n and original getetxt, it would be great.


> I know about it and I agree that it's not strictly necessary but
> I do not know if people who do not use latin base languages will
> share this opinion.

If translation tables are not used
   cI := i18n_gettext("some text")
is equivalent to
   cI := "some text"

So, I don't think we must to input strings. Or... it should be a more 
general codepage solution for all strings of Harbour source.


> In our own implementation we can define different meaning for domain
> then the one which exists in gettext where inside each domain you
> have translations for different languages. 

In gettext each domain has translations for different libraries (not 
languages). (I guess you meant this, but it's just a typing error)

> When someone decide to
> use our own i18n implementation then usually need it only for his own
> application and does not need domains defined like for gettext.
> We can also use domains for context translations.
> It's our choice.

It would be great, if we can do this way. We support domains and it's 
programmers choice use it for libraries or contexts. The only problem to 
be solved is how to store domains. In original implementation domain 
translations are in different files, but translation for all contexts 
are in the same file. We will need to implement one more level in 
translation tables. Something like:
   {"LANGUAGE"=>"PL_PL", "CPID"=>"PLISO",
    "TABLE"=>{""/*no domain*/=>{...}, "DOMAIN1"=>{...}, ...}}


> And we can use domain as context signature for alternative translations.
> In such case when domain is given we will look for translation in given
> domain and if it's not found then in main domain.
> To resolve context problem we can also define some dummy pattern which
> will be eliminated by our own hb_strFormat() function and use it to create
> unique strings, f.e.:
>    "%1@Exit"
>    "%2@Exit"
> 
> %<n>@ will be replaced by empty string.

Yes. I'm currently using a similar solution, but it's a little hackish 
and that's why I do not like it a lot.


Best regards,
Mindaugas


From dbtopas at dbtopas.lt  Mon Dec  1 11:59:52 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Dec  1 11:58:17 2008
Subject: [Harbour] itemGetNL & dates
Message-ID: <49341808.2040008@dbtopas.lt>

Hi,


hb_itemGetNL() is implemented to return Julian date value instead of 0. 
Why? (IMHO, date is not numeric and hb_itemGetDL() should be used)


Best regards,
Mindaugas
From druzus at acn.waw.pl  Mon Dec  1 13:27:00 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Dec  1 13:25:12 2008
Subject: [Harbour] itemGetNL & dates
In-Reply-To: <49341808.2040008@dbtopas.lt>
References: <49341808.2040008@dbtopas.lt>
Message-ID: <20081201182700.GA26863@34-mo7-2.acn.waw.pl>

On Mon, 01 Dec 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> hb_itemGetNL() is implemented to return Julian date value instead of 0. 
> Why? (IMHO, date is not numeric and hb_itemGetDL() should be used)

I do not know. Probably for some historical reasons. In Clipper the
result of _itemGetNL( pDateItm ) is undefined and tests confirm it.
But _parnl( iParam ) seems to return Julian date when iParam is date
item. Probably some of conversions we have in hb_itemGet*() functions
are used to emulate unprotected access to ITEM internals in Clipper
in _itemGet*() functions. But I cannot say which ones and which were
added by Harbour developers as some type of Harbour extensions.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Dec  1 13:30:00 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Dec  1 13:28:11 2008
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <49341535.5080406@dbtopas.lt>
References: <10B32C8C-926E-455F-BD36-0F8236EBCBDA@syenar.hu>
	<491315D1.7030303@dbtopas.lt>
	<6B0D3378-AB28-4273-B24E-CD3D321FDD30@syenar.hu>
	<20081106172214.GA9967@34-mo7-2.acn.waw.pl>
	<492D46FA.9010808@dbtopas.lt>
	<20081127155323.GA25089@34-mo7-2.acn.waw.pl>
	<493008E0.9020503@dbtopas.lt>
	<20081128213258.GA20608@34-mo7-2.acn.waw.pl>
	<20081201162410.GA12301@34-mo7-2.acn.waw.pl>
	<49341535.5080406@dbtopas.lt>
Message-ID: <20081201183000.GB26863@34-mo7-2.acn.waw.pl>

On Mon, 01 Dec 2008, Mindaugas Kavaliauskas wrote:

Hi,

> Przemyslaw Czerpak wrote:
>> I would like to ask you about permission to move your hb_compI18n*()
>> functions from hbmain.c to separate file with license having Harbour
>> exception. Can I do that?
> YES, of cause.

Thank you. I'll also change it a little bit to store with lines real
file name with path instead of main module name so it will work correctly
for #included code and with gettext translation tools which can extract
source code context to help in translations.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Dec  1 13:58:13 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Dec  1 13:56:26 2008
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <49341693.9080300@dbtopas.lt>
References: <4912E7C2.6010801@dbtopas.lt>
	<10B32C8C-926E-455F-BD36-0F8236EBCBDA@syenar.hu>
	<491315D1.7030303@dbtopas.lt>
	<6B0D3378-AB28-4273-B24E-CD3D321FDD30@syenar.hu>
	<20081106172214.GA9967@34-mo7-2.acn.waw.pl>
	<492D46FA.9010808@dbtopas.lt>
	<20081127155323.GA25089@34-mo7-2.acn.waw.pl>
	<493008E0.9020503@dbtopas.lt>
	<20081128213258.GA20608@34-mo7-2.acn.waw.pl>
	<49341693.9080300@dbtopas.lt>
Message-ID: <20081201185813.GC26863@34-mo7-2.acn.waw.pl>

On Mon, 01 Dec 2008, Mindaugas Kavaliauskas wrote:

Hi,

>> In Lithuanian you have also 3 forms:
>>    1. for numbers ending with 10, 11, 12, 13, ..., 19
>>    2. for numbers ending with 1
>>    3. for rest
> I remembered the problem. I wanted to create app with Lithuanian source 
> code language, but ngettext() is adopted for english source code.

Yes, it is.
I also think about it. The same problem I have when I want to use
Polish as base language. I'm thinking about adding our own extension
for it, sth like:
   hb_gettext( { <cForm1> [, <cFormN>] } [, <cContext>], <nCount> )
or:
   hb_ngettext( <nCount>, { <cForm1> [, <cFormN>] } [, <cContext>] )
So it will be possible to use also non English languages as base.
In such case programmer will have to set plural index rule at application
startup. The default one will be: iif( n == 1, 1, 2 )
If there is translation with corresponding plural index but at least one
exists then we can use the 1-st one. In such case it will not be necessary
to repeat the same translations when the translated one has only one form
in given language.
In .pot file we may store base strings as:
   msgid "single form"
   msgid_plural "plural form 1"
   msgid_plural2 "plural form 2"
so as long as someone will use only two forms it will be gettext compatible.
msgid will be still main hash index and msgid_plural* will be used only as
optional results when nCount is given and and index created from nCount has
corresponding msgid_plural* entry.

What do you think about it?

best regards,
Przemek
From dbtopas at dbtopas.lt  Mon Dec  1 14:52:07 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Dec  1 14:50:33 2008
Subject: [Harbour] itemGetNL & dates
In-Reply-To: <20081201182700.GA26863@34-mo7-2.acn.waw.pl>
References: <49341808.2040008@dbtopas.lt>
	<20081201182700.GA26863@34-mo7-2.acn.waw.pl>
Message-ID: <49344067.7040001@dbtopas.lt>

>> hb_itemGetNL() is implemented to return Julian date value instead of 0. 
>> Why? (IMHO, date is not numeric and hb_itemGetDL() should be used)
> 
> I do not know. Probably for some historical reasons. In Clipper the
> result of _itemGetNL( pDateItm ) is undefined and tests confirm it.
> But _parnl( iParam ) seems to return Julian date when iParam is date
> item. Probably some of conversions we have in hb_itemGet*() functions
> are used to emulate unprotected access to ITEM internals in Clipper
> in _itemGet*() functions. But I cannot say which ones and which were
> added by Harbour developers as some type of Harbour extensions.

Hi,


I've check Clipper. It seems _itemGetNL() always return value and does 
not checks item's type at all. It returns object manager handle for 
strings, arrays and codeblocks, ds segment offsets (in low word of 
return value) for references and also half (4 bytes) of 8 byte double 
value. In our language _itemGetNL() is:
   LONG hb_itemGetNL( PHB_ITEM pItem )
   {
      return ( LONG ) pItem->item.asLong.value;
   }

_parnl() returns numeric values for long, date and double types and 0 
otherwise.


My problem was that I've used code:
   l = hb_itemGetNL( pItem );
instead of
   if ( HB_IS_NUMERIC( pItem ) )
   {
      l = hb_itemGetNL( pItem );
   }
   else
   {
      l = 0;
   }
hoping that return value is 0, if item type is not numeric. But it is 
not true for the dates.

I can live with it, but I would support removing Julian date value 
return from hb_itemGetNL() and hb_parnl() to make Harbour implementation 
more correct and error resistant. Clipper was using those functions for 
dates because there were no _itemGetDL() and _pardl() in Clipper. We 
have special function for the dates, so, there is no need to emulate 
side effects of Clipper.

It would be nice to hear other opinions.


Best regards,
Mindaugas
From dbtopas at dbtopas.lt  Mon Dec  1 15:43:37 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Dec  1 15:42:03 2008
Subject: [Harbour] 2008-11-01 21:13 UTC+0100 Przemyslaw
	Czerpak	(druzus/at/priv.onet.pl)
In-Reply-To: <20081201185813.GC26863@34-mo7-2.acn.waw.pl>
References: <4912E7C2.6010801@dbtopas.lt>	<10B32C8C-926E-455F-BD36-0F8236EBCBDA@syenar.hu>	<491315D1.7030303@dbtopas.lt>	<6B0D3378-AB28-4273-B24E-CD3D321FDD30@syenar.hu>	<20081106172214.GA9967@34-mo7-2.acn.waw.pl>	<492D46FA.9010808@dbtopas.lt>	<20081127155323.GA25089@34-mo7-2.acn.waw.pl>	<493008E0.9020503@dbtopas.lt>	<20081128213258.GA20608@34-mo7-2.acn.waw.pl>	<49341693.9080300@dbtopas.lt>
	<20081201185813.GC26863@34-mo7-2.acn.waw.pl>
Message-ID: <49344C79.1060605@dbtopas.lt>

Przemyslaw Czerpak wrote:
> Yes, it is.
> I also think about it. The same problem I have when I want to use
> Polish as base language. I'm thinking about adding our own extension
> for it, sth like:
>    hb_gettext( { <cForm1> [, <cFormN>] } [, <cContext>], <nCount> )
> or:
>    hb_ngettext( <nCount>, { <cForm1> [, <cFormN>] } [, <cContext>] )
> So it will be possible to use also non English languages as base.
> In such case programmer will have to set plural index rule at application
> startup. The default one will be: iif( n == 1, 1, 2 )
> If there is translation with corresponding plural index but at least one
> exists then we can use the 1-st one. In such case it will not be necessary
> to repeat the same translations when the translated one has only one form
> in given language.
> In .pot file we may store base strings as:
>    msgid "single form"
>    msgid_plural "plural form 1"
>    msgid_plural2 "plural form 2"
> so as long as someone will use only two forms it will be gettext compatible.
> msgid will be still main hash index and msgid_plural* will be used only as
> optional results when nCount is given and and index created from nCount has
> corresponding msgid_plural* entry.
> 
> What do you think about it?

Hi,


that would be great! GNU gettext developers should hear you.


Regards,
Mindaugas

From druzus at acn.waw.pl  Tue Dec  2 05:28:47 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Dec  2 05:26:58 2008
Subject: [Harbour] 2008-12-02 11:27 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081202102847.GA4536@34-mo7-2.acn.waw.pl>

2008-12-02 11:27 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/xhb/Makefile
  * harbour/contrib/xhb/common.mak
  + harbour/contrib/xhb/xhbarr.c
    + added aSplice(), aRemove() and aMerge() functions - code borrowed
      from xHarbour by Ron Pinkas.
    ! fixed GPF trap in these functions

  * harbour/contrib/xhb/xhbfunc.c
    + added CSTR()

  * harbour/contrib/xhb/hbcompat.ch
    ! changed name of xHarbour include files - they where changed few
      months ago and now they are the same as in Harbour.
      To xHarbour users: please update hbcompat.ch in xHarbour CVS

  * harbour/contrib/xhb/filestat.c
    ! fixed UNICODE compilation

  * harbour/contrib/xhb/hblognet.prg
  * harbour/contrib/xhb/hblog.prg
    * formatting

  * harbour/contrib/hbnf/tempfile.prg
    ! do not use HB_ISBYREF() .prg function - this function does not
      exist in Harbour and does not work correctly in xHarbour

  * harbour/include/hbapiitm.h
  * harbour/source/vm/macro.c
  * harbour/source/vm/codebloc.c
  * harbour/source/vm/hashes.c
  * harbour/source/vm/garbage.c
  * harbour/source/vm/itemapi.c
  * harbour/source/vm/memvars.c
    * cleanup

  * harbour/contrib/gtwvg/Makefile
    ! fixed typo

  * harbour/contrib/gtwvg/hbgtwvg.ch
    * added new line at the end of file and changed non ANSI C // comments
      to /* */ - this file is included by C code too.

  * harbour/contrib/gtwvg/wvgwin.c
  * harbour/contrib/gtwvg/wincallb.c
    * pacified some warnings and fixed possible access to uninitialized data

  * harbour/source/compiler/harbour.y
  * harbour/source/compiler/harbour.yyc
    ! fixed possible double freeing of memory blocks in #line directives
      TOMERGE[1.0]

  * harbour/common.mak
  * harbour/source/compiler/hbmain.c
  + harbour/source/compiler/compi18n.c
    * moved hb_compI18n*() functions to separate file covered by GPL with
      Harbour exception - Thank to Mindaugas

  * harbour/include/hbcomp.h
  * harbour/include/hbcompdf.h
  * harbour/include/hbexpra.c
  * harbour/include/hbexprop.h
  * harbour/include/hbexprb.c
  * harbour/source/common/expropt1.c
  * harbour/source/compiler/Makefile
  * harbour/source/compiler/ppcomp.c
    * added support for plural forms:
         hb_i18n_ngettext[_noop|_strict]( <nExp>, <cText> | <acText> ;
                                          [, <cContext> )
      <acText> is accepted only as array of literal strings even if
      _strict suffix is missing - if it's a problem then we can change it.
      hb_i18n_ngettext_noop() is reduced only when it has valid parameters
      The default plural index expression used for reduction at compile
      time is: iif( <nExp> == 1, 1, 2 )
      If second parameter of hb_i18n_ngettext_noop() is <cText> or <acText>
      length is 1 then it's reduced to <cText> or acText[1] else if second
      parameter is <acText> with more then 1 item then it's reduced to
         <acText>[ iif( <nExp> == 1, 1, 2 ) ]
      and if <nExp> is literal numeric expression is farther reduced to
      given array item. Otherwise is not reduced and warning is generated.
      The plural forms in .pot files are generated as:
         msgid ""
         msgid_plural ""
         msgid_plural2 ""
         [...]
         msgid_pluralN ""
         msgstr[0] ""
      Then real message ID is only msgid (with context if any) and
      msgid_plural* is used only for information. When the same msgid
      is used more then once in different hb_i18n_ngettext*() calls then
      plural messages are merged.
      Please remember that for strict gettext compatibility only two plural
      forms are allowed.
    * extended i18n warnings for simple types validation, f.e.:
         hb_i18n_gettext( .t. )
    * do not generate empty .pot file when source code does not contain any
      hb_i18n_*() functions
    * store in .pot files references to real source file names with paths
      respecting #include directives
    * use hb_compIdentifierNew() to hash i18n messages at compile time
    ! fixed possible bad escape encoding of i18n strings
    + added support to control -j[01] flag using #pragma directive

      Before I'll begin to work on runtime support please test these
      modifications and inform me about problems you can see with the
      above version and missing functionality.

best regards
Przemek
From druzus at acn.waw.pl  Tue Dec  2 07:48:15 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Dec  2 07:46:25 2008
Subject: [Harbour] 2008-12-02 13:48 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081202124815.GA17923@34-mo7-2.acn.waw.pl>

2008-12-02 13:48 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/common/hbstr.c
  * harbour/config/w32/xcc.cf
    ! fixed XCC compilation

  * harbour/contrib/gtwvg/wvgwin.c
    ! changed _MAX_PATH to MAX_PATH - not all compilers support _MAX_PATH

best regards
Przemek
From cvc at oohg.org  Tue Dec  2 07:50:41 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Tue Dec  2 07:50:48 2008
Subject: [Harbour] about close in gtwvg
Message-ID: <49352F21.3060304@oohg.org>


Hi all:

if I don't want close the program clicking on close button(upper right).

What can I do?

regards
Ciro


-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From mbelgrano at deltain.it  Tue Dec  2 08:50:54 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Dec  2 08:50:58 2008
Subject: [Harbour] about close in gtwvg
In-Reply-To: <49352F21.3060304@oohg.org>
References: <49352F21.3060304@oohg.org>
Message-ID: <609353e70812020550q79793053p74a7ffd10762c56f@mail.gmail.com>

you can go  to a row where you have follow command:
QUIT


2008/12/2 Ciro Vargas Clemow <cvc@oohg.org>

>
> Hi all:
>
> if I don't want close the program clicking on close button(upper right).
>
> What can I do?
>
> regards
> Ciro
>
>
> --
> http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the
> no2imp and clip2win home )
>
> http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more
> powerfull )
>
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081202/0958b839/attachment-0001.html
From zen25000 at zen.co.uk  Tue Dec  2 09:51:50 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Tue Dec  2 09:51:53 2008
Subject: [Harbour] Building xhgtk library
Message-ID: <20793726.post@talk.nabble.com>


I am trying to build xhgtk library in Linux. 
I have extracted xhgtk_20080616.zip to /home/baz/xhgtk then:-

[baz@jackodesktop xhgtk]$ ./build.sh                              
bash: ./build.sh: Permission denied

If I make build.sh executable, then:-

[baz@jackodesktop xhgtk]$ ./build.sh
: command not found
: command not found
: No such file or directory
'.  Stop. No rule to make target `Makefile
: command not found:
[baz@jackodesktop xhgtk]$

I have also tried the above as root although I am sure that is not needed.
What am I doing wrong?


-- 
View this message in context: http://www.nabble.com/Building-xhgtk-library-tp20793726p20793726.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Tue Dec  2 10:10:38 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Dec  2 10:10:42 2008
Subject: [Harbour] about close in gtwvg
In-Reply-To: <49352F21.3060304@oohg.org>
References: <49352F21.3060304@oohg.org>
Message-ID: <20794110.post@talk.nabble.com>


Hi


Ciro Vargas Clemow wrote:
> 
> if I don't want close the program clicking on close button(upper right).
> 

hb_gtInfo( HB_GTI_CLOSABLE, .F. )

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/about-close-in-gtwvg-tp20792138p20794110.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From rodrmigu at gmail.com  Tue Dec  2 10:26:56 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Tue Dec  2 10:27:01 2008
Subject: [Harbour] Re: Building xhgtk library Click to flag this post
Message-ID: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>

Hi,

Try just:  make

Regards
Rodrigo
From druzus at acn.waw.pl  Tue Dec  2 12:44:03 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Dec  2 12:42:14 2008
Subject: [Harbour] 2008-11-30 23:05 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <20767241.post@talk.nabble.com>
References: <20767241.post@talk.nabble.com>
Message-ID: <20081202174403.GA26665@34-mo7-2.acn.waw.pl>

On Sun, 30 Nov 2008, Pritpal Bedi wrote:

Hi Pritpal,

>   * harbour/contrib/gtwvg/tests/demowvg.prg
>     + Added functionality of new classes.
>     ; TOFIX: harbour/contrib/gtwvg/wvggui.c
>              Przemek, can you please look into this stripped down
>              version of gtwvg.c. It has memory leak in inkey() and 
>              hb_gtInfo() functions. To test, just resize the window
>              and exit, boooom, a big hb_out.log with above mem leak 
>              entries. I am sure I just stripped some important loop
>              but am unable to locate where.     

I tried to replicated it but I cannot.
Can you create small self contain example with it?

best regards,
Przemek
From abe.buch at att.net  Tue Dec  2 12:43:26 2008
From: abe.buch at att.net (Abeb)
Date: Tue Dec  2 12:43:29 2008
Subject: [Harbour] BMDBFCDX
Message-ID: <20796838.post@talk.nabble.com>


as I understand this RDD should work as follows.

mAry := { 10,20,40}
BM_DBSETFILTERARRAY( MARY  )
go top // record 10  <<-------error here
skip     //record 20
go bottom //record 40

browse() //see just these 3 records 

but i get an error 
ERROR BASE/1004  No exported method:
 EVAL
-- 
View this message in context: http://www.nabble.com/BMDBFCDX-tp20796838p20796838.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From zen25000 at zen.co.uk  Tue Dec  2 14:42:37 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Tue Dec  2 14:42:41 2008
Subject: [Harbour] Re: Building xhgtk library Click to flag this post
In-Reply-To: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
Message-ID: <49358FAD.5040002@zen.co.uk>

That seems to try to compile errorsys.prg
-------------
[baz@jackodesktop xhgtk]$ make
/harbour source/errorsys.prg -b -m -n -w -I -Iinclude  -oobj/errorsys.c
make: /harbour: Command not found
make: *** [obj/errorsys.c] Error 127
-------------

The README says :-
 Building the library

    - Linux/Unix or Mingw with Msys

        cd /xhgtk
        ./build.sh   or    sh build.sh

I wish there was more information about the build process!
I just want to USE the library with Harbour but am getting
nowhere trying to install it.
I have tried setting the env vars for the paths as suggested
in the README to the locations that I think Harbour uses, but
that breaks regular Harbour compiles. Again I lack documentation.
Where does Harbour get it's path info for lib, include etc.?
Any help would be appreciated.

Rodrigo Miguel wrote:
> Hi,
>
> Try just:  make
>
> Regards
> Rodrigo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>   
From zen25000 at zen.co.uk  Tue Dec  2 18:43:29 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Tue Dec  2 18:43:32 2008
Subject: [Harbour] Building xhgtk library Click to flag this post
In-Reply-To: <49358FAD.5040002@zen.co.uk>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<49358FAD.5040002@zen.co.uk>
Message-ID: <20803655.post@talk.nabble.com>


OK slowly getting somewhere - the 'make' is now getting further after
spending all night sorting out the paths.
Now installing gtk.

Barry Jackson wrote:
> 
> I have tried setting the env vars for the paths as suggested
> in the README to the locations that I think Harbour uses, but
> that breaks regular Harbour compiles.
> 

-- 
View this message in context: http://www.nabble.com/Re%3A-Building-xhgtk-library-Click-to-flag-this-post-tp20794596p20803655.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Wed Dec  3 03:07:01 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Dec  3 03:09:32 2008
Subject: [Harbour] 2008-10-22
	05:03UTC+0200PrzemyslawCzerpak(druzus/at/priv.onet.pl)
In-Reply-To: <20081022182347.GA20493@34-mo7-2.acn.waw.pl>
References: <20081022175820.GA32561@34-mo7-2.acn.waw.pl>
	<AFB948164110ED43B5EB849E8DEEF03815F0B7@SRV02.deltain.net>
	<20081022182347.GA20493@34-mo7-2.acn.waw.pl>
Message-ID: <609353e70812030007h5d5c48d8ycd2d9896e831c6ef@mail.gmail.com>

some news regarding hbmk.prg?
 Thanks in advance

2008/10/22 Przemyslaw Czerpak <druzus@acn.waw.pl>

> On Wed, 22 Oct 2008, Massimo Belgrano wrote:
>
>
> > Now HBMK is aivable also for BCC?
>
> It's .bat file with some limited functionality in comparison to
> hbmk scripts which replaced bld*.bat files.
> If I'll find spare time to make some cleanups in hbmk.prg then I'll
> commit it to SVN. It should give similar to hb* script functionality
> on platforms which does not support bourne shell. But it will have to
> be updated for non-GCC based compilers. I added only BCC.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081203/c3bb9027/attachment.html
From mbelgrano at deltain.it  Wed Dec  3 05:17:17 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Dec  3 05:20:13 2008
Subject: [Harbour] Harbour and crystal report
In-Reply-To: <012401c82c58$12810a50$ca64fea9@emag>
References: <00ab01c82c22$67d56e50$ca64fea9@emag>
	<D15F2688-BAB8-4802-821D-7BA097845CDF@syenar.hu>
	<00e901c82c2b$705120c0$ca64fea9@emag>
	<AFB948164110ED43B5EB849E8DEEF03815E5A0@SRV02.deltain.net>
	<012501c82c32$aacf04e0$ca64fea9@emag> <474426B3.5060403@oohg.org>
	<AFB948164110ED43B5EB849E8DEEF03815E5A4@SRV02.deltain.net>
	<47444E9E.9050601@oohg.org> <012401c82c58$12810a50$ca64fea9@emag>
Message-ID: <609353e70812030217u7a632271n1d113d8ef2d85732@mail.gmail.com>

Is aivable a way for use crystal report 2008?

2007/11/21 Enrico Maria Giordano <e.m.giordano@emagsoftware.it>

>
> -----Messaggio Originale-----
> Da: "Ciro Vargas Clemow" <cvc@oohg.org>
> A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
> Data invio: mercoled? 21 novembre 2007 16.28
> Oggetto: Re: [Harbour] Harbour and crystal report
>
>
> > An example
> >
> > oCrystal := TOleAuto():New( "Crystal.CRPE.Application" )
> > oCRReport := oCrystal:OpenReport( ".\impagen.rpt" )
> > oCRReport:Preview( "", 0, 0, 0, 0)
>
> This won't work with CR9 and newer releases.
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081203/e70bea2d/attachment.html
From miguelangel at marchuet.net  Wed Dec  3 06:38:18 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Wed Dec  3 06:38:39 2008
Subject: [Harbour] BMDBFCDX
In-Reply-To: <20796838.post@talk.nabble.com>
References: <20796838.post@talk.nabble.com>
Message-ID: <49366FAA.7050100@marchuet.net>

please post self contained example of bug.
Abeb escribi?:
> as I understand this RDD should work as follows.
> 
> mAry := { 10,20,40}
> BM_DBSETFILTERARRAY( MARY  )
> go top // record 10  <<-------error here
> skip     //record 20
> go bottom //record 40
> 
> browse() //see just these 3 records 


I supose you use

SET OPTIMIZE ON
mAry := { 10,20,40}

DbSetFilter( {|| .F. } )

BM_DBSETFILTERARRAY( mAry )
From rodrmigu at gmail.com  Wed Dec  3 08:47:31 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Wed Dec  3 08:50:38 2008
Subject: [Harbour] Re: Building xhgtk library Click to flag this post
In-Reply-To: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
Message-ID: <80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>

HI,

Your environment: is not configured properly. Check this out:

http://xhgtk.sourceforge.net/config12.html

> That seems to try to compile errorsys.prg
> -------------
> [baz@jackodesktop xhgtk]$ make
> /harbour source/errorsys.prg -b -m -n -w -I -Iinclude  -oobj/errorsys.c
> make: /harbour: Command not found
> make: *** [obj/errorsys.c] Error 127
> -------------

Regards,
Rodrigo
From e.m.giordano at emagsoftware.it  Wed Dec  3 09:51:15 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Dec  3 09:51:20 2008
Subject: [Harbour] Harbour and crystal report
References: <00ab01c82c22$67d56e50$ca64fea9@emag><D15F2688-BAB8-4802-821D-7BA097845CDF@syenar.hu><00e901c82c2b$705120c0$ca64fea9@emag><AFB948164110ED43B5EB849E8DEEF03815E5A0@SRV02.deltain.net><012501c82c32$aacf04e0$ca64fea9@emag>
	<474426B3.5060403@oohg.org><AFB948164110ED43B5EB849E8DEEF03815E5A4@SRV02.deltain.net><47444E9E.9050601@oohg.org>
	<012401c82c58$12810a50$ca64fea9@emag>
	<609353e70812030217u7a632271n1d113d8ef2d85732@mail.gmail.com>
Message-ID: <41BB79934F804E9C84077403EE47CABC@emag>


-----Messaggio Originale----- 
Da: "Massimo Belgrano" <mbelgrano@deltain.it>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoled? 3 dicembre 2008 11.17
Oggetto: Re: [Harbour] Harbour and crystal report


> Is aivable a way for use crystal report 2008?

This is a FWH sample for CR9. I don't know if it works for CR2008 too:

#include "Fivewin.ch"


FUNCTION MAIN()

    LOCAL oCrystal := CREATEOBJECT( "CrystalRuntime.Application" )
    LOCAL oReport  := oCrystal:OpenReport( "PROVA.RPT" )

    LOCAL oWnd, oCRViewer

    DEFINE WINDOW oWnd

    oCRViewer = TActiveX():New( oWnd, "CRViewer9.CRViewer" )

    oCRViewer:SetProp( "ReportSource", oReport )
    oCRViewer:Do( "ViewReport" )

    oWnd:oClient = oCRViewer

    ACTIVATE WINDOW oWnd;
             MAXIMIZED

    RETURN NIL

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From zen25000 at zen.co.uk  Wed Dec  3 09:55:34 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Wed Dec  3 09:55:38 2008
Subject: [Harbour] Re: Building xhgtk library Click to flag this post
In-Reply-To: <80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
Message-ID: <49369DE6.4060803@zen.co.uk>

Thanks Rodrigo,
Is there a translation of this site anywhere in English ?
I have tried to read it but I do not understand enough.
I have modified my bash-profile and now I think it is correct for my
Harbour installation.
# xhgtk env vars
        export HB_PATH=/usr
        export HB_ARCHITECTURE=linux
        export HB_COMPILER=gcc
        export HB_GT_LIB=gtsln
        export HB_MULTI_GT=NO
        export HB_PREF=hb
        export HB_BIN_INSTALL=$HB_PATH/bin
        export HB_LIB_INSTALL=$HB_PATH/lib/harbour
        export HB_INC_INSTALL=$HB_PATH/include/harbour
        export PATH=$HB_PATH/bin:$PATH

With this env setting my Harbour compiles build correctly.
These paths for Harbour were set at install by the rpm.
I cannot test more until I get gtk+ installed properly and it is taking 
time to
find all the dependencies.


Rodrigo Miguel wrote:
> HI,
>
> Your environment: is not configured properly. Check this out:
>
> http://xhgtk.sourceforge.net/config12.html
From druzus at acn.waw.pl  Wed Dec  3 10:13:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Dec  3 10:11:58 2008
Subject: [Harbour] Re: Building xhgtk library Click to flag this post
In-Reply-To: <80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
Message-ID: <20081203151351.GA5156@34-mo7-2.acn.waw.pl>

On Wed, 03 Dec 2008, Rodrigo Miguel wrote:

Hi,

> Your environment: is not configured properly. Check this out:
> http://xhgtk.sourceforge.net/config12.html

Maybe instead of setting environment it will be easier to use
[x]hb* scripts?
Personally I do not like when people change them too much because
later we have reports about strange problems when they mix different
[x]harbur versions and/or Harbour and xHarbour header files or libraries.

To build XHGTK in POSIX environment where Harbour or xHarbour is installed
with [x]hb* scripts it's enough to execute:
   ./make_gtk.sh
for XHGTK directory and it will detect installed [x]Harbour version
and compile everything without setting any environment variables.
I think that it will be good to create RPMs with XHGTK also with
XHGTK shared library what can resolve the problem with setting
external dependencies. When shared library is created it's possible
to bind with this library also all other necessary libs so later
when final executable is created use can use only -lxhgtk without
any other switches like `pkg-config --libs gtk+-2.0 libglade-2.0`
I'll try to create xhgtk.spec file and commit it in a while. It will
build two binary RPMs: 'xhgtk' with xhgtk shared library and 'xhgtk-devel'
with static library and header files.
Pure xhgtk RPM will be usable for Harbour shared application linked with
XHGTK. It will resolve the problem with huge GTK dependencies. User can
distribute his shared binaries which will request only xhgtk lib so it
will be enough to install this library compiled for given OS.
It's also the solution for problem with contrib libraries which needs
3-rd party tools. We should add support to distribute them as shared
libraries with internal dependencies to 3-rd party tools so Harbour
user can simply link their application with them by -l<name> switch
without any additional references to other libs.

best regards,
Przemek
From mbelgrano at deltain.it  Wed Dec  3 10:31:16 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Dec  3 10:31:21 2008
Subject: [Harbour] Harbour and crystal report
In-Reply-To: <41BB79934F804E9C84077403EE47CABC@emag>
References: <00ab01c82c22$67d56e50$ca64fea9@emag>
	<00e901c82c2b$705120c0$ca64fea9@emag>
	<AFB948164110ED43B5EB849E8DEEF03815E5A0@SRV02.deltain.net>
	<012501c82c32$aacf04e0$ca64fea9@emag> <474426B3.5060403@oohg.org>
	<AFB948164110ED43B5EB849E8DEEF03815E5A4@SRV02.deltain.net>
	<47444E9E.9050601@oohg.org> <012401c82c58$12810a50$ca64fea9@emag>
	<609353e70812030217u7a632271n1d113d8ef2d85732@mail.gmail.com>
	<41BB79934F804E9C84077403EE47CABC@emag>
Message-ID: <609353e70812030731n23f190edi232e416a57feb42@mail.gmail.com>

any chance using gtwvg?

2008/12/3 Enrico Maria Giordano <e.m.giordano@emagsoftware.it>

>
> -----Messaggio Originale----- Da: "Massimo Belgrano" <mbelgrano@deltain.it
> >
> A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
> Data invio: mercoled? 3 dicembre 2008 11.17
> Oggetto: Re: [Harbour] Harbour and crystal report
>
>
>  Is aivable a way for use crystal report 2008?
>>
>
> This is a FWH sample for CR9. I don't know if it works for CR2008 too:
>
> #include "Fivewin.ch"
>
>
> FUNCTION MAIN()
>
>   LOCAL oCrystal := CREATEOBJECT( "CrystalRuntime.Application" )
>   LOCAL oReport  := oCrystal:OpenReport( "PROVA.RPT" )
>
>   LOCAL oWnd, oCRViewer
>
>   DEFINE WINDOW oWnd
>
>   oCRViewer = TActiveX():New( oWnd, "CRViewer9.CRViewer" )
>
>   oCRViewer:SetProp( "ReportSource", oReport )
>   oCRViewer:Do( "ViewReport" )
>
>   oWnd:oClient = oCRViewer
>
>   ACTIVATE WINDOW oWnd;
>            MAXIMIZED
>
>   RETURN NIL
>
>
> EMG
>
> --
> EMAG Software Homepage:     http://www.emagsoftware.it
> The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
> The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
> The EMG Music page:         http://www.emagsoftware.it/emgmusic
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081203/c5ae6b20/attachment.html
From mbelgrano at deltain.it  Wed Dec  3 10:40:30 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Dec  3 10:40:35 2008
Subject: [Harbour] harbour compiler on facebook?
Message-ID: <609353e70812030740k14623681m8989825b874f1a3f@mail.gmail.com>

I want create an harbour compiler group on facebook
it can be a group for developer and for user
anybody who apreciate this project can join
Anybody is intrested?
Can i create an harbour compiler group on facebook?
Wich is better title?
Harbour Compiler
Harbour Languages
Harbour Project
Harbour The better languages Of the World?

-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081203/88bf156d/attachment.html
From lorenzo.fiorini at gmail.com  Wed Dec  3 10:41:49 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Dec  3 10:41:54 2008
Subject: [Harbour] Re: Building xhgtk library Click to flag this post
In-Reply-To: <20081203151351.GA5156@34-mo7-2.acn.waw.pl>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
	<20081203151351.GA5156@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0812030741q35655889x36f70d19139a4e11@mail.gmail.com>

On Wed, Dec 3, 2008 at 4:13 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> On Wed, 03 Dec 2008, Rodrigo Miguel wrote:
>
> Hi,
>
>> Your environment: is not configured properly. Check this out:
>> http://xhgtk.sourceforge.net/config12.html
>
> Maybe instead of setting environment it will be easier to use
> [x]hb* scripts?

I'm preparing a source "distribution" which is mostly:
Harbour-
everything not gcc/gnu+
xhgtk

I mean it'll work only under *nix, osx and msys/mingw env.
xhgtk will be added as a contrib.
The paths will be the Harbour ones

Every sample can be built simply using hbmk -n <sample.prg> -gtk under
lin, win and osx.

best regards,
Lorenzo
From druzus at acn.waw.pl  Wed Dec  3 10:54:05 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Dec  3 10:52:13 2008
Subject: [Harbour] Re: Building xhgtk library Click to flag this post
In-Reply-To: <9257026e0812030741q35655889x36f70d19139a4e11@mail.gmail.com>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
	<20081203151351.GA5156@34-mo7-2.acn.waw.pl>
	<9257026e0812030741q35655889x36f70d19139a4e11@mail.gmail.com>
Message-ID: <20081203155405.GA15363@34-mo7-2.acn.waw.pl>

On Wed, 03 Dec 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> > Maybe instead of setting environment it will be easier to use
> > [x]hb* scripts?
> I'm preparing a source "distribution" which is mostly:
> Harbour-
> everything not gcc/gnu+
> xhgtk
> I mean it'll work only under *nix, osx and msys/mingw env.
> xhgtk will be added as a contrib.
> The paths will be the Harbour ones
> Every sample can be built simply using hbmk -n <sample.prg> -gtk under
> lin, win and osx.

Very good news :-)
Anyhow if you are using -gtk hb* switch then it suggests that
dependencies are not inside xhgtk library what can create problem
when final environment does not use exactly the same GTK version
with compatible list of dependencies.
I'll commit in a while xhgtk.spec file. Please test. Maybe you will
find some things interesting. F.e. it should be possible to link
final application using only -lxhgtk. Read the xhgtk changelog file
for details.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Dec  3 11:09:06 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Dec  3 11:07:12 2008
Subject: [Harbour] Re: Building xhgtk library Click to flag this post
In-Reply-To: <20081203155405.GA15363@34-mo7-2.acn.waw.pl>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
	<20081203151351.GA5156@34-mo7-2.acn.waw.pl>
	<9257026e0812030741q35655889x36f70d19139a4e11@mail.gmail.com>
	<20081203155405.GA15363@34-mo7-2.acn.waw.pl>
Message-ID: <20081203160905.GA2315@34-mo7-2.acn.waw.pl>

On Wed, 03 Dec 2008, Przemyslaw Czerpak wrote:
> I'll commit in a while xhgtk.spec file.

Just committed.
   2008-12-03 16:54 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Wed Dec  3 11:46:37 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Dec  3 11:46:41 2008
Subject: [Harbour] Re: Building xhgtk library Click to flag this post
In-Reply-To: <20081203160905.GA2315@34-mo7-2.acn.waw.pl>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
	<20081203151351.GA5156@34-mo7-2.acn.waw.pl>
	<9257026e0812030741q35655889x36f70d19139a4e11@mail.gmail.com>
	<20081203155405.GA15363@34-mo7-2.acn.waw.pl>
	<20081203160905.GA2315@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0812030846q5a8c7359x41361c3e38f8e6e9@mail.gmail.com>

On Wed, Dec 3, 2008 at 5:09 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> Just committed.
>   2008-12-03 16:54 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)

I'll check.

best regards,
Lorenzo
From druzus at acn.waw.pl  Wed Dec  3 11:53:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Dec  3 11:51:58 2008
Subject: [Harbour] itemGetNL & dates
In-Reply-To: <49344067.7040001@dbtopas.lt>
References: <49341808.2040008@dbtopas.lt>
	<20081201182700.GA26863@34-mo7-2.acn.waw.pl>
	<49344067.7040001@dbtopas.lt>
Message-ID: <20081203165351.GA6403@34-mo7-2.acn.waw.pl>

On Mon, 01 Dec 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> I've check Clipper. It seems _itemGetNL() always return value and does not 
> checks item's type at all. It returns object manager handle for strings, 
> arrays and codeblocks, ds segment offsets (in low word of return value) for 
> references and also half (4 bytes) of 8 byte double value. In our language 
> _itemGetNL() is:
>   LONG hb_itemGetNL( PHB_ITEM pItem )
>   {
>      return ( LONG ) pItem->item.asLong.value;
>   }

Yes, in Clipper all _itemGet*() functions seems to work without any type
verification and current Harbour code tries to emulate the Clipper results.

> _parnl() returns numeric values for long, date and double types and 0 
> otherwise.
> My problem was that I've used code:
>   l = hb_itemGetNL( pItem );
> instead of
>   if ( HB_IS_NUMERIC( pItem ) )
>      l = hb_itemGetNL( pItem );
>   else
>      l = 0;
> hoping that return value is 0, if item type is not numeric. But it is not 
> true for the dates.

I also do not like it. Such "helper" conversions create more troubles
and force adding additional code to protect against them.

> I can live with it, but I would support removing Julian date value return 
> from hb_itemGetNL() and hb_parnl() to make Harbour implementation more 
> correct and error resistant. Clipper was using those functions for dates 
> because there were no _itemGetDL() and _pardl() in Clipper. We have special 
> function for the dates, so, there is no need to emulate side effects of 
> Clipper.

The main problem is compatibility with Clipper .c code.
Maybe we should add separate functions which will be more restrictive.
Here is also yet another problem I do not like very much.
hb_par*() and hb_stor*() functions accept optional parameter as array
index. It means that functions like:
   HB_FUNC( MYFUNC )
   {
      hb_retnd( hb_parnd( 1 ) * 3.14 );
   }

can access uninitialized memory when user pass array as 1-st parameter
   myfunc( {} )
depending on architecture it may cause unpredictable behavior.
In x86 hb_par*() functions use as optional parameter function
return address or some unused part of stack and then this value
is used as array index and may return some random array item.
Nothing very wrong happens and application still run (though maybe
it makes sth different then expected ;-)) but on some other machines
which have hardware stack frame protection it may even cause GPF.
To eliminate it we should always pass additional 0 parameter to
hb_par*() and hb_stor*() functions. But it's also not enough because
the optional parameter is extracted as ULONG (it's not Clipper
compatible where optional parameter is int) which may have different
size then int which is used as default for constant values so this
additional parameter must be casted also to ULONG too. BTW we should
fix in Harbour source code all calls to hb_par*() and hb_stor*()
which uses optional parameter as constant value without any casting.
So the above code to not produce any bad side effects should be change
to:

   HB_FUNC( MYFUNC )
   {
      hb_retnd( hb_parnd( 1, ( ULONG ) 0 ) * 3.14 );
   }

Personally I'd prefer to eliminate it.
I'd suggest to add functions which will not use optional parameter
or even better changed existing ones (it will nicely help to locate
code which uses optional parameters during compilation so it can be
easy fixed) and add new Clipper compatible functions updating #define
translations in our extend.api.

best regards,
Przemek
From toninhofwi at yahoo.com.br  Wed Dec  3 13:06:21 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Dec  3 12:01:22 2008
Subject: [Harbour] 2008-12-03 15:05 UTC-0300 Antonio Carlos Pantaglione
Message-ID: <9jidj41e3pek5hjd1c3rdc5t8pid0seehj@4ax.com>

2008-12-03 15:05 UTC-0300 Antonio Carlos Pantaglione
   * contrib/hbziparc/hbziparc.prg
     ! hb_UnzipFile() to accept empty password like ""

Regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From mbelgrano at deltain.it  Wed Dec  3 12:18:28 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Dec  3 12:18:31 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
Message-ID: <609353e70812030918s490aa702sb57a57b857855cfc@mail.gmail.com>

Compliment for good work
Imo this website is ready to be active


2008/10/27 Vailton Renato <vailtom@gmail.com>

> Hi all!
>
> I am of opinions on the page DOCUMENTATION > SAMPLES of the new site.
> I need to know if I'm on the right track and if all agree that the
> layout'm riding, because it is very difficult and full of details - if
> you have to redo then will take a lot of work. :(
>
> My intention would be easy to assemble a page to show some features of
> Harbor and give prominence to its features, especially where visitors
> could view the code and how would the screen.
>
> We have also upgraded the sentence at the top of the site and the
> links to download versions of the homepage.
>
> I await comments, criticisms and suggestions, the URL is:
> http://harbour-project.org/preview2/samples.html
>
> Thank you
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour




-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081203/beac630d/attachment.html
From mbelgrano at deltain.it  Wed Dec  3 12:25:33 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Dec  3 12:25:38 2008
Subject: [Harbour] Re: harbour compiler on facebook?
In-Reply-To: <609353e70812030740k14623681m8989825b874f1a3f@mail.gmail.com>
References: <609353e70812030740k14623681m8989825b874f1a3f@mail.gmail.com>
Message-ID: <609353e70812030925p69aa3280q4ecd60e51510412c@mail.gmail.com>

Now is created an harbour group on facebook
http://www.facebook.com/groups/edit.php?customize&gid=48795263775#/group.php?gid=48795263775

I invite everybody post as photo screenshot of application made with
harbour!
Post library used and little description of application
So we have a big collection of this works


2008/12/3 Massimo Belgrano <mbelgrano@deltain.it>

> I want create an harbour compiler group on facebook
> it can be a group for developer and for user
> anybody who apreciate this project can join
> Anybody is intrested?
> Can i create an harbour compiler group on facebook?
> Wich is better title?
> Harbour Compiler
> Harbour Languages
> Harbour Project
> Harbour The better languages Of the World?
>
> --
> Massimo Belgrano
>
>
>


-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081203/33b78236/attachment.html
From e.m.giordano at emagsoftware.it  Wed Dec  3 12:26:47 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Dec  3 12:26:52 2008
Subject: [Harbour] Harbour and crystal report
References: <00ab01c82c22$67d56e50$ca64fea9@emag><00e901c82c2b$705120c0$ca64fea9@emag><AFB948164110ED43B5EB849E8DEEF03815E5A0@SRV02.deltain.net><012501c82c32$aacf04e0$ca64fea9@emag>
	<474426B3.5060403@oohg.org><AFB948164110ED43B5EB849E8DEEF03815E5A4@SRV02.deltain.net><47444E9E.9050601@oohg.org>
	<012401c82c58$12810a50$ca64fea9@emag><609353e70812030217u7a632271n1d113d8ef2d85732@mail.gmail.com><41BB79934F804E9C84077403EE47CABC@emag>
	<609353e70812030731n23f190edi232e416a57feb42@mail.gmail.com>
Message-ID: <6905B1D5FAC84DDA9DB9D96550B2C951@emag>


-----Messaggio Originale----- 
Da: "Massimo Belgrano" <mbelgrano@deltain.it>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: mercoled? 3 dicembre 2008 16.31
Oggetto: Re: [Harbour] Harbour and crystal report


> any chance using gtwvg?

I don't know.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Wed Dec  3 12:36:34 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Dec  3 12:34:41 2008
Subject: [Harbour] 2008-12-03 18:35 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081203173634.GA6589@34-mo7-2.acn.waw.pl>

2008-12-03 18:35 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/common/hbstr.c
    ! added missing call to va_end() in hb_snprintf()

  * harbour/source/vm/classes.c
    + added internal helper function __objSetClass()

  * harbour/source/rtl/valtoexp.prg
    * set class in expressions serialized by hb_valToExp()

  * harbour/source/rtl/valtostr.c
    % optimized hb_strToExp()

  * harbour/contrib/xhb/hbcompat.ch
    ! removed unnecessary conversion for HB_ISPOINTER() in xHarbour part.

best regards
Przemek
From abe.buch at att.net  Wed Dec  3 12:38:08 2008
From: abe.buch at att.net (Abeb)
Date: Wed Dec  3 12:38:12 2008
Subject: [Harbour] BMDBFCDX
In-Reply-To: <49366FAA.7050100@marchuet.net>
References: <20796838.post@talk.nabble.com> <49366FAA.7050100@marchuet.net>
Message-ID: <20817771.post@talk.nabble.com>



Same results. does it work for you?


Miguel Angel Marchuet wrote:
> 
> please post self contained example of bug.
> Abeb escribi?:
>> as I understand this RDD should work as follows.
>> 
>> mAry := { 10,20,40}
>> BM_DBSETFILTERARRAY( MARY  )
>> go top // record 10  <<-------error here
>> skip     //record 20
>> go bottom //record 40
>> 
>> browse() //see just these 3 records 
> 
> 
> I supose you use
> 
> SET OPTIMIZE ON
> mAry := { 10,20,40}
> 
> DbSetFilter( {|| .F. } )
> 
> BM_DBSETFILTERARRAY( mAry )
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/BMDBFCDX-tp20796838p20817771.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Wed Dec  3 12:53:48 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Dec  3 12:51:54 2008
Subject: [Harbour] BMDBFCDX
In-Reply-To: <20817771.post@talk.nabble.com>
References: <20796838.post@talk.nabble.com> <49366FAA.7050100@marchuet.net>
	<20817771.post@talk.nabble.com>
Message-ID: <20081203175347.GA21282@34-mo7-2.acn.waw.pl>

On Wed, 03 Dec 2008, Abeb wrote:

Hi,

> Same results. does it work for you?

Miguel asked you if you made sth like that.
It was not proposition of code modification.
Just simply he need self contain example to
verify were is the problem. So far the RT error
you reported suggests it's a problem in your
code.
Of course if I'm wrong Miguel will verify me.

best regards,
Przemek
From bedipritpal at hotmail.com  Wed Dec  3 13:06:03 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Dec  3 13:06:06 2008
Subject: [Harbour] Harbour and crystal report
In-Reply-To: <609353e70812030731n23f190edi232e416a57feb42@mail.gmail.com>
References: <00ab01c82c22$67d56e50$ca64fea9@emag>
	<D15F2688-BAB8-4802-821D-7BA097845CDF@syenar.hu>
	<00e901c82c2b$705120c0$ca64fea9@emag>
	<AFB948164110ED43B5EB849E8DEEF03815E5A0@SRV02.deltain.net>
	<012501c82c32$aacf04e0$ca64fea9@emag> <474426B3.5060403@oohg.org>
	<AFB948164110ED43B5EB849E8DEEF03815E5A4@SRV02.deltain.net>
	<47444E9E.9050601@oohg.org> <012401c82c58$12810a50$ca64fea9@emag>
	<609353e70812030217u7a632271n1d113d8ef2d85732@mail.gmail.com>
	<41BB79934F804E9C84077403EE47CABC@emag>
	<609353e70812030731n23f190edi232e416a57feb42@mail.gmail.com>
Message-ID: <20817801.post@talk.nabble.com>


Massimo

Try

Function Main()
   Local hThread := hb_threadStart( {|| MyCrystalViewer() } )

  do while .t.
     if inkey() == 27
       exit
     endif
  enddo
  
   hb_threadJoin( hThread )
 
   Return nil

Function MyCrystalViewer()
   LOCAL oCrystal := CREATEOBJECT( "CrystalRuntime.Application" )
   LOCAL oReport  := oCrystal:OpenReport( "PROVA.RPT" )
   LOCAL oDlg, oActvX

   oDlg := WvgDialog():New():Create( , ,  { 20,20 }, { 600,400 }, , .t. )
   
   oActvX:= WvgActiveXControl():New( oDlg:drawingArea )
   oActvX:CLSID := "CRViewer9.CRViewer"
   oActvX:create( , , {0,0}, oDlg:currentSize(), .t. )
   oActvX:ReportSource := oReport
   oActvX:Do( "ViewReport" )          // I do not know how it must behave
   oActvX:resize := {||  oActvX:setPosAndSize( {0,0}, oDlg:currentSize(),
.t. ) }

   do while .t.
      if inkey() == 27
         exit
      endif
   enddo

   oDlg:destroy()
   Return nil

It is direct on keyboard, please correct any mistakes in typing.

Regards
Pritpal Bedi


Massimo Belgrano-3 wrote:
> 
> any chance using gtwvg?
> 
>> #include "Fivewin.ch"
>>
>>
>> FUNCTION MAIN()
>>
>>   LOCAL oCrystal := CREATEOBJECT( "CrystalRuntime.Application" )
>>   LOCAL oReport  := oCrystal:OpenReport( "PROVA.RPT" )
>>
>>   LOCAL oWnd, oCRViewer
>>
>>   DEFINE WINDOW oWnd
>>
>>   oCRViewer = TActiveX():New( oWnd, "CRViewer9.CRViewer" )
>>
>>   oCRViewer:SetProp( "ReportSource", oReport )
>>   oCRViewer:Do( "ViewReport" )
>>
>>   oWnd:oClient = oCRViewer
>>
>>   ACTIVATE WINDOW oWnd;
>>            MAXIMIZED
>>
>>   RETURN NIL
> 

-- 
View this message in context: http://www.nabble.com/hbwin32.lib-tp13874002p20817801.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From abe.buch at att.net  Wed Dec  3 14:25:56 2008
From: abe.buch at att.net (Abeb)
Date: Wed Dec  3 14:25:58 2008
Subject: [Harbour] BMDBFCDX
In-Reply-To: <20081203175347.GA21282@34-mo7-2.acn.waw.pl>
References: <20796838.post@talk.nabble.com> <49366FAA.7050100@marchuet.net>
	<20817771.post@talk.nabble.com>
	<20081203175347.GA21282@34-mo7-2.acn.waw.pl>
Message-ID: <20819770.post@talk.nabble.com>


sample code i tried, and getting that error. I also tried setting a to an
index order.
-------------------
USE ITEMS   VIA "BMDBFCDX" NEW
set optimize on
DbSetFilter( {|| .f. } ) //tried .t. as well
BM_DBSETFILTERARRAY( {10,20,30} )
go top // <- error
browse()
-------------------------

Przemyslaw Czerpak-2 wrote:
> 
> On Wed, 03 Dec 2008, Abeb wrote:
> 
> Hi,
> 
>> Same results. does it work for you?
> 
> Miguel asked you if you made sth like that.
> It was not proposition of code modification.
> Just simply he need self contain example to
> verify were is the problem. So far the RT error
> you reported suggests it's a problem in your
> code.
> Of course if I'm wrong Miguel will verify me.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/BMDBFCDX-tp20796838p20819770.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Wed Dec  3 15:05:46 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Dec  3 15:05:49 2008
Subject: [Harbour] 2008-11-30 23:05 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <20081202174403.GA26665@34-mo7-2.acn.waw.pl>
References: <20767241.post@talk.nabble.com>
	<20081202174403.GA26665@34-mo7-2.acn.waw.pl>
Message-ID: <20820540.post@talk.nabble.com>


Hello Przemek


Przemyslaw Czerpak-2 wrote:
> 
>>   * harbour/contrib/gtwvg/tests/demowvg.prg
>>     + Added functionality of new classes.
>>     ; TOFIX: harbour/contrib/gtwvg/wvggui.c
>>              Przemek, can you please look into this stripped down
>>              version of gtwvg.c. It has memory leak in inkey() and 
>>              hb_gtInfo() functions. To test, just resize the window
>>              and exit, boooom, a big hb_out.log with above mem leak 
>>              entries. I am sure I just stripped some important loop
>>              but am unable to locate where.     
> 
> I tried to replicated it but I cannot.
> Can you create small self contain example with it?
> 

Please ignore. I did a silly mistake in WM_NOTIFY message.

Code before:

      case WM_NOTIFY:
      {
         PHB_ITEM pEvParams = hb_itemNew( NULL );
         LPNMMOUSE nmm = ( LPNMMOUSE ) lParam;
         NMHDR nmh = nmm->hdr;

         if( nmh.code == NM_CLICK )
         {
            hb_arrayNew( pEvParams, 5 );
            hb_arraySetNI( pEvParams, 1, ( int ) wParam );
            hb_arraySetNInt( pEvParams, 2, ( HB_PTRDIFF ) nmh.hwndFrom );
            hb_arraySetNI( pEvParams, 3, nmh.idFrom );
            hb_arraySetNI( pEvParams, 4, nmh.code );
            hb_arraySetNL( pEvParams, 5, nmm->dwItemSpec );

            hb_gt_wvt_FireEvent( pWVT, HB_GTE_NOTIFY, pEvParams );

            hb_itemRelease( pEvParams );
            return TRUE;
         }
         break;
      }

Code after:

      case WM_NOTIFY:
      {
         LPNMMOUSE nmm = ( LPNMMOUSE ) lParam;
         NMHDR nmh = nmm->hdr;

         if( nmh.code == NM_CLICK )
         {
            PHB_ITEM pEvParams = hb_itemNew( NULL );

            hb_arrayNew( pEvParams, 5 );
            hb_arraySetNI( pEvParams, 1, ( int ) wParam );
            hb_arraySetNInt( pEvParams, 2, ( HB_PTRDIFF ) nmh.hwndFrom );
            hb_arraySetNI( pEvParams, 3, nmh.idFrom );
            hb_arraySetNI( pEvParams, 4, nmh.code );
            hb_arraySetNL( pEvParams, 5, nmm->dwItemSpec );

            hb_gt_wvt_FireEvent( pWVT, HB_GTE_NOTIFY, pEvParams );

            hb_itemRelease( pEvParams );
            return TRUE;
         }
         break;
      }

And it took me 2 days to figureout. Poor me.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-11-30-23%3A05-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20767241p20820540.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Wed Dec  3 15:13:19 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Dec  3 15:11:26 2008
Subject: [Harbour] BMDBFCDX
In-Reply-To: <20819770.post@talk.nabble.com>
References: <20796838.post@talk.nabble.com> <49366FAA.7050100@marchuet.net>
	<20817771.post@talk.nabble.com>
	<20081203175347.GA21282@34-mo7-2.acn.waw.pl>
	<20819770.post@talk.nabble.com>
Message-ID: <20081203201319.GA4549@34-mo7-2.acn.waw.pl>

On Wed, 03 Dec 2008, Abeb wrote:

Hi,

> sample code i tried, and getting that error. I also tried setting a to an
> index order.
> -------------------
> USE ITEMS   VIA "BMDBFCDX" NEW
> set optimize on
> DbSetFilter( {|| .f. } ) //tried .t. as well
> BM_DBSETFILTERARRAY( {10,20,30} )
> go top // <- error
> browse()
> -------------------------

This is not self contain example.
It cannot be linked and it does not have ITEMS table.
When user does not give self contain example which can be easy compiled
he forces that such example will be created by developer and it does
not eliminate possible user typos so very often is waste of time checking
them. Please rember about it in the future. It will help users because
can receive answer faster and developers because they can invest more
time in other modifications then creating real self contain examples
which can be compiled and tested until they will not find the one
which exploits the problem or they will be informed that user located
the problem in his source code.
In this case the problem is cause by this code in bmdbfcdx.c[6817]

      pArea->dbfi.itmCobExpr = hb_itemPutC( NULL, NULL );

It cannot work. I do not know why Miguel added it so I cannot help you
directly. It looks like some unfinished modifications but maybe I'm wrong.
You will have to wait for Miguel response.

best regards,
Przemek


request BMDBFCDX
proc main()
   field F
   dbcreate( "items", {{"F", "C", 10, 0}},, .T. )
   while lastrec() < 50
      dbappend()
      replace F with "rec:" + str( recno(), 3 )
   enddo
   CLOSE
   USE items  VIA "BMDBFCDX" NEW
   set optimize on
   DbSetFilter( {|| .f. } ) //tried .t. as well
   BM_DBSETFILTERARRAY( {10,20,30} )
   go top // <- error
   browse()
return
From zen25000 at zen.co.uk  Wed Dec  3 15:22:44 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Wed Dec  3 15:22:47 2008
Subject: [Harbour] Building xhgtk library Click to flag this post
In-Reply-To: <20081203155405.GA15363@34-mo7-2.acn.waw.pl>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
	<20081203151351.GA5156@34-mo7-2.acn.waw.pl>
	<9257026e0812030741q35655889x36f70d19139a4e11@mail.gmail.com>
	<20081203155405.GA15363@34-mo7-2.acn.waw.pl>
Message-ID: <20820865.post@talk.nabble.com>


Sounds excellent!
In the meantime I have finally installed gtk+ - what a marathon!
However, the xhgtk "make" still only gets this far before failing:-
[baz@jackodesktop xhgtk]$ make                                                                      
gcc -c -W -Wall -O2 `pkg-config --cflags gtk+-2.0 libglade-2.0`
-I/usr/include/harbour -Iinclude -oobj/callback.o source/callback.c                                                                     
Package gdk-x11-2.0-uninstalled was not found in the pkg-config search path.                        
Perhaps you should add the directory containing `gdk-x11-2.0-uninstalled.pc'                        
to the PKG_CONFIG_PATH environment variable                                                         
Package 'gdk-x11-2.0-uninstalled', required by 'GTK+ Uninstalled', not found                        
In file included from source/callback.c:15:                                                         
include/xhgtk.h:21:18: error: glib.h: No such file or directory                                     
include/xhgtk.h:22:21: error: gtk/gtk.h: No such file or directory    
etc. etc. etc....
gdk-x11-2.0-uninstalled.pc is not on my system - any idea where this should
be?

Przemyslaw Czerpak-2 wrote:
> 
> F.e. it should be possible to link
> final application using only -lxhgtk.
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/Re%3A-Building-xhgtk-library-Click-to-flag-this-post-tp20794596p20820865.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Wed Dec  3 16:10:40 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Dec  3 16:10:42 2008
Subject: [Harbour] #xtranslate equivilant in C
Message-ID: <20821748.post@talk.nabble.com>


Hello All

In PRG code I can control the debug info like this:

#ifndef __DBG_TB__
#   xtranslate hb_ToOutDebug( [<x,...>] ) =>
#endif

Is there any equivalent to this feature in C?

My goal is to replace  

#ifdef __SOME__ 
hb_ToOutDebug(...) } 
#endif 

with 
hb_ToOutDebug(...) } 

and the #define stays at the top of the file.

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/-xtranslate-equivilant-in-C-tp20821748p20821748.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From elart at elart.it  Wed Dec  3 16:33:11 2008
From: elart at elart.it (elart)
Date: Wed Dec  3 16:33:23 2008
Subject: [Harbour] I'm looking for some development gui, lib or tools
	for Linux...
In-Reply-To: <20081118235634.GA17181@34-mo7-2.acn.waw.pl>
References: <49232A0E.2080303@elart.it>
	<20081118235634.GA17181@34-mo7-2.acn.waw.pl>
Message-ID: <4936FB17.6050507@elart.it>

On 11/19/2008 12:56 AM, Przemyslaw Czerpak wrote:
> On Tue, 18 Nov 2008, elart wrote:
>
> Hi,
>
>    
>> I'm using Ubuntu with Gnome and Harbour is working fine, thank you
>> I'm looking for some gui lib (gtk or qt ) for Harbour on Linux...
>> I want ask you about the HMG_Linux
>> http://harbourminigui.googlepages.com/linux lib
>> i played with it http://www.hmgforum.com/viewtopic.php?f=8&t=156
>> removed all warning messages of the /hmg/samples/test demo app and it
>> works...
>> It seems in at very early stage but i think may be very useful when it is
>> mature.
>>      
>
> I cannot say anything about HMG - I do not know it.
>    
>> Is there any tools to develop Harbour app using Glade...? i mean something
>> like this:
>> http://robrohan.com/2007/05/21/linux-gui-programming-with-ruby/
>> http://xrob.wordpress.com/2007/04/20/creating-a-gui-application-using-glade-and-ruby/
>> I'm thinking of something like this:
>> - Glade as window designer ( it make as final result a .xml file )
>> - an Harbour prg compiled app to generate code from the Glade xml  (
>> something like the ruby-glade-create-template )
>> - the generate code must be simple so i'm searching for an high level gtk
>> like HMG_Linux
>> Do you have some suggestions...?
>>      
>
> Look at xhgtk project.
> You can also look at xbgtk which is rather automatized [x]harbour
> library generator for GTK API.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>    
Prezmek thank you very much
The xbgtk library is what i'was looking for...

Best regards...
Marco



From elart at elart.it  Wed Dec  3 16:47:04 2008
From: elart at elart.it (elart)
Date: Wed Dec  3 16:47:12 2008
Subject: [Harbour] Building xhgtk library
In-Reply-To: <20793726.post@talk.nabble.com>
References: <20793726.post@talk.nabble.com>
Message-ID: <4936FE58.6030501@elart.it>

On 12/02/2008 03:51 PM, Barry Jackson wrote:
> I am trying to build xhgtk library in Linux.
> I have extracted xhgtk_20080616.zip to /home/baz/xhgtk then:-
>
> [baz@jackodesktop xhgtk]$ ./build.sh
> bash: ./build.sh: Permission denied
>
> If I make build.sh executable, then:-
>
> [baz@jackodesktop xhgtk]$ ./build.sh
> : command not found
> : command not found
> : No such file or directory
> '.  Stop. No rule to make target `Makefile
> : command not found:
> [baz@jackodesktop xhgtk]$
>
> I have also tried the above as root although I am sure that is not needed.
> What am I doing wrong?
>
>

How download and compile xhgtk into Ubuntu
using Harbour (harbour from cvs)

Open a terminal and type:

cd
wget http://heanet.dl.sourceforge.net/sourceforge/xhgtk/xhgtk_20080616.zip
unzip xhgtk_20080616.zip

cd xhgtk
--------------------------------------------------------------------------------------
gedit source/gtk/gtkliststore.c +222

Change the row:

hb_dateFormat( hb_pardsbuff( szDate, 4 ), szFormatted, 
hb_set.HB_SET_DATEFORMAT );

with

hb_dateFormat( hb_pardsbuff( szDate, 4 ), szFormatted, 
hb_setGetDateFormat() );

------------

gedit source/gtk/gtkliststore.c +141

change the row:
hb_dateFormat( hb_pardsbuff( szDate, i+1 ), szFormatted, 
hb_set.HB_SET_DATEFORMAT );
to
hb_dateFormat( hb_pardsbuff( szDate, i+1 ), szFormatted, 
hb_setGetDateFormat() );
--------------------------------------------------------------------------------------

mkdir obj
mkdir lib

export HB_BIN_INSTALL=/usr/bin; export HB_INC_INSTALL=/usr/include

make

--------- How to compile sample/misc
To compile some examples, type:

sudo apt-get install tofrodos glade-gnome

cd samples/misc
dos2unix build.sh
gedit build.sh

Modify and add the -lgttrm library to as below

if [ $HB_GT_LIB = gtsln ]; then
    LIBFILES="$LIBFILES -lgtsln -lslang -lgttrm"
fi

export HB_COMPILER=gcc; export HB_GT_LIB=gtsln
chmod 700 build.sh
./build.sh datepicker

--------- How to compile sample/glade these files are glade related
Glade Interface Designer is a graphical user interface builder for GTK+, 
with additional components for GNOME.
In its third version, Glade is programming language?independent, and 
does not produce code for events,
but rather an XML file that is then used with an appropriate binding 
(such as gtkada for use with the
  Ada programming language).

To install Glade
sudo apt-get install glade-gnome

cd ../gladea littel
dos2unix build.sh
chmod 700 build.sh

Modify and add the -lgttrm library to as below

if [ $HB_GT_LIB = gtsln ]; then
    LIBFILES="$LIBFILES -lgtsln -lslang -lgttrm"
fi

Then type or better copy and paste

echo '#!/bin/bash' > lin_compile_all.sh
echo 'export HB_COMPILER=gcc; export HB_GT_LIB=gtsln' >> lin_compile_all.sh
ls -1 *.prg | sed 's/.prg//' | sed 's/^/.\/build.sh /' >> lin_compile_all.sh
chmod 700 lin_compile_all.sh
./lin_compile_all.sh

--------- How to compile sample/functions

cd ../functions
dos2unix build.sh
chmod 700 build.sh

Modify and add the -lgttrm library to as below

if [ $HB_GT_LIB = gtsln ]; then
    LIBFILES="$LIBFILES -lgtsln -lslang -lgttrm"
fi

echo '#!/bin/bash' > lin_compile_all.sh
echo 'export HB_COMPILER=gcc; export HB_GT_LIB=gtsln' >> lin_compile_all.sh
ls -1 *.prg | sed 's/.prg//' | sed 's/^/.\/build.sh /' >> lin_compile_all.sh
chmod 700 lin_compile_all.sh
./lin_compile_all.sh

From zen25000 at zen.co.uk  Wed Dec  3 17:43:42 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Wed Dec  3 17:43:46 2008
Subject: [Harbour] Building xhgtk library
In-Reply-To: <4936FE58.6030501@elart.it>
References: <20793726.post@talk.nabble.com> <4936FE58.6030501@elart.it>
Message-ID: <20823338.post@talk.nabble.com>


 I am using Mandriva Linux with KDE4 not Ubuntu or Gnome.
Do you think that would cause problems?
I have installed gtk+-2  OK, but am still having problems with the xhgtk
"make". (see the other thread)

elart wrote:
> 
> How download and compile xhgtk into Ubuntu 
> 

-- 
View this message in context: http://www.nabble.com/Building-xhgtk-library-tp20793726p20823338.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From tomaz.zupan at orpo.si  Thu Dec  4 01:43:26 2008
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Thu Dec  4 01:43:32 2008
Subject: [Harbour] Building xhgtk library Click to flag this post
In-Reply-To: <20820865.post@talk.nabble.com>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<20081203155405.GA15363@34-mo7-2.acn.waw.pl>
	<20820865.post@talk.nabble.com>
Message-ID: <200812040743.26796.tomaz.zupan@orpo.si>

You need to install glib-devel and libgtk+2.0_0-devel packages:

urpmi glib-devel libgtk+2.0_0-devel

-- 
LP, 
Toma? Zupan

Wednesday 03 December 2008 21:22:44 je Barry Jackson napisal:
> Sounds excellent!
> In the meantime I have finally installed gtk+ - what a marathon!
> However, the xhgtk "make" still only gets this far before failing:-
> [baz@jackodesktop xhgtk]$ make
> gcc -c -W -Wall -O2 `pkg-config --cflags gtk+-2.0 libglade-2.0`
> -I/usr/include/harbour -Iinclude -oobj/callback.o source/callback.c
> Package gdk-x11-2.0-uninstalled was not found in the pkg-config search
> path. Perhaps you should add the directory containing
> `gdk-x11-2.0-uninstalled.pc' to the PKG_CONFIG_PATH environment variable
> Package 'gdk-x11-2.0-uninstalled', required by 'GTK+ Uninstalled', not
> found In file included from source/callback.c:15:
> include/xhgtk.h:21:18: error: glib.h: No such file or directory
> include/xhgtk.h:22:21: error: gtk/gtk.h: No such file or directory
> etc. etc. etc....
> gdk-x11-2.0-uninstalled.pc is not on my system - any idea where this should
> be?
>
> Przemyslaw Czerpak-2 wrote:
> > F.e. it should be possible to link
> > final application using only -lxhgtk.
> > _______________________________________________
> > Harbour mailing list
> > Harbour@harbour-project.org
> > http://lists.harbour-project.org/mailman/listinfo/harbour

From sscc at mweb.co.za  Thu Dec  4 02:00:38 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Dec  4 02:01:17 2008
Subject: [Harbour] #xtranslate equivilant in C
In-Reply-To: <20821748.post@talk.nabble.com>
References: <20821748.post@talk.nabble.com>
Message-ID: <49378016.9010605@mweb.co.za>

Pritpal Bedi wrote:

> 
> Is there any equivalent to this feature in C?
> 

Maybe :

#define TRACE

#ifdef TRACE

#include <stdarg.h>
#include <io.h>

static FILE * TraceFile = NULL;


void Trace(char * fmt, ...)
{
     struct _timeb timebuffer;
     va_list ap;

     if (TraceFile != NULL)
     {
         _ftime( &timebuffer );
         fprintf(TraceFile, "%ld.%03hu ", timebuffer.time, 
timebuffer.millitm);

         va_start(ap, fmt);
         vfprintf(TraceFile, fmt, ap);
         va_end(ap);

         fprintf(TraceFile, "\n");
         fflush(TraceFile);
         close(dup(fileno(TraceFile)));
     }
}

#else

inline void Trace(char * fmt, ...) { }

#endif

You can see that it does not "disappear" completely though.

Regards
Alex
From sscc at mweb.co.za  Thu Dec  4 02:28:26 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Thu Dec  4 02:29:03 2008
Subject: [Harbour] #xtranslate equivilant in C
In-Reply-To: <49378016.9010605@mweb.co.za>
References: <20821748.post@talk.nabble.com> <49378016.9010605@mweb.co.za>
Message-ID: <4937869A.30406@mweb.co.za>

Alex Strickland wrote:
> Pritpal Bedi wrote:
> 
>>
>> Is there any equivalent to this feature in C?
>>


This initialse and finalise code may also fill in the picture:


extern "C" __declspec( dllexport ) void MTTraceOpen(HMODULE Module)
{
#ifdef TRACE
     char FileName[MAX_PATH];

     if (GetModuleFileName(Module, FileName, MAX_PATH) != 0)
     {
         PathRemoveFileSpec(FileName);
         PathAppend(FileName, "mttrace.log");
         TraceFile = fopen(FileName, "w");
         Trace("MTTraceOpen()");
     }
#endif
     return;
}


extern "C" __declspec( dllexport ) void MTTraceClose()
{
#ifdef TRACE
     if (TraceFile != NULL)
     {
         fclose(TraceFile);
     }
#endif
     return;
}

As you see, the startup code is win32 specific.

Regards
Alex
From mbelgrano at deltain.it  Thu Dec  4 03:40:31 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Dec  4 03:40:35 2008
Subject: [Harbour] Re: harbour compiler on facebook?
In-Reply-To: <609353e70812030925p69aa3280q4ecd60e51510412c@mail.gmail.com>
References: <609353e70812030740k14623681m8989825b874f1a3f@mail.gmail.com>
	<609353e70812030925p69aa3280q4ecd60e51510412c@mail.gmail.com>
Message-ID: <609353e70812040040x6dccca71xc9ffe35fe269d00a@mail.gmail.com>

Five user affter few hours.
I invite all facebook user to join in harbour project
group<http://www.facebook.com/groups/edit.php?customize&gid=48795263775#/group.php?gid=48795263775%20>
Thanks in advance

2008/12/3 Massimo Belgrano <mbelgrano@deltain.it>

> Now is created an harbour group on facebook
>
> http://www.facebook.com/groups/edit.php?customize&gid=48795263775#/group.php?gid=48795263775
>
> I invite everybody post as photo screenshot of application made with
> harbour!
> Post library used and little description of application
> So we have a big collection of this works
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081204/60ade1e0/attachment.html
From druzus at acn.waw.pl  Thu Dec  4 04:22:55 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Dec  4 04:21:00 2008
Subject: [Harbour] Building xhgtk library Click to flag this post
In-Reply-To: <20820865.post@talk.nabble.com>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
	<20081203151351.GA5156@34-mo7-2.acn.waw.pl>
	<9257026e0812030741q35655889x36f70d19139a4e11@mail.gmail.com>
	<20081203155405.GA15363@34-mo7-2.acn.waw.pl>
	<20820865.post@talk.nabble.com>
Message-ID: <20081204092255.GA18103@34-mo7-2.acn.waw.pl>

On Wed, 03 Dec 2008, Barry Jackson wrote:

Hi Barry,

> Sounds excellent!
> In the meantime I have finally installed gtk+ - what a marathon!
> However, the xhgtk "make" still only gets this far before failing:-
> [baz@jackodesktop xhgtk]$ make                                                                      
> gcc -c -W -Wall -O2 `pkg-config --cflags gtk+-2.0 libglade-2.0`
> -I/usr/include/harbour -Iinclude -oobj/callback.o source/callback.c                                                                     
> Package gdk-x11-2.0-uninstalled was not found in the pkg-config search path.                        
> Perhaps you should add the directory containing `gdk-x11-2.0-uninstalled.pc'                        
> to the PKG_CONFIG_PATH environment variable                                                         
> Package 'gdk-x11-2.0-uninstalled', required by 'GTK+ Uninstalled', not found                        
> In file included from source/callback.c:15:                                                         
> include/xhgtk.h:21:18: error: glib.h: No such file or directory                                     
> include/xhgtk.h:22:21: error: gtk/gtk.h: No such file or directory    
> etc. etc. etc....
> gdk-x11-2.0-uninstalled.pc is not on my system - any idea where this should
> be?

Do not build GTK yourself. Use RPM packages compiled for your
distribution. Tomas gave you valid names.
Harbour also installs from RPMs. You can create them from non
root account by ./mpkg_rpm.sh. They will be storred in
$HOME/RPM/RPMS/<arch> directory.
Install them as root.
Then download currect xhgtk CVS (see on SF xhgtk page valid addresses
for CVS configuration) and create XHGTK RPMs from non root account by
./make_rpm.sh in XHGKT directory. Then install them as root.
Use hb* scripts to compile and link your applications with -lxhgtk
parameter. If you will want to use xhgtk static library with hardcoded
GTK dependencies inside your application then use -xhgtk hb* script
parameter.
That's all what you need.

Ubuntu users should install GTK2 and glib devel packages using aptget
or other tools. I do not know their exact names in Ubuntu - they can
be a little bit different.
Harbour should be installed from DEB package (./mpkg_deb.sh).
There is no DEB support in XHGTK yet so binaries will have to be created
and install by user.
To build binaries use ./make_gtk.sh and then copy lib/libxhgtk.a to
/usr/lib/harbour directory (you will need write permission to this
dir). If you want to create xhgtk shared library then use:
   hb_mkslib /usr/lib/libxhgtk /usr/lib/harbour/libxhgtk.a \
             `pkg-config --libs gtk+-2.0 libglade-2.0`
   ln -s harbour/libxhgtk.so /usr/lib/libxhgtk.so

Then you can use XHGTK like in RPM based distributions.

best regards,
Przemek
From miguelangel at marchuet.net  Thu Dec  4 05:26:54 2008
From: miguelangel at marchuet.net (Miguel Angel Marchuet)
Date: Thu Dec  4 05:24:16 2008
Subject: [Harbour] 2008-12-04 11:09 UTC+0100 Miguel Angel Marchuet
	<miguelangel@marchuet.net>
Message-ID: <4937B06E.9090108@marchuet.net>

2008-12-04 11:09 UTC+0100 Miguel Angel Marchuet <miguelangel@marchuet.net>
   * contrib/hbbmcdx/bmdbfcdx.c
   * contrib/hbbmcdx/hbbmcdx.h
     ! fixed partially BM_DbSetFilterArray, and added new features to rdd synced
       with dbfcdx.

can you test now

PROCEDURE main()
    REQUEST BMDBFCDX
    RddSetDefault( "BMDBFCDX" )

    DbCreate( "items", {{"F", "C", 10, 0}},, .T. )
    WHILE LastRec() < 55
       DbAppend()
       REPLACE FIELD->F with "rec:" + Str( RecNo(), 3 )
    ENDDO
    SET OPTIMIZE ON
    BM_DbSetFilterArray( {10,20,30} )
    GO TOP // <- error
    Browse()
RETURN


but by the moment is not completilly correct, i can't found why is visible lastrecord.

Best regards,
Miguel Angel marchuet
From zen25000 at zen.co.uk  Thu Dec  4 06:44:01 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Thu Dec  4 06:44:04 2008
Subject: [Harbour] Building xhgtk library Click to flag this post
In-Reply-To: <20081204092255.GA18103@34-mo7-2.acn.waw.pl>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
	<20081203151351.GA5156@34-mo7-2.acn.waw.pl>
	<9257026e0812030741q35655889x36f70d19139a4e11@mail.gmail.com>
	<20081203155405.GA15363@34-mo7-2.acn.waw.pl>
	<20820865.post@talk.nabble.com>
	<20081204092255.GA18103@34-mo7-2.acn.waw.pl>
Message-ID: <20831902.post@talk.nabble.com>


Thanks Przemyslaw,
>Do not build GTK yourself.
I have already built and installed GTK from source - not sure how to remove?
I installed Harbour from RPMs built by using your mpkg_rpm_from_svn.sh
script. It works fine.

>Then download currect xhgtk CVS  
I cannot find this in SF - all I see on xhgtk page is a download for source
and a download for Windows installer.
I am looking here:-
https://sourceforge.net/project/showfiles.php?group_id=123078
This is why I am struggling trying to build from source.
I do not understand how CVS works although I know what it is.

I have added the two -devel packages that Thomas suggested but the make is
still failing :-

[baz@jackodesktop xhgtk]$ make
gcc -c -W -Wall -O2 `pkg-config --cflags gtk+-2.0 libglade-2.0`
-I/usr/include/harbour -Iinclude -oobj/callback.o source/callback.c                                                               
Package gdk-x11-2.0-uninstalled was not found in the pkg-config search path.                     
Perhaps you should add the directory containing `gdk-x11-2.0-uninstalled.pc'                     
to the PKG_CONFIG_PATH environment variable                                                      
Package 'gdk-x11-2.0-uninstalled', required by 'GTK+ Uninstalled', not found                     
In file included from source/callback.c:15:                                                      
include/xhgtk.h:21:18: error: glib.h: No such file or directory                                  
include/xhgtk.h:22:21: error: gtk/gtk.h: No such file or directory 
etc. etc.

Cheers, 
Barry


Przemyslaw Czerpak-2 wrote:
> 
> Do not build GTK yourself. Use RPM packages compiled for your
> distribution. Tomas gave you valid names.
> Harbour also installs from RPMs. You can create them from non
> root account by ./mpkg_rpm.sh. They will be storred in
> $HOME/RPM/RPMS/<arch> directory.
> Install them as root.
> Then download currect xhgtk CVS (see on SF xhgtk page valid addresses
> for CVS configuration) and create XHGTK RPMs from non root account by
> ./make_rpm.sh in XHGKT directory. Then install them as root.
> Use hb* scripts to compile and link your applications with -lxhgtk
> parameter. If you will want to use xhgtk static library with hardcoded
> GTK dependencies inside your application then use -xhgtk hb* script
> parameter.
> That's all what you need.
-- 
View this message in context: http://www.nabble.com/Re%3A-Building-xhgtk-library-Click-to-flag-this-post-tp20794596p20831902.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From zen25000 at zen.co.uk  Thu Dec  4 06:50:27 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Thu Dec  4 06:50:30 2008
Subject: [Harbour] Building xhgtk library Click to flag this post
In-Reply-To: <200812040743.26796.tomaz.zupan@orpo.si>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
	<20081203151351.GA5156@34-mo7-2.acn.waw.pl>
	<9257026e0812030741q35655889x36f70d19139a4e11@mail.gmail.com>
	<20081203155405.GA15363@34-mo7-2.acn.waw.pl>
	<20820865.post@talk.nabble.com>
	<200812040743.26796.tomaz.zupan@orpo.si>
Message-ID: <20831986.post@talk.nabble.com>


Thanks Toma?
I have installed those but still the same output from "make".


Toma? Zupan wrote:
> 
> You need to install glib-devel and libgtk+2.0_0-devel packages:
> 
> urpmi glib-devel libgtk+2.0_0-devel
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Re%3A-Building-xhgtk-library-Click-to-flag-this-post-tp20794596p20831986.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From rodrmigu at gmail.com  Thu Dec  4 07:16:38 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Thu Dec  4 07:16:41 2008
Subject: [Harbour] Re: Building xhgtk library Click to flag this post
In-Reply-To: <80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
Message-ID: <80b05d460812040416x1026517bpb54c991ef755ee5c@mail.gmail.com>

Hi Przemek,

> Ubuntu users should install GTK2 and glib devel packages using aptget
> or other tools. I do not know their exact names in Ubuntu - they can
> be a little bit different.

For ubuntu, at least 8.04 I used to install these packages:

sudo apt-get -f install glade-3 glade-gnome-3 libglade2-dev
libgtk2.0-dev libslang2-dev libncurses5-dev unixodbc unixodbc-dev make
cvs subversion bison

That will install all dependencies that I need for harbour and xharbour as well

Thanks & Regards
Rodrigo
From rodrmigu at gmail.com  Thu Dec  4 07:22:50 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Thu Dec  4 07:22:56 2008
Subject: [Harbour] Re: Building xhgtk library Click to flag this post
In-Reply-To: <80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
Message-ID: <80b05d460812040422x524c16f8ua19d1a1abeefe24f@mail.gmail.com>

HI Lorenzo,

> I mean it'll work only under *nix, osx and msys/mingw env.
> xhgtk will be added as a contrib.
> The paths will be the Harbour ones

I'm finishing a few changes, like the TMask.prg, I re-wrote the entire
code and it was reduce in 60% of the original size, so less callbacks,
less code to debug and easy code to follow up.

Also, I'm preparing a couple more changes, related to the TEdit and
TControl, to allow default signal "change" and "key press events" for
all Controls under TControl. Another change will be related to the
TPrint, I figure out some parts of how it works, and it will be
necessary a change of "philosophy" about how to use the Printing in
GTK.

Thanks & Regards
Rodrigo
From tomaz.zupan at orpo.si  Thu Dec  4 08:20:47 2008
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Thu Dec  4 08:20:54 2008
Subject: [Harbour] Building xhgtk library Click to flag this post
In-Reply-To: <20831986.post@talk.nabble.com>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<200812040743.26796.tomaz.zupan@orpo.si>
	<20831986.post@talk.nabble.com>
Message-ID: <200812041420.47850.tomaz.zupan@orpo.si>


Sorry, I missed libglade:
urpmi libglade2.0_0-devel

-- 
LP, 
Toma? Zupan

Thursday 04 December 2008 12:50:27 je Barry Jackson napisal:
> Thanks Toma?
> I have installed those but still the same output from "make".
>
> Toma? Zupan wrote:
> > You need to install glib-devel and libgtk+2.0_0-devel packages:
> >
> > urpmi glib-devel libgtk+2.0_0-devel

From zen25000 at zen.co.uk  Thu Dec  4 08:24:59 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Thu Dec  4 08:25:03 2008
Subject: [Harbour] Building xhgtk library Click to flag this post
In-Reply-To: <200812041420.47850.tomaz.zupan@orpo.si>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
	<20081203151351.GA5156@34-mo7-2.acn.waw.pl>
	<9257026e0812030741q35655889x36f70d19139a4e11@mail.gmail.com>
	<20081203155405.GA15363@34-mo7-2.acn.waw.pl>
	<20820865.post@talk.nabble.com>
	<200812040743.26796.tomaz.zupan@orpo.si>
	<20831986.post@talk.nabble.com>
	<200812041420.47850.tomaz.zupan@orpo.si>
Message-ID: <20833352.post@talk.nabble.com>


[root@jackodesktop xhgtk]# urpmi libglade2.0_0-devel
Package libglade2.0_0-devel-2.6.3-1mdv2009.0.i586 is already installed
[root@jackodesktop xhgtk]#
:-/

Toma? Zupan wrote:
> 
> 
> Sorry, I missed libglade:
> urpmi libglade2.0_0-devel
> 
> -- 
> LP, 
> Toma? Zupan
> 
> Thursday 04 December 2008 12:50:27 je Barry Jackson napisal:
>> Thanks Toma?
>> I have installed those but still the same output from "make".
>>
>> Toma? Zupan wrote:
>> > You need to install glib-devel and libgtk+2.0_0-devel packages:
>> >
>> > urpmi glib-devel libgtk+2.0_0-devel
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/Re%3A-Building-xhgtk-library-Click-to-flag-this-post-tp20794596p20833352.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From tomaz.zupan at orpo.si  Thu Dec  4 08:32:31 2008
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Thu Dec  4 08:32:34 2008
Subject: [Harbour] Building xhgtk library Click to flag this post
In-Reply-To: <20833352.post@talk.nabble.com>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<200812041420.47850.tomaz.zupan@orpo.si>
	<20833352.post@talk.nabble.com>
Message-ID: <200812041432.31420.tomaz.zupan@orpo.si>

Thursday 04 December 2008 14:24:59 je Barry Jackson napisal:
> [root@jackodesktop xhgtk]# urpmi libglade2.0_0-devel
> Package libglade2.0_0-devel-2.6.3-1mdv2009.0.i586 is already installed

Do you have mandriva 2009?

Let's see what package is the problem. Please tell us what do you get from 
this:
pkg-config --cflags gtk+-2.0 
pkg-config --cflags libglade-2.0

LP, Toma?
From zen25000 at zen.co.uk  Thu Dec  4 08:35:26 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Thu Dec  4 08:35:29 2008
Subject: [Harbour] Building xhgtk library Click to flag this post
In-Reply-To: <20831902.post@talk.nabble.com>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
	<20081203151351.GA5156@34-mo7-2.acn.waw.pl>
	<9257026e0812030741q35655889x36f70d19139a4e11@mail.gmail.com>
	<20081203155405.GA15363@34-mo7-2.acn.waw.pl>
	<20820865.post@talk.nabble.com>
	<20081204092255.GA18103@34-mo7-2.acn.waw.pl>
	<20831902.post@talk.nabble.com>
Message-ID: <20833488.post@talk.nabble.com>


OK I found the script, but:-
[baz@jackodesktop xhgtk]$ ./make_rpm.sh
bash: ./make_rpm.sh: Permission denied
So I made it executable and :-
[baz@jackodesktop xhgtk]$ ./make_rpm.sh
./                                     
./source/                              
./source/cairo/                        
./source/cairo/cairo.c                 
./source/classes/                      
./source/classes/TButton.prg           
----------------and on and on until:-------------
./contrib/xhgtk+/samples/gtkbutton09.prg
./contrib/xhgtk+/samples/gtkwindow05.prg
./contrib/xhgtk+/samples/gtkwindow03.prg
./contrib/xhgtk+/Makefile
./TODO.txt
tar: .: file changed as we read it
./make_rpm.sh: line 29: get_rpmmacro: command not found
error: Name field must be present in package: (main package)
error: Version field must be present in package: (main package)
error: Release field must be present in package: (main package)
error: Summary field must be present in package: (main package)
error: Group field must be present in package: (main package)
error: License field must be present in package: (main package)
[baz@jackodesktop xhgtk]$

-- 
View this message in context: http://www.nabble.com/Re%3A-Building-xhgtk-library-Click-to-flag-this-post-tp20794596p20833488.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From zen25000 at zen.co.uk  Thu Dec  4 08:43:46 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Thu Dec  4 08:43:48 2008
Subject: [Harbour] Building xhgtk library Click to flag this post
In-Reply-To: <200812041432.31420.tomaz.zupan@orpo.si>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
	<20081203151351.GA5156@34-mo7-2.acn.waw.pl>
	<9257026e0812030741q35655889x36f70d19139a4e11@mail.gmail.com>
	<20081203155405.GA15363@34-mo7-2.acn.waw.pl>
	<20820865.post@talk.nabble.com>
	<200812040743.26796.tomaz.zupan@orpo.si>
	<20831986.post@talk.nabble.com>
	<200812041420.47850.tomaz.zupan@orpo.si>
	<20833352.post@talk.nabble.com>
	<200812041432.31420.tomaz.zupan@orpo.si>
Message-ID: <20833651.post@talk.nabble.com>


>Do you have mandriva 2009?  Yes    2.6.27.5-desktop-2mnb

[baz@jackodesktop ~]$ pkg-config --cflags gtk+-2.0
Package gdk-x11-2.0-uninstalled was not found in the pkg-config search path.
Perhaps you should add the directory containing `gdk-x11-2.0-uninstalled.pc'
to the PKG_CONFIG_PATH environment variable
Package 'gdk-x11-2.0-uninstalled', required by 'GTK+ Uninstalled', not found
[baz@jackodesktop ~]$

[baz@jackodesktop ~]$ pkg-config --cflags libglade-2.0
Package gdk-x11-2.0-uninstalled was not found in the pkg-config search path.
Perhaps you should add the directory containing `gdk-x11-2.0-uninstalled.pc'
to the PKG_CONFIG_PATH environment variable
Package 'gdk-x11-2.0-uninstalled', required by 'GTK+ Uninstalled', not found
[baz@jackodesktop ~]$

I have in bash_profile:-
PKG_CONFIG_PATH=/usr/lib/pkgconfig:/usr/share/pkgconfig:/home/baz/gtk+-2.14.5:/usr/local/lib/pkgconfig:/usr/share/doc/pkgconfig


Toma? Zupan wrote:
> 
> Thursday 04 December 2008 14:24:59 je Barry Jackson napisal:
>> [root@jackodesktop xhgtk]# urpmi libglade2.0_0-devel
>> Package libglade2.0_0-devel-2.6.3-1mdv2009.0.i586 is already installed
> 
> Do you have mandriva 2009?
> 
> Let's see what package is the problem. Please tell us what do you get from 
> this:
> pkg-config --cflags gtk+-2.0 
> pkg-config --cflags libglade-2.0
> 
> LP, Toma?
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/Re%3A-Building-xhgtk-library-Click-to-flag-this-post-tp20794596p20833651.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From lorenzo.fiorini at gmail.com  Thu Dec  4 09:02:27 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Dec  4 09:02:31 2008
Subject: [Harbour] Re: Building xhgtk library Click to flag this post
In-Reply-To: <80b05d460812040422x524c16f8ua19d1a1abeefe24f@mail.gmail.com>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
	<80b05d460812040422x524c16f8ua19d1a1abeefe24f@mail.gmail.com>
Message-ID: <9257026e0812040602m4c2bf00al54babbace01792bf@mail.gmail.com>

On Thu, Dec 4, 2008 at 1:22 PM, Rodrigo Miguel <rodrmigu@gmail.com> wrote:

> I'm finishing a few changes, like the TMask.prg, I re-wrote the entire
> code and it was reduce in 60% of the original size, so less callbacks,
> less code to debug and easy code to follow up.
> Also, I'm preparing a couple more changes, related to the TEdit and
> TControl, to allow default signal "change" and "key press events" for
> all Controls under TControl.

Really good.

> Another change will be related to the
> TPrint, I figure out some parts of how it works, and it will be
> necessary a change of "philosophy" about how to use the Printing in
> GTK.

IMHO printing ( on real printers ) is getting less and less important.
Under OSX and Linux ( they both use cups ) is normal to create a pdf
and printing it using lpr -P <printer> <pdf name>.

best regards,
Lorenzo
From dbtopas at dbtopas.lt  Thu Dec  4 09:29:41 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Dec  4 09:28:03 2008
Subject: [Harbour] itemGetNL & dates
In-Reply-To: <20081203165351.GA6403@34-mo7-2.acn.waw.pl>
References: <49341808.2040008@dbtopas.lt>	<20081201182700.GA26863@34-mo7-2.acn.waw.pl>	<49344067.7040001@dbtopas.lt>
	<20081203165351.GA6403@34-mo7-2.acn.waw.pl>
Message-ID: <4937E955.5010509@dbtopas.lt>

Hi,


>> My problem was that I've used code:
>>   l = hb_itemGetNL( pItem );
>> instead of
>>   if ( HB_IS_NUMERIC( pItem ) )
>>      l = hb_itemGetNL( pItem );
>>   else
>>      l = 0;
>> hoping that return value is 0, if item type is not numeric. But it is not 
>> true for the dates.
> 
> I also do not like it. Such "helper" conversions create more troubles
> and force adding additional code to protect against them.
> 
> The main problem is compatibility with Clipper .c code.

Yes, but do we have many (or any) developers porting Clipper .c code. I 
don't think so. BTW, I remember I've found a few times idea that "C API 
compatibility is not goal of this project" on this mailing list.


> Here is also yet another problem I do not like very much.
> hb_par*() and hb_stor*() functions accept optional parameter as array
> index. It means that functions like:
>    HB_FUNC( MYFUNC )
>    {
>       hb_retnd( hb_parnd( 1 ) * 3.14 );
>    }
> 
> can access uninitialized memory when user pass array as 1-st parameter
>    myfunc( {} )
> depending on architecture it may cause unpredictable behavior.
> In x86 hb_par*() functions use as optional parameter function
> return address or some unused part of stack and then this value
> is used as array index and may return some random array item.
> Nothing very wrong happens and application still run (though maybe
> it makes sth different then expected ;-)) but on some other machines
> which have hardware stack frame protection it may even cause GPF.

Wow! This never came to my mind. hb_arrayGet*() functions checks, if 
array index is valid, so, no access to uninitialized memory can occur, 
but results can be really unpredictable (random array value picked). In 
x86 the array index parameter should be in the stack area of local 
variables. Here is BCC exploit sample code:

PROC main()
   ? MyFunc({1, 2, 3, 4})
RETURN

#pragma begindump
#include "hbapi.h"

#define INDEX 2 /* Set array index here! :) */

HB_FUNC( MYFUNC )
{
    /* Array forces BCC to avoid optimisation and create stack frame */
    int    i, arr[ 16 ];
    for ( i = 0; i < 16; i++ )  arr[ i ] = INDEX;
    hb_retnd( hb_parnd( 1 ) * 3.14 );
}
#pragma enddump


> To eliminate it we should always pass additional 0 parameter to
> hb_par*() and hb_stor*() functions. But it's also not enough because
> the optional parameter is extracted as ULONG (it's not Clipper
> compatible where optional parameter is int) which may have different
> size then int which is used as default for constant values so this
> additional parameter must be casted also to ULONG too. 

So, hb_parni(1,1) should not work on big endian machine 
sizeof(ULONG)!=sizeof(int) and parameters are passed by stack frame?!


> BTW we should
> fix in Harbour source code all calls to hb_par*() and hb_stor*()
> which uses optional parameter as constant value without any casting.
> So the above code to not produce any bad side effects should be change
> to:
> 
>    HB_FUNC( MYFUNC )
>    {
>       hb_retnd( hb_parnd( 1, ( ULONG ) 0 ) * 3.14 );
>    }
> 
> Personally I'd prefer to eliminate it.
> I'd suggest to add functions which will not use optional parameter
> or even better changed existing ones (it will nicely help to locate
> code which uses optional parameters during compilation so it can be
> easy fixed) and add new Clipper compatible functions updating #define
> translations in our extend.api.

I think the better way is to change existing functions and create a new 
Clipper compatible. If we are not trying to be Clipper compatible, then 
the new functions can be more strict on parameters. I mean:
   int hb_parani( int iParam, ULONG ulArrayIndex );
instead of Clipper compatible optional array index.

BTW, I can not find (grep -S "hb_par[c-z]*([^)]*," *.c) any usage of 
optional parameter in the core code. They are popular in contribs only 
to pass structures as arrays, ex., RECT as {top, left, bottom, right}.


Regards,
Mindaugas
From rodrmigu at gmail.com  Thu Dec  4 09:31:29 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Thu Dec  4 09:31:32 2008
Subject: [Harbour] Building xhgtk library Click to flag this post
In-Reply-To: <200812041420.47850.tomaz.zupan@orpo.si>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<200812040743.26796.tomaz.zupan@orpo.si>
	<20831986.post@talk.nabble.com>
	<200812041420.47850.tomaz.zupan@orpo.si>
Message-ID: <80b05d460812040631y7945cdb3r48a2ee956e8dac9c@mail.gmail.com>

For the next version of gtk (2.16) we will be able to remove Glade and
LibGlade from xhgtk source code. They will be part of official release
of gtk. In fact the Glade 3.4.5 already generated the new GtkBuildable
xml files

Rodrigo

On Thu, Dec 4, 2008 at 11:20 AM, Toma? Zupan <tomaz.zupan@orpo.si> wrote:
>
> Sorry, I missed libglade:
> urpmi libglade2.0_0-devel
>
> --
> LP,
> Toma? Zupan
From tomaz.zupan at orpo.si  Thu Dec  4 09:41:40 2008
From: tomaz.zupan at orpo.si (=?utf-8?q?Toma=C5=BE_Zupan?=)
Date: Thu Dec  4 09:41:47 2008
Subject: [Harbour] Building xhgtk library Click to flag this post
In-Reply-To: <20833651.post@talk.nabble.com>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<200812041432.31420.tomaz.zupan@orpo.si>
	<20833651.post@talk.nabble.com>
Message-ID: <200812041541.40423.tomaz.zupan@orpo.si>


Thursday 04 December 2008 14:43:46 je Barry Jackson napisal:
> >Do you have mandriva 2009?  Yes    2.6.27.5-desktop-2mnb
>
> [baz@jackodesktop ~]$ pkg-config --cflags gtk+-2.0
> Package gdk-x11-2.0-uninstalled was not found in the pkg-config search
>

I have mandriva 2008 and I don't have gdk-x11 package and I can't find it for 
2009 either. 

>
> I have in bash_profile:-
> PKG_CONFIG_PATH=/usr/lib/pkgconfig:/usr/share/pkgconfig:/home/baz/gtk+-2.14
>.5:/usr/local/lib/pkgconfig:/usr/share/doc/pkgconfig
>
This might be the problem. remove any directories that were added at manual 
instalation.

This is my PKG_CONFIG_PATH
[tomaz@pc-tomaz-n ~]$ set | grep CONFIG
PKG_CONFIG_PATH=/usr/lib/qt4/lib/pkgconfig

LP, Toma?
From zen25000 at zen.co.uk  Thu Dec  4 10:13:22 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Thu Dec  4 10:13:26 2008
Subject: [Harbour] Building xhgtk library Click to flag this post
In-Reply-To: <200812041541.40423.tomaz.zupan@orpo.si>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
	<20081203151351.GA5156@34-mo7-2.acn.waw.pl>
	<9257026e0812030741q35655889x36f70d19139a4e11@mail.gmail.com>
	<20081203155405.GA15363@34-mo7-2.acn.waw.pl>
	<20820865.post@talk.nabble.com>
	<200812040743.26796.tomaz.zupan@orpo.si>
	<20831986.post@talk.nabble.com>
	<200812041420.47850.tomaz.zupan@orpo.si>
	<20833352.post@talk.nabble.com>
	<200812041432.31420.tomaz.zupan@orpo.si>
	<20833651.post@talk.nabble.com>
	<200812041541.40423.tomaz.zupan@orpo.si>
Message-ID: <20835405.post@talk.nabble.com>


All the paths to pkg_config dirs have been added manually to try to fix this
problem. My qt4/lib is empty.
I have Googled "gdk-x11-2.0-uninstalled" and several people have had the
same problem. I can not find an explanation though.
I think that I have another BIG problem! I now realize that gtk+-2 was
already installed on my machine when I built it from source and installed
it.
Two applications that use gtk are now failing - unless I can find a way to
reverse this I think I will be re-installing Mandriva.
Any ideas?

I am making a clean install in vBox with all my currently installed rpms to
try the rpm install of harbour and xhgtk.


Toma? Zupan wrote:
> 
> 
> Thursday 04 December 2008 14:43:46 je Barry Jackson napisal:
>> >Do you have mandriva 2009?  Yes    2.6.27.5-desktop-2mnb
>>
>> [baz@jackodesktop ~]$ pkg-config --cflags gtk+-2.0
>> Package gdk-x11-2.0-uninstalled was not found in the pkg-config search
>>
> 
> I have mandriva 2008 and I don't have gdk-x11 package and I can't find it
> for 
> 2009 either. 
> 
>>
>> I have in bash_profile:-
>> PKG_CONFIG_PATH=/usr/lib/pkgconfig:/usr/share/pkgconfig:/home/baz/gtk+-2.14
>>.5:/usr/local/lib/pkgconfig:/usr/share/doc/pkgconfig
>>
> This might be the problem. remove any directories that were added at
> manual 
> instalation.
> 
> This is my PKG_CONFIG_PATH
> [tomaz@pc-tomaz-n ~]$ set | grep CONFIG
> PKG_CONFIG_PATH=/usr/lib/qt4/lib/pkgconfig
> 
> LP, Toma?
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/Re%3A-Building-xhgtk-library-Click-to-flag-this-post-tp20794596p20835405.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From zen25000 at zen.co.uk  Thu Dec  4 10:14:45 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Thu Dec  4 10:14:49 2008
Subject: [Harbour] Building xhgtk library Click to flag this post
In-Reply-To: <200812041541.40423.tomaz.zupan@orpo.si>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
	<20081203151351.GA5156@34-mo7-2.acn.waw.pl>
	<9257026e0812030741q35655889x36f70d19139a4e11@mail.gmail.com>
	<20081203155405.GA15363@34-mo7-2.acn.waw.pl>
	<20820865.post@talk.nabble.com>
	<200812040743.26796.tomaz.zupan@orpo.si>
	<20831986.post@talk.nabble.com>
	<200812041420.47850.tomaz.zupan@orpo.si>
	<20833352.post@talk.nabble.com>
	<200812041432.31420.tomaz.zupan@orpo.si>
	<20833651.post@talk.nabble.com>
	<200812041541.40423.tomaz.zupan@orpo.si>
Message-ID: <20835426.post@talk.nabble.com>


All the paths to pkg_config dirs have been added manually to try to fix this
problem. My qt4/lib is empty.
I have Googled "gdk-x11-2.0-uninstalled" and several people have had the
same problem. I can not find an explanation though.
I think that I have another BIG problem! I now realize that gtk+-2 was
already installed on my machine when I built it from source and installed
it.
Two applications that use gtk are now failing - unless I can find a way to
reverse this I think I will be re-installing Mandriva.
Any ideas?

I am making a clean install in vBox with all my currently installed rpms to
try the rpm install of harbour and xhgtk.


Toma? Zupan wrote:
> 
> 
> Thursday 04 December 2008 14:43:46 je Barry Jackson napisal:
>> >Do you have mandriva 2009?  Yes    2.6.27.5-desktop-2mnb
>>
>> [baz@jackodesktop ~]$ pkg-config --cflags gtk+-2.0
>> Package gdk-x11-2.0-uninstalled was not found in the pkg-config search
>>
> 
> I have mandriva 2008 and I don't have gdk-x11 package and I can't find it
> for 
> 2009 either. 
> 
>>
>> I have in bash_profile:-
>> PKG_CONFIG_PATH=/usr/lib/pkgconfig:/usr/share/pkgconfig:/home/baz/gtk+-2.14
>>.5:/usr/local/lib/pkgconfig:/usr/share/doc/pkgconfig
>>
> This might be the problem. remove any directories that were added at
> manual 
> instalation.
> 
> This is my PKG_CONFIG_PATH
> [tomaz@pc-tomaz-n ~]$ set | grep CONFIG
> PKG_CONFIG_PATH=/usr/lib/qt4/lib/pkgconfig
> 
> LP, Toma?
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/Re%3A-Building-xhgtk-library-Click-to-flag-this-post-tp20794596p20835426.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From lorenzo.fiorini at gmail.com  Thu Dec  4 10:28:07 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Dec  4 10:28:11 2008
Subject: [Harbour] Building xhgtk library Click to flag this post
In-Reply-To: <80b05d460812040631y7945cdb3r48a2ee956e8dac9c@mail.gmail.com>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<200812040743.26796.tomaz.zupan@orpo.si>
	<20831986.post@talk.nabble.com>
	<200812041420.47850.tomaz.zupan@orpo.si>
	<80b05d460812040631y7945cdb3r48a2ee956e8dac9c@mail.gmail.com>
Message-ID: <9257026e0812040728w64f06279la530100e44f50739@mail.gmail.com>

On Thu, Dec 4, 2008 at 3:31 PM, Rodrigo Miguel <rodrmigu@gmail.com> wrote:

> For the next version of gtk (2.16) we will be able to remove Glade and
> LibGlade from xhgtk source code. They will be part of official release
> of gtk. In fact the Glade 3.4.5 already generated the new GtkBuildable
> xml files

Good.

I'm preparing a ( small ) introduction to the language and a tutorial.

My first goal is to create a simple "distribution" based on arbitrary
defaults that allow a newbie to download, make and create in few
minutes ( using only hb* scripts ) a gttrm/wvt/xwc example, or a cgi
example or gtk example under Lin, Win and OSX using ( as options )
Eclipse as IDE and glade as a "screen painter".

I would be happy to start from 1.1 since MT is a key feature but I'm
using 1.0.1 at the moment.

It is not a fork. I'll never change the code or the syntax ( maybe few
PP alternatives ).
I simply want to easy the start of newbies that don't know anything
about the past and want to evaluate a modern language.

1 - only multi-platform features will be documented
2- only the gcc toolchain will be supported
3 - only few multi-platform contribs will be ported
4 - dbf management and cui classes will be almost ignored in the doc

If a developer want more or different things she/he has to refer
directly to the upstream projects ( harbour-projects and xhgtk ).

Any comment is welcome.

best regards,
Lorenzo
From mbelgrano at deltain.it  Thu Dec  4 10:24:52 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Thu Dec  4 10:30:23 2008
Subject: [Harbour] Re: Building xhgtk library Click to flag this post
In-Reply-To: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
Message-ID: <609353e70812040724x3bb7c60bv5afd349f8b126e30@mail.gmail.com>

can i use xhgtk with bcc?
If yes How?

2008/12/2 Rodrigo Miguel <rodrmigu@gmail.com>

> Hi,
>
> Try just:  make
>
> Regards
> Rodrigo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081204/6d469c4d/attachment.html
From zen25000 at zen.co.uk  Thu Dec  4 15:50:13 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Thu Dec  4 15:50:17 2008
Subject: [Harbour] Building xhgtk library Click to flag this post
In-Reply-To: <20833488.post@talk.nabble.com>
References: <80b05d460812020726p4e6e71fbm4e1e2fd0b5fd607f@mail.gmail.com>
	<80b05d460812030547t6b7d2a4bifd3a14e9386ef294@mail.gmail.com>
	<20081203151351.GA5156@34-mo7-2.acn.waw.pl>
	<9257026e0812030741q35655889x36f70d19139a4e11@mail.gmail.com>
	<20081203155405.GA15363@34-mo7-2.acn.waw.pl>
	<20820865.post@talk.nabble.com>
	<20081204092255.GA18103@34-mo7-2.acn.waw.pl>
	<20831902.post@talk.nabble.com> <20833488.post@talk.nabble.com>
Message-ID: <20842162.post@talk.nabble.com>


Przemek
I have tried the make_rpm.sh on a new Mandriva install in VBox.
Harbour installed from my rpms made with your SVN script.
The xhgtk rpm build goes OK until this:-

./contrib/xhgtk+/source/_gtkscrolledwindow.prg
./contrib/xhgtk+/source/_gtkfontselection.prg
./contrib/xhgtk+/Makefile
./contrib/set_vc.bat
./Makefile.scr
./TODO.txt
./license.txt
./makefile.gcc
./Makefile
error: Name field must be present in package: (main package)
error: Version field must be present in package: (main package)
error: Release field must be present in package: (main package)
error: Summary field must be present in package: (main package)
error: Group field must be present in package: (main package)
error: License field must be present in package: (main package)
[baz@localhost xhgtk]$

Cheers Barry.

-- 
View this message in context: http://www.nabble.com/Re%3A-Building-xhgtk-library-Click-to-flag-this-post-tp20794596p20842162.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From info at fsgiudice.com  Thu Dec  4 17:37:25 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Thu Dec  4 17:37:34 2008
Subject: [Harbour] hblognet, inet and threads
Message-ID: <49385BA5.1070607@fsgiudice.com>

Hi Przemek,

I'm working with Inet*() functions and hblog.
In my repository I have updated Inet with RAW connections, actually UDP 
raw connections, and packets manipulation (I need to spoof IP for a 
specific application).
All works well in non MT env.
Now I'm trying to test this app in MT environment.
Questions: did you gave a look to hblognet and THREAD version ?
Is it INET is already MT safe and functional also if its source is in 
rtl folder ?
In hblognet there are commands like:
StartThread( Self, "AcceptCon" )

How make equivalent using Harbour Thread functions that, AFAIK, I have 
seen that don't support Objects, or there is another way to implement 
Threads with Objects ?
Could it be correct to define hb_ThreadStart( {|| ::AcceptCon() } ) ?

TIA

Best Regards

Francesco
From bedipritpal at hotmail.com  Fri Dec  5 03:09:36 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Dec  5 03:09:38 2008
Subject: [Harbour] 2008-12-04 23:56 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20849382.post@talk.nabble.com>


2008-12-04 23:56 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/tests/hbmk_b32.bat
    + xhb.lib - just to take use of hb_ToOutDebug(). While under heavy
      changes I need to keep the debugging info intact. Final sources
      will not have this included.

  * harbour/contrib/gtwvg/wvggui.c
  * harbour/contrib/gtwvg/wvgwin.c
  * harbour/contrib/gtwvg/wvgparts.ch
  * harbour/contrib/gtwvg/wvtwin.ch
  * harbour/contrib/gtwvg/winback.prg
  * harbour/contrib/gtwvg/wvgax.prg
  * harbour/contrib/gtwvg/wvgcrt.prg
  * harbour/contrib/gtwvg/wvgdlg.prg
  * harbour/contrib/gtwvg/wvglistb.prg
  * harbour/contrib/gtwvg/wvgphdlr.prg
  * harbour/contrib/gtwvg/wvgpushb.prg
  * harbour/contrib/gtwvg/wvgstatb.prg
  * harbour/contrib/gtwvg/wvgstatc.prg
  * harbour/contrib/gtwvg/wvgtoolb.prg
  * harbour/contrib/gtwvg/wvgtreev.prg
  * harbour/contrib/gtwvg/wvghwnd.prg
    + Implemented ( partially ) WvgTreeView(), WvgListBox() classes.
    ; Heavy changes in class structure, introduction  of new functions,
      refinement of old ones, heavy implementtaion of hb_ACallBack()s. 
    
  * harbour/contrib/gtwvg/tests/demowvg.prg
    + Added functionality of WvtTreeView() and WvtListBox() classes.

    ;TODO : Few functions in wvgwin.c are not UNICODE compliant yet.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-12-04-23%3A56-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20849382p20849382.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Fri Dec  5 05:37:48 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Dec  5 05:35:51 2008
Subject: [Harbour] hblognet, inet and threads
In-Reply-To: <49385BA5.1070607@fsgiudice.com>
References: <49385BA5.1070607@fsgiudice.com>
Message-ID: <20081205103748.GA847@34-mo7-2.acn.waw.pl>

On Thu, 04 Dec 2008, Francesco Saverio Giudice wrote:

Hi Francesco,

> I'm working with Inet*() functions and hblog.
> In my repository I have updated Inet with RAW connections, actually UDP raw 
> connections, and packets manipulation (I need to spoof IP for a specific 
> application).
> All works well in non MT env.
> Now I'm trying to test this app in MT environment.
> Questions: did you gave a look to hblognet and THREAD version ?

No, I'm not familiar with hblog* code. Anyhow if it operates on
separated resources then is should be safe. But to say sth more
I will have to look at this code.

> Is it INET is already MT safe and functional also if its source is in rtl 
> folder ?

There is one problem which have to be fixed in *inet functions.
The name resolving is not MT safe. Just simply OS inet functions
gethostbyaddr() and gethostbyname() are not MT safe. For some
platforms there are alternative functions which can be used as
workaround unfortunately they are not standard ones. In general
functions which calls hb_getHosts() internally are not MT safe.
These are: HB_INETGETHOSTS(), HB_INETGETALIAS(), HB_INETCONNECT().
In xHarbour documentation Giancarlo described it (see doc/inet.txt)
I will work on INET module adding C API and I'll resolve it for
some platforms and for other I'll try to add some workarounds
or describe limitations.
Now I'm busy working on some other things so I cannot say when
exactly I will find time to make it.

> In hblognet there are commands like:
> StartThread( Self, "AcceptCon" )
> How make equivalent using Harbour Thread functions that, AFAIK, I have seen 
> that don't support Objects, or there is another way to implement Threads 
> with Objects ?
> Could it be correct to define hb_ThreadStart( {|| ::AcceptCon() } ) ?

Yes it's correct.

In Harbour object with character message name in next parameter as
thread  start point is not supported intentionally. If you need then
create simple wrapper function though I suggest to not use it.

best regards,
Przemek
From druzus at acn.waw.pl  Fri Dec  5 05:45:24 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Dec  5 05:43:27 2008
Subject: [Harbour] #xtranslate equivilant in C
In-Reply-To: <20821748.post@talk.nabble.com>
References: <20821748.post@talk.nabble.com>
Message-ID: <20081205104524.GB847@34-mo7-2.acn.waw.pl>

On Wed, 03 Dec 2008, Pritpal Bedi wrote:

Hi Pritpal,

> In PRG code I can control the debug info like this:
> #ifndef __DBG_TB__
> #   xtranslate hb_ToOutDebug( [<x,...>] ) =>
> #endif
> Is there any equivalent to this feature in C?

No. In C you can use only #define with quite similar conditions to
Harbour and Clipper (in xHarbour #define is modified and does not
pass it).

> My goal is to replace  
> #ifdef __SOME__ 
> hb_ToOutDebug(...) } 
> #endif 
> with 
> hb_ToOutDebug(...) } 
> and the #define stays at the top of the file.

The C preprocessor works in different way then Harbour/Clipper
one but here it can be resolved in similar way.
In #define you have to specify number of parameters. So Just simply
make a trick to force fixed number of parameters:

#ifdef USE_DEBUG
#  define  MY_OUTDEBUG( d ) hb_ToOutDebug d
#else
#  define  MY_OUTDEBUG( d )
#endif

and then in source code use:
   MY_OUTDEBUG( ( p1, p2, p3, ) )

We are using parenthesis to group list of parameters as one param.

If you look at Harbour source code then you will find that exactly
the same trick is made by HB_TRACE() functions.

best regards,
Przemek
From sscc at mweb.co.za  Fri Dec  5 07:37:17 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Dec  5 07:37:49 2008
Subject: [Harbour] 8.3 Directry Function
Message-ID: <4939207D.6090007@mweb.co.za>

Hi all

Has anyone written such a beast?

I have altered a copy of harbour's funtion, but at the moment it "hangs".

Thanks
Alex
From sscc at mweb.co.za  Fri Dec  5 08:56:44 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Dec  5 08:57:29 2008
Subject: [Harbour] 8.3 Directry Function
In-Reply-To: <4939207D.6090007@mweb.co.za>
References: <4939207D.6090007@mweb.co.za>
Message-ID: <4939331C.6030406@mweb.co.za>

Alex Strickland wrote:

> 
> Has anyone written such a beast?
> 
> I have altered a copy of harbour's funtion, but at the moment it "hangs".
> 

If anyone is interested the answer was that if a LFN is actually a SFN 
(less than or equal to 8.3), the cAlternateFileName structure member 
is not filled in, and that caused the loop (I copied an empty file 
name to the harbour record).

Regards
Alex

From lorenzo.fiorini at gmail.com  Fri Dec  5 09:58:19 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Dec  5 09:58:22 2008
Subject: [Harbour] HB_DLLIBS and shared binaries
Message-ID: <9257026e0812050658w6c63a767if8868328c649b4ca@mail.gmail.com>

I'm trying to cleanup the way to create shared libs ( in 1.0.1 ).
Under Linux everything is so easy but when it comes the turn of Win or
OSX the things become harder.
Locally I simply add all my contribs to harbour.[so|dll|dylib] but
this can't be considered "clean".

F.e. to link hbpgsql and gd under OSX you need:
-lhggd -lhbpgsql
and
-L/opt/local/lib -lpq -lssl -lldap -lcrypto -lkrb5 -lgd
and
full path reference to harbour.dylib

hb-mkslib doesn't support paths in *.a so I've tried to build to
create some "postinst" shared libs using:

if [ "$HB_ARCHITECTURE" = "w32" ]; then
   cd $HB_LIB_INSTALL
   hb-mkslib $HB_BIN_INSTALL/libhbgd.dll libhbgd.a
/opt/local/lib/libgd.lib $HB_BIN_INSTALL/harbour.dll
/opt/local/bin/libgd2.dll
   hb-mkslib $HB_BIN_INSTALL/libhbpgsql.dll libhbpgsql.a
-L/opt/pgsql/lib -lpq $HB_BIN_INSTALL/harbour.dll
/opt/pgsql/bin/libpq.dll
   #hb-mkslib libxhgtk libxhgtk.a `pkg-config --libs gtk+-2.0 --libs
libglade-2.0
fi

if [ "$HB_ARCHITECTURE" = "darwin" ]; then
   cd $HB_LIB_INSTALL
   hb-mkslib libhbgd libhbgd.a -L/opt/local/lib -lgd
   hb-mkslib libhbpgsql libhbpgsql.a -L/opt/local/lib -lpq -lssl
-lldap -lcrypto -lkrb5
   #hb-mkslib libxhgtk libxhgtk.a `pkg-config --libs gtk+-2.0 --libs
libglade-2.0
fi

but when it comes the time to use hblnk it still wants the path for
libpq.dll or libgd2.dll so the problem is simply "shifted".

I've found an HB_DLLIBS envvar in hb-mkslib. Was it meant as a way to
add user defined paths and libs?

Any suggestion?

best regards,
Lorenzo
From info at fsgiudice.com  Fri Dec  5 10:31:59 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri Dec  5 10:32:07 2008
Subject: [Harbour] hblognet, inet and threads
In-Reply-To: <20081205103748.GA847@34-mo7-2.acn.waw.pl>
References: <49385BA5.1070607@fsgiudice.com>
	<20081205103748.GA847@34-mo7-2.acn.waw.pl>
Message-ID: <4939496F.903@fsgiudice.com>

Hi Przemek,

Il 05/12/2008 11.37, Przemyslaw Czerpak ha scritto:
> 
> No, I'm not familiar with hblog* code. Anyhow if it operates on
> separated resources then is should be safe. But to say sth more
> I will have to look at this code.
> 

It will be good. Actually it seems to me correct, apart from OS 
functions that I don't know as you write below.

>> Is it INET is already MT safe and functional also if its source is in rtl 
>> folder ?
> 
> There is one problem which have to be fixed in *inet functions.
> The name resolving is not MT safe. Just simply OS inet functions
> gethostbyaddr() and gethostbyname() are not MT safe. For some
> platforms there are alternative functions which can be used as
> workaround unfortunately they are not standard ones. In general
> functions which calls hb_getHosts() internally are not MT safe.
> These are: HB_INETGETHOSTS(), HB_INETGETALIAS(), HB_INETCONNECT().
> In xHarbour documentation Giancarlo described it (see doc/inet.txt)
> I will work on INET module adding C API and I'll resolve it for
> some platforms and for other I'll try to add some workarounds
> or describe limitations.
> Now I'm busy working on some other things so I cannot say when
> exactly I will find time to make it.
> 

Thank you in advance.

>> Could it be correct to define hb_ThreadStart( {|| ::AcceptCon() } ) ?
> 
> Yes it's correct.
> 
> In Harbour object with character message name in next parameter as
> thread  start point is not supported intentionally. If you need then
> create simple wrapper function though I suggest to not use it.
> 

In meanwhile I have tried and my code seems to work correctly: speed is 
impressive and in MT mode I'm not loosing UDP packets as I did in ST 
version. Now I'm trying to make a better version more MT oriented.
And, I didn't believe it, also background tasks works in MT version 
without problems (as I have used them in ST version for console add-ons) 
or at last it seems to be working.

Thank you very much for you incredible work with MT (and all other part 
of Harbour with other core developers). I like too much that all mt code 
is in only one vmmt.lib file.

Best Regards

Francesco

From lorenzo.fiorini at gmail.com  Fri Dec  5 11:13:12 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Dec  5 11:13:16 2008
Subject: [Harbour] Entry point not found in harbour.dll for
	HB_FUN___CLSLOCKDEF
Message-ID: <9257026e0812050813n7dbec516q2159fd2740a79ce3@mail.gmail.com>

I'm starting to get a win popup with this error.

I found __CLSLOCK but not __CLSLOCKDEF.

Any idea?

best regards,
Lorenzo
From druzus at acn.waw.pl  Fri Dec  5 11:53:10 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Dec  5 11:51:12 2008
Subject: [Harbour] Entry point not found in harbour.dll for
	HB_FUN___CLSLOCKDEF
In-Reply-To: <9257026e0812050813n7dbec516q2159fd2740a79ce3@mail.gmail.com>
References: <9257026e0812050813n7dbec516q2159fd2740a79ce3@mail.gmail.com>
Message-ID: <20081205165310.GA30511@34-mo7-2.acn.waw.pl>

On Fri, 05 Dec 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> I'm starting to get a win popup with this error.
> I found __CLSLOCK but not __CLSLOCKDEF.
> Any idea?

You are trying to link OOP .prg code compiled with hbclass.ch
from version 1.1 with 1.0 HVM.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Dec  5 12:11:41 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Dec  5 12:11:46 2008
Subject: [Harbour] Entry point not found in harbour.dll for
	HB_FUN___CLSLOCKDEF
In-Reply-To: <20081205165310.GA30511@34-mo7-2.acn.waw.pl>
References: <9257026e0812050813n7dbec516q2159fd2740a79ce3@mail.gmail.com>
	<20081205165310.GA30511@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0812050911x3b0989e4k9ac3801098dcc3ba@mail.gmail.com>

On Fri, Dec 5, 2008 at 5:53 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> You are trying to link OOP .prg code compiled with hbclass.ch
> from version 1.1 with 1.0 HVM.

Thanks, too much tests, I'll try to cleanup.

best regards,
Lorenzo
From druzus at acn.waw.pl  Fri Dec  5 12:16:39 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Dec  5 12:14:40 2008
Subject: [Harbour] HB_DLLIBS and shared binaries
In-Reply-To: <9257026e0812050658w6c63a767if8868328c649b4ca@mail.gmail.com>
References: <9257026e0812050658w6c63a767if8868328c649b4ca@mail.gmail.com>
Message-ID: <20081205171639.GA26718@34-mo7-2.acn.waw.pl>

On Fri, 05 Dec 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> I'm trying to cleanup the way to create shared libs ( in 1.0.1 ).
> Under Linux everything is so easy but when it comes the turn of Win or
> OSX the things become harder.
> Locally I simply add all my contribs to harbour.[so|dll|dylib] but
> this can't be considered "clean".
> F.e. to link hbpgsql and gd under OSX you need:
> -lhggd -lhbpgsql
> and
> -L/opt/local/lib -lpq -lssl -lldap -lcrypto -lkrb5 -lgd
> and
> full path reference to harbour.dylib

It's possible that full path references are not necessary. See libtool
options. Maybe it supports runtime late dynamic binding.
I also suggest to not hard code build time paths and use -L parameter.
Check libtool options for relative paths and later runtime behavior.
In general it will be good to check what libtool can do in MacOSX.
It has many interesting extensions. F.e. it does not need .a archive
extracting and can accept them directly.

> hb-mkslib doesn't support paths in *.a so I've tried to build to
> create some "postinst" shared libs using:

??? Can you describe what is the problem?
I've just made:
   hb-mkslib dest/libxhgtk.so xhgtk/lib-hb/libxhgtk.a \
             `pkg-config --libs gtk+-2.0 --libs libglade-2.0`

and it works without any problems.

> if [ "$HB_ARCHITECTURE" = "w32" ]; then
>    cd $HB_LIB_INSTALL
>    hb-mkslib $HB_BIN_INSTALL/libhbgd.dll libhbgd.a
> /opt/local/lib/libgd.lib $HB_BIN_INSTALL/harbour.dll
> /opt/local/bin/libgd2.dll
>    hb-mkslib $HB_BIN_INSTALL/libhbpgsql.dll libhbpgsql.a
> -L/opt/pgsql/lib -lpq $HB_BIN_INSTALL/harbour.dll
> /opt/pgsql/bin/libpq.dll
>    #hb-mkslib libxhgtk libxhgtk.a `pkg-config --libs gtk+-2.0 --libs
> libglade-2.0
> fi
> 
> if [ "$HB_ARCHITECTURE" = "darwin" ]; then
>    cd $HB_LIB_INSTALL
>    hb-mkslib libhbgd libhbgd.a -L/opt/local/lib -lgd
>    hb-mkslib libhbpgsql libhbpgsql.a -L/opt/local/lib -lpq -lssl
> -lldap -lcrypto -lkrb5
>    #hb-mkslib libxhgtk libxhgtk.a `pkg-config --libs gtk+-2.0 --libs
> libglade-2.0
> fi
> 
> but when it comes the time to use hblnk it still wants the path for
> libpq.dll or libgd2.dll so the problem is simply "shifted".

They have to be visible for linker so they should be located in one of
path defined by -L option. I'm not sure what you want to do.

> I've found an HB_DLLIBS envvar in hb-mkslib. Was it meant as a way to
> add user defined paths and libs?

It's used for compilers which may need some additional libraries
which are not standard ones.

best regards,
Przemek
From lorenzo.fiorini at gmail.com  Fri Dec  5 12:58:48 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Dec  5 12:58:53 2008
Subject: [Harbour] HB_DLLIBS and shared binaries
In-Reply-To: <20081205171639.GA26718@34-mo7-2.acn.waw.pl>
References: <9257026e0812050658w6c63a767if8868328c649b4ca@mail.gmail.com>
	<20081205171639.GA26718@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0812050958o7d47fecbi8139fe0e960f3d2f@mail.gmail.com>

On Fri, Dec 5, 2008 at 6:16 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> ??? Can you describe what is the problem?
> I've just made:
>   hb-mkslib dest/libxhgtk.so xhgtk/lib-hb/libxhgtk.a \
>             `pkg-config --libs gtk+-2.0 --libs libglade-2.0`
>
> and it works without any problems.

Sorry I was not clear enough. Under msys/mingw if I use:

if [ "$HB_ARCHITECTURE" = "w32" ]; then
   hb-mkslib $HB_BIN_INSTALL/hbgd.dll $HB_LIB_INSTALL/libhbgd.a
/opt/local/lib/libgd.lib $HB_BIN_INSTALL/harbour.dll
/opt/local/bin/libgd2.dll
   hb-mkslib $HB_BIN_INSTALL/hbpgsql.dll $HB_LIB_INSTALL/libhbpgsql.a
-L/opt/pgsql/lib -lpq $HB_BIN_INSTALL/harbour.dll
/opt/pgsql/bin/libpq.dll
   #hb-mkslib libxhgtk libxhgtk.a `pkg-config --libs gtk+-2.0 --libs
libglade-2.0
fi

( note the $HB_LIB_INSTALL/libhbgd.a ) it gives:

$ ./make_slibs.sh
cannot read file: /opt/harbour/lib/libhbgd.a
rm: cannot remove directory `/tmp/hb-mkslib-3804': Permission denied
cannot read file: /opt/harbour/lib/libhbpgsql.a
rm: cannot remove directory `/tmp/hb-mkslib-3524': Permission denied

In hb-mkslib.sh the *.a is "tested" as {dir}{f} where {dir} is `pwd`
and this make difficult to "reference" Harbour's libs in the user
Makefiles and since -L and -l don't work for hb-mkslib I'm trying to
find the easiest way to create shared libs in Win and OSX that refer
to other shared libs.

best regards,
Lorenzo
From vailtom at gmail.com  Fri Dec  5 20:03:13 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Fri Dec  5 20:03:17 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <609353e70812030918s490aa702sb57a57b857855cfc@mail.gmail.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<609353e70812030918s490aa702sb57a57b857855cfc@mail.gmail.com>
Message-ID: <531d7a750812051703j1f5baa4ewc5781d7487ea6a43@mail.gmail.com>

Hi!
Yes, just missing the part of pages of documentation to be concluded.
As it is not used frames or iframes the code of the menus and images
are fixed on all files of documentation.

How am I changing the layout of all these pages, not yet posted the
final version I have here. But now I will post all the content what i
already have here at the beginning of next week ...

2008/12/3 Massimo Belgrano <mbelgrano@deltain.it>:
> Compliment for good work
> Imo this website is ready to be active
>
>
> 2008/10/27 Vailton Renato <vailtom@gmail.com>
>>
>> Hi all!
>>
>> I am of opinions on the page DOCUMENTATION > SAMPLES of the new site.
>> I need to know if I'm on the right track and if all agree that the
>> layout'm riding, because it is very difficult and full of details - if
>> you have to redo then will take a lot of work. :(
>>
>> My intention would be easy to assemble a page to show some features of
>> Harbor and give prominence to its features, especially where visitors
>> could view the code and how would the screen.
>>
>> We have also upgraded the sentence at the top of the site and the
>> links to download versions of the homepage.
>>
>> I await comments, criticisms and suggestions, the URL is:
>> http://harbour-project.org/preview2/samples.html
>>
>> Thank you
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
> --
> Massimo Belgrano
>
> Albo Nazionale Informatici Professionisti 2620
> Socio 2843 Associazione Informatici prof.
>
> Analisi e sviluppo software per Lan e Web
> Consulenza informatica - Formazione
> Delta Informatica S.r.l.  http://www.deltain.it
> Via Torelli,31 - 28100 Novara - Tel: 0321/30281
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>



-- 
Vailton Renato
SQL LIB, MyMake & xDev Developer
From lorenzo.fiorini at gmail.com  Sat Dec  6 03:02:18 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Dec  6 03:02:22 2008
Subject: [Harbour] Build xhgtk inside harbour
Message-ID: <9257026e0812060002pac29f4y3370e699d4d47ff1@mail.gmail.com>

xhgtk's Makefile uses hbcc and hbcmp so xhgtk can't be included in
contrib ( or better it is possible but only after the first install ).

I see two possibilities:

1 - rewrite Makefiles using harbour standards ( and rename all the
files lowercase ).
This will create one lib for every dir but it seems more "gtk like"
and since the link will be managed by hb* the user will not see the
difference

2 - keep the actual tree, add xhgtk outside the contrib dir and build
it after the postinst.sh

Which is the best option?

Miguel, Przemyslaw?

best regards,
Lorenzo
From mbelgrano at deltain.it  Sat Dec  6 06:45:58 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Sat Dec  6 06:46:03 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <531d7a750812051703j1f5baa4ewc5781d7487ea6a43@mail.gmail.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>
	<609353e70812030918s490aa702sb57a57b857855cfc@mail.gmail.com>
	<531d7a750812051703j1f5baa4ewc5781d7487ea6a43@mail.gmail.com>
Message-ID: <609353e70812060345i7431ea8eo7afd7b163b6d9588@mail.gmail.com>

Very good news!

2008/12/6 Vailton Renato <vailtom@gmail.com>

> Hi!
> Yes, just missing the part of pages of documentation to be concluded.
> As it is not used frames or iframes the code of the menus and images
> are fixed on all files of documentation.
>
> How am I changing the layout of all these pages, not yet posted the
> final version I have here. But now I will post all the content what i
> already have here at the beginning of next week ...
>
> 2008/12/3 Massimo Belgrano <mbelgrano@deltain.it>:
> > Compliment for good work
> > Imo this website is ready to be active
> >
> >
> > 2008/10/27 Vailton Renato <vailtom@gmail.com>
> >>
> >> Hi all!
> >>
> >> I am of opinions on the page DOCUMENTATION > SAMPLES of the new site.
> >> I need to know if I'm on the right track and if all agree that the
> >> layout'm riding, because it is very difficult and full of details - if
> >> you have to redo then will take a lot of work. :(
> >>
> >> My intention would be easy to assemble a page to show some features of
> >> Harbor and give prominence to its features, especially where visitors
> >> could view the code and how would the screen.
> >>
> >> We have also upgraded the sentence at the top of the site and the
> >> links to download versions of the homepage.
> >>
> >> I await comments, criticisms and suggestions, the URL is:
> >> http://harbour-project.org/preview2/samples.html
> >>
> >> Thank you
> >> _______________________________________________
> >> Harbour mailing list
> >> Harbour@harbour-project.org
> >> http://lists.harbour-project.org/mailman/listinfo/harbour
> >
> >
> > --
> > Massimo Belgrano
> >
> > Albo Nazionale Informatici Professionisti 2620
> > Socio 2843 Associazione Informatici prof.
> >
> > Analisi e sviluppo software per Lan e Web
> > Consulenza informatica - Formazione
> > Delta Informatica S.r.l.  http://www.deltain.it
> > Via Torelli,31 - 28100 Novara - Tel: 0321/30281
> >
> > _______________________________________________
> > Harbour mailing list
> > Harbour@harbour-project.org
> > http://lists.harbour-project.org/mailman/listinfo/harbour
> >
> >
>
>
>
> --
> Vailton Renato
> SQL LIB, MyMake & xDev Developer
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081206/e374ca3a/attachment.html
From zen25000 at zen.co.uk  Sat Dec  6 09:38:49 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Sat Dec  6 09:38:54 2008
Subject: [Harbour] Harbour Web site - Preview #2 (Update)
In-Reply-To: <609353e70812060345i7431ea8eo7afd7b163b6d9588@mail.gmail.com>
References: <531d7a750810270526y5b5f345ficc044d93b633fab2@mail.gmail.com>	<609353e70812030918s490aa702sb57a57b857855cfc@mail.gmail.com>	<531d7a750812051703j1f5baa4ewc5781d7487ea6a43@mail.gmail.com>
	<609353e70812060345i7431ea8eo7afd7b163b6d9588@mail.gmail.com>
Message-ID: <493A8E79.4040003@zen.co.uk>

Looking good!

Couple of small errors in "Crew" section :-
Alexander S. Kresin - code error?
Patrick Mast  "andreal-life" - typo

Don't forget to update the navicon with the new style  :-)


From Kevin at RawFedDogs.net  Sat Dec  6 21:36:59 2008
From: Kevin at RawFedDogs.net (Kevin Monceaux)
Date: Sat Dec  6 21:37:09 2008
Subject: [Harbour] FreeBSD harbour port maintainer 
In-Reply-To: <AFB948164110ED43B5EB849E8DEEF03815F177@SRV02.deltain.net>
References: <AFB948164110ED43B5EB849E8DEEF03815F177@SRV02.deltain.net>
Message-ID: <alpine.LNX.2.00.0812062021440.29569@Blaidd-Drwg.RawFedDogs.net>

Clipper Fans,

I first sent this reply to the users mailing list.  Since I'm neither a 
Harbour nor a FreeBSD developer, I thought I should start out asking on 
the users' list instead of the developers' list.  But haven't received any 
replies there so maybe this would be better directed here.  I'm the fellow 
from the users list Massimo quoted below.

On Tue, 11 Nov 2008, Massimo Belgrano wrote:

> Follow from harbour user mailing list
>> P.S.  If anyone here is the FreeBSD harbour port maintainer or has 
>> contact with him/her, the version of Harbour in the FreeBSD ports tree 
>> is 0.44.0. It looks like it might be time for an update.

Well, this seemed like a good excuse to expand my knowledge.  I hadn't 
tried to do anything more adventurous to a FreeBSD port then adding a 
patch, etc.  After some tinkering I now have a Harbour 1.0.1 FreeBSD port 
that's working well enough for my needs.  With a little more polishing I 
might even be brave enough to try submitting it to FreeBSD.  :-)

Whoever created the 0.44.0 port added an additional Makefile and script. 
The port's Makefile executed the added Makefile, which in turn called the 
added script.  That script set several Harbour environment variables to 
control the build, changed to the source dir, and finally executed 
Harbour's Makefile, via gmake.  I've stripped out the unneeded layers of 
confusion, removed the added Makefile and script, set all the environment 
variables in the port's Makefile and let it execute Harbour's Makefile 
directly.

So, anyway, I have a few questions that might aid me in the polishing of 
the port.  Has the Harbour development team ever considered using a 
./configure script instead of various environment variables?  It would 
greatly simplify creating Harbour packages on source based, and a few 
binary based, Linux distros, not to mention FreeBSD, etc.  Most distros 
with automated build systems prefer building via:

     ./configure -> make -> make install

Where can I find documentation on all the environment variables available 
to control building Harbour?  I found some in make_gcc.mak but it doesn't 
appear to be a complete list.  HB_WITHOUT_X11, for example, isn't 
documented there.  I discovered HB_WITHOUT_X11 in an xHarbour Gentoo 
ebuild.

The various *.txt files under doc and the Makefiles under doc appear to be 
out of sync.  Some docs get omitted if I set HB_DOC_INSTALL.  Is there an
environment variable to enable installing the man pages?  I don't even see 
a Makefile in doc/man.  For the moment I'm just installing the docs and 
man pages via the port's Makefile.

I'm currently testing the port under a FreeBSD install I have running 
under vmware, which doesn't have X installed.  If I leave HB_WITHOUT_X11 
unset, Harbour tries to build its X related bits, which all fail with 
Error 1 or Error 2 errors.  Those errors should cause the overall 
build to fail but don't.  Any idea why that's happening?

I have my FreeBSD ports system set up to use ccache.  It does so by 
setting CC before executing ./configure and/or make in the package's 
source tree.  After much head scratching trying to figure out why ccache 
wasn't being used when building Harbour, I finally found CC was being 
blindly set to gcc in config/bsd/gcc.cf.  Could that perhaps be changed to 
only set CC to GCC if it's not already set?  For the moment I'm removing 
that setting via a patch before the build starts and Harbour builds 
correctly with ccache.



Kevin
http://www.RawFedDogs.net
http://www.WacoAgilityGroup.org
Bruceville, TX

Si hoc legere scis nimium eruditionis habes.
Longum iter est per praecepta, breve et efficax per exempla!!!

From bedipritpal at hotmail.com  Sat Dec  6 22:29:18 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Sat Dec  6 22:29:21 2008
Subject: [Harbour] 2008-12-06 19:08 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20877527.post@talk.nabble.com>


2008-12-06 19:08 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/makefile
  * harbour/contrib/gtwvg/common.mak
    + wvgcheck.prg
    + wvgdatar.prg
    + wvgradio.prg

  + harbour/contrib/gtwvg/wvgcheck.prg
  + harbour/contrib/gtwvg/wvgdatar.prg
  + harbour/contrib/gtwvg/wvgradio.prg
    + Added WvgCheckBox(), WvgRadioButton(), DataRef() Xbase++ compatible
classes.

  * harbour/contrib/gtwvg/wvggui.c
  * harbour/contrib/gtwvg/wvgwin.c
  * harbour/contrib/gtwvg/wvgparts.ch
  * harbour/contrib/gtwvg/wvglistb.prg
  * harbour/contrib/gtwvg/wvgpushb.prg
  * harbour/contrib/gtwvg/wvgstatb.prg
  * harbour/contrib/gtwvg/wvgstatc.prg
  * harbour/contrib/gtwvg/wvgtoolb.prg
  * harbour/contrib/gtwvg/wvgtreev.prg
  * harbour/contrib/gtwvg/wvghwnd.prg
    ; Heavy changes in class framework.
    + Many new winapi functions.
    ! Optimized use of hb_ACallBack().
    - WinApi functions replaced by Harbour core functions.
    
  * harbour/contrib/gtwvg/tests/demowvg.prg
    + Added functionality of WvgCheckBox() and WvgRadioButton() classes.
      Now thses classes implement DataRef() class also. Work-in-progress.

    ;TODO : Few functions in wvgwin.c are not UNICODE compliant yet.
     DONE   All functions are now UNICODE compliant.

    ;Viktor, can you compile GTWVG on 64bits platform ?

    ;REQUEST : Can someone familiar with Xbase++ come forward to 
               write a small test program based on implemented classes.
               Please exclude all that functionality which is not yet
               implemented.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-12-06-19%3A08-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20877527p20877527.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From lorenzo.fiorini at gmail.com  Sun Dec  7 03:15:27 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Dec  7 03:15:40 2008
Subject: [Harbour] Re: Build xhgtk inside harbour
In-Reply-To: <9257026e0812060002pac29f4y3370e699d4d47ff1@mail.gmail.com>
References: <9257026e0812060002pac29f4y3370e699d4d47ff1@mail.gmail.com>
Message-ID: <9257026e0812070015v37820bcfob6e595e7871a5eb8@mail.gmail.com>

On Sat, Dec 6, 2008 at 9:02 AM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com> wrote:

> Which is the best option?

I'll answer to myself: after hours of tests the best option is the number 1.

It's the only clean option that allow to correctly manage build, clean
and install targets.

I've left the names as they are for the moment to easy the diff with
the upstream project.
However I think it'll be good for the upstream also to rename them all
lowercase and compile prg using -w3.

best regards,
Lorenzo
From cvc at oohg.org  Sun Dec  7 08:35:37 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Sun Dec  7 08:35:43 2008
Subject: [Harbour] about GTXWC
Message-ID: <493BD129.7030500@oohg.org>


Hi all:

I need a working sample (prg) (in linux ) in order to test gtxwc.

anybody can I help me?

TIA
Ciro




-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From druzus at acn.waw.pl  Sun Dec  7 10:46:19 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Dec  7 10:44:16 2008
Subject: [Harbour] FreeBSD harbour port maintainer
In-Reply-To: <alpine.LNX.2.00.0812062021440.29569@Blaidd-Drwg.RawFedDogs.net>
References: <AFB948164110ED43B5EB849E8DEEF03815F177@SRV02.deltain.net>
	<alpine.LNX.2.00.0812062021440.29569@Blaidd-Drwg.RawFedDogs.net>
Message-ID: <20081207154619.GA4751@34-mo7-2.acn.waw.pl>

On Sat, 06 Dec 2008, Kevin Monceaux wrote:

Hi Kevin,

> Well, this seemed like a good excuse to expand my knowledge.  I hadn't 
> tried to do anything more adventurous to a FreeBSD port then adding a 
> patch, etc.  After some tinkering I now have a Harbour 1.0.1 FreeBSD port 
> that's working well enough for my needs.  With a little more polishing I 
> might even be brave enough to try submitting it to FreeBSD.  :-)

In the past I was building few times Harbour on {Free,NET,Open}BSD
systems but I've never used Harbour FreeBSD ports. AFAIR it was created
by David Holm.

> Whoever created the 0.44.0 port added an additional Makefile and script. 
> The port's Makefile executed the added Makefile, which in turn called the 
> added script.  That script set several Harbour environment variables to 
> control the build, changed to the source dir, and finally executed 
> Harbour's Makefile, via gmake.  I've stripped out the unneeded layers of 
> confusion, removed the added Makefile and script, set all the environment 
> variables in the port's Makefile and let it execute Harbour's Makefile 
> directly.

Can you send this makefile and script to this list?
Maybe I'll be able to help you.

> So, anyway, I have a few questions that might aid me in the polishing of 
> the port.  Has the Harbour development team ever considered using a 
> ./configure script instead of various environment variables?  It would 
> greatly simplify creating Harbour packages on source based, and a few 
> binary based, Linux distros, not to mention FreeBSD, etc.  Most distros 
> with automated build systems prefer building via:
>     ./configure -> make -> make install

We do not use autoconf yet. Sooner or later we will have but without
bigger user list which will build and test Harbour in different *nixes
it will not be easy to keep it alive and well tuned. Please also remember
that autoconf in practice cannot be used for cross builds and it's not
supported in all environments so we will still need alternative form.

> Where can I find documentation on all the environment variables available 
> to control building Harbour?  I found some in make_gcc.mak but it doesn't 
> appear to be a complete list.  HB_WITHOUT_X11, for example, isn't 
> documented there.  I discovered HB_WITHOUT_X11 in an xHarbour Gentoo 
> ebuild.

Probably no one have collected all of them so far.
Just from memory:

   HB_ARCHITECTURE
   HB_COMPILER
   HB_GPM_MOUSE=yes     # enable GPM support in GTSLN, GTCRS, GTTRM
   HB_WITHOUT_GTSLN=yes # disable GTSLN and code which needs slang library
   HB_WITHOUT_GTCRS=yes # disable GTCRS and code which needs [n]curses library
   HB_WITHOUT_X11=yes   # disable GTXWC and code which needs X11 support
   HB_COMMERCE=yes      # disable code which needs pure GPL libraries
                        # (now GTSLN, GPM)

The above is for core code. For contribs we have:
   HB_CONTRIBLIBS="lib1 lib2 ..." # list of contrib libraries which should
                                  # be compiled instead of default list
   HB_CONTRIB_ADDONS"lib1 lib2 ..." # additional contrib libraries which
                                    # are not compiled by default

additionally each contrib library may have its own variables used to tests
if header files exists.

> The various *.txt files under doc and the Makefiles under doc appear to be 
> out of sync.  Some docs get omitted if I set HB_DOC_INSTALL.  Is there an
> environment variable to enable installing the man pages?  I don't even see 
> a Makefile in doc/man.  For the moment I'm just installing the docs and man 
> pages via the port's Makefile.

No there is nothing for automatic man files installation. Personally
I do not see any easy way to create sth for this what can work well in
different *nixes and customized builds so we probably left it for final
binary package build scripts.

> I'm currently testing the port under a FreeBSD install I have running under 
> vmware, which doesn't have X installed.  If I leave HB_WITHOUT_X11 unset, 
> Harbour tries to build its X related bits, which all fail with Error 1 or 
> Error 2 errors.  Those errors should cause the overall build to fail but 
> don't.  Any idea why that's happening?

They shouldn't. Harbour make files allow to continue compilation even
if some library cannot be created. When error appears the build process
is interrupted only given library and its sublibraries.

> I have my FreeBSD ports system set up to use ccache.  It does so by setting 
> CC before executing ./configure and/or make in the package's source tree.  
> After much head scratching trying to figure out why ccache wasn't being 
> used when building Harbour, I finally found CC was being blindly set to gcc 
> in config/bsd/gcc.cf.  Could that perhaps be changed to only set CC to GCC 
> if it's not already set?  For the moment I'm removing that setting via a 
> patch before the build starts and Harbour builds correctly with ccache.

This could be a problem because Harbour can be compiled using different
C compilers. HB_COMPILER points to C compiler and corresponding
config/$HB_ARCHITECTURE/$HB_COMPILER.cf file which have such definitions.
It's not guarantied that CC will be set to GCC and such modification
will break all builds when it isn't, f.e. system uses different default
compiler.
In other systems we have:
   CC = $(HB_CCACHE) gcc
   LD = $(HB_CCACHE) gcc
but looks that in bsd/gcc.sf this is missing. I'll add it ASAP.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Dec  7 10:54:22 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Dec  7 10:52:17 2008
Subject: [Harbour] Build xhgtk inside harbour
In-Reply-To: <9257026e0812060002pac29f4y3370e699d4d47ff1@mail.gmail.com>
References: <9257026e0812060002pac29f4y3370e699d4d47ff1@mail.gmail.com>
Message-ID: <20081207155422.GB4751@34-mo7-2.acn.waw.pl>

On Sat, 06 Dec 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> xhgtk's Makefile uses hbcc and hbcmp so xhgtk can't be included in
> contrib ( or better it is possible but only after the first install ).

It's an optional build for which uses Makefile.scr and allows to compiled
XHGTK without setting any environment variables.
The default one in Makefile does not use [x]hb* scripts.

> I see two possibilities:
> 1 - rewrite Makefiles using harbour standards ( and rename all the
> files lowercase ).
> This will create one lib for every dir but it seems more "gtk like"
> and since the link will be managed by hb* the user will not see the
> difference

It does not have to create one lib for each directory.
You can very easy keep current behavior.
BTW do you want to integrate XHGTK with Harbour contrib?
Don't you think it will be better to keep it as separate
project and only add some integration tools.

> 2 - keep the actual tree, add xhgtk outside the contrib dir and build
> it after the postinst.sh
> Which is the best option?

Both can be done but if we will make new XHGTK copy in contrib then
will have additional job with synchronization in the future.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Dec  7 11:05:56 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Dec  7 11:03:52 2008
Subject: [Harbour] HB_DLLIBS and shared binaries
In-Reply-To: <9257026e0812050958o7d47fecbi8139fe0e960f3d2f@mail.gmail.com>
References: <9257026e0812050658w6c63a767if8868328c649b4ca@mail.gmail.com>
	<20081205171639.GA26718@34-mo7-2.acn.waw.pl>
	<9257026e0812050958o7d47fecbi8139fe0e960f3d2f@mail.gmail.com>
Message-ID: <20081207160556.GC4751@34-mo7-2.acn.waw.pl>

On Fri, 05 Dec 2008, Lorenzo Fiorini wrote:

Hi Lorenzo,

> Sorry I was not clear enough. Under msys/mingw if I use:
> if [ "$HB_ARCHITECTURE" = "w32" ]; then
>    hb-mkslib $HB_BIN_INSTALL/hbgd.dll $HB_LIB_INSTALL/libhbgd.a
> /opt/local/lib/libgd.lib $HB_BIN_INSTALL/harbour.dll
> /opt/local/bin/libgd2.dll
>    hb-mkslib $HB_BIN_INSTALL/hbpgsql.dll $HB_LIB_INSTALL/libhbpgsql.a
> -L/opt/pgsql/lib -lpq $HB_BIN_INSTALL/harbour.dll
> /opt/pgsql/bin/libpq.dll
>    #hb-mkslib libxhgtk libxhgtk.a `pkg-config --libs gtk+-2.0 --libs
> libglade-2.0
> fi
> ( note the $HB_LIB_INSTALL/libhbgd.a ) it gives:
> $ ./make_slibs.sh
> cannot read file: /opt/harbour/lib/libhbgd.a

OK, I see. absolute paths. I'll change hb-mkslib.sh to work with absolute
paths in a while.

> In hb-mkslib.sh the *.a is "tested" as {dir}{f} where {dir} is `pwd`
> and this make difficult to "reference" Harbour's libs in the user
> Makefiles and since -L and -l don't work for hb-mkslib I'm trying to
> find the easiest way to create shared libs in Win and OSX that refer
> to other shared libs.

-L and -l passed to hb-mkslib works as gcc / libtool parameters and
it's very important functionality if you want to create references
inside shared library not in final binaries.

best regards,
Przemek
From druzus at acn.waw.pl  Sun Dec  7 11:12:13 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Dec  7 11:10:09 2008
Subject: [Harbour] 2008-12-07 17:12 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081207161213.GA24202@34-mo7-2.acn.waw.pl>

2008-12-07 17:12 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hb-mkslib.sh
    ! added support for absolute paths in passed object or static library
      list

  * harbour/config/bsd/gcc.cf
    ! added missing HB_CCACHE in gcc calls

best regards
Przemek
From druzus at acn.waw.pl  Sun Dec  7 11:15:19 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Dec  7 11:13:16 2008
Subject: [Harbour] about GTXWC
In-Reply-To: <493BD129.7030500@oohg.org>
References: <493BD129.7030500@oohg.org>
Message-ID: <20081207161519.GA24236@34-mo7-2.acn.waw.pl>

On Sun, 07 Dec 2008, Ciro Vargas Clemow wrote:
> Hi all:
> I need a working sample (prg) (in linux ) in order to test gtxwc.
> anybody can I help me?

   /* tst.prg */
   proc main()
      allert( "Hello World !!!" )
   return

hbmk -n -w -es2 tst.prg -gtxwc && ./tst

best regards,
Przemek
From druzus at acn.waw.pl  Sun Dec  7 12:07:06 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Dec  7 12:05:03 2008
Subject: [Harbour] hblognet, inet and threads
In-Reply-To: <4939496F.903@fsgiudice.com>
References: <49385BA5.1070607@fsgiudice.com>
	<20081205103748.GA847@34-mo7-2.acn.waw.pl>
	<4939496F.903@fsgiudice.com>
Message-ID: <20081207170706.GA5497@34-mo7-2.acn.waw.pl>

On Fri, 05 Dec 2008, Francesco Saverio Giudice wrote:

Hi Francesco,

> In meanwhile I have tried and my code seems to work correctly: speed is 
> impressive and in MT mode I'm not loosing UDP packets as I did in ST 

In UDP packets can be lost by definition and it's programmer job
to detect it and repeat messages if necessary.
Here MT mode can help only indirectly by reducing some time conditions
but it does not eliminate the problem.

> version. Now I'm trying to make a better version more MT oriented.
> And, I didn't believe it, also background tasks works in MT version without 
> problems (as I have used them in ST version for console add-ons) or at last 
> it seems to be working.

The default ST code should have additional protection for setting/restoring
tasks or the task list should be local to thread.
Using MT you can also create alternative version of background tasks
without modifing main HVM loop or other HVM structures.
You can simply create separate thread which will execute your tasks.
F.e. sth like:

   static s_aTasks := {}
   static s_nCounter := 0
   static s_nLastTime := 0
   static s_lStop := .t.
   static s_onceControl
   static s_mutex

   static function hb_backgroundThread()
      local n, nTime
      while !s_lStop
         hb_mutexLock( s_mutex )
         nTime := s_nLastTime
         s_nLastTime := seconds()
         nTime -= s_nLastTime
         if nTime < 0
            nTime += 24 * 60 * 60
         endif
         nTime *= 1000
         for n := 1 to s_nCounter
            if s_aTasks[ n, 4 ] .and. s_aTasks[ n, 3 ] <= nTime
               eval( s_aTasks[ n, 2 ] )
            endif
         next
         hb_mutexUnlock( s_mutex )
         hb_idleSleep( 0.01 )
      enddo
   return nil

   function hb_backgroundInit()
      if s_lStop
         hb_threadOnce( @s_onceControl, {||
               s_mutex := hb_mutexCreate()
               hb_mutexLock( s_mutex )
               s_lStop := .f.
               hb_threadStart( @hb_backgroundThread() )
               hb_mutexUnlock( s_mutex )
               return nil
            } )
      endif
   return nil

   function hb_backgroundAdd( bAction, nMilliSec, lActive )
      local nHandler
      if !HB_ISNUMERIC( nMilliSec )
         nMilliSec := 0
      endif
      if HB_ISLOGICAL( lActive )
         lActive := .t.
      endif
      hb_backgroundInit()
      hb_mutexLock( s_mutex )
      aadd( s_aTasks, { nHandler := ++s_nCounter, bAction, nMilliSec, lActive } )
      hb_mutexUnlock( s_mutex )
   return nHandler

   function hb_backgroundDel( nHandler )
      local bAction, n
      if HB_ISNUMERIC( nHandler )
         hb_backgroundInit()
         hb_mutexLock( s_mutex )
         if ( n := ascan( s_aTasks, { |x| x[ 1 ] == nHandler } ) ) != 0
            bAction := s_aTasks[ n, 2 ]
            hb_adel( s_aTasks, 2, .t. )
         endif
         hb_mutexUnlock( s_mutex )
      endif
   return bAction

   function hb_backgroundActive( nHandler, lActive )
      local lOldActive := .f., n
      if HB_ISNUMERIC( nHandler )
         hb_backgroundInit()
         hb_mutexLock( s_mutex )
         if ( n := ascan( s_aTasks, { |x| x[ 1 ] == nHandler } ) ) != 0
            lOldActive := s_aTasks[ n, 4 ]
            if HB_ISLOGICAL( lActive )
               s_aTasks[ n, 4 ] := lActive
            endif
         endif
         hb_mutexUnlock( s_mutex )
      endif
   return lOldActive

   function hb_backgroundTime( nHandler, nMilliSec )
      local lOldMilliSec := .f., n
      if HB_ISNUMERIC( nHandler )
         hb_backgroundInit()
         hb_mutexLock( s_mutex )
         if ( n := ascan( s_aTasks, { |x| x[ 1 ] == nHandler } ) ) != 0
            lOldMilliSec := s_aTasks[ n, 3 ]
            if HB_ISNUMERIC( nMilliSec )
               s_aTasks[ n, 3 ] := nMilliSec
            endif
         endif
         hb_mutexUnlock( s_mutex )
      endif
   return lOldMilliSec

I haven't tested above code. I've just written it as an example.

best regards,
Przemek
From cvc at oohg.org  Sun Dec  7 13:04:28 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Sun Dec  7 13:04:34 2008
Subject: [Harbour] about GTXWC
In-Reply-To: <20081207161519.GA24236@34-mo7-2.acn.waw.pl>
References: <493BD129.7030500@oohg.org>
	<20081207161519.GA24236@34-mo7-2.acn.waw.pl>
Message-ID: <493C102C.8090709@oohg.org>

Przemyslaw Czerpak escribi?:

> 
> hbmk -n -w -es2 tst.prg -gtxwc && ./tst

very thanks!!!

I think that I missing any

I'm trying but obtain...


root@ubuntu:/usr/src/harbour/tests# hbmk -n -es2 hello.prg -gtxwc && ./hello
Harbour 1.1.0dev (Rev. 9969)
Copyright (c) 1999-2008, http://www.harbour-project.org/
Compiling 'hello.prg'...
Lines 11, Functions/Procedures 1
Generating C source output to 'hello.c'... Done.
/usr/lib/gcc/i486-linux-gnu/4.2.4/../../../../lib/crt1.o: In function `_start':
(.text+0x18): undefined reference to `main'
./hello.o: In function `hb_vm_SymbolInit_HELLO':
hello.c:(.text+0x2e): undefined reference to `hb_vmProcessSymbolsEx'
./hello.o: In function `HB_FUN_MAIN':
hello.c:(.text+0x50): undefined reference to `hb_vmExecute'
./hello.o:(.data+0x18): undefined reference to `HB_FUN_QOUT'
/tmp/cc6ui7ch.o: In function `_hb_lnk_ForceLink_build':
hb-build-root-9323.c:(.text+0x7): undefined reference to `HB_FUN_HB_GT_XWC'
/tmp/cc6ui7ch.o: In function `hb_lnk_SetDefault_build':
hb-build-root-9323.c:(.text+0x12): undefined reference to `hb_gt_szNameDefault'
collect2: ld devolvi? el estado de salida 1
root@ubuntu:/usr/src/harbour/tests#

anybody help me ?

best regards
Ciro

-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From Kevin at RawFedDogs.net  Sun Dec  7 13:06:11 2008
From: Kevin at RawFedDogs.net (Kevin Monceaux)
Date: Sun Dec  7 13:06:22 2008
Subject: [Harbour] FreeBSD harbour port maintainer
In-Reply-To: <20081207154619.GA4751@34-mo7-2.acn.waw.pl>
References: <AFB948164110ED43B5EB849E8DEEF03815F177@SRV02.deltain.net>
	<alpine.LNX.2.00.0812062021440.29569@Blaidd-Drwg.RawFedDogs.net>
	<20081207154619.GA4751@34-mo7-2.acn.waw.pl>
Message-ID: <alpine.LNX.2.00.0812071202330.29569@Blaidd-Drwg.RawFedDogs.net>

Przemek,

On Sun, 7 Dec 2008, Przemyslaw Czerpak wrote:

> Can you send this makefile and script to this list?
> Maybe I'll be able to help you.

Sure.  Well, as I said I eliminated the additional Makefile and script that 
was in the 0.44.0 FreeBSD port.  Attached is my current version of a 
Harbour 1.0.1 FreeBSD Port.


Kevin
http://www.RawFedDogs.net
http://www.WacoAgilityGroup.org
Bruceville, TX

Si hoc legere scis nimium eruditionis habes.
Longum iter est per praecepta, breve et efficax per exempla!!!
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Harbour-1.0.1-FreeBSDPort.tar.bz2
Type: application/octet-stream
Size: 2986 bytes
Desc: 
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081207/55a025e8/Harbour-1.0.1-FreeBSDPort.tar.obj
From cvc at oohg.org  Sun Dec  7 14:07:47 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Sun Dec  7 14:07:52 2008
Subject: [Harbour] about GTXWC
In-Reply-To: <493C102C.8090709@oohg.org>
References: <493BD129.7030500@oohg.org>
	<20081207161519.GA24236@34-mo7-2.acn.waw.pl>
	<493C102C.8090709@oohg.org>
Message-ID: <493C1F03.4090400@oohg.org>

Ciro Vargas Clemow escribi?:
> Przemyslaw Czerpak escribi?:
> 
>>
>> hbmk -n -w -es2 tst.prg -gtxwc && ./tst
> 
> very thanks!!!



resolved !!!

best regards
Ciro

> 
-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From hbco2 at sbcglobal.net  Sun Dec  7 14:28:45 2008
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Sun Dec  7 14:28:51 2008
Subject: [Harbour] about GTXWC
In-Reply-To: <20081207161519.GA24236@34-mo7-2.acn.waw.pl>
References: <493BD129.7030500@oohg.org>
	<20081207161519.GA24236@34-mo7-2.acn.waw.pl>
Message-ID: <1228678125.3815.0.camel@hblx.340cst>


On Sun, 2008-12-07 at 17:15 +0100, Przemyslaw Czerpak wrote:
> On Sun, 07 Dec 2008, Ciro Vargas Clemow wrote:
> > Hi all:
> > I need a working sample (prg) (in linux ) in order to test gtxwc.
> > anybody can I help me?
> 
>    /* tst.prg */
>    proc main()
>       allert( "Hello World !!!" )
>    return
> 
> hbmk -n -w -es2 tst.prg -gtxwc && ./tst
> 
> best regards,
> Przemek
> _______________________________________________


wbs@hblx:~/source/puzzles/hello> cat hello.prg
* I need a working sample (prg) (in linux ) in order to test gtxwc.
* anybody can I help me?

   /* tst.prg */
   proc main()
*     allert( "Hello World !!!" )
      alert( "Hello World !!!" )
   return

* hbmk -n -w -es2 tst.prg -gtxwc && ./tst

* best regards,
* Przemek
wbs@hblx:~/source/puzzles/hello> hbmk -n -w -es2 hello.prg -gtxwc 
Harbour 1.1.0dev (Rev. 9894)
Copyright (c) 1999-2008, http://www.harbour-project.org/
Compiling 'hello.prg'...
Lines 13, Functions/Procedures 1
Generating C source output to 'hello.c'... Done.
/usr/lib/gcc/i586-suse-linux/4.2.1/../../../crt1.o: In function
`_start':
(.text+0x18): undefined reference to `main'
./hello.o: In function `hb_vm_SymbolInit_HELLO':
hello.c:(.text+0x2e): undefined reference to `hb_vmProcessSymbolsEx'
./hello.o: In function `HB_FUN_MAIN':
hello.c:(.text+0x50): undefined reference to `hb_vmExecute'
./hello.o:(.data+0x18): undefined reference to `HB_FUN_ALERT'
/tmp/ccPaRa0i.o: In function `_hb_lnk_ForceLink_build':
hb-build-wbs-3985.c:(.text+0x7): undefined reference to
`HB_FUN_HB_GT_XWC'
/tmp/ccPaRa0i.o: In function `hb_lnk_SetDefault_build':
hb-build-wbs-3985.c:(.text+0x12): undefined reference to
`hb_gt_szNameDefault'
collect2: ld returned 1 exit status


From hbco2 at sbcglobal.net  Sun Dec  7 14:32:57 2008
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Sun Dec  7 14:33:02 2008
Subject: [Harbour] about GTXWC
In-Reply-To: <493C1F03.4090400@oohg.org>
References: <493BD129.7030500@oohg.org>
	<20081207161519.GA24236@34-mo7-2.acn.waw.pl>
	<493C102C.8090709@oohg.org> <493C1F03.4090400@oohg.org>
Message-ID: <1228678377.3815.2.camel@hblx.340cst>


On Sun, 2008-12-07 at 14:07 -0500, Ciro Vargas Clemow wrote:
> Ciro Vargas Clemow escribi?:
> resolved !!!

What is the magic?

Bill


From druzus at acn.waw.pl  Sun Dec  7 14:58:43 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sun Dec  7 14:56:39 2008
Subject: [Harbour] FreeBSD harbour port maintainer
In-Reply-To: <alpine.LNX.2.00.0812071202330.29569@Blaidd-Drwg.RawFedDogs.net>
References: <AFB948164110ED43B5EB849E8DEEF03815F177@SRV02.deltain.net>
	<alpine.LNX.2.00.0812062021440.29569@Blaidd-Drwg.RawFedDogs.net>
	<20081207154619.GA4751@34-mo7-2.acn.waw.pl>
	<alpine.LNX.2.00.0812071202330.29569@Blaidd-Drwg.RawFedDogs.net>
Message-ID: <20081207195843.GA26195@34-mo7-2.acn.waw.pl>

On Sun, 07 Dec 2008, Kevin Monceaux wrote:

Hi Kevin,

> Sure.  Well, as I said I eliminated the additional Makefile and script that 
> was in the 0.44.0 FreeBSD port.  Attached is my current version of a 
> Harbour 1.0.1 FreeBSD Port.

Just few notes about BSD Makefile:


> LIB_DEPENDS=	slang.1:${PORTSDIR}/devel/libslang

Harbour can be compiled without slang libraries. Just simply GTSLN
will not be created so it's not strictly necessary. Also now SLANG2
which supports UNICODE is rather used instead of SLANG1. Harbour
automatically detects SLANG version and can be compiled with 1, 2
and some unofficial slang1 versions with UNICODE support.

> # Not 64-bit clean
> ONLY_FOR_ARCHS=	i386

It's not longer true. Now Harbour can be build on any 32/64 bit
little and big endian platforms also with strict memory alignment.

> USE_BISON=	build

Bison is not necessary to rebuild Harbour for source code.
It's only necessary for developers who want to change Harbour
grammar rules.

> MAKE_ENV+=	HARBOURDIR=${WRKSRC}				\
> 		HB_ARCHITECTURE=bsd				\
> 		HB_COMPILER=gcc					\
> 		HB_BIN_INSTALL=${PREFIX}/bin			\
> 		C_USR=-DHB_FREEBSD_POSIX_BUG			\
> 		HB_INC_INSTALL=${PREFIX}/include/harbour	\
> 		HB_LEX=FLEX					\
> 		HB_LIB_INSTALL=${PREFIX}/lib/harbour		\
> 		HB_GT_LIB=gtcrs

C_USR=-DHB_FREEBSD_POSIX_BUG - HB_FREEBSD_POSIX_BUG is not use by
current Harbour source code so it's not necesary.
HB_LEX=FLEX - Harbour does not use FLEX so it's not necesary.
HB_GT_LIB=gtcrs - now by default Harbour in *nixes uses GTTRM
which does not need any external libraries like curses. It should
also work well in FreeBSD so I suggest to remove it too. If GTTRM
does not work correctly then default GT for BSD builds should be
changed. BTW it will be good to test if it works correctly in
pure BSD console (screen output and escape key decoding). I do not
remember any test results for it.

I also committed modifications which add HB_CCACHE to config/bsd/gcc.cf
definitions so you should be able to use it directly instead of modifying
this file.
The file list in pkg-plist should be updated (if it's not generated
automatically). You can use mpkg_tgz.sh to create Harbour binaries
and extract the tar.gz archive from it to see the complete list of
included files.

best regards,
Przemek
From cvc at oohg.org  Sun Dec  7 15:01:42 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Sun Dec  7 15:01:46 2008
Subject: [Harbour] about GTXWC
In-Reply-To: <1228678377.3815.2.camel@hblx.340cst>
References: <493BD129.7030500@oohg.org>	<20081207161519.GA24236@34-mo7-2.acn.waw.pl>	<493C102C.8090709@oohg.org>
	<493C1F03.4090400@oohg.org> <1228678377.3815.2.camel@hblx.340cst>
Message-ID: <493C2BA6.5020208@oohg.org>

Bill Smith escribi?:
> On Sun, 2008-12-07 at 14:07 -0500, Ciro Vargas Clemow wrote:
>> Ciro Vargas Clemow escribi?:
>> resolved !!!
> 
> What is the magic?

you must uncomment in harbour hbsetup.h  stdmain

/* #define HB_MAIN_STD */

#define HB_MAIN_STD


regards
Ciro
-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From cvc at oohg.org  Sun Dec  7 15:02:33 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Sun Dec  7 15:02:35 2008
Subject: [Harbour] about GTXWC
In-Reply-To: <1228678377.3815.2.camel@hblx.340cst>
References: <493BD129.7030500@oohg.org>	<20081207161519.GA24236@34-mo7-2.acn.waw.pl>	<493C102C.8090709@oohg.org>
	<493C1F03.4090400@oohg.org> <1228678377.3815.2.camel@hblx.340cst>
Message-ID: <493C2BD9.2090301@oohg.org>

Bill Smith escribi?:
> On Sun, 2008-12-07 at 14:07 -0500, Ciro Vargas Clemow wrote:
>> Ciro Vargas Clemow escribi?:
>> resolved !!!
> 
> What is the magic?
> 


uncomment and make again harbour

regards

Ciro
-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From lorenzo.fiorini at gmail.com  Sun Dec  7 15:30:13 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Dec  7 15:30:17 2008
Subject: [Harbour] Build xhgtk inside harbour
In-Reply-To: <20081207155422.GB4751@34-mo7-2.acn.waw.pl>
References: <9257026e0812060002pac29f4y3370e699d4d47ff1@mail.gmail.com>
	<20081207155422.GB4751@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0812071230r4991556bq1d98e3404db680a2@mail.gmail.com>

On Sun, Dec 7, 2008 at 4:54 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> BTW do you want to integrate XHGTK with Harbour contrib?
> Don't you think it will be better to keep it as separate
> project and only add some integration tools.

You're right but as we've seen lately it's not easy for a newbie to
get it built and this gets even worst if you plan to have ti for Lin,
Win and OSX.

There are many build.sh, makefiles, envvar to set and a newbie is
always in front of many different options.

Under Win or OSX, getting a working setup that uses some contribs like
gd or mysql requires many steps.

I'm trying to create the easiest possible setup and to define the
"defaults" that hide the differences between the 3 OS that I support
and document where to get the dependencies and how to install them. My
goal is to remove every "misleading" doc or examples for this I'm
thinking to start a new project that offer a "distribution" ready to
use if the defaults will be accepted.

Actually I can build under Lin and Win without setting any envvar (
using /opt/harbour as default install path since it's usable in all
the 3 OS ). I'm documenting how to setup external dependencies for
zip, gd, odbc, curl, pgsql, mysql, xhgtk.

I plan to provide a skeleton Makefiles to create binaries, libs, cgi and hrb.

F.e. In the makefiles I've replace HB_ARCHITECTURE with:

...
OS=$(shell uname -s | tr -d "[-]" | tr '[A-Z]' '[a-z]')
...
ifneq (,$(findstring mingw32,$(OS)))
...
ifneq (,$(findstring linux,$(OS)))
...
ifneq (,$(findstring darwin,$(OS)))

0but the differences about the use of the shared libs between Lin and
Win are still present.

F.e. to link against gd and pgsql you need to use sth like:
   EXT_LIST=$(HARBOUR_DYN_DIR)/hbgd.dll /opt/local/bin/libgd2.dll
$(HARBOUR_DYN_DIR)/hbpgsql.dll /opt/pgsql/bin/libpq.dll

What do you think about adding switches like: -gd-shared, -gd-static,
-pgsql-shared, ...?

BTW I've few showstoppers:

1 - in hb-func.sh using hb_exesuf="exe" prevent to create cgi binaries
called myprog.cgi.
I've set it to "" like in linux but then the strip step complains. So
far I couldn't find the right solution ( both 1.0.1 and 1.1 )

2 - gtwvt is "broken" in the sense the fontsize selection doesn't work
anymore see my msg "gtvwt problem" ( 1.1 only ).
What do you think about creating a GT reference test so that every GT
change can be checked against it?

3 - gtxwc doesn't support palette definition and HB_GTI_CLOSABLE.
Actually I'm hacking the colors constants and I've commented out
"s_atomDelWin" message.

Could you kindly give me some hints?

best regards,
Lorenzo
From info at fsgiudice.com  Sun Dec  7 15:35:13 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Dec  7 15:35:24 2008
Subject: [Harbour] hblognet, inet and threads
In-Reply-To: <20081207170706.GA5497@34-mo7-2.acn.waw.pl>
References: <49385BA5.1070607@fsgiudice.com>	<20081205103748.GA847@34-mo7-2.acn.waw.pl>	<4939496F.903@fsgiudice.com>
	<20081207170706.GA5497@34-mo7-2.acn.waw.pl>
Message-ID: <493C3381.3090604@fsgiudice.com>

Hi Przemek,


Il 07/12/2008 18.07, Przemyslaw Czerpak ha scritto:
> 
> In UDP packets can be lost by definition and it's programmer job
> to detect it and repeat messages if necessary.
> Here MT mode can help only indirectly by reducing some time conditions
> but it does not eliminate the problem.

Yes, I know. What I want to say is that in MT mode I loose less packet 
than in ST, surely for reduced time execution respect to ST mode. That 
it is better.

> 
  > The default ST code should have additional protection for 
setting/restoring
> tasks or the task list should be local to thread.
> Using MT you can also create alternative version of background tasks
> without modifing main HVM loop or other HVM structures.
> You can simply create separate thread which will execute your tasks.
> F.e. sth like:
[snip]
> 
> I haven't tested above code. I've just written it as an example.
> 
Very interesting, I will give it a look to implement BT in MT mode.
Thank you.

Best Regards

Francesco
From rodrmigu at gmail.com  Sun Dec  7 15:43:01 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Sun Dec  7 15:43:05 2008
Subject: [Harbour] Build xhgtk inside harbour
In-Reply-To: <9257026e0812060002pac29f4y3370e699d4d47ff1@mail.gmail.com>
References: <9257026e0812060002pac29f4y3370e699d4d47ff1@mail.gmail.com>
Message-ID: <80b05d460812071243w11d77605i77d797c0d46bd9a3@mail.gmail.com>

Hi Lorenzo,

> 1 - rewrite Makefiles using harbour standards ( and rename all the
> files lowercase ).
> This will create one lib for every dir but it seems more "gtk like"
> and since the link will be managed by hb* the user will not see the
> difference

We need keep in mind that we have xharbour users as well, so, we need
try to keep both configurations if possible.

Regards,
Rodrigo
From lorenzo.fiorini at gmail.com  Sun Dec  7 16:10:53 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sun Dec  7 16:10:56 2008
Subject: [Harbour] Build xhgtk inside harbour
In-Reply-To: <80b05d460812071243w11d77605i77d797c0d46bd9a3@mail.gmail.com>
References: <9257026e0812060002pac29f4y3370e699d4d47ff1@mail.gmail.com>
	<80b05d460812071243w11d77605i77d797c0d46bd9a3@mail.gmail.com>
Message-ID: <9257026e0812071310k4327e525rbec9548511f5ad4b@mail.gmail.com>

On Sun, Dec 7, 2008 at 9:43 PM, Rodrigo Miguel <rodrmigu@gmail.com> wrote:

> We need keep in mind that we have xharbour users as well, so, we need
> try to keep both configurations if possible.

I know, for this I think it would be better to have a different trees.

The xhgtk developers are free to implement what they need, while I
want a xhgtk "Harbour oriented". Not because I think they are wrong
and I'm right but simply to easy the setup for the newbie that doesn't
want to know the differences between Harbour and xHarbour.

My dream is provide a setup that require only:
download a source zip, unzip in a user dir, make_gnu.sh install and
start using hb* scripts under Lin, Win, OSX.

Of course I can only document how to install the prerequisites in Win
or OSX but if we reduce the options ( paths, C compilers, contribs )
it shouldn't be too complex.

best regards,
Lorenzo
From hbco2 at sbcglobal.net  Sun Dec  7 16:15:41 2008
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Sun Dec  7 16:15:49 2008
Subject: [Harbour] Build xhgtk inside harbour
In-Reply-To: <9257026e0812071230r4991556bq1d98e3404db680a2@mail.gmail.com>
References: <9257026e0812060002pac29f4y3370e699d4d47ff1@mail.gmail.com>
	<20081207155422.GB4751@34-mo7-2.acn.waw.pl>
	<9257026e0812071230r4991556bq1d98e3404db680a2@mail.gmail.com>
Message-ID: <1228684541.3815.13.camel@hblx.340cst>

Thank You Lorenzo, you are absolutely correct, simplicity == elegance
is critical.  This is not only the case for today, but down the road
when changes and incompatibilities could make tracking what library and
what combination of instructions or options or commented instructions in
source might be needed to compile a harbour .prg file nothing short of
the spaghetti that once plagued procedural programming.

Right now, a  ? "hello, world" program build from "hbmk hello" at best
yields a blank screen in a terminal window on both SuSE Linux and
Windows XP.

Bill



On Sun, 2008-12-07 at 21:30 +0100, Lorenzo Fiorini wrote:
> On Sun, Dec 7, 2008 at 4:54 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:
> 
> > BTW do you want to integrate XHGTK with Harbour contrib?
> > Don't you think it will be better to keep it as separate
> > project and only add some integration tools.
> 
> You're right but as we've seen lately it's not easy for a newbie to
> get it built and this gets even worst if you plan to have ti for Lin,
> Win and OSX.
> 
> There are many build.sh, makefiles, envvar to set and a newbie is
> always in front of many different options.
> 
> Under Win or OSX, getting a working setup that uses some contribs like
> gd or mysql requires many steps.
> 
> I'm trying to create the easiest possible setup and to define the
> "defaults" that hide the differences between the 3 OS that I support
> and document where to get the dependencies and how to install them. My
> goal is to remove every "misleading" doc or examples for this I'm
> thinking to start a new project that offer a "distribution" ready to
> use if the defaults will be accepted.
> 
> Actually I can build under Lin and Win without setting any envvar (
> using /opt/harbour as default install path since it's usable in all
> the 3 OS ). I'm documenting how to setup external dependencies for
> zip, gd, odbc, curl, pgsql, mysql, xhgtk.
> 
> I plan to provide a skeleton Makefiles to create binaries, libs, cgi and hrb.
> 
> F.e. In the makefiles I've replace HB_ARCHITECTURE with:
> 
> ...
> OS=$(shell uname -s | tr -d "[-]" | tr '[A-Z]' '[a-z]')
> ...
> ifneq (,$(findstring mingw32,$(OS)))
> ...
> ifneq (,$(findstring linux,$(OS)))
> ...
> ifneq (,$(findstring darwin,$(OS)))
> 
> 0but the differences about the use of the shared libs between Lin and
> Win are still present.
> 
> F.e. to link against gd and pgsql you need to use sth like:
>    EXT_LIST=$(HARBOUR_DYN_DIR)/hbgd.dll /opt/local/bin/libgd2.dll
> $(HARBOUR_DYN_DIR)/hbpgsql.dll /opt/pgsql/bin/libpq.dll
> 
> What do you think about adding switches like: -gd-shared, -gd-static,
> -pgsql-shared, ...?
> 
> BTW I've few showstoppers:
> 
> 1 - in hb-func.sh using hb_exesuf="exe" prevent to create cgi binaries
> called myprog.cgi.
> I've set it to "" like in linux but then the strip step complains. So
> far I couldn't find the right solution ( both 1.0.1 and 1.1 )
> 
> 2 - gtwvt is "broken" in the sense the fontsize selection doesn't work
> anymore see my msg "gtvwt problem" ( 1.1 only ).
> What do you think about creating a GT reference test so that every GT
> change can be checked against it?
> 
> 3 - gtxwc doesn't support palette definition and HB_GTI_CLOSABLE.
> Actually I'm hacking the colors constants and I've commented out
> "s_atomDelWin" message.
> 
> Could you kindly give me some hints?
> 
> best regards,
> Lorenzo
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From info at fsgiudice.com  Sun Dec  7 21:15:21 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sun Dec  7 21:15:31 2008
Subject: [Harbour] hblognet, inet and threads
In-Reply-To: <20081207170706.GA5497@34-mo7-2.acn.waw.pl>
References: <49385BA5.1070607@fsgiudice.com>	<20081205103748.GA847@34-mo7-2.acn.waw.pl>	<4939496F.903@fsgiudice.com>
	<20081207170706.GA5497@34-mo7-2.acn.waw.pl>
Message-ID: <493C8339.9070805@fsgiudice.com>

Hi Przemek,

Il 07/12/2008 18.07, Przemyslaw Czerpak ha scritto:
> 
> I haven't tested above code. I've just written it as an example.
> 
Are SET() functions Thread shared ?
I'm trying to implement your sample for background tasks, but is seems 
to me that SET are not working between threads.
In my repository I have implemented _SET_BACKGROUND_TASKS.
If I change it to TRUE inside Thread it works, but if I change it 
outside thread (inside main thread) in thread I see old values.

Could you confirm it ?

TIA

Best Regards

Francesco
From Kevin at RawFedDogs.net  Sun Dec  7 22:44:35 2008
From: Kevin at RawFedDogs.net (Kevin Monceaux)
Date: Sun Dec  7 22:44:49 2008
Subject: [Harbour] FreeBSD harbour port maintainer
In-Reply-To: <20081207195843.GA26195@34-mo7-2.acn.waw.pl>
References: <AFB948164110ED43B5EB849E8DEEF03815F177@SRV02.deltain.net>
	<alpine.LNX.2.00.0812062021440.29569@Blaidd-Drwg.RawFedDogs.net>
	<20081207154619.GA4751@34-mo7-2.acn.waw.pl>
	<alpine.LNX.2.00.0812071202330.29569@Blaidd-Drwg.RawFedDogs.net>
	<20081207195843.GA26195@34-mo7-2.acn.waw.pl>
Message-ID: <alpine.LNX.2.00.0812072132080.29569@Blaidd-Drwg.RawFedDogs.net>

Przemek,

On Sun, 7 Dec 2008, Przemyslaw Czerpak wrote:

> Just few notes about BSD Makefile:

All of the items you noted were included from the 0.44.0 FreeBSD port 
which I used as a starting point.  I'll give all of your suggestions a try 
as soon as I have time.  Thanks for all the tips.

>> LIB_DEPENDS=	slang.1:${PORTSDIR}/devel/libslang
>
> Harbour can be compiled without slang libraries. Just simply GTSLN
> will not be created so it's not strictly necessary. Also now SLANG2
> which supports UNICODE is rather used instead of SLANG1. Harbour
> automatically detects SLANG version and can be compiled with 1, 2
> and some unofficial slang1 versions with UNICODE support.

So, just to make sure I understand, does Harbour have Unicode support with 
Slang 2, and some versions of Slang 1?  If so, I could add Slang 2 as an 
optional dependency to the port and note it would enable Unicode support. 
The programs I've compiled with Harbour built via the port I posted are 
getting linked against /usr/local/lib/libslang-utf8.so.1, but I'm not able 
to enter Unicode characters.  I'll give Slang 2 a try.

> The file list in pkg-plist should be updated (if it's not generated
> automatically). You can use mpkg_tgz.sh to create Harbour binaries
> and extract the tar.gz archive from it to see the complete list of
> included files.

That's one thing I don't FreeBSD ports.  There's not a way to 
automatically generate the pkg-plist file.  There are a few semi-automatic 
techniques to generate the file, but they do still involve a little hand 
editing.



Kevin
http://www.RawFedDogs.net
http://www.WacoAgilityGroup.org
Bruceville, TX

Si hoc legere scis nimium eruditionis habes.
Longum iter est per praecepta, breve et efficax per exempla!!!

From lorenzo.fiorini at gmail.com  Mon Dec  8 01:36:59 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Dec  8 01:37:03 2008
Subject: [Harbour] Build xhgtk inside harbour
In-Reply-To: <1228684541.3815.13.camel@hblx.340cst>
References: <9257026e0812060002pac29f4y3370e699d4d47ff1@mail.gmail.com>
	<20081207155422.GB4751@34-mo7-2.acn.waw.pl>
	<9257026e0812071230r4991556bq1d98e3404db680a2@mail.gmail.com>
	<1228684541.3815.13.camel@hblx.340cst>
Message-ID: <9257026e0812072236wbf2fec8h972cf65a1676116@mail.gmail.com>

On Sun, Dec 7, 2008 at 10:15 PM, Bill Smith <hbco2@sbcglobal.net> wrote:

> Thank You Lorenzo, you are absolutely correct, simplicity == elegance
> is critical.

Bill, thanks for your support.

Harbour was created by former Cl*pper programmers with the main goal
to be 100% compatible to it so many things have always been considered
"known".

I had to introduce to Harbour programmers that came from PHP and that
never used an xbase language so I've learned that what can be obvious
for me can be completely "alien" for the majority of the developers.

Clearly a language need to be studied but we know that the first 10
minutes are critical to take the decision to proceed.
My aim is to give what you wisely called "the feeling of simplicity ==
elegance" in those 10 minutes.

best regards,
Lorenzo
From bedipritpal at hotmail.com  Mon Dec  8 01:50:57 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Dec  8 01:51:01 2008
Subject: [Harbour] 2008-12-07 22:22 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20890290.post@talk.nabble.com>


2008-12-07 22:22 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/makefile
  * harbour/contrib/gtwvg/common.mak
    + wvg3stat.prg
    + wvgbitmp.prg
    + wvgmle.prg
    + wvgsle.prg

  * harbour/contrib/gtwvg/wvgparts.ch
    + New constants to handle new classes.

  + harbour/contrib/gtwvg/wvgbitmp.prg
    + Code skelton of WvgBitmap class ( non-functional yet ).
  + harbour/contrib/gtwvg/wvg3stat.prg
    + Wvg3State() class compatible to Xbase++ Xbp3State().
  + harbour/contrib/gtwvg/wvgmle.prg
    + WvgMLE() class compatible with Xbase++ XbpMLE().
  + harbour/contrib/gtwvg/wvgsle.prg
    + WvgSLE() class compatible with Xbase++ XbpSLE().

  * harbour/contrib/gtwvg/wvgwin.c
    + Added new functions for new classes.

  * harbour/contrib/gtwvg/wvgcheck.prg
  * harbour/contrib/gtwvg/wvgdatar.prg
  * harbour/contrib/gtwvg/wvglistb.prg
  * harbour/contrib/gtwvg/wvgphdlr.prg
  * harbour/contrib/gtwvg/wvgstatb.prg
  * harbour/contrib/gtwvg/wvgradio.prg
  * harbour/contrib/gtwvg/wvgstatc.prg
  * harbour/contrib/gtwvg/wvgtreev.prg
  * harbour/contrib/gtwvg/wvghwnd.prg
    ; Heavy changes in class framework.
    
  * harbour/contrib/gtwvg/tests/demowvg.prg
    + Added functionality of Wvg3State() and WvgSLE(), WvgMLE() classes.

    ; IMPLEMENTATION : Point to <Xbase++ Dialogs> menu option, click on any
                       Active-X Control, Play with all controls : clicks,
                       double clicks, resize. Watch statusbar panels, click
on 
                       <Tools> toolbar button, the resulting panel contains
                       latest classes SLE, MLE, CHECKBOX, RADIO, 3STATE.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-12-07-22%3A22-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20890290p20890290.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From lorenzo.fiorini at gmail.com  Mon Dec  8 03:18:53 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Dec  8 03:19:06 2008
Subject: [Harbour] HB_DLLIBS and shared binaries
In-Reply-To: <20081207160556.GC4751@34-mo7-2.acn.waw.pl>
References: <9257026e0812050658w6c63a767if8868328c649b4ca@mail.gmail.com>
	<20081205171639.GA26718@34-mo7-2.acn.waw.pl>
	<9257026e0812050958o7d47fecbi8139fe0e960f3d2f@mail.gmail.com>
	<20081207160556.GC4751@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0812080018s72aa5353vf4467242b901d293@mail.gmail.com>

On Sun, Dec 7, 2008 at 5:05 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> -L and -l passed to hb-mkslib works as gcc / libtool parameters and
> it's very important functionality if you want to create references
> inside shared library not in final binaries.

You're right, in Linux everything is easy since -L -l works for both
the static and the shared libs, but in Win passing a shared lib means
to provide the full path of a dll and the dll that it eventually refer
to.

F.e if I want to create a shared lib in Win that uses gd and pgsql I
need to add:

EXT_LIST=$(HARBOUR_DYN_DIR)/hbgd.dll /opt/local/bin/libgd2.dll
$(HARBOUR_DYN_DIR)/hbpgsql.dll /opt/pgsql/bin/libpq.dll

So every contrib potentially adds two or more dlls to refer.

Right now I'm testing to replace HB_INC_xyz env var with HB_DIR_xyz
that point to the "root" dir of the extension so that in the Makefiles
I can use $(HB_DIR_xyz)/include and in the hb-func.sh
$(HB_DIR_xyz)/lib ( unfortunately mysql under Win has lib/opt and
lib/debug so I'll need to hard code lib/opt ) and I'm adding switches
like -gd -pgsql -mysql -curl -odbc to the hb-func.sh.

What do you think about it?

And what about to add a sub switch like -gd=[shared|static]

best regards,
Lorenzo
From mbelgrano at deltain.it  Mon Dec  8 06:06:04 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Dec  8 06:06:08 2008
Subject: [Harbour] 2008-12-06 19:08 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <20877527.post@talk.nabble.com>
References: <20877527.post@talk.nabble.com>
Message-ID: <609353e70812080306r1c6b3dd4tcb1049930fc24aa9@mail.gmail.com>

Pritpal Bedi
What do you think about post your question in xbase++  ng?
Can I invite you (and all people here) on facebook on worlwide  harbour
project group <http://www.facebook.com/home.php#/group.php?gid=48795263775>where
you can share you favourite link and screenshoot ?


2008/12/7 Pritpal Bedi <bedipritpal@hotmail.com>

>
>
>    ;REQUEST : Can someone familiar with Xbase++ come forward to
>               write a small test program based on implemented classes.
>               Please exclude all that functionality which is not yet
>               implemented.
>
> Regards
> Pritpal Bedi
> --
> View this message in context:
> http://www.nabble.com/2008-12-06-19%3A08-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20877527p20877527.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081208/d78dd5ca/attachment.html
From dbtopas at dbtopas.lt  Mon Dec  8 09:53:01 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Dec  8 09:51:14 2008
Subject: [Harbour] hblognet, inet and threads
In-Reply-To: <20081207170706.GA5497@34-mo7-2.acn.waw.pl>
References: <49385BA5.1070607@fsgiudice.com>	<20081205103748.GA847@34-mo7-2.acn.waw.pl>	<4939496F.903@fsgiudice.com>
	<20081207170706.GA5497@34-mo7-2.acn.waw.pl>
Message-ID: <493D34CD.2050802@dbtopas.lt>

Hi,


Przemyslaw Czerpak wrote:
> You can simply create separate thread which will execute your tasks.
> F.e. sth like:
> 
>    static function hb_backgroundThread()
>       local n, nTime
>       while !s_lStop
>          hb_mutexLock( s_mutex )
>          nTime := s_nLastTime
>     ...


thanks for a great sample code. It is great because it makes me to ask a 
few questions, and to understand the details of process sync.

There are  things I do not like in this sample, and I'd like to make it 
more perfect. The first thing I want to optimize is loop containing 
sleep(0.01). This thread will require CPU 100 times per second, but 
maybe my background task will be executed only every 5 minutes. I do not 
want to waste a CPU time.
So, the first question is, can I optimize my loop to avoid time checking 
100 times per second. I've tried to do this way:

    static s_nDays := 0

    static function hb_backgroundThread()
       local n, nTime, nMin
       while !s_lStop
          hb_mutexLock( s_mutex )
          nTime := seconds() + s_nDays
          if nTime < s_nLastTime
             nTime += 24*60*60
             s_nDays += 24*60*60
          endif
          s_nLastTime = nTime
          nMin := nTime + 24*60*60
          nTime *= 1000
          for n := 1 to s_nCounter
             // {nHandle, bAction, nMilliSec, lActive, nNextTime}
             if s_aTasks[ n, 4 ] .and. s_aTasks[ n, 5 ] <= nTime
                eval( s_aTasks[ n, 2 ] )
                s_aTasks[ n, 5 ] += s_aTasks[ n, 3 ]
             endif
             nMin := MIN( nMin, s_aTasks[ n, 5 ] )
          next
          hb_mutexUnlock( s_mutex )
          hb_idleSleep( nMin / 1000 )
       enddo
    return nil

The second thing I want to implement is background thread exit, i.e., I 
want to send some signal/mutex/semaphore/event from main thread to the 
background thread and wait for exit using hb_threadJoin(). I'll need 
some method to interrupt (possibly long) sleep.
The other problem is, how to add new background tasks? I will also need 
to interrupt sleep, because the execution time for new task can be 
earlier than a time for existing tasks.
So, how can I implement an interruptable sleep and all required 
synchronization objects?


Best regards,
Mindaugas
From mbelgrano at deltain.it  Mon Dec  8 10:25:43 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Dec  8 10:25:50 2008
Subject: [Harbour] 2008-12-04 23:56 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <20849382.post@talk.nabble.com>
References: <20849382.post@talk.nabble.com>
Message-ID: <609353e70812080725r1d91a3bbm5842bd2500f0410@mail.gmail.com>

C:\harbour\contrib\gtwvg\tests>hBMK_B32 -mt  demowvg
demowvg.prg(33) Error F0029  Can't open #include file 'wvgparts.ch'
1 error

No code generated
Error E2194: Could not find file 'demowvg.c'



2008/12/5 Pritpal Bedi <bedipritpal@hotmail.com>

>
> 2008-12-04 23:56 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>  * harbour/contrib/gtwvg/tests/hbmk_b32.bat
>    + xhb.lib - just to take use of hb_ToOutDebug(). While under heavy
>      changes I need to keep the debugging info intact. Final sources
>      will not have this included.
>
>  * harbour/contrib/gtwvg/wvggui.c
>  * harbour/contrib/gtwvg/wvgwin.c
>  * harbour/contrib/gtwvg/wvgparts.ch
>  * harbour/contrib/gtwvg/wvtwin.ch
>  * harbour/contrib/gtwvg/winback.prg
>  * harbour/contrib/gtwvg/wvgax.prg
>  * harbour/contrib/gtwvg/wvgcrt.prg
>  * harbour/contrib/gtwvg/wvgdlg.prg
>  * harbour/contrib/gtwvg/wvglistb.prg
>  * harbour/contrib/gtwvg/wvgphdlr.prg
>  * harbour/contrib/gtwvg/wvgpushb.prg
>  * harbour/contrib/gtwvg/wvgstatb.prg
>  * harbour/contrib/gtwvg/wvgstatc.prg
>  * harbour/contrib/gtwvg/wvgtoolb.prg
>  * harbour/contrib/gtwvg/wvgtreev.prg
>  * harbour/contrib/gtwvg/wvghwnd.prg
>    + Implemented ( partially ) WvgTreeView(), WvgListBox() classes.
>    ; Heavy changes in class structure, introduction  of new functions,
>      refinement of old ones, heavy implementtaion of hb_ACallBack()s.
>
>  * harbour/contrib/gtwvg/tests/demowvg.prg
>    + Added functionality of WvtTreeView() and WvtListBox() classes.
>
>    ;TODO : Few functions in wvgwin.c are not UNICODE compliant yet.
>
> Regards
> Pritpal Bedi
> --
> View this message in context:
> http://www.nabble.com/2008-12-04-23%3A56-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20849382p20849382.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081208/b2694c5b/attachment.html
From druzus at acn.waw.pl  Mon Dec  8 10:31:01 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Dec  8 10:28:57 2008
Subject: [Harbour] 2008-12-08 16:30 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081208153101.GA3164@34-mo7-2.acn.waw.pl>

2008-12-08 16:30 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hb-mkslib.sh
    ! fixed last modification

  * harbour/doc/Makefile
  + harbour/doc/cmpopt.txt
    + added small description for Harbour compile time optimization

  * harbour/include/hbexpra.c
    + allow to use hb_mutexCreate() as static variable initializer, f.e.:
         static s_mtxarr := { "MTX1" => hb_mutexCreate(), ;
                              "MTX2" => hb_mutexCreate(), ;
                              "MTX3" => hb_mutexCreate() }
  * harbour/include/hbexprb.c
    % comment

  * harbour/source/common/expropt2.c
    + added some missing optimizations for date constants
    + added optimization for multiple negate expressions

best regards
Przemek
From mbelgrano at deltain.it  Mon Dec  8 10:46:19 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Dec  8 10:46:23 2008
Subject: [Harbour] Sample XBASE++ for gtwvg
Message-ID: <609353e70812080746v6872166fs957026fff9e16fef@mail.gmail.com>

Esempio di listato XBASE++

//////////////////////////////////////////////////////////////////////
//
//  LOGIN_G.PRG
//
//  Copyright:
//     Alaska Software Inc., (c) 1997-1999. All rights reserved.

//
//  Contents:
//     Simple login routine for GUI. This file is the end
//     for a small example that shows the migration of Clipper code. See
//     LOGIN_T.PRG (Text mode) and LOGIN_H.PRG (GUI) to get an idea about

//     code changes.
//
//   Changes :
//     - The application window is created in AppSys() as XbpDialog window
//     - The PassWord() function creates its own dialog that was painted
//       with the Xbase++ FormDesigner

//
//////////////////////////////////////////////////////////////////////

#include "Gra.ch"
#include "Xbp.ch"
#include "Appevent.ch"

PROCEDURE AppSys
   LOCAL oDlg, oXbp, aPos[2], aSize


  /*
   * Get size of the desktop to display the application window centered
   */
   aSize         := SetAppWindow():currentSize()
   aPos[1]       := (aSize[1] - 640) / 2
   aPos[2]       := (aSize[2] - 400) / 2


   oDlg          := XbpDialog():new( SetAppWindow(), , aPos, {640,400}, , .F.)
   oDlg:title    := "GUI Demo"
   oDlg:taskList := .T.
   oDlg:icon     := 1
   oDlg:close    := {|| AppQuit() }

   oDlg:create()
   oDlg:drawingArea:SetColorBG( GRA_CLR_WHITE )
   SetAppWindow( oDlg )
   oDlg:show()
RETURN

PROCEDURE AppQuit
   QUIT
RETURN

PROCEDURE Main
   LOCAL cPassWord, cUserID, oLogo

   LOCAL nEvent, mp1, mp2, oXbp

  /*
   * Display and store logo
   */
   oLogo     := DisplayLogo()
   cUserID   := Space(15)
   cPassWord := Space(15)

   PassWord( @cUserID, @cPassWord )


   IF cPassWord == "ALASKA"            // Alert() is replaced by MsgBox()
      MsgBox( "Password is correct"+Chr(10)+"Access granted" )
   ELSE
      MsgBox( "Password is wrong,"+Chr(10)+ ;

              "Access denied!" )
   ENDIF

  /*
   * Release resources for logo
   */
   oLogo:destroy()

RETURN



/*
 * Display a company logo
 *
 * - XbpStatic is used to display a bitmap showing a logo

 *
 * - The bitmap is 600 x 200 pixel in size and has the numeric ID 2001
 *   The ID is defined in an RC file
 *
 * - aSize = Size of the "drawingArea" of an XbpCrt window
 */
FUNCTION DisplayLogo

   LOCAL oLogo, aPos, aSize, drawingArea := SetAppWindow():drawingArea

   aSize         := drawingArea:currentSize()
   aPos          := { (aSize[1]-600)/2, aSize[2]-200 }
   oLogo         := XbpStatic():new( drawingArea,,aPos,{600,200})

   oLogo:type    := XBPSTATIC_TYPE_BITMAP
   oLogo:caption := 2001
   oLogo:create()
RETURN oLogo



/*
 * Login routine for entering pass word and user ID
 *
 * - More than 90% of this code is written by the Xbase++ FormDesigner.

 */
PROCEDURE PassWord( cUserID, cPassWord )
   LOCAL nEvent, mp1, mp2, oXbp, lExit
   LOCAL oDlg, oID, oPW, drawingArea

   aSize            := {250,150}
   aPos             := CenterPos( aSize,
SetAppWindow():drawingArea:currentSize() )

   mp1              := SetAppWindow():currentPos()
   aPos[1]          += mp1[1]
   aPos[2]          += mp1[2]

  /*
   * Parent is desktop, owner is application window
   */
   oDlg             := XbpDialog():new( SetAppWindow():setParent(),
SetAppWindow(), aPos, aSize, , .F.)

   oDlg:border      := XBPDLG_RAISEDBORDERTHIN_FIXED
   oDlg:title       := "Enter your ID and password!"
   oDlg:sysMenu     := .F.
   oDlg:maxButton   := .F.
   oDlg:minButton   := .F.
   oDlg:sysMenu     := .F.

   oDlg:visible     := .F.
   oDlg:close       :=  {|| PostAppEvent( xbeP_Close ) }
   oDlg:create()
   oDlg:setFontCompoundName( "8.Helv.normal" )

   drawingArea      := oDlg:drawingArea
   drawingArea:setFontCompoundName( "8.Helv.normal" )


   oXbp             := XbpStatic():new( drawingArea, , {8,84}, {80,20} )
   oXbp:caption     := "User ID:"
   oXbp:options     := XBPSTATIC_TEXT_RIGHT
   oXbp:create()

   oID              := XbpSLE():new( drawingArea, , {101,83}, {116,22} )

   oID:group        := XBP_BEGIN_GROUP
   oID:tabStop      := .T.
   oID:bufferLength := Len( cUserID )
   oID:create()

   oXbp             := XbpStatic():new( drawingArea, , {8,52}, {80,20} )
   oXbp:caption     := "Password:"

   oXbp:options     := XBPSTATIC_TEXT_RIGHT
   oXbp:create()

   oPW              := XbpSLE():new( drawingArea, , {101,51}, {116,22} )
   oPW:group        := XBP_WITHIN_GROUP
   oPW:tabStop      := .T.
   oPW:bufferLength := Len( cPassWord )

   oPW:unReadable   := .T.
   oPW:create()

   oXbp             := XbpPushButton():new( drawingArea, , {101,11}, {75,25} )
   oXbp:caption     := "OK"
   oXbp:tabStop     := .T.
   oXbp:group       := XBP_END_GROUP

   oXbp:activate    := {|| lExit := .T. }
   oXbp:keyboard    := {|nKey,x,obj| IIf( nKey == xbeK_ESC .OR. nKey
== xbeK_RETURN, ;
                                     PostAppEvent( xbeP_Activate,,,
obj ), NIL ) }

   oXbp:create()

   oDlg:show()
  /*
   * This makes the login window modal
   */
   SetAppWindow():disable()
   SetAppFocus( oID )

   lExit := .F.
   DO WHILE ! lExit
      nEvent := AppEvent( @mp1, @mp2, @oXbp )

      oXbp:handleEvent( nEvent, mp1, mp2 )
   ENDDO

   cUserID   := AllTrim( Upper( oID:getData() ) )
   cPassWord := AllTrim( Upper( oPW:getData() ) )

   SetAppWindow():enable()
   oDlg:destroy()


  /*
   * Clean up event queue
   */
   CLEAR TYPEAHEAD
RETURN



/*
 * Calculate the center position for a window from its size and a
 * reference size.
 */
STATIC FUNCTION CenterPos( aSize, aRefSize )

RETURN { Int( (aRefSize[1] - aSize[1]) / 2 ) ;
       , Int( (aRefSize[2] - aSize[2]) / 2 ) }



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081208/7da3ea67/attachment.html
From Kevin at RawFedDogs.net  Mon Dec  8 11:09:58 2008
From: Kevin at RawFedDogs.net (Kevin Monceaux)
Date: Mon Dec  8 11:10:09 2008
Subject: [Harbour] FreeBSD harbour port maintainer
In-Reply-To: <20081207195843.GA26195@34-mo7-2.acn.waw.pl>
References: <AFB948164110ED43B5EB849E8DEEF03815F177@SRV02.deltain.net>
	<alpine.LNX.2.00.0812062021440.29569@Blaidd-Drwg.RawFedDogs.net>
	<20081207154619.GA4751@34-mo7-2.acn.waw.pl>
	<alpine.LNX.2.00.0812071202330.29569@Blaidd-Drwg.RawFedDogs.net>
	<20081207195843.GA26195@34-mo7-2.acn.waw.pl>
Message-ID: <alpine.LNX.2.00.0812080956060.29569@Blaidd-Drwg.RawFedDogs.net>

Przemek,

On Sun, 7 Dec 2008, Przemyslaw Czerpak wrote:

> Just few notes about BSD Makefile:

Most of your suggestions work great!!

> HB_GT_LIB=gtcrs - now by default Harbour in *nixes uses GTTRM
> which does not need any external libraries like curses. It should
> also work well in FreeBSD so I suggest to remove it too. If GTTRM
> does not work correctly then default GT for BSD builds should be
> changed. BTW it will be good to test if it works correctly in
> pure BSD console (screen output and escape key decoding). I do not
> remember any test results for it.

I tried removing HB_GT_LIB and afterwords all text displayed by programs 
compiled with Harbour would just scroll up the screen instead of 
displaying at the positions coded via @ get/say, and also all color was 
lost.  All text was displayed as white text on a black background. It 
looks like the default GT for BSD does need to be changed.  Adding 
HB_GT_LIB=gtcrs back fixed the problem.  But, with HB_GT_LIB=gtcrs, I'm 
unable to enter unicode characters, even though Harbour detected 
libslang2.  With libslang2 and HB_GT_LIB=gtsln I'm able to enter unicode 
characters, but all the colors in my program are changed.  For example, 
text that was displayed in cyan is displayed in red, green text is 
displayed in cyan, blue text in green, etc.  Also, with gtsln some 
function keys stop working.  I don't have a program set up at the moment 
to test all of them, but I out of the ones I've tried I know F12 stops 
working.  It works with gtcrs.



Kevin
http://www.RawFedDogs.net
http://www.WacoAgilityGroup.org
Bruceville, TX

Si hoc legere scis nimium eruditionis habes.
Longum iter est per praecepta, breve et efficax per exempla!!!

From mbelgrano at deltain.it  Mon Dec  8 11:16:23 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Dec  8 11:16:27 2008
Subject: [Harbour] Re: Sample XBASE++ for gtwvg
In-Reply-To: <609353e70812080746v6872166fs957026fff9e16fef@mail.gmail.com>
References: <609353e70812080746v6872166fs957026fff9e16fef@mail.gmail.com>
Message-ID: <609353e70812080816w78f84934md9fafe08d4f1e18e@mail.gmail.com>

Good source of info
http://www.knowlexbase.com/en/software/downloads/yukon/index.html
by Dr. Hannes Ziegler 2008
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081208/5cd94130/attachment.html
From info at fsgiudice.com  Mon Dec  8 13:13:15 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Dec  8 13:13:24 2008
Subject: [Harbour] hblognet, inet and threads
In-Reply-To: <493C8339.9070805@fsgiudice.com>
References: <49385BA5.1070607@fsgiudice.com>	<20081205103748.GA847@34-mo7-2.acn.waw.pl>	<4939496F.903@fsgiudice.com>	<20081207170706.GA5497@34-mo7-2.acn.waw.pl>
	<493C8339.9070805@fsgiudice.com>
Message-ID: <493D63BB.40100@fsgiudice.com>

Hi Przemek,

sorry for previous poor message, but it was too late and I was tired.
Now I have done a self contained sample to show what I mean.

It seems to me that SET() values are read before starting Threads, then 
they are separated and not shared between threads.

So if I define some SETs before starting threads it works, but once they 
are started all changes are ignored in thread.

I'm missing something ?

Best Regards

Francesco

------------------------

static s_lStop := .t.
static s_onceControl
static s_mutex

#define BEFORE_THREAD

PROCEDURE main()
    LOCAL lSet := .T.

    CLEAR SCREEN
    ? Version()
    ? "Main start"

#ifdef BEFORE_THREAD

    @ 12, 5 say ""
    ? "_SET_DELETED = ", Set( _SET_DELETED, lSet )
    wait

    lSet := !lSet

#endif

    hb_backgroundInit()

    @ 15, 5 say ""
    wait

    @ 16, 5 say ""
    ?
    ? "_SET_DELETED = ", Set( _SET_DELETED, lSet )
    wait

    lSet := !lSet

    @ 21, 5 say ""
    ? "_SET_DELETED = ", Set( _SET_DELETED, lSet )
    wait

return

STATIC FUNCTION hb_backgroundThread()
    WHILE !s_lStop

      hb_backgroundRun()
      hb_idleSleep( SET( _SET_BACKGROUNDTICK ) / 100000 )

    ENDDO
RETURN NIL

STATIC FUNCTION hb_backgroundInit()
    IF s_lStop
       hb_threadOnce( @s_onceControl, {||
             s_mutex := hb_mutexCreate()
             hb_mutexLock( s_mutex )
             s_lStop := .f.
             hb_threadStart( @hb_backgroundThread() )
             hb_mutexUnlock( s_mutex )
             RETURN NIL
          } )
    ENDIF
RETURN NIL

static function hb_backgroundRun()
    @ 5, 5 say ""
    ? "_SET_DELETED = ", Set( _SET_DELETED )
    ? "Do Something"
return nil



From mbelgrano at deltain.it  Mon Dec  8 14:00:40 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Dec  8 14:00:46 2008
Subject: [Harbour] Xbase++ go to visual fox pro
In-Reply-To: <20081024103650.GA20092@34-mo7-2.acn.waw.pl>
References: <AFB948164110ED43B5EB849E8DEEF03815F0C5@SRV02.deltain.net>
	<20081024103650.GA20092@34-mo7-2.acn.waw.pl>
Message-ID: <609353e70812081100ldaef2d0hf44e98922611d8c2@mail.gmail.com>

THis is a post of Steffen F. Pirsig regargind accept  the "." instead of the
":" in terms of OO syntax


>Peter,

>

> well to some extend you are right. However it should be noted

> that Clipper 5 with the Get and TBrowse objects introduced the

> : as the send operator to the language and bec. Xbase++ is designed

> to be 100% Clipper language compatible ...

>

> I agree with you in terms of other languages such as VB.NET or C#

> or ... but we are talking here about a "small" syntactical nuance -

> another option btw. would be to allow both send operators at the

> same point in time - so mixing both syntaxes. But that would give

> anybody the option to mix  and will create a big mess (IMO)

> in terms of code readability.

>

> Just a few 0.00001? on that subject.

>

> With kind regards

> Steffen F. Pirsig

> Alaska Software Inc.



"Peter Alderliesten" <p.alderliesten@emergo-systems.nl> wrote in message

news:yjxzqlc9g1r0.858iyru33yxv$.dlg@40tude.net...

> Steffen,

>

>>  3.) We also added a /fox switch to the Xbase++ compiler to accept

>>  the "." instead of the ":" in terms of OO syntax to make compilation of

>>  VFP code easier.

>

> I appreciate that attracting VFP-users is triggering this feature, but

> shouldn't you make the switch name more general. There are some Visual

> Basic users as well and perhaps some more...

> I always thought that using the "." was the standard send operator and

> that

> Xbase++ was off-key on this issue.

>

> Peter




2008/10/24 Przemyslaw Czerpak <druzus@acn.waw.pl>

> On Fri, 24 Oct 2008, Massimo Belgrano wrote:
>
> Hi Massimo,
>
>
>
> >  3.) We also added a /fox switch to the Xbase++ compiler to accept
> >  the "." instead of the ":" in terms of OO syntax to make compilation of
> >  VFP code easier.
>
> I though about adding such feature but in few cases it may cause
> unexpected results, f.e.:
>
>   x:=o:msg.and.x
>
> is valid Clipper code which can be written in more readable form:
>   x := o:msg .and. x
>
> If we add such extension then it should mean:
>
>   x := o:msg:and:x
>
> I do not like it. For me it's a bug in language definition.
> If it's will be very important for users then I can add support for it
> but not inside grammar rules but rather in PP or lexer and I will want
> to keep original Clipper operators precedence so 'and', 'or' and 'not' will
> be reserved method names. With such condition the above can be implemented
> by these _THRE_ lines inside complex.c.:
>
>      case HB_PP_TOKEN_DOT:
>         pLex->iState = OPERATOR;
>         return ':';
>
> In can be also done even now as simple PP directive:
>
>   #xtranslate <exp1>.<exp2> => <exp1>:<exp2>
>
> because Harbour accepts much marker at the beginning of match rule
> but this may interacts with 3-rd party code PP directives which use
> dot (.).
>
> >  4.) With UniversalSQL we are providing SQL for all DBEs which must
> >  be seen as the next evolutionary step of the way how VFP has supported
> > SQL
> >  for the DBF tables. In addition our goal here is to beat VFP in terms
> > of
> >  performance - which is not easy but we are right now at a very good
> > track
> >  to reach that point.
>
> I do not know VFP RDD performance but I heard from xbase++ users that
> [x]Harbour DBFCDX is much faster then CDXDBE.
>
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081208/ffb616dc/attachment.html
From zen25000 at zen.co.uk  Mon Dec  8 18:03:40 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Mon Dec  8 18:03:45 2008
Subject: [Harbour] Problem building telepathy test program
In-Reply-To: <20745967.post@talk.nabble.com>
References: <20707046.post@talk.nabble.com> <492E7AD7.5050602@libero.it>
	<20717629.post@talk.nabble.com> <492E84C0.7020806@libero.it>
	<20717905.post@talk.nabble.com> <20740959.post@talk.nabble.com>
	<20081128235037.GA26783@34-mo7-2.acn.waw.pl>
	<20745967.post@talk.nabble.com>
Message-ID: <20905467.post@talk.nabble.com>


I tested telepathy with the original test program and a loopback plug, but it
failed, so to check whether it was failing on both send and receive I did
the following:
I tested the port with a loopback and a small C program from the web in
Linux and it works.
I have another machine with a Clipper terminal emulation program (mine) that
also works OK with loopback.
The C test talks to the Clipper terminal and vice versa via null modem
cable.
However the telepathy test program does not send OR receive. Baud rate
parity etc. same both ends.
The only modification I have made to telepathy is a delay function to
replace threadsleep() which I assume will suffice and a modified test
program to send single characters and check receive buffer at each key
press:-

function main
tp_open( 1,, 9600, 8, "N", 1 )
  do while !LASTKEY()=27
    tp_send( 1, CHR(LASTKEY()))
    tp_delay(0.5)
    ? tp_recv( 1 )
    inkey(0)
  enddo
tp_Close( 1 )
return nil

function ThreadSleep ( millisecs )
secs = millisecs/1000
now = seconds()
DO WHILE seconds()<now+secs
ENDDO
return nil

I admit that I have now hit a brick wall with this. The programs compile and
link ok without errors. 
I have stepped through in debug as far as the calls to the C library and all
seems well.
Any help would be appreciated.

-- 
View this message in context: http://www.nabble.com/Problem-building-telepathy-test-program-tp20707046p20905467.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Tue Dec  9 06:24:33 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Dec  9 06:22:26 2008
Subject: [Harbour] about GTXWC
In-Reply-To: <493C2BA6.5020208@oohg.org>
References: <493BD129.7030500@oohg.org>
	<20081207161519.GA24236@34-mo7-2.acn.waw.pl>
	<493C102C.8090709@oohg.org> <493C1F03.4090400@oohg.org>
	<1228678377.3815.2.camel@hblx.340cst> <493C2BA6.5020208@oohg.org>
Message-ID: <20081209112433.GA18453@34-mo7-2.acn.waw.pl>

On Sun, 07 Dec 2008, Ciro Vargas Clemow wrote:

Hi Ciro,

>>> Ciro Vargas Clemow escribi?:
>>> resolved !!!
>> What is the magic?
> you must uncomment in harbour hbsetup.h  stdmain
> /* #define HB_MAIN_STD */
> #define HB_MAIN_STD

It does not change anything so I suggest to not touch it at
all or you will change sth what will be hard to locate and
fix.
You have to made sth else what resolved the problem.
Probably pure build and install fixed it.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Dec  9 06:29:14 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Dec  9 06:27:06 2008
Subject: [Harbour] Build xhgtk inside harbour
In-Reply-To: <1228684541.3815.13.camel@hblx.340cst>
References: <9257026e0812060002pac29f4y3370e699d4d47ff1@mail.gmail.com>
	<20081207155422.GB4751@34-mo7-2.acn.waw.pl>
	<9257026e0812071230r4991556bq1d98e3404db680a2@mail.gmail.com>
	<1228684541.3815.13.camel@hblx.340cst>
Message-ID: <20081209112914.GB18453@34-mo7-2.acn.waw.pl>

On Sun, 07 Dec 2008, Bill Smith wrote:

Hi Bill,

> Right now, a  ? "hello, world" program build from "hbmk hello" at best
> yields a blank screen in a terminal window on both SuSE Linux and
> Windows XP.

I have not idea how you crate such effect. I cannot replicate it.
Clean Harbour builds work correctly.
How do you create Harbour binaries in SuSE?

Have you tried to clean all Harbour related environment variables
and simply execute ./mpkg_rpm.sh from non root account?

Or just simply create new user account, login and execute:
   ./mpkg_rpm_from_svn.sh
Then as root install final RPMs which will be in
   $HOME/RPM/RPMS/<arch>

best regards,
Przemek
From zen25000 at zen.co.uk  Tue Dec  9 07:59:33 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Tue Dec  9 07:59:36 2008
Subject: [Harbour] Still trying to build xhgtk rpm
Message-ID: <20914245.post@talk.nabble.com>


New clean install of Linux and Harbour.
Harbour rpms build OK but xhgtk make_rpm.sh fails here:-

./contrib/xhgtk+/samples/gtkwindow05.prg
./contrib/xhgtk+/samples/gtkwindow03.prg
./contrib/xhgtk+/Makefile
./TODO.txt
./make_rpm.sh: line 29: get_rpmmacro: command not found
error: Name field must be present in package: (main package)
error: Version field must be present in package: (main package)
error: Release field must be present in package: (main package)
error: Summary field must be present in package: (main package)
error: Group field must be present in package: (main package)
error: License field must be present in package: (main package)
[baz@jackodesktop xhgtk]$

What am I missing ?
-- 
View this message in context: http://www.nabble.com/Still-trying-to-build-xhgtk-rpm-tp20914245p20914245.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Tue Dec  9 08:40:52 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Dec  9 08:38:43 2008
Subject: [Harbour] Re: Still trying to build xhgtk rpm
Message-ID: <20081209134052.GA22881@34-mo7-2.acn.waw.pl>

Hi Garry,

> Barry Jackson zen25000 at zen.co.uk Tue Dec 9 07:59:33 EST 2008
> 
> New clean install of Linux and Harbour.
> Harbour rpms build OK but xhgtk make_rpm.sh fails here:-
> 
> ./contrib/xhgtk+/samples/gtkwindow05.prg
> ./contrib/xhgtk+/samples/gtkwindow03.prg
> ./contrib/xhgtk+/Makefile
> ./TODO.txt
> ./make_rpm.sh: line 29: get_rpmmacro: command not found
> error: Name field must be present in package: (main package)
> error: Version field must be present in package: (main package)
> error: Release field must be present in package: (main package)
> error: Summary field must be present in package: (main package)
> error: Group field must be present in package: (main package)
> error: License field must be present in package: (main package)
> [baz at jackodesktop xhgtk]$
> 
> What am I missing ?

You are working from root account. That's very nice that you trust us
so much but I strongly suggest to never build any packages from root
account. Small typo by package author and you can lost everything.
I'll fix it in a while so it will be possible to build xhgtk also
as root but believe me is not good idea.

best regards,
Przemek
From Kevin at RawFedDogs.net  Tue Dec  9 09:45:26 2008
From: Kevin at RawFedDogs.net (Kevin Monceaux)
Date: Tue Dec  9 09:45:49 2008
Subject: [Harbour] FreeBSD harbour port maintainer
In-Reply-To: <20081207195843.GA26195@34-mo7-2.acn.waw.pl>
References: <AFB948164110ED43B5EB849E8DEEF03815F177@SRV02.deltain.net>
	<alpine.LNX.2.00.0812062021440.29569@Blaidd-Drwg.RawFedDogs.net>
	<20081207154619.GA4751@34-mo7-2.acn.waw.pl>
	<alpine.LNX.2.00.0812071202330.29569@Blaidd-Drwg.RawFedDogs.net>
	<20081207195843.GA26195@34-mo7-2.acn.waw.pl>
Message-ID: <alpine.BSF.2.00.0812090842500.2246@Blaidd-Drwg.RawFedDogs.net>

Przemek,

I sent this yesterday and never saw it come through the list.  I apologize 
in advance if this ends up being a double post.

On Sun, 7 Dec 2008, Przemyslaw Czerpak wrote:

> Just few notes about BSD Makefile:

Most of your suggestions work great!!

> HB_GT_LIB=gtcrs - now by default Harbour in *nixes uses GTTRM
> which does not need any external libraries like curses. It should
> also work well in FreeBSD so I suggest to remove it too. If GTTRM
> does not work correctly then default GT for BSD builds should be
> changed. BTW it will be good to test if it works correctly in
> pure BSD console (screen output and escape key decoding). I do not
> remember any test results for it.

I tried removing HB_GT_LIB and afterwords all text displayed by programs 
compiled with Harbour would just scroll up the screen instead of 
displaying at the positions coded via @ get/say, and also all color was 
lost.  All text was displayed as white text on a black background. It 
looks like the default GT for BSD does need to be changed.  Adding 
HB_GT_LIB=gtcrs back fixed the problem.  But, with HB_GT_LIB=gtcrs, I'm 
unable to enter unicode characters, even though Harbour detected 
libslang2.  With libslang2 and HB_GT_LIB=gtsln I'm able to enter unicode 
characters, but all the colors in my program are changed.  For example, 
text that was displayed in cyan is displayed in red, green text is 
displayed in cyan, blue text in green, etc.  Also, with gtsln some 
function keys stop working.  I don't have a program set up at the moment 
to test all of them, but I out of the ones I've tried I know F12 stops 
working.  It works with gtcrs.



Kevin
http://www.RawFedDogs.net
http://www.WacoAgilityGroup.org
Bruceville, TX

Si hoc legere scis nimium eruditionis habes.
Longum iter est per praecepta, breve et efficax per exempla!!!

From druzus at acn.waw.pl  Tue Dec  9 09:51:41 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Dec  9 09:49:33 2008
Subject: [Harbour] hblognet, inet and threads
Message-ID: <20081209145141.GB22881@34-mo7-2.acn.waw.pl>

Hi Mindaugas,

> thanks for a great sample code. It is great because it makes me to ask a 
> few questions, and to understand the details of process sync.
> 
> There are  things I do not like in this sample, and I'd like to make it 
> more perfect. The first thing I want to optimize is loop containing 
> sleep(0.01). This thread will require CPU 100 times per second, but 
> maybe my background task will be executed only every 5 minutes. I do not 
> want to waste a CPU time.

Exactly. It's not efficient. It was only an example.

> So, the first question is, can I optimize my loop to avoid time checking 
> 100 times per second. I've tried to do this way:
>     static s_nDays := 0
>     static function hb_backgroundThread()
>        local n, nTime, nMin
>        while !s_lStop
>           hb_mutexLock( s_mutex )
>           nTime := seconds() + s_nDays
>           if nTime < s_nLastTime
>              nTime += 24*60*60
>              s_nDays += 24*60*60
>           endif
>           s_nLastTime = nTime
>           nMin := nTime + 24*60*60
>           nTime *= 1000
>           for n := 1 to s_nCounter
>              // {nHandle, bAction, nMilliSec, lActive, nNextTime}
>              if s_aTasks[ n, 4 ] .and. s_aTasks[ n, 5 ] <= nTime
>                 eval( s_aTasks[ n, 2 ] )
>                 s_aTasks[ n, 5 ] += s_aTasks[ n, 3 ]
>              endif
>              nMin := MIN( nMin, s_aTasks[ n, 5 ] )
>           next
>           hb_mutexUnlock( s_mutex )
>           hb_idleSleep( nMin / 1000 )
>        enddo
>     return nil

Fine but I suggest to create separate function to extract number of
seconds from some starting day, f.e.:
   HB_FUNC( HB_MILLISEC )
   {
      hb_retnin( hb_dateMilliSeconds() );
   }

and use it instead of seconds().

> The second thing I want to implement is background thread exit, i.e., I 
> want to send some signal/mutex/semaphore/event from main thread to the 
> background thread and wait for exit using hb_threadJoin(). I'll need 
> some method to interrupt (possibly long) sleep.

when background thread is created store value returned by hb_startThread()
in static s_thread variable and then add this function:

   function hb_backgroundExit()
      if s_thread != NIL
         s_lStop := .t.
         hb_threadJoin( s_thread )
      endif
   return nil

> The other problem is, how to add new background tasks? I will also need 
> to interrupt sleep, because the execution time for new task can be 
> earlier than a time for existing tasks.
> So, how can I implement an interruptable sleep and all required 
> synchronization objects?

hb_idleSleep() is not good choice in such case. Use hb_mutexSubscribe()
with timeout parameter, f.e.:
   hb_mutexSubscribe( s_mutex, nMin / 1000 )

and then you can wake up the thread waiting on mutex by simple
   hb_mutexNotify( s_mutex )

You should also change hb_backgroundExit() to wake up the thread:
   function hb_backgroundExit()
      if s_thread != NIL
         s_lStop := .t.
         hb_mutexNotify( s_mutex )
         hb_threadJoin( s_thread )
      endif
   return nil


hb_mutexSubscribe() has yet another internal feature. When you call it
and thread locked the mutex before then inside this function when thread
is suspended mutex is automatically unlocked and then locked again before
leaving hb_mutexSubscribe()
It means that you can simplify then while loop above, f.e.:

      hb_mutexLock( s_mutex )
      while !s_lStop
         [...]
         hb_mutexSubscribe( s_mutex, nMin / 1000 )
      enddo
      hb_mutexUnlock( s_mutex )

Please also remember that hb_mutexSubscribe() can return immediately if
some thread pushed some notification object before you call it.
If you want to drop all previous notifications waiting in the mutex
queue then you can use hb_mutexSubscribeNow() but please think if it
does not cause problems for your code and some important events are
not lost in such case.
If you want then you can also use some values in hb_mutexNotify()
and receive it as 3-rd parameter of hb_mutexSubscribe() to mark some
actions. F.e. instead of using s_stop variable you can pass .T. as
2-nd hb_mutexNotify() parameter and then main loop you can look like:

      hb_mutexLock( s_mutex )
      while .t.
         [...]
         if hb_mutexSubscribe( s_mutex, nMin / 1000, @xResult )
            if valtype( xResult ) == "L" and xResult
               exit
            endif
         endif
      enddo
      hb_mutexUnlock( s_mutex )

In harbour/tests/mt/ you have simple demonstration programs which shows
different synchronization mechanisms. They are not only tests.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Dec  9 10:06:54 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Dec  9 10:04:45 2008
Subject: [Harbour] FreeBSD harbour port maintainer
Message-ID: <20081209150654.GA20823@34-mo7-2.acn.waw.pl>

Hi Kevin,

> > HB_GT_LIB=gtcrs - now by default Harbour in *nixes uses GTTRM
> > which does not need any external libraries like curses. It should
> > also work well in FreeBSD so I suggest to remove it too. If GTTRM
> > does not work correctly then default GT for BSD builds should be
> > changed. BTW it will be good to test if it works correctly in
> > pure BSD console (screen output and escape key decoding). I do not
> > remember any test results for it.
> 
> I tried removing HB_GT_LIB and afterwords all text displayed by programs 
> compiled with Harbour would just scroll up the screen instead of 
> displaying at the positions coded via @ get/say, and also all color was 
> lost.  All text was displayed as white text on a black background. It 
> looks like the default GT for BSD does need to be changed.  Adding 

No. I forgot that you are using Harbour 1.0.1 where default GT for BSD is
GTSTD not GTTRM and the above is exact GTSTD behavior. In 1.1.x default GT
is GTTRM. So if you are using 1.0.1 version then please set HB_GT_LIB=gttrm

GTTRM should automatically recognize terminal mode (iso/utf8) and work
correctly with both.

> HB_GT_LIB=gtcrs back fixed the problem.  But, with HB_GT_LIB=gtcrs, I'm 

There was nothing to fix :-). It was expected GTSTD behavior. It uses only
raw console input/output with any terminal escape sequences what is very
usable in some programs.

> unable to enter unicode characters, even though Harbour detected 
> libslang2.  With libslang2 and HB_GT_LIB=gtsln I'm able to enter unicode 
> characters, but all the colors in my program are changed.  For example, 
> text that was displayed in cyan is displayed in red, green text is 
> displayed in cyan, blue text in green, etc.  Also, with gtsln some 
> function keys stop working.  I don't have a program set up at the moment 
> to test all of them, but I out of the ones I've tried I know F12 stops 
> working.  It works with gtcrs.

The colors and keys problems seems to be related to BSD Slang port or
wrong termcap/terminfo terminal description.
Probably it can be resolved but it will be necessary to locate the exact
reason of problems.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Dec  9 10:33:11 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Dec  9 10:31:03 2008
Subject: [Harbour] hblognet, inet and threads
Message-ID: <20081209153311.GA32511@34-mo7-2.acn.waw.pl>

Hi Francesco,

> sorry for previous poor message, but it was too late and I was tired.
> Now I have done a self contained sample to show what I mean.

There is nothing to be sorry. It was very good question. Just simply
I have few days delay receiving messages from harbour-devel list.
Sometime I receive them immediately sometimes after two weeks.
Now I'm answering for 5-th message coping their bodies from
http://lists.harbour-project.org/pipermail/harbour/

Phil can you check it. This problems exists from years and it's activated
from time to time. Looks like some mail servers when cannot deliver message
mark the destination address and increase the time used to repeat sending.
Finally I receive some messages after two weeks.
If it can be control by you and it will not increase dramatically net
traffic then please decrease the delay or change policy used to repeat
message sending.

> It seems to me that SET() values are read before starting Threads, then 
> they are separated and not shared between threads.
> So if I define some SETs before starting threads it works, but once they 
> are started all changes are ignored in thread.

It's correct. Each thread has its own independent SETs which are local to
this thread.
When new thread is created it inherits copy of all existing SET values
from parent thread. It's intentional so if one thread makes SET DELETE ON
or SET SOFTSEEK OFF or SET DATE FORMAT TO ... then it does not effects other
threads.
Anyhow in few cases SETs can be bound with global resources which are shared
between threads. F.e. if two thread uses the same GT window then _SET_COLOR
will effect both of them. The same is with _SET_TYPEAHEAD.
There are also two SETs added recently and _SET_HBOUTLOG and _SET_HBOUTLOGINFO
which for FM log copies recently set values to static buffer because they need
them after releasing all threads and SETs. In such recently set values for
above _SET_HBOUTLOG* SETs by any thread are used inside FM statistic module.

best regards,
Przemek
From zen25000 at zen.co.uk  Tue Dec  9 11:11:01 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Tue Dec  9 11:11:04 2008
Subject: [Harbour] Still trying to build xhgtk rpm
In-Reply-To: <20081209134052.GA22881@34-mo7-2.acn.waw.pl>
References: <20914245.post@talk.nabble.com>
	<20081209134052.GA22881@34-mo7-2.acn.waw.pl>
Message-ID: <20917699.post@talk.nabble.com>



Przemyslaw Czerpak-2 wrote:
> 
> You are working from root account. 
> 
No I was working as user. "baz" that's me!

[baz@jackodesktop xhgtk]$ su
Password:
[root@jackodesktop xhgtk]# exit
exit
[baz@jackodesktop xhgtk]$

What made you think that? I am puzzled.:confused:
-- 
View this message in context: http://www.nabble.com/Still-trying-to-build-xhgtk-rpm-tp20914245p20917699.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Tue Dec  9 11:40:12 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Dec  9 11:38:02 2008
Subject: [Harbour] Re: Still trying to build xhgtk rpm
Message-ID: <20081209164012.GA2638@34-mo7-2.acn.waw.pl>

Hi Barry,

> > You are working from root account. 
> No I was working as user. "baz" that's me!

You are right. I guess you are using connective or other distribution
which inherited wrong RPM macros from it (AFAIR mandriva) and has
breaking -ta rpmbuild option.
I've just committed fix to xhgtk which added missing get_rpmmacro()
so please make cvs update and try again.

best regards,
Przemek
From info at fsgiudice.com  Tue Dec  9 13:05:44 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Dec  9 13:05:52 2008
Subject: [Harbour] hblognet, inet and threads
In-Reply-To: <20081209153311.GA32511@34-mo7-2.acn.waw.pl>
References: <20081209153311.GA32511@34-mo7-2.acn.waw.pl>
Message-ID: <493EB378.4010607@fsgiudice.com>

Hi Przemek,


Il 09/12/2008 16.33, Przemyslaw Czerpak ha scritto:
> 
>> It seems to me that SET() values are read before starting Threads, then 
>> they are separated and not shared between threads.
>> So if I define some SETs before starting threads it works, but once they 
>> are started all changes are ignored in thread.
> 
> It's correct. Each thread has its own independent SETs which are local to
> this thread.
> When new thread is created it inherits copy of all existing SET values
> from parent thread. It's intentional so if one thread makes SET DELETE ON
> or SET SOFTSEEK OFF or SET DATE FORMAT TO ... then it does not effects other
> threads.
> Anyhow in few cases SETs can be bound with global resources which are shared
> between threads. F.e. if two thread uses the same GT window then _SET_COLOR
> will effect both of them. The same is with _SET_TYPEAHEAD.
> There are also two SETs added recently and _SET_HBOUTLOG and _SET_HBOUTLOGINFO
> which for FM log copies recently set values to static buffer because they need
> them after releasing all threads and SETs. In such recently set values for
> above _SET_HBOUTLOG* SETs by any thread are used inside FM statistic module.
> 
Thank you for your reply.
The problem is that I need that SET_BACKGORUNDTASKS has to be shared 
between threads, this is because threads have to be stopped or activated 
based on above set.
In my repository I have background tasks that in ST mode works well and 
I can stop / restart using above set.
On the contrary I have implemented background tasks in MT mode using 
your sample (plus some refinements) but once the thread is started I 
cannot control flow using above set.
And as you state above, there are some sets that is useful to have shared.
So how can I share it ?

And another problem is about screen updates.
Once the thread is started too many screen updates are done in wrong 
places also if all updates are guarded with Row()/Col() save and restore.

(I'm looking also to your reply to Mindagaus that I find interesting)

Best regards

Francesco
From dbtopas at dbtopas.lt  Tue Dec  9 13:54:20 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Dec  9 13:52:33 2008
Subject: [Harbour] hblognet, inet and threads
In-Reply-To: <20081209153311.GA32511@34-mo7-2.acn.waw.pl>
References: <20081209153311.GA32511@34-mo7-2.acn.waw.pl>
Message-ID: <493EBEDC.8060508@dbtopas.lt>

Przemyslaw Czerpak wrote:
> I have few days delay receiving messages from harbour-devel list.
> Sometime I receive them immediately sometimes after two weeks.
> Now I'm answering for 5-th message coping their bodies from
> http://lists.harbour-project.org/pipermail/harbour/

Hi,


the same for me. Sometimes round trip of the sent message is a few 
seconds, but sometimes it's large.
This time I haven't got my message back from the list for the 26 hours, 
and I was going to resend my message but I found Przemek's answer.


Best reagrds,
Mindaugas

From lorenzo.fiorini at gmail.com  Tue Dec  9 14:05:09 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Dec  9 14:13:03 2008
Subject: [Harbour] hb* and shared vs static
Message-ID: <9257026e0812091105n38a893e4p7a7ac87e5e9cc0c8@mail.gmail.com>

In hb-func.sh there is:

mk_hbgetlibsctb()
{
...
        echo "$libs rddads hbct hbnf hbmzip hbtip xhb hbgd hbodbc hbpg
hbmysql rddado hbw32 gtwvg $HB_USR_LIBS"
...
}

I've found that whatever is in the above list and is built on my
development box "gets linked" in my shared binaries even if I didn't
ask for it.

The same is true for gtcrs and that means that my user have to install
it even if the apps don't require it.

I've replaced it with:
...
        echo "$libs $HB_USR_LIBS"
...

and it "fixes" the problem. Is there any reason to link everything in that way?

best regards,
Lorenzo
From dbtopas at dbtopas.lt  Tue Dec  9 15:02:24 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Dec  9 15:00:34 2008
Subject: [Harbour] hblognet, inet and threads
In-Reply-To: <20081209145141.GB22881@34-mo7-2.acn.waw.pl>
References: <20081209145141.GB22881@34-mo7-2.acn.waw.pl>
Message-ID: <493ECED0.4040802@dbtopas.lt>

Hi,


> Fine but I suggest to create separate function to extract number of
> seconds from some starting day, f.e.:
>    HB_FUNC( HB_MILLISEC )
>    {
>       hb_retnin( hb_dateMilliSeconds() );
>    }
> 
> and use it instead of seconds().

Yes, it would be great.


> In harbour/tests/mt/ you have simple demonstration programs which shows
> different synchronization mechanisms. They are not only tests.

Thanks, for the answer. I've analysed /tests/mt, but I do not have 
skills of MT programming. So, I expected we will need two more mutexes 
for exit interrupt and for add new task interrupt. And I was unable to 
imagine how can I wait for multiple events, something like:
    hb_mutexSubscribe( {s_mutex, s_mutexExit, s_mutexAdd}, nMin/1000 )
But things become easy after you put a hand on it :)

So,I assume our current code is:

static function hb_backgroundThread()
    local n, nTime, nMin
    hb_mutexLock( s_mutex )
    while !s_lStop
       nTime := hb_MilliSeconds()
       nMin := nTime + 24*60*60*1000
       for n := 1 to s_nCounter
          // {nHandle, bAction, nMilliSec, lActive, nNextTime}
          if s_aTasks[ n, 4 ] .and. s_aTasks[ n, 5 ] <= nTime
             eval( s_aTasks[ n, 2 ] )
             s_aTasks[ n, 5 ] += s_aTasks[ n, 3 ]
          endif
          nMin := MIN( nMin, s_aTasks[ n, 5 ] )
       next
       hb_mutexSubscribe( s_mutex, nMin / 1000 )
    enddo
    hb_mutexUnlock( s_mutex )
return nil

function hb_backgroundExit()
    if s_thread != NIL
       s_lStop := .t.
       hb_mutexNotify( s_mutex )
       hb_threadJoin( s_thread )
    endif
return nil

static function hb_backgroundInit()
    if s_lStop
       hb_threadOnce( @s_onceControl, {||
             s_mutex := hb_mutexCreate()
             hb_mutexLock( s_mutex )
             s_lStop := .f.
             s_thread := hb_threadStart( @hb_backgroundThread() )
             hb_mutexUnlock( s_mutex )
             return nil
          } )
    endif
return nil

function hb_backgroundAdd( bAction, nMilliSec, lActive )
    local nHandler
    if !HB_ISNUMERIC( nMilliSec )
       nMilliSec := 0
    endif
    if ! HB_ISLOGICAL( lActive )
       lActive := .t.
    endif
    hb_backgroundInit()
    hb_mutexLock( s_mutex )
    aadd( s_aTasks, { nHandler := ++s_nCounter, bAction, nMilliSec, 
lActive, hb_MilliSeconds() + nMilliSec } )
    hb_mutexUnlock( s_mutex )
return nHandler


and I still have two questions...


1) s_lStop access is synchronized using s_mutex. Is hb_backgroundExit() 
code OK? Don't we need to change to:

function hb_backgroundExit()
    if s_thread != NIL
       hb_mutexLock( s_mutex )
       s_lStop := .t.
       hb_mutexNotify( s_mutex )
       hb_mutexUnLock( s_mutex )
       hb_threadJoin( s_thread )
    endif
return nil

otherwise s_lStop can be assigned (by hb_backgroundExit) and accessed 
(by hb_backgroundThread) simultaneous and give unpredictable results.

And here is a new question (well, 3 new questions...):
1a) is it OK to call hb_mutexNotify() if mutex is locked?
1b) will hb_mutexSubscribe() exit after hb_mutexUnLock() only? (because 
it tries to lock mutex before exit)
1c) if 1b answer is "yes", then code:
       hb_mutexLock( s_mutex )
       s_lStop := .t.
       hb_mutexNotify( s_mutex )
       hb_threadJoin( s_thread )
       hb_mutexUnLock( s_mutex )
will create deadlock. hb_threadJoin() will wait for child forever, but 
child does not return from hb_mutexSubscribe() because trying to lock 
mutex. Am I right?


The second question is:
2) I assume hb_backgroundAdd() could be called from any thread, and 
hb_backgroundExit() is called from the main thread on application exit.
It is possible that s_thread != NIL will be false for the main thread, 
but another thread is executing hb_backgroundAdd()/hb_backgroundInit() 
that time. Let's say some code like:
    s_mutex := hb_mutexCreate()
In this case the new thread will be started, but main thread will forget 
to join it.

2a) do we need a mutex to protect s_thread access/assign?
2b) can we manage to use the same s_mutex, or we will need s_mutex2?
2c) where s_mutex2 should be initialized?
2d) I see STATIC s_mutex2 := hb_mutexCreate() in one of your last 
commits. So, perhaps 2c answer is "Use STATIC initialization". Is it 
possible to avoid static initialization? Or we will need one more 
s_mutex3 to protect s_mutex2 initialization and this will be 
never-ending story without STATICs.


Best regards,
Mindaugas
From zen25000 at zen.co.uk  Tue Dec  9 16:00:55 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Tue Dec  9 16:00:56 2008
Subject: [Harbour] Re: Still trying to build xhgtk rpm
In-Reply-To: <20081209164012.GA2638@34-mo7-2.acn.waw.pl>
References: <20081209164012.GA2638@34-mo7-2.acn.waw.pl>
Message-ID: <493EDC87.8000007@zen.co.uk>



Przemyslaw Czerpak wrote:
> Hi Barry,
>
>   
>>> You are working from root account. 
>>>       
>> No I was working as user. "baz" that's me!
>>     
>
>
> so please make cvs update and try again.
>
>   
Many thanks - however...
I manually searched SF and can't find it. Where should I look?
I have never used SVN client and as yet can't figure it out.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081209/beaa241a/attachment.html
From bedipritpal at hotmail.com  Tue Dec  9 16:33:41 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Tue Dec  9 16:33:44 2008
Subject: [Harbour] 2008-12-09 12:46 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20924091.post@talk.nabble.com>


2008-12-09 12:46 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/makefile
  * harbour/contrib/gtwvg/common.mak
    + wvghtmlv.prg

  * harbour/contrib/gtwvg/hbgtwvg.ch
    + HB_GTI_ACTIVATESELECTCOPY
    + HB_GTE_CTLCOLOR

  * harbour/contrib/gtwvg/gtwvg.c
    + hb_gtInfo( HB_GTI_ACTIVATESELECTCOPY )
      This has the same effect as to activating the select/copy operation
      from the sys menu of the application. This way you can define
      any key to begin this operation as:

         SetKey( K_RBUTTONUP, {|| hb_gtInfo( HB_GTI_ACTIVATESELECTCOPY ) } )

      and to start copy operation it will be enough to perform right
      click and then dragging the text with left button down.
    
      :TODO: Implementation in GTWVT.

  + harbour/contrib/gtwvg/wvghtmlv.prg
    + Added WvgHTMLViewer() class compatible with XbpHTMLViewer().
      It is a fully functional implementation as per Xbase++ documentation
      except for method :setHTML( cHTMLtext )

  * harbour/contrib/gtwvg/wvggui.c
    + Added evenh handlling for WV_CTLCOLOR* messages.

  * harbour/contrib/gtwvg/wvgwin.c
    + Added more winapi functions.

  * harbour/contrib/gtwvg/wvg3stat.prg
  * harbour/contrib/gtwvg/wvgax.prg
  * harbour/contrib/gtwvg/wvgcheck.prg
  * harbour/contrib/gtwvg/wvglistb.prg
  * harbour/contrib/gtwvg/wvgmle.prg
  * harbour/contrib/gtwvg/wvgphdlr.prg
  * harbour/contrib/gtwvg/wvgpushb.prg
  * harbour/contrib/gtwvg/wvgradio.prg
  * harbour/contrib/gtwvg/wvgsle.prg
  * harbour/contrib/gtwvg/wvgstatb.prg
  * harbour/contrib/gtwvg/wvgstatc.prg
  * harbour/contrib/gtwvg/wvgtoolb.prg
  * harbour/contrib/gtwvg/wvgtreev.prg
  * harbour/contrib/gtwvg/wvgwnd.prg
    ! Heavy changes especially in event handlling management.
    + ::setColorFG( nRGB ) and ::setColorBG( nRGB ) implemented for
      WvgSLE(), WvgMLE(), WvgStatic(), WvgCheckBox(), WvgRadioButton(),
      WvgTreeView(), WvgListBox().
  
  * harbour/contrib/gtwvg/tests/demowvg.prg
    ! Some finer additions.

  + harbour/contrib/gtwvg/tests/demoxbp.prg
    Added new demo with pure Xbase++ code clubbing all the committed classes
    till date including WvgHTMLViewer().
    ;
    Compile as : hbmk_b32 -mt demoxbp

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-12-09-12%3A46-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20924091p20924091.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From zen25000 at zen.co.uk  Tue Dec  9 17:31:30 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Tue Dec  9 17:31:35 2008
Subject: [Harbour] Still trying to build xhgtk rpm
In-Reply-To: <20081209164012.GA2638@34-mo7-2.acn.waw.pl>
References: <20914245.post@talk.nabble.com>
	<20081209164012.GA2638@34-mo7-2.acn.waw.pl>
Message-ID: <20925101.post@talk.nabble.com>


Thanks Przemek
OK, I finally found script in SF.

Now it gets this far :-

[baz@jackodesktop xhgtk]$ make_rpm.sh                                                        
./                                                                                           
./source/                                                                                    
./source/cairo/                                                                 
./source/cairo/cairo.c                                                          
./source/classes/                                                               
./source/classes/TButton.prg
.....................etc. etc..................
./contrib/xhgtk+/samples/gtkbutton09.prg
./contrib/xhgtk+/samples/gtkwindow05.prg
./contrib/xhgtk+/samples/gtkwindow03.prg
./contrib/xhgtk+/Makefile
./TODO.txt
error: Name field must be present in package: (main package)
error: Version field must be present in package: (main package)
error: Release field must be present in package: (main package)
error: Summary field must be present in package: (main package)
error: Group field must be present in package: (main package)
error: License field must be present in package: (main package)
[baz@jackodesktop xhgtk]$

Cheers, Barry
Mandriva 2009.0


Przemyslaw Czerpak-2 wrote:
> 
> Hi Barry,
> 
>> > You are working from root account. 
>> No I was working as user. "baz" that's me!
> 
> You are right. I guess you are using connective or other distribution
> which inherited wrong RPM macros from it (AFAIR mandriva) and has
> breaking -ta rpmbuild option.
> I've just committed fix to xhgtk which added missing get_rpmmacro()
> so please make cvs update and try again.
> 
> best regards,
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
> 

-- 
View this message in context: http://www.nabble.com/Still-trying-to-build-xhgtk-rpm-tp20914245p20925101.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From lorenzo.fiorini at gmail.com  Wed Dec 10 04:01:27 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Dec 10 04:01:31 2008
Subject: [Harbour] sxcompat.prg && comment
Message-ID: <9257026e0812100101h4e1b8021x4134d92b0abb6288@mail.gmail.com>

I've removed the support of && in my local build to avoid nasty bugs
and I've found this line in sxcompat.prg.

function Sx_TagInfo( cIndex )
   local aInfo, nOrds, nFirst, i

   if Used() && ( nOrds := OrdCount( cIndex ) ) > 0
 ...

is it a real comment?

best regards,
Lorenzo
From dbtopas at dbtopas.lt  Wed Dec 10 10:23:53 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Dec 10 10:22:05 2008
Subject: [Harbour] sxcompat.prg && comment
In-Reply-To: <9257026e0812100101h4e1b8021x4134d92b0abb6288@mail.gmail.com>
References: <9257026e0812100101h4e1b8021x4134d92b0abb6288@mail.gmail.com>
Message-ID: <493FDF09.6070803@dbtopas.lt>

Lorenzo Fiorini wrote:
> I've removed the support of && in my local build to avoid nasty bugs
> and I've found this line in sxcompat.prg.
> 
> function Sx_TagInfo( cIndex )
>    local aInfo, nOrds, nFirst, i
> 
>    if Used() && ( nOrds := OrdCount( cIndex ) ) > 0
>  ...
> 
> is it a real comment?

Hi,


already fixed in main branch:

2008-10-27 22:39 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
   ...
   * source/rdd/hbsix/sxcompat.prg
     ! Fixed '&&' being used instead of '.AND.' in code.
     ; NOTE: This '&&' comment compatibility is a lot more
             dangerous than it's useful. It'd vote for
             a compiler warnings switch for any of it's
             occurences.
       [TOMERGE 1.0]


Regards,
Mindaugas
From dbtopas at dbtopas.lt  Wed Dec 10 10:42:58 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Dec 10 10:41:06 2008
Subject: [Harbour] hblognet, inet and threads
In-Reply-To: <20081209145141.GB22881@34-mo7-2.acn.waw.pl>
References: <20081209145141.GB22881@34-mo7-2.acn.waw.pl>
Message-ID: <493FE382.6000202@dbtopas.lt>

Przemyslaw Czerpak wrote:
> Fine but I suggest to create separate function to extract number of
> seconds from some starting day, f.e.:
>    HB_FUNC( HB_MILLISEC )
>    {
>       hb_retnin( hb_dateMilliSeconds() );
>    }
> 
> and use it instead of seconds().

Hi,


I've looked to the source and can commit new implementation. 
hb_dateMilliSeconds() is OK, but it returns different results for 
different platforms. It's "julian milliseconds" on Windows and 
milliseconds from 1970-01-01 on Unixes.

I think it would be good to give the same meaning for both platforms. 
Julian milliseconds is 48bit integer now. It is not far from double 
precision (52bit) and hb_dataMilliSeconds()*16 conversion to from double 
can show float point side effects. So, milliseconds from 1970-01-01 are 
  better in this case, but it is a little platform oriented and will 
return negative values for birthdays of us or our fathers.

What choice do you prefer?


Best regards,
Mindaugas
From rodrmigu at gmail.com  Wed Dec 10 11:19:05 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Wed Dec 10 11:19:08 2008
Subject: [Harbour] Unrecoverable error 9022: Memory buffer overflow using
	the Code Debugger
Message-ID: <80b05d460812100819x7610c489oeccd49e8c5a12f7b@mail.gmail.com>

Hi

I got the error below when I type  "? keypress"  (that has Codeblock
value) on Debugger Command box:

Unrecoverable error 9022: Memory buffer overflow
Called from __DBGGETEXPRVALUE(0)
Called from HBDEBUGGER:GETEXPRVALUE(0)
Called from HBDEBUGGER:DOCOMMAND(0)
Called from HBDEBUGGER:COMMANDWINDOWPROCESSKEY(0)
Called from (b)BUILDCOMMANDWINDOW(0)
Called from HBDBWINDOW:KEYPRESSED(0)
Called from HBDEBUGGER:HANDLEEVENT(0)
Called from HBDEBUGGER:ACTIVATE(0)
Called from __DBGENTRY(0) in ../../debugger.prg
Called from TEDIT:CREATE(62)
Called from MAIN(139) in edit.prg


Thanks
Rodrigo
From lorenzo.fiorini at gmail.com  Wed Dec 10 11:38:47 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Wed Dec 10 11:38:51 2008
Subject: [Harbour] sxcompat.prg && comment
In-Reply-To: <493FDF09.6070803@dbtopas.lt>
References: <9257026e0812100101h4e1b8021x4134d92b0abb6288@mail.gmail.com>
	<493FDF09.6070803@dbtopas.lt>
Message-ID: <9257026e0812100838uacb580bta774780bad3308d@mail.gmail.com>

On Wed, Dec 10, 2008 at 4:23 PM, Mindaugas Kavaliauskas
<dbtopas@dbtopas.lt> wrote:

> 2008-10-27 22:39 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>  ...
>  * source/rdd/hbsix/sxcompat.prg
>    ! Fixed '&&' being used instead of '.AND.' in code.
>    ; NOTE: This '&&' comment compatibility is a lot more
>            dangerous than it's useful. It'd vote for
>            a compiler warnings switch for any of it's
>            occurences.
>      [TOMERGE 1.0]

Many thanks, I didn't check the main branch.

best regards,
Lorenzo
From mbelgrano at deltain.it  Wed Dec 10 11:41:41 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Wed Dec 10 11:41:46 2008
Subject: [Harbour] sxcompat.prg && comment
In-Reply-To: <493FDF09.6070803@dbtopas.lt>
References: <9257026e0812100101h4e1b8021x4134d92b0abb6288@mail.gmail.com>
	<493FDF09.6070803@dbtopas.lt>
Message-ID: <609353e70812100841p46e05affr91d6e8081f3934e6@mail.gmail.com>

agree

2008/12/10 Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>

> Lorenzo Fiorini wrote:
>
>> I've removed the support of && in my local build to avoid nasty bugs
>> and I've found this line in sxcompat.prg.
>>
>> function Sx_TagInfo( cIndex )
>>   local aInfo, nOrds, nFirst, i
>>
>>   if Used() && ( nOrds := OrdCount( cIndex ) ) > 0
>>  ...
>>
>> is it a real comment?
>>
>
> Hi,
>
>
> already fixed in main branch:
>
> 2008-10-27 22:39 UTC+0200 Viktor Szakats (harbour.01 syenar hu)
>  ...
>  * source/rdd/hbsix/sxcompat.prg
>    ! Fixed '&&' being used instead of '.AND.' in code.
>    ; NOTE: This '&&' comment compatibility is a lot more
>            dangerous than it's useful. It'd vote for
>            a compiler warnings switch for any of it's
>            occurences.
>      [TOMERGE 1.0]
>
>
> Regards,
> Mindaugas
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081210/62148629/attachment.html
From Kevin at RawFedDogs.net  Wed Dec 10 11:58:14 2008
From: Kevin at RawFedDogs.net (Kevin Monceaux)
Date: Wed Dec 10 11:58:26 2008
Subject: [Harbour] FreeBSD harbour port maintainer
In-Reply-To: <20081209150654.GA20823@34-mo7-2.acn.waw.pl>
References: <20081209150654.GA20823@34-mo7-2.acn.waw.pl>
Message-ID: <alpine.BSF.2.00.0812101049410.2565@Blaidd-Drwg.RawFedDogs.net>


On Tue, 9 Dec 2008, Przemyslaw Czerpak wrote:

> No. I forgot that you are using Harbour 1.0.1 where default GT for BSD is
> GTSTD not GTTRM and the above is exact GTSTD behavior. In 1.1.x default GT
> is GTTRM. So if you are using 1.0.1 version then please set HB_GT_LIB=gttrm
>
> GTTRM should automatically recognize terminal mode (iso/utf8) and work
> correctly with both.

Speaking of various GT settings I have a question about them.  Hopefully 
it's okay to ask this here.  I posted to the user list bug didn't get a 
response.

How should programs be compiled if their output is going to be piped to 
another program.  I'm seeing odd behavior piping output to other programs. 
For example, a program such as:

Function Main()

local i

for i = 1 to 5000
     outstd("Line:  ", str(i), HB_OSNewLine())
next

Return

If I pipe the output from the above program to less, in a terminal session 
with 35 rows, it displays the first 35 lines and less exits instead of 
allowing one to page through the output.  On Linux it the 35 lines look 
right.  On FreeBSD, they are displayed with the "stair step" effect.  I've 
tried hbcmp/hblnking them with -gtstd.  When I do, the executable still is 
linked against libncurses and libslang and still misbehaves when piping 
it's output to another program.




Kevin
http://www.RawFedDogs.net
http://www.WacoAgilityGroup.org
Bruceville, TX

Si hoc legere scis nimium eruditionis habes.
Longum iter est per praecepta, breve et efficax per exempla!!!

From rportnoff at spendmap.com  Thu Dec 11 11:46:22 2008
From: rportnoff at spendmap.com (Randy Portnoff)
Date: Thu Dec 11 11:46:29 2008
Subject: [Harbour] Incorrect procedure names in HB_OUT.LOG
In-Reply-To: <493EDC87.8000007@zen.co.uk>
References: <20081209164012.GA2638@34-mo7-2.acn.waw.pl>
	<493EDC87.8000007@zen.co.uk>
Message-ID: <B0085464781@ms1.3peaks.com>

The procedure names below (in red) are incorrect in the HB_OUT.LOG file:

Called from OLEGETPROPERTY(0)
Called from TOLEAUTO:GET(216) in source\rtl\tget.prg
Called from TOLEAUTO:QUIT(240) in QUIT.prg
Called from READXLS(54) in OLE.prg
Called from PRG54(19) in PRG54.prg
Called from INVOKEMENUOPTION(0) in MAIN_PP.prg
Called from MAIN(0) in MAIN_PP.prg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081211/db1d2349/attachment.html
From lorenzo.fiorini at gmail.com  Thu Dec 11 12:05:30 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Dec 11 12:05:37 2008
Subject: [Harbour] gtwvt 1.1 vs 1.0
Message-ID: <9257026e0812110905j25ba9214h3ed279de3ef9ba13@mail.gmail.com>

I'm trying to understand how to "fix" gtwvt in 1.1 but the problem
seems "of design".
What I mean is that gtwvt 1.1 seems to use always the row, col and
then find the best font size.
In this way "hard" to define a given font of a given size and for example
seems impossible to use the font "Terminal".

If you try the test below using 1.0.1 and 1.1.0dev with values like:

15, 48, 140, "Courier New" or
8, 48, 140, "Terminal"

you'll see the difference.

Any comment?

best regards,
Lorenzo

#include "common.ch"
#include "hbgtinfo.ch"

procedure main( cFontSize, cRows, cCols, cFontName )

   local nRows, nCols

   default cFontSize to "15"
   default cRows to "48"
   default cCols to "140"
   default cFontName to "Terminal"

   clear screen
   HB_GTInfo(HB_GTI_FONTNAME, alltrim(cFontName))
   HB_GTInfo(HB_GTI_FONTSIZE, val(cFontSize))
   if !setmode( val(cRows), val(cCols) )
      setmode( 255, 255 )
   endif
   clear screen

   nRows := maxrow()
   nCols := maxcol()

   alert( "maxrow()="+alltrim(str(nRows))+;
          ";maxcol()="+alltrim(str(maxcol(nCols)))+;
          ";font size="+alltrim(str(HB_GTInfo(HB_GTI_FONTSIZE)))+;
          ";Am I in centre?" )

return
From druzus at acn.waw.pl  Thu Dec 11 13:50:12 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Thu Dec 11 13:47:58 2008
Subject: [Harbour] 2008-12-11 19:48 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081211185012.GA6356@34-mo7-2.acn.waw.pl>

2008-12-11 19:48 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbthread.h
  * harbour/source/vm/thread.c
    + added hb_atomic_set(), hb_atomic_get(), hb_atomic_inc() and
      hb_atomic_dec() functions which operates on HB_COUNTER or smaller
      type if it's necessary for some platforms which can be access/assign
      increment/decrement in MT safe atom operations.
      hb_atomic_dec() returns true if counter is 0 after decrementation

  * harbour/include/hbatomic.h
    ! fixed compilation in Linux and OpenWatcom

  * harbour/include/hbapiitm.h
  * harbour/source/rtl/itemseri.c
    + make hb_itemSerialize() and hb_itemDeserialize() public functions
    ! fixed serialization items with internal item references

  * harbour/source/vm/hvm.c
    * release memvars after closing RDDs

  * harbour/source/debug/dbgentry.c
    ! fixed buffer overflow reported by Rodrigo

  * harbour/source/vm/macro.c
  * harbour/source/compiler/hbmain.c
    * formatting

  * harbour/include/hbexprb.c
    ! fixed wrongly recognized functions with HB_I18N_ prefix as
      HB_I18N_GETTEXT()

  * harbour/include/hbapi.h
  * harbour/include/hbstack.h
  * harbour/include/hbthread.h
  * harbour/source/vm/estack.c
  * harbour/source/vm/thread.c
  * harbour/source/vm/hvm.c
    + added support for I18N in HVM.
      Each thread can have it's own i18n set.
      When new thread is created then it inherits i18n set from parent
      thread and both uses the same set (please remember about it if you
      will want to make some direct modifications on active i18n set
      internals).
      When thread change active i18n set then it effects only this thread
      and new threads which will be create later. It does not change i18n
      in other existing threads.
    + added functions to set/get pointer to active i18n set in HVM
         void * hb_vmI18N( void )
         void   hb_vmSetI18N( void * )

  * harbour/include/hbapi.h
  * harbour/source/rtl/hbi18n.c
    + added i18n module. Now only for internal Harbour usage without support
      for optional switching to alternative implementations.
      I'll add such functionality later when I will work on native gettext
      support.

      The following public .prg functions has been added:
         HB_I18N_GETTEXT[_STRICT]( <cMsgID> [, <cContext> ] )
               -> <cTranslatedMsgID> | <cMsgID>
         HB_I18N_NGETTEXT[_STRICT]( <nValue>, <cMsgID> | <acMsgID> ;
                                    [, <cContext> ] )
               -> <cTranslatedMsgID> | <cMsgID> | <acMsgID>[ <nIndex> ]
      This is minimal support necessary for .prg code which has to exists
      in each i18n module working with Harbour.

      The following functions had been added as public C API:
         PHB_ITEM hb_i18n_gettext( PHB_ITEM pMsgID, PHB_ITEM pContext )
         PHB_ITEM hb_i18n_ngettext( PHB_ITEM pNum,
                                    PHB_ITEM pMsgID, PHB_ITEM pContext )

      The following functions had been added as private HVM C API:
         void   hb_i18n_init( void )
         void   hb_i18n_exit( void )
         void   hb_i18n_release( void * cargo )
         void * hb_i18n_alloc( void * cargo )
      They have to be supported by alternative i18n modules

      The following functions has been added to manage Harbour i18n
      translations sets:

         HB_I18N_CREATE()
                  -> <pI18N>
            Creates new empty I18N translation set

         HB_I18N_CODEPAGE( [<pI18N>,] [<cNewCP>], [<lBase>], [<lTranslate>] )
                  -> <cOldCP>
            Gets or sets Harbour codepage used by translation set
            <pI18N> - I18N translation set,
                      if it's not given then currently active I18N set is used
            <cNewCP> - new CP ID. Must be linked with application
            <lBase> - when it's .T. then get/set base massages CP instead of
                      translated massages CP
            <lTranslate> - if it's .T. then translate base (<lBase>==.T.) or
                           final messages in I18N set from previous CP to
                           given one. Base messages translation in synced
                           with context ID translation.

         HB_I18N_PLURALFORM( [<pI18N>,] [<cNewForm>|<bNewForm>], [<lBase>] )
                  -> <cOldForm>|<bOldForm>
            Gets or sets plural form used for final or base messages
            <pI18N> - I18N translation set,
                      if it's not given then currently active I18N set is used
            <cNewForm> - language ID of plural form, f.e.: "EN", "PL", "LT".
                         Now only three above are supported. Please add rules
                         for other languages to source/rtl/hbi18n.c.
            <bNewForm> - codeblock used to calculate plural form indexes.
                         can be used instead of character representation but
                         it's not storred in serialized I18N set
            <lBase> - when it's .T. then get/set base massages plural form
                      instead of translated massages one.

         HB_I18N_DESCRIPTION( [<pI18N>,] [<cNewDescription>] )
                  -> <cOldDescription>
            Gets or sets translation set description. After serialization
            up to 32 bytes is stored in header which can be easy used to
            determinate type of translation file.
            <pI18N> - I18N translation set,
                      if it's not given then currently active I18N set is used
            <cNewDescription> - new description

         HB_I18N_ADDTEXT( <pI18N>, <cMsgID>, <cTrans> | <acTrans> [, <cContext> ] )
                  -> NIL
            Adds new message with translation to i18n translation set
            <pI18N> - I18N translation set
            <cMsgID> - original message
            <cTrans> - translated message
            <acTrans> - array with translated messages used for plural forms
            <cContext> - message context

         HB_I18N_SET( [ <pI18N> | NIL ] )
                  -> <lActive>
            Sets given I18N translation set as default one used by
            HB_I18N_[N]GETTEXT[_STRICT]() functions or remove translation
            set for calling thread when passed parameter is NIL
            <pI18N> - I18N translation set
            Returns logical value which is .T. when i18n set is active

         HB_I18N_SAVETABLE( [<pI18N>] )
                  -> <cTable>
            Returns I18N translation as string item which can be stored
            in file or database
            <pI18N> - I18N translation set, if it's not given then currently
                      active I18N set is used

         HB_I18N_RESTORETABLE( <cTable> )
                  -> <pI18N> | NIL
            Restores I18N translation set from strin item.
            <cTable> - I18N translation set in string representation
            On success it returns new <pI18N> set otherwise NIL if <cTable>
            is not valid item created by HB_I18N_SAVETABLE() or it's corrupted.

         HB_I18N_HEADERSIZE()
                  -> <nHeaderSize>
            Returns size of header used by i18n serialized version

         HB_I18N_CHEK( <cTable> | <cHeader> [, @<cDescription> ] )
                  -> <lValid>
            <cTable> - i18n translation set serialized by HB_I18N_SAVETABLE
            <cHeader> - header of i18n translation set
                        ( LEFT( <cTable>, HB_I18N_HEADERSIZE() )
            <cDescription> - optional parameter passed by reference where
                             will be sored i18n translation set description
                             extracted from valid header
            Returns logical value indicating if given table or header is
            valid serialized by HB_I18N_SAVETABLE() data. It does not
            decode the table though it validates size and control sums.

      These functions are optional and some future alternative implementations
      may not support all of them and/or may provide some other functions.

    + added unofficial .prg function __I18N_HASHTABLE() which allows to
      access hash table used by i18n translation set or create new translation
      set with given hash table. It's helper functions for developers which
      will work on Harbour i18n tools and should not be used by Harbour users.

      Unlike original gettext Harbour allows to use language with many
      plural forms as base one. In such case programmer should activate
      at application startup default i18n translation set with base plural
      form valid for base application language, f.e. by:
         pI18N := hb_i18n_create()
         hb_i18n_pluralForm( pI18N, <cLangID> | <bForm>, .t. )
         hb_i18n_set( pI18N )
      .prg code example:

         #xtranslate _( <x,...> ) => hb_i18n_gettext_strict( <x> )
         #xtranslate _N( <x,...> ) => hb_i18n_ngettext_strict( <x> )

         proc main()
            local pI18N, i

            pI18N := hb_i18n_create()
            hb_i18n_pluralForm( pI18N, "PL", .t. )
            hb_i18n_set( pI18N )

            for i := 0 to 30
               ? i, _N( i, {"grosz", "grosze", "groszy"} )
               if i > 0 .and. i % 10 == 0
                  wait
               endif
            next
         return

      In .pot files created during compilation by Harbour with -j option
      for above code we have the following entries for message with plural
      forms:
            msgid "grosz"
            msgid_plural "grosze"
            msgid_plural2 "groszy"
            msgstr[0] ""
      The msgid_plural2 (and others if language has more plural forms)
      is Harbour extension which is not gettext compatible.


      The above implementation is base version but should be fully functional.
      Now we will need functions to safe/read i18n files and tools to mange
      .pot files: merge them, edit translations, create final binary i18n
      translation sets. Because we are using gettext compatible .pot files
      then for some of such jobs we can use original gettext tools but we
      need at least function which will create translation set from one or
      more .pot files.
      We should also agree some default localization(s) for files containing
      translated data, their name convention and environment variable(s)
      to set default language. It's not strictly necessary and each user
      can have his own implementation but it would help in adding new
      translations by final users to any Harbour application which will
      respect them. We can use LANG envvar to extract preferred language
      and use the same path as executed application looking for files
      <appname>-<lang>.hil files though it may create some problems for
      OSes which support only 8.3 file names so we can also define that
      HB_I18N envvar has higher priority and points to expected translation
      file.

  * harbour/include/hbextern.ch
    - removed old __i18n_*() functions
    + added current i18n functions

best regards
Przemek
From cvc at oohg.org  Thu Dec 11 14:01:54 2008
From: cvc at oohg.org (Ciro Vargas Clemow)
Date: Thu Dec 11 14:02:01 2008
Subject: [Harbour] printing problem
Message-ID: <494163A2.8050006@oohg.org>

Hi all:

I try this .prg over an epson lx300 on lpt1

**** test.prg
set print on
? "hello world",hb_version()
set print off
quit
**** end

I no obtain any print result

but if I try

**** test.prg
set printer to prn
set print on
? "hello world",hb_version()
set print off
quit
**** end

I obtain a correct print

I use  Harbour 1.1.0dev (Rev. 9908)

this problem was Fixed?

best regards
Ciro









-- 
http://sistemascvc.tripod.com  (la casa del clip2win y nodosimp / the no2imp and 
clip2win home )

http://www.oohg.org ( Object Oriented Harbour GUI, more simple, more powerfull )


From vailtom at gmail.com  Thu Dec 11 15:06:33 2008
From: vailtom at gmail.com (Vailton Renato)
Date: Thu Dec 11 15:06:37 2008
Subject: [Harbour] Harbour Web Site - English & Portuguese version
Message-ID: <531d7a750812111206q4c63ef5lac1401af490eb30@mail.gmail.com>

Hi all!

I concluded much of the development of the site for the project and
would like to present the results.

Project site in English:
http://www.harbour-project.org/preview2/index.html

Project site in Portuguese of Brazil (updated mirror):
http://www.harbour-project.com.br/

If I forgot to include someone in the Crew List please let me know.
Opportunity to list the details that feel incomplete:

* Documentation> Harbor documentation Index
   Requires adjustments in the layout of the page.

* Documentation> Tutorials
   Need texts to fill the page. I have personal difficulties in
assembling something in English to this page, but in the longer
version in Portuguese I can contribute more.

* Downloads> Helping tools
  If you approve the idea, I think here would be the ideal place to
put a list of tools for download as auxiliary Bison, GCC, FLEX,
TortoiseSVN, and so on.

Outside this, the site as a whole needs to be reviewed in search of
errors. I look forward criticisms and suggestions ...
Vailton Renato
From lorenzo.fiorini at gmail.com  Thu Dec 11 17:39:11 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Dec 11 17:39:15 2008
Subject: [Harbour] Is it possible to optionally accept true/false/and/or in
	addition to dotted logicals?
Message-ID: <9257026e0812111439o606b2ec4teec82c5d61e30cc1@mail.gmail.com>

I'm trying to add additional support for true/false/and/or and I'm
puzzling around complex.c, harbour.y and HB_REBUILD_PARSER but I still
can't find the right solution.

The idea is that since we have both new "!" and old ".not." to add
also new "and", "or", "true", "false" and keep old ".and.", ".or.",
".t.", ".f."

PP #define for true and false have been in common.ch since years but
at runtime we need to still use only .t. or .f.

Any hint?

best regards,
Lorenzo
From rodrmigu at gmail.com  Thu Dec 11 19:11:34 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Thu Dec 11 19:11:38 2008
Subject: [Harbour] 2008-12-11 19:48 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081211185012.GA6356@34-mo7-2.acn.waw.pl>
References: <20081211185012.GA6356@34-mo7-2.acn.waw.pl>
Message-ID: <80b05d460812111611p599aae4n530e51d729f7ccb6@mail.gmail.com>

Hi Przemek,

I got this error running the compiled app with the last version from svn:

Rodrigo@RMSMNOTE /xhgtk/samples/functions
$ mask

Unrecoverable error 6005: Exception error:

    Exception Code:C0000005
    Exception Address:004CACC5
    EAX:00C4638C  EBX:00C46320  ECX:00000000  EDX:00000001
    ESI:00C46320  EDI:00C46140  EBP:0023FE28
    CS:EIP:001B:004CACC5  SS:ESP:0023:0023FE00
    DS:0023  ES:0023  FS:003B  GS:0000
    Flags:00010202
    CS:EIP: 80 3A 00 74 57 31 DB EB 16 66 90 8B 45 F0 83 F8
    SS:ESP: 0023FD50 00000000 0023FFE0 7C839AC0 7C81ACB8 0000B994
0023FE48 00C46320 00C46320 00400000 0023FE48 004C652C 00C46320
00000001 00C4638C 00C46388

    C stack:
    EIP:     EBP:       Frame: OldEBP, RetAddr, Params...
    004CACC5 0023FE28   0023FE48 004C652C 00C46320 00000001 00C4638C
00C46388 00C46320 004C6510
    004C652C 0023FE48   0023FE68 004CD5AC 00C46320 00000001 00000001
00000002 00000002 00000000
    004CD5AC 0023FE68   0023FE88 004AB0EB 00000000 00000001 00000002
7C90F641 00000000 0054A880
    004AB0EB 0023FE88   0023FEC8 00480CFD 0053CCF1 00400000 0023FEC8
00480CAD 00000001 00400000 0023FEC8 004A75E5
    00480CFD 0023FEC8   0023FEF8 004A8E30 00000001 00548AB8 0000000A
00256B00 0023FEC4 00256BD0 0023FFE0 00252394
    004A8E30 0023FEF8   0023FF78 0051BDF0 00400000 00000000 00252394
0000000A 0023FF4C 77C35C94 77C3A52E 77C61AE8
    0051BDF0 0023FF78   0023FFB0 0040124B 00000001 000331F0 00033438
00548000 0023FFA4 FFFFFFFF 0023FFA8 00000001
    0040124B 0023FFB0   0023FFC0 00401298 00000001 00000009
    00401298 0023FFC0   0023FFF0 7C817067 00000000 00000000 7FFDB000
C0000005 0023FFC8 0023FA24 FFFFFFFF 7C839AC0


Also, I got these errors durng the compile time:

./bin/postinst.sh
Generating /harbour/bin/hb-build...
Creating links...
Making harbour.dll...
./libhbextern.a/hbextern.o:hbextern.c:(.data+0x1cd8): undefined
reference to `_HB_FUN___I18N_SAVE'
./libhbextern.a/hbextern.o:hbextern.c:(.data+0x1ce8): undefined
reference to `_HB_FUN___I18N_LOAD'
./libhbextern.a/hbextern.o:hbextern.c:(.data+0x1cf8): undefined
reference to `_HB_FUN___I18N_LOADFROMMEMORY'
./libhbextern.a/hbextern.o:hbextern.c:(.data+0x1d08): undefined
reference to `_HB_FUN___I18N_GETTEXT'
collect2: ld returned 1 exit status
Making harbourmt.dll...
./libhbextern.a/hbextern.o:hbextern.c:(.data+0x1cd8): undefined
reference to `_HB_FUN___I18N_SAVE'
./libhbextern.a/hbextern.o:hbextern.c:(.data+0x1ce8): undefined
reference to `_HB_FUN___I18N_LOAD'
./libhbextern.a/hbextern.o:hbextern.c:(.data+0x1cf8): undefined
reference to `_HB_FUN___I18N_LOADFROMMEMORY'
./libhbextern.a/hbextern.o:hbextern.c:(.data+0x1d08): undefined
reference to `_HB_FUN___I18N_GETTEXT'
collect2: ld returned 1 exit status

PS: I'm using mingw

Thanks & Regards
Rodrigo



On Thu, Dec 11, 2008 at 4:50 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:
> 2008-12-11 19:48 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/include/hbthread.h
>  * harbour/source/vm/thread.c
>    + added hb_atomic_set(), hb_atomic_get(), hb_atomic_inc() and
>      hb_atomic_dec() functions which operates on HB_COUNTER or smaller
>      type if it's necessary for some platforms which can be access/assign
>      increment/decrement in MT safe atom operations.
>      hb_atomic_dec() returns true if counter is 0 after decrementation
>
>  * harbour/include/hbatomic.h
>    ! fixed compilation in Linux and OpenWatcom
>
>  * harbour/include/hbapiitm.h
>  * harbour/source/rtl/itemseri.c
>    + make hb_itemSerialize() and hb_itemDeserialize() public functions
>    ! fixed serialization items with internal item references
>
>  * harbour/source/vm/hvm.c
>    * release memvars after closing RDDs
>
>  * harbour/source/debug/dbgentry.c
>    ! fixed buffer overflow reported by Rodrigo
>
>  * harbour/source/vm/macro.c
>  * harbour/source/compiler/hbmain.c
>    * formatting
>
>  * harbour/include/hbexprb.c
>    ! fixed wrongly recognized functions with HB_I18N_ prefix as
>      HB_I18N_GETTEXT()
>
>  * harbour/include/hbapi.h
>  * harbour/include/hbstack.h
>  * harbour/include/hbthread.h
>  * harbour/source/vm/estack.c
>  * harbour/source/vm/thread.c
>  * harbour/source/vm/hvm.c
>    + added support for I18N in HVM.
>      Each thread can have it's own i18n set.
>      When new thread is created then it inherits i18n set from parent
>      thread and both uses the same set (please remember about it if you
>      will want to make some direct modifications on active i18n set
>      internals).
>      When thread change active i18n set then it effects only this thread
>      and new threads which will be create later. It does not change i18n
>      in other existing threads.
>    + added functions to set/get pointer to active i18n set in HVM
>         void * hb_vmI18N( void )
>         void   hb_vmSetI18N( void * )
>
>  * harbour/include/hbapi.h
>  * harbour/source/rtl/hbi18n.c
>    + added i18n module. Now only for internal Harbour usage without support
>      for optional switching to alternative implementations.
>      I'll add such functionality later when I will work on native gettext
>      support.
>
>      The following public .prg functions has been added:
>         HB_I18N_GETTEXT[_STRICT]( <cMsgID> [, <cContext> ] )
>               -> <cTranslatedMsgID> | <cMsgID>
>         HB_I18N_NGETTEXT[_STRICT]( <nValue>, <cMsgID> | <acMsgID> ;
>                                    [, <cContext> ] )
>               -> <cTranslatedMsgID> | <cMsgID> | <acMsgID>[ <nIndex> ]
>      This is minimal support necessary for .prg code which has to exists
>      in each i18n module working with Harbour.
>
>      The following functions had been added as public C API:
>         PHB_ITEM hb_i18n_gettext( PHB_ITEM pMsgID, PHB_ITEM pContext )
>         PHB_ITEM hb_i18n_ngettext( PHB_ITEM pNum,
>                                    PHB_ITEM pMsgID, PHB_ITEM pContext )
>
>      The following functions had been added as private HVM C API:
>         void   hb_i18n_init( void )
>         void   hb_i18n_exit( void )
>         void   hb_i18n_release( void * cargo )
>         void * hb_i18n_alloc( void * cargo )
>      They have to be supported by alternative i18n modules
>
>      The following functions has been added to manage Harbour i18n
>      translations sets:
>
>         HB_I18N_CREATE()
>                  -> <pI18N>
>            Creates new empty I18N translation set
>
>         HB_I18N_CODEPAGE( [<pI18N>,] [<cNewCP>], [<lBase>], [<lTranslate>] )
>                  -> <cOldCP>
>            Gets or sets Harbour codepage used by translation set
>            <pI18N> - I18N translation set,
>                      if it's not given then currently active I18N set is used
>            <cNewCP> - new CP ID. Must be linked with application
>            <lBase> - when it's .T. then get/set base massages CP instead of
>                      translated massages CP
>            <lTranslate> - if it's .T. then translate base (<lBase>==.T.) or
>                           final messages in I18N set from previous CP to
>                           given one. Base messages translation in synced
>                           with context ID translation.
>
>         HB_I18N_PLURALFORM( [<pI18N>,] [<cNewForm>|<bNewForm>], [<lBase>] )
>                  -> <cOldForm>|<bOldForm>
>            Gets or sets plural form used for final or base messages
>            <pI18N> - I18N translation set,
>                      if it's not given then currently active I18N set is used
>            <cNewForm> - language ID of plural form, f.e.: "EN", "PL", "LT".
>                         Now only three above are supported. Please add rules
>                         for other languages to source/rtl/hbi18n.c.
>            <bNewForm> - codeblock used to calculate plural form indexes.
>                         can be used instead of character representation but
>                         it's not storred in serialized I18N set
>            <lBase> - when it's .T. then get/set base massages plural form
>                      instead of translated massages one.
>
>         HB_I18N_DESCRIPTION( [<pI18N>,] [<cNewDescription>] )
>                  -> <cOldDescription>
>            Gets or sets translation set description. After serialization
>            up to 32 bytes is stored in header which can be easy used to
>            determinate type of translation file.
>            <pI18N> - I18N translation set,
>                      if it's not given then currently active I18N set is used
>            <cNewDescription> - new description
>
>         HB_I18N_ADDTEXT( <pI18N>, <cMsgID>, <cTrans> | <acTrans> [, <cContext> ] )
>                  -> NIL
>            Adds new message with translation to i18n translation set
>            <pI18N> - I18N translation set
>            <cMsgID> - original message
>            <cTrans> - translated message
>            <acTrans> - array with translated messages used for plural forms
>            <cContext> - message context
>
>         HB_I18N_SET( [ <pI18N> | NIL ] )
>                  -> <lActive>
>            Sets given I18N translation set as default one used by
>            HB_I18N_[N]GETTEXT[_STRICT]() functions or remove translation
>            set for calling thread when passed parameter is NIL
>            <pI18N> - I18N translation set
>            Returns logical value which is .T. when i18n set is active
>
>         HB_I18N_SAVETABLE( [<pI18N>] )
>                  -> <cTable>
>            Returns I18N translation as string item which can be stored
>            in file or database
>            <pI18N> - I18N translation set, if it's not given then currently
>                      active I18N set is used
>
>         HB_I18N_RESTORETABLE( <cTable> )
>                  -> <pI18N> | NIL
>            Restores I18N translation set from strin item.
>            <cTable> - I18N translation set in string representation
>            On success it returns new <pI18N> set otherwise NIL if <cTable>
>            is not valid item created by HB_I18N_SAVETABLE() or it's corrupted.
>
>         HB_I18N_HEADERSIZE()
>                  -> <nHeaderSize>
>            Returns size of header used by i18n serialized version
>
>         HB_I18N_CHEK( <cTable> | <cHeader> [, @<cDescription> ] )
>                  -> <lValid>
>            <cTable> - i18n translation set serialized by HB_I18N_SAVETABLE
>            <cHeader> - header of i18n translation set
>                        ( LEFT( <cTable>, HB_I18N_HEADERSIZE() )
>            <cDescription> - optional parameter passed by reference where
>                             will be sored i18n translation set description
>                             extracted from valid header
>            Returns logical value indicating if given table or header is
>            valid serialized by HB_I18N_SAVETABLE() data. It does not
>            decode the table though it validates size and control sums.
>
>      These functions are optional and some future alternative implementations
>      may not support all of them and/or may provide some other functions.
>
>    + added unofficial .prg function __I18N_HASHTABLE() which allows to
>      access hash table used by i18n translation set or create new translation
>      set with given hash table. It's helper functions for developers which
>      will work on Harbour i18n tools and should not be used by Harbour users.
>
>      Unlike original gettext Harbour allows to use language with many
>      plural forms as base one. In such case programmer should activate
>      at application startup default i18n translation set with base plural
>      form valid for base application language, f.e. by:
>         pI18N := hb_i18n_create()
>         hb_i18n_pluralForm( pI18N, <cLangID> | <bForm>, .t. )
>         hb_i18n_set( pI18N )
>      .prg code example:
>
>         #xtranslate _( <x,...> ) => hb_i18n_gettext_strict( <x> )
>         #xtranslate _N( <x,...> ) => hb_i18n_ngettext_strict( <x> )
>
>         proc main()
>            local pI18N, i
>
>            pI18N := hb_i18n_create()
>            hb_i18n_pluralForm( pI18N, "PL", .t. )
>            hb_i18n_set( pI18N )
>
>            for i := 0 to 30
>               ? i, _N( i, {"grosz", "grosze", "groszy"} )
>               if i > 0 .and. i % 10 == 0
>                  wait
>               endif
>            next
>         return
>
>      In .pot files created during compilation by Harbour with -j option
>      for above code we have the following entries for message with plural
>      forms:
>            msgid "grosz"
>            msgid_plural "grosze"
>            msgid_plural2 "groszy"
>            msgstr[0] ""
>      The msgid_plural2 (and others if language has more plural forms)
>      is Harbour extension which is not gettext compatible.
>
>
>      The above implementation is base version but should be fully functional.
>      Now we will need functions to safe/read i18n files and tools to mange
>      .pot files: merge them, edit translations, create final binary i18n
>      translation sets. Because we are using gettext compatible .pot files
>      then for some of such jobs we can use original gettext tools but we
>      need at least function which will create translation set from one or
>      more .pot files.
>      We should also agree some default localization(s) for files containing
>      translated data, their name convention and environment variable(s)
>      to set default language. It's not strictly necessary and each user
>      can have his own implementation but it would help in adding new
>      translations by final users to any Harbour application which will
>      respect them. We can use LANG envvar to extract preferred language
>      and use the same path as executed application looking for files
>      <appname>-<lang>.hil files though it may create some problems for
>      OSes which support only 8.3 file names so we can also define that
>      HB_I18N envvar has higher priority and points to expected translation
>      file.
>
>  * harbour/include/hbextern.ch
>    - removed old __i18n_*() functions
>    + added current i18n functions
>
> best regards
> Przemek
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From rodrmigu at gmail.com  Thu Dec 11 19:53:27 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Thu Dec 11 19:53:32 2008
Subject: [Harbour] 2008-12-04 23:56 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <609353e70812080725r1d91a3bbm5842bd2500f0410@mail.gmail.com>
References: <20849382.post@talk.nabble.com>
	<609353e70812080725r1d91a3bbm5842bd2500f0410@mail.gmail.com>
Message-ID: <80b05d460812111653q5ccf8fc5ib88d6a84534b304d@mail.gmail.com>

HI,

Also, I got this error:

make[3]: Entering directory `/d/cvs/harbour/contrib/gtwvg/w32/mingw'
gcc -I. -I../../../../include -Wall -W -O3 -march=i586  -c
../../wvgwin.c -owvgwin.o
../../wvgwin.c: In function `HB_FUN_WVG_TREEVIEW_ADDITEM':
../../wvgwin.c:1598: error: structure has no member named `item'
../../wvgwin.c:1599: error: structure has no member named `item'
../../wvgwin.c:1600: error: structure has no member named `item'
../../wvgwin.c:1601: error: `TVIS_EXPANDPARTIAL' undeclared (first use
in this function)
../../wvgwin.c:1601: error: (Each undeclared identifier is reported only once
../../wvgwin.c:1601: error: for each function it appears in.)
../../wvgwin.c:1604: error: structure has no member named `item'
../../wvgwin.c:1606: error: structure has no member named `item'
../../wvgwin.c: In function `HB_FUN_WVG_TREEVIEW_SHOWEXPANDED':
../../wvgwin.c:1636: warning: passing arg 4 of `SendMessageA' makes
integer from pointer without a cast


Regards,
Rodrigo

On Mon, Dec 8, 2008 at 1:25 PM, Massimo Belgrano <mbelgrano@deltain.it> wrote:
> C:\harbour\contrib\gtwvg\tests>hBMK_B32 -mt  demowvg
> demowvg.prg(33) Error F0029  Can't open #include file 'wvgparts.ch'
> 1 error
>
> No code generated
> Error E2194: Could not find file 'demowvg.c'
>
>
>
> 2008/12/5 Pritpal Bedi <bedipritpal@hotmail.com>
>>
>> 2008-12-04 23:56 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
>>  * harbour/contrib/gtwvg/tests/hbmk_b32.bat
>>    + xhb.lib - just to take use of hb_ToOutDebug(). While under heavy
>>      changes I need to keep the debugging info intact. Final sources
>>      will not have this included.
>>
>>  * harbour/contrib/gtwvg/wvggui.c
>>  * harbour/contrib/gtwvg/wvgwin.c
>>  * harbour/contrib/gtwvg/wvgparts.ch
>>  * harbour/contrib/gtwvg/wvtwin.ch
>>  * harbour/contrib/gtwvg/winback.prg
>>  * harbour/contrib/gtwvg/wvgax.prg
>>  * harbour/contrib/gtwvg/wvgcrt.prg
>>  * harbour/contrib/gtwvg/wvgdlg.prg
>>  * harbour/contrib/gtwvg/wvglistb.prg
>>  * harbour/contrib/gtwvg/wvgphdlr.prg
>>  * harbour/contrib/gtwvg/wvgpushb.prg
>>  * harbour/contrib/gtwvg/wvgstatb.prg
>>  * harbour/contrib/gtwvg/wvgstatc.prg
>>  * harbour/contrib/gtwvg/wvgtoolb.prg
>>  * harbour/contrib/gtwvg/wvgtreev.prg
>>  * harbour/contrib/gtwvg/wvghwnd.prg
>>    + Implemented ( partially ) WvgTreeView(), WvgListBox() classes.
>>    ; Heavy changes in class structure, introduction  of new functions,
>>      refinement of old ones, heavy implementtaion of hb_ACallBack()s.
>>
>>  * harbour/contrib/gtwvg/tests/demowvg.prg
>>    + Added functionality of WvtTreeView() and WvtListBox() classes.
>>
>>    ;TODO : Few functions in wvgwin.c are not UNICODE compliant yet.
>>
>> Regards
>> Pritpal Bedi
>> --
>> View this message in context:
>> http://www.nabble.com/2008-12-04-23%3A56-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20849382p20849382.html
>> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
>
> --
> Massimo Belgrano
>
> Albo Nazionale Informatici Professionisti 2620
> Socio 2843 Associazione Informatici prof.
>
> Analisi e sviluppo software per Lan e Web
> Consulenza informatica - Formazione
> Delta Informatica S.r.l.  http://www.deltain.it
> Via Torelli,31 - 28100 Novara - Tel: 0321/30281
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
From lorenzo.fiorini at gmail.com  Fri Dec 12 01:37:08 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Dec 12 01:37:11 2008
Subject: [Harbour] 2008-12-08 16:30 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
In-Reply-To: <20081208153101.GA3164@34-mo7-2.acn.waw.pl>
References: <20081208153101.GA3164@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0812112237i56973286ta4800924445c13a4@mail.gmail.com>

On Mon, Dec 8, 2008 at 4:31 PM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

> 2008-12-08 16:30 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)

4 days delay! I got this only on the 12/12 morning.

Are there problems?

best regards,
Lorenzo
From bedipritpal at hotmail.com  Fri Dec 12 02:17:23 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Dec 12 02:17:26 2008
Subject: [Harbour] 2008-12-04 23:56 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <609353e70812080725r1d91a3bbm5842bd2500f0410@mail.gmail.com>
References: <20849382.post@talk.nabble.com>
	<609353e70812080725r1d91a3bbm5842bd2500f0410@mail.gmail.com>
Message-ID: <20970938.post@talk.nabble.com>


Did you compile gtwvg itself ?


Massimo Belgrano-3 wrote:
> 
> C:\harbour\contrib\gtwvg\tests>hBMK_B32 -mt  demowvg
> demowvg.prg(33) Error F0029  Can't open #include file 'wvgparts.ch'
> 1 error
> 
> No code generated
> Error E2194: Could not find file 'demowvg.c'
> 
> 

-- 
View this message in context: http://www.nabble.com/2008-12-04-23%3A56-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20849382p20970938.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Fri Dec 12 02:21:26 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Dec 12 02:21:28 2008
Subject: [Harbour] 2008-12-04 23:56 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <80b05d460812111653q5ccf8fc5ib88d6a84534b304d@mail.gmail.com>
References: <20849382.post@talk.nabble.com>
	<609353e70812080725r1d91a3bbm5842bd2500f0410@mail.gmail.com>
	<80b05d460812111653q5ccf8fc5ib88d6a84534b304d@mail.gmail.com>
Message-ID: <20970967.post@talk.nabble.com>


Rodrigo

I checked mingw's commctrl.h and have found definition of TV_ITEMA and
TV_ITEMW.
Why it is missing in your distribution I do not know. May be someone else
can help.

TVIS_EXPANDPARTIAL is missing in the headers so we need a workaround.
Przemek ?

Regards
Pritpal Bedi


Rodrigo Miguel wrote:
> 
> make[3]: Entering directory `/d/cvs/harbour/contrib/gtwvg/w32/mingw'
> gcc -I. -I../../../../include -Wall -W -O3 -march=i586  -c
> ../../wvgwin.c -owvgwin.o
> ../../wvgwin.c: In function `HB_FUN_WVG_TREEVIEW_ADDITEM':
> ../../wvgwin.c:1598: error: structure has no member named `item'
> ../../wvgwin.c:1599: error: structure has no member named `item'
> ../../wvgwin.c:1600: error: structure has no member named `item'
> ../../wvgwin.c:1601: error: `TVIS_EXPANDPARTIAL' undeclared (first use
> in this function)
> ../../wvgwin.c:1601: error: (Each undeclared identifier is reported only
> once
> ../../wvgwin.c:1601: error: for each function it appears in.)
> ../../wvgwin.c:1604: error: structure has no member named `item'
> ../../wvgwin.c:1606: error: structure has no member named `item'
> ../../wvgwin.c: In function `HB_FUN_WVG_TREEVIEW_SHOWEXPANDED':
> ../../wvgwin.c:1636: warning: passing arg 4 of `SendMessageA' makes
> integer from pointer without a cast
> 

-- 
View this message in context: http://www.nabble.com/2008-12-04-23%3A56-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20849382p20970967.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From sscc at mweb.co.za  Fri Dec 12 03:20:39 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Dec 12 03:20:45 2008
Subject: [Harbour] Sample XBASE++ for gtwvg
In-Reply-To: <609353e70812080746v6872166fs957026fff9e16fef@mail.gmail.com>
References: <609353e70812080746v6872166fs957026fff9e16fef@mail.gmail.com>
Message-ID: <49421ED7.9040304@mweb.co.za>

Massimo Belgrano wrote:

Please note this line in the file you posted:

> //  Copyright:
> //     Alaska Software Inc., (c) 1997-1999. All rights reserved.         
> 

Regards
Alex
From sscc at mweb.co.za  Fri Dec 12 03:23:01 2008
From: sscc at mweb.co.za (Alex Strickland)
Date: Fri Dec 12 03:23:22 2008
Subject: [Harbour] Incorrect procedure names in HB_OUT.LOG
In-Reply-To: <B0085464781@ms1.3peaks.com>
References: <20081209164012.GA2638@34-mo7-2.acn.waw.pl>	<493EDC87.8000007@zen.co.uk>
	<B0085464781@ms1.3peaks.com>
Message-ID: <49421F65.30908@mweb.co.za>

Randy Portnoff wrote:
> The procedure names below *(in red)* are incorrect in the HB_OUT.LOG file:
> 
> Called from OLEGETPROPERTY(0)
> Called from TOLEAUTO:GET(216) *in source\rtl\tget.prg
> *Called from TOLEAUTO:QUIT(240) *in QUIT.prg
> *Called from READXLS(54) in OLE.prg
> Called from PRG54(19) in PRG54.prg
> Called from INVOKEMENUOPTION(0) in MAIN_PP.prg
> Called from MAIN(0) in MAIN_PP.prg

Yes, I have also noted problems in the file names in stack traces. I'm 
using 1.0.1 release compiled with MSVC.

Regards
Alex
From Jose.Luis at iaicom.com  Fri Dec 12 03:25:26 2008
From: Jose.Luis at iaicom.com (Jose Luis Capel)
Date: Fri Dec 12 03:28:49 2008
Subject: [Harbour] OT: __GETMESSAGE
Message-ID: <10C28C4554DFE54EB20321B9CB8931C2283340@servidor01.AGSoft.local>

Hi all,

Sorry for the off-topic and sorry for my low C level...

I saw that __GETMESSAGE in classes.c is defined as:

HB_FUNC( __GETMESSAGE )
{
   hb_retc( hb_stackItem(hb_stackBaseItem()->item.asSymbol.stackstate->lBaseItem )->item.asSymbol.value->szName  );
} 

Then, in my proyect I want to integrate that piece of code.  I do this:

#pragma BEGINDUMP

#include "hbapi.h"
#include "hbstack.h"

HB_FUNC ( __MYFUNCTION )
{
 char * cMessage = (hb_stackItem( hb_stackBaseItem()->item.asSymbol.stackstate->lBaseItem )->item.asSymbol.value->szName) ;

/* My code will go below */

}

#pragma ENDDUMP



But when compiling this little example I have these messages error:

tdatabase.c
tdatabase.prg(220) : error C2223: left of '->item' must point to struct/union
tdatabase.prg(220) : error C2198: 'hb_stackItem' : too few actual parameters
tdatabase.prg(220) : error C2223: left of '->item' must point to struct/union

And this is my problem:  I cannot understand these errors and also I cannot understand why in classes.c compile OK whilst in my project throws these errors.

If someone could light me I shall appreciate too much.

Thanks for your help.
Regards,
Jos? Luis Capel


From mbelgrano at deltain.it  Fri Dec 12 05:18:03 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Dec 12 05:18:06 2008
Subject: [Harbour] Sample XBASE++ for gtwvg
In-Reply-To: <49421ED7.9040304@mweb.co.za>
References: <609353e70812080746v6872166fs957026fff9e16fef@mail.gmail.com>
	<49421ED7.9040304@mweb.co.za>
Message-ID: <609353e70812120218m48abdaeek16946c6fdb116f98@mail.gmail.com>

Thanks for notice usI think that Is possible use for made test


2008/12/12 Alex Strickland <sscc@mweb.co.za>

> Massimo Belgrano wrote:
>
> Please note this line in the file you posted:
>
>  //  Copyright:
>> //     Alaska Software Inc., (c) 1997-1999. All rights reserved.
>>
>
> Regards
> Alex
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081212/e5798d07/attachment.html
From mbelgrano at deltain.it  Fri Dec 12 05:25:06 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Dec 12 05:25:13 2008
Subject: [Harbour] Harbour Web Site - English & Portuguese version
In-Reply-To: <531d7a750812111206q4c63ef5lac1401af490eb30@mail.gmail.com>
References: <531d7a750812111206q4c63ef5lac1401af490eb30@mail.gmail.com>
Message-ID: <609353e70812120225q26a20b27l5eee72b755c1ebd3@mail.gmail.com>

Very complimenta little suggestion can you add in documentation secttion
 information about contrib project?

2008/12/11 Vailton Renato <vailtom@gmail.com>

> Hi all!
>
> I concluded much of the development of the site for the project and
> would like to present the results.
>
> Project site in English:
> http://www.harbour-project.org/preview2/index.html
>
> Project site in Portuguese of Brazil (updated mirror):
> http://www.harbour-project.com.br/
>
> If I forgot to include someone in the Crew List please let me know.
> Opportunity to list the details that feel incomplete:
>
> * Documentation> Harbor documentation Index
>   Requires adjustments in the layout of the page.
>
> * Documentation> Tutorials
>   Need texts to fill the page. I have personal difficulties in
> assembling something in English to this page, but in the longer
> version in Portuguese I can contribute more.
>
> * Downloads> Helping tools
>  If you approve the idea, I think here would be the ideal place to
> put a list of tools for download as auxiliary Bison, GCC, FLEX,
> TortoiseSVN, and so on.
>
> Outside this, the site as a whole needs to be reviewed in search of
> errors. I look forward criticisms and suggestions ...
> Vailton Renato
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081212/e9037601/attachment-0001.html
From druzus at acn.waw.pl  Fri Dec 12 05:48:53 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Dec 12 05:46:40 2008
Subject: [Harbour] Mail list problem
Message-ID: <20081212104853.GA6692@34-mo7-2.acn.waw.pl>

Hi All,

I see your messages on harbour mailing list archive but I haven't
received any mail in last 4 days.
If nothing will change then I'll copy and past them to replay but
maybe Phil can make sth with it.
Phil? It's a real problem. Can you help?
I had such problems in the past and as workaround I was registering
other mail addresses in Harbour-devel list and then changing the active
one but I was loosing messages and receiving some others more then once
and it was helping only temporary.

Meanwhile some short answers:

1. Rodrigo, you have to recompile whole Harbour source code
   (make clean). Your hbextern library was compiled with old
   __I18N_*() functions.

2. The procfile() was designed only for functions not method calls.
   I should disable showing the file for methods. I'll do it ASAP.
   If I'll find some time I maybe I'll add also support for methods.
   Please only remember that PROCFILE() shows only main module name
   and we do not have any information about included files so using
   it with PROCLINE() does not have to point (and ever did neither
   in Harbour nor xHarbour) to exact source code file.

3. Lorenzo, two days ago I rebuild Harbour and xhgtk on Windows
   and created shared libraries. It works like in Linux and it's
   possible to link all bindings to GTK+2.0 inside xhgtk.dll so
   later is possible to use only -lxhgtk to link final Harbour
   application. There is only one difference which have to be
   resolved in build scripts. In Windows .dll files have to be
   located in one of directory point by PATH not in LIB directory
   to execute final binaries. Few weeks ago harbour.dll was moved
   from HB_LIB_INSTALL to HB_BIN_INSTALL. It means that now
   HB_BIN_INSTALL have to be one of -L directories passed to
   gcc and hb* scripts.
   BTW I was not able to find glade binaries for Windows with
   linux/xhgtk compatible directories and .h header file names
   so I simply disabled glade support in xhgtk to recompile it.
   Which glade version do you use in Windows?

For other messages I'll replay when I will receive them. If it does not
happen in the weekend then I'll begin to answer coping them form
Harbour-devel mail list archive. If I miss sth and the problems are
still open then I'll will have to ask you to repeat your questions.

best regards,
Przemek
From rodrmigu at gmail.com  Fri Dec 12 08:05:31 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Fri Dec 12 08:05:34 2008
Subject: [Harbour] 2008-12-04 23:56 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <20970967.post@talk.nabble.com>
References: <20849382.post@talk.nabble.com>
	<609353e70812080725r1d91a3bbm5842bd2500f0410@mail.gmail.com>
	<80b05d460812111653q5ccf8fc5ib88d6a84534b304d@mail.gmail.com>
	<20970967.post@talk.nabble.com>
Message-ID: <80b05d460812120505j6ac0634j9bca69229ae8ad64@mail.gmail.com>

I'll try with 340 version of mingw.

Thanks
Rodrigo

On Fri, Dec 12, 2008 at 5:21 AM, Pritpal Bedi <bedipritpal@hotmail.com> wrote:
>
> Rodrigo
>
> I checked mingw's commctrl.h and have found definition of TV_ITEMA and
> TV_ITEMW.
> Why it is missing in your distribution I do not know. May be someone else
> can help.
>
> TVIS_EXPANDPARTIAL is missing in the headers so we need a workaround.
> Przemek ?
>
> Regards
> Pritpal Bedi
>
>
> Rodrigo Miguel wrote:
>>
>> make[3]: Entering directory `/d/cvs/harbour/contrib/gtwvg/w32/mingw'
>> gcc -I. -I../../../../include -Wall -W -O3 -march=i586  -c
>> ../../wvgwin.c -owvgwin.o
>> ../../wvgwin.c: In function `HB_FUN_WVG_TREEVIEW_ADDITEM':
>> ../../wvgwin.c:1598: error: structure has no member named `item'
>> ../../wvgwin.c:1599: error: structure has no member named `item'
>> ../../wvgwin.c:1600: error: structure has no member named `item'
>> ../../wvgwin.c:1601: error: `TVIS_EXPANDPARTIAL' undeclared (first use
>> in this function)
>> ../../wvgwin.c:1601: error: (Each undeclared identifier is reported only
>> once
>> ../../wvgwin.c:1601: error: for each function it appears in.)
>> ../../wvgwin.c:1604: error: structure has no member named `item'
>> ../../wvgwin.c:1606: error: structure has no member named `item'
>> ../../wvgwin.c: In function `HB_FUN_WVG_TREEVIEW_SHOWEXPANDED':
>> ../../wvgwin.c:1636: warning: passing arg 4 of `SendMessageA' makes
>> integer from pointer without a cast
>>
>
> --
> View this message in context: http://www.nabble.com/2008-12-04-23%3A56-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20849382p20970967.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From rodrmigu at gmail.com  Fri Dec 12 08:19:44 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Fri Dec 12 08:19:47 2008
Subject: [Harbour] 2008-12-04 23:56 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
In-Reply-To: <80b05d460812120505j6ac0634j9bca69229ae8ad64@mail.gmail.com>
References: <20849382.post@talk.nabble.com>
	<609353e70812080725r1d91a3bbm5842bd2500f0410@mail.gmail.com>
	<80b05d460812111653q5ccf8fc5ib88d6a84534b304d@mail.gmail.com>
	<20970967.post@talk.nabble.com>
	<80b05d460812120505j6ac0634j9bca69229ae8ad64@mail.gmail.com>
Message-ID: <80b05d460812120519y2f5780c3i6c268bb841d21089@mail.gmail.com>

Hi Pritpal,

No lucky, even with mingw 340 stable release,  I got the same error:

gcc -I. -I../../../../include -Wall -W -O3 -march=i586  -c
../../wvgwin.c -owvgwin.o
../../wvgwin.c: In function `HB_FUN_WVG_TREEVIEW_ADDITEM':
../../wvgwin.c:1598: error: structure has no member named `item'
../../wvgwin.c:1599: error: structure has no member named `item'
../../wvgwin.c:1600: error: structure has no member named `item'
../../wvgwin.c:1601: error: `TVIS_EXPANDPARTIAL' undeclared (first use
in this function)
../../wvgwin.c:1601: error: (Each undeclared identifier is reported only once
../../wvgwin.c:1601: error: for each function it appears in.)
../../wvgwin.c:1604: error: structure has no member named `item'
../../wvgwin.c:1606: error: structure has no member named `item'
../../wvgwin.c: In function `HB_FUN_WVG_TREEVIEW_SHOWEXPANDED':
../../wvgwin.c:1636: warning: passing arg 4 of `SendMessageA' makes
integer from pointer without a cast
make[3]: *** [wvgwin.o] Error 1
make[3]: Leaving directory `/d/cvs/harbour/contrib/gtwvg/w32/mingw'
make[2]: *** [descend] Error 2
make[2]: Leaving directory `/d/cvs/harbour/contrib/gtwvg'
make[2]: Entering directory `/d/cvs/harbour/contrib/hbct'
make[3]: Entering directory `/d/cvs/harbour/contrib/hbct/w32/mingw'

Regards,
Rodrigo

On Fri, Dec 12, 2008 at 11:05 AM, Rodrigo Miguel <rodrmigu@gmail.com> wrote:
> I'll try with 340 version of mingw.
>
> Thanks
> Rodrigo
>
> On Fri, Dec 12, 2008 at 5:21 AM, Pritpal Bedi <bedipritpal@hotmail.com> wrote:
>>
>> Rodrigo
>>
>> I checked mingw's commctrl.h and have found definition of TV_ITEMA and
>> TV_ITEMW.
>> Why it is missing in your distribution I do not know. May be someone else
>> can help.
>>
>> TVIS_EXPANDPARTIAL is missing in the headers so we need a workaround.
>> Przemek ?
>>
>> Regards
>> Pritpal Bedi
>>
>>
>> Rodrigo Miguel wrote:
>>>
>>> make[3]: Entering directory `/d/cvs/harbour/contrib/gtwvg/w32/mingw'
>>> gcc -I. -I../../../../include -Wall -W -O3 -march=i586  -c
>>> ../../wvgwin.c -owvgwin.o
>>> ../../wvgwin.c: In function `HB_FUN_WVG_TREEVIEW_ADDITEM':
>>> ../../wvgwin.c:1598: error: structure has no member named `item'
>>> ../../wvgwin.c:1599: error: structure has no member named `item'
>>> ../../wvgwin.c:1600: error: structure has no member named `item'
>>> ../../wvgwin.c:1601: error: `TVIS_EXPANDPARTIAL' undeclared (first use
>>> in this function)
>>> ../../wvgwin.c:1601: error: (Each undeclared identifier is reported only
>>> once
>>> ../../wvgwin.c:1601: error: for each function it appears in.)
>>> ../../wvgwin.c:1604: error: structure has no member named `item'
>>> ../../wvgwin.c:1606: error: structure has no member named `item'
>>> ../../wvgwin.c: In function `HB_FUN_WVG_TREEVIEW_SHOWEXPANDED':
>>> ../../wvgwin.c:1636: warning: passing arg 4 of `SendMessageA' makes
>>> integer from pointer without a cast
>>>
>>
>> --
>> View this message in context: http://www.nabble.com/2008-12-04-23%3A56-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20849382p20970967.html
>> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
>
From lorenzo.fiorini at gmail.com  Fri Dec 12 09:21:04 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Dec 12 09:21:10 2008
Subject: [Harbour] Mail list problem
In-Reply-To: <20081212104853.GA6692@34-mo7-2.acn.waw.pl>
References: <20081212104853.GA6692@34-mo7-2.acn.waw.pl>
Message-ID: <9257026e0812120621y5ec6054cg518a3273d1c10540@mail.gmail.com>

On Fri, Dec 12, 2008 at 11:48 AM, Przemyslaw Czerpak <druzus@acn.waw.pl> wrote:

I hope the email problem will be fixed quickly. You're the key man here :)

> 3. Lorenzo, two days ago I rebuild Harbour and xhgtk on Windows
> ...
>   BTW I was not able to find glade binaries for Windows with
>   linux/xhgtk compatible directories and .h header file names
>   so I simply disabled glade support in xhgtk to recompile it.
>   Which glade version do you use in Windows?

I use http://gladewin32.sourceforge.net.

The problem is more on OSX; MacPorts has a libglade port but it
doesn't build ATM.
So like you I've removed glade and I got a working installation that
creates the same examples under Ubuntu, XP and OSX ( even the trayicon
example works as expected ).
Since libglade is already marked as "obsolete", I think I can start
without it and wait for gtk builder in gtk 2.16 / glade 3.6.

best regards,
Lorenzo
From bedipritpal at hotmail.com  Fri Dec 12 10:57:15 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Dec 12 10:57:19 2008
Subject: [Harbour] gtwvt 1.1 vs 1.0
In-Reply-To: <9257026e0812110905j25ba9214h3ed279de3ef9ba13@mail.gmail.com>
References: <9257026e0812110905j25ba9214h3ed279de3ef9ba13@mail.gmail.com>
Message-ID: <20978308.post@talk.nabble.com>


Lorenzo

Me too is wondering what did change this behavior.

I will try to resolve it by this weekend.

Regards
Pritpal Bedi


Lorenzo Fiorini-2 wrote:
> 
> I'm trying to understand how to "fix" gtwvt in 1.1 but the problem
> seems "of design".
> What I mean is that gtwvt 1.1 seems to use always the row, col and
> then find the best font size.
> In this way "hard" to define a given font of a given size and for example
> seems impossible to use the font "Terminal".
> 
> If you try the test below using 1.0.1 and 1.1.0dev with values like:
> 
> 15, 48, 140, "Courier New" or
> 8, 48, 140, "Terminal"
> 
> you'll see the difference.
> 
> Any comment?
> 
> best regards,
> Lorenzo
> 
> #include "common.ch"
> #include "hbgtinfo.ch"
> 
> procedure main( cFontSize, cRows, cCols, cFontName )
> 
>    local nRows, nCols
> 
>    default cFontSize to "15"
>    default cRows to "48"
>    default cCols to "140"
>    default cFontName to "Terminal"
> 
>    clear screen
>    HB_GTInfo(HB_GTI_FONTNAME, alltrim(cFontName))
>    HB_GTInfo(HB_GTI_FONTSIZE, val(cFontSize))
>    if !setmode( val(cRows), val(cCols) )
>       setmode( 255, 255 )
>    endif
>    clear screen
> 
>    nRows := maxrow()
>    nCols := maxcol()
> 
>    alert( "maxrow()="+alltrim(str(nRows))+;
>           ";maxcol()="+alltrim(str(maxcol(nCols)))+;
>           ";font size="+alltrim(str(HB_GTInfo(HB_GTI_FONTSIZE)))+;
>           ";Am I in centre?" )
> 
> return
> 

-- 
View this message in context: http://www.nabble.com/gtwvt-1.1-vs-1.0-tp20961135p20978308.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Fri Dec 12 12:06:38 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Fri Dec 12 12:04:22 2008
Subject: [Harbour] 2008-12-12 18:06 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081212170638.GA32008@34-mo7-2.acn.waw.pl>

2008-12-12 18:06 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbapicls.h
  * harbour/source/vm/codebloc.c
  * harbour/source/vm/proc.c
  * harbour/source/vm/classes.c
    + added support for messages in PROCFILE()
    * modified PROCFILE() and HB_METHODNAME() output - PROCFILE()
      should be fully Clipper compatible and HB_METHODNAME() works
      in a little bit different way for evaluated codeblocks created
      in methods or associated with method and returns (b)<class>:<msg>
      instead of (b)<method> so the output is more similar to xHarbour.

  * harbour/contrib/gtwvg/gtwvg.h
    ! disabled NONAMELESSUNION - wvgwin.c uses TVINSERTSTRUCT item
      member without union name what breaks MINGW compilation
    * added hardcoded TVIS_EXPANDPARTIAL when it does not exist
      in header files - MINGW 3.4 does not have it.

best regards
Przemek
From lorenzo.fiorini at gmail.com  Fri Dec 12 12:17:35 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Fri Dec 12 12:17:39 2008
Subject: [Harbour] gtwvt 1.1 vs 1.0
In-Reply-To: <20978308.post@talk.nabble.com>
References: <9257026e0812110905j25ba9214h3ed279de3ef9ba13@mail.gmail.com>
	<20978308.post@talk.nabble.com>
Message-ID: <9257026e0812120917i47a8bfdua7b920fc7c1fed62@mail.gmail.com>

On Fri, Dec 12, 2008 at 4:57 PM, Pritpal Bedi <bedipritpal@hotmail.com> wrote:

> Me too is wondering what did change this behavior.
>
> I will try to resolve it by this weekend.

Many thanks, I've tried many changes but I don't want to break other
features ( like gtwvg ).

IMHO the 1.0 way of working is more "clean".
The "key" parameter has to be the font size since I may need a lot of
rows and columns in a small window or less characters with a bigger
window and since not all the font size can be used with a given font
the only way is to left to the user to set the font size, name, rows
and cols within a set of working combinations.

With terminal font you can get smaller sizes while Lucida Console is
more readable than Courier at the same size so these 3 fonts should be
usable again.

best regards,
Lorenzo
From info at fsgiudice.com  Fri Dec 12 14:05:28 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Fri Dec 12 14:05:35 2008
Subject: [Harbour] error in gtwvg
Message-ID: <4942B5F8.4050207@fsgiudice.com>

Hi Pritpal,

please check current SVN. There are some errors in gtwvg and lib fails 
to build.

Best Regards

Francesco

.\wvgwnd.prg(451) Warning W0001  Ambiguous reference 'ASIZE'

.\wvgwnd.prg(452) Warning W0001  Ambiguous reference 'ASIZE'

.\wvgwnd.prg(559) Warning W0001  Ambiguous reference 'COLFFONT'

.\wvgcrt.prg(558) Warning W0001  Ambiguous reference 'SC_SHOWMINIMIZED'

.\wvgcrt.prg(561) Warning W0001  Ambiguous reference 'SC_SHOWMAXIMIZED'

.\wvgcrt.prg(564) Warning W0001  Ambiguous reference 'SC_SHOWNORMAL'

.\wvgcrt.prg(568) Warning W0001  Ambiguous reference 'LSUCCESS'

From bedipritpal at hotmail.com  Fri Dec 12 14:08:35 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Dec 12 14:08:38 2008
Subject: [Harbour] 2008-12-12 10:06 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20981679.post@talk.nabble.com>


2008-12-12 10:06 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/makefile
  * harbour/contrib/gtwvg/common.mak
    + wvgsysw.prg

  + harbour/contrib/gtwvg/wvgsysw.prg
    + Started WvtSysWindow(), WvgFontDialog() classes compatible with
Xbase++.

  * harbour/contrib/gtwvg/wvgcrt.prg
  * harbour/contrib/gtwvg/wvgdlg.prg
  * harbour/contrib/gtwvg/wvgwnd.prg
    ! Implemented more methods and properties upto Xbase++ documentation.

  * harbour/contrib/gtwvg/wvgwin.c
    ! More functions and cleanup of existing ones.

  * harbour/contrib/gtwvg/wvgparts.ch
    + Added More constants.  

  * harbour/contrib/gtwvg/tests/demoxbp.prg
    ! Added more feature implemenattion.

    ;THANKS: Przemek for fixing mingw compilation.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-12-12-10%3A06-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20981679p20981679.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dbtopas at dbtopas.lt  Fri Dec 12 14:11:38 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Fri Dec 12 14:11:39 2008
Subject: [Harbour] PCode hacking of last night
Message-ID: <4942B76A.6040509@dbtopas.lt>

Hi,


I've just finished to implement a "test" program for PCode analysis. It 
is capable to test PCode for correct structure (e.g., there is no jumps 
into string content) and also to find assigned but unused local variables.

I've implemented it as independent code. It reads and analyses .hrb 
files, but "assigned but unused" detection can be included into 
compiler. The problem is that on PCode analysis stage local names are 
unknown, so, you'll see "Local 1" instead of "nCount". Offsets are PCode 
offsets from start of the function, I've also included line numbers, but 
I'm not sure it is always correct (not tested).

It was nice to run it on my code and also on Harbour core (not contribs) 
.prg files. Results are below. There are two standard warnings:
1) "CLASS ..." generates "nScope := 1", but if programmer provides scope 
for first defined data, this "nScope := 1" is redundant.
2) "METHOD ... CLASS ..." generates "LOCAL Self := QSELF()". If "Self" 
is unused, this assignment and local variable are redundant. Do not 
forget to count this local when counting locals of methods!

Also forcing garbage collection by "oBigObject := NIL" can force 
warning. The rest warnings was real and I've fixed it in my code.

I'm also happy to find a tiny dead pcode, see __DBGACHOICE.

If someone want to try on your own .prg (compile it to .hrb), you can 
find download on http://www.dbtopas.lt/hrb/pcoder.zip


Best regards,
Mindaugas



achoice.hrb
ACHOICE: Local 4 assigned at offset 9 (line 28) but unused
ACHOICE: Local 6 assigned at offset 15 (line 30) but unused
ACHOICE: Local 9 assigned at offset 27 (line 33) but unused
ACHOICE: Local 10 assigned at offset 33 (line 34) but unused
ACHOICE: Local 11 assigned at offset 39 (line 35) but unused
ACHOICE: Local 13 assigned at offset 51 (line 37) but unused
ACHOICE: Local 15 assigned at offset 57 (line 40) but unused
browse.hrb
BROWSE: Local 3 assigned at offset 33 (line 69) but unused
checkbox.hrb
HBCHECKBOX: Local 1 assigned at offset 33 (line 69) but unused
CHECKBOX_TYPEOUT: Local 1 assigned at offset 7 (line 327) but unused
dbgbrwsr.hrb
HBDBCOLUMN: Local 1 assigned at offset 33 (line 247) but unused
dbgtarr.hrb
HBDBARRAY_DOGET: Local 1 assigned at offset 7 (line 158) but unused
dbgthsh.hrb
HBDBHASH_DOGET: Local 1 assigned at offset 7 (line 163) but unused
dbgtinp.hrb
HBDBINPUT: Local 1 assigned at offset 33 (line 64) but unused
dbgtmenu.hrb
HBDBMENU_NEW: Local 2 assigned at offset 13 (line 113) but unused
dbgtobj.hrb
HBDBOBJECT_SETSKEYPRESSED: Local 3 assigned at offset 31 (line 213) but 
unused
debugger.hrb
HBDEBUGGER_EDITVAR: Local 3 assigned at offset 42 (line 1136) but unused
HBDEBUGGER_EDITVAR: Local 4 assigned at offset 60 (line 1137) but unused
HBDEBUGGER_LISTBOX: Local 9 assigned at offset 15 (line 1617) but unused
HBDEBUGGER_OPENPPO: Local 2 assigned at offset 13 (line 1925) but unused
HBDEBUGGER_OSSHELL: Local 1 assigned at offset 7 (line 1962) but unused
HBDEBUGGER_SHOWHELP: Local 1 assigned at offset 7 (line 2536) but unused
HBDEBUGGER_SHOWVARS: Local 2 assigned at offset 1665 (line 2635) but unused
HBDEBUGGER_VARGETVALUE: Local 1 assigned at offset 7 (line 2832) but unused
HBDEBUGGER_WATCHPOINTSSHOW: Local 2 assigned at offset 671 (line 3100) 
but unused
__DBGACHOICE: Dead PCode at 437
hscdx.hrb
HSX_OPEN: Local 2 assigned at offset 8 (line 174) but unused
listbox.hrb
HBLISTBOX: Local 1 assigned at offset 33 (line 76) but unused
LISTBOX_HITTEST: Local 4 assigned at offset 13 (line 424) but unused
profiler.hrb
HBPROFILEENTITY: Local 1 assigned at offset 33 (line 206) but unused
HBPROFILEENTITY_DESCRIBE: Local 1 assigned at offset 7 (line 242) but unused
HBPROFILEFUNCTION: Local 1 assigned at offset 33 (line 248) but unused
HBPROFILEFUNCTION_DESCRIBE: Local 1 assigned at offset 7 (line 258) but 
unused
HBPROFILEMETHOD: Local 1 assigned at offset 33 (line 264) but unused
HBPROFILEMETHOD_DESCRIBE: Local 1 assigned at offset 7 (line 274) but unused
HBPROFILEOPCODE: Local 1 assigned at offset 33 (line 280) but unused
HBPROFILEOPCODE_DESCRIBE: Local 1 assigned at offset 7 (line 290) but unused
HBPROFILE: Local 1 assigned at offset 33 (line 296) but unused
HBPROFILE_IGNORESYMBOL: Local 1 assigned at offset 7 (line 339) but unused
HBPROFILELOWLEVEL: Local 1 assigned at offset 33 (line 502) but unused
HBPROFILEREPORT: Local 1 assigned at offset 33 (line 548) but unused
HBPROFILEREPORT_HEADER: Local 1 assigned at offset 7 (line 584) but unused
HBPROFILEREPORT_LINE: Local 1 assigned at offset 7 (line 594) but unused
HBPROFILEREPORTTOFILE: Local 1 assigned at offset 33 (line 621) but unused
HBPROFILEREPORTTOARRAY: Local 1 assigned at offset 33 (line 664) but unused
HBPROFILEREPORTTOSTRING: Local 1 assigned at offset 33 (line 696) but unused
HBPROFILEREPORTTOTBROWSE: Local 1 assigned at offset 33 (line 716) but 
unused
pushbtn.hrb
HBPUSHBUTTON: Local 1 assigned at offset 33 (line 69) but unused
PUSHBUTTON_TYPEOUT: Local 1 assigned at offset 7 (line 330) but unused
radiobtn.hrb
HBRADIOBUTTON: Local 1 assigned at offset 33 (line 68) but unused
radiogrp.hrb
HBRADIOGROUP: Local 1 assigned at offset 33 (line 69) but unused
scrollbr.hrb
HBSCROLLBAR: Local 1 assigned at offset 33 (line 68) but unused
tbcolumn.hrb
TBCOLUMN: Local 1 assigned at offset 33 (line 66) but unused
tbrowse.hrb
TBROWSE: Local 1 assigned at offset 33 (line 118) but unused
TBROWSE_READRECORD: Local 4 assigned at offset 397 (line 657) but unused
TBROWSE_READRECORD: Local 4 assigned at offset 414 (line 659) but unused
TBROWSE_READRECORD: Local 4 assigned at offset 505 (line 665) but unused
TBROWSE_READRECORD: Local 5 assigned at offset 347 (line 655) but unused
TBROWSE_READRECORD: Local 5 assigned at offset 490 (line 664) but unused
TBROWSE_DOCONFIGURE: Local 6 assigned at offset 1028 (line 1424) but unused
_MBRWPOS: Local 4 assigned at offset 104 (line 2538) but unused
teditor.hrb
HBEDITOR: Local 1 assigned at offset 33 (line 63) but unused
TEXT2ARRAY: Local 1 assigned at offset 7 (line 1077) but unused
tget.hrb
GET: Local 1 assigned at offset 33 (line 78) but unused
GET_SETCOLORSPEC: Local 4 assigned at offset 77 (line 961) but unused
GET_SETCOLORSPEC: Local 4 assigned at offset 119 (line 961) but unused
GET_SETCOLORSPEC: Local 4 assigned at offset 161 (line 961) but unused
GET_PUTMASK: Local 7 assigned at offset 37 (line 1182) but unused
tgetlist.hrb
HBGETLIST: Local 1 assigned at offset 33 (line 88) but unused
HBGETLIST_GETAPPLYKEY: Local 4 assigned at offset 59 (line 342) but unused
HBGETLIST_GUIAPPLYKEY: Local 9 assigned at offset 41 (line 930) but unused
HBGETLIST_TBAPPLYKEY: Local 5 assigned at offset 554 (line 1269) but unused
HBGETLIST_TBAPPLYKEY: Local 7 assigned at offset 41 (line 1204) but unused
thfuncx.hrb
typefile.hrb
typefilx.hrb
tlabel.hrb
HBLABELFORM_LOADLABEL: Local 1 assigned at offset 7 (line 347) but unused
HBLABELFORM_LOADLABEL: Local 3 assigned at offset 13 (line 348) but unused
HBLABELFORM_LOADLABEL: Local 5 assigned at offset 32 (line 350) but unused
HBLABELFORM_LOADLABEL: Local 6 assigned at offset 38 (line 351) but unused
HBLABELFORM_LOADLABEL: Local 7 assigned at offset 44 (line 352) but unused
HBLABELFORM_LOADLABEL: Local 9 assigned at offset 57 (line 354) but unused
HBLABELFORM_LOADLABEL: Local 9 assigned at offset 829 (line 458) but unused
HBLABELFORM_LOADLABEL: Local 10 assigned at offset 65 (line 355) but unused
HBLABELFORM_LOADLABEL: Local 14 assigned at offset 71 (line 360) but unused
tmenuitm.hrb
HBMENUITEM: Local 1 assigned at offset 33 (line 63) but unused
tmenusys.hrb
HBMENUSYS: Local 1 assigned at offset 33 (line 71) but unused
HBMENUSYS_MODAL: Local 10 assigned at offset 2212 (line 365) but unused
HBMENUSYS_MODAL: Local 11 assigned at offset 2282 (line 371) but unused
tobject.hrb
tpersist.hrb
HBPERSISTENT_LOADFROMTEXT: Local 3 assigned at offset 318 (line 98) but 
unused
HBPERSISTENT_LOADFROMTEXT: Local 3 assigned at offset 424 (line 104) but 
unused
HBPERSISTENT_LOADFROMTEXT: Local 4 assigned at offset 346 (line 100) but 
unused
tpopup.hrb
HBPOPUPMENU: Local 1 assigned at offset 33 (line 69) but unused
treport.hrb
HBREPORTFORM_REPORTHEADER: Local 2 assigned at offset 13 (line 459) but 
unused
HBREPORTFORM_EXECUTEREPORT: Local 7 assigned at offset 1011 (line 696) 
but unused
HBREPORTFORM_LOADREPORTFILE: Local 4 assigned at offset 13 (line 878) 
but unused
HBREPORTFORM_LOADREPORTFILE: Local 6 assigned at offset 39 (line 880) 
but unused
HBREPORTFORM_LOADREPORTFILE: Local 7 assigned at offset 52 (line 881) 
but unused
HBREPORTFORM_LOADREPORTFILE: Local 8 assigned at offset 58 (line 882) 
but unused
HBREPORTFORM_LOADREPORTFILE: Local 12 assigned at offset 64 (line 886) 
but unused
HBREPORTFORM_LOADREPORTFILE: Local 19 assigned at offset 80 (line 895) 
but unused
HBREPORTFORM_GETEXPR: Local 2 assigned at offset 13 (line 1146) but unused
HBREPORTFORM_GETEXPR: Local 3 assigned at offset 19 (line 1147) but unused
HBREPORTFORM_GETCOLUMN: Local 2 assigned at offset 13 (line 1278) but unused
HBREPORTFORM_GETCOLUMN: Local 3 assigned at offset 16 (line 1278) but unused
tscalar.hrb
SCALAROBJECT_ISSCALAR: Local 1 assigned at offset 7 (line 75) but unused
SCALAROBJECT_BECOMEERR: Local 1 assigned at offset 7 (line 105) but unused
ARRAY_ASSTRING: Local 1 assigned at offset 7 (line 148) but unused
ARRAY_ISSCALAR: Local 1 assigned at offset 7 (line 204) but unused
BLOCK_ASSTRING: Local 1 assigned at offset 7 (line 252) but unused
HASH_ASSTRING: Local 1 assigned at offset 7 (line 293) but unused
NIL_ASSTRING: Local 1 assigned at offset 7 (line 315) but unused
POINTER_ASSTRING: Local 1 assigned at offset 7 (line 348) but unused
tsymbol.hrb
SYMBOL: Local 1 assigned at offset 33 (line 55) but unused
tthreadx.hrb
SIGNAL: Local 1 assigned at offset 33 (line 70) but unused
THREAD: Local 1 assigned at offset 33 (line 105) but unused
TTHREAD_EXECUTE: Local 1 assigned at offset 7 (line 153) but unused
ttopbar.hrb
HBTOPBARMENU: Local 1 assigned at offset 33 (line 65) but unused
From bedipritpal at hotmail.com  Fri Dec 12 14:23:28 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Dec 12 14:23:31 2008
Subject: [Harbour] gtwvt 1.1 vs 1.0
In-Reply-To: <9257026e0812120917i47a8bfdua7b920fc7c1fed62@mail.gmail.com>
References: <9257026e0812110905j25ba9214h3ed279de3ef9ba13@mail.gmail.com>
	<20978308.post@talk.nabble.com>
	<9257026e0812120917i47a8bfdua7b920fc7c1fed62@mail.gmail.com>
Message-ID: <20981956.post@talk.nabble.com>


Lorenzo and All,


Lorenzo Fiorini-2 wrote:
> 
> Many thanks, I've tried many changes but I don't want to break other
> features ( like gtwvg ).
> 
> IMHO the 1.0 way of working is more "clean".
> The "key" parameter has to be the font size since I may need a lot of
> rows and columns in a small window or less characters with a bigger
> window and since not all the font size can be used with a given font
> the only way is to left to the user to set the font size, name, rows
> and cols within a set of working combinations.
> 
> With terminal font you can get smaller sizes while Lucida Console is
> more readable than Courier at the same size so these 3 fonts should be
> usable again.
> 

I agree that base unit must be FONT. Right now it is ROWS/COLS.

When Peter Rees introduced this GT he thought it appropriate that 
console size must fit the screen size at the most. It must not oversize
screen
dimensions. He was correct because he preceived it as a CONSOL.

Now with the extensive usage this GT has attracted in importance demands
it to be extended to honor Windows protocols.

What I intention is to make it FONT oriented and let the final decision to 
increase/decrease its size be on the program code. If the window dimensions
are
increased by this fact then window be shown at x=0, y=0  corordinated when
initiated 
no matter what its final size is. We can also think to implement scrollbars
to honor the 
rows/cols etc.

I need group decision before proceeding to implement it.

NOTE: It may break some existing code if that is implemented under
uncontrolled 
coordinates checkings


Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/gtwvt-1.1-vs-1.0-tp20961135p20981956.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Fri Dec 12 15:04:51 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Dec 12 15:05:01 2008
Subject: [Harbour] 2008-12-12 12:10 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <20982747.post@talk.nabble.com>


2008-12-12 12:10 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/wvtwin.ch
    + Added more constants.
  * harbour/contrib/gtwvg/wvgcrt.prg
  * harbour/contrib/gtwvg/wvgdlg.prg
  * harbour/contrib/gtwvg/wvgwnd.prg
  * harbour/contrib/gtwvg/wvgsysw.prg
    ! Fixed some variable usages. Sorry for reckless uplod a couple of hours
before.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-12-12-12%3A10-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20982747p20982747.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Fri Dec 12 15:18:19 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Fri Dec 12 15:18:24 2008
Subject: [Harbour] error in gtwvg
In-Reply-To: <4942B5F8.4050207@fsgiudice.com>
References: <4942B5F8.4050207@fsgiudice.com>
Message-ID: <20982973.post@talk.nabble.com>


Fixed. Sorry for carelessness.


Francesco Saverio Giudice wrote:
> 
> .\wvgwnd.prg(451) Warning W0001  Ambiguous reference 'ASIZE'
> 
> .\wvgwnd.prg(452) Warning W0001  Ambiguous reference 'ASIZE'
> 
> .\wvgwnd.prg(559) Warning W0001  Ambiguous reference 'COLFFONT'
> 
> .\wvgcrt.prg(558) Warning W0001  Ambiguous reference 'SC_SHOWMINIMIZED'
> 
> .\wvgcrt.prg(561) Warning W0001  Ambiguous reference 'SC_SHOWMAXIMIZED'
> 
> .\wvgcrt.prg(564) Warning W0001  Ambiguous reference 'SC_SHOWNORMAL'
> 
> .\wvgcrt.prg(568) Warning W0001  Ambiguous reference 'LSUCCESS'
> 

-- 
View this message in context: http://www.nabble.com/error-in-gtwvg-tp20982843p20982973.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From mbelgrano at deltain.it  Fri Dec 12 15:50:49 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Dec 12 15:50:53 2008
Subject: [Harbour] gtwvt 1.1 vs 1.0
In-Reply-To: <20981956.post@talk.nabble.com>
References: <9257026e0812110905j25ba9214h3ed279de3ef9ba13@mail.gmail.com>
	<20978308.post@talk.nabble.com>
	<9257026e0812120917i47a8bfdua7b920fc7c1fed62@mail.gmail.com>
	<20981956.post@talk.nabble.com>
Message-ID: <609353e70812121250q6a1b26d8s3e855a0aca63e2dc@mail.gmail.com>

My choice is break with harbour 1.0 compatibility (but not break  with
clip52 compatibility)  for having a better approachWith scroll bar also
windows mobile will be  possible!

2008/12/12 Pritpal Bedi <bedipritpal@hotmail.com>

>
> Lorenzo and All,
>
>
> Lorenzo Fiorini-2 wrote:
> >
> > Many thanks, I've tried many changes but I don't want to break other
> > features ( like gtwvg ).
> >
> > IMHO the 1.0 way of working is more "clean".
> > The "key" parameter has to be the font size since I may need a lot of
> > rows and columns in a small window or less characters with a bigger
> > window and since not all the font size can be used with a given font
> > the only way is to left to the user to set the font size, name, rows
> > and cols within a set of working combinations.
> >
> > With terminal font you can get smaller sizes while Lucida Console is
> > more readable than Courier at the same size so these 3 fonts should be
> > usable again.
> >
>
> I agree that base unit must be FONT. Right now it is ROWS/COLS.
>
> When Peter Rees introduced this GT he thought it appropriate that
> console size must fit the screen size at the most. It must not oversize
> screen
> dimensions. He was correct because he preceived it as a CONSOL.
>
> Now with the extensive usage this GT has attracted in importance demands
> it to be extended to honor Windows protocols.
>
> What I intention is to make it FONT oriented and let the final decision to
> increase/decrease its size be on the program code. If the window dimensions
> are
> increased by this fact then window be shown at x=0, y=0  corordinated when
> initiated
> no matter what its final size is. We can also think to implement scrollbars
> to honor the
> rows/cols etc.
>
> I need group decision before proceeding to implement it.
>
> NOTE: It may break some existing code if that is implemented under
> uncontrolled
> coordinates checkings
>
>
> Regards
> Pritpal Bedi
>
>
> --
> View this message in context:
> http://www.nabble.com/gtwvt-1.1-vs-1.0-tp20961135p20981956.html
> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>



-- 
Massimo Belgrano

Albo Nazionale Informatici Professionisti 2620
Socio 2843 Associazione Informatici prof.

Analisi e sviluppo software per Lan e Web
Consulenza informatica - Formazione
Delta Informatica S.r.l.  http://www.deltain.it
Via Torelli,31 - 28100 Novara - Tel: 0321/30281
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081212/06285aa0/attachment.html
From jarabal at gmail.com  Fri Dec 12 21:01:41 2008
From: jarabal at gmail.com (Xavi)
Date: Fri Dec 12 21:02:02 2008
Subject: [Harbour] OT: And why not PostgresSQL?
In-Reply-To: <4937B06E.9090108@marchuet.net>
References: <4937B06E.9090108@marchuet.net>
Message-ID: <49431785.2080702@gmail.com>

Sorry Miguel,

Can you explain how it corrupts PostgresSQL?
If not, could you or Jose Luis correct the comments or allow more comments.

http://www.capelblog.com/?p=47
Miguel Angel Marchuet escribi?:
> Reza por que PostgresSql no se te corrompa, la ultima vez que lo vi perdieron todos los datos. Asi que si lo usas te aconsejo que tengas buenas copias de seguridad externas a Posgress.
> 
> Saludos
> 
> Miguel

Best regards,
Xavi
From lorenzo.fiorini at gmail.com  Sat Dec 13 02:29:17 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Sat Dec 13 02:29:21 2008
Subject: [Harbour] gtwvt 1.1 vs 1.0
In-Reply-To: <20981956.post@talk.nabble.com>
References: <9257026e0812110905j25ba9214h3ed279de3ef9ba13@mail.gmail.com>
	<20978308.post@talk.nabble.com>
	<9257026e0812120917i47a8bfdua7b920fc7c1fed62@mail.gmail.com>
	<20981956.post@talk.nabble.com>
Message-ID: <9257026e0812122329q51bcb1cahdb7bbdb4d9a7079b@mail.gmail.com>

On Fri, Dec 12, 2008 at 8:23 PM, Pritpal Bedi <bedipritpal@hotmail.com> wrote:

> Now with the extensive usage this GT has attracted in importance demands
> it to be extended to honor Windows protocols.
> ...
> I need group decision before proceeding to implement it.

IMHO GT has first of all to be 100% compatible with C5x and then
compatible with other GTs and AFAIK 1.0 behaviour was correct.

I understand that here there are many Win user and less Linux or OSX
ones but as long as Harbour aim to be multi-platform every change in
the core need to be multi-platform and multi-gt.

We have many GTs:
1 - console I/O like GTNUL, GTGUI, GTCGI, GTSTD
2 - full screen like GTWVT, GTWIN, GTXWC, GTTRM, GTSLN, GTCRS
3 - graphical like GTWVT and GTXWC

So before extending or changing one of them we need to think what this
means for the GTs of the same level.

best regards,
Lorenzo
From zen25000 at zen.co.uk  Sat Dec 13 12:27:57 2008
From: zen25000 at zen.co.uk (Barry Jackson)
Date: Sat Dec 13 12:28:00 2008
Subject: [Harbour] Error in gtkliststore.c line 222
Message-ID: <20992413.post@talk.nabble.com>


I finally managed to build libxhgtk but I had to remove ");" from the end of
line 222 in gtkliststore.c .
I assume this is an error/typo. I am not a C programmer but it looked wrong
to me!
-- 
View this message in context: http://www.nabble.com/Error-in-gtkliststore.c-line-222-tp20992413p20992413.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From rodrmigu at gmail.com  Sat Dec 13 14:16:31 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Sat Dec 13 14:16:36 2008
Subject: [Harbour] OT: And why not PostgresSQL?
In-Reply-To: <49431785.2080702@gmail.com>
References: <4937B06E.9090108@marchuet.net> <49431785.2080702@gmail.com>
Message-ID: <80b05d460812131116y24ac9632v7de43a2acf39fee1@mail.gmail.com>

HI,

I never heard that before, and I work for more than 5 years with
Postgres and 12 years with oracle. I had corrupted data caused by
server crash and bad memory and/or hardware and that's pretty normal
when you have bad hardwares. For both you must have a good backup
strategies like weekly cold backups and daily hot backups enabling the
archive log mode and keep them in a safe place for future recoveries.

Regards,
Rodrigo Moreno

On Sat, Dec 13, 2008 at 12:01 AM, Xavi <jarabal@gmail.com> wrote:
> Sorry Miguel,
>
> Can you explain how it corrupts PostgresSQL?
> If not, could you or Jose Luis correct the comments or allow more comments.
>
> http://www.capelblog.com/?p=47
> Miguel Angel Marchuet escribi?:
>>
>> Reza por que PostgresSql no se te corrompa, la ultima vez que lo vi
>> perdieron todos los datos. Asi que si lo usas te aconsejo que tengas buenas
>> copias de seguridad externas a Posgress.
>>
>> Saludos
>>
>> Miguel
>
> Best regards,
> Xavi
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From jarabal at gmail.com  Sun Dec 14 08:50:28 2008
From: jarabal at gmail.com (Xavi)
Date: Sun Dec 14 08:50:52 2008
Subject: [Harbour] OT: And why not PostgresSQL?
In-Reply-To: <80b05d460812131116y24ac9632v7de43a2acf39fee1@mail.gmail.com>
References: <4937B06E.9090108@marchuet.net> <49431785.2080702@gmail.com>
	<80b05d460812131116y24ac9632v7de43a2acf39fee1@mail.gmail.com>
Message-ID: <49450F24.3080106@gmail.com>

Thanks Rodrigo,

Yes, as any DBMSs for not speaking about the DBFs but in this page suggests that "PostgresSQL" is prone to corruption with what 
is better to install another data system.

Bearing in mind that we speak, despite the typographical error, about "PostgreSQL" and that the commentary is carried out by a 
collaborator, developer of [x]Harbour the ridicule that is done is enormous.
Sincerely Miguel Angel Marchuet and Jos? Luis Capell, I feel ashamed to read this and say that development in [x]Harbour.
In my opinion it would be best to remove the page and "Pray" to be eliminated from the cache of search engines as soon as possible.

Best regards,
Xavi

-------------------------------------------------------------------------------------------------------------------------
Gracias Rodrigo,

Si, como cualquier DBMSs por no hablar de los DBFs pero en esta p?gina se da a entender que "PostgresSql" es propenso a 
corromperse con lo que es mejor instalar otro sistema de datos.

Teniendo en cuenta que hablamos, pese al error tipogr?fico, de "PostgreSQL" y que el comentar?o lo realiza un colaborador, 
desarrollador de [x]Harbour el rid?culo que se hace es may?sculo.
Sinceramente Miguel Angel Marchuet y Jos? Luis Capell, siento verg?enza de leer esto y decir que desarrollo en [x]Harbour.
En mi opini?n lo mejor ser?a eliminar la p?gina y "Rezar" para que sea eliminada del cache de buscadores lo antes posible.

Un saludo
Xavi

Rodrigo Miguel escribi?:
> HI,
> 
> I never heard that before, and I work for more than 5 years with
> Postgres and 12 years with oracle. I had corrupted data caused by
> server crash and bad memory and/or hardware and that's pretty normal
> when you have bad hardwares. For both you must have a good backup
> strategies like weekly cold backups and daily hot backups enabling the
> archive log mode and keep them in a safe place for future recoveries.
> 
> Regards,
> Rodrigo Moreno
> 
> On Sat, Dec 13, 2008 at 12:01 AM, Xavi <jarabal@gmail.com> wrote:
>> Sorry Miguel,
>>
>> Can you explain how it corrupts PostgresSQL?
>> If not, could you or Jose Luis correct the comments or allow more comments.
>>
>> http://www.capelblog.com/?p=47
>> Miguel Angel Marchuet escribi?:
>>> Reza por que PostgresSql no se te corrompa, la ultima vez que lo vi
>>> perdieron todos los datos. Asi que si lo usas te aconsejo que tengas buenas
>>> copias de seguridad externas a Posgress.
>>>
>>> Saludos
>>>
>>> Miguel
>> Best regards,
>> Xavi
>> _______________________________________________
>> Harbour mailing list
>> Harbour@harbour-project.org
>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

From teo at windtelsoft.com  Sun Dec 14 11:57:42 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Sun Dec 14 13:06:39 2008
Subject: [Harbour] OT: __GETMESSAGE
In-Reply-To: <10C28C4554DFE54EB20321B9CB8931C2283340@servidor01.AGSoft.local>
References: <10C28C4554DFE54EB20321B9CB8931C2283340@servidor01.AGSoft.local>
Message-ID: <200812141057.42296.teo@windtelsoft.com>

On Friday 12 December 2008 02:25:26 Jose Luis Capel wrote:
> Hi all,
>
> Sorry for the off-topic and sorry for my low C level...

Hello Jose,

I think that this is fully on-topic :)

>
> I saw that __GETMESSAGE in classes.c is defined as:
>
> HB_FUNC( __GETMESSAGE )
> {
>    hb_retc(
> hb_stackItem(hb_stackBaseItem()->item.asSymbol.stackstate->lBaseItem
> )->item.asSymbol.value->szName  ); }
>
> Then, in my proyect I want to integrate that piece of code.  I do this:
>
> #pragma BEGINDUMP

Somehow this is the reason (I don't know yet exactly the details, but the 
problem is in the includes ("#include 'hbvmpub.h'") on the final C code 
obtained from the prg).

So, for the moment, please use a separate C file to contain the HB_FUNC():

/---------------- start C code --------------------/
#include "hbvmopt.h"
#include "hbstack.h"

HB_FUNC( __GETMESSAGE2 )
{
  
hb_retc(hb_stackItem(hb_stackBaseItem()->item.asSymbol.stackstate->lBaseItem )->item.asSymbol.value->szName);
}
/---------------- end C code --------------------/


this will compile fine .

>
> #include "hbapi.h"
> #include "hbstack.h"
>
> HB_FUNC ( __MYFUNCTION )
> {
>  char * cMessage = (hb_stackItem(
> hb_stackBaseItem()->item.asSymbol.stackstate->lBaseItem
> )->item.asSymbol.value->szName) ;
>
> /* My code will go below */
>
> }
>
> #pragma ENDDUMP
>
>
>
> But when compiling this little example I have these messages error:
>
> tdatabase.c
> tdatabase.prg(220) : error C2223: left of '->item' must point to
> struct/union tdatabase.prg(220) : error C2198: 'hb_stackItem' : too few
> actual parameters tdatabase.prg(220) : error C2223: left of '->item' must
> point to struct/union
>
> And this is my problem:  I cannot understand these errors and also I cannot
> understand why in classes.c compile OK whilst in my project throws these
> errors.

Check the C program obtained from the compiled prg code and check what does 
the include files in it to see the problem.


best regards,

Teo.
From m.renzi at maticasrl.it  Mon Dec 15 07:04:38 2008
From: m.renzi at maticasrl.it (Massimo Renzi (Matica Srl))
Date: Mon Dec 15 07:04:52 2008
Subject: [Harbour] test please dont read
In-Reply-To: <531d7a750812111206q4c63ef5lac1401af490eb30@mail.gmail.com>
References: <531d7a750812111206q4c63ef5lac1401af490eb30@mail.gmail.com>
Message-ID: <494647D6.4030800@maticasrl.it>

test dont read
From druzus at acn.waw.pl  Mon Dec 15 09:07:02 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Dec 15 09:04:39 2008
Subject: [Harbour] Re: PCode hacking of last night 
Message-ID: <20081215140702.GA6790@34-mo7-2.acn.waw.pl>

Hi Mindaugas,

Sorry for late response but I still haven't received any messages
from Harbour-devel list so I'm coping them from Harbour mail list
archive.
Phil - I really need your help.

> I've just finished to implement a "test" program for PCode analysis. It 
> is capable to test PCode for correct structure (e.g., there is no jumps 
> into string content) and also to find assigned but unused local variables.
> I've implemented it as independent code. It reads and analyses .hrb 
> files, but "assigned but unused" detection can be included into 
> compiler. The problem is that on PCode analysis stage local names are 
> unknown, so, you'll see "Local 1" instead of "nCount". Offsets are PCode 
> offsets from start of the function, I've also included line numbers, but 
> I'm not sure it is always correct (not tested).

It looks very nice. Can youy add it to compiler?
In such case we can make two things:
1. we can extract local file name (hb_compLocalVariableName())
2. we can activate this analyse phase before HB_P_NOOP optimization
   and strip unnecessary code by filing it with NOOP pcodes.
   If we can eliminate all local variables then we can also eliminate
   local variable frame.

> It was nice to run it on my code and also on Harbour core (not contribs) 
> .prg files. Results are below. There are two standard warnings:
> 1) "CLASS ..." generates "nScope := 1", but if programmer provides scope 
> for first defined data, this "nScope := 1" is redundant.

Yes it is but it's hard to detect it and create workaround using PP only.

> 2) "METHOD ... CLASS ..." generates "LOCAL Self := QSELF()". If "Self" 
> is unused, this assignment and local variable are redundant. Do not 
> forget to count this local when counting locals of methods!

It's yet another problem. Here we even have additional place for
optimization. We can eliminate local variable self and use HB_P_PUSHSELF
what should be a little bit faster and will need less PCODE bytes.
The only one problem is detecting that Self local variable is not used
inside codeblocks and detached. Because now compiler generate code
"on line" then we cannot easy implement it in compiler. But it should
possible to add such optimization to your code. It will be enough to
check if variable is not used by reference, inside codeblocks or
assigned (POP). If it's used only as readonly and assigned by popping
HB_P_PUSHSELF then we can replace all HB_P_PUSHLOCAL[NEAR] <n> wit
HB_P_PUSHSELF and reduce number of local variables. If we reduce all then
we can eliminate HB_P_[LARGE][V]FRAME.

> Also forcing garbage collection by "oBigObject := NIL" can force 
> warning. The rest warnings was real and I've fixed it in my code.

If possible please commit it.

> I'm also happy to find a tiny dead pcode, see __DBGACHOICE.

This is not real deadcode. In dead code eliminator inside compiler
I intentionally do not strip the last HB_P_ENDPROC. See harbour
compiler/hbdead.c[591].
If you remove this if() statement then it will be stripped.
It left the last HB_P_ENDBLOCK/HB_P_ENDPROC for some historical reasons
and code which needed it but probably I've already cleaned all such code.
Your PCODE analyzer detected such dummy HB_P_ENDPROC PCODE at the end of
function body.

> If someone want to try on your own .prg (compile it to .hrb), you can 
> find download on http://www.dbtopas.lt/hrb/pcoder.zip

Very nice job. I would like to ask to integrate it with compiler.
If you will need any help then I'll do what I can.
We can add new -k? switch which will enable such optimization or
make it part of -kJ. The problem can be only with warnings. They
should be optional. Now we can use -w4 but sooner or later we will
need sth to enable/disable different compiler warnings for some
extensions which are not valid for each Clipper code. I'll think
about it.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Dec 15 09:29:15 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Dec 15 09:26:51 2008
Subject: [Harbour] Re: hblognet, inet and threads
Message-ID: <20081215142915.GB6790@34-mo7-2.acn.waw.pl>

Hi Mindaugas,

> > Fine but I suggest to create separate function to extract number of
> > seconds from some starting day, f.e.:
> >    HB_FUNC( HB_MILLISEC )
> >    {
> >       hb_retnin( hb_dateMilliSeconds() );
> >    }
> and use it instead of seconds().
> I've looked to the source and can commit new implementation. 
> hb_dateMilliSeconds() is OK, but it returns different results for 
> different platforms. It's "julian milliseconds" on Windows and 
> milliseconds from 1970-01-01 on Unixes.

It's not only one difference. In *nixes it's UTC time when in Windows
is local time.

The idea of hb_dateMilliSeconds() was creating function which can
return some time value measured from some some starting point which
is OS/application dependent. On some platforms it can be 1970-01-01 on
some others Julian milliseconds and on some others number of milliseconds
from application startup. On some platforms HB_LONG can be even 32bit
integer and in such case the starting point should be as close as possible
to reduce number of counter resetting (I do not think it's worth to invest
more time in other solution for such platforms).
In summary this function was designed only to calculate time difference
between two calls in single program instance on given machine.

> I think it would be good to give the same meaning for both platforms. 
> Julian milliseconds is 48bit integer now. It is not far from double 
> precision (52bit) and hb_dataMilliSeconds()*16 conversion to from double 
> can show float point side effects. So, milliseconds from 1970-01-01 are 
>   better in this case, but it is a little platform oriented and will 
> return negative values for birthdays of us or our fathers.
> What choice do you prefer?

We have hb_dateTimeStamp() which cab be used if you want some datetime
value calculated from comparable starting point.
But if it's not enough then we can add new function which should return
UTC time instead of local one so the result will be comparable also
between programs working in different time zones so can be used in INET
communication. Using double seems to be reasonable as holder for Julian
milliseconds. In such case we can return Julian date as integer part and
time as fractional part what will allow to keep it with a little bit
better precision if platforms allows it.

best regards,
Przemek
From dbtopas at dbtopas.lt  Mon Dec 15 11:11:18 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Dec 15 11:11:17 2008
Subject: [Harbour] mod_harbour vs apache.prg
Message-ID: <494681A6.3090609@dbtopas.lt>

Hi,


I've tried to use gtcgi some time ago. For testing only, not for real 
applications. "HelloWorld" .cgi works ok, a large 300 .prg lines cgi 
script also work ok, but I do not like the idea of writing a large web 
database application.
Every time you click mouse on the client, server should load Harbour's 
executable, this executable "links" global symbol table and do a lot lot 
lot more initialization jobs. Then .prg script opens the database 
tables, positions the record to required position and prints:

IF DBSEEK(FIELD->USERNAME, .F.) .AND. ;
    FIELD->PASSWORD == _POST["password"]
   QOUT(FIELD->NAME + " logged in successfully.")
ELSE;  QOUT("You've failed.")
ENDIF

I know computers are fast, but I still do not want to make them do all 
this huge job, when only 5 lines are required. A solution could be 
apache module for Harbour. It can not only execute .prg or .hrb code, 
but also "cache" open workareas, to avoid reopening of .dbf files on 
each request, just like php caches mysql connections (persistent 
connections). But apache module and all these extensions are not planed 
in 1.1 and perhaps not in 1.2.

Let's try to solve problem the opposite way, not port Harbour to apache, 
but port apache to Harbour. Writing http server in Harbour is not a big 
problem. Yes, I know people are working on it for years, but 
"HelloWorld" http server I've wrote in 2 hours (73 lines of .prg code), 
and "real" server in 2 days (490 lines of .prg code).

I have not implemented any Model-View-Control pattern yet, so, I do not 
have Ruby on Rails, but I can implement sessions, post method support in 
a few hours and I'll have something similar to plain php.

Anyone interested can download http://www.dbtopas.lt/hrb/uhttpd.zip
   socket.c - alternative lightweight socket library, I do not like
              hbinet.c a lot. If you want to compile it for Linux,
              you'll need to adjust includes, but code should be
              portable;
   uhttpd1.prg - HelloWorld http server ("u" stands for micro);
   uhttpd2.prg - fully functional http server, enjoy apache compatible
                 server access log :)


Best regards,
Mindaugas


P.S. actually, I was trying to make myself familiar with threads and 
started from tests/mt/mttest07.prg and jobs queue, but the only thread I 
could imagine was http server thread.
BTW, I wanted to make worker threads count dynamic, i.e., create more 
threads if job queue becomes long. How can I find notification queue 
length of Harbour's mutex?
From bedipritpal at hotmail.com  Mon Dec 15 11:22:48 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Dec 15 11:22:52 2008
Subject: [Harbour] 2008-12-15 08:07 UTC-0800 Pritpal Bedi
	(pritpal@vouchcac.com)
Message-ID: <21016853.post@talk.nabble.com>


2008-12-15 08:07 UTC-0800 Pritpal Bedi (pritpal@vouchcac.com)
  * harbour/contrib/gtwvg/wvtwin.ch
    + Added more constants.

  * harbour/contrib/gtwvg/wvgwin.c
    + Added functions to manipulate ChooseFont() WINAPI.

  * harbour/contrib/gtwvg/wvgsysw.prg
    + Implemented WvgFontDialog(), WvgFon() Xbase++ compatible classes.

  * harbour/contrib/gtwvg/tests/demoxbp.prg
    + Incorporated WvgFontDialog() and WvgFont() functionality.

    ;IMPORTANT: XBase++ documentation describes that WvgFontDialog() 
                cannot be opened in modeless state under Windows. 
                Additionally it also states that its event blocks cannot
                be implemented in Windows. It is possible only in OS/2.

                But Harbour implementation of WvgFontDialog() has
                provided this important functionality in Windows also.
                You can :display the font dialog in modeless state as
                well as :activate* codeblocks also get fired.
Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/2008-12-15-08%3A07-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp21016853p21016853.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Mon Dec 15 11:41:23 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Dec 15 11:38:59 2008
Subject: [Harbour] Re: hblognet, inet and threads
Message-ID: <20081215164123.GA17734@34-mo7-2.acn.waw.pl>

Hi Mindaugas,

> So,I assume our current code is:
[...]
> and I still have two questions...
> 1) s_lStop access is synchronized using s_mutex. Is hb_backgroundExit() 
> code OK? Don't we need to change to:
> function hb_backgroundExit()
>     if s_thread != NIL
>        hb_mutexLock( s_mutex )
>        s_lStop := .t.
>        hb_mutexNotify( s_mutex )
>        hb_mutexUnLock( s_mutex )
>        hb_threadJoin( s_thread )
>     endif
> return nil
> otherwise s_lStop can be assigned (by hb_backgroundExit) and accessed 
> (by hb_backgroundThread) simultaneous and give unpredictable results.

Yes, access to s_lStop is unprotected but as a side effect of current
implementation it will work because it simple variable which holds result
in memory well aligned which is read/changed by single CPU register call.
so on currently used hardware it will work as we want. Anyhow it's
undocumented side effect of current implementation and probably I should
not show it on public forum.

> And here is a new question (well, 3 new questions...):
> 1a) is it OK to call hb_mutexNotify() if mutex is locked?

Yes it is and hb_mutexNotify() is not blocking function so it will
store notification without blocking calling process.

> 1b) will hb_mutexSubscribe() exit after hb_mutexUnLock() only? (because 
> it tries to lock mutex before exit)

Yes it is. It's important for synchronization.

> 1c) if 1b answer is "yes", then code:
>        hb_mutexLock( s_mutex )
>        s_lStop := .t.
>        hb_mutexNotify( s_mutex )
>        hb_threadJoin( s_thread )
>        hb_mutexUnLock( s_mutex )
> will create deadlock. hb_threadJoin() will wait for child forever, but 
> child does not return from hb_mutexSubscribe() because trying to lock 
> mutex. Am I right?

Exactly.

> The second question is:
> 2) I assume hb_backgroundAdd() could be called from any thread, and 
> hb_backgroundExit() is called from the main thread on application exit.
> It is possible that s_thread != NIL will be false for the main thread, 
> but another thread is executing hb_backgroundAdd()/hb_backgroundInit() 
> that time. Let's say some code like:
>     s_mutex := hb_mutexCreate()
> In this case the new thread will be started, but main thread will forget 
> to join it.

Yes it is. And in such case s_thread should be protected by mutex
because it can be complex variable.
I simply assumed that hb_backgroundExit() will be called when main
thread joined all other threads so there is no thread which can call
hb_backgroundAdd()/hb_backgroundInit() simultaneously. If the above
condition is not true then we have to change the code. We can simply
remove s_lStop changing the stop condition and protect all access to
s_thread by mutex:

static s_mutex  := hb_mutexCreate()
static s_thread := NIL

static function hb_backgroundThread(  )
   local n, nTime, nMin, pThID
   pThID := hb_threadSelf()
   hb_mutexLock( s_mutex )
   while s_thread == pThID
      nTime := hb_MilliSeconds()
      nMin := NIL
      for n := 1 to s_nCounter
         // {nHandle, bAction, nMilliSec, lActive, nNextTime}
         if s_aTasks[ n, 4 ]
            if s_aTasks[ n, 5 ] <= nTime
               eval( s_aTasks[ n, 2 ] )
               s_aTasks[ n, 5 ] += s_aTasks[ n, 3 ]
            endif
            nMin := IIF( nMin == NIL, s_aTasks[ n, 5 ], ;
                         MIN( nMin, s_aTasks[ n, 5 ] ) )
         endif
      next
      hb_mutexSubscribe( s_mutex, IIF( nMin == NIL, NIL, nMin / 1000 ) )
   enddo
   hb_mutexUnlock( s_mutex )
return nil

static function hb_backgroundInit()
   if s_thread == NIL
      s_thread := hb_threadStart( @hb_backgroundThread() )
   endif
return nil

function hb_backgroundExit()
   local pThID
   hb_mutexLock( s_mutex )
   if s_thread != NIL
      pThId := s_thread
      s_thread := NIL
      hb_mutexNotify( s_mutex )
      hb_mutexUnlock( s_mutex )
      // here it's possible that other thread will activate new
      // task manager but we are sure that the current one will
      // be finished because we changed s_thread so we can wait
      // for it in join operation.
      hb_threadJoin( pThID )
   else
      hb_mutexUnlock( s_mutex )
   endif
return nil

function hb_backgroundAdd( bAction, nMilliSec, lActive )
   local nHandler
   if !HB_ISNUMERIC( nMilliSec )
      nMilliSec := 0
   endif
   if ! HB_ISLOGICAL( lActive )
      lActive := .t.
   endif
   hb_mutexLock( s_mutex )
   /* call hb_backgroundInit() after mutex locking */
   hb_backgroundInit()
   aadd( s_aTasks, { nHandler := ++s_nCounter, bAction, nMilliSec, ;
                     lActive, hb_MilliSeconds() + nMilliSec } )
   hb_mutexNotify( s_mutex )
   hb_mutexUnlock( s_mutex )
return nHandler

> 2a) do we need a mutex to protect s_thread access/assign?

If it can be assigned by some thread one other one is accessing
it then yes.

> 2b) can we manage to use the same s_mutex, or we will need s_mutex2?

We can see above. For such simple situation one mutex is enough.

> 2c) where s_mutex2 should be initialized?

The question is where do you want to use it.

> 2d) I see STATIC s_mutex2 := hb_mutexCreate() in one of your last 
> commits. So, perhaps 2c answer is "Use STATIC initialization". Is it 
> possible to avoid static initialization? Or we will need one more 
> s_mutex3 to protect s_mutex2 initialization and this will be 
> never-ending story without STATICs.

The problem is 1-st call. As you can see static initialization greatly
resolve it. Anyhow in some cases it may not be used and in such case
I introduced hb_threadOnce() function which needs one variable used
as control item which should be initialized as NIL and then is internally
changed hb_threadOnce() to indicate current initialization state:
   2008-10-06 02:18 UTC+0200 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
    * added hb_threadOnce( @<onceControl> [, <bAction> ] ) -> <lFirstCall>
      This function allow to execute some code only once. It's usefull in
      MT environment for initialization.
      <onceControl> is variable which holds the execution status and have
      to be initialized to NIL. In most of cases it will be simple static
      variable in user code.
      <bAction> is optional codeblock which is executed only once (on 1-st
      call with given <onceControl>)
I used this function in previous version but now it's not necessary now.
Static initialization reduces RT overhead.

best regards,
Przemek
From info at fsgiudice.com  Mon Dec 15 13:13:43 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Dec 15 13:13:51 2008
Subject: [Harbour] mod_harbour vs apache.prg
In-Reply-To: <494681A6.3090609@dbtopas.lt>
References: <494681A6.3090609@dbtopas.lt>
Message-ID: <49469E57.6030604@fsgiudice.com>

Hi Mindaugas,

Il 15/12/2008 17.11, Mindaugas Kavaliauskas ha scritto:
> 
> Anyone interested can download http://www.dbtopas.lt/hrb/uhttpd.zip

Very interesting (now I gave only a fast look), thank you for sharing it.

>   socket.c - alternative lightweight socket library, I do not like
>              hbinet.c a lot. If you want to compile it for Linux,
>              you'll need to adjust includes, but code should be
>              portable;

Just for curiosity what you don't like in hbinet.c ?

>   uhttpd1.prg - HelloWorld http server ("u" stands for micro);
>   uhttpd2.prg - fully functional http server, enjoy apache compatible
>                 server access log :)
> 

A very interesting addon should be also to use prg / hrb modules to exec 
harbour cgi applications, but (IMHO) it *should* be easy to add.

About hrb a question: there is a way to isolate loaded functions in 
current SVN code ?
I mean that I would like to load an hrb module, then load list of module 
calls and check if there is any function that should be protected and I 
don't want to be executed from loaded hrb (f.e. __zap() or FErase() ) ?

Przemek ?


Best Regards

Francesco

From bedipritpal at hotmail.com  Mon Dec 15 15:22:18 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Dec 15 15:22:21 2008
Subject: [Harbour] mod_harbour vs apache.prg
In-Reply-To: <49469E57.6030604@fsgiudice.com>
References: <494681A6.3090609@dbtopas.lt> <49469E57.6030604@fsgiudice.com>
Message-ID: <21021184.post@talk.nabble.com>


Hi Mindaugus


Francesco Saverio Giudice wrote:
> 
> Hi Mindaugas,
> 
> Il 15/12/2008 17.11, Mindaugas Kavaliauskas ha scritto:
>> 
>> Anyone interested can download http://www.dbtopas.lt/hrb/uhttpd.zip
> 
> Very interesting (now I gave only a fast look), thank you for sharing it.
> 
>>   socket.c - alternative lightweight socket library, I do not like
>>              hbinet.c a lot. If you want to compile it for Linux,
>>              you'll need to adjust includes, but code should be
>>              portable;
> 
> Just for curiosity what you don't like in hbinet.c ?
> 
>>   uhttpd1.prg - HelloWorld http server ("u" stands for micro);
>>   uhttpd2.prg - fully functional http server, enjoy apache compatible
>>                 server access log :)
>> 
> 
> A very interesting addon should be also to use prg / hrb modules to exec 
> harbour cgi applications, but (IMHO) it *should* be easy to add.
> 
> Best Regards
> Francesco
> 

Exactly my feelings too.

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/mod_harbour-vs-apache.prg-tp21018073p21021184.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Mon Dec 15 15:47:13 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Dec 15 15:47:16 2008
Subject: [Harbour] mod_harbour vs apache.prg
In-Reply-To: <494681A6.3090609@dbtopas.lt>
References: <494681A6.3090609@dbtopas.lt>
Message-ID: <21021706.post@talk.nabble.com>


Hi Mindaugus

I receive this error:

? "bind() error", socket_error()

I am compiling uhttpd2.prg + socket.c.
and executing as is on my laptop.

How do I need to execute it?

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/mod_harbour-vs-apache.prg-tp21018073p21021706.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Mon Dec 15 15:57:43 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Dec 15 15:57:45 2008
Subject: [Harbour] mod_harbour vs apache.prg
In-Reply-To: <21021706.post@talk.nabble.com>
References: <494681A6.3090609@dbtopas.lt> <21021706.post@talk.nabble.com>
Message-ID: <21021885.post@talk.nabble.com>


Hi


Pritpal Bedi wrote:
> 
> I receive this error:
> 
> ? "bind() error", socket_error()
> 
> I am compiling uhttpd2.prg + socket.c.
> and executing as is on my laptop.
> 
> How do I need to execute it?
> 

Then I tried like uhttpd //port=81
and http server is up and running. I do not know why port 80 got denied.

Then I issued from IE 
http://127.0.0.1:81/
and got this error ( obivious ) == HTTP 403 Forbidden
and uhttpd_access.log is updated to this effect like :

127.0.0.1 - - [15/Dec/2008:12:51:06 +0000] "GET / HTTP/1.1" 403 48 ""
"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET
CLR 2.0.50727)"
127.0.0.1 - - [15/Dec/2008:12:51:41 +0000] "GET / HTTP/1.1" 403 48 ""
"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET
CLR 2.0.50727)"
127.0.0.1 - - [15/Dec/2008:12:52:20 +0000] "GET / HTTP/1.1" 403 48 ""
"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET
CLR 2.0.50727)"

So I assume that port 80 is reserved for realtime http servers like apache,
or I am missing something.

More investigations are about to follow.

Regards
Pritpal Bedi


-- 
View this message in context: http://www.nabble.com/mod_harbour-vs-apache.prg-tp21018073p21021885.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dbtopas at dbtopas.lt  Mon Dec 15 17:09:24 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Dec 15 17:09:18 2008
Subject: [Harbour] mod_harbour vs apache.prg
In-Reply-To: <49469E57.6030604@fsgiudice.com>
References: <494681A6.3090609@dbtopas.lt> <49469E57.6030604@fsgiudice.com>
Message-ID: <4946D594.6010208@dbtopas.lt>

Hi,


>>   socket.c - alternative lightweight socket library, I do not like
>>              hbinet.c a lot. If you want to compile it for Linux,
> Just for curiosity what you don't like in hbinet.c ?

1) strange, difficult to remember function names, ex., hb_InetPort() 
returns port, but I can't remember local or remote. getpeername() is 
more clear to me. hb_InetTimeout(), hb_InetTimelimit() - I do not know 
that is we difference. hb_InetCount() - number of what? Internet 
providers on my computer? I do not find bind() and listen() functions in 
the list. hb_InetRecvEndBlock() - what kind of animal is it?

Perhaps I'm just used to see original socket function names and original 
function behaviour. I need to start learning sockets from beginning, if 
I want to write an application using hbinet.c. Actually I've tried to 
use hbinet.c instead of my own library for uhttpd to make it work under 
pure Harbour, but after I've used hb_InetCreate() and hb_InetServer(), 
I've understood I'm going to go my way. I haven't reached hb_InetAccept().

2) absent C API;

3) looking to .c code is also a little difficult.


Regards,
Mindaugas
From info at fsgiudice.com  Mon Dec 15 17:10:41 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Dec 15 17:10:50 2008
Subject: [Harbour] mod_harbour vs apache.prg
In-Reply-To: <21021706.post@talk.nabble.com>
References: <494681A6.3090609@dbtopas.lt> <21021706.post@talk.nabble.com>
Message-ID: <4946D5E1.5080504@fsgiudice.com>

Hi Pritpal,

Il 15/12/2008 21.47, Pritpal Bedi ha scritto:
> Hi Mindaugus
> 
> I receive this error:
> 
> ? "bind() error", socket_error()
> 
> I am compiling uhttpd2.prg + socket.c.
> and executing as is on my laptop.
> 
> How do I need to execute it?
> 

run it
uhttpd2 //help
to see options. For example use:
uhttpd2 //port=9000 //documentroot=c:\html //indexes

Best regards

Francesco
From dbtopas at dbtopas.lt  Mon Dec 15 17:14:44 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Dec 15 17:14:36 2008
Subject: [Harbour] mod_harbour vs apache.prg
In-Reply-To: <21021706.post@talk.nabble.com>
References: <494681A6.3090609@dbtopas.lt> <21021706.post@talk.nabble.com>
Message-ID: <4946D6D4.8050503@dbtopas.lt>

Pritpal Bedi wrote:
> I receive this error:
> 
> ? "bind() error", socket_error()
> 
> I am compiling uhttpd2.prg + socket.c.
> and executing as is on my laptop.
> 
> How do I need to execute it?

Hi,

perhaps port 80 is occupied on your pc. Check if port is free:
   windows> netstat -an
or
   linux# netstat -anp | grep :80


Regards,
Mindaugas



From dbtopas at dbtopas.lt  Mon Dec 15 17:22:02 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Dec 15 17:21:57 2008
Subject: [Harbour] mod_harbour vs apache.prg
In-Reply-To: <21021885.post@talk.nabble.com>
References: <494681A6.3090609@dbtopas.lt> <21021706.post@talk.nabble.com>
	<21021885.post@talk.nabble.com>
Message-ID: <4946D88A.70106@dbtopas.lt>

Hi,


> Then I tried like uhttpd //port=81
> and http server is up and running. I do not know why port 80 got denied.

It means port 80 is occupied! Forgot about windows option, use -b:
    netstat -anb
You'll see executable names.

> Then I issued from IE 
> http://127.0.0.1:81/
> and got this error ( obivious ) == HTTP 403 Forbidden
> and uhttpd_access.log is updated to this effect like :
> 
> 127.0.0.1 - - [15/Dec/2008:12:51:06 +0000] "GET / HTTP/1.1" 403 48 ""
> "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET
> CLR 2.0.50727)"
> 127.0.0.1 - - [15/Dec/2008:12:51:41 +0000] "GET / HTTP/1.1" 403 48 ""
> "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET
> CLR 2.0.50727)"
> 127.0.0.1 - - [15/Dec/2008:12:52:20 +0000] "GET / HTTP/1.1" 403 48 ""
> "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET
> CLR 2.0.50727)"

Perhaps current directory does not contain index.html or index.htm 
files. Use //documentroot=DIR to specify folder with index.html, or use 
//indexes if you want to allow directory listing in case index.html is 
missing. If you have ever used to edit apache configuration, it's easy 
to understand the meaning of options. You can print help using //help 
switch.


Regards,
Mindaugas
From e.m.giordano at emagsoftware.it  Mon Dec 15 17:50:28 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Mon Dec 15 17:50:40 2008
Subject: [Harbour] Warning
Message-ID: <18D9FE95737D465B99AA6F48D7DB8FCF@emag>

Warning W8012 source\vm\classes.c 1384: Comparing signed and unsigned values 
in function hb_clsMethodName

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From dbtopas at dbtopas.lt  Mon Dec 15 17:59:22 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Dec 15 17:59:16 2008
Subject: [Harbour] Re: PCode hacking of last night
In-Reply-To: <20081215140702.GA6790@34-mo7-2.acn.waw.pl>
References: <20081215140702.GA6790@34-mo7-2.acn.waw.pl>
Message-ID: <4946E14A.8030500@dbtopas.lt>

Hi,


> It looks very nice. Can youy add it to compiler?

I thought that you'll find an easier way to generate these warnings 
using pExpr tree :) Like there was with push/pop optimisation with jump 
in between some time ago.


> This is not real deadcode. In dead code eliminator inside compiler
> I intentionally do not strip the last HB_P_ENDPROC. See harbour
> compiler/hbdead.c[591].
> If you remove this if() statement then it will be stripped.
> It left the last HB_P_ENDBLOCK/HB_P_ENDPROC for some historical reasons
> and code which needed it but probably I've already cleaned all such code.
> Your PCODE analyzer detected such dummy HB_P_ENDPROC PCODE at the end of
> function body.

Yes, I know it is a final unreachable ENDPROC, but I didn't know it was 
intentional.


> Very nice job. I would like to ask to integrate it with compiler.
> If you will need any help then I'll do what I can.

I'll try to add to compiler, but I need to rethink conditions of 
warnings, and code optimisation. There is always a danger for locals to 
be infected by references.
   xLocal := xParam // not useless assignment if xParam is reference
   xLocal := 1
And how about that?:
   xLocal := f()
   xLocal := 1
Should we generate warning in these cases?


Regards,
Mindaugas

From druzus at acn.waw.pl  Mon Dec 15 20:01:03 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Dec 15 19:58:40 2008
Subject: [Harbour] Re: hblognet, inet and threads
Message-ID: <20081216010103.GA9792@34-mo7-2.acn.waw.pl>

Hi Francesco,

> The problem is that I need that SET_BACKGORUNDTASKS has to be shared 
> between threads, this is because threads have to be stopped or activated 
> based on above set.

In MT mode threads are executes independently. We do not have
task switching at HVM level but we use OS threads. It means
that for programmer each thread is executed simultaneously and
even on single CPU machine programmer does not know when the
CPU is switched between threads.
Some OS-es allow to suspend some thread(s) but people are often
confused by this functionality thinking that it allows to exected
any single thread code at any moment. It's not true and does not
help in synchronization because programmer does not know the place
where the thread was suspend so he does not know if it's safe to
execute some code. In fact code which uses such functionality cannot
use mutexes after calling thread suspend because suspending other
thread with active lock will cause deadlock.

Where do you want to keep list of background tasks and if you want
or not share them between threads it's your decision. But it's not
directly related to suspending other threads during execution of
bkg tasks. Just simply user have to create tasks which will not
break jobs executed by other threads. Otherwise you reduce foreground
threads to simple task switching.

> In my repository I have background tasks that in ST mode works well and 
> I can stop / restart using above set.

If you port it to MT mode as is keeping the task list in thread dependent
area then each thread will have such list of background tasks.

> On the contrary I have implemented background tasks in MT mode using 
> your sample (plus some refinements) but once the thread is started I 
> cannot control flow using above set.

because it does not respect them. In the code I sent the task are
executed simultaneously to other threads (without stopping them) in given
time periods. If you need some other switches f.e. manipulating of time
periods then you need to extend this code. It was only simple example.

> And as you state above, there are some sets that is useful to have shared.
> So how can I share it ?

You have to change set.c and implement their low level storage and actions
in shared area but in this case I think it's still not the thing you are
asking for. I think you will want to stop all threads in some arbitrary
point and execute bkg task by one of existing threads and then wake up
all. It's possible and GC uses it though with some additional conditions
but it's not good idea to create other code which make sth like that.

> And another problem is about screen updates.
> Once the thread is started too many screen updates are done in wrong 
> places also if all updates are guarded with Row()/Col() save and restore.

because it's real MT mode. Many thread using the same GT console window can
simultaneously update the screen and change cursor position. Harbour only
makes technical internal data protection against corruption but it does
not know anything about logical screen updates you need to synchronize
screen output in your application.
F.e. in some of tests/mt/mttest*.prg programs threads are displaying
data in simultaneously and the output is merged. It's intentional so you
can see which thread is active. But in some other programs you may want
to separate screen output.
F.e. in bkg tasks, if you do not want to change cursor position during
screen update then you should use screen functions which does not change it.
Save/restore row()/col() do not help because these are yet another functions
which change cursor position when other threads still may use it.

F.e. in the code below thread display clock. It uses HB_DISPOUTAT() to not
change cursor position. Check what will happen if you will use DISPOUTAT().

best regards,
Przemek



proc main()
   local getList := {}
   local cVar := space( 20 )

   hb_threadStart( @thFunc() )

   CLEAR SCREEN
   @ 10, 10 SAY "Insert cVar:" GET cVar
   READ
   SetPos( 12, 0 )
   ? "Result -> [" + cVar + "]"
   WAIT

return

func thFunc()
   local cTime
   while .T.
      cTime := dtoc( date() ) + " " + time()
      hb_dispOutAt( 0, maxcol() - len( cTime ) + 1, cTime, "GR+/N" )
      hb_idleSleep( 1 )
   enddo
return nil
From bedipritpal at hotmail.com  Mon Dec 15 20:03:17 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Mon Dec 15 20:03:21 2008
Subject: [Harbour] mod_harbour vs apache.prg
In-Reply-To: <494681A6.3090609@dbtopas.lt>
References: <494681A6.3090609@dbtopas.lt>
Message-ID: <21025374.post@talk.nabble.com>


Mindaugas


Mindaugas Kavaliauskas wrote:
> 
> I have not implemented any Model-View-Control pattern yet, so, I do not 
> have Ruby on Rails, but I can implement sessions, post method support in 
> a few hours and I'll have something similar to plain php.
> 

I am looking forward for this functionality.

Few years back, working with Xbase++, I tried Alaska's 
WAA ( Web Application Adopter ) where they claimed that
cgi applicatio as a DLL is loaded only once and I found it really 
working modal. I always wondered how they were able to 
teach apache about the appln DLL.

Now I am sure we are heading towards .NET solution, though, 
in a bit different way.

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/mod_harbour-vs-apache.prg-tp21018073p21025374.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From M.Horodyski at pzuzycie.com.pl  Tue Dec 16 03:47:02 2008
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Tue Dec 16 03:47:08 2008
Subject: [Harbour] RE: mod_harbour vs apache.prg
In-Reply-To: <NLB01FEAM4wEzpE4opy0001eedf@gatein.pzuzycie.com.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501AC98CD@PINK.zycie.pzu>

Hi Mindaugas,

>Anyone interested can download http://www.dbtopas.lt/hrb/uhttpd.zip

I long waited for such solve, but tchis link is not work :

>>>>
Explanation: The IP address for the website you requested could not be
found. 

Try the following:
Refresh page: Search for the page again by clicking the Refresh button.
The timeout may have occurred due to Internet congestion.
Check spelling: Check that you typed the Web page address correctly. The
address may have been mistyped.
Access from a link: If there is a link to the page you are looking for,
try accessing the page from that link.
If you are still not able to view the requested page, try contacting
your administrator or Helpdesk. 

Technical Information (for support personnel)
Error Code 11001: Host not found
Background: This error indicates that the gateway could not find the IP
address of the website you are trying to access. This is usually due to
a DNS-related error.
Date: 12/16/2008 8:27:10 AM [GMT]
Server: isa2.zycie.pzu
Source: DNS error
<<<<

Can you enclose this to harbour contrib folder ?

Regards,
Marek Horodyski
From druzus at acn.waw.pl  Tue Dec 16 04:02:53 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Dec 16 04:00:31 2008
Subject: [Harbour] Re: PCode hacking of last night
Message-ID: <20081216090253.GA10153@34-mo7-2.acn.waw.pl>

Hi Mindaugas,

> > It looks very nice. Can youy add it to compiler?
> I thought that you'll find an easier way to generate these warnings 
> using pExpr tree :) Like there was with push/pop optimisation with jump 
> in between some time ago.

Unfortunately it's not possible without serious compiler modification :-(
Harbour takes one command compile it to pExpr tree, generates
PCODE and then remove expression tree. We do not have list of expressions
for whole function so it's not possible to create expression optimizer
which needs to operate on more then one line of code. In this case it's
necessary to analyze whole function body.
Current behavior reduce memory usage but also does not allow to introduce
optimizations between commands on expression level so many optimizations
have to be hardcoded as PCODE optimizer.
In current days memory usage is not a problem so it will be good to change
it but it will be necessary to make really deep modifications but as
result we can intorduce many other optimizations, f.e.:
   local x
   x := func1()
   func2( x )

can be reduced to:
   func2( func1( x ) )

> > Very nice job. I would like to ask to integrate it with compiler.
> > If you will need any help then I'll do what I can.
> I'll try to add to compiler, but I need to rethink conditions of 
> warnings, and code optimisation. There is always a danger for locals to 
> be infected by references.
>    xLocal := xParam // not useless assignment if xParam is reference
>    xLocal := 1

It is useless assignment because even if xParam is reference then
this reference is not assigned to xLocal but only value which is
pointed by reference so later xLocal := 1 does not change it.

> And how about that?:
>    xLocal := f()
>    xLocal := 1
> Should we generate warning in these cases?

I think yes. In theory function can return reference hacking iif()
pseudo function or array item:
   local xVar
   return iif( .t., @xVar, )
or:
   local xVar
   return { @xVar }[ 1 ]

but it's side effect of Clipper syntax which can corrupt VM stack
not sth designed intentionally so it should not block us.

Anyhow in the future we should think about adding method to pacify
some warnings by programmer (sth like HB_SYMBOL_UNUSED()) but as long
as we will make the optimization analyzing final PCODE it will be hard
to pass such information from source code. F.e. HB_SYMBOL_UNUSED()
does not generate any PCODE and it's fully reduced. Now it's reduced
at PCODE optimization level but in this case it can be easy done in
expression optimizer. If we will make it in such way then PCODE optimizer
will not receive any information about variable usage and used
HB_SYMBOL_UNUSED() in source code.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Dec 16 04:07:17 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Dec 16 04:04:51 2008
Subject: [Harbour] 2008-12-16 10:06 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081216090717.GA13686@34-mo7-2.acn.waw.pl>

2008-12-16 10:06 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/classes.c
    * pacified BCC warning

  + harbour/tests/mt/mttest11.prg
    + added new test for asynchronous screen updating in MT mode

best regards
Przemek
From lorenzo.fiorini at gmail.com  Tue Dec 16 07:11:47 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Tue Dec 16 07:11:51 2008
Subject: [Harbour] Mailing list problems
Message-ID: <9257026e0812160411r382b115che6e34d5edd5bb544@mail.gmail.com>

I'm seeing today messages that are 4 days old.

Can anyone contact Phil?

best regards,
Lorenzo
From info at fsgiudice.com  Tue Dec 16 07:49:28 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Tue Dec 16 07:49:34 2008
Subject: [Harbour] Re: hblognet, inet and threads
In-Reply-To: <20081216010103.GA9792@34-mo7-2.acn.waw.pl>
References: <20081216010103.GA9792@34-mo7-2.acn.waw.pl>
Message-ID: <4947A3D8.5050804@fsgiudice.com>

Hi Przemek,

Il 16/12/2008 2.01, Przemyslaw Czerpak ha scritto:

>> And as you state above, there are some sets that is useful to have shared.
>> So how can I share it ?
> 
> You have to change set.c and implement their low level storage and actions
> in shared area but in this case I think it's still not the thing you are
> asking for. I think you will want to stop all threads in some arbitrary
> point and execute bkg task by one of existing threads and then wake up
> all. It's possible and GC uses it though with some additional conditions
> but it's not good idea to create other code which make sth like that.
> 

I wish to emulate same syntax I have in bkg tasks ST mode. But only to 
start / stop all BTs together.

Probably I can solve putting all requests of adding tasks in stack then with
SET BACKGROUNDTASKS ON
I will start all threads, instead to start them at any single 
hb_backgroundtasksAdd() function and to have same functionality of BT 
TASKS once they are started guard them using s_Stop var of your sample.

> F.e. in bkg tasks, if you do not want to change cursor position during
> screen update then you should use screen functions which does not change it.
> Save/restore row()/col() do not help because these are yet another functions
> which change cursor position when other threads still may use it.
> 
> F.e. in the code below thread display clock. It uses HB_DISPOUTAT() to not
> change cursor position. Check what will happen if you will use DISPOUTAT().
> 

but is there a way to lock/unlock screen in update ?

I have seen you last sample mttest11.prg, but it is only for a single 
hb_dispoutat(), and this is fine and works correctly, but if there is 
need to update a full screen before another task can update it I wonder 
if there is a way to use a syntax like DispBegin() / DispEnd() that in 
middle put other screen update requests in wait state.

Best Regards

Francesco
From gvarona at ec-red.com  Tue Dec 16 08:40:52 2008
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Tue Dec 16 08:40:51 2008
Subject: [Harbour] 2008-12-04 23:56 UTC-0800 Pritpal
	Bedi	(pritpal@vouchcac.com)
In-Reply-To: <80b05d460812120519y2f5780c3i6c268bb841d21089@mail.gmail.com>
References: <20849382.post@talk.nabble.com>	<609353e70812080725r1d91a3bbm5842bd2500f0410@mail.gmail.com>	<80b05d460812111653q5ccf8fc5ib88d6a84534b304d@mail.gmail.com>	<20970967.post@talk.nabble.com>	<80b05d460812120505j6ac0634j9bca69229ae8ad64@mail.gmail.com>
	<80b05d460812120519y2f5780c3i6c268bb841d21089@mail.gmail.com>
Message-ID: <4947AFE4.101@ec-red.com>

Hi,

I too got it's message:

D:\harbour>make_gnu
../../wvgwin.c: In function `HB_FUN_WVG_TREEVIEW_ADDITEM':
../../wvgwin.c:1596: error: structure has no member named `item'
../../wvgwin.c:1597: error: structure has no member named `item'
../../wvgwin.c:1598: error: structure has no member named `item'
../../wvgwin.c:1599: error: `TVIS_EXPANDPARTIAL' undeclared (first use 
in this f
unction)
../../wvgwin.c:1599: error: (Each undeclared identifier is reported only 
once
../../wvgwin.c:1599: error: for each function it appears in.)
../../wvgwin.c:1602: error: structure has no member named `item'
../../wvgwin.c:1604: error: structure has no member named `item'
../../wvgwin.c: In function `HB_FUN_WVG_TREEVIEW_SHOWEXPANDED':
../../wvgwin.c:1634: warning: passing arg 4 of `SendMessageA' makes 
integer from
 pointer without a cast
make[3]: *** [wvgwin.o] Error 1
make[2]: *** [descend] Error 2

D:\harbour>

Env.: WinXP SP2 + MinGW +Harbour (Last SVN)
How can I see that my version of MinGW?

Best Regards
GVS




Rodrigo Miguel escribi?:
> Hi Pritpal,
>
> No lucky, even with mingw 340 stable release,  I got the same error:
>
> gcc -I. -I../../../../include -Wall -W -O3 -march=i586  -c
> ../../wvgwin.c -owvgwin.o
> ../../wvgwin.c: In function `HB_FUN_WVG_TREEVIEW_ADDITEM':
> ../../wvgwin.c:1598: error: structure has no member named `item'
> ../../wvgwin.c:1599: error: structure has no member named `item'
> ../../wvgwin.c:1600: error: structure has no member named `item'
> ../../wvgwin.c:1601: error: `TVIS_EXPANDPARTIAL' undeclared (first use
> in this function)
> ../../wvgwin.c:1601: error: (Each undeclared identifier is reported only once
> ../../wvgwin.c:1601: error: for each function it appears in.)
> ../../wvgwin.c:1604: error: structure has no member named `item'
> ../../wvgwin.c:1606: error: structure has no member named `item'
> ../../wvgwin.c: In function `HB_FUN_WVG_TREEVIEW_SHOWEXPANDED':
> ../../wvgwin.c:1636: warning: passing arg 4 of `SendMessageA' makes
> integer from pointer without a cast
> make[3]: *** [wvgwin.o] Error 1
> make[3]: Leaving directory `/d/cvs/harbour/contrib/gtwvg/w32/mingw'
> make[2]: *** [descend] Error 2
> make[2]: Leaving directory `/d/cvs/harbour/contrib/gtwvg'
> make[2]: Entering directory `/d/cvs/harbour/contrib/hbct'
> make[3]: Entering directory `/d/cvs/harbour/contrib/hbct/w32/mingw'
>
> Regards,
> Rodrigo
>
> On Fri, Dec 12, 2008 at 11:05 AM, Rodrigo Miguel <rodrmigu@gmail.com> wrote:
>   
>> I'll try with 340 version of mingw.
>>
>> Thanks
>> Rodrigo
>>
>> On Fri, Dec 12, 2008 at 5:21 AM, Pritpal Bedi <bedipritpal@hotmail.com> wrote:
>>     
>>> Rodrigo
>>>
>>> I checked mingw's commctrl.h and have found definition of TV_ITEMA and
>>> TV_ITEMW.
>>> Why it is missing in your distribution I do not know. May be someone else
>>> can help.
>>>
>>> TVIS_EXPANDPARTIAL is missing in the headers so we need a workaround.
>>> Przemek ?
>>>
>>> Regards
>>> Pritpal Bedi
>>>
>>>
>>> Rodrigo Miguel wrote:
>>>       
>>>> make[3]: Entering directory `/d/cvs/harbour/contrib/gtwvg/w32/mingw'
>>>> gcc -I. -I../../../../include -Wall -W -O3 -march=i586  -c
>>>> ../../wvgwin.c -owvgwin.o
>>>> ../../wvgwin.c: In function `HB_FUN_WVG_TREEVIEW_ADDITEM':
>>>> ../../wvgwin.c:1598: error: structure has no member named `item'
>>>> ../../wvgwin.c:1599: error: structure has no member named `item'
>>>> ../../wvgwin.c:1600: error: structure has no member named `item'
>>>> ../../wvgwin.c:1601: error: `TVIS_EXPANDPARTIAL' undeclared (first use
>>>> in this function)
>>>> ../../wvgwin.c:1601: error: (Each undeclared identifier is reported only
>>>> once
>>>> ../../wvgwin.c:1601: error: for each function it appears in.)
>>>> ../../wvgwin.c:1604: error: structure has no member named `item'
>>>> ../../wvgwin.c:1606: error: structure has no member named `item'
>>>> ../../wvgwin.c: In function `HB_FUN_WVG_TREEVIEW_SHOWEXPANDED':
>>>> ../../wvgwin.c:1636: warning: passing arg 4 of `SendMessageA' makes
>>>> integer from pointer without a cast
>>>>
>>>>         
>>> --
>>> View this message in context: http://www.nabble.com/2008-12-04-23%3A56-UTC-0800-Pritpal-Bedi-%28pritpal%40vouchcac.com%29-tp20849382p20970967.html
>>> Sent from the Harbour - Dev mailing list archive at Nabble.com.
>>>
>>> _______________________________________________
>>> Harbour mailing list
>>> Harbour@harbour-project.org
>>> http://lists.harbour-project.org/mailman/listinfo/harbour
>>>
>>>       
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
>
>   

From jose.luis at iaicom.com  Tue Dec 16 10:14:43 2008
From: jose.luis at iaicom.com (=?iso-8859-1?Q?Jos=E9_Luis_Capel_?=)
Date: Tue Dec 16 10:11:17 2008
Subject: [Harbour] OT: __GETMESSAGE
In-Reply-To: <200812141057.42296.teo@windtelsoft.com>
References: <10C28C4554DFE54EB20321B9CB8931C2283340@servidor01.AGSoft.local>
	<200812141057.42296.teo@windtelsoft.com>
Message-ID: <000301c95f91$06b2fd60$1418f820$@luis@iaicom.com>

Hello Teo,

Thanks for your answer and help.


JLC>
JLC>Somehow this is the reason (I don't know yet exactly the details, but
JLC>the
JLC>problem is in the includes ("#include 'hbvmpub.h'") on the final C
JLC>code
JLC>obtained from the prg).
JLC>
JLC>So, for the moment, please use a separate C file to contain the
JLC>HB_FUNC():
JLC>
JLC>/---------------- start C code --------------------/
JLC>#include "hbvmopt.h"
JLC>#include "hbstack.h"
JLC>
JLC>HB_FUNC( __GETMESSAGE2 )
JLC>{
JLC>
JLC>hb_retc(hb_stackItem(hb_stackBaseItem()->item.asSymbol.stackstate-
JLC>>lBaseItem )->item.asSymbol.value->szName);
JLC>}
JLC>/---------------- end C code --------------------/
JLC>
JLC>
JLC>this will compile fine .
JLC>

It seems that I am a Little bit lost :-(

I can not make your sample works ok.  Is something related with
HB_STACK_MACROS define ?  I did a full search on Harbour source code of
'stackBaseItem' and 'hb_stackItem' words and I could not find any clue (at
least I couldn?t).

So... any help or clue are welcome.

Thanks and regards,
Jos? Luis Capel


From teo at windtelsoft.com  Tue Dec 16 09:40:24 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Tue Dec 16 12:01:56 2008
Subject: [Harbour] OT: __GETMESSAGE
In-Reply-To: <000301c95f91$06b2fd60$1418f820$@luis@iaicom.com>
References: <10C28C4554DFE54EB20321B9CB8931C2283340@servidor01.AGSoft.local>
	<200812141057.42296.teo@windtelsoft.com>
	<000301c95f91$06b2fd60$1418f820$@luis@iaicom.com>
Message-ID: <200812160840.24512.teo@windtelsoft.com>

On Tuesday 16 December 2008 09:14:43 Jos? Luis Capel wrote:
> Hello Teo,
>
> Thanks for your answer and help.
>
>
> JLC>
> JLC>Somehow this is the reason (I don't know yet exactly the details, but
> JLC>the
> JLC>problem is in the includes ("#include 'hbvmpub.h'") on the final C
> JLC>code
> JLC>obtained from the prg).
> JLC>
> JLC>So, for the moment, please use a separate C file to contain the
> JLC>HB_FUNC():
> JLC>
> JLC>/---------------- start C code --------------------/
> JLC>#include "hbvmopt.h"
> JLC>#include "hbstack.h"
> JLC>
> JLC>HB_FUNC( __GETMESSAGE2 )
> JLC>{
> JLC>
> JLC>hb_retc(hb_stackItem(hb_stackBaseItem()->item.asSymbol.stackstate-
> JLC>>lBaseItem )->item.asSymbol.value->szName);
> JLC>}
> JLC>/---------------- end C code --------------------/
> JLC>
> JLC>
> JLC>this will compile fine .
> JLC>
>
> It seems that I am a Little bit lost :-(
>
> I can not make your sample works ok.  Is something related with
> HB_STACK_MACROS define ?  I did a full search on Harbour source code of
> 'stackBaseItem' and 'hb_stackItem' words and I could not find any clue (at
> least I couldn?t).

What errors do you get, in linking or compiling time ?

Unfortunately I haven't access to a Windows PC right now, but at least on 
linux, this must work ok, attached you'll find a zip that contains the 
test.prg and testc.c sources, just compile and link and run it with the 
maketest.sh script, this sample will print "MAIN" on the screen.

>
> So... any help or clue are welcome.

Please, give us more details.

best regards,

Teo
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.zip
Type: application/x-zip
Size: 661 bytes
Desc: not available
Url : http://lists.harbour-project.org/pipermail/harbour/attachments/20081216/fdecc578/test.bin
From dbtopas at dbtopas.lt  Tue Dec 16 12:30:49 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Dec 16 12:30:44 2008
Subject: [Harbour] RE: mod_harbour vs apache.prg
In-Reply-To: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501AC98CD@PINK.zycie.pzu>
References: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501AC98CD@PINK.zycie.pzu>
Message-ID: <4947E5C9.3000204@dbtopas.lt>

>> Anyone interested can download http://www.dbtopas.lt/hrb/uhttpd.zip
> 
> I long waited for such solve, but tchis link is not work :
> 
> Explanation: The IP address for the website you requested could not be
> found. 

I do not have connection to internet or DNS problems here. Please, try 
again later.

> Can you enclose this to harbour contrib folder ?

No. It's just test code at this stage.


Regards,
Mindaugas
From e.m.giordano at emagsoftware.it  Tue Dec 16 13:57:26 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Tue Dec 16 13:57:50 2008
Subject: [Harbour] 2008-12-16 10:06 UTC+0100 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20081216090717.GA13686@34-mo7-2.acn.waw.pl>
Message-ID: <CD67C073D98D49FD8A467FB9E25CB5E6@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: <harbour@harbour-project.org>
Data invio: marted? 16 dicembre 2008 10.07
Oggetto: [Harbour] 2008-12-16 10:06 UTC+0100 Przemyslaw 
Czerpak(druzus/at/priv.onet.pl)


> 2008-12-16 10:06 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
>  * harbour/source/vm/classes.c
>    * pacified BCC warning

Thank you.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From philb at philb.us  Wed Dec 17 03:19:35 2008
From: philb at philb.us (Phil Barnett)
Date: Wed Dec 17 03:19:43 2008
Subject: [Harbour] Mail problems
Message-ID: <1229501975.6630.1.camel@SunSpot>

I'm experiencing mail problems and the ones on the list are probably
related. I'm working on it. I may have to take the list off of the
Mailscanner route. That's easy to do and probably my next step.

From bedipritpal at hotmail.com  Wed Dec 17 03:27:01 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Dec 17 03:27:04 2008
Subject: [Harbour] File-wide THREAD STATICS : behaving differently
Message-ID: <21049014.post@talk.nabble.com>


Przemek

Please tell me where I am mistaking.

thread static aFld := { { '', 0 } }
static mtx

proc main()
   local aThd := array( 5 )
   local i

   CLEAR SCREEN

   if ! hb_mtvm()
      ? "No MT support, quitting!"
      return nil
   endif

   mtx := hb_mutexCreate()

   for i := 1 to 5
      aThd[ i ] := hb_threadStart( @thFunc() )
   next
   
   aeval( aThd, {|hThd| hb_threadJoin( hThd ) } )
    
   return

func thFunc()
   local n
   local aFields := aFld

   hb_mutexLock( mtx )

   n := ascan( aFields, {|e| e[ 1 ] == 'ALIAS' } ) 
   if n > 0
      ? 'Oh, it must never been there as aFields is a thread static! '+str(
ThreadId(),2 )
   else
      aadd( aFields, { 'ALIAS',212 } )
   endif

   hb_mutexUnlock( mtx )

   return nil

//-------------------------------------------------------//

I assume that  "thread static" is different for each thread but above
example
suggests otherwise. It is breaking my first attempts to port my applications
to MT mode.

It took me a while to locate the problem. OR may be I need to learn 
more about file wide thread statics .

Regards
Pritpal Bedi
-- 
View this message in context: http://www.nabble.com/File-wide-THREAD-STATICS-%3A-behaving-differently-tp21049014p21049014.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Wed Dec 17 04:38:54 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Dec 17 04:36:27 2008
Subject: [Harbour] Re: File-wide THREAD STATICS : behaving differently
Message-ID: <20081217093854.GA19549@34-mo7-2.acn.waw.pl>

Hi Pritpal,

> Please tell me where I am mistaking.
> 
> thread static aFld := { { '', 0 } }
> static mtx
> proc main()
>    local aThd := array( 5 )
>    local i
>    CLEAR SCREEN
>    if ! hb_mtvm()
>       ? "No MT support, quitting!"
>       return nil
>    endif
>    mtx := hb_mutexCreate()
>    for i := 1 to 5
>       aThd[ i ] := hb_threadStart( @thFunc() )
>    next
>    aeval( aThd, {|hThd| hb_threadJoin( hThd ) } )
>    return
> 
> func thFunc()
>    local n
>    local aFields := aFld
>    hb_mutexLock( mtx )
>    n := ascan( aFields, {|e| e[ 1 ] == 'ALIAS' } ) 
>    if n > 0
>       ? 'Oh, it must never been there as aFields is a thread static! '+str( ThreadId(),2 )
>    else
>       aadd( aFields, { 'ALIAS',212 } )
>    endif
>    hb_mutexUnlock( mtx )
>    return nil
> //-------------------------------------------------------//
> 
> I assume that  "thread static" is different for each thread but above example
> suggests otherwise. It is breaking my first attempts to port my applications
> to MT mode.
> 
> It took me a while to locate the problem. OR may be I need to learn 
> more about file wide thread statics .

It's not related to thread statics which works as expected. You are confused
by array behavior in Clipper and [x]Harbour. Each thread has it's own thread
static aFld variable but in each of them aFld points to the same array.
Exactly the same thing you can make using any type of variable also in
single thread program, f.e.:

   proc main()
   local a1, a2
      a1 := { "" }
      a2 := a1
      ? len( a1 ), len( a2 )
      aadd( a1, "2" )
      ? len( a1 ), len( a2 )
   return

As you can see when array in a1 is changed then the same happen with array
in a though both are two different local variables but both keeps reference
to exactly the same array body. In your above example you replicated such
situation but using thread static variables.
If you are using complex variables like array or hashes and you want to make
their separated copies then you have to initialize aFld inside the thread or
clone aFld body when thFunc starts.

best regards,
Przemek
From jarabal at gmail.com  Wed Dec 17 08:10:15 2008
From: jarabal at gmail.com (Xavi)
Date: Wed Dec 17 08:10:50 2008
Subject: [Harbour] OT: And why not PostgresSQL?
In-Reply-To: <49431785.2080702@gmail.com>
References: <4937B06E.9090108@marchuet.net> <49431785.2080702@gmail.com>
Message-ID: <4948FA37.2000205@gmail.com>

Thank you very much Jose Luis,

I think that now the page is not bad for postgres.

Best regards,
Xavi

Xavi escribi?:
> Sorry Miguel,
>
> Can you explain how it corrupts PostgresSQL?
> If not, could you or Jose Luis correct the comments or allow more 
> comments.
>
> http://www.capelblog.com/?p=47
> Miguel Angel Marchuet escribi?:
>> Reza por que PostgresSql no se te corrompa, la ultima vez que lo vi 
>> perdieron todos los datos. Asi que si lo usas te aconsejo que tengas 
>> buenas copias de seguridad externas a Posgress.
>>
>> Saludos
>>
>> Miguel
>
> Best regards,
> Xavi
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
>
From druzus at acn.waw.pl  Wed Dec 17 08:53:31 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Dec 17 08:51:03 2008
Subject: [Harbour] Re: OT: __GETMESSAGE
Message-ID: <20081217135331.GA2523@34-mo7-2.acn.waw.pl>

Hi Jose,

> Sorry for the off-topic and sorry for my low C level...
> I saw that __GETMESSAGE in classes.c is defined as:
> HB_FUNC( __GETMESSAGE )
> {
>    hb_retc( hb_stackItem(hb_stackBaseItem()->item.asSymbol.stackstate->lBaseItem )->item.asSymbol.value->szName  );
> } 
> Then, in my proyect I want to integrate that piece of code.  I do this:
> #pragma BEGINDUMP
> #include "hbapi.h"
> #include "hbstack.h"
> HB_FUNC ( __MYFUNCTION )
> {
>    char * cMessage = (hb_stackItem( hb_stackBaseItem()->item.asSymbol.stackstate->lBaseItem )->item.asSymbol.value->szName) ;
>    /* My code will go below */
> }
> #pragma ENDDUMP
> But when compiling this little example I have these messages error:
> tdatabase.c
> tdatabase.prg(220) : error C2223: left of '->item' must point to struct/union
> tdatabase.prg(220) : error C2198: 'hb_stackItem' : too few actual parameters
> tdatabase.prg(220) : error C2223: left of '->item' must point to struct/union
> And this is my problem:  I cannot understand these errors and also I cannot understand why in classes.c compile OK whilst in my project throws these errors.
> If someone could light me I shall appreciate too much.

In Harbour internal HVM structures are not public. It's done intentionally
because we want to be free in farther Harbour developing and adding new
extensions with problems with backward binary compatibility with 3-rd
party code. It's very important issue and how big problems it can create
you can see in xHarbour where even simple fix in structures used by
profiler breaks binary compatibility and people cannot use existing FWH
binaries. Hiding internal structures also resolves the problem with
alignment so you do not have to ask 3-rd party developers to use exactly
the same alignment as you when they compile code for libraries.
So developers creating code for Harbour should use only public Harbour API
and accessing item internals like in your above example is bad practice
and we strongly suggest to not make anything like that.
Anyhow we cannot stop you or anyone else and forbid it. This is only our
suggestion and if you want you can ignore it but in such case you will
have to accept that if we change sth in HVM internals then you will have
to follow this changes and update your code to respect them or at least
recompile it.
So if your real want to unblock access to HVM internals for your code
then it's enough to include hbvmint.h before any other harbour header
files (please do not use hbvmopt.h as Teo suggested because this file
will force creating separated binaries for MT and ST HVM).
Please only remember that it will not work for #pragma BEGINDUMP because
in final .c file the sections inside BEGINDUMP/ENDDUMP are included _AFTER_
harbour header files used for generated PCODE so #include "hbvmint.h" will
not be the 1-st included harbour header file. It can be used only in
separated .c files or you can edit manually .c file generated by Harbour
compiler and add #include "hbvmint.h" at beginning.

But I strongly suggest to use only documented Harbour API and change your
code to work without "hbvmint.h", f.e.;

/********************************/
proc main()
   ? __MYFUNCTION()
return

#pragma begindump
#include "hbapiitm.h"
#include "hbstack.h"
HB_FUNC ( __MYFUNCTION )
{
   long lOffset = hb_stackBaseProcOffset( 1 );
   const char * cMessage = hb_itemGetSymbol( hb_stackItem( lOffset ) )->szName;

   hb_retc( cMessage );
}
#pragma enddump
/********************************/

If there is sth important for developers what cannot be done using public
harbour API then please inform us. We will add new public functions or we
explain why some internal structures should not be accessible by user code.
But I do no think you will find many of such things. In Harbour only HVM lib
needs it and rest of code (with the exception to emulation of some low level
xHarbour HVM behavior in XHB lib) do not use it at all so it's possible to
write code without it.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Dec 17 10:44:03 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Dec 17 10:41:35 2008
Subject: [Harbour] Re: About HB_TokenGet() function
Message-ID: <20081217154403.GA10611@34-mo7-2.acn.waw.pl>

Hi Juan,

> Is there some technical reason so that the behavior of HB_TokenGet() is 
> different when the delimitador is the space character ?

The only one reason is backward compatibility. Current code for
hb_token*() functions is created by me and when I was working on it
I replicated existing behavior for " " delimiter.

> If yes ... Could it be changed to be an optional behavior ?
> ? HB_TokenGet( ";2;3;4", 1, ";" )    // It shows ""
> ? HB_TokenGet( ";2;3;4", 2, ";" )    // It shows "2"
> ? HB_TokenGet( " 2 3 4", 1, " " )    // It shows "2"
> ? HB_TokenGet( " 2 3 4", 2, " " )    // It shows "3"

Seems that you are not the 1-st person who is confused by it so probably
we should change it. But if we want to touch it then I suggest to make
also other modifications.
Now hb_[a]Token*() functions accept the following parameters:

   hb_[a]Token*( <cStr> [, <nPos> ], [ <cDelim> ], ;
                 [ <lQutoedString> ], [ <lOnlyDblQuoting> ]  ) -> <xResult>

The default <cDelim> is single space " ".
When <cDelim> is single space then it has special meaning and means that
tokens are only non empty substrings, f.e. "  What   a   nice  day  " is
divided into { "What", "a", "nice", "day" }

<lQutoedString> when it's .T. enables respecting string quting in tokens so
this string [1, "2, 3", "4", '5, 6'] with "," as delimiter is divided into:
   [1]
   ["2,3"]
   ["4"]
   ['5,6']
<lOnlyDblQuoting> when it's .T. reduces <lQutoedString> to only (")
characters and (') does not have special meaning so for the above string
instead of the last 4-th token ['5,6'] we will have two ones:
   ['5]
   [6']

I suggest to make following modifications:

1. Keep current behavior of <cDelim> == " " only when delimiter is not given
   as function parameter or it's empty string "" so default value is used.
   So if soemone wants to keep current behavior then he can make:
      HB_TokenGet( " 2 3 4", 2 ) // "3"
   or:
      HB_TokenGet( " 2 3 4", 2, "" ) // "3"
   but if he want strict delimiter behavior just like for other delimiter
   values then he can make:
      HB_TokenGet( " 2 3 4", 2, " " ) // "2"
   so we will define that word delimiting is reserved for empty string
   delimiters ("") and that default delimiter when not given is empty string.

2. Replace two parameters: <lQutoedString> and <lOnlyDblQuoting> by single
   one <lQutoedString> which will have the following meaning:
      .T. - tokens can be quoted by (") and (') characters
      .F. - tokens can be quoted only by (") character
      NIL or any other value - no quoting

3. add new parameter <lStripQuotig> - when it's .T. then leading and trailing
   quote characters will be stripped from returned tokens, f.e. in above
   example ["2,3"] will give [2,3], ["4"] -> [4] and ['5,6'] -> [5,6]

If other developers will not have anything against above then I'll make and
commit such modification.

best regards,
Przemek
From teo at windtelsoft.com  Wed Dec 17 07:59:57 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Wed Dec 17 10:56:33 2008
Subject: [Harbour] Re: OT: __GETMESSAGE
In-Reply-To: <20081217135331.GA2523@34-mo7-2.acn.waw.pl>
References: <20081217135331.GA2523@34-mo7-2.acn.waw.pl>
Message-ID: <200812170659.57486.teo@windtelsoft.com>

On Wednesday 17 December 2008 07:53:31 Przemyslaw Czerpak wrote:
> Hi Jose,
>
> > Sorry for the off-topic and sorry for my low C level...
> > I saw that __GETMESSAGE in classes.c is defined as:
> > HB_FUNC( __GETMESSAGE )
> > {
> >    hb_retc(
> > hb_stackItem(hb_stackBaseItem()->item.asSymbol.stackstate->lBaseItem
> > )->item.asSymbol.value->szName  ); }
> > Then, in my proyect I want to integrate that piece of code.  I do this:
> > #pragma BEGINDUMP
> > #include "hbapi.h"
> > #include "hbstack.h"
> > HB_FUNC ( __MYFUNCTION )
> > {
> >    char * cMessage = (hb_stackItem(
> > hb_stackBaseItem()->item.asSymbol.stackstate->lBaseItem
> > )->item.asSymbol.value->szName) ; /* My code will go below */
> > }
> > #pragma ENDDUMP
> > But when compiling this little example I have these messages error:
> > tdatabase.c
> > tdatabase.prg(220) : error C2223: left of '->item' must point to
> > struct/union tdatabase.prg(220) : error C2198: 'hb_stackItem' : too few
> > actual parameters tdatabase.prg(220) : error C2223: left of '->item' must
> > point to struct/union And this is my problem:  I cannot understand these
> > errors and also I cannot understand why in classes.c compile OK whilst in
> > my project throws these errors. If someone could light me I shall
> > appreciate too much.
>
> In Harbour internal HVM structures are not public. It's done intentionally
> because we want to be free in farther Harbour developing and adding new
> extensions with problems with backward binary compatibility with 3-rd
> party code. It's very important issue and how big problems it can create
> you can see in xHarbour where even simple fix in structures used by
> profiler breaks binary compatibility and people cannot use existing FWH
> binaries. Hiding internal structures also resolves the problem with
> alignment so you do not have to ask 3-rd party developers to use exactly
> the same alignment as you when they compile code for libraries.
> So developers creating code for Harbour should use only public Harbour API
> and accessing item internals like in your above example is bad practice
> and we strongly suggest to not make anything like that.
> Anyhow we cannot stop you or anyone else and forbid it. This is only our
> suggestion and if you want you can ignore it but in such case you will
> have to accept that if we change sth in HVM internals then you will have
> to follow this changes and update your code to respect them or at least
> recompile it.
> So if your real want to unblock access to HVM internals for your code
> then it's enough to include hbvmint.h before any other harbour header
> files (please do not use hbvmopt.h as Teo suggested because this file
> will force creating separated binaries for MT and ST HVM).
> Please only remember that it will not work for #pragma BEGINDUMP because
> in final .c file the sections inside BEGINDUMP/ENDDUMP are included _AFTER_
> harbour header files used for generated PCODE so #include "hbvmint.h" will
> not be the 1-st included harbour header file. It can be used only in
> separated .c files or you can edit manually .c file generated by Harbour
> compiler and add #include "hbvmint.h" at beginning.
>
> But I strongly suggest to use only documented Harbour API and change your
> code to work without "hbvmint.h", f.e.;
>
> /********************************/
> proc main()
>    ? __MYFUNCTION()
> return
>
> #pragma begindump
> #include "hbapiitm.h"
> #include "hbstack.h"
> HB_FUNC ( __MYFUNCTION )
> {
>    long lOffset = hb_stackBaseProcOffset( 1 );
>    const char * cMessage = hb_itemGetSymbol( hb_stackItem( lOffset )
> )->szName;
>
>    hb_retc( cMessage );
> }
> #pragma enddump
> /********************************/
>
> If there is sth important for developers what cannot be done using public
> harbour API then please inform us. We will add new public functions or we
> explain why some internal structures should not be accessible by user code.
> But I do no think you will find many of such things. In Harbour only HVM
> lib needs it and rest of code (with the exception to emulation of some low
> level xHarbour HVM behavior in XHB lib) do not use it at all so it's
> possible to write code without it.
>

Thanks Przemek for your detailed explanation.

best regards,

Teo
From druzus at acn.waw.pl  Wed Dec 17 11:53:56 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Dec 17 11:51:28 2008
Subject: [Harbour] Re: File-wide THREAD STATICS : behaving differently
Message-ID: <20081217165356.GA18381@34-mo7-2.acn.waw.pl>

Hi Pritpal and others,

> If you are using complex variables like array or hashes and you want to make
> their separated copies then you have to initialize aFld inside the thread or
> clone aFld body when thFunc starts.

I thought about your mail again and if this is a real problem and you think
it will confuse users then I can change the initialization code for thread
static variables so complex items like arrays or hashes will be "cloned"
instead of coping so each thread will receive it's own copy of data declared
by user in source code with all nested structures also copied.
For me current behavior is natural but because I know quite well VM internals
then my opinion may be different then other Harbour users. If you prefer
cloning then I'll change it.

best regards,
Przemek
From info at fsgiudice.com  Wed Dec 17 13:34:08 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Dec 17 13:34:18 2008
Subject: [Harbour] Re: File-wide THREAD STATICS : behaving differently
In-Reply-To: <20081217165356.GA18381@34-mo7-2.acn.waw.pl>
References: <20081217165356.GA18381@34-mo7-2.acn.waw.pl>
Message-ID: <49494620.20105@fsgiudice.com>

Hi Przemek,

Il 17/12/2008 17.53, Przemyslaw Czerpak ha scritto:
> Hi Pritpal and others,
> 
>> If you are using complex variables like array or hashes and you want to make
>> their separated copies then you have to initialize aFld inside the thread or
>> clone aFld body when thFunc starts.
> 
> I thought about your mail again and if this is a real problem and you think
> it will confuse users then I can change the initialization code for thread
> static variables so complex items like arrays or hashes will be "cloned"
> instead of coping so each thread will receive it's own copy of data declared
> by user in source code with all nested structures also copied.
> For me current behavior is natural but because I know quite well VM internals
> then my opinion may be different then other Harbour users. If you prefer
> cloning then I'll change it.
> 
It could be useful in both way IMO, so it could be interesting if it can 
be used as auto-cloned in standard way and work referenced if BYREF (or 
similar name) option is defined.

thread BYREF static aFld := { { '', 0 } }


Best Regards

Francesco
From druzus at acn.waw.pl  Wed Dec 17 14:28:16 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Dec 17 14:25:47 2008
Subject: [Harbour] Re: mod_harbour vs apache.prg
Message-ID: <20081217192816.GA29643@34-mo7-2.acn.waw.pl>

Hi Mindaugas,

>>>   socket.c - alternative lightweight socket library, I do not like
>>>              hbinet.c a lot. If you want to compile it for Linux,
>>>              you'll need to adjust includes, but code should be
>>>              portable;

I ported it to Linux but it needs also some cleanup to remove MS-Windows
only code and fix some function parameters which are not POSIX compatible:

1. Here is the list of necessary header files:
   #include <unistd.h>
   #include <sys/types.h>
   #include <sys/socket.h>
   #include <arpa/inet.h>
   #include <netdb.h>

2. SOCKET and INVALID_SOCKET are MS-Windows only types as declarations so
   these lines have to be added:
      #define INVALID_SOCKET (-1)
      typedef int SOCKET;

3. Some functions like accept(), getsockname(), getpeername() needs as
   parameter reference to socklen_t not int so for Windows builds we should
   add:
      #define socklen_t int
   and change iSize type from int to socklen_t.
   Unfortunately some *nixes also uses int instead of socklen_t so the
   above will have to be adopted also for them.

4. documented member of struct sockaddr_in which keeps the address is
   sin_addr.s_addr not sin_addr.S_un.S_addr so this code:
      ( ( struct sockaddr_in* ) sa)->sin_addr.S_un.S_addr = inet_addr(...)
   should be changed to:
      ( ( struct sockaddr_in* ) sa)->sin_addr.s_addr = inet_addr(...)

5. SOCKET_INIT() and SOCKET_EXIT() are not necessary so they can be changed
   to simple:
      hb_retni( 0 );
   in *nixes.

6. In SOCKET_ERROR()
      hb_retni( WSAGetLastError() );
   should be changed to:
      hb_retni( h_errno );
   h_errno may not be available in some older *nixes and in such case should
   be replaced by other function or variable. Anyhow here we have 1-st
   serious problem. Portable way of error reporting. The error values are
   different between platforms so we should introduce our own list of errors
   and make necessary translation. OS level error code can be used only as
   helper information.

7. closesocket() is MS-Windows extension. In *nixes close() should be used.

8. The constant identifiers for shutdown() are different. Instead of SD_BOTH
   SHUT_RDWR should be used.

With the above modifications it can be used with current Linux versions.

Anyhow there are still some problems which can be exploited by upper level
.prg code because there are some small differences in socket functions
behavior on different platform:

1. Some functions which returns pointers to some structures/buffers may not
   be MT safe on some platforms and usually are not. They should be replaced
   by MT safe functions, f.e. inet_ntoa().
2. bind(), listen(), close(), shutdown() and some other functions changes
   errno but may not change h_errno on some systems. This should be
   respected by SOCKET_ERROR() function so we will have to store errors
   after function call and probably bound them with socket or at least keep
   them in thread local area to make error checking MT safe. Here we should
   probably add error code translation.
3. select() works in different way in *nixes then in MS-Windows. In some
   cases in Windows select() is not interrupted when connection is broken
   and the associated socket number is not given in exception fd_set.
   It means that the same .prg code used in *nixes will not work in
   Windows in the same way. If we do not hide such differences inside
   Harbour functions then we will force users to resolve them at .prg
   level. I do not think that many users have enough knowledge to make it.
4. reading from socket closed by peer host also gives different results
   and the method of detecting closed or broken connections is different
   depending on blocking or unblocking socket IO mode.

I like the idea of giving as close as possible access to socket functions
at .prg level but we should also design a layer which will hide platform
differences. Each of use has own preferences from C programming. F.e.
I used to use read() and write() for connected sockets instead of recv()
send(). In general I used them just like any other descriptors for files,
pipes, character devices, ... also with select(). But it does not work in
MS-Windows and I have to accept it and change my preferences if I want
to create common for all platforms harbour interface.

>> Just for curiosity what you don't like in hbinet.c ?
> 1) strange, difficult to remember function names, ex., hb_InetPort() 
> returns port, but I can't remember local or remote. getpeername() is 
> more clear to me. hb_InetTimeout(), hb_InetTimelimit() - I do not know 
> that is we difference. hb_InetCount() - number of what? Internet 
> providers on my computer? I do not find bind() and listen() functions in 
> the list. hb_InetRecvEndBlock() - what kind of animal is it?

I only remember that one is inter recv()/send() delay and second is
used as total timeout limit for whole receive or send operation.
hb_inet*() functions try to complete this operation until given
stop condition (f.e. full buffer received or transmitted) so they
can repeat recv()/send() operations.

I've just check hbinet.c source code that hb_InetCount() returns number
of bytes received or sent in given socket in recently executed socket
read/write hb_inet*() function so seems to be alternate form of extracting
information which is returned or passed to parameter by reference by these
functions.

hb_InetRecvEndBlock() read from socket data until it receives one or
more given terminators. Probably the name is confusing - I also have to
refresh my mind checking the source code.

In general such functions are very usefull, f.e. this code in uhttpd2.prg

      cRequest := ""
      nLen := 1
      DO WHILE AT(CR_LF + CR_LF, cRequest) == 0 .AND. nLen > 0
         nLen := socket_recv(hSocket, @cBuf)
         cRequest += cBuf
      ENDDO

Can be replaced by:

   cRequest := hb_inetRecvEndBlock( hSocket, CR_LF + CR_LF )

Please also note that the original version cannot be used for protocols
which may pass additional data after double CR_LF because it's possible
that it will be read as part of cRequest and lost. Unfortunately the
internal implementation of hb_inetRecvEndBlock() and hb_inetRecvLine()
is very inefficient and reads data from socket in single bytes. It's a
performance killer. To resolve it for connected socket we should implement
read buffer which will be used like FILE stdio structure reading data in
bigger peaces and then it will be used by all Harbour level socket functions.

> Perhaps I'm just used to see original socket function names and original 
> function behaviour. I need to start learning sockets from beginning, if 
> I want to write an application using hbinet.c. Actually I've tried to 
> use hbinet.c instead of my own library for uhttpd to make it work under 
> pure Harbour, but after I've used hb_InetCreate() and hb_InetServer(), 
> I've understood I'm going to go my way. I haven't reached hb_InetAccept().

Each time when I want to write sth using hb_inet*() functions I'm using
xharbour documentation from xharbour/doc/inet.txt and verify it with source
code. I also do not remember the exact function names and their behavior
because I use my own socket library. Anyhow my library is not easy portable
to MS-Windows just like your code so I cannot commit it to Harbour. Anyhow
each portable library which should hide some platform differences will have
to give some upper level interface and cannot be simple wrapper to existing
socket functions. I also think that it's not bad to implement some functions
like hb_inetRecvEndBlock() (though probably using different names ;-)) to
move some operations which may be very expensive in .prg level to .c code
so I'm not against them.

> 2) absent C API;

It's very serious problem. I assume that I should give higher priority to
new hbinet implementation.

> 3) looking to .c code is also a little difficult.

I hope that the new implementation will be much easier to understand.
Separating Harbour C API from .prg functions, cleaner definition for
base socket structure and code more closer to original BSD socket
interface should help.

best regards,
Przemek
From info at fsgiudice.com  Wed Dec 17 14:42:57 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Wed Dec 17 14:43:05 2008
Subject: [Harbour] Re: mod_harbour vs apache.prg
In-Reply-To: <20081217192816.GA29643@34-mo7-2.acn.waw.pl>
References: <20081217192816.GA29643@34-mo7-2.acn.waw.pl>
Message-ID: <49495641.4070503@fsgiudice.com>

Hi Przemek,

Il 17/12/2008 20.28, Przemyslaw Czerpak ha scritto:
> 
> It's very serious problem. I assume that I should give higher priority to
> new hbinet implementation.
> 
>> 3) looking to .c code is also a little difficult.
> 
> I hope that the new implementation will be much easier to understand.
> Separating Harbour C API from .prg functions, cleaner definition for
> base socket structure and code more closer to original BSD socket
> interface should help.
> 

Very good news! Thank you.

Best regards

Francesco
From bedipritpal at hotmail.com  Wed Dec 17 15:02:05 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Dec 17 15:02:08 2008
Subject: [Harbour] File-wide THREAD STATICS : behaving differently
In-Reply-To: <49494620.20105@fsgiudice.com>
References: <21049014.post@talk.nabble.com>
	<20081217165356.GA18381@34-mo7-2.acn.waw.pl>
	<49494620.20105@fsgiudice.com>
Message-ID: <21060319.post@talk.nabble.com>


Hi Przemek


Francesco Saverio Giudice wrote:
> 
> It could be useful in both way IMO, so it could be interesting if it can 
> be used as auto-cloned in standard way and work referenced if BYREF (or 
> similar name) option is defined.
> 
> thread BYREF static aFld := { { '', 0 } }
> 

I support Francesco's viewpoint.

THREAD STATIC should alway create always new copy.
BYREF THREAD STATIC should behave as current.

I have a very large mini ERP solution adoptable to 
different industries. I get it working on Xbase++ few years back 
with MT modal. Though I devised the method to keep arrays 
different threads but then those consumed a lot of memory 
as ThreadID() ever points to incremented number ( perfectly all right )
and arry references kept in static array referenced by ThreadID() could 
never be released at the termination of a thread. 

So I tried with THREAD STATIC approach and come up with above issue.

As THREAD STATICS are bound to be released automatically once 
the thread is terminated, I would like to implement this as I assume it
should.
Though I can reuse Xbase++ methodology which I do not want to.

Regards
Pritpal Bedi
prefer

-- 
View this message in context: http://www.nabble.com/File-wide-THREAD-STATICS-%3A-behaving-differently-tp21049014p21060319.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From bedipritpal at hotmail.com  Wed Dec 17 15:11:03 2008
From: bedipritpal at hotmail.com (Pritpal Bedi)
Date: Wed Dec 17 15:11:07 2008
Subject: [Harbour] mod_harbour vs apache.prg
In-Reply-To: <49495641.4070503@fsgiudice.com>
References: <494681A6.3090609@dbtopas.lt>
	<20081217192816.GA29643@34-mo7-2.acn.waw.pl>
	<49495641.4070503@fsgiudice.com>
Message-ID: <21060475.post@talk.nabble.com>


Hi Przemek


Francesco Saverio Giudice wrote:
> 
>> It's very serious problem. I assume that I should give higher priority to
>> new hbinet implementation.
>> 
>>> 3) looking to .c code is also a little difficult.
>> 
>> I hope that the new implementation will be much easier to understand.
>> Separating Harbour C API from .prg functions, cleaner definition for
>> base socket structure and code more closer to original BSD socket
>> interface should help.
>> 
> 
> Very good news! Thank you.
> 

++1

Regards
Pritpal Bedi

-- 
View this message in context: http://www.nabble.com/mod_harbour-vs-apache.prg-tp21018073p21060475.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From dbtopas at dbtopas.lt  Wed Dec 17 22:05:34 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Dec 17 22:05:37 2008
Subject: [Harbour] 2008-12-18 05:02 UTC+0200 Mindaugas Kavaliauskas
Message-ID: <4949BDFE.70405@dbtopas.lt>

2008-12-18 05:02 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * include/hbclass.ch
   * include/hbcomp.ch
   * include/hberrors.h
   * include/hbgenerr.c
   * include/hbmain.c
   * include/hbopt.c
     + PCode optimizations:
         1) Self := QSELF(), Self:method -> QSELF():method
         2) Declared, but unused variables are removed from code
       These optimizations are enabled if jump optimizations are enabled.

     + added recursive pcode tree tracer. It is capable to generate new
       warning: Variable %s is assigned, but not used.
       Warning is not generated in these cases:
         1) unoptimal Self := QSELF() pcode [generated by preprocessor 
rules]
         2) if variable name starts with '_nowarn_'. This allows to
            suppress warning in case unoptimal pcode is generated by
            preprocessor rules
         3) assigned value is NIL. This let us force garbage collection
            using oVar := NIL
       Warning has warning level 3.
       ; NOTE: if you are using -w3 -es2 in makefiles, you'll need to 
fix your
               redundant code to compile the project

   * source/rtl/achoice.prg
   * source/rtl/browse.prg
   * source/rtl/tbrowse.prg
   * source/rtl/teditor.prg
   * source/rtl/tget.prg
   * source/rtl/tgetlist.prg
   * source/rtl/tlabel.prg
   * source/rtl/tmenusys.prg
   * source/rtl/tpersist.prg
   * source/rtl/treport.prg
   * source/debug/dbgtmenu.prg
   * source/debug/debugger.prg
   * source/debug/dbgtobj.prg
     * fixed 'assigned but not used' warnings

   * utils/hbdoc/hbdoc.prg
   * utils/hbdoc/genasc.prg
   * utils/hbdoc/genhpc.prg
   * utils/hbdoc/genhtm.prg
   * utils/hbdoc/genchm.prg
   * utils/hbdoc/genng.prg
   * utils/hbdoc/genos2.prg
   * utils/hbdoc/genrtf.prg
   * utils/hbdoc/gentrf.prg
   * utils/hbdoc/ft_funcs.prg
   * utils/hbmake/hbmake.prg
     * #pragma -w2
     ; NOTE: I've been fixing warnings in utils/hbdoc/* for 2 hours,
       but only fixed half of files. There are a lot of garbage code here.
       I do not thing this code is working...
       I used fallback method: restored original files and used -w2
     ; NOTE: hbmake.prg has about 140 unused assignments.
       I've also fallback to -w2, because some of unused code is complex,
       ex., ASCAN() with block parameters. I'm not using hbmake, and I'm
       affraid to break something important.

   * compiler/hbpcode.c
     - removed Ron's copyright on hb_compStrongType(). We do not have this
       functions in the compiler at all. I guess this text is just a result
       of .c header copy-paste from xHarbour's hbstrong.c some time ago.
From dbtopas at dbtopas.lt  Wed Dec 17 22:52:39 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Dec 17 22:52:42 2008
Subject: [Harbour] Re: PCode hacking of last night
In-Reply-To: <20081215140702.GA6790@34-mo7-2.acn.waw.pl>
References: <20081215140702.GA6790@34-mo7-2.acn.waw.pl>
Message-ID: <4949C907.3020002@dbtopas.lt>

Przemyslaw Czerpak wrote:
> It looks very nice. Can youy add it to compiler?
> In such case we can make two things:
> 1. we can extract local file name (hb_compLocalVariableName())
> 2. we can activate this analyse phase before HB_P_NOOP optimization
>    and strip unnecessary code by filing it with NOOP pcodes.

I've not implemented noop'ing of unused assignment yet. Only warning 
implemented. I find it a good solution. Warning is -w3 level, so, it 
will popup for many developers, since it is default level.
I think we need a test time for this recursive pcode tree tracing code. 
Developers will report wrong warnings (if they exists), but wrong 
noop'ing will make compiler very unstable.

We can try implement nooping later. It will optimize some
   nI := 0
but will not help a lot for not useful assignment:
   nI := LEN(aaI[5])
and
   nI := ASCAN(aI, {|x| x[3] == cSomething})

I see developer code fixing a good problem solution. Warning level could 
be reduced to -w2, like 'variable declared but not used', to force 
developers more find possible bugs and optimize .prg code.


>> It was nice to run it on my code and also on Harbour core (not contribs) 
>> .prg files. Results are below. There are two standard warnings:
>> 1) "CLASS ..." generates "nScope := 1", but if programmer provides scope 
>> for first defined data, this "nScope := 1" is redundant.
> 
> Yes it is but it's hard to detect it and create workaround using PP only.

I've renamed this var to _nowarn_nScope and optimizer does not 
genereates warninig for such prefixed variables. Solution a little 
hackish, but I can't find quickly a good solution. Perhaps, some 
pseudo-function like HB_SYMBOL_UNUSED() could be a solution. But this 
funtion should not be changed by preprocessor. It should "survive" to 
pcode optimizer. Pcode optimizer will strip it, but will not generate 
warning.


>> 2) "METHOD ... CLASS ..." generates "LOCAL Self := QSELF()". If "Self" 
>> is unused, this assignment and local variable are redundant. Do not 
>> forget to count this local when counting locals of methods!
> 
> It's yet another problem. Here we even have additional place for
> optimization. We can eliminate local variable self and use HB_P_PUSHSELF
> what should be a little bit faster and will need less PCODE bytes.
> The only one problem is detecting that Self local variable is not used
> inside codeblocks and detached. Because now compiler generate code
> "on line" then we cannot easy implement it in compiler. But it should
> possible to add such optimization to your code. It will be enough to
> check if variable is not used by reference, inside codeblocks or
> assigned (POP). If it's used only as readonly and assigned by popping
> HB_P_PUSHSELF then we can replace all HB_P_PUSHLOCAL[NEAR] <n> wit
> HB_P_PUSHSELF and reduce number of local variables. If we reduce all then
> we can eliminate HB_P_[LARGE][V]FRAME.

Done. There are some restrictions (in my code) on this optimisation but 
it will work, if Self := QELSF() is done before first branching 
instruction. So, it will work for:
   METHOD ... CLASS ...

HB_P_FRAME is eliminated by some hbmain.c code. I think it will be 
easier to do it in hb_compOptimizePCode() by striping HB_P_FRAME 0,0, 
instead of memmove() of whole pcode, but I didn't tried to move this 
code. It could be done intentionally this way.


> Very nice job. I would like to ask to integrate it with compiler.
> If you will need any help then I'll do what I can.
> We can add new -k? switch which will enable such optimization or
> make it part of -kJ. The problem can be only with warnings. They
> should be optional. Now we can use -w4 but sooner or later we will
> need sth to enable/disable different compiler warnings for some
> extensions which are not valid for each Clipper code. I'll think
> about it.

Warning generation is put under -w3. Self := QSELF() optimisation and 
'declared but unused code' optimisation is done if jump optimisation 
enabled.

After new warnings appeared not all code compiles. I've fixed core code 
except:
   utils/hbdoc/* - many unused assignment and variables
   utils/hbmake.prg - many unused assignment and variables
these are marked with #pragma -w2.
I've not touched contribs, I hope authors can help to fix it, because 
sometimes in case of 'variable assigned but unused' we should not delete 
assignment, but fix hidden bug.

Some files compiles with a few output format switches, ex., -gc3 -gc0:
	bin\b32\harbour.exe -n -iinclude -q0 -w3 -es2 -km  -gc3 -gc0 
-oobj\b32\ utils\hbmake\hbmake.prg
May be it is OK, but I want to say it, because it can hide some bug in 
make files.

I've also noticed, gencc.c is under pure GPL license, but I know you 
    support idea of more free license. You are the only author of this 
     file and I guess you can change licenses text if you want.


Best regards,
Mindaugas

From dbtopas at dbtopas.lt  Thu Dec 18 00:03:07 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Dec 18 00:03:11 2008
Subject: [Harbour] Re: mod_harbour vs apache.prg
In-Reply-To: <20081217192816.GA29643@34-mo7-2.acn.waw.pl>
References: <20081217192816.GA29643@34-mo7-2.acn.waw.pl>
Message-ID: <4949D98B.1020001@dbtopas.lt>

Hi,


Przemyslaw Czerpak wrote:
>>>>   socket.c - alternative lightweight socket library, I do not like
>>>>              hbinet.c a lot. If you want to compile it for Linux,
>>>>              you'll need to adjust includes, but code should be
>>>>              portable;
> 
> I ported it to Linux but it needs also some cleanup to remove MS-Windows
> only code and fix some function parameters which are not POSIX compatible:
> 
> 1. Here is the list of necessary header files:
> 
> ...
> 
> 8. The constant identifiers for shutdown() are different. Instead of SD_BOTH
>    SHUT_RDWR should be used.
> 
> With the above modifications it can be used with current Linux versions.

Thanks, for detailed modification lists. I just want to say, that I had 
no intention to do this code 100% portable. I was not trying to publish 
new socket library, it was just for helping compile uhttpd under 
windows. Many modifications are known to me, but some are new.


> Anyhow there are still some problems which can be exploited by upper level
> .prg code because there are some small differences in socket functions
> behavior on different platform:
> 
> 1. Some functions which returns pointers to some structures/buffers may not
>    be MT safe on some platforms and usually are not. They should be replaced
>    by MT safe functions, f.e. inet_ntoa().

We can implement inet_ntoa() ourselves. I know some issues about 
gethostbyname(). Do you know more winsock MT problems?


> 2. bind(), listen(), close(), shutdown() and some other functions changes
>    errno but may not change h_errno on some systems. This should be
>    respected by SOCKET_ERROR() function so we will have to store errors
>    after function call and probably bound them with socket or at least keep
>    them in thread local area to make error checking MT safe. Here we should
>    probably add error code translation.

I see no problem in having socket structure and related data (like error 
code) in it.


> I like the idea of giving as close as possible access to socket functions
> at .prg level but we should also design a layer which will hide platform
> differences. Each of use has own preferences from C programming. F.e.
> I used to use read() and write() for connected sockets instead of recv()
> send(). In general I used them just like any other descriptors for files,
> pipes, character devices, ... also with select(). But it does not work in
> MS-Windows and I have to accept it and change my preferences if I want
> to create common for all platforms harbour interface.

Perhaps, read(), write() support is the thing we can not implement 
(without our own file handler support under Harbour). winsock2 has new 
"overlapped I/O" support, but WSASend(), WSARecv() is used instead of 
standard ReadFile(), WriteFile().


>> 1) strange, difficult to remember function names, ex., hb_InetPort() 
>> returns port, but I can't remember local or remote. getpeername() is 
>> more clear to me. hb_InetTimeout(), hb_InetTimelimit() - I do not know 
>> that is we difference. hb_InetCount() - number of what? Internet 
>> providers on my computer? I do not find bind() and listen() functions in 
>> the list. hb_InetRecvEndBlock() - what kind of animal is it?
> 
> I only remember that one is inter recv()/send() delay and second is
> used as total timeout limit for whole receive or send operation.
> hb_inet*() functions try to complete this operation until given
> stop condition (f.e. full buffer received or transmitted) so they
> can repeat recv()/send() operations.
> 

> I've just check hbinet.c source code that hb_InetCount() returns number
> of bytes received or sent in given socket in recently executed socket
> read/write hb_inet*() function so seems to be alternate form of extracting
> information which is returned or passed to parameter by reference by these
> functions.

Thanks. I can look to code and find it myself, but the function name 
does not say the meaning of it. That's, what I mean.

> 
> hb_InetRecvEndBlock() read from socket data until it receives one or
> more given terminators. Probably the name is confusing - I also have to
> refresh my mind checking the source code.
> 
> In general such functions are very usefull, f.e. this code in uhttpd2.prg

Nothing against additional functions with proper names. I just want to 
have the basic function with the same names and same (as much as 
possible) functionality!

>       cRequest := ""
>       nLen := 1
>       DO WHILE AT(CR_LF + CR_LF, cRequest) == 0 .AND. nLen > 0
>          nLen := socket_recv(hSocket, @cBuf)
>          cRequest += cBuf
>       ENDDO
> 
> Can be replaced by:
> 
>    cRequest := hb_inetRecvEndBlock( hSocket, CR_LF + CR_LF )
> 
> Please also note that the original version cannot be used for protocols
> which may pass additional data after double CR_LF because it's possible
> that it will be read as part of cRequest and lost. 

Actually, the content of cRequest is not lost. In ParseRequest() I have 
to analyse http header (Content-Length, etc.) and continue receiving 
request of POST method, but I have not implemented this yet.


> I also think that it's not bad to implement some functions
> like hb_inetRecvEndBlock() (though probably using different names ;-)) to
> move some operations which may be very expensive in .prg level to .c code
> so I'm not against them.
> 
> I hope that the new implementation will be much easier to understand.
> Separating Harbour C API from .prg functions, cleaner definition for
> base socket structure and code more closer to original BSD socket
> interface should help.

I do not contradict you at all. Additional C layer is OK, additional 
functions OK, but I want to have bind(), listen(), accept(), connect(), 
recv(), send() (possibly with some prefixes). Nothing against 
send_all(), recv_until(), etc....


Best regards,
Mindaugas
From jose.luis at iaicom.com  Thu Dec 18 03:18:20 2008
From: jose.luis at iaicom.com (=?UTF-8?Q?Jos=C3=A9_Luis_Capel_?=)
Date: Thu Dec 18 03:14:32 2008
Subject: [Harbour] Re: OT: __GETMESSAGE
In-Reply-To: <20081217135331.GA2523@34-mo7-2.acn.waw.pl>
References: <20081217135331.GA2523@34-mo7-2.acn.waw.pl>
Message-ID: <001101c960e9$305f2cc0$911d8640$@luis@iaicom.com>

Hi Przemek,

Many many thanks for your great explanation.

In fact my main purpose was not to 'get into' HVM internals but just that function.  I am working on something related to catch 'ERROR HANDLER' method of a class in C and, thus, I needed __GETMESSAGE functionality.

Again, many thanks.

Jos? Luis Capel


JLC>-----Mensaje original-----
JLC>De: harbour-bounces@harbour-project.org [mailto:harbour-
JLC>bounces@harbour-project.org] En nombre de Przemyslaw Czerpak
JLC>Enviado el: mi?rcoles, 17 de diciembre de 2008 14:54
JLC>Para: Harbour Project Main Developer List.
JLC>Asunto: [Harbour] Re: OT: __GETMESSAGE
JLC>
JLC>Hi Jose,
JLC>
JLC>> Sorry for the off-topic and sorry for my low C level...
JLC>> I saw that __GETMESSAGE in classes.c is defined as:
JLC>> HB_FUNC( __GETMESSAGE )
JLC>> {
JLC>>    hb_retc( hb_stackItem(hb_stackBaseItem()-
JLC>>item.asSymbol.stackstate->lBaseItem )->item.asSymbol.value->szName
JLC>);
JLC>> }
JLC>> Then, in my proyect I want to integrate that piece of code.  I do
JLC>this:
JLC>> #pragma BEGINDUMP
JLC>> #include "hbapi.h"
JLC>> #include "hbstack.h"
JLC>> HB_FUNC ( __MYFUNCTION )
JLC>> {
JLC>>    char * cMessage = (hb_stackItem( hb_stackBaseItem()-
JLC>>item.asSymbol.stackstate->lBaseItem )->item.asSymbol.value->szName)
JLC>;
JLC>>    /* My code will go below */
JLC>> }
JLC>> #pragma ENDDUMP
JLC>> But when compiling this little example I have these messages error:
JLC>> tdatabase.c
JLC>> tdatabase.prg(220) : error C2223: left of '->item' must point to
JLC>struct/union
JLC>> tdatabase.prg(220) : error C2198: 'hb_stackItem' : too few actual
JLC>parameters
JLC>> tdatabase.prg(220) : error C2223: left of '->item' must point to
JLC>struct/union
JLC>> And this is my problem:  I cannot understand these errors and also
JLC>I cannot understand why in classes.c compile OK whilst in my project
JLC>throws these errors.
JLC>> If someone could light me I shall appreciate too much.
JLC>
JLC>In Harbour internal HVM structures are not public. It's done
JLC>intentionally
JLC>because we want to be free in farther Harbour developing and adding
JLC>new
JLC>extensions with problems with backward binary compatibility with 3-rd
JLC>party code. It's very important issue and how big problems it can
JLC>create
JLC>you can see in xHarbour where even simple fix in structures used by
JLC>profiler breaks binary compatibility and people cannot use existing
JLC>FWH
JLC>binaries. Hiding internal structures also resolves the problem with
JLC>alignment so you do not have to ask 3-rd party developers to use
JLC>exactly
JLC>the same alignment as you when they compile code for libraries.
JLC>So developers creating code for Harbour should use only public
JLC>Harbour API
JLC>and accessing item internals like in your above example is bad
JLC>practice
JLC>and we strongly suggest to not make anything like that.
JLC>Anyhow we cannot stop you or anyone else and forbid it. This is only
JLC>our
JLC>suggestion and if you want you can ignore it but in such case you
JLC>will
JLC>have to accept that if we change sth in HVM internals then you will
JLC>have
JLC>to follow this changes and update your code to respect them or at
JLC>least
JLC>recompile it.
JLC>So if your real want to unblock access to HVM internals for your code
JLC>then it's enough to include hbvmint.h before any other harbour header
JLC>files (please do not use hbvmopt.h as Teo suggested because this file
JLC>will force creating separated binaries for MT and ST HVM).
JLC>Please only remember that it will not work for #pragma BEGINDUMP
JLC>because
JLC>in final .c file the sections inside BEGINDUMP/ENDDUMP are included
JLC>_AFTER_
JLC>harbour header files used for generated PCODE so #include "hbvmint.h"
JLC>will
JLC>not be the 1-st included harbour header file. It can be used only in
JLC>separated .c files or you can edit manually .c file generated by
JLC>Harbour
JLC>compiler and add #include "hbvmint.h" at beginning.
JLC>
JLC>But I strongly suggest to use only documented Harbour API and change
JLC>your
JLC>code to work without "hbvmint.h", f.e.;
JLC>
JLC>/********************************/
JLC>proc main()
JLC>   ? __MYFUNCTION()
JLC>return
JLC>
JLC>#pragma begindump
JLC>#include "hbapiitm.h"
JLC>#include "hbstack.h"
JLC>HB_FUNC ( __MYFUNCTION )
JLC>{
JLC>   long lOffset = hb_stackBaseProcOffset( 1 );
JLC>   const char * cMessage = hb_itemGetSymbol( hb_stackItem( lOffset )
JLC>)->szName;
JLC>
JLC>   hb_retc( cMessage );
JLC>}
JLC>#pragma enddump
JLC>/********************************/
JLC>
JLC>If there is sth important for developers what cannot be done using
JLC>public
JLC>harbour API then please inform us. We will add new public functions
JLC>or we
JLC>explain why some internal structures should not be accessible by user
JLC>code.
JLC>But I do no think you will find many of such things. In Harbour only
JLC>HVM lib
JLC>needs it and rest of code (with the exception to emulation of some
JLC>low level
JLC>xHarbour HVM behavior in XHB lib) do not use it at all so it's
JLC>possible to
JLC>write code without it.
JLC>
JLC>best regards,
JLC>Przemek
JLC>_______________________________________________
JLC>Harbour mailing list
JLC>Harbour@harbour-project.org
JLC>http://lists.harbour-project.org/mailman/listinfo/harbour

From M.Horodyski at pzuzycie.com.pl  Thu Dec 18 03:30:38 2008
From: M.Horodyski at pzuzycie.com.pl (Horodyski Marek (PZUZ))
Date: Thu Dec 18 03:30:46 2008
Subject: [Harbour] RE: mod_harbour vs apache.prg
In-Reply-To: <NLB01FEbGJuEzf2HL9O00007ee7@gatein.pzuzycie.com.pl>
Message-ID: <FFAFD6EA63A3FC4784FBDA52BE7A7C9501AC9F0E@PINK.zycie.pzu>

>From: Mindaugas Kavaliauskas <dbtopas@dbtopas.lt>
>Subject: Re: [Harbour] RE: mod_harbour vs apache.prg

...

>>> Anyone interested can download http://www.dbtopas.lt/hrb/uhttpd.zip
>> 
>> I long waited for such solve, but tchis link is not work :

...

>I do not have connection to internet or DNS problems here. 
>Please, try again later.

Now I have it. Thx.

>> Can you enclose this to harbour contrib folder ?
>
>No. It's just test code at this stage.

I do not see how man get http session ( how man link current internet
browser with concrete thread).

Regards,
Marek Horodyski
From lorenzo.fiorini at gmail.com  Thu Dec 18 03:41:35 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Dec 18 03:41:39 2008
Subject: [Harbour] 2008-12-18 05:02 UTC+0200 Mindaugas Kavaliauskas
In-Reply-To: <4949BDFE.70405@dbtopas.lt>
References: <4949BDFE.70405@dbtopas.lt>
Message-ID: <9257026e0812180041t40e99d27i2ec3b205c804c86a@mail.gmail.com>

On Thu, Dec 18, 2008 at 4:05 AM, Mindaugas Kavaliauskas
<dbtopas@dbtopas.lt> wrote:

> 2008-12-18 05:02 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
>  * include/hbclass.ch
> ...
>      of .c header copy-paste from xHarbour's hbstrong.c some time ago.

To get harbour built under Ubuntu 8.10 In hbcomp.h I had to change:
extern void hb_compPCodeTreeOptimizer( HB_COMP_DECL );
to
extern void hb_compPCodeTraceOptimizer( HB_COMP_DECL );

then when I rebuild harbour trunk I get this:

../../hbopt.c: In function 'hb_compPCodeTraceOptimizer':
../../hbopt.c:1440: warning: suggest parentheses around && within ||
../../hbmain.c: In function 'hb_compHasJump':
../../hbmain.c:3103: warning: unused parameter 'pComp'

----------------------------------------

and tons of:

Total memory allocated: 64309 bytes (2588 blocks)
WARNING! Memory allocated but not released: 252 bytes (5 blocks)
harbour.c:319: HB_TR_ERROR Block 1 0x9453848 (size 32)
"\00\00\06\00\00\00\26\00\00\00\26\00\00\00\02\00\00\00\02\00\00\00\02\00\00\00\06\00\00\00\26\00"
harbour.c:319: HB_TR_ERROR Block 2 0x9452798 (size 24)
"\00\00\02\00\00\00\02\00\00\00\02\00\00\00\02\00\00\00\02\00\00\00\02\00"
harbour.c:319: HB_TR_ERROR Block 3 0x9453c90 (size 56)
"\00\00\02\00\00\00\02\00\00\00\02\00\00\00\02\00\00\00\02\00\00\00\02\00\00\00\02\00\00\00\02\00\00\00\02\00\00\00\02\00\00\00\06\00\00\00\26\00\00\00\06\00\00\00\06\00"
harbour.c:319: HB_TR_ERROR Block 4 0x9452c48 (size 24)
"\00\00\02\00\00\00\02\00\00\00\02\00\00\00\02\00\00\00\02\00\00\00\02\00"
harbour.c:319: HB_TR_ERROR Block 5 0x94534b8 (size 116)
"\00\00\06\00\00\00\06\00\00\00\06\00\00\00\06\00\00\00\06\00\00\00\06\00\00\00\02\00\00\00\26\00\00\00\06\00\00\00\06\00\00\00\06\00\00\00\06\00\00\00\06\00\00\00\26\00\00\00\06\00\00\00\06\00\00\00\06\00\00\00\26\00\00\00\0E\00\00\00\06\00\00\00\06\00\00\00\06\00\00\00\06\00\00\00\0E\00\00\00\0E\00\00\00\06\00\00\00\06\00\00\00\06\00\00\00\06\00"

----------------------------------------
Total memory allocated: 26560 bytes (1046 blocks)
WARNING! Memory allocated but not released: 72 bytes (1 blocks)
harbour.c:319: HB_TR_ERROR Block 1 0x88860a0 (size 72)
"\00\00\06\00\00\00\02\00\00\00\02\00\00\00\02\00\00\00\02\00\00\00\02\00\00\00\06\00\00\00\06\00\00\00\26\00\00\00\06\00\00\00\06\00\00\00\06\00\00\00\06\00\00\00\06\00\00\00\06\00\00\00\0A\00\00\00\0A\00\00\00\0A\00"
....

best regards,
Lorenzo
From lorenzo.fiorini at gmail.com  Thu Dec 18 03:51:52 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Thu Dec 18 03:51:55 2008
Subject: [Harbour] 2008-12-18 05:02 UTC+0200 Mindaugas Kavaliauskas
In-Reply-To: <9257026e0812180041t40e99d27i2ec3b205c804c86a@mail.gmail.com>
References: <4949BDFE.70405@dbtopas.lt>
	<9257026e0812180041t40e99d27i2ec3b205c804c86a@mail.gmail.com>
Message-ID: <9257026e0812180051i294fa0abs8f1563cd51aff2b4@mail.gmail.com>

On Thu, Dec 18, 2008 at 9:41 AM, Lorenzo Fiorini
<lorenzo.fiorini@gmail.com> wrote:

> To get harbour built under Ubuntu 8.10 In hbcomp.h I had to change:
> ...

I also found that the line numbers reported are wrong and that this
message is false:

../../tpostgre.prg:698: warning: W0032  Variable 'ATEMP' assigned but
not used in function 'TPQQUERY_REFRESH(0)'

Is it a problem on my side?

best regards,
Lorenzo
From e.m.giordano at emagsoftware.it  Sat Dec 20 06:24:06 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Dec 20 06:24:10 2008
Subject: [Harbour] Test
Message-ID: <B2C77C23EDC8435C97C876176D8D72E5@emag>

Just a test.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic

From e.m.giordano at emagsoftware.it  Sat Dec 20 06:33:08 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Dec 20 06:33:11 2008
Subject: [Harbour] Warnings
Message-ID: <F0576F41E45A456B9E578FBA1D7AD332@emag>

gtwvg:

\wvgclass.prg(328) Warning W0032  Variable 'N' assigned but not used in
function 'WVTDIALOG_CREATE(0)'

\wvgclass.prg(2662) Warning W0032  Variable 'NNEWPOS' assigned but not used
in function 'WVTSCROLLBAR_THUMBPOS(0)'


hbwhat:

Warning W8084 .\whtcomm.c 189: Suggest parentheses to clarify precedence in
function HB_FUN_VWN_CREATEPROGRESSBAR
Warning W8084 .\whtcomm.c 381: Suggest parentheses to clarify precedence in
function HB_FUN_VWN_LISTVIEW_GETFIRSTITEM

Warning W8084 .\whthead.c 351: Suggest parentheses to clarify precedence in
function HB_FUN_VWN_HEADER_EDITFILTER

Warning W8084 .\whtlv.c 33: Suggest parentheses to clarify precedence in
function HB_FUN_VWN_LISTVIEW_ENSUREVISIBLE
Warning W8084 .\whtlv.c 49: Suggest parentheses to clarify precedence in
function HB_FUN_VWN_LISTVIEW_GETNEXTITEM

Warning W8080 .\whtmmcap.c 862: 'dwICValue' is declared but never used

Warning W8084 .\whttab.c 231: Suggest parentheses to clarify precedence in
function HB_FUN_VWN_TABCTRL_SETITEMSIZE
Warning W8084 .\whttab.c 249: Suggest parentheses to clarify precedence in
function HB_FUN_VWN_TABCTRL_SETPADDING
Warning W8084 .\whttab.c 313: Suggest parentheses to clarify precedence in
function HB_FUN_VWN_TABCTRL_HIGHLIGHTITEM

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From druzus at acn.waw.pl  Sat Dec 20 08:26:57 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Dec 20 08:24:21 2008
Subject: [Harbour] Test
In-Reply-To: <B2C77C23EDC8435C97C876176D8D72E5@emag>
References: <B2C77C23EDC8435C97C876176D8D72E5@emag>
Message-ID: <20081220132657.GA10872@34-mo7-2.acn.waw.pl>

On Sat, 20 Dec 2008, Enrico Maria Giordano wrote:
> Just a test.

test too.

best regards,
Przemek
From e.m.giordano at emagsoftware.it  Sat Dec 20 08:26:05 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Dec 20 08:26:09 2008
Subject: [Harbour] Test
References: <B2C77C23EDC8435C97C876176D8D72E5@emag>
	<20081220132657.GA10872@34-mo7-2.acn.waw.pl>
Message-ID: <DCC7AD92F47E48849255E869CFBC6D58@emag>


-----Messaggio Originale----- 
Da: "Przemyslaw Czerpak" <druzus@acn.waw.pl>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 20 dicembre 2008 14.26
Oggetto: Re: [Harbour] Test


> > Just a test.
> 
> test too.

It seems we are on the road again. :-)

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic

From e.m.giordano at emagsoftware.it  Sat Dec 20 08:26:49 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Dec 20 08:26:54 2008
Subject: [Harbour] Test
References: <B2C77C23EDC8435C97C876176D8D72E5@emag><20081220132657.GA10872@34-mo7-2.acn.waw.pl>
	<DCC7AD92F47E48849255E869CFBC6D58@emag>
Message-ID: <71983D24E5AC48D2A60BE55807878131@emag>


-----Messaggio Originale----- 
Da: "Enrico Maria Giordano" <e.m.giordano@emagsoftware.it>
A: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Data invio: sabato 20 dicembre 2008 14.26
Oggetto: Re: [Harbour] Test


> It seems we are on the road again. :-)

Thank you Phil.

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic

From druzus at acn.waw.pl  Sat Dec 20 08:43:35 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Dec 20 08:41:00 2008
Subject: [Harbour] (fwd) 2008-12-19 04:30 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081220134335.GA12459@34-mo7-2.acn.waw.pl>

----- Forwarded message from druzus -----

Subject: 2008-12-19 04:30 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
To: harbour@harbour-project.org
Date: Fri, 19 Dec 2008 04:30:47 +0100
Lines: 59

2008-12-19 04:30 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbmysql/tmysql.prg
  * harbour/contrib/hbpgsql/pgrdd.prg
  * harbour/contrib/hbpgsql/tpostgre.prg
    ! fixed unused variables and meaningless assignment detected by new
      compiler extension - many thanks to Mindaugas for it.

  * harbour/include/hbsetup.h
    + added macros for some function attributes which can be used in
      the future for optimizations

  * harbour/source/rtl/filesys.c
    * formatting

  * harbour/source/rtl/hbtoken.c
    * changed the behavior of " " token delimiter - now it works as
      any other tokens. The old behavior can be still reach using empty
      string "" as token delimiter. "" is not default token.

  * harbour/utils/hbtest/hbtest.prg
    * change error object to text conversion in hbtest so now it detects also
      differences which were ignored by previous version, f.e. OPERATION
      wrongly used instead of FILENAME or wrongly set TRIES flag.

  * harbour/utils/hbtest/hbtest.prg
  * harbour/utils/hbtest/rt_trans.prg
  * harbour/utils/hbtest/rt_math.prg
  * harbour/utils/hbtest/rt_hvm.prg
  * harbour/utils/hbtest/rt_misc.prg
  * harbour/utils/hbtest/rt_hvma.prg
  * harbour/utils/hbtest/rt_class.prg
  * harbour/utils/hbtest/rt_str.prg
  * harbour/utils/hbtest/rt_stra.prg
  * harbour/utils/hbtest/rt_date.prg
  * harbour/utils/hbtest/rt_array.prg
    * updated for extended error messages, tested with Harbour, Cl52/53

  * harbour/include/hbapierr.h
  * harbour/source/rtl/errorapi.c
    + added hb_errRT_FileError() used in file errors
    ! fixed TRIES counter updating when RETRY flag is set - it should
      be done before calling error block not after - detected by new
      hbtest error messages
    ; TOFIX: in practice all errors with RETRY flag generated by
             other hb_errRT_*() functions have to be fixed because
             new error object is created each time and informations
             from previous one are lost, f.e. TRIES counter or CARGO
             value set by user. They should be reimplemented in similar
             way to hb_errRT_FileError()

  * harbour/source/vm/memvars.c
  * harbour/source/rtl/copyfile.c
  * harbour/source/vm/set.c
    ! fixed wrong error messages detected by new hbtest in _SET_PRINTFILE,
      _SET_ALTFILE and _SET_EXTRAFILE
    ; TOCHECK - Does CA-Cl*pper respect _SET_DEFAULT in above SETs?

best regards
Przemek

----- End forwarded message -----
From druzus at acn.waw.pl  Sat Dec 20 08:43:45 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Dec 20 08:41:09 2008
Subject: [Harbour] (fwd) (fwd) 2008-12-19 04:30 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081220134345.GB12459@34-mo7-2.acn.waw.pl>

----- Forwarded message from Przemyslaw Czerpak <druzus@acn.waw.pl> -----

From: Przemyslaw Czerpak <druzus@acn.waw.pl>
Subject: (fwd) 2008-12-19 04:30 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Date: Sat, 20 Dec 2008 14:43:35 +0100
Lines: 69

----- Forwarded message from druzus -----

Subject: 2008-12-19 04:30 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
To: harbour@harbour-project.org
Date: Fri, 19 Dec 2008 04:30:47 +0100
Lines: 59

2008-12-19 04:30 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbmysql/tmysql.prg
  * harbour/contrib/hbpgsql/pgrdd.prg
  * harbour/contrib/hbpgsql/tpostgre.prg
    ! fixed unused variables and meaningless assignment detected by new
      compiler extension - many thanks to Mindaugas for it.

  * harbour/include/hbsetup.h
    + added macros for some function attributes which can be used in
      the future for optimizations

  * harbour/source/rtl/filesys.c
    * formatting

  * harbour/source/rtl/hbtoken.c
    * changed the behavior of " " token delimiter - now it works as
      any other tokens. The old behavior can be still reach using empty
      string "" as token delimiter. "" is not default token.

  * harbour/utils/hbtest/hbtest.prg
    * change error object to text conversion in hbtest so now it detects also
      differences which were ignored by previous version, f.e. OPERATION
      wrongly used instead of FILENAME or wrongly set TRIES flag.

  * harbour/utils/hbtest/hbtest.prg
  * harbour/utils/hbtest/rt_trans.prg
  * harbour/utils/hbtest/rt_math.prg
  * harbour/utils/hbtest/rt_hvm.prg
  * harbour/utils/hbtest/rt_misc.prg
  * harbour/utils/hbtest/rt_hvma.prg
  * harbour/utils/hbtest/rt_class.prg
  * harbour/utils/hbtest/rt_str.prg
  * harbour/utils/hbtest/rt_stra.prg
  * harbour/utils/hbtest/rt_date.prg
  * harbour/utils/hbtest/rt_array.prg
    * updated for extended error messages, tested with Harbour, Cl52/53

  * harbour/include/hbapierr.h
  * harbour/source/rtl/errorapi.c
    + added hb_errRT_FileError() used in file errors
    ! fixed TRIES counter updating when RETRY flag is set - it should
      be done before calling error block not after - detected by new
      hbtest error messages
    ; TOFIX: in practice all errors with RETRY flag generated by
             other hb_errRT_*() functions have to be fixed because
             new error object is created each time and informations
             from previous one are lost, f.e. TRIES counter or CARGO
             value set by user. They should be reimplemented in similar
             way to hb_errRT_FileError()

  * harbour/source/vm/memvars.c
  * harbour/source/rtl/copyfile.c
  * harbour/source/vm/set.c
    ! fixed wrong error messages detected by new hbtest in _SET_PRINTFILE,
      _SET_ALTFILE and _SET_EXTRAFILE
    ; TOCHECK - Does CA-Cl*pper respect _SET_DEFAULT in above SETs?

best regards
Przemek

----- End forwarded message -----

----- End forwarded message -----
From druzus at acn.waw.pl  Sat Dec 20 08:44:10 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Dec 20 08:41:35 2008
Subject: [Harbour] (fwd) 2008-12-19 06:55 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081220134410.GC12459@34-mo7-2.acn.waw.pl>

----- Forwarded message from druzus -----

Subject: 2008-12-19 06:55 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
To: harbour@harbour-project.org
Date: Fri, 19 Dec 2008 06:55:15 +0100
Lines: 8

2008-12-19 06:55 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/utils/hbtest/rt_hvm.prg
  * harbour/utils/hbtest/rt_hvma.prg
    * updated error messages for compilation with -z (no shortcut
      optimization)

best regards
Przemek

----- End forwarded message -----
From druzus at acn.waw.pl  Sat Dec 20 08:44:23 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Dec 20 08:41:47 2008
Subject: [Harbour] (fwd) 2008-12-19 14:15 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081220134423.GD12459@34-mo7-2.acn.waw.pl>

----- Forwarded message from druzus -----

Subject: 2008-12-19 14:15 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
To: harbour@harbour-project.org
Date: Fri, 19 Dec 2008 14:16:03 +0100
Lines: 13

2008-12-19 14:15 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/pp/hbpp.c
    * accept empty $Id keywords in ChangeLog file. It allows to compile
      Harbour from source taken directly from SVN as tarball without
      keyword expanding, f.e. by:
         http://harbour-project.svn.sourceforge.net/viewvc/
              harbour-project/trunk/harbour.tar.gz?view=tar
      In such case revision number is not unknown and set arbitrary to -1
    * change -q parameter to accept 0, 1 and 2 levels to disable standard
      messages and also warning/error ones

best regards
Przemek

----- End forwarded message -----
From druzus at acn.waw.pl  Sat Dec 20 08:44:37 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Dec 20 08:42:02 2008
Subject: [Harbour] (fwd) 2008-12-19 18:25 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081220134437.GE12459@34-mo7-2.acn.waw.pl>

----- Forwarded message from druzus -----

Subject: 2008-12-19 18:25 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
To: harbour@harbour-project.org
Date: Fri, 19 Dec 2008 18:25:31 +0100
Lines: 6

2008-12-19 18:25 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/compiler/hbopt.c
    * pacified GCC warning

best regards
Przemek

----- End forwarded message -----
From druzus at acn.waw.pl  Sat Dec 20 08:44:51 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Dec 20 08:42:15 2008
Subject: [Harbour] (fwd) 2008-12-19 19:46 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081220134451.GF12459@34-mo7-2.acn.waw.pl>

----- Forwarded message from druzus -----

Subject: 2008-12-19 19:46 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
To: harbour@harbour-project.org
Date: Fri, 19 Dec 2008 19:47:14 +0100
Lines: 16

2008-12-19 19:46 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rtl/filesys.c
    * do not respect _SET_PATH when hb_{file|fs}ExtOpen() is called
      with create file attributes - Clipper compatibility.

  * harbour/source/vm/set.c
    * recognize files starting with "/dev/" as devices in *nixes
    * check if given file name is a name of existing device (character,
      block, fifo, socket) in *nix builds
    * ignore _SET_DEFAULT and default extension in _SET_PRINTFILE,
      _SET_ALTFILE and _SET_EXTRAFILE when given file name is device name.
      In DOS/Windows/OS2 builds devices are recognized by name:
      "PRN", "CON", "LPT[1-3]", "COM[1-9]"

best regards
Przemek

----- End forwarded message -----
From druzus at acn.waw.pl  Sat Dec 20 08:45:11 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Dec 20 08:42:38 2008
Subject: [Harbour] (fwd) 2008-12-19 20:26 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081220134511.GG12459@34-mo7-2.acn.waw.pl>

----- Forwarded message from druzus -----

Subject: 2008-12-19 20:26 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
To: harbour@harbour-project.org
Date: Fri, 19 Dec 2008 20:26:29 +0100
Lines: 8

2008-12-19 20:26 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/vm/set.c
    ! fixed long existing bug in _SET_PRINTFILE, _SET_DEFAULT, _SET_EXTRAFILE
      It was possible to use closed handle for the above file inside error
      handler executed during their reopening.

best regards
Przemek

----- End forwarded message -----
From druzus at acn.waw.pl  Sat Dec 20 08:50:04 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Dec 20 08:47:27 2008
Subject: [Harbour] Test
In-Reply-To: <71983D24E5AC48D2A60BE55807878131@emag>
References: <DCC7AD92F47E48849255E869CFBC6D58@emag>
	<71983D24E5AC48D2A60BE55807878131@emag>
Message-ID: <20081220135004.GA14390@34-mo7-2.acn.waw.pl>

On Sat, 20 Dec 2008, Enrico Maria Giordano wrote:
>> It seems we are on the road again. :-)
> Thank you Phil.

I also want to thank.
Now seems to work and it's working fast :-)
Anyhow most of messages sent to the list in last weeks I can see
only in Harbour mail list archive. I'll try to answer for few of
them coping their body but if it's sth important I'll miss then
please resend them again.

best regards,
Przemek
From toninhofwi at yahoo.com.br  Sat Dec 20 11:12:46 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sat Dec 20 11:12:52 2008
Subject: [Harbour] 2008-12-18 05:02 UTC+0200 Mindaugas Kavaliauskas
In-Reply-To: <4949BDFE.70405@dbtopas.lt>
References: <4949BDFE.70405@dbtopas.lt>
Message-ID: <cb6qk498n50hq4oi1ij336k7c9i0kfj1l4@4ax.com>

>     + added recursive pcode tree tracer. It is capable to generate new
>       warning: Variable %s is assigned, but not used.

Hi Mindaugas, 

I have a question please: In contrib\hbct\getinput.prg, we have:

LOCAL GetList := {}

And I receive a warning Variable 'GETLIST is assigned, but not used,
but if I remove it I receive Warning W0001  Ambiguous reference
'GETLIST'

What is the way to fix it please?


Thanks and best regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From toninhofwi at yahoo.com.br  Sat Dec 20 11:14:58 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Sat Dec 20 11:15:02 2008
Subject: [Harbour] 2008-12-18 05:02 UTC+0200 Mindaugas Kavaliauskas
In-Reply-To: <cb6qk498n50hq4oi1ij336k7c9i0kfj1l4@4ax.com>
References: <4949BDFE.70405@dbtopas.lt>
	<cb6qk498n50hq4oi1ij336k7c9i0kfj1l4@4ax.com>
Message-ID: <fe6qk4lv12j15pdu9m7roh65hd487e0f48@4ax.com>

Hi ppl

This was fixed, thanks, and now, mailing is working fine and faster,
thanks,

Regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From teo at windtelsoft.com  Sat Dec 20 09:40:34 2008
From: teo at windtelsoft.com (Teo Fonrouge)
Date: Sat Dec 20 11:15:44 2008
Subject: [Harbour] 2008-12-18 05:02 UTC+0200 Mindaugas Kavaliauskas
In-Reply-To: <4949BDFE.70405@dbtopas.lt>
References: <4949BDFE.70405@dbtopas.lt>
Message-ID: <200812200840.34921.teo@windtelsoft.com>

On Wednesday 17 December 2008 21:05:34 Mindaugas Kavaliauskas wrote:
> 2008-12-18 05:02 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
>    * include/hbclass.ch
>    * include/hbcomp.ch
>    * include/hberrors.h
>    * include/hbgenerr.c
>    * include/hbmain.c
>    * include/hbopt.c
>      + PCode optimizations:
>          1) Self := QSELF(), Self:method -> QSELF():method
>          2) Declared, but unused variables are removed from code
>        These optimizations are enabled if jump optimizations are enabled.
>
>      + added recursive pcode tree tracer. It is capable to generate new
>        warning: Variable %s is assigned, but not used.
>        Warning is not generated in these cases:
>          1) unoptimal Self := QSELF() pcode [generated by preprocessor
> rules]
>          2) if variable name starts with '_nowarn_'. This allows to
>             suppress warning in case unoptimal pcode is generated by
>             preprocessor rules
>          3) assigned value is NIL. This let us force garbage collection
>             using oVar := NIL
>        Warning has warning level 3.
>        ; NOTE: if you are using -w3 -es2 in makefiles, you'll need to
> fix your
>                redundant code to compile the project

[snip]

Nice addition, thanks Mindaugas.

One thing that I've noticed is showed in the following case:

/----- start prg code -----/

FUNCTION Main
? LOCAL s := "Hello"
? LOCAL GetList := {}

? @ 0,0 GET s
? READ

RETURN NIL

/----- end prg code -----/

The Harbour compiler will complain (if -w3 enabled) because the READ command 
is translated to:

? ReadModal( GetList, NIL,,,,, ) ; GetList := {}

and it catches (correctly) the last "GetList := {}" as "assigned but not 
used".

To solve this I think that we need to have "ASize( GetList, 0 )" instead 
of "GetList := {}".


best regards,

Teo
From info at fsgiudice.com  Sat Dec 20 11:37:32 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Sat Dec 20 11:37:37 2008
Subject: [Harbour] Test
In-Reply-To: <20081220135004.GA14390@34-mo7-2.acn.waw.pl>
References: <DCC7AD92F47E48849255E869CFBC6D58@emag>	<71983D24E5AC48D2A60BE55807878131@emag>
	<20081220135004.GA14390@34-mo7-2.acn.waw.pl>
Message-ID: <494D1F4C.1010302@fsgiudice.com>



Il 20/12/2008 14.50, Przemyslaw Czerpak ha scritto:
> On Sat, 20 Dec 2008, Enrico Maria Giordano wrote:
>>> It seems we are on the road again. :-)
>> Thank you Phil.
> 
> I also want to thank.

+1

Best Regards

Francesco


From philb at philb.us  Mon Dec 22 00:01:22 2008
From: philb at philb.us (Phil Barnett)
Date: Mon Dec 22 00:01:26 2008
Subject: [Harbour] test
Message-ID: <200812220001.22539.philb@philb.us>

test
-- 
"Ninety percent of politicians give the other 10 percent a bad name." -- Henry 
Kissinger
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081222/3e791f06/attachment.html
From soporte at dsgsoftware.com  Mon Dec 22 03:15:23 2008
From: soporte at dsgsoftware.com (=?utf-8?Q?Juan_G=C3=A1lvez?=)
Date: Mon Dec 22 03:20:04 2008
Subject: [Harbour] (fwd) 2008-12-19 04:30 UTC+0100 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20081220134335.GA12459@34-mo7-2.acn.waw.pl>
Message-ID: <006801c9640e$2641b550$6c01a8c0@PcJuanxp>

Hi Przemek,

> 
>  * harbour/source/rtl/hbtoken.c
>    * changed the behavior of " " token delimiter - now it works as
>      any other tokens. The old behavior can be still reach using empty
>      string "" as token delimiter. "" is not default token.
>

Many thanks and specially for this.

Best regards
Juan


From lorenzo.fiorini at gmail.com  Mon Dec 22 04:55:43 2008
From: lorenzo.fiorini at gmail.com (Lorenzo Fiorini)
Date: Mon Dec 22 04:55:46 2008
Subject: [Harbour] test please ignore
Message-ID: <9257026e0812220155q11caa386h1c5d0d1112e4b2cf@mail.gmail.com>

just a test
From druzus at acn.waw.pl  Mon Dec 22 09:25:01 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Dec 22 09:22:23 2008
Subject: [Harbour] Mail list problem
Message-ID: <20081222142501.GA22463@34-mo7-2.acn.waw.pl>

Hi Phil,

Again I can see new messages on harbour mail list archive but I do not
receive them.
Can you check what's happen?

best regards,
Przemek
From mbelgrano at deltain.it  Mon Dec 22 09:25:08 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Mon Dec 22 09:25:12 2008
Subject: [Harbour] Merry Christmas
Message-ID: <609353e70812220625k21ffdd62r64a53243187412e7@mail.gmail.com>

*Merry* Christmas to the strong Harbour Comunity

                MM          MM
                MMM        MMM
                MMMM      MMMM   eeee  rr rrr  rr rrr yy      yy
                MM MM    MM MM  ee  ee rrr  rr rrr  rr yy    yy
                MM  MM  MM  MM eeeeee  rr      rr       yy  yy
                MM   MMMM   MM  ee     rr      rr        yyyy
                MM    MM    MM   eeee  rr      rr         yy
                                                         yy
                                      __/\__        yy  yy
                                      \ ** /         yyyy
                                      /_**_\
                                      / \/ \
                                    // ~  $ \\
                                  /____________\
                                 //  *  %    \\~
                               ~/ /  @   +  #  \ \
                              /__/______________\__\~
                             * /  /   +        \  \ *
                            /%  /$ M E R R Y * \ # \
                          ~/____/____o___________\____\
                          * /  ^/            @  \    \ *
                          / %  /C H R I S T M A S\   # \
                       o/~    /o          #   %   \o    ~\
                     /_____/_______________________\______\
                     *   o   *    o   | * |  o   *    o   *
                                      |   |
                                      |___|

        CCC   hh              oo          tt
      CC   CC hh                          tt
     CC       hh hhh  rr rrr  ii   ssss tttttt  mm mm  mm      aaa    ssss
     CC       hhh  hh rrr  rr ii  ss      tt    mmm  mm  mm  aa  aa  ss
     CC       hh   hh rr      ii   sss    tt    mm   mm  mm aa   aa   sss
      CC   CC hh   hh rr      ii     ss   tt tt mm       mm aa   aa     ss
        CCC   hh   hh rr       ii ssss     tt   mm       mm  aaaa aa ssss



-- 
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081222/88badd1f/attachment.html
From druzus at acn.waw.pl  Mon Dec 22 10:31:18 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Dec 22 10:28:38 2008
Subject: [Harbour] 2008-12-22 16:30 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081222153118.GA32330@34-mo7-2.acn.waw.pl>

2008-12-22 16:30 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/ChangeLog
    ! cleaned some typos in my recent ChangeLog entries

  * harbour/include/hbvm.h
  * harbour/include/hbvmpub.h
  * harbour/include/hbsetup.h
  * harbour/include/hbapi.h
  * harbour/include/hbapierr.h
    * added some function attributes which can improve code optimization
      or introduce some additional warnings.
      Now it works only in GCC builds.

  * harbour/source/vm/hvm.c
    ! fixed missing double decimal places initialization in some number
      negating
    ! fixed setting number of decimal places in plus and minus operations
      if integer overflow forces conversion to double item
    * some minor optimizations

  * harbour/source/rtl/rat.c
    * formatting

best regards
Przemek
From toninhofwi at yahoo.com.br  Mon Dec 22 11:01:23 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Mon Dec 22 11:01:27 2008
Subject: [Harbour] About recursive pcode tree tracer
Message-ID: <o0evk41dapka75kuuik44rpp1spnjfn36b@4ax.com>


Hi ppl,

First of all, thanks Mindaugas for this implementation. I found a lot
of trash in my code using it.

I see that in some circunstancies we can have:

AEval( ::aGroups, { |val,nElem| ::StartGroup(nElem) })

<val> is not needed, but I need declare any var because I need second
parameter <nElem>, and compiler always catch it as an error.

Any hint to fix it please?

TIA and best regards,

Toninho.


		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
 

From druzus at acn.waw.pl  Mon Dec 22 11:45:42 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Dec 22 11:43:00 2008
Subject: [Harbour] Re: About recursive pcode tree tracer
Message-ID: <20081222164542.GA2153@34-mo7-2.acn.waw.pl>

Hi Toninho,

> First of all, thanks Mindaugas for this implementation. I found a lot
> of trash in my code using it.

Please also note that it also gives very nice speed improvement eliminating
unnecessary local frames if all local variables are removed after detecting
that they are unused and replace readonly local variables used to keep
QSelf() value by direct QSelf() usage. So the code like:
   method mth() class cls
      return ::var1 + ::var2
is translated by preprocessor (and partially by lexer) to:
   static function cls_mth()
      local self := QSelf()
      return self:var1 + self:var2
Now it's farther optimized and if SELF local variable is not assigned or
used inside codeblocks created in given function what forces detaching
then it's reduced to:
   static function cls_mth()
      return QSelf():var1 + QSelf():var2
What gives less and faster PCODEs. QSelf()) is not real function call
but it's directly translated to single PCODE: HB_P_PUSHSELF.
I made some speed tests and for the above code:
   method mth() class cls
      return ::var1 + ::var2
the speed is increased nearly 20%.
Very good job. Thank to Mindaugas.

> I see that in some circunstancies we can have:
> AEval( ::aGroups, { |val,nElem| ::StartGroup(nElem) })
> <val> is not needed, but I need declare any var because I need second
> parameter <nElem>, and compiler always catch it as an error.
> Any hint to fix it please?

You can use HB_SYMBOL_UNUSED() to pacify such warnings, f.e.:
   AEval( ::aGroups, { |val,nElem| HB_SYMBOL_UNUSED(val), ::StartGroup(nElem) })
In Harbour HB_SYMBOL_UNUSED(var) does not generate any PCODEs and it's
fully reduced instruction which informs compiler that variable or it's
value is used. We can also change a little bit the code which marks variables
as used and in codeblocks if n-th variable is used then mark also variables
from 1 to n-1 but it will also hide real unused variables which should be
cleaned so it's not perfect solution.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Dec 22 12:14:35 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Dec 22 12:11:54 2008
Subject: [Harbour] File-wide THREAD STATICS : behaving differently
Message-ID: <20081222171435.GA32181@34-mo7-2.acn.waw.pl>

Hi Pritpal and Francesco,

> > It could be useful in both way IMO, so it could be interesting if it can 
> > be used as auto-cloned in standard way and work referenced if BYREF (or 
> > similar name) option is defined.
> > 
> > thread BYREF static aFld := { { '', 0 } }
> I support Francesco's viewpoint.
> 
> THREAD STATIC should alway create always new copy.
> BYREF THREAD STATIC should behave as current.

Probably you misunderstood me. I was asking only about preferred default
behavior. It doesn't matter what we will chose programmer can use thread
static variables in both way. It's enough to add few lines to initialize
thread static variable. Important is only the fact that we have thread
static variables. F.e. if I want to use separated arrays as s_var initializer
then I can make:

   #define ARRAY_INIT   {1,2,3}
   thread static s_var

   function thFunc()
      if s_var := NIL
         s_var := ARRAY_INIT
      endif
      [...]
      return nil

If I want to use shared array then I can make:

   #define ARRAY_INIT   {1,2,3}
   static s_var_init := ARRAY_INIT
   thread static s_var
   function thFunc()
      if s_var := NIL
         s_var := s_var_init
      endif
      [...]
      return nil

So both versions are available now. I do not think that adding new syntax
for constructions which are easy available now for .prg code is good idea.
We will end with many different alternative syntax for some very simple
jobs. Usually if I'm adding some extensions then it's done to resolve
some problems which cannot be easy addressed with existing functionality
or solutions will cause serious performance reduction.
BTW BYREF is also not a good choice because it's not real by reference like
for variables but standard arrays and hashes behavior.

> I have a very large mini ERP solution adoptable to 
> different industries. I get it working on Xbase++ few years back 
> with MT modal. Though I devised the method to keep arrays 
> different threads but then those consumed a lot of memory 
> as ThreadID() ever points to incremented number ( perfectly all right )
> and arry references kept in static array referenced by ThreadID() could 
> never be released at the termination of a thread. 
> So I tried with THREAD STATIC approach and come up with above issue.
> As THREAD STATICS are bound to be released automatically once 
> the thread is terminated, I would like to implement this as I assume it
> should.
> Though I can reuse Xbase++ methodology which I do not want to.

You do not have to. See above. Using current syntax you can use what you
want. I do not see any showstoppers here.
I only wanted to ask about preferred default behavior. If you think that
current one can confuse users then I can change it and in such case we
will document that thread static variables are initialized from scratch
when each thread access them 1-st time instead of coping the value used
for startup initialization.

best regards,
Przemek
From jarabal at gmail.com  Mon Dec 22 13:15:35 2008
From: jarabal at gmail.com (Xavi)
Date: Mon Dec 22 13:16:12 2008
Subject: [Harbour] Test
In-Reply-To: <B2C77C23EDC8435C97C876176D8D72E5@emag>
References: <B2C77C23EDC8435C97C876176D8D72E5@emag>
Message-ID: <494FD947.1080206@gmail.com>

Just a test also.

From abe.buch at att.net  Mon Dec 22 16:52:18 2008
From: abe.buch at att.net (Abeb)
Date: Mon Dec 22 16:52:22 2008
Subject: [Harbour] StackOverflow in MemoEdit
Message-ID: <21135626.post@talk.nabble.com>


Try to type some text, press esc , answer no to save

--------------------------------------------------

#INCLUDE "INKEY.CH"
PROC TEST()
LOCAL MBUFFER  := ""

PRIVATE RETVAL := 0
PRIVATE ALTERED := .F.
PRIVATE INS_MODE :=  .T.


SETMODE(25,80)
@ MAXROW()-1,0 TO MAXROW()-1 ,MAXCOL() DOUB
@ MAXROW()  ,0 SAY " ?ESC? " 
MBUFFER  :=  MEMOEDIT( MBUFFER , 0,0,MAXROW()-2, MAXCOL() ,
.Y.,"REMARKFUNC", MAXCOL() )

? "I'M HERE"

IF RETVAL = K_CTRL_W
	? "SAVEING..."
ENDIF

RETURN
***************

FUNC REMARKFUNC (MODE, LINE, COL)
LOCAL MTEMP
LOCAL KP

DO CASE
	CASE MODE = 3
		IF  .NOT. INS_MODE
			RETVAL :=  22
		ENDIF
		@ MAXROW(), 30 SAY IF(INS_MODE, "INSERT", "      ")
		RETVAL := 0

	CASE MODE = 0
		* IDLE
		@ MAXROW(),40 SAY "LINE: " + PAD(LTRIM(STR(LINE)), 4)
		@ MAXROW(),52 SAY "COL: " + PAD(LTRIM(STR(COL)), 3)

	OTHERWISE
		* KEYSTROKE EXCEPTION
		KP = LASTKEY()

		* SAVE VALUES TO POSSIBLY RESUME EDIT
		IF MODE=2
			ALTERED   :=  .T.
		ENDIF

		DO CASE
			CASE KP = K_CTRL_W
				* ^W..IGNORE (DISABLE)
				RETVAL  := 32

			CASE KP = 301 .OR. KP = 27
				* ESC/ALT-X..EXIT
				IF .NOT. ALTERED
					RETVAL  := 27
				ELSE
					MTEMP  := ALERT("SAVE EDITING",{"YES","NO"})

					DO CASE

						CASE MTEMP = 2
							RETVAL  :=  27
						CASE MTEMP = 0
							RETVAL  := 32
						CASE MTEMP  = 1
							? "SAVEING..."
							RETVAL  := K_CTRL_W
					ENDCASE
				ENDIF

			CASE (KP = 279 .OR. KP = 22)
				* ^V/INS/ALT-I..TOGGLE INSERT MODE
				INS_MODE = .NOT. INS_MODE
				@ MAXROW(), 30 SAY IF(INS_MODE, "INSERT", "      ")
				RETVAL  := 22

		ENDCASE
ENDCASE
RETURN RETVAL

-- 
View this message in context: http://www.nabble.com/StackOverflow-in-MemoEdit-tp21135626p21135626.html
Sent from the Harbour - Dev mailing list archive at Nabble.com.

From druzus at acn.waw.pl  Mon Dec 22 21:11:39 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Dec 22 21:08:57 2008
Subject: [Harbour] 2008-12-23 03:11 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081223021139.GA13626@34-mo7-2.acn.waw.pl>

2008-12-23 03:11 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/ChangeLog
  * harbour/contrib/rddado/adordd.ch
  * harbour/contrib/hbwin/hbwin.h
    * converted TABs to SPACEs

  * harbour/include/hbapicdp.h
    * formatting

  * harbour/config/rules.cf
  * harbour/config/w32/mingwce.cf
  * harbour/config/w32/poccce.cf
  * harbour/config/w32/msvcce.cf
    ! fixed repeated HB_FLAGS

best regards
Przemek
From druzus at acn.waw.pl  Tue Dec 23 09:45:21 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Dec 23 09:42:38 2008
Subject: [Harbour] 2008-12-23 15:45 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081223144521.GA27198@34-mo7-2.acn.waw.pl>

2008-12-23 15:45 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbsetup.h
    * temporary disabled noreturn function attributes - we have some
      code which puts references to some functions after hb_errInternal()
      call to force link bindings which is fully optimized if hb_errInternal
      is declared with noreturn attribute so we cannot use it as long as we
      will not clean them.

  * harbour/tests/speedtst.prg
    * build default xHarbour binaries without support.
      xHarbour needs separated version for MT and ST mode
      because standard MT functions are not available in
      ST libraries.

best regards
Przemek
From toninhofwi at yahoo.com.br  Tue Dec 23 12:13:33 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Dec 23 11:13:15 2008
Subject: [Harbour] Re: About recursive pcode tree tracer
Message-ID: <ep62l4hk0tmrvg87b15peaqgrjock9gumh@4ax.com>

>You can use HB_SYMBOL_UNUSED() to pacify such warnings, f.e.:
>   AEval( ::aGroups, { |val,nElem| HB_SYMBOL_UNUSED(val), ::StartGroup(nElem) })

Hi Przemek,

Thanks. It works perfectly;

BTW I can?t receive any mail from dev mailing list. Is it dead again? 


Regards,

Toninho.

__________________________________________________
Fa?a liga??es para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From druzus at acn.waw.pl  Tue Dec 23 15:46:33 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Dec 23 15:43:49 2008
Subject: [Harbour] Re: About recursive pcode tree tracer
Message-ID: <20081223204633.GA28050@34-mo7-2.acn.waw.pl>

Hi Toninho,

> BTW I can?t receive any mail from dev mailing list. Is it dead again? 

It looks so. I haven't received any message in last few days
though I can see some messages like this one on Harbour-devel
list so I'm answering coping its body.

Phil, Can you make sth with it?
It's a real problem in last weeks.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Dec 23 18:04:59 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Dec 23 18:02:15 2008
Subject: [Harbour] 2008-12-24 00:04 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081223230459.GA12967@34-mo7-2.acn.waw.pl>

2008-12-24 00:04 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/common/expropt1.c
  * harbour/source/common/expropt2.c
    ! fixed wrongly modified expression during optimization for
      ( <numConst> / 0.0 )
    * cleaned bDec/bWidth updating in compile time optimizations

  * harbour/tests/speedtst.prg
    ! fixed possible race condition in initialization
    + added set workarea private for xHarbour builds - thanks to Phil

  * harbour/doc/cmpopt.txt
    * small cleanup

  * harbour/include/hbvmpub.h
  * harbour/source/vm/hvm.c
    % some optimizations mostly for MT mode or compilers which do
      not support function autoinline optimization

best regards
Przemek
From dbtopas at dbtopas.lt  Tue Dec 23 20:23:58 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Dec 23 20:23:49 2008
Subject: [Harbour] ChangeLog 2008-12-24 03:23 UTC+0200 Mindaugas Kavaliauskas
Message-ID: <49518F2E.2050606@dbtopas.lt>

2008-12-24 03:23 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * include/hberrors.h
   * source/compiler/hbgenerr.c
   * source/compiler/hbopt.c
     + implemented warning: Variable '%s' is never assigned in function 
%s(%d).
       This variable can be replaced by value NIL

   * source/rtl/treport.prg
     % removed never assigned variable

From dbtopas at dbtopas.lt  Tue Dec 23 21:28:19 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Dec 23 21:28:09 2008
Subject: [Harbour] Some more pcode hacking
Message-ID: <49519E43.2080007@dbtopas.lt>

Hi,


I've installed VirtualBox and a new openSUSE 11.1 inside it last 
weekend. My first Harbour SVN Linux compile was successful! I've just 
needed to find out that I need to install (and how can I do this) 
packages: subversion, ncurses-devel, xorg-x11-devel. ./make_gnu.sh >& 
make_gnu.log do the job. The only thing I was unable to do in Linux is 
to create shortcut on desktop. I've spent more than a hour on Gnome 
desktop, trying to use GUI "Create Launcher..." and command line "ln -s 
..." without success.

Well, I forgot the main idea... :) All these VirtualBox virtualizations 
made me think about possibility to virtualize pcode evaluation. By 
saying "virtualize" I mean some kind of safe pcode evaluation, which 
could not crash existing virtual machine and its software. Perhaps the 
correct way to do it is running one more virtual machine with a copy of 
global symbols, etc., but I'm not smart enough to do implementation of 
this idea. So, I've started to go another way: pcode analysis and fixup. 
This approach is a little similar to just-in-time re-compilation used in 
virtualization.

New "virtualized" pcode could be supplied in .hrb format. "Virtualizer" 
analyses this pcode and asks parent process, if some functions can be 
called from new code (ex., perhaps we are going to forbid __QUIT() 
call). The choices are: allow (pcode is not changed), callback (each 
query is redirected to callback function and result is returned to 
virtualized code), and forbid (virtualizer does not execute pcode at 
all). The same approach can be used to control access of memvars, fields 
of database aliases.

I've spend a night to write test code, but this is only very alpha stage 
of implementation: codeblocks are not analysed; memvar, alias are not 
analysed; code is not tested on .hrb with branching instructions, etc. I 
wanted to finish implementation before sending code to mailing list, but 
I feel I have more important jobs. So, here is very alpha test version: 
http://www.dbtopas.lt/hrb/sanitize.zip
I think it is not the code to occupy name "virtualize", so I've used 
"sanitize" instead.


Best regards,
Mindaugas

P.S. for those who want to see result without trying to compile:
Filter {2, "TEST1", 2}
Filter {1, "LEFT", 1}
Filter {1, "SUBSTR", 2}
Filter {1, "AAA", 1}
.hrb is allowed
Callback {1, @LEFT(), NIL, "Hello, secure World!", 5}
Callback {1, @AAA(), NIL}
Result: HELLO, SECURE WORLD!, secure World! (not exists)


From druzus at acn.waw.pl  Tue Dec 23 22:56:16 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Dec 23 22:53:34 2008
Subject: [Harbour] 2008-12-24 04:56 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081224035616.GA2772@34-mo7-2.acn.waw.pl>

2008-12-24 04:56 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/rddado/adordd.prg
    * removed cSupperRDD never assigned local variable detected by new
      compiler logic added by Mindaugas.

best regards
Przemek
From niki at synel.co.il  Wed Dec 24 02:08:10 2008
From: niki at synel.co.il (Chen Kedem)
Date: Wed Dec 24 02:10:28 2008
Subject: [Harbour] Test - not getting mails
Message-ID: <1A07FEDC778C3E4AA417F089511F859C03333A4281@Mail-yoq.SYNEL-COMPANY.LTD>

Hmm, I had got Digest Vol 26 Issue 36 on Thu 2008-12-18, then Issues 38+39 on 2008-12-20
(never got Issue 37), and nothing since. Testing to see if I am still on the list.

Wish you all Happy Hanuka, Merry Christmas and a very Happy Holidays !!


  Chen.
From druzus at acn.waw.pl  Wed Dec 24 03:42:33 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Dec 24 03:39:49 2008
Subject: [Harbour] Re: Test - not getting mails
Message-ID: <20081224084233.GA26721@34-mo7-2.acn.waw.pl>

Hi Chen,

> Hmm, I had got Digest Vol 26 Issue 36 on Thu 2008-12-18, then Issues 38+39 on 2008-12-20
> (never got Issue 37), and nothing since. Testing to see if I am still on the list.

It does not works for me and as I can see for most of other users.
I can see your message only on:
   http://lists.harbour-project.org/pipermail/harbour/

Phil, help ;-)

I wish all Harbour developers and users Marry Christmas and Happy New Year.
I'll commit small gift ;-) in a while.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Dec 24 03:45:57 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Dec 24 03:43:12 2008
Subject: [Harbour] 2008-12-24 09:45 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081224084557.GA1277@34-mo7-2.acn.waw.pl>

2008-12-24 09:45 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  + harbour/include/hbrddnsx.h
  + harbour/source/rdd/dbfnsx
  + harbour/source/rdd/dbfnsx/dbfnsx1.c
  + harbour/source/rdd/dbfnsx/Makefile
  * harbour/config/global.cf
  * harbour/make_b32.mak
  * harbour/make_vc.mak
  * harbour/make_gcc.mak
  * harbour/common.mak
    + added new DBFNSX RDD. Those of you who knows SIX3 should also
      know NSX index format. It's very interesting format and in some
      cases much better then CDX. I hope you will find it interesting.
      In hbrddnsx.h you can find detail information about Harbour NSX
      implementation.
      It's a small gift from me for Christmas ;-)

      I would like to wish all of you Marry Christmas and Happy new Year.

      best regards,
      Przemek

best regards
Przemek
From druzus at acn.waw.pl  Wed Dec 24 07:32:45 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Dec 24 07:29:59 2008
Subject: [Harbour] 2008-12-24 13:32 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081224123245.GA12215@34-mo7-2.acn.waw.pl>

2008-12-24 13:32 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/dbfnsx/Makefile
    ! fixed typo in library name. Should be rddnsx instead of dbfnsx.
      Thanks to Lorenzo.

best regards
Przemek
From druzus at acn.waw.pl  Wed Dec 24 08:36:56 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Dec 24 08:34:10 2008
Subject: [Harbour] 2008-12-24 14:36 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081224133656.GA2307@34-mo7-2.acn.waw.pl>

2008-12-24 14:36 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hbmk.bat
  * harbour/bin/hbmk_os2.cmd
  * harbour/bin/hb-func.sh
    + added rddnsx to linked library list

best regards
Przemek
From e.m.giordano at emagsoftware.it  Wed Dec 24 11:55:04 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Dec 24 11:55:15 2008
Subject: [Harbour] Warning/error
Message-ID: <E3A7B681024F4B7FBC9F7A36072CA3CC@emag>

\wvgclass.prg(2370) Warning W0033  Variable 'ADATA' is never assigned in 
function 'WVTGETS_GETDATA(2364)'

** error 1 ** deleting obj\b32\wvgclass.obj

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From e.m.giordano at emagsoftware.it  Wed Dec 24 11:56:08 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Wed Dec 24 11:56:11 2008
Subject: [Harbour] More warnings
Message-ID: <AF70F4005DCD45F0A8B917D708CD80A3@emag>

Warning W8056 source\vm\hvm.c 3143: Integer arithmetic overflow in function 
hb_vmMult
Warning W8056 source\vm\hvm.c 3144: Integer arithmetic overflow in function 
hb_vmMult

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic 

From hbco2 at sbcglobal.net  Wed Dec 24 16:10:57 2008
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Wed Dec 24 16:10:59 2008
Subject: [Harbour] (fwd) 2008-12-19 20:26 UTC+0100 Przemyslaw
	Czerpak(druzus/at/priv.onet.pl)
References: <20081220134511.GG12459@34-mo7-2.acn.waw.pl>
Message-ID: <00da01c9660c$1e5e3160$0303a8c0@hbco>

Hi Chen,

It does not works for me and as I can see for most of other users.
I can see your message only on:
   http://lists.harbour-project.org/pipermail/harbour/

Phil, help ;-)

I wish all Harbour developers and users Marry Christmas and Happy New Year.
I'll commit small gift ;-) in a while.

best regards,
Przemek

Phil, I have not received mail since 12/20/08, help  ;-)

Przemek, and all, have a Merry Christmas and the Best of the New Year!  And  thank you for the wonderful work you have built in Harbour.

Bill
hbco2@sbcglobal.net
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081224/29680bf8/attachment.html
From dbtopas at dbtopas.lt  Thu Dec 25 01:06:26 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Dec 25 01:08:29 2008
Subject: [Harbour] ChangeLog 2008-12-25 08:05 UTC+0200 Mindaugas Kavaliauskas
Message-ID: <495322E2.40308@dbtopas.lt>

2008-12-25 08:05 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * contrib/rddsql/sqlbase.c
   * contrib/rddsql/sqlmix.c
   * contrib/rddsql/tests/test1.prg
   * contrib/rddsql/common.mak
   - contrib/rddsql/hbsqldd.h
   + contrib/rddsql/hbrddsql.h
   * contrib/rddsql/make_b32.bat
   * contrib/rddsql/make_vc.bat
   * contrib/rddsql/make_gcc.sh
   + contrib/rddsql/sddmy
   - contrib/rddsql/mysqldd.c
   + contrib/rddsql/sddmy/mysqldd.c
   + contrib/rddsql/sddmy/Makefile
   + contrib/rddsql/sddmy/make_gcc.sh
   + contrib/rddsql/sddmy/common.mak
   + contrib/rddsql/sddmy/make_b32.bat
   + contrib/rddsql/sddmy/make_vc.bat
     * changed structure and names of rddsql libraries. Since it can
       support many SQL databases, each backend moved to a separate
       library. Otherwise (all backends in the same library) nobody will
       be able to compile library without installing packages of ALL
       supported SQL databases. Now:
          rddsql - RDD for interfacing to SQL database drivers
          sddmy  - MySQL database driver
          sddpg  - Postgre SQL database driver
          ...
     ; TOFIX: I was unable to manage build files.
       contrib/sqlrdd/sddmy/make_b32.bat sets HB_ROOT variable:
         set HB_ROOT = ..\..\..
       but this variable is lost and contrib/make_b32.mak reassign it:
         !ifndef HB_ROOT
         HB_ROOT = ..\..
         !endif
       This breaks building of library. To fix this problem, I've added
       a two hacks:
         - added additional include path into CFLAGS (see make_b32.bat)
         - added "..\" to LIB_PATH (see common.mak)
       The same problem is for both make_b32 and make_vc, and for both
       sddmy and sddpg libraries.
     ; TODO: check (and adjust if neccessary) build files for unix

   + contrib/rddsql/sddpg
   + contrib/rddsql/sddpg/pgsqldd.c
   + contrib/rddsql/sddpg/Makefile
   + contrib/rddsql/sddpg/make_gcc.sh
   + contrib/rddsql/sddpg/common.mak
   + contrib/rddsql/sddpg/make_b32.bat
   + contrib/rddsql/sddpg/make_vc.bat
     + added SQL database driver for Postgre SQL
     ; does anyone have more RDD for Christmas gift? :)
From dbtopas at dbtopas.lt  Thu Dec 25 01:22:02 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Dec 25 01:24:04 2008
Subject: [Harbour] ChangeLog 2008-12-25 08:20 UTC+0200 Mindaugas Kavaliauskas
Message-ID: <4953268A.5080508@dbtopas.lt>

2008-12-25 08:20 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * contrib/rddsql/sqlpg/make_b32.bat
   * contrib/rddsql/sqlpg/make_vc.bat
     ! fixed import library building
From dbtopas at dbtopas.lt  Thu Dec 25 04:12:29 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Dec 25 04:14:31 2008
Subject: [Harbour] ChangeLog 2008-12-25 11:14 UTC+0200 Mindaugas Kavaliauskas
Message-ID: <49534E7D.9040503@dbtopas.lt>

2008-12-25 11:14 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * include/hbextern.ch
   * source/rtl/seconds.c
     + implemented hb_milliseconds(). This function returns time value
       from some moment in the past (not midnigth!). It does not start
       to cound from zero in midnight, thus, can be safetly used to
       measure time intervals.
   + tests/ticktime.c
     + Added nice test for hb_milliseconds().
       Results on WinXP:
         Ticks per second: 63.595
         Min/avg/max interval (ms): 15.000 / 15.724 / 47.000
         Loops per tick:      13035.09
       Results on openSUSE on VirtualBox on WinXP:
         Ticks per second: 384306.138
         Min/avg/max interval (ms): 0.001 / 0.003 / 11.112
         Loops per tick:      1.04
From dbtopas at dbtopas.lt  Thu Dec 25 04:32:46 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Dec 25 04:34:48 2008
Subject: [Harbour] ChangeLog 2008-12-25 11:32 UTC+0200 Mindaugas
	Kavaliauskas 
Message-ID: <4953533E.2040505@dbtopas.lt>

2008-12-25 11:32 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * ChangeLog
     * fixed ChangeLog entry of last commit. Sorry, wrong result
       file was pasted

From info at fsgiudice.com  Thu Dec 25 17:10:08 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Thu Dec 25 17:11:09 2008
Subject: [Harbour] Changelog 2008-12-25 23:08 UTC+0100 Francesco Saverio
	Giudice (info/at/fsgiudice.com)
Message-ID: <495404C0.4000203@fsgiudice.com>

2008-12-25 23:08 UTC+0100 Francesco Saverio Giudice (info/at/fsgiudice.com)
   * contrib/gtwvg/wvgclass.prg
   * contrib/hbgd/gdchart.prg
     ! fixed assigned but not used variable
     ; Also I would like to wish you all a happy Christmas holidays


Best regards

Francesco
From dbtopas at dbtopas.lt  Thu Dec 25 17:34:40 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Thu Dec 25 17:36:41 2008
Subject: [Harbour] ChangeLog 2008-12-26 00:35 UTC+0200 Mindaugas Kavaliauskas
Message-ID: <49540A80.1040203@dbtopas.lt>

2008-12-26 00:35 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   + contrib/rddsql/sddfb
   + contrib/rddsql/sddfb/fbirddd.c
   + contrib/rddsql/sddfb/common.mak
   + contrib/rddsql/sddfb/make_b32.bat
   + contrib/rddsql/sddfb/make_vc.bat
     + added SQL database driver for Firebird

   * contrib/rddsql/sddmy/mysqldd.c
   * contrib/rddsql/sddpg/pgsqldd.c
     * minor adjustment of error subsystem name

   * contrib/rddsql/sddmy/make_vc.bat
   * contrib/rddsql/sddpg/make_b32.bat
   * contrib/rddsql/sddpg/make_vc.bat
     * removed unused enviroment variable assignment

   * contrib/rddsql/sddpg/common.mak
     * svn properties adjustment

From e.m.giordano at emagsoftware.it  Sat Dec 27 06:39:59 2008
From: e.m.giordano at emagsoftware.it (Enrico Maria Giordano)
Date: Sat Dec 27 06:40:04 2008
Subject: [Harbour] (fwd) 2008-12-19 20:26 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <5067797031DD4C4191DB0F1AD08BB40A@emag>

> Phil, I have not received mail since 12/20/08, help  ;-)

Me neither. Help!

EMG

--
EMAG Software Homepage:     http://www.emagsoftware.it
The EMG's ZX-Spectrum Page: http://www.emagsoftware.it/spectrum
The Best of Spectrum Games: http://www.emagsoftware.it/tbosg
The EMG Music page:         http://www.emagsoftware.it/emgmusic

From druzus at acn.waw.pl  Sat Dec 27 09:32:30 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Dec 27 09:29:37 2008
Subject: [Harbour] 2008-12-27 15:31 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081227143230.GA29650@34-mo7-2.acn.waw.pl>

2008-12-27 15:31 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbstack.h
  * harbour/include/hbapi.h
  * harbour/include/hbapiitm.h
  * harbour/source/vm/hashes.c
    * small modifications in order of some structure members for better
      alignment

  * harbour/source/vm/hvm.c
    * pacified BCC warnings

  * harbour/contrib/rddsql/Makefile
  * harbour/contrib/rddsql/sddpg/Makefile
  + harbour/contrib/rddsql/sddfb/Makefile
    * updated GNU make files for new SQL RDDs - many thanks to
      Mindaugas

best regards
Przemek
From dbtopas at dbtopas.lt  Sat Dec 27 11:07:52 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sat Dec 27 11:09:49 2008
Subject: [Harbour] ChangeLog 2008-12-27 18:08 UTC+0200 Mindaugas Kavaliauskas
Message-ID: <495652D8.9070909@dbtopas.lt>

2008-12-27 18:08 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * source/compiler/hbopt.c
     + added logic to generate 'assigned but unused' warning in case
       op= is used. Ex.:
          nI += nJ
          nI := 5
     ; This type of redundancy is not found in core code
From druzus at acn.waw.pl  Sat Dec 27 11:47:32 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Dec 27 11:44:39 2008
Subject: [Harbour] 2008-12-27 17:46 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081227164732.GA14289@34-mo7-2.acn.waw.pl>

2008-12-27 17:46 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/bin/hb-func.sh
    + added support for rddsql and sdd* libraries in hb* scripts

  * harbour/harbour-win-spec
  * harbour/harbour-wce-spec
    ! added rddnsx library

  * harbour/mpkg_rpm.sh
  * harbour/harbour.spec
    + added harbour-fbird RPM and support for sqlrdd and sdd* libraries

  * harbour/contrib/rddsql/sddpg/Makefile
    + added other paths checking for postgresql header files

  * harbour/contrib/rddsql/sddfb/Makefile
    ! fixed file name

  * harbour/contrib/rddsql/sddpg/pgsqldd.c
  * harbour/contrib/rddsql/sddfb/fbirddd.c
    * cleanup init symbol declaration
    ! casting for C++ compilation
    * added missing const in some char * declarations

  * harbour/contrib/rddsql/sddfb/fbirddd.c
    * changed some parameters passed to firebird functions.
      Mindaugas please verify me because these modifications changes
      the code behavior. I do not know FireBird API and I modified it to
      only pass C++ compilation checking error messages. At least these
      lines should be checked: 233, 236, 244, 245, 260, 261, 440, 445
      If possible please also check casting I added in in other lines
      because it may hide some mistakes.

best regards
Przemek
From druzus at acn.waw.pl  Sat Dec 27 12:20:25 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Sat Dec 27 12:17:32 2008
Subject: [Harbour] 2008-12-27 18:20 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081227172025.GA20643@34-mo7-2.acn.waw.pl>

2008-12-27 18:20 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/source/rdd/dbfnsx/dbfnsx1.c
    * added some missing const in char * declarations

  * harbour/contrib/hbtip/sendmail.prg
    * cleaned unused assigned detected by new Mindaugas logic

best regards
Przemek
From dbtopas at dbtopas.lt  Sat Dec 27 18:53:01 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sat Dec 27 18:54:57 2008
Subject: [Harbour] Virtual machine comparison
Message-ID: <4956BFDD.2040406@dbtopas.lt>

Hi,



after some work on pcode optimisation I've tried to compare execution
speed of various virtual machines (VM). I've took the most known for
test:

- Harbour 1.1.0dev (Rev. 10008)
- PHP 5.2.8
- Python 2.6.1
- Ruby 1.8.7
- Java, Sun J2SE 1.5.0 Upgrade 17

These are the latest versions (except Java) downloaded from developers
web pages. I've also tried to download sources (php-5.2.8.tar.bz2,
Python-2.6.1.tar.bz2, ruby-1.8.7-p72.tar.gz) and look to internals.
Of cause Sun's JavaVM is produces from closed source, and I had no
chance to look inside. I'll use notation source:path/file, when I want
to refer a file inside these compressed source files.

Only a few test have been done. One expression was evaluated in the
loop and execution time calculated. For example,
   PROC main()
   LOCAL nTime, nI, nSum
     nTime := seconds()
     nSum := 0
     FOR nI := 0 TO 9999999
       nSum += nI * 2 + 17
     NEXT
     ?  "Time:", seconds() - nTime
     ?  "Value:", nSum
   RETURN
This test I will denote "nJ+=nI*2+17" in a table below (test's has
also numbers used to name test files, it is presented in No column
of the table). The last rows of table show memory allocation, and
number VM's of opcode instructions.
The tests have been selected to test not only virtual machine execution
speed, but to test optimizer also. For example, I've added test for
expression:
     nSum += 17 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + nI * 2
since it can be easy optimized to:
     nSum += 27 + nI * 2
and also
     nSum += nI * 2 + 17 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1
The later could not be optimized to
     nSum += nI * 2 + 27
without assumption that nI is an integer. If language has untyped
variables and allows to overload operators for objects, then nI can
be object with overloaded * and + operators, and nI*2+17+1+...+1 could
not be optimized. We have this in Harbour.
     It was also interesting to compare speed of more complex structures
than integer number operations, so, I've added a test for a string
concatenation and array. String concatenation has been done in two
ways: cI:=cI+"a" and cI+="a". Array test has also been done in two
ways. The reason for selection of AADD(aI,{aI[nI-1][1]+1}) test will
be described later. Java language has typed variables and arrays should
be preallocated. So, it would be not fair to compare execution speed to
dynamic allocated arrays/lists of other languages. That's why ArrayList
object was used for dynamic array tests.

All test source for all languages can be found at
http://www.dbtopas.lt/hrb/vmcomparison.zip


No Test code               Harbour  PHP   Python  Ruby  Java  Java+JIT
----------------------------------+------+------+------+------+-------+
    10'000'000 times:
11 nJ+=nI*2+17               4.61   3.41   6.54  25.53   1.36    0.08
12 nJ+=17+1+...+1+nI*2       4.61   6.10   6.62  45.86   1.36    0.08
13 nJ+=nI*2+17+1+...+1      10.86   5.95  12.96  45.78   1.92    0.17
    200'000 times:
21 cI:=cI+"a"                6.56   6.70   0.11  25.80 1641.766 1650.437
22 cI+="a"                   0.08   0.07   0.12  25.83 1649.344 1654.735
31 AADD(aI,{nI})             0.46   0.29   0.32   0.20   0.76    0.40
32 AADD(aI,{aI[nI-1][1]+1})  0.53   0.34   0.38   0.39   0.92    0.40
-----------------------------------------------------------------------
11 Mem Usage (KB)            2680   4296 162400   3244   6684    6892
    Opcode instruction count   180    150    143    105    202


Harbour
=======
The execution time for cI:=cI+"a" and cI+="a" test are very different.
This can be optimized at pcode (or expressions) level, but I'm not
sure it can be done. Objects can have different behaviour for "+", and
"+=" operators. Am I wrong here?

cI+="a" has small execution times, because string preallocation is
used. But I do not understand, why do we always call realloc() (see
hb_vmPlus(), hb_itemReSizeString(), and hb_xRefResize())? We do not
need it, if item.asString.allocated > ulSize?

We can increase performance of Harbour array/hash by preallocation,
if memory manager does not do preallocation of realloc'ed memory
blocks.


PHP
===

PHP has 151 opcodes (see source:Zend/zend_vm_opcodes.h), but it seems
interpreter does not compile code to opcodes. PHP is interpreted
language and expression is evaluated right after bison creates
expression tree. This eliminates need of push/pop arguments. It's a
kind of doing:
    operation->itemResult = MULT_handler( operation->itemLeft,
                                          operation->itemRight );
instead of:
    stackPush( MULT_handler( stackPop(), stackPop() ) );

So, there is no need to decode opcode and its parameters. This makes
execution faster. This can be the reason why php is faster in execution
of code (see nJ+=nI*2+17, PHP vs. Hrb). Interpretation of code does not
let to optimize expression (or this is not implemented in PHP) and the
whole expression tree is evaluated on each calculation of expression
value (compare nJ+=nI*2+17 and nJ+=17+1+...+1+nI*2, PHP vs. Hrb).

PHP has opcode handler table, i.e., each opcode is handled using:
    operation->handler( ... )
Instead of Harbour's:
    switch( operation->opcode )
    {
       case MULT:
          MULT_handler( ... );
          exit;
    }
Actually, this is optimized by most compilers and long switch sentence
is replaced by:
    goto handler_table[ operation->opcode ];
This makes both Harbour's and PHP's opcode handling equivalent
regardless of this fact PHP and Harbour has different opcode handler
tables. PHP's opcode handlers table is much larger (3776 handlers,
see source:Zend/zend_vm_execute.h) and also depends on operand type.
For example, a different handler is used, if operand is constant.
Compare:
    MULT_handler( itemGetNumeric( itemLeft ),
                  itemGetNumeric( itemRight ) );
vs.
    MULT_handler( itemGetNumeric( itemLeft ),
                  itemRight->asNumeric.value );

BTW, it seems multi-thread problems was solved in PHP in a similar way
like in Harbour. Many functions are stuffed with TSRMLS_FETCH().
In Harbour it's called HB_STACK_TLS_PRELOAD.


Python
======

Python has 143 opcodes (see source:Include/opcode.h). "hb_vmExecute()"
is called PyEval_EvalFrameEx() here (see source:Python/ceval.c). The
code is very familiar for Harbour developers, but they sometimes use
"goto" instead of "break":
    for( ;; ) {
       ...
    fast_next_opcode:
       ...
       switch(opcode) {
          case NOP:
             goto fast_next_opcode;
          ...
          case ROT_TWO: /* rotate two aka swap */
             v = TOP();
             w = SECOND();
             SET_TOP(w);
             SET_SECOND(v);
             goto fast_next_opcode;
          ...
       }
       ...
    }

Python does not use bison parser. It has very short grammar rules (see
source:Grammar/Grammar, Parser/Python.asdl), and it uses its own parser
(source:Parser/*, Modules/parsermodule).

Python has same nJ+=nI*2+17+1+...+1 optimisation problem as Harbour has,
but it better handles cI:=cI+"a" optimisation. I guess array
preallocation can help Harbour reach the speed of Python lists.


Ruby
====

Ruby's "hb_vmExecute()" is called rb_eval() (see source:eval.c). It
uses bison for parsing. It uses 105 opcodes (see source:node.h), but
it is not real virtual machine. It evaluates expression tree just like
PHP do.

Ruby was very slow in comparison to other VM, the reason of this could
be, that Ruby does not have numeric operators like +, *. Everything is
operators of numeric class. Syntax 5+3 is equivalent to 5.+3  here "."
is used as method name delimiter. Just imagine numeric class overload
in Harbour and 5:plus(3).

But I was very surprised then I've did an array test ADD(aI,{nI}).
Ruby shows perfect performance here! Where is the trick?! I had an
idea, that Ruby does not creates an arrays in my code, but uses
array lazy creation. That's why I've rote last AADD(aI,{aI[nI-1][1]+1})
test. Here value of every element depends on another element's value.
In the end of loop I print value of last element, this should force
lazy creation of all array elements and give "the true" execution
speed. for me great surprise, Ruby's performance here remains greet!
I don't have ideas why it has great performance on array creation and
poor on simple numeric operations! BTW, array creation also contains
+ and -, but does not contain *, but I don't believe * is very
difficult for Ruby.


Java
====

I can not see Java source of selected JavaVM implementation, but spec
(http://java.sun.com/docs/books/jvms/second_edition/html/
Mnemonics.doc.html) says, it has 202 (+3(reserved)-1(unused)) opcode.
Java and can use just-in-time compile (JIT) execution mode. It means
Java opcode can be compiled to real CPU code, thus making a
significant execution speed improvement. Test were executed in both
modes: JIT (default), and no-JIT. No-JIT mode is selected using -Xint
execution option.

Java has typed variables, so it's execution speed is faster than
execution speed of typeless languages, but a simple string
concatenation test gives extremely bad performance (27 minutes
against to 0.08..25 seconds from other languages).
If I reduce loop count from 200'000 to 20'000. Execution time decreases
from 27 minutes to 2.6 seconds (!) for both JIT and no-JIT modes. I can
imagine the only reason for this, no reference counters are used and
variables are released using garbage collector. Memory allocation
during 27 min execution process is 10244 KB, so, only 3560 KB larger
than a simple integer test.
If no reference counters are used, garbage collection should be called
   20000 * 20001 / 2 / ( 3560 * 1024 ) = 54,86
54 times for 20'000 bytes (augmented) strings allocation. If number
of strings (and string lengths) is increased up to 200'000. Garbage
collector should be called
   200000 * 200001 / 2 / ( 3560 * 1024 ) = 5486.33
5486 times. If garbage collection takes most of execution time (i.e.,
1650/5486 ~= 0.3 seconds), we can have a similar situation. But this
should not be the only reason, because in this case execution time
for 20'000 times loop should be approx. 0.3*54=16 seconds (it is 2.6
seconds).


Best regards,
Mindaugas


P.S. Here is another thing (not related to virtual machine and pcode
evaluation), but pcode tracing allows to find out various things, for
example to trace type of variables, or trace usage of constant values.
This allows to make constant folding other optimisations
(see http://en.wikipedia.org/wiki/Constant_folding). Ex.:

    FOR nI := 1 TO 50
       QOUT(nI)
    NEXT

can be compiled to:

    int   local1;
    local1 = 1;
  lab00001:
    hb_xvmPushFuncSymbol( symbols + 1 );
    hb_xvmPushInteger( local1 );
    if( hb_xvmDo( 1 ) ) break;
    local1++;
  lab00002:
    fValue = local1 > 50;
    if( !fValue )
       goto lab00001;

instead of:

    hb_xvmPushInteger( 1 );
    hb_xvmPushUnRef();
    hb_xvmPopLocal( 1 );
    goto lab00002;
  lab00001: ;
    hb_xvmPushFuncSymbol( symbols + 1 );
    hb_xvmPushLocal( 1 );
    if( hb_xvmDo( 1 ) ) break;
    if( hb_xvmLocalIncPush( 1 ) ) break;
  lab00002: ;
    if( hb_xvmGreaterThenIntIs( 50, &fValue ) ) break;
    if( !fValue )
       goto lab00001;

But perhaps we must wait for type declarations in Harbour instead of
trying to guess variable types from pcode.
From dbtopas at dbtopas.lt  Sat Dec 27 20:09:20 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sat Dec 27 20:11:16 2008
Subject: [Harbour] Test
Message-ID: <4956D1C0.4000405@dbtopas.lt>

(I see messages only on mailing list archive website)
From dbtopas at dbtopas.lt  Sat Dec 27 20:10:15 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Sat Dec 27 20:12:10 2008
Subject: [Harbour] Array preallocation test
Message-ID: <4956D1F7.8080807@dbtopas.lt>

Hi,


No Test code               Harbour  PHP   Python  Ruby  Java  Java+JIT
----------------------------------+------+------+------+------+-------+
31 AADD(aI,{nI})             0.46   0.29   0.32   0.20   0.76    0.40
32 AADD(aI,{aI[nI-1][1]+1})  0.53   0.34   0.38   0.39   0.92    0.40

Array preallocation is a simple (dozen of lines) improvement. Using it 
Harbour execution time decreases from 0.46 and 0.53 to 0.16 and 0.25. I 
can commit if there is no objection. It would be useful to do the same 
for hashes.


Best regards,
Mindaugas

From cigcor at hotmail.com  Sun Dec 28 10:32:54 2008
From: cigcor at hotmail.com (=?UTF-8?Q?S=C3=A9rgio_Kondo?=)
Date: Sun Dec 28 09:30:24 2008
Subject: [Harbour] Test
In-Reply-To: <494D1F4C.1010302@fsgiudice.com>
References: <DCC7AD92F47E48849255E869CFBC6D58@emag>	<71983D24E5AC48D2A60BE55807878131@emag><20081220135004.GA14390@34-mo7-2.acn.waw.pl>
	<494D1F4C.1010302@fsgiudice.com>
Message-ID: <COL103-DS18BEED9E7BBA1093A088D8DCE90@phx.gbl>

Another test.

--------------------------------------------------
From: "Francesco Saverio Giudice" <info@fsgiudice.com>
Sent: Saturday, December 20, 2008 1:37 PM
To: "Harbour Project Main Developer List." <harbour@harbour-project.org>
Subject: Re: [Harbour] Test

> 
> 
> Il 20/12/2008 14.50, Przemyslaw Czerpak ha scritto:
>> On Sat, 20 Dec 2008, Enrico Maria Giordano wrote:
>>>> It seems we are on the road again. :-)
>>> Thank you Phil.
>> 
>> I also want to thank.
> 
> +1
> 
> Best Regards
> 
> Francesco
> 
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 
From hbco2 at sbcglobal.net  Sun Dec 28 17:03:30 2008
From: hbco2 at sbcglobal.net (Bill Smith)
Date: Sun Dec 28 17:03:34 2008
Subject: [Harbour] Re: Test
Message-ID: <007901c96938$1ed488e0$0303a8c0@hbco>

Mindaugas Kavaliauskas dbtopas at dbtopas.lt
Sat Dec 27 20:09:20 EST 2008

(I see messages only on mailing list archive website)

<snips>

Hi Mindaugas,

This same issue occurred about the same time on an unrelated website which also used mailman.  The list op reportedly spent two hours attempting to
trace the problem.  Ultimately, it was necessary for the list op to regenerate the list from scratch.

It would appear a number of people on the Harbour list are not receiving mail from messages posted to the Harbour list.

Bill
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081228/fd1e8ebc/attachment.html
From labitas at gmail.com  Mon Dec 29 08:25:21 2008
From: labitas at gmail.com (Saulius Zrelskis)
Date: Mon Dec 29 08:25:25 2008
Subject: [Harbour] DIRNAME
Message-ID: <2386af1b0812290525t53a7afaex3c9f13f94363db35@mail.gmail.com>

Hi All,

In file \harbour\contrib\hbct\disk.c function DIRNAME there is line:

   hb_fsCurDirBuff( hb_fsCurDrv(), pbyBuffer + 1, _POSIX_PATH_MAX );

IMO it must be changed to:

   hb_fsCurDirBuff( hb_fsCurDrv() + 1, pbyBuffer + 1, _POSIX_PATH_MAX );

because hb_fsCurDrv() returns
/* NOTE: 0=A:, 1=B:, 2=C:, 3=D:, ... */

and hb_fsCurDirBuff:

USHORT hb_fsCurDirBuff( USHORT uiDrive, BYTE * pbyBuffer, ULONG ulLen )

assumes parameter uiDrive:
/* NOTE: 0 = current drive, 1 = A, 2 = B, 3 = C, etc. */

Best regards,
Saulius
From dbtopas at dbtopas.lt  Mon Dec 29 12:40:02 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Mon Dec 29 12:41:56 2008
Subject: [Harbour] ChangeLog 2008-12-29 19:33 UTC+0200 Mindaugas Kavaliauskas
Message-ID: <49590B72.4010902@dbtopas.lt>

2008-12-29 19:33 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * harbour/contrib/rddsql/sddfb/fbirddd.c
     ! fixed a few type castings


>   * harbour/contrib/rddsql/sddfb/fbirddd.c
>     * changed some parameters passed to firebird functions.
>       Mindaugas please verify me because these modifications changes
>       the code behavior. I do not know FireBird API and I modified it to
>       only pass C++ compilation checking error messages. At least these
>       lines should be checked: 233, 236, 244, 245, 260, 261, 440, 445
>       If possible please also check casting I added in in other lines
>       because it may hide some mistakes.

Hi,


I've reverted line 233 only. The other was bugs. I'm a little surprised 
about it. This code was working in 2007, or I've committed not the final 
version of code. I'll try to find time for testing of this module, but 
user tests from people really working with Firebird would be appreciate.


Best regards,
Mindaugas
From druzus at acn.waw.pl  Mon Dec 29 12:50:27 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Dec 29 12:47:30 2008
Subject: [Harbour] Re: Virtual machine comparison
Message-ID: <20081229175027.GA21370@34-mo7-2.acn.waw.pl>

Hi Mindaugas,

> after some work on pcode optimisation I've tried to compare execution
> speed of various virtual machines (VM). I've took the most known for
> test:
> - Harbour 1.1.0dev (Rev. 10008)
> - PHP 5.2.8
> - Python 2.6.1
> - Ruby 1.8.7
> - Java, Sun J2SE 1.5.0 Upgrade 17

Very nice idea and thank you for you analyzes.
To the above list it will be good to add PERL and VisualBasic and C#.

> These are the latest versions (except Java) downloaded from developers
> web pages. I've also tried to download sources (php-5.2.8.tar.bz2,
> Python-2.6.1.tar.bz2, ruby-1.8.7-p72.tar.gz) and look to internals.
> Of cause Sun's JavaVM is produces from closed source, and I had no
> chance to look inside. I'll use notation source:path/file, when I want
> to refer a file inside these compressed source files.
> Only a few test have been done. One expression was evaluated in the
> loop and execution time calculated. For example,
>    PROC main()
>    LOCAL nTime, nI, nSum
>      nTime := seconds()
>      nSum := 0
>      FOR nI := 0 TO 9999999
>        nSum += nI * 2 + 17
>      NEXT
>      ?  "Time:", seconds() - nTime
>      ?  "Value:", nSum
>    RETURN
> This test I will denote "nJ+=nI*2+17" in a table below (test's has
> also numbers used to name test files, it is presented in No column
> of the table). The last rows of table show memory allocation, and
> number VM's of opcode instructions.
> The tests have been selected to test not only virtual machine execution
> speed, but to test optimizer also. For example, I've added test for
> expression:
>      nSum += 17 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + nI * 2
> since it can be easy optimized to:
>      nSum += 27 + nI * 2
> and also
>      nSum += nI * 2 + 17 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1
> The later could not be optimized to
>      nSum += nI * 2 + 27
> without assumption that nI is an integer. If language has untyped
> variables and allows to overload operators for objects, then nI can
> be object with overloaded * and + operators, and nI*2+17+1+...+1 could
> not be optimized. We have this in Harbour.

In this example it's possible to detect type of nI variable because
it's used only as FOR loop iterator so even without explicit typing
compiler may try to optimize it. Of course it can also decide that
basic math rules have to be respected by overloaded operators and
optimize the expression. We can make the same but IMHO it should be
enabled optionally. I'll add new compiler switch (-ko) which will
enable operator optimizations. It will replace operators or will
change their order keeping standard math and/or Clipper operators
rules. If user does not use operators overloading which does not respect
these rules and does not need strict Clipper compatibility in error
messages (modifying operators or their order will change error messages
in wrong expressions) then he can use it to produce faster code during
compilation.
In this example:
   nSum += nI * 2 + 17 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1
we have to intorduce optimization which uses two math rules:
   1)   a + b + c == a + ( b + c )
   2)   a + b == b + a
The first one will allow to reduce the above expression to:
   nSum += nI * 2 + 27
The second one will also optimize to the same form expressions like:
   nSum += 17 + nI * 2 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1 + 1
There are also other rules which we can use, f.e.:
   a + ( b - c ) == a + b - c
   - ( a - b ) == b - a
   a + 0 == a  // we already have it and it should be protected by -ko
               // switch

> It was also interesting to compare speed of more complex structures
> than integer number operations, so, I've added a test for a string
> concatenation and array. String concatenation has been done in two
> ways: cI:=cI+"a" and cI+="a". Array test has also been done in two
> ways. The reason for selection of AADD(aI,{aI[nI-1][1]+1}) test will
> be described later. Java language has typed variables and arrays should
> be preallocated. So, it would be not fair to compare execution speed to
> dynamic allocated arrays/lists of other languages. That's why ArrayList
> object was used for dynamic array tests.

It will be also good to see the performance of codeblocks and/or
macros evaluation if language support them. Sometimes tricks/optimizations
used in compile time cannot be used for codeblocks or macros or even
force some solutions which make them slower then necessary.

> All test source for all languages can be found at
> http://www.dbtopas.lt/hrb/vmcomparison.zip
> 
> No Test code               Harbour  PHP   Python  Ruby  Java  Java+JIT
> ----------------------------------+------+------+------+------+-------+
>     10'000'000 times:
> 11 nJ+=nI*2+17               4.61   3.41   6.54  25.53   1.36    0.08
> 12 nJ+=17+1+...+1+nI*2       4.61   6.10   6.62  45.86   1.36    0.08
> 13 nJ+=nI*2+17+1+...+1      10.86   5.95  12.96  45.78   1.92    0.17
>     200'000 times:
> 21 cI:=cI+"a"                6.56   6.70   0.11  25.80 1641.766 1650.437
> 22 cI+="a"                   0.08   0.07   0.12  25.83 1649.344 1654.735
> 31 AADD(aI,{nI})             0.46   0.29   0.32   0.20   0.76    0.40
> 32 AADD(aI,{aI[nI-1][1]+1})  0.53   0.34   0.38   0.39   0.92    0.40
> -----------------------------------------------------------------------
> 11 Mem Usage (KB)            2680   4296 162400   3244   6684    6892
>    Opcode instruction count   180    150    143    105    202
> 
> Harbour
> =======
> The execution time for cI:=cI+"a" and cI+="a" test are very different.
> This can be optimized at pcode (or expressions) level, but I'm not
> sure it can be done. Objects can have different behaviour for "+", and
> "+=" operators. Am I wrong here?

We do not have difference at runtime. In both cases "+" operator is send
to object. The maybe ":=" but this operator was probably added as some
workaround for missing destructors in the early Harbour classy code.
It was never working correctly in all cases and I would like to remove it.
So we can try to optimize it at compile time or even at runtime.
Try to compile this code with -gc3 switch. It will be optimized.
In -gc3 output we are not limited by number of OPCODEs so I added
some hb_xvm*() functions which are used to optimize some constructions.
In this case hb_xvmLocalAdd() is the key.
I planned to test some different constructions using -gc3 and then add
some new PCODEs in places where they give noticeable speed improvement
but I've never found enough time for it, sorry.

> cI+="a" has small execution times, because string preallocation is
> used. But I do not understand, why do we always call realloc() (see
> hb_vmPlus(), hb_itemReSizeString(), and hb_xRefResize())? We do not
> need it, if item.asString.allocated > ulSize?

We need hb_xRefResize() to unshare string buffer which can be used
by more then one item (here the order of instructions and reference
tests is important for MT mode and safe readonly access to string
variables) but calling hb_xrealloc() in each call to hb_xRefResize()
is my fault. I do not remember but probably I was making some
experiments and the code was committed to repository and I was sure
that it's OK so I was not checked it carefully. Many thanks for
information. I'll fix it in a while.

> We can increase performance of Harbour array/hash by preallocation,
> if memory manager does not do preallocation of realloc'ed memory
> blocks.

Yes though here we can try to make it without additional memory
overhead for the holder of preallocated memory size. It's possible
because we do not use reference counter for pBaseArray->pItems memory
block so we can use it.

> PHP
> ===
> PHP has 151 opcodes (see source:Zend/zend_vm_opcodes.h), but it seems
> interpreter does not compile code to opcodes. PHP is interpreted
> language and expression is evaluated right after bison creates
> expression tree. This eliminates need of push/pop arguments. It's a
> kind of doing:
>     operation->itemResult = MULT_handler( operation->itemLeft,
>                                           operation->itemRight );
> instead of:
>     stackPush( MULT_handler( stackPop(), stackPop() ) );
> So, there is no need to decode opcode and its parameters. This makes
> execution faster. This can be the reason why php is faster in execution
> of code (see nJ+=nI*2+17, PHP vs. Hrb). Interpretation of code does not
> let to optimize expression (or this is not implemented in PHP) and the
> whole expression tree is evaluated on each calculation of expression
> value (compare nJ+=nI*2+17 and nJ+=17+1+...+1+nI*2, PHP vs. Hrb).

The fact that PHP always recompile the code causes that they will not make
deep and expensive optimizations because compilation is part of runtime
overhead.

> PHP has opcode handler table, i.e., each opcode is handled using:
>     operation->handler( ... )
> Instead of Harbour's:
>     switch( operation->opcode )
>     {
>        case MULT:
>           MULT_handler( ... );
>           exit;
>     }
> Actually, this is optimized by most compilers and long switch sentence
> is replaced by:
>     goto handler_table[ operation->opcode ];

Yes though if you want to maximize the speed then storing PCODEs in
the array of integers instead of bytes will be more efficient with the
cost of size. In such case we can eliminate all *NEAR/*FAR PCODEs and
use only one version which will operate on 32bit integer and we will
not be blocked by number of OPCODEs.

> This makes both Harbour's and PHP's opcode handling equivalent
> regardless of this fact PHP and Harbour has different opcode handler
> tables. PHP's opcode handlers table is much larger (3776 handlers,
> see source:Zend/zend_vm_execute.h) and also depends on operand type.
> For example, a different handler is used, if operand is constant.
> Compare:
>     MULT_handler( itemGetNumeric( itemLeft ),
>                   itemGetNumeric( itemRight ) );
> vs.
>     MULT_handler( itemGetNumeric( itemLeft ),
>                   itemRight->asNumeric.value );

Some of such optimizations Harbour makes in -gc3 output.

> BTW, it seems multi-thread problems was solved in PHP in a similar way
> like in Harbour. Many functions are stuffed with TSRMLS_FETCH().
> In Harbour it's called HB_STACK_TLS_PRELOAD.
> 
> 
> Python
> ======
> Python has 143 opcodes (see source:Include/opcode.h). "hb_vmExecute()"
> is called PyEval_EvalFrameEx() here (see source:Python/ceval.c). The
> code is very familiar for Harbour developers, but they sometimes use
> "goto" instead of "break":
>     for( ;; ) {
>        ...
>     fast_next_opcode:
>        ...
>        switch(opcode) {
>           case NOP:
>              goto fast_next_opcode;
>           ...
>           case ROT_TWO: /* rotate two aka swap */
>              v = TOP();
>              w = SECOND();
>              SET_TOP(w);
>              SET_SECOND(v);
>              goto fast_next_opcode;
>           ...
>        }
>        ...
>     }

Such GOTO instruction is usable when main VM loop has some additional
code after PCODE execution. In our case it's:
      if( hb_stackGetActionRequest() )
      {
         ...
      }
Which is used for event check (BREAK/QUIT). In some PCODEs we know
that such events cannot appear so we can try to use it instead of
break. It's also possible that it gives a little bit faster code
for some C compiler but this will be strictly C compiler dependent.
In main VM loop we have also:
      if( hb_vmThreadRequest )
         hb_vmRequestTest();
which is used for MT mode. It can be eliminated and replaced by
hb_stackGetActionRequest() but it will be necessary to change the
code which operates on hb_stack.uiActionRequest to make only MT
safe assignment/access and accept multiple flags.
There is also:
   #if !defined( HB_GUI )
         if( ! --( *piKeyPolls ) )
         {
            ...
         }
   #endif

It's not strictly necessary and if you recompile Harbour with HB_GUI
then it will give some small speed improvement by eliminating GT polling.

> Python does not use bison parser. It has very short grammar rules (see
> source:Grammar/Grammar, Parser/Python.asdl), and it uses its own parser
> (source:Parser/*, Modules/parsermodule).
> Python has same nJ+=nI*2+17+1+...+1 optimisation problem as Harbour has,

See above. I'll commit modification which introduce -ko switch
ASAP so you can repeat your tests.

> but it better handles cI:=cI+"a" optimisation. I guess array

Check also -gc3 performance. Such expressions will also be optimized
even without compile time optimization. It's enough to introduce new
OPCODE.

> preallocation can help Harbour reach the speed of Python lists.

It will depend on memory manager. I made some tests in SUSE 11.0 and
xHarbour with array preallocation is still noticeable slower in AADD()
then Harbour without it. Anyhow it's good to add it. At least it will
make BCC users happy ;-).

> Ruby
> ====
> Ruby's "hb_vmExecute()" is called rb_eval() (see source:eval.c). It
> uses bison for parsing. It uses 105 opcodes (see source:node.h), but
> it is not real virtual machine. It evaluates expression tree just like
> PHP do.
> Ruby was very slow in comparison to other VM, the reason of this could
> be, that Ruby does not have numeric operators like +, *. Everything is
> operators of numeric class. Syntax 5+3 is equivalent to 5.+3  here "."
> is used as method name delimiter. Just imagine numeric class overload
> in Harbour and 5:plus(3).

It can be also resolved without such huge performance reduction.
The more important is operator precedence. If language gives fully
user defined operator overloading then Compiler should not force
mathematical precendence and for code like:
   x := y + 2 * 5
it should send series of messages:
   x := y.plus(2).mult(5)
programmer should define 'expression' class which will know also
'asIntger' method used to extract integer result calculated with
defined by programmer expression precedence. I do not know if RUBY
works in such way and fully implement above concept but if you want
to test such language then look for Smalltalk. It has only tree
things:
   1. objects
   2. messages
   3. assign instruction

Rest is written in small talk even language statements, f.e.
class integer understand message FOR ... [STEP ...],
class boolean understands method WHILE ..., class codeblock
has method EVAL, etc.
If you want to understand what OOP means then try to use smalltalk.
AFAIK this is the only one real OOP language.

> But I was very surprised then I've did an array test ADD(aI,{nI}).
> Ruby shows perfect performance here! Where is the trick?! I had an
> idea, that Ruby does not creates an arrays in my code, but uses
> array lazy creation. That's why I've rote last AADD(aI,{aI[nI-1][1]+1})
> test. Here value of every element depends on another element's value.
> In the end of loop I print value of last element, this should force
> lazy creation of all array elements and give "the true" execution
> speed. for me great surprise, Ruby's performance here remains greet!
> I don't have ideas why it has great performance on array creation and
> poor on simple numeric operations! BTW, array creation also contains
> + and -, but does not contain *, but I don't believe * is very
> difficult for Ruby.

If RUBY resolves operator precedence at runtime then such results
are not such amazing. Please also note that expression with - is
part of index what can enable some compile time optimizations for
excepted index type (integer).

> Java
> ====
> I can not see Java source of selected JavaVM implementation, but spec
> (http://java.sun.com/docs/books/jvms/second_edition/html/
> Mnemonics.doc.html) says, it has 202 (+3(reserved)-1(unused)) opcode.
> Java and can use just-in-time compile (JIT) execution mode. It means
> Java opcode can be compiled to real CPU code, thus making a
> significant execution speed improvement. Test were executed in both
> modes: JIT (default), and no-JIT. No-JIT mode is selected using -Xint
> execution option.
> 
> Java has typed variables, so it's execution speed is faster than
> execution speed of typeless languages, but a simple string
> concatenation test gives extremely bad performance (27 minutes
> against to 0.08..25 seconds from other languages).
> If I reduce loop count from 200'000 to 20'000. Execution time decreases
> from 27 minutes to 2.6 seconds (!) for both JIT and no-JIT modes. I can
> imagine the only reason for this, no reference counters are used and
> variables are released using garbage collector. Memory allocation
> during 27 min execution process is 10244 KB, so, only 3560 KB larger
> than a simple integer test.

And this test quite well exploits the bad cost of missing reference
counters. In many tests such languages are faster but in the moment
when you need really big number of variables the cost of activating
GC kills all speed improvement. Thing what will happen if you will
make
   SET FILTER TO <exp>
and <exp> will use few character fields and you will try to make
some operations on database which has really big number of records.
For database languages it will be killer. The other bad side effect
is much bigger memory used by single process. It means that running
more instances of programs compiled by such language on the same
machine reduces overall performance because sooner or later swap
will be used.

> If no reference counters are used, garbage collection should be called
>    20000 * 20001 / 2 / ( 3560 * 1024 ) = 54,86
> 54 times for 20'000 bytes (augmented) strings allocation. If number
> of strings (and string lengths) is increased up to 200'000. Garbage
> collector should be called
>    200000 * 200001 / 2 / ( 3560 * 1024 ) = 5486.33
> 5486 times. If garbage collection takes most of execution time (i.e.,
> 1650/5486 ~= 0.3 seconds), we can have a similar situation. But this
> should not be the only reason, because in this case execution time
> for 20'000 times loop should be approx. 0.3*54=16 seconds (it is 2.6
> seconds).

To answer why the speed difference is such big I will have to see
the details of GC and MM used by JAVA VM. Please note that when
you increase the size of memory blocks used for string item then you
can exploit also some MM limits, f.e. it may not find continuous
memory block large enough so it will 1-st execute GC and then
allocate new memory from OS if it's still necessary so the number
of GC activations does not have to be linear to total size of
allocated strings. It depends also on available large enough
continuous memory blocks what depends on memory allocation strategy
used by MM. It's also important to know if GC can make memory
realocations and change the addresses of allocated memory blocks
to create free continouse memory area.

> P.S. Here is another thing (not related to virtual machine and pcode
> evaluation), but pcode tracing allows to find out various things, for
> example to trace type of variables, or trace usage of constant values.

Yes. So far the only one "costant" value optimized by us is QSLEF()
but the same can be done also for other things. Anyhow here we cannot
fully benefit from optimizations on PCODE level. It will be much easier
and faster to make all these optimizations operating on expressions.
In such case detecting constant value will also enable some farther
expression optimizations. Just like type detection.

> This allows to make constant folding other optimisations
> (see http://en.wikipedia.org/wiki/Constant_folding). Ex.:
>     FOR nI := 1 TO 50
>        QOUT(nI)
>     NEXT
> can be compiled to:
>     int   local1;
>     local1 = 1;
>   lab00001:
>     hb_xvmPushFuncSymbol( symbols + 1 );
>     hb_xvmPushInteger( local1 );
>     if( hb_xvmDo( 1 ) ) break;
>     local1++;
>   lab00002:
>     fValue = local1 > 50;
>     if( !fValue )
>        goto lab00001;

The fValue is also not necessary here.
In this case it should be possible to make optimization on final
PCODE when C code is generated for -gc3 output using information
collected by PCODE tracer. Anyhow for full optimization we should
collect this information before PCODE is generated so we can much
better optimize the expression list. But for this we will have to
change the compiler and not generate PCODE "online" for each
expression but introduce new expressions for statments and keep
whole compiled code at least for single function (if we want to
intorduce function autoinlining or similar optimization then for
whole compiled module) as expression list for which we will add
expression tracer (just like PCODE tracer but easier to write and
probably much faster). With such code it will be much easier to
introduce many other optimizations.

> instead of:
>     hb_xvmPushInteger( 1 );
>     hb_xvmPushUnRef();
>     hb_xvmPopLocal( 1 );
>     goto lab00002;
>   lab00001: ;
>     hb_xvmPushFuncSymbol( symbols + 1 );
>     hb_xvmPushLocal( 1 );
>     if( hb_xvmDo( 1 ) ) break;
>     if( hb_xvmLocalIncPush( 1 ) ) break;
>   lab00002: ;
>     if( hb_xvmGreaterThenIntIs( 50, &fValue ) ) break;
>     if( !fValue )
>        goto lab00001;
> But perhaps we must wait for type declarations in Harbour instead of
> trying to guess variable types from pcode.

>From PCODE not but from expression list I will find it very useful.
But as I said it will force serious compiler modifications. Now you
can simply try to move some of information collected by PCODE tracer
to local variable structures so they can be used to improve -gc3
code performance.

best regards,
Przemek

ps. it will be much easier and faster to answer you without coping
    message body from Harbour mail list archive.
From druzus at acn.waw.pl  Mon Dec 29 13:06:14 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Dec 29 13:03:15 2008
Subject: [Harbour] Re: Array preallocation test
Message-ID: <20081229180614.GA5564@34-mo7-2.acn.waw.pl>

Hi Mindaugas,

> No Test code               Harbour  PHP   Python  Ruby  Java  Java+JIT
> ----------------------------------+------+------+------+------+-------+
> 31 AADD(aI,{nI})             0.46   0.29   0.32   0.20   0.76    0.40
> 32 AADD(aI,{aI[nI-1][1]+1})  0.53   0.34   0.38   0.39   0.92    0.40
> 
> Array preallocation is a simple (dozen of lines) improvement. Using it 
> Harbour execution time decreases from 0.46 and 0.53 to 0.16 and 0.25. I 
> can commit if there is no objection. It would be useful to do the same 
> for hashes.

Please do it. Let's make some tests with different C compilers.
BTW Hashes already uses preallocation though it's not classic
(multiple by two) algorithm but constant HB_HASH_ITEM_ALLOC value.
Maybe we should check what is better for different MMs.

best regards,
Przemek
From druzus at acn.waw.pl  Mon Dec 29 13:20:49 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Dec 29 13:17:50 2008
Subject: [Harbour] 2008-12-29 19:20 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081229182049.GA21232@34-mo7-2.acn.waw.pl>

2008-12-29 19:20 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcomp.h
  * harbour/include/hbmacro.ch
  * harbour/source/compiler/ppcomp.c
  * harbour/source/compiler/hbusage.c
  * harbour/source/compiler/cmdcheck.c
    + added -ko (allow operator optimizations) compiler switch
      It's disabled by default.

  * harbour/include/hbexprb.c
    * removed HB_ADD_SUB_ONE_OPT macro and enable optimizations covered
      by it when -ko switch is used.

  * harbour/source/common/expropt2.c
    * disabled <exp> + 0 => <exp>, <exp> + "" => <exp>, - - <exp> => <exp>
      optimizations for default compiler settings. They can be enabled by
      -ko compiler switch
    + added optimizations for numeric values and + operator which uses
      standard mathematical + behavior for real numbers:
         a + b + c == a + ( b + c )
         a + b == b + a
      It's disabled by default and can be enabled by -ko compiler switch.
      There are also other similar optimizations which can be added in
      this way.

  * harbour/include/hbapi.h
  * harbour/source/vm/itemapi.c
  * harbour/source/vm/fm.c
    ! fixed redundant call to hb_xrealloc() in string resize operation.
      Thanks to Mindaugas for locating it.

best regards
Przemek
From druzus at acn.waw.pl  Mon Dec 29 13:59:26 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Dec 29 13:56:28 2008
Subject: [Harbour] Re: DIRNAME
Message-ID: <20081229185926.GA12351@34-mo7-2.acn.waw.pl>

Hi Saulius,

> In file \harbour\contrib\hbct\disk.c function DIRNAME there is line:
>    hb_fsCurDirBuff( hb_fsCurDrv(), pbyBuffer + 1, _POSIX_PATH_MAX );
> IMO it must be changed to:
>    hb_fsCurDirBuff( hb_fsCurDrv() + 1, pbyBuffer + 1, _POSIX_PATH_MAX );
> because hb_fsCurDrv() returns
> /* NOTE: 0=A:, 1=B:, 2=C:, 3=D:, ... */
> and hb_fsCurDirBuff:
>    USHORT hb_fsCurDirBuff( USHORT uiDrive, BYTE * pbyBuffer, ULONG ulLen )
> assumes parameter uiDrive:
>    /* NOTE: 0 = current drive, 1 = A, 2 = B, 3 = C, etc. */

Yes, it's a bug. But it should be fixed in different way.
First we should add support for optional cDrive parameter. Then we should
use 0 if cDrive is not given. On some platforms it's not possible to check
current directory for not default drive without setting given drive as
default. Default drive and directory are usually process attributes not
thread ones so changing default drive or directory is not MT safe because
it will interact with other threads so we should not force such operation
if it's possible. It means that final version if DIRNAME() should look:

HB_FUNC( DIRNAME )
{
   BYTE *pbyBuffer = ( BYTE * ) hb_xgrab( _POSIX_PATH_MAX + 1 );
   unsigned char *pszDrive = ( unsigned char * ) hb_parc( 1 );
   USHORT uiDrive = 0;

   if( pszDrive )
   {
      /* some network drivers (f.e. NETX from Novel Netware) allow
       * to create drives after 'Z' letter.
       */
      if( *pszDrive >= 'A' && *pszDrive < 'A' + 32 )
         uiDrive = *pszDrive - ( 'A' - 1 );
      else if( *pszDrive >= 'a' && *pszDrive < 'a' + 32 )
         uiDrive = *pszDrive - ( 'a' - 1 );
   }
   pbyBuffer[0] = HB_OS_PATH_DELIM_CHR;
   hb_fsCurDirBuff( uiDrive, pbyBuffer + 1, _POSIX_PATH_MAX );

   hb_retc_buffer( ( char * ) pbyBuffer );
}

I'll commit the fix. Thanks for the information.

best regards,
Przemek
From jarabal at gmail.com  Mon Dec 29 13:56:41 2008
From: jarabal at gmail.com (Xavi)
Date: Mon Dec 29 13:57:28 2008
Subject: [Harbour] Test: list delivery disabled ???
Message-ID: <49591D69.5060806@gmail.com>

All the people on the list is disable ???
http://lists.harbour-project.org/mailman/roster/harbour
I do not understand anything, but I have to activate delivery and test.

Regards
Xavi
From druzus at acn.waw.pl  Mon Dec 29 14:23:19 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Mon Dec 29 14:20:21 2008
Subject: [Harbour] 2008-12-29 20:23 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081229192319.GA3869@34-mo7-2.acn.waw.pl>

2008-12-29 20:23 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/contrib/hbct/disk.c
    ! fixed dirname() - thanks to Saulius

best regards
Przemek
From info at fsgiudice.com  Mon Dec 29 14:27:00 2008
From: info at fsgiudice.com (Francesco Saverio Giudice)
Date: Mon Dec 29 14:27:10 2008
Subject: [Harbour] test
Message-ID: <49592484.2070508@fsgiudice.com>

pls ignore

Best regards

Francesco
From maurilio.longo at libero.it  Tue Dec 30 03:52:32 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Tue Dec 30 03:52:36 2008
Subject: [Harbour] test
Message-ID: <4959E150.6060701@libero.it>

No more messages since december 20th this year, is this correct?

Maurilio.

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From toninhofwi at yahoo.com.br  Tue Dec 30 06:47:38 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Dec 30 05:46:58 2008
Subject: [Harbour] Re: test
Message-ID: <8g2kl4ttskku0lfl9nvm0dfm8q9ub79aj0@4ax.com>

>No more messages since december 20th this year, is this correct?
>Maurilio.

Unfortunately yes....

Regards,

Toninho.


	

	
		
_______________________________________________________ 
Yahoo! Mail - Sempre a melhor opo para voc! 
Experimente j e veja as novidades. 
http://br.yahoo.com/mailbeta/tudonovo/
From druzus at acn.waw.pl  Tue Dec 30 06:02:49 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Dec 30 05:59:50 2008
Subject: [Harbour] 2008-12-30 12:02 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081230110249.GA21325@34-mo7-2.acn.waw.pl>

2008-12-30 12:02 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbcomp.h
  * harbour/include/hbcompdf.h
  * harbour/include/hbexprb.c
  * harbour/source/common/expropt2.c
  * harbour/source/compiler/hbmain.c
  * harbour/source/compiler/hbcomp.c
  * harbour/source/compiler/harbour.y
  * harbour/source/compiler/harbour.yyc
    ! fixed <cConst1> == <cConst2> => <lConst> optimizations if
      <cConst1> or <cConst2> contains valid &macro. Such expressions
      cannot be optimized if -kM compiler switch is not used, f.e.:
         M->V := "ABC"
         ? "[&V]" == "[ABC]"
    ! fixed <cConst1> $ <cConst2> => <lConst> optimizations if
      <cConst1> or <cConst2> contains valid &macro. Such expressions
      cannot be optimized if -kM compiler switch is not used, f.e.:
         M->V := "ABC"
         ? "[&V]" $ " [ABC] "
    % do not disable <cConst1> + <cConst2> => <cConst> and
      <cConst1> - <cConst2> => <cConst> optimization when <cConst1> or
      <cConst2> contains valid &macro but -kM compiler switch is used.

  * harbour/include/hbexprb.c
    * cover ! ! <exp> => <exp> optimization by -ko compile time switch

  * harbour/doc/cmpopt.txt
    * updated compiler optimization description

best regards
Przemek
From druzus at acn.waw.pl  Tue Dec 30 06:19:22 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Dec 30 06:16:21 2008
Subject: [Harbour] Re: test
In-Reply-To: <8g2kl4ttskku0lfl9nvm0dfm8q9ub79aj0@4ax.com>
References: <8g2kl4ttskku0lfl9nvm0dfm8q9ub79aj0@4ax.com>
Message-ID: <20081230111922.GA10232@34-mo7-2.acn.waw.pl>

On Tue, 30 Dec 2008, Toninho@fwi wrote:

Hi Toninho and all,

> >No more messages since december 20th this year, is this correct?
> >Maurilio.
> Unfortunately yes....

I've just received three messages send today.
I do not know if it helped but yesterday I was changing my
Harbour mail list account settings and reenabled mail delivering.
It wasn't helped for yesterday messages but today I received
your, Maurilio and my own ChangeLog messages.
Just try, maybe it will help also for you.

best regards,
Przemek
From druzus at acn.waw.pl  Tue Dec 30 07:43:42 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Dec 30 07:40:42 2008
Subject: [Harbour] Re: Some more pcode hacking
Message-ID: <20081230124342.GA5316@34-mo7-2.acn.waw.pl>

Hi Mindaugas,

> I've installed VirtualBox and a new openSUSE 11.1 inside it last 
> weekend. My first Harbour SVN Linux compile was successful! I've just 
> needed to find out that I need to install (and how can I do this) 
> packages: subversion, ncurses-devel, xorg-x11-devel. ./make_gnu.sh >& 
> make_gnu.log do the job. The only thing I was unable to do in Linux is 
> to create shortcut on desktop. I've spent more than a hour on Gnome 
> desktop, trying to use GUI "Create Launcher..." and command line "ln -s 
> ..." without success.

I do not use GNOME desktop so I'll not help you. Now I'm using
KDE3 and sometimes when I want to see or show someone really
amazing 3D desktop then I'm switching to KDE4 and compose.

> Well, I forgot the main idea... :) All these VirtualBox virtualizations 
> made me think about possibility to virtualize pcode evaluation. By 
> saying "virtualize" I mean some kind of safe pcode evaluation, which 
> could not crash existing virtual machine and its software. Perhaps the 
> correct way to do it is running one more virtual machine with a copy of 
> global symbols, etc., but I'm not smart enough to do implementation of 
> this idea. So, I've started to go another way: pcode analysis and fixup. 
> This approach is a little similar to just-in-time re-compilation used in 
> virtualization.

This is partially done in MT mode. By default each thread has its
own resources like memvar variables, workareas, SETs, ...
Only pure STATIC variables, some common devices like GT drivers
(if thread does not create its own GT window) and function list
is shared. I guess that you would like to add support for separated
function list too and it should be enough for basic protection.

> New "virtualized" pcode could be supplied in .hrb format. "Virtualizer" 
> analyses this pcode and asks parent process, if some functions can be 
> called from new code (ex., perhaps we are going to forbid __QUIT() 
> call). The choices are: allow (pcode is not changed), callback (each 
> query is redirected to callback function and result is returned to 
> virtualized code), and forbid (virtualizer does not execute pcode at 
> all). The same approach can be used to control access of memvars, fields 
> of database aliases.

The problem is with macros. As long as you do not forbid direct macro
evaluation in executed code then user will be able to create code
which will ignore your protection. You also should forbid any calls
to functions which can compile and execute macros or can load other
.hrb modules without your protection. This is the most weakest part
of static protection implemented as part of .hrb load operation.
In practice if you do not want to cut functionality to few extremely
simple functions then user will find a way to execute his own macros
f.e. using one of WA expression.

> I've spend a night to write test code, but this is only very alpha stage 
> of implementation: codeblocks are not analysed; memvar, alias are not 
> analysed; code is not tested on .hrb with branching instructions, etc. I 
> wanted to finish implementation before sending code to mailing list, but 
> I feel I have more important jobs. So, here is very alpha test version: 
> http://www.dbtopas.lt/hrb/sanitize.zip
> I think it is not the code to occupy name "virtualize", so I've used 
> "sanitize" instead.

Such protection is interesting and useful but only for some very simple
functions where it can work if you arbitrary block everything except
some function and variables strictly defined by you. Adding support for
all functions and excluding only chosen one is not sufficient - there
is too much code which can accept and evaluate macro expressions as
string in core code and usually also in user code.
It means that for real vitalization we will need support at runtime.
We can extend MT code and add support for thread local functions and
blocking access to some others. It should be quite efficient method
and in many places enough.
We can also extended OOP scoping and respect them in non OOP code
to control access to functions, aliases, variables and fields though
it will probably need much more modifications and good startup
description for scoping in Harbour core code. Using code already
created for thread separation seems to be much easier.

BTW I see that you recently make many different operations on PCODE.
There is one missing functionality which may be interesting for some
people: real codeblock serialization. To make it if will be necessary
to scan PCODE and create list of symbols accessed by the PCODE. Then
store the PCODE with indexes to new list updated. In more advanced
version instead of updating indexes we can also replace all indexes
to symbol table with addresses of dynamic symbols (just like in
codeblocks created by macro compiler) which will be updated when
codeblock is restored. It will eliminate registering new symbol
table with codeblock. Unfortunately it's more complicated because
it's necessary to reallocate PCODE and update also all jumps and
we will need some additional PCODE for extended codeblocks. Anyhow
if the rest will work then we can think about adding some alternative
PCODEs which will use indexes to table with dynamic symbol addresses
so we can keep original size.
After restoring all detached local variables used by codeblock will
be replaced by new codeblock local ones. If necessary new symbol table
will be created and registered (I'll introduce some registering code
to reuse existing symbol tables). By default all calls to static functions
will be replaced by calls to global ones but I hope it will not be big
problem. We should only document it as expected behavior.
If we will need standard symbol table then we can store the list
of used symbols with original indexes and I can add function which will
scan existing symbol tables for the one which can be used to avoid
allocation of the new one.
The question is only if we really want to add real codeblock
serialization and then keep the code synced with PCODE list.
What's your and other opinion about it?

best regards,
Przemek
From druzus at acn.waw.pl  Tue Dec 30 08:16:37 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Tue Dec 30 08:13:37 2008
Subject: [Harbour] RDDSQL warnings
Message-ID: <20081230131637.GA9727@34-mo7-2.acn.waw.pl>

Hi Mindaugas,

Can you look at this warnings:

../../sqlbase.c: In function ?sqlbaseCreate?:
../../sqlbase.c:509: warning: comparison of unsigned expression < 0 is always false
../../sqlmix.c:371: warning: ?hb_mixTagPrintNode? defined but not used

The first one is caused by redundant pArea->ulConnection < 0 which is
always false so I can clean it myself but I do not want if I should
comment the hb_mixTagPrintNode() function.

best regards,
Przemek
From dbtopas at dbtopas.lt  Tue Dec 30 10:29:24 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Dec 30 10:31:15 2008
Subject: [Harbour] Re: Virtual machine comparison
Message-ID: <495A3E54.6080102@dbtopas.lt>

Hi,


> It will be also good to see the performance of codeblocks and/or
> macros evaluation if language support them. Sometimes tricks/optimizations
> used in compile time cannot be used for codeblocks or macros or even
> force some solutions which make them slower then necessary.

I know Python has lambda function, and Ruby has well-known for us syntax 
{|x| ... }. But I do not know these languages, so I've just tried the 
most simple tests. I know nothing about macro in these languages.


>> The execution time for cI:=cI+"a" and cI+="a" test are very different.
>> This can be optimized at pcode (or expressions) level, but I'm not
>> sure it can be done. Objects can have different behaviour for "+", and
>> "+=" operators. Am I wrong here?
> 
> We do not have difference at runtime. In both cases "+" operator is send
> to object. The maybe ":=" but this operator was probably added as some
> workaround for missing destructors in the early Harbour classy code.
> It was never working correctly in all cases and I would like to remove it.

OK, so, just tell after it will be ready. I'll add optimisation for:
   HB_P_PUSHLOCAL[NEAR] <n>
   HB_P_PUSH_any_const_value
   HB_P_PLUS
   HB_P_POPLOCAL[NEAR] <n>
to
   HB_P_PUSHLOCAL[NEAR]REF <n>
   HB_P_PUSH_any_const_value
   HB_P_PLUSEQPOP
and the same for -, *, /, etc.


>> We can increase performance of Harbour array/hash by preallocation,
>> if memory manager does not do preallocation of realloc'ed memory
>> blocks.
> 
> Yes though here we can try to make it without additional memory
> overhead for the holder of preallocated memory size. It's possible
> because we do not use reference counter for pBaseArray->pItems memory
> block so we can use it.

I do not think saving 4 bytes is worth to playing with "hidden" counter 
of fm module, but maybe it's some advantages of this method I do not see?


>> PHP has opcode handler table, i.e., each opcode is handled using:
>>     operation->handler( ... )
>> Instead of Harbour's:
>>     switch( operation->opcode )
>>     {
>>        case MULT:
>>           MULT_handler( ... );
>>           exit;
>>     }
>> Actually, this is optimized by most compilers and long switch sentence
>> is replaced by:
>>     goto handler_table[ operation->opcode ];
> 
> Yes though if you want to maximize the speed then storing PCODEs in
> the array of integers instead of bytes will be more efficient with the
> cost of size. In such case we can eliminate all *NEAR/*FAR PCODEs and
> use only one version which will operate on 32bit integer and we will
> not be blocked by number of OPCODEs.

Why array of integers is more efficient? Just because of asm( cbw, cwd ) 
conversion, or there are more reason? Do you mean the whole OPCODE is 4 
bytes? Or OPCODE + parameters uses a fixed 4 byte? We do not need 2^32 
OPCODEs, but sometime is really boring to duplicate optimizer code for 
all NEAR/FAR, so I'm not sure if for example HB_P_POPALIASEDFIELDNEAR is 
very useful in pcode. PCode size difference in 10-20% is not any problem 
for me.


> In main VM loop we have also:
>       if( hb_vmThreadRequest )
>          hb_vmRequestTest();
> which is used for MT mode. It can be eliminated and replaced by
> hb_stackGetActionRequest() but it will be necessary to change the
> code which operates on hb_stack.uiActionRequest to make only MT
> safe assignment/access and accept multiple flags.

If this will require some mutexes for synchronisation, we will not have 
any speed advantage.


>> but it better handles cI:=cI+"a" optimisation. I guess array
> 
> Check also -gc3 performance. Such expressions will also be optimized
> even without compile time optimization. It's enough to introduce new
> OPCODE.

If cI:=cI+"a" optimisation to cI+="a" does not have any side effects for 
object operator overload, we can do it without new opcode.


>> preallocation can help Harbour reach the speed of Python lists.
> 
> It will depend on memory manager. I made some tests in SUSE 11.0 and
> xHarbour with array preallocation is still noticeable slower in AADD()
> then Harbour without it. Anyhow it's good to add it. At least it will
> make BCC users happy ;-).

It's not a question of BCC now (1.1.0 dev). BCC uses dlmalloc by 
default. Preallocation gives speed advantage with this MM also. BTW, 
"AADD()" test gives 11.31 seconds in 1.0.1 (standard BCC MM) vs. 0.25 
seconds (dlmalloc MM).


> It will be much easier
> and faster to make all these optimizations operating on expressions.
> In such case detecting constant value will also enable some farther
> expression optimizations. Just like type detection.
> ...
> Anyhow for full optimization we should
> collect this information before PCODE is generated so we can much
> better optimize the expression list. But for this we will have to
> change the compiler and not generate PCODE "online" for each
> expression but introduce new expressions for statments and keep
> whole compiled code at least for single function ...

I know this problem of current compiler, but I do not know how difficult 
is to change this. Do we need to rewrite the whole harbour.y and all 
most helper hb_comp* functions? Or this is a smaller work?


>> instead of:
>>     hb_xvmPushInteger( 1 );
>>     hb_xvmPushUnRef();
>>     hb_xvmPopLocal( 1 );
>>     goto lab00002;
>>   lab00001: ;
>>     hb_xvmPushFuncSymbol( symbols + 1 );
>>     hb_xvmPushLocal( 1 );
>>     if( hb_xvmDo( 1 ) ) break;
>>     if( hb_xvmLocalIncPush( 1 ) ) break;
>>   lab00002: ;
>>     if( hb_xvmGreaterThenIntIs( 50, &fValue ) ) break;
>>     if( !fValue )
>>        goto lab00001;
>> But perhaps we must wait for type declarations in Harbour instead of
>> trying to guess variable types from pcode.
> 
> From PCODE not but from expression list I will find it very useful.
> But as I said it will force serious compiler modifications. Now you
> can simply try to move some of information collected by PCODE tracer
> to local variable structures so they can be used to improve -gc3
> code performance.


During last few days I've read Java virtual machine specification 
http://java.sun.com/docs/books/jvms/second_edition/html/VMSpecTOC.doc.html 
and article about Native Client 
http://nativeclient.googlecode.com/svn/trunk/nacl/googleclient/
native_client/documentation/nacl_paper.pdf

It was interesting articles. JavaVM spec is very related to 
optimisations we are doing now. Both articles are related to pcode 
validation. For example, I've found a good theoretical facts about pcode 
tracing. Java .class file loader analyses and validates pcode and 
specification describes the detail procedure of this.

These papers made me think a little wider (and more philosophical), and 
think about the goal I'm trying to reach. The primary idea of different 
VM comparison was to see execution speed and to find (and fix) a weak 
implementations in Harbour. After implementation of a few new 
optimisations and preallocations we can be better than other languages, 
except for Java numeric operations. They are really fast (a few times 
faster) in Java and perhaps almost unreachable in Java+JIT (50 times 
faster). The main reason of speed is strong typed variables.

Weak typed variables and dynamic allocated structures are implemented 
quite well in Harbour. Maybe we can improve execution speed of weak 
typed operations by some 10-30% percent, but we will not improve speed a 
few times for it. Using strong typing let as improve speed a few (or 
more) times. So, the only way for significant speed improvement is 
strong typing.
Many optimisations we are talking about now are available, is also 
related to strong typing. But here we do not have explicit type 
declaration by programmer, but we try to guess variable types from 
pcode. I see the real strong typing more appropriate solution here.
    LOCAL nI, nJ AS INTEGER
and expression tree will help to solve many optimization issues, we are 
trying to do.

The other question is how can we optimize pcode (how can we use strong 
typing in pcode).
-gc3 is a kind of JIT for Harbour. We can optimize for loop to:
     int   local1;
     local1 = 1;
   lab00001:
     hb_xvmPushFuncSymbol( symbols + 1 );
     hb_xvmPushInteger( local1 );
     if( hb_xvmDo( 1 ) ) break;
     local1++;
   lab00002:
     if( local1 <= 50 ) goto lab00001;
But -gc3 could not be used in dynamic loadable .hrb files. It would be 
nice to use strong typing information to speed up pcode evaluation also.
Here is some ideas:

PROC AAA(aParam /* untyped */)
   LOCAL aI AS ARRAY
   LOCAL nI AS INTEGER

   nI = LEN(aParam) + LEN(aI)

HB_P_ZERO                 // just an idea: make place for retvalue
HB_P_PUSHFUNCSYM, LEN$IA  //
HB_P_PUSHLOCAL, 1
HB_P_TY_CHECK, array      // convert to strong typed
HB_P_TY_FUNCTION, 1
HB_P_PUSHFUNCSYM, LEN$IA
HB_P_PUSHLOCAL, 2
HB_P_TY_FUNCTION, 1
HB_P_TY_PLUS_INTEGER
HB_P_TY_POPLOCAL_INTEGER, 4


switch( pCode[ w ] )
{
    case HB_P_TY_FUNCTION:
    {
       pSymbol = ...;

       switch( pCode[ w ] )
       {
          case 0:
             pSymbol->pFunc(hb_stackItemFromTop(-3));
             break;
          case 1:
             pSymbol->pFunc(hb_stackItemFromTop(-1),
                            hb_stackItemFromTop(-4));
             break;
          ...
       }
    }
    case HB_P_TY_PLUS_INTEGER:
       hb_stackItemFromTop(-2)->asInteger.value =
          hb_stackItemFromTop(-2)->asInteger.value +
          hb_stackItemFromTop(-1)->asInteger.value;
       hb_stackDec();
       break;

    case HB_P_TY_POPLOCAL_INTEGER:
       hb_stackLocalVariable( MK_PCODE_SHORT(&pCode[w]) 
)->asInteger.value = hb_stackItemFromTop(-1)->asInteger.value;
       hb_stackDec();
       break;
    }
}

// This function will be included into symbol table using mangled
// name: LEN$IA, here I is for return value Integer, A for Array param
void HB_TY_FUN_LEN_IA( PHB_ITEM pArray, PHB_ITEM pResult )
{
    pResult->asInteger.value = pArray->asArray.value->ulSize;
}

We can declare and implement a few LEN() functions: both strong typed 
and untyped version. Compiler will generate the code to do the most 
efficient call.

I see, I must stop writing, because I'm trying to express my ideas (that 
are not clear enough for myself) in a foreign language. So, perhaps 
nobody will understand it :)
From mbelgrano at deltain.it  Tue Dec 30 11:09:09 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Tue Dec 30 11:09:25 2008
Subject: [Harbour] Happy new Year
Message-ID: <609353e70812300809v7653e3fu3d20767891c21001@mail.gmail.com>

*                                                                _
 _   _                     _    _             _  _             | |
/|   |\                    |\   |\            /  |\            |_|
 |___|  _   _    _         | \  |  _         /   |  _   _  ,_   _
 |   | / | | \  | \  / |   |  \ | /_\ / / |  \___|//_\ / | | ` / \
\|   |/\_|/|_/_/|_/_/\_|  \|   \| \__/\_\_|     /| \__/\_|/|   \_/
     '     |    |     /|        `              ( |
           |    |     \|                        \|
                                                 . `:
                                                : : .
                                                 : .
                                                [""]
                                                |  |
                                                |  |
                                                |  |
                                       :       .'--`.
                   _..-~-.._         : .:     /`.__.'\
                 .'         `.      :    .   /        \
               .'  .-'''''-.  `.   ,-'``'-. ;          ;
              /  ,'   XII   `.  \  |`-..-'| |   ,--.   |
             /  /     /|\     \  \ | .   :| |_.','`.`._|
             | ;       |       ; | | . :  | |--'2009`--|
             | |IX     o    III| | |`-..-'| ||   | | | |
             | ;               ; | \::::::/ ||)|/|)|)|\|
             |  \             /  |  `::::'  |._ ~**~ _.|
       ------|   `.   V I   ,'   |----)(----|  `-..-'  |-------
        _____j     `-.....-'     |    )(    |          |,--.
   ____/ /  /\\ ,-._.--------.-.-' ,-')('-. |          |\`;/
.-()___  :  |`.!,-'`'/`-._  (___) (  '  `  )`-._    _.-'|;,|
`-,    \_\__\`,-'>-.,-._           `-....-'     ````    `--'  hjw
  `-._       (`- `-._`-.`

*



--
Massimo Belgrano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081230/9d1edb31/attachment.html
From dbtopas at dbtopas.lt  Tue Dec 30 11:13:02 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Dec 30 11:14:52 2008
Subject: [Harbour] ChangeLog 2008-12-30 18:10 UTC+0200 Mindaugas Kavaliauskas
Message-ID: <495A488E.10302@dbtopas.lt>

2008-12-30 18:10 UTC+0200 Mindaugas Kavaliauskas (dbtopas/at/dbtopas.lt)
   * harbour/include/hbapi.h
   * harbour/source/vm/arrays.c
     + added array preallocation

   * harbour/contrib/rddsql/sqlbase.c
   * harbour/contrib/rddsql/sqlmix.c
     * fixed a few compile time warnings
From gvarona at ec-red.com  Tue Dec 30 12:42:19 2008
From: gvarona at ec-red.com (=?ISO-8859-1?Q?Guillermo_Varona_Silup=FA?=)
Date: Tue Dec 30 12:42:36 2008
Subject: [Harbour] Re: test
Message-ID: <495A5D7B.8070105@ec-red.com>

Well, I also went to activate my mailing list that was this:
*Note: your list delivery is currently disabled; it was disabled due to 
excessive bounces. The last bounce was received on 27-Dec-2008.*

Best Regards.

GVS

From jarabal at gmail.com  Tue Dec 30 12:52:38 2008
From: jarabal at gmail.com (Xavi)
Date: Tue Dec 30 12:53:26 2008
Subject: [Harbour] Happy new Year
In-Reply-To: <609353e70812300809v7653e3fu3d20767891c21001@mail.gmail.com>
References: <609353e70812300809v7653e3fu3d20767891c21001@mail.gmail.com>
Message-ID: <495A5FE6.7010406@gmail.com>

+1
and Merry Christmas back!
Now that the list has to send emails most people have turned off the mail delivering by bounces.

Best regards
Xavi

Massimo Belgrano escribi?:
> **                                                                _
>  _   _                     _    _             _  _             | |
> /|   |\                    |\   |\            /  |\            |_|
>  |___|  _   _    _         | \  |  _         /   |  _   _  ,_   _
> 
>  |   | / | | \  | \  / |   |  \ | /_\ / / |  \___|//_\ / | | ` / \
> \|   |/\_|/|_/_/|_/_/\_|  \|   \| \__/\_\_|     /| \__/\_|/|   \_/
>      '     |    |     /|        `              ( |
>            |    |     \|                        \|
> 
>                                                  . `:
>                                                 : : .
>                                                  : .
>                                                 [""]
> 
>                                                 |  |
>                                                 |  |
>                                                 |  |
>                                        :       .'--`.
> 
>                    _..-~-.._         : .:     /`.__.'\
>                  .'         `.      :    .   /        \
>                .'  .-'''''-.  `.   ,-'``'-. ;          ;
>               /  ,'   XII   `.  \  |`-..-'| |   ,--.   |
> 
>              /  /     /|\     \  \ | .   :| |_.','`.`._|
>              | ;       |       ; | | . :  | |--'2009`--|
>              | |IX     o    III| | |`-..-'| ||   | | | |
>              | ;               ; | \::::::/ ||)|/|)|)|\|
> 
>              |  \             /  |  `::::'  |._ ~**~ _.|
>        ------|   `.   V I   ,'   |----)(----|  `-..-'  |-------
>         _____j     `-.....-'     |    )(    |          |,--.
>    ____/ /  /\\ ,-._.--------.-.-' ,-')('-. |          |\`;/
> 
> .-()___  :  |`.!,-'`'/`-._  (___) (  '  `  )`-._    _.-'|;,|
> `-,    \_\__\`,-'>-.,-._           `-....-'     ````    `--'  hjw
>   `-._       (`- `-._`-.`
>               
> **
> 
> 
> 
> --
> Massimo Belgrano
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour

From dbtopas at dbtopas.lt  Tue Dec 30 14:20:42 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Dec 30 14:22:33 2008
Subject: [Harbour] Re: Some more pcode hacking (or Linux for the Dummies)
Message-ID: <495A748A.6090206@dbtopas.lt>

>> I've installed VirtualBox and a new openSUSE 11.1 inside it last 
>> weekend. My first Harbour SVN Linux compile was successful! I've just 
>> needed to find out that I need to install (and how can I do this) 
>> packages: subversion, ncurses-devel, xorg-x11-devel. ./make_gnu.sh >& 
>> make_gnu.log do the job. The only thing I was unable to do in Linux is 
>> to create shortcut on desktop. I've spent more than a hour on Gnome 
>> desktop, trying to use GUI "Create Launcher..." and command line "ln -s 
>> ..." without success.
> 
> I do not use GNOME desktop so I'll not help you. Now I'm using
> KDE3 and sometimes when I want to see or show someone really
> amazing 3D desktop then I'm switching to KDE4 and compose.

Hi,


I've installed KDE4, but I still unable to create shortcut icon on 
desktop :)

My action:
Desktop folder -> Right click -> Create New -> Link to Application... -> 
"Application" tab -> Name: mc -> Command: /usr/bin/mc -> "Permissions" 
tab: controls disabled, so I press -> OK

If I press Left mouse button, KDE icon-ball is jumping but I do not see 
any Midnight commander. So, I try to fix permissions (controls was 
grayed before I've pressed [OK] last time).

New icon -> Right click -> Properties -> Permissions tab (now controls 
are enabled, not grayed) -> Is executable: mark -> OK

So, now shortcut has executable attribute, but after pressing it I do 
not see Midnight commander, only KDE icon is jumping.



Best regards,
Mindaugas

P.S. sometimes I really thing do I need that Gnome or KDE. Usually I'm 
sitting in FarManager in Windows, and mc in linux, but I can ssh to 
Linux in VirtualBox.

From dbtopas at dbtopas.lt  Tue Dec 30 14:40:54 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Tue Dec 30 14:42:44 2008
Subject: [Harbour] Re: Some more pcode hacking
Message-ID: <495A7946.2050102@dbtopas.lt>

> The problem is with macros. As long as you do not forbid direct macro
> evaluation in executed code then user will be able to create code
> which will ignore your protection. You also should forbid any calls
> to functions which can compile and execute macros or can load other
> .hrb modules without your protection. This is the most weakest part
> of static protection implemented as part of .hrb load operation.
> In practice if you do not want to cut functionality to few extremely
> simple functions then user will find a way to execute his own macros
> f.e. using one of WA expression.

Yes, I know macros are the problem, but I did not thought it so big.


> BTW I see that you recently make many different operations on PCODE.
> There is one missing functionality which may be interesting for some
> people: real codeblock serialization.

> To make it if will be necessary
> to scan PCODE and create list of symbols accessed by the PCODE. 

Not a problem.

> Then
> store the PCODE with indexes to new list updated.

Not a problem.

> In more advanced
> version instead of updating indexes we can also replace all indexes
> to symbol table with addresses of dynamic symbols (just like in
> codeblocks created by macro compiler) which will be updated when
> codeblock is restored.

I should look to macro compile pcode. Both HB_P_M* and HB_P_MACRO* pcode 
are terra incongnita for me.

> It will eliminate registering new symbol
> table with codeblock. 

Perhaps we should do it, otherwise a lot of memory space could be wasted 
if many codeblocks will be loaded into the system.

> Unfortunately it's more complicated because
> it's necessary to reallocate PCODE and update also all jumps and
> we will need some additional PCODE for extended codeblocks. 

Not a problem sanitize.zip:/sanitize.c lines 835-953 do this.


> If we will need standard symbol table then we can store the list
> of used symbols with original indexes and I can add function which will
> scan existing symbol tables for the one which can be used to avoid
> allocation of the new one.

But codeblock can be saved from another application, etc. So, no 
existing table with all needed symbols could be found. We can create new 
symbol table and include required symbols from global symbol table into 
it. This symbol table can be used for all deserialized codeblocks.

> The question is only if we really want to add real codeblock
> serialization and then keep the code synced with PCODE list.
> What's your and other opinion about it?

What do you "mean keep code synced PCODE list"?

I do not use (and do not need) codeblock serialization in my projects. I 
use .hrb files to inject some new code into existing applications. But 
if people really need it, and it is nice (but not hacky) feature, we can 
add it.


Regards,
Mindaugas
From toninhofwi at yahoo.com.br  Tue Dec 30 19:12:31 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Tue Dec 30 19:12:32 2008
Subject: [Harbour] Re: test
In-Reply-To: <495A5D7B.8070105@ec-red.com>
References: <495A5D7B.8070105@ec-red.com>
Message-ID: <61ell4po8vk4ugjf0v2p2b994rp1hfqbiq@4ax.com>

>Well, I also went to activate my mailing list that was this:
>*Note: your list delivery is currently disabled; it was disabled due to 
>excessive bounces. The last bounce was received on 27-Dec-2008.*

Hi ppl,

I fix my mail in this way, thanks Przemek:

>I've just received three messages send today.
>I do not know if it helped but yesterday I was changing my
>Harbour mail list account settings and reenabled mail delivering.
>It wasn't helped for yesterday messages but today I received
>your, Maurilio and my own ChangeLog messages.
>Just try, maybe it will help also for you.


Best regards,

Toninho.
__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From maurilio.longo at libero.it  Wed Dec 31 04:35:14 2008
From: maurilio.longo at libero.it (Maurilio Longo)
Date: Wed Dec 31 04:35:25 2008
Subject: [Harbour] Mail problems
In-Reply-To: <1229501975.6630.1.camel@SunSpot>
References: <1229501975.6630.1.camel@SunSpot>
Message-ID: <495B3CD2.3090808@libero.it>

Phil,

I'm not receiving messages since december the 20th, are there problems with
the mailing list?

Happy New Year

Maurilio.

Phil Barnett wrote:
> I'm experiencing mail problems and the ones on the list are probably
> related. I'm working on it. I may have to take the list off of the
> Mailscanner route. That's easy to do and probably my next step.
> 
> _______________________________________________
> Harbour mailing list
> Harbour@harbour-project.org
> http://lists.harbour-project.org/mailman/listinfo/harbour
> 

-- 
 __________
|  |  | |__| Maurilio Longo
|_|_|_|____| farmaconsult s.r.l.


From toninhofwi at yahoo.com.br  Wed Dec 31 06:54:22 2008
From: toninhofwi at yahoo.com.br (Toninho@fwi)
Date: Wed Dec 31 05:53:38 2008
Subject: [Harbour] Mail problems
In-Reply-To: <495B3CD2.3090808@libero.it>
References: <1229501975.6630.1.camel@SunSpot> <495B3CD2.3090808@libero.it>
Message-ID: <1anml41k90rl65kad2m7u1pttobdkf9dp9@4ax.com>

>I'm not receiving messages since december the 20th, are there problems with
>the mailing list?
>
>Happy New Year

Hi Maurilio,

Please, try change Harbour mail list account settings and reenabled
mail delivering.


Regards,

Toninho.

__________________________________________________
Faa ligaes para outros computadores com o novo Yahoo! Messenger 
http://br.beta.messenger.yahoo.com/ 
From modicr at astralit.com  Wed Dec 31 06:37:02 2008
From: modicr at astralit.com (roman modic)
Date: Wed Dec 31 06:37:08 2008
Subject: [Harbour] OT: Visual Studio 2008 and Windows 9x
Message-ID: <64A66B1445434B2BAC29470B533FBF43@adminPC>

Hello!

IMHO this is interesting for those who still target Windows 98/95/ME (and NT 4.0) platforms:

http://www.legacyextender.com/

Happy 2009, 
Roman
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081231/c711572e/attachment.html
From druzus at acn.waw.pl  Wed Dec 31 07:59:30 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Dec 31 07:56:29 2008
Subject: [Harbour] Re: Virtual machine comparison
In-Reply-To: <495A3E54.6080102@dbtopas.lt>
References: <495A3E54.6080102@dbtopas.lt>
Message-ID: <20081231125930.GA10423@34-mo7-2.acn.waw.pl>

On Tue, 30 Dec 2008, Mindaugas Kavaliauskas wrote:

Hi Mindaugas,

> OK, so, just tell after it will be ready. I'll add optimisation for:
>   HB_P_PUSHLOCAL[NEAR] <n>
>   HB_P_PUSH_any_const_value
>   HB_P_PLUS
>   HB_P_POPLOCAL[NEAR] <n>
> to
>   HB_P_PUSHLOCAL[NEAR]REF <n>
>   HB_P_PUSH_any_const_value
>   HB_P_PLUSEQPOP
> and the same for -, *, /, etc.

This optimization can be easy added at expression level because
it's for single expression. I can make it in few lines for
+, -, *, /, %, ^ operators so it will work also for statics
and memvars. I do not think that here we need to make it on
PCODE level. I'll try to commit it ASAP.
There is still one question open here. Optimization for:
   o:v += "str"
Now it's done only if Harbour is compiled with HB_USE_OBJMSG_REF.
It noticable improves the speed of all <op>= operators if msg
points to real object or class variable but if it's SETGET method
then the final code is slower. It's hard to decide what should be
default. Maybe we should make some speed comparisons. Anyhow here
some type of user declarations in source code to inform compiler
about preferred version will be useful. We can also add compiler
switch to control it.

>> Yes though here we can try to make it without additional memory
>> overhead for the holder of preallocated memory size. It's possible
>> because we do not use reference counter for pBaseArray->pItems memory
>> block so we can use it.
> I do not think saving 4 bytes is worth to playing with "hidden" counter of 
> fm module, but maybe it's some advantages of this method I do not see?

It will be more then 4 bytes. Now with the GC and FM overhead on 32
bit systems we are allocating 32 bytes. It's usually optimal value
for MM which divides memory in some peaces. Anyhow I agree that
readability is also important though here it can be resolved with
few macros. But let's leave it as is. It's not such important as
item size.
BTW I very like the increase/decrease step you used. I also often use
the same it in my code :-)

>> Yes though if you want to maximize the speed then storing PCODEs in
>> the array of integers instead of bytes will be more efficient with the
>> cost of size. In such case we can eliminate all *NEAR/*FAR PCODEs and
>> use only one version which will operate on 32bit integer and we will
>> not be blocked by number of OPCODEs.
>
> Why array of integers is more efficient? Just because of asm( cbw, cwd ) 
> conversion, or there are more reason?

cbw/cwd also cost sth but more important is memory alignment. BYTE PCODE
is quite efficient on x86 CPUs but on machines with strict alignment not.
The average cost of accessing single byte is much bigger then accessing
32bits from address which is multiple of 4. Using 32bits items as base
data can also eliminate some byte conversions we have now.

> Do you mean the whole OPCODE is 4 
> bytes? Or OPCODE + parameters uses a fixed 4 byte? We do not need 2^32 
> OPCODEs, but sometime is really boring to duplicate optimizer code for all 
> NEAR/FAR, so I'm not sure if for example HB_P_POPALIASEDFIELDNEAR is very 
> useful in pcode. PCode size difference in 10-20% is not any problem for me.

I want to force 32 bit alignment in PCODE to access values using
32bit registers so everything will have to be stored in 32bit peaces.
We will have array of integers.

>> In main VM loop we have also:
>>       if( hb_vmThreadRequest )
>>          hb_vmRequestTest();
>> which is used for MT mode. It can be eliminated and replaced by
>> hb_stackGetActionRequest() but it will be necessary to change the
>> code which operates on hb_stack.uiActionRequest to make only MT
>> safe assignment/access and accept multiple flags.
> If this will require some mutexes for synchronisation, we will not have any 
> speed advantage.

The synchronization is necessary only in write access and it can
be done by some special ASM instructions just like reference counter
updating so it should give some small speed improvement. But it will
make some code more complicated so I prefer to not change it now.

>>> but it better handles cI:=cI+"a" optimisation. I guess array
>> Check also -gc3 performance. Such expressions will also be optimized
>> even without compile time optimization. It's enough to introduce new
>> OPCODE.
> If cI:=cI+"a" optimisation to cI+="a" does not have any side effects for 
> object operator overload, we can do it without new opcode.

Yes but the new OPCODE eliminates one HVM loop with stack pop
operation so it gives also some other speed improvement. But we
can say the same with many other situations. If sth is used very
often then I have nothing against introducing new OPCODEs to replace
some sequence of other ones but we should not make it for all possible
situations having limited number of OPCODEs.
Here I agree with you that compile time optimizations is enough.

> It's not a question of BCC now (1.1.0 dev). BCC uses dlmalloc by default. 
> Preallocation gives speed advantage with this MM also. BTW, "AADD()" test 
> gives 11.31 seconds in 1.0.1 (standard BCC MM) vs. 0.25 seconds (dlmalloc 
> MM).

The MM in SUSE is much more efficient then DL malloc.
I'm really interested in test results. I'll make them later.
Anyhow it's always good the have it. Thank you.

> I know this problem of current compiler, but I do not know how difficult is 
> to change this. Do we need to rewrite the whole harbour.y and all most 
> helper hb_comp* functions? Or this is a smaller work?

Smaller but we will have to at least "touch" most of compiler code. For me
it means occasion to make some other modifications which will make whole
code simpler and faster and add some extensions like strong typing.
I do not like to leave unfinished job and this one will have to consume
some time so I need strong motivation to start it. But maybe you will
try.

> During last few days I've read Java virtual machine specification 
> http://java.sun.com/docs/books/jvms/second_edition/html/VMSpecTOC.doc.html 
> and article about Native Client 
> http://nativeclient.googlecode.com/svn/trunk/nacl/googleclient/
> native_client/documentation/nacl_paper.pdf
>
> It was interesting articles. JavaVM spec is very related to optimisations 
> we are doing now. Both articles are related to pcode validation. For 
> example, I've found a good theoretical facts about pcode tracing. Java 
> .class file loader analyses and validates pcode and specification describes 
> the detail procedure of this.

I'll try to read them in weekend.

> These papers made me think a little wider (and more philosophical), and 
> think about the goal I'm trying to reach. The primary idea of different VM 
> comparison was to see execution speed and to find (and fix) a weak 
> implementations in Harbour. After implementation of a few new optimisations 
> and preallocations we can be better than other languages, except for Java 
> numeric operations. They are really fast (a few times faster) in Java and 
> perhaps almost unreachable in Java+JIT (50 times faster). The main reason 
> of speed is strong typed variables.
>
> Weak typed variables and dynamic allocated structures are implemented quite 
> well in Harbour. Maybe we can improve execution speed of weak typed 
> operations by some 10-30% percent, but we will not improve speed a few 
> times for it. Using strong typing let as improve speed a few (or more) 
> times. So, the only way for significant speed improvement is strong typing.

Yes. Only strong typing allows to make some optimizations which will
give noticeable speed difference. Of course there are situations where
we can optimize sth improving the speed of some constructions even
hundred times (f.e. o:msg += "c" in a loop with _very_ big strings)
but these are only chosen very specific situations.
Probably dropping some Clipper compatibility and using many different hacks
we can even double the speed (50% improvement) but it's all.

> Many optimisations we are talking about now are available, is also related 
> to strong typing. But here we do not have explicit type declaration by 
> programmer, but we try to guess variable types from pcode. I see the real 
> strong typing more appropriate solution here.
>    LOCAL nI, nJ AS INTEGER
> and expression tree will help to solve many optimization issues, we are 
> trying to do.

I fully agree.

> The other question is how can we optimize pcode (how can we use strong 
> typing in pcode).
> -gc3 is a kind of JIT for Harbour. We can optimize for loop to:
>     int   local1;
>     local1 = 1;
>   lab00001:
>     hb_xvmPushFuncSymbol( symbols + 1 );
>     hb_xvmPushInteger( local1 );
>     if( hb_xvmDo( 1 ) ) break;
>     local1++;
>   lab00002:
>     if( local1 <= 50 ) goto lab00001;
> But -gc3 could not be used in dynamic loadable .hrb files. It would be nice 
> to use strong typing information to speed up pcode evaluation also.
> Here is some ideas:
> PROC AAA(aParam /* untyped */)
>   LOCAL aI AS ARRAY
>   LOCAL nI AS INTEGER
>   nI = LEN(aParam) + LEN(aI)
[...]
I haven't thought too much about extended PCODE list for strong typing
optimizations yet so it's hard for me to comment it now.

best regards,
Przemek
From druzus at acn.waw.pl  Wed Dec 31 08:12:40 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Dec 31 08:09:38 2008
Subject: [Harbour] 2008-12-31 14:12 UTC+0100 Przemyslaw Czerpak
	(druzus/at/priv.onet.pl)
Message-ID: <20081231131240.GA1957@34-mo7-2.acn.waw.pl>

2008-12-31 14:12 UTC+0100 Przemyslaw Czerpak (druzus/at/priv.onet.pl)
  * harbour/include/hbexprb.c
    + added optimizations for var := var <op> <exp> => var <op>= <exp>
      when <op> is +, -, *, / %, ^ operator
    % cleanup up checking if message can be used as LValue

best regards
Przemek
From dbtopas at dbtopas.lt  Wed Dec 31 09:05:33 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Dec 31 09:07:23 2008
Subject: [Harbour] Re: Virtual machine comparison
In-Reply-To: <20081231125930.GA10423@34-mo7-2.acn.waw.pl>
References: <495A3E54.6080102@dbtopas.lt>
	<20081231125930.GA10423@34-mo7-2.acn.waw.pl>
Message-ID: <495B7C2D.7040609@dbtopas.lt>

Hi,


> This optimization can be easy added at expression level because
> it's for single expression. I can make it in few lines for
> +, -, *, /, %, ^ operators so it will work also for statics
> and memvars. I do not think that here we need to make it on
> PCODE level. I'll try to commit it ASAP.

Thank You.


> It will be more then 4 bytes. Now with the GC and FM overhead on 32
> bit systems we are allocating 32 bytes. It's usually optimal value
> for MM which divides memory in some peaces. Anyhow I agree that
> readability is also important though here it can be resolved with
> few macros. But let's leave it as is. It's not such important as
> item size.

BTW, a few days ago I've noticed that MEMORY(1004)/MEMORY(1003) is 24 on 
BCC for both 1.0.1 and 1.1.0. This was discussed a few times, that BCC 
has 8 byte alignment, and we should use -a4 to force 4 byte alignment 
and to make HB_ITEM struct 16 byte size. Have we lost -a4 
unintentionally, or there are some reason for this?


> cbw/cwd also cost sth but more important is memory alignment. BYTE PCODE
> is quite efficient on x86 CPUs but on machines with strict alignment not.
> The average cost of accessing single byte is much bigger then accessing
> 32bits from address which is multiple of 4. Using 32bits items as base
> data can also eliminate some byte conversions we have now.
> ...
> I want to force 32 bit alignment in PCODE to access values using
> 32bit registers so everything will have to be stored in 32bit peaces.
> We will have array of integers.

But what can we do with opcodes like HB_P_PLUS? It does not need 32 bit 
at all, we will waste 3 bytes. PCode size will grow significantly.


> Yes but the new OPCODE eliminates one HVM loop with stack pop
> operation so it gives also some other speed improvement. But we
> can say the same with many other situations. If sth is used very
> often then I have nothing against introducing new OPCODEs to replace
> some sequence of other ones but we should not make it for all possible
> situations having limited number of OPCODEs.
> Here I agree with you that compile time optimizations is enough.

I'm going to do some statistics about opcode usage, but I do not find a 
time for it.


> The MM in SUSE is much more efficient then DL malloc.
> I'm really interested in test results. I'll make them later.
> Anyhow it's always good the have it. Thank you.

It will be very interesting to see SUSE test results. I've tried to look 
at MM some time ago. glibc usually uses ptmalloc. ptmalloc is dlmalloc 
based (it #includes "dlmalloc.c"), but it provides much better memory 
allocation in case of multithread applications. ptmalloc allocates a 
separate heaps (mspaces of dlmalloc MM) for each thread, thus, do not 
require to do mutex locking for every memory operation. So, dlmalloc 
remains the best for singlethread, and we perhaps need include ptmalloc 
into our source for multithread applications.

A few times I've seen MM on the internet, that claims to be a few 
percent better than ptmalloc (I can't find these MM right now), but I've 
never seen much more efficient than dlmalloc/ptmalloc.

So, it would be very interesting to see SUSE results. We can also look 
to SUSE source to see that MM it uses.


>> I know this problem of current compiler, but I do not know how difficult is 
>> to change this. Do we need to rewrite the whole harbour.y and all most 
>> helper hb_comp* functions? Or this is a smaller work?
> 
> Smaller but we will have to at least "touch" most of compiler code. For me
> it means occasion to make some other modifications which will make whole
> code simpler and faster and add some extensions like strong typing.
> I do not like to leave unfinished job and this one will have to consume
> some time so I need strong motivation to start it. But maybe you will
> try.

I should look to code, and find out the amount of work. I do not imagine 
that should be changed and how. The other thing is licensing. If we'll 
do a changes only, it will remain under GPL. It would be nice to write 
new code under less restricted license.


Best regards,
Mindaugas

From dbtopas at dbtopas.lt  Wed Dec 31 09:22:12 2008
From: dbtopas at dbtopas.lt (Mindaugas Kavaliauskas)
Date: Wed Dec 31 09:24:00 2008
Subject: [Harbour] Re: Virtual machine comparison
In-Reply-To: <495B7C2D.7040609@dbtopas.lt>
References: <495A3E54.6080102@dbtopas.lt>	<20081231125930.GA10423@34-mo7-2.acn.waw.pl>
	<495B7C2D.7040609@dbtopas.lt>
Message-ID: <495B8014.7020108@dbtopas.lt>

Hi,


> A few times I've seen MM on the internet, that claims to be a few 
> percent better than ptmalloc (I can't find these MM right now), but I've 
> never seen much more efficient than dlmalloc/ptmalloc.

I found it. It's nedmalloc.
http://www.nedprod.com/programs/portable/nedmalloc/


Best regards and Happy new year,
Mindaugas


P.S. list is working after I've unbounced myself using 
http://lists.harbour-project.org/mailman/listinfo/harbour

From druzus at acn.waw.pl  Wed Dec 31 11:00:00 2008
From: druzus at acn.waw.pl (Przemyslaw Czerpak)
Date: Wed Dec 31 10:56:58 2008
Subject: [Harbour] Re: Virtual machine comparison
In-Reply-To: <495B7C2D.7040609@dbtopas.lt>
References: <495A3E54.6080102@dbtopas.lt>
	<20081231125930.GA10423@34-mo7-2.acn.waw.pl>
	<495B7C2D.7040609@dbtopas.lt>
Message-ID: <20081231160000.GA6389@34-mo7-2.acn.waw.pl>

On Wed, 31 Dec 2008, Mindaugas Kavaliauskas wrote:

Hi,

> BTW, a few days ago I've noticed that MEMORY(1004)/MEMORY(1003) is 24 on 
> BCC for both 1.0.1 and 1.1.0. This was discussed a few times, that BCC has 
> 8 byte alignment, and we should use -a4 to force 4 byte alignment and to 
> make HB_ITEM struct 16 byte size. Have we lost -a4 unintentionally, or 
> there are some reason for this?

No we haven't but so far we do not have any alignment switches in
default build setting so you have to set C_USR=-a4 yourself and rebuild
Harbour.
This is caused by the method of HB_ITEM structure declaration.
In theory we can hack it and create some common for all items
32bit size union just after type member and use it to hold
some information currently stored in item union. Problematic are
asDouble and asLong structures which have 8bytes members so BCC
forces their size and alignment to 8 byte when 8 bytes alignment
is used. Such modification will make HB_ITEM alignment independent
but the core code which operates on ITEM structure will be less
readable so I do not like it.

> But what can we do with opcodes like HB_P_PLUS? It does not need 32 bit at 
> all, we will waste 3 bytes. PCode size will grow significantly.

Yes it will. I said that it will cost additional size. Probably it will
be ~2.5 bigger. But to clarify. It does not mean that I want to make it.
I only show the method how speed can be improved a little bit. Some VM
uses it. AFAIR SQLITE3 VM we have in SVN as part of hbsqlit3 library
also uses 32bit integers to store PCode.

> I'm going to do some statistics about opcode usage, but I do not find a 
> time for it.

You can use harbour profiler to collect such information from executed
code.
I looked at the main HVM loop and the trick with GOTO instead of BREAK
can be nicely used for some OPCODEs like JUMP or PUSH <const> which cannot
generate exception. But I cannot say how it may increase the speed.
BTW in current OPCODE list we have few dummy or unused ones, f.e.:
   HB_P_DUPLTWO - unused
   HB_P_FUNCPTR - unused
   HB_P_MESSAGE - the same as HB_P_PUSHSYM
   HB_P_MMESSAGE - the same as HB_P_MPUSHSYM
   HB_P_WITHOBJECTEND - the same as HB_P_POP, HB_P_POP
   HB_P_RETVALUE - always used with HB_P_ENDPROC so it can be replaced
                   by HB_P_ENDFUNC which will make both operations

> So, it would be very interesting to see SUSE results. We can also look to 
> SUSE source to see that MM it uses.

It's probably nedmalloc.

> I should look to code, and find out the amount of work. I do not imagine 
> that should be changed and how. The other thing is licensing. If we'll do a 
> changes only, it will remain under GPL. It would be nice to write new code 
> under less restricted license.

Exactly and this noticeable increase the work though not as much as
you can think. Only some part of compiler code is not covered by
Harbour exception. It would be good to ask other core developers
if they agree to use their code in new compiler covered by Harbour
exception what can additionaly decrease the work. Mostly Ryszard.
Anyhow the grammar rules can be changed to resolve the problem with
reporting errors for unclosed control structures and introduce stack
usage pointer so we can easy operate on temporary variables. Now it's
really hacked. To expression structures we should add flags informing
about optimizations and some compiler state so #pragma will be respected
correctly for exact part of code enclosed in modified definitions and
we will not need global variables in compiler structure to force some
behavior in lower level functions, f.e. disabling integer number
optimizations or macro expansion in switch statements. We should also
add pointer to module and line number. It will simplfy current line
numbering code and will be necessary for deeper optimizations which
can change the order of instructions between lines in generated PCODE.

best regards,
Przemek

ps. Happy New Year to all of you.
From mbelgrano at deltain.it  Mon Dec  8 10:46:59 2008
From: mbelgrano at deltain.it (Massimo Belgrano)
Date: Fri Jan  2 17:07:59 2009
Subject: [Harbour] Re: Sample XBASE++ for gtwvg
In-Reply-To: <609353e70812080746v6872166fs957026fff9e16fef@mail.gmail.com>
References: <609353e70812080746v6872166fs957026fff9e16fef@mail.gmail.com>
Message-ID: <609353e70812080746i6a318dcar49783f293b4df660@mail.gmail.com>

//////////////////////////////////////////////////////////////////////
//
//  PREVIEW.PRG
//
//  Copyright:
//      Alaska Software Inc., (c) 1997-1999. All rights reserved.
//
//  Contents:
//      This program contains the XbpPreview class. It displays printer
//      output WYSIWYG as a preview inside a window. Display can be
//      zoomed and scrolled.
//
//  Remarks:
//      An XbpDialog window is created in the Main procedure. It is used
//      as parent for an XbpPreview object. Pushbuttons for zooming and
//      printing are added. Display of the printer output is done in
//      the DrawDB() function which creates a simple listing of a database.
//
//////////////////////////////////////////////////////////////////////

#include "Appevent.ch"
#include "Common.ch"
#include "Font.ch"
#include "Gra.ch"
#include "Xbp.ch"

PROCEDURE AppSys()
// Desktop remains application window
RETURN

PROCEDURE Main
   LOCAL nEvent, mp1, mp2
   LOCAL oDlg, oXbp, drawingArea, oView

   oDlg := XbpDialog():new( SetAppWindow(), , {10,10}, {400,410}, , .F.)
   oDlg:border    := XBPDLG_RAISEDBORDERTHIN_FIXED
   oDlg:title     := "Preview Dialog"
   oDlg:maxButton := .F.
   oDlg:titleBar  := .T.
   oDlg:create()

   drawingArea := oDlg:drawingArea
   drawingArea:setFontCompoundName( "8.Helv" )

   oView := XbpPreview():new( drawingArea, , {0,0}, {270,380} )
   oView:drawBlock := {|oPS| DrawDB( oPS ) }
   oView:create()

   oXbp := XbpPushButton():new( drawingArea, , {283,325}, {100,30} )
   oXbp:caption := "Zoom ++"
   oXbp:create()
   oXbp:activate := {|| oView:zoom( oView:zoomFactor + 0.25 ) }

   oXbp := XbpPushButton():new( drawingArea, , {283,275}, {100,30} )
   oXbp:caption := "Zoom - -"
   oXbp:create()
   oXbp:activate := {|| oView:zoom( oView:zoomFactor - 0.25 ) }

   oXbp := XbpPushButton():new( drawingArea, , {283,223}, {100,30} )
   oXbp:caption := "Print"
   oXbp:create()
   oXbp:activate := {|| oView:print() }

   oXbp := XbpPushButton():new( drawingArea, , {283,171}, {100,30} )
   oXbp:caption := "OK"
   oXbp:create()
   oXbp:activate := {|| PostAppEvent( xbeP_Close ) }

   oDlg:show()
   SetAppFocus( oXbp )

   nEvent := 0
   DO WHILE nEvent <> xbeP_Close
      nEvent := AppEvent( @mp1, @mp2, @oXbp )
      oXbp:handleEvent( nEvent, mp1, mp2 )
   ENDDO
RETURN



/*
 * Draw DBF records in a presentation space
 */
FUNCTION DrawDB( oPS )
   LOCAL i//, imax   := FCount()
//   LOCAL aFields   := DbStruct()
   LOCAL aPageSize := oPS:setPageSize()[1]
//   LOCAL aPosX[imax], nY, xValue
   LOCAL nFontWidth, nFontHeight
   LOCAL aSegments := {}
   LOCAL oBitmap, aSource, aTarget, oFont

   // Get font metrics of current font
   nFontWidth  := oPS:setFont():width
   nFontHeight := oPS:setFont():height

/*   aPosX[1]    := nFontWidth/2
   FOR i:=2 TO imax
      aPosX[i] := aPosX[i-1] + nFontWidth/2 + ;
                  Max( Len(aFields[i-1,1]),aFields[i-1,3] ) * nFontWidth
   NEXT
*/
//   GO TOP

   // Suppress display of graphics primitives during page
   // calculations
   GraSegDrawMode( oPS, GRA_DM_RETAIN )

   // Page Calculation;
   // the graphics primitives required to render a certain
   // page are stored in an individual graphical segment.
   // These will be played back in either he Preview window or
   // on the printer to display the respective page

   oBitmap := XbpBitmap():new():create( oPS )
   oBitmap:LoadFile("winnt256.bmp")   // just hard code the bitmap source
   aSource := {0,0,oBitmap:xSize,oBitmap:ySize}
   aTarget := {0,0,oBitmap:xSize,oBitmap:ySize}

   oFont := XbpFont():new(oPS)
   oFont:create()
   oFont:configure(FONT_TIMES_XLARGE + FONT_STYLE_ITALIC)
   AAdd(aSegments, GraSegOpen(oPS))


   oBitmap:draw( oPS, aTarget, aSource, , GRA_BLT_BBO_IGNORE )
   GraSegClose( oPS )
   AAdd(aSegments, GraSegOpen(oPS))
   oBitmap:draw( oPS, {400, 400}, aSource, , GRA_BLT_BBO_IGNORE )

   GraSetFont( oPS, oFont )
   //GraSetAttrString( ::oPS, aAttr )
   GraStringAt( oPS, { 0, 0 }, "This is a test" )

   GraSegClose( oPS )


/*
   DO WHILE !EOF()
      IF RecNo() <> 1
         // Close previous segment
         GraSegClose( oPS )
      ENDIF

      // Open new segment for the current page
      AAdd( aSegments, GraSegOpen(oPS) )

      // Draw field names and column separator lines
      nY := aPageSize[2] - 2 * nFontHeight
      FOR i:=1 TO imax
         GraStringAt( oPS, { aPosX[i], nY }, FieldName(i) )
         GraLine( oPS, {aPosX[i]-nFontWidth/4, 0}, {aPosX[i]-nFontWidth/4,
aPageSize[2]} )
      NEXT

      // Draw heading separator line
      nY -= nFontHeight/2
      GraLine( oPS, {0, nY}, {aPageSize[1], nY} )

      // Fill current page with data from DBF
      DO WHILE nY >= ( nFontHeight + 2 )
         nY -= ( nFontHeight + 2 )

         FOR i:=1 TO imax
            xValue := FieldGet(i)
            DO CASE
               CASE aFields[i,2] == "D"
                  xValue := DtoC( xValue )
               CASE aFields[i,2] == "L"
                  xValue := IIf( xValue, "T", "F" )
               CASE aFields[i,2] == "M"
                  xValue := Left( xValue, 10 )
               CASE aFields[i,2] == "N"
                  xValue := Str( xValue )
            ENDCASE

            GraStringAt( oPS, { aPosX[i], nY }, xValue )
         NEXT

         SKIP
         IF Eof()
            EXIT
         ENDIF
      ENDDO
   ENDDO

   // Close previous segment
   GraSegClose( oPS )
*/
   // Reset segment drawing mode
   GraSegDrawMode( oPS, GRA_DM_DRAWANDRETAIN )

   // Return segment Ids in an array;
   // XbpPreview expects an array containing
   // segment IDs
RETURN aSegments


/*
 * The preview class declaration
 */
CLASS XbpPreview FROM XbpStatic
   PROTECTED:
   VAR oView                      // XbpDialog used as display area
   VAR oSquare                    // XbpStatic to fill the gap between
scroll bars
   VAR oPresSpace                 // XbpPresSpace
   VAR oFont                      // XbpFont
   VAR aViewPort                  // View port for zoom
   VAR aPageSize                  // Printer page size
   VAR aCharAttr                  // Attributes for strings (GRA_AS_BOX)
   VAR aAreaAttr                  // Attributes for areas   (GRA_AA_COLOR)
   VAR nPagePos                   // Current page position
   VAR oNextPage                  // Button for skipping to next page
   VAR oPrevPage                  // Button for skipping to previous page

   METHOD setOrigin               // Set origin for the view port
   METHOD calcScrollBox           // Calculate size of scroll box inside
scroll bars

   METHOD startDoc                // Open spooler
   METHOD endDoc                  // Close spooler

   EXPORTED:
   VAR hScroll    READONLY        // Horizontal scroll bar
   VAR vScroll    READONLY        // Vertical   scroll bar
   VAR oPagePos                   // Static for displaying current page
position
                                  ** Configuration
   VAR drawBlock                  // Code block calls function that draws
   VAR printer                    // XbpPrinter
   VAR zoomFactor                 // Zoom factor from 1 to n
   VAR segments                   // Array containing segment IDs
                                  ** Life cycle
   METHOD init                    //
   METHOD create                  //
   METHOD destroy                 //
                                  ** Display
   METHOD setSize                 // Define size
   METHOD hScroll                 // Scroll horizontally
   METHOD vScroll                 // Scroll vertically
   METHOD zoom                    // Zoom
   METHOD presSpace               // Retrieve pesentation space
   METHOD setViewPort             // Define size of view port
   METHOD drawPage                // Render a single page

                                  ** Printing
   METHOD print                   // Output pages to printer

   METHOD numPages                // Determine number of pages
   METHOD pageNo                  // Determine number of current page
   METHOD drawNextPage            // Render next page
   METHOD drawPrevPage            // Render previous page
ENDCLASS



/*
 * Initialize object
 */
METHOD XbpPreview:init( oParent, oOwner, aPos, aSize, aPP, lVisible )

   ::XbpStatic:init( oParent, oOwner, aPos, aSize, aPP, lVisible )
   ::xbpStatic:type  := XBPSTATIC_TYPE_RAISEDRECT

   ::oView           := XbpDialog():new( self )

   ::vScroll         := XbpScrollbar():new( self )
   ::vScroll:type    := XBPSCROLL_VERTICAL
   ::vScroll:cargo   := 0

   ::oPagePos        := XbpPushButton():new( self )
   ::oPagePos:activate := { || MsgBox("Skip to Page n (not implemented)") }

   ::oNextPage       := XbpPushButton():new( self )
   ::oNextPage:caption := "+"
   ::oNextPage:activate := { || ::drawNextPage() }
   ::oPrevPage       := XbpPushButton():new( self )
   ::oPrevPage:caption := "-"
   ::oPrevPage:activate := { || ::drawPrevPage() }

   ::hScroll         := XbpScrollbar():new( self )
   ::hScroll:type    := XBPSCROLL_HORIZONTAL
   ::hScroll:cargo   := 0

   ::oSquare         := XbpStatic():new( self )
   ::oSquare:type    := XBPSTATIC_TYPE_RECESSEDBOX

   ::oPresSpace      := XbpPresSpace():new()
   ::zoomFactor      := 1
   ::segments        := {}
   ::nPagePos        := 1

   // Use default printer
   ::printer         := XbpPrinter():new()

    // Quit if there are no installed printers.
   IF ::printer:list() == NIL
      MsgBox( "Error - There are no printers installed!", "Preview Sample" )
      QUIT
   ENDIF

RETURN self



/*
 * Request system resources
 */
METHOD XbpPreview:create( oParent, oOwner, aPos, aSize, aPP, lVisible )
   LOCAL oFont, i, imax, aFontList

   // XbpStatic is parent for all other XBPs
   ::xbpStatic:create( oParent, oOwner, aPos, aSize, aPP, lVisible )

   // Create the printer
   ::printer:create()

   // XbpDialog is displayed without title bar
   ::oView:minButton := .F.
   ::oView:maxButton := .F.
   ::oView:sysMenu   := .F.
   ::oView:titleBar  := .F.
   ::oView:border    := XBPDLG_THINBORDER
   ::oView:create()

   ::oPagePos:create()
   ::oPagePos:setFontCompoundName( "7.Arial" )
   ::oPagePos:paint  := { || ::oPagePos:setCaption( AllTrim(Str(::pageNo()))
+;
                             "/" + AllTrim(Str(::numPages())) ) }

   ::oNextPage:create()
   ::oNextPage:setFontCompoundName( "7.Arial" )
   ::oPrevPage:create()
   ::oPrevPage:setFontCompoundName( "7.Arial" )

   // Create scroll bars and XbpStatic to fill the gap
   ::oSquare:create()
   ::hScroll:create()
   ::vScroll:create()

   ::hScroll:scroll := {|mp1| ::hScroll( mp1 ) }
   ::vScroll:scroll := {|mp1| ::vScroll( mp1 ) }

   // Size of XBPs is calculated in the :setSize() method
   ::setSize( ::currentSize() )

   // Calculate page size and deduct margins that can not be printed on
   // Unit is 1/10 mm
   aSize       := ::printer:paperSize()
   ::aPageSize := { aSize[5]-aSize[3], aSize[6]-aSize[4] }

   // Link presentation space with printer device context
   // The PS is created with the metric unit 1/10 mm
   ::oPresSpace:create( ::printer, ::aPageSize, GRA_PU_LOMETRIC )

   IF ::oFont == NIL
      // Use default font -> small fixed font
      ::oFont := XbpFont():new( ::oPresSpace )
      ::oFont:familyName := "Courier New"
      ::oFont:nominalPointSize := 8
      ::oFont:generic := .T.
      ::oFont:create()
   ENDIF

   // Associate Presentation Space with Window Device Context
   ::oPresSpace:configure( ::oView:drawingArea:winDevice() )

   // Erase drawing using a filled white box on repaint
   ::aCharAttr := Array( GRA_AS_COUNT )
   ::aAreaAttr := Array( GRA_AA_COUNT )
   ::aAreaAttr [ GRA_AA_COLOR ] := GRA_CLR_WHITE
   ::oPresSpace:setAttrArea( ::aAreaAttr )

   ::oPresSpace:setFont( ::oFont )

   // Terminate application if no codeblock was assigned
   IF ValType( ::drawBlock ) != "B"
      MsgBox( ":drawBlock is invalid!" )
      QUIT
   ENDIF

  ::oPresSpace:configure( ::printer )
   // :drawBlock must call a routine that does the drawing
   // The drawing must be stored in graphical segments
   // The numeric segment IDs are returned in an array by :drawBlock
  ::segments := Eval( ::drawBlock, ::oPresSpace )

   ::oPresSpace:configure( ::oView:drawingArea:winDevice() )
   // Initialize view port
   aSize       := ::oView:drawingArea:currentSize()
   ::aViewPort := { 0, 0, aSize[1], aSize[2] }
   ::oView:drawingArea:paint := {|| ::drawPage() }
   ::zoom()

RETURN self



/*
 * Release system resources
 */
METHOD XbpPreview:destroy
   ::xbpStatic:destroy()
   ::aViewPort := ;
   ::aPageSize := ;
   ::oFont     := NIL
RETURN self



/*
 * Change size of XbpStatic and contained XBPs
 */
METHOD XbpPreview:setSize( aSize )

   ::xbpStatic:setSize( aSize )
   aSize := ::currentSize()

   ::oPagePos:setPos ( { 0, 0 } )
   ::oPagePos:setSize( { 40, 16 } )
   ::oNextPage:setPos ( { 40, 0 } )
   ::oNextPage:setSize( { 20, 16 } )
   ::oPrevPage:setPos ( { 60, 0 } )
   ::oPrevPage:setSize( { 20, 16 } )

   ::hScroll:setPos ( { 80, 0 } )
   ::hScroll:setSize( { aSize[1]-16-80, 16 } )
   ::vScroll:setPos ( { aSize[1]-16, 16 } )
   ::vScroll:setSize( { 16, aSize[2]-16 } )
   ::oSquare:setPos ( { aSize[1]-16,  0 } )
   ::oSquare:setSize( { 16, 16 } )
   ::oView  :setPos ( { 0 , 16 } )
   ::oView  :setSize( { aSize[1]-16, aSize[2]-16 } )

RETURN self



/*
 * Scroll horizontally
 */
METHOD XbpPreview:hScroll( mp1 )
   LOCAL nScrollPos := mp1[1]
   LOCAL nCommand   := mp1[2]

   IF nCommand == XBPSB_SLIDERTRACK .OR. ;
      nCommand == XBPSB_ENDSCROLL

      RETURN self
   ENDIF
   // scroll a bit further after each scroll message
   // as long as the scroll button is pressed
   // (accelerated scrolling)
   DO CASE
   CASE nCommand == XBPSB_PREVPOS
      ::hScroll:cargo := Min( -1, ::hScroll:cargo - 2 )
      ::hScroll:setData( nScrollPos + ::hScroll:cargo )
   CASE nCommand == XBPSB_NEXTPOS
      ::hScroll:cargo := Max(  1, ::hScroll:cargo + 2 )
      ::hScroll:setData( nScrollPos + ::hScroll:cargo )
   CASE nCommand == XBPSB_PREVPAGE
      ::hScroll:setData( nScrollPos )
   CASE nCommand == XBPSB_NEXTPAGE
      ::hScroll:setData( nScrollPos )
   ENDCASE

   ::setOrigin( ::hScroll:getData(), ::vScroll:getData() )

RETURN self



/*
 * Scroll vertically
 */
METHOD XbpPreview:vScroll( mp1 )
   LOCAL nScrollPos := mp1[1]
   LOCAL nCommand   := mp1[2]

   IF nCommand == XBPSB_SLIDERTRACK .OR. ;
      nCommand == XBPSB_ENDSCROLL

      RETURN self
   ENDIF
   // scroll a bit further after each scroll message
   // as long as the scroll button is pressed
   // (accelerated scrolling)
   DO CASE
   CASE nCommand == XBPSB_PREVPOS
      ::vScroll:cargo := Min( -1, ::vScroll:cargo - 2 )
      ::vScroll:setData( nScrollPos + ::vScroll:cargo )
   CASE nCommand == XBPSB_NEXTPOS
      ::vScroll:cargo := Max(  1, ::vScroll:cargo + 2 )
      ::vScroll:setData( nScrollPos + ::vScroll:cargo )
   CASE nCommand == XBPSB_PREVPAGE
      ::vScroll:setData( nScrollPos )
   CASE nCommand == XBPSB_NEXTPAGE
      ::vScroll:setData( nScrollPos )
   ENDCASE

   ::setOrigin( ::hScroll:getData(), ::vScroll:getData() )

RETURN self



/*
 * Set origin of the view port after scrolling
 */
METHOD XbpPreview:setOrigin( nX, nY )
   LOCAL aSize       := ::oView:drawingArea:currentSize()
   LOCAL nViewWidth  := aSize[1]
   LOCAL nViewHeight := aSize[2]
   LOCAL nZoomWidth  := nViewWidth  * ::zoomFactor
   LOCAL nZoomHeight := nViewHeight * ::zoomFactor

   // X origin is always <= 0
   nX := - Abs( nX )

   IF nZoomWidth <= nViewWidth
      nX := 0
   ELSEIF nViewWidth - nX >= nZoomWidth
      nX := nViewWidth - nZoomWidth
   ENDIF

   ::aViewPort[1] := nX
   ::aViewPort[3] := nX + nZoomWidth

   // Y origin is always <= 0
   // Consider the difference between visible and total height
   nY := Abs( nY ) - ( nZoomHeight - nViewHeight )

   IF nY > 0 .OR. nZoomHeight <= nViewHeight
      nY := 0
   ELSEIF nViewHeight - nY >= nZoomHeight
      nY := nViewHeight - nZoomHeight
   ENDIF

   ::aViewPort[2] := nY
   ::aViewPort[4] := nY + nZoomHeight

   ::setViewPort( ::aViewPort )
   ::drawPage()

RETURN self



/*
 * Calculate size of the scroll box and range for both scroll bars
 */
METHOD XbpPreview:calcScrollBox()
   LOCAL aSize       := ::oView:drawingArea:currentSize()
   LOCAL nViewWidth  := aSize[1]
   LOCAL nViewHeight := aSize[2]
   LOCAL nZoomWidth  := aSize[1] * ::zoomFactor
   LOCAL nZoomHeight := aSize[2] * ::zoomFactor

   // Calculation for horizontal scroll bar
   ::hScroll:setRange( { 0, nZoomWidth - nViewWidth } )
   IF nZoomWidth > nViewWidth
      ::hScroll:setScrollBoxSize( (nZoomWidth-nViewWidth) *
(nViewWidth/nZoomWidth) )
   ELSE
      ::hScroll:setScrollBoxSize( nViewWidth )
   ENDIF

   // Calculation for vertical scroll bar
   ::vScroll:setRange( { 0, nZoomHeight - nViewHeight } )
   IF nZoomHeight > nViewHeight
      ::vScroll:setScrollBoxSize( (nZoomHeight-nViewHeight) *
(nViewHeight/nZoomHeight) )
   ELSE
      ::vScroll:setScrollBoxSize( nViewHeight )
   ENDIF

RETURN self



/*
 * Zoom view port
 */
METHOD XbpPreview:zoom( nZoomFactor )
   LOCAL aSize  := ::oView:drawingArea:currentSize()

   DEFAULT nZoomFactor TO ::zoomFactor

   ::zoomFactor := Max( 1, nZoomFactor )

   // Re-calculate view port
   aSize[1] := Int( aSize[1] * nZoomFactor )
   aSize[2] := Int( aSize[2] * nZoomFactor )

   ::aViewPort  := {0,0,aSize[1],aSize[2]}
   ::calcScrollBox()

   // Set origin for view port
   ::setOrigin( ::hScroll:getData(), ::vScroll:getData() )

RETURN self



/*
 * Get presentation space
 */
METHOD XbpPreview:presSpace
RETURN ::oPresSpace



/*
 * Define view port
 */
METHOD XbpPreview:setViewPort( aViewPort )
   LOCAL aOldViewPort := ::oPresSpace:setViewPort()

   IF Valtype( aViewPort ) == "A"
      ::aViewPort := aViewPort
      ::oPresSpace:setViewPort( aViewPort )
   ENDIF
RETURN aOldViewPort



/*
 * Display page specified
 */
METHOD XbpPreview:drawPage( nPageNo )

   DEFAULT nPageNo TO ::nPagePos

   IF Len(::segments) == 0
      RETURN self
   ENDIF

   // Drawing is erased by a box filled with white color
   GraBox( ::oPresSpace, {0,0}, ::aPageSize, GRA_FILL )


   IF nPageNo != 0 .AND. nPageNo <= ::numPages()
      GraSegDraw( ::presSpace(), ::segments[nPageNo] )
   ENDIF

RETURN self



/*
 * Start printing
 * - The presentation space gets associated with a printer device context
 */
METHOD XbpPreview:startDoc

   ::oPresSpace:configure( ::printer )

   // From now on output in :oPresSpace is redirected to the spooler
   ::printer:startDoc()

   // Font and attributes are lost due to :configure() -> reset both
   ::oPresSpace:setFont( ::oFont )
   ::oPresSpace:setAttrArea( ::aAreaAttr )
   ::oPresSpace:setAttrString( ::aCharAttr )

RETURN self



/*
 * End printing
 * - The presentation space gets associated with the window device context
again
 */
METHOD XbpPreview:endDoc

   // Close spooler
   ::printer:endDoc()

   // Re-link PS to window device
   ::oPresSpace:configure( ::oView:drawingArea:winDevice() )

   // Font and attributes are lost due to :configure() -> reset both
   ::oPresSpace:setFont( ::oFont )
   ::oPresSpace:setAttrArea( ::aAreaAttr )
   ::oPresSpace:setAttrString( ::aCharAttr )

   // Set view port for window
   ::zoom()

RETURN self



/*
 * Output all pages to the printer
 */
METHOD XbpPreview:print()
   LOCAL i

   IF Len(::segments) == 0
      RETURN self
   ENDIF

   ::startDoc()

   FOR i:=1 TO ::numPages()
      ::drawPage( i )

      IF i +1 <= ::numPages()
         ::printer:newPage()
      ENDIF
   NEXT

   ::endDoc()

RETURN self



/*
 * Determine number of pages
 */
METHOD XbpPreview:numPages()
RETURN Len( ::segments )



/*
 * Determine number of current page
 */
METHOD XbpPreview:pageNo()
RETURN ::nPagePos
/*
 * Display next page
 */
METHOD XbpPreview:drawNextPage()
   IF ::nPagePos +1 <= ::numPages()
      ::nPagePos++
      ::drawPage()
      ::oPagePos:invalidateRect()
   ENDIF
RETURN self



/*
 * Display previous page
 */
METHOD XbpPreview:drawPrevPage()
   IF ::nPagePos -1 > 0
      ::nPagePos--
      ::drawPage()
      ::oPagePos:invalidateRect()
   ENDIF
RETURN self
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.harbour-project.org/pipermail/harbour/attachments/20081208/a9f40144/attachment-0001.html
From rodrmigu at gmail.com  Wed Dec 10 08:29:53 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Fri Jan  2 17:08:06 2009
Subject: [Harbour] MSVC 80 & 90 compiler warnings
Message-ID: <80b05d460812100529s3cb05781id001e94b5c65e012@mail.gmail.com>

All,

Is there a new SET HB_* to be added to avoid the errors below or
something that were added since version 1.0.0 that need to be changed
in order to avoid the warnings below?

Here are my settings:

set HB_ARCHITECTURE=w32
set HB_COMPILER=msvc
set HB_GT_LIB=gtwin
set HB_MULTI_GT=yes
set HB_PREF=hb

set HB_VISUALC_VER=90
set CFLAGS=/EHsc /D_CRT_SECURE_NO_DEPRECATE

Thanks & Regards
Rodrigo

source\compiler\hbmain.c(298) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\compiler\hbmain.c(868) : warning C4244: '-=' : conversion from
'int' to 'USHORT', possible loss of data
source\compiler\hbmain.c(3511) : warning C4244: '+=' : conversion from
'size_t' to 'USHORT', possible loss of data
source\compiler\gencc.c(637) : warning C4244: '=' : conversion from
'size_t' to 'USHORT', possible loss of data
source\compiler\gencc.c(789) : warning C4244: '=' : conversion from
'size_t' to 'USHORT', possible loss of data
source\compiler\gencc.c(1539) : warning C4244: '=' : conversion from
'size_t' to 'USHORT', possible loss of data
source\compiler\hbfix.c(124) : warning C4244: '+=' : conversion from
'int' to 'SHORT', possible loss of data
source\main\harbour.c(281) : warning C4244: '=' : conversion from
'int' to 'char', possible loss of data
source\main\harbour.c(282) : warning C4244: '=' : conversion from
'int' to 'char', possible loss of data
source\vm\classes.c(3273) : warning C4244: '+=' : conversion from
'int' to 'USHORT', possible loss of data
source\vm\classes.c(3566) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\classes.c(4073) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\classes.c(4097) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\codebloc.c(218) : warning C4244: '=' : conversion from 'int'
to 'SHORT', possible loss of data
source\vm\dynlibhb.c(177) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\eval.c(422) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\evalhb.c(66) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\fm.c(360) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\fm.c(439) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\fm.c(799) : warning C4244: '=' : conversion from 'int' to
'char', possible loss of data
source\vm\fm.c(801) : warning C4244: '=' : conversion from 'int' to
'char', possible loss of data
source\vm\hvm.c(6134) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6191) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6214) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6216) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6230) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6232) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6237) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\itemapi.c(825) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1008) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1009) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1032) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1036) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1085) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1109) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1141) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\macro.c(1382) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\classes.c(3273) : warning C4244: '+=' : conversion from
'int' to 'USHORT', possible loss of data
source\vm\classes.c(3566) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\classes.c(4073) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\classes.c(4097) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\codebloc.c(218) : warning C4244: '=' : conversion from 'int'
to 'SHORT', possible loss of data
source\vm\dynlibhb.c(177) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\eval.c(422) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\evalhb.c(66) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\fm.c(360) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\fm.c(439) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\fm.c(799) : warning C4244: '=' : conversion from 'int' to
'char', possible loss of data
source\vm\fm.c(801) : warning C4244: '=' : conversion from 'int' to
'char', possible loss of data
source\vm\hvm.c(6134) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6191) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6214) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6216) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6230) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6232) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6237) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\itemapi.c(825) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1008) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1009) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1032) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1036) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1085) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1109) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1141) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\macro.c(1382) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\thread.c(832) : warning C4244: '=' : conversion from
'HB_ULONG' to 'ULONG', possible loss of data
source\rtl\binnumx.c(86) : warning C4244: '=' : conversion from 'int'
to 'char', possible loss of data
source\rtl\binnumx.c(87) : warning C4244: '=' : conversion from 'int'
to 'char', possible loss of data
source\rtl\cdpapi.c(137) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rtl\cdpapi.c(142) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rtl\cdpapi.c(143) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rtl\cdpapi.c(148) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rtl\cdpapi.c(149) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rtl\cdpapi.c(150) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rtl\console.c(250) : warning C4244: '+=' : conversion from
'int' to 'USHORT', possible loss of data
source\rtl\console.c(264) : warning C4244: '+=' : conversion from
'int' to 'USHORT', possible loss of data
source\rtl\gtapi.c(178) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gtapi.c(196) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gtapi.c(214) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gtapi.c(235) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gtapi.c(285) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rtl\gtapi.c(422) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rtl\gtapi.c(499) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rtl\gtapi.c(515) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rtl\gtapi.c(601) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gtapi.c(775) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gtapi.c(845) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gtapi.c(863) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gtapi.c(1255) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gtapi.c(1255) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gtapi.c(1275) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gttone.c(204) : warning C4244: 'function' : conversion from
'int' to 'USHORT', possible loss of data
source\rtl\hardcr.c(64) : warning C4310: cast truncates constant value
source\rtl\hbgtcore.c(137) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rtl\hbgtcore.c(138) : warning C4244: '=' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(312) : warning C4244: '=' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(322) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rtl\hbgtcore.c(799) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(927) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(927) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(936) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(936) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(980) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rtl\hbgtcore.c(981) : warning C4244: '=' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1291) : warning C4244: 'initializing' :
conversion from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1493) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1493) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1754) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1755) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1768) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1781) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1793) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1795) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1796) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1994) : warning C4244: '=' : conversion from
'int' to 'UINT16', possible loss of data
source\rtl\hbgtcore.c(1995) : warning C4244: '=' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\hbinet.c(1695) : warning C4244: 'function' : conversion
from 'int' to 'u_short', possible loss of data
source\rtl\hbinet.c(1698) : warning C4244: '=' : conversion from 'int'
to 'u_short', possible loss of data
source\rtl\hbinet.c(1860) : warning C4244: 'function' : conversion
from 'int' to 'u_short', possible loss of data
source\rtl\hbinet.c(1863) : warning C4244: '=' : conversion from 'int'
to 'u_short', possible loss of data
source\rtl\hbinet.c(1917) : warning C4244: 'function' : conversion
from 'int' to 'u_short', possible loss of data
source\rtl\hbinet.c(1920) : warning C4244: '=' : conversion from 'int'
to 'u_short', possible loss of data
source\rtl\hbinet.c(1978) : warning C4244: 'function' : conversion
from 'int' to 'u_short', possible loss of data
source\rtl\hbinet.c(1981) : warning C4244: '=' : conversion from 'int'
to 'u_short', possible loss of data
source\rtl\hbinet.c(2090) : warning C4244: 'function' : conversion
from 'int' to 'u_short', possible loss of data
source\rtl\mlcfunc.c(89) : warning C4310: cast truncates constant value
source\rtl\mlcfunc.c(126) : warning C4310: cast truncates constant value
source\rtl\mlcfunc.c(293) : warning C4310: cast truncates constant value
source\rtl\mlcfunc.c(436) : warning C4310: cast truncates constant value
source\rtl\mlcfunc.c(438) : warning C4310: cast truncates constant value
source\rtl\mlcfunc.c(440) : warning C4310: cast truncates constant value
source\rtl\mtran.c(73) : warning C4310: cast truncates constant value
macroy.c(1900) : warning C4244: '=' : conversion from 'int' to
'yytype_int16', possible loss of data
d:\cvs\harbour\macroy.c(3095) : warning C4701: potentially
uninitialized local variable 'hb_macrolval' used
source\macro\macrolex.c(205) : warning C4244: '=' : conversion from
'int' to 'UCHAR', possible loss of data
source\macro\macrolex.c(206) : warning C4244: '=' : conversion from
'int' to 'UCHAR', possible loss of data
source\macro\macrolex.c(213) : warning C4244: '=' : conversion from
'int' to 'UCHAR', possible loss of data
source\hbzlib\deflate.c(614) : warning C4244: '=' : conversion from
'int' to 'Bytef', possible loss of data
source\hbzlib\deflate.c(616) : warning C4244: '=' : conversion from
'uInt' to 'Bytef', possible loss of data
source\hbzlib\deflate.c(617) : warning C4244: '=' : conversion from
'uInt' to 'Bytef', possible loss of data
source\hbzlib\deflate.c(702) : warning C4244: '=' : conversion from
'int' to 'Bytef', possible loss of data
source\hbzlib\deflate.c(733) : warning C4244: '=' : conversion from
'int' to 'Bytef', possible loss of data
source\hbzlib\deflate.c(1507) : warning C4244: 'initializing' :
conversion from 'uInt' to 'uch', possible loss of data
source\hbzlib\deflate.c(1507) : warning C4244: 'initializing' :
conversion from 'uInt' to 'ush', possible loss of data
source\hbzlib\deflate.c(1629) : warning C4244: 'initializing' :
conversion from 'uInt' to 'uch', possible loss of data
source\hbzlib\deflate.c(1629) : warning C4244: 'initializing' :
conversion from 'uInt' to 'ush', possible loss of data
source\hbzlib\gzio.c(418) : warning C4244: '=' : conversion from 'int'
to 'Byte', possible loss of data
dsource\hbzlib\inflate.c(711) : warning C4244: '=' : conversion from
'unsigned int' to 'Bytef', possible loss of data
source\hbzlib\inflate.c(732) : warning C4244: '=' : conversion from
'unsigned int' to 'Bytef', possible loss of data
source\hbzlib\trees.c(604) : warning C4244: '=' : conversion from
'unsigned int' to 'ush', possible loss of data
source\hbzlib\trees.c(728) : warning C4244: '+=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(773) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(777) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(780) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(780) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(783) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(783) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(786) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(786) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(848) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(849) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(850) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(853) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(873) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(895) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(896) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(907) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(908) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(988) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(994) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(1087) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(1092) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(1096) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(1102) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(1106) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(1116) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\rdd\dbcmd.c(395) : warning C4244: 'function' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\dbcmd.c(458) : warning C4244: 'function' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\dbcmd.c(841) : warning C4244: 'function' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\dbcmd.c(890) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbcmd.c(904) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbcmd.c(941) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbcmd.c(1487) : warning C4244: 'function' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\dbcmd.c(1524) : warning C4244: 'function' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\dbcmd.c(1694) : warning C4244: 'function' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\dbcmd.c(1726) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd.c(1735) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd.c(1775) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd.c(1898) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd.c(1900) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd.c(2030) : warning C4244: 'function' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\dbcmd.c(2097) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd.c(2121) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd.c(2145) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd53.c(353) : warning C4244: 'function' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbcmd53.c(387) : warning C4244: 'function' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbcmd53.c(407) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd53.c(413) : warning C4244: 'function' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbcmd53.c(437) : warning C4244: 'function' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbcmd53.c(463) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd53.c(471) : warning C4244: 'function' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbcmd53.c(495) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd53.c(501) : warning C4244: 'function' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\workarea.c(355) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\wacore.c(95) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\wacore.c(307) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\wacore.c(320) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\wacore.c(450) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\wafunc.c(699) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\wafunc.c(771) : warning C4244: 'function' : conversion from
'const int' to 'USHORT', possible loss of data
source\rdd\wafunc.c(1030) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(1612) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2222) : warning C4244: '=' : conversion from 'ULONG'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2768) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rdd\dbf1.c(2780) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rdd\dbf1.c(2899) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2913) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2923) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2933) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2943) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2955) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2974) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2981) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2988) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2997) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(3012) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(3019) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(3027) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(3034) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(3044) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(3054) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(3629) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rdd\dbf1.c(3807) : warning C4244: '-=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(4007) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(4940) : warning C4244: '=' : conversion from 'ULONG'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(5418) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rdd\dbf1.c(5437) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rdd\dbf1.c(5554) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\delim1.c(83) : warning C4244: '=' : conversion from
'size_t' to 'USHORT', possible loss of data
source\rdd\delim1.c(1121) : warning C4244: '+=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\sdf1.c(82) : warning C4244: '=' : conversion from 'size_t'
to 'USHORT', possible loss of data
source\rdd\sdf1.c(108) : warning C4244: '=' : conversion from 'ULONG'
to 'USHORT', possible loss of data
source\rdd\sdf1.c(172) : warning C4244: '=' : conversion from 'ULONG'
to 'USHORT', possible loss of data
source\rdd\sdf1.c(868) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2378) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2433) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2457) : warning C4244: '=' : conversion
from 'int' to 'SHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2539) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2548) : warning C4244: '=' : conversion
from 'int' to 'SHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2551) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2814) : warning C4244: '-=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2843) : warning C4244: '-=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2929) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2969) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2983) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(3004) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(3076) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(3429) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(3433) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(4229) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(7019) : warning C4055: 'type cast' : from
data pointer 'void *' to function pointer 'HB_EVALSCOPE_FUNC'
source\rdd\dbfntx\dbfntx1.c(7689) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(7737) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(408) : warning C4244: '=' : conversion
from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(1559) : warning C4244: '=' : conversion
from 'int' to 'SHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(1570) : warning C4244: '-=' : conversion
from 'int' to 'SHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(1583) : warning C4244: '=' : conversion
from 'int' to 'SHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(1794) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(1800) : warning C4244: '=' : conversion
from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(1802) : warning C4244: '=' : conversion
from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(2017) : warning C4244: '-=' : conversion
from 'int' to 'SHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(2094) : warning C4244: '+=' : conversion
from 'int' to 'SHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(2217) : warning C4244: '-=' : conversion
from 'int' to 'SHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(2693) : warning C4244: '=' : conversion
from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(2752) : warning C4244: '=' : conversion
from 'SHORT' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(2754) : warning C4244: '=' : conversion
from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(2805) : warning C4244: '=' : conversion
from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(3465) : warning C4244: '=' : conversion
from 'size_t' to 'USHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(3466) : warning C4244: '=' : conversion
from 'size_t' to 'USHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(5150) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(5492) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(5493) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(5497) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(5529) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(5530) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(5558) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(5559) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(7058) : warning C4244: '=' : conversion
from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(8172) : warning C4055: 'type cast' : from
data pointer 'void *' to function pointer 'HB_EVALSCOPE_FUNC'
source\rdd\dbfcdx\dbfcdx1.c(8677) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(8677) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(8854) : warning C4244: '-=' : conversion
from 'int' to 'SHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(8945) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(8945) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(8991) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(8991) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(9248) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(9248) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(9680) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(408) : warning C4244: '=' :
conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1559) : warning C4244: '='
: conversion from 'int' to 'SHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1570) : warning C4244: '-='
: conversion from 'int' to 'SHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1583) : warning C4244: '='
: conversion from 'int' to 'SHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1794) : warning C4244: '='
: conversion from 'int' to 'USHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1800) : warning C4244: '='
: conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1802) : warning C4244: '='
: conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2017) : warning C4244: '-='
: conversion from 'int' to 'SHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2094) : warning C4244: '+='
: conversion from 'int' to 'SHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2217) : warning C4244: '-='
: conversion from 'int' to 'SHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2695) : warning C4244: '='
: conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2752) : warning C4244: '='
: conversion from 'SHORT' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2756) : warning C4244: '='
: conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2807) : warning C4244: '='
: conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(3465) : warning C4244: '='
: conversion from 'size_t' to 'USHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(3466) : warning C4244: '='
: conversion from 'size_t' to 'USHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5150) : warning C4244: '='
: conversion from 'int' to 'USHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5492) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5493) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5497) : warning C4244:
'function' : conversion from 'int' to 'USHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5529) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5530) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5558) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5559) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(7058) : warning C4244: '='
: conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8172) : warning C4055:
'type cast' : from data pointer 'void *' to function pointer
'HB_EVALSCOPE_FUNC'
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8677) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8677) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8854) : warning C4244: '-='
: conversion from 'int' to 'SHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8945) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8945) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8991) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8991) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(9248) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(9248) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(9616) : warning C4244: '='
: conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbffpt\dbffpt1.c(581) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbffpt\dbffpt1.c(615) : warning C4310: cast truncates constant value
source\rdd\dbffpt\dbffpt1.c(998) : warning C4310: cast truncates constant value
source\rdd\dbffpt\dbffpt1.c(3598) : warning C4244: '=' : conversion
from 'HB_FOFFSET' to 'ULONG', possible loss of data
source\rdd\dbffpt\dbffpt1.c(3855) : warning C4244: '=' : conversion
from 'int' to 'BYTE', possible loss of data
source\rdd\dbffpt\dbffpt1.c(3885) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbffpt\dbffpt1.c(3898) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbffpt\dbffpt1.c(4413) : warning C4244: '=' : conversion
from 'HB_FOFFSET' to 'ULONG', possible loss of data
source\rdd\dbffpt\dbffpt1.c(4746) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbffpt\dbffpt1.c(4763) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbffpt\dbffpt1.c(5035) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbffpt\dbffpt1.c(5111) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(321) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(388) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(389) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(399) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(400) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(411) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(412) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(420) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(421) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(423) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(425) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(451) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(454) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(458) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(460) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(485) : warning C4244: '=' : conversion from
'int' to 'short', possible loss of data
source\rdd\hbsix\sxcompr.c(526) : warning C4244: '=' : conversion from
'int' to 'short', possible loss of data
source\rdd\hbsix\sxcrypt.c(107) : warning C4244: '=' : conversion from
'int' to 'BYTE', possible loss of data
source\rdd\hbsix\sxcrypt.c(109) : warning C4244: '=' : conversion from
'int' to 'BYTE', possible loss of data
source\rdd\hbsix\sxcrypt.c(127) : warning C4244: '=' : conversion from
'int' to 'BYTE', possible loss of data
source\rdd\hbsix\sxcrypt.c(128) : warning C4244: '=' : conversion from
'int' to 'BYTE', possible loss of data
source\rdd\hsx\hsx.c(721) : warning C4244: '=' : conversion from
'UINT32' to 'USHORT', possible loss of data
source\rdd\hsx\hsx.c(1381) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(124) : warning C4244: 'initializing' :
conversion from 'int' to 'ERRCODE', possible loss of data
source\rdd\usrrdd\usrrdd.c(214) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(215) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(216) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(247) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(342) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(463) : warning C4244: 'initializing' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(472) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(484) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(485) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(536) : warning C4244: 'initializing' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(554) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(555) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(815) : warning C4054: 'type cast' : from
function pointer 'DBENTRYP_SVP' to data pointer 'PHB_ITEM'
source\rdd\usrrdd\usrrdd.c(1300) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(1911) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(2877) : warning C4055: 'type cast' : from
data pointer 'PHB_ITEM' to function pointer 'DBENTRYP_SVP'
source\rdd\usrrdd\usrrdd.c(2887) : warning C4244: 'initializing' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3091) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3278) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3385) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3393) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3404) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3428) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3458) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3458) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3474) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3543) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3750) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3780) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3971) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(4127) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(4215) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(4215) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(4224) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(4224) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(4269) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rtl\gtwin\gtwin.c(778) : warning C4244: '-=' : conversion from
'int' to 'SHORT', possible loss of data
source\rtl\gtwin\gtwin.c(779) : warning C4244: '-=' : conversion from
'int' to 'SHORT', possible loss of data
source\rtl\gtwvt\gtwvt.c(755) : warning C4244: '+=' : conversion from
'int' to 'USHORT', possible loss of data
source\rtl\gtwvt\gtwvt.c(756) : warning C4244: '+=' : conversion from
'int' to 'USHORT', possible loss of data
source\rtl\gtwvt\gtwvt.c(782) : warning C4244: '+=' : conversion from
'int' to 'USHORT', possible loss of data
source\rtl\gtwvt\gtwvt.c(783) : warning C4244: '+=' : conversion from
'int' to 'USHORT', possible loss of data
macroy.c(1900) : warning C4244: '=' : conversion from 'int' to
'yytype_int16', possible loss of data
d:\cvs\harbour\macroy.c(3095) : warning C4701: potentially
uninitialized local variable 'hb_macrolval' used
source\rtl\binnumx.c(86) : warning C4244: '=' : conversion from 'int'
to 'char', possible loss of data
source\rtl\binnumx.c(87) : warning C4244: '=' : conversion from 'int'
to 'char', possible loss of data
source\rtl\cdpapi.c(137) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rtl\cdpapi.c(142) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rtl\cdpapi.c(143) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rtl\cdpapi.c(148) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rtl\cdpapi.c(149) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rtl\cdpapi.c(150) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rtl\console.c(250) : warning C4244: '+=' : conversion from
'int' to 'USHORT', possible loss of data
source\rtl\console.c(264) : warning C4244: '+=' : conversion from
'int' to 'USHORT', possible loss of data
source\rtl\gtapi.c(178) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gtapi.c(196) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gtapi.c(214) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gtapi.c(235) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gtapi.c(285) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rtl\gtapi.c(422) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rtl\gtapi.c(499) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rtl\gtapi.c(515) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rtl\gtapi.c(601) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gtapi.c(775) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gtapi.c(845) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gtapi.c(863) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gtapi.c(1255) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gtapi.c(1255) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gtapi.c(1275) : warning C4244: 'function' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\gttone.c(204) : warning C4244: 'function' : conversion from
'int' to 'USHORT', possible loss of data
source\rtl\hardcr.c(64) : warning C4310: cast truncates constant value
source\rtl\hbgtcore.c(137) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rtl\hbgtcore.c(138) : warning C4244: '=' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(312) : warning C4244: '=' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(322) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rtl\hbgtcore.c(799) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(927) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(927) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(936) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(936) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(980) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rtl\hbgtcore.c(981) : warning C4244: '=' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1291) : warning C4244: 'initializing' :
conversion from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1493) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1493) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1754) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1755) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1768) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1781) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1793) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1795) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1796) : warning C4244: 'function' : conversion
from 'int' to 'BYTE', possible loss of data
source\rtl\hbgtcore.c(1994) : warning C4244: '=' : conversion from
'int' to 'UINT16', possible loss of data
source\rtl\hbgtcore.c(1995) : warning C4244: '=' : conversion from
'int' to 'BYTE', possible loss of data
source\rtl\hbinet.c(1695) : warning C4244: 'function' : conversion
from 'int' to 'u_short', possible loss of data
source\rtl\hbinet.c(1698) : warning C4244: '=' : conversion from 'int'
to 'u_short', possible loss of data
source\rtl\hbinet.c(1860) : warning C4244: 'function' : conversion
from 'int' to 'u_short', possible loss of data
source\rtl\hbinet.c(1863) : warning C4244: '=' : conversion from 'int'
to 'u_short', possible loss of data
source\rtl\hbinet.c(1917) : warning C4244: 'function' : conversion
from 'int' to 'u_short', possible loss of data
source\rtl\hbinet.c(1920) : warning C4244: '=' : conversion from 'int'
to 'u_short', possible loss of data
source\rtl\hbinet.c(1978) : warning C4244: 'function' : conversion
from 'int' to 'u_short', possible loss of data
source\rtl\hbinet.c(1981) : warning C4244: '=' : conversion from 'int'
to 'u_short', possible loss of data
source\rtl\hbinet.c(2090) : warning C4244: 'function' : conversion
from 'int' to 'u_short', possible loss of data
source\rtl\mlcfunc.c(89) : warning C4310: cast truncates constant value
source\rtl\mlcfunc.c(126) : warning C4310: cast truncates constant value
source\rtl\mlcfunc.c(293) : warning C4310: cast truncates constant value
source\rtl\mlcfunc.c(436) : warning C4310: cast truncates constant value
source\rtl\mlcfunc.c(438) : warning C4310: cast truncates constant value
source\rtl\mlcfunc.c(440) : warning C4310: cast truncates constant value
source\rtl\mtran.c(73) : warning C4310: cast truncates constant value
source\macro\macrolex.c(205) : warning C4244: '=' : conversion from
'int' to 'UCHAR', possible loss of data
source\macro\macrolex.c(206) : warning C4244: '=' : conversion from
'int' to 'UCHAR', possible loss of data
source\macro\macrolex.c(213) : warning C4244: '=' : conversion from
'int' to 'UCHAR', possible loss of data
source\hbzlib\deflate.c(614) : warning C4244: '=' : conversion from
'int' to 'Bytef', possible loss of data
source\hbzlib\deflate.c(616) : warning C4244: '=' : conversion from
'uInt' to 'Bytef', possible loss of data
source\hbzlib\deflate.c(617) : warning C4244: '=' : conversion from
'uInt' to 'Bytef', possible loss of data
source\hbzlib\deflate.c(702) : warning C4244: '=' : conversion from
'int' to 'Bytef', possible loss of data
source\hbzlib\deflate.c(733) : warning C4244: '=' : conversion from
'int' to 'Bytef', possible loss of data
source\hbzlib\deflate.c(1507) : warning C4244: 'initializing' :
conversion from 'uInt' to 'uch', possible loss of data
source\hbzlib\deflate.c(1507) : warning C4244: 'initializing' :
conversion from 'uInt' to 'ush', possible loss of data
source\hbzlib\deflate.c(1629) : warning C4244: 'initializing' :
conversion from 'uInt' to 'uch', possible loss of data
source\hbzlib\deflate.c(1629) : warning C4244: 'initializing' :
conversion from 'uInt' to 'ush', possible loss of data
source\hbzlib\gzio.c(418) : warning C4244: '=' : conversion from 'int'
to 'Byte', possible loss of data
source\hbzlib\inflate.c(711) : warning C4244: '=' : conversion from
'unsigned int' to 'Bytef', possible loss of data
source\hbzlib\inflate.c(732) : warning C4244: '=' : conversion from
'unsigned int' to 'Bytef', possible loss of data
source\hbzlib\trees.c(604) : warning C4244: '=' : conversion from
'unsigned int' to 'ush', possible loss of data
source\hbzlib\trees.c(728) : warning C4244: '+=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(773) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(777) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(780) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(780) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(783) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(783) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(786) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(786) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(848) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(849) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(850) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(853) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(873) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(895) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(896) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(907) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(908) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(988) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(994) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(1087) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(1092) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(1096) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(1102) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(1106) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\hbzlib\trees.c(1116) : warning C4244: '=' : conversion from
'int' to 'ush', possible loss of data
source\rdd\dbcmd.c(395) : warning C4244: 'function' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\dbcmd.c(458) : warning C4244: 'function' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\dbcmd.c(841) : warning C4244: 'function' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\dbcmd.c(890) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbcmd.c(904) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbcmd.c(941) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbcmd.c(1487) : warning C4244: 'function' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\dbcmd.c(1524) : warning C4244: 'function' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\dbcmd.c(1694) : warning C4244: 'function' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\dbcmd.c(1726) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd.c(1735) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd.c(1775) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd.c(1898) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd.c(1900) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd.c(2030) : warning C4244: 'function' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\dbcmd.c(2097) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd.c(2121) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd.c(2145) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd53.c(353) : warning C4244: 'function' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbcmd53.c(387) : warning C4244: 'function' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbcmd53.c(407) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd53.c(413) : warning C4244: 'function' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbcmd53.c(437) : warning C4244: 'function' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbcmd53.c(463) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd53.c(471) : warning C4244: 'function' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbcmd53.c(495) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbcmd53.c(501) : warning C4244: 'function' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\workarea.c(355) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\wacore.c(95) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\wacore.c(307) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\wacore.c(320) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\wacore.c(450) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\wafunc.c(699) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\wafunc.c(771) : warning C4244: 'function' : conversion from
'const int' to 'USHORT', possible loss of data
source\rdd\wafunc.c(1030) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(1612) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2222) : warning C4244: '=' : conversion from 'ULONG'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2768) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rdd\dbf1.c(2780) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rdd\dbf1.c(2899) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2913) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2923) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2933) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2943) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2955) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2974) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2981) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2988) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(2997) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(3012) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(3019) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(3027) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(3034) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(3044) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(3054) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(3629) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rdd\dbf1.c(3807) : warning C4244: '-=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(4007) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(4940) : warning C4244: '=' : conversion from 'ULONG'
to 'USHORT', possible loss of data
source\rdd\dbf1.c(5418) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rdd\dbf1.c(5437) : warning C4244: '=' : conversion from 'int'
to 'BYTE', possible loss of data
source\rdd\dbf1.c(5554) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\delim1.c(83) : warning C4244: '=' : conversion from
'size_t' to 'USHORT', possible loss of data
source\rdd\delim1.c(1121) : warning C4244: '+=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\sdf1.c(82) : warning C4244: '=' : conversion from 'size_t'
to 'USHORT', possible loss of data
source\rdd\sdf1.c(108) : warning C4244: '=' : conversion from 'ULONG'
to 'USHORT', possible loss of data
source\rdd\sdf1.c(172) : warning C4244: '=' : conversion from 'ULONG'
to 'USHORT', possible loss of data
source\rdd\sdf1.c(868) : warning C4244: '+=' : conversion from 'int'
to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2378) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2433) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2457) : warning C4244: '=' : conversion
from 'int' to 'SHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2539) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2548) : warning C4244: '=' : conversion
from 'int' to 'SHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2551) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2814) : warning C4244: '-=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2843) : warning C4244: '-=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2929) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2969) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(2983) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(3004) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(3076) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(3429) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(3433) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(4229) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(7019) : warning C4055: 'type cast' : from
data pointer 'void *' to function pointer 'HB_EVALSCOPE_FUNC'
source\rdd\dbfntx\dbfntx1.c(7689) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbfntx\dbfntx1.c(7737) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(408) : warning C4244: '=' : conversion
from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(1559) : warning C4244: '=' : conversion
from 'int' to 'SHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(1570) : warning C4244: '-=' : conversion
from 'int' to 'SHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(1583) : warning C4244: '=' : conversion
from 'int' to 'SHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(1794) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(1800) : warning C4244: '=' : conversion
from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(1802) : warning C4244: '=' : conversion
from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(2017) : warning C4244: '-=' : conversion
from 'int' to 'SHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(2094) : warning C4244: '+=' : conversion
from 'int' to 'SHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(2217) : warning C4244: '-=' : conversion
from 'int' to 'SHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(2693) : warning C4244: '=' : conversion
from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(2752) : warning C4244: '=' : conversion
from 'SHORT' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(2754) : warning C4244: '=' : conversion
from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(2805) : warning C4244: '=' : conversion
from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(3465) : warning C4244: '=' : conversion
from 'size_t' to 'USHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(3466) : warning C4244: '=' : conversion
from 'size_t' to 'USHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(5150) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(5492) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(5493) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(5497) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(5529) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(5530) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(5558) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(5559) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(7058) : warning C4244: '=' : conversion
from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(8172) : warning C4055: 'type cast' : from
data pointer 'void *' to function pointer 'HB_EVALSCOPE_FUNC'
source\rdd\dbfcdx\dbfcdx1.c(8677) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(8677) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(8854) : warning C4244: '-=' : conversion
from 'int' to 'SHORT', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(8945) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(8945) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(8991) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(8991) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(9248) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(9248) : warning C4244: 'function' :
conversion from 'int' to 'BYTE', possible loss of data
source\rdd\dbfcdx\dbfcdx1.c(9680) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(408) : warning C4244: '=' :
conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1559) : warning C4244: '='
: conversion from 'int' to 'SHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1570) : warning C4244: '-='
: conversion from 'int' to 'SHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1583) : warning C4244: '='
: conversion from 'int' to 'SHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1794) : warning C4244: '='
: conversion from 'int' to 'USHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1800) : warning C4244: '='
: conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1802) : warning C4244: '='
: conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2017) : warning C4244: '-='
: conversion from 'int' to 'SHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2094) : warning C4244: '+='
: conversion from 'int' to 'SHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2217) : warning C4244: '-='
: conversion from 'int' to 'SHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2695) : warning C4244: '='
: conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2752) : warning C4244: '='
: conversion from 'SHORT' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2756) : warning C4244: '='
: conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2807) : warning C4244: '='
: conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(3465) : warning C4244: '='
: conversion from 'size_t' to 'USHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(3466) : warning C4244: '='
: conversion from 'size_t' to 'USHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5150) : warning C4244: '='
: conversion from 'int' to 'USHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5492) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5493) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5497) : warning C4244:
'function' : conversion from 'int' to 'USHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5529) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5530) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5558) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5559) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(7058) : warning C4244: '='
: conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8172) : warning C4055:
'type cast' : from data pointer 'void *' to function pointer
'HB_EVALSCOPE_FUNC'
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8677) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8677) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8854) : warning C4244: '-='
: conversion from 'int' to 'SHORT', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8945) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8945) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8991) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8991) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(9248) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(9248) : warning C4244:
'function' : conversion from 'int' to 'BYTE', possible loss of data
d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(9616) : warning C4244: '='
: conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbffpt\dbffpt1.c(581) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbffpt\dbffpt1.c(615) : warning C4310: cast truncates constant value
source\rdd\dbffpt\dbffpt1.c(998) : warning C4310: cast truncates constant value
source\rdd\dbffpt\dbffpt1.c(3598) : warning C4244: '=' : conversion
from 'HB_FOFFSET' to 'ULONG', possible loss of data
source\rdd\dbffpt\dbffpt1.c(3855) : warning C4244: '=' : conversion
from 'int' to 'BYTE', possible loss of data
source\rdd\dbffpt\dbffpt1.c(3885) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbffpt\dbffpt1.c(3898) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbffpt\dbffpt1.c(4413) : warning C4244: '=' : conversion
from 'HB_FOFFSET' to 'ULONG', possible loss of data
source\rdd\dbffpt\dbffpt1.c(4746) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbffpt\dbffpt1.c(4763) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\dbffpt\dbffpt1.c(5035) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\dbffpt\dbffpt1.c(5111) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(321) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(388) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(389) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(399) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(400) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(411) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(412) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(420) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(421) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(423) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(425) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(451) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(454) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(458) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(460) : warning C4244: '=' : conversion from
'int' to 'SHORT', possible loss of data
source\rdd\hbsix\sxcompr.c(485) : warning C4244: '=' : conversion from
'int' to 'short', possible loss of data
source\rdd\hbsix\sxcompr.c(526) : warning C4244: '=' : conversion from
'int' to 'short', possible loss of data
source\rdd\hbsix\sxcrypt.c(107) : warning C4244: '=' : conversion from
'int' to 'BYTE', possible loss of data
source\rdd\hbsix\sxcrypt.c(109) : warning C4244: '=' : conversion from
'int' to 'BYTE', possible loss of data
source\rdd\hbsix\sxcrypt.c(127) : warning C4244: '=' : conversion from
'int' to 'BYTE', possible loss of data
source\rdd\hbsix\sxcrypt.c(128) : warning C4244: '=' : conversion from
'int' to 'BYTE', possible loss of data
source\rdd\hsx\hsx.c(721) : warning C4244: '=' : conversion from
'UINT32' to 'USHORT', possible loss of data
source\rdd\hsx\hsx.c(1381) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(124) : warning C4244: 'initializing' :
conversion from 'int' to 'ERRCODE', possible loss of data
source\rdd\usrrdd\usrrdd.c(214) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(215) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(216) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(247) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(342) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(463) : warning C4244: 'initializing' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(472) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(484) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(485) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(536) : warning C4244: 'initializing' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(554) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(555) : warning C4244: '=' : conversion from
'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(815) : warning C4054: 'type cast' : from
function pointer 'DBENTRYP_SVP' to data pointer 'PHB_ITEM'
source\rdd\usrrdd\usrrdd.c(1300) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(1911) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(2877) : warning C4055: 'type cast' : from
data pointer 'PHB_ITEM' to function pointer 'DBENTRYP_SVP'
source\rdd\usrrdd\usrrdd.c(2887) : warning C4244: 'initializing' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3091) : warning C4244: '=' : conversion
from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3278) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3385) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3393) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3404) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3428) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3458) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3458) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3474) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3543) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3750) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3780) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(3971) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(4127) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(4215) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(4215) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(4224) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(4224) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rdd\usrrdd\usrrdd.c(4269) : warning C4244: 'function' :
conversion from 'int' to 'USHORT', possible loss of data
source\rtl\gtwin\gtwin.c(778) : warning C4244: '-=' : conversion from
'int' to 'SHORT', possible loss of data
source\rtl\gtwin\gtwin.c(779) : warning C4244: '-=' : conversion from
'int' to 'SHORT', possible loss of data
source\rtl\gtwvt\gtwvt.c(755) : warning C4244: '+=' : conversion from
'int' to 'USHORT', possible loss of data
source\rtl\gtwvt\gtwvt.c(756) : warning C4244: '+=' : conversion from
'int' to 'USHORT', possible loss of data
source\rtl\gtwvt\gtwvt.c(782) : warning C4244: '+=' : conversion from
'int' to 'USHORT', possible loss of data
source\rtl\gtwvt\gtwvt.c(783) : warning C4244: '+=' : conversion from
'int' to 'USHORT', possible loss of data
source\vm\classes.c(3273) : warning C4244: '+=' : conversion from
'int' to 'USHORT', possible loss of data
source\vm\classes.c(3566) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\classes.c(4073) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\classes.c(4097) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\codebloc.c(218) : warning C4244: '=' : conversion from 'int'
to 'SHORT', possible loss of data
source\vm\dynlibhb.c(177) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\eval.c(422) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\evalhb.c(66) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\fm.c(360) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\fm.c(439) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\fm.c(799) : warning C4244: '=' : conversion from 'int' to
'char', possible loss of data
source\vm\fm.c(801) : warning C4244: '=' : conversion from 'int' to
'char', possible loss of data
source\vm\hvm.c(6134) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6191) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6214) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6216) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6230) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6232) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6237) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\itemapi.c(825) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1008) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1009) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1032) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1036) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1085) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1109) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1141) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\macro.c(1382) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\classes.c(3273) : warning C4244: '+=' : conversion from
'int' to 'USHORT', possible loss of data
source\vm\classes.c(3566) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\classes.c(4073) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\classes.c(4097) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\codebloc.c(218) : warning C4244: '=' : conversion from 'int'
to 'SHORT', possible loss of data
source\vm\dynlibhb.c(177) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\eval.c(422) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\evalhb.c(66) : warning C4244: 'initializing' : conversion
from 'int' to 'USHORT', possible loss of data
source\vm\fm.c(360) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\fm.c(439) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\fm.c(799) : warning C4244: '=' : conversion from 'int' to
'char', possible loss of data
source\vm\fm.c(801) : warning C4244: '=' : conversion from 'int' to
'char', possible loss of data
source\vm\hvm.c(6134) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6191) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6214) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6216) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6230) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6232) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\hvm.c(6237) : warning C4244: '=' : conversion from 'int' to
'USHORT', possible loss of data
source\vm\itemapi.c(825) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1008) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1009) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1032) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1036) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1085) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1109) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\itemapi.c(1141) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\macro.c(1382) : warning C4244: '=' : conversion from 'int'
to 'USHORT', possible loss of data
source\vm\thread.c(832) : warning C4244: '=' : conversion from
'HB_ULONG' to 'ULONG', possible loss of data
From rodrmigu at gmail.com  Fri Dec 12 08:12:22 2008
From: rodrmigu at gmail.com (Rodrigo Miguel)
Date: Fri Jan  2 17:08:10 2009
Subject: [Harbour] Re: MSVC 80 & 90 compiler warnings
In-Reply-To: <80b05d460812100529s3cb05781id001e94b5c65e012@mail.gmail.com>
References: <80b05d460812100529s3cb05781id001e94b5c65e012@mail.gmail.com>
Message-ID: <80b05d460812120512y6f7a918dw517e897dd785384e@mail.gmail.com>

I realize there were some mail issues, so I'm resending the email below.

Thanks
Rodrigo

On Wed, Dec 10, 2008 at 11:29 AM, Rodrigo Miguel <rodrmigu@gmail.com> wrote:
> All,
>
> Is there a new SET HB_* to be added to avoid the errors below or
> something that were added since version 1.0.0 that need to be changed
> in order to avoid the warnings below?
>
> Here are my settings:
>
> set HB_ARCHITECTURE=w32
> set HB_COMPILER=msvc
> set HB_GT_LIB=gtwin
> set HB_MULTI_GT=yes
> set HB_PREF=hb
>
> set HB_VISUALC_VER=90
> set CFLAGS=/EHsc /D_CRT_SECURE_NO_DEPRECATE
>
> Thanks & Regards
> Rodrigo
>
> source\compiler\hbmain.c(298) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\compiler\hbmain.c(868) : warning C4244: '-=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\compiler\hbmain.c(3511) : warning C4244: '+=' : conversion from
> 'size_t' to 'USHORT', possible loss of data
> source\compiler\gencc.c(637) : warning C4244: '=' : conversion from
> 'size_t' to 'USHORT', possible loss of data
> source\compiler\gencc.c(789) : warning C4244: '=' : conversion from
> 'size_t' to 'USHORT', possible loss of data
> source\compiler\gencc.c(1539) : warning C4244: '=' : conversion from
> 'size_t' to 'USHORT', possible loss of data
> source\compiler\hbfix.c(124) : warning C4244: '+=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\main\harbour.c(281) : warning C4244: '=' : conversion from
> 'int' to 'char', possible loss of data
> source\main\harbour.c(282) : warning C4244: '=' : conversion from
> 'int' to 'char', possible loss of data
> source\vm\classes.c(3273) : warning C4244: '+=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\vm\classes.c(3566) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\classes.c(4073) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\classes.c(4097) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\codebloc.c(218) : warning C4244: '=' : conversion from 'int'
> to 'SHORT', possible loss of data
> source\vm\dynlibhb.c(177) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\eval.c(422) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\evalhb.c(66) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\fm.c(360) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\fm.c(439) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\fm.c(799) : warning C4244: '=' : conversion from 'int' to
> 'char', possible loss of data
> source\vm\fm.c(801) : warning C4244: '=' : conversion from 'int' to
> 'char', possible loss of data
> source\vm\hvm.c(6134) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6191) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6214) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6216) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6230) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6232) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6237) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\itemapi.c(825) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1008) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1009) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1032) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1036) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1085) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1109) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1141) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\macro.c(1382) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\classes.c(3273) : warning C4244: '+=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\vm\classes.c(3566) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\classes.c(4073) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\classes.c(4097) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\codebloc.c(218) : warning C4244: '=' : conversion from 'int'
> to 'SHORT', possible loss of data
> source\vm\dynlibhb.c(177) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\eval.c(422) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\evalhb.c(66) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\fm.c(360) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\fm.c(439) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\fm.c(799) : warning C4244: '=' : conversion from 'int' to
> 'char', possible loss of data
> source\vm\fm.c(801) : warning C4244: '=' : conversion from 'int' to
> 'char', possible loss of data
> source\vm\hvm.c(6134) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6191) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6214) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6216) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6230) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6232) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6237) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\itemapi.c(825) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1008) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1009) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1032) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1036) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1085) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1109) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1141) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\macro.c(1382) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\thread.c(832) : warning C4244: '=' : conversion from
> 'HB_ULONG' to 'ULONG', possible loss of data
> source\rtl\binnumx.c(86) : warning C4244: '=' : conversion from 'int'
> to 'char', possible loss of data
> source\rtl\binnumx.c(87) : warning C4244: '=' : conversion from 'int'
> to 'char', possible loss of data
> source\rtl\cdpapi.c(137) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rtl\cdpapi.c(142) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rtl\cdpapi.c(143) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rtl\cdpapi.c(148) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rtl\cdpapi.c(149) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rtl\cdpapi.c(150) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rtl\console.c(250) : warning C4244: '+=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rtl\console.c(264) : warning C4244: '+=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rtl\gtapi.c(178) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gtapi.c(196) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gtapi.c(214) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gtapi.c(235) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gtapi.c(285) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rtl\gtapi.c(422) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rtl\gtapi.c(499) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rtl\gtapi.c(515) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rtl\gtapi.c(601) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gtapi.c(775) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gtapi.c(845) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gtapi.c(863) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gtapi.c(1255) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gtapi.c(1255) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gtapi.c(1275) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gttone.c(204) : warning C4244: 'function' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rtl\hardcr.c(64) : warning C4310: cast truncates constant value
> source\rtl\hbgtcore.c(137) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rtl\hbgtcore.c(138) : warning C4244: '=' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(312) : warning C4244: '=' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(322) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rtl\hbgtcore.c(799) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(927) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(927) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(936) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(936) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(980) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rtl\hbgtcore.c(981) : warning C4244: '=' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1291) : warning C4244: 'initializing' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1493) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1493) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1754) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1755) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1768) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1781) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1793) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1795) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1796) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1994) : warning C4244: '=' : conversion from
> 'int' to 'UINT16', possible loss of data
> source\rtl\hbgtcore.c(1995) : warning C4244: '=' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\hbinet.c(1695) : warning C4244: 'function' : conversion
> from 'int' to 'u_short', possible loss of data
> source\rtl\hbinet.c(1698) : warning C4244: '=' : conversion from 'int'
> to 'u_short', possible loss of data
> source\rtl\hbinet.c(1860) : warning C4244: 'function' : conversion
> from 'int' to 'u_short', possible loss of data
> source\rtl\hbinet.c(1863) : warning C4244: '=' : conversion from 'int'
> to 'u_short', possible loss of data
> source\rtl\hbinet.c(1917) : warning C4244: 'function' : conversion
> from 'int' to 'u_short', possible loss of data
> source\rtl\hbinet.c(1920) : warning C4244: '=' : conversion from 'int'
> to 'u_short', possible loss of data
> source\rtl\hbinet.c(1978) : warning C4244: 'function' : conversion
> from 'int' to 'u_short', possible loss of data
> source\rtl\hbinet.c(1981) : warning C4244: '=' : conversion from 'int'
> to 'u_short', possible loss of data
> source\rtl\hbinet.c(2090) : warning C4244: 'function' : conversion
> from 'int' to 'u_short', possible loss of data
> source\rtl\mlcfunc.c(89) : warning C4310: cast truncates constant value
> source\rtl\mlcfunc.c(126) : warning C4310: cast truncates constant value
> source\rtl\mlcfunc.c(293) : warning C4310: cast truncates constant value
> source\rtl\mlcfunc.c(436) : warning C4310: cast truncates constant value
> source\rtl\mlcfunc.c(438) : warning C4310: cast truncates constant value
> source\rtl\mlcfunc.c(440) : warning C4310: cast truncates constant value
> source\rtl\mtran.c(73) : warning C4310: cast truncates constant value
> macroy.c(1900) : warning C4244: '=' : conversion from 'int' to
> 'yytype_int16', possible loss of data
> d:\cvs\harbour\macroy.c(3095) : warning C4701: potentially
> uninitialized local variable 'hb_macrolval' used
> source\macro\macrolex.c(205) : warning C4244: '=' : conversion from
> 'int' to 'UCHAR', possible loss of data
> source\macro\macrolex.c(206) : warning C4244: '=' : conversion from
> 'int' to 'UCHAR', possible loss of data
> source\macro\macrolex.c(213) : warning C4244: '=' : conversion from
> 'int' to 'UCHAR', possible loss of data
> source\hbzlib\deflate.c(614) : warning C4244: '=' : conversion from
> 'int' to 'Bytef', possible loss of data
> source\hbzlib\deflate.c(616) : warning C4244: '=' : conversion from
> 'uInt' to 'Bytef', possible loss of data
> source\hbzlib\deflate.c(617) : warning C4244: '=' : conversion from
> 'uInt' to 'Bytef', possible loss of data
> source\hbzlib\deflate.c(702) : warning C4244: '=' : conversion from
> 'int' to 'Bytef', possible loss of data
> source\hbzlib\deflate.c(733) : warning C4244: '=' : conversion from
> 'int' to 'Bytef', possible loss of data
> source\hbzlib\deflate.c(1507) : warning C4244: 'initializing' :
> conversion from 'uInt' to 'uch', possible loss of data
> source\hbzlib\deflate.c(1507) : warning C4244: 'initializing' :
> conversion from 'uInt' to 'ush', possible loss of data
> source\hbzlib\deflate.c(1629) : warning C4244: 'initializing' :
> conversion from 'uInt' to 'uch', possible loss of data
> source\hbzlib\deflate.c(1629) : warning C4244: 'initializing' :
> conversion from 'uInt' to 'ush', possible loss of data
> source\hbzlib\gzio.c(418) : warning C4244: '=' : conversion from 'int'
> to 'Byte', possible loss of data
> dsource\hbzlib\inflate.c(711) : warning C4244: '=' : conversion from
> 'unsigned int' to 'Bytef', possible loss of data
> source\hbzlib\inflate.c(732) : warning C4244: '=' : conversion from
> 'unsigned int' to 'Bytef', possible loss of data
> source\hbzlib\trees.c(604) : warning C4244: '=' : conversion from
> 'unsigned int' to 'ush', possible loss of data
> source\hbzlib\trees.c(728) : warning C4244: '+=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(773) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(777) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(780) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(780) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(783) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(783) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(786) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(786) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(848) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(849) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(850) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(853) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(873) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(895) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(896) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(907) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(908) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(988) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(994) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(1087) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(1092) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(1096) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(1102) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(1106) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(1116) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\rdd\dbcmd.c(395) : warning C4244: 'function' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(458) : warning C4244: 'function' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(841) : warning C4244: 'function' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(890) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(904) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(941) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(1487) : warning C4244: 'function' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(1524) : warning C4244: 'function' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(1694) : warning C4244: 'function' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(1726) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(1735) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(1775) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(1898) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(1900) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(2030) : warning C4244: 'function' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(2097) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(2121) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(2145) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd53.c(353) : warning C4244: 'function' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd53.c(387) : warning C4244: 'function' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd53.c(407) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd53.c(413) : warning C4244: 'function' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd53.c(437) : warning C4244: 'function' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd53.c(463) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd53.c(471) : warning C4244: 'function' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd53.c(495) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd53.c(501) : warning C4244: 'function' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\workarea.c(355) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\wacore.c(95) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\wacore.c(307) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\wacore.c(320) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\wacore.c(450) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\wafunc.c(699) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\wafunc.c(771) : warning C4244: 'function' : conversion from
> 'const int' to 'USHORT', possible loss of data
> source\rdd\wafunc.c(1030) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(1612) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2222) : warning C4244: '=' : conversion from 'ULONG'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2768) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rdd\dbf1.c(2780) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rdd\dbf1.c(2899) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2913) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2923) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2933) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2943) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2955) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2974) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2981) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2988) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2997) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(3012) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(3019) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(3027) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(3034) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(3044) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(3054) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(3629) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rdd\dbf1.c(3807) : warning C4244: '-=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(4007) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(4940) : warning C4244: '=' : conversion from 'ULONG'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(5418) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rdd\dbf1.c(5437) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rdd\dbf1.c(5554) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\delim1.c(83) : warning C4244: '=' : conversion from
> 'size_t' to 'USHORT', possible loss of data
> source\rdd\delim1.c(1121) : warning C4244: '+=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\sdf1.c(82) : warning C4244: '=' : conversion from 'size_t'
> to 'USHORT', possible loss of data
> source\rdd\sdf1.c(108) : warning C4244: '=' : conversion from 'ULONG'
> to 'USHORT', possible loss of data
> source\rdd\sdf1.c(172) : warning C4244: '=' : conversion from 'ULONG'
> to 'USHORT', possible loss of data
> source\rdd\sdf1.c(868) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2378) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2433) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2457) : warning C4244: '=' : conversion
> from 'int' to 'SHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2539) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2548) : warning C4244: '=' : conversion
> from 'int' to 'SHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2551) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2814) : warning C4244: '-=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2843) : warning C4244: '-=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2929) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2969) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2983) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(3004) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(3076) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(3429) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(3433) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(4229) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(7019) : warning C4055: 'type cast' : from
> data pointer 'void *' to function pointer 'HB_EVALSCOPE_FUNC'
> source\rdd\dbfntx\dbfntx1.c(7689) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(7737) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(408) : warning C4244: '=' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(1559) : warning C4244: '=' : conversion
> from 'int' to 'SHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(1570) : warning C4244: '-=' : conversion
> from 'int' to 'SHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(1583) : warning C4244: '=' : conversion
> from 'int' to 'SHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(1794) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(1800) : warning C4244: '=' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(1802) : warning C4244: '=' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(2017) : warning C4244: '-=' : conversion
> from 'int' to 'SHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(2094) : warning C4244: '+=' : conversion
> from 'int' to 'SHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(2217) : warning C4244: '-=' : conversion
> from 'int' to 'SHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(2693) : warning C4244: '=' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(2752) : warning C4244: '=' : conversion
> from 'SHORT' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(2754) : warning C4244: '=' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(2805) : warning C4244: '=' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(3465) : warning C4244: '=' : conversion
> from 'size_t' to 'USHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(3466) : warning C4244: '=' : conversion
> from 'size_t' to 'USHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(5150) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(5492) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(5493) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(5497) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(5529) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(5530) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(5558) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(5559) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(7058) : warning C4244: '=' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(8172) : warning C4055: 'type cast' : from
> data pointer 'void *' to function pointer 'HB_EVALSCOPE_FUNC'
> source\rdd\dbfcdx\dbfcdx1.c(8677) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(8677) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(8854) : warning C4244: '-=' : conversion
> from 'int' to 'SHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(8945) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(8945) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(8991) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(8991) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(9248) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(9248) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(9680) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(408) : warning C4244: '=' :
> conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1559) : warning C4244: '='
> : conversion from 'int' to 'SHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1570) : warning C4244: '-='
> : conversion from 'int' to 'SHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1583) : warning C4244: '='
> : conversion from 'int' to 'SHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1794) : warning C4244: '='
> : conversion from 'int' to 'USHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1800) : warning C4244: '='
> : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1802) : warning C4244: '='
> : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2017) : warning C4244: '-='
> : conversion from 'int' to 'SHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2094) : warning C4244: '+='
> : conversion from 'int' to 'SHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2217) : warning C4244: '-='
> : conversion from 'int' to 'SHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2695) : warning C4244: '='
> : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2752) : warning C4244: '='
> : conversion from 'SHORT' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2756) : warning C4244: '='
> : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2807) : warning C4244: '='
> : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(3465) : warning C4244: '='
> : conversion from 'size_t' to 'USHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(3466) : warning C4244: '='
> : conversion from 'size_t' to 'USHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5150) : warning C4244: '='
> : conversion from 'int' to 'USHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5492) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5493) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5497) : warning C4244:
> 'function' : conversion from 'int' to 'USHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5529) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5530) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5558) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5559) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(7058) : warning C4244: '='
> : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8172) : warning C4055:
> 'type cast' : from data pointer 'void *' to function pointer
> 'HB_EVALSCOPE_FUNC'
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8677) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8677) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8854) : warning C4244: '-='
> : conversion from 'int' to 'SHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8945) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8945) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8991) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8991) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(9248) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(9248) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(9616) : warning C4244: '='
> : conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbffpt\dbffpt1.c(581) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbffpt\dbffpt1.c(615) : warning C4310: cast truncates constant value
> source\rdd\dbffpt\dbffpt1.c(998) : warning C4310: cast truncates constant value
> source\rdd\dbffpt\dbffpt1.c(3598) : warning C4244: '=' : conversion
> from 'HB_FOFFSET' to 'ULONG', possible loss of data
> source\rdd\dbffpt\dbffpt1.c(3855) : warning C4244: '=' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rdd\dbffpt\dbffpt1.c(3885) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbffpt\dbffpt1.c(3898) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbffpt\dbffpt1.c(4413) : warning C4244: '=' : conversion
> from 'HB_FOFFSET' to 'ULONG', possible loss of data
> source\rdd\dbffpt\dbffpt1.c(4746) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbffpt\dbffpt1.c(4763) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbffpt\dbffpt1.c(5035) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbffpt\dbffpt1.c(5111) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(321) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(388) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(389) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(399) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(400) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(411) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(412) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(420) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(421) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(423) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(425) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(451) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(454) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(458) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(460) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(485) : warning C4244: '=' : conversion from
> 'int' to 'short', possible loss of data
> source\rdd\hbsix\sxcompr.c(526) : warning C4244: '=' : conversion from
> 'int' to 'short', possible loss of data
> source\rdd\hbsix\sxcrypt.c(107) : warning C4244: '=' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rdd\hbsix\sxcrypt.c(109) : warning C4244: '=' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rdd\hbsix\sxcrypt.c(127) : warning C4244: '=' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rdd\hbsix\sxcrypt.c(128) : warning C4244: '=' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rdd\hsx\hsx.c(721) : warning C4244: '=' : conversion from
> 'UINT32' to 'USHORT', possible loss of data
> source\rdd\hsx\hsx.c(1381) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(124) : warning C4244: 'initializing' :
> conversion from 'int' to 'ERRCODE', possible loss of data
> source\rdd\usrrdd\usrrdd.c(214) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(215) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(216) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(247) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(342) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(463) : warning C4244: 'initializing' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(472) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(484) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(485) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(536) : warning C4244: 'initializing' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(554) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(555) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(815) : warning C4054: 'type cast' : from
> function pointer 'DBENTRYP_SVP' to data pointer 'PHB_ITEM'
> source\rdd\usrrdd\usrrdd.c(1300) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(1911) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(2877) : warning C4055: 'type cast' : from
> data pointer 'PHB_ITEM' to function pointer 'DBENTRYP_SVP'
> source\rdd\usrrdd\usrrdd.c(2887) : warning C4244: 'initializing' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3091) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3278) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3385) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3393) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3404) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3428) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3458) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3458) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3474) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3543) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3750) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3780) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3971) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(4127) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(4215) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(4215) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(4224) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(4224) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(4269) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rtl\gtwin\gtwin.c(778) : warning C4244: '-=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rtl\gtwin\gtwin.c(779) : warning C4244: '-=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rtl\gtwvt\gtwvt.c(755) : warning C4244: '+=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rtl\gtwvt\gtwvt.c(756) : warning C4244: '+=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rtl\gtwvt\gtwvt.c(782) : warning C4244: '+=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rtl\gtwvt\gtwvt.c(783) : warning C4244: '+=' : conversion from
> 'int' to 'USHORT', possible loss of data
> macroy.c(1900) : warning C4244: '=' : conversion from 'int' to
> 'yytype_int16', possible loss of data
> d:\cvs\harbour\macroy.c(3095) : warning C4701: potentially
> uninitialized local variable 'hb_macrolval' used
> source\rtl\binnumx.c(86) : warning C4244: '=' : conversion from 'int'
> to 'char', possible loss of data
> source\rtl\binnumx.c(87) : warning C4244: '=' : conversion from 'int'
> to 'char', possible loss of data
> source\rtl\cdpapi.c(137) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rtl\cdpapi.c(142) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rtl\cdpapi.c(143) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rtl\cdpapi.c(148) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rtl\cdpapi.c(149) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rtl\cdpapi.c(150) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rtl\console.c(250) : warning C4244: '+=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rtl\console.c(264) : warning C4244: '+=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rtl\gtapi.c(178) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gtapi.c(196) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gtapi.c(214) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gtapi.c(235) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gtapi.c(285) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rtl\gtapi.c(422) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rtl\gtapi.c(499) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rtl\gtapi.c(515) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rtl\gtapi.c(601) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gtapi.c(775) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gtapi.c(845) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gtapi.c(863) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gtapi.c(1255) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gtapi.c(1255) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gtapi.c(1275) : warning C4244: 'function' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\gttone.c(204) : warning C4244: 'function' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rtl\hardcr.c(64) : warning C4310: cast truncates constant value
> source\rtl\hbgtcore.c(137) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rtl\hbgtcore.c(138) : warning C4244: '=' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(312) : warning C4244: '=' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(322) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rtl\hbgtcore.c(799) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(927) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(927) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(936) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(936) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(980) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rtl\hbgtcore.c(981) : warning C4244: '=' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1291) : warning C4244: 'initializing' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1493) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1493) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1754) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1755) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1768) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1781) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1793) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1795) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1796) : warning C4244: 'function' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rtl\hbgtcore.c(1994) : warning C4244: '=' : conversion from
> 'int' to 'UINT16', possible loss of data
> source\rtl\hbgtcore.c(1995) : warning C4244: '=' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rtl\hbinet.c(1695) : warning C4244: 'function' : conversion
> from 'int' to 'u_short', possible loss of data
> source\rtl\hbinet.c(1698) : warning C4244: '=' : conversion from 'int'
> to 'u_short', possible loss of data
> source\rtl\hbinet.c(1860) : warning C4244: 'function' : conversion
> from 'int' to 'u_short', possible loss of data
> source\rtl\hbinet.c(1863) : warning C4244: '=' : conversion from 'int'
> to 'u_short', possible loss of data
> source\rtl\hbinet.c(1917) : warning C4244: 'function' : conversion
> from 'int' to 'u_short', possible loss of data
> source\rtl\hbinet.c(1920) : warning C4244: '=' : conversion from 'int'
> to 'u_short', possible loss of data
> source\rtl\hbinet.c(1978) : warning C4244: 'function' : conversion
> from 'int' to 'u_short', possible loss of data
> source\rtl\hbinet.c(1981) : warning C4244: '=' : conversion from 'int'
> to 'u_short', possible loss of data
> source\rtl\hbinet.c(2090) : warning C4244: 'function' : conversion
> from 'int' to 'u_short', possible loss of data
> source\rtl\mlcfunc.c(89) : warning C4310: cast truncates constant value
> source\rtl\mlcfunc.c(126) : warning C4310: cast truncates constant value
> source\rtl\mlcfunc.c(293) : warning C4310: cast truncates constant value
> source\rtl\mlcfunc.c(436) : warning C4310: cast truncates constant value
> source\rtl\mlcfunc.c(438) : warning C4310: cast truncates constant value
> source\rtl\mlcfunc.c(440) : warning C4310: cast truncates constant value
> source\rtl\mtran.c(73) : warning C4310: cast truncates constant value
> source\macro\macrolex.c(205) : warning C4244: '=' : conversion from
> 'int' to 'UCHAR', possible loss of data
> source\macro\macrolex.c(206) : warning C4244: '=' : conversion from
> 'int' to 'UCHAR', possible loss of data
> source\macro\macrolex.c(213) : warning C4244: '=' : conversion from
> 'int' to 'UCHAR', possible loss of data
> source\hbzlib\deflate.c(614) : warning C4244: '=' : conversion from
> 'int' to 'Bytef', possible loss of data
> source\hbzlib\deflate.c(616) : warning C4244: '=' : conversion from
> 'uInt' to 'Bytef', possible loss of data
> source\hbzlib\deflate.c(617) : warning C4244: '=' : conversion from
> 'uInt' to 'Bytef', possible loss of data
> source\hbzlib\deflate.c(702) : warning C4244: '=' : conversion from
> 'int' to 'Bytef', possible loss of data
> source\hbzlib\deflate.c(733) : warning C4244: '=' : conversion from
> 'int' to 'Bytef', possible loss of data
> source\hbzlib\deflate.c(1507) : warning C4244: 'initializing' :
> conversion from 'uInt' to 'uch', possible loss of data
> source\hbzlib\deflate.c(1507) : warning C4244: 'initializing' :
> conversion from 'uInt' to 'ush', possible loss of data
> source\hbzlib\deflate.c(1629) : warning C4244: 'initializing' :
> conversion from 'uInt' to 'uch', possible loss of data
> source\hbzlib\deflate.c(1629) : warning C4244: 'initializing' :
> conversion from 'uInt' to 'ush', possible loss of data
> source\hbzlib\gzio.c(418) : warning C4244: '=' : conversion from 'int'
> to 'Byte', possible loss of data
> source\hbzlib\inflate.c(711) : warning C4244: '=' : conversion from
> 'unsigned int' to 'Bytef', possible loss of data
> source\hbzlib\inflate.c(732) : warning C4244: '=' : conversion from
> 'unsigned int' to 'Bytef', possible loss of data
> source\hbzlib\trees.c(604) : warning C4244: '=' : conversion from
> 'unsigned int' to 'ush', possible loss of data
> source\hbzlib\trees.c(728) : warning C4244: '+=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(773) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(777) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(780) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(780) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(783) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(783) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(786) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(786) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(848) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(849) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(850) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(853) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(873) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(895) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(896) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(907) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(908) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(988) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(994) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(1087) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(1092) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(1096) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(1102) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(1106) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\hbzlib\trees.c(1116) : warning C4244: '=' : conversion from
> 'int' to 'ush', possible loss of data
> source\rdd\dbcmd.c(395) : warning C4244: 'function' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(458) : warning C4244: 'function' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(841) : warning C4244: 'function' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(890) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(904) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(941) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(1487) : warning C4244: 'function' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(1524) : warning C4244: 'function' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(1694) : warning C4244: 'function' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(1726) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(1735) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(1775) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(1898) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(1900) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(2030) : warning C4244: 'function' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(2097) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(2121) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd.c(2145) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd53.c(353) : warning C4244: 'function' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd53.c(387) : warning C4244: 'function' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd53.c(407) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd53.c(413) : warning C4244: 'function' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd53.c(437) : warning C4244: 'function' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd53.c(463) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd53.c(471) : warning C4244: 'function' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbcmd53.c(495) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbcmd53.c(501) : warning C4244: 'function' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\workarea.c(355) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\wacore.c(95) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\wacore.c(307) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\wacore.c(320) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\wacore.c(450) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\wafunc.c(699) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\wafunc.c(771) : warning C4244: 'function' : conversion from
> 'const int' to 'USHORT', possible loss of data
> source\rdd\wafunc.c(1030) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(1612) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2222) : warning C4244: '=' : conversion from 'ULONG'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2768) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rdd\dbf1.c(2780) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rdd\dbf1.c(2899) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2913) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2923) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2933) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2943) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2955) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2974) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2981) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2988) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(2997) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(3012) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(3019) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(3027) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(3034) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(3044) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(3054) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(3629) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rdd\dbf1.c(3807) : warning C4244: '-=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(4007) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(4940) : warning C4244: '=' : conversion from 'ULONG'
> to 'USHORT', possible loss of data
> source\rdd\dbf1.c(5418) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rdd\dbf1.c(5437) : warning C4244: '=' : conversion from 'int'
> to 'BYTE', possible loss of data
> source\rdd\dbf1.c(5554) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\delim1.c(83) : warning C4244: '=' : conversion from
> 'size_t' to 'USHORT', possible loss of data
> source\rdd\delim1.c(1121) : warning C4244: '+=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\sdf1.c(82) : warning C4244: '=' : conversion from 'size_t'
> to 'USHORT', possible loss of data
> source\rdd\sdf1.c(108) : warning C4244: '=' : conversion from 'ULONG'
> to 'USHORT', possible loss of data
> source\rdd\sdf1.c(172) : warning C4244: '=' : conversion from 'ULONG'
> to 'USHORT', possible loss of data
> source\rdd\sdf1.c(868) : warning C4244: '+=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2378) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2433) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2457) : warning C4244: '=' : conversion
> from 'int' to 'SHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2539) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2548) : warning C4244: '=' : conversion
> from 'int' to 'SHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2551) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2814) : warning C4244: '-=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2843) : warning C4244: '-=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2929) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2969) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(2983) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(3004) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(3076) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(3429) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(3433) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(4229) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(7019) : warning C4055: 'type cast' : from
> data pointer 'void *' to function pointer 'HB_EVALSCOPE_FUNC'
> source\rdd\dbfntx\dbfntx1.c(7689) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfntx\dbfntx1.c(7737) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(408) : warning C4244: '=' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(1559) : warning C4244: '=' : conversion
> from 'int' to 'SHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(1570) : warning C4244: '-=' : conversion
> from 'int' to 'SHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(1583) : warning C4244: '=' : conversion
> from 'int' to 'SHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(1794) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(1800) : warning C4244: '=' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(1802) : warning C4244: '=' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(2017) : warning C4244: '-=' : conversion
> from 'int' to 'SHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(2094) : warning C4244: '+=' : conversion
> from 'int' to 'SHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(2217) : warning C4244: '-=' : conversion
> from 'int' to 'SHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(2693) : warning C4244: '=' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(2752) : warning C4244: '=' : conversion
> from 'SHORT' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(2754) : warning C4244: '=' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(2805) : warning C4244: '=' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(3465) : warning C4244: '=' : conversion
> from 'size_t' to 'USHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(3466) : warning C4244: '=' : conversion
> from 'size_t' to 'USHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(5150) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(5492) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(5493) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(5497) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(5529) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(5530) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(5558) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(5559) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(7058) : warning C4244: '=' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(8172) : warning C4055: 'type cast' : from
> data pointer 'void *' to function pointer 'HB_EVALSCOPE_FUNC'
> source\rdd\dbfcdx\dbfcdx1.c(8677) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(8677) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(8854) : warning C4244: '-=' : conversion
> from 'int' to 'SHORT', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(8945) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(8945) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(8991) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(8991) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(9248) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(9248) : warning C4244: 'function' :
> conversion from 'int' to 'BYTE', possible loss of data
> source\rdd\dbfcdx\dbfcdx1.c(9680) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(408) : warning C4244: '=' :
> conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1559) : warning C4244: '='
> : conversion from 'int' to 'SHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1570) : warning C4244: '-='
> : conversion from 'int' to 'SHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1583) : warning C4244: '='
> : conversion from 'int' to 'SHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1794) : warning C4244: '='
> : conversion from 'int' to 'USHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1800) : warning C4244: '='
> : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(1802) : warning C4244: '='
> : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2017) : warning C4244: '-='
> : conversion from 'int' to 'SHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2094) : warning C4244: '+='
> : conversion from 'int' to 'SHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2217) : warning C4244: '-='
> : conversion from 'int' to 'SHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2695) : warning C4244: '='
> : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2752) : warning C4244: '='
> : conversion from 'SHORT' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2756) : warning C4244: '='
> : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(2807) : warning C4244: '='
> : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(3465) : warning C4244: '='
> : conversion from 'size_t' to 'USHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(3466) : warning C4244: '='
> : conversion from 'size_t' to 'USHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5150) : warning C4244: '='
> : conversion from 'int' to 'USHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5492) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5493) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5497) : warning C4244:
> 'function' : conversion from 'int' to 'USHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5529) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5530) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5558) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(5559) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(7058) : warning C4244: '='
> : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8172) : warning C4055:
> 'type cast' : from data pointer 'void *' to function pointer
> 'HB_EVALSCOPE_FUNC'
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8677) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8677) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8854) : warning C4244: '-='
> : conversion from 'int' to 'SHORT', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8945) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8945) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8991) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(8991) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(9248) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(9248) : warning C4244:
> 'function' : conversion from 'int' to 'BYTE', possible loss of data
> d:\cvs\harbour\source\rdd\dbfcdx\dbfcdx1.c(9616) : warning C4244: '='
> : conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbffpt\dbffpt1.c(581) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbffpt\dbffpt1.c(615) : warning C4310: cast truncates constant value
> source\rdd\dbffpt\dbffpt1.c(998) : warning C4310: cast truncates constant value
> source\rdd\dbffpt\dbffpt1.c(3598) : warning C4244: '=' : conversion
> from 'HB_FOFFSET' to 'ULONG', possible loss of data
> source\rdd\dbffpt\dbffpt1.c(3855) : warning C4244: '=' : conversion
> from 'int' to 'BYTE', possible loss of data
> source\rdd\dbffpt\dbffpt1.c(3885) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbffpt\dbffpt1.c(3898) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbffpt\dbffpt1.c(4413) : warning C4244: '=' : conversion
> from 'HB_FOFFSET' to 'ULONG', possible loss of data
> source\rdd\dbffpt\dbffpt1.c(4746) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbffpt\dbffpt1.c(4763) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\dbffpt\dbffpt1.c(5035) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\dbffpt\dbffpt1.c(5111) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(321) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(388) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(389) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(399) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(400) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(411) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(412) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(420) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(421) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(423) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(425) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(451) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(454) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(458) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(460) : warning C4244: '=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rdd\hbsix\sxcompr.c(485) : warning C4244: '=' : conversion from
> 'int' to 'short', possible loss of data
> source\rdd\hbsix\sxcompr.c(526) : warning C4244: '=' : conversion from
> 'int' to 'short', possible loss of data
> source\rdd\hbsix\sxcrypt.c(107) : warning C4244: '=' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rdd\hbsix\sxcrypt.c(109) : warning C4244: '=' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rdd\hbsix\sxcrypt.c(127) : warning C4244: '=' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rdd\hbsix\sxcrypt.c(128) : warning C4244: '=' : conversion from
> 'int' to 'BYTE', possible loss of data
> source\rdd\hsx\hsx.c(721) : warning C4244: '=' : conversion from
> 'UINT32' to 'USHORT', possible loss of data
> source\rdd\hsx\hsx.c(1381) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(124) : warning C4244: 'initializing' :
> conversion from 'int' to 'ERRCODE', possible loss of data
> source\rdd\usrrdd\usrrdd.c(214) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(215) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(216) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(247) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(342) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(463) : warning C4244: 'initializing' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(472) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(484) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(485) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(536) : warning C4244: 'initializing' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(554) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(555) : warning C4244: '=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(815) : warning C4054: 'type cast' : from
> function pointer 'DBENTRYP_SVP' to data pointer 'PHB_ITEM'
> source\rdd\usrrdd\usrrdd.c(1300) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(1911) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(2877) : warning C4055: 'type cast' : from
> data pointer 'PHB_ITEM' to function pointer 'DBENTRYP_SVP'
> source\rdd\usrrdd\usrrdd.c(2887) : warning C4244: 'initializing' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3091) : warning C4244: '=' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3278) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3385) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3393) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3404) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3428) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3458) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3458) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3474) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3543) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3750) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3780) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(3971) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(4127) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(4215) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(4215) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(4224) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(4224) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rdd\usrrdd\usrrdd.c(4269) : warning C4244: 'function' :
> conversion from 'int' to 'USHORT', possible loss of data
> source\rtl\gtwin\gtwin.c(778) : warning C4244: '-=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rtl\gtwin\gtwin.c(779) : warning C4244: '-=' : conversion from
> 'int' to 'SHORT', possible loss of data
> source\rtl\gtwvt\gtwvt.c(755) : warning C4244: '+=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rtl\gtwvt\gtwvt.c(756) : warning C4244: '+=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rtl\gtwvt\gtwvt.c(782) : warning C4244: '+=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\rtl\gtwvt\gtwvt.c(783) : warning C4244: '+=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\vm\classes.c(3273) : warning C4244: '+=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\vm\classes.c(3566) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\classes.c(4073) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\classes.c(4097) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\codebloc.c(218) : warning C4244: '=' : conversion from 'int'
> to 'SHORT', possible loss of data
> source\vm\dynlibhb.c(177) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\eval.c(422) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\evalhb.c(66) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\fm.c(360) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\fm.c(439) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\fm.c(799) : warning C4244: '=' : conversion from 'int' to
> 'char', possible loss of data
> source\vm\fm.c(801) : warning C4244: '=' : conversion from 'int' to
> 'char', possible loss of data
> source\vm\hvm.c(6134) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6191) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6214) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6216) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6230) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6232) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6237) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\itemapi.c(825) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1008) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1009) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1032) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1036) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1085) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1109) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1141) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\macro.c(1382) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\classes.c(3273) : warning C4244: '+=' : conversion from
> 'int' to 'USHORT', possible loss of data
> source\vm\classes.c(3566) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\classes.c(4073) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\classes.c(4097) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\codebloc.c(218) : warning C4244: '=' : conversion from 'int'
> to 'SHORT', possible loss of data
> source\vm\dynlibhb.c(177) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\eval.c(422) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\evalhb.c(66) : warning C4244: 'initializing' : conversion
> from 'int' to 'USHORT', possible loss of data
> source\vm\fm.c(360) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\fm.c(439) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\fm.c(799) : warning C4244: '=' : conversion from 'int' to
> 'char', possible loss of data
> source\vm\fm.c(801) : warning C4244: '=' : conversion from 'int' to
> 'char', possible loss of data
> source\vm\hvm.c(6134) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6191) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6214) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6216) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6230) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6232) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\hvm.c(6237) : warning C4244: '=' : conversion from 'int' to
> 'USHORT', possible loss of data
> source\vm\itemapi.c(825) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1008) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1009) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1032) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1036) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1085) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1109) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\itemapi.c(1141) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\macro.c(1382) : warning C4244: '=' : conversion from 'int'
> to 'USHORT', possible loss of data
> source\vm\thread.c(832) : warning C4244: '=' : conversion from
> 'HB_ULONG' to 'ULONG', possible loss of data
>
